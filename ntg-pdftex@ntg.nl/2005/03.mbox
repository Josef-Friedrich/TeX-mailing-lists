From noreply at sarovar.org  Tue Mar  1 13:38:21 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Tue Mar  1 13:41:53 2005
Subject: [NTG-pdftex] [ pdftex-Patches-259 ] Expanded png inclusion support
Message-ID: <E1D66dp-000774-00@sarovar.org>

Patches item #259, was opened at 2005-01-11 16:44
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=259&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Taco Hoekwater (taco)
Assigned to: Nobody (None)
Summary: Expanded png inclusion support

Initial Comment:
The attached zip file contains a change file for all
pdftex's (to be applied *after* hz.cg) and a completely
new writepng.c



----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2005-03-01 13:38

Message:
Logged In: YES 
user_id=1608

This update fixes the \pdfoptionimageforcegray bugs
discovered by Hartmut.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-02-28 17:27

Message:
Logged In: YES 
user_id=1608

Sorry, I forgot the 16-bit color code in the previous version

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-02-28 16:38

Message:
Logged In: YES 
user_id=1608

This new version incorporates the code from Hartmut's speed 
patch.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=259&group_id=106
From noreply at sarovar.org  Tue Mar  1 19:06:23 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Tue Mar  1 19:09:54 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-302 ] -jobname doesn't overcome texput
Message-ID: <E1D6BlH-0007uE-00@sarovar.org>

Bugs item #302, was opened at 2005-03-01 13:06
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=302&group_id=106

Category: None
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: John Denker (jsd)
Assigned to: Nobody (None)
Summary: -jobname doesn't overcome texput

Initial Comment:
Hi --

Suppose I want to pipe commands into pdflatex:
       echo '\typeout{---\jobname---}' | \
         pdflatex --jobname foo

You might expect that to type out ---foo---
but instead it types out ---texput---

I observe that --jobname works just fine for
any filename I can think of, just not when the
filename is absent entirely.

I can offer two workarounds:
  1) It's not documented, but nevertheless possible
   to \def\jobname{foo}.

  2) Of course it's possible to stuff the commands
   into tmp.tex and then pdflatex --jobname foo tmp.tex

Because these workarounds exist, I would rate this
as a very low-priority bug.  But it had me surprised
and confused for a while.  Given the overall high 
quality of the product, I thought I'd bring it to 
your attention.


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=302&group_id=106
From noreply at sarovar.org  Wed Mar  2 13:30:54 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Mar  2 13:34:24 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-303 ] bug in paper metrics?
Message-ID: <E1D6T0A-0005lx-00@sarovar.org>

Bugs item #303, was opened at 2005-03-02 12:30
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=303&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Wolfgang Glitzner (wolfgang_gg)
Assigned to: Nobody (None)
Summary: bug in paper metrics?

Initial Comment:
Hello there, Texies.

Is there a bug in the paper metrics of pdftex or in 
an involved package?
Or just only in the acrobat reader?

I produce a pdf doc with pdftex. In particular I use
\documentclass[twoside,a5paper]{book}
.
.
.
\setlength{\topmargin}{-2.04mm}
\setlength{\textheight}{140.15mm}
\setlength{\textwidth}{99.1mm}
\setlength{\oddsidemargin}{-8.88mm}
\setlength{\evensidemargin}{7.63mm}
.
.
.


The Check produces:
1) a dump of \the\paperwidth in the logfile
   gives 421.10078pt, which is 147.999999999mm.
2) the document properties in the acrobat reader 
displays
   148 x 210 mm
3) invoking printing on my canon i450 opens a window 
in which
   the field preview tells
   Paper: 209.97 x 296.7 mm (I have DINA4 mounted, so 
far, so good)
   Document: 147.8 x 209.9 mm
4) DINA5 has exactly 210.22 x 148.65 mm
5) DINA4 has exactly 297.30 x 210.22 mm

What width my document really has?
   148mm or 147,8mm or 148,65mm  ??
There is physically only one!

And what I assumed and need is a width of 148,65mm. 
How to apply?

Moreover, gluing 2 pages of my doc together with the 
pdfpages package
works fine. 2 DINA5 onto 1 DINA4. In particular I use
\documentclass[twoside,a4paper]{book} However, 
because a DINA5-page
misses approx. 0.65mm, some additional adaption is 
necessary.
However, pdfpages applies a parameter for that 
action. good luck.

The Check produces:
1) a dump of \the\paperheight in the logfile
   gives 421.10078pt, which is 147.999999999mm.
2) the document properties in the acrobat reader 
displays
   297 x 210mm
3) invoking printing on my canon i450 opens a window 
in which
   the field preview tells
   Paper 209.9 x 296.7mm
   Document 296.7 x 209.9mm

General question: IS THE PAPER-metric FOR DINA5 AND 
DINA4 CORRECT
IN THE APPROPRIATE PACKAGE?

Regards

Wolfgang Glitzner@gmx.de

n.b.
1a) A logged metric of pdfpages compilation which 
keeps the DINA5 is:
    421.10124pt x 597.50829pt
    which is 148.00015991mm x 210.0001462mm.
1b) A logged metric of pdfpages compilation which 
keeps the DINA4 is:
    597.50787pt x 845.04684pt
    which is 209.9999986mm x 296.9999963mm

2) Some conversions:
72,27 point (amerikanische) sind 1 inch -- exakt!
1 inch sind 25,4 mm -- exakt!
72,27 point/ 25,4 mm = 2,845 point/mm oder 0,3513 
mm/point.
dots sind nicht points und schon gar nicht pixel.




----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=303&group_id=106
From noreply at sarovar.org  Wed Mar  2 14:39:12 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Mar  2 14:43:06 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-303 ] bug in paper metrics?
Message-ID: <E1D6U4G-00083U-00@sarovar.org>

Bugs item #303, was opened at 2005-03-02 13:30
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=303&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Wolfgang Glitzner (wolfgang_gg)
Assigned to: Nobody (None)
Summary: bug in paper metrics?

Initial Comment:
Hello there, Texies.

Is there a bug in the paper metrics of pdftex or in 
an involved package?
Or just only in the acrobat reader?

I produce a pdf doc with pdftex. In particular I use
\documentclass[twoside,a5paper]{book}
.
.
.
\setlength{\topmargin}{-2.04mm}
\setlength{\textheight}{140.15mm}
\setlength{\textwidth}{99.1mm}
\setlength{\oddsidemargin}{-8.88mm}
\setlength{\evensidemargin}{7.63mm}
.
.
.


The Check produces:
1) a dump of \the\paperwidth in the logfile
   gives 421.10078pt, which is 147.999999999mm.
2) the document properties in the acrobat reader 
displays
   148 x 210 mm
3) invoking printing on my canon i450 opens a window 
in which
   the field preview tells
   Paper: 209.97 x 296.7 mm (I have DINA4 mounted, so 
far, so good)
   Document: 147.8 x 209.9 mm
4) DINA5 has exactly 210.22 x 148.65 mm
5) DINA4 has exactly 297.30 x 210.22 mm

What width my document really has?
   148mm or 147,8mm or 148,65mm  ??
There is physically only one!

And what I assumed and need is a width of 148,65mm. 
How to apply?

Moreover, gluing 2 pages of my doc together with the 
pdfpages package
works fine. 2 DINA5 onto 1 DINA4. In particular I use
\documentclass[twoside,a4paper]{book} However, 
because a DINA5-page
misses approx. 0.65mm, some additional adaption is 
necessary.
However, pdfpages applies a parameter for that 
action. good luck.

The Check produces:
1) a dump of \the\paperheight in the logfile
   gives 421.10078pt, which is 147.999999999mm.
2) the document properties in the acrobat reader 
displays
   297 x 210mm
3) invoking printing on my canon i450 opens a window 
in which
   the field preview tells
   Paper 209.9 x 296.7mm
   Document 296.7 x 209.9mm

General question: IS THE PAPER-metric FOR DINA5 AND 
DINA4 CORRECT
IN THE APPROPRIATE PACKAGE?

Regards

Wolfgang Glitzner@gmx.de

n.b.
1a) A logged metric of pdfpages compilation which 
keeps the DINA5 is:
    421.10124pt x 597.50829pt
    which is 148.00015991mm x 210.0001462mm.
1b) A logged metric of pdfpages compilation which 
keeps the DINA4 is:
    597.50787pt x 845.04684pt
    which is 209.9999986mm x 296.9999963mm

2) Some conversions:
72,27 point (amerikanische) sind 1 inch -- exakt!
1 inch sind 25,4 mm -- exakt!
72,27 point/ 25,4 mm = 2,845 point/mm oder 0,3513 
mm/point.
dots sind nicht points und schon gar nicht pixel.




----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-03-02 14:39

Message:
Logged In: YES 
user_id=1608

This is a 'bug' in article.cls, not pdftex. 

I suggest closing this tracker item.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=303&group_id=106
From noreply at sarovar.org  Wed Mar  2 14:46:37 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Mar  2 14:50:31 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-303 ] bug in paper metrics?
Message-ID: <E1D6UBR-00088t-00@sarovar.org>

Bugs item #303, was opened at 2005-03-02 13:30
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=303&group_id=106

Category: None
>Group: v1.21a
>Status: Closed
>Resolution: Rejected
Priority: 5
Submitted By: Wolfgang Glitzner (wolfgang_gg)
Assigned to: Nobody (None)
Summary: bug in paper metrics?

Initial Comment:
Hello there, Texies.

Is there a bug in the paper metrics of pdftex or in 
an involved package?
Or just only in the acrobat reader?

I produce a pdf doc with pdftex. In particular I use
\documentclass[twoside,a5paper]{book}
.
.
.
\setlength{\topmargin}{-2.04mm}
\setlength{\textheight}{140.15mm}
\setlength{\textwidth}{99.1mm}
\setlength{\oddsidemargin}{-8.88mm}
\setlength{\evensidemargin}{7.63mm}
.
.
.


The Check produces:
1) a dump of \the\paperwidth in the logfile
   gives 421.10078pt, which is 147.999999999mm.
2) the document properties in the acrobat reader 
displays
   148 x 210 mm
3) invoking printing on my canon i450 opens a window 
in which
   the field preview tells
   Paper: 209.97 x 296.7 mm (I have DINA4 mounted, so 
far, so good)
   Document: 147.8 x 209.9 mm
4) DINA5 has exactly 210.22 x 148.65 mm
5) DINA4 has exactly 297.30 x 210.22 mm

What width my document really has?
   148mm or 147,8mm or 148,65mm  ??
There is physically only one!

And what I assumed and need is a width of 148,65mm. 
How to apply?

Moreover, gluing 2 pages of my doc together with the 
pdfpages package
works fine. 2 DINA5 onto 1 DINA4. In particular I use
\documentclass[twoside,a4paper]{book} However, 
because a DINA5-page
misses approx. 0.65mm, some additional adaption is 
necessary.
However, pdfpages applies a parameter for that 
action. good luck.

The Check produces:
1) a dump of \the\paperheight in the logfile
   gives 421.10078pt, which is 147.999999999mm.
2) the document properties in the acrobat reader 
displays
   297 x 210mm
3) invoking printing on my canon i450 opens a window 
in which
   the field preview tells
   Paper 209.9 x 296.7mm
   Document 296.7 x 209.9mm

General question: IS THE PAPER-metric FOR DINA5 AND 
DINA4 CORRECT
IN THE APPROPRIATE PACKAGE?

Regards

Wolfgang Glitzner@gmx.de

n.b.
1a) A logged metric of pdfpages compilation which 
keeps the DINA5 is:
    421.10124pt x 597.50829pt
    which is 148.00015991mm x 210.0001462mm.
1b) A logged metric of pdfpages compilation which 
keeps the DINA4 is:
    597.50787pt x 845.04684pt
    which is 209.9999986mm x 296.9999963mm

2) Some conversions:
72,27 point (amerikanische) sind 1 inch -- exakt!
1 inch sind 25,4 mm -- exakt!
72,27 point/ 25,4 mm = 2,845 point/mm oder 0,3513 
mm/point.
dots sind nicht points und schon gar nicht pixel.




----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2005-03-02 14:46

Message:
Logged In: YES 
user_id=421

\usepackage{geometry}

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-03-02 14:39

Message:
Logged In: YES 
user_id=1608

This is a 'bug' in article.cls, not pdftex. 

I suggest closing this tracker item.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=303&group_id=106
From noreply at sarovar.org  Wed Mar  2 18:25:33 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Mar  2 18:29:22 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-304 ] Names of expanded fonts not in log
	output
Message-ID: <E1D6XbJ-0005m3-00@sarovar.org>

Bugs item #304, was opened at 2005-03-02 17:25
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=304&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Names of expanded fonts not in log output

Initial Comment:
When using font expansion, the log output will not
contain the names of the expanded fonts but the null
character instead (resp. ^^@).

%-------------------------------------
\pdfadjustspacing=2
\pdffontexpand\font 20 20 5 autoexpand
\tracingoutput=1
test

\parfillskip 0pt
test
\bye
%-------------------------------------

Regards,
Robert.


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=304&group_id=106
From noreply at sarovar.org  Wed Mar  2 22:15:23 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Mar  2 22:20:21 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-303 ] bug in paper metrics?
Message-ID: <E1D6bBj-0005lO-00@sarovar.org>

Bugs item #303, was opened at 2005-03-02 13:30
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=303&group_id=106

Category: None
Group: v1.21a
Status: Closed
Resolution: Rejected
Priority: 5
Submitted By: Wolfgang Glitzner (wolfgang_gg)
Assigned to: Nobody (None)
Summary: bug in paper metrics?

Initial Comment:
Hello there, Texies.

Is there a bug in the paper metrics of pdftex or in 
an involved package?
Or just only in the acrobat reader?

I produce a pdf doc with pdftex. In particular I use
\documentclass[twoside,a5paper]{book}
.
.
.
\setlength{\topmargin}{-2.04mm}
\setlength{\textheight}{140.15mm}
\setlength{\textwidth}{99.1mm}
\setlength{\oddsidemargin}{-8.88mm}
\setlength{\evensidemargin}{7.63mm}
.
.
.


The Check produces:
1) a dump of \the\paperwidth in the logfile
   gives 421.10078pt, which is 147.999999999mm.
2) the document properties in the acrobat reader 
displays
   148 x 210 mm
3) invoking printing on my canon i450 opens a window 
in which
   the field preview tells
   Paper: 209.97 x 296.7 mm (I have DINA4 mounted, so 
far, so good)
   Document: 147.8 x 209.9 mm
4) DINA5 has exactly 210.22 x 148.65 mm
5) DINA4 has exactly 297.30 x 210.22 mm

What width my document really has?
   148mm or 147,8mm or 148,65mm  ??
There is physically only one!

And what I assumed and need is a width of 148,65mm. 
How to apply?

Moreover, gluing 2 pages of my doc together with the 
pdfpages package
works fine. 2 DINA5 onto 1 DINA4. In particular I use
\documentclass[twoside,a4paper]{book} However, 
because a DINA5-page
misses approx. 0.65mm, some additional adaption is 
necessary.
However, pdfpages applies a parameter for that 
action. good luck.

The Check produces:
1) a dump of \the\paperheight in the logfile
   gives 421.10078pt, which is 147.999999999mm.
2) the document properties in the acrobat reader 
displays
   297 x 210mm
3) invoking printing on my canon i450 opens a window 
in which
   the field preview tells
   Paper 209.9 x 296.7mm
   Document 296.7 x 209.9mm

General question: IS THE PAPER-metric FOR DINA5 AND 
DINA4 CORRECT
IN THE APPROPRIATE PACKAGE?

Regards

Wolfgang Glitzner@gmx.de

n.b.
1a) A logged metric of pdfpages compilation which 
keeps the DINA5 is:
    421.10124pt x 597.50829pt
    which is 148.00015991mm x 210.0001462mm.
1b) A logged metric of pdfpages compilation which 
keeps the DINA4 is:
    597.50787pt x 845.04684pt
    which is 209.9999986mm x 296.9999963mm

2) Some conversions:
72,27 point (amerikanische) sind 1 inch -- exakt!
1 inch sind 25,4 mm -- exakt!
72,27 point/ 25,4 mm = 2,845 point/mm oder 0,3513 
mm/point.
dots sind nicht points und schon gar nicht pixel.




----------------------------------------------------------------------

Comment By: Heiko Oberdiek (oberdiek)
Date: 2005-03-02 22:15

Message:
Logged In: YES 
user_id=1276

\documentclass[a5paper]{article}
\usepackage{hyperref}
%\pdfdecimaldigits=9
\begin{document}
\typeout{paperwidth: \the\paperwidth}
\typeout{paperheight: \the\paperheight}
\typeout{pdfpagewidth: \the\pdfpagewidth}
\typeout{pdfpageheight: \the\pdfpageheight}
\null
\end{document}

http://www.cl.cam.ac.uk/~mgk25/iso-paper.html:
  DIN A4: 148mm x 210mm
  = 421.10078740157pt x 597.50787401575pt
  = 419.52755905512bp x 595.27559055118bp

article.cls:
\DeclareOption{a5paper}
   {\setlength\paperheight {210mm}%
    \setlength\paperwidth  {148mm}}

log file:
paperwidth: 421.10078pt
paperheight: 597.50787pt
pdfpagewidth: 421.10078pt
pdfpageheight: 597.50787pt

PDF /MediaBox:
/MediaBox [0 0 419.528 595.276]

pdfinfo:
  Page size:      419.528 x 595.276 pts

AR5/Linux:
  148 x 210 mm
  419.5 x 595.3 pt (points in AR are bp in TeX!)

Conclusion:
* All values are correct (modulo rounding errors).
* No bug.

Yours sincerely
  Heiko <oberdiek@uni-freiburg.de>

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-02 14:46

Message:
Logged In: YES 
user_id=421

\usepackage{geometry}

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-03-02 14:39

Message:
Logged In: YES 
user_id=1608

This is a 'bug' in article.cls, not pdftex. 

I suggest closing this tracker item.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=303&group_id=106
From staw at gust.org.pl  Wed Mar  2 23:27:41 2005
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Wed Mar  2 23:11:04 2005
Subject: [NTG-pdftex] pdfetex banner
Message-ID: <Pine.LNX.4.44.0503022321400.31596-100000@re86.internetdsl.tpnet.pl>

I recompiled pdfetex from p4 source.development, but even NEWS and 
README say about ver. 1.21a, the banner still shows

./pdfetex --version
pdfeTeX 3.141592-1.20a-2.2 (Web2C 7.5.3)
kpathsea version 3.5.3

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl


From hartmut_henkel at gmx.de  Wed Mar  2 23:45:13 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed Mar  2 23:45:17 2005
Subject: [NTG-pdftex] pdfetex banner
In-Reply-To: <Pine.LNX.4.44.0503022321400.31596-100000@re86.internetdsl.tpnet.pl>
References: <Pine.LNX.4.44.0503022321400.31596-100000@re86.internetdsl.tpnet.pl>
Message-ID: <Pine.LNX.4.61.0503022333200.22718@hahepc1.hahe>

On Wed, 2 Mar 2005, Staszek Wawrykiewicz wrote:

> I recompiled pdfetex from p4 source.development, but even NEWS and
> README say about ver. 1.21a, the banner still shows
>
> ./pdfetex --version
> pdfeTeX 3.141592-1.20a-2.2 (Web2C 7.5.3)
> kpathsea version 3.5.3

Also the texlive/Master/texmf/web2c/pdfetex.pool file is wrong, it shows

18/Producer (pdfTeX-

should be "...(pdfeTeX-"

No idea, why.

Regards, Hartmut
From hartmut_henkel at gmx.de  Wed Mar  2 23:53:53 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed Mar  2 23:53:56 2005
Subject: [NTG-pdftex] pdfetex banner
In-Reply-To: <Pine.LNX.4.44.0503022321400.31596-100000@re86.internetdsl.tpnet.pl>
References: <Pine.LNX.4.44.0503022321400.31596-100000@re86.internetdsl.tpnet.pl>
Message-ID: <Pine.LNX.4.61.0503022352420.23001@hahepc1.hahe>

On Wed, 2 Mar 2005, Staszek Wawrykiewicz wrote:

> I recompiled pdfetex from p4 source.development, but even NEWS and
> README say about ver. 1.21a, the banner still shows
>
> ./pdfetex --version
> pdfeTeX 3.141592-1.20a-2.2 (Web2C 7.5.3)
> kpathsea version 3.5.3

the file pdftex.version is missing from pdftexdir (teTeX-3.0 has it, it
just contains a "1.21a").

Regards, Hartmut
From kakuto at fsci.fuk.kindai.ac.jp  Thu Mar  3 01:56:35 2005
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu Mar  3 01:57:04 2005
Subject: [NTG-pdftex] pdfetex banner
In-Reply-To: Your message of "Wed, 2 Mar 2005 23:53:53 +0100 (CET)"
References: <Pine.LNX.4.61.0503022352420.23001@hahepc1.hahe>
Message-ID: <200503030056.j230uaEx018594@jupiter.fsci.fuk.kindai.ac.jp>

> > I recompiled pdfetex from p4 source.development, but even NEWS and
> > README say about ver. 1.21a, the banner still shows
> >
> > ./pdfetex --version
> > pdfeTeX 3.141592-1.20a-2.2 (Web2C 7.5.3)
> > kpathsea version 3.5.3
> 
> the file pdftex.version is missing from pdftexdir (teTeX-3.0 has it, it
> just contains a "1.21a").

pdftex.version is automatically recreated if pdftex.ch is changed.
If not, check the Makefile.

Best regards,
Akira
From pragma at wxs.nl  Thu Mar  3 15:22:02 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Mar  3 15:22:00 2005
Subject: [NTG-pdftex] missing cropbox 
In-Reply-To: <E1D6UBR-00088t-00@sarovar.org>
References: <E1D6UBR-00088t-00@sarovar.org>
Message-ID: <42271D8A.2070306@wxs.nl>

Recent versions of illustrator don't provide a cropbox but set the trip and 
artbox instead;

I think that it makes sense, when no box spec is given to pdftex, the fallback 
scheme should be:

cropbox
trimbox
artbox
mediabox

instead of

cropbox
mediabox

(interesting how willing adobe is to break compatible behaviour, probably 
because they use version info inthe graphics to adapt their progs behaviour to)

discussions with publishers have learned me that it's impossible to tell 
designers what boxes are needed because they have no clue (i.e. dtp apps just 
let you add such a box, some dtp program slook into the file and determine the 
boundary [dangerous imo], or adding a box is so obscured that it is not done]; 
so i think we should play safe and not expect perfect graphics -)

[this apart from wrong boxes, but we cannot catch that]

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From ms at artcom-gmbh.de  Thu Mar  3 15:29:22 2005
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Mar  3 15:29:25 2005
Subject: [NTG-pdftex] missing cropbox
In-Reply-To: <42271D8A.2070306@wxs.nl>
References: <E1D6UBR-00088t-00@sarovar.org> <42271D8A.2070306@wxs.nl>
Message-ID: <20050303142922.GG29359@blau.artcom-gmbh.de>

On 2005-03-03 15:22:02 +0100, Hans Hagen wrote:
> Recent versions of illustrator don't provide a cropbox but set the trip and 
> artbox instead;
> 
> I think that it makes sense, when no box spec is given to pdftex, the 
> fallback scheme should be:
> 
> cropbox
> trimbox
> artbox
> mediabox
> 
> instead of
> 
> cropbox
> mediabox
> 
> (interesting how willing adobe is to break compatible behaviour, probably 
> because they use version info inthe graphics to adapt their progs behaviour 
> to)

No.

<quote src="PDFReference16.pdf", page=891>
The crop box defines the region to which the contents of the page
are to be clipped (cropped) when displayed or printed. Unlike the
other boxes, the crop box has no defined meaning in terms of
physical page geometry or intended use; it merely imposes
clipping on the page contents. However, in the absence of
additional information (such as imposition instructions specified
in a JDF or PJTF job ticket), the crop box determines how the
pages contents are to be positioned on the output medium. The
default value is the pages media box.
</quote>

Notice the last sentence.

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From pragma at wxs.nl  Thu Mar  3 16:23:29 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Mar  3 16:23:32 2005
Subject: [NTG-pdftex] missing cropbox
In-Reply-To: <20050303142922.GG29359@blau.artcom-gmbh.de>
References: <E1D6UBR-00088t-00@sarovar.org> <42271D8A.2070306@wxs.nl>
	<20050303142922.GG29359@blau.artcom-gmbh.de>
Message-ID: <42272BF1.405@wxs.nl>

Martin Schr?der wrote:

> <quote src="PDFReference16.pdf", page=891>

                           ^^

> The crop box defines the region to which the contents of the page
> are to be clipped (cropped) when displayed or printed. Unlike the
> other boxes, the crop box has no defined meaning in terms of
> physical page geometry or intended use; it merely imposes
> clipping on the page contents. However, in the absence of
> additional information (such as imposition instructions specified
> in a JDF or PJTF job ticket), the crop box determines how the
> pages contents are to be positioned on the output medium. The
> default value is the pages media box.
> </quote>
> 
> Notice the last sentence.

the problem is that "in the beginning of pdf" there were only the mediabox and 
the cropbox; so, having better defined specs is fine, but we do have to deal 
with older graphics, and the main thing i have in mind is strategies, so, either 
we implement something in pdftex, or we need access to the info so that we can 
implement strategies

\pdfgetimagebox artbox|trimbox|cropbox|... {filename}
\pdflastimagellx
\pdflastimagelly
\pdflastimageurx
\pdflastimageury

(zero when not present)

btw, currently a test

\setbox0\hbox{\pdfximage \pdfimagepagenumber ArtBox{...}}

results in an inclusion; is there a reason why unreferences images are included? 
  i think that even

\setbox0\hbox{\pdfximage \pdfimagepagenumber ArtBox{...}\pdfrefximage\pdflastximage}

should not lead to an inclusion unless box 0 is flushed

ps. ghostscript is unaware of other than media/cropboxes, and artbox and such 
get lost in conversion; i already filed this as a bug

it's a pitty that this kind of stuff was not already sorted out in the pdf 1.1 
times

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From noreply at sarovar.org  Thu Mar  3 17:00:19 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Mar  3 17:04:27 2005
Subject: [NTG-pdftex] [ pdftex-Patches-259 ] Expanded png inclusion support
Message-ID: <E1D6skN-000438-00@sarovar.org>

Patches item #259, was opened at 2005-01-11 16:44
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=259&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Taco Hoekwater (taco)
Assigned to: Nobody (None)
Summary: Expanded png inclusion support

Initial Comment:
The attached zip file contains a change file for all
pdftex's (to be applied *after* hz.cg) and a completely
new writepng.c



----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2005-03-03 17:00

Message:
Logged In: YES 
user_id=1608

Bugfixes in 16-bit color depth mode (needs an 8-bit alpha
channel) and corrected PNG transformation discovery for gray
conversion.

This is a final version for now, it should be added to a
pdftex beta to allow 'in the wild' testing.


----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-03-01 13:38

Message:
Logged In: YES 
user_id=1608

This update fixes the \pdfoptionimageforcegray bugs
discovered by Hartmut.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-02-28 17:27

Message:
Logged In: YES 
user_id=1608

Sorry, I forgot the 16-bit color code in the previous version

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-02-28 16:38

Message:
Logged In: YES 
user_id=1608

This new version incorporates the code from Hartmut's speed 
patch.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=259&group_id=106
From noreply at sarovar.org  Sat Mar  5 17:52:43 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Sat Mar  5 17:57:17 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-306 ] cmap: unicode ???? is mapped to
	multiple glyphs
Message-ID: <E1D7cWB-0004gX-00@sarovar.org>

Bugs item #306, was opened at 2005-03-05 17:52
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=306&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Peter Dyballa (ballapete)
Assigned to: Hartmut Henkel (hhenkel)
Summary: cmap: unicode ???? is mapped to multiple glyphs

Initial Comment:
I created symlinks from the Lucida fonts that come with Java runtime 
and I created from them TFM files with ttf2tfm version 1.5, and also a 
map file fragment and FD files. When I access LucidaSans-Oblique 
pdfeTeX, Version 3.141592-1.21a-2.2 (Web2C 7.5.4) reports this:

Error: pdflatex (file /usr/local/teTeX/share/texmf.local/fonts/truetype/
lucida/llsro8a.ttf): cmap: unicode 2010 is mapped to multiple glyphs
 ==> Fatal error occurred, the output PDF file is not finished!

U+2010 is HYPHEN


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=306&group_id=106
From pragma at wxs.nl  Tue Mar  8 15:14:20 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Tue Mar  8 15:14:33 2005
Subject: [NTG-pdftex] note durign talk thanh 
Message-ID: <422DB33C.7060505@wxs.nl>

concerning map entries needed for hz when using dvi / dvips:

why not write the map lines needed to a file "pdftex-hz.map" when in dvi mode

this saves the user to figure out map lines

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From noreply at sarovar.org  Mon Mar 14 12:03:16 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Mon Mar 14 12:07:46 2005
Subject: [NTG-pdftex] [ pdftex-Patches-259 ] Expanded png inclusion support
Message-ID: <E1DAnLw-0001bX-00@sarovar.org>

Patches item #259, was opened at 2005-01-11 16:44
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=259&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Taco Hoekwater (taco)
Assigned to: Nobody (None)
Summary: Expanded png inclusion support

Initial Comment:
The attached zip file contains a change file for all
pdftex's (to be applied *after* hz.cg) and a completely
new writepng.c



----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2005-03-14 12:03

Message:
Logged In: YES 
user_id=1608

changes as agreed at Pont-a-Mousson:
-\pdfoptionimageforcegray removed
-\pdfoptionimageapplygamma is now 0 or 1

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-03-03 17:00

Message:
Logged In: YES 
user_id=1608

Bugfixes in 16-bit color depth mode (needs an 8-bit alpha
channel) and corrected PNG transformation discovery for gray
conversion.

This is a final version for now, it should be added to a
pdftex beta to allow 'in the wild' testing.


----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-03-01 13:38

Message:
Logged In: YES 
user_id=1608

This update fixes the \pdfoptionimageforcegray bugs
discovered by Hartmut.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-02-28 17:27

Message:
Logged In: YES 
user_id=1608

Sorry, I forgot the 16-bit color code in the previous version

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-02-28 16:38

Message:
Logged In: YES 
user_id=1608

This new version incorporates the code from Hartmut's speed 
patch.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=259&group_id=106
From noreply at sarovar.org  Sat Mar 19 20:58:57 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Sat Mar 19 21:03:34 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-310 ] \pdfxform doesn't work with box
	registers > 255. Patch included.
Message-ID: <E1DCk65-00032v-00@sarovar.org>

Bugs item #310, was opened at 2005-03-19 20:58
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=310&group_id=106

Category: etex
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: The Thanh Han (hanthethanh)
Summary: \pdfxform doesn't work with box registers > 255. Patch included.

Initial Comment:
Bug reported by:

Date: Sat, 19 Mar 2005 00:54:40 +0100
From: Pawel Jackowski
To: pdftex@tug.org
Subject: [pdftex] \pdfxform256

Sparse array handling from etex was missing in \pdfxform.
Bug solved by patch to pdfetex.ch2, see pdfetex.ch2.diff. 

Please check.

Regards, Hartmut


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=310&group_id=106
From noreply at sarovar.org  Sun Mar 20 22:00:19 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Sun Mar 20 22:04:56 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-311 ] Dangling font objects with
	non-replacable fonts
Message-ID: <E1DD7X1-0007kh-00@sarovar.org>

Bugs item #311, was opened at 2005-03-20 22:00
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=311&group_id=106

Category: PDF inclusion
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: The Thanh Han (hanthethanh)
Summary: Dangling font objects with non-replacable fonts

Initial Comment:
If a PDF file with a non-replacable font (e. g. a
non-embedded standard-14 font, or a TrueType font) is
included into another PDF file, there is an
unused/dangling fontfile stream object generated.

Details, rough patch, test files see attached patch.tgz.

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=311&group_id=106
From noreply at sarovar.org  Sun Mar 20 22:31:15 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Sun Mar 20 22:36:00 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-311 ] Dangling font objects with
	non-replacable fonts
Message-ID: <E1DD80x-0000Hl-00@sarovar.org>

Bugs item #311, was opened at 2005-03-20 22:00
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=311&group_id=106

Category: PDF inclusion
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: The Thanh Han (hanthethanh)
Summary: Dangling font objects with non-replacable fonts

Initial Comment:
If a PDF file with a non-replacable font (e. g. a
non-embedded standard-14 font, or a TrueType font) is
included into another PDF file, there is an
unused/dangling fontfile stream object generated.

Details, rough patch, test files see attached patch.tgz.

Regards, Hartmut

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-20 22:31

Message:
Logged In: YES 
user_id=929

Ooops, problem affects only Type-1 fonts, as the copyFont()
function else returns already before calling
lookup_fontmap(). Patch unchanged.

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=311&group_id=106
From noreply at sarovar.org  Mon Mar 21 16:53:54 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Mon Mar 21 16:58:14 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DDPE2-0000dn-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 10:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Stan Swiercz (swiercz)
Assigned to: Nobody (None)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From noreply at sarovar.org  Mon Mar 21 17:28:51 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Mon Mar 21 17:33:11 2005
Subject: [NTG-pdftex] 
	[ pdftex-Feature Requests-316 ] cmap, pdftex, distiller
Message-ID: <E1DDPlr-0001fu-00@sarovar.org>

Feature Requests item #316, was opened at 2005-03-21 17:28
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=316&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Michael Zedler (zedler)
Assigned to: Nobody (None)
Summary: cmap, pdftex, distiller

Initial Comment:
Hello,

In order to make pdf files searchable for non-latin
characters (e.g. polytonic greek) one needs to include
so-called cmap files into the pdf. As far as I know
such a pdf can be generated by either
 1) using pdflatex with cmap.sty and an appropriate
.cmap file
 2) using dvips+Distiller (not ps2pdf) 

Adobe Distiller seems to contain extra logic to
automatatically generate appropriate cmaps and also
translate ligatures into single-letter cmap entries.
Generating cmap files by hand is pretty tedious, in
particular if the encoding is automatically generated
by e.g. a tool like otftotfm (non-standard ligatures
are automatically but into free encoding slots;
depending on the font version the assignment varies). 
Thus for the pdftex approach it'd be very nice to have
this automatism, too. Possible?

Michael

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=316&group_id=106
From noreply at sarovar.org  Wed Mar 23 13:43:54 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Mar 23 13:48:18 2005
Subject: [NTG-pdftex] [ pdftex-Feature Requests-317 ] Add spaces to PDF file
	so reflow works..
Message-ID: <E1DE5DG-0008Cx-00@sarovar.org>

Feature Requests item #317, was opened at 2005-03-23 12:43
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=317&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: David Hedley (davidhedley)
Assigned to: Nobody (None)
Summary: Add spaces to PDF file so reflow works..

Initial Comment:

Current PDFs generated by pdfTex do not 'reflow'
properly with Acrobat Reader - selecting 'reflow'
causes all the words to run together. This appears to
be because pdfTex uses explicit kerns for spaces
instead of including the space character in the text
string. Is it possible to change this? (perhaps by
including a space in the text string and adjusting the
explicit kern by the width of the space)


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=317&group_id=106
From noreply at sarovar.org  Wed Mar 23 14:16:07 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Mar 23 14:20:45 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DE5iR-0000hH-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 16:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

>Category: Fonts
>Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Stan Swiercz (swiercz)
Assigned to: Nobody (None)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:16

Message:
Logged In: YES 
user_id=421

I can reproduce the problem with AR5 and AR7(latest "beta")
on Linux. I can't reproduce it with gs 8.50 and Jaws.

I suspect that this is a bug in AR. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From noreply at sarovar.org  Wed Mar 23 14:25:09 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Mar 23 14:29:36 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DE5rB-0000rp-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 16:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Stan Swiercz (swiercz)
Assigned to: Nobody (None)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:25

Message:
Logged In: YES 
user_id=421

This seems to be a build problem on Solaris. Compiling the
example on teTeX 3.0 on Linux produces a pdf that shows no
problems in AR.

A possible cause for the message by AR might be this extract
from pdf_test_solaris.pdf:
---------
29 0 obj <<
/Length1 268436401
/Length2 3204
---------
Length1 is definitely wrong.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:16

Message:
Logged In: YES 
user_id=421

I can reproduce the problem with AR5 and AR7(latest "beta")
on Linux. I can't reproduce it with gs 8.50 and Jaws.

I suspect that this is a bug in AR. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From noreply at sarovar.org  Wed Mar 23 14:29:35 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Mar 23 14:34:09 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DE5vT-0000sj-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 16:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Stan Swiercz (swiercz)
>Assigned to: Thomas Esser (tetex)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:25

Message:
Logged In: YES 
user_id=421

This seems to be a build problem on Solaris. Compiling the
example on teTeX 3.0 on Linux produces a pdf that shows no
problems in AR.

A possible cause for the message by AR might be this extract
from pdf_test_solaris.pdf:
---------
29 0 obj <<
/Length1 268436401
/Length2 3204
---------
Length1 is definitely wrong.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:16

Message:
Logged In: YES 
user_id=421

I can reproduce the problem with AR5 and AR7(latest "beta")
on Linux. I can't reproduce it with gs 8.50 and Jaws.

I suspect that this is a bug in AR. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From noreply at sarovar.org  Wed Mar 23 15:08:49 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Mar 23 15:13:26 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DE6XR-0002Xw-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 10:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Stan Swiercz (swiercz)
Assigned to: Thomas Esser (tetex)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

>Comment By: Stan Swiercz (swiercz)
Date: 2005-03-23 09:08

Message:
Logged In: YES 
user_id=2345

I have done more debugging and I find that with a newer
solaris 9 kernel the executable works fine. There is some
patch to the OS that fixes this. This is something static as
when I run this executable on a solaris machine running an
older solaris9 kernel or solaris8 it works properly.

Further digging I find that when I run the linker command 
on the older solaris 9 machine it produces a faulty
executable BUT if I run "g++ -v" to see what the real
linking command
is and cut and paste it so as to run it instead  the
executable produces a pdf viewable with acroread.

The basic g++ link command is

c++ -o pdfetex pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o
pdfetex3.o pdfetexextra.o ../../libs/md5/md5.o 
pdftexdir/libpdf.a ../../libs/libpng/libpng.a
../../libs/zlib/libz.a ../../libs/xpdf/xpdf/libxpdf.a
../../libs/xpdf/goo/libGoo.a ../../libs/xpdf/fofi/libfofi.a
-lsocket lib/lib.a ../kpathsea/.libs/libkpathsea.a -lm

Instead of running this on older kernels I used

/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/collect2
-V -Y P,/usr/ccs/lib:/usr/lib -L /local/lib -L /encs/lib -Qy
-o pdfetex
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crt1.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crti.o
/usr/ccs/lib/values-Xa.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtbegin.o
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/encs/bin/../lib/gcc-lib
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/usr/ccs/bin -L/usr/ccs/lib
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o pdfetex3.o
pdfetexextra.o ../../libs/md5/md5.o pdftexdir/libpdf.a
../../libs/libpng/libpng.a ../../libs/zlib/libz.a
../../libs/xpdf/xpdf/libxpdf.a ../../libs/xpdf/goo/libGoo.a
../../libs/xpdf/fofi/libfofi.a -lsocket lib/lib.a
../kpathsea/.libs/libkpathsea.a -lstdc++ -lm -lgcc_s -lgcc
-lc -lgcc_s -lgcc -lc
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtend.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtn.o

For the record /usr/ccs/lib/values-Xa.o is the same on both
systems. I don't understrand...


I also tracked down what the difference was between a pdf
file that displays and does not display.

The one that does display correctly has 

/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 946
/Length2 3204
/Length3 532
/Length 3847      
/Filter /FlateDecode

while the one that does not has


/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 268436401
/Length2 3204
/Length3 532
/Length 3848      
/Filter /FlateDecode


the 946 has turned into 268436401!

Hope this info helps.

Stan


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 08:25

Message:
Logged In: YES 
user_id=421

This seems to be a build problem on Solaris. Compiling the
example on teTeX 3.0 on Linux produces a pdf that shows no
problems in AR.

A possible cause for the message by AR might be this extract
from pdf_test_solaris.pdf:
---------
29 0 obj <<
/Length1 268436401
/Length2 3204
---------
Length1 is definitely wrong.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 08:16

Message:
Logged In: YES 
user_id=421

I can reproduce the problem with AR5 and AR7(latest "beta")
on Linux. I can't reproduce it with gs 8.50 and Jaws.

I suspect that this is a bug in AR. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From noreply at sarovar.org  Wed Mar 23 15:42:24 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Mar 23 15:47:03 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DE73w-0003Tp-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 16:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

Category: Fonts
Group: v1.21a
>Status: Closed
>Resolution: Rejected
Priority: 5
Submitted By: Stan Swiercz (swiercz)
Assigned to: Thomas Esser (tetex)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 15:42

Message:
Logged In: YES 
user_id=421

Yes, this is definitely a problem for some specific solaris
installations which I can't reproduce.

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-23 15:08

Message:
Logged In: YES 
user_id=2345

I have done more debugging and I find that with a newer
solaris 9 kernel the executable works fine. There is some
patch to the OS that fixes this. This is something static as
when I run this executable on a solaris machine running an
older solaris9 kernel or solaris8 it works properly.

Further digging I find that when I run the linker command 
on the older solaris 9 machine it produces a faulty
executable BUT if I run "g++ -v" to see what the real
linking command
is and cut and paste it so as to run it instead  the
executable produces a pdf viewable with acroread.

The basic g++ link command is

c++ -o pdfetex pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o
pdfetex3.o pdfetexextra.o ../../libs/md5/md5.o 
pdftexdir/libpdf.a ../../libs/libpng/libpng.a
../../libs/zlib/libz.a ../../libs/xpdf/xpdf/libxpdf.a
../../libs/xpdf/goo/libGoo.a ../../libs/xpdf/fofi/libfofi.a
-lsocket lib/lib.a ../kpathsea/.libs/libkpathsea.a -lm

Instead of running this on older kernels I used

/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/collect2
-V -Y P,/usr/ccs/lib:/usr/lib -L /local/lib -L /encs/lib -Qy
-o pdfetex
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crt1.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crti.o
/usr/ccs/lib/values-Xa.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtbegin.o
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/encs/bin/../lib/gcc-lib
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/usr/ccs/bin -L/usr/ccs/lib
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o pdfetex3.o
pdfetexextra.o ../../libs/md5/md5.o pdftexdir/libpdf.a
../../libs/libpng/libpng.a ../../libs/zlib/libz.a
../../libs/xpdf/xpdf/libxpdf.a ../../libs/xpdf/goo/libGoo.a
../../libs/xpdf/fofi/libfofi.a -lsocket lib/lib.a
../kpathsea/.libs/libkpathsea.a -lstdc++ -lm -lgcc_s -lgcc
-lc -lgcc_s -lgcc -lc
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtend.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtn.o

For the record /usr/ccs/lib/values-Xa.o is the same on both
systems. I don't understrand...


I also tracked down what the difference was between a pdf
file that displays and does not display.

The one that does display correctly has 

/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 946
/Length2 3204
/Length3 532
/Length 3847      
/Filter /FlateDecode

while the one that does not has


/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 268436401
/Length2 3204
/Length3 532
/Length 3848      
/Filter /FlateDecode


the 946 has turned into 268436401!

Hope this info helps.

Stan


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:25

Message:
Logged In: YES 
user_id=421

This seems to be a build problem on Solaris. Compiling the
example on teTeX 3.0 on Linux produces a pdf that shows no
problems in AR.

A possible cause for the message by AR might be this extract
from pdf_test_solaris.pdf:
---------
29 0 obj <<
/Length1 268436401
/Length2 3204
---------
Length1 is definitely wrong.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:16

Message:
Logged In: YES 
user_id=421

I can reproduce the problem with AR5 and AR7(latest "beta")
on Linux. I can't reproduce it with gs 8.50 and Jaws.

I suspect that this is a bug in AR. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From noreply at sarovar.org  Wed Mar 23 15:43:52 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Mar 23 15:48:33 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-292 ] protuding leads to "This can't
	happen (paragraph)."
Message-ID: <E1DE75M-0003UB-00@sarovar.org>

Bugs item #292, was opened at 2005-02-14 15:22
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=292&group_id=106

Category: hz
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin Schr?der (oneiros)
Assigned to: Hartmut Henkel (hhenkel)
>Summary: protuding leads to "This can't happen (paragraph)."

Initial Comment:
The input
---------------------
\pdfoutput=1
\input edmac
\input protcode

\font\eightrm=ptmr8t
\setprotcode\eightrm
\pdfprotrudechars=2

\linenummargin{outer} %% left|right|inner|outer
\footparagraph{A}

\tracingall\tracingonline=0
\beginnumbering

\pstart 
\text{There}\Afootnote{Habent sua fata libelli. (Der
Satz wurde auf
Wunsch der Redaktion von ?Living Marxism? gestrichen;
siehe Korsch an
P.~Mattick am 3.10.1938.)}/ is a striking contrast
between the
impression produced in the minds of West"=European
revolutionaries by
those short pamphlets of Lenin and Trotsky which
appeared in poorly
translated and poorly printed editions during the final
stage and the
aftermath of the war, and the response called forth in
Europe and
U.S.A. by the belated appearance, in 1927, of the first
extra"=Russian
versions of Lenin's philosophical work of 1908, on
?Materialism and
Empirio"=Criticism?.
\pend

\endnumbering

\bye
---------------------
(all input files are in the attached archive) leads to 
---------------------
! This can't happen (paragraph).
<recently read> \par 
                     
\do@feet ...s \else \Afootstart {A}\Afootgroup {A}
                                                  \fi
\ifvoid \Bfootins \els...

\pagecontents ...p \@cclv \unvbox \@cclv \do@feet 
                                                 
\ifr@ggedbottom \kern -\di...

\pagebody ...\boxmaxdepth \maxdepth \pagecontents 
                                                  }
\edmac@output ...e \vbox {\makeheadline \pagebody 
                                                 
\makefootline }\fi }\advan...
<output> {\edmac@output 
                        }
...
l.30 \bye
         
I'm broken. Please show this to someone who can fix can fix
---------------------

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 15:43

Message:
Logged In: YES 
user_id=421

Hartmut,
what's the status here? I remember you fixed this somehow at
EuroTeX.

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-02-14 20:42

Message:
Logged In: YES 
user_id=929

Now we know which side effects patch-274 has. When it's
reverted, the file is processed without error, but margin
kerning is missing (which was the original problem before
patch-274).

Following experiment is done _with_ patch-274.

The "this can't happen" error happens within the line_break
routine, which chokes on a margin_kern_node (which was
filtered out before patch-274).If one adds margin_kern_node
to the do_nothing list, like:

mark_node,ins_node,adjust_node,margin_kern_node: do_nothing;
othercases confusion("paragraph")

it apparently works ok, and margin kerning is fine also
(requires patch in hz.ch). But i need to understand how the
line_break routine works, whether a do_nothing is the right
thing to do...

Regards, Hartmut


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-02-14 15:30

Message:
Logged In: YES 
user_id=421

The submitter used the attached edmac.doc; the error is the
same.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=292&group_id=106
From pragma at wxs.nl  Wed Mar 23 20:57:33 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Wed Mar 23 20:57:35 2005
Subject: [NTG-pdftex] cannot open font map file pdftex.map
Message-ID: <4241CA2D.5060709@wxs.nl>

Hi,

is it possible not to issue the 'cannot open pdftex.map' warning when other map 
files are loaded, i.e. when i load my own files, i still get that message

Warning: pdfetex.exe (file pdftex.map): cannot open font map file
{f:\minimal\tex\texmf-local/fonts/map/pdftex/context/original-base.map}{f:\mini
mal\tex\texmf-local/fonts/map/pdftex/context/ec-public-lm.map}{f:\minimal\tex\t
exmf-local/fonts/map/pdftex/context/ec-base.map}{f:\minimal\tex\texmf-local/fon
ts/map/pdftex/context/original-ams-base.map}{f:\minimal\tex\texmf-local/fonts/m
ap/pdftex/context/original-public-lm.map}{f:\minimal\tex\texmf-local/fonts/map/
pdftex/context/texnansi-base.map}{f:\minimal\tex\texmf-fonts/fonts/map/pdftex/c
ontext/texnansi-urw-zapfchan.map}]

this is kind of hard to explain to users, since nothing is wrong

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From hartmut_henkel at gmx.de  Wed Mar 23 22:57:44 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed Mar 23 22:57:49 2005
Subject: [NTG-pdftex] cannot open font map file pdftex.map
In-Reply-To: <4241CA2D.5060709@wxs.nl>
References: <4241CA2D.5060709@wxs.nl>
Message-ID: <Pine.LNX.4.61.0503232254490.4135@hahepc1.hahe>

On Wed, 23 Mar 2005, Hans Hagen wrote:

> is it possible not to issue the 'cannot open pdftex.map' warning when other
> map files are loaded, i.e. when i load my own files, i still get that message
>
> Warning: pdfetex.exe (file pdftex.map): cannot open font map file
> {f:\minimal\tex\texmf-local/fonts/map/pdftex/context/original-base.map}{f:\mini

> this is kind of hard to explain to users, since nothing is wrong

a \pdfmapfile{} or \pdfmapline{} at the very beginning should do this.

Regards, Hartmut
From hartmut_henkel at gmx.de  Thu Mar 24 00:08:15 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu Mar 24 00:08:19 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-292 ] protuding leads to "This can't
	happen (paragraph)."
In-Reply-To: <E1DE75M-0003UB-00@sarovar.org>
References: <E1DE75M-0003UB-00@sarovar.org>
Message-ID: <Pine.LNX.4.61.0503232342010.4853@hahepc1.hahe>

On Wed, 23 Mar 2005 noreply@sarovar.org wrote:

> Bugs item #292, was opened at 2005-02-14 15:22

> >Comment By: Martin Schr??der (oneiros)
> Date: 2005-03-23 15:43

> what's the status here? I remember you fixed this somehow at EuroTeX.

no, i tried only a kludge, requiring ledmac macro changes, and nothing
after EuroTeX yet. No idea how to really solve this. Rough stuff: One
could maybe say that protrusion is done exclusively by the paragraph
builder, never by a hbox. Maybe clean but not backward-compatible. All
margin kerns would be removed during unhboxing and unhcopying. They can
be restored after these actions if done into a vbox or vtop (even one
with a single line only), but this requires macro changes. If protrusion
should survive unhboxing into a hbox (like in ledmac), one has also to
take care of cases like several sequential unhboxings into the same
hbox. Maybe also first remove the kerns and then restore them by the
hbox. Then things would stick out also from hboxes. Interesting is that
it worked once; how? What if two hboxes are flush together at their
sides? All potentially troublesome... Needs Thanh.

Regards, Hartmut
From noreply at sarovar.org  Thu Mar 24 01:35:54 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Mar 24 01:41:01 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DEGKI-0004tc-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 16:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

Category: Fonts
Group: v1.21a
Status: Closed
Resolution: Rejected
Priority: 5
Submitted By: Stan Swiercz (swiercz)
Assigned to: Thomas Esser (tetex)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

>Comment By: Thomas Esser (tetex)
Date: 2005-03-24 01:35

Message:
Logged In: YES 
user_id=1230

We have seen this before. pdftex list, posting by Adrian
Lanz, Mon, 
09 Aug 2004.

There was no real outcome of that thread. Adrian wrote on 23
Sep 2004
to the texlive list:

    > On Tue, Sep 21, 2004 at 07:18:23PM -0500, Maksym
Polyakov wrote:
    >> apparently there was some overflow in /Length1 -- it
should be 810
    >
    > Ah, now it sounds familiar. Adrian Lanz has reported
the same to
    > pdftex@tug.org (09 Aug 2004, he uses SUN Solaris 9 /
gcc 3.3.2).
    >

    Yes, I had exactly the same problem recently installing
teTeX-beta
    2.96.7.20040721. In my case, the symptom was that
pdflatex run 
    without error, but a wrong /Length1 parameter was
inserted in the PDF
    output file, which evidently caused Acrobat Reader's
error message
    (no problem, however, with xpdf or with the "dvips
-Ppdf" routine).

    I think I solved the problem by changing the order and
rules how
    shared libraries are found and handled on my Sun Sparc
Solaris 2.9
    system, and/or I may have re-installed some programs and
libraries
    (ncurses, gettext, libiconv). I am sorry not being more
specific on

So, we have at least three people with this problem: Stan
Swiercz,
Maksym Polyakov, Adrian Lanz.

I think that this is some king of compiler bug or something
like that...

Thomas                                                     
                                                               

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 15:42

Message:
Logged In: YES 
user_id=421

Yes, this is definitely a problem for some specific solaris
installations which I can't reproduce.

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-23 15:08

Message:
Logged In: YES 
user_id=2345

I have done more debugging and I find that with a newer
solaris 9 kernel the executable works fine. There is some
patch to the OS that fixes this. This is something static as
when I run this executable on a solaris machine running an
older solaris9 kernel or solaris8 it works properly.

Further digging I find that when I run the linker command 
on the older solaris 9 machine it produces a faulty
executable BUT if I run "g++ -v" to see what the real
linking command
is and cut and paste it so as to run it instead  the
executable produces a pdf viewable with acroread.

The basic g++ link command is

c++ -o pdfetex pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o
pdfetex3.o pdfetexextra.o ../../libs/md5/md5.o 
pdftexdir/libpdf.a ../../libs/libpng/libpng.a
../../libs/zlib/libz.a ../../libs/xpdf/xpdf/libxpdf.a
../../libs/xpdf/goo/libGoo.a ../../libs/xpdf/fofi/libfofi.a
-lsocket lib/lib.a ../kpathsea/.libs/libkpathsea.a -lm

Instead of running this on older kernels I used

/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/collect2
-V -Y P,/usr/ccs/lib:/usr/lib -L /local/lib -L /encs/lib -Qy
-o pdfetex
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crt1.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crti.o
/usr/ccs/lib/values-Xa.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtbegin.o
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/encs/bin/../lib/gcc-lib
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/usr/ccs/bin -L/usr/ccs/lib
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o pdfetex3.o
pdfetexextra.o ../../libs/md5/md5.o pdftexdir/libpdf.a
../../libs/libpng/libpng.a ../../libs/zlib/libz.a
../../libs/xpdf/xpdf/libxpdf.a ../../libs/xpdf/goo/libGoo.a
../../libs/xpdf/fofi/libfofi.a -lsocket lib/lib.a
../kpathsea/.libs/libkpathsea.a -lstdc++ -lm -lgcc_s -lgcc
-lc -lgcc_s -lgcc -lc
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtend.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtn.o

For the record /usr/ccs/lib/values-Xa.o is the same on both
systems. I don't understrand...


I also tracked down what the difference was between a pdf
file that displays and does not display.

The one that does display correctly has 

/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 946
/Length2 3204
/Length3 532
/Length 3847      
/Filter /FlateDecode

while the one that does not has


/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 268436401
/Length2 3204
/Length3 532
/Length 3848      
/Filter /FlateDecode


the 946 has turned into 268436401!

Hope this info helps.

Stan


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:25

Message:
Logged In: YES 
user_id=421

This seems to be a build problem on Solaris. Compiling the
example on teTeX 3.0 on Linux produces a pdf that shows no
problems in AR.

A possible cause for the message by AR might be this extract
from pdf_test_solaris.pdf:
---------
29 0 obj <<
/Length1 268436401
/Length2 3204
---------
Length1 is definitely wrong.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:16

Message:
Logged In: YES 
user_id=421

I can reproduce the problem with AR5 and AR7(latest "beta")
on Linux. I can't reproduce it with gs 8.50 and Jaws.

I suspect that this is a bug in AR. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From noreply at sarovar.org  Thu Mar 24 15:29:28 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Mar 24 15:34:42 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DETKy-0005F1-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 16:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

Category: Fonts
Group: v1.21a
>Status: Open
Resolution: Rejected
Priority: 5
Submitted By: Stan Swiercz (swiercz)
Assigned to: Thomas Esser (tetex)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 15:29

Message:
Logged In: YES 
user_id=929

maybe the infamous "Solaris compiler bug" is just an
uninitialized variable t1_save_offset? It's unclear, as it
seems that this could happen only if the font is not being
included. Anyway: Could some Solaris freak try out the
attached tiny patch to writet1.c?

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Thomas Esser (tetex)
Date: 2005-03-24 01:35

Message:
Logged In: YES 
user_id=1230

We have seen this before. pdftex list, posting by Adrian
Lanz, Mon, 
09 Aug 2004.

There was no real outcome of that thread. Adrian wrote on 23
Sep 2004
to the texlive list:

    > On Tue, Sep 21, 2004 at 07:18:23PM -0500, Maksym
Polyakov wrote:
    >> apparently there was some overflow in /Length1 -- it
should be 810
    >
    > Ah, now it sounds familiar. Adrian Lanz has reported
the same to
    > pdftex@tug.org (09 Aug 2004, he uses SUN Solaris 9 /
gcc 3.3.2).
    >

    Yes, I had exactly the same problem recently installing
teTeX-beta
    2.96.7.20040721. In my case, the symptom was that
pdflatex run 
    without error, but a wrong /Length1 parameter was
inserted in the PDF
    output file, which evidently caused Acrobat Reader's
error message
    (no problem, however, with xpdf or with the "dvips
-Ppdf" routine).

    I think I solved the problem by changing the order and
rules how
    shared libraries are found and handled on my Sun Sparc
Solaris 2.9
    system, and/or I may have re-installed some programs and
libraries
    (ncurses, gettext, libiconv). I am sorry not being more
specific on

So, we have at least three people with this problem: Stan
Swiercz,
Maksym Polyakov, Adrian Lanz.

I think that this is some king of compiler bug or something
like that...

Thomas                                                     
                                                               

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 15:42

Message:
Logged In: YES 
user_id=421

Yes, this is definitely a problem for some specific solaris
installations which I can't reproduce.

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-23 15:08

Message:
Logged In: YES 
user_id=2345

I have done more debugging and I find that with a newer
solaris 9 kernel the executable works fine. There is some
patch to the OS that fixes this. This is something static as
when I run this executable on a solaris machine running an
older solaris9 kernel or solaris8 it works properly.

Further digging I find that when I run the linker command 
on the older solaris 9 machine it produces a faulty
executable BUT if I run "g++ -v" to see what the real
linking command
is and cut and paste it so as to run it instead  the
executable produces a pdf viewable with acroread.

The basic g++ link command is

c++ -o pdfetex pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o
pdfetex3.o pdfetexextra.o ../../libs/md5/md5.o 
pdftexdir/libpdf.a ../../libs/libpng/libpng.a
../../libs/zlib/libz.a ../../libs/xpdf/xpdf/libxpdf.a
../../libs/xpdf/goo/libGoo.a ../../libs/xpdf/fofi/libfofi.a
-lsocket lib/lib.a ../kpathsea/.libs/libkpathsea.a -lm

Instead of running this on older kernels I used

/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/collect2
-V -Y P,/usr/ccs/lib:/usr/lib -L /local/lib -L /encs/lib -Qy
-o pdfetex
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crt1.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crti.o
/usr/ccs/lib/values-Xa.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtbegin.o
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/encs/bin/../lib/gcc-lib
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/usr/ccs/bin -L/usr/ccs/lib
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o pdfetex3.o
pdfetexextra.o ../../libs/md5/md5.o pdftexdir/libpdf.a
../../libs/libpng/libpng.a ../../libs/zlib/libz.a
../../libs/xpdf/xpdf/libxpdf.a ../../libs/xpdf/goo/libGoo.a
../../libs/xpdf/fofi/libfofi.a -lsocket lib/lib.a
../kpathsea/.libs/libkpathsea.a -lstdc++ -lm -lgcc_s -lgcc
-lc -lgcc_s -lgcc -lc
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtend.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtn.o

For the record /usr/ccs/lib/values-Xa.o is the same on both
systems. I don't understrand...


I also tracked down what the difference was between a pdf
file that displays and does not display.

The one that does display correctly has 

/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 946
/Length2 3204
/Length3 532
/Length 3847      
/Filter /FlateDecode

while the one that does not has


/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 268436401
/Length2 3204
/Length3 532
/Length 3848      
/Filter /FlateDecode


the 946 has turned into 268436401!

Hope this info helps.

Stan


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:25

Message:
Logged In: YES 
user_id=421

This seems to be a build problem on Solaris. Compiling the
example on teTeX 3.0 on Linux produces a pdf that shows no
problems in AR.

A possible cause for the message by AR might be this extract
from pdf_test_solaris.pdf:
---------
29 0 obj <<
/Length1 268436401
/Length2 3204
---------
Length1 is definitely wrong.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:16

Message:
Logged In: YES 
user_id=421

I can reproduce the problem with AR5 and AR7(latest "beta")
on Linux. I can't reproduce it with gs 8.50 and Jaws.

I suspect that this is a bug in AR. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From noreply at sarovar.org  Thu Mar 24 15:44:32 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Mar 24 15:49:16 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DETZY-000601-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 10:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: Rejected
Priority: 5
Submitted By: Stan Swiercz (swiercz)
Assigned to: Thomas Esser (tetex)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

>Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 09:44

Message:
Logged In: YES 
user_id=2345

I have applied the patch and found no difference.


Stan

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 09:29

Message:
Logged In: YES 
user_id=929

maybe the infamous "Solaris compiler bug" is just an
uninitialized variable t1_save_offset? It's unclear, as it
seems that this could happen only if the font is not being
included. Anyway: Could some Solaris freak try out the
attached tiny patch to writet1.c?

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Thomas Esser (tetex)
Date: 2005-03-23 19:35

Message:
Logged In: YES 
user_id=1230

We have seen this before. pdftex list, posting by Adrian
Lanz, Mon, 
09 Aug 2004.

There was no real outcome of that thread. Adrian wrote on 23
Sep 2004
to the texlive list:

    > On Tue, Sep 21, 2004 at 07:18:23PM -0500, Maksym
Polyakov wrote:
    >> apparently there was some overflow in /Length1 -- it
should be 810
    >
    > Ah, now it sounds familiar. Adrian Lanz has reported
the same to
    > pdftex@tug.org (09 Aug 2004, he uses SUN Solaris 9 /
gcc 3.3.2).
    >

    Yes, I had exactly the same problem recently installing
teTeX-beta
    2.96.7.20040721. In my case, the symptom was that
pdflatex run 
    without error, but a wrong /Length1 parameter was
inserted in the PDF
    output file, which evidently caused Acrobat Reader's
error message
    (no problem, however, with xpdf or with the "dvips
-Ppdf" routine).

    I think I solved the problem by changing the order and
rules how
    shared libraries are found and handled on my Sun Sparc
Solaris 2.9
    system, and/or I may have re-installed some programs and
libraries
    (ncurses, gettext, libiconv). I am sorry not being more
specific on

So, we have at least three people with this problem: Stan
Swiercz,
Maksym Polyakov, Adrian Lanz.

I think that this is some king of compiler bug or something
like that...

Thomas                                                     
                                                               

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 09:42

Message:
Logged In: YES 
user_id=421

Yes, this is definitely a problem for some specific solaris
installations which I can't reproduce.

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-23 09:08

Message:
Logged In: YES 
user_id=2345

I have done more debugging and I find that with a newer
solaris 9 kernel the executable works fine. There is some
patch to the OS that fixes this. This is something static as
when I run this executable on a solaris machine running an
older solaris9 kernel or solaris8 it works properly.

Further digging I find that when I run the linker command 
on the older solaris 9 machine it produces a faulty
executable BUT if I run "g++ -v" to see what the real
linking command
is and cut and paste it so as to run it instead  the
executable produces a pdf viewable with acroread.

The basic g++ link command is

c++ -o pdfetex pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o
pdfetex3.o pdfetexextra.o ../../libs/md5/md5.o 
pdftexdir/libpdf.a ../../libs/libpng/libpng.a
../../libs/zlib/libz.a ../../libs/xpdf/xpdf/libxpdf.a
../../libs/xpdf/goo/libGoo.a ../../libs/xpdf/fofi/libfofi.a
-lsocket lib/lib.a ../kpathsea/.libs/libkpathsea.a -lm

Instead of running this on older kernels I used

/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/collect2
-V -Y P,/usr/ccs/lib:/usr/lib -L /local/lib -L /encs/lib -Qy
-o pdfetex
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crt1.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crti.o
/usr/ccs/lib/values-Xa.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtbegin.o
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/encs/bin/../lib/gcc-lib
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/usr/ccs/bin -L/usr/ccs/lib
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o pdfetex3.o
pdfetexextra.o ../../libs/md5/md5.o pdftexdir/libpdf.a
../../libs/libpng/libpng.a ../../libs/zlib/libz.a
../../libs/xpdf/xpdf/libxpdf.a ../../libs/xpdf/goo/libGoo.a
../../libs/xpdf/fofi/libfofi.a -lsocket lib/lib.a
../kpathsea/.libs/libkpathsea.a -lstdc++ -lm -lgcc_s -lgcc
-lc -lgcc_s -lgcc -lc
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtend.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtn.o

For the record /usr/ccs/lib/values-Xa.o is the same on both
systems. I don't understrand...


I also tracked down what the difference was between a pdf
file that displays and does not display.

The one that does display correctly has 

/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 946
/Length2 3204
/Length3 532
/Length 3847      
/Filter /FlateDecode

while the one that does not has


/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 268436401
/Length2 3204
/Length3 532
/Length 3848      
/Filter /FlateDecode


the 946 has turned into 268436401!

Hope this info helps.

Stan


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 08:25

Message:
Logged In: YES 
user_id=421

This seems to be a build problem on Solaris. Compiling the
example on teTeX 3.0 on Linux produces a pdf that shows no
problems in AR.

A possible cause for the message by AR might be this extract
from pdf_test_solaris.pdf:
---------
29 0 obj <<
/Length1 268436401
/Length2 3204
---------
Length1 is definitely wrong.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 08:16

Message:
Logged In: YES 
user_id=421

I can reproduce the problem with AR5 and AR7(latest "beta")
on Linux. I can't reproduce it with gs 8.50 and Jaws.

I suspect that this is a bug in AR. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From noreply at sarovar.org  Thu Mar 24 15:52:31 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Mar 24 15:57:24 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DEThH-00060q-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 16:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: Rejected
Priority: 5
Submitted By: Stan Swiercz (swiercz)
Assigned to: Thomas Esser (tetex)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 15:52

Message:
Logged In: YES 
user_id=929

thanks a lot, it was as expected :-( but the error _is_
around there, it's uninitialized fb_ptr i guess, just
searching how to initialize it.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 15:44

Message:
Logged In: YES 
user_id=2345

I have applied the patch and found no difference.


Stan

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 15:29

Message:
Logged In: YES 
user_id=929

maybe the infamous "Solaris compiler bug" is just an
uninitialized variable t1_save_offset? It's unclear, as it
seems that this could happen only if the font is not being
included. Anyway: Could some Solaris freak try out the
attached tiny patch to writet1.c?

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Thomas Esser (tetex)
Date: 2005-03-24 01:35

Message:
Logged In: YES 
user_id=1230

We have seen this before. pdftex list, posting by Adrian
Lanz, Mon, 
09 Aug 2004.

There was no real outcome of that thread. Adrian wrote on 23
Sep 2004
to the texlive list:

    > On Tue, Sep 21, 2004 at 07:18:23PM -0500, Maksym
Polyakov wrote:
    >> apparently there was some overflow in /Length1 -- it
should be 810
    >
    > Ah, now it sounds familiar. Adrian Lanz has reported
the same to
    > pdftex@tug.org (09 Aug 2004, he uses SUN Solaris 9 /
gcc 3.3.2).
    >

    Yes, I had exactly the same problem recently installing
teTeX-beta
    2.96.7.20040721. In my case, the symptom was that
pdflatex run 
    without error, but a wrong /Length1 parameter was
inserted in the PDF
    output file, which evidently caused Acrobat Reader's
error message
    (no problem, however, with xpdf or with the "dvips
-Ppdf" routine).

    I think I solved the problem by changing the order and
rules how
    shared libraries are found and handled on my Sun Sparc
Solaris 2.9
    system, and/or I may have re-installed some programs and
libraries
    (ncurses, gettext, libiconv). I am sorry not being more
specific on

So, we have at least three people with this problem: Stan
Swiercz,
Maksym Polyakov, Adrian Lanz.

I think that this is some king of compiler bug or something
like that...

Thomas                                                     
                                                               

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 15:42

Message:
Logged In: YES 
user_id=421

Yes, this is definitely a problem for some specific solaris
installations which I can't reproduce.

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-23 15:08

Message:
Logged In: YES 
user_id=2345

I have done more debugging and I find that with a newer
solaris 9 kernel the executable works fine. There is some
patch to the OS that fixes this. This is something static as
when I run this executable on a solaris machine running an
older solaris9 kernel or solaris8 it works properly.

Further digging I find that when I run the linker command 
on the older solaris 9 machine it produces a faulty
executable BUT if I run "g++ -v" to see what the real
linking command
is and cut and paste it so as to run it instead  the
executable produces a pdf viewable with acroread.

The basic g++ link command is

c++ -o pdfetex pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o
pdfetex3.o pdfetexextra.o ../../libs/md5/md5.o 
pdftexdir/libpdf.a ../../libs/libpng/libpng.a
../../libs/zlib/libz.a ../../libs/xpdf/xpdf/libxpdf.a
../../libs/xpdf/goo/libGoo.a ../../libs/xpdf/fofi/libfofi.a
-lsocket lib/lib.a ../kpathsea/.libs/libkpathsea.a -lm

Instead of running this on older kernels I used

/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/collect2
-V -Y P,/usr/ccs/lib:/usr/lib -L /local/lib -L /encs/lib -Qy
-o pdfetex
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crt1.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crti.o
/usr/ccs/lib/values-Xa.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtbegin.o
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/encs/bin/../lib/gcc-lib
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/usr/ccs/bin -L/usr/ccs/lib
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o pdfetex3.o
pdfetexextra.o ../../libs/md5/md5.o pdftexdir/libpdf.a
../../libs/libpng/libpng.a ../../libs/zlib/libz.a
../../libs/xpdf/xpdf/libxpdf.a ../../libs/xpdf/goo/libGoo.a
../../libs/xpdf/fofi/libfofi.a -lsocket lib/lib.a
../kpathsea/.libs/libkpathsea.a -lstdc++ -lm -lgcc_s -lgcc
-lc -lgcc_s -lgcc -lc
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtend.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtn.o

For the record /usr/ccs/lib/values-Xa.o is the same on both
systems. I don't understrand...


I also tracked down what the difference was between a pdf
file that displays and does not display.

The one that does display correctly has 

/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 946
/Length2 3204
/Length3 532
/Length 3847      
/Filter /FlateDecode

while the one that does not has


/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 268436401
/Length2 3204
/Length3 532
/Length 3848      
/Filter /FlateDecode


the 946 has turned into 268436401!

Hope this info helps.

Stan


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:25

Message:
Logged In: YES 
user_id=421

This seems to be a build problem on Solaris. Compiling the
example on teTeX 3.0 on Linux produces a pdf that shows no
problems in AR.

A possible cause for the message by AR might be this extract
from pdf_test_solaris.pdf:
---------
29 0 obj <<
/Length1 268436401
/Length2 3204
---------
Length1 is definitely wrong.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:16

Message:
Logged In: YES 
user_id=421

I can reproduce the problem with AR5 and AR7(latest "beta")
on Linux. I can't reproduce it with gs 8.50 and Jaws.

I suspect that this is a bug in AR. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From noreply at sarovar.org  Thu Mar 24 16:01:16 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Mar 24 16:06:06 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DETpk-0006DN-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 10:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: Rejected
Priority: 5
Submitted By: Stan Swiercz (swiercz)
Assigned to: Thomas Esser (tetex)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

>Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 10:01

Message:
Logged In: YES 
user_id=2345

It does appear that t1_offset_value is at fault.
I put in a pdftex_warn (something easy to add) in writet1.c
and the first time it outputs I see

Warning: pdflatex (file
/nfs/encs/ArchDep/sun4.solaris8/pkg/teTeX-3.0/root/texm
f/fonts/type1/bluesky/cm/cmr8.pfb): -268435455
t1_save_offset value

All the other times the "warning" is displayed it
returns 0.

Stan


----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 09:52

Message:
Logged In: YES 
user_id=929

thanks a lot, it was as expected :-( but the error _is_
around there, it's uninitialized fb_ptr i guess, just
searching how to initialize it.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 09:44

Message:
Logged In: YES 
user_id=2345

I have applied the patch and found no difference.


Stan

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 09:29

Message:
Logged In: YES 
user_id=929

maybe the infamous "Solaris compiler bug" is just an
uninitialized variable t1_save_offset? It's unclear, as it
seems that this could happen only if the font is not being
included. Anyway: Could some Solaris freak try out the
attached tiny patch to writet1.c?

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Thomas Esser (tetex)
Date: 2005-03-23 19:35

Message:
Logged In: YES 
user_id=1230

We have seen this before. pdftex list, posting by Adrian
Lanz, Mon, 
09 Aug 2004.

There was no real outcome of that thread. Adrian wrote on 23
Sep 2004
to the texlive list:

    > On Tue, Sep 21, 2004 at 07:18:23PM -0500, Maksym
Polyakov wrote:
    >> apparently there was some overflow in /Length1 -- it
should be 810
    >
    > Ah, now it sounds familiar. Adrian Lanz has reported
the same to
    > pdftex@tug.org (09 Aug 2004, he uses SUN Solaris 9 /
gcc 3.3.2).
    >

    Yes, I had exactly the same problem recently installing
teTeX-beta
    2.96.7.20040721. In my case, the symptom was that
pdflatex run 
    without error, but a wrong /Length1 parameter was
inserted in the PDF
    output file, which evidently caused Acrobat Reader's
error message
    (no problem, however, with xpdf or with the "dvips
-Ppdf" routine).

    I think I solved the problem by changing the order and
rules how
    shared libraries are found and handled on my Sun Sparc
Solaris 2.9
    system, and/or I may have re-installed some programs and
libraries
    (ncurses, gettext, libiconv). I am sorry not being more
specific on

So, we have at least three people with this problem: Stan
Swiercz,
Maksym Polyakov, Adrian Lanz.

I think that this is some king of compiler bug or something
like that...

Thomas                                                     
                                                               

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 09:42

Message:
Logged In: YES 
user_id=421

Yes, this is definitely a problem for some specific solaris
installations which I can't reproduce.

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-23 09:08

Message:
Logged In: YES 
user_id=2345

I have done more debugging and I find that with a newer
solaris 9 kernel the executable works fine. There is some
patch to the OS that fixes this. This is something static as
when I run this executable on a solaris machine running an
older solaris9 kernel or solaris8 it works properly.

Further digging I find that when I run the linker command 
on the older solaris 9 machine it produces a faulty
executable BUT if I run "g++ -v" to see what the real
linking command
is and cut and paste it so as to run it instead  the
executable produces a pdf viewable with acroread.

The basic g++ link command is

c++ -o pdfetex pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o
pdfetex3.o pdfetexextra.o ../../libs/md5/md5.o 
pdftexdir/libpdf.a ../../libs/libpng/libpng.a
../../libs/zlib/libz.a ../../libs/xpdf/xpdf/libxpdf.a
../../libs/xpdf/goo/libGoo.a ../../libs/xpdf/fofi/libfofi.a
-lsocket lib/lib.a ../kpathsea/.libs/libkpathsea.a -lm

Instead of running this on older kernels I used

/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/collect2
-V -Y P,/usr/ccs/lib:/usr/lib -L /local/lib -L /encs/lib -Qy
-o pdfetex
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crt1.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crti.o
/usr/ccs/lib/values-Xa.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtbegin.o
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/encs/bin/../lib/gcc-lib
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/usr/ccs/bin -L/usr/ccs/lib
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o pdfetex3.o
pdfetexextra.o ../../libs/md5/md5.o pdftexdir/libpdf.a
../../libs/libpng/libpng.a ../../libs/zlib/libz.a
../../libs/xpdf/xpdf/libxpdf.a ../../libs/xpdf/goo/libGoo.a
../../libs/xpdf/fofi/libfofi.a -lsocket lib/lib.a
../kpathsea/.libs/libkpathsea.a -lstdc++ -lm -lgcc_s -lgcc
-lc -lgcc_s -lgcc -lc
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtend.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtn.o

For the record /usr/ccs/lib/values-Xa.o is the same on both
systems. I don't understrand...


I also tracked down what the difference was between a pdf
file that displays and does not display.

The one that does display correctly has 

/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 946
/Length2 3204
/Length3 532
/Length 3847      
/Filter /FlateDecode

while the one that does not has


/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 268436401
/Length2 3204
/Length3 532
/Length 3848      
/Filter /FlateDecode


the 946 has turned into 268436401!

Hope this info helps.

Stan


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 08:25

Message:
Logged In: YES 
user_id=421

This seems to be a build problem on Solaris. Compiling the
example on teTeX 3.0 on Linux produces a pdf that shows no
problems in AR.

A possible cause for the message by AR might be this extract
from pdf_test_solaris.pdf:
---------
29 0 obj <<
/Length1 268436401
/Length2 3204
---------
Length1 is definitely wrong.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 08:16

Message:
Logged In: YES 
user_id=421

I can reproduce the problem with AR5 and AR7(latest "beta")
on Linux. I can't reproduce it with gs 8.50 and Jaws.

I suspect that this is a bug in AR. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From noreply at sarovar.org  Thu Mar 24 16:04:17 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Mar 24 16:09:00 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DETsf-0006Sv-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 16:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: Rejected
Priority: 5
Submitted By: Stan Swiercz (swiercz)
Assigned to: Thomas Esser (tetex)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 16:04

Message:
Logged In: YES 
user_id=929

once again, please try the patch for ptexmac.h.

Regards, Hartmut



----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 16:01

Message:
Logged In: YES 
user_id=2345

It does appear that t1_offset_value is at fault.
I put in a pdftex_warn (something easy to add) in writet1.c
and the first time it outputs I see

Warning: pdflatex (file
/nfs/encs/ArchDep/sun4.solaris8/pkg/teTeX-3.0/root/texm
f/fonts/type1/bluesky/cm/cmr8.pfb): -268435455
t1_save_offset value

All the other times the "warning" is displayed it
returns 0.

Stan


----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 15:52

Message:
Logged In: YES 
user_id=929

thanks a lot, it was as expected :-( but the error _is_
around there, it's uninitialized fb_ptr i guess, just
searching how to initialize it.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 15:44

Message:
Logged In: YES 
user_id=2345

I have applied the patch and found no difference.


Stan

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 15:29

Message:
Logged In: YES 
user_id=929

maybe the infamous "Solaris compiler bug" is just an
uninitialized variable t1_save_offset? It's unclear, as it
seems that this could happen only if the font is not being
included. Anyway: Could some Solaris freak try out the
attached tiny patch to writet1.c?

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Thomas Esser (tetex)
Date: 2005-03-24 01:35

Message:
Logged In: YES 
user_id=1230

We have seen this before. pdftex list, posting by Adrian
Lanz, Mon, 
09 Aug 2004.

There was no real outcome of that thread. Adrian wrote on 23
Sep 2004
to the texlive list:

    > On Tue, Sep 21, 2004 at 07:18:23PM -0500, Maksym
Polyakov wrote:
    >> apparently there was some overflow in /Length1 -- it
should be 810
    >
    > Ah, now it sounds familiar. Adrian Lanz has reported
the same to
    > pdftex@tug.org (09 Aug 2004, he uses SUN Solaris 9 /
gcc 3.3.2).
    >

    Yes, I had exactly the same problem recently installing
teTeX-beta
    2.96.7.20040721. In my case, the symptom was that
pdflatex run 
    without error, but a wrong /Length1 parameter was
inserted in the PDF
    output file, which evidently caused Acrobat Reader's
error message
    (no problem, however, with xpdf or with the "dvips
-Ppdf" routine).

    I think I solved the problem by changing the order and
rules how
    shared libraries are found and handled on my Sun Sparc
Solaris 2.9
    system, and/or I may have re-installed some programs and
libraries
    (ncurses, gettext, libiconv). I am sorry not being more
specific on

So, we have at least three people with this problem: Stan
Swiercz,
Maksym Polyakov, Adrian Lanz.

I think that this is some king of compiler bug or something
like that...

Thomas                                                     
                                                               

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 15:42

Message:
Logged In: YES 
user_id=421

Yes, this is definitely a problem for some specific solaris
installations which I can't reproduce.

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-23 15:08

Message:
Logged In: YES 
user_id=2345

I have done more debugging and I find that with a newer
solaris 9 kernel the executable works fine. There is some
patch to the OS that fixes this. This is something static as
when I run this executable on a solaris machine running an
older solaris9 kernel or solaris8 it works properly.

Further digging I find that when I run the linker command 
on the older solaris 9 machine it produces a faulty
executable BUT if I run "g++ -v" to see what the real
linking command
is and cut and paste it so as to run it instead  the
executable produces a pdf viewable with acroread.

The basic g++ link command is

c++ -o pdfetex pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o
pdfetex3.o pdfetexextra.o ../../libs/md5/md5.o 
pdftexdir/libpdf.a ../../libs/libpng/libpng.a
../../libs/zlib/libz.a ../../libs/xpdf/xpdf/libxpdf.a
../../libs/xpdf/goo/libGoo.a ../../libs/xpdf/fofi/libfofi.a
-lsocket lib/lib.a ../kpathsea/.libs/libkpathsea.a -lm

Instead of running this on older kernels I used

/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/collect2
-V -Y P,/usr/ccs/lib:/usr/lib -L /local/lib -L /encs/lib -Qy
-o pdfetex
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crt1.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crti.o
/usr/ccs/lib/values-Xa.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtbegin.o
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/encs/bin/../lib/gcc-lib
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/usr/ccs/bin -L/usr/ccs/lib
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o pdfetex3.o
pdfetexextra.o ../../libs/md5/md5.o pdftexdir/libpdf.a
../../libs/libpng/libpng.a ../../libs/zlib/libz.a
../../libs/xpdf/xpdf/libxpdf.a ../../libs/xpdf/goo/libGoo.a
../../libs/xpdf/fofi/libfofi.a -lsocket lib/lib.a
../kpathsea/.libs/libkpathsea.a -lstdc++ -lm -lgcc_s -lgcc
-lc -lgcc_s -lgcc -lc
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtend.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtn.o

For the record /usr/ccs/lib/values-Xa.o is the same on both
systems. I don't understrand...


I also tracked down what the difference was between a pdf
file that displays and does not display.

The one that does display correctly has 

/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 946
/Length2 3204
/Length3 532
/Length 3847      
/Filter /FlateDecode

while the one that does not has


/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 268436401
/Length2 3204
/Length3 532
/Length 3848      
/Filter /FlateDecode


the 946 has turned into 268436401!

Hope this info helps.

Stan


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:25

Message:
Logged In: YES 
user_id=421

This seems to be a build problem on Solaris. Compiling the
example on teTeX 3.0 on Linux produces a pdf that shows no
problems in AR.

A possible cause for the message by AR might be this extract
from pdf_test_solaris.pdf:
---------
29 0 obj <<
/Length1 268436401
/Length2 3204
---------
Length1 is definitely wrong.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:16

Message:
Logged In: YES 
user_id=421

I can reproduce the problem with AR5 and AR7(latest "beta")
on Linux. I can't reproduce it with gs 8.50 and Jaws.

I suspect that this is a bug in AR. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From martin at oneiros.de  Thu Mar 24 16:19:26 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Mar 24 16:19:29 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-292 ] protuding leads to "This can't
	happen (paragraph)."
In-Reply-To: <Pine.LNX.4.61.0503232342010.4853@hahepc1.hahe>
References: <E1DE75M-0003UB-00@sarovar.org>
	<Pine.LNX.4.61.0503232342010.4853@hahepc1.hahe>
Message-ID: <20050324151926.GB6256@blau.artcom-gmbh.de>

On 2005-03-24 00:08:15 +0100, Hartmut Henkel wrote:
> > >Comment By: Martin Schr??der (oneiros)
> > what's the status here? I remember you fixed this somehow at EuroTeX.
> 
> no, i tried only a kludge, requiring ledmac macro changes, and nothing
> after EuroTeX yet. No idea how to really solve this. Rough stuff: One

At least we know that the patch for 1.21a is wrong as it leads to
"This can't happen (paragraph).", and 1.20b at least doesn't
fail, right?

Olli only uses edmac, does ledmac suffer from the same problems?

Best regards
        Martin
-- 
                    http://www.tm.oneiros.de
From noreply at sarovar.org  Thu Mar 24 16:18:24 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Mar 24 16:23:16 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DEU6K-0006vr-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 10:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: Rejected
Priority: 5
Submitted By: Stan Swiercz (swiercz)
Assigned to: Thomas Esser (tetex)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

>Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 10:18

Message:
Logged In: YES 
user_id=2345

The ptexmac.h patch fixed it.

Thank you!


Stan

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 10:04

Message:
Logged In: YES 
user_id=929

once again, please try the patch for ptexmac.h.

Regards, Hartmut



----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 10:01

Message:
Logged In: YES 
user_id=2345

It does appear that t1_offset_value is at fault.
I put in a pdftex_warn (something easy to add) in writet1.c
and the first time it outputs I see

Warning: pdflatex (file
/nfs/encs/ArchDep/sun4.solaris8/pkg/teTeX-3.0/root/texm
f/fonts/type1/bluesky/cm/cmr8.pfb): -268435455
t1_save_offset value

All the other times the "warning" is displayed it
returns 0.

Stan


----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 09:52

Message:
Logged In: YES 
user_id=929

thanks a lot, it was as expected :-( but the error _is_
around there, it's uninitialized fb_ptr i guess, just
searching how to initialize it.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 09:44

Message:
Logged In: YES 
user_id=2345

I have applied the patch and found no difference.


Stan

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 09:29

Message:
Logged In: YES 
user_id=929

maybe the infamous "Solaris compiler bug" is just an
uninitialized variable t1_save_offset? It's unclear, as it
seems that this could happen only if the font is not being
included. Anyway: Could some Solaris freak try out the
attached tiny patch to writet1.c?

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Thomas Esser (tetex)
Date: 2005-03-23 19:35

Message:
Logged In: YES 
user_id=1230

We have seen this before. pdftex list, posting by Adrian
Lanz, Mon, 
09 Aug 2004.

There was no real outcome of that thread. Adrian wrote on 23
Sep 2004
to the texlive list:

    > On Tue, Sep 21, 2004 at 07:18:23PM -0500, Maksym
Polyakov wrote:
    >> apparently there was some overflow in /Length1 -- it
should be 810
    >
    > Ah, now it sounds familiar. Adrian Lanz has reported
the same to
    > pdftex@tug.org (09 Aug 2004, he uses SUN Solaris 9 /
gcc 3.3.2).
    >

    Yes, I had exactly the same problem recently installing
teTeX-beta
    2.96.7.20040721. In my case, the symptom was that
pdflatex run 
    without error, but a wrong /Length1 parameter was
inserted in the PDF
    output file, which evidently caused Acrobat Reader's
error message
    (no problem, however, with xpdf or with the "dvips
-Ppdf" routine).

    I think I solved the problem by changing the order and
rules how
    shared libraries are found and handled on my Sun Sparc
Solaris 2.9
    system, and/or I may have re-installed some programs and
libraries
    (ncurses, gettext, libiconv). I am sorry not being more
specific on

So, we have at least three people with this problem: Stan
Swiercz,
Maksym Polyakov, Adrian Lanz.

I think that this is some king of compiler bug or something
like that...

Thomas                                                     
                                                               

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 09:42

Message:
Logged In: YES 
user_id=421

Yes, this is definitely a problem for some specific solaris
installations which I can't reproduce.

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-23 09:08

Message:
Logged In: YES 
user_id=2345

I have done more debugging and I find that with a newer
solaris 9 kernel the executable works fine. There is some
patch to the OS that fixes this. This is something static as
when I run this executable on a solaris machine running an
older solaris9 kernel or solaris8 it works properly.

Further digging I find that when I run the linker command 
on the older solaris 9 machine it produces a faulty
executable BUT if I run "g++ -v" to see what the real
linking command
is and cut and paste it so as to run it instead  the
executable produces a pdf viewable with acroread.

The basic g++ link command is

c++ -o pdfetex pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o
pdfetex3.o pdfetexextra.o ../../libs/md5/md5.o 
pdftexdir/libpdf.a ../../libs/libpng/libpng.a
../../libs/zlib/libz.a ../../libs/xpdf/xpdf/libxpdf.a
../../libs/xpdf/goo/libGoo.a ../../libs/xpdf/fofi/libfofi.a
-lsocket lib/lib.a ../kpathsea/.libs/libkpathsea.a -lm

Instead of running this on older kernels I used

/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/collect2
-V -Y P,/usr/ccs/lib:/usr/lib -L /local/lib -L /encs/lib -Qy
-o pdfetex
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crt1.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crti.o
/usr/ccs/lib/values-Xa.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtbegin.o
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/encs/bin/../lib/gcc-lib
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/usr/ccs/bin -L/usr/ccs/lib
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o pdfetex3.o
pdfetexextra.o ../../libs/md5/md5.o pdftexdir/libpdf.a
../../libs/libpng/libpng.a ../../libs/zlib/libz.a
../../libs/xpdf/xpdf/libxpdf.a ../../libs/xpdf/goo/libGoo.a
../../libs/xpdf/fofi/libfofi.a -lsocket lib/lib.a
../kpathsea/.libs/libkpathsea.a -lstdc++ -lm -lgcc_s -lgcc
-lc -lgcc_s -lgcc -lc
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtend.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtn.o

For the record /usr/ccs/lib/values-Xa.o is the same on both
systems. I don't understrand...


I also tracked down what the difference was between a pdf
file that displays and does not display.

The one that does display correctly has 

/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 946
/Length2 3204
/Length3 532
/Length 3847      
/Filter /FlateDecode

while the one that does not has


/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 268436401
/Length2 3204
/Length3 532
/Length 3848      
/Filter /FlateDecode


the 946 has turned into 268436401!

Hope this info helps.

Stan


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 08:25

Message:
Logged In: YES 
user_id=421

This seems to be a build problem on Solaris. Compiling the
example on teTeX 3.0 on Linux produces a pdf that shows no
problems in AR.

A possible cause for the message by AR might be this extract
from pdf_test_solaris.pdf:
---------
29 0 obj <<
/Length1 268436401
/Length2 3204
---------
Length1 is definitely wrong.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 08:16

Message:
Logged In: YES 
user_id=421

I can reproduce the problem with AR5 and AR7(latest "beta")
on Linux. I can't reproduce it with gs 8.50 and Jaws.

I suspect that this is a bug in AR. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From noreply at sarovar.org  Thu Mar 24 16:27:51 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Mar 24 16:32:38 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DEUFT-00075j-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 16:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

Category: Fonts
Group: v1.21a
>Status: Closed
>Resolution: Fixed
Priority: 5
Submitted By: Stan Swiercz (swiercz)
>Assigned to: Martin Schr?der (oneiros)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 16:18

Message:
Logged In: YES 
user_id=2345

The ptexmac.h patch fixed it.

Thank you!


Stan

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 16:04

Message:
Logged In: YES 
user_id=929

once again, please try the patch for ptexmac.h.

Regards, Hartmut



----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 16:01

Message:
Logged In: YES 
user_id=2345

It does appear that t1_offset_value is at fault.
I put in a pdftex_warn (something easy to add) in writet1.c
and the first time it outputs I see

Warning: pdflatex (file
/nfs/encs/ArchDep/sun4.solaris8/pkg/teTeX-3.0/root/texm
f/fonts/type1/bluesky/cm/cmr8.pfb): -268435455
t1_save_offset value

All the other times the "warning" is displayed it
returns 0.

Stan


----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 15:52

Message:
Logged In: YES 
user_id=929

thanks a lot, it was as expected :-( but the error _is_
around there, it's uninitialized fb_ptr i guess, just
searching how to initialize it.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 15:44

Message:
Logged In: YES 
user_id=2345

I have applied the patch and found no difference.


Stan

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 15:29

Message:
Logged In: YES 
user_id=929

maybe the infamous "Solaris compiler bug" is just an
uninitialized variable t1_save_offset? It's unclear, as it
seems that this could happen only if the font is not being
included. Anyway: Could some Solaris freak try out the
attached tiny patch to writet1.c?

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Thomas Esser (tetex)
Date: 2005-03-24 01:35

Message:
Logged In: YES 
user_id=1230

We have seen this before. pdftex list, posting by Adrian
Lanz, Mon, 
09 Aug 2004.

There was no real outcome of that thread. Adrian wrote on 23
Sep 2004
to the texlive list:

    > On Tue, Sep 21, 2004 at 07:18:23PM -0500, Maksym
Polyakov wrote:
    >> apparently there was some overflow in /Length1 -- it
should be 810
    >
    > Ah, now it sounds familiar. Adrian Lanz has reported
the same to
    > pdftex@tug.org (09 Aug 2004, he uses SUN Solaris 9 /
gcc 3.3.2).
    >

    Yes, I had exactly the same problem recently installing
teTeX-beta
    2.96.7.20040721. In my case, the symptom was that
pdflatex run 
    without error, but a wrong /Length1 parameter was
inserted in the PDF
    output file, which evidently caused Acrobat Reader's
error message
    (no problem, however, with xpdf or with the "dvips
-Ppdf" routine).

    I think I solved the problem by changing the order and
rules how
    shared libraries are found and handled on my Sun Sparc
Solaris 2.9
    system, and/or I may have re-installed some programs and
libraries
    (ncurses, gettext, libiconv). I am sorry not being more
specific on

So, we have at least three people with this problem: Stan
Swiercz,
Maksym Polyakov, Adrian Lanz.

I think that this is some king of compiler bug or something
like that...

Thomas                                                     
                                                               

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 15:42

Message:
Logged In: YES 
user_id=421

Yes, this is definitely a problem for some specific solaris
installations which I can't reproduce.

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-23 15:08

Message:
Logged In: YES 
user_id=2345

I have done more debugging and I find that with a newer
solaris 9 kernel the executable works fine. There is some
patch to the OS that fixes this. This is something static as
when I run this executable on a solaris machine running an
older solaris9 kernel or solaris8 it works properly.

Further digging I find that when I run the linker command 
on the older solaris 9 machine it produces a faulty
executable BUT if I run "g++ -v" to see what the real
linking command
is and cut and paste it so as to run it instead  the
executable produces a pdf viewable with acroread.

The basic g++ link command is

c++ -o pdfetex pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o
pdfetex3.o pdfetexextra.o ../../libs/md5/md5.o 
pdftexdir/libpdf.a ../../libs/libpng/libpng.a
../../libs/zlib/libz.a ../../libs/xpdf/xpdf/libxpdf.a
../../libs/xpdf/goo/libGoo.a ../../libs/xpdf/fofi/libfofi.a
-lsocket lib/lib.a ../kpathsea/.libs/libkpathsea.a -lm

Instead of running this on older kernels I used

/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/collect2
-V -Y P,/usr/ccs/lib:/usr/lib -L /local/lib -L /encs/lib -Qy
-o pdfetex
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crt1.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crti.o
/usr/ccs/lib/values-Xa.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtbegin.o
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/encs/bin/../lib/gcc-lib
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/usr/ccs/bin -L/usr/ccs/lib
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o pdfetex3.o
pdfetexextra.o ../../libs/md5/md5.o pdftexdir/libpdf.a
../../libs/libpng/libpng.a ../../libs/zlib/libz.a
../../libs/xpdf/xpdf/libxpdf.a ../../libs/xpdf/goo/libGoo.a
../../libs/xpdf/fofi/libfofi.a -lsocket lib/lib.a
../kpathsea/.libs/libkpathsea.a -lstdc++ -lm -lgcc_s -lgcc
-lc -lgcc_s -lgcc -lc
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtend.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtn.o

For the record /usr/ccs/lib/values-Xa.o is the same on both
systems. I don't understrand...


I also tracked down what the difference was between a pdf
file that displays and does not display.

The one that does display correctly has 

/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 946
/Length2 3204
/Length3 532
/Length 3847      
/Filter /FlateDecode

while the one that does not has


/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 268436401
/Length2 3204
/Length3 532
/Length 3848      
/Filter /FlateDecode


the 946 has turned into 268436401!

Hope this info helps.

Stan


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:25

Message:
Logged In: YES 
user_id=421

This seems to be a build problem on Solaris. Compiling the
example on teTeX 3.0 on Linux produces a pdf that shows no
problems in AR.

A possible cause for the message by AR might be this extract
from pdf_test_solaris.pdf:
---------
29 0 obj <<
/Length1 268436401
/Length2 3204
---------
Length1 is definitely wrong.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:16

Message:
Logged In: YES 
user_id=421

I can reproduce the problem with AR5 and AR7(latest "beta")
on Linux. I can't reproduce it with gs 8.50 and Jaws.

I suspect that this is a bug in AR. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From hartmut_henkel at gmx.de  Thu Mar 24 16:38:00 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu Mar 24 16:38:10 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-292 ] protuding leads to "This can't
	happen (paragraph)."
In-Reply-To: <20050324151926.GB6256@blau.artcom-gmbh.de>
References: <E1DE75M-0003UB-00@sarovar.org>
	<Pine.LNX.4.61.0503232342010.4853@hahepc1.hahe>
	<20050324151926.GB6256@blau.artcom-gmbh.de>
Message-ID: <Pine.LNX.4.61.0503241631190.14054@hahepc1.hahe>

On Thu, 24 Mar 2005, Martin Schr?der wrote:

> At least we know that the patch for 1.21a is wrong as it leads to
> "This can't happen (paragraph).", and 1.20b at least doesn't
> fail, right?

it doesn't in one of unhbox/unhcopy, but it would (since quite some time
even before 1.20a) if you happen to use the other one of both. It would
be clean for now if margin kerns would be removed in _both_ unhcopy and
unhbox cases (little different patch) at least to make it consistent.
But it won't suit Olli, as edmac protrusion would vanish... I'll try to
think about this over easter...

> Olli only uses edmac, does ledmac suffer from the same problems?

i believe it's similar (i actually meant edmac), same underlying
unboxing procedure...

Regards, Hartmut


P.S. upgraded to sarge, not backslash and curly braces anymore on the
kbd, have to grasp them with mouse for now :-)
From noreply at sarovar.org  Thu Mar 24 16:48:22 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Mar 24 16:53:16 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DEUZK-0007qU-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 16:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

Category: Fonts
Group: v1.21a
>Status: Open
Resolution: Fixed
Priority: 5
Submitted By: Stan Swiercz (swiercz)
Assigned to: Martin Schr?der (oneiros)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 16:48

Message:
Logged In: YES 
user_id=929

who is pulling this bug into the "closed area"? :-) It seems
to work but it still looks weird, maybe the final patch will
be different...

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 16:18

Message:
Logged In: YES 
user_id=2345

The ptexmac.h patch fixed it.

Thank you!


Stan

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 16:04

Message:
Logged In: YES 
user_id=929

once again, please try the patch for ptexmac.h.

Regards, Hartmut



----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 16:01

Message:
Logged In: YES 
user_id=2345

It does appear that t1_offset_value is at fault.
I put in a pdftex_warn (something easy to add) in writet1.c
and the first time it outputs I see

Warning: pdflatex (file
/nfs/encs/ArchDep/sun4.solaris8/pkg/teTeX-3.0/root/texm
f/fonts/type1/bluesky/cm/cmr8.pfb): -268435455
t1_save_offset value

All the other times the "warning" is displayed it
returns 0.

Stan


----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 15:52

Message:
Logged In: YES 
user_id=929

thanks a lot, it was as expected :-( but the error _is_
around there, it's uninitialized fb_ptr i guess, just
searching how to initialize it.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 15:44

Message:
Logged In: YES 
user_id=2345

I have applied the patch and found no difference.


Stan

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 15:29

Message:
Logged In: YES 
user_id=929

maybe the infamous "Solaris compiler bug" is just an
uninitialized variable t1_save_offset? It's unclear, as it
seems that this could happen only if the font is not being
included. Anyway: Could some Solaris freak try out the
attached tiny patch to writet1.c?

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Thomas Esser (tetex)
Date: 2005-03-24 01:35

Message:
Logged In: YES 
user_id=1230

We have seen this before. pdftex list, posting by Adrian
Lanz, Mon, 
09 Aug 2004.

There was no real outcome of that thread. Adrian wrote on 23
Sep 2004
to the texlive list:

    > On Tue, Sep 21, 2004 at 07:18:23PM -0500, Maksym
Polyakov wrote:
    >> apparently there was some overflow in /Length1 -- it
should be 810
    >
    > Ah, now it sounds familiar. Adrian Lanz has reported
the same to
    > pdftex@tug.org (09 Aug 2004, he uses SUN Solaris 9 /
gcc 3.3.2).
    >

    Yes, I had exactly the same problem recently installing
teTeX-beta
    2.96.7.20040721. In my case, the symptom was that
pdflatex run 
    without error, but a wrong /Length1 parameter was
inserted in the PDF
    output file, which evidently caused Acrobat Reader's
error message
    (no problem, however, with xpdf or with the "dvips
-Ppdf" routine).

    I think I solved the problem by changing the order and
rules how
    shared libraries are found and handled on my Sun Sparc
Solaris 2.9
    system, and/or I may have re-installed some programs and
libraries
    (ncurses, gettext, libiconv). I am sorry not being more
specific on

So, we have at least three people with this problem: Stan
Swiercz,
Maksym Polyakov, Adrian Lanz.

I think that this is some king of compiler bug or something
like that...

Thomas                                                     
                                                               

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 15:42

Message:
Logged In: YES 
user_id=421

Yes, this is definitely a problem for some specific solaris
installations which I can't reproduce.

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-23 15:08

Message:
Logged In: YES 
user_id=2345

I have done more debugging and I find that with a newer
solaris 9 kernel the executable works fine. There is some
patch to the OS that fixes this. This is something static as
when I run this executable on a solaris machine running an
older solaris9 kernel or solaris8 it works properly.

Further digging I find that when I run the linker command 
on the older solaris 9 machine it produces a faulty
executable BUT if I run "g++ -v" to see what the real
linking command
is and cut and paste it so as to run it instead  the
executable produces a pdf viewable with acroread.

The basic g++ link command is

c++ -o pdfetex pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o
pdfetex3.o pdfetexextra.o ../../libs/md5/md5.o 
pdftexdir/libpdf.a ../../libs/libpng/libpng.a
../../libs/zlib/libz.a ../../libs/xpdf/xpdf/libxpdf.a
../../libs/xpdf/goo/libGoo.a ../../libs/xpdf/fofi/libfofi.a
-lsocket lib/lib.a ../kpathsea/.libs/libkpathsea.a -lm

Instead of running this on older kernels I used

/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/collect2
-V -Y P,/usr/ccs/lib:/usr/lib -L /local/lib -L /encs/lib -Qy
-o pdfetex
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crt1.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crti.o
/usr/ccs/lib/values-Xa.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtbegin.o
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/encs/bin/../lib/gcc-lib
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/usr/ccs/bin -L/usr/ccs/lib
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o pdfetex3.o
pdfetexextra.o ../../libs/md5/md5.o pdftexdir/libpdf.a
../../libs/libpng/libpng.a ../../libs/zlib/libz.a
../../libs/xpdf/xpdf/libxpdf.a ../../libs/xpdf/goo/libGoo.a
../../libs/xpdf/fofi/libfofi.a -lsocket lib/lib.a
../kpathsea/.libs/libkpathsea.a -lstdc++ -lm -lgcc_s -lgcc
-lc -lgcc_s -lgcc -lc
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtend.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtn.o

For the record /usr/ccs/lib/values-Xa.o is the same on both
systems. I don't understrand...


I also tracked down what the difference was between a pdf
file that displays and does not display.

The one that does display correctly has 

/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 946
/Length2 3204
/Length3 532
/Length 3847      
/Filter /FlateDecode

while the one that does not has


/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 268436401
/Length2 3204
/Length3 532
/Length 3848      
/Filter /FlateDecode


the 946 has turned into 268436401!

Hope this info helps.

Stan


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:25

Message:
Logged In: YES 
user_id=421

This seems to be a build problem on Solaris. Compiling the
example on teTeX 3.0 on Linux produces a pdf that shows no
problems in AR.

A possible cause for the message by AR might be this extract
from pdf_test_solaris.pdf:
---------
29 0 obj <<
/Length1 268436401
/Length2 3204
---------
Length1 is definitely wrong.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:16

Message:
Logged In: YES 
user_id=421

I can reproduce the problem with AR5 and AR7(latest "beta")
on Linux. I can't reproduce it with gs 8.50 and Jaws.

I suspect that this is a bug in AR. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From noreply at sarovar.org  Thu Mar 24 20:29:22 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Mar 24 20:34:38 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DEY1C-00065S-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 16:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: Fixed
Priority: 5
Submitted By: Stan Swiercz (swiercz)
Assigned to: Martin Schr?der (oneiros)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 20:29

Message:
Logged In: YES 
user_id=929

Hi Stan,

if possible please test the attached patch to writet1.c. 

This now really initializes t1_save_offset to zero, and the
save_offset() calls are only where really needed (there were
too many, too early. They must never come before the first
fb_putchar(), as only this does the alloc_array(fb,...)
initialization.

Also please do _not_ patch ptexmac.h (!), as this patch
would cover otherwise maybe missing initializations. Leave
ptexmac.h as in teTeX-3.0.

I tried the writet1.c patch with arbitrary initial value of
fb_ptr, and it seems to get it right.

Thanks a lot for help!

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 16:48

Message:
Logged In: YES 
user_id=929

who is pulling this bug into the "closed area"? :-) It seems
to work but it still looks weird, maybe the final patch will
be different...

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 16:18

Message:
Logged In: YES 
user_id=2345

The ptexmac.h patch fixed it.

Thank you!


Stan

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 16:04

Message:
Logged In: YES 
user_id=929

once again, please try the patch for ptexmac.h.

Regards, Hartmut



----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 16:01

Message:
Logged In: YES 
user_id=2345

It does appear that t1_offset_value is at fault.
I put in a pdftex_warn (something easy to add) in writet1.c
and the first time it outputs I see

Warning: pdflatex (file
/nfs/encs/ArchDep/sun4.solaris8/pkg/teTeX-3.0/root/texm
f/fonts/type1/bluesky/cm/cmr8.pfb): -268435455
t1_save_offset value

All the other times the "warning" is displayed it
returns 0.

Stan


----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 15:52

Message:
Logged In: YES 
user_id=929

thanks a lot, it was as expected :-( but the error _is_
around there, it's uninitialized fb_ptr i guess, just
searching how to initialize it.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 15:44

Message:
Logged In: YES 
user_id=2345

I have applied the patch and found no difference.


Stan

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 15:29

Message:
Logged In: YES 
user_id=929

maybe the infamous "Solaris compiler bug" is just an
uninitialized variable t1_save_offset? It's unclear, as it
seems that this could happen only if the font is not being
included. Anyway: Could some Solaris freak try out the
attached tiny patch to writet1.c?

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Thomas Esser (tetex)
Date: 2005-03-24 01:35

Message:
Logged In: YES 
user_id=1230

We have seen this before. pdftex list, posting by Adrian
Lanz, Mon, 
09 Aug 2004.

There was no real outcome of that thread. Adrian wrote on 23
Sep 2004
to the texlive list:

    > On Tue, Sep 21, 2004 at 07:18:23PM -0500, Maksym
Polyakov wrote:
    >> apparently there was some overflow in /Length1 -- it
should be 810
    >
    > Ah, now it sounds familiar. Adrian Lanz has reported
the same to
    > pdftex@tug.org (09 Aug 2004, he uses SUN Solaris 9 /
gcc 3.3.2).
    >

    Yes, I had exactly the same problem recently installing
teTeX-beta
    2.96.7.20040721. In my case, the symptom was that
pdflatex run 
    without error, but a wrong /Length1 parameter was
inserted in the PDF
    output file, which evidently caused Acrobat Reader's
error message
    (no problem, however, with xpdf or with the "dvips
-Ppdf" routine).

    I think I solved the problem by changing the order and
rules how
    shared libraries are found and handled on my Sun Sparc
Solaris 2.9
    system, and/or I may have re-installed some programs and
libraries
    (ncurses, gettext, libiconv). I am sorry not being more
specific on

So, we have at least three people with this problem: Stan
Swiercz,
Maksym Polyakov, Adrian Lanz.

I think that this is some king of compiler bug or something
like that...

Thomas                                                     
                                                               

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 15:42

Message:
Logged In: YES 
user_id=421

Yes, this is definitely a problem for some specific solaris
installations which I can't reproduce.

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-23 15:08

Message:
Logged In: YES 
user_id=2345

I have done more debugging and I find that with a newer
solaris 9 kernel the executable works fine. There is some
patch to the OS that fixes this. This is something static as
when I run this executable on a solaris machine running an
older solaris9 kernel or solaris8 it works properly.

Further digging I find that when I run the linker command 
on the older solaris 9 machine it produces a faulty
executable BUT if I run "g++ -v" to see what the real
linking command
is and cut and paste it so as to run it instead  the
executable produces a pdf viewable with acroread.

The basic g++ link command is

c++ -o pdfetex pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o
pdfetex3.o pdfetexextra.o ../../libs/md5/md5.o 
pdftexdir/libpdf.a ../../libs/libpng/libpng.a
../../libs/zlib/libz.a ../../libs/xpdf/xpdf/libxpdf.a
../../libs/xpdf/goo/libGoo.a ../../libs/xpdf/fofi/libfofi.a
-lsocket lib/lib.a ../kpathsea/.libs/libkpathsea.a -lm

Instead of running this on older kernels I used

/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/collect2
-V -Y P,/usr/ccs/lib:/usr/lib -L /local/lib -L /encs/lib -Qy
-o pdfetex
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crt1.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crti.o
/usr/ccs/lib/values-Xa.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtbegin.o
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/encs/bin/../lib/gcc-lib
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/usr/ccs/bin -L/usr/ccs/lib
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o pdfetex3.o
pdfetexextra.o ../../libs/md5/md5.o pdftexdir/libpdf.a
../../libs/libpng/libpng.a ../../libs/zlib/libz.a
../../libs/xpdf/xpdf/libxpdf.a ../../libs/xpdf/goo/libGoo.a
../../libs/xpdf/fofi/libfofi.a -lsocket lib/lib.a
../kpathsea/.libs/libkpathsea.a -lstdc++ -lm -lgcc_s -lgcc
-lc -lgcc_s -lgcc -lc
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtend.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtn.o

For the record /usr/ccs/lib/values-Xa.o is the same on both
systems. I don't understrand...


I also tracked down what the difference was between a pdf
file that displays and does not display.

The one that does display correctly has 

/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 946
/Length2 3204
/Length3 532
/Length 3847      
/Filter /FlateDecode

while the one that does not has


/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 268436401
/Length2 3204
/Length3 532
/Length 3848      
/Filter /FlateDecode


the 946 has turned into 268436401!

Hope this info helps.

Stan


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:25

Message:
Logged In: YES 
user_id=421

This seems to be a build problem on Solaris. Compiling the
example on teTeX 3.0 on Linux produces a pdf that shows no
problems in AR.

A possible cause for the message by AR might be this extract
from pdf_test_solaris.pdf:
---------
29 0 obj <<
/Length1 268436401
/Length2 3204
---------
Length1 is definitely wrong.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 14:16

Message:
Logged In: YES 
user_id=421

I can reproduce the problem with AR5 and AR7(latest "beta")
on Linux. I can't reproduce it with gs 8.50 and Jaws.

I suspect that this is a bug in AR. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From noreply at sarovar.org  Thu Mar 24 20:44:06 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Mar 24 20:48:50 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-315 ] pdflatex on solaris font problems
	with acroread
Message-ID: <E1DEYFS-0006qD-00@sarovar.org>

Bugs item #315, was opened at 2005-03-21 10:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: Fixed
Priority: 5
Submitted By: Stan Swiercz (swiercz)
Assigned to: Martin Schr?der (oneiros)
Summary: pdflatex on solaris font problems with acroread

Initial Comment:
I have compiled pdflatex 1.2.1a that comes with teTeX 3.0
on both linux and solaris. The linux version works
properly but the solaris one does not.

The last font included in the pdf output produces the
error:

   Unable to extract the embedded font 'KTGBVU+CMR8'.
   Some characters may not display or print correctly.

when viewed with acroread (version 5 or 6, windows,
linux and solaris versions). Note that no error is seen
when viewed with ghostscript and xpdf. The above error
comes from the file:
------------------------
\documentclass{article} 
\newcommand{\ip}[2]{(#1, #2)}
\begin{document}  
This is an example input file.

Footnotes \footnote{This is an example of a footnote.}
pose no problem.

\LaTeX\ is good at typesetting mathematical formulas
like
       \( x-3y + z = 7 \)
or
       \( a_{1} > x^{2n} + y^{2n} > x' \)
or
       \( \ip{A}{B} = \sum_{i} a_{i} b_{i} \).
The spaces you type in a formula are
ignored.  Remember that a letter like
       $x$                   % $ ... $  and  \( ... \)
 are equivalent
is a formula when it denotes a mathematical
symbol, and it should be typed as one.

\end{document}
-----------------------

The sigma is produced correctly. If however I comment
out the footnote, the sigma in the summation is no
longer viewable and the error message is

   Unable to extract the embedded font 'ATSTIO+CMEX10'.
   Some characters may not display or print correctly.


I attach a pdf files produced on solaris.

Is this a know problem with a patch available?
If you need further information please
do not hesitate to contact me.

Stan



----------------------------------------------------------------------

>Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 14:44

Message:
Logged In: YES 
user_id=2345

I restored the original ptexmac.h and patched writet1.c
and recompiled on the original solaris system I was
compiling on.

The pdf produced displays properly on acroread.

I thank you for the prompt response and help.

Stan

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 14:29

Message:
Logged In: YES 
user_id=929

Hi Stan,

if possible please test the attached patch to writet1.c. 

This now really initializes t1_save_offset to zero, and the
save_offset() calls are only where really needed (there were
too many, too early. They must never come before the first
fb_putchar(), as only this does the alloc_array(fb,...)
initialization.

Also please do _not_ patch ptexmac.h (!), as this patch
would cover otherwise maybe missing initializations. Leave
ptexmac.h as in teTeX-3.0.

I tried the writet1.c patch with arbitrary initial value of
fb_ptr, and it seems to get it right.

Thanks a lot for help!

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 10:48

Message:
Logged In: YES 
user_id=929

who is pulling this bug into the "closed area"? :-) It seems
to work but it still looks weird, maybe the final patch will
be different...

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 10:18

Message:
Logged In: YES 
user_id=2345

The ptexmac.h patch fixed it.

Thank you!


Stan

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 10:04

Message:
Logged In: YES 
user_id=929

once again, please try the patch for ptexmac.h.

Regards, Hartmut



----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 10:01

Message:
Logged In: YES 
user_id=2345

It does appear that t1_offset_value is at fault.
I put in a pdftex_warn (something easy to add) in writet1.c
and the first time it outputs I see

Warning: pdflatex (file
/nfs/encs/ArchDep/sun4.solaris8/pkg/teTeX-3.0/root/texm
f/fonts/type1/bluesky/cm/cmr8.pfb): -268435455
t1_save_offset value

All the other times the "warning" is displayed it
returns 0.

Stan


----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 09:52

Message:
Logged In: YES 
user_id=929

thanks a lot, it was as expected :-( but the error _is_
around there, it's uninitialized fb_ptr i guess, just
searching how to initialize it.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-24 09:44

Message:
Logged In: YES 
user_id=2345

I have applied the patch and found no difference.


Stan

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-24 09:29

Message:
Logged In: YES 
user_id=929

maybe the infamous "Solaris compiler bug" is just an
uninitialized variable t1_save_offset? It's unclear, as it
seems that this could happen only if the font is not being
included. Anyway: Could some Solaris freak try out the
attached tiny patch to writet1.c?

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Thomas Esser (tetex)
Date: 2005-03-23 19:35

Message:
Logged In: YES 
user_id=1230

We have seen this before. pdftex list, posting by Adrian
Lanz, Mon, 
09 Aug 2004.

There was no real outcome of that thread. Adrian wrote on 23
Sep 2004
to the texlive list:

    > On Tue, Sep 21, 2004 at 07:18:23PM -0500, Maksym
Polyakov wrote:
    >> apparently there was some overflow in /Length1 -- it
should be 810
    >
    > Ah, now it sounds familiar. Adrian Lanz has reported
the same to
    > pdftex@tug.org (09 Aug 2004, he uses SUN Solaris 9 /
gcc 3.3.2).
    >

    Yes, I had exactly the same problem recently installing
teTeX-beta
    2.96.7.20040721. In my case, the symptom was that
pdflatex run 
    without error, but a wrong /Length1 parameter was
inserted in the PDF
    output file, which evidently caused Acrobat Reader's
error message
    (no problem, however, with xpdf or with the "dvips
-Ppdf" routine).

    I think I solved the problem by changing the order and
rules how
    shared libraries are found and handled on my Sun Sparc
Solaris 2.9
    system, and/or I may have re-installed some programs and
libraries
    (ncurses, gettext, libiconv). I am sorry not being more
specific on

So, we have at least three people with this problem: Stan
Swiercz,
Maksym Polyakov, Adrian Lanz.

I think that this is some king of compiler bug or something
like that...

Thomas                                                     
                                                               

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 09:42

Message:
Logged In: YES 
user_id=421

Yes, this is definitely a problem for some specific solaris
installations which I can't reproduce.

----------------------------------------------------------------------

Comment By: Stan Swiercz (swiercz)
Date: 2005-03-23 09:08

Message:
Logged In: YES 
user_id=2345

I have done more debugging and I find that with a newer
solaris 9 kernel the executable works fine. There is some
patch to the OS that fixes this. This is something static as
when I run this executable on a solaris machine running an
older solaris9 kernel or solaris8 it works properly.

Further digging I find that when I run the linker command 
on the older solaris 9 machine it produces a faulty
executable BUT if I run "g++ -v" to see what the real
linking command
is and cut and paste it so as to run it instead  the
executable produces a pdf viewable with acroread.

The basic g++ link command is

c++ -o pdfetex pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o
pdfetex3.o pdfetexextra.o ../../libs/md5/md5.o 
pdftexdir/libpdf.a ../../libs/libpng/libpng.a
../../libs/zlib/libz.a ../../libs/xpdf/xpdf/libxpdf.a
../../libs/xpdf/goo/libGoo.a ../../libs/xpdf/fofi/libfofi.a
-lsocket lib/lib.a ../kpathsea/.libs/libkpathsea.a -lm

Instead of running this on older kernels I used

/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/collect2
-V -Y P,/usr/ccs/lib:/usr/lib -L /local/lib -L /encs/lib -Qy
-o pdfetex
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crt1.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crti.o
/usr/ccs/lib/values-Xa.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtbegin.o
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/encs/bin/../lib/gcc-lib
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2
-L/usr/ccs/bin -L/usr/ccs/lib
-L/encs/bin/../lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
-L/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/../../..
pdfetexini.o pdfetex0.o pdfetex1.o pdfetex2.o pdfetex3.o
pdfetexextra.o ../../libs/md5/md5.o pdftexdir/libpdf.a
../../libs/libpng/libpng.a ../../libs/zlib/libz.a
../../libs/xpdf/xpdf/libxpdf.a ../../libs/xpdf/goo/libGoo.a
../../libs/xpdf/fofi/libfofi.a -lsocket lib/lib.a
../kpathsea/.libs/libkpathsea.a -lstdc++ -lm -lgcc_s -lgcc
-lc -lgcc_s -lgcc -lc
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtend.o
/encs/pkg/gcc-3.3.2/root/lib/gcc-lib/sparc-sun-solaris2.8/3.3.2/crtn.o

For the record /usr/ccs/lib/values-Xa.o is the same on both
systems. I don't understrand...


I also tracked down what the difference was between a pdf
file that displays and does not display.

The one that does display correctly has 

/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 946
/Length2 3204
/Length3 532
/Length 3847      
/Filter /FlateDecode

while the one that does not has


/Type /Page
/Contents 49 0 R
/Resources 47 0 R
/MediaBox [0 0 612 792]
/Parent 25 0 R
>> endobj
47 0 obj <<
/Font << /F8 12 0 R /F27 24 0 R /F11 31 0 R /F13 37 0 R /F7
18 0 R /F10 34 0 R >>
/ProcSet [ /PDF /Text ]
>> endobj
45 0 obj <<
/Length1 268436401
/Length2 3204
/Length3 532
/Length 3848      
/Filter /FlateDecode


the 946 has turned into 268436401!

Hope this info helps.

Stan


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 08:25

Message:
Logged In: YES 
user_id=421

This seems to be a build problem on Solaris. Compiling the
example on teTeX 3.0 on Linux produces a pdf that shows no
problems in AR.

A possible cause for the message by AR might be this extract
from pdf_test_solaris.pdf:
---------
29 0 obj <<
/Length1 268436401
/Length2 3204
---------
Length1 is definitely wrong.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 08:16

Message:
Logged In: YES 
user_id=421

I can reproduce the problem with AR5 and AR7(latest "beta")
on Linux. I can't reproduce it with gs 8.50 and Jaws.

I suspect that this is a bug in AR. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=315&group_id=106
From noreply at sarovar.org  Mon Mar 28 05:52:26 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Mon Mar 28 05:56:55 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-320 ] \textcolor
Message-ID: <E1DFlIg-0006YJ-00@sarovar.org>

Bugs item #320, was opened at 2005-03-28 03:52
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=320&group_id=106

Category: None
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Aleks Kleyn (aleks_kleyn)
Assigned to: Nobody (None)
Summary: \textcolor

Initial Comment:
I want to change color of text using comand \textcolor
{blue}. However when text flows from one page to 
another the color resets to standard on the next 
page. 
Initially I beleived that this problem of pdf. 
However I 
tried today latex.exe and then converted dvi to pdf. 
I got 
effect that I expected: text had on both pages the 
same 
color. However using of pdflatex is more better 
because 
it prepares bookmarks for pdf.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=320&group_id=106
From frank at kuesterei.ch  Wed Mar 30 14:00:38 2005
From: frank at kuesterei.ch (=?iso-8859-1?q?Frank_K=FCster?=)
Date: Wed Mar 30 14:00:43 2005
Subject: [NTG-pdftex] pdftex and xpdf (and its security bugs): What about a
	libxpdf?
Message-ID: <87k6npuyvt.fsf@alhambra.kuesterei.ch>

Dear pdftex developers,

during the last months security support for software containing xpdf
code was a nightmare - not only that there were many security issues
discovered, moreover everybody used a different patch, it was unclear to
what extent older versions were affected, and so forth.  This was also a
problem for us, the teTeX maintainer in Debian, which currently has
three versions of pdftex with three different versions of the xpdf code.

What would you think about creating a shared library, "libxpdf", and
using that for pdftex, either linked dynamically (for Linux/Unix
distributions) or statically (for TeX-live and friends)?

There is already such a library, libpoppler, a fork of the xpdf code
(http://poppler.freedesktop.org/).  However, I do not know whether the
xpdf author, Derek B. Noonburg, is generally unwilling to create a
shared library, or whether people simply didn't ask him.  Personally I
would prefer to have as little a number of versions of the same code,
and thus to get a shared library from xpdf proper.

If you agree, I would be oblidged if one of you would contact Derek
Noonburg (derekn@foolabs.com) and ask him.  He seems to be a little
unresponsive at times, and has not answered a similar question from the
maintainer of the xpdf package in Debian for a couple of weeks now.
Maybe we can convince him that this is a good idea if he is approached
from different sides.

Alternatively, if he is unwilling to make this change, do you think
using libpoppler would be feasible?

Many thanks in advance,
Frank K?ster
-- 
Frank K?ster
Inst. f. Biochemie der Univ. Z?rich
Debian Developer

From martin at oneiros.de  Wed Mar 30 14:50:59 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed Mar 30 14:51:02 2005
Subject: [NTG-pdftex] pdftex and xpdf (and its security bugs): What about
	a libxpdf?
In-Reply-To: <87k6npuyvt.fsf@alhambra.kuesterei.ch>
References: <87k6npuyvt.fsf@alhambra.kuesterei.ch>
Message-ID: <20050330125059.GS5823@blau.artcom-gmbh.de>

On 2005-03-30 14:00:38 +0200, Frank K?ster wrote:
> during the last months security support for software containing xpdf
> code was a nightmare - not only that there were many security issues
> discovered, moreover everybody used a different patch, it was unclear to
> what extent older versions were affected, and so forth.  This was also a
> problem for us, the teTeX maintainer in Debian, which currently has
> three versions of pdftex with three different versions of the xpdf code.

I know; we even got contacted about some patches, which we didn't
need to use -- a crash of pdfTeX is not really a security
problem. :-)

> What would you think about creating a shared library, "libxpdf", and
> using that for pdftex, either linked dynamically (for Linux/Unix
> distributions) or statically (for TeX-live and friends)?

Much. This actually was discussed at EuroTeX2005, but with a
different focus: Having the xpdf functions for parsing pdf
available for scripting languages like python and ruby.

> There is already such a library, libpoppler, a fork of the xpdf code
> (http://poppler.freedesktop.org/).  However, I do not know whether the
> xpdf author, Derek B. Noonburg, is generally unwilling to create a
> shared library, or whether people simply didn't ask him.  Personally I
> would prefer to have as little a number of versions of the same code,
> and thus to get a shared library from xpdf proper.

poppler has a very different focus: rendering. We only need the
parser of xpdf.

> If you agree, I would be oblidged if one of you would contact Derek
> Noonburg (derekn@foolabs.com) and ask him.  He seems to be a little
> unresponsive at times, and has not answered a similar question from the
> maintainer of the xpdf package in Debian for a couple of weeks now.
> Maybe we can convince him that this is a good idea if he is approached
> from different sides.

I'll do this eventually, but don't expect anything from me soon.
Most likely not before Sarge. :-)

> 
> Alternatively, if he is unwilling to make this change, do you think
> using libpoppler would be feasible?

See above. I'll look into it.

Best regards
        Martin
-- 
                    http://www.tm.oneiros.de
From noreply at sarovar.org  Wed Mar 30 22:16:19 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Mar 30 22:21:18 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-304 ] Names of expanded fonts not in log
	output
Message-ID: <E1DGjbv-0000rS-00@sarovar.org>

Bugs item #304, was opened at 2005-03-02 18:25
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=304&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Names of expanded fonts not in log output

Initial Comment:
When using font expansion, the log output will not
contain the names of the expanded fonts but the null
character instead (resp. ^^@).

%-------------------------------------
\pdfadjustspacing=2
\pdffontexpand\font 20 20 5 autoexpand
\tracingoutput=1
test

\parfillskip 0pt
test
\bye
%-------------------------------------

Regards,
Robert.


----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-30 22:16

Message:
Logged In: YES 
user_id=929

This patch is based of Thanh's change file showfont.ch,
which he gave me during EuroTeX2005 (it's also included,
renamed here to showfont-thanh.ch). Use showfont.ch for the
patch.

There is now a new integer variable \pdftracingfonts. It is
zero by default, then we get a log like this (see
robert050302.log):

...\tenrm t

...\tenrm (+20) e

Without font expansion, this default should be compatible
with TeX's original log output.

If \pdftracingfonts is set to 1 (or greater), we get a more
verbose log (see tst-304.log):

...\xivtt (cmtt10@14.0pt) t

.\xivtt (cmtt10+20@14.0pt) e

Seems to work with change file showfont.ch coming directly
after after hz.ch.

Patch only roughly tested with pdfetex, likely to give
problems with pdfxtex, as the variable numbering might
differ. Log format to be agreed upon...

Regards, Hartmut


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=304&group_id=106
From frank at kuesterei.ch  Thu Mar 31 09:19:47 2005
From: frank at kuesterei.ch (=?iso-8859-1?q?Frank_K=FCster?=)
Date: Thu Mar 31 09:19:52 2005
Subject: [NTG-pdftex] pdftex and xpdf (and its security bugs): What
	about a libxpdf?
In-Reply-To: <20050330125059.GS5823@blau.artcom-gmbh.de> (
	=?iso-8859-1?q?Martin_Schr=F6der's_message_of?= "Wed,
	30 Mar 2005 14:50:59 +0200")
References: <87k6npuyvt.fsf@alhambra.kuesterei.ch>
	<20050330125059.GS5823@blau.artcom-gmbh.de>
Message-ID: <87mzskmgdo.fsf@alhambra.kuesterei.ch>

Martin Schr?der <martin@oneiros.de> wrote:

> On 2005-03-30 14:00:38 +0200, Frank K?ster wrote:
>> during the last months security support for software containing xpdf
>> code was a nightmare - not only that there were many security issues
>> discovered, moreover everybody used a different patch, it was unclear to
>> what extent older versions were affected, and so forth.  This was also a
>> problem for us, the teTeX maintainer in Debian, which currently has
>> three versions of pdftex with three different versions of the xpdf code.
>
> I know; we even got contacted about some patches, which we didn't
> need to use -- a crash of pdfTeX is not really a security
> problem. :-)

I do not agree here.  If you are running pdftex as part of a service
(people submit document source and get typeset documents or printouts),
it could be used at least for a Denial of Service attack.  And I am not
sure that it has been investigated whether the buffer overflows could
not also be used to execute malicious code; if you know the target
system well, this might be possible.

>> If you agree, I would be oblidged if one of you would contact Derek
>> Noonburg (derekn@foolabs.com) and ask him.  He seems to be a little
>> unresponsive at times, and has not answered a similar question from the
>> maintainer of the xpdf package in Debian for a couple of weeks now.
>> Maybe we can convince him that this is a good idea if he is approached
>> from different sides.
>
> I'll do this eventually, but don't expect anything from me soon.
> Most likely not before Sarge. :-)

Derek has now answered to Hamish Moffats (the Debian xpdf maintainer)
mail.  The relevant part of his answer is:

,----
| I haven't thought about doing it myself, but (as you say) poppler is
| doing pretty much that.
| 
| I don't know of a good way to do it, frankly.  Everyone seems to be
| using different parts of Xpdf, so there's no simple, concise API that
| would be useful.  You can just export all of the symbols, but since it's
| written in C++, that will make it heavily dependent on the compiler used
| (or more specifically, on the name mangling scheme).
`----

So if we could come up with a decent technical proposal, he seems to be
open to a change.  If we could.  My knowledge of C++ is neglegible, I
fear I won't be of much help here.

I have not yet looked at poppler (there's a Debian package in NEW, have
asked the uploader whether he can give me the packages), so I do not
know if they excluded the parsing part or just don't care much about
it. 

Regards, Frank
-- 
Frank K?ster
Inst. f. Biochemie der Univ. Z?rich
Debian Developer

From hartmut_henkel at gmx.de  Thu Mar 31 21:35:40 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu Mar 31 21:35:43 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-294 ] pdfmovechars/encoding problem
In-Reply-To: <20050217003257.GA2897@monty>
References: <E1D18y1-0002t1-00@sarovar.org> <20050217003257.GA2897@monty>
Message-ID: <Pine.LNX.4.61.0503312128340.4833@hahepc1.hahe>

On Thu, 17 Feb 2005, The Thanh Han wrote:

> this issue needs revision as well. In the beginning there were
> requests to move chars in range [0, 32) to higher slots if possible,
> so I introduced \pdfmovechars. I don't use this feature myself, and it
> seems that almost nobody else does, thus the bug slipped out without
> being noticed for quite a long time.

more see in Thanh's original post. Nobody followed up. What to do? I
never used this, either, nor understand for what it would do good.
Should we remove \pdfmovechars to close this bug?

Regards, Hartmut
From pragma at wxs.nl  Thu Mar 31 21:58:48 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Mar 31 21:58:51 2005
Subject: [Fwd: Re: [NTG-pdftex] [ pdftex-Bugs-294 ] pdfmovechars/encoding
	problem]
Message-ID: <424C5678.3010303@wxs.nl>


-- 

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------
-------------- next part --------------
An embedded message was scrubbed...
From: Hans Hagen <pragma@wxs.nl>
Subject: Re: [NTG-pdftex] [ pdftex-Bugs-294 ] pdfmovechars/encoding problem
Date: Thu, 31 Mar 2005 21:58:28 +0200
Size: 1948
Url: http://www.ntg.nl/pipermail/ntg-pdftex/attachments/20050331/023ce782/encodingproblem.mht
From reinhard.kotucha at web.de  Thu Mar 31 22:22:49 2005
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Thu Mar 31 22:22:55 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-294 ] pdfmovechars/encoding problem
In-Reply-To: <Pine.LNX.4.61.0503312128340.4833@hahepc1.hahe>
References: <E1D18y1-0002t1-00@sarovar.org> <20050217003257.GA2897@monty>
	<Pine.LNX.4.61.0503312128340.4833@hahepc1.hahe>
Message-ID: <16972.23577.817461.463644@zarniwoop.ms25.local>

>>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel@gmx.de> writes:

  > On Thu, 17 Feb 2005, The Thanh Han wrote:
  >> this issue needs revision as well. In the beginning there were
  >> requests to move chars in range [0, 32) to higher slots if
  >> possible, so I introduced \pdfmovechars. I don't use this feature
  >> myself, and it seems that almost nobody else does, thus the bug
  >> slipped out without being noticed for quite a long time.

  > more see in Thanh's original post. Nobody followed up. What to do?
  > I never used this, either, nor understand for what it would do
  > good.  Should we remove \pdfmovechars to close this bug?

Hi Hartmut,
AFAIK, \pdfmovechars had been introduced to circumvent bugs in ancient
versions of Acrobug.  I never needed this and I doubt that anyone
still uses such an old version.

On the other hand, if the nonfree Acrobat is affected, one should not
forget that some people do not have the money to upgrade whenever
Adobe makes a new release.

I think that Hans Hagen's opinion is quite valuable, he has the best
overview.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha@web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From noreply at sarovar.org  Thu Mar 31 23:57:12 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Fri Apr  1 00:01:59 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-294 ] pdfmovechars/encoding problem
Message-ID: <E1DH7f6-00077n-00@sarovar.org>

Bugs item #294, was opened at 2005-02-15 21:06
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=294&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: The Thanh Han (hanthethanh)
Summary: pdfmovechars/encoding problem

Initial Comment:
This has been reported by J?rg Heinrich at 1 Feb. 2005
on the pdftex list (Subject: [pdftex] pdfetex). The
following derived example leads to a segfault:

% this works:
%\pdfmovechars=1
% this gives segfault:
\pdfmovechars=2
% this works:
%\pdfmapline{phvr8r Helvetica <8r.enc <phvr8a.pfb}
% this gives segfault:
\pdfmapline{phvr8r Helvetica <phvr8a.pfb}
\font\phv phvr8r at 10pt
\phv
a
\bye


----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-31 23:57

Message:
Logged In: YES 
user_id=929

In function t1_read_enc() the function t1_prefix() was
called while t1_line_array was not allocated yet, causing
the segfault. Making a do...while loop from the while loop
does allocation via t1_getline() in time, see the patch.
Maybe that's enough for now to close the bug.

It seems that the function t1_read_enc() is anyway called
only via get_enc() when pdfmovechars > 0, so both functions
serve only this special case, and are normally not in use.

I have done not any check whether \pdfmovechars general
functionality is ok, and one might as well thow out this
primitive, and the unneeded functions. Let's add a note
"deprecated" in the manual...

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=294&group_id=106
