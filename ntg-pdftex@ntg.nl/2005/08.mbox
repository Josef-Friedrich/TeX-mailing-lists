From noreply at sarovar.org  Mon Aug  1 19:17:03 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Mon Aug  1 19:23:52 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-396 ] The bbox of Form XObjects is too
	small
Message-ID: <E1DzduR-0001wA-00@sarovar.org>

Bugs item #396, was opened at 2005-08-01 17:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=396&group_id=106

Category: None
Group: v1.10b
Status: Open
Resolution: None
Priority: 5
Submitted By: Henrik Tidefelt (tidde)
Assigned to: Nobody (None)
Summary: The bbox of Form XObjects is too small

Initial Comment:
Run the following source trough pdflatex, and look carefully at the top 
and bottom of the output characters.  They are chopped off by just a 
little, and that is due to the bbox of the Form XObject being too small.

The problem is not growing with the height of the box (putting "\parbox
{1cm}{S\S\S\y}" in the box instead of "Sy"), so it shouldn't be a pt/bp 
confusion thing.

<<<----------------------------
\documentclass{article}
\newcommand{\smallbox}[1]{%
  \setbox0 = \hbox{#1}%
  \pdfxform
    attr { }
    resources{ }
    0
  \shipout\hbox{\pdfrefxform\pdflastxform}
}
\begin{document}
\smallbox{Sy}
\end{document}
--------------------------->>>

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=396&group_id=106
From noreply at sarovar.org  Mon Aug  1 19:52:18 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Mon Aug  1 19:59:05 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-396 ] The bbox of Form XObjects is too
	small
Message-ID: <E1DzeSY-0003Ye-00@sarovar.org>

Bugs item #396, was opened at 2005-08-01 17:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=396&group_id=106

Category: None
Group: v1.10b
Status: Open
Resolution: None
Priority: 5
Submitted By: Henrik Tidefelt (tidde)
Assigned to: Nobody (None)
Summary: The bbox of Form XObjects is too small

Initial Comment:
Run the following source trough pdflatex, and look carefully at the top 
and bottom of the output characters.  They are chopped off by just a 
little, and that is due to the bbox of the Form XObject being too small.

The problem is not growing with the height of the box (putting "\parbox
{1cm}{S\S\S\y}" in the box instead of "Sy"), so it shouldn't be a pt/bp 
confusion thing.

<<<----------------------------
\documentclass{article}
\newcommand{\smallbox}[1]{%
  \setbox0 = \hbox{#1}%
  \pdfxform
    attr { }
    resources{ }
    0
  \shipout\hbox{\pdfrefxform\pdflastxform}
}
\begin{document}
\smallbox{Sy}
\end{document}
--------------------------->>>

----------------------------------------------------------------------

>Comment By: Henrik Tidefelt (tidde)
Date: 2005-08-01 17:52

Message:
Logged In: YES 
user_id=2683

After thinking two more minutes, I recall that the size of the bbox agrees with 
the size of the TeX object in the box.  Perhaps the font lies about the glyph 
sizes, so that they will be typeset nice and thight?  In that case, that must be 
taken into account when generating Form XObjects.

My solution to the problem at the moment is to add a bigpoint in every 
direction of the bbox.  I don't see any harm in adding even more, so I could 
possibly make sure that the box is always big enough.  However, I am afraid 
that I could run into new problems as this problem gets fixed in pdftex;  just 
adding something mysterious to the bbox size to make it big enough would 
actually make things worse for my application, as I use the TeX depth 
information to locate the baseline.  Therefore, I'd appreciate if either a 
documented, fixed, space was used, or that the same amount of space was 
added below and above (left and right).  That way, the TeX origin could still 
be located.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=396&group_id=106
From noreply at sarovar.org  Mon Aug  1 20:56:47 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Mon Aug  1 21:03:48 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-396 ] The bbox of Form XObjects is too
	small
Message-ID: <E1DzfSx-00079R-00@sarovar.org>

Bugs item #396, was opened at 2005-08-01 19:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=396&group_id=106

>Category: Fonts
Group: v1.10b
Status: Open
Resolution: None
>Priority: 3
Submitted By: Henrik Tidefelt (tidde)
>Assigned to: Taco Hoekwater (taco)
Summary: The bbox of Form XObjects is too small

Initial Comment:
Run the following source trough pdflatex, and look carefully at the top 
and bottom of the output characters.  They are chopped off by just a 
little, and that is due to the bbox of the Form XObject being too small.

The problem is not growing with the height of the box (putting "\parbox
{1cm}{S\S\S\y}" in the box instead of "Sy"), so it shouldn't be a pt/bp 
confusion thing.

<<<----------------------------
\documentclass{article}
\newcommand{\smallbox}[1]{%
  \setbox0 = \hbox{#1}%
  \pdfxform
    attr { }
    resources{ }
    0
  \shipout\hbox{\pdfrefxform\pdflastxform}
}
\begin{document}
\smallbox{Sy}
\end{document}
--------------------------->>>

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2005-08-01 20:56

Message:
Logged In: YES 
user_id=421

This is not a pdfTeX problem, but a font problem. 

Look at the output of this code:
--------------------------
\pdfcompresslevel=0
\pagestyle{empty}
\documentclass[a5paper]{article}
\setlength{\fboxsep}{0pt}
\setlength{\fboxrule}{0.01pt}
\newcommand{\smallbox}[1]{%
  \fbox{#1}%
  \setbox0 = \hbox{#1}%
  \pdfxform
    0
  \pdfrefxform\pdflastxform
}
\begin{document}
\Huge
\smallbox{Sy}
\end{document}
--------------------------
You'll notice that the fbox has the same size as the bbox
and cuts through the chars the same way.

----------------------------------------------------------------------

Comment By: Henrik Tidefelt (tidde)
Date: 2005-08-01 19:52

Message:
Logged In: YES 
user_id=2683

After thinking two more minutes, I recall that the size of the bbox agrees with 
the size of the TeX object in the box.  Perhaps the font lies about the glyph 
sizes, so that they will be typeset nice and thight?  In that case, that must be 
taken into account when generating Form XObjects.

My solution to the problem at the moment is to add a bigpoint in every 
direction of the bbox.  I don't see any harm in adding even more, so I could 
possibly make sure that the box is always big enough.  However, I am afraid 
that I could run into new problems as this problem gets fixed in pdftex;  just 
adding something mysterious to the bbox size to make it big enough would 
actually make things worse for my application, as I use the TeX depth 
information to locate the baseline.  Therefore, I'd appreciate if either a 
documented, fixed, space was used, or that the same amount of space was 
added below and above (left and right).  That way, the TeX origin could still 
be located.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=396&group_id=106
From noreply at sarovar.org  Mon Aug  1 21:53:10 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Mon Aug  1 22:00:12 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-396 ] The bbox of Form XObjects is too
	small
Message-ID: <E1DzgLW-0001ya-00@sarovar.org>

Bugs item #396, was opened at 2005-08-01 17:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=396&group_id=106

Category: Fonts
Group: v1.10b
Status: Open
Resolution: None
Priority: 3
Submitted By: Henrik Tidefelt (tidde)
Assigned to: Taco Hoekwater (taco)
Summary: The bbox of Form XObjects is too small

Initial Comment:
Run the following source trough pdflatex, and look carefully at the top 
and bottom of the output characters.  They are chopped off by just a 
little, and that is due to the bbox of the Form XObject being too small.

The problem is not growing with the height of the box (putting "\parbox
{1cm}{S\S\S\y}" in the box instead of "Sy"), so it shouldn't be a pt/bp 
confusion thing.

<<<----------------------------
\documentclass{article}
\newcommand{\smallbox}[1]{%
  \setbox0 = \hbox{#1}%
  \pdfxform
    attr { }
    resources{ }
    0
  \shipout\hbox{\pdfrefxform\pdflastxform}
}
\begin{document}
\smallbox{Sy}
\end{document}
--------------------------->>>

----------------------------------------------------------------------

>Comment By: Hans Hagen (hagen)
Date: 2005-08-01 19:53

Message:
Logged In: YES 
user_id=927

There is nothing wrong with xforms and changing xform
behavior is quite dangerous after all these years. 

A non-tight boundingbox of chars is rather normal. A tex
font has a limited number of heights and depths for a
character so sometimes it's due to that limitation. Also,
font designers may wish to lie about te boundingbox (for
proper alignment purposes and such); its' rather normal to
let curver lines stick out the bbox). Also side bearings
play a role. 

So .. i'm not that sure if we're dealing with a bug here.
More a side effect. 



----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-08-01 18:56

Message:
Logged In: YES 
user_id=421

This is not a pdfTeX problem, but a font problem. 

Look at the output of this code:
--------------------------
\pdfcompresslevel=0
\pagestyle{empty}
\documentclass[a5paper]{article}
\setlength{\fboxsep}{0pt}
\setlength{\fboxrule}{0.01pt}
\newcommand{\smallbox}[1]{%
  \fbox{#1}%
  \setbox0 = \hbox{#1}%
  \pdfxform
    0
  \pdfrefxform\pdflastxform
}
\begin{document}
\Huge
\smallbox{Sy}
\end{document}
--------------------------
You'll notice that the fbox has the same size as the bbox
and cuts through the chars the same way.

----------------------------------------------------------------------

Comment By: Henrik Tidefelt (tidde)
Date: 2005-08-01 17:52

Message:
Logged In: YES 
user_id=2683

After thinking two more minutes, I recall that the size of the bbox agrees with 
the size of the TeX object in the box.  Perhaps the font lies about the glyph 
sizes, so that they will be typeset nice and thight?  In that case, that must be 
taken into account when generating Form XObjects.

My solution to the problem at the moment is to add a bigpoint in every 
direction of the bbox.  I don't see any harm in adding even more, so I could 
possibly make sure that the box is always big enough.  However, I am afraid 
that I could run into new problems as this problem gets fixed in pdftex;  just 
adding something mysterious to the bbox size to make it big enough would 
actually make things worse for my application, as I use the TeX depth 
information to locate the baseline.  Therefore, I'd appreciate if either a 
documented, fixed, space was used, or that the same amount of space was 
added below and above (left and right).  That way, the TeX origin could still 
be located.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=396&group_id=106
From noreply at sarovar.org  Mon Aug  1 22:17:42 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Mon Aug  1 22:24:53 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-396 ] The bbox of Form XObjects is too
	small
Message-ID: <E1DzgjG-0003Dc-00@sarovar.org>

Bugs item #396, was opened at 2005-08-01 19:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=396&group_id=106

Category: Fonts
Group: v1.10b
>Status: Closed
>Resolution: Wont Fix
Priority: 3
Submitted By: Henrik Tidefelt (tidde)
Assigned to: Taco Hoekwater (taco)
Summary: The bbox of Form XObjects is too small

Initial Comment:
Run the following source trough pdflatex, and look carefully at the top 
and bottom of the output characters.  They are chopped off by just a 
little, and that is due to the bbox of the Form XObject being too small.

The problem is not growing with the height of the box (putting "\parbox
{1cm}{S\S\S\y}" in the box instead of "Sy"), so it shouldn't be a pt/bp 
confusion thing.

<<<----------------------------
\documentclass{article}
\newcommand{\smallbox}[1]{%
  \setbox0 = \hbox{#1}%
  \pdfxform
    attr { }
    resources{ }
    0
  \shipout\hbox{\pdfrefxform\pdflastxform}
}
\begin{document}
\smallbox{Sy}
\end{document}
--------------------------->>>

----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2005-08-01 22:17

Message:
Logged In: YES 
user_id=1608

This behaviour of pdftex's xform is actively used by the 
clipping mechanisms in LaTeX's graphics package as well as
in ConTeXt, so changing the default behaviour it is really 
not an option, sorry. 

Besides, pdftex does not truly know what is in the box, it 
relies on the font metric information, and that is a little 
too tight in this case, just like it could easily be too 
wide in other cases.

Adding a new (set of?) standalone configuration parameter(s)
for user-driven control of each separate pdfxform is little 
better than the existing trick of adjusting the box size, 
so I am closing the bug report with "wont fix".

Thank you for the report, though

----------------------------------------------------------------------

Comment By: Hans Hagen (hagen)
Date: 2005-08-01 21:53

Message:
Logged In: YES 
user_id=927

There is nothing wrong with xforms and changing xform
behavior is quite dangerous after all these years. 

A non-tight boundingbox of chars is rather normal. A tex
font has a limited number of heights and depths for a
character so sometimes it's due to that limitation. Also,
font designers may wish to lie about te boundingbox (for
proper alignment purposes and such); its' rather normal to
let curver lines stick out the bbox). Also side bearings
play a role. 

So .. i'm not that sure if we're dealing with a bug here.
More a side effect. 



----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-08-01 20:56

Message:
Logged In: YES 
user_id=421

This is not a pdfTeX problem, but a font problem. 

Look at the output of this code:
--------------------------
\pdfcompresslevel=0
\pagestyle{empty}
\documentclass[a5paper]{article}
\setlength{\fboxsep}{0pt}
\setlength{\fboxrule}{0.01pt}
\newcommand{\smallbox}[1]{%
  \fbox{#1}%
  \setbox0 = \hbox{#1}%
  \pdfxform
    0
  \pdfrefxform\pdflastxform
}
\begin{document}
\Huge
\smallbox{Sy}
\end{document}
--------------------------
You'll notice that the fbox has the same size as the bbox
and cuts through the chars the same way.

----------------------------------------------------------------------

Comment By: Henrik Tidefelt (tidde)
Date: 2005-08-01 19:52

Message:
Logged In: YES 
user_id=2683

After thinking two more minutes, I recall that the size of the bbox agrees with 
the size of the TeX object in the box.  Perhaps the font lies about the glyph 
sizes, so that they will be typeset nice and thight?  In that case, that must be 
taken into account when generating Form XObjects.

My solution to the problem at the moment is to add a bigpoint in every 
direction of the bbox.  I don't see any harm in adding even more, so I could 
possibly make sure that the box is always big enough.  However, I am afraid 
that I could run into new problems as this problem gets fixed in pdftex;  just 
adding something mysterious to the bbox size to make it big enough would 
actually make things worse for my application, as I use the TeX depth 
information to locate the baseline.  Therefore, I'd appreciate if either a 
documented, fixed, space was used, or that the same amount of space was 
added below and above (left and right).  That way, the TeX origin could still 
be located.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=396&group_id=106
From taco at elvenkind.com  Tue Aug  2 10:06:14 2005
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue Aug  2 10:06:21 2005
Subject: [NTG-pdftex] Re: [pdftex] pdftex 1.30.0
In-Reply-To: <20050801205455.GB32147@lucien.kn-bremen.de>
References: <20050801205455.GB32147@lucien.kn-bremen.de>
Message-ID: <42EF2976.6010707@elvenkind.com>


Congrats to Martin!

For Hans and other interested people, I've put up compiled binaries for
i32 and amd64:

   http://tex.aanhet.net/temp/pdftex-1.30.0-linux-i32.tar.gz
   http://tex.aanhet.net/temp/pdftex-1.30.0-linux-amd64.tar.gz

as well as a tar.bz2 version of the zip

   http://tex.aanhet.net/temp/pdftex-1.30.0-tar.bz2

Greetings, Taco


Martin Schr?der wrote:
> [http://sarovar.org/download.php/673/pdftex-1.30.0.zip]
> 
> The pdfTeX team is happy to announce the release of a new stable version:
> 
> ===========================================================================
>                                pdfTeX 1.30.0
> ===========================================================================
From noreply at sarovar.org  Tue Aug  2 11:00:16 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Tue Aug  2 11:07:29 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-396 ] The bbox of Form XObjects is too
	small
Message-ID: <E1DzsdE-0003SZ-00@sarovar.org>

Bugs item #396, was opened at 2005-08-01 17:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=396&group_id=106

Category: Fonts
Group: v1.10b
Status: Closed
Resolution: Wont Fix
Priority: 3
Submitted By: Henrik Tidefelt (tidde)
Assigned to: Taco Hoekwater (taco)
Summary: The bbox of Form XObjects is too small

Initial Comment:
Run the following source trough pdflatex, and look carefully at the top 
and bottom of the output characters.  They are chopped off by just a 
little, and that is due to the bbox of the Form XObject being too small.

The problem is not growing with the height of the box (putting "\parbox
{1cm}{S\S\S\y}" in the box instead of "Sy"), so it shouldn't be a pt/bp 
confusion thing.

<<<----------------------------
\documentclass{article}
\newcommand{\smallbox}[1]{%
  \setbox0 = \hbox{#1}%
  \pdfxform
    attr { }
    resources{ }
    0
  \shipout\hbox{\pdfrefxform\pdflastxform}
}
\begin{document}
\smallbox{Sy}
\end{document}
--------------------------->>>

----------------------------------------------------------------------

>Comment By: Henrik Tidefelt (tidde)
Date: 2005-08-02 09:00

Message:
Logged In: YES 
user_id=2683

I understand that there may be reasons why this basic mechanism can't be 
changed, especially as I hear that this box is used for by other parts of the 
system.  I didn't expect that, and couldn't see the reason why the box would 
have to be so tight.

Still, if this box is used for clipping in graphics (as it is in pdf itself), howcome 
is this not a problem for the graphics package and and ConTeXt?  If neither 
they know what's in the boxes, do they too have to grow it by an ad hoc 
amount?  Aren't we all in the same boat?  (Perhaps with the exception of 
pdfTeX itself because the Form XObject feature is considered low-level, and 
anyone-who-uses-it-needs-to-know-what-they're-doing?)

(Note that I have given up hope for a fix in pdfTeX.  I am just curious about 
this matter anyway.)

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-08-01 20:17

Message:
Logged In: YES 
user_id=1608

This behaviour of pdftex's xform is actively used by the 
clipping mechanisms in LaTeX's graphics package as well as
in ConTeXt, so changing the default behaviour it is really 
not an option, sorry. 

Besides, pdftex does not truly know what is in the box, it 
relies on the font metric information, and that is a little 
too tight in this case, just like it could easily be too 
wide in other cases.

Adding a new (set of?) standalone configuration parameter(s)
for user-driven control of each separate pdfxform is little 
better than the existing trick of adjusting the box size, 
so I am closing the bug report with "wont fix".

Thank you for the report, though

----------------------------------------------------------------------

Comment By: Hans Hagen (hagen)
Date: 2005-08-01 19:53

Message:
Logged In: YES 
user_id=927

There is nothing wrong with xforms and changing xform
behavior is quite dangerous after all these years. 

A non-tight boundingbox of chars is rather normal. A tex
font has a limited number of heights and depths for a
character so sometimes it's due to that limitation. Also,
font designers may wish to lie about te boundingbox (for
proper alignment purposes and such); its' rather normal to
let curver lines stick out the bbox). Also side bearings
play a role. 

So .. i'm not that sure if we're dealing with a bug here.
More a side effect. 



----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-08-01 18:56

Message:
Logged In: YES 
user_id=421

This is not a pdfTeX problem, but a font problem. 

Look at the output of this code:
--------------------------
\pdfcompresslevel=0
\pagestyle{empty}
\documentclass[a5paper]{article}
\setlength{\fboxsep}{0pt}
\setlength{\fboxrule}{0.01pt}
\newcommand{\smallbox}[1]{%
  \fbox{#1}%
  \setbox0 = \hbox{#1}%
  \pdfxform
    0
  \pdfrefxform\pdflastxform
}
\begin{document}
\Huge
\smallbox{Sy}
\end{document}
--------------------------
You'll notice that the fbox has the same size as the bbox
and cuts through the chars the same way.

----------------------------------------------------------------------

Comment By: Henrik Tidefelt (tidde)
Date: 2005-08-01 17:52

Message:
Logged In: YES 
user_id=2683

After thinking two more minutes, I recall that the size of the bbox agrees with 
the size of the TeX object in the box.  Perhaps the font lies about the glyph 
sizes, so that they will be typeset nice and thight?  In that case, that must be 
taken into account when generating Form XObjects.

My solution to the problem at the moment is to add a bigpoint in every 
direction of the bbox.  I don't see any harm in adding even more, so I could 
possibly make sure that the box is always big enough.  However, I am afraid 
that I could run into new problems as this problem gets fixed in pdftex;  just 
adding something mysterious to the bbox size to make it big enough would 
actually make things worse for my application, as I use the TeX depth 
information to locate the baseline.  Therefore, I'd appreciate if either a 
documented, fixed, space was used, or that the same amount of space was 
added below and above (left and right).  That way, the TeX origin could still 
be located.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=396&group_id=106
From hanthethanh at gmail.com  Tue Aug  2 12:34:44 2005
From: hanthethanh at gmail.com (Thanh Han The)
Date: Tue Aug  2 12:34:49 2005
Subject: [NTG-pdftex] Re: pdftex 1.30.0
Message-ID: <74f506dc05080203344f13a297@mail.gmail.com>

Many thanks to Martin!

Thanh

> Martin Schr?der wrote:
> >[http://sarovar.org/download.php/673/pdftex-1.30.0.zip]
> >
> >The pdfTeX team is happy to announce the release of a new stable version:
> >
> >===========================================================================
> >                               pdfTeX 1.30.0
> >===========================================================================
>
> [...]
From noreply at sarovar.org  Tue Aug  2 13:19:35 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Tue Aug  2 13:26:40 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-396 ] The bbox of Form XObjects is too
	small
Message-ID: <E1Dzuo3-0002fa-00@sarovar.org>

Bugs item #396, was opened at 2005-08-01 19:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=396&group_id=106

Category: Fonts
Group: v1.10b
Status: Closed
Resolution: Wont Fix
Priority: 3
Submitted By: Henrik Tidefelt (tidde)
Assigned to: Taco Hoekwater (taco)
Summary: The bbox of Form XObjects is too small

Initial Comment:
Run the following source trough pdflatex, and look carefully at the top 
and bottom of the output characters.  They are chopped off by just a 
little, and that is due to the bbox of the Form XObject being too small.

The problem is not growing with the height of the box (putting "\parbox
{1cm}{S\S\S\y}" in the box instead of "Sy"), so it shouldn't be a pt/bp 
confusion thing.

<<<----------------------------
\documentclass{article}
\newcommand{\smallbox}[1]{%
  \setbox0 = \hbox{#1}%
  \pdfxform
    attr { }
    resources{ }
    0
  \shipout\hbox{\pdfrefxform\pdflastxform}
}
\begin{document}
\smallbox{Sy}
\end{document}
--------------------------->>>

----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2005-08-02 13:19

Message:
Logged In: YES 
user_id=1608

The xform has precisely the same dimensions that the TeX box 
has. 

For graphics, the macro package normally *does* know what is
in  the box (from the image's dimensions); and it also knows
which portion of the included graphic/box it needs to
display (from the user input).

Then it essentially shrinks (instead of expands, as in your
 case) the box from it's 'natural' dimensions to the desired
clip size. And that is why adding something either
automatically or semi-automatically would break existing
documents: not *enough* of the graphic would be clipped then.

I hope this answers your question.



----------------------------------------------------------------------

Comment By: Henrik Tidefelt (tidde)
Date: 2005-08-02 11:00

Message:
Logged In: YES 
user_id=2683

I understand that there may be reasons why this basic mechanism can't be 
changed, especially as I hear that this box is used for by other parts of the 
system.  I didn't expect that, and couldn't see the reason why the box would 
have to be so tight.

Still, if this box is used for clipping in graphics (as it is in pdf itself), howcome 
is this not a problem for the graphics package and and ConTeXt?  If neither 
they know what's in the boxes, do they too have to grow it by an ad hoc 
amount?  Aren't we all in the same boat?  (Perhaps with the exception of 
pdfTeX itself because the Form XObject feature is considered low-level, and 
anyone-who-uses-it-needs-to-know-what-they're-doing?)

(Note that I have given up hope for a fix in pdfTeX.  I am just curious about 
this matter anyway.)

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-08-01 22:17

Message:
Logged In: YES 
user_id=1608

This behaviour of pdftex's xform is actively used by the 
clipping mechanisms in LaTeX's graphics package as well as
in ConTeXt, so changing the default behaviour it is really 
not an option, sorry. 

Besides, pdftex does not truly know what is in the box, it 
relies on the font metric information, and that is a little 
too tight in this case, just like it could easily be too 
wide in other cases.

Adding a new (set of?) standalone configuration parameter(s)
for user-driven control of each separate pdfxform is little 
better than the existing trick of adjusting the box size, 
so I am closing the bug report with "wont fix".

Thank you for the report, though

----------------------------------------------------------------------

Comment By: Hans Hagen (hagen)
Date: 2005-08-01 21:53

Message:
Logged In: YES 
user_id=927

There is nothing wrong with xforms and changing xform
behavior is quite dangerous after all these years. 

A non-tight boundingbox of chars is rather normal. A tex
font has a limited number of heights and depths for a
character so sometimes it's due to that limitation. Also,
font designers may wish to lie about te boundingbox (for
proper alignment purposes and such); its' rather normal to
let curver lines stick out the bbox). Also side bearings
play a role. 

So .. i'm not that sure if we're dealing with a bug here.
More a side effect. 



----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-08-01 20:56

Message:
Logged In: YES 
user_id=421

This is not a pdfTeX problem, but a font problem. 

Look at the output of this code:
--------------------------
\pdfcompresslevel=0
\pagestyle{empty}
\documentclass[a5paper]{article}
\setlength{\fboxsep}{0pt}
\setlength{\fboxrule}{0.01pt}
\newcommand{\smallbox}[1]{%
  \fbox{#1}%
  \setbox0 = \hbox{#1}%
  \pdfxform
    0
  \pdfrefxform\pdflastxform
}
\begin{document}
\Huge
\smallbox{Sy}
\end{document}
--------------------------
You'll notice that the fbox has the same size as the bbox
and cuts through the chars the same way.

----------------------------------------------------------------------

Comment By: Henrik Tidefelt (tidde)
Date: 2005-08-01 19:52

Message:
Logged In: YES 
user_id=2683

After thinking two more minutes, I recall that the size of the bbox agrees with 
the size of the TeX object in the box.  Perhaps the font lies about the glyph 
sizes, so that they will be typeset nice and thight?  In that case, that must be 
taken into account when generating Form XObjects.

My solution to the problem at the moment is to add a bigpoint in every 
direction of the bbox.  I don't see any harm in adding even more, so I could 
possibly make sure that the box is always big enough.  However, I am afraid 
that I could run into new problems as this problem gets fixed in pdftex;  just 
adding something mysterious to the bbox size to make it big enough would 
actually make things worse for my application, as I use the TeX depth 
information to locate the baseline.  Therefore, I'd appreciate if either a 
documented, fixed, space was used, or that the same amount of space was 
added below and above (left and right).  That way, the TeX origin could still 
be located.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=396&group_id=106
From noreply at sarovar.org  Tue Aug  2 13:26:18 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Tue Aug  2 13:33:23 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-396 ] The bbox of Form XObjects is too
	small
Message-ID: <E1DzuuY-00032O-00@sarovar.org>

Bugs item #396, was opened at 2005-08-01 17:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=396&group_id=106

Category: Fonts
Group: v1.10b
Status: Closed
Resolution: Wont Fix
Priority: 3
Submitted By: Henrik Tidefelt (tidde)
Assigned to: Taco Hoekwater (taco)
Summary: The bbox of Form XObjects is too small

Initial Comment:
Run the following source trough pdflatex, and look carefully at the top 
and bottom of the output characters.  They are chopped off by just a 
little, and that is due to the bbox of the Form XObject being too small.

The problem is not growing with the height of the box (putting "\parbox
{1cm}{S\S\S\y}" in the box instead of "Sy"), so it shouldn't be a pt/bp 
confusion thing.

<<<----------------------------
\documentclass{article}
\newcommand{\smallbox}[1]{%
  \setbox0 = \hbox{#1}%
  \pdfxform
    attr { }
    resources{ }
    0
  \shipout\hbox{\pdfrefxform\pdflastxform}
}
\begin{document}
\smallbox{Sy}
\end{document}
--------------------------->>>

----------------------------------------------------------------------

>Comment By: Henrik Tidefelt (tidde)
Date: 2005-08-02 11:26

Message:
Logged In: YES 
user_id=2683

My fault.  I thought these objects could be sent _to_ the graphics package.

Thanks for taking your time!


----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-08-02 11:19

Message:
Logged In: YES 
user_id=1608

The xform has precisely the same dimensions that the TeX box 
has. 

For graphics, the macro package normally *does* know what is
in  the box (from the image's dimensions); and it also knows
which portion of the included graphic/box it needs to
display (from the user input).

Then it essentially shrinks (instead of expands, as in your
 case) the box from it's 'natural' dimensions to the desired
clip size. And that is why adding something either
automatically or semi-automatically would break existing
documents: not *enough* of the graphic would be clipped then.

I hope this answers your question.



----------------------------------------------------------------------

Comment By: Henrik Tidefelt (tidde)
Date: 2005-08-02 09:00

Message:
Logged In: YES 
user_id=2683

I understand that there may be reasons why this basic mechanism can't be 
changed, especially as I hear that this box is used for by other parts of the 
system.  I didn't expect that, and couldn't see the reason why the box would 
have to be so tight.

Still, if this box is used for clipping in graphics (as it is in pdf itself), howcome 
is this not a problem for the graphics package and and ConTeXt?  If neither 
they know what's in the boxes, do they too have to grow it by an ad hoc 
amount?  Aren't we all in the same boat?  (Perhaps with the exception of 
pdfTeX itself because the Form XObject feature is considered low-level, and 
anyone-who-uses-it-needs-to-know-what-they're-doing?)

(Note that I have given up hope for a fix in pdfTeX.  I am just curious about 
this matter anyway.)

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-08-01 20:17

Message:
Logged In: YES 
user_id=1608

This behaviour of pdftex's xform is actively used by the 
clipping mechanisms in LaTeX's graphics package as well as
in ConTeXt, so changing the default behaviour it is really 
not an option, sorry. 

Besides, pdftex does not truly know what is in the box, it 
relies on the font metric information, and that is a little 
too tight in this case, just like it could easily be too 
wide in other cases.

Adding a new (set of?) standalone configuration parameter(s)
for user-driven control of each separate pdfxform is little 
better than the existing trick of adjusting the box size, 
so I am closing the bug report with "wont fix".

Thank you for the report, though

----------------------------------------------------------------------

Comment By: Hans Hagen (hagen)
Date: 2005-08-01 19:53

Message:
Logged In: YES 
user_id=927

There is nothing wrong with xforms and changing xform
behavior is quite dangerous after all these years. 

A non-tight boundingbox of chars is rather normal. A tex
font has a limited number of heights and depths for a
character so sometimes it's due to that limitation. Also,
font designers may wish to lie about te boundingbox (for
proper alignment purposes and such); its' rather normal to
let curver lines stick out the bbox). Also side bearings
play a role. 

So .. i'm not that sure if we're dealing with a bug here.
More a side effect. 



----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-08-01 18:56

Message:
Logged In: YES 
user_id=421

This is not a pdfTeX problem, but a font problem. 

Look at the output of this code:
--------------------------
\pdfcompresslevel=0
\pagestyle{empty}
\documentclass[a5paper]{article}
\setlength{\fboxsep}{0pt}
\setlength{\fboxrule}{0.01pt}
\newcommand{\smallbox}[1]{%
  \fbox{#1}%
  \setbox0 = \hbox{#1}%
  \pdfxform
    0
  \pdfrefxform\pdflastxform
}
\begin{document}
\Huge
\smallbox{Sy}
\end{document}
--------------------------
You'll notice that the fbox has the same size as the bbox
and cuts through the chars the same way.

----------------------------------------------------------------------

Comment By: Henrik Tidefelt (tidde)
Date: 2005-08-01 17:52

Message:
Logged In: YES 
user_id=2683

After thinking two more minutes, I recall that the size of the bbox agrees with 
the size of the TeX object in the box.  Perhaps the font lies about the glyph 
sizes, so that they will be typeset nice and thight?  In that case, that must be 
taken into account when generating Form XObjects.

My solution to the problem at the moment is to add a bigpoint in every 
direction of the bbox.  I don't see any harm in adding even more, so I could 
possibly make sure that the box is always big enough.  However, I am afraid 
that I could run into new problems as this problem gets fixed in pdftex;  just 
adding something mysterious to the bbox size to make it big enough would 
actually make things worse for my application, as I use the TeX depth 
information to locate the baseline.  Therefore, I'd appreciate if either a 
documented, fixed, space was used, or that the same amount of space was 
added below and above (left and right).  That way, the TeX origin could still 
be located.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=396&group_id=106
From jackos1 at poczta.onet.pl  Tue Aug  2 13:54:37 2005
From: jackos1 at poczta.onet.pl (Pawel Jackowski)
Date: Tue Aug  2 13:55:21 2005
Subject: [NTG-pdftex] compilation under mingw
Message-ID: <42EF5EFD.5080602@poczta.onet.pl>

Hi there,

pdfTeX sources (at least current 1.30.0 and rcandidates) don't compile 
under mingw environment, although #ifdefs suggest that mingw is supported.

src/texk/kpathsea/config.h:85:22 win32lib.h: No such file or directory
src/texk/kpathsea/c-ctype.h:26:22 oldnames.h: No such file or directory

Has anybody tried? Thanks for any clues.
-- 
Pawe/l Jackowski
P.Jackowski@gust.org.pl
From hanthethanh at gmail.com  Tue Aug  2 14:00:46 2005
From: hanthethanh at gmail.com (Thanh Han The)
Date: Tue Aug  2 14:00:52 2005
Subject: [NTG-pdftex] compilation under mingw
Message-ID: <74f506dc050802050021a81281@mail.gmail.com>

I spent a lot of time to compile pdftex with mingw in the
past, but in the end I think that it's not worthwhile for
the trouble so I gave it up. Using the djgpp cross-compiler is
much easier ad allows me to use the same sources for
compiling binaries for linux and dos/windows. 

Thanh


On Tue, Aug 02, 2005 at 01:54:37PM +0200, Pawel Jackowski wrote:
> Hi there,
> 
> pdfTeX sources (at least current 1.30.0 and rcandidates) don't compile 
> under mingw environment, although #ifdefs suggest that mingw is supported.
> 
> src/texk/kpathsea/config.h:85:22 win32lib.h: No such file or directory
> src/texk/kpathsea/c-ctype.h:26:22 oldnames.h: No such file or directory
> 
> Has anybody tried? Thanks for any clues.
> -- 
> Pawe/l Jackowski
> P.Jackowski@gust.org.pl
> _______________________________________________
> ntg-pdftex mailing list
> ntg-pdftex@ntg.nl
> http://www.ntg.nl/mailman/listinfo/ntg-pdftex
From taco at elvenkind.com  Tue Aug  2 14:21:43 2005
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue Aug  2 14:21:52 2005
Subject: [NTG-pdftex] compilation under mingw
In-Reply-To: <42EF5EFD.5080602@poczta.onet.pl>
References: <42EF5EFD.5080602@poczta.onet.pl>
Message-ID: <42EF6557.6040008@elvenkind.com>



The last person working on this has been Siep Kroonenberg (one of my
co-workers), but here support patches are not quite up-to-date I think
(I have some updated stuff here that allows me to compile metapost
0.901, but I have not tried pdftex yet).

See here:

   http://tex.aanhet.net/mingwtex

While DJGPP binaries are easy to create, they are a bit slow. The
best course of action may be to send and e-mail message to Christian
Schenk (miktex) or Fabrice Popineau (XemTeX).

Cheers, Taco


Pawel Jackowski wrote:
> Hi there,
> 
> pdfTeX sources (at least current 1.30.0 and rcandidates) don't compile 
> under mingw environment, although #ifdefs suggest that mingw is supported.
> 
> src/texk/kpathsea/config.h:85:22 win32lib.h: No such file or directory
> src/texk/kpathsea/c-ctype.h:26:22 oldnames.h: No such file or directory
> 
> Has anybody tried? Thanks for any clues.
From jackos1 at poczta.onet.pl  Tue Aug  2 14:36:04 2005
From: jackos1 at poczta.onet.pl (Pawel Jackowski)
Date: Tue Aug  2 14:36:26 2005
Subject: [NTG-pdftex] compilation under mingw
In-Reply-To: <74f506dc050802050021a81281@mail.gmail.com>
References: <74f506dc050802050021a81281@mail.gmail.com>
Message-ID: <42EF68B4.1060509@poczta.onet.pl>

Thanh,

> I spent a lot of time to compile pdftex with mingw in the
> past, but in the end I think that it's not worthwhile for
> the trouble so I gave it up[...]

I think I give up to, but I've just gave it one more chance using some 
clues I've found here:

http://www.octave.org/octave-lists/archive/octave-maintainers.2002/msg00282.html

This resolves missing headers problem, but as the author, I'm not sure 
if such changes are correct and doesn't spoil some other things.

> Using the djgpp cross-compiler is
> much easier ad allows me to use the same sources for
> compiling binaries for linux and dos/windows.

I'll follow your recomendation. Thanks for response.
-- 
Pawe/l Jackowski
P.Jackowski@gust.org.pl
From pragma at wxs.nl  Tue Aug  2 15:26:16 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Tue Aug  2 15:26:44 2005
Subject: [NTG-pdftex] Re: [pdftex] pdftex 1.30.0
In-Reply-To: <42EF2976.6010707@elvenkind.com>
References: <20050801205455.GB32147@lucien.kn-bremen.de>
	<42EF2976.6010707@elvenkind.com>
Message-ID: <42EF7478.6010701@wxs.nl>

Taco Hoekwater wrote:

>
> Congrats to Martin!
>
> For Hans and other interested people, I've put up compiled binaries for
> i32 and amd64:
>
>   http://tex.aanhet.net/temp/pdftex-1.30.0-linux-i32.tar.gz
>   http://tex.aanhet.net/temp/pdftex-1.30.0-linux-amd64.tar.gz

in a pretty new suse 9.3 I get:

libstdc++.so.6

can you make statically linked ones? 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Tue Aug  2 16:46:11 2005
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue Aug  2 16:46:20 2005
Subject: [NTG-pdftex] Re: [pdftex] pdftex 1.30.0
In-Reply-To: <42EF7478.6010701@wxs.nl>
References: <20050801205455.GB32147@lucien.kn-bremen.de>	<42EF2976.6010707@elvenkind.com>
	<42EF7478.6010701@wxs.nl>
Message-ID: <42EF8733.3070909@elvenkind.com>



Hans Hagen wrote:
> Taco Hoekwater wrote:
> 
>>
>> Congrats to Martin!
>>
>> For Hans and other interested people, I've put up compiled binaries for
>> i32 and amd64:
>>
>>   http://tex.aanhet.net/temp/pdftex-1.30.0-linux-i32.tar.gz
>>   http://tex.aanhet.net/temp/pdftex-1.30.0-linux-amd64.tar.gz
> 
> 
> in a pretty new suse 9.3 I get:
> 
> libstdc++.so.6
> 
> can you make statically linked ones?

I compiled and uploaded new executables with a static libstdc++
(--with-cxx-runtime-hack). Same file names, just download again.

Cheers, Taco
From noreply at sarovar.org  Wed Aug  3 00:13:51 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Aug  3 00:24:13 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-378 ] xputenv.c:79: failed assertion
	`old_item' / pdfeTeX, Version 3.141592-1.30.0-rc2-2.2 (Web2C 7.5.5)
Message-ID: <E1E051D-0005kg-00@sarovar.org>

Bugs item #378, was opened at 2005-07-05 17:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=378&group_id=106

Category: web2c
Group: v1.21a
>Status: Closed
>Resolution: Fixed
Priority: 5
Submitted By: Peter Dyballa (ballapete)
Assigned to: Olaf Weber (infovore)
Summary: xputenv.c:79: failed assertion `old_item'  / pdfeTeX, Version 3.141592-1.30.0-rc2-2.2 (Web2C 7.5.5)

Initial Comment:
That's the document:

\documentclass[12pt]{article}
\usepackage{cmbright}
%\usepackage{eurofont}
\usepackage[T1]{fontenc}
%\usepackage{lmodern}
\usepackage[?]{amsmath}

\begin{document}
    This is a test document for testing purposes in cmbright. It's worth 
maybe 0,02\,\texteuro.
    \section{Introcution}
    Let us do some math!

%     \[ \forall x \in \mathbf{R}, x^2 \geq 0 \]		% NOT ok
     \[  x , 0 \]%\in \mathbf{R} x^2 \geq			% OK

%    \begin{equation}
%      \forall x \in \mathbf{R}, x^2 \geq 0			% NOT ok
%    \end{equation}

%    \begin{equation}
%      x = r^2 + \sum_{0}^{100} y^2				% NOT ok
%    \end{equation}

    \begin{equation}
%      {\partial\over\partial x} f(x,y) = {\partial\over\partial y} f(x,y) = 0
	% OK!
      \frac{\partial}{\partial x} f(x,y) = \frac{\partial}{\partial y} f(x,y) = 0
	% OK!
    \end{equation}

\end{document}

Failure message:
.... (./cmbright.aux) (/usr/local/teTeX/share/texmf.tetex/tex/latex/
base/ts1cmr.fd)
(/usr/local/teTeX/share/texmf.tetex/tex/latex/cmbright/ts1cmbr.fd)
(/usr/local/teTeX/share/texmf.tetex/tex/latex/cmbright/
omlcmbrm.fd)
(/usr/local/teTeX/share/texmf.tetex/tex/latex/cmbright/
omscmbrs.fd)

[1{/usr/local/teTeX/share/texmf.local/fonts/map/pdftex/updmap/
pdftex.map}]
(./cmbright.aux) ) </var/tmp/texfonts/pk/ljfour/public/cmbright/
cmbr10.720pk>xputenv.c:79: failed assertion `old_item'
Abort

No PS Type 1 fonts, only MF based.


----------------------------------------------------------------------

>Comment By: Olaf Weber (infovore)
Date: 2005-08-03 00:13

Message:
Logged In: YES 
user_id=1847

The new xputenv.c has been verified to fix the problem.  
It has been checked into the main web2c sources and will 
merge into TeX-live and teTeX from there. 
 

----------------------------------------------------------------------

Comment By: Olaf Weber (infovore)
Date: 2005-07-10 11:41

Message:
Logged In: YES 
user_id=1847

Reopening and assigning to myself, updating title and 
group to clarify problem. 
Likely this is a problem with the xputenv implementation 
in the web2c sources.  Attached is a new xputenv.c which 
should not suffer from the same problem.  It also doesn't 
require the SMART_PUTENV autoconf check (was originally 
written specifically to be able to get rid of this check). 
 

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-07-07 23:53

Message:
Logged In: YES 
user_id=421

This seems to be an implementation problem on certain
versions of OSX.

----------------------------------------------------------------------

Comment By: Peter Dyballa (ballapete)
Date: 2005-07-06 09:46

Message:
Logged In: YES 
user_id=2303

Sorry, that's my fault with commented out %\usepackage{eurofont}!

The error becomes obvious with this file and the first two lines of math. The 
version below runs fine, but if you add any of the commented out math 
entities it breaks:

\documentclass[12pt]{article}
\usepackage{cmbright}
\usepackage[T1]{fontenc}
%\usepackage{lmodern}
\usepackage[?]{amsmath}


\begin{document}
    \section{Introcution}
    Let us do some math!

%     \[  x , 0 \mathbf{R} \]%\in x^2 \geq		% NOT ok
     \[  x , 0 \]% \forall \in \mathbf{R} x^2 \geq			% OK

    \begin{equation}
      \frac{\partial}{\partial x} f(x,y) = \frac{\partial}{\partial y} f(x,y) = 0	
% OK!
    \end{equation}
\end{document}

I have too a case with archaic PK fonts and I've seen an answer to my ConTeXt 
question so that a third case might be coming ...

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-07-06 08:21

Message:
Logged In: YES 
user_id=929

I also can't reproduce the bug; have sent Pete an xputenv.c
with a few diagnostic printf's, which he has forwarded to
Gerben (who will soon be in holidays...).

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-07-06 03:08

Message:
Logged In: YES 
user_id=421

Argl. The comment got lost. :-(

Your example is without eurofont, yet your log shows that
you use eurofont. Without eurofont the example works
perfectly for me with 1.21a and 1.30.0-rc2 ...

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=378&group_id=106
From martin at oneiros.de  Wed Aug  3 00:34:51 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed Aug  3 01:02:28 2005
Subject: [NTG-pdftex] Re: [pdftex] pdftex 1.30.0
In-Reply-To: <42EF2976.6010707@elvenkind.com>
References: <20050801205455.GB32147@lucien.kn-bremen.de>
	<42EF2976.6010707@elvenkind.com>
Message-ID: <20050802223451.GC12739@lucien.kn-bremen.de>

On 2005-08-02 10:06:14 +0200, Taco Hoekwater wrote:
> For Hans and other interested people, I've put up compiled binaries for
> i32 and amd64:
> 
>   http://tex.aanhet.net/temp/pdftex-1.30.0-linux-i32.tar.gz
>   http://tex.aanhet.net/temp/pdftex-1.30.0-linux-amd64.tar.gz
> 
> as well as a tar.bz2 version of the zip
> 
>   http://tex.aanhet.net/temp/pdftex-1.30.0-tar.bz2

Thanks. If you want, you can add them to the 1.30.0 files at
sarovar.

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From taco at elvenkind.com  Wed Aug  3 19:28:14 2005
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed Aug  3 19:32:22 2005
Subject: [NTG-pdftex] Re: [pdftex] pdftex 1.30.0
In-Reply-To: <20050802223451.GC12739@lucien.kn-bremen.de>
References: <20050801205455.GB32147@lucien.kn-bremen.de>	<42EF2976.6010707@elvenkind.com>
	<20050802223451.GC12739@lucien.kn-bremen.de>
Message-ID: <42F0FEAE.6030605@elvenkind.com>

Martin Schr?der wrote:
> 
> Thanks. If you want, you can add them to the 1.30.0 files at
> sarovar.

I just did that.

Taco

From peter.rolf at arcor.de  Wed Aug  3 22:36:01 2005
From: peter.rolf at arcor.de (Peter Rolf)
Date: Wed Aug  3 22:49:21 2005
Subject: [NTG-pdftex] compilation under mingw
In-Reply-To: <42EF5EFD.5080602@poczta.onet.pl>
References: <42EF5EFD.5080602@poczta.onet.pl>
Message-ID: <42F12AB1.3000305@arcor.de>

Pawel Jackowski wrote:
> Hi there,
> 
> pdfTeX sources (at least current 1.30.0 and rcandidates) don't compile
> under mingw environment, although #ifdefs suggest that mingw is supported.
> 
> src/texk/kpathsea/config.h:85:22 win32lib.h: No such file or directory
> src/texk/kpathsea/c-ctype.h:26:22 oldnames.h: No such file or directory
> 
> Has anybody tried? Thanks for any clues.

Hi Pawel,

have a look at

http://www.tug.org/ftp/texlive/Contents/live/source/source-win32.zip

for the missed include files.
Better luck for your next compilation.

Greetings,

Peter


P.S.: Nothing beats the smell of a fresh, hand-compiled pdfetex ;)
From jackos1 at poczta.onet.pl  Thu Aug  4 13:21:56 2005
From: jackos1 at poczta.onet.pl (Pawel Jackowski)
Date: Thu Aug  4 13:22:41 2005
Subject: [NTG-pdftex] compilation under mingw
In-Reply-To: <42F12AB1.3000305@arcor.de>
References: <42EF5EFD.5080602@poczta.onet.pl> <42F12AB1.3000305@arcor.de>
Message-ID: <42F1FA54.6080205@poczta.onet.pl>

Hi Peter,

> have a look at
> 
> http://www.tug.org/ftp/texlive/Contents/live/source/source-win32.zip
> 
> for the missed include files.
> Better luck for your next compilation.

Those sources seems to be prepared mainly for VC. But with my VC they 
don't compile either; here I suspect compiler version problem; I use VC7 
that seems to be to fresh; sources are prepared for 6.

Thank you all anyway, I keep trying.

BR
-- 
Pawe/l Jackowski
P.Jackowski@gust.org.pl
From jhauser at zscout.de  Wed Aug 10 07:56:42 2005
From: jhauser at zscout.de (Janko Hauser)
Date: Thu Aug 11 17:32:53 2005
Subject: [NTG-pdftex] url links in included pdf documents, 
Message-ID: <EF4936D4-9540-40B6-B1FF-91BCF80AC61C@zscout.de>

Hello, I have the need to include pdf pages as backgrounds into a  
latex document. I would like to keep the url-links in these  
background pdf's. Searching the mailinglists it turns out, that  
pdftex does strip all links from included pdf's. Has this changed in  
recent versions? How should one proceed to look for this in the code  
of pdftex?

With regards,

__Janko Hauser

From pragma at wxs.nl  Mon Aug 15 13:04:07 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Aug 15 13:03:22 2005
Subject: [NTG-pdftex] redundant resources
Message-ID: <430076A7.3070105@wxs.nl>

Hi,

There are situations where unused resources can end up in a pdf file; 
think for instance of a font system that sets up tounicode vector 
inclusion. For practical purposes, one needs to have a font loaded 
before the document preamble is scanned. If not, it is impossible to 
deal with certain dimensions. So, it that case, we have something

\pdffontattr\font{/ToUnicode ... 0 R}

But imagine that we never use that font. If the rest of the document 
fonts use the same vector, this is no problem, but when we switch to 
another font encoding, we end up with a non used to unicode vector. Or 
think of docs with only graphics (or other pdf pages) where no such 
vector is needed.

Because the object reference ... 0 R is not seen, pdftex cannot decide 
either or not to include the object, so we need to use \immediate\obj 
which result sin the non wanted entry. A solution is

\pdffontvector <obj num>

but a more generic solution is

\pdffontattr\font{/ToUnicode ... \refobjnum <objnum>}

which will tag the object (number) as being used but only when the font 
desciption object is really flushed (so \refobjnum fullfils a signal 
function)

this means that a (later) \pdfobj{...} will not be flushed when it is 
not really refered

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Mon Aug 15 14:50:08 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Aug 15 14:49:24 2005
Subject: [NTG-pdftex] reserveobjnum 
Message-ID: <43008F80.7080408@wxs.nl>

! pdfTeX error (ext1): invalid object number.
<argument> \immediate \pdfobj useobjnum 1
                                          stream {...

can this become a warning and not an error? in a multipass job (with obj cross refs) such a number may temporarily be wrong/clash, but will be resolved in next passes 

Hans 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From jackos1 at poczta.onet.pl  Mon Aug 15 19:47:38 2005
From: jackos1 at poczta.onet.pl (Pawel Jackowski)
Date: Mon Aug 15 19:47:51 2005
Subject: [NTG-pdftex] reserveobjnum
In-Reply-To: <43008F80.7080408@wxs.nl>
References: <43008F80.7080408@wxs.nl>
Message-ID: <4300D53A.80009@poczta.onet.pl>

Hans Hagen napisa?(a):
> ! pdfTeX error (ext1): invalid object number.
> <argument> \immediate \pdfobj useobjnum 1
>                                          stream {...
> 
> can this become a warning and not an error? in a multipass job (with obj 
> cross refs) such a number may temporarily be wrong/clash, but will be 
> resolved in next passes
> Hans

Meybe \pdfobjnumerrorlevel? Should be an error unless one is aware of 
what is he doing :)

BR,
-- 
Pawe/l Jackowski
P.Jackowski@gust.org.pl
From hartmut_henkel at gmx.de  Mon Aug 15 20:47:04 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Mon Aug 15 20:47:09 2005
Subject: [NTG-pdftex] reserveobjnum
In-Reply-To: <4300D53A.80009@poczta.onet.pl>
References: <43008F80.7080408@wxs.nl> <4300D53A.80009@poczta.onet.pl>
Message-ID: <Pine.LNX.4.61.0508152044370.4118@hahepc1.hahe>

On Mon, 15 Aug 2005, Pawel Jackowski wrote:

> Hans Hagen napisaB(a):
> > ! pdfTeX error (ext1): invalid object number.
> > <argument> \immediate \pdfobj useobjnum 1
> >                                          stream {...
> >
> > can this become a warning and not an error? in a multipass job (with
> > obj cross refs) such a number may temporarily be wrong/clash, but
> > will be resolved in next passes Hans
>
> Meybe \pdfobjnumerrorlevel? Should be an error unless one is aware of
> what is he doing :)

Maybe \pdfhansmode?

:-)

Hartmut
From pragma at wxs.nl  Mon Aug 15 21:14:48 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Aug 15 21:14:13 2005
Subject: [NTG-pdftex] reserveobjnum
In-Reply-To: <Pine.LNX.4.61.0508152044370.4118@hahepc1.hahe>
References: <43008F80.7080408@wxs.nl> <4300D53A.80009@poczta.onet.pl>
	<Pine.LNX.4.61.0508152044370.4118@hahepc1.hahe>
Message-ID: <4300E9A8.7040607@wxs.nl>

Hartmut Henkel wrote:

>On Mon, 15 Aug 2005, Pawel Jackowski wrote:
>
>  
>
>>Hans Hagen napisaB(a):
>>    
>>
>>>! pdfTeX error (ext1): invalid object number.
>>><argument> \immediate \pdfobj useobjnum 1
>>>                                         stream {...
>>>
>>>can this become a warning and not an error? in a multipass job (with
>>>obj cross refs) such a number may temporarily be wrong/clash, but
>>>will be resolved in next passes Hans
>>>      
>>>
>>Meybe \pdfobjnumerrorlevel? Should be an error unless one is aware of
>>what is he doing :)
>>    
>>
>
>Maybe \pdfhansmode?
>
>:-)
>  
>
anything is better that \ignorehans -) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From martin at oneiros.de  Mon Aug 15 21:42:19 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Mon Aug 15 22:00:14 2005
Subject: [NTG-pdftex] reserveobjnum
In-Reply-To: <Pine.LNX.4.61.0508152044370.4118@hahepc1.hahe>
References: <43008F80.7080408@wxs.nl> <4300D53A.80009@poczta.onet.pl>
	<Pine.LNX.4.61.0508152044370.4118@hahepc1.hahe>
Message-ID: <20050815194218.GK15321@lucien.oneiros.kn-bremen.de>

On 2005-08-15 20:47:04 +0200, Hartmut Henkel wrote:
> Maybe \pdfhansmode?

Yes! :-))

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From pragma at wxs.nl  Mon Aug 15 22:10:03 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Aug 15 22:09:19 2005
Subject: [NTG-pdftex] reserveobjnum
In-Reply-To: <20050815194218.GK15321@lucien.oneiros.kn-bremen.de>
References: <43008F80.7080408@wxs.nl> <4300D53A.80009@poczta.onet.pl>
	<Pine.LNX.4.61.0508152044370.4118@hahepc1.hahe>
	<20050815194218.GK15321@lucien.oneiros.kn-bremen.de>
Message-ID: <4300F69B.2050006@wxs.nl>

Martin Schr?der wrote:

>On 2005-08-15 20:47:04 +0200, Hartmut Henkel wrote:
>  
>
>>Maybe \pdfhansmode?
>>    
>>
>
>Yes! :-))
>  
>
well, it's a small price to pay for features -) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From hanthethanh at gmail.com  Tue Aug 16 00:32:04 2005
From: hanthethanh at gmail.com (Thanh Han The)
Date: Tue Aug 16 00:32:09 2005
Subject: [NTG-pdftex] redundant resources
Message-ID: <74f506dc05081515324cef18aa@mail.gmail.com>

Hi Hans,

does it relate to the ToUnicode object only, or something
else as well?

I think the ToUnicode object can be generated by pdftex, as
pdftex knows the current encoding vector and can find out
the corresponding unicode for a given glyph name by looking
into the AGL? It would also save some space, as fonts
having the same encoding vector (eg 8r.enc) can share a
single ToUnicode object. But I am not sure, have to recheck
the ToUnicode description.

Postponing the object refered by \pdffontattr is not that
easy to do, as pdftex does no parsing of the parameter of
\pdffontattr (like in case of many other parameters).

Thanh

On Mon, Aug 15, 2005 at 01:04:07PM +0200, Hans Hagen wrote:
> Hi,
> 
> There are situations where unused resources can end up in a pdf file; 
> think for instance of a font system that sets up tounicode vector 
> inclusion. For practical purposes, one needs to have a font loaded 
> before the document preamble is scanned. If not, it is impossible to 
> deal with certain dimensions. So, it that case, we have something
> 
> \pdffontattr\font{/ToUnicode ... 0 R}
> 
> But imagine that we never use that font. If the rest of the document 
> fonts use the same vector, this is no problem, but when we switch to 
> another font encoding, we end up with a non used to unicode vector. Or 
> think of docs with only graphics (or other pdf pages) where no such 
> vector is needed.
> 
> Because the object reference ... 0 R is not seen, pdftex cannot decide 
> either or not to include the object, so we need to use \immediate\obj 
> which result sin the non wanted entry. A solution is
> 
> \pdffontvector <obj num>
> 
> but a more generic solution is
> 
> \pdffontattr\font{/ToUnicode ... \refobjnum <objnum>}
> 
> which will tag the object (number) as being used but only when the font 
> desciption object is really flushed (so \refobjnum fullfils a signal 
> function)
> 
> this means that a (later) \pdfobj{...} will not be flushed when it is 
> not really refered
> 
> Hans 
> 
> -----------------------------------------------------------------
>                                          Hans Hagen | PRAGMA ADE
>              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
>                                             | www.pragma-pod.nl
> -----------------------------------------------------------------
> 
> _______________________________________________
> ntg-pdftex mailing list
> ntg-pdftex@ntg.nl
> http://www.ntg.nl/mailman/listinfo/ntg-pdftex
From hanthethanh at gmail.com  Tue Aug 16 00:37:30 2005
From: hanthethanh at gmail.com (Thanh Han The)
Date: Tue Aug 16 00:37:37 2005
Subject: [NTG-pdftex] url links in included pdf documents,
Message-ID: <74f506dc05081515371b753ac3@mail.gmail.com>

there was a patch to copy links in embedded pdf's, but it
was not integrated to pdf. The patch was not that simple and
none of pdftex maintainers (including me) was willing to
take care of it.

I think a compromise would be allowing certain kind of
annotation to be copied, for example URI. But I cannot make
any promise, sorry.

Regards,
Thanh

On Wed, Aug 10, 2005 at 07:56:42AM +0200, Janko Hauser wrote:
> Hello, I have the need to include pdf pages as backgrounds into a  
> latex document. I would like to keep the url-links in these  
> background pdf's. Searching the mailinglists it turns out, that  
> pdftex does strip all links from included pdf's. Has this changed in  
> recent versions? How should one proceed to look for this in the code  
> of pdftex?
> 
> With regards,
> 
> __Janko Hauser
> 
> _______________________________________________
> ntg-pdftex mailing list
> ntg-pdftex@ntg.nl
> http://www.ntg.nl/mailman/listinfo/ntg-pdftex
From pragma at wxs.nl  Tue Aug 16 01:21:45 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Tue Aug 16 01:21:07 2005
Subject: [NTG-pdftex] redundant resources
In-Reply-To: <74f506dc05081515324cef18aa@mail.gmail.com>
References: <74f506dc05081515324cef18aa@mail.gmail.com>
Message-ID: <43012389.4080408@wxs.nl>

Thanh Han The wrote:

>I think the ToUnicode object can be generated by pdftex, as
>pdftex knows the current encoding vector and can find out
>the corresponding unicode for a given glyph name by looking
>into the AGL? It would also save some space, as fonts
>having the same encoding vector (eg 8r.enc) can share a
>single ToUnicode object. But I am not sure, have to recheck
>the ToUnicode description.
>  
>
sharing is not the problem (just a matter of housekeeping in tex), but 
it makes sense to do it directly in pdftex (maybe this code can be 
shared with dvipdfmx)

>Postponing the object refered by \pdffontattr is not that
>easy to do, as pdftex does no parsing of the parameter of
>\pdffontattr (like in case of many other parameters).
>  
>
sure, but was thinking of some clever  mechanisms similar to the 
substitution mechanisms in dvipdfmx specials; it parses for @whatever 
kind of object references (placeholders) and resolves them; it could 
even be a generic mechanism:

\pdfannot|obj|etc objref somestringa ... {...@somestringb...}
\pdfannot|obj|etc objref somestringb ... {..@somestringa...}

no stream parsing, just resources, attributes, object and annot content

using something \pdfobjref{...} may be safer since that can expand to 
something that does not clash

\pdfannot|obj|etc objref somestringa ... {...\pdfobjref{somestringb} ...}
\pdfannot|obj|etc objref somestringb ... {...\pdfobjref{somestringa} ...}

think of internally "objref something" resolving to <magic 
prefix>something and
"\pdfobjref{somestringa}" to <magic prefix>something as well

pdftex keeps track of numbers itself then; i'm not sure how dvipdfmx 
does it but if it involves a second pass, just forget about it; i'll 
find a way around it -)

Hans


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Tue Aug 16 01:29:07 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Tue Aug 16 01:28:30 2005
Subject: [NTG-pdftex] url links in included pdf documents,
In-Reply-To: <74f506dc05081515371b753ac3@mail.gmail.com>
References: <74f506dc05081515371b753ac3@mail.gmail.com>
Message-ID: <43012543.2080002@wxs.nl>

Thanh Han The wrote:

>there was a patch to copy links in embedded pdf's, but it
>was not integrated to pdf. The patch was not that simple and
>none of pdftex maintainers (including me) was willing to
>take care of it.
>
>I think a compromise would be allowing certain kind of
>annotation to be copied, for example URI. But I cannot make
>any promise, sorry.
>  
>
I'm not aware of programs that can merge pdf with annots; the problem is that there can be name clashes, tricky dependencies, additional resources etc. Annots have their own layer/space in the pdf file and merging involves parsing. If only annots were implemented/designed in pdf in a better way ... 

link annots are probably doable (if one is willing to sacrifice names, i.e. when pdftex may change the names of named destinations (which makes them unreachable from outside); widgets is another more complex area esp since macro packages need to manage resources (limiting functionality is a solution but the nice things of pdftex is its flexibility). In that case there would be a nee to more \pdf primitives (in order to deal with mergable resources, like the fields and javascripts stuff). 

Occasionally I need to do this kind of merge and then i use dedicates scripts.   

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From martin at oneiros.de  Thu Aug 18 00:23:17 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Aug 18 01:04:34 2005
Subject: [NTG-pdftex] Xpdf 3.01 - a PDF viewer for X
Message-ID: <20050817222316.GB8322@lucien.oneiros.kn-bremen.de>

----- Forwarded message from "Derek B. Noonburg" <derekn@foolabs.com> -----

Date: 17 Aug 2005 21:51:23 -0000
Message-ID: <20050817215123.11144.qmail@foolabs.com>
To: martin@oneiros.de
From: "Derek B. Noonburg" <derekn@foolabs.com>
Subject: ANNOUNCE: Xpdf 3.01 - a PDF viewer for X

Glyph & Cog, LLC is pleased to announce a new version of Xpdf, the
open source Portable Document Format (PDF) viewer for X.  The Xpdf
project also includes a PDF text extractor, PDF-to-PostScript
converter, and various other utilities.

Xpdf runs under the X Window System on Unix, VMS, and OS/2.  The non-X
components (pdftops, pdftotext, etc.) also run on Win32 systems and
should run on pretty much any system with a decent C++ compiler.

Major changes:
* Added the continuous view mode, including the '-cont' switch and the
  'continuousView' config file option.
* At high zoom levels, don't rasterize the entire page - this avoids
  problems running out of memory.
* Added "search backward" and "match case" options to the find dialog.
* Support explicitly masked images and soft masked images.

See the `CHANGES' file for a complete list of changes.

Source (C++ and C) is available, and it should be fairly easy to
compile for UNIX, VMS, OS/2, and Win32.

More information, source code, and precompiled binaries are on the
xpdf web page and ftp site:

    http://www.foolabs.com/xpdf/
    ftp://ftp.foolabs.com/pub/xpdf/

For information on commercial licensing and consulting, please see the
Glyph & Cog web site:

    http://www.glyphandcog.com/

----- End forwarded message -----

I'll have a look and might make a new release (1.30.1) together
with the latest changes to web2c.

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From martin at oneiros.de  Fri Aug 19 01:16:52 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Fri Aug 19 01:24:38 2005
Subject: [NTG-pdftex] pdftex 1.30.1-rc1
Message-ID: <20050818231652.GA20239@lucien.oneiros.kn-bremen.de>

http://sarovar.org/download.php/694/pdftex-1.30.1-rc1.tar.bz2

The only changes are xpdf 3.01 and kpathsea/web2c updates from
TL.

Thomas, please check the xpdf update; especially because I
updated xpdf/depend.mk

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From noreply at sarovar.org  Fri Aug 19 09:09:37 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Fri Aug 19 09:16:43 2005
Subject: [NTG-pdftex] [ pdftex-Patches-415 ] various extensions and fixes
Message-ID: <E1E610T-0000IY-00@sarovar.org>

Patches item #415, was opened at 2005-08-19 07:09
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=415&group_id=106

Category: Primitives
Group: v1.30.0
Status: Open
Resolution: None
Priority: 5
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Martin Schr?der (oneiros)
Summary: various extensions and fixes

Initial Comment:
This is a patch for various experimental extensions:

- \pdfinsertht: return the height of an insert
(requested by Hans); this has
  similar syntax to \pdftexrevision. 

- do not fail when \pdfobj is used with an invalid
object number (requested by Hans)

- snapping: support for grid typesetting -- see
snap.txt for details

- kern before space: allow changing interword glues in
a flexible way and inserting
    a kern before certain characters --  see
kern-before-interword-glue.txt for
    details

The notes in snap.txt and
kern-before-interword-glue.txt are from email
correspondence with people interested in; hence these
notes are somewhat
informal, inaccurate or out-of-date.

How to apply:
~~~~~~~~~~~~~
cd /path/to/pdftex-1.30.0-srcdir/src/texk
patch -p1 < /path/to/pdftex-20050818.patch
cd web2c
make pdfetex


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=415&group_id=106
From noreply at sarovar.org  Fri Aug 19 09:42:20 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Fri Aug 19 09:49:18 2005
Subject: [NTG-pdftex] [ pdftex-Patches-416 ] new primitive pdflastlink
Message-ID: <E1E61W8-0002Dw-00@sarovar.org>

Patches item #416, was opened at 2005-08-19 09:42
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=416&group_id=106

Category: Primitives
Group: v1.30.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Ralf Utermann (ralfu)
Assigned to: Nobody (None)
Summary: new primitive pdflastlink

Initial Comment:
This patch implements a new primitive \pdflastlink
(analogous to \pdflastannot) which returns the object
number of the last object created with \pdfstartlink.


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=416&group_id=106
From martin at oneiros.de  Fri Aug 19 23:38:48 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Fri Aug 19 23:41:43 2005
Subject: [NTG-pdftex] pdftex 1.30.1-rc2
In-Reply-To: <20050818231652.GA20239@lucien.oneiros.kn-bremen.de>
References: <20050818231652.GA20239@lucien.oneiros.kn-bremen.de>
Message-ID: <20050819213847.GA27865@lucien.oneiros.kn-bremen.de>

http://sarovar.org/download.php/695/pdftex-1.30.1-rc2.tar.bz2

I've incoporated Thanh's patch for invalid object numbers.

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From martin at oneiros.de  Tue Aug 23 00:09:11 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Tue Aug 23 00:22:01 2005
Subject: [NTG-pdftex] pdftex 1.30.2-rc1
Message-ID: <20050822220911.GB27122@lucien.oneiros.kn-bremen.de>

http://sarovar.org/download.php/700/pdftex-1.30.2-rc1.tar.bz2

The only change is the latest patches from Olaf and Thomas in
TexLive; I prefer a new release to silently updating the archives
(and all links to them and ctan and ...).

Olaf & Thomas, please have a look at the rc. :-}

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From te at dbs.uni-hannover.de  Tue Aug 23 08:46:24 2005
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Tue Aug 23 08:49:45 2005
Subject: [NTG-pdftex] Re: pdftex 1.30.2-rc1
In-Reply-To: <20050822220911.GB27122@lucien.oneiros.kn-bremen.de>
References: <20050822220911.GB27122@lucien.oneiros.kn-bremen.de>
Message-ID: <20050823064624.GA3756@dbs.uni-hannover.de>

Hi Martin,

> Olaf & Thomas, please have a look at the rc. :-}

Looks good. I have updated NEWS, README and pdftex.ch in TL, to reflect
the new version number. To keep the diff smaller, would you please also
update
  libs/zlib/compress.c
  libs/zlib/Makefile.in
  libs/zlib/withenable.ac
  libs/zlib/zconf.h
  Makefile.in
  texk/README
  texk/README.TL
in the pdftex sources? Thse are all just some minor differences which
don't really matter.

Thomas
From martin at oneiros.de  Tue Aug 23 12:55:43 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Tue Aug 23 15:50:50 2005
Subject: [NTG-pdftex] Re: pdftex 1.30.2-rc1
In-Reply-To: <20050823064624.GA3756@dbs.uni-hannover.de>
References: <20050822220911.GB27122@lucien.oneiros.kn-bremen.de>
	<20050823064624.GA3756@dbs.uni-hannover.de>
Message-ID: <20050823105542.GA1286@lucien.oneiros.kn-bremen.de>

On 2005-08-23 08:46:24 +0200, Thomas Esser wrote:
> the new version number. To keep the diff smaller, would you please also
> update
>   libs/zlib/compress.c

No; the version in pdfTeX is newer.

>   libs/zlib/Makefile.in
>   libs/zlib/withenable.ac
>   libs/zlib/zconf.h
>   Makefile.in
>   texk/README
>   texk/README.TL

Done.

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From karl at freefriends.org  Tue Aug 23 21:03:26 2005
From: karl at freefriends.org (Karl Berry)
Date: Wed Aug 24 02:46:41 2005
Subject: [NTG-pdftex] Re: pdftex 1.30.2-rc1
In-Reply-To: <20050823064624.GA3756@dbs.uni-hannover.de>
Message-ID: <200508231903.j7NJ3Qh20618@tug.org>

      texk/README.TL

README.TL is just my minor notes about where some of the programs in the
texk/ directory of TL are found, etc.  There is no reason for it to be
included in any other distribution.

k

From te at dbs.uni-hannover.de  Thu Aug 25 20:29:53 2005
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Thu Aug 25 20:30:01 2005
Subject: [NTG-pdftex] Re: [pdftex] pdftex 1.30.2
In-Reply-To: <20050825163140.GI25850@lucien.oneiros.kn-bremen.de>
References: <20050825163140.GI25850@lucien.oneiros.kn-bremen.de>
Message-ID: <20050825182953.GA2588@dbs.uni-hannover.de>

> The pdfTeX team is happy to announce the release of a new stable version:

Hm... pdftex.ch seems to be unchanged (-rc1):

$ tar xf /t/not_ctan/pdftex-1.30.2.tar.bz2  -C /build

$ grep 1.30.2 /build/pdftex-1.30.2/src/texk/web2c/pdftexdir/pdftex.ch
@d pdftex_version_string=='-1.30.2-rc1' {current \pdfTeX\ version}
                                  ^^^^ !!!

$ md5sum /t/not_ctan/pdftex-1.30.2.tar.bz2
4b0480114a4e1fc38b555a5a1b697174  /t/not_ctan/pdftex-1.30.2.tar.bz2

$ ls -l /t/not_ctan/pdftex-1.30.2.tar.bz2
-rw-r--r--  1 te users 3353139 2005-08-25 20:16 /t/not_ctan/pdftex-1.30.2.tar.bz2

Thomas
From martin at oneiros.de  Thu Aug 25 21:22:36 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Aug 25 22:04:08 2005
Subject: [NTG-pdftex] Re: [pdftex] pdftex 1.30.2
In-Reply-To: <20050825182953.GA2588@dbs.uni-hannover.de>
References: <20050825163140.GI25850@lucien.oneiros.kn-bremen.de>
	<20050825182953.GA2588@dbs.uni-hannover.de>
Message-ID: <20050825192236.GA30089@lucien.oneiros.kn-bremen.de>

On 2005-08-25 20:29:53 +0200, Thomas Esser wrote:
> > The pdfTeX team is happy to announce the release of a new stable version:
> 
> Hm... pdftex.ch seems to be unchanged (-rc1):

Yes. :-(

Will fix.

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From noreply at sarovar.org  Fri Aug 26 20:32:18 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Fri Aug 26 20:39:25 2005
Subject: [NTG-pdftex] [ pdftex-Feature Requests-421 ] \pdf
Message-ID: <E1E8izy-0002ff-00@sarovar.org>

Feature Requests item #421, was opened at 2005-08-26 18:32
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=421&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: ivo welch (iaw4)
Assigned to: Nobody (None)
Summary: \pdf

Initial Comment:

I would humbly request that in addition add to \write18
('--shell-escape'), you add a new command, say \input18
(or \pdftexshellinput18), which like \write18 executes
a system() command on its argument, but which then
pushes the stdout output from this shell command into
the stdin stream that TeX is processing.  (no, writing
to a file and then inputting it does not do the job.)

I cannot contribute to the code base of TeX, which
seems like black magic to me.  But I can offer $300 for
this facility.  If someone was planning to spend the
time to do this anyway, this may push him/her over the
margin.  However, it is important to me that this
enters the standard feature set of pdftex, so that it
will persist through future versions, so this would be
part of the bargain here.

regards,

/ivo welch

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=421&group_id=106
From noreply at sarovar.org  Fri Aug 26 20:32:40 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Fri Aug 26 20:39:51 2005
Subject: [NTG-pdftex] [ pdftex-Feature Requests-421 ] \pdf shell escape
	addition
Message-ID: <E1E8j0K-0002ge-00@sarovar.org>

Feature Requests item #421, was opened at 2005-08-26 18:32
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=421&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: ivo welch (iaw4)
Assigned to: Nobody (None)
>Summary: \pdf shell escape addition

Initial Comment:

I would humbly request that in addition add to \write18
('--shell-escape'), you add a new command, say \input18
(or \pdftexshellinput18), which like \write18 executes
a system() command on its argument, but which then
pushes the stdout output from this shell command into
the stdin stream that TeX is processing.  (no, writing
to a file and then inputting it does not do the job.)

I cannot contribute to the code base of TeX, which
seems like black magic to me.  But I can offer $300 for
this facility.  If someone was planning to spend the
time to do this anyway, this may push him/her over the
margin.  However, it is important to me that this
enters the standard feature set of pdftex, so that it
will persist through future versions, so this would be
part of the bargain here.

regards,

/ivo welch

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=421&group_id=106
From noreply at sarovar.org  Sat Aug 27 09:01:28 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Sat Aug 27 09:08:38 2005
Subject: [NTG-pdftex] [ pdftex-Feature Requests-421 ] \pdf shell escape
	addition
Message-ID: <E1E8ugy-0004l1-00@sarovar.org>

Feature Requests item #421, was opened at 2005-08-26 20:32
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=421&group_id=106

Category: None
Group: None
Status: Open
>Resolution: Accepted
Priority: 5
Submitted By: ivo welch (iaw4)
>Assigned to: Taco Hoekwater (taco)
Summary: \pdf shell escape addition

Initial Comment:

I would humbly request that in addition add to \write18
('--shell-escape'), you add a new command, say \input18
(or \pdftexshellinput18), which like \write18 executes
a system() command on its argument, but which then
pushes the stdout output from this shell command into
the stdin stream that TeX is processing.  (no, writing
to a file and then inputting it does not do the job.)

I cannot contribute to the code base of TeX, which
seems like black magic to me.  But I can offer $300 for
this facility.  If someone was planning to spend the
time to do this anyway, this may push him/her over the
margin.  However, it is important to me that this
enters the standard feature set of pdftex, so that it
will persist through future versions, so this would be
part of the bargain here.

regards,

/ivo welch

----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2005-08-27 09:01

Message:
Logged In: YES 
user_id=1608

I have an idea on how to do this, so I've assigned it to myself

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=421&group_id=106
From hanthethanh at gmail.com  Tue Aug 30 00:38:44 2005
From: hanthethanh at gmail.com (Thanh Han The)
Date: Tue Aug 30 00:38:47 2005
Subject: [NTG-pdftex] pdftex-1.30.2 is broken
Message-ID: <74f506dc050829153844afadb4@mail.gmail.com>

Hi Martin,

it seems that pdftex-1.30.2 is broken. When I run it on a
rather complex document, it couldn't find some files in the
current directory or in the standard texmf tree. This
doesn't happen with 1.30.0. I am sorry that I cannot send
the files to reproduce the bug. The error happens randomly
and took me a few hours before I tried to run 1.30.0 against
it.

I know that it makes little sense to talk about the bug
without the files needed to reproduce the bug. However I
think it's good to have the problem reported, just for case
someone runs into similar problems.

For the moment I will make my patches againts 1.30.0.

Thanh
From martin at oneiros.de  Wed Aug 31 13:27:05 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed Aug 31 15:32:47 2005
Subject: [NTG-pdftex] pdftex-1.30.2 is broken
In-Reply-To: <74f506dc050829153844afadb4@mail.gmail.com>
References: <74f506dc050829153844afadb4@mail.gmail.com>
Message-ID: <20050831112705.GA23317@lucien.oneiros.kn-bremen.de>

On 2005-08-29 15:38:44 -0700, Thanh Han The wrote:
> it seems that pdftex-1.30.2 is broken. When I run it on a
> rather complex document, it couldn't find some files in the
> current directory or in the standard texmf tree. This
> doesn't happen with 1.30.0. I am sorry that I cannot send
> the files to reproduce the bug. The error happens randomly
> and took me a few hours before I tried to run 1.30.0 against
> it.

Do you have more details? Has anybody else seen the same
problems?

Best
    Martin
-- 
                    http://www.tm.oneiros.de
