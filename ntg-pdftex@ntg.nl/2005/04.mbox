From pragma at wxs.nl  Fri Apr  1 09:01:41 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Fri Apr  1 09:01:42 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-294 ] pdfmovechars/encoding problem
In-Reply-To: <16972.23577.817461.463644@zarniwoop.ms25.local>
References: <E1D18y1-0002t1-00@sarovar.org> <20050217003257.GA2897@monty>
	<Pine.LNX.4.61.0503312128340.4833@hahepc1.hahe>
	<16972.23577.817461.463644@zarniwoop.ms25.local>
Message-ID: <424CF1D5.4010101@wxs.nl>

Hi Reinhard,

> I think that Hans Hagen's opinion is quite valuable, he has the best
> overview.

concerning older acrobats:

- on windows, 'professional' users will have an acrobat >=4, others wil have 
relatively new readers

- on the mac, on osx there only have been versions >=6 (maybe 5) ; on system 9 
... hardly any pdftex users

- on linux, this platform was supported relatively late, so those viewers are ok

so, i agree with you that it we can obsolete this primitive

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From noreply at sarovar.org  Sat Apr  2 00:53:54 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Sat Apr  2 00:58:43 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-294 ] pdfmovechars/encoding problem
Message-ID: <E1DHV1W-0004Jc-00@sarovar.org>

Bugs item #294, was opened at 2005-02-15 21:06
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=294&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: The Thanh Han (hanthethanh)
Summary: pdfmovechars/encoding problem

Initial Comment:
This has been reported by J?rg Heinrich at 1 Feb. 2005
on the pdftex list (Subject: [pdftex] pdfetex). The
following derived example leads to a segfault:

% this works:
%\pdfmovechars=1
% this gives segfault:
\pdfmovechars=2
% this works:
%\pdfmapline{phvr8r Helvetica <8r.enc <phvr8a.pfb}
% this gives segfault:
\pdfmapline{phvr8r Helvetica <phvr8a.pfb}
\font\phv phvr8r at 10pt
\phv
a
\bye


----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2005-04-02 00:53

Message:
Logged In: YES 
user_id=929

This patch (patch-294b.tgz) removes the functionality of the
\pdfmovechars primitive. What remains for now is a warning,
once per run, if \pdfmovechars is set to a value unequal 0:

! pdfTeX warning: Primitive \pdfmovechars is obsolete.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-31 23:57

Message:
Logged In: YES 
user_id=929

In function t1_read_enc() the function t1_prefix() was
called while t1_line_array was not allocated yet, causing
the segfault. Making a do...while loop from the while loop
does allocation via t1_getline() in time, see the patch.
Maybe that's enough for now to close the bug.

It seems that the function t1_read_enc() is anyway called
only via get_enc() when pdfmovechars > 0, so both functions
serve only this special case, and are normally not in use.

I have done not any check whether \pdfmovechars general
functionality is ok, and one might as well thow out this
primitive, and the unneeded functions. Let's add a note
"deprecated" in the manual...

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=294&group_id=106
From noreply at sarovar.org  Sun Apr  3 20:26:37 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Sun Apr  3 20:31:24 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-292 ] protuding leads to "This can't
	happen (paragraph)."
Message-ID: <E1DI9nx-0002bZ-00@sarovar.org>

Bugs item #292, was opened at 2005-02-14 15:22
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=292&group_id=106

Category: hz
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin Schr?der (oneiros)
Assigned to: Hartmut Henkel (hhenkel)
>Summary: protuding leads to "This can't happen (paragraph)."

Initial Comment:
The input
---------------------
\pdfoutput=1
\input edmac
\input protcode

\font\eightrm=ptmr8t
\setprotcode\eightrm
\pdfprotrudechars=2

\linenummargin{outer} %% left|right|inner|outer
\footparagraph{A}

\tracingall\tracingonline=0
\beginnumbering

\pstart 
\text{There}\Afootnote{Habent sua fata libelli. (Der
Satz wurde auf
Wunsch der Redaktion von ?Living Marxism? gestrichen;
siehe Korsch an
P.~Mattick am 3.10.1938.)}/ is a striking contrast
between the
impression produced in the minds of West"=European
revolutionaries by
those short pamphlets of Lenin and Trotsky which
appeared in poorly
translated and poorly printed editions during the final
stage and the
aftermath of the war, and the response called forth in
Europe and
U.S.A. by the belated appearance, in 1927, of the first
extra"=Russian
versions of Lenin's philosophical work of 1908, on
?Materialism and
Empirio"=Criticism?.
\pend

\endnumbering

\bye
---------------------
(all input files are in the attached archive) leads to 
---------------------
! This can't happen (paragraph).
<recently read> \par 
                     
\do@feet ...s \else \Afootstart {A}\Afootgroup {A}
                                                  \fi
\ifvoid \Bfootins \els...

\pagecontents ...p \@cclv \unvbox \@cclv \do@feet 
                                                 
\ifr@ggedbottom \kern -\di...

\pagebody ...\boxmaxdepth \maxdepth \pagecontents 
                                                  }
\edmac@output ...e \vbox {\makeheadline \pagebody 
                                                 
\makefootline }\fi }\advan...
<output> {\edmac@output 
                        }
...
l.30 \bye
         
I'm broken. Please show this to someone who can fix can fix
---------------------

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2005-04-03 20:26

Message:
Logged In: YES 
user_id=929

New try of a patch, see patch-292b.tgz.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 15:43

Message:
Logged In: YES 
user_id=421

Hartmut,
what's the status here? I remember you fixed this somehow at
EuroTeX.

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-02-14 20:42

Message:
Logged In: YES 
user_id=929

Now we know which side effects patch-274 has. When it's
reverted, the file is processed without error, but margin
kerning is missing (which was the original problem before
patch-274).

Following experiment is done _with_ patch-274.

The "this can't happen" error happens within the line_break
routine, which chokes on a margin_kern_node (which was
filtered out before patch-274).If one adds margin_kern_node
to the do_nothing list, like:

mark_node,ins_node,adjust_node,margin_kern_node: do_nothing;
othercases confusion("paragraph")

it apparently works ok, and margin kerning is fine also
(requires patch in hz.ch). But i need to understand how the
line_break routine works, whether a do_nothing is the right
thing to do...

Regards, Hartmut


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-02-14 15:30

Message:
Logged In: YES 
user_id=421

The submitter used the attached edmac.doc; the error is the
same.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=292&group_id=106
From noreply at sarovar.org  Sun Apr  3 21:00:17 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Sun Apr  3 21:05:15 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-292 ] protuding leads to "This can't
	happen (paragraph)."
Message-ID: <E1DIAKX-0003a4-00@sarovar.org>

Bugs item #292, was opened at 2005-02-14 15:22
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=292&group_id=106

Category: hz
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin Schr?der (oneiros)
Assigned to: Hartmut Henkel (hhenkel)
>Summary: protuding leads to "This can't happen (paragraph)."

Initial Comment:
The input
---------------------
\pdfoutput=1
\input edmac
\input protcode

\font\eightrm=ptmr8t
\setprotcode\eightrm
\pdfprotrudechars=2

\linenummargin{outer} %% left|right|inner|outer
\footparagraph{A}

\tracingall\tracingonline=0
\beginnumbering

\pstart 
\text{There}\Afootnote{Habent sua fata libelli. (Der
Satz wurde auf
Wunsch der Redaktion von ?Living Marxism? gestrichen;
siehe Korsch an
P.~Mattick am 3.10.1938.)}/ is a striking contrast
between the
impression produced in the minds of West"=European
revolutionaries by
those short pamphlets of Lenin and Trotsky which
appeared in poorly
translated and poorly printed editions during the final
stage and the
aftermath of the war, and the response called forth in
Europe and
U.S.A. by the belated appearance, in 1927, of the first
extra"=Russian
versions of Lenin's philosophical work of 1908, on
?Materialism and
Empirio"=Criticism?.
\pend

\endnumbering

\bye
---------------------
(all input files are in the attached archive) leads to 
---------------------
! This can't happen (paragraph).
<recently read> \par 
                     
\do@feet ...s \else \Afootstart {A}\Afootgroup {A}
                                                  \fi
\ifvoid \Bfootins \els...

\pagecontents ...p \@cclv \unvbox \@cclv \do@feet 
                                                 
\ifr@ggedbottom \kern -\di...

\pagebody ...\boxmaxdepth \maxdepth \pagecontents 
                                                  }
\edmac@output ...e \vbox {\makeheadline \pagebody 
                                                 
\makefootline }\fi }\advan...
<output> {\edmac@output 
                        }
...
l.30 \bye
         
I'm broken. Please show this to someone who can fix can fix
---------------------

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2005-04-03 21:00

Message:
Logged In: YES 
user_id=929

P.S. A nice test are the various ledmac test files in
directory texmf-dist/doc/latex/ledmac/, when you add the
microtype package (somebody must have provided such a
directory to me, thanks)...

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-04-03 20:26

Message:
Logged In: YES 
user_id=929

New try of a patch, see patch-292b.tgz.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-03-23 15:43

Message:
Logged In: YES 
user_id=421

Hartmut,
what's the status here? I remember you fixed this somehow at
EuroTeX.

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-02-14 20:42

Message:
Logged In: YES 
user_id=929

Now we know which side effects patch-274 has. When it's
reverted, the file is processed without error, but margin
kerning is missing (which was the original problem before
patch-274).

Following experiment is done _with_ patch-274.

The "this can't happen" error happens within the line_break
routine, which chokes on a margin_kern_node (which was
filtered out before patch-274).If one adds margin_kern_node
to the do_nothing list, like:

mark_node,ins_node,adjust_node,margin_kern_node: do_nothing;
othercases confusion("paragraph")

it apparently works ok, and margin kerning is fine also
(requires patch in hz.ch). But i need to understand how the
line_break routine works, whether a do_nothing is the right
thing to do...

Regards, Hartmut


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-02-14 15:30

Message:
Logged In: YES 
user_id=421

The submitter used the attached edmac.doc; the error is the
same.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=292&group_id=106
From hartmut_henkel at gmx.de  Sun Apr  3 21:20:31 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sun Apr  3 21:20:38 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-302 ] -jobname doesn't overcome texput
In-Reply-To: <E1D6BlH-0007uE-00@sarovar.org>
References: <E1D6BlH-0007uE-00@sarovar.org>
Message-ID: <Pine.LNX.4.61.0504032116530.10224@hahepc1.hahe>

Hi,

the bug report below seems to be a more general thing, affecting also e.
g. tex. Maybe it's something for Olaf?

Regards, Hartmut


On Tue, 1 Mar 2005 noreply@sarovar.org wrote:

> Bugs item #302, was opened at 2005-03-01 13:06
> You can respond by visiting:
> http://sarovar.org/tracker/?func=detail&atid=493&aid=302&group_id=106
>
> Category: None
> Group: v1.21a
> Status: Open
> Resolution: None
> Priority: 5
> Submitted By: John Denker (jsd)
> Assigned to: Nobody (None)
> Summary: -jobname doesn't overcome texput
>
> Initial Comment:
> Hi --
>
> Suppose I want to pipe commands into pdflatex:
>        echo '\typeout{---\jobname---}' | \
>          pdflatex --jobname foo
>
> You might expect that to type out ---foo---
> but instead it types out ---texput---
>
> I observe that --jobname works just fine for
> any filename I can think of, just not when the
> filename is absent entirely.
>
> I can offer two workarounds:
>   1) It's not documented, but nevertheless possible
>    to \def\jobname{foo}.
>
>   2) Of course it's possible to stuff the commands
>    into tmp.tex and then pdflatex --jobname foo tmp.tex
>
> Because these workarounds exist, I would rate this
> as a very low-priority bug.  But it had me surprised
> and confused for a while.  Given the overall high
> quality of the product, I thought I'd bring it to
> your attention.
>
>
> ----------------------------------------------------------------------
>
> You can respond by visiting:
> http://sarovar.org/tracker/?func=detail&atid=493&aid=302&group_id=106
From hartmut_henkel at gmx.de  Sun Apr  3 22:01:13 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sun Apr  3 22:01:16 2005
Subject: [NTG-pdftex] protrusion when?
Message-ID: <Pine.LNX.4.61.0504032139430.10412@hahepc1.hahe>

Currently a character is protruded if its rpcode/lpcode is set and it
can be reached from the margin by skipping skippable items. These items
are various kerns, glues, empty boxes etc. always with width 0pt.

Maybe this could be extended by adding up the horizontal movements of
non-zero kerns, non-stretchable glues etc. and when a protrudable
character is reached and the total movement to there would be 0pt, the
character would still be protruded. E. g. protrusion could happen after
a \kern1sp\kern-1sp pair or after \kern1sp\hskip-1sp. Would this make
sense? E. g. Robert told that (cancelling?) kerns are sometimes used as
markers...

Or, what if one would completely ignore/skip over all invisible items
(kerns, non-stretchable glues, even with width != 0pt) and would just
shift the first protrudable character? This would mean, that indented
characters would be also protruded relative to indentation.

Regards, Hartmut

From pragma at wxs.nl  Mon Apr  4 00:18:04 2005
From: pragma at wxs.nl (h h extern)
Date: Mon Apr  4 12:08:00 2005
Subject: [NTG-pdftex] pdfmapline
In-Reply-To: <Pine.LNX.4.61.0504032139430.10412@hahepc1.hahe>
References: <Pine.LNX.4.61.0504032139430.10412@hahepc1.hahe>
Message-ID: <42506B9C.2000205@wxs.nl>

Hi Hartmut

Is it true that \pdfmapline{} acts like \pdfmapfile{} ?

isn't the intended behaviour:

\pdfmapline{} -> ignore
\pdfmapfile{} -> resets all map file entries

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From kakuto at fsci.fuk.kindai.ac.jp  Mon Apr  4 16:28:10 2005
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Mon Apr  4 16:28:19 2005
Subject: [NTG-pdftex] -jobname doesn't overcome texput
Message-ID: <200504041428.j34ESBWl016044@jupiter.fsci.fuk.kindai.ac.jp>

>the bug report below seems to be a more general thing, affecting also e.
>g. tex. Maybe it's something for Olaf?

--- tex.ch.orig	Thu Dec 30 00:07:46 2004
+++ tex.ch	Mon Apr 04 23:15:59 2005
@@ -2242,8 +2242,10 @@
 @z
 
 @x [29.534] l.10289 - Filename change for the recorder.
+if job_name=0 then job_name:="texput";
 @.texput@>
 @y
+if job_name=0 then job_name:=get_job_name;
 @.texput@>
 pack_job_name(".fls");
 recorder_change_filename(stringcast(name_of_file+1));


--- texmfmp.c.orig	Tue Dec 21 20:33:56 2004
+++ texmfmp.c	Mon Apr 04 23:17:20 2005
@@ -1599,6 +1599,7 @@
 getjobname()
 {
     strnumber ret = curname;
+    if (ret == 0) ret = maketexstring("texput");
     if (job_name != NULL)
       ret = maketexstring(job_name);
     return ret;


Best regards,
Akira
From kakuto at fsci.fuk.kindai.ac.jp  Mon Apr  4 17:27:26 2005
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Mon Apr  4 17:27:33 2005
Subject: [NTG-pdftex] -jobname doesn't overcome texput
In-Reply-To: Your message of "Mon, 04 Apr 2005 23:28:10 +0900"
References: <200504041428.j34ESBWl016044@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <200504041527.j34FRRp8016237@jupiter.fsci.fuk.kindai.ac.jp>

> --- texmfmp.c.orig	Tue Dec 21 20:33:56 2004
> +++ texmfmp.c	Mon Apr 04 23:17:20 2005
> @@ -1599,6 +1599,7 @@
>  getjobname()
>  {
>      strnumber ret = curname;
> +    if (ret == 0) ret = maketexstring("texput");
>      if (job_name != NULL)
>        ret = maketexstring(job_name);
>      return ret;

--- texmfmp.c.orig	Tue Dec 21 20:33:56 2004
+++ texmfmp.c	Tue Apr 05 00:09:40 2005
@@ -1595,10 +1595,19 @@
   return maketexstring(fullnameoffile);
 }
 
+#if defined (MF)
+#define DEFAULTJOBNAME "mfput"
+#elif defined (MP)
+#define DEFAULTJOBNAME "mpout"
+#else
+#define DEFAULTJOBNAME "texput"
+#endif
+
 strnumber
 getjobname()
 {
     strnumber ret = curname;
+    if (ret == 0) ret = maketexstring(DEFAULTJOBNAME);
     if (job_name != NULL)
       ret = maketexstring(job_name);
     return ret;




changes like in tex.ch are also necessary in
mf.ch, mp.ch, com16bit.ch and com16bit-rc2.ch (for aleph).

Best regards,
Akira
From hartmut_henkel at gmx.de  Mon Apr  4 21:13:09 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Mon Apr  4 21:13:14 2005
Subject: [NTG-pdftex] pdfmapline
In-Reply-To: <42506B9C.2000205@wxs.nl>
References: <Pine.LNX.4.61.0504032139430.10412@hahepc1.hahe>
	<42506B9C.2000205@wxs.nl>
Message-ID: <Pine.LNX.4.61.0504042100020.8707@hahepc1.hahe>

Hi Hans,

On Mon, 4 Apr 2005, h h extern wrote:

> Is it true that \pdfmapline{} acts like \pdfmapfile{} ?

yes. The timing of both commands is the same, and the argument string
for \pdfmapline is handled nearly like a filename, only that it later is
scanned as if coming from a nameless mapfile with a single mapline only.
Both commands come also with similarly functioning qualifiers +-=. I
thought that would help for consistency.

> isn't the intended behaviour:
>
> \pdfmapline{} -> ignore
> \pdfmapfile{} -> resets all map file entries

Not for me, maybe i have misunderstood you. Sure it's easy to change
that an empty \pdfmapline{} would just be ignored. You prefer this?

Regards, Hartmut

(now slowly trying \pdffontenc & friends, stay tuned :-)
From pragma at wxs.nl  Mon Apr  4 21:45:11 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Apr  4 21:45:12 2005
Subject: [NTG-pdftex] pdfmapline
In-Reply-To: <Pine.LNX.4.61.0504042100020.8707@hahepc1.hahe>
References: <Pine.LNX.4.61.0504032139430.10412@hahepc1.hahe>
	<42506B9C.2000205@wxs.nl>
	<Pine.LNX.4.61.0504042100020.8707@hahepc1.hahe>
Message-ID: <42519947.3040509@wxs.nl>

Hartmut Henkel wrote:
> Hi Hans,
> 
> On Mon, 4 Apr 2005, h h extern wrote:
> 
> 
>>Is it true that \pdfmapline{} acts like \pdfmapfile{} ?
> 
> 
> yes. The timing of both commands is the same, and the argument string
> for \pdfmapline is handled nearly like a filename, only that it later is
> scanned as if coming from a nameless mapfile with a single mapline only.
> Both commands come also with similarly functioning qualifiers +-=. I
> thought that would help for consistency.
> 
> 
>>isn't the intended behaviour:
>>
>>\pdfmapline{} -> ignore
>>\pdfmapfile{} -> resets all map file entries
> 
> 
> Not for me, maybe i have misunderstood you. Sure it's easy to change
> that an empty \pdfmapline{} would just be ignored. You prefer this?

yes, although it does not really matter when it's known behaviour; it's just 
that i ran into a situation where the mapline was empty and was puzzled about errors

[\pdfresetmaplist would be even better combined with ignored empty cases, but 
it's too late for that now]

> Regards, Hartmut
> 
> (now slowly trying \pdffontenc & friends, stay tuned :-)

good!

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From hanthethanh at myrealbox.com  Thu Apr  7 03:30:26 2005
From: hanthethanh at myrealbox.com (The Thanh Han)
Date: Thu Apr  7 05:10:21 2005
Subject: [NTG-pdftex] I am back
In-Reply-To: <Pine.LNX.4.61.0504032139430.10412@hahepc1.hahe>
References: <Pine.LNX.4.61.0504032139430.10412@hahepc1.hahe>
Message-ID: <20050407013026.GD8693@monty.localnet>

Hi pdftex developers,

sorry for being quiet for a long time -- I was having too much fun and
forgot about work :). Just got access to Internet using my linux box
from yesterday and have downloaded all mails from ntg-pdftex ml. Will
take some time before I read all of them :)

Regards,
Thanh
From hartmut_henkel at gmx.de  Fri Apr  8 21:05:10 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Fri Apr  8 21:05:15 2005
Subject: [NTG-pdftex] I am back
In-Reply-To: <20050407013026.GD8693@monty.localnet>
References: <Pine.LNX.4.61.0504032139430.10412@hahepc1.hahe>
	<20050407013026.GD8693@monty.localnet>
Message-ID: <Pine.LNX.4.61.0504082100510.5684@hahepc1.hahe>

On Thu, 7 Apr 2005, The Thanh Han wrote:

> Hi pdftex developers,
>
> sorry for being quiet for a long time -- I was having too much fun and
> forgot about work :).

...                                  ...
Herr und Meister! h?r mich rufen! -  Lord and master, hear me crying! -
Ach, da kommt der Meister!           Ah, he comes excited.
Herr, die Not ist gro?!              Sir, my need is sore.
Die ich rief, die Geister            Spirits that I've cited
werd ich nun nicht los.              My commands ignore.

Regards, Hartmut :-)
From reinhard.kotucha at web.de  Fri Apr  8 22:00:24 2005
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri Apr  8 22:00:30 2005
Subject: [NTG-pdftex] I am back
In-Reply-To: <Pine.LNX.4.61.0504082100510.5684@hahepc1.hahe>
References: <Pine.LNX.4.61.0504032139430.10412@hahepc1.hahe>
	<20050407013026.GD8693@monty.localnet>
	<Pine.LNX.4.61.0504082100510.5684@hahepc1.hahe>
Message-ID: <16982.58072.550106.834365@zarniwoop.ms25.local>

>>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel@gmx.de> writes:

> Herr und Meister! h?r mich rufen! -  Lord and master, hear me crying! -
> Ach, da kommt der Meister!           Ah, he comes excited.
> Herr, die Not ist gro?!              Sir, my need is sore.
> Die ich rief, die Geister            Spirits that I've cited
> werd ich nun nicht los.              My commands ignore.

Thanh, this is an extract of Goethe's ballade "Der Zauberlehrling"
(The Sorcerer's Apprentice) written in 1797. 

   http://en.wikipedia.org/wiki/Der_Zauberlehrling

Johann Wolfgang von Goethe (1749-1832) was by far the most famous
German poet.

   http://en.wikipedia.org/wiki/Johann_Wolfgang_von_Goethe

And during his trip to the Harz mountains (1783-1785) he visited the
same hotel as you did during the DANTE-2000 at Clausthal.

BTW., he complained about the bad weather, and you certainly know
why.  Do you remember?

Cheers,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha@web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From hanthethanh at myrealbox.com  Sat Apr  9 06:25:59 2005
From: hanthethanh at myrealbox.com (The Thanh Han)
Date: Sun Apr 10 12:03:43 2005
Subject: [NTG-pdftex] I am back
In-Reply-To: <16982.58072.550106.834365@zarniwoop.ms25.local>
References: <Pine.LNX.4.61.0504032139430.10412@hahepc1.hahe>
	<20050407013026.GD8693@monty.localnet>
	<Pine.LNX.4.61.0504082100510.5684@hahepc1.hahe>
	<16982.58072.550106.834365@zarniwoop.ms25.local>
Message-ID: <20050409042559.GA2597@monty.localnet>

On Fri, Apr 08, 2005 at 10:00:24PM +0200, Reinhard Kotucha wrote:
> >>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel@gmx.de> writes:
> 
> > Herr und Meister! h?r mich rufen! -  Lord and master, hear me crying! -
> > Ach, da kommt der Meister!           Ah, he comes excited.
> > Herr, die Not ist gro?!              Sir, my need is sore.
> > Die ich rief, die Geister            Spirits that I've cited
> > werd ich nun nicht los.              My commands ignore.

:)

> Thanh, this is an extract of Goethe's ballade "Der Zauberlehrling"
> (The Sorcerer's Apprentice) written in 1797. 
> 
>    http://en.wikipedia.org/wiki/Der_Zauberlehrling
> 
> Johann Wolfgang von Goethe (1749-1832) was by far the most famous
> German poet.
> 
>    http://en.wikipedia.org/wiki/Johann_Wolfgang_von_Goethe
> 
> And during his trip to the Harz mountains (1783-1785) he visited the
> same hotel as you did during the DANTE-2000 at Clausthal.
> 
> BTW., he complained about the bad weather, and you certainly know
> why.  Do you remember?

certainly :)

Cheers,
Thanh
From hanthethanh at myrealbox.com  Mon Apr 11 09:19:56 2005
From: hanthethanh at myrealbox.com (The Thanh Han)
Date: Mon Apr 11 11:05:28 2005
Subject: [NTG-pdftex] margin kerning and unhboxing
Message-ID: <20050411071956.GH2979@monty.localnet>

Hi,

there were some problems to make margin kerning work with
unhbox/unhcopy. After some discussions with Harmut we have come to a
solution: we shall drop margin kerns while unboxing. People who wish to
use margin kerning with unhboxing are out of luck. Sorry, but we think
it is too much work and too risky to make it work.

We also introduced a workaround: now we have 2 new primitives \leftmarginkern
and \righmarginkern, which allows access to margin kerns of a hbox.
Usage (tested):

,--------
| \newbox\testline
| 
| ...
| 
| \dimen0=\leftmarginkern \testline pt                                                       
| \dimen1=\rightmarginkern \testline pt                                                       
| \line{\kern\dimen0\unhcopy\testline\kern\dimen1}                                           
`--------

this feature will be available in the next bug-fix release (should come out
soon).

Thanh
From hanthethanh at myrealbox.com  Mon Apr 11 11:08:10 2005
From: hanthethanh at myrealbox.com (The Thanh Han)
Date: Mon Apr 11 11:14:00 2005
Subject: [NTG-pdftex] bug 302
Message-ID: <20050411090810.GA2883@monty.localnet>

Hi,

as bug 302 doesn't seem to be pdftex specific, should the patch by Akira
go to web2c?

Regards,
Thanh

From kakuto at fsci.fuk.kindai.ac.jp  Tue Apr 12 14:07:45 2005
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Tue Apr 12 14:07:55 2005
Subject: [NTG-pdftex] -jobname doesn't overcome texput
In-Reply-To: Your message of "Tue, 05 Apr 2005 00:27:26 +0900"
References: <200504041527.j34FRRp8016237@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <200504121207.j3CC7kCe007107@jupiter.fsci.fuk.kindai.ac.jp>

> > --- texmfmp.c.orig	Tue Dec 21 20:33:56 2004
> > +++ texmfmp.c	Mon Apr 04 23:17:20 2005
> > @@ -1599,6 +1599,7 @@
> >  getjobname()
> >  {
> >      strnumber ret = curname;
> > +    if (ret == 0) ret = maketexstring("texput");
> >      if (job_name != NULL)
> >        ret = maketexstring(job_name);
> >      return ret;
> 
> --- texmfmp.c.orig	Tue Dec 21 20:33:56 2004
> +++ texmfmp.c	Tue Apr 05 00:09:40 2005
> @@ -1595,10 +1595,19 @@
>    return maketexstring(fullnameoffile);
>  }
>  
> +#if defined (MF)
> +#define DEFAULTJOBNAME "mfput"
> +#elif defined (MP)
> +#define DEFAULTJOBNAME "mpout"
> +#else
> +#define DEFAULTJOBNAME "texput"
> +#endif
> +
>  strnumber
>  getjobname()
>  {
>      strnumber ret = curname;
> +    if (ret == 0) ret = maketexstring(DEFAULTJOBNAME);
>      if (job_name != NULL)
>        ret = maketexstring(job_name);
>      return ret;

mpost seems to require somewhat different texmfmp.c:

--- texmfmp.c.orig	Tue Dec 21 20:33:56 2004
+++ texmfmp.c	Tue Apr 12 21:02:22 2005
@@ -1595,10 +1595,22 @@
   return maketexstring(fullnameoffile);
 }
 
+#if defined (MF)
+#define DEFAULTJOBNAME "mfput"
+#elif defined (MP)
+#define DEFAULTJOBNAME "mpout"
+#else
+#define DEFAULTJOBNAME "texput"
+#endif
+
 strnumber
 getjobname()
 {
     strnumber ret = curname;
+    if (ret == 0) ret = maketexstring(DEFAULTJOBNAME);
+#if defined (MP)
+    if (jobname == 0) ret = maketexstring(DEFAULTJOBNAME);
+#endif
     if (job_name != NULL)
       ret = maketexstring(job_name);
     return ret;


Best regards,
Akira
From martin at oneiros.de  Tue Apr 12 14:19:28 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Tue Apr 12 14:19:31 2005
Subject: [NTG-pdftex] bug 302
In-Reply-To: <20050411090810.GA2883@monty.localnet>
References: <20050411090810.GA2883@monty.localnet>
Message-ID: <20050412121928.GK14854@blau.artcom-gmbh.de>

On 2005-04-11 16:08:10 +0700, The Thanh Han wrote:
> as bug 302 doesn't seem to be pdftex specific, should the patch by Akira
> go to web2c?

Definitely. Olaf, are you listening?

Best regards
        Martin
-- 
                    http://www.tm.oneiros.de
From noreply at sarovar.org  Tue Apr 12 14:11:50 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Tue Apr 12 14:20:10 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-302 ] -jobname doesn't overcome texput
Message-ID: <E1DLKFC-00069b-00@sarovar.org>

Bugs item #302, was opened at 2005-03-01 19:06
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=302&group_id=106

>Category: web2c
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: John Denker (jsd)
>Assigned to: Olaf Weber (infovore)
Summary: -jobname doesn't overcome texput

Initial Comment:
Hi --

Suppose I want to pipe commands into pdflatex:
       echo '\typeout{---\jobname---}' | \
         pdflatex --jobname foo

You might expect that to type out ---foo---
but instead it types out ---texput---

I observe that --jobname works just fine for
any filename I can think of, just not when the
filename is absent entirely.

I can offer two workarounds:
  1) It's not documented, but nevertheless possible
   to \def\jobname{foo}.

  2) Of course it's possible to stuff the commands
   into tmp.tex and then pdflatex --jobname foo tmp.tex

Because these workarounds exist, I would rate this
as a very low-priority bug.  But it had me surprised
and confused for a while.  Given the overall high 
quality of the product, I thought I'd bring it to 
your attention.


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2005-04-12 14:11

Message:
Logged In: YES 
user_id=421

Patches provided by Akira on NTG-pdftex

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=302&group_id=106
From noreply at sarovar.org  Tue Apr 12 14:38:21 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Tue Apr 12 14:43:24 2005
Subject: [NTG-pdftex] [ pdftex-Feature Requests-254 ] fontexpansion,
	dvi output
Message-ID: <E1DLKer-000767-00@sarovar.org>

Feature Requests item #254, was opened at 2004-12-22 22:06
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=254&group_id=106

Category: None
Group: None
Status: Open
>Resolution: Rejected
Priority: 5
Submitted By: Nobody (None)
Assigned to: Nobody (None)
Summary: fontexpansion, dvi output

Initial Comment:
Hello developers,

I'd like to use the autoexpand feature with dvips. Are
there any plans to make pdftex write the autoexpanded
tfm files to the current directory, perhaps even
generating a map file? 

Cheers,
Michael

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2005-01-14 03:19

Message:
Logged In: YES 
user_id=710

It is likely that this will never be implemented. The better
way to do that is to change the script \<TEX> (\<PDFTEX>)
calls to create missing \<TFM> during run-time (on
\<WEB2C>-based systems this is called |mktextfm|) to create
all the required stuff on demand. 

Thanh

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=254&group_id=106
From noreply at sarovar.org  Tue Apr 12 14:38:52 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Tue Apr 12 14:43:31 2005
Subject: [NTG-pdftex] [ pdftex-Feature Requests-89 ] Handle missing pages in
	included pdfs better
Message-ID: <E1DLKfM-00076L-00@sarovar.org>

Feature Requests item #89, was opened at 2004-07-08 14:38
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=89&group_id=106

Category: None
Group: v1.21
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin Schr?der (oneiros)
>Assigned to: Martin Schr?der (oneiros)
Summary: Handle missing pages in included pdfs better

Initial Comment:
Currently, when one tries to include page 10 of a 9
page document, pdftex quits.

Proposed change:

Behaviour of pdfTeX for pdf image inclusion:

UNKNOWN := -1
Initialization: \pdflastximagepages := UNKNOWN

Continue := Continue with empty xform object with
dimension 1bp x 1bp.
// 1bp because it avoids zero and possible problems and
// the output is small (/BBox [0 0 1 1])

if PDFFileExists
    if PageNumber < 1
        \pdflastximagepages = UNKNOWN
        Warning "Invalid page number"
        Continue
    elsif PageNumber > \pdflastximagepages
        \pdflastximagepages is set
        Warning "Page number to large (out of range)
        Continue
    else
        \pdflastximagepages is set
        image is included
    fi
else
    Warning "PDF file does not exist"
    \pdflastximagepages = UNKNOWN
    Continue
fi

Failure/Success checking:

if [page] < 1
    * Page number too small
elsif \pdflastximagepages = -1
    * PDF file does not exist
elsif [page] > \pdflastximagepages
    * Page number too large
else
    * Success
fi

or with optimization for success:

if [page] < 1
    * Page number too small
elsif [page] > \pdflastximagepages
    if \pdflastximagepages = -1
        * PDF file does not exist
    else
        * Page number too large
    fi
else
    * Success
fi

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=89&group_id=106
From olaf at infovore.xs4all.nl  Tue Apr 12 16:25:00 2005
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Tue Apr 12 16:25:03 2005
Subject: [NTG-pdftex] bug 302
In-Reply-To: <20050412121928.GK14854@blau.artcom-gmbh.de> (Martin
	=?iso-8859-1?q?Schr=F6der's?= message of "Tue,
	12 Apr 2005 14:19:28 +0200")
References: <20050411090810.GA2883@monty.localnet>
	<20050412121928.GK14854@blau.artcom-gmbh.de>
Message-ID: <8764ysax8j.fsf@infovore.xs4all.nl>

Martin Schr?der writes:

> On 2005-04-11 16:08:10 +0700, The Thanh Han wrote:
>> as bug 302 doesn't seem to be pdftex specific, should the patch by Akira
>> go to web2c?

> Definitely. Olaf, are you listening?

I'll look at this.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From noreply at sarovar.org  Tue Apr 12 18:22:51 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Tue Apr 12 18:31:00 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-302 ] -jobname doesn't overcome texput
Message-ID: <E1DLOA7-0005OP-00@sarovar.org>

Bugs item #302, was opened at 2005-03-01 19:06
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=302&group_id=106

Category: web2c
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: John Denker (jsd)
Assigned to: Olaf Weber (infovore)
Summary: -jobname doesn't overcome texput

Initial Comment:
Hi --

Suppose I want to pipe commands into pdflatex:
       echo '\typeout{---\jobname---}' | \
         pdflatex --jobname foo

You might expect that to type out ---foo---
but instead it types out ---texput---

I observe that --jobname works just fine for
any filename I can think of, just not when the
filename is absent entirely.

I can offer two workarounds:
  1) It's not documented, but nevertheless possible
   to \def\jobname{foo}.

  2) Of course it's possible to stuff the commands
   into tmp.tex and then pdflatex --jobname foo tmp.tex

Because these workarounds exist, I would rate this
as a very low-priority bug.  But it had me surprised
and confused for a while.  Given the overall high 
quality of the product, I thought I'd bring it to 
your attention.


----------------------------------------------------------------------

>Comment By: Olaf Weber (infovore)
Date: 2005-04-12 18:22

Message:
Logged In: YES 
user_id=1847

This is a general problem with the implementation of the 
--jobname 
switch in web2c. 
 
My proposed diff is a variant on Akira's work.  It touches 
more files, 
but gives IMHO a cleaner interface to get_job_name() and 
less need for 
additional #defines.  Unless there turns out to be 
something wrong 
with this, it will be merged in the web2c sources. 
 
 lib/texmfmp.c       |    6 ++++-- 
 mf.ch               |    6 +++++- 
 mp.ch               |    4 +++- 
 tex.ch              |    6 ++++-- 
 web2c/coerce.h      |    2 +- 
 web2c/texmf.defines |    2 +- 
 6 files changed, 18 insertions(+), 8 deletions(-) 
 
Index: mf.ch 
=================================================================== 
RCS file: /usr/local/cvsroot/texk/texk/web2c/mf.ch,v 
retrieving revision 1.40 
diff -u -d -r1.40 mf.ch 
--- mf.ch	28 Dec 2004 18:24:38 -0000	1.40 
+++ mf.ch	12 Apr 2005 16:07:11 -0000 
@@ -1717,8 +1717,12 @@ 
 @z 
  
 @x [38.788] Set correct filename for recorder. 
+if job_name=0 then job_name:="mfput"; 
+@.mfput@> 
 pack_job_name(".log"); 
 @y 
+if job_name=0 then job_name:=get_job_name("mfput"); 
+@.mfput@> 
 pack_job_name(".fls"); 
 recorder_change_filename(stringcast(name_of_file+1)); 
 pack_job_name(".log"); 
@@ -1778,7 +1782,7 @@ 
 @x [38.793] l.15938 - The job name may have been given on 
the command line. 
   begin job_name:=cur_name; open_log_file; 
 @y 
-  begin job_name:=get_job_name; open_log_file; 
+  begin job_name:=get_job_name(cur_name); open_log_file; 
 @z 
  
 @x [38.793] Can't return name to string pool because of 
editor option? 
Index: mp.ch 
=================================================================== 
RCS file: /usr/local/cvsroot/texk/texk/web2c/mp.ch,v 
retrieving revision 1.48 
diff -u -d -r1.48 mp.ch 
--- mp.ch	28 Dec 2004 18:23:47 -0000	1.48 
+++ mp.ch	12 Apr 2005 16:06:53 -0000 
@@ -1403,8 +1403,10 @@ 
 @z 
  
 @x [35.765] Change name of recorder file. 
+if job_name=0 then job_name:="mpout"; 
 pack_job_name(".log"); 
 @y 
+if job_name=0 then job_name:=get_job_name("mpout"); 
 pack_job_name(".fls"); 
 recorder_change_filename(stringcast(name_of_file+1)); 
 pack_job_name(".log"); 
@@ -1489,7 +1491,7 @@ 
       incr(j); 
     stop_at_space:=true; 
     end_name; 
-    job_name:=get_job_name; 
+    job_name:=get_job_name(cur_name); 
     str_ref[job_name] := max_str_ref; 
 @z 
  
Index: tex.ch 
=================================================================== 
RCS file: /usr/local/cvsroot/texk/texk/web2c/tex.ch,v 
retrieving revision 1.89 
diff -u -d -r1.89 tex.ch 
--- tex.ch	29 Dec 2004 11:08:23 -0000	1.89 
+++ tex.ch	12 Apr 2005 16:07:26 -0000 
@@ -2241,9 +2241,11 @@ 
 @!months:^char; 
 @z 
  
-@x [29.534] l.10289 - Filename change for the recorder. 
+@x [29.534] l.10300 - Filename change for the recorder. 
+if job_name=0 then job_name:="texput"; 
 @.texput@> 
 @y 
+if job_name=0 then job_name:=get_job_name("texput"); 
 @.texput@> 
 pack_job_name(".fls"); 
 recorder_change_filename(stringcast(name_of_file+1)); 
@@ -2369,7 +2371,7 @@ 
 @x [29.537] l.10352 - start_input: was job_name given on 
the command line? 
   begin job_name:=cur_name; open_log_file; 
 @y 
-  begin job_name:=get_job_name; open_log_file; 
+  begin job_name:=get_job_name(cur_name); open_log_file; 
 @z 
  
 @x [29.537] l.10356 -  
Index: lib/texmfmp.c 
=================================================================== 
RCS 
file: /usr/local/cvsroot/texk/texk/web2c/lib/texmfmp.c,v 
retrieving revision 1.108 
diff -u -d -r1.108 texmfmp.c 
--- lib/texmfmp.c	12 Apr 2005 15:39:14 -0000	
1.108 
+++ lib/texmfmp.c	12 Apr 2005 15:55:17 -0000 
@@ -1591,10 +1591,12 @@ 
   return maketexstring(fullnameoffile); 
 } 
  
+/* Get the job name to be used, which may have been set 
from the 
+   command line. */ 
 strnumber 
-getjobname() 
+getjobname(strnumber name) 
 { 
-    strnumber ret = curname; 
+    strnumber ret = name; 
     if (job_name != NULL) 
       ret = maketexstring(job_name); 
     return ret; 
Index: web2c/coerce.h 
=================================================================== 
RCS 
file: /usr/local/cvsroot/texk/texk/web2c/web2c/coerce.h,v 
retrieving revision 1.5 
diff -u -d -r1.5 coerce.h 
--- web2c/coerce.h	26 Feb 2004 17:43:14 -0000	
1.5 
+++ web2c/coerce.h	12 Apr 2005 15:55:31 -0000 
@@ -24,7 +24,7 @@ 
 /* And we use the opportunity to declare a few functions 
that could not be 
    declared in texmfmp.h, because they need typedefs not 
yet known at that 
    point.  */ 
-extern strnumber getjobname P1H(void); 
+extern strnumber getjobname P1H(strnumber); 
  
 #ifdef MP 
 /* MP defined poolASCIIcode instead of packedASCIIcode, 
sigh. */ 
Index: web2c/texmf.defines 
=================================================================== 
RCS 
file: /usr/local/cvsroot/texk/texk/web2c/web2c/texmf.defines,v 
retrieving revision 1.17 
diff -u -d -r1.17 texmf.defines 
--- web2c/texmf.defines	14 Jul 2004 16:17:48 -0000	
1.17 
+++ web2c/texmf.defines	12 Apr 2005 15:58:51 -0000 
@@ -22,7 +22,7 @@ 
 @define function callmakempx (); 
 @define function floorscaled (); 
 @define function floorunscaled (); 
-@define function getjobname; 
+@define function getjobname (); 
 @define function getrandomseed; 
 @define function initscreen; 
 @define function inputln (); 
 

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-04-12 14:11

Message:
Logged In: YES 
user_id=421

Patches provided by Akira on NTG-pdftex

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=302&group_id=106
From olaf at infovore.xs4all.nl  Tue Apr 12 18:38:05 2005
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Tue Apr 12 18:38:09 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-302 ] -jobname doesn't overcome texput
In-Reply-To: <E1DLOA7-0005OP-00@sarovar.org> (noreply@sarovar.org's message
	of "Tue, 12 Apr 2005 21:52:51 +0530")
References: <E1DLOA7-0005OP-00@sarovar.org>
Message-ID: <87k6n89cia.fsf@infovore.xs4all.nl>

noreply  writes:

>  @x [38.793] l.15938 - The job name may have been given on 
> the command line. 

(etc)

I see the bug system did line wraps, so the diff will be good only for
documentation purposes.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From martin at oneiros.de  Tue Apr 12 22:21:39 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Tue Apr 12 23:02:23 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-302 ] -jobname doesn't overcome texput
In-Reply-To: <87k6n89cia.fsf@infovore.xs4all.nl>
References: <E1DLOA7-0005OP-00@sarovar.org> <87k6n89cia.fsf@infovore.xs4all.nl>
Message-ID: <20050412202139.GA11994@lucien.kn-bremen.de>

On 2005-04-12 18:38:05 +0200, Olaf Weber wrote:
> I see the bug system did line wraps, so the diff will be good only for
> documentation purposes.

You must add patches as attachement to the bugs and add some
comment, because new attachements don't generate a mail).

Best regards
    Martin
-- 
                    http://www.tm.oneiros.de
From hanthethanh at myrealbox.com  Thu Apr 14 10:10:40 2005
From: hanthethanh at myrealbox.com (The Thanh Han)
Date: Thu Apr 14 11:46:13 2005
Subject: [NTG-pdftex] pdftex-1.21b snapshot
Message-ID: <20050414081040.GC2571@monty.localnet>

Hi,

I have uploaded a snapshot of pdftex to pdftex.sarovar.org/src
djgpp is also available (pdfetex binaries only).

This is a bug-fix release that has all pending patches by Hartmut. The
png patch by Taco has also been integrated. A quick summary from NEWS
(Martin will make them more meaningful when an official version is
released):

 
,--------
| - patch for PNG support by Taco & Hartmut (259)
| 
| - ignore marginal kerns while unhboxing (292)
| 
| - added \leftmarginkern & \rightmarginkern (292)
| 
| - removed \pdfmovechar (294)
| 
| - added \pdftracingfonts (304)
| 
| - make \pdfxform work with box > 255 (310)
| 
| - added \pdfxformname (requested by Pawel)
| 
| - fixed problem with fonts on solaris (315)
| 
`--------

There are still 2 pending problems:

1) the problem with truetype fonts when a unicode is mapped to 2 or
more glyphs. I let pdftex fail in such a cas but still don't know what
would be the right thing to do.

2) the problem with dangling object: I changed a few things to fix it
but pdf inclusion may be broken now; please do some testing if you can.
With the test files by Hartmut at sarovar: now there is a dangling
object in yy2.pdf, which is expected if the font used in the included
pdf is not used in the main document. Getting rid of this doesn't seem
easy.

Thanh
From hanthethanh at myrealbox.com  Thu Apr 14 12:11:35 2005
From: hanthethanh at myrealbox.com (The Thanh Han)
Date: Thu Apr 14 12:12:38 2005
Subject: [NTG-pdftex] pdftex-1.21b snapshot
In-Reply-To: <20050414081040.GC2571@monty.localnet>
References: <20050414081040.GC2571@monty.localnet>
Message-ID: <20050414101135.GC2946@monty.localnet>

sorry but after upgrading my debian box I am no longer able to upload
anything to sarovar. Trying hard to get it work ...

Thanh

On Thu, Apr 14, 2005 at 03:10:40PM +0700, The Thanh Han wrote:
> Hi,
> 
> I have uploaded a snapshot of pdftex to pdftex.sarovar.org/src
> djgpp is also available (pdfetex binaries only).
> 
> This is a bug-fix release that has all pending patches by Hartmut. The
> png patch by Taco has also been integrated. A quick summary from NEWS
> (Martin will make them more meaningful when an official version is
> released):
> 
>  
> ,--------
> | - patch for PNG support by Taco & Hartmut (259)
> | 
> | - ignore marginal kerns while unhboxing (292)
> | 
> | - added \leftmarginkern & \rightmarginkern (292)
> | 
> | - removed \pdfmovechar (294)
> | 
> | - added \pdftracingfonts (304)
> | 
> | - make \pdfxform work with box > 255 (310)
> | 
> | - added \pdfxformname (requested by Pawel)
> | 
> | - fixed problem with fonts on solaris (315)
> | 
> `--------
> 
> There are still 2 pending problems:
> 
> 1) the problem with truetype fonts when a unicode is mapped to 2 or
> more glyphs. I let pdftex fail in such a cas but still don't know what
> would be the right thing to do.
> 
> 2) the problem with dangling object: I changed a few things to fix it
> but pdf inclusion may be broken now; please do some testing if you can.
> With the test files by Hartmut at sarovar: now there is a dangling
> object in yy2.pdf, which is expected if the font used in the included
> pdf is not used in the main document. Getting rid of this doesn't seem
> easy.
> 
> Thanh
> _______________________________________________
> ntg-pdftex mailing list
> ntg-pdftex@ntg.nl
> http://www.ntg.nl/mailman/listinfo/ntg-pdftex
> 
From hanthethanh at myrealbox.com  Fri Apr 15 03:28:07 2005
From: hanthethanh at myrealbox.com (The Thanh Han)
Date: Fri Apr 15 03:28:45 2005
Subject: [NTG-pdftex] pdftex-1.21b snapshot
In-Reply-To: <20050414101135.GC2946@monty.localnet>
References: <20050414081040.GC2571@monty.localnet>
	<20050414101135.GC2946@monty.localnet>
Message-ID: <20050415012807.GA2857@monty.localnet>

Hi,

it's me again. Sorry for the false alarm, the snapshot has been
uploaded. Today I will upload another snapshot with the fix for
problem with truetype font (just got an answer from Werner Lemberg
about what should be the correct behaviour).

If someone can do some testing with pdf inclusion, it would be much
helpful.

Thanh

On Thu, Apr 14, 2005 at 05:11:35PM +0700, The Thanh Han wrote:
> sorry but after upgrading my debian box I am no longer able to upload
> anything to sarovar. Trying hard to get it work ...
From hanthethanh at myrealbox.com  Fri Apr 15 08:59:28 2005
From: hanthethanh at myrealbox.com (The Thanh Han)
Date: Fri Apr 15 09:02:51 2005
Subject: [NTG-pdftex] pdftex-1.21b snapshot
In-Reply-To: <20050415012807.GA2857@monty.localnet>
References: <20050414081040.GC2571@monty.localnet>
	<20050414101135.GC2946@monty.localnet>
	<20050415012807.GA2857@monty.localnet>
Message-ID: <20050415065928.GA2771@monty.localnet>

Hi,

I have uploaded a new snapshot. Changes:

- add "pt" to the result of \leftmarginkern, \rightmarginkern and
  \pdffontsize

- change pdftex to generate a warning instead of failing when a ttf
  font has multiple glyphs mapped to the same unicode

Thanh

On Fri, Apr 15, 2005 at 08:28:07AM +0700, The Thanh Han wrote:
> Hi,
> 
> it's me again. Sorry for the false alarm, the snapshot has been
> uploaded. Today I will upload another snapshot with the fix for
> problem with truetype font (just got an answer from Werner Lemberg
> about what should be the correct behaviour).
> 
> If someone can do some testing with pdf inclusion, it would be much
> helpful.
> 
> Thanh
> 
> On Thu, Apr 14, 2005 at 05:11:35PM +0700, The Thanh Han wrote:
> > sorry but after upgrading my debian box I am no longer able to upload
> > anything to sarovar. Trying hard to get it work ...
From pragma at wxs.nl  Fri Apr 15 11:20:13 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Fri Apr 15 11:20:09 2005
Subject: [NTG-pdftex] pdftex-1.21b snapshot
In-Reply-To: <20050415065928.GA2771@monty.localnet>
References: <20050414081040.GC2571@monty.localnet>
	<20050414101135.GC2946@monty.localnet>
	<20050415012807.GA2857@monty.localnet>
	<20050415065928.GA2771@monty.localnet>
Message-ID: <425F874D.5020402@wxs.nl>

The Thanh Han wrote:
> Hi,
> 
> I have uploaded a new snapshot. Changes:
> 
> - add "pt" to the result of \leftmarginkern, \rightmarginkern and
>   \pdffontsize
> 
> - change pdftex to generate a warning instead of failing when a ttf
>   font has multiple glyphs mapped to the same unicode

does pdftex already silently recover when a pdf image is missing or faulty?

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From hanthethanh at myrealbox.com  Fri Apr 15 11:49:51 2005
From: hanthethanh at myrealbox.com (The Thanh Han)
Date: Fri Apr 15 11:53:12 2005
Subject: [NTG-pdftex] pdftex-1.21b snapshot
In-Reply-To: <425F874D.5020402@wxs.nl>
References: <20050414081040.GC2571@monty.localnet>
	<20050414101135.GC2946@monty.localnet>
	<20050415012807.GA2857@monty.localnet>
	<20050415065928.GA2771@monty.localnet> <425F874D.5020402@wxs.nl>
Message-ID: <20050415094951.GB3195@monty.localnet>

On Fri, Apr 15, 2005 at 11:20:13AM +0200, Hans Hagen wrote:
> The Thanh Han wrote:
> >Hi,
> >
> >I have uploaded a new snapshot. Changes:
> >
> >- add "pt" to the result of \leftmarginkern, \rightmarginkern and
> >  \pdffontsize
> >
> >- change pdftex to generate a warning instead of failing when a ttf
> >  font has multiple glyphs mapped to the same unicode
> 
> does pdftex already silently recover when a pdf image is missing or faulty?

not yet -- still not clear what to do.

Thanh
From hartmut_henkel at gmx.de  Tue Apr 19 22:45:15 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Tue Apr 19 22:45:20 2005
Subject: [NTG-pdftex] length of new primitives
Message-ID: <Pine.LNX.4.61.0504192224510.6776@hahepc1.hahe>

while updating the manual, there are Taco's new primitives:

\pdfimagegamma
\pdfgamma

and

\pdfoptionpdfimagehicolor
\pdfoptionimageapplygamma

Trivial thing only: i wonder whether they really must be this long
(there are already some very long ones, like (line break here)
\pdfoptionpdfinclusionerrorlevel). Won't

\pdfoptionpdfimagehicolor -->
\pdfimagehicolor

\pdfoptionimageapplygamma -->
\pdfimageapplygamma

serve as well? E. g. there is also \pdfadjustspacing, not
\pdfoptionadjustspacing. BTW the new ones are not dumped into the
format, so maybe one could say that only things with "option" would be
dumped? Which are criteria that some stuff should be dumped, other not?

Regards, Hartmut
From taco at elvenkind.com  Wed Apr 20 09:01:00 2005
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed Apr 20 09:03:20 2005
Subject: [NTG-pdftex] Re: length of new primitives
In-Reply-To: <Pine.LNX.4.61.0504192224510.6776@hahepc1.hahe>
References: <Pine.LNX.4.61.0504192224510.6776@hahepc1.hahe>
Message-ID: <4265FE2C.8010004@elvenkind.com>

Hartmut Henkel wrote:
> 
> \pdfoptionpdfimagehicolor -->
> \pdfimagehicolor

I suddenly noticed that this one is not named consistently anyway:
it was supposed to be \pdfoptionpngimagehicolor.

I simply used '\pdfoption' as prefix for option commands, and
'\pdf' for the two integer parameters, but I agree that shorter
names are easier to handle. Your proposal looks fine to me.

Taco
From Michael.Zedler at tum.de  Wed Apr 20 15:48:21 2005
From: Michael.Zedler at tum.de (Michael Zedler)
Date: Wed Apr 20 15:48:25 2005
Subject: [NTG-pdftex] cmap inclusion and virtual fonts
Message-ID: <42665DA5.8010802@tum.de>

Hello,

Concerning cmap inclusion and virtual fonts 
ftp://ftp.dante.de/tex-archive/macros/latex/contrib/cmap/README states

"The main limitation currently is inability to work with virtual fonts,
and this is because of limitation of pdftex, and may be resolved in a
future versions of pdftex."

Does this still hold? When using fonts with non-standard ligature names 
(e.g. /f_i, /f_l, /f_f etc with Adobe's current OTF) adding cmaps would 
be really useful - currently one cannot search for any word containing a 
ligature using Adobe Reader.
Even better if these cmaps could be generated on the fly. Somehow Adobe 
Distiller manages to do so...

Michael
From hartmut_henkel at gmx.de  Thu Apr 21 08:32:41 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu Apr 21 08:32:43 2005
Subject: [NTG-pdftex] Re: various tiny 1.21b patches (fwd)
In-Reply-To: <Pine.LNX.4.61.0504210824530.3950@hahepc1.hahe>
References: <Pine.LNX.4.61.0504210824530.3950@hahepc1.hahe>
Message-ID: <Pine.LNX.4.61.0504210831010.3994@hahepc1.hahe>

---------- Forwarded message ----------
Date: Thu, 21 Apr 2005 07:46:00 +0200 (MEST)
From: The Thanh Han <hanthethanh@gmx.net>
To: Hartmut Henkel <hartmut_henkel@gmx.de>
Subject: Re: various tiny 1.21b patches

...So until the end of this month I will have a chance to take a look at
those changes. Can you please also post a mail to the ntg-pdftex ml
saying that I am off-line for about 2 weeks. Many thanks.

...

If nothing is urgent, can we postpone the release until I am back?

Regards,
Thanh


Hartmut Henkel wrote:

> Hi Thanh,
>
> attached find a bunch of diffs that should mainly tidy up left-over
> stuff from the obsolete \pdfmovechars primitive. I hope i'm right that
> also the update_enc() function is not needed anymore.
>
> The pdftex.ch.diff also contains a patch to get shorter names:
>
> \pdfoptionpdfimagehicolor -->
> \pdfimagehicolor
>
> \pdfoptionimageapplygamma -->
> \pdfimageapplygamma
>
> See ntg-pdftex list. I would then try to put the short names into the
> pdftex manual.
>
> There were also left-over obsolete cfg_pdf12_compliant_code and
> cfg_pdf13_compliant_code in pdftex.ch.
>
> Can you check and put these patches in before the release?
From hartmut_henkel at gmx.de  Sat Apr 23 01:17:22 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sat Apr 23 01:17:32 2005
Subject: [NTG-pdftex] pdfTeX Manual Rev. 1.595, 20050422
Message-ID: <Pine.LNX.4.61.0504230110110.3907@hahepc1.hahe>

There is a fresh pdftex-t.tex manual version at sarovar with all new
primitives for pdftex-1.21b (thanks to Taco!), and some streamlining.

Regards, Hartmut
From reinhard.kotucha at web.de  Sat Apr 23 01:56:27 2005
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat Apr 23 01:56:38 2005
Subject: [NTG-pdftex] pdfTeX Manual Rev. 1.595, 20050422
In-Reply-To: <Pine.LNX.4.61.0504230110110.3907@hahepc1.hahe>
References: <Pine.LNX.4.61.0504230110110.3907@hahepc1.hahe>
Message-ID: <17001.36651.445836.718702@zarniwoop.ms25.local>

>>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel@gmx.de> writes:

  > There is a fresh pdftex-t.tex manual version at sarovar with all
  > new primitives for pdftex-1.21b (thanks to Taco!), and some
  > streamlining.

If I click on "View Documentation" at sarovar I get "This project has
no visible documents".

Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha@web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From hartmut_henkel at gmx.de  Sat Apr 23 22:41:33 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sat Apr 23 22:41:36 2005
Subject: [NTG-pdftex] pdfTeX Manual Rev. 1.595, 20050422
In-Reply-To: <17001.36651.445836.718702@zarniwoop.ms25.local>
References: <Pine.LNX.4.61.0504230110110.3907@hahepc1.hahe>
	<17001.36651.445836.718702@zarniwoop.ms25.local>
Message-ID: <Pine.LNX.4.61.0504232238080.6754@hahepc1.hahe>

On Sat, 23 Apr 2005, Reinhard Kotucha wrote:

> >>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel@gmx.de> writes:
>
> If I click on "View Documentation" at sarovar I get "This project has
> no visible documents".

i tried to upload the tar.bz2 file with PDFs and sources to there but it
doesn't work. Currently it's only in non-public CVS. Martin, can you
enable doc. upload for members with login? There is a rev. 1.596 now.

Regards, Hartmut
From staw at gust.org.pl  Sun Apr 24 03:05:59 2005
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Sun Apr 24 03:04:45 2005
Subject: [NTG-pdftex] pdfTeX Manual Rev. 1.595, 20050422
In-Reply-To: <Pine.LNX.4.61.0504230110110.3907@hahepc1.hahe>
Message-ID: <Pine.LNX.4.44.0504240221570.11280-100000@re86.internetdsl.tpnet.pl>

On Sat, 23 Apr 2005, Hartmut Henkel wrote:

> There is a fresh pdftex-t.tex manual version at sarovar with all new
> primitives for pdftex-1.21b (thanks to Taco!), and some streamlining.

Well, would you please submiting it also to the TL p4?
Perhaps I don't undestand well, but it seems to me that all testing
and checking pdftex stuff, as well as the documentation, goes also into 
the TeX Live p4 repository. Martin, could you explain me more how things
are going...

Best wishes,

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl


From martin at oneiros.de  Wed Apr 27 12:13:19 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed Apr 27 12:13:23 2005
Subject: [NTG-pdftex] pdfTeX Manual Rev. 1.595, 20050422
In-Reply-To: <Pine.LNX.4.61.0504232238080.6754@hahepc1.hahe>
References: <Pine.LNX.4.61.0504230110110.3907@hahepc1.hahe>
	<17001.36651.445836.718702@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0504232238080.6754@hahepc1.hahe>
Message-ID: <20050427101319.GL5790@blau.artcom-gmbh.de>

On 2005-04-23 22:41:33 +0200, Hartmut Henkel wrote:
> i tried to upload the tar.bz2 file with PDFs and sources to there but it
> doesn't work. Currently it's only in non-public CVS. Martin, can you
> enable doc. upload for members with login? There is a rev. 1.596 now.

I'm currently uploading and releasing the manual.

Short howto:
- In Documentation -> Admin you can add categories or
  release/edit/update already released documentation; new uploads
  must be approved there
- In Documentation -> Submit new documentation you can submit new
  documentation which must then be approved (see above)

Best regards
        Martin
-- 
                    http://www.tm.oneiros.de
From hartmut_henkel at gmx.de  Wed Apr 27 19:22:46 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed Apr 27 19:22:50 2005
Subject: [NTG-pdftex] pdfTeX Manual Rev. 1.595, 20050422
In-Reply-To: <20050427101319.GL5790@blau.artcom-gmbh.de>
References: <Pine.LNX.4.61.0504230110110.3907@hahepc1.hahe>
	<17001.36651.445836.718702@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0504232238080.6754@hahepc1.hahe>
	<20050427101319.GL5790@blau.artcom-gmbh.de>
Message-ID: <Pine.LNX.4.61.0504271918120.4130@hahepc1.hahe>

Hi Martin,

On Wed, 27 Apr 2005, Martin Schr?der wrote:

> I'm currently uploading and releasing the manual.
>
> Short howto:
> - In Documentation -> Admin you can add categories or
>   release/edit/update already released documentation; new uploads
>   must be approved there
> - In Documentation -> Submit new documentation you can submit new
>   documentation which must then be approved (see above)

thanks a lot, found the manual. Tiny problem is that the title page
object numbers don't match the text description, as 1.21a still has the
dangling font obj bug 311 and so object numbers are off by one. I have
tried to upload a -a.pdf and -l.pdf made by 1.21b, it was even there and
could be activated, but then the new version actually die not appear at
the Doc. list :-( Maybe if you have 1.21b-beta running, you could create
a new file set?

Regards, Hartmut (little in hurry because of Stammtisch)
