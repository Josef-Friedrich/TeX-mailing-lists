From hartmut_henkel at gmx.de  Thu Nov  3 01:21:47 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu Nov  3 01:21:54 2005
Subject: [NTG-pdftex] pdftosrc man page
Message-ID: <Pine.LNX.4.61.0511030116220.8183@hahepc1.hahe>

i've put a sketchy man page for Thanh's nice pdftosrc utility at

http://www.circuitwizard.de/misc/pdftosrc.1.gz

Please have a look whether one can live with it for now. Hope this helps
to close the complaints from debian.

Thanks a lot.

Regards, Hartmut
From hartmut_henkel at gmx.de  Thu Nov  3 19:45:05 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu Nov  3 19:45:11 2005
Subject: [NTG-pdftex] Re: pdftosrc man page (fwd)
Message-ID: <Pine.LNX.4.61.0511031944270.3795@hahepc1.hahe>

...seems one has to subscribe to the list to post there

---------- Forwarded message ----------
Date: Thu, 03 Nov 2005 13:51:31 +0100
From: Frank K?ster <frank@kuesterei.ch>
To: Hartmut Henkel <hartmut_henkel@gmx.de>
Cc: ntg-pdftex@ntg.nl, Hilmar Preusse <hille42@web.de>
Subject: Re: pdftosrc man page

Hartmut Henkel <hartmut_henkel@gmx.de> wrote:

> i've put a sketchy man page for Thanh's nice pdftosrc utility at
>
> http://www.circuitwizard.de/misc/pdftosrc.1.gz
>
> Please have a look whether one can live with it for now.

Is this based on Hilmars work that we sent to the list earlier, or is it
written from scratch?

Regards, Frank
-- 
Frank K?ster
Inst. f. Biochemie der Univ. Z?rich
Debian Developer
From hartmut_henkel at gmx.de  Thu Nov  3 19:45:30 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu Nov  3 19:45:34 2005
Subject: [NTG-pdftex] Re: pdftosrc man page (fwd)
Message-ID: <Pine.LNX.4.61.0511031945110.3795@hahepc1.hahe>

---------- Forwarded message ----------
Date: Thu, 3 Nov 2005 14:34:01 +0100
From: Hilmar Preusse <hille42@web.de>
To: Frank K?ster <frank@kuesterei.ch>
Cc: Hartmut Henkel <hartmut_henkel@gmx.de>, ntg-pdftex@ntg.nl
Subject: Re: pdftosrc man page

On 03.11.05 Frank K?ster (frank@kuesterei.ch) wrote:
> Hartmut Henkel <hartmut_henkel@gmx.de> wrote:

Hi,

> > i've put a sketchy man page for Thanh's nice pdftosrc utility at
> >
> > http://www.circuitwizard.de/misc/pdftosrc.1.gz
> >
> > Please have a look whether one can live with it for now.
>
> Is this based on Hilmars work that we sent to the list earlier, or
> is it written from scratch?
>
No, it is not. It says much more about the functionality of pdftosrc,
meanwhile my one contains more about the background and how to attach
files. After pdftosrc disappeared from teTeX I assumed it to be
obsolete, closed all bugs and purged my work.
I've uploaded my one to http://www.amasol.de/~preusse/pdftosrc/ .

H.
-- 
http://www.hilmar-preusse.de.vu/
From hartmut_henkel at gmx.de  Thu Nov  3 19:45:51 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu Nov  3 19:45:55 2005
Subject: [NTG-pdftex] Re: pdftosrc man page (fwd)
Message-ID: <Pine.LNX.4.61.0511031945380.3795@hahepc1.hahe>

---------- Forwarded message ----------
Date: Thu, 03 Nov 2005 15:10:48 +0100
From: Frank K?ster <frank@kuesterei.ch>
To: Hilmar Preusse <hille42@web.de>
Cc: Hartmut Henkel <hartmut_henkel@gmx.de>, ntg-pdftex@ntg.nl
Subject: Re: pdftosrc man page

Hilmar Preusse <hille42@web.de> wrote:

> On 03.11.05 Frank K?ster (frank@kuesterei.ch) wrote:
>> Hartmut Henkel <hartmut_henkel@gmx.de> wrote:
>
> Hi,
>
>> > i've put a sketchy man page for Thanh's nice pdftosrc utility at
>> >
>> > http://www.circuitwizard.de/misc/pdftosrc.1.gz
>> >
>> > Please have a look whether one can live with it for now.
>>
>> Is this based on Hilmars work that we sent to the list earlier, or
>> is it written from scratch?
>>
> No, it is not. It says much more about the functionality of pdftosrc,
> meanwhile my one contains more about the background and how to attach
> files. After pdftosrc disappeared from teTeX I assumed it to be
> obsolete, closed all bugs and purged my work.
> I've uploaded my one to http://www.amasol.de/~preusse/pdftosrc/ .

I didn't even notice that pdftosrc has disappeared from teTeX - or did I
just suppress my memory that we have removed it Debian-specifically?

Regards, Frank
-- 
Frank K?ster
Inst. f. Biochemie der Univ. Z?rich
Debian Developer
From hartmut_henkel at gmx.de  Thu Nov  3 19:46:12 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu Nov  3 19:46:16 2005
Subject: [NTG-pdftex] Re: pdftosrc man page (fwd)
Message-ID: <Pine.LNX.4.61.0511031945570.3795@hahepc1.hahe>

---------- Forwarded message ----------
Date: Thu, 3 Nov 2005 15:23:16 +0100
From: Hilmar Preusse <hille42@web.de>
To: Frank K?ster <frank@kuesterei.ch>
Cc: Hartmut Henkel <hartmut_henkel@gmx.de>, ntg-pdftex@ntg.nl
Subject: Re: pdftosrc man page

On 03.11.05 Frank K?ster (frank@kuesterei.ch) wrote:
> Hilmar Preusse <hille42@web.de> wrote:

Hi,

> > After pdftosrc disappeared from teTeX I assumed it to be
> > obsolete, closed all bugs and purged my work.
> > I've uploaded my one to http://www.amasol.de/~preusse/pdftosrc/ .
>
> I didn't even notice that pdftosrc has disappeared from teTeX - or
> did I just suppress my memory that we have removed it
> Debian-specifically?
>
IIRC the source code is still there, but it is not compiled and
installed. Not, we don't modify the Makefiles.

H.
-- 
http://www.hilmar-preusse.de.vu/
From reinhard.kotucha at web.de  Thu Nov  3 20:38:20 2005
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Thu Nov  3 20:38:26 2005
Subject: [NTG-pdftex] Re: pdftosrc man page (fwd)
In-Reply-To: <Pine.LNX.4.61.0511031945380.3795@hahepc1.hahe>
References: <Pine.LNX.4.61.0511031945380.3795@hahepc1.hahe>
Message-ID: <17258.26412.937603.363834@zarniwoop.ms25.local>


  > I didn't even notice that pdftosrc has disappeared from teTeX - or
  > did I just suppress my memory that we have removed it
  > Debian-specifically?

It is still in teTeX and will be compiled by "make world":

-rwxr-xr-x ... teTeX-3.1-beta/tetex-src/texk/web2c/pdftosrc

However, unfortunately it is not installed any more.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha@web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From noreply at sarovar.org  Fri Nov  4 20:58:31 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Fri Nov  4 21:06:47 2005
Subject: [NTG-pdftex] [ pdftex-Feature Requests-429 ] Make PDF documents
	accessible to visually imparied.
Message-ID: <E1EY7hn-0007iw-00@sarovar.org>

Feature Requests item #429, was opened at 2005-09-12 04:07
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=429&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Timothy O'Brien (oberon101)
Assigned to: Nobody (None)
Summary: Make PDF documents accessible to visually imparied.

Initial Comment:
Adobe Reader has a'reflow' feature that allows 
visually impaired users to zoom into properly 
formatted documents and read them without having to 
move the viewable area back and forth across the 
page.  PDFs made in MikteX eith pdfte are not properly 
formatted and reflow without interword spacing, 
redering them unreadable. I contacted the MikteX 
people and they referred me here. I beleive Scientific 
Word also uses pdftex with the same result.

Any chance this could be fixed?

----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2005-11-05 01:28

Message:
Logged In: NO 


I would volonteer to test the feature. I am writing
a rather long pdf produced with pdftex that is 
downloadable for free ( http://www.motionmountain.net )
and readers regularly ask why it cannot be read aloud.
Pdftex probably would only need to be extended
with a single command - something like 
\writetaghere{tagtype} - and all the rest could 
be done by extensions to the latex cls and sty files.

CS

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=429&group_id=106
From noreply at sarovar.org  Sun Nov  6 12:26:53 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Sun Nov  6 12:35:04 2005
Subject: [NTG-pdftex] [ pdftex-Patches-447 ] Don't write /Encoding for
	non-reencoded fonts
Message-ID: <E1EYifl-0002xU-00@sarovar.org>

Patches item #447, was opened at 2005-11-06 12:26
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=447&group_id=106

Category: Fonts
Group: v1.30.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Nobody (None)
Summary: Don't write /Encoding for non-reencoded fonts

Initial Comment:
The /Encoding entry in the /Font dictionary is only
needed when the font is actually reencoded, see the PDF
Ref. v. 1.6, section 5.5.5.

Currently also for non-reencoded Type1 fonts the
/Encoding entry and its /Encoding object with the
/Differences array are generated from the /Encoding in
the font, duplicating it unnecessarily. This happens
particularily with the many CM fonts.

By the tiny patch to writefont.c this /Encoding entry
and the array object will not be generated and written
any more for non-reencoded Type1 fonts. The PDF reader
application will then take the /Encoding from the
embedded font file.

Testing welcome.

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=447&group_id=106
From vvv at vsu.ru  Mon Nov  7 15:24:31 2005
From: vvv at vsu.ru (Vladimir Volovich)
Date: Mon Nov  7 15:30:28 2005
Subject: [NTG-pdftex] \pdfsavepos&friends in DVI mode
Message-ID: <87fyq87cyo.fsf@vsu.ru>

Greetings,

we are using the \pdfsavepos and \pdflast[xy]pos primitives, which
are very useful.

but they work only in PDF mode. i wonder if it would be not too hard
to make them available in DVI mode as well.

what do you think?

Best,
v.

From oberdiek at uni-freiburg.de  Mon Nov  7 21:24:04 2005
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Mon Nov  7 21:24:00 2005
Subject: [NTG-pdftex] \pdfsavepos&friends in DVI mode
In-Reply-To: <87fyq87cyo.fsf@vsu.ru>
References: <87fyq87cyo.fsf@vsu.ru>
Message-ID: <20051107202404.GA11087@m0A023218.vpn.uni-freiburg.de>

On Mon, Nov 07, 2005 at 05:24:31PM +0300, Vladimir Volovich wrote:

> we are using the \pdfsavepos and \pdflast[xy]pos primitives, which
> are very useful.
> 
> but they work only in PDF mode. i wonder if it would be not too hard
> to make them available in DVI mode as well.
> 
> what do you think?

I agree, this feature is mode-independent and the
implementation is already done, see patch 438:
  http://sarovar.org/tracker/index.php?func=detail&aid=438&group_id=106&atid=495

Yours sincerely
  Heiko <oberdiek@uni-freiburg.de>
-- 
From noreply at sarovar.org  Wed Nov  9 20:33:24 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Nov  9 20:42:43 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-450 ] error copying .pfb font to pdf
Message-ID: <E1EZvhE-0006ZT-00@sarovar.org>

Bugs item #450, was opened at 2005-11-09 20:33
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=450&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Christian Heusquin (chrisheus)
Assigned to: Hartmut Henkel (hhenkel)
Summary: error copying .pfb font to pdf

Initial Comment:
I'm an user of MikTeX package (vers 2.4) and uses 
pdfLaTeX on a regular basis.

I bought a Poscript Type 1 Sabon Font family from 
Monotype and when using the italic (msbri8a.pfb) 
pdfeTex has a problem and stops writing output. The 
pdf is unusable.

I checked the .pfb and its Ok. I can use it with 
Latex but then I have other problems (graphics, and 
symbol fonts).

Here is an extract of the log file:

This is pdfeTeX, Version 3.141592-1.21a-2.2 (MiKTeX 
2.4) (preloaded format=latex 2005.11.7)  9 NOV 2005 
19:41
.
.
.

{8r.enc}<C:\localtexmf\fonts\type1\monotype\s
abon\msbr8a.pfb><C:\localtexmf\fonts\type1
\monotype\sabon\msbri8a.pfb
Warning: pdflatex (file C:\localtexmf\fonts\type1
\monotype\sabon\msbri8a.pfb): 
532 bytes more than expected were ignored

Error: pdflatex (file C:\localtexmf\fonts\type1
\monotype\sabon\msbri8a.pfb): un
expected end of file
 ==> Fatal error occurred, the output PDF file is not 
finished!

----------------------------
If you need, I have all the 
necessary .pfb, .afm, .tfm, .fd, .vf, .map, .enc, .sty
 and a short .tex file to reproduce the problem. 
Anyway I attach them so you have them if you need.

Many thanks in advance

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=450&group_id=106
From noreply at sarovar.org  Wed Nov  9 20:53:05 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Nov  9 21:02:42 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-450 ] error copying .pfb font to pdf
Message-ID: <E1EZw0H-0008GS-00@sarovar.org>

Bugs item #450, was opened at 2005-11-09 20:33
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=450&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Christian Heusquin (chrisheus)
Assigned to: Hartmut Henkel (hhenkel)
Summary: error copying .pfb font to pdf

Initial Comment:
I'm an user of MikTeX package (vers 2.4) and uses 
pdfLaTeX on a regular basis.

I bought a Poscript Type 1 Sabon Font family from 
Monotype and when using the italic (msbri8a.pfb) 
pdfeTex has a problem and stops writing output. The 
pdf is unusable.

I checked the .pfb and its Ok. I can use it with 
Latex but then I have other problems (graphics, and 
symbol fonts).

Here is an extract of the log file:

This is pdfeTeX, Version 3.141592-1.21a-2.2 (MiKTeX 
2.4) (preloaded format=latex 2005.11.7)  9 NOV 2005 
19:41
.
.
.

{8r.enc}<C:\localtexmf\fonts\type1\monotype\s
abon\msbr8a.pfb><C:\localtexmf\fonts\type1
\monotype\sabon\msbri8a.pfb
Warning: pdflatex (file C:\localtexmf\fonts\type1
\monotype\sabon\msbri8a.pfb): 
532 bytes more than expected were ignored

Error: pdflatex (file C:\localtexmf\fonts\type1
\monotype\sabon\msbri8a.pfb): un
expected end of file
 ==> Fatal error occurred, the output PDF file is not 
finished!

----------------------------
If you need, I have all the 
necessary .pfb, .afm, .tfm, .fd, .vf, .map, .enc, .sty
 and a short .tex file to reproduce the problem. 
Anyway I attach them so you have them if you need.

Many thanks in advance

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2005-11-09 20:53

Message:
Logged In: YES 
user_id=929

it's likely that this is solved in a newer version. I can't
check without the font. Try to retest on 1.30.4 from MiKTeX.
Or you might send me the pack of test files to
hartmut_henkel at gmx dot de.

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=450&group_id=106
From noreply at sarovar.org  Wed Nov  9 23:29:43 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Nov  9 23:40:48 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-450 ] error copying .pfb font to pdf
Message-ID: <E1EZyRr-00047C-00@sarovar.org>

Bugs item #450, was opened at 2005-11-09 20:33
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=450&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: None
Priority: 5
Submitted By: Christian Heusquin (chrisheus)
Assigned to: Hartmut Henkel (hhenkel)
Summary: error copying .pfb font to pdf

Initial Comment:
I'm an user of MikTeX package (vers 2.4) and uses 
pdfLaTeX on a regular basis.

I bought a Poscript Type 1 Sabon Font family from 
Monotype and when using the italic (msbri8a.pfb) 
pdfeTex has a problem and stops writing output. The 
pdf is unusable.

I checked the .pfb and its Ok. I can use it with 
Latex but then I have other problems (graphics, and 
symbol fonts).

Here is an extract of the log file:

This is pdfeTeX, Version 3.141592-1.21a-2.2 (MiKTeX 
2.4) (preloaded format=latex 2005.11.7)  9 NOV 2005 
19:41
.
.
.

{8r.enc}<C:\localtexmf\fonts\type1\monotype\s
abon\msbr8a.pfb><C:\localtexmf\fonts\type1
\monotype\sabon\msbri8a.pfb
Warning: pdflatex (file C:\localtexmf\fonts\type1
\monotype\sabon\msbri8a.pfb): 
532 bytes more than expected were ignored

Error: pdflatex (file C:\localtexmf\fonts\type1
\monotype\sabon\msbri8a.pfb): un
expected end of file
 ==> Fatal error occurred, the output PDF file is not 
finished!

----------------------------
If you need, I have all the 
necessary .pfb, .afm, .tfm, .fd, .vf, .map, .enc, .sty
 and a short .tex file to reproduce the problem. 
Anyway I attach them so you have them if you need.

Many thanks in advance

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2005-11-09 23:29

Message:
Logged In: YES 
user_id=929

seems the font file msbri8a.pfb is broken. It is missing the
line

mark currentfile closefile

near the end. The other fonts in this family are ok! With
the missing line, pdftex can't find the end of the eexec
section. The above statements are normally part of any Type1
font, see the Type1 specification by Adobe.

Just compare your font with other .pfb's after disassembling
by t1disasm. Add above line at the right place, make a new
.pfb by t1asm -b and pdftex will happily use the font.

And complain to the font manufacturer! :-)

Regards, Hartmut


----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-11-09 20:53

Message:
Logged In: YES 
user_id=929

it's likely that this is solved in a newer version. I can't
check without the font. Try to retest on 1.30.4 from MiKTeX.
Or you might send me the pack of test files to
hartmut_henkel at gmx dot de.

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=450&group_id=106
From noreply at sarovar.org  Thu Nov 10 09:15:16 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Nov 10 09:24:27 2005
Subject: [NTG-pdftex] [ pdftex-Bugs-450 ] error copying .pfb font to pdf
Message-ID: <E1Ea7aW-0008G7-00@sarovar.org>

Bugs item #450, was opened at 2005-11-09 20:33
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=450&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
>Resolution: Fixed
Priority: 5
Submitted By: Christian Heusquin (chrisheus)
Assigned to: Hartmut Henkel (hhenkel)
Summary: error copying .pfb font to pdf

Initial Comment:
I'm an user of MikTeX package (vers 2.4) and uses 
pdfLaTeX on a regular basis.

I bought a Poscript Type 1 Sabon Font family from 
Monotype and when using the italic (msbri8a.pfb) 
pdfeTex has a problem and stops writing output. The 
pdf is unusable.

I checked the .pfb and its Ok. I can use it with 
Latex but then I have other problems (graphics, and 
symbol fonts).

Here is an extract of the log file:

This is pdfeTeX, Version 3.141592-1.21a-2.2 (MiKTeX 
2.4) (preloaded format=latex 2005.11.7)  9 NOV 2005 
19:41
.
.
.

{8r.enc}<C:\localtexmf\fonts\type1\monotype\s
abon\msbr8a.pfb><C:\localtexmf\fonts\type1
\monotype\sabon\msbri8a.pfb
Warning: pdflatex (file C:\localtexmf\fonts\type1
\monotype\sabon\msbri8a.pfb): 
532 bytes more than expected were ignored

Error: pdflatex (file C:\localtexmf\fonts\type1
\monotype\sabon\msbri8a.pfb): un
expected end of file
 ==> Fatal error occurred, the output PDF file is not 
finished!

----------------------------
If you need, I have all the 
necessary .pfb, .afm, .tfm, .fd, .vf, .map, .enc, .sty
 and a short .tex file to reproduce the problem. 
Anyway I attach them so you have them if you need.

Many thanks in advance

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-11-09 23:29

Message:
Logged In: YES 
user_id=929

seems the font file msbri8a.pfb is broken. It is missing the
line

mark currentfile closefile

near the end. The other fonts in this family are ok! With
the missing line, pdftex can't find the end of the eexec
section. The above statements are normally part of any Type1
font, see the Type1 specification by Adobe.

Just compare your font with other .pfb's after disassembling
by t1disasm. Add above line at the right place, make a new
.pfb by t1asm -b and pdftex will happily use the font.

And complain to the font manufacturer! :-)

Regards, Hartmut


----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-11-09 20:53

Message:
Logged In: YES 
user_id=929

it's likely that this is solved in a newer version. I can't
check without the font. Try to retest on 1.30.4 from MiKTeX.
Or you might send me the pack of test files to
hartmut_henkel at gmx dot de.

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=450&group_id=106
From jackos1 at poczta.onet.pl  Sun Nov 13 20:52:16 2005
From: jackos1 at poczta.onet.pl (Pawel Jackowski)
Date: Sun Nov 13 20:53:16 2005
Subject: [NTG-pdftex] a dream about options
Message-ID: <43779970.5060106@poczta.onet.pl>

Hello,

I suppose the issue was discussed before but couldn't find that is archives.

Making high level macros in (pure) TeX encounters problem of 
optionality; the number of macro `properties' (agruments) is limited and 
making parameters *optional* needs some trickery. And yes, syntax like

	\macro[...,...,...]{...}

is quite robust ConTeXt or LaTeX but is also time, space and resource 
consuming. Must be, since there is no robust way to build macros with 
parameters organized similar to <rulespec>,

	\macro key1 val1 key2=val2 key3{val3} ...

at least not with optional key-val pairs.

In pure TeX, such optional parameter text is rather exceptional, but in 
pdfTeX it becomes quite common. Would it be possible to implement some 
extension to definition building mechanism that allows to create macros 
with rulespec-like shape? I admit for the moment I can't even imagine a 
consistent syntax for such a feature. Macro parameters rules are 
Knuthish enough :)

Regards,
-- 
Pawe/l Jackowski
P.Jackowski@gust.org.pl
From hartmut_henkel at gmx.de  Sun Nov 13 21:58:42 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sun Nov 13 21:58:50 2005
Subject: [NTG-pdftex] fix_int() corrections
Message-ID: <Pine.LNX.4.61.0511132148060.14230@hahepc1.hahe>

i wonder whether one should feed back the fix_int() clipping corrections
into the variables, e. g. like

fixed_pk_resolution := fix_int(pdf_pk_resolution, 72, 2400);
pdf_pk_resolution = fixed_pk_resolution; {== this line would be new ==}

Currently e. g. \pdfpkresolution is copied to an internal
fixed_pk_resolution variable which is silently clipped to 72--2400 dpi
and isn't accessible. But \pdfpkresolution remains at its original
possibly out-of-range value, so one can't rely on it.

This would affect about the following variables:

\pdfdecimaldigits
\pdfpkresolution
\pdfimageresolution
\pdfgamma
\pdfimagegamma
\pdfimagehicolor
\pdfimageapplygamma

Regards, Hartmut
From pragma at wxs.nl  Sun Nov 13 21:59:06 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Sun Nov 13 21:59:07 2005
Subject: [NTG-pdftex] a dream about options
In-Reply-To: <43779970.5060106@poczta.onet.pl>
References: <43779970.5060106@poczta.onet.pl>
Message-ID: <4377A91A.2090801@wxs.nl>

Pawel Jackowski wrote:

> Hello,
>
> I suppose the issue was discussed before but couldn't find that is 
> archives.
>
> Making high level macros in (pure) TeX encounters problem of 
> optionality; the number of macro `properties' (agruments) is limited 
> and making parameters *optional* needs some trickery. And yes, syntax 
> like
>
>     \macro[...,...,...]{...}
>
> is quite robust ConTeXt or LaTeX but is also time, space and resource 
> consuming. Must be, since there is no robust way to build macros with 
> parameters organized similar to <rulespec>,
>
>     \macro key1 val1 key2=val2 key3{val3} ...
>
> at least not with optional key-val pairs.
>
> In pure TeX, such optional parameter text is rather exceptional, but 
> in pdfTeX it becomes quite common. Would it be possible to implement 
> some extension to definition building mechanism that allows to create 
> macros with rulespec-like shape? I admit for the moment I can't even 
> imagine a consistent syntax for such a feature. Macro parameters rules 
> are Knuthish enough :)

in the previosu century taco made some extensiong dealing with key/val 
parsing (and other kinds of parsing); at that time we did quite some 
testing with speed issues, and the price to pay was higher that the 
gain; keep in mind that in tex catcodes and expansion always kind of 
interfere in such things; ok, if you limit key/val parsing to 'strings' 
only (i.e. no expansion, no catcode support) then it can be faster, but 
at the same time it also becomes useless for everyday usage; as with 
more tex things, because tex is rather optimized, hard coded 
alternatives (extensions to the language) not always pay off; also 
consider implementation issues like namespacing, scope of keys, etc

Hans
From pragma at wxs.nl  Mon Nov 14 01:25:42 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Nov 14 01:25:39 2005
Subject: [NTG-pdftex] fix_int() corrections
In-Reply-To: <Pine.LNX.4.61.0511132148060.14230@hahepc1.hahe>
References: <Pine.LNX.4.61.0511132148060.14230@hahepc1.hahe>
Message-ID: <4377D986.3000507@wxs.nl>

Hartmut Henkel wrote:

>i wonder whether one should feed back the fix_int() clipping corrections
>into the variables, e. g. like
>
>fixed_pk_resolution := fix_int(pdf_pk_resolution, 72, 2400);
>pdf_pk_resolution = fixed_pk_resolution; {== this line would be new ==}
>
>  
>
makes sense

Hans
From hanthethanh at gmail.com  Mon Nov 14 03:00:50 2005
From: hanthethanh at gmail.com (The Thanh Han)
Date: Mon Nov 14 03:52:13 2005
Subject: [NTG-pdftex] fix_int() corrections
In-Reply-To: <Pine.LNX.4.61.0511132148060.14230@hahepc1.hahe>
References: <Pine.LNX.4.61.0511132148060.14230@hahepc1.hahe>
Message-ID: <20051114020050.GA3021@monty.localnet>

sounds like a good idea.

btw, doesn't it make sense to release a new beta version
with all the patches by Hartmut and other? The patch I
uploaded still has some problems so I need to fix them
first, it can wait for a while.

Thanh


On Sun, Nov 13, 2005 at 09:58:42PM +0100, Hartmut Henkel wrote:
> i wonder whether one should feed back the fix_int() clipping corrections
> into the variables, e. g. like
> 
> fixed_pk_resolution := fix_int(pdf_pk_resolution, 72, 2400);
> pdf_pk_resolution = fixed_pk_resolution; {== this line would be new ==}
> 
> Currently e. g. \pdfpkresolution is copied to an internal
> fixed_pk_resolution variable which is silently clipped to 72--2400 dpi
> and isn't accessible. But \pdfpkresolution remains at its original
> possibly out-of-range value, so one can't rely on it.
> 
> This would affect about the following variables:
> 
> \pdfdecimaldigits
> \pdfpkresolution
> \pdfimageresolution
> \pdfgamma
> \pdfimagegamma
> \pdfimagehicolor
> \pdfimageapplygamma
> 
> Regards, Hartmut
> _______________________________________________
> ntg-pdftex mailing list
> ntg-pdftex@ntg.nl
> http://www.ntg.nl/mailman/listinfo/ntg-pdftex
From jackos1 at poczta.onet.pl  Mon Nov 14 09:51:22 2005
From: jackos1 at poczta.onet.pl (Pawel Jackowski)
Date: Mon Nov 14 09:52:21 2005
Subject: [NTG-pdftex] a dream about options
In-Reply-To: <4377A91A.2090801@wxs.nl>
References: <43779970.5060106@poczta.onet.pl> <4377A91A.2090801@wxs.nl>
Message-ID: <4378500A.8080303@poczta.onet.pl>

Hi Hans!

thanks for response.

>> Hello,
>>
>> I suppose the issue was discussed before but couldn't find that is 
>> archives.
>>
>> Making high level macros in (pure) TeX encounters problem of 
>> optionality[...]

> in the previosu century taco made some extensiong dealing with key/val 
> parsing (and other kinds of parsing); at that time we did quite some 
> testing with speed issues, and the price to pay was higher that the 
> gain; keep in mind that in tex catcodes and expansion always kind of 
> interfere in such things; 

Indeed, to keep things consistent, parameter text should always be 
expanded before being swallowed by \macro... Anyway, pdfTeX handles that 
somehow, supporting both expansion and catcoding.

> ok, if you limit key/val parsing to 'strings' 
> only (i.e. no expansion, no catcode support) then it can be faster, but 
> at the same time it also becomes useless for everyday usage; as with 
> more tex things, because tex is rather optimized, hard coded 
> alternatives (extensions to the language) not always pay off; also 
> consider implementation issues like namespacing, scope of keys, etc

...and parameters handling rules in such an extention would probably be 
faaaar away from TeX. But if tries has been made in previous century, 
meybe it's high time to repeat tests? In the previous century features 
such as decompressing/recompressing PNG in runtime didn't pay off 
either. If you don't consider it doable, I will reopen the request in 
the next century. -)

All the best,
-- 
Pawe/l Jackowski
P.Jackowski@gust.org.pl
From pragma at wxs.nl  Mon Nov 14 10:34:25 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Nov 14 10:34:37 2005
Subject: [NTG-pdftex] a dream about options
In-Reply-To: <4378500A.8080303@poczta.onet.pl>
References: <43779970.5060106@poczta.onet.pl> <4377A91A.2090801@wxs.nl>
	<4378500A.8080303@poczta.onet.pl>
Message-ID: <43785A21.3090209@wxs.nl>

Pawel Jackowski wrote:

> Hi Hans!
>
> thanks for response.
>
>>> Hello,
>>>
>>> I suppose the issue was discussed before but couldn't find that is 
>>> archives.
>>>
>>> Making high level macros in (pure) TeX encounters problem of 
>>> optionality[...]
>>
>
>> in the previosu century taco made some extensiong dealing with 
>> key/val parsing (and other kinds of parsing); at that time we did 
>> quite some testing with speed issues, and the price to pay was higher 
>> that the gain; keep in mind that in tex catcodes and expansion always 
>> kind of interfere in such things; 
>
>
> Indeed, to keep things consistent, parameter text should always be 
> expanded before being swallowed by \macro... Anyway, pdfTeX handles 
> that somehow, supporting both expansion and catcoding.

parsing keys as in \hrule ... is kind of special anyway: one can 
overload (repeat specs) but not all of them are treated the same; fuzzy 
optimizations and such; so there is not much reusable code there

>
>> ok, if you limit key/val parsing to 'strings' only (i.e. no 
>> expansion, no catcode support) then it can be faster, but at the same 
>> time it also becomes useless for everyday usage; as with more tex 
>> things, because tex is rather optimized, hard coded alternatives 
>> (extensions to the language) not always pay off; also consider 
>> implementation issues like namespacing, scope of keys, etc
>
>
> ...and parameters handling rules in such an extention would probably 
> be faaaar away from TeX. But if tries has been made in previous 
> century, meybe it's high time to repeat tests? In the previous century 
> features such as decompressing/recompressing PNG in runtime didn't pay 
> off either. If you don't consider it doable, I will reopen the request 
> in the next century. -)
>
sure, but there 'new methods' pop up and or constraints disappear (mem); 
tex is really optimized (i did lots of timing and many low level context 
commands and k/v handling are optimized to the max); on the other hand, 
the bigger memory makes it possible to be a bit more spending that in 
the past, i.e. write less fuzzy code (much tex code is fuzzy because of 
speed and mem issues); btw, one reason for context being 'slow' was that 
it had all this key value etc stuff and used quite some hash and mem; 
recently there was a report of on the tex live list who mentioned latex 
being much slower than in the past and tacos answer to that was that 
it's not related to slower pdftex or so since context had not become 
slower: it was just that bigger (la)tex's take more time to initialize, 
etc etc and all packages become bigger;  if you want to speed up macro 
packages think of what happens in there: even in a parameter driven 
package like context, the amount of expanded code (tracingall) with 
regards to k/v handling is small compared to messing around with boxes 
(esp when \copy is used) and saving/restoring as well as redundant 
passing around arguments (the #1 things)

another think to keep in mind: when discussing things like 
reimplementing tex, one can be tricked into thinking that there should 
be fast methods for char handling, hyphenation, etc etc (i.e. influences 
design of for instance classes in oo like aproaches); however, in more 
modern macro package features, tex spends much time in manipulating 
boxes (lists) in the otr and it could be that modern programming 
languages provide features that would make such critical operations 
faster; so, the gain is in other areas (take pdftex: pdf inclusion is 
incredibly fast, simply because that piece is written in a different 
language/way); compare it to scripting languages: they excel in handling 
text simply because they're made with that in mind.

Hans

From pragma at wxs.nl  Mon Nov 14 11:22:24 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Nov 14 11:22:28 2005
Subject: [NTG-pdftex] fix_int() corrections
In-Reply-To: <20051114020050.GA3021@monty.localnet>
References: <Pine.LNX.4.61.0511132148060.14230@hahepc1.hahe>
	<20051114020050.GA3021@monty.localnet>
Message-ID: <43786560.2000109@wxs.nl>

The Thanh Han wrote:

>sounds like a good idea.
>
>btw, doesn't it make sense to release a new beta version
>with all the patches by Hartmut and other? The patch I
>uploaded still has some problems so I need to fix them
>first, it can wait for a while.
>  
>
best wait a few weeks (till tex live is frozen and published)

Hans 



From taco at elvenkind.com  Mon Nov 14 11:51:35 2005
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon Nov 14 11:51:09 2005
Subject: [NTG-pdftex] a dream about options
In-Reply-To: <43779970.5060106@poczta.onet.pl>
References: <43779970.5060106@poczta.onet.pl>
Message-ID: <43786C37.1090004@elvenkind.com>



Pawel Jackowski wrote:
> Hello,
> 
> I suppose the issue was discussed before but couldn't find that is 
> archives.
> 
> Making high level macros in (pure) TeX encounters problem of 
> optionality; the number of macro `properties' (agruments) is limited and 
> making parameters *optional* needs some trickery. And yes, syntax like
> 
>     \macro[...,...,...]{...}
> 
> is quite robust ConTeXt or LaTeX but is also time, space and resource 
> consuming. 

Using macros is somewhat less efficient than doing the same stuff in
compiled code, but the gain is not very big, because most of the
TeX commands that are executed have to be executed anyway (parsing
argument texts, defining \csnames for the options).

Anyway, if you want to have a look at what I did, the code is still
on-line:
	
	http://tex.aanhet.net/eetex/

It is not my best change file ever (I was still learning how to
program in web when I wrote it). However it should be fairly easy
to understand the code. If I had to do it again it would be quite
different, though.

> Must be, since there is no robust way to build macros with 
> parameters organized similar to <rulespec>,
> 
>     \macro key1 val1 key2=val2 key3{val3} ...

I've learned to dislike the scan_keyword() stuff. It is a nightmare
to fake these primitives in macros, and it is hard to jump over
them in the output of \the.

> In pure TeX, such optional parameter text is rather exceptional, but in 
> pdfTeX it becomes quite common. Would it be possible to implement some 
> extension to definition building mechanism that allows to create macros 
> with rulespec-like shape? I admit for the moment I can't even imagine a 
> consistent syntax for such a feature. Macro parameters rules are 

The thing is: it shouldn't be hard to implement such a feature,
*assuming* there was a clear functional specification. But ...

Cheers,
Taco

From jackos1 at poczta.onet.pl  Mon Nov 14 22:07:28 2005
From: jackos1 at poczta.onet.pl (Pawel Jackowski)
Date: Mon Nov 14 22:07:39 2005
Subject: [NTG-pdftex] a dream about options
In-Reply-To: <43786C37.1090004@elvenkind.com>
References: <43779970.5060106@poczta.onet.pl> <43786C37.1090004@elvenkind.com>
Message-ID: <4378FC90.6040506@poczta.onet.pl>

Thank you guys for comments.

Hans:
> sure, but there 'new methods' pop up and or constraints disappear (mem); tex is really optimized 
> (i did lots of timing and many low level context commands and k/v handling are optimized to the max)[...]

Ye, admit I'm optimization freak and whenever trying to speed-up 
something I realise that the gain is really inconsiderable comparing 
with assignments, box-list handling, the time needed to read/write 
image/fonts data and others.

Taco:
> Using macros is somewhat less efficient than doing the same stuff in
> compiled code, but the gain is not very big, because most of the
> TeX commands that are executed have to be executed anyway (parsing
> argument texts, defining \csnames for the options).
> 
> Anyway, if you want to have a look at what I did, the code is still
> on-line:
>     
>     http://tex.aanhet.net/eetex/

Thanks for the link. I like the idea very much, especially lists 
handling. \sgmlmode is also a jewel by the way.

> I've learned to dislike the scan_keyword() stuff. It is a nightmare
> to fake these primitives in macros, and it is hard to jump over
> them in the output of \the.

I see, so that is the price...

> The thing is: it shouldn't be hard to implement such a feature,
> *assuming* there was a clear functional specification. But ...

As all eTeX features, eeTeX primitives seems not providing things not 
doable (somehow) at all in pure TeX, but make things much smooooother. I 
agree that making user allowed to define macros executed with optional 
keywords

	\fruit type {orange} diameter=8cm

just to get a sentence

	An orange is a fruit of $8cm$ in diameter.

is not enough argument to make such a big change in TeX. But if we go 
deep into document (especially PDF document!) engineering a lack of such 
possibility becomes painful. These are *keywords* that make \pdfximage 
usable in advanced applications. These are *keywords* that make \pdfobj 
usable at all!

If there are two properties of the \fruit, things are trivial, if there 
are 10 of them, we need to provide additional (probably namespace-wise) 
commands for fruit properties. In \fruit[key=val,...] convention we make 
the same silently (and we lose a chance to make \fruit expandable btw).

I'm bound to tell the reason the 'dream about options' was issued for; 
ok, not *common* but *live* example. I'm working on low-level pdfTeX 
macros for generating unusual PDFs files for prepress software testing 
(uncommon colorspaces, graphic states, horror tiling patterns and 
others). The word 'unusual' means that the macros must be pretty 
flexible, not just provide high-end interface. Deeper I'm diggig, more 
clearly I see that primitive option-scanning mechanism is necessary for 
playing with object-oriented format in its whole generality. And the 
only way I see to make definition-oriented TeX more option-oriented are 
keywords.

All the best,
-- 
Pawe/l Jackowski
P.Jackowski@gust.org.pl
From pragma at wxs.nl  Mon Nov 14 23:36:32 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Nov 14 23:36:35 2005
Subject: [NTG-pdftex] a dream about options
In-Reply-To: <4378FC90.6040506@poczta.onet.pl>
References: <43779970.5060106@poczta.onet.pl> <43786C37.1090004@elvenkind.com>
	<4378FC90.6040506@poczta.onet.pl>
Message-ID: <43791170.3010805@wxs.nl>

Pawel Jackowski wrote:

>
> I'm bound to tell the reason the 'dream about options' was issued for; 
> ok, not *common* but *live* example. I'm working on low-level pdfTeX 
> macros for generating unusual PDFs files for prepress software testing 
> (uncommon colorspaces, graphic states, horror tiling patterns and 
> others). The word 'unusual' means that the macros must be pretty 
> flexible, not just provide high-end interface. Deeper I'm diggig, more 
> clearly I see that primitive option-scanning mechanism is necessary 
> for playing with object-oriented format in its whole generality. And 
> the only way I see to make definition-oriented TeX more 
> option-oriented are keywords.

hm, all that can be done with macros; also, my guess is that a hard 
coded keyword system will not satisfy everyone since demands differ, ans 
so we end up with a lot of extra code not used by many; what i remember 
from etex discussions is that the demands were too different and getting 
insight as well as agreement over what tex should provide is pretty 
hard. So, simple features on top of which one can build interfaces is 
the way to go. In the end you need to store options in macros 
(variables) anyway, so parsing and low level interfaces remain separated 
things.

also, with respect to pdf features, it's not so much a big deal to 
support them, but given that the pdf ref manual is over 1000, any 
interface to features will end up in a configuration mess (many options, 
keywords, wierd side tracks, etc);

don't let your dream end up in a nightmare: tex is a macro language; the 
fact that pdftex has primitives with keywords has an historic origin; it 
could as well have been something:

\pdfannotwidth=.. \pdfannotheight=.. \pdfannot... \pdfannot {text}

(if you look at how more complex packages for scripting languages are 
made, you'll notice that as soon as many parameters show up, hashes are 
used if only because they can be moved around comfortably)

Hans
From martin at oneiros.de  Tue Nov 15 01:00:07 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Tue Nov 15 01:02:20 2005
Subject: [NTG-pdftex] a dream about options
In-Reply-To: <43791170.3010805@wxs.nl>
References: <43779970.5060106@poczta.onet.pl> <43786C37.1090004@elvenkind.com>
	<4378FC90.6040506@poczta.onet.pl> <43791170.3010805@wxs.nl>
Message-ID: <20051115000006.GE11743@lucien.oneiros.kn-bremen.de>

On 2005-11-14 23:36:32 +0100, Hans Hagen wrote:
> also, with respect to pdf features, it's not so much a big deal to 
> support them, but given that the pdf ref manual is over 1000, any 
> interface to features will end up in a configuration mess (many options, 
> keywords, wierd side tracks, etc);

I'm still dreaming about pdf dictionary handling in pdfTeX; this
could also be used to handle kv-pairs.

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From pragma at wxs.nl  Tue Nov 15 09:34:25 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Tue Nov 15 09:34:29 2005
Subject: [NTG-pdftex] a dream about options
In-Reply-To: <20051115000006.GE11743@lucien.oneiros.kn-bremen.de>
References: <43779970.5060106@poczta.onet.pl> <43786C37.1090004@elvenkind.com>
	<4378FC90.6040506@poczta.onet.pl> <43791170.3010805@wxs.nl>
	<20051115000006.GE11743@lucien.oneiros.kn-bremen.de>
Message-ID: <43799D91.3060505@wxs.nl>

Martin ? wrote:

>On 2005-11-14 23:36:32 +0100, Hans Hagen wrote:
>  
>
>>also, with respect to pdf features, it's not so much a big deal to 
>>support them, but given that the pdf ref manual is over 1000, any 
>>interface to features will end up in a configuration mess (many options, 
>>keywords, wierd side tracks, etc);
>>    
>>
>
>I'm still dreaming about pdf dictionary handling in pdfTeX; this
>could also be used to handle kv-pairs.
>  
>
you mean access to dictionaries (involving parsing) ?

Hans

From hartmut_henkel at gmx.de  Tue Nov 15 18:40:56 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Tue Nov 15 18:41:08 2005
Subject: [NTG-pdftex] a dream about options
In-Reply-To: <43799D91.3060505@wxs.nl>
References: <43779970.5060106@poczta.onet.pl> <43786C37.1090004@elvenkind.com>
	<4378FC90.6040506@poczta.onet.pl> <43791170.3010805@wxs.nl>
	<20051115000006.GE11743@lucien.oneiros.kn-bremen.de>
	<43799D91.3060505@wxs.nl>
Message-ID: <Pine.LNX.4.61.0511151836040.3978@hahepc1.hahe>

On Tue, 15 Nov 2005, Hans Hagen wrote:

> Martin  wrote:
>
> > On 2005-11-14 23:36:32 +0100, Hans Hagen wrote:
> >
> > > also, with respect to pdf features, it's not so much a big deal to
> > > support them, but given that the pdf ref manual is over 1000, any
> > > interface to features will end up in a configuration mess (many
> > > options, keywords, wierd side tracks, etc);
> >
> > I'm still dreaming about pdf dictionary handling in pdfTeX; this
> > could also be used to handle kv-pairs.
> >
> you mean access to dictionaries (involving parsing) ?

xpdf obviously has these features under the hood, accessible by pdftex.
Problem is to get xpdf parsing a string instead of a file. Bernd Raichle
told me a few months ago that C++ "string-streams" can be used in
principle to feed a string into the parser like a file. But i didn't try
it yet, have not much, if any, C++ experience.

Regards, Hartmut
From martin at oneiros.de  Tue Nov 15 18:59:24 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Tue Nov 15 19:06:55 2005
Subject: [NTG-pdftex] a dream about options
In-Reply-To: <43799D91.3060505@wxs.nl>
References: <43779970.5060106@poczta.onet.pl> <43786C37.1090004@elvenkind.com>
	<4378FC90.6040506@poczta.onet.pl> <43791170.3010805@wxs.nl>
	<20051115000006.GE11743@lucien.oneiros.kn-bremen.de>
	<43799D91.3060505@wxs.nl>
Message-ID: <20051115175924.GA23011@lucien.oneiros.kn-bremen.de>

On 2005-11-15 09:34:25 +0100, Hans Hagen wrote:
> Martin ??? wrote:
         ^^^ :-{
> >I'm still dreaming about pdf dictionary handling in pdfTeX; this
> >could also be used to handle kv-pairs.
> >
> you mean access to dictionaries (involving parsing) ?

Yes. But also as a high-level data structure in macros.

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From taco at elvenkind.com  Thu Nov 17 09:31:19 2005
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu Nov 17 09:30:50 2005
Subject: [NTG-pdftex] Re: [dev-context] Re: \showskips bug
In-Reply-To: <437BAF95.7000409@wxs.nl>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl>
Message-ID: <437C3FD7.9070000@elvenkind.com>



Hans Hagen wrote:
>> That's fixed, a while back. my pdfetex now quitted at
>>
>>   [94729] [94730] [94731] [94732] [94733] [94734] [94735] [94736
>>   ! TeX capacity exceeded, sorry [indirect objects table size=300000].
>>   <output> {\shipout \box 255
>>                             \global \advance \pageno 1 \unhbox 255 }
>>   <to be read again>
>>                    \end
>>   l.3 \bye
>>
>>   !  ==> Fatal error occurred, the output PDF file is not finished!
>>   Transcript written on out.log.
>>
>> After a minute or two.
> 
> ah, so in practice it will quit earlier depending on other objects used 
> (i'm not sure if for instance objects of included graphics use that 
> piece of memory)

This is mostly the required page objects. 3 objects are used per actual
(totally empty) page:

   13 0 obj << /Length 0 >> stream endstream endobj
   12 0 obj << /Type /Page /Contents 13 0 R /Resources 11 0 R
               /MediaBox [0 0 595.2756 841.8898] /Parent 7 0 R >> endobj
   11 0 obj << /ProcSet [ /PDF ] >> endobj

It is a bit wasteful to keep those in the indirects objects table
for ever and onwards, but I am not sure if it is doable to flush
them right away. (CC ntg-pdftex)

Greetings, Taco


From pragma at wxs.nl  Thu Nov 17 09:45:06 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Nov 17 09:45:10 2005
Subject: [NTG-pdftex] Re: [dev-context] Re: \showskips bug
In-Reply-To: <437C3FD7.9070000@elvenkind.com>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
Message-ID: <437C4312.90607@wxs.nl>

Taco Hoekwater wrote:

>
>
> Hans Hagen wrote:
>
>>> That's fixed, a while back. my pdfetex now quitted at
>>>
>>>   [94729] [94730] [94731] [94732] [94733] [94734] [94735] [94736
>>>   ! TeX capacity exceeded, sorry [indirect objects table size=300000].
>>>   <output> {\shipout \box 255
>>>                             \global \advance \pageno 1 \unhbox 255 }
>>>   <to be read again>
>>>                    \end
>>>   l.3 \bye
>>>
>>>   !  ==> Fatal error occurred, the output PDF file is not finished!
>>>   Transcript written on out.log.
>>>
>>> After a minute or two.
>>
>>
>> ah, so in practice it will quit earlier depending on other objects 
>> used (i'm not sure if for instance objects of included graphics use 
>> that piece of memory)
>
>
> This is mostly the required page objects. 3 objects are used per actual
> (totally empty) page:
>
>   13 0 obj << /Length 0 >> stream endstream endobj
>   12 0 obj << /Type /Page /Contents 13 0 R /Resources 11 0 R
>               /MediaBox [0 0 595.2756 841.8898] /Parent 7 0 R >> endobj
>   11 0 obj << /ProcSet [ /PDF ] >> endobj
>
> It is a bit wasteful to keep those in the indirects objects table
> for ever and onwards, but I am not sure if it is doable to flush
> them right away. (CC ntg-pdftex)

well, the procset is obsolete anyway, so that could save one object already

Hans

From martin at oneiros.de  Thu Nov 17 10:46:51 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Nov 17 11:27:51 2005
Subject: Optimizing the generated pdf (was: [NTG-pdftex] Re: [dev-context] Re:
	\showskips bug)
In-Reply-To: <437C3FD7.9070000@elvenkind.com>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
Message-ID: <20051117094651.GA9888@lucien.oneiros.kn-bremen.de>

On 2005-11-17 09:31:19 +0100, Taco Hoekwater wrote:
> This is mostly the required page objects. 3 objects are used per actual
> (totally empty) page:
> 
>   13 0 obj << /Length 0 >> stream endstream endobj

This one is even longer with compresslevel > 0. It would be nice
to not compress empty streams, but I think that would be too
difficult to implement and isn't needed very often.

>   12 0 obj << /Type /Page /Contents 13 0 R /Resources 11 0 R
>               /MediaBox [0 0 595.2756 841.8898] /Parent 7 0 R >> endobj
>   11 0 obj << /ProcSet [ /PDF ] >> endobj

And 11 and 13 are created for every page. :-(

11 could simply be empty (or null) for empty pages. Looking at
<Write out page object@>, it doesn't seem too difficult to
optimize for empty Resources. Of course, the question is: How
often do we have empty /Resources? Normally they at least have a
/Font entry.

If we start optimizations like these, it would be nice to move
the /MediaBox to the root object (or pages) and write it only for
different-sized pages (Hans: ConTeXt writes /TrimBox and /CropBox
on every page (even if they are allways the same); adding them to
pdfpagesattr instead would save quite some space -- look at
pdftex-a.pdf).

> It is a bit wasteful to keep those in the indirects objects table
> for ever and onwards, but I am not sure if it is doable to flush
> them right away. (CC ntg-pdftex)

I don't think that optimizations like these are generally usefull
as they are seldom needed and make the code more complex. When I
look at a typical result of ConTeXt or hyperref, they seem
unneeded.

Btw: Is there a tool that compresses a pdf by replacing identical
objects with references?

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From pragma at wxs.nl  Thu Nov 17 11:39:06 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Nov 17 11:39:09 2005
Subject: [NTG-pdftex] Re: Optimizing the generated pdf
In-Reply-To: <20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
Message-ID: <437C5DCA.6000202@wxs.nl>

Martin ? wrote:

>On 2005-11-17 09:31:19 +0100, Taco Hoekwater wrote:
>  
>
>>This is mostly the required page objects. 3 objects are used per actual
>>(totally empty) page:
>>
>>  13 0 obj << /Length 0 >> stream endstream endobj
>>    
>>
>
>This one is even longer with compresslevel > 0. It would be nice
>to not compress empty streams, but I think that would be too
>difficult to implement and isn't needed very often.
>
>  
>
couldn't that be a null object then ?

>>  12 0 obj << /Type /Page /Contents 13 0 R /Resources 11 0 R
>>              /MediaBox [0 0 595.2756 841.8898] /Parent 7 0 R >> endobj
>>  11 0 obj << /ProcSet [ /PDF ] >> endobj
>>    
>>
>
>And 11 and 13 are created for every page. :-(
>
>11 could simply be empty (or null) for empty pages. Looking at
><Write out page object@>, it doesn't seem too difficult to
>optimize for empty Resources. Of course, the question is: How
>often do we have empty /Resources? Normally they at least have a
>/Font entry.
>
>If we start optimizations like these, it would be nice to move
>the /MediaBox to the root object (or pages) and write it only for
>different-sized pages (Hans: ConTeXt writes /TrimBox and /CropBox
>on every page (even if they are allways the same); adding them to
>pdfpagesattr instead would save quite some space -- look at
>pdftex-a.pdf).
>
>  
>
context can have mixed page sized in one document (which i need -)

>>It is a bit wasteful to keep those in the indirects objects table
>>for ever and onwards, but I am not sure if it is doable to flush
>>them right away. (CC ntg-pdftex)
>>    
>>
>
>I don't think that optimizations like these are generally usefull
>as they are seldom needed and make the code more complex. When I
>look at a typical result of ConTeXt or hyperref, they seem
>unneeded.
>  
>
indeed; we can have a 'nice to-do' list for that; however, i think that 
the procset can safely be removed (not used by viewers anyway)

>Btw: Is there a tool that compresses a pdf by replacing identical
>objects with references?
>  
>
acrobat professional?

in pdftex it would mean calculating a checksum for each object before 
flushing it; it may slow down things a bit

Hans

Hans
From taco at elvenkind.com  Thu Nov 17 11:59:25 2005
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu Nov 17 11:58:55 2005
Subject: [NTG-pdftex] Re: Optimizing the generated pdf
In-Reply-To: <20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
References: <437B84E7.3010500@elvenkind.com>
	<m2y83o5lx5.fsf@levana.de>	<437BA83D.3030803@wxs.nl>
	<437BADEC.2060702@elvenkind.com>	<437BAF95.7000409@wxs.nl>
	<437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
Message-ID: <437C628D.8000304@elvenkind.com>



Martin Schr?der wrote:
>>It is a bit wasteful to keep those in the indirects objects table
>>for ever and onwards, but I am not sure if it is doable to flush
>>them right away. (CC ntg-pdftex)
> 
> I don't think that optimizations like these are generally usefull
> as they are seldom needed and make the code more complex. When I
> look at a typical result of ConTeXt or hyperref, they seem
> unneeded.

I wasn't worried about the actual objects/pdf file size, but about
the space they take up in the indirect objects table, thereby
indirectly limiting the total page length of a PDF document. Are
there no objects that can simply be flushed to the file and then
forgotten about? Huge page runs are not that unusual in database
publishing.

Greetings,
Taco
From martin at oneiros.de  Thu Nov 17 12:01:46 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Nov 17 12:30:28 2005
Subject: [NTG-pdftex] Re: Optimizing the generated pdf
In-Reply-To: <20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
Message-ID: <20051117110146.GD9888@lucien.oneiros.kn-bremen.de>

On 2005-11-17 10:46:51 +0100, Martin Schr?der wrote:
> Btw: Is there a tool that compresses a pdf by replacing identical
> objects with references?

pdfTeX could do this by itself: Store the md5 of the shortest n
objects (e.g. n = 1024) smaller then x bytes (e.g. x = 1024,
longer objects will typically be unique) and replace new
identical objects with references to the already existing ones.

This would e.g. condense all the 
obj <</S /GoTo /D [n 0 R /Fit]>> endobj
in the pdfTeX manual. :-)

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From martin at oneiros.de  Thu Nov 17 11:39:30 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Nov 17 12:30:29 2005
Subject: [NTG-pdftex] /ProcSet (was: \showskips bug)
In-Reply-To: <437C4312.90607@wxs.nl>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
	<437C4312.90607@wxs.nl>
Message-ID: <20051117103930.GC9888@lucien.oneiros.kn-bremen.de>

On 2005-11-17 09:45:06 +0100, Hans Hagen wrote:
> well, the procset is obsolete anyway, so that could save one object already

It should still be written, says the reference. :-}

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From martin at oneiros.de  Thu Nov 17 12:49:15 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Nov 17 12:56:04 2005
Subject: [NTG-pdftex] Re: Optimizing the generated pdf
In-Reply-To: <437C5DCA.6000202@wxs.nl>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
	<437C5DCA.6000202@wxs.nl>
Message-ID: <20051117114915.GG9888@lucien.oneiros.kn-bremen.de>

On 2005-11-17 11:39:06 +0100, Hans Hagen wrote:
> Martin ??? wrote:
         ^^^ :-(((
> >If we start optimizations like these, it would be nice to move
> >the /MediaBox to the root object (or pages) and write it only for
> >different-sized pages (Hans: ConTeXt writes /TrimBox and /CropBox
> >on every page (even if they are allways the same); adding them to
> >pdfpagesattr instead would save quite some space -- look at
> >pdftex-a.pdf).
> >
> context can have mixed page sized in one document (which i need -)

Of course. But typical documents have one page size. Write the
default in pdfpagesattr and only differences in pdfpageattr.

[...]

> >Btw: Is there a tool that compresses a pdf by replacing identical
> >objects with references?
> > 
> acrobat professional?

cmdline on Linux, please.

> in pdftex it would mean calculating a checksum for each object before 
> flushing it; it may slow down things a bit

Not much.

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From martin at oneiros.de  Thu Nov 17 12:46:06 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Nov 17 12:56:06 2005
Subject: [NTG-pdftex] Re: Optimizing the generated pdf
In-Reply-To: <437C628D.8000304@elvenkind.com>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
	<437C628D.8000304@elvenkind.com>
Message-ID: <20051117114606.GF9888@lucien.oneiros.kn-bremen.de>

On 2005-11-17 11:59:25 +0100, Taco Hoekwater wrote:
> I wasn't worried about the actual objects/pdf file size, but about
> the space they take up in the indirect objects table, thereby
> indirectly limiting the total page length of a PDF document. Are

One needs a suitable large obj_tab_size; I set that to the max
(2^23) for ArtCom (and yes, we had included pages with >2^16
objects). :-)

> there no objects that can simply be flushed to the file and then
> forgotten about? Huge page runs are not that unusual in database

Probably. But look at how the /GoTo objects are written and used:
Written at the start and used at the end. :-(

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From pragma at wxs.nl  Thu Nov 17 13:03:29 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Nov 17 13:03:35 2005
Subject: [NTG-pdftex] Re: Optimizing the generated pdf
In-Reply-To: <20051117110146.GD9888@lucien.oneiros.kn-bremen.de>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
	<20051117110146.GD9888@lucien.oneiros.kn-bremen.de>
Message-ID: <437C7191.9000208@wxs.nl>

Martin ? wrote:

>On 2005-11-17 10:46:51 +0100, Martin Schr?der wrote:
>  
>
>>Btw: Is there a tool that compresses a pdf by replacing identical
>>objects with references?
>>    
>>
>
>pdfTeX could do this by itself: Store the md5 of the shortest n
>objects (e.g. n = 1024) smaller then x bytes (e.g. x = 1024,
>longer objects will typically be unique) and replace new
>identical objects with references to the already existing ones.
>
>This would e.g. condense all the 
>obj <</S /GoTo /D [n 0 R /Fit]>> endobj
>in the pdfTeX manual. :-)
>
>  
>

such a feature makes sense indeed; maybe even configurable:

\pdfshareobjsize=1024 % with 0 meaning no checking done

(that way we can experiment)

Hans
From hartmut_henkel at gmx.de  Thu Nov 17 18:27:48 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu Nov 17 18:27:54 2005
Subject: [NTG-pdftex] Re: [dev-context] Re: \showskips bug
In-Reply-To: <437C3FD7.9070000@elvenkind.com>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
Message-ID: <Pine.LNX.4.61.0511171823350.3929@hahepc1.hahe>

On Thu, 17 Nov 2005, Taco Hoekwater wrote:

> Hans Hagen wrote:
> > > That's fixed, a while back. my pdfetex now quitted at
> > >
> > >   [94729] [94730] [94731] [94732] [94733] [94734] [94735] [94736
> > >   ! TeX capacity exceeded, sorry [indirect objects table size=300000].

after patch 386 one won't need to care for this mem anymore as it would
grow dynamically up to size=10.000.000. Then such an error would happen
only in really extreme cases.

Regards, Hartmut
From pragma at wxs.nl  Thu Nov 17 18:32:13 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Nov 17 18:32:17 2005
Subject: [NTG-pdftex] Re: [dev-context] Re: \showskips bug
In-Reply-To: <Pine.LNX.4.61.0511171823350.3929@hahepc1.hahe>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
	<Pine.LNX.4.61.0511171823350.3929@hahepc1.hahe>
Message-ID: <437CBE9D.50300@wxs.nl>

Hartmut Henkel wrote:

>after patch 386 one won't need to care for this mem anymore as it would
>grow dynamically up to size=10.000.000. Then such an error would happen
>only in really extreme cases.
>  
>
don't challenge taco -)

Hans

From hartmut_henkel at gmx.de  Thu Nov 17 18:46:58 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu Nov 17 18:47:02 2005
Subject: [NTG-pdftex] Re: Optimizing the generated pdf
In-Reply-To: <437C7191.9000208@wxs.nl>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
	<20051117110146.GD9888@lucien.oneiros.kn-bremen.de>
	<437C7191.9000208@wxs.nl>
Message-ID: <Pine.LNX.4.61.0511171833030.3966@hahepc1.hahe>

On Thu, 17 Nov 2005, Hans Hagen wrote:

> Martin  wrote:
>
> > On 2005-11-17 10:46:51 +0100, Martin Schrder wrote:
> >
> > > Btw: Is there a tool that compresses a pdf by replacing identical
> > > objects with references?
> >
> > pdfTeX could do this by itself: Store the md5 of the shortest n
> > objects (e.g. n = 1024) smaller then x bytes (e.g. x = 1024, longer
> > objects will typically be unique) and replace new identical objects
> > with references to the already existing ones.

i won't want to rely on md5 alone (shit happens). Finally one needs a
literal comparison. And when the object is gone, it's nasty to seek
around in the PDF file.

> > This would e.g. condense all the obj <</S /GoTo /D [n 0 R /Fit]>>
> > endobj in the pdfTeX manual. :-)

if it's enough to scan the last say 100 non-stream objects: this can be
done, at least it would catch these next to each other similar objects.
Maybe MD5 would be overkill, just a hash + comparison would be ok. As it
happens, these non-streams are collected in a separate buffer here
before being written out. Let's see...

> such a feature makes sense indeed; maybe even configurable:
>
> \pdfshareobjsize=1024 % with 0 meaning no checking done

would fit in this case.

Regards, Hartmut


------------------------------------------------------------------------
Dr.-Ing. Hartmut Henkel
In den Auwiesen 6, D-68723 Oftersheim, Germany
E-Mail: hartmut_henkel@gmx.de
http://www.circuitwizard.de
------------------------------------------------------------------------
From martin at oneiros.de  Thu Nov 17 18:31:55 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Nov 17 19:02:49 2005
Subject: [NTG-pdftex] fix_int() corrections
In-Reply-To: <43786560.2000109@wxs.nl>
References: <Pine.LNX.4.61.0511132148060.14230@hahepc1.hahe>
	<20051114020050.GA3021@monty.localnet> <43786560.2000109@wxs.nl>
Message-ID: <20051117173155.GN9888@lucien.oneiros.kn-bremen.de>

On 2005-11-14 11:22:24 +0100, Hans Hagen wrote:
> The Thanh Han wrote:
> >btw, doesn't it make sense to release a new beta version
> >with all the patches by Hartmut and other? The patch I
> >uploaded still has some problems so I need to fix them
> >first, it can wait for a while.
> > 
> >
> best wait a few weeks (till tex live is frozen and published)

Last I heard the image is finished. And anyway -- they won't use
our beta.

I'll do a 1.40-beta soon.

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From oberdiek at uni-freiburg.de  Fri Nov 18 23:16:31 2005
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Fri Nov 18 23:35:31 2005
Subject: [NTG-pdftex] Re: Optimizing the generated pdf
In-Reply-To: <Pine.LNX.4.61.0511171833030.3966@hahepc1.hahe>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
	<20051117110146.GD9888@lucien.oneiros.kn-bremen.de>
	<437C7191.9000208@wxs.nl>
	<Pine.LNX.4.61.0511171833030.3966@hahepc1.hahe>
Message-ID: <20051118221631.GB3531@irwin.vpn.uni-freiburg.de>

On Thu, Nov 17, 2005 at 06:46:58PM +0100, Hartmut Henkel wrote:

> On Thu, 17 Nov 2005, Hans Hagen wrote:
> 
> > Martin  wrote:
> >
> > > On 2005-11-17 10:46:51 +0100, Martin Schrder wrote:
> > >
> > > > Btw: Is there a tool that compresses a pdf by replacing identical
> > > > objects with references?
> > >
> > > pdfTeX could do this by itself: Store the md5 of the shortest n
> > > objects (e.g. n = 1024) smaller then x bytes (e.g. x = 1024, longer
> > > objects will typically be unique) and replace new identical objects
> > > with references to the already existing ones.
> 
> i won't want to rely on md5 alone (shit happens). Finally one needs a
> literal comparison.

I agree.

> And when the object is gone, it's nasty to seek
> around in the PDF file.

The position and length of the objects could be stored in memory.

> > > This would e.g. condense all the obj <</S /GoTo /D [n 0 R /Fit]>>
> > > endobj in the pdfTeX manual. :-)
> 
> if it's enough to scan the last say 100 non-stream objects: this can be
> done, at least it would catch these next to each other similar objects.

The matches of "similar" objects can be increased by normalization:
* Removal of unnecessary spaces.
* Ordering of dictionary keys.
* Normalization of strings and names.

Disadvantage: parsing of pdf objects would be necessary.

> Maybe MD5 would be overkill, just a hash + comparison would be ok.

Yes.

Yours sincerely
  Heiko <oberdiek@uni-freiburg.de>
-- 
From oberdiek at uni-freiburg.de  Fri Nov 18 23:08:15 2005
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Fri Nov 18 23:35:36 2005
Subject: [NTG-pdftex] Re: Optimizing the generated pdf
In-Reply-To: <437C5DCA.6000202@wxs.nl>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
	<437C5DCA.6000202@wxs.nl>
Message-ID: <20051118220814.GA3531@irwin.vpn.uni-freiburg.de>

On Thu, Nov 17, 2005 at 11:39:06AM +0100, Hans Hagen wrote:

> Martin ??? wrote:
> 
> >On 2005-11-17 09:31:19 +0100, Taco Hoekwater wrote:
> > 
> >
> >>This is mostly the required page objects. 3 objects are used per actual
> >>(totally empty) page:
> >>
> >> 13 0 obj << /Length 0 >> stream endstream endobj
> >>   
> >>
> >
> >This one is even longer with compresslevel > 0. It would be nice
> >to not compress empty streams, but I think that would be too
> >difficult to implement and isn't needed very often.

I think this is the task of a separate optimizer that tries
different compression methods and chooses the best one.

> couldn't that be a null object then ?
> 
> >> 12 0 obj << /Type /Page /Contents 13 0 R /Resources 11 0 R
> >>             /MediaBox [0 0 595.2756 841.8898] /Parent 7 0 R >> endobj
> >> 11 0 obj << /ProcSet [ /PDF ] >> endobj
> >>   
> >>
> >
> >And 11 and 13 are created for every page. :-(
> >
> >11 could simply be empty (or null) for empty pages. Looking at
> ><Write out page object@>, it doesn't seem too difficult to
> >optimize for empty Resources. Of course, the question is: How
> >often do we have empty /Resources? Normally they at least have a
> >/Font entry.
> >
> >If we start optimizations like these, it would be nice to move
> >the /MediaBox to the root object (or pages) and write it only for
> >different-sized pages (Hans: ConTeXt writes /TrimBox and /CropBox
> >on every page (even if they are allways the same); adding them to
> >pdfpagesattr instead would save quite some space -- look at
> >pdftex-a.pdf).
> >
> > 
> >
> context can have mixed page sized in one document (which i need -)

Does not a standard exist that forbids inherited properties and
requires the setting of /MediaBox in each page object?

> >>It is a bit wasteful to keep those in the indirects objects table
> >>for ever and onwards, but I am not sure if it is doable to flush
> >>them right away. (CC ntg-pdftex)
> >>   
> >>
> >
> >I don't think that optimizations like these are generally usefull
> >as they are seldom needed and make the code more complex. When I
> >look at a typical result of ConTeXt or hyperref, they seem
> >unneeded.
> > 
> >
> indeed; we can have a 'nice to-do' list for that; however, i think that 
> the procset can safely be removed (not used by viewers anyway)
> 
> >Btw: Is there a tool that compresses a pdf by replacing identical
> >objects with references?
> > 
> >
> acrobat professional?
> 
> in pdftex it would mean calculating a checksum for each object before 
> flushing it; it may slow down things a bit

And it is a partial optimization only. Example: Same images with
a color table as separate object. In the first pass, the
identical color table objects are detected and replaced by one
object. Then the images itself contain the same reference to the
color table object and become identical and optimized in the
second run.
But also identical cyclic structures are possible ...

I think, the job of pdfTeX is to generate PDF. Optimization is
the job of another program, before there are too many things
to consider:
New compression features of newer PDF versions: compressed
cross-ref table, compressed object streams, filters before
applying compression, ...

Yours sincerely
  Heiko <oberdiek@uni-freiburg.de>
-- 
From hartmut_henkel at gmx.de  Sat Nov 19 00:50:03 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sat Nov 19 00:50:10 2005
Subject: [NTG-pdftex] Re: Optimizing the generated pdf
In-Reply-To: <20051118221631.GB3531@irwin.vpn.uni-freiburg.de>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
	<20051117110146.GD9888@lucien.oneiros.kn-bremen.de>
	<437C7191.9000208@wxs.nl>
	<Pine.LNX.4.61.0511171833030.3966@hahepc1.hahe>
	<20051118221631.GB3531@irwin.vpn.uni-freiburg.de>
Message-ID: <Pine.LNX.4.61.0511190027220.6705@hahepc1.hahe>

On Fri, 18 Nov 2005, Heiko Oberdiek wrote:

> On Thu, Nov 17, 2005 at 06:46:58PM +0100, Hartmut Henkel wrote:
>
> > And when the object is gone, it's nasty to seek around in the PDF
> > file.
>
> The position and length of the objects could be stored in memory.

yes. But this would imply you would search in the written file, which is
slow, i believe, but can be done.

Against this might also be that it seems that the only reason why pdftex
currently can't write the PDF to stdout is that it has to seek and write
the /Length. Are there other places where it backs up? So if we could
get rid of this only (?) seek (without writing a separate /Length
object) e. g. by buffering the streams in the memory (which should be
harmless, given the current memory sizes), we would gain the stdout
writing capability. Any additional file seek brings us more away from
there. Ok, one can live without stdout writing :-)

> > > > This would e.g. condense all the obj <</S /GoTo /D [n 0 R
> > > > /Fit]>> endobj in the pdfTeX manual. :-)
> >
> > if it's enough to scan the last say 100 non-stream objects: this can
> > be done, at least it would catch these next to each other similar
> > objects.
>
> The matches of "similar" objects can be increased by normalization:
> * Removal of unnecessary spaces.
> * Ordering of dictionary keys.
> * Normalization of strings and names.

Yes. As a tiny start, maybe we should remove all redundant spaces like
in "/Type /Page" (a tip from this Fat PDF paper).

> Disadvantage: parsing of pdf objects would be necessary.

maybe one can use xpdf for this...

> > Maybe MD5 would be overkill, just a hash + comparison would be ok.
>
> Yes.

Not even a need to make it perfect (like hash with list). If it brings
down the duplicates to 1% or 10% it would be ok...

Regards, Hartmut
From martin at oneiros.de  Sat Nov 19 01:21:34 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Sat Nov 19 12:30:14 2005
Subject: [NTG-pdftex] Re: Optimizing the generated pdf
In-Reply-To: <20051118220814.GA3531@irwin.vpn.uni-freiburg.de>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
	<437C5DCA.6000202@wxs.nl>
	<20051118220814.GA3531@irwin.vpn.uni-freiburg.de>
Message-ID: <20051119002133.GD27055@lucien.oneiros.kn-bremen.de>

On 2005-11-18 23:08:15 +0100, Heiko Oberdiek wrote:
> On Thu, Nov 17, 2005 at 11:39:06AM +0100, Hans Hagen wrote:
> Does not a standard exist that forbids inherited properties and
> requires the setting of /MediaBox in each page object?

No, /MediaBox is inheritable.

[...]

> I think, the job of pdfTeX is to generate PDF. Optimization is
> the job of another program, before there are too many things

I agree: E.g. it would be an interesting extension for pdftk.

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From oberdiek at uni-freiburg.de  Sun Nov 20 14:01:15 2005
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Sun Nov 20 14:01:40 2005
Subject: [NTG-pdftex] Re: Optimizing the generated pdf
In-Reply-To: <20051119002133.GD27055@lucien.oneiros.kn-bremen.de>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
	<437C5DCA.6000202@wxs.nl>
	<20051118220814.GA3531@irwin.vpn.uni-freiburg.de>
	<20051119002133.GD27055@lucien.oneiros.kn-bremen.de>
Message-ID: <20051120130114.GA12161@irwin.vpn.uni-freiburg.de>

On Sat, Nov 19, 2005 at 01:21:34AM +0100, Martin Schr?der wrote:

> On 2005-11-18 23:08:15 +0100, Heiko Oberdiek wrote:
> > On Thu, Nov 17, 2005 at 11:39:06AM +0100, Hans Hagen wrote:
> > Does not a standard exist that forbids inherited properties and
> > requires the setting of /MediaBox in each page object?
> 
> No, /MediaBox is inheritable.

I am not talking about PDF. What about PDF/X?

Yours sincerely
  Heiko <oberdiek@uni-freiburg.de>
-- 
From martin at oneiros.de  Sun Nov 20 15:45:35 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Sun Nov 20 19:03:16 2005
Subject: [NTG-pdftex] MediaBox inheritable in PDF/X (was: Optimizing the
	generated pdf)
In-Reply-To: <20051120130114.GA12161@irwin.vpn.uni-freiburg.de>
References: <m2y83o5lx5.fsf@levana.de> <437BA83D.3030803@wxs.nl>
	<437BADEC.2060702@elvenkind.com> <437BAF95.7000409@wxs.nl>
	<437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
	<437C5DCA.6000202@wxs.nl>
	<20051118220814.GA3531@irwin.vpn.uni-freiburg.de>
	<20051119002133.GD27055@lucien.oneiros.kn-bremen.de>
	<20051120130114.GA12161@irwin.vpn.uni-freiburg.de>
Message-ID: <20051120144535.GA10701@lucien.oneiros.kn-bremen.de>

On 2005-11-20 14:01:15 +0100, Heiko Oberdiek wrote:
> On Sat, Nov 19, 2005 at 01:21:34AM +0100, Martin Schr?der wrote:
> > No, /MediaBox is inheritable.
> 
> I am not talking about PDF. What about PDF/X?

I don't know (I don't have the standard) and I can't test.

Can somebody confirm this?

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From jackos1 at poczta.onet.pl  Sun Nov 20 19:44:44 2005
From: jackos1 at poczta.onet.pl (Pawel Jackowski)
Date: Sun Nov 20 19:45:25 2005
Subject: [NTG-pdftex] MediaBox inheritable in PDF/X
In-Reply-To: <20051120144535.GA10701@lucien.oneiros.kn-bremen.de>
References: <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl>	<437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl>	<437C3FD7.9070000@elvenkind.com>	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>	<437C5DCA.6000202@wxs.nl>	<20051118220814.GA3531@irwin.vpn.uni-freiburg.de>	<20051119002133.GD27055@lucien.oneiros.kn-bremen.de>	<20051120130114.GA12161@irwin.vpn.uni-freiburg.de>
	<20051120144535.GA10701@lucien.oneiros.kn-bremen.de>
Message-ID: <4380C41C.5020406@poczta.onet.pl>


>>>No, /MediaBox is inheritable.

>>I am not talking about PDF. What about PDF/X?

> I don't know (I don't have the standard) and I can't test.
> 
> Can somebody confirm this?

Version 3 says nothing about inheritance (see quoted below). I'll try to 
get the newest PDF/X spec. However, some apps may treat inherited boxes 
different; afaik Acrobat don't display boxes if inherited from /Pages -)

#### PDF/X-3:2002

"_2.9 Box usage and management_

The inclusion of the bounding boxes as specified in Portable Document 
Format Reference Manual, Version 1.3, Second Edition, is a required 
operation in the process of creating a PDF/X file. For all PDF files, 
the MediaBox is required. Additionally, each PDF/X page shall include 
either an ArtBox or TrimBox, but not both. The inclusion of a BleedBox 
is optional. If a BleedBox is present, neither the ArtBox nor the 
TrimBox may extend beyond the boundaries of the BleedBox.
In the case where the CropBox is present, neither the ArtBox nor the 
TrimBox may extend beyond the boundaries of the CropBox.
The bounding boxes may be used by PDF/X-compliant pagination 
applications to automatically position the file in a predetermined space 
within a layout construct. Within some industry workflows, both the 
BleedBox and TrimBox are necessary. For example, commercial, 
non-newspaper printing may include large numbers of pages containing 
bleed and trim information. It is important that boxes that represent 
this information be included. The accurate inclusion of the BleedBox and 
TrimBox will allow for the correct portion of the file to be imposed and 
rendered, and appropriate automation to be applied.
NOTE: The use of TrimBox is recommended in preference to ArtBox."

-- 
Pawe/l Jackowski
P.Jackowski@gust.org.pl
From oberdiek at uni-freiburg.de  Sun Nov 20 20:26:05 2005
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Sun Nov 20 20:35:22 2005
Subject: [NTG-pdftex] MediaBox inheritable in PDF/X (was: Optimizing the
	generated pdf)
In-Reply-To: <20051120144535.GA10701@lucien.oneiros.kn-bremen.de>
References: <437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
	<437C5DCA.6000202@wxs.nl>
	<20051118220814.GA3531@irwin.vpn.uni-freiburg.de>
	<20051119002133.GD27055@lucien.oneiros.kn-bremen.de>
	<20051120130114.GA12161@irwin.vpn.uni-freiburg.de>
	<20051120144535.GA10701@lucien.oneiros.kn-bremen.de>
Message-ID: <20051120192605.GA16620@irwin.vpn.uni-freiburg.de>

On Sun, Nov 20, 2005 at 03:45:35PM +0100, Martin Schr?der wrote:

> On 2005-11-20 14:01:15 +0100, Heiko Oberdiek wrote:
> > On Sat, Nov 19, 2005 at 01:21:34AM +0100, Martin Schr?der wrote:
> > > No, /MediaBox is inheritable.
> > 
> > I am not talking about PDF. What about PDF/X?
> 
> I don't know (I don't have the standard) and I can't test.

I haven't found it either.

Now I have looked in old mails, probably I remembered
linearized PDF:

| F.2.6
| ... This page object must explicitly specify all required
| attributes, such as Resources and MediaBox; the attributes
| cannot be inherited from ancestor page tree nodes.
| ...
|
| F.2.9
| ... Note that all Resources attributes and other inheritable
| attributes of the page object must be pushed down and replicated
| in each of the leaf page objects (but they may contain indirect
| references to shared objects).

But I don't think that pdfTeX wants to generate linearized PDF,
thus "non-inheritence" is probably not an issue.

Yours sincerely
  Heiko <oberdiek@uni-freiburg.de>
-- 
From martin at oneiros.de  Sun Nov 20 23:39:49 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Sun Nov 20 23:49:15 2005
Subject: [NTG-pdftex] MediaBox inheritable in PDF/X
In-Reply-To: <20051120192605.GA16620@irwin.vpn.uni-freiburg.de>
References: <437BADEC.2060702@elvenkind.com> <437BAF95.7000409@wxs.nl>
	<437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
	<437C5DCA.6000202@wxs.nl>
	<20051118220814.GA3531@irwin.vpn.uni-freiburg.de>
	<20051119002133.GD27055@lucien.oneiros.kn-bremen.de>
	<20051120130114.GA12161@irwin.vpn.uni-freiburg.de>
	<20051120144535.GA10701@lucien.oneiros.kn-bremen.de>
	<20051120192605.GA16620@irwin.vpn.uni-freiburg.de>
Message-ID: <20051120223949.GB14373@lucien.oneiros.kn-bremen.de>

On 2005-11-20 20:26:05 +0100, Heiko Oberdiek wrote:
> But I don't think that pdfTeX wants to generate linearized PDF,

No, linearizing PDF is too complicated for pdfTeX; let's leave it
to specialized applications (like pdfopt or pdftk).

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From martin at oneiros.de  Sun Nov 20 23:47:42 2005
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Sun Nov 20 23:49:28 2005
Subject: [NTG-pdftex] MediaBox inheritable in PDF/X
In-Reply-To: <4380C41C.5020406@poczta.onet.pl>
References: <437BADEC.2060702@elvenkind.com> <437BAF95.7000409@wxs.nl>
	<437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
	<437C5DCA.6000202@wxs.nl>
	<20051118220814.GA3531@irwin.vpn.uni-freiburg.de>
	<20051119002133.GD27055@lucien.oneiros.kn-bremen.de>
	<20051120130114.GA12161@irwin.vpn.uni-freiburg.de>
	<20051120144535.GA10701@lucien.oneiros.kn-bremen.de>
	<4380C41C.5020406@poczta.onet.pl>
Message-ID: <20051120224742.GC14373@lucien.oneiros.kn-bremen.de>

On 2005-11-20 19:44:44 +0100, Pawel Jackowski wrote:
> Version 3 says nothing about inheritance (see quoted below). I'll try to 
> get the newest PDF/X spec. However, some apps may treat inherited boxes 
> different; afaik Acrobat don't display boxes if inherited from /Pages -)

I just reread the 1.6 spec (section 3.6.2):
- /MediaBox is required, and inheritable
- /CropBox is optional, and inheritable
- /BleedBox is optional, and _not_ inheritable
- /TrimBox is optional, and _not_ inheritable
- /ArtBox is optional, and _not_ inheritable

So Hans is right in specifying Trim on every page, but can
specify Media and Crop only once.

> The inclusion of the bounding boxes as specified in Portable Document 
> Format Reference Manual, Version 1.3, Second Edition, is a required 
> operation in the process of creating a PDF/X file. For all PDF files, 
> the MediaBox is required. Additionally, each PDF/X page shall include 
> either an ArtBox or TrimBox, but not both. The inclusion of a BleedBox 
> is optional. If a BleedBox is present, neither the ArtBox nor the 

I can imagine that PDF/X has the same requirements as linearized
PDF with regards to inheritance.

Best
    Martin
-- 
                    http://www.tm.oneiros.de
From pragma at wxs.nl  Mon Nov 21 09:34:57 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Nov 21 09:35:04 2005
Subject: [NTG-pdftex] Re: Optimizing the generated pdf
In-Reply-To: <Pine.LNX.4.61.0511190027220.6705@hahepc1.hahe>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
	<20051117110146.GD9888@lucien.oneiros.kn-bremen.de>
	<437C7191.9000208@wxs.nl>
	<Pine.LNX.4.61.0511171833030.3966@hahepc1.hahe>
	<20051118221631.GB3531@irwin.vpn.uni-freiburg.de>
	<Pine.LNX.4.61.0511190027220.6705@hahepc1.hahe>
Message-ID: <438186B1.2040508@wxs.nl>

Hartmut Henkel wrote:

>Against this might also be that it seems that the only reason why pdftex
>currently can't write the PDF to stdout is that it has to seek and write
>the /Length. Are there other places where it backs up? So if we could
>get rid of this only (?) seek (without writing a separate /Length
>object) e. g. by buffering the streams in the memory (which should be
>harmless, given the current memory sizes), we would gain the stdout
>  
>
eh ... only as option; 500 meg files are no exception here (sometimes 
even more than a gig; mostly due to huge graphics)

Hans

>Yes. As a tiny start, maybe we should remove all redundant spaces like
>in "/Type /Page" (a tip from this Fat PDF paper).
>  
>
hm, do we really need to end up with the same ugly pdf as other progs 
produce? i kind of like the current clean (kind of readable) pdf that 
pdftex provides

removing duplicates, ok, but decreasing readablility of the pdf file ... 
(ok, i know that not many people look into the source, but ...)

Hans
From pragma at wxs.nl  Mon Nov 21 10:08:36 2005
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Nov 21 10:08:40 2005
Subject: [NTG-pdftex] Re: Optimizing the generated pdf
In-Reply-To: <20051120130114.GA12161@irwin.vpn.uni-freiburg.de>
References: <437B84E7.3010500@elvenkind.com> <m2y83o5lx5.fsf@levana.de>
	<437BA83D.3030803@wxs.nl> <437BADEC.2060702@elvenkind.com>
	<437BAF95.7000409@wxs.nl> <437C3FD7.9070000@elvenkind.com>
	<20051117094651.GA9888@lucien.oneiros.kn-bremen.de>
	<437C5DCA.6000202@wxs.nl>
	<20051118220814.GA3531@irwin.vpn.uni-freiburg.de>
	<20051119002133.GD27055@lucien.oneiros.kn-bremen.de>
	<20051120130114.GA12161@irwin.vpn.uni-freiburg.de>
Message-ID: <43818E94.8090204@wxs.nl>

Heiko Oberdiek wrote:

>On Sat, Nov 19, 2005 at 01:21:34AM +0100, Martin Schr?der wrote:
>
>  
>
>>On 2005-11-18 23:08:15 +0100, Heiko Oberdiek wrote:
>>    
>>
>>>On Thu, Nov 17, 2005 at 11:39:06AM +0100, Hans Hagen wrote:
>>>Does not a standard exist that forbids inherited properties and
>>>requires the setting of /MediaBox in each page object?
>>>      
>>>
>>No, /MediaBox is inheritable.
>>    
>>
>
>I am not talking about PDF. What about PDF/X?
>  
>

it's indeed pdf/x that made me do this kind of things; ok, it may have 
been a problem of validators but ...; also, keep in mind that gs is not 
always bug free, so ... [i have no time after each update of a 
validator, gs, xpdf to go over all things i did to see what can be dropped]

Hans
From vit.zyka at seznam.cz  Thu Nov 24 11:07:28 2005
From: vit.zyka at seznam.cz (Vit Zyka)
Date: Thu Nov 24 11:07:35 2005
Subject: [NTG-pdftex] ! TeX capacity exceeded, sorry [hash size=60000]
Message-ID: <438590E0.9060301@seznam.cz>

Hi all,

I have got a message:

! TeX capacity exceeded, sorry [hash size=60000].

so I tried to increase extra_hash = 100000  (or 70000), refresh format 
(not sure if needed), but obtain the same error message.

I have several questions and suggestions:

1. Is 'extra_hash' the proper variable?

2. Is possible that my binary (pdfeTeX 3.141592-1.21b-2.2 (Web2C 7.5.4) 
kpathsea version 3.5.4 from Akira) has extra_hash=50000 as maximum?

3. Sometimes the error message variable name differs from variable name 
that should be set. It is confusing, one is not sure if the proper 
variable is set. Could it be unified? Or Might be add more info like

! TeX capacity exceeded, sorry [hash size=60000, set extra_hash up to 
100000].

Thanks
Vit
From hartmut_henkel at gmx.de  Thu Nov 24 18:59:52 2005
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu Nov 24 18:59:56 2005
Subject: [NTG-pdftex] ! TeX capacity exceeded, sorry [hash size=60000]
In-Reply-To: <438590E0.9060301@seznam.cz>
References: <438590E0.9060301@seznam.cz>
Message-ID: <Pine.LNX.4.61.0511241858190.4040@hahepc1.hahe>

On Thu, 24 Nov 2005, Vit Zyka wrote:

> 1. Is 'extra_hash' the proper variable?

no, it's hash_extra, e. g. hash_extra = 50000 in texmf.cnf

Regards, Hartmut
From noreply at sarovar.org  Sat Nov 26 18:05:27 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Sat Nov 26 18:13:57 2005
Subject: [NTG-pdftex] [ pdftex-Patches-453 ] Object Streams for PDF-1.5
Message-ID: <E1Eg3UN-0006Xm-00@sarovar.org>

Patches item #453, was opened at 2005-11-26 18:05
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=453&group_id=106

Category: Object Streams
Group: v1.30.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Nobody (None)
Summary: Object Streams for PDF-1.5

Initial Comment:
Rough early patch, work in progress, produces PDF-1.5
object streams and cross reference streams. With the
patch, and enabled by \pdfminorversion=5, and with
luck, pdfetex produces e. g. from its WEB source a PDF
file with size 5.97 MByte instead of 11.2 MByte without
object streams.

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=453&group_id=106
From noreply at sarovar.org  Sun Nov 27 00:53:32 2005
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Sun Nov 27 01:02:06 2005
Subject: [NTG-pdftex] [ pdftex-Feature Requests-454 ] distribution: rename
	Build script
Message-ID: <E1Eg9rI-000732-00@sarovar.org>

Feature Requests item #454, was opened at 2005-11-26 23:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=454&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: Nobody (None)
Summary: distribution: rename Build script

Initial Comment:
Here is a very, very minor nuisance: In order to
compile pdftex on case-insensitive file systems like
Windows, one always has to rename the Build script
first, e.g., to Build.sh, since otherwise the directory
build/ cannot be created. 

I would suggest to rename either the script or the
build directory.

Regards,
Robert.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=454&group_id=106
