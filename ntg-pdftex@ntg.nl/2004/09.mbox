From noreply at sarovar.org  Wed Sep  1 17:34:05 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Sep  1 17:34:57 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-102 ] \pdffontexpand without autoexpand
	produces strange "ligature"
Message-ID: <E1C2X7d-0002qM-00@sarovar.org>

Bugs item #102, was opened at 2004-08-20 18:38
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=102&group_id=106

Category: hz
Group: v1.20a
>Status: Closed
>Resolution: Rejected
Priority: 5
Submitted By: Martin Schr?der (oneiros)
Assigned to: The Thanh Han (hanthethanh)
>Summary: \pdffontexpand without autoexpand produces strange "ligature"

Initial Comment:
In the attached test file the fonts are set up by
\def\setupfont{
   \resetefcode\font
   \pdffontexpand\font 20 20 5 %autoexpand
}

This produces a strange "ligature" in the fifth word of
the resulting pdf (test/oertzen.pdf): instead of "?" in
"Verh?ltnis" something quite different is printed.

If autoexpand is used, "?" is printed.

Also the log shows control characters at some points in
the trace of the first page, most notably in the fonts
names (0a and 00).

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2004-09-01 17:34

Message:
Logged In: YES 
user_id=421

Closed; not a pdftex problem, but a broken font.

----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2004-08-26 19:27

Message:
Logged In: NO 

I don't think this is a pdftex bug. The virtual font is
broken. You get the same result with this plain tex file:

-----------------------------------
\font\testfont=pegri9d+20\testfont

? ? ?
\char199 \char172 \char185 \char177
\char208 \char174 \char199

\bye
-----------------------------------

Running
> vftovp pegri9d+20.vf pegri9d+20.tfm test.vp
will report some of the broken characters.

Regards,
Robert.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2004-08-20 18:40

Message:
Logged In: YES 
user_id=421

I tried this with pdfetex and pdftex (not etex), and the
effect is the same.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=102&group_id=106
From ms at artcom-gmbh.de  Wed Sep  1 18:08:31 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed Sep  1 18:10:02 2004
Subject: [NTG-pdftex] pdftex.sarovar.org
In-Reply-To: <20040825091725.GL10264@artcom8.artcom-gmbh.de>
References: <20040825091725.GL10264@artcom8.artcom-gmbh.de>
Message-ID: <20040901160831.GG25094@artcom8.artcom-gmbh.de>

On 2004-08-25 11:17:25 +0200, Martin Schr?der wrote:
> this might sound dumb, but how are these files maintained? 

To save someone else the RTFM:

You have to use rsync as specified on
http://doc.sarovar.org/services.html#rsync , e.g.
rsync -avze ssh oneiros@pdftex.sarovar.org:/var/lib/gforge/chroot/home/groups/pdftex/htdocs/ .

For this you have to upload an ssh key as detailed on
http://doc.sarovar.org/services.html#access

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From hartmut_henkel at gmx.de  Fri Sep  3 00:48:14 2004
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Fri Sep  3 00:48:18 2004
Subject: [NTG-pdftex] pdfetex rc7.2 char protrusion
Message-ID: <Pine.LNX.4.61.0409030011230.14769@hahepc1.hahe>

Has anybody followed this de.comp.text.tex thread?

From: Christian Gudrian <usenet@gudrian.de>
[1] Randausgleich von Binde- und Trennstrich
Date: Sun Aug 29 17:23:53 CEST 2004

It deals with a disappearing protrusion at a manually set hyphen dash,
e. g. in the test file below the one "Mammut-marsch".

\nopagenumbers
\pdfprotrudechars=2
\hsize=345pt
\rpcode\font`\-=250
\def\sloppy{%
  \tolerance 9999%
  \emergencystretch 3em%
  \hfuzz .5pt
  \vfuzz\hfuzz}
\sloppy

Mammutmarsch Mammutmarsch Mammutmarsch Mammutmarsch Mammutmarsch
Mammutmarsch Mammutmarsch Mammutmarsch Mammutmarsch Mammutmarsch
Mammutmarsch Mammutmarsch Mammutmarsch Mammutmarsch Mammutmarsch
Mammutmarsch Mammutmarsch Mammutmarsch Mammutmarsch

Mammutmarsch Mammutmarsch Mammutmarsch Mammutmarsch Mammutmarsch
Mammutmarsch Mammutmarsch Mammutmarsch Mammutmarsch Mammutmarsch
Mammutmarsch Mammutmarsch Mammutmarsch Mammut-marsch Mammutmarsch
Mammutmarsch Mammutmarsch Mammutmarsch Mammutmarsch

\end


Or is this setup wrong? Only thing i found out is that the particular
line with the manual hyphen ends with a disc_node (type 7), but the
other lines seem to end with a vlist_node (type 1), whatever that means.
And the automatic hyphens have a right_pw of 163840, whereas the manual
one has zero there. No clue how to trace this further.

Regards, Hartmut
From taco at elvenkind.com  Fri Sep  3 11:21:34 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri Sep  3 11:21:37 2004
Subject: [NTG-pdftex] pdfetex rc7.2 char protrusion
In-Reply-To: <Pine.LNX.4.61.0409030011230.14769@hahepc1.hahe>
References: <Pine.LNX.4.61.0409030011230.14769@hahepc1.hahe>
Message-ID: <20040903112134.469f6172@glenlivet.elvenkind.com>

On Fri, 3 Sep 2004 00:48:14 +0200 (CEST), Hartmut wrote:


> Or is this setup wrong? Only thing i found out is that the particular
> line with the manual hyphen ends with a disc_node (type 7), but the
> other lines seem to end with a vlist_node (type 1), whatever that means.

I *think* this happens because TeX essentialyl sees

	mut-\discretionary{}{}{}marsch

There is an almost certainly related comment in the function total_pw() 
that says:

*        if (type(r) = disc_node) and
*           (type(p) = disc_node) and
*           (pre_break(p) = null) then
*        { I cannot remember when this case happens but I encountered it once }

but after that discovery, now I am stuck.

-- 
groeten,

Taco
From ms at artcom-gmbh.de  Mon Sep  6 15:55:12 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Mon Sep  6 15:57:05 2004
Subject: [NTG-pdftex] sarovar (was: pdftex-1.20a-rc6 is available)
In-Reply-To: <40F79DA6.2000106@wxs.nl>
References: <20040716053524.GA2909@monty>
	<20040716085524.GR1221@artcom8.artcom-gmbh.de>
	<40F79DA6.2000106@wxs.nl>
Message-ID: <20040906135511.GH2905@artcom8.artcom-gmbh.de>

On 2004-07-16 11:19:34 +0200, Hans Hagen wrote:
> can you organize something on sarovar: 
> 
> .../pdftex/previous     (say the last tex live) 
> .../pdftex/current      (the official release) 
> .../pdftex/latest       (the latest release, maybe with some experimental code) 
> .../pdftex/experimental (thanhs place to put things) 

Done.

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From ms at artcom-gmbh.de  Mon Sep  6 16:02:52 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Mon Sep  6 16:04:12 2004
Subject: [NTG-pdftex] 1.20a
Message-ID: <20040906140252.GI2905@artcom8.artcom-gmbh.de>

Hi,
a tarball is at
http://pdftex.sarovar.org/current/pdftex-1.20a.tar.bz2

Please give it a spin.

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From ms at artcom-gmbh.de  Mon Sep  6 16:09:56 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Mon Sep  6 16:10:06 2004
Subject: [NTG-pdftex] pdftex.sarovar.org
In-Reply-To: <20040901160831.GG25094@artcom8.artcom-gmbh.de>
References: <20040825091725.GL10264@artcom8.artcom-gmbh.de>
	<20040901160831.GG25094@artcom8.artcom-gmbh.de>
Message-ID: <20040906140956.GJ2905@artcom8.artcom-gmbh.de>

On 2004-09-01 18:08:31 +0200, Martin Schr?der wrote:
> You have to use rsync as specified on
> http://doc.sarovar.org/services.html#rsync , e.g.

I'm unable to delete files on the server:

> rsync -avze ssh --delete . sarovar:/var/lib/gforge/chroot/home/groups/pdftex/htdocs/
building file list ... done
delete_one: unlink src/pdftex-20040716.tar.bz2: Permission denied
delete_one: unlink djgpp/pdftex-djgpp-2004_07_26.tar.bz2: Permission denied

Should this work?

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From ms at artcom-gmbh.de  Mon Sep  6 16:19:09 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Mon Sep  6 16:20:06 2004
Subject: [NTG-pdftex] 1.20a
In-Reply-To: <20040906140252.GI2905@artcom8.artcom-gmbh.de>
References: <20040906140252.GI2905@artcom8.artcom-gmbh.de>
Message-ID: <20040906141909.GK2905@artcom8.artcom-gmbh.de>

The annoucement is at
http://pdftex.sarovar.org/current/Annoucement-1.20a

-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From reinhard.kotucha at web.de  Tue Sep  7 00:42:37 2004
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue Sep  7 00:42:41 2004
Subject: [NTG-pdftex] pdftex -ini
Message-ID: <16700.59357.258561.267157@zarniwoop.ms25.local>

Hi,
is this behaviour desired?

$ pdftex -ini '\pdfoutput=1 \end'
This is pdfeTeXk, Version 3.141592-1.20a-2.2 (Web2C 7.5.3) (INITEX)
 \write18 enabled.
 %&-line parsing enabled.
output format initialized to DVI

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha@web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From hartmut_henkel at gmx.de  Tue Sep  7 02:39:20 2004
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Tue Sep  7 02:39:23 2004
Subject: [NTG-pdftex] pdftex -ini
In-Reply-To: <16700.59357.258561.267157@zarniwoop.ms25.local>
References: <16700.59357.258561.267157@zarniwoop.ms25.local>
Message-ID: <Pine.LNX.4.61.0409070235001.6163@hahepc1.hahe>

On Tue, 7 Sep 2004, Reinhard Kotucha wrote:

> is this behaviour desired?
>
> $ pdftex -ini '\pdfoutput=1 \end'
> This is pdfeTeXk, Version 3.141592-1.20a-2.2 (Web2C 7.5.3) (INITEX)
>  \write18 enabled.
>  %&-line parsing enabled.
> output format initialized to DVI

well, it seems that the last line reflects the status of the
-output-format switch, which defaults to DVI. The \pdfoutput directive
comes after the printing of this line. You see this also if you put
\pdfoutput=1 \end into a file.

Regards, Hartmut
From reinhard.kotucha at web.de  Wed Sep  8 01:26:45 2004
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed Sep  8 01:27:05 2004
Subject: [NTG-pdftex] pdftex -ini
In-Reply-To: <Pine.LNX.4.61.0409070235001.6163@hahepc1.hahe>
References: <16700.59357.258561.267157@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0409070235001.6163@hahepc1.hahe>
Message-ID: <16702.17333.593099.428478@zarniwoop.ms25.local>

>>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel@gmx.de> writes:

    >> $ pdftex -ini '\pdfoutput=1 \end' 
    >> This is pdfeTeXk, Version 3.141592-1.20a-2.2 (Web2C 7.5.3)
    >> (INITEX)
    >> \write18 enabled.
    >> %&-line parsing enabled.  
    >> output format initialized to DVI

    > well, it seems that the last line reflects the status of the
    > -output-format switch, which defaults to DVI. The \pdfoutput
    > directive comes after the printing of this line. You see this
    > also if you put \pdfoutput=1 \end into a file.

Yes, maybe the message should be deferred until the output file is
opened.  When the output file is opened, pdftex definitely knows
whether it produces DVI or PDF.

Unfortunately then in my example the message wouldn't appear at all.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha@web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From hartmut_henkel at gmx.de  Wed Sep  8 02:29:25 2004
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed Sep  8 02:29:28 2004
Subject: [NTG-pdftex] pdftex -ini
In-Reply-To: <16702.17333.593099.428478@zarniwoop.ms25.local>
References: <16700.59357.258561.267157@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0409070235001.6163@hahepc1.hahe>
	<16702.17333.593099.428478@zarniwoop.ms25.local>
Message-ID: <Pine.LNX.4.61.0409080221080.29208@hahepc1.hahe>

On Wed, 8 Sep 2004, Reinhard Kotucha wrote:

> >>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel@gmx.de> writes:
>
>     >> $ pdftex -ini '\pdfoutput=1 \end'
>     >> This is pdfeTeXk, Version 3.141592-1.20a-2.2 (Web2C 7.5.3)
>     >> (INITEX)
>     >> \write18 enabled.
>     >> %&-line parsing enabled.
>     >> output format initialized to DVI
>
> Yes, maybe the message should be deferred until the output file is
> opened.  When the output file is opened, pdftex definitely knows
> whether it produces DVI or PDF.

Have tried it. A good place for the check and message seems to be
procedure fix_pdfoutput, which freezes the output mode once and forever.
Then one gets:

This is pdfeTeX, Version 3.141592-1.20a-2.2 (Web2C 7.5.3)
entering extended mode
(./xx.tex (output format initialized to PDF)
 [1{/usr/lo...

Needs this blank and some kind of brackets () around the string, and
unclear is which convention to follow, as ( officially already means
open file and [ means begin page...

> Unfortunately then in my example the message wouldn't appear at all.

Right, but who would care?

Regards, Hartmut
From ms at artcom-gmbh.de  Wed Sep  8 12:41:54 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed Sep  8 12:43:19 2004
Subject: [NTG-pdftex] 1.20a
In-Reply-To: <20040906140252.GI2905@artcom8.artcom-gmbh.de>
References: <20040906140252.GI2905@artcom8.artcom-gmbh.de>
Message-ID: <20040908104154.GS2905@artcom8.artcom-gmbh.de>

On 2004-09-06 16:02:52 +0200, Martin Schr?der wrote:
> a tarball is at
> http://pdftex.sarovar.org/current/pdftex-1.20a.tar.bz2

I've uploaded a new tarball with all changes by Peter and Olaf;
please try it out.

Thomas, is the texmf I've included still current?

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From te at dbs.uni-hannover.de  Wed Sep  8 13:48:26 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Wed Sep  8 13:48:34 2004
Subject: [NTG-pdftex] 1.20a
In-Reply-To: <20040908104154.GS2905@artcom8.artcom-gmbh.de>
References: <20040906140252.GI2905@artcom8.artcom-gmbh.de>
	<20040908104154.GS2905@artcom8.artcom-gmbh.de>
Message-ID: <20040908114826.GE21395@dbs.uni-hannover.de>

On Wed, Sep 08, 2004 at 12:41:54PM +0200, Martin Schr?der wrote:
> Thomas, is the texmf I've included still current?

No. elatex.ini is gone from my tree (makes no sense, since latex is now
always at least etex based), all the other files have been changed :-)

  http://www.dbs.uni-hannover.de/~te/texmf.tar.gz

Thomas
From ms at artcom-gmbh.de  Wed Sep  8 17:45:57 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed Sep  8 17:47:46 2004
Subject: [NTG-pdftex] 1.20a
In-Reply-To: <20040908114826.GE21395@dbs.uni-hannover.de>
References: <20040906140252.GI2905@artcom8.artcom-gmbh.de>
	<20040908104154.GS2905@artcom8.artcom-gmbh.de>
	<20040908114826.GE21395@dbs.uni-hannover.de>
Message-ID: <20040908154557.GW2905@artcom8.artcom-gmbh.de>

On 2004-09-08 13:48:26 +0200, Thomas Esser wrote:
>   http://www.dbs.uni-hannover.de/~te/texmf.tar.gz

Integrated. New tarball is up.

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From reinhard.kotucha at web.de  Wed Sep  8 21:25:52 2004
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed Sep  8 21:26:23 2004
Subject: [NTG-pdftex] pdftex -ini
In-Reply-To: <Pine.LNX.4.61.0409080221080.29208@hahepc1.hahe>
References: <16700.59357.258561.267157@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0409070235001.6163@hahepc1.hahe>
	<16702.17333.593099.428478@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0409080221080.29208@hahepc1.hahe>
Message-ID: <16703.23744.785885.993414@zarniwoop.ms25.local>

>>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel@gmx.de> writes:

    >> Yes, maybe the message should be deferred until the output file
    >> is opened.  When the output file is opened, pdftex definitely
    >> knows whether it produces DVI or PDF.

    > Have tried it. A good place for the check and message seems to
    > be procedure fix_pdfoutput, which freezes the output mode once
    > and forever.  Then one gets:

    > This is pdfeTeX, Version 3.141592-1.20a-2.2 (Web2C 7.5.3)
    > entering extended mode 
    > (./xx.tex (output format initialized to PDF)
    >  [1{/usr/lo...

    > Needs this blank and some kind of brackets () around the string,
    > and unclear is which convention to follow, as ( officially
    > already means open file and [ means begin page...

Hartmut, many thanks for the response.
Maybe it can be done like this:

This is pdfeTeX, Version 3.141592-1.20a-2.2 (Web2C 7.5.3)
entering extended mode 
(./xx.tex
pdfeTeX: output format initialized to PDF
[1(/usr/lo...

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha@web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From hartmut_henkel at gmx.de  Wed Sep  8 21:45:13 2004
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed Sep  8 21:45:17 2004
Subject: [NTG-pdftex] pdftex -ini
In-Reply-To: <16703.23744.785885.993414@zarniwoop.ms25.local>
References: <16700.59357.258561.267157@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0409070235001.6163@hahepc1.hahe>
	<16702.17333.593099.428478@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0409080221080.29208@hahepc1.hahe>
	<16703.23744.785885.993414@zarniwoop.ms25.local>
Message-ID: <Pine.LNX.4.61.0409082138540.2573@hahepc1.hahe>

On Wed, 8 Sep 2004, Reinhard Kotucha wrote:

> Maybe it can be done like this:
>
> This is pdfeTeX, Version 3.141592-1.20a-2.2 (Web2C 7.5.3)
> entering extended mode
> (./xx.tex
> pdfeTeX: output format initialized to PDF
> [1(/usr/lo...

Yes, indeed. And you wrote before:

> Unfortunately then in my example the message wouldn't appear at all.

Actually also this can be solved, if one puts the fix_pdfoutput also at
the begin of the format \dump function, and into the final cleanup. Then
when a format is dumped, you also get the right message, and if nothing
is done (as in your example), you also get it. This is simple, since
fix_pdfoutput is executing only once. But i haven't tried it.

Regards, Hartmut
From reinhard.kotucha at web.de  Thu Sep  9 00:18:52 2004
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Thu Sep  9 00:18:58 2004
Subject: [NTG-pdftex] pdftex -ini
In-Reply-To: <Pine.LNX.4.61.0409082138540.2573@hahepc1.hahe>
References: <16700.59357.258561.267157@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0409070235001.6163@hahepc1.hahe>
	<16702.17333.593099.428478@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0409080221080.29208@hahepc1.hahe>
	<16703.23744.785885.993414@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0409082138540.2573@hahepc1.hahe>
Message-ID: <16703.34124.459110.315628@zarniwoop.ms25.local>

>>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel@gmx.de> writes:

    > Actually also this can be solved, if one puts the fix_pdfoutput
    > also at the begin of the format \dump function, and into the
    > final cleanup. Then when a format is dumped, you also get the
    > right message, and if nothing is done (as in your example), you
    > also get it. This is simple, since fix_pdfoutput is executing
    > only once. But i haven't tried it.

It's nice to hear that it is not too difficult to accomplish this.

But it's more important to avoid messages like this:

$ pdftex '\relax\pdfoutput=0  abc \bye'
This is pdfeTeXk, Version 3.141592-1.20a-2.2 (Web2C 7.5.3)
output format initialized to PDF

This might confuse people.  And I hope that someone can fix this
before TexLive is released.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha@web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From hartmut_henkel at gmx.de  Thu Sep  9 01:25:39 2004
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu Sep  9 01:25:44 2004
Subject: [NTG-pdftex] pdfetex /pdftexbanner gives pdftex
Message-ID: <Pine.LNX.4.61.0409090119190.17208@hahepc1.hahe>

Hi,

is it intentional, that in the PDF file the /Producer and
/PTEX.Fullbanner keys mention only "...pdfTeX..." even when pdfeTeX is
used? And the etex "2.2" does not appear either. Similar with the
\pdftexbanner.

Regards, Hartmut
From pragma at wxs.nl  Thu Sep  9 09:22:54 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Sep  9 09:23:02 2004
Subject: [NTG-pdftex] pdfetex /pdftexbanner gives pdftex
In-Reply-To: <Pine.LNX.4.61.0409090119190.17208@hahepc1.hahe>
References: <Pine.LNX.4.61.0409090119190.17208@hahepc1.hahe>
Message-ID: <414004CE.8040507@wxs.nl>

Hartmut Henkel wrote:

>Hi,
>
>is it intentional, that in the PDF file the /Producer and
>/PTEX.Fullbanner keys mention only "...pdfTeX..." even when pdfeTeX is
>used? And the etex "2.2" does not appear either. Similar with the
>\pdftexbanner.
>  
>
i even wonder if we should still provide pdftex, maybe just pdfetex only; i agree that teh key should mention pdfetex in the case of etex or maybe even pdfxtex when that one is used. 

how about dropping pdftex in favor of only pdfetex? 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From ms at artcom-gmbh.de  Thu Sep  9 10:36:48 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Sep  9 10:37:21 2004
Subject: [NTG-pdftex] pdfetex /pdftexbanner gives pdftex
In-Reply-To: <414004CE.8040507@wxs.nl>
References: <Pine.LNX.4.61.0409090119190.17208@hahepc1.hahe>
	<414004CE.8040507@wxs.nl>
Message-ID: <20040909083648.GA2905@artcom8.artcom-gmbh.de>

On 2004-09-09 09:22:54 +0200, Hans Hagen wrote:
> >is it intentional, that in the PDF file the /Producer and
> >/PTEX.Fullbanner keys mention only "...pdfTeX..." even when pdfeTeX is
> >used? And the etex "2.2" does not appear either. Similar with the
> >\pdftexbanner.

That's certainly not intentional; it probably doesn't distinguish
between pdftex, pdfetex and pdfxtex. 

> i even wonder if we should still provide pdftex, maybe just pdfetex only; i 
> agree that teh key should mention pdfetex in the case of etex or maybe even 
> pdfxtex when that one is used. 
> how about dropping pdftex in favor of only pdfetex? 

That thought has crossed my mind. Let's make 1.20a the last
release with pdftex.

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From ms at artcom-gmbh.de  Thu Sep  9 10:38:02 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Sep  9 10:39:17 2004
Subject: [NTG-pdftex] pdftex -ini
In-Reply-To: <16703.34124.459110.315628@zarniwoop.ms25.local>
References: <16700.59357.258561.267157@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0409070235001.6163@hahepc1.hahe>
	<16702.17333.593099.428478@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0409080221080.29208@hahepc1.hahe>
	<16703.23744.785885.993414@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0409082138540.2573@hahepc1.hahe>
	<16703.34124.459110.315628@zarniwoop.ms25.local>
Message-ID: <20040909083802.GB2905@artcom8.artcom-gmbh.de>

On 2004-09-09 00:18:52 +0200, Reinhard Kotucha wrote:
> $ pdftex '\relax\pdfoutput=0  abc \bye'
> This is pdfeTeXk, Version 3.141592-1.20a-2.2 (Web2C 7.5.3)
> output format initialized to PDF
> 
> This might confuse people.  And I hope that someone can fix this
> before TexLive is released.

It _is_ confusing, but I don't see it as a reason to delay the
release further. But if someone (Hartmut?) has a fix _now_...

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From noreply at sarovar.org  Thu Sep  9 12:13:06 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Sep  9 12:13:43 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-112 ] Message "output format initialized
	to" is not always right
Message-ID: <E1C5LvO-0000yA-00@sarovar.org>

Bugs item #112, was opened at 2004-09-09 12:13
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=112&group_id=106

Category: None
Group: v1.20a
Status: Open
Resolution: None
Priority: 3
Submitted By: Martin Schr?der (oneiros)
Assigned to: Nobody (None)
Summary: Message "output format initialized to" is not always right

Initial Comment:
The "output format initialized to DVI|PDF" is issued to
early, which may lead to confusing results.

See the thread "pdftex -ini" at
http://www.ntg.nl/pipermail/ntg-pdftex/2004-September/000727.html

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=112&group_id=106
From noreply at sarovar.org  Thu Sep  9 12:16:00 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Sep  9 12:16:33 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-113 ] \pdftexbanner identifies pdfetex
	and pdfxtex as pdftex
Message-ID: <E1C5LyC-0000yb-00@sarovar.org>

Bugs item #113, was opened at 2004-09-09 12:16
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=113&group_id=106

Category: None
Group: v1.20a
Status: Open
Resolution: None
Priority: 3
Submitted By: Martin Schr?der (oneiros)
Assigned to: Nobody (None)
Summary: \pdftexbanner identifies pdfetex and pdfxtex as pdftex

Initial Comment:
Also make sure that the /PTEX.-keys inserted by the
programs correctly identify the programs, not only
pdftex. For pdf{e|x}tex, the information should also
include the eTeX-version.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=113&group_id=106
From ms at artcom-gmbh.de  Thu Sep  9 12:45:31 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Sep  9 12:46:22 2004
Subject: [NTG-pdftex] 1.20a
In-Reply-To: <20040908154557.GW2905@artcom8.artcom-gmbh.de>
References: <20040906140252.GI2905@artcom8.artcom-gmbh.de>
	<20040908104154.GS2905@artcom8.artcom-gmbh.de>
	<20040908114826.GE21395@dbs.uni-hannover.de>
	<20040908154557.GW2905@artcom8.artcom-gmbh.de>
Message-ID: <20040909104531.GF2905@artcom8.artcom-gmbh.de>

On 2004-09-08 17:45:57 +0200, Martin Schr?der wrote:
> Integrated. New tarball is up.

I've released the latest tarball: it's been uploaded to CTAN and
will appear there shortly and is available from sarovar
(http://sarovar.org/projects/pdftex/). 

The annoucement to the rest of the world will follow when it's at
CTAN.

Rejoice! :-)

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From pragma at wxs.nl  Thu Sep  9 16:15:23 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Sep  9 16:15:33 2004
Subject: [NTG-pdftex] pdftex -ini
In-Reply-To: <20040909083802.GB2905@artcom8.artcom-gmbh.de>
References: <16700.59357.258561.267157@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0409070235001.6163@hahepc1.hahe>
	<16702.17333.593099.428478@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0409080221080.29208@hahepc1.hahe>
	<16703.23744.785885.993414@zarniwoop.ms25.local>
	<Pine.LNX.4.61.0409082138540.2573@hahepc1.hahe>
	<16703.34124.459110.315628@zarniwoop.ms25.local>
	<20040909083802.GB2905@artcom8.artcom-gmbh.de>
Message-ID: <4140657B.6060408@wxs.nl>

Martin Schr?der wrote:

>On 2004-09-09 00:18:52 +0200, Reinhard Kotucha wrote:
>  
>
>>$ pdftex '\relax\pdfoutput=0  abc \bye'
>>This is pdfeTeXk, Version 3.141592-1.20a-2.2 (Web2C 7.5.3)
>>output format initialized to PDF
>>
>>This might confuse people.  And I hope that someone can fix this
>>before TexLive is released.
>>    
>>
>
>It _is_ confusing, but I don't see it as a reason to delay the
>release further. But if someone (Hartmut?) has a fix _now_...
>  
>
just trow out that line, no one will read it anyway

(in de time it could go in the statistics part at the end when asked for)  

Hans  

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From noreply at sarovar.org  Fri Sep 10 23:57:24 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Fri Sep 10 23:58:01 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-115 ] character protrusion: some
	characters will not be protruded
Message-ID: <E1C5tOW-00031U-00@sarovar.org>

Bugs item #115, was opened at 2004-09-11 03:27
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=115&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Nobody (None)
Assigned to: Nobody (None)
Summary: character protrusion: some characters will not be protruded

Initial Comment:
Some characters will not be protruded into the right
margin, namely: `-', `--', and `---', if entered like
that. When they occur as \hyphenchar, or as a single
character (e.g. \char123), everything's fine. With the
EC fonts, the same happens for some quote characters.

Here's a plain TeX file showing the problem:

----------------------------------------------------
\tracingoutput 1
\showboxbreadth \maxdimen
\showboxdepth \maxdimen
\pdfprotrudechars=2
\hsize10em

\def\testprotrusion#1{#1\dotfill #1\penalty-10000}

\font\testfont=cmr10\testfont

\newcount\charcount
\charcount=0
\loop
   \rpcode\font\charcount=1000
   \advance\charcount 1
   \ifnum\charcount < 256 \repeat

\noindent
\testprotrusion{A}% OK
\testprotrusion{-}%
\testprotrusion{--}%
\testprotrusion{---}%
\testprotrusion{itworks\-likethis}%
\testprotrusion{\char123}%
\testprotrusion{\char124}%

\font\testfont=ecrm10\testfont
\charcount=0
\loop
   \rpcode\font\charcount=1000
   \advance\charcount 1
   \ifnum\charcount < 256 \repeat

\noindent
\testprotrusion{``}%
\testprotrusion{''}%
\testprotrusion{\char13}% \quotedblbase
\testprotrusion{\char18}% \quotesinglbase
\testprotrusion{Z}% OK

\bye 
----------------------------------------------------

I don't know whether that might be related, but in all
cases, something is being inserted between the
character itself and the right margin by TeX (a
discretionary for the dashes, a \kern for the quote
characters). 

(This is the same bug as reported in the dctt thread
`Randausgleich von Binde- und Trennstrich', 29.8.04)

Regards,
Robert.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=115&group_id=106
From noreply at sarovar.org  Fri Sep 10 23:58:29 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Fri Sep 10 23:59:03 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-116 ] character protrusion: pdftex may
	hang
Message-ID: <E1C5tPZ-00031i-00@sarovar.org>

Bugs item #116, was opened at 2004-09-11 03:28
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=116&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Nobody (None)
Assigned to: Nobody (None)
Summary: character protrusion: pdftex may hang

Initial Comment:
pdfTeX will fail on the following LaTeX file:

----------------------------------------------------
\pdfprotrudechars 2
\documentclass{minimal}
\begin{document}
\fontsize{7}{8}\selectfont

This paragraph consists of more than two lines.
This paragraph consists of more than two lines.
This paragraph consists of more than two lines.

%% same for this paragraph:
% This is \hfill an empty line

\end{document}
----------------------------------------------------

pdfTeX will hang while building the paragraph, so it
seems. 

This does not happen with other font sizes. Also, it
somehow seems to depend on the fonts preloaded in the
format file. If I change this line in preload.ltx:

 \DeclarePreloadSizes{OT1}{cmr}{m}{n}{5,7,10}

so that the font for size 10 will be loaded first, and
recreate the format, all is well. 

I am using:

This is pdfeTeX, Version 3.141592-1.20a-2.2 (MiKTeX 2.4))


Regards,
Robert.


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=116&group_id=106
From ms at artcom-gmbh.de  Tue Sep 14 11:39:06 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Tue Sep 14 11:40:29 2004
Subject: [NTG-pdftex] pdftex.org (was: pdfTeX Manual 1.20a Still Yet Another
	Draft)
In-Reply-To: <200409100245.i8A2je231962@f7.net>
References: <Pine.LNX.4.61.0409092107070.1931@hahepc1.hahe>
	<200409100245.i8A2je231962@f7.net>
Message-ID: <20040914093906.GH1345@artcom8.artcom-gmbh.de>

On 2004-09-09 22:45:40 -0400, Karl Berry wrote:
>     - actually a link to tug.org/applications/pdftex, looks outdated and not
>       really maintained. Will it ever be updated?
> 
> It would certainly be good to update it.  Perhaps one of you would like
> to do it :)?  I'm sure Sebastian does not want to.  I'm happy to give
> either or both of you accounts on tug.  Clearly we want *some* pdftex
> home page!

It's currently in p4 at //depot/web/pdftex/

I'll update it shortly.

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From noreply at sarovar.org  Tue Sep 14 14:29:56 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Tue Sep 14 14:30:53 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-115 ] character protrusion: some
	characters will not be protruded
Message-ID: <E1C7CRY-0008RP-00@sarovar.org>

Bugs item #115, was opened at 2004-09-10 23:57
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=115&group_id=106

>Category: hz
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Nobody (None)
>Assigned to: The Thanh Han (hanthethanh)
Summary: character protrusion: some characters will not be protruded

Initial Comment:
Some characters will not be protruded into the right
margin, namely: `-', `--', and `---', if entered like
that. When they occur as \hyphenchar, or as a single
character (e.g. \char123), everything's fine. With the
EC fonts, the same happens for some quote characters.

Here's a plain TeX file showing the problem:

----------------------------------------------------
\tracingoutput 1
\showboxbreadth \maxdimen
\showboxdepth \maxdimen
\pdfprotrudechars=2
\hsize10em

\def\testprotrusion#1{#1\dotfill #1\penalty-10000}

\font\testfont=cmr10\testfont

\newcount\charcount
\charcount=0
\loop
   \rpcode\font\charcount=1000
   \advance\charcount 1
   \ifnum\charcount < 256 \repeat

\noindent
\testprotrusion{A}% OK
\testprotrusion{-}%
\testprotrusion{--}%
\testprotrusion{---}%
\testprotrusion{itworks\-likethis}%
\testprotrusion{\char123}%
\testprotrusion{\char124}%

\font\testfont=ecrm10\testfont
\charcount=0
\loop
   \rpcode\font\charcount=1000
   \advance\charcount 1
   \ifnum\charcount < 256 \repeat

\noindent
\testprotrusion{``}%
\testprotrusion{''}%
\testprotrusion{\char13}% \quotedblbase
\testprotrusion{\char18}% \quotesinglbase
\testprotrusion{Z}% OK

\bye 
----------------------------------------------------

I don't know whether that might be related, but in all
cases, something is being inserted between the
character itself and the right margin by TeX (a
discretionary for the dashes, a \kern for the quote
characters). 

(This is the same bug as reported in the dctt thread
`Randausgleich von Binde- und Trennstrich', 29.8.04)

Regards,
Robert.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=115&group_id=106
From noreply at sarovar.org  Tue Sep 14 14:30:23 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Tue Sep 14 14:31:16 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-116 ] character protrusion: pdftex may
	hang
Message-ID: <E1C7CRz-0008Sn-00@sarovar.org>

Bugs item #116, was opened at 2004-09-10 23:58
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=116&group_id=106

>Category: hz
Group: None
Status: Open
Resolution: None
>Priority: 7
Submitted By: Nobody (None)
>Assigned to: The Thanh Han (hanthethanh)
Summary: character protrusion: pdftex may hang

Initial Comment:
pdfTeX will fail on the following LaTeX file:

----------------------------------------------------
\pdfprotrudechars 2
\documentclass{minimal}
\begin{document}
\fontsize{7}{8}\selectfont

This paragraph consists of more than two lines.
This paragraph consists of more than two lines.
This paragraph consists of more than two lines.

%% same for this paragraph:
% This is \hfill an empty line

\end{document}
----------------------------------------------------

pdfTeX will hang while building the paragraph, so it
seems. 

This does not happen with other font sizes. Also, it
somehow seems to depend on the fonts preloaded in the
format file. If I change this line in preload.ltx:

 \DeclarePreloadSizes{OT1}{cmr}{m}{n}{5,7,10}

so that the font for size 10 will be loaded first, and
recreate the format, all is well. 

I am using:

This is pdfeTeX, Version 3.141592-1.20a-2.2 (MiKTeX 2.4))


Regards,
Robert.


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=116&group_id=106
From noreply at sarovar.org  Tue Sep 14 14:30:46 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Tue Sep 14 14:31:36 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-115 ] character protrusion: some
	characters will not be protruded
Message-ID: <E1C7CSM-0008U7-00@sarovar.org>

Bugs item #115, was opened at 2004-09-10 23:57
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=115&group_id=106

Category: hz
>Group: v1.20a
Status: Open
Resolution: None
Priority: 5
Submitted By: Nobody (None)
Assigned to: The Thanh Han (hanthethanh)
Summary: character protrusion: some characters will not be protruded

Initial Comment:
Some characters will not be protruded into the right
margin, namely: `-', `--', and `---', if entered like
that. When they occur as \hyphenchar, or as a single
character (e.g. \char123), everything's fine. With the
EC fonts, the same happens for some quote characters.

Here's a plain TeX file showing the problem:

----------------------------------------------------
\tracingoutput 1
\showboxbreadth \maxdimen
\showboxdepth \maxdimen
\pdfprotrudechars=2
\hsize10em

\def\testprotrusion#1{#1\dotfill #1\penalty-10000}

\font\testfont=cmr10\testfont

\newcount\charcount
\charcount=0
\loop
   \rpcode\font\charcount=1000
   \advance\charcount 1
   \ifnum\charcount < 256 \repeat

\noindent
\testprotrusion{A}% OK
\testprotrusion{-}%
\testprotrusion{--}%
\testprotrusion{---}%
\testprotrusion{itworks\-likethis}%
\testprotrusion{\char123}%
\testprotrusion{\char124}%

\font\testfont=ecrm10\testfont
\charcount=0
\loop
   \rpcode\font\charcount=1000
   \advance\charcount 1
   \ifnum\charcount < 256 \repeat

\noindent
\testprotrusion{``}%
\testprotrusion{''}%
\testprotrusion{\char13}% \quotedblbase
\testprotrusion{\char18}% \quotesinglbase
\testprotrusion{Z}% OK

\bye 
----------------------------------------------------

I don't know whether that might be related, but in all
cases, something is being inserted between the
character itself and the right margin by TeX (a
discretionary for the dashes, a \kern for the quote
characters). 

(This is the same bug as reported in the dctt thread
`Randausgleich von Binde- und Trennstrich', 29.8.04)

Regards,
Robert.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=115&group_id=106
From noreply at sarovar.org  Tue Sep 14 14:31:07 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Tue Sep 14 14:31:49 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-116 ] character protrusion: pdftex may
	hang
Message-ID: <E1C7CSh-0008VA-00@sarovar.org>

Bugs item #116, was opened at 2004-09-10 23:58
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=116&group_id=106

Category: hz
>Group: v1.20a
Status: Open
Resolution: None
Priority: 7
Submitted By: Nobody (None)
Assigned to: The Thanh Han (hanthethanh)
Summary: character protrusion: pdftex may hang

Initial Comment:
pdfTeX will fail on the following LaTeX file:

----------------------------------------------------
\pdfprotrudechars 2
\documentclass{minimal}
\begin{document}
\fontsize{7}{8}\selectfont

This paragraph consists of more than two lines.
This paragraph consists of more than two lines.
This paragraph consists of more than two lines.

%% same for this paragraph:
% This is \hfill an empty line

\end{document}
----------------------------------------------------

pdfTeX will hang while building the paragraph, so it
seems. 

This does not happen with other font sizes. Also, it
somehow seems to depend on the fonts preloaded in the
format file. If I change this line in preload.ltx:

 \DeclarePreloadSizes{OT1}{cmr}{m}{n}{5,7,10}

so that the font for size 10 will be loaded first, and
recreate the format, all is well. 

I am using:

This is pdfeTeX, Version 3.141592-1.20a-2.2 (MiKTeX 2.4))


Regards,
Robert.


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=116&group_id=106
From noreply at sarovar.org  Wed Sep 15 12:14:23 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Sep 15 12:15:01 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-187 ] Line number of syntax errors
	displayed incorrectly
Message-ID: <E1C7Wnv-00082m-00@sarovar.org>

Bugs item #187, was opened at 2004-09-15 15:44
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=187&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Nobody (None)
Assigned to: Nobody (None)
Summary: Line number of syntax errors displayed incorrectly

Initial Comment:
When typesseting with pdfLaTeX 1.10b the line number of
syntax errors of source files is different from that
shown by my source file editor.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=187&group_id=106
From noreply at sarovar.org  Wed Sep 15 12:24:59 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Sep 15 12:26:01 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-187 ] Line number of syntax errors
	displayed incorrectly
Message-ID: <E1C7WyB-00085n-00@sarovar.org>

Bugs item #187, was opened at 2004-09-15 12:14
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=187&group_id=106

Category: None
>Group: v1.10b
Status: Open
Resolution: None
>Priority: 4
Submitted By: Nobody (None)
Assigned to: Nobody (None)
Summary: Line number of syntax errors displayed incorrectly

Initial Comment:
When typesseting with pdfLaTeX 1.10b the line number of
syntax errors of source files is different from that
shown by my source file editor.

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2004-09-15 12:24

Message:
Logged In: YES 
user_id=421

1.10b is quite old. Please upgrade to 1.20a

How much different are the line numbers? Off by one?

Please attach a minimal input file with log file showing the
problem.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=187&group_id=106
From ms at artcom-gmbh.de  Wed Sep 15 14:09:00 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed Sep 15 14:10:54 2004
Subject: [NTG-pdftex] 1.20a
In-Reply-To: <20040909104531.GF2905@artcom8.artcom-gmbh.de>
References: <20040906140252.GI2905@artcom8.artcom-gmbh.de>
	<20040908104154.GS2905@artcom8.artcom-gmbh.de>
	<20040908114826.GE21395@dbs.uni-hannover.de>
	<20040908154557.GW2905@artcom8.artcom-gmbh.de>
	<20040909104531.GF2905@artcom8.artcom-gmbh.de>
Message-ID: <20040915120900.GA21208@artcom8.artcom-gmbh.de>

On 2004-09-09 12:45:31 +0200, Martin Schr?der wrote:
> I've released the latest tarball: it's been uploaded to CTAN and
> will appear there shortly and is available from sarovar
> (http://sarovar.org/projects/pdftex/). 

I've uploaded a slightly changed version: libpng is now 1.2.7
And the files are all world-readable. :-)

It's at the project site (but not yet at the downloadable files)
and has been uploaded to CTAN.

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From hartmut_henkel at gmx.de  Thu Sep 16 00:53:02 2004
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu Sep 16 00:53:12 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-113 ] \pdftexbanner identifies pdfetex
	and pdfxtex as pdftex
In-Reply-To: <E1C5LyC-0000yb-00@sarovar.org>
References: <E1C5LyC-0000yb-00@sarovar.org>
Message-ID: <Pine.LNX.4.61.0409160024410.14648@hahepc1.hahe>

Here is a patch against this bug. No warranty. It uses the fact, that
the main() program in texmfmp.c does well know the right banner, only
utils.c from libpdf.a doesn't. So one can transfer the banner (a
pointer) from texmfmp.c to utils.c via some simple function
setpdftexbanner(BANNER). Two things are patched:

1. The banners look now like:

/PTEX.Fullbanner (This is pdfTeX, Version 3.141592-1.20a (Web2C 7.5.3)
kpathsea version 3.5.3)

/PTEX.Fullbanner (This is pdfeTeX, Version 3.141592-1.20a-2.2 (Web2C
7.5.3) kpathsea version 3.5.3)

/PTEX.Fullbanner (This is pdfxTeX, Version 3.141592-1.20a-2.2 (Web2C
7.5.3) kpathsea version 3.5.3)

Similar appears when calling \pdftexbanner.

Function setpdftexbanner(BANNER) is called right at begin of the main()
program (only for a "pdf..." engine). This function is part of utils.c
which goes into the libpdf.a. File utils.c does not anymore require the
BANNER from pdftexextra.h; the banner is now a static pointer in
utils.c. I also replaced the double-blank in front of (Web2C 7.5.3) by a
single one :-)

2. The producer keys look like:

/Producer (pdfTeX-1.20a)
/Producer (pdfeTeX-1.20a)
/Producer (pdfxTeX-1.20a)

This is simply tweaking the change files pdfetex.ch2 and pdfxtex.ch2.

Below are the diffs. Have fun!

Best Regards

Hartmut


========================================================================

--- /usr/local/src/tex/pdftex-1.20a/src/texk/web2c/pdftexdir/utils.c.orig	Mon Jun  7 09:51:34 2004
+++ /usr/local/src/tex/pdftex-1.20a/src/texk/web2c/pdftexdir/utils.c	Wed Sep 15 22:45:21 2004
@@ -25,7 +25,6 @@
 #include "md5.h"
 #include <kpathsea/c-vararg.h>
 #include <kpathsea/c-proto.h>
-#include "pdftexextra.h" /* define BANNER */
 #include <time.h>

 static const char perforce_id[] =
@@ -36,6 +35,7 @@
 static char print_buf[PRINTF_BUF_SIZE];
 static char *jobname_cstr = NULL;
 static char *job_id_string = NULL;
+static char *banner = NULL; /* from web2c/lib/texmfmp.c via setpdftexbanner() */
 extern string versionstring; /* from web2c/lib/version.c */
 extern KPSEDLL string kpathsea_version_string; /* from kpathsea/version.c */

@@ -266,12 +266,13 @@
     s = xtalloc(SMALL_BUF_SIZE +
                 strlen(name_string) +
                 strlen(format_string) +
-                strlen(BANNER) +
+                strlen(banner) +
                 strlen(versionstring) +
                 strlen(kpathsea_version_string), char);
-    sprintf(s, "%.4d/%.2d/%.2d %.2d:%.2d %s %s %s %s %s",
+    /* The Web2c version string starts with a space.  */
+    sprintf(s, "%.4d/%.2d/%.2d %.2d:%.2d %s %s %s%s %s",
             year, month, day, time/60, time%60,
-            name_string, format_string, BANNER,
+            name_string, format_string, banner,
             versionstring, kpathsea_version_string);
     job_id_string = xstrdup(s);
     xfree(s);
@@ -279,6 +280,17 @@
     xfree(format_string);
 }

+/*
+setpdftexbanner() is called at program start from main() in texmfmp.c. One
+can't use makepdftexbanner() at that time directly, since maketexstring()
+isn't set up yet.
+*/
+
+void setpdftexbanner(char * b)
+{
+    banner = b;
+}
+
 void makepdftexbanner(void)
 {
     static boolean pdftexbanner_init = false;
@@ -288,10 +300,11 @@
         return;

     s = xtalloc(SMALL_BUF_SIZE +
-                strlen(BANNER) +
+                strlen(banner) +
                 strlen(versionstring) +
                 strlen(kpathsea_version_string), char);
-    sprintf(s, "%s %s %s", BANNER, versionstring, kpathsea_version_string);
+    /* The Web2c version string starts with a space.  */
+    sprintf(s, "%s%s %s", banner, versionstring, kpathsea_version_string);
     pdftexbanner = maketexstring(s);
     xfree(s);
     pdftexbanner_init = true;

========================================================================

--- /usr/local/src/tex/pdftex-1.20a/src/texk/web2c/lib/texmfmp.c.orig	Sat Aug 28 22:49:59 2004
+++ /usr/local/src/tex/pdftex-1.20a/src/texk/web2c/lib/texmfmp.c	Wed Sep 15 23:58:10 2004
@@ -150,6 +150,10 @@
 static int eightbitp;
 #endif /* Omega || eOmega || Aleph */

+#if defined(pdfTeX) || defined(pdfeTeX) || defined(pdfxTeX)
+void setpdftexbanner(char *);
+#endif
+
 #ifdef MP
 /* name of TeX program to pass to makempx */
 static string mpost_tex_program = "";
@@ -169,6 +173,10 @@

   /* Must be initialized before options are parsed.  */
   interactionoption = 4;
+
+#if defined(pdfTeX) || defined(pdfeTeX) || defined(pdfxTeX)
+  setpdftexbanner(BANNER); /* needed by makepdftexbanner() in utils.c */
+#endif

   /* If the user says --help or --version, we need to notice early.  And
      since we want the --ini option, have to do it before getting into

========================================================================

--- /usr/local/src/tex/pdftex-1.20a/src/texk/web2c/pdfetexdir/pdfetex.ch2.orig	Thu Aug 26 23:46:31 2004
+++ /usr/local/src/tex/pdftex-1.20a/src/texk/web2c/pdfetexdir/pdfetex.ch2	Thu Sep 16 00:15:15 2004
@@ -200,6 +200,12 @@
 if eTeX_ex then @<Check for LR anomalies at the end of |ship_out|@>;
 @z

+@x
+pdf_print("/Producer (pdfTeX-");
+@y
+pdf_print("/Producer (pdfeTeX-");
+@z
+
 @x [33.649] l.12912
 exit: {|hpack|}
 @y

========================================================================

--- /usr/local/src/tex/pdftex-1.20a/src/texk/web2c/pdfxtexdir/pdfxtex.ch2.orig	Wed Aug 25 19:16:54 2004
+++ /usr/local/src/tex/pdftex-1.20a/src/texk/web2c/pdfxtexdir/pdfxtex.ch2	Wed Sep 15 23:36:06 2004
@@ -33,3 +33,9 @@
 @y
 @d banner==pdfxTeX_banner
 @z
+
+@x
+pdf_print("/Producer (pdfeTeX-");
+@y
+pdf_print("/Producer (pdfxTeX-");
+@z

========================================================================

From pragma at wxs.nl  Thu Sep 16 19:23:18 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Sep 16 19:23:23 2004
Subject: [NTG-pdftex] bug in graphic inclusion
Message-ID: <4149CC06.2060200@wxs.nl>

Hi,

There is a bug in graphic inclusion. Volker, Fabrice and I could track 
it down to

- when more than 512 multipage documents are included (say 600 two page 
articles) the file systems limit on open files steps in (512 on windows, 
can be enlarged to 2048; dunno about *ix)
- fabrice located the spot in the source

Hans


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From noreply at sarovar.org  Fri Sep 17 00:18:02 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Fri Sep 17 00:19:01 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-116 ] character protrusion: pdftex may
	hang
Message-ID: <E1C84Zm-0002YG-00@sarovar.org>

Bugs item #116, was opened at 2004-09-10 21:58
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=116&group_id=106

Category: hz
Group: v1.20a
Status: Open
Resolution: None
Priority: 7
Submitted By: Nobody (None)
Assigned to: The Thanh Han (hanthethanh)
Summary: character protrusion: pdftex may hang

Initial Comment:
pdfTeX will fail on the following LaTeX file:

----------------------------------------------------
\pdfprotrudechars 2
\documentclass{minimal}
\begin{document}
\fontsize{7}{8}\selectfont

This paragraph consists of more than two lines.
This paragraph consists of more than two lines.
This paragraph consists of more than two lines.

%% same for this paragraph:
% This is \hfill an empty line

\end{document}
----------------------------------------------------

pdfTeX will hang while building the paragraph, so it
seems. 

This does not happen with other font sizes. Also, it
somehow seems to depend on the fonts preloaded in the
format file. If I change this line in preload.ltx:

 \DeclarePreloadSizes{OT1}{cmr}{m}{n}{5,7,10}

so that the font for size 10 will be loaded first, and
recreate the format, all is well. 

I am using:

This is pdfeTeX, Version 3.141592-1.20a-2.2 (MiKTeX 2.4))


Regards,
Robert.


----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2004-09-16 22:18

Message:
Logged In: YES 
user_id=929

seems it's a loop in hz.ch, function total_pw(), always
returning to the reswitch: label. I don't know what's going
on, but supposing that the current line loop or whatever
should end when the post_break(l) is reached, just shifting
the goto reswitch; to this place:

                decr(n);
            end;
            goto reswitch;
        end;
    end;
    total_pw := left_pw(l) + right_pw(r);
end;

seems to make it work. No idea how to test it...

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=116&group_id=106
From ms at artcom-gmbh.de  Fri Sep 17 11:45:52 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Fri Sep 17 11:47:01 2004
Subject: [NTG-pdftex] 1.20b-beta
Message-ID: <20040917094552.GJ20337@artcom8.artcom-gmbh.de>

Hi,
since we know of at least 3 bugs in 1.20a, I'll start the
1.20b-beta series on Monday. Anybody who wants to grab 1.20a out
of p4 should do it soon or will have to fiddle with p4.

Best regards
        Martin 
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From noreply at sarovar.org  Sat Sep 18 15:13:44 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Sat Sep 18 15:14:34 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-112 ] Message "output format initialized
	to" is not always right
Message-ID: <E1C8f28-0001iG-00@sarovar.org>

Bugs item #112, was opened at 2004-09-09 10:13
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=112&group_id=106

Category: None
Group: v1.20a
Status: Open
Resolution: None
Priority: 3
Submitted By: Martin Schr?der (oneiros)
Assigned to: Nobody (None)
>Summary: Message "output format initialized to" is not always right

Initial Comment:
The "output format initialized to DVI|PDF" is issued to
early, which may lead to confusing results.

See the thread "pdftex -ini" at
http://www.ntg.nl/pipermail/ntg-pdftex/2004-September/000727.html

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=112&group_id=106
From noreply at sarovar.org  Sat Sep 18 15:20:26 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Sat Sep 18 15:21:08 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-112 ] Message "output format initialized
	to" is not always right
Message-ID: <E1C8f8c-0001j3-00@sarovar.org>

Bugs item #112, was opened at 2004-09-09 10:13
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=112&group_id=106

Category: None
Group: v1.20a
Status: Open
Resolution: None
Priority: 3
Submitted By: Martin Schr?der (oneiros)
Assigned to: Nobody (None)
>Summary: Message "output format initialized to" is not always right

Initial Comment:
The "output format initialized to DVI|PDF" is issued to
early, which may lead to confusing results.

See the thread "pdftex -ini" at
http://www.ntg.nl/pipermail/ntg-pdftex/2004-September/000727.html

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=112&group_id=106
From noreply at sarovar.org  Sun Sep 19 14:42:45 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Sun Sep 19 14:43:33 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-115 ] character protrusion: some
	characters will not be protruded
Message-ID: <E1C911h-0008Pb-00@sarovar.org>

Bugs item #115, was opened at 2004-09-10 21:57
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=115&group_id=106

Category: hz
Group: v1.20a
Status: Open
Resolution: None
Priority: 5
Submitted By: Nobody (None)
Assigned to: The Thanh Han (hanthethanh)
Summary: character protrusion: some characters will not be protruded

Initial Comment:
Some characters will not be protruded into the right
margin, namely: `-', `--', and `---', if entered like
that. When they occur as \hyphenchar, or as a single
character (e.g. \char123), everything's fine. With the
EC fonts, the same happens for some quote characters.

Here's a plain TeX file showing the problem:

----------------------------------------------------
\tracingoutput 1
\showboxbreadth \maxdimen
\showboxdepth \maxdimen
\pdfprotrudechars=2
\hsize10em

\def\testprotrusion#1{#1\dotfill #1\penalty-10000}

\font\testfont=cmr10\testfont

\newcount\charcount
\charcount=0
\loop
   \rpcode\font\charcount=1000
   \advance\charcount 1
   \ifnum\charcount < 256 \repeat

\noindent
\testprotrusion{A}% OK
\testprotrusion{-}%
\testprotrusion{--}%
\testprotrusion{---}%
\testprotrusion{itworks\-likethis}%
\testprotrusion{\char123}%
\testprotrusion{\char124}%

\font\testfont=ecrm10\testfont
\charcount=0
\loop
   \rpcode\font\charcount=1000
   \advance\charcount 1
   \ifnum\charcount < 256 \repeat

\noindent
\testprotrusion{``}%
\testprotrusion{''}%
\testprotrusion{\char13}% \quotedblbase
\testprotrusion{\char18}% \quotesinglbase
\testprotrusion{Z}% OK

\bye 
----------------------------------------------------

I don't know whether that might be related, but in all
cases, something is being inserted between the
character itself and the right margin by TeX (a
discretionary for the dashes, a \kern for the quote
characters). 

(This is the same bug as reported in the dctt thread
`Randausgleich von Binde- und Trennstrich', 29.8.04)

Regards,
Robert.

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2004-09-19 12:42

Message:
Logged In: YES 
user_id=929

Patch tries to solve the bug. Seems to run with Robert's
example.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=115&group_id=106
From noreply at sarovar.org  Sun Sep 19 15:49:56 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Sun Sep 19 15:51:03 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-115 ] character protrusion: some
	characters will not be protruded
Message-ID: <E1C924i-00014a-00@sarovar.org>

Bugs item #115, was opened at 2004-09-10 21:57
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=115&group_id=106

Category: hz
Group: v1.20a
Status: Open
Resolution: None
Priority: 5
Submitted By: Nobody (None)
Assigned to: The Thanh Han (hanthethanh)
Summary: character protrusion: some characters will not be protruded

Initial Comment:
Some characters will not be protruded into the right
margin, namely: `-', `--', and `---', if entered like
that. When they occur as \hyphenchar, or as a single
character (e.g. \char123), everything's fine. With the
EC fonts, the same happens for some quote characters.

Here's a plain TeX file showing the problem:

----------------------------------------------------
\tracingoutput 1
\showboxbreadth \maxdimen
\showboxdepth \maxdimen
\pdfprotrudechars=2
\hsize10em

\def\testprotrusion#1{#1\dotfill #1\penalty-10000}

\font\testfont=cmr10\testfont

\newcount\charcount
\charcount=0
\loop
   \rpcode\font\charcount=1000
   \advance\charcount 1
   \ifnum\charcount < 256 \repeat

\noindent
\testprotrusion{A}% OK
\testprotrusion{-}%
\testprotrusion{--}%
\testprotrusion{---}%
\testprotrusion{itworks\-likethis}%
\testprotrusion{\char123}%
\testprotrusion{\char124}%

\font\testfont=ecrm10\testfont
\charcount=0
\loop
   \rpcode\font\charcount=1000
   \advance\charcount 1
   \ifnum\charcount < 256 \repeat

\noindent
\testprotrusion{``}%
\testprotrusion{''}%
\testprotrusion{\char13}% \quotedblbase
\testprotrusion{\char18}% \quotesinglbase
\testprotrusion{Z}% OK

\bye 
----------------------------------------------------

I don't know whether that might be related, but in all
cases, something is being inserted between the
character itself and the right margin by TeX (a
discretionary for the dashes, a \kern for the quote
characters). 

(This is the same bug as reported in the dctt thread
`Randausgleich von Binde- und Trennstrich', 29.8.04)

Regards,
Robert.

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2004-09-19 13:49

Message:
Logged In: YES 
user_id=929

This patch should work now, see PDF files in the tarball.

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2004-09-19 12:42

Message:
Logged In: YES 
user_id=929

Patch tries to solve the bug. Seems to run with Robert's
example.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=115&group_id=106
From noreply at sarovar.org  Sun Sep 19 19:09:17 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Sun Sep 19 19:10:07 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-115 ] character protrusion: some
	characters will not be protruded
Message-ID: <E1C95Bd-0005Ea-00@sarovar.org>

Bugs item #115, was opened at 2004-09-10 21:57
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=115&group_id=106

Category: hz
Group: v1.20a
Status: Open
Resolution: None
Priority: 5
Submitted By: Nobody (None)
Assigned to: The Thanh Han (hanthethanh)
Summary: character protrusion: some characters will not be protruded

Initial Comment:
Some characters will not be protruded into the right
margin, namely: `-', `--', and `---', if entered like
that. When they occur as \hyphenchar, or as a single
character (e.g. \char123), everything's fine. With the
EC fonts, the same happens for some quote characters.

Here's a plain TeX file showing the problem:

----------------------------------------------------
\tracingoutput 1
\showboxbreadth \maxdimen
\showboxdepth \maxdimen
\pdfprotrudechars=2
\hsize10em

\def\testprotrusion#1{#1\dotfill #1\penalty-10000}

\font\testfont=cmr10\testfont

\newcount\charcount
\charcount=0
\loop
   \rpcode\font\charcount=1000
   \advance\charcount 1
   \ifnum\charcount < 256 \repeat

\noindent
\testprotrusion{A}% OK
\testprotrusion{-}%
\testprotrusion{--}%
\testprotrusion{---}%
\testprotrusion{itworks\-likethis}%
\testprotrusion{\char123}%
\testprotrusion{\char124}%

\font\testfont=ecrm10\testfont
\charcount=0
\loop
   \rpcode\font\charcount=1000
   \advance\charcount 1
   \ifnum\charcount < 256 \repeat

\noindent
\testprotrusion{``}%
\testprotrusion{''}%
\testprotrusion{\char13}% \quotedblbase
\testprotrusion{\char18}% \quotesinglbase
\testprotrusion{Z}% OK

\bye 
----------------------------------------------------

I don't know whether that might be related, but in all
cases, something is being inserted between the
character itself and the right margin by TeX (a
discretionary for the dashes, a \kern for the quote
characters). 

(This is the same bug as reported in the dctt thread
`Randausgleich von Binde- und Trennstrich', 29.8.04)

Regards,
Robert.

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2004-09-19 17:09

Message:
Logged In: YES 
user_id=929

still problems with expanded fonts, see PDF

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2004-09-19 13:49

Message:
Logged In: YES 
user_id=929

This patch should work now, see PDF files in the tarball.

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2004-09-19 12:42

Message:
Logged In: YES 
user_id=929

Patch tries to solve the bug. Seems to run with Robert's
example.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=115&group_id=106
From noreply at sarovar.org  Mon Sep 20 01:39:46 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Mon Sep 20 01:40:42 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-115 ] character protrusion: some
	characters will not be protruded
Message-ID: <E1C9BHW-00061e-00@sarovar.org>

Bugs item #115, was opened at 2004-09-10 21:57
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=115&group_id=106

Category: hz
Group: v1.20a
Status: Open
Resolution: None
Priority: 5
Submitted By: Nobody (None)
Assigned to: The Thanh Han (hanthethanh)
Summary: character protrusion: some characters will not be protruded

Initial Comment:
Some characters will not be protruded into the right
margin, namely: `-', `--', and `---', if entered like
that. When they occur as \hyphenchar, or as a single
character (e.g. \char123), everything's fine. With the
EC fonts, the same happens for some quote characters.

Here's a plain TeX file showing the problem:

----------------------------------------------------
\tracingoutput 1
\showboxbreadth \maxdimen
\showboxdepth \maxdimen
\pdfprotrudechars=2
\hsize10em

\def\testprotrusion#1{#1\dotfill #1\penalty-10000}

\font\testfont=cmr10\testfont

\newcount\charcount
\charcount=0
\loop
   \rpcode\font\charcount=1000
   \advance\charcount 1
   \ifnum\charcount < 256 \repeat

\noindent
\testprotrusion{A}% OK
\testprotrusion{-}%
\testprotrusion{--}%
\testprotrusion{---}%
\testprotrusion{itworks\-likethis}%
\testprotrusion{\char123}%
\testprotrusion{\char124}%

\font\testfont=ecrm10\testfont
\charcount=0
\loop
   \rpcode\font\charcount=1000
   \advance\charcount 1
   \ifnum\charcount < 256 \repeat

\noindent
\testprotrusion{``}%
\testprotrusion{''}%
\testprotrusion{\char13}% \quotedblbase
\testprotrusion{\char18}% \quotesinglbase
\testprotrusion{Z}% OK

\bye 
----------------------------------------------------

I don't know whether that might be related, but in all
cases, something is being inserted between the
character itself and the right margin by TeX (a
discretionary for the dashes, a \kern for the quote
characters). 

(This is the same bug as reported in the dctt thread
`Randausgleich von Binde- und Trennstrich', 29.8.04)

Regards,
Robert.

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2004-09-19 23:39

Message:
Logged In: YES 
user_id=929

This patch should solve now the problems with character
protrusion, particularily also in combination with font
expansion, see the attached PDF files and the README file.

Have fun! :-)

Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2004-09-19 17:09

Message:
Logged In: YES 
user_id=929

still problems with expanded fonts, see PDF

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2004-09-19 13:49

Message:
Logged In: YES 
user_id=929

This patch should work now, see PDF files in the tarball.

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2004-09-19 12:42

Message:
Logged In: YES 
user_id=929

Patch tries to solve the bug. Seems to run with Robert's
example.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=115&group_id=106
From noreply at sarovar.org  Wed Sep 22 23:13:56 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Sep 22 23:14:41 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-199 ] font expansion: characters may
	vanish
Message-ID: <E1CAER2-0000Iv-00@sarovar.org>

Bugs item #199, was opened at 2004-09-23 02:43
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=199&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Nobody (None)
Assigned to: Nobody (None)
Summary: font expansion: characters may vanish

Initial Comment:

For extremely large shrink values, characters may not
be visible in the pdf output (although the fonts seem
to be embedded), e.g. in the following file:

%----------------------------------------------
\hsize220pt
\pdfadjustspacing=2
\font\testfont=cmr17 at 90pt\testfont
\pdffontexpand\font 0 1000 100 autoexpand
\efcode\font`\s=500
\efcode\font`\e=500
\efcode\font`\y=500

see what you get\penalty-10000

\bye
%----------------------------------------------

or even worse:

%----------------------------------------------
\hsize180pt
\pdfadjustspacing=2
\font\testfont=cmr17 at 90pt\testfont
\pdffontexpand\font 0 1000 100 autoexpand

see what you get\penalty-10000

\bye
%----------------------------------------------

The font `cmr17-Extend_100' will not be visible.

I only managed to achieve this effect with extremely
large font sizes, which may or may not be related (it
could also be that I didn't find the `magic' \hsize).

If you force the characters to shrink even more, for
example by setting \hsize to 120pt in the latter test
file, the unexpanded font will be used, thus printing
the characters over each other.


Regards,
Robert  <w.m.l@gmx.net>

PS. I didn't bother to create expanded fonts, so I
cannot tell whether it depends on the autoexpand feature.


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=199&group_id=106
From noreply at sarovar.org  Thu Sep 23 00:02:06 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Sep 23 00:02:52 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-199 ] font expansion: characters may
	vanish
Message-ID: <E1CAFBe-00010G-00@sarovar.org>

Bugs item #199, was opened at 2004-09-23 02:43
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=199&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Nobody (None)
Assigned to: Nobody (None)
Summary: font expansion: characters may vanish

Initial Comment:

For extremely large shrink values, characters may not
be visible in the pdf output (although the fonts seem
to be embedded), e.g. in the following file:

%----------------------------------------------
\hsize220pt
\pdfadjustspacing=2
\font\testfont=cmr17 at 90pt\testfont
\pdffontexpand\font 0 1000 100 autoexpand
\efcode\font`\s=500
\efcode\font`\e=500
\efcode\font`\y=500

see what you get\penalty-10000

\bye
%----------------------------------------------

or even worse:

%----------------------------------------------
\hsize180pt
\pdfadjustspacing=2
\font\testfont=cmr17 at 90pt\testfont
\pdffontexpand\font 0 1000 100 autoexpand

see what you get\penalty-10000

\bye
%----------------------------------------------

The font `cmr17-Extend_100' will not be visible.

I only managed to achieve this effect with extremely
large font sizes, which may or may not be related (it
could also be that I didn't find the `magic' \hsize).

If you force the characters to shrink even more, for
example by setting \hsize to 120pt in the latter test
file, the unexpanded font will be used, thus printing
the characters over each other.


Regards,
Robert  <w.m.l@gmx.net>

PS. I didn't bother to create expanded fonts, so I
cannot tell whether it depends on the autoexpand feature.


----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2004-09-23 03:32

Message:
Logged In: NO 

Obviously, I filed this report too early. Sorry about that.

It is not a pdftex bug, but appears to be a bug in Acrobat
Reader 6. (Just to tell you what I saw:) At zoom level 200%
or larger, the font most shrunk (Extend_100) is not visible
on screen. That is, in the first example, I only see "See y
e", in the second, nothing at all. However, if I zoom out,
the characters re-appear. 

Sorry for not zooming out earlier. 

Regards,
Robert.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=199&group_id=106
From frank at debian.org  Sat Sep 25 10:25:03 2004
From: frank at debian.org (=?iso-8859-1?q?Frank_K=FCster?=)
Date: Mon Sep 27 10:21:31 2004
Subject: [NTG-pdftex] Re: Bug#273084: pdftex.1.gz: --help has basic info
 that man page lacks
In-Reply-To: <87656434sf.fsf@jidanni.org> (Dan Jacobson's message of "Fri,
	24 Sep 2004 08:10:40 +0800")
References: <E1CAN08-0003CF-6D@jidanni1>
	<87ekks7lus.fsf@alhambra.bioz.unibas.ch> <87656434sf.fsf@jidanni.org>
Message-ID: <871xgqkb6o.fsf@alhambra.bioz.unibas.ch>

Hi pdftex team,

a user of our Debian package containing pdftex suggested some changes to
the man page, along the lines of the text displayed with "pdftex --help".


Dan Jacobson <jidanni@jidanni.org> wrote:

[I pointed him to the sentence that refers the user to the "info file or
manual Web2C]

> f> The complete documentation for this version of TeX can be found
> f> in the info file ...
> $ info pdftex
> gets the manpage.
>
> Wait, I see, you should say
>
> The complete documentation for this version of TeX can be found in the
> Info manual Web2C: A TeX implementation.
>
> or something like that.

You see, the "or" between 'info file' and 'manual' could be understand
in the sense that there are two files.

> f> What wording would you suggest?
>
> SYNOPSIS should agree with --help:
>
>  pdftex [OPTION]... [TEXNAME[.tex]] [COMMANDS]

The TEXNAME[.tex] part is missing currently. Probably it's better to use

pdftex [options] [TeX-commands] [texname[.tex] | TeX-commands]

to indicate that one can combine TeX-commands at the beginning with an
input file.

> [or use lower case.]

The help message with its uppercase arguments is probably from one of
Knuth's files, isn't it?

> 
> Indeed, you could move the pdftex --help section running from
>
>         Run pdfTeX on TEXNAME, usually creating TEXNAME.pdf.
> to
>         If no arguments or options are specified, prompt for input.
>
> to the man page, because it rather belongs there.


Sorry, no patch - I don't understand how pdftex.man is generated from
the m4 file.

Regards, Frank
-- 
Frank K?ster, Biozentrum der Univ. Basel
Abt. Biophysikalische Chemie

From noreply at sarovar.org  Mon Sep 27 17:26:03 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Mon Sep 27 17:26:58 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-204 ] pdftex.1.gz: --help has basic info
Message-ID: <E1CBxO7-0000IT-00@sarovar.org>

Bugs item #204, was opened at 2004-09-27 17:26
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=204&group_id=106

Category: Documentation
Group: None
Status: Open
Resolution: None
Priority: 4
Submitted By: Martin Schr?der (oneiros)
Assigned to: Hartmut Henkel (hhenkel)
Summary: pdftex.1.gz: --help has basic info
pdftex.1.gz: --help has basic info that man page lacks

Initial Comment:
Frank K?ster reports things missing in the man page
that are in the output of "pdftex --help".

See
http://www.ntg.nl/pipermail/ntg-pdftex/2004-September/000767.html

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=204&group_id=106
From noreply at sarovar.org  Mon Sep 27 17:27:08 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Mon Sep 27 17:28:04 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-199 ] font expansion: characters may
	vanish
Message-ID: <E1CBxPA-0000Id-00@sarovar.org>

Bugs item #199, was opened at 2004-09-22 23:13
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=199&group_id=106

Category: None
Group: None
Status: Open
>Resolution: Rejected
Priority: 5
Submitted By: Nobody (None)
Assigned to: Nobody (None)
Summary: font expansion: characters may vanish

Initial Comment:

For extremely large shrink values, characters may not
be visible in the pdf output (although the fonts seem
to be embedded), e.g. in the following file:

%----------------------------------------------
\hsize220pt
\pdfadjustspacing=2
\font\testfont=cmr17 at 90pt\testfont
\pdffontexpand\font 0 1000 100 autoexpand
\efcode\font`\s=500
\efcode\font`\e=500
\efcode\font`\y=500

see what you get\penalty-10000

\bye
%----------------------------------------------

or even worse:

%----------------------------------------------
\hsize180pt
\pdfadjustspacing=2
\font\testfont=cmr17 at 90pt\testfont
\pdffontexpand\font 0 1000 100 autoexpand

see what you get\penalty-10000

\bye
%----------------------------------------------

The font `cmr17-Extend_100' will not be visible.

I only managed to achieve this effect with extremely
large font sizes, which may or may not be related (it
could also be that I didn't find the `magic' \hsize).

If you force the characters to shrink even more, for
example by setting \hsize to 120pt in the latter test
file, the unexpanded font will be used, thus printing
the characters over each other.


Regards,
Robert  <w.m.l@gmx.net>

PS. I didn't bother to create expanded fonts, so I
cannot tell whether it depends on the autoexpand feature.


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2004-09-27 17:27

Message:
Logged In: YES 
user_id=421

An Acrobat Reader bug. :-)

----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2004-09-23 00:02

Message:
Logged In: NO 

Obviously, I filed this report too early. Sorry about that.

It is not a pdftex bug, but appears to be a bug in Acrobat
Reader 6. (Just to tell you what I saw:) At zoom level 200%
or larger, the font most shrunk (Extend_100) is not visible
on screen. That is, in the first example, I only see "See y
e", in the second, nothing at all. However, if I zoom out,
the characters re-appear. 

Sorry for not zooming out earlier. 

Regards,
Robert.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=199&group_id=106
From noreply at sarovar.org  Mon Sep 27 17:27:50 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Mon Sep 27 17:28:43 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-204 ] pdftex.1.gz: --help has basic info
	that man page lacks
Message-ID: <E1CBxPq-0000Iw-00@sarovar.org>

Bugs item #204, was opened at 2004-09-27 17:26
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=204&group_id=106

Category: Documentation
Group: None
Status: Open
Resolution: None
Priority: 4
Submitted By: Martin Schr?der (oneiros)
Assigned to: Hartmut Henkel (hhenkel)
>Summary: pdftex.1.gz: --help has basic info that man page lacks

Initial Comment:
Frank K?ster reports things missing in the man page
that are in the output of "pdftex --help".

See
http://www.ntg.nl/pipermail/ntg-pdftex/2004-September/000767.html

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=204&group_id=106
From noreply at sarovar.org  Mon Sep 27 17:28:18 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Mon Sep 27 17:29:12 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-199 ] font expansion: characters may
	vanish
Message-ID: <E1CBxQI-0000JE-00@sarovar.org>

Bugs item #199, was opened at 2004-09-22 23:13
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=199&group_id=106

Category: None
Group: None
>Status: Closed
Resolution: Rejected
Priority: 5
Submitted By: Nobody (None)
Assigned to: Nobody (None)
Summary: font expansion: characters may vanish

Initial Comment:

For extremely large shrink values, characters may not
be visible in the pdf output (although the fonts seem
to be embedded), e.g. in the following file:

%----------------------------------------------
\hsize220pt
\pdfadjustspacing=2
\font\testfont=cmr17 at 90pt\testfont
\pdffontexpand\font 0 1000 100 autoexpand
\efcode\font`\s=500
\efcode\font`\e=500
\efcode\font`\y=500

see what you get\penalty-10000

\bye
%----------------------------------------------

or even worse:

%----------------------------------------------
\hsize180pt
\pdfadjustspacing=2
\font\testfont=cmr17 at 90pt\testfont
\pdffontexpand\font 0 1000 100 autoexpand

see what you get\penalty-10000

\bye
%----------------------------------------------

The font `cmr17-Extend_100' will not be visible.

I only managed to achieve this effect with extremely
large font sizes, which may or may not be related (it
could also be that I didn't find the `magic' \hsize).

If you force the characters to shrink even more, for
example by setting \hsize to 120pt in the latter test
file, the unexpanded font will be used, thus printing
the characters over each other.


Regards,
Robert  <w.m.l@gmx.net>

PS. I didn't bother to create expanded fonts, so I
cannot tell whether it depends on the autoexpand feature.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2004-09-27 17:27

Message:
Logged In: YES 
user_id=421

An Acrobat Reader bug. :-)

----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2004-09-23 00:02

Message:
Logged In: NO 

Obviously, I filed this report too early. Sorry about that.

It is not a pdftex bug, but appears to be a bug in Acrobat
Reader 6. (Just to tell you what I saw:) At zoom level 200%
or larger, the font most shrunk (Extend_100) is not visible
on screen. That is, in the first example, I only see "See y
e", in the second, nothing at all. However, if I zoom out,
the characters re-appear. 

Sorry for not zooming out earlier. 

Regards,
Robert.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=199&group_id=106
From noreply at sarovar.org  Wed Sep 29 00:06:46 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Sep 29 00:07:50 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-199 ] font expansion: characters may
	vanish
Message-ID: <E1CCQ7S-0007Qi-00@sarovar.org>

Bugs item #199, was opened at 2004-09-23 02:43
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=199&group_id=106

Category: None
Group: None
Status: Closed
Resolution: Rejected
Priority: 5
Submitted By: Nobody (None)
Assigned to: Nobody (None)
Summary: font expansion: characters may vanish

Initial Comment:

For extremely large shrink values, characters may not
be visible in the pdf output (although the fonts seem
to be embedded), e.g. in the following file:

%----------------------------------------------
\hsize220pt
\pdfadjustspacing=2
\font\testfont=cmr17 at 90pt\testfont
\pdffontexpand\font 0 1000 100 autoexpand
\efcode\font`\s=500
\efcode\font`\e=500
\efcode\font`\y=500

see what you get\penalty-10000

\bye
%----------------------------------------------

or even worse:

%----------------------------------------------
\hsize180pt
\pdfadjustspacing=2
\font\testfont=cmr17 at 90pt\testfont
\pdffontexpand\font 0 1000 100 autoexpand

see what you get\penalty-10000

\bye
%----------------------------------------------

The font `cmr17-Extend_100' will not be visible.

I only managed to achieve this effect with extremely
large font sizes, which may or may not be related (it
could also be that I didn't find the `magic' \hsize).

If you force the characters to shrink even more, for
example by setting \hsize to 120pt in the latter test
file, the unexpanded font will be used, thus printing
the characters over each other.


Regards,
Robert  <w.m.l@gmx.net>

PS. I didn't bother to create expanded fonts, so I
cannot tell whether it depends on the autoexpand feature.


----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2004-09-29 03:36

Message:
Logged In: NO 

But the problem I mentioned above in the last paragraph
isn't related to Acrobat Reader, is it?
% ------------------------------------------
\hsize35pt
\pdfadjustspacing=2
\font\testfont=cmr12\testfont
\pdffontexpand\font 0 1000 100 autoexpand

text text text text\penalty-10000

\bye
% ------------------------------------------

Seems like a sanity check is missing somewhere. If my guess
is right, pdftex tries to use the font `cmr17-Extend_0',
which (incorrectly) translates into the base font. What it
should probably do is use the smallest available expanded
font, i.e. in this case Extend_100, and make the line overfull.

Regards,
Robert.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2004-09-27 20:57

Message:
Logged In: YES 
user_id=421

An Acrobat Reader bug. :-)

----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2004-09-23 03:32

Message:
Logged In: NO 

Obviously, I filed this report too early. Sorry about that.

It is not a pdftex bug, but appears to be a bug in Acrobat
Reader 6. (Just to tell you what I saw:) At zoom level 200%
or larger, the font most shrunk (Extend_100) is not visible
on screen. That is, in the first example, I only see "See y
e", in the second, nothing at all. However, if I zoom out,
the characters re-appear. 

Sorry for not zooming out earlier. 

Regards,
Robert.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=199&group_id=106
From noreply at sarovar.org  Wed Sep 29 00:09:23 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Wed Sep 29 00:10:23 2004
Subject: [NTG-pdftex] [ pdftex-Bugs-115 ] character protrusion: some
	characters will not be protruded
Message-ID: <E1CCQ9z-0007UB-00@sarovar.org>

Bugs item #115, was opened at 2004-09-11 03:27
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=115&group_id=106

Category: hz
Group: v1.20a
Status: Open
Resolution: None
Priority: 5
Submitted By: Nobody (None)
Assigned to: The Thanh Han (hanthethanh)
Summary: character protrusion: some characters will not be protruded

Initial Comment:
Some characters will not be protruded into the right
margin, namely: `-', `--', and `---', if entered like
that. When they occur as \hyphenchar, or as a single
character (e.g. \char123), everything's fine. With the
EC fonts, the same happens for some quote characters.

Here's a plain TeX file showing the problem:

----------------------------------------------------
\tracingoutput 1
\showboxbreadth \maxdimen
\showboxdepth \maxdimen
\pdfprotrudechars=2
\hsize10em

\def\testprotrusion#1{#1\dotfill #1\penalty-10000}

\font\testfont=cmr10\testfont

\newcount\charcount
\charcount=0
\loop
   \rpcode\font\charcount=1000
   \advance\charcount 1
   \ifnum\charcount < 256 \repeat

\noindent
\testprotrusion{A}% OK
\testprotrusion{-}%
\testprotrusion{--}%
\testprotrusion{---}%
\testprotrusion{itworks\-likethis}%
\testprotrusion{\char123}%
\testprotrusion{\char124}%

\font\testfont=ecrm10\testfont
\charcount=0
\loop
   \rpcode\font\charcount=1000
   \advance\charcount 1
   \ifnum\charcount < 256 \repeat

\noindent
\testprotrusion{``}%
\testprotrusion{''}%
\testprotrusion{\char13}% \quotedblbase
\testprotrusion{\char18}% \quotesinglbase
\testprotrusion{Z}% OK

\bye 
----------------------------------------------------

I don't know whether that might be related, but in all
cases, something is being inserted between the
character itself and the right margin by TeX (a
discretionary for the dashes, a \kern for the quote
characters). 

(This is the same bug as reported in the dctt thread
`Randausgleich von Binde- und Trennstrich', 29.8.04)

Regards,
Robert.

----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2004-09-29 03:39

Message:
Logged In: NO 

In the README to the patch, you say:

> To scroll back over unwanted things I now have extended 
> the discardable() macro. There was an error in the 
> original macro anyway, as
>
> ((type(#) = kern_node) and (subtype(#) <> explicit))
>
> is to be discarded, but
>
> ((type(#) = kern_node) and (subtype(#) = explicit))
>
> is not.

Does that mean that `\kern1pt A\kern1pt' will not get
protruded? 
And, what about `\kern1pt\unkern A\kern1pt\unkern'?

Unfortunately, I'm not able to to test your patch. Could you
(or somebody) run this file, and comment on the output,
please, or upload the PDF?

% -----------------------------------------------------
\pdfprotrudechars=2
\hsize5em
\def\testprotrusion#1{#1 \hfill #1\penalty-10000}
\font\testfont=cmr10\testfont

\lpcode\font`\A=1000
\rpcode\font`\A=1000

\noindent
\testprotrusion{A}
\testprotrusion{\hskip0ptA\hskip0pt}
\testprotrusion{\kern1exA\kern1ex}
\testprotrusion{\kern1ex\unkern A\kern1ex\unkern}
\testprotrusion{\kern1ex\unkern\kern1ex\unkern
A\kern1ex\unkern\kern1ex\unkern}
\testprotrusion{\kern1ex\kern1ex\unkern\unkern
A\kern1ex\kern1ex\unkern\unkern}
\testprotrusion{Z}

\bye
% -----------------------------------------------------

My concern is about LaTeX packages which might insert kerns
as markers. For example, the csquotes package, or the
footmisc package.

I suppose that protrusion should take place at every point
where TeX allows a line break -- is that correct?


Regards,
Robert

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2004-09-20 05:09

Message:
Logged In: YES 
user_id=929

This patch should solve now the problems with character
protrusion, particularily also in combination with font
expansion, see the attached PDF files and the README file.

Have fun! :-)

Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2004-09-19 22:39

Message:
Logged In: YES 
user_id=929

still problems with expanded fonts, see PDF

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2004-09-19 19:19

Message:
Logged In: YES 
user_id=929

This patch should work now, see PDF files in the tarball.

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2004-09-19 18:12

Message:
Logged In: YES 
user_id=929

Patch tries to solve the bug. Seems to run with Robert's
example.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=115&group_id=106
