From ms@artcom-gmbh.de  Thu Jul  1 15:37:00 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu, 1 Jul 2004 16:37:00 +0200
Subject: [NTG-pdftex] open problems with 1.20a
Message-ID: <20040701143700.GP8095@artcom8.artcom-gmbh.de>

- hz problems.

Anything else?

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From pragma@wxs.nl  Thu Jul  1 15:48:34 2004
From: pragma@wxs.nl (Hans Hagen)
Date: Thu, 01 Jul 2004 16:48:34 +0200
Subject: [NTG-pdftex] open problems with 1.20a
In-Reply-To: <20040701143700.GP8095@artcom8.artcom-gmbh.de>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de>
Message-ID: <40E42442.9020801@wxs.nl>

Martin Schröder wrote:

>- hz problems.
>  
>
not that i know of 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From ms@artcom-gmbh.de  Thu Jul  1 16:03:47 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu, 1 Jul 2004 17:03:47 +0200
Subject: [NTG-pdftex] open problems with 1.20a
In-Reply-To: <40E42442.9020801@wxs.nl>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de> <40E42442.9020801@wxs.nl>
Message-ID: <20040701150347.GR8095@artcom8.artcom-gmbh.de>

On 2004-07-01 16:48:34 +0200, Hans Hagen wrote:
> Martin Schröder wrote:
> >- hz problems.
> not that i know of 

http://www.ntg.nl/pipermail/ntg-pdftex/2004-June/000576.html

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From oberdiek@uni-freiburg.de  Thu Jul  1 16:17:55 2004
From: oberdiek@uni-freiburg.de (Heiko Oberdiek)
Date: Thu, 1 Jul 2004 17:17:55 +0200
Subject: [NTG-pdftex] open problems with 1.20a
In-Reply-To: <20040701143700.GP8095@artcom8.artcom-gmbh.de>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de>
Message-ID: <20040701151755.GA4582@m0A02325D.vpn.uni-freiburg.de>

On Thu, Jul 01, 2004 at 04:37:00PM +0200, Martin Schr=F6der wrote:

> Anything else?

There was a segmentation fault problem with large images,
discussed on de.comp.text.tex, that was AFAIK never reported
on the *pdftex mailing lists.

Message-ID: c8ccnp$fvo$1@n.ruf.uni-freiburg.de

Yours sincerely
  Heiko <oberdiek@uni-freiburg.de>
--=20

From pragma@wxs.nl  Thu Jul  1 16:19:41 2004
From: pragma@wxs.nl (Hans Hagen)
Date: Thu, 01 Jul 2004 17:19:41 +0200
Subject: [NTG-pdftex] open problems with 1.20a
In-Reply-To: <20040701150347.GR8095@artcom8.artcom-gmbh.de>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de> <40E42442.9020801@wxs.nl> <20040701150347.GR8095@artcom8.artcom-gmbh.de>
Message-ID: <40E42B8D.6010903@wxs.nl>

Martin Schröder wrote:

>On 2004-07-01 16:48:34 +0200, Hans Hagen wrote:
>  
>
>>Martin Schröder wrote:
>>    
>>
>>>- hz problems.
>>>      
>>>
>>not that i know of 
>>    
>>
eh .. the hz problem si still there; there are *no other problems* that i know of -) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From ms@artcom-gmbh.de  Thu Jul  1 16:38:22 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu, 1 Jul 2004 17:38:22 +0200
Subject: [NTG-pdftex] open problems with 1.20a
In-Reply-To: <20040701151755.GA4582@m0A02325D.vpn.uni-freiburg.de>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de> <20040701151755.GA4582@m0A02325D.vpn.uni-freiburg.de>
Message-ID: <20040701153822.GS8095@artcom8.artcom-gmbh.de>

On 2004-07-01 17:17:55 +0200, Heiko Oberdiek wrote:
> There was a segmentation fault problem with large images,
> discussed on de.comp.text.tex, that was AFAIK never reported
> on the *pdftex mailing lists.
> 
> Message-ID: c8ccnp$fvo$1@n.ruf.uni-freiburg.de

Thanks. The file is at
http://www.ndh.net/home/mauz/majox.de/newsgroup/compile-ablauf.png

Hartmut?

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From hartmut_henkel@gmx.de  Thu Jul  1 19:24:05 2004
From: hartmut_henkel@gmx.de (Hartmut Henkel)
Date: Thu, 1 Jul 2004 20:24:05 +0200 (CEST)
Subject: [NTG-pdftex] open problems with 1.20a
In-Reply-To: <20040701153822.GS8095@artcom8.artcom-gmbh.de>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de>
 <20040701151755.GA4582@m0A02325D.vpn.uni-freiburg.de>
 <20040701153822.GS8095@artcom8.artcom-gmbh.de>
Message-ID: <Pine.LNX.4.60.0407012022450.1623@hahepc1.hahe>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.

---1463811840-1033448193-1088706245=:1623
Content-Type: TEXT/PLAIN; charset=iso-8859-1; format=flowed
Content-Transfer-Encoding: QUOTED-PRINTABLE

On Thu, 1 Jul 2004, Martin Schr=F6der wrote:

> Thanks. The file is at
> http://www.ndh.net/home/mauz/majox.de/newsgroup/compile-ablauf.png
>
> Hartmut?

with rc4 i get ./compile-ablauf.pngSpeicherzugriffsfehler

will check...

Regards, Hartmut

---1463811840-1033448193-1088706245=:1623--

From hartmut_henkel@gmx.de  Thu Jul  1 20:53:57 2004
From: hartmut_henkel@gmx.de (Hartmut Henkel)
Date: Thu, 1 Jul 2004 21:53:57 +0200 (CEST)
Subject: [NTG-pdftex] open problems with 1.20a
In-Reply-To: <20040701153822.GS8095@artcom8.artcom-gmbh.de>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de>
 <20040701151755.GA4582@m0A02325D.vpn.uni-freiburg.de>
 <20040701153822.GS8095@artcom8.artcom-gmbh.de>
Message-ID: <Pine.LNX.4.60.0407012150130.30917@hahepc1.hahe>

seems the pdf_buf is overrun by the very long re-zipped image lines. By 
this weird pointer garblings happen (valgrind). E. g. increasing 
pdf_buf_size from 16384 to 26384 makes it run (but is not yet the 
general solution).

Regards, Hartmut

From hartmut_henkel@gmx.de  Thu Jul  1 22:46:09 2004
From: hartmut_henkel@gmx.de (Hartmut Henkel)
Date: Thu, 1 Jul 2004 23:46:09 +0200 (CEST)
Subject: [NTG-pdftex] open problems with 1.20a
In-Reply-To: <20040701153822.GS8095@artcom8.artcom-gmbh.de>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de>
 <20040701151755.GA4582@m0A02325D.vpn.uni-freiburg.de>
 <20040701153822.GS8095@artcom8.artcom-gmbh.de>
Message-ID: <Pine.LNX.4.60.0407012321510.4271@hahepc1.hahe>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.

---1463811840-2145927686-1088718369=:4271
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE

On Thu, 1 Jul 2004, Martin Schr=F6der wrote:

> Thanks. The file is at
> http://www.ndh.net/home/mauz/majox.de/newsgroup/compile-ablauf.png

The pdf_buf (pdf_buf_size =3D 16384 bytes) is overrun by the long lines
(18051 pixels, R + G + B) in writepng(). There is always the pdfroom()
macro called, but why then isn't the overrun detected? The reason is in
ptexmac.h, whose pdfroom(n) macro is used (and not the pdf_room(#) macro
from pdftex.ch!). Funnily in ptexmac.h these macro lines

    if (pdfbufsize - n < 0)                             \
        pdftex_fail("PDF output buffer overflowed");    \

do never flag any overflow, but these

    if (pdfbufsize < n)                                 \
        pdftex_fail("PDF output buffer overflowed");    \

work ok, e. g. an overflow error is generated with the given image.
Macro weirdness, something with signed/unsigned?

So this would be a change to ptexmac.h.

Similar subtraction is done also in pdf_room(#) in pdftex.ch, so maybe
one should change this also, to be safe.

Then for handling such big images one could increase pdf_buf_size to
maybe 25000. Instead here is a patch that cuts arbitrary long image
lines into snipplets always fitting into pdf_buf_size. Tested with the
above image.

Regards, Hartmut


--- writepng.c.orig=09Mon Jul  1 18:07:00 2002
+++ writepng.c=09Thu Jul  1 23:14:33 2004
@@ -67,7 +67,7 @@

 void write_png(integer img)
 {
-    int i, j;
+    int i, j, k, l;
     integer palette_objnum =3D 0;
     png_bytep row, *rows;
     pdf_puts("/Type /XObject\n/Subtype /Image\n");
@@ -100,9 +100,14 @@
         row =3D xtalloc(png_info(img)->rowbytes, png_byte);
         for (i =3D 0; i < (int)png_info(img)->height; i++) {
             png_read_row(png_ptr(img), row, NULL);
-            pdfroom(png_info(img)->rowbytes);
-            for (j =3D 0; j < (int)png_info(img)->rowbytes; j++)
-                pdfbuf[pdfptr++] =3D row[j];
+=09    k =3D png_info(img)->rowbytes;
+=09    while(k > 0) {
+=09=09l =3D (k > pdfbufsize)? pdfbufsize : k;
+=09=09pdfroom(l);
+=09=09for (j =3D 0; j < l; j++)
+=09=09    pdfbuf[pdfptr++] =3D row[j];
+=09=09k -=3D l;
+=09    }
         }
         xfree(row);
     }
@@ -115,9 +120,14 @@
         png_read_image(png_ptr(img), rows);
         for (i =3D 0; i < (int)png_info(img)->height; i++) {
             row =3D rows[i];
-            pdfroom(png_info(img)->rowbytes);
-            for (j =3D 0; j < (int)png_info(img)->rowbytes; j++)
-                pdfbuf[pdfptr++] =3D *row++;
+=09    k =3D png_info(img)->rowbytes;
+=09    while(k > 0) {
+=09=09l =3D (k > pdfbufsize)? pdfbufsize : k;
+=09=09pdfroom(l);
+=09=09for (j =3D 0; j < l; j++)
+=09=09    pdfbuf[pdfptr++] =3D *row++;
+=09=09k -=3D l;
+=09    }
             xfree(rows[i]);
         }
         xfree(rows);



---1463811840-2145927686-1088718369=:4271--

From hartmut_henkel@gmx.de  Fri Jul  2 01:09:43 2004
From: hartmut_henkel@gmx.de (Hartmut Henkel)
Date: Fri, 2 Jul 2004 02:09:43 +0200 (CEST)
Subject: [NTG-pdftex] open problems with 1.20a
In-Reply-To: <Pine.LNX.4.60.0407012321510.4271@hahepc1.hahe>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de>
 <20040701151755.GA4582@m0A02325D.vpn.uni-freiburg.de>
 <20040701153822.GS8095@artcom8.artcom-gmbh.de> <Pine.LNX.4.60.0407012321510.4271@hahepc1.hahe>
Message-ID: <Pine.LNX.4.60.0407020159520.20524@hahepc1.hahe>

> > http://www.ndh.net/home/mauz/majox.de/newsgroup/compile-ablauf.png

writepng.c patch was wrong, corrected below, sorry.

Regards, Hartmut


--- writepng.c.orig	Mon Jul  1 18:07:00 2002
+++ writepng.c	Fri Jul  2 01:58:59 2004
@@ -67,9 +67,9 @@

 void write_png(integer img)
 {
-    int i, j;
+    int i, j, k, l;
     integer palette_objnum = 0;
-    png_bytep row, *rows;
+    png_bytep row, r, *rows;
     pdf_puts("/Type /XObject\n/Subtype /Image\n");
     pdf_printf("/Width %i\n/Height %i\n/BitsPerComponent %i\n",
                (int)png_info(img)->width,
@@ -100,9 +100,15 @@
         row = xtalloc(png_info(img)->rowbytes, png_byte);
         for (i = 0; i < (int)png_info(img)->height; i++) {
             png_read_row(png_ptr(img), row, NULL);
-            pdfroom(png_info(img)->rowbytes);
-            for (j = 0; j < (int)png_info(img)->rowbytes; j++)
-                pdfbuf[pdfptr++] = row[j];
+	    r = row;
+	    k = png_info(img)->rowbytes;
+	    while(k > 0) {
+		l = (k > pdfbufsize)? pdfbufsize : k;
+		pdfroom(l);
+		for (j = 0; j < l; j++)
+		    pdfbuf[pdfptr++] = *r++;
+		k -= l;
+	    }
         }
         xfree(row);
     }
@@ -115,9 +121,14 @@
         png_read_image(png_ptr(img), rows);
         for (i = 0; i < (int)png_info(img)->height; i++) {
             row = rows[i];
-            pdfroom(png_info(img)->rowbytes);
-            for (j = 0; j < (int)png_info(img)->rowbytes; j++)
-                pdfbuf[pdfptr++] = *row++;
+	    k = png_info(img)->rowbytes;
+	    while(k > 0) {
+		l = (k > pdfbufsize)? pdfbufsize : k;
+		pdfroom(l);
+		for (j = 0; j < l; j++)
+		    pdfbuf[pdfptr++] = *row++;
+		k -= l;
+	    }
             xfree(rows[i]);
         }
         xfree(rows);

From The Thanh Han <hanthethanh@myrealbox.com>  Thu Jul  1 11:46:08 2004
From: The Thanh Han <hanthethanh@myrealbox.com> (The Thanh Han)
Date: Thu, 1 Jul 2004 17:46:08 +0700
Subject: [NTG-pdftex] pdfannot in xform
In-Reply-To: <40E2E5A7.4050502@wxs.nl>
References: <40D5F86F.5020504@wxs.nl> <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl>
Message-ID: <20040701104607.GA263@monty>

On Wed, Jun 30, 2004 at 06:09:11PM +0200, Hans Hagen wrote:
> Martin SchrÃ¶der wrote:
> 
> >On 2004-06-20 22:49:51 +0200, Hans Hagen wrote:
> > 
> >
> >>Something to keep an eye on: pdftex bombs when an pdfannot happens 
> >>inside an xform (still playing with that, so no pattern yet)
> >>   
> >>
> >
> >Any pattern yet?
> > 
> >
> no, must have been a border case 

I changed it from 1.20a, so pdftex will exit with an error when a
pdfannot ends up inside a xobject form. Before that, the result was
unpredictable.

Thanh

From taco@elvenkind.com  Thu Jul  1 21:15:24 2004
From: taco@elvenkind.com (Taco Hoekwater)
Date: Thu, 1 Jul 2004 22:15:24 +0200
Subject: [NTG-pdftex] open problems with 1.20a
In-Reply-To: <Pine.LNX.4.60.0407012150130.30917@hahepc1.hahe>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de>
 <20040701151755.GA4582@m0A02325D.vpn.uni-freiburg.de>
 <20040701153822.GS8095@artcom8.artcom-gmbh.de>
 <Pine.LNX.4.60.0407012150130.30917@hahepc1.hahe>
Message-ID: <20040701221524.2de3b850.taco@elvenkind.com>


W3C says that the deflate (LZ77) window for PNG may not be larger than 
32768 bytes, which still isn't large. Perhaps change pdf_buf_size to 64K?

On Thu, 1 Jul 2004 21:53:57 +0200 (CEST)
Hartmut Henkel <hartmut_henkel@gmx.de> wrote:

> seems the pdf_buf is overrun by the very long re-zipped image lines. By 
> this weird pointer garblings happen (valgrind). E. g. increasing 
> pdf_buf_size from 16384 to 26384 makes it run (but is not yet the 
> general solution).
> 
> Regards, Hartmut
> _______________________________________________
> ntg-pdftex mailing list
> ntg-pdftex@ntg.nl
> http://www.ntg.nl/mailman/listinfo/ntg-pdftex

From pragma@wxs.nl  Fri Jul  2 08:40:57 2004
From: pragma@wxs.nl (Hans Hagen)
Date: Fri, 02 Jul 2004 09:40:57 +0200
Subject: [NTG-pdftex] pdfannot in xform
In-Reply-To: <20040701104607.GA263@monty>
References: <40D5F86F.5020504@wxs.nl> <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty>
Message-ID: <40E51189.9020601@wxs.nl>

The Thanh Han wrote:

>On Wed, Jun 30, 2004 at 06:09:11PM +0200, Hans Hagen wrote:
>  
>
>>Martin SchrÃ¶der wrote:
>>
>>    
>>
>>>On 2004-06-20 22:49:51 +0200, Hans Hagen wrote:
>>>
>>>
>>>      
>>>
>>>>Something to keep an eye on: pdftex bombs when an pdfannot happens 
>>>>inside an xform (still playing with that, so no pattern yet)
>>>>  
>>>>
>>>>        
>>>>
>>>Any pattern yet?
>>>
>>>
>>>      
>>>
>>no, must have been a border case 
>>    
>>
>
>I changed it from 1.20a, so pdftex will exit with an error when a
>pdfannot ends up inside a xobject form. Before that, the result was
>unpredictable.
>  
>
Currently, when one tries to include page 10 of a 9 page document, pdftex quits. Is it possible to continue and return an empty xform with say 3.141592pt by 3.141592pt dimensions? 

Also, is it possible in case of a 'fatal' error which is not that fatal, to finish the file so that we get at least a valid pdf file; the alternative is to delete the file; it's really annoying to get back a file which is corrupt. In that case, no file at all is better. 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From ms@artcom-gmbh.de  Fri Jul  2 10:15:49 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Fri, 2 Jul 2004 11:15:49 +0200
Subject: Missing pages, invalid files (was: [NTG-pdftex] pdfannot in xform)
In-Reply-To: <40E51189.9020601@wxs.nl>
References: <40D5F86F.5020504@wxs.nl> <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl>
Message-ID: <20040702091549.GU8095@artcom8.artcom-gmbh.de>

On 2004-07-02 09:40:57 +0200, Hans Hagen wrote:
> Currently, when one tries to include page 10 of a 9 page document, pdftex 
> quits. Is it possible to continue and return an empty xform with say 
> 3.141592pt by 3.141592pt dimensions? 

I don't know how difficult it would be to implement, but what
would be the benefits? The document has an error which must be
signalled to the user.

> Also, is it possible in case of a 'fatal' error which is not that fatal, to 
> finish the file so that we get at least a valid pdf file; the alternative 
> is to delete the file; it's really annoying to get back a file which is 
> corrupt. In that case, no file at all is better. 

Agreed. I've added that as a feature request on Sarovar for
further tracking
(http://sarovar.org/tracker/index.php?func=detail&aid=87&group_id=106&atid=496)

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From ms@artcom-gmbh.de  Fri Jul  2 10:18:13 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Fri, 2 Jul 2004 11:18:13 +0200
Subject: [NTG-pdftex] pdfannot in xform
In-Reply-To: <20040701104607.GA263@monty>
References: <40D5F86F.5020504@wxs.nl> <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty>
Message-ID: <20040702091813.GV8095@artcom8.artcom-gmbh.de>

On 2004-07-01 17:46:08 +0700, The Thanh Han wrote:
> I changed it from 1.20a, so pdftex will exit with an error when a
> pdfannot ends up inside a xobject form. Before that, the result was
> unpredictable.

Is that already in the sources in p4? If not, please submit your
sources.

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From taco@aanhet.net  Fri Jul  2 10:44:58 2004
From: taco@aanhet.net (Taco Hoekwater)
Date: Fri, 2 Jul 2004 11:44:58 +0200
Subject: [NTG-pdftex] sarovar (source) question
In-Reply-To: <20040702091549.GU8095@artcom8.artcom-gmbh.de>
References: <40D5F86F.5020504@wxs.nl>
 <20040630160037.GF8095@artcom8.artcom-gmbh.de>
 <40E2E5A7.4050502@wxs.nl>
 <20040701104607.GA263@monty>
 <40E51189.9020601@wxs.nl>
 <20040702091549.GU8095@artcom8.artcom-gmbh.de>
Message-ID: <20040702114458.02c6e713@glenlivet.elvenkind.com>

Hi guys,

Can someone explain to me what the latest development version of pdftex 
is, where I can get it's source, and where the changes/bugs are tracked?

I'm a bit confused by the sarovar / tex-live / perforce / ntg-mailinglist
situation.

TIA,

Taco

On Fri, 2 Jul 2004 11:15:49 +0200, Martin wrote:
> Agreed. I've added that as a feature request on Sarovar for

-- 
groeten,

Taco

From ms@artcom-gmbh.de  Fri Jul  2 11:21:48 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Fri, 2 Jul 2004 12:21:48 +0200
Subject: [NTG-pdftex] sarovar (source) question
In-Reply-To: <20040702114458.02c6e713@glenlivet.elvenkind.com>
References: <40D5F86F.5020504@wxs.nl> <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl> <20040702091549.GU8095@artcom8.artcom-gmbh.de> <20040702114458.02c6e713@glenlivet.elvenkind.com>
Message-ID: <20040702102148.GZ8095@artcom8.artcom-gmbh.de>

On 2004-07-02 11:44:58 +0200, Taco Hoekwater wrote:
> Can someone explain to me what the latest development version of pdftex 
> is, where I can get it's source, and where the changes/bugs are tracked?

Current version is 1.20a-rc4 (i.e. we are close to releasing
1.20a).

Source should be in tex-live, but Thanh's internet connection is
difficult so he doesn't commit every patch immediately.

Tracking should be done on sarovar (currently it's done here); we
are just starting to use it.

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From noreply@sarovar.org  Fri Jul  2 10:13:15 2004
From: noreply@sarovar.org (noreply@sarovar.org)
Date: Fri, 02 Jul 2004 14:43:15 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-87 ] In case of fatal errors, delete the output file
Message-ID: <E1BgK6d-0000mB-00@sarovar.org>

Feature Requests item #87, was opened at 2004-07-02 11:13
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=87&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin SchrÃ¶der (oneiros)
Assigned to: Nobody (None)
Summary: In case of fatal errors, delete the output file

Initial Comment:
When pdfTeX currently encounters a fatal error, it
closes it's output file, which leads to
incomplete/corrupt files.

pdfTeX should produce only valid files, and in case of
fatal errors the output should be deleted.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=87&group_id=106

From taco@elvenkind.com  Fri Jul  2 10:42:19 2004
From: taco@elvenkind.com (Taco Hoekwater)
Date: Fri, 2 Jul 2004 11:42:19 +0200
Subject: [NTG-pdftex] sarovar (source) question
In-Reply-To: <20040702091549.GU8095@artcom8.artcom-gmbh.de>
References: <40D5F86F.5020504@wxs.nl>
 <20040630160037.GF8095@artcom8.artcom-gmbh.de>
 <40E2E5A7.4050502@wxs.nl>
 <20040701104607.GA263@monty>
 <40E51189.9020601@wxs.nl>
 <20040702091549.GU8095@artcom8.artcom-gmbh.de>
Message-ID: <20040702114219.41752480@glenlivet.elvenkind.com>

Hi guys,

Can someone explain to me what the latest development version of pdftex 
is, where I can get it's source, and where the changes/bugs are tracked?

I'm a bit confused by the sarovar / tex-live / perforce / ntg-mailinglist
situation.

TIA,

Taco

On Fri, 2 Jul 2004 11:15:49 +0200, Martin wrote:

> Agreed. I've added that as a feature request on Sarovar for


-- 
groeten,

Taco

From pragma@wxs.nl  Fri Jul  2 12:00:52 2004
From: pragma@wxs.nl (Hans Hagen)
Date: Fri, 02 Jul 2004 13:00:52 +0200
Subject: [NTG-pdftex] Re: Missing pages, invalid files
In-Reply-To: <20040702091549.GU8095@artcom8.artcom-gmbh.de>
References: <40D5F86F.5020504@wxs.nl> <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl> <20040702091549.GU8095@artcom8.artcom-gmbh.de>
Message-ID: <40E54064.4070805@wxs.nl>

Martin Schröder wrote:

>On 2004-07-02 09:40:57 +0200, Hans Hagen wrote:
>  
>
>>Currently, when one tries to include page 10 of a 9 page document, pdftex 
>>quits. Is it possible to continue and return an empty xform with say 
>>3.141592pt by 3.141592pt dimensions? 
>>    
>>
>
>I don't know how difficult it would be to implement, but what
>would be the benefits? The document has an error which must be
>signalled to the user.
>  
>
sure, but better have a valid file than an invalid one; in workflows 
where a naive user is behind an interface, the worst advertisement you 
can get is an invalid file

>>Also, is it possible in case of a 'fatal' error which is not that fatal, to 
>>finish the file so that we get at least a valid pdf file; the alternative 
>>is to delete the file; it's really annoying to get back a file which is 
>>corrupt. In that case, no file at all is better. 
>>    
>>
>
>Agreed. I've added that as a feature request on Sarovar for
>further tracking
>(http://sarovar.org/tracker/index.php?func=detail&aid=87&group_id=106&atid=496)
>  
>
thanks 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From oberdiek@uni-freiburg.de  Fri Jul  2 12:43:48 2004
From: oberdiek@uni-freiburg.de (Heiko Oberdiek)
Date: Fri, 2 Jul 2004 13:43:48 +0200
Subject: [NTG-pdftex] pdfannot in xform
In-Reply-To: <40E51189.9020601@wxs.nl>
References: <40D5F86F.5020504@wxs.nl> <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl>
Message-ID: <20040702114348.GA2653@m0A02325D.vpn.uni-freiburg.de>

On Fri, Jul 02, 2004 at 09:40:57AM +0200, Hans Hagen wrote:

> Currently, when one tries to include page 10 of a 9 page document, pdftex 
> quits. 

Before trying, the first page can be included in a box, then
\pdflastximagespages is available for testing whether the
intended inclusion page is valid. (Documents with zero pages
cannot handled this way.)

> Is it possible to continue and return an empty xform with say 
> 3.141592pt by 3.141592pt dimensions?

Instead of checking two dimensions, it should be easier to check
whether the page is not greater than \pdflastximagepages.
Then no funny value is needed for the dimensions, 0pt, 1pt, 1bp,
1in can be used.

Yours sincerely
  Heiko <oberdiek@uni-freiburg.de>
-- 

From pragma@wxs.nl  Fri Jul  2 13:08:02 2004
From: pragma@wxs.nl (Hans Hagen)
Date: Fri, 02 Jul 2004 14:08:02 +0200
Subject: [NTG-pdftex] pdfannot in xform
In-Reply-To: <20040702114348.GA2653@m0A02325D.vpn.uni-freiburg.de>
References: <40D5F86F.5020504@wxs.nl> <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl> <20040702114348.GA2653@m0A02325D.vpn.uni-freiburg.de>
Message-ID: <40E55022.3050900@wxs.nl>

Heiko Oberdiek wrote:

>On Fri, Jul 02, 2004 at 09:40:57AM +0200, Hans Hagen wrote:
>
>  
>
>>Currently, when one tries to include page 10 of a 9 page document, pdftex 
>>quits. 
>>    
>>
>
>Before trying, the first page can be included in a box, then
>\pdflastximagespages is available for testing whether the
>intended inclusion page is valid. (Documents with zero pages
>cannot handled this way.)
>  
>
testing is an option fo rexisting files, but it's not that user 
friendly; my main point is that pdftex shoul dnot quit on such 
situations and definietly not end up in some funny mode (as it does now) 
and produce an invalid file (in batch mode).

indeed the problem is most prominent with non existing files;

>>Is it possible to continue and return an empty xform with say 
>>3.141592pt by 3.141592pt dimensions?
>>    
>>
>
>Instead of checking two dimensions, it should be easier to check
>whether the page is not greater than \pdflastximagepages.
>Then no funny value is needed for the dimensions, 0pt, 1pt, 1bp,
>1in can be used.
>  
>
i was thinking about one of those; i dislike the 1 inch, zero dimensions are not always accepted by acrobat (one of those persistent bugs); 1pt is ok for me (i liked the pi -)

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From noreply@sarovar.org  Fri Jul  2 12:50:37 2004
From: noreply@sarovar.org (noreply@sarovar.org)
Date: Fri, 02 Jul 2004 17:20:37 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-87 ] In case of fatal errors, delete the output file
Message-ID: <E1BgMYv-0002w3-00@sarovar.org>

Feature Requests item #87, was opened at 2004-07-02 11:13
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=87&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin SchrÃ¶der (oneiros)
Assigned to: Nobody (None)
Summary: In case of fatal errors, delete the output file

Initial Comment:
When pdfTeX currently encounters a fatal error, it
closes it's output file, which leads to
incomplete/corrupt files.

pdfTeX should produce only valid files, and in case of
fatal errors the output should be deleted.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2004-07-02 13:50

Message:
Logged In: YES 
user_id=1608

If deleting the file doesnt work, truncation is probably
still better than nothing. (?)

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=87&group_id=106

From noreply@sarovar.org  Fri Jul  2 13:21:39 2004
From: noreply@sarovar.org (noreply@sarovar.org)
Date: Fri, 02 Jul 2004 17:51:39 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-87 ] In case of fatal errors, delete the output file
Message-ID: <E1BgN2x-0003MV-00@sarovar.org>

Feature Requests item #87, was opened at 2004-07-02 11:13
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=87&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin SchrÃ¶der (oneiros)
Assigned to: Nobody (None)
Summary: In case of fatal errors, delete the output file

Initial Comment:
When pdfTeX currently encounters a fatal error, it
closes it's output file, which leads to
incomplete/corrupt files.

pdfTeX should produce only valid files, and in case of
fatal errors the output should be deleted.

----------------------------------------------------------------------

>Comment By: Martin SchrÃ¶der (oneiros)
Date: 2004-07-02 14:21

Message:
Logged In: YES 
user_id=421

Simply truncating a pdf still makes it invalid (because the
file structure is incomplete). Producing a valid truncated
output file in case of fatal errors will be tricky and not
always possible. Deleting the corrupt output is much easier.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2004-07-02 13:50

Message:
Logged In: YES 
user_id=1608

If deleting the file doesnt work, truncation is probably
still better than nothing. (?)

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=87&group_id=106

From noreply@sarovar.org  Fri Jul  2 13:35:50 2004
From: noreply@sarovar.org (noreply@sarovar.org)
Date: Fri, 02 Jul 2004 18:05:50 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-87 ] In case of fatal errors, delete the output file
Message-ID: <E1BgNGg-0003iB-00@sarovar.org>

Feature Requests item #87, was opened at 2004-07-02 11:13
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=87&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin SchrÃ¶der (oneiros)
Assigned to: Nobody (None)
Summary: In case of fatal errors, delete the output file

Initial Comment:
When pdfTeX currently encounters a fatal error, it
closes it's output file, which leads to
incomplete/corrupt files.

pdfTeX should produce only valid files, and in case of
fatal errors the output should be deleted.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2004-07-02 14:35

Message:
Logged In: YES 
user_id=1608

When you truncate a file, the result is an empty file. From
a user's viewpoint, that is not the same thing as a corrupt
PDF. 
The distinction is small, but the advantage of an empty file is
that it is not likely to be confused for a correct PDF.

If it is possible, then deleting the PDF file is definately
better, but file deletion doesn't always work. Truncation
almost always does work, and it's only two syscalls extra,
so why not?


----------------------------------------------------------------------

Comment By: Martin SchrÃ¶der (oneiros)
Date: 2004-07-02 14:21

Message:
Logged In: YES 
user_id=421

Simply truncating a pdf still makes it invalid (because the
file structure is incomplete). Producing a valid truncated
output file in case of fatal errors will be tricky and not
always possible. Deleting the corrupt output is much easier.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2004-07-02 13:50

Message:
Logged In: YES 
user_id=1608

If deleting the file doesnt work, truncation is probably
still better than nothing. (?)

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=87&group_id=106

From oberdiek@uni-freiburg.de  Fri Jul  2 14:13:37 2004
From: oberdiek@uni-freiburg.de (Heiko Oberdiek)
Date: Fri, 2 Jul 2004 15:13:37 +0200
Subject: [NTG-pdftex] pdfannot in xform
In-Reply-To: <40E55022.3050900@wxs.nl>
References: <40D5F86F.5020504@wxs.nl> <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl> <20040702114348.GA2653@m0A02325D.vpn.uni-freiburg.de> <40E55022.3050900@wxs.nl>
Message-ID: <20040702131337.GA3315@m0A02325D.vpn.uni-freiburg.de>

Hello Hans,

On Fri, Jul 02, 2004 at 02:08:02PM +0200, Hans Hagen wrote:

> Heiko Oberdiek wrote:
> 
> >On Fri, Jul 02, 2004 at 09:40:57AM +0200, Hans Hagen wrote:
> >
> > 
> >
> >>Currently, when one tries to include page 10 of a 9 page document, pdftex 
> >>quits. 
> >>   
> >>
> >
> >Before trying, the first page can be included in a box, then
> >\pdflastximagespages is available for testing whether the
> >intended inclusion page is valid. (Documents with zero pages
> >cannot handled this way.)
> > 
> >
> testing is an option fo rexisting files, but it's not that user 
> friendly; 

I would not consider the current low level interface of image
inclusion as "user friendly". This should be done at macro level:
  graphicx/pdftex.def for plain/latex and your interface in
  ConTeXt.

> my main point is that pdftex shoul dnot quit on such 
> situations and definietly not end up in some funny mode (as it does now) 
> and produce an invalid file (in batch mode).

I agree.

> indeed the problem is most prominent with non existing files;

This case is handled by LaTeX's graphics.sty, it calls the LaTeX
kernel macro \IfFileExists.

> >>Is it possible to continue and return an empty xform with say 
> >>3.141592pt by 3.141592pt dimensions?
> >
> >Instead of checking two dimensions, it should be easier to check
> >whether the page is not greater than \pdflastximagepages.
> >Then no funny value is needed for the dimensions, 0pt, 1pt, 1bp,
> >1in can be used.
> > 
> >
> i was thinking about one of those; i dislike the 1 inch, zero dimensions 
> are not always accepted by acrobat (one of those persistent bugs); 1pt is 
> ok for me (i liked the pi -)

It costs a lot of time to write pi as decimal number ... ;-)

Perhaps someone will update the documentation of pdfTeX.
1pt is easier to explain as 3.141592pt:
* Why not 3.14159pt:
  \newdimen\foo
  \foo=3.141592pt
  \showthe\foo
  % 3.14159pt
  \newdimen\bar
  \bar=3.14159pt
  \ifdim\foo=\bar
    \message{EQUAL}
  \else
    \message{NOT EQUAL}
  \fi
  % EQUAL
* Testing for such a value implicates that then this value is
  forbidden for pdf page sizes. This complicates the documentation
  and this limitation is not necessary at all (\pdflastximagepages
  is much better here).

Behaviour of pdfTeX for pdf image inclusion:

DEFAULT  := -1 or 0 (see below)
Continue := Continue with empty xform object with dimension 1pt x 1pt.

if PDFFileExists
    if PageNumber < 1
        \pdflastximagepages = DEFAULT
        Warning "Invalid page number"
        Continue
    elsif PageNumber > \pdflastximagepages
        \pdflastximagepages is set
        Warning "Page number to large (out of range)
        Continue
    else
        \pdflastximagepages is set
        image is included
    fi
else
    Warning "PDF file does not exist"
    \pdflastximagepages = DEFAULT
    Continue
fi

Thus \pdflastximagepages = DEFAULT means:
"pdf file is not read" because of:
* No \pdfximage command, program start
* Invalid page number in previous call of \pdfximage
* Call with valid page number, but pdf file does not exist.

The value DEFAULT can be discussed. I have not found in the
pdf specification that pdf files with zero pages are forbidden.
Therefore I would prefer "-1", but the current default at
program start is "0".

Yours sincerely
  Heiko <oberdiek@uni-freiburg.de>

From ms@artcom-gmbh.de  Fri Jul  2 14:54:55 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Fri, 2 Jul 2004 15:54:55 +0200
Subject: [NTG-pdftex] missing pages (was: pdfannot in xform)
In-Reply-To: <20040702131337.GA3315@m0A02325D.vpn.uni-freiburg.de>
References: <40D5F86F.5020504@wxs.nl> <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl> <20040702114348.GA2653@m0A02325D.vpn.uni-freiburg.de> <40E55022.3050900@wxs.nl> <20040702131337.GA3315@m0A02325D.vpn.uni-freiburg.de>
Message-ID: <20040702135455.GD8095@artcom8.artcom-gmbh.de>

On 2004-07-02 15:13:37 +0200, Heiko Oberdiek wrote:
> DEFAULT  := -1 or 0 (see below)
> Continue := Continue with empty xform object with dimension 1pt x 1pt.

I dislike the 1pt (although it's difficult to generate pdfs with
1pt² (distiller will not produce it), it's still possible).
Better: 1sp². _Nobody_ will do this intentional. :-)

> if PDFFileExists
>     if PageNumber < 1
>         \pdflastximagepages = DEFAULT
>         Warning "Invalid page number"
>         Continue
>     elsif PageNumber > \pdflastximagepages
>         \pdflastximagepages is set
>         Warning "Page number to large (out of range)
>         Continue
>     else
>         \pdflastximagepages is set
>         image is included
>     fi
> else
>     Warning "PDF file does not exist"
>     \pdflastximagepages = DEFAULT
>     Continue
> fi
> 
> Thus \pdflastximagepages = DEFAULT means:
> "pdf file is not read" because of:
> * No \pdfximage command, program start
> * Invalid page number in previous call of \pdfximage
> * Call with valid page number, but pdf file does not exist.
> 
> The value DEFAULT can be discussed. I have not found in the
> pdf specification that pdf files with zero pages are forbidden.

Well, the catalog must have a page entry which must have kids.
But arrays can be empty, so it's possible. But I doubt that AR
will handle this. :-)

> Therefore I would prefer "-1", but the current default at
> program start is "0".

Agreed.

Overall this looks quite good. After 1.20a

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From pragma@wxs.nl  Fri Jul  2 14:56:14 2004
From: pragma@wxs.nl (Hans Hagen)
Date: Fri, 02 Jul 2004 15:56:14 +0200
Subject: [NTG-pdftex] pdfannot in xform
In-Reply-To: <20040702131337.GA3315@m0A02325D.vpn.uni-freiburg.de>
References: <40D5F86F.5020504@wxs.nl> <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl> <20040702114348.GA2653@m0A02325D.vpn.uni-freiburg.de> <40E55022.3050900@wxs.nl> <20040702131337.GA3315@m0A02325D.vpn.uni-freiburg.de>
Message-ID: <40E5697E.90201@wxs.nl>

Hi Heiko,

>d not consider the current low level interface of image
>inclusion as "user friendly". This should be done at macro level:
>  graphicx/pdftex.def for plain/latex and your interface in
>  ConTeXt.
>  
>
sure (i always do a file existence test) but we're now wrapping up 
problems in  pdftex, and there the low level interface (primitives) 
shoudl work without problems. I consider a faulty result file as a bug 
as will most naive users -)

>This case is handled by LaTeX's graphics.sty, it calls the LaTeX
>kernel macro \IfFileExists.
>  
>
something simlar happens in context

>It costs a lot of time to write pi as decimal number ... ;-)
>  
>
how many nanoseconds -) nothing compared to what pdftex is doing the 
rest of teh time

>Perhaps someone will update the documentation of pdfTeX.
>1pt is easier to explain as 3.141592pt:
>* Why not 3.14159pt:
>  \newdimen\foo
>  \foo=3.141592pt
>  \showthe\foo
>  % 3.14159pt
>  \newdimen\bar
>  \bar=3.14159pt
>  \ifdim\foo=\bar
>    \message{EQUAL}
>  \else
>    \message{NOT EQUAL}
>  \fi
>  % EQUAL
>* Testing for such a value implicates that then this value is
>  forbidden for pdf page sizes. This complicates the documentation
>  and this limitation is not necessary at all (\pdflastximagepages
>  is much better here).
>  
>
the pi points was just 'some value' ; in principle any value will do;  
it's not so much meant for testing but more to have something back 
instead of something invalid

>Behaviour of pdfTeX for pdf image inclusion:
>
>DEFAULT  := -1 or 0 (see below)
>Continue := Continue with empty xform object with dimension 1pt x 1pt.
>
>if PDFFileExists
>    if PageNumber < 1
>        \pdflastximagepages = DEFAULT
>        Warning "Invalid page number"
>        Continue
>    elsif PageNumber > \pdflastximagepages
>        \pdflastximagepages is set
>        Warning "Page number to large (out of range)
>        Continue
>    else
>        \pdflastximagepages is set
>        image is included
>    fi
>else
>    Warning "PDF file does not exist"
>    \pdflastximagepages = DEFAULT
>    Continue
>fi
>  
>
this sounds ok to me  (an option is: -1 does not exist and -2 invalid)

>Thus \pdflastximagepages = DEFAULT means:
>"pdf file is not read" because of:
>* No \pdfximage command, program start
>* Invalid page number in previous call of \pdfximage
>* Call with valid page number, but pdf file does not exist.
>
>The value DEFAULT can be discussed. I have not found in the
>pdf specification that pdf files with zero pages are forbidden.
>Therefore I would prefer "-1", but the current default at
>program start is "0".
>  
>
A pdf file can indeed contain zero pages (for instance a xfdf file,  or 
a file with only templates), so we should stick to <0 values

Hans

 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma@wxs.nl  Fri Jul  2 15:23:59 2004
From: pragma@wxs.nl (Hans Hagen)
Date: Fri, 02 Jul 2004 16:23:59 +0200
Subject: [NTG-pdftex] missing pages
In-Reply-To: <20040702135455.GD8095@artcom8.artcom-gmbh.de>
References: <40D5F86F.5020504@wxs.nl> <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl> <20040702114348.GA2653@m0A02325D.vpn.uni-freiburg.de> <40E55022.3050900@wxs.nl> <20040702131337.GA3315@m0A02325D.vpn.uni-freiburg.de> <20040702135455.GD8095@artcom8.artcom-gmbh.de>
Message-ID: <40E56FFF.2030300@wxs.nl>

Martin Schröder wrote:

>Well, the catalog must have a page entry which must have kids.
>But arrays can be empty, so it's possible. But I doubt that AR
>will handle this. :-)
>  
>
just for fun, try this: \pdfliteral{0 0 0 0 0 0 cm}  and you'll see why 
zero dimensions (which may end up in calculations dealing with scaling) 
are dangerous; at least acro 6 windows barks (gs is ok)

Hans

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From ms@artcom-gmbh.de  Fri Jul  2 15:31:03 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Fri, 2 Jul 2004 16:31:03 +0200
Subject: [NTG-pdftex] missing pages
In-Reply-To: <40E56FFF.2030300@wxs.nl>
References: <40D5F86F.5020504@wxs.nl> <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl> <20040702114348.GA2653@m0A02325D.vpn.uni-freiburg.de> <40E55022.3050900@wxs.nl> <20040702131337.GA3315@m0A02325D.vpn.uni-freiburg.de> <20040702135455.GD8095@artcom8.artcom-gmbh.de> <40E56FFF.2030300@wxs.nl>
Message-ID: <20040702143103.GG8095@artcom8.artcom-gmbh.de>

On 2004-07-02 16:23:59 +0200, Hans Hagen wrote:
> just for fun, try this: \pdfliteral{0 0 0 0 0 0 cm}  and you'll see why 
> zero dimensions (which may end up in calculations dealing with scaling) 
> are dangerous; at least acro 6 windows barks (gs is ok)

I can understand Acrobat barking at black holes. :-)

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From oberdiek@uni-freiburg.de  Fri Jul  2 20:38:39 2004
From: oberdiek@uni-freiburg.de (Heiko Oberdiek)
Date: Fri, 2 Jul 2004 21:38:39 +0200
Subject: [NTG-pdftex] missing pages (was: pdfannot in xform)
In-Reply-To: <20040702135455.GD8095@artcom8.artcom-gmbh.de>
References: <40D5F86F.5020504@wxs.nl> <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl> <20040702114348.GA2653@m0A02325D.vpn.uni-freiburg.de> <40E55022.3050900@wxs.nl> <20040702131337.GA3315@m0A02325D.vpn.uni-freiburg.de> <20040702135455.GD8095@artcom8.artcom-gmbh.de>
Message-ID: <20040702193839.GA3040@irwin.vpn.uni-freiburg.de>

On Fri, Jul 02, 2004 at 03:54:55PM +0200, Martin Schr=F6der wrote:

> On 2004-07-02 15:13:37 +0200, Heiko Oberdiek wrote:
> > DEFAULT  :=3D -1 or 0 (see below)
> > Continue :=3D Continue with empty xform object with dimension 1pt x 1=
pt.
>=20
> I dislike the 1pt (although it's difficult to generate pdfs with
> 1pt=B2 (distiller will not produce it), it's still possible).
> Better: 1sp=B2. _Nobody_ will do this intentional. :-)

Too small, even pdfTeX has much problems with this:

\pdfdecimaldigits=3D100
\pdfpagewidth=3D1sp
\pdfpageheight=3D1sp
\null
\nopagenumbers
\bye

=3D=3D> /MediaBox [0 0 0 0]

\pdfcompresslevel=3D0
\pdfdecimaldigits=3D100
\setbox0=3D\hbox{}
\wd0=3D1sp
\ht0=3D1sp
\dp0=3D0pt
\pdfxform0
\pdfrefxform\pdflastxform
\nopagenumbers
\bye

=3D=3D> /BBox [0 0 0 0]

...
\wd0=3D1pt
\ht0=3D1bp
...

=3D=3D> /BBox [0 0 0.9963 1]

Hans Hagen has meantioned some AR bugs with zero values,
therefore I would suggest 1bp, because then the output
is small.

Yours sincerely
  Heiko <oberdiek@uni-freiburg.de>
--=20

From oberdiek@uni-freiburg.de  Fri Jul  2 21:00:44 2004
From: oberdiek@uni-freiburg.de (Heiko Oberdiek)
Date: Fri, 2 Jul 2004 22:00:44 +0200
Subject: [NTG-pdftex] missing pages
In-Reply-To: <40E5697E.90201@wxs.nl>
References: <40D5F86F.5020504@wxs.nl> <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl> <20040702114348.GA2653@m0A02325D.vpn.uni-freiburg.de> <40E55022.3050900@wxs.nl> <20040702131337.GA3315@m0A02325D.vpn.uni-freiburg.de> <40E5697E.90201@wxs.nl>
Message-ID: <20040702200044.GB3040@irwin.vpn.uni-freiburg.de>

Hello,

On Fri, Jul 02, 2004 at 03:56:14PM +0200, Hans Hagen wrote:

> this sounds ok to me  (an option is: -1 does not exist and -2 invalid)

> A pdf file can indeed contain zero pages (for instance a xfdf file,  or 
> a file with only templates), so we should stick to <0 values

Variant a) with -1 (not exist) and -2 (invalid)
===============================================

Behaviour of pdfTeX for pdf image inclusion:

NO_PDF_FILE := -1
INVALID_PAGE := -2 // page <= 0
Initialization: \pdflastximagepages := NO_PDF_FILE

Continue := Continue with empty xform object with dimension 1bp x 1bp.
// 1bp because it avoids zero and possible problems and
// the output is small (/BBox [0 0 1 1])

if PDFFileExists
    if PageNumber < 1
        \pdflastximagepages = INVALID_PAGE
        Warning "Invalid page number"
        Continue
    elsif PageNumber > \pdflastximagepages
        \pdflastximagepages is set
        Warning "Page number to large (out of range)
        Continue
    else
        \pdflastximagepages is set
        image is included
    fi
else
    Warning "PDF file does not exist"
    \pdflastximagepages = NO_PDF_FILE
    Continue
fi

Failure/Success checking:

if \pdflastximagepages = -1
    * PDF file does not exist
elsif \pdflastximagepages = -2
    * Page number too small
elsif [page] > \pdflastximagepages
    * Page number too large
else
    * Success
fi

We need the page number for checking, so we can also drop the
second magic number:

Variant b) with -1 (unknown)
============================

Behaviour of pdfTeX for pdf image inclusion:

UNKNOWN := -1
Initialization: \pdflastximagepages := UNKNOWN

Continue := Continue with empty xform object with dimension 1bp x 1bp.
// 1bp because it avoids zero and possible problems and
// the output is small (/BBox [0 0 1 1])

if PDFFileExists
    if PageNumber < 1
        \pdflastximagepages = UNKNOWN
        Warning "Invalid page number"
        Continue
    elsif PageNumber > \pdflastximagepages
        \pdflastximagepages is set
        Warning "Page number to large (out of range)
        Continue
    else
        \pdflastximagepages is set
        image is included
    fi
else
    Warning "PDF file does not exist"
    \pdflastximagepages = UNKNOWN
    Continue
fi

Failure/Success checking:

if [page] < 1
    * Page number too small
elsif \pdflastximagepages = -1
    * PDF file does not exist
elsif [page] > \pdflastximagepages
    * Page number too large
else
    * Success
fi

or with optimization for success:

if [page] < 1
    * Page number too small
elsif [page] > \pdflastximagepages
    if \pdflastximagepages = -1
        * PDF file does not exist
    else
        * Page number too large
    fi
else
    * Success
fi

I would prefer variant b) because it reduces the needed magic numbers.

Yours sincerely
  Heiko <oberdiek@uni-freiburg.de>
-- 

From pragma@wxs.nl  Mon Jul  5 09:10:02 2004
From: pragma@wxs.nl (Hans Hagen)
Date: Mon, 05 Jul 2004 10:10:02 +0200
Subject: [NTG-pdftex] missing pages
In-Reply-To: <20040702200044.GB3040@irwin.vpn.uni-freiburg.de>
References: <40D5F86F.5020504@wxs.nl> <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl> <20040702114348.GA2653@m0A02325D.vpn.uni-freiburg.de> <40E55022.3050900@wxs.nl> <20040702131337.GA3315@m0A02325D.vpn.uni-freiburg.de> <40E5697E.90201@wxs.nl> <20040702200044.GB3040@irwin.vpn.uni-freiburg.de>
Message-ID: <40E90CDA.7020205@wxs.nl>

Heiko Oberdiek wrote:

>I would prefer variant b) because it reduces the needed magic numbers.
>  
>
i like a because i often run into faulty pdf's and this is a nice way of detecting them -) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma@wxs.nl  Mon Jul  5 09:14:04 2004
From: pragma@wxs.nl (Hans Hagen)
Date: Mon, 05 Jul 2004 10:14:04 +0200
Subject: [NTG-pdftex] outpu tfile in pdftex
Message-ID: <40E90DCC.3030004@wxs.nl>

Hi,

Since we're in 'making pdftex robust' mode ...

when the pdf file cannot be written, pdftex asks for a filename; is it 
possible to replace en empty name (one hits return after closing the 
file in acroread for instance) by the 'normal' one? Now er can get funny 
names like .pdf and such; so:

while invalidfile
  asknameonconsole
  useoriginalname if emptyname
end

Hans

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From taco@elvenkind.com  Mon Jul  5 10:53:10 2004
From: taco@elvenkind.com (Taco Hoekwater)
Date: Mon, 5 Jul 2004 11:53:10 +0200
Subject: [NTG-pdftex] outpu tfile in pdftex
In-Reply-To: <40E90DCC.3030004@wxs.nl>
References: <40E90DCC.3030004@wxs.nl>
Message-ID: <20040705115310.4880d1a4@glenlivet.elvenkind.com>

This is a multi-part message in MIME format.

--Multipart=_Mon__5_Jul_2004_11_53_10_+0200_NqvUwkQgwl0lH5Bz
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit


Hi,

The attached 3-line patch should do the trick. It saves the 'current name'
before calling prompt_input () and restores that value when the net 
result of prompt_input() is empty.

This changes all cases where tex explicitly asks for a file name on the terminal,
not just the one for pdf file. I think this is ok, because similar 'null file' problems
appear in all cases of the keypress "<return>".

On Mon, 05 Jul 2004 10:14:04 +0200, Hans wrote:

> Hi,
> 
> Since we're in 'making pdftex robust' mode ...
> 
> when the pdf file cannot be written, pdftex asks for a filename; is it 
> possible to replace en empty name (one hits return after closing the 
> file in acroread for instance) by the 'normal' one? Now er can get funny 
> names like .pdf and such; so:
> 
> while invalidfile
>   asknameonconsole
>   useoriginalname if emptyname
> end
> 
> Hans
> 
> -----------------------------------------------------------------
>                                           Hans Hagen | PRAGMA ADE
>               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
>                                              | www.pragma-pod.nl
> -----------------------------------------------------------------
> 
> _______________________________________________
> ntg-pdftex mailing list
> ntg-pdftex@ntg.nl
> http://www.ntg.nl/mailman/listinfo/ntg-pdftex


-- 
groeten,

Taco

--Multipart=_Mon__5_Jul_2004_11_53_10_+0200_NqvUwkQgwl0lH5Bz
Content-Type: application/octet-stream;
 name="empty_filename.patch"
Content-Disposition: attachment;
 filename="empty_filename.patch"
Content-Transfer-Encoding: base64

LS0tIHBkZmV0ZXgud2ViCTIwMDQtMDctMDUgMTE6NDk6NTYuNDkxODc2Mjg3ICswMjAwCisrKyBw
ZGZldGV4LndlYi5vcmcJMjAwNC0wNy0wNSAxMTo0MTo0Ny4wMjUwMTE0MjggKzAyMDAKQEAgLTEw
OTA1LDcgKzEwOTA1LDYgQEAKIEBwIHByb2NlZHVyZSBwcm9tcHRfZmlsZV9uYW1lKEAhcyxAIWU6
c3RyX251bWJlcik7CiBsYWJlbCBkb25lOwogdmFyIGs6MC4uYnVmX3NpemU7IHtpbmRleCBpbnRv
IHxidWZmZXJ8fQotQCFzYXZlZF9jdXJfbmFtZTpzdHJfbnVtYmVyOyB7dG8gY2F0Y2ggZW1wdHkg
dGVybWluYWwgaW5wdXR9CiBiZWdpbiBpZiBpbnRlcmFjdGlvbj1zY3JvbGxfbW9kZSB0aGVuIHdh
a2VfdXBfdGVybWluYWw7CiBpZiBzPSJpbnB1dCBmaWxlIG5hbWUiIHRoZW4gcHJpbnRfZXJyKCJJ
IGNhbid0IGZpbmQgZmlsZSBgIikKIEAuSSBjYW4ndCBmaW5kIGZpbGUgeEA+CkBAIC0xMDkxOCwx
MCArMTA5MTcsOCBAQAogaWYgaW50ZXJhY3Rpb248c2Nyb2xsX21vZGUgdGhlbgogICBmYXRhbF9l
cnJvcigiKioqIChqb2IgYWJvcnRlZCwgZmlsZSBlcnJvciBpbiBub25zdG9wIG1vZGUpIik7CiBA
LmpvYiBhYm9ydGVkLCBmaWxlIGVycm9yLi4uQD4KLXNhdmVkX2N1cl9uYW1lOj1jdXJfbmFtZTsK
IGNsZWFyX3Rlcm1pbmFsOyBwcm9tcHRfaW5wdXQoIjogIik7IEA8U2NhbiBmaWxlIG5hbWUgaW4g
dGhlIGJ1ZmZlckA+OwogaWYgY3VyX2V4dD0iIiB0aGVuIGN1cl9leHQ6PWU7Ci1pZiAobGVuZ3Ro
KGN1cl9uYW1lKT0wIHRoZW4gY3VyX25hbWU6PXNhdmVkX2N1cl9uYW1lOwogcGFja19jdXJfbmFt
ZTsKIGVuZDsKIAo=

--Multipart=_Mon__5_Jul_2004_11_53_10_+0200_NqvUwkQgwl0lH5Bz--

From taco@elvenkind.com  Mon Jul  5 11:20:44 2004
From: taco@elvenkind.com (Taco Hoekwater)
Date: Mon, 5 Jul 2004 12:20:44 +0200
Subject: [NTG-pdftex] build problems with HEAD
In-Reply-To: <20040701221524.2de3b850.taco@elvenkind.com>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de>
 <20040701151755.GA4582@m0A02325D.vpn.uni-freiburg.de>
 <20040701153822.GS8095@artcom8.artcom-gmbh.de>
 <Pine.LNX.4.60.0407012150130.30917@hahepc1.hahe>
 <20040701221524.2de3b850.taco@elvenkind.com>
Message-ID: <20040705122044.5f74f909@glenlivet.elvenkind.com>

Hi,

Just to let you know: I cannot get the HEAD to compile without manually 
adding a "-i" option to the make call in the Build script.

"make" bombs at:

gcc  -g -O2   -o texindex  texindex.o ../lib/libtxi.a
make[4]: *** No rule to make target `../../../../../TeX/utils/texinfo/doc/version.texi', needed by `texinfo.cat'.  Stop.
make[4]: Leaving directory `/home/taco/perforce/Build/source.development/Work/TeX/utils/texinfo/util'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/home/taco/perforce/Build/source.development/Work/TeX/utils/texinfo'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/home/taco/perforce/Build/source.development/Work/TeX/utils/texinfo'
make[1]: *** [all] Error 1
make[1]: Leaving directory `/home/taco/perforce/Build/source.development/Work/TeX'


And later, the lcdf-typetools don't compile (not updated for automake-1.8 yet?).
I get loads and loads of these "underquoted" warnings:

making all in utils/lcdf-typetools
make[2]: Entering directory `/home/taco/perforce/Build/source.development/Work/TeX/utils/lcdf-typetools'
cd ../../../../TeX/utils/lcdf-typetools && /bin/sh /home/taco/perforce/Build/source.development/TeX/utils/lcdf-typetools/missing --run aclocal-1.8
/usr/share/aclocal/vorbis.m4:9: warning: underquoted definition of XIPH_PATH_VORBIS
  run info '(automake1.8)Extending aclocal'
  or see http://sources.redhat.com/automake/automake.html#Extending%20aclocal
/usr/share/aclocal/ogg.m4:8: warning: underquoted definition of XIPH_PATH_OGG



-- 
groeten,

Taco

From oberdiek@uni-freiburg.de  Mon Jul  5 12:56:17 2004
From: oberdiek@uni-freiburg.de (Heiko Oberdiek)
Date: Mon, 5 Jul 2004 13:56:17 +0200
Subject: [NTG-pdftex] missing pages
In-Reply-To: <40E90CDA.7020205@wxs.nl>
References: <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl> <20040702114348.GA2653@m0A02325D.vpn.uni-freiburg.de> <40E55022.3050900@wxs.nl> <20040702131337.GA3315@m0A02325D.vpn.uni-freiburg.de> <40E5697E.90201@wxs.nl> <20040702200044.GB3040@irwin.vpn.uni-freiburg.de> <40E90CDA.7020205@wxs.nl>
Message-ID: <20040705115617.GA2783@m0A02325D.vpn.uni-freiburg.de>

On Mon, Jul 05, 2004 at 10:10:02AM +0200, Hans Hagen wrote:

> Heiko Oberdiek wrote:
> 
> >I would prefer variant b) because it reduces the needed magic numbers.
> > 
> >
> i like a because i often run into faulty pdf's and this is a nice way of 
> detecting them -) 

I do not understand this, a) adds another possibility for testing,
if someone has specified 0 or a negative number as page number
for \pdfximage. But this has nothing to do with faulty PDFs.

Yours sincerely
  Heiko <oberdiek@uni-freiburg.de>

From pragma@wxs.nl  Mon Jul  5 17:12:27 2004
From: pragma@wxs.nl (Hans Hagen)
Date: Mon, 05 Jul 2004 18:12:27 +0200
Subject: [NTG-pdftex] missing pages
In-Reply-To: <20040705115617.GA2783@m0A02325D.vpn.uni-freiburg.de>
References: <20040630160037.GF8095@artcom8.artcom-gmbh.de> <40E2E5A7.4050502@wxs.nl> <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl> <20040702114348.GA2653@m0A02325D.vpn.uni-freiburg.de> <40E55022.3050900@wxs.nl> <20040702131337.GA3315@m0A02325D.vpn.uni-freiburg.de> <40E5697E.90201@wxs.nl> <20040702200044.GB3040@irwin.vpn.uni-freiburg.de> <40E90CDA.7020205@wxs.nl> <20040705115617.GA2783@m0A02325D.vpn.uni-freiburg.de>
Message-ID: <40E97DEB.7080607@wxs.nl>

Heiko Oberdiek wrote:

>On Mon, Jul 05, 2004 at 10:10:02AM +0200, Hans Hagen wrote:
>
>  
>
>>Heiko Oberdiek wrote:
>>
>>    
>>
>>>I would prefer variant b) because it reduces the needed magic numbers.
>>>
>>>
>>>      
>>>
>>i like a because i often run into faulty pdf's and this is a nice way of 
>>detecting them -) 
>>    
>>
>
>I do not understand this, a) adds another possibility for testing,
>if someone has specified 0 or a negative number as page number
>for \pdfximage. But this has nothing to do with faulty PDFs.
>  
>
ah, i thought that -2 would also be set if pdftex had problems with the pdf file (xpdf lib error) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From oberdiek@uni-freiburg.de  Mon Jul  5 17:29:21 2004
From: oberdiek@uni-freiburg.de (Heiko Oberdiek)
Date: Mon, 5 Jul 2004 18:29:21 +0200
Subject: [NTG-pdftex] missing pages
In-Reply-To: <40E97DEB.7080607@wxs.nl>
References: <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl> <20040702114348.GA2653@m0A02325D.vpn.uni-freiburg.de> <40E55022.3050900@wxs.nl> <20040702131337.GA3315@m0A02325D.vpn.uni-freiburg.de> <40E5697E.90201@wxs.nl> <20040702200044.GB3040@irwin.vpn.uni-freiburg.de> <40E90CDA.7020205@wxs.nl> <20040705115617.GA2783@m0A02325D.vpn.uni-freiburg.de> <40E97DEB.7080607@wxs.nl>
Message-ID: <20040705162921.GA4206@m0A02325D.vpn.uni-freiburg.de>

On Mon, Jul 05, 2004 at 06:12:27PM +0200, Hans Hagen wrote:

> ah, i thought that -2 would also be set if pdftex had problems with the pdf 
> file (xpdf lib error) 

Currently such errors are fatal errors. I have not looked into
the sources if recovery from such errors is possible. If yes,
then \pdflastximagepages is a bad choice for signaling such
errors, because only a page can be faulty, the number of
pages can be still correct.
  Perhaps we need a kind of "errno" variable for signaling
errors. Then \pdflastximagepages contains the correct number or
-1 for "unknown". "errno" contains "0" in case of success of
the last operation or a error number (file not found,
corrupted pdf file, invalid page, ...)

Yours sincerely
  Heiko <oberdiek@uni-freiburg.de>
-- 

From ms@artcom-gmbh.de  Tue Jul  6 10:24:56 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Tue, 6 Jul 2004 11:24:56 +0200
Subject: [NTG-pdftex] Re: pdftex status
In-Reply-To: <200407052344.i65NiMI19279@f7.net>
References: <200407052344.i65NiMI19279@f7.net>
Message-ID: <20040706092454.GR8095@artcom8.artcom-gmbh.de>

On 2004-07-05 19:44:22 -0400, Karl Berry wrote:
> I guess it's time to ask again how pdftex is doing, since Olaf is
> apparently winding down web2c ... any info appreciated :).

Karl,
we are also closing down 1.20a; I expect a release this week.

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From ms@artcom-gmbh.de  Tue Jul  6 10:31:00 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Tue, 6 Jul 2004 11:31:00 +0200
Subject: [NTG-pdftex] outpu tfile in pdftex
In-Reply-To: <20040705115310.4880d1a4@glenlivet.elvenkind.com>
References: <40E90DCC.3030004@wxs.nl> <20040705115310.4880d1a4@glenlivet.elvenkind.com>
Message-ID: <20040706093100.GS8095@artcom8.artcom-gmbh.de>

On 2004-07-05 11:53:10 +0200, Taco Hoekwater wrote:
> The attached 3-line patch should do the trick. It saves the 'current name'
> before calling prompt_input () and restores that value when the net 
> result of prompt_input() is empty.

This seems like a case for Olaf, as pdfTeX currently doesn't
change the routine.

Olaf?

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From ms@artcom-gmbh.de  Tue Jul  6 10:48:25 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Tue, 6 Jul 2004 11:48:25 +0200
Subject: [NTG-pdftex] build problems with HEAD
In-Reply-To: <20040705122044.5f74f909@glenlivet.elvenkind.com>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de> <20040701151755.GA4582@m0A02325D.vpn.uni-freiburg.de> <20040701153822.GS8095@artcom8.artcom-gmbh.de> <Pine.LNX.4.60.0407012150130.30917@hahepc1.hahe> <20040701221524.2de3b850.taco@elvenkind.com> <20040705122044.5f74f909@glenlivet.elvenkind.com>
Message-ID: <20040706094825.GV8095@artcom8.artcom-gmbh.de>

On 2004-07-05 12:20:44 +0200, Taco Hoekwater wrote:
> Just to let you know: I cannot get the HEAD to compile without manually 
> adding a "-i" option to the make call in the Build script.

Taco,
this properly belongs to the TeXlive list. I can happily compile
the pdftex part of texlive.

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From ms@artcom-gmbh.de  Tue Jul  6 10:53:37 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Tue, 6 Jul 2004 11:53:37 +0200
Subject: [NTG-pdftex] open problems with 1.20a
In-Reply-To: <Pine.LNX.4.60.0407020159520.20524@hahepc1.hahe>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de> <20040701151755.GA4582@m0A02325D.vpn.uni-freiburg.de> <20040701153822.GS8095@artcom8.artcom-gmbh.de> <Pine.LNX.4.60.0407012321510.4271@hahepc1.hahe> <Pine.LNX.4.60.0407020159520.20524@hahepc1.hahe>
Message-ID: <20040706095337.GW8095@artcom8.artcom-gmbh.de>

On 2004-07-02 02:09:43 +0200, Hartmut Henkel wrote:
> > > http://www.ndh.net/home/mauz/majox.de/newsgroup/compile-ablauf.png
> 
> writepng.c patch was wrong, corrected below, sorry.

It's in (#5440).

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From olaf@infovore.xs4all.nl  Tue Jul  6 11:18:44 2004
From: olaf@infovore.xs4all.nl (Olaf Weber)
Date: Tue, 06 Jul 2004 12:18:44 +0200
Subject: [NTG-pdftex] outpu tfile in pdftex
In-Reply-To: <20040706093100.GS8095@artcom8.artcom-gmbh.de> (Martin
 =?iso-8859-1?q?Schr=F6der's?= message of "Tue, 6 Jul 2004 11:31:00 +0200")
References: <40E90DCC.3030004@wxs.nl>
 <20040705115310.4880d1a4@glenlivet.elvenkind.com>
 <20040706093100.GS8095@artcom8.artcom-gmbh.de>
Message-ID: <874qoll9q3.fsf@infovore.xs4all.nl>

Martin Schröder writes:
> On 2004-07-05 11:53:10 +0200, Taco Hoekwater wrote:

>> The attached 3-line patch should do the trick. It saves the 'current name'
>> before calling prompt_input () and restores that value when the net 
>> result of prompt_input() is empty.

> This seems like a case for Olaf, as pdfTeX currently doesn't
> change the routine.

> Olaf?

I'd like to see more opinions on this.  Please propose on the tex-live
list.

-- 
Olaf Weber

               (This space left blank for technical reasons.)


From pragma@wxs.nl  Tue Jul  6 14:23:48 2004
From: pragma@wxs.nl (Hans Hagen)
Date: Tue, 06 Jul 2004 15:23:48 +0200
Subject: [NTG-pdftex] missing pages
In-Reply-To: <20040705162921.GA4206@m0A02325D.vpn.uni-freiburg.de>
References: <20040701104607.GA263@monty> <40E51189.9020601@wxs.nl> <20040702114348.GA2653@m0A02325D.vpn.uni-freiburg.de> <40E55022.3050900@wxs.nl> <20040702131337.GA3315@m0A02325D.vpn.uni-freiburg.de> <40E5697E.90201@wxs.nl> <20040702200044.GB3040@irwin.vpn.uni-freiburg.de> <40E90CDA.7020205@wxs.nl> <20040705115617.GA2783@m0A02325D.vpn.uni-freiburg.de> <40E97DEB.7080607@wxs.nl> <20040705162921.GA4206@m0A02325D.vpn.uni-freiburg.de>
Message-ID: <40EAA7E4.90809@wxs.nl>

Heiko Oberdiek wrote:

>On Mon, Jul 05, 2004 at 06:12:27PM +0200, Hans Hagen wrote:
>
>  
>
>>ah, i thought that -2 would also be set if pdftex had problems with the pdf 
>>file (xpdf lib error) 
>>    
>>
>
>Currently such errors are fatal errors. I have not looked into
>the sources if recovery from such errors is possible. If yes,
>then \pdflastximagepages is a bad choice for signaling such
>errors, because only a page can be faulty, the number of
>pages can be still correct.
>  
>
indeed

>  Perhaps we need a kind of "errno" variable for signaling
>errors. Then \pdflastximagepages contains the correct number or
>-1 for "unknown". "errno" contains "0" in case of success of
>the last operation or a error number (file not found,
>corrupted pdf file, invalid page, ...)
>  
>
you're right, something \pdflastximageerror sounds ok to me 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From te@dbs.uni-hannover.de  Tue Jul  6 15:24:23 2004
From: te@dbs.uni-hannover.de (Thomas Esser)
Date: Tue, 6 Jul 2004 16:24:23 +0200
Subject: [NTG-pdftex] \pdfhorigin / \pdfvorigin broken?
Message-ID: <20040706142423.GB7693@dbs.uni-hannover.de>

--nFreZHaLTZJo0R7j
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

I wonder if there is some automatic translation from 0pt to 1in
somewhere...

The following

  \pdfhorigin=0pt
  \pdfvorigin=0pt
  \pdfximage page 1 {foo.pdf}%
  \setbox0=\hbox{\pdfrefximage\pdflastximage}%
  \pdfpagewidth=\wd0
  \pdfpageheight=\ht0
  \shipout\box0
  \bye

gives a shifted output of foo.pdf (by 1in), while

  \pdfhorigin=1pt
  \pdfvorigin=1pt
  \pdfximage page 1 {foo.pdf}%
  \setbox0=\hbox{\pdfrefximage\pdflastximage}%
  \pdfpagewidth=\wd0
  \pdfpageheight=\ht0
  \shipout\box0
  \bye

gives only a shift by 1pt (as specified)-

Something to fix for 1.20 hopefully...

Thomas

--nFreZHaLTZJo0R7j
Content-Type: application/pdf
Content-Disposition: attachment; filename="foo.pdf"
Content-Transfer-Encoding: base64

JVBERi0xLjMKJcfsj6IKNSAwIG9iago8PC9MZW5ndGggNiAwIFIvRmlsdGVyIC9GbGF0ZURl
Y29kZT4+CnN0cmVhbQp4nO1Z7cufZRmWgpK7EmwIQm930w8mPj73eb3fORfN6ZqwmIlJraL1
KJu0R5svFIoQRUiFfVCpKClK/DDF3n0hAsmxkoav2xwpRWWJL1SGpDMsO4/jPK/f6j/oQw73
O/a77vu8zrfrvI7jeXaP0+kyTvjjnyurw/IH5nHHFYNM46cHGS8ZpnHTgKXVIbYJYNdw/rB7
9H9MY5gc6LsbNg/LZ52/vGlYvnCUYfl9Y8hlWN6w9ayxDcvnLJ+za1jeuHXduuWtl1980SUr
V152+ShZ37hs11Wrl14xyvr1w+aN42duXv35JTvv333MMVsfuvbBa//8qXdsv/GkNRvu37AR
/5289s2PbFy79vjVRy46/vgPnbbh2HduOnF+av1T5fBbV546fO/Ld71003mPv/qrc/afvf+6
E757wt5zT73ugvtuu+0Lhw4du3LwjZ/cc8dXfrr9zL/nh7eedP2+L61Zfu+aLfnAR96wdOej
H37L6p0HPvb6L95w5cHNOz565aEtP/rL1U/v+dpv//H07d/+1+tOPGXf+Pk3ycFp7/XTo6fc
cr081p7cMj1y8o1b5FA68MB04LQfPyCH172w9IOH13556YcHw56vbtt+6wUf3LZyx1WPPfHx
W7aUJz5xe3rmrl+fvve4My5+/OK7z3zx8R33vva4d5+8f/umi8549utPvr89c9OBB9tzN79w
+j1P37D/e/c8+43nLr3nXb9cuvs3uw+f+dKfrv7ddza9/Zo/7NnxrWt+f+u67//sxV9s++t9
L60/csp7XvnjFUf2HX7+m597/pojex96/sKfTK+87Z9rlk59+e6b9r16zLl/++xrhrM3j+cN
u4cYy1jngFqWpGge4xzHNqUxxcbPlSFLIcqzPlvts5SCFUVZ385qJevzSb/NASspZUVxTAGf
MqbJPleGOBuKrdpnbfoZsFLVkqCdYpvHhP8ntVkntaL+pKbPFP0mTKLPFH1XWhyL7i26b0nz
KKnqM1UqUVF7om+VOWlXTX1FUU2TfZbIJ3RFd5Na1W4tWdGsz0TarwE7RkSr+ybN0C6NW30W
WNZ44QMyMiMGIFgtWXOWNB59E5+aEfUCSKOTmShFPGMZaHFGBrCiKJTJPqfAJ1YG0eia4G2Z
dW2CF0HU4lTHEKw+IQatICoW9N2qfgV9t+Zqn4IdgEJFjon0jcB9CrFobfQZtSctj7AvTbOs
O0qb6EXwLBEloIBVRYIsq5ewa9nmiiL0GD9b5BOai5jdDroAthWhFrpbzMLdo3aQ+RNjo4ew
Ay/5WbHDTh1KGjhCW3Wo0SooDF8miZ4RhTOTJFMUBU1BzkykLgqqZNkVL9iuYc6NSB/UN9Ax
2MAKxTVF82QFayXwkZWhaQObqYZnWKjWArdsaAG1Met8NLdmLR88hR24zk8WCsgKRaRh41mk
AW9bYmAPqYJ9pA47WqHghSWYiIWCz0DwFWWAXSsUV7IHaABFSIvceM2RMSsWs8jeQF7hA3Nt
bjH/8JT22FcEvWQB9dTqrjrUg6TAgpIAM61wZ4TFFBhkFBLFwpAQZh5eCTV6ILaIANhNAGmq
fsQF08mNZDQXjBRGPGOCICAcVKktmNetatPBOECOmC2ENeibNdgployG4hEXzARrHonJjrvu
kniGJcnk3WOLCtX15kBSP+mskTejng5rIX1AeNg1bJvPjN+bO0RveOSTR4CAjaQJj9GOgSY8
FpihNzAD/7DdRPdLMCi1WDsSZDsjgFFj0cD1iq9qomhAITDvGZ1hAwCTQMwsAPLOzpCRm4uO
SToks3kXRLsPvbHqEDNJsnVQQBP6VBIOZIwl770gU/V+D1Pu89ugjaYw2U2gybN+5g4+nbiY
EUK2XtEenLzrQ8x90um3ybs+hDbZzqE08yWUo1NTc0CfYY9REFTbLOOWiDSisEYYyYl3hQKd
AnO08RwIMZ+TQT0qOi5aAtBvCu0lTVBpwue0Sf4DVp2tAZdn1fEb+q3DV6w5Qwp2q2iPFG86
jXfiAAtRrDVDWNxKmvBIiOSif9Cwc/P2n/VO9fafQ+CuChL9IIBvWNT0mJsKZ8YBqPYQm4KZ
0WpbzD0ZggRZMgQpQq5QQGYPoPA57SFOvkhKKgKn2hiDoGEnA7mSewBWXCE6FxiHlrz2MFvN
FjoGQOUlo6BMOPeESS/30HSYJJR5LpUAF502NWCc1HYSgIz7naxGD6q+yStOsCR4F6dASxNa
wPxh/xCyb3cOEQMz6QZ6KGY9ZoChadPhoBEUjiNCHsg22/2mb+Jgw62IOQyInXF1wUNRp4oe
UgPC5wBB3+LUbNfF9khujBg0E+a1nluDajFh5xINop66N7iaAyFQ46kuFkGqioMofTEkekio
s01BJeGKnNezGclGxiKZA1hCkuRnP0YU39hE9DtOIbgloL5iNwB3sLNvi6Ak2e+JWKbs90Qs
rV+esYS2oCccNuAnoIrwJdeFf7lk8znzPHeQii324xMzaJwOf8SLi1tLG5O+V3HTRBwfurCT
vFxZaHNirj5kMnPBK6DmBMbNCUHF9eZyAOpr9FzIVcnAUiJB1wsrOEOXrKUFRVdQydEJjKQT
kp8RVAzO0JynCzY2oq4TM5Opa7YLqbqknJyrC6ask3XRh8nW9Qoxuq6udFYOSMKOQ0/Gjjtg
sViMsxOgZMIdyNpRC6ftGMnk7dgKxF23n525a5WzU3eNI5GzC2pJUObm7J0XHei74KSDvxMY
gSc0Bk8ICq/A09NSdhJPCBZvAHdqozbhfdakOZFXmJ3JK4yjUW/cq+Qf0+RkXhApmTWHIEHI
zueVRRQn9EaojFA4iYFack6PS5hbgVdwe2damOOWRoM5dmIPKFaNbPtaWXzRSLmBFu0pp/dm
j/2DXZzgY2cyfPhCim/+gePTZ9pDFAZqOUrzGfJqx7CGAcfUGPu0fDklBe91lppGp66SF4zW
ayC9vs6PAY39tuQE1svqy9l4MwCJdOMZ525m0kg4y+q8PI1G1PUZcndzE3SevtMewjHAshJa
WQ1qQvgCUkQjljYaRiq5Fekitrey0ikrg0GWlXEA0n0UjDtYWX2xR26I5cpHU+edwpRaaS3R
7Comn2yPJTE3rVDw3ewiHEe9wPwq6FarHYfksgA2TBcINbapAWF2HDMyY//sWGoDzAgTBxZc
Xy8uD4ioD2yamEBwW1QItEWJIBgv1AjSWhcJ5igUgUTcLUQ5xa4TpILnQihYX2W2o4kRSAVv
PMoBewJigZOCasE7r69n0wuOJC1mCpVMb2gKarYfNQPHCkWDHQlmxg9KiP34MBAeKUNsQlcO
fNqlg1CCJDtszVk+kKsH+xYT1KwRZTt2xJF3a4AjtZqEkMCfGJmGCEbBURP8RftAXUbwW3oC
jmf+KeM/qiTYUasdU15m7z0TEz4PqSZsIPbeNT1hZ8dUhHW6YxuKYfLLyjQFx6L0U7OyWHcZ
YIi6wlkehYXbpbKwE2TSgl5QW9Azios+v5kdcVVhkRmqpQsMvcXmrjC096pJDCaeGkPqPHeR
Qewqg5gyQ0w0UPzwJ3wUGlJa7fLiv3CFikj80Rmo8eKGdLVBTLnBTqXe8J6l4ODwpOKwazIc
vUSpOYhddFjXz62fJciOfpagO+gB9Qa9MgRfXXq439QejM3Fh5hgYcfOs8mPnicOEM+TdDls
1WZ2iUrXsTZ5Y1mIkAA6DsWh06E4yrV2HaI2mgkRxkYl0qOHFLGccM5UyDaiIrGrESU0weSI
oKDUI0QuSIipSAQloCQRUEfXJAI546JEwD3tLZxA0yK62UKXWPe7MNF5E7syIaYM0VYXR4Uz
0HANxdQJ5w/liTR6SX0i9qMOChRiqhGpINNExX42TAwKS5HCXY/6spApUkW6TiF2ocLKuVJR
aj+ZVOlIDLke6d8CacocUW4ZDjl0wcJxSsVCpmmSJUzTQrOAiEbnQ9VVi00Y0yrOkmK/lLtw
ATblgia0vWzC9PXi4oWI6sVuMZMvbpf6pdMvm27VFQw9o4Rxf6FhLAraZWSGcugyxk8kdYyS
7akLGa1cMSXDi5FSRrOXrDLVmAZOxoXjpcPucWnxu6Il/rKI/yT6/6+M/sd/ZYQ//wbmZzoD
ZW5kc3RyZWFtCmVuZG9iago2IDAgb2JqCjMwNjQKZW5kb2JqCjQgMCBvYmoKPDwvVHlwZS9Q
YWdlL01lZGlhQm94IFswIDAgMzgwIDIwMF0KL1JvdGF0ZSAwL1BhcmVudCAzIDAgUgovUmVz
b3VyY2VzPDwvUHJvY1NldFsvUERGIC9JbWFnZUJdCi9FeHRHU3RhdGUgMTAgMCBSCj4+Ci9D
b250ZW50cyA1IDAgUgo+PgplbmRvYmoKMyAwIG9iago8PCAvVHlwZSAvUGFnZXMgL0tpZHMg
Wwo0IDAgUgpdIC9Db3VudCAxCj4+CmVuZG9iagoxIDAgb2JqCjw8L1R5cGUgL0NhdGFsb2cg
L1BhZ2VzIDMgMCBSCj4+CmVuZG9iago5IDAgb2JqCjw8L1R5cGUvRXh0R1N0YXRlL05hbWUv
UjkvVFIvSWRlbnRpdHkvQkcgNyAwIFIvVUNSIDggMCBSL09QTSAxPj4KZW5kb2JqCjEwIDAg
b2JqCjw8L1I5CjkgMCBSPj4KZW5kb2JqCjggMCBvYmoKPDwvRmlsdGVyL0ZsYXRlRGVjb2Rl
Ci9GdW5jdGlvblR5cGUgMAovRG9tYWluWzAKMV0KL1JhbmdlWy0xCjFdCi9CaXRzUGVyU2Ft
cGxlIDgKL0RlY29kZVstMQoxLjAwNzg3XQovU2l6ZVsyNTZdL0xlbmd0aCAxMj4+c3RyZWFt
Cnicq68f2QAAxDF/AQplbmRzdHJlYW0KZW5kb2JqCjcgMCBvYmoKPDwvRmlsdGVyL0ZsYXRl
RGVjb2RlCi9GdW5jdGlvblR5cGUgMAovRG9tYWluWzAKMV0KL1JhbmdlWzAKMV0KL0JpdHNQ
ZXJTYW1wbGUgOAovU2l6ZVsyNTZdL0xlbmd0aCAxMj4+c3RyZWFtCnicY2AY2QAAAQAAAQpl
bmRzdHJlYW0KZW5kb2JqCjIgMCBvYmoKPDwvUHJvZHVjZXIoQUZQTCBHaG9zdHNjcmlwdCA4
LjEzKQovQ3JlYXRpb25EYXRlKEQ6MjAwNDA3MDYxNjIyMjIpCi9Nb2REYXRlKEQ6MjAwNDA3
MDYxNjIyMjIpCi9DcmVhdG9yKGthcmxAY3MudW1iLmVkdSBmcm9tIGNvZGUgYnkgUm9nZXIg
SGVyc2NoKQovVGl0bGUoUklEVCBsb2dvKT4+ZW5kb2JqCnhyZWYKMCAxMQowMDAwMDAwMDAw
IDY1NTM1IGYgCjAwMDAwMDMzNzcgMDAwMDAgbiAKMDAwMDAwMzg1MCAwMDAwMCBuIAowMDAw
MDAzMzE4IDAwMDAwIG4gCjAwMDAwMDMxNjkgMDAwMDAgbiAKMDAwMDAwMDAxNSAwMDAwMCBu
IAowMDAwMDAzMTQ5IDAwMDAwIG4gCjAwMDAwMDM3MDMgMDAwMDAgbiAKMDAwMDAwMzUzNSAw
MDAwMCBuIAowMDAwMDAzNDI1IDAwMDAwIG4gCjAwMDAwMDM1MDUgMDAwMDAgbiAKdHJhaWxl
cgo8PCAvU2l6ZSAxMSAvUm9vdCAxIDAgUiAvSW5mbyAyIDAgUgo+PgpzdGFydHhyZWYKNDAz
MAolJUVPRgo=

--nFreZHaLTZJo0R7j--

From noreply@sarovar.org  Tue Jul  6 15:55:53 2004
From: noreply@sarovar.org (noreply@sarovar.org)
Date: Tue, 06 Jul 2004 20:25:53 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-88 ] \pdforigin=0pt shifts output on 1in
Message-ID: <E1BhrMP-0006Gk-00@sarovar.org>

Bugs item #88, was opened at 2004-07-06 16:55
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=88&group_id=106

Category: None
Group: v1.20a
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin SchrÃ¶der (oneiros)
Assigned to: The Thanh Han (hanthethanh)
Summary: \pdforigin=0pt shifts output on 1in

Initial Comment:
In the attached file foo1.tex the output starts at
(1in/1in), although it should start at (0pt/0pt). The
output of foo2.tex starts at (1pt/1pt) as expected.

Tested with the latest teTeX-beta.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=88&group_id=106

From ms@artcom-gmbh.de  Tue Jul  6 15:59:38 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Tue, 6 Jul 2004 16:59:38 +0200
Subject: [NTG-pdftex] \pdfhorigin / \pdfvorigin broken?
In-Reply-To: <20040706142423.GB7693@dbs.uni-hannover.de>
References: <20040706142423.GB7693@dbs.uni-hannover.de>
Message-ID: <20040706145938.GD8095@artcom8.artcom-gmbh.de>

On 2004-07-06 16:24:23 +0200, Thomas Esser wrote:
> Something to fix for 1.20 hopefully...

Indeed. It doesn't depend on image inclusion. :-(

http://sarovar.org/tracker/index.php?func=detail&aid=88&group_id=106&atid=493

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From hartmut_henkel@gmx.de  Tue Jul  6 20:20:45 2004
From: hartmut_henkel@gmx.de (Hartmut Henkel)
Date: Tue, 6 Jul 2004 21:20:45 +0200 (CEST)
Subject: [NTG-pdftex] \pdfhorigin / \pdfvorigin broken?
In-Reply-To: <20040706145938.GD8095@artcom8.artcom-gmbh.de>
References: <20040706142423.GB7693@dbs.uni-hannover.de>
 <20040706145938.GD8095@artcom8.artcom-gmbh.de>
Message-ID: <Pine.LNX.4.60.0407062114570.13613@hahepc1.hahe>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.

---1463811840-150485855-1089141645=:13613
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE

On Tue, 6 Jul 2004, Martin Schr=F6der wrote:

> On 2004-07-06 16:24:23 +0200, Thomas Esser wrote:
> > Something to fix for 1.20 hopefully...
>
> Indeed. It doesn't depend on image inclusion. :-(
>
> http://sarovar.org/tracker/index.php?func=3Ddetail&aid=3D88&group_id=3D10=
6&atid=3D493

i suppose that in pdftex.ch in the lines

if (pdf_h_origin =3D 0) and (pdf_v_origin =3D 0) then begin
    pdf_h_origin :=3D (one_hundred_inch + 50) div 100;
    pdf_v_origin :=3D (one_hundred_inch + 50) div 100;

the (pdf_h/v_origin =3D 0) was planned to check whether pdf_h/v_origin
have already been set. And this might interfere with the user setting
\pdfhorigin=3D0pt. So maybe one could try to add two boolean variables
like pdf_h/v_origin_set, and check these instead of the pdf_h/v_origin
values. Not yet tried, just a guess.

Regards, Hartmut
---1463811840-150485855-1089141645=:13613--

From te@dbs.uni-hannover.de  Tue Jul  6 20:37:49 2004
From: te@dbs.uni-hannover.de (Thomas Esser)
Date: Tue, 6 Jul 2004 21:37:49 +0200
Subject: [NTG-pdftex] \pdfhorigin / \pdfvorigin broken?
In-Reply-To: <Pine.LNX.4.60.0407062114570.13613@hahepc1.hahe>
References: <20040706142423.GB7693@dbs.uni-hannover.de> <20040706145938.GD8095@artcom8.artcom-gmbh.de> <Pine.LNX.4.60.0407062114570.13613@hahepc1.hahe>
Message-ID: <20040706193748.GE7693@dbs.uni-hannover.de>

On Tue, Jul 06, 2004 at 09:20:45PM +0200, Hartmut Henkel wrote:
> i suppose that in pdftex.ch in the lines
> 
> if (pdf_h_origin = 0) and (pdf_v_origin = 0) then begin
>     pdf_h_origin := (one_hundred_inch + 50) div 100;
>     pdf_v_origin := (one_hundred_inch + 50) div 100;
> 
> the (pdf_h/v_origin = 0) was planned to check whether pdf_h/v_origin
> have already been set. And this might interfere with the user setting
> \pdfhorigin=0pt.

Yes, I can confirm that. Removing these lines fixes the bug.

> So maybe one could try to add two boolean variables
> like pdf_h/v_origin_set, and check these instead of the pdf_h/v_origin
> values. Not yet tried, just a guess.

Can't this code just go away? I mean we set things up nicely via
pdftexconfig.tex (which gets dumped into our formats) for most people. The
others should know what they are doing...

Thomas

From hartmut_henkel@gmx.de  Tue Jul  6 21:46:00 2004
From: hartmut_henkel@gmx.de (Hartmut Henkel)
Date: Tue, 6 Jul 2004 22:46:00 +0200 (CEST)
Subject: [NTG-pdftex] \pdfhorigin / \pdfvorigin broken?
In-Reply-To: <20040706193748.GE7693@dbs.uni-hannover.de>
References: <20040706142423.GB7693@dbs.uni-hannover.de>
 <20040706145938.GD8095@artcom8.artcom-gmbh.de> <Pine.LNX.4.60.0407062114570.13613@hahepc1.hahe>
 <20040706193748.GE7693@dbs.uni-hannover.de>
Message-ID: <Pine.LNX.4.60.0407062236030.31335@hahepc1.hahe>

On Tue, 6 Jul 2004, Thomas Esser wrote:

> Can't this code just go away? I mean we set things up nicely via
> pdftexconfig.tex (which gets dumped into our formats) for most people. The
> others should know what they are doing...

Yes. But without it the initex default obviously would be 0pt, which
might give a slight compatibility problem for the initex die-hards.
Maybe one way to deal with this is to hardcode the default of 1 inch
into initex, so that it can be overwritten in pdftexconfig.tex or later.
The raw patch is below. Any problems with this?

Regards, Hartmut


% tex.ch2
%***********************************************************************

@x
cfg_pdf_option_pdf_inclusion_errorlevel_code = pdf_option_pdf_inclusion_errorlevel_code;
@y ---------------------------------------------------------------------
cfg_pdf_option_pdf_inclusion_errorlevel_code = pdf_option_pdf_inclusion_errorlevel_code;

@ @<Initialize table entries...@>=
pdf_h_origin := (one_hundred_inch + 50) div 100;
pdf_v_origin := (one_hundred_inch + 50) div 100;
@z

%***********************************************************************

@x
if (pdf_h_origin = 0) and (pdf_v_origin = 0) then begin
    pdf_h_origin := (one_hundred_inch + 50) div 100;
    pdf_v_origin := (one_hundred_inch + 50) div 100;
end;
@y ---------------------------------------------------------------------
@z

%***********************************************************************

From hartmut_henkel@gmx.de  Tue Jul  6 22:16:34 2004
From: hartmut_henkel@gmx.de (Hartmut Henkel)
Date: Tue, 6 Jul 2004 23:16:34 +0200 (CEST)
Subject: [NTG-pdftex] \pdfhorigin / \pdfvorigin broken?
In-Reply-To: <Pine.LNX.4.60.0407062236030.31335@hahepc1.hahe>
References: <20040706142423.GB7693@dbs.uni-hannover.de>
 <20040706145938.GD8095@artcom8.artcom-gmbh.de> <Pine.LNX.4.60.0407062114570.13613@hahepc1.hahe>
 <20040706193748.GE7693@dbs.uni-hannover.de> <Pine.LNX.4.60.0407062236030.31335@hahepc1.hahe>
Message-ID: <Pine.LNX.4.60.0407062307490.1304@hahepc1.hahe>

> % tex.ch2

BTW, if this patch is ok, one could extend it so that other standard
parameters, which else would be zero, get a default in pdfinitex, at
least these:

\pdfdecimaldigits=3 (not to spoil resolution in case it's forgotten)
\pdfoptionpdfminorversion=4 (who would like to get PDF-1.0?)

And this one, which got lost in pdftexconfig.tex(!):

\pdfimageresolution=72? 100?

Regards, Hartmut

From Rolf.Niepraschk@ptb.de  Wed Jul  7 07:35:00 2004
From: Rolf.Niepraschk@ptb.de (Rolf Niepraschk)
Date: Wed, 07 Jul 2004 08:35:00 +0200
Subject: [NTG-pdftex] empty \special
Message-ID: <40EB9994.6020204@ptb.de>

Processing a TeX document with

   \special{}

inside the pdfTeX compiler writes the warning

   Non-PDF special ignored!

My suggestion: Let an empty \special to be a valid PDF special.

...Rolf
-- 
|| Rolf Niepraschk c/o Physikalisch-Technische Bundesanstalt    ||
|| Abbestr. 2-12; D-10587 Berlin, Germany                       ||
|| Tel/Fax: ++49-30-3481-316/490, email: Rolf.Niepraschk@ptb.de ||


From ms@artcom-gmbh.de  Wed Jul  7 11:41:08 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed, 7 Jul 2004 12:41:08 +0200
Subject: [NTG-pdftex] \pdfhorigin / \pdfvorigin broken?
In-Reply-To: <Pine.LNX.4.60.0407062236030.31335@hahepc1.hahe>
References: <20040706142423.GB7693@dbs.uni-hannover.de> <20040706145938.GD8095@artcom8.artcom-gmbh.de> <Pine.LNX.4.60.0407062114570.13613@hahepc1.hahe> <20040706193748.GE7693@dbs.uni-hannover.de> <Pine.LNX.4.60.0407062236030.31335@hahepc1.hahe>
Message-ID: <20040707104108.GJ8095@artcom8.artcom-gmbh.de>

On 2004-07-06 22:46:00 +0200, Hartmut Henkel wrote:
> Yes. But without it the initex default obviously would be 0pt, which
> might give a slight compatibility problem for the initex die-hards.
> Maybe one way to deal with this is to hardcode the default of 1 inch
> into initex, so that it can be overwritten in pdftexconfig.tex or later.
> The raw patch is below. Any problems with this?

I don't see any. But why in tex.ch2 and not in pdftex.ch?

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From ms@artcom-gmbh.de  Wed Jul  7 11:41:38 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed, 7 Jul 2004 12:41:38 +0200
Subject: [NTG-pdftex] \pdfhorigin / \pdfvorigin broken?
In-Reply-To: <Pine.LNX.4.60.0407062307490.1304@hahepc1.hahe>
References: <20040706142423.GB7693@dbs.uni-hannover.de> <20040706145938.GD8095@artcom8.artcom-gmbh.de> <Pine.LNX.4.60.0407062114570.13613@hahepc1.hahe> <20040706193748.GE7693@dbs.uni-hannover.de> <Pine.LNX.4.60.0407062236030.31335@hahepc1.hahe> <Pine.LNX.4.60.0407062307490.1304@hahepc1.hahe>
Message-ID: <20040707104138.GK8095@artcom8.artcom-gmbh.de>

On 2004-07-06 23:16:34 +0200, Hartmut Henkel wrote:
> BTW, if this patch is ok, one could extend it so that other standard
> parameters, which else would be zero, get a default in pdfinitex, at
> least these:
> 
> \pdfdecimaldigits=3 (not to spoil resolution in case it's forgotten)
> \pdfoptionpdfminorversion=4 (who would like to get PDF-1.0?)
> 
> And this one, which got lost in pdftexconfig.tex(!):
> 
> \pdfimageresolution=72? 100?

Yes.

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From ms@artcom-gmbh.de  Wed Jul  7 11:45:53 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed, 7 Jul 2004 12:45:53 +0200
Subject: [NTG-pdftex] \pdfhorigin / \pdfvorigin broken?
In-Reply-To: <20040707104138.GK8095@artcom8.artcom-gmbh.de>
References: <20040706142423.GB7693@dbs.uni-hannover.de> <20040706145938.GD8095@artcom8.artcom-gmbh.de> <Pine.LNX.4.60.0407062114570.13613@hahepc1.hahe> <20040706193748.GE7693@dbs.uni-hannover.de> <Pine.LNX.4.60.0407062236030.31335@hahepc1.hahe> <Pine.LNX.4.60.0407062307490.1304@hahepc1.hahe> <20040707104138.GK8095@artcom8.artcom-gmbh.de>
Message-ID: <20040707104553.GL8095@artcom8.artcom-gmbh.de>

On 2004-07-07 12:41:38 +0200, Martin Schröder wrote:
> On 2004-07-06 23:16:34 +0200, Hartmut Henkel wrote:
> > BTW, if this patch is ok, one could extend it so that other standard
> > parameters, which else would be zero, get a default in pdfinitex, at
> > least these:
> > 
> > \pdfdecimaldigits=3 (not to spoil resolution in case it's forgotten)
> > \pdfoptionpdfminorversion=4 (who would like to get PDF-1.0?)
> > 
> > And this one, which got lost in pdftexconfig.tex(!):
> > 
> > \pdfimageresolution=72? 100?
> 
> Yes.

This is already handled by @<Initialize variables for \.{PDF} output@>

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From ms@artcom-gmbh.de  Wed Jul  7 12:13:14 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed, 7 Jul 2004 13:13:14 +0200
Subject: [NTG-pdftex] empty \special
In-Reply-To: <40EB9994.6020204@ptb.de>
References: <40EB9994.6020204@ptb.de>
Message-ID: <20040707111314.GM8095@artcom8.artcom-gmbh.de>

On 2004-07-07 08:35:00 +0200, Rolf Niepraschk wrote:
> My suggestion: Let an empty \special to be a valid PDF special.

Agreed.

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From hartmut_henkel@gmx.de  Wed Jul  7 18:09:22 2004
From: hartmut_henkel@gmx.de (Hartmut Henkel)
Date: Wed, 7 Jul 2004 19:09:22 +0200 (CEST)
Subject: [NTG-pdftex] \pdfhorigin / \pdfvorigin broken?
In-Reply-To: <20040707104553.GL8095@artcom8.artcom-gmbh.de>
References: <20040706142423.GB7693@dbs.uni-hannover.de>
 <20040706145938.GD8095@artcom8.artcom-gmbh.de> <Pine.LNX.4.60.0407062114570.13613@hahepc1.hahe>
 <20040706193748.GE7693@dbs.uni-hannover.de> <Pine.LNX.4.60.0407062236030.31335@hahepc1.hahe>
 <Pine.LNX.4.60.0407062307490.1304@hahepc1.hahe> <20040707104138.GK8095@artcom8.artcom-gmbh.de>
 <20040707104553.GL8095@artcom8.artcom-gmbh.de>
Message-ID: <Pine.LNX.4.60.0407071850500.1643@hahepc1.hahe>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.

---1463811840-1766883571-1089220162=:1643
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE

On Wed, 7 Jul 2004, Martin Schr=F6der wrote:

> > On 2004-07-06 23:16:34 +0200, Hartmut Henkel wrote:
> > >
> > > \pdfdecimaldigits=3D3 (not to spoil resolution in case it's forgotten=
)
> > > \pdfoptionpdfminorversion=3D4 (who would like to get PDF-1.0?)
> > > ...
> > > \pdfimageresolution=3D72? 100?
> ...
> This is already handled by @<Initialize variables for \.{PDF} output@>

But calling pdftex -ini xx.tex on this file

\showthe\pdfimageresolution
\showthe\pdfoptionpdfminorversion
\end

gives:

(./xx.tex
> 0.
l.1 \showthe\pdfimageresolution

?
> 0.
l.2 \showthe\pdfoptionpdfminorversion

So the user has to know that "0" means "72 dpi". With the patch below,
already the call to barebones pdftex -ini xx.tex gives:

(./xx.tex
> 72.
l.1 \showthe\pdfimageresolution

?
> 4.
l.2 \showthe\pdfoptionpdfminorversion

And if i set this to 3 in pdftexconfig.tex, after a texconfig init run i
get by calling pdftex xx.tex (not in ini mode):

> 3.
l.2 \showthe\pdfoptionpdfminorversion

Unclear how large parts of

@p procedure check_and_set_pdfoptionpdfminorversion;

are then obsolete by this patch. And yes, it should go into pdftex.ch (i
only use tex.ch2 for testing).

Regards, Hartmut


% tex.ch2
%***********************************************************************

@x
cfg_pdf_option_pdf_inclusion_errorlevel_code =3D pdf_option_pdf_inclusion_e=
rrorlevel_code;
@y ---------------------------------------------------------------------
cfg_pdf_option_pdf_inclusion_errorlevel_code =3D pdf_option_pdf_inclusion_e=
rrorlevel_code;

@ Initialize pdftex's parameters to some useful default value.
Helpful in case one forgets to set them during initex run.

@<Initialize table entries...@>=3D
pdf_h_origin :=3D (one_hundred_inch + 50) div 100;
pdf_v_origin :=3D (one_hundred_inch + 50) div 100;
pdf_compress_level :=3D 9;
pdf_decimal_digits :=3D 4;
pdf_image_resolution :=3D 72;
pdf_option_pdf_minor_version :=3D 4;
@z

%***********************************************************************

@x
if (pdf_h_origin =3D 0) and (pdf_v_origin =3D 0) then begin
    pdf_h_origin :=3D (one_hundred_inch + 50) div 100;
    pdf_v_origin :=3D (one_hundred_inch + 50) div 100;
end;
@y ---------------------------------------------------------------------
@z

%***********************************************************************


---1463811840-1766883571-1089220162=:1643--

From noreply@sarovar.org  Thu Jul  8 10:50:35 2004
From: noreply@sarovar.org (noreply@sarovar.org)
Date: Thu, 08 Jul 2004 15:20:35 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-88 ] \pdforigin=0pt shifts output on 1in
Message-ID: <E1BiVY3-0003fA-00@sarovar.org>

Bugs item #88, was opened at 2004-07-06 16:55
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=88&group_id=106

Category: None
Group: v1.20a
>Status: Closed
>Resolution: Fixed
Priority: 5
Submitted By: Martin SchrÃ¶der (oneiros)
Assigned to: The Thanh Han (hanthethanh)
Summary: \pdforigin=0pt shifts output on 1in

Initial Comment:
In the attached file foo1.tex the output starts at
(1in/1in), although it should start at (0pt/0pt). The
output of foo2.tex starts at (1pt/1pt) as expected.

Tested with the latest teTeX-beta.

----------------------------------------------------------------------

>Comment By: Martin SchrÃ¶der (oneiros)
Date: 2004-07-08 11:50

Message:
Logged In: YES 
user_id=421

#5452

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=88&group_id=106

From noreply@sarovar.org  Thu Jul  8 13:35:13 2004
From: noreply@sarovar.org (noreply@sarovar.org)
Date: Thu, 08 Jul 2004 18:05:13 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-87 ] In case of fatal errors, delete the output file
Message-ID: <E1BiY7N-0006DN-00@sarovar.org>

Feature Requests item #87, was opened at 2004-07-02 11:13
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=87&group_id=106

Category: None
>Group: v1.21
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin SchrÃ¶der (oneiros)
Assigned to: Nobody (None)
Summary: In case of fatal errors, delete the output file

Initial Comment:
When pdfTeX currently encounters a fatal error, it
closes it's output file, which leads to
incomplete/corrupt files.

pdfTeX should produce only valid files, and in case of
fatal errors the output should be deleted.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2004-07-02 14:35

Message:
Logged In: YES 
user_id=1608

When you truncate a file, the result is an empty file. From
a user's viewpoint, that is not the same thing as a corrupt
PDF. 
The distinction is small, but the advantage of an empty file is
that it is not likely to be confused for a correct PDF.

If it is possible, then deleting the PDF file is definately
better, but file deletion doesn't always work. Truncation
almost always does work, and it's only two syscalls extra,
so why not?


----------------------------------------------------------------------

Comment By: Martin SchrÃ¶der (oneiros)
Date: 2004-07-02 14:21

Message:
Logged In: YES 
user_id=421

Simply truncating a pdf still makes it invalid (because the
file structure is incomplete). Producing a valid truncated
output file in case of fatal errors will be tricky and not
always possible. Deleting the corrupt output is much easier.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2004-07-02 13:50

Message:
Logged In: YES 
user_id=1608

If deleting the file doesnt work, truncation is probably
still better than nothing. (?)

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=87&group_id=106

From noreply@sarovar.org  Thu Jul  8 13:38:34 2004
From: noreply@sarovar.org (noreply@sarovar.org)
Date: Thu, 08 Jul 2004 18:08:34 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-89 ] Handle missing pages in included pdfs better
Message-ID: <E1BiYAc-0006GX-00@sarovar.org>

Feature Requests item #89, was opened at 2004-07-08 14:38
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=89&group_id=106

Category: None
Group: v1.21
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin SchrÃ¶der (oneiros)
Assigned to: Nobody (None)
Summary: Handle missing pages in included pdfs better

Initial Comment:
Currently, when one tries to include page 10 of a 9
page document, pdftex quits.

Proposed change:

Behaviour of pdfTeX for pdf image inclusion:

UNKNOWN := -1
Initialization: \pdflastximagepages := UNKNOWN

Continue := Continue with empty xform object with
dimension 1bp x 1bp.
// 1bp because it avoids zero and possible problems and
// the output is small (/BBox [0 0 1 1])

if PDFFileExists
    if PageNumber < 1
        \pdflastximagepages = UNKNOWN
        Warning "Invalid page number"
        Continue
    elsif PageNumber > \pdflastximagepages
        \pdflastximagepages is set
        Warning "Page number to large (out of range)
        Continue
    else
        \pdflastximagepages is set
        image is included
    fi
else
    Warning "PDF file does not exist"
    \pdflastximagepages = UNKNOWN
    Continue
fi

Failure/Success checking:

if [page] < 1
    * Page number too small
elsif \pdflastximagepages = -1
    * PDF file does not exist
elsif [page] > \pdflastximagepages
    * Page number too large
else
    * Success
fi

or with optimization for success:

if [page] < 1
    * Page number too small
elsif [page] > \pdflastximagepages
    if \pdflastximagepages = -1
        * PDF file does not exist
    else
        * Page number too large
    fi
else
    * Success
fi

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=89&group_id=106

From ms@artcom-gmbh.de  Thu Jul  8 13:44:13 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu, 8 Jul 2004 14:44:13 +0200
Subject: [NTG-pdftex] open problems with 1.20a
In-Reply-To: <20040701143700.GP8095@artcom8.artcom-gmbh.de>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de>
Message-ID: <20040708124413.GR8095@artcom8.artcom-gmbh.de>

On 2004-07-01 16:37:00 +0200, Martin Schröder wrote:
> - hz problems.
> 
> Anything else?

Seems not. This leaves us with the NEWS file.

Could someone (Hartmut?) please elaborate a bit on these items:
------------------
- support embedding base fonts.
- fixed a few problems with handling fonts in included pdf.
- support for auto font expansion -- expanded TFM's are not
  required
- support for base font inclusion as suggested by Hartmut
------------------
These could be a bit more verbose. :-)

And is anything missing there?

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From ms@artcom-gmbh.de  Thu Jul  8 14:01:10 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu, 8 Jul 2004 15:01:10 +0200
Subject: [NTG-pdftex] PNG image embedding
In-Reply-To: <20040617141552.GA297@monty>
References: <Pine.LNX.4.58.0406162359550.10479@hahepc1.hahe> <20040617141552.GA297@monty>
Message-ID: <20040708130110.GA15916@artcom8.artcom-gmbh.de>

On 2004-06-17 21:15:52 +0700, The Thanh Han wrote:
> On Thu, Jun 17, 2004 at 12:16:27AM +0200, Hartmut Henkel wrote:
> > P.S. The newest libtiff comes with a tiff2pdf program. Quite handy.
> 
> ha, good that we dropped tiff support. If there is a reasonable png2pdf
> program, should we drop PNG support as well?

Well, there is png2pdf: http://png2pdf.sourceforge.net/

We should keep png; it works quite well compared to the tiff
support when I removed it. And we need some losless image
support. :-)

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From pragma@wxs.nl  Thu Jul  8 16:43:27 2004
From: pragma@wxs.nl (Hans Hagen)
Date: Thu, 08 Jul 2004 17:43:27 +0200
Subject: [NTG-pdftex] PNG image embedding
In-Reply-To: <20040708130110.GA15916@artcom8.artcom-gmbh.de>
References: <Pine.LNX.4.58.0406162359550.10479@hahepc1.hahe> <20040617141552.GA297@monty> <20040708130110.GA15916@artcom8.artcom-gmbh.de>
Message-ID: <40ED6B9F.50607@wxs.nl>

Martin Schröder wrote:

>On 2004-06-17 21:15:52 +0700, The Thanh Han wrote:
>  
>
>>On Thu, Jun 17, 2004 at 12:16:27AM +0200, Hartmut Henkel wrote:
>>    
>>
>>>P.S. The newest libtiff comes with a tiff2pdf program. Quite handy.
>>>      
>>>
>>ha, good that we dropped tiff support. If there is a reasonable png2pdf
>>program, should we drop PNG support as well?
>>    
>>
>
>Well, there is png2pdf: http://png2pdf.sourceforge.net/
>
>We should keep png; it works quite well compared to the tiff
>support when I removed it. And we need some losless image
>support. :-)
>  
>
indeed; also, tiff was always experimental; also, we cannot permit such downward compatibility losses

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From hartmut_henkel@gmx.de  Fri Jul  9 00:53:10 2004
From: hartmut_henkel@gmx.de (Hartmut Henkel)
Date: Fri, 9 Jul 2004 01:53:10 +0200 (CEST)
Subject: [NTG-pdftex] open problems with 1.20a
In-Reply-To: <20040708124413.GR8095@artcom8.artcom-gmbh.de>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de>
 <20040708124413.GR8095@artcom8.artcom-gmbh.de>
Message-ID: <Pine.LNX.4.60.0407090135340.1864@hahepc1.hahe>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.

---1463811840-748318880-1089330790=:1864
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE

On Thu, 8 Jul 2004, Martin Schr=F6der wrote:

> Could someone (Hartmut?) please elaborate a bit on these items:
> ------------------
> - support embedding base fonts.
> - fixed a few problems with handling fonts in included pdf.
> - support for auto font expansion -- expanded TFM's are not
>   required
> - support for base font inclusion as suggested by Hartmut
> ------------------

well, vaguely...

- support for standard font embedding

The 14 Type 1 "standard fonts" (Times, Helvetica...) are now more or
less handled like any other Type 1 font. The embedding of these standard
fonts is not any more blocked, if their true FontName is given as the
2nd field in a pdftex.map line. If a FontName out of the standard fonts
is listed there, but the corresponding font file can't be found, a
warning will be issued, and an unembedded version of the standard font
will be used. It's then up to the PDF viewer application to display the
text by its own standard font version.

If a font with FontName _not_ belonging to the "standard fonts" is given
in pdftex.map, and the corresponding font file can't be found, a warning
will be issued, and the font will be replaced by some default font
(which will normally be visually distracting).

Checks of fontfile existence will be done at the time when the font is
required.

- support embedded standard fonts in included PDF files

When a PDF file with embedded fonts is to be included, its FontName
entries will be matched against the FontName fields (2nd field) in the
pdftex.map file. If a match is found, the embedded font will be replaced
by a font managed by pdftex. This normally reduces the PDF file size,
when several included PDF files contain glyphs from the same font. The
font replacement works now also for Type 1 standard fonts embedded into
the included PDF files. If the pdftex.map file contains more than one
line with the same matching FontName field, the best suited replacement
font will be selected, using hierarchical criteria of whether a font is
already in use (best case), or whether the TFM file is existing or not.

Unembedded fonts coming with included PDF files are generally left
untouched.

- fixed a few problems with handling fonts in included pdf.

?

- support for auto font expansion -- expanded TFM's are not required

?

Needs some example runs to see how it now works. Also what's now with
these obsolete expanded font files like font+15.tfm or MM instances like
font-30.pfb: Do they hurt? Can they still be used? All this is cleaned
up, or?

Regards, Hartmut
---1463811840-748318880-1089330790=:1864--

From ms@artcom-gmbh.de  Fri Jul  9 17:43:57 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Fri, 9 Jul 2004 18:43:57 +0200
Subject: [NTG-pdftex] open problems with 1.20a
In-Reply-To: <Pine.LNX.4.60.0407090135340.1864@hahepc1.hahe>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de> <20040708124413.GR8095@artcom8.artcom-gmbh.de> <Pine.LNX.4.60.0407090135340.1864@hahepc1.hahe>
Message-ID: <20040709164357.GG15916@artcom8.artcom-gmbh.de>

On 2004-07-09 01:53:10 +0200, Hartmut Henkel wrote:
> On Thu, 8 Jul 2004, Martin Schröder wrote:
> 
> > Could someone (Hartmut?) please elaborate a bit on these items:
> > ------------------
> > - support embedding base fonts.
> > - fixed a few problems with handling fonts in included pdf.
> > - support for auto font expansion -- expanded TFM's are not
> >   required
> > - support for base font inclusion as suggested by Hartmut
> > ------------------
> 
> well, vaguely...

Have a look at the new NEWS in p4. It's a bit long. :-{

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From hartmut_henkel@gmx.de  Fri Jul  9 22:08:44 2004
From: hartmut_henkel@gmx.de (Hartmut Henkel)
Date: Fri, 9 Jul 2004 23:08:44 +0200 (CEST)
Subject: [NTG-pdftex] open problems with 1.20a
In-Reply-To: <20040709164357.GG15916@artcom8.artcom-gmbh.de>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de>
 <20040708124413.GR8095@artcom8.artcom-gmbh.de> <Pine.LNX.4.60.0407090135340.1864@hahepc1.hahe>
 <20040709164357.GG15916@artcom8.artcom-gmbh.de>
Message-ID: <Pine.LNX.4.60.0407092307310.1306@hahepc1.hahe>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.

---1463811840-389876418-1089407324=:1306
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE

On Fri, 9 Jul 2004, Martin Schr=F6der wrote:

> Have a look at the new NEWS in p4. It's a bit long. :-{

just increase \pdfcompresslevel :-)

Regards, Hartmut
---1463811840-389876418-1089407324=:1306--

From hartmut_henkel@gmx.de  Sun Jul 11 00:45:20 2004
From: hartmut_henkel@gmx.de (Hartmut Henkel)
Date: Sun, 11 Jul 2004 01:45:20 +0200 (CEST)
Subject: [NTG-pdftex] pdftex -output-comment=STRING
Message-ID: <Pine.LNX.4.60.0407110138370.7060@hahepc1.hahe>

pdftex --help gives

-output-comment=STRING  use STRING for PDF file comment instead of date

but the manpage says that "In DVI mode, use string for the DVI file
comment instead of the date. This option is ignored in PDF mode."

And i couldn't find any trace of STRING in the PDF file, but it's in the
DVI file. So it seems this would be more correct:

-output-comment=STRING  use STRING for DVI file comment instead of date

Regards, Hartmut

From kakuto@fsci.fuk.kindai.ac.jp  Sun Jul 11 01:21:18 2004
From: kakuto@fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Sun, 11 Jul 2004 09:21:18 +0900
Subject: [NTG-pdftex] pdftex -output-comment=STRING
In-Reply-To: Your message of "Sun, 11 Jul 2004 01:45:20 +0200 (CEST)"
References: <Pine.LNX.4.60.0407110138370.7060@hahepc1.hahe>
Message-ID: <200407110021.i6B0LJlg000386@jupiter.fsci.fuk.kindai.ac.jp>

> pdftex --help gives
> 
> -output-comment=STRING  use STRING for PDF file comment instead of date
> 
> but the manpage says that "In DVI mode, use string for the DVI file
> comment instead of the date. This option is ignored in PDF mode."
> 
> And i couldn't find any trace of STRING in the PDF file, but it's in the
> DVI file. So it seems this would be more correct:
> 
> -output-comment=STRING  use STRING for DVI file comment instead of date

I send an example patch:

Best regards
Akira
------------------------------------------------


--- texmfmp-help.h.orig	Mon Jun 07 19:39:40 2004
+++ texmfmp-help.h	Sun May 09 12:53:26 2004
@@ -31,7 +31,7 @@
     "  most commonly `aleph'.",
     "",
     "  Alternatively, if the first non-option argument begins with a backslash,",
-    "  interpret all non-option arguments as a line of e-Omega input.",
+    "  interpret all non-option arguments as a line of Aleph input.",
     "",
     "  Alternatively, if the first non-option argument begins with a &, the",
     "  next word is taken as the FMT to read, overriding all else.  Any",
@@ -360,7 +360,9 @@
     "                          the bits of NUMBER",
     "[-no]-mktex=FMT         disable/enable mktexFMT generation (FMT=tex/tfm)",
     "-mltex                  enable MLTeX extensions such as \\charsubdef",
-    "-output-comment=STRING  use STRING for PDF file comment instead of date",
+    "-output-comment=STRING  use STRING for DVI file comment instead of date",
+    "                          in the case of DVI output (no effect for PDF)",
+    "-output-format=FORMAT   use FORMAT for job output; FORMAT is `dvi' or `pdf'", 
     "[-no]-parse-first-line  disable/enable parsing of the first line of the",
     "                          input file",
     "-progname=STRING        set program (and fmt) name to STRING",
@@ -416,7 +418,9 @@
     "                          the bits of NUMBER",
     "[-no]-mktex=FMT         disable/enable mktexFMT generation (FMT=tex/tfm)",
     "-mltex                  enable MLTeX extensions such as \\charsubdef",
-    "-output-comment=STRING  use STRING for PDF file comment instead of date",
+    "-output-comment=STRING  use STRING for DVI file comment instead of date",
+    "                          in the case of DVI output (no effect for PDF)",
+    "-output-format=FORMAT   use FORMAT for job output; FORMAT is `dvi' or `pdf'", 
     "[-no]-parse-first-line  disable/enable parsing of the first line of the",
     "                          input file",
     "-progname=STRING        set program (and fmt) name to STRING",
@@ -443,10 +447,10 @@
     "  Any remaining COMMANDS are processed as pdfxTeX input, after TEXNAME is read.",
     "  If the first line of TEXNAME is %&FMT, and FMT is an existing .fmt file,",
     "  use it.  Else use `NAME.fmt', where NAME is the program invocation name,",
-    "  most commonly `pdfetex'.",
+    "  most commonly `pdfxtex'.",
     "",
     "  Alternatively, if the first non-option argument begins with a backslash,",
-    "  interpret all non-option arguments as a line of pdfeTeX input.",
+    "  interpret all non-option arguments as a line of pdfxTeX input.",
     "",
     "  Alternatively, if the first non-option argument begins with a &, the",
     "  next word is taken as the FMT to read, overriding all else.  Any",
@@ -472,7 +476,9 @@
     "                          the bits of NUMBER",
     "[-no]-mktex=FMT         disable/enable mktexFMT generation (FMT=tex/tfm)",
     "-mltex                  enable MLTeX extensions such as \\charsubdef",
-    "-output-comment=STRING  use STRING for PDF file comment instead of date",
+    "-output-comment=STRING  use STRING for DVI file comment instead of date",
+    "                          in the case of DVI output (no effect for PDF)",
+    "-output-format=FORMAT   use FORMAT for job output; FORMAT is `dvi' or `pdf'", 
     "[-no]-parse-first-line  disable/enable parsing of the first line of the",
     "                          input file",
     "-progname=STRING        set program (and fmt) name to STRING",

From karl@freefriends.org  Sat Jul  3 16:45:31 2004
From: karl@freefriends.org (Karl Berry)
Date: Sat, 3 Jul 2004 11:45:31 -0400
Subject: [NTG-pdftex] \escapes and /Limits
Message-ID: <200407031545.i63FjVG16519@f7.net>

I posted a complex bug report to pdftex@tug.org.  Hartmut posted a
change to tex.ch2 which partially fixes it, and suggested we move
discussion to this list.  So ...

http://tug.org/pipermail/pdftex/2004-July/005138.html
http://tug.org/pipermail/pdftex/2004-July/005139.html
http://tug.org/pipermail/pdftex/2004-July/005140.html


Thanks,
karl

From ms@artcom-gmbh.de  Sun Jul 11 18:35:00 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Sun, 11 Jul 2004 19:35:00 +0200
Subject: [NTG-pdftex] Re: backslashes in \pdfoutline
In-Reply-To: <200407110039.i6B0d6A28206@f7.net>
References: <200407110039.i6B0d6A28206@f7.net>
Message-ID: <20040711173500.GA21828@lucien.kn-bremen.de>

On 2004-07-10 20:39:06 -0400, Karl Berry wrote:
> Hi Martin,
> 
> As you may have noticed, I reported an issue on the pdftex lists a few
> days ago regarding catcode 12 backslashes in \pdfoutline et al.
> Although Hartmut and Heiko and I have discussed it some, and Hartmut has
> written some patches, I haven't seen any definitive decisions on what we
> want to do, and I want to fix texinfo.tex accordingly.
> 
> (It comes up in practice with Texinfo because in Texinfo, unlike most
> (all?) other common formats, backslash is supposed to be a "normal"
> character that can be used in cross-reference targets.)
> 
> In short, suppose we have:
> 
>   \catcode`\/=0 /catcode`\\=12
>   /pdfcompresslevel=0
>   /pdfdest name {xyz\} hello from xyz /vfill/eject
>   /pdfoutline goto name{xyz\}{to xyz\}
> 
> This produces an invalid PDF file, because the \ escapes the
> end-of-string ) delimiter in the output:
> 
>   << /S /GoTo /D (xyz\) >>
>   ...
>   (to xyz\)
> 
> The choices seem to be:
> 
> 1) do nothing, and leave it up to the document's TeX code to double the
>    backslashes in all cases.  This is the current situation, de facto.
> 
> 2) have pdftex escape the backslashes in the target names only, so that
>    it would produce (xyz\\) and (to xyz\).
> 
> 3) have pdftex escape the backslashes in the outline text only, so that
>    it would produce (xyz\) and (to xyz\\).
> 
> 4) have pdftex escape the backslashes in all situations, so that
>    it would produce (xyz\\) and (to xyz\\).

Karl,
4 would be the logical choice for pdf.

> Escaping the backslashes implies that TeX code cannot produce PDF string
> escapes.  This does not seem like a serious limitation to me, since TeX
> can write any byte value (and pdftex "should" escape as necessary into
> \nnn octal notation in string constants -- I have not tested this).

I will.

> Not escaping the backslashes implies that it's possible to write TeX
> documents which produce invalid PDF.  This seems bad, however, if this
> is the case with other pdftex commands also, the argument loses its force.

We'll have to check this for consistency.

Best regards
    Martin

PS: I'm cc'ing the ntg-pdftex list so that Hans and Thanh and
    others are included.
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From ms@artcom-gmbh.de  Mon Jul 12 11:22:02 2004
From: ms@artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Mon, 12 Jul 2004 12:22:02 +0200
Subject: [NTG-pdftex] pdftex -output-comment=STRING
In-Reply-To: <200407110021.i6B0LJlg000386@jupiter.fsci.fuk.kindai.ac.jp>
References: <Pine.LNX.4.60.0407110138370.7060@hahepc1.hahe> <200407110021.i6B0LJlg000386@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <20040712102202.GJ15916@artcom8.artcom-gmbh.de>

On 2004-07-11 09:21:18 +0900, Akira Kakuto wrote:
> I send an example patch:

Thanks. It's in (#5494).

Best regards
        Martin
-- 
               Martin Schröder, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From taco at elvenkind.com  Tue Jul 13 10:41:08 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue Jul 13 10:41:10 2004
Subject: [NTG-pdftex] \tagcode patch
Message-ID: <20040713104108.79a98461@glenlivet.elvenkind.com>


Hi all,

I have created a small patch file that I expect some of us will consider
useful: It allows the querying and removal of ligature/kerning/charlist 
information from within the TeX macro language.
See: 

	http://www.metatex.org/web/tagcode.html

for more information

-- 
groeten,

Taco
From noreply at sarovar.org  Tue Jul 13 10:58:59 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Tue Jul 13 11:00:51 2004
Subject: [NTG-pdftex] [ pdftex-Patches-91 ] \tagcode patch
Message-ID: <E1BkJ7r-0001bw-00@sarovar.org>

Patches item #91, was opened at 2004-07-13 10:58
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=91&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 3
Submitted By: Martin Schr?der (oneiros)
Assigned to: The Thanh Han (hanthethanh)
Summary: \tagcode patch

Initial Comment:
Patch from Taco Hoekwater for an extra primitive named
\tagcode, allowing read and write access to a
character's char_tag info. The associated internal
command is assign_font_int, with the new modifier value
tag_code.

More info at http://www.metatex.org/web/tagcode.html

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=91&group_id=106
From hartmut_henkel at gmx.de  Wed Jul 14 00:18:20 2004
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed Jul 14 00:18:24 2004
Subject: [NTG-pdftex] pdftex: unrecognized option `-output-format=pdf'
Message-ID: <Pine.LNX.4.60.0407140012230.11874@hahepc1.hahe>

Option -output-format is part of the -help menu, but it seems not to
work in rc4/teTeX 2.96.5 (error before even the substring "dvi" or "pdf"
is checked); it's at least missing from the getopt option list.

Should it be pulled in or thrown out?

Regards, Hartmut
From hartmut_henkel at gmx.de  Wed Jul 14 00:53:25 2004
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed Jul 14 00:53:26 2004
Subject: [NTG-pdftex] Re: pdftex: unrecognized option `-output-format=pdf'
In-Reply-To: <Pine.LNX.4.60.0407140012230.11874@hahepc1.hahe>
References: <Pine.LNX.4.60.0407140012230.11874@hahepc1.hahe>
Message-ID: <Pine.LNX.4.60.0407140049380.16656@hahepc1.hahe>

in texmfmp.c, just add the three marked lines:

#endif /* MP */
+ #if defined(pdfTeX) || defined(pdfeTeX) || defined(pdfxTeX)
+       { "output-format",             1, 0, 0 },
+ #endif /* pdfTeX or pdfeTeX or pdfxTeX */
      { 0, 0, 0, 0 } };

It overruns the initex setting, but it can be overrun by \pdfoutput (not
the other way around, as it may be practical for such an option?).

Regards, Hartmut
From kakuto at fsci.fuk.kindai.ac.jp  Wed Jul 14 03:39:45 2004
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Wed Jul 14 03:40:19 2004
Subject: [NTG-pdftex] Re: pdftex: unrecognized option `-output-format=pdf'
In-Reply-To: Your message of "Wed, 14 Jul 2004 00:53:25 +0200 (CEST)"
References: <Pine.LNX.4.60.0407140049380.16656@hahepc1.hahe>
Message-ID: <200407140139.i6E1djBA017157@jupiter.fsci.fuk.kindai.ac.jp>

> in texmfmp.c, just add the three marked lines:
> 
> #endif /* MP */
> + #if defined(pdfTeX) || defined(pdfeTeX) || defined(pdfxTeX)
> +       { "output-format",             1, 0, 0 },
> + #endif /* pdfTeX or pdfeTeX or pdfxTeX */
>       { 0, 0, 0, 0 } };
> 
> It overruns the initex setting, but it can be overrun by \pdfoutput (not
> the other way around, as it may be practical for such an option?).

I'm sorry I did not notice that --output-format was
thrown out of getopt option list.
I think the option is useful in some cases.
I hope that the above three lines are revived.

Best regards
Akira
From taco at elvenkind.com  Wed Jul 14 09:51:11 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed Jul 14 09:51:14 2004
Subject: [NTG-pdftex] MetaTeX project pre-announcement
Message-ID: <20040714095111.6f1bb4d4@glenlivet.elvenkind.com>


Hi everybody,

I am happy to announce the birth of a new project called MetaTeX.

The goal of the MetaTeX project is to create a GPL-ed TeX/MetaPost distribution 
for POSIX compliant systems, in which the amount of distributed files is minimized 
while the speed of the TeX 'make' process maximized.

This will be done by joining all of the needed functionality into a single 
executable, and putting all of the texmf input files into a single archive file, 
eventually  resulting in a distribution that (in binary state) will comprise only three 
actual files: 

	an executable, a data archive, and an options file.

As a side-effect, standalone packages of C library-versions of pdfetex, mpost 
and tex{exec,make} will be created.


I am posting this pre- announcement in the hope that people who are interested 
in this distribution  (and, possibly, even want to help) will join our mailing-list. 
See the website for more information on the project, and how to subscribe. 
	
	http://www.metatex.org

Please do not reply to this message in the group you found it in, since any reply 
you give will likely be considered off-topic, but feel free to forward this message 
to people you believe may be interested.


Greetings and happy TeX-ing, 

Taco Hoekwater
From taco at elvenkind.com  Wed Jul 14 10:04:25 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed Jul 14 10:15:15 2004
Subject: [NTG-pdftex] [tex-implementors] MetaTeX project pre-announcement
Message-ID: <200407140804.i6E84fj0011396@relay.felk.cvut.cz>


Hi everybody,

I am happy to announce the birth of a new project called MetaTeX.

The goal of the MetaTeX project is to create a GPL-ed TeX/MetaPost distribution
for POSIX compliant systems, in which the amount of distributed files is minimized
while the speed of the TeX 'make' process maximized.

This will be done by joining all of the needed functionality into a single
executable, and putting all of the texmf input files into a single archive file,
eventually  resulting in a distribution that (in binary state) will comprise only three
actual files:

	an executable, a data archive, and an options file.

As a side-effect, standalone packages of C library-versions of pdfetex, mpost
and tex{exec,make} will be created.


I am posting this pre- announcement in the hope that people who are interested
in this distribution  (and, possibly, even want to help) will join our mailing-list.
See the website for more information on the project, and how to subscribe.

	http://www.metatex.org

Please do not reply to this message in the group you found it in, since any reply
you give will likely be considered off-topic, but feel free to forward this message
to people you believe may be interested.


Greetings and happy TeX-ing,

Taco Hoekwater

_______________________________________________
tex-implementors mailing list
postmaster@tug.org
http://tug.org/mailman/listinfo/tex-implementors
From pragma at wxs.nl  Wed Jul 14 11:44:35 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Wed Jul 14 11:44:39 2004
Subject: [NTG-pdftex] Re: backslashes in \pdfoutline
In-Reply-To: <200407132113.i6DLDpV10334@f7.net>
References: <200407132113.i6DLDpV10334@f7.net>
Message-ID: <40F50083.9060300@wxs.nl>

Karl Berry wrote:

>    pdftex pipes destinations names through unchanged
>
>Yes, and many other things as well (having just read through the new
>pdftex manual, as Hartmut knows :).  Trying to escape all of them seems
>more problematic to me now.  There are probably more important things
>for pdftex development to work on.
>
>    detecting forbidden things: unbalanced unescaped braces and a lonely
>    backslash at the string end.
>  
>
    it is dangerous to start adding such features esp since i do some 
cleanup already

far better is to have two primitives

\escapedpdf{....}
\escapedps{....}

\pdfsomething{...... \escapedpdf{....} ...}

Hans

From ms at artcom-gmbh.de  Wed Jul 14 16:11:05 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed Jul 14 16:13:09 2004
Subject: [NTG-pdftex] Re: backslashes in \pdfoutline
In-Reply-To: <200407141401.i6EE13u22677@f7.net>
References: <20040713230640.GA2858@irwin.vpn.uni-freiburg.de>
	<200407141401.i6EE13u22677@f7.net>
Message-ID: <20040714141105.GE1221@artcom8.artcom-gmbh.de>

On 2004-07-14 10:01:03 -0400, Karl Berry wrote:
> I've come to believe that the status should remain quo, and all that's
> desirable is to add the warning and fix the sorting.  Spending time
> implementing autoescape for the benefit of some hypothetical future
> macro packages seems like a very low priority feature.

Agreed. And even the warning and sorting won't go in 1.20a.

Best regards
        Martin

PS: Please let's keep ntg-pdftex at least in the cc.
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From pragma at wxs.nl  Wed Jul 14 19:59:07 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Wed Jul 14 19:59:11 2004
Subject: [NTG-pdftex] image inclusion 
Message-ID: <40F5746B.4020808@wxs.nl>

Hi Martin,

Is there a difference in behavior when with inclusion a boxtype is 
specified (like not being resused and such?)

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From ms at artcom-gmbh.de  Wed Jul 14 23:32:41 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Jul 15 01:02:32 2004
Subject: [NTG-pdftex] image inclusion
In-Reply-To: <40F5746B.4020808@wxs.nl>
References: <40F5746B.4020808@wxs.nl>
Message-ID: <20040714213241.GD20888@lucien.kn-bremen.de>

On 2004-07-14 19:59:07 +0200, Hans Hagen wrote:
> Is there a difference in behavior when with inclusion a boxtype is 
> specified (like not being resused and such?)

AFAIK the reuse is done at macro level (at least pdftex.def does
it there) and pdftex.def reuses only inclusions with the same
boxtype.

Best regards
    Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From pragma at wxs.nl  Thu Jul 15 09:08:48 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Jul 15 09:08:57 2004
Subject: [NTG-pdftex] Re: backslashes in \pdfoutline
In-Reply-To: <20040714200830.GA4812@m0A02325D.vpn.uni-freiburg.de>
References: <20040713230640.GA2858@irwin.vpn.uni-freiburg.de>
	<200407141401.i6EE13u22677@f7.net>
	<20040714142027.GA3449@m0A02325D.vpn.uni-freiburg.de>
	<40F54D58.8030404@wxs.nl>
	<20040714191402.GA4367@m0A02325D.vpn.uni-freiburg.de>
	<Pine.LNX.4.60.0407142148390.7636@hahepc1.hahe>
	<20040714200830.GA4812@m0A02325D.vpn.uni-freiburg.de>
Message-ID: <40F62D80.6070709@wxs.nl>

Heiko Oberdiek wrote:

>I think a clear no:
>
>  
>
it can be done by 'parsing strings' which is painful

>If my understanding of Hans's idea is correct then
>\escapedpdf can be used the following way, eg.
>
>  \def\foo{bar}
>  \pdfinfo{/Title (\escapedpdf{\foo})}
>  
>
indeed

>a) \escapedpdf has to be expandable.
>b) The argument is full expanded.
>The return value can be a string in the manner of \meaning
>(characters with catcode 12 and spaces with catcode 10).
>  
>
indeed

>b) can be achieved by \edef, but \edef cannot be used
>because of a).
>
>Even if we have a full expanded string, how to parse
>it in a safe way? Catcodes? Espacially spaces are
>problematic:
>  
>
indeed

>* \scantokens from e-TeX is AFAIK expandable, but
>  the catcode changes before are not.
>  
>
right, it's also slow to prepare settings (definitions, catcodes etc)

actually, it would be handy to have catcode vectors so that we could 
quickly swap 'm

>* For the \@sanitize@onelevel or \meaning method a
>  macro definition is necessary, violation of a).
>* \futurelet is not expandable.
>* Scan methods such as \scan#1(... are problematic and fail,
>  if there are spaces in the string.
>  
>
indeed, and 

  * why should we complicate live when it can be programmed (i already wasted too many days on such painful things) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Thu Jul 15 09:25:00 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Jul 15 09:25:11 2004
Subject: [NTG-pdftex] image inclusion
In-Reply-To: <20040714213241.GD20888@lucien.kn-bremen.de>
References: <40F5746B.4020808@wxs.nl>
	<20040714213241.GD20888@lucien.kn-bremen.de>
Message-ID: <40F6314C.40406@wxs.nl>

Martin Schr?der wrote:

>On 2004-07-14 19:59:07 +0200, Hans Hagen wrote:
>  
>
>>Is there a difference in behavior when with inclusion a boxtype is 
>>specified (like not being resused and such?)
>>    
>>
>
>AFAIK the reuse is done at macro level (at least pdftex.def does
>it there) and pdftex.def reuses only inclusions with the same
>boxtype.
>  
>
i got the impression that there is a difference between 

\pdfximage artbox additional specs {name} 

\pdfximage additional specs artbox {name} 

also, what is the fallback sequence when there is no artbox? 

Hans 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Thu Jul 15 11:29:35 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu Jul 15 11:29:38 2004
Subject: [NTG-pdftex] \quitvmode patch
Message-ID: <20040715112935.2231395a@glenlivet.elvenkind.com>


Here is another very simple patch.

The change file adds a new primitive called \quitvmode. In vertical modes, 
it is identical to \indent, but in horizontal and math modes it is \noindent.
See: 

	http://www.metatex.org/web/quitvmode.html

for more information.

groeten,

Taco
From pragma at wxs.nl  Thu Jul 15 12:07:25 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Jul 15 12:07:33 2004
Subject: [NTG-pdftex] \quitvmode patch
In-Reply-To: <20040715112935.2231395a@glenlivet.elvenkind.com>
References: <20040715112935.2231395a@glenlivet.elvenkind.com>
Message-ID: <40F6575D.5080505@wxs.nl>

Taco Hoekwater wrote:

>Here is another very simple patch.
>
>The change file adds a new primitive called \quitvmode. In vertical modes, 
>it is identical to \indent, but in horizontal and math modes it is \noindent.
>See: 
>
>	http://www.metatex.org/web/quitvmode.html
>
>for more information.
>  
>
(fyi: i asked taco for this primitive - in context i have a work around but that's a kludge- because it prevents much unwanted side effects for instance the famous 'something boxed that starts a paragraph and ends up on a line of its own') 

Hans  

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From noreply at sarovar.org  Thu Jul 15 12:12:08 2004
From: noreply at sarovar.org (noreply@sarovar.org)
Date: Thu Jul 15 12:13:47 2004
Subject: [NTG-pdftex] [ pdftex-Patches-93 ] \quitvmode
Message-ID: <E1Bl3Dk-0007TA-00@sarovar.org>

Patches item #93, was opened at 2004-07-15 12:12
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=93&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin Schr?der (oneiros)
Assigned to: The Thanh Han (hanthethanh)
Summary: \quitvmode

Initial Comment:
The change file adds a new primitive called \quitvmode.
In vertical modes, it is identical to \indent, but in
horizontal and math modes it is \noindent.

See http://www.metatex.org/web/quitvmode.html

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=93&group_id=106
From ms at artcom-gmbh.de  Thu Jul 15 12:15:08 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Jul 15 12:16:40 2004
Subject: [NTG-pdftex] \quitvmode patch
In-Reply-To: <20040715112935.2231395a@glenlivet.elvenkind.com>
References: <20040715112935.2231395a@glenlivet.elvenkind.com>
Message-ID: <20040715101508.GL1221@artcom8.artcom-gmbh.de>

On 2004-07-15 11:29:35 +0200, Taco Hoekwater wrote:
> The change file adds a new primitive called \quitvmode. In vertical modes, 
> it is identical to \indent, but in horizontal and math modes it is \noindent.

Thanks.

Taco, it would be nice if you would submit these via Sarovar.

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From oberdiek at uni-freiburg.de  Thu Jul 15 12:21:57 2004
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Thu Jul 15 12:22:05 2004
Subject: [NTG-pdftex] \quitvmode patch
In-Reply-To: <20040715112935.2231395a@glenlivet.elvenkind.com>
References: <20040715112935.2231395a@glenlivet.elvenkind.com>
Message-ID: <20040715102157.GA2844@m0A02325D.vpn.uni-freiburg.de>

On Thu, Jul 15, 2004 at 11:29:35AM +0200, Taco Hoekwater wrote:

> The change file adds a new primitive called \quitvmode. In vertical modes, 
> it is identical to \indent, but in horizontal and math modes it is \noindent.

What's the difference to \leavevmode?

Yours sincerely
  Heiko <oberdiek@uni-freiburg.de>
-- 
From taco at elvenkind.com  Thu Jul 15 13:39:59 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu Jul 15 13:36:52 2004
Subject: [NTG-pdftex] \quitvmode patch
In-Reply-To: <20040715102157.GA2844@m0A02325D.vpn.uni-freiburg.de>
References: <20040715112935.2231395a@glenlivet.elvenkind.com>
	<20040715102157.GA2844@m0A02325D.vpn.uni-freiburg.de>
Message-ID: <20040715133959.33966e46.taco@elvenkind.com>

On Thu, 15 Jul 2004 12:21:57 +0200
Heiko Oberdiek <oberdiek@uni-freiburg.de> wrote:

> On Thu, Jul 15, 2004 at 11:29:35AM +0200, Taco Hoekwater wrote:
> 
> > The change file adds a new primitive called \quitvmode. In vertical modes, 
> > it is identical to \indent, but in horizontal and math modes it is \noindent.
> 
> What's the difference to \leavevmode?

If there would be deep binding of macro meanings and when running in a 
context-free environment (and if you ignore efficiency considerations),
there would not be any real difference between the new primitive and
a macro doing precisely what \leavevmode does.

But you cannot have a 'context-free' environment in current TeX, and,
if I understand correctly, this is where Hans' problems stem from. I'm
sure he has examples.

Asides, it is also a lot more efficient: \leavevmode is a macro that 
expands into two tokens (\unhbox\voidb@x). Therefore, the command sequence
when starting out in vertical mode is:
 
* read \leavevmode
* exec expand()
  - read \unvbox
  - unread \unvbox
  - exec new_graf()
  - reread \unvbox, now in hmode
  - exec unpackage()
    * exec scan_register_num()
      - read \voidb@x

The new sequence is:

* read \quitvmode
* exec new_graf()

(removing a number of subroutine calls and two input_stack entries)
From pragma at wxs.nl  Thu Jul 15 14:11:56 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Jul 15 14:12:01 2004
Subject: [NTG-pdftex] \quitvmode patch
In-Reply-To: <20040715102157.GA2844@m0A02325D.vpn.uni-freiburg.de>
References: <20040715112935.2231395a@glenlivet.elvenkind.com>
	<20040715102157.GA2844@m0A02325D.vpn.uni-freiburg.de>
Message-ID: <40F6748C.6070103@wxs.nl>

Heiko Oberdiek wrote:

>On Thu, Jul 15, 2004 at 11:29:35AM +0200, Taco Hoekwater wrote:
>
>  
>
>>The change file adds a new primitive called \quitvmode. In vertical modes, 
>>it is identical to \indent, but in horizontal and math modes it is \noindent.
>>    
>>
>
>What's the difference to \leavevmode?
>  
>
leavevmode is rather useless since it interferes with vertical spacing (which is one reason why so many tex docs look bad) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Thu Jul 15 14:13:11 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Jul 15 14:15:21 2004
Subject: [NTG-pdftex] \quitvmode patch
In-Reply-To: <20040715133959.33966e46.taco@elvenkind.com>
References: <20040715112935.2231395a@glenlivet.elvenkind.com>
	<20040715102157.GA2844@m0A02325D.vpn.uni-freiburg.de>
	<20040715133959.33966e46.taco@elvenkind.com>
Message-ID: <40F674D7.6020408@wxs.nl>

Taco Hoekwater wrote:

>Asides, it is also a lot more efficient: \leavevmode is a macro that 
>expands into two tokens (\unhbox\voidb@x). Therefore, the command sequence
>  
>
it's that unboxed void box that is the interfering pain in the *

Hans

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From hanthethanh at myrealbox.com  Fri Jul 16 07:35:24 2004
From: hanthethanh at myrealbox.com (The Thanh Han)
Date: Fri Jul 16 07:35:16 2004
Subject: [NTG-pdftex] pdftex-1.20a-rc6 is available
Message-ID: <20040716053524.GA2909@monty>

Hi,

pdftex-1.20a-rc6 is available (sources + djgpp binaries) at
pdftex.sarovar.org

this version fixed 2 problems with auto font expansion and margin
kerning. If no further problem is found, we expect to release pdftex-1.20a soon

Thanh
From ms at artcom-gmbh.de  Fri Jul 16 10:55:25 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Fri Jul 16 10:56:27 2004
Subject: [NTG-pdftex] pdftex-1.20a-rc6 is available
In-Reply-To: <20040716053524.GA2909@monty>
References: <20040716053524.GA2909@monty>
Message-ID: <20040716085524.GR1221@artcom8.artcom-gmbh.de>

On 2004-07-16 12:35:24 +0700, The Thanh Han wrote:
> pdftex-1.20a-rc6 is available (sources + djgpp binaries) at
> pdftex.sarovar.org

Can you merge it with p4 or should I do it?

I would have preferred some communication before the release.

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From pragma at wxs.nl  Fri Jul 16 11:19:34 2004
From: pragma at wxs.nl (Hans Hagen Outside)
Date: Fri Jul 16 11:19:48 2004
Subject: [NTG-pdftex] pdftex-1.20a-rc6 is available
In-Reply-To: <20040716085524.GR1221@artcom8.artcom-gmbh.de>
References: <20040716053524.GA2909@monty>
	<20040716085524.GR1221@artcom8.artcom-gmbh.de>
Message-ID: <40F79DA6.2000106@wxs.nl>

Martin Schr?der wrote:

>On 2004-07-16 12:35:24 +0700, The Thanh Han wrote:
>  
>
>>pdftex-1.20a-rc6 is available (sources + djgpp binaries) at
>>pdftex.sarovar.org
>>    
>>
>
>Can you merge it with p4 or should I do it?
>
>I would have preferred some communication before the release.
>  
>
don't be to hard on thanh -) 

he needed that version before he went off to the sf conference; merging things with the official release is up to you (we discussed that); so, indeed, you can merge things (as well as taco's patches); 

keep in mind that thanhs private sarovar place is not the official one, but an experimental corner;

can you organize something on sarovar: 

.../pdftex/previous     (say the last tex live) 
.../pdftex/current      (the official release) 
.../pdftex/latest       (the latest release, maybe with some experimental code) 
.../pdftex/experimental (thanhs place to put things) 


Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From ms at artcom-gmbh.de  Fri Jul 16 11:47:45 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Fri Jul 16 11:48:28 2004
Subject: [NTG-pdftex] pdftex-1.20a-rc6 is available
In-Reply-To: <40F79DA6.2000106@wxs.nl>
References: <20040716053524.GA2909@monty>
	<20040716085524.GR1221@artcom8.artcom-gmbh.de>
	<40F79DA6.2000106@wxs.nl>
Message-ID: <20040716094745.GT1221@artcom8.artcom-gmbh.de>

On 2004-07-16 11:19:34 +0200, Hans Hagen wrote:
> he needed that version before he went off to the sf conference; merging 
> things with the official release is up to you (we discussed that); so, 
> indeed, you can merge things (as well as taco's patches); 

I'll merge the ones from Thanh. It seems his code has lagged
behind p4 in many ways. :-{

> can you organize something on sarovar: 
> 
> .../pdftex/previous     (say the last tex live) 
> .../pdftex/current      (the official release) 
> .../pdftex/latest       (the latest release, maybe with some experimental 
> code) .../pdftex/experimental (thanhs place to put things) 

Will do after the release.

Hafe fun in SF
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From pragma at wxs.nl  Fri Jul 16 11:38:48 2004
From: pragma at wxs.nl (Hans Hagen Outside)
Date: Fri Jul 16 12:08:29 2004
Subject: [NTG-pdftex] x versus e 
Message-ID: <40F7A228.1010906@wxs.nl>

Thanh,

The vadjust pre code should be available pdfetex as well, i depend on it 
! (ok, we need to fix a border case, but nevertheless, some of my docs 
produce non optimal output when it's not supported)

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From hanthethanh at myrealbox.com  Fri Jul 16 12:49:34 2004
From: hanthethanh at myrealbox.com (The Thanh Han)
Date: Fri Jul 16 16:48:44 2004
Subject: [NTG-pdftex] pdftex-1.20a-rc6 is available
In-Reply-To: <40F79DA6.2000106@wxs.nl>
References: <20040716053524.GA2909@monty>
	<20040716085524.GR1221@artcom8.artcom-gmbh.de>
	<40F79DA6.2000106@wxs.nl>
Message-ID: <20040716104934.GB4392@monty>

On Fri, Jul 16, 2004 at 11:19:34AM +0200, Hans Hagen wrote:
> Martin Schr?der wrote:
> 
> >On 2004-07-16 12:35:24 +0700, The Thanh Han wrote:
> > 
> >
> >>pdftex-1.20a-rc6 is available (sources + djgpp binaries) at
> >>pdftex.sarovar.org
> >>   
> >>
> >
> >Can you merge it with p4 or should I do it?
> >
> >I would have preferred some communication before the release.
> > 
> >
> don't be to hard on thanh -) 
> 
> he needed that version before he went off to the sf conference; merging 
> things with the official release is up to you (we discussed that); so, 
> indeed, you can merge things (as well as taco's patches); 
> keep in mind that thanhs private sarovar place is not the official one, but 
> an experimental corner;

Hans said everything I would; indeed I didn't submit it to p4 because I
want people to test it first, so I don't repeat the previous mistake :)

pdftex.sarovar.org is the pdftex testing page -- I don't know how else
I should make my changes avail. to other :)

Thanh
From pragma at wxs.nl  Sun Jul 18 00:16:23 2004
From: pragma at wxs.nl (Hans Hagen Outside)
Date: Sun Jul 18 00:16:38 2004
Subject: [NTG-pdftex] Re: [pdftex] pdftex-1.20a-rc6 is available
In-Reply-To: <Pine.SGI.4.60.0407171529480.167376@montigo.bio.dfo.ca>
References: <20040716053524.GA2909@monty>
	<Pine.SGI.4.60.0407171529480.167376@montigo.bio.dfo.ca>
Message-ID: <40F9A537.5040002@wxs.nl>

George N. White III wrote:

> On Fri, 16 Jul 2004, The Thanh Han wrote:
>
>> Hi,
>>
>> pdftex-1.20a-rc6 is available (sources + djgpp binaries) at
>> pdftex.sarovar.org
>>
>> this version fixed 2 problems with auto font expansion and margin 
>> kerning. If no further problem is found, we expect to release 
>> pdftex-1.20a soon
>
>
> I just added pdftex-1.20a-rc6 to teTeX-2.96.6 on Irix 6.5.22m
> and Knoppix Linux 3.4 and in both cases latex ltxcheck fails:

there is still something wrong with combining hz and protruding used at the same time

Hans 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From ms at artcom-gmbh.de  Wed Jul 21 17:17:26 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed Jul 21 17:18:54 2004
Subject: [NTG-pdftex] 1.20a-rc7.1 (was: pdftex-1.20a-rc6 is available)
In-Reply-To: <20040716094745.GT1221@artcom8.artcom-gmbh.de>
References: <20040716053524.GA2909@monty>
	<20040716085524.GR1221@artcom8.artcom-gmbh.de>
	<40F79DA6.2000106@wxs.nl>
	<20040716094745.GT1221@artcom8.artcom-gmbh.de>
Message-ID: <20040721151726.GN29108@artcom8.artcom-gmbh.de>

On 2004-07-16 11:47:45 +0200, Martin Schr?der wrote:
> I'll merge the ones from Thanh. It seems his code has lagged
> behind p4 in many ways. :-{

I've merged his rc6 with our rc4 into rc7.1

Changes where in hz.ch, pdftex.ch and mapfile.c

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From ms at artcom-gmbh.de  Wed Jul 21 17:23:11 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed Jul 21 17:24:52 2004
Subject: [NTG-pdftex] Schedule 20040721
Message-ID: <20040721152310.GP29108@artcom8.artcom-gmbh.de>

We currently have a quite stable version (1.20a-rc7.1).

ToDo:
- move "vadjust pre" from xtex to etex -> rc7.2
- adopt the patches from peb for etex-pre2.2 -> rc7.3
- update the README for sarovar
- fix open problem with hz -> thanh

I'll be offline for two weeks starting monday (W31 and W32) and
out of office in W33. So I think we should delay the release till
W34.

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From ms at artcom-gmbh.de  Wed Jul 21 18:05:22 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed Jul 21 18:06:54 2004
Subject: [NTG-pdftex] x versus e
In-Reply-To: <40F7A228.1010906@wxs.nl>
References: <40F7A228.1010906@wxs.nl>
Message-ID: <20040721160522.GU29108@artcom8.artcom-gmbh.de>

On 2004-07-16 11:38:48 +0200, Hans Hagen wrote:
> The vadjust pre code should be available pdfetex as well, i depend on it 
> ! (ok, we need to fix a border case, but nevertheless, some of my docs 
> produce non optimal output when it's not supported)

Um, correct me if I'm wrong, but Thanh removed that in "0.12a"
(http://tug.org/mailman/htdig/pdftex/2004-February/004804.html)

Now you want it back?

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From pragma at wxs.nl  Wed Jul 21 19:01:19 2004
From: pragma at wxs.nl (Hans Hagen Outside)
Date: Wed Jul 21 19:01:31 2004
Subject: [NTG-pdftex] x versus e
In-Reply-To: <20040721160522.GU29108@artcom8.artcom-gmbh.de>
References: <40F7A228.1010906@wxs.nl>
	<20040721160522.GU29108@artcom8.artcom-gmbh.de>
Message-ID: <40FEA15F.9050608@wxs.nl>

Martin Schr?der wrote:

>On 2004-07-16 11:38:48 +0200, Hans Hagen wrote:
>  
>
>>The vadjust pre code should be available pdfetex as well, i depend on it 
>>! (ok, we need to fix a border case, but nevertheless, some of my docs 
>>produce non optimal output when it's not supported)
>>    
>>
>
>Um, correct me if I'm wrong, but Thanh removed that in "0.12a"
>(http://tug.org/mailman/htdig/pdftex/2004-February/004804.html)
>
>Now you want it back?
>  
>
yes, it should never have been removed 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From ms at artcom-gmbh.de  Thu Jul 22 16:03:29 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Jul 22 16:04:37 2004
Subject: [NTG-pdftex] vadjust pre (was: x versus e)
In-Reply-To: <40FEA15F.9050608@wxs.nl>
References: <40F7A228.1010906@wxs.nl>
	<20040721160522.GU29108@artcom8.artcom-gmbh.de>
	<40FEA15F.9050608@wxs.nl>
Message-ID: <20040722140329.GE7609@artcom8.artcom-gmbh.de>

On 2004-07-21 10:01:19 -0700, Hans Hagen wrote:
> yes, it should never have been removed 

Can I have a small test file for showing that vadjust pre works?

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From taco at elvenkind.com  Thu Jul 22 16:15:56 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu Jul 22 16:15:59 2004
Subject: [NTG-pdftex] vadjust pre (was: x versus e)
In-Reply-To: <20040722140329.GE7609@artcom8.artcom-gmbh.de>
References: <40F7A228.1010906@wxs.nl>
	<20040721160522.GU29108@artcom8.artcom-gmbh.de>
	<40FEA15F.9050608@wxs.nl>
	<20040722140329.GE7609@artcom8.artcom-gmbh.de>
Message-ID: <20040722161556.5f911f09@glenlivet.elvenkind.com>

On Thu, 22 Jul 2004 16:03:29 +0200, Martin wrote:

> On 2004-07-21 10:01:19 -0700, Hans Hagen wrote:
> > yes, it should never have been removed 
> 
> Can I have a small test file for showing that vadjust pre works?

That's a one-liner (plain tex):

  line 1\hfil\break line\vadjust pre {inserted} 2 \bye

"inserted" should appear between the lines, not below line 2.

-- 
groeten,

Taco
From ms at artcom-gmbh.de  Thu Jul 22 16:32:26 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Jul 22 16:33:37 2004
Subject: [NTG-pdftex] vadjust pre
In-Reply-To: <20040722161556.5f911f09@glenlivet.elvenkind.com>
References: <40F7A228.1010906@wxs.nl>
	<20040721160522.GU29108@artcom8.artcom-gmbh.de>
	<40FEA15F.9050608@wxs.nl>
	<20040722140329.GE7609@artcom8.artcom-gmbh.de>
	<20040722161556.5f911f09@glenlivet.elvenkind.com>
Message-ID: <20040722143226.GF7609@artcom8.artcom-gmbh.de>

On 2004-07-22 16:15:56 +0200, Taco Hoekwater wrote:
> "inserted" should appear between the lines, not below line 2.

Thanks. with rc7.2 (#5563) all pdf*tex binaries know about
vadjust pre.

We need something for NEWS about this.

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From ms at artcom-gmbh.de  Thu Jul 22 16:34:40 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Jul 22 16:35:37 2004
Subject: [NTG-pdftex] vadjust pre
In-Reply-To: <20040722143226.GF7609@artcom8.artcom-gmbh.de>
References: <40F7A228.1010906@wxs.nl>
	<20040721160522.GU29108@artcom8.artcom-gmbh.de>
	<40FEA15F.9050608@wxs.nl>
	<20040722140329.GE7609@artcom8.artcom-gmbh.de>
	<20040722161556.5f911f09@glenlivet.elvenkind.com>
	<20040722143226.GF7609@artcom8.artcom-gmbh.de>
Message-ID: <20040722143440.GG7609@artcom8.artcom-gmbh.de>

On 2004-07-22 16:32:26 +0200, Martin Schr?der wrote:
> Thanks. with rc7.2 (#5563) all pdf*tex binaries know about
> vadjust pre.

Fabrice,
the pdf*.mak files are all outdated regarding vadjust.ch etc.

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de
From fabrice.popineau at supelec.fr  Sat Jul 24 23:45:17 2004
From: fabrice.popineau at supelec.fr (Fabrice Popineau)
Date: Sat Jul 24 23:45:43 2004
Subject: [NTG-pdftex] vadjust pre
In-Reply-To: <20040722143440.GG7609@artcom8.artcom-gmbh.de>
Message-ID: <20040724214530.1F7CA173AAA@postfix3-1.free.fr>

> Fabrice,
> the pdf*.mak files are all outdated regarding vadjust.ch etc.

I know. My problem is that currently I don't use the same source tree
anymore as the "standard" texlive source tree... The layout is a bit
different. I'm not sure about what I should do.

Fabrice


From hanthethanh at myrealbox.com  Mon Jul 26 21:09:12 2004
From: hanthethanh at myrealbox.com (The Thanh Han)
Date: Mon Jul 26 21:44:49 2004
Subject: [NTG-pdftex] Please don't submit unchanged files
Message-ID: <20040726190912.GA1136@monty>

Hi Martin,

can you please submit to texlive only files that are changed? It would
save me a lot of time browsing those files. When I do a diff, I often
get a bunch of files that differ only in their $Id but nothing else.
Then it is very difficult to check which files have been changed at all.

Thanks,
Thanh
From hanthethanh at myrealbox.com  Mon Jul 26 21:44:43 2004
From: hanthethanh at myrealbox.com (The Thanh Han)
Date: Mon Jul 26 21:44:51 2004
Subject: [NTG-pdftex] vadjust.ch
Message-ID: <20040726194443.GA5713@monty>

Hi Martin,

now when vadjust is in pdftex, vadjust.ch should be moved under pdftexdir/.
Can you please do that?

Thanh
From olaf at infovore.xs4all.nl  Tue Jul 27 17:39:06 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Tue Jul 27 17:38:49 2004
Subject: [NTG-pdftex] Please don't submit unchanged files
In-Reply-To: <20040726190912.GA1136@monty> (The Thanh Han's message of "Tue,
	27 Jul 2004 02:09:12 +0700")
References: <20040726190912.GA1136@monty>
Message-ID: <87bri1sbmt.fsf@infovore.xs4all.nl>

The Thanh Han writes:

> Hi Martin,
> can you please submit to texlive only files that are changed? It would
> save me a lot of time browsing those files. When I do a diff, I often
> get a bunch of files that differ only in their $Id but nothing else.
> Then it is very difficult to check which files have been changed at all.

While I try to avoid this, I know I've been guilty of doing this by
accident in the past.  For which my apologies.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From hanthethanh at myrealbox.com  Sat Jul 31 10:21:58 2004
From: hanthethanh at myrealbox.com (The Thanh Han)
Date: Sun Aug  1 03:33:31 2004
Subject: [NTG-pdftex] open problems with 1.20a
In-Reply-To: <Pine.LNX.4.60.0407090135340.1864@hahepc1.hahe>
References: <20040701143700.GP8095@artcom8.artcom-gmbh.de>
	<20040708124413.GR8095@artcom8.artcom-gmbh.de>
	<Pine.LNX.4.60.0407090135340.1864@hahepc1.hahe>
Message-ID: <20040731082158.GA366@monty>

> - fixed a few problems with handling fonts in included pdf.
> 
> ?

the most prominent change was the way pdftex handles tfm of fonts found
in included pdf's. Thanks to Harmut's work on using the avl library,
things are much cleaner now.

> - support for auto font expansion -- expanded TFM's are not required
> 
> ?
> 
> Needs some example runs to see how it now works. Also what's now with
> these obsolete expanded font files like font+15.tfm or MM instances like
> font-30.pfb: Do they hurt? Can they still be used? All this is cleaned
> up, or?

if auto expansion is not used, then pdftex behaviour doesn't change. The
only thing that is gone is the font expansion factor, which proved to
cause a lot of troubles and didn't bring any benefit. My intention was
to use this parameter to simulate font expansion by letterspacing. 

In short, auto font expansion is just like `normal' font expansion,
except that a few things are done automatically ;)

Thanh
From aa056 at chebucto.ns.ca  Sat Jul 17 20:56:29 2004
From: aa056 at chebucto.ns.ca (George N. White III)
Date: Sat Sep  4 16:46:34 2004
Subject: [NTG-pdftex] Re: [pdftex] pdftex-1.20a-rc6 is available
In-Reply-To: <20040716053524.GA2909@monty>
References: <20040716053524.GA2909@monty>
Message-ID: <Pine.SGI.4.60.0407171529480.167376@montigo.bio.dfo.ca>

On Fri, 16 Jul 2004, The Thanh Han wrote:

> Hi,
>
> pdftex-1.20a-rc6 is available (sources + djgpp binaries) at
> pdftex.sarovar.org
>
> this version fixed 2 problems with auto font expansion and margin 
> kerning. If no further problem is found, we expect to release 
> pdftex-1.20a soon

I just added pdftex-1.20a-rc6 to teTeX-2.96.6 on Irix 6.5.22m
and Knoppix Linux 3.4 and in both cases latex ltxcheck fails:

$ latex ltxcheck
This is pdfTeX, Version 3.141592-1.20a-rc6 (Web2C 7.5.3) 
[..]
Checking the current directory syntax 
=====================================
\@currdir is defined as ./ 
(Testing...) ./ltxcheck.aux not found

The LaTeX2e installation has defined \@currdir
to be ./.
This appears to be incorrect.
You should add a correct definition to texsys.cfg
and rebuild the format.
! BAD LaTeX2e system!!. 
l.216 \errmessage{BAD LaTeX2e system!!}

? X No pages of output.
Transcript written on ltxcheck.log.
$ ls ltxcheck.*
ltxcheck.au ltxcheck.log

--
George N. White III  <aa056@chebucto.ns.ca>
   Head of St. Margarets Bay, Nova Scotia, Canada

