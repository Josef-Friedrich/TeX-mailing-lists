From noreply at sarovar.org  Mon Oct  1 00:00:39 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 01 Oct 2007 03:30:39 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-871 ] Synchronization: pdfsync.sty
	embedded (1)
Message-ID: <E1Ic6q7-0005rm-00@sarovar.org>

Patches item #871, was opened at 2007-09-30 10:56
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=871&group_id=106

Category: User interaction
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Jerome LAURENS (jlaurens)
Assigned to: Martin Schr?der (oneiros)
Summary: Synchronization: pdfsync.sty embedded (1)

Initial Comment:
To the administrator, please remove the preceding patch submission

The purpose is to implement some extensions very useful for 
synchronization, both forwards and backwards. Synchronization is the 
ability for a text editor and a pdf viewer to work together, displaying the 
same thing at the same time. For example, a text editor can ask a pdf 
viewer to display and outline the character in the output corresponding to 
the character under the cursor.
Attached is a zip file containing diff against version 1.40.4, explanations 
and demonstrations in
synchronize.readme/synchronize+frames.pdf

PS: I have problems with my connection

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-10-01 00:00

Message:
Logged In: YES 
user_id=421

You didn't attach Synchronize 2.zip yet...

----------------------------------------------------------------------

Comment By: Jerome LAURENS (jlaurens)
Date: 2007-09-30 23:10

Message:
Logged In: YES 
user_id=4698

Synchronize 2.zip is a version extending the previous one. Now synchronization 
works the same for both dvi and pdf output modes.


----------------------------------------------------------------------

Comment By: Jerome LAURENS (jlaurens)
Date: 2007-09-30 23:09

Message:
Logged In: YES 
user_id=4698

Synchronize 2.zip is a version extending the previous one. Now synchronization 
works the same for both dvi and pdf output modes.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=871&group_id=106

From noreply at sarovar.org  Mon Oct  1 00:46:38 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 01 Oct 2007 04:16:38 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-741 ] wrong colors for included
	PDF-images (page groups)
Message-ID: <E1Ic7Yc-0005v0-00@sarovar.org>

Bugs item #741, was opened at 2007-03-02 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

Category: PDF inclusion
Group: v1.30.0
>Status: Open
Resolution: Wont Fix
Priority: 5
Submitted By: Uwe St?hr (stoehr)
Assigned to: Martin Schr?der (oneiros)
Summary: wrong colors for included PDF-images (page groups)

Initial Comment:
Attached is a PDF 1.4 image. When you include this to a
document the output generated by pdfetex 1.30.6 the
images looks different: The colors are much darker, see
attached PDF result.

----------------------------------------------------------------------

>Comment By: Uwe St?hr (stoehr)
Date: 2007-10-01 00:46

Message:
Logged In: YES 
user_id=3168

Why is this WONTFIX?

I mean:
> The file TestSkizze.pdf specifies the color blending space
> with "/CS /DeviceRGB" in the transparency group. In
> the PDF produced by pdftex this has been stripped out.

So the bug is that pdftex strips out the color space.
If you really think it's WONTFIX, then tell me what is the
correct way of specifying the color space so that I can
forward this to the Inkscape developers.

----------------------------------------------------------------------

Comment By: Adrian Johnson (ajohnson)
Date: 2007-09-30 15:34

Message:
Logged In: YES 
user_id=4699

The file TestSkizze.pdf specifies the color blending space
with "/CS /DeviceRGB" in the transparency group. In the PDF
produced by pdftex this has been stripped out. When the
color space is not specified Acrobat defaults to CMYK. This
results in RGB colors being converted to CMYK, blended in
CMYK color space, then converted back to RGB. This will
produce different results compared to blending the colors in
RGB space.

This problem was also reported to the cairo list:
http://lists.cairographics.org/archives/cairo/2007-September/011471.html


----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-03 19:41

Message:
Logged In: YES 
user_id=3168

> To my eye the Harlequin results are the same for both
> file,

Yes and the result is correct.

> while Jaws has to different results.

In my eyes the Jaws results are identical but wrong.

So it seems that pdftex is not the problem here, but it
would be nice if pdftex could handle page groups in one of
the next releases:
>"PDF inclusion: Page Group detected which pdfTeX can't
> handle. Ignoring it."
So I'm not sure to close this bug or mark it as enhancement.
Thanks for your help.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-03 15:48

Message:
Logged In: YES 
user_id=421

I've attached the results of two professional RIPs: Global
Graphics Jaws & Harlequin. To my eye the Harlequin results
are the same for both file, while Jaws has to different
results. :-{

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 13:16

Message:
Logged In: YES 
user_id=421

Your document is using Page Groups (see PDF Reference
7.3.6). Including pdfs that use this is a grey area; see the
notes in NEWS and pdftoepdf.cc. It works most of the times
and with most RIPs. I'll look into it again, but I don't
have much hope.

Btw: pdftex warns you:
"PDF inclusion: Page Group detected which pdfTeX can't
handle. Ignoring it."

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 13:05

Message:
Logged In: YES 
user_id=3168

> problem in AR7 - but only there.

But how could this be a bug in Acrobat when Adobe set the
standards? Why is this correctly shown before the
pdftex-run. The display is the same here in Acrobat 5 - 8 so
I think they would have fixed it when it's a bug since
Acrobat 5.

Hmm but OK, when I open the result with GSview besides the
GS bug, the color tones are correctly be displayed. So close
this bug report again, when you are sure that pdftex follows
here exactly the PDF-specification.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 12:57

Message:
Logged In: YES 
user_id=3168

> It's a bug in AR;

No! Acrobat is correct: I created this image with Inkscape
0.45 and exported it the as PDF. I designed e.g. the green
as light green. And Acrobat 7 and 8 shows this exactly as
designed while the pdftex result has wrong color tones, see
the attached screenshots.

(Ghostscript is btw. not able to render the PDF-image
correctly - I reported this to the GS people who confirmed it.)

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 01:05

Message:
Logged In: YES 
user_id=421

You don't say it, but I see the same problem in AR7 - but
only there. It's a bug in AR; try kpdf or ghostscript instead.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

From noreply at sarovar.org  Mon Oct  1 00:51:52 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 01 Oct 2007 04:21:52 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-741 ] wrong colors for included
	PDF-images (page groups)
Message-ID: <E1Ic7dg-0005ve-00@sarovar.org>

Bugs item #741, was opened at 2007-03-02 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

Category: PDF inclusion
Group: v1.30.0
Status: Open
Resolution: Wont Fix
Priority: 5
Submitted By: Uwe St?hr (stoehr)
Assigned to: Martin Schr?der (oneiros)
Summary: wrong colors for included PDF-images (page groups)

Initial Comment:
Attached is a PDF 1.4 image. When you include this to a
document the output generated by pdfetex 1.30.6 the
images looks different: The colors are much darker, see
attached PDF result.

----------------------------------------------------------------------

>Comment By: Uwe St?hr (stoehr)
Date: 2007-10-01 00:51

Message:
Logged In: YES 
user_id=3168

> Why is this WONTFIX?

Sorry, this bug was once closed when this additional info
was not available. -> I reopened this bug.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-10-01 00:46

Message:
Logged In: YES 
user_id=3168

Why is this WONTFIX?

I mean:
> The file TestSkizze.pdf specifies the color blending space
> with "/CS /DeviceRGB" in the transparency group. In
> the PDF produced by pdftex this has been stripped out.

So the bug is that pdftex strips out the color space.
If you really think it's WONTFIX, then tell me what is the
correct way of specifying the color space so that I can
forward this to the Inkscape developers.

----------------------------------------------------------------------

Comment By: Adrian Johnson (ajohnson)
Date: 2007-09-30 15:34

Message:
Logged In: YES 
user_id=4699

The file TestSkizze.pdf specifies the color blending space
with "/CS /DeviceRGB" in the transparency group. In the PDF
produced by pdftex this has been stripped out. When the
color space is not specified Acrobat defaults to CMYK. This
results in RGB colors being converted to CMYK, blended in
CMYK color space, then converted back to RGB. This will
produce different results compared to blending the colors in
RGB space.

This problem was also reported to the cairo list:
http://lists.cairographics.org/archives/cairo/2007-September/011471.html


----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-03 19:41

Message:
Logged In: YES 
user_id=3168

> To my eye the Harlequin results are the same for both
> file,

Yes and the result is correct.

> while Jaws has to different results.

In my eyes the Jaws results are identical but wrong.

So it seems that pdftex is not the problem here, but it
would be nice if pdftex could handle page groups in one of
the next releases:
>"PDF inclusion: Page Group detected which pdfTeX can't
> handle. Ignoring it."
So I'm not sure to close this bug or mark it as enhancement.
Thanks for your help.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-03 15:48

Message:
Logged In: YES 
user_id=421

I've attached the results of two professional RIPs: Global
Graphics Jaws & Harlequin. To my eye the Harlequin results
are the same for both file, while Jaws has to different
results. :-{

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 13:16

Message:
Logged In: YES 
user_id=421

Your document is using Page Groups (see PDF Reference
7.3.6). Including pdfs that use this is a grey area; see the
notes in NEWS and pdftoepdf.cc. It works most of the times
and with most RIPs. I'll look into it again, but I don't
have much hope.

Btw: pdftex warns you:
"PDF inclusion: Page Group detected which pdfTeX can't
handle. Ignoring it."

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 13:05

Message:
Logged In: YES 
user_id=3168

> problem in AR7 - but only there.

But how could this be a bug in Acrobat when Adobe set the
standards? Why is this correctly shown before the
pdftex-run. The display is the same here in Acrobat 5 - 8 so
I think they would have fixed it when it's a bug since
Acrobat 5.

Hmm but OK, when I open the result with GSview besides the
GS bug, the color tones are correctly be displayed. So close
this bug report again, when you are sure that pdftex follows
here exactly the PDF-specification.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 12:57

Message:
Logged In: YES 
user_id=3168

> It's a bug in AR;

No! Acrobat is correct: I created this image with Inkscape
0.45 and exported it the as PDF. I designed e.g. the green
as light green. And Acrobat 7 and 8 shows this exactly as
designed while the pdftex result has wrong color tones, see
the attached screenshots.

(Ghostscript is btw. not able to render the PDF-image
correctly - I reported this to the GS people who confirmed it.)

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 01:05

Message:
Logged In: YES 
user_id=421

You don't say it, but I see the same problem in AR7 - but
only there. It's a bug in AR; try kpdf or ghostscript instead.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

From noreply at sarovar.org  Mon Oct  1 02:04:55 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 01 Oct 2007 05:34:55 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-741 ] wrong colors for included
	PDF-images (page groups)
Message-ID: <E1Ic8mN-00043v-00@sarovar.org>

Bugs item #741, was opened at 2007-03-02 10:20
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

Category: PDF inclusion
Group: v1.30.0
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Uwe St?hr (stoehr)
Assigned to: Martin Schr?der (oneiros)
Summary: wrong colors for included PDF-images (page groups)

Initial Comment:
Attached is a PDF 1.4 image. When you include this to a
document the output generated by pdfetex 1.30.6 the
images looks different: The colors are much darker, see
attached PDF result.

----------------------------------------------------------------------

Comment By: Adrian Johnson (ajohnson)
Date: 2007-10-01 09:34

Message:
Logged In: YES 
user_id=4699

After adding 

/Group <<
  /CS /DeviceRGB
  /Type /Group
  /S /Transparency
>>

to the /Page object in newfile2-1.pdf it displays correctly
in Acrobat.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-10-01 08:34

Message:
Logged In: YES 
user_id=421

The attached file newfile2-1.pdf has a copied page group,
which as I now know, should be correct. Still, AR8 at Linux
shows different colours for it and TestSkizze.pdf .

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-10-01 08:21

Message:
Logged In: YES 
user_id=3168

> Why is this WONTFIX?

Sorry, this bug was once closed when this additional info
was not available. -> I reopened this bug.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-10-01 08:16

Message:
Logged In: YES 
user_id=3168

Why is this WONTFIX?

I mean:
> The file TestSkizze.pdf specifies the color blending space
> with "/CS /DeviceRGB" in the transparency group. In
> the PDF produced by pdftex this has been stripped out.

So the bug is that pdftex strips out the color space.
If you really think it's WONTFIX, then tell me what is the
correct way of specifying the color space so that I can
forward this to the Inkscape developers.

----------------------------------------------------------------------

Comment By: Adrian Johnson (ajohnson)
Date: 2007-09-30 23:04

Message:
Logged In: YES 
user_id=4699

The file TestSkizze.pdf specifies the color blending space
with "/CS /DeviceRGB" in the transparency group. In the PDF
produced by pdftex this has been stripped out. When the
color space is not specified Acrobat defaults to CMYK. This
results in RGB colors being converted to CMYK, blended in
CMYK color space, then converted back to RGB. This will
produce different results compared to blending the colors in
RGB space.

This problem was also reported to the cairo list:
http://lists.cairographics.org/archives/cairo/2007-September/011471.html


----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-04 05:11

Message:
Logged In: YES 
user_id=3168

> To my eye the Harlequin results are the same for both
> file,

Yes and the result is correct.

> while Jaws has to different results.

In my eyes the Jaws results are identical but wrong.

So it seems that pdftex is not the problem here, but it
would be nice if pdftex could handle page groups in one of
the next releases:
>"PDF inclusion: Page Group detected which pdfTeX can't
> handle. Ignoring it."
So I'm not sure to close this bug or mark it as enhancement.
Thanks for your help.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-04 01:18

Message:
Logged In: YES 
user_id=421

I've attached the results of two professional RIPs: Global
Graphics Jaws & Harlequin. To my eye the Harlequin results
are the same for both file, while Jaws has to different
results. :-{

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 22:46

Message:
Logged In: YES 
user_id=421

Your document is using Page Groups (see PDF Reference
7.3.6). Including pdfs that use this is a grey area; see the
notes in NEWS and pdftoepdf.cc. It works most of the times
and with most RIPs. I'll look into it again, but I don't
have much hope.

Btw: pdftex warns you:
"PDF inclusion: Page Group detected which pdfTeX can't
handle. Ignoring it."

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 22:35

Message:
Logged In: YES 
user_id=3168

> problem in AR7 - but only there.

But how could this be a bug in Acrobat when Adobe set the
standards? Why is this correctly shown before the
pdftex-run. The display is the same here in Acrobat 5 - 8 so
I think they would have fixed it when it's a bug since
Acrobat 5.

Hmm but OK, when I open the result with GSview besides the
GS bug, the color tones are correctly be displayed. So close
this bug report again, when you are sure that pdftex follows
here exactly the PDF-specification.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 22:27

Message:
Logged In: YES 
user_id=3168

> It's a bug in AR;

No! Acrobat is correct: I created this image with Inkscape
0.45 and exported it the as PDF. I designed e.g. the green
as light green. And Acrobat 7 and 8 shows this exactly as
designed while the pdftex result has wrong color tones, see
the attached screenshots.

(Ghostscript is btw. not able to render the PDF-image
correctly - I reported this to the GS people who confirmed it.)

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 10:35

Message:
Logged In: YES 
user_id=421

You don't say it, but I see the same problem in AR7 - but
only there. It's a bug in AR; try kpdf or ghostscript instead.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

From noreply at sarovar.org  Mon Oct  1 01:04:06 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 01 Oct 2007 04:34:06 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-741 ] wrong colors for included
	PDF-images (page groups)
Message-ID: <E1Ic7pW-00017p-00@sarovar.org>

Bugs item #741, was opened at 2007-03-02 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

Category: PDF inclusion
Group: v1.30.0
Status: Open
>Resolution: Accepted
Priority: 5
Submitted By: Uwe St?hr (stoehr)
Assigned to: Martin Schr?der (oneiros)
Summary: wrong colors for included PDF-images (page groups)

Initial Comment:
Attached is a PDF 1.4 image. When you include this to a
document the output generated by pdfetex 1.30.6 the
images looks different: The colors are much darker, see
attached PDF result.

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-10-01 01:04

Message:
Logged In: YES 
user_id=421

The attached file newfile2-1.pdf has a copied page group,
which as I now know, should be correct. Still, AR8 at Linux
shows different colours for it and TestSkizze.pdf .

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-10-01 00:51

Message:
Logged In: YES 
user_id=3168

> Why is this WONTFIX?

Sorry, this bug was once closed when this additional info
was not available. -> I reopened this bug.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-10-01 00:46

Message:
Logged In: YES 
user_id=3168

Why is this WONTFIX?

I mean:
> The file TestSkizze.pdf specifies the color blending space
> with "/CS /DeviceRGB" in the transparency group. In
> the PDF produced by pdftex this has been stripped out.

So the bug is that pdftex strips out the color space.
If you really think it's WONTFIX, then tell me what is the
correct way of specifying the color space so that I can
forward this to the Inkscape developers.

----------------------------------------------------------------------

Comment By: Adrian Johnson (ajohnson)
Date: 2007-09-30 15:34

Message:
Logged In: YES 
user_id=4699

The file TestSkizze.pdf specifies the color blending space
with "/CS /DeviceRGB" in the transparency group. In the PDF
produced by pdftex this has been stripped out. When the
color space is not specified Acrobat defaults to CMYK. This
results in RGB colors being converted to CMYK, blended in
CMYK color space, then converted back to RGB. This will
produce different results compared to blending the colors in
RGB space.

This problem was also reported to the cairo list:
http://lists.cairographics.org/archives/cairo/2007-September/011471.html


----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-03 19:41

Message:
Logged In: YES 
user_id=3168

> To my eye the Harlequin results are the same for both
> file,

Yes and the result is correct.

> while Jaws has to different results.

In my eyes the Jaws results are identical but wrong.

So it seems that pdftex is not the problem here, but it
would be nice if pdftex could handle page groups in one of
the next releases:
>"PDF inclusion: Page Group detected which pdfTeX can't
> handle. Ignoring it."
So I'm not sure to close this bug or mark it as enhancement.
Thanks for your help.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-03 15:48

Message:
Logged In: YES 
user_id=421

I've attached the results of two professional RIPs: Global
Graphics Jaws & Harlequin. To my eye the Harlequin results
are the same for both file, while Jaws has to different
results. :-{

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 13:16

Message:
Logged In: YES 
user_id=421

Your document is using Page Groups (see PDF Reference
7.3.6). Including pdfs that use this is a grey area; see the
notes in NEWS and pdftoepdf.cc. It works most of the times
and with most RIPs. I'll look into it again, but I don't
have much hope.

Btw: pdftex warns you:
"PDF inclusion: Page Group detected which pdfTeX can't
handle. Ignoring it."

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 13:05

Message:
Logged In: YES 
user_id=3168

> problem in AR7 - but only there.

But how could this be a bug in Acrobat when Adobe set the
standards? Why is this correctly shown before the
pdftex-run. The display is the same here in Acrobat 5 - 8 so
I think they would have fixed it when it's a bug since
Acrobat 5.

Hmm but OK, when I open the result with GSview besides the
GS bug, the color tones are correctly be displayed. So close
this bug report again, when you are sure that pdftex follows
here exactly the PDF-specification.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 12:57

Message:
Logged In: YES 
user_id=3168

> It's a bug in AR;

No! Acrobat is correct: I created this image with Inkscape
0.45 and exported it the as PDF. I designed e.g. the green
as light green. And Acrobat 7 and 8 shows this exactly as
designed while the pdftex result has wrong color tones, see
the attached screenshots.

(Ghostscript is btw. not able to render the PDF-image
correctly - I reported this to the GS people who confirmed it.)

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 01:05

Message:
Logged In: YES 
user_id=421

You don't say it, but I see the same problem in AR7 - but
only there. It's a bug in AR; try kpdf or ghostscript instead.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

From noreply at sarovar.org  Mon Oct  1 07:08:54 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 01 Oct 2007 10:38:54 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-741 ] wrong colors for included
	PDF-images (page groups)
Message-ID: <E1IcDWY-0002BM-00@sarovar.org>

Bugs item #741, was opened at 2007-03-02 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

Category: PDF inclusion
Group: v1.30.0
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Uwe St?hr (stoehr)
Assigned to: Martin Schr?der (oneiros)
Summary: wrong colors for included PDF-images (page groups)

Initial Comment:
Attached is a PDF 1.4 image. When you include this to a
document the output generated by pdfetex 1.30.6 the
images looks different: The colors are much darker, see
attached PDF result.

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-10-01 07:08

Message:
Logged In: YES 
user_id=421

Adding /Group to the /Page is not an option for us (and
probably wrong): What should we do when we have more than
one included pdf on a page and they have different /CS
entries? And why does transparency in an /XObject need an
entry in the /Page? The entry in the /XObject should suffice.

I wouldn't be surprised if AR is faulty here.

----------------------------------------------------------------------

Comment By: Adrian Johnson (ajohnson)
Date: 2007-10-01 02:04

Message:
Logged In: YES 
user_id=4699

After adding 

/Group <<
  /CS /DeviceRGB
  /Type /Group
  /S /Transparency
>>

to the /Page object in newfile2-1.pdf it displays correctly
in Acrobat.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-10-01 01:04

Message:
Logged In: YES 
user_id=421

The attached file newfile2-1.pdf has a copied page group,
which as I now know, should be correct. Still, AR8 at Linux
shows different colours for it and TestSkizze.pdf .

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-10-01 00:51

Message:
Logged In: YES 
user_id=3168

> Why is this WONTFIX?

Sorry, this bug was once closed when this additional info
was not available. -> I reopened this bug.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-10-01 00:46

Message:
Logged In: YES 
user_id=3168

Why is this WONTFIX?

I mean:
> The file TestSkizze.pdf specifies the color blending space
> with "/CS /DeviceRGB" in the transparency group. In
> the PDF produced by pdftex this has been stripped out.

So the bug is that pdftex strips out the color space.
If you really think it's WONTFIX, then tell me what is the
correct way of specifying the color space so that I can
forward this to the Inkscape developers.

----------------------------------------------------------------------

Comment By: Adrian Johnson (ajohnson)
Date: 2007-09-30 15:34

Message:
Logged In: YES 
user_id=4699

The file TestSkizze.pdf specifies the color blending space
with "/CS /DeviceRGB" in the transparency group. In the PDF
produced by pdftex this has been stripped out. When the
color space is not specified Acrobat defaults to CMYK. This
results in RGB colors being converted to CMYK, blended in
CMYK color space, then converted back to RGB. This will
produce different results compared to blending the colors in
RGB space.

This problem was also reported to the cairo list:
http://lists.cairographics.org/archives/cairo/2007-September/011471.html


----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-03 19:41

Message:
Logged In: YES 
user_id=3168

> To my eye the Harlequin results are the same for both
> file,

Yes and the result is correct.

> while Jaws has to different results.

In my eyes the Jaws results are identical but wrong.

So it seems that pdftex is not the problem here, but it
would be nice if pdftex could handle page groups in one of
the next releases:
>"PDF inclusion: Page Group detected which pdfTeX can't
> handle. Ignoring it."
So I'm not sure to close this bug or mark it as enhancement.
Thanks for your help.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-03 15:48

Message:
Logged In: YES 
user_id=421

I've attached the results of two professional RIPs: Global
Graphics Jaws & Harlequin. To my eye the Harlequin results
are the same for both file, while Jaws has to different
results. :-{

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 13:16

Message:
Logged In: YES 
user_id=421

Your document is using Page Groups (see PDF Reference
7.3.6). Including pdfs that use this is a grey area; see the
notes in NEWS and pdftoepdf.cc. It works most of the times
and with most RIPs. I'll look into it again, but I don't
have much hope.

Btw: pdftex warns you:
"PDF inclusion: Page Group detected which pdfTeX can't
handle. Ignoring it."

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 13:05

Message:
Logged In: YES 
user_id=3168

> problem in AR7 - but only there.

But how could this be a bug in Acrobat when Adobe set the
standards? Why is this correctly shown before the
pdftex-run. The display is the same here in Acrobat 5 - 8 so
I think they would have fixed it when it's a bug since
Acrobat 5.

Hmm but OK, when I open the result with GSview besides the
GS bug, the color tones are correctly be displayed. So close
this bug report again, when you are sure that pdftex follows
here exactly the PDF-specification.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 12:57

Message:
Logged In: YES 
user_id=3168

> It's a bug in AR;

No! Acrobat is correct: I created this image with Inkscape
0.45 and exported it the as PDF. I designed e.g. the green
as light green. And Acrobat 7 and 8 shows this exactly as
designed while the pdftex result has wrong color tones, see
the attached screenshots.

(Ghostscript is btw. not able to render the PDF-image
correctly - I reported this to the GS people who confirmed it.)

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 01:05

Message:
Logged In: YES 
user_id=421

You don't say it, but I see the same problem in AR7 - but
only there. It's a bug in AR; try kpdf or ghostscript instead.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

From noreply at sarovar.org  Wed Oct  3 20:51:15 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 04 Oct 2007 00:21:15 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-741 ] wrong colors for included
	PDF-images (page groups)
Message-ID: <E1Id9JT-0003HE-00@sarovar.org>

Bugs item #741, was opened at 2007-03-02 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

Category: PDF inclusion
Group: v1.30.0
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Uwe St?hr (stoehr)
Assigned to: Martin Schr?der (oneiros)
Summary: wrong colors for included PDF-images (page groups)

Initial Comment:
Attached is a PDF 1.4 image. When you include this to a
document the output generated by pdfetex 1.30.6 the
images looks different: The colors are much darker, see
attached PDF result.

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-10-03 20:51

Message:
Logged In: YES 
user_id=421

Fix is in the works.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-10-01 07:08

Message:
Logged In: YES 
user_id=421

Adding /Group to the /Page is not an option for us (and
probably wrong): What should we do when we have more than
one included pdf on a page and they have different /CS
entries? And why does transparency in an /XObject need an
entry in the /Page? The entry in the /XObject should suffice.

I wouldn't be surprised if AR is faulty here.

----------------------------------------------------------------------

Comment By: Adrian Johnson (ajohnson)
Date: 2007-10-01 02:04

Message:
Logged In: YES 
user_id=4699

After adding 

/Group <<
  /CS /DeviceRGB
  /Type /Group
  /S /Transparency
>>

to the /Page object in newfile2-1.pdf it displays correctly
in Acrobat.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-10-01 01:04

Message:
Logged In: YES 
user_id=421

The attached file newfile2-1.pdf has a copied page group,
which as I now know, should be correct. Still, AR8 at Linux
shows different colours for it and TestSkizze.pdf .

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-10-01 00:51

Message:
Logged In: YES 
user_id=3168

> Why is this WONTFIX?

Sorry, this bug was once closed when this additional info
was not available. -> I reopened this bug.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-10-01 00:46

Message:
Logged In: YES 
user_id=3168

Why is this WONTFIX?

I mean:
> The file TestSkizze.pdf specifies the color blending space
> with "/CS /DeviceRGB" in the transparency group. In
> the PDF produced by pdftex this has been stripped out.

So the bug is that pdftex strips out the color space.
If you really think it's WONTFIX, then tell me what is the
correct way of specifying the color space so that I can
forward this to the Inkscape developers.

----------------------------------------------------------------------

Comment By: Adrian Johnson (ajohnson)
Date: 2007-09-30 15:34

Message:
Logged In: YES 
user_id=4699

The file TestSkizze.pdf specifies the color blending space
with "/CS /DeviceRGB" in the transparency group. In the PDF
produced by pdftex this has been stripped out. When the
color space is not specified Acrobat defaults to CMYK. This
results in RGB colors being converted to CMYK, blended in
CMYK color space, then converted back to RGB. This will
produce different results compared to blending the colors in
RGB space.

This problem was also reported to the cairo list:
http://lists.cairographics.org/archives/cairo/2007-September/011471.html


----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-03 19:41

Message:
Logged In: YES 
user_id=3168

> To my eye the Harlequin results are the same for both
> file,

Yes and the result is correct.

> while Jaws has to different results.

In my eyes the Jaws results are identical but wrong.

So it seems that pdftex is not the problem here, but it
would be nice if pdftex could handle page groups in one of
the next releases:
>"PDF inclusion: Page Group detected which pdfTeX can't
> handle. Ignoring it."
So I'm not sure to close this bug or mark it as enhancement.
Thanks for your help.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-03 15:48

Message:
Logged In: YES 
user_id=421

I've attached the results of two professional RIPs: Global
Graphics Jaws & Harlequin. To my eye the Harlequin results
are the same for both file, while Jaws has to different
results. :-{

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 13:16

Message:
Logged In: YES 
user_id=421

Your document is using Page Groups (see PDF Reference
7.3.6). Including pdfs that use this is a grey area; see the
notes in NEWS and pdftoepdf.cc. It works most of the times
and with most RIPs. I'll look into it again, but I don't
have much hope.

Btw: pdftex warns you:
"PDF inclusion: Page Group detected which pdfTeX can't
handle. Ignoring it."

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 13:05

Message:
Logged In: YES 
user_id=3168

> problem in AR7 - but only there.

But how could this be a bug in Acrobat when Adobe set the
standards? Why is this correctly shown before the
pdftex-run. The display is the same here in Acrobat 5 - 8 so
I think they would have fixed it when it's a bug since
Acrobat 5.

Hmm but OK, when I open the result with GSview besides the
GS bug, the color tones are correctly be displayed. So close
this bug report again, when you are sure that pdftex follows
here exactly the PDF-specification.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 12:57

Message:
Logged In: YES 
user_id=3168

> It's a bug in AR;

No! Acrobat is correct: I created this image with Inkscape
0.45 and exported it the as PDF. I designed e.g. the green
as light green. And Acrobat 7 and 8 shows this exactly as
designed while the pdftex result has wrong color tones, see
the attached screenshots.

(Ghostscript is btw. not able to render the PDF-image
correctly - I reported this to the GS people who confirmed it.)

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 01:05

Message:
Logged In: YES 
user_id=421

You don't say it, but I see the same problem in AR7 - but
only there. It's a bug in AR; try kpdf or ghostscript instead.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

From martin at oneiros.de  Fri Oct  5 20:52:13 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 5 Oct 2007 20:52:13 +0200
Subject: [NTG-pdftex] gcc 4.1.2@ubuntu breaks pdftex
Message-ID: <68c491a60710051152s13e121d0vee8c259290d29a25@mail.gmail.com>

Hi,
I (and David) just spend some hours tracking down a compiler bug on
Ubuntu 7.04 (gcc (GCC) 4.1.2 (Ubuntu 4.1.2-0ubuntu4)): If you compile
trunk with build.sh, the resulting binary can not include pdfs (xpdf:
reading PDF image failed). If I use my own build.sh, everythings fine.
The difference: I set the CFLAGS/CXXFLAGS to -g, while the default is
-g -O2. So -O2 breaks pdftex. :-(

Best
   Martin

From martin at oneiros.de  Fri Oct  5 22:13:21 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 5 Oct 2007 22:13:21 +0200
Subject: [NTG-pdftex] gcc 4.1.2@ubuntu breaks pdftex
In-Reply-To: <68c491a60710051152s13e121d0vee8c259290d29a25@mail.gmail.com>
References: <68c491a60710051152s13e121d0vee8c259290d29a25@mail.gmail.com>
Message-ID: <68c491a60710051313v6bbddc05lb97b28c66044eaf6@mail.gmail.com>

2007/10/5, Martin Schr?der <martin at oneiros.de>:
> The difference: I set the CFLAGS/CXXFLAGS to -g, while the default is
> -g -O2. So -O2 breaks pdftex. :-(

It's not only a problem of gcc 4.1.2. I have the same effect with
gcc/g++ (GCC) 4.1.0 (SUSE Linux) :-(

Best
   Martin

From martin at oneiros.de  Fri Oct  5 22:24:45 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 5 Oct 2007 22:24:45 +0200
Subject: [NTG-pdftex] gcc 4.1.2@ubuntu breaks pdftex
In-Reply-To: <68c491a60710051313v6bbddc05lb97b28c66044eaf6@mail.gmail.com>
References: <68c491a60710051152s13e121d0vee8c259290d29a25@mail.gmail.com>
	<68c491a60710051313v6bbddc05lb97b28c66044eaf6@mail.gmail.com>
Message-ID: <68c491a60710051324j12155e2al97e315ba0ff61cea@mail.gmail.com>

2007/10/5, Martin Schr?der <martin at oneiros.de>:
> It's not only a problem of gcc 4.1.2. I have the same effect with
> gcc/g++ (GCC) 4.1.0 (SUSE Linux) :-(

g++ is the culprit: setting only CXXFLAGS to -g -O2 breaks pdftex. So
the cause is likely something in xpdf :-(

Best
   Martin

From taco at elvenkind.com  Fri Oct  5 23:24:13 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 05 Oct 2007 23:24:13 +0200
Subject: [NTG-pdftex] gcc 4.1.2@ubuntu breaks pdftex
In-Reply-To: <68c491a60710051313v6bbddc05lb97b28c66044eaf6@mail.gmail.com>
References: <68c491a60710051152s13e121d0vee8c259290d29a25@mail.gmail.com>
	<68c491a60710051313v6bbddc05lb97b28c66044eaf6@mail.gmail.com>
Message-ID: <4706AB7D.2000200@elvenkind.com>

Martin Schr?der wrote:
> 2007/10/5, Martin Schr?der <martin at oneiros.de>:
>> The difference: I set the CFLAGS/CXXFLAGS to -g, while the default is
>> -g -O2. So -O2 breaks pdftex. :-(
> 
> It's not only a problem of gcc 4.1.2. I have the same effect with
> gcc/g++ (GCC) 4.1.0 (SUSE Linux) :-(

I'll compile pdftex 1.40.5 here. Meanwhile, g++ -v says:

Using built-in specs.
Target: i586-mandriva-linux-gnu
Configured with: ../configure --prefix=/usr --libexecdir=/usr/lib 
--with-slibdir=/lib --mandir=/usr/share/man --infodir=/usr/share/info 
--enable-checking=release 
--enable-languages=c,c++,ada,fortran,objc,obj-c++,java 
--host=i586-mandriva-linux-gnu --with-cpu=generic --with-system-zlib 
--enable-threads=posix --enable-shared --enable-long-long 
--enable-__cxa_atexit --disable-libunwind-exceptions 
--enable-clocale=gnu --enable-java-awt=gtk 
--with-java-home=/usr/lib/jvm/java-1.4.2-gcj-1.4.2.0/jre 
--enable-gtk-cairo --disable-libjava-multilib --enable-ssp --disable-libssp
Thread model: posix
gcc version 4.1.2 20070115 (prerelease) (4.1.2-0.20070115.1mdv2007.1)



From martin at oneiros.de  Fri Oct  5 23:29:25 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 5 Oct 2007 23:29:25 +0200
Subject: [NTG-pdftex] gcc 4.1.2@ubuntu breaks pdftex
In-Reply-To: <4706AB7D.2000200@elvenkind.com>
References: <68c491a60710051152s13e121d0vee8c259290d29a25@mail.gmail.com>
	<68c491a60710051313v6bbddc05lb97b28c66044eaf6@mail.gmail.com>
	<4706AB7D.2000200@elvenkind.com>
Message-ID: <68c491a60710051429g16878f19s28212d84e27757@mail.gmail.com>

2007/10/5, Taco Hoekwater <taco at elvenkind.com>:
> I'll compile pdftex 1.40.5 here. Meanwhile, g++ -v says:

The effect is (only?) in trunk.
I suspect either xpdf 3.02pl1 is difficult or I broke it.

Best
   Martin

From reinhard.kotucha at web.de  Fri Oct  5 23:37:22 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 5 Oct 2007 23:37:22 +0200
Subject: [NTG-pdftex] gcc 4.1.2@ubuntu breaks pdftex
In-Reply-To: <68c491a60710051313v6bbddc05lb97b28c66044eaf6@mail.gmail.com>
References: <68c491a60710051152s13e121d0vee8c259290d29a25@mail.gmail.com>
	<68c491a60710051313v6bbddc05lb97b28c66044eaf6@mail.gmail.com>
Message-ID: <18182.44690.493618.20736@zaphod.ms25.net>

Martin Schr?der writes:
 > 2007/10/5, Martin Schr?der <martin at oneiros.de>:
 > It's not only a problem of gcc 4.1.2. I have the same effect with
 > gcc/g++ (GCC) 4.1.0 (SUSE Linux) :-(

Hi Martin,
do you remember the problems we had at our last TeX meeting with the
Ubuntu machine at the university?  I don't remember to which version
of gcc we had to downgrade.

BTW, I recently failed to compile emacs(+auctex) on a laptop (Ubuntu)
of a friend.  ./configure claimed that the C compiler is not working.

However, I don't have any problems compiling TeXLive or Emacs on my
Gentoo system.

$ gcc --version
gcc (GCC) 4.1.2 (Gentoo 4.1.2 p1.0.1)

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From martin at oneiros.de  Fri Oct  5 23:45:43 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 5 Oct 2007 23:45:43 +0200
Subject: [NTG-pdftex] gcc 4.1.2@ubuntu breaks pdftex
In-Reply-To: <18182.44690.493618.20736@zaphod.ms25.net>
References: <68c491a60710051152s13e121d0vee8c259290d29a25@mail.gmail.com>
	<68c491a60710051313v6bbddc05lb97b28c66044eaf6@mail.gmail.com>
	<18182.44690.493618.20736@zaphod.ms25.net>
Message-ID: <68c491a60710051445t4be1a6fbta047b77fcdcfb4e1@mail.gmail.com>

2007/10/5, Reinhard Kotucha <reinhard.kotucha at web.de>:
> However, I don't have any problems compiling TeXLive or Emacs on my
> Gentoo system.

Please try pdftex-trunk from svn.

Best
   Martin

From taco at elvenkind.com  Fri Oct  5 23:56:17 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 05 Oct 2007 23:56:17 +0200
Subject: [NTG-pdftex] gcc 4.1.2@ubuntu breaks pdftex
In-Reply-To: <68c491a60710051445t4be1a6fbta047b77fcdcfb4e1@mail.gmail.com>
References: <68c491a60710051152s13e121d0vee8c259290d29a25@mail.gmail.com>	<68c491a60710051313v6bbddc05lb97b28c66044eaf6@mail.gmail.com>	<18182.44690.493618.20736@zaphod.ms25.net>
	<68c491a60710051445t4be1a6fbta047b77fcdcfb4e1@mail.gmail.com>
Message-ID: <4706B301.1040703@elvenkind.com>

Martin Schr?der wrote:
> 2007/10/5, Reinhard Kotucha <reinhard.kotucha at web.de>:
>> However, I don't have any problems compiling TeXLive or Emacs on my
>> Gentoo system.
> 
> Please try pdftex-trunk from svn.


Yes, I also have the problem here, with trunk.

I've narrowed it down to pdftoepdf.cc: it is fine without -O, and
broken with (just -O is enough to trigger the error, no need for -O2)

I have to stop here, I don't really know how to debug c++ code.

Best wishes,
Taco





From reinhard.kotucha at web.de  Sat Oct  6 00:57:17 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 6 Oct 2007 00:57:17 +0200
Subject: [NTG-pdftex] gcc 4.1.2@ubuntu breaks pdftex
In-Reply-To: <68c491a60710051445t4be1a6fbta047b77fcdcfb4e1@mail.gmail.com>
References: <68c491a60710051152s13e121d0vee8c259290d29a25@mail.gmail.com>
	<68c491a60710051313v6bbddc05lb97b28c66044eaf6@mail.gmail.com>
	<18182.44690.493618.20736@zaphod.ms25.net>
	<68c491a60710051445t4be1a6fbta047b77fcdcfb4e1@mail.gmail.com>
Message-ID: <18182.49485.661036.693565@zaphod.ms25.net>

"Martin Schr?der" <martin at oneiros.de> wrote:

 > Please try pdftex-trunk from svn.

I compiled pdftex:

$ ./build.sh
$ build/texk/web2c/pdftex --version
pdfTeX 3.141592-1.50.0-alpha-20070706-2.2 (Web2C 7.5.6)

$ svn update
$ ./build.sh
$ build/texk/web2c/pdftex --version
pdfTeX 3.141592-1.50.0-alpha-20070917-2.2 (Web2C 7.5.6)

At least it compiles fine, for further tests I have to provide a test
environment which doesn't interfere with the TeXLive stuff I have
installed.  But this will definitely not happen today. 

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From martin at oneiros.de  Sat Oct  6 02:37:07 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sat, 6 Oct 2007 02:37:07 +0200
Subject: [NTG-pdftex] gcc 4.1.2@ubuntu breaks pdftex
In-Reply-To: <4706B301.1040703@elvenkind.com>
References: <68c491a60710051152s13e121d0vee8c259290d29a25@mail.gmail.com>
	<68c491a60710051313v6bbddc05lb97b28c66044eaf6@mail.gmail.com>
	<18182.44690.493618.20736@zaphod.ms25.net>
	<68c491a60710051445t4be1a6fbta047b77fcdcfb4e1@mail.gmail.com>
	<4706B301.1040703@elvenkind.com>
Message-ID: <68c491a60710051737s547e615dmec5cc726495cc760@mail.gmail.com>

2007/10/5, Taco Hoekwater <taco at elvenkind.com>:
> I've narrowed it down to pdftoepdf.cc: it is fine without -O, and
> broken with (just -O is enough to trigger the error, no need for -O2)

Using valgrind I narrowed it down to line 167:
    p->doc = new p_PDFDoc(docName);

With -O line 168 makes valgrind scream:
)==26759== Conditional jump or move depends on uninitialised value(s)
==26759==    at 0x49DE04: read_pdf_info (pdftoepdf.cc:168)
==26759==    by 0x49BF2C: readimage (writeimg.c:295)
==26759==    by 0x474841: scanimage (pdftex3.c:3507)
==26759==    by 0x478308: doextension (pdftex3.c:4762)
==26759==    by 0x47618C: doextension (pdftex3.c:4105)
==26759==    by 0x479A7B: maincontrol (pdftex3.c:5738)
==26759==    by 0x4170A9: mainbody (pdftexini.c:5752)
==26759==    by 0x47FB3B: main (pdftexextra.c:353)

So either my C++ foo is not good enough or gcc is simply broken. I
suspect the later: -O shouldn't break the code.

Best
   Martin

From taco at elvenkind.com  Sat Oct  6 10:22:50 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 06 Oct 2007 10:22:50 +0200
Subject: [NTG-pdftex] gcc 4.1.2@ubuntu breaks pdftex
In-Reply-To: <68c491a60710051737s547e615dmec5cc726495cc760@mail.gmail.com>
References: <68c491a60710051152s13e121d0vee8c259290d29a25@mail.gmail.com>	
	<68c491a60710051313v6bbddc05lb97b28c66044eaf6@mail.gmail.com>	
	<18182.44690.493618.20736@zaphod.ms25.net>	
	<68c491a60710051445t4be1a6fbta047b77fcdcfb4e1@mail.gmail.com>	
	<4706B301.1040703@elvenkind.com>
	<68c491a60710051737s547e615dmec5cc726495cc760@mail.gmail.com>
Message-ID: <470745DA.8010108@elvenkind.com>

Martin Schr?der wrote:
> 
> ... or gcc is simply broken. I
> suspect the later: -O shouldn't break the code.

I agree with that. But you probably have to find a workaround anyway,
because those gcc's are already out there and for many people,
upgrading gcc is out of the question :(



From kakuto at fsci.fuk.kindai.ac.jp  Sat Oct  6 11:23:27 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Sat, 06 Oct 2007 18:23:27 +0900
Subject: [NTG-pdftex] gcc 4.1.2 at ubuntu breaks pdftex
Message-ID: <200710060923.l969NSiR029561@jupiter.fsci.fuk.kindai.ac.jp>

Hi,

I'm using the following change on Windows because
pdftex crashes on Windows 2000 if I use non-argument
version of GlobalParams(). 
Probably it is not related to the present problem.

Best regards,
Akira

--- pdftoepdf.cc.orig	Mon Jul 09 19:10:07 2007
+++ pdftoepdf.cc	Sat Oct 06 18:08:37 2007
@@ -678,7 +678,15 @@
     float pdf_version_found, pdf_version_wanted;
     // initialize
     if (!isInit) {
+//
+// access violation on Windows 2000
+// in the case of GlobalParams();
+//
+#ifdef WIN32
+        globalParams = new GlobalParams(0);
+#else
         globalParams = new GlobalParams();
+#endif
         globalParams->setErrQuiet(gFalse);
         isInit = gTrue;
     }

From martin at oneiros.de  Sat Oct  6 15:35:51 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sat, 6 Oct 2007 15:35:51 +0200
Subject: [NTG-pdftex] gcc 4.1.2 at ubuntu breaks pdftex
In-Reply-To: <200710060923.l969NSiR029561@jupiter.fsci.fuk.kindai.ac.jp>
References: <200710060923.l969NSiR029561@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <68c491a60710060635v184ffd3t45fd27863983ee43@mail.gmail.com>

2007/10/6, Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp>:
> I'm using the following change on Windows because
> pdftex crashes on Windows 2000 if I use non-argument
> version of GlobalParams().

But our patched xpdf provides GlobalParams()...

Best
   Martin

From gnwiii at gmail.com  Sat Oct  6 16:11:02 2007
From: gnwiii at gmail.com (George N. White III)
Date: Sat, 6 Oct 2007 11:11:02 -0300
Subject: [NTG-pdftex] gcc 4.1.2@ubuntu breaks pdftex
In-Reply-To: <470745DA.8010108@elvenkind.com>
References: <68c491a60710051152s13e121d0vee8c259290d29a25@mail.gmail.com>
	<68c491a60710051313v6bbddc05lb97b28c66044eaf6@mail.gmail.com>
	<18182.44690.493618.20736@zaphod.ms25.net>
	<68c491a60710051445t4be1a6fbta047b77fcdcfb4e1@mail.gmail.com>
	<4706B301.1040703@elvenkind.com>
	<68c491a60710051737s547e615dmec5cc726495cc760@mail.gmail.com>
	<470745DA.8010108@elvenkind.com>
Message-ID: <22af238a0710060711l5054f90bkb2fc5034115a18b3@mail.gmail.com>

On 10/6/07, Taco Hoekwater <taco at elvenkind.com> wrote:

> Martin Schr?der wrote:
> >
> > ... or gcc is simply broken. I
> > suspect the later: -O shouldn't break the code.
>
> I agree with that. But you probably have to find a workaround anyway,
> because those gcc's are already out there and for many people,
> upgrading gcc is out of the question :(

You already have a workaround: different compiler flags for one file.

Why not  file a bug report against gcc and wait a while to see if clarity
emerges?  It may be a plain bug in gcc so the code can be left  as is
and the flags changed until most people have the fixed  version, or a
case where the optimizer sometimes makes bad choices and you are
better off changing the code to circumvent the issue.

-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From kakuto at fsci.fuk.kindai.ac.jp  Sun Oct  7 01:43:02 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Sun, 07 Oct 2007 08:43:02 +0900
Subject: [NTG-pdftex] gcc 4.1.2 at ubuntu breaks pdftex
In-Reply-To: Your message of "Sat, 6 Oct 2007 15:35:51 +0200"
References: <68c491a60710060635v184ffd3t45fd27863983ee43@mail.gmail.com>
Message-ID: <200710062343.l96Nh376002313@jupiter.fsci.fuk.kindai.ac.jp>

Hi Martin,

> 2007/10/6, Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp>:
> > I'm using the following change on Windows because
> > pdftex crashes on Windows 2000 if I use non-argument
> > version of GlobalParams().
> 
> But our patched xpdf provides GlobalParams()...

I know that. If GlobalParams() is not provided, a compiler error occurs.
The compiling is fine, but the provided one causes the access violation
on Windows 2000 in the case of pdf inclusion. I don't know why.

Best regards,
Akira

From martin at oneiros.de  Mon Oct  8 07:36:10 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Mon, 8 Oct 2007 07:36:10 +0200
Subject: [NTG-pdftex] gcc 4.1.2@ubuntu breaks pdftex
In-Reply-To: <22af238a0710060711l5054f90bkb2fc5034115a18b3@mail.gmail.com>
References: <68c491a60710051152s13e121d0vee8c259290d29a25@mail.gmail.com>
	<68c491a60710051313v6bbddc05lb97b28c66044eaf6@mail.gmail.com>
	<18182.44690.493618.20736@zaphod.ms25.net>
	<68c491a60710051445t4be1a6fbta047b77fcdcfb4e1@mail.gmail.com>
	<4706B301.1040703@elvenkind.com>
	<68c491a60710051737s547e615dmec5cc726495cc760@mail.gmail.com>
	<470745DA.8010108@elvenkind.com>
	<22af238a0710060711l5054f90bkb2fc5034115a18b3@mail.gmail.com>
Message-ID: <68c491a60710072236k45837ad6u34f0f53afb6d461c@mail.gmail.com>

2007/10/6, George N. White III <gnwiii at gmail.com>:
> Why not  file a bug report against gcc and wait a while to see if clarity
> emerges?  It may be a plain bug in gcc so the code can be left  as is
> and the flags changed until most people have the fixed  version, or a
> case where the optimizer sometimes makes bad choices and you are
> better off changing the code to circumvent the issue.

I did better: I asked the gcc experts for help -- and got it.
See http://gcc.gnu.org/ml/gcc-help/2007-10/msg00076.html and the followups.

Best
   Martin

From gnwiii at gmail.com  Mon Oct  8 15:48:23 2007
From: gnwiii at gmail.com (George N. White III)
Date: Mon, 8 Oct 2007 10:48:23 -0300
Subject: [NTG-pdftex] gcc 4.1.2@ubuntu breaks pdftex
In-Reply-To: <68c491a60710072236k45837ad6u34f0f53afb6d461c@mail.gmail.com>
References: <68c491a60710051152s13e121d0vee8c259290d29a25@mail.gmail.com>
	<68c491a60710051313v6bbddc05lb97b28c66044eaf6@mail.gmail.com>
	<18182.44690.493618.20736@zaphod.ms25.net>
	<68c491a60710051445t4be1a6fbta047b77fcdcfb4e1@mail.gmail.com>
	<4706B301.1040703@elvenkind.com>
	<68c491a60710051737s547e615dmec5cc726495cc760@mail.gmail.com>
	<470745DA.8010108@elvenkind.com>
	<22af238a0710060711l5054f90bkb2fc5034115a18b3@mail.gmail.com>
	<68c491a60710072236k45837ad6u34f0f53afb6d461c@mail.gmail.com>
Message-ID: <22af238a0710080648sea1aaci369506aa51eb71b0@mail.gmail.com>

On 10/8/07, Martin Schr?der <martin at oneiros.de> wrote:

> 2007/10/6, George N. White III <gnwiii at gmail.com>:

> > Why not  file a bug report against gcc and wait a while to see if clarity
> > emerges?  It may be a plain bug in gcc so the code can be left  as is
> > and the flags changed until most people have the fixed  version, or a
> > case where the optimizer sometimes makes bad choices and you are
> > better off changing the code to circumvent the issue.
>
> I did better: I asked the gcc experts for help -- and got it.
> See http://gcc.gnu.org/ml/gcc-help/2007-10/msg00076.html and the followups

Christoph Bartoschek deserves our thanks.  I can confirm that building
pdftoeps.o with
-DDISABLE_OUTLINE fixes the pdf file inclusion error.

The problem is quite easy to see once you know where to look -- for the
record, the problem is the build system which allowed PDFDoc.h to be
compiled with different macro definitions.  In a build log, compare the
definitions used to build in libs/xpdf/xpdf with those used for pdftoepdf.cc.

The #defines in question are set in src/libs/xpdf/xpdf/Makefile.in, so there
is no easy way for autoconf in pdftexdir to find them.   You could just copy
the flags from libs/xpdf/xpdf/Makefile.in to texk/web2c/pdftexdif/Makefile.in
or add the corresponding #defines to pdflib.h.  Since the latter has to be
changed when xpdf changes and the #define is for PDFdoc.h, adding a
#define to pdflib.h seems a more logical place, but just copying the
flags make differences visible in the build log.

It would be helpful for posterity to add comments to pdlib.h where #defines
are needed in order to use the xpdf header files.

-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From dak at gnu.org  Wed Oct 10 09:43:28 2007
From: dak at gnu.org (David Kastrup)
Date: Wed, 10 Oct 2007 09:43:28 +0200
Subject: [NTG-pdftex] increasing max_strings
Message-ID: <858x6bxvmn.fsf@lola.goethe.zz>


Hi,

because of exceeded TeX capacity, I increased the following limit in
the source:

svn diff
Index: source/src/texk/web2c/tex.ch
===================================================================
--- source/src/texk/web2c/tex.ch        (Revision 241)
+++ source/src/texk/web2c/tex.ch        (Arbeitskopie)
@@ -200,7 +200,7 @@
 @y
 @d file_name_size == maxint
 @d ssup_error_line = 255
- at d ssup_max_strings == 262143
+ at d ssup_max_strings == 500000
 {Larger values than 65536 cause the arrays consume much more memory.}
 @d ssup_trie_opcode == 65535
 @d ssup_trie_size == @"3FFFFF

Does anybody know offhand whether I can expect bad effects?  After
all, why would the ssup-setting not be the maximum possible value?
And if there was a reason to set it that way, what other things would
I have to change?

I ask because the job that was now able to compile produced a corrupt
PDF.  There can be a number of other reasons for that, but since the
run is quite slow, I'd want to have this ruled out if possible.

Thanks,

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From taco at elvenkind.com  Wed Oct 10 12:58:42 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 10 Oct 2007 12:58:42 +0200
Subject: [NTG-pdftex] increasing max_strings
In-Reply-To: <858x6bxvmn.fsf@lola.goethe.zz>
References: <858x6bxvmn.fsf@lola.goethe.zz>
Message-ID: <470CB062.2060201@elvenkind.com>

David Kastrup wrote:
> 
> Does anybody know offhand whether I can expect bad effects?  After

I vaguely recall having problems when I tried to raise the value,
but I can't remember what was wrong, and I am not even sure anymore
if I crossed the 16-bit boundary, sorry.

The value 262143 is probably only a legacy of 36-bit words on the
PDP-10, but ...

Best wishes,
Taco

From dak at gnu.org  Wed Oct 10 14:05:11 2007
From: dak at gnu.org (David Kastrup)
Date: Wed, 10 Oct 2007 14:05:11 +0200
Subject: [NTG-pdftex] increasing max_strings
In-Reply-To: <470CB062.2060201@elvenkind.com> (Taco Hoekwater's message of
	"Wed\, 10 Oct 2007 12\:58\:42 +0200")
References: <858x6bxvmn.fsf@lola.goethe.zz> <470CB062.2060201@elvenkind.com>
Message-ID: <85r6k3uqdk.fsf@lola.goethe.zz>

Taco Hoekwater <taco at elvenkind.com> writes:

> David Kastrup wrote:
>>
>> Does anybody know offhand whether I can expect bad effects?  After
>
> I vaguely recall having problems when I tried to raise the value,
> but I can't remember what was wrong, and I am not even sure anymore
> if I crossed the 16-bit boundary, sorry.
>
> The value 262143 is probably only a legacy of 36-bit words on the
> PDP-10, but ...

I did some sort of cursory code review of pdftex.web and found nothing
obvious that would go wrong.

I am still somewhat queasy about this.

Perhaps Hans has some anecdotal evidence?  I could imagine that the
Pragma workflow will tend to favor PDFTeX compilations with large
limits.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From dak at gnu.org  Thu Oct 11 14:20:57 2007
From: dak at gnu.org (David Kastrup)
Date: Thu, 11 Oct 2007 14:20:57 +0200
Subject: [NTG-pdftex] Docs for xpdf libraries or poppler?
Message-ID: <86tzoxsuza.fsf@lola.quinscape.zz>


Having cloned the source repository of poppler, I could not fail to
notice that there is no API documentation that I could discern.

Now PDFTeX obviously _has_ been able to make sense of the libraries.
What source of information has been used for this?  Key point is that
I have to read some PDF files, process them at some rather shallow
object level, and write out the results.

So far, I have not even been able to figure out whether one of those
libs would be suitable for that.  Since PDFTeX does reading and
writing of PDF (also of included PDF files), some basic facility would
seem to be there?

-- 
David Kastrup

From noreply at sarovar.org  Thu Oct 11 14:34:19 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 11 Oct 2007 18:04:19 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-874 ] problem with writettf?
Message-ID: <E1IfxF5-0001IE-00@sarovar.org>

Bugs item #874, was opened at 2007-10-11 14:34
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=874&group_id=106

Category: Fonts
Group: v1.40.5
Status: Open
Resolution: None
Priority: 5
Submitted By: Stefan Becuwe (sbecuwe)
Assigned to: Hartmut Henkel (hhenkel)
Summary: problem with writettf?

Initial Comment:
Hello

I'm using texlive 2007 and encountered the following
problem with a truetype font:

[...]
{/usr/local/apps/texlive-2007/texmf/fonts/enc/ttf2pk/ba
se/T1-WGL4.enc}<Auto1-Light.ttfpdflatex:
../../../../texk/web2c/pdftexdir/writettf.c:848:
prepend_subset_tags: Assertion `index > 0 && index <
name_record_num && fd_cur->subset_tag != ((void *)0)'
failed.

Upgrading pdftex to 1.40.5 still produces the same
error.   

My previous texlive version (2005 or 2006) didn't have
that problem.  Replacing Auto1-Light.ttf by another
ttf, such as technicn.ttf, does not result in an error.
 So it's probably related to the Auto1-Light.ttf file
itself, but it seems the behaviour of pdftex has
changed over the years...

Best regards


Stefan

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=874&group_id=106

From martin at oneiros.de  Thu Oct 11 18:23:22 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Thu, 11 Oct 2007 18:23:22 +0200
Subject: [NTG-pdftex] Docs for xpdf libraries or poppler?
In-Reply-To: <86tzoxsuza.fsf@lola.quinscape.zz>
References: <86tzoxsuza.fsf@lola.quinscape.zz>
Message-ID: <68c491a60710110923s67cbe39eve9f85d781189f94f@mail.gmail.com>

2007/10/11, David Kastrup <dak at gnu.org>:
> Now PDFTeX obviously _has_ been able to make sense of the libraries.
> What source of information has been used for this?  Key point

General knowledge of how a pdf library works and of PDF. :-)

> I have to read some PDF files, process them at some rather shallow
> object level, and write out the results.

Have a look at pdftk + lua and iText.

Best
   Martin

From noreply at sarovar.org  Thu Oct 11 16:14:13 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 11 Oct 2007 19:44:13 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-874 ] problem with writettf?
Message-ID: <E1Ifynl-0003CX-00@sarovar.org>

Bugs item #874, was opened at 2007-10-11 14:34
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=874&group_id=106

Category: Fonts
Group: v1.40.5
Status: Open
Resolution: None
Priority: 5
Submitted By: Stefan Becuwe (sbecuwe)
Assigned to: Hartmut Henkel (hhenkel)
Summary: problem with writettf?

Initial Comment:
Hello

I'm using texlive 2007 and encountered the following
problem with a truetype font:

[...]
{/usr/local/apps/texlive-2007/texmf/fonts/enc/ttf2pk/ba
se/T1-WGL4.enc}<Auto1-Light.ttfpdflatex:
../../../../texk/web2c/pdftexdir/writettf.c:848:
prepend_subset_tags: Assertion `index > 0 && index <
name_record_num && fd_cur->subset_tag != ((void *)0)'
failed.

Upgrading pdftex to 1.40.5 still produces the same
error.   

My previous texlive version (2005 or 2006) didn't have
that problem.  Replacing Auto1-Light.ttf by another
ttf, such as technicn.ttf, does not result in an error.
 So it's probably related to the Auto1-Light.ttf file
itself, but it seems the behaviour of pdftex has
changed over the years...

Best regards


Stefan

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2007-10-11 16:14

Message:
Logged In: YES 
user_id=929

does it go away if you change in pdftex-1.40.5, writettf.c
in function prepend_subset_tag() the line assert(index >
0... into assert(index >= 0...?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=874&group_id=106

From noreply at sarovar.org  Thu Oct 11 19:21:01 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 11 Oct 2007 22:51:01 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-874 ] problem with writettf?
Message-ID: <E1Ig1iX-00039Z-00@sarovar.org>

Bugs item #874, was opened at 2007-10-11 14:34
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=874&group_id=106

Category: Fonts
Group: v1.40.5
Status: Open
Resolution: None
Priority: 5
Submitted By: Stefan Becuwe (sbecuwe)
Assigned to: Hartmut Henkel (hhenkel)
Summary: problem with writettf?

Initial Comment:
Hello

I'm using texlive 2007 and encountered the following
problem with a truetype font:

[...]
{/usr/local/apps/texlive-2007/texmf/fonts/enc/ttf2pk/ba
se/T1-WGL4.enc}<Auto1-Light.ttfpdflatex:
../../../../texk/web2c/pdftexdir/writettf.c:848:
prepend_subset_tags: Assertion `index > 0 && index <
name_record_num && fd_cur->subset_tag != ((void *)0)'
failed.

Upgrading pdftex to 1.40.5 still produces the same
error.   

My previous texlive version (2005 or 2006) didn't have
that problem.  Replacing Auto1-Light.ttf by another
ttf, such as technicn.ttf, does not result in an error.
 So it's probably related to the Auto1-Light.ttf file
itself, but it seems the behaviour of pdftex has
changed over the years...

Best regards


Stefan

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-10-11 19:21

Message:
Logged In: YES 
user_id=421

Can you create a minimal testcase and attach it here
together with the font? systems/mkjobtexmf from CTAN might
be helpful.

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2007-10-11 16:14

Message:
Logged In: YES 
user_id=929

does it go away if you change in pdftex-1.40.5, writettf.c
in function prepend_subset_tag() the line assert(index >
0... into assert(index >= 0...?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=874&group_id=106

From dak at gnu.org  Thu Oct 11 22:55:53 2007
From: dak at gnu.org (David Kastrup)
Date: Thu, 11 Oct 2007 22:55:53 +0200
Subject: [NTG-pdftex] Docs for xpdf libraries or poppler?
In-Reply-To: <68c491a60710110923s67cbe39eve9f85d781189f94f@mail.gmail.com>
	("Martin =?iso-8859-1?Q?Schr=F6der=22's?= message of "Thu\, 11 Oct 2007
	18\:23\:22 +0200")
References: <86tzoxsuza.fsf@lola.quinscape.zz>
	<68c491a60710110923s67cbe39eve9f85d781189f94f@mail.gmail.com>
Message-ID: <85fy0hs752.fsf@lola.goethe.zz>

"Martin Schr?der" <martin at oneiros.de> writes:

> 2007/10/11, David Kastrup <dak at gnu.org>:
>> Now PDFTeX obviously _has_ been able to make sense of the libraries.
>> What source of information has been used for this?  Key point
>
> General knowledge of how a pdf library works and of PDF. :-)
>
>> I have to read some PDF files, process them at some rather shallow
>> object level, and write out the results.
>
> Have a look at pdftk + lua and iText.

What causes lua to be in this list?

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From martin at oneiros.de  Thu Oct 11 23:31:33 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Thu, 11 Oct 2007 23:31:33 +0200
Subject: [NTG-pdftex] Docs for xpdf libraries or poppler?
In-Reply-To: <85fy0hs752.fsf@lola.goethe.zz>
References: <86tzoxsuza.fsf@lola.quinscape.zz>
	<68c491a60710110923s67cbe39eve9f85d781189f94f@mail.gmail.com>
	<85fy0hs752.fsf@lola.goethe.zz>
Message-ID: <68c491a60710111431l6ce51f0s8ec5d3c2e1183820@mail.gmail.com>

2007/10/11, David Kastrup <dak at gnu.org>:
> "Martin Schr?der" <martin at oneiros.de> writes:
> > Have a look at pdftk + lua and iText.
>
> What causes lua to be in this list?

Replace it with your favorite scripting language. :-)

I think you can do many simple things with
   1. pdftk uncompress
   2. script manipulating the uncompressed pdf
   3. pdftk compress

I know that e.g. changig the colour (space) is possible this way.

Best
   Martin

From noreply at sarovar.org  Fri Oct 12 09:54:58 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 12 Oct 2007 13:24:58 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-874 ] problem with writettf?
Message-ID: <E1IgFMI-00072J-00@sarovar.org>

Bugs item #874, was opened at 2007-10-11 14:34
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=874&group_id=106

Category: Fonts
Group: v1.40.5
Status: Open
Resolution: None
Priority: 5
Submitted By: Stefan Becuwe (sbecuwe)
Assigned to: Hartmut Henkel (hhenkel)
Summary: problem with writettf?

Initial Comment:
Hello

I'm using texlive 2007 and encountered the following
problem with a truetype font:

[...]
{/usr/local/apps/texlive-2007/texmf/fonts/enc/ttf2pk/ba
se/T1-WGL4.enc}<Auto1-Light.ttfpdflatex:
../../../../texk/web2c/pdftexdir/writettf.c:848:
prepend_subset_tags: Assertion `index > 0 && index <
name_record_num && fd_cur->subset_tag != ((void *)0)'
failed.

Upgrading pdftex to 1.40.5 still produces the same
error.   

My previous texlive version (2005 or 2006) didn't have
that problem.  Replacing Auto1-Light.ttf by another
ttf, such as technicn.ttf, does not result in an error.
 So it's probably related to the Auto1-Light.ttf file
itself, but it seems the behaviour of pdftex has
changed over the years...

Best regards


Stefan

----------------------------------------------------------------------

>Comment By: Stefan Becuwe (sbecuwe)
Date: 2007-10-12 09:54

Message:
Logged In: YES 
user_id=4723

Changing index > 0  into  index >= 0  did solve the problem.
 I have attached anyway the minimal testcase (generated
after the suggested patch).  Thanks for solving this problem!


Stefan

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-10-11 19:21

Message:
Logged In: YES 
user_id=421

Can you create a minimal testcase and attach it here
together with the font? systems/mkjobtexmf from CTAN might
be helpful.

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2007-10-11 16:14

Message:
Logged In: YES 
user_id=929

does it go away if you change in pdftex-1.40.5, writettf.c
in function prepend_subset_tag() the line assert(index >
0... into assert(index >= 0...?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=874&group_id=106

From dak at gnu.org  Fri Oct 12 12:55:51 2007
From: dak at gnu.org (David Kastrup)
Date: Fri, 12 Oct 2007 12:55:51 +0200
Subject: [NTG-pdftex] [\immediate]\pdfximage
Message-ID: <86zlyorb9v.fsf@lola.quinscape.zz>


Hi,

in an application of ours, we have the situation that quite a number
of graphics files are checked for their size and stuff, and then a
decision is made whether to use them in the resulting PDF.

If we do the checks using \pdfximage, the resulting file handle (and
internal data structures) are kept open until the end of the TeX run,
waiting to see whether actually a \pdfrefximage will ever occur.
Bad.  We actually run out of file handles on some platforms because of
that.

If we do the checks using \immediate\pdfximage, then the graphics file
will be written out to the PDF even though it will never get displayed
or used.  Since probably only one of five files actually _is_ supposed
to be printed, this will blow up the PDF completely unnecessarily.

Any idea how to deal with this?  How about something like
[\immediate]\pdfcloseximage which makes PDFTeX forget all about a
previously included file, freeing the resources?

Or is there something I don't understand?

-- 
David Kastrup

From noreply at sarovar.org  Fri Oct 12 13:31:31 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 12 Oct 2007 17:01:31 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-874 ] problem with writettf?
Message-ID: <E1IgIjr-0005IH-00@sarovar.org>

Bugs item #874, was opened at 2007-10-11 14:34
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=874&group_id=106

Category: Fonts
Group: v1.40.5
Status: Open
Resolution: None
Priority: 5
Submitted By: Stefan Becuwe (sbecuwe)
Assigned to: Hartmut Henkel (hhenkel)
Summary: problem with writettf?

Initial Comment:
Hello

I'm using texlive 2007 and encountered the following
problem with a truetype font:

[...]
{/usr/local/apps/texlive-2007/texmf/fonts/enc/ttf2pk/ba
se/T1-WGL4.enc}<Auto1-Light.ttfpdflatex:
../../../../texk/web2c/pdftexdir/writettf.c:848:
prepend_subset_tags: Assertion `index > 0 && index <
name_record_num && fd_cur->subset_tag != ((void *)0)'
failed.

Upgrading pdftex to 1.40.5 still produces the same
error.   

My previous texlive version (2005 or 2006) didn't have
that problem.  Replacing Auto1-Light.ttf by another
ttf, such as technicn.ttf, does not result in an error.
 So it's probably related to the Auto1-Light.ttf file
itself, but it seems the behaviour of pdftex has
changed over the years...

Best regards


Stefan

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2007-10-12 13:31

Message:
Logged In: YES 
user_id=929

thanks a lot for the test, but the fact that it works after
the patch suggests that actually your TT font is broken (not
pdftex) -- which might even generate broken or non-standard
PDF files, beware! Seems the index = 0 should never happen
with a normal font. So it would help a lot to have your font
for inspection.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Stefan Becuwe (sbecuwe)
Date: 2007-10-12 09:54

Message:
Logged In: YES 
user_id=4723

Changing index > 0  into  index >= 0  did solve the problem.
 I have attached anyway the minimal testcase (generated
after the suggested patch).  Thanks for solving this problem!


Stefan

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-10-11 19:21

Message:
Logged In: YES 
user_id=421

Can you create a minimal testcase and attach it here
together with the font? systems/mkjobtexmf from CTAN might
be helpful.

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2007-10-11 16:14

Message:
Logged In: YES 
user_id=929

does it go away if you change in pdftex-1.40.5, writettf.c
in function prepend_subset_tag() the line assert(index >
0... into assert(index >= 0...?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=874&group_id=106

From noreply at sarovar.org  Fri Oct 12 13:36:35 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 12 Oct 2007 17:06:35 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-874 ] problem with writettf?
Message-ID: <E1IgIol-0005lb-00@sarovar.org>

Bugs item #874, was opened at 2007-10-11 14:34
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=874&group_id=106

Category: Fonts
Group: v1.40.5
Status: Open
Resolution: None
Priority: 5
Submitted By: Stefan Becuwe (sbecuwe)
Assigned to: Hartmut Henkel (hhenkel)
Summary: problem with writettf?

Initial Comment:
Hello

I'm using texlive 2007 and encountered the following
problem with a truetype font:

[...]
{/usr/local/apps/texlive-2007/texmf/fonts/enc/ttf2pk/ba
se/T1-WGL4.enc}<Auto1-Light.ttfpdflatex:
../../../../texk/web2c/pdftexdir/writettf.c:848:
prepend_subset_tags: Assertion `index > 0 && index <
name_record_num && fd_cur->subset_tag != ((void *)0)'
failed.

Upgrading pdftex to 1.40.5 still produces the same
error.   

My previous texlive version (2005 or 2006) didn't have
that problem.  Replacing Auto1-Light.ttf by another
ttf, such as technicn.ttf, does not result in an error.
 So it's probably related to the Auto1-Light.ttf file
itself, but it seems the behaviour of pdftex has
changed over the years...

Best regards


Stefan

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2007-10-12 13:36

Message:
Logged In: YES 
user_id=929

ah the font file is in your testcase tar, thanks!

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2007-10-12 13:31

Message:
Logged In: YES 
user_id=929

thanks a lot for the test, but the fact that it works after
the patch suggests that actually your TT font is broken (not
pdftex) -- which might even generate broken or non-standard
PDF files, beware! Seems the index = 0 should never happen
with a normal font. So it would help a lot to have your font
for inspection.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Stefan Becuwe (sbecuwe)
Date: 2007-10-12 09:54

Message:
Logged In: YES 
user_id=4723

Changing index > 0  into  index >= 0  did solve the problem.
 I have attached anyway the minimal testcase (generated
after the suggested patch).  Thanks for solving this problem!


Stefan

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-10-11 19:21

Message:
Logged In: YES 
user_id=421

Can you create a minimal testcase and attach it here
together with the font? systems/mkjobtexmf from CTAN might
be helpful.

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2007-10-11 16:14

Message:
Logged In: YES 
user_id=929

does it go away if you change in pdftex-1.40.5, writettf.c
in function prepend_subset_tag() the line assert(index >
0... into assert(index >= 0...?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=874&group_id=106

From pragma at wxs.nl  Fri Oct 12 14:03:06 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 12 Oct 2007 14:03:06 +0200
Subject: [NTG-pdftex] [\immediate]\pdfximage
In-Reply-To: <86zlyorb9v.fsf@lola.quinscape.zz>
References: <86zlyorb9v.fsf@lola.quinscape.zz>
Message-ID: <470F627A.5050308@wxs.nl>

David Kastrup wrote:
> Hi,
> 
> in an application of ours, we have the situation that quite a number
> of graphics files are checked for their size and stuff, and then a
> decision is made whether to use them in the resulting PDF.
> 
> If we do the checks using \pdfximage, the resulting file handle (and
> internal data structures) are kept open until the end of the TeX run,
> waiting to see whether actually a \pdfrefximage will ever occur.
> Bad.  We actually run out of file handles on some platforms because of
> that.
> 
> If we do the checks using \immediate\pdfximage, then the graphics file
> will be written out to the PDF even though it will never get displayed
> or used.  Since probably only one of five files actually _is_ supposed
> to be printed, this will blow up the PDF completely unnecessarily.
> 
> Any idea how to deal with this?  How about something like
> [\immediate]\pdfcloseximage which makes PDFTeX forget all about a
> previously included file, freeing the resources?
> 
> Or is there something I don't understand?

as martin said ... just script a solution .. running pdfinfo and 
collecting the info of 10.000 pdf files is not much slower than letting 
pdftex open them, close them, clean up mem etc etc

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From noreply at sarovar.org  Fri Oct 12 20:59:33 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sat, 13 Oct 2007 00:29:33 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-874 ] problem with writettf?
Message-ID: <E1IgPjR-0002ct-00@sarovar.org>

Bugs item #874, was opened at 2007-10-11 14:34
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=874&group_id=106

Category: Fonts
Group: v1.40.5
Status: Open
Resolution: None
Priority: 5
Submitted By: Stefan Becuwe (sbecuwe)
Assigned to: Hartmut Henkel (hhenkel)
Summary: problem with writettf?

Initial Comment:
Hello

I'm using texlive 2007 and encountered the following
problem with a truetype font:

[...]
{/usr/local/apps/texlive-2007/texmf/fonts/enc/ttf2pk/ba
se/T1-WGL4.enc}<Auto1-Light.ttfpdflatex:
../../../../texk/web2c/pdftexdir/writettf.c:848:
prepend_subset_tags: Assertion `index > 0 && index <
name_record_num && fd_cur->subset_tag != ((void *)0)'
failed.

Upgrading pdftex to 1.40.5 still produces the same
error.   

My previous texlive version (2005 or 2006) didn't have
that problem.  Replacing Auto1-Light.ttf by another
ttf, such as technicn.ttf, does not result in an error.
 So it's probably related to the Auto1-Light.ttf file
itself, but it seems the behaviour of pdftex has
changed over the years...

Best regards


Stefan

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2007-10-12 20:59

Message:
Logged In: YES 
user_id=929

seems in the TTF 'name' table normally the name_id is the
same number as the running entry index i. Then everything
runs fine. But with the Auto1-Light font that's not the
case: at i = 0 there is name_id = 1. So AFAICS the font file
might be a little unusual but it's ok, and pdftex/luatex
should be patched.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2007-10-12 13:36

Message:
Logged In: YES 
user_id=929

ah the font file is in your testcase tar, thanks!

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2007-10-12 13:31

Message:
Logged In: YES 
user_id=929

thanks a lot for the test, but the fact that it works after
the patch suggests that actually your TT font is broken (not
pdftex) -- which might even generate broken or non-standard
PDF files, beware! Seems the index = 0 should never happen
with a normal font. So it would help a lot to have your font
for inspection.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Stefan Becuwe (sbecuwe)
Date: 2007-10-12 09:54

Message:
Logged In: YES 
user_id=4723

Changing index > 0  into  index >= 0  did solve the problem.
 I have attached anyway the minimal testcase (generated
after the suggested patch).  Thanks for solving this problem!


Stefan

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-10-11 19:21

Message:
Logged In: YES 
user_id=421

Can you create a minimal testcase and attach it here
together with the font? systems/mkjobtexmf from CTAN might
be helpful.

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2007-10-11 16:14

Message:
Logged In: YES 
user_id=929

does it go away if you change in pdftex-1.40.5, writettf.c
in function prepend_subset_tag() the line assert(index >
0... into assert(index >= 0...?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=874&group_id=106

From noreply at sarovar.org  Mon Oct 15 09:21:04 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 15 Oct 2007 12:51:04 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-871 ] Synchronization: pdfsync.sty
	embedded (1)
Message-ID: <E1IhKG8-0000b8-00@sarovar.org>

Patches item #871, was opened at 2007-09-30 10:56
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=871&group_id=106

Category: User interaction
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Jerome LAURENS (jlaurens)
Assigned to: Martin Schr?der (oneiros)
Summary: Synchronization: pdfsync.sty embedded (1)

Initial Comment:
To the administrator, please remove the preceding patch submission

The purpose is to implement some extensions very useful for 
synchronization, both forwards and backwards. Synchronization is the 
ability for a text editor and a pdf viewer to work together, displaying the 
same thing at the same time. For example, a text editor can ask a pdf 
viewer to display and outline the character in the output corresponding to 
the character under the cursor.
Attached is a zip file containing diff against version 1.40.4, explanations 
and demonstrations in
synchronize.readme/synchronize+frames.pdf

PS: I have problems with my connection

----------------------------------------------------------------------

>Comment By: Jerome LAURENS (jlaurens)
Date: 2007-10-15 09:21

Message:
Logged In: YES 
user_id=4698

Synchronize3.zip is available.
It just adds a flag in the .sync file to indicate whether dvi or pdf mode was used.
So far I have found only one problem, using dvips or dvipdf with a concrete 
offset (-x and -y options) will break the synchronization. If such a filter is gentle 
enough to indicate that it used a custom offset, then viewers can take this into 
account and the synchronization is not broken. Viewers will check the above 
mentionned flag to look for customized offset.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-10-01 00:00

Message:
Logged In: YES 
user_id=421

You didn't attach Synchronize 2.zip yet...

----------------------------------------------------------------------

Comment By: Jerome LAURENS (jlaurens)
Date: 2007-09-30 23:10

Message:
Logged In: YES 
user_id=4698

Synchronize 2.zip is a version extending the previous one. Now synchronization 
works the same for both dvi and pdf output modes.


----------------------------------------------------------------------

Comment By: Jerome LAURENS (jlaurens)
Date: 2007-09-30 23:09

Message:
Logged In: YES 
user_id=4698

Synchronize 2.zip is a version extending the previous one. Now synchronization 
works the same for both dvi and pdf output modes.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=871&group_id=106

From noreply at sarovar.org  Mon Oct 15 13:35:36 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 15 Oct 2007 17:05:36 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-876 ] I forgot...
Message-ID: <E1IhOES-0006a7-00@sarovar.org>

Patches item #876, was opened at 2007-10-15 13:35
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=876&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Jerome LAURENS (jlaurens)
Assigned to: Nobody (None)
Summary: I forgot...

Initial Comment:
In my previous submission concerning breaking synchronization when 
using for example "dvipdfm -x ... -y ...", I forgot to mention that dvi-
>pdf filters need not really be synchronization aware. On mac os x, 
TeXShop and iTeXMac2 frontends both use (shell script) wrappers to 
launch the above filters, such that only the wrappers need to be 
synchronization aware. At least on Mac OS X, there is no need to patch 
the various dvipdf like tools, only the wrappers, and this is the 
responsibility of the frontends developers who want to fully support 
synchronization.


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=876&group_id=106

From dak at gnu.org  Mon Oct 15 16:26:38 2007
From: dak at gnu.org (David Kastrup)
Date: Mon, 15 Oct 2007 16:26:38 +0200
Subject: [NTG-pdftex] Anybody success compiling the current PDFTeX source?
Message-ID: <86abqkmp29.fsf@lola.quinscape.zz>


I drop out after

cd source;./build.sh

with

gcc -DHAVE_CONFIG_H  -I. -I../../../src/texk/web2c -I.. -I../../../src/texk/web2c/..  -I../../libs/obsdcompat -I../../libs/obsdcompat/.. -I../../../src/texk/web2c/../../libs/obsdcompat -I../../../src/texk/web2c/../../libs/obsdcompat/.. -g -O2  -c pdftexextra.c -o pdftexextra.o
pdftexextra.c: In function ?maininit?:
pdftexextra.c:190: warning: assignment from incompatible pointer type
pdftexextra.c:191: warning: assignment from incompatible pointer type
cd pdftexdir && make -w CC='gcc' CFLAGS='-g -O2 ' LDFLAGS=''  libpdf.a
make[2]: Entering directory `/rep/pdftex/pdftex/source/build/texk/web2c/pdftexdir'
make[2]: *** No rule to make target `../../../../src/texk/web2c/pdftexdir/../../web2c/c-auto.h', needed by `epdf.o'.  Stop.
make[2]: Leaving directory `/rep/pdftex/pdftex/source/build/texk/web2c/pdftexdir'
make[1]: *** [pdftexdir/libpdf.a] Error 2
make[1]: Leaving directory `/rep/pdftex/pdftex/source/build/texk/web2c'
make: *** [pdftexbin] Error 2


-- 
David Kastrup

From martin at oneiros.de  Mon Oct 15 22:05:12 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Mon, 15 Oct 2007 22:05:12 +0200
Subject: [NTG-pdftex] Anybody success compiling the current PDFTeX
	source?
In-Reply-To: <86abqkmp29.fsf@lola.quinscape.zz>
References: <86abqkmp29.fsf@lola.quinscape.zz>
Message-ID: <68c491a60710151305r4a1b4f98qb9f04de339acf103@mail.gmail.com>

Sorry; this should be fixed in r251.

Best
   Martin

From noreply at sarovar.org  Tue Oct 16 10:44:10 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 16 Oct 2007 14:14:10 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-876 ] I forgot...
Message-ID: <E1Ihi26-0007nc-00@sarovar.org>

Patches item #876, was opened at 2007-10-15 13:35
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=876&group_id=106

Category: None
Group: None
>Status: Deleted
Resolution: None
Priority: 5
Submitted By: Jerome LAURENS (jlaurens)
Assigned to: Nobody (None)
Summary: I forgot...

Initial Comment:
In my previous submission concerning breaking synchronization when 
using for example "dvipdfm -x ... -y ...", I forgot to mention that dvi-
>pdf filters need not really be synchronization aware. On mac os x, 
TeXShop and iTeXMac2 frontends both use (shell script) wrappers to 
launch the above filters, such that only the wrappers need to be 
synchronization aware. At least on Mac OS X, there is no need to patch 
the various dvipdf like tools, only the wrappers, and this is the 
responsibility of the frontends developers who want to fully support 
synchronization.


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=876&group_id=106

From dak at gnu.org  Wed Oct 17 13:48:38 2007
From: dak at gnu.org (David Kastrup)
Date: Wed, 17 Oct 2007 13:48:38 +0200
Subject: [NTG-pdftex] Is there a limit to the size of PDF files?
Message-ID: <86d4vehsh5.fsf@lola.quinscape.zz>


Could it be that PDFTeX (as in TeXlive2007 for win32) aborts with an
obscure error message when the size of the generated PDF file exceeds
2GB?  If yes, is there a chance to work around this in some way?

Thanks,

-- 
David Kastrup

From kakuto at fsci.fuk.kindai.ac.jp  Wed Oct 17 15:41:00 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Wed, 17 Oct 2007 22:41:00 +0900
Subject: [NTG-pdftex]  Is there a limit to the size of PDF files?
Message-ID: <200710171341.l9HDf15T025463@jupiter.fsci.fuk.kindai.ac.jp>

> Could it be that PDFTeX (as in TeXlive2007 for win32) aborts with an
> obscure error message when the size of the generated PDF file exceeds
> 2GB?

The prototype of fseek() in my old MSVC++ reads
int fseek(FILE *stream, long offset, int origin)
and long (the same as int) is signed 32 bit integer.
Therefore I think 2GB is the limit in the TL win32 pdfTeX.

> If yes, is there a chance to work around this in some way?

I cannot find a workaround.

Best regards,
Akira

From dak at gnu.org  Wed Oct 17 15:49:01 2007
From: dak at gnu.org (David Kastrup)
Date: Wed, 17 Oct 2007 15:49:01 +0200
Subject: [NTG-pdftex] Is there a limit to the size of PDF files?
In-Reply-To: <200710171341.l9HDf15T025463@jupiter.fsci.fuk.kindai.ac.jp>
	(Akira Kakuto's message of "Wed\, 17 Oct 2007 22\:41\:00 +0900")
References: <200710171341.l9HDf15T025463@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <86wstlhmwi.fsf@lola.quinscape.zz>

Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp> writes:

>> Could it be that PDFTeX (as in TeXlive2007 for win32) aborts with an
>> obscure error message when the size of the generated PDF file exceeds
>> 2GB?
>
> The prototype of fseek() in my old MSVC++ reads
> int fseek(FILE *stream, long offset, int origin)
> and long (the same as int) is signed 32 bit integer.
> Therefore I think 2GB is the limit in the TL win32 pdfTeX.
>
>> If yes, is there a chance to work around this in some way?
>
> I cannot find a workaround.

In Linux/glibc, I find

	The fseeko() and ftello() functions are identical to fseek()
	and  ftell() (see fseek(3)),  respectively, except  that the
	offset argument of fseeko() and the return value of ftello()
	is of type off_t instead of long.

	On many architectures both  off_t and long are 32-bit types,
	but compilation with
		#define _FILE_OFFSET_BITS 64
	will turn off_t into a 64-bit type.

Is there something like this to be had in MSVC++?  Is MSVC++
obligatory for compiling PDFTeX in win32?

-- 
David Kastrup

From martin at oneiros.de  Wed Oct 17 15:56:56 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 17 Oct 2007 15:56:56 +0200
Subject: [NTG-pdftex] Is there a limit to the size of PDF files?
In-Reply-To: <86wstlhmwi.fsf@lola.quinscape.zz>
References: <200710171341.l9HDf15T025463@jupiter.fsci.fuk.kindai.ac.jp>
	<86wstlhmwi.fsf@lola.quinscape.zz>
Message-ID: <68c491a60710170656j47841120p3a13190d68110e49@mail.gmail.com>

2007/10/17, David Kastrup <dak at gnu.org>:
> Is there something like this to be had in MSVC++?  Is MSVC++
> obligatory for compiling PDFTeX in win32?

I don't know about win32, but the size of PDFs is limited to 10GiB.

If we can't easily fix the 2G limit on win32, we should at least fix
the error message.

Best
   Martin

From taco at elvenkind.com  Wed Oct 17 15:57:35 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 17 Oct 2007 15:57:35 +0200
Subject: [NTG-pdftex] Is there a limit to the size of PDF files?
In-Reply-To: <86wstlhmwi.fsf@lola.quinscape.zz>
References: <200710171341.l9HDf15T025463@jupiter.fsci.fuk.kindai.ac.jp>
	<86wstlhmwi.fsf@lola.quinscape.zz>
Message-ID: <471614CF.9040208@elvenkind.com>



David Kastrup wrote:
> 
> Is there something like this to be had in MSVC++?  Is MSVC++
> obligatory for compiling PDFTeX in win32?

Have you tried already whether a pdf > 2GB can be opened by
your target audience? If not, there is not much point in
investigating further.

Best wishes,
Taco




From dak at gnu.org  Wed Oct 17 16:00:47 2007
From: dak at gnu.org (David Kastrup)
Date: Wed, 17 Oct 2007 16:00:47 +0200
Subject: [NTG-pdftex] Is there a limit to the size of PDF files?
In-Reply-To: <471614CF.9040208@elvenkind.com> (Taco Hoekwater's message of
	"Wed\, 17 Oct 2007 15\:57\:35 +0200")
References: <200710171341.l9HDf15T025463@jupiter.fsci.fuk.kindai.ac.jp>
	<86wstlhmwi.fsf@lola.quinscape.zz> <471614CF.9040208@elvenkind.com>
Message-ID: <86przdhmcw.fsf@lola.quinscape.zz>

Taco Hoekwater <taco at elvenkind.com> writes:

> David Kastrup wrote:
>>
>> Is there something like this to be had in MSVC++?  Is MSVC++
>> obligatory for compiling PDFTeX in win32?
>
> Have you tried already whether a pdf > 2GB can be opened by
> your target audience?

Presumably not a problem.  But I have to search for other venues,
anyway, since binary replacement is not feasible right now in this
project.  And frankly, 2GB for a 150 page document is ridiculous.

> If not, there is not much point in investigating further.

Maybe.

-- 
David Kastrup

From martin at oneiros.de  Wed Oct 17 16:54:29 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 17 Oct 2007 16:54:29 +0200
Subject: [NTG-pdftex] Is there a limit to the size of PDF files?
In-Reply-To: <86przdhmcw.fsf@lola.quinscape.zz>
References: <200710171341.l9HDf15T025463@jupiter.fsci.fuk.kindai.ac.jp>
	<86wstlhmwi.fsf@lola.quinscape.zz> <471614CF.9040208@elvenkind.com>
	<86przdhmcw.fsf@lola.quinscape.zz>
Message-ID: <68c491a60710170754t79dbebaawd4a9c51c7b27577c@mail.gmail.com>

2007/10/17, David Kastrup <dak at gnu.org>:
> Taco Hoekwater <taco at elvenkind.com> writes:
> > Have you tried already whether a pdf > 2GB can be opened by
> > your target audience?
>
> Presumably not a problem.  But I have to search for other venues,
> anyway, since binary replacement is not feasible right now in this
> project.  And frankly, 2GB for a 150 page document is ridiculous.

AR8 at Linux can not open files >2GB (I just tested).

Best
   Martin

From martin at oneiros.de  Wed Oct 17 17:29:05 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 17 Oct 2007 17:29:05 +0200
Subject: [NTG-pdftex] Is there a limit to the size of PDF files?
In-Reply-To: <68c491a60710170805y9e2a03brf4df3ef5e3b487cf@mail.gmail.com>
References: <200710171341.l9HDf15T025463@jupiter.fsci.fuk.kindai.ac.jp>
	<86wstlhmwi.fsf@lola.quinscape.zz> <471614CF.9040208@elvenkind.com>
	<86przdhmcw.fsf@lola.quinscape.zz>
	<68c491a60710170754t79dbebaawd4a9c51c7b27577c@mail.gmail.com>
	<68c491a60710170805y9e2a03brf4df3ef5e3b487cf@mail.gmail.com>
Message-ID: <68c491a60710170829v48d8dbcdt917d1021227b410a@mail.gmail.com>

2007/10/17, Martin Schr?der <martin at oneiros.de>:
> And pdfTeX at Linux will happily produce files >2G, but these are broken:
> The byte offset for objects is only 32bit and wraps around. :-(

It works if you are on a 64bit plattform and compile with
-DNO_DUMP_SHARE (see texk/web2c/config.h).

Best
   Martin

From noreply at sarovar.org  Wed Oct 17 16:46:53 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 17 Oct 2007 20:16:53 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-877 ] PDFs limited to 2G
Message-ID: <E1IiAAf-00056i-00@sarovar.org>

Bugs item #877, was opened at 2007-10-17 16:46
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=877&group_id=106

Category: None
Group: v1.40.5
Status: Open
Resolution: None
Priority: 7
Submitted By: Martin Schr?der (oneiros)
Assigned to: Martin Schr?der (oneiros)
Summary: PDFs limited to 2G

Initial Comment:
pdfTeX will happily produce pdfs >2G, if the fs and os
allow that, but these are broken: pdf_offset et.al. are
only ints, i.e. 32bit. So all objects after 2GB are not
accessible.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=877&group_id=106

From martin at oneiros.de  Wed Oct 17 17:05:22 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 17 Oct 2007 17:05:22 +0200
Subject: [NTG-pdftex] Is there a limit to the size of PDF files?
In-Reply-To: <68c491a60710170754t79dbebaawd4a9c51c7b27577c@mail.gmail.com>
References: <200710171341.l9HDf15T025463@jupiter.fsci.fuk.kindai.ac.jp>
	<86wstlhmwi.fsf@lola.quinscape.zz> <471614CF.9040208@elvenkind.com>
	<86przdhmcw.fsf@lola.quinscape.zz>
	<68c491a60710170754t79dbebaawd4a9c51c7b27577c@mail.gmail.com>
Message-ID: <68c491a60710170805y9e2a03brf4df3ef5e3b487cf@mail.gmail.com>

2007/10/17, Martin Schr?der <martin at oneiros.de>:
> AR8 at Linux can not open files >2GB (I just tested).

And pdfTeX at Linux will happily produce files >2G, but these are broken:
The byte offset for objects is only 32bit and wraps around. :-(

Best
   Martin

From noreply at sarovar.org  Wed Oct 17 17:09:22 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 17 Oct 2007 20:39:22 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-877 ] PDFs limited to 2G
Message-ID: <E1IiAWQ-0002CO-00@sarovar.org>

Bugs item #877, was opened at 2007-10-17 16:46
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=877&group_id=106

Category: None
Group: v1.40.5
Status: Open
Resolution: None
Priority: 7
Submitted By: Martin Schr?der (oneiros)
Assigned to: Martin Schr?der (oneiros)
Summary: PDFs limited to 2G

Initial Comment:
pdfTeX will happily produce pdfs >2G, if the fs and os
allow that, but these are broken: pdf_offset et.al. are
only ints, i.e. 32bit. So all objects after 2GB are not
accessible.

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-10-17 17:09

Message:
Logged In: YES 
user_id=421

It works if you are on a 64bit platform and compile with
-DNO_DUMP_SHARE

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=877&group_id=106

From dak at gnu.org  Wed Oct 17 18:01:25 2007
From: dak at gnu.org (David Kastrup)
Date: Wed, 17 Oct 2007 18:01:25 +0200
Subject: [NTG-pdftex] Is there a limit to the size of PDF files?
In-Reply-To: <68c491a60710170754t79dbebaawd4a9c51c7b27577c@mail.gmail.com>
	("Martin =?iso-8859-1?Q?Schr=F6der=22's?= message of "Wed\, 17 Oct 2007
	16\:54\:29 +0200")
References: <200710171341.l9HDf15T025463@jupiter.fsci.fuk.kindai.ac.jp>
	<86wstlhmwi.fsf@lola.quinscape.zz> <471614CF.9040208@elvenkind.com>
	<86przdhmcw.fsf@lola.quinscape.zz>
	<68c491a60710170754t79dbebaawd4a9c51c7b27577c@mail.gmail.com>
Message-ID: <863aw9hgru.fsf@lola.quinscape.zz>

"Martin Schr?der" <martin at oneiros.de> writes:

> 2007/10/17, David Kastrup <dak at gnu.org>:
>> Taco Hoekwater <taco at elvenkind.com> writes:
>> > Have you tried already whether a pdf > 2GB can be opened by
>> > your target audience?
>>
>> Presumably not a problem.  But I have to search for other venues,
>> anyway, since binary replacement is not feasible right now in this
>> project.  And frankly, 2GB for a 150 page document is ridiculous.
>
> AR8 at Linux can not open files >2GB (I just tested).

Actually, I just discovered \pdfobjcompresslevel.  Maybe we will get
this circumnavigated.

-- 
David Kastrup

From noreply at sarovar.org  Wed Oct 17 17:51:13 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 17 Oct 2007 21:21:13 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-877 ] PDFs limited to 2G
Message-ID: <E1IiBAv-0008CS-00@sarovar.org>

Bugs item #877, was opened at 2007-10-17 16:46
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=877&group_id=106

Category: None
Group: v1.40.5
>Status: Closed
>Resolution: Fixed
Priority: 7
Submitted By: Martin Schr?der (oneiros)
Assigned to: Martin Schr?der (oneiros)
Summary: PDFs limited to 2G

Initial Comment:
pdfTeX will happily produce pdfs >2G, if the fs and os
allow that, but these are broken: pdf_offset et.al. are
only ints, i.e. 32bit. So all objects after 2GB are not
accessible.

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-10-17 17:51

Message:
Logged In: YES 
user_id=421

Future versions of pdftex will catch overflows of pdf_offset
and abort with an error.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-10-17 17:09

Message:
Logged In: YES 
user_id=421

It works if you are on a 64bit platform and compile with
-DNO_DUMP_SHARE

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=877&group_id=106

From reinhard.kotucha at web.de  Wed Oct 17 18:59:09 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 17 Oct 2007 18:59:09 +0200
Subject: [NTG-pdftex] Is there a limit to the size of PDF files?
In-Reply-To: <863aw9hgru.fsf@lola.quinscape.zz>
References: <200710171341.l9HDf15T025463@jupiter.fsci.fuk.kindai.ac.jp>
	<86wstlhmwi.fsf@lola.quinscape.zz> <471614CF.9040208@elvenkind.com>
	<86przdhmcw.fsf@lola.quinscape.zz>
	<68c491a60710170754t79dbebaawd4a9c51c7b27577c@mail.gmail.com>
	<863aw9hgru.fsf@lola.quinscape.zz>
Message-ID: <18198.16221.935402.41832@zaphod.ms25.net>

David Kastrup writes:

 > Actually, I just discovered \pdfobjcompresslevel.  Maybe we will get
 > this circumnavigated.

Don't expect too much if there are many graphics.  They are compressed
already and take most of the space.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From dak at gnu.org  Wed Oct 17 19:13:01 2007
From: dak at gnu.org (David Kastrup)
Date: Wed, 17 Oct 2007 19:13:01 +0200
Subject: [NTG-pdftex] Is there a limit to the size of PDF files?
In-Reply-To: <18198.16221.935402.41832@zaphod.ms25.net> (Reinhard Kotucha's
	message of "Wed\, 17 Oct 2007 18\:59\:09 +0200")
References: <200710171341.l9HDf15T025463@jupiter.fsci.fuk.kindai.ac.jp>
	<86wstlhmwi.fsf@lola.quinscape.zz> <471614CF.9040208@elvenkind.com>
	<86przdhmcw.fsf@lola.quinscape.zz>
	<68c491a60710170754t79dbebaawd4a9c51c7b27577c@mail.gmail.com>
	<863aw9hgru.fsf@lola.quinscape.zz>
	<18198.16221.935402.41832@zaphod.ms25.net>
Message-ID: <868x61fyw2.fsf@lola.quinscape.zz>

Reinhard Kotucha <reinhard.kotucha at web.de> writes:

> David Kastrup writes:
>
>  > Actually, I just discovered \pdfobjcompresslevel.  Maybe we will get
>  > this circumnavigated.
>
> Don't expect too much if there are many graphics.  They are compressed
> already and take most of the space.

Given their size, they can't be compressed all too much (5 to 10MB PDF
per piece, presumably generated by Imagemagick).  I already wrote a
ticket for replacing Imagemagick with sam2p (I guess I trust Peter
more about squeezing size), but I don't know whether my guesses about
which does what in image preprocessing are correct.

-- 
David Kastrup

From hartmut_henkel at gmx.de  Wed Oct 17 21:19:06 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed, 17 Oct 2007 21:19:06 +0200 (CEST)
Subject: [NTG-pdftex] Is there a limit to the size of PDF files?
In-Reply-To: <18198.16221.935402.41832@zaphod.ms25.net>
References: <200710171341.l9HDf15T025463@jupiter.fsci.fuk.kindai.ac.jp>
	<86wstlhmwi.fsf@lola.quinscape.zz> <471614CF.9040208@elvenkind.com>
	<86przdhmcw.fsf@lola.quinscape.zz>
	<68c491a60710170754t79dbebaawd4a9c51c7b27577c@mail.gmail.com>
	<863aw9hgru.fsf@lola.quinscape.zz>
	<18198.16221.935402.41832@zaphod.ms25.net>
Message-ID: <alpine.DEB.0.9999.0710172115530.5473@hahepc1.hahe>

On Wed, 17 Oct 2007, Reinhard Kotucha wrote:

> David Kastrup writes:
>
> > Actually, I just discovered \pdfobjcompresslevel.  Maybe we will get
> > this circumnavigated.
>
> Don't expect too much if there are many graphics.  They are compressed
> already and take most of the space.

... and any kind of stream objects are not touched at all by object
compression. The \pdfobjcompresslevel affects only objects that are pure
dictionaries.

Regards, Hartmut

From oberdiek at uni-freiburg.de  Wed Oct 24 09:55:43 2007
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Wed, 24 Oct 2007 09:55:43 +0200
Subject: [NTG-pdftex] [tex-live] pdfTeX and ToUnicode CMaps
In-Reply-To: <20071024.092519.182904486.wl@gnu.org>
References: <20071023.083121.10810254.wl@gnu.org>
	<68c491a60710231554q55c56999m60eb4b4eed09a7c5@mail.gmail.com>
	<20071024.092519.182904486.wl@gnu.org>
Message-ID: <20071024075543.GA8513@irwin.vpn.uni-freiburg.de>

Hello,

I think a better place for this issue is the (ntg-)pdftex mailing list,
therefore I have CCed the ntg-pdftex mailing list.

On Wed, Oct 24, 2007 at 09:25:19AM +0200, Werner LEMBERG wrote:

> > > What exactly is the status of automatic ToUnicode CMap generation
> > > within pdfTeX?  There is a very nebulous entry in the NEWS file
> > > (BTW, the versions in TeXLive's Build and Master tree differ), but
> > > the manual is completely silent about it...
> > 
> > Thanh knows all about it. :-)
> > Did you read patch 580 (http://preview.tinyurl.com/38fjr9)?
> 
> I now did.  Thanks to the pointer.  How comes that this feature is
> neither mentioned in the NEWS file nor in the documentation?  

It was presented by Han at EuroBachoTeX 2007:
  `Font-specific issues in pdfTeX'
(I don't know whether slides exist on-line, via google I only
found a non-existing pdf file, but at least google's html view
was available.)

Section "5. Support for ToUnicode map".

> I consider this as *very bad*.  Lack of documentation is inexcusable.

I think there are unsolved issues. Now there are two methods
for adding CMaps:
(a) \pdffontattr, package cmap
(b) \pdfgentounicode, glyphtounicode.tex

Both methods have its limitations, e.g. (b) only works for Type 1 fonts.
Thus you could need both methods to cover all fonts, but the methods
doesn't know each other, thus fonts can end up with two CMap tables.

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>

From wl at gnu.org  Wed Oct 24 10:08:53 2007
From: wl at gnu.org (Werner LEMBERG)
Date: Wed, 24 Oct 2007 10:08:53 +0200 (CEST)
Subject: [NTG-pdftex] [tex-live] pdfTeX and ToUnicode CMaps
In-Reply-To: <20071024075543.GA8513@irwin.vpn.uni-freiburg.de>
References: <68c491a60710231554q55c56999m60eb4b4eed09a7c5@mail.gmail.com>
	<20071024.092519.182904486.wl@gnu.org>
	<20071024075543.GA8513@irwin.vpn.uni-freiburg.de>
Message-ID: <20071024.100853.101660749.wl@gnu.org>

> > How comes that this feature is neither mentioned in the NEWS file
> > nor in the documentation?
> 
> It was presented by Han at EuroBachoTeX 2007:
>   `Font-specific issues in pdfTeX'
>
> (I don't know whether slides exist on-line, via google I only found
> a non-existing pdf file, but at least google's html view was
> available.)

Hmm.  This isn't a replacement for documentation.  IMHO, it *must* be
mentioned in the NEWS file (perhaps in the `experimental' section'.

> I think there are unsolved issues. Now there are two methods
> for adding CMaps:
> (a) \pdffontattr, package cmap

I use this in my CJK package too.

> (b) \pdfgentounicode, glyphtounicode.tex
> 
> Both methods have its limitations, e.g. (b) only works for Type 1
> fonts.  Thus you could need both methods to cover all fonts, but the
> methods doesn't know each other, thus fonts can end up with two CMap
> tables.

Indeed, those features should be merged.


    Werner

From oberdiek at uni-freiburg.de  Thu Oct 25 08:43:32 2007
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Thu, 25 Oct 2007 08:43:32 +0200
Subject: [NTG-pdftex] [tex-live] pdfTeX and ToUnicode CMaps
In-Reply-To: <20071024.100853.101660749.wl@gnu.org>
References: <68c491a60710231554q55c56999m60eb4b4eed09a7c5@mail.gmail.com>
	<20071024.092519.182904486.wl@gnu.org>
	<20071024075543.GA8513@irwin.vpn.uni-freiburg.de>
	<20071024.100853.101660749.wl@gnu.org>
Message-ID: <20071025064332.GA3582@irwin.vpn.uni-freiburg.de>

On Wed, Oct 24, 2007 at 10:08:53AM +0200, Werner LEMBERG wrote:

> > > How comes that this feature is neither mentioned in the NEWS file
> > > nor in the documentation?
> > 
> > It was presented by Han at EuroBachoTeX 2007:
> >   `Font-specific issues in pdfTeX'
> >
> > (I don't know whether slides exist on-line, via google I only found
> > a non-existing pdf file, but at least google's html view was
> > available.)
> 
> Hmm.  This isn't a replacement for documentation.  IMHO, it *must* be
> mentioned in the NEWS file (perhaps in the `experimental' section'.

Apart from not having time, there are many reasons for
missing documentation. Perhaps the feature isn't finished
and too `experimental'. Or there are plans to redesign the
interfaces. Documentation raises compatibility issues.
On the other hand the author will have less feedback
without documentation.
  But either way, this decision is up to the author who implements
the feature, not the user who wants to use it. But the user may
help, if the author welcomes it, e.g. writing documentation, testing,
or providing ideas, e.g. how to achieve:

> Indeed, those features should be merged.

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>
-- 

From wl at gnu.org  Thu Oct 25 09:20:16 2007
From: wl at gnu.org (Werner LEMBERG)
Date: Thu, 25 Oct 2007 09:20:16 +0200 (CEST)
Subject: [NTG-pdftex] [tex-live] pdfTeX and ToUnicode CMaps
In-Reply-To: <20071025064332.GA3582@irwin.vpn.uni-freiburg.de>
References: <20071024075543.GA8513@irwin.vpn.uni-freiburg.de>
	<20071024.100853.101660749.wl@gnu.org>
	<20071025064332.GA3582@irwin.vpn.uni-freiburg.de>
Message-ID: <20071025.092016.51296063.wl@gnu.org>

> > Hmm.  This isn't a replacement for documentation.  IMHO, it *must* be
> > mentioned in the NEWS file (perhaps in the `experimental' section'.
> 
> Apart from not having time,

Well, this is a lame excuse: It would have been a matter of 10
seconds, namely to copy Thanh's announcement of the patch verbatim to
the NEWS file.

> there are many reasons for missing documentation. Perhaps the
> feature isn't finished and too `experimental'.

Hmm.

> Or there are plans to redesign the interfaces. Documentation raises
> compatibility issues.  On the other hand the author will have less
> feedback without documentation.

Indeed.  How shall people try it without knowing this feature at all.

> But either way, this decision is up to the author who implements the
> feature, not the user who wants to use it.

If I interpret the patch correctly, it wasn't Thanh who has applied it
-- Thanh has done his job correctly providing the necessary details of
how to use his new extension, but the applier missed to update the
NEWS file.


    Werner

From martin at oneiros.de  Sat Oct 27 16:47:34 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sat, 27 Oct 2007 16:47:34 +0200
Subject: [NTG-pdftex] LFS
Message-ID: <68c491a60710270747g34f94e9cnc4b0e9bdeb956a05@mail.gmail.com>

Hi,
trunk can now generate PDFs >2GiB, if you add the right flags to
configure (see http://www.suse.de/~aj/linux_lfs.html). This is tested
on Linux on amd64 and i386, but I'm interested in reports from other
platforms.

We will eventually have support for this in configure, but we are not
there yet (autofoo ...:-().

Best
   Martin

From dak at gnu.org  Wed Oct 31 15:28:57 2007
From: dak at gnu.org (David Kastrup)
Date: Wed, 31 Oct 2007 15:28:57 +0100
Subject: [NTG-pdftex] 2GB limit and Windows
Message-ID: <86ir4nnys6.fsf@lola.quinscape.zz>


Hi,

do I understand correctly from the discussions and Svn logs that
PDFTeX is now ready to create large PDF files under GNU/Linux, but the
same can't be said of Windows?

Any idea whether this will change?  Would cross-compilation via
mingw32 help here?  Would the standard way in which executables are
compiled for Windows be adaptable?  Would there be downloadable
binaries at some point of time?

Thanks,

-- 
David Kastrup

From kakuto at fsci.fuk.kindai.ac.jp  Wed Oct 31 17:13:51 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu, 01 Nov 2007 01:13:51 +0900
Subject: [NTG-pdftex] 2GB limit and Windows
In-Reply-To: Your message of "Wed, 31 Oct 2007 15:28:57 +0100"
References: <86ir4nnys6.fsf@lola.quinscape.zz>
Message-ID: <200710311613.l9VGDqkn012239@jupiter.fsci.fuk.kindai.ac.jp>

Hi David,

> do I understand correctly from the discussions and Svn logs that
> PDFTeX is now ready to create large PDF files under GNU/Linux, but the
> same can't be said of Windows?

Please test the binary of W32TeX (1.50.0-alpha),
and teach me the problem.
I've used
#ifdef WIN32
#include <io.h>
void
xfseek64 (FILE *f, __int64 offset, int wherefrom,  char *filename)
{
    fflush(f);
    if (_lseeki64(fileno(f), offset, wherefrom) < (__int64)0)
        FATAL_PERROR(filename);
}
#endif
in
void writestreamlength(integer length, longinteger offset)

I myself don't have tested the large file.

Best regards,
Akira

From martin at oneiros.de  Wed Oct 31 17:39:54 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 31 Oct 2007 17:39:54 +0100
Subject: [NTG-pdftex] 2GB limit and Windows
In-Reply-To: <200710311613.l9VGDqkn012239@jupiter.fsci.fuk.kindai.ac.jp>
References: <86ir4nnys6.fsf@lola.quinscape.zz>
	<200710311613.l9VGDqkn012239@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <68c491a60710310939l7ed38c3cxdf908a7d0ba066af@mail.gmail.com>

2007/10/31, Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp>:
> Please test the binary of W32TeX (1.50.0-alpha),

Does config.h work on win32? longinteger should be 64bit.

Best
   Martin

From dak at gnu.org  Wed Oct 31 18:08:51 2007
From: dak at gnu.org (David Kastrup)
Date: Wed, 31 Oct 2007 18:08:51 +0100
Subject: [NTG-pdftex] 2GB limit and Windows
In-Reply-To: <200710311613.l9VGDqkn012239@jupiter.fsci.fuk.kindai.ac.jp>
	(Akira Kakuto's message of "Thu\, 01 Nov 2007 01\:13\:51 +0900")
References: <86ir4nnys6.fsf@lola.quinscape.zz>
	<200710311613.l9VGDqkn012239@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <86zlxzmct8.fsf@lola.quinscape.zz>

Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp> writes:

> Hi David,
>
>> do I understand correctly from the discussions and Svn logs that
>> PDFTeX is now ready to create large PDF files under GNU/Linux, but the
>> same can't be said of Windows?
>
> Please test the binary of W32TeX (1.50.0-alpha),
> and teach me the problem.

Uh, I asked whether I understand correctly.  I did not say that I
_did_ understand correctly or tested anything.

Where would I be able to download this binary?

> I myself don't have tested the large file.

I'll probably not be able to test this before Friday on a Windows test
system (tomorrow is a local holiday) and before Monday on the
production system.  So if anybody has a good suggestion for a simple
enough test setup that would enable Akira to test drive the executable
without putting me in the feedback loop, this would make things move
somewhat faster.

-- 
David Kastrup

From martin at oneiros.de  Wed Oct 31 18:22:27 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 31 Oct 2007 18:22:27 +0100
Subject: [NTG-pdftex] 2GB limit and Windows
In-Reply-To: <86zlxzmct8.fsf@lola.quinscape.zz>
References: <86ir4nnys6.fsf@lola.quinscape.zz>
	<200710311613.l9VGDqkn012239@jupiter.fsci.fuk.kindai.ac.jp>
	<86zlxzmct8.fsf@lola.quinscape.zz>
Message-ID: <68c491a60710311022x2f830c03maacbe6e6e3ca2188@mail.gmail.com>

2007/10/31, David Kastrup <dak at gnu.org>:
> production system.  So if anybody has a good suggestion for a simple
> enough test setup that would enable Akira to test drive the executable
> without putting me in the feedback loop, this would make things move
> somewhat faster.

My test consist of an input file, which use pdfpages to nup the pdf17
reference on one page (thus getting a pdf with one page and of 11MB),
then creating 1000 hardlinked copies of this and then including at
least 200 of these files in the real test document (also with
pdfpages). Another way to get large input files is to include large
images.

Best
   Martin

From peter.rolf at arcor.de  Wed Oct 31 19:44:43 2007
From: peter.rolf at arcor.de (Peter Rolf)
Date: Wed, 31 Oct 2007 19:44:43 +0100
Subject: [NTG-pdftex] 2GB limit and Windows
In-Reply-To: <86zlxzmct8.fsf@lola.quinscape.zz>
References: <86ir4nnys6.fsf@lola.quinscape.zz>	<200710311613.l9VGDqkn012239@jupiter.fsci.fuk.kindai.ac.jp>
	<86zlxzmct8.fsf@lola.quinscape.zz>
Message-ID: <4728CD1B.3080909@arcor.de>

David Kastrup schrieb:
> Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp> writes:
> 
>> Hi David,
>>
>>> do I understand correctly from the discussions and Svn logs that
>>> PDFTeX is now ready to create large PDF files under GNU/Linux, but the
>>> same can't be said of Windows?
>> Please test the binary of W32TeX (1.50.0-alpha),
>> and teach me the problem.
> 
> Uh, I asked whether I understand correctly.  I did not say that I
> _did_ understand correctly or tested anything.
> 
> Where would I be able to download this binary?
> 
>> I myself don't have tested the large file.
> 
> I'll probably not be able to test this before Friday on a Windows test
> system (tomorrow is a local holiday) and before Monday on the
> production system.  So if anybody has a good suggestion for a simple
> enough test setup that would enable Akira to test drive the executable
> without putting me in the feedback loop, this would make things move
> somewhat faster.
> 
The easiest and fastest way that I can think of is attaching a huge file
(memory dump, backup file, ..).

Maybe you can use creatfil.exe from the 'Windows Server 2003 Resource Kit'.

http://www.microsoft.com/downloads/details.aspx?FamilyID=9d467a69-57ff-4ae7-96ee-b18c4790cffd&displaylang=en

Taken from the description:

'Create File (CreatFil) is a command-line tool that creates a blank file
of a specified size, filled with space characters. This is useful for
testing the behavior of tools, applications, and setup programs under
conditions of low available memory on a hard disk.'

Simply create a dummy file of desired size and attach it to a small pdf
document. Of course this will only work if pdftex doesn't compress the
attached file. I have no experience with attachments, so I just don't
know if this works.

I can send you a 3GB test file per mail (packed size 19KB) :D

Peter

