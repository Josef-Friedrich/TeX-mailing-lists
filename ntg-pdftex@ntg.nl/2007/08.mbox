From pragma at wxs.nl  Sun Aug  5 14:58:33 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 05 Aug 2007 14:58:33 +0200
Subject: [NTG-pdftex] [pdftex] PTEX.FileName contains file system
	information
In-Reply-To: <f949vf$dgk$1@sea.gmane.org>
References: <f92rdf$f19$1@sea.gmane.org>	<18101.8325.761670.228332@zarniwoop.ms25.local>
	<f949vf$dgk$1@sea.gmane.org>
Message-ID: <46B5C979.7080300@wxs.nl>

Stephan Hennig wrote:

> But I'm concerned about pdfTeX unintentionally revealing:
> 
> (a)  file naming conventions,
> (b)  infrastructure information,
> (c)  identity information.

i see not problem with adding a

\ptexinfo=0|1

with 1 being the default (since we don't want to break downward 
compatibiity).

We can put it on the wishlist

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Sun Aug  5 15:06:50 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 05 Aug 2007 15:06:50 +0200
Subject: [NTG-pdftex] [pdftex] PTEX.FileName contains file
	system	information
In-Reply-To: <46B5C979.7080300@wxs.nl>
References: <f92rdf$f19$1@sea.gmane.org>	<18101.8325.761670.228332@zarniwoop.ms25.local>	<f949vf$dgk$1@sea.gmane.org>
	<46B5C979.7080300@wxs.nl>
Message-ID: <46B5CB6A.2070403@elvenkind.com>

Hans Hagen wrote:
> Stephan Hennig wrote:
> 
>> But I'm concerned about pdfTeX unintentionally revealing:
>>
>> (a)  file naming conventions,
>> (b)  infrastructure information,
>> (c)  identity information.
> 
> i see not problem with adding a
> 
> \ptexinfo=0|1
> 
> with 1 being the default (since we don't want to break downward 
> compatibiity).
> 
> We can put it on the wishlist

Agreed, but a less cryptic name is needed.   \pdfptexfilename ?




From martin at oneiros.de  Sun Aug  5 16:48:43 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sun, 5 Aug 2007 16:48:43 +0200
Subject: [NTG-pdftex] [pdftex] PTEX.FileName contains file system
	information
In-Reply-To: <46B5C979.7080300@wxs.nl>
References: <f92rdf$f19$1@sea.gmane.org>
	<18101.8325.761670.228332@zarniwoop.ms25.local>
	<f949vf$dgk$1@sea.gmane.org> <46B5C979.7080300@wxs.nl>
Message-ID: <68c491a60708050748r16d48b40j9e305014869c3857@mail.gmail.com>

2007/8/5, Hans Hagen <pragma at wxs.nl>:
> i see not problem with adding a
>
> \ptexinfo=0|1
>
> with 1 being the default (since we don't want to break downward
> compatibiity).

How about a bitset?
bit
0 PTEX.FileName
1 PTEX.InfoDict
2 PTEX.PageNumber

with 7 (111) being the default.

Best
   Martin

From pragma at wxs.nl  Sun Aug  5 18:26:59 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 05 Aug 2007 18:26:59 +0200
Subject: [NTG-pdftex] [pdftex] PTEX.FileName contains file
	system	information
In-Reply-To: <68c491a60708050748r16d48b40j9e305014869c3857@mail.gmail.com>
References: <f92rdf$f19$1@sea.gmane.org>	<18101.8325.761670.228332@zarniwoop.ms25.local>	<f949vf$dgk$1@sea.gmane.org>
	<46B5C979.7080300@wxs.nl>
	<68c491a60708050748r16d48b40j9e305014869c3857@mail.gmail.com>
Message-ID: <46B5FA53.2030501@wxs.nl>

Martin Schr?der wrote:
> 2007/8/5, Hans Hagen <pragma at wxs.nl>:
>> i see not problem with adding a
>>
>> \ptexinfo=0|1
>>
>> with 1 being the default (since we don't want to break downward
>> compatibiity).
> 
> How about a bitset?
> bit
> 0 PTEX.FileName
> 1 PTEX.InfoDict
> 2 PTEX.PageNumber
> 
> with 7 (111) being the default.

sounds ok to me

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From oberdiek at uni-freiburg.de  Sun Aug  5 18:36:35 2007
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Sun, 5 Aug 2007 18:36:35 +0200
Subject: [NTG-pdftex] [pdftex] PTEX.FileName contains file system
	information
In-Reply-To: <68c491a60708050748r16d48b40j9e305014869c3857@mail.gmail.com>
References: <f92rdf$f19$1@sea.gmane.org>
	<18101.8325.761670.228332@zarniwoop.ms25.local>
	<f949vf$dgk$1@sea.gmane.org> <46B5C979.7080300@wxs.nl>
	<68c491a60708050748r16d48b40j9e305014869c3857@mail.gmail.com>
Message-ID: <20070805163635.GA10974@irwin.vpn.uni-freiburg.de>

On Sun, Aug 05, 2007 at 04:48:43PM +0200, Martin Schr?der wrote:

> 2007/8/5, Hans Hagen <pragma at wxs.nl>:
> > i see not problem with adding a
> >
> > \ptexinfo=0|1
> >
> > with 1 being the default (since we don't want to break downward
> > compatibiity).
> 
> How about a bitset?
> bit
> 0 PTEX.FileName
> 1 PTEX.InfoDict
> 2 PTEX.PageNumber
> 
> with 7 (111) being the default.

A complete set to avoid further feature requests:
0 PTEX.Fullbanner
1 PTEX.FileName
2 PTEX.InfoDict
3 PTEX.PageNumber

Default: 15 (1111b).

As "less cryptic" name I would prefer \pdfptexinfo. ;-)

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>
-- 

From oberdiek at uni-freiburg.de  Sun Aug  5 18:47:44 2007
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Sun, 5 Aug 2007 18:47:44 +0200
Subject: [NTG-pdftex] [pdftex] PTEX.FileName contains file system
	information
In-Reply-To: <20070805163635.GA10974@irwin.vpn.uni-freiburg.de>
References: <f92rdf$f19$1@sea.gmane.org>
	<18101.8325.761670.228332@zarniwoop.ms25.local>
	<f949vf$dgk$1@sea.gmane.org> <46B5C979.7080300@wxs.nl>
	<68c491a60708050748r16d48b40j9e305014869c3857@mail.gmail.com>
	<20070805163635.GA10974@irwin.vpn.uni-freiburg.de>
Message-ID: <20070805164744.GA11343@irwin.vpn.uni-freiburg.de>

On Sun, Aug 05, 2007 at 06:36:35PM +0200, Heiko Oberdiek wrote:

> On Sun, Aug 05, 2007 at 04:48:43PM +0200, Martin Schr?der wrote:
> 
> > 2007/8/5, Hans Hagen <pragma at wxs.nl>:
> > > i see not problem with adding a
> > >
> > > \ptexinfo=0|1
> > >
> > > with 1 being the default (since we don't want to break downward
> > > compatibiity).
> > 
> > How about a bitset?
> > bit
> > 0 PTEX.FileName
> > 1 PTEX.InfoDict
> > 2 PTEX.PageNumber
> > 
> > with 7 (111) being the default.
> 
> A complete set to avoid further feature requests:
> 0 PTEX.Fullbanner
> 1 PTEX.FileName
> 2 PTEX.InfoDict
> 3 PTEX.PageNumber
> 
> Default: 15 (1111b).
> 
> As "less cryptic" name I would prefer \pdfptexinfo. ;-)

Or the reverse:

\pdfsupressptexinfo

Then bit 0 means that the PTEX entry is present.
The default would be 0 and future extensions would have
the same default behaviour as the older entries.

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>

From pragma at wxs.nl  Sun Aug  5 20:07:08 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 05 Aug 2007 20:07:08 +0200
Subject: [NTG-pdftex] [pdftex] PTEX.FileName contains file
	system	information
In-Reply-To: <20070805164744.GA11343@irwin.vpn.uni-freiburg.de>
References: <f92rdf$f19$1@sea.gmane.org>	<18101.8325.761670.228332@zarniwoop.ms25.local>	<f949vf$dgk$1@sea.gmane.org>
	<46B5C979.7080300@wxs.nl>	<68c491a60708050748r16d48b40j9e305014869c3857@mail.gmail.com>	<20070805163635.GA10974@irwin.vpn.uni-freiburg.de>
	<20070805164744.GA11343@irwin.vpn.uni-freiburg.de>
Message-ID: <46B611CC.5030602@wxs.nl>

Heiko Oberdiek wrote:

> Or the reverse:
> 
> \pdfsupressptexinfo
> 
> Then bit 0 means that the PTEX entry is present.
> The default would be 0 and future extensions would have
> the same default behaviour as the older entries.

makes much sense

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From noreply at sarovar.org  Mon Aug  6 12:25:00 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 06 Aug 2007 15:55:00 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-846 ] \pdfsuppressptexinfo
Message-ID: <E1IHzlk-0001jr-00@sarovar.org>

Patches item #846, was opened at 2007-08-06 12:25
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=846&group_id=106

Category: Primitives
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Heiko Oberdiek (oberdiek)
Assigned to: Nobody (None)
Summary: \pdfsuppressptexinfo

Initial Comment:
Subject: \pdfsuppressptexinfo
Date: 2007/08/06
Author: Heiko Oberdiek

The patch is based on pdftex-1.40.5.

There is a discussion in the mailing lists (ntg-)pdftex
about suppressing entries "/PTEX.*". The patch tries to
summarize the discussion and provides an implementation.

New primitive of type integer: \pdfsuppressptexinfo
The number is interpreted as bit field (Martin Schr?der):
  Bit 0: /PTEX.Fullbanner
  Bit 1: /PTEX.FileName
  Bit 2: /PTEX.PageNumber
  Bit 3: /PTEX.InfoDict
Default is 0, all entries are written.

pdftex.web.diff patches pdftexdir/pdftex.web
pdftoepdf.cc.diff patches pdftexdir/pdftoepdf.cc

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=846&group_id=106

From noreply at sarovar.org  Mon Aug  6 13:21:21 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 06 Aug 2007 16:51:21 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-846 ] \pdfsuppressptexinfo
Message-ID: <E1II0eH-0002MG-00@sarovar.org>

Patches item #846, was opened at 2007-08-06 12:25
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=846&group_id=106

Category: Primitives
>Group: v1.50.0
>Status: Closed
>Resolution: Accepted
Priority: 5
Submitted By: Heiko Oberdiek (oberdiek)
>Assigned to: Martin Schr?der (oneiros)
Summary: \pdfsuppressptexinfo

Initial Comment:
Subject: \pdfsuppressptexinfo
Date: 2007/08/06
Author: Heiko Oberdiek

The patch is based on pdftex-1.40.5.

There is a discussion in the mailing lists (ntg-)pdftex
about suppressing entries "/PTEX.*". The patch tries to
summarize the discussion and provides an implementation.

New primitive of type integer: \pdfsuppressptexinfo
The number is interpreted as bit field (Martin Schr?der):
  Bit 0: /PTEX.Fullbanner
  Bit 1: /PTEX.FileName
  Bit 2: /PTEX.PageNumber
  Bit 3: /PTEX.InfoDict
Default is 0, all entries are written.

pdftex.web.diff patches pdftexdir/pdftex.web
pdftoepdf.cc.diff patches pdftexdir/pdftoepdf.cc

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-08-06 13:21

Message:
Logged In: YES 
user_id=421

This patch will be included in the upcoming 1.50

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=846&group_id=106

From martin at oneiros.de  Mon Aug  6 13:50:12 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Mon, 6 Aug 2007 13:50:12 +0200
Subject: [NTG-pdftex] [pdftex] PTEX.FileName contains file system
	information
In-Reply-To: <20070805164744.GA11343@irwin.vpn.uni-freiburg.de>
References: <f92rdf$f19$1@sea.gmane.org>
	<18101.8325.761670.228332@zarniwoop.ms25.local>
	<f949vf$dgk$1@sea.gmane.org> <46B5C979.7080300@wxs.nl>
	<68c491a60708050748r16d48b40j9e305014869c3857@mail.gmail.com>
	<20070805163635.GA10974@irwin.vpn.uni-freiburg.de>
	<20070805164744.GA11343@irwin.vpn.uni-freiburg.de>
Message-ID: <68c491a60708060450q1bf146et6fab1f6b1d6a50b8@mail.gmail.com>

2007/8/5, Heiko Oberdiek <oberdiek at uni-freiburg.de>:
> \pdfsupressptexinfo
>
> Then bit 0 means that the PTEX entry is present.
> The default would be 0 and future extensions would have
> the same default behaviour as the older entries.

Heiko,
thanks very much for the patch, although I'd have preferred a patch
against trunk; this will not go into 1.40, but 1.50.

Best
   Martin

From noreply at sarovar.org  Fri Aug 10 15:40:59 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 10 Aug 2007 19:10:59 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-474 ] Use dynamically linked poppler
	library instead of xpdf code
Message-ID: <E1IJUjb-0006Ai-00@sarovar.org>

Patches item #474, was opened at 2006-01-30 17:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=474&group_id=106

Category: PDF inclusion
Group: v1.30.0
Status: Open
>Resolution: Accepted
Priority: 6
Submitted By: Frank K?ster (frank)
Assigned to: Martin Schr?der (oneiros)
Summary: Use dynamically linked poppler library instead of xpdf code

Initial Comment:
This has already been applied and tested in Debian and
Ubuntu, but we suggest to apply it upstream.  There are
a few things to do, however, as Martin already pointed
out to me in a private mail.  I paraphrase the main points:

- the pdftex distribution should not ship libpoppler.
Instead it should be possible to switch from xpdf to
libpoppler using autoconf magic, if libpoppler headers
are installed.  This needs some coding work

- We need a common API for xpdf and poppler.  This is
the tricky part, because the very reason for poppler's
existence is that the xpdf developer, Derek Noonburg,
refuses any patches that would lead to a shared
library. As Martin said, "for the beginning, a header
file with a couple of #ifdef'ed definitions should be
enough".

I'm going to subscribe to the pdftex devel list soon,
but am not yet subscribed currently.

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-08-10 15:40

Message:
Logged In: YES 
user_id=421

HEAD (r228) has now a layer between pdftex and xpdf.
Please comment.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-05-08 18:54

Message:
Logged In: YES 
user_id=421

Just an update: SUSE has also started switching to poppler.

My idea is to first add an abstraction layer for
xpdf/poppler/... and then add the autofoo stuff.

----------------------------------------------------------------------

Comment By: Frank K?ster (frank)
Date: 2006-08-14 21:20

Message:
Logged In: YES 
user_id=3360

Hi Martin,

this is clearly post-1.40, I agree.  I have not worked on
any autofoo stuff, and I won't be able to do that soon
(instead, I try to integrate pdftex-1.40 into teTeX 3.0
which proved to be non-trivial).

Regards, Frank

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-08-13 22:02

Message:
Logged In: YES 
user_id=421

Frank,
have you done any further work on this?

I just had a first look at integrating poppler and see a
very different use of configure... :-{
Also your diff only patches the sources, but not the
autofoo-stuff.

What I want is:
- a distribution of poppler in src/libs, which can be used
instead of xpdf
- a way to switch bewteen xpdf and poppler via configure
- for poppler to be able to switch between static and
dynamic via configure
- and finally, a header file abstracting poppler/xpdf would
be nice, but is not really needed, as poppler/xpdf are only
used by two source files.

Best
   Martin

----------------------------------------------------------------------

Comment By: Frank K?ster (frank)
Date: 2006-02-13 08:58

Message:
Logged In: YES 
user_id=3360

I agree that this is something to think over and check very
well, so better not push it into 1.40.

But I'd appreciate if someone could answer my mail to
ntg-pdftex regarding the autoconf setup in pdftex, or if you
could tell me whom to ask specifically if nobody among the
active developers knows about it.

See you in Berlin,
Frank

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-02-13 01:50

Message:
Logged In: YES 
user_id=421

I've attached the patch by Frank from
http://www.ntg.nl/pipermail/ntg-pdftex/2006-February/001993.html

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-02-13 01:46

Message:
Logged In: YES 
user_id=421

This is too late for 1.40, so I'll postpone it.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=474&group_id=106

From martin at oneiros.de  Fri Aug 10 16:07:25 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 10 Aug 2007 16:07:25 +0200
Subject: [NTG-pdftex] make depend :-(
Message-ID: <68c491a60708100707r67a3b51bgc0a10b04f95f7e40@mail.gmail.com>

Hi,
I just tried a "make depend" in pdftexdir and found it broken; and my
knowlegde of make/sh/grep/sed/autofoo/... is not sufficient to fix it.

If some kind soul here could fix it, I'd be grateful.

Best
   Martin

PS: And "make depend" in libs/xpdf/xpdf is also not producing the
expected result... :-(

From frank at debian.org  Sun Aug 12 19:05:42 2007
From: frank at debian.org (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Sun, 12 Aug 2007 19:05:42 +0200
Subject: [NTG-pdftex] [ pdftex-Patches-474 ] Use dynamically linked
	poppler library instead of xpdf code
In-Reply-To: <E1IJUjb-0006Ai-00@sarovar.org> (noreply@sarovar.org's message of
	"Fri\, 10 Aug 2007 19\:10\:59 +0530")
References: <E1IJUjb-0006Ai-00@sarovar.org>
Message-ID: <87643klm3d.fsf@riesling.zuerich.kuesterei.ch>

noreply at sarovar.org wrote:

>>Comment By: Martin Schr?der (oneiros)
> Date: 2007-08-10 15:40
>
> Message:
> Logged In: YES 
> user_id=421
>
> HEAD (r228) has now a layer between pdftex and xpdf.

Thank you very much!

> Please comment.

I fear I'm not qualified to comment on the implementation, but I'm very
glad to see it.  Do you think it makes sense to suggest to the poppler
developers to provide a similar pdflib file?  Then switching would be a
matter of "--with-poppler-pdflib" or similar?

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From martin at oneiros.de  Sun Aug 12 20:08:51 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sun, 12 Aug 2007 20:08:51 +0200
Subject: [NTG-pdftex] [ pdftex-Patches-474 ] Use dynamically linked
	poppler library instead of xpdf code
In-Reply-To: <87643klm3d.fsf@riesling.zuerich.kuesterei.ch>
References: <E1IJUjb-0006Ai-00@sarovar.org>
	<87643klm3d.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <68c491a60708121108y66f53a5blb97a2613e184bc33@mail.gmail.com>

2007/8/12, Frank K?ster <frank at debian.org>:
> I fear I'm not qualified to comment on the implementation, but I'm very
> glad to see it.  Do you think it makes sense to suggest to the poppler
> developers to provide a similar pdflib file?  Then switching would be a
> matter of "--with-poppler-pdflib" or similar?

Yes. But I wouldn't ask the poppler devs (I'd be surprised if they
cared much) but the people requesting poppler support in pdfTeX. :-)

>From a short look at poppler it seems the main changes are changed
paths and renamed classes/members.

Best
   Martin

From noreply at sarovar.org  Tue Aug 14 09:48:10 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 14 Aug 2007 13:18:10 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-856 ] build.sh can't handle pathnames
	with spaces
Message-ID: <E1IKr8M-0007q8-00@sarovar.org>

Bugs item #856, was opened at 2007-08-14 09:48
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=856&group_id=106

Category: Build process
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Francky Leyn (leyn)
Assigned to: Martin Schr?der (oneiros)
Summary: build.sh can't handle pathnames with spaces

Initial Comment:
Dear,

I want to compile pdftex for cygwin.
I untarred the distribution in
/cygdrive/c/Document and Settings/Francky Leyn/My 
Documents/LaTeX

leyn at newyork ~/LaTeX/pdftex-1.40.5
$ ./build.sh
...

build.sh stops with the following error:

configure: error: can not run /cygdrive/c/Documents 
and Settings/Francky Leyn/My Documents/LaTeX/pdftex-
1.40.5/build/../src/config/config.sub

The file exists and is executable:

$ ls -lh "/cygdrive/c/Documents and Settings/Francky 
Leyn/My Documents/LaTeX/pdftex-
1.40.5/build/../src/config/config.sub"
-rwx------+ 1 leyn None 32K Jul 31 
19:00 /cygdrive/c/Documents and Settings/Francky 
Leyn/My Documents/LaTeX/pdftex-
1.40.5/build/../src/config/config.sub

The file /cygdrive/c/Documents doesn't exist
of course and that is why buid.sh stops its execution.

Could the scripts be modified so that they can handle 
spaces?

Best regards,

Francky Leyn


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=856&group_id=106

From noreply at sarovar.org  Tue Aug 14 10:50:15 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 14 Aug 2007 14:20:15 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-856 ] build.sh can't handle pathnames
	with spaces
Message-ID: <E1IKs6R-0001Lg-00@sarovar.org>

Bugs item #856, was opened at 2007-08-14 09:48
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=856&group_id=106

Category: Build process
>Group: v1.40.4
Status: Open
>Resolution: Accepted
Priority: 5
Submitted By: Francky Leyn (leyn)
Assigned to: Martin Schr?der (oneiros)
Summary: build.sh can't handle pathnames with spaces

Initial Comment:
Dear,

I want to compile pdftex for cygwin.
I untarred the distribution in
/cygdrive/c/Document and Settings/Francky Leyn/My 
Documents/LaTeX

leyn at newyork ~/LaTeX/pdftex-1.40.5
$ ./build.sh
...

build.sh stops with the following error:

configure: error: can not run /cygdrive/c/Documents 
and Settings/Francky Leyn/My Documents/LaTeX/pdftex-
1.40.5/build/../src/config/config.sub

The file exists and is executable:

$ ls -lh "/cygdrive/c/Documents and Settings/Francky 
Leyn/My Documents/LaTeX/pdftex-
1.40.5/build/../src/config/config.sub"
-rwx------+ 1 leyn None 32K Jul 31 
19:00 /cygdrive/c/Documents and Settings/Francky 
Leyn/My Documents/LaTeX/pdftex-
1.40.5/build/../src/config/config.sub

The file /cygdrive/c/Documents doesn't exist
of course and that is why buid.sh stops its execution.

Could the scripts be modified so that they can handle 
spaces?

Best regards,

Francky Leyn


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-08-14 10:50

Message:
Logged In: YES 
user_id=421

This needs a new configure script; I've pushed this upstream
(to TeXlive).

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=856&group_id=106

From noreply at sarovar.org  Wed Aug 15 01:52:46 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 15 Aug 2007 05:22:46 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-856 ] build.sh can't handle pathnames
	with spaces
Message-ID: <E1IL6Bq-0004Qr-00@sarovar.org>

Bugs item #856, was opened at 2007-08-14 09:48
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=856&group_id=106

Category: Build process
Group: v1.40.4
Status: Open
>Resolution: Postponed
Priority: 5
Submitted By: Francky Leyn (leyn)
Assigned to: Martin Schr?der (oneiros)
Summary: build.sh can't handle pathnames with spaces

Initial Comment:
Dear,

I want to compile pdftex for cygwin.
I untarred the distribution in
/cygdrive/c/Document and Settings/Francky Leyn/My 
Documents/LaTeX

leyn at newyork ~/LaTeX/pdftex-1.40.5
$ ./build.sh
...

build.sh stops with the following error:

configure: error: can not run /cygdrive/c/Documents 
and Settings/Francky Leyn/My Documents/LaTeX/pdftex-
1.40.5/build/../src/config/config.sub

The file exists and is executable:

$ ls -lh "/cygdrive/c/Documents and Settings/Francky 
Leyn/My Documents/LaTeX/pdftex-
1.40.5/build/../src/config/config.sub"
-rwx------+ 1 leyn None 32K Jul 31 
19:00 /cygdrive/c/Documents and Settings/Francky 
Leyn/My Documents/LaTeX/pdftex-
1.40.5/build/../src/config/config.sub

The file /cygdrive/c/Documents doesn't exist
of course and that is why buid.sh stops its execution.

Could the scripts be modified so that they can handle 
spaces?

Best regards,

Francky Leyn


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-08-15 01:52

Message:
Logged In: YES 
user_id=421

I'm sorry, but fixing this needs a change in the whole
autofoo system of TL, which is not likely to happen soon.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-08-14 10:50

Message:
Logged In: YES 
user_id=421

This needs a new configure script; I've pushed this upstream
(to TeXlive).

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=856&group_id=106

From dak at gnu.org  Fri Aug 17 13:00:15 2007
From: dak at gnu.org (David Kastrup)
Date: Fri, 17 Aug 2007 13:00:15 +0200
Subject: [NTG-pdftex] Runtime limitations on open files?
Message-ID: <86k5ru1l4w.fsf@lola.quinscape.zz>


Hi,

we are crashing with "too many open files" on PDFTeX from TeXlive.
The object id where this happens is 513 or so, and it would be my
guess that PDFTeX keeps image files open as long as it has not yet
shipped them out.

It would appear that the system limitations of win32 are much larger,
so I suspect the runtime with which TeXlive2007 has been compiled.

Does anybody have a good pointer to where I might look for further
information?  This is quite a bad roadblock for us.

-- 
David Kastrup

From vvv at vsu.ru  Fri Aug 17 13:18:32 2007
From: vvv at vsu.ru (Vladimir Volovich)
Date: Fri, 17 Aug 2007 15:18:32 +0400
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <86k5ru1l4w.fsf@lola.quinscape.zz> (David Kastrup's message of
	"Fri\, 17 Aug 2007 13\:00\:15 +0200")
References: <86k5ru1l4w.fsf@lola.quinscape.zz>
Message-ID: <87fy2i9zp3.fsf@video.uic.vsu.ru>

"DK" == David Kastrup writes:

 DK> Does anybody have a good pointer to where I might look for
 DK> further information?  This is quite a bad roadblock for us.

http://www.ntg.nl/pipermail/ntg-pdftex/2006-March/002186.html

Best,
v.

From dak at gnu.org  Fri Aug 17 13:28:47 2007
From: dak at gnu.org (David Kastrup)
Date: Fri, 17 Aug 2007 13:28:47 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <86k5ru1l4w.fsf@lola.quinscape.zz> (David Kastrup's message of
	"Fri\, 17 Aug 2007 13\:00\:15 +0200")
References: <86k5ru1l4w.fsf@lola.quinscape.zz>
Message-ID: <863ayi1jtc.fsf@lola.quinscape.zz>

David Kastrup <dak at gnu.org> writes:

> we are crashing with "too many open files" on PDFTeX from TeXlive.
> The object id where this happens is 513 or so, and it would be my
> guess that PDFTeX keeps image files open as long as it has not yet
> shipped them out.
>
> It would appear that the system limitations of win32 are much larger,
> so I suspect the runtime with which TeXlive2007 has been compiled.
>
> Does anybody have a good pointer to where I might look for further
> information?  This is quite a bad roadblock for us.

Ok, I got this info on the Lua list:

<URL:http://msdn2.microsoft.com/en-us/library/6e3b887c(VS.80).aspx>

Given the other array sizes of TeX, bumping this to the maximum of
2048 seems like a no-brainer.  Unfortunately, I don't have a
compilation/crosscompilation environment available here.  What is the
fastest way to get a working binary?  Is there a reasonably easy to
set up compilation or crosscompilation environment?

Thanks,

-- 
David Kastrup

From dak at gnu.org  Fri Aug 17 13:49:24 2007
From: dak at gnu.org (David Kastrup)
Date: Fri, 17 Aug 2007 13:49:24 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <D19B600B-F778-4B47-ADB1-8EBD55D0AE4D@sil.org> (Jonathan Kew's
	message of "Fri\, 17 Aug 2007 12\:40\:55 +0100")
References: <86k5ru1l4w.fsf@lola.quinscape.zz>
	<D19B600B-F778-4B47-ADB1-8EBD55D0AE4D@sil.org>
Message-ID: <86wsvuz8hn.fsf@lola.quinscape.zz>

Jonathan Kew <jonathan_kew at sil.org> writes:

> On 17 Aug 2007, at 12:00 pm, David Kastrup wrote:
>
>> we are crashing with "too many open files" on PDFTeX from TeXlive.
>> The object id where this happens is 513 or so, and it would be my
>> guess that PDFTeX keeps image files open as long as it has not yet
>> shipped them out.
>>
>> It would appear that the system limitations of win32 are much larger,
>> so I suspect the runtime with which TeXlive2007 has been compiled.
>>
>> Does anybody have a good pointer to where I might look for further
>> information?  This is quite a bad roadblock for us.
>
> I believe the W32 binaries in TL were built by Akira using MS Visual
> Studio tools, but I don't know whether/how this limit can be
> controlled there.

See other mail on this: it would appear to be easy to fix this
(namely: bump the number to 2048) in the sources.

> As a workaround, have you tried alternatives such as generating DVI
> output and then running dvipdfmx? It's possible that might handle
> things differently.

Far too many PDFTeX specific features in use, I am afraid.  That road
is not open to us at the moment.

-- 
David Kastrup

From dak at gnu.org  Fri Aug 17 13:57:53 2007
From: dak at gnu.org (David Kastrup)
Date: Fri, 17 Aug 2007 13:57:53 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <87fy2i9zp3.fsf@video.uic.vsu.ru> (Vladimir Volovich's message of
	"Fri\, 17 Aug 2007 15\:18\:32 +0400")
References: <86k5ru1l4w.fsf@lola.quinscape.zz>
	<87fy2i9zp3.fsf@video.uic.vsu.ru>
Message-ID: <86sl6iz83i.fsf@lola.quinscape.zz>

Vladimir Volovich <vvv at vsu.ru> writes:

> "DK" == David Kastrup writes:
>
>  DK> Does anybody have a good pointer to where I might look for
>  DK> further information?  This is quite a bad roadblock for us.
>
> http://www.ntg.nl/pipermail/ntg-pdftex/2006-March/002186.html

Interesting.  "Closed" with "Worksforme" because an application
accumulated file descriptors erroneously.

The problem is that we actually _have_ this amount of outstanding
images not yet shipped out.  No programming error.

Putting the single line

_setmaxstdio(2048);

into web2c startup does not seem like it would be an overly onerous
complication, would it?

-- 
David Kastrup

From martin at oneiros.de  Fri Aug 17 15:35:40 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 17 Aug 2007 15:35:40 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <86sl6iz83i.fsf@lola.quinscape.zz>
References: <86k5ru1l4w.fsf@lola.quinscape.zz>
	<87fy2i9zp3.fsf@video.uic.vsu.ru> <86sl6iz83i.fsf@lola.quinscape.zz>
Message-ID: <68c491a60708170635n4bcf2af2t4377d3cc62d83c56@mail.gmail.com>

2007/8/17, David Kastrup <dak at gnu.org>:
> Interesting.  "Closed" with "Worksforme" because an application
> accumulated file descriptors erroneously.
>
> The problem is that we actually _have_ this amount of outstanding
> images not yet shipped out.  No programming error.

Just curious: How? Do you have more than 512/1024 images on one page?

> _setmaxstdio(2048);
>
> into web2c startup does not seem like it would be an overly onerous
> complication, would it?

No.

Best
   Martin

From dak at gnu.org  Fri Aug 17 16:20:23 2007
From: dak at gnu.org (David Kastrup)
Date: Fri, 17 Aug 2007 16:20:23 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <68c491a60708170635n4bcf2af2t4377d3cc62d83c56@mail.gmail.com>
	("Martin =?iso-8859-1?Q?Schr=F6der=22's?= message of "Fri\, 17 Aug 2007
	15\:35\:40 +0200")
References: <86k5ru1l4w.fsf@lola.quinscape.zz>
	<87fy2i9zp3.fsf@video.uic.vsu.ru> <86sl6iz83i.fsf@lola.quinscape.zz>
	<68c491a60708170635n4bcf2af2t4377d3cc62d83c56@mail.gmail.com>
Message-ID: <86ir7ez1i0.fsf@lola.quinscape.zz>

"Martin Schr?der" <martin at oneiros.de> writes:

> 2007/8/17, David Kastrup <dak at gnu.org>:
>> Interesting.  "Closed" with "Worksforme" because an application
>> accumulated file descriptors erroneously.
>>
>> The problem is that we actually _have_ this amount of outstanding
>> images not yet shipped out.  No programming error.
>
> Just curious: How? Do you have more than 512/1024 images on one page?

Before we decide what to ship out.  There is also the possibility of
some box registers not being cleared out, but it is not easy to debug
and most important to fix this in a reasonable time frame.

>> _setmaxstdio(2048);
>>
>> into web2c startup does not seem like it would be an overly onerous
>> complication, would it?
>
> No.

I can't see any downsides to that, anyway.  Might be nice to stop
leaving files open indiscriminately, but this stopgap measure appears
like an easy copout at the moment.

-- 
David Kastrup

From taco at elvenkind.com  Fri Aug 17 16:42:55 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 17 Aug 2007 16:42:55 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <86ir7ez1i0.fsf@lola.quinscape.zz>
References: <86k5ru1l4w.fsf@lola.quinscape.zz>	<87fy2i9zp3.fsf@video.uic.vsu.ru>
	<86sl6iz83i.fsf@lola.quinscape.zz>	<68c491a60708170635n4bcf2af2t4377d3cc62d83c56@mail.gmail.com>
	<86ir7ez1i0.fsf@lola.quinscape.zz>
Message-ID: <46C5B3EF.7070607@elvenkind.com>



David Kastrup wrote:
> 
> I can't see any downsides to that, anyway.  Might be nice to stop
> leaving files open indiscriminately, but this stopgap measure appears
> like an easy copout at the moment.

As stopgaps go, this is a pretty decent solution, I think. In
general, simply closing the image files after the information
discovery and then reopening them for inclusion won't do, as the
file may be messed up externally in the time between those two events.
On almost all systems, keeping an open file handle protects you
against exactly that.

Best wishes, Taco



From martin at oneiros.de  Fri Aug 17 17:05:50 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 17 Aug 2007 17:05:50 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <86ir7ez1i0.fsf@lola.quinscape.zz>
References: <86k5ru1l4w.fsf@lola.quinscape.zz>
	<87fy2i9zp3.fsf@video.uic.vsu.ru> <86sl6iz83i.fsf@lola.quinscape.zz>
	<68c491a60708170635n4bcf2af2t4377d3cc62d83c56@mail.gmail.com>
	<86ir7ez1i0.fsf@lola.quinscape.zz>
Message-ID: <68c491a60708170805g256d15dfp68c9529844d82276@mail.gmail.com>

2007/8/17, David Kastrup <dak at gnu.org>:
> "Martin Schr?der" <martin at oneiros.de> writes:
> > Just curious: How? Do you have more than 512/1024 images on one page?
>
> Before we decide what to ship out.  There is also the possibility of
> some box registers not being cleared out, but it is not easy to debug
> and most important to fix this in a reasonable time frame.

I'm curious because I know that with nonimmediate \pfximage the number
of different pdfs on one page is essentially unlimited (at least 2080
work).

Best
   Martin

From kakuto at fsci.fuk.kindai.ac.jp  Fri Aug 17 17:50:05 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Sat, 18 Aug 2007 00:50:05 +0900
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: Your message of "Fri, 17 Aug 2007 13:57:53 +0200"
References: <86sl6iz83i.fsf@lola.quinscape.zz>
Message-ID: <200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>

Hi David,

> Interesting.  "Closed" with "Worksforme" because an application
> accumulated file descriptors erroneously.
> 
> The problem is that we actually _have_ this amount of outstanding
> images not yet shipped out.  No programming error.
> 
> Putting the single line
> 
> _setmaxstdio(2048);
> 
> into web2c startup does not seem like it would be an overly onerous
> complication, would it?

I've confirmed that by

#if defined(pdfTeX) || defined(luaTeX)
  _setmaxstdio(2048);
#endif

2041 files in
Vladimir's example are included. Probably 7 are stdin, ... etc.

Best regards,
Akira

From pragma at wxs.nl  Fri Aug 17 18:26:02 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 17 Aug 2007 18:26:02 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
References: <86sl6iz83i.fsf@lola.quinscape.zz>	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
Message-ID: <46C5CC1A.3070809@wxs.nl>

Martin Schr?der wrote:
> 2007/8/17, Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp>:
>> I've confirmed that by
>>
>> #if defined(pdfTeX) || defined(luaTeX)
>>   _setmaxstdio(2048);
>> #endif
>>
>> 2041 files in
>> Vladimir's example are included. Probably 7 are stdin, ... etc.
> 
> And I claim that this is a Windows-only problem that doesn't appear on Unix. ;-)

well, it has been a problem there (till the number was jumped there; i 
clearly remember such problems a few years ago); also, fabrice 
investigated the problem years ago and provided solutions but as usual 
his patches were never included in the code base so no wonder that the 
problem creeps up again ...

I'm pretty fed up with these windows rants and 'no problem on unix' kind 
of crap ... and i also much disliked the tone of mails posted to the lua 
list about this problem suggesting that it's a windows problem etc etc 
and suggesting that it's near to impssible to compile something on 
windows ... a fact that is proven wrong by fabrice and akira

(anyhow, it's no problem to macro program around the problem, either by 
using immediate flushing (if remember right one solution was to close 
1-page docs afterwards because it's the multipage docs that complicate 
things but i dunno what's left of that patch) and/or do a multipass job)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From martin at oneiros.de  Fri Aug 17 18:02:32 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 17 Aug 2007 18:02:32 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>

2007/8/17, Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp>:
> I've confirmed that by
>
> #if defined(pdfTeX) || defined(luaTeX)
>   _setmaxstdio(2048);
> #endif
>
> 2041 files in
> Vladimir's example are included. Probably 7 are stdin, ... etc.

And I claim that this is a Windows-only problem that doesn't appear on Unix. ;-)

Best
   Martin

From martin at oneiros.de  Fri Aug 17 18:40:33 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 17 Aug 2007 18:40:33 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <46C5CC1A.3070809@wxs.nl>
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl>
Message-ID: <68c491a60708170940n574cebay422d15ca4e8be22b@mail.gmail.com>

2007/8/17, Hans Hagen <pragma at wxs.nl>:
> Martin Schr?der wrote:
> > And I claim that this is a Windows-only problem that doesn't appear on Unix. ;-)
>
> well, it has been a problem there (till the number was jumped there; i
> clearly remember such problems a few years ago); also, fabrice
> investigated the problem years ago and provided solutions but as usual
> his patches were never included in the code base so no wonder that the
> problem creeps up again ...

No, Fabrice's patch from some years ago has been included and solves
this problem on Unix.

Best
   Martin

From dak at gnu.org  Fri Aug 17 18:50:00 2007
From: dak at gnu.org (David Kastrup)
Date: Fri, 17 Aug 2007 18:50:00 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <46C5CC1A.3070809@wxs.nl> (Hans Hagen's message of "Fri\,
	17 Aug 2007 18\:26\:02 +0200")
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl>
Message-ID: <868x8ayukn.fsf@lola.quinscape.zz>

Hans Hagen <pragma at wxs.nl> writes:

> Martin Schr?der wrote:
>> 2007/8/17, Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp>:
>>> I've confirmed that by
>>>
>>> #if defined(pdfTeX) || defined(luaTeX)
>>>   _setmaxstdio(2048);
>>> #endif
>>>
>>> 2041 files in
>>> Vladimir's example are included. Probably 7 are stdin, ... etc.
>> 
>> And I claim that this is a Windows-only problem that doesn't appear
>> on Unix. ;-)
>
> I'm pretty fed up with these windows rants and 'no problem on unix'
> kind of crap ... and i also much disliked the tone of mails posted
> to the lua list about this problem suggesting that it's a windows
> problem etc etc and suggesting that it's near to impssible to
> compile something on windows ... a fact that is proven wrong by
> fabrice and akira

"near to impossible", "easy", "trivial": those are synonyms only for
mathematicians.  And counterexamples just prove "not impossible".

I have in this thread described that supporting Windows installations
has proven to be _the_ major developer tiedown for the company I am
working in for most of the last 6 months, and that it has proven to be
a major developer resource hog for AUCTeX (which I am maintainer of)
as well.

Nobody lists the names of people who managed to compile TeXlive on
Unix.  It is not actually an achievement worth noting, in particular
on the rather Posix-compliant free Unix variants/clones.

The README in TeXlive contains no build instructions for Windows.

> (anyhow, it's no problem to macro program around the problem, either
> by using immediate flushing (if remember right one solution was to
> close 1-page docs afterwards because it's the multipage docs that
> complicate things but i dunno what's left of that patch) and/or do a
> multipass job)

Again, "no problem" and "conceivably possible" are the same mostly for
mathematicians.

In the mean time, there remains the problem that the number of open
files permitted by the C library is much more limited on our Windows
compilations than technically mandated, and I propose that this be
fixed, regardless of whether or not other platforms don't exhibit this
behavior.

-- 
David Kastrup

From hartmut_henkel at gmx.de  Fri Aug 17 19:15:17 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Fri, 17 Aug 2007 19:15:17 +0200 (CEST)
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <46C5B3EF.7070607@elvenkind.com>
References: <86k5ru1l4w.fsf@lola.quinscape.zz>
	<87fy2i9zp3.fsf@video.uic.vsu.ru>
	<86sl6iz83i.fsf@lola.quinscape.zz>
	<68c491a60708170635n4bcf2af2t4377d3cc62d83c56@mail.gmail.com>
	<86ir7ez1i0.fsf@lola.quinscape.zz> <46C5B3EF.7070607@elvenkind.com>
Message-ID: <alpine.DEB.0.999.0708171903010.4038@hahepc1.hahe>

On Fri, 17 Aug 2007, Taco Hoekwater wrote:

> David Kastrup wrote:
> >
> > I can't see any downsides to that, anyway.  Might be nice to stop
> > leaving files open indiscriminately, but this stopgap measure
> > appears like an easy copout at the moment.
>
> As stopgaps go, this is a pretty decent solution, I think. In general,
> simply closing the image files after the information discovery and
> then reopening them for inclusion won't do, as the file may be messed
> up externally in the time between those two events.

when the files are first opened, only very limited info is extracted
(type, dimensions, density) and stored. The rest doesn't matter. So if
one opens a file a second time for inclusion, only these stored
parameters need to be checked against the ones in the file (just read
parameters a 2nd time) for consistency, then nothing can be messed up,
even if the image contents differs (the new image would be included). An
error (warning?) would be given only if the dimension data don't match.

Would it be critical for the image contents, if it has changed in the
meantime? Is it needed to nail down the image by keeping the file open?
Are images changing dynamically during a session? Maybe then it might be
natural anyway to take the freshest one?

> On almost all systems, keeping an open file handle protects you
> against exactly that.

Regards, Hartmut

From dak at gnu.org  Fri Aug 17 19:28:06 2007
From: dak at gnu.org (David Kastrup)
Date: Fri, 17 Aug 2007 19:28:06 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <alpine.DEB.0.999.0708171903010.4038@hahepc1.hahe> (Hartmut
	Henkel's message of "Fri\, 17 Aug 2007 19\:15\:17 +0200 \(CEST\)")
References: <86k5ru1l4w.fsf@lola.quinscape.zz>
	<87fy2i9zp3.fsf@video.uic.vsu.ru> <86sl6iz83i.fsf@lola.quinscape.zz>
	<68c491a60708170635n4bcf2af2t4377d3cc62d83c56@mail.gmail.com>
	<86ir7ez1i0.fsf@lola.quinscape.zz> <46C5B3EF.7070607@elvenkind.com>
	<alpine.DEB.0.999.0708171903010.4038@hahepc1.hahe>
Message-ID: <86tzqyxe8p.fsf@lola.quinscape.zz>

Hartmut Henkel <hartmut_henkel at gmx.de> writes:

> On Fri, 17 Aug 2007, Taco Hoekwater wrote:
>
>> As stopgaps go, this is a pretty decent solution, I think. In
>> general, simply closing the image files after the information
>> discovery and then reopening them for inclusion won't do, as the
>> file may be messed up externally in the time between those two
>> events.
>
> Would it be critical for the image contents, if it has changed in
> the meantime?

Probably.

> Is it needed to nail down the image by keeping the file open?

Actually, this does not help: if another application has the file
opened r/w, it can still clobber it while PDFTeX is running.  In Posix
terms, keeping the file open helps against the effects of creat or
unlink, but not against open(..., O_TRUNC).

> Are images changing dynamically during a session? Maybe then it
> might be natural anyway to take the freshest one?
>
>> On almost all systems, keeping an open file handle protects you
>> against exactly that.

I don't think so.

-- 
David Kastrup

From martin at oneiros.de  Fri Aug 17 22:25:28 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 17 Aug 2007 22:25:28 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <868x8ayukn.fsf@lola.quinscape.zz>
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl> <868x8ayukn.fsf@lola.quinscape.zz>
Message-ID: <68c491a60708171325r7b199dffx1174beb168f1859b@mail.gmail.com>

2007/8/17, David Kastrup <dak at gnu.org>:
> "near to impossible", "easy", "trivial": those are synonyms only for
> mathematicians.  And counterexamples just prove "not impossible".

Stop.

Let's get back to the facts: I can easily include 10000 different pdfs
on one page (and claim that the number of files is only limited by
memory) -- when \pdfximage is \immediate (which is normally is not).
This works on Linux. Does this not work on Windows?

Best
   Martin

From dak at gnu.org  Fri Aug 17 23:08:05 2007
From: dak at gnu.org (David Kastrup)
Date: Fri, 17 Aug 2007 23:08:05 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <68c491a60708171325r7b199dffx1174beb168f1859b@mail.gmail.com>
	("Martin =?iso-8859-1?Q?Schr=F6der=22's?= message of "Fri\, 17 Aug 2007
	22\:25\:28 +0200")
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl> <868x8ayukn.fsf@lola.quinscape.zz>
	<68c491a60708171325r7b199dffx1174beb168f1859b@mail.gmail.com>
Message-ID: <85tzqxx422.fsf@lola.goethe.zz>

"Martin Schr?der" <martin at oneiros.de> writes:

> 2007/8/17, David Kastrup <dak at gnu.org>:
>> "near to impossible", "easy", "trivial": those are synonyms only for
>> mathematicians.  And counterexamples just prove "not impossible".
>
> Stop.
>
> Let's get back to the facts: I can easily include 10000 different pdfs
> on one page (and claim that the number of files is only limited by
> memory) -- when \pdfximage is \immediate (which is normally is not).
> This works on Linux. Does this not work on Windows?

Can't check during the weekend.  What does it mean for an image to be
immediate?  Probably something different than for a write...  One
would need to patch up \includegraphics when using this with LaTeX,
right?

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From martin at oneiros.de  Fri Aug 17 23:12:59 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 17 Aug 2007 23:12:59 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <85tzqxx422.fsf@lola.goethe.zz>
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl> <868x8ayukn.fsf@lola.quinscape.zz>
	<68c491a60708171325r7b199dffx1174beb168f1859b@mail.gmail.com>
	<85tzqxx422.fsf@lola.goethe.zz>
Message-ID: <68c491a60708171412r4b8b8f6dp91bdabdb60d7d3fe@mail.gmail.com>

2007/8/17, David Kastrup <dak at gnu.org>:
> Can't check during the weekend.  What does it mean for an image to be
> immediate?  Probably something different than for a write...  One
> would need to patch up \includegraphics when using this with LaTeX,
> right?

No.
http://sarovar.org/tracker/?func=detail&atid=493&aid=498&group_id=106

Best
   Martin

From dak at gnu.org  Fri Aug 17 23:39:41 2007
From: dak at gnu.org (David Kastrup)
Date: Fri, 17 Aug 2007 23:39:41 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <68c491a60708171412r4b8b8f6dp91bdabdb60d7d3fe@mail.gmail.com>
	("Martin =?iso-8859-1?Q?Schr=F6der=22's?= message of "Fri\, 17 Aug 2007
	23\:12\:59 +0200")
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl> <868x8ayukn.fsf@lola.quinscape.zz>
	<68c491a60708171325r7b199dffx1174beb168f1859b@mail.gmail.com>
	<85tzqxx422.fsf@lola.goethe.zz>
	<68c491a60708171412r4b8b8f6dp91bdabdb60d7d3fe@mail.gmail.com>
Message-ID: <85ir7dx2le.fsf@lola.goethe.zz>

"Martin Schr?der" <martin at oneiros.de> writes:

> 2007/8/17, David Kastrup <dak at gnu.org>:
>> Can't check during the weekend.  What does it mean for an image to be
>> immediate?  Probably something different than for a write...  One
>> would need to patch up \includegraphics when using this with LaTeX,
>> right?
>
> No.
> http://sarovar.org/tracker/?func=detail&atid=493&aid=498&group_id=106

I am afraid that I am none the wiser what it would mean and imply to
turn every \pdfximage into \immediate\pdfximage.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From martin at oneiros.de  Fri Aug 17 23:49:40 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 17 Aug 2007 23:49:40 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <85ir7dx2le.fsf@lola.goethe.zz>
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl> <868x8ayukn.fsf@lola.quinscape.zz>
	<68c491a60708171325r7b199dffx1174beb168f1859b@mail.gmail.com>
	<85tzqxx422.fsf@lola.goethe.zz>
	<68c491a60708171412r4b8b8f6dp91bdabdb60d7d3fe@mail.gmail.com>
	<85ir7dx2le.fsf@lola.goethe.zz>
Message-ID: <68c491a60708171449me928f21me4726c93bce97844@mail.gmail.com>

2007/8/17, David Kastrup <dak at gnu.org>:
> I am afraid that I am none the wiser what it would mean and imply to
> turn every \pdfximage into \immediate\pdfximage.

Yes. This works:

\let\mypdfximage\pdfximage
\def\pdfximage{\immediate\mypdfximage}

Best
   Martin

From kakuto at fsci.fuk.kindai.ac.jp  Fri Aug 17 23:59:24 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Sat, 18 Aug 2007 06:59:24 +0900
Subject: [NTG-pdftex] [tex-live]   Runtime limitations on open files?
In-Reply-To: Your message of "Fri, 17 Aug 2007 22:25:28 +0200"
References: <68c491a60708171325r7b199dffx1174beb168f1859b@mail.gmail.com>
Message-ID: <200708172159.l7HLxPhW008984@jupiter.fsci.fuk.kindai.ac.jp>

Hi Martin,

> Let's get back to the facts: I can easily include 10000 different pdfs
> on one page (and claim that the number of files is only limited by
> memory) -- when \pdfximage is \immediate (which is normally is not).
> This works on Linux. Does this not work on Windows?

\documentclass[pdftex,a5paper]{book}
\usepackage[papersize={8.5in,11in}]{geometry}
\usepackage{pdfpages}
%
\let\mypdfximage\pdfximage
\def\pdfximage{\immediate\mypdfximage}
%
\begin{document}
\newcount\i
\i=2
\loop
  \ifnum\i<3000
    \includepdf[pages={-}]{\number\i.pdf}%
  \advance\i by1
\repeat

\end{document}

works also on Windows.  The "immediate" version does not
depend on the limitation on the number of open files.

Thanks,
Akira

From reinhard.kotucha at web.de  Sat Aug 18 02:31:44 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 18 Aug 2007 02:31:44 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <46C617FD.9030508@Royal-Tunbridge-Wells.Org>
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl>
	<46C617FD.9030508@Royal-Tunbridge-Wells.Org>
Message-ID: <18118.15856.32647.13095@zaphod.ms25.net>

Philip TAYLOR writes:

 > Don't rise to the bait, Hans : for every Windows-specific problem
 > mentioned on this list, there are probably ten *X-specific problems,
 > almost invariably caused by the fact that there are ten million
 > computers in the world running *X, and each and every one of
 > them has different libraries, different compilers, different
 > versions, different this, different that, different everything.
 > Windows is the one thing that keeps most of us sane : just laugh
 > when the *X guys feel so insecure that they have to launch yet
 > another attack :-)))

Phil, I respect you because I know that you are an TeX expert.  You
usually know what you are talking about and you are certainly more
familiar with TeX than anybody else.  But what you said about UNIX is
pure crap and I must admit that I'm quite disappointed.

Windows is pure crap.  At work I'm forced to to use Windows, sigh....

Since Windows doesn't provide a reasonable user interface, I installed
GNU-Emacs.

Can anyone explain me why I can access remote file systems on Windows
with Emacs (in dired mode) ***immediately*** and it takes about 20
seconds when I try the same with "Windows Explorer"?
 
Our administrators are clueless.

I'm clueless too.  But I'm happy that I have Emacs. 

Regards,
  Reinhard

-- 

----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From v.r.w.schaa at gsi.de  Fri Aug 17 16:03:02 2007
From: v.r.w.schaa at gsi.de (Volker RW Schaa)
Date: Fri, 17 Aug 2007 16:03:02 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <86k5ru1l4w.fsf@lola.quinscape.zz>
References: <86k5ru1l4w.fsf@lola.quinscape.zz>
Message-ID: <46C5AA96.8030003@gsi.de>

David Kastrup wrote:
> Hi,
> 
> we are crashing with "too many open files" on PDFTeX from TeXlive.
> The object id where this happens is 513 or so, and it would be my
> guess that PDFTeX keeps image files open as long as it has not yet
> shipped them out.
> 
> It would appear that the system limitations of win32 are much larger,
> so I suspect the runtime with which TeXlive2007 has been compiled.
I remember years ago when I started with my conference wrapper scripts
that windows crashed around that number, and because I needed to access
 >1500 papers, Fabrice Popineau (in cooperation with Hans) provided a
version with did it.
Since then I never had any reason to complain, so may be you should
ask Fabrice.

Cheers,
       Volker

From Philip-and-LeKhanh at Royal-Tunbridge-Wells.Org  Fri Aug 17 23:49:49 2007
From: Philip-and-LeKhanh at Royal-Tunbridge-Wells.Org (Philip TAYLOR)
Date: Fri, 17 Aug 2007 22:49:49 +0100
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <46C5CC1A.3070809@wxs.nl>
References: <86sl6iz83i.fsf@lola.quinscape.zz>	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl>
Message-ID: <46C617FD.9030508@Royal-Tunbridge-Wells.Org>



Hans Hagen wrote:

> I'm pretty fed up with these windows rants and 'no problem on unix' kind 
> of crap ... 

Don't rise to the bait, Hans : for every Windows-specific problem
mentioned on this list, there are probably ten *X-specific problems,
almost invariably caused by the fact that there are ten million
computers in the world running *X, and each and every one of
them has different libraries, different compilers, different
versions, different this, different that, different everything.
Windows is the one thing that keeps most of us sane : just laugh
when the *X guys feel so insecure that they have to launch yet
another attack :-)))

** Phil.

From dak at gnu.org  Sat Aug 18 11:48:29 2007
From: dak at gnu.org (David Kastrup)
Date: Sat, 18 Aug 2007 11:48:29 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <46C6B427.9030303@Royal-Tunbridge-Wells.Org> (Philip TAYLOR's
	message of "Sat\, 18 Aug 2007 09\:56\:07 +0100")
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl> <46C617FD.9030508@Royal-Tunbridge-Wells.Org>
	<18118.15856.32647.13095@zaphod.ms25.net>
	<46C6B427.9030303@Royal-Tunbridge-Wells.Org>
Message-ID: <85k5rtuqaa.fsf@lola.goethe.zz>

Philip TAYLOR <Philip-and-LeKhanh at Royal-Tunbridge-Wells.Org> writes:

> Reinhard Kotucha wrote:
>
>> Phil, I respect you because I know that you are an TeX expert.  You
>> usually know what you are talking about and you are certainly more
>> familiar with TeX than anybody else.  But what you said about UNIX is
>> pure crap and I must admit that I'm quite disappointed.
>
> Well, it was intentionally provocative, but that doesn't
> mean it's not grounded in truth : if you read back over
> the TeX live correspondence (which is the list to which
> I was referring, rather than PdfTeX or NTGTeX or whatever)
> you will see over and over again questions caused by different
> libraries, different compilers, different versions, different
> modes of linking, etc., etc., etc.  Every time I read one,
> I ask myself "Why on earth do they bother ?".

Because they can.  So they are more noticeable than the two people who
had actually managed to get it compiled under Windows.

The autoconf documentation contains a section about portable shell
programming: what kind of stuff you can rely on to work everywhere,
and what not.

It is a real horror show and a bit of a nuisance to keep everything in
mind.  The resulting scripts sometimes are a bit awkward.

But this does not hold a candle to programming cmd.exe.  Something
like

for i in /opt /usr/local /opt/* /usr/local/*
do
  if test -d "$i"/software
  then
    cd "$i"
    subdir="$i"
    break
  fi
done

becomes (in a batch file, on the command line it looks different)

for /D %%I in (C:\ D:\ C:\* D:\*) do (
  if exist %%I\software\NUL (
    %%~dI
    cd %%~pnI
    set subdir=%%I
    goto found
  )
)
:found

Except that it probably won't work when you are in a subdirectory of
C: or D: currently.  And passing the found string into Java with
"%subdir%" can cause the trailing quote to be added (because it may be
backslash-preceded) into the command line argument.

And if you use "echo on" in your batch file (the default), what gets
echoed back at you is garbage, because Windows does not manage to
treat the %%x stuff correctly when echoing.

It is _much_ _much_ harder to find the necessary information for batch
programming under Windows on the net, and while portability is not
much of a concern, the portable subset of shell programming is still
much more straightforward and usable than what cmd.exe provides.

Have you actually programmed any serious batch scripts under Windows?
Or are your opinions not based on working with the system?

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From gnwiii at gmail.com  Sat Aug 18 14:09:54 2007
From: gnwiii at gmail.com (George N. White III)
Date: Sat, 18 Aug 2007 09:09:54 -0300
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <46C5CC1A.3070809@wxs.nl>
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl>
Message-ID: <22af238a0708180509k47574f5et80dd89dcbcd12af9@mail.gmail.com>

On 8/17/07, Hans Hagen <pragma at wxs.nl> wrote:

> I'm pretty fed up with these windows rants and 'no problem on unix' kind
> of crap ... and i also much disliked the tone of mails posted to the lua
> list about this problem suggesting that it's a windows problem etc etc
> and suggesting that it's near to impssible to compile something on
> windows ... a fact that is proven wrong by fabrice and akira

Another proof that it is possible to build highly functional cross-platform
applications is the R statistical package.

In general, I don't have much patience for these religious discussions
(which have an unfortunate tendency to pop up in google searches so an
offhand comment becomes part of the folklore).

The TeX community is at a critical juncture:

1.  TeX Live has, by fiat, become the successor to teTeX on *x systems

2.  TeX Live aims to support a wider range of platforms than did
teTeX.   We have a long history of failed TeX distributions on
Windows: 4allTeX, Y&Y, fptex, which is a clear sign that making a
viable TeX distro for Windows is not easy.

There are individuals and organizations that are able to use TeX productively
under Windows and under *x, so I don't except that either of these is
fundamentally broken.  What is, however, clear, is that many people
have had or are having bad experiences.  In fact, I see this at work,
where some users insist that tex on unix is totally useless while
others assert the same about TeX on Windows.  What is the difference?

1.  In the real world, many systems are not working as they should.
When I press guy who says tex on unix is useless it turns out that his
problems are: a) he wants to use
a printer on a Windows server that is not configured on the unix machine, b) the
system default is for a4 paper and he can't be bothered to figure out
how to adjust this, and c) there is nothing similar to WinEDT on the
system.  The guy who says TeX on Windows is useless has installed
4allTeX, Y&Y, fptex, and miktex along with copies of his $HOME/texmf
from unix but hasn't got a working perl, ruby, or ghostscript and is
trying to use notepad as his editor.  His plain tex documents compile,
but he can't get pdflatex to work because he has some outdated
packages that assume pdftex is used only to produce .pdf output.  He
can't troubleshoot because the command line tools (find, whence, etc.)
he knows from *x aren't available.

2.  Different environments require different work habits.   Many
Windows TeX users
never see a command line, equate TeX with WinEDT, and are only vaguely
aware of the individual programs, much less perl, ghostscript, etc.

3.  Hardware differences: machines currently in wide use range from
PIII 500 mhz
with 256M RAM and 20GB disk to multi-core CPU, multi-GB RAM, and
multi-TB disk.

To me, the fundamental difference is that *x systems have always been
based on a toolkit approach where a set of core utilities are always
available.  People will tell you that you can have bash, awk, sed,
perl, ghostscript, make, compilers, etc. on Windows, but the practical
reality is that such tools aren't part of the standard base
configuration and suffer from performance issues.   The pdftex build
script works on most *x systems using only standard packages from the
OS distribution.

I have written some applications that are used on both *x and windows.
  While it is possible to have a build environment on Windows (using
Msys),  it has been much easier to use a cross-compiler under linux,
e.g., <http://www.stats.ox.ac.uk/pub/Rtools/>.  It would be
interesting to try using these tools to create a build-win32.sh for
pdftex.

-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From dak at gnu.org  Sat Aug 18 14:32:03 2007
From: dak at gnu.org (David Kastrup)
Date: Sat, 18 Aug 2007 14:32:03 +0200
Subject: [NTG-pdftex] [tex-live]   Runtime limitations on open files?
In-Reply-To: <22af238a0708180509k47574f5et80dd89dcbcd12af9@mail.gmail.com>
	(George N. White, III's message of "Sat\,
	18 Aug 2007 09\:09\:54 -0300")
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl>
	<22af238a0708180509k47574f5et80dd89dcbcd12af9@mail.gmail.com>
Message-ID: <857intuipo.fsf@lola.goethe.zz>

"George N. White III" <gnwiii at gmail.com> writes:

> There are individuals and organizations that are able to use TeX
> productively under Windows and under *x, so I don't except that
> either of these is fundamentally broken.  What is, however, clear,
> is that many people have had or are having bad experiences.  In
> fact, I see this at work, where some users insist that tex on unix
> is totally useless while others assert the same about TeX on
> Windows.  What is the difference?

Note that once somebody has gotten TeX to compile and work, using it
becomes reasonably straightforward.  The really rough penalties are
not on the users, they are on the developers because Windows does not
provide any work environment that would be available anywhere else.

So if you are staying Windows-only, you might be able to find a
compromise working for you.  If you want to develop cross-platform,
Windows is going to be the single most painful thing.

Why do we have so many Windows-only distributions?  Why is it that
among the widely portable distributions, the Windows ports are, if at
all, done by specialists?

Supporting Windows for cross-platform applications is always going to
be extremely expensive with regard to developer resources because on
Windows most things don't give a damn about standards or usability,
and the workaround applications and libraries (where you don't get to
see this) are Windows-only and thus not generally useful for portable
application development.

> I have written some applications that are used on both *x and
> windows.  While it is possible to have a build environment on
> Windows (using Msys), it has been much easier to use a
> cross-compiler under linux, e.g.,
> <http://www.stats.ox.ac.uk/pub/Rtools/>.  It would be interesting to
> try using these tools to create a build-win32.sh for pdftex.

A working cross compilation environment would help a _lot_.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From dak at gnu.org  Sat Aug 18 14:45:48 2007
From: dak at gnu.org (David Kastrup)
Date: Sat, 18 Aug 2007 14:45:48 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <46C6E67E.6000903@Royal-Tunbridge-Wells.Org> (Philip TAYLOR's
	message of "Sat\, 18 Aug 2007 13\:30\:54 +0100")
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl> <46C617FD.9030508@Royal-Tunbridge-Wells.Org>
	<18118.15856.32647.13095@zaphod.ms25.net>
	<46C6B427.9030303@Royal-Tunbridge-Wells.Org>
	<85k5rtuqaa.fsf@lola.goethe.zz>
	<46C6E67E.6000903@Royal-Tunbridge-Wells.Org>
Message-ID: <85wsvtt3ib.fsf@lola.goethe.zz>

Philip TAYLOR <Philip-and-LeKhanh at Royal-Tunbridge-Wells.Org> writes:

> David Kastrup wrote:
>
>> Have you actually programmed any serious batch scripts under Windows?
>
> Yes, many : after leaving VMS (a forced migration, not my choice)
> I have worked only with Windows.  Probably the key to success
> is a familiarity with the HELP system :
>
>> In addition, substitution of FOR variable references has been enhanced.
>> You can now use the following optional syntax:
>>
>>     %~I         - expands %I removing any surrounding quotes (")
>>     %~fI        - expands %I to a fully qualified path name
>>     %~dI        - expands %I to a drive letter only
>>     %~pI        - expands %I to a path only
>>     %~nI        - expands %I to a file name only
>>     %~xI        - expands %I to a file extension only
>>     %~sI        - expanded path contains short names only
>>     %~aI        - expands %I to file attributes of file
>>     %~tI        - expands %I to date/time of file
>>     %~zI        - expands %I to size of file
>>     %~$PATH:I   - searches the directories listed in the PATH
>>                    environment variable and expands %I to the
>>                    fully qualified name of the first one found.
>>                    If the environment variable name is not
>>                    defined or the file is not found by the
>>                    search, then this modifier expands to the
>>                    empty string
>>
>> The modifiers can be combined to get compound results:
>>
>>     %~dpI       - expands %I to a drive letter and path only
>>     %~nxI       - expands %I to a file name and extension only
>>     %~fsI       - expands %I to a full path name with short names only
>>     %~dp$PATH:I - searches the directories listed in the PATH
>>                    environment variable for %I and expands to the
>>                    drive letter and path of the first one found.
>>     %~ftzaI     - expands %I to a DIR like output line
>>
>> In the above examples %I and PATH can be replaced by other valid
>> values.  The %~ syntax is terminated by a valid FOR variable name.
>> Picking upper case variable names like %I makes it more readable and
>> avoids confusion with the modifiers, which are not case sensitive.

It must be mentioned that one actually needs single-iteration
for-loops for almost any useful variable manipulation.  Quite
intuitive.

> Also very useful is Log Parser 2.2 (which does far far more than
> parsing log files !) and, of course, Perl.

Perl is not exactly creditable to Windows now, is it?

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From hanthethanh at gmail.com  Sat Aug 18 14:58:16 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Sat, 18 Aug 2007 14:58:16 +0200
Subject: [NTG-pdftex] [tex-live]  Runtime limitations on open files?
Message-ID: <74f506dc0708180558y48dd73dfxb0510a1f1605c0c2@mail.gmail.com>

On Sat, Aug 18, 2007 at 02:32:03PM +0200, David Kastrup wrote:
>
> [...]
>
> > I have written some applications that are used on both *x and
> > windows.  While it is possible to have a build environment on
> > Windows (using Msys), it has been much easier to use a
> > cross-compiler under linux, e.g.,
> > <http://www.stats.ox.ac.uk/pub/Rtools/>.  It would be interesting to
> > try using these tools to create a build-win32.sh for pdftex.
>
> A working cross compilation environment would help a _lot_.

since the very beginning of pdftex I used to cross-compile
pdftex binaries using the following cross-compilers:

djgpp
mingw32
gnuwin32

(and recently also gcc for linux ppc)

Then I didn't need to do that anymore, so I stopped
being interested in this issue. But until now I can still
cross-compile at least djgpp from the latest pdftex sources.
However I heard from Hans that djgpp binaries are not that
fast as those compiled by mingw32.

IIRC Taco is using mingw32 to build luatex binaries for
windows, so he may have more useful input.

Anyway, if anyone needs djgpp binaries of pdftex, I can make
that immediately.

Thanh

From hanthethanh at gmail.com  Sat Aug 18 15:01:57 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Sat, 18 Aug 2007 15:01:57 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
Message-ID: <74f506dc0708180601g1bb24f27we9788ee59be76a53@mail.gmail.com>

fwiw, I find msys http://www.mingw.org/msys.shtml a very
useful thing anytime I need to do any shell scripting on
windows.

Thanh

On Sat, Aug 18, 2007 at 11:48:29AM +0200, David Kastrup wrote:
> But this does not hold a candle to programming cmd.exe.  Something
> like
>
> for i in /opt /usr/local /opt/* /usr/local/*
> do
>   if test -d "$i"/software
>   then
>     cd "$i"
>     subdir="$i"
>     break
>   fi
> done
>
> becomes (in a batch file, on the command line it looks different)
>
> for /D %%I in (C:\ D:\ C:\* D:\*) do (
>   if exist %%I\software\NUL (
>     %%~dI
>     cd %%~pnI
>     set subdir=%%I
>     goto found
>   )
> )
>
> [...]

From dak at gnu.org  Sat Aug 18 15:24:34 2007
From: dak at gnu.org (David Kastrup)
Date: Sat, 18 Aug 2007 15:24:34 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <74f506dc0708180601g1bb24f27we9788ee59be76a53@mail.gmail.com>
	(Thanh Han The's message of "Sat\, 18 Aug 2007 15\:01\:57 +0200")
References: <74f506dc0708180601g1bb24f27we9788ee59be76a53@mail.gmail.com>
Message-ID: <85eji1t1pp.fsf@lola.goethe.zz>

"Thanh Han The" <hanthethanh at gmail.com> writes:

> fwiw, I find msys http://www.mingw.org/msys.shtml a very
> useful thing anytime I need to do any shell scripting on
> windows.

Yes, but there is a bootstrapping problem when doing software
installers.  You can't use software until you have unpacked it...

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From gnwiii at gmail.com  Sat Aug 18 19:34:41 2007
From: gnwiii at gmail.com (George N. White III)
Date: Sat, 18 Aug 2007 14:34:41 -0300
Subject: [NTG-pdftex] [tex-live]  Runtime limitations on open files?
In-Reply-To: <85eji1t1pp.fsf@lola.goethe.zz>
References: <74f506dc0708180601g1bb24f27we9788ee59be76a53@mail.gmail.com>
	<85eji1t1pp.fsf@lola.goethe.zz>
Message-ID: <22af238a0708181034k2de42f23j8de05e672267c770@mail.gmail.com>

On 8/18/07, David Kastrup <dak at gnu.org> wrote:

> "Thanh Han The" <hanthethanh at gmail.com> writes:
>
> > fwiw, I find msys http://www.mingw.org/msys.shtml a very
> > useful thing anytime I need to do any shell scripting on
> > windows.

I used to use msys and gnuwin32 tools, but now I find I prefer to run
real linux in a VMware appliance so I have have current versions and
avoid the little compatibility glitches.   The free VMware player is
easy to install and you can copy applicances around.  Appliances can
mount windows shares. Since the systems I'm using tend to be older
hardware I find it better to use the existing Exceed or Xming session
for the display rather than having two X servers running.   Building
pdftex in a VMware appliance running linux is quite practical.

> Yes, but there is a bootstrapping problem when doing software
> installers.  You can't use software until you have unpacked it...

I should mention that there are debian packages for the mingw cross-compiler.

I don't have debian at home, so I use the archive from
<http://www.stats.ox.ac.uk/pub/Rtools/i586-cross-tools.tar.bz2>.  The
compiler is quite old:
$ i586-mingw32-gcc --version
i586-mingw32-gcc (GCC) 3.4.5 (mingw special)

I think pdftex builds with such old gcc on *x.  Today I tried building
pdftex-1.40.5 with this cross-compiler.  There were some configure issues

checking size of long... configure: error: can not run test program while cross
compiling
configure: error: ../../../src/texk/web2c/configure failed for web2c
configure: error: ../../src/texk/configure failed for texk

I got as far as tangleboot.o, but then encounter:

i586-mingw32-gcc -o tangleboot tangleboot.o  lib/lib.a ../kpathsea/.libs/libkpat
hsea.a -lm
../kpathsea/.libs/libkpathsea.a(progname.o):progname.c:(.text+0x69):
undefined reference to `_set_home_warning'

This seems to refer to stuff from texk/contrib that isn't included
with pdftex-1.40.5.

One strategy that has worked in the past is to steal as much as possible (e.g.,
generated web2c sources) from a linux build.   So you need the usual
libraries and
one additional library for Win32 compatibility/features.  My
experience from other projects has been that much of what you get from
configure on linux stays the same using mingw, so rather than fighting
the "can not run test program while cross compiling" issues it may be
easier to manipulate the files generated on linux.   I don't see the
need to use
similar hardware for the linux build as a significant limitation,
although I suppose
there will be interest in using OS X for Intel to build Win32 binaries.

I suspect one reason the Win32 build systems have lagged is that until
recently the performance benefits of commercial compilers were useful,
so it didn't make much
sense to invest effort in building with free tools.   GCC code has
been getting better,
and the hardware is faster, so I suspect the advantage of a commercial
compiler is
no longer much of an issue.

-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From reinhard.kotucha at web.de  Sun Aug 19 01:58:18 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sun, 19 Aug 2007 01:58:18 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <46C6B427.9030303@Royal-Tunbridge-Wells.Org>
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl>
	<46C617FD.9030508@Royal-Tunbridge-Wells.Org>
	<18118.15856.32647.13095@zaphod.ms25.net>
	<46C6B427.9030303@Royal-Tunbridge-Wells.Org>
Message-ID: <18119.34714.926471.850505@zaphod.ms25.net>

Philip TAYLOR writes:

 > [...] there are ten million computers in the world running *X, and
 > each and every one of them has different libraries, different
 > compilers, different versions, different this, different that,
 > different everything.

I'm using Gentoo Linux, a source code distribution, and I'm glad to
see how good it works.  I'm not a C programmer and I'll certainly have
a problem if not everything compiles without manual interaction.  But
everything works perfectly.  Yes, there are many different libraries
with different version numbers.  But it doesn't matter because
programs usually know which (versions of) libraries they need.   

There are different versions of .DLL files on Windows too,
unfortunately the file name doesn't contain the version number.  If
people always use standard tools to install software, the installer
certainly looks into the .DLL file and prevents a recent version from
being replaced by an older one.  But there are people you called
monkeys in a previous mail.  And there are many monkeys in the Windows
world. 

I often get CDs containing data sheets.  They usually contain PDF
files.  Some of them come with a toc file in HTML, but some require
that you have to install them, whatever this means.  Some even require
that you have admin rights.  These CDs go into the trash can
immediately.  Either they want to break my system deliberately, what I
don't believe because they want me to buy their products, or they are
what you call monkeys.  I doubt that anybody who doesn't know what an
admin account is good for is able to install software on my system
properly. 

There are probably monkeys in the UNIX world too, but I think that the
fact that shared libraries provide the version number in the file name
is much more robust than the Windows approach (which is definitely not
monkey proof).

What you said about UNIX was an assumption.  If you have some time,
why not install a Linux system, maybe on a virtual machine, and play
with it?  You'll see that all your assumptions are wrong.

There are many Linux distributions available but I think that Gentoo
is the best one for you because, as far as I know you, it's imortant
for you to know how things work.  You have to do things manually while
other distributions provide menus.  But you immediately see how things
work.  I really hope that you find some time to play with it.

 > Yes, there is a ?registry? tweak that will stop explorer from
 > trying to enumerate remote (networked) files; it is a pain, and I
 > completely agree.  When I find the reference, I'll forward it to
 > you (and your administrators !).

That would be nice.  The problem exists on XP but not on 9x.  My first
assumption was that it is a DNS problem but specifying the IP number
instead of the hostname didn't help.  I now also believe that there is
something wrong either in the network setup or the registry.  A
colleague already looked into the network setup and found a few
improvements but the main problem still exists.  Fabrice said that the
registry is a distributed database, so I assume that I can't make a
backup before I edit it.  Hence, I'm interested in some hints from
people who know what has to be changed.  Making own experiments is too
dangerous.  I'm on vacation at the moment, but I'll come back to the
issue later.

 > P.S. About as "intuitive" as [con]cat[enating] a file with
 > nothing in order simply to see it on the screen ...

You *can* [ab]use 'cat' to print a file to screen but the UNIX tool
designed for this task is 'more' and not 'cat'.  There is also 'less',
which allows you to scroll backwards but it's probably not installed
on every UNIX system.    

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From martin at oneiros.de  Sun Aug 19 02:21:41 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sun, 19 Aug 2007 02:21:41 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <18119.34714.926471.850505@zaphod.ms25.net>
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl> <46C617FD.9030508@Royal-Tunbridge-Wells.Org>
	<18118.15856.32647.13095@zaphod.ms25.net>
	<46C6B427.9030303@Royal-Tunbridge-Wells.Org>
	<18119.34714.926471.850505@zaphod.ms25.net>
Message-ID: <68c491a60708181721q2e839867wf662023234655e06@mail.gmail.com>

2007/8/19, Reinhard Kotucha <reinhard.kotucha at web.de>:
> Philip TAYLOR writes:
>
>  > [...] there are ten million computers in the world running *X, and
>  > each and every one of them has different libraries, different
>  > compilers, different versions, different this, different that,
>  > different everything.
>
> I'm using Gentoo Linux, a source code distribution, and I'm glad to
> see how good it works.  I'm not a C programmer and I'll

Please stop this discussion now. It has totally left its subject and I
don't think anybody here is really interested in a Holy war.

Windows exists and has users who want to use TeX. We have to support
them. The same is true for Unix. EOD.

Best
   Martin

From martin at oneiros.de  Sun Aug 19 15:06:45 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sun, 19 Aug 2007 15:06:45 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <46C80543.3020306@Royal-Tunbridge-Wells.Org>
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl> <46C617FD.9030508@Royal-Tunbridge-Wells.Org>
	<18118.15856.32647.13095@zaphod.ms25.net>
	<46C6B427.9030303@Royal-Tunbridge-Wells.Org>
	<18119.34714.926471.850505@zaphod.ms25.net>
	<68c491a60708181721q2e839867wf662023234655e06@mail.gmail.com>
	<46C80543.3020306@Royal-Tunbridge-Wells.Org>
Message-ID: <68c491a60708190606p69386020yd6d4534e00af005c@mail.gmail.com>

2007/8/19, Philip TAYLOR <Philip-and-LeKhanh at royal-tunbridge-wells.org>:
> Martin, it was your "rant" [1] (Hans's terminilogy) that triggered
> this debate; you are the last person to be in a position to

That wasn't a rant (and it was with tongue in cheek), that was a try
to state a fact that David didn't make clear: That his problems (and
his fix) where on Windows. This could all have been over sooner if
David had given more information up front.

If you want to continue this discussion, fine; but please leave
ntg-pdftex out of this.

Best
   Martin

From gnwiii at gmail.com  Sun Aug 19 15:27:42 2007
From: gnwiii at gmail.com (George N. White III)
Date: Sun, 19 Aug 2007 10:27:42 -0300
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <68c491a60708190606p69386020yd6d4534e00af005c@mail.gmail.com>
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl> <46C617FD.9030508@Royal-Tunbridge-Wells.Org>
	<18118.15856.32647.13095@zaphod.ms25.net>
	<46C6B427.9030303@Royal-Tunbridge-Wells.Org>
	<18119.34714.926471.850505@zaphod.ms25.net>
	<68c491a60708181721q2e839867wf662023234655e06@mail.gmail.com>
	<46C80543.3020306@Royal-Tunbridge-Wells.Org>
	<68c491a60708190606p69386020yd6d4534e00af005c@mail.gmail.com>
Message-ID: <22af238a0708190627w14c13146occ2661de9ab49d3f@mail.gmail.com>

On 8/19/07, Martin Schr?der <martin at oneiros.de> wrote:

> 2007/8/19, Philip TAYLOR <Philip-and-LeKhanh at royal-tunbridge-wells.org>:
> > Martin, it was your "rant" [1] (Hans's terminilogy) that triggered
> > this debate; you are the last person to be in a position to
>
> That wasn't a rant (and it was with tongue in cheek), that was a try
> to state a fact that David didn't make clear: That his problems (and
> his fix) where on Windows. This could all have been over sooner if
> David had given more information up front.
>
> If you want to continue this discussion, fine; but please leave
> ntg-pdftex out of this.

What would be useful is discussion of particular problems that need
to be addressed, with the objective of 1) educating those of us with
experience slanted to one platform and 2) coming up with solutions.

There is no shortage of problems:

1) every "#Ifdef PLATFORM" in the sources.  In some cases "PLATFORM"
seems to have been abused to mean "MS_Visual_C" and may not be
appropriate when using a cross-compiler.   In others it may have been
used where an autoconf #defined value would be better.

2) every teTeX shell script


-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From dak at gnu.org  Sun Aug 19 18:20:41 2007
From: dak at gnu.org (David Kastrup)
Date: Sun, 19 Aug 2007 18:20:41 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <46C70FF2.8000406@Royal-Tunbridge-Wells.Org> (Philip TAYLOR's
	message of "Sat\, 18 Aug 2007 16\:27\:46 +0100")
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl> <46C617FD.9030508@Royal-Tunbridge-Wells.Org>
	<18118.15856.32647.13095@zaphod.ms25.net>
	<46C6B427.9030303@Royal-Tunbridge-Wells.Org>
	<85k5rtuqaa.fsf@lola.goethe.zz>
	<46C6E67E.6000903@Royal-Tunbridge-Wells.Org>
	<85wsvtt3ib.fsf@lola.goethe.zz>
	<46C70FF2.8000406@Royal-Tunbridge-Wells.Org>
Message-ID: <85odh3sdgm.fsf@lola.goethe.zz>

Philip TAYLOR <Philip-and-LeKhanh at Royal-Tunbridge-Wells.Org> writes:

> David Kastrup wrote:
>
>> It must be mentioned that one actually needs single-iteration
>> for-loops for almost any useful variable manipulation.  Quite
>> intuitive.
>
> P.S. About as "intuitive" as [con]cat[enating] a file with
> nothing in order simply to see it on the screen ...

Nobody does that in Unix and it would not change anything.  The Cygwin
"cat", in contrast, contains some hackery to interpret ANSI color
sequences on Windows, since Windows, surprise, surprise, does not
offer a standard-compliant console.

In short: you are complaining about a workaround for a deficiency
limited to Windows.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From dak at gnu.org  Sun Aug 19 18:23:54 2007
From: dak at gnu.org (David Kastrup)
Date: Sun, 19 Aug 2007 18:23:54 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <68c491a60708181721q2e839867wf662023234655e06@mail.gmail.com>
	("Martin =?iso-8859-1?Q?Schr=F6der=22's?= message of "Sun\, 19 Aug 2007
	02\:21\:41 +0200")
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl> <46C617FD.9030508@Royal-Tunbridge-Wells.Org>
	<18118.15856.32647.13095@zaphod.ms25.net>
	<46C6B427.9030303@Royal-Tunbridge-Wells.Org>
	<18119.34714.926471.850505@zaphod.ms25.net>
	<68c491a60708181721q2e839867wf662023234655e06@mail.gmail.com>
Message-ID: <85k5rrsdb9.fsf@lola.goethe.zz>

"Martin Schr?der" <martin at oneiros.de> writes:

> Please stop this discussion now. It has totally left its subject and
> I don't think anybody here is really interested in a Holy war.
>
> Windows exists and has users who want to use TeX. We have to support
> them.

So can we have the one-liner extending the number of open files to
2048?  And as a bonus point, can somebody tell me how I get a working
Windows executable once this has been done in the source?

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From dak at gnu.org  Sun Aug 19 18:30:36 2007
From: dak at gnu.org (David Kastrup)
Date: Sun, 19 Aug 2007 18:30:36 +0200
Subject: [NTG-pdftex] [tex-live]   Runtime limitations on open files?
In-Reply-To: <46C8492F.8000308@Royal-Tunbridge-Wells.Org> (Philip TAYLOR's
	message of "Sun\, 19 Aug 2007 14\:44\:15 +0100")
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl> <46C617FD.9030508@Royal-Tunbridge-Wells.Org>
	<18118.15856.32647.13095@zaphod.ms25.net>
	<46C6B427.9030303@Royal-Tunbridge-Wells.Org>
	<18119.34714.926471.850505@zaphod.ms25.net>
	<68c491a60708181721q2e839867wf662023234655e06@mail.gmail.com>
	<46C80543.3020306@Royal-Tunbridge-Wells.Org>
	<68c491a60708190606p69386020yd6d4534e00af005c@mail.gmail.com>
	<22af238a0708190627w14c13146occ2661de9ab49d3f@mail.gmail.com>
	<46C8492F.8000308@Royal-Tunbridge-Wells.Org>
Message-ID: <85d4xjsd03.fsf@lola.goethe.zz>

Philip TAYLOR <Philip-and-LeKhanh at Royal-Tunbridge-Wells.Org> writes:

> Agreed.  I would also add that, as a non-member of the NTG-PdfTeX
> list, all of my postings /must/ have been approved by the moderator.
> I can therefore only think that the moderator regards them as being
> sufficiently on-topic to allow them onto the list, even if Martin
> disagrees.

I have encountered mailing lists with a heavy-handed moderator like
that.  On most mailing lists, however, the moderator does not weed out
discussions between dissenting adults but rather makes sure that no
off-topic or deficient material (spam, sometimes completely
inappropriate postings by newcomers, oversized attachments, and so on)
gets on.

It is a heavy-handed move to actually censor postings, not usually
done lightly or without warning, and a warning takes work.

Please don't confuse a lack of censorship with personal approval: that
is heaping more responsibility/blame on list moderators than they
deserve.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From martin at oneiros.de  Sun Aug 19 21:53:25 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sun, 19 Aug 2007 21:53:25 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <85k5rrsdb9.fsf@lola.goethe.zz>
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl> <46C617FD.9030508@Royal-Tunbridge-Wells.Org>
	<18118.15856.32647.13095@zaphod.ms25.net>
	<46C6B427.9030303@Royal-Tunbridge-Wells.Org>
	<18119.34714.926471.850505@zaphod.ms25.net>
	<68c491a60708181721q2e839867wf662023234655e06@mail.gmail.com>
	<85k5rrsdb9.fsf@lola.goethe.zz>
Message-ID: <68c491a60708191253i224cb5aes741dd14f5bc87934@mail.gmail.com>

2007/8/19, David Kastrup <dak at gnu.org>:
> So can we have the one-liner extending the number of open files to
> 2048?

When you tell us why making \pdfximage non-\immediate doesn't help
you, i.e. why you need the change.

Best
   Martin

From dak at gnu.org  Sun Aug 19 22:15:12 2007
From: dak at gnu.org (David Kastrup)
Date: Sun, 19 Aug 2007 22:15:12 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <68c491a60708191253i224cb5aes741dd14f5bc87934@mail.gmail.com>
	("Martin =?iso-8859-1?Q?Schr=F6der=22's?= message of "Sun\, 19 Aug 2007
	21\:53\:25 +0200")
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl> <46C617FD.9030508@Royal-Tunbridge-Wells.Org>
	<18118.15856.32647.13095@zaphod.ms25.net>
	<46C6B427.9030303@Royal-Tunbridge-Wells.Org>
	<18119.34714.926471.850505@zaphod.ms25.net>
	<68c491a60708181721q2e839867wf662023234655e06@mail.gmail.com>
	<85k5rrsdb9.fsf@lola.goethe.zz>
	<68c491a60708191253i224cb5aes741dd14f5bc87934@mail.gmail.com>
Message-ID: <85fy2fqo1b.fsf@lola.goethe.zz>

"Martin Schr?der" <martin at oneiros.de> writes:

> 2007/8/19, David Kastrup <dak at gnu.org>:
>> So can we have the one-liner extending the number of open files to
>> 2048?
>
> When you tell us why making \pdfximage non-\immediate doesn't help

You mean, making it \immediate.

> you, i.e. why you need the change.

Queens don't make bargains.

More seriously: I am in maintenance mode here, trying to get a large
XMLTeX based application to run at a customer site with minimal
changes.  I will do a code audit tomorrow in order to figure out what
may be possible there.  Since do a heavy amount of PDFTeX specific
manipulation, I doubt that a simple-minded change like the one you
proposed will not break things and/or blow up the size of documents
(and they are already in the Gigabyte range).

I don't quite see why the possibility of a workaround patching
internals of LaTeX with at least adverse effects on possible file size
should constitute reason not to bother about raising the limit.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From pragma at wxs.nl  Mon Aug 20 00:58:36 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 20 Aug 2007 00:58:36 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <85fy2fqo1b.fsf@lola.goethe.zz>
References: <86sl6iz83i.fsf@lola.quinscape.zz>	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>	<46C5CC1A.3070809@wxs.nl>
	<46C617FD.9030508@Royal-Tunbridge-Wells.Org>	<18118.15856.32647.13095@zaphod.ms25.net>	<46C6B427.9030303@Royal-Tunbridge-Wells.Org>	<18119.34714.926471.850505@zaphod.ms25.net>	<68c491a60708181721q2e839867wf662023234655e06@mail.gmail.com>	<85k5rrsdb9.fsf@lola.goethe.zz>	<68c491a60708191253i224cb5aes741dd14f5bc87934@mail.gmail.com>
	<85fy2fqo1b.fsf@lola.goethe.zz>
Message-ID: <46C8CB1C.1060707@wxs.nl>

David Kastrup wrote:

> I don't quite see why the possibility of a workaround patching
> internals of LaTeX with at least adverse effects on possible file size
> should constitute reason not to bother about raising the limit.

well, since taco (who makes those final decisions now is away for two 
weeks) you need to apply the 'open source principle' and 'take the 
source, patch it and do your own good'; after all, it's the teams 
responsibility to make sure that pdftex is stable

since the 2048 patch has always been there but for some reason was 
commented (i'm not going to repeat possible reasons) we will have to 
make sure nothing else (also for other platforms) breaks

so, in any case, a patch has to wait till a next release (although of 
course akira is free to jump the number for his code branch)

but even then any limit (2048) will be reached at some point (which btw 
is one of the reasons why context users have control over xform behaviour)

anyhow, the xform primitive redefinition that martin posted is ok and 
rather harmless (if you include the same page from a document many 
times, you get a bigger file, but that's pretty each to catch in 
supervising macro code); also, i assume that latex has only a few places 
where xform inclusion is dealt with so patching cannot be that complex; 
you can even decide to apply martins hack selectively to your code

(anyone dealing with huge pdf files and inclusions professionally will 
at some point need dedicated code to deal with it)

also given the not so nice tone of this (also platform related) 
discussion i suggest we stop this thread

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From reinhard.kotucha at web.de  Mon Aug 20 01:00:47 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 20 Aug 2007 01:00:47 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <68c491a60708191253i224cb5aes741dd14f5bc87934@mail.gmail.com>
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl>
	<46C617FD.9030508@Royal-Tunbridge-Wells.Org>
	<18118.15856.32647.13095@zaphod.ms25.net>
	<46C6B427.9030303@Royal-Tunbridge-Wells.Org>
	<18119.34714.926471.850505@zaphod.ms25.net>
	<68c491a60708181721q2e839867wf662023234655e06@mail.gmail.com>
	<85k5rrsdb9.fsf@lola.goethe.zz>
	<68c491a60708191253i224cb5aes741dd14f5bc87934@mail.gmail.com>
Message-ID: <18120.52127.246096.846178@zaphod.ms25.net>

Martin Schr?der writes:

 > When you tell us why making \pdfximage non-\immediate doesn't help
 > you, i.e. why you need the change.

I already experimented with \immediate but in my script it doesn't
make any difference.  Maybe I overlooked something.

If you want to try yourself, download

   http://ms25.ath.cx/pdfcatdir

Run ./pdfcatdir --help for more information.

If you want to play with \immediate, you don't have to modify
pdfcatdir itself.  Just run pdfcatdir --debug and the generated .tex
file will not be removed.  You can edit it and then run

   pdftex -ini <dirname>.tex

When I replace \pdfximage by \immediate\pdfximage I don't see any
difference in the output of 

   strace -f -e open,close pdfcatdir somedir


Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From dak at gnu.org  Mon Aug 20 01:51:14 2007
From: dak at gnu.org (David Kastrup)
Date: Mon, 20 Aug 2007 01:51:14 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <46C8CB1C.1060707@wxs.nl> (Hans Hagen's message of "Mon\,
	20 Aug 2007 00\:58\:36 +0200")
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<200708171550.l7HFo6bT007782@jupiter.fsci.fuk.kindai.ac.jp>
	<68c491a60708170902g6ae9e1d2vb841b26d89804676@mail.gmail.com>
	<46C5CC1A.3070809@wxs.nl> <46C617FD.9030508@Royal-Tunbridge-Wells.Org>
	<18118.15856.32647.13095@zaphod.ms25.net>
	<46C6B427.9030303@Royal-Tunbridge-Wells.Org>
	<18119.34714.926471.850505@zaphod.ms25.net>
	<68c491a60708181721q2e839867wf662023234655e06@mail.gmail.com>
	<85k5rrsdb9.fsf@lola.goethe.zz>
	<68c491a60708191253i224cb5aes741dd14f5bc87934@mail.gmail.com>
	<85fy2fqo1b.fsf@lola.goethe.zz> <46C8CB1C.1060707@wxs.nl>
Message-ID: <85hcmvozgt.fsf@lola.goethe.zz>

Hans Hagen <pragma at wxs.nl> writes:

> David Kastrup wrote:
>
>> I don't quite see why the possibility of a workaround patching
>> internals of LaTeX with at least adverse effects on possible file size
>> should constitute reason not to bother about raising the limit.
>
> well, since taco (who makes those final decisions now is away for two 
> weeks) you need to apply the 'open source principle' and 'take the 
> source, patch it and do your own good';

Oh, I would if I could get it to compile...  But it would seem that
the most viable way to do this for me would be to patch the binary.

It is even conceivable that getting a cross-compilation environment to
work would be all that would be required here, without any patch of
the source: it is not win32 per se that has the limitation, but rather
the used C library runtime, and this runtime might well be different
in a cross-compilation setting.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From martin at oneiros.de  Mon Aug 20 02:17:23 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Mon, 20 Aug 2007 02:17:23 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <18120.52127.246096.846178@zaphod.ms25.net>
References: <86sl6iz83i.fsf@lola.quinscape.zz> <46C5CC1A.3070809@wxs.nl>
	<46C617FD.9030508@Royal-Tunbridge-Wells.Org>
	<18118.15856.32647.13095@zaphod.ms25.net>
	<46C6B427.9030303@Royal-Tunbridge-Wells.Org>
	<18119.34714.926471.850505@zaphod.ms25.net>
	<68c491a60708181721q2e839867wf662023234655e06@mail.gmail.com>
	<85k5rrsdb9.fsf@lola.goethe.zz>
	<68c491a60708191253i224cb5aes741dd14f5bc87934@mail.gmail.com>
	<18120.52127.246096.846178@zaphod.ms25.net>
Message-ID: <68c491a60708191717p17db43b3jcfb8d8f79629006c@mail.gmail.com>

2007/8/20, Reinhard Kotucha <reinhard.kotucha at web.de>:
> I already experimented with \immediate but in my script it doesn't
> make any difference.  Maybe I overlooked something.

The reason is your use of -initex:
void deleteimage(integer img)
{
    if (iniversion)
        return; // The image may be \dump{}ed to a format

Best
   Martin

From martin at oneiros.de  Mon Aug 20 02:31:48 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Mon, 20 Aug 2007 02:31:48 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <68c491a60708191717p17db43b3jcfb8d8f79629006c@mail.gmail.com>
References: <86sl6iz83i.fsf@lola.quinscape.zz>
	<46C617FD.9030508@Royal-Tunbridge-Wells.Org>
	<18118.15856.32647.13095@zaphod.ms25.net>
	<46C6B427.9030303@Royal-Tunbridge-Wells.Org>
	<18119.34714.926471.850505@zaphod.ms25.net>
	<68c491a60708181721q2e839867wf662023234655e06@mail.gmail.com>
	<85k5rrsdb9.fsf@lola.goethe.zz>
	<68c491a60708191253i224cb5aes741dd14f5bc87934@mail.gmail.com>
	<18120.52127.246096.846178@zaphod.ms25.net>
	<68c491a60708191717p17db43b3jcfb8d8f79629006c@mail.gmail.com>
Message-ID: <68c491a60708191731h5fce4866mec1608a7fbc43417@mail.gmail.com>

2007/8/20, Martin Schr?der <martin at oneiros.de>:
> void deleteimage(integer img)
> {
>     if (iniversion)
>         return; // The image may be \dump{}ed to a format

Btw: This is new in 1.40.4 and fixes bug #824.

Best
   Martin

From kakuto at fsci.fuk.kindai.ac.jp  Mon Aug 20 02:58:52 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Mon, 20 Aug 2007 09:58:52 +0900
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: Your message of "Sun, 19 Aug 2007 18:23:54 +0200"
References: <85k5rrsdb9.fsf@lola.goethe.zz>
Message-ID: <200708200058.l7K0wrgd018944@jupiter.fsci.fuk.kindai.ac.jp>

Hi David,

> So can we have the one-liner extending the number of open files to
> 2048?  And as a bonus point, can somebody tell me how I get a working
> Windows executable once this has been done in the source?

(1)
Plese get

ftp://akagi.ms.u-tokyo.ac.jp/pub/TeX/win32/pdftex-w32.tar.gz

and expand the tarball in a suitable temporary directory.

(2)
Copy "pdftex.dll" and "kpathsea356.dll" into bin/win32 of texlive.

(3)
Copy pdftex.pool into the directory for pool files of texlive.

(4)
Throw away all files in the tarball except for the above three.

Note that pdftex.pool must be replaced, because pdfTeX version
is different from TeXLive 2007.

Best regards,
Akira

From dak at gnu.org  Mon Aug 20 09:47:53 2007
From: dak at gnu.org (David Kastrup)
Date: Mon, 20 Aug 2007 09:47:53 +0200
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: <200708200058.l7K0wrgd018944@jupiter.fsci.fuk.kindai.ac.jp>
	(Akira Kakuto's message of "Mon\, 20 Aug 2007 09\:58\:52 +0900")
References: <85k5rrsdb9.fsf@lola.goethe.zz>
	<200708200058.l7K0wrgd018944@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <868x86y7di.fsf@lola.quinscape.zz>

Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp> writes:

> Hi David,
>
>> So can we have the one-liner extending the number of open files to
>> 2048?  And as a bonus point, can somebody tell me how I get a working
>> Windows executable once this has been done in the source?
>
> (1)
> Plese get
>
> ftp://akagi.ms.u-tokyo.ac.jp/pub/TeX/win32/pdftex-w32.tar.gz
>
> and expand the tarball in a suitable temporary directory.

[...]

Thanks!  That is a real life saver for me!  As compared with
TeXlive2007, I suppose I will have to regenerate the formats, correct?

Thanks again,

-- 
David Kastrup

From kakuto at fsci.fuk.kindai.ac.jp  Mon Aug 20 09:52:22 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Mon, 20 Aug 2007 16:52:22 +0900
Subject: [NTG-pdftex] [tex-live] Runtime limitations on open files?
In-Reply-To: Your message of "Mon, 20 Aug 2007 09:47:53 +0200"
References: <868x86y7di.fsf@lola.quinscape.zz>
Message-ID: <200708200752.l7K7qNG4020843@jupiter.fsci.fuk.kindai.ac.jp>

Hi David,

> Thanks!  That is a real life saver for me!  As compared with
> TeXlive2007, I suppose I will have to regenerate the formats, correct?

Yes, you have to regenerate formats.

Best regards,
Akira

From martin at oneiros.de  Fri Aug 24 23:36:16 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 24 Aug 2007 23:36:16 +0200
Subject: [NTG-pdftex] [pdftex] Forbidding hyphenation at end of page.
In-Reply-To: <200708241439.08836.john@wexfordpress.com>
References: <200708241439.08836.john@wexfordpress.com>
Message-ID: <68c491a60708241436y4caf8c50o1f746f48b4a1ddc0@mail.gmail.com>

2007/8/24, John R. Culleton <john at wexfordpress.com>:
> TeX and LaTeX have no effective mechanism for forbidding hyphenation
> at the end of a page. Presumably this applies to pdftex, Context etc.
> as well. The base TeX program is frozen forever, but pdftex is not.
> It conintues to evolve with addons. This could be such an addon, but
> it would require surgery to the pagemaking code and possibly the
> hyphenation code.  It could be in the nature of an increased penalty
> or a binary switch.

It would also most likely require interaction between the pagebuilder
and the parbuilder (if you really want to forbid it), and this makes
it hard.

> Is such an addon within the charter of the pdftex wizards (Han The
> Thanh, Taco Hoekwater etc.)?

It's definitely not something for pdftex but for luatex.

Best
   Martin

