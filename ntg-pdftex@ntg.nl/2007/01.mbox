From noreply at sarovar.org  Mon Jan  1 23:27:41 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 02 Jan 2007 03:57:41 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-718 ] Request of pdfsync
Message-ID: <E1H1Vd7-0000hy-00@sarovar.org>

Feature Requests item #718, was opened at 2007-01-01 23:27
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=718&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Juan Luis Varona (jlvm)
Assigned to: Nobody (None)
Summary: Request of pdfsync

Initial Comment:
The syncronization between the .tex and the .pdf files is veeeeeery useful. 
It is not necessary to explain it.
Now, there are some tools to do it, but they are far of being good enough.
For instance, pdfsync makes some work, but it has a lot of problems. Of 
instance, the output is different with or without pdfsync.

I have read in TUGboat that, perhaps in the near future, pdfsync can be 
integrated en pdftex itself and improved. I request to do it as soon as 
possible.

Yours sincerely,

Juan L. Varona
jvarona at unirioja.es


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=718&group_id=106

From reinhard.kotucha at web.de  Tue Jan  2 01:09:10 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 2 Jan 2007 01:09:10 +0100
Subject: [NTG-pdftex] [tex-live] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <Pine.LNX.4.64.0612280621140.3139@hahepc1.hahe>
References: <17810.1353.529121.878552@zarniwoop.ms25.local>
	<Pine.LNX.4.64.0612280533510.3056@hahepc1.hahe>
	<Pine.LNX.4.64.0612280621140.3139@hahepc1.hahe>
Message-ID: <17817.41639.217315.320380@zarniwoop.ms25.local>

>>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel at gmx.de> writes:

  > On Thu, 28 Dec 2006, Hartmut Henkel wrote:
  >> On Wed, 27 Dec 2006, Reinhard Kotucha wrote:
  >> 
  >> > I'm trying to run the vntex testfiles with the current pdftex >
  >> release recently uploaded to the TeXLive repository by Martin.
  >> >
  >> > Can anybody tell me what the warnings mean?
  >> >
  >> > pdfTeX warning (\pdffontattr): font \^^@ has conflicting
  >> attributes

Please excuse me that I didn't respond earlier but I had been very
confused that I have two different versions of pdfTeX on my system.

I found out that the x86_64-linux binaries on the test image did not
provide the latest pdftex release.  Hence I uploaded new binaries for
this platform last night.

  > is this a nullfont? how does one get it?

No idea, I'm not a PDF expert, but it seems to have something to do
with cmap.sty.

  > Here is the try of a patch, which also shows what happens with the
  > above file. Reinhard, does it remove the warnings in your case?

Yes, after I applied your patch, the warnings don't appear any more.


Regarding the manual:
First of all, many thanks to Martin for uploading the latest version to
the TeXLive repository and many thanks to Pawel for maintaining it.

However, there are a few issues which bother me.  They are not so
important that it makes sense to fix them immediately.  It would be
nice if things can be improved in next year's release.

1. In the screen version of the manual (pdftex-s.pdf) the text is
   surrounded by a dark blue box.  The horizontal distance between the
   text and the box is *much* too small.  The manual makes use of
   character protrusion and in this case it is not desirable to have
   verical structures close to the text.  The distance between the
   text and the box should be at least 2em.

2. The title pages of the versions which are intended for printing are
   lacking a binding margin.  A simple fix would be to increase all
   margins and use a smaller font.

3. The manual still uses the URW fonts with the broken "T" and "D".
   It would be nice if future versions will use Jacko's fonts instead,
   TeX-Gyre Pagella in this case.

4. The title "The pdfTeX user manual" is typeset in a very huge font.
   This consumes a lot of ink.  Maybe something like this is more
   desirable:
__________________________________________________________________
\font\x=pplr8r at 80pt
\setbox0\hbox to0pt{\x Hello world!\hss}\ht0=0pt \dp0=0pt
\offinterlineskip
\pdfsave
\pdfliteral{.8 g}\copy0
\pdfliteral{1 Tr 1.2 w 0 g}\box0
\pdfrestore\bye
__________________________________________________________________

  I get a warning message when I compile the file but I think that it
  shows my idea, though.  Maybe Hans has higher level macros in
  Context already which provide a similar result.

BTW., the above code uses new pdftex features (\pdfsave \pdfrestore).
I must admit that I didn't read the manual before I used them (maybe I
should).  I got the information from Martin's announcement.  I doubt
that Martin's announcements can be a replacement for a real user
manual.  But they are extremely good and I've never seen such useful
announcements anywhere else.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From kakuto at fsci.fuk.kindai.ac.jp  Tue Jan  2 01:51:59 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Tue, 02 Jan 2007 09:51:59 +0900
Subject: [NTG-pdftex] [tex-live]   \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: Your message of "Tue, 2 Jan 2007 01:09:10 +0100"
References: <17817.41639.217315.320380@zarniwoop.ms25.local>
Message-ID: <200701020051.l020pxDf009760@jupiter.fsci.fuk.kindai.ac.jp>

Hi Reinhard,

>   > Here is the try of a patch, which also shows what happens with the
>   > above file. Reinhard, does it remove the warnings in your case?
> 
> Yes, after I applied your patch, the warnings don't appear any more.

In this respect, the released version seems to be the same as rc4:
I see the warning with cmap.sty.

Thanks,
Akira

From vvv at vsu.ru  Tue Jan  2 02:00:41 2007
From: vvv at vsu.ru (Vladimir Volovich)
Date: Tue, 02 Jan 2007 04:00:41 +0300
Subject: [NTG-pdftex] [tex-live]   \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <200701020051.l020pxDf009760@jupiter.fsci.fuk.kindai.ac.jp>
	(Akira Kakuto's message of "Tue\, 02 Jan 2007 09\:51\:59 +0900")
References: <17817.41639.217315.320380@zarniwoop.ms25.local>
	<200701020051.l020pxDf009760@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <874pramedi.fsf@vvv.vsu.ru>

"AK" == Akira Kakuto writes:

 AK> In this respect, the released version seems to be the same as
 AK> rc4: I see the warning with cmap.sty.

i think that this is happening because both cmap.sty and the new
pdftex try to assign the /ToUnicode font attribute: cmap.sty directly
via \pdffontattr and the new pdftex internally via it's new feature:

- Fonts:
  - support for subfonts: This creates all needed map entries for subfonts
    automatically and handles Unicode mappings
  - ToUnicode entries for Type1 fonts (patch 580)

probably pdftex should not auto-assign the /ToUnicode mapping if a
macro-package does this explicitly.

Best,
v.


From noreply at sarovar.org  Tue Jan  2 04:40:00 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 02 Jan 2007 09:10:00 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-719 ] few buglets in build.sh
Message-ID: <E1H1aVM-0007bv-00@sarovar.org>

Bugs item #719, was opened at 2007-01-01 22:39
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=719&group_id=106

Category: None
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Sanjoy Mahajan (sanjoy)
Assigned to: Nobody (None)
Summary: few buglets in build.sh

Initial Comment:
Just compiled 1.40.0 using build.sh.  I had to make a
few changes to get it to run on my system (Ubuntu 6.10,
i386).  The purpose of the chunks in the attached diff:

1. The JOBS variable wasn't used, so I changed its name
be descriptive for parallel builds, and used it (and a
related load variable) in the line that appends to the
MAKE variable.  Also, without the necessary double
quotes around that line, the rest of the line after
$MAKE is interpreted as a command rather than as stuff
to append to MAKE (run build.sh with "--parallel" to
see the problem).  I used the short option names for
make, to keep the line within 80 chars.

2. "-a build" is an (incomplete) AND statement, rather
than a test for the "build" directory existing.  The
test should be "-e build" to check for existence.

3. Brace expansion is suboptimal in sh and not very
portable to different reimplementations of sh. 
According to the bash man page: "Brace expansion
introduces a slight incompatibility with historical
versions of sh.  sh does not treat opening or closing
braces specially when they appear as part of a word,
and preserves them in the output.  Bash removes braces
from words as a consequence of brace expansion.  For
example, a word entered to sh as file{1,2} appears
identically in the output."

I don't know the full story, but the fake sh on my
system (actually 'dash') doesn't do brace expansion at
all.  And if the bash man page is right, even if it did
the expansion, it wouldn't help since build.sh uses
braces in the middle of a word.  So I rewrote the two
uses of brace expansion to avoid it.

The resulting "build.sh --parallel" worked fine in my
limited tests.  It still complained that it couldn't
find the texmf tree, but I figure that's okay since
pdftex'll eventually (I hope) use kpathsea and texmf.cnf.

-Sanjoy

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=719&group_id=106

From oberdiek at uni-freiburg.de  Tue Jan  2 08:27:26 2007
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Tue, 2 Jan 2007 08:27:26 +0100
Subject: [NTG-pdftex] [tex-live] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <17817.41639.217315.320380@zarniwoop.ms25.local>
References: <17810.1353.529121.878552@zarniwoop.ms25.local>
	<Pine.LNX.4.64.0612280533510.3056@hahepc1.hahe>
	<Pine.LNX.4.64.0612280621140.3139@hahepc1.hahe>
	<17817.41639.217315.320380@zarniwoop.ms25.local>
Message-ID: <20070102072726.GA3503@irwin.vpn.uni-freiburg.de>

On Tue, Jan 02, 2007 at 01:09:10AM +0100, Reinhard Kotucha wrote:

> BTW., the above code uses new pdftex features (\pdfsave \pdfrestore).
> I must admit that I didn't read the manual before I used them (maybe I
> should).  I got the information from Martin's announcement.  I doubt
> that Martin's announcements can be a replacement for a real user
> manual.

Currently the only documentation of the color stack and
transform stuff comes with the patch description.
Perhaps I manage to write something more until start of next
week. Otherwise I must postpone it to a time after Eastern.

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>
-- 

From noreply at sarovar.org  Tue Jan  2 09:20:41 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 02 Jan 2007 13:50:41 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-603 ] Patch ColorStackTransformMatrix
Message-ID: <E1H1esz-0005qg-00@sarovar.org>

Patches item #603, was opened at 2006-09-07 10:35
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=603&group_id=106

Category: Primitives
Group: v1.40.0
Status: Closed
Resolution: Accepted
Priority: 8
Submitted By: Heiko Oberdiek (oberdiek)
Assigned to: Martin Schr?der (oneiros)
Summary: Patch ColorStackTransformMatrix

Initial Comment:
Subject: Patch ColorStackTransformMatrix
Date: 2006/09/07
Author: Heiko Oberdiek

The patch is based on pdftex-1.40.0-beta-20060906

It tries to solve two FAQ problems:
* missing color stack
* wrong annotation rectangles (links, anchors)
  if the material was scaled or rotated.

Files:
  ColorStackTransformMatrix.patch
    The patch, apply it in src/texk/web2c/pdftexdir:
    patch <ColorStackTransformMatrix.patch
  pdftex.def
    A modified version that uses the patch if the
    new primitives are found.

A short test file:

\documentclass{article}
\usepackage{color}
\usepackage{pdflscape}
\usepackage{hyperref}
\begin{document}
\tableofcontents
\section{Hello World}
\label{sec:hello}
\textcolor{blue}{Blue\newpage Blue}
\begin{landscape}
See \autoref{sec:hello}.
\end{landscape}
\end{document}

Without the patch:
* Text on first page before "Blue" is blue instead of
black.
* Text on second page is black instead of blue.
* The link frame on page three is misplaced.
With the patch and modified pdftex.def these things are
fixed.

New commands
  % color stack
    * \pdfcolorstackinit
    * \pdfcolorstack
  % matrix transformations
    * \pdfsetmatrix
    * \pdfsave
    * \pdfrestore

Syntax:

  %% expandable commands:
  \pdfcolorstackinit [page] [direct] <general text>

  %% general commands:
  \pdfcolorstack <stack number> <stack action> <general
text>
  \pdfsetmatrix
  \pdfsave
  \pdfrestore

  <stack action> ::= set | push | pop | current
Description for color stack:

  This color stack implementation allows several
  independent stacks (upto 32686):
  * Stacks can be used for other properties than color,
    especially other graphics state parameters.
  * Several "text flows across pages" can be supported
    by color stacks.
    Example: footnotes.

  \pdfcolorstackinit [page] [direct] {<initial value>}
    A stack is initialized by \pdfcolorstackinit. It
    expands to the number of the new stack. The common
    case, the traditinal color stack is already
    initialized as first stack:
      \pdfcolorstackinit page direct {0 g 0 G}
    The keyword "page" means, that this stack is page
    based. At the start of the new page, the current
    stack value is automatically set:
      \textcolor{blue}{A\newpage B}
    The second page with "B" will start with blue
    setting.
    The keyword "direct" has the same meaning as
    "direct" for \pdfliteral.
    If the stack value is set, it is done by an
    equivalent of
      \pdfliteral direct {...}.
    The mandatory argument is the initial value on the
    stack. It should be the default at page start for
    the property, see PDF documentation.

  \pdfcolorstack <stack number> push {<new color>}
    pushes the current value on the stack and sets the
    <new color>.
  \pdfcolorstack <stack number> pop
    pops and sets the current stack value.
  \pdfcolorstack <stack number> current   
    sets the current stack value without changing the
    stack. This is useful for stacks that are
    initialized without keyword "page".
    Thus the page start setting can be set manually.
  \pdfcolorstack <stack number> set {<new color>}   
    The current value is set to <new color>.

  Example (changed pdftex.def):

  \chardef\GPT at colorstack=0 %
  \def\set at color{%
    \pdfcolorstack\GPT at colorstack push{\current at color}%
    \aftergroup\reset at color
  }%
  \def\reset at color{%
    \pdfcolorstack\GPT at colorstack pop\relax
  }%

  If someone wants to add color stack support for
  footnotes, the principle would be:
    \edef\stackfootnote{\pdfcolorstackinit direct{0 g 0
G}}%
    % Then at begin of the footnote area on the page:
    \pdfcolorstack\stackfoonote current\relax
    % During footnote processing the footnote stack is
used:
    \let\GPT at colorstack\stackfoonote

Description for matrix transformations:

  Currently matrix changes are done and hidden inside
  \pdfliteral nodes; pdfTeX doesn't parse its contents
  and does not know the new settings of the transform
  matrix. Thus the patch adds new primitives to save
  pdfTeX from parsing \pdfliteral contents and to
  notify pdfTeX about matrix changes to use them in
  calculating link and anchor positions.

  \pdfsetmatrix{<a> <b> <c> <d>}
    is the equivalent to
    \pdfliteral{<a> <b> <c> <d> 0 0 cm}
  \pdfsave
    is the equivalent to \pdfliteral{q}
  \pdfrestore
    is the equivalent to \pdfliteral{Q}

  Some remarks:
  * TeX already supports translations, thus the matrix
    is limited to four values for scaling and rotating.
  * There are some restrictions about \pdfsave and
    \pdfrestore:
    * They must be properly nested.
    * A pair must start and end in the same group at
      the same level.
    * A pair must start and end at the same position.
    Happily these restrictions are satisfied by the
    graphics package.

  Example (changed pdftex.def):
    \def\Grot at start{%
      \pdfsave
      \pdfsetmatrix{%
        \Grot at cos\space\Grot at sin\space
        \if-\Grot at sin\else-\Grot at sin\fi\space\Grot at cos
      }%
      \wd\z@\z@
    }%
    \def\Grot at end{\pdfrestore}
    \def\Gscale at start{%
      \pdfsave
      \pdfsetmatrix{%
        \Gscale at x\space0 0 \Gscale at y
      }%
    }%  

Have fun
  Heiko <oberdiek at uni-freiburg.de>


----------------------------------------------------------------------

>Comment By: Heiko Oberdiek (oberdiek)
Date: 2007-01-02 09:20

Message:
Logged In: YES 
user_id=1276

Hello,

version 0.04b and next versions of pdftex.def are provided
at the usual places, not here.
(http://pdftex-def.berlios.de/ and
CTAN:graphics/pdftex/pdftex.def (installed with a
little delay))

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>

----------------------------------------------------------------------

Comment By: Heiko Oberdiek (oberdiek)
Date: 2007-01-01 00:40

Message:
Logged In: YES 
user_id=1276

Sorry, in newcolorstack, some initializations are missing.
utils.c.diff adds them.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-31 14:31

Message:
Logged In: YES 
user_id=421

This has been included in version 1.40

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-10-17 15:08

Message:
Logged In: YES 
user_id=421

I still get the warning in utils.c :-{

Can you update the pdfTeX manual on this?

----------------------------------------------------------------------

Comment By: Heiko Oberdiek (oberdiek)
Date: 2006-09-12 16:38

Message:
Logged In: YES 
user_id=1276

| Two questions come to mind:
| - how does this patch interact with existing documents,

The design principle is that the patch does not have an
effect if the new primitives are not used (modulo bugs).

| i.e.
| what must be changed when using this patch? Obviously the
| use of \pdfliteral must be checked. Anything else?

LaTeX's color/graphics: pdftex.def that support the
new primitives.

| - does this collide with pdftex's use of the cm? The only
| use of the transformation matrix by pdftex I could find
| concerns magnifications, so that's most likely not a 
| problem.

I had played a little with magnification, but not too
intensively.

| Btw: gcc with -Wall -std=c99 gives this warning:
| ../../../../src/texk/web2c/pdftexdir/utils.c: In function
| ?newcolorstack?:
| ../../../../src/texk/web2c/pdftexdir/utils.c:1366: 
| warning:
| operation on ?colstacks? may be undefined

Assignments to colstacks are controlled by colstack_size,
thus the warnung can be gnored. To avoid the warning
replace
  static colstack_type *colstacks;
by
  static colstack_type *colstacks = NULL;

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-09-12 16:06

Message:
Logged In: YES 
user_id=421

Heiko,
thank you very much for your patch. 

Two questions come to mind:
- how does this patch interact with existing documents, i.e.
what must be changed when using this patch? Obviously the
use of \pdfliteral must be checked. Anything else?
- does this collide with pdftex's use of the cm? The only
use of the transformation matrix by pdftex I could find
concerns magnifications, so that's most likely not a problem.

Btw: gcc with -Wall -std=c99 gives this warning:
../../../../src/texk/web2c/pdftexdir/utils.c: In function
?newcolorstack?:
../../../../src/texk/web2c/pdftexdir/utils.c:1366: warning:
operation on ?colstacks? may be undefined

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=603&group_id=106

From pragma at wxs.nl  Tue Jan  2 12:31:01 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 02 Jan 2007 12:31:01 +0100
Subject: [NTG-pdftex] bug
Message-ID: <459A4275.5030809@wxs.nl>

Hi,

! pdfTeX error (\pdfglyphtounicode): not allowed in DVI mode (\pdfoutput 
<= 0).
l.1 \pdfglyphtounicode

this is wrong i.e. it should be possible to generate a format which can 
produce both dvi and pdf and in that case one should be able to preload 
the unicode mappings

test by taco also indicate that those settings don't survive a dump/undump

Hans

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From noreply at sarovar.org  Tue Jan  2 13:30:37 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 02 Jan 2007 18:00:37 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-719 ] few buglets in build.sh
Message-ID: <E1H1imr-0007b3-00@sarovar.org>

Bugs item #719, was opened at 2007-01-02 04:39
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=719&group_id=106

>Category: Build process
Group: v1.40.0
Status: Open
>Resolution: Accepted
Priority: 5
Submitted By: Sanjoy Mahajan (sanjoy)
>Assigned to: Martin Schr?der (oneiros)
Summary: few buglets in build.sh

Initial Comment:
Just compiled 1.40.0 using build.sh.  I had to make a
few changes to get it to run on my system (Ubuntu 6.10,
i386).  The purpose of the chunks in the attached diff:

1. The JOBS variable wasn't used, so I changed its name
be descriptive for parallel builds, and used it (and a
related load variable) in the line that appends to the
MAKE variable.  Also, without the necessary double
quotes around that line, the rest of the line after
$MAKE is interpreted as a command rather than as stuff
to append to MAKE (run build.sh with "--parallel" to
see the problem).  I used the short option names for
make, to keep the line within 80 chars.

2. "-a build" is an (incomplete) AND statement, rather
than a test for the "build" directory existing.  The
test should be "-e build" to check for existence.

3. Brace expansion is suboptimal in sh and not very
portable to different reimplementations of sh. 
According to the bash man page: "Brace expansion
introduces a slight incompatibility with historical
versions of sh.  sh does not treat opening or closing
braces specially when they appear as part of a word,
and preserves them in the output.  Bash removes braces
from words as a consequence of brace expansion.  For
example, a word entered to sh as file{1,2} appears
identically in the output."

I don't know the full story, but the fake sh on my
system (actually 'dash') doesn't do brace expansion at
all.  And if the bash man page is right, even if it did
the expansion, it wouldn't help since build.sh uses
braces in the middle of a word.  So I rewrote the two
uses of brace expansion to avoid it.

The resulting "build.sh --parallel" worked fine in my
limited tests.  It still complained that it couldn't
find the texmf tree, but I figure that's okay since
pdftex'll eventually (I hope) use kpathsea and texmf.cnf.

-Sanjoy

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=719&group_id=106

From martin at oneiros.de  Wed Jan  3 13:14:24 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 3 Jan 2007 13:14:24 +0100
Subject: [NTG-pdftex] bug
In-Reply-To: <459A4275.5030809@wxs.nl>
References: <459A4275.5030809@wxs.nl>
Message-ID: <68c491a60701030414o70a9e17ep7e42cbe907b4b3b4@mail.gmail.com>

2007/1/2, Hans Hagen <pragma at wxs.nl>:
> ! pdfTeX error (\pdfglyphtounicode): not allowed in DVI mode (\pdfoutput
> <= 0).
> l.1 \pdfglyphtounicode
>
> this is wrong i.e. it should be possible to generate a format which can
> produce both dvi and pdf and in that case one should be able to preload
> the unicode mappings

It's easy to leave out the test for pdf output (it won't do any harm
in dvi mode). But ideally it should only work in pdf or initex mode,
right?

Best
   Martin

From pragma at wxs.nl  Wed Jan  3 13:19:39 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Jan 2007 13:19:39 +0100
Subject: [NTG-pdftex] bug
In-Reply-To: <68c491a60701030414o70a9e17ep7e42cbe907b4b3b4@mail.gmail.com>
References: <459A4275.5030809@wxs.nl>
	<68c491a60701030414o70a9e17ep7e42cbe907b4b3b4@mail.gmail.com>
Message-ID: <459B9F5B.7010005@wxs.nl>

? wrote:
> 2007/1/2, Hans Hagen <pragma at wxs.nl>:
>   
>> ! pdfTeX error (\pdfglyphtounicode): not allowed in DVI mode (\pdfoutput
>> <= 0).
>> l.1 \pdfglyphtounicode
>>
>> this is wrong i.e. it should be possible to generate a format which can
>> produce both dvi and pdf and in that case one should be able to preload
>> the unicode mappings
>>     
>
> It's easy to leave out the test for pdf output (it won't do any harm
> in dvi mode). But ideally it should only work in pdf or initex mode,
> right?
>
>   
right, so just omit the test/message (the messages only make sense when we've already shipped out pdf code) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From hartmut_henkel at gmx.de  Wed Jan  3 17:16:02 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed, 3 Jan 2007 17:16:02 +0100 (CET)
Subject: [NTG-pdftex] [tex-live]   \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <200701020051.l020pxDf009760@jupiter.fsci.fuk.kindai.ac.jp>
References: <17817.41639.217315.320380@zarniwoop.ms25.local>
	<200701020051.l020pxDf009760@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <Pine.LNX.4.64.0701031711400.17566@hahepc1.hahe>

On Tue, 2 Jan 2007, Akira Kakuto wrote:

> >   > Here is the try of a patch, which also shows what happens with
> > the
> >   > above file. Reinhard, does it remove the warnings in your case?
> >
> > Yes, after I applied your patch, the warnings don't appear any more.
>
> In this respect, the released version seems to be the same as rc4: I
> see the warning with cmap.sty.

the patch isn't in yet.

Regards, Hartmut

From reinhard.kotucha at web.de  Wed Jan  3 19:00:05 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 3 Jan 2007 19:00:05 +0100
Subject: [NTG-pdftex] [tex-live]   \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <Pine.LNX.4.64.0701031711400.17566@hahepc1.hahe>
References: <17817.41639.217315.320380@zarniwoop.ms25.local>
	<200701020051.l020pxDf009760@jupiter.fsci.fuk.kindai.ac.jp>
	<Pine.LNX.4.64.0701031711400.17566@hahepc1.hahe>
Message-ID: <17819.61221.904963.811769@zarniwoop.ms25.local>

>>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel at gmx.de> writes:

  > On Tue, 2 Jan 2007, Akira Kakuto wrote:
  >> > > Here is the try of a patch, which also shows what happens
  >> with > the > > above file. Reinhard, does it remove the warnings
  >> in your case?
  >> >
  >> > Yes, after I applied your patch, the warnings don't appear any
  >> more.
  >> 
  >> In this respect, the released version seems to be the same as
  >> rc4: I see the warning with cmap.sty.

  > the patch isn't in yet.

Shall I upload a patched version?  I hesitated because Vladimir said
"probably pdftex should not auto-assign the /ToUnicode mapping if a
macro-package does this explicitly."  Don't know what the patch is doing.

Cheers,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From pragma at wxs.nl  Wed Jan  3 19:55:20 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Jan 2007 19:55:20 +0100
Subject: [NTG-pdftex] [tex-live]   \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <17819.61221.904963.811769@zarniwoop.ms25.local>
References: <17817.41639.217315.320380@zarniwoop.ms25.local>
	<200701020051.l020pxDf009760@jupiter.fsci.fuk.kindai.ac.jp>
	<Pine.LNX.4.64.0701031711400.17566@hahepc1.hahe>
	<17819.61221.904963.811769@zarniwoop.ms25.local>
Message-ID: <459BFC18.2020008@wxs.nl>

Reinhard Kotucha wrote:
>>>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel at gmx.de> writes:
>>>>>>             
>
>   > On Tue, 2 Jan 2007, Akira Kakuto wrote:
>   >> > > Here is the try of a patch, which also shows what happens
>   >> with > the > > above file. Reinhard, does it remove the warnings
>   >> in your case?
>   >> >
>   >> > Yes, after I applied your patch, the warnings don't appear any
>   >> more.
>   >> 
>   >> In this respect, the released version seems to be the same as
>   >> rc4: I see the warning with cmap.sty.
>
>   > the patch isn't in yet.
>
> Shall I upload a patched version?  I hesitated because Vladimir said
> "probably pdftex should not auto-assign the /ToUnicode mapping if a
> macro-package does this explicitly."  Don't know what the patch is doing.
>   
pdftex needs to be explicitly told to include the vectors (done by setting \pdfgentounicode) so if there are two vectors, then the macro package is behaving badly 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From martin at oneiros.de  Wed Jan  3 20:09:15 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 3 Jan 2007 20:09:15 +0100
Subject: [NTG-pdftex] [tex-live] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <17819.61221.904963.811769@zarniwoop.ms25.local>
References: <17817.41639.217315.320380@zarniwoop.ms25.local>
	<200701020051.l020pxDf009760@jupiter.fsci.fuk.kindai.ac.jp>
	<Pine.LNX.4.64.0701031711400.17566@hahepc1.hahe>
	<17819.61221.904963.811769@zarniwoop.ms25.local>
Message-ID: <68c491a60701031109o6a9b2becv2ce2c84d082fe71d@mail.gmail.com>

2007/1/3, Reinhard Kotucha <reinhard.kotucha at web.de>:
> >>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel at gmx.de> writes:
>   > the patch isn't in yet.
>
> Shall I upload a patched version?  I hesitated because Vladimir said
> "probably pdftex should not auto-assign the /ToUnicode mapping if a
> macro-package does this explicitly."  Don't know what the patch is doing.

I'm also waiting for Thanh's opinion. And I still haven't got a proper
bug report.

Best
   Martin

From martin at oneiros.de  Wed Jan  3 20:59:33 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 3 Jan 2007 20:59:33 +0100
Subject: [NTG-pdftex] [tex-live] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <459BFC18.2020008@wxs.nl>
References: <17817.41639.217315.320380@zarniwoop.ms25.local>
	<200701020051.l020pxDf009760@jupiter.fsci.fuk.kindai.ac.jp>
	<Pine.LNX.4.64.0701031711400.17566@hahepc1.hahe>
	<17819.61221.904963.811769@zarniwoop.ms25.local>
	<459BFC18.2020008@wxs.nl>
Message-ID: <68c491a60701031159k21a84a2aq2170d7f2935e1c54@mail.gmail.com>

2007/1/3, Hans Hagen <pragma at wxs.nl>:
> pdftex needs to be explicitly told to include the vectors (done by setting \pdfgentounicode) so if there are two vectors, then the macro package is behaving badly

The whole unicode thing is missing from the manual... :-(

Best
   Martin

From reinhard.kotucha at web.de  Wed Jan  3 21:23:25 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 3 Jan 2007 21:23:25 +0100
Subject: [NTG-pdftex] [tex-live] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <68c491a60701031109o6a9b2becv2ce2c84d082fe71d@mail.gmail.com>
References: <17817.41639.217315.320380@zarniwoop.ms25.local>
	<200701020051.l020pxDf009760@jupiter.fsci.fuk.kindai.ac.jp>
	<Pine.LNX.4.64.0701031711400.17566@hahepc1.hahe>
	<17819.61221.904963.811769@zarniwoop.ms25.local>
	<68c491a60701031109o6a9b2becv2ce2c84d082fe71d@mail.gmail.com>
Message-ID: <17820.4285.153061.34721@zarniwoop.ms25.local>

>>>>> "Martin" == Martin Schr?der <martin at oneiros.de> writes:

  > I'm also waiting for Thanh's opinion. And I still haven't got a
  > proper bug report.

Sorry, but I can't tell you much more because I'm not so familiar with
PDF and pdftex internals.  All I can tell you that I get warnings like

pdfTeX warning (\pdffontattr): font \^^@ has conflicting attributes

when I run pdflatex urwvn-test.tex and cmap.sty is present.

To reproduce it, 

  cd texmf-dist/doc/generic/vntex/tests && pdflatex urwvn-test.tex

If you do not get the warnings, check whether cmap.sty is loaded.

cmap.sty is loaded only if it exists.  The reason is that we want to
allow people who have an older TeX installation (which does not provide
cmap.sty) to use the latest vntex release.  It is certainly a bug that
no warning message appears but this will be fixed in the next release.

You can run make distclean afterwards.  It's safe to run the Makefile
in an svn tree.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From pragma at wxs.nl  Wed Jan  3 23:02:10 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Jan 2007 23:02:10 +0100
Subject: [NTG-pdftex] [tex-live] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <17820.4285.153061.34721@zarniwoop.ms25.local>
References: <17817.41639.217315.320380@zarniwoop.ms25.local>
	<200701020051.l020pxDf009760@jupiter.fsci.fuk.kindai.ac.jp>
	<Pine.LNX.4.64.0701031711400.17566@hahepc1.hahe>
	<17819.61221.904963.811769@zarniwoop.ms25.local>
	<68c491a60701031109o6a9b2becv2ce2c84d082fe71d@mail.gmail.com>
	<17820.4285.153061.34721@zarniwoop.ms25.local>
Message-ID: <459C27E2.5090400@wxs.nl>

Reinhard Kotucha wrote:
>>>>>> "Martin" == Martin Schr?der <martin at oneiros.de> writes:
>>>>>>             
>
>   > I'm also waiting for Thanh's opinion. And I still haven't got a
>   > proper bug report.
>
> Sorry, but I can't tell you much more because I'm not so familiar with
> PDF and pdftex internals.  All I can tell you that I get warnings like
>
> pdfTeX warning (\pdffontattr): font \^^@ has conflicting attributes
>
> when I run pdflatex urwvn-test.tex and cmap.sty is present.
>
> To reproduce it, 
>
>   cd texmf-dist/doc/generic/vntex/tests && pdflatex urwvn-test.tex
>
> If you do not get the warnings, check whether cmap.sty is loaded.
>
> cmap.sty is loaded only if it exists.  The reason is that we want to
> allow people who have an older TeX installation (which does not provide
> cmap.sty) to use the latest vntex release.  It is certainly a bug that
> no warning message appears but this will be fixed in the next release.
>
>   
i assume that this warning is up to the macro package; context does not 
use the cmap.sty file

Hans

-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From noreply at sarovar.org  Thu Jan  4 01:40:29 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 04 Jan 2007 06:10:29 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-712 ] problems with \letterspacefont
Message-ID: <E1H2Gej-00047R-00@sarovar.org>

Bugs item #712, was opened at 2006-12-12 02:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

Category: hz
Group: v1.40.0
Status: Closed
Resolution: Fixed
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: problems with \letterspacefont

Initial Comment:
% Testing the new \letterspacefont, I found:
%
% (1) it's certainly not correct to have the spacing 
%     relative to character widths (look at `minimal'!)
% (2) everything's shifted to the right
% (3) when trying to expand the letter-spaced font, I 
%     get the warning `font should be expanded before 
%     its first use' (even before its first use), and 
%     then pdftex segfaults.

\pdfadjustspacing2
\hsize13cm
This is normal text This is normal text 
This is normal text This is normal text 
This is normal text This is normal text
{\letterspacefont\lspfont=\font 1000
%\pdffontexpand\lspfont 20 20 5 autoexpand % segfault
\lspfont
This isn't normal text This isn't normal text
This isn't normal text This is minimal text}
This is normal text This is normal text 
This is normal text
\bye





----------------------------------------------------------------------

>Comment By: Robert (schlcht)
Date: 2007-01-04 00:40

Message:
Logged In: YES 
user_id=2217

I'm a bit confused about the status of (3): letterspacing
and expansion:
When expanding a letterspaced font, pdftex issues the
warning: ``font should be expanded before its first use'',
but apart from that, I cannot see any problems -- the font
is both letterspaced and expanded. 
Or is there a reason for the warning?

\pdfadjustspacing2
\font\x=cmr10 \x
\letterspacefont\y=\x 100 \y
\pdffontexpand\y 20 20 5 autoexpand
...
\bye


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-21 16:09

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-12 17:47

Message:
Logged In: YES 
user_id=710

oops, I disabled ligature for letter-spaced font, but this
should not affect the base font. Will have to rethink. Most
likely the syntax will change like follows:

\letterspacefont\f=cmr10 at 11pt 100
\f text




----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-12-12 15:50

Message:
Logged In: YES 
user_id=2217

% and here's
% (4) ligatures will be broken up, not only in the 
%     letter-spaced font (which is probably acceptable), 
%     but in all subsequent uses of the base font, too

fi\par
{\letterspacefont\lspfont=\font 100 \lspfont fi}\par
fi

\bye



----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-12 13:31

Message:
Logged In: YES 
user_id=710

I fixed (1) and (2); (3) is disabled now, ie you cannot
expand a letter-spaced font. Please wait for another release
from Martin.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

From noreply at sarovar.org  Thu Jan  4 16:59:02 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 04 Jan 2007 21:29:02 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-712 ] problems with \letterspacefont
Message-ID: <E1H2Uze-0000E3-00@sarovar.org>

Bugs item #712, was opened at 2006-12-12 02:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

Category: hz
Group: v1.40.0
Status: Closed
Resolution: Fixed
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: problems with \letterspacefont

Initial Comment:
% Testing the new \letterspacefont, I found:
%
% (1) it's certainly not correct to have the spacing 
%     relative to character widths (look at `minimal'!)
% (2) everything's shifted to the right
% (3) when trying to expand the letter-spaced font, I 
%     get the warning `font should be expanded before 
%     its first use' (even before its first use), and 
%     then pdftex segfaults.

\pdfadjustspacing2
\hsize13cm
This is normal text This is normal text 
This is normal text This is normal text 
This is normal text This is normal text
{\letterspacefont\lspfont=\font 1000
%\pdffontexpand\lspfont 20 20 5 autoexpand % segfault
\lspfont
This isn't normal text This isn't normal text
This isn't normal text This is minimal text}
This is normal text This is normal text 
This is normal text
\bye





----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-04 15:59

Message:
Logged In: YES 
user_id=710

The warning is misleading but harmless. The reason of the
warning is that pdftex checks whether a font has not been
used before expansion (its type has not been examined and is
new/unknown yet). \letterspacefont sets the type of \y as a
virtual font, thus pdftex thinks the font might have been
used before. 

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2007-01-04 00:40

Message:
Logged In: YES 
user_id=2217

I'm a bit confused about the status of (3): letterspacing
and expansion:
When expanding a letterspaced font, pdftex issues the
warning: ``font should be expanded before its first use'',
but apart from that, I cannot see any problems -- the font
is both letterspaced and expanded. 
Or is there a reason for the warning?

\pdfadjustspacing2
\font\x=cmr10 \x
\letterspacefont\y=\x 100 \y
\pdffontexpand\y 20 20 5 autoexpand
...
\bye


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-21 16:09

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-12 17:47

Message:
Logged In: YES 
user_id=710

oops, I disabled ligature for letter-spaced font, but this
should not affect the base font. Will have to rethink. Most
likely the syntax will change like follows:

\letterspacefont\f=cmr10 at 11pt 100
\f text




----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-12-12 15:50

Message:
Logged In: YES 
user_id=2217

% and here's
% (4) ligatures will be broken up, not only in the 
%     letter-spaced font (which is probably acceptable), 
%     but in all subsequent uses of the base font, too

fi\par
{\letterspacefont\lspfont=\font 100 \lspfont fi}\par
fi

\bye



----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-12 13:31

Message:
Logged In: YES 
user_id=710

I fixed (1) and (2); (3) is disabled now, ie you cannot
expand a letter-spaced font. Please wait for another release
from Martin.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

From hanthethanh at gmail.com  Thu Jan  4 18:30:31 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Thu, 4 Jan 2007 18:30:31 +0100
Subject: [NTG-pdftex] [tex-live] \pdffontattr in pdftex-1.40.0-rc4
Message-ID: <74f506dc0701040930w3c55d2f6i362a5db147c2ac76@mail.gmail.com>

Hi,

sorry for the late response. The patch by Hartmut should
solve the problem.

to Hartmut:
> > > pdfTeX warning (\pdffontattr): font \^^@ has conflicting attributes
> is this a nullfont? how does one get it?

this font has been loaded from a virtual font, hence it
doesn't get any control sequence.

I made another patch, which is more or less the same as what
Hartmut did, plus some changes to make the warning more
meaningful. Don't be afraid by the length of the patch, it
just turns the module @<Print the font identifier for |font(p)|@>
to a function named print_font_identifier() so it can be called
with different parameters.

Thanh


--- /home/thanh/s2/pdftex.web	2006-12-20 16:16:42.000000000 +0100
+++ pdftex.web	2007-01-04 18:26:42.000000000 +0100
@@ -4062,7 +4062,33 @@
 @ Boxes, rules, inserts, whatsits, marks, and things in general that are
 sort of ``complicated'' are indicated only by printing `\.{[]}'.

- at p procedure short_display(@!p:integer); {prints highlights of list |p|}
+ at p
+procedure print_font_identifier(f: internal_font_number);
+begin
+    if pdf_font_blink[f] = null_font then
+        print_esc(font_id_text(f))
+    else
+        print_esc(font_id_text(pdf_font_blink[f]));
+    if pdf_tracing_fonts > 0 then begin
+        print(" (");
+        print(font_name[f]);
+        if font_size[f] <> font_dsize[f] then begin
+            print("@@");
+            print_scaled(font_size[f]);
+            print("pt");
+        end;
+        print(")");
+    end else
+        if pdf_font_expand_ratio[f] <> 0 then begin
+            print(" (");
+            if pdf_font_expand_ratio[f] > 0 then
+                print("+");
+            print_int(pdf_font_expand_ratio[f]);
+            print(")");
+        end;
+end;
+
+procedure short_display(@!p:integer); {prints highlights of list |p|}
 var n:integer; {for replacement counts}
 begin while p>mem_min do
   begin if is_char_node(p) then
@@ -4071,7 +4097,7 @@
         begin if (font(p)<font_base)or(font(p)>font_max) then
           print_char("*")
 @.*\relax@>
-        else @<Print the font identifier for |font(p)|@>;
+        else print_font_identifier(font(p));
         print_char(" "); font_in_short_display:=font(p);
         end;
       print_ASCII(qo(character(p)));
@@ -4110,7 +4136,7 @@
 begin if p>mem_end then print_esc("CLOBBERED.")
 else  begin if (font(p)<font_base)or(font(p)>font_max) then print_char("*")
 @.*\relax@>
-  else @<Print the font identifier for |font(p)|@>;
+  else print_font_identifier(font(p));
   print_char(" "); print_ASCII(qo(character(p)));
   end;
 end;
@@ -6771,31 +6797,6 @@
 Meanwhile, this is a convenient place to catch up on something we were unable
 to do before the hash table was defined:

-@<Print the font identifier for |font(p)|@>=
-begin
-    if pdf_font_blink[font(p)] = null_font then
-        print_esc(font_id_text(font(p)))
-    else
-        print_esc(font_id_text(pdf_font_blink[font(p)]));
-    if pdf_tracing_fonts > 0 then begin
-        print(" (");
-        print(font_name[font(p)]);
-        if font_size[font(p)] <> font_dsize[font(p)] then begin
-            print("@@");
-            print_scaled(font_size[font(p)]);
-            print("pt");
-        end;
-        print(")");
-    end else
-        if pdf_font_expand_ratio[font(p)] <> 0 then begin
-            print(" (");
-            if pdf_font_expand_ratio[font(p)] > 0 then
-                print("+");
-            print_int(pdf_font_expand_ratio[font(p)]);
-            print(")");
-        end;
-end
-
 @* \[19] Saving and restoring equivalents.
 The nested structure provided by `$\.{\char'173}\ldots\.{\char'175}$' groups
 in \TeX\ means that |eqtb| entries valid in outer groups should be saved
@@ -14943,7 +14944,7 @@
         begin if (font(p)<font_base)or(font(p)>font_max) then
           print_char("*")
 @.*\relax@>
-        else @<Print the font identifier for |font(p)|@>;
+        else print_font_identifier(font(p));
         print_char(" "); font_in_short_display:=font(p);
         end;
       print_ASCII(qo(character(p)));
@@ -19340,11 +19341,15 @@
             if pdf_char_marked(k, j) then
                 pdf_mark_char(i, j);
         if (length(pdf_font_attr[i]) = 0) and
(length(pdf_font_attr[k]) <> 0) then
-            pdf_font_attr[i] := pdf_font_attr[k];
-        if not ((pdf_font_attr[i] = pdf_font_attr[k]) or
-           str_eq_str(pdf_font_attr[i], pdf_font_attr[k])) then begin
-           pdf_warning("\pdffontattr", "font ", false, false);
-           print_esc(font_id_text(k));
+            pdf_font_attr[i] := pdf_font_attr[k]
+        else if (length(pdf_font_attr[k]) = 0) and
(length(pdf_font_attr[i]) <> 0) then
+            pdf_font_attr[k] := pdf_font_attr[i]
+        else if (length(pdf_font_attr[i]) <> 0) and
(length(pdf_font_attr[k]) <> 0) and
+           not str_eq_str(pdf_font_attr[i], pdf_font_attr[k]) then begin
+           pdf_warning("\pdffontattr", "fonts ", false, false);
+           print_font_identifier(i);
+           print(" and ");
+           print_font_identifier(k);
            print(" has conflicting attributes"); print_ln; print_ln;
         end;
     end;

On Thu, Dec 28, 2006 at 06:38:51AM +0100, Hartmut Henkel wrote:
> On Thu, 28 Dec 2006, Hartmut Henkel wrote:
>
> > On Wed, 27 Dec 2006, Reinhard Kotucha wrote:
> >
> > > I'm trying to run the vntex testfiles with the current pdftex
> > > release recently uploaded to the TeXLive repository by Martin.
> > >
> > > Can anybody tell me what the warnings mean?
> > >
> > > pdfTeX warning (\pdffontattr): font \^^@ has conflicting attributes
>
> is this a nullfont? how does one get it?
>
> > in the intended cases it means, that it was tried to add two different
> > font attributes to the same font dictionary. But here is a case where
> > this happens even without:
> >
> > \pdfcompresslevel=0
> > \nopagenumbers
> > \font\aa cmr10 at 10pt
> > \pdffontattr\aa {foo}
> > \aa abc
> > \font\bb cmr10 at 11pt
> > %\pdffontattr\bb {bar}
> > \bb abc
> > \bye
> >
> > Both TeX fonts refer to the same font dictionary. So there is only one
> > font, and this gets the attribute "foo".
> >
> > > I get a lot of these messages.  The (pdf) output seems to be ok.
> >
> > The above source creates the right PDF. Maybe we need to get rid of
> > the warning here.
>
> Here is the try of a patch, which also shows what happens with the above
> file. Reinhard, does it remove the warnings in your case?
>
> --- pdftex.web.orig	2006-12-21 17:19:20.000000000 +0100
> +++ pdftex.web	2006-12-28 06:07:11.771455920 +0100
> @@ -19341,6 +19341,8 @@
>                  pdf_mark_char(i, j);
>          if (length(pdf_font_attr[i]) = 0) and (length(pdf_font_attr[k]) <> 0) then
>              pdf_font_attr[i] := pdf_font_attr[k];
> +        if (length(pdf_font_attr[k]) = 0) and (length(pdf_font_attr[i]) <> 0) then
> +            pdf_font_attr[k] := pdf_font_attr[i];
>          if not ((pdf_font_attr[i] = pdf_font_attr[k]) or
>             str_eq_str(pdf_font_attr[i], pdf_font_attr[k])) then begin
>             pdf_warning("\pdffontattr", "font ", false, false);
>
> An alternative (more complicated) might be that one keeps font
> dictionaries separate when the user wants different attributes. No idea
> what the typical use of these attributes is.
>
> Regards, Hartmut

From pragma at wxs.nl  Thu Jan  4 22:27:08 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 04 Jan 2007 22:27:08 +0100
Subject: [NTG-pdftex] [Fwd: [NTG-context] crash with pdftex-1.40]
Message-ID: <459D712C.7070804@wxs.nl>


-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

-------------- next part --------------
An embedded message was scrubbed...
From: =?ISO-8859-15?Q?Peter_M=FCnster?= <pmlists at free.fr>
Subject: [NTG-context] crash with pdftex-1.40
Date: Thu, 04 Jan 2007 21:54:45 +0100 (CET)
Size: 9633
Url: http://www.ntg.nl/pipermail/ntg-pdftex/attachments/20070104/5ee7f82b/attachment.mht 

From martin at oneiros.de  Thu Jan  4 23:08:50 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Thu, 4 Jan 2007 23:08:50 +0100
Subject: [NTG-pdftex] [Fwd: [NTG-context] crash with pdftex-1.40]
In-Reply-To: <459D712C.7070804@wxs.nl>
References: <459D712C.7070804@wxs.nl>
Message-ID: <68c491a60701041408sfeb45efhcc4c80e766003db7@mail.gmail.com>

2007/1/4, Hans Hagen <pragma at wxs.nl>:
> While playing around with the new shell escaping in pdftex-1.40, I got
> the following crash:

I can't reproduce this.

Best
   Martin

From hanthethanh at gmail.com  Fri Jan  5 07:36:26 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Fri, 5 Jan 2007 07:36:26 +0100
Subject: [NTG-pdftex] [Fwd: [NTG-context] crash with pdftex-1.40]
Message-ID: <74f506dc0701042236p2fee8b0n3b976c9ff931b356@mail.gmail.com>

I can reproduce the problem, but have no idea how to fix it.
pdftex crashes when a pclose is called in aclose(), file
openclose.c. But I don't know anything about pipes in pdftex
-- it was done by other people.

Thanh

On Thu, Jan 04, 2007 at 11:08:50PM +0100, Martin Schroeder wrote:
> 2007/1/4, Hans Hagen <pragma at wxs.nl>:
> > While playing around with the new shell escaping in pdftex-1.40, I got
> > the following crash:
>
> I can't reproduce this.
>
> Best
>    Martin
> _______________________________________________
> ntg-pdftex mailing list
> ntg-pdftex at ntg.nl
> http://www.ntg.nl/mailman/listinfo/ntg-pdftex

From taco at elvenkind.com  Fri Jan  5 08:57:01 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 05 Jan 2007 08:57:01 +0100
Subject: [NTG-pdftex] [Fwd: [NTG-context] crash with pdftex-1.40]
In-Reply-To: <74f506dc0701042236p2fee8b0n3b976c9ff931b356@mail.gmail.com>
References: <74f506dc0701042236p2fee8b0n3b976c9ff931b356@mail.gmail.com>
Message-ID: <459E04CD.3000709@elvenkind.com>

Thanh Han The wrote:
> I can reproduce the problem, but have no idea how to fix it.
> pdftex crashes when a pclose is called in aclose(), file
> openclose.c. But I don't know anything about pipes in pdftex

I'll check it out.

Taco

From kakuto at fsci.fuk.kindai.ac.jp  Fri Jan  5 09:47:34 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Fri, 05 Jan 2007 17:47:34 +0900
Subject: [NTG-pdftex] [Fwd: [NTG-context] crash with pdftex-1.40]
In-Reply-To: Your message of "Fri, 05 Jan 2007 08:57:01 +0100"
References: <459E04CD.3000709@elvenkind.com>
Message-ID: <200701050847.l058lZ3J028783@jupiter.fsci.fuk.kindai.ac.jp>

Hi Taco,

>>> But this should be enough to reproduce it:
>>>
>>> \starttext
>>> \input "\string|echo -n bla"
>>> \stoptext

> > I can reproduce the problem, but have no idea how to fix it.
> > pdftex crashes when a pclose is called in aclose(), file
> > openclose.c. But I don't know anything about pipes in pdftex
> 
> I'll check it out.

On windows (pdftex 1.40.0, ConTeXt 2007.01.02 13:44 MK II),

\starttext
\input "\string|echo This is a test."
\stoptext

works fine. The result is one page pdf with the sentence
"This is a test."

Thanks,
Akira

From pragma at wxs.nl  Fri Jan  5 10:19:56 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 05 Jan 2007 10:19:56 +0100
Subject: [NTG-pdftex] [Fwd: [NTG-context] crash with pdftex-1.40]
In-Reply-To: <74f506dc0701042236p2fee8b0n3b976c9ff931b356@mail.gmail.com>
References: <74f506dc0701042236p2fee8b0n3b976c9ff931b356@mail.gmail.com>
Message-ID: <459E183C.2050408@wxs.nl>

Thanh Han The wrote:
> I can reproduce the problem, but have no idea how to fix it.
> pdftex crashes when a pclose is called in aclose(), file
> openclose.c. But I don't know anything about pipes in pdftex
> -- it was done by other people.
>   
it's ok on windows, so it must be a unix lib problem (not sure where the differences between platforms are in code) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From taco at elvenkind.com  Fri Jan  5 10:39:47 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 05 Jan 2007 10:39:47 +0100
Subject: [NTG-pdftex] [Fwd: [NTG-context] crash with pdftex-1.40]
In-Reply-To: <459E183C.2050408@wxs.nl>
References: <74f506dc0701042236p2fee8b0n3b976c9ff931b356@mail.gmail.com>
	<459E183C.2050408@wxs.nl>
Message-ID: <459E1CE3.1070305@elvenkind.com>

Hi,

Hans Hagen wrote:
> Thanh Han The wrote:
> 
>>I can reproduce the problem, but have no idea how to fix it.
>>pdftex crashes when a pclose is called in aclose(), file
>>openclose.c. But I don't know anything about pipes in pdftex
>>-- it was done by other people.
>>  
> 
> it's ok on windows, so it must be a unix lib problem (not sure where the differences between platforms are in code) 

Found it, my bad. I malloced() one byte short in the
version of the patch that is used now, Windows apparently
doesn't care about that, but it breaks on Unix (most of
the time).

It used to work OK, I am quite sure of that, so it looks
like there was a mixup somewhere along the line. I have
a two-line change for texmfmp.c, attached.

Martin, should I commit this to TL or do you have other
pending patches?

Best, Taco








-------------- next part --------------
A non-text attachment was scrubbed...
Name: texmfmp.c.patch
Type: text/x-patch
Size: 939 bytes
Desc: not available
Url : http://www.ntg.nl/pipermail/ntg-pdftex/attachments/20070105/6ed35a8d/attachment.bin 

From martin at oneiros.de  Fri Jan  5 13:41:06 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 5 Jan 2007 13:41:06 +0100
Subject: [NTG-pdftex] [Fwd: [NTG-context] crash with pdftex-1.40]
In-Reply-To: <459E1CE3.1070305@elvenkind.com>
References: <74f506dc0701042236p2fee8b0n3b976c9ff931b356@mail.gmail.com>
	<459E183C.2050408@wxs.nl> <459E1CE3.1070305@elvenkind.com>
Message-ID: <68c491a60701050441i293f8910l7e739291bb63d4fe@mail.gmail.com>

2007/1/5, Taco Hoekwater <taco at elvenkind.com>:
> Martin, should I commit this to TL or do you have other
> pending patches?

Please commit; this is web2c and not really pdftex.

Best
   Martin

From taco at elvenkind.com  Fri Jan  5 14:44:33 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 05 Jan 2007 14:44:33 +0100
Subject: [NTG-pdftex] [Fwd: [NTG-context] crash with pdftex-1.40]
In-Reply-To: <68c491a60701050441i293f8910l7e739291bb63d4fe@mail.gmail.com>
References: <74f506dc0701042236p2fee8b0n3b976c9ff931b356@mail.gmail.com>	<459E183C.2050408@wxs.nl>
	<459E1CE3.1070305@elvenkind.com>
	<68c491a60701050441i293f8910l7e739291bb63d4fe@mail.gmail.com>
Message-ID: <459E5641.3020806@elvenkind.com>



Martin Schr?der wrote:
> 2007/1/5, Taco Hoekwater <taco at elvenkind.com>:
> 
>>Martin, should I commit this to TL or do you have other
>>pending patches?
> 
> Please commit; this is web2c and not really pdftex.

OK, done, TL is updated. I assume you will pick this fix up for
the (eventual) 1.40.1 release.

Best, Taco



From reinhard.kotucha at web.de  Sat Jan  6 23:56:13 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 6 Jan 2007 23:56:13 +0100
Subject: [NTG-pdftex] [tex-live] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <74f506dc0701040930w3c55d2f6i362a5db147c2ac76@mail.gmail.com>
References: <74f506dc0701040930w3c55d2f6i362a5db147c2ac76@mail.gmail.com>
Message-ID: <17824.10509.65288.330606@zarniwoop.ms25.local>

>>>>> "Thanh" == Thanh Han The <hanthethanh at gmail.com> writes:

  > I made another patch, which is more or less the same as what
  > Hartmut did, plus some changes to make the warning more
  > meaningful. Don't be afraid by the length of the patch, it just
  > turns the module @<Print the font identifier for |font(p)|@> to a
  > function named print_font_identifier() so it can be called with
  > different parameters.

Hi,
this patch works for me too.  Many thanks.

Martin, it is probably easier to keep things in sync if you apply the
patch yourself and upload the patched sources to the TeXLive repository.

The patch contains very long lines, 3 of them had been broken by one
of the mail programs involved.  That's not a problem but I'll attach
it again as a gzipped file though.  So you don't have to dig around in
old mails.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: pdffontattr-patch-thanh.gz
Type: application/octet-stream
Size: 1377 bytes
Desc: not available
Url : http://www.ntg.nl/pipermail/ntg-pdftex/attachments/20070106/50f5d5be/attachment.obj 
-------------- next part --------------

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From noreply at sarovar.org  Sun Jan  7 22:41:14 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 08 Jan 2007 03:11:14 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-719 ] few buglets in build.sh
Message-ID: <E1H3flS-0008Qk-00@sarovar.org>

Bugs item #719, was opened at 2007-01-02 04:39
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=719&group_id=106

Category: Build process
Group: v1.40.0
>Status: Closed
>Resolution: Fixed
Priority: 5
Submitted By: Sanjoy Mahajan (sanjoy)
Assigned to: Martin Schr?der (oneiros)
Summary: few buglets in build.sh

Initial Comment:
Just compiled 1.40.0 using build.sh.  I had to make a
few changes to get it to run on my system (Ubuntu 6.10,
i386).  The purpose of the chunks in the attached diff:

1. The JOBS variable wasn't used, so I changed its name
be descriptive for parallel builds, and used it (and a
related load variable) in the line that appends to the
MAKE variable.  Also, without the necessary double
quotes around that line, the rest of the line after
$MAKE is interpreted as a command rather than as stuff
to append to MAKE (run build.sh with "--parallel" to
see the problem).  I used the short option names for
make, to keep the line within 80 chars.

2. "-a build" is an (incomplete) AND statement, rather
than a test for the "build" directory existing.  The
test should be "-e build" to check for existence.

3. Brace expansion is suboptimal in sh and not very
portable to different reimplementations of sh. 
According to the bash man page: "Brace expansion
introduces a slight incompatibility with historical
versions of sh.  sh does not treat opening or closing
braces specially when they appear as part of a word,
and preserves them in the output.  Bash removes braces
from words as a consequence of brace expansion.  For
example, a word entered to sh as file{1,2} appears
identically in the output."

I don't know the full story, but the fake sh on my
system (actually 'dash') doesn't do brace expansion at
all.  And if the bash man page is right, even if it did
the expansion, it wouldn't help since build.sh uses
braces in the middle of a word.  So I rewrote the two
uses of brace expansion to avoid it.

The resulting "build.sh --parallel" worked fine in my
limited tests.  It still complained that it couldn't
find the texmf tree, but I figure that's okay since
pdftex'll eventually (I hope) use kpathsea and texmf.cnf.

-Sanjoy

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-01-07 22:41

Message:
Logged In: YES 
user_id=421

Thanks. I'll include your changes in the next version.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=719&group_id=106

From P.Jackowski at gust.org.pl  Thu Jan 11 12:13:17 2007
From: P.Jackowski at gust.org.pl (=?ISO-8859-2?Q?Pawe=B3_Jackowski?=)
Date: Thu, 11 Jan 2007 12:13:17 +0100
Subject: [NTG-pdftex] manual update
Message-ID: <45A61BCD.90107@gust.org.pl>

Hi,

I've updated the manual with

	\pdfcolorstackinit
	\pdfcolorstack
	\pdfsetmatrix
	\pdfsave
	\pdfrestore

on the base of Heiko's patch note. Check welcome.
-- 
Pawe/l Jackowski
P.Jackowski at gust.org.pl

From martin at oneiros.de  Tue Jan 16 22:43:56 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 16 Jan 2007 22:43:56 +0100
Subject: [NTG-pdftex] /Font resources must be indirect?
Message-ID: <68c491a60701161343g30dc92c2q460038ddf2f8ad52@mail.gmail.com>

Hi,
copyFontResources in pdftoepdf.cc requires the fonts to be specified
indirectly in a font resource dictionary. Why?

Background: I've got a pdf (from
http://www.stillhq.com/pdfdb/000623/info.html) that directly includes
the font dictionaries in the font resource dictionary, and pdftex
fails while including it. kpdf and AR7 display the file without
problems, but gs 8.54 barfs.

Best
   Martin

From hartmut_henkel at gmx.de  Tue Jan 16 23:51:35 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Tue, 16 Jan 2007 23:51:35 +0100 (CET)
Subject: [NTG-pdftex] /Font resources must be indirect?
In-Reply-To: <68c491a60701161343g30dc92c2q460038ddf2f8ad52@mail.gmail.com>
References: <68c491a60701161343g30dc92c2q460038ddf2f8ad52@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0701162349590.24304@hahepc1.hahe>

Hi Martin,

On Tue, 16 Jan 2007, Martin Schr?der wrote:

> Hi, copyFontResources in pdftoepdf.cc requires the fonts to be
> specified indirectly in a font resource dictionary. Why?

seems to have no reason. Handling this case is just missing in
pdftoepdf.cc (maybe since long time even). Needs to be added.

Regards, Hartmut

From hanthethanh at gmail.com  Wed Jan 17 11:10:24 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Wed, 17 Jan 2007 11:10:24 +0100
Subject: [NTG-pdftex] /Font resources must be indirect?
Message-ID: <74f506dc0701170210h5a58ad8ev1bd0761f5dca244c@mail.gmail.com>

> On Tue, 16 Jan 2007, Martin Schr?der wrote:
>
> > Hi, copyFontResources in pdftoepdf.cc requires the fonts to be
> > specified indirectly in a font resource dictionary. Why?

I cannot recall the reason for this. Maybe it was not
allowed in pdf-1.2 or ealier (couldn't find a pdf spec older
than 1.3 to verify this), or this was just my assumption.

Thanh

From hartmut_henkel at gmx.de  Wed Jan 17 23:19:01 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed, 17 Jan 2007 23:19:01 +0100 (CET)
Subject: [NTG-pdftex] pdftex libc problem with x64_86 in tex-live 070117-inst
Message-ID: <Pine.LNX.4.64.0701172316230.25430@hahepc1.hahe>

Hi,

do you have any clue what this fatal error means (similar also outside
gdb):

(/usr/local/texlive/2007/texmf-dist/tex/latex/microtype/microtype.sty
(/usr/local/texlive/2007/texmf-dist/tex/latex/graphics/keyval.sty)
(/usr/local/texlive/2007/texmf-dist/tex/latex/microtype/microtype.cfg/usr/local/texlive/2007/bin/x86_64-linux/pdflatex:
relocation error: /usr/local/texlive/2007/bin/x86_64-linux/pdflatex: symbol regexec, version GLIBC_2.3.4 not defined in file libc.so.6 with link time reference

Program exited with code 0177.
(gdb)

Regards, Hartmut

From martin at oneiros.de  Wed Jan 17 23:34:13 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 17 Jan 2007 23:34:13 +0100
Subject: [NTG-pdftex] pdftex libc problem with x64_86 in tex-live
	070117-inst
In-Reply-To: <Pine.LNX.4.64.0701172316230.25430@hahepc1.hahe>
References: <Pine.LNX.4.64.0701172316230.25430@hahepc1.hahe>
Message-ID: <68c491a60701171434y1e963db7m76e486dd50ab9285@mail.gmail.com>

2007/1/17, Hartmut Henkel <hartmut_henkel at gmx.de>:
> relocation error: /usr/local/texlive/2007/bin/x86_64-linux/pdflatex: symbol regexec, version GLIBC_2.3.4 not defined in file libc.so.6 with link time reference

Your glibc is too old (or too new).

Best
   Martin

From hartmut_henkel at gmx.de  Wed Jan 17 23:42:05 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed, 17 Jan 2007 23:42:05 +0100 (CET)
Subject: [NTG-pdftex] pdftex libc problem with x64_86 in tex-live
 070117-inst
In-Reply-To: <68c491a60701171434y1e963db7m76e486dd50ab9285@mail.gmail.com>
References: <Pine.LNX.4.64.0701172316230.25430@hahepc1.hahe>
	<68c491a60701171434y1e963db7m76e486dd50ab9285@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0701172341220.25668@hahepc1.hahe>

On Wed, 17 Jan 2007, Martin Schr?der wrote:

> 2007/1/17, Hartmut Henkel <hartmut_henkel at gmx.de>:
> > relocation error: /usr/local/texlive/2007/bin/x86_64-linux/pdflatex: symbol
> > regexec, version GLIBC_2.3.4 not defined in file libc.so.6 with link time
> > reference
>
> Your glibc is too old (or too new).

we need an expiry date on the Tex-Live cover :-)

Regards, Hartmut

From hartmut_henkel at gmx.de  Fri Jan 19 01:21:39 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Fri, 19 Jan 2007 01:21:39 +0100 (CET)
Subject: [NTG-pdftex] [NTG-context] pdfetex 1.40.1 + ghosscript problem?
In-Reply-To: <68c491a60701181559v2e59d02fy4298f4d1f596ec1b@mail.gmail.com>
References: <45AFD606.9010003@econ.muni.cz>
	<68c491a60701181559v2e59d02fy4298f4d1f596ec1b@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0701190115220.986@hahepc1.hahe>

Hi Thanh,

On Fri, 19 Jan 2007, Martin Schr?der wrote:

> 2007/1/18, Michal Kvasnicka <quasar at econ.muni.cz>:
> > Excuse me this off-topic, I don't know where should I ask.
>
> The pdftex mailing list would be a better place. See
> http://www.pdftex.org/README
>
> [...]
>
> > Can anybody tell me what's wrong, and if there is a ghostscript
> > version capable to view the output of pdftex 1.40.1? Without it it
> > is useless for me. :-(
>
> I can view sample2e.pdf or the pdftex manual fine with gs 8.54.

e. g. when i run this test file through pdftex-1.40.1

%$Id: test4.tex,v 1.3 2006/01/06 20:24:10 hahe Exp hahe $
\pdfcompresslevel=0
\nopagenumbers
\pdfmapline{qtmr <8r.enc <qtmr.ttf}

\font\qtmr qtmr at 10pt
\pdffontexpand\qtmr 30 30 5 autoexpand
\pdfadjustspacing=2
\qtmr

\input tufte
\input tufte
\input tufte
\input tufte

\bye

then gs 8.54 tells "**** Warning: Encoding not present." But it looks
ok. Could there be anything missing inside the embedded TTF font?

Regards, Hartmut

From martin at oneiros.de  Fri Jan 19 01:29:22 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 19 Jan 2007 01:29:22 +0100
Subject: [NTG-pdftex] [NTG-context] pdfetex 1.40.1 + ghosscript problem?
In-Reply-To: <Pine.LNX.4.64.0701190115220.986@hahepc1.hahe>
References: <45AFD606.9010003@econ.muni.cz>
	<68c491a60701181559v2e59d02fy4298f4d1f596ec1b@mail.gmail.com>
	<Pine.LNX.4.64.0701190115220.986@hahepc1.hahe>
Message-ID: <68c491a60701181629w18f69fd5i68ff2bcc9ae8a57@mail.gmail.com>

2007/1/19, Hartmut Henkel <hartmut_henkel at gmx.de>:
> e. g. when i run this test file through pdftex-1.40.1
>
> %$Id: test4.tex,v 1.3 2006/01/06 20:24:10 hahe Exp hahe $
> \pdfcompresslevel=0
> \nopagenumbers
> \pdfmapline{qtmr <8r.enc <qtmr.ttf}
>
> \font\qtmr qtmr at 10pt
> \pdffontexpand\qtmr 30 30 5 autoexpand
> \pdfadjustspacing=2
> \qtmr
>
> \input tufte
> \input tufte
> \input tufte
> \input tufte
>
> \bye
>
> then gs 8.54 tells "**** Warning: Encoding not present." But it looks
> ok. Could there be anything missing inside the embedded TTF font?

I get no warnings.
------------------------
> gs h-test4.pdf
GPL Ghostscript 8.54 (2006-05-17)
Copyright (C) 2006 artofcode LLC, Benicia, CA.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Processing pages 1 through 1.
Page 1
>>showpage, press <return> to continue<<

GS>quit
> pdffonts h-test4.pdf
name                                 type         emb sub uni object ID
------------------------------------ ------------ --- --- --- ---------
UQKAGL+QuasiTimesTTF-Regular         TrueType     yes yes no       4  0
------------------------

Best
   Martin

From hartmut_henkel at gmx.de  Fri Jan 19 01:46:33 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Fri, 19 Jan 2007 01:46:33 +0100 (CET)
Subject: [NTG-pdftex] [NTG-context] pdfetex 1.40.1 + ghosscript problem?
In-Reply-To: <Pine.LNX.4.64.0701190115220.986@hahepc1.hahe>
References: <45AFD606.9010003@econ.muni.cz>
	<68c491a60701181559v2e59d02fy4298f4d1f596ec1b@mail.gmail.com>
	<Pine.LNX.4.64.0701190115220.986@hahepc1.hahe>
Message-ID: <Pine.LNX.4.64.0701190144040.23790@hahepc1.hahe>

On Fri, 19 Jan 2007, Hartmut Henkel wrote:

> On Fri, 19 Jan 2007, Martin Schr?der wrote:
>
> > 2007/1/18, Michal Kvasnicka <quasar at econ.muni.cz>:
> > > Excuse me this off-topic, I don't know where should I ask.
> >
> > The pdftex mailing list would be a better place. See
> > http://www.pdftex.org/README
> >
> > [...]
> >
> > > Can anybody tell me what's wrong, and if there is a ghostscript
> > > version capable to view the output of pdftex 1.40.1? Without it it
> > > is useless for me. :-(
> >
> > I can view sample2e.pdf or the pdftex manual fine with gs 8.54.
>
> e. g. when i run this test file through pdftex-1.40.1
>
> %$Id: test4.tex,v 1.3 2006/01/06 20:24:10 hahe Exp hahe $
> \pdfcompresslevel=0
> \nopagenumbers
> \pdfmapline{qtmr <8r.enc <qtmr.ttf}

ok, this <8r.enc is the wrong encoding for this, so it's not surprising
that glyphs in this test file PDF come out wrongly.

> \font\qtmr qtmr at 10pt
> \pdffontexpand\qtmr 30 30 5 autoexpand
> \pdfadjustspacing=2
> \qtmr
>
> \input tufte
> \input tufte
> \input tufte
> \input tufte
>
> \bye
>
> then gs 8.54 tells "**** Warning: Encoding not present." But it looks
> ok. Could there be anything missing inside the embedded TTF font?

Would this warning go away if one uses the right encoding vector?

Regards, Hartmut

From hartmut_henkel at gmx.de  Fri Jan 19 02:05:21 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Fri, 19 Jan 2007 02:05:21 +0100 (CET)
Subject: [NTG-pdftex] [NTG-context] pdfetex 1.40.1 + ghosscript problem?
In-Reply-To: <68c491a60701181629w18f69fd5i68ff2bcc9ae8a57@mail.gmail.com>
References: <45AFD606.9010003@econ.muni.cz>
	<68c491a60701181559v2e59d02fy4298f4d1f596ec1b@mail.gmail.com>
	<Pine.LNX.4.64.0701190115220.986@hahepc1.hahe>
	<68c491a60701181629w18f69fd5i68ff2bcc9ae8a57@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0701190202520.8586@hahepc1.hahe>

On Fri, 19 Jan 2007, Martin Schr?der wrote:

> 2007/1/19, Hartmut Henkel <hartmut_henkel at gmx.de>:
> > e. g. when i run this test file through pdftex-1.40.1
> >
> > %$Id: test4.tex,v 1.3 2006/01/06 20:24:10 hahe Exp hahe $
> > \pdfcompresslevel=0
> > \nopagenumbers
> > \pdfmapline{qtmr <8r.enc <qtmr.ttf}
> >
> > \font\qtmr qtmr at 10pt
> > \pdffontexpand\qtmr 30 30 5 autoexpand
> > \pdfadjustspacing=2
> > \qtmr
> >
> > \input tufte
> > \input tufte
> > \input tufte
> > \input tufte
> >
> > \bye
> >
> > then gs 8.54 tells "**** Warning: Encoding not present." But it looks
> > ok. Could there be anything missing inside the embedded TTF font?
>
> I get no warnings.

i do get them, with 8.54 and with 8.56, see:

ahe at hahepc1:~$ gs h-test4.pdf
GPL Ghostscript SVN PRE-RELEASE 8.56 (2006-05-20)
Copyright (C) 2006 artofcode LLC, Benicia, CA.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Processing pages 1 through 1.
Page 1
   **** Warning: Encoding not present.
>>showpage, press <return> to continue<<

> GS>quit
> > pdffonts h-test4.pdf
> name                                 type         emb sub uni object ID
> ------------------------------------ ------------ --- --- --- ---------
> UQKAGL+QuasiTimesTTF-Regular         TrueType     yes yes no       4  0
> ------------------------

identical.

Weird: Same PDF file, same ghostscript, two different systems, and one
with, one without warning.

Regards, Hartmut

From staw at gust.org.pl  Fri Jan 19 08:37:32 2007
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Fri, 19 Jan 2007 08:37:32 +0100 (CET)
Subject: [NTG-pdftex] [NTG-context] pdfetex 1.40.1 + ghosscript problem?
In-Reply-To: <Pine.LNX.4.64.0701190202520.8586@hahepc1.hahe>
Message-ID: <Pine.LNX.4.44.0701190830500.5407-100000@fam82.internetdsl.tpnet.pl>

> > > \font\qtmr qtmr at 10pt
> > > \pdffontexpand\qtmr 30 30 5 autoexpand
...
> > > then gs 8.54 tells "**** Warning: Encoding not present." But it looks
> > > ok. Could there be anything missing inside the embedded TTF font?

Why it tries to use at first qtmr.ttf? If you have *old* qtmr.ttf, please
remmove as TeX Gyre Termes use the same name for Type1 fonts
Use in your example:
\font\qtmr ec-qtmr at13pt

> > ------------------------------------ ------------ --- --- --- ---------
> > UQKAGL+QuasiTimesTTF-Regular         TrueType     yes yes no       4  0
> > ------------------------

QuasiTimes are obsolete and removed from TL and CTAN

Best,

-- 
Staszek Wawrykiewicz
StaW at gust.org.pl



From pragma at wxs.nl  Fri Jan 19 10:01:05 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 19 Jan 2007 10:01:05 +0100
Subject: [NTG-pdftex] [NTG-context] pdfetex 1.40.1 + ghosscript problem?
In-Reply-To: <Pine.LNX.4.64.0701190115220.986@hahepc1.hahe>
References: <45AFD606.9010003@econ.muni.cz>
	<68c491a60701181559v2e59d02fy4298f4d1f596ec1b@mail.gmail.com>
	<Pine.LNX.4.64.0701190115220.986@hahepc1.hahe>
Message-ID: <45B088D1.4010100@wxs.nl>

Hartmut Henkel wrote:
> Hi Thanh,
>
> On Fri, 19 Jan 2007, Martin Schr?der wrote:
>
>   
>> 2007/1/18, Michal Kvasnicka <quasar at econ.muni.cz>:
>>     
>>> Excuse me this off-topic, I don't know where should I ask.
>>>       
>> The pdftex mailing list would be a better place. See
>> http://www.pdftex.org/README
>>
>> [...]
>>
>>     
>>> Can anybody tell me what's wrong, and if there is a ghostscript
>>> version capable to view the output of pdftex 1.40.1? Without it it
>>> is useless for me. :-(
>>>       
>> I can view sample2e.pdf or the pdftex manual fine with gs 8.54.
>>     
>
> e. g. when i run this test file through pdftex-1.40.1
>
> %$Id: test4.tex,v 1.3 2006/01/06 20:24:10 hahe Exp hahe $
> \pdfcompresslevel=0
> \nopagenumbers
> \pdfmapline{qtmr <8r.enc <qtmr.ttf}
>
> \font\qtmr qtmr at 10pt
> \pdffontexpand\qtmr 30 30 5 autoexpand
> \pdfadjustspacing=2
> \qtmr
>
> \input tufte
> \input tufte
> \input tufte
> \input tufte
>
> \bye
>
> then gs 8.54 tells "**** Warning: Encoding not present." But it looks
> ok. Could there be anything missing inside the embedded TTF font?
>   
i recently also encountered problems with tounicode vectors in gs so 
there may be something messed in gs with regards to encoding related 
vectors; unfortunately it may abort, depending on the situation

Hans

-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From hanthethanh at gmail.com  Fri Jan 19 10:12:18 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Fri, 19 Jan 2007 10:12:18 +0100
Subject: [NTG-pdftex] [NTG-context] pdfetex 1.40.1 + ghosscript problem?
Message-ID: <74f506dc0701190112r235c9840sd231fb89ce89e787@mail.gmail.com>

Hi,

I tried the test file from Hartmut with all pdf browsers
that I have and didn't get any warning.

Can someone verify whether the same file compiled with
pdftex 1.30.6 caused any warnings with gs?

Anyway, fwiw, pdf spec has been improved a lot to clarify
how truetype fonts are treated by adobe viewers. See p399,
section "Encodings for TrueType Fonts". The current
implementation was done using a trial-and-error approach,
since that time the (old) pdf spec didn't say how TTF are
treated. We can change pdftex to conform the spec (not a big
change). But this may have some big impact on backward
compability.

Thanh

On Fri, Jan 19, 2007 at 01:46:33AM +0100, Hartmut Henkel wrote:
> On Fri, 19 Jan 2007, Hartmut Henkel wrote:
>
> > On Fri, 19 Jan 2007, Martin Schr?der wrote:
> >
> > > 2007/1/18, Michal Kvasnicka <quasar at econ.muni.cz>:
> > > > Excuse me this off-topic, I don't know where should I ask.
> > >
> > > The pdftex mailing list would be a better place. See
> > > http://www.pdftex.org/README
> > >
> > > [...]
> > >
> > > > Can anybody tell me what's wrong, and if there is a ghostscript
> > > > version capable to view the output of pdftex 1.40.1? Without it it
> > > > is useless for me. :-(
> > >
> > > I can view sample2e.pdf or the pdftex manual fine with gs 8.54.
> >
> > e. g. when i run this test file through pdftex-1.40.1
> >
> > %$Id: test4.tex,v 1.3 2006/01/06 20:24:10 hahe Exp hahe $
> > \pdfcompresslevel=0
> > \nopagenumbers
> > \pdfmapline{qtmr <8r.enc <qtmr.ttf}
>
> ok, this <8r.enc is the wrong encoding for this, so it's not surprising
> that glyphs in this test file PDF come out wrongly.
>
> > \font\qtmr qtmr at 10pt
> > \pdffontexpand\qtmr 30 30 5 autoexpand
> > \pdfadjustspacing=2
> > \qtmr
> >
> > \input tufte
> > \input tufte
> > \input tufte
> > \input tufte
> >
> > \bye
> >
> > then gs 8.54 tells "**** Warning: Encoding not present." But it looks
> > ok. Could there be anything missing inside the embedded TTF font?
>
> Would this warning go away if one uses the right encoding vector?
>
> Regards, Hartmut
> _______________________________________________
> ntg-pdftex mailing list
> ntg-pdftex at ntg.nl
> http://www.ntg.nl/mailman/listinfo/ntg-pdftex

From hartmut_henkel at gmx.de  Tue Jan 23 13:27:50 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Tue, 23 Jan 2007 13:27:50 +0100 (CET)
Subject: [NTG-pdftex] Unknown font tag 'F42'
Message-ID: <Pine.LNX.4.64.0701231323300.19990@hahepc1.hahe>

Hi,

when viewing english live.pdf from TeX Live 2007 inst 070123 by xpdf, i
get quite a few of these:

Error: font resource is not a dictionary
Error: Unknown font tag 'F42'
Error: font resource is not a dictionary
Error: Unknown font tag 'F42'
Error: font resource is not a dictionary
Error: Unknown font tag 'F42'
Error: Unknown font tag 'F42'

No idea why. And why especially 42? :-)

Creator:        LaTeX with hyperref package
Producer:       pdfTeX-1.40.1
CreationDate:   Mon Jan 22 00:18:24 2007
ModDate:        Mon Jan 22 00:18:24 2007

Regards, Hartmut

From martin at oneiros.de  Tue Jan 23 14:04:03 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 23 Jan 2007 14:04:03 +0100
Subject: [NTG-pdftex] Unknown font tag 'F42'
In-Reply-To: <Pine.LNX.4.64.0701231323300.19990@hahepc1.hahe>
References: <Pine.LNX.4.64.0701231323300.19990@hahepc1.hahe>
Message-ID: <68c491a60701230504n4217f9aek476890d9fdba0a59@mail.gmail.com>

2007/1/23, Hartmut Henkel <hartmut_henkel at gmx.de>:
> No idea why. And why especially 42? :-)

> pdffonts /home/ms/tex/texlive/svn/Master/texmf-doc/doc/english/texlive-en/live.pdf
name                                 type         emb sub uni object ID
------------------------------------ ------------ --- --- --- ---------
JWYWJO+LMRoman12-Italic              Type 1       yes yes no     210  0
KROLCX+LMSans17-Regular              Type 1       yes yes no     211  0
JHAJHO+LMRoman12-Regular             Type 1       yes yes no     212  0
TULIBB+LMTypewriter12-Regular        Type 1       yes yes no     213  0
YHRLSY+LMRoman12-Bold                Type 1       yes yes no     214  0
DOHMTY+LMRoman10-Bold                Type 1       yes yes no     216  0
NGIMYJ+LMRoman10-Regular             Type 1       yes yes no     217  0
FALTII+LMSans10-Regular              Type 1       yes yes no     218  0
XHGCUI+LMRoman8-Bold                 Type 1       yes yes no     219  0
GXEJCB+LMTypewriter10-Regular        Type 1       yes yes no     220  0
Error: font resource is not a dictionary
OHJAIO+LMRoman10-Oblique             Type 1       yes yes no     249  0
WSOALJ+LMRoman8-Regular              Type 1       yes yes no     251  0
KHMMNW+LMRoman7-Regular              Type 1       yes yes no     252  0
TJZNZW+LOGO10                        Type 1       yes yes no     254  0
UZVXOY+LMRoman10-CapsRegular         Type 1       yes yes no     255  0
NGIMYJ+LMRoman10-Regular             Type 1       yes yes no     281  0
KAKVCG+LMRoman10-Italic              Type 1       yes yes no     285  0
DPXPFW+LMSans10-Bold                 Type 1       yes yes no     291  0
Error: font resource is not a dictionary
Error: font resource is not a dictionary
NGIMYJ+LMRoman10-Regular             Type 1       yes yes no     314  0
FIBZNV+LMTypewriter10-Dark           Type 1       yes yes no     342  0
PZLYCC+LMRoman8-Oblique              Type 1       yes yes no     409  0
Error: font resource is not a dictionary
CKLDUR+LMRoman6-Regular              Type 1       yes yes no     440  0
Error: font resource is not a dictionary
Error: font resource is not a dictionary
Error: font resource is not a dictionary
IHMUVE+LMSans10-Oblique              Type 1       yes yes no     472  0
Error: font resource is not a dictionary
Error: font resource is not a dictionary
XSHDVZ+LMTypewriter9-Regular         Type 1       yes yes no     495  0
ZJQTXN+LMTypewriter8-Regular         Type 1       yes yes no     523  0
Error: font resource is not a dictionary
Error: font resource is not a dictionary
Error: font resource is not a dictionary

Best
   Martin

From martin at oneiros.de  Tue Jan 23 14:13:18 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 23 Jan 2007 14:13:18 +0100
Subject: [NTG-pdftex] Unknown font tag 'F42'
In-Reply-To: <68c491a60701230504n4217f9aek476890d9fdba0a59@mail.gmail.com>
References: <Pine.LNX.4.64.0701231323300.19990@hahepc1.hahe>
	<68c491a60701230504n4217f9aek476890d9fdba0a59@mail.gmail.com>
Message-ID: <68c491a60701230513h44f495f0v667daf6cddc9a5b5@mail.gmail.com>

2007/1/23, Martin Schr?der <martin at oneiros.de>:
> 2007/1/23, Hartmut Henkel <hartmut_henkel at gmx.de>:
> > No idea why. And why especially 42? :-)

The object doesn't exists. Same is true for french/texlive-fr/live.pdf:
0000000612 00000 f

Best
   Martin

From martin at oneiros.de  Tue Jan 23 14:27:03 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 23 Jan 2007 14:27:03 +0100
Subject: [NTG-pdftex] Unknown font tag 'F42'
In-Reply-To: <68c491a60701230513h44f495f0v667daf6cddc9a5b5@mail.gmail.com>
References: <Pine.LNX.4.64.0701231323300.19990@hahepc1.hahe>
	<68c491a60701230504n4217f9aek476890d9fdba0a59@mail.gmail.com>
	<68c491a60701230513h44f495f0v667daf6cddc9a5b5@mail.gmail.com>
Message-ID: <68c491a60701230527g30cfa67dne5b0d3629f13c3f0@mail.gmail.com>

2007/1/23, Martin Schr?der <martin at oneiros.de>:
> The object doesn't exists. Same is true for french/texlive-fr/live.pdf:
> 0000000612 00000 f

If I recreate the files here with my non-TL installation, I get valid files.

Best
   Martin

From hartmut_henkel at gmx.de  Tue Jan 23 14:34:32 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Tue, 23 Jan 2007 14:34:32 +0100 (CET)
Subject: [NTG-pdftex] Unknown font tag 'F42'
In-Reply-To: <68c491a60701230527g30cfa67dne5b0d3629f13c3f0@mail.gmail.com>
References: <Pine.LNX.4.64.0701231323300.19990@hahepc1.hahe>
	<68c491a60701230504n4217f9aek476890d9fdba0a59@mail.gmail.com>
	<68c491a60701230513h44f495f0v667daf6cddc9a5b5@mail.gmail.com>
	<68c491a60701230527g30cfa67dne5b0d3629f13c3f0@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0701231431240.20150@hahepc1.hahe>

On Tue, 23 Jan 2007, Martin Schr?der wrote:

> 2007/1/23, Martin Schr?der <martin at oneiros.de>:
> > The object doesn't exists. Same is true for french/texlive-fr/live.pdf:
> > 0000000612 00000 f
>
> If I recreate the files here with my non-TL installation, I get valid files.

same with newest pdftex from said current tex live inst 20070123. It
just means that live.pdf somehow hasn't been compiled properly (maybe a
path problem). No pdftex issue. Just remaking live.pdf should repair
this.

Regards, Hartmut

From taco at elvenkind.com  Tue Jan 23 14:40:39 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 23 Jan 2007 14:40:39 +0100
Subject: [NTG-pdftex] Unknown font tag 'F42'
In-Reply-To: <Pine.LNX.4.64.0701231431240.20150@hahepc1.hahe>
References: <Pine.LNX.4.64.0701231323300.19990@hahepc1.hahe>	<68c491a60701230504n4217f9aek476890d9fdba0a59@mail.gmail.com>	<68c491a60701230513h44f495f0v667daf6cddc9a5b5@mail.gmail.com>	<68c491a60701230527g30cfa67dne5b0d3629f13c3f0@mail.gmail.com>
	<Pine.LNX.4.64.0701231431240.20150@hahepc1.hahe>
Message-ID: <45B61057.9080709@elvenkind.com>

Hi,

Hartmut Henkel wrote:
> On Tue, 23 Jan 2007, Martin Schr?der wrote:
> 
>> 2007/1/23, Martin Schr?der <martin at oneiros.de>:
>>> The object doesn't exists. Same is true for french/texlive-fr/live.pdf:
>>> 0000000612 00000 f
>> If I recreate the files here with my non-TL installation, I get valid files.
> 
> same with newest pdftex from said current tex live inst 20070123. It
> just means that live.pdf somehow hasn't been compiled properly (maybe a
> path problem). No pdftex issue. Just remaking live.pdf should repair
> this.

Could it be that the pk inclusion is broken? I saw no math fonts
at all in martin's dump, and that is a bit suspicious. Perhaps
the "not a font" entries were lmsy10 et al?

Taco

From hartmut_henkel at gmx.de  Tue Jan 23 14:53:45 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Tue, 23 Jan 2007 14:53:45 +0100 (CET)
Subject: [NTG-pdftex] Unknown font tag 'F42'
In-Reply-To: <45B61057.9080709@elvenkind.com>
References: <Pine.LNX.4.64.0701231323300.19990@hahepc1.hahe>
	<68c491a60701230504n4217f9aek476890d9fdba0a59@mail.gmail.com>
	<68c491a60701230513h44f495f0v667daf6cddc9a5b5@mail.gmail.com>
	<68c491a60701230527g30cfa67dne5b0d3629f13c3f0@mail.gmail.com>
	<Pine.LNX.4.64.0701231431240.20150@hahepc1.hahe>
	<45B61057.9080709@elvenkind.com>
Message-ID: <Pine.LNX.4.64.0701231451530.20243@hahepc1.hahe>

On Tue, 23 Jan 2007, Taco Hoekwater wrote:

> Hartmut Henkel wrote:
> > On Tue, 23 Jan 2007, Martin Schr?der wrote:
> >
> > > 2007/1/23, Martin Schr?der <martin at oneiros.de>:
> > > > The object doesn't exists. Same is true for french/texlive-fr/live.pdf:
> > > > 0000000612 00000 f
> > > If I recreate the files here with my non-TL installation, I get valid
> > > files.
> >
> > same with newest pdftex from said current tex live inst 20070123. It
> > just means that live.pdf somehow hasn't been compiled properly (maybe a
> > path problem). No pdftex issue. Just remaking live.pdf should repair
> > this.
>
> Could it be that the pk inclusion is broken?

this could be also missing gsftopk triggering. Anyway, it's still
interesting that pdftex doesn't quit in such a case, removing the faulty
pdf file. There should be pdf_fail.

Regards, Hartmut

From martin at oneiros.de  Tue Jan 23 15:00:25 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 23 Jan 2007 15:00:25 +0100
Subject: [NTG-pdftex] Unknown font tag 'F42'
In-Reply-To: <45B61057.9080709@elvenkind.com>
References: <Pine.LNX.4.64.0701231323300.19990@hahepc1.hahe>
	<68c491a60701230504n4217f9aek476890d9fdba0a59@mail.gmail.com>
	<68c491a60701230513h44f495f0v667daf6cddc9a5b5@mail.gmail.com>
	<68c491a60701230527g30cfa67dne5b0d3629f13c3f0@mail.gmail.com>
	<Pine.LNX.4.64.0701231431240.20150@hahepc1.hahe>
	<45B61057.9080709@elvenkind.com>
Message-ID: <68c491a60701230600y501d687bt4e9b2df3e4d2dc33@mail.gmail.com>

2007/1/23, Taco Hoekwater <taco at elvenkind.com>:
> Could it be that the pk inclusion is broken? I saw no math fonts
> at all in martin's dump, and that is a bit suspicious. Perhaps
> the "not a font" entries were lmsy10 et al?

Could indeed be math. The working file also has CMMI10, CMR10 and
CMSY10, while these are absent in the broken one. But LOGO10 is there.

Best
   Martin

From noreply at sarovar.org  Tue Jan 23 21:17:11 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 24 Jan 2007 01:47:11 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-721 ] Missing /Font object of PK file
	not found
Message-ID: <E1H9S4t-0006s4-00@sarovar.org>

Bugs item #721, was opened at 2007-01-23 21:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=721&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
Resolution: None
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Missing /Font object of PK file not found

Initial Comment:
There are several cases, the buggy one is no. 3. See
test files test1...4.tex in the attached file.

1. No TFM file found in the 1st place. ---> No TeX font
will be started. Ok. See test1.tex.

2. TFM file found, map entry existing, but no PFB font
file in map line ---> "pdfTeX warning: pdftex: font
`CMR' is not a standard font; I suppose it is available
to your PDF viewer then". Ok. See test2.tex.

3. TFM file found, no map entry, and no PK font
available. ---> "pdfTeX warning: pdftex (file
mf-nonexist): Font mf-nonexist at 600 not found". Not
ok. See test3.tex. Here a /Font object is referenced,
which is not existing, rendering the resulting PDF file
buggy. There should be either pdftex_fail() or or at
least a /Font object with a dummy /FontDescriptor
object should be created (the latter filled with
defaults from the TFM file), and the same warning
should be given as in case 4 below, since these cases
are similar: fontfile expected, but not available.

4. TFM file found, map entry with PFB font file
existing, but no PFB font file found. ---> "pdfTeX
warning: pdftex (file t1-nonexist.pfb): cannot open
Type 1 font file for reading". /FontDescriptor without
/FontFile, correct. Ok. See test4.tex.

Regards, Hartmut


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=721&group_id=106

From reinhard.kotucha at web.de  Tue Jan 23 21:47:23 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 23 Jan 2007 21:47:23 +0100
Subject: [NTG-pdftex] Unknown font tag 'F42'
In-Reply-To: <Pine.LNX.4.64.0701231323300.19990@hahepc1.hahe>
References: <Pine.LNX.4.64.0701231323300.19990@hahepc1.hahe>
Message-ID: <17846.29787.898416.82772@zarniwoop.ms25.local>

>>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel at gmx.de> writes:

  > And why especially 42? :-)

42 is the answer, try to find out the question.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From hartmut_henkel at gmx.de  Tue Jan 23 21:50:53 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Tue, 23 Jan 2007 21:50:53 +0100 (CET)
Subject: [NTG-pdftex] Unknown font tag 'F42'
In-Reply-To: <17846.29787.898416.82772@zarniwoop.ms25.local>
References: <Pine.LNX.4.64.0701231323300.19990@hahepc1.hahe>
	<17846.29787.898416.82772@zarniwoop.ms25.local>
Message-ID: <Pine.LNX.4.64.0701232150240.1286@hahepc1.hahe>

On Tue, 23 Jan 2007, Reinhard Kotucha wrote:

> >>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel at gmx.de> writes:
>
>   > And why especially 42? :-)
>
> 42 is the answer, try to find out the question.

Microsoft?

Regards, Hartmut

From reinhard.kotucha at web.de  Tue Jan 23 22:57:54 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 23 Jan 2007 22:57:54 +0100
Subject: [NTG-pdftex] Unknown font tag 'F42'
In-Reply-To: <Pine.LNX.4.64.0701232150240.1286@hahepc1.hahe>
References: <Pine.LNX.4.64.0701231323300.19990@hahepc1.hahe>
	<17846.29787.898416.82772@zarniwoop.ms25.local>
	<Pine.LNX.4.64.0701232150240.1286@hahepc1.hahe>
Message-ID: <17846.34018.543696.406026@zarniwoop.ms25.local>

>>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel at gmx.de> writes:

  > On Tue, 23 Jan 2007, Reinhard Kotucha wrote:
  >> >>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel at gmx.de> writes:
  >> 
  >> > And why especially 42? :-)
  >> 
  >> 42 is the answer, try to find out the question.

  > Microsoft?

I assume that the random number generator their software is based on
will provide the number "42" occasionally.  But this is nothing you
can rely on.

Cheers,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From noreply at sarovar.org  Wed Jan 24 01:49:15 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 24 Jan 2007 06:19:15 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-721 ] Missing /Font object of PK file
	not found
Message-ID: <E1H9WKB-0000P0-00@sarovar.org>

Bugs item #721, was opened at 2007-01-23 21:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=721&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
>Resolution: Accepted
>Priority: 7
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Missing /Font object of PK file not found

Initial Comment:
There are several cases, the buggy one is no. 3. See
test files test1...4.tex in the attached file.

1. No TFM file found in the 1st place. ---> No TeX font
will be started. Ok. See test1.tex.

2. TFM file found, map entry existing, but no PFB font
file in map line ---> "pdfTeX warning: pdftex: font
`CMR' is not a standard font; I suppose it is available
to your PDF viewer then". Ok. See test2.tex.

3. TFM file found, no map entry, and no PK font
available. ---> "pdfTeX warning: pdftex (file
mf-nonexist): Font mf-nonexist at 600 not found". Not
ok. See test3.tex. Here a /Font object is referenced,
which is not existing, rendering the resulting PDF file
buggy. There should be either pdftex_fail() or or at
least a /Font object with a dummy /FontDescriptor
object should be created (the latter filled with
defaults from the TFM file), and the same warning
should be given as in case 4 below, since these cases
are similar: fontfile expected, but not available.

4. TFM file found, map entry with PFB font file
existing, but no PFB font file found. ---> "pdfTeX
warning: pdftex (file t1-nonexist.pfb): cannot open
Type 1 font file for reading". /FontDescriptor without
/FontFile, correct. Ok. See test4.tex.

Regards, Hartmut


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=721&group_id=106

From noreply at sarovar.org  Wed Jan 24 09:56:13 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 24 Jan 2007 14:26:13 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-722 ] PDF generation does not support VF
	fonts correctly
Message-ID: <E1H9dvR-00038F-00@sarovar.org>

Bugs item #722, was opened at 2007-01-24 08:56
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
Resolution: None
Priority: 5
Submitted By: Achim Blumensath (blume)
Assigned to: Hartmut Henkel (hhenkel)
Summary: PDF generation does not support VF fonts correctly

Initial Comment:
I've a problem with using VF fonts in PDF mode
(using pdftex 1.40.1, pdftex 1.20b does work correctly).
When using glyphs that are composed of several other
glyphs the various parts appear not at their correct
position.

The following example requires the MnSymbol and the
MinionPro packages.

\documentclass{minimal}
\usepackage[T1]{fontenc}
\usepackage[minionint]{MinionPro}
\begin{document}
$$\iint \quad \oint$$
\end{document}

If you create a DVI and use dvips + ps2pdf the output
is as expected (one double integral and one closed
integral). If you use pdflatex to create a PDF file
directly then the output is wrong. The double integral
consists of just one integral sign and the closed
integral consists of a circle followed by an integral
sign.


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

From noreply at sarovar.org  Wed Jan 24 15:56:58 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 24 Jan 2007 20:26:58 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-722 ] PDF generation does not support VF
	fonts correctly
Message-ID: <E1H9jYY-0000Q3-00@sarovar.org>

Bugs item #722, was opened at 2007-01-24 09:56
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
Resolution: None
Priority: 5
Submitted By: Achim Blumensath (blume)
Assigned to: Hartmut Henkel (hhenkel)
Summary: PDF generation does not support VF fonts correctly

Initial Comment:
I've a problem with using VF fonts in PDF mode
(using pdftex 1.40.1, pdftex 1.20b does work correctly).
When using glyphs that are composed of several other
glyphs the various parts appear not at their correct
position.

The following example requires the MnSymbol and the
MinionPro packages.

\documentclass{minimal}
\usepackage[T1]{fontenc}
\usepackage[minionint]{MinionPro}
\begin{document}
$$\iint \quad \oint$$
\end{document}

If you create a DVI and use dvips + ps2pdf the output
is as expected (one double integral and one closed
integral). If you use pdflatex to create a PDF file
directly then the output is wrong. The double integral
consists of just one integral sign and the closed
integral consists of a circle followed by an integral
sign.


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-01-24 15:56

Message:
Logged In: YES 
user_id=421

Please attach the PDFs generated by ps2pdf and pdflatex,
best generated with \pdfcompresslevel=0. And the log from
pdflatex.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

From noreply at sarovar.org  Wed Jan 24 19:52:12 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 25 Jan 2007 00:22:12 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-722 ] PDF generation does not support VF
	fonts correctly
Message-ID: <E1H9nEC-00018u-00@sarovar.org>

Bugs item #722, was opened at 2007-01-24 08:56
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
Resolution: None
Priority: 5
Submitted By: Achim Blumensath (blume)
Assigned to: Hartmut Henkel (hhenkel)
Summary: PDF generation does not support VF fonts correctly

Initial Comment:
I've a problem with using VF fonts in PDF mode
(using pdftex 1.40.1, pdftex 1.20b does work correctly).
When using glyphs that are composed of several other
glyphs the various parts appear not at their correct
position.

The following example requires the MnSymbol and the
MinionPro packages.

\documentclass{minimal}
\usepackage[T1]{fontenc}
\usepackage[minionint]{MinionPro}
\begin{document}
$$\iint \quad \oint$$
\end{document}

If you create a DVI and use dvips + ps2pdf the output
is as expected (one double integral and one closed
integral). If you use pdflatex to create a PDF file
directly then the output is wrong. The double integral
consists of just one integral sign and the closed
integral consists of a circle followed by an integral
sign.


----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-24 18:52

Message:
Logged In: YES 
user_id=710

I compiled the test file and got normal output (see attached
screenshot).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-24 14:56

Message:
Logged In: YES 
user_id=421

Please attach the PDFs generated by ps2pdf and pdflatex,
best generated with \pdfcompresslevel=0. And the log from
pdflatex.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

From noreply at sarovar.org  Thu Jan 25 07:27:25 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 25 Jan 2007 11:57:25 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-723 ] Pale colors when using
	transparency in PNG graphics
Message-ID: <E1H9y4z-0003Ca-00@sarovar.org>

Bugs item #723, was opened at 2007-01-25 06:27
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

Category: Image inclusion
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Mark Henning (markhe)
Assigned to: Martin Schr?der (oneiros)
Summary: Pale colors when using transparency in PNG graphics

Initial Comment:
Hi at all!

I hope this is the right place to report this problem:

If there is any transparency definition in a PNG file 
(e.g. transparency by a certain color or given by a 
mask), then all graphics on the page show pale colors. 
Graphics on pages before or after this page show normal 
colors. This is confirmed in several versions of Adobe 
Acrobat Reader. Ghostview/Ghostscript does not show 
this behaviour. The reason for this viewer-dependency 
might be a missing transparency-definition in the PDF 
file which makes it ambiguous, as reported by Andreas 
Lobinger in de.comp.text.tex; thread "Blasse Farben bei 
transparentem PNG in pdftex".


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

From noreply at sarovar.org  Thu Jan 25 07:54:20 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 25 Jan 2007 12:24:20 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-722 ] PDF generation does not support VF
	fonts correctly
Message-ID: <E1H9yV2-0004AJ-00@sarovar.org>

Bugs item #722, was opened at 2007-01-24 08:56
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
Resolution: None
Priority: 5
Submitted By: Achim Blumensath (blume)
Assigned to: Hartmut Henkel (hhenkel)
Summary: PDF generation does not support VF fonts correctly

Initial Comment:
I've a problem with using VF fonts in PDF mode
(using pdftex 1.40.1, pdftex 1.20b does work correctly).
When using glyphs that are composed of several other
glyphs the various parts appear not at their correct
position.

The following example requires the MnSymbol and the
MinionPro packages.

\documentclass{minimal}
\usepackage[T1]{fontenc}
\usepackage[minionint]{MinionPro}
\begin{document}
$$\iint \quad \oint$$
\end{document}

If you create a DVI and use dvips + ps2pdf the output
is as expected (one double integral and one closed
integral). If you use pdflatex to create a PDF file
directly then the output is wrong. The double integral
consists of just one integral sign and the closed
integral consists of a circle followed by an integral
sign.


----------------------------------------------------------------------

>Comment By: Achim Blumensath (blume)
Date: 2007-01-25 06:54

Message:
Logged In: YES 
user_id=4173

In order to preproduce the bug you need the CVS version
on MinionPro and perhaps also a recent version of the
lcdf-typetools. The problem seems to be that the font
MnSymbolFI10.vf refers again to a virtual font
MinionPro-It-integral.vf. I've attached the corresponding
VPL files.

(I didn't have the time to create the requested PDF files.
Will do so shortly.)


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-24 18:52

Message:
Logged In: YES 
user_id=710

I compiled the test file and got normal output (see attached
screenshot).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-24 14:56

Message:
Logged In: YES 
user_id=421

Please attach the PDFs generated by ps2pdf and pdflatex,
best generated with \pdfcompresslevel=0. And the log from
pdflatex.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

From noreply at sarovar.org  Thu Jan 25 09:43:02 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 25 Jan 2007 14:13:02 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-722 ] PDF generation does not support VF
	fonts correctly
Message-ID: <E1HA0CE-0000Is-00@sarovar.org>

Bugs item #722, was opened at 2007-01-24 08:56
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
Resolution: None
Priority: 5
Submitted By: Achim Blumensath (blume)
Assigned to: Hartmut Henkel (hhenkel)
Summary: PDF generation does not support VF fonts correctly

Initial Comment:
I've a problem with using VF fonts in PDF mode
(using pdftex 1.40.1, pdftex 1.20b does work correctly).
When using glyphs that are composed of several other
glyphs the various parts appear not at their correct
position.

The following example requires the MnSymbol and the
MinionPro packages.

\documentclass{minimal}
\usepackage[T1]{fontenc}
\usepackage[minionint]{MinionPro}
\begin{document}
$$\iint \quad \oint$$
\end{document}

If you create a DVI and use dvips + ps2pdf the output
is as expected (one double integral and one closed
integral). If you use pdflatex to create a PDF file
directly then the output is wrong. The double integral
consists of just one integral sign and the closed
integral consists of a circle followed by an integral
sign.


----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-25 08:43

Message:
Logged In: YES 
user_id=710

I tested the file again with the fonts you uploaded, but
still I cannot reproduce the problem.

I attached a small script that creates a list of all files
opened by tex. Usage: unpack, put list-tex-files.vim under
~/vim and run:

sh list-tex-files pdflatex testfile

it will report the filename of the list, which can be used
then to pack everything needed to rerun the job. You may
want to review the list to remove a few files that are not
relevant, for example the format.


----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-25 06:54

Message:
Logged In: YES 
user_id=4173

In order to preproduce the bug you need the CVS version
on MinionPro and perhaps also a recent version of the
lcdf-typetools. The problem seems to be that the font
MnSymbolFI10.vf refers again to a virtual font
MinionPro-It-integral.vf. I've attached the corresponding
VPL files.

(I didn't have the time to create the requested PDF files.
Will do so shortly.)


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-24 18:52

Message:
Logged In: YES 
user_id=710

I compiled the test file and got normal output (see attached
screenshot).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-24 14:56

Message:
Logged In: YES 
user_id=421

Please attach the PDFs generated by ps2pdf and pdflatex,
best generated with \pdfcompresslevel=0. And the log from
pdflatex.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

From noreply at sarovar.org  Thu Jan 25 14:51:50 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 25 Jan 2007 19:21:50 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-723 ] Pale colors when using
	transparency in PNG graphics
Message-ID: <E1HA514-00047x-00@sarovar.org>

Bugs item #723, was opened at 2007-01-25 07:27
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

Category: Image inclusion
>Group: v1.30.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Mark Henning (markhe)
Assigned to: Martin Schr?der (oneiros)
Summary: Pale colors when using transparency in PNG graphics

Initial Comment:
Hi at all!

I hope this is the right place to report this problem:

If there is any transparency definition in a PNG file 
(e.g. transparency by a certain color or given by a 
mask), then all graphics on the page show pale colors. 
Graphics on pages before or after this page show normal 
colors. This is confirmed in several versions of Adobe 
Acrobat Reader. Ghostview/Ghostscript does not show 
this behaviour. The reason for this viewer-dependency 
might be a missing transparency-definition in the PDF 
file which makes it ambiguous, as reported by Andreas 
Lobinger in de.comp.text.tex; thread "Blasse Farben bei 
transparentem PNG in pdftex".


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 14:51

Message:
Logged In: YES 
user_id=421

Pointer to the threat on dctt:
http://groups.google.de/group/de.comp.text.tex/browse_thread/thread/758dcc47273b4e7d/

An example:
http://www.homolog.de/temp/PNGTransparencyBug.zip

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

From noreply at sarovar.org  Thu Jan 25 14:53:52 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 25 Jan 2007 19:23:52 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-723 ] Pale colors when using
	transparency in PNG graphics
Message-ID: <E1HA532-0004Ra-00@sarovar.org>

Bugs item #723, was opened at 2007-01-25 07:27
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

Category: Image inclusion
Group: v1.30.0
>Status: Closed
>Resolution: Works For Me
Priority: 5
Submitted By: Mark Henning (markhe)
Assigned to: Martin Schr?der (oneiros)
Summary: Pale colors when using transparency in PNG graphics

Initial Comment:
Hi at all!

I hope this is the right place to report this problem:

If there is any transparency definition in a PNG file 
(e.g. transparency by a certain color or given by a 
mask), then all graphics on the page show pale colors. 
Graphics on pages before or after this page show normal 
colors. This is confirmed in several versions of Adobe 
Acrobat Reader. Ghostview/Ghostscript does not show 
this behaviour. The reason for this viewer-dependency 
might be a missing transparency-definition in the PDF 
file which makes it ambiguous, as reported by Andreas 
Lobinger in de.comp.text.tex; thread "Blasse Farben bei 
transparentem PNG in pdftex".


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 14:53

Message:
Logged In: YES 
user_id=421

I see no problems with AR 7.0.9, kpdf 0.5.1 and gs 8.54 on
SUSE 10.1.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 14:51

Message:
Logged In: YES 
user_id=421

Pointer to the threat on dctt:
http://groups.google.de/group/de.comp.text.tex/browse_thread/thread/758dcc47273b4e7d/

An example:
http://www.homolog.de/temp/PNGTransparencyBug.zip

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

From noreply at sarovar.org  Thu Jan 25 15:01:28 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 25 Jan 2007 19:31:28 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-722 ] PDF generation does not support VF
	fonts correctly
Message-ID: <E1HA5AO-0004ob-00@sarovar.org>

Bugs item #722, was opened at 2007-01-24 09:56
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
Resolution: None
Priority: 5
Submitted By: Achim Blumensath (blume)
Assigned to: Hartmut Henkel (hhenkel)
Summary: PDF generation does not support VF fonts correctly

Initial Comment:
I've a problem with using VF fonts in PDF mode
(using pdftex 1.40.1, pdftex 1.20b does work correctly).
When using glyphs that are composed of several other
glyphs the various parts appear not at their correct
position.

The following example requires the MnSymbol and the
MinionPro packages.

\documentclass{minimal}
\usepackage[T1]{fontenc}
\usepackage[minionint]{MinionPro}
\begin{document}
$$\iint \quad \oint$$
\end{document}

If you create a DVI and use dvips + ps2pdf the output
is as expected (one double integral and one closed
integral). If you use pdflatex to create a PDF file
directly then the output is wrong. The double integral
consists of just one integral sign and the closed
integral consists of a circle followed by an integral
sign.


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 15:01

Message:
Logged In: YES 
user_id=421

Note that the -recorder cmdline switch also works quite well
with kpathsea. :-)

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-25 09:43

Message:
Logged In: YES 
user_id=710

I tested the file again with the fonts you uploaded, but
still I cannot reproduce the problem.

I attached a small script that creates a list of all files
opened by tex. Usage: unpack, put list-tex-files.vim under
~/vim and run:

sh list-tex-files pdflatex testfile

it will report the filename of the list, which can be used
then to pack everything needed to rerun the job. You may
want to review the list to remove a few files that are not
relevant, for example the format.


----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-25 07:54

Message:
Logged In: YES 
user_id=4173

In order to preproduce the bug you need the CVS version
on MinionPro and perhaps also a recent version of the
lcdf-typetools. The problem seems to be that the font
MnSymbolFI10.vf refers again to a virtual font
MinionPro-It-integral.vf. I've attached the corresponding
VPL files.

(I didn't have the time to create the requested PDF files.
Will do so shortly.)


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-24 19:52

Message:
Logged In: YES 
user_id=710

I compiled the test file and got normal output (see attached
screenshot).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-24 15:56

Message:
Logged In: YES 
user_id=421

Please attach the PDFs generated by ps2pdf and pdflatex,
best generated with \pdfcompresslevel=0. And the log from
pdflatex.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

From noreply at sarovar.org  Thu Jan 25 16:06:29 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 25 Jan 2007 20:36:29 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-723 ] Pale colors when using
	transparency in PNG graphics
Message-ID: <E1HA6BJ-0007T0-00@sarovar.org>

Bugs item #723, was opened at 2007-01-25 06:27
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

Category: Image inclusion
Group: v1.30.0
Status: Closed
Resolution: Works For Me
Priority: 5
Submitted By: Mark Henning (markhe)
Assigned to: Martin Schr?der (oneiros)
Summary: Pale colors when using transparency in PNG graphics

Initial Comment:
Hi at all!

I hope this is the right place to report this problem:

If there is any transparency definition in a PNG file 
(e.g. transparency by a certain color or given by a 
mask), then all graphics on the page show pale colors. 
Graphics on pages before or after this page show normal 
colors. This is confirmed in several versions of Adobe 
Acrobat Reader. Ghostview/Ghostscript does not show 
this behaviour. The reason for this viewer-dependency 
might be a missing transparency-definition in the PDF 
file which makes it ambiguous, as reported by Andreas 
Lobinger in de.comp.text.tex; thread "Blasse Farben bei 
transparentem PNG in pdftex".


----------------------------------------------------------------------

>Comment By: Mark Henning (markhe)
Date: 2007-01-25 15:06

Message:
Logged In: YES 
user_id=4174

I rechecked with Adobe Acrobat 7.0 and Adobe Acrobat 7.0.9 
on Win2000 SP4, both showed the color differences (see the 
PNG file I uploaded. It shows a direct comparison.). If you 
checked the PDF and say that it is O.K., then there must be 
a bug in Adobe Reader. I will contact Adobe then.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 13:53

Message:
Logged In: YES 
user_id=421

I see no problems with AR 7.0.9, kpdf 0.5.1 and gs 8.54 on
SUSE 10.1.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 13:51

Message:
Logged In: YES 
user_id=421

Pointer to the threat on dctt:
http://groups.google.de/group/de.comp.text.tex/browse_thread/thread/758dcc47273b4e7d/

An example:
http://www.homolog.de/temp/PNGTransparencyBug.zip

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

From noreply at sarovar.org  Thu Jan 25 16:08:30 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 25 Jan 2007 20:38:30 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-723 ] Pale colors when using
	transparency in PNG graphics
Message-ID: <E1HA6DG-0007vW-00@sarovar.org>

Bugs item #723, was opened at 2007-01-25 06:27
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

Category: Image inclusion
Group: v1.30.0
Status: Closed
Resolution: Works For Me
Priority: 5
Submitted By: Mark Henning (markhe)
Assigned to: Martin Schr?der (oneiros)
Summary: Pale colors when using transparency in PNG graphics

Initial Comment:
Hi at all!

I hope this is the right place to report this problem:

If there is any transparency definition in a PNG file 
(e.g. transparency by a certain color or given by a 
mask), then all graphics on the page show pale colors. 
Graphics on pages before or after this page show normal 
colors. This is confirmed in several versions of Adobe 
Acrobat Reader. Ghostview/Ghostscript does not show 
this behaviour. The reason for this viewer-dependency 
might be a missing transparency-definition in the PDF 
file which makes it ambiguous, as reported by Andreas 
Lobinger in de.comp.text.tex; thread "Blasse Farben bei 
transparentem PNG in pdftex".


----------------------------------------------------------------------

>Comment By: Mark Henning (markhe)
Date: 2007-01-25 15:08

Message:
Logged In: YES 
user_id=4174

Sorry; I forgot to check the checkbox for uploading the 
file.

----------------------------------------------------------------------

Comment By: Mark Henning (markhe)
Date: 2007-01-25 15:06

Message:
Logged In: YES 
user_id=4174

I rechecked with Adobe Acrobat 7.0 and Adobe Acrobat 7.0.9 
on Win2000 SP4, both showed the color differences (see the 
PNG file I uploaded. It shows a direct comparison.). If you 
checked the PDF and say that it is O.K., then there must be 
a bug in Adobe Reader. I will contact Adobe then.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 13:53

Message:
Logged In: YES 
user_id=421

I see no problems with AR 7.0.9, kpdf 0.5.1 and gs 8.54 on
SUSE 10.1.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 13:51

Message:
Logged In: YES 
user_id=421

Pointer to the threat on dctt:
http://groups.google.de/group/de.comp.text.tex/browse_thread/thread/758dcc47273b4e7d/

An example:
http://www.homolog.de/temp/PNGTransparencyBug.zip

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

From noreply at sarovar.org  Thu Jan 25 16:15:20 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 25 Jan 2007 20:45:20 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-723 ] Pale colors when using
	transparency in PNG graphics
Message-ID: <E1HA6Js-0008Si-00@sarovar.org>

Bugs item #723, was opened at 2007-01-25 07:27
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

Category: Image inclusion
>Group: v1.40.1
>Status: Open
>Resolution: Accepted
Priority: 5
Submitted By: Mark Henning (markhe)
Assigned to: Martin Schr?der (oneiros)
Summary: Pale colors when using transparency in PNG graphics

Initial Comment:
Hi at all!

I hope this is the right place to report this problem:

If there is any transparency definition in a PNG file 
(e.g. transparency by a certain color or given by a 
mask), then all graphics on the page show pale colors. 
Graphics on pages before or after this page show normal 
colors. This is confirmed in several versions of Adobe 
Acrobat Reader. Ghostview/Ghostscript does not show 
this behaviour. The reason for this viewer-dependency 
might be a missing transparency-definition in the PDF 
file which makes it ambiguous, as reported by Andreas 
Lobinger in de.comp.text.tex; thread "Blasse Farben bei 
transparentem PNG in pdftex".


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 16:15

Message:
Logged In: YES 
user_id=421

Ah, now I see it. Inded, AR7.0.9 shows a difference.
The problem also shows with files generated by pdftex 1.40.1

----------------------------------------------------------------------

Comment By: Mark Henning (markhe)
Date: 2007-01-25 16:08

Message:
Logged In: YES 
user_id=4174

Sorry; I forgot to check the checkbox for uploading the 
file.

----------------------------------------------------------------------

Comment By: Mark Henning (markhe)
Date: 2007-01-25 16:06

Message:
Logged In: YES 
user_id=4174

I rechecked with Adobe Acrobat 7.0 and Adobe Acrobat 7.0.9 
on Win2000 SP4, both showed the color differences (see the 
PNG file I uploaded. It shows a direct comparison.). If you 
checked the PDF and say that it is O.K., then there must be 
a bug in Adobe Reader. I will contact Adobe then.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 14:53

Message:
Logged In: YES 
user_id=421

I see no problems with AR 7.0.9, kpdf 0.5.1 and gs 8.54 on
SUSE 10.1.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 14:51

Message:
Logged In: YES 
user_id=421

Pointer to the threat on dctt:
http://groups.google.de/group/de.comp.text.tex/browse_thread/thread/758dcc47273b4e7d/

An example:
http://www.homolog.de/temp/PNGTransparencyBug.zip

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

From noreply at sarovar.org  Thu Jan 25 18:05:31 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 25 Jan 2007 22:35:31 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-723 ] Pale colors when using
	transparency in PNG graphics
Message-ID: <E1HA82V-0005Jv-00@sarovar.org>

Bugs item #723, was opened at 2007-01-25 07:27
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

Category: Image inclusion
Group: v1.40.1
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Mark Henning (markhe)
Assigned to: Martin Schr?der (oneiros)
Summary: Pale colors when using transparency in PNG graphics

Initial Comment:
Hi at all!

I hope this is the right place to report this problem:

If there is any transparency definition in a PNG file 
(e.g. transparency by a certain color or given by a 
mask), then all graphics on the page show pale colors. 
Graphics on pages before or after this page show normal 
colors. This is confirmed in several versions of Adobe 
Acrobat Reader. Ghostview/Ghostscript does not show 
this behaviour. The reason for this viewer-dependency 
might be a missing transparency-definition in the PDF 
file which makes it ambiguous, as reported by Andreas 
Lobinger in de.comp.text.tex; thread "Blasse Farben bei 
transparentem PNG in pdftex".


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 18:05

Message:
Logged In: YES 
user_id=421

Attached the results of rendering this with two professional
RIPs (Jaws and Harlequin). I don't see it there...

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 16:15

Message:
Logged In: YES 
user_id=421

Ah, now I see it. Inded, AR7.0.9 shows a difference.
The problem also shows with files generated by pdftex 1.40.1

----------------------------------------------------------------------

Comment By: Mark Henning (markhe)
Date: 2007-01-25 16:08

Message:
Logged In: YES 
user_id=4174

Sorry; I forgot to check the checkbox for uploading the 
file.

----------------------------------------------------------------------

Comment By: Mark Henning (markhe)
Date: 2007-01-25 16:06

Message:
Logged In: YES 
user_id=4174

I rechecked with Adobe Acrobat 7.0 and Adobe Acrobat 7.0.9 
on Win2000 SP4, both showed the color differences (see the 
PNG file I uploaded. It shows a direct comparison.). If you 
checked the PDF and say that it is O.K., then there must be 
a bug in Adobe Reader. I will contact Adobe then.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 14:53

Message:
Logged In: YES 
user_id=421

I see no problems with AR 7.0.9, kpdf 0.5.1 and gs 8.54 on
SUSE 10.1.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 14:51

Message:
Logged In: YES 
user_id=421

Pointer to the threat on dctt:
http://groups.google.de/group/de.comp.text.tex/browse_thread/thread/758dcc47273b4e7d/

An example:
http://www.homolog.de/temp/PNGTransparencyBug.zip

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

From hartmut_henkel at gmx.de  Thu Jan 25 20:13:32 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu, 25 Jan 2007 20:13:32 +0100 (CET)
Subject: [NTG-pdftex] [ pdftex-Bugs-723 ] Pale colors when using
 transparency in PNG graphics
In-Reply-To: <E1HA82V-0005Jv-00@sarovar.org>
References: <E1HA82V-0005Jv-00@sarovar.org>
Message-ID: <Pine.LNX.4.64.0701252008130.4675@hahepc1.hahe>

Hi Hans and Taco,

just a question: do you use PNG transparency purely by the PDF object
machinery provided by pdftex, or do you add (via ConTeXt) other
dictionaries for transparency definition as well? If the latter, what's
normally in there?

Regards, Hartmut


On Thu, 25 Jan 2007, noreply at sarovar.org wrote:

> Bugs item #723, was opened at 2007-01-25 07:27
You can respond by visiting:
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

Category: Image inclusion
Group: v1.40.1
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Mark Henning (markhe)
Assigned to: Martin Schr?der (oneiros)
Summary: Pale colors when using transparency in PNG graphics

Initial Comment:
Hi at all!

I hope this is the right place to report this problem:

If there is any transparency definition in a PNG file
(e.g. transparency by a certain color or given by a
mask), then all graphics on the page show pale colors.
Graphics on pages before or after this page show normal
colors. This is confirmed in several versions of Adobe
Acrobat Reader. Ghostview/Ghostscript does not show
this behaviour. The reason for this viewer-dependency
might be a missing transparency-definition in the PDF
file which makes it ambiguous, as reported by Andreas
Lobinger in de.comp.text.tex; thread "Blasse Farben bei
transparentem PNG in pdftex".

From taco at elvenkind.com  Thu Jan 25 21:26:45 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 25 Jan 2007 21:26:45 +0100
Subject: [NTG-pdftex] [ pdftex-Bugs-723 ] Pale colors when using
 transparency in PNG graphics
In-Reply-To: <Pine.LNX.4.64.0701252008130.4675@hahepc1.hahe>
References: <E1HA82V-0005Jv-00@sarovar.org>
	<Pine.LNX.4.64.0701252008130.4675@hahepc1.hahe>
Message-ID: <45B91285.5060907@elvenkind.com>

Hartmut Henkel wrote:
> Hi Hans and Taco,
> 
> just a question: do you use PNG transparency purely by the PDF object
> machinery provided by pdftex, or do you add (via ConTeXt) other
> dictionaries for transparency definition as well? If the latter, what's
> normally in there?

I don't think there is anything special in ConTeXt. What is going on
here anyway? I do not comprehend the dctt comments enough to understand
precisely what is (supposedly) missing.

Taco

From martin at oneiros.de  Thu Jan 25 22:06:51 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Thu, 25 Jan 2007 22:06:51 +0100
Subject: [NTG-pdftex] [ pdftex-Bugs-723 ] Pale colors when using
	transparency in PNG graphics
In-Reply-To: <45B91285.5060907@elvenkind.com>
References: <E1HA82V-0005Jv-00@sarovar.org>
	<Pine.LNX.4.64.0701252008130.4675@hahepc1.hahe>
	<45B91285.5060907@elvenkind.com>
Message-ID: <68c491a60701251306h3cfcbff6je938789aff5a9152@mail.gmail.com>

2007/1/25, Taco Hoekwater <taco at elvenkind.com>:
> I don't think there is anything special in ConTeXt. What is going on
> here anyway? I do not comprehend the dctt comments enough to understand
> precisely what is (supposedly) missing.

AR7 (only!) shows different colors on page 1 and page 2. It has been
claimed that our support for transparent pngs needs some additional
dictionaries etc. on the page.

Could somebody please test this with AR8?

Best
   Martin

From hartmut_henkel at gmx.de  Thu Jan 25 22:24:17 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu, 25 Jan 2007 22:24:17 +0100 (CET)
Subject: [NTG-pdftex] [ pdftex-Bugs-723 ] Pale colors when using
 transparency in PNG graphics
In-Reply-To: <68c491a60701251306h3cfcbff6je938789aff5a9152@mail.gmail.com>
References: <E1HA82V-0005Jv-00@sarovar.org>
	<Pine.LNX.4.64.0701252008130.4675@hahepc1.hahe>
	<45B91285.5060907@elvenkind.com>
	<68c491a60701251306h3cfcbff6je938789aff5a9152@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0701252213430.5483@hahepc1.hahe>

On Thu, 25 Jan 2007, Martin Schr?der wrote:

> 2007/1/25, Taco Hoekwater <taco at elvenkind.com>:
> > I don't think there is anything special in ConTeXt. What is going on
> > here anyway? I do not comprehend the dctt comments enough to understand
> > precisely what is (supposedly) missing.
>
> AR7 (only!) shows different colors on page 1 and page 2. It has been
> claimed that our support for transparent pngs needs some additional
> dictionaries etc. on the page.

no idea what should be missing (no idea about Transparency either). From
the PDF Ref. it looks like everything not there is optional. Maybe
Blendmode BM has wrong default in AR7? And it's ok in xpdf and gs (i
don't have acroread here).

Regards, Hartmut

From martin at oneiros.de  Thu Jan 25 22:33:57 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Thu, 25 Jan 2007 22:33:57 +0100
Subject: [NTG-pdftex] [ pdftex-Bugs-723 ] Pale colors when using
	transparency in PNG graphics
In-Reply-To: <Pine.LNX.4.64.0701252213430.5483@hahepc1.hahe>
References: <E1HA82V-0005Jv-00@sarovar.org>
	<Pine.LNX.4.64.0701252008130.4675@hahepc1.hahe>
	<45B91285.5060907@elvenkind.com>
	<68c491a60701251306h3cfcbff6je938789aff5a9152@mail.gmail.com>
	<Pine.LNX.4.64.0701252213430.5483@hahepc1.hahe>
Message-ID: <68c491a60701251333l4cc86cdeuf5ea3019fa447c62@mail.gmail.com>

2007/1/25, Hartmut Henkel <hartmut_henkel at gmx.de>:
> no idea what should be missing (no idea about Transparency either). From
> the PDF Ref. it looks like everything not there is optional. Maybe
> Blendmode BM has wrong default in AR7? And it's ok in xpdf and gs (i
> don't have acroread here).

xpdf, kpdf and gs may be buggy in this area.
But the two other rips I tested are not. And there I see no difference.

Best
   Martin

From pragma at wxs.nl  Thu Jan 25 23:40:50 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 25 Jan 2007 23:40:50 +0100
Subject: [NTG-pdftex] [ pdftex-Bugs-723 ] Pale colors when using
 transparency in PNG graphics
In-Reply-To: <Pine.LNX.4.64.0701252008130.4675@hahepc1.hahe>
References: <E1HA82V-0005Jv-00@sarovar.org>
	<Pine.LNX.4.64.0701252008130.4675@hahepc1.hahe>
Message-ID: <45B931F2.4000205@wxs.nl>

Hartmut Henkel wrote:
> Hi Hans and Taco,
>
> just a question: do you use PNG transparency purely by the PDF object
> machinery provided by pdftex, or do you add (via ConTeXt) other
> dictionaries for transparency definition as well? If the latter, what's
> normally in there?
>   
context maintains its own transparency only for text and mp graphic, not for png etc; features like this can best be handles in the macro package anyway since there is not one solution (context does a lot of optimization, sharing etc there; pretty old code btw and unrelated to graphics; well, i do manipulate graphics (duo/multitone stuff) but not transparencies) 

keep in mind that colors in the viewer may look different starting at the page where the first transparency is encountered; has always been the case in viewers; has to do with some interaction betwene caching, anti aliasing, complex color spaces, etc 

so, if i use transparencies in a document, i always make sure that on the first page i have a fake one in order to trigger the machinery

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From noreply at sarovar.org  Fri Jan 26 07:21:25 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 26 Jan 2007 11:51:25 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-722 ] PDF generation does not support VF
	fonts correctly
Message-ID: <E1HAKSj-0003Iv-00@sarovar.org>

Bugs item #722, was opened at 2007-01-24 08:56
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
Resolution: None
Priority: 5
Submitted By: Achim Blumensath (blume)
Assigned to: Hartmut Henkel (hhenkel)
Summary: PDF generation does not support VF fonts correctly

Initial Comment:
I've a problem with using VF fonts in PDF mode
(using pdftex 1.40.1, pdftex 1.20b does work correctly).
When using glyphs that are composed of several other
glyphs the various parts appear not at their correct
position.

The following example requires the MnSymbol and the
MinionPro packages.

\documentclass{minimal}
\usepackage[T1]{fontenc}
\usepackage[minionint]{MinionPro}
\begin{document}
$$\iint \quad \oint$$
\end{document}

If you create a DVI and use dvips + ps2pdf the output
is as expected (one double integral and one closed
integral). If you use pdflatex to create a PDF file
directly then the output is wrong. The double integral
consists of just one integral sign and the closed
integral consists of a circle followed by an integral
sign.


----------------------------------------------------------------------

>Comment By: Achim Blumensath (blume)
Date: 2007-01-26 06:21

Message:
Logged In: YES 
user_id=4173

I've simplified the test case to plain TeX.
The requested files are attached.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 14:01

Message:
Logged In: YES 
user_id=421

Note that the -recorder cmdline switch also works quite well
with kpathsea. :-)

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-25 08:43

Message:
Logged In: YES 
user_id=710

I tested the file again with the fonts you uploaded, but
still I cannot reproduce the problem.

I attached a small script that creates a list of all files
opened by tex. Usage: unpack, put list-tex-files.vim under
~/vim and run:

sh list-tex-files pdflatex testfile

it will report the filename of the list, which can be used
then to pack everything needed to rerun the job. You may
want to review the list to remove a few files that are not
relevant, for example the format.


----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-25 06:54

Message:
Logged In: YES 
user_id=4173

In order to preproduce the bug you need the CVS version
on MinionPro and perhaps also a recent version of the
lcdf-typetools. The problem seems to be that the font
MnSymbolFI10.vf refers again to a virtual font
MinionPro-It-integral.vf. I've attached the corresponding
VPL files.

(I didn't have the time to create the requested PDF files.
Will do so shortly.)


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-24 18:52

Message:
Logged In: YES 
user_id=710

I compiled the test file and got normal output (see attached
screenshot).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-24 14:56

Message:
Logged In: YES 
user_id=421

Please attach the PDFs generated by ps2pdf and pdflatex,
best generated with \pdfcompresslevel=0. And the log from
pdflatex.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

From noreply at sarovar.org  Fri Jan 26 07:07:02 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 26 Jan 2007 11:37:02 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-723 ] Pale colors when using
	transparency in PNG graphics
Message-ID: <E1HAKEo-0002yp-00@sarovar.org>

Bugs item #723, was opened at 2007-01-25 06:27
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

Category: Image inclusion
Group: v1.40.1
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Mark Henning (markhe)
Assigned to: Martin Schr?der (oneiros)
Summary: Pale colors when using transparency in PNG graphics

Initial Comment:
Hi at all!

I hope this is the right place to report this problem:

If there is any transparency definition in a PNG file 
(e.g. transparency by a certain color or given by a 
mask), then all graphics on the page show pale colors. 
Graphics on pages before or after this page show normal 
colors. This is confirmed in several versions of Adobe 
Acrobat Reader. Ghostview/Ghostscript does not show 
this behaviour. The reason for this viewer-dependency 
might be a missing transparency-definition in the PDF 
file which makes it ambiguous, as reported by Andreas 
Lobinger in de.comp.text.tex; thread "Blasse Farben bei 
transparentem PNG in pdftex".


----------------------------------------------------------------------

>Comment By: Mark Henning (markhe)
Date: 2007-01-26 06:07

Message:
Logged In: YES 
user_id=4174

O.K., there are readers showing the problem and readers not 
showing the prob. There are two possibilities for that:

a) The generated PDF is O.K. and there is a bug in the Adobe 
Reader.

b) The generated PDF is ambiguous (as mentioned by Andres 
Lobinger; I previously told) and it depends on "internal 
defaults" of the reader whether the bug shows up or not.

Finally, the answer can only be found within the generated 
PDF and a comparison with the PDF specs. Unfortunately, I 
have absolutely no idea about the internals of PDF.

In the usenet post <ep7at4$d87$1 at daniel-new.mch.sbs.de> from 
Andreas Lobinger he told how he looked into the PDF (maybe 
this helps):

Basis: http://sourceforge.net/projects/pdfplayground/

Script:
#!/usr/bin/env python
import sys
sys.path.append("/homes/lobingera/Sources/PostPdf/
pdf031205")

import pdftool
import pdfo

x,t,r = pdftool.pfile(sys.argv[1])

print "trailer"
print pdftool.printall(t)

for a in x.allused():
    n1 = pdfo.pdfo(a,x.getgen(a))
    n1.content,n1.stream = pdftool.pxobj(r,x,a)

    print n1.show('toscreen')


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 17:05

Message:
Logged In: YES 
user_id=421

Attached the results of rendering this with two professional
RIPs (Jaws and Harlequin). I don't see it there...

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 15:15

Message:
Logged In: YES 
user_id=421

Ah, now I see it. Inded, AR7.0.9 shows a difference.
The problem also shows with files generated by pdftex 1.40.1

----------------------------------------------------------------------

Comment By: Mark Henning (markhe)
Date: 2007-01-25 15:08

Message:
Logged In: YES 
user_id=4174

Sorry; I forgot to check the checkbox for uploading the 
file.

----------------------------------------------------------------------

Comment By: Mark Henning (markhe)
Date: 2007-01-25 15:06

Message:
Logged In: YES 
user_id=4174

I rechecked with Adobe Acrobat 7.0 and Adobe Acrobat 7.0.9 
on Win2000 SP4, both showed the color differences (see the 
PNG file I uploaded. It shows a direct comparison.). If you 
checked the PDF and say that it is O.K., then there must be 
a bug in Adobe Reader. I will contact Adobe then.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 13:53

Message:
Logged In: YES 
user_id=421

I see no problems with AR 7.0.9, kpdf 0.5.1 and gs 8.54 on
SUSE 10.1.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 13:51

Message:
Logged In: YES 
user_id=421

Pointer to the threat on dctt:
http://groups.google.de/group/de.comp.text.tex/browse_thread/thread/758dcc47273b4e7d/

An example:
http://www.homolog.de/temp/PNGTransparencyBug.zip

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

From noreply at sarovar.org  Fri Jan 26 08:47:54 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 26 Jan 2007 13:17:54 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-722 ] PDF generation does not support VF
	fonts correctly
Message-ID: <E1HALoQ-000777-00@sarovar.org>

Bugs item #722, was opened at 2007-01-24 08:56
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
Resolution: None
Priority: 5
Submitted By: Achim Blumensath (blume)
Assigned to: Hartmut Henkel (hhenkel)
Summary: PDF generation does not support VF fonts correctly

Initial Comment:
I've a problem with using VF fonts in PDF mode
(using pdftex 1.40.1, pdftex 1.20b does work correctly).
When using glyphs that are composed of several other
glyphs the various parts appear not at their correct
position.

The following example requires the MnSymbol and the
MinionPro packages.

\documentclass{minimal}
\usepackage[T1]{fontenc}
\usepackage[minionint]{MinionPro}
\begin{document}
$$\iint \quad \oint$$
\end{document}

If you create a DVI and use dvips + ps2pdf the output
is as expected (one double integral and one closed
integral). If you use pdflatex to create a PDF file
directly then the output is wrong. The double integral
consists of just one integral sign and the closed
integral consists of a circle followed by an integral
sign.


----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-26 07:47

Message:
Logged In: YES 
user_id=710

I still got:

pdfTeX warning: pdftex (file MinionPro-ItDisp.pfb): cannot
open Type 1 font file for reading

I checked out the cvs version of MinionPro and run the
makeall script as described in README-src, but still I
didn't see MinionPro-ItDisp.pfb. 

----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-26 06:21

Message:
Logged In: YES 
user_id=4173

I've simplified the test case to plain TeX.
The requested files are attached.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 14:01

Message:
Logged In: YES 
user_id=421

Note that the -recorder cmdline switch also works quite well
with kpathsea. :-)

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-25 08:43

Message:
Logged In: YES 
user_id=710

I tested the file again with the fonts you uploaded, but
still I cannot reproduce the problem.

I attached a small script that creates a list of all files
opened by tex. Usage: unpack, put list-tex-files.vim under
~/vim and run:

sh list-tex-files pdflatex testfile

it will report the filename of the list, which can be used
then to pack everything needed to rerun the job. You may
want to review the list to remove a few files that are not
relevant, for example the format.


----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-25 06:54

Message:
Logged In: YES 
user_id=4173

In order to preproduce the bug you need the CVS version
on MinionPro and perhaps also a recent version of the
lcdf-typetools. The problem seems to be that the font
MnSymbolFI10.vf refers again to a virtual font
MinionPro-It-integral.vf. I've attached the corresponding
VPL files.

(I didn't have the time to create the requested PDF files.
Will do so shortly.)


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-24 18:52

Message:
Logged In: YES 
user_id=710

I compiled the test file and got normal output (see attached
screenshot).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-24 14:56

Message:
Logged In: YES 
user_id=421

Please attach the PDFs generated by ps2pdf and pdflatex,
best generated with \pdfcompresslevel=0. And the log from
pdflatex.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

From noreply at sarovar.org  Fri Jan 26 09:47:50 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 26 Jan 2007 14:17:50 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-722 ] PDF generation does not support VF
	fonts correctly
Message-ID: <E1HAMkQ-0000in-00@sarovar.org>

Bugs item #722, was opened at 2007-01-24 08:56
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
Resolution: None
Priority: 5
Submitted By: Achim Blumensath (blume)
Assigned to: Hartmut Henkel (hhenkel)
Summary: PDF generation does not support VF fonts correctly

Initial Comment:
I've a problem with using VF fonts in PDF mode
(using pdftex 1.40.1, pdftex 1.20b does work correctly).
When using glyphs that are composed of several other
glyphs the various parts appear not at their correct
position.

The following example requires the MnSymbol and the
MinionPro packages.

\documentclass{minimal}
\usepackage[T1]{fontenc}
\usepackage[minionint]{MinionPro}
\begin{document}
$$\iint \quad \oint$$
\end{document}

If you create a DVI and use dvips + ps2pdf the output
is as expected (one double integral and one closed
integral). If you use pdflatex to create a PDF file
directly then the output is wrong. The double integral
consists of just one integral sign and the closed
integral consists of a circle followed by an integral
sign.


----------------------------------------------------------------------

>Comment By: Achim Blumensath (blume)
Date: 2007-01-26 08:47

Message:
Logged In: YES 
user_id=4173

Sorry, I forgot to mention that I couldn't include
the pfb for copyright reasons. You need the opticals version
of MinionPro to get MinionPro-ItDisp.pfb.

If you don't have the optical fonts the easiest workaround
is to create a PFB with just one glyph named /integral
of width 310 units.


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-26 07:47

Message:
Logged In: YES 
user_id=710

I still got:

pdfTeX warning: pdftex (file MinionPro-ItDisp.pfb): cannot
open Type 1 font file for reading

I checked out the cvs version of MinionPro and run the
makeall script as described in README-src, but still I
didn't see MinionPro-ItDisp.pfb. 

----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-26 06:21

Message:
Logged In: YES 
user_id=4173

I've simplified the test case to plain TeX.
The requested files are attached.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 14:01

Message:
Logged In: YES 
user_id=421

Note that the -recorder cmdline switch also works quite well
with kpathsea. :-)

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-25 08:43

Message:
Logged In: YES 
user_id=710

I tested the file again with the fonts you uploaded, but
still I cannot reproduce the problem.

I attached a small script that creates a list of all files
opened by tex. Usage: unpack, put list-tex-files.vim under
~/vim and run:

sh list-tex-files pdflatex testfile

it will report the filename of the list, which can be used
then to pack everything needed to rerun the job. You may
want to review the list to remove a few files that are not
relevant, for example the format.


----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-25 06:54

Message:
Logged In: YES 
user_id=4173

In order to preproduce the bug you need the CVS version
on MinionPro and perhaps also a recent version of the
lcdf-typetools. The problem seems to be that the font
MnSymbolFI10.vf refers again to a virtual font
MinionPro-It-integral.vf. I've attached the corresponding
VPL files.

(I didn't have the time to create the requested PDF files.
Will do so shortly.)


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-24 18:52

Message:
Logged In: YES 
user_id=710

I compiled the test file and got normal output (see attached
screenshot).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-24 14:56

Message:
Logged In: YES 
user_id=421

Please attach the PDFs generated by ps2pdf and pdflatex,
best generated with \pdfcompresslevel=0. And the log from
pdflatex.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

From noreply at sarovar.org  Fri Jan 26 11:55:23 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 26 Jan 2007 16:25:23 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-722 ] PDF generation does not support VF
	fonts correctly
Message-ID: <E1HAOjr-0005te-00@sarovar.org>

Bugs item #722, was opened at 2007-01-24 08:56
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
Resolution: None
Priority: 5
Submitted By: Achim Blumensath (blume)
Assigned to: Hartmut Henkel (hhenkel)
Summary: PDF generation does not support VF fonts correctly

Initial Comment:
I've a problem with using VF fonts in PDF mode
(using pdftex 1.40.1, pdftex 1.20b does work correctly).
When using glyphs that are composed of several other
glyphs the various parts appear not at their correct
position.

The following example requires the MnSymbol and the
MinionPro packages.

\documentclass{minimal}
\usepackage[T1]{fontenc}
\usepackage[minionint]{MinionPro}
\begin{document}
$$\iint \quad \oint$$
\end{document}

If you create a DVI and use dvips + ps2pdf the output
is as expected (one double integral and one closed
integral). If you use pdflatex to create a PDF file
directly then the output is wrong. The double integral
consists of just one integral sign and the closed
integral consists of a circle followed by an integral
sign.


----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-26 10:55

Message:
Logged In: YES 
user_id=710

indeed this is a bug of pdftex. I found the bug, should be
fixed soon.

----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-26 08:47

Message:
Logged In: YES 
user_id=4173

Sorry, I forgot to mention that I couldn't include
the pfb for copyright reasons. You need the opticals version
of MinionPro to get MinionPro-ItDisp.pfb.

If you don't have the optical fonts the easiest workaround
is to create a PFB with just one glyph named /integral
of width 310 units.


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-26 07:47

Message:
Logged In: YES 
user_id=710

I still got:

pdfTeX warning: pdftex (file MinionPro-ItDisp.pfb): cannot
open Type 1 font file for reading

I checked out the cvs version of MinionPro and run the
makeall script as described in README-src, but still I
didn't see MinionPro-ItDisp.pfb. 

----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-26 06:21

Message:
Logged In: YES 
user_id=4173

I've simplified the test case to plain TeX.
The requested files are attached.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 14:01

Message:
Logged In: YES 
user_id=421

Note that the -recorder cmdline switch also works quite well
with kpathsea. :-)

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-25 08:43

Message:
Logged In: YES 
user_id=710

I tested the file again with the fonts you uploaded, but
still I cannot reproduce the problem.

I attached a small script that creates a list of all files
opened by tex. Usage: unpack, put list-tex-files.vim under
~/vim and run:

sh list-tex-files pdflatex testfile

it will report the filename of the list, which can be used
then to pack everything needed to rerun the job. You may
want to review the list to remove a few files that are not
relevant, for example the format.


----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-25 06:54

Message:
Logged In: YES 
user_id=4173

In order to preproduce the bug you need the CVS version
on MinionPro and perhaps also a recent version of the
lcdf-typetools. The problem seems to be that the font
MnSymbolFI10.vf refers again to a virtual font
MinionPro-It-integral.vf. I've attached the corresponding
VPL files.

(I didn't have the time to create the requested PDF files.
Will do so shortly.)


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-24 18:52

Message:
Logged In: YES 
user_id=710

I compiled the test file and got normal output (see attached
screenshot).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-24 14:56

Message:
Logged In: YES 
user_id=421

Please attach the PDFs generated by ps2pdf and pdflatex,
best generated with \pdfcompresslevel=0. And the log from
pdflatex.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

From noreply at sarovar.org  Fri Jan 26 12:12:11 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 26 Jan 2007 16:42:11 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-723 ] Pale colors when using
	transparency in PNG graphics
Message-ID: <E1HAP07-0006l2-00@sarovar.org>

Bugs item #723, was opened at 2007-01-25 07:27
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

Category: Image inclusion
Group: v1.40.1
>Status: Closed
>Resolution: Works For Me
Priority: 5
Submitted By: Mark Henning (markhe)
Assigned to: Martin Schr?der (oneiros)
Summary: Pale colors when using transparency in PNG graphics

Initial Comment:
Hi at all!

I hope this is the right place to report this problem:

If there is any transparency definition in a PNG file 
(e.g. transparency by a certain color or given by a 
mask), then all graphics on the page show pale colors. 
Graphics on pages before or after this page show normal 
colors. This is confirmed in several versions of Adobe 
Acrobat Reader. Ghostview/Ghostscript does not show 
this behaviour. The reason for this viewer-dependency 
might be a missing transparency-definition in the PDF 
file which makes it ambiguous, as reported by Andreas 
Lobinger in de.comp.text.tex; thread "Blasse Farben bei 
transparentem PNG in pdftex".


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-01-26 12:12

Message:
Logged In: YES 
user_id=421

Since this only shows up in AR and two high-end RIPs don't
have any problems, this seems to be an AR problem.

----------------------------------------------------------------------

Comment By: Mark Henning (markhe)
Date: 2007-01-26 07:07

Message:
Logged In: YES 
user_id=4174

O.K., there are readers showing the problem and readers not 
showing the prob. There are two possibilities for that:

a) The generated PDF is O.K. and there is a bug in the Adobe 
Reader.

b) The generated PDF is ambiguous (as mentioned by Andres 
Lobinger; I previously told) and it depends on "internal 
defaults" of the reader whether the bug shows up or not.

Finally, the answer can only be found within the generated 
PDF and a comparison with the PDF specs. Unfortunately, I 
have absolutely no idea about the internals of PDF.

In the usenet post <ep7at4$d87$1 at daniel-new.mch.sbs.de> from 
Andreas Lobinger he told how he looked into the PDF (maybe 
this helps):

Basis: http://sourceforge.net/projects/pdfplayground/

Script:
#!/usr/bin/env python
import sys
sys.path.append("/homes/lobingera/Sources/PostPdf/
pdf031205")

import pdftool
import pdfo

x,t,r = pdftool.pfile(sys.argv[1])

print "trailer"
print pdftool.printall(t)

for a in x.allused():
    n1 = pdfo.pdfo(a,x.getgen(a))
    n1.content,n1.stream = pdftool.pxobj(r,x,a)

    print n1.show('toscreen')


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 18:05

Message:
Logged In: YES 
user_id=421

Attached the results of rendering this with two professional
RIPs (Jaws and Harlequin). I don't see it there...

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 16:15

Message:
Logged In: YES 
user_id=421

Ah, now I see it. Inded, AR7.0.9 shows a difference.
The problem also shows with files generated by pdftex 1.40.1

----------------------------------------------------------------------

Comment By: Mark Henning (markhe)
Date: 2007-01-25 16:08

Message:
Logged In: YES 
user_id=4174

Sorry; I forgot to check the checkbox for uploading the 
file.

----------------------------------------------------------------------

Comment By: Mark Henning (markhe)
Date: 2007-01-25 16:06

Message:
Logged In: YES 
user_id=4174

I rechecked with Adobe Acrobat 7.0 and Adobe Acrobat 7.0.9 
on Win2000 SP4, both showed the color differences (see the 
PNG file I uploaded. It shows a direct comparison.). If you 
checked the PDF and say that it is O.K., then there must be 
a bug in Adobe Reader. I will contact Adobe then.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 14:53

Message:
Logged In: YES 
user_id=421

I see no problems with AR 7.0.9, kpdf 0.5.1 and gs 8.54 on
SUSE 10.1.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 14:51

Message:
Logged In: YES 
user_id=421

Pointer to the threat on dctt:
http://groups.google.de/group/de.comp.text.tex/browse_thread/thread/758dcc47273b4e7d/

An example:
http://www.homolog.de/temp/PNGTransparencyBug.zip

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=723&group_id=106

From noreply at sarovar.org  Fri Jan 26 12:12:35 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 26 Jan 2007 16:42:35 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-722 ] PDF generation does not support VF
	fonts correctly
Message-ID: <E1HAP0V-0006lf-00@sarovar.org>

Bugs item #722, was opened at 2007-01-24 09:56
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
>Resolution: Accepted
Priority: 5
Submitted By: Achim Blumensath (blume)
>Assigned to: The Thanh Han (hanthethanh)
Summary: PDF generation does not support VF fonts correctly

Initial Comment:
I've a problem with using VF fonts in PDF mode
(using pdftex 1.40.1, pdftex 1.20b does work correctly).
When using glyphs that are composed of several other
glyphs the various parts appear not at their correct
position.

The following example requires the MnSymbol and the
MinionPro packages.

\documentclass{minimal}
\usepackage[T1]{fontenc}
\usepackage[minionint]{MinionPro}
\begin{document}
$$\iint \quad \oint$$
\end{document}

If you create a DVI and use dvips + ps2pdf the output
is as expected (one double integral and one closed
integral). If you use pdflatex to create a PDF file
directly then the output is wrong. The double integral
consists of just one integral sign and the closed
integral consists of a circle followed by an integral
sign.


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-26 11:55

Message:
Logged In: YES 
user_id=710

indeed this is a bug of pdftex. I found the bug, should be
fixed soon.

----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-26 09:47

Message:
Logged In: YES 
user_id=4173

Sorry, I forgot to mention that I couldn't include
the pfb for copyright reasons. You need the opticals version
of MinionPro to get MinionPro-ItDisp.pfb.

If you don't have the optical fonts the easiest workaround
is to create a PFB with just one glyph named /integral
of width 310 units.


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-26 08:47

Message:
Logged In: YES 
user_id=710

I still got:

pdfTeX warning: pdftex (file MinionPro-ItDisp.pfb): cannot
open Type 1 font file for reading

I checked out the cvs version of MinionPro and run the
makeall script as described in README-src, but still I
didn't see MinionPro-ItDisp.pfb. 

----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-26 07:21

Message:
Logged In: YES 
user_id=4173

I've simplified the test case to plain TeX.
The requested files are attached.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 15:01

Message:
Logged In: YES 
user_id=421

Note that the -recorder cmdline switch also works quite well
with kpathsea. :-)

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-25 09:43

Message:
Logged In: YES 
user_id=710

I tested the file again with the fonts you uploaded, but
still I cannot reproduce the problem.

I attached a small script that creates a list of all files
opened by tex. Usage: unpack, put list-tex-files.vim under
~/vim and run:

sh list-tex-files pdflatex testfile

it will report the filename of the list, which can be used
then to pack everything needed to rerun the job. You may
want to review the list to remove a few files that are not
relevant, for example the format.


----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-25 07:54

Message:
Logged In: YES 
user_id=4173

In order to preproduce the bug you need the CVS version
on MinionPro and perhaps also a recent version of the
lcdf-typetools. The problem seems to be that the font
MnSymbolFI10.vf refers again to a virtual font
MinionPro-It-integral.vf. I've attached the corresponding
VPL files.

(I didn't have the time to create the requested PDF files.
Will do so shortly.)


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-24 19:52

Message:
Logged In: YES 
user_id=710

I compiled the test file and got normal output (see attached
screenshot).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-24 15:56

Message:
Logged In: YES 
user_id=421

Please attach the PDFs generated by ps2pdf and pdflatex,
best generated with \pdfcompresslevel=0. And the log from
pdflatex.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

From taco at elvenkind.com  Fri Jan 26 16:39:15 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 26 Jan 2007 16:39:15 +0100
Subject: [NTG-pdftex] potential problem? (z_stream initalization)
Message-ID: <45BA20A3.6030609@elvenkind.com>

Hi,

While debugging luatex, I ran into this warning from valgrind that
seems to affect regular pdftex as well:

==4016== Conditional jump or move depends on uninitialised value(s)
==4016==    at 0x80F851B: longest_match (deflate.c:1143)
==4016==    by 0x80F9848: deflate_slow (deflate.c:1595)
==4016==    by 0x80F8D98: deflate (deflate.c:790)
==4016==    by 0x80DAE88: write_zip (writezip.c:58)
==4016==    by 0x80729A2: pdf_flush (luatex1.c:10926)
==4016==    by 0x80757BD: pdf_end_stream (luatex1.c:11068)
==4016==    by 0x809AA68: zpdf_ship_out (luatex2.c:2057)
==4016==    by 0x809C913: zship_out (luatex2.c:2770)
==4016==    by 0x80A168B: handle_right_brace (luatex3.c:2431)
==4016==    by 0x80A8D28: main_control (luatex3.c:2912)
==4016==    by 0x805A796: main_body (luatexini.c:5910)
==4016==    by 0x80AE866: main (luatexextra.c:378)

(this is from luatex, but I get the same warnings for 1.40.1)

It is a bit of a mystery to me what the right way to set up the
z_stream is, so I thought I'd first ask if somebody else knows.


Best, Taco



From hanthethanh at gmail.com  Fri Jan 26 16:48:22 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Fri, 26 Jan 2007 16:48:22 +0100
Subject: [NTG-pdftex] potential problem? (z_stream initalization)
Message-ID: <74f506dc0701260748n119f0c0avcbe4bfc58d83bcbd@mail.gmail.com>

Hi,

I get those warnings all the time too. No idea how to fix
it, but they seem harmless. I set \pdfcompresslevel=0 to turn
off those warnings :)

Thanh

On Fri, Jan 26, 2007 at 04:39:15PM +0100, Taco Hoekwater wrote:
> Hi,
>
> While debugging luatex, I ran into this warning from valgrind that
> seems to affect regular pdftex as well:
>
> ==4016== Conditional jump or move depends on uninitialised value(s)
> ==4016==    at 0x80F851B: longest_match (deflate.c:1143)
> ==4016==    by 0x80F9848: deflate_slow (deflate.c:1595)
> ==4016==    by 0x80F8D98: deflate (deflate.c:790)
> ==4016==    by 0x80DAE88: write_zip (writezip.c:58)
> ==4016==    by 0x80729A2: pdf_flush (luatex1.c:10926)
> ==4016==    by 0x80757BD: pdf_end_stream (luatex1.c:11068)
> ==4016==    by 0x809AA68: zpdf_ship_out (luatex2.c:2057)
> ==4016==    by 0x809C913: zship_out (luatex2.c:2770)
> ==4016==    by 0x80A168B: handle_right_brace (luatex3.c:2431)
> ==4016==    by 0x80A8D28: main_control (luatex3.c:2912)
> ==4016==    by 0x805A796: main_body (luatexini.c:5910)
> ==4016==    by 0x80AE866: main (luatexextra.c:378)
>
> (this is from luatex, but I get the same warnings for 1.40.1)
>
> It is a bit of a mystery to me what the right way to set up the
> z_stream is, so I thought I'd first ask if somebody else knows.
>
>
> Best, Taco
>
>
> _______________________________________________
> ntg-pdftex mailing list
> ntg-pdftex at ntg.nl
> http://www.ntg.nl/mailman/listinfo/ntg-pdftex

From hanthethanh at gmail.com  Sat Jan 27 12:35:00 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Sat, 27 Jan 2007 12:35:00 +0100
Subject: [NTG-pdftex] subroutines declared as forward must be parameterless
	-- how to deal with this?
Message-ID: <74f506dc0701270335o1a744e5bhaeb4cccc0190e887@mail.gmail.com>

Hi,

the web language requires that subroutines declared as
forward cannot have any parameters. Is there a way to remove
this restriction?

Thanh

From taco at elvenkind.com  Sat Jan 27 13:15:46 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 27 Jan 2007 13:15:46 +0100
Subject: [NTG-pdftex] subroutines declared as forward must be
 parameterless -- how to deal with this?
In-Reply-To: <74f506dc0701270335o1a744e5bhaeb4cccc0190e887@mail.gmail.com>
References: <74f506dc0701270335o1a744e5bhaeb4cccc0190e887@mail.gmail.com>
Message-ID: <45BB4272.9010903@elvenkind.com>

Thanh Han The wrote:
> Hi,
> 
> the web language requires that subroutines declared as
> forward cannot have any parameters. Is there a way to remove
> this restriction?

If you are willing to tie yourself to web2c, then you can use
the @define construct in pdftex.defines instead of using a proper
forward declaration. I just tried that, it works fine.

Otherwise, you will have to change the 'tangle' program, afaik.

Best, Taco

From noreply at sarovar.org  Sun Jan 28 14:57:30 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sun, 28 Jan 2007 19:27:30 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-726 ] in writezip.c replace
	deflateEnd() - deflateInit() by deflateReset()
Message-ID: <E1HBAXC-0006Rj-00@sarovar.org>

Patches item #726, was opened at 2007-01-28 14:57
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=726&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Nobody (None)
Summary: in writezip.c replace deflateEnd() - deflateInit() by deflateReset()

Initial Comment:
This patch removes unnecessary free()/alloc() calls of
zlib internal structures, reduces sys time. As before,
\pdfcompresslevel change is still possible in mid document.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=726&group_id=106

From hanthethanh at gmail.com  Sat Jan 27 13:34:22 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Sat, 27 Jan 2007 13:34:22 +0100
Subject: [NTG-pdftex] subroutines declared as forward must be
	parameterless -- how to deal with this?
Message-ID: <74f506dc0701270434u694585d5w4e1650493b724e8b@mail.gmail.com>

On Sat, Jan 27, 2007 at 01:15:46PM +0100, Taco Hoekwater wrote:
> Thanh Han The wrote:
> >Hi,
> >
> >the web language requires that subroutines declared as
> >forward cannot have any parameters. Is there a way to remove
> >this restriction?
>
> If you are willing to tie yourself to web2c, then you can use
> the @define construct in pdftex.defines instead of using a proper
> forward declaration. I just tried that, it works fine.
>
> Otherwise, you will have to change the 'tangle' program, afaik.

ha, I have also tried to workaround by using a wrapper C
function. Your trick is nicer.

Thanks,
Thanh

From taco at elvenkind.com  Sat Jan 27 14:28:25 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 27 Jan 2007 14:28:25 +0100
Subject: [NTG-pdftex] potential problem? (z_stream initalization)
In-Reply-To: <Pine.LNX.4.64.0701271351310.18839@hahepc1.hahe>
References: <45BA20A3.6030609@elvenkind.com>
	<Pine.LNX.4.64.0701271306150.12699@hahepc1.hahe>
	<Pine.LNX.4.64.0701271351310.18839@hahepc1.hahe>
Message-ID: <45BB5379.2020005@elvenkind.com>

Hartmut Henkel wrote:
> Hi,
> 
> On Sat, 27 Jan 2007, Hartmut Henkel wrote:
> 
> 
>>BTW, i changed writezip.c here so that intermediate deflateInit() calls
>>would be replaced just by deflateReset(); and no intermediate
>>deflateEnd(). Hope was that the then removed memory reallocations would
>>speed it up. It works, but no speed gain.
> 
> 
> actually my 1st try was wrong, it never triggered deflateReset. Now it
> works, and summing over 10 compilations
> 
> $ time pdftex pdftex-all.tex 2>&1 > /dev/null
> 
> with object compression on i get the following time statistics:
> 
>      orig   patch  quotient
> --------------------------.
> real 90.633 90.809 0.998062
> user 89.537 89.589 0.99942
> sys   0.463  0.799 0.579474
> 
> so there isn't any noticable difference in real and user, but the sys
> time goes down to < 60 % by the patch, reproducible. What does this
> actually mean?

sys is the time spent in all system calls combined. Often, that is
just I/O waits, but in this case I'd rather assume it is time spent
in the bowels of malloc().

Taco

From noreply at sarovar.org  Mon Jan 29 11:53:02 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 29 Jan 2007 16:23:02 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-726 ] in writezip.c replace
	deflateEnd() - deflateInit() by deflateReset()
Message-ID: <E1HBU8E-000354-00@sarovar.org>

Patches item #726, was opened at 2007-01-28 14:57
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=726&group_id=106

>Category: Memory allocation
>Group: v1.50.0
Status: Open
>Resolution: Accepted
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
>Assigned to: Martin Schr?der (oneiros)
Summary: in writezip.c replace deflateEnd() - deflateInit() by deflateReset()

Initial Comment:
This patch removes unnecessary free()/alloc() calls of
zlib internal structures, reduces sys time. As before,
\pdfcompresslevel change is still possible in mid document.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=726&group_id=106

From taco at elvenkind.com  Mon Jan 29 12:23:18 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 29 Jan 2007 12:23:18 +0100
Subject: [NTG-pdftex] Another valgrind warning.
Message-ID: <45BDD926.2050703@elvenkind.com>

Hi,

Valgrind said that 'Jump depends on uninitialized value' in this
case as well:

   @ @<Output the cross-reference stream dictionary@>=
   ....
   print_ID(output_file_name);
   pdf_print_nl;
   pdf_begin_stream;
   for k := 0 to sys_obj_ptr do

 From other bits of code, it looks like the initial value of k should
be one, not zero?

Best, Taco

From taco at elvenkind.com  Mon Jan 29 12:38:30 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 29 Jan 2007 12:38:30 +0100
Subject: [NTG-pdftex] Another valgrind warning.
In-Reply-To: <45BDD926.2050703@elvenkind.com>
References: <45BDD926.2050703@elvenkind.com>
Message-ID: <45BDDCB6.6030401@elvenkind.com>



I wrote:
>   ....
>   print_ID(output_file_name);
>   pdf_print_nl;
>   pdf_begin_stream;
>   for k := 0 to sys_obj_ptr do
> 
>  From other bits of code, it looks like the initial value of k should
> be one, not zero?

That was definately not true. At least not always, because I 'fixed' it
and now my pdfs make xpdf and acroread segfault. :-(


Taco

From hartmut_henkel at gmx.de  Sat Jan 27 13:13:44 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sat, 27 Jan 2007 13:13:44 +0100 (CET)
Subject: [NTG-pdftex] potential problem? (z_stream initalization)
In-Reply-To: <45BA20A3.6030609@elvenkind.com>
References: <45BA20A3.6030609@elvenkind.com>
Message-ID: <Pine.LNX.4.64.0701271306150.12699@hahepc1.hahe>

Hi Taco,

On Fri, 26 Jan 2007, Taco Hoekwater wrote:

> While debugging luatex, I ran into this warning from valgrind that
> seems to affect regular pdftex as well:
>
> ==4016== Conditional jump or move depends on uninitialised value(s)
> ==4016==    at 0x80F851B: longest_match (deflate.c:1143)
> ==4016==    by 0x80F9848: deflate_slow (deflate.c:1595)
> ==4016==    by 0x80F8D98: deflate (deflate.c:790)

on the x86_64 linux i currently can't reproduce it, but remember seen it
on i586 (and couldn't find the cause). Which valgrind --tool did you
use?

BTW, i changed writezip.c here so that intermediate deflateInit() calls
would be replaced just by deflateReset(); and no intermediate
deflateEnd(). Hope was that the then removed memory reallocations would
speed it up. It works, but no speed gain.

Regards, Hartmut

From hartmut_henkel at gmx.de  Sat Jan 27 13:57:42 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sat, 27 Jan 2007 13:57:42 +0100 (CET)
Subject: [NTG-pdftex] potential problem? (z_stream initalization)
In-Reply-To: <Pine.LNX.4.64.0701271306150.12699@hahepc1.hahe>
References: <45BA20A3.6030609@elvenkind.com>
	<Pine.LNX.4.64.0701271306150.12699@hahepc1.hahe>
Message-ID: <Pine.LNX.4.64.0701271351310.18839@hahepc1.hahe>

Hi,

On Sat, 27 Jan 2007, Hartmut Henkel wrote:

> BTW, i changed writezip.c here so that intermediate deflateInit() calls
> would be replaced just by deflateReset(); and no intermediate
> deflateEnd(). Hope was that the then removed memory reallocations would
> speed it up. It works, but no speed gain.

actually my 1st try was wrong, it never triggered deflateReset. Now it
works, and summing over 10 compilations

$ time pdftex pdftex-all.tex 2>&1 > /dev/null

with object compression on i get the following time statistics:

     orig   patch  quotient
--------------------------.
real 90.633 90.809 0.998062
user 89.537 89.589 0.99942
sys   0.463  0.799 0.579474

so there isn't any noticable difference in real and user, but the sys
time goes down to < 60 % by the patch, reproducible. What does this
actually mean?

Regards, Hartmut

From hartmut_henkel at gmx.de  Sat Jan 27 13:59:57 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sat, 27 Jan 2007 13:59:57 +0100 (CET)
Subject: [NTG-pdftex] potential problem? (z_stream initalization)
In-Reply-To: <Pine.LNX.4.64.0701271351310.18839@hahepc1.hahe>
References: <45BA20A3.6030609@elvenkind.com>
	<Pine.LNX.4.64.0701271306150.12699@hahepc1.hahe>
	<Pine.LNX.4.64.0701271351310.18839@hahepc1.hahe>
Message-ID: <Pine.LNX.4.64.0701271359040.18839@hahepc1.hahe>

On Sat, 27 Jan 2007, Hartmut Henkel wrote:

> On Sat, 27 Jan 2007, Hartmut Henkel wrote:
>
> > BTW, i changed writezip.c here so that intermediate deflateInit() calls
> > would be replaced just by deflateReset(); and no intermediate
> > deflateEnd(). Hope was that the then removed memory reallocations would
> > speed it up. It works, but no speed gain.
>
> actually my 1st try was wrong, it never triggered deflateReset. Now it
> works, and summing over 10 compilations
>
> $ time pdftex pdftex-all.tex 2>&1 > /dev/null
>
> with object compression on i get the following time statistics:
>
>      orig   patch  quotient

ooops, it's

       patch  orig   quotient

> --------------------------.
> real 90.633 90.809 0.998062
> user 89.537 89.589 0.99942
> sys   0.463  0.799 0.579474
>
> so there isn't any noticable difference in real and user, but the sys
> time goes down to < 60 % by the patch, reproducible. What does this
> actually mean?

sorry, Hartmut

From noreply at sarovar.org  Mon Jan 29 20:46:22 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 30 Jan 2007 01:16:22 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-722 ] PDF generation does not support VF
	fonts correctly
Message-ID: <E1HBcSM-0007jM-00@sarovar.org>

Bugs item #722, was opened at 2007-01-24 08:56
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Achim Blumensath (blume)
Assigned to: The Thanh Han (hanthethanh)
Summary: PDF generation does not support VF fonts correctly

Initial Comment:
I've a problem with using VF fonts in PDF mode
(using pdftex 1.40.1, pdftex 1.20b does work correctly).
When using glyphs that are composed of several other
glyphs the various parts appear not at their correct
position.

The following example requires the MnSymbol and the
MinionPro packages.

\documentclass{minimal}
\usepackage[T1]{fontenc}
\usepackage[minionint]{MinionPro}
\begin{document}
$$\iint \quad \oint$$
\end{document}

If you create a DVI and use dvips + ps2pdf the output
is as expected (one double integral and one closed
integral). If you use pdflatex to create a PDF file
directly then the output is wrong. The double integral
consists of just one integral sign and the closed
integral consists of a circle followed by an integral
sign.


----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-29 19:46

Message:
Logged In: YES 
user_id=710

I made some changes in pdftex. Your test file looks almost
ok now :). Can you please try the patch to see whether it
works for you. Since I don't have exactly the same fonts you
used, it might be helpful if you try the patch with your tex
setup. Thanks.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-26 10:55

Message:
Logged In: YES 
user_id=710

indeed this is a bug of pdftex. I found the bug, should be
fixed soon.

----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-26 08:47

Message:
Logged In: YES 
user_id=4173

Sorry, I forgot to mention that I couldn't include
the pfb for copyright reasons. You need the opticals version
of MinionPro to get MinionPro-ItDisp.pfb.

If you don't have the optical fonts the easiest workaround
is to create a PFB with just one glyph named /integral
of width 310 units.


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-26 07:47

Message:
Logged In: YES 
user_id=710

I still got:

pdfTeX warning: pdftex (file MinionPro-ItDisp.pfb): cannot
open Type 1 font file for reading

I checked out the cvs version of MinionPro and run the
makeall script as described in README-src, but still I
didn't see MinionPro-ItDisp.pfb. 

----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-26 06:21

Message:
Logged In: YES 
user_id=4173

I've simplified the test case to plain TeX.
The requested files are attached.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 14:01

Message:
Logged In: YES 
user_id=421

Note that the -recorder cmdline switch also works quite well
with kpathsea. :-)

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-25 08:43

Message:
Logged In: YES 
user_id=710

I tested the file again with the fonts you uploaded, but
still I cannot reproduce the problem.

I attached a small script that creates a list of all files
opened by tex. Usage: unpack, put list-tex-files.vim under
~/vim and run:

sh list-tex-files pdflatex testfile

it will report the filename of the list, which can be used
then to pack everything needed to rerun the job. You may
want to review the list to remove a few files that are not
relevant, for example the format.


----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-25 06:54

Message:
Logged In: YES 
user_id=4173

In order to preproduce the bug you need the CVS version
on MinionPro and perhaps also a recent version of the
lcdf-typetools. The problem seems to be that the font
MnSymbolFI10.vf refers again to a virtual font
MinionPro-It-integral.vf. I've attached the corresponding
VPL files.

(I didn't have the time to create the requested PDF files.
Will do so shortly.)


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-24 18:52

Message:
Logged In: YES 
user_id=710

I compiled the test file and got normal output (see attached
screenshot).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-24 14:56

Message:
Logged In: YES 
user_id=421

Please attach the PDFs generated by ps2pdf and pdflatex,
best generated with \pdfcompresslevel=0. And the log from
pdflatex.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

From hanthethanh at gmail.com  Wed Jan 31 09:34:54 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Wed, 31 Jan 2007 09:34:54 +0100
Subject: [NTG-pdftex] a wrapper for using pdftex as a library call
Message-ID: <74f506dc0701310034p63bfac67x4d2a9e96c2a2583e@mail.gmail.com>

Hi,

I am working on a wrapper in C so that application can call pdftex
via a library call. Can you please have a look at the proposed API
and comment on it if you find a potential problem? I attached two files:

test0.c: a minimal test file
test1.c: the same file with comments

Thanks,
Thanh
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test0.c
Type: text/x-csrc
Size: 561 bytes
Desc: not available
Url : http://www.ntg.nl/pipermail/ntg-pdftex/attachments/20070131/9cfc4982/attachment.bin 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test1.c
Type: text/x-csrc
Size: 2852 bytes
Desc: not available
Url : http://www.ntg.nl/pipermail/ntg-pdftex/attachments/20070131/9cfc4982/attachment-0001.bin 

From noreply at sarovar.org  Wed Jan 31 09:41:11 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 31 Jan 2007 14:11:11 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-722 ] PDF generation does not support VF
	fonts correctly
Message-ID: <E1HCB1j-0002hN-00@sarovar.org>

Bugs item #722, was opened at 2007-01-24 08:56
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Achim Blumensath (blume)
Assigned to: The Thanh Han (hanthethanh)
Summary: PDF generation does not support VF fonts correctly

Initial Comment:
I've a problem with using VF fonts in PDF mode
(using pdftex 1.40.1, pdftex 1.20b does work correctly).
When using glyphs that are composed of several other
glyphs the various parts appear not at their correct
position.

The following example requires the MnSymbol and the
MinionPro packages.

\documentclass{minimal}
\usepackage[T1]{fontenc}
\usepackage[minionint]{MinionPro}
\begin{document}
$$\iint \quad \oint$$
\end{document}

If you create a DVI and use dvips + ps2pdf the output
is as expected (one double integral and one closed
integral). If you use pdflatex to create a PDF file
directly then the output is wrong. The double integral
consists of just one integral sign and the closed
integral consists of a circle followed by an integral
sign.


----------------------------------------------------------------------

>Comment By: Achim Blumensath (blume)
Date: 2007-01-31 08:41

Message:
Logged In: YES 
user_id=4173

The patch seems to work fine. Thanks.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-29 19:46

Message:
Logged In: YES 
user_id=710

I made some changes in pdftex. Your test file looks almost
ok now :). Can you please try the patch to see whether it
works for you. Since I don't have exactly the same fonts you
used, it might be helpful if you try the patch with your tex
setup. Thanks.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-26 10:55

Message:
Logged In: YES 
user_id=710

indeed this is a bug of pdftex. I found the bug, should be
fixed soon.

----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-26 08:47

Message:
Logged In: YES 
user_id=4173

Sorry, I forgot to mention that I couldn't include
the pfb for copyright reasons. You need the opticals version
of MinionPro to get MinionPro-ItDisp.pfb.

If you don't have the optical fonts the easiest workaround
is to create a PFB with just one glyph named /integral
of width 310 units.


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-26 07:47

Message:
Logged In: YES 
user_id=710

I still got:

pdfTeX warning: pdftex (file MinionPro-ItDisp.pfb): cannot
open Type 1 font file for reading

I checked out the cvs version of MinionPro and run the
makeall script as described in README-src, but still I
didn't see MinionPro-ItDisp.pfb. 

----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-26 06:21

Message:
Logged In: YES 
user_id=4173

I've simplified the test case to plain TeX.
The requested files are attached.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-25 14:01

Message:
Logged In: YES 
user_id=421

Note that the -recorder cmdline switch also works quite well
with kpathsea. :-)

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-25 08:43

Message:
Logged In: YES 
user_id=710

I tested the file again with the fonts you uploaded, but
still I cannot reproduce the problem.

I attached a small script that creates a list of all files
opened by tex. Usage: unpack, put list-tex-files.vim under
~/vim and run:

sh list-tex-files pdflatex testfile

it will report the filename of the list, which can be used
then to pack everything needed to rerun the job. You may
want to review the list to remove a few files that are not
relevant, for example the format.


----------------------------------------------------------------------

Comment By: Achim Blumensath (blume)
Date: 2007-01-25 06:54

Message:
Logged In: YES 
user_id=4173

In order to preproduce the bug you need the CVS version
on MinionPro and perhaps also a recent version of the
lcdf-typetools. The problem seems to be that the font
MnSymbolFI10.vf refers again to a virtual font
MinionPro-It-integral.vf. I've attached the corresponding
VPL files.

(I didn't have the time to create the requested PDF files.
Will do so shortly.)


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-24 18:52

Message:
Logged In: YES 
user_id=710

I compiled the test file and got normal output (see attached
screenshot).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-01-24 14:56

Message:
Logged In: YES 
user_id=421

Please attach the PDFs generated by ps2pdf and pdflatex,
best generated with \pdfcompresslevel=0. And the log from
pdflatex.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=722&group_id=106

From hanthethanh at gmail.com  Wed Jan 31 18:25:02 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Wed, 31 Jan 2007 18:25:02 +0100
Subject: [NTG-pdftex] a wrapper for using pdftex as a library call
In-Reply-To: <74f506dc0701310034p63bfac67x4d2a9e96c2a2583e@mail.gmail.com>
References: <74f506dc0701310034p63bfac67x4d2a9e96c2a2583e@mail.gmail.com>
Message-ID: <74f506dc0701310925g7a0e98afnaece1c663935ef86@mail.gmail.com>

On 1/31/07, Thanh Han The <hanthethanh at gmail.com> wrote:
> Hi,
>
> I am working on a wrapper in C so that application can call pdftex
> via a library call. Can you please have a look at the proposed API
> and comment on it if you find a potential problem? I attached two files:
>
> test0.c: a minimal test file
> test1.c: the same file with comments
>
> Thanks,
> Thanh

the attachments seem to be discarded by the listserv, so I resend the
files as inline text:

test0.c:
==========================
#include "runptex.h"

int main()
{
    pdftex_data_struct tmp;

    if (init_pdftex_data(&tmp,
                         "/home/thanh/runptex/good-file.tex",
                         "/home/thanh/tmp/runptex",
                         "-fmt=pdflatex"
                        ) != 0)
        pds_print_error_and_exit(&tmp);

    if (run_pdftex(&tmp) != 0)
        pds_print_error_and_exit(&tmp);

    printf("running pdftex succeeded, the output is %s in directory %s\n",
            tmp.pdf_file, tmp.working_dir);

    destroy_pdftex_data(&tmp);
    return 0;
}
==========================

test1.c:
==========================
#include "runptex.h"

int main()
{
    pdftex_data_struct tmp;
    /* pdftex_data_struct is defined in runptex.h as follows:
    typedef struct {
        char *tex_file;
        char *pdf_file;
        char *log_file;
        char *working_dir;
        char *pdftex_opts;
        int return_code;
        char *return_msg;
    } pdftex_data_struct;
    */

    if (init_pdftex_data(&tmp,
                         "/home/thanh/runptex/good-file.tex",
                         "/home/thanh/tmp/runptex",
                         "-fmt=pdflatex") != 0)
    /*
    Prototype:
    int init_pdftex_data(pdftex_data_struct *pds, const char *tex_file,
                         const char *working_dir, const char *pdftex_opts);
    Description:
    initialize pds as follows:
    - sets all fields of pds to NULL/0
    - checks that tex_file and working_dir are:
        - not null
        - not too long (< MAX_FILENAME_LENGTH)
        - contains only allowed characters (defined by is_path_char())
        - absolute (full) path
    - checks that tex filename (the last component of tex_file):
        - contains only allowed characters (defined by is_filename_char())
        - has extension '.tex'
    - checks that pdftex_opts contains only allowed characters
(defined by is_option_char())
    - checks that tex_file can be read
    - checks that working_dir is a directory
    - store relevant strings (paths, pdf/log filenames, etc.) in pds

    Return: 0 if ok, otherwise pds->return_code (>0 in case of error)
    */
        pds_print_error_and_exit(&tmp);
    /*
    Prototype:
    void pds_print_error_and_exit(pdftex_data_struct *pds);

    Description:
    a helper function for testing purpose; just print the error
message stored in pds
    and exit the program
    */

    if (run_pdftex(&tmp) != 0)
    /*
    prototype:
    int run_pdftex(pdftex_data_struct *pds);

    description:
    execute pdftex as follows:
    - construct the argument to call pdftex from pds->tex_file and
pds->pdftex_opts
    - change working dir to pds->working_dir
    - try to create an empty pdf file and an empty log file to verify
file permissions
    - copy pds->tex_file to the working directory
    - run system() to excecute the pdftex command constructed above
    - checks whether the log file has been created
    - checks whether the log file contains any error, ie line(s)
beginning with '!'
    - checks whether the pdf file has been created
    - check for the pdf header mark and eof mark
    */
        pds_print_error_and_exit(&tmp);

    printf("running pdftex succeeded, the output is %s in directory %s\n",
            tmp.pdf_file, tmp.working_dir);

    destroy_pdftex_data(&tmp);
    /*
    Prototype:
    void destroy_pdftex_data(pdftex_data_struct *pds);

    Description:
    free the strings stored in pds
    */

    return 0;
}
==========================

From drepper at redhat.com  Wed Jan 31 19:45:56 2007
From: drepper at redhat.com (Ulrich Drepper)
Date: Wed, 31 Jan 2007 10:45:56 -0800
Subject: [NTG-pdftex] [pdftex] a wrapper for using pdftex as a library
	call
In-Reply-To: <74f506dc0701310925g7a0e98afnaece1c663935ef86@mail.gmail.com>
References: <74f506dc0701310034p63bfac67x4d2a9e96c2a2583e@mail.gmail.com>
	<74f506dc0701310925g7a0e98afnaece1c663935ef86@mail.gmail.com>
Message-ID: <45C0E3E4.1000903@redhat.com>

Thanh Han The wrote:
>> I am working on a wrapper in C so that application can call pdftex
>> via a library call. Can you please have a look at the proposed API
>> and comment on it if you find a potential problem?

Trying to do something like this cross-platform is very difficult
because not all systems have the necessary underlying functionatlity to
do it right.

For instance, the init_pdftex_data interface in your proposal has a
working directory parameter as a string.  That's a security problem.
Since it's not guaranteed that there is a reference (open file
descriptor etc) in the directory somebody might change the directory
(rename an existing one) and the TeX run overwrites other files.  Or,
more likely, a part of the path name is changed (symlink attack).

The only way to guarantee that directory the caller intends to use is
indeed used is by passing in a file descriptor.  In the POSIX world this
is no problem.  The file descriptor is inherited through a fork() call
and before the exec() call to pdftex you call fchdir(fd).  He is where
you'll find problems since not all systems can implement this.

I assume your 'run_pdftex' interface is synchronous.  IMO It would be at
least required to have an asynchronous version as well.  I.e., a version
where you initiate the start and then later independently query and if
necessary wait for the result.  The reason is obvious: the program can
do work on its own while TeX is running.  Parallelism is extremely
important going forward.


And an implementation detail: _never_ expose data structures unless it
is really, *REALLY* needed.  I'm talking here about the
pdftex_data_struct, of course.  Direct access to any of its members in
the user code is in no way performance critical.  The initiated TeX runs
are quite expensive in terms of execution time so that any memory
allocation performed is completely negligible.

So I propose to make the structure completely opaque.  I.e., in the
public header only have

  typedef struct pdftex_data_struct pdftex_data_t;

(I renamed the struct as well, _t is often used to indicate type names).

Then change the init_pdftex_data() function to take a pdftex_data_t**
parameter.  The function will itself allocate the memory for the
structure.  If allocation fails the pointer variable pointed to by the
parameter is set to NULL.  Otherwise to the newly allocated memory.
Error handling when returning from init_pdftex_data() has to handle this
case (BTW: why not return an error code and not just success/failure
information from the functions, then you don't have to pass a pointer to
the tmp variable to pds_print_error).

Anyway, if you make this change the information about the struct is
completely encapsulated in your code.  This is important for
maintainability since it gives you the opportunity to change the
implementation as much as you want as long as the function interfaces
remain the same.

About pds_print_error_and_exit: such an interface is usually not useful
except in tiny little programs.  Assume you write a graphical shell for
TeX.  You don't want to terminate the program after a failed run, the
user should be able to fix problems and rerun.  What is needed, though,
is the ability to show an error string.  So, what maybe is needed is to
have a function which returns an error string which can be printed in
the appropriate way (on terminal, in dialog box, whatever).

About the interface naming: C's flat namespace is crowded.  To minimize
the risk of conflicts you should standardize on a common prefix for all
function and type names and stick with it.  E.g.,

  pdftex_data_struct       ->       pdftexlib_data_struct
  init_pdftex_data         ->       pdftexlib_data_init
  pds_print_error_and_exit ->       pdftexlib_error
  run_pdftex               ->       pdftexlib_run

 you get the idea.

-- 
? Ulrich Drepper ? Red Hat, Inc. ? 444 Castro St ? Mountain View, CA ?

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 251 bytes
Desc: OpenPGP digital signature
Url : http://www.ntg.nl/pipermail/ntg-pdftex/attachments/20070131/3ea5fc60/attachment.bin 

