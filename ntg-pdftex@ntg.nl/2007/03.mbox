From noreply at sarovar.org  Thu Mar  1 09:58:21 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 01 Mar 2007 14:28:21 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-721 ] Missing /Font object of PK file
	not found
Message-ID: <E1HMh7F-0000mQ-00@sarovar.org>

Bugs item #721, was opened at 2007-01-23 20:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=721&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
Resolution: Accepted
Priority: 7
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Missing /Font object of PK file not found

Initial Comment:
There are several cases, the buggy one is no. 3. See
test files test1...4.tex in the attached file.

1. No TFM file found in the 1st place. ---> No TeX font
will be started. Ok. See test1.tex.

2. TFM file found, map entry existing, but no PFB font
file in map line ---> "pdfTeX warning: pdftex: font
`CMR' is not a standard font; I suppose it is available
to your PDF viewer then". Ok. See test2.tex.

3. TFM file found, no map entry, and no PK font
available. ---> "pdfTeX warning: pdftex (file
mf-nonexist): Font mf-nonexist at 600 not found". Not
ok. See test3.tex. Here a /Font object is referenced,
which is not existing, rendering the resulting PDF file
buggy. There should be either pdftex_fail() or or at
least a /Font object with a dummy /FontDescriptor
object should be created (the latter filled with
defaults from the TFM file), and the same warning
should be given as in case 4 below, since these cases
are similar: fontfile expected, but not available.

4. TFM file found, map entry with PFB font file
existing, but no PFB font file found. ---> "pdfTeX
warning: pdftex (file t1-nonexist.pfb): cannot open
Type 1 font file for reading". /FontDescriptor without
/FontFile, correct. Ok. See test4.tex.

Regards, Hartmut


----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-01 08:58

Message:
Logged In: YES 
user_id=710

Here is a patch to turn some warnings that can lead to
invalid pdf output to fatal errors.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=721&group_id=106

From noreply at sarovar.org  Thu Mar  1 12:48:53 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 01 Mar 2007 17:18:53 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-721 ] Missing /Font object of PK file
	not found
Message-ID: <E1HMjmH-0001rF-00@sarovar.org>

Bugs item #721, was opened at 2007-01-23 20:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=721&group_id=106

Category: Fonts
Group: v1.40.1
Status: Open
Resolution: Accepted
Priority: 7
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Missing /Font object of PK file not found

Initial Comment:
There are several cases, the buggy one is no. 3. See
test files test1...4.tex in the attached file.

1. No TFM file found in the 1st place. ---> No TeX font
will be started. Ok. See test1.tex.

2. TFM file found, map entry existing, but no PFB font
file in map line ---> "pdfTeX warning: pdftex: font
`CMR' is not a standard font; I suppose it is available
to your PDF viewer then". Ok. See test2.tex.

3. TFM file found, no map entry, and no PK font
available. ---> "pdfTeX warning: pdftex (file
mf-nonexist): Font mf-nonexist at 600 not found". Not
ok. See test3.tex. Here a /Font object is referenced,
which is not existing, rendering the resulting PDF file
buggy. There should be either pdftex_fail() or or at
least a /Font object with a dummy /FontDescriptor
object should be created (the latter filled with
defaults from the TFM file), and the same warning
should be given as in case 4 below, since these cases
are similar: fontfile expected, but not available.

4. TFM file found, map entry with PFB font file
existing, but no PFB font file found. ---> "pdfTeX
warning: pdftex (file t1-nonexist.pfb): cannot open
Type 1 font file for reading". /FontDescriptor without
/FontFile, correct. Ok. See test4.tex.

Regards, Hartmut


----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-01 11:48

Message:
Logged In: YES 
user_id=710

patch updated, a typo was in the previous one.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-01 08:58

Message:
Logged In: YES 
user_id=710

Here is a patch to turn some warnings that can lead to
invalid pdf output to fatal errors.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=721&group_id=106

From noreply at sarovar.org  Thu Mar  1 22:07:23 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 02 Mar 2007 02:37:23 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-712 ] problems with \letterspacefont
Message-ID: <E1HMsUl-0007Hj-00@sarovar.org>

Bugs item #712, was opened at 2006-12-12 02:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

Category: hz
Group: v1.40.0
Status: Closed
Resolution: Fixed
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: problems with \letterspacefont

Initial Comment:
% Testing the new \letterspacefont, I found:
%
% (1) it's certainly not correct to have the spacing 
%     relative to character widths (look at `minimal'!)
% (2) everything's shifted to the right
% (3) when trying to expand the letter-spaced font, I 
%     get the warning `font should be expanded before 
%     its first use' (even before its first use), and 
%     then pdftex segfaults.

\pdfadjustspacing2
\hsize13cm
This is normal text This is normal text 
This is normal text This is normal text 
This is normal text This is normal text
{\letterspacefont\lspfont=\font 1000
%\pdffontexpand\lspfont 20 20 5 autoexpand % segfault
\lspfont
This isn't normal text This isn't normal text
This isn't normal text This is minimal text}
This is normal text This is normal text 
This is normal text
\bye





----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-01 21:07

Message:
Logged In: YES 
user_id=710

here is a patch that makes disabling ligature optional -- a
keyword "nolig" would do that:
\letterspacefont\y=\x 100 nolig

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-02-22 09:31

Message:
Logged In: YES 
user_id=710

yes it sounds reasonable. Or we can extend the syntax of
\letterspacefont so that if an optional keyword like 'nolig'
is found then ligatures will be disabled.

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2007-02-22 02:54

Message:
Logged In: YES 
user_id=2217

The current situation with regards to the lack of kerning of
letterspaced fonts is not really satisfying. After some
consideration, I therefore think it is actually better *not*
to disable ligatures, and hence kerning, for letterspaced fonts.

So I would propose to remove the line:
     set_no_ligatures(k); {disable ligatures for
letter-spaced fonts}

It is easy enough for the high-level interfaces (microtype,
context) to (automatically) disable selected ligatures only,
so that kerning for the rest of the characters is still
available. 

What do you think?

\letterspacefont\lsfont\font 100 \lsfont
\tagcode\lsfont`f -1
VALID off --
\bye


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-02-02 13:54

Message:
Logged In: YES 
user_id=710

the warning message can be removed. I left it there since I
don't know what happens if a virtual font is loaded, used
and then expanded and used again with font expansion. It
should be alright to do so, but I am not very sure. Anyway,
I will change the warning to be issued for non-virtual fonts
only.

It turned to be a design mistake that the  \pdffontexpand
primitive takes a base font and turns it to an expanded
font. It would be better it was more like \letterspacefont,
ie it should create a new font and leave the original font
intact.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2007-02-02 07:30

Message:
Logged In: YES 
user_id=1608

> I hope luatex will abolish with this nonsensical connexion
of ligatures and kerns?

Yes. ligatures and kerns are totally separate in luatex.


----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2007-02-01 19:02

Message:
Logged In: YES 
user_id=2217

If the warning is misleading, should it not be removed?

On a different matter: Since \letterspacefont issues
set_no_ligatures, there won't be any kerning, either.
There's no way around that, I guess?

(I hope luatex will abolish with this nonsensical connexion
of ligatures and kerns?)


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-01-04 15:59

Message:
Logged In: YES 
user_id=710

The warning is misleading but harmless. The reason of the
warning is that pdftex checks whether a font has not been
used before expansion (its type has not been examined and is
new/unknown yet). \letterspacefont sets the type of \y as a
virtual font, thus pdftex thinks the font might have been
used before. 

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2007-01-04 00:40

Message:
Logged In: YES 
user_id=2217

I'm a bit confused about the status of (3): letterspacing
and expansion:
When expanding a letterspaced font, pdftex issues the
warning: ``font should be expanded before its first use'',
but apart from that, I cannot see any problems -- the font
is both letterspaced and expanded. 
Or is there a reason for the warning?

\pdfadjustspacing2
\font\x=cmr10 \x
\letterspacefont\y=\x 100 \y
\pdffontexpand\y 20 20 5 autoexpand
...
\bye


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-21 16:09

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-12 17:47

Message:
Logged In: YES 
user_id=710

oops, I disabled ligature for letter-spaced font, but this
should not affect the base font. Will have to rethink. Most
likely the syntax will change like follows:

\letterspacefont\f=cmr10 at 11pt 100
\f text




----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-12-12 15:50

Message:
Logged In: YES 
user_id=2217

% and here's
% (4) ligatures will be broken up, not only in the 
%     letter-spaced font (which is probably acceptable), 
%     but in all subsequent uses of the base font, too

fi\par
{\letterspacefont\lspfont=\font 100 \lspfont fi}\par
fi

\bye



----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-12 13:31

Message:
Logged In: YES 
user_id=710

I fixed (1) and (2); (3) is disabled now, ie you cannot
expand a letter-spaced font. Please wait for another release
from Martin.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

From noreply at sarovar.org  Fri Mar  2 00:51:19 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 02 Mar 2007 05:21:19 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-741 ] wrong colors for included
	PDF-images
Message-ID: <E1HMv3P-0000Oe-00@sarovar.org>

Bugs item #741, was opened at 2007-03-02 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Uwe St?hr (stoehr)
Assigned to: Nobody (None)
>Summary: wrong colors for included PDF-images

Initial Comment:
Attached is a PDF 1.4 image. When you include this to a
document the output generated by pdfetex 1.30.6 the
images looks different: The colors are much darker, see
attached PDF result.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

From noreply at sarovar.org  Fri Mar  2 00:50:42 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 02 Mar 2007 05:20:42 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-741 ] wrong colors for included PDF-image
Message-ID: <E1HMv2o-0000OM-00@sarovar.org>

Bugs item #741, was opened at 2007-03-02 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Uwe St?hr (stoehr)
Assigned to: Nobody (None)
Summary: wrong colors for included PDF-image

Initial Comment:
Attached is a PDF 1.4 image. When you include this to a
document the output generated by pdfetex 1.30.6 the
images looks different: The colors are much darker, see
attached PDF result.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

From noreply at sarovar.org  Fri Mar  2 01:05:59 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 02 Mar 2007 05:35:59 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-741 ] wrong colors for included
	PDF-images
Message-ID: <E1HMvHb-0000vu-00@sarovar.org>

Bugs item #741, was opened at 2007-03-02 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

>Category: PDF inclusion
>Group: v1.30.0
>Status: Closed
>Resolution: Works For Me
Priority: 5
Submitted By: Uwe St?hr (stoehr)
>Assigned to: Martin Schr?der (oneiros)
Summary: wrong colors for included PDF-images

Initial Comment:
Attached is a PDF 1.4 image. When you include this to a
document the output generated by pdfetex 1.30.6 the
images looks different: The colors are much darker, see
attached PDF result.

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 01:05

Message:
Logged In: YES 
user_id=421

You don't say it, but I see the same problem in AR7 - but
only there. It's a bug in AR; try kpdf or ghostscript instead.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

From noreply at sarovar.org  Fri Mar  2 12:57:08 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 02 Mar 2007 17:27:08 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-741 ] wrong colors for included
	PDF-images
Message-ID: <E1HN6No-0004zM-00@sarovar.org>

Bugs item #741, was opened at 2007-03-02 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

Category: PDF inclusion
Group: v1.30.0
>Status: Open
Resolution: Works For Me
Priority: 5
Submitted By: Uwe St?hr (stoehr)
Assigned to: Martin Schr?der (oneiros)
Summary: wrong colors for included PDF-images

Initial Comment:
Attached is a PDF 1.4 image. When you include this to a
document the output generated by pdfetex 1.30.6 the
images looks different: The colors are much darker, see
attached PDF result.

----------------------------------------------------------------------

>Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 12:57

Message:
Logged In: YES 
user_id=3168

> It's a bug in AR;

No! Acrobat is correct: I created this image with Inkscape
0.45 and exported it the as PDF. I designed e.g. the green
as light green. And Acrobat 7 and 8 shows this exactly as
designed while the pdftex result has wrong color tones, see
the attached screenshots.

(Ghostscript is btw. not able to render the PDF-image
correctly - I reported this to the GS people who confirmed it.)

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 01:05

Message:
Logged In: YES 
user_id=421

You don't say it, but I see the same problem in AR7 - but
only there. It's a bug in AR; try kpdf or ghostscript instead.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

From noreply at sarovar.org  Fri Mar  2 13:05:33 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 02 Mar 2007 17:35:33 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-741 ] wrong colors for included
	PDF-images
Message-ID: <E1HN6Vx-00054r-00@sarovar.org>

Bugs item #741, was opened at 2007-03-02 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

Category: PDF inclusion
Group: v1.30.0
Status: Open
Resolution: Works For Me
Priority: 5
Submitted By: Uwe St?hr (stoehr)
Assigned to: Martin Schr?der (oneiros)
Summary: wrong colors for included PDF-images

Initial Comment:
Attached is a PDF 1.4 image. When you include this to a
document the output generated by pdfetex 1.30.6 the
images looks different: The colors are much darker, see
attached PDF result.

----------------------------------------------------------------------

>Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 13:05

Message:
Logged In: YES 
user_id=3168

> problem in AR7 - but only there.

But how could this be a bug in Acrobat when Adobe set the
standards? Why is this correctly shown before the
pdftex-run. The display is the same here in Acrobat 5 - 8 so
I think they would have fixed it when it's a bug since
Acrobat 5.

Hmm but OK, when I open the result with GSview besides the
GS bug, the color tones are correctly be displayed. So close
this bug report again, when you are sure that pdftex follows
here exactly the PDF-specification.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 12:57

Message:
Logged In: YES 
user_id=3168

> It's a bug in AR;

No! Acrobat is correct: I created this image with Inkscape
0.45 and exported it the as PDF. I designed e.g. the green
as light green. And Acrobat 7 and 8 shows this exactly as
designed while the pdftex result has wrong color tones, see
the attached screenshots.

(Ghostscript is btw. not able to render the PDF-image
correctly - I reported this to the GS people who confirmed it.)

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 01:05

Message:
Logged In: YES 
user_id=421

You don't say it, but I see the same problem in AR7 - but
only there. It's a bug in AR; try kpdf or ghostscript instead.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

From noreply at sarovar.org  Fri Mar  2 13:16:10 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 02 Mar 2007 17:46:10 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-741 ] wrong colors for included
	PDF-images (page groups)
Message-ID: <E1HN6gE-0005Ga-00@sarovar.org>

Bugs item #741, was opened at 2007-03-02 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

Category: PDF inclusion
Group: v1.30.0
Status: Open
>Resolution: Postponed
Priority: 5
Submitted By: Uwe St?hr (stoehr)
Assigned to: Martin Schr?der (oneiros)
>Summary: wrong colors for included PDF-images (page groups)

Initial Comment:
Attached is a PDF 1.4 image. When you include this to a
document the output generated by pdfetex 1.30.6 the
images looks different: The colors are much darker, see
attached PDF result.

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 13:16

Message:
Logged In: YES 
user_id=421

Your document is using Page Groups (see PDF Reference
7.3.6). Including pdfs that use this is a grey area; see the
notes in NEWS and pdftoepdf.cc. It works most of the times
and with most RIPs. I'll look into it again, but I don't
have much hope.

Btw: pdftex warns you:
"PDF inclusion: Page Group detected which pdfTeX can't
handle. Ignoring it."

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 13:05

Message:
Logged In: YES 
user_id=3168

> problem in AR7 - but only there.

But how could this be a bug in Acrobat when Adobe set the
standards? Why is this correctly shown before the
pdftex-run. The display is the same here in Acrobat 5 - 8 so
I think they would have fixed it when it's a bug since
Acrobat 5.

Hmm but OK, when I open the result with GSview besides the
GS bug, the color tones are correctly be displayed. So close
this bug report again, when you are sure that pdftex follows
here exactly the PDF-specification.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 12:57

Message:
Logged In: YES 
user_id=3168

> It's a bug in AR;

No! Acrobat is correct: I created this image with Inkscape
0.45 and exported it the as PDF. I designed e.g. the green
as light green. And Acrobat 7 and 8 shows this exactly as
designed while the pdftex result has wrong color tones, see
the attached screenshots.

(Ghostscript is btw. not able to render the PDF-image
correctly - I reported this to the GS people who confirmed it.)

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 01:05

Message:
Logged In: YES 
user_id=421

You don't say it, but I see the same problem in AR7 - but
only there. It's a bug in AR; try kpdf or ghostscript instead.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

From noreply at sarovar.org  Sat Mar  3 15:48:55 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sat, 03 Mar 2007 20:18:55 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-741 ] wrong colors for included
	PDF-images (page groups)
Message-ID: <E1HNVXb-0008Sz-00@sarovar.org>

Bugs item #741, was opened at 2007-03-02 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

Category: PDF inclusion
Group: v1.30.0
Status: Open
Resolution: Postponed
Priority: 5
Submitted By: Uwe St?hr (stoehr)
Assigned to: Martin Schr?der (oneiros)
Summary: wrong colors for included PDF-images (page groups)

Initial Comment:
Attached is a PDF 1.4 image. When you include this to a
document the output generated by pdfetex 1.30.6 the
images looks different: The colors are much darker, see
attached PDF result.

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-03-03 15:48

Message:
Logged In: YES 
user_id=421

I've attached the results of two professional RIPs: Global
Graphics Jaws & Harlequin. To my eye the Harlequin results
are the same for both file, while Jaws has to different
results. :-{

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 13:16

Message:
Logged In: YES 
user_id=421

Your document is using Page Groups (see PDF Reference
7.3.6). Including pdfs that use this is a grey area; see the
notes in NEWS and pdftoepdf.cc. It works most of the times
and with most RIPs. I'll look into it again, but I don't
have much hope.

Btw: pdftex warns you:
"PDF inclusion: Page Group detected which pdfTeX can't
handle. Ignoring it."

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 13:05

Message:
Logged In: YES 
user_id=3168

> problem in AR7 - but only there.

But how could this be a bug in Acrobat when Adobe set the
standards? Why is this correctly shown before the
pdftex-run. The display is the same here in Acrobat 5 - 8 so
I think they would have fixed it when it's a bug since
Acrobat 5.

Hmm but OK, when I open the result with GSview besides the
GS bug, the color tones are correctly be displayed. So close
this bug report again, when you are sure that pdftex follows
here exactly the PDF-specification.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 12:57

Message:
Logged In: YES 
user_id=3168

> It's a bug in AR;

No! Acrobat is correct: I created this image with Inkscape
0.45 and exported it the as PDF. I designed e.g. the green
as light green. And Acrobat 7 and 8 shows this exactly as
designed while the pdftex result has wrong color tones, see
the attached screenshots.

(Ghostscript is btw. not able to render the PDF-image
correctly - I reported this to the GS people who confirmed it.)

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 01:05

Message:
Logged In: YES 
user_id=421

You don't say it, but I see the same problem in AR7 - but
only there. It's a bug in AR; try kpdf or ghostscript instead.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

From noreply at sarovar.org  Sat Mar  3 19:41:59 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sun, 04 Mar 2007 00:11:59 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-741 ] wrong colors for included
	PDF-images (page groups)
Message-ID: <E1HNZB9-0006fX-00@sarovar.org>

Bugs item #741, was opened at 2007-03-02 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

Category: PDF inclusion
Group: v1.30.0
Status: Open
Resolution: Postponed
Priority: 5
Submitted By: Uwe St?hr (stoehr)
Assigned to: Martin Schr?der (oneiros)
Summary: wrong colors for included PDF-images (page groups)

Initial Comment:
Attached is a PDF 1.4 image. When you include this to a
document the output generated by pdfetex 1.30.6 the
images looks different: The colors are much darker, see
attached PDF result.

----------------------------------------------------------------------

>Comment By: Uwe St?hr (stoehr)
Date: 2007-03-03 19:41

Message:
Logged In: YES 
user_id=3168

> To my eye the Harlequin results are the same for both
> file,

Yes and the result is correct.

> while Jaws has to different results.

In my eyes the Jaws results are identical but wrong.

So it seems that pdftex is not the problem here, but it
would be nice if pdftex could handle page groups in one of
the next releases:
>"PDF inclusion: Page Group detected which pdfTeX can't
> handle. Ignoring it."
So I'm not sure to close this bug or mark it as enhancement.
Thanks for your help.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-03 15:48

Message:
Logged In: YES 
user_id=421

I've attached the results of two professional RIPs: Global
Graphics Jaws & Harlequin. To my eye the Harlequin results
are the same for both file, while Jaws has to different
results. :-{

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 13:16

Message:
Logged In: YES 
user_id=421

Your document is using Page Groups (see PDF Reference
7.3.6). Including pdfs that use this is a grey area; see the
notes in NEWS and pdftoepdf.cc. It works most of the times
and with most RIPs. I'll look into it again, but I don't
have much hope.

Btw: pdftex warns you:
"PDF inclusion: Page Group detected which pdfTeX can't
handle. Ignoring it."

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 13:05

Message:
Logged In: YES 
user_id=3168

> problem in AR7 - but only there.

But how could this be a bug in Acrobat when Adobe set the
standards? Why is this correctly shown before the
pdftex-run. The display is the same here in Acrobat 5 - 8 so
I think they would have fixed it when it's a bug since
Acrobat 5.

Hmm but OK, when I open the result with GSview besides the
GS bug, the color tones are correctly be displayed. So close
this bug report again, when you are sure that pdftex follows
here exactly the PDF-specification.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 12:57

Message:
Logged In: YES 
user_id=3168

> It's a bug in AR;

No! Acrobat is correct: I created this image with Inkscape
0.45 and exported it the as PDF. I designed e.g. the green
as light green. And Acrobat 7 and 8 shows this exactly as
designed while the pdftex result has wrong color tones, see
the attached screenshots.

(Ghostscript is btw. not able to render the PDF-image
correctly - I reported this to the GS people who confirmed it.)

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 01:05

Message:
Logged In: YES 
user_id=421

You don't say it, but I see the same problem in AR7 - but
only there. It's a bug in AR; try kpdf or ghostscript instead.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

From noreply at sarovar.org  Sat Mar  3 19:52:46 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sun, 04 Mar 2007 00:22:46 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-741 ] wrong colors for included
	PDF-images (page groups)
Message-ID: <E1HNZLa-0007Cu-00@sarovar.org>

Bugs item #741, was opened at 2007-03-02 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

Category: PDF inclusion
Group: v1.30.0
>Status: Closed
>Resolution: Wont Fix
Priority: 5
Submitted By: Uwe St?hr (stoehr)
Assigned to: Martin Schr?der (oneiros)
Summary: wrong colors for included PDF-images (page groups)

Initial Comment:
Attached is a PDF 1.4 image. When you include this to a
document the output generated by pdfetex 1.30.6 the
images looks different: The colors are much darker, see
attached PDF result.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-03 19:41

Message:
Logged In: YES 
user_id=3168

> To my eye the Harlequin results are the same for both
> file,

Yes and the result is correct.

> while Jaws has to different results.

In my eyes the Jaws results are identical but wrong.

So it seems that pdftex is not the problem here, but it
would be nice if pdftex could handle page groups in one of
the next releases:
>"PDF inclusion: Page Group detected which pdfTeX can't
> handle. Ignoring it."
So I'm not sure to close this bug or mark it as enhancement.
Thanks for your help.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-03 15:48

Message:
Logged In: YES 
user_id=421

I've attached the results of two professional RIPs: Global
Graphics Jaws & Harlequin. To my eye the Harlequin results
are the same for both file, while Jaws has to different
results. :-{

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 13:16

Message:
Logged In: YES 
user_id=421

Your document is using Page Groups (see PDF Reference
7.3.6). Including pdfs that use this is a grey area; see the
notes in NEWS and pdftoepdf.cc. It works most of the times
and with most RIPs. I'll look into it again, but I don't
have much hope.

Btw: pdftex warns you:
"PDF inclusion: Page Group detected which pdfTeX can't
handle. Ignoring it."

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 13:05

Message:
Logged In: YES 
user_id=3168

> problem in AR7 - but only there.

But how could this be a bug in Acrobat when Adobe set the
standards? Why is this correctly shown before the
pdftex-run. The display is the same here in Acrobat 5 - 8 so
I think they would have fixed it when it's a bug since
Acrobat 5.

Hmm but OK, when I open the result with GSview besides the
GS bug, the color tones are correctly be displayed. So close
this bug report again, when you are sure that pdftex follows
here exactly the PDF-specification.

----------------------------------------------------------------------

Comment By: Uwe St?hr (stoehr)
Date: 2007-03-02 12:57

Message:
Logged In: YES 
user_id=3168

> It's a bug in AR;

No! Acrobat is correct: I created this image with Inkscape
0.45 and exported it the as PDF. I designed e.g. the green
as light green. And Acrobat 7 and 8 shows this exactly as
designed while the pdftex result has wrong color tones, see
the attached screenshots.

(Ghostscript is btw. not able to render the PDF-image
correctly - I reported this to the GS people who confirmed it.)

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-02 01:05

Message:
Logged In: YES 
user_id=421

You don't say it, but I see the same problem in AR7 - but
only there. It's a bug in AR; try kpdf or ghostscript instead.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=741&group_id=106

From noreply at sarovar.org  Sat Mar  3 22:41:18 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sun, 04 Mar 2007 03:11:18 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-742 ] writepng doesn't xfree rows
Message-ID: <E1HNbyg-00013Y-00@sarovar.org>

Bugs item #742, was opened at 2007-03-03 22:41
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=742&group_id=106

Category: Image inclusion
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Martin Schr?der (oneiros)
Summary: writepng doesn't xfree rows

Initial Comment:
after PNG image inclusion the allocated image rows are
still kept in memory, wasting space. The patch file
contains the missing xfree() calls.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=742&group_id=106

From noreply at sarovar.org  Sun Mar  4 00:28:23 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sun, 04 Mar 2007 04:58:23 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-742 ] writepng doesn't xfree rows
Message-ID: <E1HNdeJ-0007tu-00@sarovar.org>

Bugs item #742, was opened at 2007-03-03 22:41
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=742&group_id=106

Category: Image inclusion
Group: v1.40.0
>Status: Deleted
Resolution: None
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Martin Schr?der (oneiros)
Summary: writepng doesn't xfree rows

Initial Comment:
after PNG image inclusion the allocated image rows are
still kept in memory, wasting space. The patch file
contains the missing xfree() calls.

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2007-03-04 00:28

Message:
Logged In: YES 
user_id=929

sorry this was an oversight. No bug. Everything ok, the
xfree(rows[i]) is already in macro write_interlaced(outmac).

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=742&group_id=106

From noreply at sarovar.org  Sun Mar  4 11:27:27 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sun, 04 Mar 2007 15:57:27 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-735 ] patch for simplified horizontal
	positional tracking
Message-ID: <E1HNnw7-0006Ax-00@sarovar.org>

Patches item #735, was opened at 2007-02-19 22:00
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=735&group_id=106

Category: Positioning
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Nobody (None)
Summary: patch for simplified horizontal positional tracking

Initial Comment:
1. simpler calculations for horizontal position update
when inside []TJ arrays, now by pure additions within a
fontsize/10000 raster; no rounding errors can
accumulate. Gives about 7 % pdftex speed gain when
typesetting fiction-type stuff.

2. writet3.c now also with standard /FontMatrix [0.001
0 0 0.001 0 0], tidied up a little (.pgc part
untested). No need anymore (hope it's right) to handle
PK fonts specially by adv_char_width() in pdftex.web.

3. wrong use of printf() at a few places corrected by
Martin.

Work in progess, not safe for production. Needs more
testing, particularly with PK fonts.

Regards, Hartmut


----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2007-03-04 11:27

Message:
Logged In: YES 
user_id=929

the extended patch 70226a needs more work; removed the patch
file.

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2007-02-25 23:51

Message:
Logged In: YES 
user_id=929

The previous patch 735 is now extended to general text and
graphics positioning on the PDF page. pdf_set_origin() (now
pdf_move_to()), pdf_set_textmatrix(), and pdf_begin_string()
are rewritten. In low placement resolution (e. g.
\pdfdecimaldigits=0) now the glyph placement is corrected
within the []TJ array by a leading number, like [7(a)...]TJ,
if required, so that always full TeX precision is kept (very
early pdftex versions might have used this also). Any
accumulation of rounding errors should be avoided now by the
used calculation principle.

Needs lots of testing.

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=735&group_id=106

From noreply at sarovar.org  Tue Mar  6 03:20:21 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 06 Mar 2007 07:50:21 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-743 ] Fake beginning/end of
	line for protrusion
Message-ID: <E1HOPHp-0005um-00@sarovar.org>

Feature Requests item #743, was opened at 2007-03-06 02:20
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=743&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: Nobody (None)
Summary: Fake beginning/end of line for protrusion

Initial Comment:
Although the situation with missing protrusion has
certainly improved, there are still a lot of cases
where characters will not be protruded (e.g. with
indented paragraphs, at the beginning of list items, or
of table cells).
So I think it would be useful to have some commands
that make pdftex believe that it is at the beginning or
end of a line (e.g. \protchar{left,right}). So that you
could for instance say:
 \item\protcharleft ``...
Difficult?


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=743&group_id=106

From noreply at sarovar.org  Tue Mar  6 08:52:56 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 06 Mar 2007 13:22:56 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-743 ] Fake beginning/end of
	line for protrusion
Message-ID: <E1HOUTg-0001wT-00@sarovar.org>

Feature Requests item #743, was opened at 2007-03-06 02:20
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=743&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: Nobody (None)
Summary: Fake beginning/end of line for protrusion

Initial Comment:
Although the situation with missing protrusion has
certainly improved, there are still a lot of cases
where characters will not be protruded (e.g. with
indented paragraphs, at the beginning of list items, or
of table cells).
So I think it would be useful to have some commands
that make pdftex believe that it is at the beginning or
end of a line (e.g. \protchar{left,right}). So that you
could for instance say:
 \item\protcharleft ``...
Difficult?


----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-06 07:52

Message:
Logged In: YES 
user_id=710

yes it makes sense. I am not sure whether \protcharleft
could be implemented as macro: one can fetch the next char,
get the lpcode and do a corresponding kern. However I don't
know how to convert a character to its charcode to fetch the
relevant lpcode. Another problem is that if the next char is
part of a ligature (as in your example), it doesn't work.
Looks like a primitive is needed. Does anyone have a
suggestion how it could be implemented?


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=743&group_id=106

From noreply at sarovar.org  Tue Mar  6 09:00:46 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 06 Mar 2007 13:30:46 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-743 ] Fake beginning/end of
	line for protrusion
Message-ID: <E1HOUbG-0002X0-00@sarovar.org>

Feature Requests item #743, was opened at 2007-03-06 03:20
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=743&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: Nobody (None)
Summary: Fake beginning/end of line for protrusion

Initial Comment:
Although the situation with missing protrusion has
certainly improved, there are still a lot of cases
where characters will not be protruded (e.g. with
indented paragraphs, at the beginning of list items, or
of table cells).
So I think it would be useful to have some commands
that make pdftex believe that it is at the beginning or
end of a line (e.g. \protchar{left,right}). So that you
could for instance say:
 \item\protcharleft ``...
Difficult?


----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2007-03-06 09:00

Message:
Logged In: YES 
user_id=1608

I will be experimenting with Aleph's \localleftbox somewhere
next month, that may be a starting point. But it is 
unlikely that any command based on that will be able to
influence line breaking.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-06 08:52

Message:
Logged In: YES 
user_id=710

yes it makes sense. I am not sure whether \protcharleft
could be implemented as macro: one can fetch the next char,
get the lpcode and do a corresponding kern. However I don't
know how to convert a character to its charcode to fetch the
relevant lpcode. Another problem is that if the next char is
part of a ligature (as in your example), it doesn't work.
Looks like a primitive is needed. Does anyone have a
suggestion how it could be implemented?


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=743&group_id=106

From noreply at sarovar.org  Tue Mar  6 10:32:00 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 06 Mar 2007 15:02:00 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-743 ] Fake beginning/end of
	line for protrusion
Message-ID: <E1HOW1Y-0000EG-00@sarovar.org>

Feature Requests item #743, was opened at 2007-03-06 03:20
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=743&group_id=106

>Category: HZ
>Group: v1.50
Status: Open
>Resolution: Accepted
Priority: 5
Submitted By: Robert (schlcht)
>Assigned to: The Thanh Han (hanthethanh)
Summary: Fake beginning/end of line for protrusion

Initial Comment:
Although the situation with missing protrusion has
certainly improved, there are still a lot of cases
where characters will not be protruded (e.g. with
indented paragraphs, at the beginning of list items, or
of table cells).
So I think it would be useful to have some commands
that make pdftex believe that it is at the beginning or
end of a line (e.g. \protchar{left,right}). So that you
could for instance say:
 \item\protcharleft ``...
Difficult?


----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2007-03-06 09:00

Message:
Logged In: YES 
user_id=1608

I will be experimenting with Aleph's \localleftbox somewhere
next month, that may be a starting point. But it is 
unlikely that any command based on that will be able to
influence line breaking.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-06 08:52

Message:
Logged In: YES 
user_id=710

yes it makes sense. I am not sure whether \protcharleft
could be implemented as macro: one can fetch the next char,
get the lpcode and do a corresponding kern. However I don't
know how to convert a character to its charcode to fetch the
relevant lpcode. Another problem is that if the next char is
part of a ligature (as in your example), it doesn't work.
Looks like a primitive is needed. Does anyone have a
suggestion how it could be implemented?


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=743&group_id=106

From noreply at sarovar.org  Tue Mar  6 18:21:32 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 06 Mar 2007 22:51:32 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-743 ] Fake beginning/end of
	line for protrusion
Message-ID: <E1HOdLw-0005f4-00@sarovar.org>

Feature Requests item #743, was opened at 2007-03-06 02:20
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=743&group_id=106

Category: HZ
Group: v1.50
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: Fake beginning/end of line for protrusion

Initial Comment:
Although the situation with missing protrusion has
certainly improved, there are still a lot of cases
where characters will not be protruded (e.g. with
indented paragraphs, at the beginning of list items, or
of table cells).
So I think it would be useful to have some commands
that make pdftex believe that it is at the beginning or
end of a line (e.g. \protchar{left,right}). So that you
could for instance say:
 \item\protcharleft ``...
Difficult?


----------------------------------------------------------------------

>Comment By: Robert (schlcht)
Date: 2007-03-06 17:21

Message:
Logged In: YES 
user_id=2217

Maybe new (whatsit) nodes that can be caught in
find_protchar_left/right?

microtype is quite good in translating characters into slots
(\MT at get@slot), but not really good enough to always allow
natural input, e.g., ligatures and things like "` (German
babel) won't be recognised.
So my current workaround is:

\def\protcharleft#1{%
  {\everypar{}%
   \setbox0\vbox{\noindent#1}%
   \vbadness=10000
   \splittopskip=0pt
   \global\setbox0=\vsplit0 to \baselineskip
   \unvbox0 \global\setbox0=\lastbox}%
  \ifhbox0
    \leavevmode
    \kern\leftmarginkern0
  \fi
  #1}

But this doesn't always work, e.g. in tabulars. Ligatures
and other stuff still have to be enclosed in braces.


----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2007-03-06 08:00

Message:
Logged In: YES 
user_id=1608

I will be experimenting with Aleph's \localleftbox somewhere
next month, that may be a starting point. But it is 
unlikely that any command based on that will be able to
influence line breaking.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-06 07:52

Message:
Logged In: YES 
user_id=710

yes it makes sense. I am not sure whether \protcharleft
could be implemented as macro: one can fetch the next char,
get the lpcode and do a corresponding kern. However I don't
know how to convert a character to its charcode to fetch the
relevant lpcode. Another problem is that if the next char is
part of a ligature (as in your example), it doesn't work.
Looks like a primitive is needed. Does anyone have a
suggestion how it could be implemented?


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=743&group_id=106

From noreply at sarovar.org  Wed Mar  7 10:52:00 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 07 Mar 2007 15:22:00 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-743 ] Fake beginning/end of
	line for protrusion
Message-ID: <E1HOsoS-0003Zk-00@sarovar.org>

Feature Requests item #743, was opened at 2007-03-06 02:20
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=743&group_id=106

Category: HZ
Group: v1.50
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: Fake beginning/end of line for protrusion

Initial Comment:
Although the situation with missing protrusion has
certainly improved, there are still a lot of cases
where characters will not be protruded (e.g. with
indented paragraphs, at the beginning of list items, or
of table cells).
So I think it would be useful to have some commands
that make pdftex believe that it is at the beginning or
end of a line (e.g. \protchar{left,right}). So that you
could for instance say:
 \item\protcharleft ``...
Difficult?


----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-07 09:52

Message:
Logged In: YES 
user_id=710

yes inserting a whatsit node that would be changed to a kern
seems the easiest way. I will give a try soon.

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2007-03-06 17:21

Message:
Logged In: YES 
user_id=2217

Maybe new (whatsit) nodes that can be caught in
find_protchar_left/right?

microtype is quite good in translating characters into slots
(\MT at get@slot), but not really good enough to always allow
natural input, e.g., ligatures and things like "` (German
babel) won't be recognised.
So my current workaround is:

\def\protcharleft#1{%
  {\everypar{}%
   \setbox0\vbox{\noindent#1}%
   \vbadness=10000
   \splittopskip=0pt
   \global\setbox0=\vsplit0 to \baselineskip
   \unvbox0 \global\setbox0=\lastbox}%
  \ifhbox0
    \leavevmode
    \kern\leftmarginkern0
  \fi
  #1}

But this doesn't always work, e.g. in tabulars. Ligatures
and other stuff still have to be enclosed in braces.


----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2007-03-06 08:00

Message:
Logged In: YES 
user_id=1608

I will be experimenting with Aleph's \localleftbox somewhere
next month, that may be a starting point. But it is 
unlikely that any command based on that will be able to
influence line breaking.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-06 07:52

Message:
Logged In: YES 
user_id=710

yes it makes sense. I am not sure whether \protcharleft
could be implemented as macro: one can fetch the next char,
get the lpcode and do a corresponding kern. However I don't
know how to convert a character to its charcode to fetch the
relevant lpcode. Another problem is that if the next char is
part of a ligature (as in your example), it doesn't work.
Looks like a primitive is needed. Does anyone have a
suggestion how it could be implemented?


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=743&group_id=106

From noreply at sarovar.org  Wed Mar  7 17:41:05 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 07 Mar 2007 22:11:05 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-746 ] Patch PromptFileName
Message-ID: <E1HOzCL-0004kM-00@sarovar.org>

Patches item #746, was opened at 2007-03-07 17:41
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=746&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Heiko Oberdiek (oberdiek)
Assigned to: Nobody (None)
Summary: Patch PromptFileName

Initial Comment:
Subject: Patch PromptFileName
Date: 2007/03/07
Author: Heiko Oberdiek

The patches are based on pdfTeX 1.40.3

There is some discussion in the tex-live list:
  List:    tex-live at tug.org
  Date:    March 2007
  Subject: Bug in TexLive 2005 and 2007? Non-writable
           aux-file
If TeX asks for a file name, what action should be
taken, if the user doesn't provide a file name?

The current behaviour has changed from Web2C 7.5.2
to 7.5.6 and is quite impredictible:
* Append some default extension if file extension
  is not given.
* Use previous file name part, if this part is empty.

Sometimes this behaves as "retry action" by chance,
sometimes a source file gets overwritten.

Two patches are provided that implement alternative
actions:
* Retry.diff
  If the user doesn't specify a file name, then
  the whole previous file name is used including
  the area and extension parts.
* Abort.diff
  If the user doesn't specify a file name, then
  the job is aborted. Unhappily Ctrl-C (or Ctrl-D)
  have only a retarded effect after the file name
  is used again (and eventually causing harm).
  This is a clean way to end the job even if there
  isn't a valid file name to provide.

Both files patches web2c/texk/tex.ch. Of course they
cannot be used at the same time.

And both patches also show the default name extension,
when the user is prompted for a file name.

Have fun,
  Heiko <oberdiek at uni-freiburg.de>


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=746&group_id=106

From noreply at sarovar.org  Fri Mar  9 04:09:10 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 09 Mar 2007 08:39:10 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-747 ] \letterspacefont and
	\pdffontexpand, again
Message-ID: <E1HPVTi-0004px-00@sarovar.org>

Bugs item #747, was opened at 2007-03-09 03:09
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=747&group_id=106

Category: hz
Group: v1.40.1
Status: Open
Resolution: None
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: \letterspacefont and \pdffontexpand, again

Initial Comment:
When expanding a letterspaced font, the base font will
be expanded, too, resulting in the error `font has been
expanded with different parameters' when the base font
is expanded again:

\letterspacefont\lsfont\font 100
\pdffontexpand\lsfont 20 20 5 autoexpand
\pdffontexpand\font   20 20 5 autoexpand
Z\bye


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=747&group_id=106

From noreply at sarovar.org  Fri Mar  9 18:28:39 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 09 Mar 2007 22:58:39 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-747 ] \letterspacefont and
	\pdffontexpand, again
Message-ID: <E1HPitT-0003GF-00@sarovar.org>

Bugs item #747, was opened at 2007-03-09 03:09
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=747&group_id=106

Category: hz
Group: v1.40.1
Status: Open
Resolution: None
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: \letterspacefont and \pdffontexpand, again

Initial Comment:
When expanding a letterspaced font, the base font will
be expanded, too, resulting in the error `font has been
expanded with different parameters' when the base font
is expanded again:

\letterspacefont\lsfont\font 100
\pdffontexpand\lsfont 20 20 5 autoexpand
\pdffontexpand\font   20 20 5 autoexpand
Z\bye


----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-09 17:28

Message:
Logged In: YES 
user_id=710

sigh. A mistake when implementing the \pdffontexpand
primitive: it should load a new font for expansion, instead
of expanding a loaded font. Too late for change now?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=747&group_id=106

From noreply at sarovar.org  Sat Mar 10 20:22:02 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sun, 11 Mar 2007 00:52:02 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-747 ] \letterspacefont and
	\pdffontexpand, again
Message-ID: <E1HQ78k-0001mM-00@sarovar.org>

Bugs item #747, was opened at 2007-03-09 04:09
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=747&group_id=106

Category: hz
Group: v1.40.1
Status: Open
>Resolution: Accepted
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: \letterspacefont and \pdffontexpand, again

Initial Comment:
When expanding a letterspaced font, the base font will
be expanded, too, resulting in the error `font has been
expanded with different parameters' when the base font
is expanded again:

\letterspacefont\lsfont\font 100
\pdffontexpand\lsfont 20 20 5 autoexpand
\pdffontexpand\font   20 20 5 autoexpand
Z\bye


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-03-10 20:22

Message:
Logged In: YES 
user_id=421

No. It's an undocumented primitive. ;-)

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-09 18:28

Message:
Logged In: YES 
user_id=710

sigh. A mistake when implementing the \pdffontexpand
primitive: it should load a new font for expansion, instead
of expanding a loaded font. Too late for change now?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=747&group_id=106

From noreply at sarovar.org  Sat Mar 10 20:24:51 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sun, 11 Mar 2007 00:54:51 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-747 ] \letterspacefont and
	\pdffontexpand, again
Message-ID: <E1HQ7BT-0002d2-00@sarovar.org>

Bugs item #747, was opened at 2007-03-09 04:09
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=747&group_id=106

Category: hz
Group: v1.40.1
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: \letterspacefont and \pdffontexpand, again

Initial Comment:
When expanding a letterspaced font, the base font will
be expanded, too, resulting in the error `font has been
expanded with different parameters' when the base font
is expanded again:

\letterspacefont\lsfont\font 100
\pdffontexpand\lsfont 20 20 5 autoexpand
\pdffontexpand\font   20 20 5 autoexpand
Z\bye


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-03-10 20:24

Message:
Logged In: YES 
user_id=421

Forget that comment. Of course a change of \pdffontexpand
has to be considered carefully. By you. :-)

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-10 20:22

Message:
Logged In: YES 
user_id=421

No. It's an undocumented primitive. ;-)

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-09 18:28

Message:
Logged In: YES 
user_id=710

sigh. A mistake when implementing the \pdffontexpand
primitive: it should load a new font for expansion, instead
of expanding a loaded font. Too late for change now?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=747&group_id=106

From noreply at sarovar.org  Sat Mar 10 21:18:55 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sun, 11 Mar 2007 01:48:55 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-747 ] \letterspacefont and
	\pdffontexpand, again
Message-ID: <E1HQ81n-0006Rd-00@sarovar.org>

Bugs item #747, was opened at 2007-03-09 03:09
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=747&group_id=106

Category: hz
Group: v1.40.1
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: \letterspacefont and \pdffontexpand, again

Initial Comment:
When expanding a letterspaced font, the base font will
be expanded, too, resulting in the error `font has been
expanded with different parameters' when the base font
is expanded again:

\letterspacefont\lsfont\font 100
\pdffontexpand\lsfont 20 20 5 autoexpand
\pdffontexpand\font   20 20 5 autoexpand
Z\bye


----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-10 20:18

Message:
Logged In: YES 
user_id=710

Phil Taylor has a suggestion that seems great to me:
introduce a new primitive \pdfexpandfont instead. How do you
see it?

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-10 19:24

Message:
Logged In: YES 
user_id=421

Forget that comment. Of course a change of \pdffontexpand
has to be considered carefully. By you. :-)

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-10 19:22

Message:
Logged In: YES 
user_id=421

No. It's an undocumented primitive. ;-)

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-09 17:28

Message:
Logged In: YES 
user_id=710

sigh. A mistake when implementing the \pdffontexpand
primitive: it should load a new font for expansion, instead
of expanding a loaded font. Too late for change now?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=747&group_id=106

From noreply at sarovar.org  Sat Mar 10 23:57:29 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sun, 11 Mar 2007 04:27:29 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-746 ] Patch PromptFileName
Message-ID: <E1HQAVF-0001i2-00@sarovar.org>

Patches item #746, was opened at 2007-03-07 17:41
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=746&group_id=106

>Category: User interaction
>Group: v1.40.0
Status: Open
>Resolution: Postponed
Priority: 5
Submitted By: Heiko Oberdiek (oberdiek)
>Assigned to: Martin Schr?der (oneiros)
Summary: Patch PromptFileName

Initial Comment:
Subject: Patch PromptFileName
Date: 2007/03/07
Author: Heiko Oberdiek

The patches are based on pdfTeX 1.40.3

There is some discussion in the tex-live list:
  List:    tex-live at tug.org
  Date:    March 2007
  Subject: Bug in TexLive 2005 and 2007? Non-writable
           aux-file
If TeX asks for a file name, what action should be
taken, if the user doesn't provide a file name?

The current behaviour has changed from Web2C 7.5.2
to 7.5.6 and is quite impredictible:
* Append some default extension if file extension
  is not given.
* Use previous file name part, if this part is empty.

Sometimes this behaves as "retry action" by chance,
sometimes a source file gets overwritten.

Two patches are provided that implement alternative
actions:
* Retry.diff
  If the user doesn't specify a file name, then
  the whole previous file name is used including
  the area and extension parts.
* Abort.diff
  If the user doesn't specify a file name, then
  the job is aborted. Unhappily Ctrl-C (or Ctrl-D)
  have only a retarded effect after the file name
  is used again (and eventually causing harm).
  This is a clean way to end the job even if there
  isn't a valid file name to provide.

Both files patches web2c/texk/tex.ch. Of course they
cannot be used at the same time.

And both patches also show the default name extension,
when the user is prompted for a file name.

Have fun,
  Heiko <oberdiek at uni-freiburg.de>


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2007-03-10 23:57

Message:
Logged In: YES 
user_id=421

Both patches are interesting, but we should wait for further
discussion on tex-implementors etc.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=746&group_id=106

From noreply at sarovar.org  Mon Mar 19 12:07:34 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 19 Mar 2007 16:37:34 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-747 ] \letterspacefont and
	\pdffontexpand, again
Message-ID: <E1HTFiA-0008UB-00@sarovar.org>

Bugs item #747, was opened at 2007-03-09 08:39
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=747&group_id=106

Category: hz
Group: v1.40.1
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: \letterspacefont and \pdffontexpand, again

Initial Comment:
When expanding a letterspaced font, the base font will
be expanded, too, resulting in the error `font has been
expanded with different parameters' when the base font
is expanded again:

\letterspacefont\lsfont\font 100
\pdffontexpand\lsfont 20 20 5 autoexpand
\pdffontexpand\font   20 20 5 autoexpand
Z\bye


----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2007-03-19 16:37

Message:
Logged In: NO 

Hello,

I do not think that \pdfexpandfont is a good name for a new 
primitive, as it is too easy to confuse with \pdffontexpand. 
What about \pdfexpandnewfont, as -- if I understand 
correctly -- a new font is loaded?


Jonathan

P.S: Thank you for creating pdfTeX!

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-11 01:48

Message:
Logged In: YES 
user_id=710

Phil Taylor has a suggestion that seems great to me:
introduce a new primitive \pdfexpandfont instead. How do you
see it?

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-11 00:54

Message:
Logged In: YES 
user_id=421

Forget that comment. Of course a change of \pdffontexpand
has to be considered carefully. By you. :-)

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-11 00:52

Message:
Logged In: YES 
user_id=421

No. It's an undocumented primitive. ;-)

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-09 22:58

Message:
Logged In: YES 
user_id=710

sigh. A mistake when implementing the \pdffontexpand
primitive: it should load a new font for expansion, instead
of expanding a loaded font. Too late for change now?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=747&group_id=106

From javier at digi21.net  Thu Mar 22 16:54:56 2007
From: javier at digi21.net (=?ISO-8859-1?Q?Javier_M=FAgica_de_Rivera?=)
Date: Thu, 22 Mar 2007 16:54:56 +0100
Subject: [NTG-pdftex] \expandaftern and other
Message-ID: <4602A6D0.8030100@digi21.net>

An HTML attachment was scrubbed...
URL: http://www.ntg.nl/pipermail/ntg-pdftex/attachments/20070322/73f0ec1d/attachment.html 

From javier at digi21.net  Thu Mar 29 21:52:15 2007
From: javier at digi21.net (=?ISO-8859-1?Q?Javier_M=FAgica_de_Rivera?=)
Date: Thu, 29 Mar 2007 21:52:15 +0200
Subject: [NTG-pdftex] Which is the right way of sending messages to this
	list?
Message-ID: <460C18EF.5060006@digi21.net>

I have reviewed the march archive of messages and my message was 
obviously sent in a different way. I simply send the message to ntg-pdf 
at ntg.nl. How should one proceed in order that my message apear as 
(say) a feature request?

Thanks,
Javier


From taco at elvenkind.com  Fri Mar 30 16:09:31 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 30 Mar 2007 16:09:31 +0200
Subject: [NTG-pdftex] [tex-live] Debian TeX -- new packages
In-Reply-To: <E1HWw39-0004Qo-00@skye.ra.phy.cam.ac.uk>
References: <E1HWw39-0004Qo-00@skye.ra.phy.cam.ac.uk>
Message-ID: <460D1A1B.3020500@elvenkind.com>


Hi,

 From a discussion on TeX-Live with regard to the debian texlive packages
for texlive and the complications raised by libpoppler:

Sanjoy Mahajan wrote:
> [What I describe below is not a Debian problem, but the proposed
> change would make the packages easier for Ubuntu users to use.  
> 
> I added dev-context to the CC: list since the pkg deps affect Ubuntu
> users -- e.g. me -- who use your excellent ConTeXt packages.]
> 
> I'm using Ubuntu 6.10 (edgy) with all your tug.org stanzas.  An
> "apt-get install texlive-base-bin" or "apt-get install context" fails
> when going from the TL2005 packages to the 2007 ones.  The blocking
> package is texlive-base-bin:
> 
> # apt-get install texlive-base-bin
> texlive-base-bin:
> Depends: libpng12-0 (>= 1.2.13-4) but 1.2.8rel-5.1ubuntu0.1 is to be installed
> Depends: libpoppler0c2 (>= 0.4.2) but it is not installable
> E: Broken packages
> 
> I'll upgrade to the Ubuntu 7.04 beta, which will solve the libpng12-0
> problem because Ubuntu 7.04 uses libpng 1.2.15.  But libpoppler0c2
> would still be missing.  Here are the libpoppler pkgs in versions of

If I understand that thread correctly, the use of poppler instead
of xpdf is now really a requirement on both debian and ubuntu?

And you cannot share the binary packages between the various linuxes
because there are packaging differences that cannot be resolved,
at all?

And that there are different versions of (dynamic) libpoppler that
are mutually exclusive, even at compile-time?

But at the same time, static binaries with xpdf linked in are not
usable or 'not done' for some reason?

If this is a sign of things to come, I may have to reconsider
switching to MacOSX or freebsd.

Taco



From pragma at wxs.nl  Fri Mar 30 16:20:51 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 30 Mar 2007 16:20:51 +0200
Subject: [NTG-pdftex] [tex-live] Debian TeX -- new packages
In-Reply-To: <460D1A1B.3020500@elvenkind.com>
References: <E1HWw39-0004Qo-00@skye.ra.phy.cam.ac.uk>
	<460D1A1B.3020500@elvenkind.com>
Message-ID: <460D1CC3.9010307@wxs.nl>

Taco Hoekwater wrote:
>
> If this is a sign of things to come, I may have to reconsider
> switching to MacOSX or freebsd.
>   
thanks for the warning; very disturbing indeed 

even if the default linux linking is against poopler, users should have the freedom to use for instance xpdf as fallback or alternative 

Hans 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From frank at debian.org  Fri Mar 30 17:40:14 2007
From: frank at debian.org (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Fri, 30 Mar 2007 17:40:14 +0200
Subject: [NTG-pdftex] [tex-live] Debian TeX -- new packages
In-Reply-To: <460D1A1B.3020500@elvenkind.com> (Taco Hoekwater's message of
	"Fri\, 30 Mar 2007 16\:09\:31 +0200")
References: <E1HWw39-0004Qo-00@skye.ra.phy.cam.ac.uk>
	<460D1A1B.3020500@elvenkind.com>
Message-ID: <874po268pt.fsf@riesling.zuerich.kuesterei.ch>

Taco Hoekwater <taco at elvenkind.com> wrote:

> If I understand that thread correctly, the use of poppler instead
> of xpdf is now really a requirement on both debian and ubuntu?

Err, no.  The precompiled binary packages use libpoppler.  That doesn't
mean you can't compile your own pdftex, or even download the Debian
sources, disable the poppler patch and build your own Debian package.
And, in particular, it doesn't say anything about the TeXLive images on
tug.org/CTAN:  They do not use poppler.

> And you cannot share the binary packages between the various linuxes
> because there are packaging differences that cannot be resolved,
> at all?

This is true (for the debs), but it's a very usual thing on a Linux
system, that's why we have distinct releases (and much less of a DLL
hell as some other OSses are said to have).

> And that there are different versions of (dynamic) libpoppler that
> are mutually exclusive, even at compile-time?

Yes, and even that is very common - that's what usually is indicated by
a soname change of a library.  We (Debian/Ubuntu) have made the switch
to poppler very early in its development, and this means that we're
likely to face a couple of soname changes.  Maybe later the API will
become more stable.

> But at the same time, static binaries with xpdf linked in are not
> usable or 'not done' for some reason?

They are of course perfectly usable, and they are available in the
tug.org/CTAN images.  We just don't provide any as debs, because our
security team isn't able to handle all the instances of xpdf code in
multiple versions which are embedded in o-so-many project's source.

> If this is a sign of things to come, I may have to reconsider
> switching to MacOSX or freebsd.

There is nothing special to poppler about this situation.  The same is
also true, and has been true for ages, with libpng, libjpeg, libstdc++
etc., against which pdftex is linked, as soon as it is dynamically
linked.  

There's also nothing special to pdftex about it, it's the same for any
other program that links dynamically.  And I think it is common that
Linux distributions link dynamically, and there are good reasons for
it.  These reasons are probably stronger for programs you just use in
bypassing, and much less strong for those where you are involved in
development. 

If you don't like it, you're free to just not use the distribution's
TeXLive packages, but install it from the images on tug.org/CTAN.  You
can do that for any OS

Regards, Frank
-- 
Dr. Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From taco at elvenkind.com  Fri Mar 30 17:47:37 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 30 Mar 2007 17:47:37 +0200
Subject: [NTG-pdftex] [tex-live] buf-size
In-Reply-To: <86648ieozl.fsf@lola.quinscape.zz>
References: <460D2419.4030504@wxs.nl> <86648ieozl.fsf@lola.quinscape.zz>
Message-ID: <460D3119.6030105@elvenkind.com>



David Kastrup wrote:

> line-based IIRC, but setting aside 10MB for the input line buffer is
> just absurd.  Actually, setting aside 300k is ridiculous already.

Who talks about setting aside? Hans' proposal is about alleviating
an artificial limit to the (supposedly dynamic) texmf.cnf setting
for input_buffer. That limit really serves no purpose that I know of.

Why should it matter how large Hans (or anyone else) wants the
buffer to be, if the limit is artificial anyway?

> We should reduce this to something like 4k or so and change the code
> to cater with incomplete lines, or this madness will go on with ever
> bigger sizes and discussions.

I agree, but I have no time to write such code. Changing a constant
value is much faster. If you write a change file, I expect it will
be incorporated asap.

Best wishes,

Taco


From pragma at wxs.nl  Fri Mar 30 18:03:54 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 30 Mar 2007 18:03:54 +0200
Subject: [NTG-pdftex] [tex-live] buf-size
In-Reply-To: <86r6r6d8mk.fsf@lola.quinscape.zz>
References: <460D2419.4030504@wxs.nl> <86648ieozl.fsf@lola.quinscape.zz>
	<460D3119.6030105@elvenkind.com> <86r6r6d8mk.fsf@lola.quinscape.zz>
Message-ID: <460D34EA.5030006@wxs.nl>

David Kastrup wrote:
>
> Change file, or would be a patch to luatex.web (respective to the
> latest SVN version) be ok?  In other words: if I do the code, will
>   
change file for pdftex .. since that's now one source; from there it 
will find its way into luatex (as all other patches to pdftex do)

Hans

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From taco at elvenkind.com  Fri Mar 30 18:03:32 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 30 Mar 2007 18:03:32 +0200
Subject: [NTG-pdftex] [tex-live] Debian TeX -- new packages
In-Reply-To: <874po268pt.fsf@riesling.zuerich.kuesterei.ch>
References: <E1HWw39-0004Qo-00@skye.ra.phy.cam.ac.uk>	<460D1A1B.3020500@elvenkind.com>
	<874po268pt.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <460D34D4.1000203@elvenkind.com>


Hi Frank,

Frank K?ster wrote:
> 
> Yes, and even that is very common - that's what usually is indicated by
> a soname change of a library.  We (Debian/Ubuntu) have made the switch
> to poppler very early in its development, and this means that we're
> likely to face a couple of soname changes.  Maybe later the API will
> become more stable.

As far as I know, it is not at all common that a program that uses a 
certain library in the repository is then redistributed using a
different library altogether, with one version of that library
available in one distro and another, incompatible version on another
distibution. The connection with the main source is almost gone. And
that is what has me worried.

If everybody links with poppler, poppler should be in the repository,
not xpdf.

Regards, Taco


From taco at elvenkind.com  Fri Mar 30 18:07:36 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 30 Mar 2007 18:07:36 +0200
Subject: [NTG-pdftex] [tex-live] buf-size
In-Reply-To: <86r6r6d8mk.fsf@lola.quinscape.zz>
References: <460D2419.4030504@wxs.nl>
	<86648ieozl.fsf@lola.quinscape.zz>	<460D3119.6030105@elvenkind.com>
	<86r6r6d8mk.fsf@lola.quinscape.zz>
Message-ID: <460D35C8.3030508@elvenkind.com>



David Kastrup wrote:
> 
> Change file, or would be a patch to luatex.web (respective to the
> latest SVN version) be ok?  In other words: if I do the code, will
> someone else volunteer for turning this into some change file form or
> other that would make it propagate elsewhere (stable PDFTeX? I suppose
> it would be somewhat pointless to get it incorporated into eTeX, since
> eTeX does no longer seem to make it into binaries on its own, but
> exists mostly just as a changeset).

Personally, I believe it is better to base yourself on pdftex. I have
a system set up where migrating stuff from pdftex to luatex is easy
for me. When it works, I will port to luatex, no problem. Be warned
though, the input buffer is not used *only* for file reading.

Good luck,

Taco

From pragma at wxs.nl  Fri Mar 30 16:52:09 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 30 Mar 2007 16:52:09 +0200
Subject: [NTG-pdftex] buf-size
Message-ID: <460D2419.4030504@wxs.nl>

Hi,

It seems that the buffer size of pdftex is maximized to 300K while in 
practice much larger files show up (at least here); for instance xml 
files can be 1 meg one-liners.

Is it possible to set the max to (say) 10.000.000? (tex.web)

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From sanjoy at mrao.cam.ac.uk  Fri Mar 30 16:55:37 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Fri, 30 Mar 2007 15:55:37 +0100
Subject: [NTG-pdftex] [tex-live] Debian TeX -- new packages
In-Reply-To: Your message of "Fri, 30 Mar 2007 16:09:31 +0200."
	<460D1A1B.3020500@elvenkind.com> 
Message-ID: <E1HXIVt-0000dm-00@skye.ra.phy.cam.ac.uk>

Probably everyone on ntg-pdftex also reads tex-live.  However, for
completeness, here is the relevant piece of the msg that I just sent
to ntg-context and the tex-live list:

  [Using Ubuntu 6.10/i386]

  I couldn't apply (without rejected hunks) the Ubuntu poppler patch at
  <http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=356079> to the
  Debian texlive-2007-1 source.  So I just removed
  debian/patches/30_libpoppler from the patch series, returning to using
  the xpdf sources that ship with pdftex.  Then the texlive-2007 src pkg
  compiled into the many .deb's and these binary pkgs installed fine.
  They use libpng-1.2.8 and libc6-2.4.

> If I understand that thread correctly, the use of poppler instead
> of xpdf is now really a requirement on both debian and ubuntu?

Right, both use libpoppler.  

> But at the same time, static binaries with xpdf linked in are not
> usable or 'not done' for some reason?

I think the reason is that xpdf and libpoppler frequently fix buffer
overflows.  By linking against a shared library (libpoppler) instead
of against the xpdf sources, only the shared library needs to be
updated, and there's no need to install new texlive binary packages.

I'm not sure how much I agree with this argument.  It does have
downsides.

> And you cannot share the binary packages between the various linuxes
> because there are packaging differences that cannot be resolved, at
> all?

Right.  Library version skew.  There are two libraries causing
problems: libpng and libpoppler.

* libpng: Norbert's texlive2007 packages are for Debian unstable and
  they require a libpng >= 1.2.13.  Ubuntu won't be sufficiently
  updated until feisty (7.04, i.e. next month), and all older releases
  of Ubuntu use 1.2.8.  That's not a problem in general because you
  could download the source package and recompile, but...

* libpoppler.  Debian and Ubuntu have decided to use libpoppler as a
  shared library instead of the xpdf sources included in the texlive
  tree already.  Norbert's packages require libpoppler0c2 (which is
  libpoppler 0.4.5).  Ubuntu hasn't used libpoppler0c2 for over a
  year, and they use libpoppler1, which is 0.5.x where x=1 for Dapper
  (6.04) and 4 for Edgy (6.10) and Feisty (7.04).

  So, rebuilding the source package on my system (Ubuntu 6.10) fails
  because my system has the libpoppler1 development library (API),
  which differs from libpoppler0c2 in Unicode string handling.

  One solution is to patch the texlive2007 tree to correctly use
  libpoppler1.  But I don't know how to do that.  Ubuntu has a patch
  but it is for doing the same for tetex-3.0, and I couldn't figure
  out how to get it to apply to texlive2007 (too many rejected hunks
  got me worried).

  So I just removed the use of libpoppler, instead using the xpdf
  in-tree sources, and it compiled fine.  That's a one-line patch to
  the source tree (the debian patch series part of it).

With those changes, I can use Norbert's latest and greatest context
packages.  But I know what I'm doing, relatively speaking.  Most users
on Ubuntu will be stuck until Ubuntu feisty+1 (till October 2007),
because texlive2007 is too late to go into feisty (April 2007) and I
don't think I should recommend these hacks on the context wiki (in the
Ubuntu instructions).  So almost all Ubuntu users will have to upgrade
context by hand -- not good for them or for getting a wide testing
base for context.

One of the issues that would hold up texlive2007 in Ubuntu is that
Debian didn't transition to the newer libpoppler
<http://lists.debian.org/debian-tex-maint/2006/10/msg00026.html>
because of the pain it would cause.  So Ubuntu, which picks up Debian
unstable and does some stuff to it, is divergent from Debian on this
point (Ubuntu has used the newer libpoppler for a while), which was
fine for texlive2005 I guess, but not for texlive2007.  Which means
that Ubuntu would have to do more work to get texlive2007 working --
for which there is no time before the release.

> And that there are different versions of (dynamic) libpoppler that
> are mutually exclusive, even at compile-time?

They are not exclusive at run time, only at compile time.  One
approach I tried was to install a libpoppler0c2 from an old Ubuntu
release, so now I have libpoppler.0 and libpoppler.1 on my system.
Then the texlive-2007 binary pkgs could install except that it
requires libpng >=1.2.13.  Hence the need to recompile from the source
pkg in order to compile against my libpng (1.2.8).  

But the compile fails because of the libpoppler1 headers on my system.
And I cannot install an old libpoppler0 set of development headers,
because those would overwrite the newer libpoppler1 development
headers.  I suppose I could install them, compile the src pkg, then
reinstall the libpoppler1 development headers.  But that's a terrible
hack (plus I didn't think of it until now).

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From karl at freefriends.org  Sat Mar 31 00:01:06 2007
From: karl at freefriends.org (Karl Berry)
Date: Fri, 30 Mar 2007 17:01:06 -0500
Subject: [NTG-pdftex] [tex-live] buf-size
In-Reply-To: <460D2419.4030504@wxs.nl>
Message-ID: <200703302201.l2UM16O19751@f7.net>

    Is it possible to set the max to (say) 10.000.000? (tex.web)

Actually the sup_ and inf_ stuff is part of tex.ch rather than
tex.web (or the new pdftex.web), as far as I can tell.

For regular old tex, ie, TL's Build/source/texk/web2c/tex.ch, I tacked
on a couple of zeros to sup_buf_size:
@!sup_buf_size = 30000000;

Martin, can you make the analogous change for pdftex please?
(Assuming you have no objection.)

Jonathan, if buf_size is still relevant in xetex-land, you may as well
do it too?

Last year I recall that we discussed increasing all those sup_* values
to their maximum allowed (no reason not to), but no one (including me,
sigh) ever actually did it.  Would anyone like to prepare a patch for
that?

Thanks,
Karl

From kakuto at fsci.fuk.kindai.ac.jp  Sat Mar 31 02:25:10 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Sat, 31 Mar 2007 09:25:10 +0900
Subject: [NTG-pdftex] [tex-live] buf-size
In-Reply-To: Your message of "Fri, 30 Mar 2007 17:01:06 -0500"
References: <200703302201.l2UM16O19751@f7.net>
Message-ID: <200703310025.l2V0PBph006796@jupiter.fsci.fuk.kindai.ac.jp>

Hi Karl,

> For regular old tex, ie, TL's Build/source/texk/web2c/tex.ch, I tacked
> on a couple of zeros to sup_buf_size:
> @!sup_buf_size = 30000000;
> 
> Martin, can you make the analogous change for pdftex please?
> (Assuming you have no objection.)
> 
> Jonathan, if buf_size is still relevant in xetex-land, you may as well
> do it too?

Your change may automatically be reflected to pdftex and xetex.
luatex has its own large value:
@!sup_buf_size = 100000000;

But you have to change com16bit-rc2.ch for aleph and
com16bit.ch for omega.

Best regards,
Akira

From reinhard.kotucha at web.de  Sat Mar 31 03:52:09 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 31 Mar 2007 03:52:09 +0200
Subject: [NTG-pdftex] [tex-live] buf-size
In-Reply-To: <200703302201.l2UM16O19751@f7.net>
References: <460D2419.4030504@wxs.nl>
	<200703302201.l2UM16O19751@f7.net>
Message-ID: <17933.48841.653638.738117@zarniwoop.ms25.local>

>>>>> "Karl" == Karl Berry <karl at freefriends.org> writes:

  > Last year I recall that we discussed increasing all those sup_*
  > values to their maximum allowed (no reason not to), but no one
  > (including me, sigh) ever actually did it.  Would anyone like to
  > prepare a patch for that?

I fear that I'm the culprit.  Someone asked for increasing the size of
a certain buffer.  I proposed to increase this buffer to the maximum
allowed value instead of just to double it.  The idea was that if the
buffer is as large as possible there will be no reason to touch the
code later again.

I did not say that all buffers should be increased immediately.  What
I proposed is that when someone asks for increasing a buffer it should
be increased to the maximum allowed value instead of by a small amount.
The sole reason is to prevent developers to be bothered by such
requests again and again.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From dak at gnu.org  Fri Mar 30 17:21:34 2007
From: dak at gnu.org (David Kastrup)
Date: Fri, 30 Mar 2007 17:21:34 +0200
Subject: [NTG-pdftex] [tex-live] buf-size
In-Reply-To: <460D2419.4030504@wxs.nl> (Hans Hagen's message of "Fri\,
	30 Mar 2007 16\:52\:09 +0200")
References: <460D2419.4030504@wxs.nl>
Message-ID: <86648ieozl.fsf@lola.quinscape.zz>

Hans Hagen <pragma at wxs.nl> writes:

> It seems that the buffer size of pdftex is maximized to 300K while in
> practice much larger files show up (at least here); for instance xml
> files can be 1 meg one-liners.
>
> Is it possible to set the max to (say) 10.000.000? (tex.web)

I think that is crazy.  It would make much more sense not to require
the input buffer to actually contain beginning and end of line at the
same time, but rather take it as a buffer into the input line.  It may
require some web2c support to do this since Pascal is pretty much
line-based IIRC, but setting aside 10MB for the input line buffer is
just absurd.  Actually, setting aside 300k is ridiculous already.

We should reduce this to something like 4k or so and change the code
to cater with incomplete lines, or this madness will go on with ever
bigger sizes and discussions.

Perhaps one should bring up this issue on the TeX-implementors list?

-- 
David Kastrup

From dak at gnu.org  Fri Mar 30 18:00:19 2007
From: dak at gnu.org (David Kastrup)
Date: Fri, 30 Mar 2007 18:00:19 +0200
Subject: [NTG-pdftex] [tex-live] buf-size
In-Reply-To: <460D3119.6030105@elvenkind.com> (Taco Hoekwater's message of
	"Fri\, 30 Mar 2007 17\:47\:37 +0200")
References: <460D2419.4030504@wxs.nl> <86648ieozl.fsf@lola.quinscape.zz>
	<460D3119.6030105@elvenkind.com>
Message-ID: <86r6r6d8mk.fsf@lola.quinscape.zz>

Taco Hoekwater <taco at elvenkind.com> writes:

> David Kastrup wrote:
>
>> line-based IIRC, but setting aside 10MB for the input line buffer is
>> just absurd.  Actually, setting aside 300k is ridiculous already.
>
> Who talks about setting aside? Hans' proposal is about alleviating
> an artificial limit to the (supposedly dynamic) texmf.cnf setting
> for input_buffer. That limit really serves no purpose that I know of.
>
> Why should it matter how large Hans (or anyone else) wants the
> buffer to be, if the limit is artificial anyway?
>
>> We should reduce this to something like 4k or so and change the code
>> to cater with incomplete lines, or this madness will go on with ever
>> bigger sizes and discussions.
>
> I agree, but I have no time to write such code. Changing a constant
> value is much faster. If you write a change file, I expect it will
> be incorporated asap.

Change file, or would be a patch to luatex.web (respective to the
latest SVN version) be ok?  In other words: if I do the code, will
someone else volunteer for turning this into some change file form or
other that would make it propagate elsewhere (stable PDFTeX? I suppose
it would be somewhat pointless to get it incorporated into eTeX, since
eTeX does no longer seem to make it into binaries on its own, but
exists mostly just as a changeset).

Or even submit it to Don, since he is supposed to deal with the next
batch of bug reports at the end of this year?  Hey, I can dream.

-- 
David Kastrup

From dak at gnu.org  Fri Mar 30 20:14:52 2007
From: dak at gnu.org (David Kastrup)
Date: Fri, 30 Mar 2007 20:14:52 +0200
Subject: [NTG-pdftex] [tex-live] buf-size
In-Reply-To: <460D35C8.3030508@elvenkind.com> (Taco Hoekwater's message of
	"Fri\, 30 Mar 2007 18\:07\:36 +0200")
References: <460D2419.4030504@wxs.nl> <86648ieozl.fsf@lola.quinscape.zz>
	<460D3119.6030105@elvenkind.com> <86r6r6d8mk.fsf@lola.quinscape.zz>
	<460D35C8.3030508@elvenkind.com>
Message-ID: <85odmar42r.fsf@lola.goethe.zz>

Taco Hoekwater <taco at elvenkind.com> writes:

> David Kastrup wrote:
>>
>> Change file, or would be a patch to luatex.web (respective to the
>> latest SVN version) be ok?  In other words: if I do the code, will
>> someone else volunteer for turning this into some change file form
>> or other that would make it propagate elsewhere (stable PDFTeX? I
>> suppose it would be somewhat pointless to get it incorporated into
>> eTeX, since eTeX does no longer seem to make it into binaries on
>> its own, but exists mostly just as a changeset).
>
> Personally, I believe it is better to base yourself on pdftex.

Sigh.  Yet another source to check out.

> I have a system set up where migrating stuff from pdftex to luatex
> is easy for me. When it works, I will port to luatex, no problem. Be
> warned though, the input buffer is not used *only* for file reading.

Yes, thanks.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From noreply at sarovar.org  Sat Mar 31 11:52:40 2007
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sat, 31 Mar 2007 15:22:40 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-747 ] \letterspacefont and
	\pdffontexpand, again
Message-ID: <E1HXaGG-0002a7-00@sarovar.org>

Bugs item #747, was opened at 2007-03-09 03:09
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=747&group_id=106

Category: hz
Group: v1.40.1
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: \letterspacefont and \pdffontexpand, again

Initial Comment:
When expanding a letterspaced font, the base font will
be expanded, too, resulting in the error `font has been
expanded with different parameters' when the base font
is expanded again:

\letterspacefont\lsfont\font 100
\pdffontexpand\lsfont 20 20 5 autoexpand
\pdffontexpand\font   20 20 5 autoexpand
Z\bye


----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-31 09:52

Message:
Logged In: YES 
user_id=710

either name is ok with me. We need a new pritimive to load a
new font and expand it, since the current one doesn't load a
new font and hence is making trouble. I would wait for a
while to see how Robert sees it before making any change.

----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2007-03-19 11:07

Message:
Logged In: NO 

Hello,

I do not think that \pdfexpandfont is a good name for a new 
primitive, as it is too easy to confuse with \pdffontexpand. 
What about \pdfexpandnewfont, as -- if I understand 
correctly -- a new font is loaded?


Jonathan

P.S: Thank you for creating pdfTeX!

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-10 20:18

Message:
Logged In: YES 
user_id=710

Phil Taylor has a suggestion that seems great to me:
introduce a new primitive \pdfexpandfont instead. How do you
see it?

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-10 19:24

Message:
Logged In: YES 
user_id=421

Forget that comment. Of course a change of \pdffontexpand
has to be considered carefully. By you. :-)

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2007-03-10 19:22

Message:
Logged In: YES 
user_id=421

No. It's an undocumented primitive. ;-)

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2007-03-09 17:28

Message:
Logged In: YES 
user_id=710

sigh. A mistake when implementing the \pdffontexpand
primitive: it should load a new font for expansion, instead
of expanding a loaded font. Too late for change now?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=747&group_id=106

From martin at oneiros.de  Sat Mar 31 13:04:51 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sat, 31 Mar 2007 13:04:51 +0200
Subject: [NTG-pdftex] [tex-live] buf-size
In-Reply-To: <200703302201.l2UM16O19751@f7.net>
References: <460D2419.4030504@wxs.nl> <200703302201.l2UM16O19751@f7.net>
Message-ID: <68c491a60703310404x73eef9a7t57a96a26be15836@mail.gmail.com>

2007/3/31, Karl Berry <karl at freefriends.org>:
> For regular old tex, ie, TL's Build/source/texk/web2c/tex.ch, I tacked
> on a couple of zeros to sup_buf_size:
> @!sup_buf_size = 30000000;
>
> Martin, can you make the analogous change for pdftex please?
> (Assuming you have no objection.)

We still use _that_ file (for web2c), so we get the change automatically. :-)

Best
   Martin

From gnwiii at gmail.com  Sat Mar 31 15:30:58 2007
From: gnwiii at gmail.com (George N. White III)
Date: Sat, 31 Mar 2007 10:30:58 -0300
Subject: [NTG-pdftex] [tex-live] Debian TeX -- new packages
In-Reply-To: <460D34D4.1000203@elvenkind.com>
References: <E1HWw39-0004Qo-00@skye.ra.phy.cam.ac.uk>
	<460D1A1B.3020500@elvenkind.com>
	<874po268pt.fsf@riesling.zuerich.kuesterei.ch>
	<460D34D4.1000203@elvenkind.com>
Message-ID: <22af238a0703310630x5f6c2e78jdca356bde889d06b@mail.gmail.com>

On 3/30/07, Taco Hoekwater <taco at elvenkind.com> wrote:

> Frank K?ster wrote:
> >
> > Yes, and even that is very common - that's what usually is indicated by
> > a soname change of a library.  We (Debian/Ubuntu) have made the switch
> > to poppler very early in its development, and this means that we're
> > likely to face a couple of soname changes.  Maybe later the API will
> > become more stable.
>
> As far as I know, it is not at all common that a program that uses a
> certain library in the repository is then redistributed using a
> different library altogether, with one version of that library
> available in one distro and another, incompatible version on another
> distibution. The connection with the main source is almost gone. And
> that is what has me worried.
>
> If everybody links with poppler, poppler should be in the repository,
> not xpdf.

Poppler need not be in the reposity, but it should be detected and
enabled, or available as a build option.

Such changes take time.  We are likely to see simiilar issues for xetex and the
font libraries (especially if there are big changes in the way math
fonts are handled).
It takes time for new libraries to be ported to legacy platforms.
Some new libraries
may end up being discarded when some fundamental design flaw is
discovered or something better comes along.

Many packages already have configure options to select different
libraries -- xdvi can be built against 4 different X-toolkits (Xaw,
Motif 1.2, Motif 2.x, LessTif).  The repository needs to support
transitional situations by providing multiple libraries and supporting
builds with either.  It is messy, but necessary if you are going to
support legacy systems without stopping innovation and security
improvements.

-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From frank at debian.org  Sat Mar 31 22:28:46 2007
From: frank at debian.org (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Sat, 31 Mar 2007 22:28:46 +0200
Subject: [NTG-pdftex] [tex-live] Debian TeX -- new packages
In-Reply-To: <460D34D4.1000203@elvenkind.com> (Taco Hoekwater's message of
	"Fri\, 30 Mar 2007 18\:03\:32 +0200")
References: <E1HWw39-0004Qo-00@skye.ra.phy.cam.ac.uk>
	<460D1A1B.3020500@elvenkind.com>
	<874po268pt.fsf@riesling.zuerich.kuesterei.ch>
	<460D34D4.1000203@elvenkind.com>
Message-ID: <877isxma2p.fsf@riesling.zuerich.kuesterei.ch>

Taco Hoekwater <taco at elvenkind.com> wrote:

> If everybody links with poppler, poppler should be in the repository,
> not xpdf.

I have half-finished autoconf magic to make the switch to poppler
configurable.  If you volunteer  to finish it, I can send it to you.

Regards, Frank
-- 
Dr. Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

