From pdftex-supportrequests at sarovar.org  Mon Nov  2 04:03:13 2009
From: pdftex-supportrequests at sarovar.org (pdftex-supportrequests at sarovar.org)
Date: Mon, 02 Nov 2009 08:33:13 +0530
Subject: [NTG-pdftex] =?utf-8?q?=5Bpdftex-Support_Requests=5D=5B4297=5D_co?=
	=?utf-8?q?nflicting_types_for_=27getline=27?=
Message-ID: <E1N4nCL-00033A-T7@sarovar.org>

Support Requests item #4297, was opened at 2009-10-31 11:50
Status: Open
Priority: 3
Submitted By: Bob Tennent (rdtennent)
Assigned to: Nobody (None)
Summary: conflicting types for 'getline' 
Category: Install Problem (example)
Group: None
Resolution: None


Initial Comment:
Building pdftex on a Fedora 11 system using build.sh fails:

gcc -DHAVE_CONFIG_H  -I. -I../../../src/texk/web2c -I.. -I../../../src/texk/web2c/..  -I../../libs/obsdcompat -I../../libs/obsdcompat/.. -I../../../src/texk/web2c/../../libs/obsdcompat -I../../../src/texk/web2c/../../libs/obsdcompat/.. -I../../../src/texk/web2c/../../libs/zlib -g -O2  -c tangleboot.c -o tangleboot.o
In file included from tangleboot.c:94:
tangleboot.h:34: error: conflicting types for 'getline'
/usr/include/stdio.h:653: note: previous declaration of 'getline' was here
tangleboot.c:2175: error: conflicting types for 'getline'
/usr/include/stdio.h:653: note: previous declaration of 'getline' was here


I've built pdftex often on other systems without running into this. What's wrong?

----------------------------------------------------------------------

Comment By: Bob Tennent (rdtennent)
Date: 2009-11-01 22:03

Message:
This is the response at the Fedora bugzilla:

getline is a standard POSIX 2008 function, and glibc headers by default offer
POSIX 2008 namespace.  See
info libc 'Feature Test Macros'
for details.  You should just either fix pdftex to use a different name, not
reserved by POSIX 2008, or use a namespace macro that doesn't provide POSIX
2008 stuff.  

https://bugzilla.redhat.com/show_bug.cgi?id=532230

----------------------------------------------------------------------

Comment By: Bob Tennent (rdtennent)
Date: 2009-10-31 12:50

Message:
According to some reports on the web, the problem is in glibc-2.10.1.  Apparently the non-standard definition of getline there should be "protected".  Indeed, if I comment out that definition in /usr/include/stdio.h, pdftex builds normally.  I'm willing to file a bug report in the Fedora bugzilla but I need some help:  what exactly is the "protection" needed?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=494&aid=4297&group_id=106

From pdftex-supportrequests at sarovar.org  Mon Nov  2 08:13:04 2009
From: pdftex-supportrequests at sarovar.org (pdftex-supportrequests at sarovar.org)
Date: Mon, 02 Nov 2009 12:43:04 +0530
Subject: [NTG-pdftex] =?utf-8?q?=5Bpdftex-Support_Requests=5D=5B4297=5D_co?=
	=?utf-8?q?nflicting_types_for_=27getline=27?=
Message-ID: <E1N4r68-0004Km-Og@sarovar.org>

Support Requests item #4297, was opened at 2009-10-31 16:50
Status: Open
Priority: 3
Submitted By: Bob Tennent (rdtennent)
Assigned to: Nobody (None)
Summary: conflicting types for 'getline' 
Category: Install Problem (example)
Group: None
Resolution: None


Initial Comment:
Building pdftex on a Fedora 11 system using build.sh fails:

gcc -DHAVE_CONFIG_H  -I. -I../../../src/texk/web2c -I.. -I../../../src/texk/web2c/..  -I../../libs/obsdcompat -I../../libs/obsdcompat/.. -I../../../src/texk/web2c/../../libs/obsdcompat -I../../../src/texk/web2c/../../libs/obsdcompat/.. -I../../../src/texk/web2c/../../libs/zlib -g -O2  -c tangleboot.c -o tangleboot.o
In file included from tangleboot.c:94:
tangleboot.h:34: error: conflicting types for 'getline'
/usr/include/stdio.h:653: note: previous declaration of 'getline' was here
tangleboot.c:2175: error: conflicting types for 'getline'
/usr/include/stdio.h:653: note: previous declaration of 'getline' was here


I've built pdftex often on other systems without running into this. What's wrong?

----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2009-11-02 08:13

Message:
FWIW: there is a fix for this problem in texlive 2009.

----------------------------------------------------------------------

Comment By: Bob Tennent (rdtennent)
Date: 2009-11-02 04:03

Message:
This is the response at the Fedora bugzilla:

getline is a standard POSIX 2008 function, and glibc headers by default offer
POSIX 2008 namespace.  See
info libc 'Feature Test Macros'
for details.  You should just either fix pdftex to use a different name, not
reserved by POSIX 2008, or use a namespace macro that doesn't provide POSIX
2008 stuff.  

https://bugzilla.redhat.com/show_bug.cgi?id=532230

----------------------------------------------------------------------

Comment By: Bob Tennent (rdtennent)
Date: 2009-10-31 17:50

Message:
According to some reports on the web, the problem is in glibc-2.10.1.  Apparently the non-standard definition of getline there should be "protected".  Indeed, if I comment out that definition in /usr/include/stdio.h, pdftex builds normally.  I'm willing to file a bug report in the Fedora bugzilla but I need some help:  what exactly is the "protection" needed?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=494&aid=4297&group_id=106

From pdftex-supportrequests at sarovar.org  Mon Nov  2 08:30:27 2009
From: pdftex-supportrequests at sarovar.org (pdftex-supportrequests at sarovar.org)
Date: Mon, 02 Nov 2009 13:00:27 +0530
Subject: [NTG-pdftex] =?utf-8?q?=5Bpdftex-Support_Requests=5D=5B4297=5D_co?=
	=?utf-8?q?nflicting_types_for_=27getline=27?=
Message-ID: <E1N4rMx-0006FA-IN@sarovar.org>

Support Requests item #4297, was opened at 2009-10-31 16:50
Status: Open
Priority: 3
Submitted By: Bob Tennent (rdtennent)
Assigned to: Nobody (None)
Summary: conflicting types for 'getline' 
Category: Install Problem (example)
Group: None
Resolution: None


Initial Comment:
Building pdftex on a Fedora 11 system using build.sh fails:

gcc -DHAVE_CONFIG_H  -I. -I../../../src/texk/web2c -I.. -I../../../src/texk/web2c/..  -I../../libs/obsdcompat -I../../libs/obsdcompat/.. -I../../../src/texk/web2c/../../libs/obsdcompat -I../../../src/texk/web2c/../../libs/obsdcompat/.. -I../../../src/texk/web2c/../../libs/zlib -g -O2  -c tangleboot.c -o tangleboot.o
In file included from tangleboot.c:94:
tangleboot.h:34: error: conflicting types for 'getline'
/usr/include/stdio.h:653: note: previous declaration of 'getline' was here
tangleboot.c:2175: error: conflicting types for 'getline'
/usr/include/stdio.h:653: note: previous declaration of 'getline' was here


I've built pdftex often on other systems without running into this. What's wrong?

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2009-11-02 08:30

Message:
POSIX 2008? That's new. It seems the glibc team likes to break old programs.
http://blog.scottt.tw/2009/04/getline-is-in-posix-2008-and-exposed-in.html and numerous other hits.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2009-11-02 08:13

Message:
FWIW: there is a fix for this problem in texlive 2009.

----------------------------------------------------------------------

Comment By: Bob Tennent (rdtennent)
Date: 2009-11-02 04:03

Message:
This is the response at the Fedora bugzilla:

getline is a standard POSIX 2008 function, and glibc headers by default offer
POSIX 2008 namespace.  See
info libc 'Feature Test Macros'
for details.  You should just either fix pdftex to use a different name, not
reserved by POSIX 2008, or use a namespace macro that doesn't provide POSIX
2008 stuff.  

https://bugzilla.redhat.com/show_bug.cgi?id=532230

----------------------------------------------------------------------

Comment By: Bob Tennent (rdtennent)
Date: 2009-10-31 17:50

Message:
According to some reports on the web, the problem is in glibc-2.10.1.  Apparently the non-standard definition of getline there should be "protected".  Indeed, if I comment out that definition in /usr/include/stdio.h, pdftex builds normally.  I'm willing to file a bug report in the Fedora bugzilla but I need some help:  what exactly is the "protection" needed?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=494&aid=4297&group_id=106

From pdftex-supportrequests at sarovar.org  Mon Nov  2 15:08:09 2009
From: pdftex-supportrequests at sarovar.org (pdftex-supportrequests at sarovar.org)
Date: Mon, 02 Nov 2009 19:38:09 +0530
Subject: [NTG-pdftex] =?utf-8?q?=5Bpdftex-Support_Requests=5D=5B4297=5D_co?=
	=?utf-8?q?nflicting_types_for_=27getline=27?=
Message-ID: <E1N4xZp-0003X6-OJ@sarovar.org>

Support Requests item #4297, was opened at 2009-10-31 11:50
Status: Open
Priority: 3
Submitted By: Bob Tennent (rdtennent)
Assigned to: Nobody (None)
Summary: conflicting types for 'getline' 
Category: Install Problem (example)
Group: None
Resolution: None


Initial Comment:
Building pdftex on a Fedora 11 system using build.sh fails:

gcc -DHAVE_CONFIG_H  -I. -I../../../src/texk/web2c -I.. -I../../../src/texk/web2c/..  -I../../libs/obsdcompat -I../../libs/obsdcompat/.. -I../../../src/texk/web2c/../../libs/obsdcompat -I../../../src/texk/web2c/../../libs/obsdcompat/.. -I../../../src/texk/web2c/../../libs/zlib -g -O2  -c tangleboot.c -o tangleboot.o
In file included from tangleboot.c:94:
tangleboot.h:34: error: conflicting types for 'getline'
/usr/include/stdio.h:653: note: previous declaration of 'getline' was here
tangleboot.c:2175: error: conflicting types for 'getline'
/usr/include/stdio.h:653: note: previous declaration of 'getline' was here


I've built pdftex often on other systems without running into this. What's wrong?

----------------------------------------------------------------------

Comment By: Bob Tennent (rdtennent)
Date: 2009-11-02 09:08

Message:
"there is a fix for this problem in texlive 2009"

That won't help those of us using a distribution like Fedora 11 which is still at texlive-2007.  Editing stdio.h isn't an option for most users.  And editing the source of pdftex isn't straightforward because of the conversions.  What exactly is the "fix" implemented in texlive 2009? 




----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2009-11-02 02:30

Message:
POSIX 2008? That's new. It seems the glibc team likes to break old programs.
http://blog.scottt.tw/2009/04/getline-is-in-posix-2008-and-exposed-in.html and numerous other hits.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2009-11-02 02:13

Message:
FWIW: there is a fix for this problem in texlive 2009.

----------------------------------------------------------------------

Comment By: Bob Tennent (rdtennent)
Date: 2009-11-01 22:03

Message:
This is the response at the Fedora bugzilla:

getline is a standard POSIX 2008 function, and glibc headers by default offer
POSIX 2008 namespace.  See
info libc 'Feature Test Macros'
for details.  You should just either fix pdftex to use a different name, not
reserved by POSIX 2008, or use a namespace macro that doesn't provide POSIX
2008 stuff.  

https://bugzilla.redhat.com/show_bug.cgi?id=532230

----------------------------------------------------------------------

Comment By: Bob Tennent (rdtennent)
Date: 2009-10-31 12:50

Message:
According to some reports on the web, the problem is in glibc-2.10.1.  Apparently the non-standard definition of getline there should be "protected".  Indeed, if I comment out that definition in /usr/include/stdio.h, pdftex builds normally.  I'm willing to file a bug report in the Fedora bugzilla but I need some help:  what exactly is the "protection" needed?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=494&aid=4297&group_id=106

From pdftex-supportrequests at sarovar.org  Mon Nov  2 15:22:14 2009
From: pdftex-supportrequests at sarovar.org (pdftex-supportrequests at sarovar.org)
Date: Mon, 02 Nov 2009 19:52:14 +0530
Subject: [NTG-pdftex] =?utf-8?q?=5Bpdftex-Support_Requests=5D=5B4297=5D_co?=
	=?utf-8?q?nflicting_types_for_=27getline=27?=
Message-ID: <E1N4xnS-0003a1-LW@sarovar.org>

Support Requests item #4297, was opened at 2009-10-31 16:50
Status: Open
Priority: 3
Submitted By: Bob Tennent (rdtennent)
Assigned to: Nobody (None)
Summary: conflicting types for 'getline' 
Category: Install Problem (example)
Group: None
Resolution: None


Initial Comment:
Building pdftex on a Fedora 11 system using build.sh fails:

gcc -DHAVE_CONFIG_H  -I. -I../../../src/texk/web2c -I.. -I../../../src/texk/web2c/..  -I../../libs/obsdcompat -I../../libs/obsdcompat/.. -I../../../src/texk/web2c/../../libs/obsdcompat -I../../../src/texk/web2c/../../libs/obsdcompat/.. -I../../../src/texk/web2c/../../libs/zlib -g -O2  -c tangleboot.c -o tangleboot.o
In file included from tangleboot.c:94:
tangleboot.h:34: error: conflicting types for 'getline'
/usr/include/stdio.h:653: note: previous declaration of 'getline' was here
tangleboot.c:2175: error: conflicting types for 'getline'
/usr/include/stdio.h:653: note: previous declaration of 'getline' was here


I've built pdftex often on other systems without running into this. What's wrong?

----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2009-11-02 15:22

Message:
Near the end of texk/web2c/cpascal.h:

#ifdef getline
#undef getline
#endif
#define getline web2c_getline


----------------------------------------------------------------------

Comment By: Bob Tennent (rdtennent)
Date: 2009-11-02 15:08

Message:
"there is a fix for this problem in texlive 2009"

That won't help those of us using a distribution like Fedora 11 which is still at texlive-2007.  Editing stdio.h isn't an option for most users.  And editing the source of pdftex isn't straightforward because of the conversions.  What exactly is the "fix" implemented in texlive 2009? 




----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2009-11-02 08:30

Message:
POSIX 2008? That's new. It seems the glibc team likes to break old programs.
http://blog.scottt.tw/2009/04/getline-is-in-posix-2008-and-exposed-in.html and numerous other hits.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2009-11-02 08:13

Message:
FWIW: there is a fix for this problem in texlive 2009.

----------------------------------------------------------------------

Comment By: Bob Tennent (rdtennent)
Date: 2009-11-02 04:03

Message:
This is the response at the Fedora bugzilla:

getline is a standard POSIX 2008 function, and glibc headers by default offer
POSIX 2008 namespace.  See
info libc 'Feature Test Macros'
for details.  You should just either fix pdftex to use a different name, not
reserved by POSIX 2008, or use a namespace macro that doesn't provide POSIX
2008 stuff.  

https://bugzilla.redhat.com/show_bug.cgi?id=532230

----------------------------------------------------------------------

Comment By: Bob Tennent (rdtennent)
Date: 2009-10-31 17:50

Message:
According to some reports on the web, the problem is in glibc-2.10.1.  Apparently the non-standard definition of getline there should be "protected".  Indeed, if I comment out that definition in /usr/include/stdio.h, pdftex builds normally.  I'm willing to file a bug report in the Fedora bugzilla but I need some help:  what exactly is the "protection" needed?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=494&aid=4297&group_id=106

From pdftex-supportrequests at sarovar.org  Mon Nov  2 16:05:44 2009
From: pdftex-supportrequests at sarovar.org (pdftex-supportrequests at sarovar.org)
Date: Mon, 02 Nov 2009 20:35:44 +0530
Subject: [NTG-pdftex] =?utf-8?q?=5Bpdftex-Support_Requests=5D=5B4297=5D_co?=
	=?utf-8?q?nflicting_types_for_=27getline=27?=
Message-ID: <E1N4yTY-0005ne-3a@sarovar.org>

Support Requests item #4297, was opened at 2009-10-31 11:50
Status: Open
Priority: 3
Submitted By: Bob Tennent (rdtennent)
Assigned to: Nobody (None)
Summary: conflicting types for 'getline' 
Category: Install Problem (example)
Group: None
Resolution: None


Initial Comment:
Building pdftex on a Fedora 11 system using build.sh fails:

gcc -DHAVE_CONFIG_H  -I. -I../../../src/texk/web2c -I.. -I../../../src/texk/web2c/..  -I../../libs/obsdcompat -I../../libs/obsdcompat/.. -I../../../src/texk/web2c/../../libs/obsdcompat -I../../../src/texk/web2c/../../libs/obsdcompat/.. -I../../../src/texk/web2c/../../libs/zlib -g -O2  -c tangleboot.c -o tangleboot.o
In file included from tangleboot.c:94:
tangleboot.h:34: error: conflicting types for 'getline'
/usr/include/stdio.h:653: note: previous declaration of 'getline' was here
tangleboot.c:2175: error: conflicting types for 'getline'
/usr/include/stdio.h:653: note: previous declaration of 'getline' was here


I've built pdftex often on other systems without running into this. What's wrong?

----------------------------------------------------------------------

Comment By: Bob Tennent (rdtennent)
Date: 2009-11-02 10:05

Message:
 >| Near the end of texk/web2c/cpascal.h:

   #ifdef getline
   #undef getline
   #endif
   #define getline web2c_getline

Thanks.  I'd change this request to "closed" if I could figure out how :+)

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2009-11-02 09:22

Message:
Near the end of texk/web2c/cpascal.h:

#ifdef getline
#undef getline
#endif
#define getline web2c_getline


----------------------------------------------------------------------

Comment By: Bob Tennent (rdtennent)
Date: 2009-11-02 09:08

Message:
"there is a fix for this problem in texlive 2009"

That won't help those of us using a distribution like Fedora 11 which is still at texlive-2007.  Editing stdio.h isn't an option for most users.  And editing the source of pdftex isn't straightforward because of the conversions.  What exactly is the "fix" implemented in texlive 2009? 




----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2009-11-02 02:30

Message:
POSIX 2008? That's new. It seems the glibc team likes to break old programs.
http://blog.scottt.tw/2009/04/getline-is-in-posix-2008-and-exposed-in.html and numerous other hits.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2009-11-02 02:13

Message:
FWIW: there is a fix for this problem in texlive 2009.

----------------------------------------------------------------------

Comment By: Bob Tennent (rdtennent)
Date: 2009-11-01 22:03

Message:
This is the response at the Fedora bugzilla:

getline is a standard POSIX 2008 function, and glibc headers by default offer
POSIX 2008 namespace.  See
info libc 'Feature Test Macros'
for details.  You should just either fix pdftex to use a different name, not
reserved by POSIX 2008, or use a namespace macro that doesn't provide POSIX
2008 stuff.  

https://bugzilla.redhat.com/show_bug.cgi?id=532230

----------------------------------------------------------------------

Comment By: Bob Tennent (rdtennent)
Date: 2009-10-31 12:50

Message:
According to some reports on the web, the problem is in glibc-2.10.1.  Apparently the non-standard definition of getline there should be "protected".  Indeed, if I comment out that definition in /usr/include/stdio.h, pdftex builds normally.  I'm willing to file a bug report in the Fedora bugzilla but I need some help:  what exactly is the "protection" needed?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=494&aid=4297&group_id=106

From pdftex-supportrequests at sarovar.org  Sat Nov 14 21:24:31 2009
From: pdftex-supportrequests at sarovar.org (pdftex-supportrequests at sarovar.org)
Date: Sun, 15 Nov 2009 01:54:31 +0530
Subject: [NTG-pdftex] =?utf-8?q?=5Bpdftex-Support_Requests=5D=5B4298=5D_pd?=
	=?utf-8?q?fTeX_mit_GCC_f=C3=BCr_Windows_kompilieren_geht_nicht?=
Message-ID: <E1N9PAd-0007pr-Qv@sarovar.org>

Support Requests item #4298, was opened at 2009-11-14 20:24
Status: Open
Priority: 3
Submitted By: Siggi Siggi (siggi)
Assigned to: Nobody (None)
Summary: pdfTeX mit GCC f?r Windows kompilieren geht nicht 
Category: None
Group: None
Resolution: None


Initial Comment:
ch m?chte gerne eine schlange L?sung zum automatisierten Erzeugen von PDF-Dateien haben - am besten indem ich .tex-Dateien konvertiere. Da pdfTeX ein schlankes Programm ist, versuchte ich den Quellcode zu kompilieren (da ich keine fertigen Binaries f?r Windows finden konnte). Ich kompiliere in der Umgebung MSys mit dem GCC. Dabei kommt es zuerst zum Typenkonflikt durch die erneute Deklaration des Datentyp 'Boolean' im Quellcode von pdfTeX. Wenn ich in den GCC includes die typedef auskommentiere, schreitet der Kompilierprozess weiter voran, bricht aber schlie?lich erneut ab mit der Meldung:

http://a.imagehost.org/view/0059/cmd

Kann mir jemand sagen, warum ganz unten kein Dateiname vorhanden ist, weshalb der Kompiliervorgang fehlschl?gt?

Unabh?ngig davon: Gibt es die M?glichkeit, pdfTeX komplett in eine .exe-Datei oder .dll-Datei zu kompilieren (ohne externe Bibliotheken)? Das w?re eigentlich die optimale L?sung.

Gr??e
siggi

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=494&aid=4298&group_id=106

From pdftex-bugs at sarovar.org  Mon Nov 16 00:46:07 2009
From: pdftex-bugs at sarovar.org (pdftex-bugs at sarovar.org)
Date: Mon, 16 Nov 2009 05:16:07 +0530
Subject: [NTG-pdftex] =?utf-8?q?=5Bpdftex-Bugs=5D=5B4294=5D_issue_with_iso?=
	=?utf-8?q?lated/non-isolated_page_transparency_group?=
Message-ID: <E1N9onH-0003RJ-PE@sarovar.org>

Bugs item #4294, was opened at 2009-09-01 15:43
Status: Open
Priority: 3
Submitted By: John Owens (jowens)
Assigned to: Nobody (None)
Summary: issue with isolated/non-isolated page transparency group 
Category: None
Group: None
Resolution: None


Initial Comment:
(The last bug didn't show up. So I am posting a web link to the
three files referenced below: http://tinyurl.com/n4jjm4 )

Howdy, I'm attaching 3 files. One is a tar.gz of a LaTeX document.
When we first submitted the paper built from the document, we used
dvips and Distiller. Now we're using pdflatex for the final version.
Both pdfs are attached. However, strangely, page 4 on the pdflatex
pdf, when viewed in Apple Preview on Snow Leopard (10.6), has
substantially lighter fonts than the other pages. This is probably
Preview's problem, not pdflatex's problem, and I've filed an Apple
bug. However, from talking to a PDF expert (summary below), it appears
that pdflatex is doing something weird, so I thought I'd bring it to
your attention.

The base page transparency group for page 4 is nonisolated, where for
all the other pages the /I key is not present (and thus they are
implicitly isolated). The PDF is correct, although a little
weird--there is no point in even specifying the isolation key of a
page's transparency group unless it a) contains non-normal blend modes
_and_ b) will be rendered in non-device-like contexts (e.g., as an
object in a larger piece of artwork). So I would argue that pdflatex
should probably not even bother specifying the /I key, especially
given that it appears to trigger a bug--or at least a dramatically
different code path--in Preview.

This _should_ have no effect, as the value of the /I key for the page
group is supposed to be ignored (and treated as if it were true).
Furthermore even if Preview were ignoring that requirement, the page
doesn't have any blend modes, so mathematically it shouldn't be
producing a different result.

But my guess is this: Preview is rendering page 4 into a nonisolated
transparency group using an initial, opaque, all-white backdrop, when
it should be completely ignoring the /I key and rendering into a
completely transparent backdrop. This shouldn't lead to different
results unless a blend mode is present. But,the isolated and
nonisolated code paths are somehow sufficiently different that they
generate different pixel values--due to precision or perhaps an actual
bug. But most of what I say is conjecture.

See chapter 7.3.6 ("Page Group") of the PDF Reference Manual, sixth
edition.

The Distiller version doesn't even have transparency group objects on
the pages (which is normal). So I wouldn't expect it to have the same
issues in Preview, and it doesn't.

(This is LaTeX source for a paper, so though I know you'll need the
source to do your investigations and bug fixes, kindly don't do
anything else with it beyond that.)

$ pdflatex --version
pdfTeX 3.1415926-1.40.10-2.2 (TeX Live 2009)
kpathsea version 5.0.0
Copyright 2009 Peter Breitenlohner (eTeX)/Han The Thanh (pdfTeX).
There is NO warranty.  Redistribution of this software is
covered by the terms of both the pdfTeX copyright and
the Lesser GNU General Public License.
For more information about these matters, see the file
named COPYING and the pdfTeX source.
Primary author of pdfTeX: Peter Breitenlohner (eTeX)/Han The Thanh (pdfTeX).
Compiled with libpng 1.2.39; using libpng 1.2.39
Compiled with zlib 1.2.3; using zlib 1.2.3
Compiled with xpdf version 3.02pl3

$ uname -a
Darwin classico-2.local 10.0.0 Darwin Kernel Version 10.0.0: Fri Jul 31 22:47:34 PDT 2009; root:xnu-1456.1.25~1/RELEASE_I386 i386 i386

----------------------------------------------------------------------

Comment By: John Owens (jowens)
Date: 2009-11-15 15:46

Message:
Just checkin' in. Thanks!

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2009-10-23 09:41

Message:
yes this is. Sorry for not replying, I will take a close look in about 2 weeks.

----------------------------------------------------------------------

Comment By: John Owens (jowens)
Date: 2009-10-22 13:21

Message:
Is this the right place to report pdftex issues?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=4294&group_id=106

From pdftex-bugs at sarovar.org  Mon Nov 16 01:08:45 2009
From: pdftex-bugs at sarovar.org (pdftex-bugs at sarovar.org)
Date: Mon, 16 Nov 2009 05:38:45 +0530
Subject: [NTG-pdftex] =?utf-8?q?=5Bpdftex-Bugs=5D=5B4294=5D_issue_with_iso?=
	=?utf-8?q?lated/non-isolated_page_transparency_group?=
Message-ID: <E1N9p9B-0003ZN-3k@sarovar.org>

Bugs item #4294, was opened at 2009-09-02 00:43
Status: Open
Priority: 3
Submitted By: John Owens (jowens)
Assigned to: Nobody (None)
Summary: issue with isolated/non-isolated page transparency group 
>Category: PDF inclusion
Group: None
Resolution: None


Initial Comment:
(The last bug didn't show up. So I am posting a web link to the
three files referenced below: http://tinyurl.com/n4jjm4 )

Howdy, I'm attaching 3 files. One is a tar.gz of a LaTeX document.
When we first submitted the paper built from the document, we used
dvips and Distiller. Now we're using pdflatex for the final version.
Both pdfs are attached. However, strangely, page 4 on the pdflatex
pdf, when viewed in Apple Preview on Snow Leopard (10.6), has
substantially lighter fonts than the other pages. This is probably
Preview's problem, not pdflatex's problem, and I've filed an Apple
bug. However, from talking to a PDF expert (summary below), it appears
that pdflatex is doing something weird, so I thought I'd bring it to
your attention.

The base page transparency group for page 4 is nonisolated, where for
all the other pages the /I key is not present (and thus they are
implicitly isolated). The PDF is correct, although a little
weird--there is no point in even specifying the isolation key of a
page's transparency group unless it a) contains non-normal blend modes
_and_ b) will be rendered in non-device-like contexts (e.g., as an
object in a larger piece of artwork). So I would argue that pdflatex
should probably not even bother specifying the /I key, especially
given that it appears to trigger a bug--or at least a dramatically
different code path--in Preview.

This _should_ have no effect, as the value of the /I key for the page
group is supposed to be ignored (and treated as if it were true).
Furthermore even if Preview were ignoring that requirement, the page
doesn't have any blend modes, so mathematically it shouldn't be
producing a different result.

But my guess is this: Preview is rendering page 4 into a nonisolated
transparency group using an initial, opaque, all-white backdrop, when
it should be completely ignoring the /I key and rendering into a
completely transparent backdrop. This shouldn't lead to different
results unless a blend mode is present. But,the isolated and
nonisolated code paths are somehow sufficiently different that they
generate different pixel values--due to precision or perhaps an actual
bug. But most of what I say is conjecture.

See chapter 7.3.6 ("Page Group") of the PDF Reference Manual, sixth
edition.

The Distiller version doesn't even have transparency group objects on
the pages (which is normal). So I wouldn't expect it to have the same
issues in Preview, and it doesn't.

(This is LaTeX source for a paper, so though I know you'll need the
source to do your investigations and bug fixes, kindly don't do
anything else with it beyond that.)

$ pdflatex --version
pdfTeX 3.1415926-1.40.10-2.2 (TeX Live 2009)
kpathsea version 5.0.0
Copyright 2009 Peter Breitenlohner (eTeX)/Han The Thanh (pdfTeX).
There is NO warranty.  Redistribution of this software is
covered by the terms of both the pdfTeX copyright and
the Lesser GNU General Public License.
For more information about these matters, see the file
named COPYING and the pdfTeX source.
Primary author of pdfTeX: Peter Breitenlohner (eTeX)/Han The Thanh (pdfTeX).
Compiled with libpng 1.2.39; using libpng 1.2.39
Compiled with zlib 1.2.3; using zlib 1.2.3
Compiled with xpdf version 3.02pl3

$ uname -a
Darwin classico-2.local 10.0.0 Darwin Kernel Version 10.0.0: Fri Jul 31 22:47:34 PDT 2009; root:xnu-1456.1.25~1/RELEASE_I386 i386 i386

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2009-11-16 01:08

Message:
John,
the display problem is most likely a problem of apple - I can't reproduce the effext with AR9 on Linux.

The page group on page 4 comes from the included pdf
(figures/multiValue.pdf). pdftex will copy a page group from an included pdf (or synthesize one for pngs with transparency). I don't think it should analyze the content of the page groups it copies.

----------------------------------------------------------------------

Comment By: John Owens (jowens)
Date: 2009-11-16 00:46

Message:
Just checkin' in. Thanks!

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2009-10-23 18:41

Message:
yes this is. Sorry for not replying, I will take a close look in about 2 weeks.

----------------------------------------------------------------------

Comment By: John Owens (jowens)
Date: 2009-10-22 22:21

Message:
Is this the right place to report pdftex issues?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=4294&group_id=106

From pdftex-bugs at sarovar.org  Tue Nov 17 01:33:32 2009
From: pdftex-bugs at sarovar.org (pdftex-bugs at sarovar.org)
Date: Tue, 17 Nov 2009 06:03:32 +0530
Subject: [NTG-pdftex] =?utf-8?q?=5Bpdftex-Bugs=5D=5B4294=5D_issue_with_iso?=
	=?utf-8?q?lated/non-isolated_page_transparency_group?=
Message-ID: <E1NAC0i-0006T8-DW@sarovar.org>

Bugs item #4294, was opened at 2009-09-01 15:43
Status: Open
Priority: 3
Submitted By: John Owens (jowens)
Assigned to: Nobody (None)
Summary: issue with isolated/non-isolated page transparency group 
Category: PDF inclusion
Group: None
Resolution: None


Initial Comment:
(The last bug didn't show up. So I am posting a web link to the
three files referenced below: http://tinyurl.com/n4jjm4 )

Howdy, I'm attaching 3 files. One is a tar.gz of a LaTeX document.
When we first submitted the paper built from the document, we used
dvips and Distiller. Now we're using pdflatex for the final version.
Both pdfs are attached. However, strangely, page 4 on the pdflatex
pdf, when viewed in Apple Preview on Snow Leopard (10.6), has
substantially lighter fonts than the other pages. This is probably
Preview's problem, not pdflatex's problem, and I've filed an Apple
bug. However, from talking to a PDF expert (summary below), it appears
that pdflatex is doing something weird, so I thought I'd bring it to
your attention.

The base page transparency group for page 4 is nonisolated, where for
all the other pages the /I key is not present (and thus they are
implicitly isolated). The PDF is correct, although a little
weird--there is no point in even specifying the isolation key of a
page's transparency group unless it a) contains non-normal blend modes
_and_ b) will be rendered in non-device-like contexts (e.g., as an
object in a larger piece of artwork). So I would argue that pdflatex
should probably not even bother specifying the /I key, especially
given that it appears to trigger a bug--or at least a dramatically
different code path--in Preview.

This _should_ have no effect, as the value of the /I key for the page
group is supposed to be ignored (and treated as if it were true).
Furthermore even if Preview were ignoring that requirement, the page
doesn't have any blend modes, so mathematically it shouldn't be
producing a different result.

But my guess is this: Preview is rendering page 4 into a nonisolated
transparency group using an initial, opaque, all-white backdrop, when
it should be completely ignoring the /I key and rendering into a
completely transparent backdrop. This shouldn't lead to different
results unless a blend mode is present. But,the isolated and
nonisolated code paths are somehow sufficiently different that they
generate different pixel values--due to precision or perhaps an actual
bug. But most of what I say is conjecture.

See chapter 7.3.6 ("Page Group") of the PDF Reference Manual, sixth
edition.

The Distiller version doesn't even have transparency group objects on
the pages (which is normal). So I wouldn't expect it to have the same
issues in Preview, and it doesn't.

(This is LaTeX source for a paper, so though I know you'll need the
source to do your investigations and bug fixes, kindly don't do
anything else with it beyond that.)

$ pdflatex --version
pdfTeX 3.1415926-1.40.10-2.2 (TeX Live 2009)
kpathsea version 5.0.0
Copyright 2009 Peter Breitenlohner (eTeX)/Han The Thanh (pdfTeX).
There is NO warranty.  Redistribution of this software is
covered by the terms of both the pdfTeX copyright and
the Lesser GNU General Public License.
For more information about these matters, see the file
named COPYING and the pdfTeX source.
Primary author of pdfTeX: Peter Breitenlohner (eTeX)/Han The Thanh (pdfTeX).
Compiled with libpng 1.2.39; using libpng 1.2.39
Compiled with zlib 1.2.3; using zlib 1.2.3
Compiled with xpdf version 3.02pl3

$ uname -a
Darwin classico-2.local 10.0.0 Darwin Kernel Version 10.0.0: Fri Jul 31 22:47:34 PDT 2009; root:xnu-1456.1.25~1/RELEASE_I386 i386 i386

----------------------------------------------------------------------

Comment By: John Owens (jowens)
Date: 2009-11-16 16:33

Message:
Quite sensible. Not reasonable to expect pdftex to analyze the PDF and decide if a page's group dictionary is unnecessary.

I think you can close this out. Thanks for looking at it!

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2009-11-15 16:08

Message:
John,
the display problem is most likely a problem of apple - I can't reproduce the effext with AR9 on Linux.

The page group on page 4 comes from the included pdf
(figures/multiValue.pdf). pdftex will copy a page group from an included pdf (or synthesize one for pngs with transparency). I don't think it should analyze the content of the page groups it copies.

----------------------------------------------------------------------

Comment By: John Owens (jowens)
Date: 2009-11-15 15:46

Message:
Just checkin' in. Thanks!

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2009-10-23 09:41

Message:
yes this is. Sorry for not replying, I will take a close look in about 2 weeks.

----------------------------------------------------------------------

Comment By: John Owens (jowens)
Date: 2009-10-22 13:21

Message:
Is this the right place to report pdftex issues?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=4294&group_id=106

From pdftex-bugs at sarovar.org  Tue Nov 17 01:46:00 2009
From: pdftex-bugs at sarovar.org (pdftex-bugs at sarovar.org)
Date: Tue, 17 Nov 2009 06:16:00 +0530
Subject: [NTG-pdftex] =?utf-8?q?=5Bpdftex-Bugs=5D=5B4294=5D_issue_with_iso?=
	=?utf-8?q?lated/non-isolated_page_transparency_group?=
Message-ID: <E1NACCm-0007Ja-RK@sarovar.org>

Bugs item #4294, was opened at 2009-09-02 00:43
>Status: Closed
Priority: 3
Submitted By: John Owens (jowens)
>Assigned to: Martin Schr?der (oneiros)
Summary: issue with isolated/non-isolated page transparency group 
Category: PDF inclusion
Group: None
>Resolution: Works For Me


Initial Comment:
(The last bug didn't show up. So I am posting a web link to the
three files referenced below: http://tinyurl.com/n4jjm4 )

Howdy, I'm attaching 3 files. One is a tar.gz of a LaTeX document.
When we first submitted the paper built from the document, we used
dvips and Distiller. Now we're using pdflatex for the final version.
Both pdfs are attached. However, strangely, page 4 on the pdflatex
pdf, when viewed in Apple Preview on Snow Leopard (10.6), has
substantially lighter fonts than the other pages. This is probably
Preview's problem, not pdflatex's problem, and I've filed an Apple
bug. However, from talking to a PDF expert (summary below), it appears
that pdflatex is doing something weird, so I thought I'd bring it to
your attention.

The base page transparency group for page 4 is nonisolated, where for
all the other pages the /I key is not present (and thus they are
implicitly isolated). The PDF is correct, although a little
weird--there is no point in even specifying the isolation key of a
page's transparency group unless it a) contains non-normal blend modes
_and_ b) will be rendered in non-device-like contexts (e.g., as an
object in a larger piece of artwork). So I would argue that pdflatex
should probably not even bother specifying the /I key, especially
given that it appears to trigger a bug--or at least a dramatically
different code path--in Preview.

This _should_ have no effect, as the value of the /I key for the page
group is supposed to be ignored (and treated as if it were true).
Furthermore even if Preview were ignoring that requirement, the page
doesn't have any blend modes, so mathematically it shouldn't be
producing a different result.

But my guess is this: Preview is rendering page 4 into a nonisolated
transparency group using an initial, opaque, all-white backdrop, when
it should be completely ignoring the /I key and rendering into a
completely transparent backdrop. This shouldn't lead to different
results unless a blend mode is present. But,the isolated and
nonisolated code paths are somehow sufficiently different that they
generate different pixel values--due to precision or perhaps an actual
bug. But most of what I say is conjecture.

See chapter 7.3.6 ("Page Group") of the PDF Reference Manual, sixth
edition.

The Distiller version doesn't even have transparency group objects on
the pages (which is normal). So I wouldn't expect it to have the same
issues in Preview, and it doesn't.

(This is LaTeX source for a paper, so though I know you'll need the
source to do your investigations and bug fixes, kindly don't do
anything else with it beyond that.)

$ pdflatex --version
pdfTeX 3.1415926-1.40.10-2.2 (TeX Live 2009)
kpathsea version 5.0.0
Copyright 2009 Peter Breitenlohner (eTeX)/Han The Thanh (pdfTeX).
There is NO warranty.  Redistribution of this software is
covered by the terms of both the pdfTeX copyright and
the Lesser GNU General Public License.
For more information about these matters, see the file
named COPYING and the pdfTeX source.
Primary author of pdfTeX: Peter Breitenlohner (eTeX)/Han The Thanh (pdfTeX).
Compiled with libpng 1.2.39; using libpng 1.2.39
Compiled with zlib 1.2.3; using zlib 1.2.3
Compiled with xpdf version 3.02pl3

$ uname -a
Darwin classico-2.local 10.0.0 Darwin Kernel Version 10.0.0: Fri Jul 31 22:47:34 PDT 2009; root:xnu-1456.1.25~1/RELEASE_I386 i386 i386

----------------------------------------------------------------------

Comment By: John Owens (jowens)
Date: 2009-11-17 01:33

Message:
Quite sensible. Not reasonable to expect pdftex to analyze the PDF and decide if a page's group dictionary is unnecessary.

I think you can close this out. Thanks for looking at it!

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2009-11-16 01:08

Message:
John,
the display problem is most likely a problem of apple - I can't reproduce the effext with AR9 on Linux.

The page group on page 4 comes from the included pdf
(figures/multiValue.pdf). pdftex will copy a page group from an included pdf (or synthesize one for pngs with transparency). I don't think it should analyze the content of the page groups it copies.

----------------------------------------------------------------------

Comment By: John Owens (jowens)
Date: 2009-11-16 00:46

Message:
Just checkin' in. Thanks!

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2009-10-23 18:41

Message:
yes this is. Sorry for not replying, I will take a close look in about 2 weeks.

----------------------------------------------------------------------

Comment By: John Owens (jowens)
Date: 2009-10-22 22:21

Message:
Is this the right place to report pdftex issues?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=4294&group_id=106

From hanthethanh at gmail.com  Fri Nov 20 11:17:20 2009
From: hanthethanh at gmail.com (Thanh Han The)
Date: Fri, 20 Nov 2009 10:17:20 +0000
Subject: [NTG-pdftex] pdftex-1.40.10-RC
Message-ID: <74f506dc0911200217n71687baai1628dbcfeb1db28b@mail.gmail.com>

Hi,

pdftex-1.40.10-RC is available at
http://sarovar.org/frs/download.php/1284/pdftex-1.40.10-RC.tar.bz2

This is a maintenance release with mostly bugfixes.

,--------,
| - sync with TL09
| - changes:
|   - increased sup_dest_names_size
|   - partial support for TTC
|   - enable mktexpk by default
|   - patch #2087: Support for CMap namespace
|   - \pdfshellescape is 2 if restricted shell escapes are enabled.
| - bugfixes:
|   - segfault when processing certain TTF fonts
|   - jpg image resolution not set in some cases
|   - \pdfobj file {foo} for files foo that don't end with '\n'
|   - bugfix #4289: \primitive\pdfoutput cannot be queried
|   - bugfix #4288: character width mismatch in font XY.vf ignored
|   - bugfix #993: "/Names array not sorted correctly"
|   - bugfix #606: "Forbidden ... while scanning ???"
|   - bugfix #3253: Bug in Type1 font subsetting
|   - \show\pdfstartlink is wrong
|   - pdf_set_rule() uses incorrect variables
|   - bugfix #2090: enabling LFS breaks PDF inclusion on some systems
(warning: not heavily-tested yet)
|   - t1_log() macro caused problem with some compilers
`--------`

there are still some minor bugs which will not be fixed in 1.40.10 yet, since
this release is to be compatible with TL09.

Regards,
Thanh

From taco at elvenkind.com  Thu Nov 26 15:27:52 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 26 Nov 2009 15:27:52 +0100
Subject: [NTG-pdftex] pdf font inclusion error (with partial patch)
In-Reply-To: <200911261414.nAQEEBWk022069@foundry.metz.supelec.fr>
References: <200911261414.nAQEEBWk022069@foundry.metz.supelec.fr>
Message-ID: <4B0E9068.1010006@elvenkind.com>


Hi,

I have added the patch below to luatex and a similar one-liner
for my local pdftex because we here ran into a pdf document that
has the following oddness:

5 0 obj
<<
  /F15 <<
    /Type /Font
    /Subtype /TrueType
    /BaseFont /WIDGBH+ArialMT
    /Encoding /WinAnsiEncoding
    /FirstChar 0
    /LastChar 255
    /FontDescriptor 8 0 R
    /Widths 7 0 R
  >>
...
>>
6 0 obj
<<
  /Type /Page
  /Parent 4 0 R
  /MediaBox [ 0 0 595.276 841.89 ]
  /Resources <<
    /Font 5 0 R
    /ProcSet [ /PDF /Text /ImageB /ImageC ]
  >>
  /Contents 13 0 R
>>
endobj


Current pdftoepdf.cc expects to find indirect references inside
object 5, without the patch it generates a fatal error.

The patch itself is only a quick fix that works thanks to my setting
of \pdfinclusioncopyfonts, as I do not know how to fix the 'other'
case, sorry.

Best wishes,
Taco


taco at metatex.org wrote:
> Author: taco
> Date: 2009-11-26 15:14:10 +0100 (Thu, 26 Nov 2009)
> New Revision: 3192
> 
> Modified:
>    trunk/source/texk/web2c/luatexdir/image/pdftoepdf.cc
> Log:
> add a quick and dirty fix for pdfs generated by easyPDF Printer Driver 4.2,
> which uses full font dictionaries inside the Font resources instead of 
> indirect references.
> 
> 
> Modified: trunk/source/texk/web2c/luatexdir/image/pdftoepdf.cc
> ===================================================================
> --- trunk/source/texk/web2c/luatexdir/image/pdftoepdf.cc	2009-11-23 21:04:08 UTC (rev 3191)
> +++ trunk/source/texk/web2c/luatexdir/image/pdftoepdf.cc	2009-11-26 14:14:10 UTC (rev 3192)
> @@ -459,7 +459,8 @@
>      pdf_puts(pdf, "/Font << ");
>      for (i = 0, l = obj->dictGetLength(); i < l; ++i) {
>          obj->dictGetValNF(i, &fontRef);
> -        if (fontRef->isRef())
> +        if (fontRef->isRef() ||
> +            (fontRef->isDict() && (pdf->inclusion_copy_font == 0)))
>              copyFont(pdf, obj->dictGetKey(i), &fontRef);
>          else
>              pdftex_fail("PDF inclusion: invalid font in reference type <%s>",
> 
> _______________________________________________
> Luatex-commits mailing list
> Luatex-commits at lists.foundry.supelec.fr
> http://lists.foundry.supelec.fr/mailman/listinfo/luatex-commits

From pdftex-patches at sarovar.org  Fri Nov 27 11:03:38 2009
From: pdftex-patches at sarovar.org (pdftex-patches at sarovar.org)
Date: Fri, 27 Nov 2009 15:33:38 +0530
Subject: [NTG-pdftex] =?utf-8?q?=5Bpdftex-Patches=5D=5B4299=5D_pdf_font_in?=
	=?utf-8?q?clusion_error_=28with_partial_patch=29?=
Message-ID: <E1NDxfu-00074Z-Hw@sarovar.org>

Patches item #4299, was opened at 2009-11-27 10:03
Status: Open
Priority: 3
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Nobody (None)
Summary: pdf font inclusion error (with partial patch)   
Category: PDF inclusion
Group: None
Resolution: Accepted


Initial Comment:
http://www.ntg.nl/pipermail/ntg-pdftex/2009-November/003859.html

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=4299&group_id=106

