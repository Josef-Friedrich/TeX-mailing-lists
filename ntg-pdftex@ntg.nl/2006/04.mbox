From frank at debian.org  Tue Apr  4 13:52:03 2006
From: frank at debian.org (=?iso-8859-1?q?Frank_K=FCster?=)
Date: Tue, 04 Apr 2006 13:52:03 +0200
Subject: [NTG-pdftex] Changing the banner is hardly possible
Message-ID: <8664lpr21o.fsf@alhambra.kuesterei.ch>

Hi,

I just tried to change the banner for our Debian-specific changes in
teTeX's pdftex 1.21a, but that doesn't work well.

--- tetex-bin-3.0.orig/texk/web2c/pdfetexdir/pdfetexextra.in    2005-07-20 12:28:21.000000000 +0200
+++ tetex-bin-3.0/texk/web2c/pdfetexdir/pdfetexextra.in 2006-03-24 10:17:29.000000000 +0100
@@ -26,7 +26,7 @@
    (generated from ../lib/texmfmp.c).
 */
 
-#define BANNER "This is pdfeTeX, Version 3.141592-PDFTEX-VERSION-ETEX-VERSION"
+#define BANNER "This is pdfeTeX using libpoppler, Version 3.141592-PDFTEX-VERSION-ETEX-VERSION"
 #define COPYRIGHT_HOLDER "Peter Breitenlohner (eTeX)/Han The Thanh (pdfTeX)"
 #define AUTHOR NULL
 #define PROGRAM_HELP PDFETEXHELP

leads to the funny output

# pdftex --version
pdfeTeX using libpoppler 3.141592-1.21a-2.2 (Web2C 7.5.4)
kpathsea version 3.5.4
Copyright (C) 1997-2004 Peter Breitenlohner (eTeX)/Han The Thanh (pdfTeX).
Kpathsea is copyright (C) 1997-2004 Free Software Foundation, Inc.
There is NO warranty.  Redistribution of this software is
covered by the terms of both the pdfeTeX using libpoppler copyright and
the GNU General Public License.
For more information about these matters, see the files
named COPYING and the pdfeTeX using libpoppler source.
Primary author of pdfeTeX using libpoppler: Peter Breitenlohner (eTeX)/Han The Thanh (pdfTeX).
Kpathsea written by Karl Berry and others.

Appending something after the version number doesn't seem to work,
either.  If this is still the same in the 1.40 betas, I'll report a bug...

Regards, Frank

-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX)


From pragma at wxs.nl  Tue Apr  4 14:58:12 2006
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 04 Apr 2006 14:58:12 +0200
Subject: [NTG-pdftex] Changing the banner is hardly possible
In-Reply-To: <8664lpr21o.fsf@alhambra.kuesterei.ch>
References: <8664lpr21o.fsf@alhambra.kuesterei.ch>
Message-ID: <44326D64.9060409@wxs.nl>

? wrote:
> Hi,
>
> I just tried to change the banner for our Debian-specific changes in
> teTeX's pdftex 1.21a, but that doesn't work well.
>
> --- tetex-bin-3.0.orig/texk/web2c/pdfetexdir/pdfetexextra.in    2005-07-20 12:28:21.000000000 +0200
> +++ tetex-bin-3.0/texk/web2c/pdfetexdir/pdfetexextra.in 2006-03-24 10:17:29.000000000 +0100
> @@ -26,7 +26,7 @@
>     (generated from ../lib/texmfmp.c).
>  */
>  
> -#define BANNER "This is pdfeTeX, Version 3.141592-PDFTEX-VERSION-ETEX-VERSION"
> +#define BANNER "This is pdfeTeX using libpoppler, Version 3.141592-PDFTEX-VERSION-ETEX-VERSION"
>  #define COPYRIGHT_HOLDER "Peter Breitenlohner (eTeX)/Han The Thanh (pdfTeX)"
>  #define AUTHOR NULL
>  #define PROGRAM_HELP PDFETEXHELP
>   
how are we going to deal with different libraries in pdftex?

pdfetex (using xpdf)
pdfpoppleretex (using poppler)

or will the poppler variant generate exactly the same output as the xpdf 
variant (which is the cross platform lib)?

Hans

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From frank at debian.org  Tue Apr  4 15:39:18 2006
From: frank at debian.org (=?iso-8859-1?q?Frank_K=FCster?=)
Date: Tue, 04 Apr 2006 15:39:18 +0200
Subject: [NTG-pdftex] Changing the banner is hardly possible
In-Reply-To: <44326D64.9060409@wxs.nl> (Hans Hagen's message of "Tue, 04 Apr
	2006 14:58:12 +0200")
References: <8664lpr21o.fsf@alhambra.kuesterei.ch> <44326D64.9060409@wxs.nl>
Message-ID: <8664lppiih.fsf@alhambra.kuesterei.ch>

Hans Hagen <pragma at wxs.nl> wrote:

> ? wrote:
>> Hi,
>>
>> I just tried to change the banner for our Debian-specific changes in
>> teTeX's pdftex 1.21a, but that doesn't work well.
>>
>> --- tetex-bin-3.0.orig/texk/web2c/pdfetexdir/pdfetexextra.in    2005-07-20 12:28:21.000000000 +0200
>> +++ tetex-bin-3.0/texk/web2c/pdfetexdir/pdfetexextra.in 2006-03-24 10:17:29.000000000 +0100
>> @@ -26,7 +26,7 @@
>>     (generated from ../lib/texmfmp.c).
>>  */
>>  -#define BANNER "This is pdfeTeX, Version
>> 3.141592-PDFTEX-VERSION-ETEX-VERSION"
>> +#define BANNER "This is pdfeTeX using libpoppler, Version 3.141592-PDFTEX-VERSION-ETEX-VERSION"
>>  #define COPYRIGHT_HOLDER "Peter Breitenlohner (eTeX)/Han The Thanh (pdfTeX)"
>>  #define AUTHOR NULL
>>  #define PROGRAM_HELP PDFETEXHELP
>>
> how are we going to deal with different libraries in pdftex?
>
> pdfetex (using xpdf)
> pdfpoppleretex (using poppler)
>
> or will the poppler variant generate exactly the same output as the
> xpdf variant (which is the cross platform lib)?

I think until somebody joins the poppler developers to code actual
improvements, the parts of poppler that affect pdftex won't change, and
the created PDF files will be identical.

But that's not my concern here; it's just a coincidence that I made that
particular change.  I could as well experiment with including some of
XeTeX's opentype code, or whatever - the GPL (2a) requires to change the
message that is displayed upon startup, or at least it is reasonable to
read it like this, when I made changes to the sources.  So there should
be a way to add some information in the banner (ideally, also in the
banner that's printed when pdftex is invoked without the version switch)
without making the whole text a mess.

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX)


From pragma at wxs.nl  Wed Apr  5 19:37:17 2006
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 05 Apr 2006 19:37:17 +0200
Subject: [NTG-pdftex] possible bug
Message-ID: <4434004D.9030406@wxs.nl>

Hi,

When I process:

\pdfcompresslevel=0
\immediate\pdfobj stream {xx}
\end

pdftex reports 0 paes bug produces a faulty pdf file that looks like:
%PDF-1.5
%????
1 0 obj <<
/Length 2        
>>
stream
xx


so, apart from content ending up in a file with no pages, the object is 
also faulty (no endstream)
(version: This is pdfeTeX, Version 3.141592-1.30.3-2.2 (Web2c 7.5.5))

maybe this is already solved

Hans


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From martin at oneiros.de  Wed Apr  5 22:27:37 2006
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed, 5 Apr 2006 22:27:37 +0200
Subject: [NTG-pdftex] possible bug
In-Reply-To: <4434004D.9030406@wxs.nl>
References: <4434004D.9030406@wxs.nl>
Message-ID: <20060405202737.GB12762@lucien.oneiros.kn-bremen.de>

On 2006-04-05 19:37:17 +0200, Hans Hagen wrote:
> maybe this is already solved

No, I get the same output with the latest beta. :-(

Best
    Martin
-- 
                    http://www.tm.oneiros.de

From hartmut_henkel at gmx.de  Wed Apr  5 22:51:32 2006
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed, 5 Apr 2006 22:51:32 +0200 (CEST)
Subject: [NTG-pdftex] possible bug
In-Reply-To: <20060405202737.GB12762@lucien.oneiros.kn-bremen.de>
References: <4434004D.9030406@wxs.nl>
	<20060405202737.GB12762@lucien.oneiros.kn-bremen.de>
Message-ID: <Pine.LNX.4.64.0604052248400.28595@hahepc1.hahe>

On Wed, 5 Apr 2006, Martin Schr?der wrote:

> On 2006-04-05 19:37:17 +0200, Hans Hagen wrote:
> > maybe this is already solved
>
> No, I get the same output with the latest beta. :-(

the "No pages of output." comes from the DVI (!) output routine,
therefore no PDF flushing happens, so at least something isn't
initialized right...

Regards, Hartmut

From noreply at sarovar.org  Thu Apr  6 00:50:42 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 06 Apr 2006 04:20:42 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-505 ] file with only \immediate\pdfobj
	stream results in garbage
Message-ID: <E1FRGpm-0008Fp-00@sarovar.org>

Bugs item #505, was opened at 2006-04-06 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=505&group_id=106

Category: None
Group: v1.30.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin Schr?der (oneiros)
Assigned to: Hartmut Henkel (hhenkel)
Summary: file with only \immediate\pdfobj stream results in garbage

Initial Comment:
The input

\pdfcompresslevel=0
\immediate\pdfobj stream {xx}
\end

results in the message

No pages of output.

but produces the garbage pdf attached.

Confirmed with 1.30.2 and the last 1.40.0-beta.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=505&group_id=106

From noreply at sarovar.org  Sat Apr  8 08:45:31 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sat, 08 Apr 2006 12:15:31 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-505 ] file with only \immediate\pdfobj
	stream results in garbage
Message-ID: <E1FS7CN-0003Kl-00@sarovar.org>

Bugs item #505, was opened at 2006-04-06 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=505&group_id=106

Category: None
>Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin Schr?der (oneiros)
Assigned to: Hartmut Henkel (hhenkel)
Summary: file with only \immediate\pdfobj stream results in garbage

Initial Comment:
The input

\pdfcompresslevel=0
\immediate\pdfobj stream {xx}
\end

results in the message

No pages of output.

but produces the garbage pdf attached.

Confirmed with 1.30.2 and the last 1.40.0-beta.

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-08 08:45

Message:
Logged In: YES 
user_id=929

tried 2 approaches:

1) try to make a complete PDF file without pages, like:

<< /Type /Pages /Count 0 /Kids [] >>

Then xpdf shows a white background, but acroread complains.
So this can't be done.

2a) silently delete faulty PDF. But one should give at least
a warning.

2b) flag warning and delete faulty PDF. That's the current
patch for 1.40.0-beta-20060213. Now it says:

This is pdfTeXk, Version 3.141592-1.40.0-beta-20060213
(Web2C 7.5.5)
(format=pdftex 2006.4.8)  8 APR 2006 07:41
 %&-line parsing enabled.
**test1
(./test1.tex )
No pages of output.
Warning: pdftex: dangling objects discarded, no output file
produced.


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=505&group_id=106

From noreply at sarovar.org  Thu Apr 13 20:37:11 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 14 Apr 2006 00:07:11 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-509 ] invalid pdf created if font name
	contains space
Message-ID: <E1FU6gp-000369-00@sarovar.org>

Bugs item #509, was opened at 2006-04-13 11:37
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=509&group_id=106

Category: Fonts
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Tom Bishop (tbishop)
Assigned to: Hartmut Henkel (hhenkel)
Summary: invalid pdf created if font name contains space

Initial Comment:
pdftex 3.141592-1.30.4-2.2 runs the following code without 
complaining:

\pdfmapline{+mssong4e <mssong.ttf <mssong4e.enc}
\font\testfont=mssong4e at 20pt
\testfont\char"00
\bye

-- but the resulting pdf file can't be opened by Adobe Reader or 
GhostScript. GhostScript reports "Unknown operator: Song".

The pdf file includes "/BaseFont /FEVAQU+MS Song". Evidently, the 
problem is the space in "MS Song", because if I use a hex editor to 
replace the space with an underscore, then the pdf becomes OK.

The same font worked fine with earlier pdftex versions. It's a Chinese 
Unicode TrueType font, from Microsoft.

I haven't tried installing pdftex 1.30.6; is it possible that would fix the 
problem? I just re-installed TeX using i-Installer for Mac OS X; it still 
uses pdftex 1.30.4.

Here is the output of pdftex when running the test file:

This is pdfeTeX, Version 3.141592-1.30.4-2.2 (Web2C 7.5.5)
entering extended mode
(./test3.tex [1{/Users/tbishop/Library/texmf/fonts/map/pdftex/
updmap/pdftex.map
}] )</usr/local/teTeX/share/texmf.tetex/fonts/type1/bluesky/cm/
cmr10.pfb>{/usr/
local/teTeX/share/texmf.local/fonts/enc/pdftex/enc/mssong4e.enc}
</usr/local/teT
eX/share/texmf.local/fonts/truetype/mssong.ttf>
Output written on test3.pdf (1 page, 5067 bytes).
Transcript written on test3.log.

Thanks in advance for any help!

Best wishes,

Tom Bishop (wenlin at wenlin.com)



----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=509&group_id=106

From noreply at sarovar.org  Thu Apr 13 22:39:33 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 14 Apr 2006 02:09:33 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-509 ] invalid pdf created if font name
	contains space
Message-ID: <E1FU8bF-0002e2-00@sarovar.org>

Bugs item #509, was opened at 2006-04-13 20:37
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=509&group_id=106

Category: Fonts
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Tom Bishop (tbishop)
Assigned to: Hartmut Henkel (hhenkel)
Summary: invalid pdf created if font name contains space

Initial Comment:
pdftex 3.141592-1.30.4-2.2 runs the following code without 
complaining:

\pdfmapline{+mssong4e <mssong.ttf <mssong4e.enc}
\font\testfont=mssong4e at 20pt
\testfont\char"00
\bye

-- but the resulting pdf file can't be opened by Adobe Reader or 
GhostScript. GhostScript reports "Unknown operator: Song".

The pdf file includes "/BaseFont /FEVAQU+MS Song". Evidently, the 
problem is the space in "MS Song", because if I use a hex editor to 
replace the space with an underscore, then the pdf becomes OK.

The same font worked fine with earlier pdftex versions. It's a Chinese 
Unicode TrueType font, from Microsoft.

I haven't tried installing pdftex 1.30.6; is it possible that would fix the 
problem? I just re-installed TeX using i-Installer for Mac OS X; it still 
uses pdftex 1.30.4.

Here is the output of pdftex when running the test file:

This is pdfeTeX, Version 3.141592-1.30.4-2.2 (Web2C 7.5.5)
entering extended mode
(./test3.tex [1{/Users/tbishop/Library/texmf/fonts/map/pdftex/
updmap/pdftex.map
}] )</usr/local/teTeX/share/texmf.tetex/fonts/type1/bluesky/cm/
cmr10.pfb>{/usr/
local/teTeX/share/texmf.local/fonts/enc/pdftex/enc/mssong4e.enc}
</usr/local/teT
eX/share/texmf.local/fonts/truetype/mssong.ttf>
Output written on test3.pdf (1 page, 5067 bytes).
Transcript written on test3.log.

Thanks in advance for any help!

Best wishes,

Tom Bishop (wenlin at wenlin.com)



----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-13 22:39

Message:
Logged In: YES 
user_id=929

This mssong.ttf version seems to be buggy. Here is a
diagnostic printout from function ttf_read_name() in
writettf.c; these are all available entries from the "Naming
Table":

i=0 platform_id=1 encoding_id=0 name_id=0 name <(c)
Copyright ZHUHAI Stone Computerized typesetting system R&D
LTD., 1995-1996>
i=1 platform_id=1 encoding_id=0 name_id=1 name <MS Song>
i=2 platform_id=1 encoding_id=0 name_id=2 name <Regular>
i=3 platform_id=1 encoding_id=0 name_id=3 name <Microsoft:MS
Song:1996>
i=4 platform_id=1 encoding_id=0 name_id=4 name <MS Song>
i=5 platform_id=1 encoding_id=0 name_id=5 name <Version 1.00>
i=6 platform_id=1 encoding_id=0 name_id=6 name <MS Song>
---> ttf_read_name <MS Song>

There is no usable PostScript name in: The TTF standard
tells that under name_id=6 there should be the Postscript
font, but here it is "MS Song" with a blank.

As long as the font does not contain a valid PostScript
name, i have no idea how to tweak this correctly...

Other clues anybody?

Regards, Hartmut


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=509&group_id=106

From noreply at sarovar.org  Thu Apr 13 22:54:27 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 14 Apr 2006 02:24:27 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-509 ] invalid pdf created if font name
	contains space
Message-ID: <E1FU8pf-0004QQ-00@sarovar.org>

Bugs item #509, was opened at 2006-04-13 20:37
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=509&group_id=106

Category: Fonts
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Tom Bishop (tbishop)
Assigned to: Hartmut Henkel (hhenkel)
Summary: invalid pdf created if font name contains space

Initial Comment:
pdftex 3.141592-1.30.4-2.2 runs the following code without 
complaining:

\pdfmapline{+mssong4e <mssong.ttf <mssong4e.enc}
\font\testfont=mssong4e at 20pt
\testfont\char"00
\bye

-- but the resulting pdf file can't be opened by Adobe Reader or 
GhostScript. GhostScript reports "Unknown operator: Song".

The pdf file includes "/BaseFont /FEVAQU+MS Song". Evidently, the 
problem is the space in "MS Song", because if I use a hex editor to 
replace the space with an underscore, then the pdf becomes OK.

The same font worked fine with earlier pdftex versions. It's a Chinese 
Unicode TrueType font, from Microsoft.

I haven't tried installing pdftex 1.30.6; is it possible that would fix the 
problem? I just re-installed TeX using i-Installer for Mac OS X; it still 
uses pdftex 1.30.4.

Here is the output of pdftex when running the test file:

This is pdfeTeX, Version 3.141592-1.30.4-2.2 (Web2C 7.5.5)
entering extended mode
(./test3.tex [1{/Users/tbishop/Library/texmf/fonts/map/pdftex/
updmap/pdftex.map
}] )</usr/local/teTeX/share/texmf.tetex/fonts/type1/bluesky/cm/
cmr10.pfb>{/usr/
local/teTeX/share/texmf.local/fonts/enc/pdftex/enc/mssong4e.enc}
</usr/local/teT
eX/share/texmf.local/fonts/truetype/mssong.ttf>
Output written on test3.pdf (1 page, 5067 bytes).
Transcript written on test3.log.

Thanks in advance for any help!

Best wishes,

Tom Bishop (wenlin at wenlin.com)



----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-13 22:54

Message:
Logged In: YES 
user_id=929

ah, after the PDF reference 5. ed. page 388 in case there
would be no PostScript name entry we could be cruesome and
strip the blank. But there is a wrong PostScript name in the
font. So maybe one could flag a warning (or not?) and just
strip the blank? (which would be easy)

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-13 22:39

Message:
Logged In: YES 
user_id=929

This mssong.ttf version seems to be buggy. Here is a
diagnostic printout from function ttf_read_name() in
writettf.c; these are all available entries from the "Naming
Table":

i=0 platform_id=1 encoding_id=0 name_id=0 name <(c)
Copyright ZHUHAI Stone Computerized typesetting system R&D
LTD., 1995-1996>
i=1 platform_id=1 encoding_id=0 name_id=1 name <MS Song>
i=2 platform_id=1 encoding_id=0 name_id=2 name <Regular>
i=3 platform_id=1 encoding_id=0 name_id=3 name <Microsoft:MS
Song:1996>
i=4 platform_id=1 encoding_id=0 name_id=4 name <MS Song>
i=5 platform_id=1 encoding_id=0 name_id=5 name <Version 1.00>
i=6 platform_id=1 encoding_id=0 name_id=6 name <MS Song>
---> ttf_read_name <MS Song>

There is no usable PostScript name in: The TTF standard
tells that under name_id=6 there should be the Postscript
font, but here it is "MS Song" with a blank.

As long as the font does not contain a valid PostScript
name, i have no idea how to tweak this correctly...

Other clues anybody?

Regards, Hartmut


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=509&group_id=106

From noreply at sarovar.org  Thu Apr 13 23:25:38 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 14 Apr 2006 02:55:38 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-509 ] invalid pdf created if font name
	contains space
Message-ID: <E1FU9Jq-0007wa-00@sarovar.org>

Bugs item #509, was opened at 2006-04-13 20:37
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=509&group_id=106

Category: Fonts
>Group: v1.40.0
Status: Open
Resolution: None
>Priority: 3
Submitted By: Tom Bishop (tbishop)
Assigned to: Hartmut Henkel (hhenkel)
Summary: invalid pdf created if font name contains space

Initial Comment:
pdftex 3.141592-1.30.4-2.2 runs the following code without 
complaining:

\pdfmapline{+mssong4e <mssong.ttf <mssong4e.enc}
\font\testfont=mssong4e at 20pt
\testfont\char"00
\bye

-- but the resulting pdf file can't be opened by Adobe Reader or 
GhostScript. GhostScript reports "Unknown operator: Song".

The pdf file includes "/BaseFont /FEVAQU+MS Song". Evidently, the 
problem is the space in "MS Song", because if I use a hex editor to 
replace the space with an underscore, then the pdf becomes OK.

The same font worked fine with earlier pdftex versions. It's a Chinese 
Unicode TrueType font, from Microsoft.

I haven't tried installing pdftex 1.30.6; is it possible that would fix the 
problem? I just re-installed TeX using i-Installer for Mac OS X; it still 
uses pdftex 1.30.4.

Here is the output of pdftex when running the test file:

This is pdfeTeX, Version 3.141592-1.30.4-2.2 (Web2C 7.5.5)
entering extended mode
(./test3.tex [1{/Users/tbishop/Library/texmf/fonts/map/pdftex/
updmap/pdftex.map
}] )</usr/local/teTeX/share/texmf.tetex/fonts/type1/bluesky/cm/
cmr10.pfb>{/usr/
local/teTeX/share/texmf.local/fonts/enc/pdftex/enc/mssong4e.enc}
</usr/local/teT
eX/share/texmf.local/fonts/truetype/mssong.ttf>
Output written on test3.pdf (1 page, 5067 bytes).
Transcript written on test3.log.

Thanks in advance for any help!

Best wishes,

Tom Bishop (wenlin at wenlin.com)



----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-13 23:25

Message:
Logged In: YES 
user_id=929

patch makes pdftex lenient with (buggy) TTF fonts that have
spaces in PostScript name, strips spaces in /BaseFont and
/FontName, e. g.: "MS Song" ---> "MSSong"

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-13 22:54

Message:
Logged In: YES 
user_id=929

ah, after the PDF reference 5. ed. page 388 in case there
would be no PostScript name entry we could be cruesome and
strip the blank. But there is a wrong PostScript name in the
font. So maybe one could flag a warning (or not?) and just
strip the blank? (which would be easy)

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-13 22:39

Message:
Logged In: YES 
user_id=929

This mssong.ttf version seems to be buggy. Here is a
diagnostic printout from function ttf_read_name() in
writettf.c; these are all available entries from the "Naming
Table":

i=0 platform_id=1 encoding_id=0 name_id=0 name <(c)
Copyright ZHUHAI Stone Computerized typesetting system R&D
LTD., 1995-1996>
i=1 platform_id=1 encoding_id=0 name_id=1 name <MS Song>
i=2 platform_id=1 encoding_id=0 name_id=2 name <Regular>
i=3 platform_id=1 encoding_id=0 name_id=3 name <Microsoft:MS
Song:1996>
i=4 platform_id=1 encoding_id=0 name_id=4 name <MS Song>
i=5 platform_id=1 encoding_id=0 name_id=5 name <Version 1.00>
i=6 platform_id=1 encoding_id=0 name_id=6 name <MS Song>
---> ttf_read_name <MS Song>

There is no usable PostScript name in: The TTF standard
tells that under name_id=6 there should be the Postscript
font, but here it is "MS Song" with a blank.

As long as the font does not contain a valid PostScript
name, i have no idea how to tweak this correctly...

Other clues anybody?

Regards, Hartmut


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=509&group_id=106

From noreply at sarovar.org  Thu Apr 13 23:58:38 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 14 Apr 2006 03:28:38 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-509 ] invalid pdf created if font name
	contains space
Message-ID: <E1FU9pm-0003mS-00@sarovar.org>

Bugs item #509, was opened at 2006-04-13 18:37
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=509&group_id=106

Category: Fonts
Group: v1.40.0
Status: Open
Resolution: None
Priority: 3
Submitted By: Tom Bishop (tbishop)
Assigned to: Hartmut Henkel (hhenkel)
Summary: invalid pdf created if font name contains space

Initial Comment:
pdftex 3.141592-1.30.4-2.2 runs the following code without 
complaining:

\pdfmapline{+mssong4e <mssong.ttf <mssong4e.enc}
\font\testfont=mssong4e at 20pt
\testfont\char"00
\bye

-- but the resulting pdf file can't be opened by Adobe Reader or 
GhostScript. GhostScript reports "Unknown operator: Song".

The pdf file includes "/BaseFont /FEVAQU+MS Song". Evidently, the 
problem is the space in "MS Song", because if I use a hex editor to 
replace the space with an underscore, then the pdf becomes OK.

The same font worked fine with earlier pdftex versions. It's a Chinese 
Unicode TrueType font, from Microsoft.

I haven't tried installing pdftex 1.30.6; is it possible that would fix the 
problem? I just re-installed TeX using i-Installer for Mac OS X; it still 
uses pdftex 1.30.4.

Here is the output of pdftex when running the test file:

This is pdfeTeX, Version 3.141592-1.30.4-2.2 (Web2C 7.5.5)
entering extended mode
(./test3.tex [1{/Users/tbishop/Library/texmf/fonts/map/pdftex/
updmap/pdftex.map
}] )</usr/local/teTeX/share/texmf.tetex/fonts/type1/bluesky/cm/
cmr10.pfb>{/usr/
local/teTeX/share/texmf.local/fonts/enc/pdftex/enc/mssong4e.enc}
</usr/local/teT
eX/share/texmf.local/fonts/truetype/mssong.ttf>
Output written on test3.pdf (1 page, 5067 bytes).
Transcript written on test3.log.

Thanks in advance for any help!

Best wishes,

Tom Bishop (wenlin at wenlin.com)



----------------------------------------------------------------------

>Comment By: Hans Hagen (hagen)
Date: 2006-04-13 21:58

Message:
Logged In: YES 
user_id=927

why not replace spaces by underscore (just as a precaution) 

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-13 21:25

Message:
Logged In: YES 
user_id=929

patch makes pdftex lenient with (buggy) TTF fonts that have
spaces in PostScript name, strips spaces in /BaseFont and
/FontName, e. g.: "MS Song" ---> "MSSong"

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-13 20:54

Message:
Logged In: YES 
user_id=929

ah, after the PDF reference 5. ed. page 388 in case there
would be no PostScript name entry we could be cruesome and
strip the blank. But there is a wrong PostScript name in the
font. So maybe one could flag a warning (or not?) and just
strip the blank? (which would be easy)

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-13 20:39

Message:
Logged In: YES 
user_id=929

This mssong.ttf version seems to be buggy. Here is a
diagnostic printout from function ttf_read_name() in
writettf.c; these are all available entries from the "Naming
Table":

i=0 platform_id=1 encoding_id=0 name_id=0 name <(c)
Copyright ZHUHAI Stone Computerized typesetting system R&D
LTD., 1995-1996>
i=1 platform_id=1 encoding_id=0 name_id=1 name <MS Song>
i=2 platform_id=1 encoding_id=0 name_id=2 name <Regular>
i=3 platform_id=1 encoding_id=0 name_id=3 name <Microsoft:MS
Song:1996>
i=4 platform_id=1 encoding_id=0 name_id=4 name <MS Song>
i=5 platform_id=1 encoding_id=0 name_id=5 name <Version 1.00>
i=6 platform_id=1 encoding_id=0 name_id=6 name <MS Song>
---> ttf_read_name <MS Song>

There is no usable PostScript name in: The TTF standard
tells that under name_id=6 there should be the Postscript
font, but here it is "MS Song" with a blank.

As long as the font does not contain a valid PostScript
name, i have no idea how to tweak this correctly...

Other clues anybody?

Regards, Hartmut


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=509&group_id=106

From noreply at sarovar.org  Fri Apr 14 00:16:55 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 14 Apr 2006 03:46:55 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-509 ] invalid pdf created if font name
	contains space
Message-ID: <E1FUA7T-0006Ep-00@sarovar.org>

Bugs item #509, was opened at 2006-04-13 20:37
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=509&group_id=106

Category: Fonts
Group: v1.40.0
Status: Open
Resolution: None
Priority: 3
Submitted By: Tom Bishop (tbishop)
Assigned to: Hartmut Henkel (hhenkel)
Summary: invalid pdf created if font name contains space

Initial Comment:
pdftex 3.141592-1.30.4-2.2 runs the following code without 
complaining:

\pdfmapline{+mssong4e <mssong.ttf <mssong4e.enc}
\font\testfont=mssong4e at 20pt
\testfont\char"00
\bye

-- but the resulting pdf file can't be opened by Adobe Reader or 
GhostScript. GhostScript reports "Unknown operator: Song".

The pdf file includes "/BaseFont /FEVAQU+MS Song". Evidently, the 
problem is the space in "MS Song", because if I use a hex editor to 
replace the space with an underscore, then the pdf becomes OK.

The same font worked fine with earlier pdftex versions. It's a Chinese 
Unicode TrueType font, from Microsoft.

I haven't tried installing pdftex 1.30.6; is it possible that would fix the 
problem? I just re-installed TeX using i-Installer for Mac OS X; it still 
uses pdftex 1.30.4.

Here is the output of pdftex when running the test file:

This is pdfeTeX, Version 3.141592-1.30.4-2.2 (Web2C 7.5.5)
entering extended mode
(./test3.tex [1{/Users/tbishop/Library/texmf/fonts/map/pdftex/
updmap/pdftex.map
}] )</usr/local/teTeX/share/texmf.tetex/fonts/type1/bluesky/cm/
cmr10.pfb>{/usr/
local/teTeX/share/texmf.local/fonts/enc/pdftex/enc/mssong4e.enc}
</usr/local/teT
eX/share/texmf.local/fonts/truetype/mssong.ttf>
Output written on test3.pdf (1 page, 5067 bytes).
Transcript written on test3.log.

Thanks in advance for any help!

Best wishes,

Tom Bishop (wenlin at wenlin.com)



----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-14 00:16

Message:
Logged In: YES 
user_id=929

well, the PDF ref. says to strip the spaces, and i don't
know what consequences such underscores would have. So it
seems that just stripping spaces might be a little bit
closer to the right thing (in the view that this is only
with buggy fonts anyway).

----------------------------------------------------------------------

Comment By: Hans Hagen (hagen)
Date: 2006-04-13 23:58

Message:
Logged In: YES 
user_id=927

why not replace spaces by underscore (just as a precaution) 

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-13 23:25

Message:
Logged In: YES 
user_id=929

patch makes pdftex lenient with (buggy) TTF fonts that have
spaces in PostScript name, strips spaces in /BaseFont and
/FontName, e. g.: "MS Song" ---> "MSSong"

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-13 22:54

Message:
Logged In: YES 
user_id=929

ah, after the PDF reference 5. ed. page 388 in case there
would be no PostScript name entry we could be cruesome and
strip the blank. But there is a wrong PostScript name in the
font. So maybe one could flag a warning (or not?) and just
strip the blank? (which would be easy)

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-13 22:39

Message:
Logged In: YES 
user_id=929

This mssong.ttf version seems to be buggy. Here is a
diagnostic printout from function ttf_read_name() in
writettf.c; these are all available entries from the "Naming
Table":

i=0 platform_id=1 encoding_id=0 name_id=0 name <(c)
Copyright ZHUHAI Stone Computerized typesetting system R&D
LTD., 1995-1996>
i=1 platform_id=1 encoding_id=0 name_id=1 name <MS Song>
i=2 platform_id=1 encoding_id=0 name_id=2 name <Regular>
i=3 platform_id=1 encoding_id=0 name_id=3 name <Microsoft:MS
Song:1996>
i=4 platform_id=1 encoding_id=0 name_id=4 name <MS Song>
i=5 platform_id=1 encoding_id=0 name_id=5 name <Version 1.00>
i=6 platform_id=1 encoding_id=0 name_id=6 name <MS Song>
---> ttf_read_name <MS Song>

There is no usable PostScript name in: The TTF standard
tells that under name_id=6 there should be the Postscript
font, but here it is "MS Song" with a blank.

As long as the font does not contain a valid PostScript
name, i have no idea how to tweak this correctly...

Other clues anybody?

Regards, Hartmut


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=509&group_id=106

From noreply at sarovar.org  Fri Apr 14 13:12:59 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 14 Apr 2006 16:42:59 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-429 ] Generate Tagged PDF
Message-ID: <E1FUMEV-0006Ky-00@sarovar.org>

Feature Requests item #429, was opened at 2005-09-12 00:37
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=429&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
>Priority: 4
Submitted By: Timothy O'Brien (oberon101)
>Assigned to: Martin Schr?der (oneiros)
>Summary: Generate Tagged PDF

Initial Comment:
Adobe Reader has a'reflow' feature that allows 
visually impaired users to zoom into properly 
formatted documents and read them without having to 
move the viewable area back and forth across the 
page.  PDFs made in MikteX eith pdfte are not properly 
formatted and reflow without interword spacing, 
redering them unreadable. I contacted the MikteX 
people and they referred me here. I beleive Scientific 
Word also uses pdftex with the same result.

Any chance this could be fixed?

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-04-14 13:12

Message:
Logged In: YES 
user_id=421

I'm changing the summary. Yes, we are aware that tagged pdf
is an often requested feature, but implementing it would be
non-trivial:
- first pdfTeX would have to be extended with primites for a
structure tree (and classes and packages would have to use
these primitives)
- then primitives for tagging the content are needed and
must be used

----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2005-11-04 20:58

Message:
Logged In: NO 


I would volonteer to test the feature. I am writing
a rather long pdf produced with pdftex that is 
downloadable for free ( http://www.motionmountain.net )
and readers regularly ask why it cannot be read aloud.
Pdftex probably would only need to be extended
with a single command - something like 
\writetaghere{tagtype} - and all the rest could 
be done by extensions to the latex cls and sty files.

CS

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=429&group_id=106

From noreply at sarovar.org  Fri Apr 14 13:33:17 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 14 Apr 2006 17:03:17 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-429 ] Generate Tagged PDF
Message-ID: <E1FUMY9-0000Wz-00@sarovar.org>

Feature Requests item #429, was opened at 2005-09-12 04:07
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=429&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 4
Submitted By: Timothy O'Brien (oberon101)
Assigned to: Martin Schr?der (oneiros)
Summary: Generate Tagged PDF

Initial Comment:
Adobe Reader has a'reflow' feature that allows 
visually impaired users to zoom into properly 
formatted documents and read them without having to 
move the viewable area back and forth across the 
page.  PDFs made in MikteX eith pdfte are not properly 
formatted and reflow without interword spacing, 
redering them unreadable. I contacted the MikteX 
people and they referred me here. I beleive Scientific 
Word also uses pdftex with the same result.

Any chance this could be fixed?

----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2006-04-14 17:03

Message:
Logged In: NO 

Maybe a first version can use a very low-level solution,
just with a single tagging primitive; there is such a command
already (I think it is called pdfliteral) . And the tree can come
later. So one could start with little work, assuming one knows
tagging.

CS

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-04-14 16:42

Message:
Logged In: YES 
user_id=421

I'm changing the summary. Yes, we are aware that tagged pdf
is an often requested feature, but implementing it would be
non-trivial:
- first pdfTeX would have to be extended with primites for a
structure tree (and classes and packages would have to use
these primitives)
- then primitives for tagging the content are needed and
must be used

----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2005-11-05 01:28

Message:
Logged In: NO 


I would volonteer to test the feature. I am writing
a rather long pdf produced with pdftex that is 
downloadable for free ( http://www.motionmountain.net )
and readers regularly ask why it cannot be read aloud.
Pdftex probably would only need to be extended
with a single command - something like 
\writetaghere{tagtype} - and all the rest could 
be done by extensions to the latex cls and sty files.

CS

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=429&group_id=106

From Rolf.Niepraschk at ptb.de  Thu Apr 20 13:49:53 2006
From: Rolf.Niepraschk at ptb.de (Rolf Niepraschk)
Date: Thu, 20 Apr 2006 13:49:53 +0200
Subject: [NTG-pdftex] epdfview
Message-ID: <44477561.80605@ptb.de>


Simple PDF viewer using poppler without Gnome dependency.

==> http://www.emma-soft.com/projects/epdfview/

...Rolf


From frank at debian.org  Fri Apr 21 11:43:17 2006
From: frank at debian.org (=?iso-8859-1?q?Frank_K=FCster?=)
Date: Fri, 21 Apr 2006 11:43:17 +0200
Subject: [NTG-pdftex] epdfview
In-Reply-To: <44477561.80605@ptb.de> (Rolf Niepraschk's message of "Thu, 20
	Apr 2006 13:49:53 +0200")
References: <44477561.80605@ptb.de>
Message-ID: <86odyv462y.fsf@alhambra.kuesterei.ch>

Rolf Niepraschk <Rolf.Niepraschk at ptb.de> wrote:

> Simple PDF viewer using poppler without Gnome dependency.
>
> ==> http://www.emma-soft.com/projects/epdfview/

Why should that be interesting for pdftex?  It's already possible to
compile it with poppler, you don't even need the glib bindings that
epdfview uses, just some minor patches (preprocessor directives) that I
posted a while ago.

Currently, poppler is a nearly drop-in-replacement for xpdf.  In the
long run, I think it would be better if it would be changed

- to not expose as much internals as xpdf does, but instead

- provide a well-defined API, and

- in the version without any bindings, do this specifically with
  non-displaying purposes in mind (document parsing, extracting,
  changing, etc.).

But it seems, since the poppler project was created to merge code
accumulated in viewers and maybe printing backends, this is low priority
for the people currently involved.

I say that I think this should be changed, although it has a drawback:
It would mean that we can't have the same code and still switch between
poppler and xpdf.  But on the other hand, *if* parsing and extraction is
cared for by the poppler people, we might be better of with that than
currently with xpdf.

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX)


From martin at oneiros.de  Fri Apr 21 11:57:30 2006
From: martin at oneiros.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Fri, 21 Apr 2006 11:57:30 +0200
Subject: [NTG-pdftex] poppler (was: epdfview)
In-Reply-To: <86odyv462y.fsf@alhambra.kuesterei.ch>
References: <44477561.80605@ptb.de> <86odyv462y.fsf@alhambra.kuesterei.ch>
Message-ID: <20060421095730.GB28991@lucien.oneiros.kn-bremen.de>

On 2006-04-21 11:43:17 +0200, Frank K?ster wrote:
> Currently, poppler is a nearly drop-in-replacement for xpdf.  In the
> long run, I think it would be better if it would be changed
> 
> - to not expose as much internals as xpdf does, but instead
> 
> - provide a well-defined API, and
> 
> - in the version without any bindings, do this specifically with
>   non-displaying purposes in mind (document parsing, extracting,
>   changing, etc.).
> 
> But it seems, since the poppler project was created to merge code
> accumulated in viewers and maybe printing backends, this is low priority
> for the people currently involved.

The poppler developers are quite interested, but indeed they have
other priorities.

> I say that I think this should be changed, although it has a drawback:
> It would mean that we can't have the same code and still switch between
> poppler and xpdf.  But on the other hand, *if* parsing and extraction is
> cared for by the poppler people, we might be better of with that than
> currently with xpdf.

Agreed.

Best
    Martin
-- 
                    http://www.tm.oneiros.de

From Fabrice.Popineau at supelec.fr  Fri Apr 21 12:16:22 2006
From: Fabrice.Popineau at supelec.fr (Fabrice Popineau)
Date: Fri, 21 Apr 2006 12:16:22 +0200
Subject: [NTG-pdftex] possible bug with non-closing files
In-Reply-To: <20060326220157.GA12669@lucien.oneiros.kn-bremen.de> (Martin
	=?iso-8859-1?Q?Schr=F6der's?= message of "Mon,
	27 Mar 2006 00:01:57 +0200")
References: <874q1kc2s3.fsf@vvv.vsu.ru>
	<20060326220157.GA12669@lucien.oneiros.kn-bremen.de>
Message-ID: <wtdjxmh5.fsf@esemetz.metz.supelec.fr>

* Martin Schr?der <martin at oneiros.de> writes:

    > On 2006-03-27 01:30:20 +0400, Vladimir Volovich wrote:
    >> It appears that this is due to the "ulimit" on the number of
    >> simultaneously opened files which was 1024 by default. Increasing
    >> "ulimit" allowed to process the file.

    > Acknowleged: This also happens with the latest beta. Also the
    > resulting damaged file is not deleted.

    >> But it looks like a bug in pdftex: it seems that it keeps all the
    >> files which were \includepdf'ed opened, thus causing this limit
    >> to be reached. Instead, it seems, it should close the included
    >> files.
    >> 
    >> WDYT?

    > Please file a bug at sarovar so we can track this.

This 'bug' has been discussed long ago, and at the time, no real
solution has been found. Look at least 3 years back in the pdftex
mailing list archives.

Fabrice


