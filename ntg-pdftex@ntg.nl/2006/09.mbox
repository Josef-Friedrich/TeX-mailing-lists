From noreply at sarovar.org  Fri Sep  1 12:43:52 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 01 Sep 2006 16:13:52 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-600 ] \pdfdraftmode: results in segfault
	+ can be tricked
Message-ID: <E1GJ6V6-0007Vj-00@sarovar.org>

Bugs item #600, was opened at 2006-08-23 23:51
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=600&group_id=106

Category: None
Group: v1.40.0
>Status: Closed
Resolution: Fixed
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: Martin Schr?der (oneiros)
Summary: \pdfdraftmode: results in segfault + can be tricked

Initial Comment:
The following gives a segfault here (under cygwin):

\pdfdraftmode=1
\immediate\pdfobj{x}
%\pdfoutline goto name{x}{y} % with this, too
\pdfcompresslevel=9
A
\bye

>From the terminal:

This is pdfTeXk, Version 3.141592-1.40.0-beta-20060822
(Web2C 7.5.5)
 %&-line parsing enabled.
entering extended mode
(./bugs.tex
[1{/cygdrive/c/Programme/TeXLive/texmf-var/fonts/map/pdftex/updmap/
pdftex.map}    133 [main] pdftex 1780
_cygtls::handle_exceptions: Error while dumping state
(probably corrupted stack)
Segmentation fault (core dumped)


Also, the following will create a pdf file, although it
shouldn't (or at least issue a warning about
\pdfdraftmode being issued too late):

\immediate\pdfobj{x}
\pdfdraftmode=1
A
\bye


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-08-29 23:02

Message:
Logged In: YES 
user_id=421

Updated patch that also gives an error in the case of a late
\pdfdraftmode=1

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-08-29 22:43

Message:
Logged In: YES 
user_id=421

Thanks. The attached patch fixes at least the crash. 

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=600&group_id=106

From noreply at sarovar.org  Fri Sep  1 12:43:35 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 01 Sep 2006 16:13:35 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-481 ] "This can't happen (flushing)"
	with extra kerning+expansion+ligatures
Message-ID: <E1GJ6Up-0007Vc-00@sarovar.org>

Bugs item #481, was opened at 2006-02-13 19:04
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=481&group_id=106

Category: hz
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
>Summary: "This can't happen (flushing)" with extra kerning+expansion+ligatures

Initial Comment:
With the following test file, pdftex will abort with
"This can't happen (flushing)":

\pdfadjustspacing=1
\pdffontexpand\font 20 20 4 autoexpand
\pdfappendkern=1
\knaccode\font`i=100

\hsize10em
foo fii foo foo foo foo
% but this works:
%foo f{}ii foo foo foo foo
\bye


Hartmut's analysis was:

-----------------------------------
FWIW, this happens in function do_subst_font(). But it
starts with
auto_expand_kern(), where the given kern indeed is
appended to the i of
"fi" and also to the 2nd "i". It seems as if at this
time "fi" is not
yet seen as a ligature. Then in do_subst_font() the
"fi" is somehow
already a ligature, and now the kern is part of the
lig_ptr list (which
is wrong). Then font(r) is recursively changed to 51,
the expanded font
number, and so the kern, which should not be in this
list, gets the 51
as its type. But it must be 11 for a kern. Maybe a
change should be that
the kern does not end up in the lig_ptr list, but
should come after the
"fi" ligature. No idea, how.
-----------------------------------


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-09-01 12:43

Message:
Logged In: YES 
user_id=421

Is anybody working on this?

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-02-13 21:25

Message:
Logged In: YES 
user_id=929

My text above had a typo, sorry. Before you start
searching... it's auto_append_kern(), not auto_expand_kern().

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=481&group_id=106

From noreply at sarovar.org  Fri Sep  1 12:47:48 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 01 Sep 2006 16:17:48 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-304 ] Names of expanded fonts not in log
	output
Message-ID: <E1GJ6Yu-0002C0-00@sarovar.org>

Bugs item #304, was opened at 2005-03-02 18:25
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=304&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Names of expanded fonts not in log output

Initial Comment:
When using font expansion, the log output will not
contain the names of the expanded fonts but the null
character instead (resp. ^^@).

%-------------------------------------
\pdfadjustspacing=2
\pdffontexpand\font 20 20 5 autoexpand
\tracingoutput=1
test

\parfillskip 0pt
test
\bye
%-------------------------------------

Regards,
Robert.


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-09-01 12:47

Message:
Logged In: YES 
user_id=421

Is this really a problem, i.e. is there a reason _not_ to
use the autoexpand feature in new documents?

Hartmut, did you look into this bug?

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2005-10-16 00:24

Message:
Logged In: YES 
user_id=2217

If the font is not autoexpand'ed, its name will still not be
written to the log file.

(pdftex 1.30.3; same test file, without "autoexpand")

Regards,
Robert.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-05-12 17:05

Message:
Logged In: YES 
user_id=421

This has been fixed in 1.30.0

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-30 22:16

Message:
Logged In: YES 
user_id=929

This patch is based of Thanh's change file showfont.ch,
which he gave me during EuroTeX2005 (it's also included,
renamed here to showfont-thanh.ch). Use showfont.ch for the
patch.

There is now a new integer variable \pdftracingfonts. It is
zero by default, then we get a log like this (see
robert050302.log):

...\tenrm t

...\tenrm (+20) e

Without font expansion, this default should be compatible
with TeX's original log output.

If \pdftracingfonts is set to 1 (or greater), we get a more
verbose log (see tst-304.log):

...\xivtt (cmtt10 at 14.0pt) t

.\xivtt (cmtt10+20 at 14.0pt) e

Seems to work with change file showfont.ch coming directly
after after hz.ch.

Patch only roughly tested with pdfetex, likely to give
problems with pdfxtex, as the variable numbering might
differ. Log format to be agreed upon...

Regards, Hartmut


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=304&group_id=106

From noreply at sarovar.org  Fri Sep  1 12:48:39 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 01 Sep 2006 16:18:39 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-465 ] font expansion & \lastlinefit
Message-ID: <E1GJ6Zj-0003T4-00@sarovar.org>

Bugs item #465, was opened at 2006-01-03 20:05
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=465&group_id=106

Category: hz
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: font expansion & \lastlinefit

Initial Comment:
With \lastlinefit > 0, the last line will always be 
expanded to the maximum (except if it doesn't contain a 
glue).

Furthermore, I wonder whether \lastlinefit should ideally
also effect the expansion amount (ie., the last line of 
the first paragraph should be set in cmr10-25, since the 
preceding one is set in cmr10-50)?

\tracingoutput1
\showboxbreadth\maxdimen
\pdftracingfonts1
\pdfadjustspacing2
\pdffontexpand\font 50 50 10 autoexpand
\lastlinefit500
\hsize=16cm
\input tufte\par
\bye,

Robert


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-09-01 12:48

Message:
Logged In: YES 
user_id=421

Hartmut? Thanh? Anybody working on this?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=465&group_id=106

From noreply at sarovar.org  Fri Sep  1 13:55:50 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 01 Sep 2006 17:25:50 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-465 ] font expansion & \lastlinefit
Message-ID: <E1GJ7ck-0002xn-00@sarovar.org>

Bugs item #465, was opened at 2006-01-03 19:05
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=465&group_id=106

Category: hz
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: font expansion & \lastlinefit

Initial Comment:
With \lastlinefit > 0, the last line will always be 
expanded to the maximum (except if it doesn't contain a 
glue).

Furthermore, I wonder whether \lastlinefit should ideally
also effect the expansion amount (ie., the last line of 
the first paragraph should be set in cmr10-25, since the 
preceding one is set in cmr10-50)?

\tracingoutput1
\showboxbreadth\maxdimen
\pdftracingfonts1
\pdfadjustspacing2
\pdffontexpand\font 50 50 10 autoexpand
\lastlinefit500
\hsize=16cm
\input tufte\par
\bye,

Robert


----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2006-09-01 11:55

Message:
Logged In: YES 
user_id=710

I should work on it and other bugs related to hz stuff, but
I haven't found the time to reread relevant codes yet.
Please be patient with me. 

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-09-01 10:48

Message:
Logged In: YES 
user_id=421

Hartmut? Thanh? Anybody working on this?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=465&group_id=106

From noreply at sarovar.org  Fri Sep  1 21:02:38 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sat, 02 Sep 2006 00:32:38 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-304 ] Names of expanded fonts not in log
	output
Message-ID: <E1GJEHm-0000i1-00@sarovar.org>

Bugs item #304, was opened at 2005-03-02 18:25
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=304&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Names of expanded fonts not in log output

Initial Comment:
When using font expansion, the log output will not
contain the names of the expanded fonts but the null
character instead (resp. ^^@).

%-------------------------------------
\pdfadjustspacing=2
\pdffontexpand\font 20 20 5 autoexpand
\tracingoutput=1
test

\parfillskip 0pt
test
\bye
%-------------------------------------

Regards,
Robert.


----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2006-09-01 21:02

Message:
Logged In: YES 
user_id=929

currently i even can't get a test file do expansion at all
without "autoexpand". E. g. Robert's example above, without
"autoexpand", doesn't use expanded fonts. Maybe that's the
reason for the missing expand parameter in the log? Can
anybody provide a test file for this case?

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-09-01 12:47

Message:
Logged In: YES 
user_id=421

Is this really a problem, i.e. is there a reason _not_ to
use the autoexpand feature in new documents?

Hartmut, did you look into this bug?

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2005-10-16 00:24

Message:
Logged In: YES 
user_id=2217

If the font is not autoexpand'ed, its name will still not be
written to the log file.

(pdftex 1.30.3; same test file, without "autoexpand")

Regards,
Robert.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-05-12 17:05

Message:
Logged In: YES 
user_id=421

This has been fixed in 1.30.0

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-30 22:16

Message:
Logged In: YES 
user_id=929

This patch is based of Thanh's change file showfont.ch,
which he gave me during EuroTeX2005 (it's also included,
renamed here to showfont-thanh.ch). Use showfont.ch for the
patch.

There is now a new integer variable \pdftracingfonts. It is
zero by default, then we get a log like this (see
robert050302.log):

...\tenrm t

...\tenrm (+20) e

Without font expansion, this default should be compatible
with TeX's original log output.

If \pdftracingfonts is set to 1 (or greater), we get a more
verbose log (see tst-304.log):

...\xivtt (cmtt10 at 14.0pt) t

.\xivtt (cmtt10+20 at 14.0pt) e

Seems to work with change file showfont.ch coming directly
after after hz.ch.

Patch only roughly tested with pdfetex, likely to give
problems with pdfxtex, as the variable numbering might
differ. Log format to be agreed upon...

Regards, Hartmut


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=304&group_id=106

From martin at oneiros.de  Sun Sep  3 18:06:23 2006
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sun, 3 Sep 2006 18:06:23 +0200
Subject: [NTG-pdftex] [CTAN] pax v0.1
Message-ID: <68c491a60609030906v1526e6c1tb746eda7d7be2ffb@mail.gmail.com>

---------- Forwarded message ----------
From: CTAN Announcements <ctan-ann at dante.de>
Date: 03.09.2006 15:54
Subject: CTAN has a new package: pax v0.1
To: ctan-ann at dante.de


On Sat, 26 Aug 2006, Heiko Oberdiek submitted a new package

  pax

to CTAN.

Location on CTAN: macros/latex/contrib/pax/
License: other (lppl/gpl)

-----------------------------------------------------------
>From the README:

| A. PROJECT PAX
| ==============
|
| If PDF files are included using pdfTeX, PDF annotations
| are stripped. This project tries a solution without
| altering pdfTeX. A Java program (pax.jar) parses the PDF file that
| will later be included. It writes the data of the annotations
| in a file that can be read by TeX. Then a LaTeX package (pax.sty)
| extends the graphics package. If a PDF file is included, the package
| looks for the file with the annotation data, reads them and puts
| the annotations in the right place.
|
| Project status: experimental

-----------------------------------------------------------

From hartmut_henkel at gmx.de  Sun Sep  3 18:26:46 2006
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sun, 3 Sep 2006 18:26:46 +0200 (CEST)
Subject: [NTG-pdftex] [CTAN] pax v0.1
In-Reply-To: <68c491a60609030906v1526e6c1tb746eda7d7be2ffb@mail.gmail.com>
References: <68c491a60609030906v1526e6c1tb746eda7d7be2ffb@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0609031824280.3098@hahepc1.hahe>

On Sun, 3 Sep 2006, Martin Schr?der wrote:

> ---------- Forwarded message ----------
> From: CTAN Announcements <ctan-ann at dante.de>
> Date: 03.09.2006 15:54
> Subject: CTAN has a new package: pax v0.1
> To: ctan-ann at dante.de
>
>
> On Sat, 26 Aug 2006, Heiko Oberdiek submitted a new package
>
>   pax
>
> to CTAN.

PAX(1)                            BSD General Commands Manual                           PAX(1)

NAME
     pax -- read and write file archives and copy directory hierarchies

maybe better avoid the name clash?

Regards, Hartmut

From noreply at sarovar.org  Sun Sep  3 19:30:25 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sun, 03 Sep 2006 23:00:25 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-304 ] Names of expanded fonts not in log
	output
Message-ID: <E1GJvnd-0005f4-00@sarovar.org>

Bugs item #304, was opened at 2005-03-02 17:25
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=304&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Names of expanded fonts not in log output

Initial Comment:
When using font expansion, the log output will not
contain the names of the expanded fonts but the null
character instead (resp. ^^@).

%-------------------------------------
\pdfadjustspacing=2
\pdffontexpand\font 20 20 5 autoexpand
\tracingoutput=1
test

\parfillskip 0pt
test
\bye
%-------------------------------------

Regards,
Robert.


----------------------------------------------------------------------

>Comment By: Robert (schlcht)
Date: 2006-09-03 17:30

Message:
Logged In: YES 
user_id=2217

I've attached an example using Kepler MM (tfm+pfb included,
please delete after testing).

MM fonts are probably the only case where one would not want
to use the autoexpand feature.

At first sight, saying "autoexpand" or not doesn't seem to
make a difference, since pdftex will always prefer existing
expanded fonts (pfb) over autoexpanding them, anyway.
However, there are some slight differences in the pdf. This
is probably because the provided tfm file is different from
the metrics that pdf calculates itself in the case of
autoexpand. That is, autoexpand may result in a mismatch
between the provided pfb and the calculated tfm, is that
correct?


----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-09-01 19:02

Message:
Logged In: YES 
user_id=929

currently i even can't get a test file do expansion at all
without "autoexpand". E. g. Robert's example above, without
"autoexpand", doesn't use expanded fonts. Maybe that's the
reason for the missing expand parameter in the log? Can
anybody provide a test file for this case?

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-09-01 10:47

Message:
Logged In: YES 
user_id=421

Is this really a problem, i.e. is there a reason _not_ to
use the autoexpand feature in new documents?

Hartmut, did you look into this bug?

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2005-10-15 22:24

Message:
Logged In: YES 
user_id=2217

If the font is not autoexpand'ed, its name will still not be
written to the log file.

(pdftex 1.30.3; same test file, without "autoexpand")

Regards,
Robert.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-05-12 15:05

Message:
Logged In: YES 
user_id=421

This has been fixed in 1.30.0

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-30 20:16

Message:
Logged In: YES 
user_id=929

This patch is based of Thanh's change file showfont.ch,
which he gave me during EuroTeX2005 (it's also included,
renamed here to showfont-thanh.ch). Use showfont.ch for the
patch.

There is now a new integer variable \pdftracingfonts. It is
zero by default, then we get a log like this (see
robert050302.log):

...\tenrm t

...\tenrm (+20) e

Without font expansion, this default should be compatible
with TeX's original log output.

If \pdftracingfonts is set to 1 (or greater), we get a more
verbose log (see tst-304.log):

...\xivtt (cmtt10 at 14.0pt) t

.\xivtt (cmtt10+20 at 14.0pt) e

Seems to work with change file showfont.ch coming directly
after after hz.ch.

Patch only roughly tested with pdfetex, likely to give
problems with pdfxtex, as the variable numbering might
differ. Log format to be agreed upon...

Regards, Hartmut


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=304&group_id=106

From oberdiek at uni-freiburg.de  Mon Sep  4 08:58:46 2006
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Mon, 4 Sep 2006 08:58:46 +0200
Subject: [NTG-pdftex] [CTAN] pax v0.1
In-Reply-To: <Pine.LNX.4.64.0609031824280.3098@hahepc1.hahe>
References: <68c491a60609030906v1526e6c1tb746eda7d7be2ffb@mail.gmail.com>
	<Pine.LNX.4.64.0609031824280.3098@hahepc1.hahe>
Message-ID: <20060904065845.GA11797@irwin.vpn.uni-freiburg.de>

On Sun, Sep 03, 2006 at 06:26:46PM +0200, Hartmut Henkel wrote:

> On Sun, 3 Sep 2006, Martin Schr?der wrote:
> 
> > ---------- Forwarded message ----------
> > Subject: CTAN has a new package: pax v0.1

v0.1b that fixes a bug is on its way to CTAN.

> PAX(1)                            BSD General Commands Manual                           PAX(1)
> 
> NAME
>      pax -- read and write file archives and copy directory hierarchies
> 
> maybe better avoid the name clash?

pax.sty and pax.jar do not conflict, they are not invoked as
commands. In README I haven't given a name for the wrapper
script, perhaps it can be named after the main Java class
"PDFAnnotExtractor", a shorter name might be "pdf-pax".
Are there better suggestions?

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>
-- 

From kakuto at fsci.fuk.kindai.ac.jp  Mon Sep  4 10:19:52 2006
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Mon, 04 Sep 2006 17:19:52 +0900
Subject: [NTG-pdftex] itshape in beta-20060829-2.2
Message-ID: <200609040819.k848JrXb028026@jupiter.fsci.fuk.kindai.ac.jp>

Hi,

Is the following example ok in Linux in beta-20060829 ?

\documentclass{article}
\begin{document}
\textit{This is a test.}
\end{document}

In W32TeX version, pdflatex crashes.
Maybe that is a bug in W32 only. I will investigate ASAP.

Thanks,
Akira

From martin at oneiros.de  Mon Sep  4 11:40:40 2006
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Mon, 4 Sep 2006 11:40:40 +0200
Subject: [NTG-pdftex] itshape in beta-20060829-2.2
In-Reply-To: <200609040819.k848JrXb028026@jupiter.fsci.fuk.kindai.ac.jp>
References: <200609040819.k848JrXb028026@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <68c491a60609040240j692b3a65vbabc09c76e448a1f@mail.gmail.com>

2006/9/4, Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp>:
> Is the following example ok in Linux in beta-20060829 ?

Works for me:

This is pdfTeX, Version 3.141592-1.40.0-beta-20060829 (Web2C 7.5.5)
entering extended mode
(./textit.tex
LaTeX2e <2005/12/01>
Babel <v3.8h> and hyphenation patterns for american, french, german, ngerman, b
ahasa, basque, bulgarian, catalan, croatian, czech, danish, dutch, esperanto, e
stonian, finnish, greek, icelandic, irish, italian, latin, magyar, norsk, polis
h, portuges, romanian, russian, serbian, slovak, slovene, spanish, swedish, tur
kish, ukrainian, nohyphenation, loaded.
(/opt/tex/share/texmf-local/tex/latex/base/article.cls
Document Class: article 2005/09/16 v1.4f Standard LaTeX document class
(/opt/tex/share/texmf-local/tex/latex/base/size10.clo))
No file textit.aux.
[1{/home/ms/.texmf-var/fonts/map/pdftex/updmap/pdftex.map}] (./textit.aux) )</o
pt/tex/share/texmf-dist/fonts/type1/bluesky/cm/cmr10.pfb></opt/tex/share/texmf-
dist/fonts/type1/bluesky/cm/cmti10.pfb>
Output written on textit.pdf (1 page, 7140 bytes).
Transcript written on textit.log.

From kakuto at fsci.fuk.kindai.ac.jp  Mon Sep  4 14:19:47 2006
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Mon, 04 Sep 2006 21:19:47 +0900
Subject: [NTG-pdftex] itshape in beta-20060829-2.2
In-Reply-To: Your message of "Mon, 4 Sep 2006 11:40:40 +0200"
References: <68c491a60609040240j692b3a65vbabc09c76e448a1f@mail.gmail.com>
Message-ID: <200609041219.k84CJmOm028916@jupiter.fsci.fuk.kindai.ac.jp>

> 2006/9/4, Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp>:
> > Is the following example ok in Linux in beta-20060829 ?
> 
> Works for me:

Thanks. I think I've fixed the W32 bug.

Best regards,
Akira

From mh at homolog.de  Tue Sep  5 22:46:54 2006
From: mh at homolog.de (Mark Henning)
Date: Tue, 05 Sep 2006 22:46:54 +0200
Subject: [NTG-pdftex] Protrusion: Bug and feature suggestion
Message-ID: <ngorf21q1thnuu9trl3q7tlt4f8ksjb6p4@4ax.com>

I think, there is a bug in the protrusion feature. Try this LATEX
example (I used pdfeTeX, Version 3.141592-1.30.6-2.2 (MiKTeX 2.5)
(preloaded format=pdflatex 2006.8.25), but other versions show this
problem as well):



\documentclass{article}
\usepackage{microtype}

\begin{document}
\begin{itemize}
\item --E\\--E\\--E
\end{itemize}
\end{document}



The first "--E" is not protruded. This may be reasonable from pdfTeX's
point of view, as it is not the beginning of a line due to the leading
char printed by the \item command. Nevertheless, for the human reader
it is the beginning of a line. Maybe there are more situations where
this happens than the first line of an item in the itemize environment
as shown in this example.

While thinking about a way to solve this, I got an idea: What about a
"general protrusion" feature which protrudes each character which is
at the begin of a line or follows a horizontal space of any kind? (In
analogy: apply the same to each character which is at the end of a
line or is followed by a horizontal space.)

This would solve any protrusion issues as for example the first
indented line of a paragraph (already solved by another workaround),
the above mentioned first line of an \item and all other similar
situations, which are currently unknown. Furthermore, this would give
a new feature, which could improve the look enormously:

The protrusion feature levels out differences in the gray-intensity at
the left or right side of characters. But for human eyes there is no
difference between the first character of a line and the first
character of a word. (The same is for the last character of a line and
the last character of a word). This could make the spaces between the
words of a line more equal, resulting in a better grayscale
distribution over the line.

This demonstrates what I mean (quick&dirty hack):



\documentclass{article}
\usepackage{microtype}

\begin{document}
This\hspace{.1cm}is\hspace{.1cm}just\hspace{.1cm}a\hspace{.1cm}demonstration\hspace{.1cm}for\hspace{.1cm}the\hspace{.1cm}general\hspace{.1cm}protrusion\hspace{.1cm}feature.

\parbox[b]{\linewidth}{This\hspace{.1cm}%
\parbox[b]{\linewidth}{is\hspace{.1cm}%
\parbox[b]{\linewidth}{just\hspace{.1cm}%
\parbox[b]{\linewidth}{a\hspace{.1cm}%
\parbox[b]{\linewidth}{demonstration\hspace{.1cm}%
\parbox[b]{\linewidth}{for\hspace{.1cm}%
\parbox[b]{\linewidth}{the\hspace{.1cm}%
\parbox[b]{\linewidth}{general\hspace{.1cm}%
\parbox[b]{\linewidth}{protrusion\hspace{.1cm}%
\parbox[b]{\linewidth}{feature.%
}}}}}}}}}}%I know: Bad code; just ignore the warnings coming here...
\end{document}



Bis dann,

- Mark

-- 
Wir lieben die Grenzerfahrung. Und wenn's scharf ist. Und
damit meinen wir *richtig* scharf. Und keine Zungenpuderei...

www.chili-fraktion.de

From noreply at sarovar.org  Thu Sep  7 10:35:44 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 07 Sep 2006 14:05:44 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-603 ] Patch ColorStackTransformMatrix
Message-ID: <E1GLFMO-0006PN-00@sarovar.org>

Patches item #603, was opened at 2006-09-07 10:35
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=603&group_id=106

Category: None
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Heiko Oberdiek (oberdiek)
Assigned to: Nobody (None)
Summary: Patch ColorStackTransformMatrix

Initial Comment:
Subject: Patch ColorStackTransformMatrix
Date: 2006/09/07
Author: Heiko Oberdiek

The patch is based on pdftex-1.40.0-beta-20060906

It tries to solve two FAQ problems:
* missing color stack
* wrong annotation rectangles (links, anchors)
  if the material was scaled or rotated.

Files:
  ColorStackTransformMatrix.patch
    The patch, apply it in src/texk/web2c/pdftexdir:
    patch <ColorStackTransformMatrix.patch
  pdftex.def
    A modified version that uses the patch if the
    new primitives are found.

A short test file:

\documentclass{article}
\usepackage{color}
\usepackage{pdflscape}
\usepackage{hyperref}
\begin{document}
\tableofcontents
\section{Hello World}
\label{sec:hello}
\textcolor{blue}{Blue\newpage Blue}
\begin{landscape}
See \autoref{sec:hello}.
\end{landscape}
\end{document}

Without the patch:
* Text on first page before "Blue" is blue instead of
black.
* Text on second page is black instead of blue.
* The link frame on page three is misplaced.
With the patch and modified pdftex.def these things are
fixed.

New commands
  % color stack
    * \pdfcolorstackinit
    * \pdfcolorstack
  % matrix transformations
    * \pdfsetmatrix
    * \pdfsave
    * \pdfrestore

Syntax:

  %% expandable commands:
  \pdfcolorstackinit [page] [direct] <general text>

  %% general commands:
  \pdfcolorstack <stack number> <stack action> <general
text>
  \pdfsetmatrix
  \pdfsave
  \pdfrestore

  <stack action> ::= set | push | pop | current
Description for color stack:

  This color stack implementation allows several
  independent stacks (upto 32686):
  * Stacks can be used for other properties than color,
    especially other graphics state parameters.
  * Several "text flows across pages" can be supported
    by color stacks.
    Example: footnotes.

  \pdfcolorstackinit [page] [direct] {<initial value>}
    A stack is initialized by \pdfcolorstackinit. It
    expands to the number of the new stack. The common
    case, the traditinal color stack is already
    initialized as first stack:
      \pdfcolorstackinit page direct {0 g 0 G}
    The keyword "page" means, that this stack is page
    based. At the start of the new page, the current
    stack value is automatically set:
      \textcolor{blue}{A\newpage B}
    The second page with "B" will start with blue
    setting.
    The keyword "direct" has the same meaning as
    "direct" for \pdfliteral.
    If the stack value is set, it is done by an
    equivalent of
      \pdfliteral direct {...}.
    The mandatory argument is the initial value on the
    stack. It should be the default at page start for
    the property, see PDF documentation.

  \pdfcolorstack <stack number> push {<new color>}
    pushes the current value on the stack and sets the
    <new color>.
  \pdfcolorstack <stack number> pop
    pops and sets the current stack value.
  \pdfcolorstack <stack number> current   
    sets the current stack value without changing the
    stack. This is useful for stacks that are
    initialized without keyword "page".
    Thus the page start setting can be set manually.
  \pdfcolorstack <stack number> set {<new color>}   
    The current value is set to <new color>.

  Example (changed pdftex.def):

  \chardef\GPT at colorstack=0 %
  \def\set at color{%
    \pdfcolorstack\GPT at colorstack push{\current at color}%
    \aftergroup\reset at color
  }%
  \def\reset at color{%
    \pdfcolorstack\GPT at colorstack pop\relax
  }%

  If someone wants to add color stack support for
  footnotes, the principle would be:
    \edef\stackfootnote{\pdfcolorstackinit direct{0 g 0
G}}%
    % Then at begin of the footnote area on the page:
    \pdfcolorstack\stackfoonote current\relax
    % During footnote processing the footnote stack is
used:
    \let\GPT at colorstack\stackfoonote

Description for matrix transformations:

  Currently matrix changes are done and hidden inside
  \pdfliteral nodes; pdfTeX doesn't parse its contents
  and does not know the new settings of the transform
  matrix. Thus the patch adds new primitives to save
  pdfTeX from parsing \pdfliteral contents and to
  notify pdfTeX about matrix changes to use them in
  calculating link and anchor positions.

  \pdfsetmatrix{<a> <b> <c> <d>}
    is the equivalent to
    \pdfliteral{<a> <b> <c> <d> 0 0 cm}
  \pdfsave
    is the equivalent to \pdfliteral{q}
  \pdfrestore
    is the equivalent to \pdfliteral{Q}

  Some remarks:
  * TeX already supports translations, thus the matrix
    is limited to four values for scaling and rotating.
  * There are some restrictions about \pdfsave and
    \pdfrestore:
    * They must be properly nested.
    * A pair must start and end in the same group at
      the same level.
    * A pair must start and end at the same position.
    Happily these restrictions are satisfied by the
    graphics package.

  Example (changed pdftex.def):
    \def\Grot at start{%
      \pdfsave
      \pdfsetmatrix{%
        \Grot at cos\space\Grot at sin\space
        \if-\Grot at sin\else-\Grot at sin\fi\space\Grot at cos
      }%
      \wd\z@\z@
    }%
    \def\Grot at end{\pdfrestore}
    \def\Gscale at start{%
      \pdfsave
      \pdfsetmatrix{%
        \Gscale at x\space0 0 \Gscale at y
      }%
    }%  

Have fun
  Heiko <oberdiek at uni-freiburg.de>


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=603&group_id=106

From noreply at sarovar.org  Tue Sep 12 16:06:48 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 12 Sep 2006 19:36:48 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-603 ] Patch ColorStackTransformMatrix
Message-ID: <E1GN8uW-00032P-00@sarovar.org>

Patches item #603, was opened at 2006-09-07 10:35
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=603&group_id=106

>Category: Primitives
Group: v1.40.0
Status: Open
Resolution: None
>Priority: 8
Submitted By: Heiko Oberdiek (oberdiek)
>Assigned to: Martin Schr?der (oneiros)
Summary: Patch ColorStackTransformMatrix

Initial Comment:
Subject: Patch ColorStackTransformMatrix
Date: 2006/09/07
Author: Heiko Oberdiek

The patch is based on pdftex-1.40.0-beta-20060906

It tries to solve two FAQ problems:
* missing color stack
* wrong annotation rectangles (links, anchors)
  if the material was scaled or rotated.

Files:
  ColorStackTransformMatrix.patch
    The patch, apply it in src/texk/web2c/pdftexdir:
    patch <ColorStackTransformMatrix.patch
  pdftex.def
    A modified version that uses the patch if the
    new primitives are found.

A short test file:

\documentclass{article}
\usepackage{color}
\usepackage{pdflscape}
\usepackage{hyperref}
\begin{document}
\tableofcontents
\section{Hello World}
\label{sec:hello}
\textcolor{blue}{Blue\newpage Blue}
\begin{landscape}
See \autoref{sec:hello}.
\end{landscape}
\end{document}

Without the patch:
* Text on first page before "Blue" is blue instead of
black.
* Text on second page is black instead of blue.
* The link frame on page three is misplaced.
With the patch and modified pdftex.def these things are
fixed.

New commands
  % color stack
    * \pdfcolorstackinit
    * \pdfcolorstack
  % matrix transformations
    * \pdfsetmatrix
    * \pdfsave
    * \pdfrestore

Syntax:

  %% expandable commands:
  \pdfcolorstackinit [page] [direct] <general text>

  %% general commands:
  \pdfcolorstack <stack number> <stack action> <general
text>
  \pdfsetmatrix
  \pdfsave
  \pdfrestore

  <stack action> ::= set | push | pop | current
Description for color stack:

  This color stack implementation allows several
  independent stacks (upto 32686):
  * Stacks can be used for other properties than color,
    especially other graphics state parameters.
  * Several "text flows across pages" can be supported
    by color stacks.
    Example: footnotes.

  \pdfcolorstackinit [page] [direct] {<initial value>}
    A stack is initialized by \pdfcolorstackinit. It
    expands to the number of the new stack. The common
    case, the traditinal color stack is already
    initialized as first stack:
      \pdfcolorstackinit page direct {0 g 0 G}
    The keyword "page" means, that this stack is page
    based. At the start of the new page, the current
    stack value is automatically set:
      \textcolor{blue}{A\newpage B}
    The second page with "B" will start with blue
    setting.
    The keyword "direct" has the same meaning as
    "direct" for \pdfliteral.
    If the stack value is set, it is done by an
    equivalent of
      \pdfliteral direct {...}.
    The mandatory argument is the initial value on the
    stack. It should be the default at page start for
    the property, see PDF documentation.

  \pdfcolorstack <stack number> push {<new color>}
    pushes the current value on the stack and sets the
    <new color>.
  \pdfcolorstack <stack number> pop
    pops and sets the current stack value.
  \pdfcolorstack <stack number> current   
    sets the current stack value without changing the
    stack. This is useful for stacks that are
    initialized without keyword "page".
    Thus the page start setting can be set manually.
  \pdfcolorstack <stack number> set {<new color>}   
    The current value is set to <new color>.

  Example (changed pdftex.def):

  \chardef\GPT at colorstack=0 %
  \def\set at color{%
    \pdfcolorstack\GPT at colorstack push{\current at color}%
    \aftergroup\reset at color
  }%
  \def\reset at color{%
    \pdfcolorstack\GPT at colorstack pop\relax
  }%

  If someone wants to add color stack support for
  footnotes, the principle would be:
    \edef\stackfootnote{\pdfcolorstackinit direct{0 g 0
G}}%
    % Then at begin of the footnote area on the page:
    \pdfcolorstack\stackfoonote current\relax
    % During footnote processing the footnote stack is
used:
    \let\GPT at colorstack\stackfoonote

Description for matrix transformations:

  Currently matrix changes are done and hidden inside
  \pdfliteral nodes; pdfTeX doesn't parse its contents
  and does not know the new settings of the transform
  matrix. Thus the patch adds new primitives to save
  pdfTeX from parsing \pdfliteral contents and to
  notify pdfTeX about matrix changes to use them in
  calculating link and anchor positions.

  \pdfsetmatrix{<a> <b> <c> <d>}
    is the equivalent to
    \pdfliteral{<a> <b> <c> <d> 0 0 cm}
  \pdfsave
    is the equivalent to \pdfliteral{q}
  \pdfrestore
    is the equivalent to \pdfliteral{Q}

  Some remarks:
  * TeX already supports translations, thus the matrix
    is limited to four values for scaling and rotating.
  * There are some restrictions about \pdfsave and
    \pdfrestore:
    * They must be properly nested.
    * A pair must start and end in the same group at
      the same level.
    * A pair must start and end at the same position.
    Happily these restrictions are satisfied by the
    graphics package.

  Example (changed pdftex.def):
    \def\Grot at start{%
      \pdfsave
      \pdfsetmatrix{%
        \Grot at cos\space\Grot at sin\space
        \if-\Grot at sin\else-\Grot at sin\fi\space\Grot at cos
      }%
      \wd\z@\z@
    }%
    \def\Grot at end{\pdfrestore}
    \def\Gscale at start{%
      \pdfsave
      \pdfsetmatrix{%
        \Gscale at x\space0 0 \Gscale at y
      }%
    }%  

Have fun
  Heiko <oberdiek at uni-freiburg.de>


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-09-12 16:06

Message:
Logged In: YES 
user_id=421

Heiko,
thank you very much for your patch. 

Two questions come to mind:
- how does this patch interact with existing documents, i.e.
what must be changed when using this patch? Obviously the
use of \pdfliteral must be checked. Anything else?
- does this collide with pdftex's use of the cm? The only
use of the transformation matrix by pdftex I could find
concerns magnifications, so that's most likely not a problem.

Btw: gcc with -Wall -std=c99 gives this warning:
../../../../src/texk/web2c/pdftexdir/utils.c: In function
?newcolorstack?:
../../../../src/texk/web2c/pdftexdir/utils.c:1366: warning:
operation on ?colstacks? may be undefined

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=603&group_id=106

From noreply at sarovar.org  Tue Sep 12 16:38:34 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 12 Sep 2006 20:08:34 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-603 ] Patch ColorStackTransformMatrix
Message-ID: <E1GN9PG-0004jN-00@sarovar.org>

Patches item #603, was opened at 2006-09-07 10:35
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=603&group_id=106

Category: Primitives
Group: v1.40.0
Status: Open
Resolution: None
Priority: 8
Submitted By: Heiko Oberdiek (oberdiek)
Assigned to: Martin Schr?der (oneiros)
Summary: Patch ColorStackTransformMatrix

Initial Comment:
Subject: Patch ColorStackTransformMatrix
Date: 2006/09/07
Author: Heiko Oberdiek

The patch is based on pdftex-1.40.0-beta-20060906

It tries to solve two FAQ problems:
* missing color stack
* wrong annotation rectangles (links, anchors)
  if the material was scaled or rotated.

Files:
  ColorStackTransformMatrix.patch
    The patch, apply it in src/texk/web2c/pdftexdir:
    patch <ColorStackTransformMatrix.patch
  pdftex.def
    A modified version that uses the patch if the
    new primitives are found.

A short test file:

\documentclass{article}
\usepackage{color}
\usepackage{pdflscape}
\usepackage{hyperref}
\begin{document}
\tableofcontents
\section{Hello World}
\label{sec:hello}
\textcolor{blue}{Blue\newpage Blue}
\begin{landscape}
See \autoref{sec:hello}.
\end{landscape}
\end{document}

Without the patch:
* Text on first page before "Blue" is blue instead of
black.
* Text on second page is black instead of blue.
* The link frame on page three is misplaced.
With the patch and modified pdftex.def these things are
fixed.

New commands
  % color stack
    * \pdfcolorstackinit
    * \pdfcolorstack
  % matrix transformations
    * \pdfsetmatrix
    * \pdfsave
    * \pdfrestore

Syntax:

  %% expandable commands:
  \pdfcolorstackinit [page] [direct] <general text>

  %% general commands:
  \pdfcolorstack <stack number> <stack action> <general
text>
  \pdfsetmatrix
  \pdfsave
  \pdfrestore

  <stack action> ::= set | push | pop | current
Description for color stack:

  This color stack implementation allows several
  independent stacks (upto 32686):
  * Stacks can be used for other properties than color,
    especially other graphics state parameters.
  * Several "text flows across pages" can be supported
    by color stacks.
    Example: footnotes.

  \pdfcolorstackinit [page] [direct] {<initial value>}
    A stack is initialized by \pdfcolorstackinit. It
    expands to the number of the new stack. The common
    case, the traditinal color stack is already
    initialized as first stack:
      \pdfcolorstackinit page direct {0 g 0 G}
    The keyword "page" means, that this stack is page
    based. At the start of the new page, the current
    stack value is automatically set:
      \textcolor{blue}{A\newpage B}
    The second page with "B" will start with blue
    setting.
    The keyword "direct" has the same meaning as
    "direct" for \pdfliteral.
    If the stack value is set, it is done by an
    equivalent of
      \pdfliteral direct {...}.
    The mandatory argument is the initial value on the
    stack. It should be the default at page start for
    the property, see PDF documentation.

  \pdfcolorstack <stack number> push {<new color>}
    pushes the current value on the stack and sets the
    <new color>.
  \pdfcolorstack <stack number> pop
    pops and sets the current stack value.
  \pdfcolorstack <stack number> current   
    sets the current stack value without changing the
    stack. This is useful for stacks that are
    initialized without keyword "page".
    Thus the page start setting can be set manually.
  \pdfcolorstack <stack number> set {<new color>}   
    The current value is set to <new color>.

  Example (changed pdftex.def):

  \chardef\GPT at colorstack=0 %
  \def\set at color{%
    \pdfcolorstack\GPT at colorstack push{\current at color}%
    \aftergroup\reset at color
  }%
  \def\reset at color{%
    \pdfcolorstack\GPT at colorstack pop\relax
  }%

  If someone wants to add color stack support for
  footnotes, the principle would be:
    \edef\stackfootnote{\pdfcolorstackinit direct{0 g 0
G}}%
    % Then at begin of the footnote area on the page:
    \pdfcolorstack\stackfoonote current\relax
    % During footnote processing the footnote stack is
used:
    \let\GPT at colorstack\stackfoonote

Description for matrix transformations:

  Currently matrix changes are done and hidden inside
  \pdfliteral nodes; pdfTeX doesn't parse its contents
  and does not know the new settings of the transform
  matrix. Thus the patch adds new primitives to save
  pdfTeX from parsing \pdfliteral contents and to
  notify pdfTeX about matrix changes to use them in
  calculating link and anchor positions.

  \pdfsetmatrix{<a> <b> <c> <d>}
    is the equivalent to
    \pdfliteral{<a> <b> <c> <d> 0 0 cm}
  \pdfsave
    is the equivalent to \pdfliteral{q}
  \pdfrestore
    is the equivalent to \pdfliteral{Q}

  Some remarks:
  * TeX already supports translations, thus the matrix
    is limited to four values for scaling and rotating.
  * There are some restrictions about \pdfsave and
    \pdfrestore:
    * They must be properly nested.
    * A pair must start and end in the same group at
      the same level.
    * A pair must start and end at the same position.
    Happily these restrictions are satisfied by the
    graphics package.

  Example (changed pdftex.def):
    \def\Grot at start{%
      \pdfsave
      \pdfsetmatrix{%
        \Grot at cos\space\Grot at sin\space
        \if-\Grot at sin\else-\Grot at sin\fi\space\Grot at cos
      }%
      \wd\z@\z@
    }%
    \def\Grot at end{\pdfrestore}
    \def\Gscale at start{%
      \pdfsave
      \pdfsetmatrix{%
        \Gscale at x\space0 0 \Gscale at y
      }%
    }%  

Have fun
  Heiko <oberdiek at uni-freiburg.de>


----------------------------------------------------------------------

>Comment By: Heiko Oberdiek (oberdiek)
Date: 2006-09-12 16:38

Message:
Logged In: YES 
user_id=1276

| Two questions come to mind:
| - how does this patch interact with existing documents,

The design principle is that the patch does not have an
effect if the new primitives are not used (modulo bugs).

| i.e.
| what must be changed when using this patch? Obviously the
| use of \pdfliteral must be checked. Anything else?

LaTeX's color/graphics: pdftex.def that support the
new primitives.

| - does this collide with pdftex's use of the cm? The only
| use of the transformation matrix by pdftex I could find
| concerns magnifications, so that's most likely not a 
| problem.

I had played a little with magnification, but not too
intensively.

| Btw: gcc with -Wall -std=c99 gives this warning:
| ../../../../src/texk/web2c/pdftexdir/utils.c: In function
| ?newcolorstack?:
| ../../../../src/texk/web2c/pdftexdir/utils.c:1366: 
| warning:
| operation on ?colstacks? may be undefined

Assignments to colstacks are controlled by colstack_size,
thus the warnung can be gnored. To avoid the warning
replace
  static colstack_type *colstacks;
by
  static colstack_type *colstacks = NULL;

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-09-12 16:06

Message:
Logged In: YES 
user_id=421

Heiko,
thank you very much for your patch. 

Two questions come to mind:
- how does this patch interact with existing documents, i.e.
what must be changed when using this patch? Obviously the
use of \pdfliteral must be checked. Anything else?
- does this collide with pdftex's use of the cm? The only
use of the transformation matrix by pdftex I could find
concerns magnifications, so that's most likely not a problem.

Btw: gcc with -Wall -std=c99 gives this warning:
../../../../src/texk/web2c/pdftexdir/utils.c: In function
?newcolorstack?:
../../../../src/texk/web2c/pdftexdir/utils.c:1366: warning:
operation on ?colstacks? may be undefined

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=603&group_id=106

From noreply at sarovar.org  Wed Sep 13 17:49:50 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 13 Sep 2006 21:19:50 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-605 ] \pdfescapestring + \pdfescapename
	are broken in beta-20060906
Message-ID: <E1GNWzm-0006i8-00@sarovar.org>

Bugs item #605, was opened at 2006-09-13 15:49
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=605&group_id=106

Category: None
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: Nobody (None)
Summary: \pdfescapestring + \pdfescapename are broken in beta-20060906

Initial Comment:
The last char of escaped characters will always be ^^0:

\def\text{P^^D (F)}
\message{\pdfescapestring{\text}}
\message{\pdfescapename {\text}}
\bye

% log output is:
% P\00^^@\04^^@\(F\)
% P#0^^@#2^^@#2^^@F#2^^@



----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=605&group_id=106

From noreply at sarovar.org  Thu Sep 14 14:36:06 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 14 Sep 2006 18:06:06 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-605 ] \pdfescapestring + \pdfescapename
	are broken in beta-20060906
Message-ID: <E1GNqRq-0001Bq-00@sarovar.org>

Bugs item #605, was opened at 2006-09-13 17:49
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=605&group_id=106

Category: None
Group: v1.40.0
Status: Open
>Resolution: Fixed
Priority: 5
Submitted By: Robert (schlcht)
>Assigned to: Martin Schr?der (oneiros)
Summary: \pdfescapestring + \pdfescapename are broken in beta-20060906

Initial Comment:
The last char of escaped characters will always be ^^0:

\def\text{P^^D (F)}
\message{\pdfescapestring{\text}}
\message{\pdfescapename {\text}}
\bye

% log output is:
% P\00^^@\04^^@\(F\)
% P#0^^@#2^^@#2^^@F#2^^@



----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-09-14 14:36

Message:
Logged In: YES 
user_id=421

Found and fixed it. The snprintfs in escapestring and
escapename were wrong. 

I'll check the other printf -> nprintf changes.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=605&group_id=106

From noreply at sarovar.org  Sat Sep 16 20:10:00 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sat, 16 Sep 2006 23:40:00 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-427 ] Character positioning patch
Message-ID: <E1GOec4-0001Q7-00@sarovar.org>

Patches item #427, was opened at 2005-09-11 12:39
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=427&group_id=106

Category: Positioning
Group: v1.30.0
>Status: Closed
Resolution: Accepted
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Hans Hagen (hagen)
Summary: Character positioning patch

Initial Comment:
Experimental patch increases resolution of /Widths
array by 1 fractional digit, makes corrections of type
")-1(" and ")1(" in the TJ array happen much less
often, particularily for CM fonts. Gives e. g. 1 % PDF
file size shrink for pdfetex web sources compiled into PDF.

Rough patch only, not for production. Testing welcome.

Regards, Hartmut

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2006-09-16 20:09

Message:
Logged In: YES 
user_id=929

this is in pdftex 1.40.0

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-10-09 15:06

Message:
Logged In: YES 
user_id=929

Patch extended: Now pdf_set_origin has (h, v) parameters,
simplifies pdf_begin_text procedure.

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-10-09 00:25

Message:
Logged In: YES 
user_id=929

Removed pdf_first_space_corr variable, as it seems that it
was defunct anyway: There was no pdf_end_string procedure
call (only place where something is done with
pdf_first_space_corr), where afterwards the pdf_h variable
(then modified by pdf_first_space_corr) would actually be
used. E. g. pdf_moveto uses pdf_last_h instead, and after
pdf_end_text there is anyway a pdf_set_origin call.

And pdf_begin_string gets simpler.

Testing welcome!

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-10-03 01:16

Message:
Logged In: YES 
user_id=929

patch updated: now the TJ array building in procedure
pdf_begin_string is simplified/tidied up.

Testing welcome!

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=427&group_id=106

From noreply at sarovar.org  Sat Sep 16 22:28:32 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sun, 17 Sep 2006 01:58:32 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-606 ] Forbidden ... while scanning ???
Message-ID: <E1GOgm8-0004cn-00@sarovar.org>

Bugs item #606, was opened at 2006-09-16 22:28
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=606&group_id=106

Category: Primitives
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Nobody (None)
Summary: Forbidden ... while scanning ???

Initial Comment:
\pdftrailer {abc
\bye

gives

! Forbidden control sequence found while scanning text
of \pdftrailer.

but

\pdfximage {abc
\bye

or

\pdfliteral {abc
\bye

give

! Forbidden control sequence found while scanning text
of ???.

Instead of these three question marks there should be
the name of the primitive.




----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=606&group_id=106

From zhaohscas at yahoo.com.cn  Sun Sep 17 14:28:51 2006
From: zhaohscas at yahoo.com.cn (zhaohs)
Date: Sun, 17 Sep 2006 20:28:51 +0800
Subject: [NTG-pdftex] about TrueType Font can't be embedded by use the pdftex
Message-ID: <20060917122851.GA27440@localdomain>

Dear Michael,
 You say:

##########################################
Otftotfm generates map lines that tell pdftex to embed
the TTF directly
(cool!).  Unfortunately, pdftex does not like the Version
3.0 OS/2 table
included in OpenType TTFs (boo!), so I hacked the font to
change the OS/2
version number to 2.0.  Alternately, one could recompile
pdftex, after
changing line 1026 of writettf.c to:

    if (version != 0x0000 && version != 0x0001 && version !=
0x0002 &&
version != 0x0003)
=================================================

Martin, can you please include this patch into the next
release? Thanks.
 ###########################################


   But I can't compile the pdftex 1.30.6 from source,
when I use ./build.sh in the directory pdftex-1.30.6 ,
the error message are:
   
#############################
cat: ../src/Makefile.in: No such file or directory
./build.sh: line 49: cd: texk/web2c/web2c: 
make: Nothing to be done for `all'.
./build.sh: line 50: cd: texk/web2c: 
make: *** ../kpathsea/libkpathsea.la 
#################################

   Why?
   In addition, how can I hack the font to
change the OS/2
version number to 2.0. as you hve done?
  Best,
  Hongsheng.
__________________________________________________
?
http://cn.mail.yahoo.com

From martin at oneiros.de  Sun Sep 17 15:18:48 2006
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sun, 17 Sep 2006 15:18:48 +0200
Subject: [NTG-pdftex] about TrueType Font can't be embedded by use the
	pdftex
In-Reply-To: <20060917122851.GA27440@localdomain>
References: <20060917122851.GA27440@localdomain>
Message-ID: <68c491a60609170618t2ccc55e5wcd2e46605a9d66a5@mail.gmail.com>

2006/9/17, zhaohs <zhaohscas at yahoo.com.cn>:
> Martin, can you please include this patch into the next
> release? Thanks.

It's already fixed, see bug 592:
http://sarovar.org/tracker/index.php?func=detail&aid=592&group_id=106&atid=493

Best
   Martin

From noreply at sarovar.org  Sun Sep 17 16:30:09 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sun, 17 Sep 2006 20:00:09 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-606 ] Forbidden ... while scanning ???
Message-ID: <E1GOxer-0005K7-00@sarovar.org>

Bugs item #606, was opened at 2006-09-16 22:28
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=606&group_id=106

Category: Primitives
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
>Assigned to: Hartmut Henkel (hhenkel)
Summary: Forbidden ... while scanning ???

Initial Comment:
\pdftrailer {abc
\bye

gives

! Forbidden control sequence found while scanning text
of \pdftrailer.

but

\pdfximage {abc
\bye

or

\pdfliteral {abc
\bye

give

! Forbidden control sequence found while scanning text
of ???.

Instead of these three question marks there should be
the name of the primitive.




----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-09-17 16:30

Message:
Logged In: YES 
user_id=421

The cause seems to be that some scan_functions loose the
meaning of cur_cs, which leads to the ??? when reaching
<Tell the user what has run away...@>.

The attached (IMHO crude) patch fixes this for the cases you
mentioned, but there are probably other cases not found...

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=606&group_id=106

From noreply at sarovar.org  Sun Sep 17 18:34:17 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sun, 17 Sep 2006 22:04:17 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-606 ] Forbidden ... while scanning ???
Message-ID: <E1GOzaz-0003wo-00@sarovar.org>

Bugs item #606, was opened at 2006-09-16 22:28
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=606&group_id=106

Category: Primitives
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Forbidden ... while scanning ???

Initial Comment:
\pdftrailer {abc
\bye

gives

! Forbidden control sequence found while scanning text
of \pdftrailer.

but

\pdfximage {abc
\bye

or

\pdfliteral {abc
\bye

give

! Forbidden control sequence found while scanning text
of ???.

Instead of these three question marks there should be
the name of the primitive.




----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-09-17 18:34

Message:
Logged In: YES 
user_id=421

The patch was missing. Fixed.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-09-17 16:30

Message:
Logged In: YES 
user_id=421

The cause seems to be that some scan_functions loose the
meaning of cur_cs, which leads to the ??? when reaching
<Tell the user what has run away...@>.

The attached (IMHO crude) patch fixes this for the cases you
mentioned, but there are probably other cases not found...

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=606&group_id=106

From noreply at sarovar.org  Sun Sep 17 21:10:50 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 18 Sep 2006 00:40:50 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-606 ] Forbidden ... while scanning ???
Message-ID: <E1GP22U-000600-00@sarovar.org>

Bugs item #606, was opened at 2006-09-16 22:28
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=606&group_id=106

Category: Primitives
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Forbidden ... while scanning ???

Initial Comment:
\pdftrailer {abc
\bye

gives

! Forbidden control sequence found while scanning text
of \pdftrailer.

but

\pdfximage {abc
\bye

or

\pdfliteral {abc
\bye

give

! Forbidden control sequence found while scanning text
of ???.

Instead of these three question marks there should be
the name of the primitive.




----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2006-09-17 21:10

Message:
Logged In: YES 
user_id=929

yes, the patch works, thanks a lot! But there are in fact
many more \pdf... primitives that suffer from this problem,
actually any with a scan_keyword call before the
scan_pdf_ext_toks. After the way how it's done in
@<Implement \.{\write}@>=, it seems that a new variable
save_cur_cs is not needed if one uses k for this purpose.
Needs change of a few k uses to j. But problematic is
\pdfoutline as it has another scan_pdf_ext_toks for the attr
keyword.

Wouldn't these many changes be too risky for 1.40.0?

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-09-17 18:34

Message:
Logged In: YES 
user_id=421

The patch was missing. Fixed.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-09-17 16:30

Message:
Logged In: YES 
user_id=421

The cause seems to be that some scan_functions loose the
meaning of cur_cs, which leads to the ??? when reaching
<Tell the user what has run away...@>.

The attached (IMHO crude) patch fixes this for the cases you
mentioned, but there are probably other cases not found...

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=606&group_id=106

From martin at oneiros.de  Sun Sep 17 21:31:30 2006
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sun, 17 Sep 2006 21:31:30 +0200
Subject: [NTG-pdftex] [ pdftex-Bugs-606 ] Forbidden ... while scanning
	???
In-Reply-To: <E1GP22U-000600-00@sarovar.org>
References: <E1GP22U-000600-00@sarovar.org>
Message-ID: <68c491a60609171231y5f3091f5j4f54119db683cb84@mail.gmail.com>

2006/9/17, noreply at sarovar.org <noreply at sarovar.org>:
> >Comment By: Hartmut Henkel (hhenkel)
> yes, the patch works, thanks a lot! But there are in fact
> many more \pdf... primitives that suffer from this problem,
> actually any with a scan_keyword call before the
> scan_pdf_ext_toks. After the way how it's done in

That's what I feared, and I prefer an analysis by an expert. Taco? :-)

The problem is minor, anyway.

> @<Implement \.{\write}@>=, it seems that a new variable
> save_cur_cs is not needed if one uses k for this purpose.
> Needs change of a few k uses to j. But problematic is
> \pdfoutline as it has another scan_pdf_ext_toks for the attr
> keyword.

So the problem has been with pdftex for years.

> Wouldn't these many changes be too risky for 1.40.0?

The timeframe for the release is delayed anyway: we still need to
update the manual (e.g. for \pdfdraftmode and the colorstack) and the
pdftex news is missing.

If this can be fixed easily, why wait?

Best
   Martin

From reinhard.kotucha at web.de  Tue Sep 19 23:40:22 2006
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 19 Sep 2006 23:40:22 +0200
Subject: [NTG-pdftex] [texhax] Passing Underscore
In-Reply-To: <200609191634.32077.john@wexfordpress.com>
References: <200609181638.32019.john@wexfordpress.com>
	<5.1.0.14.0.20060919071955.02a906f0@pop3.web.de>
	<17680.14544.291383.792385@zarniwoop.ms25.local>
	<200609191634.32077.john@wexfordpress.com>
Message-ID: <17680.25542.475745.651971@zarniwoop.ms25.local>

>>>>> "John" == John R Culleton <john at wexfordpress.com> writes:

  > Very interesting, although I usually rename all those (IMO silly)
  > Windows type filenames with spaces in them.

I do so as well.  It's more a GUI than a Windows problem.

  > Now what about two spaces in a row? Just curious.

I tried and it seems that there is a severe bug in pdftex.

     \input "foo    bar"

loads the file "foo bar.tex" which is certainly not desired behavior.  

I send this mail to the pdftex developers list as well.

Maybe this problem had been fixed already, I'm using 

      "This is pdfeTeXk, Version 3.141592-1.30.4-2.2 (Web2C 7.5.5)"


Regards, and thanks for the hint,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From reinhard.kotucha at web.de  Wed Sep 20 01:07:36 2006
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 20 Sep 2006 01:07:36 +0200
Subject: [NTG-pdftex] [texhax] Passing Underscore
In-Reply-To: <45106CB7.7070001@Rhul.Ac.Uk>
References: <200609181638.32019.john@wexfordpress.com>
	<5.1.0.14.0.20060919071955.02a906f0@pop3.web.de>
	<17680.14544.291383.792385@zarniwoop.ms25.local>
	<200609191634.32077.john@wexfordpress.com>
	<17680.25542.475745.651971@zarniwoop.ms25.local>
	<45106CB7.7070001@Rhul.Ac.Uk>
Message-ID: <17680.30776.268387.489641@zarniwoop.ms25.local>

>>>>> "Philip" == Philip TAYLOR <P.Taylor at rhul.ac.uk> writes:

  > Well, it may not be "desired", but it's certainly consistent with
  > TeX's underlying scanner/parser, which will have already elided
  > multiple spaces into a single space before \input gets a chance to
  > see things.  If you change TeX's behaviour here, you really are
  > getting away from TeX as a consistent platform, and in grave
  > danger of creating a chimera, which I don't think is actually your
  > intention or your desire ...

Nobody forces you to use double quotes.  TeX still works as it did 20
years ago.  Why do we need a TeX parser to process filenames?  What is
the advantage if files are inaccessible?

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From P.Taylor at Rhul.Ac.Uk  Wed Sep 20 00:18:31 2006
From: P.Taylor at Rhul.Ac.Uk (Philip TAYLOR)
Date: Tue, 19 Sep 2006 23:18:31 +0100
Subject: [NTG-pdftex] [texhax] Passing Underscore
In-Reply-To: <17680.25542.475745.651971@zarniwoop.ms25.local>
References: <200609181638.32019.john@wexfordpress.com>	<5.1.0.14.0.20060919071955.02a906f0@pop3.web.de>	<17680.14544.291383.792385@zarniwoop.ms25.local>	<200609191634.32077.john@wexfordpress.com>
	<17680.25542.475745.651971@zarniwoop.ms25.local>
Message-ID: <45106CB7.7070001@Rhul.Ac.Uk>



Reinhard Kotucha wrote:

>>>>>>"John" == John R Culleton <john at wexfordpress.com> writes:
> 
> 
>   > Very interesting, although I usually rename all those (IMO silly)
>   > Windows type filenames with spaces in them.
> 
> I do so as well.  It's more a GUI than a Windows problem.
> 
>   > Now what about two spaces in a row? Just curious.
> 
> I tried and it seems that there is a severe bug in pdftex.
> 
>      \input "foo    bar"
> 
> loads the file "foo bar.tex" which is certainly not desired behavior. 

Well, it may not be "desired", but it's certainly consistent with
TeX's underlying scanner/parser, which will have already elided
multiple spaces into a single space before \input gets
a chance to see things.  If you change TeX's behaviour here,
you really are getting away from TeX as a consistent platform,
and in grave danger of creating a chimera, which I don't think
is actually your intention or your desire ...

** Phil.

From taco at elvenkind.com  Wed Sep 20 08:16:08 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 20 Sep 2006 08:16:08 +0200
Subject: [NTG-pdftex] [texhax] Passing Underscore
In-Reply-To: <17680.25542.475745.651971@zarniwoop.ms25.local>
References: <200609181638.32019.john@wexfordpress.com>	<5.1.0.14.0.20060919071955.02a906f0@pop3.web.de>	<17680.14544.291383.792385@zarniwoop.ms25.local>	<200609191634.32077.john@wexfordpress.com>
	<17680.25542.475745.651971@zarniwoop.ms25.local>
Message-ID: <4510DCA8.5030608@elvenkind.com>


Hi,

Reinhard Kotucha wrote:
>>>>>>"John" == John R Culleton <john at wexfordpress.com> writes:
> 
> 
>   > Very interesting, although I usually rename all those (IMO silly)
>   > Windows type filenames with spaces in them.
> 
> I do so as well.  It's more a GUI than a Windows problem.
> 
>   > Now what about two spaces in a row? Just curious.
> 
> I tried and it seems that there is a severe bug in pdftex.

>      \input "foo    bar"

It would be a severe bug if the documentation said this would
work and it did not, but that is not the case. As it stands,
this is a documented limitation: multiple consecutive spaces
are always collapsed into one.

There is no easy way to extend pdftex, because the token
scanning routines do not know exactly when a filename is being
read. Consider, for instance, \LaTeX's \include command, that
accepts a filename as an argument, and could itself be part
of a macro expansion.

That said, pdftex *can* read files with multiple spaces in them,
if you are able to intercept the tokenizer fast enough.

either
   \catcode`\ =12\relax\input"foo    bar"\catcode`\ =10\relax
or
      {\catcode`\ =12\gdef\notaspace{ }}
      \input"a\notaspace\notaspace b"
works fine.

Cheers,

Taco





From oberdiek at uni-freiburg.de  Wed Sep 20 13:41:02 2006
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Wed, 20 Sep 2006 13:41:02 +0200
Subject: [NTG-pdftex] [texhax] Passing Underscore
In-Reply-To: <4510DCA8.5030608@elvenkind.com>
References: <200609181638.32019.john@wexfordpress.com>
	<5.1.0.14.0.20060919071955.02a906f0@pop3.web.de>
	<17680.14544.291383.792385@zarniwoop.ms25.local>
	<200609191634.32077.john@wexfordpress.com>
	<17680.25542.475745.651971@zarniwoop.ms25.local>
	<4510DCA8.5030608@elvenkind.com>
Message-ID: <20060920114102.GB12242@irwin.vpn.uni-freiburg.de>

On Wed, Sep 20, 2006 at 08:16:08AM +0200, Taco Hoekwater wrote:

> That said, pdftex *can* read files with multiple spaces in them,
> if you are able to intercept the tokenizer fast enough.
> 
> either
>    \catcode`\ =12\relax\input"foo    bar"\catcode`\ =10\relax
> or
>       {\catcode`\ =12\gdef\notaspace{ }}
>       \input"a\notaspace\notaspace b"
> works fine.

or

  \input "a \space b"
  \pdfximage{a \space b.png}

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>
-- 

From oberdiek at uni-freiburg.de  Wed Sep 20 13:33:33 2006
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Wed, 20 Sep 2006 13:33:33 +0200
Subject: [NTG-pdftex] [texhax] Passing Underscore
In-Reply-To: <45106CB7.7070001@Rhul.Ac.Uk>
References: <200609181638.32019.john@wexfordpress.com>
	<5.1.0.14.0.20060919071955.02a906f0@pop3.web.de>
	<17680.14544.291383.792385@zarniwoop.ms25.local>
	<200609191634.32077.john@wexfordpress.com>
	<17680.25542.475745.651971@zarniwoop.ms25.local>
	<45106CB7.7070001@Rhul.Ac.Uk>
Message-ID: <20060920113332.GA12242@irwin.vpn.uni-freiburg.de>

On Tue, Sep 19, 2006 at 11:18:31PM +0100, Philip TAYLOR wrote:

> Reinhard Kotucha wrote:
> 
> >>>>>>"John" == John R Culleton <john at wexfordpress.com> writes:
> > 
> > 
> >   > Very interesting, although I usually rename all those (IMO silly)
> >   > Windows type filenames with spaces in them.
> > 
> > I do so as well.  It's more a GUI than a Windows problem.
> > 
> >   > Now what about two spaces in a row? Just curious.
> > 
> > I tried and it seems that there is a severe bug in pdftex.
> > 
> >      \input "foo    bar"
> > 
> > loads the file "foo bar.tex" which is certainly not desired behavior. 
> 
> Well, it may not be "desired", but it's certainly consistent with
> TeX's underlying scanner/parser, which will have already elided
> multiple spaces into a single space before \input gets
> a chance to see things.  If you change TeX's behaviour here,
> you really are getting away from TeX as a consistent platform,

The syntax with quotes already excludes legal file names
on many file systems and operating systems, where quotes
are legal characters in file names. Therefore the quote extension
isn't a refinement of \input's syntax. It would be much better
to have separate primitives that uses <general text> for file
names as done in \pdfximage. Also it would be easy to test,
whether the new primitives are present. I don't know a
reliable way to test the supported syntax of \input.

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>
-- 

From will.adams at frycomm.com  Wed Sep 20 14:49:19 2006
From: will.adams at frycomm.com (William Adams)
Date: Wed, 20 Sep 2006 08:49:19 -0400
Subject: [NTG-pdftex] [texhax]   Passing Underscore
In-Reply-To: <4510DCA8.5030608@elvenkind.com>
References: <200609181638.32019.john@wexfordpress.com>	<5.1.0.14.0.20060919071955.02a906f0@pop3.web.de>	<17680.14544.291383.792385@zarniwoop.ms25.local>	<200609191634.32077.john@wexfordpress.com>
	<17680.25542.475745.651971@zarniwoop.ms25.local>
	<4510DCA8.5030608@elvenkind.com>
Message-ID: <4AD0B202-0E60-49D1-9784-0F250D4375C4@frycomm.com>

On Sep 20, 2006, at 2:16 AM, Taco Hoekwater wrote:

> It would be a severe bug if the documentation said this would
> work and it did not, but that is not the case. As it stands,
> this is a documented limitation: multiple consecutive spaces
> are always collapsed into one.

FWIW, I find the rules for handling filenames arcane enough that in a  
recent project[1], rather than try to sort out all of the special  
cases, I transferred all of the filenames into a spreadsheet (they  
had to be preserved) then duped them, then massaged the duped column  
so as to normalize it to something TeX could easily handle, used a  
utility (File Wrangler) to do the same to a duplicate set of the  
files, then wrapped everything up in a TeX macro which typeset the  
unmodified filename in a verbatim environment and used the modified  
filename to pull in the graphic and print it on the same page as the  
typeset filename at 90% of its original size.

William

[1] reprinting a ~7,000 pg. government handbook where all the pages  
were provided as single page .pdf files.

-- 
William Adams
senior graphic designer
Fry Communications



This email message and any files transmitted with it contain information
which is confidential and intended only for the addressee(s). If you are
not the intended recipient(s), any usage,  dissemination, disclosure, or
action taken in  reliance on it is prohibited.  The reliability of  this
method of communication cannot be guaranteed.  Email can be intercepted,
corrupted, delayed, incompletely transmitted, virus-laden,  or otherwise
affected during transmission. Reasonable steps have been taken to reduce
the risk of viruses, but we cannot accept liability for damage sustained
as a result of this message. If you have received this message in error,
please immediately delete it and all copies of it and notify the sender.

From P.Taylor at Rhul.Ac.Uk  Wed Sep 20 15:58:09 2006
From: P.Taylor at Rhul.Ac.Uk (Philip TAYLOR)
Date: Wed, 20 Sep 2006 14:58:09 +0100
Subject: [NTG-pdftex] Passing Underscore
Message-ID: <451148F1.2000500@Rhul.Ac.Uk>


-------------- next part --------------
An embedded message was scrubbed...
From: Philip TAYLOR <P.Taylor at Rhul.Ac.Uk>
Subject: Re: [texhax] Passing Underscore
Date: Wed, 20 Sep 2006 00:20:21 +0100
Size: 1991
Url: http://www.ntg.nl/pipermail/ntg-pdftex/attachments/20060920/54e5252e/attachment.mht 

From P.Taylor at Rhul.Ac.Uk  Wed Sep 20 16:03:03 2006
From: P.Taylor at Rhul.Ac.Uk (Philip TAYLOR)
Date: Wed, 20 Sep 2006 15:03:03 +0100
Subject: [NTG-pdftex] Since "An embedded message was scrubbed...",
	I repeat it inline !
Message-ID: <45114A17.7000807@Rhul.Ac.Uk>



Reinhard Kotucha wrote:

 > Nobody forces you to use double quotes.  TeX still works as it did 20
 > years ago.  Why do we need a TeX parser to process filenames?

We don't.  But we do need to know how TeX operates, and in this
context it is a many-layered operation.  Scanning, parsing and
tokenization all take place, as do execution and expansion, and
with (I think) the sole exception of \lowercase and \uppercase
(which are /horribly/ anomalous), each phase is quite distinct
from the other.  What you are suggesting (if I understand you
correctly) would make \input even more anomalous than \...case,
and that would (I believe) be a very retrograde step in the
evolution of (derivates of) TeX.

 >  What is the advantage if files are inaccessible?

They are not.  It is not impossible (or even outrageously
difficult) to construct a control sequence that will expand
to "foo<space><space>bar"; what /cannot/ be achieved is for
"foo<space><space>bar" to appear in the input stream with
normal catcodes and for the two spaces to still be there
after the scanner has performed its function.

** Phil.

From noreply at sarovar.org  Thu Sep 21 14:22:18 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 21 Sep 2006 17:52:18 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-606 ] Forbidden ... while scanning ???
Message-ID: <E1GQNZK-00065E-00@sarovar.org>

Bugs item #606, was opened at 2006-09-16 22:28
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=606&group_id=106

Category: Primitives
Group: v1.40.0
Status: Open
>Resolution: Accepted
>Priority: 3
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Forbidden ... while scanning ???

Initial Comment:
\pdftrailer {abc
\bye

gives

! Forbidden control sequence found while scanning text
of \pdftrailer.

but

\pdfximage {abc
\bye

or

\pdfliteral {abc
\bye

give

! Forbidden control sequence found while scanning text
of ???.

Instead of these three question marks there should be
the name of the primitive.




----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-09-21 14:22

Message:
Logged In: YES 
user_id=421

I've backed out the change; this is low priority and
probably needs more changes.

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-09-17 21:10

Message:
Logged In: YES 
user_id=929

yes, the patch works, thanks a lot! But there are in fact
many more \pdf... primitives that suffer from this problem,
actually any with a scan_keyword call before the
scan_pdf_ext_toks. After the way how it's done in
@<Implement \.{\write}@>=, it seems that a new variable
save_cur_cs is not needed if one uses k for this purpose.
Needs change of a few k uses to j. But problematic is
\pdfoutline as it has another scan_pdf_ext_toks for the attr
keyword.

Wouldn't these many changes be too risky for 1.40.0?

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-09-17 18:34

Message:
Logged In: YES 
user_id=421

The patch was missing. Fixed.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-09-17 16:30

Message:
Logged In: YES 
user_id=421

The cause seems to be that some scan_functions loose the
meaning of cur_cs, which leads to the ??? when reaching
<Tell the user what has run away...@>.

The attached (IMHO crude) patch fixes this for the cases you
mentioned, but there are probably other cases not found...

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=606&group_id=106

From reinhard.kotucha at web.de  Sat Sep 23 02:32:49 2006
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 23 Sep 2006 02:32:49 +0200
Subject: [NTG-pdftex] Spurious output to stderr
Message-ID: <17684.32945.163394.393479@zarniwoop.ms25.local>

Hi,
whenever I use \pdfximage the filename and "\n" is printed to stderr.

Everything looks as expected when I say "pdftex somefile 2>/dev/null".

It seems that one of the developers inserted some code for debugging
and forgot to remove it.

Has this been fixed already?

I'm talking about

    This is pdfeTeXk, Version 3.141592-1.30.4-2.2 (Web2C 7.5.5)

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From gnwiii at gmail.com  Sat Sep 23 14:43:41 2006
From: gnwiii at gmail.com (gnwiii at gmail.com)
Date: Sat, 23 Sep 2006 09:43:41 -0300
Subject: [NTG-pdftex] Spurious output to stderr
In-Reply-To: <17684.32945.163394.393479@zarniwoop.ms25.local>
References: <17684.32945.163394.393479@zarniwoop.ms25.local>
Message-ID: <22af238a0609230543l6bd42e1fp49cea4a2299f4602@mail.gmail.com>

On 9/22/06, Reinhard Kotucha <reinhard.kotucha at web.de> wrote:

> Hi,
> whenever I use \pdfximage the filename and "\n" is printed to stderr.
>
> Everything looks as expected when I say "pdftex somefile 2>/dev/null".
>
> It seems that one of the developers inserted some code for debugging
> and forgot to remove it.
>
> Has this been fixed already?

Apparently -- I can't reproduce the problem using example.pdf from the
pdftex examples directory.

What image formats? Do you see the problem with the pdftex example.tex file?

$ pdftex --version
pdfTeX 3.141592-1.40.0-beta-20060906-2.2 (Web2C 7.5.5)
kpathsea version 3.5.5
Copyright 2005 Peter Breitenlohner (eTeX)/Han The Thanh (pdfTeX).
Kpathsea is copyright 2005 Karl Berry and Olaf Weber.
There is NO warranty.  Redistribution of this software is
covered by the terms of both the pdfTeX copyright and
the Lesser GNU General Public License.
For more information about these matters, see the file
named COPYING and the pdfTeX source.
Primary author of pdfTeX: Peter Breitenlohner (eTeX)/Han The Thanh (pdfTeX).
Kpathsea written by Karl Berry, Olaf Weber, and others.

Compiled with libpng 1.2.8; using libpng 1.2.8
Compiled with zlib 1.2.3; using zlib 1.2.3
Compiled with xpdf version 3.01

$ grep pdfximage *.tex
% images can be included with pdftex using \pdfximage. Supported formats
\pdfximage {pic.pdf}    % read image pic.pdf (from path TEXPSHEADERS)
% opened by \pdfximage is accessible via \pdflastximagepages.
% \pdfximage page 2 {file.pdf}
% similarly to \pdfobj, the image created by \pdfximage is held in memory
% by saying \pdfrefximage <object number>; or 2) \pdfximage is preceded by
% \immediate. The object number of the last image created by \pdfximage is
% accessible via \pdflastximage. Note that \immediate\pdfximage does not
\pdfximage width 6cm {pic.png}  % set the image width and keep the
\pdfximage width 6cm height 4cm % set both image width and height; the
\pdfximage {pic.pdf}
\pdfximage              % include the image at resolution 1200 dpi
\pdfximage height \vsize {tmp.pdf}      % insert the PDF converted from EPS

PS -- teTeX has texmf/doc/pdftex/examples, but I don't find the
examples directory in my TeX Live 2005 install.

> I'm talking about
>
>     This is pdfeTeXk, Version 3.141592-1.30.4-2.2 (Web2C 7.5.5)


-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From oberdiek at uni-freiburg.de  Sat Sep 23 15:17:34 2006
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Sat, 23 Sep 2006 15:17:34 +0200
Subject: [NTG-pdftex] Spurious output to stderr
In-Reply-To: <22af238a0609230543l6bd42e1fp49cea4a2299f4602@mail.gmail.com>
References: <17684.32945.163394.393479@zarniwoop.ms25.local>
	<22af238a0609230543l6bd42e1fp49cea4a2299f4602@mail.gmail.com>
Message-ID: <20060923131734.GA6510@irwin.vpn.uni-freiburg.de>

On Sat, Sep 23, 2006 at 09:43:41AM -0300, gnwiii at gmail.com wrote:

> On 9/22/06, Reinhard Kotucha <reinhard.kotucha at web.de> wrote:
> 
> > Hi,
> > whenever I use \pdfximage the filename and "\n" is printed to stderr.
> >
> > Everything looks as expected when I say "pdftex somefile 2>/dev/null".
> >
> > It seems that one of the developers inserted some code for debugging
> > and forgot to remove it.
> >
> > Has this been fixed already?
> 
> Apparently -- I can't reproduce the problem using example.pdf from the
> pdftex examples directory.

AFAIK this was fixed some time ago.

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>
-- 

From staw at gust.org.pl  Sat Sep 23 16:20:18 2006
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Sat, 23 Sep 2006 16:20:18 +0200 (CEST)
Subject: [NTG-pdftex] Spurious output to stderr
In-Reply-To: <22af238a0609230543l6bd42e1fp49cea4a2299f4602@mail.gmail.com>
Message-ID: <Pine.LNX.4.44.0609231617090.2162-100000@fam82.internetdsl.tpnet.pl>

On Sat, 23 Sep 2006 gnwiii at gmail.com wrote:

> [...]
> PS -- teTeX has texmf/doc/pdftex/examples, but I don't find the
> examples directory in my TeX Live 2005 install.

>From version 1.30.3 the pdftex team changed it to 
doc/pdftex/manual/samplepdf/samplepdf.tex

-- 
Staszek Wawrykiewicz
StaW at gust.org.pl



From taco at elvenkind.com  Wed Sep 27 16:16:13 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 27 Sep 2006 16:16:13 +0200
Subject: [NTG-pdftex] Pdf "convert" primitives bug
Message-ID: <451A87AD.8000305@elvenkind.com>

Hi,

While working on luatex's \directlua, I ran into a rather interesting
bug that affects a number of pdftex primitives as well. Because these
do not all have the same author and the needed fix is not identical
for all, I thought it easier to write an email message than to try to
create a patch myself.

The problem:

   When tex calls `conv_toks()' to execute `convert' commands, a string
   may already be being built. A call to scan_toks (pdf_scan_ext_toks)
   at that moment will incorporate that partial string to the argument
   of the `convert' primitive, and erase it from the output.

Example code:

   \message{\pdfmdfivesum{knuth}}
   \input knuth\pdfmdfivesum{}
   \bye

Affected primitives:

   \pdfescapestring
   \pdfescapename
   \pdfescapehex
   \pdfunescapehex
   \pdffilemoddate
   \pdffilesize
   \pdffiledump
   \pdfmdfivesum
   \pdfstrcmp

The needed fix:

   Somewhen before calling scan_pdf_ext_toks, you have to store the
   partial string as a true tex string, then its `partialness' has to
   be restored sometime later before leaving conv_toks().


Greetings,
Taco

From taco at elvenkind.com  Wed Sep 27 16:20:14 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 27 Sep 2006 16:20:14 +0200
Subject: [NTG-pdftex] Pdf "convert" primitives bug
In-Reply-To: <451A87AD.8000305@elvenkind.com>
References: <451A87AD.8000305@elvenkind.com>
Message-ID: <451A889E.1020301@elvenkind.com>



Taco Hoekwater wrote:
> The problem:
> 
>    When tex calls `conv_toks()' to execute `convert' commands, a string
>    may already be being built. A call to scan_toks (pdf_scan_ext_toks)
>    at that moment will incorporate that partial string to the argument
>    of the `convert' primitive, and erase it from the output.

That should read 'input' instead of 'output' of course.

Taco

From noreply at sarovar.org  Wed Sep 27 16:55:12 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 27 Sep 2006 20:25:12 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-608 ] baseurl=./  of hyperref ignored
Message-ID: <E1GSaoa-0005Lv-00@sarovar.org>

Bugs item #608, was opened at 2006-09-27 16:55
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=608&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Jan Schween (janschween)
Assigned to: Nobody (None)
Summary: baseurl=./  of hyperref ignored

Initial Comment:
I try to make a \href to a file which is located
relative to the PDF document.

When loading the hyperref package i use the option
baseurl=./ to indicate the actual location of the PDF
document:

  \usepackage[ pdftex , baseurl=./ ]{hyperref}

Inside the document i make a reference to an external file:

   \href{movies/map.m1v}       % link to movie
        {movie {\tt map.m1v}.} % text to appear

The examples A1 and A2 on 
http://www.meteo.physik.uni-muenchen.de/~hase/banner/texte/movie_example/
show the result. Look at the links in the caption of
figure 1.

A2 was created with  pdfTeX  :   
The link is expanded into 
  'movies/map.m1v' 
and does not work. If you download the pdf to your
local machine and open it, the link will be expanded into 
  'movies/map.m1v'
Accordingly the baseurl=./ is ignored.


A1 was created with  dvipdfm  : 
The link is expanded into 
  'http://www.../movies/map.m1v'
If you download the pdf to your local machine and open
it the link will be expanded into
  'file:///<localdir>/movies/map.m1v'
that is what i would (naiveley) expect.

Since  dvipdfm  is capable to produce a meaningful
expansion of baseurl=./ the problem  lies not within
hyperef and not within the capabilites of PDF. 

(I sent this question yesterday also to pdtftex at tug.org
- sorry if you read this twice)

- Jan -



----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=608&group_id=106

From noreply at sarovar.org  Wed Sep 27 17:35:33 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 27 Sep 2006 21:05:33 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-608 ] baseurl=./  of hyperref ignored
Message-ID: <E1GSbRd-0001oS-00@sarovar.org>

Bugs item #608, was opened at 2006-09-27 16:55
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=608&group_id=106

Category: None
Group: None
>Status: Closed
>Resolution: Rejected
Priority: 5
Submitted By: Jan Schween (janschween)
Assigned to: Nobody (None)
Summary: baseurl=./  of hyperref ignored

Initial Comment:
I try to make a \href to a file which is located
relative to the PDF document.

When loading the hyperref package i use the option
baseurl=./ to indicate the actual location of the PDF
document:

  \usepackage[ pdftex , baseurl=./ ]{hyperref}

Inside the document i make a reference to an external file:

   \href{movies/map.m1v}       % link to movie
        {movie {\tt map.m1v}.} % text to appear

The examples A1 and A2 on 
http://www.meteo.physik.uni-muenchen.de/~hase/banner/texte/movie_example/
show the result. Look at the links in the caption of
figure 1.

A2 was created with  pdfTeX  :   
The link is expanded into 
  'movies/map.m1v' 
and does not work. If you download the pdf to your
local machine and open it, the link will be expanded into 
  'movies/map.m1v'
Accordingly the baseurl=./ is ignored.


A1 was created with  dvipdfm  : 
The link is expanded into 
  'http://www.../movies/map.m1v'
If you download the pdf to your local machine and open
it the link will be expanded into
  'file:///<localdir>/movies/map.m1v'
that is what i would (naiveley) expect.

Since  dvipdfm  is capable to produce a meaningful
expansion of baseurl=./ the problem  lies not within
hyperef and not within the capabilites of PDF. 

(I sent this question yesterday also to pdtftex at tug.org
- sorry if you read this twice)

- Jan -



----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-09-27 17:35

Message:
Logged In: YES 
user_id=421

Sorry, unless you can demonstrate that this is a bug in
pdfTeX, I will assume that it is a problem of hyperref,
which we don't maintain.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=608&group_id=106

From noreply at sarovar.org  Wed Sep 27 19:02:57 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 27 Sep 2006 22:32:57 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-608 ] baseurl=./  of hyperref ignored
Message-ID: <E1GScoD-0002GX-00@sarovar.org>

Bugs item #608, was opened at 2006-09-27 16:55
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=608&group_id=106

Category: None
Group: None
Status: Closed
Resolution: Rejected
Priority: 5
Submitted By: Jan Schween (janschween)
Assigned to: Nobody (None)
Summary: baseurl=./  of hyperref ignored

Initial Comment:
I try to make a \href to a file which is located
relative to the PDF document.

When loading the hyperref package i use the option
baseurl=./ to indicate the actual location of the PDF
document:

  \usepackage[ pdftex , baseurl=./ ]{hyperref}

Inside the document i make a reference to an external file:

   \href{movies/map.m1v}       % link to movie
        {movie {\tt map.m1v}.} % text to appear

The examples A1 and A2 on 
http://www.meteo.physik.uni-muenchen.de/~hase/banner/texte/movie_example/
show the result. Look at the links in the caption of
figure 1.

A2 was created with  pdfTeX  :   
The link is expanded into 
  'movies/map.m1v' 
and does not work. If you download the pdf to your
local machine and open it, the link will be expanded into 
  'movies/map.m1v'
Accordingly the baseurl=./ is ignored.


A1 was created with  dvipdfm  : 
The link is expanded into 
  'http://www.../movies/map.m1v'
If you download the pdf to your local machine and open
it the link will be expanded into
  'file:///<localdir>/movies/map.m1v'
that is what i would (naiveley) expect.

Since  dvipdfm  is capable to produce a meaningful
expansion of baseurl=./ the problem  lies not within
hyperef and not within the capabilites of PDF. 

(I sent this question yesterday also to pdtftex at tug.org
- sorry if you read this twice)

- Jan -



----------------------------------------------------------------------

>Comment By: Jan Schween (janschween)
Date: 2006-09-27 19:02

Message:
Logged In: YES 
user_id=3905

I am aware that hyperref is independent of pdfTex. 

I allready mentioned:

> Since dvipdfm is capable to produce a meaningful
> expansion of baseurl=./ the problem lies not within
> hyperef and not within the capabilites of PDF. 

Ommiting the pdftex option for hyperef does not change the 
behaviour. (The only  remaining difference between using 
pdftex  and  dvipdfm  is the pdfTex option of hyperref) 

It must be a problem in pdfTeX.
... or in PDF:

if  baseurl=./ is set the following PDF-output is produced:

pdfTeX:
  /URI<</Base(./)>>

dvipdfm:
there is NO 
  /URI<</Base(...)>> 
statement in the pdf !

Test:
If you just erase the 
/URI<</Base(./)>>
statement in the  pdfTeX  output then adobe-reader 
expands the link as you would expect it !
(see A3 on the www-page)

Remains the question:
  Is this strange behaviour of adobe-reader,
  or is this documented in the PDF-standard ?

- Jan -


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-09-27 17:35

Message:
Logged In: YES 
user_id=421

Sorry, unless you can demonstrate that this is a bug in
pdfTeX, I will assume that it is a problem of hyperref,
which we don't maintain.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=608&group_id=106

From noreply at sarovar.org  Wed Sep 27 19:49:38 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 27 Sep 2006 23:19:38 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-608 ] baseurl=./  of hyperref ignored
Message-ID: <E1GSdXO-0008G1-00@sarovar.org>

Bugs item #608, was opened at 2006-09-27 16:55
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=608&group_id=106

Category: None
Group: None
Status: Closed
Resolution: Rejected
Priority: 5
Submitted By: Jan Schween (janschween)
Assigned to: Nobody (None)
Summary: baseurl=./  of hyperref ignored

Initial Comment:
I try to make a \href to a file which is located
relative to the PDF document.

When loading the hyperref package i use the option
baseurl=./ to indicate the actual location of the PDF
document:

  \usepackage[ pdftex , baseurl=./ ]{hyperref}

Inside the document i make a reference to an external file:

   \href{movies/map.m1v}       % link to movie
        {movie {\tt map.m1v}.} % text to appear

The examples A1 and A2 on 
http://www.meteo.physik.uni-muenchen.de/~hase/banner/texte/movie_example/
show the result. Look at the links in the caption of
figure 1.

A2 was created with  pdfTeX  :   
The link is expanded into 
  'movies/map.m1v' 
and does not work. If you download the pdf to your
local machine and open it, the link will be expanded into 
  'movies/map.m1v'
Accordingly the baseurl=./ is ignored.


A1 was created with  dvipdfm  : 
The link is expanded into 
  'http://www.../movies/map.m1v'
If you download the pdf to your local machine and open
it the link will be expanded into
  'file:///<localdir>/movies/map.m1v'
that is what i would (naiveley) expect.

Since  dvipdfm  is capable to produce a meaningful
expansion of baseurl=./ the problem  lies not within
hyperef and not within the capabilites of PDF. 

(I sent this question yesterday also to pdtftex at tug.org
- sorry if you read this twice)

- Jan -



----------------------------------------------------------------------

>Comment By: Jan Schween (janschween)
Date: 2006-09-27 19:49

Message:
Logged In: YES 
user_id=3905

pdfTeX can be forced to omit the 
  /URI<</Base(...)>> 
statement by setting the hyperref options:
\hypersetup{baseurl={}}
\hypersetup{linkfileprefix={}}

- jan -





----------------------------------------------------------------------

Comment By: Jan Schween (janschween)
Date: 2006-09-27 19:02

Message:
Logged In: YES 
user_id=3905

I am aware that hyperref is independent of pdfTex. 

I allready mentioned:

> Since dvipdfm is capable to produce a meaningful
> expansion of baseurl=./ the problem lies not within
> hyperef and not within the capabilites of PDF. 

Ommiting the pdftex option for hyperef does not change the 
behaviour. (The only  remaining difference between using 
pdftex  and  dvipdfm  is the pdfTex option of hyperref) 

It must be a problem in pdfTeX.
... or in PDF:

if  baseurl=./ is set the following PDF-output is produced:

pdfTeX:
  /URI<</Base(./)>>

dvipdfm:
there is NO 
  /URI<</Base(...)>> 
statement in the pdf !

Test:
If you just erase the 
/URI<</Base(./)>>
statement in the  pdfTeX  output then adobe-reader 
expands the link as you would expect it !
(see A3 on the www-page)

Remains the question:
  Is this strange behaviour of adobe-reader,
  or is this documented in the PDF-standard ?

- Jan -


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-09-27 17:35

Message:
Logged In: YES 
user_id=421

Sorry, unless you can demonstrate that this is a bug in
pdfTeX, I will assume that it is a problem of hyperref,
which we don't maintain.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=608&group_id=106

From oberdiek at uni-freiburg.de  Wed Sep 27 22:28:36 2006
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Wed, 27 Sep 2006 22:28:36 +0200
Subject: [NTG-pdftex] Pdf "convert" primitives bug
In-Reply-To: <451A87AD.8000305@elvenkind.com>
References: <451A87AD.8000305@elvenkind.com>
Message-ID: <20060927202836.GA8987@irwin.vpn.uni-freiburg.de>

On Wed, Sep 27, 2006 at 04:16:13PM +0200, Taco Hoekwater wrote:

> While working on luatex's \directlua, I ran into a rather interesting
> bug that affects a number of pdftex primitives as well. Because these
> do not all have the same author and the needed fix is not identical
> for all, I thought it easier to write an email message than to try to
> create a patch myself.

Thanks for detecting the bug and the bug analysis.
I had provided some of the affected primitives. However,
basically I had only copied the method from \pdfstrcmp.
Please, fix all the primitives.

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>
-- 

From martin at oneiros.de  Thu Sep 28 17:03:07 2006
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Thu, 28 Sep 2006 17:03:07 +0200
Subject: [NTG-pdftex] Pdf "convert" primitives bug
In-Reply-To: <20060927202836.GA8987@irwin.vpn.uni-freiburg.de>
References: <451A87AD.8000305@elvenkind.com>
	<20060927202836.GA8987@irwin.vpn.uni-freiburg.de>
Message-ID: <68c491a60609280803w7e8c3587w1d9817ab23f4dfd7@mail.gmail.com>

2006/9/27, Heiko Oberdiek <oberdiek at uni-freiburg.de>:
> > While working on luatex's \directlua, I ran into a rather interesting
> > bug that affects a number of pdftex primitives as well. Because these
> > do not all have the same author and the needed fix is not identical
> > for all, I thought it easier to write an email message than to try to
> > create a patch myself.

> Thanks for detecting the bug and the bug analysis.

Same here.

Please file this as a bug at sarovar so we don't forget it. But Taco,
you are the web-programming-expert here, so you are the best candidate
for fixing it. :-)

Best
   Martin

From taco at elvenkind.com  Thu Sep 28 19:02:33 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 28 Sep 2006 19:02:33 +0200
Subject: [NTG-pdftex] Pdf "convert" primitives bug
In-Reply-To: <68c491a60609280803w7e8c3587w1d9817ab23f4dfd7@mail.gmail.com>
References: <451A87AD.8000305@elvenkind.com>	<20060927202836.GA8987@irwin.vpn.uni-freiburg.de>
	<68c491a60609280803w7e8c3587w1d9817ab23f4dfd7@mail.gmail.com>
Message-ID: <451C0029.6030903@elvenkind.com>

Martin Schr?der wrote:
> 2006/9/27, Heiko Oberdiek <oberdiek at uni-freiburg.de>:
> 
>>>While working on luatex's \directlua, I ran into a rather interesting
>>>bug that affects a number of pdftex primitives as well. Because these
>>>do not all have the same author and the needed fix is not identical
>>>for all, I thought it easier to write an email message than to try to
>>>create a patch myself.
> 
> 
>>Thanks for detecting the bug and the bug analysis.
> 
> 
> Same here.
> 
> Please file this as a bug at sarovar so we don't forget it. But Taco,
> you are the web-programming-expert here, so you are the best candidate
> for fixing it. :-)

Sometime next week, then.

Greetings,
Taco

From noreply at sarovar.org  Thu Sep 28 18:50:29 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 28 Sep 2006 22:20:29 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-609 ] Pdf "convert"
	primitives bug
Message-ID: <E1GSz5h-00034B-00@sarovar.org>

Feature Requests item #609, was opened at 2006-09-28 18:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=609&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Taco Hoekwater (taco)
Assigned to: Taco Hoekwater (taco)
Summary: Pdf "convert" primitives bug

Initial Comment:
The problem:

   When tex calls `conv_toks()' to execute `convert'
commands, a string
   may already be being built. A call to scan_toks
(pdf_scan_ext_toks)
   at that moment will incorporate that partial string
to the argument
   of the `convert' primitive, and erase it from the
output.

Example code:

   \message{\pdfmdfivesum{knuth}}
   \input knuth\pdfmdfivesum{}
   \bye

Affected primitives:

   \pdfescapestring
   \pdfescapename
   \pdfescapehex
   \pdfunescapehex
   \pdffilemoddate
   \pdffilesize
   \pdffiledump
   \pdfmdfivesum
   \pdfstrcmp

The needed fix:

   Somewhen before calling scan_pdf_ext_toks, you have
to store the
   partial string as a true tex string, then its
`partialness' has to
   be restored sometime later before leaving conv_toks().




----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=609&group_id=106

From noreply at sarovar.org  Thu Sep 28 18:52:01 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 28 Sep 2006 22:22:01 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-609 ] Pdf "convert" primitives bug
Message-ID: <E1GSz7B-00034w-00@sarovar.org>

Bugs item #609, was opened at 2006-09-28 18:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=609&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Taco Hoekwater (taco)
>Assigned to: Nobody (None)
>Summary: Pdf "convert" primitives bug

Initial Comment:
The problem:

   When tex calls `conv_toks()' to execute `convert'
commands, a string
   may already be being built. A call to scan_toks
(pdf_scan_ext_toks)
   at that moment will incorporate that partial string
to the argument
   of the `convert' primitive, and erase it from the
output.

Example code:

   \message{\pdfmdfivesum{knuth}}
   \input knuth\pdfmdfivesum{}
   \bye

Affected primitives:

   \pdfescapestring
   \pdfescapename
   \pdfescapehex
   \pdfunescapehex
   \pdffilemoddate
   \pdffilesize
   \pdffiledump
   \pdfmdfivesum
   \pdfstrcmp

The needed fix:

   Somewhen before calling scan_pdf_ext_toks, you have
to store the
   partial string as a true tex string, then its
`partialness' has to
   be restored sometime later before leaving conv_toks().




----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2006-09-28 18:52

Message:
Logged In: YES 
user_id=1608

sorry, it is a bug, of course 

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=609&group_id=106

From noreply at sarovar.org  Thu Sep 28 19:04:28 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 28 Sep 2006 22:34:28 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-609 ] Pdf "convert" primitives bug
Message-ID: <E1GSzJE-0003Ur-00@sarovar.org>

Bugs item #609, was opened at 2006-09-28 18:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=609&group_id=106

>Category: Primitives
>Group: v1.40.0
Status: Open
>Resolution: Accepted
Priority: 5
Submitted By: Taco Hoekwater (taco)
>Assigned to: Taco Hoekwater (taco)
>Summary: Pdf "convert" primitives bug

Initial Comment:
The problem:

   When tex calls `conv_toks()' to execute `convert'
commands, a string
   may already be being built. A call to scan_toks
(pdf_scan_ext_toks)
   at that moment will incorporate that partial string
to the argument
   of the `convert' primitive, and erase it from the
output.

Example code:

   \message{\pdfmdfivesum{knuth}}
   \input knuth\pdfmdfivesum{}
   \bye

Affected primitives:

   \pdfescapestring
   \pdfescapename
   \pdfescapehex
   \pdfunescapehex
   \pdffilemoddate
   \pdffilesize
   \pdffiledump
   \pdfmdfivesum
   \pdfstrcmp

The needed fix:

   Somewhen before calling scan_pdf_ext_toks, you have
to store the
   partial string as a true tex string, then its
`partialness' has to
   be restored sometime later before leaving conv_toks().




----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2006-09-28 18:52

Message:
Logged In: YES 
user_id=1608

sorry, it is a bug, of course 

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=609&group_id=106

From noreply at sarovar.org  Thu Sep 28 19:04:49 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 28 Sep 2006 22:34:49 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-605 ] \pdfescapestring + \pdfescapename
	are broken in beta-20060906
Message-ID: <E1GSzJZ-0003VW-00@sarovar.org>

Bugs item #605, was opened at 2006-09-13 17:49
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=605&group_id=106

Category: None
Group: v1.40.0
>Status: Closed
Resolution: Fixed
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: Martin Schr?der (oneiros)
Summary: \pdfescapestring + \pdfescapename are broken in beta-20060906

Initial Comment:
The last char of escaped characters will always be ^^0:

\def\text{P^^D (F)}
\message{\pdfescapestring{\text}}
\message{\pdfescapename {\text}}
\bye

% log output is:
% P\00^^@\04^^@\(F\)
% P#0^^@#2^^@#2^^@F#2^^@



----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-09-14 14:36

Message:
Logged In: YES 
user_id=421

Found and fixed it. The snprintfs in escapestring and
escapename were wrong. 

I'll check the other printf -> nprintf changes.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=605&group_id=106

From noreply at sarovar.org  Sat Sep 30 02:17:08 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sat, 30 Sep 2006 05:47:08 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-611 ] Bug of pdftex beta upon reading
	some truetype
Message-ID: <E1GTSXU-0001UQ-00@sarovar.org>

Bugs item #611, was opened at 2006-09-30 09:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=611&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Dohyun Kim (nomos)
Assigned to: Nobody (None)
Summary: Bug of pdftex beta upon reading some truetype

Initial Comment:
I have recently installed pdftex beta on my Linux box. 
But I am puzzled by a strange behavior of newly 
installed pdftex. For your test, I've put a minimal 
tarball (1.6M) to a server:

http://210.94.201.157/~nomos/KTUG/truetypetest.tar.gz

On my i686 Linux machine, compiling the following file 
(which is included in the tarball above) with pdftex 
beta version 20060906 fails with Segmentation Fault.

====================
%\pdfmapline{+oungtb4e <oungtb4e.enc <UnDotumBold.ttf}
%%% it works.
\pdfmapline{+oungtb at Unicode@ <UnDotumBold.ttf}        
%%% it segfaults.
\font\mytt=oungtb4e\relax
\mytt
\char0
\char1
\bye
====================

PDFTeX beta 20060928, the most recent version at the
time of this reporting, crashes too.
Please inspect the problem.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=611&group_id=106

From noreply at sarovar.org  Sat Sep 30 16:22:45 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sat, 30 Sep 2006 19:52:45 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-462 ] HZ font expansion by text
	matrix manipulation
Message-ID: <E1GTfjp-0006wF-00@sarovar.org>

Patches item #462, was opened at 2005-12-23 22:35
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=462&group_id=106

Category: Positioning
Group: v1.40.0
Status: Open
Resolution: Later
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: The Thanh Han (hanthethanh)
Summary: HZ font expansion by text matrix manipulation

Initial Comment:
Use textmatrix Tm instead of /FontMatrix for font
expansion. Then a font file will be embedded only once
for all expansion factors. Gives smaller PDF files.
Works then also for non-embedded fonts. TrueType not
tried yet. Rough patch only, incomplete, work in
progress, no warranty, not for production.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-09-30 14:22

Message:
Logged In: YES 
user_id=2217

It's great to have this included!

However, pdftex is now a bit too keen on autoexpanding -- it
does so, even if `autoexpand' is not specified. Although the
pre-created metrics are read, the physical font (pfb resp.
pk) is ignored. As has been discussed re: bug 304, *not*
using autoexpansion gives better results for MM (and MF)
fonts, since the fonts are not stretched blindly but stroke
widths are adjusted etc.

Compare the output of the test file from bugs/304 compiled
with an old pdftex and with 20060928. With the latter, the
strokes are slightly heavier. Same here (with an existing
file cmr10+100.mf):

\pdfadjustspacing2
\pdfmapline{ cmr10}
\pdfmapline{+cmr10+100}
\font\cmr =cmr10 \cmr
\pdffontexpand\cmr 100 0 100 %autoexpand
Hamburgefonts\par
\parfillskip 0pt
Hamburgefonts
\bye


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-02-13 18:41

Message:
Logged In: YES 
user_id=421

The last word from Hartmut was that it's not ready yet and
he'd be working on an improved version.

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-02-13 18:05

Message:
Logged In: YES 
user_id=2217

Will this make it into 1.40? I would love to see it included.

I've tested it a bit and did not find any problems (I'm also
using it for the pre-built microtype documentation on CTAN). 

Regards,
Robert

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=462&group_id=106

From noreply at sarovar.org  Sat Sep 30 19:15:35 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sat, 30 Sep 2006 22:45:35 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-611 ] Bug of pdftex beta upon reading
	some truetype
Message-ID: <E1GTiR5-0002OJ-00@sarovar.org>

Bugs item #611, was opened at 2006-09-30 02:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=611&group_id=106

>Category: Fonts
>Group: v1.40.0
Status: Open
>Resolution: Accepted
Priority: 5
Submitted By: Dohyun Kim (nomos)
>Assigned to: The Thanh Han (hanthethanh)
Summary: Bug of pdftex beta upon reading some truetype

Initial Comment:
I have recently installed pdftex beta on my Linux box. 
But I am puzzled by a strange behavior of newly 
installed pdftex. For your test, I've put a minimal 
tarball (1.6M) to a server:

http://210.94.201.157/~nomos/KTUG/truetypetest.tar.gz

On my i686 Linux machine, compiling the following file 
(which is included in the tarball above) with pdftex 
beta version 20060906 fails with Segmentation Fault.

====================
%\pdfmapline{+oungtb4e <oungtb4e.enc <UnDotumBold.ttf}
%%% it works.
\pdfmapline{+oungtb at Unicode@ <UnDotumBold.ttf}        
%%% it segfaults.
\font\mytt=oungtb4e\relax
\mytt
\char0
\char1
\bye
====================

PDFTeX beta 20060928, the most recent version at the
time of this reporting, crashes too.
Please inspect the problem.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=611&group_id=106

From noreply at sarovar.org  Sat Sep 30 19:30:00 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sat, 30 Sep 2006 23:00:00 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-611 ] Bug of pdftex beta upon reading
	some truetype
Message-ID: <E1GTif2-0005sH-00@sarovar.org>

Bugs item #611, was opened at 2006-09-30 02:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=611&group_id=106

Category: Fonts
Group: v1.40.0
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Dohyun Kim (nomos)
Assigned to: The Thanh Han (hanthethanh)
Summary: Bug of pdftex beta upon reading some truetype

Initial Comment:
I have recently installed pdftex beta on my Linux box. 
But I am puzzled by a strange behavior of newly 
installed pdftex. For your test, I've put a minimal 
tarball (1.6M) to a server:

http://210.94.201.157/~nomos/KTUG/truetypetest.tar.gz

On my i686 Linux machine, compiling the following file 
(which is included in the tarball above) with pdftex 
beta version 20060906 fails with Segmentation Fault.

====================
%\pdfmapline{+oungtb4e <oungtb4e.enc <UnDotumBold.ttf}
%%% it works.
\pdfmapline{+oungtb at Unicode@ <UnDotumBold.ttf}        
%%% it segfaults.
\font\mytt=oungtb4e\relax
\mytt
\char0
\char1
\bye
====================

PDFTeX beta 20060928, the most recent version at the
time of this reporting, crashes too.
Please inspect the problem.

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-09-30 19:30

Message:
Logged In: YES 
user_id=421

Just FTR: I've tried to attach the file from nomos to this
bug, but this fails silently; probably some size limit. :-(

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=611&group_id=106

