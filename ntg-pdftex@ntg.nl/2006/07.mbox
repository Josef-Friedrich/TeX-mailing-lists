From noreply at sarovar.org  Wed Jul 12 17:17:20 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 12 Jul 2006 20:47:20 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-579 ] The log file is wrapped
Message-ID: <E1G0gSm-0006zo-00@sarovar.org>

Bugs item #579, was opened at 2006-07-12 15:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=579&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Tobias (towolf_)
Assigned to: Nobody (None)
Summary: The log file is wrapped

Initial Comment:
[Note that I can?t tell which part of my install is responsible for this]

when I compile my source with $ pdflatex source.tex the log that is output is 
wrapped at column 79, which leads to unfortunate line breaks that make 
quickfixing my doument harder.
Often the line number is split off and escapes my errorformat string for Vim.
Can the wrapping be disabled? My Tex distro is Tetex 3 but I compiled pdftex 
1.40 beta from source.

LaTeX Warning: Reference `sec:method-survey' on page 5 undefined on 
input line
21.

[5]

LaTeX Warning: Reference `sec-corpus' on page 6 undefined on input line 58.


Package natbib Warning: Citation `Golub2004' on page 6 undefined on input 
line
60.

(/usr/local/share/texmf/tex/latex/lucida/ts1hlh.fd) [6] [7] [8] [9] [10]
[11] [12] [13]

LaTeX Warning: Reference `sec.res-dec' on page 14 undefined on input line 
386.

[14]

LaTeX Warning: Reference `sec.res-complexity' on page 15 undefined on 
input lin
e 407.


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=579&group_id=106

From noreply at sarovar.org  Wed Jul 12 18:15:45 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 12 Jul 2006 21:45:45 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-579 ] The log file is wrapped
Message-ID: <E1G0hNJ-000801-00@sarovar.org>

Bugs item #579, was opened at 2006-07-12 17:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=579&group_id=106

Category: None
>Group: v1.30.0
>Status: Closed
>Resolution: Rejected
Priority: 5
Submitted By: Tobias (towolf_)
>Assigned to: Martin Schr?der (oneiros)
Summary: The log file is wrapped

Initial Comment:
[Note that I can?t tell which part of my install is responsible for this]

when I compile my source with $ pdflatex source.tex the log that is output is 
wrapped at column 79, which leads to unfortunate line breaks that make 
quickfixing my doument harder.
Often the line number is split off and escapes my errorformat string for Vim.
Can the wrapping be disabled? My Tex distro is Tetex 3 but I compiled pdftex 
1.40 beta from source.

LaTeX Warning: Reference `sec:method-survey' on page 5 undefined on 
input line
21.

[5]

LaTeX Warning: Reference `sec-corpus' on page 6 undefined on input line 58.


Package natbib Warning: Citation `Golub2004' on page 6 undefined on input 
line
60.

(/usr/local/share/texmf/tex/latex/lucida/ts1hlh.fd) [6] [7] [8] [9] [10]
[11] [12] [13]

LaTeX Warning: Reference `sec.res-dec' on page 14 undefined on input line 
386.

[14]

LaTeX Warning: Reference `sec.res-complexity' on page 15 undefined on 
input lin
e 407.


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-07-12 18:15

Message:
Logged In: YES 
user_id=421

The wrapping of lines in the log is a (mis)feature of TeX,
so there is nothing we can change about that without
breaking compatability.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=579&group_id=106

From noreply at sarovar.org  Thu Jul 13 01:46:15 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 13 Jul 2006 05:16:15 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-579 ] The log file is wrapped
Message-ID: <E1G0oPH-0000nX-00@sarovar.org>

Bugs item #579, was opened at 2006-07-12 15:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=579&group_id=106

Category: None
Group: v1.30.0
Status: Closed
Resolution: Rejected
Priority: 5
Submitted By: Tobias (towolf_)
Assigned to: Martin Schr?der (oneiros)
Summary: The log file is wrapped

Initial Comment:
[Note that I can?t tell which part of my install is responsible for this]

when I compile my source with $ pdflatex source.tex the log that is output is 
wrapped at column 79, which leads to unfortunate line breaks that make 
quickfixing my doument harder.
Often the line number is split off and escapes my errorformat string for Vim.
Can the wrapping be disabled? My Tex distro is Tetex 3 but I compiled pdftex 
1.40 beta from source.

LaTeX Warning: Reference `sec:method-survey' on page 5 undefined on 
input line
21.

[5]

LaTeX Warning: Reference `sec-corpus' on page 6 undefined on input line 58.


Package natbib Warning: Citation `Golub2004' on page 6 undefined on input 
line
60.

(/usr/local/share/texmf/tex/latex/lucida/ts1hlh.fd) [6] [7] [8] [9] [10]
[11] [12] [13]

LaTeX Warning: Reference `sec.res-dec' on page 14 undefined on input line 
386.

[14]

LaTeX Warning: Reference `sec.res-complexity' on page 15 undefined on 
input lin
e 407.


----------------------------------------------------------------------

>Comment By: Tobias (towolf_)
Date: 2006-07-12 23:46

Message:
Logged In: YES 
user_id=3729

I see that backwards compatibility is a crucial and laudable aspect of the Tex system.

However, when facing my problem I would prefer no wrapping for my log.
Is it possible to make a small-scale personal modification and can you point me in 
the general direction of the place in the source if you think it is?

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-12 16:15

Message:
Logged In: YES 
user_id=421

The wrapping of lines in the log is a (mis)feature of TeX,
so there is nothing we can change about that without
breaking compatability.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=579&group_id=106

From noreply at sarovar.org  Thu Jul 13 10:01:13 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 13 Jul 2006 13:31:13 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-579 ] The log file is wrapped
Message-ID: <E1G0w8H-0004Sj-00@sarovar.org>

Bugs item #579, was opened at 2006-07-12 15:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=579&group_id=106

Category: None
Group: v1.30.0
Status: Closed
Resolution: Rejected
Priority: 5
Submitted By: Tobias (towolf_)
Assigned to: Martin Schr?der (oneiros)
Summary: The log file is wrapped

Initial Comment:
[Note that I can?t tell which part of my install is responsible for this]

when I compile my source with $ pdflatex source.tex the log that is output is 
wrapped at column 79, which leads to unfortunate line breaks that make 
quickfixing my doument harder.
Often the line number is split off and escapes my errorformat string for Vim.
Can the wrapping be disabled? My Tex distro is Tetex 3 but I compiled pdftex 
1.40 beta from source.

LaTeX Warning: Reference `sec:method-survey' on page 5 undefined on 
input line
21.

[5]

LaTeX Warning: Reference `sec-corpus' on page 6 undefined on input line 58.


Package natbib Warning: Citation `Golub2004' on page 6 undefined on input 
line
60.

(/usr/local/share/texmf/tex/latex/lucida/ts1hlh.fd) [6] [7] [8] [9] [10]
[11] [12] [13]

LaTeX Warning: Reference `sec.res-dec' on page 14 undefined on input line 
386.

[14]

LaTeX Warning: Reference `sec.res-complexity' on page 15 undefined on 
input lin
e 407.


----------------------------------------------------------------------

>Comment By: Hans Hagen (hagen)
Date: 2006-07-13 08:01

Message:
Logged In: YES 
user_id=927

i can think of a solution where it is controlled by a
variable in the cnf file 

pdftex.logbreaks=f

or so 

----------------------------------------------------------------------

Comment By: Tobias (towolf_)
Date: 2006-07-12 23:46

Message:
Logged In: YES 
user_id=3729

I see that backwards compatibility is a crucial and laudable aspect of the Tex system.

However, when facing my problem I would prefer no wrapping for my log.
Is it possible to make a small-scale personal modification and can you point me in 
the general direction of the place in the source if you think it is?

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-12 16:15

Message:
Logged In: YES 
user_id=421

The wrapping of lines in the log is a (mis)feature of TeX,
so there is nothing we can change about that without
breaking compatability.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=579&group_id=106

From noreply at sarovar.org  Thu Jul 13 10:39:33 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 13 Jul 2006 14:09:33 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-579 ] The log file is wrapped
Message-ID: <E1G0wjN-0002x7-00@sarovar.org>

Bugs item #579, was opened at 2006-07-12 17:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=579&group_id=106

Category: None
Group: v1.30.0
Status: Closed
Resolution: Rejected
Priority: 5
Submitted By: Tobias (towolf_)
Assigned to: Martin Schr?der (oneiros)
Summary: The log file is wrapped

Initial Comment:
[Note that I can?t tell which part of my install is responsible for this]

when I compile my source with $ pdflatex source.tex the log that is output is 
wrapped at column 79, which leads to unfortunate line breaks that make 
quickfixing my doument harder.
Often the line number is split off and escapes my errorformat string for Vim.
Can the wrapping be disabled? My Tex distro is Tetex 3 but I compiled pdftex 
1.40 beta from source.

LaTeX Warning: Reference `sec:method-survey' on page 5 undefined on 
input line
21.

[5]

LaTeX Warning: Reference `sec-corpus' on page 6 undefined on input line 58.


Package natbib Warning: Citation `Golub2004' on page 6 undefined on input 
line
60.

(/usr/local/share/texmf/tex/latex/lucida/ts1hlh.fd) [6] [7] [8] [9] [10]
[11] [12] [13]

LaTeX Warning: Reference `sec.res-dec' on page 14 undefined on input line 
386.

[14]

LaTeX Warning: Reference `sec.res-complexity' on page 15 undefined on 
input lin
e 407.


----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2006-07-13 10:39

Message:
Logged In: YES 
user_id=1608

In web2c based systems, you can change a set of 
parameters is texmf.cnf:

max_print_error_line =   79 % for tex errors
half_error_line =        50 % lhs of tex error context
line =                   79 % for all other messaging

----------------------------------------------------------------------

Comment By: Hans Hagen (hagen)
Date: 2006-07-13 10:01

Message:
Logged In: YES 
user_id=927

i can think of a solution where it is controlled by a
variable in the cnf file 

pdftex.logbreaks=f

or so 

----------------------------------------------------------------------

Comment By: Tobias (towolf_)
Date: 2006-07-13 01:46

Message:
Logged In: YES 
user_id=3729

I see that backwards compatibility is a crucial and laudable aspect of the Tex system.

However, when facing my problem I would prefer no wrapping for my log.
Is it possible to make a small-scale personal modification and can you point me in 
the general direction of the place in the source if you think it is?

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-12 18:15

Message:
Logged In: YES 
user_id=421

The wrapping of lines in the log is a (mis)feature of TeX,
so there is nothing we can change about that without
breaking compatability.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=579&group_id=106

From noreply at sarovar.org  Thu Jul 13 10:55:38 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 13 Jul 2006 14:25:38 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-579 ] The log file is wrapped
Message-ID: <E1G0wyw-0003bs-00@sarovar.org>

Bugs item #579, was opened at 2006-07-12 17:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=579&group_id=106

>Category: web2c
Group: v1.30.0
Status: Closed
>Resolution: Works For Me
Priority: 5
Submitted By: Tobias (towolf_)
Assigned to: Martin Schr?der (oneiros)
Summary: The log file is wrapped

Initial Comment:
[Note that I can?t tell which part of my install is responsible for this]

when I compile my source with $ pdflatex source.tex the log that is output is 
wrapped at column 79, which leads to unfortunate line breaks that make 
quickfixing my doument harder.
Often the line number is split off and escapes my errorformat string for Vim.
Can the wrapping be disabled? My Tex distro is Tetex 3 but I compiled pdftex 
1.40 beta from source.

LaTeX Warning: Reference `sec:method-survey' on page 5 undefined on 
input line
21.

[5]

LaTeX Warning: Reference `sec-corpus' on page 6 undefined on input line 58.


Package natbib Warning: Citation `Golub2004' on page 6 undefined on input 
line
60.

(/usr/local/share/texmf/tex/latex/lucida/ts1hlh.fd) [6] [7] [8] [9] [10]
[11] [12] [13]

LaTeX Warning: Reference `sec.res-dec' on page 14 undefined on input line 
386.

[14]

LaTeX Warning: Reference `sec.res-complexity' on page 15 undefined on 
input lin
e 407.


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-07-13 10:55

Message:
Logged In: YES 
user_id=421

Still, it isn't a bug in pdfTeX.

WorksForMe. :-)

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2006-07-13 10:39

Message:
Logged In: YES 
user_id=1608

In web2c based systems, you can change a set of 
parameters is texmf.cnf:

max_print_error_line =   79 % for tex errors
half_error_line =        50 % lhs of tex error context
line =                   79 % for all other messaging

----------------------------------------------------------------------

Comment By: Hans Hagen (hagen)
Date: 2006-07-13 10:01

Message:
Logged In: YES 
user_id=927

i can think of a solution where it is controlled by a
variable in the cnf file 

pdftex.logbreaks=f

or so 

----------------------------------------------------------------------

Comment By: Tobias (towolf_)
Date: 2006-07-13 01:46

Message:
Logged In: YES 
user_id=3729

I see that backwards compatibility is a crucial and laudable aspect of the Tex system.

However, when facing my problem I would prefer no wrapping for my log.
Is it possible to make a small-scale personal modification and can you point me in 
the general direction of the place in the source if you think it is?

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-12 18:15

Message:
Logged In: YES 
user_id=421

The wrapping of lines in the log is a (mis)feature of TeX,
so there is nothing we can change about that without
breaking compatability.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=579&group_id=106

From noreply at sarovar.org  Thu Jul 13 13:22:14 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 13 Jul 2006 16:52:14 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-579 ] The log file is wrapped
Message-ID: <E1G0zGo-0006Ec-00@sarovar.org>

Bugs item #579, was opened at 2006-07-12 15:17
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=579&group_id=106

Category: web2c
Group: v1.30.0
Status: Closed
Resolution: Works For Me
Priority: 5
Submitted By: Tobias (towolf_)
Assigned to: Martin Schr?der (oneiros)
Summary: The log file is wrapped

Initial Comment:
[Note that I can?t tell which part of my install is responsible for this]

when I compile my source with $ pdflatex source.tex the log that is output is 
wrapped at column 79, which leads to unfortunate line breaks that make 
quickfixing my doument harder.
Often the line number is split off and escapes my errorformat string for Vim.
Can the wrapping be disabled? My Tex distro is Tetex 3 but I compiled pdftex 
1.40 beta from source.

LaTeX Warning: Reference `sec:method-survey' on page 5 undefined on 
input line
21.

[5]

LaTeX Warning: Reference `sec-corpus' on page 6 undefined on input line 58.


Package natbib Warning: Citation `Golub2004' on page 6 undefined on input 
line
60.

(/usr/local/share/texmf/tex/latex/lucida/ts1hlh.fd) [6] [7] [8] [9] [10]
[11] [12] [13]

LaTeX Warning: Reference `sec.res-dec' on page 14 undefined on input line 
386.

[14]

LaTeX Warning: Reference `sec.res-complexity' on page 15 undefined on 
input lin
e 407.


----------------------------------------------------------------------

>Comment By: Tobias (towolf_)
Date: 2006-07-13 11:22

Message:
Logged In: YES 
user_id=3729

Thanks Taco, that was what I was looking for.

The line that did it (which I had to fish from the the texmf.cnf shipped with the pdftex 
tarball) was this one:

max_print_line = 120

The others had no effect(?). And "line =" was not present in any template I found.

And surely, this was not a bug and would have been more appropriately filed as a 
support request.

So merci, I had searched extensively on the web and on newsgroups.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-13 08:55

Message:
Logged In: YES 
user_id=421

Still, it isn't a bug in pdfTeX.

WorksForMe. :-)

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2006-07-13 08:39

Message:
Logged In: YES 
user_id=1608

In web2c based systems, you can change a set of 
parameters is texmf.cnf:

max_print_error_line =   79 % for tex errors
half_error_line =        50 % lhs of tex error context
line =                   79 % for all other messaging

----------------------------------------------------------------------

Comment By: Hans Hagen (hagen)
Date: 2006-07-13 08:01

Message:
Logged In: YES 
user_id=927

i can think of a solution where it is controlled by a
variable in the cnf file 

pdftex.logbreaks=f

or so 

----------------------------------------------------------------------

Comment By: Tobias (towolf_)
Date: 2006-07-12 23:46

Message:
Logged In: YES 
user_id=3729

I see that backwards compatibility is a crucial and laudable aspect of the Tex system.

However, when facing my problem I would prefer no wrapping for my log.
Is it possible to make a small-scale personal modification and can you point me in 
the general direction of the place in the source if you think it is?

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-12 16:15

Message:
Logged In: YES 
user_id=421

The wrapping of lines in the log is a (mis)feature of TeX,
so there is nothing we can change about that without
breaking compatability.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=579&group_id=106

From noreply at sarovar.org  Fri Jul 14 22:57:31 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sat, 15 Jul 2006 02:27:31 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-580 ] Patch to make ToUnicode for
	Type1 fonts
Message-ID: <E1G1Uj5-0008Gp-00@sarovar.org>

Patches item #580, was opened at 2006-07-14 20:57
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=580&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Nobody (None)
Summary: Patch to make ToUnicode for Type1 fonts

Initial Comment:
This is a patch to pdftex so that it can create
ToUnicode entries for Type1
fonts. The main purpose is to make ligatures and some
other glyphs like
smallcap letters or oldstyle digits from OpenType fonts
searchable. This
patch also contains a minor fix that allows use of
fonts without embedding,
for example MinionPro or MyriadPro (which are
distributed with Acrobat
Reader >= 7.0 but from their use is restricted with
Acrobat Reader only).

How to apply:
~~~~~~~~~~~~~
- this patch applies to the pristine
pdftex-1.40.0-beta-20060213 sources
  only; if you have applied another patch(es) to the
sources, please
  discard them and start from the fresh ones.

- how to apply:

,--------
| cd /path/to/pdftex-1.40.0-beta-20060213/src
| cat /path/to/the/patch | patch -p1
| ./configure
| cd texk/web2c
| make pdfetex
`--------

If you want to be careful, try the patch with the
option '--dry-run' first to
see whether the patch can be applied without problems.


Usage:
~~~~~~
add the following lines into your document, somewhere
at the beginning:

,--------
| \input glyphtounicode.tex
| \pdfgentounicode=1
`--------

Customization:
~~~~~~~~~~~~~
If pdftex cannot generate the right ToUnicode value for
some glyphs
(probably because the glyph name is not ``known'' to
pdftex), it's possible
to add further entries so pdftex can learn how to
generate unicode for such
``unknown'' glyphs.

The syntax is simple:

\pdfglyphtounicode{<glyph-name>}{<unicode-value>}

Example:

\pdfglyphtounicode{A}{0041}

says that glyph 'A' has its unicode U+0041

The entries in glyphtounicode.tex cover Adobe Glyph
List (glyphlist.txt
version 2.0) and some addtional glyphs
(texglyphlist.txt version 2.33,
coming from from lcdf-typetools), plus some additional
entries for
ligatures.

If some glyph name cannot be found, pdftex does some
simple name
translations:

- remove any ".xxx" suffix from glyph name, where "xxx"
is a string
  consisting of alphabetic characters. For example
"A.sc" => "A"

- remove suffix like "small", "oldstyle", "inferior"
and "superior" from
  glyph name. For example "Asmall" => "A"

The result name then is looked up again to find a unicode.

Ligatures require a special form of ToUnicode. Example:

\pdfglyphtounicode{ff}{00660066}

here '0066' is the unicode string for 'f'. Some
ligatures have their name
like 'f_f_i', in such case the command should be

\pdfglyphtounicode{f_f_i}{006600660069}

ie '_' is removed from the glyph name, and then all
letters are translated
to their unicode string.


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=580&group_id=106

From noreply at sarovar.org  Sun Jul 16 13:19:06 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sun, 16 Jul 2006 16:49:06 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-580 ] Patch to make ToUnicode for
	Type1 fonts
Message-ID: <E1G24eQ-0000nP-00@sarovar.org>

Patches item #580, was opened at 2006-07-14 20:57
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=580&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Nobody (None)
Summary: Patch to make ToUnicode for Type1 fonts

Initial Comment:
This is a patch to pdftex so that it can create
ToUnicode entries for Type1
fonts. The main purpose is to make ligatures and some
other glyphs like
smallcap letters or oldstyle digits from OpenType fonts
searchable. This
patch also contains a minor fix that allows use of
fonts without embedding,
for example MinionPro or MyriadPro (which are
distributed with Acrobat
Reader >= 7.0 but from their use is restricted with
Acrobat Reader only).

How to apply:
~~~~~~~~~~~~~
- this patch applies to the pristine
pdftex-1.40.0-beta-20060213 sources
  only; if you have applied another patch(es) to the
sources, please
  discard them and start from the fresh ones.

- how to apply:

,--------
| cd /path/to/pdftex-1.40.0-beta-20060213/src
| cat /path/to/the/patch | patch -p1
| ./configure
| cd texk/web2c
| make pdfetex
`--------

If you want to be careful, try the patch with the
option '--dry-run' first to
see whether the patch can be applied without problems.


Usage:
~~~~~~
add the following lines into your document, somewhere
at the beginning:

,--------
| \input glyphtounicode.tex
| \pdfgentounicode=1
`--------

Customization:
~~~~~~~~~~~~~
If pdftex cannot generate the right ToUnicode value for
some glyphs
(probably because the glyph name is not ``known'' to
pdftex), it's possible
to add further entries so pdftex can learn how to
generate unicode for such
``unknown'' glyphs.

The syntax is simple:

\pdfglyphtounicode{<glyph-name>}{<unicode-value>}

Example:

\pdfglyphtounicode{A}{0041}

says that glyph 'A' has its unicode U+0041

The entries in glyphtounicode.tex cover Adobe Glyph
List (glyphlist.txt
version 2.0) and some addtional glyphs
(texglyphlist.txt version 2.33,
coming from from lcdf-typetools), plus some additional
entries for
ligatures.

If some glyph name cannot be found, pdftex does some
simple name
translations:

- remove any ".xxx" suffix from glyph name, where "xxx"
is a string
  consisting of alphabetic characters. For example
"A.sc" => "A"

- remove suffix like "small", "oldstyle", "inferior"
and "superior" from
  glyph name. For example "Asmall" => "A"

The result name then is looked up again to find a unicode.

Ligatures require a special form of ToUnicode. Example:

\pdfglyphtounicode{ff}{00660066}

here '0066' is the unicode string for 'f'. Some
ligatures have their name
like 'f_f_i', in such case the command should be

\pdfglyphtounicode{f_f_i}{006600660069}

ie '_' is removed from the glyph name, and then all
letters are translated
to their unicode string.


----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2006-07-16 11:19

Message:
Logged In: YES 
user_id=710

patch updated by a bug fix from Akira

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=580&group_id=106

From noreply at sarovar.org  Wed Jul 19 08:08:39 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 19 Jul 2006 11:38:39 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-580 ] Patch to make ToUnicode for
	Type1 fonts
Message-ID: <E1G35Ed-0000AR-00@sarovar.org>

Patches item #580, was opened at 2006-07-14 20:57
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=580&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Nobody (None)
Summary: Patch to make ToUnicode for Type1 fonts

Initial Comment:
This is a patch to pdftex so that it can create
ToUnicode entries for Type1
fonts. The main purpose is to make ligatures and some
other glyphs like
smallcap letters or oldstyle digits from OpenType fonts
searchable. This
patch also contains a minor fix that allows use of
fonts without embedding,
for example MinionPro or MyriadPro (which are
distributed with Acrobat
Reader >= 7.0 but from their use is restricted with
Acrobat Reader only).

How to apply:
~~~~~~~~~~~~~
- this patch applies to the pristine
pdftex-1.40.0-beta-20060213 sources
  only; if you have applied another patch(es) to the
sources, please
  discard them and start from the fresh ones.

- how to apply:

,--------
| cd /path/to/pdftex-1.40.0-beta-20060213/src
| cat /path/to/the/patch | patch -p1
| ./configure
| cd texk/web2c
| make pdfetex
`--------

If you want to be careful, try the patch with the
option '--dry-run' first to
see whether the patch can be applied without problems.


Usage:
~~~~~~
add the following lines into your document, somewhere
at the beginning:

,--------
| \input glyphtounicode.tex
| \pdfgentounicode=1
`--------

Customization:
~~~~~~~~~~~~~
If pdftex cannot generate the right ToUnicode value for
some glyphs
(probably because the glyph name is not ``known'' to
pdftex), it's possible
to add further entries so pdftex can learn how to
generate unicode for such
``unknown'' glyphs.

The syntax is simple:

\pdfglyphtounicode{<glyph-name>}{<unicode-value>}

Example:

\pdfglyphtounicode{A}{0041}

says that glyph 'A' has its unicode U+0041

The entries in glyphtounicode.tex cover Adobe Glyph
List (glyphlist.txt
version 2.0) and some addtional glyphs
(texglyphlist.txt version 2.33,
coming from from lcdf-typetools), plus some additional
entries for
ligatures.

If some glyph name cannot be found, pdftex does some
simple name
translations:

- remove any ".xxx" suffix from glyph name, where "xxx"
is a string
  consisting of alphabetic characters. For example
"A.sc" => "A"

- remove suffix like "small", "oldstyle", "inferior"
and "superior" from
  glyph name. For example "Asmall" => "A"

The result name then is looked up again to find a unicode.

Ligatures require a special form of ToUnicode. Example:

\pdfglyphtounicode{ff}{00660066}

here '0066' is the unicode string for 'f'. Some
ligatures have their name
like 'f_f_i', in such case the command should be

\pdfglyphtounicode{f_f_i}{006600660069}

ie '_' is removed from the glyph name, and then all
letters are translated
to their unicode string.


----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2006-07-19 06:08

Message:
Logged In: YES 
user_id=710

patch updated to fix a bug reported by Dohyun Kim

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-07-16 11:19

Message:
Logged In: YES 
user_id=710

patch updated by a bug fix from Akira

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=580&group_id=106

From noreply at sarovar.org  Tue Jul 25 00:14:48 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 25 Jul 2006 03:44:48 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-385 ] \pdfnoligatures should
	leave kerning intact
Message-ID: <E1G58hM-0002Bp-00@sarovar.org>

Feature Requests item #385, was opened at 2005-07-10 17:38
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=385&group_id=106

Category: None
Group: None
>Status: Closed
>Resolution: Postponed
Priority: 5
Submitted By: Robert (schlcht)
>Assigned to: Taco Hoekwater (taco)
Summary: \pdfnoligatures should leave kerning intact

Initial Comment:
% The new \ptexnoligatures primitive will break the
% horizontal positioning of \mathaccents if the base
% character is slanted.
% There is no problem with \accent, nor with \mathaccent
% on upright characters:

$\dot{A} \dot{\rm{A}} \dot{\Delta} \dot{\mit\Delta}$
{\tenit \accent'137 A}

\ptexnoligatures\tenit % OK
\ptexnoligatures\textfont0 % = cmr10, \rm  % OK
\ptexnoligatures\textfont1 % = cmmi10, \mit % breaks shift

$\dot{A} \dot{\rm{A}} \dot{\Delta} \dot{\mit\Delta}$
{\tenit \accent'137 A}

\bye,
Robert


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-07-25 00:14

Message:
Logged In: YES 
user_id=421

I think further effort on this is wasted, as
\ptexnoligatures will be reimplemented with OpenType fonts
anyway, i.e. in the near future. So we should just document
the current behaviour and carry on.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2006-02-20 17:50

Message:
Logged In: YES 
user_id=1608

Maybe we should just document the weird behaviour then and
keep the thing marked experimental? 

I do not have lots of time to spend on this hack right now, 
nor do I want to, since everything I do now will have to be 
thrown out again for version 1.50.

The change file that is attached to this feature item can 
then be ignored, except for that one line that  re-enables 
\tagcode.



----------------------------------------------------------------------

Comment By: Bernd Raichle (bernd)
Date: 2006-02-20 17:32

Message:
Logged In: YES 
user_id=3344

Looking at Taco's change file, it should be possible to
break his "non-vmode fix" by inserting
\vbox{\pdfnoligatures\font} or \vadjust{\pdfligatures\font}
in hmode.

A final fix is to reimplement this \pdfnoligatures
primitive: Either do not only change the |tag| field in the
char_info for all font glyphs, but remove the ligs from the
lig/kern program.  Or save the information that no ligature
should be constructed within the hlist (using a special node
to start and end the nolig part similar to the setlanguage
whatsit nodes or by adding the nolig flag to the character
nodes).

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-02-20 16:40

Message:
Logged In: YES 
user_id=2217

Ah, I didn't realize it had such confusing effects. However,
I still believe that disallowing it in non-vmode is too
restrictive.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2006-02-20 09:56

Message:
Logged In: YES 
user_id=1608

But it is not global for the current paragraph, it is 
only applied to words that are looked at for hyphenation.
Try this test, and have a close look at the first and third
word of the paragraph. There are even stranger possibilities
when \language is taken into account.

\font\tst=cmr10
\hsize=2in
\noindent \tst efficiency efficiency \hbox{efficiency}
\pdfnoligatures\tst efficiency efficiency efficiency
\bye


----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-02-19 19:19

Message:
Logged In: YES 
user_id=2217

In my opinion, this latest patch is too restrictive. It
should be sufficient to document \pdfnoligatures as one of
those commands whose scope is global to the current
paragraph (and the rest of the document), just like setting,
say, \hyphenpenalty or \hsize in the middle of a paragraph
affects the complete paragraph. The current behaviour is
also consistent with that of the hz-related stuff: \rpcode
and friends have a retroactive effect, too. (Besides, the
patch would break microtype.sty, which sets up the fonts as
they are being loaded, which would happen in horizontal
mode, mostly... ;-)

PS. If it was for me, this feature request could be closed;
I totally accept the "known limitation".


----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2006-02-15 10:58

Message:
Logged In: YES 
user_id=1608

The attached patch disallows \pdfnoligatures and \tagcode in 
non-vmodes, and restores the assignment functionality of  
\tagcode (that was an unrelated bug in 1.40-beta)



----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2006-02-15 10:17

Message:
Logged In: YES 
user_id=1608

We can disallow the primitive in non-vertical mode. Makes sense.

----------------------------------------------------------------------

Comment By: Bernd Raichle (bernd)
Date: 2006-02-15 10:10

Message:
Logged In: YES 
user_id=3344

Another limitation which should be documented:

If \ptexnoligatures<font> is applied within a paragraph, the
ligs and kerns created and inserted before this command are
removed depending if a hyphenation pass is necessary to
justify the paragraph.

\ptexnoligatures<font> has the _global_ side effect to
suppress all ligs and kerns of the font which are created
_afterwards in time_.  TeX breaks the lines of a paragraph
at the end of the paragraph.  If hyphenation has to be
applied, ligs are remapped to single chars, (implicit) kerns
are removed ... and reconstituted afterwards using the font
information valid at this (later) time.  If the font info is
changed in between, which is true if \ptexnoligatures<font>
is applied, already inserted ligs and kerns are removed.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-07-12 22:23

Message:
Logged In: YES 
user_id=421

Changing this into a feature request.

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-07-10 18:50

Message:
Logged In: YES 
user_id=1608

This is because it (\ptexnoligatures) also disables the
kerning information for the font. You'll have to accept that
as a "known limitation" for now.




----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=385&group_id=106

From noreply at sarovar.org  Tue Jul 25 11:04:49 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 25 Jul 2006 14:34:49 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-573 ] add \ArtBox to pages
Message-ID: <E1G5IqP-0004nR-00@sarovar.org>

Feature Requests item #573, was opened at 2006-06-20 07:32
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=573&group_id=106

Category: None
Group: None
>Status: Closed
>Resolution: Rejected
Priority: 5
Submitted By: Alexei Gilchrist (alexei2)
Assigned to: Martin Schr?der (oneiros)
Summary: add \ArtBox to pages

Initial Comment:
Hi,

Is it possible to add an \ArtBox entry to the pages 
produces by pdftex (with a tight boundingbox)? This 
way the output of pdftex could be used as input into 
other progs that use pdf such as a pdf annotating 
tool. At the moment latex -> dvips -E -> dvitopdf 
seems to be the only way.

thanks,  Alexei

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-07-25 11:04

Message:
Logged In: YES 
user_id=421

That would be hard to do, but can be easily done with other
applications: gs -sDEVICE=bbox gives you the bounding box,
and adding it to the pages should be easy with e.g. pdftk.

----------------------------------------------------------------------

Comment By: Alexei Gilchrist (alexei2)
Date: 2006-07-25 03:04

Message:
Logged In: YES 
user_id=3683

By "tight" I mean a boundingbox that contains just the
added ink on a page, not the page bounding box. This way
the output could be used by other programs that don't
assume that TeX will be the final step in the production
process.

Imagine generating a latex equation as a pdf, then wanting
to place that equation somewhere on a graph generated by
other means - if you know a tight bounding box around that
equation then it's pretty easy to place the pdf object in
the right place. If all you've got is the page dimensions
then it's pretty hopeless.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-24 23:55

Message:
Logged In: YES 
user_id=421

You can already add it manually with \pdfpage{s}attr.

But you probably want an automatic entry. Define "tight":
pdfTeX knows only the MediaBox (i.e. page dimensions).

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=573&group_id=106

From noreply at sarovar.org  Mon Jul 24 23:55:48 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 25 Jul 2006 03:25:48 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-573 ] add \ArtBox to pages
Message-ID: <E1G58Oy-0002vL-00@sarovar.org>

Feature Requests item #573, was opened at 2006-06-20 07:32
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=573&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Alexei Gilchrist (alexei2)
>Assigned to: Martin Schr?der (oneiros)
Summary: add \ArtBox to pages

Initial Comment:
Hi,

Is it possible to add an \ArtBox entry to the pages 
produces by pdftex (with a tight boundingbox)? This 
way the output of pdftex could be used as input into 
other progs that use pdf such as a pdf annotating 
tool. At the moment latex -> dvips -E -> dvitopdf 
seems to be the only way.

thanks,  Alexei

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-07-24 23:55

Message:
Logged In: YES 
user_id=421

You can already add it manually with \pdfpage{s}attr.

But you probably want an automatic entry. Define "tight":
pdfTeX knows only the MediaBox (i.e. page dimensions).

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=573&group_id=106

From noreply at sarovar.org  Mon Jul 24 23:46:44 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 25 Jul 2006 03:16:44 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-577 ] Type 3 fonts: on screen fine,
	on paper filled and displaced
Message-ID: <E1G58GC-0007oo-00@sarovar.org>

Bugs item #577, was opened at 2006-06-28 13:09
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=577&group_id=106

Category: Fonts
Group: v1.30.0
Status: Open
>Resolution: Works For Me
Priority: 5
Submitted By: Peter Dyballa (ballapete)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Type 3 fonts: on screen fine, on paper filled and displaced

Initial Comment:
Hello!

It's pdfeTeX, Version 3.141592-1.30.4-2.2 (Web2C 7.5.5), on Mac OS 
X 10.4.6, PPC. The Type 3 font is dijkstra, a famous person's 
handwriting, as distributed by many SunOS and Solaris versions.

Until mid May I had no problem with pdfTeX, dijkstra, and my EPSON 
EPL-5800 (PostScript 3). This week I again wanted to print a personal 
letter with Prof. Dijkstra's handwriting used for my letter head. And 
some letters were filled (P,e,9), others were horizontally and/or 
vertically displaced from their correct positions. Dijkstra was installed 
with fontinst.

Can this be a pdfTeX problem? End of May I added almost 1 GB of files 
to update SDKs etc. in Mac OS X to be able to produce Universal 
Binaries. The last few Tiger versions are known as a bit buggy. My last 
TeX binaries updates happened in the middle of May, but I have no 
LOG files from this. The recent LOGs from making the format files 
contain the string above ...

Greetings

Pete

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-07-24 23:46

Message:
Logged In: YES 
user_id=421

[Sorry for not reacting earlier, but gforge sends no mail
when a file is attached; you also have to add a comment.]

The attached file uses a Type 1 font and prints perfectly on
an Lexmark Optra T612 (which has a PS3 RIP)...

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-06-28 16:09

Message:
Logged In: YES 
user_id=421

Please provide a pdf showing the problems (attach it to this
bug).

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=577&group_id=106

From noreply at sarovar.org  Tue Jul 25 03:04:26 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 25 Jul 2006 06:34:26 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-573 ] add \ArtBox to pages
Message-ID: <E1G5BLW-0000eq-00@sarovar.org>

Feature Requests item #573, was opened at 2006-06-20 05:32
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=573&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Alexei Gilchrist (alexei2)
Assigned to: Martin Schr?der (oneiros)
Summary: add \ArtBox to pages

Initial Comment:
Hi,

Is it possible to add an \ArtBox entry to the pages 
produces by pdftex (with a tight boundingbox)? This 
way the output of pdftex could be used as input into 
other progs that use pdf such as a pdf annotating 
tool. At the moment latex -> dvips -E -> dvitopdf 
seems to be the only way.

thanks,  Alexei

----------------------------------------------------------------------

>Comment By: Alexei Gilchrist (alexei2)
Date: 2006-07-25 01:04

Message:
Logged In: YES 
user_id=3683

By "tight" I mean a boundingbox that contains just the
added ink on a page, not the page bounding box. This way
the output could be used by other programs that don't
assume that TeX will be the final step in the production
process.

Imagine generating a latex equation as a pdf, then wanting
to place that equation somewhere on a graph generated by
other means - if you know a tight bounding box around that
equation then it's pretty easy to place the pdf object in
the right place. If all you've got is the page dimensions
then it's pretty hopeless.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-24 21:55

Message:
Logged In: YES 
user_id=421

You can already add it manually with \pdfpage{s}attr.

But you probably want an automatic entry. Define "tight":
pdfTeX knows only the MediaBox (i.e. page dimensions).

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=573&group_id=106

From noreply at sarovar.org  Tue Jul 25 00:02:02 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 25 Jul 2006 03:32:02 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-572 ] non-compression of
	pdfxform
Message-ID: <E1G58V0-0003ic-00@sarovar.org>

Feature Requests item #572, was opened at 2006-06-10 23:11
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=572&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: ivo welch (iaw4)
Assigned to: Nobody (None)
Summary: non-compression of pdfxform

Initial Comment:

would it be possible to add a feature to avoid
compression of the user defined pdfxform stream?

[goal:  I want to define a string that I can then
change via a shell/perl script in the .pdf file itself.
 I know I have to keep the same number of characters.]


\newcount\XOBJA
\setbox1=\hbox{12345678909876543210123456789} % this is
a special
string that one can later replace in the pdf file by hand
\pdfxform 1 \XOBJA=\pdflastxform

\begin{document}
Here is my string on page \arabic{page}: \pdfrefxform
\XOBJA
\end{document}

$ sed 's/12345678909876543210123456789/for user
pdftex.../' < myfile.pdf


I experimented with setting pdfcompresslevel and
resetting it, but it is not reliable in when
compression starts.  in any case, I do not want the
rest at low compression, just my own XOBJ xform.

regards,

/iaw


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-07-25 00:02

Message:
Logged In: YES 
user_id=421

Ivo,
sorry for not reacting earlier. Adding this feature seems
possible. Is it still needed?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=572&group_id=106

From noreply at sarovar.org  Tue Jul 25 19:43:46 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 25 Jul 2006 23:13:46 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-564 ] cannot compile pdftex under cygwin
	anymore
Message-ID: <E1G5Qwc-0004D5-00@sarovar.org>

Bugs item #564, was opened at 2006-05-26 02:31
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=564&group_id=106

Category: None
Group: None
>Status: Closed
>Resolution: Rejected
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: Nobody (None)
Summary: cannot compile pdftex under cygwin anymore

Initial Comment:
I've recently updated my cygwin system, and since then
am not able to compile pdftex anymore.

gcc -v gives:
| gcc version 3.4.4 (cygming special) (gdc 0.12, using
dmd 0.125)

The last lines of build.sh's output are:
| srcdir=../../../src/texk/web2c /bin/sh
../../../src/texk/web2c/web2c/convert tangleboot
| gcc -DHAVE_CONFIG_H  -I. -I../../../src/texk/web2c
-I.. -I../../../src/texk/web2c/..   -g -O2  -c
tangleboot.c -o tangleboot.o
| In file included from tangleboot.c:94:
| tangleboot.h:34: error: conflicting types for 'getline'
| /usr/include/sys/stdio.h:31: error: previous
declaration of 'getline' was here
| tangleboot.h:34: error: conflicting types for 'getline'
| /usr/include/sys/stdio.h:31: error: previous
declaration of 'getline' was here
| make: *** [tangleboot.o] Error 1

What to do?


----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2006-05-26 03:05

Message:
Logged In: NO 

It's a bug in Cygwin. See the following links:

http://www.mail-archive.com/tetex at dbs.uni-hannover.de/msg00961.html
http://ftp.tug.org/mail/archives/pdftex/2006-February/006370.html

Best,
v.


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=564&group_id=106

From noreply at sarovar.org  Tue Jul 25 19:46:07 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 25 Jul 2006 23:16:07 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-565 ] ttf2afm fails to include
	characters specified with uniXXXX
Message-ID: <E1G5Qyt-0004EZ-00@sarovar.org>

Bugs item #565, was opened at 2006-05-29 16:37
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=565&group_id=106

Category: None
>Group: v1.30.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Mike Spivey (spivey)
>Assigned to: The Thanh Han (hanthethanh)
Summary: ttf2afm fails to include characters specified with uniXXXX

Initial Comment:
If characters are specified in an encoding vector as
uniXXXX (with XXXX a hexadecimal unicode value), then
these characters are not included in the AFM output,
unlike characters that are specified by name.  The same
goes for characters specifed by position.

A suggested patch is attached.

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-07-25 19:46

Message:
Logged In: YES 
user_id=421

Thanh, ttf2afm is your baby. :-) 
Pleae check.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=565&group_id=106

From noreply at sarovar.org  Tue Jul 25 19:46:49 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 25 Jul 2006 23:16:49 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-565 ] ttf2afm fails to include
	characters specified with uniXXXX
Message-ID: <E1G5QzZ-0004Ep-00@sarovar.org>

Bugs item #565, was opened at 2006-05-29 16:37
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=565&group_id=106

>Category: ttf2afm
Group: v1.30.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Mike Spivey (spivey)
Assigned to: The Thanh Han (hanthethanh)
Summary: ttf2afm fails to include characters specified with uniXXXX

Initial Comment:
If characters are specified in an encoding vector as
uniXXXX (with XXXX a hexadecimal unicode value), then
these characters are not included in the AFM output,
unlike characters that are specified by name.  The same
goes for characters specifed by position.

A suggested patch is attached.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-25 19:46

Message:
Logged In: YES 
user_id=421

Thanh, ttf2afm is your baby. :-) 
Pleae check.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=565&group_id=106

From martin at oneiros.de  Tue Jul 25 20:16:43 2006
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 25 Jul 2006 20:16:43 +0200
Subject: [NTG-pdftex] manual issues
In-Reply-To: <4495B0AE.4020003@gust.org.pl>
References: <4495B0AE.4020003@gust.org.pl>
Message-ID: <68c491a60607251116t122530b7tc04d4c3a14d265c8@mail.gmail.com>

2006/6/18, Pawe? Jackowski <P.Jackowski at gust.org.pl>:
> the following primitives are not documented. Could you please comment a
> status?
>
> \pdfpxdimen
> \pdffirstlineheight
> \pdflastlinedepth
> \pdfeachlinedepth
> \pdfeachlineheight

Thanh's experimental?

> \pdfstrcmp, \pdfmatch % will be replaced by luatex?

Experimental.

> \pdfretval

Nice concept, but nobody it... Experimental.

> anything else?

Nothing I can think of. But I'm probably missing something...

Best
   Martin

From martin at oneiros.de  Tue Jul 25 21:11:37 2006
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 25 Jul 2006 21:11:37 +0200
Subject: [NTG-pdftex] 1.40.0-beta-20060725
Message-ID: <68c491a60607251211k8bd8b0aqedce51a6d00fc029@mail.gmail.com>

http://sarovar.org/download.php/1060/pdftex-1.40.0-beta-20060725.tar.bz2

---------------------------------------------------------------
pdfTeX 3.141592-1.40.0-beta-20060725 was released on 2006-07-25
---------------------------------------------------------------
- added patches by Christian Schenk forwarded by Hartmut
- added patch 421 (popen) from Taco
- added lots of (void) to writettf* and ttf2afm to silence the compiler
- removed some unused variables from tounicode.c
- add new code by Thanh (patch 580)
- added security patch for xpdf :-(

Yes, we are alive. :-)

Before I go further, I wanted to release the stuff I have on my
harddisc and found in my inbox. Most likely I've forgotten some
patches; please check.

Best
   Martin

From noreply at sarovar.org  Tue Jul 25 21:30:43 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 01:00:43 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-555 ] pdfLaTeX coredumps on OpenBSD
Message-ID: <E1G5Sc7-0006lt-00@sarovar.org>

Bugs item #555, was opened at 2006-05-20 16:16
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=555&group_id=106

>Category: hz
Group: v1.30.0
Status: Open
>Resolution: Accepted
Priority: 5
Submitted By: Dag Leine (dag)
>Assigned to: Taco Hoekwater (taco)
Summary: pdfLaTeX coredumps on OpenBSD

Initial Comment:
I've found, that pdfLaTeX coredumps on OpenBSD if I use
amsmath and microtype in some math environments. Here
is a minimal latex document for showing the bug:

> cat minidump.tex
\documentclass{article}
\usepackage{amsmath}
\usepackage{microtype}
\setlength{\parindent}{0pt}
\begin{document}
  \begin{align}
    x
  \end{align}
\end{document}
% end of minidump.tex

> pdflatex minidump
This is pdfeTeX, Version 3.141592-1.30.6-2.2 (Web2C 7.5.5)
entering extended mode
(./minidump.tex
LaTeX2e <2003/12/01>
Babel <v3.8d> and hyphenation patterns for american,
french, german, ngerman, b
ahasa, basque, bulgarian, catalan, croatian, czech,
danish, dutch, esperanto, e
stonian, finnish, greek, icelandic, irish, italian,
latin, magyar, norsk, polis
h, portuges, romanian, russian, serbian, slovak,
slovene, spanish, swedish, tur
kish, ukrainian, nohyphenation, loaded.
(/usr/local/share/texmf-dist/tex/latex/base/article.cls
Document Class: article 2004/02/16 v1.4f Standard LaTeX
document class
(/usr/local/share/texmf-dist/tex/latex/base/size10.clo))
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/local/share/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/local/share/texmf-dist/tex/latex/microtype/microtype.sty
(/usr/local/share/texmf-dist/tex/latex/graphics/keyval.sty)
(/usr/local/share/texmf-dist/tex/latex/microtype/microtype.cfg))
(./minidump.aux)
(/usr/local/share/texmf-dist/tex/latex/microtype/mt-cmr.cfg)Segmentation
fault (core dumped) 


A quick look with gdb shows, that it hangs in line 4396
 of pdfetex2.c:
  c = getrpcode ( f , mem [p ].hh.b1 ) ;

Here p=999996 and f=-4096

Since f seems to be a table index to pdffontrbase a
negative value does not make sense to my mind.

I've tryed the same on a LINUX machine. There pdfLaTeX
does not crash, but p and f have the same values as
under OpenBSD.

As the most bad work around after taking *Word I've
added a line of code which leaves the routine if f
becomes negative. This seems to work in the sense, that
there isn't any more a core dump.

regards
  Dag

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-07-25 21:30

Message:
Logged In: YES 
user_id=421

This still happens with the latest beta (I've got an OpenBSD
machine now myself):
Program received signal SIGSEGV, Segmentation fault.
0x1c048f03 in zcharpw (p=999996, side=1 '\001') at
pdftex2.c:3191
3191        c = getrpcode ( f , mem [p ].hh.b1 ) ;
(gdb) bt
#0  0x1c048f03 in zcharpw (p=999996, side=1 '\001') at
pdftex2.c:3191
#1  0x1c053d53 in zpostlinebreak (d=1) at pdftex2.c:7715
#2  0x1c007659 in zlinebreak (d=1) at pdftexini.c:2136
#3  0x1c05bb11 in initmath () at pdftex3.c:141
#4  0x1c065091 in maincontrol () at pdftex3.c:4582
#5  0x1c0130a2 in mainbody () at pdftexini.c:5647
#6  0x1c069d9e in main (ac=2, av=0xcfbd239c) at
pdftexextra.c:340
(gdb) l pdftex2.c:3191
3186        c = getlpcode ( f , mem [p ].hh.b1 ) ;
3187        lastleftmostchar = p ;
3188      } 
3189      else {
3190          
3191        c = getrpcode ( f , mem [p ].hh.b1 ) ;
3192        lastrightmostchar = p ;
3193      } 
3194      if ( c == 0 ) 
3195      return Result ;
(gdb) p f
$1 = -4096
(gdb) p p    
$2 = 999996
(gdb) p mem[p].hh   
$3 = {v = {LH = -268435455, RH = 675}, u = {B1 = 1, B0 = -4096}}


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=555&group_id=106

From hartmut_henkel at gmx.de  Tue Jul 25 22:30:39 2006
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Tue, 25 Jul 2006 22:30:39 +0200 (CEST)
Subject: [NTG-pdftex] 1.40.0-beta-20060725
In-Reply-To: <68c491a60607251211k8bd8b0aqedce51a6d00fc029@mail.gmail.com>
References: <68c491a60607251211k8bd8b0aqedce51a6d00fc029@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0607252203020.3816@hahepc1.hahe>

On Tue, 25 Jul 2006, Martin Schr?der wrote:

> http://sarovar.org/download.php/1060/pdftex-1.40.0-beta-20060725.tar.bz2
>
> ---------------------------------------------------------------
> pdfTeX 3.141592-1.40.0-beta-20060725 was released on 2006-07-25
> ---------------------------------------------------------------
> - added patches by Christian Schenk forwarded by Hartmut
> - added patch 421 (popen) from Taco
> - added lots of (void) to writettf* and ttf2afm to silence the compiler
> - removed some unused variables from tounicode.c
> - add new code by Thanh (patch 580)
> - added security patch for xpdf :-(

- added JFIF detection patch to writejpg.c (was bug 548)

> Before I go further, I wanted to release the stuff I have on my
> harddisc and found in my inbox. Most likely I've forgotten some
> patches; please check.

yes, missing are:

* bug + patch 505
* bug + patch 509

* Date: Mon, 1 May 2006 23:48:20 +0200 (CEST) To: ntg-pdftex at ntg.nl
Subject: [NTG-pdftex] /Type/FontDescriptor missing

* Date: Tue, 2 May 2006 00:10:07 +0200 (CEST) To: ntg-pdftex at ntg.nl
Subject: [NTG-pdftex] bug in utils.c of pdftex-1.40-beta-20060213

* the jbig2 patch, jbig2-pdftex-060510a.tgz, private E-Mail from Wed, 10
May 2006 22:28:09 +0200 (CEST)

On sarovar we can close bug 393, as the patch is in since some time.
Also patch 453, object streams, can be closed. Same with patch 386, 432,
and 434.

Regards, Hartmut

From hanthethanh at gmail.com  Tue Jul 25 22:51:41 2006
From: hanthethanh at gmail.com (Thanh Han The)
Date: Tue, 25 Jul 2006 22:51:41 +0200
Subject: [NTG-pdftex] manual issues
Message-ID: <74f506dc0607251351v160282eal69be00e3b743b3f3@mail.gmail.com>

On Tue, Jul 25, 2006 at 08:16:43PM +0200, Martin Schr?der wrote:
> 2006/6/18, Pawe? Jackowski <P.Jackowski at gust.org.pl>:
> > the following primitives are not documented. Could you please comment a
> > status?
> >
> > \pdfpxdimen
> > \pdffirstlineheight
> > \pdflastlinedepth
> > \pdfeachlinedepth
> > \pdfeachlineheight
>
> Thanh's experimental?

actually they were Han's requests. Don't know if they are
helpful, but it doesn't hurt to have them there.

Thanh

From hanthethanh at gmail.com  Tue Jul 25 22:52:48 2006
From: hanthethanh at gmail.com (Thanh Han The)
Date: Tue, 25 Jul 2006 22:52:48 +0200
Subject: [NTG-pdftex] [ pdftex-Bugs-565 ] ttf2afm fails to include
	characters specified with uniXXXX
Message-ID: <74f506dc0607251352k3e68c708s3c7808c2c5dad98a@mail.gmail.com>

On Tue, Jul 25, 2006 at 11:16:49PM +0530, noreply at sarovar.org wrote:
> Bugs item #565, was opened at 2006-05-29 16:37
> You can respond by visiting:
> http://sarovar.org/tracker/?func=detail%26atid=493%26aid=565%26group_id=106
>
> >Category: ttf2afm
> Group: v1.30.0
> Status: Open
> Resolution: None
> Priority: 5
> Submitted By: Mike Spivey (spivey)
> Assigned to: The Thanh Han (hanthethanh)
> Summary: ttf2afm fails to include characters specified with uniXXXX
>
> Initial Comment:
> If characters are specified in an encoding vector as
> uniXXXX (with XXXX a hexadecimal unicode value), then
> these characters are not included in the AFM output,
> unlike characters that are specified by name.  The same
> goes for characters specifed by position.
>
> A suggested patch is attached.
>
> ----------------------------------------------------------------------
>
> Comment By: Martin Schr?der (oneiros)
> Date: 2006-07-25 19:46
>
> Message:
> Logged In: YES
> user_id=421
>
> Thanh, ttf2afm is your baby. :-)
> Pleae check.

yes sir :)

I have looked at the patch and think you can accept it.

Thanh

From noreply at sarovar.org  Tue Jul 25 23:06:36 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 02:36:36 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-555 ] pdfLaTeX coredumps on OpenBSD
Message-ID: <E1G5U6u-0006sc-00@sarovar.org>

Bugs item #555, was opened at 2006-05-20 16:16
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=555&group_id=106

Category: hz
Group: v1.30.0
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Dag Leine (dag)
Assigned to: Taco Hoekwater (taco)
Summary: pdfLaTeX coredumps on OpenBSD

Initial Comment:
I've found, that pdfLaTeX coredumps on OpenBSD if I use
amsmath and microtype in some math environments. Here
is a minimal latex document for showing the bug:

> cat minidump.tex
\documentclass{article}
\usepackage{amsmath}
\usepackage{microtype}
\setlength{\parindent}{0pt}
\begin{document}
  \begin{align}
    x
  \end{align}
\end{document}
% end of minidump.tex

> pdflatex minidump
This is pdfeTeX, Version 3.141592-1.30.6-2.2 (Web2C 7.5.5)
entering extended mode
(./minidump.tex
LaTeX2e <2003/12/01>
Babel <v3.8d> and hyphenation patterns for american,
french, german, ngerman, b
ahasa, basque, bulgarian, catalan, croatian, czech,
danish, dutch, esperanto, e
stonian, finnish, greek, icelandic, irish, italian,
latin, magyar, norsk, polis
h, portuges, romanian, russian, serbian, slovak,
slovene, spanish, swedish, tur
kish, ukrainian, nohyphenation, loaded.
(/usr/local/share/texmf-dist/tex/latex/base/article.cls
Document Class: article 2004/02/16 v1.4f Standard LaTeX
document class
(/usr/local/share/texmf-dist/tex/latex/base/size10.clo))
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/local/share/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/local/share/texmf-dist/tex/latex/microtype/microtype.sty
(/usr/local/share/texmf-dist/tex/latex/graphics/keyval.sty)
(/usr/local/share/texmf-dist/tex/latex/microtype/microtype.cfg))
(./minidump.aux)
(/usr/local/share/texmf-dist/tex/latex/microtype/mt-cmr.cfg)Segmentation
fault (core dumped) 


A quick look with gdb shows, that it hangs in line 4396
 of pdfetex2.c:
  c = getrpcode ( f , mem [p ].hh.b1 ) ;

Here p=999996 and f=-4096

Since f seems to be a table index to pdffontrbase a
negative value does not make sense to my mind.

I've tryed the same on a LINUX machine. There pdfLaTeX
does not crash, but p and f have the same values as
under OpenBSD.

As the most bad work around after taking *Word I've
added a line of code which leaves the routine if f
becomes negative. This seems to work in the sense, that
there isn't any more a core dump.

regards
  Dag

----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2006-07-25 23:06

Message:
Logged In: YES 
user_id=1608

ok, will check tomorrow

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-25 21:30

Message:
Logged In: YES 
user_id=421

This still happens with the latest beta (I've got an OpenBSD
machine now myself):
Program received signal SIGSEGV, Segmentation fault.
0x1c048f03 in zcharpw (p=999996, side=1 '\001') at
pdftex2.c:3191
3191        c = getrpcode ( f , mem [p ].hh.b1 ) ;
(gdb) bt
#0  0x1c048f03 in zcharpw (p=999996, side=1 '\001') at
pdftex2.c:3191
#1  0x1c053d53 in zpostlinebreak (d=1) at pdftex2.c:7715
#2  0x1c007659 in zlinebreak (d=1) at pdftexini.c:2136
#3  0x1c05bb11 in initmath () at pdftex3.c:141
#4  0x1c065091 in maincontrol () at pdftex3.c:4582
#5  0x1c0130a2 in mainbody () at pdftexini.c:5647
#6  0x1c069d9e in main (ac=2, av=0xcfbd239c) at
pdftexextra.c:340
(gdb) l pdftex2.c:3191
3186        c = getlpcode ( f , mem [p ].hh.b1 ) ;
3187        lastleftmostchar = p ;
3188      } 
3189      else {
3190          
3191        c = getrpcode ( f , mem [p ].hh.b1 ) ;
3192        lastrightmostchar = p ;
3193      } 
3194      if ( c == 0 ) 
3195      return Result ;
(gdb) p f
$1 = -4096
(gdb) p p    
$2 = 999996
(gdb) p mem[p].hh   
$3 = {v = {LH = -268435455, RH = 675}, u = {B1 = 1, B0 = -4096}}


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=555&group_id=106

From noreply at sarovar.org  Tue Jul 25 23:33:00 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 03:03:00 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-555 ] pdfLaTeX coredumps on OpenBSD
Message-ID: <E1G5UWS-0008J4-00@sarovar.org>

Bugs item #555, was opened at 2006-05-20 16:16
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=555&group_id=106

Category: hz
Group: v1.30.0
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Dag Leine (dag)
Assigned to: Taco Hoekwater (taco)
Summary: pdfLaTeX coredumps on OpenBSD

Initial Comment:
I've found, that pdfLaTeX coredumps on OpenBSD if I use
amsmath and microtype in some math environments. Here
is a minimal latex document for showing the bug:

> cat minidump.tex
\documentclass{article}
\usepackage{amsmath}
\usepackage{microtype}
\setlength{\parindent}{0pt}
\begin{document}
  \begin{align}
    x
  \end{align}
\end{document}
% end of minidump.tex

> pdflatex minidump
This is pdfeTeX, Version 3.141592-1.30.6-2.2 (Web2C 7.5.5)
entering extended mode
(./minidump.tex
LaTeX2e <2003/12/01>
Babel <v3.8d> and hyphenation patterns for american,
french, german, ngerman, b
ahasa, basque, bulgarian, catalan, croatian, czech,
danish, dutch, esperanto, e
stonian, finnish, greek, icelandic, irish, italian,
latin, magyar, norsk, polis
h, portuges, romanian, russian, serbian, slovak,
slovene, spanish, swedish, tur
kish, ukrainian, nohyphenation, loaded.
(/usr/local/share/texmf-dist/tex/latex/base/article.cls
Document Class: article 2004/02/16 v1.4f Standard LaTeX
document class
(/usr/local/share/texmf-dist/tex/latex/base/size10.clo))
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/local/share/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/local/share/texmf-dist/tex/latex/microtype/microtype.sty
(/usr/local/share/texmf-dist/tex/latex/graphics/keyval.sty)
(/usr/local/share/texmf-dist/tex/latex/microtype/microtype.cfg))
(./minidump.aux)
(/usr/local/share/texmf-dist/tex/latex/microtype/mt-cmr.cfg)Segmentation
fault (core dumped) 


A quick look with gdb shows, that it hangs in line 4396
 of pdfetex2.c:
  c = getrpcode ( f , mem [p ].hh.b1 ) ;

Here p=999996 and f=-4096

Since f seems to be a table index to pdffontrbase a
negative value does not make sense to my mind.

I've tryed the same on a LINUX machine. There pdfLaTeX
does not crash, but p and f have the same values as
under OpenBSD.

As the most bad work around after taking *Word I've
added a line of code which leaves the routine if f
becomes negative. This seems to work in the sense, that
there isn't any more a core dump.

regards
  Dag

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2006-07-25 23:33

Message:
Logged In: YES 
user_id=929

seems it happens at this line in pdftex.web:

p := prev_rightmost(temp_head, q); {get |link(p) = q|}

the temp_head before this call is 1499996 which seems to be
wrong. Then after the call p = 1499996, and there is font
f=-4096 attached to this node which is also wrong. So it
seems that somehow temp_head got lost before call of
prev_rightmost(). No clue how.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2006-07-25 23:06

Message:
Logged In: YES 
user_id=1608

ok, will check tomorrow

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-25 21:30

Message:
Logged In: YES 
user_id=421

This still happens with the latest beta (I've got an OpenBSD
machine now myself):
Program received signal SIGSEGV, Segmentation fault.
0x1c048f03 in zcharpw (p=999996, side=1 '\001') at
pdftex2.c:3191
3191        c = getrpcode ( f , mem [p ].hh.b1 ) ;
(gdb) bt
#0  0x1c048f03 in zcharpw (p=999996, side=1 '\001') at
pdftex2.c:3191
#1  0x1c053d53 in zpostlinebreak (d=1) at pdftex2.c:7715
#2  0x1c007659 in zlinebreak (d=1) at pdftexini.c:2136
#3  0x1c05bb11 in initmath () at pdftex3.c:141
#4  0x1c065091 in maincontrol () at pdftex3.c:4582
#5  0x1c0130a2 in mainbody () at pdftexini.c:5647
#6  0x1c069d9e in main (ac=2, av=0xcfbd239c) at
pdftexextra.c:340
(gdb) l pdftex2.c:3191
3186        c = getlpcode ( f , mem [p ].hh.b1 ) ;
3187        lastleftmostchar = p ;
3188      } 
3189      else {
3190          
3191        c = getrpcode ( f , mem [p ].hh.b1 ) ;
3192        lastrightmostchar = p ;
3193      } 
3194      if ( c == 0 ) 
3195      return Result ;
(gdb) p f
$1 = -4096
(gdb) p p    
$2 = 999996
(gdb) p mem[p].hh   
$3 = {v = {LH = -268435455, RH = 675}, u = {B1 = 1, B0 = -4096}}


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=555&group_id=106

From noreply at sarovar.org  Wed Jul 26 00:04:23 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 03:34:23 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-555 ] pdfLaTeX coredumps on OpenBSD
Message-ID: <E1G5V0p-00087D-00@sarovar.org>

Bugs item #555, was opened at 2006-05-20 16:16
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=555&group_id=106

Category: hz
Group: v1.30.0
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Dag Leine (dag)
Assigned to: Taco Hoekwater (taco)
Summary: pdfLaTeX coredumps on OpenBSD

Initial Comment:
I've found, that pdfLaTeX coredumps on OpenBSD if I use
amsmath and microtype in some math environments. Here
is a minimal latex document for showing the bug:

> cat minidump.tex
\documentclass{article}
\usepackage{amsmath}
\usepackage{microtype}
\setlength{\parindent}{0pt}
\begin{document}
  \begin{align}
    x
  \end{align}
\end{document}
% end of minidump.tex

> pdflatex minidump
This is pdfeTeX, Version 3.141592-1.30.6-2.2 (Web2C 7.5.5)
entering extended mode
(./minidump.tex
LaTeX2e <2003/12/01>
Babel <v3.8d> and hyphenation patterns for american,
french, german, ngerman, b
ahasa, basque, bulgarian, catalan, croatian, czech,
danish, dutch, esperanto, e
stonian, finnish, greek, icelandic, irish, italian,
latin, magyar, norsk, polis
h, portuges, romanian, russian, serbian, slovak,
slovene, spanish, swedish, tur
kish, ukrainian, nohyphenation, loaded.
(/usr/local/share/texmf-dist/tex/latex/base/article.cls
Document Class: article 2004/02/16 v1.4f Standard LaTeX
document class
(/usr/local/share/texmf-dist/tex/latex/base/size10.clo))
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/local/share/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/local/share/texmf-dist/tex/latex/microtype/microtype.sty
(/usr/local/share/texmf-dist/tex/latex/graphics/keyval.sty)
(/usr/local/share/texmf-dist/tex/latex/microtype/microtype.cfg))
(./minidump.aux)
(/usr/local/share/texmf-dist/tex/latex/microtype/mt-cmr.cfg)Segmentation
fault (core dumped) 


A quick look with gdb shows, that it hangs in line 4396
 of pdfetex2.c:
  c = getrpcode ( f , mem [p ].hh.b1 ) ;

Here p=999996 and f=-4096

Since f seems to be a table index to pdffontrbase a
negative value does not make sense to my mind.

I've tryed the same on a LINUX machine. There pdfLaTeX
does not crash, but p and f have the same values as
under OpenBSD.

As the most bad work around after taking *Word I've
added a line of code which leaves the routine if f
becomes negative. This seems to work in the sense, that
there isn't any more a core dump.

regards
  Dag

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2006-07-26 00:04

Message:
Logged In: YES 
user_id=929

the value of temp_head seems to be right, but maybe it must be

p := prev_rightmost(link(temp_head), q); {get |link(p) = q|}
p := find_protchar_right(link(temp_head), p);

with link(temp_head) instead of temp_head, as "The current
line to be justified appears in a horizontal list starting
at |link(temp_head)| and ending at |cur_break(cur_p)|."

wild guess only, seems to work.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-07-25 23:33

Message:
Logged In: YES 
user_id=929

seems it happens at this line in pdftex.web:

p := prev_rightmost(temp_head, q); {get |link(p) = q|}

the temp_head before this call is 1499996 which seems to be
wrong. Then after the call p = 1499996, and there is font
f=-4096 attached to this node which is also wrong. So it
seems that somehow temp_head got lost before call of
prev_rightmost(). No clue how.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2006-07-25 23:06

Message:
Logged In: YES 
user_id=1608

ok, will check tomorrow

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-25 21:30

Message:
Logged In: YES 
user_id=421

This still happens with the latest beta (I've got an OpenBSD
machine now myself):
Program received signal SIGSEGV, Segmentation fault.
0x1c048f03 in zcharpw (p=999996, side=1 '\001') at
pdftex2.c:3191
3191        c = getrpcode ( f , mem [p ].hh.b1 ) ;
(gdb) bt
#0  0x1c048f03 in zcharpw (p=999996, side=1 '\001') at
pdftex2.c:3191
#1  0x1c053d53 in zpostlinebreak (d=1) at pdftex2.c:7715
#2  0x1c007659 in zlinebreak (d=1) at pdftexini.c:2136
#3  0x1c05bb11 in initmath () at pdftex3.c:141
#4  0x1c065091 in maincontrol () at pdftex3.c:4582
#5  0x1c0130a2 in mainbody () at pdftexini.c:5647
#6  0x1c069d9e in main (ac=2, av=0xcfbd239c) at
pdftexextra.c:340
(gdb) l pdftex2.c:3191
3186        c = getlpcode ( f , mem [p ].hh.b1 ) ;
3187        lastleftmostchar = p ;
3188      } 
3189      else {
3190          
3191        c = getrpcode ( f , mem [p ].hh.b1 ) ;
3192        lastrightmostchar = p ;
3193      } 
3194      if ( c == 0 ) 
3195      return Result ;
(gdb) p f
$1 = -4096
(gdb) p p    
$2 = 999996
(gdb) p mem[p].hh   
$3 = {v = {LH = -268435455, RH = 675}, u = {B1 = 1, B0 = -4096}}


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=555&group_id=106

From taco at elvenkind.com  Wed Jul 26 08:49:39 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 26 Jul 2006 08:49:39 +0200
Subject: [NTG-pdftex] manual issues
In-Reply-To: <68c491a60607251116t122530b7tc04d4c3a14d265c8@mail.gmail.com>
References: <4495B0AE.4020003@gust.org.pl>
	<68c491a60607251116t122530b7tc04d4c3a14d265c8@mail.gmail.com>
Message-ID: <44C71083.2040906@elvenkind.com>

Martin Schr?der wrote:
> 2006/6/18, Pawe? Jackowski <P.Jackowski at gust.org.pl>:
> 
>>the following primitives are not documented. Could you please comment a
>>status?
>>
>>\pdfpxdimen

This one was probably first proposed by me. It attaches concrete
meaning to statements using the new 'px' dimension specifier, like:

   \pdfpxdimen=87380 % = 96dpi
   \hsize=400px

Greetings, Taco

From pragma at wxs.nl  Wed Jul 26 09:38:34 2006
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 26 Jul 2006 09:38:34 +0200
Subject: [NTG-pdftex] manual issues
In-Reply-To: <44C71083.2040906@elvenkind.com>
References: <4495B0AE.4020003@gust.org.pl>
	<68c491a60607251116t122530b7tc04d4c3a14d265c8@mail.gmail.com>
	<44C71083.2040906@elvenkind.com>
Message-ID: <44C71BFA.6090700@wxs.nl>

Taco Hoekwater wrote:
> Martin Schr?der wrote:
>   
>> 2006/6/18, Pawe? Jackowski <P.Jackowski at gust.org.pl>:
>>
>>     
>>> the following primitives are not documented. Could you please comment a
>>> status?
>>>
>>> \pdfpxdimen
>>>       
>
> This one was probably first proposed by me. It attaches concrete
> meaning to statements using the new 'px' dimension specifier, like:
>
>    \pdfpxdimen=87380 % = 96dpi
>    \hsize=400px
>   
the px was introduced to permits html-like dimensions 

(in a simlar fashion a percentage was discussed: \dimen0=24.5% with % having catcode 11 or 12) 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From P.Jackowski at gust.org.pl  Wed Jul 26 10:05:30 2006
From: P.Jackowski at gust.org.pl (=?ISO-8859-2?Q?Pawe=B3_Jackowski?=)
Date: Wed, 26 Jul 2006 10:05:30 +0200
Subject: [NTG-pdftex] manual issues
In-Reply-To: <44C71083.2040906@elvenkind.com>
References: <4495B0AE.4020003@gust.org.pl>	<68c491a60607251116t122530b7tc04d4c3a14d265c8@mail.gmail.com>
	<44C71083.2040906@elvenkind.com>
Message-ID: <44C7224A.2090603@gust.org.pl>

Thanks,

> This one was probably first proposed by me. It attaches concrete
> meaning to statements using the new 'px' dimension specifier, like:
> 
>    \pdfpxdimen=87380 % = 96dpi
>    \hsize=400px

? In 96dpi resolution, one pixel is to be interpreted as

	72 * 65781 / 96

that makes 0.75bp (49336sp). It seems that you calculated as

	96 * 65536 / 72

Your mistake or I miss the intention?
-- 
Pawe/l Jackowski
P.Jackowski at gust.org.pl

From noreply at sarovar.org  Wed Jul 26 12:18:31 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 15:48:31 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-505 ] file with only \immediate\pdfobj
	stream results in garbage
Message-ID: <E1G5gTH-0001uY-00@sarovar.org>

Bugs item #505, was opened at 2006-04-06 00:50
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=505&group_id=106

Category: None
Group: v1.40.0
>Status: Closed
>Resolution: Fixed
Priority: 5
Submitted By: Martin Schr?der (oneiros)
Assigned to: Hartmut Henkel (hhenkel)
Summary: file with only \immediate\pdfobj stream results in garbage

Initial Comment:
The input

\pdfcompresslevel=0
\immediate\pdfobj stream {xx}
\end

results in the message

No pages of output.

but produces the garbage pdf attached.

Confirmed with 1.30.2 and the last 1.40.0-beta.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 12:18

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-08 08:45

Message:
Logged In: YES 
user_id=929

tried 2 approaches:

1) try to make a complete PDF file without pages, like:

<< /Type /Pages /Count 0 /Kids [] >>

Then xpdf shows a white background, but acroread complains.
So this can't be done.

2a) silently delete faulty PDF. But one should give at least
a warning.

2b) flag warning and delete faulty PDF. That's the current
patch for 1.40.0-beta-20060213. Now it says:

This is pdfTeXk, Version 3.141592-1.40.0-beta-20060213
(Web2C 7.5.5)
(format=pdftex 2006.4.8)  8 APR 2006 07:41
 %&-line parsing enabled.
**test1
(./test1.tex )
No pages of output.
Warning: pdftex: dangling objects discarded, no output file
produced.


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=505&group_id=106

From noreply at sarovar.org  Wed Jul 26 12:20:03 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 15:50:03 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-393 ] Ensure newline before endstream
Message-ID: <E1G5gUl-0001yz-00@sarovar.org>

Bugs item #393, was opened at 2005-07-25 16:09
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=393&group_id=106

Category: None
Group: v1.30.0
>Status: Closed
>Resolution: Fixed
Priority: 2
Submitted By: Martin Schr?der (oneiros)
Assigned to: Martin Schr?der (oneiros)
Summary: Ensure newline before endstream

Initial Comment:
As reported by Hans, there is not always a newline
before endstream, although the PDF reference recommends
it. 

Any change needs careful testing.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 12:20

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-01-06 23:45

Message:
Logged In: YES 
user_id=929

Implementation of pdf_end_stream() changed: Last byte within
any stream written to the PDF file is now remembered in
pdf_last_byte, so that one can check if a separate
pdf_new_line_char "\n" is needed before "endstream". No need
to look back in maybe already flushed pdfbuf.

Patch to 1.40.0-alpha-20060106. Plus a few tiny patches.

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=393&group_id=106

From noreply at sarovar.org  Wed Jul 26 12:19:02 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 15:49:02 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-509 ] invalid pdf created if font name
	contains space
Message-ID: <E1G5gTm-0001vl-00@sarovar.org>

Bugs item #509, was opened at 2006-04-13 20:37
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=509&group_id=106

Category: Fonts
Group: v1.40.0
>Status: Closed
>Resolution: Fixed
Priority: 3
Submitted By: Tom Bishop (tbishop)
Assigned to: Hartmut Henkel (hhenkel)
Summary: invalid pdf created if font name contains space

Initial Comment:
pdftex 3.141592-1.30.4-2.2 runs the following code without 
complaining:

\pdfmapline{+mssong4e <mssong.ttf <mssong4e.enc}
\font\testfont=mssong4e at 20pt
\testfont\char"00
\bye

-- but the resulting pdf file can't be opened by Adobe Reader or 
GhostScript. GhostScript reports "Unknown operator: Song".

The pdf file includes "/BaseFont /FEVAQU+MS Song". Evidently, the 
problem is the space in "MS Song", because if I use a hex editor to 
replace the space with an underscore, then the pdf becomes OK.

The same font worked fine with earlier pdftex versions. It's a Chinese 
Unicode TrueType font, from Microsoft.

I haven't tried installing pdftex 1.30.6; is it possible that would fix the 
problem? I just re-installed TeX using i-Installer for Mac OS X; it still 
uses pdftex 1.30.4.

Here is the output of pdftex when running the test file:

This is pdfeTeX, Version 3.141592-1.30.4-2.2 (Web2C 7.5.5)
entering extended mode
(./test3.tex [1{/Users/tbishop/Library/texmf/fonts/map/pdftex/
updmap/pdftex.map
}] )</usr/local/teTeX/share/texmf.tetex/fonts/type1/bluesky/cm/
cmr10.pfb>{/usr/
local/teTeX/share/texmf.local/fonts/enc/pdftex/enc/mssong4e.enc}
</usr/local/teT
eX/share/texmf.local/fonts/truetype/mssong.ttf>
Output written on test3.pdf (1 page, 5067 bytes).
Transcript written on test3.log.

Thanks in advance for any help!

Best wishes,

Tom Bishop (wenlin at wenlin.com)



----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 12:19

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-14 00:16

Message:
Logged In: YES 
user_id=929

well, the PDF ref. says to strip the spaces, and i don't
know what consequences such underscores would have. So it
seems that just stripping spaces might be a little bit
closer to the right thing (in the view that this is only
with buggy fonts anyway).

----------------------------------------------------------------------

Comment By: Hans Hagen (hagen)
Date: 2006-04-13 23:58

Message:
Logged In: YES 
user_id=927

why not replace spaces by underscore (just as a precaution) 

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-13 23:25

Message:
Logged In: YES 
user_id=929

patch makes pdftex lenient with (buggy) TTF fonts that have
spaces in PostScript name, strips spaces in /BaseFont and
/FontName, e. g.: "MS Song" ---> "MSSong"

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-13 22:54

Message:
Logged In: YES 
user_id=929

ah, after the PDF reference 5. ed. page 388 in case there
would be no PostScript name entry we could be cruesome and
strip the blank. But there is a wrong PostScript name in the
font. So maybe one could flag a warning (or not?) and just
strip the blank? (which would be easy)

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-04-13 22:39

Message:
Logged In: YES 
user_id=929

This mssong.ttf version seems to be buggy. Here is a
diagnostic printout from function ttf_read_name() in
writettf.c; these are all available entries from the "Naming
Table":

i=0 platform_id=1 encoding_id=0 name_id=0 name <(c)
Copyright ZHUHAI Stone Computerized typesetting system R&D
LTD., 1995-1996>
i=1 platform_id=1 encoding_id=0 name_id=1 name <MS Song>
i=2 platform_id=1 encoding_id=0 name_id=2 name <Regular>
i=3 platform_id=1 encoding_id=0 name_id=3 name <Microsoft:MS
Song:1996>
i=4 platform_id=1 encoding_id=0 name_id=4 name <MS Song>
i=5 platform_id=1 encoding_id=0 name_id=5 name <Version 1.00>
i=6 platform_id=1 encoding_id=0 name_id=6 name <MS Song>
---> ttf_read_name <MS Song>

There is no usable PostScript name in: The TTF standard
tells that under name_id=6 there should be the Postscript
font, but here it is "MS Song" with a blank.

As long as the font does not contain a valid PostScript
name, i have no idea how to tweak this correctly...

Other clues anybody?

Regards, Hartmut


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=509&group_id=106

From noreply at sarovar.org  Wed Jul 26 12:23:09 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 15:53:09 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-453 ] Object Streams for PDF-1.5
Message-ID: <E1G5gXl-0002Iu-00@sarovar.org>

Patches item #453, was opened at 2005-11-26 18:05
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=453&group_id=106

Category: Object Streams
Group: v1.30.0
>Status: Closed
Resolution: Accepted
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Martin Schr?der (oneiros)
Summary: Object Streams for PDF-1.5

Initial Comment:
Rough early patch, work in progress, produces PDF-1.5
object streams and cross reference streams. With the
patch, and enabled by \pdfminorversion=5, and with
luck, pdfetex produces e. g. from its WEB source a PDF
file with size 5.97 MByte instead of 11.2 MByte without
object streams.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 12:23

Message:
Logged In: YES 
user_id=421

This has been included in version 1.40

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-01-07 01:06

Message:
Logged In: YES 
user_id=929

objstream.ch updated: 1. object stream statistics added. 2.
maximum allocation values are added in brackets. Example:

PDF statistics:
 630 PDF objects out of 1000 (max. 8388607)
 577 compressed objects within 6 object streams
 113 named destinations out of 1000 (max. 131072)
 8353 words of extra memory for PDF output out of 10000
(max. 10000000)

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-12-26 20:21

Message:
Logged In: YES 
user_id=929

Patch update. Object stream writing is now controlled by
primitive \pdfobjcompresslevel = 0...3 (/pdfobjectstreams
primitive removed). 0 = no object streams at all, 1 =
compress objects excluding the ones from embedded PDF files
(for handling of problematic PDF files) and /Info dictionary
(for legibility), 2 = also compress objects from embedded
PDF files, but leave /Info uncompressed, 3 = compress
everything.

Testing welcome.

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=453&group_id=106

From noreply at sarovar.org  Wed Jul 26 12:24:09 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 15:54:09 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-416 ] new primitive pdflastlink
Message-ID: <E1G5gYj-0002zu-00@sarovar.org>

Patches item #416, was opened at 2005-08-19 09:42
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=416&group_id=106

Category: Primitives
Group: v1.30.0
>Status: Closed
Resolution: Accepted
Priority: 5
Submitted By: Ralf Utermann (ralfu)
Assigned to: Hartmut Henkel (hhenkel)
Summary: new primitive pdflastlink

Initial Comment:
This patch implements a new primitive \pdflastlink
(analogous to \pdflastannot) which returns the object
number of the last object created with \pdfstartlink.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 12:24

Message:
Logged In: YES 
user_id=421

This has been included in version 1.40

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=416&group_id=106

From noreply at sarovar.org  Wed Jul 26 12:25:43 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 15:55:43 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-434 ] Remove queued map item handling
Message-ID: <E1G5gaF-00030W-00@sarovar.org>

Patches item #434, was opened at 2005-10-13 01:08
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=434&group_id=106

Category: Fonts
Group: v1.30.0
>Status: Closed
Resolution: Accepted
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Taco Hoekwater (taco)
Summary: Remove queued map item handling

Initial Comment:
Remove queued map item handling from mapfile.c
==============================================

Formerly all items from \pdfmapfile{+-=mapfile} or
\pdfmapline{+-=mapline} were queued up in a list until
the next font was selected; then the whole list was
processed, e. g. all queued mapfiles or maplines read in.

When one gave \pdfmapfile{mapfile} or
\pdfmapline{mapline} without +-=, the pending list was
cleared. The only practical use for this was to prevent
reading in the default mapfile. But this can be done
simpler, without queuing.

With this patch all \pdfmapfile{+-=mapfile} or
\pdfmapline{+-=mapline} requests are processed
completely and immediately without queuing, which means
that if e. g. a \pdfmapfile{+-=mapfile} primitive is
scanned, the mapfile will be read in right away. This
happens independently from selecting a font.

When \pdfmapfile{+-=mapfile} or \pdfmapline{+-=mapline}
is scanned, and there is a default mapfile, it is read
first and then the mapfile. Reading of the default
mapfile can be disabled by \pdfmapfile{} or
\pdfmapline{} or \pdfmapfile{mapfile} or
\pdfmapline{mapline} without +-= as long as the default
mapfile hasn't already been read in.

Latest when the first font is requested, the default
mapfile will be read, if this hasn't already been
disabled by the mentioned primitives. Apart from
possibly reading the default mapfile, there is no other
action when a font is requested, since the
\pdfmapfile{+-=mapfile} or \pdfmapline{+-=mapline}
primitives have already acted right away when they were
called.

The effects of this patch are the following:

* Initial mapfile reading still can be blocked in the
usual way.

* The difficult to describe queuing mechanism has gone,
code gets simpler.

* Mapfile reading happens directly by the primitives.

* Therefore it's possible to use \pdfretval with the
primitives, to check success of the mapfile/line
reading (not yet implemented).

* As the return value is connected to the \pdfmapfile
or \pdfmapline call, one can easier implement other map
setting primitives and give them return values. This
was not possible before, as the queuing was inbetween.

* For any standard use, the patch should be compatible
to the former queuing method.

The mapfile.c is a patched version of the mapfile.c
from Thanh's subfont patch pdftex-20050924.patch.gz for
pdftex-1.30.3.

Hope it doesn't sound too messy :-) For discussion.

Regards, Hartmut



----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 12:25

Message:
Logged In: YES 
user_id=421

This has been included in version 1.40

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=434&group_id=106

From noreply at sarovar.org  Wed Jul 26 12:27:19 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 15:57:19 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-443 ] 512 zeros in Type1 fonts not
	copied anymore
Message-ID: <E1G5gbn-00030o-00@sarovar.org>

Patches item #443, was opened at 2005-10-24 22:41
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=443&group_id=106

Category: Fonts
Group: v1.30.0
>Status: Closed
Resolution: Accepted
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Martin Schr?der (oneiros)
Summary: 512 zeros in Type1 fonts not copied anymore

Initial Comment:
When embedding Type1 fonts in PDF files, it is not
needed to copy the trailing 512 zeros; they are
redundant. This has been suggested in the paper "Two
Diet Plans for Fat PDF" by Thomas A. Phelps and Robert
Wilensky. Reduces file size a little. Then /Length3 =
0, see Table 5.24 in the PDF Ref. v. 1.6. The tiny
patch to writet1.c does this for pdfTeX. No change in
the dvips portion.

In the patch also the font matrix transform is
streamlined by use of generic transform macros.

Testing welcome.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 12:27

Message:
Logged In: YES 
user_id=421

This has been included in version 1.40

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=443&group_id=106

From noreply at sarovar.org  Wed Jul 26 12:27:44 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 15:57:44 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-447 ] Don't write /Encoding for
	non-reencoded fonts
Message-ID: <E1G5gcC-00036A-00@sarovar.org>

Patches item #447, was opened at 2005-11-06 12:26
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=447&group_id=106

Category: Fonts
Group: v1.30.0
>Status: Closed
Resolution: Accepted
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Taco Hoekwater (taco)
Summary: Don't write /Encoding for non-reencoded fonts

Initial Comment:
The /Encoding entry in the /Font dictionary is only
needed when the font is actually reencoded, see the PDF
Ref. v. 1.6, section 5.5.5.

Currently also for non-reencoded Type1 fonts the
/Encoding entry and its /Encoding object with the
/Differences array are generated from the /Encoding in
the font, duplicating it unnecessarily. This happens
particularily with the many CM fonts.

By the tiny patch to writefont.c this /Encoding entry
and the array object will not be generated and written
any more for non-reencoded Type1 fonts. The PDF reader
application will then take the /Encoding from the
embedded font file.

Testing welcome.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 12:27

Message:
Logged In: YES 
user_id=421

This has been included in version 1.40

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=447&group_id=106

From noreply at sarovar.org  Wed Jul 26 12:28:06 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 15:58:06 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-473 ] \ifabsnum and \ifabsdim
Message-ID: <E1G5gcY-0003Ph-00@sarovar.org>

Patches item #473, was opened at 2006-01-27 15:20
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=473&group_id=106

Category: Primitives
Group: v1.30.0
>Status: Closed
Resolution: Accepted
Priority: 4
Submitted By: Taco Hoekwater (taco)
Assigned to: Martin Schr?der (oneiros)
Summary: \ifabsnum and \ifabsdim

Initial Comment:
Here is a small change file that implements two new
etex primitives :
  \ifabsnum 
  \ifabsdim 
Usage is the same as \ifnum and \ifdim. The only 
difference is that they negate the values if they are
negative before comparing.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 12:28

Message:
Logged In: YES 
user_id=421

This has been included in version 1.40

----------------------------------------------------------------------

Comment By: Hans Hagen (hagen)
Date: 2006-01-27 15:31

Message:
Logged In: YES 
user_id=927

intended usage: 

\ifabsdim \dimexpr \maxheight - \currentheight \relax < .5pt 
  assume that we're done 
\fi 

it can also be used to handle rounding errors when doing
roundtrip calculations 


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=473&group_id=106

From noreply at sarovar.org  Wed Jul 26 12:27:04 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 15:57:04 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-438 ] \pdfsavepos in DVI mode
Message-ID: <E1G5gbY-00030h-00@sarovar.org>

Patches item #438, was opened at 2005-10-16 23:52
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=438&group_id=106

Category: Positioning
Group: v1.30.0
>Status: Closed
Resolution: Accepted
Priority: 5
Submitted By: Heiko Oberdiek (oberdiek)
Assigned to: Hartmut Henkel (hhenkel)
Summary: \pdfsavepos in DVI mode

Initial Comment:
\pdfsavepos in DVI mode

Hello,

using \pdfsavepos in a package of mine (tabularht)
I was wondering, why \pdfsavepos is not allowed to
work in DVI mode. \pdfsavepos in PDF mode is based
on cur_h and cur_v, both coming from the DVI frontend.

The only difference I found is that the PDF format
and pdfTeX's PDF mode know about page dimensions.
Thus the directions of the axes are the same for
the PDF format and the values of \pdfsavepos
(\pdflastxpos, \pdflastypos).
  Origin:          lower left corner
  horizontal axis: values increasing from left to right
  vertical axis:   values increasing from bottom to top
  unit:            sp

The DVI case doesn't know about page dimensions, thus
I suggest using cur_h=0 and cur_v=0 as origin. It is
the left upper corner of the box that is being shipped
out.
  Origin:          left upper corner of the box
  horizontal axis: values increasing from left to right
  vertical axis:   values increasing from bottom to top
  unit:            sp

Thus the absolute values differ in both modes and I
don't see that this can be avoided. However, if the
application uses a reference point then the relative
values are exactly the same.

The attachted patch enables and implements \pdfsavepos
for the DVI mode. It also contains the patch for
bug 437 (Two \immediate cancel themselves).

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 12:27

Message:
Logged In: YES 
user_id=421

This has been included in version 1.40

----------------------------------------------------------------------

Comment By: Hans Hagen (hagen)
Date: 2006-02-28 01:24

Message:
Logged In: YES 
user_id=927

positioning has always been available in dvi mode as well by
means of specials and postprocessing the dvi file (first by
a script by taco, later by the dvipos program that comes
with dvipdfmx);

btw, when you mean 'the current drivers' you refer to latex,
and you cannot assume that those are used outside latex, so
that is no real reference -) 

in a similar fashion the dvipos functionality is no real
reference either since it is mainly meant for appending info
to the context second-pass-info file; anyhow, since pdftex
is now the standard engine, there is no need to support the
dvipos specials (apart from backward compatibility in context)

because we had a "pos:papersize w h" special, dvipos could
provide the same reference frame as when using the pdftex
primitives; therefore,  using the pdfpagewidth and
pdfpageheight specification as in the suggested latest
patch) is the best way to go (at least for context) 

(Since we now have pdfpagewidth/height in dvi mode, we get
less and less \pdfprimitives that complain in dvi mode) 
 
Hans 


----------------------------------------------------------------------

Comment By: Heiko Oberdiek (oberdiek)
Date: 2005-10-17 13:39

Message:
Logged In: YES 
user_id=1276

Hello,

I have now extended the patch: \pdfpagewidth/height
are now used for the page dimensions. Also the
funny DVI origin offset of 1in is taken into
account. Thus the values in DVI and PDF mode are
the same. The exception is \pdf{h,v}origin. If
the value is not 1in, then the values differ in
DVI and PDF mode. However, also the DVI and PDF
output will differ in this case. Thus the different
values are then ok, I think.
  If someone wants to have the same values, he just
sets \pdfpage{width,height} and let \pdf{h,v}origin
untouched.

Hartmut Henkel wrote:
> to give page dimension info for pdftex also in
> DVI mode, one could implement the standard
> \special{papersize=x,y} also in pdftex (parallel
> to \pdfpagewidth/height), so that it would be
> scanned, and also go into the DVI file. Would
> this help?

I think, not really:
* Scanning of \specials are done in PDF mode already,
  but here it is not really necessary, the current
  drivers know about \pdfpage{width,height}.
* In DVI mode, the scanning of \special's contents
  must then be added to set \pdfpage{width,height}.
  But who needs this actually?
  * Relative positioning with \pdfsavepos works
    with or without the correct page size
    information.
  * Absolute positioning is more difficult in use
    (If you are somewhere in a box, how do you
    want to apply absolute positions?)
  * If someone insist on absolute positioning,
    he will probably not rely on an accidentally
    issued \special{papersize=...}. He will probably
    make sure, that the papersize information
    is set and then he can also set
    \pdfpage{width,height}.

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>

PS: The name of the patch file is now
    "v2-pdftex.ch.diff". And I have removed
    the patch of fixed bug 437.


----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-10-17 00:16

Message:
Logged In: YES 
user_id=929

to give page dimension info for pdftex also in DVI mode, one
could implement the standard \special{papersize=x,y} also in
pdftex (parallel to \pdfpagewidth/height), so that it would
be scanned, and also go into the DVI file. Would this help?

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=438&group_id=106

From noreply at sarovar.org  Wed Jul 26 12:27:56 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 15:57:56 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-466 ] \primitive and \ifprimitive
Message-ID: <E1G5gcO-0003Ay-00@sarovar.org>

Patches item #466, was opened at 2006-01-07 17:22
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=466&group_id=106

Category: Primitives
Group: v1.30.0
>Status: Closed
Resolution: Accepted
Priority: 4
Submitted By: Taco Hoekwater (taco)
Assigned to: Martin Schr?der (oneiros)
Summary: \primitive and \ifprimitive

Initial Comment:
This patch implements two new primitives:

  \primitive \par

This will run the 'primitive' command \par, even if it 
has been re- or undefined in the meantime. \primitive
is not expandable, because it may be asked to execute
unexpandable primitives as well as expandable ones.

If you supply a nonexistant primitive, it will be 
ignored (no error is raised).

The second primitive is a new type of \if:

  \ifprimitive \par ... \else .. \fi

returns true if the current meaning of \par is the
'primitive' command \par.


The patch is against alpha-20051226, i hope that is not 
too old (?). I expect to do at least one minor update 
during the beta cycle, after the pdftex code is 
flattened. It was quite a struggle to make this 
change file work ok, and as a result, there are 
a few ugly web hacks.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 12:27

Message:
Logged In: YES 
user_id=421

This has been included in version 1.40

----------------------------------------------------------------------

Comment By: Bernd Raichle (bernd)
Date: 2006-02-14 08:17

Message:
Logged In: YES 
user_id=3344

IMHO it would be better to rephrase the above to (and change
the implementation accordingly :-():

<quote mode="changed">
\primitive is expandable, because it may asked to execute
expandable primitives as well as unexpandable ones.

\primitive<cs> will expand to one token, the original TeX
primitive.  This token will then be processed further as usual.
</quote>


If \primitive is left unexpandable, a lot of programming
techniques seems to be unavailable, e.g., all redefined
expandable primitives in expandable-only context.

Or any assignment to the get the original primitive, like

\edef\orignumber{\expandafter\noexpand\primitive\number}

\expandafter\let\expandafter\orignumber\primitive\number


Sidenote: The new \primitive seems to implement a subset of
a full-blown namespace mechanism.  If (pdf)TeX would have
namespaces, one simply has to access the appropriate token
within the "primitive" namespace (e.g. \primitive::number to
 access the original \number primitive, assuming the
notation \<namespace>::<csname>).  How about choosing an
appropriate namespace mechanism for (pdf)TeX and
implementing it instead?

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2006-02-13 18:56

Message:
Logged In: YES 
user_id=1608

We need to think about this. 

I see your point, but making \primitive expandable forces
the introduction of un-redefinable tokens, and that has its
own problematic side-effects (like slowing down each and
every definition). I welcome third opinions on whether the 
benefits outweigh that downside.

At one point I tried making the expandability depend on the
referred primitive, but that gave me headaches at the
implementation stage (a pity, because that would have been
nice).

Yet another solution is to have an expandable command as
well as an unexpandable command (two primitives instead of
just the single \primitive).

On the side note: I will happily write an implementation ...
but only if someone comes up with a specification that works
under all conditions instead of only under specific
programming styles :-)



----------------------------------------------------------------------

Comment By: Bernd Raichle (bernd)
Date: 2006-02-13 17:40

Message:
Logged In: YES 
user_id=3344

IMHO it would be better to rephrase the above to (and change
the implementation accordingly :-():

<quote mode="changed">
\primitive is expandable, because it may asked to execute
expandable primitives as well as unexpandable ones.

\primitive<cs> will expand to one token, the original TeX
primitive.  This token will then be processed further as usual.
</quote>


If \primitive is left unexpandable, a lot of programming
techniques seems to be unavailable, e.g., all redefined
expandable primitives in expandable-only context.

Or any assignment to the get the original primitive, like

\edef\orignumber{\expandafter\noexpand\primitive\number}

\expandafter\let\expandafter\orignumber\primitive\number


Sidenote: The new \primitive seems to implement a subset of
a full-blown namespace mechanism.  If (pdf)TeX would have
namespaces, one simply has to access the appropriate token
within the "primitive" namespace (e.g. \primitive::number to
 access the original \number primitive, assuming the
notation \<namespace>::<csname>).  How about choosing an
appropriate namespace mechanism for (pdf)TeX and
implementing it instead?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=466&group_id=106

From noreply at sarovar.org  Wed Jul 26 12:31:32 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 16:01:32 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-415 ] various extensions and fixes
Message-ID: <E1G5gfs-0003bF-00@sarovar.org>

Patches item #415, was opened at 2005-08-19 09:09
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=415&group_id=106

Category: Primitives
Group: v1.30.0
>Status: Closed
Resolution: Accepted
Priority: 5
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Martin Schr?der (oneiros)
Summary: various extensions and fixes

Initial Comment:
This is a patch for various experimental extensions:

- \pdfinsertht: return the height of an insert
(requested by Hans); this has
  similar syntax to \pdftexrevision. 

- do not fail when \pdfobj is used with an invalid
object number (requested by Hans)

- snapping: support for grid typesetting -- see
snap.txt for details

- kern before space: allow changing interword glues in
a flexible way and inserting
    a kern before certain characters --  see
kern-before-interword-glue.txt for
    details

The notes in snap.txt and
kern-before-interword-glue.txt are from email
correspondence with people interested in; hence these
notes are somewhat
informal, inaccurate or out-of-date.

How to apply:
~~~~~~~~~~~~~
cd /path/to/pdftex-1.30.0-srcdir/src/texk
patch -p1 < /path/to/pdftex-20050818.patch
cd web2c
make pdfetex


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 12:31

Message:
Logged In: YES 
user_id=421

This has been included in version 1.40

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-09-04 18:22

Message:
Logged In: YES 
user_id=421

The patch for invalid object numbers is included in 1.30.1++

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=415&group_id=106

From taco at elvenkind.com  Wed Jul 26 13:02:36 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 26 Jul 2006 13:02:36 +0200
Subject: [NTG-pdftex] [ pdftex-Patches-466 ] \primitive and \ifprimitive
In-Reply-To: <E1G5gcO-0003Ay-00@sarovar.org>
References: <E1G5gcO-0003Ay-00@sarovar.org>
Message-ID: <44C74BCC.5020604@elvenkind.com>

Hi,

noreply at sarovar.org wrote:
 > Resolution: Accepted
 > Priority: 4
 > Submitted By: Taco Hoekwater (taco)
 > Assigned to: Martin Schr?der (oneiros)
 > Summary: \primitive and \ifprimitive

I will get back to you on this before the end of the week.
Bernd is absolutely right that the current version broken
so much that is not even very usable in practice, so I will
attempt to fix.

Taco

From noreply at sarovar.org  Wed Jul 26 12:23:36 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 15:53:36 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-386 ] grow obj_tab and dest_names
	arrays dynamically
Message-ID: <E1G5gYC-0002nw-00@sarovar.org>

Patches item #386, was opened at 2005-07-10 20:29
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=386&group_id=106

Category: Memory allocation
Group: v1.30.0
>Status: Closed
Resolution: Accepted
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Hartmut Henkel (hhenkel)
Summary: grow obj_tab and dest_names arrays dynamically

Initial Comment:
experimental patch to grow the obj_tab and dest_names
arrays dynamically; arrays initially have 1000 entries.
This required also update of file avlstuff.c.

Similar to patch-366, which did this already for the
pdf_mem array. Then all (?) pdftex-specific memory
configuration parameters, obj_tab_size,
dest_names_size, and pdf_mem_size in texmf.cnf would be
ignored.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 12:23

Message:
Logged In: YES 
user_id=421

This has been included in version 1.40

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=386&group_id=106

From noreply at sarovar.org  Wed Jul 26 12:53:44 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 16:23:44 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-466 ] \primitive and \ifprimitive
Message-ID: <E1G5h1M-0005kB-00@sarovar.org>

Patches item #466, was opened at 2006-01-07 17:22
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=466&group_id=106

Category: Primitives
Group: v1.30.0
>Status: Open
Resolution: Accepted
Priority: 4
Submitted By: Taco Hoekwater (taco)
Assigned to: Martin Schr?der (oneiros)
Summary: \primitive and \ifprimitive

Initial Comment:
This patch implements two new primitives:

  \primitive \par

This will run the 'primitive' command \par, even if it 
has been re- or undefined in the meantime. \primitive
is not expandable, because it may be asked to execute
unexpandable primitives as well as expandable ones.

If you supply a nonexistant primitive, it will be 
ignored (no error is raised).

The second primitive is a new type of \if:

  \ifprimitive \par ... \else .. \fi

returns true if the current meaning of \par is the
'primitive' command \par.


The patch is against alpha-20051226, i hope that is not 
too old (?). I expect to do at least one minor update 
during the beta cycle, after the pdftex code is 
flattened. It was quite a struggle to make this 
change file work ok, and as a result, there are 
a few ugly web hacks.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 12:27

Message:
Logged In: YES 
user_id=421

This has been included in version 1.40

----------------------------------------------------------------------

Comment By: Bernd Raichle (bernd)
Date: 2006-02-14 08:17

Message:
Logged In: YES 
user_id=3344

IMHO it would be better to rephrase the above to (and change
the implementation accordingly :-():

<quote mode="changed">
\primitive is expandable, because it may asked to execute
expandable primitives as well as unexpandable ones.

\primitive<cs> will expand to one token, the original TeX
primitive.  This token will then be processed further as usual.
</quote>


If \primitive is left unexpandable, a lot of programming
techniques seems to be unavailable, e.g., all redefined
expandable primitives in expandable-only context.

Or any assignment to the get the original primitive, like

\edef\orignumber{\expandafter\noexpand\primitive\number}

\expandafter\let\expandafter\orignumber\primitive\number


Sidenote: The new \primitive seems to implement a subset of
a full-blown namespace mechanism.  If (pdf)TeX would have
namespaces, one simply has to access the appropriate token
within the "primitive" namespace (e.g. \primitive::number to
 access the original \number primitive, assuming the
notation \<namespace>::<csname>).  How about choosing an
appropriate namespace mechanism for (pdf)TeX and
implementing it instead?

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2006-02-13 18:56

Message:
Logged In: YES 
user_id=1608

We need to think about this. 

I see your point, but making \primitive expandable forces
the introduction of un-redefinable tokens, and that has its
own problematic side-effects (like slowing down each and
every definition). I welcome third opinions on whether the 
benefits outweigh that downside.

At one point I tried making the expandability depend on the
referred primitive, but that gave me headaches at the
implementation stage (a pity, because that would have been
nice).

Yet another solution is to have an expandable command as
well as an unexpandable command (two primitives instead of
just the single \primitive).

On the side note: I will happily write an implementation ...
but only if someone comes up with a specification that works
under all conditions instead of only under specific
programming styles :-)



----------------------------------------------------------------------

Comment By: Bernd Raichle (bernd)
Date: 2006-02-13 17:40

Message:
Logged In: YES 
user_id=3344

IMHO it would be better to rephrase the above to (and change
the implementation accordingly :-():

<quote mode="changed">
\primitive is expandable, because it may asked to execute
expandable primitives as well as unexpandable ones.

\primitive<cs> will expand to one token, the original TeX
primitive.  This token will then be processed further as usual.
</quote>


If \primitive is left unexpandable, a lot of programming
techniques seems to be unavailable, e.g., all redefined
expandable primitives in expandable-only context.

Or any assignment to the get the original primitive, like

\edef\orignumber{\expandafter\noexpand\primitive\number}

\expandafter\let\expandafter\orignumber\primitive\number


Sidenote: The new \primitive seems to implement a subset of
a full-blown namespace mechanism.  If (pdf)TeX would have
namespaces, one simply has to access the appropriate token
within the "primitive" namespace (e.g. \primitive::number to
 access the original \number primitive, assuming the
notation \<namespace>::<csname>).  How about choosing an
appropriate namespace mechanism for (pdf)TeX and
implementing it instead?

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=466&group_id=106

From noreply at sarovar.org  Wed Jul 26 14:08:24 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 17:38:24 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-555 ] pdfLaTeX coredumps on OpenBSD
Message-ID: <E1G5iBc-0000Hf-00@sarovar.org>

Bugs item #555, was opened at 2006-05-20 16:16
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=555&group_id=106

Category: hz
Group: v1.30.0
>Status: Closed
Resolution: Accepted
Priority: 5
Submitted By: Dag Leine (dag)
Assigned to: Taco Hoekwater (taco)
Summary: pdfLaTeX coredumps on OpenBSD

Initial Comment:
I've found, that pdfLaTeX coredumps on OpenBSD if I use
amsmath and microtype in some math environments. Here
is a minimal latex document for showing the bug:

> cat minidump.tex
\documentclass{article}
\usepackage{amsmath}
\usepackage{microtype}
\setlength{\parindent}{0pt}
\begin{document}
  \begin{align}
    x
  \end{align}
\end{document}
% end of minidump.tex

> pdflatex minidump
This is pdfeTeX, Version 3.141592-1.30.6-2.2 (Web2C 7.5.5)
entering extended mode
(./minidump.tex
LaTeX2e <2003/12/01>
Babel <v3.8d> and hyphenation patterns for american,
french, german, ngerman, b
ahasa, basque, bulgarian, catalan, croatian, czech,
danish, dutch, esperanto, e
stonian, finnish, greek, icelandic, irish, italian,
latin, magyar, norsk, polis
h, portuges, romanian, russian, serbian, slovak,
slovene, spanish, swedish, tur
kish, ukrainian, nohyphenation, loaded.
(/usr/local/share/texmf-dist/tex/latex/base/article.cls
Document Class: article 2004/02/16 v1.4f Standard LaTeX
document class
(/usr/local/share/texmf-dist/tex/latex/base/size10.clo))
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/local/share/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/local/share/texmf-dist/tex/latex/microtype/microtype.sty
(/usr/local/share/texmf-dist/tex/latex/graphics/keyval.sty)
(/usr/local/share/texmf-dist/tex/latex/microtype/microtype.cfg))
(./minidump.aux)
(/usr/local/share/texmf-dist/tex/latex/microtype/mt-cmr.cfg)Segmentation
fault (core dumped) 


A quick look with gdb shows, that it hangs in line 4396
 of pdfetex2.c:
  c = getrpcode ( f , mem [p ].hh.b1 ) ;

Here p=999996 and f=-4096

Since f seems to be a table index to pdffontrbase a
negative value does not make sense to my mind.

I've tryed the same on a LINUX machine. There pdfLaTeX
does not crash, but p and f have the same values as
under OpenBSD.

As the most bad work around after taking *Word I've
added a line of code which leaves the routine if f
becomes negative. This seems to work in the sense, that
there isn't any more a core dump.

regards
  Dag

----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2006-07-26 14:08

Message:
Logged In: YES 
user_id=1608

FWIW, I looked at it and agree with Hartmut. 

--- pdftex.web.orig     2006-07-25 20:22:54.000000000 +0200
+++ pdftex.web  2006-07-26 14:19:35.514413422 +0200
@@ -24600,9 +24600,9 @@
         p := q;
         ptmp := p;
     end else begin
-        p := prev_rightmost(temp_head, q); {get |link(p) = q|}
+        p := prev_rightmost(link(temp_head), q); {get
|link(p) = q|}
         ptmp := p;
-        p := find_protchar_right(temp_head, p);
+        p := find_protchar_right(link(temp_head), p);
     end;
     @{
     short_display_n(p, 1);


----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-07-26 00:04

Message:
Logged In: YES 
user_id=929

the value of temp_head seems to be right, but maybe it must be

p := prev_rightmost(link(temp_head), q); {get |link(p) = q|}
p := find_protchar_right(link(temp_head), p);

with link(temp_head) instead of temp_head, as "The current
line to be justified appears in a horizontal list starting
at |link(temp_head)| and ending at |cur_break(cur_p)|."

wild guess only, seems to work.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-07-25 23:33

Message:
Logged In: YES 
user_id=929

seems it happens at this line in pdftex.web:

p := prev_rightmost(temp_head, q); {get |link(p) = q|}

the temp_head before this call is 1499996 which seems to be
wrong. Then after the call p = 1499996, and there is font
f=-4096 attached to this node which is also wrong. So it
seems that somehow temp_head got lost before call of
prev_rightmost(). No clue how.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2006-07-25 23:06

Message:
Logged In: YES 
user_id=1608

ok, will check tomorrow

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-25 21:30

Message:
Logged In: YES 
user_id=421

This still happens with the latest beta (I've got an OpenBSD
machine now myself):
Program received signal SIGSEGV, Segmentation fault.
0x1c048f03 in zcharpw (p=999996, side=1 '\001') at
pdftex2.c:3191
3191        c = getrpcode ( f , mem [p ].hh.b1 ) ;
(gdb) bt
#0  0x1c048f03 in zcharpw (p=999996, side=1 '\001') at
pdftex2.c:3191
#1  0x1c053d53 in zpostlinebreak (d=1) at pdftex2.c:7715
#2  0x1c007659 in zlinebreak (d=1) at pdftexini.c:2136
#3  0x1c05bb11 in initmath () at pdftex3.c:141
#4  0x1c065091 in maincontrol () at pdftex3.c:4582
#5  0x1c0130a2 in mainbody () at pdftexini.c:5647
#6  0x1c069d9e in main (ac=2, av=0xcfbd239c) at
pdftexextra.c:340
(gdb) l pdftex2.c:3191
3186        c = getlpcode ( f , mem [p ].hh.b1 ) ;
3187        lastleftmostchar = p ;
3188      } 
3189      else {
3190          
3191        c = getrpcode ( f , mem [p ].hh.b1 ) ;
3192        lastrightmostchar = p ;
3193      } 
3194      if ( c == 0 ) 
3195      return Result ;
(gdb) p f
$1 = -4096
(gdb) p p    
$2 = 999996
(gdb) p mem[p].hh   
$3 = {v = {LH = -268435455, RH = 675}, u = {B1 = 1, B0 = -4096}}


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=555&group_id=106

From noreply at sarovar.org  Wed Jul 26 12:29:30 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 15:59:30 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-432 ] Rules in a PDF qQ group
Message-ID: <E1G5gdu-0003UB-00@sarovar.org>

Patches item #432, was opened at 2005-10-06 21:01
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=432&group_id=106

Category: Positioning
Group: v1.30.0
>Status: Closed
Resolution: Accepted
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: Hans Hagen (hagen)
Summary: Rules in a PDF qQ group

Initial Comment:
Put rules with their positioning on the page inside a
qQ group. Should make \pdfliteral page {...} behave
consistently after text or rules or images, as then any
positioning starts from the PDF origin; no
delta-positioning anymore. It's already being tested in
pdfluatex. Just to have it at sarovar...

Testing welcome, particularily with text and graphics
transforms by graphicx package, to spot backward
incompatibilities, if any...

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 12:29

Message:
Logged In: YES 
user_id=421

This has been included in version 1.40

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-10-09 15:07

Message:
Logged In: YES 
user_id=929

Update pdf_set_origin_temp: Now has (h, v) parameters.

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=432&group_id=106

From noreply at sarovar.org  Wed Jul 26 14:52:43 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 18:22:43 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-555 ] pdfLaTeX coredumps on OpenBSD
Message-ID: <E1G5isV-0006DQ-00@sarovar.org>

Bugs item #555, was opened at 2006-05-20 16:16
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=555&group_id=106

Category: hz
Group: v1.30.0
Status: Closed
Resolution: Accepted
Priority: 5
Submitted By: Dag Leine (dag)
Assigned to: Taco Hoekwater (taco)
Summary: pdfLaTeX coredumps on OpenBSD

Initial Comment:
I've found, that pdfLaTeX coredumps on OpenBSD if I use
amsmath and microtype in some math environments. Here
is a minimal latex document for showing the bug:

> cat minidump.tex
\documentclass{article}
\usepackage{amsmath}
\usepackage{microtype}
\setlength{\parindent}{0pt}
\begin{document}
  \begin{align}
    x
  \end{align}
\end{document}
% end of minidump.tex

> pdflatex minidump
This is pdfeTeX, Version 3.141592-1.30.6-2.2 (Web2C 7.5.5)
entering extended mode
(./minidump.tex
LaTeX2e <2003/12/01>
Babel <v3.8d> and hyphenation patterns for american,
french, german, ngerman, b
ahasa, basque, bulgarian, catalan, croatian, czech,
danish, dutch, esperanto, e
stonian, finnish, greek, icelandic, irish, italian,
latin, magyar, norsk, polis
h, portuges, romanian, russian, serbian, slovak,
slovene, spanish, swedish, tur
kish, ukrainian, nohyphenation, loaded.
(/usr/local/share/texmf-dist/tex/latex/base/article.cls
Document Class: article 2004/02/16 v1.4f Standard LaTeX
document class
(/usr/local/share/texmf-dist/tex/latex/base/size10.clo))
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsmath.sty
For additional information on amsmath, use the `?' option.
(/usr/local/share/texmf-dist/tex/latex/amsmath/amstext.sty
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsgen.sty))
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsbsy.sty)
(/usr/local/share/texmf-dist/tex/latex/amsmath/amsopn.sty))
(/usr/local/share/texmf-dist/tex/latex/microtype/microtype.sty
(/usr/local/share/texmf-dist/tex/latex/graphics/keyval.sty)
(/usr/local/share/texmf-dist/tex/latex/microtype/microtype.cfg))
(./minidump.aux)
(/usr/local/share/texmf-dist/tex/latex/microtype/mt-cmr.cfg)Segmentation
fault (core dumped) 


A quick look with gdb shows, that it hangs in line 4396
 of pdfetex2.c:
  c = getrpcode ( f , mem [p ].hh.b1 ) ;

Here p=999996 and f=-4096

Since f seems to be a table index to pdffontrbase a
negative value does not make sense to my mind.

I've tryed the same on a LINUX machine. There pdfLaTeX
does not crash, but p and f have the same values as
under OpenBSD.

As the most bad work around after taking *Word I've
added a line of code which leaves the routine if f
becomes negative. This seems to work in the sense, that
there isn't any more a core dump.

regards
  Dag

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 14:52

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2006-07-26 14:08

Message:
Logged In: YES 
user_id=1608

FWIW, I looked at it and agree with Hartmut. 

--- pdftex.web.orig     2006-07-25 20:22:54.000000000 +0200
+++ pdftex.web  2006-07-26 14:19:35.514413422 +0200
@@ -24600,9 +24600,9 @@
         p := q;
         ptmp := p;
     end else begin
-        p := prev_rightmost(temp_head, q); {get |link(p) = q|}
+        p := prev_rightmost(link(temp_head), q); {get
|link(p) = q|}
         ptmp := p;
-        p := find_protchar_right(temp_head, p);
+        p := find_protchar_right(link(temp_head), p);
     end;
     @{
     short_display_n(p, 1);


----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-07-26 00:04

Message:
Logged In: YES 
user_id=929

the value of temp_head seems to be right, but maybe it must be

p := prev_rightmost(link(temp_head), q); {get |link(p) = q|}
p := find_protchar_right(link(temp_head), p);

with link(temp_head) instead of temp_head, as "The current
line to be justified appears in a horizontal list starting
at |link(temp_head)| and ending at |cur_break(cur_p)|."

wild guess only, seems to work.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-07-25 23:33

Message:
Logged In: YES 
user_id=929

seems it happens at this line in pdftex.web:

p := prev_rightmost(temp_head, q); {get |link(p) = q|}

the temp_head before this call is 1499996 which seems to be
wrong. Then after the call p = 1499996, and there is font
f=-4096 attached to this node which is also wrong. So it
seems that somehow temp_head got lost before call of
prev_rightmost(). No clue how.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2006-07-25 23:06

Message:
Logged In: YES 
user_id=1608

ok, will check tomorrow

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-25 21:30

Message:
Logged In: YES 
user_id=421

This still happens with the latest beta (I've got an OpenBSD
machine now myself):
Program received signal SIGSEGV, Segmentation fault.
0x1c048f03 in zcharpw (p=999996, side=1 '\001') at
pdftex2.c:3191
3191        c = getrpcode ( f , mem [p ].hh.b1 ) ;
(gdb) bt
#0  0x1c048f03 in zcharpw (p=999996, side=1 '\001') at
pdftex2.c:3191
#1  0x1c053d53 in zpostlinebreak (d=1) at pdftex2.c:7715
#2  0x1c007659 in zlinebreak (d=1) at pdftexini.c:2136
#3  0x1c05bb11 in initmath () at pdftex3.c:141
#4  0x1c065091 in maincontrol () at pdftex3.c:4582
#5  0x1c0130a2 in mainbody () at pdftexini.c:5647
#6  0x1c069d9e in main (ac=2, av=0xcfbd239c) at
pdftexextra.c:340
(gdb) l pdftex2.c:3191
3186        c = getlpcode ( f , mem [p ].hh.b1 ) ;
3187        lastleftmostchar = p ;
3188      } 
3189      else {
3190          
3191        c = getrpcode ( f , mem [p ].hh.b1 ) ;
3192        lastrightmostchar = p ;
3193      } 
3194      if ( c == 0 ) 
3195      return Result ;
(gdb) p f
$1 = -4096
(gdb) p p    
$2 = 999996
(gdb) p mem[p].hh   
$3 = {v = {LH = -268435455, RH = 675}, u = {B1 = 1, B0 = -4096}}


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=555&group_id=106

From noreply at sarovar.org  Wed Jul 26 14:54:21 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 18:24:21 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-548 ] Forwarded problem with Test.jpg
Message-ID: <E1G5iu5-0007MG-00@sarovar.org>

Bugs item #548, was opened at 2006-05-10 18:00
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=548&group_id=106

Category: Image inclusion
Group: v1.40.0
>Status: Closed
>Resolution: Fixed
Priority: 5
Submitted By: Heiko Oberdiek (oberdiek)
Assigned to: Martin Schr?der (oneiros)
Summary: Forwarded problem with Test.jpg

Initial Comment:
Hello,

in de.comp.text.tex Simon Eugster has problems with a
jpg file: http://livingshadow.uttx.net/uploads/Test.jpg
(Message-ID:
<1147112925.079314.323190 at v46g2000cwv.googlegroups.com>)

I don't have a JPEG validator, but
mozilla/firefox/ImageMagick/xzgv/file
don't show any sign of problems with the JPEG file.
Also I could reproduce his problems with pdfTeX
1.40.0-beta-20060213:
  \pdfximage{Test.jpg}

| Error: pdftex (file ./Test.jpg): reading JPEG image
failed
|  ==> Fatal error occurred, no output PDF file produced!

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-26 14:54

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-05-10 21:50

Message:
Logged In: YES 
user_id=929

The test for JFIF file format was not adequate. Please test
the patch. Bear in mind that currently only JFIF files allow
to extract the image resolution values. For all others
either explicitly give the wished dimensions (usual way), or
set \pdfimageresolution. Else you get some default resolution.

The problem went away also after treating Test.jpg (which is
an EXIF file) by jhead -de, as this removed all EXIF headers.

Regards, Hartmut

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=548&group_id=106

From noreply at sarovar.org  Wed Jul 26 15:25:51 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 18:55:51 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-577 ] Type 3 fonts: on screen fine,
	on paper filled and displaced
Message-ID: <E1G5jOZ-0003Jg-00@sarovar.org>

Bugs item #577, was opened at 2006-06-28 13:09
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=577&group_id=106

Category: Fonts
Group: v1.30.0
Status: Open
Resolution: Works For Me
Priority: 5
Submitted By: Peter Dyballa (ballapete)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Type 3 fonts: on screen fine, on paper filled and displaced

Initial Comment:
Hello!

It's pdfeTeX, Version 3.141592-1.30.4-2.2 (Web2C 7.5.5), on Mac OS 
X 10.4.6, PPC. The Type 3 font is dijkstra, a famous person's 
handwriting, as distributed by many SunOS and Solaris versions.

Until mid May I had no problem with pdfTeX, dijkstra, and my EPSON 
EPL-5800 (PostScript 3). This week I again wanted to print a personal 
letter with Prof. Dijkstra's handwriting used for my letter head. And 
some letters were filled (P,e,9), others were horizontally and/or 
vertically displaced from their correct positions. Dijkstra was installed 
with fontinst.

Can this be a pdfTeX problem? End of May I added almost 1 GB of files 
to update SDKs etc. in Mac OS X to be able to produce Universal 
Binaries. The last few Tiger versions are known as a bit buggy. My last 
TeX binaries updates happened in the middle of May, but I have no 
LOG files from this. The recent LOGs from making the format files 
contain the string above ...

Greetings

Pete

----------------------------------------------------------------------

>Comment By: Peter Dyballa (ballapete)
Date: 2006-07-26 15:25

Message:
Logged In: YES 
user_id=2303

*I* am terribly sorry!

Examining again my printer drivers upon your findings I now found that the 
PS3<version number> part of its name was removed! So I had some filter that 
converted PS or PDF into raster that was sent via ESP/P or such to the printer?

I found the right PPD file in the right place and re-installed this as my printer 
-- and it prints again. (Although it puzzles me why I could print the PDF 
output from XeTeX! This worked all the last weeks.) Probably *I* was 
choosing the wrong items in the printer configuration dialog!

Sorry for this!

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-24 23:46

Message:
Logged In: YES 
user_id=421

[Sorry for not reacting earlier, but gforge sends no mail
when a file is attached; you also have to add a comment.]

The attached file uses a Type 1 font and prints perfectly on
an Lexmark Optra T612 (which has a PS3 RIP)...

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-06-28 16:09

Message:
Logged In: YES 
user_id=421

Please provide a pdf showing the problems (attach it to this
bug).

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=577&group_id=106

From noreply at sarovar.org  Wed Jul 26 15:31:22 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 26 Jul 2006 19:01:22 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-577 ] Type 3 fonts: on screen fine,
	on paper filled and displaced
Message-ID: <E1G5jTu-0004Fm-00@sarovar.org>

Bugs item #577, was opened at 2006-06-28 13:09
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=577&group_id=106

Category: Fonts
Group: v1.30.0
>Status: Closed
Resolution: Works For Me
Priority: 5
Submitted By: Peter Dyballa (ballapete)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Type 3 fonts: on screen fine, on paper filled and displaced

Initial Comment:
Hello!

It's pdfeTeX, Version 3.141592-1.30.4-2.2 (Web2C 7.5.5), on Mac OS 
X 10.4.6, PPC. The Type 3 font is dijkstra, a famous person's 
handwriting, as distributed by many SunOS and Solaris versions.

Until mid May I had no problem with pdfTeX, dijkstra, and my EPSON 
EPL-5800 (PostScript 3). This week I again wanted to print a personal 
letter with Prof. Dijkstra's handwriting used for my letter head. And 
some letters were filled (P,e,9), others were horizontally and/or 
vertically displaced from their correct positions. Dijkstra was installed 
with fontinst.

Can this be a pdfTeX problem? End of May I added almost 1 GB of files 
to update SDKs etc. in Mac OS X to be able to produce Universal 
Binaries. The last few Tiger versions are known as a bit buggy. My last 
TeX binaries updates happened in the middle of May, but I have no 
LOG files from this. The recent LOGs from making the format files 
contain the string above ...

Greetings

Pete

----------------------------------------------------------------------

Comment By: Peter Dyballa (ballapete)
Date: 2006-07-26 15:25

Message:
Logged In: YES 
user_id=2303

*I* am terribly sorry!

Examining again my printer drivers upon your findings I now found that the 
PS3<version number> part of its name was removed! So I had some filter that 
converted PS or PDF into raster that was sent via ESP/P or such to the printer?

I found the right PPD file in the right place and re-installed this as my printer 
-- and it prints again. (Although it puzzles me why I could print the PDF 
output from XeTeX! This worked all the last weeks.) Probably *I* was 
choosing the wrong items in the printer configuration dialog!

Sorry for this!

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-07-24 23:46

Message:
Logged In: YES 
user_id=421

[Sorry for not reacting earlier, but gforge sends no mail
when a file is attached; you also have to add a comment.]

The attached file uses a Type 1 font and prints perfectly on
an Lexmark Optra T612 (which has a PS3 RIP)...

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-06-28 16:09

Message:
Logged In: YES 
user_id=421

Please provide a pdf showing the problems (attach it to this
bug).

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=577&group_id=106

From reinhard.kotucha at web.de  Fri Jul 28 23:02:18 2006
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 28 Jul 2006 23:02:18 +0200
Subject: [NTG-pdftex] LuaTeX schedule
Message-ID: <17610.31578.308608.998169@zarniwoop.ms25.local>

Hi,
any idea when LuaTeX will be released?

AFAIK it is somewhere near the top on Taco's TODO list.

TeXLive-2005 had been frozen end of October.  Because Karl spent so
much time to move from p4 to svn I don't expect that TL-2006 can be
released earlier.  Is it likely that we have LuaTeX in TL-2006?

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From taco at elvenkind.com  Fri Jul 28 23:17:30 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 28 Jul 2006 23:17:30 +0200
Subject: [NTG-pdftex] LuaTeX schedule
In-Reply-To: <17610.31578.308608.998169@zarniwoop.ms25.local>
References: <17610.31578.308608.998169@zarniwoop.ms25.local>
Message-ID: <44CA7EEA.10805@elvenkind.com>

Reinhard Kotucha wrote:
> Hi,
> any idea when LuaTeX will be released?

As in

"stable, tested and usable for production / inclusion in TL"?

not before next summer, I fear. Anyway, definately too late for
TL2006. I expect the first alphas to appear at the very end of
this year.

> AFAIK it is somewhere near the top on Taco's TODO list.

Yes, but it is also a massive amount of work. ;-)

Cheers, Taco

From pragma at wxs.nl  Fri Jul 28 23:25:59 2006
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 28 Jul 2006 23:25:59 +0200
Subject: [NTG-pdftex] LuaTeX schedule
In-Reply-To: <17610.31578.308608.998169@zarniwoop.ms25.local>
References: <17610.31578.308608.998169@zarniwoop.ms25.local>
Message-ID: <44CA80E7.1030001@wxs.nl>

Reinhard Kotucha wrote:
> Hi,
> any idea when LuaTeX will be released?
>
> AFAIK it is somewhere near the top on Taco's TODO list.
>
> TeXLive-2005 had been frozen end of October.  Because Karl spent so
> much time to move from p4 to svn I don't expect that TL-2006 can be
> released earlier.  Is it likely that we have LuaTeX in TL-2006?
>   
not likely; at eurotex we kind of decided that tex live 2006 would ship with 1.40 being the stable release; the dev version of luatex will be called metatex (also has mplib) and may become pdftex 2.0 (version number jump) after which for political reasons pdftex < 2 can be the old thing (no new features, only bug fixes) 

taco is currently working at the integration of some omega things and bringing pdftex internally upto 32 bits; after that lua support will be enhanced (this effort is sponsored by the oriental tex project) 

also, luatex has it sown svn repository and is part of a cleaned up tree   (cross platform) which may differ from the standard tex distribution (a drastic upgrade of tex like this is also a good opportunity to clean up other stuff) 

so .. this tex live no lua enhanced tex, next tex live the experimental version (metatex) and the year after that (when the fonts are also ready) probably pdftex 2.0 alongside pdftex 1.* 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


