From noreply at sarovar.org  Fri Dec  1 11:26:15 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 01 Dec 2006 15:56:15 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-462 ] HZ font expansion by text
	matrix manipulation
Message-ID: <E1Gq5ax-0007vx-00@sarovar.org>

Patches item #462, was opened at 2005-12-23 23:35
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=462&group_id=106

Category: Positioning
Group: v1.40.0
Status: Open
>Resolution: Postponed
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: The Thanh Han (hanthethanh)
Summary: HZ font expansion by text matrix manipulation

Initial Comment:
Use textmatrix Tm instead of /FontMatrix for font
expansion. Then a font file will be embedded only once
for all expansion factors. Gives smaller PDF files.
Works then also for non-embedded fonts. TrueType not
tried yet. Rough patch only, incomplete, work in
progress, no warranty, not for production.

Regards, Hartmut

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-12-01 11:26

Message:
Logged In: YES 
user_id=421

We've removed it from beta again; it introduces additional
problems and needs more time to stabilize.

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-09-30 16:22

Message:
Logged In: YES 
user_id=2217

It's great to have this included!

However, pdftex is now a bit too keen on autoexpanding -- it
does so, even if `autoexpand' is not specified. Although the
pre-created metrics are read, the physical font (pfb resp.
pk) is ignored. As has been discussed re: bug 304, *not*
using autoexpansion gives better results for MM (and MF)
fonts, since the fonts are not stretched blindly but stroke
widths are adjusted etc.

Compare the output of the test file from bugs/304 compiled
with an old pdftex and with 20060928. With the latter, the
strokes are slightly heavier. Same here (with an existing
file cmr10+100.mf):

\pdfadjustspacing2
\pdfmapline{ cmr10}
\pdfmapline{+cmr10+100}
\font\cmr =cmr10 \cmr
\pdffontexpand\cmr 100 0 100 %autoexpand
Hamburgefonts\par
\parfillskip 0pt
Hamburgefonts
\bye


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-02-13 19:41

Message:
Logged In: YES 
user_id=421

The last word from Hartmut was that it's not ready yet and
he'd be working on an improved version.

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-02-13 19:05

Message:
Logged In: YES 
user_id=2217

Will this make it into 1.40? I would love to see it included.

I've tested it a bit and did not find any problems (I'm also
using it for the pre-built microtype documentation on CTAN). 

Regards,
Robert

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=462&group_id=106

From noreply at sarovar.org  Mon Dec  4 09:21:00 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 04 Dec 2006 13:51:00 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-709 ] merging  patch 597 by Hartmut
Message-ID: <E1Gr94O-0005jk-00@sarovar.org>

Patches item #709, was opened at 2006-12-04 08:21
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Nobody (None)
Summary: merging  patch 597 by Hartmut

Initial Comment:
This is a patch against pdftex-1.40.0-beta-20061018
that merges patch 597 by Hartmut and does some clean up
in the font mechanism. Testing welcome very much.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

From noreply at sarovar.org  Mon Dec  4 12:02:19 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 04 Dec 2006 16:32:19 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-709 ] merging  patch 597 by Hartmut
Message-ID: <E1GrBaV-0006r3-00@sarovar.org>

Patches item #709, was opened at 2006-12-04 08:21
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Nobody (None)
Summary: merging  patch 597 by Hartmut

Initial Comment:
This is a patch against pdftex-1.40.0-beta-20061018
that merges patch 597 by Hartmut and does some clean up
in the font mechanism. Testing welcome very much.

----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 11:02

Message:
Logged In: YES 
user_id=710

I updated the patch to revert auto kerns to be explicit.
This will disable hyphenation if auto kern is used. On the
other hand this is much more robust. 

The pending problems are:

bug #693: still trying
bug #484: will not be fixed, better treat it as a limitation
bug #465: unlikely to be fixed


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

From noreply at sarovar.org  Mon Dec  4 13:11:11 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 04 Dec 2006 17:41:11 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-709 ] merging  patch 597 by Hartmut
Message-ID: <E1GrCf9-0005HM-00@sarovar.org>

Patches item #709, was opened at 2006-12-04 09:21
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

>Category: Fonts
>Group: v1.40.0
Status: Open
Resolution: None
>Priority: 6
Submitted By: The Thanh Han (hanthethanh)
>Assigned to: Hartmut Henkel (hhenkel)
Summary: merging  patch 597 by Hartmut

Initial Comment:
This is a patch against pdftex-1.40.0-beta-20061018
that merges patch 597 by Hartmut and does some clean up
in the font mechanism. Testing welcome very much.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 12:02

Message:
Logged In: YES 
user_id=710

I updated the patch to revert auto kerns to be explicit.
This will disable hyphenation if auto kern is used. On the
other hand this is much more robust. 

The pending problems are:

bug #693: still trying
bug #484: will not be fixed, better treat it as a limitation
bug #465: unlikely to be fixed


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

From noreply at sarovar.org  Mon Dec  4 13:33:07 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 04 Dec 2006 18:03:07 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-709 ] merging  patch 597 by Hartmut
Message-ID: <E1GrD0N-0000rU-00@sarovar.org>

Patches item #709, was opened at 2006-12-04 09:21
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

Category: Fonts
Group: v1.40.0
Status: Open
Resolution: None
Priority: 6
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Hartmut Henkel (hhenkel)
Summary: merging  patch 597 by Hartmut

Initial Comment:
This is a patch against pdftex-1.40.0-beta-20061018
that merges patch 597 by Hartmut and does some clean up
in the font mechanism. Testing welcome very much.

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-12-04 13:33

Message:
Logged In: YES 
user_id=421

I'm having troubles applying pdftex-20061204-2.patch against
pdftex-1.40.0-beta-20061017, especially pdftex.web. Can you
attach a diff against 1.40.0-beta-20061108 or your patched
pdftex.web?

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 12:02

Message:
Logged In: YES 
user_id=710

I updated the patch to revert auto kerns to be explicit.
This will disable hyphenation if auto kern is used. On the
other hand this is much more robust. 

The pending problems are:

bug #693: still trying
bug #484: will not be fixed, better treat it as a limitation
bug #465: unlikely to be fixed


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

From noreply at sarovar.org  Mon Dec  4 14:25:00 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 04 Dec 2006 18:55:00 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-709 ] merging  patch 597 by Hartmut
Message-ID: <E1GrDoa-0001hH-00@sarovar.org>

Patches item #709, was opened at 2006-12-04 08:21
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

Category: Fonts
Group: v1.40.0
Status: Open
Resolution: None
Priority: 6
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Hartmut Henkel (hhenkel)
Summary: merging  patch 597 by Hartmut

Initial Comment:
This is a patch against pdftex-1.40.0-beta-20061018
that merges patch 597 by Hartmut and does some clean up
in the font mechanism. Testing welcome very much.

----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 13:25

Message:
Logged In: YES 
user_id=710

are you saying that you have troubles applying the patch
against pdftex-1.40.0-beta-20061017? Can you please try to
apply against pdftex-1.40.0-beta-20061018? I have checked
everything again from the beginning as follows:

- download and unpack
http://sarovar.org/download.php/1100/pdftex-1.40.0-beta-20061017.tar.bz2

- download, ungzip and apply
http://sarovar.org/download.php/1108/pdftex-1.40.0-beta-20061017-20061108.diff.gz

- download
http://sarovar.org/tracker/download.php/106/495/709/237/pdftex-20061204-2.patch

- cd /path/to/pdftex-1.40.0-beta-20061017/src

- patch -p1 --dry-run /path/to/pdftex-20061204-2.patch

The patch applied ok, apart from change-files.txt (I removed
it from pdftexdir, as it's no longer relevant to pdftex).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-04 12:33

Message:
Logged In: YES 
user_id=421

I'm having troubles applying pdftex-20061204-2.patch against
pdftex-1.40.0-beta-20061017, especially pdftex.web. Can you
attach a diff against 1.40.0-beta-20061108 or your patched
pdftex.web?

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 11:02

Message:
Logged In: YES 
user_id=710

I updated the patch to revert auto kerns to be explicit.
This will disable hyphenation if auto kern is used. On the
other hand this is much more robust. 

The pending problems are:

bug #693: still trying
bug #484: will not be fixed, better treat it as a limitation
bug #465: unlikely to be fixed


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

From noreply at sarovar.org  Mon Dec  4 14:38:11 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 04 Dec 2006 19:08:11 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-709 ] merging  patch 597 by Hartmut
Message-ID: <E1GrE1L-0000az-00@sarovar.org>

Patches item #709, was opened at 2006-12-04 08:21
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

Category: Fonts
Group: v1.40.0
Status: Open
Resolution: None
Priority: 6
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Hartmut Henkel (hhenkel)
Summary: merging  patch 597 by Hartmut

Initial Comment:
This is a patch against pdftex-1.40.0-beta-20061018
that merges patch 597 by Hartmut and does some clean up
in the font mechanism. Testing welcome very much.

----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 13:38

Message:
Logged In: YES 
user_id=710

ah, sorry, my mistake. It's against
pdftex-1.40.0-beta-20061108 (the latest beta), not
pdftex-1.40.0-beta-20061018

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 13:25

Message:
Logged In: YES 
user_id=710

are you saying that you have troubles applying the patch
against pdftex-1.40.0-beta-20061017? Can you please try to
apply against pdftex-1.40.0-beta-20061018? I have checked
everything again from the beginning as follows:

- download and unpack
http://sarovar.org/download.php/1100/pdftex-1.40.0-beta-20061017.tar.bz2

- download, ungzip and apply
http://sarovar.org/download.php/1108/pdftex-1.40.0-beta-20061017-20061108.diff.gz

- download
http://sarovar.org/tracker/download.php/106/495/709/237/pdftex-20061204-2.patch

- cd /path/to/pdftex-1.40.0-beta-20061017/src

- patch -p1 --dry-run /path/to/pdftex-20061204-2.patch

The patch applied ok, apart from change-files.txt (I removed
it from pdftexdir, as it's no longer relevant to pdftex).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-04 12:33

Message:
Logged In: YES 
user_id=421

I'm having troubles applying pdftex-20061204-2.patch against
pdftex-1.40.0-beta-20061017, especially pdftex.web. Can you
attach a diff against 1.40.0-beta-20061108 or your patched
pdftex.web?

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 11:02

Message:
Logged In: YES 
user_id=710

I updated the patch to revert auto kerns to be explicit.
This will disable hyphenation if auto kern is used. On the
other hand this is much more robust. 

The pending problems are:

bug #693: still trying
bug #484: will not be fixed, better treat it as a limitation
bug #465: unlikely to be fixed


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

From kakuto at fsci.fuk.kindai.ac.jp  Mon Dec  4 17:12:03 2006
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Tue, 05 Dec 2006 01:12:03 +0900
Subject: [NTG-pdftex] [ pdftex-Patches-709 ] merging patch 597 by Hartmut
In-Reply-To: Your message of "Mon, 04 Dec 2006 19:08:11 +0530"
References: <E1GrE1L-0000az-00@sarovar.org>
Message-ID: <200612041612.kB4GC5Rh002428@jupiter.fsci.fuk.kindai.ac.jp>

Hi,

> Comment By: The Thanh Han (hanthethanh)Date: 2006-12-04 11:02
> Message:Logged In: YES user_id=710
> I updated the patch to revert auto kerns to be explicit.
> This will disable hyphenation if auto kern is used.
> On the other hand this is much more robust. 
> The pending problems are:
> bug #693: still tryingbug #484: will not be fixed, better treat
> it as a limitationbug #465: unlikely to be fixed

I've tried 'usrguide.tex' with 'microtype' package.
The result looks bad.  I think something is wrong with
respect to autoexpand.

Thanks,
Akira

From hanthethanh at gmail.com  Mon Dec  4 18:40:14 2006
From: hanthethanh at gmail.com (Thanh Han The)
Date: Mon, 4 Dec 2006 18:40:14 +0100
Subject: [NTG-pdftex] [ pdftex-Patches-709 ] merging patch 597 by Hartmut
Message-ID: <74f506dc0612040940m3a7a0160i657f5e20da1838b2@mail.gmail.com>

Hi Akira,

thanks for testing. Can you please try this patch:

--- pdftex.web	2006-12-04 18:37:13.000000000 +0100
+++ /home/thanh/tmp/pdftex.web	2006-12-04 18:36:12.000000000 +0100
@@ -15694,7 +15694,8 @@
         pdf_new_Tm_a := 0
     else
         pdf_new_Tm_a := pdf_font_expand_ratio[f];
-    if pdf_new_Tm_a <> 0 then begin
+    if (pdf_new_Tm_a <> 0) or
+        ((pdf_new_Tm_a = 0) and (pdf_cur_Tm_a <> 0)) then begin
         pdf_print_real(1000 + pdf_new_Tm_a, 3);
         pdf_print(" 0 0 1 ");
         pdf_print_bp(cur_h - pdf_origin_h);


Regards,
Thanh

On Tue, Dec 05, 2006 at 01:12:03AM +0900, Akira Kakuto wrote:
> Hi,
>
> > Comment By: The Thanh Han (hanthethanh)Date: 2006-12-04 11:02
> > Message:Logged In: YES user_id=710
> > I updated the patch to revert auto kerns to be explicit.
> > This will disable hyphenation if auto kern is used.
> > On the other hand this is much more robust.
> > The pending problems are:
> > bug #693: still tryingbug #484: will not be fixed, better treat
> > it as a limitationbug #465: unlikely to be fixed
>
> I've tried 'usrguide.tex' with 'microtype' package.
> The result looks bad.  I think something is wrong with
> respect to autoexpand.
>
> Thanks,
> Akira
> _______________________________________________
> ntg-pdftex mailing list
> ntg-pdftex at ntg.nl
> http://www.ntg.nl/mailman/listinfo/ntg-pdftex

From kakuto at fsci.fuk.kindai.ac.jp  Tue Dec  5 11:15:34 2006
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Tue, 05 Dec 2006 19:15:34 +0900
Subject: [NTG-pdftex] [ pdftex-Patches-709 ] merging patch 597 by Hartmut
In-Reply-To: Your message of "Mon, 4 Dec 2006 18:40:14 +0100"
References: <74f506dc0612040940m3a7a0160i657f5e20da1838b2@mail.gmail.com>
Message-ID: <200612051015.kB5AFaf0006405@jupiter.fsci.fuk.kindai.ac.jp>

Hi Thanh,

> thanks for testing. Can you please try this patch:

It has bocome ok after applying the patch!

Thanks a lot,
Akira

From noreply at sarovar.org  Tue Dec  5 23:52:24 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 06 Dec 2006 04:22:24 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-709 ] merging  patch 597 by Hartmut
Message-ID: <E1Grj9E-0001an-00@sarovar.org>

Patches item #709, was opened at 2006-12-04 08:21
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

Category: Fonts
Group: v1.40.0
Status: Open
Resolution: None
Priority: 6
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Hartmut Henkel (hhenkel)
Summary: merging  patch 597 by Hartmut

Initial Comment:
This is a patch against pdftex-1.40.0-beta-20061018
that merges patch 597 by Hartmut and does some clean up
in the font mechanism. Testing welcome very much.

----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-05 22:52

Message:
Logged In: YES 
user_id=710

patch updated; tested with pdftex manual, microtype manual
and base latex doc. A fix for bug #693 is included.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 13:38

Message:
Logged In: YES 
user_id=710

ah, sorry, my mistake. It's against
pdftex-1.40.0-beta-20061108 (the latest beta), not
pdftex-1.40.0-beta-20061018

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 13:25

Message:
Logged In: YES 
user_id=710

are you saying that you have troubles applying the patch
against pdftex-1.40.0-beta-20061017? Can you please try to
apply against pdftex-1.40.0-beta-20061018? I have checked
everything again from the beginning as follows:

- download and unpack
http://sarovar.org/download.php/1100/pdftex-1.40.0-beta-20061017.tar.bz2

- download, ungzip and apply
http://sarovar.org/download.php/1108/pdftex-1.40.0-beta-20061017-20061108.diff.gz

- download
http://sarovar.org/tracker/download.php/106/495/709/237/pdftex-20061204-2.patch

- cd /path/to/pdftex-1.40.0-beta-20061017/src

- patch -p1 --dry-run /path/to/pdftex-20061204-2.patch

The patch applied ok, apart from change-files.txt (I removed
it from pdftexdir, as it's no longer relevant to pdftex).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-04 12:33

Message:
Logged In: YES 
user_id=421

I'm having troubles applying pdftex-20061204-2.patch against
pdftex-1.40.0-beta-20061017, especially pdftex.web. Can you
attach a diff against 1.40.0-beta-20061108 or your patched
pdftex.web?

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 11:02

Message:
Logged In: YES 
user_id=710

I updated the patch to revert auto kerns to be explicit.
This will disable hyphenation if auto kern is used. On the
other hand this is much more robust. 

The pending problems are:

bug #693: still trying
bug #484: will not be fixed, better treat it as a limitation
bug #465: unlikely to be fixed


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

From noreply at sarovar.org  Wed Dec  6 18:05:53 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 06 Dec 2006 22:35:53 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-709 ] merging  patch 597 by Hartmut
Message-ID: <E1Gs0DR-000783-00@sarovar.org>

Patches item #709, was opened at 2006-12-04 08:21
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

Category: Fonts
Group: v1.40.0
Status: Open
Resolution: None
Priority: 6
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Hartmut Henkel (hhenkel)
Summary: merging  patch 597 by Hartmut

Initial Comment:
This is a patch against pdftex-1.40.0-beta-20061018
that merges patch 597 by Hartmut and does some clean up
in the font mechanism. Testing welcome very much.

----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-06 17:05

Message:
Logged In: YES 
user_id=710

patch updated to fix a bug with pdf inclusion.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-05 22:52

Message:
Logged In: YES 
user_id=710

patch updated; tested with pdftex manual, microtype manual
and base latex doc. A fix for bug #693 is included.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 13:38

Message:
Logged In: YES 
user_id=710

ah, sorry, my mistake. It's against
pdftex-1.40.0-beta-20061108 (the latest beta), not
pdftex-1.40.0-beta-20061018

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 13:25

Message:
Logged In: YES 
user_id=710

are you saying that you have troubles applying the patch
against pdftex-1.40.0-beta-20061017? Can you please try to
apply against pdftex-1.40.0-beta-20061018? I have checked
everything again from the beginning as follows:

- download and unpack
http://sarovar.org/download.php/1100/pdftex-1.40.0-beta-20061017.tar.bz2

- download, ungzip and apply
http://sarovar.org/download.php/1108/pdftex-1.40.0-beta-20061017-20061108.diff.gz

- download
http://sarovar.org/tracker/download.php/106/495/709/237/pdftex-20061204-2.patch

- cd /path/to/pdftex-1.40.0-beta-20061017/src

- patch -p1 --dry-run /path/to/pdftex-20061204-2.patch

The patch applied ok, apart from change-files.txt (I removed
it from pdftexdir, as it's no longer relevant to pdftex).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-04 12:33

Message:
Logged In: YES 
user_id=421

I'm having troubles applying pdftex-20061204-2.patch against
pdftex-1.40.0-beta-20061017, especially pdftex.web. Can you
attach a diff against 1.40.0-beta-20061108 or your patched
pdftex.web?

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 11:02

Message:
Logged In: YES 
user_id=710

I updated the patch to revert auto kerns to be explicit.
This will disable hyphenation if auto kern is used. On the
other hand this is much more robust. 

The pending problems are:

bug #693: still trying
bug #484: will not be fixed, better treat it as a limitation
bug #465: unlikely to be fixed


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

From noreply at sarovar.org  Wed Dec  6 22:59:45 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 07 Dec 2006 03:29:45 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-597 ] Patch for more structured font
	writing
Message-ID: <E1Gs4np-0005eu-00@sarovar.org>

Patches item #597, was opened at 2006-08-20 16:37
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=597&group_id=106

Category: Fonts
Group: v1.40.0
>Status: Closed
>Resolution: Accepted
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: The Thanh Han (hanthethanh)
Summary: Patch for more structured font writing

Initial Comment:
Now there are individual structures for font
dictionaries and font descriptors. Several font objects
can share the same descriptor structure. All structures
are registered in AVL trees and flushed at the end. The
fm_entry structure is cleaned up, now contains mostly
map related stuff. Font descriptors can be shared also
by embedded PDF files. tfm_of_fm() is gone. New
makesubsettag() based on md5sum() with collision
detection. Written encoding vectors are minimized in
size (try it out on pdftex-t.tex :-) Replacement of
Type1 fonts from embedded files seems to work.

TrueType writing not yet done, currently broken. Help
appreciated!

More see readme.pdf included in patch .tar file.

Regards, Hartmut

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-12-06 22:59

Message:
Logged In: YES 
user_id=421

See patch 709

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-08-22 08:19

Message:
Logged In: YES 
user_id=929

the patch doesn't fit to the TrueType model, needs more
consideration...

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=597&group_id=106

From martin at oneiros.de  Wed Dec  6 23:27:35 2006
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 6 Dec 2006 23:27:35 +0100
Subject: [NTG-pdftex] pdftex-1.40.0-beta-20061206
Message-ID: <68c491a60612061427x4e985ae4yd45a9c14127651b6@mail.gmail.com>

http://sarovar.org/download.php/1117/pdftex-1.40.0-beta-20061108-20061206.diff.gz

Another interim release incorporating Thanh's patches. I hope I
haven't broken too much.

---------------------------------------------------------------
pdfTeX 3.141592-1.40.0-beta-20061206 was released on 2006-12-06
---------------------------------------------------------------
- bugfix: crash with autokern (663)
- memory for virtual fonts can now grow dynamically (patch 705)
- rework the font mechanism (patches 597 and 709)
- updated libpng to 1.2.14

From pragma at wxs.nl  Wed Dec  6 23:50:02 2006
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 06 Dec 2006 23:50:02 +0100
Subject: [NTG-pdftex] [ pdftex-Patches-597 ] Patch for more structured
 font	writing
In-Reply-To: <E1Gs4np-0005eu-00@sarovar.org>
References: <E1Gs4np-0005eu-00@sarovar.org>
Message-ID: <4577491A.8060007@wxs.nl>

noreply at sarovar.org wrote:
> Initial Comment:
> Now there are individual structures for font
> dictionaries and font descriptors. Several font objects
> can share the same descriptor structure. All structures
> are registered in AVL trees and flushed at the end. The
> fm_entry structure is cleaned up, now contains mostly
> map related stuff. Font descriptors can be shared also
> by embedded PDF files. tfm_of_fm() is gone. New
> makesubsettag() based on md5sum() with collision
> detection. Written encoding vectors are minimized in
> size (try it out on pdftex-t.tex :-) Replacement of
> Type1 fonts from embedded files seems to work.
>   
impressive! 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From noreply at sarovar.org  Sat Dec  9 16:00:12 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sat, 09 Dec 2006 20:30:12 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-711 ] ToUnicode CMap feature does not
	work in recent beta
Message-ID: <E1Gt3gS-0004Qs-00@sarovar.org>

Bugs item #711, was opened at 2006-12-10 00:00
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=711&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Dohyun Kim (nomos)
Assigned to: Nobody (None)
Summary: ToUnicode CMap feature does not work in recent beta

Initial Comment:
pdfTeX 1.40.0-beta-20061206 seems to have introduced a
bug on ToUnicode CMap feature.

While version 20061108 was ok about this, PDF file
produced by beta-20061206 does not contain any
ToUnicode CMap in any case.

Even when I use the traditional \pdffontattr command,
let alone the more recent \pdfgentounicode, I cannot
find any unicode cmap notaion in the pdf.

For your reference, I here link my test file (2Mb):

http://people.ktug.or.kr/~nomos/mine/testtouni.tar.gz




----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=711&group_id=106

From kakuto at fsci.fuk.kindai.ac.jp  Sun Dec 10 09:49:24 2006
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Sun, 10 Dec 2006 17:49:24 +0900
Subject: [NTG-pdftex] [ pdftex-Bugs-711 ] ToUnicode CMap feature does
	not	work in recent beta
In-Reply-To: Your message of "Sat, 09 Dec 2006 20:30:12 +0530"
References: <E1Gt3gS-0004Qs-00@sarovar.org>
Message-ID: <200612100849.kBA8nPQ0004321@jupiter.fsci.fuk.kindai.ac.jp>

Hi,

> pdfTeX 1.40.0-beta-20061206 seems to have introduced a
> bug on ToUnicode CMap feature.
> 
> While version 20061108 was ok about this, PDF file
> produced by beta-20061206 does not contain any
> ToUnicode CMap in any case.

I've also confirmed that Thanh (temporarily?) discarded
the "ToUnicode" feature.

Thanks,
Akira

From hanthethanh at gmail.com  Sun Dec 10 10:57:10 2006
From: hanthethanh at gmail.com (Thanh Han The)
Date: Sun, 10 Dec 2006 10:57:10 +0100
Subject: [NTG-pdftex] [ pdftex-Bugs-711 ] ToUnicode CMap feature does
	not work in recent beta
Message-ID: <74f506dc0612100157i6991f696p1546e847c1614e45@mail.gmail.com>

I forgot it when merging the patches by Hartmut. Will upload
a patch soon.

Thanks a lot for testing and reporting problems.

Thanh

On Sun, Dec 10, 2006 at 05:49:24PM +0900, Akira Kakuto wrote:
> Hi,
>
> > pdfTeX 1.40.0-beta-20061206 seems to have introduced a
> > bug on ToUnicode CMap feature.
> >
> > While version 20061108 was ok about this, PDF file
> > produced by beta-20061206 does not contain any
> > ToUnicode CMap in any case.
>
> I've also confirmed that Thanh (temporarily?) discarded
> the "ToUnicode" feature.
>
> Thanks,
> Akira
> _______________________________________________
> ntg-pdftex mailing list
> ntg-pdftex at ntg.nl
> http://www.ntg.nl/mailman/listinfo/ntg-pdftex

From noreply at sarovar.org  Mon Dec 11 01:36:58 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 11 Dec 2006 06:06:58 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-320 ] add support for a
	colour stack
Message-ID: <E1GtZAA-00016f-00@sarovar.org>

Feature Requests item #320, was opened at 2005-03-28 05:52
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=320&group_id=106

Category: None
Group: None
>Status: Closed
>Resolution: Fixed
Priority: 5
Submitted By: Aleks Kleyn (aleks_kleyn)
Assigned to: Nobody (None)
Summary: add support for a colour stack

Initial Comment:
I want to change color of text using comand \textcolor
{blue}. However when text flows from one page to 
another the color resets to standard on the next 
page. 
Initially I beleived that this problem of pdf. 
However I 
tried today latex.exe and then converted dvi to pdf. 
I got 
effect that I expected: text had on both pages the 
same 
color. However using of pdflatex is more better 
because 
it prepares bookmarks for pdf.

----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-12-11 01:36

Message:
Logged In: YES 
user_id=421

See patch 603.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-07-10 16:19

Message:
Logged In: YES 
user_id=421

This is really a feature request.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-06-16 14:45

Message:
Logged In: YES 
user_id=421

The cause is a missing colour stack of pdfTeX; this is a
known problem (and more properly a feature request).

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=320&group_id=106

From noreply at sarovar.org  Mon Dec 11 18:20:09 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Mon, 11 Dec 2006 22:50:09 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-711 ] ToUnicode CMap feature does not
	work in recent beta
Message-ID: <E1Gtooz-0005ZC-00@sarovar.org>

Bugs item #711, was opened at 2006-12-09 16:00
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=711&group_id=106

>Category: Fonts
>Group: v1.40.0
>Status: Closed
>Resolution: Fixed
Priority: 5
Submitted By: Dohyun Kim (nomos)
>Assigned to: The Thanh Han (hanthethanh)
Summary: ToUnicode CMap feature does not work in recent beta

Initial Comment:
pdfTeX 1.40.0-beta-20061206 seems to have introduced a
bug on ToUnicode CMap feature.

While version 20061108 was ok about this, PDF file
produced by beta-20061206 does not contain any
ToUnicode CMap in any case.

Even when I use the traditional \pdffontattr command,
let alone the more recent \pdfgentounicode, I cannot
find any unicode cmap notaion in the pdf.

For your reference, I here link my test file (2Mb):

http://people.ktug.or.kr/~nomos/mine/testtouni.tar.gz




----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-11 18:20

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=711&group_id=106

From noreply at sarovar.org  Tue Dec 12 03:53:22 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 12 Dec 2006 08:23:22 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-712 ] problems with \letterspacefont
Message-ID: <E1Gtxli-0008NL-00@sarovar.org>

Bugs item #712, was opened at 2006-12-12 02:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: Nobody (None)
Summary: problems with \letterspacefont

Initial Comment:
% Testing the new \letterspacefont, I found:
%
% (1) it's certainly not correct to have the spacing 
%     relative to character widths (look at `minimal'!)
% (2) everything's shifted to the right
% (3) when trying to expand the letter-spaced font, I 
%     get the warning `font should be expanded before 
%     its first use' (even before its first use), and 
%     then pdftex segfaults.

\pdfadjustspacing2
\hsize13cm
This is normal text This is normal text 
This is normal text This is normal text 
This is normal text This is normal text
{\letterspacefont\lspfont=\font 1000
%\pdffontexpand\lspfont 20 20 5 autoexpand % segfault
\lspfont
This isn't normal text This isn't normal text
This isn't normal text This is minimal text}
This is normal text This is normal text 
This is normal text
\bye





----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

From pragma at wxs.nl  Tue Dec 12 11:17:37 2006
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 12 Dec 2006 11:17:37 +0100
Subject: [NTG-pdftex] [pdftex] auto letter spacing
In-Reply-To: <74f506dc0612120130h2d0218c5of024e6def213f083@mail.gmail.com>
References: <74f506dc0612120130h2d0218c5of024e6def213f083@mail.gmail.com>
Message-ID: <457E81C1.3080400@wxs.nl>

Thanh Han The wrote:
> On Mon, Dec 11, 2006 at 11:31:54PM +0100, Hans Hagen wrote:
>   
>> Thanh Han The wrote:
>>     
>>> Hi all,
>>>
>>> I am working on a primitive \letterspacefont that generates
>>> a letter-spaced font from another font like this:
>>>
>>> ,--------
>>> | \font\f=cmr10
>>> | \letterspacefont\fx=\f 100 % letterspace \f by a factor 100/1000
>>> | \fx This is a text in letter-spaced cmr10
>>> `--------
>>>
>>> the above example creates \fx as a virtual font, in which
>>> each charater is taken from \f, and have a kern of
>>> 50*quad(f)/1000 at each side. All this happens in pdftex
>>> memory.
>>>
>>> However I am not sure the "more right" way to do this is that
>>> each character c should have a kern of 5*width_of_c/1000 at
>>> each side, ie the kern inserted around each character is
>>> proportional to its width, instead of having a fixed global
>>> value for all characters. This is more closed to the way font
>>> expansion is done, but is different from what fontinst does
>>> for letter-spacing.
>>>
>>> How do you see it?
>>>
>>>       
>> Is there a way to prevent the kern before or after a char? Say that we have
>> a section title, in that case one does not want the margin to be spoiled
>> (the first char needs to align then)
>>     
>
> I don't know of an easy way. But it's possible to have
> another primitive that returns the kern at the left resp.
> right side of a char from such a font.
>
>   
best would be to have something

\noletterspacekern          (will inhibit the next kern)
\removeletterspacekern  (removes the last kern, a kind of unkern)

so that one can say:

{\fx \noletterspacekern Some Text\removeletterspacekern}

(\[left|right]letterspacekern<charnr> would be handy anyway)





-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From hanthethanh at gmail.com  Tue Dec 12 12:31:37 2006
From: hanthethanh at gmail.com (Thanh Han The)
Date: Tue, 12 Dec 2006 12:31:37 +0100
Subject: [NTG-pdftex] [pdftex] auto letter spacing
Message-ID: <74f506dc0612120331w161057d2jf952f37b4df71682@mail.gmail.com>

On Tue, Dec 12, 2006 at 11:17:37AM +0100, Hans Hagen wrote:
> >I don't know of an easy way. But it's possible to have
> >another primitive that returns the kern at the left resp.
> >right side of a char from such a font.
> >
> >
> best would be to have something
>
> \noletterspacekern          (will inhibit the next kern)
> \removeletterspacekern  (removes the last kern, a kind of unkern)
>
> so that one can say:
>
> {\fx \noletterspacekern Some Text\removeletterspacekern}

yes it is better to have this. But it's not easy to do (at
least for me).

Thanh

From noreply at sarovar.org  Tue Dec 12 14:31:57 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 12 Dec 2006 19:01:57 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-712 ] problems with \letterspacefont
Message-ID: <E1Gu7jh-000103-00@sarovar.org>

Bugs item #712, was opened at 2006-12-12 02:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: Nobody (None)
Summary: problems with \letterspacefont

Initial Comment:
% Testing the new \letterspacefont, I found:
%
% (1) it's certainly not correct to have the spacing 
%     relative to character widths (look at `minimal'!)
% (2) everything's shifted to the right
% (3) when trying to expand the letter-spaced font, I 
%     get the warning `font should be expanded before 
%     its first use' (even before its first use), and 
%     then pdftex segfaults.

\pdfadjustspacing2
\hsize13cm
This is normal text This is normal text 
This is normal text This is normal text 
This is normal text This is normal text
{\letterspacefont\lspfont=\font 1000
%\pdffontexpand\lspfont 20 20 5 autoexpand % segfault
\lspfont
This isn't normal text This isn't normal text
This isn't normal text This is minimal text}
This is normal text This is normal text 
This is normal text
\bye





----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-12 13:31

Message:
Logged In: YES 
user_id=710

I fixed (1) and (2); (3) is disabled now, ie you cannot
expand a letter-spaced font. Please wait for another release
from Martin.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

From noreply at sarovar.org  Tue Dec 12 14:32:00 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 12 Dec 2006 19:02:00 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-712 ] problems with \letterspacefont
Message-ID: <E1Gu7jk-00013o-00@sarovar.org>

Bugs item #712, was opened at 2006-12-12 03:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

>Category: hz
>Group: v1.40.0
Status: Open
>Resolution: Accepted
Priority: 5
Submitted By: Robert (schlcht)
>Assigned to: The Thanh Han (hanthethanh)
Summary: problems with \letterspacefont

Initial Comment:
% Testing the new \letterspacefont, I found:
%
% (1) it's certainly not correct to have the spacing 
%     relative to character widths (look at `minimal'!)
% (2) everything's shifted to the right
% (3) when trying to expand the letter-spaced font, I 
%     get the warning `font should be expanded before 
%     its first use' (even before its first use), and 
%     then pdftex segfaults.

\pdfadjustspacing2
\hsize13cm
This is normal text This is normal text 
This is normal text This is normal text 
This is normal text This is normal text
{\letterspacefont\lspfont=\font 1000
%\pdffontexpand\lspfont 20 20 5 autoexpand % segfault
\lspfont
This isn't normal text This isn't normal text
This isn't normal text This is minimal text}
This is normal text This is normal text 
This is normal text
\bye





----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-12 14:31

Message:
Logged In: YES 
user_id=710

I fixed (1) and (2); (3) is disabled now, ie you cannot
expand a letter-spaced font. Please wait for another release
from Martin.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

From noreply at sarovar.org  Tue Dec 12 16:50:18 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 12 Dec 2006 21:20:18 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-712 ] problems with \letterspacefont
Message-ID: <E1Gu9ta-00038i-00@sarovar.org>

Bugs item #712, was opened at 2006-12-12 02:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

Category: hz
Group: v1.40.0
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: problems with \letterspacefont

Initial Comment:
% Testing the new \letterspacefont, I found:
%
% (1) it's certainly not correct to have the spacing 
%     relative to character widths (look at `minimal'!)
% (2) everything's shifted to the right
% (3) when trying to expand the letter-spaced font, I 
%     get the warning `font should be expanded before 
%     its first use' (even before its first use), and 
%     then pdftex segfaults.

\pdfadjustspacing2
\hsize13cm
This is normal text This is normal text 
This is normal text This is normal text 
This is normal text This is normal text
{\letterspacefont\lspfont=\font 1000
%\pdffontexpand\lspfont 20 20 5 autoexpand % segfault
\lspfont
This isn't normal text This isn't normal text
This isn't normal text This is minimal text}
This is normal text This is normal text 
This is normal text
\bye





----------------------------------------------------------------------

>Comment By: Robert (schlcht)
Date: 2006-12-12 15:50

Message:
Logged In: YES 
user_id=2217

% and here's
% (4) ligatures will be broken up, not only in the 
%     letter-spaced font (which is probably acceptable), 
%     but in all subsequent uses of the base font, too

fi\par
{\letterspacefont\lspfont=\font 100 \lspfont fi}\par
fi

\bye



----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-12 13:31

Message:
Logged In: YES 
user_id=710

I fixed (1) and (2); (3) is disabled now, ie you cannot
expand a letter-spaced font. Please wait for another release
from Martin.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

From noreply at sarovar.org  Tue Dec 12 18:47:44 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Tue, 12 Dec 2006 23:17:44 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-712 ] problems with \letterspacefont
Message-ID: <E1GuBjE-0007Oe-00@sarovar.org>

Bugs item #712, was opened at 2006-12-12 02:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

Category: hz
Group: v1.40.0
Status: Open
Resolution: Accepted
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: problems with \letterspacefont

Initial Comment:
% Testing the new \letterspacefont, I found:
%
% (1) it's certainly not correct to have the spacing 
%     relative to character widths (look at `minimal'!)
% (2) everything's shifted to the right
% (3) when trying to expand the letter-spaced font, I 
%     get the warning `font should be expanded before 
%     its first use' (even before its first use), and 
%     then pdftex segfaults.

\pdfadjustspacing2
\hsize13cm
This is normal text This is normal text 
This is normal text This is normal text 
This is normal text This is normal text
{\letterspacefont\lspfont=\font 1000
%\pdffontexpand\lspfont 20 20 5 autoexpand % segfault
\lspfont
This isn't normal text This isn't normal text
This isn't normal text This is minimal text}
This is normal text This is normal text 
This is normal text
\bye





----------------------------------------------------------------------

>Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-12 17:47

Message:
Logged In: YES 
user_id=710

oops, I disabled ligature for letter-spaced font, but this
should not affect the base font. Will have to rethink. Most
likely the syntax will change like follows:

\letterspacefont\f=cmr10 at 11pt 100
\f text




----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-12-12 15:50

Message:
Logged In: YES 
user_id=2217

% and here's
% (4) ligatures will be broken up, not only in the 
%     letter-spaced font (which is probably acceptable), 
%     but in all subsequent uses of the base font, too

fi\par
{\letterspacefont\lspfont=\font 100 \lspfont fi}\par
fi

\bye



----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-12 13:31

Message:
Logged In: YES 
user_id=710

I fixed (1) and (2); (3) is disabled now, ie you cannot
expand a letter-spaced font. Please wait for another release
from Martin.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

From martin at oneiros.de  Wed Dec 13 15:36:59 2006
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 13 Dec 2006 15:36:59 +0100
Subject: [NTG-pdftex] 1.40-rc2
Message-ID: <68c491a60612130636w39ba597dv7a719ae237746ef3@mail.gmail.com>

http://sarovar.org/download.php/1128/pdftex-1.40.0-rc1-rc2.diff.gz
http://sarovar.org/download.php/1127/pdftex-1.40.0-rc2.tar.bz2

This is just a quick update before Thanh flies to Vi?t Nam for some weeks. :-)

-----------------------------------------------------
pdfTeX 3.141592-1.40.0-rc2 was released on 2006-12-13
-----------------------------------------------------
changes from last rc1:
  - fix \letterspacefont (bug 712)
  - fix problems with unused objects

Best
   Martin

From hartmut_henkel at gmx.de  Wed Dec 13 20:13:07 2006
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed, 13 Dec 2006 20:13:07 +0100 (CET)
Subject: [NTG-pdftex] [pdftex] 1.40-rc2
In-Reply-To: <68c491a60612130636w39ba597dv7a719ae237746ef3@mail.gmail.com>
References: <68c491a60612130636w39ba597dv7a719ae237746ef3@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0612132002070.4283@hahepc1.hahe>

Hi pdfTeX fans,

On Wed, 13 Dec 2006, Martin Schr?der wrote:

> http://sarovar.org/download.php/1128/pdftex-1.40.0-rc1-rc2.diff.gz
> http://sarovar.org/download.php/1127/pdftex-1.40.0-rc2.tar.bz2
>
> This is just a quick update before Thanh flies to Vi??t Nam for some
> weeks. :-)

please help and scrutinize this particular version, as it might well be
the one going into TeXLive 2006. If you have a special or demanding
application, please use this pdftex for testing. Or just try it out in
your daily workflow. Interesting areas for testing are, among others:
Subfonts, PDF file embedding, HZ expansion, ToUnicode stuff.

Regards, Hartmut

(8 :-)

From noreply at sarovar.org  Thu Dec 14 00:49:11 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 14 Dec 2006 05:19:11 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-714 ] Inclusion of PDF1.7 reference
	fails with lookup_fd_entry: Assertion `s != ((void *)0)'
Message-ID: <E1GudqZ-0005Fv-00@sarovar.org>

Bugs item #714, was opened at 2006-12-14 00:49
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=714&group_id=106

Category: Fonts
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin Schr?der (oneiros)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Inclusion of PDF1.7 reference fails with lookup_fd_entry: Assertion `s != ((void *)0)'

Initial Comment:
The attached test (including the PDF 1.7 reference)
fails with
[...]
<use pdf17.pdf, page 22> <use pdf17.pdf, page 23> <use
pdf17.pdf, page 24> [1
<./pdf17.pdf{/home/ms/.texmf-var/fonts/map/pdftex/updmap/pdftex.map}>
<./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf>
<./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.
pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdfpdflatex:
../../../../src/texk/web2c/pdftexdir/writefont.c:192:
lookup_fd_entry: Assertion `s != ((void *)0)' failed.
Abgebrochen (core dumped)


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=714&group_id=106

From noreply at sarovar.org  Thu Dec 14 00:49:48 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 14 Dec 2006 05:19:48 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-714 ] Inclusion of PDF1.7 reference
	fails with lookup_fd_entry: Assertion `s != ((void *)0)'
Message-ID: <E1GudrA-0005Za-00@sarovar.org>

Bugs item #714, was opened at 2006-12-14 00:49
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=714&group_id=106

Category: Fonts
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin Schr?der (oneiros)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Inclusion of PDF1.7 reference fails with lookup_fd_entry: Assertion `s != ((void *)0)'

Initial Comment:
The attached test (including the PDF 1.7 reference)
fails with
[...]
<use pdf17.pdf, page 22> <use pdf17.pdf, page 23> <use
pdf17.pdf, page 24> [1
<./pdf17.pdf{/home/ms/.texmf-var/fonts/map/pdftex/updmap/pdftex.map}>
<./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf>
<./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.
pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdfpdflatex:
../../../../src/texk/web2c/pdftexdir/writefont.c:192:
lookup_fd_entry: Assertion `s != ((void *)0)' failed.
Abgebrochen (core dumped)


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-12-14 00:49

Message:
Logged In: YES 
user_id=421

attached the log file

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=714&group_id=106

From noreply at sarovar.org  Thu Dec 14 00:51:12 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 14 Dec 2006 05:21:12 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-714 ] Inclusion of PDF1.7 reference
	fails with lookup_fd_entry: Assertion `s != ((void *)0)'
Message-ID: <E1GudsW-0006L9-00@sarovar.org>

Bugs item #714, was opened at 2006-12-14 00:49
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=714&group_id=106

Category: Fonts
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin Schr?der (oneiros)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Inclusion of PDF1.7 reference fails with lookup_fd_entry: Assertion `s != ((void *)0)'

Initial Comment:
The attached test (including the PDF 1.7 reference)
fails with
[...]
<use pdf17.pdf, page 22> <use pdf17.pdf, page 23> <use
pdf17.pdf, page 24> [1
<./pdf17.pdf{/home/ms/.texmf-var/fonts/map/pdftex/updmap/pdftex.map}>
<./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf>
<./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.
pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdfpdflatex:
../../../../src/texk/web2c/pdftexdir/writefont.c:192:
lookup_fd_entry: Assertion `s != ((void *)0)' failed.
Abgebrochen (core dumped)


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-12-14 00:51

Message:
Logged In: YES 
user_id=421

bt from core:
#0  0x00002af9ad264aa5 in raise () from /lib64/libc.so.6
#1  0x00002af9ad265e60 in abort () from /lib64/libc.so.6
#2  0x00002af9ad25e246 in __assert_fail () from /lib64/libc.so.6
#3  0x0000000000489f58 in lookup_fd_entry (s=0x0, slant=0,
extend=0)
    at ../../../../src/texk/web2c/pdftexdir/writefont.c:192
#4  0x00000000004a1fa3 in epdf_create_fontdescriptor
(fm=0xdbd410)
    at ../../../../src/texk/web2c/pdftexdir/epdf.c:40
#5  0x000000000049bce2 in copyFont (tag=0xa3e6b0 "T1_3",
fontRef=0x7ffffdae4ef0)
    at ../../../../src/texk/web2c/pdftexdir/pdftoepdf.cc:396
#6  0x000000000049c1a2 in copyFontResources (obj=0x7ffffdae5120)
    at ../../../../src/texk/web2c/pdftexdir/pdftoepdf.cc:426
#7  0x000000000049cfb2 in write_epdf () at
../../../../src/texk/web2c/pdftexdir/pdftoepdf.cc:928
#8  0x000000000049a767 in writeimage (img=14) at
../../../../src/texk/web2c/pdftexdir/writeimg.c:348
#9  0x000000000044a3b8 in zpdfwriteimage (n=15) at pdftex2.c:384
#10 0x0000000000451a57 in zpdfshipout (p=5967,
shippingpage=1) at pdftex2.c:2856
#11 0x00000000004532c6 in zshipout (p=5967) at pdftex2.c:3398
#12 0x000000000046a82f in zboxend (boxcontext=1073807360) at
pdftex2.c:11127
#13 0x000000000046adfe in zbeginbox (boxcontext=1073807360)
at pdftex2.c:11307
#14 0x000000000046ae3b in zscanbox (boxcontext=1073807360)
at pdftex2.c:11322
#15 0x00000000004789d9 in maincontrol () at pdftex3.c:5478
#16 0x0000000000416787 in mainbody () at pdftexini.c:5664
#17 0x000000000047ee9b in main (ac=2, av=0x7ffffdae54b8) at
pdftexextra.c:341

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-14 00:49

Message:
Logged In: YES 
user_id=421

attached the log file

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=714&group_id=106

From noreply at sarovar.org  Thu Dec 14 01:33:56 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 14 Dec 2006 06:03:56 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-714 ] Inclusion of PDF1.7 reference
	fails with lookup_fd_entry: Assertion `s != ((void *)0)'
Message-ID: <E1GueXs-0008QI-00@sarovar.org>

Bugs item #714, was opened at 2006-12-14 00:49
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=714&group_id=106

Category: Fonts
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin Schr?der (oneiros)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Inclusion of PDF1.7 reference fails with lookup_fd_entry: Assertion `s != ((void *)0)'

Initial Comment:
The attached test (including the PDF 1.7 reference)
fails with
[...]
<use pdf17.pdf, page 22> <use pdf17.pdf, page 23> <use
pdf17.pdf, page 24> [1
<./pdf17.pdf{/home/ms/.texmf-var/fonts/map/pdftex/updmap/pdftex.map}>
<./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf>
<./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.
pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdfpdflatex:
../../../../src/texk/web2c/pdftexdir/writefont.c:192:
lookup_fd_entry: Assertion `s != ((void *)0)' failed.
Abgebrochen (core dumped)


----------------------------------------------------------------------

>Comment By: Martin Schr?der (oneiros)
Date: 2006-12-14 01:33

Message:
Logged In: YES 
user_id=421

Since this doesn't happen with \pdfmapline{}, I've attached
the pdftex.map used.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-14 00:51

Message:
Logged In: YES 
user_id=421

bt from core:
#0  0x00002af9ad264aa5 in raise () from /lib64/libc.so.6
#1  0x00002af9ad265e60 in abort () from /lib64/libc.so.6
#2  0x00002af9ad25e246 in __assert_fail () from /lib64/libc.so.6
#3  0x0000000000489f58 in lookup_fd_entry (s=0x0, slant=0,
extend=0)
    at ../../../../src/texk/web2c/pdftexdir/writefont.c:192
#4  0x00000000004a1fa3 in epdf_create_fontdescriptor
(fm=0xdbd410)
    at ../../../../src/texk/web2c/pdftexdir/epdf.c:40
#5  0x000000000049bce2 in copyFont (tag=0xa3e6b0 "T1_3",
fontRef=0x7ffffdae4ef0)
    at ../../../../src/texk/web2c/pdftexdir/pdftoepdf.cc:396
#6  0x000000000049c1a2 in copyFontResources (obj=0x7ffffdae5120)
    at ../../../../src/texk/web2c/pdftexdir/pdftoepdf.cc:426
#7  0x000000000049cfb2 in write_epdf () at
../../../../src/texk/web2c/pdftexdir/pdftoepdf.cc:928
#8  0x000000000049a767 in writeimage (img=14) at
../../../../src/texk/web2c/pdftexdir/writeimg.c:348
#9  0x000000000044a3b8 in zpdfwriteimage (n=15) at pdftex2.c:384
#10 0x0000000000451a57 in zpdfshipout (p=5967,
shippingpage=1) at pdftex2.c:2856
#11 0x00000000004532c6 in zshipout (p=5967) at pdftex2.c:3398
#12 0x000000000046a82f in zboxend (boxcontext=1073807360) at
pdftex2.c:11127
#13 0x000000000046adfe in zbeginbox (boxcontext=1073807360)
at pdftex2.c:11307
#14 0x000000000046ae3b in zscanbox (boxcontext=1073807360)
at pdftex2.c:11322
#15 0x00000000004789d9 in maincontrol () at pdftex3.c:5478
#16 0x0000000000416787 in mainbody () at pdftexini.c:5664
#17 0x000000000047ee9b in main (ac=2, av=0x7ffffdae54b8) at
pdftexextra.c:341

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-14 00:49

Message:
Logged In: YES 
user_id=421

attached the log file

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=714&group_id=106

From noreply at sarovar.org  Thu Dec 14 02:14:57 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 14 Dec 2006 06:44:57 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-714 ] Inclusion of PDF1.7 reference
	fails with lookup_fd_entry: Assertion `s != ((void *)0)'
Message-ID: <E1GufBZ-0000Gx-00@sarovar.org>

Bugs item #714, was opened at 2006-12-14 00:49
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=714&group_id=106

Category: Fonts
Group: v1.40.0
Status: Open
Resolution: None
Priority: 5
Submitted By: Martin Schr?der (oneiros)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Inclusion of PDF1.7 reference fails with lookup_fd_entry: Assertion `s != ((void *)0)'

Initial Comment:
The attached test (including the PDF 1.7 reference)
fails with
[...]
<use pdf17.pdf, page 22> <use pdf17.pdf, page 23> <use
pdf17.pdf, page 24> [1
<./pdf17.pdf{/home/ms/.texmf-var/fonts/map/pdftex/updmap/pdftex.map}>
<./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf>
<./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.
pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdfpdflatex:
../../../../src/texk/web2c/pdftexdir/writefont.c:192:
lookup_fd_entry: Assertion `s != ((void *)0)' failed.
Abgebrochen (core dumped)


----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2006-12-14 02:14

Message:
Logged In: YES 
user_id=929

it happened with the map line "rpsyr Symbol" containing one
of the 14 standard font names, but no font file name. These
map lines are useful for typesetting, but not for font
replacement. Still this was tried, as a check for missing
font file was missing. The patch should repair this.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-14 01:33

Message:
Logged In: YES 
user_id=421

Since this doesn't happen with \pdfmapline{}, I've attached
the pdftex.map used.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-14 00:51

Message:
Logged In: YES 
user_id=421

bt from core:
#0  0x00002af9ad264aa5 in raise () from /lib64/libc.so.6
#1  0x00002af9ad265e60 in abort () from /lib64/libc.so.6
#2  0x00002af9ad25e246 in __assert_fail () from /lib64/libc.so.6
#3  0x0000000000489f58 in lookup_fd_entry (s=0x0, slant=0,
extend=0)
    at ../../../../src/texk/web2c/pdftexdir/writefont.c:192
#4  0x00000000004a1fa3 in epdf_create_fontdescriptor
(fm=0xdbd410)
    at ../../../../src/texk/web2c/pdftexdir/epdf.c:40
#5  0x000000000049bce2 in copyFont (tag=0xa3e6b0 "T1_3",
fontRef=0x7ffffdae4ef0)
    at ../../../../src/texk/web2c/pdftexdir/pdftoepdf.cc:396
#6  0x000000000049c1a2 in copyFontResources (obj=0x7ffffdae5120)
    at ../../../../src/texk/web2c/pdftexdir/pdftoepdf.cc:426
#7  0x000000000049cfb2 in write_epdf () at
../../../../src/texk/web2c/pdftexdir/pdftoepdf.cc:928
#8  0x000000000049a767 in writeimage (img=14) at
../../../../src/texk/web2c/pdftexdir/writeimg.c:348
#9  0x000000000044a3b8 in zpdfwriteimage (n=15) at pdftex2.c:384
#10 0x0000000000451a57 in zpdfshipout (p=5967,
shippingpage=1) at pdftex2.c:2856
#11 0x00000000004532c6 in zshipout (p=5967) at pdftex2.c:3398
#12 0x000000000046a82f in zboxend (boxcontext=1073807360) at
pdftex2.c:11127
#13 0x000000000046adfe in zbeginbox (boxcontext=1073807360)
at pdftex2.c:11307
#14 0x000000000046ae3b in zscanbox (boxcontext=1073807360)
at pdftex2.c:11322
#15 0x00000000004789d9 in maincontrol () at pdftex3.c:5478
#16 0x0000000000416787 in mainbody () at pdftexini.c:5664
#17 0x000000000047ee9b in main (ac=2, av=0x7ffffdae54b8) at
pdftexextra.c:341

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-14 00:49

Message:
Logged In: YES 
user_id=421

attached the log file

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=714&group_id=106

From noreply at sarovar.org  Thu Dec 14 02:21:38 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 14 Dec 2006 06:51:38 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-714 ] Inclusion of PDF1.7 reference
	fails with lookup_fd_entry: Assertion `s != ((void *)0)'
Message-ID: <E1GufI2-00072H-00@sarovar.org>

Bugs item #714, was opened at 2006-12-14 00:49
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=714&group_id=106

Category: Fonts
Group: v1.40.0
>Status: Closed
>Resolution: Fixed
Priority: 5
Submitted By: Martin Schr?der (oneiros)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Inclusion of PDF1.7 reference fails with lookup_fd_entry: Assertion `s != ((void *)0)'

Initial Comment:
The attached test (including the PDF 1.7 reference)
fails with
[...]
<use pdf17.pdf, page 22> <use pdf17.pdf, page 23> <use
pdf17.pdf, page 24> [1
<./pdf17.pdf{/home/ms/.texmf-var/fonts/map/pdftex/updmap/pdftex.map}>
<./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf>
<./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.
pdf> <./pdf17.pdf> <./pdf17.pdf> <./pdf17.pdfpdflatex:
../../../../src/texk/web2c/pdftexdir/writefont.c:192:
lookup_fd_entry: Assertion `s != ((void *)0)' failed.
Abgebrochen (core dumped)


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-14 02:21

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-12-14 02:14

Message:
Logged In: YES 
user_id=929

it happened with the map line "rpsyr Symbol" containing one
of the 14 standard font names, but no font file name. These
map lines are useful for typesetting, but not for font
replacement. Still this was tried, as a check for missing
font file was missing. The patch should repair this.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-14 01:33

Message:
Logged In: YES 
user_id=421

Since this doesn't happen with \pdfmapline{}, I've attached
the pdftex.map used.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-14 00:51

Message:
Logged In: YES 
user_id=421

bt from core:
#0  0x00002af9ad264aa5 in raise () from /lib64/libc.so.6
#1  0x00002af9ad265e60 in abort () from /lib64/libc.so.6
#2  0x00002af9ad25e246 in __assert_fail () from /lib64/libc.so.6
#3  0x0000000000489f58 in lookup_fd_entry (s=0x0, slant=0,
extend=0)
    at ../../../../src/texk/web2c/pdftexdir/writefont.c:192
#4  0x00000000004a1fa3 in epdf_create_fontdescriptor
(fm=0xdbd410)
    at ../../../../src/texk/web2c/pdftexdir/epdf.c:40
#5  0x000000000049bce2 in copyFont (tag=0xa3e6b0 "T1_3",
fontRef=0x7ffffdae4ef0)
    at ../../../../src/texk/web2c/pdftexdir/pdftoepdf.cc:396
#6  0x000000000049c1a2 in copyFontResources (obj=0x7ffffdae5120)
    at ../../../../src/texk/web2c/pdftexdir/pdftoepdf.cc:426
#7  0x000000000049cfb2 in write_epdf () at
../../../../src/texk/web2c/pdftexdir/pdftoepdf.cc:928
#8  0x000000000049a767 in writeimage (img=14) at
../../../../src/texk/web2c/pdftexdir/writeimg.c:348
#9  0x000000000044a3b8 in zpdfwriteimage (n=15) at pdftex2.c:384
#10 0x0000000000451a57 in zpdfshipout (p=5967,
shippingpage=1) at pdftex2.c:2856
#11 0x00000000004532c6 in zshipout (p=5967) at pdftex2.c:3398
#12 0x000000000046a82f in zboxend (boxcontext=1073807360) at
pdftex2.c:11127
#13 0x000000000046adfe in zbeginbox (boxcontext=1073807360)
at pdftex2.c:11307
#14 0x000000000046ae3b in zscanbox (boxcontext=1073807360)
at pdftex2.c:11322
#15 0x00000000004789d9 in maincontrol () at pdftex3.c:5478
#16 0x0000000000416787 in mainbody () at pdftexini.c:5664
#17 0x000000000047ee9b in main (ac=2, av=0x7ffffdae54b8) at
pdftexextra.c:341

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-14 00:49

Message:
Logged In: YES 
user_id=421

attached the log file

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=714&group_id=106

From taco at elvenkind.com  Mon Dec 18 17:27:25 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 18 Dec 2006 17:27:25 +0100
Subject: [NTG-pdftex] suspicious line in vfpacket.c
Message-ID: <4586C16D.3040204@elvenkind.com>

Hi guys,

This function looks odd to me. My guess is that the
second fontec should be fontbc.

Best, Taco


void vf_free(void)
{
     vf_entry *v;
     int n;
     char **p;
     if (vf_array != NULL) {
         for (v = vf_array; v < vf_ptr; v++) {
             xfree(v->len);
             n = fontec[v->font] - fontec[v->font] + 1;
             for (p = v->data; p - v->data < n; p++)
                 xfree(*p);
             xfree(v->data);
         }
         xfree(vf_array);
     }
     xfree(packet_array);
}

From hanthethanh at gmail.com  Mon Dec 18 19:27:31 2006
From: hanthethanh at gmail.com (Thanh Han The)
Date: Mon, 18 Dec 2006 19:27:31 +0100
Subject: [NTG-pdftex] suspicious line in vfpacket.c
Message-ID: <74f506dc0612181027t33530c9bpb707c3ec75438f0f@mail.gmail.com>

yes indeed. Thanks for pointing it out.

Thanh

On Mon, Dec 18, 2006 at 05:27:25PM +0100, Taco Hoekwater wrote:
> Hi guys,
>
> This function looks odd to me. My guess is that the
> second fontec should be fontbc.
>
> Best, Taco
>
>
> void vf_free(void)
> {
>      vf_entry *v;
>      int n;
>      char **p;
>      if (vf_array != NULL) {
>          for (v = vf_array; v < vf_ptr; v++) {
>              xfree(v->len);
>              n = fontec[v->font] - fontec[v->font] + 1;
>              for (p = v->data; p - v->data < n; p++)
>                  xfree(*p);
>              xfree(v->data);
>          }
>          xfree(vf_array);
>      }
>      xfree(packet_array);
> }
> _______________________________________________
> ntg-pdftex mailing list
> ntg-pdftex at ntg.nl
> http://www.ntg.nl/mailman/listinfo/ntg-pdftex

From noreply at sarovar.org  Wed Dec 20 16:26:16 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 20 Dec 2006 20:56:16 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-304 ] Names of expanded fonts not in log
	output
Message-ID: <E1Gx3Ki-0005k0-00@sarovar.org>

Bugs item #304, was opened at 2005-03-02 18:25
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=304&group_id=106

Category: Fonts
Group: v1.21a
Status: Open
>Resolution: Fixed
Priority: 3
Submitted By: Robert (schlcht)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Names of expanded fonts not in log output

Initial Comment:
When using font expansion, the log output will not
contain the names of the expanded fonts but the null
character instead (resp. ^^@).

%-------------------------------------
\pdfadjustspacing=2
\pdffontexpand\font 20 20 5 autoexpand
\tracingoutput=1
test

\parfillskip 0pt
test
\bye
%-------------------------------------

Regards,
Robert.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-20 16:26

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-11-15 02:23

Message:
Logged In: YES 
user_id=2217

problem with autoexpanding now at bugs/696

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-10-23 12:23

Message:
Logged In: YES 
user_id=710

Here is an attempt to fix this problem (reversed patch
attached).

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-09-03 19:30

Message:
Logged In: YES 
user_id=2217

I've attached an example using Kepler MM (tfm+pfb included,
please delete after testing).

MM fonts are probably the only case where one would not want
to use the autoexpand feature.

At first sight, saying "autoexpand" or not doesn't seem to
make a difference, since pdftex will always prefer existing
expanded fonts (pfb) over autoexpanding them, anyway.
However, there are some slight differences in the pdf. This
is probably because the provided tfm file is different from
the metrics that pdf calculates itself in the case of
autoexpand. That is, autoexpand may result in a mismatch
between the provided pfb and the calculated tfm, is that
correct?


----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-09-01 21:02

Message:
Logged In: YES 
user_id=929

currently i even can't get a test file do expansion at all
without "autoexpand". E. g. Robert's example above, without
"autoexpand", doesn't use expanded fonts. Maybe that's the
reason for the missing expand parameter in the log? Can
anybody provide a test file for this case?

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-09-01 12:47

Message:
Logged In: YES 
user_id=421

Is this really a problem, i.e. is there a reason _not_ to
use the autoexpand feature in new documents?

Hartmut, did you look into this bug?

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2005-10-16 00:24

Message:
Logged In: YES 
user_id=2217

If the font is not autoexpand'ed, its name will still not be
written to the log file.

(pdftex 1.30.3; same test file, without "autoexpand")

Regards,
Robert.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-05-12 17:05

Message:
Logged In: YES 
user_id=421

This has been fixed in 1.30.0

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-30 22:16

Message:
Logged In: YES 
user_id=929

This patch is based of Thanh's change file showfont.ch,
which he gave me during EuroTeX2005 (it's also included,
renamed here to showfont-thanh.ch). Use showfont.ch for the
patch.

There is now a new integer variable \pdftracingfonts. It is
zero by default, then we get a log like this (see
robert050302.log):

...\tenrm t

...\tenrm (+20) e

Without font expansion, this default should be compatible
with TeX's original log output.

If \pdftracingfonts is set to 1 (or greater), we get a more
verbose log (see tst-304.log):

...\xivtt (cmtt10 at 14.0pt) t

.\xivtt (cmtt10+20 at 14.0pt) e

Seems to work with change file showfont.ch coming directly
after after hz.ch.

Patch only roughly tested with pdfetex, likely to give
problems with pdfxtex, as the variable numbering might
differ. Log format to be agreed upon...

Regards, Hartmut


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=304&group_id=106

From noreply at sarovar.org  Wed Dec 20 16:26:33 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 20 Dec 2006 20:56:33 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-696 ] pdftex always autoexpands -- even
	if it shouldn't
Message-ID: <E1Gx3Kz-0006LO-00@sarovar.org>

Bugs item #696, was opened at 2006-11-15 02:22
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=696&group_id=106

Category: hz
Group: v1.40.0
Status: Open
>Resolution: Fixed
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: pdftex always autoexpands -- even if it shouldn't

Initial Comment:
pdftex is now a bit too keen on autoexpanding -- it
does so, even if `autoexpand' is not specified.
Although the pre-created metrics are read, the physical
font (pfb resp. pk) is ignored. As has been discussed
re: bugs/304, *not* using autoexpansion gives better
results for MM (and MF) fonts, since the fonts are not
stretched blindly but stroke widths are adjusted etc.

I've moved the test file from bugs/304 here. Another
example is (with an existing file cmr10+100.mf):

\pdfadjustspacing2
\pdfmapline{ cmr10}
\pdfmapline{+cmr10+100}
\font\cmr =cmr10 \cmr
\pdffontexpand\cmr 100 0 100 %autoexpand
Hamburgefonts\par
\parfillskip 0pt
Hamburgefonts
\bye

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-20 16:26

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=696&group_id=106

From noreply at sarovar.org  Wed Dec 20 16:27:12 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 20 Dec 2006 20:57:12 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-462 ] HZ font expansion by text
	matrix manipulation
Message-ID: <E1Gx3Lc-0007pv-00@sarovar.org>

Patches item #462, was opened at 2005-12-23 23:35
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=462&group_id=106

Category: Positioning
Group: v1.40.0
>Status: Closed
>Resolution: Accepted
Priority: 5
Submitted By: Hartmut Henkel (hhenkel)
Assigned to: The Thanh Han (hanthethanh)
Summary: HZ font expansion by text matrix manipulation

Initial Comment:
Use textmatrix Tm instead of /FontMatrix for font
expansion. Then a font file will be embedded only once
for all expansion factors. Gives smaller PDF files.
Works then also for non-embedded fonts. TrueType not
tried yet. Rough patch only, incomplete, work in
progress, no warranty, not for production.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-01 11:26

Message:
Logged In: YES 
user_id=421

We've removed it from beta again; it introduces additional
problems and needs more time to stabilize.

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-09-30 16:22

Message:
Logged In: YES 
user_id=2217

It's great to have this included!

However, pdftex is now a bit too keen on autoexpanding -- it
does so, even if `autoexpand' is not specified. Although the
pre-created metrics are read, the physical font (pfb resp.
pk) is ignored. As has been discussed re: bug 304, *not*
using autoexpansion gives better results for MM (and MF)
fonts, since the fonts are not stretched blindly but stroke
widths are adjusted etc.

Compare the output of the test file from bugs/304 compiled
with an old pdftex and with 20060928. With the latter, the
strokes are slightly heavier. Same here (with an existing
file cmr10+100.mf):

\pdfadjustspacing2
\pdfmapline{ cmr10}
\pdfmapline{+cmr10+100}
\font\cmr =cmr10 \cmr
\pdffontexpand\cmr 100 0 100 %autoexpand
Hamburgefonts\par
\parfillskip 0pt
Hamburgefonts
\bye


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-02-13 19:41

Message:
Logged In: YES 
user_id=421

The last word from Hartmut was that it's not ready yet and
he'd be working on an improved version.

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-02-13 19:05

Message:
Logged In: YES 
user_id=2217

Will this make it into 1.40? I would love to see it included.

I've tested it a bit and did not find any problems (I'm also
using it for the pre-built microtype documentation on CTAN). 

Regards,
Robert

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=462&group_id=106

From noreply at sarovar.org  Wed Dec 20 16:27:50 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 20 Dec 2006 20:57:50 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-705 ] Patch to allow vf_nf grow
	dynamically
Message-ID: <E1Gx3ME-00006v-00@sarovar.org>

Patches item #705, was opened at 2006-11-22 20:52
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=705&group_id=106

Category: Fonts
Group: v1.40.0
>Status: Closed
Resolution: Accepted
Priority: 5
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Patch to allow vf_nf grow dynamically

Initial Comment:
This patch allows the array vf_e_fnts and vf_i_fnts
grow dynamically, instead of having fixed size font_max
as currently.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-11-26 21:01

Message:
Logged In: YES 
user_id=421

This has been included in version 1.40

----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2006-11-25 10:58

Message:
Logged In: NO 

Hi!

It's been applied on Debian/unstable, and it works!
Top notch!

Thanks


Danai SAE-HAN

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-11-23 08:18

Message:
Logged In: YES 
user_id=710

yes. this patch also contains a fix by Akira the segfault
bug (one line added) and a fix for bug #692 (another line).
It's not hard to fix bug #694 and #696 too. However I didn't
mention them, as I am considering to remove the relevant code.

----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2006-11-23 02:26

Message:
Logged In: NO 

Hi!

Does this mean that the bug "SGML output fails with
pdflatex" will also be solved?

Cheers


Danai SAE-HAN

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=705&group_id=106

From noreply at sarovar.org  Wed Dec 20 16:27:55 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 20 Dec 2006 20:57:55 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-709 ] merging  patch 597 by Hartmut
Message-ID: <E1Gx3MJ-0000Dy-00@sarovar.org>

Patches item #709, was opened at 2006-12-04 09:21
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

Category: Fonts
Group: v1.40.0
>Status: Closed
Resolution: None
Priority: 6
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Hartmut Henkel (hhenkel)
Summary: merging  patch 597 by Hartmut

Initial Comment:
This is a patch against pdftex-1.40.0-beta-20061018
that merges patch 597 by Hartmut and does some clean up
in the font mechanism. Testing welcome very much.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-06 18:05

Message:
Logged In: YES 
user_id=710

patch updated to fix a bug with pdf inclusion.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-05 23:52

Message:
Logged In: YES 
user_id=710

patch updated; tested with pdftex manual, microtype manual
and base latex doc. A fix for bug #693 is included.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 14:38

Message:
Logged In: YES 
user_id=710

ah, sorry, my mistake. It's against
pdftex-1.40.0-beta-20061108 (the latest beta), not
pdftex-1.40.0-beta-20061018

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 14:25

Message:
Logged In: YES 
user_id=710

are you saying that you have troubles applying the patch
against pdftex-1.40.0-beta-20061017? Can you please try to
apply against pdftex-1.40.0-beta-20061018? I have checked
everything again from the beginning as follows:

- download and unpack
http://sarovar.org/download.php/1100/pdftex-1.40.0-beta-20061017.tar.bz2

- download, ungzip and apply
http://sarovar.org/download.php/1108/pdftex-1.40.0-beta-20061017-20061108.diff.gz

- download
http://sarovar.org/tracker/download.php/106/495/709/237/pdftex-20061204-2.patch

- cd /path/to/pdftex-1.40.0-beta-20061017/src

- patch -p1 --dry-run /path/to/pdftex-20061204-2.patch

The patch applied ok, apart from change-files.txt (I removed
it from pdftexdir, as it's no longer relevant to pdftex).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-04 13:33

Message:
Logged In: YES 
user_id=421

I'm having troubles applying pdftex-20061204-2.patch against
pdftex-1.40.0-beta-20061017, especially pdftex.web. Can you
attach a diff against 1.40.0-beta-20061108 or your patched
pdftex.web?

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 12:02

Message:
Logged In: YES 
user_id=710

I updated the patch to revert auto kerns to be explicit.
This will disable hyphenation if auto kern is used. On the
other hand this is much more robust. 

The pending problems are:

bug #693: still trying
bug #484: will not be fixed, better treat it as a limitation
bug #465: unlikely to be fixed


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

From noreply at sarovar.org  Wed Dec 20 16:28:10 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 20 Dec 2006 20:58:10 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-709 ] merging  patch 597 by Hartmut
Message-ID: <E1Gx3MY-0000V6-00@sarovar.org>

Patches item #709, was opened at 2006-12-04 09:21
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

Category: Fonts
Group: v1.40.0
Status: Closed
>Resolution: Accepted
Priority: 6
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Hartmut Henkel (hhenkel)
Summary: merging  patch 597 by Hartmut

Initial Comment:
This is a patch against pdftex-1.40.0-beta-20061018
that merges patch 597 by Hartmut and does some clean up
in the font mechanism. Testing welcome very much.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-06 18:05

Message:
Logged In: YES 
user_id=710

patch updated to fix a bug with pdf inclusion.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-05 23:52

Message:
Logged In: YES 
user_id=710

patch updated; tested with pdftex manual, microtype manual
and base latex doc. A fix for bug #693 is included.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 14:38

Message:
Logged In: YES 
user_id=710

ah, sorry, my mistake. It's against
pdftex-1.40.0-beta-20061108 (the latest beta), not
pdftex-1.40.0-beta-20061018

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 14:25

Message:
Logged In: YES 
user_id=710

are you saying that you have troubles applying the patch
against pdftex-1.40.0-beta-20061017? Can you please try to
apply against pdftex-1.40.0-beta-20061018? I have checked
everything again from the beginning as follows:

- download and unpack
http://sarovar.org/download.php/1100/pdftex-1.40.0-beta-20061017.tar.bz2

- download, ungzip and apply
http://sarovar.org/download.php/1108/pdftex-1.40.0-beta-20061017-20061108.diff.gz

- download
http://sarovar.org/tracker/download.php/106/495/709/237/pdftex-20061204-2.patch

- cd /path/to/pdftex-1.40.0-beta-20061017/src

- patch -p1 --dry-run /path/to/pdftex-20061204-2.patch

The patch applied ok, apart from change-files.txt (I removed
it from pdftexdir, as it's no longer relevant to pdftex).

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-04 13:33

Message:
Logged In: YES 
user_id=421

I'm having troubles applying pdftex-20061204-2.patch against
pdftex-1.40.0-beta-20061017, especially pdftex.web. Can you
attach a diff against 1.40.0-beta-20061108 or your patched
pdftex.web?

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-04 12:02

Message:
Logged In: YES 
user_id=710

I updated the patch to revert auto kerns to be explicit.
This will disable hyphenation if auto kern is used. On the
other hand this is much more robust. 

The pending problems are:

bug #693: still trying
bug #484: will not be fixed, better treat it as a limitation
bug #465: unlikely to be fixed


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=709&group_id=106

From noreply at sarovar.org  Wed Dec 20 16:28:45 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 20 Dec 2006 20:58:45 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-696 ] pdftex always autoexpands -- even
	if it shouldn't
Message-ID: <E1Gx3N7-0001R9-00@sarovar.org>

Bugs item #696, was opened at 2006-11-15 02:22
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=696&group_id=106

Category: hz
Group: v1.40.0
>Status: Closed
Resolution: Fixed
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: pdftex always autoexpands -- even if it shouldn't

Initial Comment:
pdftex is now a bit too keen on autoexpanding -- it
does so, even if `autoexpand' is not specified.
Although the pre-created metrics are read, the physical
font (pfb resp. pk) is ignored. As has been discussed
re: bugs/304, *not* using autoexpansion gives better
results for MM (and MF) fonts, since the fonts are not
stretched blindly but stroke widths are adjusted etc.

I've moved the test file from bugs/304 here. Another
example is (with an existing file cmr10+100.mf):

\pdfadjustspacing2
\pdfmapline{ cmr10}
\pdfmapline{+cmr10+100}
\font\cmr =cmr10 \cmr
\pdffontexpand\cmr 100 0 100 %autoexpand
Hamburgefonts\par
\parfillskip 0pt
Hamburgefonts
\bye

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-20 16:26

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=696&group_id=106

From noreply at sarovar.org  Wed Dec 20 16:28:27 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 20 Dec 2006 20:58:27 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-304 ] Names of expanded fonts not in log
	output
Message-ID: <E1Gx3Mp-0000rY-00@sarovar.org>

Bugs item #304, was opened at 2005-03-02 18:25
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=304&group_id=106

Category: Fonts
Group: v1.21a
>Status: Closed
Resolution: Fixed
Priority: 3
Submitted By: Robert (schlcht)
Assigned to: Hartmut Henkel (hhenkel)
Summary: Names of expanded fonts not in log output

Initial Comment:
When using font expansion, the log output will not
contain the names of the expanded fonts but the null
character instead (resp. ^^@).

%-------------------------------------
\pdfadjustspacing=2
\pdffontexpand\font 20 20 5 autoexpand
\tracingoutput=1
test

\parfillskip 0pt
test
\bye
%-------------------------------------

Regards,
Robert.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-20 16:26

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-11-15 02:23

Message:
Logged In: YES 
user_id=2217

problem with autoexpanding now at bugs/696

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-10-23 12:23

Message:
Logged In: YES 
user_id=710

Here is an attempt to fix this problem (reversed patch
attached).

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-09-03 19:30

Message:
Logged In: YES 
user_id=2217

I've attached an example using Kepler MM (tfm+pfb included,
please delete after testing).

MM fonts are probably the only case where one would not want
to use the autoexpand feature.

At first sight, saying "autoexpand" or not doesn't seem to
make a difference, since pdftex will always prefer existing
expanded fonts (pfb) over autoexpanding them, anyway.
However, there are some slight differences in the pdf. This
is probably because the provided tfm file is different from
the metrics that pdf calculates itself in the case of
autoexpand. That is, autoexpand may result in a mismatch
between the provided pfb and the calculated tfm, is that
correct?


----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-09-01 21:02

Message:
Logged In: YES 
user_id=929

currently i even can't get a test file do expansion at all
without "autoexpand". E. g. Robert's example above, without
"autoexpand", doesn't use expanded fonts. Maybe that's the
reason for the missing expand parameter in the log? Can
anybody provide a test file for this case?

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-09-01 12:47

Message:
Logged In: YES 
user_id=421

Is this really a problem, i.e. is there a reason _not_ to
use the autoexpand feature in new documents?

Hartmut, did you look into this bug?

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2005-10-16 00:24

Message:
Logged In: YES 
user_id=2217

If the font is not autoexpand'ed, its name will still not be
written to the log file.

(pdftex 1.30.3; same test file, without "autoexpand")

Regards,
Robert.

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2005-05-12 17:05

Message:
Logged In: YES 
user_id=421

This has been fixed in 1.30.0

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2005-03-30 22:16

Message:
Logged In: YES 
user_id=929

This patch is based of Thanh's change file showfont.ch,
which he gave me during EuroTeX2005 (it's also included,
renamed here to showfont-thanh.ch). Use showfont.ch for the
patch.

There is now a new integer variable \pdftracingfonts. It is
zero by default, then we get a log like this (see
robert050302.log):

...\tenrm t

...\tenrm (+20) e

Without font expansion, this default should be compatible
with TeX's original log output.

If \pdftracingfonts is set to 1 (or greater), we get a more
verbose log (see tst-304.log):

...\xivtt (cmtt10 at 14.0pt) t

.\xivtt (cmtt10+20 at 14.0pt) e

Seems to work with change file showfont.ch coming directly
after after hz.ch.

Patch only roughly tested with pdfetex, likely to give
problems with pdfxtex, as the variable numbering might
differ. Log format to be agreed upon...

Regards, Hartmut


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=304&group_id=106

From martin at oneiros.de  Wed Dec 20 16:52:05 2006
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 20 Dec 2006 16:52:05 +0100
Subject: [NTG-pdftex] 1.40-rc3
Message-ID: <68c491a60612200752s75f3e7cbp4970493bff72e62d@mail.gmail.com>

http://sarovar.org/download.php/1129/pdftex-1.40.0-rc3.tar.bz2
http://sarovar.org/download.php/1130/pdftex-1.40.0-rc2-rc3.diff.gz

We are getting nearer...

-----------------------------------------------------
pdfTeX 3.141592-1.40.0-rc3 was released on 2006-12-20
-----------------------------------------------------
- changes from rc2:
  - map file handling:
   - in usual cases the behaviour is the same like in previous version. So if a
     font file is given with '<' or '<<', things should work without problems.
   - changes in odd cases:
     - no font file --> no font descriptor
     - font file given but not included --> will be treated like font file
       missing + a warning
   - minimize the distinction between standard fonts and other type1 fonts: the
     *only* place this makes a difference is that if a font file is missing
     (and the font is used), a warning will be generated for normal fonts but
     not for standard fonts

From noreply at sarovar.org  Wed Dec 20 16:27:31 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Wed, 20 Dec 2006 20:57:31 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-580 ] Patch to make ToUnicode for
	Type1 fonts
Message-ID: <E1Gx3Lv-00082x-00@sarovar.org>

Patches item #580, was opened at 2006-07-14 22:57
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=580&group_id=106

Category: None
Group: v1.40.0
>Status: Closed
Resolution: Accepted
Priority: 5
Submitted By: The Thanh Han (hanthethanh)
Assigned to: Nobody (None)
Summary: Patch to make ToUnicode for Type1 fonts

Initial Comment:
This is a patch to pdftex so that it can create
ToUnicode entries for Type1
fonts. The main purpose is to make ligatures and some
other glyphs like
smallcap letters or oldstyle digits from OpenType fonts
searchable. This
patch also contains a minor fix that allows use of
fonts without embedding,
for example MinionPro or MyriadPro (which are
distributed with Acrobat
Reader >= 7.0 but from their use is restricted with
Acrobat Reader only).

How to apply:
~~~~~~~~~~~~~
- this patch applies to the pristine
pdftex-1.40.0-beta-20060213 sources
  only; if you have applied another patch(es) to the
sources, please
  discard them and start from the fresh ones.

- how to apply:

,--------
| cd /path/to/pdftex-1.40.0-beta-20060213/src
| cat /path/to/the/patch | patch -p1
| ./configure
| cd texk/web2c
| make pdfetex
`--------

If you want to be careful, try the patch with the
option '--dry-run' first to
see whether the patch can be applied without problems.


Usage:
~~~~~~
add the following lines into your document, somewhere
at the beginning:

,--------
| \input glyphtounicode.tex
| \pdfgentounicode=1
`--------

Customization:
~~~~~~~~~~~~~
If pdftex cannot generate the right ToUnicode value for
some glyphs
(probably because the glyph name is not ``known'' to
pdftex), it's possible
to add further entries so pdftex can learn how to
generate unicode for such
``unknown'' glyphs.

The syntax is simple:

\pdfglyphtounicode{<glyph-name>}{<unicode-value>}

Example:

\pdfglyphtounicode{A}{0041}

says that glyph 'A' has its unicode U+0041

The entries in glyphtounicode.tex cover Adobe Glyph
List (glyphlist.txt
version 2.0) and some addtional glyphs
(texglyphlist.txt version 2.33,
coming from from lcdf-typetools), plus some additional
entries for
ligatures.

If some glyph name cannot be found, pdftex does some
simple name
translations:

- remove any ".xxx" suffix from glyph name, where "xxx"
is a string
  consisting of alphabetic characters. For example
"A.sc" => "A"

- remove suffix like "small", "oldstyle", "inferior"
and "superior" from
  glyph name. For example "Asmall" => "A"

The result name then is looked up again to find a unicode.

Ligatures require a special form of ToUnicode. Example:

\pdfglyphtounicode{ff}{00660066}

here '0066' is the unicode string for 'f'. Some
ligatures have their name
like 'f_f_i', in such case the command should be

\pdfglyphtounicode{f_f_i}{006600660069}

ie '_' is removed from the glyph name, and then all
letters are translated
to their unicode string.


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-10-17 15:39

Message:
Logged In: YES 
user_id=421

This has been included in version 1.40

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-10-07 11:44

Message:
Logged In: YES 
user_id=710

Patch updated to fix a bug reported by Akira.

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-10-06 13:34

Message:
Logged In: YES 
user_id=710

This is a patch to pdftex that includes:
  - a fix for bug #611
  - some changes to ToUnicode support (patch #580) to make the
    implementation follow guidelines at
   
http://partners.adobe.com/public/developer/opentype/index_glyph.html


How to apply:
~~~~~~~~~~~~~
- this patch applies to the pristine
pdftex-1.40.0-beta-20060928 sources
  only; if you have applied another patch(es) to the
sources, please
  discard them and start from the fresh ones.

- how to apply:

,--------
| cd /path/to/pdftex-1.40.0-beta-20060928/src
| cat /path/to/the/patch | patch -p1
| ./configure
| cd texk/web2c
| make pdftex
`--------

If you want to be careful, try the patch with the option
'--dry-run' first to
see whether the patch can be applied without problems.


Usage:
~~~~~~
add the following lines into your document, somewhere at the
beginning:

,--------
| \input glyphtounicode.tex
| \pdfgentounicode=1
`--------

Customization:
~~~~~~~~~~~~~
If pdftex cannot generate the right ToUnicode value for some
glyphs
(probably because the glyph name is not ``known'' to
pdftex), it's possible
to add further entries so pdftex can learn how to generate
unicode for such
``unknown'' glyphs.

The syntax is simple:

,--------
| \pdfglyphtounicode{<glyph-name>}{<unicode-value>}
`--------

Example:

,--------
| \pdfglyphtounicode{A}{0041}
`--------

says that glyph 'A' has its unicode U+0041. 

\pdfglyphtounicode requires that the second parameter
consists of uppercase
hexadecimal digits (0..9, A..F) and spaces. If this is not
the case the
entry is simply discarded (with a warning). Later entries
overwrite
previous entries with the same name (1st arg).

The entries in glyphtounicode.tex cover:
  - glyphlist.txt       (Adobe Glyph List v2.0)
  - zapfdingbats.txt    (ITC Zapf Dingbats Glyph List v2.0)
  - texglyphlist.txt    (lcdf-typetools texglyphlist.txt v2.33)
  - additional.tex      (additional entries)

Ligatures require a special form of ToUnicode. Example:

,--------
| \pdfglyphtounicode{ff}{00660066}
`--------

here '0066' is the unicode string for 'f'. Spaces are
ignored in the second
parameter of \pdfglyphtounicode, hence it is possible to
write the above
command as

,--------
| \pdfglyphtounicode{ff}{0066 0066}
`--------

which is easier to read and understand IMO.


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-07-19 08:08

Message:
Logged In: YES 
user_id=710

patch updated to fix a bug reported by Dohyun Kim

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-07-16 13:19

Message:
Logged In: YES 
user_id=710

patch updated by a bug fix from Akira

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=580&group_id=106

From reinhard.kotucha at web.de  Wed Dec 20 23:03:13 2006
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 20 Dec 2006 23:03:13 +0100
Subject: [NTG-pdftex] [pdftex] 1.40-rc3
In-Reply-To: <68c491a60612200752s75f3e7cbp4970493bff72e62d@mail.gmail.com>
References: <68c491a60612200752s75f3e7cbp4970493bff72e62d@mail.gmail.com>
Message-ID: <17801.45857.270033.801142@zarniwoop.ms25.local>

>>>>> "Martin" == Martin Schr?der <martin at oneiros.de> writes:

 > - minimize the distinction between standard fonts and other type1 fonts: the
 >  *only* place this makes a difference is that if a font file is missing
 >  (and the font is used), a warning will be generated for normal fonts but
 >   not for standard fonts

It would be helpful to have a definition for: 

     * standard fonts
     * normal fonts
     * other Type1 fonts

Cheers,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From hartmut_henkel at gmx.de  Wed Dec 20 23:20:04 2006
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed, 20 Dec 2006 23:20:04 +0100 (CET)
Subject: [NTG-pdftex] [pdftex] 1.40-rc3
In-Reply-To: <17801.45857.270033.801142@zarniwoop.ms25.local>
References: <68c491a60612200752s75f3e7cbp4970493bff72e62d@mail.gmail.com>
	<17801.45857.270033.801142@zarniwoop.ms25.local>
Message-ID: <Pine.LNX.4.64.0612202312440.1346@hahepc1.hahe>

On Wed, 20 Dec 2006, Reinhard Kotucha wrote:

> >>>>> "Martin" == Martin Schr?der <martin at oneiros.de> writes:
>
>  > - minimize the distinction between standard fonts and other type1 fonts: the
>  >  *only* place this makes a difference is that if a font file is missing
>  >  (and the font is used), a warning will be generated for normal fonts but
>  >   not for standard fonts
>
> It would be helpful to have a definition for:
>
>      * standard fonts

the 14 fonts listed in the PDF Reference that must be built into any
decent PDF viewer, so it's not mandatory to embed them into PDF files.
These are Times-Roman, Helvetica, Courier, ZapfDingbats...

>      * normal fonts

any font is a normal font until you come to know it.

>      * other Type1 fonts

not one of the 14 standard fonts.

Regards, Hartmut

From cloos at jhcloos.com  Thu Dec 21 16:26:49 2006
From: cloos at jhcloos.com (James Cloos)
Date: Thu, 21 Dec 2006 10:26:49 -0500
Subject: [NTG-pdftex] [pdftex]  1.40-rc3
In-Reply-To: <20991.1166688141@cl.cam.ac.uk> (Robin Fairbairns's message of
	"Thu\, 21 Dec 2006 08\:02\:21 +0000")
References: <20991.1166688141@cl.cam.ac.uk>
Message-ID: <m3odpxuv5b.fsf@lugabout.jhcloos.org>

>>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel at gmx.de> writes:
>>>>> "Robin" == Robin Fairbairns <Robin.Fairbairns at cl.cam.ac.uk> writes:

Hartmut> the 14 fonts listed in the PDF Reference that must be built
Hartmut> into any decent PDF viewer, so it's not mandatory to embed
Hartmut> them into PDF files.  These are Times-Roman, Helvetica,
Hartmut> Courier, ZapfDingbats [and Symbol].

Robin> unless we declare adobe reader no longer "decent", this
Robin> definition doesn't work any more -- adobe only has minion and
Robin> myriad in the distribution (plus, i think, courier).

The current version (as installed on my laptop :) has the otf version
of Courier (called CourierStd, as is typical of Adobe's otf fonts), an
otf font called AdobePiStd which contains all of the glyphs in Zapf
Dingbats, and type1 versions of Symbol, AdobeSansMM and AdobeSerifMM
(in addition to the text cuts of MinionPro and MyriadPro).

They have always included the ability to emulate non-embedded fonts
with those two multiple master fonts.  The binary also has explicit
knowledge of some sort (found by strings|grep) of these font names:

,----
| Arial Arial,Bold Arial,BoldItalic Arial,Italic Arial-Bold
| Arial-BoldItalic Arial-BoldItalicMT Arial-BoldMT Arial-Italic
| Arial-ItalicMT ArialMT /Helvetica /Helvetica-Bold
| /Helvetica-BoldOblique /Helvetica-Oblique Helvetica Helvetica,Bold
| Helvetica,BoldItalic Helvetica,Italic Helvetica-Bold
| Helvetica-BoldItalic Helvetica-BoldOblique Helvetica-Italic
| Helvetica-Oblique
|
| /Times-Bold /Times-BoldItalic /Times-Italic /Times-Roman Times-Bold
| Times-BoldItalic Times-Italic Times-Roman TimesNewRoman
| TimesNewRoman,Bold TimesNewRoman,BoldItalic TimesNewRoman,Italic
| TimesNewRoman-Bold TimesNewRoman-BoldItalic TimesNewRoman-Italic
| TimesNewRomanBold TimesNewRomanPS TimesNewRomanPS-Bold
| TimesNewRomanPS-BoldItalic TimesNewRomanPS-BoldItalicMT
| TimesNewRomanPS-BoldMT TimesNewRomanPS-Italic
| TimesNewRomanPS-ItalicMT TimesNewRomanPSMT
`----

Even though it does not include any actual fonts named Times,
TimesNewRoman, Helvetica or Arial it does know the fonts, can
emulate them with its MM fonts, and can ouput postscript which
calls the fonts by name w/o having to embed them (relying of
course on the PS interpreters' ability to render said fonts).

That does seem sufficient to claim that it has those fonts (or
their functional equivilent, just like xpdf/poppler/gs).

-JimC (or Dev's_Advo, if you prefer :)
-- 
James Cloos <cloos at jhcloos.com>         OpenPGP: 1024D/ED7DAEA6

From noreply at sarovar.org  Thu Dec 21 17:06:06 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 21 Dec 2006 21:36:06 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-692 ] Amount of extra kerning is
	wrong/has changed
Message-ID: <E1GxQQo-00052h-00@sarovar.org>

Bugs item #692, was opened at 2006-11-15 02:14
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=692&group_id=106

Category: hz
Group: v1.40.0
>Status: Closed
>Resolution: Fixed
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: Amount of extra kerning is wrong/has changed

Initial Comment:
With \kn[ab]ccode=1000 a kern of 1em should be inserted.
(Here, it's 2.32pt:)

\tracingoutput1
\showboxdepth\maxdimen
\showboxbreadth\maxdimen
\pdfappendkern1 \pdfprependkern1
\knaccode\font`y=1000
\knbccode\font`y=1000

xyx
\bye


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-21 17:06

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-11-19 11:10

Message:
Logged In: YES 
user_id=710

This bug is caused by missing of declaration of k inside the
function get_auto_kern, hence the global variable k is taken
with wrong type (eight_bits).

----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-11-17 16:12

Message:
Logged In: YES 
user_id=2217

In fact, the kerning amount wraps at a kerning code of 256:

\tracingoutput1
\showboxbreadth\maxdimen
\pdfappendkern1
\knaccode\font`y=255 y % 2.55pt
\knaccode\font`y=257 y % 0.01pt
\knaccode\font`y=513 y % 0.01pt
\bye


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=692&group_id=106

From noreply at sarovar.org  Thu Dec 21 17:08:05 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 21 Dec 2006 21:38:05 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-693 ] No extra kerning before a
	character if it starts a word
Message-ID: <E1GxQSj-0005jE-00@sarovar.org>

Bugs item #693, was opened at 2006-11-15 02:14
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=693&group_id=106

Category: hz
Group: v1.40.0
>Status: Closed
>Resolution: Fixed
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: No extra kerning before a character if it starts a word

Initial Comment:
\tracingoutput1
\showboxdepth\maxdimen
\showboxbreadth\maxdimen
\pdfprependkern1
\knbccode\font`x=1000

xyx xyx
\bye


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-21 17:08

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=693&group_id=106

From noreply at sarovar.org  Thu Dec 21 17:08:36 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 21 Dec 2006 21:38:36 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-694 ] Extra kerning doesn't work in
	lines composed with expanded fonts
Message-ID: <E1GxQTE-0006Ix-00@sarovar.org>

Bugs item #694, was opened at 2006-11-15 02:14
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=694&group_id=106

Category: hz
Group: v1.40.0
>Status: Closed
>Resolution: Fixed
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: Extra kerning doesn't work in lines composed with expanded fonts

Initial Comment:
\pdftracingfonts2
\tracingoutput1
\showboxdepth\maxdimen
\showboxbreadth\maxdimen
\hsize 4cm
\pdfprependkern1
\knbccode\font`:=500
\pdfadjustspacing2
\pdffontexpand\font 20 20 5 autoexpand

yyy:

yyy: yyy: yyy: yyy: yyy:
\bye


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-21 17:08

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=694&group_id=106

From noreply at sarovar.org  Thu Dec 21 17:08:52 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 21 Dec 2006 21:38:52 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-695 ] Confusion when changing kerning
	settings within a paragraph
Message-ID: <E1GxQTU-0006b1-00@sarovar.org>

Bugs item #695, was opened at 2006-11-15 02:16
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=695&group_id=106

Category: hz
Group: v1.40.0
>Status: Closed
>Resolution: Fixed
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: Confusion when changing kerning settings within a paragraph

Initial Comment:
Extra kerning now has this nasty, unreliable kind of
paragraph scope, so that whether or not extra kerning
will be applied depends on whether tex needs to
hyphenate the paragraph, and whether a word contains a
discretionary.
(Same as for \pdfnoligatures [see discussion in feature
req 385], for which this may be an acceptable
limitation, since it has global scope, anyway. However,
I don't consider it acceptable for the kerning feature.
Think of language-dependant settings, for example.)

\hsize 7cm
\pdfadjustspacing0
\knaccode\font`s=500
\knbccode\font`s=500
\pdfappendkern1 \pdfprependkern1

nasty testing nasty testing nasty testing nasty testing
nasty testing

nasty testing nasty testing nasty testing nasty testing
nasty testing
\pdfappendkern0 \pdfprependkern0
nasty testing nasty testing nasty testing nasty testing
nasty testing

\bye


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-21 17:08

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=695&group_id=106

From noreply at sarovar.org  Thu Dec 21 17:10:18 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 21 Dec 2006 21:40:18 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-480 ] pdftex offset incorrect with
	\magnification. Patch included.
Message-ID: <E1GxQUs-0007BP-00@sarovar.org>

Bugs item #480, was opened at 2006-02-12 18:12
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=480&group_id=106

Category: None
>Group: v1.30.0
Status: Open
>Resolution: Wont Fix
>Priority: 3
Submitted By: Ian Hutchinson (ihutch)
Assigned to: Nobody (None)
Summary: pdftex offset incorrect with \magnification. Patch included.

Initial Comment:
 Any plain tex file that uses
\magnification gives incorrect text placement in pdf.
This bug is present
in the latest pdftex version 1.21a. It apparently was
caused by the
introduction of the new variables \pdfvoffset and
\pdfhoffset. This bug
was not present in older pdftex, e.g. version
3.14159-1.10b, which was
part of tetex-2...

A simple illustration of the problem is with the
trivial file:

\magnification \magstep3
%The following parindent and offset changes are not the
cause of errors.
%They are merely to illustrate them clearly by writing
at top left.
%Anything other than \magstep0 gives a placement error
with pdftex 1.21a.
\parindent 0pt
\hoffset -1 truein
\voffset -1 truein
The top.
\end

With tex and xdvi, the words "The top." are placed at
the immediate top
left. With pdftex 1.21a and xpdf (or acroread) they are
not. With earlier
pdftex 1.10b (e.g.) they are.

I had an extensive discussion on comp.text.tex with
Heiko Oberdiek, most
of which is at
http://www.codecomments.com/Tex/message784423.html

The gist of it is that backward compatibility with
plain tex files is very
important. As far as possible, it should be preserved
transparently.
Authors should not be required to hack their files in
order for them to
render the same in pdf as in dvi. Moreover there is a
simple way to
provide this compatibility.

A reasonable way to fix the bug is to change pdftex.ini
and hence
pdftex.fmt. (The corresponding pdfetex files ought also
to be fixed.)

A proposed patched pdftex.ini file is attached. It
consists simply of

% Thomas Esser, 1998, 2004. public domain.
\ifx\pdfoutput\undefined
\else
  \ifx\pdfoutput\relax
  \else
    \input pdftexconfig
    \pdfoutput=1
  \fi
\fi

\input plain

\ifx\pdfoutput\undefined
\else
  \ifx\pdfoutput\relax
  \else
\catcode`@=11
\def\m at g{%
\mag\count@
\hsize6.5truein\vsize8.9truein\dimen\footins8truein
%These commands fix the pdf sizes to be in true units.
\mag at fix\pdfhorigin \mag at fix\pdfvorigin
\mag at fix\pdfpagewidth \mag at fix\pdfpageheight
}
\def\mag at fix#1{%
 #1=\expandafter\convert at truept\the#1\relax
}
\begingroup
\catcode`P=12
\catcode`T=12
\lowercase{%
\endgroup
\def\convert at truept#1PT{%
#1truept%
}%
}%
\catcode`@=12
  \fi
\fi

\dump
\endinput

I don't know who takes responsibility for pdftex.ini.
But clearly this
ought to be fixed for all distributions. I care most
about tetex, because
it is what I use. Thanks,

        Ian Hutchinson


----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-10-23 20:49

Message:
Logged In: YES 
user_id=710

oh yes, thanks Phil for the correction.

In response to Ian Hutchinson: I am the maintainer of
neither pdftex.ini nor pdftex, so I feel that someone else
must make the decision.

----------------------------------------------------------------------

Comment By: Philip TAYLOR (chaa006)
Date: 2006-10-23 20:21

Message:
Logged In: YES 
user_id=3040

Thanh wrote :

I propose that if someone changes magnification then he/she
is suppposed to say

\pdfhorigin=1in
\pdfvorigin=1in

Surely they should write

\pdfhorigin = 1 true in
\pdfvorigin = 1 true in

should they not ?  I always do,
and it certainly has the intended
effect.

** Phil.


----------------------------------------------------------------------

Comment By: Ian Hutchinson (ihutch)
Date: 2006-10-23 19:49

Message:
Logged In: YES 
user_id=3410

In response to hanthethanh, let me explain once again that
the point is that TeX ought always to work the same with
both dvi output and pdf output. The latest pdftex breaks
that for all documents, old or new, that use \magnification.
Of course there are many ways the authors can fix those
documents by adding new commands. BUT THEY SHOULD NOT HAVE
TO. TeX's archival integrity is far too valuable for us to
accept it being broken by this incompatibility. I've shown
how it can be transparently fixed. The correction just needs
to be incorporated into the distributions

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-10-23 12:37

Message:
Logged In: YES 
user_id=710

I propose that if someone changes magnification then he/she
is suppposed to say

\pdfhorigin=1in
\pdfvorigin=1in

or something similar.

An undocumented trick is that if \pdfhorigin or \pdfvorigin
is not set (or set to 0) when the first page is shipped out,
then they will get 1in as the default value. To get zero
origin(s), use 1sp instead of 0.


----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=480&group_id=106

From noreply at sarovar.org  Thu Dec 21 17:09:09 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 21 Dec 2006 21:39:09 +0530
Subject: [NTG-pdftex] [ pdftex-Bugs-712 ] problems with \letterspacefont
Message-ID: <E1GxQTl-0006bY-00@sarovar.org>

Bugs item #712, was opened at 2006-12-12 03:53
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

Category: hz
Group: v1.40.0
>Status: Closed
>Resolution: Fixed
Priority: 5
Submitted By: Robert (schlcht)
Assigned to: The Thanh Han (hanthethanh)
Summary: problems with \letterspacefont

Initial Comment:
% Testing the new \letterspacefont, I found:
%
% (1) it's certainly not correct to have the spacing 
%     relative to character widths (look at `minimal'!)
% (2) everything's shifted to the right
% (3) when trying to expand the letter-spaced font, I 
%     get the warning `font should be expanded before 
%     its first use' (even before its first use), and 
%     then pdftex segfaults.

\pdfadjustspacing2
\hsize13cm
This is normal text This is normal text 
This is normal text This is normal text 
This is normal text This is normal text
{\letterspacefont\lspfont=\font 1000
%\pdffontexpand\lspfont 20 20 5 autoexpand % segfault
\lspfont
This isn't normal text This isn't normal text
This isn't normal text This is minimal text}
This is normal text This is normal text 
This is normal text
\bye





----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-21 17:09

Message:
Logged In: YES 
user_id=421

A patch for this will be included in the next version (1.40).

----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-12 18:47

Message:
Logged In: YES 
user_id=710

oops, I disabled ligature for letter-spaced font, but this
should not affect the base font. Will have to rethink. Most
likely the syntax will change like follows:

\letterspacefont\f=cmr10 at 11pt 100
\f text




----------------------------------------------------------------------

Comment By: Robert (schlcht)
Date: 2006-12-12 16:50

Message:
Logged In: YES 
user_id=2217

% and here's
% (4) ligatures will be broken up, not only in the 
%     letter-spaced font (which is probably acceptable), 
%     but in all subsequent uses of the base font, too

fi\par
{\letterspacefont\lspfont=\font 100 \lspfont fi}\par
fi

\bye



----------------------------------------------------------------------

Comment By: The Thanh Han (hanthethanh)
Date: 2006-12-12 14:31

Message:
Logged In: YES 
user_id=710

I fixed (1) and (2); (3) is disabled now, ie you cannot
expand a letter-spaced font. Please wait for another release
from Martin.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=493&aid=712&group_id=106

From gnwiii at gmail.com  Thu Dec 21 18:12:52 2006
From: gnwiii at gmail.com (gnwiii at gmail.com)
Date: Thu, 21 Dec 2006 13:12:52 -0400
Subject: [NTG-pdftex] [pdftex] 1.40-rc3
In-Reply-To: <m3odpxuv5b.fsf@lugabout.jhcloos.org>
References: <20991.1166688141@cl.cam.ac.uk>
	<m3odpxuv5b.fsf@lugabout.jhcloos.org>
Message-ID: <22af238a0612210912j11ba9279r370ac265826fb24@mail.gmail.com>

On 12/21/06, James Cloos <cloos at jhcloos.com> wrote:
> >>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel at gmx.de> writes:
> >>>>> "Robin" == Robin Fairbairns <Robin.Fairbairns at cl.cam.ac.uk> writes:
>
> Hartmut> the 14 fonts listed in the PDF Reference that must be built
> Hartmut> into any decent PDF viewer, so it's not mandatory to embed
> Hartmut> them into PDF files.  These are Times-Roman, Helvetica,
> Hartmut> Courier, ZapfDingbats [and Symbol].
>
> Robin> unless we declare adobe reader no longer "decent", this
> Robin> definition doesn't work any more -- adobe only has minion and
> Robin> myriad in the distribution (plus, i think, courier).
>
> [...]
> Even though it does not include any actual fonts named Times,
> TimesNewRoman, Helvetica or Arial it does know the fonts, can
> emulate them with its MM fonts, and can ouput postscript which
> calls the fonts by name w/o having to embed them (relying of
> course on the PS interpreters' ability to render said fonts).
>
> That does seem sufficient to claim that it has those fonts (or
> their functional equivilent, just like xpdf/poppler/gs).

There are examples where the substitutions made by the various viewers
end up looking quite different.   These days a well-travelled route to
confusion is to send your colleague a document created with a Windows
GUI tool that uses Arial-Italic when the author requests
Helvetica-Italic.  Your colleague opens the file on her linux machine,
and sees the file rendered using the URW clone of Helvetica-Oblique.
In Arial-Italic, the vertical bar is upright, so the user sees no
reason to switch to normal "Helvetica" for the vertical bar symbol (on
linux the user would probably do this to see upright verticals), but
the URW clone has slanted verticals, so y=x|b renders more like y=x/b.

One of the problems with all the software being so helpful by
substituting for the Laserwiriter 35 fonts is that you no longer know
what was used when a document was created.  People tell me "I always
use Helvetica" when they haven't been near a system that contains
a real Helvetica font.

-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From martin at oneiros.de  Fri Dec 22 00:18:50 2006
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 22 Dec 2006 00:18:50 +0100
Subject: [NTG-pdftex] 1.40-rc4
Message-ID: <68c491a60612211518p388e9289t71d17079d4e6fde1@mail.gmail.com>

http://sarovar.org/download.php/1131/pdftex-1.40.0-rc4.tar.bz2
http://sarovar.org/download.php/1132/pdftex-1.40.0-rc3-rc4.diff.gz

We are almost there...

-----------------------------------------------------
pdfTeX 3.141592-1.40.0-rc4 was released on 2006-12-22
-----------------------------------------------------
- changes from rc3:
 various small fixes

In India (where sarovar stands) it' still the 21st. :-)

I'll have a stab at integrating this into TL over christmas, and we'll
work on the manual. If no serious bugs are detected, I'll do a
realease next week.

Best
   Martin

From Robin.Fairbairns at cl.cam.ac.uk  Thu Dec 21 09:02:21 2006
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Thu, 21 Dec 2006 08:02:21 +0000
Subject: [NTG-pdftex] [pdftex]  1.40-rc3
In-Reply-To: Your message of Wed, 20 Dec 2006 23:20:04 +0100.
	<Pine.LNX.4.64.0612202312440.1346@hahepc1.hahe> 
Message-ID: <20991.1166688141@cl.cam.ac.uk>

Hartmut Henkel <hartmut_henkel at gmx.de> wrote:

> On Wed, 20 Dec 2006, Reinhard Kotucha wrote:
> > It would be helpful to have a definition for:
> >
> >      * standard fonts
> 
> the 14 fonts listed in the PDF Reference that must be built into any
> decent PDF viewer, so it's not mandatory to embed them into PDF files.
> These are Times-Roman, Helvetica, Courier, ZapfDingbats...

unless we declare adobe reader no longer "decent", this definition
doesn't work any more -- adobe only has minion and myriad in the
distribution (plus, i think, courier).

and no-one nowadays imagines you can get away without embedding except
in the context of the most restricted distributions, or where the
precise shape of the glyphs isn't important.

robin

From noreply at sarovar.org  Fri Dec 22 10:48:32 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 22 Dec 2006 15:18:32 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-715 ] highlight ligatures
Message-ID: <E1Gxh0y-0004sV-00@sarovar.org>

Feature Requests item #715, was opened at 2006-12-22 10:48
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=715&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Uli Laube (ulilaube)
Assigned to: Nobody (None)
Summary: highlight ligatures

Initial Comment:
Hello!

>From time to time people in de.comp.text.tex ask for a
solution to remove ligatures from german words
automatically. As this requires quite some knowledge of
the morphology of the german language, packages like 
rmligs  or  ligatex  use lists of words to remove
unwanted ligatures. As this depends on the ligatures
available in the font used, it is quite troublesome to
the compile the lists.

I'am proposing the following addtion to be incorporated
into pdftex: highlighting of the ligatures.

If enabled pdftex uses a bold version of the font when
it inserts ligatures in normal text and vice versa.
Like /em and /emph work for italic text. This would
allow the user of pdftex to prepare a draft copy of the
document were all ligatures are highlighted and can be
easily spotted. The user can then insert "| manually to
remove the unwanted ligatures.

Kind Regards and Happy Holidays

Uli Laube

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=715&group_id=106

From noreply at sarovar.org  Fri Dec 22 11:08:52 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 22 Dec 2006 15:38:52 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-715 ] highlight ligatures
Message-ID: <E1GxhKe-0003Ia-00@sarovar.org>

Feature Requests item #715, was opened at 2006-12-22 10:48
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=715&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Uli Laube (ulilaube)
Assigned to: Nobody (None)
Summary: highlight ligatures

Initial Comment:
Hello!

>From time to time people in de.comp.text.tex ask for a
solution to remove ligatures from german words
automatically. As this requires quite some knowledge of
the morphology of the german language, packages like 
rmligs  or  ligatex  use lists of words to remove
unwanted ligatures. As this depends on the ligatures
available in the font used, it is quite troublesome to
the compile the lists.

I'am proposing the following addtion to be incorporated
into pdftex: highlighting of the ligatures.

If enabled pdftex uses a bold version of the font when
it inserts ligatures in normal text and vice versa.
Like /em and /emph work for italic text. This would
allow the user of pdftex to prepare a draft copy of the
document were all ligatures are highlighted and can be
easily spotted. The user can then insert "| manually to
remove the unwanted ligatures.

Kind Regards and Happy Holidays

Uli Laube

----------------------------------------------------------------------

Comment By: Frank K?ster (frank)
Date: 2006-12-22 11:08

Message:
Logged In: YES 
user_id=3360

Since ligatures are inserted according to information in the
fonts, I think this should be implemented as a combination
of a special font (which uses noticeably different glyphs
for ligatures), and a macro package that switches fonts.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=715&group_id=106

From noreply at sarovar.org  Fri Dec 22 11:22:58 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 22 Dec 2006 15:52:58 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-715 ] highlight ligatures
Message-ID: <E1GxhYI-0004Q9-00@sarovar.org>

Feature Requests item #715, was opened at 2006-12-22 10:48
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=715&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Uli Laube (ulilaube)
Assigned to: Nobody (None)
Summary: highlight ligatures

Initial Comment:
Hello!

>From time to time people in de.comp.text.tex ask for a
solution to remove ligatures from german words
automatically. As this requires quite some knowledge of
the morphology of the german language, packages like 
rmligs  or  ligatex  use lists of words to remove
unwanted ligatures. As this depends on the ligatures
available in the font used, it is quite troublesome to
the compile the lists.

I'am proposing the following addtion to be incorporated
into pdftex: highlighting of the ligatures.

If enabled pdftex uses a bold version of the font when
it inserts ligatures in normal text and vice versa.
Like /em and /emph work for italic text. This would
allow the user of pdftex to prepare a draft copy of the
document were all ligatures are highlighted and can be
easily spotted. The user can then insert "| manually to
remove the unwanted ligatures.

Kind Regards and Happy Holidays

Uli Laube

----------------------------------------------------------------------

>Comment By: Uli Laube (ulilaube)
Date: 2006-12-22 11:22

Message:
Logged In: YES 
user_id=4116

If a document uses different fonts, they might have
different ligatures available. The special font and the
macro packages might not be aware of this. As far as I know,
the insertion of ligatures happens late when the .dvi oder
.pdf is created. My hope is that switching to the bold
version of the font when a ligature is inserted might be a
way to have this feature work for all fonts. 

----------------------------------------------------------------------

Comment By: Frank K?ster (frank)
Date: 2006-12-22 11:08

Message:
Logged In: YES 
user_id=3360

Since ligatures are inserted according to information in the
fonts, I think this should be implemented as a combination
of a special font (which uses noticeably different glyphs
for ligatures), and a macro package that switches fonts.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=715&group_id=106

From noreply at sarovar.org  Fri Dec 22 13:55:19 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 22 Dec 2006 18:25:19 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-715 ] highlight ligatures
Message-ID: <E1Gxjvj-000897-00@sarovar.org>

Feature Requests item #715, was opened at 2006-12-22 10:48
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=715&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Uli Laube (ulilaube)
Assigned to: Nobody (None)
Summary: highlight ligatures

Initial Comment:
Hello!

>From time to time people in de.comp.text.tex ask for a
solution to remove ligatures from german words
automatically. As this requires quite some knowledge of
the morphology of the german language, packages like 
rmligs  or  ligatex  use lists of words to remove
unwanted ligatures. As this depends on the ligatures
available in the font used, it is quite troublesome to
the compile the lists.

I'am proposing the following addtion to be incorporated
into pdftex: highlighting of the ligatures.

If enabled pdftex uses a bold version of the font when
it inserts ligatures in normal text and vice versa.
Like /em and /emph work for italic text. This would
allow the user of pdftex to prepare a draft copy of the
document were all ligatures are highlighted and can be
easily spotted. The user can then insert "| manually to
remove the unwanted ligatures.

Kind Regards and Happy Holidays

Uli Laube

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2006-12-22 13:55

Message:
Logged In: YES 
user_id=929

For highlighting a boldface font is needed that has the same
metrics as the non-highlighted one, to keep paragraph
breaking unchanged.

What you can do right now is to generate a virtual font that
contains colored ligatures! It is in fact possible to add
PDF color change command specials into the .vpl virtual
property list files of the virtual font, These commands will
then be inserted into the PDF page stream in front of the
glyphs.

But also some solution on engine level should be doable.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Uli Laube (ulilaube)
Date: 2006-12-22 11:22

Message:
Logged In: YES 
user_id=4116

If a document uses different fonts, they might have
different ligatures available. The special font and the
macro packages might not be aware of this. As far as I know,
the insertion of ligatures happens late when the .dvi oder
.pdf is created. My hope is that switching to the bold
version of the font when a ligature is inserted might be a
way to have this feature work for all fonts. 

----------------------------------------------------------------------

Comment By: Frank K?ster (frank)
Date: 2006-12-22 11:08

Message:
Logged In: YES 
user_id=3360

Since ligatures are inserted according to information in the
fonts, I think this should be implemented as a combination
of a special font (which uses noticeably different glyphs
for ligatures), and a macro package that switches fonts.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=715&group_id=106

From noreply at sarovar.org  Fri Dec 22 14:08:59 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 22 Dec 2006 18:38:59 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-715 ] highlight ligatures
Message-ID: <E1Gxk8x-00019c-00@sarovar.org>

Feature Requests item #715, was opened at 2006-12-22 10:48
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=715&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Uli Laube (ulilaube)
Assigned to: Nobody (None)
Summary: highlight ligatures

Initial Comment:
Hello!

>From time to time people in de.comp.text.tex ask for a
solution to remove ligatures from german words
automatically. As this requires quite some knowledge of
the morphology of the german language, packages like 
rmligs  or  ligatex  use lists of words to remove
unwanted ligatures. As this depends on the ligatures
available in the font used, it is quite troublesome to
the compile the lists.

I'am proposing the following addtion to be incorporated
into pdftex: highlighting of the ligatures.

If enabled pdftex uses a bold version of the font when
it inserts ligatures in normal text and vice versa.
Like /em and /emph work for italic text. This would
allow the user of pdftex to prepare a draft copy of the
document were all ligatures are highlighted and can be
easily spotted. The user can then insert "| manually to
remove the unwanted ligatures.

Kind Regards and Happy Holidays

Uli Laube

----------------------------------------------------------------------

>Comment By: Hartmut Henkel (hhenkel)
Date: 2006-12-22 14:08

Message:
Logged In: YES 
user_id=929

...an example .vpl file with colorchange command:

(CHARACTER O 2
   (CHARWD R 0.777781)
   (CHARHT R 0.683332)
   (MAP
      (SPECIAL pdf:direct: 0.486 0.104 0.291 rg)
      (SETCHAR O 2)
      (SPECIAL pdf:direct: 0 0 0 rg)
      )
   )

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-12-22 13:55

Message:
Logged In: YES 
user_id=929

For highlighting a boldface font is needed that has the same
metrics as the non-highlighted one, to keep paragraph
breaking unchanged.

What you can do right now is to generate a virtual font that
contains colored ligatures! It is in fact possible to add
PDF color change command specials into the .vpl virtual
property list files of the virtual font, These commands will
then be inserted into the PDF page stream in front of the
glyphs.

But also some solution on engine level should be doable.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Uli Laube (ulilaube)
Date: 2006-12-22 11:22

Message:
Logged In: YES 
user_id=4116

If a document uses different fonts, they might have
different ligatures available. The special font and the
macro packages might not be aware of this. As far as I know,
the insertion of ligatures happens late when the .dvi oder
.pdf is created. My hope is that switching to the bold
version of the font when a ligature is inserted might be a
way to have this feature work for all fonts. 

----------------------------------------------------------------------

Comment By: Frank K?ster (frank)
Date: 2006-12-22 11:08

Message:
Logged In: YES 
user_id=3360

Since ligatures are inserted according to information in the
fonts, I think this should be implemented as a combination
of a special font (which uses noticeably different glyphs
for ligatures), and a macro package that switches fonts.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=715&group_id=106

From noreply at sarovar.org  Fri Dec 22 14:12:38 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 22 Dec 2006 18:42:38 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-715 ] highlight ligatures
Message-ID: <E1GxkCU-0006J4-00@sarovar.org>

Feature Requests item #715, was opened at 2006-12-22 10:48
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=715&group_id=106

Category: None
Group: None
Status: Open
Resolution: None
Priority: 5
Submitted By: Uli Laube (ulilaube)
Assigned to: Nobody (None)
Summary: highlight ligatures

Initial Comment:
Hello!

>From time to time people in de.comp.text.tex ask for a
solution to remove ligatures from german words
automatically. As this requires quite some knowledge of
the morphology of the german language, packages like 
rmligs  or  ligatex  use lists of words to remove
unwanted ligatures. As this depends on the ligatures
available in the font used, it is quite troublesome to
the compile the lists.

I'am proposing the following addtion to be incorporated
into pdftex: highlighting of the ligatures.

If enabled pdftex uses a bold version of the font when
it inserts ligatures in normal text and vice versa.
Like /em and /emph work for italic text. This would
allow the user of pdftex to prepare a draft copy of the
document were all ligatures are highlighted and can be
easily spotted. The user can then insert "| manually to
remove the unwanted ligatures.

Kind Regards and Happy Holidays

Uli Laube

----------------------------------------------------------------------

>Comment By: Uli Laube (ulilaube)
Date: 2006-12-22 14:12

Message:
Logged In: YES 
user_id=4116

Highlighting the ligatures would only be necessary in a
draft copy. Then one would insert the "| in the appropriate
places and disable the highlighting. A change in paragraph
breaking is acceptable in my opinion as I would not want to
distribute the version with highlighted ligatures.

Changing the font color is a nice idea. But it would require
an extra virtual font for every font used in the document as
they might have different ligatures. Seems to me, that I
have to learn how to write .vlp files :)

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-12-22 14:08

Message:
Logged In: YES 
user_id=929

...an example .vpl file with colorchange command:

(CHARACTER O 2
   (CHARWD R 0.777781)
   (CHARHT R 0.683332)
   (MAP
      (SPECIAL pdf:direct: 0.486 0.104 0.291 rg)
      (SETCHAR O 2)
      (SPECIAL pdf:direct: 0 0 0 rg)
      )
   )

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-12-22 13:55

Message:
Logged In: YES 
user_id=929

For highlighting a boldface font is needed that has the same
metrics as the non-highlighted one, to keep paragraph
breaking unchanged.

What you can do right now is to generate a virtual font that
contains colored ligatures! It is in fact possible to add
PDF color change command specials into the .vpl virtual
property list files of the virtual font, These commands will
then be inserted into the PDF page stream in front of the
glyphs.

But also some solution on engine level should be doable.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Uli Laube (ulilaube)
Date: 2006-12-22 11:22

Message:
Logged In: YES 
user_id=4116

If a document uses different fonts, they might have
different ligatures available. The special font and the
macro packages might not be aware of this. As far as I know,
the insertion of ligatures happens late when the .dvi oder
.pdf is created. My hope is that switching to the bold
version of the font when a ligature is inserted might be a
way to have this feature work for all fonts. 

----------------------------------------------------------------------

Comment By: Frank K?ster (frank)
Date: 2006-12-22 11:08

Message:
Logged In: YES 
user_id=3360

Since ligatures are inserted according to information in the
fonts, I think this should be implemented as a combination
of a special font (which uses noticeably different glyphs
for ligatures), and a macro package that switches fonts.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=715&group_id=106

From noreply at sarovar.org  Fri Dec 22 15:54:44 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Fri, 22 Dec 2006 20:24:44 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-715 ] highlight ligatures
Message-ID: <E1GxlnI-000317-00@sarovar.org>

Feature Requests item #715, was opened at 2006-12-22 10:48
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=715&group_id=106

>Category: Fonts
>Group: v1.50
Status: Open
Resolution: None
>Priority: 3
Submitted By: Uli Laube (ulilaube)
>Assigned to: Hartmut Henkel (hhenkel)
Summary: highlight ligatures

Initial Comment:
Hello!

>From time to time people in de.comp.text.tex ask for a
solution to remove ligatures from german words
automatically. As this requires quite some knowledge of
the morphology of the german language, packages like 
rmligs  or  ligatex  use lists of words to remove
unwanted ligatures. As this depends on the ligatures
available in the font used, it is quite troublesome to
the compile the lists.

I'am proposing the following addtion to be incorporated
into pdftex: highlighting of the ligatures.

If enabled pdftex uses a bold version of the font when
it inserts ligatures in normal text and vice versa.
Like /em and /emph work for italic text. This would
allow the user of pdftex to prepare a draft copy of the
document were all ligatures are highlighted and can be
easily spotted. The user can then insert "| manually to
remove the unwanted ligatures.

Kind Regards and Happy Holidays

Uli Laube

----------------------------------------------------------------------

Comment By: Uli Laube (ulilaube)
Date: 2006-12-22 14:12

Message:
Logged In: YES 
user_id=4116

Highlighting the ligatures would only be necessary in a
draft copy. Then one would insert the "| in the appropriate
places and disable the highlighting. A change in paragraph
breaking is acceptable in my opinion as I would not want to
distribute the version with highlighted ligatures.

Changing the font color is a nice idea. But it would require
an extra virtual font for every font used in the document as
they might have different ligatures. Seems to me, that I
have to learn how to write .vlp files :)

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-12-22 14:08

Message:
Logged In: YES 
user_id=929

...an example .vpl file with colorchange command:

(CHARACTER O 2
   (CHARWD R 0.777781)
   (CHARHT R 0.683332)
   (MAP
      (SPECIAL pdf:direct: 0.486 0.104 0.291 rg)
      (SETCHAR O 2)
      (SPECIAL pdf:direct: 0 0 0 rg)
      )
   )

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Hartmut Henkel (hhenkel)
Date: 2006-12-22 13:55

Message:
Logged In: YES 
user_id=929

For highlighting a boldface font is needed that has the same
metrics as the non-highlighted one, to keep paragraph
breaking unchanged.

What you can do right now is to generate a virtual font that
contains colored ligatures! It is in fact possible to add
PDF color change command specials into the .vpl virtual
property list files of the virtual font, These commands will
then be inserted into the PDF page stream in front of the
glyphs.

But also some solution on engine level should be doable.

Regards, Hartmut

----------------------------------------------------------------------

Comment By: Uli Laube (ulilaube)
Date: 2006-12-22 11:22

Message:
Logged In: YES 
user_id=4116

If a document uses different fonts, they might have
different ligatures available. The special font and the
macro packages might not be aware of this. As far as I know,
the insertion of ligatures happens late when the .dvi oder
.pdf is created. My hope is that switching to the bold
version of the font when a ligature is inserted might be a
way to have this feature work for all fonts. 

----------------------------------------------------------------------

Comment By: Frank K?ster (frank)
Date: 2006-12-22 11:08

Message:
Logged In: YES 
user_id=3360

Since ligatures are inserted according to information in the
fonts, I think this should be implemented as a combination
of a special font (which uses noticeably different glyphs
for ligatures), and a macro package that switches fonts.

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=715&group_id=106

From reinhard.kotucha at web.de  Wed Dec 27 06:31:53 2006
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 27 Dec 2006 06:31:53 +0100
Subject: [NTG-pdftex] \pdffontattr in pdftex-1.40.0-rc4
Message-ID: <17810.1353.529121.878552@zarniwoop.ms25.local>

Hi,
I'm trying to run the vntex testfiles with the current pdftex release
recently uploaded to the TeXLive repository by Martin.

Can anybody tell me what the warnings mean?

pdfTeX warning (\pdffontattr): font \^^@ has conflicting attributes

I get a lot of these messages.  The (pdf) output seems to be ok.

Regards,
  Reinhard


-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From frank at debian.org  Wed Dec 27 11:21:37 2006
From: frank at debian.org (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Wed, 27 Dec 2006 11:21:37 +0100
Subject: [NTG-pdftex] Some 1.40 beta nitpicking
Message-ID: <86d565vdu6.fsf@alhambra.kuesterei.ch>

Hi,

- INSTALL says:

  "The code of pdfTeX is in src/texk/web2c/pdfetexdir"

  However, s/pdfetexdir/pdftexdir/

- pdftex.xml says that pdfTeX is an "extension of TeX which directly
  generates PDF documents instead of DVI".  Since it's routinely used to
  generate DVI now, and even provides additional features in DVI mode,
  this could be changed to "extension of TeX which allows direct
  generatiion of PDF documents and provides micro-typographic (and
  other) features in DVI and PDF mode".  I'm also unsure whether
  pdflatex really deserves special mentioning?

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From reinhard.kotucha at web.de  Wed Dec 27 23:54:23 2006
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 27 Dec 2006 23:54:23 +0100
Subject: [NTG-pdftex] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <200612270816.kBR8GVKj011316@jupiter.fsci.fuk.kindai.ac.jp>
References: <200612270816.kBR8GVKj011316@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <17810.63903.873936.264786@zarniwoop.ms25.local>

Akira, I put my response back to the pdftex developers list because I
think that it is very helpful if the developer who implemented the
message 

 "pdfTeX warning (\pdffontattr): font \^^@ has conflicting attributes"

can tell us a bit more about it's meaning.

>>>>> "Akira" == Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp> writes:

  > Hi Reinhard,
  >> I'm trying to run the vntex testfiles with the current pdftex
  >> release recently uploaded to the TeXLive repository by Martin.
  >> 
  >> Can anybody tell me what the warnings mean?
  >> 
  >> pdfTeX warning (\pdffontattr): font \^^@ has conflicting
  >> attributes

  > Can you please tell me the name of the test file if it is in CTAN?

Try ${TEXMF}/doc/generic/vntex/tests/urwvn-test.tex which you already
have installed.  urwvn-test.tex requires other files from the tests
directory.  You do not need the latest version, I did not change the
content of the file.  Recent versions load a .cls file while former
versions loaded a .sty file.  That's all.  There should not be any
differences between the files from TL-2005 and the current files.

  > (I've tested a few vntex tests and I don't have the warning.
  > Maybe I'm testing different files.)

The files had not been changed, I got the messages after I switched
from pdftex-1.30 to pdftex 1.40.

Thank you very much, Akira.

Best regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From kakuto at fsci.fuk.kindai.ac.jp  Thu Dec 28 01:14:58 2006
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu, 28 Dec 2006 09:14:58 +0900
Subject: [NTG-pdftex] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: Your message of "Wed, 27 Dec 2006 23:54:23 +0100"
References: <17810.63903.873936.264786@zarniwoop.ms25.local>
Message-ID: <200612280014.kBS0ExBE014994@jupiter.fsci.fuk.kindai.ac.jp>

Hi Reinhard,

>   >> I'm trying to run the vntex testfiles with the current pdftex
>   >> release recently uploaded to the TeXLive repository by Martin.
>   >> 
>   >> Can anybody tell me what the warnings mean?
>   >> 
>   >> pdfTeX warning (\pdffontattr): font \^^@ has conflicting
>   >> attributes
> 
>   > Can you please tell me the name of the test file if it is in CTAN?
> 
> Try ${TEXMF}/doc/generic/vntex/tests/urwvn-test.tex which you already
> have installed.  urwvn-test.tex requires other files from the tests
> directory.  You do not need the latest version, I did not change the
> content of the file.  Recent versions load a .cls file while former
> versions loaded a .sty file.  That's all.  There should not be any
> differences between the files from TL-2005 and the current files.
> 
>   > (I've tested a few vntex tests and I don't have the warning.
>   > Maybe I'm testing different files.)
> 
> The files had not been changed, I got the messages after I switched
> from pdftex-1.30 to pdftex 1.40.

I don't encounter the warning also with the urwvn-test.tex.
I send you the terminal output and the logfile.

Thanks,
Akira

-------------------------------------------
Terminal output:

This is pdfTeX, Version 3.141592-1.40.0-rc4 (Web2C 7.5.5)
entering extended mode
(./urwvn-test.tex
LaTeX2e <2005/12/01>
Babel <v3.8h> and hyphenation patterns for english, usenglishmax, ukenglish, ba
sque, bulgarian, coptic, welsh, czech, slovak, german, ngerman, danish, spanish
, catalan, estonian, finnish, french, irish, polygreek, monogreek, ancientgreek
, croatian, hungarian, interlingua, ibycus, bahasa, icelandic, italian, latin, 
mongolian, dutch, norsk, polish, portuguese, pinyin, romanian, russian, samin, 
slovene, usorbian, serbian, swedish, turkish, ukrainian, dumylang, nohyphenatio
n, loaded.
(./vnsample.cls
Document Class: vnsample 2005/08/27
(c:/usr/local/share/texmf/tex/latex/base/article.cls
Document Class: article 2005/09/16 v1.4f Standard LaTeX document class
(c:/usr/local/share/texmf/tex/latex/base/size10.clo))
(c:/usr/local/share/texmf/tex/generic/oberdiek/ifpdf.sty)
(c:/usr/local/share/texmf/tex/latex/vntex/vietnam.sty
(c:/usr/local/share/texmf/tex/latex/base/ifthen.sty)
(c:/usr/local/share/texmf/tex/latex/base/fontenc.sty
(c:/usr/local/share/texmf/tex/latex/vntex/t5enc.def)
(c:/usr/local/share/texmf/tex/latex/vntex/t5cmr.fd))
(c:/usr/local/share/texmf/tex/latex/base/inputenc.sty
(c:/usr/local/share/texmf/tex/latex/vntex/viscii.def))
(c:/usr/local/share/texmf/tex/latex/vntex/vncaps.tex))
(c:/usr/local/share/texmf/tex/latex/tools/multicol.sty)
(c:/usr/local/share/texmf/tex/latex/misc/geometry.sty
(c:/usr/local/share/texmf/tex/latex/graphics/keyval.sty)
(c:/usr/local/share/texmf/tex/latex/misc/geometry.cfg))
(c:/usr/local/share/texmf/tex/latex/tools/array.sty)
(c:/usr/local/share/texmf/tex/latex/fancyhdr/fancyhdr.sty)) (./urwvn-test.aux)
(c:/usr/local/share/texmf/tex/latex/vntex/t5uag.fd)
(c:/usr/local/share/texmf/tex/latex/vntex/t5ubk.fd)
(c:/usr/local/share/texmf/tex/latex/vntex/t5ucr.fd)
(c:/usr/local/share/texmf/tex/latex/vntex/t5uhv.fd) [1{c:/usr/local/share/texmf
/fonts/map/pdftex/updmap/pdftex.map}]
(c:/usr/local/share/texmf/tex/latex/vntex/t5unc.fd)
(c:/usr/local/share/texmf/tex/latex/vntex/t5upl.fd)
(c:/usr/local/share/texmf/tex/latex/vntex/t5fpl.fd)
(c:/usr/local/share/texmf/tex/latex/vntex/t5utm.fd) [2]
(c:/usr/local/share/texmf/tex/latex/vntex/t5pag.fd)
(c:/usr/local/share/texmf/tex/latex/vntex/t5pbk.fd)
(c:/usr/local/share/texmf/tex/latex/vntex/t5pcr.fd)
(c:/usr/local/share/texmf/tex/latex/vntex/t5phv.fd) [3]
(c:/usr/local/share/texmf/tex/latex/vntex/t5pnc.fd)
(c:/usr/local/share/texmf/tex/latex/vntex/t5ppl.fd)
(c:/usr/local/share/texmf/tex/latex/vntex/t5ptm.fd)
(c:/usr/local/share/texmf/tex/latex/vntex/t5uzcm.fd) [4] (./urwvn-test.aux) ){c
:/usr/local/share/texmf/fonts/enc/dvips/base/t5.enc}<c:/usr/local/share/texmf/f
onts/type1/bluesky/cmtt10.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn
/fplrc8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/uagd8v.pfb><c:/u
sr/local/share/texmf/fonts/type1/vntex/urwvn/uagdo8v.pfb><c:/usr/local/share/te
xmf/fonts/type1/vntex/urwvn/uagk8v.pfb><c:/usr/local/share/texmf/fonts/type1/vn
tex/urwvn/uagko8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/ubkd8v.
pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/ubkd8v.pfb><c:/usr/local/
share/texmf/fonts/type1/vntex/urwvn/ubkdi8v.pfb><c:/usr/local/share/texmf/fonts
/type1/vntex/urwvn/ubkl8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn
/ubkl8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/ubkli8v.pfb><c:/u
sr/local/share/texmf/fonts/type1/vntex/urwvn/ucrb8v.pfb><c:/usr/local/share/tex
mf/fonts/type1/vntex/urwvn/ucrbo8v.pfb><c:/usr/local/share/texmf/fonts/type1/vn
tex/urwvn/ucrr8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/ucrro8v.
pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/uhvb8v.pfb><c:/usr/local/
share/texmf/fonts/type1/vntex/urwvn/uhvbo8v.pfb><c:/usr/local/share/texmf/fonts
/type1/vntex/urwvn/uhvr8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn
/uhvro8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/uncb8v.pfb><c:/u
sr/local/share/texmf/fonts/type1/vntex/urwvn/uncb8v.pfb><c:/usr/local/share/tex
mf/fonts/type1/vntex/urwvn/uncbi8v.pfb><c:/usr/local/share/texmf/fonts/type1/vn
tex/urwvn/uncr8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/uncr8v.p
fb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/uncri8v.pfb><c:/usr/local/
share/texmf/fonts/type1/vntex/urwvn/uplb8v.pfb><c:/usr/local/share/texmf/fonts/
type1/vntex/urwvn/uplb8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/
uplbi8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/uplr8v.pfb><c:/us
r/local/share/texmf/fonts/type1/vntex/urwvn/uplr8v.pfb><c:/usr/local/share/texm
f/fonts/type1/vntex/urwvn/uplri8v.pfb><c:/usr/local/share/texmf/fonts/type1/vnt
ex/urwvn/utmb8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/utmb8v.pf
b><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/utmbi8v.pfb><c:/usr/local/s
hare/texmf/fonts/type1/vntex/urwvn/utmr8v.pfb><c:/usr/local/share/texmf/fonts/t
ype1/vntex/urwvn/utmr8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/u
tmri8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/uzcmi8v.pfb>
Output written on urwvn-test.pdf (4 pages, 713906 bytes).
Transcript written on urwvn-test.log.


---------------------------
Log file:

This is pdfTeX, Version 3.141592-1.40.0-rc4 (Web2C 7.5.5) (format=pdflatex 2006.12.22)  28 DEC 2006 08:58
entering extended mode
**urwvn-test
(./urwvn-test.tex
LaTeX2e <2005/12/01>
Babel <v3.8h> and hyphenation patterns for english, usenglishmax, ukenglish, ba
sque, bulgarian, coptic, welsh, czech, slovak, german, ngerman, danish, spanish
, catalan, estonian, finnish, french, irish, polygreek, monogreek, ancientgreek
, croatian, hungarian, interlingua, ibycus, bahasa, icelandic, italian, latin, 
mongolian, dutch, norsk, polish, portuguese, pinyin, romanian, russian, samin, 
slovene, usorbian, serbian, swedish, turkish, ukrainian, dumylang, nohyphenatio
n, loaded.
(./vnsample.cls
Document Class: vnsample 2005/08/27
(c:/usr/local/share/texmf/tex/latex/base/article.cls
Document Class: article 2005/09/16 v1.4f Standard LaTeX document class
(c:/usr/local/share/texmf/tex/latex/base/size10.clo
File: size10.clo 2005/09/16 v1.4f Standard LaTeX file (size option)
)
\c at part=\count79
\c at section=\count80
\c at subsection=\count81
\c at subsubsection=\count82
\c at paragraph=\count83
\c at subparagraph=\count84
\c at figure=\count85
\c at table=\count86
\abovecaptionskip=\skip41
\belowcaptionskip=\skip42
\bibindent=\dimen102
)
(c:/usr/local/share/texmf/tex/generic/oberdiek/ifpdf.sty
Package: ifpdf 2006/02/20 v1.4 Provides the ifpdf switch (HO)
Package ifpdf Info: pdfTeX in pdf mode detected.
)
(c:/usr/local/share/texmf/tex/latex/vntex/vietnam.sty
Package: vietnam 2006/10/18 v1.2 support for Vietnamese

(c:/usr/local/share/texmf/tex/latex/base/ifthen.sty
Package: ifthen 2001/05/26 v1.1c Standard LaTeX ifthen package (DPC)
)
(c:/usr/local/share/texmf/tex/latex/base/fontenc.sty
Package: fontenc 2005/09/27 v1.99g Standard LaTeX package

(c:/usr/local/share/texmf/tex/latex/vntex/t5enc.def
File: t5enc.def 2006/11/21 v1.4 Vietnamese T5 encoding
)
LaTeX Font Info:    Try loading font information for T5+cmr on input line 100.

(c:/usr/local/share/texmf/tex/latex/vntex/t5cmr.fd
File: t5cmr.fd 1999/05/25 v2.5h Standard LaTeX font definitions
))
(c:/usr/local/share/texmf/tex/latex/base/inputenc.sty
Package: inputenc 2006/03/04 v1.1b Input encoding file
\inpenc at prehook=\toks14
\inpenc at posthook=\toks15

(c:/usr/local/share/texmf/tex/latex/vntex/viscii.def
File: viscii.def 2005/04/21 v1.1 VISCII Vietnamese input encoding
))
(c:/usr/local/share/texmf/tex/latex/vntex/vncaps.tex
File: vncaps.tex 2006/06/07 v1.1 Captions in Vietnamese
))
(c:/usr/local/share/texmf/tex/latex/tools/multicol.sty
Package: multicol 2006/02/23 v1.6g multicolumn formatting (FMi)
\c at tracingmulticols=\count87
\mult at box=\box26
\multicol at leftmargin=\dimen103
\c at unbalance=\count88
\c at collectmore=\count89
\doublecol at number=\count90
\multicoltolerance=\count91
\multicolpretolerance=\count92
\full at width=\dimen104
\page at free=\dimen105
\premulticols=\dimen106
\postmulticols=\dimen107
\multicolsep=\skip43
\multicolbaselineskip=\skip44
\partial at page=\box27
\last at line=\box28
\mult at rightbox=\box29
\mult at grightbox=\box30
\mult at gfirstbox=\box31
\mult at firstbox=\box32
\@tempa=\box33
\@tempa=\box34
\@tempa=\box35
\@tempa=\box36
\@tempa=\box37
\@tempa=\box38
\@tempa=\box39
\@tempa=\box40
\@tempa=\box41
\@tempa=\box42
\@tempa=\box43
\@tempa=\box44
\@tempa=\box45
\@tempa=\box46
\@tempa=\box47
\@tempa=\box48
\@tempa=\box49
\c at columnbadness=\count93
\c at finalcolumnbadness=\count94
\last at try=\dimen108
\multicolovershoot=\dimen109
\multicolundershoot=\dimen110
\mult at nat@firstbox=\box50
\colbreak at box=\box51
)
(c:/usr/local/share/texmf/tex/latex/misc/geometry.sty
Package: geometry 2002/07/08 v3.2 Page Geometry

(c:/usr/local/share/texmf/tex/latex/graphics/keyval.sty
Package: keyval 1999/03/16 v1.13 key=value parser (DPC)
\KV at toks@=\toks16
)
\Gm at cnth=\count95
\Gm at cntv=\count96
\c at Gm@tempcnt=\count97
\Gm at bindingoffset=\dimen111
\Gm at wd@mp=\dimen112
\Gm at odd@mp=\dimen113
\Gm at even@mp=\dimen114
\Gm at dimlist=\toks17

(c:/usr/local/share/texmf/tex/latex/misc/geometry.cfg))
(c:/usr/local/share/texmf/tex/latex/tools/array.sty
Package: array 2005/08/23 v2.4b Tabular extension package (FMi)
\col at sep=\dimen115
\extrarowheight=\dimen116
\NC at list=\toks18
\extratabsurround=\skip45
\backup at length=\skip46
)
(c:/usr/local/share/texmf/tex/latex/fancyhdr/fancyhdr.sty
\fancy at headwidth=\skip47
\f at ncyO@elh=\skip48
\f at ncyO@erh=\skip49
\f at ncyO@olh=\skip50
\f at ncyO@orh=\skip51
\f at ncyO@elf=\skip52
\f at ncyO@erf=\skip53
\f at ncyO@olf=\skip54
\f at ncyO@orf=\skip55
)
\dimenA=\dimen117
\boxA=\box52
\boxB=\box53
) (./urwvn-test.aux)
\openout1 = `urwvn-test.aux'.

LaTeX Font Info:    Checking defaults for OML/cmm/m/it on input line 9.
LaTeX Font Info:    ... okay on input line 9.
LaTeX Font Info:    Checking defaults for T1/cmr/m/n on input line 9.
LaTeX Font Info:    ... okay on input line 9.
LaTeX Font Info:    Checking defaults for OT1/cmr/m/n on input line 9.
LaTeX Font Info:    ... okay on input line 9.
LaTeX Font Info:    Checking defaults for OMS/cmsy/m/n on input line 9.
LaTeX Font Info:    ... okay on input line 9.
LaTeX Font Info:    Checking defaults for OMX/cmex/m/n on input line 9.
LaTeX Font Info:    ... okay on input line 9.
LaTeX Font Info:    Checking defaults for U/cmr/m/n on input line 9.
LaTeX Font Info:    ... okay on input line 9.
LaTeX Font Info:    Checking defaults for T5/cmr/m/n on input line 9.
LaTeX Font Info:    ... okay on input line 9.
-------------------- Geometry parameters
paper: a4paper
landscape: true
twocolumn: --
twoside: --
asymmetric: --
h-parts: 28.45274pt, 788.14136pt, 28.45274pt
v-parts: 28.45274pt, 540.60239pt, 28.45274pt
hmarginratio: --
vmarginratio: --
lines: --
heightrounded: --
bindingoffset: 0.0pt
truedimen: --
includehead: --
includefoot: --
includemp: --
driver: pdftex
-------------------- Page layout dimensions and switches
\paperwidth  845.04684pt
\paperheight 597.50787pt
\textwidth  788.14136pt
\textheight 540.60239pt
\oddsidemargin  -63.73416pt
\evensidemargin -63.73416pt
\topmargin  -43.81725pt
\headheight 0.0pt
\headsep    0.0pt
\footskip   0.0pt
\marginparwidth 57.0pt
\marginparsep   11.0pt
\columnsep  10.0pt
\skip\footins  9.0pt plus 4.0pt minus 2.0pt
\hoffset 0.0pt
\voffset 0.0pt
\mag 1000

(1in=72.27pt, 1cm=28.45pt)
-----------------------
LaTeX Font Info:    External font `cmex10' loaded for size
(Font)              <7> on input line 10.
LaTeX Font Info:    External font `cmex10' loaded for size
(Font)              <5> on input line 10.
LaTeX Font Info:    Try loading font information for T5+uag on input line 11.

(c:/usr/local/share/texmf/tex/latex/vntex/t5uag.fd
File: t5uag.fd 2005/08/24 Fontinst v1.929 font definitions for T5/uag.
)
LaTeX Font Info:    Try loading font information for T5+ubk on input line 18.

(c:/usr/local/share/texmf/tex/latex/vntex/t5ubk.fd
File: t5ubk.fd 2005/08/24 Fontinst v1.929 font definitions for T5/ubk.
)
LaTeX Font Info:    Try loading font information for T5+ucr on input line 27.

(c:/usr/local/share/texmf/tex/latex/vntex/t5ucr.fd
File: t5ucr.fd 2005/08/24 Fontinst v1.929 font definitions for T5/ucr.
)
LaTeX Font Info:    Try loading font information for T5+uhv on input line 34.

(c:/usr/local/share/texmf/tex/latex/vntex/t5uhv.fd
File: t5uhv.fd 2005/08/24 Fontinst v1.929 font definitions for T5/uhv.
) [1

{c:/usr/local/share/texmf/fonts/map/pdftex/updmap/pdftex.map}]
LaTeX Font Info:    Try loading font information for T5+unc on input line 43.

(c:/usr/local/share/texmf/tex/latex/vntex/t5unc.fd
File: t5unc.fd 2005/08/24 Fontinst v1.929 font definitions for T5/unc.
)
LaTeX Font Info:    Try loading font information for T5+upl on input line 52.

(c:/usr/local/share/texmf/tex/latex/vntex/t5upl.fd
File: t5upl.fd 2005/08/24 Fontinst v1.929 font definitions for T5/upl.
)
LaTeX Font Info:    Try loading font information for T5+fpl on input line 59.

(c:/usr/local/share/texmf/tex/latex/vntex/t5fpl.fd
File: t5fpl.fd 2005/09/13 font definitions for T5/fpl.
)
LaTeX Font Info:    Try loading font information for T5+utm on input line 64.

(c:/usr/local/share/texmf/tex/latex/vntex/t5utm.fd
File: t5utm.fd 2005/08/24 Fontinst v1.929 font definitions for T5/utm.
) [2

]
LaTeX Font Info:    Try loading font information for T5+pag on input line 75.

(c:/usr/local/share/texmf/tex/latex/vntex/t5pag.fd
File: t5uag.fd 2005/08/24 Fontinst v1.929 font definitions for T5/pag.
)
LaTeX Font Info:    Try loading font information for T5+pbk on input line 82.

(c:/usr/local/share/texmf/tex/latex/vntex/t5pbk.fd
File: t5ubk.fd 2005/08/24 Fontinst v1.929 font definitions for T5/pbk.
)
LaTeX Font Info:    Try loading font information for T5+pcr on input line 91.

(c:/usr/local/share/texmf/tex/latex/vntex/t5pcr.fd
File: t5ucr.fd 2005/08/24 Fontinst v1.929 font definitions for T5/pcr.
)
LaTeX Font Info:    Try loading font information for T5+phv on input line 98.

(c:/usr/local/share/texmf/tex/latex/vntex/t5phv.fd
File: t5uhv.fd 2005/08/24 Fontinst v1.929 font definitions for T5/phv.
) [3

]
LaTeX Font Info:    Try loading font information for T5+pnc on input line 107.

(c:/usr/local/share/texmf/tex/latex/vntex/t5pnc.fd
File: t5unc.fd 2005/08/24 Fontinst v1.929 font definitions for T5/pnc.
)
LaTeX Font Info:    Try loading font information for T5+ppl on input line 116.

(c:/usr/local/share/texmf/tex/latex/vntex/t5ppl.fd
File: t5upl.fd 2005/08/24 Fontinst v1.929 font definitions for T5/ppl.
)
LaTeX Font Info:    Try loading font information for T5+ptm on input line 128.

(c:/usr/local/share/texmf/tex/latex/vntex/t5ptm.fd
File: t5utm.fd 2005/08/24 Fontinst v1.929 font definitions for T5/ptm.
)
LaTeX Font Info:    Try loading font information for T5+uzcm on input line 136.


(c:/usr/local/share/texmf/tex/latex/vntex/t5uzcm.fd
File: t5uzcm.fd 2005/09/05 Fontinst v1.929 font definitions for T5/uzcm.
) [4

] (./urwvn-test.aux) ) 
Here is how much of TeX's memory you used:
 2046 strings out of 94125
 25552 string characters out of 1168495
 75062 words of memory out of 1500000
 5249 multiletter control sequences out of 10000+50000
 154501 words of font info for 82 fonts, out of 2000000 for 2000
 679 hyphenation exceptions out of 8191
 35i,7n,45p,189b,220s stack positions out of 3000i,500n,5000p,300000b,5000s
{c:/usr/local/share/texmf/fonts/enc/dvips/base/t5.enc}<c:
/usr/local/share/texmf/fonts/type1/bluesky/cmtt10.pfb><c:/usr/local/share/texmf
/fonts/type1/vntex/urwvn/fplrc8v.pfb><c:/usr/local/share/texmf/fonts/type1/vnte
x/urwvn/uagd8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/uagdo8v.pf
b><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/uagk8v.pfb><c:/usr/local/sh
are/texmf/fonts/type1/vntex/urwvn/uagko8v.pfb><c:/usr/local/share/texmf/fonts/t
ype1/vntex/urwvn/ubkd8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/u
bkd8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/ubkdi8v.pfb><c:/usr
/local/share/texmf/fonts/type1/vntex/urwvn/ubkl8v.pfb><c:/usr/local/share/texmf
/fonts/type1/vntex/urwvn/ubkl8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex
/urwvn/ubkli8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/ucrb8v.pfb
><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/ucrbo8v.pfb><c:/usr/local/sh
are/texmf/fonts/type1/vntex/urwvn/ucrr8v.pfb><c:/usr/local/share/texmf/fonts/ty
pe1/vntex/urwvn/ucrro8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/u
hvb8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/uhvbo8v.pfb><c:/usr
/local/share/texmf/fonts/type1/vntex/urwvn/uhvr8v.pfb><c:/usr/local/share/texmf
/fonts/type1/vntex/urwvn/uhvro8v.pfb><c:/usr/local/share/texmf/fonts/type1/vnte
x/urwvn/uncb8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/uncb8v.pfb
><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/uncbi8v.pfb><c:/usr/local/sh
are/texmf/fonts/type1/vntex/urwvn/uncr8v.pfb><c:/usr/local/share/texmf/fonts/ty
pe1/vntex/urwvn/uncr8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/un
cri8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/uplb8v.pfb><c:/usr/
local/share/texmf/fonts/type1/vntex/urwvn/uplb8v.pfb><c:/usr/local/share/texmf/
fonts/type1/vntex/urwvn/uplbi8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex
/urwvn/uplr8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/uplr8v.pfb>
<c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/uplri8v.pfb><c:/usr/local/sha
re/texmf/fonts/type1/vntex/urwvn/utmb8v.pfb><c:/usr/local/share/texmf/fonts/typ
e1/vntex/urwvn/utmb8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/utm
bi8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/urwvn/utmr8v.pfb><c:/usr/l
ocal/share/texmf/fonts/type1/vntex/urwvn/utmr8v.pfb><c:/usr/local/share/texmf/f
onts/type1/vntex/urwvn/utmri8v.pfb><c:/usr/local/share/texmf/fonts/type1/vntex/
urwvn/uzcmi8v.pfb>
Output written on urwvn-test.pdf (4 pages, 713906 bytes).
PDF statistics:
 172 PDF objects out of 1000 (max. 8388607)
 0 named destinations out of 1000 (max. 131072)
 1 words of extra memory for PDF output out of 10000 (max. 10000000)


From hartmut_henkel at gmx.de  Thu Dec 28 05:48:18 2006
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu, 28 Dec 2006 05:48:18 +0100 (CET)
Subject: [NTG-pdftex] [tex-live] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <17810.1353.529121.878552@zarniwoop.ms25.local>
References: <17810.1353.529121.878552@zarniwoop.ms25.local>
Message-ID: <Pine.LNX.4.64.0612280533510.3056@hahepc1.hahe>

On Wed, 27 Dec 2006, Reinhard Kotucha wrote:

> I'm trying to run the vntex testfiles with the current pdftex release
> recently uploaded to the TeXLive repository by Martin.
>
> Can anybody tell me what the warnings mean?
>
> pdfTeX warning (\pdffontattr): font \^^@ has conflicting attributes

in the intended cases it means, that it was tried to add two different
font attributes to the same font dictionary. But here is a case where
this happens even without:

\pdfcompresslevel=0
\nopagenumbers
\font\aa cmr10 at 10pt
\pdffontattr\aa {foo}
\aa abc
\font\bb cmr10 at 11pt
%\pdffontattr\bb {bar}
\bb abc
\bye

Both TeX fonts refer to the same font dictionary. So there is only one
font, and this gets the attribute "foo".

> I get a lot of these messages.  The (pdf) output seems to be ok.

The above source creates the right PDF. Maybe we need to get rid of the
warning here.

Regards, Hartmut

From kakuto at fsci.fuk.kindai.ac.jp  Thu Dec 28 06:10:40 2006
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu, 28 Dec 2006 14:10:40 +0900
Subject: [NTG-pdftex] [tex-live] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: Your message of "Thu, 28 Dec 2006 05:48:18 +0100 (CET)"
References: <Pine.LNX.4.64.0612280533510.3056@hahepc1.hahe>
Message-ID: <200612280510.kBS5AfZi016290@jupiter.fsci.fuk.kindai.ac.jp>

> in the intended cases it means, that it was tried to add two different
> font attributes to the same font dictionary. But here is a case where
> this happens even without:
> 
> \pdfcompresslevel=0
> \nopagenumbers
> \font\aa cmr10 at 10pt
> \pdffontattr\aa {foo}
> \aa abc
> \font\bb cmr10 at 11pt
> %\pdffontattr\bb {bar}
> \bb abc
> \bye

In the above case, I also encounter the warning.
(Probably test files in vntex may be different.)

Thanks Hartmut,
Akira

From hartmut_henkel at gmx.de  Thu Dec 28 06:38:51 2006
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu, 28 Dec 2006 06:38:51 +0100 (CET)
Subject: [NTG-pdftex] [tex-live] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <Pine.LNX.4.64.0612280533510.3056@hahepc1.hahe>
References: <17810.1353.529121.878552@zarniwoop.ms25.local>
	<Pine.LNX.4.64.0612280533510.3056@hahepc1.hahe>
Message-ID: <Pine.LNX.4.64.0612280621140.3139@hahepc1.hahe>

On Thu, 28 Dec 2006, Hartmut Henkel wrote:

> On Wed, 27 Dec 2006, Reinhard Kotucha wrote:
>
> > I'm trying to run the vntex testfiles with the current pdftex
> > release recently uploaded to the TeXLive repository by Martin.
> >
> > Can anybody tell me what the warnings mean?
> >
> > pdfTeX warning (\pdffontattr): font \^^@ has conflicting attributes

is this a nullfont? how does one get it?

> in the intended cases it means, that it was tried to add two different
> font attributes to the same font dictionary. But here is a case where
> this happens even without:
>
> \pdfcompresslevel=0
> \nopagenumbers
> \font\aa cmr10 at 10pt
> \pdffontattr\aa {foo}
> \aa abc
> \font\bb cmr10 at 11pt
> %\pdffontattr\bb {bar}
> \bb abc
> \bye
>
> Both TeX fonts refer to the same font dictionary. So there is only one
> font, and this gets the attribute "foo".
>
> > I get a lot of these messages.  The (pdf) output seems to be ok.
>
> The above source creates the right PDF. Maybe we need to get rid of
> the warning here.

Here is the try of a patch, which also shows what happens with the above
file. Reinhard, does it remove the warnings in your case?

--- pdftex.web.orig	2006-12-21 17:19:20.000000000 +0100
+++ pdftex.web	2006-12-28 06:07:11.771455920 +0100
@@ -19341,6 +19341,8 @@
                 pdf_mark_char(i, j);
         if (length(pdf_font_attr[i]) = 0) and (length(pdf_font_attr[k]) <> 0) then
             pdf_font_attr[i] := pdf_font_attr[k];
+        if (length(pdf_font_attr[k]) = 0) and (length(pdf_font_attr[i]) <> 0) then
+            pdf_font_attr[k] := pdf_font_attr[i];
         if not ((pdf_font_attr[i] = pdf_font_attr[k]) or
            str_eq_str(pdf_font_attr[i], pdf_font_attr[k])) then begin
            pdf_warning("\pdffontattr", "font ", false, false);

An alternative (more complicated) might be that one keeps font
dictionaries separate when the user wants different attributes. No idea
what the typical use of these attributes is.

Regards, Hartmut

From reinhard.kotucha at web.de  Thu Dec 28 18:58:02 2006
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Thu, 28 Dec 2006 18:58:02 +0100
Subject: [NTG-pdftex] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <200612280014.kBS0ExBE014994@jupiter.fsci.fuk.kindai.ac.jp>
References: <17810.63903.873936.264786@zarniwoop.ms25.local>
	<200612280014.kBS0ExBE014994@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <17812.1450.189414.921304@zarniwoop.ms25.local>

>>>>> "Akira" == Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp> writes:

  > I don't encounter the warning also with the urwvn-test.tex.  I
  > send you the terminal output and the logfile.

Hi Akira,
it seems that you don't have cmap.sty in the seach path.

vnsample.cls contains:

\ifpdf\IfFileExists{cmap.sty}{\RequirePackage{cmap}}{}\fi

If I comment out this line the warnings disappear.  There seems to be
a conflict between cmap.sty (1.0e) and current pdftex.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From noreply at sarovar.org  Thu Dec 28 18:55:28 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Thu, 28 Dec 2006 23:25:28 +0530
Subject: [NTG-pdftex] [ pdftex-Feature Requests-421 ] \pdf shell escape
	addition
Message-ID: <E1GzzTU-0005Uy-00@sarovar.org>

Feature Requests item #421, was opened at 2005-08-26 20:32
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=421&group_id=106

>Category: web2c
Group: None
>Status: Closed
Resolution: Accepted
Priority: 5
Submitted By: ivo welch (iaw4)
Assigned to: Taco Hoekwater (taco)
Summary: \pdf shell escape addition

Initial Comment:

I would humbly request that in addition add to \write18
('--shell-escape'), you add a new command, say \input18
(or \pdftexshellinput18), which like \write18 executes
a system() command on its argument, but which then
pushes the stdout output from this shell command into
the stdin stream that TeX is processing.  (no, writing
to a file and then inputting it does not do the job.)

I cannot contribute to the code base of TeX, which
seems like black magic to me.  But I can offer $300 for
this facility.  If someone was planning to spend the
time to do this anyway, this may push him/her over the
margin.  However, it is important to me that this
enters the standard feature set of pdftex, so that it
will persist through future versions, so this would be
part of the bargain here.

regards,

/ivo welch

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2006-06-12 20:11

Message:
Logged In: YES 
user_id=1608

> i.e. even \immediate\closeout doesn't make the file
> immediately visible and fully readable?
> isn't this a bug, if it is so?

it is a bug in certain operating systems, not in TeX ;-)

> btw, how will this work in case of non-immediate
> \openin and \openout? (in case they will end up executed
> during the \shipout?)

The pipes will be opened (and closed, hopefully) during
shipout, not before (just like normal '\openout' files).



----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2006-06-12 18:49

Message:
Logged In: NO 

> one of the reasons why intermediate files don't work
> is that it interferes with flushing of files
> [and the moment that files are seen]

i.e. even \immediate\closeout doesn't make the file
immediately visible and fully readable?
isn't this a bug, if it is so?

nevertheless, the Taco's implementation of this feature
is nice; btw, how will this work in case of non-immediate
\openin and \openout? (in case they will end up executed
during the \shipout?)


----------------------------------------------------------------------

Comment By: Hans Hagen (hagen)
Date: 2006-06-12 11:08

Message:
Logged In: YES 
user_id=927

it may interest you that taco, fabrice an i have been
playing with piping the last couple of weeks; we're still
struggling with decent ways to get around operating system
related problems; in order for such a feature (actually more
generic that you suggest) to work, it must be cross
platform; btw, one of the reasons why intermediate files
don't work is that it interferes with flushing of files [and
the moment that files are seen] 

Hans 

----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2006-06-11 15:36

Message:
Logged In: YES 
user_id=1608

Hi Ivo,

Sorry, I had completely forgotten about this. Attached is a
(preliminary?) patch for openclose.c (in the texk/web2c/lib
directory) that gives this functionality.

It is a really simple thing: if the first character of a
filename for \openin or \openout is a pipe symbol (|), the
filename is assumed to be a request for a pipe to a command
line that is given in the rest of the filename. 

Of course, you need "shell_escape = t" in your texmf.cnf
for this to work.

And whether or not this makes it to the distribution(s) is
not up to me, of course.


Have fun, Taco

-------------------
Two small examples:

\openin1= "|ls -l"
\loop \unless \ifeof1
  \read1 to \cs \message{\meaning\cs}
\repeat

\openout1= "|sort >alphabet.tex"
\write1{b}
\write1{a}
\write1{c}
\closeout1
\bye



----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2006-06-11 04:58

Message:
Logged In: NO 

could you please clarify why "no, writing to a file and then
inputting it does not do the job"?


----------------------------------------------------------------------

Comment By: ivo welch (iaw4)
Date: 2006-06-10 23:05

Message:
Logged In: YES 
user_id=2771


any chance this will happen, taco?  regards, /ivo


----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2005-08-27 09:01

Message:
Logged In: YES 
user_id=1608

I have an idea on how to do this, so I've assigned it to myself

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=496&aid=421&group_id=106

From kakuto at fsci.fuk.kindai.ac.jp  Fri Dec 29 01:45:10 2006
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Fri, 29 Dec 2006 09:45:10 +0900
Subject: [NTG-pdftex] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: Your message of "Thu, 28 Dec 2006 18:58:02 +0100"
References: <17812.1450.189414.921304@zarniwoop.ms25.local>
Message-ID: <200612290045.kBT0jB2G020278@jupiter.fsci.fuk.kindai.ac.jp>

Hi Reinhard,

> it seems that you don't have cmap.sty in the seach path.

I've installed cmap.sty and encountered the same warning.
Thanks very much.

Akira

From reinhard.kotucha at web.de  Fri Dec 29 03:31:16 2006
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 29 Dec 2006 03:31:16 +0100
Subject: [NTG-pdftex] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <200612290045.kBT0jB2G020278@jupiter.fsci.fuk.kindai.ac.jp>
References: <17812.1450.189414.921304@zarniwoop.ms25.local>
	<200612290045.kBT0jB2G020278@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <17812.32244.348728.777640@zarniwoop.ms25.local>

>>>>> "Akira" == Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp> writes:

  > Hi Reinhard,
  >> it seems that you don't have cmap.sty in the seach path.

  > I've installed cmap.sty and encountered the same warning.  Thanks
  > very much.

Ok, that's what I expected.  However, the whole thing is even more
confusing.  I installed the test iso image a few hours ago and I don't
get these messages there.  

The final question is:

What is in the repository and what is on the disk image?

There are obviously two different versions of pdftex-1.40.0-rc4-2.2.
Whenever I switch from the current (svn repository) version to the
version on the disk image or vice versa I have to re-create the format
files.

Martin and Hartmut sent me patches but before I apply them I'd like to
know which one is the latest release.

Both versions claim to be pdftex-1.40.0-rc4-2.2 but I get different
output from "pdftex --version":

The version in the TeXLive repository (now revision 3005) provides the
lines:

Compiled with libpng 1.2.14; using libpng 1.2.14
Compiled with zlib 1.2.3; using zlib 1.2.3
Compiled with xpdf version 3.01

But I don't see these lines when I run "pdftex --version" using the
disk image.

Regards,
  Reinhard

PS: pdftex-1.40.0-rc4-2.2 is obviously not an official release.  It
seems that the string "-2.2" had been inserted manually.  It is
probably better to delegate this task to the version control tool you
are using.  You do not get so nice numbers like "2.2" then any more
but I think it's much better, though.

When you make an official release you can edit the version number
manually.

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From hartmut_henkel at gmx.de  Fri Dec 29 07:32:13 2006
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Fri, 29 Dec 2006 07:32:13 +0100 (CET)
Subject: [NTG-pdftex] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <17812.32244.348728.777640@zarniwoop.ms25.local>
References: <17812.1450.189414.921304@zarniwoop.ms25.local>
	<200612290045.kBT0jB2G020278@jupiter.fsci.fuk.kindai.ac.jp>
	<17812.32244.348728.777640@zarniwoop.ms25.local>
Message-ID: <Pine.LNX.4.64.0612290721001.5770@hahepc1.hahe>

On Fri, 29 Dec 2006, Reinhard Kotucha wrote:
> Ok, that's what I expected.  However, the whole thing is even more
> confusing.  I installed the test iso image a few hours ago and I don't
> get these messages there.
>
> The final question is:
>
> What is in the repository and what is on the disk image?
>
> There are obviously two different versions of pdftex-1.40.0-rc4-2.2.
> Whenever I switch from the current (svn repository) version to the
> version on the disk image or vice versa I have to re-create the format
> files.
>
> Martin and Hartmut sent me patches but before I apply them I'd like to
> know which one is the latest release.
>
> Both versions claim to be pdftex-1.40.0-rc4-2.2 but I get different
> output from "pdftex --version":

fwiw, i patched against the rc4 from sarovar:

a6ead933dcaacfa38960837e9911275f  pdftex-1.40.0-rc4.tar.bz2

Regards, Hartmut


From kakuto at fsci.fuk.kindai.ac.jp  Fri Dec 29 07:39:56 2006
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Fri, 29 Dec 2006 15:39:56 +0900
Subject: [NTG-pdftex] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: Your message of "Fri, 29 Dec 2006 03:31:16 +0100"
References: <17812.32244.348728.777640@zarniwoop.ms25.local>
Message-ID: <200612290639.kBT6dv0w021346@jupiter.fsci.fuk.kindai.ac.jp>

Hi Reinhard,

> The version in the TeXLive repository (now revision 3005) provides the
> lines:
> 
> Compiled with libpng 1.2.14; using libpng 1.2.14
> Compiled with zlib 1.2.3; using zlib 1.2.3
> Compiled with xpdf version 3.01
> 
> But I don't see these lines when I run "pdftex --version" using the
> disk image.

I think Martin's one shows the above lines, because he
updated printversionandexit() in lib.a.

-- 
Akira Kakuto

From martin at oneiros.de  Fri Dec 29 16:13:54 2006
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 29 Dec 2006 16:13:54 +0100
Subject: [NTG-pdftex] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <17812.32244.348728.777640@zarniwoop.ms25.local>
References: <17812.1450.189414.921304@zarniwoop.ms25.local>
	<200612290045.kBT0jB2G020278@jupiter.fsci.fuk.kindai.ac.jp>
	<17812.32244.348728.777640@zarniwoop.ms25.local>
Message-ID: <68c491a60612290713r4ff3601bj98cd5af0e9b893a6@mail.gmail.com>

2006/12/29, Reinhard Kotucha <reinhard.kotucha at web.de>:
> There are obviously two different versions of pdftex-1.40.0-rc4-2.2.

There is and has been only one version in TL, and that is the one on
sarovar (at least that's true for pdftexdir). The rest of the sources
is a bit different (newer) on TL; but the only place that is
significantly different concerns the pipe patch from Taco.

[...]

> PS: pdftex-1.40.0-rc4-2.2 is obviously not an official release.  It
> seems that the string "-2.2" had been inserted manually.  It

The 2.2 is the eTeX version.

Best
   Martin

From reinhard.kotucha at web.de  Sat Dec 30 03:47:42 2006
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 30 Dec 2006 03:47:42 +0100
Subject: [NTG-pdftex] \pdffontattr in pdftex-1.40.0-rc4
In-Reply-To: <Pine.LNX.4.64.0612290721001.5770@hahepc1.hahe>
References: <17812.1450.189414.921304@zarniwoop.ms25.local>
	<200612290045.kBT0jB2G020278@jupiter.fsci.fuk.kindai.ac.jp>
	<17812.32244.348728.777640@zarniwoop.ms25.local>
	<Pine.LNX.4.64.0612290721001.5770@hahepc1.hahe>
Message-ID: <17813.54094.628388.924050@zarniwoop.ms25.local>

>>>>> "Hartmut" == Hartmut Henkel <hartmut_henkel at gmx.de> writes:

  > fwiw, i patched against the rc4 from sarovar:

  > a6ead933dcaacfa38960837e9911275f pdftex-1.40.0-rc4.tar.bz2

Hartmut, the checksum doesn't help because I'm using the files which
Martin checked in.  Is it possible that Martin changed something after
the binaries had been created?

BTW., the content of the directory Master/texmf/doc/pdftex/manual in
the TeXLive repository is from January but I suppose a more recent
version of the manual is available.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From noreply at sarovar.org  Sun Dec 31 14:31:17 2006
From: noreply at sarovar.org (noreply at sarovar.org)
Date: Sun, 31 Dec 2006 19:01:17 +0530
Subject: [NTG-pdftex] [ pdftex-Patches-603 ] Patch ColorStackTransformMatrix
Message-ID: <E1H10mT-0000yt-00@sarovar.org>

Patches item #603, was opened at 2006-09-07 10:35
You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=603&group_id=106

Category: Primitives
Group: v1.40.0
>Status: Closed
Resolution: Accepted
Priority: 8
Submitted By: Heiko Oberdiek (oberdiek)
Assigned to: Martin Schr?der (oneiros)
Summary: Patch ColorStackTransformMatrix

Initial Comment:
Subject: Patch ColorStackTransformMatrix
Date: 2006/09/07
Author: Heiko Oberdiek

The patch is based on pdftex-1.40.0-beta-20060906

It tries to solve two FAQ problems:
* missing color stack
* wrong annotation rectangles (links, anchors)
  if the material was scaled or rotated.

Files:
  ColorStackTransformMatrix.patch
    The patch, apply it in src/texk/web2c/pdftexdir:
    patch <ColorStackTransformMatrix.patch
  pdftex.def
    A modified version that uses the patch if the
    new primitives are found.

A short test file:

\documentclass{article}
\usepackage{color}
\usepackage{pdflscape}
\usepackage{hyperref}
\begin{document}
\tableofcontents
\section{Hello World}
\label{sec:hello}
\textcolor{blue}{Blue\newpage Blue}
\begin{landscape}
See \autoref{sec:hello}.
\end{landscape}
\end{document}

Without the patch:
* Text on first page before "Blue" is blue instead of
black.
* Text on second page is black instead of blue.
* The link frame on page three is misplaced.
With the patch and modified pdftex.def these things are
fixed.

New commands
  % color stack
    * \pdfcolorstackinit
    * \pdfcolorstack
  % matrix transformations
    * \pdfsetmatrix
    * \pdfsave
    * \pdfrestore

Syntax:

  %% expandable commands:
  \pdfcolorstackinit [page] [direct] <general text>

  %% general commands:
  \pdfcolorstack <stack number> <stack action> <general
text>
  \pdfsetmatrix
  \pdfsave
  \pdfrestore

  <stack action> ::= set | push | pop | current
Description for color stack:

  This color stack implementation allows several
  independent stacks (upto 32686):
  * Stacks can be used for other properties than color,
    especially other graphics state parameters.
  * Several "text flows across pages" can be supported
    by color stacks.
    Example: footnotes.

  \pdfcolorstackinit [page] [direct] {<initial value>}
    A stack is initialized by \pdfcolorstackinit. It
    expands to the number of the new stack. The common
    case, the traditinal color stack is already
    initialized as first stack:
      \pdfcolorstackinit page direct {0 g 0 G}
    The keyword "page" means, that this stack is page
    based. At the start of the new page, the current
    stack value is automatically set:
      \textcolor{blue}{A\newpage B}
    The second page with "B" will start with blue
    setting.
    The keyword "direct" has the same meaning as
    "direct" for \pdfliteral.
    If the stack value is set, it is done by an
    equivalent of
      \pdfliteral direct {...}.
    The mandatory argument is the initial value on the
    stack. It should be the default at page start for
    the property, see PDF documentation.

  \pdfcolorstack <stack number> push {<new color>}
    pushes the current value on the stack and sets the
    <new color>.
  \pdfcolorstack <stack number> pop
    pops and sets the current stack value.
  \pdfcolorstack <stack number> current   
    sets the current stack value without changing the
    stack. This is useful for stacks that are
    initialized without keyword "page".
    Thus the page start setting can be set manually.
  \pdfcolorstack <stack number> set {<new color>}   
    The current value is set to <new color>.

  Example (changed pdftex.def):

  \chardef\GPT at colorstack=0 %
  \def\set at color{%
    \pdfcolorstack\GPT at colorstack push{\current at color}%
    \aftergroup\reset at color
  }%
  \def\reset at color{%
    \pdfcolorstack\GPT at colorstack pop\relax
  }%

  If someone wants to add color stack support for
  footnotes, the principle would be:
    \edef\stackfootnote{\pdfcolorstackinit direct{0 g 0
G}}%
    % Then at begin of the footnote area on the page:
    \pdfcolorstack\stackfoonote current\relax
    % During footnote processing the footnote stack is
used:
    \let\GPT at colorstack\stackfoonote

Description for matrix transformations:

  Currently matrix changes are done and hidden inside
  \pdfliteral nodes; pdfTeX doesn't parse its contents
  and does not know the new settings of the transform
  matrix. Thus the patch adds new primitives to save
  pdfTeX from parsing \pdfliteral contents and to
  notify pdfTeX about matrix changes to use them in
  calculating link and anchor positions.

  \pdfsetmatrix{<a> <b> <c> <d>}
    is the equivalent to
    \pdfliteral{<a> <b> <c> <d> 0 0 cm}
  \pdfsave
    is the equivalent to \pdfliteral{q}
  \pdfrestore
    is the equivalent to \pdfliteral{Q}

  Some remarks:
  * TeX already supports translations, thus the matrix
    is limited to four values for scaling and rotating.
  * There are some restrictions about \pdfsave and
    \pdfrestore:
    * They must be properly nested.
    * A pair must start and end in the same group at
      the same level.
    * A pair must start and end at the same position.
    Happily these restrictions are satisfied by the
    graphics package.

  Example (changed pdftex.def):
    \def\Grot at start{%
      \pdfsave
      \pdfsetmatrix{%
        \Grot at cos\space\Grot at sin\space
        \if-\Grot at sin\else-\Grot at sin\fi\space\Grot at cos
      }%
      \wd\z@\z@
    }%
    \def\Grot at end{\pdfrestore}
    \def\Gscale at start{%
      \pdfsave
      \pdfsetmatrix{%
        \Gscale at x\space0 0 \Gscale at y
      }%
    }%  

Have fun
  Heiko <oberdiek at uni-freiburg.de>


----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-12-31 14:31

Message:
Logged In: YES 
user_id=421

This has been included in version 1.40

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-10-17 15:08

Message:
Logged In: YES 
user_id=421

I still get the warning in utils.c :-{

Can you update the pdfTeX manual on this?

----------------------------------------------------------------------

Comment By: Heiko Oberdiek (oberdiek)
Date: 2006-09-12 16:38

Message:
Logged In: YES 
user_id=1276

| Two questions come to mind:
| - how does this patch interact with existing documents,

The design principle is that the patch does not have an
effect if the new primitives are not used (modulo bugs).

| i.e.
| what must be changed when using this patch? Obviously the
| use of \pdfliteral must be checked. Anything else?

LaTeX's color/graphics: pdftex.def that support the
new primitives.

| - does this collide with pdftex's use of the cm? The only
| use of the transformation matrix by pdftex I could find
| concerns magnifications, so that's most likely not a 
| problem.

I had played a little with magnification, but not too
intensively.

| Btw: gcc with -Wall -std=c99 gives this warning:
| ../../../../src/texk/web2c/pdftexdir/utils.c: In function
| ?newcolorstack?:
| ../../../../src/texk/web2c/pdftexdir/utils.c:1366: 
| warning:
| operation on ?colstacks? may be undefined

Assignments to colstacks are controlled by colstack_size,
thus the warnung can be gnored. To avoid the warning
replace
  static colstack_type *colstacks;
by
  static colstack_type *colstacks = NULL;

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>

----------------------------------------------------------------------

Comment By: Martin Schr?der (oneiros)
Date: 2006-09-12 16:06

Message:
Logged In: YES 
user_id=421

Heiko,
thank you very much for your patch. 

Two questions come to mind:
- how does this patch interact with existing documents, i.e.
what must be changed when using this patch? Obviously the
use of \pdfliteral must be checked. Anything else?
- does this collide with pdftex's use of the cm? The only
use of the transformation matrix by pdftex I could find
concerns magnifications, so that's most likely not a problem.

Btw: gcc with -Wall -std=c99 gives this warning:
../../../../src/texk/web2c/pdftexdir/utils.c: In function
?newcolorstack?:
../../../../src/texk/web2c/pdftexdir/utils.c:1366: warning:
operation on ?colstacks? may be undefined

----------------------------------------------------------------------

You can respond by visiting: 
http://sarovar.org/tracker/?func=detail&atid=495&aid=603&group_id=106

