From zdenek.wagner at gmail.com  Thu May  1 18:30:22 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 1 May 2014 18:30:22 +0200
Subject: [tex-live] cs.po
Message-ID: <CAC1phyYEZetO47unugggbB2qYSK8umvmVYtJmmOiv7enm_E++w@mail.gmail.com>

Hi,

attached you will find updated cs.po from revision 33778.

-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140501/71830955/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: cs.po.tar.bz2
Type: application/x-bzip2
Size: 12332 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20140501/71830955/attachment.bz2>

From karl at freefriends.org  Fri May  2 00:46:23 2014
From: karl at freefriends.org (Karl Berry)
Date: Thu, 1 May 2014 22:46:23 +0000
Subject: [tex-live] cs.po
In-Reply-To: <CAC1phyYEZetO47unugggbB2qYSK8umvmVYtJmmOiv7enm_E++w@mail.gmail.com>
Message-ID: <201405012246.s41MkNKg020587@freefriends.org>

    attached you will find updated cs.po from revision 33778.

Thanks Zdenek, installed.

(For the future: better to send .po updates, etc., to tldoc at tug.org, as
a much smaller/more targeted listed.)

karl


From krichter722 at aol.de  Mon May  5 21:07:38 2014
From: krichter722 at aol.de (Karl-Philipp Richter)
Date: Mon, 5 May 2014 21:07:38 +0200
Subject: [tex-live] --help argument broken in install-tl script when
 resuming failed installation
Message-ID: <5367E17A.2080005@aol.de>

Hi together,
I'm addressing myself to this list to report the following bug (as
recommended on http://www.tug.org/texlive/bugs.html):
The install-tl script doesn't seem to display help when it is invoked
with --help after a failed installation (failed during download due to
missing space on disk). It just displays the source code after asking
whether the previous operation ought to be resumed. Invokation without
--help starts the installation as expected (after asking whether the
previous installation ought to be resumed).

All the best,
Karl Richter

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 538 bytes
Desc: OpenPGP digital signature
URL: <http://tug.org/pipermail/tex-live/attachments/20140505/133bb2ff/attachment.bin>

From karl at freefriends.org  Tue May  6 01:15:40 2014
From: karl at freefriends.org (Karl Berry)
Date: Mon, 5 May 2014 23:15:40 +0000
Subject: [tex-live] --help argument broken in install-tl script when
 resuming failed installation
In-Reply-To: <5367E17A.2080005@aol.de>
Message-ID: <201405052315.s45NFe4t022632@freefriends.org>

    The install-tl script doesn't seem to display help when it is invoked
    with --help after a failed installation

Thanks for the report.  Unfortunately I don't think there is any good
way to really solve it, since there's no way to detect what is or isn't
present when the download didn't succeed.  I did put in a fallback so
that the program at least won't try to execute normally if --help was
given, no matter what, although I don't think that is actually what was
happening your case ... sad but true.

Best,
(another) Karl


From krichter722 at aol.de  Tue May  6 02:25:24 2014
From: krichter722 at aol.de (Karl-Philipp Richter)
Date: Tue, 6 May 2014 02:25:24 +0200
Subject: [tex-live] [SCI workcamp D-1.39 forced labour] Re: --help argument
 broken in install-tl script when resuming failed installation
In-Reply-To: <201405052315.s45NFe4t022632@freefriends.org>
References: <201405052315.s45NFe4t022632@freefriends.org>
Message-ID: <53682BF4.6010303@aol.de>

I was wondering "How to preserve files downloaded by install-tl" on
http://tex.stackexchange.com/questions/175380/how-to-preserve-files-downloaded-by-install-tl.
And your reply answers the question or is worth a comment on that at
least. If you have an account there, you might want to answer the
question, if not, I'd like to ask your permission to cite you :)

All the best,
Karl

Am 06.05.2014 01:15, schrieb Karl Berry:
>     The install-tl script doesn't seem to display help when it is invoked
>     with --help after a failed installation
> 
> Thanks for the report.  Unfortunately I don't think there is any good
> way to really solve it, since there's no way to detect what is or isn't
> present when the download didn't succeed.  I did put in a fallback so
> that the program at least won't try to execute normally if --help was
> given, no matter what, although I don't think that is actually what was
> happening your case ... sad but true.
> 
> Best,
> (another) Karl
> 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 538 bytes
Desc: OpenPGP digital signature
URL: <http://tug.org/pipermail/tex-live/attachments/20140506/2f6e7fae/attachment.bin>

From daleif at imf.au.dk  Tue May  6 11:05:58 2014
From: daleif at imf.au.dk (Lars Madsen)
Date: Tue, 6 May 2014 09:05:58 +0000
Subject: [tex-live] xindy vs utf8 latex
Message-ID: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>

Hi

I was wondering, is any work being done on making xindy/texindy work with latex and utf8?

This question highlights the problem and in an answer there is a good workaround.

http://tex.stackexchange.com/q/153858/3929

If a xindy fix is too far in the future, would it make sense to provide the ie2utf script from https://github.com/michal-h21/iec2utf as a part of TL, and perhaps even make some perl wrapper for it, making it easier to use for the casual user?

(is piping available on all platforms?)


/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at imf / More information: http://au.dk/en/daleif at imf



From d.p.carlisle at gmail.com  Tue May  6 11:57:14 2014
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Tue, 6 May 2014 10:57:14 +0100
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
Message-ID: <CAEW6iOhGWUxgxcVeK9DRWQ3DMoc9Vzk3kY+KX6nZwzu6qQXP=A@mail.gmail.com>

On 6 May 2014 10:05, Lars Madsen <daleif at imf.au.dk> wrote:

> Hi
>
> I was wondering, is any work being done on making xindy/texindy work with
> latex and utf8?
>
> This question highlights the problem and in an answer there is a good
> workaround.
>
> http://tex.stackexchange.com/q/153858/3929
>
> If a xindy fix is too far in the future, would it make sense to provide
> the ie2utf script from https://github.com/michal-h21/iec2utf as a part of
> TL, and perhaps even make some perl wrapper for it, making it easier to use
> for the casual user?
>
> (is piping available on all platforms?)
>
>
Rather than make xindy understand LaTeX's somewhat idiosyncratic character
representation it would probably be better to have an option in inputenc to
write index files in utf8. As discussed recently on latex-l there  have
been "modest" (hello Karl:-) changes in this area in the 2014/05/01 latex
release and plans to better support inputenc on xetex/luatex in the near
future.  A requirement for better support would be translation between the
traditional LICR and utf8 characters, so that could probably be also used
here with pdftex auxiliary files.  We have some internal tests although the
lack of \Uchar in xetex and existing bugs in xetex ^^^^ parsing make
supporting xetex tricky at the moment as you can generate the unicode
number but you can not generate a character of that number in xetex
(writing the utf8 from pdftex from latex's internal form wouldn't be hard)

That's not to say the script shouldn't be added to TL (can't comment on
that) more than one way to do something is always useful, but a bug/feature
request in the latex-bug database to address that stackexchange question
would be useful, so we don't forget:-)

David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140506/0079b000/attachment.html>

From zdenek.wagner at gmail.com  Tue May  6 12:14:47 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Tue, 6 May 2014 12:14:47 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <CAEW6iOhGWUxgxcVeK9DRWQ3DMoc9Vzk3kY+KX6nZwzu6qQXP=A@mail.gmail.com>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
 <CAEW6iOhGWUxgxcVeK9DRWQ3DMoc9Vzk3kY+KX6nZwzu6qQXP=A@mail.gmail.com>
Message-ID: <CAC1phyYwmKw8r35Se79bwCBNFaP1eBFubAuZk8f9ax2xuVXc=A@mail.gmail.com>

2014-05-06 11:57 GMT+02:00 David Carlisle <d.p.carlisle at gmail.com>:

>
>
>
> On 6 May 2014 10:05, Lars Madsen <daleif at imf.au.dk> wrote:
>
>> Hi
>>
>> I was wondering, is any work being done on making xindy/texindy work with
>> latex and utf8?
>>
>> This question highlights the problem and in an answer there is a good
>> workaround.
>>
>> http://tex.stackexchange.com/q/153858/3929
>>
>> If a xindy fix is too far in the future, would it make sense to provide
>> the ie2utf script from https://github.com/michal-h21/iec2utf as a part
>> of TL, and perhaps even make some perl wrapper for it, making it easier to
>> use for the casual user?
>>
>> (is piping available on all platforms?)
>>
>>
> Rather than make xindy understand LaTeX's somewhat idiosyncratic character
> representation it would probably be better to have an option in inputenc to
> write index files in utf8. As discussed recently on latex-l there  have
> been "modest" (hello Karl:-) changes in this area in the 2014/05/01 latex
> release and plans to better support inputenc on xetex/luatex in the near
> future.  A requirement for better support would be translation between the
> traditional LICR and utf8 characters, so that could probably be also used
> here with pdftex auxiliary files.
>

I am not sure whether all this can be achieved at the expand processor
level where inputenc works but I know that it is already implemented in
encTeX. I use it regularly for Czech specifying "-I omega" with texindy
(because the input markup is now the same as in omega). I am not sure
whether utf8-t1.tex contains characters needed for Swedish, Norvegian,
Danish (and other European languages) but it will be simple to do that. The
file was prepared by Petr Ol??k for Czech and Slovak, so non-Latin
characters are not present but adding complete Unicode (or preparation of
other tables) should not be a problem.

I am aware only of two problems:
1. url.sty contains some definitions using the ^^ convention which then
looks as illegal UTF-8 character (encxvlna documentation shows how to solve
it)
2. conflict with microtype.sty if protrusion is used (no conflict with font
expansion), solution would require a hook in microtype.


> We have some internal tests although the lack of \Uchar in xetex and
> existing bugs in xetex ^^^^ parsing make supporting xetex tricky at the
> moment as you can generate the unicode number but you can not generate a
> character of that number in xetex (writing the utf8 from pdftex from
> latex's internal form wouldn't be hard)
>
> That's not to say the script shouldn't be added to TL (can't comment on
> that) more than one way to do something is always useful, but a bug/feature
> request in the latex-bug database to address that stackexchange question
> would be useful, so we don't forget:-)
>
> David
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140506/f7e8a4de/attachment.html>

From heiko.oberdiek at googlemail.com  Tue May  6 13:34:01 2014
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Tue, 6 May 2014 13:34:01 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
Message-ID: <5368C8A9.8010603@googlemail.com>

Hello,

On 06.05.2014 11:05, Lars Madsen wrote:
> 
> I was wondering, is any work being done on making xindy/texindy work with latex and utf8?
> 
> This question highlights the problem and in an answer there is a good workaround.
> 
> http://tex.stackexchange.com/q/153858/3929

I have just written an answer:

  http://tex.stackexchange.com/a/175601/16967

It patches `\index` that the UTF-8 byte sequences gets written
rather than `\IeC{<LICR>}`, which seems to confuse xindy.

Yours sincerely
  Heiko Oberdiek


From daleif at imf.au.dk  Tue May  6 14:07:22 2014
From: daleif at imf.au.dk (Lars Madsen)
Date: Tue, 6 May 2014 12:07:22 +0000
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <5368C8A9.8010603@googlemail.com>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>,
 <5368C8A9.8010603@googlemail.com>
Message-ID: <89ECE88578D8F648A22E307DAEE885794A43B589@SRVUNIMBX08.uni.au.dk>

nice one

But we still have to remind users to use

-M lang/<language>/utf8-lang

option to texindy, instead of just

-L <language>

but that is just the way it is I guess

/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at imf / More information: http://au.dk/en/daleif at imf


________________________________________
From: tex-live [tex-live-bounces at tug.org] on behalf of Heiko Oberdiek [heiko.oberdiek at googlemail.com]
Sent: 06 May 2014 13:34
To: tex-live at tug.org
Subject: Re: [tex-live] xindy vs utf8 latex

Hello,

On 06.05.2014 11:05, Lars Madsen wrote:
>
> I was wondering, is any work being done on making xindy/texindy work with latex and utf8?
>
> This question highlights the problem and in an answer there is a good workaround.
>
> http://tex.stackexchange.com/q/153858/3929

I have just written an answer:

  http://tex.stackexchange.com/a/175601/16967

It patches `\index` that the UTF-8 byte sequences gets written
rather than `\IeC{<LICR>}`, which seems to confuse xindy.

Yours sincerely
  Heiko Oberdiek




From zdenek.wagner at gmail.com  Tue May  6 14:26:49 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Tue, 6 May 2014 14:26:49 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <89ECE88578D8F648A22E307DAEE885794A43B589@SRVUNIMBX08.uni.au.dk>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
 <5368C8A9.8010603@googlemail.com>
 <89ECE88578D8F648A22E307DAEE885794A43B589@SRVUNIMBX08.uni.au.dk>
Message-ID: <CAC1phybAds6DKSD0Ez_8-rqcX=LhSzaBnn0Rf64n+nYpuw59ng@mail.gmail.com>

2014-05-06 14:07 GMT+02:00 Lars Madsen <daleif at imf.au.dk>:

> nice one
>
> But we still have to remind users to use
>
> -M lang/<language>/utf8-lang
>
> option to texindy, instead of just
>
> -L <language>
>
> but that is just the way it is I guess
>

Isn't it enough to use -L <language> -C utf8 ?
I do not know, I just guess.

>
> /Lars Madsen
> Institut for Matematik / Department of Mathematics
> Aarhus Universitet / Aarhus University
> Mere info: http://au.dk/daleif at imf / More information:
> http://au.dk/en/daleif at imf
>
>
> ________________________________________
> From: tex-live [tex-live-bounces at tug.org] on behalf of Heiko Oberdiek [
> heiko.oberdiek at googlemail.com]
> Sent: 06 May 2014 13:34
> To: tex-live at tug.org
> Subject: Re: [tex-live] xindy vs utf8 latex
>
> Hello,
>
> On 06.05.2014 11:05, Lars Madsen wrote:
> >
> > I was wondering, is any work being done on making xindy/texindy work
> with latex and utf8?
> >
> > This question highlights the problem and in an answer there is a good
> workaround.
> >
> > http://tex.stackexchange.com/q/153858/3929
>
> I have just written an answer:
>
>   http://tex.stackexchange.com/a/175601/16967
>
> It patches `\index` that the UTF-8 byte sequences gets written
> rather than `\IeC{<LICR>}`, which seems to confuse xindy.
>
> Yours sincerely
>   Heiko Oberdiek
>
>
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140506/5281e0f9/attachment-0001.html>

From usenet at siart.de  Tue May  6 22:19:45 2014
From: usenet at siart.de (Uwe Siart)
Date: Tue, 6 May 2014 22:19:45 +0200
Subject: [tex-live] [pretest] Inconsistency on server
Message-ID: <m3siomirry.fsf@siart.de>

Today's update gave me the messages

tlmgr: inconsistency on the server:
tlmgr: tlp for package luatexja cannot be found, please report.
...
tlmgr: inconsistency on the server:
tlmgr: tlp for package ptex.win32 cannot be found, please report.
...
tlmgr: inconsistency on the server:
tlmgr: tlp for package uptex.win32 cannot be found, please report.

-- 
Uwe



From karl at freefriends.org  Wed May  7 00:40:27 2014
From: karl at freefriends.org (Karl Berry)
Date: Tue, 6 May 2014 22:40:27 +0000
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
Message-ID: <201405062240.s46MeRQY026840@freefriends.org>

If you want a script for whatever purpose to be in TL, it has to be
uploaded to CTAN firs.  I can't even begin to consider it otherwise.

k


From preining at logic.at  Wed May  7 00:42:51 2014
From: preining at logic.at (Norbert Preining)
Date: Wed, 7 May 2014 07:42:51 +0900
Subject: [tex-live] [pretest] Inconsistency on server
In-Reply-To: <m3siomirry.fsf@siart.de>
References: <m3siomirry.fsf@siart.de>
Message-ID: <20140506224251.GO16469@auth.logic.tuwien.ac.at>

On Tue, 06 May 2014, Uwe Siart wrote:
> tlmgr: inconsistency on the server:
> tlmgr: tlp for package luatexja cannot be found, please report.
> ...
> tlmgr: inconsistency on the server:
> tlmgr: tlp for package ptex.win32 cannot be found, please report.
> ...
> tlmgr: inconsistency on the server:
> tlmgr: tlp for package uptex.win32 cannot be found, please report.

Are you using multiple repositories?

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------


From jschrod at acm.org  Wed May  7 02:03:52 2014
From: jschrod at acm.org (Joachim Schrod)
Date: Wed, 7 May 2014 02:03:52 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
Message-ID: <lkbt99$tpf$1@ger.gmane.org>

On 05/06/14 11:05, Lars Madsen wrote:
> Hi
> 
> I was wondering, is any work being done on making xindy/texindy work with latex and utf8?
> 
> This question highlights the problem and in an answer there is a good workaround.
> 
> http://tex.stackexchange.com/q/153858/3929
> 
> If a xindy fix is too far in the future, would it make sense to provide the ie2utf script from https://github.com/michal-h21/iec2utf as a part of TL, and perhaps even make some perl wrapper for it, making it easier to use for the casual user?
> 
> (is piping available on all platforms?)

xindy for TL 2014 will support "-L utf8" texindy option for Latin
scripts. It will not support it for non-Latin scripts. I hope that
most users that used \inputenc{utf8} and who complained about
problems on tex.stackexchange.com will be served by that change.

Support for non-Latin scripts in LICR is hard to do. I recommend
everybody who uses non-Latin scripts to use LuaLaTeX or XeLaTeX.
Then one *must not* use texindy, but xindy. I have enhanced the
texindy man page to tell about that more prominently.

I'm thinking about adding an -I option to texindy that skips all
the heuristics that texindy does and just forwards the call to
xindy. To make that clear: The real difference between the commands
texindy and xindy is that texindy tries to find a markup
normalization for LaTeX Internal Character Representations (LICR).
If one doesn't have LICR in one's raw index, one shouldn't use
texindy. Most advices on tex.stackexchange.com concerning that
problem are simply wrong, do not work, and will produce subtle
problems.

FWIW: IMHO, ie2utf is *not* a good workaround. AFAICS, the author
did not understand how xindy works. If this mailing lists wants
more explanations, I'm willing to post them.

	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod, xindy maintainer
Email: jschrod at acm.org



From jschrod at acm.org  Wed May  7 02:07:35 2014
From: jschrod at acm.org (Joachim Schrod)
Date: Wed, 7 May 2014 02:07:35 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <89ECE88578D8F648A22E307DAEE885794A43B589@SRVUNIMBX08.uni.au.dk>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>, 
 <5368C8A9.8010603@googlemail.com>
 <89ECE88578D8F648A22E307DAEE885794A43B589@SRVUNIMBX08.uni.au.dk>
Message-ID: <lkbtg7$rf$1@ger.gmane.org>

On 05/06/14 14:07, Lars Madsen wrote:
> nice one
> 
> But we still have to remind users to use
> 
> -M lang/<language>/utf8-lang
> 
> option to texindy, instead of just
> 
> -L <language>
> 
> but that is just the way it is I guess

If you do so, you're giving bad advice to users.
Please don't do so.

LICR with Latin scripts => use texindy
(TL 2014 will support -L utf8, thanks to Ulrike Fischer's
contribution.)

LICR with non-Latin scripts => recommend to switch to XeLaTeX or
LuaLaTeX, then use xindy.

Xe(La)TeX or Lua(La)TeX => use xindy

	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod, xindy maintainer
Email: jschrod at acm.org



From jschrod at acm.org  Wed May  7 02:14:28 2014
From: jschrod at acm.org (Joachim Schrod)
Date: Wed, 7 May 2014 02:14:28 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <CAC1phyYwmKw8r35Se79bwCBNFaP1eBFubAuZk8f9ax2xuVXc=A@mail.gmail.com>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
 <CAEW6iOhGWUxgxcVeK9DRWQ3DMoc9Vzk3kY+KX6nZwzu6qQXP=A@mail.gmail.com>
 <CAC1phyYwmKw8r35Se79bwCBNFaP1eBFubAuZk8f9ax2xuVXc=A@mail.gmail.com>
Message-ID: <lkbtt4$633$1@ger.gmane.org>

On 05/06/14 12:14, Zdenek Wagner wrote:
> 
> I am not sure whether all this can be achieved at the expand
> processor level where inputenc works but I know that it is already
> implemented in encTeX. I use it regularly for Czech specifying "-I
> omega" with texindy (because the input markup is now the same as in
> omega).

Please don't spread the word about using "-I omega" with texindy if
you're not really using Omega. If it works for you, fine -- but
please don't recommend it.

"xindy -M texindy" is your command in that case. I recently changed
the texindy man page to emphasize that.

Sigh. I really have to add a "-I <something>" option to texindy
that simply skips all texindy LICR heuristics and simply forwards
that call to "xindy -M texindy".

Anybody got a good proposal how "<something>" should be named?
"non-LICR"? "XeTeX"? "LuaTeX"? All of them?

@Karl: Would such a change in a script be OK for TL 2014?
@Peter: xindy-2.5.1 with just that small change?

	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod, Roedermark, Germany
Email: jschrod at acm.org



From usenet at siart.de  Wed May  7 06:38:48 2014
From: usenet at siart.de (Uwe Siart)
Date: Wed, 7 May 2014 06:38:48 +0200
Subject: [tex-live] [pretest] Inconsistency on server
References: <m3siomirry.fsf@siart.de>
 <20140506224251.GO16469@auth.logic.tuwien.ac.at>
Message-ID: <84r446fbjb.fsf@siart.de>

Norbert Preining <preining at logic.at> writes:

> On Tue, 06 May 2014, Uwe Siart wrote:
>> tlmgr: inconsistency on the server:
>> tlmgr: tlp for package uptex.win32 cannot be found, please report.
>
> Are you using multiple repositories?

No, I don't. Here's my config:

,----
| d:\>tlmgr option showall
| Number of backups to keep (autobackup): 0
| Directory for backups (backupdir): tlpkg/backups
| Create formats on installation (formats): 1
| Create Start menu shortcuts (w32) (desktop_integration): 1
| Change file associations (w32) (fileassocs): 0
| Run tlmgr generate updmap after maps have changed (generate_updmap): (not set)
| Install documentation files (docfiles): 1
| Install source files (srcfiles): 0
| Default package repository (repository): ftp://ftp.cstug.cz/pub/local/tlpretest
| Run postinst code blobs (postcode): 1
| Destination for symlinks for binaries (sys_bin): /usr/local/bin
| Destination for symlinks for info docs (sys_info): /usr/local/share/info
| Destination for symlinks for man pages (sys_man): /usr/local/share/man
| Install for all users (w32) (multiuser): 1
`----

-- 
Uwe



From daleif at imf.au.dk  Wed May  7 10:33:04 2014
From: daleif at imf.au.dk (Lars Madsen)
Date: Wed, 7 May 2014 08:33:04 +0000
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <lkbtg7$rf$1@ger.gmane.org>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>, 
 <5368C8A9.8010603@googlemail.com>
 <89ECE88578D8F648A22E307DAEE885794A43B589@SRVUNIMBX08.uni.au.dk>,
 <lkbtg7$rf$1@ger.gmane.org>
Message-ID: <89ECE88578D8F648A22E307DAEE885794A43CA70@SRVUNIMBX08.uni.au.dk>

when is that version of texindy available for testing?

The texindy in pretest does not support -L utf8

/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at imf / More information: http://au.dk/en/daleif at imf


________________________________________
From: tex-live [tex-live-bounces at tug.org] on behalf of Joachim Schrod [jschrod at acm.org]
Sent: 07 May 2014 02:07
To: tex-live at tug.org
Subject: Re: [tex-live] xindy vs utf8 latex

On 05/06/14 14:07, Lars Madsen wrote:
> nice one
>
> But we still have to remind users to use
>
> -M lang/<language>/utf8-lang
>
> option to texindy, instead of just
>
> -L <language>
>
> but that is just the way it is I guess

If you do so, you're giving bad advice to users.
Please don't do so.

LICR with Latin scripts => use texindy
(TL 2014 will support -L utf8, thanks to Ulrike Fischer's
contribution.)

LICR with non-Latin scripts => recommend to switch to XeLaTeX or
LuaLaTeX, then use xindy.

Xe(La)TeX or Lua(La)TeX => use xindy

        Joachim

--
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod, xindy maintainer
Email: jschrod at acm.org





From jschrod at acm.org  Wed May  7 10:39:44 2014
From: jschrod at acm.org (Joachim Schrod)
Date: Wed, 7 May 2014 10:39:44 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <89ECE88578D8F648A22E307DAEE885794A43CA70@SRVUNIMBX08.uni.au.dk>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
 <5368C8A9.8010603@googlemail.com>
 <89ECE88578D8F648A22E307DAEE885794A43B589@SRVUNIMBX08.uni.au.dk>
 <lkbtg7$rf$1@ger.gmane.org>
 <89ECE88578D8F648A22E307DAEE885794A43CA70@SRVUNIMBX08.uni.au.dk>
Message-ID: <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>

On Wed, May 7, 2014 at 10:33 AM, Lars Madsen <daleif at imf.au.dk> wrote:
> when is that version of texindy available for testing?
>
> The texindy in pretest does not support -L utf8

Peter committed the change in TL SVN at April 28.
I assume the next rebuild will gather them.

Best,
Joachim


From daleif at imf.au.dk  Wed May  7 10:46:51 2014
From: daleif at imf.au.dk (Lars Madsen)
Date: Wed, 7 May 2014 08:46:51 +0000
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
 <5368C8A9.8010603@googlemail.com>
 <89ECE88578D8F648A22E307DAEE885794A43B589@SRVUNIMBX08.uni.au.dk>
 <lkbtg7$rf$1@ger.gmane.org>
 <89ECE88578D8F648A22E307DAEE885794A43CA70@SRVUNIMBX08.uni.au.dk>,
 <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
Message-ID: <89ECE88578D8F648A22E307DAEE885794A43CAA4@SRVUNIMBX08.uni.au.dk>

will wait for those then.

Just out of curiosity what is so wrong with the workaround posted in that TSE answer. Is it because utf8 sorting is very nontriviel?

(I still haven't figuired out how to do proper sorting i mysql on utf8 data)

/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at imf / More information: http://au.dk/en/daleif at imf


________________________________________
From: jschrod at gmail.com [jschrod at gmail.com] on behalf of Joachim Schrod [jschrod at acm.org]
Sent: 07 May 2014 10:39
To: Lars Madsen
Cc: tex-live at tug.org
Subject: Re: [tex-live] xindy vs utf8 latex

On Wed, May 7, 2014 at 10:33 AM, Lars Madsen <daleif at imf.au.dk> wrote:
> when is that version of texindy available for testing?
>
> The texindy in pretest does not support -L utf8

Peter committed the change in TL SVN at April 28.
I assume the next rebuild will gather them.

Best,
Joachim



From usenet at siart.de  Wed May  7 12:26:36 2014
From: usenet at siart.de (Uwe Siart)
Date: Wed, 7 May 2014 12:26:36 +0200
Subject: [tex-live] [pretest] Inconsistency on server
References: <m3siomirry.fsf@siart.de>
 <20140506224251.GO16469@auth.logic.tuwien.ac.at>	<84r446fbjb.fsf@siart.de>
Message-ID: <84d2fpj34z.fsf@siart.de>

Uwe Siart <usenet at siart.de> writes:

> No, I don't. Here's my config:

Could it be related to the rearrangement of the CJK stuff? I observed
that around 40 CJK packages have been autoremoved. But none of the
corresponding *.xz archives were deleted from the repo.

If it helps I can post the respective tlmgr.log entries.

-- 
Uwe



From reinhard.kotucha at web.de  Wed May  7 13:01:01 2014
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 7 May 2014 13:01:01 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <89ECE88578D8F648A22E307DAEE885794A43CAA4@SRVUNIMBX08.uni.au.dk>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
 <5368C8A9.8010603@googlemail.com>
 <89ECE88578D8F648A22E307DAEE885794A43B589@SRVUNIMBX08.uni.au.dk>
 <lkbtg7$rf$1@ger.gmane.org>
 <89ECE88578D8F648A22E307DAEE885794A43CA70@SRVUNIMBX08.uni.au.dk>
 <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
 <89ECE88578D8F648A22E307DAEE885794A43CAA4@SRVUNIMBX08.uni.au.dk>
Message-ID: <21354.4717.76495.888162@zaphod.ms25.net>

On 2014-05-07 at 08:46:51 +0000, Lars Madsen wrote:

 > Just out of curiosity what is so wrong with the workaround posted
 > in that TSE answer. Is it because utf8 sorting is very nontriviel?

Sorting is always non-trivial, even in ASCII:

| Lua 5.2.2  Copyright (C) 1994-2013 Lua.org, PUC-Rio
| > print ('a' < 'Z')
| false

> (I still haven't figuired out how to do proper sorting i mysql on
> utf8 data)

  http://www.unicode.org/reports/tr10/

If you have to support Danish only, you can implement your own sorting
function using a simple lookup table, otherwise you probably need a
library like ICU.

  http://www-01.ibm.com/software/globalization/icu/

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From arthur.reutenauer at normalesup.org  Wed May  7 13:42:56 2014
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Wed, 7 May 2014 12:42:56 +0100
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <21354.4717.76495.888162@zaphod.ms25.net>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
 <5368C8A9.8010603@googlemail.com>
 <89ECE88578D8F648A22E307DAEE885794A43B589@SRVUNIMBX08.uni.au.dk>
 <lkbtg7$rf$1@ger.gmane.org>
 <89ECE88578D8F648A22E307DAEE885794A43CA70@SRVUNIMBX08.uni.au.dk>
 <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
 <89ECE88578D8F648A22E307DAEE885794A43CAA4@SRVUNIMBX08.uni.au.dk>
 <21354.4717.76495.888162@zaphod.ms25.net>
Message-ID: <20140507114256.GB5859@phare.normalesup.org>

  You beat me to it, Reinhard ;-)

  Yes, sorting *is* hard.

	Arthur


From preining at logic.at  Wed May  7 14:49:52 2014
From: preining at logic.at (Norbert Preining)
Date: Wed, 7 May 2014 21:49:52 +0900
Subject: [tex-live] [pretest] Inconsistency on server
In-Reply-To: <84d2fpj34z.fsf@siart.de>
References: <m3siomirry.fsf@siart.de>
 <20140506224251.GO16469@auth.logic.tuwien.ac.at> <84r446fbjb.fsf@siart.de>
 <84d2fpj34z.fsf@siart.de>
Message-ID: <20140507124952.GU16469@auth.logic.tuwien.ac.at>

On Wed, 07 May 2014, Uwe Siart wrote:
> Could it be related to the rearrangement of the CJK stuff? I observed

Hmm, do you have scheme-full installed?

If yes, that should not happen.

But still it is not clear why there should luatexja etc tlp should not be found.

Do you still have the system available? Can you reproduce it?

If yes, can you send me the tlpdb?

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------


From usenet at siart.de  Wed May  7 15:11:31 2014
From: usenet at siart.de (Uwe Siart)
Date: Wed, 7 May 2014 15:11:31 +0200
Subject: [tex-live] [pretest] Inconsistency on server
References: <m3siomirry.fsf@siart.de>
 <20140506224251.GO16469@auth.logic.tuwien.ac.at>	<84r446fbjb.fsf@siart.de>
 <84d2fpj34z.fsf@siart.de>	<20140507124952.GU16469@auth.logic.tuwien.ac.at>
Message-ID: <84bnv9wx6k.fsf@siart.de>

Norbert Preining <preining at logic.at> writes:

> On Wed, 07 May 2014, Uwe Siart wrote:
>> Could it be related to the rearrangement of the CJK stuff? I observed
>
> Hmm, do you have scheme-full installed?

Yes.

> If yes, that should not happen.
> But still it is not clear why there should luatexja etc tlp should not be found.
> Do you still have the system available? Can you reproduce it?

Will send by PM.

-- 
Uwe



From petr at olsak.net  Wed May  7 17:23:27 2014
From: petr at olsak.net (Petr Olsak)
Date: Wed, 7 May 2014 17:23:27 +0200
Subject: [tex-live] [pretest] pdfcsplain is bad linked in x86_64-linux
Message-ID: <alpine.LNX.2.00.1405071712250.24858@newton.feld.cvut.cz>


I have tried the TeXlive 2014, rsync + install today.
The problem is here:

    cd tl2014/bin/x86_64-linux/
    ls -l pdfcsplain
    lrwxrwxrwx 1 olsak math1 6 May  7 15:47 pdfcsplain -> luatex

but pdfcsplain must be a link to pdftex, no to luatex.

The pdfcsplain format is well generated for three engines: pdftex, xetex, 
luatex, but the default engine, when user type pdfcsplain on command line, 
must be pdftex.

Best regards

Petr Olsak



From zdenek.wagner at gmail.com  Wed May  7 18:00:17 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 7 May 2014 18:00:17 +0200
Subject: [tex-live] [pretest] pdfcsplain is bad linked in x86_64-linux
In-Reply-To: <alpine.LNX.2.00.1405071712250.24858@newton.feld.cvut.cz>
References: <alpine.LNX.2.00.1405071712250.24858@newton.feld.cvut.cz>
Message-ID: <CAC1phybEg8JCf4OvjyRz676ztiiQBTUkhvTq_9S=RT8t+X=pUw@mail.gmail.com>

2014-05-07 17:23 GMT+02:00 Petr Olsak <petr at olsak.net>:

>
> I have tried the TeXlive 2014, rsync + install today.
> The problem is here:
>
>    cd tl2014/bin/x86_64-linux/
>    ls -l pdfcsplain
>    lrwxrwxrwx 1 olsak math1 6 May  7 15:47 pdfcsplain -> luatex
>
> but pdfcsplain must be a link to pdftex, no to luatex.
>

I see the same error in i386-linux and armhf-linux, so other platforms
should be verified and fixed as well.

>
> The pdfcsplain format is well generated for three engines: pdftex, xetex,
> luatex, but the default engine, when user type pdfcsplain on command line,
> must be pdftex.
>
> Best regards
>
> Petr Olsak
>
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140507/40ba96c1/attachment.html>

From zdenek.wagner at gmail.com  Wed May  7 18:36:15 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 7 May 2014 18:36:15 +0200
Subject: [tex-live] [pretest] pdfcsplain is bad linked in x86_64-linux
In-Reply-To: <CAC1phybEg8JCf4OvjyRz676ztiiQBTUkhvTq_9S=RT8t+X=pUw@mail.gmail.com>
References: <alpine.LNX.2.00.1405071712250.24858@newton.feld.cvut.cz>
 <CAC1phybEg8JCf4OvjyRz676ztiiQBTUkhvTq_9S=RT8t+X=pUw@mail.gmail.com>
Message-ID: <CAC1phybhohFEhOZ7-fJdRwqby4t45tcL9+-KNa_pj6GReNVDDg@mail.gmail.com>

I have just looked into the svn repository and this is what i see:

$ find Master/bin/ -name 'pdfcsplain*' -ls
12583135    0 lrwxrwxrwx   1 wagner   wagner          6 May  7 18:26
Master/bin/i386-kfreebsd/pdfcsplain -> luatex
12452264    0 lrwxrwxrwx   1 wagner   wagner          6 May  7 18:31
Master/bin/i386-solaris/pdfcsplain -> luatex
12583033    0 lrwxrwxrwx   1 wagner   wagner          6 Apr 18 13:00
Master/bin/amd64-freebsd/pdfcsplain -> luatex
12714052    0 lrwxrwxrwx   1 wagner   wagner          6 May  7 18:27
Master/bin/alpha-linux/pdfcsplain -> luatex
12452136    0 lrwxrwxrwx   1 wagner   wagner          6 Apr 18 13:02
Master/bin/x86_64-linux/pdfcsplain -> luatex
12451982    0 lrwxrwxrwx   1 wagner   wagner          6 May  7 18:28
Master/bin/mipsel-linux/pdfcsplain -> luatex
12452316    0 lrwxrwxrwx   1 wagner   wagner          6 May  7 18:25
Master/bin/x86_64-solaris/pdfcsplain -> luatex
12583077    0 lrwxrwxrwx   1 wagner   wagner          6 Apr 18 13:02
Master/bin/universal-darwin/pdfcsplain -> luatex
73797462    0 lrwxrwxrwx   1 wagner   wagner          6 May  7 18:28
Master/bin/amd64-netbsd/pdfcsplain -> luatex
33425183    0 lrwxrwxrwx   1 wagner   wagner         10 May  7 18:30
Master/bin/x86_64-cygwin/pdfcsplain -> luatex.exe
12714027    0 lrwxrwxrwx   1 wagner   wagner          6 Apr 18 13:03
Master/bin/armel-linux/pdfcsplain -> luatex
12714011    0 lrwxrwxrwx   1 wagner   wagner          6 Apr 18 12:59
Master/bin/x86_64-darwin/pdfcsplain -> luatex
12098991    4 -rwxrwxr-x   1 wagner   wagner       1536 Apr 18 11:10
Master/bin/win32/pdfcsplain.exe
12583176    0 lrwxrwxrwx   1 wagner   wagner         10 May  7 18:28
Master/bin/i386-cygwin/pdfcsplain -> luatex.exe
12452202    0 lrwxrwxrwx   1 wagner   wagner          6 May  7 18:30
Master/bin/amd64-kfreebsd/pdfcsplain -> luatex
73797635    0 lrwxrwxrwx   1 wagner   wagner          6 May  7 18:29
Master/bin/armhf-linux/pdfcsplain -> luatex
73797712    0 lrwxrwxrwx   1 wagner   wagner          6 May  7 18:32
Master/bin/i386-netbsd/pdfcsplain -> luatex
12452353    0 lrwxrwxrwx   1 wagner   wagner          6 May  7 18:26
Master/bin/powerpc-linux/pdfcsplain -> luatex
12583054    0 lrwxrwxrwx   1 wagner   wagner          6 Apr 18 13:01
Master/bin/i386-linux/pdfcsplain -> luatex
12582974    0 lrwxrwxrwx   1 wagner   wagner          6 May  7 18:27
Master/bin/sparc-solaris/pdfcsplain -> luatex
12583099    0 lrwxrwxrwx   1 wagner   wagner          6 Apr 18 13:04
Master/bin/i386-freebsd/pdfcsplain -> luatex

This means that all architectures are affected. I cannot say anything about
win32.


2014-05-07 18:00 GMT+02:00 Zdenek Wagner <zdenek.wagner at gmail.com>:

> 2014-05-07 17:23 GMT+02:00 Petr Olsak <petr at olsak.net>:
>
>
>> I have tried the TeXlive 2014, rsync + install today.
>> The problem is here:
>>
>>    cd tl2014/bin/x86_64-linux/
>>    ls -l pdfcsplain
>>    lrwxrwxrwx 1 olsak math1 6 May  7 15:47 pdfcsplain -> luatex
>>
>> but pdfcsplain must be a link to pdftex, no to luatex.
>>
>
> I see the same error in i386-linux and armhf-linux, so other platforms
> should be verified and fixed as well.
>
>>
>> The pdfcsplain format is well generated for three engines: pdftex, xetex,
>> luatex, but the default engine, when user type pdfcsplain on command line,
>> must be pdftex.
>>
>> Best regards
>>
>> Petr Olsak
>>
>>
>>
>
>
> --
> Zden?k Wagner
> http://hroch486.icpf.cas.cz/wagner/
> http://icebearsoft.euweb.cz
>



-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140507/505b0a33/attachment.html>

From reinhard.kotucha at web.de  Wed May  7 19:08:33 2014
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 7 May 2014 19:08:33 +0200
Subject: [tex-live] [pretest] pdfcsplain is bad linked in x86_64-linux
In-Reply-To: <alpine.LNX.2.00.1405071712250.24858@newton.feld.cvut.cz>
References: <alpine.LNX.2.00.1405071712250.24858@newton.feld.cvut.cz>
Message-ID: <21354.26769.521159.834861@zaphod.ms25.net>

On 2014-05-07 at 17:23:27 +0200, Petr Olsak wrote:

 > 
 > I have tried the TeXlive 2014, rsync + install today.
 > The problem is here:
 > 
 >     cd tl2014/bin/x86_64-linux/
 >     ls -l pdfcsplain
 >     lrwxrwxrwx 1 olsak math1 6 May  7 15:47 pdfcsplain -> luatex
 > 
 > but pdfcsplain must be a link to pdftex, no to luatex.
 > 
 > The pdfcsplain format is well generated for three engines: pdftex,
 > xetex, luatex, but the default engine, when user type pdfcsplain on
 > command line, must be pdftex.

I vaguely remember that the symlinks are created by fmtutil.  If true,
probably the order has to be changed in fmtutil.cnf:

It currently is:

  csplain pdftex - -etex -enc csplain-utf8.ini
  pdfcsplain pdftex - -etex -enc csplain-utf8.ini
  pdfcsplain xetex - -etex csplain.ini
  pdfcsplain luatex - -etex csplain.ini

Could you try 

  csplain pdftex - -etex -enc csplain-utf8.ini
  pdfcsplain xetex - -etex csplain.ini
  pdfcsplain luatex - -etex csplain.ini
  pdfcsplain pdftex - -etex -enc csplain-utf8.ini

instead?  

There can only be one symlink at the end and I would expect that last
one replaces the previous one.

Zden?k, symlinks are generated automatically.  Thus the behavior should
be the same on all platforms.  It would be painful to maintain otherwise. 

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From petr at olsak.net  Wed May  7 19:27:45 2014
From: petr at olsak.net (Petr Olsak)
Date: Wed, 7 May 2014 19:27:45 +0200
Subject: [tex-live] [pretest] pdfcsplain is bad linked in x86_64-linux
In-Reply-To: <21354.26769.521159.834861@zaphod.ms25.net>
References: <alpine.LNX.2.00.1405071712250.24858@newton.feld.cvut.cz>
 <21354.26769.521159.834861@zaphod.ms25.net>
Message-ID: <alpine.LNX.2.00.1405071921040.26158@newton.feld.cvut.cz>



On Wed, 7 May 2014, Reinhard Kotucha wrote:

> I vaguely remember that the symlinks are created by fmtutil.  If true,
> probably the order has to be changed in fmtutil.cnf:
>
> It currently is:
>
>  csplain pdftex - -etex -enc csplain-utf8.ini
>  pdfcsplain pdftex - -etex -enc csplain-utf8.ini
>  pdfcsplain xetex - -etex csplain.ini
>  pdfcsplain luatex - -etex csplain.ini
>
> Could you try
>
>  csplain pdftex - -etex -enc csplain-utf8.ini
>  pdfcsplain xetex - -etex csplain.ini
>  pdfcsplain luatex - -etex csplain.ini
>  pdfcsplain pdftex - -etex -enc csplain-utf8.ini
>
> instead?

This is probably not true. The tl2013 includes the 
same text as tl2014 in fmtutil.cnf, i.e.:

csplain pdftex - -etex -enc csplain-utf8.ini
pdfcsplain pdftex - -etex -enc csplain-utf8.ini
pdfcsplain xetex - -etex csplain.ini
pdfcsplain luatex - -etex csplain.ini

and the symlinks are right (pdfcsplain -> pdftex) in tl2013.

Regards,

Petr Olsak


From hassan.nasermoaddeli at baw.de  Wed May  7 15:26:42 2014
From: hassan.nasermoaddeli at baw.de (Nasermoaddeli, Mohammad Hassan)
Date: Wed, 7 May 2014 15:26:42 +0200
Subject: [tex-live] texlive-extra for OpenSuse
Message-ID: <394205055.3717.1399469202981.open-xchange@ox-c3.karlsruhe.baw.de>

Dear Madam or Sir,
we are using texlive-extra in our project. Whereas other paroject partners are
using Ubunto, We use a SuseLinux and OpenSuse Linux. On our system, we can not
find texlive-extra, so that I can not produce documentaion files for our
project. I get the following error:

kpathsea: Running mktexpk --mfmode / --bdpi 600 --mag 1+57/600 --dpi 657
aicmsy10
mktexpk: Running gsftopk aicmsy10 657
gsftopk(k) version 1.19.2
Cannot find font file aicmsy.enc
grep: aicmsy10.log: Datei oder Verzeichnis nicht gefunden
mktexpk: `gsftopk aicmsy10 657' failed to make aicmsy10.657pk.
kpathsea: Appending font creation commands to missfont.log.
(see the transcript file for additional information)
!pdfTeX error: pdflatex (file aicmsy10): Font aicmsy10 at 657 not found
 ==> Fatal error occurred, no output PDF file produced!
make[2]: *** [refman.pdf] Fehler 1

Could you please help me?

Kind regards

Hassan Nasermoaddlei
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140507/3b6cc0d1/attachment.html>

From zdenek.wagner at gmail.com  Wed May  7 20:34:04 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 7 May 2014 20:34:04 +0200
Subject: [tex-live] [pretest] pdfcsplain is bad linked in x86_64-linux
In-Reply-To: <alpine.LNX.2.00.1405071921040.26158@newton.feld.cvut.cz>
References: <alpine.LNX.2.00.1405071712250.24858@newton.feld.cvut.cz>
 <21354.26769.521159.834861@zaphod.ms25.net>
 <alpine.LNX.2.00.1405071921040.26158@newton.feld.cvut.cz>
Message-ID: <CAC1phyaRAkM+O5kE0nRv5eE7Om26GFw_OQr5FAeS1a1J2Kdvig@mail.gmail.com>

2014-05-07 19:27 GMT+02:00 Petr Olsak <petr at olsak.net>:

>
>
> On Wed, 7 May 2014, Reinhard Kotucha wrote:
>
>  I vaguely remember that the symlinks are created by fmtutil.  If true,
>> probably the order has to be changed in fmtutil.cnf:
>>
>> It currently is:
>>
>>  csplain pdftex - -etex -enc csplain-utf8.ini
>>  pdfcsplain pdftex - -etex -enc csplain-utf8.ini
>>  pdfcsplain xetex - -etex csplain.ini
>>  pdfcsplain luatex - -etex csplain.ini
>>
>> Could you try
>>
>>  csplain pdftex - -etex -enc csplain-utf8.ini
>>  pdfcsplain xetex - -etex csplain.ini
>>  pdfcsplain luatex - -etex csplain.ini
>>  pdfcsplain pdftex - -etex -enc csplain-utf8.ini
>>
>> instead?
>>
>
> This is probably not true. The tl2013 includes the same text as tl2014 in
> fmtutil.cnf, i.e.:
>
> No, as I showed, these symlink exist in the svn repository but fmtutil is
executed after installation. If you look at the log, you will see that they
are added together with all binaries. Since all architectures are affected
(I am not able to check win32), there must be something wrong in the build
procedure.

>
> csplain pdftex - -etex -enc csplain-utf8.ini
> pdfcsplain pdftex - -etex -enc csplain-utf8.ini
> pdfcsplain xetex - -etex csplain.ini
> pdfcsplain luatex - -etex csplain.ini
>
> and the symlinks are right (pdfcsplain -> pdftex) in tl2013.
>
> Regards,
>
> Petr Olsak
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140507/8989e829/attachment.html>

From reinhard.kotucha at web.de  Wed May  7 21:03:46 2014
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 7 May 2014 21:03:46 +0200
Subject: [tex-live] [pretest] pdfcsplain is bad linked in x86_64-linux
In-Reply-To: <alpine.LNX.2.00.1405071921040.26158@newton.feld.cvut.cz>
References: <alpine.LNX.2.00.1405071712250.24858@newton.feld.cvut.cz>
 <21354.26769.521159.834861@zaphod.ms25.net>
 <alpine.LNX.2.00.1405071921040.26158@newton.feld.cvut.cz>
Message-ID: <21354.33682.461088.751067@zaphod.ms25.net>

On 2014-05-07 at 19:27:45 +0200, Petr Olsak wrote:

 > On Wed, 7 May 2014, Reinhard Kotucha wrote:
 > 
 > > I vaguely remember that the symlinks are created by fmtutil.  If true,
 > > probably the order has to be changed in fmtutil.cnf:
 > >
 > > It currently is:
 > >
 > >  csplain pdftex - -etex -enc csplain-utf8.ini
 > >  pdfcsplain pdftex - -etex -enc csplain-utf8.ini
 > >  pdfcsplain xetex - -etex csplain.ini
 > >  pdfcsplain luatex - -etex csplain.ini
 > >
 > > Could you try
 > >
 > >  csplain pdftex - -etex -enc csplain-utf8.ini
 > >  pdfcsplain xetex - -etex csplain.ini
 > >  pdfcsplain luatex - -etex csplain.ini
 > >  pdfcsplain pdftex - -etex -enc csplain-utf8.ini
 > >
 > > instead?
 > 
 > This is probably not true. The tl2013 includes the 
 > same text as tl2014 in fmtutil.cnf, i.e.:
 > 
 > csplain pdftex - -etex -enc csplain-utf8.ini
 > pdfcsplain pdftex - -etex -enc csplain-utf8.ini
 > pdfcsplain xetex - -etex csplain.ini
 > pdfcsplain luatex - -etex csplain.ini
 > 
 > and the symlinks are right (pdfcsplain -> pdftex) in tl2013.

I just checked myself.  Symlinks are not created by fmtutil itself but
by Thomas Esser's texconfig.  When I change fmtutil.cnf as I suggested
and run "texconfig-sys init" I indeed get

  pdfcsplain -> pdftex

However, texconfig is not an option because it's not running on
Windows and doesn't create wrappers for Windows.

BTW, "tlmgr generate fmtutil" restores the original order.

I must admit that I'm not very happy with three (format) files with
the same name in different directories.  Each engine finds the
appropriate format file but it's difficult to maintain symlinks, for
instance.

In general I think that information like this should be in the config
file and the config file should be processed in a deterministic way.
However, since pdfcsplain is the only program which has this problem,
I'm convinced that it's not worth the trouble.  It should be
sufficient to restore the behavior of TL-2013.

IMO it's a pity that fmtutil doesn't maintain the symlinks by itself.
There is no easy way to add such a feature without writing fmtutil
from scratch because we still have two different programs for Unix and
Windows. 

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From zdenek.wagner at gmail.com  Wed May  7 21:14:37 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 7 May 2014 21:14:37 +0200
Subject: [tex-live] [pretest] pdfcsplain is bad linked in x86_64-linux
In-Reply-To: <21354.33682.461088.751067@zaphod.ms25.net>
References: <alpine.LNX.2.00.1405071712250.24858@newton.feld.cvut.cz>
 <21354.26769.521159.834861@zaphod.ms25.net>
 <alpine.LNX.2.00.1405071921040.26158@newton.feld.cvut.cz>
 <21354.33682.461088.751067@zaphod.ms25.net>
Message-ID: <CAC1phyYMiEakFXefLmz9ssR9uL-fV4rQX2KWS6rdE2bTzUsFTw@mail.gmail.com>

2014-05-07 21:03 GMT+02:00 Reinhard Kotucha <reinhard.kotucha at web.de>:

> On 2014-05-07 at 19:27:45 +0200, Petr Olsak wrote:
>
>  > On Wed, 7 May 2014, Reinhard Kotucha wrote:
>  >
>  > > I vaguely remember that the symlinks are created by fmtutil.  If true,
>  > > probably the order has to be changed in fmtutil.cnf:
>  > >
>  > > It currently is:
>  > >
>  > >  csplain pdftex - -etex -enc csplain-utf8.ini
>  > >  pdfcsplain pdftex - -etex -enc csplain-utf8.ini
>  > >  pdfcsplain xetex - -etex csplain.ini
>  > >  pdfcsplain luatex - -etex csplain.ini
>  > >
>  > > Could you try
>  > >
>  > >  csplain pdftex - -etex -enc csplain-utf8.ini
>  > >  pdfcsplain xetex - -etex csplain.ini
>  > >  pdfcsplain luatex - -etex csplain.ini
>  > >  pdfcsplain pdftex - -etex -enc csplain-utf8.ini
>  > >
>  > > instead?
>  >
>  > This is probably not true. The tl2013 includes the
>  > same text as tl2014 in fmtutil.cnf, i.e.:
>  >
>  > csplain pdftex - -etex -enc csplain-utf8.ini
>  > pdfcsplain pdftex - -etex -enc csplain-utf8.ini
>  > pdfcsplain xetex - -etex csplain.ini
>  > pdfcsplain luatex - -etex csplain.ini
>  >
>  > and the symlinks are right (pdfcsplain -> pdftex) in tl2013.
>
> I just checked myself.  Symlinks are not created by fmtutil itself but
> by Thomas Esser's texconfig.  When I change fmtutil.cnf as I suggested
> and run "texconfig-sys init" I indeed get
>

I probably know the reason. I am doing my own build to verify it.

>
>   pdfcsplain -> pdftex
>
> However, texconfig is not an option because it's not running on
> Windows and doesn't create wrappers for Windows.
>
> BTW, "tlmgr generate fmtutil" restores the original order.
>
> I must admit that I'm not very happy with three (format) files with
> the same name in different directories.  Each engine finds the
> appropriate format file but it's difficult to maintain symlinks, for
> instance.
>
> In general I think that information like this should be in the config
> file and the config file should be processed in a deterministic way.
> However, since pdfcsplain is the only program which has this problem,
> I'm convinced that it's not worth the trouble.  It should be
> sufficient to restore the behavior of TL-2013.
>
> IMO it's a pity that fmtutil doesn't maintain the symlinks by itself.
> There is no easy way to add such a feature without writing fmtutil
> from scratch because we still have two different programs for Unix and
> Windows.
>
> Regards,
>   Reinhard
>
> --
>
> ----------------------------------------------------------------------------
> Reinhard Kotucha                                      Phone:
> +49-511-3373112
> Marschnerstr. 25
> D-30167 Hannover                              mailto:
> reinhard.kotucha at web.de
>
> ----------------------------------------------------------------------------
> Microsoft isn't the answer. Microsoft is the question, and the answer is
> NO.
>
> ----------------------------------------------------------------------------
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140507/e4f6f58b/attachment-0001.html>

From zdenek.wagner at gmail.com  Wed May  7 21:43:35 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 7 May 2014 21:43:35 +0200
Subject: [tex-live] [pretest] pdfcsplain is bad linked in x86_64-linux
In-Reply-To: <CAC1phyYMiEakFXefLmz9ssR9uL-fV4rQX2KWS6rdE2bTzUsFTw@mail.gmail.com>
References: <alpine.LNX.2.00.1405071712250.24858@newton.feld.cvut.cz>
 <21354.26769.521159.834861@zaphod.ms25.net>
 <alpine.LNX.2.00.1405071921040.26158@newton.feld.cvut.cz>
 <21354.33682.461088.751067@zaphod.ms25.net>
 <CAC1phyYMiEakFXefLmz9ssR9uL-fV4rQX2KWS6rdE2bTzUsFTw@mail.gmail.com>
Message-ID: <CAC1phyahQN+6EgOUd+6gNgujzBywLLdTddJ-f-9EbeB5X7tpUQ@mail.gmail.com>

Yes, I have it right in my build. The symlinks are created by the texlinks
script invoked bu the run-texlinks target. The script reads fmtutil.cnf.
Thus the only change I made before building is:

$ svn di Build/source/
Index: Build/source/texk/texlive/tl_scripts/fmtutil.cnf
===================================================================
--- Build/source/texk/texlive/tl_scripts/fmtutil.cnf    (revision 33898)
+++ Build/source/texk/texlive/tl_scripts/fmtutil.cnf    (working copy)
@@ -56,9 +56,9 @@
 #
 # from csplain:
 csplain pdftex - -etex -enc csplain-utf8.ini
-pdfcsplain pdftex - -etex -enc csplain-utf8.ini
 pdfcsplain xetex - -etex csplain.ini
 pdfcsplain luatex - -etex csplain.ini
+pdfcsplain pdftex - -etex -enc csplain-utf8.ini
 #
 # from eplain:
 eplain pdftex language.dat -translate-file=cp227.tcx *eplain.ini

Thus the order in fmtutil.cnf is the key to the problem. And why the
problem did not occur in TL 2013? I can even explain this mystery. The
reason is that pdfcsplain for xetex and luatex was missing in TL 2013
pretest, these formats were added later after all binaries as well as the
symlinks were created.


2014-05-07 21:14 GMT+02:00 Zdenek Wagner <zdenek.wagner at gmail.com>:

> 2014-05-07 21:03 GMT+02:00 Reinhard Kotucha <reinhard.kotucha at web.de>:
>
> On 2014-05-07 at 19:27:45 +0200, Petr Olsak wrote:
>>
>>  > On Wed, 7 May 2014, Reinhard Kotucha wrote:
>>  >
>>  > > I vaguely remember that the symlinks are created by fmtutil.  If
>> true,
>>  > > probably the order has to be changed in fmtutil.cnf:
>>  > >
>>  > > It currently is:
>>  > >
>>  > >  csplain pdftex - -etex -enc csplain-utf8.ini
>>  > >  pdfcsplain pdftex - -etex -enc csplain-utf8.ini
>>  > >  pdfcsplain xetex - -etex csplain.ini
>>  > >  pdfcsplain luatex - -etex csplain.ini
>>  > >
>>  > > Could you try
>>  > >
>>  > >  csplain pdftex - -etex -enc csplain-utf8.ini
>>  > >  pdfcsplain xetex - -etex csplain.ini
>>  > >  pdfcsplain luatex - -etex csplain.ini
>>  > >  pdfcsplain pdftex - -etex -enc csplain-utf8.ini
>>  > >
>>  > > instead?
>>  >
>>  > This is probably not true. The tl2013 includes the
>>  > same text as tl2014 in fmtutil.cnf, i.e.:
>>  >
>>  > csplain pdftex - -etex -enc csplain-utf8.ini
>>  > pdfcsplain pdftex - -etex -enc csplain-utf8.ini
>>  > pdfcsplain xetex - -etex csplain.ini
>>  > pdfcsplain luatex - -etex csplain.ini
>>  >
>>  > and the symlinks are right (pdfcsplain -> pdftex) in tl2013.
>>
>> I just checked myself.  Symlinks are not created by fmtutil itself but
>> by Thomas Esser's texconfig.  When I change fmtutil.cnf as I suggested
>> and run "texconfig-sys init" I indeed get
>>
>
> I probably know the reason. I am doing my own build to verify it.
>
>>
>>   pdfcsplain -> pdftex
>>
>> However, texconfig is not an option because it's not running on
>> Windows and doesn't create wrappers for Windows.
>>
>> BTW, "tlmgr generate fmtutil" restores the original order.
>>
>> I must admit that I'm not very happy with three (format) files with
>> the same name in different directories.  Each engine finds the
>> appropriate format file but it's difficult to maintain symlinks, for
>> instance.
>>
>> In general I think that information like this should be in the config
>> file and the config file should be processed in a deterministic way.
>> However, since pdfcsplain is the only program which has this problem,
>> I'm convinced that it's not worth the trouble.  It should be
>> sufficient to restore the behavior of TL-2013.
>>
>> IMO it's a pity that fmtutil doesn't maintain the symlinks by itself.
>> There is no easy way to add such a feature without writing fmtutil
>> from scratch because we still have two different programs for Unix and
>> Windows.
>>
>> Regards,
>>   Reinhard
>>
>> --
>>
>> ----------------------------------------------------------------------------
>> Reinhard Kotucha                                      Phone:
>> +49-511-3373112
>> Marschnerstr. 25
>> D-30167 Hannover                              mailto:
>> reinhard.kotucha at web.de
>>
>> ----------------------------------------------------------------------------
>> Microsoft isn't the answer. Microsoft is the question, and the answer is
>> NO.
>>
>> ----------------------------------------------------------------------------
>>
>>
>
>
> --
> Zden?k Wagner
> http://hroch486.icpf.cas.cz/wagner/
> http://icebearsoft.euweb.cz
>



-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140507/cd78c8ad/attachment.html>

From reinhard.kotucha at web.de  Wed May  7 22:22:11 2014
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 7 May 2014 22:22:11 +0200
Subject: [tex-live] [pretest] pdfcsplain is bad linked in x86_64-linux
In-Reply-To: <CAC1phyaRAkM+O5kE0nRv5eE7Om26GFw_OQr5FAeS1a1J2Kdvig@mail.gmail.com>
References: <alpine.LNX.2.00.1405071712250.24858@newton.feld.cvut.cz>
 <21354.26769.521159.834861@zaphod.ms25.net>
 <alpine.LNX.2.00.1405071921040.26158@newton.feld.cvut.cz>
 <CAC1phyaRAkM+O5kE0nRv5eE7Om26GFw_OQr5FAeS1a1J2Kdvig@mail.gmail.com>
Message-ID: <21354.38387.402028.37388@zaphod.ms25.net>

On 2014-05-07 at 20:34:04 +0200, Zdenek Wagner wrote:

 > > 2014-05-07 19:27 GMT+02:00 Petr Olsak <petr at olsak.net>:
 > > [...]
 > > This is probably not true. The tl2013 includes the same text as
 > > tl2014 in fmtutil.cnf, i.e.:
 > 
 > No, as I showed, these symlink exist in the svn repository but fmtutil
 > is executed after installation. If you look at the log, you will see
 > that they are added together with all binaries. Since all
 > architectures are affected (I am not able to check win32), there must
 > be something wrong in the build procedure.

You are right, the symlinks are already in the .tar.xz packages.  It
seems that we already lost some functionality from teTeX.  It would be
nicer to create symlinks when format files are created.  This sounds
more intuitive to me and is very helpful if you create your own format
files.  Please note that "texconfig init" creates symlinks for all
platforms.  Maybe Norbert could add this functionality to tlmgr as a
higher level interface to fmtutil.  Of course, it's too late for
TL-2014 but maybe worth to be considered for the future.

 > I am not able to check win32

Really?  I can, even without Windows.  Nobody needs Windows.

  $ wine /usr/local/texlive/2014/bin/win32/pdfcsplain.exe --version
  pdfTeX 3.14159265-2.6-1.40.15 (TeX Live 2014/W32TeX)

Petr, I suppose that it's what you expect.  Right?

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From karl at freefriends.org  Wed May  7 23:23:22 2014
From: karl at freefriends.org (Karl Berry)
Date: Wed, 7 May 2014 21:23:22 +0000
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
Message-ID: <201405072123.s47LNMXT002596@freefriends.org>

    Peter committed the change in TL SVN at April 28.
    I assume the next rebuild will gather them.

No, everything has been up to date (in the pretest) since the build of
Apr 28 (it's updated nightly, barring errors).  That is, in all bindirs,
bin/texindy is a symlink to ../texmf-dist/scripts/xindy/texindy.pl, and
that was one of the files Peter updated.  There is nothing to wait for.

    > The texindy in pretest does not support -L utf8

What should be run to determine this?  I looked briefly at the source,
but it wasn't clear to me.

There are certainly a variety of utf8.xdy files in the runtime, that's
all I can see at a glance.

karl


From reinhard.kotucha at web.de  Wed May  7 23:28:34 2014
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 7 May 2014 23:28:34 +0200
Subject: [tex-live] texlive-extra for OpenSuse
In-Reply-To: <394205055.3717.1399469202981.open-xchange@ox-c3.karlsruhe.baw.de>
References: <394205055.3717.1399469202981.open-xchange@ox-c3.karlsruhe.baw.de>
Message-ID: <21354.42370.343981.393600@zaphod.ms25.net>

On 2014-05-07 at 15:26:42 +0200, Nasermoaddeli, Mohammad Hassan wrote:

 > we are using texlive-extra in our project. Whereas other paroject
 > partners are using Ubunto, We use a SuseLinux and OpenSuse
 > Linux. On our system, we can not find texlive-extra, so that I can
 > not produce documentaion files for our project. I get the following
 > error:
 > 
 > kpathsea: Running mktexpk --mfmode / --bdpi 600 --mag 1+57/600 --dpi 657
 > aicmsy10
 > mktexpk: Running gsftopk aicmsy10 657
 > gsftopk(k) version 1.19.2
 > Cannot find font file aicmsy.enc
 > grep: aicmsy10.log: Datei oder Verzeichnis nicht gefunden
 > mktexpk: `gsftopk aicmsy10 657' failed to make aicmsy10.657pk.
 > kpathsea: Appending font creation commands to missfont.log.
 > (see the transcript file for additional information)
 > !pdfTeX error: pdflatex (file aicmsy10): Font aicmsy10 at 657 not found
 >  ==> Fatal error occurred, no output PDF file produced!
 > make[2]: *** [refman.pdf] Fehler 1
 > 
 > Could you please help me?

Not really.  There is obviously no font "aicmsy10" in TeX Live.  It
seems that Ubuntu provides additional fonts.  If so, download and
unpack the Ubuntu package and install the fonts manually in TEXMFLOCAL
or TEXMFHOME.

I strongly recommend to avoid non-standard packages when you have to
collaborate with others.  Simply stick with what generic TeX Live
provides.

It's also advisable to check whether the TeX Live versions you and
your project partners are using are the same.  Not a big problem with
Ubuntu and SuSe, but CentOs provides a TeX Live from the Middle Ages,
for example.

Newer engines like XeTeX or LuaTeX are able to use system fonts i.e.,
fonts in /usr/share/fonts.  Many people are convinced that it's a good
idea but it's a matter of fact that this approach isn't portable at
all.  Please never depend on fonts which are not part of TeX Live if
you have to collaborate with others.

The name "aicmsy10" implies that it's a symbol font which you probably
can't avoid.  In this case you should try to unpack the Ubuntu package
and create a TDS compliant .zip file.  Then you can unpack the .zip
file either in TEXMFLOCAL or TEXMFHOME.  If it's a Type 1 font you
have to add it to the updmap database too.  Consult the manual page.

If you get stuck, let me know.

But please always keep in mind that if you collaborate with others you
can't use features which are not avalable on every platform.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From zdenek.wagner at gmail.com  Wed May  7 23:43:36 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 7 May 2014 23:43:36 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <201405072123.s47LNMXT002596@freefriends.org>
References: <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
 <201405072123.s47LNMXT002596@freefriends.org>
Message-ID: <CAC1phyatcLGwqmZpggiMUEbtADyO3VGsVbL-Yn3fJ_=Qonr2CA@mail.gmail.com>

2014-05-07 23:23 GMT+02:00 Karl Berry <karl at freefriends.org>:

>     Peter committed the change in TL SVN at April 28.
>     I assume the next rebuild will gather them.
>
> No, everything has been up to date (in the pretest) since the build of
> Apr 28 (it's updated nightly, barring errors).  That is, in all bindirs,
> bin/texindy is a symlink to ../texmf-dist/scripts/xindy/texindy.pl, and
> that was one of the files Peter updated.  There is nothing to wait for.
>
>     > The texindy in pretest does not support -L utf8
>
> What should be run to determine this?  I looked briefly at the source,
> but it wasn't clear to me.
>
> There are certainly a variety of utf8.xdy files in the runtime, that's
> all I can see at a glance.
>

What I do not understand is "-L utf8".  As the help says, -L is used to set
the language, -C is used to set the codepage, so I would expect "-C utf8".
For many languages the input may be entered in several codepages, therefore
you should see language/codepage.xdy and thus you will see utf8.xdy
probably for each language. Some languages may even contain variants, for
instance German has two variants.

>
> karl
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140507/3ecbefa5/attachment.html>

From zdenek.wagner at gmail.com  Wed May  7 23:49:31 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 7 May 2014 23:49:31 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <lkbtt4$633$1@ger.gmane.org>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
 <CAEW6iOhGWUxgxcVeK9DRWQ3DMoc9Vzk3kY+KX6nZwzu6qQXP=A@mail.gmail.com>
 <CAC1phyYwmKw8r35Se79bwCBNFaP1eBFubAuZk8f9ax2xuVXc=A@mail.gmail.com>
 <lkbtt4$633$1@ger.gmane.org>
Message-ID: <CAC1phyZCkM0hCRkZdm4Xev=t1GkX+jSoEv9g_SF7O5VNeJVTAA@mail.gmail.com>

2014-05-07 2:14 GMT+02:00 Joachim Schrod <jschrod at acm.org>:

> On 05/06/14 12:14, Zdenek Wagner wrote:
> >
> > I am not sure whether all this can be achieved at the expand
> > processor level where inputenc works but I know that it is already
> > implemented in encTeX. I use it regularly for Czech specifying "-I
> > omega" with texindy (because the input markup is now the same as in
> > omega).
>
> Please don't spread the word about using "-I omega" with texindy if
> you're not really using Omega. If it works for you, fine -- but
> please don't recommend it.
>

This is not a result of blind trial and error, I found it by reading and
examining the code before I tried it.

>
> "xindy -M texindy" is your command in that case. I recently changed
> the texindy man page to emphasize that.
>
> Sigh. I really have to add a "-I <something>" option to texindy
> that simply skips all texindy LICR heuristics and simply forwards
> that call to "xindy -M texindy".
>
> Anybody got a good proposal how "<something>" should be named?
> "non-LICR"? "XeTeX"? "LuaTeX"? All of them?
>

But -I omega does exactly that. Omega works in Unicode so that the files
contain plain UTF8 without LICR. XeTeX does the same, the files are
identical although the engine is different, encTeX without inputenc does
exactly the same. I have not examined LuaTeX but most probably it is the
same case.

>
> @Karl: Would such a change in a script be OK for TL 2014?
> @Peter: xindy-2.5.1 with just that small change?
>
>         Joachim
>
> --
> =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
> Joachim Schrod, Roedermark, Germany
> Email: jschrod at acm.org
>
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140507/37611849/attachment.html>

From preining at logic.at  Thu May  8 00:41:03 2014
From: preining at logic.at (Norbert Preining)
Date: Thu, 8 May 2014 07:41:03 +0900
Subject: [tex-live] [pretest] pdfcsplain is bad linked in x86_64-linux
In-Reply-To: <21354.38387.402028.37388@zaphod.ms25.net>
References: <alpine.LNX.2.00.1405071712250.24858@newton.feld.cvut.cz>
 <21354.26769.521159.834861@zaphod.ms25.net>
 <alpine.LNX.2.00.1405071921040.26158@newton.feld.cvut.cz>
 <CAC1phyaRAkM+O5kE0nRv5eE7Om26GFw_OQr5FAeS1a1J2Kdvig@mail.gmail.com>
 <21354.38387.402028.37388@zaphod.ms25.net>
Message-ID: <20140507224103.GW16469@auth.logic.tuwien.ac.at>

Hi Reinhard, hi all,

> You are right, the symlinks are already in the .tar.xz packages.  It
> seems that we already lost some functionality from teTeX.  It would be

Huu, which functionality? Symlinks were not created in teTeX at 
format build time AFAIR.

> files.  Please note that "texconfig init" creates symlinks for all

Do *NOT* advertise texconfig, please please please.
texconfig is dead. Nobody works on it, nobody adapts it to new things.
It might work in some border cases.

> platforms.  Maybe Norbert could add this functionality to tlmgr as a
> higher level interface to fmtutil.  Of course, it's too late for
> TL-2014 but maybe worth to be considered for the future.

I don't understand what is your target: Do oyou mean when
	fmtutil ... something ...
is run, then links should be generated?

But what about context which has several format dumps for different
languages, but no specific links? And what about the pdfcs* formats
with the same problem?

I don't really see how you propose to solve this, but by *disabling*
all formats and *require* *each* and *every* user to build all
formats by hand? Huuu? That will a desaster!

If you have a better proposal, flesh it out.

Rewriting fmtutil in perl is anyway high up in my list of things
to do for TeX Live ....

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------


From jschrod at acm.org  Thu May  8 01:13:46 2014
From: jschrod at acm.org (Joachim Schrod)
Date: Thu, 8 May 2014 01:13:46 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <89ECE88578D8F648A22E307DAEE885794A43CAA4@SRVUNIMBX08.uni.au.dk>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
 <5368C8A9.8010603@googlemail.com>
 <89ECE88578D8F648A22E307DAEE885794A43B589@SRVUNIMBX08.uni.au.dk>
 <lkbtg7$rf$1@ger.gmane.org>
 <89ECE88578D8F648A22E307DAEE885794A43CA70@SRVUNIMBX08.uni.au.dk>
 <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
 <89ECE88578D8F648A22E307DAEE885794A43CAA4@SRVUNIMBX08.uni.au.dk>
Message-ID: <21354.48682.625558.908115@puma.r.npc.de>

Lars Madsen writes:
> will wait for those then.
> 
> Just out of curiosity what is so wrong with the workaround posted in
> that TSE answer. Is it because utf8 sorting is very nontriviel?

I realized my critic wasn't precise enough. It's not that the
conversion utility is bad, it's the follow up of the commands to be
used after ie2utc.

One important issue: If one has raw index in LICR, texindy -L option
actually has no effect on sorting at all. Instead it *only* defines
the output encoding of the letter group headings -- and just that,
index formatted markup will still be in LICR!! This is definitively a
design error in xindy, but for now we're living with it. Repairing
that design error would mean to redesign and rewrite the whole
encoding show, not likely to be done easily.

Cheers,
	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Joachim Schrod, xindy maintainer. Roedermark, Germany
Email: jschrod at acm.org, http://www.xindy.org/



From jschrod at acm.org  Thu May  8 01:24:13 2014
From: jschrod at acm.org (Joachim Schrod)
Date: Thu, 8 May 2014 01:24:13 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <CAC1phyZCkM0hCRkZdm4Xev=t1GkX+jSoEv9g_SF7O5VNeJVTAA@mail.gmail.com>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
 <CAEW6iOhGWUxgxcVeK9DRWQ3DMoc9Vzk3kY+KX6nZwzu6qQXP=A@mail.gmail.com>
 <CAC1phyYwmKw8r35Se79bwCBNFaP1eBFubAuZk8f9ax2xuVXc=A@mail.gmail.com>
 <lkbtt4$633$1@ger.gmane.org>
 <CAC1phyZCkM0hCRkZdm4Xev=t1GkX+jSoEv9g_SF7O5VNeJVTAA@mail.gmail.com>
Message-ID: <21354.49309.908279.244997@puma.r.npc.de>

Zdenek Wagner writes:
> 2014-05-07 2:14 GMT+02:00 Joachim Schrod <jschrod at acm.org>:
> > On 05/06/14 12:14, Zdenek Wagner wrote:
> > >
> > > I am not sure whether all this can be achieved at the expand
> > > processor level where inputenc works but I know that it is already
> > > implemented in encTeX. I use it regularly for Czech specifying "-I
> > > omega" with texindy (because the input markup is now the same as in
> > > omega).
> >
> > Please don't spread the word about using "-I omega" with texindy if
> > you're not really using Omega. If it works for you, fine -- but
> > please don't recommend it.
> 
> This is not a result of blind trial and error, I found it by reading and
> examining the code before I tried it.

As I am the person who wrote the omega support, I beg to differ about
your interpretation of my own code that I wrote personally.

-I omega has differences in the way tex2xindy handles transformation
of raw LaTeX index files to raw xindy index files. I had several bug
reports that were caused by the recommendation to use -I omega, which
would have been avoided by the recommendation to use "xindy -M texindy".

As I wrote, maybe it's really best to introduce a new -I option, that
combines the behavior of "-I omega" that inputenc heuristics is shut
off but doesn't trigger tex2xindy's Omega special handling code.

Best,
	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Joachim Schrod, xindy maintainer. Roedermark, Germany
Email: jschrod at acm.org, http://www.xindy.org/


From jschrod at acm.org  Thu May  8 01:58:52 2014
From: jschrod at acm.org (Joachim Schrod)
Date: Thu, 8 May 2014 01:58:52 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <20140507114256.GB5859@phare.normalesup.org>
References: <89ECE88578D8F648A22E307DAEE885794A43B45E@SRVUNIMBX08.uni.au.dk>
 <5368C8A9.8010603@googlemail.com>
 <89ECE88578D8F648A22E307DAEE885794A43B589@SRVUNIMBX08.uni.au.dk>
 <lkbtg7$rf$1@ger.gmane.org>
 <89ECE88578D8F648A22E307DAEE885794A43CA70@SRVUNIMBX08.uni.au.dk>
 <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
 <89ECE88578D8F648A22E307DAEE885794A43CAA4@SRVUNIMBX08.uni.au.dk>
 <21354.4717.76495.888162@zaphod.ms25.net>
 <20140507114256.GB5859@phare.normalesup.org>
Message-ID: <lkehbs$6bf$1@ger.gmane.org>

On 05/07/14 13:42, Arthur Reutenauer wrote:
>   You beat me to it, Reinhard ;-)
> 
>   Yes, sorting *is* hard.

That's why xindy was created. :-) It was the attempt to formalize
and resolve the experience that I had from creating Multi-lingual
MakeIndex (v3.0, never widely distributed) that created more
problems than it solved.

It was successful in so far as it created a framework that handles
different sort orders world-wide quite well. It has still
deficiencies in encoding handling -- we didn't understand the
encoding problem space at the time when we wrote xindy, back in
2004. (Yeah, this year is xindy's 10th birthday!!)

The right way to go would actually be to allow an arbitrary input
encoding (including LICR), converting that to UCS-32 (which happens
to be the natural character encoding of the used LISP engine),
define all sort orders in Unicode codepoints (a.k.a. UCS-32)
instead of UTF-8, and define a separate output re-encoding step.

Definitively on the TODO list, but don't hold your breath. :-)

	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod, Roedermark, Germany
Email: jschrod at acm.org



From jschrod at acm.org  Thu May  8 02:02:11 2014
From: jschrod at acm.org (Joachim Schrod)
Date: Thu, 8 May 2014 02:02:11 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <201405072123.s47LNMXT002596@freefriends.org>
References: <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
 <201405072123.s47LNMXT002596@freefriends.org>
Message-ID: <lkehi4$86b$1@ger.gmane.org>

On 05/07/14 23:23, Karl Berry wrote:
>     Peter committed the change in TL SVN at April 28.
>     I assume the next rebuild will gather them.
> 
> No, everything has been up to date (in the pretest) since the build of
> Apr 28 (it's updated nightly, barring errors).  That is, in all bindirs,
> bin/texindy is a symlink to ../texmf-dist/scripts/xindy/texindy.pl, and
> that was one of the files Peter updated.  There is nothing to wait for.
> 
>     > The texindy in pretest does not support -L utf8
> 
> What should be run to determine this?  I looked briefly at the source,
> but it wasn't clear to me.
> 
> There are certainly a variety of utf8.xdy files in the runtime, that's
> all I can see at a glance.

(I'm in a hotel right now, no good access to TL and now chance to
try it out myself.)

In pretest, does a file lib/xindy/modules/tex/inputenc/utf8.xdy
exists? If yes, 2.5.0 is available. If no, we need to determine
what happens.

	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod, Roedermark, Germany
Email: jschrod at acm.org



From jschrod at acm.org  Thu May  8 02:19:02 2014
From: jschrod at acm.org (Joachim Schrod)
Date: Thu, 8 May 2014 02:19:02 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <CAC1phyatcLGwqmZpggiMUEbtADyO3VGsVbL-Yn3fJ_=Qonr2CA@mail.gmail.com>
References: <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
 <201405072123.s47LNMXT002596@freefriends.org>
 <CAC1phyatcLGwqmZpggiMUEbtADyO3VGsVbL-Yn3fJ_=Qonr2CA@mail.gmail.com>
Message-ID: <lkeihn$kkn$1@ger.gmane.org>

On 05/07/14 23:43, Zdenek Wagner wrote:
> 2014-05-07 23:23 GMT+02:00 Karl Berry <karl at freefriends.org
> <mailto:karl at freefriends.org>>:
> 
>         Peter committed the change in TL SVN at April 28.
>         I assume the next rebuild will gather them.
> 
>     No, everything has been up to date (in the pretest) since the
>     build of
>     Apr 28 (it's updated nightly, barring errors).  That is, in all
>     bindirs,
>     bin/texindy is a symlink to
>     ../texmf-dist/scripts/xindy/texindy.pl <http://texindy.pl>, and
>     that was one of the files Peter updated.  There is nothing to
>     wait for.
> 
>         > The texindy in pretest does not support -L utf8
> 
>     What should be run to determine this?  I looked briefly at the
>     source,
>     but it wasn't clear to me.
> 
>     There are certainly a variety of utf8.xdy files in the runtime,
>     that's
>     all I can see at a glance.
> 
> 
> What I do not understand is "-L utf8".  As the help says, -L is
> used to set the language, -C is used to set the codepage, so I
> would expect "-C utf8".

Uumpfh. I'd like to hide in the cellar. If you see me now, I've got
colored with a very red face. My apologies.

Yes, addition of support of "-C utf8" for texindy (for Latin
scripts only) was meant, not "-L utf8". Sorry.

Ulrike Sch?fer supplied the idea how I could supply basic UTF-8
support for Latin scripts raw indexes with LICR encoding. After
all, utf8  inputenc doesn't matter for xindy with these scripts,
that is irrelevant -- the raw indices that are in LICR encoding, we
don't care for the original source encoding. The only case where -C
option value matters is output of letter group headings. Even index
entries in final markup are not relevant, as they use LICR encoding
again.

The current texindy solution is to provide acceptance of LICR
encodings of Latin scripts (and just them) and use -C option to
define the encoding of the letter group headings. Most people in
postings about xindy over-estimate what -C option does. For sorting
of raw indexes in LICR markup, *it's completely irrelevant*. In
fact, sorting works, but the output of letter group headings goes
awry -- and that is the sole flexibility needed for LICR-encoded
raw indexes.

Frankly, this is a design fault in xindy. We need to distinguish
input, sort, and output encoding, but we don't do so. That behavior
is utterly nonsense and should have never survived so long. We're
discussing how to resolve that, in a backward compatible manner.

	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod, Roedermark, Germany
Email: jschrod at acm.org




From reinhard.kotucha at web.de  Thu May  8 05:10:28 2014
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Thu, 8 May 2014 05:10:28 +0200
Subject: [tex-live] [pretest] pdfcsplain is bad linked in x86_64-linux
In-Reply-To: <20140507224103.GW16469@auth.logic.tuwien.ac.at>
References: <alpine.LNX.2.00.1405071712250.24858@newton.feld.cvut.cz>
 <21354.26769.521159.834861@zaphod.ms25.net>
 <alpine.LNX.2.00.1405071921040.26158@newton.feld.cvut.cz>
 <CAC1phyaRAkM+O5kE0nRv5eE7Om26GFw_OQr5FAeS1a1J2Kdvig@mail.gmail.com>
 <21354.38387.402028.37388@zaphod.ms25.net>
 <20140507224103.GW16469@auth.logic.tuwien.ac.at>
Message-ID: <21354.62884.43975.951148@zaphod.ms25.net>

On 2014-05-08 at 07:41:03 +0900, Norbert Preining wrote:

 > Hi Reinhard, hi all,
 > 
 > > You are right, the symlinks are already in the .tar.xz packages.  It
 > > seems that we already lost some functionality from teTeX.  It would be
 > 
 > Huu, which functionality? Symlinks were not created in teTeX at 
 > format build time AFAIR.

Not if you run "fmtutil --all" but if you run "texconfig init".  As I
said, it's a pity that Thomas didn't add the functionality to fmtutil.

 > > files.  Please note that "texconfig init" creates symlinks for all
 > 
 > Do *NOT* advertise texconfig, please please please.
 > texconfig is dead. Nobody works on it, nobody adapts it to new things.
 > It might work in some border cases.

I'm not advertising texconfig.  In a previous mail I said:

 | However, texconfig is not an option because it's not running on
 | Windows and doesn't create wrappers for Windows.

But it's a matter of fact that teTeX's texconfig and TeX Live's tlmgr
behave differently.  I can't describe the differences without
mentioning texconfig.   

 > > platforms.  Maybe Norbert could add this functionality to tlmgr as a
 > > higher level interface to fmtutil.  Of course, it's too late for
 > > TL-2014 but maybe worth to be considered for the future.
 > 
 > I don't understand what is your target: Do oyou mean when
 > 	fmtutil ... something ...
 > is run, then links should be generated?

Yes.  In an ideal world fmtutil would create the symlinks but since
Thomas added the symlink stuff to texconfig and Fabrice ported fmtutil
to C, the only solution is to provide a wrapper which calls fmtutil
and creates the symlinks.

In short: Yes, it would be nice if fmtutil creates the symlinks.

 > But what about context which has several format dumps for different
 > languages, but no specific links? And what about the pdfcs* formats
 > with the same problem?

See below.

 > Rewriting fmtutil in perl is anyway high up in my list of things
 > to do for TeX Live ....

That would be great and offers a lot of new new opportunities.

Your question again:

 > But what about context which has several format dumps for different
 > languages, but no specific links? And what about the pdfcs* formats
 > with the same problem?

Sure, ConTeXt is invoked by scripts and format files are selected by
command-line options, hence no symlinks are needed.  And the
pdfcsplain formats only needs a symlink to pdftex.

As I said before, there is no need to change anything now.  But if you
intend to write fmtutil from scratch, I believe that a variable like
--nosymlink in fmtutil.cnf is quite useful.  At least if the new
fmtutil is supposed to maintain symlinks.  

If you re-write fmtutil in Perl, everything should be feasible. :)

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From usenet at siart.de  Thu May  8 08:42:14 2014
From: usenet at siart.de (Uwe Siart)
Date: Thu, 8 May 2014 08:42:14 +0200
Subject: [tex-live] [pretest] Inconsistency on server
References: <m3siomirry.fsf@siart.de>
 <20140506224251.GO16469@auth.logic.tuwien.ac.at>	<84r446fbjb.fsf@siart.de>
 <84d2fpj34z.fsf@siart.de>	<20140507124952.GU16469@auth.logic.tuwien.ac.at>
 <84bnv9wx6k.fsf@siart.de>
Message-ID: <m3zjis7ovt.fsf@siart.de>

For the record: Problem solved via PM to Norbert.

Indeed I didn't have scheme-full because I deselected TeXworks during
installation. Therefore, I did not automatically receive the new CJK
collections.

We believe that the reported inconsistency warnings were simply due to
an out-of-sync mirror.

-- 
Uwe



From news3 at nililand.de  Thu May  8 13:50:40 2014
From: news3 at nililand.de (Ulrike Fischer)
Date: Thu, 8 May 2014 13:50:40 +0200
Subject: [tex-live] xindy vs utf8 latex
References: <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
 <201405072123.s47LNMXT002596@freefriends.org>
 <CAC1phyatcLGwqmZpggiMUEbtADyO3VGsVbL-Yn3fJ_=Qonr2CA@mail.gmail.com>
 <lkeihn$kkn$1@ger.gmane.org>
Message-ID: <wprvm8unwtf7.dlg@nililand.de>

Am Thu, 8 May 2014 02:19:02 +0200 schrieb Joachim Schrod:


 
> Uumpfh. I'd like to hide in the cellar. If you see me now, I've got
> colored with a very red face. My apologies.
> 
> Yes, addition of support of "-C utf8" for texindy (for Latin
> scripts only) was meant, not "-L utf8". Sorry.
> 
> Ulrike Sch?fer supplied the idea 

It is interesting how many names I have. I have already be called
Sch?fer, Schmitz, M?ller, ...  -- all translations of "one of the
common names" ;-)

-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/




From preining at logic.at  Thu May  8 14:02:20 2014
From: preining at logic.at (Norbert Preining)
Date: Thu, 8 May 2014 21:02:20 +0900
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <wprvm8unwtf7.dlg@nililand.de>
References: <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
 <201405072123.s47LNMXT002596@freefriends.org>
 <CAC1phyatcLGwqmZpggiMUEbtADyO3VGsVbL-Yn3fJ_=Qonr2CA@mail.gmail.com>
 <lkeihn$kkn$1@ger.gmane.org> <wprvm8unwtf7.dlg@nililand.de>
Message-ID: <20140508120220.GL8919@auth.logic.tuwien.ac.at>

Hi

> It is interesting how many names I have. I have already be called
> Sch?fer, Schmitz, M?ller, ...  -- all translations of "one of the
> common names" ;-)

Ulrike, don't worry, even with a very uncommon name like mine, I have
been called all kind of combinations and permutations ;-))))

All the best

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------



From zdenek.wagner at gmail.com  Thu May  8 14:10:49 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 8 May 2014 14:10:49 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <20140508120220.GL8919@auth.logic.tuwien.ac.at>
References: <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
 <201405072123.s47LNMXT002596@freefriends.org>
 <CAC1phyatcLGwqmZpggiMUEbtADyO3VGsVbL-Yn3fJ_=Qonr2CA@mail.gmail.com>
 <lkeihn$kkn$1@ger.gmane.org>	<wprvm8unwtf7.dlg@nililand.de>
 <20140508120220.GL8919@auth.logic.tuwien.ac.at>
Message-ID: <CAC1phyb+AhebDzFS0KPFOC0mQMRk0Z9=8GQTmaipMt_9aDkDUQ@mail.gmail.com>

I recall one French guy who was not able to remember my name so for him I
was Voltaire...


2014-05-08 14:02 GMT+02:00 Norbert Preining <preining at logic.at>:

> Hi
>
> > It is interesting how many names I have. I have already be called
> > Sch?fer, Schmitz, M?ller, ...  -- all translations of "one of the
> > common names" ;-)
>
> Ulrike, don't worry, even with a very uncommon name like mine, I have
> been called all kind of combinations and permutations ;-))))
>
> All the best
>
> Norbert
>
> ------------------------------------------------------------------------
> PREINING, Norbert                               http://www.preining.info
> JAIST, Japan                                 TeX Live & Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
> ------------------------------------------------------------------------
>
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140508/1064c51f/attachment.html>

From dluecking at sbcglobal.net  Wed May  7 20:53:25 2014
From: dluecking at sbcglobal.net (Dan Luecking)
Date: Wed, 7 May 2014 13:53:25 -0500
Subject: [tex-live] [pretest] pdfcsplain is bad linked in  x86_64-linux
Message-ID: <662541.5854.bm@smtp119.sbc.mail.ne1.yahoo.com>

Zdenek Wagner wrote:

 >(I am not able to check win32)

On win32, pdfcsplain.exe is a copy of pdftex.exe -- that is,
it invokes the pdftex engine as proved by:

[C:\test]pdfcsplain
This is pdfTeX, Version 3.14159265-2.6-1.40.15 (TeX Live 2014/W32TeX) 
(preloaded format=pdfcsplain)


Dan

Daniel H. Luecking
Department of Mathematical Sciences
Fayetteville, Arkansas
http://www-cs-faculty.stanford.edu/~knuth/iaq.html 



From d.p.carlisle at gmail.com  Thu May  8 22:56:36 2014
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Thu, 8 May 2014 21:56:36 +0100
Subject: [tex-live] latex keyval update
Message-ID: <CAEW6iOji++TUbU7b5Z-BAGukGOZpDgLc-K5yzNqq0yH83XWEVA@mail.gmail.com>

Sorry but testing in the wild has shown that a bug fix in keyval isn't
compatible with biblatex (in particular)  (as discussed today on latex-l)
and I
have reverted the change.

I have just submitted a revised latex/doc and latex/required/graphics to
ctan (using the standard form)

Just these four files changed

graphics/changes.txt
graphics/keyval.dtx
doc/ltnews21.tex
doc/ltnews21.pdf


sorry to do that just after you'd updated the files.

David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140508/fe6aad02/attachment.html>

From karl at freefriends.org  Fri May  9 00:23:39 2014
From: karl at freefriends.org (Karl Berry)
Date: Thu, 8 May 2014 22:23:39 +0000
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <lkehi4$86b$1@ger.gmane.org>
Message-ID: <201405082223.s48MNdew017019@freefriends.org>

    In pretest, does a file lib/xindy/modules/tex/inputenc/utf8.xdy
    exists? If yes, 2.5.0 is available. 

Not under lib/ (nothing from xindy has been ever under a lib/ directory
in TL), but yes, there is such a file.

$ head texmf-dist/xindy/modules/tex/inputenc/utf8.xdy
;; Generated from recoded latin?.xdy


(merge-rule "\'A" ...
[etc. etc., 178 lines in all according to wc]


Furthermore, xindy -V reports 2.5.0.  I don't think there is any
question that 2.5.0 is installed and has been for a week+.

I think the question is for Lars: why did you find that the utf8 support
is not there?  What did you run that made you think so?  Was it just the
-C vs. -L red herring, maybe?

k


From zdenek.wagner at gmail.com  Fri May  9 00:52:21 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 9 May 2014 00:52:21 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <201405082223.s48MNdew017019@freefriends.org>
References: <lkehi4$86b$1@ger.gmane.org>
 <201405082223.s48MNdew017019@freefriends.org>
Message-ID: <CAC1phyYXLdgRTD4Mroc8DYqG0CTQA3V90XMC3Qr5DTC=OSufsQ@mail.gmail.com>

2014-05-09 0:23 GMT+02:00 Karl Berry <karl at freefriends.org>:

>     In pretest, does a file lib/xindy/modules/tex/inputenc/utf8.xdy
>     exists? If yes, 2.5.0 is available.
>
> Not under lib/ (nothing from xindy has been ever under a lib/ directory
> in TL), but yes, there is such a file.
>
> $ head texmf-dist/xindy/modules/tex/inputenc/utf8.xdy
> ;; Generated from recoded latin?.xdy
>

The file was not present yesterday but I got it a few seconds ago. Maybe
Lars has an installation older than a few seconds.

>
>
> (merge-rule "\'A" ...
> [etc. etc., 178 lines in all according to wc]
>
>
> Furthermore, xindy -V reports 2.5.0.  I don't think there is any
> question that 2.5.0 is installed and has been for a week+.
>
> I think the question is for Lars: why did you find that the utf8 support
> is not there?  What did you run that made you think so?  Was it just the
> -C vs. -L red herring, maybe?
>
> k
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140509/1925aacd/attachment.html>

From daleif at imf.au.dk  Fri May  9 01:04:34 2014
From: daleif at imf.au.dk (Lars Madsen)
Date: Thu, 8 May 2014 23:04:34 +0000
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <201405082223.s48MNdew017019@freefriends.org>
References: <lkehi4$86b$1@ger.gmane.org>,
 <201405082223.s48MNdew017019@freefriends.org>
Message-ID: <89ECE88578D8F648A22E307DAEE885794A44087F@SRVUNIMBX08.uni.au.dk>

I just ran what Joachim mentioned and reported it did not work. Haven't had access to my pretest since, and did not investigate further.

Will test tomorrow

Sent from my tablet using TouchDown

-----Original Message-----
From: Karl Berry [karl at freefriends.org]
Received: fredag, 09 maj 2014, 0:29
To: jschrod at acm.org [jschrod at acm.org]
CC: tex-live at tug.org [tex-live at tug.org]
Subject: Re: [tex-live] xindy vs utf8 latex

    In pretest, does a file lib/xindy/modules/tex/inputenc/utf8.xdy
    exists? If yes, 2.5.0 is available.

Not under lib/ (nothing from xindy has been ever under a lib/ directory
in TL), but yes, there is such a file.

$ head texmf-dist/xindy/modules/tex/inputenc/utf8.xdy
;; Generated from recoded latin?.xdy


(merge-rule "\'A" ...
[etc. etc., 178 lines in all according to wc]


Furthermore, xindy -V reports 2.5.0.  I don't think there is any
question that 2.5.0 is installed and has been for a week+.

I think the question is for Lars: why did you find that the utf8 support
is not there?  What did you run that made you think so?  Was it just the
-C vs. -L red herring, maybe?

k


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140508/bf864ec8/attachment.html>

From karl at freefriends.org  Fri May  9 01:03:33 2014
From: karl at freefriends.org (Karl Berry)
Date: Thu, 8 May 2014 17:03:33 -0600
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <CAC1phyYXLdgRTD4Mroc8DYqG0CTQA3V90XMC3Qr5DTC=OSufsQ@mail.gmail.com>
 (message from Zdenek Wagner on Fri, 9 May 2014 00:52:21 +0200)
Message-ID: <86siojvpoa.fsf@frenzy.freefriends.org>

    The file was not present yesterday 

On the contrary, it has been present in svn since April 28.

I don't keep all the pretests around, but it has been in the pretest
since at least May 5 for sure, since that is the mtime on
archive/xindy.tar.xz, which is where the file exists.
-rw-rw-r-- 1 karl users  136628 May  5 00:21 xindy.tar.xz

If mirrors aren't getting that file, that's a different problem.
I don't check that daily or anything.  They're all up to date now.

I don't understand this apparent problem of people not seeing the up to
date xindy files.  I am not aware of any problems with the nightly
pretestupdate, nor have we been changing the infrastructure, etc.

When there are possible timing problems, I can only suggest looking at
tug.org directly.

Sigh,
karl


From karl at freefriends.org  Fri May  9 01:22:55 2014
From: karl at freefriends.org (Karl Berry)
Date: Thu, 8 May 2014 23:22:55 +0000
Subject: [tex-live] latex update and non-updates
Message-ID: <201405082322.s48NMtav019518@freefriends.org>

FYI, latex2e will appear to be updated tonight (barring unrelated
problems), but no actual update to the content will have happened.
Not worth going into the details.

The real update to latex2e will be coming tomorrow, I dearly hope,
or soon, in any case.

karl


From daleif at imf.au.dk  Fri May  9 01:34:54 2014
From: daleif at imf.au.dk (Lars Madsen)
Date: Thu, 8 May 2014 23:34:54 +0000
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <201405082223.s48MNdew017019@freefriends.org>
References: <lkehi4$86b$1@ger.gmane.org>,
 <201405082223.s48MNdew017019@freefriends.org>
Message-ID: <89ECE88578D8F648A22E307DAEE885794A44089B@SRVUNIMBX08.uni.au.dk>

I just ran what Joachim mentioned and reported it did not work. Haven't had access to my pretest since, and did not investigate further.

Will test tomorrow

Sent from my tablet using TouchDown

-----Original Message-----
From: Karl Berry [karl at freefriends.org]
Received: fredag, 09 maj 2014, 0:29
To: jschrod at acm.org [jschrod at acm.org]
CC: tex-live at tug.org [tex-live at tug.org]
Subject: Re: [tex-live] xindy vs utf8 latex

    In pretest, does a file lib/xindy/modules/tex/inputenc/utf8.xdy
    exists? If yes, 2.5.0 is available.

Not under lib/ (nothing from xindy has been ever under a lib/ directory
in TL), but yes, there is such a file.

$ head texmf-dist/xindy/modules/tex/inputenc/utf8.xdy
;; Generated from recoded latin?.xdy


(merge-rule "\'A" ...
[etc. etc., 178 lines in all according to wc]


Furthermore, xindy -V reports 2.5.0.  I don't think there is any
question that 2.5.0 is installed and has been for a week+.

I think the question is for Lars: why did you find that the utf8 support
is not there?  What did you run that made you think so?  Was it just the
-C vs. -L red herring, maybe?

k


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140508/10e88e18/attachment.html>

From daleif at imf.au.dk  Fri May  9 09:21:38 2014
From: daleif at imf.au.dk (Lars Madsen)
Date: Fri, 9 May 2014 07:21:38 +0000
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <89ECE88578D8F648A22E307DAEE885794A44089B@SRVUNIMBX08.uni.au.dk>
References: <lkehi4$86b$1@ger.gmane.org>,
 <201405082223.s48MNdew017019@freefriends.org>,
 <89ECE88578D8F648A22E307DAEE885794A44089B@SRVUNIMBX08.uni.au.dk>
Message-ID: <89ECE88578D8F648A22E307DAEE885794A440A0B@SRVUNIMBX08.uni.au.dk>

texindy -L danish -C utf8 file.idx

seems to work just fine.




/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at imf / More information: http://au.dk/en/daleif at imf

________________________________
From: tex-live [tex-live-bounces at tug.org] on behalf of Lars Madsen [daleif at imf.au.dk]
Sent: 09 May 2014 01:34
To: jschrod at acm.org; karl at freefriends.org
Cc: tex-live at tug.org
Subject: Re: [tex-live] xindy vs utf8 latex

I just ran what Joachim mentioned and reported it did not work. Haven't had access to my pretest since, and did not investigate further.

Will test tomorrow

Sent from my tablet using TouchDown

-----Original Message-----
From: Karl Berry [karl at freefriends.org]
Received: fredag, 09 maj 2014, 0:29
To: jschrod at acm.org [jschrod at acm.org]
CC: tex-live at tug.org [tex-live at tug.org]
Subject: Re: [tex-live] xindy vs utf8 latex

    In pretest, does a file lib/xindy/modules/tex/inputenc/utf8.xdy
    exists? If yes, 2.5.0 is available.

Not under lib/ (nothing from xindy has been ever under a lib/ directory
in TL), but yes, there is such a file.

$ head texmf-dist/xindy/modules/tex/inputenc/utf8.xdy
;; Generated from recoded latin?.xdy


(merge-rule "\'A" ...
[etc. etc., 178 lines in all according to wc]


Furthermore, xindy -V reports 2.5.0.  I don't think there is any
question that 2.5.0 is installed and has been for a week+.

I think the question is for Lars: why did you find that the utf8 support
is not there?  What did you run that made you think so?  Was it just the
-C vs. -L red herring, maybe?

k


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140509/6a838bc8/attachment-0001.html>

From daleif at imf.au.dk  Fri May  9 09:33:54 2014
From: daleif at imf.au.dk (Lars Madsen)
Date: Fri, 9 May 2014 07:33:54 +0000
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <89ECE88578D8F648A22E307DAEE885794A440A0B@SRVUNIMBX08.uni.au.dk>
References: <lkehi4$86b$1@ger.gmane.org>,
 <201405082223.s48MNdew017019@freefriends.org>,
 <89ECE88578D8F648A22E307DAEE885794A44089B@SRVUNIMBX08.uni.au.dk>,
 <89ECE88578D8F648A22E307DAEE885794A440A0B@SRVUNIMBX08.uni.au.dk>
Message-ID: <89ECE88578D8F648A22E307DAEE885794A440A76@SRVUNIMBX08.uni.au.dk>

BTW:

Joachim,

-C utf8

for latin scripts

what exactly do you by that?


/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at imf / More information: http://au.dk/en/daleif at imf

________________________________
From: tex-live [tex-live-bounces at tug.org] on behalf of Lars Madsen [daleif at imf.au.dk]
Sent: 09 May 2014 09:21
To: jschrod at acm.org; karl at freefriends.org
Cc: tex-live at tug.org
Subject: Re: [tex-live] xindy vs utf8 latex

texindy -L danish -C utf8 file.idx

seems to work just fine.




/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at imf / More information: http://au.dk/en/daleif at imf

________________________________
From: tex-live [tex-live-bounces at tug.org] on behalf of Lars Madsen [daleif at imf.au.dk]
Sent: 09 May 2014 01:34
To: jschrod at acm.org; karl at freefriends.org
Cc: tex-live at tug.org
Subject: Re: [tex-live] xindy vs utf8 latex

I just ran what Joachim mentioned and reported it did not work. Haven't had access to my pretest since, and did not investigate further.

Will test tomorrow

Sent from my tablet using TouchDown

-----Original Message-----
From: Karl Berry [karl at freefriends.org]
Received: fredag, 09 maj 2014, 0:29
To: jschrod at acm.org [jschrod at acm.org]
CC: tex-live at tug.org [tex-live at tug.org]
Subject: Re: [tex-live] xindy vs utf8 latex

    In pretest, does a file lib/xindy/modules/tex/inputenc/utf8.xdy
    exists? If yes, 2.5.0 is available.

Not under lib/ (nothing from xindy has been ever under a lib/ directory
in TL), but yes, there is such a file.

$ head texmf-dist/xindy/modules/tex/inputenc/utf8.xdy
;; Generated from recoded latin?.xdy


(merge-rule "\'A" ...
[etc. etc., 178 lines in all according to wc]


Furthermore, xindy -V reports 2.5.0.  I don't think there is any
question that 2.5.0 is installed and has been for a week+.

I think the question is for Lars: why did you find that the utf8 support
is not there?  What did you run that made you think so?  Was it just the
-C vs. -L red herring, maybe?

k


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140509/d7ea6ca2/attachment.html>

From dbitouze at wanadoo.fr  Fri May  9 19:31:59 2014
From: dbitouze at wanadoo.fr (=?utf-8?Q?Denis_Bitouz=C3=A9?=)
Date: Fri, 9 May 2014 19:31:59 +0200
Subject: [tex-live] Multiple TEXMFHOME on Windows
Message-ID: <m3ha4yyi28.fsf@somewhere.org>

Hi,

on Linux, it is easy to have multiple TEXMFHOME, thanks to:

  ?????
  ? tlmgr conf texmf TEXMFHOME "~/texmf-test:~/texmf"
  ?????

Does this command work on Windows as well?

Thanks by anticipation.
-- 
Denis



From preining at logic.at  Sat May 10 02:03:25 2014
From: preining at logic.at (Norbert Preining)
Date: Sat, 10 May 2014 09:03:25 +0900
Subject: [tex-live] Multiple TEXMFHOME on Windows
In-Reply-To: <m3ha4yyi28.fsf@somewhere.org>
References: <m3ha4yyi28.fsf@somewhere.org>
Message-ID: <20140510000325.GI8919@auth.logic.tuwien.ac.at>

On Fri, 09 May 2014, Denis Bitouz? wrote:
> Does this command work on Windows as well?

Try it!? THe tlmgr command works, I guess the expansion also,
so my guess is, yes.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------



From kakuto at fuk.kindai.ac.jp  Sat May 10 05:02:05 2014
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Sat, 10 May 2014 12:02:05 +0900
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <lkeihn$kkn$1@ger.gmane.org>
References: <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
 <201405072123.s47LNMXT002596@freefriends.org>
 <CAC1phyatcLGwqmZpggiMUEbtADyO3VGsVbL-Yn3fJ_=Qonr2CA@mail.gmail.com>
 <lkeihn$kkn$1@ger.gmane.org>
Message-ID: <12A0034F3F604E47B74A162FEC8B5824@CJ3001517A>

Dear Joachim,

> Yes, addition of support of "-C utf8" for texindy (for Latin
> scripts only) was meant, not "-L utf8". Sorry.

After updating latex,
iconv -t UTF-8 -f LATIN3 latin3.xdy >latin3-utf8.xdy
in xindy/xindy-2.5.0/make-rules/inputenc/
fails in making xindy.

If I use the previous latex,
iconv -t UTF-8 -f LATIN3 latin3.xdy >latin3-utf8.xdy
works ok.

Thanks,
Akira



From dbitouze at wanadoo.fr  Sat May 10 08:04:29 2014
From: dbitouze at wanadoo.fr (=?utf-8?Q?Denis_Bitouz=C3=A9?=)
Date: Sat, 10 May 2014 08:04:29 +0200
Subject: [tex-live] Multiple TEXMFHOME on Windows
References: <m3ha4yyi28.fsf@somewhere.org>
 <20140510000325.GI8919@auth.logic.tuwien.ac.at>
Message-ID: <m3mweqb24y.fsf@somewhere.org>

Norbert Preining wrote:
> On Fri, 09 May 2014, Denis Bitouz? wrote:
>> Does this command work on Windows as well?
>
> Try it!?

I'm not very comfortable with Windows and the only Windows machine I can
try is a virtual box which used to have behavior usual Windows users
didn't notice.

I asked this question for a friend of mine who's currently using MiKTeX
and is hesitating to switch to TeX Live, especially because he would
like to be sure he could still easily deal with multiple personal texmf
trees.

> THe tlmgr command works, I guess the expansion also, so my guess is,
> yes.

Here is the way I tried.

1. Set 2 personal texmf trees:

  ?????
  ? C:>tlmgr conf texmf TEXMFHOME "~/texmf:~/texmfbis"
  ? setting texmf TEXMFHOME to ~/texmf:~/texmfbis (in C:/texlive/2013/texmf.cnf)
  ? lastwin = 10
  ?????

2. Check TEXMFHOME:

  ?????
  ? C:>kpsewhich -var-value TEXMFHOME
  ? C:/Users/Denis/texmf:~/texmfbis
  ?????

  Weird output, isn't it?

3. Check the file `yathesis.cls` I added in one of these personal texmf
trees:

  ?????
  ? C:\>dir \Users\Denis\texmf\tex\latex\yathesis /a-d /w
  ?  Volume in drive C has no label.
  ?  Volume Serial Number is CC38-5CD1
  ? 
  ?  Directory of C:\Users\Denis\texmf\tex\latex\yathesis
  ? 
  ? demo-yathesis.sty   yathesis.cls
  ?                2 Files(s)           95?986 bytes
  ?                0 Dir(s)   2?117?427?200 bytes free
  ?????

4. Check if `yathesis.cls` is known by TL:

  ?????
  ? C:\Users\Denis\texmf\tex\latex>kpsewhich yathesis.cls
  ? 
  ? C:\Users\Denis\texmf\tex\latex>
  ?????

  The answer is no.

As said, I'm not sure my Windows machine is not corrupted (see "Volume in
drive C has no label" above), hence my question.
-- 
Denis




From preining at logic.at  Sat May 10 08:21:10 2014
From: preining at logic.at (Norbert Preining)
Date: Sat, 10 May 2014 15:21:10 +0900
Subject: [tex-live] Multiple TEXMFHOME on Windows
In-Reply-To: <m3mweqb24y.fsf@somewhere.org>
References: <m3ha4yyi28.fsf@somewhere.org>
 <20140510000325.GI8919@auth.logic.tuwien.ac.at>
 <m3mweqb24y.fsf@somewhere.org>
Message-ID: <20140510062110.GK8919@auth.logic.tuwien.ac.at>

On Sat, 10 May 2014, Denis Bitouz? wrote:
>   ? C:>tlmgr conf texmf TEXMFHOME "~/texmf:~/texmfbis"

Should be
	"{~/texmf;~/texmfbis}"

Can also be tested on unix, on mine it worked.
Should also work on Windows.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------



From dbitouze at wanadoo.fr  Sat May 10 09:04:52 2014
From: dbitouze at wanadoo.fr (=?utf-8?Q?Denis_Bitouz=C3=A9?=)
Date: Sat, 10 May 2014 09:04:52 +0200
Subject: [tex-live] Multiple TEXMFHOME on Windows
References: <m3ha4yyi28.fsf@somewhere.org>
 <20140510000325.GI8919@auth.logic.tuwien.ac.at>
 <m3mweqb24y.fsf@somewhere.org>
 <20140510062110.GK8919@auth.logic.tuwien.ac.at>
Message-ID: <m3a9aqazcb.fsf@somewhere.org>

Norbert Preining wrote:
> On Sat, 10 May 2014, Denis Bitouz? wrote:
>>   ? C:>tlmgr conf texmf TEXMFHOME "~/texmf:~/texmfbis"
>
> Should be
> 	"{~/texmf;~/texmfbis}"
>
> Can also be tested on unix, on mine it worked.
> Should also work on Windows.

Indeed, this works on both my Linux and virtual box Windows machines.

This syntax is rather rare on Internet, even on the present list! :)

Maybe it should be mentioned in the the tlmgr help and man pages:
currently, `tlmgr conf texmf` is only mentioned for

  ?????
  ? tlmgr conf texmf shell_escape 0
  ?????

and especially not for `tlmgr conf texmf TEXMFHOME`.

Thanks!
-- 
Denis




From preining at logic.at  Sat May 10 10:19:00 2014
From: preining at logic.at (Norbert Preining)
Date: Sat, 10 May 2014 17:19:00 +0900
Subject: [tex-live] Multiple TEXMFHOME on Windows
In-Reply-To: <m3a9aqazcb.fsf@somewhere.org>
References: <m3ha4yyi28.fsf@somewhere.org>
 <20140510000325.GI8919@auth.logic.tuwien.ac.at>
 <m3mweqb24y.fsf@somewhere.org>
 <20140510062110.GK8919@auth.logic.tuwien.ac.at>
 <m3a9aqazcb.fsf@somewhere.org>
Message-ID: <20140510081900.GN8919@auth.logic.tuwien.ac.at>

On Sat, 10 May 2014, Denis Bitouz? wrote:
> This syntax is rather rare on Internet, even on the present list! :)

Default syntax for texmf.cnf files, look into the main
and you will see many instances.

If you want to play with multiple home texmf, you are supposed
to know about kpathsea.

We cannot leverage the complexity into abstract UI, that is what
Gnome 3 is doing, and that is why most people run away from G3
(I tried for 9month, I know what I am speaking about)

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------



From dbitouze at wanadoo.fr  Sat May 10 11:13:42 2014
From: dbitouze at wanadoo.fr (=?utf-8?Q?Denis_Bitouz=C3=A9?=)
Date: Sat, 10 May 2014 11:13:42 +0200
Subject: [tex-live] Multiple TEXMFHOME on Windows
References: <m3ha4yyi28.fsf@somewhere.org>
 <20140510000325.GI8919@auth.logic.tuwien.ac.at>
 <m3mweqb24y.fsf@somewhere.org>
 <20140510062110.GK8919@auth.logic.tuwien.ac.at>
 <m3a9aqazcb.fsf@somewhere.org>
 <20140510081900.GN8919@auth.logic.tuwien.ac.at>
Message-ID: <m3vbte9et5.fsf@somewhere.org>

Norbert Preining wrote:
> On Sat, 10 May 2014, Denis Bitouz? wrote:
>> This syntax is rather rare on Internet, even on the present list! :)
>
> Default syntax for texmf.cnf files, look into the main
> and you will see many instances.

In this file:

1. it is said:
   - "either ; or : can be used to separate path components"
   - "Brace notation is supported, for example:
     /usr/local/{mytex,othertex}",
2. different syntaxes are used:
  - commas as separators with braces:
  ?????
  ? TEXMFDBS = {!!$TEXMFSYSCONFIG,!!$TEXMFSYSVAR,!!$TEXMFLOCAL,!!$TEXMFDIST}
  ?????
  - semi-colons as separators without braces:
  ?????
  ? SYSTEXMF = $TEXMFSYSVAR;$TEXMFLOCAL;$TEXMFDIST
  ?????

But, AFAICS, with or without surrounding braces:

  ?????
  ? tlmgr conf texmf TEXMFHOME "~/texmf<separator>~/texmfbis"
  ?????

  - on Linux works with <separator> be either "," or ";" or ":"
  - on Windows :
    - works with <separator> be either "," or ";"
    - doesn't works with <separator> be ":"

> If you want to play with multiple home texmf, you are supposed
> to know about kpathsea.

I strongly disagree. Some TeX users could be advanced enough to perform
some tests on personal trees but without want to know about
kpathsea. AFAIK, dealing with multiple personal trees is easy on
MiKTeX. For instance, see:

  ?????
  ? http://thread.gmane.org/gmane.comp.tex.live/34845
  ?????
-- 
Denis




From demailly at ujf-grenoble.fr  Sat May 10 17:18:41 2014
From: demailly at ujf-grenoble.fr (Jean-Pierre Demailly)
Date: Sat, 10 May 2014 17:18:41 +0200
Subject: [tex-live] Problem with xdvik and beamer files
Message-ID: <20140510151841.GA7521@ujf-grenoble.fr>

Hi:

Many thanks for creating xdvi/xdvik, I am still using it most of the time 
to view *.dvi files. I just tried the most recent version xdvik-22.87 on
a Debian sid x86_64 box.

I found that dvi files produced with the latex-beamer package are 
not displayed correctly when using 'xdvi' (many postscript specials are
left blank, especially titles, page headers, etc). Please find enclosed
a small test achive 'xdvi_check.tar.bz2' that shows the problem.

In fact the execvp call to 'gs' fails for such specials. As far as I have 
been able to trace things, the problem occurs at the very start with the line
   currentfile cvx execute
that comes from 'psgs.c' (see output below).

It's not a new problem, so maybe you are already aware of this - in fact, 
I have never seen any Linux dvi viewer that had been able to display 
correctly such dvi files, other than converting them first to 
postscript or pdf.

Besides this, I created some years ago a slightly modified version of
xdvik that compiles with an extended version of libxaw3d (enclosed in
the next message). The enclosed 'xdvik.patch' is to be applied with
xdvik-22.87. After installing libxaw3dxft (with './builstd plain' or
'./buildstd debian'), the toplevel script 'build-xdvi-xaw3dxft' should
build it. In my opinion the result is much nicer than with plain Xaw
or Xaw3d, as the new GUI can make use of anti-aliased fonts and UTF8
input anywhere - I even prefer it to the motif version. Notice that
libxaw3dxft-1.6.2d could in fact be made a drop-in replacement for
the most recent version libxaw3d-1.6.2 of libxaw3d (but it has not 
been made so at this point, libxaw3d will not get overwritten).

Best wishes,
Jean-Pierre Demailly

--------------------------

Output when calling "xdvi simple.dvi"

gs: Error: /undefined in --execute--
gs: Operand stack:
gs:    --nostringval--   --nostringval--   2.39105   3.38733   8.26909   0.79701
gs: Execution stack:
gs:    %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--
gs:    2   %stopped_push   --nostringval--   --nostringval--   --nostringval--   fals
gs: e   1   %stopped_push   1910   1   3   %oparray_pop   1909   1   3   %oparray_pop
gs:    1893   1   3   %oparray_pop   1787   1   3   %oparray_pop   --nostringval--   
gs: %errorexec_pop   .runexec2   --nostringval--   --nostringval--   --nostringval-- 
gs:   2   %stopped_push   --nostringval--   --nostringval--   %loop_continue   --nost
gs: ringval--   --nostringval--   --nostringval--   false   1   %stopped_push   1801 
gs:   1   3   %oparray_pop   --nostringval--   --nostringval--   false   1   %stopped
gs: _push   --nostringval--   --nostringval--   --nostringval--
gs: Dictionary stack:
gs:    --dict:1164/1684(ro)(G)--   --dict:1/20(G)--   --dict:142/200(L)--   --dict:25
gs: /250(L)--   --dict:39/200(L)--
gs: Current allocation mode is local
gs: Last OS error: Resource temporarily unavailable
gs: Error: /undefined in --execute--
gs: Operand stack:
gs:    --nostringval--   --nostringval--   2.39105   3.38733   8.26909   0.79701
gs: Execution stack:
gs:    %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--
gs:    2   %stopped_push   --nostringval--   --nostringval--   --nostringval--   fals
gs: e   1   %stopped_push   1910   1   3   %oparray_pop   1909   1   3   %oparray_pop
gs:    1893   1   3   %oparray_pop   1787   1   3   %oparray_pop   --nostringval--   
gs: %errorexec_pop   .runexec2   --nostringval--   --nostringval--   --nostringval-- 
gs:   2   %stopped_push   --nostringval--   --nostringval--   %loop_continue   --nost
gs: ringval--   --nostringval--   --nostringval--   false   1   %stopped_push   1801 
gs:   1   3   %oparray_pop   --nostringval--   --nostringval--   false   1   %stopped
gs: _push   --nostringval--   --nostringval--   --nostringval--
gs: Dictionary stack:
gs:    --dict:1164/1684(ro)(G)--   --dict:1/20(G)--   --dict:142/200(L)--   --dict:25
gs: /250(L)--   --dict:39/200(L)--
gs: Current allocation mode is local
gs: Last OS error: Resource temporarily unavailable

-------------- next part --------------
A non-text attachment was scrubbed...
Name: xdvi_check.tar.bz2
Type: application/octet-stream
Size: 91466 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20140510/5fe44ef1/attachment-0001.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xdvik.patch
Type: text/x-diff
Size: 130408 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20140510/5fe44ef1/attachment-0001.bin>

From demailly at ujf-grenoble.fr  Sat May 10 17:21:10 2014
From: demailly at ujf-grenoble.fr (Jean-Pierre Demailly)
Date: Sat, 10 May 2014 17:21:10 +0200
Subject: [tex-live] libxaw3dxft
Message-ID: <20140510152110.GB7521@ujf-grenoble.fr>

Here is the package libxaw3dxft-1.6.2d.tar.bz2, against which the patched
xdvik-22.87 is to be compiled.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: libXaw3dXft-1.6.2d.tar.bz2
Type: application/octet-stream
Size: 572635 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20140510/c076339d/attachment-0001.obj>

From demailly at ujf-grenoble.fr  Sat May 10 17:30:33 2014
From: demailly at ujf-grenoble.fr (Jean-Pierre Demailly)
Date: Sat, 10 May 2014 17:30:33 +0200
Subject: [tex-live] Shell script for xdvi-xaw3dxft
Message-ID: <20140510153033.GC7521@ujf-grenoble.fr>

And here is the shell script I am using to launch xdvi-xaw3dxft - it could
of course be improved in many ways.

Best wishes,
Jean-Pierre Demailly
-------------- next part --------------
#!/bin/sh

# This is the xdvi wrapper script for teTeX, version 0.2.
# Copyright Thomas Esser, 1998. Permission to distribute under the terms
# of the GNU general public license version 2 or later.

# This script sets some environment variables to make sure that xdvi's
# ressource file in $XDVIINPUTS/xdvi is read by xdvi.bin.
# Special care was taken to make this work for old R3, too. Therefore,
# we need to modify XAPPLRESDIR. If you are running R4 or later, you
# can set XUSERFILESEARCHPATH for user specific application default
# files. You cannot use XAPPLRESDIR for user specific application default
# files.

# -help and -version only work if they are the only options. Therefore,
# we cannot give the "-name xdvi" parameter in that case.
case "$#:$1" in
  1:-help|1:-version)
    NAMEOPT=;;
  *)
    NAMEOPT='-name xdvi';;
esac

export XDVI_PS_VIEWER="gv"
export XDVI_PDF_VIEWER="mupdf"
export XDVI_PRINT_TOOL="xdvips %s &"
export XDVI_HYPHEN_TOOL="hyphen_show %s | \
  xmessage -geometry 400x320 -title \"List of hyphenations\" -file -"

XDVIINPUTS="$XDVIINPUTS":'$TEXMF/{xdvi//,web2c,dvips//}'; export XDVIINPUTS
xdviappfile=`kpsewhich -progname=xdvi --format='other text files' XDvi`
if test -n "$xdviappfile"; then
  xdviappdir=`dirname "$xdviappfile"`
  xdviapppath="${xdviappdir}/%N"

  # For R3, we have to set XAPPLRESDIR.
  XAPPLRESDIR="$xdviappdir"; export XAPPLRESDIR

  # For R4 or later, we have to set XFILESEARCHPATH, since XAPPLRESDIR might
  # be ignored (if XUSERFILESEARCHPATH is set)
  XFILESEARCHPATH="$xdviapppath:${XFILESEARCHPATH-%D}"; export XFILESEARCHPATH
fi

xdvi-xaw3dxft \
-xrm "*horizontal*background: grey80" \
-xrm "*vertical*background: grey80" \
-xrm "*Command*background: grey80" \
-xrm "*Scrollbar*background: grey80" \
-xrm "*MenuButton*background: lavender" \
-xrm "*Toggle*background: grey80" \
-xrm "*panel.background: bisque" \
-xrm "*box.background: bisque" \
-xrm "*beNiceToColormap: false" \
-xrm "*shadowWidth: 1" \
-xrm "*MenuButton.borderWidth: 1" \
-xrm "*useRight: False" -xrm "*useBottom: False" \
-xrm "*textSink*background: white" \
-xrm "*selFileForm.background: bisque" \
-xrm "*selFileLabel.background: bisque" \
-xrm "*save_or_print_form.background: bisque" \
-xrm "*print_to.background: bisque" \
-xrm "*range_lab.background: bisque" \
-xrm "*range_of_lab.background: bisque" \
-xrm "*range_to_lab.background: bisque" \
-xrm "*dvips_options_name.background: bisque" \
-xrm "*paned*Form.background: bisque" \
-xrm "*topic_pane*Form.background: bisque" \
-xrm "*topic_pane*action_area.background: bisque" \
-xrm "*textSink*background: white" \
-paper A4 \
-rulecolor purple -cr red -hl green \
-pause -allowshell -editor emacsclient \
-halfpage -s 4 \
$NAMEOPT ${1+"$@"}

From jschrod at acm.org  Sun May 11 15:23:56 2014
From: jschrod at acm.org (Joachim Schrod)
Date: Sun, 11 May 2014 15:23:56 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <12A0034F3F604E47B74A162FEC8B5824@CJ3001517A>
References: <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
 <201405072123.s47LNMXT002596@freefriends.org>
 <CAC1phyatcLGwqmZpggiMUEbtADyO3VGsVbL-Yn3fJ_=Qonr2CA@mail.gmail.com>
 <lkeihn$kkn$1@ger.gmane.org>	<12A0034F3F604E47B74A162FEC8B5824@CJ3001517A>
Message-ID: <21359.31212.943832.715368@puma.r.npc.de>

Akira Kakuto writes:
> Dear Joachim,
> 
> > Yes, addition of support of "-C utf8" for texindy (for Latin
> > scripts only) was meant, not "-L utf8". Sorry.
> 
> After updating latex,
> iconv -t UTF-8 -f LATIN3 latin3.xdy >latin3-utf8.xdy
> in xindy/xindy-2.5.0/make-rules/inputenc/
> fails in making xindy.
> 
> If I use the previous latex,
> iconv -t UTF-8 -f LATIN3 latin3.xdy >latin3-utf8.xdy
> works ok.

Hmm, I don't have the new LaTeX installed yet.

Can you please send me the new latin3.def from LaTeX and the generated
latin3.xdy by email as attachments? Reply-To is set, no need to send
this via the list.

Best and thanks in advance,

	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Joachim Schrod, xindy maintainer. Roedermark, Germany
Email: jschrod at acm.org, http://www.xindy.org/


From heiko.oberdiek at googlemail.com  Sun May 11 16:30:33 2014
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Sun, 11 May 2014 16:30:33 +0200
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <21359.31212.943832.715368@puma.r.npc.de>
References: <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
 <201405072123.s47LNMXT002596@freefriends.org>
 <CAC1phyatcLGwqmZpggiMUEbtADyO3VGsVbL-Yn3fJ_=Qonr2CA@mail.gmail.com>
 <lkeihn$kkn$1@ger.gmane.org>	<12A0034F3F604E47B74A162FEC8B5824@CJ3001517A>
 <21359.31212.943832.715368@puma.r.npc.de>
Message-ID: <536F8989.4070201@googlemail.com>

On 11.05.2014 15:23, Joachim Schrod wrote:
> Akira Kakuto writes:
>> Dear Joachim,
>>
>>> Yes, addition of support of "-C utf8" for texindy (for Latin
>>> scripts only) was meant, not "-L utf8". Sorry.
>>
>> After updating latex,
>> iconv -t UTF-8 -f LATIN3 latin3.xdy >latin3-utf8.xdy
>> in xindy/xindy-2.5.0/make-rules/inputenc/
>> fails in making xindy.
>>
>> If I use the previous latex,
>> iconv -t UTF-8 -f LATIN3 latin3.xdy >latin3-utf8.xdy
>> works ok.
> 
> Hmm, I don't have the new LaTeX installed yet.
> 
> Can you please send me the new latin3.def from LaTeX and the generated
> latin3.xdy by email as attachments? Reply-To is set, no need to send
> this via the list.

The changes in latin3.def are trivial:
* Removal of \makeatletter/\makeatother, because it is now handled
  in \inputencoding with restoring the previous catcode of `@'.
  Seems irrelevant here.
* Copyright years/version number, also irrelevant.

However inputenc.sty has changed, e.g.:

  % \changes{v1.2a}{2014/04/20}{add \cs{protect} so undefined characters
are robust (pr/4182)}%

Therefore undefined slots now generates such lines in latin3.idx:

  \indexentry{\@inpenc at undefined@ {latin3}--80}{1}
  \indexentry{\@inpenc at undefined@ {latin3}--81}{1}
  \indexentry{\@inpenc at undefined@ {latin3}--82}{1}

Previously:

  \indexentry{\GenericError  {(inputenc)                }{Package
inputenc Error: Keyboard character used is undefined\MessageBreak in
inputencoding }{See the inputenc package documentation for
explanation.}{You need to provide a definition with \def {o}\def {}\edef
{}\@inpenc at test \bgroup \uccode `\~\MessageBreak \uppercase {\egroup
\def \nobreakspace  {}}{o}r \@inpenc at test \bgroup \uccode `\~b\uppercase
{\egroup \def \nobreakspace  {}}efore using this key.}--80}{1}


And make-inp-rules.pl filters out lines with "inputenc Error":

    if (!($1 =~ /inputenc Error/)) {

Refinement for the "robust" error messages, e.g.:

    if (!($1 =~ /inputenc Error|\@inpenc\@undefined/)) {

Then I get the same latin3.xdy file as before.

The Makefile wants also to remove the error lines for %.raw
files. Another `grep -v' for the new text helps.

Yours sincerely
  Heiko Oberdiek


From kakuto at fuk.kindai.ac.jp  Sun May 11 23:37:13 2014
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Mon, 12 May 2014 06:37:13 +0900
Subject: [tex-live] xindy vs utf8 latex
In-Reply-To: <536F8989.4070201@googlemail.com>
References: <CAKiCb=2sSBMY1V+g-ZCWU8dSSBWHnTzxhzOwZ4srTz0=0zrsgg@mail.gmail.com>
 <201405072123.s47LNMXT002596@freefriends.org>
 <CAC1phyatcLGwqmZpggiMUEbtADyO3VGsVbL-Yn3fJ_=Qonr2CA@mail.gmail.com>
 <lkeihn$kkn$1@ger.gmane.org>	<12A0034F3F604E47B74A162FEC8B5824@CJ3001517A>
 <21359.31212.943832.715368@puma.r.npc.de> <536F8989.4070201@googlemail.com>
Message-ID: <EA91E71BBD44457EADE3AAD5A6E2EC59@CJ3001517A>

Dear Heiko,

> And make-inp-rules.pl filters out lines with "inputenc Error":
>
>     if (!($1 =~ /inputenc Error/)) {
>
> Refinement for the "robust" error messages, e.g.:
>
>     if (!($1 =~ /inputenc Error|\@inpenc\@undefined/)) {
>
> Then I get the same latin3.xdy file as before.

Confirmed. Thanks very much.

Best,
Akira



From lomov.vl at gmail.com  Mon May 12 02:20:17 2014
From: lomov.vl at gmail.com (Vladimir Lomov)
Date: Mon, 12 May 2014 09:20:17 +0900
Subject: [tex-live] [pretest] Asymptote: mismatch version of binary vs asy
	files
Message-ID: <20140512002017.GA927@smoon>

Hello,

seems that TeX Live pretest has wrong version of Asymptote binary:
$ /usr/local/opt/texlive/2014/bin/x86_64-linux/asy --version
Asymptote version 2.23 [(C) 2004 Andy Hammerlindl, John C. Bowman, Tom Prince]
while
$ cat /usr/local/opt/texlive/2014/texmf-dist/asymptote/version.asy
string VERSION="2.27";

Dr. John Bowman has released new version of Asymptote, 2.28, I hope
Asymptote binary will be updated too, not only Asymptote files.

---
WBR, Vladimir Lomov

-- 
I mean, well, if it were not for Linux I might be roaming the streets looking
for drugs or prostitutes or something.  Hannu and Linus have my highest
admiration (apple polishing mode off).
	-- Phil Lewis, plewis at nyx.nyx.net


From kreuter at progn.net  Sat May 10 22:26:05 2014
From: kreuter at progn.net (Richard M Kreuter)
Date: Sat, 10 May 2014 16:26:05 -0400
Subject: [tex-live] Small bug in dvipdfm-x/pdfobj.c
Message-ID: <25489.1399753565@frotz.progn.net>

Hello,

It looks like pdf_unshift_array in Build/source/texk/dvipdfm-x/pdfobj.c
clobbers all array elements above index 0. Patch below.

(Note, I'm using git-svn to track just Build/source, and I don't
remember how to produce an SVN-aware diff. If this is a blocker, please
let me know and I'll see if I can't figure out how to get you a
differently formatted patch.)

Thank you,
Richard

--- a/texk/dvipdfm-x/pdfobj.c
+++ b/texk/dvipdfm-x/pdfobj.c
@@ -1286,8 +1286,8 @@ pdf_unshift_array (pdf_obj *array, pdf_obj *object)
     data->max   += ARRAY_ALLOC_SIZE;
     data->values = RENEW(data->values, data->max, pdf_obj *);
   }
-  for (i = 0; i < data->size; i++)
-    data->values[i+1] = data->values[i];
+  for (i = data->size; i > 0; i--)
+    data->values[i] = data->values[i-1];
   data->values[0] = object;
   data->size++;
 }


From jose.hissa at gmail.com  Tue May 13 02:18:53 2014
From: jose.hissa at gmail.com (Jose Hissa Ferreira)
Date: Mon, 12 May 2014 21:18:53 -0300
Subject: [tex-live] texlive 2014 issues with kpsewhich -show-path
Message-ID: <CAAH+9xaqPxubcjVk8ZYQj0cgh7Rzy40UNACuuiZYX_CZ_J9f-A@mail.gmail.com>

Greetings!

I have two computers from where I installed texlive 2014 pretest release.

Both installations worked fine for about one week and now both are broken.

I got only an empty return line running "kpsewhich -show-path .cls"
command. Also, "kpsewhich article.cls" does not return anything and takes a
very long time to end. On both machines "sudo kpsewhich -show-path .cls"
returns a long (and desired) search path, and "sudo kpsewhich article.cls"
returns the right place:
/usr/local/texlive/2014/texmf-dist/tex/latex/base/article.cls.

I removed and reinstalled texlive 2014 on both machines with the same
behaviour. On both computers, my local texmf is set on
/usr/local/texlive/2014/texmf.conf, but I can not search any of the .sty
file I stored there. Also, "mktexlsr" and "sudo mktexlsr" does not solve
this issue.

Any advise about how to revive my texlive installations are welcome, please.

Sincerely,

JHissa

-- 
[ ]'s,

JHissa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140512/b633a177/attachment.html>

From preining at logic.at  Tue May 13 03:13:27 2014
From: preining at logic.at (Norbert Preining)
Date: Tue, 13 May 2014 10:13:27 +0900
Subject: [tex-live] texlive 2014 issues with kpsewhich -show-path
In-Reply-To: <CAAH+9xaqPxubcjVk8ZYQj0cgh7Rzy40UNACuuiZYX_CZ_J9f-A@mail.gmail.com>
References: <CAAH+9xaqPxubcjVk8ZYQj0cgh7Rzy40UNACuuiZYX_CZ_J9f-A@mail.gmail.com>
Message-ID: <20140513011327.GD31790@auth.logic.tuwien.ac.at>

On Mon, 12 May 2014, Jose Hissa Ferreira wrote:
> Any advise about how to revive my texlive installations are welcome, please.

Can you send the output of
	tlmgr conf
?

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------


From preining at logic.at  Tue May 13 03:14:28 2014
From: preining at logic.at (Norbert Preining)
Date: Tue, 13 May 2014 10:14:28 +0900
Subject: [tex-live] Small bug in dvipdfm-x/pdfobj.c
In-Reply-To: <25489.1399753565@frotz.progn.net>
References: <25489.1399753565@frotz.progn.net>
Message-ID: <20140513011428.GE31790@auth.logic.tuwien.ac.at>

Hi Richard,

On Sat, 10 May 2014, Richard M Kreuter wrote:
> It looks like pdf_unshift_array in Build/source/texk/dvipdfm-x/pdfobj.c
> clobbers all array elements above index 0. Patch below.

thanks for the patch, it definitely looks reasonable. We are
discussing and checking fruther code paths but it will probably
be applied the next days.

Thanks

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------


From zdenek.wagner at gmail.com  Tue May 13 10:09:40 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Tue, 13 May 2014 10:09:40 +0200
Subject: [tex-live] texlive 2014 issues with kpsewhich -show-path
In-Reply-To: <20140513011327.GD31790@auth.logic.tuwien.ac.at>
References: <CAAH+9xaqPxubcjVk8ZYQj0cgh7Rzy40UNACuuiZYX_CZ_J9f-A@mail.gmail.com>
 <20140513011327.GD31790@auth.logic.tuwien.ac.at>
Message-ID: <CAC1phyaMJa9U574bcULrdvJPverXg3AwA8NEg4CH9yBvDk_OUg@mail.gmail.com>

According to the behaviour it seems to me as if you had two TeX
installations at the same computer, one configured properly for root
(because with sudo it works) and another configured for an ordinary user
but somehow broken. I would first check PATH setting.


2014-05-13 3:13 GMT+02:00 Norbert Preining <preining at logic.at>:

> On Mon, 12 May 2014, Jose Hissa Ferreira wrote:
> > Any advise about how to revive my texlive installations are welcome,
> please.
>
> Can you send the output of
>         tlmgr conf
> ?
>
> Norbert
>
> ------------------------------------------------------------------------
> PREINING, Norbert                               http://www.preining.info
> JAIST, Japan                                 TeX Live & Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
> ------------------------------------------------------------------------
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140513/48d3025e/attachment.html>

From jose.hissa at gmail.com  Tue May 13 14:24:56 2014
From: jose.hissa at gmail.com (Jose Hissa Ferreira)
Date: Tue, 13 May 2014 09:24:56 -0300
Subject: [tex-live] texlive 2014 issues with kpsewhich -show-path
In-Reply-To: <CAC1phyaMJa9U574bcULrdvJPverXg3AwA8NEg4CH9yBvDk_OUg@mail.gmail.com>
References: <CAAH+9xaqPxubcjVk8ZYQj0cgh7Rzy40UNACuuiZYX_CZ_J9f-A@mail.gmail.com>
 <20140513011327.GD31790@auth.logic.tuwien.ac.at>
 <CAC1phyaMJa9U574bcULrdvJPverXg3AwA8NEg4CH9yBvDk_OUg@mail.gmail.com>
Message-ID: <53720F18.4040307@gmail.com>


On 05/13/2014 05:09 AM, Zdenek Wagner wrote:
> According to the behaviour it seems to me as if you had two TeX 
> installations at the same computer, one configured properly for root 
> (because with sudo it works) and another configured for an ordinary 
> user but somehow broken. I would first check PATH setting.
>

I guess my path variable is ok, because I'm able to run any binary from 
texlive.

$ echo $PATH
/usr/local/texlive/2014/bin/x86_64-linux:/opt/spiceopus/bin:/opt/aim-spice:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/jvm/java-8-oracle/bin:/usr/lib/jvm/java-8-oracle/db/bin:/usr/lib/jvm/java-8-oracle/jre/bin:/home/jhissa/bin

Thanks,

JHissa

  * Portuguese - detected
  * English
  * Portuguese

  * English
  * Portuguese

<javascript:void(0);><#>
 From echo $ PATH I got:
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140513/c15f7037/attachment.html>

From jose.hissa at gmail.com  Tue May 13 14:35:16 2014
From: jose.hissa at gmail.com (Jose Hissa Ferreira)
Date: Tue, 13 May 2014 09:35:16 -0300
Subject: [tex-live] texlive 2014 issues with kpsewhich -show-path
In-Reply-To: <20140513011327.GD31790@auth.logic.tuwien.ac.at>
References: <CAAH+9xaqPxubcjVk8ZYQj0cgh7Rzy40UNACuuiZYX_CZ_J9f-A@mail.gmail.com>
 <20140513011327.GD31790@auth.logic.tuwien.ac.at>
Message-ID: <53721184.9070709@gmail.com>


On 05/12/2014 10:13 PM, Norbert Preining wrote:
> On Mon, 12 May 2014, Jose Hissa Ferreira wrote:
>> Any advise about how to revive my texlive installations are welcome, please.
> Can you send the output of
> 	tlmgr conf
> ?
>
> Norbert

I got the following from tlmgr conf:

$ tlmgr conf
=========================== version information ==========================
tlmgr revision 33955 (2014-05-10 07:37:16 +0200)
tlmgr using installation: /usr/local/texlive/2014
TeX Live (http://tug.org/texlive) version 2014

==================== executables found by searching PATH =================
PATH: 
/usr/local/texlive/2014/bin/x86_64-linux:/usr/local/texlive/2014/bin/x86_64-linux:/opt/spiceopus/bin:/opt/aim-spice:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/jvm/java-8-oracle/bin:/usr/lib/jvm/java-8-oracle/db/bin:/usr/lib/jvm/java-8-oracle/jre/bin:/home/jhissa/bin
kpsewhich: /usr/local/texlive/2014/bin/x86_64-linux/kpsewhich
updmap: /usr/local/texlive/2014/bin/x86_64-linux/updmap
fmtutil: /usr/local/texlive/2014/bin/x86_64-linux/fmtutil
tlmgr: /usr/local/texlive/2014/bin/x86_64-linux/tlmgr
tex: /usr/local/texlive/2014/bin/x86_64-linux/tex
pdftex: /usr/local/texlive/2014/bin/x86_64-linux/pdftex
mktexpk: /usr/local/texlive/2014/bin/x86_64-linux/mktexpk
dvips: /usr/local/texlive/2014/bin/x86_64-linux/dvips
dvipdfmx: /usr/local/texlive/2014/bin/x86_64-linux/dvipdfmx
=========================== active config files ==========================
texmf.cnf: /usr/local/texlive/2014/texmf.cnf
updmap.cfg: /home/jhissa/.texmf/web2c/updmap.cfg
fmtutil.cnf: /usr/local/texlive/2014/texmf-var/web2c/fmtutil.cnf
config.ps: /usr/local/texlive/2014/texmf-dist/dvips/config/config.ps
mktex.cnf: /usr/local/texlive/2014/texmf-dist/web2c/mktex.cnf
pdftexconfig.tex: ============================= font map files 
=============================
psfonts.map: 
/home/jhissa/.texlive2014/texmf-var/fonts/map/dvips/updmap/psfonts.map
pdftex.map: 
/home/jhissa/.texlive2014/texmf-var/fonts/map/pdftex/updmap/pdftex.map
ps2pk.map: 
/home/jhissa/.texlive2014/texmf-var/fonts/map/dvips/updmap/ps2pk.map
dvipdfm.map: =========================== kpathsea variables 
===========================
TEXMFMAIN=/usr/local/texlive/2014/texmf-dist
TEXMFDIST=/usr/local/texlive/2014/texmf-dist
TEXMFLOCAL=/usr/local/texlive/texmf-local
TEXMFSYSVAR=/usr/local/texlive/2014/texmf-var
TEXMFSYSCONFIG=/usr/local/texlive/2014/texmf-config
TEXMFVAR=/home/jhissa/.texlive2014/texmf-var
TEXMFCONFIG=/home/jhissa/.texlive2014/texmf-config
TEXMFHOME=/home/jhissa/.texmf
VARTEXFONTS=/home/jhissa/.texlive2014/texmf-var/fonts
TEXMF={/home/jhissa/.texlive2014/texmf-config,/home/jhissa/.texlive2014/texmf-var,/home/jhissa/.texmf,!!/usr/local/texlive/2014/texmf-config,!!/usr/local/texlive/2014/texmf-var,!!/usr/local/texlive/texmf-local,!!/usr/local/texlive/2014/texmf-dist}
SYSTEXMF=/usr/local/texlive/2014/texmf-var:/usr/local/texlive/texmf-local:/usr/local/texlive/2014/texmf-dist
TEXMFDBS={!!/usr/local/texlive/2014/texmf-config,!!/usr/local/texlive/2014/texmf-var,!!/usr/local/texlive/texmf-local,!!/usr/local/texlive/2014/texmf-dist}
WEB2C={/home/jhissa/.texlive2014/texmf-config,/home/jhissa/.texlive2014/texmf-var,/home/jhissa/.texmf,!!/usr/local/texlive/2014/texmf-config,!!/usr/local/texlive/2014/texmf-var,!!/usr/local/texlive/texmf-local,!!/usr/local/texlive/2014/texmf-dist}/web2c
TEXPSHEADERS=.:{/home/jhissa/.texlive2014/texmf-config,/home/jhissa/.texlive2014/texmf-var,/home/jhissa/.texmf,!!/usr/local/texlive/2014/texmf-config,!!/usr/local/texlive/2014/texmf-var,!!/usr/local/texlive/texmf-local,!!/usr/local/texlive/2014/texmf-dist}/{dvips,fonts/{enc,type1,type42,type3}}//
TEXCONFIG={/home/jhissa/.texlive2014/texmf-config,/home/jhissa/.texlive2014/texmf-var,/home/jhissa/.texmf,!!/usr/local/texlive/2014/texmf-config,!!/usr/local/texlive/2014/texmf-var,!!/usr/local/texlive/texmf-local,!!/usr/local/texlive/2014/texmf-dist}/dvips//
ENCFONTS=.:{/home/jhissa/.texlive2014/texmf-config,/home/jhissa/.texlive2014/texmf-var,/home/jhissa/.texmf,!!/usr/local/texlive/2014/texmf-config,!!/usr/local/texlive/2014/texmf-var,!!/usr/local/texlive/texmf-local,!!/usr/local/texlive/2014/texmf-dist}/fonts/enc//
TEXFONTMAPS=.:{/home/jhissa/.texlive2014/texmf-config,/home/jhissa/.texlive2014/texmf-var,/home/jhissa/.texmf,!!/usr/local/texlive/2014/texmf-config,!!/usr/local/texlive/2014/texmf-var,!!/usr/local/texlive/texmf-local,!!/usr/local/texlive/2014/texmf-dist}/fonts/map/{kpsewhich,pdftex,dvips,}//
==== kpathsea variables from environment only (ok if no output here) ====
TEXINPUTS=.//:~/Documents/Ensino/CEFET-MG/Circuitos/Figuras//

After some time ...

JHissa

  * Portuguese - detected
  * English
  * Portuguese

  * English
  * Portuguese

  <javascript:void(0);> <#>


From kakuto at fuk.kindai.ac.jp  Tue May 13 14:59:17 2014
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Tue, 13 May 2014 21:59:17 +0900
Subject: [tex-live] texlive 2014 issues with kpsewhich -show-path
In-Reply-To: <53721184.9070709@gmail.com>
References: <CAAH+9xaqPxubcjVk8ZYQj0cgh7Rzy40UNACuuiZYX_CZ_J9f-A@mail.gmail.com>
 <20140513011327.GD31790@auth.logic.tuwien.ac.at> <53721184.9070709@gmail.com>
Message-ID: <0309BFCB6FDD48FDBEA0D410456FB84D@CJ3001517A>

Dear Jose Hissa Ferreira,

> =========================== active config files ==========================
> texmf.cnf: /usr/local/texlive/2014/texmf.cnf

Probably only your local texmf.cnf is recognized.
Do you have the env variable TEXMFCNF?
If you have, erase the env variable TEXMFCNF.

Best,
Akira



From news3 at nililand.de  Tue May 13 16:08:03 2014
From: news3 at nililand.de (Ulrike Fischer)
Date: Tue, 13 May 2014 16:08:03 +0200
Subject: [tex-live] texlive 2014 issues with kpsewhich -show-path
References: <CAAH+9xaqPxubcjVk8ZYQj0cgh7Rzy40UNACuuiZYX_CZ_J9f-A@mail.gmail.com>
 <20140513011327.GD31790@auth.logic.tuwien.ac.at>
 <53721184.9070709@gmail.com> <0309BFCB6FDD48FDBEA0D410456FB84D@CJ3001517A>
Message-ID: <2hzws5qlc92m.dlg@nililand.de>

Am Tue, 13 May 2014 21:59:17 +0900 schrieb Akira Kakuto:

>> =========================== active config files ==========================
>> texmf.cnf: /usr/local/texlive/2014/texmf.cnf
> 
> Probably only your local texmf.cnf is recognized.
> Do you have the env variable TEXMFCNF?
> If you have, erase the env variable TEXMFCNF.

I don't think that this is the problem. I get a similar output on
windows (I have set TEXMFCNF). 

But imho TEXINPUTS is wrong:

>> TEXINPUTS=.//:~/Documents/Ensino/CEFET-MG/Circuitos/Figuras//

Shouldn't there be a colon at the end?

-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/



From zdenek.wagner at gmail.com  Tue May 13 16:13:24 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Tue, 13 May 2014 16:13:24 +0200
Subject: [tex-live] texlive 2014 issues with kpsewhich -show-path
In-Reply-To: <2hzws5qlc92m.dlg@nililand.de>
References: <CAAH+9xaqPxubcjVk8ZYQj0cgh7Rzy40UNACuuiZYX_CZ_J9f-A@mail.gmail.com>
 <20140513011327.GD31790@auth.logic.tuwien.ac.at>
 <53721184.9070709@gmail.com>	<0309BFCB6FDD48FDBEA0D410456FB84D@CJ3001517A>
 <2hzws5qlc92m.dlg@nililand.de>
Message-ID: <CAC1phyaM3_icA1=u=7vcBgBZGgG6LoWzBK6-E3wdmm=EcA4VBA@mail.gmail.com>

2014-05-13 16:08 GMT+02:00 Ulrike Fischer <news3 at nililand.de>:

> Am Tue, 13 May 2014 21:59:17 +0900 schrieb Akira Kakuto:
>
> >> =========================== active config files
> ==========================
> >> texmf.cnf: /usr/local/texlive/2014/texmf.cnf
> >
> > Probably only your local texmf.cnf is recognized.
> > Do you have the env variable TEXMFCNF?
> > If you have, erase the env variable TEXMFCNF.
>
> I don't think that this is the problem. I get a similar output on
> windows (I have set TEXMFCNF).
>
> But imho TEXINPUTS is wrong:
>
> >> TEXINPUTS=.//:~/Documents/Ensino/CEFET-MG/Circuitos/Figuras//
>
> Shouldn't there be a colon at the end?
>
> Yes, it should. Without the colon TeX will not look into its standard
directories.


> --
> Ulrike Fischer
> http://www.troubleshooting-tex.de/
>
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140513/d2e300b1/attachment.html>

From karl at freefriends.org  Wed May 14 01:37:06 2014
From: karl at freefriends.org (Karl Berry)
Date: Tue, 13 May 2014 23:37:06 +0000
Subject: [tex-live] [pretest] Asymptote: mismatch version of binary vs
	asy	files
In-Reply-To: <20140512002017.GA927@smoon>
Message-ID: <201405132337.s4DNb6rH025920@freefriends.org>

Hi Vladimir,

    seems that TeX Live pretest has wrong version of Asymptote binary:
    $ /usr/local/opt/texlive/2014/bin/x86_64-linux/asy --version

Thanks, I've asked Norbert to rebuild it.

    Dr. John Bowman has released new version of Asymptote, 2.28

It is not on CTAN.  I suspect this is intentional.
(But John, if you do want 2.28 in TL'14, please do the usual, ok?)

Best,
Karl


From jose.hissa at gmail.com  Wed May 14 04:02:52 2014
From: jose.hissa at gmail.com (Jose Hissa Ferreira)
Date: Tue, 13 May 2014 23:02:52 -0300
Subject: [tex-live] texlive 2014 issues with kpsewhich -show-path
In-Reply-To: <mailman.1428.1399990190.3620.tex-live@tug.org>
References: <mailman.1428.1399990190.3620.tex-live@tug.org>
Message-ID: <5372CECC.8090903@gmail.com>


On 05/13/2014 11:09 AM, tex-live-request at tug.org wrote:

> Date: Tue, 13 May 2014 16:08:03 +0200
> From: Ulrike Fischer <news3 at nililand.de>
> To: <tex-live at tug.org>
> Subject: Re: [tex-live] texlive 2014 issues with kpsewhich -show-path
> Message-ID: <2hzws5qlc92m.dlg at nililand.de>
> Content-Type: text/plain; charset="us-ascii"
>
> I don't think that this is the problem. I get a similar output on
> windows (I have set TEXMFCNF).
>
> But imho TEXINPUTS is wrong:
>
>>> TEXINPUTS=.//:~/Documents/Ensino/CEFET-MG/Circuitos/Figuras//
> Shouldn't there be a colon at the end?

Mr. Fischer, your IMHO is fantastic indeed! I most certainly made a big 
mistake here. My apologies and thanks to all.

JHissa



From news3 at nililand.de  Wed May 14 10:02:43 2014
From: news3 at nililand.de (Ulrike Fischer)
Date: Wed, 14 May 2014 10:02:43 +0200
Subject: [tex-live] texlive 2014 issues with kpsewhich -show-path
References: <mailman.1428.1399990190.3620.tex-live@tug.org>
 <5372CECC.8090903@gmail.com>
Message-ID: <1foyzfxdm6u4d.dlg@nililand.de>

Am Tue, 13 May 2014 23:02:52 -0300 schrieb Jose Hissa Ferreira:

 
> Mr. Fischer, your IMHO is fantastic indeed!

Mrs. Fischer. Ulrike is a female name. 


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/



From preining at logic.at  Wed May 14 10:06:25 2014
From: preining at logic.at (Norbert Preining)
Date: Wed, 14 May 2014 17:06:25 +0900
Subject: [tex-live] texlive 2014 issues with kpsewhich -show-path
In-Reply-To: <53720D6E.6060209@gmail.com>
References: <CAAH+9xaqPxubcjVk8ZYQj0cgh7Rzy40UNACuuiZYX_CZ_J9f-A@mail.gmail.com>
 <20140513011327.GD31790@auth.logic.tuwien.ac.at> <53720D6E.6060209@gmail.com>
Message-ID: <20140514080625.GR31790@auth.logic.tuwien.ac.at>

Sorry for the late answer, had to teach ...

> ==== kpathsea variables from environment only (ok if no output here) ====
> TEXINPUTS=.//:~/Documents/Ensino/CEFET-MG/Circuitos/Figuras//

That is wrong. If you want to search the default, *too*, then you
have to add a final 
	:
I.e.,
	TEXINPUTS=.//:~/Documents/Ensino/CEFET-MG/Circuitos/Figuras//:

> After some time ...

Do you have *MANY* files in Figuras and below?

Mind also, that the leading
	.//
means that on *ANY* file search *ALL* of the current dir and below
is searched.

That is, if you are in
	C:/>
and type kpsewhich foobarbaz.sty then *all* of your harddrive
will be searched!!!!

Probably not a good idea.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------


From jose.hissa at gmail.com  Wed May 14 14:19:13 2014
From: jose.hissa at gmail.com (Jose Hissa Ferreira)
Date: Wed, 14 May 2014 09:19:13 -0300
Subject: [tex-live] texlive 2014 issues with kpsewhich -show-path
In-Reply-To: <mailman.17.1400061605.6002.tex-live@tug.org>
References: <mailman.17.1400061605.6002.tex-live@tug.org>
Message-ID: <53735F41.1020505@gmail.com>


On 14-05-2014 07:00, tex-live-request at tug.org wrote:
> Message: 4
> Date: Wed, 14 May 2014 10:02:43 +0200
> From: Ulrike Fischer<news3 at nililand.de>
> To:<tex-live at tug.org>
> Subject: Re: [tex-live] texlive 2014 issues with kpsewhich -show-path
> Message-ID:<1foyzfxdm6u4d.dlg at nililand.de>
> Content-Type: text/plain; charset="us-ascii"
>
> Am Tue, 13 May 2014 23:02:52 -0300 schrieb Jose Hissa Ferreira:
>
>   
>> >Mr. Fischer, your IMHO is fantastic indeed!
> Mrs. Fischer. Ulrike is a female name.
My apologies ... two big mistakes.

JHissa


From jose.hissa at gmail.com  Wed May 14 14:32:48 2014
From: jose.hissa at gmail.com (Jose Hissa Ferreira)
Date: Wed, 14 May 2014 09:32:48 -0300
Subject: [tex-live] tex-live Digest, Vol 136, Issue 23
In-Reply-To: <mailman.17.1400061605.6002.tex-live@tug.org>
References: <mailman.17.1400061605.6002.tex-live@tug.org>
Message-ID: <53736270.9090700@gmail.com>


> Date: Wed, 14 May 2014 17:06:25 +0900 From: Norbert Preining 
> <preining at logic.at> To: Jose Hissa Ferreira <jose.hissa at gmail.com> Cc: 
> tex-live at tug.org Subject: Re: [tex-live] texlive 2014 issues with 
> kpsewhich -show-path Message-ID: 
> <20140514080625.GR31790 at auth.logic.tuwien.ac.at> Content-Type: 
> text/plain; charset="us-ascii"
> Do you have*MANY*  files in Figuras and below?
>
> Mind also, that the leading
> 	.//
> means that on*ANY*  file search*ALL*  of the current dir and below
> is searched.
>
> That is, if you are in
> 	C:/>
> and type kpsewhich foobarbaz.sty then*all*  of your harddrive
> will be searched!!!!
>
> Probably not a good idea.
>
> Norbert
Another mistake I made indeed ... I  read an answer at tex.stackexchange 
about TEXINPUTS and misunderstood its usage. I figured it was to avoid 
the use of \graphicspath{} only.

Thanks for the advice.

JHissa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140514/ad86a853/attachment.html>

From jose.hissa at gmail.com  Wed May 14 14:33:03 2014
From: jose.hissa at gmail.com (Jose Hissa Ferreira)
Date: Wed, 14 May 2014 09:33:03 -0300
Subject: [tex-live] texlive 2014 issues with kpsewhich -show-path
In-Reply-To: <mailman.17.1400061605.6002.tex-live@tug.org>
References: <mailman.17.1400061605.6002.tex-live@tug.org>
Message-ID: <5373627F.3060301@gmail.com>


> Date: Wed, 14 May 2014 17:06:25 +0900 From: Norbert Preining 
> <preining at logic.at> To: Jose Hissa Ferreira <jose.hissa at gmail.com> Cc: 
> tex-live at tug.org Subject: Re: [tex-live] texlive 2014 issues with 
> kpsewhich -show-path Message-ID: 
> <20140514080625.GR31790 at auth.logic.tuwien.ac.at> Content-Type: 
> text/plain; charset="us-ascii"
> Do you have*MANY*  files in Figuras and below?
>
> Mind also, that the leading
> 	.//
> means that on*ANY*  file search*ALL*  of the current dir and below
> is searched.
>
> That is, if you are in
> 	C:/>
> and type kpsewhich foobarbaz.sty then*all*  of your harddrive
> will be searched!!!!
>
> Probably not a good idea.
>
> Norbert
Another mistake I made indeed ... I  read an answer at tex.stackexchange 
about TEXINPUTS and misunderstood its usage. I figured it was to avoid 
the use of \graphicspath{} only.

Thanks for the advice.

JHissa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140514/b46d395f/attachment.html>

From bowman at ualberta.ca  Wed May 14 01:46:36 2014
From: bowman at ualberta.ca (John Bowman)
Date: Tue, 13 May 2014 17:46:36 -0600
Subject: [tex-live] [pretest] Asymptote: mismatch version of binary vs
 asy files
In-Reply-To: <201405132337.s4DNb6rH025920@freefriends.org>
References: <20140512002017.GA927@smoon>
 <201405132337.s4DNb6rH025920@freefriends.org>
Message-ID: <CACEzJihwC8LFbcLvi=iFjEP_ooe9nphgGcJU6RcyiH=a8cy3og@mail.gmail.com>

Hi Karl,

I haven't uploaded Asymptote 2.28 to CTAN yet because there will be a new
2.29 release, which, thanks to Mojca, will support ConTeXt again, very
soon. I see that your code freeze is on May 15.
I should be able to upload version 2.29 to CTAN by end of day, May 14th.

-- John


On Tue, May 13, 2014 at 5:37 PM, Karl Berry <karl at freefriends.org> wrote:

> Hi Vladimir,
>
>     seems that TeX Live pretest has wrong version of Asymptote binary:
>     $ /usr/local/opt/texlive/2014/bin/x86_64-linux/asy --version
>
> Thanks, I've asked Norbert to rebuild it.
>
>     Dr. John Bowman has released new version of Asymptote, 2.28
>
> It is not on CTAN.  I suspect this is intentional.
> (But John, if you do want 2.28 in TL'14, please do the usual, ok?)
>
> Best,
> Karl
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140513/e1f19f16/attachment.html>

From P.Taylor at Rhul.Ac.Uk  Thu May 15 10:35:54 2014
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Thu, 15 May 2014 09:35:54 +0100
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
Message-ID: <53747C6A.5060703@Rhul.Ac.Uk>

Seeking to offer a rebuttal to an argument adduced today that stated
"It is somewhat close to impossible to have truly bug free code in any 
project over a few thousand lines.", I tried "Tangle TeX.web" from the
TeX Live 2013 command prompt.  Tangle reported :

> tangle.exe: fatal: web file `tex.web' not found.

I then tried a search for "filename:tex.web" on the whole of my
TeX Live 2013 installation, and was told "file not found".

I finally tried a search for "filename:*.web" on the whole of my
TeX Live 2013 installation, and Search found only "glue.web", at

> D:\TeX\Live\2013\texmf-dist\source\generic\knuth\tex

This directory is otherwise empty.  Is my installation defective,
and if not, where /are/ the master sources in TeX Live 2013 ?

Philip Taylor


From joseph.wright at morningstar2.co.uk  Thu May 15 11:10:19 2014
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Thu, 15 May 2014 10:10:19 +0100
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <53747C6A.5060703@Rhul.Ac.Uk>
References: <53747C6A.5060703@Rhul.Ac.Uk>
Message-ID: <5374847B.9010305@morningstar2.co.uk>

On 15/05/2014 09:35, Philip Taylor wrote:
> Seeking to offer a rebuttal to an argument adduced today that stated
> "It is somewhat close to impossible to have truly bug free code in any
> project over a few thousand lines.", I tried "Tangle TeX.web" from the
> TeX Live 2013 command prompt.  Tangle reported :
> 
>> tangle.exe: fatal: web file `tex.web' not found.
> 
> I then tried a search for "filename:tex.web" on the whole of my
> TeX Live 2013 installation, and was told "file not found".
> 
> I finally tried a search for "filename:*.web" on the whole of my
> TeX Live 2013 installation, and Search found only "glue.web", at
> 
>> D:\TeX\Live\2013\texmf-dist\source\generic\knuth\tex
> 
> This directory is otherwise empty.  Is my installation defective,
> and if not, where /are/ the master sources in TeX Live 2013 ?
> 
> Philip Taylor

http://tug.org/svn/texlive/trunk/Build/source/texk/web2c/tex.web
-- 
Joseph Wright


From P.Taylor at Rhul.Ac.Uk  Thu May 15 11:41:46 2014
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Thu, 15 May 2014 10:41:46 +0100
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <5374847B.9010305@morningstar2.co.uk>
References: <53747C6A.5060703@Rhul.Ac.Uk> <5374847B.9010305@morningstar2.co.uk>
Message-ID: <53748BDA.3030803@Rhul.Ac.Uk>



Joseph Wright wrote:

> On 15/05/2014 09:35, Philip Taylor wrote:

>> [W]here /are/ the master sources in TeX Live 2013 ?

> http://tug.org/svn/texlive/trunk/Build/source/texk/web2c/tex.web

Thank you, Joseph.  I can confirm that I can indeed find the sought-for
source file(s) there, but :

(a) "View" is inhibited :

> An Exception Has Occurred
>
> Display of files larger than 512 KB disallowed by configuration
> HTTP Response Status
>
> 403 Forbidden

whilst (b) "Download" causes the file to be displayed, not downloaded.

Rather more relevantly (since this is about the sources for TeX Live
and not about any perceived deficiencies in the TUG interface to
SVN), why is "Glue.web" included as a part of TeX Live 2013, whilst
the far more fundamental "TeX.web" is not ?

Philip Taylor
-- 
All duplicate recycled material deleted on principle.


From daleif at imf.au.dk  Thu May 15 11:50:40 2014
From: daleif at imf.au.dk (Lars Madsen)
Date: Thu, 15 May 2014 09:50:40 +0000
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <53748BDA.3030803@Rhul.Ac.Uk>
References: <53747C6A.5060703@Rhul.Ac.Uk>
 <5374847B.9010305@morningstar2.co.uk>,<53748BDA.3030803@Rhul.Ac.Uk>
Message-ID: <89ECE88578D8F648A22E307DAEE885794A447477@SRVUNIMBX08.uni.au.dk>

erh, download it just a link, and the result is just text, so your browser interprets it.

Right click the download link and choose 'save link as'

TUG cannot guard it self against intelligent browsers.

/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at imf / More information: http://au.dk/en/daleif at imf


________________________________________
From: tex-live [tex-live-bounces at tug.org] on behalf of Philip Taylor [P.Taylor at Rhul.Ac.Uk]
Sent: 15 May 2014 11:41
To: Joseph Wright
Cc: tex-live at tug.org
Subject: Re: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?

Joseph Wright wrote:

> On 15/05/2014 09:35, Philip Taylor wrote:

>> [W]here /are/ the master sources in TeX Live 2013 ?

> http://tug.org/svn/texlive/trunk/Build/source/texk/web2c/tex.web

Thank you, Joseph.  I can confirm that I can indeed find the sought-for
source file(s) there, but :

(a) "View" is inhibited :

> An Exception Has Occurred
>
> Display of files larger than 512 KB disallowed by configuration
> HTTP Response Status
>
> 403 Forbidden

whilst (b) "Download" causes the file to be displayed, not downloaded.

Rather more relevantly (since this is about the sources for TeX Live
and not about any perceived deficiencies in the TUG interface to
SVN), why is "Glue.web" included as a part of TeX Live 2013, whilst
the far more fundamental "TeX.web" is not ?

Philip Taylor
--
All duplicate recycled material deleted on principle.




From preining at logic.at  Thu May 15 11:55:20 2014
From: preining at logic.at (Norbert Preining)
Date: Thu, 15 May 2014 18:55:20 +0900
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <53748BDA.3030803@Rhul.Ac.Uk>
References: <53747C6A.5060703@Rhul.Ac.Uk>
 <5374847B.9010305@morningstar2.co.uk> <53748BDA.3030803@Rhul.Ac.Uk>
Message-ID: <20140515095520.GD30691@auth.logic.tuwien.ac.at>

On Thu, 15 May 2014, Philip Taylor wrote:
> (a) "View" is inhibited :
> whilst (b) "Download" causes the file to be displayed, not downloaded.

Try View and Download on two smaller files, and you will see
a difference !!! Then you probably will understand.

That your browser does not download the file but shows it 
is a different thing.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------


From zdenek.wagner at gmail.com  Thu May 15 12:06:50 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 15 May 2014 12:06:50 +0200
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <20140515095520.GD30691@auth.logic.tuwien.ac.at>
References: <53747C6A.5060703@Rhul.Ac.Uk>
 <5374847B.9010305@morningstar2.co.uk>	<53748BDA.3030803@Rhul.Ac.Uk>
 <20140515095520.GD30691@auth.logic.tuwien.ac.at>
Message-ID: <CAC1phyYLO5ZL+XGNuXJn8HtKvYt_gAr8pEmd8L-L6yreu3Rcng@mail.gmail.com>

2014-05-15 11:55 GMT+02:00 Norbert Preining <preining at logic.at>:

> On Thu, 15 May 2014, Philip Taylor wrote:
> > (a) "View" is inhibited :
> > whilst (b) "Download" causes the file to be displayed, not downloaded.
>
> Try View and Download on two smaller files, and you will see
> a difference !!! Then you probably will understand.
>
> That your browser does not download the file but shows it
> is a different thing.
>

If svn:mime-type is not set for that file, Apache uses its default
mime-type which is almost always text/plain. It is the responsibility of
the browser do decide what to do with text/plain. Each browser has its own
default action but it can be locally reconfigured. The configuration allows
to set the action either by mime type or by filter, e.g. for *.web.

>
> Norbert
>
> ------------------------------------------------------------------------
> PREINING, Norbert                               http://www.preining.info
> JAIST, Japan                                 TeX Live & Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
> ------------------------------------------------------------------------
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140515/17b4242a/attachment.html>

From P.Taylor at Rhul.Ac.Uk  Thu May 15 12:20:22 2014
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Thu, 15 May 2014 11:20:22 +0100
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <CAC1phyYLO5ZL+XGNuXJn8HtKvYt_gAr8pEmd8L-L6yreu3Rcng@mail.gmail.com>
References: <53747C6A.5060703@Rhul.Ac.Uk>
 <5374847B.9010305@morningstar2.co.uk> <53748BDA.3030803@Rhul.Ac.Uk>
 <20140515095520.GD30691@auth.logic.tuwien.ac.at>
 <CAC1phyYLO5ZL+XGNuXJn8HtKvYt_gAr8pEmd8L-L6yreu3Rcng@mail.gmail.com>
Message-ID: <537494E6.9020907@Rhul.Ac.Uk>

{Lars, Norbert, Zden?k ) All helpful stuff, chaps, but no-one has sought 
to address the substantive question :

> why is "Glue.web" included as a part of TeX Live 2013, whilst
> the far more fundamental "TeX.web" is not ?

** Phil.
-- 
All duplicate recycled material deleted on principle.



From peb at mppmu.mpg.de  Thu May 15 13:02:43 2014
From: peb at mppmu.mpg.de (Peter Breitenlohner)
Date: Thu, 15 May 2014 13:02:43 +0200
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
Message-ID: <alpine.LNX.2.00.1405151247510.26699@pcl321.mppmu.mpg.de>

Hi Phil,

if you really want the version in TeX Live 2013 you should use
   http://tug.org/svn/texlive/branches/branch2013/Build/source/texk/web2c/tex.web
(version 3.1415926) unchanged since 2008.

   http://tug.org/svn/texlive/trunk/Build/source/texk/web2c/tex.web
is the current version 3.14159265 for TeX Live 2014, updated January 2014.

Regards
Peter


From Robin.Fairbairns at cl.cam.ac.uk  Thu May 15 13:05:09 2014
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Thu, 15 May 2014 12:05:09 +0100
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: Your message of Thu, 15 May 2014 11:20:22 +0100.
 <537494E6.9020907@Rhul.Ac.Uk>
Message-ID: <5368.1400151909@cl.cam.ac.uk>

i assume you're right in what you say (it seems to me that you are...).

in which case, i'm faintly surprised that "texdoc tex" seems to give me
pdf of a woven copy of tex.web

fwiw (not much, really), if i had the choice of losing one of tex.web
and tex.pdf, i would go for the latter.  but then, i've not actually
compiled a tex since the 80s.

robin


From P.Taylor at Rhul.Ac.Uk  Thu May 15 13:11:37 2014
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Thu, 15 May 2014 12:11:37 +0100
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <alpine.LNX.2.00.1405151247510.26699@pcl321.mppmu.mpg.de>
References: <alpine.LNX.2.00.1405151247510.26699@pcl321.mppmu.mpg.de>
Message-ID: <5374A0E9.8010806@Rhul.Ac.Uk>

Thank you, Peter; much appreciated.
** Phil.
--------
Peter Breitenlohner wrote:

> if you really want the version in TeX Live 2013 you should use
>
> http://tug.org/svn/texlive/branches/branch2013/Build/source/texk/web2c/tex.web
>
> (version 3.1415926) unchanged since 2008.
>
>    http://tug.org/svn/texlive/trunk/Build/source/texk/web2c/tex.web
> is the current version 3.14159265 for TeX Live 2014, updated January 2014.
-- 
All duplicate recycled material deleted on principle.


From heiko.oberdiek at googlemail.com  Thu May 15 13:14:10 2014
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Thu, 15 May 2014 13:14:10 +0200
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <53747C6A.5060703@Rhul.Ac.Uk>
References: <53747C6A.5060703@Rhul.Ac.Uk>
Message-ID: <5374A182.1030700@googlemail.com>

Hello Phil,

On 15.05.2014 10:35, Philip Taylor wrote:
> Seeking to offer a rebuttal to an argument adduced today that stated
> "It is somewhat close to impossible to have truly bug free code in any
> project over a few thousand lines.", I tried "Tangle TeX.web" from the
> TeX Live 2013 command prompt.  Tangle reported :
> 
>> tangle.exe: fatal: web file `tex.web' not found.

Project `latex-tds' also provides a module `knuth' with
PDF documentation files including bookmarks and links:

    CTAN:macros/latex/contrib/latex-tds/knuth.tds.zip

Perhaps Karl has forgotten to install it?

> I then tried a search for "filename:tex.web" on the whole of my
> TeX Live 2013 installation, and was told "file not found".

Currently the `.web' files are sorted into TDS:source/knuth//
However, there they cannot be found, because the search path
in texmf.cnf is;

WEBINPUTS = .;$TEXMF/web//

I have now changed the installation directories in module `knuth'
and put the `.web' files below TDS:web/knuth//. Now
tangle should find `tex.web' and the other `.web' files.

A new release of `latex-tds' is anyway scheduled for this afternoon
(some minor changes in LaTeX2e/base and tools).

Can you check the module `knuth', please?

 https://dl.dropboxusercontent.com/u/71873949/tmp/latex-tds/knuth.tds.zip

The paths are now correct? Nothing missing?

Best regards
  Heiko Oberdiek



From P.Taylor at Rhul.Ac.Uk  Thu May 15 13:19:50 2014
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Thu, 15 May 2014 12:19:50 +0100
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <5368.1400151909@cl.cam.ac.uk>
References: <5368.1400151909@cl.cam.ac.uk>
Message-ID: <5374A2D6.8090006@Rhul.Ac.Uk>



Robin Fairbairns wrote:

> i assume you're right in what you say (it seems to me that you are...).
>
> in which case, i'm faintly surprised that "texdoc tex" seems to give me
> pdf of a woven copy of tex.web

Tut tut.  A derived file in TeX Live with no accompanying source ?
Karl will have it deleted immediately, if not sooner :-)

> fwiw (not much, really), if i had the choice of losing one of tex.web
> and tex.pdf, i would go for the latter.  but then, i've not actually
> compiled a tex since the 80s.

Ah, the innocence of age :-)

** Phil.


From P.Taylor at Rhul.Ac.Uk  Thu May 15 14:16:12 2014
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Thu, 15 May 2014 13:16:12 +0100
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <5374A182.1030700@googlemail.com>
References: <53747C6A.5060703@Rhul.Ac.Uk> <5374A182.1030700@googlemail.com>
Message-ID: <5374B00C.3000506@Rhul.Ac.Uk>

Hallo Heiko --

> Project `latex-tds' also provides a module `knuth' with
> PDF documentation files including bookmarks and links:
>
>      CTAN:macros/latex/contrib/latex-tds/knuth.tds.zip
>
> Perhaps Karl has forgotten to install it?

I don't know; even if it were in my TeX Live 2013, my filename
search for "TeX.web" | "*.web" would not have found anything
inside it, since (as far as I know) Windows 7 "Search" does not
look inside ZIP files by default (it looks inside compressed
folders, but that is not quite the same thing).

>> I then tried a search for "filename:tex.web" on the whole of my
>> TeX Live 2013 installation, and was told "file not found".
>
> Currently the `.web' files are sorted into TDS:source/knuth//
> However, there they cannot be found, because the search path
> in texmf.cnf is;
>
> WEBINPUTS = .;$TEXMF/web//

No, the setting of "WEBINPUTS" would not be relevant here; it was
Windows 7 "Search" that I was using, not anything dependent on
TeX Live, Kpathsea[rch] or similar.  There genuinely appears to
be no copy of TeX.web in TeX Live 2013 (full install).

> I have now changed the installation directories in module `knuth'
> and put the `.web' files below TDS:web/knuth//. Now
> tangle should find `tex.web' and the other `.web' files.
>
> A new release of `latex-tds' is anyway scheduled for this afternoon
> (some minor changes in LaTeX2e/base and tools).
>
> Can you check the module `knuth', please?
>
>   https://dl.dropboxusercontent.com/u/71873949/tmp/latex-tds/knuth.tds.zip
>
> The paths are now correct? Nothing missing?

I cannot swear to either of the latter, but a simple test of "Tangle 
TeX.web" from the TeX Live 2013 command prompt now works, although
(of course) a naive user of Windows 7 would fail to find the
resulting output file since the default directory into which the
TeX Live 2013 command prompt opens is not writeable by mere mortals
and the results get sent to some concealed location that I cannot
be bothered to track down ...

> C:\Windows\system32>tangle tex.web
> This is TANGLE, Version 4.5 (TeX Live 2013/W32TeX)
> *1*17*25*38*54*72*99*110*115*133*162*173*199*203*207*211*220*256*268*289*297*300
> *321*332*366*402*464*487*511*539*583*592*644*680*699*719*768*813*862*891*900*919
> *942*967*980*1029*1055*1136*1208*1299*1330*1338*1340*1379*1380
> Writing the output file.....500.....1000.....1500.....2000.....2500.....3000....
> .3500.....4000.....4500.....5000.....5500.....6000.
> Done.
> 1044 strings written to string pool file.
> (No errors were found.)
>
> C:\Windows\system32>

To achieve this, I unpacked "knuth.tds.zip" into 
"D:\TeX\Live\texmf-local\web\knuth" (pure conjecture :  how is a TeX 
Live user intended
to interrogate the system to ask where his/her TeXMF-Local hierarchy
is rooted ?), tried "Tangle TeX.web" from the TeX Live 2013 command 
prompt, found nothing had changed, used the TeX Live manager in GUI
mode to rebuild the filename database(s), and finally all worked as
hoped.

Many thanks, Heiko.
** Phil.


From zdenek.wagner at gmail.com  Thu May 15 15:00:16 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 15 May 2014 15:00:16 +0200
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <5374B00C.3000506@Rhul.Ac.Uk>
References: <53747C6A.5060703@Rhul.Ac.Uk>	<5374A182.1030700@googlemail.com>
 <5374B00C.3000506@Rhul.Ac.Uk>
Message-ID: <CAC1phyYWtZ7vZSiTWz3V0e5MXwesZPgkc-dS2_f-TX84QfjSDg@mail.gmail.com>

2014-05-15 14:16 GMT+02:00 Philip Taylor <P.Taylor at rhul.ac.uk>:

> Hallo Heiko --
>
>
>  Project `latex-tds' also provides a module `knuth' with
>> PDF documentation files including bookmarks and links:
>>
>>      CTAN:macros/latex/contrib/latex-tds/knuth.tds.zip
>>
>> Perhaps Karl has forgotten to install it?
>>
>
> I don't know; even if it were in my TeX Live 2013, my filename
> search for "TeX.web" | "*.web" would not have found anything
> inside it, since (as far as I know) Windows 7 "Search" does not
> look inside ZIP files by default (it looks inside compressed
> folders, but that is not quite the same thing).
>
>
>  I then tried a search for "filename:tex.web" on the whole of my
>>> TeX Live 2013 installation, and was told "file not found".
>>>
>>
>> Currently the `.web' files are sorted into TDS:source/knuth//
>> However, there they cannot be found, because the search path
>> in texmf.cnf is;
>>
>> WEBINPUTS = .;$TEXMF/web//
>>
>
> No, the setting of "WEBINPUTS" would not be relevant here; it was
> Windows 7 "Search" that I was using, not anything dependent on
> TeX Live, Kpathsea[rch] or similar.  There genuinely appears to
> be no copy of TeX.web in TeX Live 2013 (full install).
>
> I always install scheme-full, I have all versions from 2007 to 2014 and
"find" in Linux says that i do not have tex.web. Thus it is not just a
Windows problem, it is the same in Linux.

>
>  I have now changed the installation directories in module `knuth'
>> and put the `.web' files below TDS:web/knuth//. Now
>> tangle should find `tex.web' and the other `.web' files.
>>
>> A new release of `latex-tds' is anyway scheduled for this afternoon
>> (some minor changes in LaTeX2e/base and tools).
>>
>> Can you check the module `knuth', please?
>>
>>   https://dl.dropboxusercontent.com/u/71873949/tmp/latex-tds/
>> knuth.tds.zip
>>
>> The paths are now correct? Nothing missing?
>>
>
> I cannot swear to either of the latter, but a simple test of "Tangle
> TeX.web" from the TeX Live 2013 command prompt now works, although
> (of course) a naive user of Windows 7 would fail to find the
> resulting output file since the default directory into which the
> TeX Live 2013 command prompt opens is not writeable by mere mortals
> and the results get sent to some concealed location that I cannot
> be bothered to track down ...
>
>  C:\Windows\system32>tangle tex.web
>> This is TANGLE, Version 4.5 (TeX Live 2013/W32TeX)
>> *1*17*25*38*54*72*99*110*115*133*162*173*199*203*207*211*
>> 220*256*268*289*297*300
>> *321*332*366*402*464*487*511*539*583*592*644*680*699*719*
>> 768*813*862*891*900*919
>> *942*967*980*1029*1055*1136*1208*1299*1330*1338*1340*1379*1380
>> Writing the output file.....500.....1000.....1500.....2000.....2500.....
>> 3000....
>> .3500.....4000.....4500.....5000.....5500.....6000.
>> Done.
>> 1044 strings written to string pool file.
>> (No errors were found.)
>>
>> C:\Windows\system32>
>>
>
> To achieve this, I unpacked "knuth.tds.zip" into
> "D:\TeX\Live\texmf-local\web\knuth" (pure conjecture :  how is a TeX Live
> user intended
> to interrogate the system to ask where his/her TeXMF-Local hierarchy
> is rooted ?), tried "Tangle TeX.web" from the TeX Live 2013 command
> prompt, found nothing had changed, used the TeX Live manager in GUI
> mode to rebuild the filename database(s), and finally all worked as
> hoped.
>

Yes, the path in WEBINPUTS is defined with !! which means that the file
names are searched in the database only, not on the disk.

>
> Many thanks, Heiko.
> ** Phil.
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140515/f1627891/attachment.html>

From heiko.oberdiek at googlemail.com  Thu May 15 15:17:17 2014
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Thu, 15 May 2014 15:17:17 +0200
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <5374B00C.3000506@Rhul.Ac.Uk>
References: <53747C6A.5060703@Rhul.Ac.Uk> <5374A182.1030700@googlemail.com>
 <5374B00C.3000506@Rhul.Ac.Uk>
Message-ID: <5374BE5D.3080003@googlemail.com>

Hello Phil,

On 15.05.2014 14:16, Philip Taylor wrote:
> Hallo Heiko --
> 
>> Project `latex-tds' also provides a module `knuth' with
>> PDF documentation files including bookmarks and links:
>>
>>      CTAN:macros/latex/contrib/latex-tds/knuth.tds.zip
>>
>> Perhaps Karl has forgotten to install it?
> 
> I don't know;

It seems that the `.web' files are not missed a long time.
But it's something for Karl to sort out.

>>> I then tried a search for "filename:tex.web" on the whole of my
>>> TeX Live 2013 installation, and was told "file not found".
>>
>> Currently the `.web' files are sorted into TDS:source/knuth//
>> However, there they cannot be found, because the search path
>> in texmf.cnf is;
>>
>> WEBINPUTS = .;$TEXMF/web//
> 
> No, the setting of "WEBINPUTS" would not be relevant here;

Starting point was something like `tangle tex.web'. Then the
`.web' file should be in the current directory or in a path,
found via WEBINPUTS.

> it was
> Windows 7 "Search" that I was using, not anything dependent on
> TeX Live, Kpathsea[rch] or similar.  There genuinely appears to
> be no copy of TeX.web in TeX Live 2013 (full install).

Currently there is only `glue.web' in TL2014-pretest.

>> I have now changed the installation directories in module `knuth'
>> and put the `.web' files below TDS:web/knuth//. Now
>> tangle should find `tex.web' and the other `.web' files.

>> https://dl.dropboxusercontent.com/u/71873949/tmp/latex-tds/knuth.tds.zip
>>
>> The paths are now correct? Nothing missing?
> 
> I cannot swear to either of the latter, but a simple test of "Tangle
> TeX.web" from the TeX Live 2013 command prompt now works,

On case-sensitive file systems, the command is:

    tangle tex.web

> although
> (of course) a naive user of Windows 7 would fail to find the

A "naive" user would not even find a command prompt and if he
stumbles into it, he would not know what to do.

> resulting output file since the default directory into which the
> TeX Live 2013 command prompt opens is not writeable by mere mortals
> and the results get sent to some concealed location that I cannot
> be bothered to track down ...

I get the following error message in a read-only directory:

    tangle: tex.p: Permission denied

Perhaps it is not written at all in your system.
In theory there is TEXMFOUTPUT, from texmf.cnf:

% Write .log/.dvi/etc. files here, if the current directory is unwritable.
%TEXMFOUTPUT = /tmp

But it is commented and tangle does not seem to support this
either.

>> C:\Windows\system32>tangle tex.web
>> This is TANGLE, Version 4.5 (TeX Live 2013/W32TeX)
>> *1*17*25*38*54*72*99*110*115*133*162*173*199*203*207*211*220*256*268*289*297*300
>>
>> *321*332*366*402*464*487*511*539*583*592*644*680*699*719*768*813*862*891*900*919
>>
>> *942*967*980*1029*1055*1136*1208*1299*1330*1338*1340*1379*1380
>> Writing the output
>> file.....500.....1000.....1500.....2000.....2500.....3000....
>> .3500.....4000.....4500.....5000.....5500.....6000.
>> Done.
>> 1044 strings written to string pool file.
>> (No errors were found.)
>>
>> C:\Windows\system32>

Good, except that I would not use a windows system directory as current
directory.

> To achieve this, I unpacked "knuth.tds.zip" into
> "D:\TeX\Live\texmf-local\web\knuth" (pure conjecture :  how is a TeX
> Live user intended

"knuth.tds.zip" should be unpacked at the root of the TDS tree, e.g.:

  D:
  cd D:\TeX\Live\texmf-local
  unzip knuth.tds.zip

(with the correct location for knuth.tds.zip)
Then tex.web should end up in

    D:\TeX\Live\texmf-local/web/knuth/tex/tex.web

> to interrogate the system to ask where his/her TeXMF-Local hierarchy
> is rooted ?), tried "Tangle TeX.web" from the TeX Live 2013 command
> prompt, found nothing had changed, used the TeX Live manager in GUI
> mode to rebuild the filename database(s), and finally all worked as
> hoped.

Yes, by default, the file name database is needed for local trees.
Only the home trees (TEXMFHOME) are searched directly, if a file
is not found.

Yours sincerely
  Heiko Oberdiek


From P.Taylor at Rhul.Ac.Uk  Thu May 15 15:37:30 2014
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Thu, 15 May 2014 14:37:30 +0100
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <5374BE5D.3080003@googlemail.com>
References: <53747C6A.5060703@Rhul.Ac.Uk> <5374A182.1030700@googlemail.com>
 <5374B00C.3000506@Rhul.Ac.Uk> <5374BE5D.3080003@googlemail.com>
Message-ID: <5374C31A.3090808@Rhul.Ac.Uk>



Heiko Oberdiek wrote:

>> although
>> (of course) a naive user of Windows 7 would fail to find the
>
> A "naive" user would not even find a command prompt and if he
> stumbles into it, he would not know what to do.

I respectfully disagree; the TeX Live command prompt is intentionally
exposed in the Start / Programs / TeX Live 2013 entry, and the naive
user is almost certain to try it ...

> I get the following error message in a read-only directory:
>
>      tangle: tex.p: Permission denied
>
> Perhaps it is not written at all in your system.

Oh, it is written; Windows 7 "knows" that a naive user will try to
write to /Windows/System32, allows the program to run to completion,
but secretly redirects the output to another location that is
near impossible to locate ...  In fact, by various devious means,
I was finally able to ascertain that it ended up in :

C:\Users\Chaa006\AppData\Local\VirtualStore\Windows\System32

> Then tex.web should end up in
>
>      D:\TeX\Live\texmf-local/web/knuth/tex/tex.web

Yes, that is indeed where it landed.

>> to interrogate the system to ask where his/her TeXMF-Local hierarchy
>> is rooted ?), tried "Tangle TeX.web" from the TeX Live 2013 command
>> prompt, found nothing had changed, used the TeX Live manager in GUI
>> mode to rebuild the filename database(s), and finally all worked as
>> hoped.
>
> Yes, by default, the file name database is needed for local trees.
> Only the home trees (TEXMFHOME) are searched directly, if a file
> is not found.

OK, understood, but are you (or is another member of this list) able
to answer my question above :  how is a TeX Live user intended to
ascertain where his/her TeXMF-Local is located ?  The location is
exposed at installation time, but is not re-displayed (as far as
I can tell) through the TeX Live manager GUI, so if maintenance
is separated from installation by several months, a user may well
have forgotten where he/she wanted his/her TeXMF-Local to be rooted.

** Phil.


From heiko.oberdiek at googlemail.com  Thu May 15 15:48:06 2014
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Thu, 15 May 2014 15:48:06 +0200
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <5374C31A.3090808@Rhul.Ac.Uk>
References: <53747C6A.5060703@Rhul.Ac.Uk> <5374A182.1030700@googlemail.com>
 <5374B00C.3000506@Rhul.Ac.Uk> <5374BE5D.3080003@googlemail.com>
 <5374C31A.3090808@Rhul.Ac.Uk>
Message-ID: <5374C596.2020908@googlemail.com>

On 15.05.2014 15:37, Philip Taylor wrote:

>> I get the following error message in a read-only directory:
>>
>>      tangle: tex.p: Permission denied
>>
>> Perhaps it is not written at all in your system.
> 
> Oh, it is written; Windows 7 "knows" that a naive user will try to
> write to /Windows/System32, allows the program to run to completion,
> but secretly redirects the output to another location that is
> near impossible to locate ...  In fact, by various devious means,
> I was finally able to ascertain that it ended up in :
> 
> C:\Users\Chaa006\AppData\Local\VirtualStore\Windows\System32

Ah, a "Windows feature", thanks for the investigation.

> OK, understood, but are you (or is another member of this list) able
> to answer my question above :  how is a TeX Live user intended to
> ascertain where his/her TeXMF-Local is located ?  The location is
> exposed at installation time, but is not re-displayed (as far as
> I can tell) through the TeX Live manager GUI, so if maintenance
> is separated from installation by several months, a user may well
> have forgotten where he/she wanted his/her TeXMF-Local to be rooted.

I usually check `texmf.cnf`, if I want to know, how the directories
are configured. But I am not a "normal" user.

Yours sincerely
  Heiko


From kakuto at fuk.kindai.ac.jp  Thu May 15 15:55:30 2014
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu, 15 May 2014 22:55:30 +0900
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <5374C31A.3090808@Rhul.Ac.Uk>
References: <53747C6A.5060703@Rhul.Ac.Uk> <5374A182.1030700@googlemail.com>
 <5374B00C.3000506@Rhul.Ac.Uk> <5374BE5D.3080003@googlemail.com>
 <5374C31A.3090808@Rhul.Ac.Uk>
Message-ID: <AEBCE9E482B84CEFA68D2789BB9EF167@CJ3001517A>

Dear Philip,

> ... so if maintenance
> is separated from installation by several months, a user may well
> have forgotten where he/she wanted his/her TeXMF-Local to be rooted.

If a user knows command prompt
kpsewhich -var-value=TEXMFLOCAL

Best regards,
Akira



From P.Taylor at Rhul.Ac.Uk  Thu May 15 16:06:13 2014
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Thu, 15 May 2014 15:06:13 +0100
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <AEBCE9E482B84CEFA68D2789BB9EF167@CJ3001517A>
References: <53747C6A.5060703@Rhul.Ac.Uk> <5374A182.1030700@googlemail.com>
 <5374B00C.3000506@Rhul.Ac.Uk> <5374BE5D.3080003@googlemail.com>
 <5374C31A.3090808@Rhul.Ac.Uk> <AEBCE9E482B84CEFA68D2789BB9EF167@CJ3001517A>
Message-ID: <5374C9D5.3080402@Rhul.Ac.Uk>



Akira Kakuto wrote:

> kpsewhich -var-value=TEXMFLOCAL

Excellent, thank you Akira-san.  One small problem is that
the value returned contains an embedded double period for
no obvious reason :

> D:/TeX/Live/2013/../texmf-local

and whilst one /can/ "CD" to it and end up in the correct
place :

> D:\>cd D:/TeX/Live/2013/../texmf-local
> D:\TeX\Live\texmf-local>

it is certain to be confusing to the naive user.

But I may I suggest that information such as this should also
be exposable through the TeX Live manager GUI ?

** Phil.


From kakuto at fuk.kindai.ac.jp  Thu May 15 16:31:42 2014
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu, 15 May 2014 23:31:42 +0900
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <5374C9D5.3080402@Rhul.Ac.Uk>
References: <53747C6A.5060703@Rhul.Ac.Uk> <5374A182.1030700@googlemail.com>
 <5374B00C.3000506@Rhul.Ac.Uk> <5374BE5D.3080003@googlemail.com>
 <5374C31A.3090808@Rhul.Ac.Uk> <AEBCE9E482B84CEFA68D2789BB9EF167@CJ3001517A>
 <5374C9D5.3080402@Rhul.Ac.Uk>
Message-ID: <CB0ACEDA285C46FDAAAB54908025C55F@CJ3001517A>

Dear Philip,

>> D:/TeX/Live/2013/../texmf-local

>From TeX Live 2014, the above is printed as
D:/TeX/Live/texmf-local

Best regards,
Akira



From P.Taylor at Rhul.Ac.Uk  Thu May 15 16:46:48 2014
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Thu, 15 May 2014 15:46:48 +0100
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <CB0ACEDA285C46FDAAAB54908025C55F@CJ3001517A>
References: <53747C6A.5060703@Rhul.Ac.Uk> <5374A182.1030700@googlemail.com>
 <5374B00C.3000506@Rhul.Ac.Uk> <5374BE5D.3080003@googlemail.com>
 <5374C31A.3090808@Rhul.Ac.Uk> <AEBCE9E482B84CEFA68D2789BB9EF167@CJ3001517A>
 <5374C9D5.3080402@Rhul.Ac.Uk> <CB0ACEDA285C46FDAAAB54908025C55F@CJ3001517A>
Message-ID: <5374D358.9060101@Rhul.Ac.Uk>



Akira Kakuto wrote:

>  From TeX Live 2014, the above is printed as D:/TeX/Live/texmf-local

Oohhh, a reason to upgrade :-)
Thank you.
** Phil.


From contact at mychemistry.eu  Thu May 15 18:45:41 2014
From: contact at mychemistry.eu (Clemens Niederberger)
Date: Thu, 15 May 2014 18:45:41 +0200
Subject: [tex-live] texdoc and chemmacros
Message-ID: <5374EF35.8020309@mychemistry.eu>

The chemmacros bundle of packages has four documentation files (plus
README) which texdoc -l correctly shows:

> texdoc -l chemmacros
 1 /data/texlive/2013/texmf-dist/doc/latex/chemmacros/chemformula_en.pdf
   = [en] Chemformula package documentation
 2 /data/texlive/2013/texmf-dist/doc/latex/chemmacros/chemgreek_en.pdf
   = [en] Chemgreek package documentation
 3 /data/texlive/2013/texmf-dist/doc/latex/chemmacros/chemmacros_en.pdf
   = [en] Chemmacros package documentation
 4 /data/texlive/2013/texmf-dist/doc/latex/chemmacros/ghsystem_en.pdf
   = [en] Ghsystem package documentation
 5 /data/texlive/2013/texmf-dist/doc/latex/chemmacros/README
   = Readme

However, the order is a bit unexpected: the main file is
chemmacros_en.pdf which is currently pos 3.

> texdoc chemmacros

opens the chemformula_en.pdf file which I think is not what most users
expect.

Can the order be changed? I think a good order would be

1 chemmacros_en.pdf
2 chemformula_en.pdf
3 ghsystem_en.pdf
4 chemgreek_en.pdf
5 README

although I don't really care about positions 2 to 4.

Best regards

-- 
Clemens Niederberger
Public PGP Key: 65CCDFE7
http://www.niederberger.com.de/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 555 bytes
Desc: OpenPGP digital signature
URL: <http://tug.org/pipermail/tex-live/attachments/20140515/4618d52e/attachment.bin>

From dluecking at sbcglobal.net  Thu May 15 20:57:29 2014
From: dluecking at sbcglobal.net (Dan Luecking)
Date: Thu, 15 May 2014 13:57:29 -0500
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
Message-ID: <205409.91619.bm@smtp120.sbc.mail.gq1.yahoo.com>

On Thu, May 15, 2014, at 15:37:30 CEST, Philip Taylor (P.Taylor at 
Rhul.Ac.Uk) wrote:

>  how is a TeX Live user intended to
>ascertain where his/her TeXMF-Local is located ?

Here are several ways.

Running
     tlmgr conf
at a command line should tell you that (and a great deal more).

If you want only TEXMFLOCAL:
     tlmgr conf texmf TEXMFLOCAL
gives me (in 2014 pretest):
     TEXMFLOCAL not defined in texmf config file (C:/TeXLive/2014/texmf.cnf)
     texmf TEXMFLOCAL default value: C:/TeXLive/texmf-local 
(kpsewhich -var-value)
Which eventually gives the requisite information as well as the
suggestion of using the (much quicker) command kpsewhich -var-value
(though one might need to run kpsewhich -help to find the correct syntax).

Another (much slower) method:
     tlmgr conf | find "TEXMFLOCAL"
Use grep when available, instead of find.

Also
     tlmgr conf --help
can tell you how to change the value.


Dan


Daniel H. Luecking
Department of Mathematical Sciences
Fayetteville, Arkansas
http://www-cs-faculty.stanford.edu/~knuth/iaq.html 



From karl at freefriends.org  Fri May 16 00:31:05 2014
From: karl at freefriends.org (Karl Berry)
Date: Thu, 15 May 2014 22:31:05 +0000
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <5374BE5D.3080003@googlemail.com>
Message-ID: <201405152231.s4FMV5F0022839@freefriends.org>

tex.web, and all the web sources, and all the other sources, are and
always have been included in the distribution, for years now in a file
named texlive-*-source.tar.gz.  That file is in Master/source/ in the
source repository, texlive/source/ on the DVD, etc.  On the web, the
best place to look for the current *released* sources is CTAN:
http://mirror.ctan.org/systems/texlive/Source/

For many historical versions, there is:
ftp://tug.org/historic/systems/texlive/

That tar file alone is about 180MB, and there is about that much again
of other sources in the directory.  They are, of course, not needed at
runtime.  Therefore those hundreds of megabytes are not included when
installing over the net, i.e., in the tlnet directory.

I have added some (more) links to the TL web pages about the sources.

Karl


From karl at freefriends.org  Fri May 16 00:47:54 2014
From: karl at freefriends.org (Karl Berry)
Date: Thu, 15 May 2014 22:47:54 +0000
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <5374BE5D.3080003@googlemail.com>
Message-ID: <201405152247.s4FMlsVA023497@freefriends.org>

P.S. If one wants the original sources from the Stanford TeX project,
specifically, the best place to look is again CTAN:
http://mirror.ctan.org/systems/knuth/

Of course, TL includes those .web's unmodified, but still, sometimes one
likes to look at the originals.

P.P.S. The actual (up-upstream, I guess) source is
ftp://ftp.cs.stanford.edu/pub/tex/tex14.tar.gz, but the rest of pub/tex
is filled with many non-Knuth, and generally stale, files, so one has to
be careful.


From preining at logic.at  Fri May 16 01:31:09 2014
From: preining at logic.at (Norbert Preining)
Date: Fri, 16 May 2014 08:31:09 +0900
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <5374A2D6.8090006@Rhul.Ac.Uk>
References: <5368.1400151909@cl.cam.ac.uk> <5374A2D6.8090006@Rhul.Ac.Uk>
Message-ID: <20140515233109.GG30691@auth.logic.tuwien.ac.at>

> Tut tut.  A derived file in TeX Live with no accompanying source ?
> Karl will have it deleted immediately, if not sooner :-)

Source is in Build/source, are you making noise on purpose?

Tut tut tut. Get a Lego train and continue with it making tut tut.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------


From preining at logic.at  Fri May 16 01:34:34 2014
From: preining at logic.at (Norbert Preining)
Date: Fri, 16 May 2014 08:34:34 +0900
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <5374C9D5.3080402@Rhul.Ac.Uk>
References: <53747C6A.5060703@Rhul.Ac.Uk> <5374A182.1030700@googlemail.com>
 <5374B00C.3000506@Rhul.Ac.Uk> <5374BE5D.3080003@googlemail.com>
 <5374C31A.3090808@Rhul.Ac.Uk> <AEBCE9E482B84CEFA68D2789BB9EF167@CJ3001517A>
 <5374C9D5.3080402@Rhul.Ac.Uk>
Message-ID: <20140515233434.GH30691@auth.logic.tuwien.ac.at>

On Thu, 15 May 2014, Philip Taylor wrote:
> the value returned contains an embedded double period for
> no obvious reason :
> 
> >D:/TeX/Live/2013/../texmf-local

Because you don't see an obvious reason does not mean there is none.
It is the way to make sure that we are in the parent directory
of the installation.

> But I may I suggest that information such as this should also
> be exposable through the TeX Live manager GUI ?

Why? No.

It is documented in the texlive manual (I guess), and shown during
installation time, where you even have the chance to *change* this setting.


Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------


From karl at freefriends.org  Fri May 16 01:45:38 2014
From: karl at freefriends.org (Karl Berry)
Date: Thu, 15 May 2014 23:45:38 +0000
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <53748BDA.3030803@Rhul.Ac.Uk>
Message-ID: <201405152345.s4FNjcCT025403@freefriends.org>

    > Display of files larger than 512 KB disallowed by configuration

I wasn't aware of that limit.  I've increased it to be enough for
tex.web, et al.

k


From karl at freefriends.org  Fri May 16 01:58:06 2014
From: karl at freefriends.org (Karl Berry)
Date: Thu, 15 May 2014 23:58:06 +0000
Subject: [tex-live] freezes for TL14
Message-ID: <201405152358.s4FNw6q7025767@freefriends.org>

(I'm breaking my own rule and sending this to multiple lists.  If you
feel the need to reply, please reply only to one of the lists, not all
of them.)

Thought I'd send a note about the status of TeX Live 2014:

- I hope the final updates to the sources for the compiled executables
will be in by tomorrow.  We are close, in any case.  (I am not aware of
any pending changes or problems except to Asymptote.)

- I hope the final updates from CTAN into TL will be done for the build
on May 21 (next Wednesday).  So if package authors want updates to get
onto the DVD, please make releases ASAP.

- As usual, there will be some testing of the TeX Collection as a whole
before the DVD image is sent to manufacturing.  If you're curious, some
related dates are on http://tug.org/texlive.  Of course all is subject
to necessary change.

Best,
Karl


From siepo at cybercomm.nl  Fri May 16 10:59:29 2014
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Fri, 16 May 2014 10:59:29 +0200
Subject: [tex-live] w32: default multi-user
Message-ID: <20140516085929.GA2036@bitmuis.thuis.internal>

A new Windows wrapper for TeX Live Manager now triggers a UAC prompt
if it needs admin permissions and does not have them. On XP it bails
out with an explanation in such cases.

With this change, it is reasonable to make a multiuser install the
default when the installer is run with admin privileges.

Note that it is still possible to mess up a multiuser install by
running tlmgr from the command-line as a non-privileged user.

-- 
Siep Kroonenberg


From dbitouze at wanadoo.fr  Fri May 16 11:25:59 2014
From: dbitouze at wanadoo.fr (=?utf-8?Q?Denis_Bitouz=C3=A9?=)
Date: Fri, 16 May 2014 11:25:59 +0200
Subject: [tex-live] w32: default multi-user
References: <20140516085929.GA2036@bitmuis.thuis.internal>
Message-ID: <m34n0q9is8.fsf@somewhere.org>

Siep Kroonenberg wrote:
> A new Windows wrapper for TeX Live Manager now triggers a UAC prompt
> if it needs admin permissions and does not have them. On XP it bails
> out with an explanation in such cases.
>
> With this change, it is reasonable to make a multiuser install the
> default when the installer is run with admin privileges.
>
> Note that it is still possible to mess up a multiuser install by
> running tlmgr from the command-line as a non-privileged user.

Many thanks, Siep!
-- 
Denis



From karl at freefriends.org  Fri May 16 20:34:21 2014
From: karl at freefriends.org (Karl Berry)
Date: Fri, 16 May 2014 18:34:21 +0000
Subject: [tex-live] [SCI workcamp D-1.39 forced labour] Re: --help
 argument broken in install-tl script when resuming failed installation
In-Reply-To: <53682BF4.6010303@aol.de>
Message-ID: <201405161834.s4GIYLkg022739@freefriends.org>

Hi again Karl,

    I was wondering "How to preserve files downloaded by install-tl" on
    http://tex.stackexchange.com/questions/175380/how-to-preserve-files-downloaded-by-install-tl.

Several things.  To answer the original question, install-tl does not
have a concept of its state.  So if the download fails somewhere in the
middle, I don't think there is any good way to avoid downloading the
same stuff again.  The successfully downloaded files are kept in the
temp/ subdir of the installation root directory (that you specified)
while the install is going on, but they don't help.

--in-place is not helpful as far as I can see (I tried it).  That's
intended to be used after you have a working installation, like the svn
checkout of the repository.  

We aren't going to implement a full state-of-the-world thing in
install-tl a la apt-cache.  We already go to a lot of trouble to check
the network connection, retry downloads.  If your network is that
unreliable (totally understandable), then the answer is to use another
method to get the files ...

.. such as rsync.  At the tex.sx url above, Norbert suggested
rsnapshot, but if all you want to do is copy the distributed files, you
could just use rsync (or wget) directly.  Example invocations at:
  http://tug.org/texlive/acquire-mirror.html


Next, regarding install-tl --help: both tlmgr and install-tl run their
help through perldoc, because people vociferously wanted their
highlighting.  But sometimes perldoc and/or the $PAGER that it invokes
is broken, or the combination thereof.  We detect some such cases but we
can't detect them all.

So, I've just implemented an override: if the envvar NOPERLDOC is set
(to anything), then the piping through perldoc is not done and you just
get plain text.  Unless the Perl installation is completely deficient,
that should work.  If it is completely deficient, well, the help text is
just the pod at the end of the source file; view it in any
editor/pager/whatever.  (Also, it's online, linked from
http://tug.org/texlive/doc, among other places.)


Finally, your tex.sx url above talks about the tex-live mailing and not
knowing to reference it.  As I also mentioned before, the mailing list
archive url should suffice.  That is, "the thread starting at
http://tug.org/pipermail/tex-live/2014-May/035206.html" ...


And yes, to reiterate, all this is of course public info, so please
cite/copy/link/whatever in your tex.sx question as appropriate.

Best,
(another) Karl


From Jim.Diamond at acadiau.ca  Sat May 17 01:15:00 2014
From: Jim.Diamond at acadiau.ca (Jim Diamond)
Date: Fri, 16 May 2014 20:15:00 -0300
Subject: [tex-live] [texhax] freezes for TL14
In-Reply-To: <201405152358.s4FNw6q7025767@freefriends.org>
References: <201405152358.s4FNw6q7025767@freefriends.org>
Message-ID: <20140516231500.GA30629@jdiamond-nb2>

On Thu, May 15, 2014 at 23:58 (+0000), Karl Berry wrote:

> (I'm breaking my own rule and sending this to multiple lists.  If you
> feel the need to reply, please reply only to one of the lists, not all
> of them.)

> Thought I'd send a note about the status of TeX Live 2014:

> - I hope the final updates to the sources for the compiled executables
> will be in by tomorrow.  We are close, in any case.  (I am not aware of
> any pending changes or problems except to Asymptote.)

Karl,

I apologize for submitting this so close to the wire.  I've had some
updates to xpdfopen sitting around for a while but they have never
gotten high enough in the priority list until now.

I will submit my updated to CTAN asap, but you can get the new version
at
        http://cs.acadiau.ca/~jdiamond/xpdfopen-0.84.tar.gz

This version adds the ability to specify an initial page to display
when the PDF file is first opened.



Peter,

cc'ed you since you have been in the loop on this one in the past.


Cheers.
                                Jim


From karl at freefriends.org  Sat May 17 01:48:32 2014
From: karl at freefriends.org (Karl Berry)
Date: Fri, 16 May 2014 23:48:32 +0000
Subject: [tex-live] texdoc and chemmacros
In-Reply-To: <5374EF35.8020309@mychemistry.eu>
Message-ID: <201405162348.s4GNmWPw004013@freefriends.org>

Hi Clemens,

    Can the order be changed? 

Well, this being software, anything is possible in theory :).

To date, I believe that what Manuel has programmed is if the the
documentation has a details="" attribute in the Catalogue, it is
prioritized.  In this case, all four manuals have details=, so I'm
guessing they are just presented alphabetically.

Manuel, perhaps a reasonable next refinement would be to prioritize the
one with a details string that matches the asked-for name (case
insensitive).  That would give the right results in this case anyway.
(Of course, texdoc patches are welcome from anyone.)

Thanks,
Karl

P.S. For the future, texdoc at tug.org is the best place for
texdoc-specific issues, being a focused/much smaller list.


From preining at logic.at  Sat May 17 02:06:32 2014
From: preining at logic.at (Norbert Preining)
Date: Sat, 17 May 2014 09:06:32 +0900
Subject: [tex-live] texdoc and chemmacros
In-Reply-To: <201405162348.s4GNmWPw004013@freefriends.org>
References: <5374EF35.8020309@mychemistry.eu>
 <201405162348.s4GNmWPw004013@freefriends.org>
Message-ID: <20140517000632.GJ30691@auth.logic.tuwien.ac.at>

On Fri, 16 May 2014, Karl Berry wrote:
> To date, I believe that what Manuel has programmed is if the the
> documentation has a details="" attribute in the Catalogue, it is
> prioritized.  In this case, all four manuals have details=, so I'm
> guessing they are just presented alphabetically.
> 
> Manuel, perhaps a reasonable next refinement would be to prioritize the
> one with a details string that matches the asked-for name (case
> insensitive).  That would give the right results in this case anyway.
> (Of course, texdoc patches are welcome from anyone.)

I guess some reasonable
	alias(..)
line would adjust the score for the documents ... have to look up the 
meaning.

Will try to fix and commit (and hopefully Manuel includes it in texdoc
svn, too)


Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------


From preining at logic.at  Sat May 17 02:13:59 2014
From: preining at logic.at (Norbert Preining)
Date: Sat, 17 May 2014 09:13:59 +0900
Subject: [tex-live] texdoc and chemmacros
In-Reply-To: <20140517000632.GJ30691@auth.logic.tuwien.ac.at>
References: <5374EF35.8020309@mychemistry.eu>
 <201405162348.s4GNmWPw004013@freefriends.org>
 <20140517000632.GJ30691@auth.logic.tuwien.ac.at>
Message-ID: <20140517001359.GK30691@auth.logic.tuwien.ac.at>


Adding this to texconf.cnf fixes the problem

	# chemmacros order of docs is a bit messed up
	adjscore(chemmacros) chemmacros_en.pdf = +1

Should better be committed to the original texdoc svn ...?

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------


From reinhard.kotucha at web.de  Sat May 17 02:58:22 2014
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 17 May 2014 02:58:22 +0200
Subject: [tex-live] Location of {TeX,*}.web in TeX Live 2013 ?
In-Reply-To: <20140515233109.GG30691@auth.logic.tuwien.ac.at>
References: <5368.1400151909@cl.cam.ac.uk>	<5374A2D6.8090006@Rhul.Ac.Uk>
 <20140515233109.GG30691@auth.logic.tuwien.ac.at>
Message-ID: <21366.46126.938137.931996@zaphod.ms25.net>

On 2014-05-16 at 08:31:09 +0900, Norbert Preining wrote:

 > > Tut tut.  A derived file in TeX Live with no accompanying source ?
 > > Karl will have it deleted immediately, if not sooner :-)
 > 
 > Source is in Build/source, are you making noise on purpose?

Norbert, please don't take things too serious if there is a smiley at
the end of a message.  See above. :-)

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From zdenek.wagner at gmail.com  Sat May 17 18:11:10 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sat, 17 May 2014 18:11:10 +0200
Subject: [tex-live] freezes for TL14
In-Reply-To: <201405152358.s4FNw6q7025767@freefriends.org>
References: <201405152358.s4FNw6q7025767@freefriends.org>
Message-ID: <CAC1phyaDDonohp6Yc44XGNt3CXDZmax3bWeF5+JXEnS6ft3mQw@mail.gmail.com>

2014-05-16 1:58 GMT+02:00 Karl Berry <karl at freefriends.org>:

> (I'm breaking my own rule and sending this to multiple lists.  If you
> feel the need to reply, please reply only to one of the lists, not all
> of them.)
>
> Thought I'd send a note about the status of TeX Live 2014:
>
> - I hope the final updates to the sources for the compiled executables
> will be in by tomorrow.  We are close, in any case.  (I am not aware of
> any pending changes or problems except to Asymptote.)
>
> - I hope the final updates from CTAN into TL will be done for the build
> on May 21 (next Wednesday).  So if package authors want updates to get
> onto the DVD, please make releases ASAP.
>

I have just uploaded to CTAN the new version of the encxvlna package. I
would greatly appreciate if it could be included on te DVD because it
contains an important bug fix.

>
> - As usual, there will be some testing of the TeX Collection as a whole
> before the DVD image is sent to manufacturing.  If you're curious, some
> related dates are on http://tug.org/texlive.  Of course all is subject
> to necessary change.
>
> Best,
> Karl
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140517/693bd3e3/attachment.html>

From krichter722 at aol.de  Sun May 18 15:22:29 2014
From: krichter722 at aol.de (Karl-Philipp Richter)
Date: Sun, 18 May 2014 15:22:29 +0200
Subject: [tex-live] --help argument broken in install-tl script when
 resuming failed installation
In-Reply-To: <201405161834.s4GIYLkg022739@freefriends.org>
References: <201405161834.s4GIYLkg022739@freefriends.org>
Message-ID: <5378B415.1030302@aol.de>

Hi Karl,
thanks for you feedback and you explanation. I updated and linked some
stuff in tex.so. My intention was not so much to deal with unreliable
networks, but with saving data volume and time. Anyway, the concept of
install-tl is clear now.

Bests,
Karl

Am 16.05.2014 20:34, schrieb Karl Berry:
> Hi again Karl,
> 
>     I was wondering "How to preserve files downloaded by install-tl" on
>     http://tex.stackexchange.com/questions/175380/how-to-preserve-files-downloaded-by-install-tl.
> 
> Several things.  To answer the original question, install-tl does not
> have a concept of its state.  So if the download fails somewhere in the
> middle, I don't think there is any good way to avoid downloading the
> same stuff again.  The successfully downloaded files are kept in the
> temp/ subdir of the installation root directory (that you specified)
> while the install is going on, but they don't help.
> 
> --in-place is not helpful as far as I can see (I tried it).  That's
> intended to be used after you have a working installation, like the svn
> checkout of the repository.  
> 
> We aren't going to implement a full state-of-the-world thing in
> install-tl a la apt-cache.  We already go to a lot of trouble to check
> the network connection, retry downloads.  If your network is that
> unreliable (totally understandable), then the answer is to use another
> method to get the files ...
> 
> .. such as rsync.  At the tex.sx url above, Norbert suggested
> rsnapshot, but if all you want to do is copy the distributed files, you
> could just use rsync (or wget) directly.  Example invocations at:
>   http://tug.org/texlive/acquire-mirror.html
> 
> 
> Next, regarding install-tl --help: both tlmgr and install-tl run their
> help through perldoc, because people vociferously wanted their
> highlighting.  But sometimes perldoc and/or the $PAGER that it invokes
> is broken, or the combination thereof.  We detect some such cases but we
> can't detect them all.
> 
> So, I've just implemented an override: if the envvar NOPERLDOC is set
> (to anything), then the piping through perldoc is not done and you just
> get plain text.  Unless the Perl installation is completely deficient,
> that should work.  If it is completely deficient, well, the help text is
> just the pod at the end of the source file; view it in any
> editor/pager/whatever.  (Also, it's online, linked from
> http://tug.org/texlive/doc, among other places.)
> 
> 
> Finally, your tex.sx url above talks about the tex-live mailing and not
> knowing to reference it.  As I also mentioned before, the mailing list
> archive url should suffice.  That is, "the thread starting at
> http://tug.org/pipermail/tex-live/2014-May/035206.html" ...
> 
> 
> And yes, to reiterate, all this is of course public info, so please
> cite/copy/link/whatever in your tex.sx question as appropriate.
> 
> Best,
> (another) Karl
> 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 538 bytes
Desc: OpenPGP digital signature
URL: <http://tug.org/pipermail/tex-live/attachments/20140518/62fbc277/attachment.bin>

From skostysh at lyx.org  Mon May 19 11:35:24 2014
From: skostysh at lyx.org (Scott Kostyshak)
Date: Mon, 19 May 2014 05:35:24 -0400
Subject: [tex-live] Regressions triggered by 'latex' package updates on
	pretest
Message-ID: <CAO7dr0hNKApF95oUNFidxxGGWq83rXvkqX1J3xxwdGJsPgexQQ@mail.gmail.com>

Hi,

I've been testing using the TeX Live 2014 pretest and updates to the
'latex' package caused three different documents to fail to export.

After a full tlmgr update, if I do:
sudo /opt/texbin/tlmgr restore --force latex 32901
the documents go back to exporting correctly.

Unfortunately, I won't have access to the machine where I have TeX
Live 2014 pretest installed for a while so I cannot create minimal
examples. However, I don't want to wait until I can create minimal
examples because by then perhaps it will be too late for the bugs to
be fixed before TeX Live 2014 is released.

The there document classes in the documents are:
FoilTeX
Astronomy & Astrophysics
Europe CV

In case anyone is curious, I have uploaded a tar ball with all three
documents, and the log files from both the "good" ("_before") latex
package version of 32901 and the "bad" ("_after") latex package
version of 34069:
https://www.dropbox.com/s/6vby414gd0bj89i/regressions.tar.gz
The FoilTeX document fails when compiling with XeTeX (also separately
LuaTeX although I don't include the log files), and the other two fail
when compiling with LuaTeX.

Any advice on where I should report this? The LaTeX project does not
seem like the right place to report the regressions because "You
should make sure that the document doesn't use any third-party
packages or document classes." [1]. Further, I have no idea if the
update just uncovered a bug in the three documents.

Should I report it individually to the three document class
maintainers and hope they respond quickly? Should I report it to
XeTeX/LuaTeX?

More information, in case it is relevant, is that I'm using Ubuntu 13.10 64-bit.

Thank you,

Scott

[1] http://latex-project.org/bugs-upload.html


From d.p.carlisle at gmail.com  Mon May 19 11:56:15 2014
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Mon, 19 May 2014 10:56:15 +0100
Subject: [tex-live] Regressions triggered by 'latex' package updates on
	pretest
In-Reply-To: <CAO7dr0hNKApF95oUNFidxxGGWq83rXvkqX1J3xxwdGJsPgexQQ@mail.gmail.com>
References: <CAO7dr0hNKApF95oUNFidxxGGWq83rXvkqX1J3xxwdGJsPgexQQ@mail.gmail.com>
Message-ID: <CAEW6iOj8YTdX5iNb29gwsZrgiYz5SnuQTO2ZzixFyF6QTtHpew@mail.gmail.com>

On 19 May 2014 10:35, Scott Kostyshak <skostysh at lyx.org> wrote:

>
> Any advice on where I should report this? The LaTeX project does not
> seem like the right place to report the regressions because "You
> should make sure that the document doesn't use any third-party
> packages or document classes." [1]. Further, I have no idea if the
> update just uncovered a bug in the three documents.
>
>
> [1] http://latex-project.org/bugs-upload.html
>
>
We (latex project) try to discourage people sending bugs in packages we
have never seen to latex bugs address  for reasons you might guess:-) But
we do like to be told if an update breaks contributed packages (something
we try to avoid, but hard to test in advance) Probably latex-l (
LISTSERV.UNI-HEIDELBERG.DE<http://www.lsoft.com/scripts/wl.exe?SS1=LISTSERV.UNI-HEIDELBERG.DE>)
is a better list. but I'll look at your logs later thanks! Mailing the
package maintainers as well can not do any harm.

There isn't much the texlive team can do as they are more or less
constrained to distributing what's on ctan (I think:-)

David



-- 
http://dpcarlisle.blogspot.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140519/d5a9eebb/attachment.html>

From skostysh at lyx.org  Mon May 19 12:09:28 2014
From: skostysh at lyx.org (Scott Kostyshak)
Date: Mon, 19 May 2014 06:09:28 -0400
Subject: [tex-live] Regressions triggered by 'latex' package updates on
	pretest
In-Reply-To: <CAEW6iOj8YTdX5iNb29gwsZrgiYz5SnuQTO2ZzixFyF6QTtHpew@mail.gmail.com>
References: <CAO7dr0hNKApF95oUNFidxxGGWq83rXvkqX1J3xxwdGJsPgexQQ@mail.gmail.com>
 <CAEW6iOj8YTdX5iNb29gwsZrgiYz5SnuQTO2ZzixFyF6QTtHpew@mail.gmail.com>
Message-ID: <CAO7dr0ig2giShC7+jgPpHoSP1MOwsYDLTa1wLrgiSo9D1b7+zQ@mail.gmail.com>

On Mon, May 19, 2014 at 5:56 AM, David Carlisle <d.p.carlisle at gmail.com> wrote:

> We (latex project) try to discourage people sending bugs in packages we have
> never seen to latex bugs address  for reasons you might guess:-)

Makes sense.

> But we do
> like to be told if an update breaks contributed packages (something we try
> to avoid, but hard to test in advance) Probably latex-l
> (LISTSERV.UNI-HEIDELBERG.DE) is a better list.

This is good to know.

> There isn't much the texlive team can do as they are more or less
> constrained to distributing what's on ctan (I think:-)

I imagined so, but I figured there were some knowledgeable people
around here who could direct me to the correct place to go. Thank you
for the quick reply, advice, and for looking at the logs, David.

Best,

Scott


From joseph.wright at morningstar2.co.uk  Mon May 19 12:33:51 2014
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Mon, 19 May 2014 11:33:51 +0100
Subject: [tex-live] Regressions triggered by 'latex' package updates on
 pretest
In-Reply-To: <CAO7dr0ig2giShC7+jgPpHoSP1MOwsYDLTa1wLrgiSo9D1b7+zQ@mail.gmail.com>
References: <CAO7dr0hNKApF95oUNFidxxGGWq83rXvkqX1J3xxwdGJsPgexQQ@mail.gmail.com>
 <CAEW6iOj8YTdX5iNb29gwsZrgiYz5SnuQTO2ZzixFyF6QTtHpew@mail.gmail.com>
 <CAO7dr0ig2giShC7+jgPpHoSP1MOwsYDLTa1wLrgiSo9D1b7+zQ@mail.gmail.com>
Message-ID: <5379DE0F.3060300@morningstar2.co.uk>

On 19/05/2014 11:09, Scott Kostyshak wrote:
> On Mon, May 19, 2014 at 5:56 AM, David Carlisle <d.p.carlisle at gmail.com> wrote:
> 
>> We (latex project) try to discourage people sending bugs in packages we have
>> never seen to latex bugs address  for reasons you might guess:-)
> 
> Makes sense.
> 
>> But we do
>> like to be told if an update breaks contributed packages (something we try
>> to avoid, but hard to test in advance) Probably latex-l
>> (LISTSERV.UNI-HEIDELBERG.DE) is a better list.
> 
> This is good to know.
> 
>> There isn't much the texlive team can do as they are more or less
>> constrained to distributing what's on ctan (I think:-)
> 
> I imagined so, but I figured there were some knowledgeable people
> around here who could direct me to the correct place to go. Thank you
> for the quick reply, advice, and for looking at the logs, David.
> 
> Best,
> 
> Scott

By the way, I can only get the CV demo to run: the other two require
non-standard classes. I can cut down to:

\documentclass[nologo]{europecv}
\usepackage[utf8]{luainputenc}

\begin{document}

\begin{europecv}{}

\end{europecv}{}

\end{document}

and I know broadly where the issue comes from: changes to inputenc. You
can test that by compiling with last year's inputenc.sty in the
directory with the above: it should work.
-- 
Joseph Wright


From josef.kleber at gmx.de  Mon May 19 15:39:24 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Mon, 19 May 2014 15:39:24 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
Message-ID: <537A098C.8000902@gmx.de>

Hi,

i wrote a bash script osmimage 
(http://jklatex.square7.de/download/osmimage), which downloads an 
OpenStreetMap specified by options.

Furthermore, i plan to write a LaTeX package, which uses this script via 
\write18 (see: 
http://tex.stackexchange.com/questions/178883/write18-encoding).

The Windows version of TeXLive can not execute bash scripts as such. But 
i know you can provide a xxx.exe which executes the bash script xxx, as 
my installfont-tl.
Is it enough to kindly ask that you create such an exe or is there 
something i can do?
The script is not very fancy: command line options -> set defaults -> 
some checks -> construct URL -> wget

Without the exe the only possibility to make it run on Windows is to 
install not just Cygwin but also its TeXLive package. The Windows 
version executes \write18 in cmd.exe! So you end up having two TeX 
distributions installed. Very, very ugly from a user's point of view.

Josef


From daleif at imf.au.dk  Mon May 19 15:58:43 2014
From: daleif at imf.au.dk (Lars Madsen)
Date: Mon, 19 May 2014 13:58:43 +0000
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537A098C.8000902@gmx.de>
References: <537A098C.8000902@gmx.de>
Message-ID: <89ECE88578D8F648A22E307DAEE885794A4486C0@SRVUNIMBX08.uni.au.dk>



/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at imf / More information: http://au.dk/en/daleif at imf


________________________________________
From: tex-live [tex-live-bounces at tug.org] on behalf of Josef Kleber [josef.kleber at gmx.de]
Sent: 19 May 2014 15:39
To: TeX Live
Subject: [tex-live] TeXLive (Windows) bash script -> exe

Hi,

i wrote a bash script osmimage
(http://jklatex.square7.de/download/osmimage), which downloads an
OpenStreetMap specified by options.

Furthermore, i plan to write a LaTeX package, which uses this script via
\write18 (see:
http://tex.stackexchange.com/questions/178883/write18-encoding).

The Windows version of TeXLive can not execute bash scripts as such. But
i know you can provide a xxx.exe which executes the bash script xxx, as
my installfont-tl.
Is it enough to kindly ask that you create such an exe or is there
something i can do?
The script is not very fancy: command line options -> set defaults ->
some checks -> construct URL -> wget

Without the exe the only possibility to make it run on Windows is to
install not just Cygwin but also its TeXLive package. The Windows
version executes \write18 in cmd.exe! So you end up having two TeX
distributions installed. Very, very ugly from a user's point of view.

Josef




From daleif at imf.au.dk  Mon May 19 15:59:57 2014
From: daleif at imf.au.dk (Lars Madsen)
Date: Mon, 19 May 2014 13:59:57 +0000
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <89ECE88578D8F648A22E307DAEE885794A4486C0@SRVUNIMBX08.uni.au.dk>
References: <537A098C.8000902@gmx.de>,
 <89ECE88578D8F648A22E307DAEE885794A4486C0@SRVUNIMBX08.uni.au.dk>
Message-ID: <89ECE88578D8F648A22E307DAEE885794A4486CC@SRVUNIMBX08.uni.au.dk>

Ops, sorry for the empty email

install-tl is not a bash script. It is a perl script.

AFAIK TL does not provide any tools for windows to run shell scripts.



/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at imf / More information: http://au.dk/en/daleif at imf


________________________________________
From: Lars Madsen
Sent: 19 May 2014 15:58
To: Josef Kleber; TeX Live
Subject: RE: [tex-live] TeXLive (Windows) bash script -> exe

/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at imf / More information: http://au.dk/en/daleif at imf


________________________________________
From: tex-live [tex-live-bounces at tug.org] on behalf of Josef Kleber [josef.kleber at gmx.de]
Sent: 19 May 2014 15:39
To: TeX Live
Subject: [tex-live] TeXLive (Windows) bash script -> exe

Hi,

i wrote a bash script osmimage
(http://jklatex.square7.de/download/osmimage), which downloads an
OpenStreetMap specified by options.

Furthermore, i plan to write a LaTeX package, which uses this script via
\write18 (see:
http://tex.stackexchange.com/questions/178883/write18-encoding).

The Windows version of TeXLive can not execute bash scripts as such. But
i know you can provide a xxx.exe which executes the bash script xxx, as
my installfont-tl.
Is it enough to kindly ask that you create such an exe or is there
something i can do?
The script is not very fancy: command line options -> set defaults ->
some checks -> construct URL -> wget

Without the exe the only possibility to make it run on Windows is to
install not just Cygwin but also its TeXLive package. The Windows
version executes \write18 in cmd.exe! So you end up having two TeX
distributions installed. Very, very ugly from a user's point of view.

Josef




From mojca.miklavec.lists at gmail.com  Mon May 19 15:59:43 2014
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 19 May 2014 15:59:43 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537A098C.8000902@gmx.de>
References: <537A098C.8000902@gmx.de>
Message-ID: <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>

On Mon, May 19, 2014 at 3:39 PM, Josef Kleber wrote:
> Hi,
>
> i wrote a bash script osmimage
> (http://jklatex.square7.de/download/osmimage), which downloads an
> OpenStreetMap specified by options.
>
> Furthermore, i plan to write a LaTeX package, which uses this script via
> \write18 (see:
> http://tex.stackexchange.com/questions/178883/write18-encoding).
>
> The Windows version of TeXLive can not execute bash scripts as such. But i
> know you can provide a xxx.exe which executes the bash script xxx

This means that somebody needs to have sufficient time and motivation
to actually rewrite your program in another programming language and
compile it. There is no magic compiler to turn the bash code into an
executable.

> Is it enough to kindly ask that you create such an exe or is there something
> i can do?

Yes, you can rewrite the program in lua and execute it with texlua.

If not lua, it could be python, perl, ruby, ... but this means that
windows users will need to install support for that programming
language separately which will make your script less portable.

Or you could write in in C/C++, but that brings other problems.

If you write your script in lua, it will be guaranteed to work on all
operating systems.

> The script is not very fancy: command line options -> set defaults -> some
> checks -> construct URL -> wget

Precisely for that matter it would be nice if you could rewrite the
script. There are many examples in ConTeXt, in
texmf-dist/scripts/texlive/lua/texlive and probablly elsewhere, but
you could ask for help if you have problems.

Mojca


From leoliu.pku at gmail.com  Mon May 19 16:02:27 2014
From: leoliu.pku at gmail.com (Leo Liu)
Date: Mon, 19 May 2014 22:02:27 +0800
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537A098C.8000902@gmx.de>
References: <537A098C.8000902@gmx.de>
Message-ID: <00bd01cf736a$f9092f10$eb1b8d30$@gmail.com>

If a windows batch file is not powerful enough or difficult to write, I guess
it is better to write a perl script so that Windows users can use tlperl
to run that script, no dependencies are needed then.

Leo

-----Original Message-----
From: tex-live [mailto:tex-live-bounces at tug.org] On Behalf Of Josef Kleber
Sent: Monday, May 19, 2014 9:39 PM
To: TeX Live
Subject: [tex-live] TeXLive (Windows) bash script -> exe

Hi,

i wrote a bash script osmimage 
(http://jklatex.square7.de/download/osmimage), which downloads an 
OpenStreetMap specified by options.

Furthermore, i plan to write a LaTeX package, which uses this script via 
\write18 (see: 
http://tex.stackexchange.com/questions/178883/write18-encoding).

The Windows version of TeXLive can not execute bash scripts as such. But 
i know you can provide a xxx.exe which executes the bash script xxx, as 
my installfont-tl.
Is it enough to kindly ask that you create such an exe or is there 
something i can do?
The script is not very fancy: command line options -> set defaults -> 
some checks -> construct URL -> wget

Without the exe the only possibility to make it run on Windows is to 
install not just Cygwin but also its TeXLive package. The Windows 
version executes \write18 in cmd.exe! So you end up having two TeX 
distributions installed. Very, very ugly from a user's point of view.

Josef




From josef.kleber at gmx.de  Mon May 19 16:34:49 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Mon, 19 May 2014 16:34:49 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
Message-ID: <537A1689.3030406@gmx.de>

Am 19.05.2014 15:59, schrieb Mojca Miklavec:
> On Mon, May 19, 2014 at 3:39 PM, Josef Kleber wrote:
>> Hi,
>>
>> i wrote a bash script osmimage
>> (http://jklatex.square7.de/download/osmimage), which downloads an
>> OpenStreetMap specified by options.
>>
>> Furthermore, i plan to write a LaTeX package, which uses this script via
>> \write18 (see:
>> http://tex.stackexchange.com/questions/178883/write18-encoding).
>>
>> The Windows version of TeXLive can not execute bash scripts as such. But i
>> know you can provide a xxx.exe which executes the bash script xxx
>
> This means that somebody needs to have sufficient time and motivation
> to actually rewrite your program in another programming language and
> compile it. There is no magic compiler to turn the bash code into an
> executable.

As i wrote, there is an installfont-tl.exe in the bin directory. I 
dont't know who wrote it, but it is not from me. It seems to be a simple 
wrapper that opens a cmd.exe and executes my Cygwin bash with 'bash 
installfont-tl'. This would be perfect. Linux isn't a problem anyway.

>> Is it enough to kindly ask that you create such an exe or is there something
>> i can do?
>
> Yes, you can rewrite the program in lua and execute it with texlua.
>

My Lua skills are very basic, but i will take a look. OTOH, then the 
package usage is limited to one engine.

Josef



From josef.kleber at gmx.de  Mon May 19 16:36:25 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Mon, 19 May 2014 16:36:25 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <89ECE88578D8F648A22E307DAEE885794A4486CC@SRVUNIMBX08.uni.au.dk>
References: <537A098C.8000902@gmx.de>,
 <89ECE88578D8F648A22E307DAEE885794A4486C0@SRVUNIMBX08.uni.au.dk>
 <89ECE88578D8F648A22E307DAEE885794A4486CC@SRVUNIMBX08.uni.au.dk>
Message-ID: <537A16E9.7080008@gmx.de>

Am 19.05.2014 15:59, schrieb Lars Madsen:
> Ops, sorry for the empty email
>
> install-tl is not a bash script. It is a perl script.
>
> AFAIK TL does not provide any tools for windows to run shell scripts.
>

I was talking about installfont-tl not install-tl. See the other thread 
with Mojca.

Josef


From zdenek.wagner at gmail.com  Mon May 19 16:50:36 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 19 May 2014 16:50:36 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <00bd01cf736a$f9092f10$eb1b8d30$@gmail.com>
References: <537A098C.8000902@gmx.de>
 <00bd01cf736a$f9092f10$eb1b8d30$@gmail.com>
Message-ID: <CAC1phyaag8hTnmKZOi8+cgr5t0MHjvUXzLyxN=fbdLDXOffGaA@mail.gmail.com>

If you decide to have a shell script + windows batch, you must have two
scripts and keep them in sync. Perl is good but tlperl is not a complete
implementation, it is not guaranteed to support everything. \write18 may be
disabled by some users for security reasons or only a selected group of
scripts may be allowed. Thus luatex is the best choice for many reasons.
Lua code may be a part of your latex package or you can offer standalone
lua code nad a latex package without lua.


2014-05-19 16:02 GMT+02:00 Leo Liu <leoliu.pku at gmail.com>:

> If a windows batch file is not powerful enough or difficult to write, I
> guess
> it is better to write a perl script so that Windows users can use tlperl
> to run that script, no dependencies are needed then.
>
> Leo
>
> -----Original Message-----
> From: tex-live [mailto:tex-live-bounces at tug.org] On Behalf Of Josef Kleber
> Sent: Monday, May 19, 2014 9:39 PM
> To: TeX Live
> Subject: [tex-live] TeXLive (Windows) bash script -> exe
>
> Hi,
>
> i wrote a bash script osmimage
> (http://jklatex.square7.de/download/osmimage), which downloads an
> OpenStreetMap specified by options.
>
> Furthermore, i plan to write a LaTeX package, which uses this script via
> \write18 (see:
> http://tex.stackexchange.com/questions/178883/write18-encoding).
>
> The Windows version of TeXLive can not execute bash scripts as such. But
> i know you can provide a xxx.exe which executes the bash script xxx, as
> my installfont-tl.
> Is it enough to kindly ask that you create such an exe or is there
> something i can do?
> The script is not very fancy: command line options -> set defaults ->
> some checks -> construct URL -> wget
>
> Without the exe the only possibility to make it run on Windows is to
> install not just Cygwin but also its TeXLive package. The Windows
> version executes \write18 in cmd.exe! So you end up having two TeX
> distributions installed. Very, very ugly from a user's point of view.
>
> Josef
>
>
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140519/05207180/attachment.html>

From zdenek.wagner at gmail.com  Mon May 19 16:51:50 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 19 May 2014 16:51:50 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537A1689.3030406@gmx.de>
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <537A1689.3030406@gmx.de>
Message-ID: <CAC1phyZQitMBgQ=cG3ytQPeNjxA1dMSG2UWQWu9+J7B7aX8XNQ@mail.gmail.com>

AFAIK the wrapper is witten in lua.


2014-05-19 16:34 GMT+02:00 Josef Kleber <josef.kleber at gmx.de>:

> Am 19.05.2014 15:59, schrieb Mojca Miklavec:
>
>  On Mon, May 19, 2014 at 3:39 PM, Josef Kleber wrote:
>>
>>> Hi,
>>>
>>> i wrote a bash script osmimage
>>> (http://jklatex.square7.de/download/osmimage), which downloads an
>>> OpenStreetMap specified by options.
>>>
>>> Furthermore, i plan to write a LaTeX package, which uses this script via
>>> \write18 (see:
>>> http://tex.stackexchange.com/questions/178883/write18-encoding).
>>>
>>> The Windows version of TeXLive can not execute bash scripts as such. But
>>> i
>>> know you can provide a xxx.exe which executes the bash script xxx
>>>
>>
>> This means that somebody needs to have sufficient time and motivation
>> to actually rewrite your program in another programming language and
>> compile it. There is no magic compiler to turn the bash code into an
>> executable.
>>
>
> As i wrote, there is an installfont-tl.exe in the bin directory. I dont't
> know who wrote it, but it is not from me. It seems to be a simple wrapper
> that opens a cmd.exe and executes my Cygwin bash with 'bash
> installfont-tl'. This would be perfect. Linux isn't a problem anyway.
>
>
>  Is it enough to kindly ask that you create such an exe or is there
>>> something
>>> i can do?
>>>
>>
>> Yes, you can rewrite the program in lua and execute it with texlua.
>>
>>
> My Lua skills are very basic, but i will take a look. OTOH, then the
> package usage is limited to one engine.
>
> Josef
>
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140519/30a4abe3/attachment.html>

From josef.kleber at gmx.de  Mon May 19 17:06:44 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Mon, 19 May 2014 17:06:44 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <CAC1phyZQitMBgQ=cG3ytQPeNjxA1dMSG2UWQWu9+J7B7aX8XNQ@mail.gmail.com>
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <537A1689.3030406@gmx.de>
 <CAC1phyZQitMBgQ=cG3ytQPeNjxA1dMSG2UWQWu9+J7B7aX8XNQ@mail.gmail.com>
Message-ID: <537A1E04.5020605@gmx.de>

Am 19.05.2014 16:51, schrieb Zdenek Wagner:
> AFAIK the wrapper is witten in lua.
>

What I've found so far is: 
/svn/branches/tl2013/source/texk/texlive/linked_scripts

There are a lot of scripts in there like installfont-tl (bash) or 
ctanify (perl). And there seems to be indeed some kind of magic that 
turns all these scripts into an Windows exe!

Josef



From josef.kleber at gmx.de  Mon May 19 17:39:37 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Mon, 19 May 2014 17:39:37 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537A1E04.5020605@gmx.de>
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <537A1689.3030406@gmx.de>
 <CAC1phyZQitMBgQ=cG3ytQPeNjxA1dMSG2UWQWu9+J7B7aX8XNQ@mail.gmail.com>
 <537A1E04.5020605@gmx.de>
Message-ID: <537A25B9.8070805@gmx.de>

Am 19.05.2014 17:06, schrieb Josef Kleber:
> Am 19.05.2014 16:51, schrieb Zdenek Wagner:
>> AFAIK the wrapper is witten in lua.
>>
>
> What I've found so far is:
> /svn/branches/tl2013/source/texk/texlive/linked_scripts
>
> There are a lot of scripts in there like installfont-tl (bash) or
> ctanify (perl). And there seems to be indeed some kind of magic that
> turns all these scripts into an Windows exe!

Or some kind of shebang evaluation with executing the right 
interpretator, which need to be installed somehow and somewhere?

Josef


From news3 at nililand.de  Mon May 19 17:42:10 2014
From: news3 at nililand.de (Ulrike Fischer)
Date: Mon, 19 May 2014 17:42:10 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
Message-ID: <123l7lh1o8o4k$.dlg@nililand.de>

Am Mon, 19 May 2014 15:59:43 +0200 schrieb Mojca Miklavec:

> Yes, you can rewrite the program in lua and execute it with texlua.

> If you write your script in lua, it will be guaranteed to work on all
> operating systems.

I would love to use texlua to avoid bat and sh-skripts:
http://tex.stackexchange.com/questions/175055/how-to-adapt-a-batch-script-write18-call-to-linux-systems)

But is is actually possible to change the current directory with
lua? And if yes how?

And another small question: What extension should one use for such
lua-scripts .lua or tlu?


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/



From joseph.wright at morningstar2.co.uk  Mon May 19 17:58:20 2014
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Mon, 19 May 2014 16:58:20 +0100
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <123l7lh1o8o4k$.dlg@nililand.de>
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <123l7lh1o8o4k$.dlg@nililand.de>
Message-ID: <537A2A1C.2080003@morningstar2.co.uk>

On 19/05/2014 16:42, Ulrike Fischer wrote:
> Am Mon, 19 May 2014 15:59:43 +0200 schrieb Mojca Miklavec:
> 
>> Yes, you can rewrite the program in lua and execute it with texlua.
> 
>> If you write your script in lua, it will be guaranteed to work on all
>> operating systems.
> 
> I would love to use texlua to avoid bat and sh-skripts:
> http://tex.stackexchange.com/questions/175055/how-to-adapt-a-batch-script-write18-call-to-linux-systems)

In a slightly different context, the LaTeX team are currently rewriting
the build scripts for LaTeX (expl3 first then LaTeX2e) in Lua precisely
because it allows us to keep in sync between Unix and Windows.
(See e.g.
https://github.com/latex3/svn-mirror/blob/master/support/l3make.lua)

> But is is actually possible to change the current directory with
> lua? And if yes how?

LuaTeX has lfs build in so offers lfs.chdir. For our work, we've taken a
slightly hybrid approach, combining platform-neutral Lua, lfs and some
OS-specific code, e.g. for file copying, etc. With a bit of work, the
OS-specific stuff can be abstracted to a small subset of commands (e.g.
file copying, path separators, etc.).
-- 
Joseph Wright


From zdenek.wagner at gmail.com  Mon May 19 18:02:48 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 19 May 2014 18:02:48 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <123l7lh1o8o4k$.dlg@nililand.de>
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <123l7lh1o8o4k$.dlg@nililand.de>
Message-ID: <CAC1phyZpWeNAkSj=Dph3Z8o7QeZB-oozaGN9cPws5pJ7ZPy_BQ@mail.gmail.com>

2014-05-19 17:42 GMT+02:00 Ulrike Fischer <news3 at nililand.de>:

> Am Mon, 19 May 2014 15:59:43 +0200 schrieb Mojca Miklavec:
>
> > Yes, you can rewrite the program in lua and execute it with texlua.
>
> > If you write your script in lua, it will be guaranteed to work on all
> > operating systems.
>
> I would love to use texlua to avoid bat and sh-skripts:
>
> http://tex.stackexchange.com/questions/175055/how-to-adapt-a-batch-script-write18-call-to-linux-systems
> )
>
> But is is actually possible to change the current directory with
> lua? And if yes how?
>

Of course, you can change directory but unix systems behave in a different
way (IMHO better way). In DOS, Windows and OS/2 the directory change is
permanent so that if a process spawns a child process that changes the
current directory, the main process may get confused because suddenly it
works in a different directory. In unix systems the working directory is in
the process environment. If the process ends, the current directory is
reset back to the original value. Thus even if you do even in a script
\immediate\write18{cd somewhere}, it will have no effect and
\immediate\write18{something} will execute something in the same working
directory. It is necessary to do \immediate\write18{cd somewhere &&
something} or make a wrapper.

>
> And another small question: What extension should one use for such
> lua-scripts .lua or tlu?
>
>
> --
> Ulrike Fischer
> http://www.troubleshooting-tex.de/
>
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140519/98f89960/attachment.html>

From news3 at nililand.de  Mon May 19 18:05:40 2014
From: news3 at nililand.de (Ulrike Fischer)
Date: Mon, 19 May 2014 18:05:40 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <537A1689.3030406@gmx.de>
 <CAC1phyZQitMBgQ=cG3ytQPeNjxA1dMSG2UWQWu9+J7B7aX8XNQ@mail.gmail.com>
 <537A1E04.5020605@gmx.de> <537A25B9.8070805@gmx.de>
Message-ID: <1xlc5jzrlqodz$.dlg@nililand.de>

Am Mon, 19 May 2014 17:39:37 +0200 schrieb Josef Kleber:


>> There are a lot of scripts in there like installfont-tl (bash) or
>> ctanify (perl). And there seems to be indeed some kind of magic that
>> turns all these scripts into an Windows exe!
 
> Or some kind of shebang evaluation with executing the right 
> interpretator, which need to be installed somehow and somewhere?

If I run installfont-tl on windows I get:

G:\Z-Test>installfont-tl --help
D:\texlive\2014\bin\win32\runscript.tlu:673:
D:\texlive\2014\bin\win32\runscript
.tlu:643: program not found (not part of TeX Live): bash

I can run perl-based script as I have perl installed, and in general
windows user don't mind to install it.

But imho many wouldn't like to install cygwin. I find it confusing:
all descriptions assume somehow that a linux user wants to get "his
tools" on windows too and this makes it not easy for native windows
users. Similar for msys (which I do have, but is not in my path). 



-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/



From reinhard.kotucha at web.de  Mon May 19 18:19:12 2014
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 19 May 2014 18:19:12 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <123l7lh1o8o4k$.dlg@nililand.de>
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <123l7lh1o8o4k$.dlg@nililand.de>
Message-ID: <21370.12032.334782.804700@zaphod.ms25.net>

On 2014-05-19 at 17:42:10 +0200, Ulrike Fischer wrote:

 > Am Mon, 19 May 2014 15:59:43 +0200 schrieb Mojca Miklavec:
 > 
 > > Yes, you can rewrite the program in lua and execute it with texlua.
 > 
 > > If you write your script in lua, it will be guaranteed to work on all
 > > operating systems.
 > 
 > I would love to use texlua to avoid bat and sh-skripts:
 > http://tex.stackexchange.com/questions/175055/how-to-adapt-a-batch-script-write18-call-to-linux-systems)
 > 
 > But is is actually possible to change the current directory with
 > lua? And if yes how?

Yes.  lfs.chdir()

 > And another small question: What extension should one use for such
 > lua-scripts .lua or tlu?

Both are supported by kpathsea and runscript.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From siepo at cybercomm.nl  Mon May 19 18:19:19 2014
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Mon, 19 May 2014 18:19:19 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <1xlc5jzrlqodz$.dlg@nililand.de>
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <537A1689.3030406@gmx.de>
 <CAC1phyZQitMBgQ=cG3ytQPeNjxA1dMSG2UWQWu9+J7B7aX8XNQ@mail.gmail.com>
 <537A1E04.5020605@gmx.de> <537A25B9.8070805@gmx.de>
 <1xlc5jzrlqodz$.dlg@nililand.de>
Message-ID: <20140519161919.GA7743@bitmuis.thuis.internal>

On Mon, May 19, 2014 at 06:05:40PM +0200, Ulrike Fischer wrote:
> Am Mon, 19 May 2014 17:39:37 +0200 schrieb Josef Kleber:
> 
> 
> >> There are a lot of scripts in there like installfont-tl (bash) or
> >> ctanify (perl). And there seems to be indeed some kind of magic that
> >> turns all these scripts into an Windows exe!
>  
> > Or some kind of shebang evaluation with executing the right 
> > interpretator, which need to be installed somehow and somewhere?
> 
> If I run installfont-tl on windows I get:
> 
> G:\Z-Test>installfont-tl --help
> D:\texlive\2014\bin\win32\runscript.tlu:673:
> D:\texlive\2014\bin\win32\runscript
> .tlu:643: program not found (not part of TeX Live): bash
> 
> I can run perl-based script as I have perl installed, and in general
> windows user don't mind to install it.
> 
> But imho many wouldn't like to install cygwin. I find it confusing:
> all descriptions assume somehow that a linux user wants to get "his
> tools" on windows too and this makes it not easy for native windows
> users. Similar for msys (which I do have, but is not in my path). 

We add only enough Unix stuff to implement the infrastructure. If
you read the comments at the start of <root>/bin/win32/runscript.tlu
then you see which additional script languages are supported _if
they are already installed_. I quote:

The following script types and their file extensions are currently
supported and searched in that order:

  Lua      (.tlu;.texlua;.lua) --  included
  Perl     (.pl)               --  included
  Ruby     (.rb)               --  requires installation
  Python   (.py)               --  requires installation
  Tcl      (.tcl)              --  requires installation
  Java     (.jar)              --  requires installation
  VBScript (.vbs)              --  part of Windows
  JScript  (.js)               --  part of Windows
  Batch    (.bat;.cmd)         --  part of Windows

Finally, Unix-style extensionless scripts are searched as last and
the interpreter program is established based on the she-bang (#!)
specification on the very first line of the script.  This can be
an arbitrary program but it must be present on the search path.

-- 
Siep Kroonenberg


From rdt at cs.queensu.ca  Mon May 19 18:22:51 2014
From: rdt at cs.queensu.ca (Bob Tennent)
Date: Mon, 19 May 2014 12:22:51 -0400
Subject: [tex-live] dvipdfmx in TL2014
Message-ID: <537a2fdb.lU5MjhohLKVFHp8A%rdt@cs.queensu.ca>

I'm getting the following messages:

dvipdfmx:warning: Obsolete four arguments of "endchar" will be used
for Type 1 "seac" operator.

What do they mean?  How do I suppress them?

Bob T.



From news3 at nililand.de  Mon May 19 18:34:46 2014
From: news3 at nililand.de (Ulrike Fischer)
Date: Mon, 19 May 2014 18:34:46 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <123l7lh1o8o4k$.dlg@nililand.de> <21370.12032.334782.804700@zaphod.ms25.net>
Message-ID: <bo49s54nhcle.dlg@nililand.de>

Am Mon, 19 May 2014 18:19:12 +0200 schrieb Reinhard Kotucha:

>  > And another small question: What extension should one use for such
>  > lua-scripts .lua or tlu?
 
> Both are supported by kpathsea and runscript.

Yes but which one is the sensible? In the sense that sometimes
".tex" or ".ltx" or ".sty" is the "right" extension.

-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/



From news3 at nililand.de  Mon May 19 18:42:37 2014
From: news3 at nililand.de (Ulrike Fischer)
Date: Mon, 19 May 2014 18:42:37 +0200
Subject: [tex-live] dvipdfmx in TL2014
References: <537a2fdb.lU5MjhohLKVFHp8A%rdt@cs.queensu.ca>
Message-ID: <ogn25pga7d17$.dlg@nililand.de>

Am Mon, 19 May 2014 12:22:51 -0400 schrieb Bob Tennent:

> I'm getting the following messages:
> 
> dvipdfmx:warning: Obsolete four arguments of "endchar" will be used
> for Type 1 "seac" operator.
> 
> What do they mean?  How do I suppress them?

The seac operator is deprecated
(http://partners.adobe.com/public/developer/opentype/index_composite.html)
and a constant source of problem expecially with xetex (google a bit
and you will find quite a lot postings). 

So the best is to correct the font (or not to use it). Which one is
it?

-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/



From josef.kleber at gmx.de  Mon May 19 18:57:06 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Mon, 19 May 2014 18:57:06 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <20140519161919.GA7743@bitmuis.thuis.internal>
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <537A1689.3030406@gmx.de>
 <CAC1phyZQitMBgQ=cG3ytQPeNjxA1dMSG2UWQWu9+J7B7aX8XNQ@mail.gmail.com>
 <537A1E04.5020605@gmx.de> <537A25B9.8070805@gmx.de>
 <1xlc5jzrlqodz$.dlg@nililand.de>
 <20140519161919.GA7743@bitmuis.thuis.internal>
Message-ID: <537A37E2.2000909@gmx.de>

Am 19.05.2014 18:19, schrieb Siep Kroonenberg:
> On Mon, May 19, 2014 at 06:05:40PM +0200, Ulrike Fischer wrote:
>> Am Mon, 19 May 2014 17:39:37 +0200 schrieb Josef Kleber:
>>
>>
>>>> There are a lot of scripts in there like installfont-tl (bash) or
>>>> ctanify (perl). And there seems to be indeed some kind of magic that
>>>> turns all these scripts into an Windows exe!
>>
>>> Or some kind of shebang evaluation with executing the right
>>> interpretator, which need to be installed somehow and somewhere?
>>
>> If I run installfont-tl on windows I get:
>>
>> G:\Z-Test>installfont-tl --help
>> D:\texlive\2014\bin\win32\runscript.tlu:673:
>> D:\texlive\2014\bin\win32\runscript
>> .tlu:643: program not found (not part of TeX Live): bash
>>
>> I can run perl-based script as I have perl installed, and in general
>> windows user don't mind to install it.
>>
>> But imho many wouldn't like to install cygwin. I find it confusing:
>> all descriptions assume somehow that a linux user wants to get "his
>> tools" on windows too and this makes it not easy for native windows
>> users. Similar for msys (which I do have, but is not in my path).
>
> We add only enough Unix stuff to implement the infrastructure. If
> you read the comments at the start of <root>/bin/win32/runscript.tlu
> then you see which additional script languages are supported _if
> they are already installed_. I quote:
>
> The following script types and their file extensions are currently
> supported and searched in that order:
>
>    Lua      (.tlu;.texlua;.lua) --  included
>    Perl     (.pl)               --  included
>    Ruby     (.rb)               --  requires installation
>    Python   (.py)               --  requires installation
>    Tcl      (.tcl)              --  requires installation
>    Java     (.jar)              --  requires installation
>    VBScript (.vbs)              --  part of Windows
>    JScript  (.js)               --  part of Windows
>    Batch    (.bat;.cmd)         --  part of Windows
>
> Finally, Unix-style extensionless scripts are searched as last and
> the interpreter program is established based on the she-bang (#!)
> specification on the very first line of the script.  This can be
> an arbitrary program but it must be present on the search path.

Okay, that would be okay with me. I don't have a problem add Cygwin as 
system requirement for Windows user in the doc.

One question remains: Is it enough to kindly ask for adding osmimage to 
/svn/branches/tl2013/source/texk/texlive/linked_scripts after CTAN upload?

Josef



From reinhard.kotucha at web.de  Mon May 19 18:59:57 2014
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 19 May 2014 18:59:57 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <bo49s54nhcle.dlg@nililand.de>
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <123l7lh1o8o4k$.dlg@nililand.de>	<21370.12032.334782.804700@zaphod.ms25.net>
 <bo49s54nhcle.dlg@nililand.de>
Message-ID: <21370.14477.101465.255028@zaphod.ms25.net>

On 2014-05-19 at 18:34:46 +0200, Ulrike Fischer wrote:

 > Am Mon, 19 May 2014 18:19:12 +0200 schrieb Reinhard Kotucha:
 > 
 > >  > And another small question: What extension should one use for such
 > >  > lua-scripts .lua or tlu?
 >  
 > > Both are supported by kpathsea and runscript.
 > 
 > Yes but which one is the sensible? In the sense that sometimes
 > ".tex" or ".ltx" or ".sty" is the "right" extension.

You can safely use .lua nowadays.  Before we had the .exe wrappers we
considered to put the lua wrappers directly into bin/win32.  In this
case we had to associate some extensions with the texlua program in
the Windows registry.  But we couldn't use .lua because this would
clash with an external Lua installation.  We therefore invented .tlu
and .texlua.  Since the actual scripts are located in a TEXMF tree and
invoked by .exe wrappers, there is no need to avoid .lua any more.

There is no "right" extension.  All three are treated equal by
runscript.  In other words, .tlu and .texlua exist for historical
reasons.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From josef.kleber at gmx.de  Mon May 19 19:18:49 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Mon, 19 May 2014 19:18:49 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <1xlc5jzrlqodz$.dlg@nililand.de>
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <537A1689.3030406@gmx.de>
 <CAC1phyZQitMBgQ=cG3ytQPeNjxA1dMSG2UWQWu9+J7B7aX8XNQ@mail.gmail.com>
 <537A1E04.5020605@gmx.de> <537A25B9.8070805@gmx.de>
 <1xlc5jzrlqodz$.dlg@nililand.de>
Message-ID: <537A3CF9.1050607@gmx.de>

Am 19.05.2014 18:05, schrieb Ulrike Fischer:
> Am Mon, 19 May 2014 17:39:37 +0200 schrieb Josef Kleber:
>
>
>>> There are a lot of scripts in there like installfont-tl (bash) or
>>> ctanify (perl). And there seems to be indeed some kind of magic that
>>> turns all these scripts into an Windows exe!
>
>> Or some kind of shebang evaluation with executing the right
>> interpretator, which need to be installed somehow and somewhere?
>
> If I run installfont-tl on windows I get:
>
> G:\Z-Test>installfont-tl --help
> D:\texlive\2014\bin\win32\runscript.tlu:673:
> D:\texlive\2014\bin\win32\runscript
> .tlu:643: program not found (not part of TeX Live): bash

Yes, you need an installed bash, e.g. Cygwin

> I can run perl-based script as I have perl installed, and in general
> windows user don't mind to install it.
>
> But imho many wouldn't like to install cygwin. I find it confusing:
> all descriptions assume somehow that a linux user wants to get "his
> tools" on windows too and this makes it not easy for native windows
> users. Similar for msys (which I do have, but is not in my path).

It's not "his tool". If a bash script + gnu tools + ... is an ocean then 
a batch script is a rain drop! ;-)

Josef



From rdt at cs.queensu.ca  Mon May 19 19:19:32 2014
From: rdt at cs.queensu.ca (Bob Tennent)
Date: Mon, 19 May 2014 13:19:32 -0400
Subject: [tex-live] dvipdfmx in TL2014
Message-ID: <537a3d24.2CG6lwH872uWQYJ4%rdt@cs.queensu.ca>

 >|> I'm getting the following messages:
 >|>
 >|> dvipdfmx:warning: Obsolete four arguments of "endchar" will be used
 >|> for Type 1 "seac" operator.
 >|>
 >|> What do they mean?  How do I suppress them?
 >|
 >|The seac operator is deprecated
 >|(http://partners.adobe.com/public/developer/opentype/index_composite.html)
 >|and a constant source of problem expecially with xetex (google a bit
 >|and you will find quite a lot postings).
 >|
 >|So the best is to correct the font (or not to use it). Which one is
 >|it?

alegreya

I haven't noticed any problems with the output or with xelatex
processing.

Bob T.


From mojca.miklavec.lists at gmail.com  Mon May 19 19:47:39 2014
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 19 May 2014 19:47:39 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537A37E2.2000909@gmx.de>
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <537A1689.3030406@gmx.de>
 <CAC1phyZQitMBgQ=cG3ytQPeNjxA1dMSG2UWQWu9+J7B7aX8XNQ@mail.gmail.com>
 <537A1E04.5020605@gmx.de>	<537A25B9.8070805@gmx.de>
 <1xlc5jzrlqodz$.dlg@nililand.de>
 <20140519161919.GA7743@bitmuis.thuis.internal>	<537A37E2.2000909@gmx.de>
Message-ID: <CALBOmsb12S7kAwdy7P9HhbzcEchNH5YUzzjKGJrp=mn_uiDrJg@mail.gmail.com>

On Mon, May 19, 2014 at 6:57 PM, Josef Kleber wrote:
>
> I don't have a problem add Cygwin as
> system requirement for Windows user in the doc.

Just mention in the docs that windows users should create a virtual
machine with linux and install TeX Live into the virtual machine. That
should cover everyone.

Mojca

(Cynicism aside, you should really learn lua or ask for step-by-step
help on the mailing list. Particularly with your complexity of the
script, it should be trivial to port it to lua and preserve all the
headaches for everyone else.)


From mojca.miklavec.lists at gmail.com  Mon May 19 19:55:33 2014
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 19 May 2014 19:55:33 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537A1689.3030406@gmx.de>
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <537A1689.3030406@gmx.de>
Message-ID: <CALBOmsZ6YjkMkKbgcvfgt--iqyBUpbFSxPZZe2mfazG-BQhGOA@mail.gmail.com>

On Mon, May 19, 2014 at 4:34 PM, Josef Kleber wrote:
>
> My Lua skills are very basic, but i will take a look. OTOH, then the package
> usage is limited to one engine.

No, it's not.

You could write a lua *script* to be executed in *texlua* instead of
calling bash. You would simply use something like \write18{texlua
osmimage.lua ...} or \write18{osmimage ...} inside the (la)tex
document (or inside a package called by that document) and that could
be compiled with any engine of your choice.

Of course you could write the package in such a way that when compiled
with lua(la)tex it wouldn't need to call an external script at all, so
it would be more efficient and faster.

But you certainly don't need to limit yourself to luatex if you
rewrite your bash script to lua.

Mojca


From josef.kleber at gmx.de  Mon May 19 21:22:46 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Mon, 19 May 2014 21:22:46 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <CALBOmsb12S7kAwdy7P9HhbzcEchNH5YUzzjKGJrp=mn_uiDrJg@mail.gmail.com>
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <537A1689.3030406@gmx.de>
 <CAC1phyZQitMBgQ=cG3ytQPeNjxA1dMSG2UWQWu9+J7B7aX8XNQ@mail.gmail.com>
 <537A1E04.5020605@gmx.de>	<537A25B9.8070805@gmx.de>
 <1xlc5jzrlqodz$.dlg@nililand.de>
 <20140519161919.GA7743@bitmuis.thuis.internal>	<537A37E2.2000909@gmx.de>
 <CALBOmsb12S7kAwdy7P9HhbzcEchNH5YUzzjKGJrp=mn_uiDrJg@mail.gmail.com>
Message-ID: <537A5A06.9060407@gmx.de>

Am 19.05.2014 19:47, schrieb Mojca Miklavec:
>
> (Cynicism aside, you should really learn lua or ask for step-by-step
> help on the mailing list. Particularly with your complexity of the
> script, it should be trivial to port it to lua and preserve all the
> headaches for everyone else.)
>

Okay, i now googled how to download a file with Lua and i can construct 
the URL also on the LaTeX side. So it should be doable even for me! ;-)

To download the map with a LaTeX command i would still need

\immediate\write18{texlua osmimage.lua}

Right? Or am i missing something?

Perhaps not the right place to ask, but the above should also work with 
MiKTeX, right?

Josef



From karl at freefriends.org  Mon May 19 23:01:54 2014
From: karl at freefriends.org (Karl Berry)
Date: Mon, 19 May 2014 21:01:54 +0000
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537A37E2.2000909@gmx.de>
Message-ID: <201405192101.s4JL1s72028255@freefriends.org>

    One question remains: Is it enough to kindly ask for adding osmimage to 
    /svn/branches/tl2013/source/texk/texlive/linked_scripts after CTAN upload?

Yes, I can add the generic wrapper for your script after it hits CTAN.
(Not in the branch, but never mind that.)

best,
k



From karl at freefriends.org  Mon May 19 23:08:30 2014
From: karl at freefriends.org (Karl Berry)
Date: Mon, 19 May 2014 21:08:30 +0000
Subject: [tex-live] dvipdfmx in TL2014
In-Reply-To: <537a2fdb.lU5MjhohLKVFHp8A%rdt@cs.queensu.ca>
Message-ID: <201405192108.s4JL8U70028679@freefriends.org>

Hi Bob,

    dvipdfmx:warning: Obsolete four arguments of "endchar" will be used
    for Type 1 "seac" operator.

    What do they mean?  

It comes from t1_char.c.  I haven't researched it, but from the wording
of the message, I surmise that there is another way to achieve the
result in the font that doesn't produce the warning.

    How do I suppress them?

Looking at the code, I think with -q (not claiming that's ideal).

k


From dluecking at sbcglobal.net  Tue May 20 00:07:08 2014
From: dluecking at sbcglobal.net (Dan Luecking)
Date: Mon, 19 May 2014 17:07:08 -0500
Subject: [tex-live] TeXLive (Windows) bash script -> exe
Message-ID: <946777.60054.bm@smtp115.sbc.mail.ne1.yahoo.com>

On Mon May 19, 2014 at 17:06:44 CEST, Josef Kleber [josef.kleber at 
gmx.de] wrote:


>What I've found so far is:
>/svn/branches/tl2013/source/texk/texlive/linked_scripts
>
>There are a lot of scripts in there like installfont-tl (bash) or
>ctanify (perl). And there seems to be indeed some kind of magic that
>turns all these scripts into an Windows exe!

The "magic" is as follows (for a known scripting language like perl):

  -- One writes a script, named say myscriptname.pl
  -- Place it in /scripts/myscriptdirname/ in some TEXMF directory
  -- Make a copy of runscript.exe named myscriptnam.exe in
     /bin/win32/ in the TeX Live tree.

Then

     myscriptname [args]

(being runscript in disguise) calls runscript.dll which then calls

     texlua runscript.tlu myscriptname [args]

this searches for myscriptname in /scripts/ with various known
extensions and then calls an interpreter (say perl) based on the
extension (passing it the script and its args). If no script is
found by that method, it looks for the script file with no
extension and checks for a shebang to determine the interpreter.

The help text at the top of runscript.tlu explains what
extensions are "known"

So the only effort is to write the script, there is no actual
need to "turn it into a Windows exe".

installfont-tl.exe, for some reason, is not a copy of runscript.exe.
However it seems to do something similar. However, On my windows
(which has a bash from MSYS installed) it fails with

    line 104 getopt: command not found

(MSYS has getopt.awk, but apparently that's not good enough.)


Dan


Daniel H. Luecking
Department of Mathematical Sciences
Fayetteville, Arkansas
http://www-cs-faculty.stanford.edu/~knuth/iaq.html 



From reinhard.kotucha at web.de  Tue May 20 00:23:01 2014
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 20 May 2014 00:23:01 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537A5A06.9060407@gmx.de>
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <537A1689.3030406@gmx.de>
 <CAC1phyZQitMBgQ=cG3ytQPeNjxA1dMSG2UWQWu9+J7B7aX8XNQ@mail.gmail.com>
 <537A1E04.5020605@gmx.de>	<537A25B9.8070805@gmx.de>
 <1xlc5jzrlqodz$.dlg@nililand.de>
 <20140519161919.GA7743@bitmuis.thuis.internal>	<537A37E2.2000909@gmx.de>
 <CALBOmsb12S7kAwdy7P9HhbzcEchNH5YUzzjKGJrp=mn_uiDrJg@mail.gmail.com>
 <537A5A06.9060407@gmx.de>
Message-ID: <21370.33861.999086.484691@zaphod.ms25.net>

On 2014-05-19 at 21:22:46 +0200, Josef Kleber wrote:

 > Am 19.05.2014 19:47, schrieb Mojca Miklavec:
 > >
 > > (Cynicism aside, you should really learn lua or ask for step-by-step
 > > help on the mailing list. Particularly with your complexity of the
 > > script, it should be trivial to port it to lua and preserve all the
 > > headaches for everyone else.)
 > >
 > 
 > Okay, i now googled how to download a file with Lua and i can
 > construct the URL also on the LaTeX side. So it should be doable
 > even for me! ;-)
 > 
 > To download the map with a LaTeX command i would still need
 > 
 > \immediate\write18{texlua osmimage.lua}
 > 
 > Right? Or am i missing something?

Well, this doesn't work because texlua doesn't know where in the TEXMF
tree osmimage.lua is installed.  You have to write:

  \immediate\write18{osmimage}

On Unix osimage is a symlink to osmimage.lua and on Windows
osmimage.exe passes its arguments to runscript.tlu, which determines
the location of your script and finally executes it.  runscript.tlu is
executed by texlua, which in turn has kpathsea built-in.  

All this is described in detail in  bin/win32/runscript.tlu .
If you don't have binaries for Windows on your machine, see

  http://tug.org/svn/texlive/trunk/Master/bin/win32/runscript.tlu


 > Perhaps not the right place to ask, but the above should also work
 > with MiKTeX, right?

It should be sufficient to upload the script to CTAN.  You don't have
to worry about symlinks and wrappers for TeX Live.  I'm sure that
Christian will do the right thing in order to install your script
properly in MiKTeX.


Another interesting solution would be to put the Lua code directly
into the LaTeX file.  Since LuaTeX is based on pdfTeX, the only
restriction is that XeTeX users are excluded.  But a self-contained
package has some advantages too.  In order to see how easy it is,
look at my minimal example:

  http://tug.org/~kotucha/luatab.pdf

A very similar example appeared in the latest issue of TUGboat.
The luacode package solves most of the nasty \catcode problems.

 > Okay, i now googled how to download a file with Lua and i can
 > construct the URL also on the LaTeX side. So it should be doable
 > even for me! ;-)

BTW, if you assemble the URL on the LaTeX side, how do you read
command-line arguments?  It's probably easier to do this in Lua.
Honestly, *everything* is easier in Lua.

Here are some useful links:

  The definite guide is the book "Programming in Lua".  Only the first
  edition (Lua 5.0) is available online.  Most of the content is still
  valid.  If in doubt, consult the Reference Manual.

    http://www.lua.org/pil/contents.html

  The Lua 5.2 Reference Manual

    http://www.lua.org/manual/5.2/

  The Tutorial Wiki

    http://lua-users.org/wiki/TutorialDirectory

After all, the book "Programming in Lua", 3rd edition, ISBN 859037985X,
is definitely worth it's money.

In order to see which modules and extensions are avalable in texlua and
luatex, run

  texdoc luatex

There are a few useful extensions.    


Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From karl at freefriends.org  Tue May 20 01:18:19 2014
From: karl at freefriends.org (Karl Berry)
Date: Mon, 19 May 2014 17:18:19 -0600
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <946777.60054.bm@smtp115.sbc.mail.ne1.yahoo.com> (message from
 Dan Luecking on Mon, 19 May 2014 17:07:08 -0500)
Message-ID: <86oaytxsqs.fsf@frenzy.freefriends.org>

    installfont-tl.exe, for some reason, is not a copy of runscript.exe.

svn log says that Akira updated it when he updated the context
wrappers.  I suspect that was a mistake, since of course it is not a
context item.  (I also wrote him about the context update.)

As for why installfont-tl.exe is there in the first place, I have only a
vague recollection that at one point Josef asked me, or there was
already a .exe available, or some such unusual situation.  Ordinarily we
don't install the generic Windows wrapper for shell scripts because it's
(a) highly improbable that the user will have the prerequisites, and
(b) even more improbable that the script will actually work.  No one has
ever complained, either.

karl


From preining at logic.at  Tue May 20 01:51:58 2014
From: preining at logic.at (Norbert Preining)
Date: Tue, 20 May 2014 08:51:58 +0900
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537A098C.8000902@gmx.de>
References: <537A098C.8000902@gmx.de>
Message-ID: <20140519235158.GJ30691@auth.logic.tuwien.ac.at>

Hi

On Mon, 19 May 2014, Josef Kleber wrote:
> i wrote a bash script osmimage

Besides all the other answers, ... here my comments:
* it would have been nice to actually attach the script, as it is
  not very long. I do it now. (attachment "osmimage")
* reading through it I guess it takes me with practically no
  knowledge of lua at most 1h to rewrite it in lua, if you ask
  one lua expert here niccely, they will come up with code in 10min.
  Actually, it took me *exactely* 1h ... of course, it does not
  do error handling on Windows, which is a pain ..
  attachment "osmimage.lua"

* it also need alt_getopt.lua which is in TeX Live. I am not sure
  how this can be automatically found, lua experts, please


Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------
-------------- next part --------------
#!/bin/bash
#
# osmimage [options]
#
# downloads an OpenStreetMap map specified by [options]
# by using http://developer.mapquest.com/ web service
#
# License: LPPL
#
pversion()
{
  echo "`basename $0` $VERSION"
  echo "(C) Josef Kleber   License: LPPL"
  exit 0;
}
#
function phelp()
{
  echo -e \
    "\n  `basename $0` [options]\n\n"\
    " downloads an OpenStreetMap map specified by [options]\n"\
    " by using http://developer.mapquest.com/ web service\n\n"\
    " Options:\n\n"\
    " -k  key registered at http://developer.mapquest.com/\n"\
    "     default (Example key from web site)!\n"\
    "     Please register and use your own key!\n\n"\
    " -l  specify a location\n"\
    "     e.g. 'Bergheimer Stra?e 110A, 69115 Heidelberg, Germany'\n\n"\
    " -x  specify a xsize (800)\n\n"\
    " -y  specify a ysize (400)\n\n"\
    " -S  short form to specify a size, e.g. 800,400\n\n"\
    " -s  specify a scale factor in the range 1692-221871572 (3385 = -z 17)\n"\
	"     see: http://open.mapquestapi.com/staticmap/zoomToScale.html\n\n"\
    " -z  specify a zoom in the range 1-18 (zoom overrides scale!)\n\n"\
    " -t  specify map type {map|sat|hyb} (map)\n\n"\
    " -i  specify image type {jpeg|jpg|gif|png} (png)\n\n"\
    " -c  specify icon color (yellow_1)\n"\
    "     see: http://open.mapquestapi.com/staticmap/icons.html\n\n"\
    " -n  specify the icon number (1)\n\n"\
    " -o  specify output basename without file extension (osmimage.IMAGETYPE)\n\n"\
    " -q  quiet; no output!\n\n"\
    " -v  prints version information\n\n"\
    " -h  prints help information\n\n"
  pversion
}
#
osmimage_error()
{
  local exitcode="$1"
  local errortext="$2"
  echo "Error ($exitcode): $errortext" >&2
  exit $exitcode
}
#
osmimage_warning()
{
  local warningtext="$1"
  echo -e "WARNING: $warningtext\n" >&2
}
#
check_prog()
{
  local prog="$1"
  hash $prog 2>/dev/null || osmimage_error 1 "$prog not installed! Aborting."
}
#
check_number()
{
  local var="$1"
  local varname="$2"
  local number='^[0-9]+$'
  if ! [[ $var =~ $number ]]
  then
     osmimage_error 2 "$varname can't be $var! Not a number!"
  fi
}
#
check_range()
{
  local var="$1"
  local min="$2"
  local max="$3"
  local exitcode="$4"
  local varname="$5"
  check_number $var $varname
  if [ $var -lt $min ]
  then
    osmimage_error $exitcode "$varname = $var; must be in the range of $min-$max"
  fi
  if [ $var -gt $max ]
  then
    osmimage_error $exitcode "$varname = $var; must be in the range of $min-$max"

  fi
}
#
check_prog wget
#
URL="http://open.mapquestapi.com/staticmap/v4/getplacemap"
KEY=""
LOCATION=""
XSIZE=""
YSIZE=""
SCALE=""
ZOOM=""
TYPE=""
IMAGETYPE=""
COLOR=""
NUMBER=""
OFILE="osmimage"
QUIET="false"
VERSION="v1.1 (19/05/2014)"
#
while getopts "k:l:x:y:S:s:z:t:i:c:n:o:qvh" flag
do
  case "$flag" in
    k) KEY="$OPTARG";;
    l) LOCATION="$OPTARG";;
    x) XSIZE="$OPTARG";;
    y) YSIZE="$OPTARG";;
    S) SIZE="$OPTARG";;
	s) SCALE="$OPTARG";;
    z) ZOOM="$OPTARG";;
    t) TYPE="$OPTARG";;
    i) IMAGETYPE="$OPTARG";;
    c) COLOR="$OPTARG";;
    n) NUMBER="$OPTARG";;
    o) OFILE="$OPTARG";;
    q) QUIET="true";;
    v) pversion;;
    h) phelp;;
  esac
done
#
if [ "$QUIET" = "true" ]
then
  exec 1>/dev/null
  exec 2>/dev/null
fi
#
if [ -z $KEY ]
then
  KEY="Kmjtd%7Cluu7n162n1%2C22%3Do5-h61wh"
  osmimage_warning "KEY not specified; using mapquest example key as default!"
fi
#
if [ -z $LOCATION ]
then
  LOCATION="Bergheimer Stra?e 110A, 69115 Heidelberg, Germany"
  osmimage_warning "LOCATION not specified; using Dante e.V. Office as default!"
fi
#
if [ -z $XSIZE ]
then
  XSIZE=800
  osmimage_warning "XSIZE not specified; using XSIZE=800 as default!"
fi
check_range $XSIZE 1 3840 11 XSIZE
#
if [ -z $YSIZE ]
then
  YSIZE=400
  osmimage_warning "YSIZE not specified; using YSIZE=400 as default!"
fi
check_range $YSIZE 1 3840 12 YSIZE
#
if [ -z $SIZE ]
then
  SIZE="$XSIZE,$YSIZE"
fi
#
if [ -z $SCALE ]
then
  if [ -z $ZOOM ]
  then
    SCALE=3385
    osmimage_warning "SCALE not specified, using SCALE=3385 as default!"
  fi
else
  check_range $SCALE 1692 221871572 13 SCALE
fi
#
if [ -z $TYPE ]
then
  TYPE="map"
  osmimage_warning "TYPE not specified; using map as default!"
fi
#
if [ -z $IMAGETYPE ]
then
  IMAGETYPE="png"
  osmimage_warning "IMAGETYPE not specified; using png as default!"
fi
#
if [ -z $COLOR ]
then
  COLOR="yellow_1"
  osmimage_warning "COLOR not specified; using yellow_1 as default!"
fi
if [ -z $NUMBER ]
then
  NUMBER=1
  osmimage_warning "NUMBER not specified; using 1 as default!"
fi
check_number $NUMBER NUMBER
#
ULOCATION="&location=$LOCATION"
USIZE="&size=$SIZE"
if [ -z $ZOOM ]
then
  USCALEZOOM="&scale=$SCALE"
else
  check_range $ZOOM 1 18 14 ZOOM
  USCALEZOOM="&zoom=$ZOOM"
fi
UTYPE="&type=$TYPE"
UIMAGETYPE="&imagetype=$IMAGETYPE"
USHOWICON="&showicon=${COLOR}-${NUMBER}"
UOFILE="${OFILE}.${IMAGETYPE}"
#
IMGURL="${URL}?key=${KEY}${ULOCATION}${USIZE}${USCALEZOOM}${UTYPE}${UIMAGETYPE}${USHOWICON}"
#
wget "$IMGURL" -O "$UOFILE"
exit 0
-------------- next part --------------
#!/usr/bin/env texlua
--
-- osmimage [options]
--
-- downloads an OpenStreetMap map specified by [options]
-- by using http://developer.mapquest.com/ web service
--
-- License: LPPL
--

local URL = "http://open.mapquestapi.com/staticmap/v4/getplacemap"
local KEY = ""
local LOCATION = ""
local XSIZE = ""
local YSIZE = ""
local SIZE = ""
local SCALE = ""
local ZOOM = ""
local TYPE = ""
local IMAGETYPE = ""
local COLOR = ""
local NUMBER = ""
local OFILE = "osmimage"
local QUIET = "false"
local VERSION = "v1.1 (19/05/2014)"

function pversion()
  print("osmimage " .. VERSION)
  print("(C) Josef Kleber   License: LPPL")
  os.exit(0)
end

function phelp()
  print([[
osmimage [options]

 downloads an OpenStreetMap map specified by [options]
 by using http://developer.mapquest.com/ web service

 Options:

 -k  key registered at http://developer.mapquest.com/
     default (Example key from web site)!
     Please register and use your own key!

 -l  specify a location
     e.g. 'Bergheimer Stra???e 110A, 69115 Heidelberg, Germany'

 -x  specify a xsize (800)

 -y  specify a ysize (400)

 -S  short form to specify a size, e.g. 800,400

 -s  specify a scale factor in the range 1692-221871572 (3385 = -z 17)
     see: http://open.mapquestapi.com/staticmap/zoomToScale.html

 -z  specify a zoom in the range 1-18 (zoom overrides scale!)

 -t  specify map type {map|sat|hyb} (map)

 -i  specify image type {jpeg|jpg|gif|png} (png)

 -c  specify icon color (yellow_1)
     see: http://open.mapquestapi.com/staticmap/icons.html

 -n  specify the icon number (1)

 -o  specify output basename without file extension (osmimage.IMAGETYPE)

 -q  quiet; no output!

 -v  prints version information

 -h  prints help information

]])
  pversion()
end

function osmimage_error(exitcode, errortext)
  io.stderr:write ("Error (" .. exitcode .. "): " .. errortext .. "\n")
  os.exit(exitcode)
end 

function osmimage_warning(warningtext)
  io.stderr:write("WARNING: " .. warningtext .. "\n")
end

-- checks if command exists on the path and returns its full path
-- copied from runscript.tlu
local function search_path(fname, PATH, PATHEXT)
  if string.find(fname, '[/\\]') then 
    return nil, "directory part not allowed for PATH search: "..fname 
  end
  PATH = PATH or os.getenv('PATH')
  PATHEXT = PATHEXT or '\0' -- '\0' for no extension
  for dir in string.gmatch(PATH, '[^;]+') do
    local dirsep = (string.find(dir, '\\') and '\\' or '/')
    for ext in string.gmatch(PATHEXT, '[^;]+') do
      local f = dir..dirsep..fname..ext
      if lfs.isfile(f) then return f, ext end
    end
  end
  return nil, "file or program not on PATH: "..fname
end

-- adapted from runscript.tlu
function check_prog(prog)
  local cmdext = prog..(string.find(prog, '%.[^\\/.]*$') and '' or '.exe')
  local fullcmd = search_path(cmdext)
  if fullcmd then 
    return fullcmd, cmd
  end
  osmimage_error(1, prog .. "not installed! Aborting.")
end

function check_number(var, varname)
  local number='^[0-9]+$'
  if not(string.match(var, '^[0-9]+$')) then
    osmimage_error(2, varname .. " can't be " .. var .. "! Not a number!")
  end
end

function check_range(var,min,max,exitcode,varname)
  check_number(var,varname)
  if (var < min or var > max) then
    osmimage_error(exitcode, varname .. " = " .. var .. "; must be in the range of " .. min .. "-" .. max)
  end
end

-- check_prog("wget")

require "alt_getopt"
local long_opts = {}
local ret
local optarg
local optind
opts,optind,optarg = alt_getopt.get_ordered_opts(arg, "k:l:x:y:S:s:z:t:i:c:n:o:qvh", long_opts)
for i,v in ipairs (opts) do
  if v == "k" then
    KEY = optarg[i]
  elseif v == "l" then
    LOCATION = optarg[i]
  elseif v == "x" then
    XSIZE = optarg[i]
  elseif v == "y" then
    YSIZE = optarg[i]
  elseif v == "S" then
    SIZE = optarg[i]
  elseif v == "s" then
    SCALE = optarg[i]
  elseif v == "z" then
    ZOOM = optarg[i]
  elseif v == "t" then
    TYPE = optarg[i]
  elseif v == "i" then
    IMAGETYPE = optarg[i]
  elseif v == "c" then
    COLOR = optarg[i]
  elseif v == "n" then
    NUMBER = optarg[i]
  elseif v == "o" then
    OFILE = optarg[i]
  elseif v == "q" then
    QUIET = 1
  elseif v == "v" then
    pversion()
  elseif v == "h" then
    phelp()
  end
end

--
-- TO BE DONE TODO TODO TODO
-- if [ "$QUIET" = "true" ]
-- then
--   exec 1>/dev/null
--   exec 2>/dev/null
-- fi

if KEY == "" then
  KEY="Kmjtd%7Cluu7n162n1%2C22%3Do5-h61wh"
  osmimage_warning("KEY not specified; using mapquest example key as default!")
end

if LOCATION == "" then
  LOCATION = "Bergheimer Stra???e 110A, 69115 Heidelberg, Germany"
  osmimage_warning("LOCATION not specified; using Dante e.V. Office as default!")
end

if XSIZE == "" then
  XSIZE=800
  osmimage_warning("XSIZE not specified; using XSIZE=800 as default!")
end

check_range(XSIZE,1,3840,11,"XSIZE")

if YSIZE == "" then
  YSIZE=400
  osmimage_warning("YSIZE not specified; using YSIZE=400 as default!")
end
check_range(YSIZE,1,3840,12,"YSIZE")

if SIZE == "" then
  SIZE = XSIZE .. "," .. YSIZE
end

if SCALE == "" then
  if ZOOM == "" then
    SCALE=3385
    osmimage_warning("SCALE not specified, using SCALE=3385 as default!")
  end
else
  check_range(SCALE,1692,221871572,13,"SCALE")
end

if TYPE == "" then
  TYPE = "map"
  osmimage_warning("TYPE not specified; using map as default!")
end

if IMAGETYPE == "" then
  IMAGETYPE="png"
  osmimage_warning("IMAGETYPE not specified; using png as default!")
end

if COLOR == "" then
  COLOR="yellow_1"
  osmimage_warning("COLOR not specified; using yellow_1 as default!")
end

if NUMBER == "" then
  NUMBER=1
  osmimage_warning("NUMBER not specified; using 1 as default!")
end
check_number(NUMBER,"NUMBER")

ULOCATION = "&location=" .. LOCATION
USIZE = "&size=" .. SIZE
if ZOOM == "" then
  USCALEZOOM = "&scale=" .. SCALE
else
  check_range(ZOOM,1,18,14,"ZOOM")
  USCALEZOOM = "&zoom=" .. ZOOM
end
UTYPE = "&type=" .. TYPE
UIMAGETYPE = "&imagetype=" .. IMAGETYPE
USHOWICON = "&showicon=" .. COLOR .. "-" .. NUMBER
UOFILE = OFILE .. "." .. IMAGETYPE

IMGURL = URL .. "?key=" .. KEY .. ULOCATION .. USIZE .. USCALEZOOM .. UTYPE .. UIMAGETYPE .. USHOWICON

PROGLINE = "wget '" .. IMGURL .. "' -O " .. UOFILE

print(PROGLINE)
os.spawn(PROGLINE)


From d.p.carlisle at gmail.com  Tue May 20 02:11:41 2014
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Tue, 20 May 2014 01:11:41 +0100
Subject: [tex-live] Regressions triggered by 'latex' package updates on
	pretest
In-Reply-To: <CAO7dr0hNKApF95oUNFidxxGGWq83rXvkqX1J3xxwdGJsPgexQQ@mail.gmail.com>
References: <CAO7dr0hNKApF95oUNFidxxGGWq83rXvkqX1J3xxwdGJsPgexQQ@mail.gmail.com>
Message-ID: <CAEW6iOikYBdnCdaW4pUkz2aFejmZsE6+3yRtkhbuqyMDk=O9sg@mail.gmail.com>

The old inputenc did not do anything remotely sensible on luatex, and teh
test document you sent demonstrates that

\documentclass[nologo]{europecv}
\usepackage[utf8]{luainputenc}

\begin{document}

%abc ?

\begin{europecv}{}

\end{europecv}{}

\end{document}


It runs without error but utf-8 is not enabled and if you uncomment the
line with text you got (in tl2013)


Package utf8x.def Warning: Character(s)244 etc.gotredefinedsomewhere.
(utf8x.def)                Restoringtoitsutf8x-meaning on input line 5.

Runaway argument?
! Paragraph ended before ? was complete.


Now the error is flagged a bit earlier but it isn't really a regression.

An immediate workaround in the document  is to load luainputenc _before_
inputenc loads ucs sty.

\RequirePackage[utf8]{luainputenc}
\documentclass[nologo]{europecv}

However a more general fix would be for europecv not to load ucs and
inputenc packages on engines where they do not work, for example

$ diff -c europecv.cls~ europecv.cls
*** europecv.cls~       2014-05-20 00:48:26.128858000 +0100
--- europecv.cls        2014-05-20 00:54:05.427264800 +0100
***************
*** 292,299 ****
--- 292,303 ----
  \ProcessOptions\relax

  \LoadClass{article}
+ \ifx\Umathchar\@undefined
  \RequirePackage{ucs}
  \RequirePackage[utf8x]{inputenc}
+ \else
+ \renewcommand\ecv at utf[1]{{#1}}
+ \fi
  \RequirePackage{array}
  \RequirePackage{longtable}
  \RequirePackage{fancyhdr} % For page numbering



would make the sample document work as intended with utf8 not only declared
but actually working and an e acute being typeset.

David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140520/8b0c2fa6/attachment.html>

From reinhard.kotucha at web.de  Tue May 20 02:21:49 2014
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 20 May 2014 02:21:49 +0200
Subject: [tex-live] dvipdfmx in TL2014
In-Reply-To: <ogn25pga7d17$.dlg@nililand.de>
References: <537a2fdb.lU5MjhohLKVFHp8A%rdt@cs.queensu.ca>
 <ogn25pga7d17$.dlg@nililand.de>
Message-ID: <21370.40989.105224.957852@zaphod.ms25.net>

On 2014-05-19 at 18:42:37 +0200, Ulrike Fischer wrote:

 > Am Mon, 19 May 2014 12:22:51 -0400 schrieb Bob Tennent:
 > 
 > > I'm getting the following messages:
 > > 
 > > dvipdfmx:warning: Obsolete four arguments of "endchar" will be used
 > > for Type 1 "seac" operator.
 > > 
 > > What do they mean?  How do I suppress them?
 > 
 > The seac operator is deprecated
 > (http://partners.adobe.com/public/developer/opentype/index_composite.html)
 > and a constant source of problem expecially with xetex (google a bit
 > and you will find quite a lot postings). 
 > 
 > So the best is to correct the font (or not to use it). Which one is
 > it?

Ulrike, what you suggest can never be a solution.  Almost every Type 1
font developped in the last three decades is using the seac operator.
After zillions of fonts had been created by Adobe and other foundries,
Adobe now declares seac as deprecated?  Sounds like a joke.

It's a matter of fact that seac supports only glyphs in Adobe Standard
Encoding and thus its usage is quite limited for no good reason. It'a .
TeX's \accent primitive doesn't suffer from such a restriction.

I have the impression that the seac operator is simply a remnant of
the cold war.  Nobody expected at this time that one can make money
by selling Eastern European fonts.

Adobe now suggests to use subroutines in order to add accents to base
glyphs.  This is indeed more powerful.  Subroutines allow you to
describe accented characters quite efficiently.  There is no way to
use seac in order to support Vietnamese.  And AFAIK Latin Modern and
TeX Gyre are using subroutines because seac isn't helpful at all.

Though Adobe deprecates the seac operator now, there is absolutely no
reason that font rendering engines complain if it's used.

The message

 >> dvipdfmx:warning: Obsolete four arguments of "endchar" will be
 >> used for Type 1 "seac" operator.

is still unclear.  It doesn't say that the seac operator isn't
supported.  Bob, can you make the font accessible to me somehow?

Ulrike, you said:

 > The seac operator is deprecated and a constant source of problem
 > expecially with xetex

This simply means that XeTeX doesn't support Type 1 fonts properly, if
at all.  It's a severe bug if XeTeX complains that a font is using the
seac operator.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From kakuto at fuk.kindai.ac.jp  Tue May 20 02:37:51 2014
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Tue, 20 May 2014 09:37:51 +0900
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <86oaytxsqs.fsf@frenzy.freefriends.org>
References: <86oaytxsqs.fsf@frenzy.freefriends.org>
Message-ID: <014C4071A15F43F588AE1129637D6E16@CJ3001517A>

Hi Karl,

>    installfont-tl.exe, for some reason, is not a copy of runscript.exe.
>
> svn log says that Akira updated it  ...

I only embedded manifest, because it does not work
as usual applications due to its name 'install'font-tl.exe.

Best regards,
Akira



From news3 at nililand.de  Tue May 20 10:24:45 2014
From: news3 at nililand.de (Ulrike Fischer)
Date: Tue, 20 May 2014 10:24:45 +0200
Subject: [tex-live] dvipdfmx in TL2014
References: <537a2fdb.lU5MjhohLKVFHp8A%rdt@cs.queensu.ca>
 <ogn25pga7d17$.dlg@nililand.de> <21370.40989.105224.957852@zaphod.ms25.net>
Message-ID: <yp1yirwk29bu.dlg@nililand.de>

Am Tue, 20 May 2014 02:21:49 +0200 schrieb Reinhard Kotucha:
 
>  > The seac operator is deprecated and a constant source of problem
>  > expecially with xetex
> 
> This simply means that XeTeX doesn't support Type 1 fonts properly, if
> at all.  It's a severe bug if XeTeX complains that a font is using the
> seac operator.

Well xetex (xdvipdfmx) complains only if one tries to use type1
fonts directly (instead of using the "old way" with tfm files) --
something that isn't done often. With "constant source" I didn't
want to express that it is a large problem, only that it pops up
regularly over the past years - ditto the warning of dvipdfmx which
seems to be harmless. 

The xetex bug has been around for many years:
http://tug.org/pipermail/xetex/2008-March/008910.html

It would be neat if something could be done about it.
 

-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/



From khaledhosny at eglug.org  Tue May 20 11:17:26 2014
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 20 May 2014 12:17:26 +0300
Subject: [tex-live] dvipdfmx in TL2014
In-Reply-To: <yp1yirwk29bu.dlg@nililand.de>
References: <537a2fdb.lU5MjhohLKVFHp8A%rdt@cs.queensu.ca>
 <ogn25pga7d17$.dlg@nililand.de> <21370.40989.105224.957852@zaphod.ms25.net>
 <yp1yirwk29bu.dlg@nililand.de>
Message-ID: <20140520091725.GA29644@khaled-laptop>

On Tue, May 20, 2014 at 10:24:45AM +0200, Ulrike Fischer wrote:
> Am Tue, 20 May 2014 02:21:49 +0200 schrieb Reinhard Kotucha:
>  
> >  > The seac operator is deprecated and a constant source of problem
> >  > expecially with xetex
> > 
> > This simply means that XeTeX doesn't support Type 1 fonts properly, if
> > at all.  It's a severe bug if XeTeX complains that a font is using the
> > seac operator.
> 
> Well xetex (xdvipdfmx) complains only if one tries to use type1
> fonts directly (instead of using the "old way" with tfm files) --
> something that isn't done often. With "constant source" I didn't
> want to express that it is a large problem, only that it pops up
> regularly over the past years - ditto the warning of dvipdfmx which
> seems to be harmless. 
> 
> The xetex bug has been around for many years:
> http://tug.org/pipermail/xetex/2008-March/008910.html

Just to clarify, this is an (x)dvipdfmx issue, XeTeX itself don't care
about the charstrings and what operators they use.

It seems using Type1 as a "native" fonts triggers a code path that does
not like seac operators (from the look of it, (x)dvipdfmx is trying to
embed the font as CID Type 0C and it does not like seac here, while if
it were used as TFM font it embeds it as Type 1C font).

Regards,
Khaled


From khaledhosny at eglug.org  Tue May 20 11:22:17 2014
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 20 May 2014 12:22:17 +0300
Subject: [tex-live] dvipdfmx in TL2014
In-Reply-To: <20140520091725.GA29644@khaled-laptop>
References: <537a2fdb.lU5MjhohLKVFHp8A%rdt@cs.queensu.ca>
 <ogn25pga7d17$.dlg@nililand.de> <21370.40989.105224.957852@zaphod.ms25.net>
 <yp1yirwk29bu.dlg@nililand.de> <20140520091725.GA29644@khaled-laptop>
Message-ID: <20140520092217.GA30131@khaled-laptop>

On Tue, May 20, 2014 at 12:17:25PM +0300, Khaled Hosny wrote:
> On Tue, May 20, 2014 at 10:24:45AM +0200, Ulrike Fischer wrote:
> > Am Tue, 20 May 2014 02:21:49 +0200 schrieb Reinhard Kotucha:
> >  
> > >  > The seac operator is deprecated and a constant source of problem
> > >  > expecially with xetex
> > > 
> > > This simply means that XeTeX doesn't support Type 1 fonts properly, if
> > > at all.  It's a severe bug if XeTeX complains that a font is using the
> > > seac operator.
> > 
> > Well xetex (xdvipdfmx) complains only if one tries to use type1
> > fonts directly (instead of using the "old way" with tfm files) --
> > something that isn't done often. With "constant source" I didn't
> > want to express that it is a large problem, only that it pops up
> > regularly over the past years - ditto the warning of dvipdfmx which
> > seems to be harmless. 
> > 
> > The xetex bug has been around for many years:
> > http://tug.org/pipermail/xetex/2008-March/008910.html
> 
> Just to clarify, this is an (x)dvipdfmx issue, XeTeX itself don't care
> about the charstrings and what operators they use.
> 
> It seems using Type1 as a "native" fonts triggers a code path that does
> not like seac operators (from the look of it, (x)dvipdfmx is trying to
> embed the font as CID Type 0C and it does not like seac here, while if
> it were used as TFM font it embeds it as Type 1C font).

And the above link is stating the same, I should have checked it first...

Regards,
Khaled


From josef.kleber at gmx.de  Tue May 20 11:53:35 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Tue, 20 May 2014 11:53:35 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <20140519235158.GJ30691@auth.logic.tuwien.ac.at>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at>
Message-ID: <537B261F.1080409@gmx.de>

hI

Am 20.05.2014 01:51, schrieb Norbert Preining:
> Hi
>
> On Mon, 19 May 2014, Josef Kleber wrote:
>> i wrote a bash script osmimage
>
> Besides all the other answers, ... here my comments:
> * it would have been nice to actually attach the script, as it is
>    not very long. I do it now. (attachment "osmimage")

There was a link, i didn't want to be too intrusive! ;-)

> * reading through it I guess it takes me with practically no
>    knowledge of lua at most 1h to rewrite it in lua, if you ask
>    one lua expert here niccely, they will come up with code in 10min.
>    Actually, it took me *exactely* 1h ... of course, it does not
>    do error handling on Windows, which is a pain ..
>    attachment "osmimage.lua"

Thank you for your effort.

> * it also need alt_getopt.lua which is in TeX Live. I am not sure
>    how this can be automatically found, lua experts, please

Okay, that's definitely not me! ;-)

One problem is still left for Windows users, as there's no wget 
available. Yesterday i googled this code:

-- loads the HTTP module and any libraries it requires
local http = require("socket.http")

-- load the ltn12 module
local ltn12 = require("ltn12")

local file = ltn12.sink.file(io.open('stackoverflow', 'w'))
http.request {
     url = 'http://stackoverflow.com',
     sink = file,
}

This works for the website, but strangely not for an image. Something 
gets downloaded but it seems to be corrupt.

Does anybody know how to download an image with pure Lua code. In the 
end that would be enough for my purpose. I can construct the URL on the 
LaTeX side, then download.lua URL, which downloads the image to the 
working directory would suffice. But it's nice to have the full script!

Josef



From taco at elvenkind.com  Tue May 20 12:09:47 2014
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 20 May 2014 12:09:47 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537B261F.1080409@gmx.de>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at> <537B261F.1080409@gmx.de>
Message-ID: <C6715844-B131-44B7-A6B3-8401A154F0DC@elvenkind.com>


On 20 May 2014, at 11:53, Josef Kleber <josef.kleber at gmx.de> wrote:

> 
> local file = ltn12.sink.file(io.open('stackoverflow', 'w'))
> 
> This works for the website, but strangely not for an image. Something gets downloaded but it seems to be corrupt.


This being windows, you probably need

   local file = ltn12.sink.file(io.open('stackoverflow', 'wb?))

Best wishes,
Taco




From josef.kleber at gmx.de  Tue May 20 12:27:04 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Tue, 20 May 2014 12:27:04 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <C6715844-B131-44B7-A6B3-8401A154F0DC@elvenkind.com>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at> <537B261F.1080409@gmx.de>
 <C6715844-B131-44B7-A6B3-8401A154F0DC@elvenkind.com>
Message-ID: <537B2DF8.5000508@gmx.de>

Am 20.05.2014 12:09, schrieb Taco Hoekwater:
>
> On 20 May 2014, at 11:53, Josef Kleber <josef.kleber at gmx.de> wrote:
>
>>
>> local file = ltn12.sink.file(io.open('stackoverflow', 'w'))
>>
>> This works for the website, but strangely not for an image. Something gets downloaded but it seems to be corrupt.
>
>
> This being windows, you probably need
>
>     local file = ltn12.sink.file(io.open('stackoverflow', 'wb?))
                                                             ^^^^

Thank you, works! One problem less.

Josef



From josef.kleber at gmx.de  Tue May 20 12:45:22 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Tue, 20 May 2014 12:45:22 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <21370.33861.999086.484691@zaphod.ms25.net>
References: <537A098C.8000902@gmx.de>
 <CALBOmsYcGvnvZWWayYZppVAPAsPdQS+jXcWWB8j=hvG8VUBqgQ@mail.gmail.com>
 <537A1689.3030406@gmx.de>
 <CAC1phyZQitMBgQ=cG3ytQPeNjxA1dMSG2UWQWu9+J7B7aX8XNQ@mail.gmail.com>
 <537A1E04.5020605@gmx.de>	<537A25B9.8070805@gmx.de>
 <1xlc5jzrlqodz$.dlg@nililand.de>
 <20140519161919.GA7743@bitmuis.thuis.internal>	<537A37E2.2000909@gmx.de>
 <CALBOmsb12S7kAwdy7P9HhbzcEchNH5YUzzjKGJrp=mn_uiDrJg@mail.gmail.com>
 <537A5A06.9060407@gmx.de> <21370.33861.999086.484691@zaphod.ms25.net>
Message-ID: <537B3242.6070403@gmx.de>

Am 20.05.2014 00:23, schrieb Reinhard Kotucha:
> On 2014-05-19 at 21:22:46 +0200, Josef Kleber wrote:
>
>   > Am 19.05.2014 19:47, schrieb Mojca Miklavec:
>   > >
>   > > (Cynicism aside, you should really learn lua or ask for step-by-step
>   > > help on the mailing list. Particularly with your complexity of the
>   > > script, it should be trivial to port it to lua and preserve all the
>   > > headaches for everyone else.)
>   > >
>   >
>   > Okay, i now googled how to download a file with Lua and i can
>   > construct the URL also on the LaTeX side. So it should be doable
>   > even for me! ;-)
>   >
>   > To download the map with a LaTeX command i would still need
>   >
>   > \immediate\write18{texlua osmimage.lua}
>   >
>   > Right? Or am i missing something?
>
> Well, this doesn't work because texlua doesn't know where in the TEXMF
> tree osmimage.lua is installed.  You have to write:
>
>    \immediate\write18{osmimage}
>
> On Unix osimage is a symlink to osmimage.lua and on Windows
> osmimage.exe passes its arguments to runscript.tlu, which determines
> the location of your script and finally executes it.  runscript.tlu is
> executed by texlua, which in turn has kpathsea built-in.

Thanks, create new synopses!

> Another interesting solution would be to put the Lua code directly
> into the LaTeX file.  Since LuaTeX is based on pdfTeX, the only
> restriction is that XeTeX users are excluded.  But a self-contained
> package has some advantages too.  In order to see how easy it is,
> look at my minimal example:

True, but i would like to support as many engines than possible.

>   > Okay, i now googled how to download a file with Lua and i can
>   > construct the URL also on the LaTeX side. So it should be doable
>   > even for me! ;-)
>
> BTW, if you assemble the URL on the LaTeX side, how do you read
> command-line arguments?  It's probably easier to do this in Lua.

It would be something like:

\wgetmap[file=mymap, ...]{Marienplatz 15, 80331 M?nchen, Deutschland}
\includegraphics{mymap}

with sensible defaults for the options. So, there's no need to read 
command line arguments, but contruct the URL and send it to a lus script 
that just downloads it. Now, Norbert already provided a full version.

> Here are some useful links:
>
>    The definite guide is the book "Programming in Lua".  Only the first
>    edition (Lua 5.0) is available online.  Most of the content is still
>    valid.  If in doubt, consult the Reference Manual.
>
>      http://www.lua.org/pil/contents.html

I know it. I've read the first few chapters. That's my very basic 
knowledge of Lua! ;-)

>    The Lua 5.2 Reference Manual
>
>      http://www.lua.org/manual/5.2/
>
>    The Tutorial Wiki
>
>      http://lua-users.org/wiki/TutorialDirectory
>
> After all, the book "Programming in Lua", 3rd edition, ISBN 859037985X,
> is definitely worth it's money.
>
> In order to see which modules and extensions are avalable in texlua and
> luatex, run
>
>    texdoc luatex
>
> There are a few useful extensions.

Thanks, i will have a look.

Josef





From josef.kleber at gmx.de  Tue May 20 13:27:33 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Tue, 20 May 2014 13:27:33 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537B261F.1080409@gmx.de>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at> <537B261F.1080409@gmx.de>
Message-ID: <537B3C25.8050608@gmx.de>

Am 20.05.2014 11:53, schrieb Josef Kleber:
> hI
>
> Am 20.05.2014 01:51, schrieb Norbert Preining:
>> * it also need alt_getopt.lua which is in TeX Live. I am not sure
>>    how this can be automatically found, lua experts, please
>
> Okay, that's definitely not me! ;-)
>

That seems to be the last problem. If i comment the getopt parts, 
'texlua osmimage.lua' uses the default values and downloads the expected 
map.

Josef



From rdt at cs.queensu.ca  Tue May 20 15:01:01 2014
From: rdt at cs.queensu.ca (Bob Tennent)
Date: Tue, 20 May 2014 09:01:01 -0400
Subject: [tex-live]  dvipdfmx in TL2014
Message-ID: <537b520d.ye4yvoXFjqtPrDhX%rdt@cs.queensu.ca>


"the warning of dvipdfmx which seems to be harmless"

But isn't turned off by the -q option.  

Bob T.


From preining at logic.at  Tue May 20 15:27:15 2014
From: preining at logic.at (Norbert Preining)
Date: Tue, 20 May 2014 22:27:15 +0900
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537B3C25.8050608@gmx.de>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at> <537B261F.1080409@gmx.de>
 <537B3C25.8050608@gmx.de>
Message-ID: <20140520132715.GZ30691@auth.logic.tuwien.ac.at>

On Tue, 20 May 2014, Josef Kleber wrote:
> That seems to be the last problem. If i comment the getopt parts,
> 'texlua osmimage.lua' uses the default values and downloads the
> expected map.

Can you send me the final code, then I can see how it can be easily
included so that the getopt part works.

Taco/Hans/Mojca - do you have better ways for getopt parsing?


Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------


From taco at elvenkind.com  Tue May 20 15:39:35 2014
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 20 May 2014 15:39:35 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <20140520132715.GZ30691@auth.logic.tuwien.ac.at>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at> <537B261F.1080409@gmx.de>
 <537B3C25.8050608@gmx.de> <20140520132715.GZ30691@auth.logic.tuwien.ac.at>
Message-ID: <1AC2FDF7-9972-4010-AFF0-9AC7B1453852@elvenkind.com>


On 20 May 2014, at 15:27, Norbert Preining <preining at logic.at> wrote:

> On Tue, 20 May 2014, Josef Kleber wrote:
>> That seems to be the last problem. If i comment the getopt parts,
>> 'texlua osmimage.lua' uses the default values and downloads the
>> expected map.
> 
> Can you send me the final code, then I can see how it can be easily
> included so that the getopt part works.
> 
> Taco/Hans/Mojca - do you have better ways for getopt parsing?

Hans has a system inside mtxrun, but I assume that is not usable
outside of it, it is quite specific. I have nothing else (I tend to write
from scratch). But surely there are other lua scripts in TL that need options?

Best wishes,
Taco





From cereda.paulo at gmail.com  Tue May 20 16:33:54 2014
From: cereda.paulo at gmail.com (Paulo Roberto Massa Cereda)
Date: Tue, 20 May 2014 11:33:54 -0300
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <1AC2FDF7-9972-4010-AFF0-9AC7B1453852@elvenkind.com>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at> <537B261F.1080409@gmx.de>
 <537B3C25.8050608@gmx.de> <20140520132715.GZ30691@auth.logic.tuwien.ac.at>
 <1AC2FDF7-9972-4010-AFF0-9AC7B1453852@elvenkind.com>
Message-ID: <537B67D2.2050009@gmail.com>

Em 20-05-2014 10:39, Taco Hoekwater escreveu:
 > [...]
 > But surely there are other lua scripts in TL that need options?

For checkcites, I wrote a very naive function for parsing stuff which is 
very domain specific (it was my first Lua script that actually escaped 
my sandbox). For dandelion, I was trying to write a more generic 
argument parser (with flags, modifiers and actions), but I'm rewriting 
it from scratch since David managed to find some bugs^H^H^H^H 
undocumented features in my code. :)

It's doable to write a lexical/syntactic analyzer, I'll see what I can 
do later on. If there aren't many options, a hard coded approach might 
be useful in the short run.

All the best,

Paulo


From jfbu at free.fr  Tue May 20 17:15:48 2014
From: jfbu at free.fr (jfbu)
Date: Tue, 20 May 2014 17:15:48 +0200
Subject: [tex-live] dvipdfmx in TL2014
In-Reply-To: <537b520d.ye4yvoXFjqtPrDhX%rdt@cs.queensu.ca>
References: <537b520d.ye4yvoXFjqtPrDhX%rdt@cs.queensu.ca>
Message-ID: <CF3DC487-9C86-4F80-9127-74D966873804@free.fr>


Le 20 mai 2014 ? 15:01, Bob Tennent <rdt at cs.queensu.ca> a ?crit :

> 
> "the warning of dvipdfmx which seems to be harmless"
> 
> But isn't turned off by the -q option.  
> 
> Bob T.
> 

sorry about losing the initial messages of this thread

here is a some example for which latex+dvipdfmx exhibits the issue

\documentclass{article}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{txfonts}
\begin{document}
\ttfamily
My name is Fran?ois, Jean-Fran?ois
\end{document}

Running `PDF par dvipdfmx' on `seac' with ``dvipdfmx "seac.dvi"''
seac.dvi -> seac.pdf
[1]
** WARNING ** Obsolete four arguments of "endchar" will be used for Type 1 "seac" operator.

3154 bytes written

PDF par dvipdfmx finished at Tue May 20 17:11:21

$ dvipdfmx --help

This is dvipdfmx-20130405 by the DVIPDFMx project team,
modified for TeX Live,
an extended version of dvipdfm-0.13.2c developed by Mark A. Wicks.

best, JF




From josef.kleber at gmx.de  Tue May 20 17:37:26 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Tue, 20 May 2014 17:37:26 +0200
Subject: [tex-live] *** GMX Spamverdacht *** Re: TeXLive (Windows) bash
 script -> exe
In-Reply-To: <20140520132715.GZ30691@auth.logic.tuwien.ac.at>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at> <537B261F.1080409@gmx.de>
 <537B3C25.8050608@gmx.de> <20140520132715.GZ30691@auth.logic.tuwien.ac.at>
Message-ID: <537B76B6.2090805@gmx.de>

Am 20.05.2014 15:27, schrieb Norbert Preining:
> On Tue, 20 May 2014, Josef Kleber wrote:
>> That seems to be the last problem. If i comment the getopt parts,
>> 'texlua osmimage.lua' uses the default values and downloads the
>> expected map.
>
> Can you send me the final code, then I can see how it can be easily
> included so that the getopt part works.

osmimage.lua attached.

This works for me with wget, but i was unable to integrate the 
'http.request' method that worked in another test.

Josef

-------------- next part --------------
#!/usr/bin/env texlua
--
-- osmimage [options]
--
-- downloads an OpenStreetMap map specified by [options]
-- by using http://developer.mapquest.com/ web service
--
-- License: LPPL
--

local http = require("socket.http")
local ltn12 = require("ltn12") 

local URL = "http://open.mapquestapi.com/staticmap/v4/getplacemap"
local KEY = ""
local LOCATION = ""
local XSIZE = ""
local YSIZE = ""
local SIZE = ""
local SCALE = ""
local ZOOM = ""
local TYPE = ""
local IMAGETYPE = ""
local COLOR = ""
local NUMBER = ""
local OFILE = "osmimage"
local QUIET = "false"
local VERSION = "v1.1 (19/05/2014)"

function pversion()
  print("osmimage " .. VERSION)
  print("(C) Josef Kleber   License: LPPL")
  os.exit(0)
end

function phelp()
  print([[
osmimage [options]

 downloads an OpenStreetMap map specified by [options]
 by using http://developer.mapquest.com/ web service

 Options:

 -k  key registered at http://developer.mapquest.com/
     default (Example key from web site)!
     Please register and use your own key!

 -l  specify a location
     e.g. 'Bergheimer Stra??????e 110A, 69115 Heidelberg, Germany'

 -x  specify a xsize (800)

 -y  specify a ysize (400)

 -S  short form to specify a size, e.g. 800,400

 -s  specify a scale factor in the range 1692-221871572 (3385 = -z 17)
     see: http://open.mapquestapi.com/staticmap/zoomToScale.html

 -z  specify a zoom in the range 1-18 (zoom overrides scale!)

 -t  specify map type {map|sat|hyb} (map)

 -i  specify image type {jpeg|jpg|gif|png} (png)

 -c  specify icon color (yellow_1)
     see: http://open.mapquestapi.com/staticmap/icons.html

 -n  specify the icon number (1)

 -o  specify output basename without file extension (osmimage.IMAGETYPE)

 -q  quiet; no output!

 -v  prints version information

 -h  prints help information

]])
  pversion()
end

function osmimage_error(exitcode, errortext)
  io.stderr:write ("Error (" .. exitcode .. "): " .. errortext .. "\n")
  os.exit(exitcode)
end 

function osmimage_warning(warningtext)
  io.stderr:write("WARNING: " .. warningtext .. "\n")
end


function check_number(var, varname)
  local number='^[0-9]+$'
  if not(string.match(var, '^[0-9]+$')) then
    osmimage_error(2, varname .. " can't be " .. var .. "! Not a number!")
  end
end

function check_range(var,min,max,exitcode,varname)
  check_number(var,varname)
  if (var < min or var > max) then
    osmimage_error(exitcode, varname .. " = " .. var .. "; must be in the range of " .. min .. "-" .. max)
  end
end


-- require "alt_getopt"
-- local long_opts = {}
-- local ret
-- local optarg
-- local optind
-- opts,optind,optarg = alt_getopt.get_ordered_opts(arg, "k:l:x:y:S:s:z:t:i:c:n:o:qvh", long_opts)
-- for i,v in ipairs (opts) do
  -- if v == "k" then
    -- KEY = optarg[i]
  -- elseif v == "l" then
    -- LOCATION = optarg[i]
  -- elseif v == "x" then
    -- XSIZE = optarg[i]
  -- elseif v == "y" then
    -- YSIZE = optarg[i]
  -- elseif v == "S" then
    -- SIZE = optarg[i]
  -- elseif v == "s" then
    -- SCALE = optarg[i]
  -- elseif v == "z" then
    -- ZOOM = optarg[i]
  -- elseif v == "t" then
    -- TYPE = optarg[i]
  -- elseif v == "i" then
    -- IMAGETYPE = optarg[i]
  -- elseif v == "c" then
    -- COLOR = optarg[i]
  -- elseif v == "n" then
    -- NUMBER = optarg[i]
  -- elseif v == "o" then
    -- OFILE = optarg[i]
  -- elseif v == "q" then
    -- QUIET = 1
  -- elseif v == "v" then
    -- pversion()
  -- elseif v == "h" then
    -- phelp()
  -- end
-- end

--
-- TO BE DONE TODO TODO TODO
-- if [ "$QUIET" = "true" ]
-- then
--   exec 1>/dev/null
--   exec 2>/dev/null
-- fi

if KEY == "" then
  KEY="Kmjtd%7Cluu7n162n1%2C22%3Do5-h61wh"
  osmimage_warning("KEY not specified; using mapquest example key as default!")
end

if LOCATION == "" then
  LOCATION = "Bergheimer Stra????e 110A, 69115 Heidelberg, Germany"
  osmimage_warning("LOCATION not specified; using Dante e.V. Office as default!")
end

if XSIZE == "" then
  XSIZE=800
  osmimage_warning("XSIZE not specified; using XSIZE=800 as default!")
end

check_range(XSIZE,1,3840,11,"XSIZE")

if YSIZE == "" then
  YSIZE=400
  osmimage_warning("YSIZE not specified; using YSIZE=400 as default!")
end
check_range(YSIZE,1,3840,12,"YSIZE")

if SIZE == "" then
  SIZE = XSIZE .. "," .. YSIZE
end

if SCALE == "" then
  if ZOOM == "" then
    SCALE=3385
    osmimage_warning("SCALE not specified, using SCALE=3385 as default!")
  end
else
  check_range(SCALE,1692,221871572,13,"SCALE")
end

if TYPE == "" then
  TYPE = "map"
  osmimage_warning("TYPE not specified; using map as default!")
end

if IMAGETYPE == "" then
  IMAGETYPE="png"
  osmimage_warning("IMAGETYPE not specified; using png as default!")
end

if COLOR == "" then
  COLOR="yellow_1"
  osmimage_warning("COLOR not specified; using yellow_1 as default!")
end

if NUMBER == "" then
  NUMBER=1
  osmimage_warning("NUMBER not specified; using 1 as default!")
end
check_number(NUMBER,"NUMBER")

ULOCATION = "&location=" .. LOCATION
USIZE = "&size=" .. SIZE
if ZOOM == "" then
  USCALEZOOM = "&scale=" .. SCALE
else
  check_range(ZOOM,1,18,14,"ZOOM")
  USCALEZOOM = "&zoom=" .. ZOOM
end
UTYPE = "&type=" .. TYPE
UIMAGETYPE = "&imagetype=" .. IMAGETYPE
USHOWICON = "&showicon=" .. COLOR .. "-" .. NUMBER
UOFILE = OFILE .. "." .. IMAGETYPE

IMGURL = URL .. "?key=" .. KEY .. ULOCATION .. USIZE .. USCALEZOOM .. UTYPE .. UIMAGETYPE .. USHOWICON

PROGLINE = "wget '" .. IMGURL .. "' -O " .. UOFILE

print(PROGLINE)
os.spawn(PROGLINE)
-- works

-- local file = ltn12.sink.file(io.open(UOFILE, 'wb'))
-- http.request {
    -- url = IMGURL,
    -- sink = file,
-- } 
-- gives <html><body><b>Http/1.1 Bad Request</b></body> </html> instead of image
-- URL encoding for LOCATION??? but works for wget

From ziegenhagen at gmail.com  Tue May 20 20:50:31 2014
From: ziegenhagen at gmail.com (Uwe Ziegenhagen)
Date: Tue, 20 May 2014 20:50:31 +0200
Subject: [tex-live] Crash on Windows XP (perl.exe)
Message-ID: <CAML7JCiWfBBVkXFPmi7VuSOxb9vqKXeTr4jZN+D5KbsZR1Dwpg@mail.gmail.com>

Hi,

I know Win XP is not supported officially but here's an error screenshot I
just took.



-- 
Uwe Ziegenhagen
<http://www.uweziegenhagen.de>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140520/b1715d13/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: TLerror_20140520.png
Type: image/png
Size: 74618 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20140520/b1715d13/attachment-0001.png>

From reinhard.kotucha at web.de  Tue May 20 23:21:04 2014
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 20 May 2014 23:21:04 +0200
Subject: [tex-live] Crash on Windows XP (perl.exe)
In-Reply-To: <CAML7JCiWfBBVkXFPmi7VuSOxb9vqKXeTr4jZN+D5KbsZR1Dwpg@mail.gmail.com>
References: <CAML7JCiWfBBVkXFPmi7VuSOxb9vqKXeTr4jZN+D5KbsZR1Dwpg@mail.gmail.com>
Message-ID: <21371.51008.382649.531749@zaphod.ms25.net>

On 2014-05-20 at 20:50:31 +0200, Uwe Ziegenhagen wrote:

 > I know Win XP is not supported officially

Not supported by Microsoft.  It's still supported by TeX Live because
many people are still using it.  It's mentioned in the TeX Live Guide,
section 1.2.

 > but here's an error screenshot I just took.

According to the installer messages the command tar -x fails.  Are you
using a virus scanner?  If yes, which one?  Could you try again with
the virus scanner turned off?

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From daleif at imf.au.dk  Tue May 20 23:30:55 2014
From: daleif at imf.au.dk (Lars Madsen)
Date: Tue, 20 May 2014 21:30:55 +0000
Subject: [tex-live] Crash on Windows XP (perl.exe)
In-Reply-To: <CAML7JCiWfBBVkXFPmi7VuSOxb9vqKXeTr4jZN+D5KbsZR1Dwpg@mail.gmail.com>
References: <CAML7JCiWfBBVkXFPmi7VuSOxb9vqKXeTr4jZN+D5KbsZR1Dwpg@mail.gmail.com>
Message-ID: <89ECE88578D8F648A22E307DAEE885794A4491E1@SRVUNIMBX08.uni.au.dk>

Not reading German is a bit of a bummer regarding that error message.

What happens if you simply restart the install? Could be a bad download.

Sent from my tablet using TouchDown

-----Original Message-----
From: Uwe Ziegenhagen [ziegenhagen at gmail.com]
Received: tirsdag, 20 maj 2014, 20:58
To: tex-live [tex-live at tug.org]
Subject: [tex-live] Crash on Windows XP (perl.exe)

Hi,

I know Win XP is not supported officially but here's an error screenshot I just took.



--
Uwe Ziegenhagen
<http://www.uweziegenhagen.de>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140520/01f92c05/attachment.html>

From karl at freefriends.org  Tue May 20 23:41:08 2014
From: karl at freefriends.org (Karl Berry)
Date: Tue, 20 May 2014 21:41:08 +0000
Subject: [tex-live] dvipdfmx in TL2014
In-Reply-To: <CF3DC487-9C86-4F80-9127-74D966873804@free.fr>
Message-ID: <201405202141.s4KLf8t5012797@freefriends.org>

    ** WARNING ** Obsolete four arguments of "endchar" will be used for
       Type 1 "seac" operator.

Thanks for the report about more fonts with the same problem.
I suspect essentially all the fonts created by Bob and Michael will be
in the same boat.

If we rebuild again, I'll eliminate the warning, but I don't want to
rebuild just for that.  I also still believe it is something that can
(and perhaps should) be fixed in the fonts, but I can't undertake all
the research.  My impression is that it is not every use of seac that
causes a warning, but only when it is used in this particular way that
fontforge (or whatever) that is generating.

best,
karl


From ul at openlilylib.org  Wed May 21 00:08:11 2014
From: ul at openlilylib.org (Urs Liska)
Date: Wed, 21 May 2014 00:08:11 +0200
Subject: [tex-live] Crash on Windows XP (perl.exe)
In-Reply-To: <89ECE88578D8F648A22E307DAEE885794A4491E1@SRVUNIMBX08.uni.au.dk>
References: <CAML7JCiWfBBVkXFPmi7VuSOxb9vqKXeTr4jZN+D5KbsZR1Dwpg@mail.gmail.com>
 <89ECE88578D8F648A22E307DAEE885794A4491E1@SRVUNIMBX08.uni.au.dk>
Message-ID: <537BD24B.8070100@openlilylib.org>

Am 20.05.2014 23:30, schrieb Lars Madsen:
> Not reading German is a bit of a bummer regarding that error message.

The German error message only says that perl.exe has crashed.

>
> What happens if you simply restart the install? Could be a bad download.
>
> Sent from my tablet using TouchDown
>
> -----Original Message-----
> From: Uwe Ziegenhagen [ziegenhagen at gmail.com]
> Received: tirsdag, 20 maj 2014, 20:58
> To: tex-live [tex-live at tug.org]
> Subject: [tex-live] Crash on Windows XP (perl.exe)
>
> Hi,
>
> I know Win XP is not supported officially but here's an error screenshot I just took.
>
>
>
> --
> Uwe Ziegenhagen
> <http://www.uweziegenhagen.de>
>



From d.p.carlisle at gmail.com  Wed May 21 00:10:40 2014
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Tue, 20 May 2014 23:10:40 +0100
Subject: [tex-live] \typein bug in lualatex
Message-ID: <CAEW6iOjohHgqRHVBJt5L0yHv9Fgsi0h69BvkgHN5HoV-ZjKt3w@mail.gmail.com>

the file   lualatex-patch-kernel.tex patches \typein while making the
lualatex format but unfortunately the redefinition is incorrect. The
maintenance of teh file wasn't that clear to me so I'm reporting to the
tex-live ,ist.

if you enter # to a \typein prompt it is supposed to work but generates

\foo =#
! Illegal parameter number in definition of \foo.


with lualatex.

The following test file show one possible fixed definition  and tests the
above input


\makeatletter



\def\@xtypein[#1]#2{%
  \typeout{#2}%
  %%\advance\endlinechar\@M
  \begingroup \endlinechar\m at ne
  \read\@inputcheck to#1%
  \expandafter\endgroup
  \expandafter\edef\expandafter#1\expandafter
    {\expandafter\unexpanded\expandafter{#1}}%
%%%%%%%%%  \expandafter\def\expandafter#1\expandafter{#1}% doesn't allow #
  %%\advance\endlinechar-\@M
  \@typein}



\typein[\foo]{type here:}
\show \foo


\stop
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140520/8d230587/attachment.html>

From reinhard.kotucha at web.de  Wed May 21 02:21:23 2014
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 21 May 2014 02:21:23 +0200
Subject: [tex-live] Crash on Windows XP (perl.exe)
In-Reply-To: <89ECE88578D8F648A22E307DAEE885794A4491E1@SRVUNIMBX08.uni.au.dk>
References: <CAML7JCiWfBBVkXFPmi7VuSOxb9vqKXeTr4jZN+D5KbsZR1Dwpg@mail.gmail.com>
 <89ECE88578D8F648A22E307DAEE885794A4491E1@SRVUNIMBX08.uni.au.dk>
Message-ID: <21371.61827.63884.657601@zaphod.ms25.net>

On 2014-05-20 at 21:30:55 +0000, Lars Madsen wrote:

 > Not reading German is a bit of a bummer regarding that error
 > message.

It's easy to switch to English on Unix, even temporarily, but I must
admit that I don't know how to do that on Windows.  I know that it's
possible.  A friend of mine is permanently switching between German,
English, and Chinese on Windows.  Maybe I have to ask him and post the
instructions here.

On Unix:

  LANG=en_US some_program ...

Error messages in German, Russian, or Portuguese are not helpful at
all in the context of international mailing lists.

 > What happens if you simply restart the install? Could be a bad
 > download.

I doubt.  What I expect is that it crashes somewhere else.

 > Sent from my tablet using TouchDown

Sent from my Game Boy.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From reinhard.kotucha at web.de  Wed May 21 04:22:39 2014
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 21 May 2014 04:22:39 +0200
Subject: [tex-live] *** GMX Spamverdacht *** Re: TeXLive (Windows) bash
 script -> exe
In-Reply-To: <537B76B6.2090805@gmx.de>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at>	<537B261F.1080409@gmx.de>
 <537B3C25.8050608@gmx.de>	<20140520132715.GZ30691@auth.logic.tuwien.ac.at>
 <537B76B6.2090805@gmx.de>
Message-ID: <21372.3567.841127.362897@zaphod.ms25.net>

On 2014-05-20 at 17:37:26 +0200, Josef Kleber wrote:


--  > Am 20.05.2014 15:27, schrieb Norbert Preining:
 > > On Tue, 20 May 2014, Josef Kleber wrote:
 > >> That seems to be the last problem. If i comment the getopt parts,
 > >> 'texlua osmimage.lua' uses the default values and downloads the
 > >> expected map.
 > >
 > > Can you send me the final code, then I can see how it can be easily
 > > included so that the getopt part works.
 > 
 > osmimage.lua attached.
 > 
 > This works for me with wget, but i was unable to integrate the 
 > 'http.request' method that worked in another test.
 > 
 > Josef

This doesn't work:

 > PROGLINE = "wget '" .. IMGURL .. "' -O " .. UOFILE
 > os.spawn(PROGLINE)

Windows doesn't understand single quotes.  You have to use double
quotes on Windows.  os.type is your friend.  It returns "unix" on Unix
and "windows" on Windows.  You have to treat Unix and Windows command
lines differently here.

Another issue:
wget isn't in PATH on Windows.  You have to provide the path to wget
yourself. 

local function wget ()
  local WGET 
  if os.type == 'windows' then
    local texmf_root = kpse.var_value('TEXMFROOT')
    WGET = texmf_root .. '/tlpkg/installer/wget/wget.exe'
  else
    WGET='wget'
  end  
  return WGET
end

 > -- TO BE DONE TODO TODO TODO
 > -- if [ "$QUIET" = "true" ]
 > -- then
 > --   exec 1>/dev/null
 > --   exec 2>/dev/null
 > -- fi

In order to suppress stdout, simply read the output of wget from a
pipe.  Just use io.popen() instead of os.spawn().

 > -- local file = ltn12.sink.file(io.open(UOFILE, 'wb'))
 > -- http.request {
 >     -- url = IMGURL,
 >     -- sink = file,
 > -- } 
 > -- gives <html><body><b>Http/1.1 Bad Request</b></body> </html> instead of image
 > -- URL encoding for LOCATION??? but works for wget

Maybe a problem with special characters.  I recommend to transform all
special chars in IMGURL to hex i.e., replace "&" with "%26".
Otherwise it would be more difficult to support different operating
systems.

And if you are running your script in an arbitry directory for
testing, (no symlinks or wrappers involved), add the line

  kpse.set_program_name('texlua')

to your script and things like

   require ("alt_getopt") 

will work.


How do you handle character encodings?

  LOCATION = "Bergheimer Stra?????e 110A, 69115 Heidelberg, Germany"  

Regards,
  Reinhard

----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From preining at logic.at  Wed May 21 04:34:52 2014
From: preining at logic.at (Norbert Preining)
Date: Wed, 21 May 2014 11:34:52 +0900
Subject: [tex-live] *** GMX Spamverdacht *** Re: TeXLive (Windows) bash
 script -> exe
In-Reply-To: <21372.3567.841127.362897@zaphod.ms25.net>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at> <537B261F.1080409@gmx.de>
 <537B3C25.8050608@gmx.de> <20140520132715.GZ30691@auth.logic.tuwien.ac.at>
 <537B76B6.2090805@gmx.de> <21372.3567.841127.362897@zaphod.ms25.net>
Message-ID: <20140521023452.GE30691@auth.logic.tuwien.ac.at>

Hi Josef,

I have taken Reinhard's advice and included them into the script,
here is an updated version.

I cannot guarantee that it works on Windows, I have no easy access,
but on Unix it works ;-)

With getopt

>  > -- TO BE DONE TODO TODO TODO
>  > -- if [ "$QUIET" = "true" ]
>  > -- then
>  > --   exec 1>/dev/null
>  > --   exec 2>/dev/null
>  > -- fi
> 
> In order to suppress stdout, simply read the output of wget from a
> pipe.  Just use io.popen() instead of os.spawn().

Yeah, maybe later

> And if you are running your script in an arbitry directory for
> testing, (no symlinks or wrappers involved), add the line
> 
>   kpse.set_program_name('texlua')
> 
> to your script and things like
> 
>    require ("alt_getopt") 
> 
> will work.

Does this also work if symlink and wrappers (like in a typical TL Windows
case) are used?

> How do you handle character encodings?
> 
>   LOCATION = "Bergheimer Stra?????e 110A, 69115 Heidelberg, Germany"  

My failure ... I was typing in a Japanese environment emacs ;-)))


Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------
-------------- next part --------------
#!/usr/bin/env texlua
--
-- osmimage [options]
--
-- downloads an OpenStreetMap map specified by [options]
-- by using http://developer.mapquest.com/ web service
--
-- License: LPPL
--


local URL = "http://open.mapquestapi.com/staticmap/v4/getplacemap"
local KEY = ""
local LOCATION = ""
local XSIZE = ""
local YSIZE = ""
local SIZE = ""
local SCALE = ""
local ZOOM = ""
local TYPE = ""
local IMAGETYPE = ""
local COLOR = ""
local NUMBER = ""
local OFILE = "osmimage"
local QUIET = "false"
local VERSION = "v1.1 (19/05/2014)"


kpse.set_program_name('texlua')
require ("alt_getopt")


function pversion()
  print("osmimage " .. VERSION)
  print("(C) Josef Kleber   License: LPPL")
  os.exit(0)
end

function phelp()
  print([[
osmimage [options]

 downloads an OpenStreetMap map specified by [options]
 by using http://developer.mapquest.com/ web service

 Options:

 -k  key registered at http://developer.mapquest.com/
     default (Example key from web site)!
     Please register and use your own key!

 -l  specify a location
     e.g. 'Bergheimer Stra?e 110A, 69115 Heidelberg, Germany'

 -x  specify a xsize (800)

 -y  specify a ysize (400)

 -S  short form to specify a size, e.g. 800,400

 -s  specify a scale factor in the range 1692-221871572 (3385 = -z 17)
     see: http://open.mapquestapi.com/staticmap/zoomToScale.html

 -z  specify a zoom in the range 1-18 (zoom overrides scale!)

 -t  specify map type {map|sat|hyb} (map)

 -i  specify image type {jpeg|jpg|gif|png} (png)

 -c  specify icon color (yellow_1)
     see: http://open.mapquestapi.com/staticmap/icons.html

 -n  specify the icon number (1)

 -o  specify output basename without file extension (osmimage.IMAGETYPE)

 -q  quiet; no output!

 -v  prints version information

 -h  prints help information

]])
  pversion()
end

function osmimage_error(exitcode, errortext)
  io.stderr:write ("Error (" .. exitcode .. "): " .. errortext .. "\n")
  os.exit(exitcode)
end 

function osmimage_warning(warningtext)
  io.stderr:write("WARNING: " .. warningtext .. "\n")
end


function check_number(var, varname)
  local number='^[0-9]+$'
  if not(string.match(var, '^[0-9]+$')) then
    osmimage_error(2, varname .. " can't be " .. var .. "! Not a number!")
  end
end

function check_range(var,min,max,exitcode,varname)
  check_number(var,varname)
  if (var < min or var > max) then
    osmimage_error(exitcode, varname .. " = " .. var .. "; must be in the range of " .. min .. "-" .. max)
  end
end


local long_opts = {}
local ret
local optarg
local optind
opts,optind,optarg = alt_getopt.get_ordered_opts(arg, "k:l:x:y:S:s:z:t:i:c:n:o:qvh", long_opts)
for i,v in ipairs (opts) do
  if v == "k" then
    KEY = optarg[i]
  elseif v == "l" then
    LOCATION = optarg[i]
  elseif v == "x" then
    XSIZE = optarg[i]
  elseif v == "y" then
    YSIZE = optarg[i]
  elseif v == "S" then
    SIZE = optarg[i]
  elseif v == "s" then
    SCALE = optarg[i]
  elseif v == "z" then
    ZOOM = optarg[i]
  elseif v == "t" then
    TYPE = optarg[i]
  elseif v == "i" then
    IMAGETYPE = optarg[i]
  elseif v == "c" then
    COLOR = optarg[i]
  elseif v == "n" then
    NUMBER = optarg[i]
  elseif v == "o" then
    OFILE = optarg[i]
  elseif v == "q" then
    QUIET = 1
  elseif v == "v" then
    pversion()
  elseif v == "h" then
    phelp()
  end
end

--
-- TO BE DONE TODO TODO TODO
-- if [ "$QUIET" = "true" ]
-- then
--   exec 1>/dev/null
--   exec 2>/dev/null
-- fi

if KEY == "" then
  KEY="Kmjtd%7Cluu7n162n1%2C22%3Do5-h61wh"
  osmimage_warning("KEY not specified; using mapquest example key as default!")
end

if LOCATION == "" then
  LOCATION = "Bergheimer Stra?e 110A, 69115 Heidelberg, Germany"
  osmimage_warning("LOCATION not specified; using Dante e.V. Office as default!")
end

if XSIZE == "" then
  XSIZE=800
  osmimage_warning("XSIZE not specified; using XSIZE=800 as default!")
end

check_range(XSIZE,1,3840,11,"XSIZE")

if YSIZE == "" then
  YSIZE=400
  osmimage_warning("YSIZE not specified; using YSIZE=400 as default!")
end
check_range(YSIZE,1,3840,12,"YSIZE")

if SIZE == "" then
  SIZE = XSIZE .. "," .. YSIZE
end

if SCALE == "" then
  if ZOOM == "" then
    SCALE=3385
    osmimage_warning("SCALE not specified, using SCALE=3385 as default!")
  end
else
  check_range(SCALE,1692,221871572,13,"SCALE")
end

if TYPE == "" then
  TYPE = "map"
  osmimage_warning("TYPE not specified; using map as default!")
end

if IMAGETYPE == "" then
  IMAGETYPE="png"
  osmimage_warning("IMAGETYPE not specified; using png as default!")
end

if COLOR == "" then
  COLOR="yellow_1"
  osmimage_warning("COLOR not specified; using yellow_1 as default!")
end

if NUMBER == "" then
  NUMBER=1
  osmimage_warning("NUMBER not specified; using 1 as default!")
end
check_number(NUMBER,"NUMBER")

ULOCATION = "&location=" .. LOCATION
USIZE = "&size=" .. SIZE
if ZOOM == "" then
  USCALEZOOM = "&scale=" .. SCALE
else
  check_range(ZOOM,1,18,14,"ZOOM")
  USCALEZOOM = "&zoom=" .. ZOOM
end
UTYPE = "&type=" .. TYPE
UIMAGETYPE = "&imagetype=" .. IMAGETYPE
USHOWICON = "&showicon=" .. COLOR .. "-" .. NUMBER
UOFILE = OFILE .. "." .. IMAGETYPE

IMGURL = URL .. "?key=" .. KEY .. ULOCATION .. USIZE .. USCALEZOOM .. UTYPE .. UIMAGETYPE .. USHOWICON

if os.type == 'windows' then
  local texmf_root = kpse.var_value('TEXMFROOT')
  local WGET = texmf_root .. '/tlpkg/installer/wget/wget.exe'
  PROGLINE = WGET .. '"' .. IMGURL .. '" -O ' .. UOFILE
else
  PROGLINE = "wget '" .. IMGURL .. "' -O " .. UOFILE
end

print(PROGLINE)
os.spawn(PROGLINE)


-- works

-- local file = ltn12.sink.file(io.open(UOFILE, 'wb'))
-- http.request {
    -- url = IMGURL,
    -- sink = file,
-- } 
-- gives <html><body><b>Http/1.1 Bad Request</b></body> </html> instead of image
-- URL encoding for LOCATION??? but works for wget

From reinhard.kotucha at web.de  Wed May 21 05:55:43 2014
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 21 May 2014 05:55:43 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <20140521023452.GE30691@auth.logic.tuwien.ac.at>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at>	<537B261F.1080409@gmx.de>
 <537B3C25.8050608@gmx.de>	<20140520132715.GZ30691@auth.logic.tuwien.ac.at>
 <537B76B6.2090805@gmx.de>	<21372.3567.841127.362897@zaphod.ms25.net>
 <20140521023452.GE30691@auth.logic.tuwien.ac.at>
Message-ID: <21372.9151.295091.838986@zaphod.ms25.net>

On 2014-05-21 at 11:34:52 +0900, Norbert Preining wrote:

 > > And if you are running your script in an arbitry directory for
 > > testing, (no symlinks or wrappers involved), add the line
 > > 
 > >   kpse.set_program_name('texlua')
 > > 
 > > to your script and things like
 > > 
 > >    require ("alt_getopt") 
 > > 
 > > will work.
 > 
 > Does this also work if symlink and wrappers (like in a typical TL
 > Windows case) are used?

Yes.  The TEXMF trees are searched relative to the location of programs.
No problem if if they are installed properly.

If a program is invoked from an arbitrary directory, how should the
location of the TEXMF trees be determined?  If you add the line 

  kpse.set_program_name('texlua')

your script is treated like texlua[.exe] itself by kpathsea.  This
means that TEXMF trees are not searched relative to the location of
the script but relative to the location of the texlua binary.

Symlinks and wrappers are installed in the same directory as
texlua[.exe], hence kpse.set_program_name('texlua') doesn't hurt.

 > > How do you handle character encodings?
 > > 
 > >   LOCATION = "Bergheimer Stra?????e 110A, 69115 Heidelberg, Germany"  
 > 
 > My failure ... I was typing in a Japanese environment emacs ;-)))

No, Norbert, it's definitely *not* your failure.

What do you expect to happen with a UTF-8 string on a system which
only supports CP-1252 or any other 8-bit encoding?

The obvious workaround is to make the TUG office the default instead
of the DANTE office in order to avoid the "?".  :)

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------



From ziegenhagen at gmail.com  Wed May 21 06:17:09 2014
From: ziegenhagen at gmail.com (Uwe Ziegenhagen)
Date: Wed, 21 May 2014 06:17:09 +0200
Subject: [tex-live] Crash on Windows XP (perl.exe)
In-Reply-To: <21371.51008.382649.531749@zaphod.ms25.net>
References: <CAML7JCiWfBBVkXFPmi7VuSOxb9vqKXeTr4jZN+D5KbsZR1Dwpg@mail.gmail.com>
 <21371.51008.382649.531749@zaphod.ms25.net>
Message-ID: <CAML7JCiDN3kjPku=EUszQGKbqn62uDYtavWP5RQQ9ANZwZ1XqA@mail.gmail.com>

Hi everyone,

I did not use a scanner, I just ran the installation within a Virtual Box.
I suppose the error was in tk.dll.

I ran the installer again (had a few more tar errors or broken downloads)
but finally managed to get it installed.

Uwe



2014-05-20 23:21 GMT+02:00 Reinhard Kotucha <reinhard.kotucha at web.de>:

> On 2014-05-20 at 20:50:31 +0200, Uwe Ziegenhagen wrote:
>
>  > I know Win XP is not supported officially
>
> Not supported by Microsoft.  It's still supported by TeX Live because
> many people are still using it.  It's mentioned in the TeX Live Guide,
> section 1.2.
>
>  > but here's an error screenshot I just took.
>
> According to the installer messages the command tar -x fails.  Are you
> using a virus scanner?  If yes, which one?  Could you try again with
> the virus scanner turned off?
>
> Regards,
>   Reinhard
>
> --
>
> ----------------------------------------------------------------------------
> Reinhard Kotucha                                      Phone:
> +49-511-3373112
> Marschnerstr. 25
> D-30167 Hannover                              mailto:
> reinhard.kotucha at web.de
>
> ----------------------------------------------------------------------------
> Microsoft isn't the answer. Microsoft is the question, and the answer is
> NO.
>
> ----------------------------------------------------------------------------
>



-- 
Uwe Ziegenhagen
<http://www.uweziegenhagen.de>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140521/03a56bc4/attachment-0001.html>

From heiko.oberdiek at googlemail.com  Wed May 21 07:23:44 2014
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Wed, 21 May 2014 07:23:44 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <20140521023452.GE30691@auth.logic.tuwien.ac.at>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at> <537B261F.1080409@gmx.de>
 <537B3C25.8050608@gmx.de> <20140520132715.GZ30691@auth.logic.tuwien.ac.at>
 <537B76B6.2090805@gmx.de> <21372.3567.841127.362897@zaphod.ms25.net>
 <20140521023452.GE30691@auth.logic.tuwien.ac.at>
Message-ID: <537C3860.4030909@googlemail.com>

Hello,

On 21.05.2014 04:34, Norbert Preining wrote:
> 
> I have taken Reinhard's advice and included them into the script,
> here is an updated version.
> 
> I cannot guarantee that it works on Windows, I have no easy access,
> but on Unix it works ;-)

>From osmimage.lua:

> -- local file = ltn12.sink.file(io.open(UOFILE, 'wb'))
> -- http.request {
>     -- url = IMGURL,
>     -- sink = file,
> -- } 
> -- gives <html><body><b>Http/1.1 Bad Request</b></body> </html> instead of image
> -- URL encoding for LOCATION??? but works for wget

I have added a function url_encode, found in
  http://lua-users.org/wiki/StringRecipes
and wrapped the user data in url_encode.
Then http.request worked for me, see attached script.

This solves the problem of the dependency on wget
(see Windows/MiKTeX).

Yours sincerely
  Heiko Oberdiek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: osmimage2.lua
Type: text/x-lua
Size: 6093 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20140521/515b05da/attachment.bin>

From zdenek.wagner at gmail.com  Wed May 21 10:13:17 2014
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 21 May 2014 10:13:17 +0200
Subject: [tex-live] *** GMX Spamverdacht *** Re: TeXLive (Windows) bash
 script -> exe
In-Reply-To: <21372.3567.841127.362897@zaphod.ms25.net>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at>	<537B261F.1080409@gmx.de>
 <537B3C25.8050608@gmx.de>	<20140520132715.GZ30691@auth.logic.tuwien.ac.at>
 <537B76B6.2090805@gmx.de>	<21372.3567.841127.362897@zaphod.ms25.net>
Message-ID: <CAC1phya090Hd0Xq=RmyXiRCPHgmmW1_=fmPScuGu+faYGamfOg@mail.gmail.com>

2014-05-21 4:22 GMT+02:00 Reinhard Kotucha <reinhard.kotucha at web.de>:

> On 2014-05-20 at 17:37:26 +0200, Josef Kleber wrote:
>
>
> --  > Am 20.05.2014 15:27, schrieb Norbert Preining:
>  > > On Tue, 20 May 2014, Josef Kleber wrote:
>  > >> That seems to be the last problem. If i comment the getopt parts,
>  > >> 'texlua osmimage.lua' uses the default values and downloads the
>  > >> expected map.
>  > >
>  > > Can you send me the final code, then I can see how it can be easily
>  > > included so that the getopt part works.
>  >
>  > osmimage.lua attached.
>  >
>  > This works for me with wget, but i was unable to integrate the
>  > 'http.request' method that worked in another test.
>  >
>  > Josef
>
> This doesn't work:
>
>  > PROGLINE = "wget '" .. IMGURL .. "' -O " .. UOFILE
>  > os.spawn(PROGLINE)
>
> Windows doesn't understand single quotes.  You have to use double
> quotes on Windows.  os.type is your friend.  It returns "unix" on Unix
> and "windows" on Windows.  You have to treat Unix and Windows command
> lines differently here.
>
> Another issue:
> wget isn't in PATH on Windows.  You have to provide the path to wget
> yourself.
>
> local function wget ()
>   local WGET
>   if os.type == 'windows' then
>     local texmf_root = kpse.var_value('TEXMFROOT')
>     WGET = texmf_root .. '/tlpkg/installer/wget/wget.exe'
>   else
>     WGET='wget'
>   end
>   return WGET
> end
>
>  > -- TO BE DONE TODO TODO TODO
>  > -- if [ "$QUIET" = "true" ]
>  > -- then
>  > --   exec 1>/dev/null
>  > --   exec 2>/dev/null
>  > -- fi
>
> In order to suppress stdout, simply read the output of wget from a
> pipe.  Just use io.popen() instead of os.spawn().
>

Windows have nul (with one l), not /dev/null

>
>  > -- local file = ltn12.sink.file(io.open(UOFILE, 'wb'))
>  > -- http.request {
>  >     -- url = IMGURL,
>  >     -- sink = file,
>  > -- }
>  > -- gives <html><body><b>Http/1.1 Bad Request</b></body> </html> instead
> of image
>  > -- URL encoding for LOCATION??? but works for wget
>
> Maybe a problem with special characters.  I recommend to transform all
> special chars in IMGURL to hex i.e., replace "&" with "%26".
> Otherwise it would be more difficult to support different operating
> systems.
>
> And if you are running your script in an arbitry directory for
> testing, (no symlinks or wrappers involved), add the line
>
>   kpse.set_program_name('texlua')
>
> to your script and things like
>
>    require ("alt_getopt")
>
> will work.
>
>
> How do you handle character encodings?
>
>   LOCATION = "Bergheimer Stra?????e 110A, 69115 Heidelberg, Germany"
>
> Regards,
>   Reinhard
>
>
> ----------------------------------------------------------------------------
> Reinhard Kotucha                                      Phone:
> +49-511-3373112
> Marschnerstr. 25
> D-30167 Hannover                              mailto:
> reinhard.kotucha at web.de
>
> ----------------------------------------------------------------------------
> Microsoft isn't the answer. Microsoft is the question, and the answer is
> NO.
>
> ----------------------------------------------------------------------------
>
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140521/90f05d77/attachment.html>

From preining at logic.at  Wed May 21 11:11:19 2014
From: preining at logic.at (Norbert Preining)
Date: Wed, 21 May 2014 18:11:19 +0900
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537C3860.4030909@googlemail.com>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at> <537B261F.1080409@gmx.de>
 <537B3C25.8050608@gmx.de> <20140520132715.GZ30691@auth.logic.tuwien.ac.at>
 <537B76B6.2090805@gmx.de> <21372.3567.841127.362897@zaphod.ms25.net>
 <20140521023452.GE30691@auth.logic.tuwien.ac.at>
 <537C3860.4030909@googlemail.com>
Message-ID: <20140521091119.GF30691@auth.logic.tuwien.ac.at>

> I have added a function url_encode, found in
>   http://lua-users.org/wiki/StringRecipes
> and wrapped the user data in url_encode.
> Then http.request worked for me, see attached script.

Thanks Heiko.

I have replaced the getopt function with my own argument 
parsing routine (actually the one I wrote in 2008 for
TeX Live when I thought I rewrite the whole perl scripts in 
texlua ;-)))))

Attached osmimage3.lua

Josef, you might try that out and see if you like it.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------
-------------- next part --------------
#!/usr/bin/env texlua
--
-- osmimage [options]
--
-- downloads an OpenStreetMap map specified by [options]
-- by using http://developer.mapquest.com/ web service
--
-- License: LPPL
--


local URL = "http://open.mapquestapi.com/staticmap/v4/getplacemap"
local KEY = ""
local LOCATION = ""
local XSIZE = ""
local YSIZE = ""
local SIZE = ""
local SCALE = ""
local ZOOM = ""
local TYPE = ""
local IMAGETYPE = ""
local COLOR = ""
local NUMBER = ""
local OFILE = "osmimage"
local QUIET = "false"
local VERSION = "v1.1 (19/05/2014)"


function pversion()
  print("osmimage " .. VERSION)
  print("(C) Josef Kleber   License: LPPL")
  os.exit(0)
end

function phelp()
  print([[
osmimage [options]

 downloads an OpenStreetMap map specified by [options]
 by using http://developer.mapquest.com/ web service

 Options:

 -k  key registered at http://developer.mapquest.com/
     default (Example key from web site)!
     Please register and use your own key!

 -l  specify a location
     e.g. 'Bergheimer Stra?e 110A, 69115 Heidelberg, Germany'

 -x  specify a xsize (800)

 -y  specify a ysize (400)

 -S  short form to specify a size, e.g. 800,400

 -s  specify a scale factor in the range 1692-221871572 (3385 = -z 17)
     see: http://open.mapquestapi.com/staticmap/zoomToScale.html

 -z  specify a zoom in the range 1-18 (zoom overrides scale!)

 -t  specify map type {map|sat|hyb} (map)

 -i  specify image type {jpeg|jpg|gif|png} (png)

 -c  specify icon color (yellow_1)
     see: http://open.mapquestapi.com/staticmap/icons.html

 -n  specify the icon number (1)

 -o  specify output basename without file extension (osmimage.IMAGETYPE)

 -q  quiet; no output!

 -v  prints version information

 -h  prints help information

]])
  pversion()
end

function osmimage_error(exitcode, errortext)
  io.stderr:write ("Error (" .. exitcode .. "): " .. errortext .. "\n")
  os.exit(exitcode)
end

function osmimage_warning(warningtext)
  io.stderr:write("WARNING: " .. warningtext .. "\n")
end


function check_number(var, varname)
  local number='^[0-9]+$'
  if not(string.match(var, '^[0-9]+$')) then
    osmimage_error(2, varname .. " can't be " .. var .. "! Not a number!")
  end
end

function check_range(var,min,max,exitcode,varname)
  check_number(var,varname)
  if (var < min or var > max) then
    osmimage_error(exitcode, varname .. " = " .. var .. "; must be in the range of " .. min .. "-" .. max)
  end
end

-- http://lua-users.org/wiki/StringRecipes
function url_encode(str)
  if (str) then
    str = string.gsub (str, "\n", "\r\n")
    str = string.gsub (str, "([^%w %-%_%.%~])",
        function (c) return string.format ("%%%02X", string.byte(c)) end)
    str = string.gsub (str, " ", "+")
  end
  return str
end

do
  local newarg = {}
  local i, limit = 1, #arg
  while (i <= limit) do
    if arg[i] == "-k" then
      KEY = arg[i+1]
      i = i + 1
    elseif arg[i] == "-l" then
      LOCATION = arg[i+1]
      i = i + 1
    elseif arg[i] == "-x" then
      XSIZE = arg[i+1]
      i = i + 1
    elseif arg[i] == "-y" then
      YSIZE = arg[i+1]
      i = i + 1
    elseif arg[i] == "-S" then
      SIZE = arg[i+1]
      i = i + 1
    elseif arg[i] == "-s" then
      SCALE = arg[i+1]
      i = i + 1
    elseif arg[i] == "-z" then
      ZOOM = arg[i+1]
      i = i + 1
    elseif arg[i] == "-t" then
      TYPE = arg[i+1]
      i = i + 1
    elseif arg[i] == "-i" then
      IMAGETYPE = arg[i+1]
      i = i + 1
    elseif arg[i] == "-c" then
      COLOR = arg[i+1]
      i = i + 1
    elseif arg[i] == "-n" then
      NUMBER = arg[i+1]
      i = i + 1
    elseif arg[i] == "-o" then
      OFILE = arg[i+1]
      i = i + 1
    elseif arg[i] == "-q" then
      QUIET = 1
    elseif arg[i] == "-v" then
      pversion()
    elseif arg[i] == "-h" then
      phelp()
    else
      newarg[#newarg+1] = arg[i]
    end
    i = i + 1
  end
  arg = newarg
end


if QUIET == 1 then
  osmimage_warning("-q option currently not supported!")
end

if KEY == "" then
  -- KEY="Kmjtd%7Cluu7n162n1%2C22%3Do5-h61wh"
  KEY="Kmjtd|luu7n162n1,22=o5-h61wh"
  osmimage_warning("KEY not specified; using mapquest example key as default!")
end

if LOCATION == "" then
  LOCATION = "Bergheimer Stra?e 110A, 69115 Heidelberg, Germany"
  osmimage_warning("LOCATION not specified; using Dante e.V. Office as default!")
end

if XSIZE == "" then
  XSIZE=800
  osmimage_warning("XSIZE not specified; using XSIZE=800 as default!")
end

check_range(XSIZE,1,3840,11,"XSIZE")

if YSIZE == "" then
  YSIZE=400
  osmimage_warning("YSIZE not specified; using YSIZE=400 as default!")
end
check_range(YSIZE,1,3840,12,"YSIZE")

if SIZE == "" then
  SIZE = XSIZE .. "," .. YSIZE
end

if SCALE == "" then
  if ZOOM == "" then
    SCALE=3385
    osmimage_warning("SCALE not specified, using SCALE=3385 as default!")
  end
else
  check_range(SCALE,1692,221871572,13,"SCALE")
end

if TYPE == "" then
  TYPE = "map"
  osmimage_warning("TYPE not specified; using map as default!")
end

if IMAGETYPE == "" then
  IMAGETYPE="png"
  osmimage_warning("IMAGETYPE not specified; using png as default!")
end

if COLOR == "" then
  COLOR="yellow_1"
  osmimage_warning("COLOR not specified; using yellow_1 as default!")
end

if NUMBER == "" then
  NUMBER=1
  osmimage_warning("NUMBER not specified; using 1 as default!")
end
check_number(NUMBER,"NUMBER")

local UKEY = "?key=" .. url_encode(KEY)
local ULOCATION = "&location=" .. url_encode(LOCATION)
local USIZE = "&size=" .. url_encode(SIZE)
local USCALEZOOM
if ZOOM == "" then
  USCALEZOOM = "&scale=" .. url_encode(SCALE)
else
  check_range(ZOOM,1,18,14,"ZOOM")
  USCALEZOOM = "&zoom=" .. url_encode(ZOOM)
end
local UTYPE = "&type=" .. url_encode(TYPE)
local UIMAGETYPE = "&imagetype=" .. url_encode(IMAGETYPE)
local USHOWICON = "&showicon=" .. url_encode(COLOR) .. "-" .. url_encode(NUMBER)
local UOFILE = OFILE .. "." .. IMAGETYPE

local IMGURL = URL .. UKEY .. ULOCATION .. USIZE .. USCALEZOOM .. UTYPE .. UIMAGETYPE .. USHOWICON

local http = require("socket.http");
local ltn12 = require("ltn12")
local ret, msg
local ofile
ofile, msg = io.open(UOFILE, "wb")
if not ofile then
  osmimage_error(21, msg)
end
print("url = " .. IMGURL)
print("output = " .. UOFILE)
ret, msg = http.request{
  url = IMGURL,
  sink = ltn12.sink.file(ofile)
}
if not ret then
  osmimage_error(22, msg)
end

From josef.kleber at gmx.de  Wed May 21 12:55:14 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Wed, 21 May 2014 12:55:14 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <20140521091119.GF30691@auth.logic.tuwien.ac.at>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at> <537B261F.1080409@gmx.de>
 <537B3C25.8050608@gmx.de> <20140520132715.GZ30691@auth.logic.tuwien.ac.at>
 <537B76B6.2090805@gmx.de> <21372.3567.841127.362897@zaphod.ms25.net>
 <20140521023452.GE30691@auth.logic.tuwien.ac.at>
 <537C3860.4030909@googlemail.com>
 <20140521091119.GF30691@auth.logic.tuwien.ac.at>
Message-ID: <537C8612.1070007@gmx.de>

Am 21.05.2014 11:11, schrieb Norbert Preining:
>> I have added a function url_encode, found in
>>    http://lua-users.org/wiki/StringRecipes
>> and wrapped the user data in url_encode.
>> Then http.request worked for me, see attached script.
>
> Thanks Heiko.
>
> I have replaced the getopt function with my own argument
> parsing routine (actually the one I wrote in 2008 for
> TeX Live when I thought I rewrite the whole perl scripts in
> texlua ;-)))))
>
> Attached osmimage3.lua
>
> Josef, you might try that out and see if you like it.

I dont't have the time right now, but i will test and report this 
evening. I can test with TeXLive/Win32 and TeXLive/Cygwin to check both 
sides! ;-)

Josef



From josef.kleber at gmx.de  Wed May 21 13:00:32 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Wed, 21 May 2014 13:00:32 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537C3860.4030909@googlemail.com>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at> <537B261F.1080409@gmx.de>
 <537B3C25.8050608@gmx.de> <20140520132715.GZ30691@auth.logic.tuwien.ac.at>
 <537B76B6.2090805@gmx.de> <21372.3567.841127.362897@zaphod.ms25.net>
 <20140521023452.GE30691@auth.logic.tuwien.ac.at>
 <537C3860.4030909@googlemail.com>
Message-ID: <537C8750.1010804@gmx.de>

Am 21.05.2014 07:23, schrieb Heiko Oberdiek:
> Hello,
>
> On 21.05.2014 04:34, Norbert Preining wrote:
>>
>> I have taken Reinhard's advice and included them into the script,
>> here is an updated version.
>>
>> I cannot guarantee that it works on Windows, I have no easy access,
>> but on Unix it works ;-)
>
>>From osmimage.lua:
>
>> -- local file = ltn12.sink.file(io.open(UOFILE, 'wb'))
>> -- http.request {
>>      -- url = IMGURL,
>>      -- sink = file,
>> -- }
>> -- gives <html><body><b>Http/1.1 Bad Request</b></body> </html> instead of image
>> -- URL encoding for LOCATION??? but works for wget
>
> I have added a function url_encode, found in
>    http://lua-users.org/wiki/StringRecipes
> and wrapped the user data in url_encode.
> Then http.request worked for me, see attached script.
>
> This solves the problem of the dependency on wget
> (see Windows/MiKTeX).

Cool! Yesterday, I tested with an url.encode() from 'local url = 
require("socket.url")', but this didn't work. Strange.

Josef




From heiko.oberdiek at googlemail.com  Wed May 21 14:24:33 2014
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Wed, 21 May 2014 14:24:33 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537C8750.1010804@gmx.de>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at> <537B261F.1080409@gmx.de>
 <537B3C25.8050608@gmx.de> <20140520132715.GZ30691@auth.logic.tuwien.ac.at>
 <537B76B6.2090805@gmx.de> <21372.3567.841127.362897@zaphod.ms25.net>
 <20140521023452.GE30691@auth.logic.tuwien.ac.at>
 <537C3860.4030909@googlemail.com> <537C8750.1010804@gmx.de>
Message-ID: <537C9B01.3050702@googlemail.com>

On 21.05.2014 13:00, Josef Kleber wrote:
> Am 21.05.2014 07:23, schrieb Heiko Oberdiek:

>> I have added a function url_encode, found in
>>    http://lua-users.org/wiki/StringRecipes
>> and wrapped the user data in url_encode.
>> Then http.request worked for me, see attached script.
>>
>> This solves the problem of the dependency on wget
>> (see Windows/MiKTeX).
> 
> Cool! Yesterday, I tested with an url.encode() from 'local url =
> require("socket.url")', but this didn't work. Strange.

The name of the function is `url.escape'.
Thus I have changed osmimage3.lua to osmimage4.lua
and replaced url_encode with url.escape.

Yours sincerely
  Heiko Oberdiek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: osmimage4.lua
Type: text/x-lua
Size: 6024 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20140521/0f606948/attachment.bin>

From preining at logic.at  Wed May 21 14:36:10 2014
From: preining at logic.at (Norbert Preining)
Date: Wed, 21 May 2014 21:36:10 +0900
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537C9B01.3050702@googlemail.com>
References: <20140519235158.GJ30691@auth.logic.tuwien.ac.at>
 <537B261F.1080409@gmx.de> <537B3C25.8050608@gmx.de>
 <20140520132715.GZ30691@auth.logic.tuwien.ac.at> <537B76B6.2090805@gmx.de>
 <21372.3567.841127.362897@zaphod.ms25.net>
 <20140521023452.GE30691@auth.logic.tuwien.ac.at>
 <537C3860.4030909@googlemail.com> <537C8750.1010804@gmx.de>
 <537C9B01.3050702@googlemail.com>
Message-ID: <20140521123610.GK30691@auth.logic.tuwien.ac.at>

On Wed, 21 May 2014, Heiko Oberdiek wrote:
> Thus I have changed osmimage3.lua to osmimage4.lua

Cool team-work ;-)

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------


From josef.kleber at gmx.de  Wed May 21 14:41:46 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Wed, 21 May 2014 14:41:46 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537C9B01.3050702@googlemail.com>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at> <537B261F.1080409@gmx.de>
 <537B3C25.8050608@gmx.de> <20140520132715.GZ30691@auth.logic.tuwien.ac.at>
 <537B76B6.2090805@gmx.de> <21372.3567.841127.362897@zaphod.ms25.net>
 <20140521023452.GE30691@auth.logic.tuwien.ac.at>
 <537C3860.4030909@googlemail.com> <537C8750.1010804@gmx.de>
 <537C9B01.3050702@googlemail.com>
Message-ID: <537C9F0A.1060009@gmx.de>

Am 21.05.2014 14:24, schrieb Heiko Oberdiek:
> On 21.05.2014 13:00, Josef Kleber wrote:
>> Am 21.05.2014 07:23, schrieb Heiko Oberdiek:
>
>>> I have added a function url_encode, found in
>>>     http://lua-users.org/wiki/StringRecipes
>>> and wrapped the user data in url_encode.
>>> Then http.request worked for me, see attached script.
>>>
>>> This solves the problem of the dependency on wget
>>> (see Windows/MiKTeX).
>>
>> Cool! Yesterday, I tested with an url.encode() from 'local url =
>> require("socket.url")', but this didn't work. Strange.
>
> The name of the function is `url.escape'.
> Thus I have changed osmimage3.lua to osmimage4.lua
> and replaced url_encode with url.escape.

Oops! Sorry, I already deleted the code and had 'encode' still in mind. 
I used the function on IMGURL. That might have caused other problems.

Josef




From rdt at cs.queensu.ca  Wed May 21 15:21:33 2014
From: rdt at cs.queensu.ca (Bob Tennent)
Date: Wed, 21 May 2014 09:21:33 -0400
Subject: [tex-live] pdfopen/pdfclose
Message-ID: <537ca85d.hkXTiCVN+bW+WQTk%rdt@cs.queensu.ca>

It seems the applications with these names on MiKTeX differ from the
applications in TeXLive on Linux.  What does TeXLive on Windows offer?

Bob T.


From heiko.oberdiek at googlemail.com  Wed May 21 16:47:46 2014
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Wed, 21 May 2014 16:47:46 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537C9F0A.1060009@gmx.de>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at> <537B261F.1080409@gmx.de>
 <537B3C25.8050608@gmx.de> <20140520132715.GZ30691@auth.logic.tuwien.ac.at>
 <537B76B6.2090805@gmx.de> <21372.3567.841127.362897@zaphod.ms25.net>
 <20140521023452.GE30691@auth.logic.tuwien.ac.at>
 <537C3860.4030909@googlemail.com> <537C8750.1010804@gmx.de>
 <537C9B01.3050702@googlemail.com> <537C9F0A.1060009@gmx.de>
Message-ID: <537CBC92.1040604@googlemail.com>

On 21.05.2014 14:41, Josef Kleber wrote:

> Oops! Sorry, I already deleted the code and had 'encode' still in mind.
> I used the function on IMGURL. That might have caused other problems.

Only parts of the URL are encoded. Syntax characters (e.g."?", "&",
"=" in the query part or ":", "/" before) are not encoded if they
are used as syntax character.

Yours sincerely
  Heiko Oberdiek


From josef.kleber at gmx.de  Wed May 21 18:31:18 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Wed, 21 May 2014 18:31:18 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <20140521091119.GF30691@auth.logic.tuwien.ac.at>
References: <537A098C.8000902@gmx.de>
 <20140519235158.GJ30691@auth.logic.tuwien.ac.at> <537B261F.1080409@gmx.de>
 <537B3C25.8050608@gmx.de> <20140520132715.GZ30691@auth.logic.tuwien.ac.at>
 <537B76B6.2090805@gmx.de> <21372.3567.841127.362897@zaphod.ms25.net>
 <20140521023452.GE30691@auth.logic.tuwien.ac.at>
 <537C3860.4030909@googlemail.com>
 <20140521091119.GF30691@auth.logic.tuwien.ac.at>
Message-ID: <537CD4D6.6070002@gmx.de>

Hi

Am 21.05.2014 11:11, schrieb Norbert Preining:
>> I have added a function url_encode, found in
>>    http://lua-users.org/wiki/StringRecipes
>> and wrapped the user data in url_encode.
>> Then http.request worked for me, see attached script.
>
> Thanks Heiko.
>
> I have replaced the getopt function with my own argument
> parsing routine (actually the one I wrote in 2008 for
> TeX Live when I thought I rewrite the whole perl scripts in
> texlua ;-)))))
>
> Attached osmimage3.lua
>
> Josef, you might try that out and see if you like it.

Okay, i can confirm that osmimage4.lua (Heiko) does almost work! ;-)

Two little problems left:

1) I had to change check_range

function check_range(var,min,max,exitcode,varname)
   check_number(var,varname)
   if (tonumber(var) < tonumber(min) or tonumber(var) > tonumber(max)) then
     osmimage_error(exitcode, varname .. " = " .. var .. "; must be in 
the range of " .. min .. "-" .. max)
   end
end

comparing string with number error

2) Calling Windows' texlua brings up an encoding problem ansi -> utf8
    texlua osmimage.lua -l "Bergheimer Stra?e 110A, 69115 Heidelberg, 
Germany"                              ^^^^^^

Fortunately, this problem is also solved with Heiko's answer here to 
encode \write18 calls as utf8:
http://tex.stackexchange.com/questions/178883/write18-encoding

===> Mission accomplished

I want to thank Norbert for converting the bash script to lua and of 
course all the others for their valuable input!

As well as turning this longish thread into my personal lua tutorial! ;-)

Josef




From heiko.oberdiek at googlemail.com  Thu May 22 04:24:29 2014
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Thu, 22 May 2014 04:24:29 +0200
Subject: [tex-live] Progress and regress of ghostscript
Message-ID: <537D5FDD.2070001@googlemail.com>

Hello,

----------------
there is an unhappy regress in ghostscript since 9.09 (9.07 is fine),
I have now made a bug report:

  Bug 695252 - /DOCVIEW pdfmark ruins /OpenAction
  http://bugs.ghostscript.com/show_bug.cgi?id=695252

It affects `pdfstartpage'/`pdfstartview' of `hyperref', when
used via dvips/ps2pdf.
----------------

++++++++++++++++
While writing the bug report I detected an happy progress
in the current master sources (> 9.14):

  Bug 695151 - Add BMC/EMC and BDC pdfmark support
  http://bugs.ghostscript.com/show_bug.cgi?id=695151

That means, package `accsupp' will now work via
dvips/ps2pdf with this ghostscript.
++++++++++++++++

Yours sincerely
  Heiko Oberdiek


From heiko.oberdiek at googlemail.com  Thu May 22 04:36:28 2014
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Thu, 22 May 2014 04:36:28 +0200
Subject: [tex-live] Links fails in latex->dvips after update of
	tlgs.win32
In-Reply-To: <21324.24550.958480.464169@zaphod.ms25.net>
References: <q9eyaxf8m00e.dlg@nililand.de>
 <1A42FD4AAC454D769F0D70A2D41314A5@CJ3001517A>	<848urc83aa.fsf@siart.de>
 <21324.24550.958480.464169@zaphod.ms25.net>
Message-ID: <537D62AC.2060707@googlemail.com>

On 15.04.2014 00:23, Reinhard Kotucha wrote:
> On 2014-04-11 at 14:21:49 +0200, Uwe Siart wrote:
> 
>  > Akira Kakuto <kakuto at fuk.kindai.ac.jp> writes:
>  > 
>  > > Confirmed.  pdfwrite in gs-9.14 may be problematic.
>  > > gs-9.10 is ok for this Link problem.
>  > 
>  > I can also confirm. Do you think it's worth downgrading tlnet to gs
>  > 9.10 until this problem is solved in gs? PDF hyperlinks are IMO a
>  > very vital feature.
> 
> Hi Uwe,
> I've met Heiko in Heidelberg last weekend and he told me that he found
> some other bugs too.  They seem to be related to pdfmark, so I expect
> that even more things don't work.  I'll revert to 9.10 soon.
> 
> Heiko intends to file a bug report but I fear that we have to stick
> with 9.10 for TL-2014.

It's done now, sorry for the delay:

    Bug 695252 - /DOCVIEW pdfmark ruins /OpenAction
    http://bugs.ghostscript.com/show_bug.cgi?id=695162

The bug, reported by Ulrike Fischer:

    Bug 695162 - Internal hyperlinks lost when converting to pdf
    http://bugs.ghostscript.com/show_bug.cgi?id=695162

seems to be fixed in the master sources (2014-04-23)
(I have not tested/verified it.)

Yours sincerely
  Heiko Oberdiek


From sobenlee at gmail.com  Thu May 22 13:36:09 2014
From: sobenlee at gmail.com (Qing Lee)
Date: Thu, 22 May 2014 19:36:09 +0800
Subject: [tex-live] texlive-en.pdf disappeared from TL2014
Message-ID: <537DE129.5070908@gmail.com>

Hello,

After today's update, try `texdoc texlive`, only the `index.html` appears,
the link to English documentation is broken though.

And `texdoc texlive-en` shows the file `tlbuild.pdf`.

It seems that the directory `texlive-en` is completely lost:

     >tlmgr info texlive-en --list
     package:     texlive-en
     category:    TLCore
     shortdesc:   TeX Live manual (English)
     installed:   Yes
     revision:    34163
     sizes:       doc: 1073k
     relocatable: No
     collection:  collection-basic
     Included files, by type:
     doc files:
       texmf-dist/doc/info/tlbuild.info
       texmf-dist/doc/texlive/tlbuild/tlbuild.html
       texmf-dist/doc/texlive/tlbuild/tlbuild.pdf

Best,
-- 
Qing Lee


From josef.kleber at gmx.de  Thu May 22 17:35:53 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Thu, 22 May 2014 17:35:53 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537A098C.8000902@gmx.de>
References: <537A098C.8000902@gmx.de>
Message-ID: <537E1959.1000702@gmx.de>

Am 19.05.2014 15:39, schrieb Josef Kleber:
> Hi,
>
> i wrote a bash script osmimage
> (http://jklatex.square7.de/download/osmimage), which downloads an
> OpenStreetMap specified by options.
>
> Furthermore, i plan to write a LaTeX package, which uses this script via
> \write18 (see:
> http://tex.stackexchange.com/questions/178883/write18-encoding).
>

Okay, the beta version of the package is finished:

https://bitbucket.org/kleberj/getmap/downloads/getmap.tds.zip

It works foe me with TeXLive/Win32. If somebody is willing to beta test 
with Linux, you're very welcome! ;-)

unzip in a local TeX tree -> texhash -> create a link for osmimage.lua

I do not know how the last step works exactly on Linux, but on Windows 
renaming runscript.exe to osmimage.exe and put it somewhere in the PATH 
worked without problems.

Example:

\documentclass{article}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage[inputencoding=latin1,overwrite]{getmap}
\begin{document}
\section{Example}
Do you want to vist the Oktoberfest? Here we go:

\getmap[file=oktoberfest,
         xsize=800,
	ysize=1000,
	scale=5000,
         %zoom=12,
	type=map,
         color=pink_1,
         number=3,
	imagetype=png]
        {Matthias-Pschorr-Stra?e, M?nchen, Deutschland}%
\begin{center}
\includegraphics[width=10cm]{oktoberfest}
\end{center}
\end{document}

Josef







From dluecking at sbcglobal.net  Thu May 22 18:19:03 2014
From: dluecking at sbcglobal.net (Dan Luecking)
Date: Thu, 22 May 2014 11:19:03 -0500
Subject: [tex-live] pdfopen/pdfclose
Message-ID: <550871.87297.bm@smtp111.sbc.mail.gq1.yahoo.com>

On Wed, 21-5-2014, at 15:21:33 CEST, Bob Tennent (rdt at cs.queensu.ca) wrote:


>It seems the applications with these names on MiKTeX differ from the
>applications in TeXLive on Linux.  What does TeXLive on Windows offer?

It offers the same set of programs in the pdftools package
as in other architectures (plus one more: pdfdde). The man
pages are the same for all architectures, though they seem
to be incorrect, at least for the windows programs:
   pdfopen/close file.pdf
doesn't work, requiring
   pdfopen/close --file file.pdf
The correct syntax is displayed by
   pdfopen --help
Brief testing shows them working as expected/documented:
pdfopen opens a pdf file and pdfclose closes it, provided
it was opened with pdfopen (Win 7, Reader version 11.0.07).

Both seem to be wrappers for pdfdde.exe


Dan


Daniel H. Luecking
Department of Mathematical Sciences
Fayetteville, Arkansas
http://www-cs-faculty.stanford.edu/~knuth/iaq.html 



From rdt at cs.queensu.ca  Thu May 22 21:12:44 2014
From: rdt at cs.queensu.ca (Bob Tennent)
Date: Thu, 22 May 2014 15:12:44 -0400
Subject: [tex-live] pdfopen/pdfclose
Message-ID: <537e4c2c.Q6JaGe773rgOxwui%rdt@cs.queensu.ca>


> for the windows programs:
   pdfopen/close file.pdf
doesn't work, requiring
   pdfopen/close --file file.pdf

The maintainer has agreed to revise the non-Windows program to
support the --file syntax. I don't know who maintains the Windows
version.

Bob T.


From kakuto at fuk.kindai.ac.jp  Thu May 22 23:16:30 2014
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Fri, 23 May 2014 06:16:30 +0900
Subject: [tex-live] pdfopen/pdfclose
In-Reply-To: <537e4c2c.Q6JaGe773rgOxwui%rdt@cs.queensu.ca>
References: <537e4c2c.Q6JaGe773rgOxwui%rdt@cs.queensu.ca>
Message-ID: <68FEE339F45F47E3B935A9DE0D744002@CJ3001517A>

>> for the windows programs:
>   pdfopen/close file.pdf
> doesn't work, requiring
>   pdfopen/close --file file.pdf

I think Fabrice Popineau is the originator, who first wrote
pdfopen/pdfclose for windows. Later the programs were ported
to other platforms.
The syntax was taken by the originator.

Best,
Akira



From rdt at cs.queensu.ca  Fri May 23 00:03:24 2014
From: rdt at cs.queensu.ca (Bob Tennent)
Date: Thu, 22 May 2014 18:03:24 -0400
Subject: [tex-live] pdfopen/pdfclose
In-Reply-To: <68FEE339F45F47E3B935A9DE0D744002@CJ3001517A>
References: <537e4c2c.Q6JaGe773rgOxwui%rdt@cs.queensu.ca>
 <68FEE339F45F47E3B935A9DE0D744002@CJ3001517A>
Message-ID: <537e742c.o36+Phmg96jqhmNz%rdt@cs.queensu.ca>

 >|I think Fabrice Popineau is the originator, who first wrote
 >|pdfopen/pdfclose for windows. Later the programs were ported
 >|to other platforms.
 >|The syntax was taken by the originator.
 >|

Couldn't the Windows version be extended to accept 

pdfopen/pdfclose file.pdf 

as well?

Bob


From karl at freefriends.org  Fri May 23 00:26:20 2014
From: karl at freefriends.org (Karl Berry)
Date: Thu, 22 May 2014 16:26:20 -0600
Subject: [tex-live] pdfopen/pdfclose
In-Reply-To: <537e742c.o36+Phmg96jqhmNz%rdt@cs.queensu.ca> (message from Bob
 Tennent on Thu, 22 May 2014 18:03:24 -0400)
Message-ID: <86k39dwiur.fsf@frenzy.freefriends.org>

    Couldn't the Windows version be extended to accept 
    pdfopen/pdfclose file.pdf 

I have no opinion in general on Windows stuff, but please don't change
the sources/rebuild anything now.

k


From karl at freefriends.org  Fri May 23 00:38:15 2014
From: karl at freefriends.org (Karl Berry)
Date: Thu, 22 May 2014 22:38:15 +0000
Subject: [tex-live] texlive-en.pdf disappeared from TL2014
In-Reply-To: <537DE129.5070908@gmail.com>
Message-ID: <201405222238.s4MMcFjw001481@freefriends.org>

    It seems that the directory `texlive-en` is completely lost:

Should be fixed for the next build, thanks.


From karl at freefriends.org  Fri May 23 01:04:18 2014
From: karl at freefriends.org (Karl Berry)
Date: Thu, 22 May 2014 23:04:18 +0000
Subject: [tex-live] final build tomorrow?
Message-ID: <201405222304.s4MN4I8b003800@freefriends.org>

FYI, I have the probably-vain hope that we'll build tonight and tomorrow
night, and that will be it.  At least, I plan to stop routinely
importing all CTAN updates into TL after tomorrow.

k


From preining at logic.at  Fri May 23 01:48:30 2014
From: preining at logic.at (Norbert Preining)
Date: Fri, 23 May 2014 08:48:30 +0900
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <537E1959.1000702@gmx.de>
References: <537A098C.8000902@gmx.de> <537E1959.1000702@gmx.de>
Message-ID: <20140522234830.GQ30691@auth.logic.tuwien.ac.at>

On Thu, 22 May 2014, Josef Kleber wrote:
> Okay, the beta version of the package is finished:

Thanks.

> It works foe me with TeXLive/Win32. If somebody is willing to beta
> test with Linux, you're very welcome! ;-)

Worked.

> unzip in a local TeX tree -> texhash -> create a link for osmimage.lua
> 
> I do not know how the last step works exactly on Linux, but on

I installed it into texmf-dist of my tl2014 installation:

cd `kpsewhich -var-value TEXMFROOT`/texmf-dist
unzip ....../getmap.tds.zip
chmod 0755 scripts/getmap/osmimage.lua
ln -s ../../texmf-dist/scripts/getmap/osmimage.lua ../bin/`tlmgr -print-arch`/osmimage
mktexlsr

> Example:

Worked. 

> \usepackage[latin1]{inputenc}
...
> \usepackage[inputencoding=latin1,overwrite]{getmap}

Would be nice if one could reuse the "latin1" option coming from
inputenc in some way ... I had this in utf8, and only changed the
*inputenc* option without the getmap option, and that broke
(of course ;-)

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------


From heiko.oberdiek at googlemail.com  Fri May 23 02:12:09 2014
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Fri, 23 May 2014 02:12:09 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <20140522234830.GQ30691@auth.logic.tuwien.ac.at>
References: <537A098C.8000902@gmx.de> <537E1959.1000702@gmx.de>
 <20140522234830.GQ30691@auth.logic.tuwien.ac.at>
Message-ID: <537E9259.1060106@googlemail.com>

On 23.05.2014 01:48, Norbert Preining wrote:
> On Thu, 22 May 2014, Josef Kleber wrote:
>> \usepackage[latin1]{inputenc}
> ...
>> \usepackage[inputencoding=latin1,overwrite]{getmap}
> 
> Would be nice if one could reuse the "latin1" option coming from
> inputenc in some way ... I had this in utf8, and only changed the
> *inputenc* option without the getmap option, and that broke
> (of course ;-)

Package `inputenc` defines `\inputencodingname` since 2006/02/22.

Yours sincerely
  Heiko Oberdiek


From P.Taylor at Rhul.Ac.Uk  Fri May 23 06:39:33 2014
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Fri, 23 May 2014 05:39:33 +0100
Subject: [tex-live] pdfopen/pdfclose
In-Reply-To: <537e742c.o36+Phmg96jqhmNz%rdt@cs.queensu.ca>
References: <537e4c2c.Q6JaGe773rgOxwui%rdt@cs.queensu.ca>
 <68FEE339F45F47E3B935A9DE0D744002@CJ3001517A>
 <537e742c.o36+Phmg96jqhmNz%rdt@cs.queensu.ca>
Message-ID: <537ED105.40006@Rhul.Ac.Uk>



Bob Tennent wrote:

> Couldn't the Windows version be extended to accept
>
> pdfopen/pdfclose file.pdf
>
> as well?

That would indeed seem to be the preferable option, IMHO.,
<imperative> <noun> is surely the natural syntax, and requiring
"--file" appears to add nothing other than completely unnecessary
verbosity.

Philip Taylor


From kakuto at fuk.kindai.ac.jp  Fri May 23 07:17:12 2014
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Fri, 23 May 2014 14:17:12 +0900
Subject: [tex-live] pdfopen/pdfclose
In-Reply-To: <537ED105.40006@Rhul.Ac.Uk>
References: <537e4c2c.Q6JaGe773rgOxwui%rdt@cs.queensu.ca>
 <68FEE339F45F47E3B935A9DE0D744002@CJ3001517A>
 <537e742c.o36+Phmg96jqhmNz%rdt@cs.queensu.ca> <537ED105.40006@Rhul.Ac.Uk>
Message-ID: <8B52427B9BEA4BACA59918F455B74C15@CJ3001517A>

Dear Philip,

> That would indeed seem to be the preferable option, IMHO.,
> <imperative> <noun> is surely the natural syntax, and requiring
> "--file" appears to add nothing other than completely unnecessary verbosity.

Here pdfopen file.pdf, or pdfopen [options] file.pdf, pdfclose file.pdf
also work, in addition to the original syntax.
But it is too late for TeX Live 2014, very sorry.

Thanks,
Akira



From P.Taylor at Rhul.Ac.Uk  Fri May 23 07:53:21 2014
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Fri, 23 May 2014 06:53:21 +0100
Subject: [tex-live] pdfopen/pdfclose
In-Reply-To: <8B52427B9BEA4BACA59918F455B74C15@CJ3001517A>
References: <537e4c2c.Q6JaGe773rgOxwui%rdt@cs.queensu.ca>
 <68FEE339F45F47E3B935A9DE0D744002@CJ3001517A>
 <537e742c.o36+Phmg96jqhmNz%rdt@cs.queensu.ca> <537ED105.40006@Rhul.Ac.Uk>
 <8B52427B9BEA4BACA59918F455B74C15@CJ3001517A>
Message-ID: <537EE251.9020005@Rhul.Ac.Uk>

Many thanks for making the suggested enhancements, Akira-san.
Fully understood that they may not make it into TeX Live 2014,
but I wonder whether they could be distributed via TL-Contrib [1];
what do you think ?

** Phil.
--------
Akira Kakuto wrote:

> Here pdfopen file.pdf, or pdfopen [options] file.pdf, pdfclose file.pdf
> also work, in addition to the original syntax.
> But it is too late for TeX Live 2014, very sorry.


[1]

Welcome on TLContrib, a website that hosts contributed packages for TeX 
Live.

The packages on this site are not distributed inside TeX Live proper for 
one or another of the following reasons:

     because it is not free software according to the FSF guidelines;
     because it is an executable update;
     because it is not available on CTAN;
     because it is an intermediate release for testing.

In short, anything related to TeX that can not be on TeX Live but can 
still legally be distributed over the Internet can have a place on 
TLContrib.


From kakuto at fuk.kindai.ac.jp  Fri May 23 08:44:00 2014
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Fri, 23 May 2014 15:44:00 +0900
Subject: [tex-live] pdfopen/pdfclose
In-Reply-To: <537EE251.9020005@Rhul.Ac.Uk>
References: <537e4c2c.Q6JaGe773rgOxwui%rdt@cs.queensu.ca>
 <68FEE339F45F47E3B935A9DE0D744002@CJ3001517A>
 <537e742c.o36+Phmg96jqhmNz%rdt@cs.queensu.ca> <537ED105.40006@Rhul.Ac.Uk>
 <8B52427B9BEA4BACA59918F455B74C15@CJ3001517A> <537EE251.9020005@Rhul.Ac.Uk>
Message-ID: <BD89B50D7C6B490F84D4C98F41CE22F2@CJ3001517A>

Dear Philip,

> Many thanks for making the suggested enhancements, Akira-san.
> Fully understood that they may not make it into TeX Live 2014,
> but I wonder whether they could be distributed via TL-Contrib [1];
> what do you think ?

They will be in
CTAN/systems/win32/w32tex/pdftex-w32.tar.xz
in due time.

Copy only 3 files "pdfdde.exe", "pdfopen.exe", and "pdfclose.exe"
in the "bin" directory in pdftex-w32.tar.xz
into the "bin/win32" directory in TeX Live.

Best,
Akira

.


From josef.kleber at gmx.de  Fri May 23 11:28:39 2014
From: josef.kleber at gmx.de (Josef Kleber)
Date: Fri, 23 May 2014 11:28:39 +0200
Subject: [tex-live] TeXLive (Windows) bash script -> exe
In-Reply-To: <20140522234830.GQ30691@auth.logic.tuwien.ac.at>
References: <537A098C.8000902@gmx.de> <537E1959.1000702@gmx.de>
 <20140522234830.GQ30691@auth.logic.tuwien.ac.at>
Message-ID: <537F14C7.3020906@gmx.de>

Hi

Am 23.05.2014 01:48, schrieb Norbert Preining:
> On Thu, 22 May 2014, Josef Kleber wrote:
>> Okay, the beta version of the package is finished:
>
> Thanks.
>
>> It works foe me with TeXLive/Win32. If somebody is willing to beta
>> test with Linux, you're very welcome! ;-)
>
> Worked.

Thanks for testing. So i can start documentation.

>> unzip in a local TeX tree -> texhash -> create a link for osmimage.lua
>>
>> I do not know how the last step works exactly on Linux, but on
>
> I installed it into texmf-dist of my tl2014 installation:
>
> cd `kpsewhich -var-value TEXMFROOT`/texmf-dist
> unzip ....../getmap.tds.zip
> chmod 0755 scripts/getmap/osmimage.lua
> ln -s ../../texmf-dist/scripts/getmap/osmimage.lua ../bin/`tlmgr -print-arch`/osmimage
> mktexlsr

Oh, manual installation howto! ;-)

>> Example:
>
> Worked.
>
>> \usepackage[latin1]{inputenc}
> ...
>> \usepackage[inputencoding=latin1,overwrite]{getmap}
>
> Would be nice if one could reuse the "latin1" option coming from
> inputenc in some way ... I had this in utf8, and only changed the
> *inputenc* option without the getmap option, and that broke
> (of course ;-)

At the moment, inputencoding defaults to utf8, but i can add a check if 
inputenc is loaded und use \inputencodingname (@Heiko Thanks!) or utf8 
otherwise.

Josef




From rdt at cs.queensu.ca  Fri May 23 11:58:05 2014
From: rdt at cs.queensu.ca (Bob Tennent)
Date: Fri, 23 May 2014 05:58:05 -0400
Subject: [tex-live] pdfopen/pdfclose
In-Reply-To: <8B52427B9BEA4BACA59918F455B74C15@CJ3001517A>
References: <537e4c2c.Q6JaGe773rgOxwui%rdt@cs.queensu.ca>
 <68FEE339F45F47E3B935A9DE0D744002@CJ3001517A>
 <537e742c.o36+Phmg96jqhmNz%rdt@cs.queensu.ca> <537ED105.40006@Rhul.Ac.Uk>
 <8B52427B9BEA4BACA59918F455B74C15@CJ3001517A>
Message-ID: <537f1bad.DXDP9f33ypFpm7Iu%rdt@cs.queensu.ca>

 >|Here pdfopen file.pdf, or pdfopen [options] file.pdf, pdfclose file.pdf
 >|also work, in addition to the original syntax.
 >|But it is too late for TeX Live 2014, very sorry.

Thanks.  But maybe MiKTeX will adopt it :+)

Bob T.


From mojca.miklavec.lists at gmail.com  Fri May 23 12:10:10 2014
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 23 May 2014 12:10:10 +0200
Subject: [tex-live] [TLContrib]  pdfopen/pdfclose
In-Reply-To: <AA0ADC274C6A46469FAF6C6202D48F5B@CJ3001517A>
References: <537e4c2c.Q6JaGe773rgOxwui%rdt@cs.queensu.ca>
 <68FEE339F45F47E3B935A9DE0D744002@CJ3001517A>
 <537e742c.o36+Phmg96jqhmNz%rdt@cs.queensu.ca>	<537ED105.40006@Rhul.Ac.Uk>
 <8B52427B9BEA4BACA59918F455B74C15@CJ3001517A>	<537EE251.9020005@Rhul.Ac.Uk>
 <CALBOmsYEPUfwcE_DG7+-Zunu8TUnvozzPfW2xV_WpWj-gZ3h_Q@mail.gmail.com>
 <AA0ADC274C6A46469FAF6C6202D48F5B@CJ3001517A>
Message-ID: <CALBOmsbsj8bKhSW+fJj3pqNFuhLjed+Kvdv39K9kUU5PbgrLJQ@mail.gmail.com>

On Fri, May 23, 2014 at 9:00 AM, Akira Kakuto wrote:
>
> Installation of TeX Live Windows native 64bit binaries
> is very easy now.
> There are two files
> 00README.TLW64
> tl-win64.zip
> in
> CTAN/systems/win32/w32tex/TLW64/
>
> It is important to read 00README.TLW64.
> tl-win64.zip contains almost all of TeX Live Windows
> applications. Note that they are not fully tested.

Wow, that is great news, I didn't notice that folder until you
mentioned it. Thank you very much.

Mojca


From pablgonz at yahoo.com  Fri May 23 00:53:00 2014
From: pablgonz at yahoo.com (=?iso-8859-1?Q?Pablo_Gonz=E1lez?=)
Date: Thu, 22 May 2014 15:53:00 -0700
Subject: [tex-live] pdftoppm in windows
In-Reply-To: <mailman.7564.1400796223.3620.tex-live@tug.org>
References: <mailman.7564.1400796223.3620.tex-live@tug.org> 
Message-ID: <1400799180.17509.YahooMailNeo@web142702.mail.bf1.yahoo.com>

Any reason?in?particular?to?have removed?"pdftoppm" on?windows?installation?(WinTools).?When update(yesterday), pdftoppm?is no longer available, why?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140522/e08f9af3/attachment.html>

From karl at freefriends.org  Sat May 24 00:57:19 2014
From: karl at freefriends.org (Karl Berry)
Date: Fri, 23 May 2014 22:57:19 +0000
Subject: [tex-live] final build tonight?
Message-ID: <201405232257.s4NMvJ2Z000580@freefriends.org>

I have done today's updates from CTAN and will let tonight's build go
through as usual.  Perhaps that will be what gets burned onto DVD,
depending on subsequent testing.

In any case, please, after 6pm Denmark time (May 24), no more commits of
any kind to svn without emailing me.  (That's when the cron job starts.)

Thanks to all,
Karl



From d.p.carlisle at gmail.com  Sat May 24 15:38:42 2014
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Sat, 24 May 2014 14:38:42 +0100
Subject: [tex-live] Regressions triggered by 'latex' package updates on
	pretest
In-Reply-To: <CAO7dr0hNKApF95oUNFidxxGGWq83rXvkqX1J3xxwdGJsPgexQQ@mail.gmail.com>
References: <CAO7dr0hNKApF95oUNFidxxGGWq83rXvkqX1J3xxwdGJsPgexQQ@mail.gmail.com>
Message-ID: <CAEW6iOgiU8D+HWw_JWPD-5KKOvLPWk5HOg7UTOF21XrK5Ax8pQ@mail.gmail.com>

On 19 May 2014 10:35, Scott Kostyshak <skostysh at lyx.org> wrote:
> Hi,
>
> I've been testing using the TeX Live 2014 pretest
>
> Europe CV

As has been discussed the europecv class never worked on lualatex
the fact that the empty document did not generate an error with TL2013
but does in TL2014 wasn't really a regression but rather an
improvement.
Despite the fact that the test document declared utf8 and used luatex, any
non ascii character would generate an error.

While checking this I suggested a minor addition to europecv.cls to
detect extended Tex and not load ucs and inputenc. The class can then
be used natively with utf8 encoding on luatex and xetex.

The contact address in the class bounces, but I located the original
author and he gave me permission to update the file on ctan with this
addition.
Robin has kindly arranged that europecv.cls is updated on the ctan hosts

 Karl, this has probably missed the cut for TL2014, it's definitely not urgent
as it's an enhancement to the class to work with lualatex, not a bug fix.
But I thought I'd reply here as the problem was originally raised on  this list.

Scott thanks for the testing, tracing what was actually happening here
was an "interesting exercise":-)


David


From skostysh at lyx.org  Sat May 24 17:15:15 2014
From: skostysh at lyx.org (Scott Kostyshak)
Date: Sat, 24 May 2014 11:15:15 -0400
Subject: [tex-live] Regressions triggered by 'latex' package updates on
	pretest
In-Reply-To: <CAEW6iOgiU8D+HWw_JWPD-5KKOvLPWk5HOg7UTOF21XrK5Ax8pQ@mail.gmail.com>
References: <CAO7dr0hNKApF95oUNFidxxGGWq83rXvkqX1J3xxwdGJsPgexQQ@mail.gmail.com>
 <CAEW6iOgiU8D+HWw_JWPD-5KKOvLPWk5HOg7UTOF21XrK5Ax8pQ@mail.gmail.com>
Message-ID: <CAO7dr0iyzthRD7c7uTzn4gMavXU3NFr9p5KS-d1vPmvDxGZ7bQ@mail.gmail.com>

On Sat, May 24, 2014 at 9:38 AM, David Carlisle <d.p.carlisle at gmail.com> wrote:

> The contact address in the class bounces, but I located the original
> author and he gave me permission to update the file on ctan with this
> addition.
> Robin has kindly arranged that europecv.cls is updated on the ctan hosts

Thank you for taking the extra steps to track down Robin and to update
the file yourself.

>  Karl, this has probably missed the cut for TL2014, it's definitely not urgent
> as it's an enhancement to the class to work with lualatex, not a bug fix.
> But I thought I'd reply here as the problem was originally raised on  this list.
>
> Scott thanks for the testing, tracing what was actually happening here
> was an "interesting exercise":-)

Thanks for keeping this thread updated and for all of the work, David.
I especially appreciate your detailed explanations.

Best,

Scott


From karl at freefriends.org  Sat May 24 19:58:35 2014
From: karl at freefriends.org (Karl Berry)
Date: Sat, 24 May 2014 17:58:35 +0000
Subject: [tex-live] another final build
Message-ID: <201405241758.s4OHwZ48001487@freefriends.org>

There are a few miscellaneous changes that need to happen, so I'll be
rebuilding once more, I think starting a few hours from now.  I'll write
again after it's done.  (I also got the time of the cron wrong in my
last mail, but anyway ...)

k


From borisv at lk.net  Sat May 24 20:24:04 2014
From: borisv at lk.net (Boris Veytsman)
Date: Sat, 24 May 2014 14:24:04 -0400
Subject: [tex-live] another final build
In-Reply-To: <201405241758.s4OHwZ48001487@freefriends.org> (message from
 Karl	Berry on Sat, 24 May 2014 17:58:35 +0000)
References: <201405241758.s4OHwZ48001487@freefriends.org>
Message-ID: <201405241824.s4OIO4JI006935@bilbo.localnet>

KB> Date: Sat, 24 May 2014 17:58:35 +0000
KB>  karl at freefriends.org using -f
KB> From: Karl Berry <karl at freefriends.org>

KB> There are a few miscellaneous changes that need to happen, so I'll be
KB> rebuilding once more, I think starting a few hours from now.  I'll write
KB> again after it's done.  (I also got the time of the cron wrong in my
KB> last mail, but anyway ...)

so should we rebuild now or after your e-mail?

-- 
Good luck

-Boris

Cache:
	A very expensive part of the memory system of a computer that no one
	is supposed to know is there.


From alan at alphabyte.co.nz  Wed May 28 04:37:02 2014
From: alan at alphabyte.co.nz (Alan Litchfield)
Date: Wed, 28 May 2014 14:37:02 +1200
Subject: [tex-live] ctan.elena.aut.ac.nz mirror not listed in MiKTeX manager
Message-ID: <53854BCE.4050003@alphabyte.co.nz>

Hi,

I have just noticed that the local mirror, ctan.elena.aut.ac.nz is not 
being listed in the package manager for MiKTeX. As ctan.elena.aut.ac.nz 
is the only ctan mirror in New Zealand, it is desirable to obtain 
updates from this rather than incurring international traffic costs.
1. Why is ctan.elena.aut.ac.nz not registered as a mirror?
2. How can we force MiKTeX for download from ctan.elena.aut.ac.nz?

Note that tlmgr on Mac works from the same mirror.

Regards
Alan
-- 
Dr Alan Litchfield
AlphaByte
PO Box 1941
Auckland, New Zealand 1140


From preining at logic.at  Wed May 28 05:04:12 2014
From: preining at logic.at (Norbert Preining)
Date: Wed, 28 May 2014 12:04:12 +0900
Subject: [tex-live] ctan.elena.aut.ac.nz mirror not listed in MiKTeX
 manager
In-Reply-To: <53854BCE.4050003@alphabyte.co.nz>
References: <53854BCE.4050003@alphabyte.co.nz>
Message-ID: <20140528030412.GB32226@auth.logic.tuwien.ac.at>

On Wed, 28 May 2014, Alan Litchfield wrote:
> I have just noticed that the local mirror, ctan.elena.aut.ac.nz is
> not being listed in the package manager for MiKTeX. As

MiKTeX? If you are talking about www.miktex.org then you are wrong
here, we are TeX Live ..

We cannot influence MiKTeX in any way.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------


From Robin.Fairbairns at cl.cam.ac.uk  Wed May 28 09:02:10 2014
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Wed, 28 May 2014 08:02:10 +0100
Subject: [tex-live] ctan.elena.aut.ac.nz mirror not listed in MiKTeX
	manager
In-Reply-To: Your message of Wed, 28 May 2014 14:37:02 +1200.
 <53854BCE.4050003@alphabyte.co.nz>
Message-ID: <7396.1401260530@cl.cam.ac.uk>

Alan Litchfield <alan at alphabyte.co.nz> wrote:

> I have just noticed that the local mirror, ctan.elena.aut.ac.nz is not
> being listed in the package manager for MiKTeX. As
> ctan.elena.aut.ac.nz is the only ctan mirror in New Zealand, it is
> desirable to obtain updates from this rather than incurring
> international traffic costs.
> 1. Why is ctan.elena.aut.ac.nz not registered as a mirror?
> 2. How can we force MiKTeX for download from ctan.elena.aut.ac.nz?

i don't know.

> Note that tlmgr on Mac works from the same mirror.

however, it seems that it last updated its holdings in march.  something
that old won't be accessible via mirror.ctan.org -- which is why it
doesn't work for tex live updates (and for mactex, i think).

Robin Fairbairns

For the CTAN team


From zephyrus8080 at gmail.com  Wed May 28 17:15:15 2014
From: zephyrus8080 at gmail.com (Zephyrus C)
Date: Thu, 29 May 2014 00:15:15 +0900
Subject: [tex-live] "fmtutil-sys --all" may not return error exit code under
 low free space condition always.
Message-ID: <CAGN5H+PH8zcBNXxG=s1nopfVDvTXqZ4UuoLXp=oSer5-vyUCwA@mail.gmail.com>

Hi list,

Thank you for offering the great package incoporating many packages
under one umbrella.

I would like to report a problem and patch.

I have experienced a very rare and hard-to-diagnose problem
presumably caused by low free file space condition during installation
of TeX-related packages, especially texlive package.

This happened under Debian, but the problem can happen elsewhere, too.

PROBLEM:

After a seemingly successful installation, trying to run tex-related
commands from the tex installation failed because it could not find
and produce .fmt files.

A discussion in Debian bug report system indicates that the
cause is very likely to be low free-space condition.
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=748962

But there was no smoking gun back then.

What irked me most is Debian GNU/Linux installer did not report any
abnormal conditions during the installation, and it printed that it
had successfully loaded TeX-related packages.
But the end result was that the installation was not usable later
since .fmt files were not created properly. This confused me to no end.

DEBUGGING:

So I started debugging.

I started on the assumption that some commands that are executed
during the installation of TeX-related packages including TeX-live
don't return error exit code properly when they encountered errors due
to low-space condition (errno == ENOSPC).  So I looked for potential
issues in this regards when I start debugging.

Naturally I looked at .fmt files creation which was screwed up as
prime suspect.

FILE: fmtutil.sh is the most likely culprit.

(Others may remain, but I have identified serious bugs in fmtutil.sh
and am proposing a patch.)

After a few days reading and testing the code, here are an observation
and possible improvements that can make a script file used in
TeX-live, fmutils.sh, more robust in the face of a low free-space
condition, and hopefully make it report possible error as exit code to
invoking process in a more reliable way.

============================================
To make a VERY LONG story short, here is a summary:
============================================

Most compelling bug:

An "mv" command was executed in "if" command portion, but there
was NO "else/fi" part to handle its error!
I think this is the culprit that fails to return the error code so
that the Debian package installer could properly failed the
installation.

Now, it has a proper error handler in my proposed patch.  I also noticed
empty (0-byte) .fmt files under /var/lib/texmf/ hierarchy when this "mv"
command
failed due to full file system condition.
So I decided to remove the bogus partial file when "mv" failed.

Also, the trap processing introduced by "set -e" may not be
most appropriate and so I changed it a little.

So, To wrap up, I am attaching a patch.
Please find below the diff of modified fmtutil.sh

fmtutil is actually /usr/share/texlive/texmf-dist/scripts/texlive/fmtutil.sh

diff of modified fmtutil in /tmp/fmtutil.sh
and
/usr/bin/fmtutil which is a symlink to the script under
/usr/share/texlive/...
was produced and attached.

To be exact, I looked at Debian version of the fmtutil.sh, and
so there may be a few Debian-specific changes in the original
fmtutil.sh with which I started.


Thank you in advance for your attention.

---

Here is the MUCH LONGER version.

===============
VERY LONGER version
===============

Here are the gory details that are behind the proposed patch.

There are a few issues with the current code of fmtutil.sh (I downloaded
TexLive 2013 source code from TUG web site, and am describing the
issue. If in 2014 version, it has improved, so much the better.)

To be exact, I looked at Debian version of the fmtutil.sh, and
so there may be a few Debian-specific changes in the original
fmtutil.sh with which I started.


(1) (Unintended or intended?) extra execution of a command when it
   fails in one user-defined function, "verbose" .

(2) When an error of producing a format file is encountered (possibly
   due to full file system condition), during processing when "--all"
   is passed, the error seems to be sometimes ignored, and so the
   error code is not returned as exit code.

(3) The fmtutil.sh script in TeXLive 2013 does not seem to have
    "set -e" to exit as soon as an error occurs during the script
    execution. This flag is in Debian version. I think it is a good
    idea to have it in the script.
    If "set -e" is in TexLive 2014 version already, so much the better.

(4) logged error/report messages are not flushed sometimes.

    Contrary to popular belief, calling "log_failure" does not stop
    processing immediately when fmtutil.sh is trying to produce many
    .fmt files ("--all" flag).  All it does is to accumulate the error
    messages as errors are encountered. At the end of the execution,
    when user-defined function "byebye" is called, the accumulated
    error messages are printed and error return is taken.
    "log_warning" is similar and only that it does not cause the
    script to return by error exit code. (I modify it to report error
    in my patch proposed here.)

    This operation is in theory. Unfortunately, there seems to be a
    loop-hole, an error path that may not invoke "byebye", and thus we
    may not see the error messages flushed at all :-(

The second issue above could be the cause of possible reason why I did
not see the Debian installer fail and .fmt files were not produced
when there was a very low free-space condition during installation.
(And I am more or less convinced that the missing handling of the
failure of an "mv" command executed in if-expression part is the
cause of fmtutil.sh not reporting the error under low-space condition.)

So, I am proposing a patch here.  It consists of changes of functional
specification in a few places and a set of added comments for better
maintainability.

With this patch, fmtutil.sh is much more robust, and the installer
will catch more errors due to low free-space conditions during the
installation with the patch, and this should save support man-hours
later on.

I know everyone is busy with 2014 release. So once the dust settles
down, I would appreciate to have someone look into this matter without
hurry.

VERY LENGTHY DESCRIPTION:

Sorry about this lengthy writing, but the code seems to have lasted
more than a dozen years, and there are so many things that accumulated
over the years that introduce possible errors during low-space
condition. So I am afraid that you have to read the long description
below to understand some subtle changes proposed in the patch.

"fmtutil-sys --all" may not return error exit code under low free space
condition.

(1) I found that fmtutil.sh has a slightly buggy function.
(fmtutil.sh is part of texlive-base and is called eventually when
fmtutil-sys --all is called during installation to create .fmt files.)

I am attaching a patch to re-define the problematic function and to
replace log_warning with log_failure to signal the calling program
that a failure occurred.

Summary regarding "verbose": Well, "verbose" alone is worth a single
post :-(, but I am including the whole description in one post.

There is one shell-function "verbose()" which is used to invoke a
passed command and redirect stderr based on the exit value of
$mktexfmtMode (which is either "true" or "false").

Here is the definition of "buggy" verbose()
from fmtutil.sh ( linked from /usr/bin/fmtutil to
/usr/share/texlive/texmf-dist/scripts/texlive/fmtutil.sh)

###############################################################################
# verbose (cmd)
#   execute cmd. Redirect output depending on $mktexfmtMode.
###############################################################################
verbose()
{
  $mktexfmtMode && ${1+"$@"} >&2 || ${1+"$@"}
}


This function as it is written today is buggy in the sense that if the
command fails when $mktexfmtMode is "true", the failing command is
executed TWICE (!). The first execution is with the redirection of
STDERR. The second execution is without such redirection.  I think
this is quite unintentional.

Or could it be intentional?

Maybe the thought was that if the redirected execution failed, let us
re-execute the command without error redirection so that the error is
visible on invoking console.

But there is a ramification regarding exit code if this were the
original intention.
The exit code from this execution of
"verbose other command options ..." becomes,
when the command fails on the LEFT Hand Side (LHS) of "||",
it is the exit code of the executed command (without re-direction) on
the right-hand side (RHS) of "||".

Under very space-tight conditions of a local file system, the failure
may happen while the stderr is re-directed (LHS), but a failure may not
happen when the command is executed as is without re-direction on the RHS
(!)
(However, if the command only tries to produce .fmt file, then the
this may not be relevant?)

Also, more to the point. I am not entirely sure what is the returned
exit code when the RHS of "||" fails, depending on the version of the
shell. We may not get the error condition that triggers 'trap' at all (!?)
That is one reason I want a mundane use of if/then/else/fi proposed in
the patch.

cf. Shell version dependency. Background:

[1] Here is a quote regarding the condition of error handled by trap from
"bash" man page.

About "trap [-lp] [arg] [sigspec ..]
    ...
     If a sigspec is ERR, the command arg is executed whenever a simple
     command has a non-zero exit status, subject to the following
     conditions. The ERR trap is not executed if the failed command is part
     of the command list immediately following an until or while keyword,
*    part of the test following the if or elif reserved words, part of a
*    command executed in a && or || list, or if the command return
     status is being inverted using !. These are the same conditions obeyed
     by the errexit option.

     => I am not entirely sure if the failure in the RHS of "||" in
     |verbose()| is trapped because of the above description.
     In the current version, maybe.

[2] A quote: "dash" man page (under Debian GNU/linux, it seems /bin/sh is
a link to /bin/dash),

    -e errexit' If not interactive, exit immediately if any untested
     command fails. The exit status of a command is considered to be
     explicitly tested if the command is used to control an if, elif,
     while, or until; or if the command is the left hand operand of an
     ''&&'' or ''||'' operator.

 => OK, so the left hand execution when it fails does not cause the
    trap to take effect even if it fails, and only the failure on the
    RHS is noticed. Hmm...

[3] Venerable Single Unix Specification OpenGroup Posix specification
document.
http://pubs.opengroup.org/onlinepubs/7908799/xcu/chap2.html

This is POSIX!

-e
    When this option is on, if a simple command fails for any of the
    reasons listed in Consequences of Shell Errors or returns an exit
    status value >0, and is not part of the compound list following a
    while, until or if keyword, and is not a part of an AND or OR
    list, and is not a pipeline preceded by the "!" reserved word,
    then the shell will immediately exit.

     => So it doesn't say explicitly that the failure of the right
     hand side of "||" triggers the error processing defined by
     trap immediately. Thus, POSIX accommodates the both positions of
     "dash" and "bash" beautifully :-)

    cf. Here "AND" list or "OR" list is defined in POSIX.
     AND Lists
     The control operator && denotes an AND list. The format is:

     command1 [ && command2] ...

     First command1 will be executed. If its exit status is zero,
     command2 will be executed, and so on until a command has a
     non-zero exit status or there are no more commands left to
     execute. The commands will be expanded only if they are executed.

     Exit Status: The exit status of an AND list will be the exit
     status of the last command that is executed in the list.

     OR Lists
     The control operator || denotes an OR List. The format is:

     command1 [ || command2] ...

     First, command1 will be executed. If its exit status is
     non-zero, command2 will be executed, and so on until a command
     has a zero exit status or there are no more commands left to
     execute.

     Exit Status: The exit status of an OR list will be the exit
     status of the last command that is executed in the list.


Also, in fmtutil.sh, originally trap processing invokes "cleanup" only
and message buffer was not flushed. Now trap calls "byebye" and
message is flushed.  BASH allows the 'ERR' specification, which
would trigger trap processing, as a value to specify the error of a
command execution in shell script. When "set -e" is used and a command
fails, a trap would be taken with "ERR".  But this is only available
in BASH.  In the end, I inserted "if" checks in a few places instead
of relying on "set -e".


FURTHER DETAILS:

DETECTIVE WORK

My bet was that when "fmtutil-sys --all" was called to create all
required .fmt files on my PC, some invocations of it failed due to low
free-space conditions but did not return the exit error code
correctly.

So I checked the calling sequence that would happen when "--all" is
passed to fmtutil, and found that the user-defined functions are
called in this order.

main
 ->
  recreate_all
  ->
   recreate_loop
   ->
    run_initex
    ->
     verbose

In "run_initex", the following piece of code is where the meat of
processing takes place.

--- quote
  verboseMsg "$progname: running \`$engine -ini  $tcxflag $jobswitch
$prgswitch
$texargs' ..."

  # run in a subshell to get a local effect of TEXPOOL manipulation:
  (
    # If necessary, set TEXPOOL. Use absolute path, because of KPSE_DOT.
    $localpool && { TEXPOOL="`pwd`:$TEXPOOL"; export TEXPOOL; }
    verbose $engine -ini $tcxflag $jobswitch $prgswitch $texargs
  ) </dev/null
--- end quote

I realized that "verboseMsg" is to print out what is going on to the
log.
and somehow user-defined "verbose" command was used to invoke the
command, "$engine -ini $tcxflag $jobswitch $prgswitch $texargs".

This slightly buggy function is called within "run_initex"
(yes, that is where the fmt files are created eventually!)

This "verbose" function should be rewritten to avoid the re-execution
of the command "${1+"$@"}" when it fails when "$mktexfmtMode" is true.

Correction-1:

verbose()
{
    if $mktexfmtMode
    then
         ${1+"$@"} >&2
    else
        ${1+"$@"}
    fi
}

If you are in doubt, you can see the repeated execution of command in
the following simplified test script.

# cat /tmp/t-buggy.sh
#!/bin/sh
#

# This script is to show that a failure of
# a command executed in verbose may be executed twice.

# false is not a good failure command sample

set -e

rc=0

verbose()  # original. This is buggy!
{
  $mktexfmtMode && ${1+"$@"} >&2 || ${1+"$@"}
}

#
run_initex()
{
  # run in a subshell to see if this changes anything.
  (
      echo "run_initex called"
      # DO SOMETHING THAT SHOULD FAIL
      cp /dev/null /etc
  ) </dev/null
}

# should succeed
verbose echo "hello, world"
echo "rc = $?"

echo before cp /dev/null /etc
# should fail
verbose cp /dev/null /etc
echo "rc = $?"

echo before subshell execution
# should fail
# run in a subshell ...
  (
    verbose cp /dev/null /etc
  ) </dev/null
echo "rc = $?"

echo before run_initex

mktexfmtMode=true
rc=1
# should fail since run_initex invokes false inside.
verbose run_initex $rc
echo "rc = $?"

echo before cp /dev/null /etc
# should fail under ordinary user account.
verbose cp /dev/null /etc
echo "rc = $?"

exit 0


The above is the content of the script.
Now let us run it.

$ /tmp/t-buggy.sh || echo failure
hello, world
rc = 0
before cp /dev/null /etc
cp: cannot create regular file '/etc/null': Permission denied
cp: cannot create regular file '/etc/null': Permission denied
failure
$

Please notice the repeated execution of the failed command by "verbose()".
That is because when "$mktexfmtMode" is true the passed command is
executed with redirection.
In this case, the passed command "cp /dev/null /etc" should fail for
ordinary user.
But it is then  re-executed because of ||. Shell figured that Left-Hand
Side (LHS) failed and so tried to execute Right-Hand Side (RHS), too.

Now, when I rewrite verbose() in the suggested manner, what happens?
With fixed verbose (as in correction-1 above):

$ /tmp/t-OK.sh || echo fail
hello, world
rc = 0
before cp /dev/null /etc
cp: cannot create regular file '/etc/null': Permission denied
fail
$

Great. It is executed only once and I think this is the intended behavior.

BTW, suppose the intention of "verbose" was to capture whatever error
message (to file descriptor 2) to a file associated with STDOUT (file
decriptor 1) [I may got confused here and 1 and 2 may be swapped] and
later check error condition by searching for a certain string pattern
in saved re-directed output, we may encounter a subtle problem *IF and
ONLY IF* the command fails during an (almost) full file system condition
when output is redirected (LHS), AND IF it succeeds without such
redirection (RHS).

Now, if the original intention was to run the command in
non-redirected manner when it fails in re-directed manner, an explicit
test using if/then/fi is still better since the individual command is
more likely to cause the shell execution to trap if an error occurs,
and return exit code as it should (and we don't have to worry about
the obscure trap handling of different version of shells to boot!)

Correction-1':
verbose()
{
    _v_repeat=false;
    if $mktexfmtMode
    then
         ${1+"$@"} >&2   # failure should trigger trap in this form.
     if test $? = 0
     then
         :
     else
          _v_repeat=true;
         fi
    fi
    if $_v_repeat
    then
        ${1+"$@"}
    fi
}

(2) log_warning

 Near line 765, we have the following code snippet in fmtutil.sh:

--- quote
  if test -f "$fmtfile"; then
    grep '^! ' $format.log >/dev/null 2>&1 &&
      log_warning "\`$engine -ini $tcxflag $jobswitch $prgswitch $texargs'
possibly failed."
--- end quote

Like I said in (1) above, format.log may have failed to capture the error
message
under a very space-tight condition in "verbose()". That is tough.

Anyway, I wanted  see the "log_warning" to be changed to a
failing "log_failure" instead. The reason is that log_warning in the
current form prints a one line warning and then kept on producing
other .fmt files merrily and at the end.
And it seems to forget about the error return
code from the "failure" noticed by '\! '.

Why? As I re-read the code, when user-defined function "byebye" is
called to exit the script execution, if a previous call to "log_warning"
has been made, then the accumulated warning message is printed, but no
error processing is done.  Only when "log_failure" has been called at
least once, the fmtutil.sh returns error exit code of 1 as a whole.

I should note that I was looking at the console when the TeX-related
packages were installed (eventually the installation turned out to be
broken) I did not notice any strange output (I may have missed a line
or two, to be sure.)  Can there be an exit path that does not call
"byebye" and omit printing the accumulated error and warning messages
just in case?

I bet there is!

If "set -e" is set as in Debian version of fmtutil.sh, then any error
caught such as, say, the failure of

    cp "$poolfile" $engine.pool

near Line 729 under near-full file system condition
would cause the shell execution to stop and take exit processing.

Then the setting of

  trap 'cleanup 1' 1 2 3 7 13 15

near line 164, inside the user-function of  "setupTmpDir()"
will cause the script to exit WITHOUT calling the
dumping of accumulated messages performed by "byebye".

"cleanup" referred to in the trap statement above is a user-defined
function.

(Well, at least, it does return exit code 1 when 'cleanup 1' is
executed. So why didn't we see an error that would have caused Debian
installer to report the installation failure eventually.  I now know
why: unpatched fmtutil.sh failed to properly handle the error of an
"mv" command executed in if-command.)

Maybe we could change the above trap into the following so that
message buffer is flushed.

  trap 'byebye' 1 2 3 7 13 15

Norbert suggested we should not stop right there as soon as the first
error was encountered and should try to produce other .fmt files as
many as we can. I concur. So to make this intention clear, I agree to
continue using "log_warning" when "grep" failed.

The code in fmtutil.sh tried to handle errors using "set -e" (in
Debian version), "trap ...", etc.  But I am afraid that the error
handling was not so well structured using "set -e", "trap ...", etc.

So I am suggesting the patch to make it a Little more
organized or straight-forward and make sure that "byebye" is called
even in the face of unexpected error, but I am not sure if I
succeeded perfectly.
But it fixes a few serious bugs that failed to report errors to the
invoking process, and it is definitely better than the original
version.

(I tested this script under full /var partition condition, and the
modified script printed out error messages at the end while the
original failed to do so.)

I attach such output at the end.


Also, I modified the code to exit with error code when "log_warning" is
called (in addition to the case of "log_failure").

There is another usage of "log_warning" near line 796.

--- quote
          if cp "$destfile" "$mplib_mem_file" </dev/null; then
            mktexupd "$fulldestdir" "$mplib_mem_name"
          else
            log_warning "cp $destfile $mplib_mem_file failed."
          fi
--- end quote

The warning should indeed be produced when the file system is full and "cp"
can fail then!

This really should have shown up on my Debian installation log.
But I am not sure if the accumulated warning was printed due to the
possible short-cut exit without calling "byebye" mentioned earlier.

(This particular use of "log_warning" has been changed to
"log_failure" since "log_failure" does not stop execution
right away. Even when "--all" is given, the execution goes up to the
last .fmt creation, and only after that the error messages are printed
in one chunk after warning messages.)


====

OK, that's it.

As a user of linux system with not so large partition, I really need
to make sure that "log_warning" works, and "fmtutil.sh" as a whole
performs to return exit error code at the end with proper setting of
error handlers.

TIA



---
PS:
Now I notice that, if fmtutil.sh is passed "--no-error-if-no-format",
it does not abort when it probably should.

We can't have proper error failure if this option is used.

Such call with --no-error-if-no-format was introduced
in TeXLive 2013 in

./texlive-20130530-source/texk/texlive/linked_scripts/texlive/tlmgr.pl:
$errors += do_cmd_and_check("fmtutil$sysmode --no-error-if-no-format
--byengine $e");

./texlive-20130530-source/texk/texlive/tl_scripts/ChangeLog:    * fmtutil:
add --no-error-if-no-format, don't abort in some cases of

  full quote is:

  2010-07-04  Norbert Preining  <preining at logic.at>

    * fmtutil: add --no-error-if-no-format, don't abort in some cases of
    missing formats

Oh well :-)

I may have to figure out if this possible use of
"--no-error-if-no-format" was relevant on my PC that runs under Debian
GNU/Linux during installation of texlive-related packages.


PS:

NOTE: CAVEAT EMPTOR

Full File system error manifests itself in various manners.

Almost full file system (/var partition is full)
comes in varieties.

In some computer installations, /tmp and /var share the same partition.
Then creating temporary files during shell execution (such as "here
document" of shell script) will fail in addition to the failure to
create .fmt files.
Whereas if /tmp is not full and /var is full, then there is a pattern
of errors which will not be seen when /tmp and /var are both full.
Also, whether /usr and /var share the same partition also change the
error behavior, too.

In my tested environment, these partitions are all different.

So your mileage varies if you test the installation of texlive under
low-space condition using this script.

I am sure that there are OTHER commands that fail and may
fail to report that an error occurred.

But this does not change the fact that the failure to implement the
error handling of an "mv" command in if-command syntax was the primary
cause of my Debian installer's failure to notice the partial
incomplete installation of texlive package, and failure to generate
.fmt files properly.

Sample OUTPUT form the modified fmtutil.sh

The excerpt from the log of a hardened fmtutil.sh under almost full
file system condition such that even superuser fails to write to /var
partition in the middle of fmtutil.sh execution.
(For this test, I only loaded texlive-base of Debian package.
If I load TeX-related more packages, then I would have gotten a dozen
or two .fmt creation failures.)

--- quote ----
fmtutil: running `luatex -ini   -jobname=luatex -progname=luatex
luatex.ini' ...
This is LuaTeX, Version beta-0.76.0-2013070106 (rev 4627)  (INITEX)
 restricted \write18 enabled.

  [  omission ]

50 preloaded fonts
0 words of pdf memory
0 indirect objects
No pages of output.
Transcript written on dviluatex.log.
mv: error writing '/var/lib/texmf/web2c/luatex/dviluatex.fmt': No space
left on device
mv: failed to extend '/var/lib/texmf/web2c/luatex/dviluatex.fmt': No space
left on device
Error: 'mv dviluatex.fmt /var/lib/texmf/web2c/luatex/dviluatex.fmt' failed
Warning: Removing the possibly partial file
/var/lib/texmf/web2c/luatex/dviluatex.fmt left by mv failure ...

###############################################################################
fmtutil: Warning! Some warnings have been issued.
Visit the log files in directory
  /var/lib/texmf/web2c
for details.
###############################################################################

This is a summary of all `warning' messages:
Removing the possibly partial file /var/lib/texmf/web2c/luatex/luatex.fmt
left by mv failure ...
Removing the possibly partial file /var/lib/texmf/web2c/pdftex/etex.fmt
left by mv failure ...
Removing the possibly partial file /var/lib/texmf/web2c/pdftex/pdftex.fmt
left by mv failure ...
Removing the possibly partial file /var/lib/texmf/web2c/pdftex/pdfetex.fmt
left by mv failure ...
Removing the possibly partial file /var/lib/texmf/web2c/tex/tex.fmt left by
mv failure ...
Removing the possibly partial file
/var/lib/texmf/web2c/luatex/dviluatex.fmt left by mv failure ...

###############################################################################
fmtutil: Error! Not all formats have been built successfully.
Visit the log files in directory
  /var/lib/texmf/web2c
for details.
###############################################################################

This is a summary of all `failed' messages:
'mv luatex.fmt /var/lib/texmf/web2c/luatex/luatex.fmt' failed
'mv etex.fmt /var/lib/texmf/web2c/pdftex/etex.fmt' failed
'mv pdftex.fmt /var/lib/texmf/web2c/pdftex/pdftex.fmt' failed
'mv pdfetex.fmt /var/lib/texmf/web2c/pdftex/pdfetex.fmt' failed
'mv tex.fmt /var/lib/texmf/web2c/tex/tex.fmt' failed
'mv dviluatex.fmt /var/lib/texmf/web2c/luatex/dviluatex.fmt' failed
byebye  called
We had error(s).

--- end quote ---

[end of memo]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140529/213cc58f/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: fmtutil-diff.patch
Type: application/octet-stream
Size: 20627 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20140529/213cc58f/attachment-0001.obj>

From klaus at dante.de  Thu May 29 06:22:32 2014
From: klaus at dante.de (klaus at dante.de)
Date: Thu, 29 May 2014 06:22:32 +0200
Subject: [tex-live] Purpose of install-tl-windows.bat
Message-ID: <1WprrM-21xm1A0@fwd13.aul.t-online.de>

Hi,

I apolize in advance if my question is due to not following the tex-live list in detail.
In the TL section of the windows setup program for the upcoming TeX Collection DVD I offer  to run install-tl.bat, install-advanced.bat or open the main doc file index.html from the TL root dir.
Now I noticed that a install-tl-windows.bat file was introduced in January that seems to remove all dirs with tex executables from the path variable and to unset all environment variables refering to a maybe existing previous perl installation before calling the normal install-tl.bat. The autorun.inf still refers to install-tl.bat

So it seems that on a plain Windows without Perl calling install-tl-windows or install-tl shouldn't make a difference, while on a windows system with installed Perl install-tl-windows shall prevent compatibility issues by ensuring that the tlperl shipped with TL is used instead of the already installed Perl. Correct?

I'd just like to know, when the user hits the "Run the TL installer" button, shall I start install-tl.bat as before or install-tl-windows.bat instead?

Cheers
Klaus




From n.s.kroonenberg at rug.nl  Thu May 29 10:32:05 2014
From: n.s.kroonenberg at rug.nl (Siep Kroonenberg)
Date: Thu, 29 May 2014 10:32:05 +0200
Subject: [tex-live] Purpose of install-tl-windows.bat
In-Reply-To: <1WprrM-21xm1A0@fwd13.aul.t-online.de>
References: <1WprrM-21xm1A0@fwd13.aul.t-online.de>
Message-ID: <20140529083205.GA2061@bitmuis.thuis.internal>

On Thu, May 29, 2014 at 06:22:32AM +0200, klaus at dante.de wrote:
> Hi,
> 
> I apolize in advance if my question is due to not following the tex-live list in detail.
> In the TL section of the windows setup program for the upcoming TeX Collection DVD I offer  to run install-tl.bat, install-advanced.bat or open the main doc file index.html from the TL root dir.
> Now I noticed that a install-tl-windows.bat file was introduced in January that seems to remove all dirs with tex executables from the path variable and to unset all environment variables refering to a maybe existing previous perl installation before calling the normal install-tl.bat. The autorun.inf still refers to install-tl.bat
> 
> So it seems that on a plain Windows without Perl calling install-tl-windows or install-tl shouldn't make a difference, while on a windows system with installed Perl install-tl-windows shall prevent compatibility issues by ensuring that the tlperl shipped with TL is used instead of the already installed Perl. Correct?
> 
> I'd just like to know, when the user hits the "Run the TL installer" button, shall I start install-tl.bat as before or install-tl-windows.bat instead?
> 
> Cheers
> Klaus

We renamed install-tl.bat to install-tl-windows.bat, although until
the freeze we retained both. This to reduce confusion for Windows
users. But now there should be no install-tl.bat anymore.

We just overlooked autorun.inf; fixed in r. 34256. Thanks for
pointing this out.

-- 
Siep Kroonenberg


From drkp at cs.washington.edu  Wed May 28 23:11:42 2014
From: drkp at cs.washington.edu (Dan Ports)
Date: Wed, 28 May 2014 14:11:42 -0700
Subject: [tex-live] conflicting filenames in merriweather
Message-ID: <20140528211142.GG20708@cs.washington.edu>

The merriweather package contains two files with the same path but
different cases:
  texmf-dist/tex/latex/merriweather/Merriweather.sty
  texmf-dist/tex/latex/merriweather/merriweather.sty
which is a problem for case-insensitive filesystems (e.g. Mac OS).

The two files also appear to be different, although I haven't looked
closely enough to see what the differences are...

Dan

-- 
Dan R. K. Ports                UW CSE                http://drkp.net/


From Robin.Fairbairns at cl.cam.ac.uk  Thu May 29 17:00:33 2014
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Thu, 29 May 2014 16:00:33 +0100
Subject: [tex-live] conflicting filenames in merriweather
In-Reply-To: Your message of Wed, 28 May 2014 14:11:42 -0700.
 <20140528211142.GG20708@cs.washington.edu>
Message-ID: <7373.1401375633@cl.cam.ac.uk>

Dan Ports <drkp at cs.washington.edu> wrote:

> The merriweather package contains two files with the same path but
> different cases:
>   texmf-dist/tex/latex/merriweather/Merriweather.sty
>   texmf-dist/tex/latex/merriweather/merriweather.sty
> which is a problem for case-insensitive filesystems (e.g. Mac OS).
> 
> The two files also appear to be different, although I haven't looked
> closely enough to see what the differences are...

however, there's only one [Mm]erriweather.sty on ctan just now (the
lowercase one).  it would be good to know if either of the two you have
matches the ctan copy:

  http://mirror.ctan.org:/fonts/merriweather/tex/merriweather.sty

robin


From karl at freefriends.org  Fri May 30 01:07:26 2014
From: karl at freefriends.org (Karl Berry)
Date: Thu, 29 May 2014 23:07:26 +0000
Subject: [tex-live] "fmtutil-sys --all" may not return error exit code
 under low free space condition always.
In-Reply-To: <CAGN5H+PH8zcBNXxG=s1nopfVDvTXqZ4UuoLXp=oSer5-vyUCwA@mail.gmail.com>
Message-ID: <201405292307.s4TN7Q23007060@freefriends.org>

    I would like to report a problem and patch.

Thank you very very much for the in-depth analysis and patch.  I haven't
even read your entire message yet :), but I'm still sure we'll be
incorporating these fixes, one way or another.

Thanks again,
Karl



From kbrow1i at gmail.com  Fri May 30 14:45:29 2014
From: kbrow1i at gmail.com (Ken Brown)
Date: Fri, 30 May 2014 08:45:29 -0400
Subject: [tex-live] conflicting filenames in merriweather
In-Reply-To: <7373.1401375633@cl.cam.ac.uk>
References: <7373.1401375633@cl.cam.ac.uk>
Message-ID: <53887D69.9020806@gmail.com>

On 5/29/2014 11:00 AM, Robin Fairbairns wrote:
> Dan Ports <drkp at cs.washington.edu> wrote:
>
>> The merriweather package contains two files with the same path but
>> different cases:
>>    texmf-dist/tex/latex/merriweather/Merriweather.sty
>>    texmf-dist/tex/latex/merriweather/merriweather.sty
>> which is a problem for case-insensitive filesystems (e.g. Mac OS).
>>
>> The two files also appear to be different, although I haven't looked
>> closely enough to see what the differences are...
>
> however, there's only one [Mm]erriweather.sty on ctan just now (the
> lowercase one).  it would be good to know if either of the two you have
> matches the ctan copy:
>
>    http://mirror.ctan.org:/fonts/merriweather/tex/merriweather.sty

The CTAN copy appears to be a newer version of the (lowercase) 
merriweather.sty that's in the TL repository.  The CTAN version says 
"2014/01/22 (Bob Tennent)", and the TL version says "2013/11/10 (Bob 
Tennent)".  The (uppercase) Merriweather.sty is much smaller and has the 
following first few lines:

%% Generated by autoinst on 2013/11/10
%%
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{Merriweather}
     [2013/11/10 (autoinst)  Style file for Merriweather.]

Ken


From zephyrus8080 at gmail.com  Fri May 30 16:07:45 2014
From: zephyrus8080 at gmail.com (Zephyrus C)
Date: Fri, 30 May 2014 23:07:45 +0900
Subject: [tex-live] "fmtutil-sys --all" may not return error exit code
 under low free space condition always.
In-Reply-To: <201405292307.s4TN7Q23007060@freefriends.org>
References: <CAGN5H+PH8zcBNXxG=s1nopfVDvTXqZ4UuoLXp=oSer5-vyUCwA@mail.gmail.com>
 <201405292307.s4TN7Q23007060@freefriends.org>
Message-ID: <CAGN5H+NXzvfTv6BT90b4yGVrPqb2bX0bXbYzrJJYoOA3hQD32w@mail.gmail.com>

Hi,

Thank you for your response in the busy schedule before the shippment of
2014 image.


2014-05-30 8:07 GMT+09:00 Karl Berry <karl at freefriends.org>:

>     I would like to report a problem and patch.
>
> Thank you very very much for the in-depth analysis and patch.  I haven't
> even read your entire message yet :), but I'm still sure we'll be
> incorporating these fixes, one way or another.
>
>
Sorry for the very very long posting :-)
But I needed so many paragraphs to explain the problem.

It would be great if fmutil.sh is hardened by the idea from the proposed
patch.


> Thanks again,
> Karl
>
>
Thank you again for providing the great package!

Best Regards,
Zephyrus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20140530/67a94035/attachment.html>

