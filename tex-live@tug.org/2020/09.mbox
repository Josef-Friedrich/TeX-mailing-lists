From news3 at nililand.de  Fri Sep  4 14:00:53 2020
From: news3 at nililand.de (Ulrike Fischer)
Date: Fri, 4 Sep 2020 14:00:53 +0200
Subject: querying the version of external tools/drivers
Message-ID: <1g7ycnygmwn33$.dlg@nililand.de>

My current use case is dvipdfmx, but this is also meant as more
general request.

dvipdfmx is currently extending the color support by adding new
specials or extending the syntax of existing specials and this is
very nice. But as the version of dvipdfmx is not known by latex it
is not so easy to exploit the new features while staying compatible
with older binaries (either by providing fall back code or at least
issue warnings). 

Would it be possible to provide the version info somehow? For
example could the output of dvipdfmx --version and of similar
tools/drivers be stored automatically somewhere in texmf-var in the
search path of tex? (Calling dvipdfmx --version during the
compilation doesn't work with shell-restricted.)

(I know this is not fool proof, people could move the dvi to another
computer and compile there.)



-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From h.y.acetaminophen at gmail.com  Fri Sep  4 16:29:57 2020
From: h.y.acetaminophen at gmail.com (Hironobu Yamashita)
Date: Fri, 4 Sep 2020 23:29:57 +0900
Subject: querying the version of external tools/drivers
In-Reply-To: <1g7ycnygmwn33$.dlg@nililand.de>
References: <1g7ycnygmwn33$.dlg@nililand.de>
Message-ID: <CAJCZBmQbTyae4R9b0ReffEkS9XiKwc0PEqimqh3JKxyfU-7w2g@mail.gmail.com>

Hi Ulrike,

> Would it be possible to provide the version info somehow?

I think you can exploit 'extractbb' instead of 'dvipdfmx':
extractbb shares the same binary with (x)dvipdfmx
so the version number is printed, and it is allowed in
restricted shell escape (but only since TL2015).

Hironobu

From news3 at nililand.de  Fri Sep  4 17:04:10 2020
From: news3 at nililand.de (Ulrike Fischer)
Date: Fri, 4 Sep 2020 17:04:10 +0200
Subject: querying the version of external tools/drivers
References: <1g7ycnygmwn33$.dlg@nililand.de>
 <CAJCZBmQbTyae4R9b0ReffEkS9XiKwc0PEqimqh3JKxyfU-7w2g@mail.gmail.com>
Message-ID: <1ntfauxtiwoql.dlg@nililand.de>

Am Fri, 4 Sep 2020 23:29:57 +0900 schrieb Hironobu Yamashita:

>> Would it be possible to provide the version info somehow?
> 
> I think you can exploit 'extractbb' instead of 'dvipdfmx':
> extractbb shares the same binary with (x)dvipdfmx
> so the version number is printed, and it is allowed in
> restricted shell escape (but only since TL2015).

Nice idea, that will solve the dvipdfmx case. 

-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From amanraoverma at gmail.com  Sat Sep  5 23:18:50 2020
From: amanraoverma at gmail.com (Aman Verma)
Date: Sat, 5 Sep 2020 17:18:50 -0400
Subject: Add lua-alt-getopt as a dependency of luaotfload
Message-ID: <CA+c7JOAJ1HgGARDiWCfRM9CkmfF1Lp2cWdU__RAGjXMmw4hwXA@mail.gmail.com>

Can you add lua-alt-getopt to the dependencies of luaotfload? It is used
in luaotfload-tool.lua[1].

[1]: https://git.io/JUGTj

Regards,
Aman

From karl at freefriends.org  Sat Sep  5 23:51:17 2020
From: karl at freefriends.org (Karl Berry)
Date: Sat, 5 Sep 2020 15:51:17 -0600
Subject: Add lua-alt-getopt as a dependency of luaotfload
In-Reply-To: <CA+c7JOAJ1HgGARDiWCfRM9CkmfF1Lp2cWdU__RAGjXMmw4hwXA@mail.gmail.com>
Message-ID: <202009052151.085LpHjY021163@freefriends.org>

    Can you add lua-alt-getopt to the dependencies of luaotfload? It is used
    in luaotfload-tool.lua

Updated for tonight, thanks.

From texlive at mstoeckl.com  Mon Sep  7 23:08:29 2020
From: texlive at mstoeckl.com (Manuel Stoeckl)
Date: Mon, 7 Sep 2020 17:08:29 -0400
Subject: dvitodvi crashes on documents with >1000 pages
Message-ID: <20200907170829.53b9165d@shale>

Hi All,

The program `dvitodvi` when applied to a document with >1000 pages,
crashes due to a buffer overflow on a fixed size page lookup table. The
same problem happens with `dvibook`.

I have a patch that probably fixes the issue (see attachment); but do
not know where to submit it for review. Is there a guide for one-off
contributions like this?

Sincerely,

Manuel Stoeckl

-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0001-remove-page-limit-for-dvitodvi-and-dvibook.patch
Type: text/x-patch
Size: 5113 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20200907/1573e492/attachment.bin>

From karl at freefriends.org  Tue Sep  8 23:28:49 2020
From: karl at freefriends.org (Karl Berry)
Date: Tue, 8 Sep 2020 15:28:49 -0600
Subject: dvitodvi crashes on documents with >1000 pages
In-Reply-To: <20200907170829.53b9165d@shale>
Message-ID: <202009082128.088LSnQ4027646@freefriends.org>

    I have a patch that probably fixes the issue (see attachment); but do
    not know where to submit it for review. Is there a guide for one-off
    contributions like this?

You did the right thing by sending email here. Thanks much for the
bug report and (especially) patch! I will apply it shortly. -k

From naveen at syrusdark.website  Wed Sep  9 08:55:08 2020
From: naveen at syrusdark.website (Naveen M K)
Date: Wed, 09 Sep 2020 12:25:08 +0530
Subject: Issue Releated with Checksum on install-tl.zip
Message-ID: <130011599632508@mail.yandex.com>

An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200909/115ea32f/attachment.html>

From karl at freefriends.org  Wed Sep  9 23:26:59 2020
From: karl at freefriends.org (Karl Berry)
Date: Wed, 9 Sep 2020 15:26:59 -0600
Subject: Issue Releated with Checksum on install-tl.zip
In-Reply-To: <130011599632508@mail.yandex.com>
Message-ID: <202009092126.089LQx3K005790@freefriends.org>

I suppose the checksums are different because the install-tl.zip
packages are different. Clearly it is not up to us when or if CTAN
mirrors update. Seems to me you have to check the validity of the
checksum against the file on the same server. CTAN is not an
instantaneous mirror system.

As far as our server goes, the cron job usually finishes around 02:00
CEST (France) time. But it's indeterminate when the ctan master host
picks it up, and it's even more indeterminate when the ctan mirrors sync
against the master.

As for github, the release process is complicated enough already just
doing everything locally. I'm not going to complicate it further. Sorry.

Best,
Karl

From naveen at syrusdark.website  Thu Sep 10 09:04:04 2020
From: naveen at syrusdark.website (Naveen)
Date: Thu, 10 Sep 2020 12:34:04 +0530
Subject: Issue Releated with Checksum on install-tl.zip
Message-ID: <Mailbird-f573586f-afa1-419b-bd78-f1b2f57ede1d@syrusdark.website>

Hi Karl,
What is the best way I can handle this? Are you saying that the packages are updated daily?(If not can I get when it is updated?) One thing which I can do is get the checksum directly from the mirror and check for it right??

I think of adding that zip file into the package instead of pulling from CTAN is that allowed by license? How often should I need to update it? Also, they(chocolatey reviewers) would verify whether the contents and checksum are matching and again its a problem.?

Thinking of the idea of verifying the checksum per mirror is nice but sometimes it did happen to me that both redirected to different mirror and caused problem. But I thing that can be handled need to think about it.

Another thing which @yihui told me is about this site?https://texlive.info/ in this comment https://github.com/yihui/tinytex/pull/236#issuecomment-689082993. And it seems that the site is more stable than CTAN. I need to know how official is that site.?

It is ok that you don't want to complicate by release on Github but all these problems will solve if you do that. Maybe a Github Actions would do but it is not that I am forcing you.

Regards,
Naveen


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200910/2fcc77a8/attachment.html>

From norbert at preining.info  Thu Sep 10 09:53:14 2020
From: norbert at preining.info (Norbert Preining)
Date: Thu, 10 Sep 2020 16:53:14 +0900
Subject: Issue Releated with Checksum on install-tl.zip
In-Reply-To: <Mailbird-f573586f-afa1-419b-bd78-f1b2f57ede1d@syrusdark.website>
References: <Mailbird-f573586f-afa1-419b-bd78-f1b2f57ede1d@syrusdark.website>
Message-ID: <20200910075314.GA16475@bulldog.preining.info>

Hi Naveen,

thanks for your work on packaging tinytex.

> What is the best way I can handle this? Are you saying that the packages are updated daily?(If not can I get when it is updated?) One thing which I can do is get the checksum directly from the mirror and check for it right??

Yes, we have practically daily package updates, according to the time
line Karl gave.

Yes, the .tar.xz are all checksummed and the checksums are saved in the
accompanying "texlive.tlpdb" (in tlpkg/texlive.tlpdb). There are Perl
modules to parse this file, but it is a simple stanza based key value
file.

> I think of adding that zip file into the package instead of pulling
> from CTAN is that allowed by license?

We don't provide zip files, though. Pulling from TeX Live is fine, also
license wise. CTAN might have packages that are not in TeX Live due to
more strict restrictions on redistribution. TeX Live contains stuff that
can be redistributed/repackaged/ ... This is what distributions like
Debian are doing.

> How often should I need to update it?

That depends on you ;-) For Debian I do more or less once a month a
checkout. But this is really up to your decision.

> Also, they(chocolatey reviewers) would verify whether the contents
> and checksum are matching and again its a problem.?

In this case I would recommend checking out from the TeX Live archive at
texlive.info, see
	https://texlive.info/
the files are in
	https://texlive.info/tlnet-archive/
That stays stable and doesn't change.

> Another thing which @yihui told me is about this site?https://texlive.info/
> in this comment https://github.com/yihui/tinytex/pull/236#issuecomment-689082993. And it seems that the site is more stable than CTAN. I need to know how official is that site.?

Well, it is managed by me. I am one of the maintainers of TeX Live.
I am also a board member of the TeX User Group TUG.
But it is not a server managed by TUG but by me.

So well, it is as official as any CTAN mirror ;-) Or even more.

> It is ok that you don't want to complicate by release on Github but all these problems will solve if you do that. Maybe a Github Actions would do but it is not that I am forcing you.

Impossible due to the sizes. We cannot even push our git repository
there, since it is something like 50Gb ...

Best

Norbert

--
PREINING Norbert                              https://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From naveen at syrusdark.website  Thu Sep 10 12:09:51 2020
From: naveen at syrusdark.website (Naveen M K)
Date: Thu, 10 Sep 2020 15:39:51 +0530
Subject: Issue Releated with Checksum on install-tl.zip
Message-ID: <458721599729289@mail.yandex.com>

Hi,
Thank you for answering @norbert, I did some weird thing. I asked them what to do(lol)? https://chocolatey.org/packages/tinytex and according I will do.

>Impossible due to the sizes. We cannot even push our git repository there, since it is something like 50Gb ...

Actually, I didn't ask you guys to make a git repository to upload those(that would be a miserable idea ever). You can create a release see https://docs.github.com/en/github/managing-large-files/distributing-large-binaries with a small condition on individual files being less than 2Gb. Also, I didn't ask the whole TexLive to be in a release, It was just the `install-tl.zip` in the repository https://github.com/TeX-Live/installer. You may consider to do it. So as I may easily set up a Github Action on TinyTeX Github Repo so as to update the package on every new release on Github. For example, you can see how I did the same in https://github.com/naveen521kk/au-packages for other packages though.

I find https://texlive.info/ very helpful. Also, I have questions on Debian Distribution. I also like to create a chocolatey package for TexLive (If I find some time to.)
- Does the Debian distribution is just like the script I wrote for TinyTeX or it is Binary which it downloads and then creates symlinks? If it is so, is it ok for me and @yihui to do so for TInyTeX? We will exclude the packages, which are not in Texlive. 
- If I could can I do the same which I did for TinyTeX for Texlive? Which is the best method to install? And how it is done in other OS(like Debian)?
- Does it include anything or it pulls from CTAN?

Thank you Karl and Norbert for your response.

Regards,
Naveen


From norbert at preining.info  Thu Sep 10 12:23:00 2020
From: norbert at preining.info (Norbert Preining)
Date: Thu, 10 Sep 2020 19:23:00 +0900
Subject: Issue Releated with Checksum on install-tl.zip
In-Reply-To: <458721599729289@mail.yandex.com>
References: <458721599729289@mail.yandex.com>
Message-ID: <20200910102300.GB16475@bulldog.preining.info>

Hi Naveen,

> Actually, I didn't ask you guys to make a git repository to upload
> those(that would be a miserable idea ever).
...
> It was just the `install-tl.zip` in the repository https://github.com/TeX-Live/installer.

Hmm, that is indeed automatically updated every N minutes (not sure at
the moment, this is also running via texlive.info ;-) We don't do
releases there, since again, these files change when they change, and
that would mean we would need to make releases every day.

But see below.

> I find https://texlive.info/ very helpful.

Why don't you take a fixed date install-tl.zip from there?

> Also, I have questions on Debian Distribution. I also like to create a chocolatey package for TexLive (If I find some time to.)

I think these are two very different things. TinyTeX installs only the
minimum and let tlmgr do the work. This is impossible on Debian since it
would interfere with the list of files (and checksums) installed by the
Debian package manager apt. So tlmgr is more or less disabled on Debian.

> - Does the Debian distribution is just like the script I wrote for
> TinyTeX or it is Binary which it downloads and then creates symlinks?

Not sure what you mean, but:
- all binaries are compiled on Debian build machines
- we don't use install-tl (because I know what needs to be done ;-)

I hope that answers your question.

> If it is so, is it ok for me and @yihui to do so for TInyTeX? We will exclude the packages, which are not in Texlive. 

What do you mean with "to do so for TinyTeX"? I don't understand - but
as I said in the previous email, you are free to do whatever you want
(more or less, at least with repackaging) with the TeX Live files.

> - If I could can I do the same which I did for TinyTeX for Texlive? Which is the best method to install? And how it is done in other OS(like Debian)?

That is a tricky question, and cannot be answered. I don't know
ChocolateWhatever (although I know a lot about chocolate, but the one I
eat!). In principle it depends on the requirements of your distribution.
Debian requires that all binaries are built on the Debian servers and
are only linked against Debian built libraries, so no binary
distribution like we do in TeX Live from TUG which ships binaries.

It really depends on your distribution's requirements.

> - Does it include anything or it pulls from CTAN?

The Debian packages contain all of TeX Live, split into Debian packages
along the collections of TeX Live. We don't pull anything from CTAN.

Best

Norbert

--
PREINING Norbert                              https://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From naveen at syrusdark.website  Thu Sep 10 19:57:37 2020
From: naveen at syrusdark.website (Naveen M K)
Date: Thu, 10 Sep 2020 23:27:37 +0530
Subject: Issue Releated with Checksum on install-tl.zip
In-Reply-To: <20200910102300.GB16475@bulldog.preining.info>
References: <458721599729289@mail.yandex.com>
 <20200910102300.GB16475@bulldog.preining.info>
Message-ID: <76641599759750@mail.yandex.com>

Hi Norbert,
Again thank you for replying me. Now I and @yihui have some plans on repacking the file we are going to download at runtime using `tlmgr` and also to avoid those weird popups.(You already told a fix for me thank you). Once we have repacked(planning to use Github Action) it we would just install that file and add those to paths and that would do the full thing. Also, it was because of your discussion I and also @yihui could come to know that we can repack it.  

> See FAQ 2 of https://yihui.org/tinytex/faq/ 
@yihui told me that when I first asked why didn't you pack the contents of TinyTex and also on reading the license file I was also like him.

One day, we should have a Chocolatey Package(https://chocolatey.org/) or scoop(https://github.com/lukesampson/scoop) for installing Texlive maybe just like how you did for Debian.

> Hmm, that is indeed automatically updated every N minutes (not sure at the moment, this is also running via texlive.info ;-)
Nice I noticed it. It was around one in 2 days. I wasn't expecting this though.

> Not sure what you mean, but:
> - all binaries are compiled on Debian build machines
> - we don't use install-tl (because I know what needs to be done ;-)
This should one day be done for Windows also. ;-)

> I don't know ChocolateWhatever (although I know a lot about chocolate, but the one I eat!).
To be frank it just installs the classic `exe


--?
Naveen 
@naveen521kk


From naveen at syrusdark.website  Thu Sep 10 20:04:43 2020
From: naveen at syrusdark.website (Naveen M K)
Date: Thu, 10 Sep 2020 23:34:43 +0530
Subject: Issue Releated with Checksum on install-tl.zip
In-Reply-To: <76641599759750@mail.yandex.com>
References: <458721599729289@mail.yandex.com>
 <20200910102300.GB16475@bulldog.preining.info>
 <76641599759750@mail.yandex.com>
Message-ID: <83521599760722@mail.yandex.com>


Hi,
I am very sorry about that last mail send half way due to some issues. I will continue here

> I don't know ChocolateWhatever (although I know a lot about chocolate, but the one I eat!).

To be frank it just installs the classic `exe` based installers using command line like how apt is for Linux and brew for Mac. It allows us to run powershell files `.ps1` files and by that way I created one and also it would be nice if there is one for TexLive also. 

> What do you mean with "to do so for TinyTeX"? I don't understand

By this I meant about redistributing and modifying Texlive.

With Love,
Naveen

From karl at freefriends.org  Thu Sep 10 23:53:05 2020
From: karl at freefriends.org (Karl Berry)
Date: Thu, 10 Sep 2020 15:53:05 -0600
Subject: Issue Releated with Checksum on install-tl.zip
In-Reply-To: <Mailbird-f573586f-afa1-419b-bd78-f1b2f57ede1d@syrusdark.website>
Message-ID: <202009102153.08ALr5Ld032765@freefriends.org>

    Thinking of the idea of verifying the checksum per mirror is nice
    but sometimes it did happen to me that both redirected to different
    mirror and caused problem. 

Norbert went to some trouble with tlmgr/install-tl so that once a ctan
mirror is chosen, the same mirror gets used for further downloads in a
given run. Letting a different ctan mirror be chosen for different files
is a recipe for failure.

Also, it would not be good for every tinytex user (or chocolatewhatever
user) to be downloading install-tl.zip (or anything else) directly from
tug.org. This is why ctan exists, to avoid overburdening any single
server. I'm not sure if this is what you are now thinking of doing, but
it kind of sounded like it, so thought I'd mention. --best, karl.

From norbert at preining.info  Fri Sep 11 05:19:24 2020
From: norbert at preining.info (Norbert Preining)
Date: Fri, 11 Sep 2020 12:19:24 +0900
Subject: Issue Releated with Checksum on install-tl.zip
In-Reply-To: <83521599760722@mail.yandex.com> <76641599759750@mail.yandex.com>
Message-ID: <20200911031924.GA148177@bulldog.preining.info>

Hi Naveen,

On Thu, 10 Sep 2020, Naveen M K wrote:
> Again thank you for replying me. Now I and @yihui have some plans on repacking
> the file we are going to download at runtime using `tlmgr` and also to avoid

Please use one of the CTAN mirrors for downloading, and not tug.org.

> One day, we should have a Chocolatey Package(https://chocolatey.org/) or

That is for WIndows, as far as I see.

> scoop(https://github.com/lukesampson/scoop) for installing Texlive 

That is for Linux. Just another package manger, besides there is already
homebrew/linuxbrew, nix, ... and I don't know how many others. I
wouldn't work on minor and hardly known/used package managers..

> > Hmm, that is indeed automatically updated every N minutes (not sure at the moment, this is also running via texlive.info ;-)
> Nice I noticed it. It was around one in 2 days. I wasn't expecting this though.

Every time we change something in the infrastructure (Perl modules) or
installer files, this package is updated.

> > I don't know ChocolateWhatever (although I know a lot about chocolate, but the one I eat!).
> 
> To be frank it just installs the classic `exe` based installers using command line like how apt is for Linux and brew for Mac. It allows us to run powershell files `.ps1` files and by that way I created one and also it would be nice if there is one for TexLive also. 

So a package manager for Windows. Sounds like a good idea, but only if
it also does proper "uninstall" support ;-)

> By this I meant about redistributing and modifying Texlive.

Sure, feel free!

Best

Norbert

--
PREINING Norbert                              https://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From naveen at syrusdark.website  Fri Sep 11 07:17:55 2020
From: naveen at syrusdark.website (Naveen M K)
Date: Fri, 11 Sep 2020 10:47:55 +0530
Subject: Creating a Chocolatey Package For TexLive
Message-ID: <100941599800051@mail.yandex.com>

Hi,
It would be good to have a Chocolatey Package(https://chocolatey.org/docs/getting-started#what-are-chocolatey-packages) as discussed in previous emails. Chocolatey is a NuGet based package manager for Windows. I recently created one(working on it) for TinyTex and had previous discussions on that.

> So a package manager for Windows. Sounds like a good idea, but only if it also does proper "uninstall" support ;-)
As Norbert said, yes it have proper support for it. There is a script that handles the uninstalls, it is called `chocolateyUninstall.ps1` a PowerShell script. More information about Creating chocolatey packages are https://chocolatey.org/docs/create-packages.
One thing which can be done is to make binaries so that everything is downloaded in one go and not live how `install-tl` does. But we should make sure that the checksums of files that are downloaded are correct because there are more strict on that and fail the installation if they don't match. (Discussed in the previous thread).

There are some naming conventions there. For example, if we were to create a package called `texlive` then the user can install the portable version if one exists using `texlive.portable` namespace.
After creating a package and publishing to them, the users would need to install chocolatey and the type `choco install texlive` for installing Texlive or `choco install texlive.portable` to install the portable version of Texlive. Possible the naming convention of package id as described https://chocolatey.org/docs/create-packages#naming-your-package would be to name as in other package managers(like apt). 

Also, the package itself can contain stuff that needs to be installed if we could make it out in 200MB(That's the max size of a chocolatey package). Or if it goes larger than that we can get from internet URL.

We can make it do its job automatically(We would need to specify where is should look for stuff). https://chocolatey.org/docs/automatic-packages.

I personally being a Windows user like to install using Chocolatey also I would be happy if texlive is installed through that.

Cheers,
Naveen 
@naveen521kk



From P.Taylor at Hellenic-Institute.Uk  Fri Sep 11 09:10:02 2020
From: P.Taylor at Hellenic-Institute.Uk (Philip Taylor)
Date: Fri, 11 Sep 2020 08:10:02 +0100
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <100941599800051@mail.yandex.com>
References: <100941599800051@mail.yandex.com>
Message-ID: <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>

An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200911/e0c14a01/attachment.html>

From zdenek.wagner at gmail.com  Fri Sep 11 10:26:55 2020
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 11 Sep 2020 10:26:55 +0200
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
Message-ID: <CAC1phyYFR-QR4fsmXv_D3+skMNE-Zh2Ta8aKvf0BYqhmh6DH5g@mail.gmail.com>

Hi,

I fully agree with Phil, why it is good? And yet another devil's
comment: you write that the maximum size of the package is 200 MB but
the size of texlive-full is approx. 8 GB. And if a small part is
udated, will the user have to upgrade texlive as such or incrementally
just the modified part? Remember that TeX Live is a collection of
packages with a common infrastructure. If I upgrade my package as an
author and upload it to CTAN and then it goes to TeX Live. This means
that the individual packages have releases, the new infrastructure of
TeX Live is released once a year.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

p? 11. 9. 2020 v 9:10 odes?latel Philip Taylor
<P.Taylor at hellenic-institute.uk> napsal:
>
>
> Naveen M K wrote:
>
> It would be good to have a Chocolatey Package(https://chocolatey.org/docs/getting-started#what-are-chocolatey-packages) as discussed in previous emails.
>
> May I play Devil's Advocate and ask why you claim "it would be good to have a Chocolatey Package [for TeX Live]" ?  What problems do you find with the present installer, and would you not agree that if the current installer is sub-optimal then the obvious alternative (as far as TeX Live for Microsoft Windows is concerned) would be to re-write the installer as an MSI ("Microsoft Installer") file, with all the benefits that that would bring, including, of course, full support for uninstalling (Start / Control Panel / Programs and Features / Uninstall or change a program) ?
>
> I personally being a Windows user like to install using Chocolatey also I would be happy if texlive is installed through that.
>
> I too am a Windows user (Windows 7 Enterprise, 64-bit, multiple instantiations) and can see no benefits to choosing Chocolatey at all, when compared to MSI.
>
> Philip Taylor


From naveen at syrusdark.website  Fri Sep 11 11:33:26 2020
From: naveen at syrusdark.website (Naveen M K)
Date: Fri, 11 Sep 2020 15:03:26 +0530
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <CAC1phyYFR-QR4fsmXv_D3+skMNE-Zh2Ta8aKvf0BYqhmh6DH5g@mail.gmail.com>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <CAC1phyYFR-QR4fsmXv_D3+skMNE-Zh2Ta8aKvf0BYqhmh6DH5g@mail.gmail.com>
Message-ID: <184031599815603@mail.yandex.com>

Hi,

> And yet another devil's
> comment: you write that the maximum size of the package is 200 MB but
> the size of texlive-full is approx. 8 GB. And if a small part is
> udated, will the user have to upgrade texlive as such or incrementally
> just the modified part?

That 200MB limit is for amount of content inside the package included in it while we are free to download how much ever we want from the internet(CTAN).

> Remember that TeX Live is a collection of
> packages with a common infrastructure. If I upgrade my package as an
> author and upload it to CTAN and then it goes to TeX Live. This means
> that the individual packages have releases, the new infrastructure of
> TeX Live is released once a year.

The release can be changed once a month as it is done on Debian by @Norbert. He said in previous email that those are updated once a month or so.

> ?May I play Devil's Advocate and ask why you claim "it would be good to have a Chocolatey Package [for TeX Live]" ? What problems do you find with the present installer, and would you not agree that if the current installer is sub-optimal then the obvious alternative (as far as TeX Live for Microsoft Windows is concerned) would be to re-write the installer as an MSI ("Microsoft Installer") file, with all the benefits that that would bring, including, of course, full support for uninstalling (Start / Control Panel / Programs and Features / Uninstall or change a program) ?

The main issue I face with the current installer is that it doesn't have an uninstaller. Creating an MSI would be nice and yes if it is done then creating the package would be as simple as installing that MSI. 


> ?I too am a Windows user (Windows 7 Enterprise, 64-bit, multiple instantiations) and can see no benefits to choosing Chocolatey at all, when compared to MSI.

I like to do things in the command line(Don't ask me why you are not using Linux, sorry) and that's why I like chocolatey. I am not here to argue whether to use it.

The reason I created the thread is that there should be pre-compiled binaries rather than those compiled in the user's computer and also making the installation fast enough instead of using install-tl as did in Debian.


--?
Naveen 


From siepo at bitmuis.nl  Fri Sep 11 12:23:54 2020
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Fri, 11 Sep 2020 12:23:54 +0200
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <184031599815603@mail.yandex.com>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <CAC1phyYFR-QR4fsmXv_D3+skMNE-Zh2Ta8aKvf0BYqhmh6DH5g@mail.gmail.com>
 <184031599815603@mail.yandex.com>
Message-ID: <20200911102354.GA3103@bitmuis.nl>

On Fri, Sep 11, 2020 at 03:03:26PM +0530, Naveen M K wrote:
> Hi,
> 
> > And yet another devil's
> > comment: you write that the maximum size of the package is 200 MB but
> > the size of texlive-full is approx. 8 GB. And if a small part is
> > udated, will the user have to upgrade texlive as such or incrementally
> > just the modified part?
> 
> That 200MB limit is for amount of content inside the package included in it while we are free to download how much ever we want from the internet(CTAN).
> 
> > Remember that TeX Live is a collection of
> > packages with a common infrastructure. If I upgrade my package as an
> > author and upload it to CTAN and then it goes to TeX Live. This means
> > that the individual packages have releases, the new infrastructure of
> > TeX Live is released once a year.
> 
> The release can be changed once a month as it is done on Debian by @Norbert. He said in previous email that those are updated once a month or so.
> 
> > ?May I play Devil's Advocate and ask why you claim "it would be good to have a Chocolatey Package [for TeX Live]" ? What problems do you find with the present installer, and would you not agree that if the current installer is sub-optimal then the obvious alternative (as far as TeX Live for Microsoft Windows is concerned) would be to re-write the installer as an MSI ("Microsoft Installer") file, with all the benefits that that would bring, including, of course, full support for uninstalling (Start / Control Panel / Programs and Features / Uninstall or change a program) ?
> 
> The main issue I face with the current installer is that it
> doesn't have an uninstaller. Creating an MSI would be nice and yes
> if it is done then creating the package would be as simple as
> installing that MSI. 

There is an uninstaller: for a single-user install it is a TL menu
item and for an admin install TL shows up under Apps and can be
uninstalled from there. Both invoke
<tlroot>/tlpkg/installer/uninst.bat, which can be invoked from the
command-line if you wish.

Individual packages can be installed and uninstalled with tlmgr or
via the gui tlshell.

-- 
Siep Kroonenberg

From P.Taylor at Hellenic-Institute.Uk  Fri Sep 11 12:55:08 2020
From: P.Taylor at Hellenic-Institute.Uk (Philip Taylor)
Date: Fri, 11 Sep 2020 11:55:08 +0100
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <184031599815603@mail.yandex.com>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <CAC1phyYFR-QR4fsmXv_D3+skMNE-Zh2Ta8aKvf0BYqhmh6DH5g@mail.gmail.com>
 <184031599815603@mail.yandex.com>
Message-ID: <06d83cf8-ca45-4a55-5367-649df6156fda@Hellenic-Institute.Uk>

An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200911/b5660ae6/attachment.html>

From zdenek.wagner at gmail.com  Fri Sep 11 13:37:11 2020
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 11 Sep 2020 13:37:11 +0200
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <06d83cf8-ca45-4a55-5367-649df6156fda@Hellenic-Institute.Uk>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <CAC1phyYFR-QR4fsmXv_D3+skMNE-Zh2Ta8aKvf0BYqhmh6DH5g@mail.gmail.com>
 <184031599815603@mail.yandex.com>
 <06d83cf8-ca45-4a55-5367-649df6156fda@Hellenic-Institute.Uk>
Message-ID: <CAC1phyYpABBM4roMP+jFro62pDFw3QNq-sA_2UAx5EA-sVXVxw@mail.gmail.com>

p? 11. 9. 2020 v 12:55 odes?latel Philip Taylor
<P.Taylor at hellenic-institute.uk> napsal:
>
>
> Naveen M K wrote:
>
> The reason I created the thread is that there should be pre-compiled binaries rather than those compiled in the user's computer [...]
>
> There are pre-compiled binaries ? I use nothing else.  Whilst, when I was a VMS user, I would regard compiling a program from source as the most natural way to do things, with MS Windows I expect pre-compiled binaries and would have no wish whatsoever to compile someone else's program[s], tho' I might very occasionally want to compile my own.
>
The problem in TeX Live is that the programs are not written just in
one programming language. I do not mind compiling someone else's
programs but I do not have all tools installed so that I am not able
to compile the whole TeX Live. I do not like to install tools just for
TeX Live compilation if I do not use them for my work, thus I am happy
that I can install precompiled binaries even in Linux.

> ** Phil.


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz


From reinhard.kotucha at web.de  Sat Sep 12 01:14:46 2020
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 12 Sep 2020 01:14:46 +0200
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <CAC1phyYpABBM4roMP+jFro62pDFw3QNq-sA_2UAx5EA-sVXVxw@mail.gmail.com>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <CAC1phyYFR-QR4fsmXv_D3+skMNE-Zh2Ta8aKvf0BYqhmh6DH5g@mail.gmail.com>
 <184031599815603@mail.yandex.com>
 <06d83cf8-ca45-4a55-5367-649df6156fda@Hellenic-Institute.Uk>
 <CAC1phyYpABBM4roMP+jFro62pDFw3QNq-sA_2UAx5EA-sVXVxw@mail.gmail.com>
Message-ID: <24412.1254.37899.534800@gargle.gargle.HOWL>

On 2020-09-11 at 13:37:11 +0200, Zdenek Wagner wrote:

 > The problem in TeX Live is that the programs are not written just
 > in one programming language. I do not mind compiling someone else's
 > programs but I do not have all tools installed so that I am not
 > able to compile the whole TeX Live. I do not like to install tools
 > just for TeX Live compilation if I do not use them for my work,
 > thus I am happy that I can install precompiled binaries even in
 > Linux.

All programs you have to compile are written in C or C++ and there is
no need to install any tools which don't exist already on your system.

If you can compile an abitrary program with

  ./configure && make && make install

you can compile TeX Live as well.  In order to compile Xindy more
effort is required because you have to install a Common Lisp engine.

But I agree with you that the preferred way is to simply install TeX
Live from

  http://tug.org/texlive/

I'm also convinced that most users don't need the latest stuff and the
best they can do is to rely on the TeX Live version provided by their
Linux distribution.

Regards,
  Reinhard

--
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From zdenek.wagner at gmail.com  Sat Sep 12 14:45:55 2020
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sat, 12 Sep 2020 14:45:55 +0200
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <24412.1254.37899.534800@gargle.gargle.HOWL>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <CAC1phyYFR-QR4fsmXv_D3+skMNE-Zh2Ta8aKvf0BYqhmh6DH5g@mail.gmail.com>
 <184031599815603@mail.yandex.com>
 <06d83cf8-ca45-4a55-5367-649df6156fda@Hellenic-Institute.Uk>
 <CAC1phyYpABBM4roMP+jFro62pDFw3QNq-sA_2UAx5EA-sVXVxw@mail.gmail.com>
 <24412.1254.37899.534800@gargle.gargle.HOWL>
Message-ID: <CAC1phyZ56Vcj1+cgNxpSSv0GAmk+QktbJZLcrQfJewFxM_UbDA@mail.gmail.com>

so 12. 9. 2020 v 1:14 odes?latel Reinhard Kotucha
<reinhard.kotucha at web.de> napsal:
>
> On 2020-09-11 at 13:37:11 +0200, Zdenek Wagner wrote:
>
>  > The problem in TeX Live is that the programs are not written just
>  > in one programming language. I do not mind compiling someone else's
>  > programs but I do not have all tools installed so that I am not
>  > able to compile the whole TeX Live. I do not like to install tools
>  > just for TeX Live compilation if I do not use them for my work,
>  > thus I am happy that I can install precompiled binaries even in
>  > Linux.
>
> All programs you have to compile are written in C or C++ and there is
> no need to install any tools which don't exist already on your system.
>
Isn't TeX written in web? This would need tangle and pascal to C as well.

> If you can compile an abitrary program with
>
>   ./configure && make && make install
>
I am afraid it works neither in Linux nor in Windows. Linux can be
installed without C compilers, it happened to me in CentOS 8. Windows
do not have bash, GNU make, GNU C/C++, it has to be downloaded and
installed.

> you can compile TeX Live as well.  In order to compile Xindy more
> effort is required because you have to install a Common Lisp engine.
>
Yes, I do not have it hence I am not able to compile xindy,

> But I agree with you that the preferred way is to simply install TeX
> Live from
>
>   http://tug.org/texlive/
>
Preferably from mirrors.ctan.org because it finds a mirror located 3
kilometers from me and our institute is on the same backbone.

> I'm also convinced that most users don't need the latest stuff and the
> best they can do is to rely on the TeX Live version provided by their
> Linux distribution.
>
I agree. In addition, it is always possible that a package upgrade
will not be compatible with an older version, therefore I never
upgrade in a middle of an important project.

> Regards,
>   Reinhard
>

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz


> --
> ------------------------------------------------------------------
> Reinhard Kotucha                            Phone: +49-511-3373112
> Marschnerstr. 25
> D-30167 Hannover                    mailto:reinhard.kotucha at web.de
> ------------------------------------------------------------------


From zarniwhoop at ntlworld.com  Sat Sep 12 16:42:31 2020
From: zarniwhoop at ntlworld.com (Ken Moffat)
Date: Sat, 12 Sep 2020 15:42:31 +0100
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <CAC1phyZ56Vcj1+cgNxpSSv0GAmk+QktbJZLcrQfJewFxM_UbDA@mail.gmail.com>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <CAC1phyYFR-QR4fsmXv_D3+skMNE-Zh2Ta8aKvf0BYqhmh6DH5g@mail.gmail.com>
 <184031599815603@mail.yandex.com>
 <06d83cf8-ca45-4a55-5367-649df6156fda@Hellenic-Institute.Uk>
 <CAC1phyYpABBM4roMP+jFro62pDFw3QNq-sA_2UAx5EA-sVXVxw@mail.gmail.com>
 <24412.1254.37899.534800@gargle.gargle.HOWL>
 <CAC1phyZ56Vcj1+cgNxpSSv0GAmk+QktbJZLcrQfJewFxM_UbDA@mail.gmail.com>
Message-ID: <20200912144231.GB24015@llamedos.localdomain>

On Sat, Sep 12, 2020 at 02:45:55PM +0200, Zdenek Wagner wrote:
> so 12. 9. 2020 v 1:14 odes?latel Reinhard Kotucha
> <reinhard.kotucha at web.de> napsal:
> >
> > All programs you have to compile are written in C or C++ and there is
> > no need to install any tools which don't exist already on your system.
> >
> Isn't TeX written in web? This would need tangle and pascal to C as well.
> 

Texlive uses web2c, I have built texlive several times without
either of those programs.  For xindy: as well as clisp, perl is also
required.

> > If you can compile an abitrary program with
> >
> >   ./configure && make && make install
> >
> I am afraid it works neither in Linux nor in Windows. Linux can be
> installed without C compilers, it happened to me in CentOS 8. Windows
> do not have bash, GNU make, GNU C/C++, it has to be downloaded and
> installed.
> 

Yes, if you install linux without compilers (or without development
files, i.e. headers) then you are reliant on binaries.  Such a
minimal install can probably be done from any linux distro.

?en
-- 
I could not live without Champagne.  In victory I deserve it, in
defeat I need it.  -- Churchill

From reinhard.kotucha at web.de  Sat Sep 12 22:06:59 2020
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 12 Sep 2020 22:06:59 +0200
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <CAC1phyZ56Vcj1+cgNxpSSv0GAmk+QktbJZLcrQfJewFxM_UbDA@mail.gmail.com>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <CAC1phyYFR-QR4fsmXv_D3+skMNE-Zh2Ta8aKvf0BYqhmh6DH5g@mail.gmail.com>
 <184031599815603@mail.yandex.com>
 <06d83cf8-ca45-4a55-5367-649df6156fda@Hellenic-Institute.Uk>
 <CAC1phyYpABBM4roMP+jFro62pDFw3QNq-sA_2UAx5EA-sVXVxw@mail.gmail.com>
 <24412.1254.37899.534800@gargle.gargle.HOWL>
 <CAC1phyZ56Vcj1+cgNxpSSv0GAmk+QktbJZLcrQfJewFxM_UbDA@mail.gmail.com>
Message-ID: <24413.10851.711710.912967@gargle.gargle.HOWL>

On 2020-09-12 at 14:45:55 +0200, Zdenek Wagner wrote:

 > so 12. 9. 2020 v 1:14 odes?latel Reinhard Kotucha
 > <reinhard.kotucha at web.de> napsal:
 > >
 > > On 2020-09-11 at 13:37:11 +0200, Zdenek Wagner wrote:
 > >
 > >  > The problem in TeX Live is that the programs are not written just
 > >  > in one programming language. I do not mind compiling someone else's
 > >  > programs but I do not have all tools installed so that I am not
 > >  > able to compile the whole TeX Live. I do not like to install tools
 > >  > just for TeX Live compilation if I do not use them for my work,
 > >  > thus I am happy that I can install precompiled binaries even in
 > >  > Linux.
 > >
 > > All programs you have to compile are written in C or C++ and there is
 > > no need to install any tools which don't exist already on your system.
 > >
 > Isn't TeX written in web? This would need tangle and pascal to C as well.

Hi Zden?k,
Ken thankfully answered this question.  BTW, tangle is part of the
sources and is compiled first, before the other programs are compiled.

 > > If you can compile an abitrary program with
 > >
 > >   ./configure && make && make install
 > >
 > I am afraid it works neither in Linux nor in Windows. Linux can be
 > installed without C compilers, it happened to me in CentOS
 > 8. Windows do not have bash, GNU make, GNU C/C++, it has to be
 > downloaded and installed.

I always install a minimal Linux and add missing packages later.  I
don't want to install and update packages I never use. But it happens
quite often that I have to install software which isn't supported by
the distribution.  So former or later I have to install autoconf and
gcc anyway.

For Windows see

   http://www.mingw.org/

 > > you can compile TeX Live as well.  In order to compile Xindy more
 > > effort is required because you have to install a Common Lisp
 > > engine.
 > >
 > Yes, I do not have it hence I am not able to compile xindy,
 > 
 > > But I agree with you that the preferred way is to simply install
 > > TeX Live from
 > >
 > >   http://tug.org/texlive/
 > >
 > Preferably from mirrors.ctan.org because it finds a mirror located
 > 3 kilometers from me and our institute is on the same backbone.

Of course.  Bad wording.  What I meant is to install TL which is
maintained at tug.org.  You can't install TL from tug.org anyway.

 > > I'm also convinced that most users don't need the latest stuff
 > > and the best they can do is to rely on the TeX Live version
 > > provided by their Linux distribution.
 > >
 > I agree. In addition, it is always possible that a package upgrade
 > will not be compatible with an older version, therefore I never
 > upgrade in a middle of an important project.

TeX Live creates backups whenever a newer version of a package is
installed.  If you feel that this is still too insecure you can
install an up-to-date TeX Live on an other machine.  You are using
Subversion, so it's not a big deal to run your project on different
machines.

The more important your project is, the more important it is to make
sure that it also works with future versions of TeX Live.  But this
can only be accomplished if you report problems to the developers as
soon as possible.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From norbert at preining.info  Sun Sep 13 03:21:28 2020
From: norbert at preining.info (Norbert Preining)
Date: Sun, 13 Sep 2020 10:21:28 +0900
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
Message-ID: <20200913012128.GB196801@bulldog.preining.info>

Hi Phil,

>    May I play Devil's Advocate and ask why you claim "it would be good to
>    have a Chocolatey Package [for TeX Live]" ?  What problems do you find

Simple answer: why not? If there is someone interested, let them invest
their time and energy, even if you don't use it.

>    Live for Microsoft Windows is concerned) would be to re-write the
>    installer as an MSI ("Microsoft Installer") file, with all the benefits

I am waiting anxiously on your contribution for a MacTeX style Windows
MSI installer. Phil, that would be for once time well spent from your
side ...

>    uninstalling (Start / Control Panel / Programs and Features / Uninstall
>    or change a program) ?

All of which are present in the current installer, too ... maybe you
might take another look?

Best

Norbert

--
PREINING Norbert                              https://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From P.Taylor at Hellenic-Institute.Uk  Sun Sep 13 09:35:48 2020
From: P.Taylor at Hellenic-Institute.Uk (Philip Taylor)
Date: Sun, 13 Sep 2020 08:35:48 +0100
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <20200913012128.GB196801@bulldog.preining.info>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <20200913012128.GB196801@bulldog.preining.info>
Message-ID: <3a918913-59ef-9423-6395-3491ca1169af@Hellenic-Institute.Uk>

An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200913/d5f4a9cb/attachment.html>

From norbert at preining.info  Sun Sep 13 09:57:05 2020
From: norbert at preining.info (Norbert Preining)
Date: Sun, 13 Sep 2020 07:57:05 +0000 (UTC)
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <3a918913-59ef-9423-6395-3491ca1169af@Hellenic-Institute.Uk>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <20200913012128.GB196801@bulldog.preining.info>
 <3a918913-59ef-9423-6395-3491ca1169af@Hellenic-Institute.Uk>
Message-ID: <2aea8105-85c2-4cb7-a121-a5cd243aad10@preining.info>

Phil,

Thanks for your valuable contribution about evaluating my reading abilities. Obviously my level was good enough to become university professor, but it seems it is still far away from your abilities.

Humbly I return to my study room.

Best

Norbert
-- 
PREINING Norbert????????????????????????????? https://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13?? fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

Sep 13, 2020 16:35:49 Philip Taylor <P.Taylor at Hellenic-Institute.Uk>:

> Norbert Preining wrote:
> 
>>> May I play Devil's Advocate and ask why you claim "it would be good to have a Chocolatey Package [for TeX Live]" ?  What problems do you find
>> Simple answer: why not? If there is someone interested, let them invest their time and energy, even if you don't use it.
> Two points ? 1) I asked why Naveen claimed "it would be good to have a Chocolatey Package [for TeX Live]", not why you feel is is.? 2) IMHO it is far better to challenge someone at the outset if you think that they may be mistaken, rather than leave their assertions unchallenged.? Ask yourself "what is the probability that anyone other than Naveen will ever use a Chocolatey package to install TeX Live", and I think you will find that the answer if "few if any".? Far better, then, to try to gently steer Naveen away from what is likely to prove a complete waste of time rather than tacitly encourage her to waste her valuable time producing something in which there is likely to be little or no interest.
> 
>>> Live for Microsoft Windows is concerned) would be to re-write the installer as an MSI ("Microsoft Installer") file, with all the benefits
>> I am waiting anxiously on your contribution for a MacTeX style Windows MSI installer.
> No you are not, Norbert.? You know that, I know that, every reader of this list knows that, so why waste your time posturing ?? If you had bothered to read what I had written, rather than just quote phrases out of context, you would have seen that I wrote "[...] would you not agree that if the current installer is sub-optimal then the obvious alternative [...] would be to re-write the installer as an MSI ("Microsoft Installer") file".? Note in particular "if the current installer is sub-optimal".
> 
>>> uninstalling (Start / Control Panel / Programs and Features / Uninstall or change a program) ?
>> All of which are present in the current installer, too ... maybe you might take another look?
> Maybe, Norbert, you really need to learn to read.? The reference to uninstalling was clearly a response to Naveen's "The main issue I face with the current installer is that it doesn't have an uninstaller. Creating an MSI would be nice and yes if it is done then creating the package would be as simple as installing that MSI".? Note that it was Naveen who claimed that the current installer does not have an uninstaller, not I.
> 
> Philip Taylor
> 


From P.Taylor at Hellenic-Institute.Uk  Sun Sep 13 11:57:32 2020
From: P.Taylor at Hellenic-Institute.Uk (Philip Taylor)
Date: Sun, 13 Sep 2020 10:57:32 +0100
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <2aea8105-85c2-4cb7-a121-a5cd243aad10@preining.info>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <20200913012128.GB196801@bulldog.preining.info>
 <3a918913-59ef-9423-6395-3491ca1169af@Hellenic-Institute.Uk>
 <2aea8105-85c2-4cb7-a121-a5cd243aad10@preining.info>
Message-ID: <a504eda9-f411-2c67-c245-fd97c1d55c95@Hellenic-Institute.Uk>

An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200913/5ac34c12/attachment.html>

From naveen at syrusdark.website  Sun Sep 13 14:15:48 2020
From: naveen at syrusdark.website (Naveen M K)
Date: Sun, 13 Sep 2020 17:45:48 +0530
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <20200913012128.GB196801@bulldog.preining.info>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <20200913012128.GB196801@bulldog.preining.info>
Message-ID: <354831599998549@mail.yandex.com>


Hi Norbert,

> All of which are present in the current installer, too ... maybe you might take another look?
Yeah, I noticed it. It is documented here also. http://tug.org/texlive/doc/texlive-en/texlive-en.html#x1-460006

I think creating a chocolatey would be very easy. Just need to create a profile appropriately and then install using that.
I plan to create packages just like in Debian, for example, it is `texlive-full`, `texlive-basic` and so on. (I would be very happy if you give me a list).

But I don't know how to call the uninstaller. I can use https://chocolatey.org/docs/helpers-get-uninstall-registry-key to get the registry key and locate where is the uninstaller, provided if it is written there. Also, will the uninstaller be an `exe` or `msi` file as it supports only that(If not I should need to call manually.). If you could help me out there I may do the rest of the works. I will do the rest very easily. If needed for any files we can use https://chocolatey.org/docs/features-shim  for any bath script. (I don't think it is necessary though).


Regards,
Naveen 
@naveen521kk


From naveen at syrusdark.website  Sun Sep 13 17:33:47 2020
From: naveen at syrusdark.website (Naveen M K)
Date: Sun, 13 Sep 2020 21:03:47 +0530
Subject: Creating a Chocolatey Package For TexLive
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
Message-ID: <253121600010214@mail.yandex.com>

An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200913/26dd3196/attachment.html>

From Alois.Steindl at tuwien.ac.at  Sun Sep 13 18:33:59 2020
From: Alois.Steindl at tuwien.ac.at (Alois Steindl)
Date: Sun, 13 Sep 2020 18:33:59 +0200
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <354831599998549@mail.yandex.com>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <20200913012128.GB196801@bulldog.preining.info>
 <354831599998549@mail.yandex.com>
Message-ID: <3a726eff-8513-66e5-a84f-4fb4828d8727@tuwien.ac.at>

Hello,
although I could imagine that Norbert will not like my input, I will 
give it a try.
 From these questions I conclude, that you do not yet have a good basic 
knowledge about the involved structure and it is - in my humble opinion 
- quite sure that the created benefit will be negligible. But of course 
you are free to try it and you will certainly find some person(s) here 
who will be eager to tell you everything you need to know.
My recommendation would be to search for some significantly easier task.
Good luck
Alois
Am 13.09.2020 um 14:15 schrieb Naveen M K:
> Hi Norbert,
>
>> All of which are present in the current installer, too ... maybe you might take another look?
> Yeah, I noticed it. It is documented here also. http://tug.org/texlive/doc/texlive-en/texlive-en.html#x1-460006
>
> I think creating a chocolatey would be very easy. Just need to create a profile appropriately and then install using that.
> I plan to create packages just like in Debian, for example, it is `texlive-full`, `texlive-basic` and so on. (I would be very happy if you give me a list).
>
> But I don't know how to call the uninstaller. I can use https://chocolatey.org/docs/helpers-get-uninstall-registry-key to get the registry key and locate where is the uninstaller, provided if it is written there. Also, will the uninstaller be an `exe` or `msi` file as it supports only that(If not I should need to call manually.). If you could help me out there I may do the rest of the works. I will do the rest very easily. If needed for any files we can use https://chocolatey.org/docs/features-shim  for any bath script. (I don't think it is necessary though).
>
>
> Regards,
> Naveen
> @naveen521kk


From P.Taylor at Hellenic-Institute.Uk  Sun Sep 13 18:52:39 2020
From: P.Taylor at Hellenic-Institute.Uk (Philip Taylor)
Date: Sun, 13 Sep 2020 17:52:39 +0100
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <253121600010214@mail.yandex.com>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <253121600010214@mail.yandex.com>
Message-ID: <3f9fec57-6dfa-4443-b61a-52103e2bd804@Hellenic-Institute.Uk>

An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200913/9c6fee09/attachment.html>

From siepo at bitmuis.nl  Sun Sep 13 21:41:32 2020
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Sun, 13 Sep 2020 21:41:32 +0200
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <354831599998549@mail.yandex.com>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <20200913012128.GB196801@bulldog.preining.info>
 <354831599998549@mail.yandex.com>
Message-ID: <20200913194132.GA5146@bitmuis.nl>

On Sun, Sep 13, 2020 at 05:45:48PM +0530, Naveen M K wrote:
> 
> Hi Norbert,
> 
> > All of which are present in the current installer, too ... maybe
> > you might take another look?

> Yeah, I noticed it. It is documented here also.
> http://tug.org/texlive/doc/texlive-en/texlive-en.html#x1-460006


> I think creating a chocolatey would be very easy. Just need to
> create a profile appropriately and then install using that.

> I plan to create packages just like in Debian, for example, it is
> `texlive-full`, `texlive-basic` and so on. (I would be very happy
> if you give me a list).

> But I don't know how to call the uninstaller. I can use
> https://chocolatey.org/docs/helpers-get-uninstall-registry-key to
> get the registry key and locate where is the uninstaller, provided
> if it is written there. Also, will the uninstaller be an `exe` or
> `msi` file as it supports only that(If not I should need to call
> manually.). If you could help me out there I may do the rest of
> the works. I will do the rest very easily. If needed for any files
> we can use https://chocolatey.org/docs/features-shim  for any bath
> script. (I don't think it is necessary though).

I already told you: it is simply a batchfile
<tlroot>/tlpkg/installer/uninst.bat

Please take a look at the Perl installer code (<tlroot>/install-tl)
and try to understand all the work it is doing, including
interfacing with the package database and running post-processing
code.

-- 
Siep Kroonenberg

From siepo at bitmuis.nl  Sun Sep 13 21:47:15 2020
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Sun, 13 Sep 2020 21:47:15 +0200
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <24413.10851.711710.912967@gargle.gargle.HOWL>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <CAC1phyYFR-QR4fsmXv_D3+skMNE-Zh2Ta8aKvf0BYqhmh6DH5g@mail.gmail.com>
 <184031599815603@mail.yandex.com>
 <06d83cf8-ca45-4a55-5367-649df6156fda@Hellenic-Institute.Uk>
 <CAC1phyYpABBM4roMP+jFro62pDFw3QNq-sA_2UAx5EA-sVXVxw@mail.gmail.com>
 <24412.1254.37899.534800@gargle.gargle.HOWL>
 <CAC1phyZ56Vcj1+cgNxpSSv0GAmk+QktbJZLcrQfJewFxM_UbDA@mail.gmail.com>
 <24413.10851.711710.912967@gargle.gargle.HOWL>
Message-ID: <20200913194715.GB5146@bitmuis.nl>

On Sat, Sep 12, 2020 at 10:06:59PM +0200, Reinhard Kotucha wrote:
> On 2020-09-12 at 14:45:55 +0200, Zdenek Wagner wrote:
> 
>  > so 12. 9. 2020 v 1:14 odes?latel Reinhard Kotucha
>  > <reinhard.kotucha at web.de> napsal:
>  > >
>  > > On 2020-09-11 at 13:37:11 +0200, Zdenek Wagner wrote:
>  > >
> For Windows see
> 
>    http://www.mingw.org/

mingw-w64 (https://sourceforge.net/projects/mingw-w64/) is nowadays
the gcc port to use. The msys2 project (https://www.msys2.org/)
provides a bash- and autotools environment for windows.

-- 
Siep Kroonenberg

From norbert at preining.info  Sun Sep 13 22:20:18 2020
From: norbert at preining.info (Norbert Preining)
Date: Mon, 14 Sep 2020 05:20:18 +0900
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <3a726eff-8513-66e5-a84f-4fb4828d8727@tuwien.ac.at>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <20200913012128.GB196801@bulldog.preining.info>
 <354831599998549@mail.yandex.com>
 <3a726eff-8513-66e5-a84f-4fb4828d8727@tuwien.ac.at>
Message-ID: <20200913202018.GC25404@burischnitzel.preining.info>

Hi Alois,

> although I could imagine that Norbert will not like my input, I will give it

Not at all.

> From these questions I conclude, that you do not yet have a good basic
> knowledge about the involved structure and it is - in my humble opinion -

That looks like, but the best way to actually learn it is doing
something. My first "contact" with the internals of TeX Live was 
packaging it for Debian - and that was 15+ years ago, so obviously it
worked out ;-)

Best

Norbert

--
PREINING Norbert                              https://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From maximilian.noethe at tu-dortmund.de  Mon Sep 14 11:42:30 2020
From: maximilian.noethe at tu-dortmund.de (=?UTF-8?Q?Maximilian_N=c3=b6the?=)
Date: Mon, 14 Sep 2020 11:42:30 +0200
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <3f9fec57-6dfa-4443-b61a-52103e2bd804@Hellenic-Institute.Uk>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <253121600010214@mail.yandex.com>
 <3f9fec57-6dfa-4443-b61a-52103e2bd804@Hellenic-Institute.Uk>
Message-ID: <76675fdc-b33e-2f9b-7c0c-f888fe251395@tu-dortmund.de>

There are Windows machines that are only accessible via a command-line 
or are not accessible
at all but are automatically steered.

CI/CD Servers are just one example of those.
These require unattended, no-gui ways to install? software.

So please, just accept that some people do have the need for this, even 
if you cannot see it.

On 13.09.20 18:52, Philip Taylor wrote:
>
> Fair enough, Naveen, but personally I cannot see why one would /want/ 
> to install LaTeX using the command-line.? The 
> "Install-TL-{Advanced|Windows}.bat" files are all I ever use, and I 
> launch one or the other from Windows Explorer by right-clicking and 
> selecting "Run as administrator".? I then perform a full install, even 
> though I use less than 0.01% of the files installed.? I have been 
> doing this since 2008, if not earlier (I have archives only going back 
> to 2018, but may well have been installing it before that).? It may be 
> worth mentioning that for speed of installation I first "rsynch" the 
> entire TeX Live installation suite to an SSD and then install from 
> there rather than pulling files one by one from the net.
>
> /Philip Taylor
> --------/
> Naveen M K wrote:
>
>> I don't think what you are saying is True. I personally know many 
>> people use chocolatey, especially installing MikTex, but many fail, I 
>> don't know why. At first many windows users don't know about TexLive, 
>> and always seek to Miktex. Now here, that's not the problem. The main 
>> problem is that LaTex can't be installed easily on Windows using 
>> command line. Say for example you are running GitHub Actions, will 
>> the UI be any help for you, will you be able to install LaTeX for 
>> testing there? Currently it would, be difficult and you would need to 
>> have some experience on TexLive and only then you can install it by 
>> creating profiles and using tlmgr. I exactly faced this difficulty 
>> when I took the responsibility for testing Manim, 
>> https://github.com/manimcommunity/manim which depends on LaTeX. It 
>> took me a week's time searching for alternatives and finally I found 
>> TinyTex where he provided a script to install TexLive. After that, I 
>> read some docs of TexLive (People usually won't do this), and only 
>> then I came to know that it can be installed using command line. I 
>> have seen many projects failed to test on windows because they could 
>> install LaTeX. Here, the Chocolatey package would be very helpful ( 
>> All CI has chocolatey installed). So creating it may potentially help 
>> many projects to test their projects, on Windows. That's the reason I 
>> was very interested on this because I have a *good* heart that others 
>> should not feel the pain I faced.
>> Best,
>> Naveen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200914/4b6f601b/attachment-0001.html>

From P.Taylor at Hellenic-Institute.Uk  Mon Sep 14 14:07:31 2020
From: P.Taylor at Hellenic-Institute.Uk (Philip Taylor)
Date: Mon, 14 Sep 2020 13:07:31 +0100
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <76675fdc-b33e-2f9b-7c0c-f888fe251395@tu-dortmund.de>
References: <100941599800051@mail.yandex.com>
 <583cfc51-8f8a-4977-3711-bc04905acf1f@Hellenic-Institute.Uk>
 <253121600010214@mail.yandex.com>
 <3f9fec57-6dfa-4443-b61a-52103e2bd804@Hellenic-Institute.Uk>
 <76675fdc-b33e-2f9b-7c0c-f888fe251395@tu-dortmund.de>
Message-ID: <8badd281-b648-637a-118e-b2ca05ced4dc@Hellenic-Institute.Uk>

An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200914/8035bec6/attachment.html>

From naveen at syrusdark.website  Wed Sep 16 11:48:14 2020
From: naveen at syrusdark.website (Naveen M K)
Date: Wed, 16 Sep 2020 15:18:14 +0530
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <100941599800051@mail.yandex.com>
References: <100941599800051@mail.yandex.com>
Message-ID: <232431600247783@mail.yandex.com>

Hi,
 I started working on the choco aka chocolatey package. Soon, after doing some amount of content I will make a Github Repo.
Some questions:
1. What should be the Package id? And how many packages to create?
  Chocolatey states this,
> If the software is cross-platform, attempt to use the same id as the debian/rpm package(s) if possible.
  So what are the packages I should create/what is the id for it? ID is something people use with chocolatey like below
```cmd
choco install <id-here>
```

2. What should be the version? If I am right should it be 2020? How often it should change? I plan to include `install-tl.zip` inside the choco pack. So how often should I update it? And also the version?

3. What can be possibly the title name? I suggest `TexLive (Install)`.

4. What should be the authors' fields? Possibly `TeX Live Developers` or should I include some names? The maximum allowed here is 1500 characters.

5. What should be the Icon? Can I make a copy of this icon in my git repo where I maintain this package and hyperlink it?

6. What should be the Copyright?

7. What is the License URL? Is this https://www.tug.org/texlive/copying.html?

8. What is the docs URL for this? Should it be installation Docs?

9. Where are the release notes located?

10. Where is the bug tracker URL? Is it the mailing list?

Some Implementation I planned.
=========================

I plan to call the `install-tl` using `-no-gui` or `-text` mode and pass a profile. If we were to do a single package unlike Debian, I will allow the user to select the type of installation using a package parameter. https://chocolatey.org/docs/helpers-get-package-parameters. What can be defaulted to install? Possibly full? 

Chocolatey doesn't allow packages to write in the Program Files directory so it will write to Tools Directory located usually in `C:\tools\texlive`. Is that any problem? I will change it using the `TEXDIR` parameter in the profile. Anything else should I change in profile?

About Updating, what should be done before a user updates TexLive? Any directory to remove?

About Uninstalling TexLive, where is the uninstall script located? (Sorry for repeatedly asking). Is the uninstall script written in the Registry? (If yes, I can get it easily using https://chocolatey.org/docs/helpers-get-uninstall-registry-key and also what should be the name to search? Possibly `texlive*`).

Usually, all the executables (exe files) will be shimmed see https://chocolatey.org/docs/features-shim should this be disabled?
Also, should I need to create a shim for `tlmgr` https://chocolatey.org/docs/helpers-install-bin-file because it is a batch script right(This gets the least precedence in command prompt so possibly shimming to an exe file can solve that issue)?

I hope I will find answers to these.

Regards,
Naveen M K



From naveen at syrusdark.website  Wed Sep 16 16:27:13 2020
From: naveen at syrusdark.website (Naveen M K)
Date: Wed, 16 Sep 2020 19:57:13 +0530
Subject: Issue on Running `tlmgr path add`
Message-ID: <351121600265896@mail.yandex.com>

Hi,

I have an infra-only installation along with some packages installed with what I need also a portable one. (Just like TinyTeX). When I run 
`C:\texlive\bin\win32\tlmgr.bat path add` 
I get an error message saying
`Use of uninitialized value in bitwise or (|) at C:\tools\TinyTeX\texmf-dist\scripts\texlive\tlmgr.pl line 1510.`
And Powershell Shows an Error message because of this. But the exit code is 0. And the path is added. Can this be fixed?

Sorry, I don't know Perl so I can't help.

Btw, this failed the TinyTex chocolatey package verification see https://gist.github.com/choco-bot/e8fb921cb9f38b137a656ddd89bbc9fd#file-install-txt-L8702
and that's the main reason for the support request.
-- 
Naveen 
@naveen521kk



From norbert at preining.info  Wed Sep 16 16:47:00 2020
From: norbert at preining.info (Norbert Preining)
Date: Wed, 16 Sep 2020 23:47:00 +0900
Subject: Issue on Running `tlmgr path add`
In-Reply-To: <351121600265896@mail.yandex.com>
References: <351121600265896@mail.yandex.com>
Message-ID: <20200916144700.GA364879@bulldog.preining.info>

On Wed, 16 Sep 2020, Naveen M K wrote:
> `Use of uninitialized value in bitwise or (|) at C:\tools\TinyTeX\texmf-dist\scripts\texlive\tlmgr.pl line 1510.`
> And Powershell Shows an Error message because of this. But the exit code is 0. And the path is added. Can this be fixed?

This is strange, the code is basically (with some if (win32())...
removed):
    my $ret = $F_OK;
    .....
	$ret |= TeXLive::TLUtils::w32_add_to_path(
		$localtlpdb->root . "/bin/win32",
		$winadminmode);
1510	$ret |= TeXLive::TLWinGoo::broadcast_env();

Where line 1510 is the line indicated. $ret should not be uninitialized,
and broadcast_env should also return something reasonable.

Can you chnage line 1510 to
	my $broad_result = TeXLive::TLWinGoo::broadcast_env();
	print("ret = >>$ret<<, broadcast result = >>$broad_result<<\n");
	$ret |= $broad_result;
and let me know what it says?

Maybe it is a problem in the "broadcast_env()" call.

Thanks

Norbert

--
PREINING Norbert                              https://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From naveen at syrusdark.website  Wed Sep 16 16:57:28 2020
From: naveen at syrusdark.website (Naveen M K)
Date: Wed, 16 Sep 2020 20:27:28 +0530
Subject: Issue on Running `tlmgr path add`
In-Reply-To: <20200916144700.GA364879@bulldog.preining.info>
References: <351121600265896@mail.yandex.com>
 <20200916144700.GA364879@bulldog.preining.info>
Message-ID: <337921600268190@mail.yandex.com>

Hi Norbert,
This is what happens https://ibb.co/gjmgLMK 

Use of uninitialized value $broad_result in concatenation (.) or string at E:\Ti
nyTex\TinyTex\TinyTeX\texmf-dist\scripts\texlive\tlmgr.pl line 1511.
ret = >>0<<, broadcast result = >><<
Use of uninitialized value $broad_result in bitwise or (|) at E:\TinyTex\TinyTex
\TinyTeX\texmf-dist\scripts\texlive\tlmgr.pl line 1512.

https://pastebin.com/MpQYkcKS

Sorry, If I have pasted anything wrong.

PS> I didn't have the previous one to copy.
--?
Naveen 
@naveen521kk


From norbert at preining.info  Wed Sep 16 17:10:45 2020
From: norbert at preining.info (Norbert Preining)
Date: Thu, 17 Sep 2020 00:10:45 +0900
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <232431600247783@mail.yandex.com>
References: <100941599800051@mail.yandex.com> <232431600247783@mail.yandex.com>
Message-ID: <20200916151045.GB364879@bulldog.preining.info>

Hi Naveen,

lots of questions, and it is late here in JST ..

> 1. What should be the Package id? And how many packages to create?
>   Chocolatey states this,
> > If the software is cross-platform, attempt to use the same id as the debian/rpm package(s) if possible.
>   So what are the packages I should create/what is the id for it? ID is something people use with chocolatey like below
> ```cmd
> choco install <id-here>
> ```

This is a decision you have to take. Depending on the distribution,
different packaging approaches can be done:
- split on TeX Live package level (Fedora, SuSE ?)
- split on TeX Live collection level (Debian and derivatives)
- don't split, ship all in one

I don't really understand your packaging efforts, but I think, since you
use install-tl, that splitting at collection level is the best way.
But even that doesn't work for you, or does it? I am not sure about how
multiple packages installing into the same directory are treated in
choco. (The files are the texlive-infra stuff that is installed in any
case when calling install-tl).

> 2. What should be the version? If I am right should it be 2020? How often it should change? I plan to include `install-tl.zip` inside the choco pack. So how often should I update it? And also the version?

In Debian I use
	YYYY.YYYYMMDD
where the first YYYY is the release number of TeX Live (2018, 2019,
2020), and the second in YYYYMMDD is the day I took the tlnet mirror.

SO I can have
	2020.20210214
as version number, since it is a TeX Live 2020 release, with tlnet
checkout on 2021-02-14.

> 3. What can be possibly the title name? I suggest `TexLive (Install)`.

"TeX Live Installer" sounds fine.

> 4. What should be the authors' fields? Possibly `TeX Live Developers` or should I include some names? The maximum allowed here is 1500 characters.

No specific names are needed IMNSHO, just put TeX Live Developers or TeX
Live Team into it.

> 5. What should be the Icon? Can I make a copy of this icon in my git repo where I maintain this package and hyperlink it?

You can use whatever icon you find. If you need help, I made some square
and rounded ones.

> 6. What should be the Copyright?

Cannot be stated trivially, since it is an agglomeration of thousands
of packages.

> 7. What is the License URL? Is this https://www.tug.org/texlive/copying.html?

Yes, that sounds reasonable.

> 8. What is the docs URL for this? Should it be installation Docs?

https://www.tug.org/texlive/doc.html

> 9. Where are the release notes located?

https://www.tug.org/texlive/doc/texlive-en/texlive-en.html#x1-700009

> 10. Where is the bug tracker URL? Is it the mailing list?

The mailing list.

> I plan to call the `install-tl` using `-no-gui` or `-text` mode and pass a profile. If we were to do a single package unlike Debian, I will allow the user to select the type of installation using a package parameter. https://chocolatey.org/docs/helpers-get-package-parameters. What can be defaulted to install? Possibly full? 

Yes, I *strongly* suggest to install full TeX Live per default. This is
also the default we are using in our installer.

> Chocolatey doesn't allow packages to write in the Program Files directory so it will write to Tools Directory located usually in `C:\tools\texlive`. Is that any problem?

Not at all, in fact that is perfect. In general we recommend *NOT* using
directories with spaces in the full path (like "c:\Program Files" etc),
so c:\tools\texlive is definitely perfect. Maybe use
	c:\tools\texlive\YYYY/
?

>I will change it using the `TEXDIR` parameter in the profile. Anything else should I change in profile?

Nothing else is necessary. The default is c:\texlive on Windows, so if
you switch to c:\tools\texlive only the mentioned parameter needs to
be set.

> About Updating, what should be done before a user updates TexLive? Any directory to remove?

What kind of updates? There are a few options:
- updates using tlmgr
- updates using choco

> About Uninstalling TexLive, where is the uninstall script located? (Sorry for repeatedly asking). Is the uninstall script written in the Registry? (If yes, I can get it easily using https://chocolatey.org/docs/helpers-get-uninstall-registry-key and also what should be the name to search? Possibly `texlive*`).

Why don't you ***read*** the answers Siep gave? She pointed at the
complete and correct location. Please use the archives.

> Usually, all the executables (exe files) will be shimmed see https://chocolatey.org/docs/features-shim should this be disabled?

No idea, please try it out. Our installer already adds the bin directory
to the PATH of the user or system (depending on install mode), though.
This is something you have to check.

> Also, should I need to create a shim for `tlmgr` https://chocolatey.org/docs/helpers-install-bin-file because it is a batch script right(This gets the least precedence in command prompt so possibly shimming to an exe file can solve that issue)?

Again, no idea. The .bat file does the magic of updating tlmgr when
	tlmgr update --self
is called. Not sure how this will be integrated with choc.

Lots of questions, I tried to answer as much as possible. Good luck!

Norbert

--
PREINING Norbert                              https://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From norbert at preining.info  Wed Sep 16 17:16:20 2020
From: norbert at preining.info (Norbert Preining)
Date: Thu, 17 Sep 2020 00:16:20 +0900
Subject: Issue on Running `tlmgr path add`
In-Reply-To: <337921600268190@mail.yandex.com>
References: <351121600265896@mail.yandex.com>
 <20200916144700.GA364879@bulldog.preining.info>
 <337921600268190@mail.yandex.com>
Message-ID: <20200916151620.GC364879@bulldog.preining.info>

> Use of uninitialized value $broad_result in concatenation (.) or string at E:\Ti
> nyTex\TinyTex\TinyTeX\texmf-dist\scripts\texlive\tlmgr.pl line 1511.
> ret = >>0<<, broadcast result = >><<

So that means that
	TeXLive::TLWinGoo::broadcast_env()
does not return a proper return value. And indeed, reading the code it
doesn't do any proper return value handling.

Siep: anyting we can do here? Return 0|1 for failure|success or similar?
Sorry, I simply cannot understand what is going on in this function with
all the Windows stuff.

If not, I will just drop the |= call.

Best

Norbert

--
PREINING Norbert                              https://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From zdenek.wagner at gmail.com  Wed Sep 16 17:34:42 2020
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 16 Sep 2020 17:34:42 +0200
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <20200916151045.GB364879@bulldog.preining.info>
References: <100941599800051@mail.yandex.com> <232431600247783@mail.yandex.com>
 <20200916151045.GB364879@bulldog.preining.info>
Message-ID: <CAC1phybseOHK4zqxiCN7USvG3bemeww1bjvFMf0z34y_w9tzDQ@mail.gmail.com>

Hi Naveen,

justy a note: the release notes and bug tracker refer to the TeX Live
infrastructure, not to the individual packages. It is the same as with
licenses.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

st 16. 9. 2020 v 17:10 odes?latel Norbert Preining
<norbert at preining.info> napsal:
>
> Hi Naveen,
>
> lots of questions, and it is late here in JST ..
>
> > 1. What should be the Package id? And how many packages to create?
> >   Chocolatey states this,
> > > If the software is cross-platform, attempt to use the same id as the debian/rpm package(s) if possible.
> >   So what are the packages I should create/what is the id for it? ID is something people use with chocolatey like below
> > ```cmd
> > choco install <id-here>
> > ```
>
> This is a decision you have to take. Depending on the distribution,
> different packaging approaches can be done:
> - split on TeX Live package level (Fedora, SuSE ?)
> - split on TeX Live collection level (Debian and derivatives)
> - don't split, ship all in one
>
> I don't really understand your packaging efforts, but I think, since you
> use install-tl, that splitting at collection level is the best way.
> But even that doesn't work for you, or does it? I am not sure about how
> multiple packages installing into the same directory are treated in
> choco. (The files are the texlive-infra stuff that is installed in any
> case when calling install-tl).
>
> > 2. What should be the version? If I am right should it be 2020? How often it should change? I plan to include `install-tl.zip` inside the choco pack. So how often should I update it? And also the version?
>
> In Debian I use
>         YYYY.YYYYMMDD
> where the first YYYY is the release number of TeX Live (2018, 2019,
> 2020), and the second in YYYYMMDD is the day I took the tlnet mirror.
>
> SO I can have
>         2020.20210214
> as version number, since it is a TeX Live 2020 release, with tlnet
> checkout on 2021-02-14.
>
> > 3. What can be possibly the title name? I suggest `TexLive (Install)`.
>
> "TeX Live Installer" sounds fine.
>
> > 4. What should be the authors' fields? Possibly `TeX Live Developers` or should I include some names? The maximum allowed here is 1500 characters.
>
> No specific names are needed IMNSHO, just put TeX Live Developers or TeX
> Live Team into it.
>
> > 5. What should be the Icon? Can I make a copy of this icon in my git repo where I maintain this package and hyperlink it?
>
> You can use whatever icon you find. If you need help, I made some square
> and rounded ones.
>
> > 6. What should be the Copyright?
>
> Cannot be stated trivially, since it is an agglomeration of thousands
> of packages.
>
> > 7. What is the License URL? Is this https://www.tug.org/texlive/copying.html?
>
> Yes, that sounds reasonable.
>
> > 8. What is the docs URL for this? Should it be installation Docs?
>
> https://www.tug.org/texlive/doc.html
>
> > 9. Where are the release notes located?
>
> https://www.tug.org/texlive/doc/texlive-en/texlive-en.html#x1-700009
>
> > 10. Where is the bug tracker URL? Is it the mailing list?
>
> The mailing list.
>
> > I plan to call the `install-tl` using `-no-gui` or `-text` mode and pass a profile. If we were to do a single package unlike Debian, I will allow the user to select the type of installation using a package parameter. https://chocolatey.org/docs/helpers-get-package-parameters. What can be defaulted to install? Possibly full?
>
> Yes, I *strongly* suggest to install full TeX Live per default. This is
> also the default we are using in our installer.
>
> > Chocolatey doesn't allow packages to write in the Program Files directory so it will write to Tools Directory located usually in `C:\tools\texlive`. Is that any problem?
>
> Not at all, in fact that is perfect. In general we recommend *NOT* using
> directories with spaces in the full path (like "c:\Program Files" etc),
> so c:\tools\texlive is definitely perfect. Maybe use
>         c:\tools\texlive\YYYY/
> ?
>
> >I will change it using the `TEXDIR` parameter in the profile. Anything else should I change in profile?
>
> Nothing else is necessary. The default is c:\texlive on Windows, so if
> you switch to c:\tools\texlive only the mentioned parameter needs to
> be set.
>
> > About Updating, what should be done before a user updates TexLive? Any directory to remove?
>
> What kind of updates? There are a few options:
> - updates using tlmgr
> - updates using choco
>
> > About Uninstalling TexLive, where is the uninstall script located? (Sorry for repeatedly asking). Is the uninstall script written in the Registry? (If yes, I can get it easily using https://chocolatey.org/docs/helpers-get-uninstall-registry-key and also what should be the name to search? Possibly `texlive*`).
>
> Why don't you ***read*** the answers Siep gave? She pointed at the
> complete and correct location. Please use the archives.
>
> > Usually, all the executables (exe files) will be shimmed see https://chocolatey.org/docs/features-shim should this be disabled?
>
> No idea, please try it out. Our installer already adds the bin directory
> to the PATH of the user or system (depending on install mode), though.
> This is something you have to check.
>
> > Also, should I need to create a shim for `tlmgr` https://chocolatey.org/docs/helpers-install-bin-file because it is a batch script right(This gets the least precedence in command prompt so possibly shimming to an exe file can solve that issue)?
>
> Again, no idea. The .bat file does the magic of updating tlmgr when
>         tlmgr update --self
> is called. Not sure how this will be integrated with choc.
>
> Lots of questions, I tried to answer as much as possible. Good luck!
>
> Norbert
>
> --
> PREINING Norbert                              https://www.preining.info
> Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From siepo at bitmuis.nl  Wed Sep 16 20:51:22 2020
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Wed, 16 Sep 2020 20:51:22 +0200
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <20200916151045.GB364879@bulldog.preining.info>
References: <100941599800051@mail.yandex.com> <232431600247783@mail.yandex.com>
 <20200916151045.GB364879@bulldog.preining.info>
Message-ID: <20200916185122.GA4794@bitmuis.nl>

On Thu, Sep 17, 2020 at 12:10:45AM +0900, Norbert Preining wrote:
> 
> > 5. What should be the Icon? Can I make a copy of this icon in my git repo where I maintain this package and hyperlink it?
> 
> You can use whatever icon you find. If you need help, I made some square
> and rounded ones.

I uploaded the vector source of tlmgr.ico to the subversion
repository, in Master/source/tlgui/

> > About Uninstalling TexLive, where is the uninstall script located? (Sorry for repeatedly asking). Is the uninstall script written in the Registry? (If yes, I can get it easily using https://chocolatey.org/docs/helpers-get-uninstall-registry-key and also what should be the name to search? Possibly `texlive*`).
> 
> Why don't you ***read*** the answers Siep gave? She pointed at the
> complete and correct location. Please use the archives.

The windows uninstaller, <root>/tlpkg/installer/uninst.bat, is
generated during postinstall. Note that
<root>/tlpkg/TeXLive/TLWinGoo.pm is the module with windows-specific
subs.

-- 
Siep Kroonenberg

From naveen at syrusdark.website  Wed Sep 16 21:14:48 2020
From: naveen at syrusdark.website (Naveen M K)
Date: Thu, 17 Sep 2020 00:44:48 +0530
Subject: Creating a Chocolatey Package For TexLive
References: <100941599800051@mail.yandex.com> <232431600247783@mail.yandex.com>
 <20200916151045.GB364879@bulldog.preining.info>
Message-ID: <332231600271156@mail.yandex.com>

HI Norbert,

About id, my plan is create packages like `texlive-full`, `texlive-basic`, texlive-infra` and so on, with each scheme name. That would be easiest thing for me and `texlive` would install `texlive-full` if that is ok. This is something I need to think about. I will say exactly when I confirm.

> I am not sure about how
multiple packages installing into the same directory are treated in
choco.

They don't like it much. Maybe, I will let it take the default value. But let me try here. This is gonna be a trial and error game.

> You can use whatever icon you find. If you need help, I made some square
and rounded ones.
I appreciate if you give me any good icon. Something more fitting may be round. I find this http://tug.org/svn/texlive/trunk/Master/source/tlgui/tlmgr.svg?revision=56355&view=co thanks seipo.

> Cannot be stated trivially, since it is an agglomeration of thousands
of packages.
What can I put in that field? 

> Maybe use
	c:\tools\texlive\YYYY/
?
I think this can be done. But when a user upgrades the package, chocolatey wipes that directory by default, is that any problem?

> What kind of updates? There are a few options:
- updates using tlmgr
- updates using choco

I am asking about updates using choco. What should be done if the user update? Should it reinstall everything? Should it wipe all the previous data?
Here, chocolatey first run a script before starting to modify it and then again runs the install script. So what should the `beforemodify` script contain?
Updates using `tlmgr` can be done by user and not in scope of this.

> justy a note: the release notes and bug tracker refer to the TeX Live
infrastructure, not to the individual packages. It is the same as with
licenses.
I think what Nobert told was good to enter because it is for the infrastructure right?

---------
Regards,
Naveen




From naveen at syrusdark.website  Thu Sep 17 08:11:37 2020
From: naveen at syrusdark.website (Naveen M K)
Date: Thu, 17 Sep 2020 11:41:37 +0530
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <20200916151045.GB364879@bulldog.preining.info>
References: <100941599800051@mail.yandex.com> <232431600247783@mail.yandex.com>
 <20200916151045.GB364879@bulldog.preining.info>
Message-ID: <374041600321856@mail.yandex.com>

Hi Norbert,

I need help on getting all the collection defined in some machine understandable way(Say JSON). I see https://github.com/TeX-Live/installer/blob/master/install-tl#L2969-L2977 where it says, 
> Schemes and collections (and packages) are ultimately defined by the files in the C<tlpkg/tlpsrc/> source directory.

Where I couldn't find such a directory either in that repo  https://github.com/TeX-Live/installer. Can you help me over here? 
Or is it in SVN repo? 

Another question, can the profile contain,  scheme and also collection be defined? Or there should be only one of two? What takes more priority between the two(scheme or collection)? The docs https://github.com/TeX-Live/installer/blob/master/install-tl#L2953-L2955 makes this unclear to me.

I thought about the chocolatey package yesterday night, I yes, splitting, do not do good I think(Single package would be better). Instead provide users option for collection and scheme. I will update the package https://github.com/naveen521kk/chocolatey-texlive. 

Regards,
Naveen

From norbert at preining.info  Thu Sep 17 10:40:19 2020
From: norbert at preining.info (Norbert Preining)
Date: Thu, 17 Sep 2020 17:40:19 +0900
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <374041600321856@mail.yandex.com>
References: <100941599800051@mail.yandex.com> <232431600247783@mail.yandex.com>
 <20200916151045.GB364879@bulldog.preining.info>
 <374041600321856@mail.yandex.com>
Message-ID: <20200917084019.GD385312@bulldog.preining.info>

Hi Naveen,

> I need help on getting all the collection defined in some machine understandable way(Say JSON). I see https://github.com/TeX-Live/installer/blob/master/install-tl#L2969-L2977 where it says, 
> > Schemes and collections (and packages) are ultimately defined by the files in the C<tlpkg/tlpsrc/> source directory.
> 
> Where I couldn't find such a directory either in that repo  https://github.com/TeX-Live/installer. Can you help me over here? 
> Or is it in SVN repo? 

Yes, it is in the svn repo, but you can get it in many ways, the list of
collections you could get with
	tlmgr info --json collections
and schemata
	tlmgr info --json schemes
Or you just download the texlive.tlpdb from tlnet, and then do
	grep ^name collection- texlive.tlpdb
to get the list of collections and similarly with scheme- for schemata.

> Another question, can the profile contain,  scheme and also collection be defined?

Both can be used. scheme selects the group of collections required by
that scheme, and additional collections can be added via collection
entries.

> Or there should be only one of two? What takes more priority between the two(scheme or collection)? The docs https://github.com/TeX-Live/installer/blob/master/install-tl#L2953-L2955 makes this unclear to me.

Since there is no way to *disable* a collection there is no priority
issue, a collection is included either because the selected scheme
includes it or it is directly specified.

Best

Norbert

--
PREINING Norbert                              https://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From naveen at syrusdark.website  Thu Sep 17 10:56:50 2020
From: naveen at syrusdark.website (Naveen M K)
Date: Thu, 17 Sep 2020 14:26:50 +0530
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <20200917084019.GD385312@bulldog.preining.info>
References: <100941599800051@mail.yandex.com> <232431600247783@mail.yandex.com>
 <20200916151045.GB364879@bulldog.preining.info>
 <374041600321856@mail.yandex.com>
 <20200917084019.GD385312@bulldog.preining.info>
Message-ID: <412251600332307@mail.yandex.com>

Hi,
I started testing how the uninstaller works and how chocolatey handles it https://github.com/naveen521kk/chocolatey-texlive/runs/1127477266?check_suite_focus=true#step:5:34.(You may need to log in using Github to view).

By default chocolatey checks for things written in registry and saves it. Then when user uninstalls it executes the uninstall string written to registry. Ref. https://chocolatey.org/docs/helpers-uninstall-chocolatey-package#description

I tried to imitate similarly in gh-actions here https://github.com/naveen521kk/chocolatey-texlive/runs/1127477266 but it hung up and still running. It's nothing much but getting from registry uninstall string and running it. Why it hung up? Did I do anything wrong?

> Or you just download the texlive.tlpdb from tlnet, and then do
        grep ^name collection- texlive.tlpdb
I will follow this method.

> Both can be used. scheme selects the group of collections required by
that scheme, and additional collections can be added via collection
entries.

I will make arrangment so users can specify what to be installed.

I am nearing to complete this. Maybe a few question more ?.
Regards,
Naveen

From pablgonz at educarchile.cl  Thu Sep 17 17:34:03 2020
From: pablgonz at educarchile.cl (=?UTF-8?Q?Pablo_Gonz=C3=A1lez_L?=)
Date: Thu, 17 Sep 2020 12:34:03 -0300
Subject: How to adjust the $TEXMFCNF variable not to interfere with ConText?
Message-ID: <CANeU4n8augqXH_0iVZQ3WYLh+kC-xKEXi_QO=jpn7tvRZNQ-+Q@mail.gmail.com>

Hello, some time ago I asked for something similar
(https://tug.org/pipermail/tex-live/2019-October/044188.html) and I know that
the problem occurs when I set the variable $TEXMFCNF, as a reproduction of my
question (under TeX Live 2020, fedora 32):

## Part 1, all OK
$ kpsewhich -var-brace-value=TEXMFCNF
/usr/local/texlive/2020/bin/x86_64-linux:/usr/local/texlive/2020/bin/x86_64-linux/share/texmf-local/web2c:/usr/local/texlive/2020/bin/x86_64-linux/share/texmf-dist/web2c:/usr/local/texlive/2020/bin/x86_64-linux/share/texmf/web2c:/usr/local/texlive/2020/bin/x86_64-linux/texmf-local/web2c:/usr/local/texlive/2020/bin/x86_64-linux/texmf-dist/web2c:/usr/local/texlive/2020/bin/x86_64-linux/texmf/web2c:/usr/local/texlive/2020/bin:/usr/local/texlive/2020/bin/share/texmf-local/web2c:/usr/local/texlive/2020/bin/share/texmf-dist/web2c:/usr/local/texlive/2020/bin/share/texmf/web2c:/usr/local/texlive/2020/bin/texmf-local/web2c:/usr/local/texlive/2020/bin/texmf-dist/web2c:/usr/local/texlive/2020/bin/texmf/web2c:/usr/local/texlive/texmf-local/web2c:/usr/local/texlive/2020:/usr/local/texlive/2020/share/texmf-local/web2c:/usr/local/texlive/2020/share/texmf-dist/web2c:/usr/local/texlive/2020/share/texmf/web2c:/usr/local/texlive/2020/texmf-local/web2c:/usr/local/texlive/2020/texmf-dist/web2c:/usr/local/texlive/2020/texmf/web2c

$ context --nofile --once

resolvers       | formats | executing runner 'run luatex format':
/usr/local/texlive/2020/bin/x86_64-linux/luatex --jobname="cont-nop"
--fmt=/home/pablo/.texlive2020/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/formats/luatex/cont-en.fmt
--lua=/home/pablo/.texlive2020/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/formats/luatex/cont-en.lui
cont-nop.mkiv --c:currentrun=1 --c:fulljobname="cont-nop.mkiv"
--c:input="cont-nop.mkiv" --c:kindofrun=3 --c:maxnofruns=1 --c:nofile
--c:once --c:texmfbinpath="/usr/local/texlive/2020/bin/x86_64-linux"
This is LuaTeX, Version 1.12.0 (TeX Live 2020)
 system commands enabled.
open source     > level 1, order 1, name
'/usr/local/texlive/2020/texmf-dist/tex/context/base/mkiv/cont-nop.mkiv'
system          >
system          > ConTeXt  ver: 2020.03.10 14:44 MKIV beta  fmt:
2020.8.28  int: english/english
system          >
system          > 'cont-new.mkiv' loaded
open source     > level 2, order 2, name
'/usr/local/texlive/2020/texmf-dist/tex/context/base/mkiv/cont-new.mkiv'
system          > beware: some patches loaded from cont-new.mkiv
close source    > level 2, order 2, name
'/usr/local/texlive/2020/texmf-dist/tex/context/base/mkiv/cont-new.mkiv'
system          > files > jobname 'cont-nop', input 'cont-nop.mkiv',
result 'cont-nop'
fonts           > latin modern fonts are not preloaded
languages       > language 'en' is active
system          > loading dummy replacement for jobname
system          > invalid \starttext ... \stoptext structure
fonts           > beware: no fonts are loaded yet, using 'lm mono' in box
close source    > level 1, order 2, name
'/usr/local/texlive/2020/texmf-dist/tex/context/base/mkiv/cont-nop.mkiv'

mkiv lua stats  > used config file:
selfautoparent:/texmfcnf.lua;selfautoparent:/texmf-dist/web2c/texmfcnf.lua
mkiv lua stats  > used cache path: readable+writable:
'/home/pablo/.texlive2020/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9'
mkiv lua stats  > resource resolver: loadtime 0.276 seconds, 1 scans
with scantime 0.003 seconds, 0 shared scans, 7 found files, scanned
paths: /home/pablo/texmf
mkiv lua stats  > stored bytecode data: 450 modules (0.662 sec), 93
tables (0.030 sec), 543 chunks (0.692 sec)
mkiv lua stats  > traced context: maxstack: 1398, freed: 0, unreachable: 1398
mkiv lua stats  > cleaned up reserved nodes: 53 nodes, 9 lists of 442
mkiv lua stats  > node memory usage: 8 attribute, 3 attribute_list, 2
glue, 51 glue_spec, 2 kern, 2 penalty, 2 temp, 2 user_defined
mkiv lua stats  > node list callback tasks: 8 unique task lists, 1
instances (re)created, 2 calls
mkiv lua stats  > used backend: pdf (backend for directly generating pdf output)
mkiv lua stats  > jobdata time: 0.001 seconds saving, 0.001 seconds loading
mkiv lua stats  > callbacks: internal: 34, file: 61, direct: 2, late:
0, function 61, total: 158
mkiv lua stats  > randomizer: resumed with value 0.95072731096298
mkiv lua stats  > result saved in file: cont-nop.pdf, compresslevel 3,
objectcompresslevel 1
mkiv lua stats  > loaded patterns: en::1, load time: 0.000
mkiv lua stats  > loaded fonts: 1 files: lmmono10-regular.otf
mkiv lua stats  > font engine: otf 3.111, afm 1.513, tfm 1.000, 1
instances, load time 0.019 seconds
mkiv lua stats  > used platform: linux-64, type: unix, binary subtree: bin
mkiv lua stats  > used engine: luatex version: 1.12, functionality
level: 7306, banner: this is luatex, version 1.12.0 (tex live 2020)
mkiv lua stats  > control sequences: 44135 of 65536 + 100000
mkiv lua stats  > lua properties: engine: lua 5.3, used memory: 119
MB, ctx: 119 MB, max: unknown MB, hash chars: min(64,40), symbol mask:
utf (???)
mkiv lua stats  > runtime: 0.704 seconds
system          | total runtime: 1.230 seconds

$ tlmgr conf auxtrees --conffile /home/pablo/texmf/texmf.cnf show
tlmgr: no auxiliary texmf trees defined.

$ tlmgr conf auxtrees --conffile /home/pablo/texmf/texmf.cnf add
~/ltxcole/stycole/
$ tlmgr conf auxtrees --conffile /home/pablo/texmf/texmf.cnf show
List of auxiliary texmf trees:
  /home/pablo/ltxcole/stycole/

$ cat /home/pablo/texmf/texmf.cnf
TEXMFAUXTREES = /home/pablo/ltxcole/stycole/,

Up to that point everything is fine, but, in addition:

## Part 2, not OK :(
$ export TEXMFCNF='~/texmf:'
$ kpsewhich -var-brace-value=TEXMFCNF
/home/pablo/texmf:

$ context --nofile --once
mtxrun          | forcing cache reload
resolvers       | resolving | looking for regular 'texmfcnf.lua' on
weird path '$HOME/texmf:' from specification '$HOME/texmf:'
resolvers       | resolving | looking for fallback 'contextcnf.lua' on
weird path '$HOME/texmf:' from specification '$HOME/texmf:'
resolvers       | resolving |
resolvers       | resolving | warning: no lua configuration files found
resolvers       | resolving | no texmf paths are defined (using TEXMF)
resolvers       | resolving |
mtxrun          | the resolver databases are not present or outdated
resolvers       | resolving | using suffix based filetype 'lua'
resolvers       | resolving | remembering file 'mtx-context.lua' using
hash 'lua::mtx-context.lua'
resolvers       | resolving | using suffix based filetype 'lua'
resolvers       | resolving | remembering file 'mtx-contexts.lua'
using hash 'lua::mtx-contexts.lua'
resolvers       | resolving | remembered file 'mtx-context.lua'
resolvers       | resolving | using suffix based filetype 'lua'
resolvers       | resolving | remembering file 'mtx-t-context.lua'
using hash 'lua::mtx-t-context.lua'
resolvers       | resolving | using suffix based filetype 'lua'
resolvers       | resolving | remembering file 'mtx-t-contexts.lua'
using hash 'lua::mtx-t-contexts.lua'
resolvers       | resolving | remembered file 'mtx-t-context.lua'
resolvers       | resolving | using suffix based filetype 'lua'
resolvers       | resolving | remembering file 'context.lua' using
hash 'lua::context.lua'
mtxrun          | unknown script 'context.lua' or 'mtx-context.lua'

ConText stops working, try searching for 'texmfcnf.lua' in a location where it
is not.

What line should I put in 'export' to make it work?
I want to add the change to `.bashrc` to make it permanent.

Saludos


From siepo at bitmuis.nl  Thu Sep 17 18:18:08 2020
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Thu, 17 Sep 2020 18:18:08 +0200
Subject: Issue on Running `tlmgr path add`
In-Reply-To: <20200916151620.GC364879@bulldog.preining.info>
References: <351121600265896@mail.yandex.com>
 <20200916144700.GA364879@bulldog.preining.info>
 <337921600268190@mail.yandex.com>
 <20200916151620.GC364879@bulldog.preining.info>
Message-ID: <20200917161808.GA2030@bitmuis.nl>

On Thu, Sep 17, 2020 at 12:16:20AM +0900, Norbert Preining wrote:
> > Use of uninitialized value $broad_result in concatenation (.) or string at E:\Ti
> > nyTex\TinyTex\TinyTeX\texmf-dist\scripts\texlive\tlmgr.pl line 1511.
> > ret = >>0<<, broadcast result = >><<
> 
> So that means that
> 	TeXLive::TLWinGoo::broadcast_env()
> does not return a proper return value. And indeed, reading the code it
> doesn't do any proper return value handling.
> 
> Siep: anyting we can do here? Return 0|1 for failure|success or similar?
> Sorry, I simply cannot understand what is going on in this function with
> all the Windows stuff.
> 
> If not, I will just drop the |= call.

The $SendMessage object is created early in TLWinGoo and then used
later on in broadcast_env.

I believe the only reasonable remedy in case of failure of creating
or using $SendMessage would be to recommend the user to re-login
after installation, to make the session aware of the registry
changes.  However, I never encountered this problem in my tests so I
have never done anything about it except just soldiering on in case
of failure.

-- 
Siep Kroonenberg

From zdenek.wagner at gmail.com  Fri Sep 18 10:18:01 2020
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 18 Sep 2020 10:18:01 +0200
Subject: How to adjust the $TEXMFCNF variable not to interfere with
 ConText?
In-Reply-To: <CANeU4n8augqXH_0iVZQ3WYLh+kC-xKEXi_QO=jpn7tvRZNQ-+Q@mail.gmail.com>
References: <CANeU4n8augqXH_0iVZQ3WYLh+kC-xKEXi_QO=jpn7tvRZNQ-+Q@mail.gmail.com>
Message-ID: <CAC1phya0tZ7vtKHpH+CG8HS1GdCZ8XKu6Vt+3wzQZ+e-TrAT4A@mail.gmail.com>

Hi,

you can get better answer if you explain what exactly you want to
achieve. For instance, you can have your local texmf.cnf which will
define only TEXINPUTS.latex and the rest will be automatically taken
from the system texmf.cnf, hence lua will not be affected.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

?t 17. 9. 2020 v 17:34 odes?latel Pablo Gonz?lez L
<pablgonz at educarchile.cl> napsal:
>
> Hello, some time ago I asked for something similar
> (https://tug.org/pipermail/tex-live/2019-October/044188.html) and I know that
> the problem occurs when I set the variable $TEXMFCNF, as a reproduction of my
> question (under TeX Live 2020, fedora 32):
>
> ## Part 1, all OK
> $ kpsewhich -var-brace-value=TEXMFCNF
> /usr/local/texlive/2020/bin/x86_64-linux:/usr/local/texlive/2020/bin/x86_64-linux/share/texmf-local/web2c:/usr/local/texlive/2020/bin/x86_64-linux/share/texmf-dist/web2c:/usr/local/texlive/2020/bin/x86_64-linux/share/texmf/web2c:/usr/local/texlive/2020/bin/x86_64-linux/texmf-local/web2c:/usr/local/texlive/2020/bin/x86_64-linux/texmf-dist/web2c:/usr/local/texlive/2020/bin/x86_64-linux/texmf/web2c:/usr/local/texlive/2020/bin:/usr/local/texlive/2020/bin/share/texmf-local/web2c:/usr/local/texlive/2020/bin/share/texmf-dist/web2c:/usr/local/texlive/2020/bin/share/texmf/web2c:/usr/local/texlive/2020/bin/texmf-local/web2c:/usr/local/texlive/2020/bin/texmf-dist/web2c:/usr/local/texlive/2020/bin/texmf/web2c:/usr/local/texlive/texmf-local/web2c:/usr/local/texlive/2020:/usr/local/texlive/2020/share/texmf-local/web2c:/usr/local/texlive/2020/share/texmf-dist/web2c:/usr/local/texlive/2020/share/texmf/web2c:/usr/local/texlive/2020/texmf-local/web2c:/usr/local/texlive/2020/texmf-dist/web2c:/!
>  usr/local/texlive/2020/texmf/web2c
>
> $ context --nofile --once
>
> resolvers       | formats | executing runner 'run luatex format':
> /usr/local/texlive/2020/bin/x86_64-linux/luatex --jobname="cont-nop"
> --fmt=/home/pablo/.texlive2020/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/formats/luatex/cont-en.fmt
> --lua=/home/pablo/.texlive2020/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/formats/luatex/cont-en.lui
> cont-nop.mkiv --c:currentrun=1 --c:fulljobname="cont-nop.mkiv"
> --c:input="cont-nop.mkiv" --c:kindofrun=3 --c:maxnofruns=1 --c:nofile
> --c:once --c:texmfbinpath="/usr/local/texlive/2020/bin/x86_64-linux"
> This is LuaTeX, Version 1.12.0 (TeX Live 2020)
>  system commands enabled.
> open source     > level 1, order 1, name
> '/usr/local/texlive/2020/texmf-dist/tex/context/base/mkiv/cont-nop.mkiv'
> system          >
> system          > ConTeXt  ver: 2020.03.10 14:44 MKIV beta  fmt:
> 2020.8.28  int: english/english
> system          >
> system          > 'cont-new.mkiv' loaded
> open source     > level 2, order 2, name
> '/usr/local/texlive/2020/texmf-dist/tex/context/base/mkiv/cont-new.mkiv'
> system          > beware: some patches loaded from cont-new.mkiv
> close source    > level 2, order 2, name
> '/usr/local/texlive/2020/texmf-dist/tex/context/base/mkiv/cont-new.mkiv'
> system          > files > jobname 'cont-nop', input 'cont-nop.mkiv',
> result 'cont-nop'
> fonts           > latin modern fonts are not preloaded
> languages       > language 'en' is active
> system          > loading dummy replacement for jobname
> system          > invalid \starttext ... \stoptext structure
> fonts           > beware: no fonts are loaded yet, using 'lm mono' in box
> close source    > level 1, order 2, name
> '/usr/local/texlive/2020/texmf-dist/tex/context/base/mkiv/cont-nop.mkiv'
>
> mkiv lua stats  > used config file:
> selfautoparent:/texmfcnf.lua;selfautoparent:/texmf-dist/web2c/texmfcnf.lua
> mkiv lua stats  > used cache path: readable+writable:
> '/home/pablo/.texlive2020/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9'
> mkiv lua stats  > resource resolver: loadtime 0.276 seconds, 1 scans
> with scantime 0.003 seconds, 0 shared scans, 7 found files, scanned
> paths: /home/pablo/texmf
> mkiv lua stats  > stored bytecode data: 450 modules (0.662 sec), 93
> tables (0.030 sec), 543 chunks (0.692 sec)
> mkiv lua stats  > traced context: maxstack: 1398, freed: 0, unreachable: 1398
> mkiv lua stats  > cleaned up reserved nodes: 53 nodes, 9 lists of 442
> mkiv lua stats  > node memory usage: 8 attribute, 3 attribute_list, 2
> glue, 51 glue_spec, 2 kern, 2 penalty, 2 temp, 2 user_defined
> mkiv lua stats  > node list callback tasks: 8 unique task lists, 1
> instances (re)created, 2 calls
> mkiv lua stats  > used backend: pdf (backend for directly generating pdf output)
> mkiv lua stats  > jobdata time: 0.001 seconds saving, 0.001 seconds loading
> mkiv lua stats  > callbacks: internal: 34, file: 61, direct: 2, late:
> 0, function 61, total: 158
> mkiv lua stats  > randomizer: resumed with value 0.95072731096298
> mkiv lua stats  > result saved in file: cont-nop.pdf, compresslevel 3,
> objectcompresslevel 1
> mkiv lua stats  > loaded patterns: en::1, load time: 0.000
> mkiv lua stats  > loaded fonts: 1 files: lmmono10-regular.otf
> mkiv lua stats  > font engine: otf 3.111, afm 1.513, tfm 1.000, 1
> instances, load time 0.019 seconds
> mkiv lua stats  > used platform: linux-64, type: unix, binary subtree: bin
> mkiv lua stats  > used engine: luatex version: 1.12, functionality
> level: 7306, banner: this is luatex, version 1.12.0 (tex live 2020)
> mkiv lua stats  > control sequences: 44135 of 65536 + 100000
> mkiv lua stats  > lua properties: engine: lua 5.3, used memory: 119
> MB, ctx: 119 MB, max: unknown MB, hash chars: min(64,40), symbol mask:
> utf (???)
> mkiv lua stats  > runtime: 0.704 seconds
> system          | total runtime: 1.230 seconds
>
> $ tlmgr conf auxtrees --conffile /home/pablo/texmf/texmf.cnf show
> tlmgr: no auxiliary texmf trees defined.
>
> $ tlmgr conf auxtrees --conffile /home/pablo/texmf/texmf.cnf add
> ~/ltxcole/stycole/
> $ tlmgr conf auxtrees --conffile /home/pablo/texmf/texmf.cnf show
> List of auxiliary texmf trees:
>   /home/pablo/ltxcole/stycole/
>
> $ cat /home/pablo/texmf/texmf.cnf
> TEXMFAUXTREES = /home/pablo/ltxcole/stycole/,
>
> Up to that point everything is fine, but, in addition:
>
> ## Part 2, not OK :(
> $ export TEXMFCNF='~/texmf:'
> $ kpsewhich -var-brace-value=TEXMFCNF
> /home/pablo/texmf:
>
> $ context --nofile --once
> mtxrun          | forcing cache reload
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on
> weird path '$HOME/texmf:' from specification '$HOME/texmf:'
> resolvers       | resolving | looking for fallback 'contextcnf.lua' on
> weird path '$HOME/texmf:' from specification '$HOME/texmf:'
> resolvers       | resolving |
> resolvers       | resolving | warning: no lua configuration files found
> resolvers       | resolving | no texmf paths are defined (using TEXMF)
> resolvers       | resolving |
> mtxrun          | the resolver databases are not present or outdated
> resolvers       | resolving | using suffix based filetype 'lua'
> resolvers       | resolving | remembering file 'mtx-context.lua' using
> hash 'lua::mtx-context.lua'
> resolvers       | resolving | using suffix based filetype 'lua'
> resolvers       | resolving | remembering file 'mtx-contexts.lua'
> using hash 'lua::mtx-contexts.lua'
> resolvers       | resolving | remembered file 'mtx-context.lua'
> resolvers       | resolving | using suffix based filetype 'lua'
> resolvers       | resolving | remembering file 'mtx-t-context.lua'
> using hash 'lua::mtx-t-context.lua'
> resolvers       | resolving | using suffix based filetype 'lua'
> resolvers       | resolving | remembering file 'mtx-t-contexts.lua'
> using hash 'lua::mtx-t-contexts.lua'
> resolvers       | resolving | remembered file 'mtx-t-context.lua'
> resolvers       | resolving | using suffix based filetype 'lua'
> resolvers       | resolving | remembering file 'context.lua' using
> hash 'lua::context.lua'
> mtxrun          | unknown script 'context.lua' or 'mtx-context.lua'
>
> ConText stops working, try searching for 'texmfcnf.lua' in a location where it
> is not.
>
> What line should I put in 'export' to make it work?
> I want to add the change to `.bashrc` to make it permanent.
>
> Saludos
>


From pablgonz at educarchile.cl  Fri Sep 18 13:56:27 2020
From: pablgonz at educarchile.cl (=?UTF-8?Q?Pablo_Gonz=C3=A1lez_L?=)
Date: Fri, 18 Sep 2020 08:56:27 -0300
Subject: How to adjust the $TEXMFCNF variable not to interfere with
 ConText?
In-Reply-To: <CAC1phya0tZ7vtKHpH+CG8HS1GdCZ8XKu6Vt+3wzQZ+e-TrAT4A@mail.gmail.com>
References: <CANeU4n8augqXH_0iVZQ3WYLh+kC-xKEXi_QO=jpn7tvRZNQ-+Q@mail.gmail.com>
 <CAC1phya0tZ7vtKHpH+CG8HS1GdCZ8XKu6Vt+3wzQZ+e-TrAT4A@mail.gmail.com>
Message-ID: <CANeU4n_RRV31h25xFyrwu+VPdppU0f_WwoqV=+yE64kFY=VBMA@mail.gmail.com>

To be specific are two collaborative projects hosted in GitHub (a magazine and a
book) of my work, in both of them I used a configuration of the type `auxtrees`
by users (win/linux), basically I copied the lines of the script that configures
both projects in the different accounts of teachers and students of the lab.

The `texmf.cnf` file only has the `TEXMFAUXTREES` line (I assume that this var
can't be configured using `export`), the vast majority doesn't use ConText, but,
I use it to make the tests of a package and there begins my dilemma.

Originally both projects were available only for windows using MikTeX, but, a
few years ago they modified everything to work with TeX Live on both windows and
linux.

> Hi,
>
> you can get better answer if you explain what exactly you want to
> achieve. For instance, you can have your local texmf.cnf which will
> define only TEXINPUTS.latex and the rest will be automatically taken
> from the system texmf.cnf, hence lua will not be affected.
>
> Zden?k Wagner
> http://ttsm.icpf.cas.cz/team/wagner.shtml
> http://icebearsoft.euweb.cz


From naveen at syrusdark.website  Fri Sep 18 19:35:16 2020
From: naveen at syrusdark.website (Naveen M K)
Date: Fri, 18 Sep 2020 23:05:16 +0530
Subject: Creating a Chocolatey Package For TexLive
In-Reply-To: <13188471600448826@iva4-b954b1b05fd9.qloud-c.yandex.net>
References: <100941599800051@mail.yandex.com> <232431600247783@mail.yandex.com>
 <20200916151045.GB364879@bulldog.preining.info>
 <374041600321856@mail.yandex.com>
 <20200917084019.GD385312@bulldog.preining.info>
 <412251600332307@mail.yandex.com>
Message-ID: <13188471600448826@iva4-b954b1b05fd9.qloud-c.yandex.net>

An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200918/5ae0846c/attachment.html>

From karl at freefriends.org  Fri Sep 18 23:53:59 2020
From: karl at freefriends.org (Karl Berry)
Date: Fri, 18 Sep 2020 15:53:59 -0600
Subject: How to adjust the $TEXMFCNF variable not to interfere with
 ConText?
In-Reply-To: <CANeU4n_RRV31h25xFyrwu+VPdppU0f_WwoqV=+yE64kFY=VBMA@mail.gmail.com>
Message-ID: <202009182153.08ILrxSd019785@freefriends.org>

1) I haven't tried, but I don't know of any reason why TEXMFAUXTREES could
not be set in the environment. In general, variable lookups are treated
the same.

2)
    $ export TEXMFCNF='~/texmf:'

Evidently context does not support the trailing : syntax on TEXMFCNF, as
it is only looking in that home dir for texmfcnf.lua (which is in
texmf-dist/web2c, sibling to texmf.cnf):

  resolvers       | resolving | looking for regular 'texmfcnf.lua' on
  weird path '$HOME/texmf:' from specification '$HOME/texmf:'

So maybe some other variable could be set. But I also don't understand
why setting TEXMFAUXTREES should interfere with context in the first
place; all it does is add more trees to $TEXMF. -k



From bensmithmath at gmail.com  Fri Sep 18 23:31:42 2020
From: bensmithmath at gmail.com (Ben Smith)
Date: Fri, 18 Sep 2020 14:31:42 -0700
Subject: kpathsea SELFAUTOLOC is wrong
Message-ID: <CAL6Mcp6ha+bj7a0JZh7W-0vo1x=tzrerG1n71VUNPMpqdGs0yA@mail.gmail.com>

Hi, I installed texlive 2020 last week on my thinkpad x1 yoga (gen 4)
last week, running arch linux. I used the download script from
tug.org. It successfully installed, but is not working. kpathsea seems
to be looking for files in the wrong place, and can't find texmf.cnf
or latex.fmt or anything. After some digging around I found that
SELFAUTOLOC is set to /usr/bin, but my whole texlive is installed in
/usr/local/texlive. (I get this by running kpsewhich
-var-value=SELFAUTOLOC)

On my older computer with texlive working, with everything installed
in the same directories, SELFAUTOLOC is
/usr/local/texlive/2020/bin/x86_64-linux. This computer is also
running arch linux, and I installed texlive from the tug.org script
three months ago.

It also seems like SELFAUTOPARENT and SELFAUTOGRANDPARENT are wrong.

texmf.cnf says that these variables are generated in
kpathsea/progname.c but I don't seem to have that file to check.

Thanks!
Ben Smith

PS I tried to report a bug following the instructions at
https://tug.org/tetex/html/kpathsea/kpath_13.html#SEC13 but the
address tex-k at cs.umb.edu was not found.

From reinhard.kotucha at web.de  Sat Sep 19 01:32:31 2020
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 19 Sep 2020 01:32:31 +0200
Subject: kpathsea SELFAUTOLOC is wrong
In-Reply-To: <CAL6Mcp6ha+bj7a0JZh7W-0vo1x=tzrerG1n71VUNPMpqdGs0yA@mail.gmail.com>
References: <CAL6Mcp6ha+bj7a0JZh7W-0vo1x=tzrerG1n71VUNPMpqdGs0yA@mail.gmail.com>
Message-ID: <24421.17295.980099.175758@gargle.gargle.HOWL>

On 2020-09-18 at 14:31:42 -0700, Ben Smith wrote:

 > Hi, I installed texlive 2020 last week on my thinkpad x1 yoga (gen 4)
 > last week, running arch linux. I used the download script from
 > tug.org. It successfully installed, but is not working. kpathsea seems
 > to be looking for files in the wrong place, and can't find texmf.cnf
 > or latex.fmt or anything. After some digging around I found that
 > SELFAUTOLOC is set to /usr/bin, but my whole texlive is installed in
 > /usr/local/texlive. (I get this by running kpsewhich
 > -var-value=SELFAUTOLOC)

SELFAUTOLOC is never set to /usr/bin.  Please check your environment
variables.  Remove all TeX related variables from the environment and
try again.

Does Arch Linux really set SELFAUTOLOC to /usr/bin in the environment?
That would be crazy.  What is the output of

  echo $SELFAUTOLOC

?

Regards,
  Reinhard

--
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From lomov.vl at yandex.ru  Sat Sep 19 01:39:41 2020
From: lomov.vl at yandex.ru (Vladimir Lomov)
Date: Sat, 19 Sep 2020 07:39:41 +0800
Subject: kpathsea SELFAUTOLOC is wrong
In-Reply-To: <CAL6Mcp6ha+bj7a0JZh7W-0vo1x=tzrerG1n71VUNPMpqdGs0yA@mail.gmail.com>
References: <CAL6Mcp6ha+bj7a0JZh7W-0vo1x=tzrerG1n71VUNPMpqdGs0yA@mail.gmail.com>
Message-ID: <20200918233941.GA780@smoon.bkoty.ru>

Hello,
** Ben Smith <bensmithmath at gmail.com> [2020-09-18 14:31:42 -0700]:

> Hi, I installed texlive 2020 last week on my thinkpad x1 yoga (gen 4)
> last week, running arch linux. I used the download script from
> tug.org. It successfully installed, but is not working. kpathsea seems
> to be looking for files in the wrong place, and can't find texmf.cnf
> or latex.fmt or anything. After some digging around I found that
> SELFAUTOLOC is set to /usr/bin, but my whole texlive is installed in
> /usr/local/texlive. (I get this by running kpsewhich
> -var-value=SELFAUTOLOC)

Please provide more details.

Show output of (I assume that your shell is bash or zsh):
$ command -v pdflatex
$ command -v kpsewhich
$ which pdflatex
$ which kpsewhich
$ whereis pdflatex
$ whereis kpsewhich
$ env | grep -i tex

> On my older computer with texlive working, with everything installed
> in the same directories, SELFAUTOLOC is
> /usr/local/texlive/2020/bin/x86_64-linux. This computer is also
> running arch linux, and I installed texlive from the tug.org script
> three months ago.

> It also seems like SELFAUTOPARENT and SELFAUTOGRANDPARENT are wrong.

> texmf.cnf says that these variables are generated in
> kpathsea/progname.c but I don't seem to have that file to check.

I'm Archlinux user too and use TeX Live from TUG as well as has texlive*
packages installed by pacman (Archlinux package manager).

> Thanks!
> Ben Smith

> PS I tried to report a bug following the instructions at
> https://tug.org/tetex/html/kpathsea/kpath_13.html#SEC13 but the
> address tex-k at cs.umb.edu was not found.

That is pitty but I doubt that the problem is with kpathsea.

---
WBR, Vladimir Lomov

-- 
Toothpaste never hurts the taste of good scotch.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 228 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20200919/de4cd0d0/attachment.sig>

From lomov.vl at yandex.ru  Sat Sep 19 01:48:28 2020
From: lomov.vl at yandex.ru (Vladimir Lomov)
Date: Sat, 19 Sep 2020 07:48:28 +0800
Subject: kpathsea SELFAUTOLOC is wrong
In-Reply-To: <24421.17295.980099.175758@gargle.gargle.HOWL>
References: <CAL6Mcp6ha+bj7a0JZh7W-0vo1x=tzrerG1n71VUNPMpqdGs0yA@mail.gmail.com>
 <24421.17295.980099.175758@gargle.gargle.HOWL>
Message-ID: <20200918234828.GB780@smoon.bkoty.ru>

** Reinhard Kotucha <reinhard.kotucha at web.de> [2020-09-19 01:32:31 +0200]:

> On 2020-09-18 at 14:31:42 -0700, Ben Smith wrote:

>> Hi, I installed texlive 2020 last week on my thinkpad x1 yoga (gen 4)
>> last week, running arch linux. I used the download script from
>> tug.org. It successfully installed, but is not working. kpathsea seems
>> to be looking for files in the wrong place, and can't find texmf.cnf
>> or latex.fmt or anything. After some digging around I found that
>> SELFAUTOLOC is set to /usr/bin, but my whole texlive is installed in
>> /usr/local/texlive. (I get this by running kpsewhich
>> -var-value=SELFAUTOLOC)

> SELFAUTOLOC is never set to /usr/bin.

It is, this is "automatic" variable:
$ /usr/bin/kpsewhich -var-value=SELFAUTOLOC
/usr/bin

I have both TeX Live distribution from TUG and texlive* (distribution)
packages installed.

> Please check your environment variables. Remove all TeX related variables
> from the environment and try again.

> Does Arch Linux really set SELFAUTOLOC to /usr/bin in the environment?
> That would be crazy.  What is the output of

>   echo $SELFAUTOLOC

> ?

Here I have nothing and I doubt it is Archlinux to blame, I suspect that Ben
installed both TeX Live into /usr/local/texlive and (standard) Archlinux
texlive* packages but don't change the PATH variable (but that doesn't explain
why Ben got '/usr/local/texlive' on 'kpsewhich -var-value=SELFAUTOLOC').

> Regards,
>   Reinhard

---
WBR, Vladimir Lomov

-- 
Life exists for no known purpose.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 228 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20200919/a6fbd487/attachment.sig>

From bensmithmath at gmail.com  Sat Sep 19 02:11:09 2020
From: bensmithmath at gmail.com (Ben Smith)
Date: Fri, 18 Sep 2020 17:11:09 -0700
Subject: kpathsea SELFAUTOLOC is wrong
In-Reply-To: <20200918233941.GA780@smoon.bkoty.ru>
References: <CAL6Mcp6ha+bj7a0JZh7W-0vo1x=tzrerG1n71VUNPMpqdGs0yA@mail.gmail.com>
 <20200918233941.GA780@smoon.bkoty.ru>
Message-ID: <CAL6Mcp4rVuht7kxNSqrTBWqmA2YTxr7=h8g3TRsn99qMFnQjmQ@mail.gmail.com>

Reinhard,

echo $SELFAUTOLOC gives an empty line. There were no tex-related variables
defined when I ran env.

Vladimir, Here's the requested output:

[ben at tp4 ~]$ command -v pdflatex
/usr/bin/pdflatex
[ben at tp4 ~]$ command -v kpsewhich
/usr/bin/kpsewhich
[ben at tp4 ~]$ which pdflatex
/usr/bin/pdflatex
[ben at tp4 ~]$ which kpsewhich
/usr/bin/kpsewhich
[ben at tp4 ~]$ whereis pdflatex
pdflatex: /usr/bin/pdflatex
/usr/local/texlive/2020/bin/x86_64-linux/pdflatex
/usr/share/man/man1/pdflatex.1.gz
[ben at tp4 ~]$ whereis kpsewhich
kpsewhich: /usr/bin/kpsewhich
/usr/local/texlive/2020/bin/x86_64-linux/kpsewhich
/usr/share/man/man1/kpsewhich.1.gz
[ben at tp4 ~]$ env | grep -i tex
MANPATH=:/usr/local/texlive/2020/texmf-dist/doc/man
INFOPATH=:/usr/local/texlive/2020/texmf-dist/doc/info
PATH=/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl:/home/ben/.emacs.d/bin:/usr/local/texlive/2020/bin/x86_64-linux

So I think your hunch is right! I have the arch texlive-bin package
installed in addition to the tug.org version. I just looked it up with
`pacman -Qi texlive-bin`, and it came as a dependency of xournalpp which I
installed before the tug.org version. Now, I just ran:

$ /usr/local/texlive/2020/bin/x86_64-linux/latex small2e

and it looks like it worked. Then, I changed my PATH-setting command to:

export
PATH="/home/ben/.emacs.d/bin:/usr/local/texlive/2020/bin/x86_64-linux:$PATH"

So that the previous $PATH is at the back instead of the front... and then
running just:

$latex small2e

worked just fine! I'm not sure if i should uninstall the texlive-bin
package or not. I don't want to break xournalpp which I use for work every
day.

Thanks,
Ben Smith


On Fri, Sep 18, 2020 at 4:39 PM Vladimir Lomov <lomov.vl at yandex.ru> wrote:

> Hello,
> ** Ben Smith <bensmithmath at gmail.com> [2020-09-18 14:31:42 -0700]:
>
> > Hi, I installed texlive 2020 last week on my thinkpad x1 yoga (gen 4)
> > last week, running arch linux. I used the download script from
> > tug.org. It successfully installed, but is not working. kpathsea seems
> > to be looking for files in the wrong place, and can't find texmf.cnf
> > or latex.fmt or anything. After some digging around I found that
> > SELFAUTOLOC is set to /usr/bin, but my whole texlive is installed in
> > /usr/local/texlive. (I get this by running kpsewhich
> > -var-value=SELFAUTOLOC)
>
> Please provide more details.
>
> Show output of (I assume that your shell is bash or zsh):
> $ command -v pdflatex
> $ command -v kpsewhich
> $ which pdflatex
> $ which kpsewhich
> $ whereis pdflatex
> $ whereis kpsewhich
> $ env | grep -i tex
>
> > On my older computer with texlive working, with everything installed
> > in the same directories, SELFAUTOLOC is
> > /usr/local/texlive/2020/bin/x86_64-linux. This computer is also
> > running arch linux, and I installed texlive from the tug.org script
> > three months ago.
>
> > It also seems like SELFAUTOPARENT and SELFAUTOGRANDPARENT are wrong.
>
> > texmf.cnf says that these variables are generated in
> > kpathsea/progname.c but I don't seem to have that file to check.
>
> I'm Archlinux user too and use TeX Live from TUG as well as has texlive*
> packages installed by pacman (Archlinux package manager).
>
> > Thanks!
> > Ben Smith
>
> > PS I tried to report a bug following the instructions at
> > https://tug.org/tetex/html/kpathsea/kpath_13.html#SEC13 but the
> > address tex-k at cs.umb.edu was not found.
>
> That is pitty but I doubt that the problem is with kpathsea.
>
> ---
> WBR, Vladimir Lomov
>
> --
> Toothpaste never hurts the taste of good scotch.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200918/30f1beca/attachment-0001.html>

From kakuto at w32tex.org  Sat Sep 19 06:08:18 2020
From: kakuto at w32tex.org (Akira Kakuto)
Date: Sat, 19 Sep 2020 13:08:18 +0900
Subject: kpathsea SELFAUTOLOC is wrong
In-Reply-To: <CAL6Mcp4rVuht7kxNSqrTBWqmA2YTxr7=h8g3TRsn99qMFnQjmQ@mail.gmail.com>
References: <CAL6Mcp6ha+bj7a0JZh7W-0vo1x=tzrerG1n71VUNPMpqdGs0yA@mail.gmail.com>
 <20200918233941.GA780@smoon.bkoty.ru>
 <CAL6Mcp4rVuht7kxNSqrTBWqmA2YTxr7=h8g3TRsn99qMFnQjmQ@mail.gmail.com>
Message-ID: <91792050-5b92-d905-eb37-cde4c633aa70@w32tex.org>

On 2020/09/19 9:11, Ben Smith wrote:
 > [ben at tp4 ~]$ command -v kpsewhich
 > /usr/bin/kpsewhich


SELFAUTOLOC is putenved by an application which is linked
with kpathsea. It is just the directory where the application
exists. Thus
/usr/bin/kpsewhich --var-value=SELFAUTOLOC
shows /usr/bin

/usr/local/texlive/2020/bin/x86_64-linux/kpsewhich --var-value=SELFAUTOLOC
shows /usr/local/texlive/2020/bin/x86_64-linux
etc.

You have to define PATH properly.

Best,
Akira


From cereda.paulo at gmail.com  Sat Sep 19 11:51:09 2020
From: cereda.paulo at gmail.com (Paulo Roberto Massa Cereda)
Date: Sat, 19 Sep 2020 06:51:09 -0300
Subject: runscript.exe and process termination
Message-ID: <ebf11dde-51c5-a94f-ef5e-fef7046947aa@gmail.com>

Dear friends in the TL list,

TeX Live on Windows uses wrappers around common tools (e.g. latexmk, 
arara etc.) based on the runscript.exe program (runscript.tlu). It is a 
clever approach to provide a consistent, unified entry point to deploy 
binaries in the Windows environment.

While working on issues opened for arara, there were a few mentions that 
process killing on Windows did not work as expected. We (the island) 
decided to investigate what was going on.

To give you some context, we summarized our findings in

https://gitlab.com/islandoftex/arara/-/issues/39

These findings show one real problem on Windows: Processes started from 
editors based on Qt's process management cannot be easily killed because 
their subprocesses will not be terminated (that is how the Windows API 
works).

Now, while we know that especially in this case it is not a problem of 
the wrapper script per se, we would like to point out some code excerpts 
from popular editors:

- TeXworks kills processes using Qt's kill method which, as detailed in 
the issue, does not kill subprocesses:

https://github.com/TeXworks/texworks/blob/c6e85a8e3248ee4b15cd3022ccb77a13d8a42f8d/src/TeXDocumentWindow.cpp#L2786

- TeXmaker kills processes with the same method (line 8165 in 
texmaker.cpp of the current sources of version 5.0.4).

- TeXStudio has written a wrapper (ProcessX) around QProcess but uses 
the same approach for killing applications.

At least three of the more common editors use Qt's method of killing 
processes which will not kill child processes on Windows (because 
Windows does not enforce this concept like unices). That means that 
killing the exe wrapper will actually not propagate the kill signal to 
the actual process that was supposed to be killed which is kind of 
unexpected.

We (the island) were wondering if it would be a good idea for the 
runscript.exe wrapper to kill underlying processes on termination to 
remove the additional ?layer? of processes kept alive. I don't know much 
of the inner workings of the wrapper, so apologies to the wrapper 
maintainers if we are asking something too troublesome to implement, as 
we really do not want to add more complexity.

Stay safe!

Cheerio,

Paulo

From siepo at bitmuis.nl  Sat Sep 19 15:01:23 2020
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Sat, 19 Sep 2020 15:01:23 +0200
Subject: runscript.exe and process termination
In-Reply-To: <ebf11dde-51c5-a94f-ef5e-fef7046947aa@gmail.com>
References: <ebf11dde-51c5-a94f-ef5e-fef7046947aa@gmail.com>
Message-ID: <20200919130123.GA2057@bitmuis.nl>

On Sat, Sep 19, 2020 at 06:51:09AM -0300, Paulo Roberto Massa Cereda wrote:
> Dear friends in the TL list,
> 
> TeX Live on Windows uses wrappers around common tools (e.g. latexmk, arara
> etc.) based on the runscript.exe program (runscript.tlu). It is a clever
> approach to provide a consistent, unified entry point to deploy binaries in
> the Windows environment.
> 
> While working on issues opened for arara, there were a few mentions that
> process killing on Windows did not work as expected. We (the island) decided
> to investigate what was going on.
> 
> To give you some context, we summarized our findings in
> 
> https://gitlab.com/islandoftex/arara/-/issues/39
> 
> These findings show one real problem on Windows: Processes started from
> editors based on Qt's process management cannot be easily killed because
> their subprocesses will not be terminated (that is how the Windows API
> works).
> 
> Now, while we know that especially in this case it is not a problem of the
> wrapper script per se, we would like to point out some code excerpts from
> popular editors:
> 
> - TeXworks kills processes using Qt's kill method which, as detailed in the
> issue, does not kill subprocesses:
> 
> https://github.com/TeXworks/texworks/blob/c6e85a8e3248ee4b15cd3022ccb77a13d8a42f8d/src/TeXDocumentWindow.cpp#L2786
> 
> - TeXmaker kills processes with the same method (line 8165 in texmaker.cpp
> of the current sources of version 5.0.4).
> 
> - TeXStudio has written a wrapper (ProcessX) around QProcess but uses the
> same approach for killing applications.
> 
> At least three of the more common editors use Qt's method of killing
> processes which will not kill child processes on Windows (because Windows
> does not enforce this concept like unices). That means that killing the exe
> wrapper will actually not propagate the kill signal to the actual process
> that was supposed to be killed which is kind of unexpected.
> 
> We (the island) were wondering if it would be a good idea for the
> runscript.exe wrapper to kill underlying processes on termination to remove
> the additional ?layer? of processes kept alive. I don't know much of the
> inner workings of the wrapper, so apologies to the wrapper maintainers if we
> are asking something too troublesome to implement, as we really do not want
> to add more complexity.

I looked into this at some time in a different context, but could
not find a good solution. I shall look into it again.

-- 
Siep Kroonenberg

From pablgonz at educarchile.cl  Sat Sep 19 15:06:18 2020
From: pablgonz at educarchile.cl (=?UTF-8?Q?Pablo_Gonz=C3=A1lez_L?=)
Date: Sat, 19 Sep 2020 10:06:18 -0300
Subject: How to adjust the $TEXMFCNF variable not to interfere with
 ConText?
In-Reply-To: <202009182153.08ILrxSd019785@freefriends.org>
References: <CANeU4n_RRV31h25xFyrwu+VPdppU0f_WwoqV=+yE64kFY=VBMA@mail.gmail.com>
 <202009182153.08ILrxSd019785@freefriends.org>
Message-ID: <CANeU4n9QAhrmMLf_Gg8bT=NOgb8qJuJ1K+xqWZVq+-R=W0DL=A@mail.gmail.com>

> 1) I haven't tried, but I don't know of any reason why TEXMFAUXTREES could
> not be set in the environment. In general, variable lookups are treated
> the same.
I've tried it, but, for some reason it doesn't work, I assume that's why they
used the 'texmf.cnf' file to configure TEXMFAUXTREES. I prefer to use
environment variables and not touch any `.cnf` file (that's only for advanced
users).

> 2)
>     $ export TEXMFCNF='~/texmf:'
>
> Evidently context does not support the trailing : syntax on TEXMFCNF, as
> it is only looking in that home dir for texmfcnf.lua (which is in
> texmf-dist/web2c, sibling to texmf.cnf):
>
>   resolvers       | resolving | looking for regular 'texmfcnf.lua' on
>   weird path '$HOME/texmf:' from specification '$HOME/texmf:'
>
> So maybe some other variable could be set. But I also don't understand
> why setting TEXMFAUXTREES should interfere with context in the first
> place; all it does is add more trees to $TEXMF. -k

This leaves me a little sad, if you don't know what's going on it means that it
can't be solved :(

From cereda.paulo at gmail.com  Sat Sep 19 15:41:12 2020
From: cereda.paulo at gmail.com (Paulo Roberto Massa Cereda)
Date: Sat, 19 Sep 2020 10:41:12 -0300
Subject: runscript.exe and process termination
In-Reply-To: <20200919130123.GA2057@bitmuis.nl>
References: <ebf11dde-51c5-a94f-ef5e-fef7046947aa@gmail.com>
 <20200919130123.GA2057@bitmuis.nl>
Message-ID: <03c82c5b-1fa5-15e2-4f37-c0c0dbbf07ff@gmail.com>

 > I looked into this at some time in a different context, but could
 > not find a good solution. I shall look into it again.

Thank you very much for looking into it, Siep. If you need any help with 
testing whether an adapted version works as intended, feel free to poke 
the island. :)

Em 19/09/2020 10:01, Siep Kroonenberg escreveu:
> I looked into this at some time in a different context, but could
> not find a good solution. I shall look into it again.

From reinhard.kotucha at web.de  Sat Sep 19 22:06:43 2020
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 19 Sep 2020 22:06:43 +0200
Subject: kpathsea SELFAUTOLOC is wrong
In-Reply-To: <20200918234828.GB780@smoon.bkoty.ru>
References: <CAL6Mcp6ha+bj7a0JZh7W-0vo1x=tzrerG1n71VUNPMpqdGs0yA@mail.gmail.com>
 <24421.17295.980099.175758@gargle.gargle.HOWL>
 <20200918234828.GB780@smoon.bkoty.ru>
Message-ID: <24422.25811.285269.160157@gargle.gargle.HOWL>

On 2020-09-19 at 07:48:28 +0800, Vladimir Lomov wrote:

 > ** Reinhard Kotucha <reinhard.kotucha at web.de> [2020-09-19 01:32:31 +0200]:
 >
 > > On 2020-09-18 at 14:31:42 -0700, Ben Smith wrote:
 >
 > >> Hi, I installed texlive 2020 last week on my thinkpad x1 yoga (gen 4)
 > >> last week, running arch linux. I used the download script from
 > >> tug.org. It successfully installed, but is not working. kpathsea seems
 > >> to be looking for files in the wrong place, and can't find texmf.cnf
 > >> or latex.fmt or anything. After some digging around I found that
 > >> SELFAUTOLOC is set to /usr/bin, but my whole texlive is installed in
 > >> /usr/local/texlive. (I get this by running kpsewhich
 > >> -var-value=SELFAUTOLOC)
 >
 > > SELFAUTOLOC is never set to /usr/bin.
 >
 > It is, this is "automatic" variable:
 > $ /usr/bin/kpsewhich -var-value=SELFAUTOLOC
 > /usr/bin

It's what I meant.  "automatic variable" describes it better.
SELFAUTOLOC is neither set in the environment nor in any config file.
kpsewhich just returns its location.

BTW, at the end of the installation the installer explains what
exactly has to be added to PATH, MANPATH, and INFOPATH.  If this is
overlooked things are getting inconvenient.

Regards,
  Reinhard

--
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From reinhard.kotucha at web.de  Sat Sep 19 23:05:15 2020
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 19 Sep 2020 23:05:15 +0200
Subject: How to adjust the $TEXMFCNF variable not to interfere with
 ConText?
In-Reply-To: <CANeU4n9QAhrmMLf_Gg8bT=NOgb8qJuJ1K+xqWZVq+-R=W0DL=A@mail.gmail.com>
References: <CANeU4n_RRV31h25xFyrwu+VPdppU0f_WwoqV=+yE64kFY=VBMA@mail.gmail.com>
 <202009182153.08ILrxSd019785@freefriends.org>
 <CANeU4n9QAhrmMLf_Gg8bT=NOgb8qJuJ1K+xqWZVq+-R=W0DL=A@mail.gmail.com>
Message-ID: <24422.29323.949124.194447@gargle.gargle.HOWL>

On 2020-09-19 at 10:06:18 -0300, Pablo Gonz?lez L wrote:

 > I prefer to use environment variables and not touch any `.cnf` file
 > (that's only for advanced users).

I don't recommend to set any environment variables except PATH,
MANPATH, and INFOPATH at all.  There is a texmf.cnf file, usually in
/usr/local/texlive/2020 which is empty by default.  This is the
preferred place for such variables.

The main reason is that you can have more than one TL installation on
your system.  You are probably not aware of it.  You installed TL in
/usr/local but your Linux package manager installed another TL, at
least partly, as a dependency of another package.

Environment variables affect all instances of TL, not only the one you
want to configure.  If you fix one instance you probably break
another.

TeX Live is portable.  You can move it from one directory to another
and you only have to adapt PATH, MANPATH, and INFOPATH.  There is no
need to adapt any other environment variable at all if customization
is done within the TL directory tree.

The file /usr/local/texlive/2020/texmf.cnf is definitely not only for
advanced users.  It's the preferred file for customization.
Environment variables are fine for advanced users in certain
situations in order to change the behavior temporarily.  On Unix you
can say

  FOO=bar pdftex myfile.tex

without setting FOO permanently.  This is the only situation where
environment variables are useful.  At least for advanced users.  In
all other cases it's best to avoid them.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From karl at freefriends.org  Sat Sep 19 23:16:39 2020
From: karl at freefriends.org (Karl Berry)
Date: Sat, 19 Sep 2020 15:16:39 -0600
Subject: How to adjust the $TEXMFCNF variable not to interfere with
 ConText?
In-Reply-To: <CANeU4n9QAhrmMLf_Gg8bT=NOgb8qJuJ1K+xqWZVq+-R=W0DL=A@mail.gmail.com>
Message-ID: <202009192116.08JLGdWl030181@freefriends.org>

Hi Pablo - if you can give me a recipe for how to reproduce the
problems, starting with a vanilla install, along with more specifics
than "it doesn't work" (as far as TEXMFAUXTREES in the env goes), I can
look into it further. There's always a reason. But I can't guess all the
commands that you ran. I haven't been able to make the problems happen
so far. --best, karl.

From karl at freefriends.org  Sat Sep 19 23:26:01 2020
From: karl at freefriends.org (Karl Berry)
Date: Sat, 19 Sep 2020 15:26:01 -0600
Subject: kpathsea SELFAUTOLOC is wrong
In-Reply-To: <CAL6Mcp6ha+bj7a0JZh7W-0vo1x=tzrerG1n71VUNPMpqdGs0yA@mail.gmail.com>
Message-ID: <202009192126.08JLQ1kk031644@freefriends.org>

    https://tug.org/tetex/html/kpathsea/kpath_13.html#SEC13

Wow, you found some impressively stale documentation :). 1995.

I changed tug.org/tetex to just be te's "de-support" notice from 14
years ago, since virtually every url mentioned on the page was 404.

I also changed tug.org/tetex/html to point to tug.org/texinfohtml, which
is still maintained (by me), which is essentially the same thing. Can't
keep the actual links working, but, in this case it's just as well
.. --best, karl.

From pablgonz at educarchile.cl  Sun Sep 20 01:42:01 2020
From: pablgonz at educarchile.cl (=?UTF-8?Q?Pablo_Gonz=C3=A1lez_L?=)
Date: Sat, 19 Sep 2020 20:42:01 -0300
Subject: How to adjust the $TEXMFCNF variable not to interfere with
 ConText?
In-Reply-To: <24422.29323.949124.194447@gargle.gargle.HOWL>
References: <CANeU4n_RRV31h25xFyrwu+VPdppU0f_WwoqV=+yE64kFY=VBMA@mail.gmail.com>
 <202009182153.08ILrxSd019785@freefriends.org>
 <CANeU4n9QAhrmMLf_Gg8bT=NOgb8qJuJ1K+xqWZVq+-R=W0DL=A@mail.gmail.com>
 <24422.29323.949124.194447@gargle.gargle.HOWL>
Message-ID: <CANeU4n99QO3HSeS4BtkVn8jES4WU1xEnBJoKzfL5uy_vPqMSpw@mail.gmail.com>

> Environment variables affect all instances of TL, not only the one you
> want to configure.  If you fix one instance you probably break
> another.
>
> TeX Live is portable.  You can move it from one directory to another
> and you only have to adapt PATH, MANPATH, and INFOPATH.  There is no
> need to adapt any other environment variable at all if customization
> is done within the TL directory tree.
>
> The file /usr/local/texlive/2020/texmf.cnf is definitely not only for
> advanced users.  It's the preferred file for customization.
> Environment variables are fine for advanced users in certain
> situations in order to change the behavior temporarily.
>   Reinhard
I understand your point, it's more in a chat conversation with other TeX Live
users I've been told the same thing.

The use of variables is not whimsical, the problem is that (in this case) the
computer I work on is not my property, I only have access to my account and
everything under "~/", that is, I can't modify
/usr/local/texlive/2020/texmf.cnf

But, if you can make a copy with what you from, for example:
$ tlmgr conf auxtrees --conffile ~/mypath/texmf.cnf add ~/mypath/myfolder/
$ tlmgr conf auxtrees --conffile ~/mypath/texmf.cnf show
List of auxiliary texmf trees:
  /home/myname/mypath/myfolder/
$ kpsewhich -all texmf.cnf
/usr/local/texlive/2020/texmf.cnf
/usr/local/texlive/2020/texmf-dist/web2c/texmf.cnf

For the system to detect my `texmf.cnf`, I need to configure the variable
$TEXMFCNF using system env vars.

Is there a default place under "~/" where I should put 'texmf.cnf' for kpsewhich
to recognize it?
Pablo

From pablgonz at educarchile.cl  Sun Sep 20 01:46:17 2020
From: pablgonz at educarchile.cl (=?UTF-8?Q?Pablo_Gonz=C3=A1lez_L?=)
Date: Sat, 19 Sep 2020 20:46:17 -0300
Subject: How to adjust the $TEXMFCNF variable not to interfere with
 ConText?
In-Reply-To: <202009192116.08JLGdWl030181@freefriends.org>
References: <CANeU4n9QAhrmMLf_Gg8bT=NOgb8qJuJ1K+xqWZVq+-R=W0DL=A@mail.gmail.com>
 <202009192116.08JLGdWl030181@freefriends.org>
Message-ID: <CANeU4n8ME+1ijzV41BPREoto=hRizk4ze_TJTvtkFkHR+Rb6Aw@mail.gmail.com>

Hi Karl, I have created a new user "myname" on my local machine
and it plays only the commands I have executed
I will try to be as clear as possible in reproducing my problem:

### General information TeX Live 2020 full installation update today
$ kpsewhich -var-value=TEXMFHOME
/home/myname/texmf
$ kpsewhich -all texmf.cnf
/usr/local/texlive/2020/texmf.cnf
/usr/local/texlive/2020/texmf-dist/web2c/texmf.cnf
$ kpsewhich -var-value=TEXMFCNF
{/usr/local/texlive/2020/bin/x86_64-linux,/usr/local/texlive/2020/bin/x86_64-linux/share/texmf-local/web2c,/usr/local/texlive/2020/bin/x86_64-linux/share/texmf-dist/web2c,/usr/local/texlive/2020/bin/x86_64-linux/share/texmf/web2c,/usr/local/texlive/2020/bin/x86_64-linux/texmf-local/web2c,/usr/local/texlive/2020/bin/x86_64-linux/texmf-dist/web2c,/usr/local/texlive/2020/bin/x86_64-linux/texmf/web2c,/usr/local/texlive/2020/bin,/usr/local/texlive/2020/bin/share/texmf-local/web2c,/usr/local/texlive/2020/bin/share/texmf-dist/web2c,/usr/local/texlive/2020/bin/share/texmf/web2c,/usr/local/texlive/2020/bin/texmf-local/web2c,/usr/local/texlive/2020/bin/texmf-dist/web2c,/usr/local/texlive/2020/bin/texmf/web2c,/usr/local/texlive/texmf-local/web2c,/usr/local/texlive/2020,/usr/local/texlive/2020/share/texmf-local/web2c,/usr/local/texlive/2020/share/texmf-dist/web2c,/usr/local/texlive/2020/share/texmf/web2c,/usr/local/texlive/2020/texmf-local/web2c,/usr/local/texlive/2020/texmf-dist/web2c,/usr/local/texlive/2020/texmf/web2c}
$ kpsewhich --show-path=cnf
/usr/local/texlive/2020/bin/x86_64-linux:/usr/local/texlive/2020/bin/x86_64-linux/share/texmf-local/web2c:/usr/local/texlive/2020/bin/x86_64-linux/share/texmf-dist/web2c:/usr/local/texlive/2020/bin/x86_64-linux/share/texmf/web2c:/usr/local/texlive/2020/bin/x86_64-linux/texmf-local/web2c:/usr/local/texlive/2020/bin/x86_64-linux/texmf-dist/web2c:/usr/local/texlive/2020/bin/x86_64-linux/texmf/web2c:/usr/local/texlive/2020/bin:/usr/local/texlive/2020/bin/share/texmf-local/web2c:/usr/local/texlive/2020/bin/share/texmf-dist/web2c:/usr/local/texlive/2020/bin/share/texmf/web2c:/usr/local/texlive/2020/bin/texmf-local/web2c:/usr/local/texlive/2020/bin/texmf-dist/web2c:/usr/local/texlive/2020/bin/texmf/web2c:/usr/local/texlive/texmf-local/web2c:/usr/local/texlive/2020:/usr/local/texlive/2020/share/texmf-local/web2c:/usr/local/texlive/2020/share/texmf-dist/web2c:/usr/local/texlive/2020/share/texmf/web2c:/usr/local/texlive/2020/texmf-local/web2c:/usr/local/texlive/2020/texmf-dist/web2c:/usr/local/texlive/2020/texmf/web2c
$ kpsewhich -show-path=web2c
/home/myname/.texlive2020/texmf-config/web2c:/home/myname/.texlive2020/texmf-var/web2c:/home/myname/texmf/web2c:!!/usr/local/texlive/texmf-local/web2c:!!/usr/local/texlive/2020/texmf-config/web2c:!!/usr/local/texlive/2020/texmf-var/web2c:!!/usr/local/texlive/2020/texmf-dist/web2c
$ tlmgr --version
tlmgr revision 55369 (2020-06-01 02:32:00 +0200)
tlmgr using installation: /usr/local/texlive/2020
TeX Live (https://tug.org/texlive) version 2020
$ context --version
resolvers       | caches | path '/home/myname/.texlive2020/texmf-var' created
mtx-context     | ConTeXt Process Management 1.03
mtx-context     |
mtx-context     | main context file:
/usr/local/texlive/2020/texmf-dist/tex/context/base/mkiv/context.mkiv
mtx-context     | current version: 2020.03.10 14:44
mtx-context     | main context file:
/usr/local/texlive/2020/texmf-dist/tex/context/base/mkiv/context.mkxl
mtx-context     | current version: 2020.03.10 14:44

### Test ConText working
$ context --nofile

resolvers       | formats | executing runner 'run luatex format':
/usr/local/texlive/2020/bin/x86_64-linux/luatex --jobname="cont-nop"
--fmt=/home/myname/.texlive2020/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/formats/luatex/cont-en.fmt
--lua=/home/myname/.texlive2020/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/formats/luatex/cont-en.lui
cont-nop.mkiv --c:currentrun=1 --c:fulljobname="cont-nop.mkiv"
--c:input="cont-nop.mkiv" --c:kindofrun=1 --c:maxnofruns=9 --c:nofile
--c:texmfbinpath="/usr/local/texlive/2020/bin/x86_64-linux"
This is LuaTeX, Version 1.12.0 (TeX Live 2020)
 system commands enabled.
open source     > level 1, order 1, name
'/usr/local/texlive/2020/texmf-dist/tex/context/base/mkiv/cont-nop.mkiv'
system          >
system          > ConTeXt  ver: 2020.03.10 14:44 MKIV beta  fmt: 2020.9.19  int:
english/english
system          >
system          > 'cont-new.mkiv' loaded
open source     > level 2, order 2, name
'/usr/local/texlive/2020/texmf-dist/tex/context/base/mkiv/cont-new.mkiv'
system          > beware: some patches loaded from cont-new.mkiv
close source    > level 2, order 2, name
'/usr/local/texlive/2020/texmf-dist/tex/context/base/mkiv/cont-new.mkiv'
system          > files > jobname 'cont-nop', input 'cont-nop.mkiv', result
'cont-nop'
fonts           > latin modern fonts are not preloaded
languages       > language 'en' is active
system          > loading dummy replacement for jobname
system          > invalid \starttext ... \stoptext structure
fonts           > beware: no fonts are loaded yet, using 'lm mono' in box
close source    > level 1, order 2, name
'/usr/local/texlive/2020/texmf-dist/tex/context/base/mkiv/cont-nop.mkiv'

mkiv lua stats  > used config file:
selfautoparent:/texmfcnf.lua;selfautoparent:/texmf-dist/web2c/texmfcnf.lua
mkiv lua stats  > used cache path: readable+writable:
'/home/myname/.texlive2020/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9'
mkiv lua stats  > resource resolver: loadtime 0.264 seconds, 0 scans with
scantime 0.000 seconds, 0 shared scans, 7 found files, scanned paths: <none>
mkiv lua stats  > stored bytecode data: 450 modules (0.657 sec), 93 tables
(0.030 sec), 543 chunks (0.688 sec)
mkiv lua stats  > traced context: maxstack: 1398, freed: 0, unreachable: 1398
mkiv lua stats  > cleaned up reserved nodes: 53 nodes, 9 lists of 442
mkiv lua stats  > node memory usage: 8 attribute, 3 attribute_list, 2 glue, 51
glue_spec, 2 kern, 2 penalty, 2 temp, 2 user_defined
mkiv lua stats  > node list callback tasks: 8 unique task lists, 1 instances
(re)created, 2 calls
mkiv lua stats  > used backend: pdf (backend for directly generating pdf output)
mkiv lua stats  > jobdata time: 0.001 seconds saving, 0.001 seconds loading
mkiv lua stats  > callbacks: internal: 34, file: 61, direct: 2, late: 0,
function 61, total: 158
mkiv lua stats  > randomizer: resumed with value 0.99257405847311
mkiv lua stats  > result saved in file: cont-nop.pdf, compresslevel 3,
objectcompresslevel 1
mkiv lua stats  > loaded patterns: en::1, load time: 0.000
mkiv lua stats  > loaded fonts: 1 files: lmmono10-regular.otf
mkiv lua stats  > font engine: otf 3.111, afm 1.513, tfm 1.000, 1 instances,
load time 0.019 seconds
mkiv lua stats  > used platform: linux-64, type: unix, binary subtree: bin
mkiv lua stats  > used engine: luatex version: 1.12, functionality level: 7306,
banner: this is luatex, version 1.12.0 (tex live 2020)
mkiv lua stats  > control sequences: 44135 of 65536 + 100000
mkiv lua stats  > lua properties: engine: lua 5.3, used memory: 116 MB, ctx: 116
MB, max: unknown MB, hash chars: min(64,40), symbol mask: utf (???)
mkiv lua stats  > runtime: 0.704 seconds
system          | total runtime: 1.225 seconds
#############################################################

Now set auxtree for project

$ mkdir -p ~/mypath/myfolder/tex/latex
$ echo "\def\TAT{Test auxtrees}" > ~/mypath/myfolder/tex/latex/mysty.sty
$ cat ~/mypath/myfolder/tex/latex/mysty.sty
\def\TAT{Test auxtrees}
$ tlmgr conf auxtrees --conffile ~/mypath/texmf.cnf add ~/mypath/myfolder/
$ tlmgr conf auxtrees --conffile ~/mypath/texmf.cnf show
List of auxiliary texmf trees:
  /home/myname/mypath/myfolder/

So far ConText is still working, but, I can't access `mysty.sty`
$ kpsewhich mysty.sty
$ cat ~/mypath/texmf.cnf
TEXMFAUXTREES = /home/myname/mypath/myfolder/,
$ kpsewhich -all texmf.cnf
/usr/local/texlive/2020/texmf.cnf
/usr/local/texlive/2020/texmf-dist/web2c/texmf.cnf

For the system to detect my `texmf.cnf`, I need to configure the variable
$TEXMFCNF
(I do not have permission to write outside my account, I can only modify the
ones under "~/")

$ export TEXMFCNF=~/mypath:
$ echo $TEXMFCNF
/home/myname/mypath:
$ kpsewhich -all texmf.cnf
/home/myname/mypath/texmf.cnf
/usr/local/texlive/2020/texmf.cnf
/usr/local/texlive/2020/texmf-dist/web2c/texmf.cnf
$ kpsewhich -var-value=TEXMFCNF
/home/myname/mypath:
$ kpsewhich mysty.sty
/home/myname/mypath/myfolder/tex/latex/mysty.sty

So far everything OK, (pdf/lua)latex works fine, but ConText fails:

$ context --version
mtxrun          | forcing cache reload
resolvers       | resolving | looking for regular 'texmfcnf.lua' on weird path
'/home/myname/mypath:' from specification '/home/myname/mypath:'
resolvers       | resolving | looking for fallback 'contextcnf.lua' on weird
path '/home/myname/mypath:' from specification '/home/myname/mypath:'
resolvers       | resolving |
resolvers       | resolving | warning: no lua configuration files found
resolvers       | resolving | no texmf paths are defined (using TEXMF)
resolvers       | resolving |
mtxrun          | the resolver databases are not present or outdated
resolvers       | resolving | using suffix based filetype 'lua'
resolvers       | resolving | remembering file 'mtx-context.lua' using hash
'lua::mtx-context.lua'
resolvers       | resolving | using suffix based filetype 'lua'
resolvers       | resolving | remembering file 'mtx-contexts.lua' using hash
'lua::mtx-contexts.lua'
resolvers       | resolving | remembered file 'mtx-context.lua'
resolvers       | resolving | using suffix based filetype 'lua'
resolvers       | resolving | remembering file 'mtx-t-context.lua' using hash
'lua::mtx-t-context.lua'
resolvers       | resolving | using suffix based filetype 'lua'
resolvers       | resolving | remembering file 'mtx-t-contexts.lua' using hash
'lua::mtx-t-contexts.lua'
resolvers       | resolving | remembered file 'mtx-t-context.lua'
resolvers       | resolving | using suffix based filetype 'lua'
resolvers       | resolving | remembering file 'context.lua' using hash
'lua::context.lua'
mtxrun          | unknown script 'context.lua' or 'mtx-context.lua'

When ConText works OK, this is the line you are looking for:
mkiv lua stats > used config file:
selfautoparent:/texmfcnf.lua;selfautoparent:/texmf-dist/web2c/texmfcnf.lua

When I add 'export' it fails and throws:
resolvers       | resolving | looking for regular 'texmfcnf.lua' on weird path
'/home/myname/mypath:' from specification '/home/myname/mypath:'
resolvers       | resolving | looking for fallback 'contextcnf.lua' on weird
path '/home/myname/mypath:' from specification '/home/myname/mypath:'

Here I am lost, I don't know if the problem is the use of `export` (that the
line is mistyped) or the `texmfcnf.lua` file must be copied in some path for
ConText to find it.

Best for all
Pablo


From naveen at syrusdark.website  Sun Sep 20 10:12:29 2020
From: naveen at syrusdark.website (Naveen M K)
Date: Sun, 20 Sep 2020 13:42:29 +0530
Subject: =?utf-8?B?4oCLSXNzdWUgb24gSW5mcmEtb25seSBJbnN0YWxs?=
Message-ID: <158431600588896@mail.yandex.com>

Hi,
I found an issue while installing Infra-Only using Profile below
```
selected_scheme scheme-infraonly
TEXDIR C:\texlive\
```
I have attached a copy also.

Here are the logs for Github Actions  https://github.com/naveen521kk/chocolatey-texlive/runs/1139761663?check_suite_focus=true#step:5:58

Here, it exits with status code `status 53` which according to https://docs.microsoft.com/en-us/windows/win32/debug/system-error-codes--0-499-?redirectedfrom=MSDN means 
> The network path was not found.

Is there anything that can be done to fix it?

PS. This happened while I was working on chocolatey package which as you could see is pretty much complete except these errors.

Best,
Naveen 
@naveen521kk
-------------- next part --------------
A non-text attachment was scrubbed...
Name: texlive.profile
Type: application/octet-stream
Size: 52 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20200920/edc002c5/attachment.obj>

From news3 at nililand.de  Sun Sep 20 17:29:12 2020
From: news3 at nililand.de (Ulrike Fischer)
Date: Sun, 20 Sep 2020 17:29:12 +0200
Subject: How to adjust the $TEXMFCNF variable not to interfere with
 ConText?
References: <CANeU4n9QAhrmMLf_Gg8bT=NOgb8qJuJ1K+xqWZVq+-R=W0DL=A@mail.gmail.com>
 <202009192116.08JLGdWl030181@freefriends.org>
Message-ID: <19wreaf9sv5aq$.dlg@nililand.de>

Am Sat, 19 Sep 2020 15:16:39 -0600 schrieb Karl Berry:

> Hi Pablo - if you can give me a recipe for how to reproduce the
> problems,

well his main problem is that all locations where kpsewhich looks
for a texmf.cnf by default (as reported by kpsewhich -show-path=cnf)
are not writable for him. 

So he can't configure texlive unless he sets the environment
variable TEXMFCNF to point to a local texmf.cnf, but this breaks
context. 

I don't see what texlive could do here. Imho it sounds like
something that should be corrected in context. (When I had a similar
problem some years ago I set up a script to call context which did
reset TEXMFCNF, but perhaps a local context configuration file would
work too.)  

-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From karl at freefriends.org  Sun Sep 20 23:49:43 2020
From: karl at freefriends.org (Karl Berry)
Date: Sun, 20 Sep 2020 15:49:43 -0600
Subject: How to adjust the $TEXMFCNF variable not to interfere with
 ConText?
In-Reply-To: <CANeU4n8ME+1ijzV41BPREoto=hRizk4ze_TJTvtkFkHR+Rb6Aw@mail.gmail.com>
Message-ID: <202009202149.08KLnh47016287@freefriends.org>

Thanks for the recipe. Reading through this, I have three (separate) ideas
before going further (maybe try them in reverse order :):

1) cp texmfcnf.lua from the regular tree to ~/mypath/texmfcnf.lua,
and see if that makes context happy. (I have no great hope, but maybe.)

Or:

2) Explicitly include both the personal and system directories in
   TEXMFCNF:
export TEXMFCNF=~/mypath:/usr/local/texlive/2020:/usr/local/texlive/2020/texmf-dist/web2c

Or:

3) If the goal is to read a tree at ~/mypath, how about simply setting
   TEXMFHOME to that?
export TEXMFHOME=~/mypath
   That seems like it would be the simplest approach.


One more thing, not a solution, but a further question: what happens if,
instead of setting auxtrees via tlmgr conf, you do (including the
trailing comma):
  export TEXMFAUXTREES=/home/myname/mypath/myfolder/,
And then don't mess with the TEXMFCNF envvar or texmf.cnf files at all? -k

From pablgonz at educarchile.cl  Mon Sep 21 01:04:56 2020
From: pablgonz at educarchile.cl (=?UTF-8?Q?Pablo_Gonz=C3=A1lez_L?=)
Date: Sun, 20 Sep 2020 20:04:56 -0300
Subject: How to adjust the $TEXMFCNF variable not to interfere with
 ConText?
In-Reply-To: <CANeU4n-FaSQEpQrB5SzrD9wne+yngPJVJw1GWudB1oLaxg7kQw@mail.gmail.com>
References: <CANeU4n8ME+1ijzV41BPREoto=hRizk4ze_TJTvtkFkHR+Rb6Aw@mail.gmail.com>
 <202009202149.08KLnh47016287@freefriends.org>
 <CANeU4n-FaSQEpQrB5SzrD9wne+yngPJVJw1GWudB1oLaxg7kQw@mail.gmail.com>
Message-ID: <CANeU4n8C_6X6_6vtvjQ5iR5JpddxFmX71iAwZ0-L8jC9cOsV-Q@mail.gmail.com>

> 1) cp texmfcnf.lua from the regular tree to ~/mypath/texmfcnf.lua,
> and see if that makes context happy. (I have no great hope, but maybe.)
>
> Or:
>
> 2) Explicitly include both the personal and system directories in
>    TEXMFCNF:
> export TEXMFCNF=~/mypath:/usr/local/texlive/2020:/usr/local/texlive/2020/texmf-dist/web2c

As you had expected, these two options do not solve the problem :(

> 3) If the goal is to read a tree at ~/mypath, how about simply setting
>    TEXMFHOME to that?
> export TEXMFHOME=~/mypath
>    That seems like it would be the simplest approach.
export TEXMFHOME=~/mypath/myfolder
It's more convenient than what I've been doing up to now (copying under
~/texmf), but I've been having trouble synchronizing my copies with the files in
Git.

> One more thing, not a solution, but a further question: what happens if,
> instead of setting auxtrees via tlmgr conf, you do (including the
> trailing comma):
>   export TEXMFAUXTREES=/home/myname/mypath/myfolder/,
> And then don't mess with the TEXMFCNF envvar or texmf.cnf files at all? -k

This line (including the comma) is the key to everything :)
export TEXMFAUXTREES=/home/myname/mypath/myfolder/,

This line (including the comma) is the key to everything :)
As Ulrike Fischer commented in this same thread, since I don't have access to
write in the places where `texmf.cnf` is searched and the only option I had for
to find my local copy was to set TEXMFCNF (which breaks ConText), it's best
not to use `texmf.cnf`.

I have looked at the documentation several times and did not find any examples
with the comma at the end for setting vars.

According to what Reinhard said in this same thread, the texmf.cnf file should
have been the right one to do this task (and not the environment variables),
unfortunately without having write permissions outside my account it's
impossible.

A question for the future
You could set a default location under "~/" where you look for 'textf.cnf' (and
that does not break ConText)?
In this specific case, the user accounts are all limited (which is good), I
assume that the windows users will have the same inconvenience.

Grateful for the help given, I will contact those in charge of the project to
see if they can make the modification for everyone.
Saludos

From zdenek.wagner at gmail.com  Mon Sep 21 11:00:30 2020
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 21 Sep 2020 11:00:30 +0200
Subject: How to adjust the $TEXMFCNF variable not to interfere with
 ConText?
In-Reply-To: <CANeU4n8C_6X6_6vtvjQ5iR5JpddxFmX71iAwZ0-L8jC9cOsV-Q@mail.gmail.com>
References: <CANeU4n8ME+1ijzV41BPREoto=hRizk4ze_TJTvtkFkHR+Rb6Aw@mail.gmail.com>
 <202009202149.08KLnh47016287@freefriends.org>
 <CANeU4n-FaSQEpQrB5SzrD9wne+yngPJVJw1GWudB1oLaxg7kQw@mail.gmail.com>
 <CANeU4n8C_6X6_6vtvjQ5iR5JpddxFmX71iAwZ0-L8jC9cOsV-Q@mail.gmail.com>
Message-ID: <CAC1phyZncZuGLrq0sSBF4eeQEYm2zKUppb9vbcxVgci6zpPH+A@mail.gmail.com>

po 21. 9. 2020 v 1:05 odes?latel Pablo Gonz?lez L
<pablgonz at educarchile.cl> napsal:
> ...
>
>
> A question for the future
> You could set a default location under "~/" where you look for 'textf.cnf' (and
> that does not break ConText)?

~/.texliveYYYY/texmf.cnf seems to me as a good place

> In this specific case, the user accounts are all limited (which is good), I
> assume that the windows users will have the same inconvenience.
>
> Grateful for the help given, I will contact those in charge of the project to
> see if they can make the modification for everyone.
> Saludos


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz


From karl at freefriends.org  Mon Sep 21 23:24:28 2020
From: karl at freefriends.org (Karl Berry)
Date: Mon, 21 Sep 2020 15:24:28 -0600
Subject: How to adjust the $TEXMFCNF variable not to interfere with
 ConText?
In-Reply-To: <CAC1phyZncZuGLrq0sSBF4eeQEYm2zKUppb9vbcxVgci6zpPH+A@mail.gmail.com>
Message-ID: <202009212124.08LLOSBW017553@freefriends.org>

    > You could set a default location under "~/" where you look for
    > 'textf.cnf'

The problem is security. If we look under ~ for texmf.cnf, there is
none. -k

From adrian at planetcoding.net  Wed Sep 23 22:56:17 2020
From: adrian at planetcoding.net (Adrian)
Date: Wed, 23 Sep 2020 22:56:17 +0200
Subject: Why is `openin_any = p` restricting access to packages in TEXMFDIST?
Message-ID: <1207086535.20200923225617@planetcoding.net>

Hi,

since recent texlive 2020 versions (not sure when exactly, but I did not have
the problem with texlive 2019 for sure) `openin_any = p` started restricting
access to packages in TEXMFDIST as well:

I'm using `openin_any = p` (set in a custom `TEXMFCNF`) as an additional line of
defense in an application that runs on (partially) user-provided LaTeX code.

Now I'm getting this error when building pretty much any document that uses
packages:

```
/opt/texlive/bin/x86_64-linux/xelatex: Not reading from /opt/texlive/texmf-dist/tex/latex/l3packages/xparse/xparse-generic.tex (openin_any = p).
! LaTeX3 Error: File 'xparse-generic.tex' not found.
```

>From what I understood when googling, even with `openin_any = p` files in
`TEXMFDIST` are supposed to be fine. Is this a bug, or is this an intentional
change. In any case, I'm looking for a solution that allows access to anything
in `TEXMFDIST` in addition to the directory containing my tex file.

According to my TeX Stack Exchange question [1], a minimal document triggering the
error is \documentclass{article}\usepackage{xparse}\begin{document}\end{document}

[1] https://tex.stackexchange.com/q/563920/1651

Cheers
Adrian



From kakuto at w32tex.org  Thu Sep 24 00:53:30 2020
From: kakuto at w32tex.org (Akira Kakuto)
Date: Thu, 24 Sep 2020 07:53:30 +0900
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <1207086535.20200923225617@planetcoding.net>
References: <1207086535.20200923225617@planetcoding.net>
Message-ID: <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>

On 2020/09/24 5:56, Adrian wrote:
> According to my TeX Stack Exchange question [1], a minimal document triggering the
> error is \documentclass{article}\usepackage{xparse}\begin{document}\end{document}

Probably, it is due to changes in latex.

In general, probably, files found internally by kpse

can be read even in the case openin_any=p.

However if full path etc. are found in sources or command line,

some files may be rejected to read by kpse_in_name_ok():

latex sample2e.tex

works, however

latex full_path_of_sample2e.tex

does not work.


Best,

Akira


From phe.h.o1 at gmail.com  Thu Sep 24 01:25:30 2020
From: phe.h.o1 at gmail.com (Phelype Oleinik)
Date: Wed, 23 Sep 2020 20:25:30 -0300
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>
References: <1207086535.20200923225617@planetcoding.net>
 <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>
Message-ID: <CANfjC09R3qp5Byq2sb3iZg84nRaFxHfTnH6EnhxgiEdXCFzS=Q@mail.gmail.com>

Hi Akira,

On Wed, Sep 23, 2020 at 7:54 PM Akira Kakuto <kakuto at w32tex.org> wrote:
>
> On 2020/09/24 5:56, Adrian wrote:
> > According to my TeX Stack Exchange question [1], a minimal document triggering the
> > error is \documentclass{article}\usepackage{xparse}\begin{document}\end{document}
>
> Probably, it is due to changes in latex.

It is related to how LaTeX determines if a file exists, yes:  some time
ago we changed from \openin...\ifeof to looking at the output of
\pdffilesize to determine if a file exists.  But it is not LaTeX's
fault: \pdffilesize fails with the same error using plain:

    export openin_any=p && pdftex '\pdffilesize{sample2e.tex}\bye'

Best,
Phelype

From kakuto at w32tex.org  Thu Sep 24 02:05:56 2020
From: kakuto at w32tex.org (Akira Kakuto)
Date: Thu, 24 Sep 2020 09:05:56 +0900
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <CANfjC09R3qp5Byq2sb3iZg84nRaFxHfTnH6EnhxgiEdXCFzS=Q@mail.gmail.com>
References: <1207086535.20200923225617@planetcoding.net>
 <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>
 <CANfjC09R3qp5Byq2sb3iZg84nRaFxHfTnH6EnhxgiEdXCFzS=Q@mail.gmail.com>
Message-ID: <d976eac8-7e46-7596-1629-3b7d8ef5a23b@w32tex.org>

Hi Phelype,

On 2020/09/24 8:25, Phelype Oleinik wrote:
> It is related to how LaTeX determines if a file exists, yes:  some time
> ago we changed from \openin...\ifeof to looking at the output of
> \pdffilesize to determine if a file exists.  But it is not LaTeX's
> fault: \pdffilesize fails with the same error using plain:
> 
>      export openin_any=p && pdftex '\pdffilesize{sample2e.tex}\bye'

OK, I'll consider to improve related functions.

Thanks,
Akira

From kakuto at w32tex.org  Thu Sep 24 02:34:47 2020
From: kakuto at w32tex.org (Akira Kakuto)
Date: Thu, 24 Sep 2020 09:34:47 +0900
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <d976eac8-7e46-7596-1629-3b7d8ef5a23b@w32tex.org>
References: <1207086535.20200923225617@planetcoding.net>
 <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>
 <CANfjC09R3qp5Byq2sb3iZg84nRaFxHfTnH6EnhxgiEdXCFzS=Q@mail.gmail.com>
 <d976eac8-7e46-7596-1629-3b7d8ef5a23b@w32tex.org>
Message-ID: <d508d2ff-75cb-20f3-adef-e6388a030665@w32tex.org>


On 2020/09/24 9:05, Akira Kakuto wrote:
> OK, I'll consider to improve related functions.

Done in TeX Live, r56417.

Best,
Akira

From phe.h.o1 at gmail.com  Thu Sep 24 02:54:49 2020
From: phe.h.o1 at gmail.com (Phelype Oleinik)
Date: Wed, 23 Sep 2020 21:54:49 -0300
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <d508d2ff-75cb-20f3-adef-e6388a030665@w32tex.org>
References: <1207086535.20200923225617@planetcoding.net>
 <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>
 <CANfjC09R3qp5Byq2sb3iZg84nRaFxHfTnH6EnhxgiEdXCFzS=Q@mail.gmail.com>
 <d976eac8-7e46-7596-1629-3b7d8ef5a23b@w32tex.org>
 <d508d2ff-75cb-20f3-adef-e6388a030665@w32tex.org>
Message-ID: <CANfjC08NTu7AK5Linj+YgzaOtBwy5DtQk1JkX_1WGPnZd5dP8A@mail.gmail.com>

On Wed, Sep 23, 2020 at 9:34 PM Akira Kakuto <kakuto at w32tex.org> wrote:
>
> On 2020/09/24 9:05, Akira Kakuto wrote:
> > OK, I'll consider to improve related functions.
>
> Done in TeX Live, r56417.

That was fast!
Thanks :-)

Phelype

From adrian at planetcoding.net  Thu Sep 24 10:54:43 2020
From: adrian at planetcoding.net (Adrian)
Date: Thu, 24 Sep 2020 10:54:43 +0200
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>
References: <1207086535.20200923225617@planetcoding.net>
 <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>
Message-ID: <734382566.20200924105443@planetcoding.net>

I see that you made a commit to change something in the logic there
(unfortunately I can't reply directly to that email since I never received
it; probably because it wasn't a directly reply to me and I'm not subscribed
to the mailing list).

Does that commit restore the old behavior about being able to use packages even
with `openin_any = p`? At least the commit message sounds like it made checks
more strict...

If it doesn't revert to the old logic: What's the solution to get the old
behavior, i.e.:

- being able to use packages from TEXMFDIST
- not being able to read any arbitrary files (no matter if they are dot files or
  not) from outside the working directory


From P.Taylor at Hellenic-Institute.Uk  Thu Sep 24 10:58:30 2020
From: P.Taylor at Hellenic-Institute.Uk (Philip Taylor)
Date: Thu, 24 Sep 2020 09:58:30 +0100
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <734382566.20200924105443@planetcoding.net>
References: <1207086535.20200923225617@planetcoding.net>
 <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>
 <734382566.20200924105443@planetcoding.net>
Message-ID: <600b4f60-4bfe-f461-dd4b-48fda5d458df@Hellenic-Institute.Uk>

An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200924/b491a06d/attachment.html>

From adrian at planetcoding.net  Thu Sep 24 10:59:47 2020
From: adrian at planetcoding.net (Adrian)
Date: Thu, 24 Sep 2020 10:59:47 +0200
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <600b4f60-4bfe-f461-dd4b-48fda5d458df@Hellenic-Institute.Uk>
References: <1207086535.20200923225617@planetcoding.net> 
 <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>
 <734382566.20200924105443@planetcoding.net>
 <600b4f60-4bfe-f461-dd4b-48fda5d458df@Hellenic-Institute.Uk>
Message-ID: <162134569.20200924105947@planetcoding.net>

Don't people usually keep the original sender in CC; I'm also checking the
archive for replies. What I don't want it getting emails from unrelated topics
questions... (reasons why I hate using mailing lists)


> Adrian wrote:  

>     
>   
> I see that you made a commit to change something in the logic there
> (unfortunately I can't reply directly to that email since I never received
> it; probably because it wasn't a directly reply to me and I'm not subscribed
> to the mailing list).
>   
>   
> What is the point of asking a question on a mailing list if you       do not
> subscribe to that list in order to be able to read replies       ?
>   
> Philip Taylor
>   


From P.Taylor at Hellenic-Institute.Uk  Thu Sep 24 11:02:06 2020
From: P.Taylor at Hellenic-Institute.Uk (Philip Taylor)
Date: Thu, 24 Sep 2020 10:02:06 +0100
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <162134569.20200924105947@planetcoding.net>
References: <1207086535.20200923225617@planetcoding.net>
 <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>
 <734382566.20200924105443@planetcoding.net>
 <600b4f60-4bfe-f461-dd4b-48fda5d458df@Hellenic-Institute.Uk>
 <162134569.20200924105947@planetcoding.net>
Message-ID: <0437e514-2da8-5fa8-44de-baea7e8139d2@Hellenic-Institute.Uk>

An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200924/c421eb26/attachment.html>

From phe.h.o1 at gmail.com  Thu Sep 24 11:09:05 2020
From: phe.h.o1 at gmail.com (Phelype Oleinik)
Date: Thu, 24 Sep 2020 06:09:05 -0300
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <734382566.20200924105443@planetcoding.net>
References: <1207086535.20200923225617@planetcoding.net>
 <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>
 <734382566.20200924105443@planetcoding.net>
Message-ID: <CANfjC0_d3ou4OrZFV2aBc-hRvKPcfOM9am7PqyHcd4=6bw9h9Q@mail.gmail.com>

On Thu, Sep 24, 2020 at 5:56 AM Adrian <adrian at planetcoding.net> wrote:
>
> I see that you made a commit to change something in the logic there
> (unfortunately I can't reply directly to that email since I never received
> it; probably because it wasn't a directly reply to me and I'm not subscribed
> to the mailing list).
>
> Does that commit restore the old behavior about being able to use packages even
> with `openin_any = p`? At least the commit message sounds like it made checks
> more strict...

Hi Adrian,

With openin_any=p you can load most LaTeX packages normally.  The issue
specific to xparse(-generic.tex) is that it uses a \pdffilesize-based
(expandable) test to check whether a file exists, and as I said in my
previous mail, \pdffilesize fails with openin_any=p:

    export openin_any=p && pdftex '\pdffilesize{sample2e.tex}\bye'

and that's what Akira-san's patch addresses.

This "old behaviour" you mention is that until a few months ago xparse
was all loaded in one go in xparse.sty as most packages are (and work as
they always did), but now it is split into the "loader" (and legacy---do
not use---interfaces) and the bulk of the code in xparse-generic.tex.
Since the latter uses \pdffilesize, it fails with openin_any=p.

Best
Phelype

From adrian at planetcoding.net  Thu Sep 24 11:11:44 2020
From: adrian at planetcoding.net (Adrian)
Date: Thu, 24 Sep 2020 11:11:44 +0200
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <CANfjC0_d3ou4OrZFV2aBc-hRvKPcfOM9am7PqyHcd4=6bw9h9Q@mail.gmail.com>
References: <1207086535.20200923225617@planetcoding.net> 
 <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>
 <734382566.20200924105443@planetcoding.net>
 <CANfjC0_d3ou4OrZFV2aBc-hRvKPcfOM9am7PqyHcd4=6bw9h9Q@mail.gmail.com>
Message-ID: <5814103.20200924111144@planetcoding.net>

Thanks for the clarification! I wasn't sure how the \pdffilesize comment was
related to my initial problem, now I do. :)

Is there some way I can get the updated version with tlmgr to test if it's
working now? Not sure how quickly commits from SVN make it into anything
downloadable through tlmgr.

- Adrian

> On Thu, Sep 24, 2020 at 5:56 AM Adrian <adrian at planetcoding.net> wrote:
>>
>> I see that you made a commit to change something in the logic there
>> (unfortunately I can't reply directly to that email since I never received
>> it; probably because it wasn't a directly reply to me and I'm not subscribed
>> to the mailing list).
>>
>> Does that commit restore the old behavior about being able to use packages even
>> with `openin_any = p`? At least the commit message sounds like it made checks
>> more strict...

> Hi Adrian,

> With openin_any=p you can load most LaTeX packages normally.  The issue
> specific to xparse(-generic.tex) is that it uses a \pdffilesize-based
> (expandable) test to check whether a file exists, and as I said in my
> previous mail, \pdffilesize fails with openin_any=p:

>     export openin_any=p && pdftex '\pdffilesize{sample2e.tex}\bye'

> and that's what Akira-san's patch addresses.

> This "old behaviour" you mention is that until a few months ago xparse
> was all loaded in one go in xparse.sty as most packages are (and work as
> they always did), but now it is split into the "loader" (and legacy---do
> not use---interfaces) and the bulk of the code in xparse-generic.tex.
> Since the latter uses \pdffilesize, it fails with openin_any=p.

> Best
> Phelype


From kakuto at w32tex.org  Thu Sep 24 11:15:26 2020
From: kakuto at w32tex.org (Akira Kakuto)
Date: Thu, 24 Sep 2020 18:15:26 +0900
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <734382566.20200924105443@planetcoding.net>
References: <1207086535.20200923225617@planetcoding.net>
 <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>
 <734382566.20200924105443@planetcoding.net>
Message-ID: <b9480394-e009-ac24-3754-6fdd37c02316@w32tex.org>

On 2020/09/24 17:54, Adrian wrote:
> Does that commit restore the old behavior about being able to use packages even
> with `openin_any = p`?

Yes, I confirmed that

\documentclass{article}
\usepackage{xparse}
\begin{document}
\end{document}

works for latex in the case openin_any = p.

It is necessary to rebuild binaries with the new sources.

Best,
Akira

From adrian at planetcoding.net  Thu Sep 24 11:20:08 2020
From: adrian at planetcoding.net (Adrian)
Date: Thu, 24 Sep 2020 11:20:08 +0200
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <b9480394-e009-ac24-3754-6fdd37c02316@w32tex.org>
References: <1207086535.20200923225617@planetcoding.net> 
 <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>
 <734382566.20200924105443@planetcoding.net>
 <b9480394-e009-ac24-3754-6fdd37c02316@w32tex.org>
Message-ID: <568354583.20200924112008@planetcoding.net>

Great!

Any chance you could try with this "real" tex file as well (just in case there's
anything else that triggered the error)? https://fd.aeum.net/latex-test.tar

> On 2020/09/24 17:54, Adrian wrote:
>> Does that commit restore the old behavior about being able to use packages even
>> with `openin_any = p`?

> Yes, I confirmed that

> \documentclass{article}
> \usepackage{xparse}
> \begin{document}
> \end{document}

> works for latex in the case openin_any = p.

> It is necessary to rebuild binaries with the new sources.

> Best,
> Akira


From d.p.carlisle at gmail.com  Thu Sep 24 11:23:41 2020
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Thu, 24 Sep 2020 10:23:41 +0100
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <568354583.20200924112008@planetcoding.net>
References: <1207086535.20200923225617@planetcoding.net>
 <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>
 <734382566.20200924105443@planetcoding.net>
 <b9480394-e009-ac24-3754-6fdd37c02316@w32tex.org>
 <568354583.20200924112008@planetcoding.net>
Message-ID: <CAEW6iOgc70T21fZ0Y0VXKU24qw+SyFOPP65XtcSA=U0rRAD_yw@mail.gmail.com>

I temporary workaround until the new binaries are available would be to use

\expandafter\let\csname file_input:n\endcsname\input
\documentclass{article}
\usepackage{xparse}
\begin{document}
\end{document}

this reverts to the non-expandable \openin test to check a file exists so
could fail in some theoretical contexts but it works in this real context,
so a good workaround for now, I think.


On Thu, 24 Sep 2020 at 10:21, Adrian <adrian at planetcoding.net> wrote:

> Great!
>
> Any chance you could try with this "real" tex file as well (just in case
> there's
> anything else that triggered the error)?
> https://fd.aeum.net/latex-test.tar
>
> > On 2020/09/24 17:54, Adrian wrote:
> >> Does that commit restore the old behavior about being able to use
> packages even
> >> with `openin_any = p`?
>
> > Yes, I confirmed that
>
> > \documentclass{article}
> > \usepackage{xparse}
> > \begin{document}
> > \end{document}
>
> > works for latex in the case openin_any = p.
>
> > It is necessary to rebuild binaries with the new sources.
>
> > Best,
> > Akira
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200924/1bdd23bb/attachment.html>

From kakuto at w32tex.org  Thu Sep 24 12:00:26 2020
From: kakuto at w32tex.org (Akira Kakuto)
Date: Thu, 24 Sep 2020 19:00:26 +0900
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <568354583.20200924112008@planetcoding.net>
References: <1207086535.20200923225617@planetcoding.net>
 <4575d147-7230-5006-ee03-a6f2f7f9b42e@w32tex.org>
 <734382566.20200924105443@planetcoding.net>
 <b9480394-e009-ac24-3754-6fdd37c02316@w32tex.org>
 <568354583.20200924112008@planetcoding.net>
Message-ID: <f3af7027-dfcb-57fd-b8cb-2bcf9c2efc13@w32tex.org>

On 2020/09/24 18:20, Adrian wrote:
> Any chance you could try with this "real" tex file as well (just in case there's
> anything else that triggered the error)?https://fd.aeum.net/latex-test.tar

openin_any=p xelatex book_of_abstracts.tex
created an attached book_of_abstracts.pdf.
However changes book_of_abstracts.tex.diff were necessary
to avoid errors.

-- 
Akira
-------------- next part --------------
--- book_of_abstracts.tex.orig	Thu Sep 24 18:46:10 2020
+++ book_of_abstracts.tex	Thu Sep 24 18:49:28 2020
@@ -198,7 +198,7 @@
             
         }
         \vspace{1em}
-        \newline
+%        \newline
     
         \vspace{3em}
             
@@ -236,7 +236,7 @@
             
         }
         \vspace{1em}
-        \newline
+%        \newline
     
         \vspace{3em}
             
@@ -274,7 +274,7 @@
             
         }
         \vspace{1em}
-        \newline
+%        \newline
     
         \vspace{3em}
             
@@ -312,7 +312,7 @@
             
         }
         \vspace{1em}
-        \newline
+%        \newline
     
         \vspace{3em}
             
@@ -350,7 +350,7 @@
             
         }
         \vspace{1em}
-        \newline
+%        \newline
     
         \vspace{3em}
             
@@ -397,7 +397,7 @@
             
         }
         \vspace{1em}
-        \newline
+%        \newline
     
         \vspace{3em}
             
@@ -435,7 +435,7 @@
             
         }
         \vspace{1em}
-        \newline
+%        \newline
     
         \vspace{3em}
             
-------------- next part --------------
A non-text attachment was scrubbed...
Name: book_of_abstracts.pdf
Type: application/pdf
Size: 29555 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20200924/d5753c41/attachment-0001.pdf>

From karl at freefriends.org  Thu Sep 24 23:02:06 2020
From: karl at freefriends.org (Karl Berry)
Date: Thu, 24 Sep 2020 15:02:06 -0600
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <5814103.20200924111144@planetcoding.net>
Message-ID: <202009242102.08OL26wc032562@freefriends.org>

    Is there some way I can get the updated version with tlmgr to test
    if it's working now? 

No. Sorry.

    Not sure how quickly commits from SVN make it
    into anything downloadable through tlmgr.

There won't be new binaries for native TL until TL 2021 (April/May-ish,
most likely.)  This fix might make it into distro binaries earlier, but
I have no control or specific knowledge about that.

I'm glad DavidC provided a workaround for now. Thanks David.
(Even further ... maybe xparse could be changed, somehow, until the next
release is out, so as not to fail here?)

Best,
Karl

P.S. It is correct that people "should" include you on CC's, and it's
also good that you're checking the archives for replies, because
sometimes people don't :(. It is perfectly fine not to be subscribed to
post; this is the case for nearly all tug (and gnu, as it happens) lists.

From d.p.carlisle at gmail.com  Fri Sep 25 10:44:52 2020
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Fri, 25 Sep 2020 09:44:52 +0100
Subject: Why is `openin_any = p` restricting access to packages in
 TEXMFDIST?
In-Reply-To: <202009242102.08OL26wc032562@freefriends.org>
References: <5814103.20200924111144@planetcoding.net>
 <202009242102.08OL26wc032562@freefriends.org>
Message-ID: <CAEW6iOjBm_J7VM+HLKquFt43yDMS44c_hkK5qKUzb_yuR9N-Rg@mail.gmail.com>

On Thu, 24 Sep 2020 at 22:03, Karl Berry <karl at freefriends.org> wrote:

>     Is there some way I can get the updated version with tlmgr to test
>     if it's working now?
>
> No. Sorry.
>
>     Not sure how quickly commits from SVN make it
>     into anything downloadable through tlmgr.
>
> There won't be new binaries for native TL until TL 2021 (April/May-ish,
> most likely.)  This fix might make it into distro binaries earlier, but
> I have no control or specific knowledge about that.
>
> I'm glad DavidC provided a workaround for now. Thanks David.
> (Even further ... maybe xparse could be changed, somehow, until the next
> release is out, so as not to fail here?)
>

Done for the upcoming October LaTeX release: this xparse input will avoid
the \pdffilesize test so will work.

Other uses of \pdffilesize (and more or less any use of lualatex) will
still fail with openin_any=p
but that is as it has been for some time. Thanks to Akira for adjusting the
binaries for tl2021.

David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200925/ace2ec17/attachment.html>

From pablgonz at educarchile.cl  Fri Sep 25 15:12:10 2020
From: pablgonz at educarchile.cl (=?UTF-8?Q?Pablo_Gonz=C3=A1lez_L?=)
Date: Fri, 25 Sep 2020 10:12:10 -0300
Subject: Request for Perl module (windows TeX Live)
Message-ID: <CANeU4n_s1ncoqwk=h7OenG2fac8OWJ=3Fg20GFiDV8cXDGu4Ww@mail.gmail.com>

Hi all, is there any possibility to include the `Win32::Console::ANSI` module
in the windows version of TeX Live?
I use it in the scripts `pst2pdf` and `ltximg`, in the tests I did in
windows I
used "Straberry" or "CYGWIN" and that and the module was always installed, I
didn't realize that it wasn't included in TeX Live (win).
This causes both scripts to be broken :(

Greetings

Pablo

From siepo at bitmuis.nl  Fri Sep 25 16:33:11 2020
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Fri, 25 Sep 2020 16:33:11 +0200
Subject: Request for Perl module (windows TeX Live)
In-Reply-To: <CANeU4n_s1ncoqwk=h7OenG2fac8OWJ=3Fg20GFiDV8cXDGu4Ww@mail.gmail.com>
References: <CANeU4n_s1ncoqwk=h7OenG2fac8OWJ=3Fg20GFiDV8cXDGu4Ww@mail.gmail.com>
Message-ID: <20200925143311.GC1188@bitmuis.nl>

On Fri, Sep 25, 2020 at 10:12:10AM -0300, Pablo Gonz?lez L wrote:
> Hi all, is there any possibility to include the `Win32::Console::ANSI` module
> in the windows version of TeX Live?
> I use it in the scripts `pst2pdf` and `ltximg`, in the tests I did in
> windows I
> used "Straberry" or "CYGWIN" and that and the module was always installed, I
> didn't realize that it wasn't included in TeX Live (win).
> This causes both scripts to be broken :(

The built-in perl is intended mainly to support the TL installer and
infrastructure.  If you need more, then you can install an external
perl and add a line

TEXLIVE_WINDOWS_TRY_EXTERNAL_PERL = 1

to <TL root>/texmf.cnf

This being said, it sounds odd to me that command-line conversion
utilities (that is what they are, isn't it?) should require a module
to control the windows console.

-- 
Siep Kroonenberg

From pablgonz at educarchile.cl  Fri Sep 25 21:17:03 2020
From: pablgonz at educarchile.cl (=?UTF-8?Q?Pablo_Gonz=C3=A1lez_L?=)
Date: Fri, 25 Sep 2020 16:17:03 -0300
Subject: Request for Perl module (windows TeX Live)
Message-ID: <CANeU4n8Cru0XeJtSKvkg_5Y1vxaYX0ggr_wWuk3Q18eOEd-ggQ@mail.gmail.com>

> This being said, it sounds odd to me that command-line conversion
> utilities (that is what they are, isn't it?) should require a module
> to control the windows console.
>
> --
> Siep Kroonenberg

It is only for "aesthetics", when adding colours to the terminal using
`Term::ANSIColor` (standard module) it works well in linux, but, in windows it
shows strange characters.
Pablo

From kuroky at users.sourceforge.jp  Sat Sep 26 10:52:28 2020
From: kuroky at users.sourceforge.jp (KUROKI Yusuke)
Date: Sat, 26 Sep 2020 17:52:28 +0900
Subject: Remote's division in tlmgr
Message-ID: <CACJoV2u++n0CD=4ftoZzsGgRq9EXGwnP5k2y8FW5T_9-jiSxiw@mail.gmail.com>

Dear the developer of tlmgr: (it might be Siep, hello,)

Today I found the catalogue-version in the remote's revision column
might be wrong in the tlgmr dialog box.  Have you already known that?

Screen shot was as follows:
[image: image.png]

Best Regards,
-- KUROKI Yusuke
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200926/1ee527e7/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 138358 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20200926/1ee527e7/attachment-0001.png>

From bernhard.kleine at gmx.net  Sat Sep 26 11:08:19 2020
From: bernhard.kleine at gmx.net (Bernhard Kleine)
Date: Sat, 26 Sep 2020 11:08:19 +0200
Subject: Electricity breakdown during Format regeneration
Message-ID: <e9c0d9de-eb16-bb2a-7c17-4c5dc661fe3f@gmx.net>

Dear all,

this morning a general breakdown happened during a texlive update. Tlmgr
does no longer work. What is the recommended way to get it working again?

Kind regards

-- 
spitzhalde9
D-79853 lenzkirch
bernhard.kleine at gmx.net
www.b-kleine.com, www.urseetal.net
Ich darf auch auf mein neues Buch "Falter in Lenzkirch" aufmerksam machen 
(Infos bei mir)
-
thunderbird mit enigmail
GPG schl?ssel: D5257409
fingerprint:
08 B7 F8 70 22 7A FC C1 15 49 CA A6 C7 6F A0 2E D5 25 74 09


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://tug.org/pipermail/tex-live/attachments/20200926/f0b9e60a/attachment.sig>

From ziegenhagen at gmail.com  Sat Sep 26 11:09:45 2020
From: ziegenhagen at gmail.com (Uwe Ziegenhagen)
Date: Sat, 26 Sep 2020 11:09:45 +0200
Subject: Electricity breakdown during Format regeneration
In-Reply-To: <e9c0d9de-eb16-bb2a-7c17-4c5dc661fe3f@gmx.net>
References: <e9c0d9de-eb16-bb2a-7c17-4c5dc661fe3f@gmx.net>
Message-ID: <CAML7JCjBGvtWjqgF-iR9yL2xs2KGir=GGTBu_-En5YMSY0XW-g@mail.gmail.com>

Worst case: remove the whole directory, reinstall from scratch.

Uwe

Am Sa., 26. Sept. 2020 um 11:09 Uhr schrieb Bernhard Kleine <
bernhard.kleine at gmx.net>:

> Dear all,
>
> this morning a general breakdown happened during a texlive update. Tlmgr
> does no longer work. What is the recommended way to get it working again?
>
> Kind regards
>
> --
> spitzhalde9
> D-79853 lenzkirch
> bernhard.kleine at gmx.net
> www.b-kleine.com, www.urseetal.net
> Ich darf auch auf mein neues Buch "Falter in Lenzkirch" aufmerksam machen
> (Infos bei mir)
> -
> thunderbird mit enigmail
> GPG schl?ssel: D5257409
> fingerprint:
> 08 B7 F8 70 22 7A FC C1 15 49 CA A6 C7 6F A0 2E D5 25 74 09
>
>
>

-- 
Dr. Uwe Ziegenhagen
0179-7476050
<http://www.uweziegenhagen.de>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200926/b4178ed3/attachment.html>

From siepo at bitmuis.nl  Sat Sep 26 11:37:09 2020
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Sat, 26 Sep 2020 11:37:09 +0200
Subject: Remote's division in tlmgr
In-Reply-To: <CACJoV2u++n0CD=4ftoZzsGgRq9EXGwnP5k2y8FW5T_9-jiSxiw@mail.gmail.com>
References: <CACJoV2u++n0CD=4ftoZzsGgRq9EXGwnP5k2y8FW5T_9-jiSxiw@mail.gmail.com>
Message-ID: <20200926093709.GA1196@bitmuis.nl>

On Sat, Sep 26, 2020 at 05:52:28PM +0900, KUROKI Yusuke wrote:
> Dear the developer of tlmgr: (it might be Siep, hello,)
> 
> Today I found the catalogue-version in the remote's revision column
> might be wrong in the tlgmr dialog box.  Have you already known that?
> 
> Screen shot was as follows:
> [image: image.png]
> 
> Best Regards,
> -- KUROKI Yusuke

I cannot reproduce this. Probably the repository was in the process
of being updated, in which case the problem should be gone if you
try again.

-- 
Siep Kroonenberg

From bernhard.kleine at gmx.net  Sat Sep 26 11:39:08 2020
From: bernhard.kleine at gmx.net (Bernhard Kleine)
Date: Sat, 26 Sep 2020 11:39:08 +0200
Subject: Electricity breakdown during Format regeneration
In-Reply-To: <CAML7JCjBGvtWjqgF-iR9yL2xs2KGir=GGTBu_-En5YMSY0XW-g@mail.gmail.com>
References: <e9c0d9de-eb16-bb2a-7c17-4c5dc661fe3f@gmx.net>
 <CAML7JCjBGvtWjqgF-iR9yL2xs2KGir=GGTBu_-En5YMSY0XW-g@mail.gmail.com>
Message-ID: <85ecebdf-d92a-c818-6308-7c726cca6844@gmx.net>

S...

Kind regards

Am 26.09.2020 um 11:09 schrieb Uwe Ziegenhagen:
> Worst case: remove the whole directory, reinstall from scratch.
>
> Uwe
>
> Am Sa., 26. Sept. 2020 um 11:09?Uhr schrieb Bernhard Kleine
> <bernhard.kleine at gmx.net <mailto:bernhard.kleine at gmx.net>>:
>
>     Dear all,
>
>     this morning a general breakdown happened during a texlive update.
>     Tlmgr
>     does no longer work. What is the recommended way to get it working
>     again?
>
>     Kind regards
>
>     -- 
>     spitzhalde9
>     D-79853 lenzkirch
>     bernhard.kleine at gmx.net <mailto:bernhard.kleine at gmx.net>
>     www.b-kleine.com <http://www.b-kleine.com>, www.urseetal.net
>     <http://www.urseetal.net>
>     Ich darf auch auf mein neues Buch "Falter in Lenzkirch" aufmerksam
>     machen
>     (Infos bei mir)
>     -
>     thunderbird mit enigmail
>     GPG schl?ssel: D5257409
>     fingerprint:
>     08 B7 F8 70 22 7A FC C1 15 49 CA A6 C7 6F A0 2E D5 25 74 09
>
>
>
>
> -- 
> Dr. Uwe Ziegenhagen
> 0179-7476050
> <http://www.uweziegenhagen.de>

-- 
spitzhalde9
D-79853 lenzkirch
bernhard.kleine at gmx.net
www.b-kleine.com, www.urseetal.net
Ich darf auch auf mein neues Buch "Falter in Lenzkirch" aufmerksam machen 
(Infos bei mir)
-
thunderbird mit enigmail
GPG schl?ssel: D5257409
fingerprint:
08 B7 F8 70 22 7A FC C1 15 49 CA A6 C7 6F A0 2E D5 25 74 09

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200926/2621b4ec/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://tug.org/pipermail/tex-live/attachments/20200926/2621b4ec/attachment-0001.sig>

From Herbert.Voss at FU-Berlin.DE  Sat Sep 26 11:44:14 2020
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Sat, 26 Sep 2020 11:44:14 +0200
Subject: Electricity breakdown during Format regeneration
In-Reply-To: <e9c0d9de-eb16-bb2a-7c17-4c5dc661fe3f@gmx.net>
References: <e9c0d9de-eb16-bb2a-7c17-4c5dc661fe3f@gmx.net>
Message-ID: <62645.79.236.220.188.1601113454.webmail@webmail.zedat.fu-berlin.de>


Bernhard Kleine schrieb:
> Dear all,
>
> this morning a general breakdown happened during a texlive update. Tlmgr
> does no longer work. What is the recommended way to get it working again?
>

Get update-tlmgr-latest.??? From
https://ctan.org/tex-archive/systems/texlive/tlnet
And run it.

Herbert


> Kind regards
>
> --
> spitzhalde9
> D-79853 lenzkirch
> bernhard.kleine at gmx.net
> www.b-kleine.com, www.urseetal.net
> Ich darf auch auf mein neues Buch "Falter in Lenzkirch" aufmerksam machen
> (Infos bei mir)
> -
> thunderbird mit enigmail
> GPG schl?ssel: D5257409
> fingerprint:
> 08 B7 F8 70 22 7A FC C1 15 49 CA A6 C7 6F A0 2E D5 25 74 09
>
>
>




From kuroky at users.sourceforge.jp  Sat Sep 26 12:12:27 2020
From: kuroky at users.sourceforge.jp (KUROKI Yusuke)
Date: Sat, 26 Sep 2020 19:12:27 +0900
Subject: Remote's division in tlmgr
In-Reply-To: <20200926093709.GA1196@bitmuis.nl>
References: <CACJoV2u++n0CD=4ftoZzsGgRq9EXGwnP5k2y8FW5T_9-jiSxiw@mail.gmail.com>
 <20200926093709.GA1196@bitmuis.nl>
Message-ID: <CACJoV2ufogeLTuZ5kypoAgHS=_1SR7ir2Uyiv1RZi3cg4zHQqA@mail.gmail.com>

>  I cannot reproduce this.

Mmm, that's too bad.  In my environment, even after reopening the tlmgr
application,
the same problem has occurred; Even if I switched the language to 'en'.
Mmm...

[image: image.png]

2020?9?26?(?) 18:37 Siep Kroonenberg <siepo at bitmuis.nl>:

> On Sat, Sep 26, 2020 at 05:52:28PM +0900, KUROKI Yusuke wrote:
> > Dear the developer of tlmgr: (it might be Siep, hello,)
> >
> > Today I found the catalogue-version in the remote's revision column
> > might be wrong in the tlgmr dialog box.  Have you already known that?
> >
> > Screen shot was as follows:
> > [image: image.png]
> >
> > Best Regards,
> > -- KUROKI Yusuke
>
> I cannot reproduce this. Probably the repository was in the process
> of being updated, in which case the problem should be gone if you
> try again.
>
> --
> Siep Kroonenberg
>


-- 
?? ?? (KUROKI Yusuke)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200926/cdb29071/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 152873 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20200926/cdb29071/attachment-0001.png>

From kmaeda at kmaeda.net  Sat Sep 26 13:12:15 2020
From: kmaeda at kmaeda.net (Kazuki Maeda)
Date: Sat, 26 Sep 2020 20:12:15 +0900
Subject: Remote's division in tlmgr
In-Reply-To: <CACJoV2ufogeLTuZ5kypoAgHS=_1SR7ir2Uyiv1RZi3cg4zHQqA@mail.gmail.com>
References: <CACJoV2u++n0CD=4ftoZzsGgRq9EXGwnP5k2y8FW5T_9-jiSxiw@mail.gmail.com>
 <20200926093709.GA1196@bitmuis.nl>
 <CACJoV2ufogeLTuZ5kypoAgHS=_1SR7ir2Uyiv1RZi3cg4zHQqA@mail.gmail.com>
Message-ID: <20200926201215.d6353321a07fdaeec7ed34ae@kmaeda.net>

Hi.

I reproduced the same problem of `tlshell`.
Note that the problem is not occurred if you use `tlmgr -gui`.
It seems that `tlmgr info` command cannot get remote catalogue version
if the package has already been installed on your local environment,
even though you execute with --only-remote.
On the other hand, tlmgrgui.pl seems to have a method to get
remote catalogue version in show_extended_info subroutine.


Best regards
Kazuki Maeda

On Sat, 26 Sep 2020 19:12:27 +0900
KUROKI Yusuke <kuroky at users.sourceforge.jp> wrote:

> >  I cannot reproduce this.
>
> Mmm, that's too bad.  In my environment, even after reopening the tlmgr
> application,
> the same problem has occurred; Even if I switched the language to 'en'.
> Mmm...
>
> [image: image.png]
>
> 2020?9?26?(?) 18:37 Siep Kroonenberg <siepo at bitmuis.nl>:
>
> > On Sat, Sep 26, 2020 at 05:52:28PM +0900, KUROKI Yusuke wrote:
> > > Dear the developer of tlmgr: (it might be Siep, hello,)
> > >
> > > Today I found the catalogue-version in the remote's revision column
> > > might be wrong in the tlgmr dialog box.  Have you already known that?
> > >
> > > Screen shot was as follows:
> > > [image: image.png]
> > >
> > > Best Regards,
> > > -- KUROKI Yusuke
> >
> > I cannot reproduce this. Probably the repository was in the process
> > of being updated, in which case the problem should be gone if you
> > try again.
> >
> > --
> > Siep Kroonenberg
> >
>
>
> --
> ?? ?? (KUROKI Yusuke)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tlshell-remote_ver.png
Type: image/png
Size: 154921 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20200926/5418b24e/attachment-0001.png>

From norbert at preining.info  Sat Sep 26 13:47:26 2020
From: norbert at preining.info (Norbert Preining)
Date: Sat, 26 Sep 2020 20:47:26 +0900
Subject: Electricity breakdown during Format regeneration
In-Reply-To: <e9c0d9de-eb16-bb2a-7c17-4c5dc661fe3f@gmx.net>
References: <e9c0d9de-eb16-bb2a-7c17-4c5dc661fe3f@gmx.net>
Message-ID: <20200926114726.GA31178@burischnitzel.preining.info>

Hi Bernhard,

> this morning a general breakdown happened during a texlive update. Tlmgr
> does no longer work. What is the recommended way to get it working again?

"Does no longer work" is a bit an unclear statement, right? THere are
about 15000 levels of what cannot work ;-)

Does it start?
Does it show any output?
Whatn arguments did you pass?
...

Best

Norbert

--
PREINING Norbert                              https://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From norbert at preining.info  Sat Sep 26 13:48:44 2020
From: norbert at preining.info (Norbert Preining)
Date: Sat, 26 Sep 2020 20:48:44 +0900
Subject: Remote's division in tlmgr
In-Reply-To: <20200926201215.d6353321a07fdaeec7ed34ae@kmaeda.net>
References: <CACJoV2u++n0CD=4ftoZzsGgRq9EXGwnP5k2y8FW5T_9-jiSxiw@mail.gmail.com>
 <20200926093709.GA1196@bitmuis.nl>
 <CACJoV2ufogeLTuZ5kypoAgHS=_1SR7ir2Uyiv1RZi3cg4zHQqA@mail.gmail.com>
 <20200926201215.d6353321a07fdaeec7ed34ae@kmaeda.net>
Message-ID: <20200926114844.GB31178@burischnitzel.preining.info>

> It seems that `tlmgr info` command cannot get remote catalogue version
> if the package has already been installed on your local environment,

I check it, please wait a bit.

Norbert

--
PREINING Norbert                              https://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From norbert at preining.info  Sat Sep 26 14:47:59 2020
From: norbert at preining.info (Norbert Preining)
Date: Sat, 26 Sep 2020 21:47:59 +0900
Subject: Remote's division in tlmgr
In-Reply-To: <20200926201215.d6353321a07fdaeec7ed34ae@kmaeda.net>
References: <CACJoV2u++n0CD=4ftoZzsGgRq9EXGwnP5k2y8FW5T_9-jiSxiw@mail.gmail.com>
 <20200926093709.GA1196@bitmuis.nl>
 <CACJoV2ufogeLTuZ5kypoAgHS=_1SR7ir2Uyiv1RZi3cg4zHQqA@mail.gmail.com>
 <20200926201215.d6353321a07fdaeec7ed34ae@kmaeda.net>
Message-ID: <20200926124759.GC31178@burischnitzel.preining.info>

Hi Siep, hi all,

> I reproduced the same problem of `tlshell`.
> Note that the problem is not occurred if you use `tlmgr -gui`.
> It seems that `tlmgr info` command cannot get remote catalogue version

So yes, tlmgr info cannot output local and remote catalogue info at the
moment. And thus, if a package is already installed, the catalogue
version shown by tlmgr info is always the local one.

It should still be possible to display the correct version, since 
tlcockpit *shows* it.

tlshell already parses the list of available updates given by
	tlmgr update --list
(Siep, is that correct?) which contains also the catalogue data on the
remote side. (This is how tlcockpit is doing it)

So this should be fixed in tlshell.

At the same time I will check how this can be included into the tlmgr
info command, but I don't want to load the rmeote database if not
necessary. I need to think about it.

Best

Norbert

--
PREINING Norbert                              https://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From siepo at bitmuis.nl  Sat Sep 26 18:11:53 2020
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Sat, 26 Sep 2020 18:11:53 +0200
Subject: Remote's division in tlmgr
In-Reply-To: <20200926124759.GC31178@burischnitzel.preining.info>
References: <CACJoV2u++n0CD=4ftoZzsGgRq9EXGwnP5k2y8FW5T_9-jiSxiw@mail.gmail.com>
 <20200926093709.GA1196@bitmuis.nl>
 <CACJoV2ufogeLTuZ5kypoAgHS=_1SR7ir2Uyiv1RZi3cg4zHQqA@mail.gmail.com>
 <20200926201215.d6353321a07fdaeec7ed34ae@kmaeda.net>
 <20200926124759.GC31178@burischnitzel.preining.info>
Message-ID: <20200926161153.GB1196@bitmuis.nl>

On Sat, Sep 26, 2020 at 09:47:59PM +0900, Norbert Preining wrote:
> Hi Siep, hi all,
> 
> > I reproduced the same problem of `tlshell`.
> > Note that the problem is not occurred if you use `tlmgr -gui`.
> > It seems that `tlmgr info` command cannot get remote catalogue version
> 
> So yes, tlmgr info cannot output local and remote catalogue info at the
> moment. And thus, if a package is already installed, the catalogue
> version shown by tlmgr info is always the local one.
> 
> It should still be possible to display the correct version, since 
> tlcockpit *shows* it.
> 
> tlshell already parses the list of available updates given by
> 	tlmgr update --list
> (Siep, is that correct?) which contains also the catalogue data on the
> remote side. (This is how tlcockpit is doing it)

I was wrong, I _can_ reproduce it.

Tlshell does not load the complete database information; it updates
the package info with

[tlmgr] info --data name,localrev,remoterev,cat-version,category,shortdesc

and then compares localrev with remoterev. So I understand that that
won't work for updating cat-version.

> At the same time I will check how this can be included into the tlmgr
> info command, but I don't want to load the rmeote database if not
> necessary. I need to think about it.

I'll wait for what you come up with.

-- 
Siep Kroonenberg

From norbert at preining.info  Mon Sep 28 00:24:04 2020
From: norbert at preining.info (Norbert Preining)
Date: Mon, 28 Sep 2020 07:24:04 +0900
Subject: Remote's division in tlmgr
In-Reply-To: <20200926161153.GB1196@bitmuis.nl>
References: <CACJoV2u++n0CD=4ftoZzsGgRq9EXGwnP5k2y8FW5T_9-jiSxiw@mail.gmail.com>
 <20200926093709.GA1196@bitmuis.nl>
 <CACJoV2ufogeLTuZ5kypoAgHS=_1SR7ir2Uyiv1RZi3cg4zHQqA@mail.gmail.com>
 <20200926201215.d6353321a07fdaeec7ed34ae@kmaeda.net>
 <20200926124759.GC31178@burischnitzel.preining.info>
 <20200926161153.GB1196@bitmuis.nl>
Message-ID: <20200927222404.GA32440@bulldog.preining.info>

Hi Siep, hi all,

> [tlmgr] info --data name,localrev,remoterev,cat-version,category,shortdesc

I have committed code such that for all the "cat-*" fields there are two
more variants
	lcat-version
	rcat-version
etc, referring to local and remote infos, respectively.

In the json output and additional field
	rcataloguedata
(type hash) is available.

Thus, Siep, with new tlmgr (from today on in tlcritical) you can do
	info --data name,localrev,remoterev,lcat-version,rcat-version,category,shortdesc
to get the complete info.

Here some examples:
$ tlmgr info --data lcat-version,rcat-version pxchfon
1.7c,1.7d

$ tlmgr info --json pxchfon |json_pp
[
   {
      "available" : true,
      "binfiles" : {},
      "binsize" : {},
      "catalogue" : null,
      "cataloguedata" : {
         "contact-repository" : "https://github.com/zr-tex8r/PXchfon",
         "ctan" : "/language/japanese/pxchfon",
         "license" : "mit",
         "topics" : "japanese font-supp",
         "version" : "1.7c"
      },
      .....
      "rcataloguedata" : {
         "contact-repository" : "https://github.com/zr-tex8r/PXchfon",
         "ctan" : "/language/japanese/pxchfon",
         "license" : "mit",
         "topics" : "japanese font-supp",
         "version" : "1.7d"
      },

Best

Norbert

--
PREINING Norbert                              https://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From siepo at bitmuis.nl  Mon Sep 28 12:26:47 2020
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Mon, 28 Sep 2020 12:26:47 +0200
Subject: Remote's division in tlmgr
In-Reply-To: <20200927222404.GA32440@bulldog.preining.info>
References: <CACJoV2u++n0CD=4ftoZzsGgRq9EXGwnP5k2y8FW5T_9-jiSxiw@mail.gmail.com>
 <20200926093709.GA1196@bitmuis.nl>
 <CACJoV2ufogeLTuZ5kypoAgHS=_1SR7ir2Uyiv1RZi3cg4zHQqA@mail.gmail.com>
 <20200926201215.d6353321a07fdaeec7ed34ae@kmaeda.net>
 <20200926124759.GC31178@burischnitzel.preining.info>
 <20200926161153.GB1196@bitmuis.nl>
 <20200927222404.GA32440@bulldog.preining.info>
Message-ID: <20200928102553.GA1189@bitmuis.nl>

On Mon, Sep 28, 2020 at 07:24:04AM +0900, Norbert Preining wrote:
> Hi Siep, hi all,
> 
> > [tlmgr] info --data name,localrev,remoterev,cat-version,category,shortdesc
> 
> I have committed code such that for all the "cat-*" fields there are two
> more variants
> 	lcat-version
> 	rcat-version
> etc, referring to local and remote infos, respectively.

Good. I can work with that.

-- 
Siep Kroonenberg

From siepo at bitmuis.nl  Mon Sep 28 17:11:42 2020
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Mon, 28 Sep 2020 17:11:42 +0200
Subject: Remote's division in tlmgr
In-Reply-To: <20200927222404.GA32440@bulldog.preining.info>
References: <CACJoV2u++n0CD=4ftoZzsGgRq9EXGwnP5k2y8FW5T_9-jiSxiw@mail.gmail.com>
 <20200926093709.GA1196@bitmuis.nl>
 <CACJoV2ufogeLTuZ5kypoAgHS=_1SR7ir2Uyiv1RZi3cg4zHQqA@mail.gmail.com>
 <20200926201215.d6353321a07fdaeec7ed34ae@kmaeda.net>
 <20200926124759.GC31178@burischnitzel.preining.info>
 <20200926161153.GB1196@bitmuis.nl>
 <20200927222404.GA32440@bulldog.preining.info>
Message-ID: <20200928151142.GB1189@bitmuis.nl>

On Mon, Sep 28, 2020 at 07:24:04AM +0900, Norbert Preining wrote:
> Hi Siep, hi all,
> 
> > [tlmgr] info --data name,localrev,remoterev,cat-version,category,shortdesc
> 
> I have committed code such that for all the "cat-*" fields there are two
> more variants
> 	lcat-version
> 	rcat-version
> etc, referring to local and remote infos, respectively.

tlshell r56461 should now take advantage of this. It tests for the
revision of texlive.infra/tlmgr whether the new fields are defined.

-- 
Siep Kroonenberg

From siepo at bitmuis.nl  Mon Sep 28 21:40:12 2020
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Mon, 28 Sep 2020 21:40:12 +0200
Subject: runscript.exe and process termination
In-Reply-To: <03c82c5b-1fa5-15e2-4f37-c0c0dbbf07ff@gmail.com>
References: <ebf11dde-51c5-a94f-ef5e-fef7046947aa@gmail.com>
 <20200919130123.GA2057@bitmuis.nl>
 <03c82c5b-1fa5-15e2-4f37-c0c0dbbf07ff@gmail.com>
Message-ID: <20200928194012.GC1189@bitmuis.nl>

On Sat, Sep 19, 2020 at 10:41:12AM -0300, Paulo Roberto Massa Cereda wrote:
> > I looked into this at some time in a different context, but could
> > not find a good solution. I shall look into it again.
> 
> Thank you very much for looking into it, Siep. If you need any help with
> testing whether an adapted version works as intended, feel free to poke the
> island. :)
> 
> Em 19/09/2020 10:01, Siep Kroonenberg escreveu:
> > I looked into this at some time in a different context, but could
> > not find a good solution. I shall look into it again.

Job objects may be a possible solution, see 
https://docs.microsoft.com/en-us/windows/win32/procthread/job-objects?redirectedfrom=MSDN
Descendant processes created with CreateProcess will be
automatically associated with the job, and will be killed
automatically when the parent job is killed. But simply turning the
binary wrapper into its own job did not work.

The binary runscript wrapper invokes the luatex dll rather than
texlua.exe. We could instead invoke texlua.exe via CreateProcess,
but I am not ready ATM to take that on, for one reason because both
the binary wrapper and runscript.tlu perform a lot of machinations
on the argument list. But maybe something can be done from editor
GUIs and from arara.

I did find a PowerShell script for recursively killing processes,
given a process ID:

https://stackoverflow.com/questions/55896492/terminate-process-tree-in-powershell-given-a-process-id

function Kill-Tree {
  Param([int]$ppid)
  Get-CimInstance Win32_Process | Where-Object { $_.ParentProcessId -eq $ppid } | ForEach-Object { Kill-Tree $_.ProcessId }
  Stop-Process -Id $ppid
}

-- 
Siep Kroonenberg

From siepo at bitmuis.nl  Mon Sep 28 21:51:36 2020
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Mon, 28 Sep 2020 21:51:36 +0200
Subject: runscript.exe and process termination
In-Reply-To: <20200928194012.GC1189@bitmuis.nl>
References: <ebf11dde-51c5-a94f-ef5e-fef7046947aa@gmail.com>
 <20200919130123.GA2057@bitmuis.nl>
 <03c82c5b-1fa5-15e2-4f37-c0c0dbbf07ff@gmail.com>
 <20200928194012.GC1189@bitmuis.nl>
Message-ID: <20200928195136.GD1189@bitmuis.nl>

On Mon, Sep 28, 2020 at 09:40:12PM +0200, Siep Kroonenberg wrote:
> On Sat, Sep 19, 2020 at 10:41:12AM -0300, Paulo Roberto Massa Cereda wrote:
> > > I looked into this at some time in a different context, but could
> > > not find a good solution. I shall look into it again.
> > 
> > Thank you very much for looking into it, Siep. If you need any help with
> > testing whether an adapted version works as intended, feel free to poke the
> > island. :)
> > 
> > Em 19/09/2020 10:01, Siep Kroonenberg escreveu:
> > > I looked into this at some time in a different context, but could
> > > not find a good solution. I shall look into it again.
> 
> Job objects may be a possible solution, see 
> https://docs.microsoft.com/en-us/windows/win32/procthread/job-objects?redirectedfrom=MSDN
> Descendant processes created with CreateProcess will be
> automatically associated with the job, and will be killed
> automatically when the parent job is killed. But simply turning the
> binary wrapper into its own job did not work.
> 
> The binary runscript wrapper invokes the luatex dll rather than
> texlua.exe. We could instead invoke texlua.exe via CreateProcess,
> but I am not ready ATM to take that on, for one reason because both
> the binary wrapper and runscript.tlu perform a lot of machinations
> on the argument list. But maybe something can be done from editor
> GUIs and from arara.
> 
> I did find a PowerShell script for recursively killing processes,
> given a process ID:
> 
> https://stackoverflow.com/questions/55896492/terminate-process-tree-in-powershell-given-a-process-id
> 
> function Kill-Tree {
>   Param([int]$ppid)
>   Get-CimInstance Win32_Process | Where-Object { $_.ParentProcessId -eq $ppid } | ForEach-Object { Kill-Tree $_.ProcessId }
>   Stop-Process -Id $ppid
> }

Luatex/texlua does not seem to keep track of process ids, and I saw
no way to do anything from within runscript.tlu.

If there are any options which I overlooked, please let me know.

-- 
Siep Kroonenberg

From achirvasub at gmail.com  Mon Sep 28 22:09:30 2020
From: achirvasub at gmail.com (AC)
Date: Mon, 28 Sep 2020 16:09:30 -0400
Subject: pdflatex on TL2020 complains about not finding l3backend-pdfmode.def
Message-ID: <B1429250-D2AD-45F5-934E-A2DBE58ECB8D@gmail.com>

I have two machines running vanilla-installed TL, migrated[0] from 2019 on both.

I have compiled with pdflatex on both just fine. 

After a recent upgrade, running 'pdflatex' (i.e. the command pdflatex <tex-file> in a linux terminal) on one of them (henceforth BAD) results in the error that l3backend-pdfmode.def cannot be found.

On the other one (henceforth GOOD) everything works fine, even though l3backend-pdfmode.def is not present there either.

On both machines I have l3backend-pdfmode.def in <path-to-texlive>/2019/texmf-dist/tex/latex/l3backend/

but GOOD runs without issues without that file in the analogous 2020 folder, whereas on BAD I have to copy that file to 

<path-to-texlive>/2020/texmf-dist/tex/latex/l3backend/

to fix the problem.

---

References:

[0] https://tug.org/texlive/upgrade.html


From d.p.carlisle at gmail.com  Mon Sep 28 22:19:52 2020
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Mon, 28 Sep 2020 21:19:52 +0100
Subject: pdflatex on TL2020 complains about not finding
 l3backend-pdfmode.def
In-Reply-To: <B1429250-D2AD-45F5-934E-A2DBE58ECB8D@gmail.com>
References: <B1429250-D2AD-45F5-934E-A2DBE58ECB8D@gmail.com>
Message-ID: <CAEW6iOg0Z7jSAzV1kKBxsmzUUP+Q49V2YwARDuS=NwfPkrh-Eg@mail.gmail.com>

the backed file is now l3backend-pdfmode.def (or l3backend-luatex.def) the
pdfmode.def file is no longer used.
If it is being referenced then either your formats didn't get remade
fmtutil-sys --all
should remake them
or you have a local format that is masking the ones made by the system
update
check with
kpsewhich --engine=pdftex --all pdflatex.fmt
that you don't have an old local pdflatex format in your input path




On Mon, 28 Sep 2020 at 21:10, AC <achirvasub at gmail.com> wrote:

> I have two machines running vanilla-installed TL, migrated[0] from 2019 on
> both.
>
> I have compiled with pdflatex on both just fine.
>
> After a recent upgrade, running 'pdflatex' (i.e. the command pdflatex
> <tex-file> in a linux terminal) on one of them (henceforth BAD) results in
> the error that l3backend-pdfmode.def cannot be found.
>
> On the other one (henceforth GOOD) everything works fine, even though
> l3backend-pdfmode.def is not present there either.
>
> On both machines I have l3backend-pdfmode.def in
> <path-to-texlive>/2019/texmf-dist/tex/latex/l3backend/
>
> but GOOD runs without issues without that file in the analogous 2020
> folder, whereas on BAD I have to copy that file to
>
> <path-to-texlive>/2020/texmf-dist/tex/latex/l3backend/
>
> to fix the problem.
>
> ---
>
> References:
>
> [0] https://tug.org/texlive/upgrade.html
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200928/a5b1a5d9/attachment.html>

From achirvasub at gmail.com  Wed Sep 30 19:02:41 2020
From: achirvasub at gmail.com (AC)
Date: Wed, 30 Sep 2020 13:02:41 -0400
Subject: pdflatex on TL2020 complains about not finding
 l3backend-pdfmode.def
In-Reply-To: <CAEW6iOg0Z7jSAzV1kKBxsmzUUP+Q49V2YwARDuS=NwfPkrh-Eg@mail.gmail.com>
References: <B1429250-D2AD-45F5-934E-A2DBE58ECB8D@gmail.com>
 <CAEW6iOg0Z7jSAzV1kKBxsmzUUP+Q49V2YwARDuS=NwfPkrh-Eg@mail.gmail.com>
Message-ID: <483611D6-2482-4534-AF14-B88DF9E2E6BC@gmail.com>

Thank you! Your first suggestion resolved it (more below).

On September 28, 2020 4:19:52 PM EDT, David Carlisle <d.p.carlisle at gmail.com> wrote:
>the backed file is now l3backend-pdfmode.def (or l3backend-luatex.def)
>the
>pdfmode.def file is no longer used.

Just curiosity: was there a typo above? You write that the backend file is l3backend-pdfmode.def, but that's exactly the file I was missing..

>If it is being referenced then either your formats didn't get remade
>fmtutil-sys --all
>should remake them

This did indeed work: after removing 'l3backend-pdfmode.def' (which I'd copied to <texlive>/2020/texmf-dist/tex/latex/backends/ manually from 2019) and running

fmtutil-sys --all

pdflatex is back in action.

>or you have a local format that is masking the ones made by the system
>update
>check with
>kpsewhich --engine=pdftex --all pdflatex.fmt
>that you don't have an old local pdflatex format in your input path
>
>
>
>
>On Mon, 28 Sep 2020 at 21:10, AC <achirvasub at gmail.com> wrote:
>
>> I have two machines running vanilla-installed TL, migrated[0] from
>2019 on
>> both.
>>
>> I have compiled with pdflatex on both just fine.
>>
>> After a recent upgrade, running 'pdflatex' (i.e. the command pdflatex
>> <tex-file> in a linux terminal) on one of them (henceforth BAD)
>results in
>> the error that l3backend-pdfmode.def cannot be found.
>>
>> On the other one (henceforth GOOD) everything works fine, even though
>> l3backend-pdfmode.def is not present there either.
>>
>> On both machines I have l3backend-pdfmode.def in
>> <path-to-texlive>/2019/texmf-dist/tex/latex/l3backend/
>>
>> but GOOD runs without issues without that file in the analogous 2020
>> folder, whereas on BAD I have to copy that file to
>>
>> <path-to-texlive>/2020/texmf-dist/tex/latex/l3backend/
>>
>> to fix the problem.
>>
>> ---
>>
>> References:
>>
>> [0] https://tug.org/texlive/upgrade.html
>>
>>


From d.p.carlisle at gmail.com  Wed Sep 30 19:12:25 2020
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Wed, 30 Sep 2020 18:12:25 +0100
Subject: pdflatex on TL2020 complains about not finding
 l3backend-pdfmode.def
In-Reply-To: <483611D6-2482-4534-AF14-B88DF9E2E6BC@gmail.com>
References: <B1429250-D2AD-45F5-934E-A2DBE58ECB8D@gmail.com>
 <CAEW6iOg0Z7jSAzV1kKBxsmzUUP+Q49V2YwARDuS=NwfPkrh-Eg@mail.gmail.com>
 <483611D6-2482-4534-AF14-B88DF9E2E6BC@gmail.com>
Message-ID: <CAEW6iOihML_BTvyVa9ZdkUBrqrXL61GG4a=JATGEA4HMPS4dxQ@mail.gmail.com>

On Wed, 30 Sep 2020 at 18:02, AC <achirvasub at gmail.com> wrote:

> Thank you! Your first suggestion resolved it (more below).
>
> On September 28, 2020 4:19:52 PM EDT, David Carlisle <
> d.p.carlisle at gmail.com> wrote:
> >the backed file is now l3backend-pdfmode.def (or l3backend-luatex.def)
> >the
> >pdfmode.def file is no longer used.
>
> Just curiosity: was there a typo above? You write that the backend file is
> l3backend-pdfmode.def, but that's exactly the file I was missing..
>

yes sorry,  l3backend-pdfmode.def is the old name and no longer needed, the
functionality is now split so l3backend-pdftex.def if you are using
pdflatex and l3backend-luatex.def if you are using lualatex.


> >If it is being referenced then either your formats didn't get remade
> >fmtutil-sys --all
> >should remake them
>
> This did indeed work: after removing 'l3backend-pdfmode.def' (which I'd
> copied to <texlive>/2020/texmf-dist/tex/latex/backends/ manually from 2019)
> and running
>
> fmtutil-sys --all
>
> pdflatex is back in action.
>
>  Good to hear:-)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20200930/6dea86c4/attachment.html>

