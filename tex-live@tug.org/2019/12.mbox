From Herbert.Voss at fu-berlin.de  Sun Dec  1 11:19:16 2019
From: Herbert.Voss at fu-berlin.de (Herbert Voss)
Date: Sun, 1 Dec 2019 11:19:16 +0100
Subject: Update error
Message-ID: <917a745a-81b2-3853-e319-eb88d2379288@fu-berlin.de>

Hi all

from todays update (macTeX)

[...]
2019-12-01 10:15:14 +0000 Warning tlu_ipctask[7436]??? fmtutil [INFO]: 
log file copied to: 
/usr/local/texlive/2019/texmf-var/web2c/luatex/dvilualatex.log
2019-12-01 10:15:14 +0000 Warning tlu_ipctask[7436]??? fmtutil [INFO]: 
/usr/local/texlive/2019/texmf-var/web2c/luatex/dvilualatex.fmt installed.
2019-12-01 10:15:14 +0000 Warning tlu_ipctask[7436]??? fmtutil [ERROR]: 
running `luatex -ini?? -jobname=dvilualatex-dev 
-progname=dvilualatex-dev dvilualatex.ini </dev/null' return status: 1
2019-12-01 10:15:14 +0000 Warning tlu_ipctask[7436]??? fmtutil [ERROR]: 
returning error due to option --strict
2019-12-01 10:15:14 +0000 Warning tlu_ipctask[7436]??? fmtutil [INFO]: 
disabled formats: 5
2019-12-01 10:15:14 +0000 Warning tlu_ipctask[7436]??? fmtutil [INFO]: 
successfully rebuilt formats: 6
2019-12-01 10:15:14 +0000 Warning tlu_ipctask[7436]??? fmtutil [INFO]: 
not selected formats: 46
2019-12-01 10:15:14 +0000 Warning tlu_ipctask[7436]??? fmtutil [INFO]: 
failed to build: 1 (luatex/dvilualatex-dev)
2019-12-01 10:15:14 +0000 Warning tlu_ipctask[7436]??? fmtutil [INFO]: 
total formats: 58
2019-12-01 10:15:14 +0000 Warning tlu_ipctask[7436]??? fmtutil [INFO]: 
exiting with status 1
2019-12-01 10:15:14 +0000 Warning tlu_ipctask[7436]
2019-12-01 10:15:14 +0000 Warning tlu_ipctask[7436]??? running 
fmtutil-sys --no-error-if-no-engine=luahbtex,luajittex,mfluajit --byfmt 
jadetex ...
2019-12-01 10:15:19 +0000 Warning tlu_ipctask[7436]??? done running 
fmtutil-sys --no-error-if-no-engine=luahbtex,luajittex,mfluajit --byfmt 
jadetex.
2019-12-01 10:15:19 +0000 Warning tlu_ipctask[7436]??? running 
fmtutil-sys --no-error-if-no-engine=luahbtex,luajittex,mfluajit --byfmt 
pdfjadetex ...
2019-12-01 10:15:24 +0000 Warning tlu_ipctask[7436]??? done running 
fmtutil-sys --no-error-if-no-engine=luahbtex,luajittex,mfluajit --byfmt 
pdfjadetex.
2019-12-01 10:15:24 +0000 Warning tlu_ipctask[7436]??? tlmgr: package 
log updated: /usr/local/texlive/2019/texmf-var/web2c/tlmgr.log
2019-12-01 10:15:24 +0000 Warning tlu_ipctask[7436]??? tlmgr: An error 
has occurred. See above messages. Exiting.
2019-12-01 10:15:24 +0000 Notice -[TLMAuthorizedOperation 
_runUntilChildExit][6787]??? kqueue noted that pid 7437 exited 
(/Library/TeX/texbin/tlmgr --repository 
ftp://ftp.fu-berlin.de/tex/CTAN/systems/texlive/tlnet --machine-readable 
--persistent-downloads update --all)
2019-12-01 10:15:24 +0000 Notice tlu_ipctask[7436]??? child process pid 
= 7437 exited
2019-12-01 10:15:25 +0000 Error tlu_ipctask[7436]??? Value of errno is 
Operation not permitted
2019-12-01 10:15:25 +0000 Error tlu_ipctask[7436]??? *** ERROR *** exit 
status of pid = 7437 was 2
2019-12-01 10:15:25 +0000 Notice -[TLMAuthorizedOperation 
_runUntilChildExit][6787]??? kqueue noted that tlu_ipctask (pid = 7436) 
exited with status 2
2019-12-01 10:15:45 +0000 Notice -[TLMLogWindowController 
awakeFromNib][6787]??? Loaded log window controller

Herbert

From karl at freefriends.org  Sun Dec  1 23:04:34 2019
From: karl at freefriends.org (Karl Berry)
Date: Sun, 1 Dec 2019 15:04:34 -0700
Subject: Update error
In-Reply-To: <917a745a-81b2-3853-e319-eb88d2379288@fu-berlin.de>
Message-ID: <201912012204.xB1M4YLK014093@freefriends.org>

   2019-12-01 10:15:14 +0000 Warning tlu_ipctask[7436] fmtutil [INFO]: 
   failed to build: 1 (luatex/dvilualatex-dev)

Somewhere under /usr/local/texlive/2019/texmf-var/web2c/ (I guess) there
should be a dvilualatex-dev.log file with whatever the failure was.
If no log file, please try making the format by hand
(mktexfmt dvilualatex-dev) to hopefully see the problem.
It worked for me. --best, karl.


From mattias.fransson at saabgroup.com  Mon Dec  2 10:00:28 2019
From: mattias.fransson at saabgroup.com (Fransson Mattias)
Date: Mon, 2 Dec 2019 09:00:28 +0000
Subject: Bad data in tlnet mirror
In-Reply-To: <20191130072006.jkgccj7vflb5mofr@bulldog.preining.info>
References: <dd11d892a3f54ef498acb72cce063bd8@saabgroup.com>
 <201911282309.xASN9JXH017653@freefriends.org>
 <9c43df697b43487d840be4346f879fdc@saabgroup.com>
 <20191129141750.wfvqrdzsuj6abydq@bulldog.preining.info>
 <5da639403af747bcab570a04c10430ec@saabgroup.com>
 <20191130072006.jkgccj7vflb5mofr@bulldog.preining.info>
Message-ID: <241e61bcf8e54b0aa831d8a114214f2e@saabgroup.com>

I've been able to pinpoint the issue! rsync did not identify some files as new even though they differed from the older version.

Using afm2pl.tar.xz to verify the checksum manually I could see that the file on my web server was the same version as the one on the dvd-image. Probably from when I did my first sync of the mirror.
rsync -av only checks timestamps and filesize, apparently that was not enough to identify that the source had data the target did not. Adding the --checksum option to rsync fixed that.

$ curl -s https://ftp.acc.umu.se/mirror/CTAN/systems/texlive/tlnet/archive/afm2pl.tar.xz | sha512sum
17a191fa347683f93f7d74e4b0be13b4690c84f0c17c084b10805aa1b5b057de6316836122114d1ebc76b1f8b4d134f6f5b08a21a8e28417f8259c3e52c12226  -

$ sha512sum /my/rsync/mirror/texlive/CTAN/systems/texlive/tlnet/archive/afm2pl.tar.xz
17a191fa347683f93f7d74e4b0be13b4690c84f0c17c084b10805aa1b5b057de6316836122114d1ebc76b1f8b4d134f6f5b08a21a8e28417f8259c3e52c12226  /my/rsync/mirror/texlive/CTAN/systems/texlive/tlnet/archive/afm2pl.tar.xz

$ curl -s http://my.mirror.ltd/texlive/tlnet/archive/afm2pl.tar.xz | sha512sum
daff35d38fc35b83fc270c3d304e2383ce43b277e3e70645f957157d6e57cfaf4ce6a9191504404a9a0a681ff2167f361612cedf920f79e243c8afb9a9f3ecb7  -

$ sha512sum dvd/archive/afm2pl.tar.xz
daff35d38fc35b83fc270c3d304e2383ce43b277e3e70645f957157d6e57cfaf4ce6a9191504404a9a0a681ff2167f361612cedf920f79e243c8afb9a9f3ecb7  dvd/archive/afm2pl.tar.xz

$ rsync --checksum -av --delete /my/rsync/mirror/texlive/CTAN/systems/texlive/tlnet/ my.mirror.ltd:/web/server/data/path/tlnet/
sending incremental file list
archive/afm2pl.tar.xz
[... 54 more files ]

Thank you for all the help and patience!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191202/064137ac/attachment.html>

From preining at logic.at  Mon Dec  2 10:07:28 2019
From: preining at logic.at (Norbert Preining)
Date: Mon, 2 Dec 2019 18:07:28 +0900
Subject: Bad data in tlnet mirror
In-Reply-To: <241e61bcf8e54b0aa831d8a114214f2e@saabgroup.com>
References: <dd11d892a3f54ef498acb72cce063bd8@saabgroup.com>
 <201911282309.xASN9JXH017653@freefriends.org>
 <9c43df697b43487d840be4346f879fdc@saabgroup.com>
 <20191129141750.wfvqrdzsuj6abydq@bulldog.preining.info>
 <5da639403af747bcab570a04c10430ec@saabgroup.com>
 <20191130072006.jkgccj7vflb5mofr@bulldog.preining.info>
 <241e61bcf8e54b0aa831d8a114214f2e@saabgroup.com>
Message-ID: <20191202090728.uxfbnubcuikqguap@bulldog.preining.info>

On Mon, 02 Dec 2019, Fransson Mattias wrote:
> I've been able to pinpoint the issue! rsync did not identify some files as new even though they differed from the older version.

That is strange ... the DVD should have older time stamps.

But anyway, good to hear that it is fixed!

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From maximilian.noethe at tu-dortmund.de  Mon Dec  2 13:39:42 2019
From: maximilian.noethe at tu-dortmund.de (=?UTF-8?Q?Maximilian_N=c3=b6the?=)
Date: Mon, 2 Dec 2019 13:39:42 +0100
Subject: Dependencies
In-Reply-To: <CAEW6iOjJTgs_itm0P0dbgAb=5+Fq-ngYcgj6=s--yJRL9NSdKw@mail.gmail.com>
References: <201911072338.xA7Nc95d023960@freefriends.org>
 <5cf1e295-21b9-e79d-4c3c-f01d41fa002b@tu-dortmund.de>
 <CAEW6iOiaM2O3Wxy=PwmeKRDte41px-j0=nTTs08_c8j+ik5qzg@mail.gmail.com>
 <37fd9da0-182b-95c4-9fd8-a6a8d041f69a@tu-dortmund.de>
 <CAEW6iOjJTgs_itm0P0dbgAb=5+Fq-ngYcgj6=s--yJRL9NSdKw@mail.gmail.com>
Message-ID: <d1cece10-4b38-72fe-9d7b-2da520fba351@tu-dortmund.de>

Seems kvoptions is also missing for rerunfilecheck

On 25.11.19 15:49, David Carlisle wrote:
> Sorry about that, splitting up the oberdiek  bundle has a chance of
> having that effect on people making minimal texlive installations (it
> broke some of the overnight latex3 tests on travis CI for the same
> reason until we adjusted the packages installed)
> but having 95 packages in one bundle and taking an hour just to
> rebuild the pdfs to make a ctan upload every time you touch any of
> them was making the collection painful to maintain.
> (the time could be reduced using a faster machine or more parallelism
> or other strategies, but the administrative complexity of maintaining
> the whole thing as one interlinked bundle would remain)
>
> David

From maximilian.noethe at tu-dortmund.de  Mon Dec  2 13:44:37 2019
From: maximilian.noethe at tu-dortmund.de (=?UTF-8?Q?Maximilian_N=c3=b6the?=)
Date: Mon, 2 Dec 2019 13:44:37 +0100
Subject: Dependencies
In-Reply-To: <d1cece10-4b38-72fe-9d7b-2da520fba351@tu-dortmund.de>
References: <201911072338.xA7Nc95d023960@freefriends.org>
 <5cf1e295-21b9-e79d-4c3c-f01d41fa002b@tu-dortmund.de>
 <CAEW6iOiaM2O3Wxy=PwmeKRDte41px-j0=nTTs08_c8j+ik5qzg@mail.gmail.com>
 <37fd9da0-182b-95c4-9fd8-a6a8d041f69a@tu-dortmund.de>
 <CAEW6iOjJTgs_itm0P0dbgAb=5+Fq-ngYcgj6=s--yJRL9NSdKw@mail.gmail.com>
 <d1cece10-4b38-72fe-9d7b-2da520fba351@tu-dortmund.de>
Message-ID: <bbf0b23b-4090-7a72-ca7b-0f18fc8763df@tu-dortmund.de>

And stringenc for hyperref

On 02.12.19 13:39, Maximilian N?the wrote:
> Seems kvoptions is also missing for rerunfilecheck
>
> On 25.11.19 15:49, David Carlisle wrote:
>> Sorry about that, splitting up the oberdiek? bundle has a chance of
>> having that effect on people making minimal texlive installations (it
>> broke some of the overnight latex3 tests on travis CI for the same
>> reason until we adjusted the packages installed)
>> but having 95 packages in one bundle and taking an hour just to
>> rebuild the pdfs to make a ctan upload every time you touch any of
>> them was making the collection painful to maintain.
>> (the time could be reduced using a faster machine or more parallelism
>> or other strategies, but the administrative complexity of maintaining
>> the whole thing as one interlinked bundle would remain)
>>
>> David

From mwemheu at gmail.com  Mon Dec  2 20:08:04 2019
From: mwemheu at gmail.com (Moritz Wemheuer)
Date: Mon, 2 Dec 2019 20:08:04 +0100
Subject: Dependencies for biblatex and friends
Message-ID: <2f5d21ba-66f9-7b83-02f6-0b23e5c04048@gmail.com>

Hi everyone,

the dependencies for biblatex and friends should be as follows

biblatex depends on
- pdftexcmds
- etoolbox
- kvoptions
- logreq
- ifthen (latex)
- url
- keyval (graphics)

csquotes depends on
- etoolbox
- keyval (graphics)

logreq depends on
- etoolbox
- keyval (graphics)

All biblatex-... packages bundles depend at least on biblatex, some like 
biblatex-apa also require Biber (but I'm not sure if you want to model 
that in the dependencies).


Best
Moritz

From P.Taylor at rhul.ac.uk  Mon Dec  2 21:59:07 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Mon, 2 Dec 2019 20:59:07 +0000
Subject: [EXT] RE: Bad data in tlnet mirror
In-Reply-To: <24033.45869.524347.344660@gargle.gargle.HOWL>
References: <dd11d892a3f54ef498acb72cce063bd8@saabgroup.com>
 <201911282309.xASN9JXH017653@freefriends.org>
 <9c43df697b43487d840be4346f879fdc@saabgroup.com>
 <20191129141750.wfvqrdzsuj6abydq@bulldog.preining.info>
 <5da639403af747bcab570a04c10430ec@saabgroup.com>
 <24033.32980.902184.852743@gargle.gargle.HOWL>
 <df9dcc32-9b95-71d6-b8bc-94a164db5b80@Rhul.Ac.Uk>
 <24033.45869.524347.344660@gargle.gargle.HOWL>
Message-ID: <27e7e811-a4a9-ecba-9cf0-a398f6e62f02@Rhul.Ac.Uk>

Dear Reinhard ?

Reinhard Kotucha wrote:

> Hello Phil,
> sha512sum is part of the GNU coreutils package and available on every
> Unix system.  On Windows you can either install Cygwin or MinGW/MSYS
> if there is no standalone binary available.  Maybe MinGW/MSYS is the
> best choice for you.
>
> I just wrote a little Perl script for you, called check_sha512.pl.
> It's quite crude, there is no error handling at all and it doesn't
> provide any of the nice features of sha512sum.

Many thanks for that, and my sincere apologies for putting you to 
unnecessary trouble.? I was not trying to determine SHA-512 checksums 
for myself, but rather trying to suggest that possession of a full TeX 
Live 2019 installation does not guarantee that one also has a 
"sha512sum" utility as I (clearly wrongly, with the benefit of 
hindsight) thought from your earlier message :

> On 2019-11-29 at 14:44:43 +0000, Fransson Mattias wrote:
>
>   > How can I generate the checksum for a file myself?
>
>     sha512sum <filename>
>
> Regards,
>    Reinhard

** Phil.


From karl at freefriends.org  Mon Dec  2 23:36:33 2019
From: karl at freefriends.org (Karl Berry)
Date: Mon, 2 Dec 2019 15:36:33 -0700
Subject: Dependencies for biblatex and friends
In-Reply-To: <2f5d21ba-66f9-7b83-02f6-0b23e5c04048@gmail.com>
Message-ID: <201912022236.xB2MaXhk030581@freefriends.org>

    the dependencies for biblatex and friends should be as follows

I installed them, except:

    - ifthen (latex)
    - keyval (graphics)

I don't see the use in creating dependencies on "latex" and "graphics".
They are required packages to use LaTeX.

There's no way to make a dependency on ifthen.sty specifically;
dependencies are at the package level, not file level.

    All biblatex-... packages bundles depend at least on biblatex, 

Sorry, I am not enthused about adding that.

    some like biblatex-apa also require Biber (but I'm not sure if you
    want to model that in the dependencies).

Doesn't sound like a good idea to me. Aside from anything else, someone
might want to install biblatex-apa on machine X which biber does not
support, but use it on machine Y.

TeX Live is less user-friendly than MiKTeX wrt dependencies. It's not
feasible to do a minimal installation and expect "tlmgr install foo" to
bring in everything that foo needs or might need, which seems to be your
goal (if not, sorry, and just stating this, again, for the future). It
can't be done with static dependencies at all, and even if we tried, we
can't possibly maintain the thousands of dependencies implied.

Best,
Karl

From karl at freefriends.org  Tue Dec  3 00:25:37 2019
From: karl at freefriends.org (Karl Berry)
Date: Mon, 2 Dec 2019 16:25:37 -0700
Subject: Dependencies
In-Reply-To: <bbf0b23b-4090-7a72-ca7b-0f18fc8763df@tu-dortmund.de>
Message-ID: <201912022325.xB2NPbHU032727@freefriends.org>

    Seems kvoptions is also missing for rerunfilecheck
    And stringenc for hyperref

Thanks, added. -k


From mwemheu at gmail.com  Tue Dec  3 08:06:16 2019
From: mwemheu at gmail.com (Moritz Wemheuer)
Date: Tue, 3 Dec 2019 08:06:16 +0100
Subject: Dependencies for biblatex and friends
In-Reply-To: <201912022236.xB2MaXhk030581@freefriends.org>
References: <201912022236.xB2MaXhk030581@freefriends.org>
Message-ID: <a7a577da-8a8a-9cbd-d3a2-90386e963768@gmail.com>

> I installed them,

Thanks

>      All biblatex-... packages bundles depend at least on biblatex,
> 
> Sorry, I am not enthused about adding that.

Fair enough. I'm mainly interested in the dependency stuff to set up a 
minimal TeX live for testing my biblatex styles, so I won't be 
installing any other biblatex styles anyway. In any case the biblatex 
dependency of biblatex styles is probably obvious and simple enough.

From texlive at schoepfer.info  Tue Dec  3 11:19:55 2019
From: texlive at schoepfer.info (texlive at schoepfer.info)
Date: Tue, 3 Dec 2019 11:19:55 +0100
Subject: Dependencies
In-Reply-To: <7c7c1df2-1682-b87f-5dc2-1f0102ef930a@uea.ac.uk>
References: <7c7c1df2-1682-b87f-5dc2-1f0102ef930a@uea.ac.uk>
Message-ID: <4c9600ae-83b5-ed33-a929-1added18ff51@schoepfer.info>

Hi,

> Working on automated testing, I run across a reasonable number of cases
> where package dependencies are missing in TeX Live. Is it worth me
> tracking these down 'properly' and listing them out, and if so, what is
> the best way to report them?

The deps seems to come for most part by \RequirePackage.
Did someone(a script?) also look for \usepackage?

Johannes

From h_kitagawa2001 at yahoo.co.jp  Wed Dec  4 02:46:33 2019
From: h_kitagawa2001 at yahoo.co.jp (Hironori KITAGAWA)
Date: Wed, 4 Dec 2019 10:46:33 +0900
Subject: Compressing formats
Message-ID: <20191204104633.75111b13bb3310046f106545@yahoo.co.jp>

Hello all,

As latex-dev preloads expl3 (https://www.latex-project.org/news/2019/11/28/latex-dev-2020-2/),
size of format files are greatly increased:

# format engine (latex) -> (latex-dev)
latex    (pdftex) 4291213 ->  8067042
pdflatex (pdftex) 4291275 ->  8067104
platex   (eptex)  4557309 -> 10411263
uplatex	 (euptex) 4553312 -> 10407071
xelatex  (xetex)  3765560 ->  4507996 (compressed by zlib)

So I am doing an experiment for compressing formats 
(of pTeX and friends, to begin with) by lz4(hc):
https://github.com/h-kitagawa/texlive-source/tree/lz4hc-fmt

In this experiment, 
 * platex-dev.fmt becomes 2861929 bytes (about 6.5MB smaller).
 * processing "\documentclass{minimal}\begin{document}\end{document}" by platex
   has almost no overhead (128 ms vs 134.8 ms).

A test result is located at
https://github.com/h-kitagawa/texlive-source/tree/lz4hc-fmt/texk/web2c/eptexdir/tests/comp-tests

----
I know that XeTeX and LuaTeX compress formats by zlib, and
(e)(u)pTeX and pdfTeX are already linked with zlib (because SyncTeX).
However, I choose lz4(hc) for decompression speed.

* I also tested with zlib (-1), lzo (1x_1). See table at
  https://github.com/texjporg/tex-jp-build/issues/96 (Japanese) for detail.
* Linking lz4 library increases binary size by about 100 KB,
  but compression makes platex-dev.fmt smaller about 6.5MB (see above),
  so the total is better.
* We can use some time (but not much!) for compressing,
  because dumping formats is considered to be less often. 
  I choose default lz4(hc) compression level 5 (or 6?) is a good tradeoff between
  compression rate and compression time.

-- 
Hironori KITAGAWA <h_kitagawa2001 at yahoo.co.jp>

From preining at logic.at  Wed Dec  4 02:56:27 2019
From: preining at logic.at (Norbert Preining)
Date: Wed, 4 Dec 2019 10:56:27 +0900
Subject: Compressing formats
In-Reply-To: <20191204104633.75111b13bb3310046f106545@yahoo.co.jp>
References: <20191204104633.75111b13bb3310046f106545@yahoo.co.jp>
Message-ID: <20191204015627.q26v6z6lcu55xf6y@bulldog.preining.info>

Hi Hironori,

> However, I choose lz4(hc) for decompression speed.

I agree. We use lz4 also for the backups in tlmgr due to its incredible
speed and efficient compression.

>   but compression makes platex-dev.fmt smaller about 6.5MB (see above),

Do you think the patch can be adjusted for pdftex, too? 

Thanks for your work

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From h_kitagawa2001 at yahoo.co.jp  Wed Dec  4 04:30:35 2019
From: h_kitagawa2001 at yahoo.co.jp (Hironori KITAGAWA)
Date: Wed, 4 Dec 2019 12:30:35 +0900
Subject: Compressing formats
In-Reply-To: <20191204015627.q26v6z6lcu55xf6y@bulldog.preining.info>
References: <20191204104633.75111b13bb3310046f106545@yahoo.co.jp>
 <20191204015627.q26v6z6lcu55xf6y@bulldog.preining.info>
Message-ID: <20191204123035.394ffbad1b7d6ac789da677b@yahoo.co.jp>

Hello Norbert,

> Do you think the patch can be adjusted for pdftex, too? 

I've adapted the patch to pdfTeX:
https://github.com/h-kitagawa/texlive-source/commit/f418c4284959c1306ddefc6e4086ef2140065516
(Changed files: web2c/texmfmp[-help].h, web2c/lib/texmfmp.c, 
  web2c/ac/web2c.ac and pdftexdir/am/pdftex.am. No changes to WEB sources)

My patch adds -conf-level option for specifying lz4 compression level to engines.


Result:
  latex-dev.fmt:    2686969 (former: 8067042)
  pdflatex-dev.fmt: 2687052 (former: 8067104)


On Wed, 4 Dec 2019 10:56:27 +0900
Norbert Preining <preining at logic.at> wrote:

> Hi Hironori,
> 
> > However, I choose lz4(hc) for decompression speed.
> 
> I agree. We use lz4 also for the backups in tlmgr due to its incredible
> speed and efficient compression.
> 
> >   but compression makes platex-dev.fmt smaller about 6.5MB (see above),
> 
> Do you think the patch can be adjusted for pdftex, too? 
> 
> Thanks for your work
> 
> Norbert
> 
> --
> PREINING Norbert                               http://www.preining.info
> Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


-- 
Hironori KITAGAWA <h_kitagawa2001 at yahoo.co.jp>

From preining at logic.at  Wed Dec  4 05:00:16 2019
From: preining at logic.at (Norbert Preining)
Date: Wed, 4 Dec 2019 13:00:16 +0900
Subject: Compressing formats
In-Reply-To: <20191204123035.394ffbad1b7d6ac789da677b@yahoo.co.jp>
References: <20191204104633.75111b13bb3310046f106545@yahoo.co.jp>
 <20191204015627.q26v6z6lcu55xf6y@bulldog.preining.info>
 <20191204123035.394ffbad1b7d6ac789da677b@yahoo.co.jp>
Message-ID: <20191204040016.4o2fw2t7pazovcno@bulldog.preining.info>

Hi Hironori,

thanks a lot. I have reduced your patch so that only stuff that is
**not** generated (.in, configure, etc) is updated. Can you please look
at 
	https://github.com/TeX-Live/texlive-source/commit/8dd3add8f62f5804196f1bf955be8971e0216a39
and see whether this looks fine?

You did run autoreconf or similar and committed the changes, which makes
it hard to see what was actually changed.

Thanks

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From h_kitagawa2001 at yahoo.co.jp  Wed Dec  4 05:14:38 2019
From: h_kitagawa2001 at yahoo.co.jp (Hironori KITAGAWA)
Date: Wed, 4 Dec 2019 13:14:38 +0900
Subject: Compressing formats
In-Reply-To: <20191204040016.4o2fw2t7pazovcno@bulldog.preining.info>
References: <20191204104633.75111b13bb3310046f106545@yahoo.co.jp>
 <20191204015627.q26v6z6lcu55xf6y@bulldog.preining.info>
 <20191204123035.394ffbad1b7d6ac789da677b@yahoo.co.jp>
 <20191204040016.4o2fw2t7pazovcno@bulldog.preining.info>
Message-ID: <20191204131438.7f9bad1ca4ff02ca2c57b000@yahoo.co.jp>

Hello Norbert,

> thanks a lot. I have reduced your patch so that only stuff that is
> **not** generated (.in, configure, etc) is updated. Can you please look
> at 
> 	https://github.com/TeX-Live/texlive-source/commit/8dd3add8f62f5804196f1bf955be8971e0216a39
> and see whether this looks fine?
> 
> You did run autoreconf or similar and committed the changes, which makes
> it hard to see what was actually changed.

Thanks, it looks fine.

-- 
Hironori KITAGAWA <h_kitagawa2001 at yahoo.co.jp>

From joseph.wright at morningstar2.co.uk  Fri Dec  6 13:24:03 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Fri, 6 Dec 2019 12:24:03 +0000
Subject: \pdfmajorversion
In-Reply-To: <201911272247.xARMlWJh006995@freefriends.org>
References: <201911272247.xARMlWJh006995@freefriends.org>
Message-ID: <573f2720-ceca-5f5d-cbcc-d2e71902489f@morningstar2.co.uk>

On 27/11/2019 22:47, Karl Berry wrote:
> Joseph, thanks for your \pdfmajorversion patches. I installed them, with
> a few meaningless tweaks to the text, in both pdftex (r817) and
> TL (r52953) source repos, along with (just in pdftex for now) some tests
> and updates to the manual.  Full patch below for the archive.
> 
> The only important thing remaining, AFAIK: evidently the PDF version is
> also a factor with the \pdfimagehicolor primitive and other aspects of
> color in PNG images. (Found while updating the manual.) So I modified
> the tests in writepng.c to try to account for \pdfmajorversion != 1, but
> it's unlikely I got all the logic correct, since the boolean exprs go
> every which way. Can you please review it?  Maybe even come up with some
> 16-bit color PNG images to exercise that code, for extra credit? I just
> ran out of energy.
> 
> Thanks again,
> Karl

Hi Karl,

I've looked over the code: it all looks OK to me. Of course, pre-testing 
will show ;)

Joseph

From pablgonz at educarchile.cl  Sat Dec  7 17:22:59 2019
From: pablgonz at educarchile.cl (=?UTF-8?Q?Pablo_Gonz=C3=A1lez_L?=)
Date: Sat, 7 Dec 2019 13:22:59 -0300
Subject: tlmgr check all...
Message-ID: <CANeU4n_2PdAw4JqPjPNmyvrsvgQJzZURzT_pFBAjih2Ta_7ung@mail.gmail.com>

Hello, someone here can tell me why by running `tlmgr check all` (today) I get:

Running check runfiles:
# afoot.sty
diff /usr/local/texlive/2019/texmf-dist/tex/latex/arabtex/afoot.sty
/usr/local/texlive/2019/texmf-dist/tex/latex/ledmac/afoot.sty
# gamma.mf
diff /usr/local/texlive/2019/texmf-dist/fonts/source/public/lfb/gamma.mf
/usr/local/texlive/2019/texmf-dist/fonts/source/public/wnri/gamma.mf
# lexer.lua
diff /usr/local/texlive/2019/texmf-dist/context/data/scite/context/lexers/lexer.lua
/usr/local/texlive/2019/texmf-dist/context/data/textadept/context/lexers/lexer.lua
# ligature.mf
diff /usr/local/texlive/2019/texmf-dist/fonts/source/public/lfb/ligature.mf
/usr/local/texlive/2019/texmf-dist/fonts/source/public/wnri/ligature.mf
# md-utrma.pfb
diff /usr/local/texlive/2019/texmf-dist/fonts/type1/public/mathdesign/mdpgd/md-utrma.pfb
/usr/local/texlive/2019/texmf-dist/fonts/type1/public/mathdesign/mdput/md-utrma.pfb
# ot1.cmap
diff /usr/local/texlive/2019/texmf-dist/tex/latex/cmap/ot1.cmap
/usr/local/texlive/2019/texmf-dist/tex/latex/mmap/ot1.cmap
# t1.cmap
diff /usr/local/texlive/2019/texmf-dist/tex/latex/cmap/t1.cmap
/usr/local/texlive/2019/texmf-dist/tex/latex/mmap/t1.cmap
Running check texmfdb paths
Checking TEXMFDBS
-> !!/usr/local/texlive/texmf-local
-> !!/usr/local/texlive/2019/texmf-config
-> !!/usr/local/texlive/2019/texmf-var
-> !!/usr/local/texlive/2019/texmf-dist
Checking TEXMF
-> /home/pablo/.texlive2019/texmf-config
-> /home/pablo/.texlive2019/texmf-var
-> /home/pablo/texmf
-> !!/usr/local/texlive/texmf-local
-> !!/usr/local/texlive/2019/texmf-config
-> !!/usr/local/texlive/2019/texmf-var
-> !!/usr/local/texlive/2019/texmf-dist
tlmgr: An error has occurred. See above messages. Exiting.

From P.Taylor at rhul.ac.uk  Sat Dec  7 17:31:08 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Sat, 7 Dec 2019 16:31:08 +0000
Subject: [EXT] tlmgr check all...
In-Reply-To: <CANeU4n_2PdAw4JqPjPNmyvrsvgQJzZURzT_pFBAjih2Ta_7ung@mail.gmail.com>
References: <CANeU4n_2PdAw4JqPjPNmyvrsvgQJzZURzT_pFBAjih2Ta_7ung@mail.gmail.com>
Message-ID: <59a31aee-67bb-8d97-4d45-b62712a9cf54@Rhul.Ac.Uk>

Pablo Gonz?lez L wrote:

> Hello, someone here can tell me why by running `tlmgr check all` (today) I get:
>
> Running check runfiles:
> [...]
> tlmgr: An error has occurred. See above messages. Exiting.

Here I get an even shorted and less helpful message :

> C:\TeX\Lambda\bin\win32>tlmgr check all
>
> tlmgr.pl: sorry, cannot check this on Windows.

Philip Taylor



From beebe at math.utah.edu  Sat Dec  7 18:45:27 2019
From: beebe at math.utah.edu (Nelson H. F. Beebe)
Date: Sat, 7 Dec 2019 10:45:27 -0700
Subject: tlmgr check all...
Message-ID: <CMM.0.95.0.1575740727.beebe@gamma.math.utah.edu>

Two list members reported errors from "tlmgr check all", so to see
whether my site sees that problem, I ran an update, the first in 5
days, that completed normally.

I then ran

	% tlmgr check all
	Running check files:
	Files present but not covered (relative to /export/home/archive/share/lib/tex/texlive-2019-03):
	  00_TIME.txt
	... long list of 39759 files ...
	Running check depends:
	Running check executes:
	Running check runfiles:
	# afoot.sty
	diff /export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist/tex/latex/arabtex/afoot.sty \
             /export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist/tex/latex/ledmac/afoot.sty
	# gamma.mf
	diff /export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist/fonts/source/public/lfb/gamma.mf \
             /export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist/fonts/source/public/wnri/gamma.mf
	# lexer.lua
	diff /export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist/context/data/scite/context/lexers/lexer.lua \
             /export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist/context/data/textadept/context/lexers/lexer.lua
	# ligature.mf
	diff /export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist/fonts/source/public/lfb/ligature.mf \
             /export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist/fonts/source/public/wnri/ligature.mf
	# md-utrma.pfb
	diff /export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist/fonts/type1/public/mathdesign/mdpgd/md-utrma.pfb \
             /export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist/fonts/type1/public/mathdesign/mdput/md-utrma.pfb
	# ot1.cmap
	diff /export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist/tex/latex/cmap/ot1.cmap 
             /export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist/tex/latex/mmap/ot1.cmap
	# t1.cmap
	diff /export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist/tex/latex/cmap/t1.cmap 
             /export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist/tex/latex/mmap/t1.cmap
	Running check texmfdb paths
	Checking TEXMFDBS
	-> .:/usr/uumath/texlive/2019/texmf-local:/usr/uumath/texlive/2019/texmf-extra:/usr/uumath/texlive/2019/texmf-var//:
	Warn: entry .:/usr/uumath/texlive/2019/texmf-local:/usr/uumath/texlive/2019/texmf-extra:/usr/uumath/texlive/2019/texmf-var//: in TEXMFDBS does not have leading !!
	Warn: entry .:/usr/uumath/texlive/2019/texmf-local:/usr/uumath/texlive/2019/texmf-extra:/usr/uumath/texlive/2019/texmf-var//: does not have an associated ls-R
	Checking TEXMF
	-> /u/sy/beebe/.texlive2019/texmf-config
	-> /u/sy/beebe/.texlive2019/texmf-var
	-> /u/sy/beebe/texmf
	-> !!/export/home/archive/share/lib/tex/texmf-local
	Warn: tree !!/export/home/archive/share/lib/tex/texmf-local in TEXMF is not in TEXMFDBS but has !!
	Warn: tree !!/export/home/archive/share/lib/tex/texmf-local in TEXMF is not in TEXMFDBS but has ls-R file
	-> !!/export/home/archive/share/lib/tex/texlive-2019-03/texmf-config
	Warn: tree !!/export/home/archive/share/lib/tex/texlive-2019-03/texmf-config in TEXMF is not in TEXMFDBS but has !!
	Warn: tree !!/export/home/archive/share/lib/tex/texlive-2019-03/texmf-config in TEXMF is not in TEXMFDBS but has ls-R file
	-> !!/export/home/archive/share/lib/tex/texlive-2019-03/texmf-var
	Warn: tree !!/export/home/archive/share/lib/tex/texlive-2019-03/texmf-var in TEXMF is not in TEXMFDBS but has !!
	Warn: tree !!/export/home/archive/share/lib/tex/texlive-2019-03/texmf-var in TEXMF is not in TEXMFDBS but has ls-R file
	-> !!/export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist
	Warn: tree !!/export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist in TEXMF is not in TEXMFDBS but has !!
	Warn: tree !!/export/home/archive/share/lib/tex/texlive-2019-03/texmf-dist in TEXMF is not in TEXMFDBS but has ls-R file
	tlmgr: An error has occurred. See above messages. Exiting.

So, I too see errors, but it is unclear to me whether they have any
significance.  A diff output for the t1.cmap files shows that the
first is version 1.00, and the second is 2.00.  The ot1.cmap files are
versions 1.000 and 1.002. The others have substantial differences.

I ran kpsewhich on the *.cmap files, and found that it reports the
older of the pairs.  In general, hash lookups for identically named
files in different directories produce unpredictable results.

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- University of Utah                    FAX: +1 801 581 4148                  -
- Department of Mathematics, 110 LCB    Internet e-mail: beebe at math.utah.edu  -
- 155 S 1400 E RM 233                       beebe at acm.org  beebe at computer.org -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe/ -
-------------------------------------------------------------------------------

From pablgonz at educarchile.cl  Sat Dec  7 18:58:28 2019
From: pablgonz at educarchile.cl (=?UTF-8?Q?Pablo_Gonz=C3=A1lez_L?=)
Date: Sat, 7 Dec 2019 14:58:28 -0300
Subject: [EXT] tlmgr check all...
In-Reply-To: <59a31aee-67bb-8d97-4d45-b62712a9cf54@Rhul.Ac.Uk>
References: <CANeU4n_2PdAw4JqPjPNmyvrsvgQJzZURzT_pFBAjih2Ta_7ung@mail.gmail.com>
 <59a31aee-67bb-8d97-4d45-b62712a9cf54@Rhul.Ac.Uk>
Message-ID: <CANeU4n-2ePtOyFO1+4A-4j8ZFgYMLffV2kg=JJJRGaCjebzGvQ@mail.gmail.com>

> Here I get an even shorted and less helpful message :
>
> > C:\TeX\Lambda\bin\win32>tlmgr check all
> >
> > tlmgr.pl: sorry, cannot check this on Windows.
>
> Philip Taylor
I have also checked it in win10, just for playing I have also done it
using WSL, but I don't get the same error as in fedora.

pablo at win10x64:~$ uname -a
Linux win10x64 4.4.0-18362-Microsoft #476-Microsoft Fri Nov 01
16:53:00 PST 2019 x86_64 x86_64 x86_64 GNU/Linux
pablo at win10x64:~$ perl -v

This is perl 5, version 26, subversion 1 (v5.26.1) built for
x86_64-linux-gnu-thread-multi
(with 67 registered patches, see perl -V for more detail)

Will it be the perl version?

From reinhard.kotucha at web.de  Sat Dec  7 21:55:09 2019
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 7 Dec 2019 21:55:09 +0100
Subject: [EXT] tlmgr check all...
In-Reply-To: <CANeU4n-2ePtOyFO1+4A-4j8ZFgYMLffV2kg=JJJRGaCjebzGvQ@mail.gmail.com>
References: <CANeU4n_2PdAw4JqPjPNmyvrsvgQJzZURzT_pFBAjih2Ta_7ung@mail.gmail.com>
 <59a31aee-67bb-8d97-4d45-b62712a9cf54@Rhul.Ac.Uk>
 <CANeU4n-2ePtOyFO1+4A-4j8ZFgYMLffV2kg=JJJRGaCjebzGvQ@mail.gmail.com>
Message-ID: <24044.4525.335659.668707@gargle.gargle.HOWL>

On 2019-12-07 at 14:58:28 -0300, Pablo Gonz?lez L wrote:

 > > Here I get an even shorted and less helpful message :
 > >
 > > > C:\TeX\Lambda\bin\win32>tlmgr check all
 > > >
 > > > tlmgr.pl: sorry, cannot check this on Windows.
 > >
 > > Philip Taylor
 > I have also checked it in win10, just for playing I have also done it
 > using WSL, but I don't get the same error as in fedora.
 > 
 > pablo at win10x64:~$ uname -a
 > Linux win10x64 4.4.0-18362-Microsoft #476-Microsoft Fri Nov 01
 > 16:53:00 PST 2019 x86_64 x86_64 x86_64 GNU/Linux
 > pablo at win10x64:~$ perl -v
 > 
 > This is perl 5, version 26, subversion 1 (v5.26.1) built for
 > x86_64-linux-gnu-thread-multi
 > (with 67 registered patches, see perl -V for more detail)
 > 
 > Will it be the perl version?

No.  It's because there is no find(1) on Windows.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From karl at freefriends.org  Sat Dec  7 23:54:08 2019
From: karl at freefriends.org (Karl Berry)
Date: Sat, 7 Dec 2019 15:54:08 -0700
Subject: tlmgr check all...
In-Reply-To: <CMM.0.95.0.1575740727.beebe@gamma.math.utah.edu>
Message-ID: <201912072254.xB7Ms8fs024950@freefriends.org>

Hi Nelson,

          00_TIME.txt

TL does not distribute 00_TIME.txt. That's the mirmon test file.  So
evidently you're not running tlmgr check on a standard TL installation,
which is what it's intended for, and that probably explains the:
.. long list of 39759 files ...

	Warn: entry .:/usr/uumath/texlive/2019/texmf-local:/usr/uumath/texlive/2019/texmf-extra:/usr/uumath/texlive/2019/texmf-var//: in TEXMFDBS does not have leading !!
	Warn: entry .:/usr/uumath/texlive/2019/texmf-local:/usr/uumath/texlive/2019/texmf-extra:/usr/uumath/texlive/2019/texmf-var//: does not have an associated ls-R
	...
	Warn: tree !!/export/home/archive/share/lib/tex/texmf-local in TEXMF is not in TEXMFDBS but has !!

In a normal installation, for best reliability, every entry in TEXMFDBS
should have !!, and no entries not in TEXMFDBS should have it. (This is
the way the default texmf.cnf is set up.) Otherwise there is a risk that
a stale ls-R will be used. The comments in texmf.cnf explain more.

But again, since you're running on some kind of "supertree", this is
probably well known to you and not a problem. I certainly don't pretend
to understand the details your amazing setup at Utah :). --best, karl.

From karl at freefriends.org  Sat Dec  7 23:54:09 2019
From: karl at freefriends.org (Karl Berry)
Date: Sat, 7 Dec 2019 15:54:09 -0700
Subject: tlmgr check all...
In-Reply-To: <CANeU4n_2PdAw4JqPjPNmyvrsvgQJzZURzT_pFBAjih2Ta_7ung@mail.gmail.com>
Message-ID: <201912072254.xB7Ms9Ys024958@freefriends.org>

    Hello, someone here can tell me why by running `tlmgr check all`
    (today) I get:

The runfiles dups are problematic, but expected. They've all been around
for years. I wrote to the respective maintainers back when I first
discovered them, and they promised to address the dups in the next
releases, but that has not happened (generally I think those packages
have not had updates).  Lacking actual reports from users about
problems, I don't want to go further. If you or someone else wants to
write them to urge new releases, perhaps that will have more effect.

Meanwhile, I guess I should add them to the long list of exceptions in
tlmgr.pl's check_files routine (currently line 5517ff. if you're
curious).

The "texmfdb paths" check is something new that I asked Norbert to whomp
up a couple months ago to check for consistency between !! being
specified and being listed in the TEXMFDBS. We haven't made the output
pretty (i.e., silent if no problems) yet. That output looks
good (non-problematic) to me. --thanks, karl.

From pablgonz at educarchile.cl  Mon Dec  9 01:04:29 2019
From: pablgonz at educarchile.cl (=?UTF-8?Q?Pablo_Gonz=C3=A1lez_L?=)
Date: Sun, 8 Dec 2019 21:04:29 -0300
Subject: 64 bits version of TeXLive (pretest 2020) on Windows
Message-ID: <CANeU4n8ad08XED-gf8b-JjoqS5grEkGL4L93oa2y-AQj=ScJSw@mail.gmail.com>

Hello, I think this request is something old
(https://tug.org/pipermail/tex-live/2016-June/038727.html) but I would like to
put it back on the table.

I know that Akira Kakuto-san makes the 64-bit version of TeXLive available in
CTAN/systems/win32/w32tex/TLW64/ and that by following the instructions you can
install it without major complications.

Nowadays (at least in my country) it is quite difficult to buy or get a 32-bit
computer, most of the manufacturers have opted for 64 architecture, this said,
will it be possible to include in the "pretest" version the binaries for 64?

I'm not saying that the version of 32 is eliminated, only that the version of 64
is available to install it.

Greetings
Pablo

From kakuto at w32tex.org  Mon Dec  9 01:38:19 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Mon, 9 Dec 2019 09:38:19 +0900
Subject: 64 bits version of TeXLive (pretest 2020) on Windows
In-Reply-To: <CANeU4n8ad08XED-gf8b-JjoqS5grEkGL4L93oa2y-AQj=ScJSw@mail.gmail.com>
References: <CANeU4n8ad08XED-gf8b-JjoqS5grEkGL4L93oa2y-AQj=ScJSw@mail.gmail.com>
Message-ID: <C9158AD3442A4F99837B3057400BEDB7@CJ3001517A>

Dear Pablo,

> Nowadays (at least in my country) it is quite difficult to buy
> or get a 32-bit computer, most of the manufacturers have opted
> for 64 architecture, this said, will it be possible to include
> in the "pretest" version the binaries for 64?

I think 32bit binaries work great also on 64bit OS.
The infrastructure of TeX Live for Windows is
fairly complicated, contributed by many people, and I prefer to preserve the
present status. Users of 64bit OS can install 64bit
binaries, if necessary, from CTAN/systems/win32/w32tex/TLW64.
The increased disk space may not be a problem in these days.

Best,
Akira

From preining at logic.at  Mon Dec  9 03:09:58 2019
From: preining at logic.at (Norbert Preining)
Date: Mon, 9 Dec 2019 11:09:58 +0900
Subject: 64 bits version of TeXLive (pretest 2020) on Windows
In-Reply-To: <CANeU4n8ad08XED-gf8b-JjoqS5grEkGL4L93oa2y-AQj=ScJSw@mail.gmail.com>
References: <CANeU4n8ad08XED-gf8b-JjoqS5grEkGL4L93oa2y-AQj=ScJSw@mail.gmail.com>
Message-ID: <20191209020958.rvxrsdkvgdfxphvj@burischnitzel.preining.info>

Hi Pablo,

I can only underline what Akira said. By far the biggest group of
if/else in the code are related to Windows, which needs to be treated
specially. Starting to add on top of this a complication with two
different Windows versions is bound to create complications that do not
really pay off, in particular since - as Akira said - the 32bit binaries
work perfectly well on 64 Windows.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From usenet at siart.de  Mon Dec  9 10:51:26 2019
From: usenet at siart.de (Uwe Siart)
Date: Mon, 09 Dec 2019 10:51:26 +0100
Subject: Error from 'epstopdf-pkg' with luatex+polyglossia+graphicx
Message-ID: <87ftht6d41.fsf@siart.de>

Dear all,

With latest TL I'm getting a weird error where I have no idea who could
be the culprit:

When I run this MWE

---
\documentclass{article}
\usepackage[babelshorthands]{polyglossia}
\setdefaultlanguage{german}
\usepackage{graphicx}
\begin{document}
Test
\end{document}
---

through lualatex I get in the .log:

---
(c:/Programme1/texlive/2019/texmf-dist/tex/latex/epstopdf-pkg/epstopdf-base.sty
Package: epstopdf-base 2019-11-30 v2.9 Base part for package epstopdf
[\directlua]:1: unexpected symbol near '\'.
l.165       \directlua{require("pdftexcmds")}
                                           
The lua interpreter ran into a problem, so the
remainder of this lua chunk will be ignored.
---

The error disappears, when I either

- remove [babelshorthands]
- comment \setdefaultlanguage{german}
- comment \usepackage{graphicx}

-- 
Uwe


From d.p.carlisle at gmail.com  Mon Dec  9 11:16:09 2019
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Mon, 9 Dec 2019 10:16:09 +0000
Subject: Error from 'epstopdf-pkg' with luatex+polyglossia+graphicx
In-Reply-To: <87ftht6d41.fsf@siart.de>
References: <87ftht6d41.fsf@siart.de>
Message-ID: <CAEW6iOhsOS4aDqt8g3vLBk4EPdtFxQzm6vH_E_Y0rooVm9ggpA@mail.gmail.com>

polyglossia really shouldn't make " active in the preamble. That said
I'll guard the " in epstopdf-base  so this error goes.
For now, simply load graphicx before polyglossia

David

On Mon, 9 Dec 2019 at 09:55, Uwe Siart <usenet at siart.de> wrote:
>
> Dear all,
>
> With latest TL I'm getting a weird error where I have no idea who could
> be the culprit:
>
> When I run this MWE
>
> ---
> \documentclass{article}
> \usepackage[babelshorthands]{polyglossia}
> \setdefaultlanguage{german}
> \usepackage{graphicx}
> \begin{document}
> Test
> \end{document}
> ---
>
> through lualatex I get in the .log:
>
> ---
> (c:/Programme1/texlive/2019/texmf-dist/tex/latex/epstopdf-pkg/epstopdf-base.sty
> Package: epstopdf-base 2019-11-30 v2.9 Base part for package epstopdf
> [\directlua]:1: unexpected symbol near '\'.
> l.165       \directlua{require("pdftexcmds")}
>
> The lua interpreter ran into a problem, so the
> remainder of this lua chunk will be ignored.
> ---
>
> The error disappears, when I either
>
> - remove [babelshorthands]
> - comment \setdefaultlanguage{german}
> - comment \usepackage{graphicx}
>
> --
> Uwe
>

From news3 at nililand.de  Mon Dec  9 14:58:52 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Mon, 9 Dec 2019 14:58:52 +0100
Subject: Error from 'epstopdf-pkg' with luatex+polyglossia+graphicx
References: <87ftht6d41.fsf@siart.de>
 <CAEW6iOhsOS4aDqt8g3vLBk4EPdtFxQzm6vH_E_Y0rooVm9ggpA@mail.gmail.com>
Message-ID: <9l6r5tzyga0t.dlg@nililand.de>

Am Mon, 9 Dec 2019 10:16:09 +0000 schrieb David Carlisle:

> polyglossia really shouldn't make " active in the preamble.

" is made active only in \AtBeginDocument. With babel it would be
active too when epstopdf-base is read, but the babel definition
seems to be better and avoid the error. 

-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From alexander.krumeich at gmail.com  Mon Dec  9 15:01:05 2019
From: alexander.krumeich at gmail.com (Alexander Krumeich)
Date: Mon, 9 Dec 2019 15:01:05 +0100
Subject: Spacing with Font Roboto
Message-ID: <CALeLr1mfjEPcdMi2CQWrnF1U0uAZ9TXcrVqP9NgoizuJ-HKuxQ@mail.gmail.com>

Dear TL,

using the Roboto font results in strange spacing in the text layer of
the resulting PDF document. The page looks good on paper, but in the
text representation a space is added after some characters. Consider
the following MWE:

\listfiles
\documentclass[a4paper]{scrartcl}
\usepackage{fontspec}
\setmainfont{roboto}

\begin{document}
This is a test.
\end{document}

Following is a verbatim copy of the characters when I mark and copy
them from my PDF viewer:

T h is
is
a
te s t.

When I go back through older versions of my documents, I notice that
this behaviour was introduced sometime after May 9th. There's been a
change to the Roboto package in June. Possibly, something has been
broken with that update.

I'm using lualatex 1.10 on a freshly installed TeXLive. Listfiles
shows the files:
 *File List*
scrartcl.cls    2019/10/12 v3.27 KOMA-Script document class (article)
scrkbase.sty    2019/10/12 v3.27 KOMA-Script package (KOMA-Script-dependent bas
ics and keyval usage)
 scrbase.sty    2019/10/12 v3.27 KOMA-Script package (KOMA-Script-independent b
asics and keyval usage)
  keyval.sty    2014/10/28 v1.15 key=value parser (DPC)
scrlfile.sty    2019/10/12 v3.27 KOMA-Script package (loading files)
tocbasic.sty    2019/10/12 v3.27 KOMA-Script package (handling toc-files)
scrsize11pt.clo    2019/10/12 v3.27 KOMA-Script font size class option (11pt)
typearea.sty    2019/10/12 v3.27 KOMA-Script package (type area)
fontspec.sty    2019/10/19 v2.7d Font selection for XeLaTeX and LuaLaTeX
  xparse.sty    2019-10-11 L3 Experimental document command parser
   expl3.sty    2019-11-07 L3 programming layer (loader)
expl3-code.tex    2019-11-07 L3 programming layer
l3deprecation.def    2019-04-06 v L3 Deprecated functions
l3backend-pdfmode.def    2019-04-06 L3 backend support: PDF mode
fontspec-luatex.sty    2019/10/19 v2.7d Font selection for XeLaTeX and LuaLaTeX

 fontenc.sty
   tuenc.def    2018/08/11 v2.0j Standard LaTeX file
fontspec.cfg
 ***********

)
 430 words of node memory still in use:
   3 hlist, 1 vlist, 1 rule, 2 glue, 3 kern, 1 glyph, 5 attribute, 52 glue_spec
, 5 attribute_list, 1 write nodes
   avail lists: 2:21,3:3,4:1,5:24,6:1,7:29,9:10,11:3
</usr/local/texlive/2019/texmf-dist/fonts/opentype/google/roboto/Roboto-Regular
.otf>

Any hints? Thanks a lot!

   Alexander

From usenet at siart.de  Mon Dec  9 17:20:14 2019
From: usenet at siart.de (Uwe Siart)
Date: Mon, 09 Dec 2019 17:20:14 +0100
Subject: Spacing with Font Roboto
References: <CALeLr1mfjEPcdMi2CQWrnF1U0uAZ9TXcrVqP9NgoizuJ-HKuxQ@mail.gmail.com>
Message-ID: <87o8whmpxd.fsf@siart.de>

Alexander Krumeich <alexander.krumeich at gmail.com> writes:

> \documentclass[a4paper]{scrartcl}
> \usepackage{fontspec}
> \setmainfont{roboto}
>
> \begin{document}
> This is a test.
> \end{document}
>
> Following is a verbatim copy of the characters when I mark and copy
> them from my PDF viewer:
>
> T h is
> is
> a
> te s t.

>From the PDF produced by lualatex I get

T h i s i s a t e s t .

Interestingly, with xelatex I get

This is a test.

(as it should be)

-- 
Uwe


From Herbert.Voss at fu-berlin.de  Mon Dec  9 17:29:57 2019
From: Herbert.Voss at fu-berlin.de (Herbert Voss)
Date: Mon, 9 Dec 2019 17:29:57 +0100
Subject: Spacing with Font Roboto
In-Reply-To: <87o8whmpxd.fsf@siart.de>
References: <CALeLr1mfjEPcdMi2CQWrnF1U0uAZ9TXcrVqP9NgoizuJ-HKuxQ@mail.gmail.com>
 <87o8whmpxd.fsf@siart.de>
Message-ID: <38ebbf38-9478-beec-a5ed-db9e427368bb@fu-berlin.de>



Am 09.12.19 um 17:20 schrieb Uwe Siart:
> Alexander Krumeich <alexander.krumeich at gmail.com> writes:
>
>> \documentclass[a4paper]{scrartcl}
>> \usepackage{fontspec}
>> \setmainfont{roboto}
>>
>> \begin{document}
>> This is a test.
>> \end{document}
>>
>> Following is a verbatim copy of the characters when I mark and copy
>> them from my PDF viewer:
>>
>> T h is
>> is
>> a
>> te s t.
> >From the PDF produced by lualatex I get
>
> T h i s i s a t e s t .
>
> Interestingly, with xelatex I get
>
> This is a test.
>
> (as it should be)

I cannot see it. Both are correct. The only difference is that I have a 
case sensitive
file system, the reason why I have to use

\setmainfont{Roboto}

I am working with macOS with TL from Tug (not MacTeX)

Herbert


From mojca.miklavec.lists at gmail.com  Mon Dec  9 21:34:18 2019
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 9 Dec 2019 21:34:18 +0100
Subject: 64 bits version of TeXLive (pretest 2020) on Windows
In-Reply-To: <20191209020958.rvxrsdkvgdfxphvj@burischnitzel.preining.info>
References: <CANeU4n8ad08XED-gf8b-JjoqS5grEkGL4L93oa2y-AQj=ScJSw@mail.gmail.com>
 <20191209020958.rvxrsdkvgdfxphvj@burischnitzel.preining.info>
Message-ID: <CALBOmsbN7b6OvdsW9vzaca-HzPW7MNg2QyufaBvNwtBp5pby6g@mail.gmail.com>

On Mon, 9 Dec 2019 at 03:10, Norbert Preining wrote:
>
> Hi Pablo,
>
> I can only underline what Akira said. By far the biggest group of
> if/else in the code are related to Windows, which needs to be treated
> specially. Starting to add on top of this a complication with two
> different Windows versions is bound to create complications that do not
> really pay off, in particular since - as Akira said - the 32bit binaries
> work perfectly well on 64 Windows.

Just out of curiosity though: if TeX Live would just *ship* the 64-bit
Windows binaries which one could installed alongside win32, similar to
how one can install linux binaries alongside, and then let users
manually set the path to the correct binary set if they wish so ...
does that still sound prohibitively unthinkable of as the first step?

(Basically: no out-of-the-box support to install those binaries by
default, exclude the binaries from the DVD set, but allow advanced
users to play with them if they want.)

Are those major if-else sections in the perl code (tlmgr) or somewhere else?

Mojca

From zdenek.wagner at gmail.com  Mon Dec  9 22:34:47 2019
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 9 Dec 2019 22:34:47 +0100
Subject: Spacing with Font Roboto
In-Reply-To: <38ebbf38-9478-beec-a5ed-db9e427368bb@fu-berlin.de>
References: <CALeLr1mfjEPcdMi2CQWrnF1U0uAZ9TXcrVqP9NgoizuJ-HKuxQ@mail.gmail.com>
 <87o8whmpxd.fsf@siart.de> <38ebbf38-9478-beec-a5ed-db9e427368bb@fu-berlin.de>
Message-ID: <CAC1phyYwqE14TBwoSR=ekhp9MPhBTjeh0em6GDdY8_1XAAkKJg@mail.gmail.com>

po 9. 12. 2019 v 17:30 odes?latel Herbert Voss
<Herbert.Voss at fu-berlin.de> napsal:
>
>
>
> Am 09.12.19 um 17:20 schrieb Uwe Siart:
> > Alexander Krumeich <alexander.krumeich at gmail.com> writes:
> >
> >> \documentclass[a4paper]{scrartcl}
> >> \usepackage{fontspec}
> >> \setmainfont{roboto}
> >>
> >> \begin{document}
> >> This is a test.
> >> \end{document}
> >>
> >> Following is a verbatim copy of the characters when I mark and copy
> >> them from my PDF viewer:
> >>
> >> T h is
> >> is
> >> a
> >> te s t.
> > >From the PDF produced by lualatex I get
> >
> > T h i s i s a t e s t .
> >
> > Interestingly, with xelatex I get
> >
> > This is a test.
> >
> > (as it should be)
>
> I cannot see it. Both are correct. The only difference is that I have a
> case sensitive
> file system, the reason why I have to use
>
> \setmainfont{Roboto}
>
> I am working with macOS with TL from Tug (not MacTeX)
>
> Herbert
>
If fontconfig does not find an exact match, it tries different rules
to find a replacement font. It may happen that it finds the required
font if only case does not match. It also depends how xetex and luatex
cooperate with fontconfig. And this may chage after OS upgrade. If I
am not sure, I always try "fc-match -v <fontname>" in order to find,
under which name the system's  fontconfig knows the font.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz


From news3 at nililand.de  Mon Dec  9 23:22:39 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Mon, 9 Dec 2019 23:22:39 +0100
Subject: Spacing with Font Roboto
References: <CALeLr1mfjEPcdMi2CQWrnF1U0uAZ9TXcrVqP9NgoizuJ-HKuxQ@mail.gmail.com>
Message-ID: <1il08x5qsyc1s.dlg@nililand.de>

Am Mon, 9 Dec 2019 15:01:05 +0100 schrieb Alexander Krumeich:

> Dear TL,
> 
> using the Roboto font results in strange spacing in the text layer of
> the resulting PDF document. The page looks good on paper, but in the
> text representation a space is added after some characters. 

Well as there are no real space chars pdf viewers have to use an
heuristic, so spaces are not always reliable. But this looks rather
odd, I added an issue here to keep track of this 

https://github.com/latex3/luaotfload/issues/125


-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From karl at freefriends.org  Tue Dec 10 00:12:46 2019
From: karl at freefriends.org (Karl Berry)
Date: Mon, 9 Dec 2019 16:12:46 -0700
Subject: Spacing with Font Roboto
In-Reply-To: <CALeLr1mfjEPcdMi2CQWrnF1U0uAZ9TXcrVqP9NgoizuJ-HKuxQ@mail.gmail.com>
Message-ID: <201912092312.xB9NCk6M007294@freefriends.org>

    \setmainfont{roboto}

FWIW, as suggested to me by Bob Tennent (roboto package maintainer),
if I change that line to
\usepackage{roboto}

I get non-spacey output:

$ lualatex r.tex
..
$ pdftotext r.pdf -
This is a test. 1

I did get the same spacey output as you reported with the original input.

Looking at roboto.sty, it's unclear to me why it would make a
difference. I surmise different fonts are being loaded. Without knowing
exactly which fonts are being used, ideally through filename lookups
instead of going through the system, I'm not sure there's any way to get
to the bottom of it. --best, karl.

From P.Taylor at rhul.ac.uk  Tue Dec 10 00:20:43 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Mon, 9 Dec 2019 23:20:43 +0000
Subject: [EXT] Spacing with Font Roboto
In-Reply-To: <CALeLr1mfjEPcdMi2CQWrnF1U0uAZ9TXcrVqP9NgoizuJ-HKuxQ@mail.gmail.com>
References: <CALeLr1mfjEPcdMi2CQWrnF1U0uAZ9TXcrVqP9NgoizuJ-HKuxQ@mail.gmail.com>
Message-ID: <f9e397e5-db5c-008d-6ac5-3d0d3eda8f4f@Rhul.Ac.Uk>

Alexander Krumeich wrote:

[...] in the text representation a space is added after some characters. Consider
the following MWE:

\listfiles
\documentclass[a4paper]{scrartcl}
\usepackage{fontspec}
\setmainfont{roboto}

\begin{document}
This is a test.
\end{document}


I was unable to get your example to work at all, despite downloading and installing the Roboto family from Google and then running "fc-cache <etc>", but I was able to use Roboto in plain XeTeX, as in :

\font \thisfont = "Roboto Medium"

\thisfont

This is a test.

\end

Viewing the resulting PDF in Adobe Acrobat CC, then using "File / Export to / Text (plain) yielded :

This is a test.

with no anomalous spaces or lack thereof.  Copy-and-paste similarly evidenced no anomalies.

Philip Tayor

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191209/b0d7717e/attachment-0001.html>

From news3 at nililand.de  Tue Dec 10 00:38:26 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Tue, 10 Dec 2019 00:38:26 +0100
Subject: Spacing with Font Roboto
References: <CALeLr1mfjEPcdMi2CQWrnF1U0uAZ9TXcrVqP9NgoizuJ-HKuxQ@mail.gmail.com>
 <201912092312.xB9NCk6M007294@freefriends.org>
Message-ID: <1k54rbr4irkiv$.dlg@nililand.de>

Am Mon, 9 Dec 2019 16:12:46 -0700 schrieb Karl Berry:

> if I change that line to
> \usepackage{roboto}

then you wouldn't use the roboto font in the example, as roboto is a
sans serif font.

\usepackage{roboto} + \sffamily shows the same (wrong) behaviour for
me. 

Actually Marcel just commented on the luaotfload issue:

================
This is an artifact of how LuaTeX handles font with non-standard
upem values. The Roboto font bundled with TeXLive has been converted
from TrueType to OpenType without changing upem from 2048 to 1000.
LuaTeX tries to work around viewer bugs by forcing upem to 1000 and
fixing the differences by changing the font size and adding kerning.
This is detected as spaces by some viewers. There is not much we can
do here. LuaTeX could be changed to behave similar to XeTeX, but
that would reintroduce multiple issues with buggy printers.

The best fix would be to avoid such fonts altogether. For example by
using the original TTF fonts instead of converting them to OTF (This
actually used to be the case up to 2018 and it is the reason why the
problem only occured for some people: If Roboto is installed as
system font, the TTF system font is used) or by using a normal upem
value of 1000 for the OTF version.
================

-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From karl at freefriends.org  Tue Dec 10 00:51:20 2019
From: karl at freefriends.org (Karl Berry)
Date: Mon, 9 Dec 2019 16:51:20 -0700
Subject: Spacing with Font Roboto
In-Reply-To: <1k54rbr4irkiv$.dlg@nililand.de>
Message-ID: <201912092351.xB9NpKgV008600@freefriends.org>

    LuaTeX tries to work around viewer bugs by forcing upem to 1000 and
    fixing the differences by changing the font size and adding kerning.

Inserting kerns(?!) to work around bugs in (presumably only some)
viewers does not seem like a good tradeoff? What happens when those bugs
disappear or change in future versions? TeX output is supposed to be
stable, within reason. Oh well.

    using the original TTF fonts instead of converting them to OTF

Agreed that using original fonts sounds better in general.

I don't know why Bob changed the setup, but I doubt he did it
lightly. Perhaps he can advise. -k

From rdtennent at gmail.com  Tue Dec 10 02:57:54 2019
From: rdtennent at gmail.com (Bob Tennent)
Date: Mon, 09 Dec 2019 20:57:54 -0500
Subject: Spacing with Font Roboto
Message-ID: <20191210015754.uJe6Gkm0c%rdt@cs.queensu.ca>

    using the original TTF fonts instead of converting them to OTF

  Agreed that using original fonts sounds better in general.

  I don't know why Bob changed the setup, but I doubt he did it
  lightly. Perhaps he can advise.

otftotfm works more reliably with otf fonts. I can't recall
what probems arose with the ttf roboto set but in the future
I'll try harder to avoid ttf-to-otf conversions.

BTW, roboto.sty uses font filenames; notice the 

Extension = .otf 

in \defaultfontfeatures.

Bob T.

From alexander.krumeich at gmail.com  Tue Dec 10 10:55:30 2019
From: alexander.krumeich at gmail.com (Alexander Krumeich)
Date: Tue, 10 Dec 2019 10:55:30 +0100
Subject: Spacing with Font Roboto
In-Reply-To: <20191210015754.uJe6Gkm0c%rdt@cs.queensu.ca>
References: <20191210015754.uJe6Gkm0c%rdt@cs.queensu.ca>
Message-ID: <CALeLr1m1ExbJShY3fwJi6hUKePj-D2Ccfzk5qR6DWhQJgH_YFQ@mail.gmail.com>

Thank you everybody for the quick and most helpful replies. I've
installed the TrueType from Google. Those do work fine. Of course, I'd
rather stick to the TeX Live distribution, but for the time being this
is a viable workaround.

   Alexander

On Tue, Dec 10, 2019 at 2:58 AM Bob Tennent <rdtennent at gmail.com> wrote:
>
>     using the original TTF fonts instead of converting them to OTF
>
>   Agreed that using original fonts sounds better in general.
>
>   I don't know why Bob changed the setup, but I doubt he did it
>   lightly. Perhaps he can advise.
>
> otftotfm works more reliably with otf fonts. I can't recall
> what probems arose with the ttf roboto set but in the future
> I'll try harder to avoid ttf-to-otf conversions.
>
> BTW, roboto.sty uses font filenames; notice the
>
> Extension = .otf
>
> in \defaultfontfeatures.
>
> Bob T.

From daleif at math.au.dk  Tue Dec 10 11:37:56 2019
From: daleif at math.au.dk (Lars Madsen)
Date: Tue, 10 Dec 2019 10:37:56 +0000
Subject: Windows installer, failure, restarted with generated profile
Message-ID: <DB8PR01MB5947DA970BDE37899CE6ECF9F25B0@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>

What exactly is suppose to happen here?

In the installation I just did, the installation failed at some texdoc part (the checksum was wrong), would have been nice if the installation could just have proceeded. But we only had the choice to abort.

When we restarted the installation the isntaller asked if we wanted to use the same profile, sure.

And then it seemed to stop on loading the repository with a message that one should abort or change repo if it took too long.

It was not really clear what the installer was doing at this point if anything.

So I'm just wondering, what exactly is suppose to happen if you restart the installation using the same profile?

(I ended up deleting everything, and is running the net installation again, which takes about an hour)


/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at math<http://au.dk/daleif at imf> / More information: http://au.dk/en/daleif at math<http://au.dk/en/daleif at imf>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191210/ca06ad83/attachment.html>

From Giuliano.Favro at inpeco.com  Tue Dec 10 10:22:31 2019
From: Giuliano.Favro at inpeco.com (Giuliano Favro)
Date: Tue, 10 Dec 2019 09:22:31 +0000
Subject: Texlive2019: Installation problem
Message-ID: <AM4PR0501MB22731C42CB78C6770B44800DF75B0@AM4PR0501MB2273.eurprd05.prod.outlook.com>

Hello,
I'm trying to install TexLivem but the installation fail.
I tried many times with different options and using different mirrors, but the error is the same.
Next the last time, trying with -gui text option:

C:\Users\giuliano.favro\Desktop\LaTex\install\install-tl-20191210>install-tl-windows.bat -gui text
Loading http://ctan.mirror.garr.it/mirrors/CTAN/systems/texlive/tlnet/tlpkg/texlive.tlpdb
xz: (stdin): Compressed data is corrupt

Starting the Instalaltion process, the script ends with this error:
Installing [0001/3903, time/total: ??:??/??:??]: texlive.infra [392k]
TLUtils::untar: C:\Users\giuliano.favro\Desktop\LaTex\install\install-tl-20191210\tlpkg\installer\tar.exe xmf C:\Temp\j3VqjjrMK2\FICuSH6CZw/texlive.infra.tar failed (in C:/texlive/2019)
TLPDB::_install_package: untar failed
Installation failed.
Rerunning the installer will try to restart the installation.
Or you can restart by running the installer with:
  install-tl-windows.bat --profile installation.profile [EXTRA-ARGS]
or
  install-tl-advanced.bat --profile installation.profile [EXTRA-ARGS]
-------------- next part --------------
A non-text attachment was scrubbed...
Name: install-tl.log
Type: application/octet-stream
Size: 4791 bytes
Desc: install-tl.log
URL: <https://tug.org/pipermail/tex-live/attachments/20191210/cbe4ed1b/attachment.obj>

From rdtennent at gmail.com  Tue Dec 10 21:05:11 2019
From: rdtennent at gmail.com (Bob Tennent)
Date: Tue, 10 Dec 2019 15:05:11 -0500
Subject: Spacing with Font Roboto
Message-ID: <20191210200511.JpJ9Q6IpH%rdt@cs.queensu.ca>

I've tried to re-construct the roboto package using the TTF
set and it certainly seems that otftotfm has problems with
those fonts, which is presumably why I had converted to OTF.

But the TTF Roboto fonts also have em size 2048. Why do they
work better with luatex than the converted OTF fonts?

Bob T.

From tex at 2krueger.de  Tue Dec 10 22:48:18 2019
From: tex at 2krueger.de (Marcel Fabian =?utf-8?Q?Kr=C3=BCger?=)
Date: Tue, 10 Dec 2019 22:48:18 +0100
Subject: Spacing with Font Roboto
In-Reply-To: <20191210200511.JpJ9Q6IpH%rdt@cs.queensu.ca>
References: <20191210200511.JpJ9Q6IpH%rdt@cs.queensu.ca>
Message-ID: <20191210214818.lv5owp627i2hj6lt@yoga>

On Tue, Dec 10, 2019 at 03:05:11PM -0500, Bob Tennent wrote:
> I've tried to re-construct the roboto package using the TTF
> set and it certainly seems that otftotfm has problems with
> those fonts, which is presumably why I had converted to OTF.
> 
> But the TTF Roboto fonts also have em size 2048. Why do they
> work better with luatex than the converted OTF fonts?

The usual rule is that TrueType based fonts have a power of two,
normally 1024 or 2048 because this is sometimes faster for TTF
renderers. In contrast, OpenType/CCF (aka .otf) fonts are based on Type 1
fonts which traditionally use em size 1000. I don't know exactly where
it is coming from but even the Type 1 font specification said that it is
"typical of a Type 1 font program and is highly recommended". Given that
OpenType just combined existing formats, this is one of many places
where slightly different behaviour is expected for CFF and TTF fonts.

Given that Type 1 based fonts with other em size are quite unusual and
sometimes not supported, LuaTeX just sets the value to 1000 and then
manually fixes the appearance if a Type 1 based font with non-standard
em size is found. This doesn't happen for TrueType fonts because there,
2048 isn't unusual in any way. (Also I think for TTF fonts it is more
common to have non-standard em sizes, so renderers are usually more
robust there)
For reference, this "feature" of LuaTeX is the "fix" for
http://tracker.luatex.org/view.php?id=200

Anyway, would it be an option to keep the OTF fonts but "rescale" them
to 1000 em size. I think that's the usual approach here. In fontforge,
that can be done by just changing the em size. Then fontforge takes care
to rescale everything so that no difference can be seen.

Marcel

From rdtennent at gmail.com  Tue Dec 10 23:09:28 2019
From: rdtennent at gmail.com (Bob Tennent)
Date: Tue, 10 Dec 2019 17:09:28 -0500
Subject: Spacing with Font Roboto
In-Reply-To: <20191210214818.lv5owp627i2hj6lt@yoga>
References: <20191210200511.JpJ9Q6IpH%rdt@cs.queensu.ca>
 <20191210214818.lv5owp627i2hj6lt@yoga>
Message-ID: <20191210220928.0hvx45Dpo%rdtennent@gmail.com>

 >|On Tue, Dec 10, 2019 at 03:05:11PM -0500, Bob Tennent wrote:
 >|> I've tried to re-construct the roboto package using the TTF
 >|> set and it certainly seems that otftotfm has problems with
 >|> those fonts, which is presumably why I had converted to OTF.
 >|>
 >|> But the TTF Roboto fonts also have em size 2048. Why do they
 >|> work better with luatex than the converted OTF fonts?
 >|
 >|The usual rule is that TrueType based fonts have a power of two,
 >|normally 1024 or 2048 because this is sometimes faster for TTF
 >|renderers. In contrast, OpenType/CCF (aka .otf) fonts are based on Type 1
 >|fonts which traditionally use em size 1000. I don't know exactly where
 >|it is coming from but even the Type 1 font specification said that it is
 >|"typical of a Type 1 font program and is highly recommended". Given that
 >|OpenType just combined existing formats, this is one of many places
 >|where slightly different behaviour is expected for CFF and TTF fonts.
 >|
 >|Given that Type 1 based fonts with other em size are quite unusual and
 >|sometimes not supported, LuaTeX just sets the value to 1000 and then
 >|manually fixes the appearance if a Type 1 based font with non-standard
 >|em size is found. This doesn't happen for TrueType fonts because there,
 >|2048 isn't unusual in any way. (Also I think for TTF fonts it is more
 >|common to have non-standard em sizes, so renderers are usually more
 >|robust there)
 >|For reference, this "feature" of LuaTeX is the "fix" for
 >|http://tracker.luatex.org/view.php?id=200
 >|
 >|Anyway, would it be an option to keep the OTF fonts but "rescale" them
 >|to 1000 em size. I think that's the usual approach here. In fontforge,
 >|that can be done by just changing the em size. Then fontforge takes care
 >|to rescale everything so that no difference can be seen.

I can do that for a single font but for all 32 of the
fonts in the family, I'd need a script. I've asked on the
fontforge-users mail list:

https://sourceforge.net/p/fontforge/mailman/fontforge-users/?viewmonth=201912

Bob T.

From tex at 2krueger.de  Wed Dec 11 00:49:28 2019
From: tex at 2krueger.de (Marcel Fabian =?utf-8?Q?Kr=C3=BCger?=)
Date: Wed, 11 Dec 2019 00:49:28 +0100
Subject: Spacing with Font Roboto
In-Reply-To: <20191210220928.0hvx45Dpo%rdtennent@gmail.com>
References: <20191210200511.JpJ9Q6IpH%rdt@cs.queensu.ca>
 <20191210214818.lv5owp627i2hj6lt@yoga>
 <20191210220928.0hvx45Dpo%rdtennent@gmail.com>
Message-ID: <20191210234928.2eykkh4fzhl32iyb@yoga>

On Tue, Dec 10, 2019 at 05:09:28PM -0500, Bob Tennent wrote:
>  >|Anyway, would it be an option to keep the OTF fonts but "rescale" them
>  >|to 1000 em size. I think that's the usual approach here. In fontforge,
>  >|that can be done by just changing the em size. Then fontforge takes care
>  >|to rescale everything so that no difference can be seen.
> 
> I can do that for a single font but for all 32 of the
> fonts in the family, I'd need a script. I've asked on the
> fontforge-users mail list:

If you have the fontforge python library installed, you can use the
script

#!/usr/bin/python3
from sys import argv
import fontforge
for file in argv[1:]:
    font=fontforge.open(file)
    font.em = 1000
    font.generate(file)



Usage is quite simple: Pass all OTF files as arguments, they are
modified in-place.


Marcel

From preining at logic.at  Wed Dec 11 01:48:38 2019
From: preining at logic.at (Norbert Preining)
Date: Wed, 11 Dec 2019 09:48:38 +0900
Subject: Texlive2019: Installation problem
In-Reply-To: <AM4PR0501MB22731C42CB78C6770B44800DF75B0@AM4PR0501MB2273.eurprd05.prod.outlook.com>
References: <AM4PR0501MB22731C42CB78C6770B44800DF75B0@AM4PR0501MB2273.eurprd05.prod.outlook.com>
Message-ID: <20191211004838.c2zdltocawnqweos@burischnitzel.preining.info>

Hi Giuliano,

this is very strange, and my only theory is that you have a anti-virus
software running that interferes by checking the files and either
locking or altering them.

No idea what else it could be.

And using the GUI or the text mode ends up in absolutely the same
installation code, so no need to switch.

> Installing [0001/3903, time/total: ??:??/??:??]: texlive.infra [392k]
> TLUtils::untar: C:\Users\giuliano.favro\Desktop\LaTex\install\install-tl-20191210\tlpkg\installer\tar.exe xmf C:\Temp\j3VqjjrMK2\FICuSH6CZw/texlive.infra.tar failed (in C:/texlive/2019)
> TLPDB::_install_package: untar failed

It seems that the 
	unxz
step succeeded, that would indicate that the file is in good order.
So not being able to untar is, as said, surprising!

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From norbert at preining.info  Wed Dec 11 03:41:54 2019
From: norbert at preining.info (Norbert Preining)
Date: Wed, 11 Dec 2019 11:41:54 +0900
Subject: Windows installer, failure, restarted with generated profile
In-Reply-To: <DB8PR01MB5947DA970BDE37899CE6ECF9F25B0@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>
References: <DB8PR01MB5947DA970BDE37899CE6ECF9F25B0@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>
Message-ID: <20191211024154.hoppugxf747t3kds@burischnitzel.preining.info>

Hi Lars,

not sure what you want us to do, especially without seeing any logs!

On Tue, 10 Dec 2019, Lars Madsen wrote:
> In the installation I just did, the installation failed at some texdoc part (the checksum was wrong), would have been nice if the installation could just have proceeded. But we only had the choice to abort.

I guess you mean that you would like the installer to restart
installation at the state when the part failed, right? This **is** a
tricky thing, since many things might have changes since the
installation failed:
- start installation, fails
- no time, wait a day, tlnet is updated, lots of things have changed
- restart installation ... hmmmm, how?

> When we restarted the installation the isntaller asked if we wanted to use the same profile, sure.

Yes, this is the best we can do, allow you to restart the installation
with the very same settings, instead of reentering them.

> And then it seemed to stop on loading the repository with a message that one should abort or change repo if it took too long.

??? No idea about that.

> So I'm just wondering, what exactly is suppose to happen if you restart the installation using the same profile?

I restarts the complete installation, with the same settings you did the
last time.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From Giuliano.Favro at inpeco.com  Wed Dec 11 13:00:45 2019
From: Giuliano.Favro at inpeco.com (Giuliano Favro)
Date: Wed, 11 Dec 2019 12:00:45 +0000
Subject: Texlive2019: Installation problem
In-Reply-To: <AM4PR0501MB227309C847749742CB6982BEF75A0@AM4PR0501MB2273.eurprd05.prod.outlook.com>
References: <AM4PR0501MB22731C42CB78C6770B44800DF75B0@AM4PR0501MB2273.eurprd05.prod.outlook.com>
 <20191211004838.c2zdltocawnqweos@burischnitzel.preining.info>
 <AM4PR0501MB227309C847749742CB6982BEF75A0@AM4PR0501MB2273.eurprd05.prod.outlook.com>
Message-ID: <AM4PR0501MB22732D10D31EA578FFA10682F75A0@AM4PR0501MB2273.eurprd05.prod.outlook.com>

Hi Norbert,
In the mean time I make some tests, copying the temporary directory created by the script, to save it from the deletion when the installation script fail.
The directory contains 2 files:
texlive.infra.tar (0 byte) 
texlive.infra.tar.xz (218848 byte)

the xz file inside is good and another tool (i.e. 7-zip) can open and unpack it generating a 1003520 byte tarball.
Next the tarball shall be opened and unpack without problem by 7-zip.

Could be a problem with the xz tool used to unpack the compressed file?

Giuliano Favro

-----Original Message-----
From: Norbert Preining <preining at logic.at> 
Sent: mercoled? 11 dicembre 2019 01:49
To: Giuliano Favro <Giuliano.Favro at inpeco.com>
Cc: tex-live at tug.org
Subject: Re: Texlive2019: Installation problem

Hi Giuliano,

this is very strange, and my only theory is that you have a anti-virus software running that interferes by checking the files and either locking or altering them.

No idea what else it could be.

And using the GUI or the text mode ends up in absolutely the same installation code, so no need to switch.

> Installing [0001/3903, time/total: ??:??/??:??]: texlive.infra [392k]
> TLUtils::untar: 
> C:\Users\giuliano.favro\Desktop\LaTex\install\install-tl-20191210\tlpk
> g\installer\tar.exe xmf 
> C:\Temp\j3VqjjrMK2\FICuSH6CZw/texlive.infra.tar failed (in 
> C:/texlive/2019)
> TLPDB::_install_package: untar failed

It seems that the 
	unxz
step succeeded, that would indicate that the file is in good order.
So not being able to untar is, as said, surprising!

Best

Norbert

--
PREINING Norbert                               https://eur03.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.preining.info&amp;data=02%7C01%7C%7Cb17ffc0ad250415ca5ec08d77dd3dfa7%7Cc7d09feecdcf458bbddbcea5ff7335dc%7C0%7C0%7C637116221263321092&amp;sdata=0ZKq3SSGLwgS0uHFFtKNQaT%2Bzxagcfitl1ECtYlvnJI%3D&amp;reserved=0
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From Giuliano.Favro at inpeco.com  Wed Dec 11 13:03:20 2019
From: Giuliano.Favro at inpeco.com (Giuliano Favro)
Date: Wed, 11 Dec 2019 12:03:20 +0000
Subject: Texlive2019: Installation problem
In-Reply-To: <AM4PR0501MB22732D10D31EA578FFA10682F75A0@AM4PR0501MB2273.eurprd05.prod.outlook.com>
References: <AM4PR0501MB22731C42CB78C6770B44800DF75B0@AM4PR0501MB2273.eurprd05.prod.outlook.com>
 <20191211004838.c2zdltocawnqweos@burischnitzel.preining.info>
 <AM4PR0501MB227309C847749742CB6982BEF75A0@AM4PR0501MB2273.eurprd05.prod.outlook.com>
 <AM4PR0501MB22732D10D31EA578FFA10682F75A0@AM4PR0501MB2273.eurprd05.prod.outlook.com>
Message-ID: <AM4PR0501MB2273402878B34FEE012950C2F75A0@AM4PR0501MB2273.eurprd05.prod.outlook.com>

Hello All,

#### SOLVED!!!! ####

The problem was caused by an old version of msys present in the path.
Temporary removed that from the path the installation is started and works! 

Regards.

Giuliano Favro

-----Original Message-----
From: Giuliano Favro 
Sent: mercoled? 11 dicembre 2019 13:01
To: tex-live at tug.org
Subject: RE: Texlive2019: Installation problem

Hi Norbert,
In the mean time I make some tests, copying the temporary directory created by the script, to save it from the deletion when the installation script fail.
The directory contains 2 files:
texlive.infra.tar (0 byte) 
texlive.infra.tar.xz (218848 byte)

the xz file inside is good and another tool (i.e. 7-zip) can open and unpack it generating a 1003520 byte tarball.
Next the tarball shall be opened and unpack without problem by 7-zip.

Could be a problem with the xz tool used to unpack the compressed file?

Giuliano Favro

-----Original Message-----
From: Norbert Preining <preining at logic.at> 
Sent: mercoled? 11 dicembre 2019 01:49
To: Giuliano Favro <Giuliano.Favro at inpeco.com>
Cc: tex-live at tug.org
Subject: Re: Texlive2019: Installation problem

Hi Giuliano,

this is very strange, and my only theory is that you have a anti-virus software running that interferes by checking the files and either locking or altering them.

No idea what else it could be.

And using the GUI or the text mode ends up in absolutely the same installation code, so no need to switch.

> Installing [0001/3903, time/total: ??:??/??:??]: texlive.infra [392k]
> TLUtils::untar: 
> C:\Users\giuliano.favro\Desktop\LaTex\install\install-tl-20191210\tlpk
> g\installer\tar.exe xmf 
> C:\Temp\j3VqjjrMK2\FICuSH6CZw/texlive.infra.tar failed (in 
> C:/texlive/2019)
> TLPDB::_install_package: untar failed

It seems that the 
	unxz
step succeeded, that would indicate that the file is in good order.
So not being able to untar is, as said, surprising!

Best

Norbert

--
PREINING Norbert                               https://eur03.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.preining.info&amp;data=02%7C01%7C%7Cb17ffc0ad250415ca5ec08d77dd3dfa7%7Cc7d09feecdcf458bbddbcea5ff7335dc%7C0%7C0%7C637116221263321092&amp;sdata=0ZKq3SSGLwgS0uHFFtKNQaT%2Bzxagcfitl1ECtYlvnJI%3D&amp;reserved=0
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From rdtennent at gmail.com  Wed Dec 11 14:35:50 2019
From: rdtennent at gmail.com (Bob Tennent)
Date: Wed, 11 Dec 2019 08:35:50 -0500
Subject: Spacing with Font Roboto
In-Reply-To: <20191210220928.0hvx45Dpo%rdtennent@gmail.com>
References: <20191210200511.JpJ9Q6IpH%rdt@cs.queensu.ca>
 <20191210214818.lv5owp627i2hj6lt@yoga>
 <20191210220928.0hvx45Dpo%rdtennent@gmail.com>
Message-ID: <20191211133550.p28yGoADt%rdtennent@gmail.com>

 >|Anyway, would it be an option to keep the OTF fonts
 >|but "rescale" them to 1000 em size. I think that's the
 >|usual approach here. In fontforge, that can be done by
 >|just changing the em size. Then fontforge takes care to
 >|rescale everything so that no difference can be seen.

Using a script provided by Marcel, I've re-generated a
roboto package with otf fonts having em 1000 and uploaded it
to CTAN.

Bob T.

From khzimmer at posteo.de  Wed Dec 11 14:38:38 2019
From: khzimmer at posteo.de (khzimmer at posteo.de)
Date: Wed, 11 Dec 2019 14:38:38 +0100
Subject: Windows installer, failure, restarted with generated profile
In-Reply-To: <20191211024154.hoppugxf747t3kds@burischnitzel.preining.info>
References: <DB8PR01MB5947DA970BDE37899CE6ECF9F25B0@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>
 <20191211024154.hoppugxf747t3kds@burischnitzel.preining.info>
Message-ID: <815c83e7b4975c98f8fc5efda3392bdb@posteo.de>

Hi Norbert,

might it be there's a concept problem?


If I want to install TeX Live I typically want to install a released 
version (mostly: the newest, I guess) -- but not install a changing 
system.


So if installation fails due to checksum error of the n-th file, I would 
expect the next installation-run to resume with that very file:

Instead of deleting the complete tmp folder then only that damadged file 
would be deleted.


Nothing would have changed on the server in between: Because I do not 
access trunk, but the newest released(!) version of TeX Live.

:)  At least that's what I (as a user) would like to be able to do.


Cheers

Karl-Heinz

Am 11.12.2019 03:41 schrieb Norbert Preining:
> Hi Lars,
> 
> not sure what you want us to do, especially without seeing any logs!
> 
> On Tue, 10 Dec 2019, Lars Madsen wrote:
>> In the installation I just did, the installation failed at some texdoc 
>> part (the checksum was wrong), would have been nice if the 
>> installation could just have proceeded. But we only had the choice to 
>> abort.
> 
> I guess you mean that you would like the installer to restart
> installation at the state when the part failed, right? This **is** a
> tricky thing, since many things might have changes since the
> installation failed:
> - start installation, fails
> - no time, wait a day, tlnet is updated, lots of things have changed
> - restart installation ... hmmmm, how?
> 
>> When we restarted the installation the isntaller asked if we wanted to 
>> use the same profile, sure.
> 
> Yes, this is the best we can do, allow you to restart the installation
> with the very same settings, instead of reentering them.
> 
>> And then it seemed to stop on loading the repository with a message 
>> that one should abort or change repo if it took too long.
> 
> ??? No idea about that.
> 
>> So I'm just wondering, what exactly is suppose to happen if you 
>> restart the installation using the same profile?
> 
> I restarts the complete installation, with the same settings you did 
> the
> last time.
> 
> Best
> 
> Norbert
> 
> --
> PREINING Norbert                               http://www.preining.info
> Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From daleif at math.au.dk  Wed Dec 11 16:43:59 2019
From: daleif at math.au.dk (Lars Madsen)
Date: Wed, 11 Dec 2019 15:43:59 +0000
Subject: Windows installer, failure, restarted with generated profile
In-Reply-To: <20191211024154.hoppugxf747t3kds@burischnitzel.preining.info>
References: <DB8PR01MB5947DA970BDE37899CE6ECF9F25B0@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>,
 <20191211024154.hoppugxf747t3kds@burischnitzel.preining.info>
Message-ID: <PR3PR01MB64735831D7F78003DDA1AED0F25A0@PR3PR01MB6473.eurprd01.prod.exchangelabs.com>

I needed to get the PC out the door, so everything was deleted before trying again.

I would have loved if Karl-Heinz' description would work, but it never have. And as far as I remember the installer cannot.





/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at math<http://au.dk/daleif at imf> / More information: http://au.dk/en/daleif at math<http://au.dk/en/daleif at imf>

________________________________
From: Norbert Preining <norbert at preining.info>
Sent: 11 December 2019 03:41
To: Lars Madsen <daleif at math.au.dk>
Cc: tex-live at tug.org <tex-live at tug.org>
Subject: Re: Windows installer, failure, restarted with generated profile

Hi Lars,

not sure what you want us to do, especially without seeing any logs!

On Tue, 10 Dec 2019, Lars Madsen wrote:
> In the installation I just did, the installation failed at some texdoc part (the checksum was wrong), would have been nice if the installation could just have proceeded. But we only had the choice to abort.

I guess you mean that you would like the installer to restart
installation at the state when the part failed, right? This **is** a
tricky thing, since many things might have changes since the
installation failed:
- start installation, fails
- no time, wait a day, tlnet is updated, lots of things have changed
- restart installation ... hmmmm, how?

> When we restarted the installation the isntaller asked if we wanted to use the same profile, sure.

Yes, this is the best we can do, allow you to restart the installation
with the very same settings, instead of reentering them.

> And then it seemed to stop on loading the repository with a message that one should abort or change repo if it took too long.

??? No idea about that.

> So I'm just wondering, what exactly is suppose to happen if you restart the installation using the same profile?

I restarts the complete installation, with the same settings you did the
last time.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191211/b65b34ce/attachment-0001.html>

From alexander.krumeich at gmail.com  Thu Dec 12 12:04:03 2019
From: alexander.krumeich at gmail.com (Alexander Krumeich)
Date: Thu, 12 Dec 2019 12:04:03 +0100
Subject: Spacing with Font Roboto
In-Reply-To: <20191211133550.p28yGoADt%rdtennent@gmail.com>
References: <20191210200511.JpJ9Q6IpH%rdt@cs.queensu.ca>
 <20191210214818.lv5owp627i2hj6lt@yoga>
 <20191210220928.0hvx45Dpo%rdtennent@gmail.com>
 <20191211133550.p28yGoADt%rdtennent@gmail.com>
Message-ID: <CALeLr1kppVUTR5PYj8XpdY2bYJxgSAf=dhUj8JDUGT8PzgOZsg@mail.gmail.com>

Wow. Thank you, Bob & Marcel. I can confirm that this solution not
only works with the MWE, but also with my production code.
Honestly, I'm very thankful for and amazed by the speed and quality of
the support that the people on this list provide.

   Alexander

On Wed, Dec 11, 2019 at 2:36 PM Bob Tennent <rdtennent at gmail.com> wrote:
>
>  >|Anyway, would it be an option to keep the OTF fonts
>  >|but "rescale" them to 1000 em size. I think that's the
>  >|usual approach here. In fontforge, that can be done by
>  >|just changing the em size. Then fontforge takes care to
>  >|rescale everything so that no difference can be seen.
>
> Using a script provided by Marcel, I've re-generated a
> roboto package with otf fonts having em 1000 and uploaded it
> to CTAN.
>
> Bob T.

From byung.kwak at gmail.com  Thu Dec 12 06:37:28 2019
From: byung.kwak at gmail.com (Byung-Jae Kwak)
Date: Thu, 12 Dec 2019 14:37:28 +0900
Subject: mptopdf output file not numbered.
Message-ID: <CAGqxKK2-4Cd-gymGH5yTHGKKyuo5bm6Kh8jtkwz1jrCtU-Fcjw@mail.gmail.com>

System: Windows 10, Tex Live 2019

I am using mpost and mptopdf to create PDF drawings.

For example,

> vim my_figure.mp
(create figures)
> mpost my_figure.mp
This is MetaPost, version 2.0 (Tex Live 2019/W32Tex)
...
20 output files written to: my_figure.1 .. my_figure.20
Transcript written on my_figure.log.
> mptopdf my_figure.*
(lots of output messages)
MPtoPDF 1.4.1 : my_figure.* is converted to  my_figure.pdf +  my_figure.pdf
+  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +
my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +
my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +
my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +
my_figure.pdf +  my_figure.pdf

As you can see, instead of generating my_figure-1.pdf ... my_figure-20.pdf,
all the converted files are written to my_figure.pdf, overwriting the
previous figures.

I have not had this problem before with earlier versions of TeX Live.
Has the behavior of mptopdf changed recently, or is there something wrong
with my installation of TeX Live 2019?

BJ
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191212/b526cf8b/attachment.html>

From daleif at math.au.dk  Thu Dec 12 15:42:16 2019
From: daleif at math.au.dk (Lars Madsen)
Date: Thu, 12 Dec 2019 14:42:16 +0000
Subject: mptopdf output file not numbered.
In-Reply-To: <CAGqxKK2-4Cd-gymGH5yTHGKKyuo5bm6Kh8jtkwz1jrCtU-Fcjw@mail.gmail.com>
References: <CAGqxKK2-4Cd-gymGH5yTHGKKyuo5bm6Kh8jtkwz1jrCtU-Fcjw@mail.gmail.com>
Message-ID: <PR3PR01MB64739A9F1B62B71FA057A410F2550@PR3PR01MB6473.eurprd01.prod.exchangelabs.com>

I can confirm that TL19 mptopdf does not work as it use to do

Below is an MWE

I tested with TL18 and there I get numbered PDFs. However mptopdf is version 1.4.1 in both. However I diffed TL19 version against TL18 version. They are not the same


beginfig(1);

  draw fullcircle scaled 2cm;

endfig;

beginfig(2);

  draw fullcircle scaled 2cm;

endfig;

end;






/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at math<http://au.dk/daleif at imf> / More information: http://au.dk/en/daleif at math<http://au.dk/en/daleif at imf>

________________________________
From: tex-live <tex-live-bounces+daleif=imf.au.dk at tug.org> on behalf of Byung-Jae Kwak <byung.kwak at gmail.com>
Sent: 12 December 2019 06:37
To: tex-live at tug.org <tex-live at tug.org>
Subject: mptopdf output file not numbered.

System: Windows 10, Tex Live 2019

I am using mpost and mptopdf to create PDF drawings.

For example,

> vim my_figure.mp<http://my_figure.mp>
(create figures)
> mpost my_figure.mp<http://my_figure.mp>
This is MetaPost, version 2.0 (Tex Live 2019/W32Tex)
...
20 output files written to: my_figure.1 .. my_figure.20
Transcript written on my_figure.log.
> mptopdf my_figure.*
(lots of output messages)
MPtoPDF 1.4.1 : my_figure.* is converted to  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf +  my_figure.pdf

As you can see, instead of generating my_figure-1.pdf ... my_figure-20.pdf, all the converted files are written to my_figure.pdf, overwriting the previous figures.

I have not had this problem before with earlier versions of TeX Live.
Has the behavior of mptopdf changed recently, or is there something wrong with my installation of TeX Live 2019?

BJ

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191212/146f654d/attachment.html>

From kakuto at w32tex.org  Thu Dec 12 23:34:48 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Fri, 13 Dec 2019 07:34:48 +0900
Subject: mptopdf output file not numbered.
In-Reply-To: <PR3PR01MB64739A9F1B62B71FA057A410F2550@PR3PR01MB6473.eurprd01.prod.exchangelabs.com>
References: <CAGqxKK2-4Cd-gymGH5yTHGKKyuo5bm6Kh8jtkwz1jrCtU-Fcjw@mail.gmail.com>
 <PR3PR01MB64739A9F1B62B71FA057A410F2550@PR3PR01MB6473.eurprd01.prod.exchangelabs.com>
Message-ID: <19C4DA702D054801B63A9CBA4C45534C@CJ3001517A>

> I can confirm that TL19 mptopdf does not work as it use to do

I have checked history of mptopdf.pl:

(1)
revision 22719 in TeX Live is the 2010 version

(2)
revision 50086 in TeX Live is changed by
# this patch was sent via debian but is not tested by me

(3)
revision 50112 in TeX Live
discards the changes and returns to rev. 22719

(4)
revision 52238 in TeX Live (present version, which is the
same as that in ConTeXt version: 2019.12.12 00:57)
recovers again the changes and returns to 50086.

Probably 50112, that is  22719, is the desirable one.

Thanks,
Akira


From tkt.asakura at gmail.com  Fri Dec 13 07:58:45 2019
From: tkt.asakura at gmail.com (Takuto ASAKURA)
Date: Fri, 13 Dec 2019 15:58:45 +0900
Subject: Metadata for the TeX Live Guides
Message-ID: <881CB5FD-2EC3-412F-A06B-4007203715FA@gmail.com>


Hi Karl, Norbert, and All,

I noticed that there are no doc metadata in the tlpdb for
the TeX Live Guides. For example, 

name texlive-en
category TLCore
revision 51878
shortdesc TeX Live manual (English)
[...]
docfiles size=1355
[...]
 texmf-dist/doc/texlive/texlive-en/texlive-en.html
 texmf-dist/doc/texlive/texlive-en/texlive-en.pdf
[...]

How about modifying the lines to:

 texmf-dist/doc/texlive/texlive-en/texlive-en.html details="TeX Live documentation (HTML)" language="en"
 texmf-dist/doc/texlive/texlive-en/texlive-en.pdf details="TeX Live documentation (PDF)" language="en"

and doing similar for other translations?

Best,
Takuto

From andreas_tex at freenet.de  Fri Dec 13 18:01:45 2019
From: andreas_tex at freenet.de (Andreas Scherer)
Date: Fri, 13 Dec 2019 18:01:45 +0100
Subject: mptopdf output file not numbered.
Message-ID: <8b0e7217-18f3-91e4-0754-9bc3bea038fc@freenet.de>

I've played with the two versions of 'mptopdf[.pl]' and found:

The bug lies in line 148 of the patched version: The match
should _not_ include the dot '\.', because this was not grabbed
in line 126 (and is not used in the following).

I took the liberty to remove the commented original lines and
refine the loop on '@files' some more. Attached is a revised
version of 'mptopdf.pl' that still works as intended.

Andreas
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mptopdf.pl
Type: text/x-perl
Size: 4255 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191213/5fe83642/attachment.bin>

From karl at freefriends.org  Sat Dec 14 00:06:46 2019
From: karl at freefriends.org (Karl Berry)
Date: Fri, 13 Dec 2019 16:06:46 -0700
Subject: Metadata for the TeX Live Guides
In-Reply-To: <881CB5FD-2EC3-412F-A06B-4007203715FA@gmail.com>
Message-ID: <201912132306.xBDN6kx3009354@freefriends.org>

Hi Takuto,

    I noticed that there are no doc metadata in the tlpdb for

The details="" and other such strings come from the TeX Catalogue. The
TL manual is not on CTAN, hence not in the Catalogue, hence no extra
strings.

And, to be honest, the descriptions seem entirely redundant to me (no
more information than is already in the filename), so I'm not enthused
about setting up a new mechanism to add them. Calling them "metadata"
seems rather too grandiose.

Anyway, I know texdoc prefers results with such "metadata", but I
think/hope any resulting issues could/should be resolved in the
software. --best, karl.

From reinhard.kotucha at web.de  Sat Dec 14 00:19:59 2019
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 14 Dec 2019 00:19:59 +0100
Subject: Metadata for the TeX Live Guides
In-Reply-To: <881CB5FD-2EC3-412F-A06B-4007203715FA@gmail.com>
References: <881CB5FD-2EC3-412F-A06B-4007203715FA@gmail.com>
Message-ID: <24052.7327.938578.536714@gargle.gargle.HOWL>

On 2019-12-13 at 15:58:45 +0900, Takuto ASAKURA wrote:

 >
 > Hi Karl, Norbert, and All,
 >
 > I noticed that there are no doc metadata in the tlpdb for
 > the TeX Live Guides. For example,
 >
 > name texlive-en
 > category TLCore
 > revision 51878
 > shortdesc TeX Live manual (English)
 > [...]
 > docfiles size=1355
 > [...]
 >  texmf-dist/doc/texlive/texlive-en/texlive-en.html
 >  texmf-dist/doc/texlive/texlive-en/texlive-en.pdf
 > [...]
 >
 > How about modifying the lines to:
 >
 >  texmf-dist/doc/texlive/texlive-en/texlive-en.html details="TeX Live documentation (HTML)" language="en"
 >  texmf-dist/doc/texlive/texlive-en/texlive-en.pdf details="TeX Live documentation (PDF)" language="en"
 >
 > and doing similar for other translations?


Hi Takuto,
AFAIK metadata in tlpdb come from the TeX Catalogue maintained by
CTAN.

The TeX Live Guide isn't maintained by CTAN.  A solution could be to
provide an additional XML file which contains metadata for files
maintained by TeX Live only.

I don't know where "shortdesc" for the TL Guide in tlpdb comes from
but maintaining an additional Catalogue for the few files which exist
in TeX Live only makes more sense to me than maintaining the stuff in
the software which creates tlpdb.

As far as other translations are concerned:  The Catalogue didn't
support language tags from the beginning.  Actively maintained
packages have a language tag already.  Adding language tags to older
packages is a lot of work because the process cannot be automatized.
Furthermore, the XML sources of the Catalogue are not available to the
public which prevents users from sending patches to CTAN.

With other words, missing language tags is a known problem.  But they
have to be added to the Catalogue, not to the software which creates
tlpdb.  Just to separate program code and data...

Regards,
  Reinhard

--
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From tkt.asakura at gmail.com  Sat Dec 14 04:52:45 2019
From: tkt.asakura at gmail.com (Takuto ASAKURA)
Date: Sat, 14 Dec 2019 12:52:45 +0900
Subject: Metadata for the TeX Live Guides
In-Reply-To: <201912132306.xBDN6kx3009354@freefriends.org>
References: <201912132306.xBDN6kx3009354@freefriends.org>
Message-ID: <4CA583B9-300F-4695-8071-C20E4BE90590@gmail.com>


Hi All,

@Karl

> the descriptions seem entirely redundant to me

Yes, I know it is almost redundant for human beings, but
not for computers. Extracting the "details" and "languages"
from filenames by a program *perfectly* will be tough work.
I thought it is rather easier to add such information by
human hands, especially for TeX Live-only documents, because
they are not so many.

> Anyway, I know texdoc prefers results with such "metadata", but I
> think/hope any resulting issues could/should be resolved in the
> software.


Your guess is right. I was thinking about the result lists of Texdoc.
I also thought about making an additional database to provide
such data just for Texdoc. However, maybe sharing such information
for a more general-purpose database will be beneficial, and that's
why I shared my idea.

I supposed it will improve the tlpdb a bit with small work if it
could be implemented easily. If the implementation is not so easy
than I thought, that's not the case.

@Reinhard

> Furthermore, the XML sources of the Catalogue are not available to the
> public which prevents users from sending patches to CTAN.


I didn't know this. Thanks for the interesting tip.

Best,
Takuto

> On 2019/12/14, at 8:06, Karl Berry <karl at freefriends.org> wrote:
> 
> Hi Takuto,
> 
>    I noticed that there are no doc metadata in the tlpdb for
> 
> The details="" and other such strings come from the TeX Catalogue. The
> TL manual is not on CTAN, hence not in the Catalogue, hence no extra
> strings.
> 
> And, to be honest, the descriptions seem entirely redundant to me (no
> more information than is already in the filename), so I'm not enthused
> about setting up a new mechanism to add them. Calling them "metadata"
> seems rather too grandiose.
> 
> Anyway, I know texdoc prefers results with such "metadata", but I
> think/hope any resulting issues could/should be resolved in the
> software. --best, karl.


From karl at freefriends.org  Sun Dec 15 00:09:51 2019
From: karl at freefriends.org (Karl Berry)
Date: Sat, 14 Dec 2019 16:09:51 -0700
Subject: mptopdf output file not numbered.
In-Reply-To: <8b0e7217-18f3-91e4-0754-9bc3bea038fc@freenet.de>
Message-ID: <201912142309.xBEN9paX018728@freefriends.org>

Andreas, do you understand what the purported patch is supposed to be
improving?

If I create a file two.dot.mp with two characters in it, your version
creates output files which have the "two" trimmed off:
  two.dot is converted to dot-0.pdf + dot-1.pdf

whereas the existing mptopdf.pl (the one now in
texmf-dist/scripts/context/perl/mptopdf.pl and that was distributed in
TL19, etc.), does it correctly:
  two.dot is converted to two.dot-0.pdf + two.dot-1.pdf

So that is not a win.

That script sure tri
Meanwhile, as far as your r53115 commit goes:

    trunk/Build/source/texk/texlive/linked_scripts/context/perl/mptopdf.pl

Everything under linked_scripts/ is intended to be slave copies of the
corresponding files in texmf-dist, mostly under
texmf-dist/scripts. (Also, mptopdf.pl in particular is in turn intended
to be a slave copy of the original in ConTeXt.)  I've copied it over, again.

Best,
Karl

-------------- next part --------------
A non-text attachment was scrubbed...
Name: two.dot.mp
Type: application/octet-stream
Size: 91 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191214/c009bde3/attachment.obj>

From andreas_tex at freenet.de  Sun Dec 15 12:01:28 2019
From: andreas_tex at freenet.de (Andreas Scherer)
Date: Sun, 15 Dec 2019 12:01:28 +0100
Subject: mptopdf output file not numbered.
In-Reply-To: <201912142309.xBEN9paX018728@freefriends.org>
References: <201912142309.xBEN9paX018728@freefriends.org>
Message-ID: <d6b4759c-e69f-4dfe-b668-ef1aac7e7b24@freenet.de>

Hello, Karl,

> Andreas, do you understand what the purported patch is supposed to be
> improving?

I _guess_ the patch wants to avoid "unnecessary" rename operations for
non-default MP output (with numeric extensions). It would be interesting
to see the accompanying message for "this patch ... via debian" as of
commit @50118 of 24 Feb 2019 (and @52258 of 02 Oct 2019).

> If I create a file two.dot.mp with two characters in it, your version
> creates output files which have the "two" trimmed off:
>   two.dot is converted to dot-0.pdf + dot-1.pdf

Yes, my pattern to disect the $base and the $suffix didn't account for
that. Fixed in the new version attached below.

Playing some more with 'mptopdf.pl', I think I have found a bug in the
_original_ version (of 01 Jun 2010 @18674, 25 Feb 2019 @50131, the
recent 14 Dec 2019 @53132, and TL 2019):

If I follow the example in the MetaPost manual
(www.tug.org/docs/metapost/mpman.pdf) and add the initial line

   outputtemplate := "%j-%c.mps";

to create *.mps files in the first place, the 'original' mptopdf[.pl]
fails with the error message

   MPtoPDF 1.4.1 : no filename matches example

because '@files' missed the dashed filenames from the mpost run. The new
version eliminates the dot in 'glob "$pattern*"'.

> (Also, mptopdf.pl in particular is in turn intended
> to be a slave copy of the original in ConTeXt.)  I've copied it over, again.

Sorry, I wasn't aware of the upstream dependency. If you like, you can
submit my second 'mptopdf.pl' to the Context team for consideration.

Best,
Andreas
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mptopdf.pl
Type: text/x-perl
Size: 4254 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191215/f69b3786/attachment.bin>

From andreas_tex at freenet.de  Sun Dec 15 17:21:40 2019
From: andreas_tex at freenet.de (Andreas Scherer)
Date: Sun, 15 Dec 2019 17:21:40 +0100
Subject: mptopdf output file not numbered.
In-Reply-To: <d6b4759c-e69f-4dfe-b668-ef1aac7e7b24@freenet.de>
References: <201912142309.xBEN9paX018728@freefriends.org>
 <d6b4759c-e69f-4dfe-b668-ef1aac7e7b24@freenet.de>
Message-ID: <a5b65d4e-a1ac-0737-a5e3-9983a9cd9bd4@freenet.de>

> Sorry, I wasn't aware of the upstream dependency.
If 'upstream' is represented by 'source.contextgarden.net', then it
appears that

https://source.contextgarden.net/scripts/context/perl/mptopdf.pl

also has the debian-patched contents (apart from the curious formatting
of single quote characters).

Andreas

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <https://tug.org/pipermail/tex-live/attachments/20191215/b15c4491/attachment.sig>

From kakuto at w32tex.org  Sun Dec 15 22:57:34 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Mon, 16 Dec 2019 06:57:34 +0900
Subject: mptopdf output file not numbered.
In-Reply-To: <a5b65d4e-a1ac-0737-a5e3-9983a9cd9bd4@freenet.de>
References: <201912142309.xBEN9paX018728@freefriends.org>
 <d6b4759c-e69f-4dfe-b668-ef1aac7e7b24@freenet.de>
 <a5b65d4e-a1ac-0737-a5e3-9983a9cd9bd4@freenet.de>
Message-ID: <A61737BA71484E1EAB70F11069B28F3F@CJ3001517A>

Dear Andreas,

> If 'upstream' is represented by 'source.contextgarden.net', then it
> appears that
>
> https://source.contextgarden.net/scripts/context/perl/mptopdf.pl
>
> also has the debian-patched contents (apart from the curious formatting
> of single quote characters).

Hans didn't notice the patch.
He promised to revert to the unpatched one in the next beta.

Best,
Akira


From karl at freefriends.org  Mon Dec 16 00:45:17 2019
From: karl at freefriends.org (Karl Berry)
Date: Sun, 15 Dec 2019 16:45:17 -0700
Subject: mptopdf output file not numbered.
In-Reply-To: <d6b4759c-e69f-4dfe-b668-ef1aac7e7b24@freenet.de>
Message-ID: <201912152345.xBFNjHVo003685@freefriends.org>

Hi Andreas,

    I _guess_ the patch wants to avoid "unnecessary" rename operations 

That useless optimization has wasted a lot of people's time.
Can we please stop it now?

    bug in the _original_ version

I agree that the current ("standard") mptopdf does not support the
recommended outputtemplate, as you say:

   outputtemplate := "%j-%c.mps";
   ...
   MPtoPDF 1.4.1 : no filename matches example

Your newest version works with that particular case. So that's good.
Unfortunately (unrelated to outputtemplate), it can output to files
other than the actual root name, depending on what exists in the cwd:

echo 'beginfig(0); draw (0,0) -- (1,1); endfig; end.' >hello.mp
echo 'beginfig(0); draw (0,0) -- (1,1); endfig; end.' >hello2.mp
./mptopdf.pl hello2.mp # your mptopdf; runs ok
./mptopdf.pl hello.mp
..
MPtoPDF 1.4.1 : hello is converted to hello-0.pdf + hello2-0.pdf

I ran it on hello.mp, but it also made the (unrelated) hello2-0.pdf.
The original mptopdf does not do this.

I don't doubt that it's possible to make the original mptopdf fail too,
but I don't want to spend any more time testing things that I'm not
responsible for.  Anyway, clearly the original version does the job it
needs to do, since there were no complaints until it was
"improved". --best, karl.

From michiel.kreutzer at me.com  Mon Dec 16 11:16:25 2019
From: michiel.kreutzer at me.com (Michiel Kreutzer)
Date: Mon, 16 Dec 2019 11:16:25 +0100
Subject: update noto package texlive - tar argument list too long
Message-ID: <F045A4AC-FDE1-4F4E-AC24-209B1D5E5431@me.com>

I am trying to update my texlive installation, which fails at the package noto. It bails on a tar with an argument list of 2.900.000 characters, almost. I tried using gnutar, bsdtar, no luck. This is on a mac running latest MacOS and latest MacTeX installation. 

Any ideas how to get around this? Removing noto crashes on the same problem (no trying to tar it all into a backup). 

thanks Michiel  

>From the log: 

2019-12-14 15:09:48 +0000 Warning tlu_ipctask[6985]	Can't exec "tar": Argument list too long at /usr/local/texlive/2019/tlpkg/TeXLive/TLUtils.pm line 613.
2019-12-14 15:09:48 +0000 Warning tlu_ipctask[6985]	/Library/TeX/texbin/tlmgr: system(tar -cf /usr/local/texlive/2019/tlpkg/backups/noto.r51202.r51202.tar texmf-dist/doc/fonts/noto texmf-dist/fonts/enc/dvips/noto/nto_2banio.enc texmf-dist/fonts/enc/dvips/noto/nto_34ragx.enc  [?.] texmf-dist/tex/latex/noto/noto-serif.sty texmf-dist/tex/latex/noto/noto.sty tlpkg/tlpobj/noto.tlpobj) failed in /usr/local/texlive/2019, status -1 at /usr/local/texlive/2019/tlpkg/TeXLive/TLUtils.pm line 617.

From karl at freefriends.org  Tue Dec 17 00:01:43 2019
From: karl at freefriends.org (Karl Berry)
Date: Mon, 16 Dec 2019 16:01:43 -0700
Subject: update noto package texlive - tar argument list too long
In-Reply-To: <F045A4AC-FDE1-4F4E-AC24-209B1D5E5431@me.com>
Message-ID: <201912162301.xBGN1h57021246@freefriends.org>

    It bails on a tar with an argument list of 2.900.000 characters

The limit on my CentOS system is reported to be even less, yet I did not
get an error. Strange.

$ xargs --show-limits
..
POSIX upper limit on argument length (this system): 2083759
..
Maximum length of command we could actually use: 2072414

(That command won't work except with GNU xargs. I don't know how to
discover limits on MacOSX, or indeed if the limits above are "really"
correct.)

    tried using gnutar, bsdtar, no luck
    ...
    Can't exec "tar": Argument list too long at
    /usr/local/texlive/2019/tlpkg/TeXLive/TLUtils.pm line 613.

Iny case, I believe it is a limitation compiled into the kernel.  The
tar program is not even getting executed, so changing it makes no
difference.

Our code in TLPOBJ.pm:make_container (line 695ff.) tries to "collapse"
the long list of files into their containing directories, precisely to
get around this problem. It seems the collapsing did not work on your
system (while it does for everyone else?), but this is not a simple
thing to debug :(.

What's the result of
ls -a /usr/local/texlive/2019/texmf-dist/tex/latex/noto/
?

Did the log file actually show the entire cmdline, or was it ellipsized
as in your mail? If it showed the whole cmdline, please send it to me
(off list). There's a reason why we dump it on error :).

    Any ideas how to get around this? Removing noto crashes on the same
    problem (no trying to tar it all into a backup).

You could try disabling backups temporarily. Untested, but I think like this:
  tlmgr option autobackup 0
  tlmgr update noto
  tlmgr option autobackup 1
and see if that gets any further. --best, karl.

From andreas_tex at freenet.de  Tue Dec 17 07:58:51 2019
From: andreas_tex at freenet.de (Andreas Scherer)
Date: Tue, 17 Dec 2019 07:58:51 +0100
Subject: update noto package texlive - tar argument list too long
Message-ID: <1e608ed9-584d-abbb-eb33-6e3b30d5f71a@freenet.de>

Without having looked at the code in TLUtils.pm, a few keywords in your
discussion remind me of a similar problem in "debbuild", which in the
end I fixed with a double-ended pipe:

https://github.com/ascherer/debbuild/blob/master/debbuild#L1689

Best,
Andreas

From preining at logic.at  Wed Dec 18 04:47:59 2019
From: preining at logic.at (Norbert Preining)
Date: Wed, 18 Dec 2019 12:47:59 +0900
Subject: update noto package texlive - tar argument list too long
In-Reply-To: <1e608ed9-584d-abbb-eb33-6e3b30d5f71a@freenet.de>
References: <1e608ed9-584d-abbb-eb33-6e3b30d5f71a@freenet.de>
Message-ID: <20191218034759.npgakeexkqfj3nwg@burischnitzel.preining.info>

On Tue, 17 Dec 2019, Andreas Scherer wrote:
> end I fixed with a double-ended pipe:

Sounds scary, and even more, very untrustworthy when trying to be run on
Windows ;-) I try to avoid thread/pipes/waitpid etc as implementation
support on different arch/os is not fully available.

But yes, that would have been a good approach if we would only target
Linux.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From victorkong94 at gmail.com  Thu Dec 19 10:02:23 2019
From: victorkong94 at gmail.com (Victor Kong)
Date: Thu, 19 Dec 2019 01:02:23 -0800
Subject: `tlmgr` Treating Commas in Path as Semicolons
Message-ID: <CABFCaws6qKvKSN1MJmFZ-aOOPkWEGRFhQ5hin8sW2T+ATvPv=w@mail.gmail.com>

Hi TexLive mailing list,

I've found that the tlmgr commands seem to interpret commas in the path
name to be semicolons. For example, if my TeX distribution is located in
"C:/Users/victor/OneDrive/User, Standard - Shiny App/dist/TinyTeX/",
running tlmgr search kpathsea will error out with the following message:

warning: kpathsea: configuration file texmf.cnf not found in these
directories: C:/Users/victor/OneDrive/User; Standard - Shiny
App/dist/TinyTeX/bin/win32;C:/Users/victor/OneDrive/User; Standard - Shiny
App/dist/TinyTeX/bin/win32/share/texmf-local/web2c;C:/Users/victor/OneDrive/User;
Standard - Shiny
App/dist/TinyTeX/bin/win32/share/texmf-dist/web2c;C:/Users/victor/OneDrive/User;
Standard - Shiny
App/dist/TinyTeX/bin/win32/share/texmf/web2c;C:/Users/victor/OneDrive/User;
Standard - Shiny
App/dist/TinyTeX/bin/win32/texmf-local/web2c;C:/Users/victor/OneDrive/User;
Standard - Shiny
App/dist/TinyTeX/bin/win32/texmf-dist/web2c;C:/Users/victor/OneDrive/User;
Standard - Shiny
App/dist/TinyTeX/bin/win32/texmf/web2c;C:/Users/victor/OneDrive/User;
Standard - Shiny App/dist/TinyTeX/bin;C:/Users/victor/OneDrive/User;
Standard - Shiny
App/dist/TinyTeX/bin/share/texmf-local/web2c;C:/Users/victor/OneDrive/User;
Standard - Shiny
App/dist/TinyTeX/bin/share/texmf-dist/web2c;C:/Users/victor/OneDrive/User;
Standard - Shiny
App/dist/TinyTeX/bin/share/texmf/web2c;C:/Users/victor/OneDrive/User;
Standard - Shiny
App/dist/TinyTeX/bin/texmf-local/web2c;C:/Users/victor/OneDrive/User;
Standard - Shiny
App/dist/TinyTeX/bin/texmf-dist/web2c;C:/Users/victor/OneDrive/User;
Standard - Shiny
App/dist/TinyTeX/bin/texmf/web2c;C:/Users/victor/OneDrive/User; Standard -
Shiny App/dist/texmf-local/web2c;C:/Users/victor/OneDrive/User; Standard -
Shiny App/dist/TinyTeX;C:/Users/victor/OneDrive/User; Standard - Shiny
App/dist/TinyTeX/share/texmf-local/web2c;C:/Users/victor/OneDrive/User;
Standard - Shiny
App/dist/TinyTeX/share/texmf-dist/web2c;C:/Users/victor/OneDrive/User;
Standard - Shiny
App/dist/TinyTeX/share/texmf/web2c;C:/Users/victor/OneDrive/User; Standard
- Shiny App/dist/TinyTeX/texmf-local/web2c;C:/Users/victor/OneDrive/User;
Standard - Shiny
App/dist/TinyTeX/texmf-dist/web2c;C:/Users/victor/OneDrive/User; Standard -
Shiny App/dist/TinyTeX/texmf/web2c.

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191219/72c4176a/attachment.html>

From karl at freefriends.org  Sat Dec 21 00:18:20 2019
From: karl at freefriends.org (Karl Berry)
Date: Fri, 20 Dec 2019 16:18:20 -0700
Subject: `tlmgr` Treating Commas in Path as Semicolons
In-Reply-To: <CABFCaws6qKvKSN1MJmFZ-aOOPkWEGRFhQ5hin8sW2T+ATvPv=w@mail.gmail.com>
Message-ID: <201912202318.xBKNIKhU011094@freefriends.org>

Hi Victor,

    tlmgr commands seem to interpret commas 

Thanks for the report. Unfortunately, as far as I can tell, we cannot
feasibly support commas (among other characters, such as braces,
semicolons, dollar signs) in the installation directory name. Sorry.
I plan to change the installer to warn about this.

Details: it's not tlmgr per se, but rather kpathsea. It's
because the basic definition of the list of texmf trees to search, the
variable TEXMF, uses brace expansion, as in (just an example):
  TEXMF = {...,$SELFAUTOPARENT/texmf-dist,...}

Where $SELFAUTOPARENT is based on the location of the binaries.
In your case, that means: C:/Users/.../User, Standard...

So when that gets expanded, the comma in your installation directory
looks like it is separating path elements.  I see no good way to discern
that the comma is intended to be part of the dir name.  It all looks the
same to the expansion code. I can imagine some heuristics, but I fear
they would end up causing more problems than solutions. In any case, it
would be a lot of work to even make the attempt, so I don't much want to
try. Sorry.

Maybe someone else will have an idea (or a patch). --best, karl.

From bricklroland at yahoo.de  Sun Dec 22 06:45:49 2019
From: bricklroland at yahoo.de (Roland Brickl)
Date: Sun, 22 Dec 2019 06:45:49 +0100
Subject: Windows 7/8.1 missing curl [ctanbib]
References: <b2019351-a889-68f5-9166-9452231a17c2.ref@yahoo.de>
Message-ID: <b2019351-a889-68f5-9166-9452231a17c2@yahoo.de>

Hello,

from the changelog of package ctanbib:

>2019-05-04  Use the curlcommand to download the package info
 >2019-05-04 Added information about the need to have thecurlcommand 
in-stalled

Even when curl is included on newer [1] Windows 10 builds, it's not for 
Windows 7 and 8.1.

I used the current offical version from [2] of curl.
Not so important, but with

 >ctanbib -v
 >ctanbib version 0.1d
 >C:\texlive\2019\bin\win32\runscript.tlu:911: command failed with exit 
code 1:
 >texlua c:\texlive\2019\texmf-dist\scripts\ctanbib\ctanbib -v

This error also occurs with the switch -h, for help, without a package name.

Regards,
Roland

[1] https://devblogs.microsoft.com/commandline/tar-and-curl-come-to-windows/
[2] https://curl.haxx.se/windows/

From norbert at preining.info  Mon Dec 23 01:32:50 2019
From: norbert at preining.info (Norbert Preining)
Date: Mon, 23 Dec 2019 09:32:50 +0900
Subject: fourier: problem with font lookup
Message-ID: <20191223003250.2vuvvdil2nbut6k4@burischnitzel.preining.info>

Hi Michel,

Norbert from the TeX Live project here.

Thanks for your work on the Fourier fonts. I would like to report a
problem that appears with the current setup: The file
	fourier-orns.sty
uses fontconfig lookup to find the fonts:
        \newfontfamily\FourierOrns{FourierOrns}
which means that the font is only searched via fontconfig and **not**
via kpathsea.

But on most systems, the fonts in the various TeX directories are
**not** searched for system fonts and they need to be activated
manually.

I think it would be better to search the fonts via kpathsea/filename
lookup, by changing the above line to

  \newfontfamily\FourierOrns{FourierOrns-Regular.otf}[
    BoldFont   = FourierOrns-Bold.otf ,
    ItalicFont = FourierOrns-Italic.otf ,
    BoldItalicFont = FourierOrns-BoldItalic.otf ]

Thanks a lot for considering

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From michel.bovani at icloud.com  Mon Dec 23 17:01:06 2019
From: michel.bovani at icloud.com (Michel Bovani)
Date: Mon, 23 Dec 2019 17:01:06 +0100
Subject: fourier: problem with font lookup
In-Reply-To: <20191223003250.2vuvvdil2nbut6k4@burischnitzel.preining.info>
References: <20191223003250.2vuvvdil2nbut6k4@burischnitzel.preining.info>
Message-ID: <187E2988-4582-494A-A179-2299C4432EF9@icloud.com>


> Le 23 d?c. 2019 ? 01:32, Norbert Preining <norbert at preining.info> a ?crit :
> 
> Hi Michel,
> 
> Norbert from the TeX Live project here.
> 
> Thanks for your work on the Fourier fonts. I would like to report a
> problem that appears with the current setup: The file
> 	fourier-orns.sty
> uses fontconfig lookup to find the fonts:
>        \newfontfamily\FourierOrns{FourierOrns}
> which means that the font is only searched via fontconfig and **not**
> via kpathsea.
> 
> But on most systems, the fonts in the various TeX directories are
> **not** searched for system fonts and they need to be activated
> manually.
> 
> I think it would be better to search the fonts via kpathsea/filename
> lookup, by changing the above line to
> 
>  \newfontfamily\FourierOrns{FourierOrns-Regular.otf}[
>    BoldFont   = FourierOrns-Bold.otf ,
>    ItalicFont = FourierOrns-Italic.otf ,
>    BoldItalicFont = FourierOrns-BoldItalic.otf ]
> 
> Thanks a lot for considering

Hi Norbert,

You are right and I already had a report from Marcel Kr?ger.

It will be fixed for the next Fourier release (January, I hope).

Best regards


-- 
Michel Bovani
Michel.Bovani at icloud.com
https://paroles.mathriochka.net



From amaxwell at mac.com  Mon Dec 23 19:43:32 2019
From: amaxwell at mac.com (Adam R. Maxwell)
Date: Mon, 23 Dec 2019 10:43:32 -0800
Subject: tar argument list too long
Message-ID: <361F85CC-06CE-4268-8D58-EB1836790284@mac.com>

A user has reported that a tlmgr update failed with a tar error of argument list too long. Posted here, as a screenshot of the log text.

https://github.com/amaxwell/tlutility/issues/79

I can?t try it myself, as my only internet access is through my phone at the moment.

Thanks,
Adam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191223/bba823c1/attachment.html>

From herbs at wideopenwest.com  Mon Dec 23 20:05:05 2019
From: herbs at wideopenwest.com (Herbert Schulz)
Date: Mon, 23 Dec 2019 13:05:05 -0600
Subject: tar argument list too long
In-Reply-To: <361F85CC-06CE-4268-8D58-EB1836790284@mac.com>
References: <361F85CC-06CE-4268-8D58-EB1836790284@mac.com>
Message-ID: <1A4B10D3-1BC7-4588-8221-ADEB541898AB@wideopenwest.com>



> On Dec 23, 2019, at 12:43 PM, Adam R. Maxwell via tex-live <tex-live at tug.org> wrote:
> 
> A user has reported that a tlmgr update failed with a tar error of argument list too long. Posted here, as a screenshot of the log text.
> 
> https://github.com/amaxwell/tlutility/issues/79
> 
> I can?t try it myself, as my only internet access is through my phone at the moment.
> 
> Thanks,
> Adam

Howdy,

I didn't mention before but I didn't run into the problem when updating the noto font using tlmgr via TeX Live Utility.

Good Luck,

Herb Schulz
(herbs at wideopenwest dot com)



From karl at freefriends.org  Mon Dec 23 22:05:11 2019
From: karl at freefriends.org (Karl Berry)
Date: Mon, 23 Dec 2019 14:05:11 -0700
Subject: tar argument list too long
In-Reply-To: <361F85CC-06CE-4268-8D58-EB1836790284@mac.com>
Message-ID: <201912232105.xBNL5Bh2002999@freefriends.org>

    https://github.com/amaxwell/tlutility/issues/79

Norbert and I have been corresponding with the first person to report
the problem, Michiel Kreutzer, although lately off-list.
(My first reply: https://tug.org/pipermail/tex-live/2019-December/044583.html)

Anyway, our best guess is that there are files left over in the noto
font directories from a previous update which are preventing the
"collapsing" of tons of files into a single directory on the tar
cmdline. (This is not entirely surprising given the number of files in
the noto package. I wish the .enc names were not constantly
churned. Anyway.)

Norbert had an idea for a manual workaround. First do:
   tlmgr remove --force noto

then check the directories under discussion:
   texmf-dist/doc/fonts/noto
   texmf-dist/fonts/enc/dvips/noto
   texmf-dist/fonts/map/dvips/noto
   texmf-dist/fonts/tfm/google/noto
   texmf-dist/fonts/truetype/google/noto
   texmf-dist/fonts/type1/google/noto
   texmf-dist/fonts/vf/google/noto
   texmf-dist/tex/latex/noto

Presuming there are stray files remaining in any of them, rm -rf the
dirs (by hand), and then do:
   tlmgr install noto

If in fact the tlmgr remove cleans out all those directories completely,
then something else is going wrong and we'll have to debug further.
--hope it flies, karl.

From amaxwell at mac.com  Tue Dec 24 06:40:04 2019
From: amaxwell at mac.com (Adam R. Maxwell)
Date: Mon, 23 Dec 2019 21:40:04 -0800
Subject: tar argument list too long
In-Reply-To: <201912232105.xBNL5Bh2002999@freefriends.org>
References: <201912232105.xBNL5Bh2002999@freefriends.org>
Message-ID: <6B061A68-7A9E-4052-BF9B-98DEE98EB4F8@mac.com>



> On Dec 23, 2019, at 13:05 , Karl Berry <karl at freefriends.org> wrote:
> 
> Norbert and I have been corresponding with the first person to report
> the problem, Michiel Kreutzer, although lately off-list.

Sorry! I now remember seeing that, but I skipped over it as
"whew, not my problem." I've posted a link to your message
for the user, so we'll see how it goes.

thanks,
Adam

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191223/dc056d52/attachment.html>

From sergio.callegari at gmail.com  Tue Dec 24 15:53:23 2019
From: sergio.callegari at gmail.com (Sergio Callegari)
Date: Tue, 24 Dec 2019 15:53:23 +0100
Subject: Luahblatex coming and going
Message-ID: <2bc1cc24-ca0d-a1b0-e774-bc55a641c300@gmail.com>

Hi,

I have noticed that recently luahblatex has been coming and going on my system, 
as tlmgr was installing newer versions of some packages (probably luahbtex and 
the scripts).? Currently, I can not find it, a few days ago it was OK.? The same 
is happining with luajittex and luajitlatex. Is the building of the latex format 
with luahbtex and luajittex expected to happen on TL 2019?

Thanks and best regards,

Sergio





From sergio.callegari at gmail.com  Tue Dec 24 16:00:27 2019
From: sergio.callegari at gmail.com (Sergio Callegari)
Date: Tue, 24 Dec 2019 16:00:27 +0100
Subject: List of changes before updating
Message-ID: <d3a4c538-c3b5-5241-51ba-dfd9270a8654@gmail.com>

Hi,

I would like to ask if there is a way to get a changelog for packages for which 
updates exist.

- I have noticed that the ctan annoucements rss include a short changelog, but I 
cannot see if tlmrg is able to deliver it;

- I have also noticed that for some packages (e.g. some fonts or luatex), 
texlive updates may happen with the packages themselves staying at the same 
version, which I guess is the result of an update in the packaging, rather than 
an update in the inner packages. For these packages it would be particularly 
useful to know from tlmgr what is going to change with the update, since looking 
at the package sources often provides no hint.

If there is currently no way to get changelogs, may I suggest a tlmgr update 
<xxx> --changelog, not doing any actual update, but showing a short changelog 
for the package?

Best,

Sergio


From d.p.carlisle at gmail.com  Tue Dec 24 17:36:03 2019
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Tue, 24 Dec 2019 16:36:03 +0000
Subject: Luahblatex coming and going
In-Reply-To: <2bc1cc24-ca0d-a1b0-e774-bc55a641c300@gmail.com>
References: <2bc1cc24-ca0d-a1b0-e774-bc55a641c300@gmail.com>
Message-ID: <CAEW6iOhMgqbLDRG3TWkX5yp=MLbcJAS75p_BELRgBggpudGGyg@mail.gmail.com>

there is no luahblatex as from texlive2020 lualatex will use luahbtex
as the underlying engine. You can use it now as lualatex-dev  in
texlive 2019.

David

On Tue, 24 Dec 2019 at 14:54, Sergio Callegari
<sergio.callegari at gmail.com> wrote:
>
> Hi,
>
> I have noticed that recently luahblatex has been coming and going on my system,
> as tlmgr was installing newer versions of some packages (probably luahbtex and
> the scripts).  Currently, I can not find it, a few days ago it was OK.  The same
> is happining with luajittex and luajitlatex. Is the building of the latex format
> with luahbtex and luajittex expected to happen on TL 2019?
>
> Thanks and best regards,
>
> Sergio
>
>
>
>

From karl at freefriends.org  Tue Dec 24 23:32:34 2019
From: karl at freefriends.org (Karl Berry)
Date: Tue, 24 Dec 2019 15:32:34 -0700
Subject: List of changes before updating
In-Reply-To: <d3a4c538-c3b5-5241-51ba-dfd9270a8654@gmail.com>
Message-ID: <201912242232.xBOMWY7N015737@freefriends.org>

    If there is currently no way to get changelogs, may I suggest a
    tlmgr update <xxx> --changelog, not doing any actual update, but
    showing a short changelog for the package?

It would be nice, but as far as I can see it's not possible. We can't
create information out of nothing.  All TL and CTAN can do is pass along
what authors provide. And even when change information is available
(rare), there is no way to guess where it might be in order to display it.

I don't think an interface from tlmgr to CTAN announcements is worth the
effort; people can just read the announcements directly. And many
(normal package) updates do not have announcements.

As for TL packaging-only updates, I guess in theory we could extract log
messages out of the repository for the relevant directories and make
them available somehow, but I confess that this sounds like a lot of
work for not much return. The messages are not going to be very
informative.

What I can imagine is an option to diff the package as installed against
the new package on the server, and leave it up to the user to pick out
the interesting pieces. I suspect in most cases the diffs would be so
voluminous that it would be more painful than useful, but it could be
worth a try.

So, one first step would be to write a separate utility that simply
diffs two packages -- that is, tar archives -- and tries to figure out
what's interesting to display. If it turns out to be feasible and
useful, it could be integrated into tlmgr in due time.

Such a thing could also be useful for showing the difference between the
version currently installed and the previous version (if backups aren't
turned off). --best regards, karl.

From norbert at preining.info  Wed Dec 25 03:09:23 2019
From: norbert at preining.info (Norbert Preining)
Date: Wed, 25 Dec 2019 11:09:23 +0900
Subject: fourier: problem with font lookup
In-Reply-To: <187E2988-4582-494A-A179-2299C4432EF9@icloud.com>
References: <20191223003250.2vuvvdil2nbut6k4@burischnitzel.preining.info>
 <187E2988-4582-494A-A179-2299C4432EF9@icloud.com>
Message-ID: <20191225020923.3afttqvb4cnntk4u@bulldog.preining.info>

On Mon, 23 Dec 2019, TeX Live Mailing List wrote:
> It will be fixed for the next Fourier release (January, I hope).

Thanks a lot!

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From dbitouze at wanadoo.fr  Thu Dec 26 21:51:37 2019
From: dbitouze at wanadoo.fr (=?utf-8?Q?Denis_Bitouz=C3=A9?=)
Date: Thu, 26 Dec 2019 21:51:37 +0100
Subject: List of changes before updating
References: <d3a4c538-c3b5-5241-51ba-dfd9270a8654@gmail.com>
Message-ID: <87k16ikdye.fsf@example.com>

Le 24/12/19 ? 16h00, Sergio Callegari a ?crit :

> I would like to ask if there is a way to get a changelog for packages
> for which updates exist.

For this, I usually have a look at:

  ?????
  ? https://www.tug.org/svn/texlive/trunk/Master/
  ?????
-- 
Denis


From simon at heisterkamp.dk  Fri Dec 27 21:35:24 2019
From: simon at heisterkamp.dk (Simon Heisterkamp)
Date: Fri, 27 Dec 2019 21:35:24 +0100
Subject: Suggested feature: Portable document archive
Message-ID: <CAEHpzAyWiSOTD6yxP9paLS9UUqJJhAJwTNzseuWnzqAgL4Yt6g@mail.gmail.com>

Hi all,
I'm new here. Please excuse any breach of etiquette.

I'm the author of the MikteX feature suggestion 424:
https://github.com/MiKTeX/miktex/issues/424
reproduced below in full for your convenience. My proposal is to do the
same for texlive and I would like a discussion about how people would feel
about such a feature. I am open to contributing to the effort but would
likely need substantial support from experience developers of tex-live.

Thoughts, comments?

Best wishes and happy holidays,
Simon


Full text of MikteX feature suggestion 424:

The MS Word .docx format is actually a zip archive with xml files and
folders for resources such as pictures. The idea here is to do the same for
.tex sources.
Call the archive something like .pta (portable Tex archive), and support
creating, opening editing and typesetting this file directly from MikTeX
(and tex-live).

Proposed properties:

   - a zip archive with all sources necessary to typeset a TeX document.
   - renamed to something other than .zip to discourage non-technical users
   from editing directly. Suggestion: .pta
   - MikTeX (and tex-live) support for working with this file directly.
   (like MS Word works with .docx archives) In particular guarantee that the
   archive can always be typeset again after moving and copying to another
   installation of MikTeX (and tex-live).
   - Use a somewhat strict structure for names and locations inside the
   archive. This will simplify development of the feature. Unsupported uses
   can always fall back to ordinary .tex source files.
   - a ?make-file? (inside the archive) for standardized typesetting with
   one click - no setup required at all by users who only want to make minor
   changes to a document.
   - archive can contain non-standard dependencies, i.e. packages,
   pictures, styles.
   - archive can contain the typeset pdf document. Costs extra size file,
   but gains accessibility. This makes it very easy to write ?viewer?
   applications for every conceivable system out there - they simply pull the
   pdf out of the archive.

Use cases:

   - non-technical persons are comfortable with a document being one file.
   - file can be copied and moved around while maintaining a guarantee that
   it can be typeset when needed.
   - this could greatly assist in spreading the use of latex outside of
   technical academic fields.

Aspects that need more thought:

   - when editing creates typesetting errors, the archive could maintain a
   "last successfully typeset" pdf for the viewers, alternatively it could
   present a "corrupted" pdf file. Another approach could be to forbid saving
   to the archive format if the document cannot be typeset.

Feel free to use and share this idea however you want. I don?t have the
time to develop this myself, but would love to use the feature at the
engineering company where I work.

Best regards,
Simon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191227/e3490c1f/attachment.html>

From jhielscher at posteo.de  Sun Dec 29 01:50:02 2019
From: jhielscher at posteo.de (Johannes Hielscher)
Date: Sun, 29 Dec 2019 01:50:02 +0100
Subject: Suggested feature: Portable document archive
In-Reply-To: <CAEHpzAyWiSOTD6yxP9paLS9UUqJJhAJwTNzseuWnzqAgL4Yt6g@mail.gmail.com>
References: <CAEHpzAyWiSOTD6yxP9paLS9UUqJJhAJwTNzseuWnzqAgL4Yt6g@mail.gmail.com>
Message-ID: <20191229015002.29f2bb84@hordevm>

> Aspects that need more thought:

- You will lose archiveability/dedup/diff/searchability and ease of
  tracking with version control systems. This will make many grep and
  git/hg/svn/? users unhappy, and voids one of the major upsides of
  TeX against ?binary? document systems (as long as you don't want to
  introduce fancy pre-commit hook ninja stunts).


This applies as well to MikTeX, so feel free to add this aspect to
the upstream discussion!


Don't get me wrong. I'm somewhat intrigued from this idea, but don't
want to wake up some next morning to find out that I've locked out of
my own workflow.


Best,
Johannes


From simon at heisterkamp.dk  Sun Dec 29 02:12:13 2019
From: simon at heisterkamp.dk (Simon Heisterkamp)
Date: Sun, 29 Dec 2019 02:12:13 +0100
Subject: Suggested feature: Portable document archive
In-Reply-To: <20191229015002.29f2bb84@hordevm>
References: <CAEHpzAyWiSOTD6yxP9paLS9UUqJJhAJwTNzseuWnzqAgL4Yt6g@mail.gmail.com>
 <20191229015002.29f2bb84@hordevm>
Message-ID: <CAEHpzAz4LeX+zRhEy=rv23exfVrZ_AJU+gyLsmXhda7V7S-kjQ@mail.gmail.com>

That is a fair point. I have the following to offer:
- Unfortunately not everyone uses version control. Especially the proposed
target audience for this feature, is unlikely to be comfortable with
text-based tools like that. For those of us that do use version control, I
propose the following:
- The archive that I described as zipped could just as well be an unpacked
folder while maintaining all the features I described. In fact it could be
up to the user to pack/unpack the document in a "Save As" dialogue.
This now opens up the ability to version-control the sources while also
having the ability to "pack and share". Mac OSX ".app" applications are an
example of how this could be done. Most people think of them as files,
when in fact they are folders.

I have had no feedback on the MikTeX issue tracker so far. The issue that
you brought up and the solution that I proposed above are a perfect example
of how this idea needs some constructive dialogue before even getting into
an implementation phase, so thank you for engaging with the idea. Once we
have a more cohesive picture of how the feature could look I will update
the MikTeX issue tracker.

Best,
Simon


On Sun, 29 Dec 2019 at 01:50, Johannes Hielscher <jhielscher at posteo.de>
wrote:

> > Aspects that need more thought:
>
> - You will lose archiveability/dedup/diff/searchability and ease of
>   tracking with version control systems. This will make many grep and
>   git/hg/svn/? users unhappy, and voids one of the major upsides of
>   TeX against ?binary? document systems (as long as you don't want to
>   introduce fancy pre-commit hook ninja stunts).
>
>
> This applies as well to MikTeX, so feel free to add this aspect to
> the upstream discussion!
>
>
> Don't get me wrong. I'm somewhat intrigued from this idea, but don't
> want to wake up some next morning to find out that I've locked out of
> my own workflow.
>
>
> Best,
> Johannes
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191229/153a1284/attachment.html>

From mojca.miklavec.lists at gmail.com  Sun Dec 29 09:25:36 2019
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sun, 29 Dec 2019 09:25:36 +0100
Subject: Suggested feature: Portable document archive
In-Reply-To: <CAEHpzAyWiSOTD6yxP9paLS9UUqJJhAJwTNzseuWnzqAgL4Yt6g@mail.gmail.com>
References: <CAEHpzAyWiSOTD6yxP9paLS9UUqJJhAJwTNzseuWnzqAgL4Yt6g@mail.gmail.com>
Message-ID: <CALBOmsaLH3fxJA53JzGN6o6UXmti7=TBsT9KMdHLEDiMRjihAg@mail.gmail.com>

Dear Simon,

On Sat, 28 Dec 2019 at 21:29, Simon Heisterkamp wrote:
>
> I'm the author of the MikteX feature suggestion 424: https://github.com/MiKTeX/miktex/issues/424
...
> I am open to contributing to the effort but would likely need substantial support from experience developers of tex-live.
...
> The MS Word .docx format is actually a zip archive with xml files and folders for resources such as pictures. The idea here is to do the same for .tex sources.
> Call the archive something like .pta (portable Tex archive), and support creating, opening editing and typesetting this file directly from MikTeX (and tex-live).

My guess is that this could be much easier to write if you only target
a single engine (I have LuaTeX in mind, including any of its recent
variants) than if you need to support the gazillion of other programs
(some of which have been barely touched or changed since the
eighties).

LuaTeX already has a built-in support for zip files, and ConTeXt
already supports providing a single zip with the full TEXMF tree with
resource files as an alternative to having the standard extracted
installation, so I could imagine that supporting something like
"context document.pta" to magically compile everything might be almost
straightforward.

But then you would need *A LOT* more work to also:
- properly port it to LaTeX
- support "all" the major viewers and text editors
- write a really nice GUI with drag-and-drop functionality to
manipulate the files (add and remove pictures & other packages)
- make sure that Overleaf etc. can import and export it
- potentially ensure that google drive / gmail know how to display the contents
to make it really useful, else it becomes just another file that users
have no idea what to do with it.

While I find the idea nice in principle (I share the concerns raised
by Johannes), this can only work if you are really willing to spend a
lot of effort yourself, and even if you get help (not impossible, but
not if you would need handholding on each step), you would still need
to figure out the huge majority yourself. This can only help users if
you really create great user experience and take care of all the
details, including platform-specific ones (like for example: having
extracted structure like something.app which "behaves like a single
file" on different operating systems and can be double-clicked to be
opened with a GUI editor).

> Proposed properties:
>
> a zip archive with all sources necessary to typeset a TeX document.
> renamed to something other than .zip to discourage non-technical users from editing directly. Suggestion: .pta
> MikTeX (and tex-live) support for working with this file directly. (like MS Word works with .docx archives) In particular guarantee that the archive can always be typeset again after moving and copying to another installation of MikTeX (and tex-live).
> Use a somewhat strict structure for names and locations inside the archive. This will simplify development of the feature. Unsupported uses can always fall back to ordinary .tex source files.
> a ?make-file? (inside the archive) for standardized typesetting with one click - no setup required at all by users who only want to make minor changes to a document.
> archive can contain non-standard dependencies, i.e. packages, pictures, styles.
> archive can contain the typeset pdf document. Costs extra size file, but gains accessibility. This makes it very easy to write ?viewer? applications for every conceivable system out there - they simply pull the pdf out of the archive.
>
> Use cases:
>
> non-technical persons are comfortable with a document being one file.
> file can be copied and moved around while maintaining a guarantee that it can be typeset when needed.

Not necessarily.
Unless you also bundle the binary and all the packages and fonts,
there is no guarantee that the document can be typeset again, at least
not necessarily in the fully reproducible way.
It may always happen that a package gets removed from TeX Live, that
fonts get renames, or that two packages start conflicting with each
other.
(I mean: it's not any worse nor any better than what you have now.)

> this could greatly assist in spreading the use of latex outside of technical academic fields.
>
> Aspects that need more thought:
>
> when editing creates typesetting errors, the archive could maintain a "last successfully typeset" pdf for the viewers, alternatively it could present a "corrupted" pdf file. Another approach could be to forbid saving to the archive format if the document cannot be typeset.
>
> Feel free to use and share this idea however you want.
> I don?t have the time to develop this myself,

That's contrary to what you said at the top?

> but would love to use the feature at the engineering company where I work.

How many man-years would the company be willing to fund to implement
such a feature?

> Best regards,
> Simon

Mojca

PS: this is not really something that concerns MikTeX or TeX Live
alone. It's something that would need to be an independent
development.


From ralphrmartin at gmail.com  Sun Dec 29 10:49:55 2019
From: ralphrmartin at gmail.com (Ralph Martin)
Date: Sun, 29 Dec 2019 09:49:55 +0000
Subject: Suggested feature: Portable document archive
In-Reply-To: <CALBOmsaLH3fxJA53JzGN6o6UXmti7=TBsT9KMdHLEDiMRjihAg@mail.gmail.com>
References: <CAEHpzAyWiSOTD6yxP9paLS9UUqJJhAJwTNzseuWnzqAgL4Yt6g@mail.gmail.com>
 <CALBOmsaLH3fxJA53JzGN6o6UXmti7=TBsT9KMdHLEDiMRjihAg@mail.gmail.com>
Message-ID: <1074C089-DE96-4D40-A217-44136C526753@gmail.com>

Simon

Way back before MacOS X (so I may not be remembering this perfectly - doubtless others will put me right in that case), there was a program called TeXtures, It stored any illustrations needed by a  .tex source file in that file's "resource fork". In some senses this was convenient (keeping stuff together), but in others it was not (getting at the pictures to edit them, for example). Ultimately, TeXtures did not make the transition to MacOS X, leaving its users with the significant headache of converting sources in its non-standard approach into more traditional separate files (which was made worse by pictures being in Apple's proprietary PICT format).

Anyway, while your proposal at first sight looks attractive for naive users, I think it could actually lead to more confusion - "Where are my pictures?" "Why can't I open them in my graphics editor?" "I just edited [the master copy of] my picture but it is still the same [in TeX]"! 

Furthermore, many users use external software to keep a master bibliography up to date. How will that be handled? If it's not in the archive, the archive is incomplete. If a snapshot (or subset) goes in the archive, it won't benefit from any corrections made to the master. Indeed, this holds true for other included files such as style files which may get corrected once in a while. This starts to go down a rabbit hole of needing smart links, where the archive stores a link until it is sent somewhere else. (Missing videos in Powerpoint, anyone?)

In general, doing "clever" things to hide complexity (or save space, etc) from the user is very difficult. Most such attempts lead to users at times fighting the computer to get what they want, when the designer of such a system did not think in the same way as the user, or failed to consider some unusual use case. I'd recommend one guiding principle here: "always make the user feel they are in control of what is happening" - and that's very difficult to do once you start hiding stuff.

Ralph Martin

From bricklroland at yahoo.de  Sun Dec 29 19:13:06 2019
From: bricklroland at yahoo.de (Roland Brickl)
Date: Sun, 29 Dec 2019 19:13:06 +0100
Subject: Suggested feature: Portable document archive
In-Reply-To: <1a099554-6df1-9959-5ff0-2902e0e32261@yahoo.de>
References: <1a099554-6df1-9959-5ff0-2902e0e32261@yahoo.de>
Message-ID: <6e103d98-1492-99d8-3955-1056fc1a8d68@yahoo.de>

Hi Simon,

Am 27.12.2019 um 21:35 schrieb Simon Heisterkamp:
>
> The MS Word .docx format is actually a zip archive with xml files and 
> folders for resources such as pictures. The idea here is to do the 
> same for .tex sources.
> Call the archive something like .pta (portable Tex archive), and 
> support creating, opening editing and typesetting this file directly 
> from MikTeX (and tex-live).
>
> Proposed properties:
>
> * a zip archive with all sources necessary to typeset a TeX document.
> * archive can contain non-standard dependencies, i.e. packages,
> pictures, styles.
> * archive can contain the typeset pdf document. Costs extra size
> file, but gains accessibility. This makes it very easy to write
> ?viewer? applications for every conceivable system out there -
> they simply pull the pdf out of the archive
>
Thought about https://ctan.org/pkg/embedall before? When someone do such 
a project, it would be good to use existing parts.
You only need some code, to extract the saved files of that pdf.
It would be be more a project for LxY.

Roland

From henrimenke at gmail.com  Mon Dec 30 00:07:28 2019
From: henrimenke at gmail.com (Henri Menke)
Date: Mon, 30 Dec 2019 12:07:28 +1300
Subject: Suggested feature: Portable document archive
In-Reply-To: <CAEHpzAyWiSOTD6yxP9paLS9UUqJJhAJwTNzseuWnzqAgL4Yt6g@mail.gmail.com>
References: <CAEHpzAyWiSOTD6yxP9paLS9UUqJJhAJwTNzseuWnzqAgL4Yt6g@mail.gmail.com>
Message-ID: <ebad3d47-aeb6-3707-08c8-bbd56bdcda8b@gmail.com>

On Linux you can mount a zip archive with fuse-zip [1] as a read-write
filesystem and you can organize the files inside to your liking.

It is also available on macOS [2] but this approach won't work on
Windows because of their stupid concept of drive letters instead of
mount points.

So for users of Unix-like systems this is a solved problem.

[1] https://bitbucket.org/agalanin/fuse-zip
[2] https://formulae.brew.sh/formula/fuse-zip

On 12/28/19 9:35 AM, Simon Heisterkamp wrote:
> Hi all,
> I'm new here. Please excuse any breach of etiquette.
> 
> I'm the author of the MikteX feature suggestion 424:
> https://github.com/MiKTeX/miktex/issues/424
> reproduced below in full for your convenience. My proposal is to do the
> same for texlive and I would like a discussion about how people would feel
> about such a feature. I am open to contributing to the effort but would
> likely need substantial support from experience developers of tex-live.
> 
> Thoughts, comments?
> 
> Best wishes and happy holidays,
> Simon
> 
> 
> Full text of MikteX feature suggestion 424:
> 
> The MS Word .docx format is actually a zip archive with xml files and
> folders for resources such as pictures. The idea here is to do the same for
> .tex sources.
> Call the archive something like .pta (portable Tex archive), and support
> creating, opening editing and typesetting this file directly from MikTeX
> (and tex-live).
> 
> Proposed properties:
> 
>     - a zip archive with all sources necessary to typeset a TeX document.
>     - renamed to something other than .zip to discourage non-technical users
>     from editing directly. Suggestion: .pta
>     - MikTeX (and tex-live) support for working with this file directly.
>     (like MS Word works with .docx archives) In particular guarantee that the
>     archive can always be typeset again after moving and copying to another
>     installation of MikTeX (and tex-live).
>     - Use a somewhat strict structure for names and locations inside the
>     archive. This will simplify development of the feature. Unsupported uses
>     can always fall back to ordinary .tex source files.
>     - a ?make-file? (inside the archive) for standardized typesetting with
>     one click - no setup required at all by users who only want to make minor
>     changes to a document.
>     - archive can contain non-standard dependencies, i.e. packages,
>     pictures, styles.
>     - archive can contain the typeset pdf document. Costs extra size file,
>     but gains accessibility. This makes it very easy to write ?viewer?
>     applications for every conceivable system out there - they simply pull the
>     pdf out of the archive.
> 
> Use cases:
> 
>     - non-technical persons are comfortable with a document being one file.
>     - file can be copied and moved around while maintaining a guarantee that
>     it can be typeset when needed.
>     - this could greatly assist in spreading the use of latex outside of
>     technical academic fields.
> 
> Aspects that need more thought:
> 
>     - when editing creates typesetting errors, the archive could maintain a
>     "last successfully typeset" pdf for the viewers, alternatively it could
>     present a "corrupted" pdf file. Another approach could be to forbid saving
>     to the archive format if the document cannot be typeset.
> 
> Feel free to use and share this idea however you want. I don?t have the
> time to develop this myself, but would love to use the feature at the
> engineering company where I work.
> 
> Best regards,
> Simon
> 

From reinhard.kotucha at web.de  Mon Dec 30 02:28:09 2019
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 30 Dec 2019 02:28:09 +0100
Subject: Suggested feature: Portable document archive
In-Reply-To: <CAEHpzAz4LeX+zRhEy=rv23exfVrZ_AJU+gyLsmXhda7V7S-kjQ@mail.gmail.com>
References: <CAEHpzAyWiSOTD6yxP9paLS9UUqJJhAJwTNzseuWnzqAgL4Yt6g@mail.gmail.com>
 <20191229015002.29f2bb84@hordevm>
 <CAEHpzAz4LeX+zRhEy=rv23exfVrZ_AJU+gyLsmXhda7V7S-kjQ@mail.gmail.com>
Message-ID: <24073.21161.299754.13518@gargle.gargle.HOWL>

Simon,
I can assure you that what you suggest will never happen.  Hence the
whole discussion is useless.

Of course it's nice if you can pass the whole project as a single ZIP
file to somebody else.  But you can do it already right now.  All you
need is a script which creates a ZIP file.  No more, no less.

It's definitely neither possible nor desirable to replace the file
system with a ZIP file.  That would break millions or billions
workflows whithout any good reason.  It would render programs like
grep, sed, diff,... useless for no good reason, as others told you
already.  It also renders all text editors and TeX-IDEs useless.

All you need is a script which creates a ZIP file in order to pass
your files to somebody else.  No need to change anything else.

Microsoft Word is not a good example.  It doesn't allow users to use
the user interface they prefer, there is no way to manipulate files
with external tools, etc.  This is definitely not what we want.

And as far as beginners you mentioned in a previous mail are
concerned, my experience is that most of them are beginners only for a
couple of days.  They all learn very fast, often amazingly fast.
Learning LaTeX is not very difficult.  Mentioning "beginners" at all
usually means "there are people who are even more stupid than me".
But this assumption is almost always wrong.

Regards,
  Reinhard

--
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From sergio.callegari at gmail.com  Mon Dec 30 11:07:11 2019
From: sergio.callegari at gmail.com (Sergio Callegari)
Date: Mon, 30 Dec 2019 11:07:11 +0100
Subject: List of changes before updating
In-Reply-To: <87k16ikdye.fsf@example.com>
Message-ID: <accf9ebb-ae9f-f1ae-2246-9f9b4e97accf@gmail.com>

Nice suggestion, thanks!

Sergio

> For this, I usually have a look at:
>
>    ?????
>    ?https://www.tug.org/svn/texlive/trunk/Master/
>    ?????


From sergio.callegari at gmail.com  Mon Dec 30 11:12:29 2019
From: sergio.callegari at gmail.com (Sergio Callegari)
Date: Mon, 30 Dec 2019 11:12:29 +0100
Subject: Broken link for mktexlsr
Message-ID: <28e2d0d6-5348-a877-e6f2-a2413d647b8d@gmail.com>

After todays update of texlive with `tlmgr update --all`, every update is 
failing with

tlmgr: mktexlsr failed (status -1), output:

and no output for mktexlsr.

This seems to be due to the fact that `... bin/x86_64-linux/mktexlsr` points to 
`../../texmf-dist/scripts/texlive/mktexlsr` with a broken symbolic link. The 
latter should be `../../texmf-dist/scripts/texlive/mktexlsr.pl`.

Fixing the link by hand seems to solve the issue.

Sergio


From clemens.heuberger at aau.at  Mon Dec 30 13:36:24 2019
From: clemens.heuberger at aau.at (Clemens Heuberger)
Date: Mon, 30 Dec 2019 13:36:24 +0100
Subject: mktexlsr not found in
Message-ID: <a176c925-f064-ccdd-1a64-d521ab16c47f@aau.at>

Installing with the --profile option fails for me since today:

running mktexlsr /usr/local/texlive/2019/texmf-dist ...
Can't exec "mktexlsr": No such file or directory at 
/tmp/install-tl/tlpkg/TeXLive/TLUtils.pm line 596.

In fact:

# ls -l /usr/local/texlive/2019/bin/x86_64-linux/mktexlsr
lrwxrwxrwx 1 root root 41 Dec 29 19:45 
/usr/local/texlive/2019/bin/x86_64-linux/mktexlsr -> 
../../texmf-dist/scripts/texlive/mktexlsr

# ls -l /usr/local/texlive/2019/texmf-dist/scripts/texlive/mktexlsr*
-rwxr-xr-x 1 root root 16696 Jul 30  2015 
/usr/local/texlive/2019/texmf-dist/scripts/texlive/mktexlsr.pl

So the link is a dead link because it misses the suffix .pl.

I attach my profile file.

==================

selected_scheme scheme-basic
TEXDIR /usr/local/texlive/2019
TEXMFCONFIG ~/.texlive2019/texmf-config
TEXMFHOME ~/texmf
TEXMFLOCAL /usr/local/texlive/texmf-local
TEXMFSYSCONFIG /usr/local/texlive/2019/texmf-config
TEXMFSYSVAR /usr/local/texlive/2019/texmf-var
TEXMFVAR ~/.texlive2019/texmf-var
binary_x86_64-linux 1
instopt_adjustpath 0
instopt_adjustrepo 1
instopt_letter 0
instopt_portable 0
instopt_write18_restricted 1
tlpdbopt_autobackup 1
tlpdbopt_backupdir tlpkg/backups
tlpdbopt_create_formats 1
tlpdbopt_desktop_integration 1
tlpdbopt_file_assocs 1
tlpdbopt_generate_updmap 0
tlpdbopt_install_docfiles 0
tlpdbopt_install_srcfiles 0
tlpdbopt_post_code 1
tlpdbopt_sys_bin /usr/local/bin
tlpdbopt_sys_info /usr/local/share/info
tlpdbopt_sys_man /usr/local/share/man
tlpdbopt_w32_multi_user 1

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 4165 bytes
Desc: S/MIME Cryptographic Signature
URL: <https://tug.org/pipermail/tex-live/attachments/20191230/6941c5f9/attachment.p7s>

From karl at freefriends.org  Mon Dec 30 15:05:18 2019
From: karl at freefriends.org (Karl Berry)
Date: Mon, 30 Dec 2019 15:05:18 +0100
Subject: mktexlsr not found in
In-Reply-To: <a176c925-f064-ccdd-1a64-d521ab16c47f@aau.at>
Message-ID: <201912301405.xBUE5IN8011432@tug.org>

    Can't exec "mktexlsr": No such file or directory at 

Sorry. Of course that shouldn't have happened. I'll have to look into
why our test install succeeded -- it should have failed and the broken
setup not be distributed.

Anyway, I'm fixing it and will update tlnet again, although I doubt the
changes will make it around CTAN before another 24 hours or
so. Meanwhile, for anyone who hasn't already updated, it would be best
to refrain.

By the way, mktexlsr.pl is not intended to be the target of the link (it
mostly works, but not entirely ... I forget). The problem was not
distributing the mktex* shell scripts in scripts/texlive/.  --sorry, karl.

From achirvasub at gmail.com  Mon Dec 30 17:53:29 2019
From: achirvasub at gmail.com (Stuart Little)
Date: Mon, 30 Dec 2019 11:53:29 -0500
Subject: latest tlmgr update removes mktexlsr?
In-Reply-To: <20191230162407.GA4999@system76-pc.localdomain>
References: <20191230162407.GA4999@system76-pc.localdomain>
Message-ID: <20191230165329.GB4999@system76-pc.localdomain>

I have vanilla installations of texlive on several Linux machines, obtained as described here[0]. The latest update, which I usually do by

> tlmgr update --self --all

seems to have removed the 'mktexlsr' executable. The output (on all three machines I currently maintain texlive on):

> 
> tlmgr: package repository <repo; they vary between computers> (verified)
tlmgr: saving backups to ${HOME}/texlive/2019/tlpkg/backups
[1/5, ??:??/??:??] update: kpathsea.x86_64-linux [40k] (50281 -> 53254) ... done
> [2/5, 00:01/02:45] update: newtx [5242k] (52998 -> 53255) ... done
> [3/5, 00:03/00:03] update: tex4ht [937k] (53251 -> 53257) ... done
> [4/5, 00:04/00:04] update: texlive-docindex [155k] (53237 -> 53253) ... done
> [5/5, 00:04/00:04] update: texlive-scripts [134k] (53242 -> 53253) ... done
> running mktexlsr ...
> 
> tlmgr: mktexlsr failed (status -1), output:
> 
> running updmap-sys ...
> done running updmap-sys.
> tlmgr: package log updated: /root/texlive/2019/texmf-var/web2c/tlmgr.log
> tlmgr: An error has occurred. See above messages. Exiting.
> 

To confirm, I then tried running 'mktexlsr' in a terminal. This used to work *immediately* prior to the update (after it happened twice, I tried 'mktexlsr' *before* the update on the third machine). The result is that the command is not found. I am sure that the texlive binaries are in my path (I can run 'pdflatex' fine for instance, as aregular user). 

As a sanity check, I looked inside

${HOME}/texlive/2019/bin/x86_64-linux/

where the binaries live. The 'mktexlsr' file there is a *broken* link to

../../texmf-dist/scripts/texlive/mktexlsr

---

References:

[0] https://www.tug.org/texlive/quickinstall.html

From JimDiamond at ns.sympatico.ca  Mon Dec 30 18:03:04 2019
From: JimDiamond at ns.sympatico.ca (Jim Diamond)
Date: Mon, 30 Dec 2019 13:03:04 -0400
Subject: latest tlmgr update removes mktexlsr?
In-Reply-To: <20191230162407.GA4999@system76-pc.localdomain>
References: <20191230162407.GA4999@system76-pc.localdomain>
Message-ID: <20191230170304.GA22226@jdiamond-mb.acadiau.ca>

Hi all,

amusingly I was updating TL in one window while reading Stuart's
message.  And, just like Stuart, my mktexlsr disappeared.
Actually, it didn't.  It is now a dangling symlink:

ls -l /usr/local/texlive/2019/bin/x86_64-linux/mktexlsr     
lrwxrwxrwx 1 zsd users 41 Dec 29 15:45 /usr/local/texlive/2019/bin/x86_64-linux/mktexlsr -> ../../texmf-dist/scripts/texlive/mktexlsr

I hope the fix (for the TL distribution) is easy.

Cheers.

                        Jim


On Mon, Dec 30, 2019 at 11:24 (-0500), Stuart Little wrote:

> CAUTION: This email comes from outside Acadia. Verify the sender and use caution with any requests, links or attachments.

> I have vanilla installations of texlive on several Linux machines, obtained as described here[0]. The latest update, which I usually do by

>> tlmgr update --self --all

> seems to have removed the 'mktexlsr' executable. The output (on all three machines I currently maintain texlive on):


>> tlmgr: package repository <repo; they vary between computers> (verified)
>> tlmgr: saving backups to ${HOME}/texlive/2019/tlpkg/backups
>> [1/5, ??:??/??:??] update: kpathsea.x86_64-linux [40k] (50281 -> 53254) ... done
>> [2/5, 00:01/02:45] update: newtx [5242k] (52998 -> 53255) ... done
>> [3/5, 00:03/00:03] update: tex4ht [937k] (53251 -> 53257) ... done
>> [4/5, 00:04/00:04] update: texlive-docindex [155k] (53237 -> 53253) ... done
>> [5/5, 00:04/00:04] update: texlive-scripts [134k] (53242 -> 53253) ... done
>> running mktexlsr ...

>> tlmgr: mktexlsr failed (status -1), output:

>> running updmap-sys ...
>> done running updmap-sys.
>> tlmgr: package log updated: /root/texlive/2019/texmf-var/web2c/tlmgr.log
>> tlmgr: An error has occurred. See above messages. Exiting.


> To confirm, I then tried running 'mktexlsr' in a terminal. This used to work *immediately* prior to the update (after it happened twice, I tried 'mktexlsr' *before* the update on the third machine). The result is that the command is not found. I am sure that the texlive binaries are in my path (I can run 'pdflatex' fine for instance, as aregular user).

> As a sanity check, I looked inside

> ${HOME}/texlive/2019/bin/x86_64-linux/

> where the binaries live. The 'mktexlsr' file there is a *broken* link to

> ../../texmf-dist/scripts/texlive/mktexlsr

> ---

> References:

> [0] https://www.tug.org/texlive/quickinstall.html

From barry.mackichan at mackichan.com  Mon Dec 30 21:56:35 2019
From: barry.mackichan at mackichan.com (Barry MacKichan)
Date: Mon, 30 Dec 2019 15:56:35 -0500
Subject: Suggested feature: Portable document archive
In-Reply-To: <CALBOmsaLH3fxJA53JzGN6o6UXmti7=TBsT9KMdHLEDiMRjihAg@mail.gmail.com>
References: <CAEHpzAyWiSOTD6yxP9paLS9UUqJJhAJwTNzseuWnzqAgL4Yt6g@mail.gmail.com>
 <CALBOmsaLH3fxJA53JzGN6o6UXmti7=TBsT9KMdHLEDiMRjihAg@mail.gmail.com>
Message-ID: <D8A903A3-A54C-4C34-8185-5F617A7FD63C@mackichan.com>

I can provide another data point for this discussion.

Scientific Word and Scientific WorkPlace use a scheme quite like this. 
The ?native file type? extension for our documents is .sci, but in 
fact a .sci file is just a zip file under another name. By changing the 
extension we can change the default operation selected when the user 
double clicks on it.

It is possible, by making some changes in the Windows registry, to make 
the .sci file behave like a zip file in some occasions and like a 
document in others. In particular, in the Windows file browser which 
shows the directory tree in one pane on the left and the directory 
contents in the other, the user can launch the program by clicking on 
the file on the right, or can open and explore the contents of the zip 
file by clicking on the right. The special treatment of zip files in 
Windows applies to .sci files as well.

Here is what we keep in the .sci file:

One or more xhtml files, a directory of css files, and a directory of 
graphics files ? mostly these don?t apply to this discussion.

A directory that contains a tex file generated by our program from the 
xhtml version of the document and temporary copies of the intermediate 
files generated by running TeX.

Three directories that can contain graphics files which hold the 
original copy of a graphic imported by the user. If that graphic can?t 
be displayed in a browser, we run a conversion program to make a 
displayable copy. If neither of those can be imported into TeX, we also 
make a TeX-compatible copy. Thus there may be three copies of a graphic 
in some cases. The final PDF is also contained in the zipped package.

We make no attempt to include any LaTeX package files or utility 
programs (we install some, but these are part of the installation and 
not part of the document). So the only guarantee is that the document 
can be compiled on an installation of our program on OSX or Windows, 
with a complete TeXLive installation. Smaller TeX installations usually 
work, but there is no guarantee that you won?t have to install a bit 
more.

There is a command in our program to trim the fat in the .sci file. It 
removes temporary files, and depending on preferences, it might also 
remove the generated PDF and the conversions of the graphics and even 
the TeX file. I.e., it can go back to the minimum required to regenerate 
everything.

The .sci file is agnostic about the TeX compiler used and so works with 
PDFLaTeX, LuaLaTeX, and XeLaTeX.

The Mac version could easily have used OSX packages instead of zip 
files, but we decided it Was more important to be able to drag a file 
from Windows to a Mac and have everything work.

?Barry MacKichan

On 29 Dec 2019, at 3:25, Mojca Miklavec wrote:

> Dear Simon,
>
> On Sat, 28 Dec 2019 at 21:29, Simon Heisterkamp wrote:
>>
>> I'm the author of the MikteX feature suggestion 424: 
>> https://github.com/MiKTeX/miktex/issues/424
> ...
>> I am open to contributing to the effort but would likely need 
>> substantial support from experience developers of tex-live.
> ...
>> The MS Word .docx format is actually a zip archive with xml files and 
>> folders for resources such as pictures. The idea here is to do the 
>> same for .tex sources.
>> Call the archive something like .pta (portable Tex archive), and 
>> support creating, opening editing and typesetting this file directly 
>> from MikTeX (and tex-live).
>
> My guess is that this could be much easier to write if you only target
> a single engine (I have LuaTeX in mind, including any of its recent
> variants) than if you need to support the gazillion of other programs
> (some of which have been barely touched or changed since the
> eighties).
>
> LuaTeX already has a built-in support for zip files, and ConTeXt
> already supports providing a single zip with the full TEXMF tree with
> resource files as an alternative to having the standard extracted
> installation, so I could imagine that supporting something like
> "context document.pta" to magically compile everything might be almost
> straightforward.
>
> But then you would need *A LOT* more work to also:
> - properly port it to LaTeX
> - support "all" the major viewers and text editors
> - write a really nice GUI with drag-and-drop functionality to
> manipulate the files (add and remove pictures & other packages)
> - make sure that Overleaf etc. can import and export it
> - potentially ensure that google drive / gmail know how to display the 
> contents
> to make it really useful, else it becomes just another file that users
> have no idea what to do with it.
>
> While I find the idea nice in principle (I share the concerns raised
> by Johannes), this can only work if you are really willing to spend a
> lot of effort yourself, and even if you get help (not impossible, but
> not if you would need handholding on each step), you would still need
> to figure out the huge majority yourself. This can only help users if
> you really create great user experience and take care of all the
> details, including platform-specific ones (like for example: having
> extracted structure like something.app which "behaves like a single
> file" on different operating systems and can be double-clicked to be
> opened with a GUI editor).
>
>> Proposed properties:
>>
>> a zip archive with all sources necessary to typeset a TeX document.
>> renamed to something other than .zip to discourage non-technical 
>> users from editing directly. Suggestion: .pta
>> MikTeX (and tex-live) support for working with this file directly. 
>> (like MS Word works with .docx archives) In particular guarantee that 
>> the archive can always be typeset again after moving and copying to 
>> another installation of MikTeX (and tex-live).
>> Use a somewhat strict structure for names and locations inside the 
>> archive. This will simplify development of the feature. Unsupported 
>> uses can always fall back to ordinary .tex source files.
>> a ?make-file? (inside the archive) for standardized typesetting 
>> with one click - no setup required at all by users who only want to 
>> make minor changes to a document.
>> archive can contain non-standard dependencies, i.e. packages, 
>> pictures, styles.
>> archive can contain the typeset pdf document. Costs extra size file, 
>> but gains accessibility. This makes it very easy to write 
>> ?viewer? applications for every conceivable system out there - 
>> they simply pull the pdf out of the archive.
>>
>> Use cases:
>>
>> non-technical persons are comfortable with a document being one file.
>> file can be copied and moved around while maintaining a guarantee 
>> that it can be typeset when needed.
>
> Not necessarily.
> Unless you also bundle the binary and all the packages and fonts,
> there is no guarantee that the document can be typeset again, at least
> not necessarily in the fully reproducible way.
> It may always happen that a package gets removed from TeX Live, that
> fonts get renames, or that two packages start conflicting with each
> other.
> (I mean: it's not any worse nor any better than what you have now.)
>
>> this could greatly assist in spreading the use of latex outside of 
>> technical academic fields.
>>
>> Aspects that need more thought:
>>
>> when editing creates typesetting errors, the archive could maintain a 
>> "last successfully typeset" pdf for the viewers, alternatively it 
>> could present a "corrupted" pdf file. Another approach could be to 
>> forbid saving to the archive format if the document cannot be 
>> typeset.
>>
>> Feel free to use and share this idea however you want.
>> I don?t have the time to develop this myself,
>
> That's contrary to what you said at the top?
>
>> but would love to use the feature at the engineering company where I 
>> work.
>
> How many man-years would the company be willing to fund to implement
> such a feature?
>
>> Best regards,
>> Simon
>
> Mojca
>
> PS: this is not really something that concerns MikTeX or TeX Live
> alone. It's something that would need to be an independent
> development.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191230/c7d3b186/attachment-0001.html>

From karl at freefriends.org  Mon Dec 30 23:23:57 2019
From: karl at freefriends.org (Karl Berry)
Date: Mon, 30 Dec 2019 15:23:57 -0700
Subject: latest tlmgr update removes mktexlsr?
In-Reply-To: <20191230170304.GA22226@jdiamond-mb.acadiau.ca>
Message-ID: <201912302223.xBUMNvai024623@freefriends.org>

    I hope the fix (for the TL distribution) is easy.

Yeah, it was just my brain forgetting one step :(. A fixed update is on
the TL master server now. It requires a --self update. It worked for me,
hope it won't have any new problems. And I hope it makes it around ctan
soon. Sorry again.

Herb asked (off-list) if mktexlsr will remain a symlink after the
correct update. The answer is yes. It should look like this:

bin/x86_64-linux/mktexlsr -> ../../texmf-dist/scripts/texlive/mktexlsr
  where that file should be (modulo owner/group):
-rwxr-xr-x 1 karl root 8209 Dec 29 20:18 mktexlsr

mktexlsr is now part of the texlive.infra package. --good luck to us all, karl.

From zdenek.wagner at gmail.com  Tue Dec 31 12:38:43 2019
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Tue, 31 Dec 2019 12:38:43 +0100
Subject: Suggested feature: Portable document archive
In-Reply-To: <D8A903A3-A54C-4C34-8185-5F617A7FD63C@mackichan.com>
References: <CAEHpzAyWiSOTD6yxP9paLS9UUqJJhAJwTNzseuWnzqAgL4Yt6g@mail.gmail.com>
 <CALBOmsaLH3fxJA53JzGN6o6UXmti7=TBsT9KMdHLEDiMRjihAg@mail.gmail.com>
 <D8A903A3-A54C-4C34-8185-5F617A7FD63C@mackichan.com>
Message-ID: <CAC1phybAAXxeeEjzcZz4Z5MsEUc_39OCWTYmYgFqzLuCRXqEPg@mail.gmail.com>

Hi all,

as already noted, such a scheme offers just basic possibilities. The
first problem is that you support two platforms only which means that
it is not portable. Looking at my everyday work I have to work in
Linux and cooperate with coauthors using Mac and Windows. My project
consist of a main file and one file per chapter, a custom package
file, bibliography file, sometimes custom bibliography style and an
index style for makeindex or a module for xindy. I need source files
for gnuplot, sometimes source files for octave, sometimes source files
for metapost, asymptote etc. I also need ICC profiles for colour
conversion. And, of course, I need processing by
perl/sed/awk/grep/bash. Most of it is portable if shared via
versioning systems.

A few years ago I was asked to prepare a package implementing a
graphical design for one company. They wanted to use it in MiKTeX and
Scientific Word. They also asked me for help with typesetting. I knew
how to do it in TeX, I have no experience with Scientific Word because
I use Linux. It lead the company to stop using Scientific Word because
they understood that work with vanilla TeX is easier and more
flexible.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

po 30. 12. 2019 v 23:04 odes?latel Barry MacKichan
<barry.mackichan at mackichan.com> napsal:
>
> I can provide another data point for this discussion.
>
> Scientific Word and Scientific WorkPlace use a scheme quite like this. The ?native file type? extension for our documents is .sci, but in fact a .sci file is just a zip file under another name. By changing the extension we can change the default operation selected when the user double clicks on it.
>
> It is possible, by making some changes in the Windows registry, to make the .sci file behave like a zip file in some occasions and like a document in others. In particular, in the Windows file browser which shows the directory tree in one pane on the left and the directory contents in the other, the user can launch the program by clicking on the file on the right, or can open and explore the contents of the zip file by clicking on the right. The special treatment of zip files in Windows applies to .sci files as well.
>
> Here is what we keep in the .sci file:
>
> One or more xhtml files, a directory of css files, and a directory of graphics files ? mostly these don?t apply to this discussion.
>
> A directory that contains a tex file generated by our program from the xhtml version of the document and temporary copies of the intermediate files generated by running TeX.
>
> Three directories that can contain graphics files which hold the original copy of a graphic imported by the user. If that graphic can?t be displayed in a browser, we run a conversion program to make a displayable copy. If neither of those can be imported into TeX, we also make a TeX-compatible copy. Thus there may be three copies of a graphic in some cases. The final PDF is also contained in the zipped package.
>
> We make no attempt to include any LaTeX package files or utility programs (we install some, but these are part of the installation and not part of the document). So the only guarantee is that the document can be compiled on an installation of our program on OSX or Windows, with a complete TeXLive installation. Smaller TeX installations usually work, but there is no guarantee that you won?t have to install a bit more.
>
> There is a command in our program to trim the fat in the .sci file. It removes temporary files, and depending on preferences, it might also remove the generated PDF and the conversions of the graphics and even the TeX file. I.e., it can go back to the minimum required to regenerate everything.
>
> The .sci file is agnostic about the TeX compiler used and so works with PDFLaTeX, LuaLaTeX, and XeLaTeX.
>
> The Mac version could easily have used OSX packages instead of zip files, but we decided it Was more important to be able to drag a file from Windows to a Mac and have everything work.
>
> ?Barry MacKichan
>
> On 29 Dec 2019, at 3:25, Mojca Miklavec wrote:
>
> Dear Simon,
>
> On Sat, 28 Dec 2019 at 21:29, Simon Heisterkamp wrote:
>
> I'm the author of the MikteX feature suggestion 424: https://github.com/MiKTeX/miktex/issues/424
>
> ...
>
> I am open to contributing to the effort but would likely need substantial support from experience developers of tex-live.
>
> ...


From achirvasub at gmail.com  Tue Dec 31 15:12:58 2019
From: achirvasub at gmail.com (A.C.)
Date: Tue, 31 Dec 2019 09:12:58 -0500
Subject: latest tlmgr update removes mktexlsr?
In-Reply-To: <201912302223.xBUMNvai024623@freefriends.org>
References: <201912302223.xBUMNvai024623@freefriends.org>
Message-ID: <ACF484A7-1D3C-4C2C-B10D-EE0A936C6D93@gmail.com>

I can confirm that this went through fine just now; 'mktexlsr' is back in place after the latest update.

On December 30, 2019 5:23:57 PM EST, Karl Berry <karl at freefriends.org> wrote:
>    I hope the fix (for the TL distribution) is easy.
>
>Yeah, it was just my brain forgetting one step :(. A fixed update is on
>the TL master server now. It requires a --self update. It worked for
>me,
>hope it won't have any new problems. And I hope it makes it around ctan
>soon. Sorry again.
>
>Herb asked (off-list) if mktexlsr will remain a symlink after the
>correct update. The answer is yes. It should look like this:
>
>bin/x86_64-linux/mktexlsr -> ../../texmf-dist/scripts/texlive/mktexlsr
>  where that file should be (modulo owner/group):
>-rwxr-xr-x 1 karl root 8209 Dec 29 20:18 mktexlsr
>
>mktexlsr is now part of the texlive.infra package. --good luck to us
>all, karl.


