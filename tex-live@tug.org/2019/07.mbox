From siepo at bitmuis.nl  Mon Jul  1 16:34:51 2019
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Mon, 1 Jul 2019 16:34:51 +0200
Subject: Unix install script fails on Mac
In-Reply-To: <20190630203058.GA14902@bitmuis.nl>
References: <A8988A79-5865-438E-9D97-1D56B0852635@math.uoregon.edu>
 <20190630154022.vddw6wua4ed7uaa3@burischnitzel.preining.info>
 <32EF07E2-E237-4A61-B36F-4E183211FB87@math.uoregon.edu>
 <20190630155145.ckqur46kra5eqder@burischnitzel.preining.info>
 <13A2C35E-C2C8-45BF-AB4C-628E66E1C8EC@mac.com>
 <20190630203058.GA14902@bitmuis.nl>
Message-ID: <20190701143451.GB2170@bitmuis.nl>

On Sun, Jun 30, 2019 at 10:30:58PM +0200, Siep Kroonenberg wrote:
> On Sun, Jun 30, 2019 at 01:03:35PM -0700, Adam R. Maxwell via tex-live wrote:
> > 
> > 
> > > On Jun 30, 2019, at 08:51 , Norbert Preining <preining at logic.at> wrote:
> > > 
> > > Hi Dick
> > > 
> > >> ... if I omit sudo. Then the installer works, even with the gui.
> > > 
> > > Then this might be an Tcl installation issue, or sudo versus X/Cocoa
> > > access issue where I have no idea about ...
> > 
> > If it's just the Tcl installer, that makes more sense. I'd guess it's
> > an sudo/environment issue, wherein su or sudo -s don't have TMPDIR.
> > 
> > $ sudo su -l
> > root# echo $TMPDIR
> > 
> > root# env
> > TERM=xterm-256color
> > SHELL=/bin/sh
> > USER=root
> > PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/texbin:/Library/TeX/texbin:/opt/X11/bin
> > PWD=/var/root
> > SHLVL=1
> > HOME=/var/root
> > _=/usr/bin/env
> > 
> > If that guess is correct, you could try 
> > sudo -s
> > export TMPDIR=/tmp
> > ./install-blah-blah
> 
> or
> 
> sudo env TMPDIR=/tmp perl install-tl ...
> 
> The fix in install-tl-gui.tcl is totally trivial and I'll probably
> commit a fix tomorrow.

Done, r51517. Should be in tomorrow's update. By the way, thanks for
the report.

-- 
Siep Kroonenberg

From siepo at bitmuis.nl  Mon Jul  1 21:25:40 2019
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Mon, 1 Jul 2019 21:25:40 +0200
Subject: Bug with the latest texlive installer on Windows
In-Reply-To: <20190628084834.GA3131@bitmuis.nl>
References: <CAB51FhtNPQxQJgoAjiu=26V2V7NoKqbY21NZVnXnEUDrrMuG+Q@mail.gmail.com>
 <20190628084834.GA3131@bitmuis.nl>
Message-ID: <20190701192540.GC2170@bitmuis.nl>

On Fri, Jun 28, 2019 at 10:48:34AM +0200, Siep Kroonenberg wrote:
> On Thu, Jun 27, 2019 at 04:17:03PM -0700, rhn.grg at gmail.com wrote:
> > Hi,
> > 
> > I noticed this issue with the latest texlive GUI installer on a Windows 10
> > PC. It seems like the texlive installer doesn't handle spaces in program
> > paths correctly. It works only after copying the texlive install directory
> > (install-tl-20190627) to a path that doesn't have spaces.
> >  ...
> > 1852   # start install-tl-[tcl] via a pipe.
> > 1853   set cmd [list "|${::perlbin}" "${::instroot}/install-tl" \
> > 1854                "-from_ext_gui" {*}$::argv 2>@1]
> > 1855   show_time "opening pipe"
> > 1856   if [catch {open $cmd r+} ::inst] {
> > 1857     err_exit "Error starting Perl backend"
> > 1858   }
> >  ...
> > 
> > I'm not that familiar with Tcl/Tk, but perhaps the paths to $perlbin and to
> > $install-tl need to be sanitized/quoted in line 1853? I tried adding the
> > quotes (using \"), but it didn't work for me; perhaps, someone more
> > familiar with Tcl/Tk can fix this.
> 
> I'll look into it. Thanks for the report.

Fixed in r51519.

It requires some acrobatics to deal with windows' non-standard
command-line parsing, and the tcl/tk wiki devotes a long page to it
(https://blog.tcl.tk/16336). In the end, I simply replaced the full
path of perl.exe with just "perl.exe", since the batchfile wrapper
already put perl.exe on the searchpath.

-- 
Siep Kroonenberg

From rvoland at tds.net  Tue Jul  2 03:01:24 2019
From: rvoland at tds.net (Rick Voland)
Date: Mon, 1 Jul 2019 21:01:24 -0400 (EDT)
Subject: cannot update TeXlive, nor use LaTeX
In-Reply-To: <1843272174.3859248.1562028324308.JavaMail.zimbra@tds.net>
Message-ID: <1061173070.3921553.1562029284546.JavaMail.zimbra@tds.net>


TeXlive 2019 running on Windows 7

I am unable to update using TeX Live Manager.  Also, I cannot use LaTeX, not using TeXworks editor (pdfLaTeX), not using latex from command line.  These problems started around June 26.   

TeX Live Manager starts, but cannot find a repository and gives the following message:

can't read "::active_cls": no such variable
can't read "::active_cls": no such variable
    while executing
"if {[winfo class $c] in $::active_cls} {
        $c state !disabled
      }"
    (procedure "total_dis_enable" line 21)
    invoked from within
"total_dis_enable 1 "
    (procedure "read_line" line 26)
    invoked from within
"read_line"



Several times, I downloaded and installed 
update-tlmgr-latest.exe
this installs with no errors.


TeXworks starts fine with no errors until I try to latex a document. 
When I try to latex the default 
article.tex
(with no edits)
it fails when it cannot find geometry.sty
I get the same error either in TeXworks or running latex from commandline.



------

Thanks,

Rick






From siepo at bitmuis.nl  Tue Jul  2 11:39:29 2019
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Tue, 2 Jul 2019 11:39:29 +0200
Subject: cannot update TeXlive, nor use LaTeX
In-Reply-To: <1061173070.3921553.1562029284546.JavaMail.zimbra@tds.net>
References: <1843272174.3859248.1562028324308.JavaMail.zimbra@tds.net>
 <1061173070.3921553.1562029284546.JavaMail.zimbra@tds.net>
Message-ID: <20190702093929.GB1678@bitmuis.nl>

On Mon, Jul 01, 2019 at 09:01:24PM -0400, Rick Voland wrote:
> 
> TeXlive 2019 running on Windows 7
> 
> I am unable to update using TeX Live Manager.  Also, I cannot use LaTeX, not using TeXworks editor (pdfLaTeX), not using latex from command line.  These problems started around June 26.   
> 
> TeX Live Manager starts, but cannot find a repository and gives the following message:
> 
> can't read "::active_cls": no such variable
> can't read "::active_cls": no such variable
>     while executing
> "if {[winfo class $c] in $::active_cls} {
>         $c state !disabled
>       }"
>     (procedure "total_dis_enable" line 21)
>     invoked from within
> "total_dis_enable 1 "
>     (procedure "read_line" line 26)
>     invoked from within
> "read_line"

As to TeX Live Manager:

Somehow, tlpkg/tltcl/tltcl.tcl did not get updated. However, it is
part of the .zip and .tar.gz installers, so you can manually copy it
from there.

Karl, Norbert, can one of you look into this?

-- 
Siep Kroonenberg

From preining at logic.at  Tue Jul  2 15:53:45 2019
From: preining at logic.at (Norbert Preining)
Date: Tue, 2 Jul 2019 22:53:45 +0900
Subject: cannot update TeXlive, nor use LaTeX
In-Reply-To: <20190702093929.GB1678@bitmuis.nl>
References: <1843272174.3859248.1562028324308.JavaMail.zimbra@tds.net>
 <1061173070.3921553.1562029284546.JavaMail.zimbra@tds.net>
 <20190702093929.GB1678@bitmuis.nl>
Message-ID: <20190702135345.wq3es4mtk7ujduea@burischnitzel.preining.info>

Hi Siep,

> Somehow, tlpkg/tltcl/tltcl.tcl did not get updated. However, it is
> part of the .zip and .tar.gz installers, so you can manually copy it
> from there.

Irrelevant whether it is in the installer, but it is in texlive.infra?
And if yes, are *all* files that are necessary for a concerted update in
the texlive.infra?

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From paul.gaborit at gmail.com  Tue Jul  2 16:07:52 2019
From: paul.gaborit at gmail.com (Paul Gaborit)
Date: Tue, 2 Jul 2019 16:07:52 +0200
Subject: tex-live Digest, Vol 196, Issue 2
In-Reply-To: <mailman.65.1556746602.25555.tex-live@tug.org>
References: <mailman.65.1556746602.25555.tex-live@tug.org>
Message-ID: <6ac1e616-12e6-fc3c-e75d-070c922844f0@gmail.com>

Le 01/05/2019 ? 23:36, tex-live-request at tug.org a ?crit?:
> That's the other big issue:  Geolocation ...
> 
>   CTAN's mirror redirector software was written ages ago, by an
>   author who is now long dead.  It is based on an outdated database
>   format (for the geoip data) and does not support IPv6.
>   In short:  Most probably a complete rewrite would be needed ?
>   but by whom?
> 
>   So if anyone feels they would have time and knowledge enough
>   to write a new redirector to be integrated into our website,
>   _please_  get in touch with ctan at ctan.org.
>   Many thanks in advance!
> 
>     All the best,
>        Petra  (from the CTAN team)

Just a suggestion:

    <https://github.com/etix/mirrorbits>


Sincerely,
-- 
     Paul Gaborit

From sergio.callegari at unibo.it  Tue Jul  2 18:34:08 2019
From: sergio.callegari at unibo.it (Sergio Callegari)
Date: Tue, 2 Jul 2019 16:34:08 +0000
Subject: xetex-inputenc.sty appears to be missing
Message-ID: <f86e4fbc-5677-5e1c-cb27-e22990c26c56@unibo.it>

The package xetex-inputenc.sty () seems not to be in TexLive 2019, but 
luainputenc may require it when running under xetex.

It is unclear to me whether it is an error in luainputenc to look for it or not 
to package it itself.

Any hint?

Sergio



From d.p.carlisle at gmail.com  Tue Jul  2 21:19:59 2019
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Tue, 2 Jul 2019 20:19:59 +0100
Subject: xetex-inputenc.sty appears to be missing
In-Reply-To: <f86e4fbc-5677-5e1c-cb27-e22990c26c56@unibo.it>
References: <f86e4fbc-5677-5e1c-cb27-e22990c26c56@unibo.it>
Message-ID: <CAEW6iOgt_raGN8ynSqcSycEQ3ozdb=6ugGOAACupHQhnC3nXfw@mail.gmail.com>

The files are on Github

https://github.com/wspr/xetex-inputenc

But it's all a bit experimental and I don't think Will ever uploaded to ctan

David

On Tue, 2 Jul 2019 at 19:05, Sergio Callegari <sergio.callegari at unibo.it> wrote:
>
> The package xetex-inputenc.sty () seems not to be in TexLive 2019, but
> luainputenc may require it when running under xetex.
>
> It is unclear to me whether it is an error in luainputenc to look for it or not
> to package it itself.
>
> Any hint?
>
> Sergio
>
>

From rvoland at tds.net  Wed Jul  3 01:45:14 2019
From: rvoland at tds.net (Rick Voland)
Date: Tue, 2 Jul 2019 19:45:14 -0400 (EDT)
Subject: cannot update TeXlive, nor use LaTeX
In-Reply-To: <20190702135345.wq3es4mtk7ujduea@burischnitzel.preining.info>
References: <1843272174.3859248.1562028324308.JavaMail.zimbra@tds.net>
 <1061173070.3921553.1562029284546.JavaMail.zimbra@tds.net>
 <20190702093929.GB1678@bitmuis.nl>
 <20190702135345.wq3es4mtk7ujduea@burischnitzel.preining.info>
Message-ID: <1555485667.8749986.1562111114670.JavaMail.zimbra@tds.net>


I compared 
tlpkg/tltcl/tltcl.tcl
in my computer
with what is in 
update-tlmgr-latest.exe
that I downloaded fresh today.


tlpkg/tltcl/tltcl.tcl
in both places is identical
same date-time, same files size, same SHA256 signature.  

created:  Wednesday, ?April ?03, ?2019, ??11:06:28 AM
size:  15,302 bytes


Thanks for suggestions.

Rick






----- Original Message -----
From: "Norbert Preining" <preining at logic.at>
To: tex-live at tug.org
Sent: Tuesday, July 2, 2019 8:53:45 AM
Subject: Re: cannot update TeXlive, nor use LaTeX

Hi Siep,

> Somehow, tlpkg/tltcl/tltcl.tcl did not get updated. However, it is
> part of the .zip and .tar.gz installers, so you can manually copy it
> from there.

Irrelevant whether it is in the installer, but it is in texlive.infra?
And if yes, are *all* files that are necessary for a concerted update in
the texlive.infra?

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From siepo at bitmuis.nl  Wed Jul  3 09:23:19 2019
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Wed, 3 Jul 2019 09:23:19 +0200
Subject: cannot update TeXlive, nor use LaTeX
In-Reply-To: <1555485667.8749986.1562111114670.JavaMail.zimbra@tds.net>
References: <1843272174.3859248.1562028324308.JavaMail.zimbra@tds.net>
 <1061173070.3921553.1562029284546.JavaMail.zimbra@tds.net>
 <20190702093929.GB1678@bitmuis.nl>
 <20190702135345.wq3es4mtk7ujduea@burischnitzel.preining.info>
 <1555485667.8749986.1562111114670.JavaMail.zimbra@tds.net>
Message-ID: <20190703072318.GA1103@bitmuis.nl>

On Tue, Jul 02, 2019 at 07:45:14PM -0400, Rick Voland wrote:
> 
> I compared 
> tlpkg/tltcl/tltcl.tcl
> in my computer
> with what is in 
> update-tlmgr-latest.exe
> that I downloaded fresh today.
> 
> 
> tlpkg/tltcl/tltcl.tcl
> in both places is identical
> same date-time, same files size, same SHA256 signature.  

I mean the installer, which can be downloaded from
http://www.tug.org/texlive/acquire-netinstall.html, not the updater.

-- 
Siep Kroonenberg

From werner at suse.de  Wed Jul  3 11:25:25 2019
From: werner at suse.de (Dr. Werner Fink)
Date: Wed, 3 Jul 2019 11:25:25 +0200
Subject: LuaTeX of TeXLive 2019 does not survive Sphinx tests
Message-ID: <20190703092525.GA31541@boole.suse.de>

Hi,

I've a bug report that luatex from TeXLive 2019 does crash during
Sphinx tests ...

 Package hyperref Warning: old toc file detected, not used; run LaTeX again.

 [1] [2] [1] [2]
 Chapter 1.
 [3] [4]
 Chapter 2.

 warning  (file img.pdf) (pdfe): invalid 13 0 R object at offset 141083
 [5<./img.png><./img1.png><./img.pdf
 warning  (pdfe): invalid 13 0 R object at offset 141083
 >]
 Program received signal SIGSEGV, Segmentation fault.
 0x0000000000527fd8 in ?? ()
 (gdb) bt
 #0  0x0000000000527fd8 in ?? ()
 #1  0x0000000000528a97 in refPdfDocument ()
 #2  0x00000000005293c6 in read_pdf_info ()
 #3  0x000000000044fdc8 in read_img ()
 #4  0x0000000000450c96 in scan_pdfximage ()
 #5  0x000000000049ab37 in do_extension ()
 #6  0x00000000004a2a99 in main_control ()
 #7  0x000000000049f124 in main_body ()
 #8  0x000000000044a9fe in main ()
 (gdb) 

the version of TeXLive 2018 does not show this.  I've requested the used
pdf/png images in the bug report to see what goes on here.

Werner

-- 
  "Having a smoking section in a restaurant is like having
          a peeing section in a swimming pool." -- Edward Burr
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 894 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20190703/8d4adfb3/attachment.sig>

From jfbu at free.fr  Wed Jul  3 13:26:24 2019
From: jfbu at free.fr (jfbu)
Date: Wed, 3 Jul 2019 13:26:24 +0200
Subject: LuaTeX of TeXLive 2019 does not survive Sphinx tests
In-Reply-To: <20190703092525.GA31541@boole.suse.de>
References: <20190703092525.GA31541@boole.suse.de>
Message-ID: <CECF4134-CC94-4C86-B731-274995F72233@free.fr>

Hi,

Le 3 juil. 2019 ? 11:25, Dr. Werner Fink <werner at suse.de> a ?crit :

> Hi,
> 
> I've a bug report that luatex from TeXLive 2019 does crash during
> Sphinx tests ...


Is this https://github.com/sphinx-doc/sphinx or another Sphinx ?

Tests (which include  a lualatex run) currently pass.

Could be another Sphinx... 

Best,

Jean-Fran?ois

> 
> Package hyperref Warning: old toc file detected, not used; run LaTeX again.
> 
> [1] [2] [1] [2]
> Chapter 1.
> [3] [4]
> Chapter 2.
> 
> warning  (file img.pdf) (pdfe): invalid 13 0 R object at offset 141083
> [5<./img.png><./img1.png><./img.pdf
> warning  (pdfe): invalid 13 0 R object at offset 141083
>> ]
> Program received signal SIGSEGV, Segmentation fault.
> 0x0000000000527fd8 in ?? ()
> (gdb) bt
> #0  0x0000000000527fd8 in ?? ()
> #1  0x0000000000528a97 in refPdfDocument ()
> #2  0x00000000005293c6 in read_pdf_info ()
> #3  0x000000000044fdc8 in read_img ()
> #4  0x0000000000450c96 in scan_pdfximage ()
> #5  0x000000000049ab37 in do_extension ()
> #6  0x00000000004a2a99 in main_control ()
> #7  0x000000000049f124 in main_body ()
> #8  0x000000000044a9fe in main ()
> (gdb) 
> 
> the version of TeXLive 2018 does not show this.  I've requested the used
> pdf/png images in the bug report to see what goes on here.
> 
> Werner
> 
> -- 
>  "Having a smoking section in a restaurant is like having
>          a peeing section in a swimming pool." -- Edward Burr



From jfbu at free.fr  Wed Jul  3 13:49:51 2019
From: jfbu at free.fr (jfbu)
Date: Wed, 3 Jul 2019 13:49:51 +0200
Subject: LuaTeX of TeXLive 2019 does not survive Sphinx tests
In-Reply-To: <CECF4134-CC94-4C86-B731-274995F72233@free.fr>
References: <20190703092525.GA31541@boole.suse.de>
 <CECF4134-CC94-4C86-B731-274995F72233@free.fr>
Message-ID: <A5403C5F-813A-4996-956C-EA58B38F7DAA@free.fr>


Le 3 juil. 2019 ? 13:26, jfbu <jfbu at free.fr> a ?crit :

> Hi,
> 
> Le 3 juil. 2019 ? 11:25, Dr. Werner Fink <werner at suse.de> a ?crit :
> 
>> Hi,
>> 
>> I've a bug report that luatex from TeXLive 2019 does crash during
>> Sphinx tests ...
> 
> 
> Is this https://github.com/sphinx-doc/sphinx or another Sphinx ?
> 
> Tests (which include  a lualatex run) currently pass.

I meant the tests done my locale with TeXLive 2019.

The ones done for CI use Ubuntu xenial TeXLive 2015 snapshot of March 2016.
> 
> Could be another Sphinx... 
> 
> Best,
> 
> Jean-Fran?ois
> 
>> 
>> Package hyperref Warning: old toc file detected, not used; run LaTeX again.
>> 
>> [1] [2] [1] [2]
>> Chapter 1.
>> [3] [4]
>> Chapter 2.
>> 
>> warning  (file img.pdf) (pdfe): invalid 13 0 R object at offset 141083
>> [5<./img.png><./img1.png><./img.pdf
>> warning  (pdfe): invalid 13 0 R object at offset 141083
>>> ]
>> Program received signal SIGSEGV, Segmentation fault.
>> 0x0000000000527fd8 in ?? ()
>> (gdb) bt
>> #0  0x0000000000527fd8 in ?? ()
>> #1  0x0000000000528a97 in refPdfDocument ()
>> #2  0x00000000005293c6 in read_pdf_info ()
>> #3  0x000000000044fdc8 in read_img ()
>> #4  0x0000000000450c96 in scan_pdfximage ()
>> #5  0x000000000049ab37 in do_extension ()
>> #6  0x00000000004a2a99 in main_control ()
>> #7  0x000000000049f124 in main_body ()
>> #8  0x000000000044a9fe in main ()
>> (gdb) 
>> 
>> the version of TeXLive 2018 does not show this.  I've requested the used
>> pdf/png images in the bug report to see what goes on here.
>> 
>> Werner
>> 
>> -- 
>> "Having a smoking section in a restaurant is like having
>>         a peeing section in a swimming pool." -- Edward Burr
> 
> 



From werner at suse.de  Wed Jul  3 15:52:38 2019
From: werner at suse.de (Dr. Werner Fink)
Date: Wed, 3 Jul 2019 15:52:38 +0200
Subject: LuaTeX of TeXLive 2019 does not survive Sphinx tests
In-Reply-To: <A5403C5F-813A-4996-956C-EA58B38F7DAA@free.fr>
References: <20190703092525.GA31541@boole.suse.de>
 <CECF4134-CC94-4C86-B731-274995F72233@free.fr>
 <A5403C5F-813A-4996-956C-EA58B38F7DAA@free.fr>
Message-ID: <20190703135238.GA2790@boole.suse.de>

On 2019/07/03 13:49:51 +0200, jfbu wrote:
> 
> Le 3 juil. 2019 ? 13:26, jfbu <jfbu at free.fr> a ?crit :
> 
> > Hi,
> > 
> > Le 3 juil. 2019 ? 11:25, Dr. Werner Fink <werner at suse.de> a ?crit :
> > 
> >> Hi,
> >> 
> >> I've a bug report that luatex from TeXLive 2019 does crash during
> >> Sphinx tests ...
> > 
> > 
> > Is this https://github.com/sphinx-doc/sphinx or another Sphinx ?
> > 
> > Tests (which include  a lualatex run) currently pass.
> 
> I meant the tests done my locale with TeXLive 2019.
> 
> The ones done for CI use Ubuntu xenial TeXLive 2015 snapshot of March 2016.

I've ... after

  rm -rf ~/.cache/texmf/fonts/luatex-cache/
  sudo zypper in texlive-gnu-freefont

reproduced the crash ... I'll investigate.

> > 
> > Could be another Sphinx... 

It's http://sphinx-doc.org/ ... neverthless the crash is in luatex not sphinx


-- 
  "Having a smoking section in a restaurant is like having
          a peeing section in a swimming pool." -- Edward Burr
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 894 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20190703/45382e3c/attachment.sig>

From jfbu at free.fr  Wed Jul  3 18:19:52 2019
From: jfbu at free.fr (jfbu)
Date: Wed, 3 Jul 2019 18:19:52 +0200
Subject: Fwd: LuaTeX of TeXLive 2019 does not survive Sphinx tests
References: <814A9C9C-B55C-4D8F-B40A-D93BF6D017F1@free.fr>
Message-ID: <E56E83E4-9C7C-4724-B05C-E9E73F6B8E23@free.fr>

Forwarding to the list which I forgot to include among recipients

P.-S.: I will probably soon be off internet for a while.

D?but du message r?exp?di? :
> 
> Le 3 juil. 2019 ? 18:04, jfbu <jfbu at free.fr> a ?crit :
> 
>> Hi Werner,
>> 
>> 
>> Le 3 juil. 2019 ? 15:55, Dr. Werner Fink <werner at suse.de> a ?crit :
>> 
>>> On 2019/07/03 13:49:51 +0200, jfbu wrote:
>>>> 
>>>>>> warning  (file img.pdf) (pdfe): invalid 13 0 R object at offset 141083
>>>>>> [5<./img.png><./img1.png><./img.pdf
>>>>>> warning  (pdfe): invalid 13 0 R object at offset 141083
>>>>>>> ]
>>>>>> Program received signal SIGSEGV, Segmentation fault.
>>>>>> 0x0000000000527fd8 in ?? ()
>>>>>> (gdb) bt
>>>>>> #0  0x0000000000527fd8 in ?? ()
>>>>>> #1  0x0000000000528a97 in refPdfDocument ()
>>>>>> #2  0x00000000005293c6 in read_pdf_info ()
>>>>>> #3  0x000000000044fdc8 in read_img ()
>>>>>> #4  0x0000000000450c96 in scan_pdfximage ()
>>>>>> #5  0x000000000049ab37 in do_extension ()
>>>>>> #6  0x00000000004a2a99 in main_control ()
>>>>>> #7  0x000000000049f124 in main_body ()
>>>>>> #8  0x000000000044a9fe in main ()
>>>>>> (gdb) 
>>>>>> 
>>>>>> the version of TeXLive 2018 does not show this.  I've requested the used
>>>>>> pdf/png images in the bug report to see what goes on here.
>>> 
>>> With debuginfo installed I see
>>> 
>>> [3] [4]
>>> Chapter 2.
>>> 
>>> warning  (file img.pdf) (pdfe): invalid 13 0 R object at offset 141083
>>> [5<./img.png><./img1.png><./img.pdf
>>> warning  (pdfe): invalid 13 0 R object at offset 141083
>>>> ]
>>> Program received signal SIGSEGV, Segmentation fault.
>>> findPdfDocument (file_path=file_path at entry=0x1640aa0 "./svgimg.pdf") at ../../../texk/web2c/luatexdir/image/pdftoepdf.c:76
>>> 76          pdf_doc->memstream = NULL;          /* Not initialized in line 1048: deletePdfDocumentPdfDoc() */
>>> (gdb) print pdf_doc
>>> $1 = (PdfDocument *) 0x0
>>> 
>>> ...
>> 
>> 
>> The svgimg.pdf file can be found there:
>> 
>> https://github.com/sphinx-doc/sphinx/tree/master/tests/roots/test-root
>> 
>> here is direct link
>> 
>> https://github.com/sphinx-doc/sphinx/blob/master/tests/roots/test-root/svgimg.pdf
>> 
>> From the above there seems to be already a warning for file img.pdf. It can be found in same test-root directory
>> 
>> direct link:
>> 
>> https://github.com/sphinx-doc/sphinx/blob/master/tests/roots/test-root/img.pdf
> 
> 
> 
> oh sorry, files svgimg.pdf and img.pdf are actually bytewise identical, 
> 
> (why should then there be a segfault related to svgimg.pdf but not the identical file img.pdf ?)
> 
> 
>> 
>> Best,
>> 
>> Jean-Fran?ois



From joseph.wright at morningstar2.co.uk  Wed Jul  3 20:16:36 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Wed, 3 Jul 2019 19:16:36 +0100
Subject: l3backend
Message-ID: <4be1d84a-5b4e-1893-fde0-612ae04a58e8@morningstar2.co.uk>

Hello all,

The split of l3backend from l3kernel means a new dependency should be 
added to the TeX Live database: l3kernel requires l3backend (I assume 
l3packages, l3experimental require l3kernel anyway).

Joseph

From news3 at nililand.de  Wed Jul  3 22:56:00 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Wed, 3 Jul 2019 22:56:00 +0200
Subject: Fwd: LuaTeX of TeXLive 2019 does not survive Sphinx tests
References: <814A9C9C-B55C-4D8F-B40A-D93BF6D017F1@free.fr>
 <E56E83E4-9C7C-4724-B05C-E9E73F6B8E23@free.fr>
Message-ID: <qzeisxplqmp7.dlg@nililand.de>

Am Wed, 3 Jul 2019 18:19:52 +0200 schrieb jfbu:

> [5<./img.png><./img1.png><./img.pdf
>>>> warning  (pdfe): invalid 13 0 R object at offset 141083

>> (why should then there be a segfault related to svgimg.pdf but
>> not the identical file img.pdf ?)

Perhaps because there is img.png included before.

But I won't hunt through the internet to assemble a minimal example
for tests. 

-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From karl at freefriends.org  Wed Jul  3 23:45:31 2019
From: karl at freefriends.org (Karl Berry)
Date: Wed, 3 Jul 2019 15:45:31 -0600
Subject: l3backend
In-Reply-To: <4be1d84a-5b4e-1893-fde0-612ae04a58e8@morningstar2.co.uk>
Message-ID: <201907032145.x63LjVDE023725@freefriends.org>

Hi Joseph,

    l3kernel requires l3backend 

Ok, added.

    (I assume l3packages, l3experimental require l3kernel anyway).

There were no such package-to-package dependencies, so I guess they
haven't been necessary. But I added them just now anyway. --thanks, karl.

From karl at freefriends.org  Wed Jul  3 23:46:29 2019
From: karl at freefriends.org (Karl Berry)
Date: Wed, 3 Jul 2019 15:46:29 -0600
Subject: Fwd: LuaTeX of TeXLive 2019 does not survive Sphinx tests
In-Reply-To: <qzeisxplqmp7.dlg@nililand.de>
Message-ID: <201907032146.x63LkT7O023768@freefriends.org>

    But I won't hunt through the internet to assemble a minimal example
    for tests. 

It doesn't have to be minimal. It just has to be reproducible. -k

From jfbu at free.fr  Thu Jul  4 08:54:46 2019
From: jfbu at free.fr (jfbu)
Date: Thu, 4 Jul 2019 08:54:46 +0200
Subject: LuaTeX of TeXLive 2019 does not survive Sphinx tests
In-Reply-To: <qzeisxplqmp7.dlg@nililand.de>
References: <814A9C9C-B55C-4D8F-B40A-D93BF6D017F1@free.fr>
 <E56E83E4-9C7C-4724-B05C-E9E73F6B8E23@free.fr> <qzeisxplqmp7.dlg@nililand.de>
Message-ID: <377942E7-DA50-4ABD-B156-DDB4468024EB@free.fr>


Le 3 juil. 2019 ? 22:56, Ulrike Fischer <news3 at nililand.de> a ?crit :

> But I won't hunt through the internet to assemble a minimal example
> for tests. 

The OpenSuse ticket: 

https://bugzilla.suse.com/show_bug.cgi?id=1140203

OP has added there an archive of the Sphinx test, and the latex files are in _build/latex/

As I said I have no such issue at my locale.

I tested with current Sphinx master tip but the sphinxtests.tex file submitted to lualatex is quasi-identical with the one from the attachements to the OpenSuse ticket (I don't know which version of Sphinx the latter used).

The sole real difference is that my file has an added graphics inclusion which I comment out here

> \chapter{Sphinx image handling}
> \label{\detokenize{images:sphinx-image-handling}}\label{\detokenize{images::doc}}
> \noindent\sphinxincludegraphics{{img}.png}
> 
> \noindent\sphinxincludegraphics[width=200\sphinxpxdimen,height=100\sphinxpxdimen]{{img1}.png}
> 
> \noindent\sphinxincludegraphics{{img}.pdf}
> 
> %%%%% \noindent\sphinxincludegraphics{{python-logo}.png} %%%% <<<---- this line not in the Suse report (I don't know which Sphinx it uses)
> 
> \noindent\sphinxincludegraphics{{simg}.png}
> 
> \noindent\sphinxincludegraphics{{svgimg}.pdf}
> 
> \noindent\sphinxincludegraphics{{img.foo}.png}
> 


The \sphinxincludegraphics is a macro wrapper of \includegraphics (which tests the image dimensions and adjust them to avoid flowing into margins, or worse, endless loop in some contexts (framed.sty)).

The first step would be for people with an OpenSuse distro to simply try a LaTeX file such as this one.

I am not making it minimal because I can't reproduce the issue anyhow.

\RequirePackage{luatex85}
\documentclass[letterpaper,10pt]{report}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\usepackage{graphicx}
\begin{document}
\chapter{Images}
\noindent\includegraphics{{img}.png}

\noindent\includegraphics[width=200\sphinxpxdimen,height=100\sphinxpxdimen]{{img1}.png}

\noindent\includegraphics{{img}.pdf}

\noindent\includegraphics{{simg}.png}

\noindent\includegraphics{{svgimg}.pdf}

\noindent\includegraphics{{img.foo}.png}
\end{document}

The pdf  and png files are included in the OpenSuse ticket or available at the github repo I indicated previously.

Jean-Fran?ois





From jfbu at free.fr  Thu Jul  4 10:16:03 2019
From: jfbu at free.fr (jfbu)
Date: Thu, 4 Jul 2019 10:16:03 +0200
Subject: LuaTeX of TeXLive 2019 does not survive Sphinx tests
In-Reply-To: <377942E7-DA50-4ABD-B156-DDB4468024EB@free.fr>
References: <814A9C9C-B55C-4D8F-B40A-D93BF6D017F1@free.fr>
 <E56E83E4-9C7C-4724-B05C-E9E73F6B8E23@free.fr> <qzeisxplqmp7.dlg@nililand.de>
 <377942E7-DA50-4ABD-B156-DDB4468024EB@free.fr>
Message-ID: <46ED4F43-CC1B-4502-9371-3FCD2CA96085@free.fr>


Le 4 juil. 2019 ? 08:54, jfbu <jfbu at free.fr> a ?crit :

> 
> Le 3 juil. 2019 ? 22:56, Ulrike Fischer <news3 at nililand.de> a ?crit :
> 
>> But I won't hunt through the internet to assemble a minimal example
>> for tests. 
> 
> The OpenSuse ticket: 
> 
> https://bugzilla.suse.com/show_bug.cgi?id=1140203
> 
> OP has added there an archive of the Sphinx test, and the latex files are in _build/latex/
> 
> As I said I have no such issue at my locale.
> 
> I tested with current Sphinx master tip but the sphinxtests.tex file submitted to lualatex is quasi-identical with the one from the attachements to the OpenSuse ticket (I don't know which version of Sphinx the latter used).
> 
> The sole real difference is that my file has an added graphics inclusion which I comment out here
> 
>> \chapter{Sphinx image handling}
>> \label{\detokenize{images:sphinx-image-handling}}\label{\detokenize{images::doc}}
>> \noindent\sphinxincludegraphics{{img}.png}
>> 
>> \noindent\sphinxincludegraphics[width=200\sphinxpxdimen,height=100\sphinxpxdimen]{{img1}.png}
>> 
>> \noindent\sphinxincludegraphics{{img}.pdf}
>> 
>> %%%%% \noindent\sphinxincludegraphics{{python-logo}.png} %%%% <<<---- this line not in the Suse report (I don't know which Sphinx it uses)
>> 
>> \noindent\sphinxincludegraphics{{simg}.png}
>> 
>> \noindent\sphinxincludegraphics{{svgimg}.pdf}
>> 
>> \noindent\sphinxincludegraphics{{img.foo}.png}
>> 
> 
> 
> The \sphinxincludegraphics is a macro wrapper of \includegraphics (which tests the image dimensions and adjust them to avoid flowing into margins, or worse, endless loop in some contexts (framed.sty)).
> 
> The first step would be for people with an OpenSuse distro to simply try a LaTeX file such as this one.
> 
> I am not making it minimal because I can't reproduce the issue anyhow.
> 
> \RequirePackage{luatex85}
> \documentclass[letterpaper,10pt]{report}
> \ifdefined\pdfpxdimen
>   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
> \fi \sphinxpxdimen=.75bp\relax
> 
> \usepackage{graphicx}

  \usepackage[%
     hmargin=1in,%
     vmargin=1in,%
     marginpar=.5in]{geometry}



> \begin{document}
> \chapter{Images}
> \noindent\includegraphics{{img}.png}
> 
> \noindent\includegraphics[width=200\sphinxpxdimen,height=100\sphinxpxdimen]{{img1}.png}
> 
> \noindent\includegraphics{{img}.pdf}
> 
> \noindent\includegraphics{{simg}.png}
> 
> \noindent\includegraphics{{svgimg}.pdf}
> 
> \noindent\includegraphics{{img.foo}.png}
> \end{document}
> 
> The pdf  and png files are included in the OpenSuse ticket or available at the github repo I indicated previously.
> 
> Jean-Fran?ois
> 
> 
> 
> 



From rvoland at tds.net  Thu Jul  4 11:50:12 2019
From: rvoland at tds.net (Rick Voland)
Date: Thu, 4 Jul 2019 05:50:12 -0400 (EDT)
Subject: cannot update TeXlive, nor use LaTeX
In-Reply-To: <20190703072318.GA1103@bitmuis.nl>
References: <1843272174.3859248.1562028324308.JavaMail.zimbra@tds.net>
 <1061173070.3921553.1562029284546.JavaMail.zimbra@tds.net>
 <20190702093929.GB1678@bitmuis.nl>
 <20190702135345.wq3es4mtk7ujduea@burischnitzel.preining.info>
 <1555485667.8749986.1562111114670.JavaMail.zimbra@tds.net>
 <20190703072318.GA1103@bitmuis.nl>
Message-ID: <526620425.17559172.1562233812428.JavaMail.zimbra@tds.net>

I understand thanks, but then TeX Live Manager GUI completely refused to start (never came up at all when I clicked on the icon).  I tried completely uninstalling my antivirus, but no change.  So, I completely uninstalled TeXlive 2019, deleted the 2019 directory completely, and did a fresh install from the same DVD I used to install when TeXlive 2019 was released a few months ago.

The fresh install went fine.  TeX Live Manager GUI started just fine.  I used TeX Live Manager GUI to install all the updates.  First, I twice had to run 
tlmgr update --self
from a windows command line and all went fine.  Then, I used TeX Live Manager GUI to install all the latest package updates.  That went fine except that I no longer have icons for TeX Live Manager GUI.  I thought there used to be a 
tlmgr.exe   
in the bin/win32 directory.  I still have a 
tlmgr.bat


Now, I can run TeXworks to process documents, but I have no TeX Live Manager to do updates.

I'm running Windows 7.  

Thanks for any suggestions.

Rick







----- Original Message -----
From: "Siep Kroonenberg" <siepo at bitmuis.nl>
To: tex-live at tug.org
Sent: Wednesday, July 3, 2019 2:23:19 AM
Subject: Re: cannot update TeXlive, nor use LaTeX

On Tue, Jul 02, 2019 at 07:45:14PM -0400, Rick Voland wrote:
> 
> I compared 
> tlpkg/tltcl/tltcl.tcl
> in my computer
> with what is in 
> update-tlmgr-latest.exe
> that I downloaded fresh today.
> 
> 
> tlpkg/tltcl/tltcl.tcl
> in both places is identical
> same date-time, same files size, same SHA256 signature.  

I mean the installer, which can be downloaded from
http://www.tug.org/texlive/acquire-netinstall.html, not the updater.

-- 
Siep Kroonenberg

From siepo at bitmuis.nl  Thu Jul  4 20:54:41 2019
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Thu, 4 Jul 2019 20:54:41 +0200
Subject: cannot update TeXlive, nor use LaTeX
In-Reply-To: <526620425.17559172.1562233812428.JavaMail.zimbra@tds.net>
References: <1843272174.3859248.1562028324308.JavaMail.zimbra@tds.net>
 <1061173070.3921553.1562029284546.JavaMail.zimbra@tds.net>
 <20190702093929.GB1678@bitmuis.nl>
 <20190702135345.wq3es4mtk7ujduea@burischnitzel.preining.info>
 <1555485667.8749986.1562111114670.JavaMail.zimbra@tds.net>
 <20190703072318.GA1103@bitmuis.nl>
 <526620425.17559172.1562233812428.JavaMail.zimbra@tds.net>
Message-ID: <20190704185441.GA8150@bitmuis.nl>

On Thu, Jul 04, 2019 at 05:50:12AM -0400, Rick Voland wrote:
> I understand thanks, but then TeX Live Manager GUI completely refused to start (never came up at all when I clicked on the icon).  I tried completely uninstalling my antivirus, but no change.  So, I completely uninstalled TeXlive 2019, deleted the 2019 directory completely, and did a fresh install from the same DVD I used to install when TeXlive 2019 was released a few months ago.
> 
> The fresh install went fine.  TeX Live Manager GUI started just fine.  I used TeX Live Manager GUI to install all the updates.  First, I twice had to run 
> tlmgr update --self
> from a windows command line and all went fine.  Then, I used TeX Live Manager GUI to install all the latest package updates.  That went fine except that I no longer have icons for TeX Live Manager GUI.  I thought there used to be a 
> tlmgr.exe   
> in the bin/win32 directory.  I still have a 
> tlmgr.bat
> 
> 
> Now, I can run TeXworks to process documents, but I have no TeX Live Manager to do updates.
> 
> I'm running Windows 7.  

We needed to do some repackagingi in connection with your original
problem. However, there were some bumps in the road. Hopefully, this
will be sorted out in a few days. Meanwhile, the command-line
version of tlmgr should be unaffected.

Sorry.

-- 
Siep Kroonenberg

From alan at alphabyte.co.nz  Thu Jul  4 22:35:08 2019
From: alan at alphabyte.co.nz (Alan Litchfield)
Date: Fri, 5 Jul 2019 08:35:08 +1200
Subject: md5sum errors on update
Message-ID: <83110EE7-3030-497A-B203-048E9CAED85D@alphabyte.co.nz>

Hi,

First, my apologies for the cross post. I know several people subscribe to the lists.

It is a rare occasion that I have had any issues with TeXLive over the years, but this is one. Last evening I ran an update using tlmgr and received the following errors (I have edited the log to remove the successful transactions). They all seem to relate to checksums.

It appears that TeXLive is returned to a stable state each time the error has occurred (it is not fatal). I am not certain if this is an issue with TeXLive or the package maintainers (whoever they are).


wt703a-746lsm:~ alitchfi$ sudo tlmgr update -all
tlmgr: package repository http://mirror.aut.ac.nz/CTAN/systems/texlive/tlnet (not verified: gpg unavailable)
tlmgr: saving backups to /usr/local/texlive/2019/tlpkg/backups

[snipped]

[232/339, 17:35/21:46] update: songs [1252k] (44553 -> 51494) ... TLUtils::check_file: removing /tmp/PQg494bFwH/tjkKGb99KV/songs.source.tar.xz, checksums differ:
TLUtils::check_file:   TL=cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e, arg=016d389033589ab9334180edf70321858ba3b6000d8f560a18631e13ef28130f4b39aed81f7ddf0a178540a463789955d14620b37b7979ac0ea6abeec77d29bd
TLPDB::_install_package: downloading did not succeed
tlmgr: Installation of new version of songs failed, trying to unwind.
tlmgr: Restoring old package state succeeded.
done

[snipped]

[257/339, 01:12:18/01:24:12] update: tudscr [4087k] (44480 -> 51500) ... TLUtils::check_file: removing /tmp/PQg494bFwH/mNNpr0sUzp/tudscr.doc.tar.xz, checksums differ:
TLUtils::check_file:   TL=efb84557af855b49f11b053f0d09c36f7e3d0a1e3ae1d11da373217adc874db5d0a3e855a554795c6a5d45b6fa31fd84811825fe56582dd4154ac66d337dfe1e, arg=8cdde6d4971c663a100c8c3af1155d98c05ab32471fff24ea592f99792113d6108ddec160ee6e2681b4faaa1e3019d696fe31e51916c3f76649f28633f59df30
TLPDB::_install_package: downloading did not succeed
tlmgr: Installation of new version of tudscr failed, trying to unwind.
tlmgr: Restoring old package state succeeded.
done

[snipped]

[269/339, 02:06:19/02:21:18] update: xepersian [1095k] (50213 -> 50911) ... TLUtils::check_file: removing /tmp/PQg494bFwH/wziFkQq2Ua/xepersian.doc.tar.xz, checksums differ:
TLUtils::check_file:   TL=2a53771f64f92114e69379d6f7fd3c3b95744ef78af16f088fbdc4b252beebf84d802d61c0872397b95e36f43dd0ce44ac4d436171e922e9ae28cdf1589a1031, arg=ae6c252024b947c9d4cb1192ca61e55aac9bac10c0c737a29794cca2d291f90d6cc56c8e52bb338b2f6f0d27d2bb335adff38d0d792aab8a6d76e1ff11344611
TLPDB::_install_package: downloading did not succeed
tlmgr: Installation of new version of xepersian failed, trying to unwind.
tlmgr: Restoring old package state succeeded.
done

[snipped]

[278/339, 02:22:14/02:37:54] auto-install: addliga (50912) [19k] ... TLUtils::check_file: removing /tmp/PQg494bFwH/1vCPl8i16R/addliga.doc.tar.xz, checksums differ:
TLUtils::check_file:   TL=cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e, arg=572d9aa1396ac80be2cd9ab0bd317759805a6541b656e19ae36915a6277f9a4ff2987c84dbf903133e0a5027f382b0ed48fc882ce7a79df7a27cfe3082d2a666
TLPDB::_install_package: downloading did not succeed
tlmgr: couldn't install new package addliga

[snipped]

tlmgr: action update returned an error; continuing.
running mktexlsr ...
done running mktexlsr.
running mtxrun --generate ...
done running mtxrun --generate.
running updmap-sys ...
done running updmap-sys.
regenerating language.dat
regenerating language.def
regenerating language.dat.lua
regenerating fmtutil.cnf in /usr/local/texlive/2019/texmf-dist
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine luajittex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine luajittex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine luatex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine luatex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine uptex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine uptex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine xetex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine xetex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine euptex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine euptex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine eptex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine eptex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine ptex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine ptex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine tex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine tex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine aleph ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine aleph.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine pdftex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine pdftex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.dat" ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.dat".
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.def" ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.def".
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.dat.lua" ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.dat.lua".
tlmgr: package log updated: /usr/local/texlive/2019/texmf-var/web2c/tlmgr.log
tlmgr: An error has occurred. See above messages. Exiting.

Cheers
Alan
--
Dr Alan Litchfield
AlphaByte
PO Box 1941
Auckland, New Zealand 1140

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190705/0d67832a/attachment.html>

From alan at alphabyte.co.nz  Thu Jul  4 22:46:45 2019
From: alan at alphabyte.co.nz (Alan Litchfield)
Date: Fri, 5 Jul 2019 08:46:45 +1200
Subject: md5sum errors on update
In-Reply-To: <83110EE7-3030-497A-B203-048E9CAED85D@alphabyte.co.nz>
References: <83110EE7-3030-497A-B203-048E9CAED85D@alphabyte.co.nz>
Message-ID: <00FD5161-8302-41E4-A205-1C659862C1FB@alphabyte.co.nz>

PS

Running tlmgr again this morning returned the following:
wt703a-746lsm:~ alitchfi$ sudo tlmgr update -all
tlmgr: package repository http://mirror.aut.ac.nz/CTAN/systems/texlive/tlnet (not verified: gpg unavailable)
tlmgr: saving backups to /usr/local/texlive/2019/tlpkg/backups
skipping forcibly removed package addliga
[ 1/12, ??:??/??:??] update: beebe [634k] (51168 -> 51544) ... done
[ 2/12, 00:03/01:49] update: l3experimental [3865k] (51534 -> 51546) ... done
[ 3/12, 00:08/00:41] update: l3kernel [8426k] (51534 -> 51546) ... done
[ 4/12, 00:16/00:28] update: l3packages [1798k] (51248 -> 51546) ... done
[ 5/12, 00:19/00:29] update: mathcommand [450k] (51105 -> 51542) ... done
[ 6/12, 00:21/00:31] update: songs [1252k] (44553 -> 51494) ... done
[ 7/12, 00:25/00:35] update: tablvar [188k] (50949 -> 51543) ... done
[ 8/12, 00:30/00:41] update: tex4ht [911k] (51442 -> 51547) ... done
[ 9/12, 00:36/00:47] update: texlive-docindex [257k] (51527 -> 51541) ... done
[10/12, 00:38/00:49] update: texlive-scripts [133k] (51527 -> 51541) ... done
[11/12, 00:41/00:52] update: tudscr [4087k] (44480 -> 51500) ... done
[12/12, 00:47/00:49] update: xepersian [1095k] (50213 -> 50911) ... done
running mktexlsr ...
done running mktexlsr.
running mtxrun --generate ...
done running mtxrun --generate.
tlmgr: package log updated: /usr/local/texlive/2019/texmf-var/web2c/tlmgr.log

So the songs, tudscr, and xepersian packages updated, but addliga did not.

Regards
Alan
--
Dr Alan Litchfield
AlphaByte
PO Box 1941
Auckland, New Zealand 1140

> On 5/07/2019, at 08:35, Alan Litchfield <alan at alphabyte.co.nz> wrote:
> 
> Hi,
> 
> First, my apologies for the cross post. I know several people subscribe to the lists.
> 
> It is a rare occasion that I have had any issues with TeXLive over the years, but this is one. Last evening I ran an update using tlmgr and received the following errors (I have edited the log to remove the successful transactions). They all seem to relate to checksums.
> 
> It appears that TeXLive is returned to a stable state each time the error has occurred (it is not fatal). I am not certain if this is an issue with TeXLive or the package maintainers (whoever they are).
> 
> 
> wt703a-746lsm:~ alitchfi$ sudo tlmgr update -all
> tlmgr: package repository http://mirror.aut.ac.nz/CTAN/systems/texlive/tlnet <http://mirror.aut.ac.nz/CTAN/systems/texlive/tlnet> (not verified: gpg unavailable)
> tlmgr: saving backups to /usr/local/texlive/2019/tlpkg/backups
> 
> [snipped]
> 
> [232/339, 17:35/21:46] update: songs [1252k] (44553 -> 51494) ... TLUtils::check_file: removing /tmp/PQg494bFwH/tjkKGb99KV/songs.source.tar.xz, checksums differ:
> TLUtils::check_file:   TL=cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e, arg=016d389033589ab9334180edf70321858ba3b6000d8f560a18631e13ef28130f4b39aed81f7ddf0a178540a463789955d14620b37b7979ac0ea6abeec77d29bd
> TLPDB::_install_package: downloading did not succeed
> tlmgr: Installation of new version of songs failed, trying to unwind.
> tlmgr: Restoring old package state succeeded.
> done
> 
> [snipped]
> 
> [257/339, 01:12:18/01:24:12] update: tudscr [4087k] (44480 -> 51500) ... TLUtils::check_file: removing /tmp/PQg494bFwH/mNNpr0sUzp/tudscr.doc.tar.xz, checksums differ:
> TLUtils::check_file:   TL=efb84557af855b49f11b053f0d09c36f7e3d0a1e3ae1d11da373217adc874db5d0a3e855a554795c6a5d45b6fa31fd84811825fe56582dd4154ac66d337dfe1e, arg=8cdde6d4971c663a100c8c3af1155d98c05ab32471fff24ea592f99792113d6108ddec160ee6e2681b4faaa1e3019d696fe31e51916c3f76649f28633f59df30
> TLPDB::_install_package: downloading did not succeed
> tlmgr: Installation of new version of tudscr failed, trying to unwind.
> tlmgr: Restoring old package state succeeded.
> done
> 
> [snipped]
> 
> [269/339, 02:06:19/02:21:18] update: xepersian [1095k] (50213 -> 50911) ... TLUtils::check_file: removing /tmp/PQg494bFwH/wziFkQq2Ua/xepersian.doc.tar.xz, checksums differ:
> TLUtils::check_file:   TL=2a53771f64f92114e69379d6f7fd3c3b95744ef78af16f088fbdc4b252beebf84d802d61c0872397b95e36f43dd0ce44ac4d436171e922e9ae28cdf1589a1031, arg=ae6c252024b947c9d4cb1192ca61e55aac9bac10c0c737a29794cca2d291f90d6cc56c8e52bb338b2f6f0d27d2bb335adff38d0d792aab8a6d76e1ff11344611
> TLPDB::_install_package: downloading did not succeed
> tlmgr: Installation of new version of xepersian failed, trying to unwind.
> tlmgr: Restoring old package state succeeded.
> done
> 
> [snipped]
> 
> [278/339, 02:22:14/02:37:54] auto-install: addliga (50912) [19k] ... TLUtils::check_file: removing /tmp/PQg494bFwH/1vCPl8i16R/addliga.doc.tar.xz, checksums differ:
> TLUtils::check_file:   TL=cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e, arg=572d9aa1396ac80be2cd9ab0bd317759805a6541b656e19ae36915a6277f9a4ff2987c84dbf903133e0a5027f382b0ed48fc882ce7a79df7a27cfe3082d2a666
> TLPDB::_install_package: downloading did not succeed
> tlmgr: couldn't install new package addliga
> 
> [snipped]
> 
> tlmgr: action update returned an error; continuing.
> running mktexlsr ...
> done running mktexlsr.
> running mtxrun --generate ...
> done running mtxrun --generate.
> running updmap-sys ...
> done running updmap-sys.
> regenerating language.dat
> regenerating language.def
> regenerating language.dat.lua
> regenerating fmtutil.cnf in /usr/local/texlive/2019/texmf-dist
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine luajittex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine luajittex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine luatex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine luatex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine uptex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine uptex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine xetex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine xetex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine euptex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine euptex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine eptex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine eptex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine ptex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine ptex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine tex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine tex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine aleph ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine aleph.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine pdftex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine pdftex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.dat" ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.dat".
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.def" ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.def".
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.dat.lua" ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.dat.lua".
> tlmgr: package log updated: /usr/local/texlive/2019/texmf-var/web2c/tlmgr.log
> tlmgr: An error has occurred. See above messages. Exiting.
> 
> Cheers
> Alan
> --
> Dr Alan Litchfield
> AlphaByte
> PO Box 1941
> Auckland, New Zealand 1140
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190705/218ad3f8/attachment-0001.html>

From rokicki at gmail.com  Thu Jul  4 23:05:58 2019
From: rokicki at gmail.com (Tomas Rokicki)
Date: Thu, 4 Jul 2019 14:05:58 -0700
Subject: md5sum errors on update
In-Reply-To: <00FD5161-8302-41E4-A205-1C659862C1FB@alphabyte.co.nz>
References: <83110EE7-3030-497A-B203-048E9CAED85D@alphabyte.co.nz>
 <00FD5161-8302-41E4-A205-1C659862C1FB@alphabyte.co.nz>
Message-ID: <CAGia-=UABVQ0Q3LCJLrni_EcOidgmJB27wou14R+f5pjX2iyow@mail.gmail.com>

Right now PGP is under attack, and this is probably what's causing your
problem.

https://www.vice.com/en_us/article/8xzj45/someone-is-spamming-and-breaking-a-core-component-of-pgps-ecosystem

-tom

On Thu, Jul 4, 2019 at 1:49 PM Alan Litchfield <alan at alphabyte.co.nz> wrote:

> PS
>
> Running tlmgr again this morning returned the following:
> wt703a-746lsm:~ alitchfi$ sudo tlmgr update -all
> tlmgr: package repository
> http://mirror.aut.ac.nz/CTAN/systems/texlive/tlnet (not verified: gpg
> unavailable)
> tlmgr: saving backups to /usr/local/texlive/2019/tlpkg/backups
> skipping forcibly removed package addliga
> [ 1/12, ??:??/??:??] update: beebe [634k] (51168 -> 51544) ... done
> [ 2/12, 00:03/01:49] update: l3experimental [3865k] (51534 -> 51546) ...
> done
> [ 3/12, 00:08/00:41] update: l3kernel [8426k] (51534 -> 51546) ... done
> [ 4/12, 00:16/00:28] update: l3packages [1798k] (51248 -> 51546) ... done
> [ 5/12, 00:19/00:29] update: mathcommand [450k] (51105 -> 51542) ... done
> [ 6/12, 00:21/00:31] update: songs [1252k] (44553 -> 51494) ... done
> [ 7/12, 00:25/00:35] update: tablvar [188k] (50949 -> 51543) ... done
> [ 8/12, 00:30/00:41] update: tex4ht [911k] (51442 -> 51547) ... done
> [ 9/12, 00:36/00:47] update: texlive-docindex [257k] (51527 -> 51541) ...
> done
> [10/12, 00:38/00:49] update: texlive-scripts [133k] (51527 -> 51541) ...
> done
> [11/12, 00:41/00:52] update: tudscr [4087k] (44480 -> 51500) ... done
> [12/12, 00:47/00:49] update: xepersian [1095k] (50213 -> 50911) ... done
> running mktexlsr ...
> done running mktexlsr.
> running mtxrun --generate ...
> done running mtxrun --generate.
> tlmgr: package log updated:
> /usr/local/texlive/2019/texmf-var/web2c/tlmgr.log
>
> So the songs, tudscr, and xepersian packages updated, but addliga did not.
>
> Regards
> Alan
> --
> Dr Alan Litchfield
> AlphaByte
> PO Box 1941
> Auckland, New Zealand 1140
>
> On 5/07/2019, at 08:35, Alan Litchfield <alan at alphabyte.co.nz> wrote:
>
> Hi,
>
> First, my apologies for the cross post. I know several people subscribe to
> the lists.
>
> It is a rare occasion that I have had any issues with TeXLive over the
> years, but this is one. Last evening I ran an update using tlmgr and
> received the following errors (I have edited the log to remove the
> successful transactions). They all seem to relate to checksums.
>
> It appears that TeXLive is returned to a stable state each time the error
> has occurred (it is not fatal). I am not certain if this is an issue with
> TeXLive or the package maintainers (whoever they are).
>
>
> wt703a-746lsm:~ alitchfi$ sudo tlmgr update -all
> tlmgr: package repository
> http://mirror.aut.ac.nz/CTAN/systems/texlive/tlnet (not verified: gpg
> unavailable)
> tlmgr: saving backups to /usr/local/texlive/2019/tlpkg/backups
>
> [snipped]
>
> [232/339, 17:35/21:46] update: songs [1252k] (44553 -> 51494) ...
> TLUtils::check_file: removing
> /tmp/PQg494bFwH/tjkKGb99KV/songs.source.tar.xz, checksums differ:
> TLUtils::check_file:
> TL=cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e,
> arg=016d389033589ab9334180edf70321858ba3b6000d8f560a18631e13ef28130f4b39aed81f7ddf0a178540a463789955d14620b37b7979ac0ea6abeec77d29bd
> TLPDB::_install_package: downloading did not succeed
> tlmgr: Installation of new version of songs failed, trying to unwind.
> tlmgr: Restoring old package state succeeded.
> done
>
> [snipped]
>
> [257/339, 01:12:18/01:24:12] update: tudscr [4087k] (44480 -> 51500) ...
> TLUtils::check_file: removing /tmp/PQg494bFwH/mNNpr0sUzp/tudscr.doc.tar.xz,
> checksums differ:
> TLUtils::check_file:
> TL=efb84557af855b49f11b053f0d09c36f7e3d0a1e3ae1d11da373217adc874db5d0a3e855a554795c6a5d45b6fa31fd84811825fe56582dd4154ac66d337dfe1e,
> arg=8cdde6d4971c663a100c8c3af1155d98c05ab32471fff24ea592f99792113d6108ddec160ee6e2681b4faaa1e3019d696fe31e51916c3f76649f28633f59df30
> TLPDB::_install_package: downloading did not succeed
> tlmgr: Installation of new version of tudscr failed, trying to unwind.
> tlmgr: Restoring old package state succeeded.
> done
>
> [snipped]
>
> [269/339, 02:06:19/02:21:18] update: xepersian [1095k] (50213 -> 50911)
> ... TLUtils::check_file: removing
> /tmp/PQg494bFwH/wziFkQq2Ua/xepersian.doc.tar.xz, checksums differ:
> TLUtils::check_file:
> TL=2a53771f64f92114e69379d6f7fd3c3b95744ef78af16f088fbdc4b252beebf84d802d61c0872397b95e36f43dd0ce44ac4d436171e922e9ae28cdf1589a1031,
> arg=ae6c252024b947c9d4cb1192ca61e55aac9bac10c0c737a29794cca2d291f90d6cc56c8e52bb338b2f6f0d27d2bb335adff38d0d792aab8a6d76e1ff11344611
> TLPDB::_install_package: downloading did not succeed
> tlmgr: Installation of new version of xepersian failed, trying to unwind.
> tlmgr: Restoring old package state succeeded.
> done
>
> [snipped]
>
> [278/339, 02:22:14/02:37:54] auto-install: addliga (50912) [19k] ...
> TLUtils::check_file: removing
> /tmp/PQg494bFwH/1vCPl8i16R/addliga.doc.tar.xz, checksums differ:
> TLUtils::check_file:
> TL=cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e,
> arg=572d9aa1396ac80be2cd9ab0bd317759805a6541b656e19ae36915a6277f9a4ff2987c84dbf903133e0a5027f382b0ed48fc882ce7a79df7a27cfe3082d2a666
> TLPDB::_install_package: downloading did not succeed
> tlmgr: couldn't install new package addliga
>
> [snipped]
>
> tlmgr: action update returned an error; continuing.
> running mktexlsr ...
> done running mktexlsr.
> running mtxrun --generate ...
> done running mtxrun --generate.
> running updmap-sys ...
> done running updmap-sys.
> regenerating language.dat
> regenerating language.def
> regenerating language.dat.lua
> regenerating fmtutil.cnf in /usr/local/texlive/2019/texmf-dist
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine luajittex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine luajittex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine luatex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine luatex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine uptex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine uptex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine xetex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine xetex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine euptex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine euptex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine eptex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine eptex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine ptex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine ptex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine tex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine tex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine aleph ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine aleph.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine pdftex ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --no-error-if-no-format --byengine pdftex.
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen
> "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.dat" ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --byhyphen
> "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.dat".
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen
> "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.def" ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --byhyphen
> "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.def".
> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen
> "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.dat.lua" ...
> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit
> --byhyphen
> "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.dat.lua".
> tlmgr: package log updated:
> /usr/local/texlive/2019/texmf-var/web2c/tlmgr.log
> tlmgr: An error has occurred. See above messages. Exiting.
>
> Cheers
> Alan
> --
> Dr Alan Litchfield
> AlphaByte
> PO Box 1941
> Auckland, New Zealand 1140
>
>
>

-- 
--  http://cube20.org/  --  http://golly.sf.net/  --
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190704/d64cd838/attachment.html>

From rvoland at tds.net  Thu Jul  4 23:06:38 2019
From: rvoland at tds.net (Rick Voland)
Date: Thu, 4 Jul 2019 17:06:38 -0400 (EDT)
Subject: cannot update TeXlive, nor use LaTeX
In-Reply-To: <20190704185441.GA8150@bitmuis.nl>
References: <1843272174.3859248.1562028324308.JavaMail.zimbra@tds.net>
 <1061173070.3921553.1562029284546.JavaMail.zimbra@tds.net>
 <20190702093929.GB1678@bitmuis.nl>
 <20190702135345.wq3es4mtk7ujduea@burischnitzel.preining.info>
 <1555485667.8749986.1562111114670.JavaMail.zimbra@tds.net>
 <20190703072318.GA1103@bitmuis.nl>
 <526620425.17559172.1562233812428.JavaMail.zimbra@tds.net>
 <20190704185441.GA8150@bitmuis.nl>
Message-ID: <1921319480.20396269.1562274398573.JavaMail.zimbra@tds.net>

Hello and thanks much.  Your message is helpful.

I now can prepare letters and documents.  I can work on the other problems later--I'll watch this list.

Thanks for your help.

Rick





----- Original Message -----
From: "Siep Kroonenberg" <siepo at bitmuis.nl>
To: tex-live at tug.org
Sent: Thursday, July 4, 2019 1:54:41 PM
Subject: Re: cannot update TeXlive, nor use LaTeX

On Thu, Jul 04, 2019 at 05:50:12AM -0400, Rick Voland wrote:
> I understand thanks, but then TeX Live Manager GUI completely refused to start (never came up at all when I clicked on the icon).  I tried completely uninstalling my antivirus, but no change.  So, I completely uninstalled TeXlive 2019, deleted the 2019 directory completely, and did a fresh install from the same DVD I used to install when TeXlive 2019 was released a few months ago.
> 
> The fresh install went fine.  TeX Live Manager GUI started just fine.  I used TeX Live Manager GUI to install all the updates.  First, I twice had to run 
> tlmgr update --self
> from a windows command line and all went fine.  Then, I used TeX Live Manager GUI to install all the latest package updates.  That went fine except that I no longer have icons for TeX Live Manager GUI.  I thought there used to be a 
> tlmgr.exe   
> in the bin/win32 directory.  I still have a 
> tlmgr.bat
> 
> 
> Now, I can run TeXworks to process documents, but I have no TeX Live Manager to do updates.
> 
> I'm running Windows 7.  

We needed to do some repackagingi in connection with your original
problem. However, there were some bumps in the road. Hopefully, this
will be sorted out in a few days. Meanwhile, the command-line
version of tlmgr should be unaffected.

Sorry.

-- 
Siep Kroonenberg

From alan at alphabyte.co.nz  Thu Jul  4 23:11:45 2019
From: alan at alphabyte.co.nz (Alan Litchfield)
Date: Fri, 5 Jul 2019 09:11:45 +1200
Subject: md5sum errors on update
In-Reply-To: <CAGia-=UABVQ0Q3LCJLrni_EcOidgmJB27wou14R+f5pjX2iyow@mail.gmail.com>
References: <83110EE7-3030-497A-B203-048E9CAED85D@alphabyte.co.nz>
 <00FD5161-8302-41E4-A205-1C659862C1FB@alphabyte.co.nz>
 <CAGia-=UABVQ0Q3LCJLrni_EcOidgmJB27wou14R+f5pjX2iyow@mail.gmail.com>
Message-ID: <10ECA949-E5BF-4EE9-AA2E-900320BF9DEA@alphabyte.co.nz>

Thank you Tomas.

I was not aware of that. You may be right, and it may be why the update succeeded second time around.

Regards
Alan
--
Dr Alan Litchfield
AlphaByte
PO Box 1941
Auckland, New Zealand 1140

> On 5/07/2019, at 09:05, Tomas Rokicki <rokicki at gmail.com> wrote:
> 
> Right now PGP is under attack, and this is probably what's causing your
> problem.
> 
> https://www.vice.com/en_us/article/8xzj45/someone-is-spamming-and-breaking-a-core-component-of-pgps-ecosystem <https://www.vice.com/en_us/article/8xzj45/someone-is-spamming-and-breaking-a-core-component-of-pgps-ecosystem>
> 
> -tom
> 
> On Thu, Jul 4, 2019 at 1:49 PM Alan Litchfield <alan at alphabyte.co.nz <mailto:alan at alphabyte.co.nz>> wrote:
> PS
> 
> Running tlmgr again this morning returned the following:
> wt703a-746lsm:~ alitchfi$ sudo tlmgr update -all
> tlmgr: package repository http://mirror.aut.ac.nz/CTAN/systems/texlive/tlnet <http://mirror.aut.ac.nz/CTAN/systems/texlive/tlnet> (not verified: gpg unavailable)
> tlmgr: saving backups to /usr/local/texlive/2019/tlpkg/backups
> skipping forcibly removed package addliga
> [ 1/12, ??:??/??:??] update: beebe [634k] (51168 -> 51544) ... done
> [ 2/12, 00:03/01:49] update: l3experimental [3865k] (51534 -> 51546) ... done
> [ 3/12, 00:08/00:41] update: l3kernel [8426k] (51534 -> 51546) ... done
> [ 4/12, 00:16/00:28] update: l3packages [1798k] (51248 -> 51546) ... done
> [ 5/12, 00:19/00:29] update: mathcommand [450k] (51105 -> 51542) ... done
> [ 6/12, 00:21/00:31] update: songs [1252k] (44553 -> 51494) ... done
> [ 7/12, 00:25/00:35] update: tablvar [188k] (50949 -> 51543) ... done
> [ 8/12, 00:30/00:41] update: tex4ht [911k] (51442 -> 51547) ... done
> [ 9/12, 00:36/00:47] update: texlive-docindex [257k] (51527 -> 51541) ... done
> [10/12, 00:38/00:49] update: texlive-scripts [133k] (51527 -> 51541) ... done
> [11/12, 00:41/00:52] update: tudscr [4087k] (44480 -> 51500) ... done
> [12/12, 00:47/00:49] update: xepersian [1095k] (50213 -> 50911) ... done
> running mktexlsr ...
> done running mktexlsr.
> running mtxrun --generate ...
> done running mtxrun --generate.
> tlmgr: package log updated: /usr/local/texlive/2019/texmf-var/web2c/tlmgr.log
> 
> So the songs, tudscr, and xepersian packages updated, but addliga did not.
> 
> Regards
> Alan
> --
> Dr Alan Litchfield
> AlphaByte
> PO Box 1941
> Auckland, New Zealand 1140
> 
>> On 5/07/2019, at 08:35, Alan Litchfield <alan at alphabyte.co.nz <mailto:alan at alphabyte.co.nz>> wrote:
>> 
>> Hi,
>> 
>> First, my apologies for the cross post. I know several people subscribe to the lists.
>> 
>> It is a rare occasion that I have had any issues with TeXLive over the years, but this is one. Last evening I ran an update using tlmgr and received the following errors (I have edited the log to remove the successful transactions). They all seem to relate to checksums.
>> 
>> It appears that TeXLive is returned to a stable state each time the error has occurred (it is not fatal). I am not certain if this is an issue with TeXLive or the package maintainers (whoever they are).
>> 
>> 
>> wt703a-746lsm:~ alitchfi$ sudo tlmgr update -all
>> tlmgr: package repository http://mirror.aut.ac.nz/CTAN/systems/texlive/tlnet <http://mirror.aut.ac.nz/CTAN/systems/texlive/tlnet> (not verified: gpg unavailable)
>> tlmgr: saving backups to /usr/local/texlive/2019/tlpkg/backups
>> 
>> [snipped]
>> 
>> [232/339, 17:35/21:46] update: songs [1252k] (44553 -> 51494) ... TLUtils::check_file: removing /tmp/PQg494bFwH/tjkKGb99KV/songs.source.tar.xz, checksums differ:
>> TLUtils::check_file:   TL=cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e, arg=016d389033589ab9334180edf70321858ba3b6000d8f560a18631e13ef28130f4b39aed81f7ddf0a178540a463789955d14620b37b7979ac0ea6abeec77d29bd
>> TLPDB::_install_package: downloading did not succeed
>> tlmgr: Installation of new version of songs failed, trying to unwind.
>> tlmgr: Restoring old package state succeeded.
>> done
>> 
>> [snipped]
>> 
>> [257/339, 01:12:18/01:24:12] update: tudscr [4087k] (44480 -> 51500) ... TLUtils::check_file: removing /tmp/PQg494bFwH/mNNpr0sUzp/tudscr.doc.tar.xz, checksums differ:
>> TLUtils::check_file:   TL=efb84557af855b49f11b053f0d09c36f7e3d0a1e3ae1d11da373217adc874db5d0a3e855a554795c6a5d45b6fa31fd84811825fe56582dd4154ac66d337dfe1e, arg=8cdde6d4971c663a100c8c3af1155d98c05ab32471fff24ea592f99792113d6108ddec160ee6e2681b4faaa1e3019d696fe31e51916c3f76649f28633f59df30
>> TLPDB::_install_package: downloading did not succeed
>> tlmgr: Installation of new version of tudscr failed, trying to unwind.
>> tlmgr: Restoring old package state succeeded.
>> done
>> 
>> [snipped]
>> 
>> [269/339, 02:06:19/02:21:18] update: xepersian [1095k] (50213 -> 50911) ... TLUtils::check_file: removing /tmp/PQg494bFwH/wziFkQq2Ua/xepersian.doc.tar.xz, checksums differ:
>> TLUtils::check_file:   TL=2a53771f64f92114e69379d6f7fd3c3b95744ef78af16f088fbdc4b252beebf84d802d61c0872397b95e36f43dd0ce44ac4d436171e922e9ae28cdf1589a1031, arg=ae6c252024b947c9d4cb1192ca61e55aac9bac10c0c737a29794cca2d291f90d6cc56c8e52bb338b2f6f0d27d2bb335adff38d0d792aab8a6d76e1ff11344611
>> TLPDB::_install_package: downloading did not succeed
>> tlmgr: Installation of new version of xepersian failed, trying to unwind.
>> tlmgr: Restoring old package state succeeded.
>> done
>> 
>> [snipped]
>> 
>> [278/339, 02:22:14/02:37:54] auto-install: addliga (50912) [19k] ... TLUtils::check_file: removing /tmp/PQg494bFwH/1vCPl8i16R/addliga.doc.tar.xz, checksums differ:
>> TLUtils::check_file:   TL=cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e, arg=572d9aa1396ac80be2cd9ab0bd317759805a6541b656e19ae36915a6277f9a4ff2987c84dbf903133e0a5027f382b0ed48fc882ce7a79df7a27cfe3082d2a666
>> TLPDB::_install_package: downloading did not succeed
>> tlmgr: couldn't install new package addliga
>> 
>> [snipped]
>> 
>> tlmgr: action update returned an error; continuing.
>> running mktexlsr ...
>> done running mktexlsr.
>> running mtxrun --generate ...
>> done running mtxrun --generate.
>> running updmap-sys ...
>> done running updmap-sys.
>> regenerating language.dat
>> regenerating language.def
>> regenerating language.dat.lua
>> regenerating fmtutil.cnf in /usr/local/texlive/2019/texmf-dist
>> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine luajittex ...
>> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine luajittex.
>> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine luatex ...
>> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine luatex.
>> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine uptex ...
>> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine uptex.
>> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine xetex ...
>> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine xetex.
>> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine euptex ...
>> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine euptex.
>> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine eptex ...
>> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine eptex.
>> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine ptex ...
>> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine ptex.
>> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine tex ...
>> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine tex.
>> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine aleph ...
>> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine aleph.
>> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine pdftex ...
>> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --no-error-if-no-format --byengine pdftex.
>> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.dat" ...
>> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.dat".
>> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.def" ...
>> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.def".
>> running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.dat.lua" ...
>> done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byhyphen "/usr/local/texlive/2019/texmf-var/tex/generic/config/language.dat.lua".
>> tlmgr: package log updated: /usr/local/texlive/2019/texmf-var/web2c/tlmgr.log
>> tlmgr: An error has occurred. See above messages. Exiting.
>> 
>> Cheers
>> Alan
>> --
>> Dr Alan Litchfield
>> AlphaByte
>> PO Box 1941
>> Auckland, New Zealand 1140
>> 
> 
> 
> 
> -- 
> --  http://cube20.org/ <http://cube20.org/>  --  http://golly.sf.net/ <http://golly.sf.net/>  --

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190705/81c86dd2/attachment-0001.html>

From preining at logic.at  Fri Jul  5 01:08:51 2019
From: preining at logic.at (Norbert Preining)
Date: Fri, 5 Jul 2019 08:08:51 +0900
Subject: md5sum errors on update
In-Reply-To: <83110EE7-3030-497A-B203-048E9CAED85D@alphabyte.co.nz>
 <00FD5161-8302-41E4-A205-1C659862C1FB@alphabyte.co.nz>
 <CAGia-=UABVQ0Q3LCJLrni_EcOidgmJB27wou14R+f5pjX2iyow@mail.gmail.com>
Message-ID: <20190704230851.pzdpztjdjqzuccqf@bulldog.preining.info>

Hi Alan, hi Tom,

On Fri, 05 Jul 2019, Alan Litchfield wrote:
> [232/339, 17:35/21:46] update: songs [1252k] (44553 -> 51494) ... TLUtils::check_file: removing /tmp/PQg494bFwH/tjkKGb99KV/songs.source.tar.xz, checksums differ:
> TLUtils::check_file:   TL=cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e, arg=016d389033589ab9334180edf70321858ba3b6000d8f560a18631e13ef28130f4b39aed81f7ddf0a178540a463789955d14620b37b7979ac0ea6abeec77d29bd

My guess is that you have updated right in the middle of a mirror sync
sesssion, when one part was already synced and the other not.

There is nothing we can do there.

> skipping forcibly removed package addliga

Just do
	tlmgr install addliga
and all will be fine again.

On Thu, 04 Jul 2019, Tomas Rokicki wrote:
> Right now PGP is under attack, and this is probably what's causing your
> problem.

This is completely unrelated, we don't use SKS at all.

Tom, please don't spread more of this FUD. In 20 years as Debian
Developer and user of GPG I have hardly used the sks servers, and there
is nothing under attack, but spammers.

The tabloid media have picked up as a big story, though.

There are interesting discussions going on on the gpg mailing list on
how to deal with this, but the nature and design decision of the sks
servers as append only store to protect from censorship and tampering
(does it remind you of blockchain?) allows for this.

Gpg by itself is not broken and can import the keys:
https://daniel-lange.com/archives/159-Cleaning-a-broken-GNUpg-gpg-key.html

Thanks.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From alan at alphabyte.co.nz  Fri Jul  5 01:15:39 2019
From: alan at alphabyte.co.nz (Alan Litchfield)
Date: Fri, 5 Jul 2019 11:15:39 +1200
Subject: md5sum errors on update
In-Reply-To: <20190704230851.pzdpztjdjqzuccqf@bulldog.preining.info>
References: <20190704230851.pzdpztjdjqzuccqf@bulldog.preining.info>
Message-ID: <F6A1815B-806C-45A1-8798-EC71399577EC@alphabyte.co.nz>

Hi Norbert,

As below:

> On 5/07/2019, at 11:08, Norbert Preining <preining at logic.at> wrote:
> 
> Hi Alan, hi Tom,
> 
> On Fri, 05 Jul 2019, Alan Litchfield wrote:
>> [232/339, 17:35/21:46] update: songs [1252k] (44553 -> 51494) ... TLUtils::check_file: removing /tmp/PQg494bFwH/tjkKGb99KV/songs.source.tar.xz, checksums differ:
>> TLUtils::check_file:   TL=cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e, arg=016d389033589ab9334180edf70321858ba3b6000d8f560a18631e13ef28130f4b39aed81f7ddf0a178540a463789955d14620b37b7979ac0ea6abeec77d29bd
> 
> My guess is that you have updated right in the middle of a mirror sync
> sesssion, when one part was already synced and the other not.

OK. Makes sense. My timing may never have been that good/bad before.

> 
> There is nothing we can do there.
> 
>> skipping forcibly removed package addliga
> 
> Just do
> 	tlmgr install addliga
> and all will be fine again.

Done :)

All up to date and good now.

Cheers
Alan

From news3 at nililand.de  Fri Jul  5 10:04:51 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Fri, 5 Jul 2019 10:04:51 +0200
Subject: tlshell errors
Message-ID: <172juw97gv0cj.dlg@nililand.de>

As reported on tex.sx tlshell errors currently on windows 10

https://tex.stackexchange.com/questions/498675/texlive-2019-tlshell

I can reproduce the problem. It looks as if tlshell is not quite
happy that there is no tlshell-package anymore. 


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From siepo at bitmuis.nl  Fri Jul  5 10:48:44 2019
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Fri, 5 Jul 2019 10:48:44 +0200
Subject: tlshell errors
In-Reply-To: <172juw97gv0cj.dlg@nililand.de>
References: <172juw97gv0cj.dlg@nililand.de>
Message-ID: <20190705084844.GA1240@bitmuis.nl>

On Fri, Jul 05, 2019 at 10:04:51AM +0200, Ulrike Fischer wrote:
> As reported on tex.sx tlshell errors currently on windows 10
> 
> https://tex.stackexchange.com/questions/498675/texlive-2019-tlshell
> 
> I can reproduce the problem. It looks as if tlshell is not quite
> happy that there is no tlshell-package anymore. 

This is known and is a packaging error. It should be fixed in a few days.
The command-line tlmgr should be unaffected.

-- 
Siep Kroonenberg

From herbs at wideopenwest.com  Sat Jul  6 03:35:37 2019
From: herbs at wideopenwest.com (Herbert Schulz)
Date: Fri, 5 Jul 2019 20:35:37 -0500
Subject: tlshell on Mac
Message-ID: <67985D88-5F75-4DAA-80EC-074CF37AE884@wideopenwest.com>

Howdy,

Startup of tlshell in a fully updated TeX Live 2019 on a Mac with macOS Mojave fails:

Error in startup script: key "tlshell" not known in dictionary
    while executing
"dict get $::pkgs tlshell localrev"
    (procedure "initialize" line 84)
    invoked from within
"initialize"
    (file "/Library/TeX/texbin/tlshell" line 2372)

Good Luck,

Herb Schulz
(herbs at wideopenwest dot com)



From siepo at bitmuis.nl  Sat Jul  6 10:29:30 2019
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Sat, 6 Jul 2019 10:29:30 +0200
Subject: tlshell
Message-ID: <20190706082930.GA1085@bitmuis.nl>

The problem should now be fixed, but you may want to wait a day for
the mirrors to catch up.

Update both tlmgr and tlshell.

-- 
Siep Kroonenberg

From rvoland at tds.net  Mon Jul  8 02:54:05 2019
From: rvoland at tds.net (Rick Voland)
Date: Sun, 7 Jul 2019 20:54:05 -0400 (EDT)
Subject: tlshell
In-Reply-To: <20190706082930.GA1085@bitmuis.nl>
References: <20190706082930.GA1085@bitmuis.nl>
Message-ID: <384613240.36352143.1562547245937.JavaMail.zimbra@tds.net>

I updated late today and all is fine.  TeX Live Manager GUI works again and I can use LaTeX to make documents.

Thanks for your help.

Rick




----- Original Message -----
From: "Siep Kroonenberg" <siepo at bitmuis.nl>
To: tex-live at tug.org
Sent: Saturday, July 6, 2019 3:29:30 AM
Subject: tlshell

The problem should now be fixed, but you may want to wait a day for
the mirrors to catch up.

Update both tlmgr and tlshell.

-- 
Siep Kroonenberg

From patrick at gundla.ch  Mon Jul  8 10:21:42 2019
From: patrick at gundla.ch (Patrick Gundlach)
Date: Mon, 8 Jul 2019 10:21:42 +0200
Subject: Can't install tl2019 - UI broken
Message-ID: <6A6B907A-78A2-467D-83D6-E5ACF31331FA@gundla.ch>

Hello all,

I have just downloaded install-tl-unx.tar.gz from https://tug.org/texlive/acquire-netinstall.html on MacOS X (latest OS). Then I have tried to install texlive 2019 (by running ./install-tl, but this fails at the earliest stage where I want to give a destination directory.

See the image at
 
https://i.imgur.com/JNuYgxT.png


First image is the main window, then I try to change the directory (second image - what a surprising UI) and then I get a really strange mixed English/German error message which does not help me at all. Then there are three buttons visible, an I am still trying to find out what they should do.

Is there an alternative to this UI?

Regards 
  Patrick



From patrick at gundla.ch  Mon Jul  8 11:29:18 2019
From: patrick at gundla.ch (Patrick Gundlach)
Date: Mon, 8 Jul 2019 11:29:18 +0200
Subject: Can't install tl2019 - UI broken
In-Reply-To: <6A6B907A-78A2-467D-83D6-E5ACF31331FA@gundla.ch>
References: <6A6B907A-78A2-467D-83D6-E5ACF31331FA@gundla.ch>
Message-ID: <DF03F425-F75E-4BC6-A52D-C12E3CC9AA06@gundla.ch>



> I have just downloaded install-tl-unx.tar.gz from https://tug.org/texlive/acquire-netinstall.html on MacOS X (latest OS). Then I have tried to install texlive 2019 (by running ./install-tl, but this fails at the earliest stage where I want to give a destination directory.
> 
> See the image at
> 
> https://i.imgur.com/JNuYgxT.png
> 
> 
> First image is the main window, then I try to change the directory (second image - what a surprising UI) and then I get a really strange mixed English/German error message which does not help me at all. Then there are three buttons visible, an I am still trying to find out what they should do.
> 
> Is there an alternative to this UI?


I have found out that there is --gui text  - so I am able to install tl2019. But the problem with the GUI install is still there.

The mentioned path /opt/texlive2019 is an empty directory which is writeable by me (no sudo needed).

Patrick




From siepo at bitmuis.nl  Mon Jul  8 17:41:48 2019
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Mon, 8 Jul 2019 17:41:48 +0200
Subject: Can't install tl2019 - UI broken
In-Reply-To: <6A6B907A-78A2-467D-83D6-E5ACF31331FA@gundla.ch>
References: <6A6B907A-78A2-467D-83D6-E5ACF31331FA@gundla.ch>
Message-ID: <20190708154148.GA2574@bitmuis.nl>

On Mon, Jul 08, 2019 at 10:21:42AM +0200, Patrick Gundlach wrote:
> Hello all,
> 
> I have just downloaded install-tl-unx.tar.gz from https://tug.org/texlive/acquire-netinstall.html on MacOS X (latest OS). Then I have tried to install texlive 2019 (by running ./install-tl, but this fails at the earliest stage where I want to give a destination directory.
> 
> See the image at
>  
> https://i.imgur.com/JNuYgxT.png

I could reproduce this. The error message appeared when I removed
the year component and then pressed Ok. I'll look into it.

The rationale of the directory selection dialog is that it offers a
way to browse for at least the parent or grandparent of the intended
installation root, instead of just a plain text entry box for
entering the path.

On Linux, the three blank buttons are successively titled OK, Skip
Messages and Details >>.

-- 
Siep Kroonenberg

From siepo at bitmuis.nl  Mon Jul  8 21:10:58 2019
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Mon, 8 Jul 2019 21:10:58 +0200
Subject: Can't install tl2019 - UI broken
In-Reply-To: <20190708154148.GA2574@bitmuis.nl>
References: <6A6B907A-78A2-467D-83D6-E5ACF31331FA@gundla.ch>
 <20190708154148.GA2574@bitmuis.nl>
Message-ID: <20190708191058.GB2574@bitmuis.nl>

On Mon, Jul 08, 2019 at 05:41:48PM +0200, Siep Kroonenberg wrote:
> On Mon, Jul 08, 2019 at 10:21:42AM +0200, Patrick Gundlach wrote:
> > Hello all,
> > 
> > I have just downloaded install-tl-unx.tar.gz from https://tug.org/texlive/acquire-netinstall.html on MacOS X (latest OS). Then I have tried to install texlive 2019 (by running ./install-tl, but this fails at the earliest stage where I want to give a destination directory.
> > 
> > See the image at
> >  
> > https://i.imgur.com/JNuYgxT.png
> 
> I could reproduce this. The error message appeared when I removed
> the year component and then pressed Ok. I'll look into it.

Should be fixed after tonight's update, r51579.

-- 
Siep Kroonenberg

From karl at freefriends.org  Tue Jul  9 00:24:26 2019
From: karl at freefriends.org (Karl Berry)
Date: Mon, 8 Jul 2019 16:24:26 -0600
Subject: [tex-live] Possible lacheck Bug Report
In-Reply-To: <2B164557-5E3A-4E67-8DF1-A8E2C33000B5@gmail.com>
Message-ID: <201907082224.x68MOQkP025882@freefriends.org>

Hi Zayd,

Thanks again for this report:

    \documentclass{report}

    \newcommand{\defaultleftmargin}{0.25in}

    \begin{document}
    \end{document}

    I get the following errors with lacheck:
    "hw01.tex", line 5: <- unmatched "end of file hw01.tex"
    "hw01.tex", line 2: -> unmatched "{"
    
    ... The issue only seems to arise when \newcommand is followed by
    {\def*}
    https://tug.org/pipermail/tex-live/2019-January/043083.html

I just committed the following change to lacheck.l (r51585). Although
lex can't come to parsing all valid TeX definitions, at least it doesn't
gratuitiously fail on your example any more.

I will also change the version number, etc. The new version will be
released with TL'20, although perhaps some distros will pick it up
sooner. --best, karl.

--- lacheck.l	(revision 51577)
+++ lacheck.l	(working copy)
@@ -371,8 +375,27 @@
     BEGIN(INITIAL); 
   }}
 
-"\\"[exg]?(def|newcommand)[^\n\{]+ 	BEGIN(DEF);
+  /* \def can be followed by whitespace, then the \ to start the control
+     sequence, then more or less anything up to the { starting the
+     replacement text, which we assume is on the same line. (All this
+     could be changed in TeX, with catcodes etc., but we can't try to
+     handle that.) */
+"\\"[exg]?def[ \t\n]*"\\"[^\n{]+\{	BEGIN(DEF);
 
+  /* \newcommand{\foo}{...} or \newcommand\foo{...}
+       (or \renewcommand or \providecommand).
+     To allow for arbitrary control sequence names, we match
+       the braced name as anything not containing a }.
+     To handle optional argument specifications, we assume the { is on
+       the same line as the csname.
+     We don't do anything with the definitions; the only purpose is to
+       count braces. */
+"\\"(provide|(re)?newcommand)[ \t\n]*(\{\\[^}]+\}|\\)[^{]*\{	BEGIN(DEF);
+
+  /* Pre-2019 rule was (see test-def.tex):
+     "\\"[exg]?(def|newcommand)[^\n\{]+ 	BEGIN(DEF);
+  */
+
 <DEF>{b_group} { ++def_count; }
 

From patrick at gundla.ch  Tue Jul  9 13:11:51 2019
From: patrick at gundla.ch (Patrick Gundlach)
Date: Tue, 9 Jul 2019 13:11:51 +0200
Subject: Can't install tl2019 - UI broken
In-Reply-To: <6A6B907A-78A2-467D-83D6-E5ACF31331FA@gundla.ch>
References: <6A6B907A-78A2-467D-83D6-E5ACF31331FA@gundla.ch>
Message-ID: <C239D852-E498-4017-A7EE-4CF36146C93D@gundla.ch>

I am not subscribed to the list, so please excuse the incorrect sorting of this mail.


Thank you Siep for the update, it works better than before, but still not really well:

When I click on the "change" button in the first dialog (to change the installation directory - the top image I've sent before), I get to a new window. The text field when I click the middle change button is deactivated on the first click. So I have to click cancel and go into the directory again.

I find it really surprising and counter intuitive to have one window and three buttons to select a directory where as the normal way to select a directory in all other applications is with one button. Just my 2 cents, I don't want to start a discussion.

There are other things that were a bit surprising in the tl2019 installer: For example the first window with the CTAN selection disappears too quickly to be able to change the mirror. And when I am able to change the mirror, the program exits on the command line with an error such as:

 ./install-tl 
kill: 86212: No such process

and then re-appears with English as the UI language (instead of the previous auto selected German).



Thank you anyway for providing a nice graphical installer! The things I mention are rather minor issues, I just want to point them out.

Patrick







From patrick at gundla.ch  Tue Jul  9 14:05:40 2019
From: patrick at gundla.ch (Patrick Gundlach)
Date: Tue, 9 Jul 2019 14:05:40 +0200
Subject: tlcockpit error /macOS
Message-ID: <69657D48-1C44-4AA5-AEC8-D5CF9777D54F@gundla.ch>

Hello all,

I get an error running tl2019 / tlcockpit:

$ tlmgr install tlcockpit
tlmgr: package repository http://ftp.gwdg.de/pub/ctan/systems/texlive/tlnet (verified)
[1/2, ??:??/??:??] install: tlcockpit.x86_64-darwin [1k]
[2/2, 00:00/00:00] install: tlcockpit [16093k]
running mktexlsr ...
done running mktexlsr.
running mtxrun --generate ...
done running mtxrun --generate.
tlmgr: package log updated: /opt/texlive2019/texmf-var/web2c/tlmgr.log

~$ tlcockpit 
Error: Unable to initialize main class TLCockpit.ApplicationMain
Caused by: java.lang.NoClassDefFoundError: javafx/event/EventTarget



macOS 10.14

Patrick



From cereda.paulo at gmail.com  Tue Jul  9 14:10:22 2019
From: cereda.paulo at gmail.com (Paulo Roberto Massa Cereda)
Date: Tue, 9 Jul 2019 09:10:22 -0300
Subject: tlcockpit error /macOS
In-Reply-To: <69657D48-1C44-4AA5-AEC8-D5CF9777D54F@gundla.ch>
References: <69657D48-1C44-4AA5-AEC8-D5CF9777D54F@gundla.ch>
Message-ID: <f9955e58-275d-add8-52de-3735c8a16845@gmail.com>

Hi Pat,

which Java version do you have?

$ java -version

Cheerio,

Paulo

Em 09/07/2019 09:05, Patrick Gundlach escreveu:
> Hello all,
> 
> I get an error running tl2019 / tlcockpit:
> 
> $ tlmgr install tlcockpit
> tlmgr: package repository http://ftp.gwdg.de/pub/ctan/systems/texlive/tlnet (verified)
> [1/2, ??:??/??:??] install: tlcockpit.x86_64-darwin [1k]
> [2/2, 00:00/00:00] install: tlcockpit [16093k]
> running mktexlsr ...
> done running mktexlsr.
> running mtxrun --generate ...
> done running mtxrun --generate.
> tlmgr: package log updated: /opt/texlive2019/texmf-var/web2c/tlmgr.log
> 
> ~$ tlcockpit
> Error: Unable to initialize main class TLCockpit.ApplicationMain
> Caused by: java.lang.NoClassDefFoundError: javafx/event/EventTarget
> 
> 
> 
> macOS 10.14
> 
> Patrick
> 
> 

From patrick at gundla.ch  Tue Jul  9 14:11:33 2019
From: patrick at gundla.ch (Patrick Gundlach)
Date: Tue, 9 Jul 2019 14:11:33 +0200
Subject: tlcockpit error /macOS
In-Reply-To: <f9955e58-275d-add8-52de-3735c8a16845@gmail.com>
References: <69657D48-1C44-4AA5-AEC8-D5CF9777D54F@gundla.ch>
 <f9955e58-275d-add8-52de-3735c8a16845@gmail.com>
Message-ID: <CBF2921B-7739-47DE-8E6C-1552685BA765@gundla.ch>

Hi Paulo,

I am running 

~$ java -version
java version "11" 2018-09-25
Java(TM) SE Runtime Environment 18.9 (build 11+28)
Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11+28, mixed mode)


Patrick




From eatdirt at protonmail.com  Tue Jul  9 17:20:23 2019
From: eatdirt at protonmail.com (eatdirt at protonmail.com)
Date: Tue, 09 Jul 2019 15:20:23 +0000
Subject: xdvi figure rendering broken with gs 9.26
Message-ID: <RMbEsTWW0SoKMj0lErtdKKNVwrqWtfx2BJGLFk4HKrZIeVc-WE87Zm5aiL27C_31uh3ni5kJIRb-44IQ8TGBENiCHJAQPIBFHtwo9FAw1h8=@protonmail.com>

Hi there,
since texlive 2018 (and 2019), the xdvi program built against latest versions of ghostscript (9.26), does not display figures anymore.

No logs in the console, that's for a built done on Mageia. Full bug report and test case to reproduce here:

https://bugs.mageia.org/show_bug.cgi?id=24941

Any help on how to debug this welcome.

Thanks,
Cheers,
Chris.

Sent with [ProtonMail](https://protonmail.com) Secure Email.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190709/88714660/attachment.html>

From siepo at bitmuis.nl  Tue Jul  9 21:39:24 2019
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Tue, 9 Jul 2019 21:39:24 +0200
Subject: Can't install tl2019 - UI broken
In-Reply-To: <C239D852-E498-4017-A7EE-4CF36146C93D@gundla.ch>
References: <6A6B907A-78A2-467D-83D6-E5ACF31331FA@gundla.ch>
 <C239D852-E498-4017-A7EE-4CF36146C93D@gundla.ch>
Message-ID: <20190709193924.GA10260@bitmuis.nl>

On Tue, Jul 09, 2019 at 01:11:51PM +0200, Patrick Gundlach wrote:
> I am not subscribed to the list, so please excuse the incorrect sorting of this mail.
> 
> 
> Thank you Siep for the update, it works better than before, but still not really well:
> 
> When I click on the "change" button in the first dialog (to change the installation directory - the top image I've sent before), I get to a new window. The text field when I click the middle change button is deactivated on the first click. So I have to click cancel and go into the directory again.
>
> ...
>
> There are other things that were a bit surprising in the tl2019 installer: For example the first window with the CTAN selection disappears too quickly to be able to change the mirror. And when I am able to change the mirror, the program exits on the command line with an error such as:
> 
>  ./install-tl 
> kill: 86212: No such process
> 
> and then re-appears with English as the UI language (instead of the previous auto selected German).

Thanks for the feedback. I'll look into these glitches. As to the
first window disappearing too quickly: apparently you expected
something like the option -select-repository, which is not yet
implemented for this gui. The intent was instead to give users a way
out if they hit a non-responsive or non-existent repository.

-- 
Siep Kroonenberg

From mojca.miklavec.lists at gmail.com  Tue Jul  9 21:48:01 2019
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 9 Jul 2019 21:48:01 +0200
Subject: Can't install tl2019 - UI broken
In-Reply-To: <20190709193924.GA10260@bitmuis.nl>
References: <6A6B907A-78A2-467D-83D6-E5ACF31331FA@gundla.ch>
 <C239D852-E498-4017-A7EE-4CF36146C93D@gundla.ch>
 <20190709193924.GA10260@bitmuis.nl>
Message-ID: <CALBOmsa=yOc0wC4zdqQDTkjmq41ZNr0qr5xgOoFA9qW1O=LxzQ@mail.gmail.com>

On Tue, 9 Jul 2019 at 21:41, Siep Kroonenberg <siepo at bitmuis.nl> wrote:
>
> As to the
> first window disappearing too quickly: apparently you expected
> something like the option -select-repository, which is not yet
> implemented for this gui. The intent was instead to give users a way
> out if they hit a non-responsive or non-existent repository.

Another issue (not applicable for almost another year) is that there
is probably no way out during pretest period either.

Mojca

(I agree with Patrick that I would prefer to see a single native
window to pick the installation path, but I'm not opposing the current
approach.)

From jhielscher at posteo.de  Wed Jul 10 00:00:03 2019
From: jhielscher at posteo.de (Johannes Hielscher)
Date: Wed, 10 Jul 2019 00:00:03 +0200
Subject: patgen SIGSEGV on aarch64-linux
In-Reply-To: <201906302118.x5ULI6tk012320@freefriends.org>
References: <20190630152526.58bea37d@hordevm>
 <201906302118.x5ULI6tk012320@freefriends.org>
Message-ID: <20190710000003.658a689e@hordevm>

Am Sun, 30 Jun 2019 15:18:06 -0600
schrieb Karl Berry <karl at freefriends.org>:

> Decrease the numbers until they work (and then you or I can commit the
> new numbers). If it ends up being too small and we want to address the
> original request, we'll have to make the numbers either configurable
> or dynamically reallocate the arrays. --thanks, karl.

I bisected it, and it seems that the sum of trie_size+triec_size must
not be larger than a magic constant that has a value of about
1.14e8 on the pickier one of my two aarch64-linux machines. The other
box dies between 1.41e8 and 1.44e8 (I went no further yet). This looks
all so oddly random /-:
BTW It is more of a run-time than compile-time problem. The binary built
on the more liberal machine won't run on the pickier one, and the other
way round works well.


Sticking to the 2:1 ratio for the values, we'd end up with

Index: texk/web2c/patgen.ch
===================================================================
--- texk/web2c/patgen.ch        (revision 51590)
+++ texk/web2c/patgen.ch        (working copy)
@@ -78,8 +78,8 @@
  |trie_size| and greater than the number of occurrences of any pattern in
  the dictionary}
 @y
-@!trie_size=100000000; {max space for pattern trie}
-@!triec_size=50000000; {max space for pattern count trie, must be less than
+@!trie_size=76000000; {max space for pattern trie}
+@!triec_size=38000000; {max space for pattern count trie, must be less
than |trie_size| and greater than the number of occurrences of any
pattern in the dictionary}
 @z

which keeps three quarters of the size as of Keno's patch (2019-05-17),
yet is still more than sevenfold of the old state (TL2019-release and
earlier).

Best,
Johannes

From karl at freefriends.org  Wed Jul 10 00:49:09 2019
From: karl at freefriends.org (Karl Berry)
Date: Tue, 9 Jul 2019 16:49:09 -0600
Subject: xdvi figure rendering broken with gs 9.26
In-Reply-To: <RMbEsTWW0SoKMj0lErtdKKNVwrqWtfx2BJGLFk4HKrZIeVc-WE87Zm5aiL27C_31uh3ni5kJIRb-44IQ8TGBENiCHJAQPIBFHtwo9FAw1h8=@protonmail.com>
Message-ID: <201907092249.x69Mn9kZ006989@freefriends.org>

Hi,

    https://bugs.mageia.org/show_bug.cgi?id=24941

FYI, xdvi(k) is primarily maintained by its original author,
Paul Vojta (cc'd). Upstream is http://xdvi.sourceforge.net/ ...

    xdvi figure rendering broken with gs 9.26

Your example document and figure work for me with xdvi (from tl'19) and
gs-9.26.  It's with gs-9.27 that the figure is not displayed.

This is almost certainly because gs-9.27 (which was released as we were
finalizing TL'19, so there was no chance to deal with their induced
incompatibilities) removed many operators.
https://www.ghostscript.com/doc/9.27/History9.htm#Version9.27

I hope Paul will be able to look at it.

Thanks for the report. --karl

From preining at logic.at  Wed Jul 10 01:55:34 2019
From: preining at logic.at (Norbert Preining)
Date: Wed, 10 Jul 2019 08:55:34 +0900
Subject: tlcockpit error /macOS
In-Reply-To: <69657D48-1C44-4AA5-AEC8-D5CF9777D54F@gundla.ch>
References: <69657D48-1C44-4AA5-AEC8-D5CF9777D54F@gundla.ch>
Message-ID: <20190709235534.rnfsqm2ntlez6ft2@burischnitzel.preining.info>

Hi Patrick,

> Caused by: java.lang.NoClassDefFoundError: javafx/event/EventTarget

Java 11 does not automatically ship JavaFX, and I have no idea
how/whether it is installed on MacOS.

On e.g Debian I need to install it separately.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From siepo at bitmuis.nl  Wed Jul 10 10:59:04 2019
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Wed, 10 Jul 2019 10:59:04 +0200
Subject: Can't install tl2019 - UI broken
In-Reply-To: <CALBOmsa=yOc0wC4zdqQDTkjmq41ZNr0qr5xgOoFA9qW1O=LxzQ@mail.gmail.com>
References: <6A6B907A-78A2-467D-83D6-E5ACF31331FA@gundla.ch>
 <C239D852-E498-4017-A7EE-4CF36146C93D@gundla.ch>
 <20190709193924.GA10260@bitmuis.nl>
 <CALBOmsa=yOc0wC4zdqQDTkjmq41ZNr0qr5xgOoFA9qW1O=LxzQ@mail.gmail.com>
Message-ID: <20190710085904.GA1105@bitmuis.nl>

On Tue, Jul 09, 2019 at 09:48:01PM +0200, Mojca Miklavec wrote:
> On Tue, 9 Jul 2019 at 21:41, Siep Kroonenberg <siepo at bitmuis.nl> wrote:
> >
> > As to the
> > first window disappearing too quickly: apparently you expected
> > something like the option -select-repository, which is not yet
> > implemented for this gui. The intent was instead to give users a way
> > out if they hit a non-responsive or non-existent repository.
> 
> Another issue (not applicable for almost another year) is that there
> is probably no way out during pretest period either.

There will still be the Abort way out. I added this because not
everybody knows how to force-quit an application.

There has been also mention of a pretest mirror list. So for
pretest, either the mirror button shall be disabled or it will use a
pretest mirror list. We shall see.

-- 
Siep Kroonenberg

From cereda.paulo at gmail.com  Wed Jul 10 14:00:37 2019
From: cereda.paulo at gmail.com (Paulo Roberto Massa Cereda)
Date: Wed, 10 Jul 2019 09:00:37 -0300
Subject: tlcockpit error /macOS
In-Reply-To: <20190709235534.rnfsqm2ntlez6ft2@burischnitzel.preining.info>
References: <69657D48-1C44-4AA5-AEC8-D5CF9777D54F@gundla.ch>
 <20190709235534.rnfsqm2ntlez6ft2@burischnitzel.preining.info>
Message-ID: <418a1638-a82d-19c3-3af3-7416cc960a9a@gmail.com>

Hi friends,

The Java community has made some significant changes on how JavaFX is 
shipped, and I am still puzzled on how to make things work on my end. As 
Norbert said, some systems require extra steps to make JavaFX available.

The easiest solution, in my humble opinion, is to downgrade your Java 
virtual machine to version 8. This particular version, if I recall 
correctly, is shipped with JavaFX into one single bundle. I think both 
Java 11 and 8 can easily coexist by setting the default virtual machine 
in the control panel.

Sadly, my Java configuration is far from being typical. I have at least 
a dozen virtual machines, with different versions and vendors (managed 
through https://sdkman.io/). So I can offer, perhaps, a compromise solution.

There is a Java virtual machine provided by Azul Systems, following the 
same version 11 specification, named ZuluFX, which includes JavaFX out 
of the box. You could get the macOS binary in this link (get the 11.0.3 
JRE version, which is a ZIP file):

https://www.azul.com/downloads/zulu/zulufx/

Extract the ZIP file somewhere in your file system and add the bin/ 
folder to your PATH variable and call tlcockpit:

$ export PATH=/path/to/zulufx/bin:$PATH
$ tlcockpit

Hope it helps!

Cheerio!

Paulo

From cereda.paulo at gmail.com  Wed Jul 10 17:24:51 2019
From: cereda.paulo at gmail.com (Paulo Roberto Massa Cereda)
Date: Wed, 10 Jul 2019 12:24:51 -0300
Subject: tlcockpit error /macOS
In-Reply-To: <418a1638-a82d-19c3-3af3-7416cc960a9a@gmail.com>
References: <69657D48-1C44-4AA5-AEC8-D5CF9777D54F@gundla.ch>
 <20190709235534.rnfsqm2ntlez6ft2@burischnitzel.preining.info>
 <418a1638-a82d-19c3-3af3-7416cc960a9a@gmail.com>
Message-ID: <488692d1-4289-6820-6dfb-89c44478842a@gmail.com>

This might work as well, as a one liner for bash:

$ (PATH=/path/to/zulufx/bin:$PATH; tlcockpit)

Paulo

From news3 at nililand.de  Wed Jul 10 18:47:57 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Wed, 10 Jul 2019 18:47:57 +0200
Subject: tlcockpit wrapper missing on windows
Message-ID: <101nk9sdbfiqs$.dlg@nililand.de>

Seeing the discussion for macos I tried to call tlcockpit on windows
10.

java -jar C:\texlive\2019\texmf-dist\scripts\tlcockpit\tlcockpit.jar 

works fine for me, the gui starts without errors, 

But the call "tlcockpit" doesn't work. I have no script wrapper in
the bin folder. 

-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From karl at freefriends.org  Wed Jul 10 22:34:19 2019
From: karl at freefriends.org (Karl Berry)
Date: Wed, 10 Jul 2019 14:34:19 -0600
Subject: tlcockpit wrapper missing on windows
In-Reply-To: <101nk9sdbfiqs$.dlg@nililand.de>
Message-ID: <201907102034.x6AKYJmY011991@freefriends.org>

    But the call "tlcockpit" doesn't work. I have no script wrapper in
    the bin folder. 

My mistake, I guess. If you copy the generic wrapper, runscript.exe
(size 1536 bytes) to tlcockpit.exe, does it work? Just thought I'd ask
before I adjust the setup. --thanks, karl.

From kakuto at w32tex.org  Wed Jul 10 22:41:54 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Thu, 11 Jul 2019 05:41:54 +0900
Subject: tlcockpit wrapper missing on windows
In-Reply-To: <201907102034.x6AKYJmY011991@freefriends.org>
References: <201907102034.x6AKYJmY011991@freefriends.org>
Message-ID: <9FB2B640512F419C8BB150E8C48EF068@CJ3001517A>

Hi Karl,

> My mistake, I guess. If you copy the generic wrapper, runscript.exe
> (size 1536 bytes) to tlcockpit.exe, does it work? Just thought I'd ask
> before I adjust the setup. --thanks, karl.

It seems to work.
A GUI window opened successfully at least.

Best,
Akira


From news3 at nililand.de  Wed Jul 10 23:10:16 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Wed, 10 Jul 2019 23:10:16 +0200
Subject: tlcockpit wrapper missing on windows
References: <101nk9sdbfiqs$.dlg@nililand.de>
 <201907102034.x6AKYJmY011991@freefriends.org>
Message-ID: <1hpnzgk80778l$.dlg@nililand.de>

Am Wed, 10 Jul 2019 14:34:19 -0600 schrieb Karl Berry:

>     But the call "tlcockpit" doesn't work. I have no script wrapper in
>     the bin folder. 
> 
> My mistake, I guess. If you copy the generic wrapper, runscript.exe
> (size 1536 bytes) to tlcockpit.exe, does it work? 

Yes works fine. 



-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From karl at freefriends.org  Thu Jul 11 00:06:38 2019
From: karl at freefriends.org (Karl Berry)
Date: Wed, 10 Jul 2019 16:06:38 -0600
Subject: patgen SIGSEGV on aarch64-linux
In-Reply-To: <20190710000003.658a689e@hordevm>
Message-ID: <201907102206.x6AM6cHl023071@freefriends.org>

    -@!trie_size=100000000; {max space for pattern trie}
    -@!triec_size=50000000; {max space for pattern count trie, must be less than
    +@!trie_size=76000000; {max space for pattern trie}
    +@!triec_size=38000000; {max space for pattern count trie, must be less

Thanks Johannes. I installed that change. Hope it still flies for Keno. -k

From preining at logic.at  Thu Jul 11 04:00:41 2019
From: preining at logic.at (Norbert Preining)
Date: Thu, 11 Jul 2019 11:00:41 +0900
Subject: tlcockpit wrapper missing on windows
In-Reply-To: <201907102034.x6AKYJmY011991@freefriends.org>
References: <101nk9sdbfiqs$.dlg@nililand.de>
 <201907102034.x6AKYJmY011991@freefriends.org>
Message-ID: <20190711020041.fr5x7mxkyn3rc45z@bulldog.preining.info>

Hi Karl,

> My mistake, I guess. If you copy the generic wrapper, runscript.exe

Should't that be wrunscript.exe ? Looking at the output of my
$ git log Master/bin/win32/tlcockpit.exe
commit abdca21b2d25a1df5ea62857ba070632d6fb040e
Author: Karl Berry <karl at freefriends.org>
Date:   Wed Jul 10 21:47:01 2019 +0000

    tlcockpit[.exe] wrapper
    
    git-svn-id: svn://tug.org/texlive/trunk at 51605 c570f23f-e606-0410-a88d-b1316a301751

commit 66c04c88b27c67042c8f1205adee8417867b3d38
Author: Karl Berry <karl at freefriends.org>
Date:   Sat Oct 6 21:03:37 2018 +0000

    tlcockpit now from ctan (6oct18)
    
    git-svn-id: svn://tug.org/texlive/trunk at 48846 c570f23f-e606-0410-a88d-b1316a301751

commit 5f3184a57aec83b972fe4a7c62f5d5cc0c3c801e
Author: Siep Kroonenberg <siepo at cybercomm.nl>
Date:   Wed Aug 30 13:41:47 2017 +0000

    Replaced windows tlcockpit wrapper with GUI wrapper
    
    git-svn-id: svn://tug.org/texlive/trunk at 45174 c570f23f-e606-0410-a88d-b1316a301751

...

The commit by Siep sounds like that ...

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From kakuto at w32tex.org  Thu Jul 11 04:34:39 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Thu, 11 Jul 2019 11:34:39 +0900
Subject: tlcockpit wrapper missing on windows
In-Reply-To: <20190711020041.fr5x7mxkyn3rc45z@bulldog.preining.info>
References: <101nk9sdbfiqs$.dlg@nililand.de>
 <201907102034.x6AKYJmY011991@freefriends.org>
 <20190711020041.fr5x7mxkyn3rc45z@bulldog.preining.info>
Message-ID: <770FA65CDB754CC0BB06B1E623457725@CJ3001517A>

> Should't that be wrunscript.exe ? Looking at the output of my
> $ git log Master/bin/win32/tlcockpit.exe

I think that wrunscript.exe is better because tlcockpit is a GUI application.
I confirmed that tlcockpit works fine with
cp -p wrunscript.exe tlcockpit.exe

Thanks,
Akira


From preining at logic.at  Thu Jul 11 05:00:16 2019
From: preining at logic.at (Norbert Preining)
Date: Thu, 11 Jul 2019 12:00:16 +0900
Subject: tlcockpit wrapper missing on windows
In-Reply-To: <770FA65CDB754CC0BB06B1E623457725@CJ3001517A>
References: <101nk9sdbfiqs$.dlg@nililand.de>
 <201907102034.x6AKYJmY011991@freefriends.org>
 <20190711020041.fr5x7mxkyn3rc45z@bulldog.preining.info>
 <770FA65CDB754CC0BB06B1E623457725@CJ3001517A>
Message-ID: <20190711030016.dw5775w2rapfxsgn@bulldog.preining.info>

Hi Akira,

> I think that wrunscript.exe is better because tlcockpit is a GUI application.

Thanks for testing, I copied over the wrunscript.exe. Hope that flies.
(svn 51610)

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From preining at logic.at  Thu Jul 11 05:01:54 2019
From: preining at logic.at (Norbert Preining)
Date: Thu, 11 Jul 2019 12:01:54 +0900
Subject: tlcockpit error /macOS
In-Reply-To: <418a1638-a82d-19c3-3af3-7416cc960a9a@gmail.com>
References: <69657D48-1C44-4AA5-AEC8-D5CF9777D54F@gundla.ch>
 <20190709235534.rnfsqm2ntlez6ft2@burischnitzel.preining.info>
 <418a1638-a82d-19c3-3af3-7416cc960a9a@gmail.com>
Message-ID: <20190711030154.46ky7egn7lpvaz6y@bulldog.preining.info>

Hi all,

On Wed, 10 Jul 2019, Paulo Roberto Massa Cereda wrote:
> Norbert said, some systems require extra steps to make JavaFX available.

I have just uploaded tlcockpit 1.1 to CTAN, which ships now with two jar
files, one for jdk11 and above, where javafx is included, and one for
jdk8 where javafx is not included.

The shell wrapper (Unix, Mac) tries to determine the running java
version and selects the jar accordingly, but the Windows version can't
do that and expects sdk11 or above installed.

Hope that helps

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From Torsten.Schuetze at gmx.net  Thu Jul 11 11:14:30 2019
From: Torsten.Schuetze at gmx.net (=?UTF-8?Q?=22Torsten_Sch=C3=BCtze=22?=)
Date: Thu, 11 Jul 2019 11:14:30 +0200
Subject: Undesirable nul file with tlmgr.bat under Windows
Message-ID: <trinity-48574284-588e-4c61-96b5-abc866eff0eb-1562836470870@3c-app-gmx-bs73>

Hi,

when I run

tlmgr.bat update --all --self

in a Bash shell under Cygwin with a Windows 10 system (TeXLive 2019, all updates included), I always get an unwanted nul file (obviously some html logging output. In the moment, it is the CTAN starting page, but sometimes its different log output). As nul as a file name has special meaning under Windows, I cannot simple remove the file by simple means (or even attach it to this eMail). So, my file system fills with different nul files, depending where I start the tlmgr update command.

For analysis, I renamed the nul file to null.html and attach it. (My SpeedCommander would not show any file size for nul.html, but null.html works.)

Torsten

PS: Don't know if it works without bash, I always use Cygwin (closest approximation to Linux workflow).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190711/12990460/attachment-0001.html>

From preining at logic.at  Thu Jul 11 14:56:30 2019
From: preining at logic.at (Norbert Preining)
Date: Thu, 11 Jul 2019 21:56:30 +0900
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <trinity-48574284-588e-4c61-96b5-abc866eff0eb-1562836470870@3c-app-gmx-bs73>
References: <trinity-48574284-588e-4c61-96b5-abc866eff0eb-1562836470870@3c-app-gmx-bs73>
Message-ID: <20190711125630.2f7zztwfytibb2as@bulldog.preining.info>

Hi Torsten,

> in a Bash shell under Cygwin with a Windows 10 system (TeXLive 2019, all updates
> included), I always get an unwanted nul file


Ahh, interesting. We need to fix that. No, it is not logging, it should
be stuff that gets thrown away. On Unix we use "/dev/null", and on Windows
this is called "nul", but indeed, cygwin behaves likes Unix here.

I will look into it.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From preining at logic.at  Thu Jul 11 15:06:30 2019
From: preining at logic.at (Norbert Preining)
Date: Thu, 11 Jul 2019 22:06:30 +0900
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <20190711125630.2f7zztwfytibb2as@bulldog.preining.info>
References: <trinity-48574284-588e-4c61-96b5-abc866eff0eb-1562836470870@3c-app-gmx-bs73>
 <20190711125630.2f7zztwfytibb2as@bulldog.preining.info>
Message-ID: <20190711130630.qnht67kbqvfoax3c@bulldog.preining.info>

On Thu, 11 Jul 2019, Norbert Preining wrote:
> Ahh, interesting. We need to fix that. No, it is not logging, it should
> be stuff that gets thrown away. On Unix we use "/dev/null", and on Windows
> this is called "nul", but indeed, cygwin behaves likes Unix here.

Could you please send me the output in your cygwin terminal of the
following command
	perl -e 'print $^O'
Thanks

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From d.p.carlisle at gmail.com  Thu Jul 11 15:09:03 2019
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Thu, 11 Jul 2019 14:09:03 +0100
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <20190711130630.qnht67kbqvfoax3c@bulldog.preining.info>
References: <trinity-48574284-588e-4c61-96b5-abc866eff0eb-1562836470870@3c-app-gmx-bs73>
 <20190711125630.2f7zztwfytibb2as@bulldog.preining.info>
 <20190711130630.qnht67kbqvfoax3c@bulldog.preining.info>
Message-ID: <CAEW6iOj=mXUg8cxXs09C1dhhFKJd2AdXhXRv4PLRnPMuWtUcGA@mail.gmail.com>

On Thu, 11 Jul 2019 at 14:07, Norbert Preining <preining at logic.at> wrote:

> On Thu, 11 Jul 2019, Norbert Preining wrote:
> > Ahh, interesting. We need to fix that. No, it is not logging, it should
> > be stuff that gets thrown away. On Unix we use "/dev/null", and on
> Windows
> > this is called "nul", but indeed, cygwin behaves likes Unix here.
>
> Could you please send me the output in your cygwin terminal of the
> following command
>         perl -e 'print $^O'
> Thanks
>

I get

$  perl -e 'print $^O'
cygwin


> Norbert
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190711/ee1fcd24/attachment.html>

From preining at logic.at  Thu Jul 11 15:18:01 2019
From: preining at logic.at (Norbert Preining)
Date: Thu, 11 Jul 2019 22:18:01 +0900
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <CAEW6iOj=mXUg8cxXs09C1dhhFKJd2AdXhXRv4PLRnPMuWtUcGA@mail.gmail.com>
References: <trinity-48574284-588e-4c61-96b5-abc866eff0eb-1562836470870@3c-app-gmx-bs73>
 <20190711125630.2f7zztwfytibb2as@bulldog.preining.info>
 <20190711130630.qnht67kbqvfoax3c@bulldog.preining.info>
 <CAEW6iOj=mXUg8cxXs09C1dhhFKJd2AdXhXRv4PLRnPMuWtUcGA@mail.gmail.com>
Message-ID: <6D8D4178-7130-4C5D-B2BD-A0EA99FEA11D@logic.at>

Hmmmm, then it should be treated as Unix and no "nul" be created.

Very strange.


On July 11, 2019 10:09:03 PM GMT+09:00, David Carlisle <d.p.carlisle at gmail.com> wrote:
>On Thu, 11 Jul 2019 at 14:07, Norbert Preining <preining at logic.at>
>wrote:
>
>> On Thu, 11 Jul 2019, Norbert Preining wrote:
>> > Ahh, interesting. We need to fix that. No, it is not logging, it
>should
>> > be stuff that gets thrown away. On Unix we use "/dev/null", and on
>> Windows
>> > this is called "nul", but indeed, cygwin behaves likes Unix here.
>>
>> Could you please send me the output in your cygwin terminal of the
>> following command
>>         perl -e 'print $^O'
>> Thanks
>>
>
>I get
>
>$  perl -e 'print $^O'
>cygwin
>
>
>> Norbert
>>
>>


--
PREINING Norbert http://www.preining.info
Accelia Inc. + JAIST + TeX Live + Debian Developer
GPG: 0x860CDC13 fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From d.p.carlisle at gmail.com  Thu Jul 11 15:57:17 2019
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Thu, 11 Jul 2019 14:57:17 +0100
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <6D8D4178-7130-4C5D-B2BD-A0EA99FEA11D@logic.at>
References: <trinity-48574284-588e-4c61-96b5-abc866eff0eb-1562836470870@3c-app-gmx-bs73>
 <20190711125630.2f7zztwfytibb2as@bulldog.preining.info>
 <20190711130630.qnht67kbqvfoax3c@bulldog.preining.info>
 <CAEW6iOj=mXUg8cxXs09C1dhhFKJd2AdXhXRv4PLRnPMuWtUcGA@mail.gmail.com>
 <6D8D4178-7130-4C5D-B2BD-A0EA99FEA11D@logic.at>
Message-ID: <CAEW6iOgbahrBKuE=MNSL2pO4O5qVEjFJ=QoK9q9D+rUZf0QWPg@mail.gmail.com>

oh my answer was using a cygwin perl, was the OP using a native widows perl
but from a cygwin shell? I'll leave Torsten to confirm...

On Thu, 11 Jul 2019 at 14:19, Norbert Preining <preining at logic.at> wrote:

> Hmmmm, then it should be treated as Unix and no "nul" be created.
>
> Very strange.
>
>
> On July 11, 2019 10:09:03 PM GMT+09:00, David Carlisle <
> d.p.carlisle at gmail.com> wrote:
> >On Thu, 11 Jul 2019 at 14:07, Norbert Preining <preining at logic.at>
> >wrote:
> >
> >> On Thu, 11 Jul 2019, Norbert Preining wrote:
> >> > Ahh, interesting. We need to fix that. No, it is not logging, it
> >should
> >> > be stuff that gets thrown away. On Unix we use "/dev/null", and on
> >> Windows
> >> > this is called "nul", but indeed, cygwin behaves likes Unix here.
> >>
> >> Could you please send me the output in your cygwin terminal of the
> >> following command
> >>         perl -e 'print $^O'
> >> Thanks
> >>
> >
> >I get
> >
> >$  perl -e 'print $^O'
> >cygwin
> >
> >
> >> Norbert
> >>
> >>
>
>
> --
> PREINING Norbert http://www.preining.info
> Accelia Inc. + JAIST + TeX Live + Debian Developer
> GPG: 0x860CDC13 fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190711/fbc4c7d5/attachment.html>

From jhielscher at posteo.de  Thu Jul 11 19:20:09 2019
From: jhielscher at posteo.de (Johannes Hielscher)
Date: Thu, 11 Jul 2019 19:20:09 +0200
Subject: patgen SIGSEGV on aarch64-linux
In-Reply-To: <201907102206.x6AM6cHl023071@freefriends.org>
References: <20190710000003.658a689e@hordevm>
 <201907102206.x6AM6cHl023071@freefriends.org>
Message-ID: <20190711192009.6ba2e21c@hordevm>

Am Wed, 10 Jul 2019 16:06:38 -0600
schrieb Karl Berry <karl at freefriends.org>:

>     -@!trie_size=100000000; {max space for pattern trie}
>     -@!triec_size=50000000; {max space for pattern count trie, must
> be less than +@!trie_size=76000000; {max space for pattern trie}
>     +@!triec_size=38000000; {max space for pattern count trie, must
> be less
> 
> Thanks Johannes. I installed that change. Hope it still flies for
> Keno. -k

Rebuild. Good news first: With the updated values, the patgen binary
builds, and AFAICS runs as intended (if run manually from command line).

BUT the test fails again:

$ cd Work/texk/web2c
$ make check
[?]
FAIL: patgen.test

(again with ENOMEM segfault)


JUST to run fine if the test is executed by hand, of course (?):

$ export srcdir=../../../texk/web2c
$ $srcdir/patgen.test
[?]
This is PATGEN, Version 2.4 (TeX Live 2020/dev)
[?]

Outputs of `ulimit` and `env` are identical, except $SHLVL which is 7
for the `make check` run and 2 for manual run.


Whodunnit? `make`?


Bad memories of the texk/web2c/omegafonts issue on powerpc-linux last
april?


Best,
Johannes


From Torsten.Schuetze at gmx.net  Thu Jul 11 20:03:13 2019
From: Torsten.Schuetze at gmx.net (=?UTF-8?Q?=22Torsten_Sch=C3=BCtze=22?=)
Date: Thu, 11 Jul 2019 20:03:13 +0200
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <20190711130630.qnht67kbqvfoax3c@bulldog.preining.info>
References: <trinity-48574284-588e-4c61-96b5-abc866eff0eb-1562836470870@3c-app-gmx-bs73>
 <20190711125630.2f7zztwfytibb2as@bulldog.preining.info>
 <20190711130630.qnht67kbqvfoax3c@bulldog.preining.info>
Message-ID: <trinity-db975b36-0fea-49b7-9c97-216e0d16b65c-1562868193287@3c-app-gmx-bs17>


> Gesendet: Donnerstag, 11. Juli 2019 um 15:06 Uhr
> Von: "Norbert Preining" <preining at logic.at>
> An: "Torsten Sch?tze" <Torsten.Schuetze at gmx.net>
> Cc: texlive at tug.org
> Betreff: Re: Undesirable nul file with tlmgr.bat under Windows
>
> On Thu, 11 Jul 2019, Norbert Preining wrote:
> > Ahh, interesting. We need to fix that. No, it is not logging, it should
> > be stuff that gets thrown away. On Unix we use "/dev/null", and on Windows
> > this is called "nul", but indeed, cygwin behaves likes Unix here.
> 
> Could you please send me the output in your cygwin terminal of the
> following command
> 	perl -e 'print $^O'
> Thanks
> 
> Norbert

Norbert, thanks for looking into this. I should note that I use a Win32 TeXLive 2019 installation, i.e, I am not using the cygwin tex packages.

Here is the requested information (It's not the same machine, but the configurations are the same):

$ perl -e 'print $^O'
cygwin

$ type -a perl
perl is /usr/bin/perl

$ type -a tlmgr.bat
tlmgr.bat is /cygdrive/c/TeX/bin/win32/tlmgr.bat

$ uname -a
CYGWIN_NT-10.0 WD002589 3.0.7(0.338/5/3) 2019-04-30 18:08 x86_64 Cygwin

If you need further information, please ask. I could provide a strace log if required.

Torsten


From reinhard.kotucha at web.de  Thu Jul 11 20:31:46 2019
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Thu, 11 Jul 2019 20:31:46 +0200
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <trinity-db975b36-0fea-49b7-9c97-216e0d16b65c-1562868193287@3c-app-gmx-bs17>
References: <trinity-48574284-588e-4c61-96b5-abc866eff0eb-1562836470870@3c-app-gmx-bs73>
 <20190711125630.2f7zztwfytibb2as@bulldog.preining.info>
 <20190711130630.qnht67kbqvfoax3c@bulldog.preining.info>
 <trinity-db975b36-0fea-49b7-9c97-216e0d16b65c-1562868193287@3c-app-gmx-bs17>
Message-ID: <23847.32914.858203.64905@gargle.gargle.HOWL>

On 2019-07-11 at 20:03:13 +0200, "Torsten Sch?tze" wrote:

 > Here is the requested information (It's not the same machine, but the configurations are the same):
 > 
 > $ perl -e 'print $^O'
 > cygwin
 > 
 > $ type -a perl
 > perl is /usr/bin/perl
 > 
 > $ type -a tlmgr.bat
 > tlmgr.bat is /cygdrive/c/TeX/bin/win32/tlmgr.bat
 > 
 > $ uname -a
 > CYGWIN_NT-10.0 WD002589 3.0.7(0.338/5/3) 2019-04-30 18:08 x86_64 Cygwin
 > 
 > If you need further information, please ask. I could provide a
 > strace log if required.

I suppose that you have to install the Cygwin binaries as well:

   tlmgr platform add cygwin

You have to do this under Windows.  When the Cygwin binaries are
present, add /cygdrive/c/TeX/bin/cygwin to the Cygwin PATH.

I don't think that what you do ATM can work reliably.  However, adding
only the Cygwin binaries shouldn't increase the size of the
installation significantly.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From torsten.schuetze at gmx.net  Thu Jul 11 22:59:17 2019
From: torsten.schuetze at gmx.net (=?utf-8?Q?Torsten_Sch=C3=BCtze?=)
Date: Thu, 11 Jul 2019 22:59:17 +0200
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <23847.32914.858203.64905@gargle.gargle.HOWL>
References: <trinity-48574284-588e-4c61-96b5-abc866eff0eb-1562836470870@3c-app-gmx-bs73>
 <20190711125630.2f7zztwfytibb2as@bulldog.preining.info>
 <20190711130630.qnht67kbqvfoax3c@bulldog.preining.info>
 <trinity-db975b36-0fea-49b7-9c97-216e0d16b65c-1562868193287@3c-app-gmx-bs17>
 <23847.32914.858203.64905@gargle.gargle.HOWL>
Message-ID: <73236D2F-6ECA-4683-8321-3FABC8E5E91B@gmx.net>


> Am 11.07.2019 um 20:31 schrieb Reinhard Kotucha <reinhard.kotucha at web.de>:
> 
> I suppose that you have to install the Cygwin binaries as well:
> 
>   tlmgr platform add cygwin
> 
> You have to do this under Windows.  

You mean with the current TeXLive Installation under C:\TeX? Not with the cygwin packet manager setup-x86_64.exe?
> I don't think that what you do ATM can work reliably.  

It worked for several years. What I changed recently is that I now use the command line tlmgr.bat update ?all while I used the gui before. But with the recent changes. TclTk -> tcshell I prefer now the faster cmd line. 

The reason why I call tlmgr.bat under Cygwin and not under Windows cmd is that at work I am behind a Proxy. And adding export_httpproxy=... in .bashrc is  fairly easy.

I didn?t know that I am running an unsupported configuration (I am not quite convinced.) And except from this small nul annoyance everything is fine. 
Are the cygwin and win32 binary versions always the same?

I will see if I can try your tip tomorrow 

Thanks
Torsten 


From karl at freefriends.org  Thu Jul 11 23:24:15 2019
From: karl at freefriends.org (Karl Berry)
Date: Thu, 11 Jul 2019 15:24:15 -0600
Subject: patgen SIGSEGV on aarch64-linux
In-Reply-To: <20190711192009.6ba2e21c@hordevm>
Message-ID: <201907112124.x6BLOFcF024563@freefriends.org>

    BUT the test fails again:

All I can suggest is reducing the numbers and see if it works.  Maybe
the 760 number was on the verge and the extra memory used by make and
the test script push it over. Sigh.

Alternatively, does increasing swap on your machine solve it?
I doubt many people actually want to use patgen on an aarch ... -k

From karl at freefriends.org  Thu Jul 11 23:34:06 2019
From: karl at freefriends.org (Karl Berry)
Date: Thu, 11 Jul 2019 15:34:06 -0600
Subject: tlcockpit wrapper missing on windows
In-Reply-To: <770FA65CDB754CC0BB06B1E623457725@CJ3001517A>
Message-ID: <201907112134.x6BLY6U6025956@freefriends.org>

    I think that wrunscript.exe is better because tlcockpit is a GUI
    application.

This distinction passed me by. I adjusted ctan2tds for today's tlcockpit
update (thanks Norbert).

Do you (or Siep or anyone?) know of any other GUI programs which should
use wrunscript.exe instead of runscript.exe? Judging by the file sizes,
only epspdftk, tlcockpit, and tie (why tie?) are using wrunscript now.

Thanks,
Karl

From kakuto at w32tex.org  Thu Jul 11 23:58:58 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Fri, 12 Jul 2019 06:58:58 +0900
Subject: tlcockpit wrapper missing on windows
In-Reply-To: <201907112134.x6BLY6U6025956@freefriends.org>
References: <201907112134.x6BLY6U6025956@freefriends.org>
Message-ID: <6C81C77865E945559255BE3DE3B73664@CJ3001517A>

Hi Karl,

> Judging by the file sizes, only epspdftk, tlcockpit,
> and tie (why tie?) are using wrunscript now.

Please don't judge by the file sizes.
tie.exe is an independent binary, and it is not a wrapper.
Likewise, tex.exe is different from runscript.exe, ...

Thanks,
Akira


From kakuto at w32tex.org  Fri Jul 12 01:05:06 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Fri, 12 Jul 2019 08:05:06 +0900
Subject: tlcockpit wrapper missing on windows
In-Reply-To: <201907112134.x6BLY6U6025956@freefriends.org>
References: <201907112134.x6BLY6U6025956@freefriends.org>
Message-ID: <B1D8A977AB9340F1A279E1FEF1DA4401@CJ3001517A>

Dear Siep,

> Do you (or Siep or anyone?) know of any other GUI programs which
> should use wrunscript.exe instead of runscript.exe?

Files which contain a string "dllwrunscript" are:

(1) bitmap2eps.exe
    Modified Sun Apr 24 17:46:33 2011 UTC (8 years, 2 months ago)
    by trzeciak File length: 8704 byte(s)

(2) dviout.exe
    Modified Wed Apr 14 23:53:04 2010 UTC (9 years, 2 months ago)
    by trzeciak File length: 6656 byte(s) 

(3) epspdftk.exe
    Modified Sun Mar 25 12:22:54 2018 UTC (15 months, 2 weeks ago)
    by siepo File length: 11776 byte(s) 

(4) psv.exe
    Modified Wed Apr 14 23:53:04 2010 UTC (9 years, 2 months ago)
    by trzeciak File length: 16896 byte(s) 

(5) texdoctk.exe
    Modified Sat Jun 12 22:42:18 2010 UTC (9 years, 1 month ago)
    by trzeciak File length: 5120 byte(s) 

(6) texworks.exe
    Modified Wed Apr 14 23:53:04 2010 UTC (9 years, 2 months ago)
    by trzeciak File length: 181760 byte(s) 

(7) tlcockpit.exe
    Modified Thu Jul 11 02:59:13 2019 UTC (19 hours, 38 minutes ago)
    by preining File length: 11776 byte(s) 

(8) tlshell.exe matches
    Modified Tue Apr 2 15:11:53 2019 UTC (3 months, 1 week ago)
    by siepo File length: 14336 byte(s) 

(9) wrunscript.exe
    Added Wed Aug 30 21:48:09 2017 UTC (22 months, 1 week ago)
    by kakuto File length: 11776 byte(s).
    This is a copy of epspdftk.exe by siepo.

I copied epspdftk.exe by Siep to wrunscript.exe as a parent of GUI
wrappers. Thus wrunscript.exe == epspdftk.exe == tlcockpit.exe
at present. Other GUI wrappers seem to be compiled independently.
Is the present status OK, Siep?

Thanks,
Akira


From kakuto at w32tex.org  Fri Jul 12 02:03:49 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Fri, 12 Jul 2019 09:03:49 +0900
Subject: tlcockpit wrapper missing on windows
In-Reply-To: <B1D8A977AB9340F1A279E1FEF1DA4401@CJ3001517A>
References: <201907112134.x6BLY6U6025956@freefriends.org>
 <B1D8A977AB9340F1A279E1FEF1DA4401@CJ3001517A>
Message-ID: <86ED1D7BF08B488EB86F7E807AA0C160@CJ3001517A>

Dear Siep,

> I copied epspdftk.exe by Siep to wrunscript.exe as a parent of GUI
> wrappers.

Actually I copied
tlcockpit.exe    (r45174) by Siep to
wrunscript.exe (r45175)

Thanks,
Akira


From preining at logic.at  Fri Jul 12 02:04:22 2019
From: preining at logic.at (Norbert Preining)
Date: Fri, 12 Jul 2019 09:04:22 +0900
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <trinity-db975b36-0fea-49b7-9c97-216e0d16b65c-1562868193287@3c-app-gmx-bs17>
 <73236D2F-6ECA-4683-8321-3FABC8E5E91B@gmx.net>
Message-ID: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>

On Thu, 11 Jul 2019, "Torsten Sch?tze" wrote:
> I should note that I use a Win32 TeXLive 2019 installation, i.e, I am not using the cygwin tex packages.

Shouldn't change anything.

> $ perl -e 'print $^O'
> cygwin

Hmm, that sounds correct.

It would be great to find out *which* part of the code generates the nul
file.

Can you please open the tlmgr shell
	tlmgr shell
and at the prompt type the following commands, and at each step check
whether the file has been created or not. Thanks
	load local
	load remote
	update --list
Thanks

> You mean with the current TeXLive Installation under C:\TeX? Not with the cygwin packet manager setup-x86_64.exe?
> > I don't think that what you do ATM can work reliably.  
> 
> It worked for several years.

I don't see a reason why it shouldn't work. Reinhard, do you have actual
reasons to assume that?

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From Torsten.Schuetze at gmx.net  Fri Jul 12 08:28:25 2019
From: Torsten.Schuetze at gmx.net (=?UTF-8?Q?=22Torsten_Sch=C3=BCtze=22?=)
Date: Fri, 12 Jul 2019 08:28:25 +0200
Subject: Aw: Re: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>
References: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>
Message-ID: <trinity-a54ac742-1b7b-4583-b976-4216f7db6a44-1562912905334@3c-app-gmx-bs69>

On Fri, 12 Jul 2019, "Norbert Preining" wrote:

> It would be great to find out *which* part of the code generates the nul
> file.
>
> Can you please open the tlmgr shell
> 	tlmgr shell
> and at the prompt type the following commands, and at each step check
> whether the file has been created or not. Thanks
> 	load local
> 	load remote
> 	update --list

$ tlmgr.bat shell
protocol 1
tlmgr> load local
OK
tlmgr> load remote

C:\TeX\texmf-dist\scripts\texlive\tlmgr.pl: TLPDB::from_file could not download https://ctan.kako-dev.de/systems/texlive/tlnet/tlpkg/texlive.tlpdb;
C:\TeX\texmf-dist\scripts\texlive\tlmgr.pl: maybe the repository setting should be changed.

So, in this particular case I could not download the tlpdp, but at least the second step generated the nul file (of size 0).

Once again

$ tlmgr.bat shell
protocol 1
tlmgr> load local
OK
tlmgr> load remote
tlmgr.pl: package repository http://ftp.fernuni-hagen.de/ftp-dir/pub/mirrors/www.ctan.org/systems/texlive/tlnet (verified)
OK
tlmgr>

Now I get a nul file of size 9189 byte from the second step, load remote. I suppose its somewhere at the beginning of load remote since it is the starting page of the CTAN mirror.

Regards,
  Torsten


From preining at logic.at  Fri Jul 12 08:32:09 2019
From: preining at logic.at (Norbert Preining)
Date: Fri, 12 Jul 2019 15:32:09 +0900
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <trinity-a54ac742-1b7b-4583-b976-4216f7db6a44-1562912905334@3c-app-gmx-bs69>
References: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>
 <trinity-a54ac742-1b7b-4583-b976-4216f7db6a44-1562912905334@3c-app-gmx-bs69>
Message-ID: <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>

Hi

thanks!!

> Now I get a nul file of size 9189 byte from the second step, load remote. I suppose its somewhere at the beginning of load remote since it is the starting page of the CTAN mirror.

What is the *contents* of the file?

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From torsten.schuetze at gmx.net  Fri Jul 12 08:50:15 2019
From: torsten.schuetze at gmx.net (Torsten Schuetze)
Date: Fri, 12 Jul 2019 08:50:15 +0200
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>
References: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>
 <trinity-a54ac742-1b7b-4583-b976-4216f7db6a44-1562912905334@3c-app-gmx-bs69>
 <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>
Message-ID: <b660f644-db68-3b0b-7339-622b678ea0d9@gmx.net>

On 12/07/2019 08:32, Norbert Preining wrote:
>> Now I get a nul file of size 9189 byte from the second step, load remote. I suppose its somewhere at the beginning of load remote since it is the starting page of the CTAN mirror.
> What is the *contents* of the file?

Hi Norbert,

this differs from call to call. I am now at my desktop (sorry, deleted
the last nul file on my laptop). If I repeat the experiment I get this
time a nul file of size 4028. I attach the contents, this time its the
Index of CTAN. So, the contents of the nul file seems to be timing
dependent, perhaps depending on the response time of the CTAN mirror?

Torsten

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190712/3f5b5289/attachment.html>

From siepo at bitmuis.nl  Fri Jul 12 13:44:16 2019
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Fri, 12 Jul 2019 13:44:16 +0200
Subject: tlcockpit wrapper missing on windows
In-Reply-To: <B1D8A977AB9340F1A279E1FEF1DA4401@CJ3001517A>
References: <201907112134.x6BLY6U6025956@freefriends.org>
 <B1D8A977AB9340F1A279E1FEF1DA4401@CJ3001517A>
Message-ID: <20190712114415.GA2854@bitmuis.nl>

On Fri, Jul 12, 2019 at 08:05:06AM +0900, Akira Kakuto wrote:
> Dear Siep,
> 
> > Do you (or Siep or anyone?) know of any other GUI programs which
> > should use wrunscript.exe instead of runscript.exe?
> 
> Files which contain a string "dllwrunscript" are:
> 
> (1) bitmap2eps.exe
>    Modified Sun Apr 24 17:46:33 2011 UTC (8 years, 2 months ago)
>    by trzeciak File length: 8704 byte(s)
> 
> (2) dviout.exe
>    Modified Wed Apr 14 23:53:04 2010 UTC (9 years, 2 months ago)
>    by trzeciak File length: 6656 byte(s)
> 
> (3) epspdftk.exe
>    Modified Sun Mar 25 12:22:54 2018 UTC (15 months, 2 weeks ago)
>    by siepo File length: 11776 byte(s)
> 
> (4) psv.exe
>    Modified Wed Apr 14 23:53:04 2010 UTC (9 years, 2 months ago)
>    by trzeciak File length: 16896 byte(s)
> 
> (5) texdoctk.exe
>    Modified Sat Jun 12 22:42:18 2010 UTC (9 years, 1 month ago)
>    by trzeciak File length: 5120 byte(s)
> 
> (6) texworks.exe
>    Modified Wed Apr 14 23:53:04 2010 UTC (9 years, 2 months ago)
>    by trzeciak File length: 181760 byte(s)
> 
> (7) tlcockpit.exe
>    Modified Thu Jul 11 02:59:13 2019 UTC (19 hours, 38 minutes ago)
>    by preining File length: 11776 byte(s)
> 
> (8) tlshell.exe matches
>    Modified Tue Apr 2 15:11:53 2019 UTC (3 months, 1 week ago)
>    by siepo File length: 14336 byte(s)
> 
> (9) wrunscript.exe
>    Added Wed Aug 30 21:48:09 2017 UTC (22 months, 1 week ago)
>    by kakuto File length: 11776 byte(s).
>    This is a copy of epspdftk.exe by siepo.
> 
> I copied epspdftk.exe by Siep to wrunscript.exe as a parent of GUI
> wrappers. Thus wrunscript.exe == epspdftk.exe == tlcockpit.exe
> at present. Other GUI wrappers seem to be compiled independently.
> Is the present status OK, Siep?

The GUI wrappers can also be compiled with an embedded icon. The
sources, with some documentation, are under
Build/source/texk/texlive/w32_wrapper .

tlshell.exe uses runscript.dll, but has a different main program,
which checks the need for elevation and restarts itself in elevated
mode if necessary before loading runscript.dll. See
Master/source/tlgui/tlshell_UAC.zip . Probably, a copy of
tlshell.exe would work just fine for tlcockpit.

But somehow explorer does not always see the embedded icon.

-- 
Siep Kroonenberg

From siepo at bitmuis.nl  Fri Jul 12 14:14:45 2019
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Fri, 12 Jul 2019 14:14:45 +0200
Subject: tlcockpit wrapper missing on windows
In-Reply-To: <20190712114415.GA2854@bitmuis.nl>
References: <201907112134.x6BLY6U6025956@freefriends.org>
 <B1D8A977AB9340F1A279E1FEF1DA4401@CJ3001517A>
 <20190712114415.GA2854@bitmuis.nl>
Message-ID: <20190712121445.GB2854@bitmuis.nl>

On Fri, Jul 12, 2019 at 01:44:16PM +0200, Siep Kroonenberg wrote:
> On Fri, Jul 12, 2019 at 08:05:06AM +0900, Akira Kakuto wrote:
> > Dear Siep,
> > 
> > > Do you (or Siep or anyone?) know of any other GUI programs which
> > > should use wrunscript.exe instead of runscript.exe?
> > 
> > Files which contain a string "dllwrunscript" are:
> > 
> > (1) bitmap2eps.exe
> >    Modified Sun Apr 24 17:46:33 2011 UTC (8 years, 2 months ago)
> >    by trzeciak File length: 8704 byte(s)
> > 
> > (2) dviout.exe
> >    Modified Wed Apr 14 23:53:04 2010 UTC (9 years, 2 months ago)
> >    by trzeciak File length: 6656 byte(s)
> > 
> > (3) epspdftk.exe
> >    Modified Sun Mar 25 12:22:54 2018 UTC (15 months, 2 weeks ago)
> >    by siepo File length: 11776 byte(s)
> > 
> > (4) psv.exe
> >    Modified Wed Apr 14 23:53:04 2010 UTC (9 years, 2 months ago)
> >    by trzeciak File length: 16896 byte(s)
> > 
> > (5) texdoctk.exe
> >    Modified Sat Jun 12 22:42:18 2010 UTC (9 years, 1 month ago)
> >    by trzeciak File length: 5120 byte(s)
> > 
> > (6) texworks.exe
> >    Modified Wed Apr 14 23:53:04 2010 UTC (9 years, 2 months ago)
> >    by trzeciak File length: 181760 byte(s)
> > 
> > (7) tlcockpit.exe
> >    Modified Thu Jul 11 02:59:13 2019 UTC (19 hours, 38 minutes ago)
> >    by preining File length: 11776 byte(s)
> > 
> > (8) tlshell.exe matches
> >    Modified Tue Apr 2 15:11:53 2019 UTC (3 months, 1 week ago)
> >    by siepo File length: 14336 byte(s)
> > 
> > (9) wrunscript.exe
> >    Added Wed Aug 30 21:48:09 2017 UTC (22 months, 1 week ago)
> >    by kakuto File length: 11776 byte(s).
> >    This is a copy of epspdftk.exe by siepo.
> > 
> > I copied epspdftk.exe by Siep to wrunscript.exe as a parent of GUI
> > wrappers. Thus wrunscript.exe == epspdftk.exe == tlcockpit.exe
> > at present. Other GUI wrappers seem to be compiled independently.
> > Is the present status OK, Siep?

> The GUI wrappers can also be compiled with an embedded icon. The
> sources, with some documentation, are under
> Build/source/texk/texlive/w32_wrapper .
> 
> tlshell.exe uses runscript.dll, but has a different main program,
> which checks the need for elevation and restarts itself in elevated
> mode if necessary before loading runscript.dll. See
> Master/source/tlgui/tlshell_UAC.zip . Probably, a copy of
> tlshell.exe would work just fine for tlcockpit.
> 
> But somehow explorer does not always see the embedded icon.

More comments:

1. I recall that Tomek Trzeciak had been using a compiler
   which produced extremely small executables.

2. runscript.tlu contains code to accommodate dviout, psv and
   texworks, which is why they can use the regular wrunscript.exe.

3. I do not understand what is going on with icon embedding. Although
   the tcl installer and  tlshell display a titlebar icon, that is
   loaded by tcl from an external file.

-- 
Siep Kroonenberg

From joseph.wright at morningstar2.co.uk  Fri Jul 12 18:36:36 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Fri, 12 Jul 2019 17:36:36 +0100
Subject: UTF-8 Filenames on Windows
Message-ID: <c9229584-fd94-8ec4-5417-36180441a057@morningstar2.co.uk>

Hello all,

Testing some upcoming LaTeX kernel code, I find something unexpected on 
Windows. With a suitable file and minimal input

\openin1 foo???.eps %
\ifeof1 %
\T
\else
\F
\fi
\bye

I get "\T" for Windows TeX Live binaries (pdfTeX/XeTeX/LuaTeX) but "\F" 
on Linux or using a MiKTeX installation.

Other UTF-8 chars give a similar issue.

A bug or a feature?

Joseph

From manfred at dante.de  Fri Jul 12 20:12:49 2019
From: manfred at dante.de (Manfred Lotz)
Date: Fri, 12 Jul 2019 20:12:49 +0200
Subject: UTF-8 Filenames on Windows
In-Reply-To: <c9229584-fd94-8ec4-5417-36180441a057@morningstar2.co.uk>
References: <c9229584-fd94-8ec4-5417-36180441a057@morningstar2.co.uk>
Message-ID: <20190712201249.6d8872d8@hogwart>

On Fri, 12 Jul 2019 17:36:36 +0100
Joseph Wright <joseph.wright at morningstar2.co.uk> wrote:

> Hello all,
> 
> Testing some upcoming LaTeX kernel code, I find something unexpected
> on Windows. With a suitable file and minimal input
> 
> \openin1 foo???.eps %
> \ifeof1 %
> \T
> \else
> \F
> \fi
> \bye
> 
> I get "\T" for Windows TeX Live binaries (pdfTeX/XeTeX/LuaTeX) but
> "\F" on Linux or using a MiKTeX installation.
> 
> Other UTF-8 chars give a similar issue.
> 
> A bug or a feature?
> 
> Joseph

I'm not really an expert as life offered me to avoid Windows both
privately and in business life.

But I think that NTFS stores filenames in UTF-16.



-- 
Manfred



From vojta at math.berkeley.edu  Fri Jul 12 22:47:13 2019
From: vojta at math.berkeley.edu (Paul Vojta)
Date: Fri, 12 Jul 2019 13:47:13 -0700
Subject: xdvi figure rendering broken with gs 9.26
In-Reply-To: <201907092249.x69Mn9kZ006989@freefriends.org>
References: <RMbEsTWW0SoKMj0lErtdKKNVwrqWtfx2BJGLFk4HKrZIeVc-WE87Zm5aiL27C_31uh3ni5kJIRb-44IQ8TGBENiCHJAQPIBFHtwo9FAw1h8=@protonmail.com>
 <201907092249.x69Mn9kZ006989@freefriends.org>
Message-ID: <20190712204713.b6djtdrornjauhg4@math.berkeley.edu>

Indeed I am looking at it.  Using "git bisect" I found that the responsible
commit is 533f78554f194524abb55183d370e64354caa329 (in the ghostscript git).

That commit removed the definition of /execute, which xdvi definitely uses.

I'll look at it more this weekend.

Now there's still a bug with fragments of a figure appearing in subsequent
renderings via gs.  I haven't looked at that yet.

But, the current use of gs was modeled after ghostview, which has since
transitioned to using libgs.  Since xdvi's gs code is a bit of a hack,
it too would benefit from switching to libgs.

What do you think of xdvi using libgs sometime down the road?

Paul


On Tue, Jul 09, 2019 at 04:49:09PM -0600, Karl Berry wrote:
> Hi,
> 
>     https://bugs.mageia.org/show_bug.cgi?id=24941
> 
> FYI, xdvi(k) is primarily maintained by its original author,
> Paul Vojta (cc'd). Upstream is http://xdvi.sourceforge.net/ ...
> 
>     xdvi figure rendering broken with gs 9.26
> 
> Your example document and figure work for me with xdvi (from tl'19) and
> gs-9.26.  It's with gs-9.27 that the figure is not displayed.
> 
> This is almost certainly because gs-9.27 (which was released as we were
> finalizing TL'19, so there was no chance to deal with their induced
> incompatibilities) removed many operators.
> https://www.ghostscript.com/doc/9.27/History9.htm#Version9.27
> 
> I hope Paul will be able to look at it.
> 
> Thanks for the report. --karl

From karl at freefriends.org  Fri Jul 12 23:43:45 2019
From: karl at freefriends.org (Karl Berry)
Date: Fri, 12 Jul 2019 15:43:45 -0600
Subject: xdvi figure rendering broken with gs 9.26
In-Reply-To: <20190712204713.b6djtdrornjauhg4@math.berkeley.edu>
Message-ID: <201907122143.x6CLhjQ9015399@freefriends.org>

    What do you think of xdvi using libgs sometime down the road?

In short, it's painful.

dvisvgm uses libgs. What we found is that, for TL, it must be dlopen()d
at runtime; otherwise, the shared library dependency (and the induced
dependency on libstdc++) makes the binary unusable on a plurality of
systems. Whereas distros would like to link with the libgs/libstdc++
that any particular release provides. You can see the lengths that
Martin G and I have gone to deal with in the dvisvgm sources in TL.

So ... if there's any way to keep the interface at the PostScript level,
that sounds a lot simpler to me. Is /execute et al. still available in
some private dictionary or something, maybe? Or maybe the gs people
would be willing to do that, since they said they were willing to "work
with" application developers affected by the removal of all those
operators.

Thanks,
Karl

From reinhard.kotucha at web.de  Sat Jul 13 05:30:23 2019
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 13 Jul 2019 05:30:23 +0200
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <73236D2F-6ECA-4683-8321-3FABC8E5E91B@gmx.net>
References: <trinity-48574284-588e-4c61-96b5-abc866eff0eb-1562836470870@3c-app-gmx-bs73>
 <20190711125630.2f7zztwfytibb2as@bulldog.preining.info>
 <20190711130630.qnht67kbqvfoax3c@bulldog.preining.info>
 <trinity-db975b36-0fea-49b7-9c97-216e0d16b65c-1562868193287@3c-app-gmx-bs17>
 <23847.32914.858203.64905@gargle.gargle.HOWL>
 <73236D2F-6ECA-4683-8321-3FABC8E5E91B@gmx.net>
Message-ID: <23849.20559.655728.231052@gargle.gargle.HOWL>

On 2019-07-11 at 22:59:17 +0200, Torsten Sch?tze wrote:

 > 
 > > Am 11.07.2019 um 20:31 schrieb Reinhard Kotucha <reinhard.kotucha at web.de>:
 > > 
 > > I suppose that you have to install the Cygwin binaries as well:
 > > 
 > >   tlmgr platform add cygwin
 > > 
 > > You have to do this under Windows.  
 > 
 > You mean with the current TeXLive Installation under C:\TeX? Not
 > with the cygwin packet manager setup-x86_64.exe?

Yes.  The cygwin packet manager is not aware of your installation at
C:\TeX, of course.  But...

Please note that though the binaries for Windows and Cygwin have the
same binary file format, they are different.  You are quite brave if
you use binaries which are compiled for a completely different
operating system and I don't think that TeX Live should support such a
mess in any way.

 > The reason why I call tlmgr.bat under Cygwin and not under Windows
 > cmd is that at work I am behind a Proxy. And adding
 > export_httpproxy=... in .bashrc is fairly easy.

According to the wget manual you can also set the *_proxy variables in
the (Windows) environment.  In this case you don't need Cygwin anymore.

That would be by far the cleanest solution.  If the proxy asks for
username and password, you'll have to provide a .wgetrc file.  I
don't know where wget expects this file, most likely in %USERPROFILE%.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From vojta at math.berkeley.edu  Sat Jul 13 08:03:10 2019
From: vojta at math.berkeley.edu (Paul Vojta)
Date: Fri, 12 Jul 2019 23:03:10 -0700
Subject: xdvi figure rendering broken with gs 9.26
In-Reply-To: <201907122143.x6CLhjQ9015399@freefriends.org>
References: <20190712204713.b6djtdrornjauhg4@math.berkeley.edu>
 <201907122143.x6CLhjQ9015399@freefriends.org>
Message-ID: <20190713060310.re2eef2bv5vx7372@math.berkeley.edu>

On Fri, Jul 12, 2019 at 03:43:45PM -0600, Karl Berry wrote:
>     What do you think of xdvi using libgs sometime down the road?
> 
> In short, it's painful.
> 
> dvisvgm uses libgs. What we found is that, for TL, it must be dlopen()d
> at runtime; otherwise, the shared library dependency (and the induced
> dependency on libstdc++) makes the binary unusable on a plurality of
> systems. Whereas distros would like to link with the libgs/libstdc++
> that any particular release provides. You can see the lengths that
> Martin G and I have gone to deal with in the dvisvgm sources in TL.
> 
> So ... if there's any way to keep the interface at the PostScript level,
> that sounds a lot simpler to me. Is /execute et al. still available in
> some private dictionary or something, maybe? Or maybe the gs people
> would be willing to do that, since they said they were willing to "work
> with" application developers affected by the removal of all those
> operators.
> 
> Thanks,
> Karl

Here's a proposed fix.  I haven't tried it in xdvik, only in the non-k xdvi.
But it should work.

(This only fixes the more recent of the two bugs I mentioned.  I'm still
looking into the other one.)

Paul

--- a/texk/xdvik/psgs.c	2016-04-05 15:50:13.000000000 -0700
+++ b/texk/xdvik/psgs.c	2019-07-12 22:38:20.221708122 -0700
@@ -561,7 +561,7 @@
 	">> setuserparams .locksafe "
 	"} stopped pop\n";
     static const char str1[] =
-	"/xdvi$run {$error /newerror false put {currentfile cvx execute} stopped pop} "
+	"/xdvi$run {$error /newerror false put {currentfile cvx .execute pop} stopped pop} "
 	"def "
 	"/xdvi$ack (\347\310\376) def "
 	"/xdvi$dslen countdictstack def "

From josef.kleber at gmx.de  Sat Jul 13 10:38:26 2019
From: josef.kleber at gmx.de (Josef Kleber)
Date: Sat, 13 Jul 2019 10:38:26 +0200
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <23849.20559.655728.231052@gargle.gargle.HOWL>
References: <trinity-48574284-588e-4c61-96b5-abc866eff0eb-1562836470870@3c-app-gmx-bs73>
 <20190711125630.2f7zztwfytibb2as@bulldog.preining.info>
 <20190711130630.qnht67kbqvfoax3c@bulldog.preining.info>
 <trinity-db975b36-0fea-49b7-9c97-216e0d16b65c-1562868193287@3c-app-gmx-bs17>
 <23847.32914.858203.64905@gargle.gargle.HOWL>
 <73236D2F-6ECA-4683-8321-3FABC8E5E91B@gmx.net>
 <23849.20559.655728.231052@gargle.gargle.HOWL>
Message-ID: <dd868fe6-2529-83dc-88fd-c5884e18af19@gmx.de>

Am 13.07.2019 um 05:30 schrieb Reinhard Kotucha:
> On 2019-07-11 at 22:59:17 +0200, Torsten Sch?tze wrote:
>
>  >
>  > > Am 11.07.2019 um 20:31 schrieb Reinhard Kotucha <reinhard.kotucha at web.de>:
>  > >
>  > > I suppose that you have to install the Cygwin binaries as well:
>  > >
>  > >   tlmgr platform add cygwin
>  > >
>  > > You have to do this under Windows.
>  >
>  > You mean with the current TeXLive Installation under C:\TeX? Not
>  > with the cygwin packet manager setup-x86_64.exe?
>
> Yes.  The cygwin packet manager is not aware of your installation at
> C:\TeX, of course.  But...
>
> Please note that though the binaries for Windows and Cygwin have the
> same binary file format, they are different.  You are quite brave if
> you use binaries which are compiled for a completely different
> operating system and I don't think that TeX Live should support such a
> mess in any way.

I have to second Torsten. I use the same setup for ages. It works
flawlessly without any problems. Cygwin is well integrated into the
Windows environment. You can easily call Win apps from Cygwin or vica
versa. In fact, my standard shell is Cygwin's bash.

I don't see any downloaded files, but I also had a issue at a specific
moment with tlmgr I can't remember.

Using a wrapper script solved at least my problem

#!/bin/bash
#
tlmgr.bat "$@"

Josef


From kakuto at w32tex.org  Sat Jul 13 10:54:56 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Sat, 13 Jul 2019 17:54:56 +0900
Subject: UTF-8 Filenames on Windows
In-Reply-To: <c9229584-fd94-8ec4-5417-36180441a057@morningstar2.co.uk>
References: <c9229584-fd94-8ec4-5417-36180441a057@morningstar2.co.uk>
Message-ID: <C49DC0516A16450F951AAACAB4A4339B@CJ3001517A>

Hi Joseph,

Please test after
set command_line_encoding=utf-8

This will become the default in texmf.cnf after the
release of the new LaTeX.

( In the case of LuaTeX, use the option -cmdx
as the first, that is, argv[1], option )

Best,
Akira


From vojta at math.berkeley.edu  Sun Jul 14 02:20:51 2019
From: vojta at math.berkeley.edu (Paul Vojta)
Date: Sat, 13 Jul 2019 17:20:51 -0700
Subject: xdvi figure rendering broken with gs 9.26
In-Reply-To: <20190713060310.re2eef2bv5vx7372@math.berkeley.edu>
References: <20190712204713.b6djtdrornjauhg4@math.berkeley.edu>
 <201907122143.x6CLhjQ9015399@freefriends.org>
 <20190713060310.re2eef2bv5vx7372@math.berkeley.edu>
Message-ID: <20190714002051.qykfqwifjcjlg47d@math.berkeley.edu>

On Fri, Jul 12, 2019 at 11:03:10PM -0700, Paul Vojta wrote:
> On Fri, Jul 12, 2019 at 03:43:45PM -0600, Karl Berry wrote:
> >     What do you think of xdvi using libgs sometime down the road?
> > 
> > In short, it's painful.
> > 
> > dvisvgm uses libgs. What we found is that, for TL, it must be dlopen()d
> > at runtime; otherwise, the shared library dependency (and the induced
> > dependency on libstdc++) makes the binary unusable on a plurality of
> > systems. Whereas distros would like to link with the libgs/libstdc++
> > that any particular release provides. You can see the lengths that
> > Martin G and I have gone to deal with in the dvisvgm sources in TL.
> > 
> > So ... if there's any way to keep the interface at the PostScript level,
> > that sounds a lot simpler to me. Is /execute et al. still available in
> > some private dictionary or something, maybe? Or maybe the gs people
> > would be willing to do that, since they said they were willing to "work
> > with" application developers affected by the removal of all those
> > operators.
> > 
> > Thanks,
> > Karl
> 
> Here's a proposed fix.  I haven't tried it in xdvik, only in the non-k xdvi.
> But it should work.
> 
> (This only fixes the more recent of the two bugs I mentioned.  I'm still
> looking into the other one.)
> 
> Paul

Oops, the following would probably be better.

Paul


--- a/texk/xdvik/psgs.c	2016-04-05 15:50:13.000000000 -0700
+++ b/texk/xdvik/psgs.c	2019-07-12 22:38:20.221708122 -0700
@@ -561,7 +561,7 @@
 	">> setuserparams .locksafe "
 	"} stopped pop\n";
     static const char str1[] =
-	"/xdvi$run {$error /newerror false put {currentfile cvx execute} stopped pop} "
+	"/xdvi$run {$error /newerror false put {currentfile cvx stopped pop} stopped pop} "
 	"def "
 	"/xdvi$ack (\347\310\376) def "
 	"/xdvi$dslen countdictstack def "

From preining at logic.at  Sun Jul 14 06:23:16 2019
From: preining at logic.at (Norbert Preining)
Date: Sun, 14 Jul 2019 13:23:16 +0900
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <b660f644-db68-3b0b-7339-622b678ea0d9@gmx.net>
References: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>
 <trinity-a54ac742-1b7b-4583-b976-4216f7db6a44-1562912905334@3c-app-gmx-bs69>
 <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>
 <b660f644-db68-3b0b-7339-622b678ea0d9@gmx.net>
Message-ID: <20190714042316.7lxdrvmr4yq6k5s6@bulldog.preining.info>

Hi Torsten,

sorry for the late reply.

Ok, that sounds like
	wget ... -O nul 
does not work on Windows. At least this is our guess.

Can you please try:
- create a temporary directory, empty
- change into this directory
- call
	tlmgr --repository https://ftp.rrze.uni-erlangen.de/ctan/systems/texlive/tlnet/ update --list

After this, do you see the "nul" file?

If not, then do
	tlmgr --repository ctan update --list
After this, do you see the "nul" file?

Thanks

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From torsten.schuetze at gmx.net  Sun Jul 14 10:59:34 2019
From: torsten.schuetze at gmx.net (Torsten Schuetze)
Date: Sun, 14 Jul 2019 10:59:34 +0200
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <20190714042316.7lxdrvmr4yq6k5s6@bulldog.preining.info>
References: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>
 <trinity-a54ac742-1b7b-4583-b976-4216f7db6a44-1562912905334@3c-app-gmx-bs69>
 <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>
 <b660f644-db68-3b0b-7339-622b678ea0d9@gmx.net>
 <20190714042316.7lxdrvmr4yq6k5s6@bulldog.preining.info>
Message-ID: <8c52a326-b749-2d92-25d7-691edc9b0759@gmx.net>

Hi Norbert,

On 14/07/2019 06:23, Norbert Preining wrote:
> Can you please try:
> - create a temporary directory, empty
> - change into this directory
> - call
> 	tlmgr --repository https://ftp.rrze.uni-erlangen.de/ctan/systems/texlive/tlnet/ update --list
>
> After this, do you see the "nul" file?

no nul file.

> If not, then do
> 	tlmgr --repository ctan update --list
> After this, do you see the "nul" file?

Yes. nul file created. -rw-rw-r--+ 1 schuetze None 9189 Oct 29? 2016 nul

Contents? CTAN starting page.

Does the updater use the cygwin wget or its own wget? I suppose the latter.

Ciao,

Torsten

PS: I used tlmgr.bat instead of tlmgr. Otherwise I would have to create
a tlmgr script file as Josef Kleber suggested. But I don't see that this
solves my problem, it's just a shortcut.



From cantaro at gmail.com  Mon Jul 15 09:10:32 2019
From: cantaro at gmail.com (Udo Z)
Date: Mon, 15 Jul 2019 09:10:32 +0200
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <8c52a326-b749-2d92-25d7-691edc9b0759@gmx.net>
References: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>
 <trinity-a54ac742-1b7b-4583-b976-4216f7db6a44-1562912905334@3c-app-gmx-bs69>
 <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>
 <b660f644-db68-3b0b-7339-622b678ea0d9@gmx.net>
 <20190714042316.7lxdrvmr4yq6k5s6@bulldog.preining.info>
 <8c52a326-b749-2d92-25d7-691edc9b0759@gmx.net>
Message-ID: <CAMJScT+zb125L9YmO_sbTrbCjw_U=kQKBPAzd2J_6Z=tzYbwpQ@mail.gmail.com>

Hi Torsten,

Sysinternals ProcMon (direct download:
https://live.sysinternals.com/Procmon.exe) might be very useful for finding
out where this comes from. Launch ProcMon, perform the tlmgr update, stop
the capture, and search for 'nul' in the trace.

The trace will likely be very large but if you need help reviewing it, use
7-Zip to compress it, upload it somewhere, and provide the link.

Best regards,

Udo

On Sun, Jul 14, 2019 at 11:00 AM Torsten Schuetze <torsten.schuetze at gmx.net>
wrote:

> Hi Norbert,
>
> On 14/07/2019 06:23, Norbert Preining wrote:
> > Can you please try:
> > - create a temporary directory, empty
> > - change into this directory
> > - call
> >       tlmgr --repository
> https://ftp.rrze.uni-erlangen.de/ctan/systems/texlive/tlnet/ update --list
> >
> > After this, do you see the "nul" file?
>
> no nul file.
>
> > If not, then do
> >       tlmgr --repository ctan update --list
> > After this, do you see the "nul" file?
>
> Yes. nul file created. -rw-rw-r--+ 1 schuetze None 9189 Oct 29  2016 nul
>
> Contents  CTAN starting page.
>
> Does the updater use the cygwin wget or its own wget? I suppose the latter.
>
> Ciao,
>
> Torsten
>
> PS: I used tlmgr.bat instead of tlmgr. Otherwise I would have to create
> a tlmgr script file as Josef Kleber suggested. But I don't see that this
> solves my problem, it's just a shortcut.
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190715/f80278e0/attachment.html>

From jhielscher at posteo.de  Tue Jul 16 02:24:49 2019
From: jhielscher at posteo.de (Johannes Hielscher)
Date: Tue, 16 Jul 2019 02:24:49 +0200
Subject: patgen SIGSEGV on aarch64-linux
In-Reply-To: <201907112124.x6BLOFcF024563@freefriends.org>
References: <20190711192009.6ba2e21c@hordevm>
 <201907112124.x6BLOFcF024563@freefriends.org>
Message-ID: <20190716022449.35d8a1d7@hordevm>

> Alternatively, does increasing swap on your machine solve it?
Good hint! More swap ? higher limits until patgen segfaults (run time).
Even the lame zram trick helps in lifting the limits.

Hence, given that the trie{,c}_size sum essentially conducts a test of
accessible memory at run time, this
  * explains the inconsistent results and the odd numbers which Keno
    and me found out the hard way,
  * means RAM limitations for running and compiling patgen (running
    tests),
  * enables power users with memory-laden machines to modify patgen.ch
    for virtually infinite dictionary sizes.

There are no ?right? numbers for trie{,c}_size in an absolute sense (We
can't know the machines a user will run patgen on), and it's just luck
that nobody on x86_64-linux (or another ?large? platform) had such
little RAM in their box to find that issue there.

Which values should be shipped with the TL sources? With plenty of zram,
both my boxes would even be happy with Keno's original
110021182/54677566.

A notice like
> If patgen is segfaulting on runtime, reduce the trie{,c}_size values,
> or (better) increase RAM or swap size of your machine.
could be added to the comments in patgen.ch, so that future
builders/users don't have to go through all this again.

Best,
Johannes


From hanisch.latex at outlook.com  Tue Jul 16 22:42:55 2019
From: hanisch.latex at outlook.com (Falk Hanisch)
Date: Tue, 16 Jul 2019 20:42:55 +0000
Subject: Defining package dependencies
Message-ID: <HE1PR0801MB193111B5CAA163A9B224A790E0CE0@HE1PR0801MB1931.eurprd08.prod.outlook.com>

Hi,



I am the author of the tudscr bundle. I would like to know, if it is possible to define packages, which should also be installed, if the tudscr bundle is installed itself. Whom should I contact and how should I specify the package list?



Best regards

Falk



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190716/df9021f0/attachment.html>

From karl at freefriends.org  Wed Jul 17 00:09:33 2019
From: karl at freefriends.org (Karl Berry)
Date: Tue, 16 Jul 2019 16:09:33 -0600
Subject: patgen SIGSEGV on aarch64-linux
In-Reply-To: <20190716022449.35d8a1d7@hordevm>
Message-ID: <201907162209.x6GM9XsZ015550@freefriends.org>

    Which values should be shipped with the TL sources? 

If the current values of 76000000/38... work for Keno, that's fine,
there's no reason to re-increase them.

The real answer is to dynamically allocate the arrays, but I don't plan
to spend time on that.

> or (better) increase RAM or swap size of your machine.

I'll add a note. -k

From karl at freefriends.org  Wed Jul 17 00:36:15 2019
From: karl at freefriends.org (Karl Berry)
Date: Tue, 16 Jul 2019 16:36:15 -0600
Subject: Defining package dependencies
In-Reply-To: <HE1PR0801MB193111B5CAA163A9B224A790E0CE0@HE1PR0801MB1931.eurprd08.prod.outlook.com>
Message-ID: <201907162236.x6GMaF0f018866@freefriends.org>

Hi Falk - yes, I can add the dependencies. What are they? --thanks, karl.

From preining at logic.at  Wed Jul 17 04:21:14 2019
From: preining at logic.at (Norbert Preining)
Date: Wed, 17 Jul 2019 11:21:14 +0900
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <8c52a326-b749-2d92-25d7-691edc9b0759@gmx.net>
References: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>
 <trinity-a54ac742-1b7b-4583-b976-4216f7db6a44-1562912905334@3c-app-gmx-bs69>
 <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>
 <b660f644-db68-3b0b-7339-622b678ea0d9@gmx.net>
 <20190714042316.7lxdrvmr4yq6k5s6@bulldog.preining.info>
 <8c52a326-b749-2d92-25d7-691edc9b0759@gmx.net>
Message-ID: <20190717022114.fufk66fdb5tguyks@bulldog.preining.info>

Hi Torsten, 

sorry for the long silence.

> Yes. nul file created. -rw-rw-r--+ 1 schuetze None 9189 Oct 29? 2016 nul

Hmm, so this should come from the following code in TLUtils.pm:
  my $cmd = "$wget $mirror/ --timeout=$NetworkTimeout -O "
            . (win32() ? "nul" : "/dev/null")
            . " 2>" . (win32() ? "nul" : "/dev/null");

Where $wget = "wget" and win32() checks $^0 for /^MSWin/i
So in your case, as it returns cygwin, it shoud expand to
	wget .../ --timeout=... -O /dev/null 2>/dev/null
and no "nul" file should be created ... very strange.

Can you please **edit** TLUtils.pm (in TLROOT/tlpkg/TeXLive/)
and around line 3775 add the following printf so that it looks like
this:
  my $cmd = "$wget $mirror/ --timeout=$NetworkTimeout -O "
            . (win32() ? "nul" : "/dev/null")
            . " 2>" . (win32() ? "nul" : "/dev/null");
  print STDERR "DEBUG cmd = $cmd\n";           ####### ADDED LINE !!!!
  my $ret = system($cmd);
Then run again with the nul creating invocation and show us the output
line starting with 
	DEBUG
Thanks a lot

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From lists at openlilylib.org  Wed Jul 17 15:10:31 2019
From: lists at openlilylib.org (Urs Liska)
Date: Wed, 17 Jul 2019 13:10:31 +0000
Subject: Lua files as examples
Message-ID: <99260e0a85c75f3a9cc599a3e9b07ad5@openlilylib.org>

Hello all,

I'm preparing a package for upload to CTAN in the (hopefully) near future, and I have one question related to some included Lua files.

The package itself consists of a .sty file, one .lua file next to it, and a few submodules in a subfolder, which are called through `require(subfolder.module-name)` from the main .lua file. But the documentation folder also contains a number of .lua files - one of which is necessary to compile the manual while the others are *listed* in the manual and should be available as examples.

I know that the .lua files usually end up in the "scripts" subtree of the TeX Live installation, but would it be possible to leave the .lua files from the documentation folder alone and keep them with the documentation? And if so, how would I indicate this? Also, what would be the appropriate link to point to in the manual (you'll find the example files in ...)?

Thanks
Urs
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190717/11c34abc/attachment.html>

From security-reports at semmle.com  Thu Jul 18 15:09:03 2019
From: security-reports at semmle.com (Semmle Security Reports)
Date: Thu, 18 Jul 2019 10:09:03 -0300
Subject: Buffer overflow on axohelp
Message-ID: <CADJ_3a9=hrYc0_i_tfEZmG3aWAm6DAPoLDExgk9+a+gZ+snZ6g@mail.gmail.com>

Dear text-live team,

I would like to report a security vulnerability in your axohelp.

There is a buffer overflow on the way axohelp handle the .ax1 files.

On the DoOneObject function, there is an unsecure sprintf being used which
could end on a memory corruption.

int DoOneObject(char *cinput)
{
    int num, i, num1, num2;
    char *s, *t, *StartClean;
    double *argbuf = 0;
    SetDefaults();
    s = cinput; while ( *s != '[' ) s++;
    s++; t = s; while ( *t != ']' ) t++;
    *t++ = 0; while ( *t == ' ' || *t == '\t' || *t == '\n' ) t++;
    outpos = outputbuffer;
    outpos += sprintf(outpos,"\\axo at setObject{%s}%%\n{%s%c}%%\n{",s,t,TERMCHAR);
[1]
    if ( *s == '0' && s[1] == ']' ) {

If a line is being sent bigger than the size of  outputbuffer  (1000000),
the overflow will happend. I have attached an example file compress, so you
could test it yourself.

$ axohelp POC.ax1

Please let me know when you have fixed the vulnerability so that I can
coordinate my disclosure with yours. For reference, here is a link to
Semmle's vulnerability disclosure policy:
https://lgtm.com/security#disclosure_policy

Thank you,

Nico Waisman

Semmle Security Research Team
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190718/bfbe281f/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: POC_stack_overflow.ax1.gz
Type: application/gzip
Size: 4807 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20190718/bfbe281f/attachment.gz>

From torsten.schuetze at gmx.net  Thu Jul 18 19:54:54 2019
From: torsten.schuetze at gmx.net (Torsten Schuetze)
Date: Thu, 18 Jul 2019 19:54:54 +0200
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <20190717022114.fufk66fdb5tguyks@bulldog.preining.info>
References: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>
 <trinity-a54ac742-1b7b-4583-b976-4216f7db6a44-1562912905334@3c-app-gmx-bs69>
 <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>
 <b660f644-db68-3b0b-7339-622b678ea0d9@gmx.net>
 <20190714042316.7lxdrvmr4yq6k5s6@bulldog.preining.info>
 <8c52a326-b749-2d92-25d7-691edc9b0759@gmx.net>
 <20190717022114.fufk66fdb5tguyks@bulldog.preining.info>
Message-ID: <aa58372e-c5d8-2cc6-e76f-a9868c93affb@gmx.net>

Hi Norbert,

On 17/07/2019 04:21, Norbert Preining wrote:

> Hmm, so this should come from the following code in TLUtils.pm:
>   my $cmd = "$wget $mirror/ --timeout=$NetworkTimeout -O "
>             . (win32() ? "nul" : "/dev/null")
>             . " 2>" . (win32() ? "nul" : "/dev/null");
>
> Where $wget = "wget" and win32() checks $^0 for /^MSWin/i
> So in your case, as it returns cygwin, it shoud expand to
> 	wget .../ --timeout=... -O /dev/null 2>/dev/null
> and no "nul" file should be created ... very strange.
>
> Can you please **edit** TLUtils.pm (in TLROOT/tlpkg/TeXLive/)
> and around line 3775 add the following printf so that it looks like
> this:
>   my $cmd = "$wget $mirror/ --timeout=$NetworkTimeout -O "
>             . (win32() ? "nul" : "/dev/null")
>             . " 2>" . (win32() ? "nul" : "/dev/null");
>   print STDERR "DEBUG cmd = $cmd\n";           ####### ADDED LINE !!!!
>   my $ret = system($cmd);

I first added the debug output in line 3775 and it didn't work with $
tlmgr.bat --repository ctan update --list

Then I added it in 3714 and then it prints
DEBUG cmd = wget http://mirror.ctan.org --timeout=30 -O nul 2>&1
and creates the nul file.

$ diff -c TLUtils.pm TLUtils.pm.orig
                                                *** TLUtils.pm  Thu Jul
18 19:24:41 2019
--- TLUtils.pm.orig     Fri Jul 12 08:50:34 2019
***************
*** 3711,3717 ****
    my $mirror = $TeXLiveServerURL;
    my $cmd = "$wget $mirror --timeout=$NetworkTimeout -O "
              . (win32() ? "nul" : "/dev/null") . " 2>&1";
!   print STDERR "DEBUG cmd = $cmd\n";           ####### ADDED LINE !!!!
    #
    # since we are reading the output of wget to find a mirror
    # we have to make sure that the locale is unset
--- 3711,3717 ----
    my $mirror = $TeXLiveServerURL;
    my $cmd = "$wget $mirror --timeout=$NetworkTimeout -O "
              . (win32() ? "nul" : "/dev/null") . " 2>&1";
!
    #
    # since we are reading the output of wget to find a mirror
    # we have to make sure that the locale is unset
***************
*** 3773,3779 ****
    my $cmd = "$wget $mirror/ --timeout=$NetworkTimeout -O "
              . (win32() ? "nul" : "/dev/null")
              . " 2>" . (win32() ? "nul" : "/dev/null");
-   print STDERR "DEBUG cmd = $cmd\n";           ####### ADDED LINE !!!!
    my $ret = system($cmd);
    # if return value is not zero it is a failure, so switch the meanings
    return ($ret ? 0 : 1);
--- 3773,3778 ----

So, the offending code is line 3712. And this looks slightly different
than line 3773. If you change my $cmd at line 3712 into
DEBUG cmd = wget http://mirror.ctan.org --timeout=30 -O nul 2>&1 >nul
than it seems to work. At least for this test case. Here is the diff

$ diff -c TLUtils.pm TLUtils.pm.orig
*** TLUtils.pm  Thu Jul 18 19:44:34 2019
--- TLUtils.pm.orig     Fri Jul 12 08:50:34 2019
***************
*** 3710,3718 ****
    # do not reduce retries here, but timeout still seems desirable.
    my $mirror = $TeXLiveServerURL;
    my $cmd = "$wget $mirror --timeout=$NetworkTimeout -O "
!              . (win32() ? "nul" : "/dev/null")
!              . " 2>&1 >" . (win32() ? "nul" : "/dev/null");
!   print STDERR "DEBUG cmd = $cmd\n";           ####### ADDED LINE !!!!
    #
    # since we are reading the output of wget to find a mirror
    # we have to make sure that the locale is unset
--- 3710,3717 ----
    # do not reduce retries here, but timeout still seems desirable.
    my $mirror = $TeXLiveServerURL;
    my $cmd = "$wget $mirror --timeout=$NetworkTimeout -O "
!             . (win32() ? "nul" : "/dev/null") . " 2>&1";
!
    #
    # since we are reading the output of wget to find a mirror
    # we have to make sure that the locale is unset
***************
*** 3774,3780 ****
    my $cmd = "$wget $mirror/ --timeout=$NetworkTimeout -O "
              . (win32() ? "nul" : "/dev/null")
              . " 2>" . (win32() ? "nul" : "/dev/null");
-   print STDERR "DEBUG cmd = $cmd\n";           ####### ADDED LINE !!!!
    my $ret = system($cmd);
    # if return value is not zero it is a failure, so switch the meanings
    return ($ret ? 0 : 1);
--- 3773,3778 ----

I hope that the patched lines 3713/3714 solve the problem of the
undesirable nul file. I don't know why -O nul is not sufficient, but the
Linux/Cygwin 2>&1 >nul solution works (for me).

Ciao
  Torsten


PS: If you want that I test a patch (may be other places are also
affected) before release I would be happy to do this.


From karl at freefriends.org  Thu Jul 18 23:12:08 2019
From: karl at freefriends.org (Karl Berry)
Date: Thu, 18 Jul 2019 15:12:08 -0600
Subject: Buffer overflow on axohelp
In-Reply-To: <CADJ_3a9=hrYc0_i_tfEZmG3aWAm6DAPoLDExgk9+a+gZ+snZ6g@mail.gmail.com>
Message-ID: <201907182112.x6ILC8Gp011655@freefriends.org>

    There is a buffer overflow on the way axohelp handle the .ax1 files.

Thanks for the report. I forwarded it to the axohelp author, John
Collins.  I expect one of us will fix it soon (in the sources at least),
one way or another.

    coordinate my disclosure

Well, since you sent the report to a public list instead of our
"security" list (tlsecurity at tug.org), it is already disclosed. Not that
I think this particular vulnerability is drop-everything crucial;
axohelp is rarely used and has no special privileges.

Thanks again. --karl


From karl at freefriends.org  Thu Jul 18 23:50:16 2019
From: karl at freefriends.org (Karl Berry)
Date: Thu, 18 Jul 2019 15:50:16 -0600
Subject: Lua files as examples
In-Reply-To: <99260e0a85c75f3a9cc599a3e9b07ad5@openlilylib.org>
Message-ID: <201907182150.x6ILoG0A016671@freefriends.org>

Hi Urs - yes, it is no problem to keep the doc .lua files in the doc
tree.

   how would I indicate this? 

The best place to describe intended installation layout is in the README
file, although assuming the CTAN upload will have (something like)
doc/luaexamples/*.lua vs. tex/subfolder/*.lua, it will be evident to me
what to do.

   Also, what would be the appropriate link
   to point to in the manual (you'll find the example files in ...)?

It depends on the appropriate subdirectory of doc, e.g.,
texmf-dist/doc/latex/yourpkgname/luaexamples, but "latex" might be
"generic" or "support" or whatever. It depends on what your package does :).
I usually use something corresponding to the main CTAN subtree location.
(Suggesting something is fine.)

Another thing that can be useful to mention is running "texdoc -l
yourpkgname", which should show all the relevant files (and maybe some
irrelevant ones), including the examples.

On another front:

    require(subfolder.module-name) from the main .lua file. 

Does that actually work? Does your script do something to put subfolder
in the Lua input path, or similar(*)? If not, or even if so, I strongly
recommend making the file basenames be unique, like
yourpkg-module-name.lua.

If you have a preference, the runtime .lua files can end up either under
scripts/ or under tex/. Let me know. --best, karl.


(*) It is possible to use kpsewhich --subdir=yourpkg to filter the possible
extraneous matches, which I implemented years ago for Heiko, but from a
quick grep, I didn't see anything actually using it ...

From preining at logic.at  Fri Jul 19 03:34:26 2019
From: preining at logic.at (Norbert Preining)
Date: Fri, 19 Jul 2019 10:34:26 +0900
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <aa58372e-c5d8-2cc6-e76f-a9868c93affb@gmx.net>
References: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>
 <trinity-a54ac742-1b7b-4583-b976-4216f7db6a44-1562912905334@3c-app-gmx-bs69>
 <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>
 <b660f644-db68-3b0b-7339-622b678ea0d9@gmx.net>
 <20190714042316.7lxdrvmr4yq6k5s6@bulldog.preining.info>
 <8c52a326-b749-2d92-25d7-691edc9b0759@gmx.net>
 <20190717022114.fufk66fdb5tguyks@bulldog.preining.info>
 <aa58372e-c5d8-2cc6-e76f-a9868c93affb@gmx.net>
Message-ID: <20190719013426.gvrttfxrp7faqzsr@burischnitzel.preining.info>

Hi Torsten, 

thanks for your debugging, this is all strange.

> DEBUG cmd = wget http://mirror.ctan.org --timeout=30 -O nul 2>&1

>     my $cmd = "$wget $mirror --timeout=$NetworkTimeout -O "
> !              . (win32() ? "nul" : "/dev/null")
> !              . " 2>&1 >" . (win32() ? "nul" : "/dev/null");

So you *DO* get win32() == true ... in contrast to what you send me.

It seems that
- if the program is started via tlmgr.bat, perl detects is a Windows.
- the redirection in the .bat file to nul works
- the -O nul does NOT work because wget thinks different

So this is really messed up situation, and now I somehow agree with
Reinhard that mixing .bat Windows files with cygwin seems not an optimal
solution.

What puzzles me is that with the abov change one should *still* get the
nul file from the -O, so maybe my theory is still not correct.

> DEBUG cmd = wget http://mirror.ctan.org --timeout=30 -O nul 2>&1 >nul
> than it seems to work. At least for this test case. Here is the diff

Very very strange ...

Any cygwin knowledgable participants here?

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From kbrow1i at gmail.com  Fri Jul 19 04:19:15 2019
From: kbrow1i at gmail.com (Ken Brown)
Date: Thu, 18 Jul 2019 22:19:15 -0400
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <20190719013426.gvrttfxrp7faqzsr@burischnitzel.preining.info>
References: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>
 <trinity-a54ac742-1b7b-4583-b976-4216f7db6a44-1562912905334@3c-app-gmx-bs69>
 <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>
 <b660f644-db68-3b0b-7339-622b678ea0d9@gmx.net>
 <20190714042316.7lxdrvmr4yq6k5s6@bulldog.preining.info>
 <8c52a326-b749-2d92-25d7-691edc9b0759@gmx.net>
 <20190717022114.fufk66fdb5tguyks@bulldog.preining.info>
 <aa58372e-c5d8-2cc6-e76f-a9868c93affb@gmx.net>
 <20190719013426.gvrttfxrp7faqzsr@burischnitzel.preining.info>
Message-ID: <fc9fef5c-d076-8436-3c31-55b78bb58ed9@gmail.com>

On 7/18/2019 9:34 PM, Norbert Preining wrote:
> Hi Torsten,
> 
> thanks for your debugging, this is all strange.
> 
>> DEBUG cmd = wget http://mirror.ctan.org --timeout=30 -O nul 2>&1
> 
>>      my $cmd = "$wget $mirror --timeout=$NetworkTimeout -O "
>> !              . (win32() ? "nul" : "/dev/null")
>> !              . " 2>&1 >" . (win32() ? "nul" : "/dev/null");
> 
> So you *DO* get win32() == true ... in contrast to what you send me.
> 
> It seems that
> - if the program is started via tlmgr.bat, perl detects is a Windows.
> - the redirection in the .bat file to nul works
> - the -O nul does NOT work because wget thinks different
> 
> So this is really messed up situation, and now I somehow agree with
> Reinhard that mixing .bat Windows files with cygwin seems not an optimal
> solution.
> 
> What puzzles me is that with the abov change one should *still* get the
> nul file from the -O, so maybe my theory is still not correct.
> 
>> DEBUG cmd = wget http://mirror.ctan.org --timeout=30 -O nul 2>&1 >nul
>> than it seems to work. At least for this test case. Here is the diff
> 
> Very very strange ...
> 
> Any cygwin knowledgable participants here?

I've been casually following this discussion, as the maintainer of TeX Live on 
Cygwin, and I too agree with Reinhard.  Using Cygwin tools to install Win32 TeX 
Live is asking for trouble.

Torsten, you said in your first message that you "always use Cygwin (closest 
approximation to Linux workflow)."  So why not just use the TeX Live that has 
been built for Cygwin?  You can do this either by using Cygwin's package manager 
or, if you prefer, by following the instructions at the top of 
https://www.tug.org/texlive/quickinstall.html.  If you do the latter, then 
updating with tlmgr works exactly as it would on GNU/Linux or any other 
Unix-like system.

Ken

From preining at logic.at  Fri Jul 19 05:05:32 2019
From: preining at logic.at (Norbert Preining)
Date: Fri, 19 Jul 2019 12:05:32 +0900
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <fc9fef5c-d076-8436-3c31-55b78bb58ed9@gmail.com>
References: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>
 <trinity-a54ac742-1b7b-4583-b976-4216f7db6a44-1562912905334@3c-app-gmx-bs69>
 <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>
 <b660f644-db68-3b0b-7339-622b678ea0d9@gmx.net>
 <20190714042316.7lxdrvmr4yq6k5s6@bulldog.preining.info>
 <8c52a326-b749-2d92-25d7-691edc9b0759@gmx.net>
 <20190717022114.fufk66fdb5tguyks@bulldog.preining.info>
 <aa58372e-c5d8-2cc6-e76f-a9868c93affb@gmx.net>
 <20190719013426.gvrttfxrp7faqzsr@burischnitzel.preining.info>
 <fc9fef5c-d076-8436-3c31-55b78bb58ed9@gmail.com>
Message-ID: <20190719030532.omhv3q7ssaqstknn@bulldog.preining.info>

Hi Ken,

On Thu, 18 Jul 2019, Ken Brown wrote:
> I've been casually following this discussion, as the maintainer of TeX Live
> on Cygwin, and I too agree with Reinhard.  Using Cygwin tools to install
> Win32 TeX Live is asking for trouble.

I somehow agree with you, but this doesn't enhance our understanding. I
want to know why this happened, and then give a proper solution - which
might be "just use cygwin binaries".

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From lists at openlilylib.org  Fri Jul 19 11:11:50 2019
From: lists at openlilylib.org (Urs Liska)
Date: Fri, 19 Jul 2019 09:11:50 +0000
Subject: Lua files as examples
In-Reply-To: <201907182150.x6ILoG0A016671@freefriends.org>
References: <201907182150.x6ILoG0A016671@freefriends.org>
Message-ID: <f10a6786c40e97d02e75a8796c653570@openlilylib.org>

18. Juli 2019 23:50, "Karl Berry" <karl at freefriends.org> schrieb:

> Hi Urs - yes, it is no problem to keep the doc .lua files in the doc
> tree.
> 
>> how would I indicate this? 
> 
> The best place to describe intended installation layout is in the README
> file, although assuming the CTAN upload will have (something like)
> doc/luaexamples/*.lua vs. tex/subfolder/*.lua, it will be evident to me
> what to do.

For clarity I'll state that the package is called `luatemplates`.

The structure relevant to the documentation is

<root>
|- luatemplates.sty
|- luatemplates.lua
|- documentation
   |- luatemplates.tex (the manual)
   |- luatemplates-manual-templates.lua (required as Lua module by the manual)
   |- examples
      |- examples-type-one.lua (just listed in the manual)
      |- examples-type-two.lua (listed *and required* in/from the manual)
      |- example*.tex (example files to look at, each having a corresponding .lua file)
|- ..

> 
> Also, what would be the appropriate link
> to point to in the manual (you'll find the example files in ...)?
> 
> It depends on the appropriate subdirectory of doc, e.g.,
> texmf-dist/doc/latex/yourpkgname/luaexamples, but "latex" might be
> "generic" or "support" or whatever. It depends on what your package does :).
> I usually use something corresponding to the main CTAN subtree location.
> (Suggesting something is fine.)

The package is a generic tool for simplifying the development of Lua-based packages, allowing "formatter" templates or functions to be defined in Lua and all the macro and argument handling be done automatically. [1]

> 
> Another thing that can be useful to mention is running "texdoc -l
> yourpkgname", which should show all the relevant files (and maybe some
> irrelevant ones), including the examples.
> 

I didn't know that, sorry. This seems like a good suggestion to give readers an easy way of finding the examples.

> On another front:
> 
>> require(subfolder.module-name) from the main .lua file. 
> 
> Does that actually work? 

I don't really know, that's why I brought it up in this email. It works in my development repository but I know I can't assume the same when put into another context. Probably it works here because everything is found through relative paths.

> Does your script do something to put subfolder
> in the Lua input path, or similar(*)? If not, or even if so, I strongly
> recommend making the file basenames be unique, like
> yourpkg-module-name.lua.

As said, maybe it just works thanks to the relative paths. Another view on the directory structure quoted above is

<root>
|- luatemplates.lua
|- luatemplates
   |- builtins.lua
   |- formatter.lua
   |- ...

So from within luatemplates.lua I can successfully write

    require('luatemplates.builtins')

This does not seem to be related to the current working directory because it also works when compiling the manual from the "documentation" subdirectory.

Your comment made me think of whether this worked because the files are relative to the caller or because they are within the search path. Since changing "require('builtins')" also works I assume it's the latter. In that case I'll rename the files to make them unique so no other users accidentally load them ...
But this should also imply that the files will be found when they are stored in another location not findable through relative paths and independently of the current working directory, right?

> 
> If you have a preference, the runtime .lua files can end up either under
> scripts/ or under tex/. Let me know. --best, karl.

I don't know much about the TDS, but it seems somewhat natural that they are under scripts/.

Thank you for the comments, and your work in general!
Best
Urs

[1]
This is not meant as a request but rather as an invitaion: I would be grateful for any public feedback (and discussiton, and contribution) *before* a CTAN release. The package is located at https://github.com/uliska/luatemplates, where also a compiled PDF of the current manual can be downloaded. I must admit, though, that making it work is a little bit tricky because it requires another package (lyluatex) to be run from its Github repository (instead of TeX Live), and even from a specific branch.

For a glimpse of what it does the following example files may give an idea:
https://github.com/uliska/luatemplates/blob/master/documentation/examples/luatemplates-mwe.tex
and 
https://github.com/uliska/luatemplates/blob/master/documentation/examples/luatemplates-mwe-templates.lua
   or
https://github.com/uliska/luatemplates/blob/master/documentation/examples/validate-options.tex
and
https://github.com/uliska/luatemplates/blob/master/documentation/examples/validate-options.lua
> 
> (*) It is possible to use kpsewhich --subdir=yourpkg to filter the possible
> extraneous matches, which I implemented years ago for Heiko, but from a
> quick grep, I didn't see anything actually using it ...


From news3 at nililand.de  Fri Jul 19 12:41:08 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Fri, 19 Jul 2019 12:41:08 +0200
Subject: Lua files as examples
References: <201907182150.x6ILoG0A016671@freefriends.org>
 <f10a6786c40e97d02e75a8796c653570@openlilylib.org>
Message-ID: <wfpx60wkgz4d.dlg@nililand.de>

Am Fri, 19 Jul 2019 09:11:50 +0000 schrieb Urs Liska:

>> On another front:
>> 
>>> require(subfolder.module-name) from the main .lua file. 
>> 
>> Does that actually work? 
> 
> I don't really know,

Yes it does. See e.g. the graphdrawing library in
\texmf-dist\tex\generic\pgf\graphdrawing\lua\pgf\gd which uses a
similar layout. 

But I remember of a least one case where it lead to a name clash (I
think in context but I'm not sure). 

If possible at least the main lua-file should contain a declaration,
so that it shows up in the log. luaotfload e.g. has this:

local ProvidesLuaModule = {
    name          = "luaotfload-init",
    version       = "2.98",      
    date          = "2019-07-04",
    description   = "luaotfload submodule / initialization",
    license       = "GPL v2.0"
}

if luatexbase and luatexbase.provides_module then
  luatexbase.provides_module (ProvidesLuaModule)
end 



>> If you have a preference, the runtime .lua files can end up either under
>> scripts/ or under tex/. Let me know. --best, karl.
 
> I don't know much about the TDS, but it seems somewhat natural that they are under scripts/.

luaotfload-tool.lua is in scripts as it is connected/used by the
command line tool luaotfload-tool. 

The other lua-file of luaotfload are in tex/luatex as they are used
by documents. 


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From lists at openlilylib.org  Fri Jul 19 13:01:51 2019
From: lists at openlilylib.org (Urs Liska)
Date: Fri, 19 Jul 2019 11:01:51 +0000
Subject: Lua files as examples
In-Reply-To: <wfpx60wkgz4d.dlg@nililand.de>
References: <wfpx60wkgz4d.dlg@nililand.de>
 <201907182150.x6ILoG0A016671@freefriends.org>
 <f10a6786c40e97d02e75a8796c653570@openlilylib.org>
Message-ID: <411486c43784e69a5331c27ed334f4b0@openlilylib.org>

19. Juli 2019 12:41, "Ulrike Fischer" <news3 at nililand.de> schrieb:

> Am Fri, 19 Jul 2019 09:11:50 +0000 schrieb Urs Liska:
> 
>>> On another front:
>> 
>> require(subfolder.module-name) from the main .lua file.
>>> Does that actually work?
>> 
>> I don't really know,
> 
> Yes it does. See e.g. the graphdrawing library in
> \texmf-dist\tex\generic\pgf\graphdrawing\lua\pgf\gd which uses a
> similar layout.
> 
> But I remember of a least one case where it lead to a name clash (I
> think in context but I'm not sure).

My initial test (requiring the module without the (relative) path) did find the submodule, so I assume the module is not found by its relative path but through the fact that it is in the (Lua/kpsewhich?) search path. If that's the case than any other client would find it as well, and depending on the arbitrary search order ther wrong module might be loaded.
If that assumption is correct then a) I don't have to worry about the submodules to be found and b) I *do* have to worry about naming them uniquely, which I'll immediately take care of.

> 
> If possible at least the main lua-file should contain a declaration,
> so that it shows up in the log. luaotfload e.g. has this:
> 
> local ProvidesLuaModule = {
> name = "luaotfload-init",
> version = "2.98",
> date = "2019-07-04",
> description = "luaotfload submodule / initialization",
> license = "GPL v2.0"
> }
> 
> if luatexbase and luatexbase.provides_module then
> luatexbase.provides_module (ProvidesLuaModule)
> end
> 

The modules all have such a declaration, which I make heavy use of for reporting input errors.

>>> If you have a preference, the runtime .lua files can end up either under
>>> scripts/ or under tex/. Let me know. --best, karl.
> 
>> I don't know much about the TDS, but it seems somewhat natural that they are under scripts/.
> 
> luaotfload-tool.lua is in scripts as it is connected/used by the
> command line tool luaotfload-tool.
> 
> The other lua-file of luaotfload are in tex/luatex as they are used
> by documents.
> 

Ah, this makes sense. So my lua files are *not* intended to be used from the command line, only from documents/packages. So they should rather be placed in the tex/luatex subtree.

Best
Urs

> --
> Ulrike Fischer
> http://www.troubleshooting-tex.de


From eduardoochs at gmail.com  Fri Jul 19 13:20:31 2019
From: eduardoochs at gmail.com (Eduardo Ochs)
Date: Fri, 19 Jul 2019 08:20:31 -0300
Subject: Lua files as examples
In-Reply-To: <f10a6786c40e97d02e75a8796c653570@openlilylib.org>
References: <201907182150.x6ILoG0A016671@freefriends.org>
 <f10a6786c40e97d02e75a8796c653570@openlilylib.org>
Message-ID: <CADs++6gwFdEhU72K+HgZ2bMbzy0F9MnWcJe5ma8p+6mjfKhstA@mail.gmail.com>

Hi Urs,

I am also working on a package that has several Lua files and that I
want to submit to CTAN at some point - in some months, I think...

I have a suggestion: add compilation - i.e., lualatex-ing -
instructions that let people test your package quickly. I did that
here

  http://angg.twu.net/dednat6.html#quick-start
  http://angg.twu.net/dednat6/demo-minimal.tex.html
  http://angg.twu.net/dednat6/demo-minimal.tex

and my number of users exploded! It went from 1 to 5 if I take "users"
in a strict sense.

  Cheers,
    Eduardo Ochs =)
    http://angg.twu.net/dednat6.html
    http://angg.twu.net/math-b.html

On Fri, 19 Jul 2019 at 06:13, Urs Liska <lists at openlilylib.org> wrote:

> 18. Juli 2019 23:50, "Karl Berry" <karl at freefriends.org> schrieb:
>
> > Hi Urs - yes, it is no problem to keep the doc .lua files in the doc
> > tree.
> >
> >> how would I indicate this?
> >
> > The best place to describe intended installation layout is in the README
> > file, although assuming the CTAN upload will have (something like)
> > doc/luaexamples/*.lua vs. tex/subfolder/*.lua, it will be evident to me
> > what to do.
>
> For clarity I'll state that the package is called `luatemplates`.
>
> The structure relevant to the documentation is
>
> <root>
> |- luatemplates.sty
> |- luatemplates.lua
> |- documentation
>    |- luatemplates.tex (the manual)
>    |- luatemplates-manual-templates.lua (required as Lua module by the
> manual)
>    |- examples
>       |- examples-type-one.lua (just listed in the manual)
>       |- examples-type-two.lua (listed *and required* in/from the manual)
>       |- example*.tex (example files to look at, each having a
> corresponding .lua file)
> |- ..
>
> >
> > Also, what would be the appropriate link
> > to point to in the manual (you'll find the example files in ...)?
> >
> > It depends on the appropriate subdirectory of doc, e.g.,
> > texmf-dist/doc/latex/yourpkgname/luaexamples, but "latex" might be
> > "generic" or "support" or whatever. It depends on what your package does
> :).
> > I usually use something corresponding to the main CTAN subtree location.
> > (Suggesting something is fine.)
>
> The package is a generic tool for simplifying the development of Lua-based
> packages, allowing "formatter" templates or functions to be defined in Lua
> and all the macro and argument handling be done automatically. [1]
>
> >
> > Another thing that can be useful to mention is running "texdoc -l
> > yourpkgname", which should show all the relevant files (and maybe some
> > irrelevant ones), including the examples.
> >
>
> I didn't know that, sorry. This seems like a good suggestion to give
> readers an easy way of finding the examples.
>
> > On another front:
> >
> >> require(subfolder.module-name) from the main .lua file.
> >
> > Does that actually work?
>
> I don't really know, that's why I brought it up in this email. It works in
> my development repository but I know I can't assume the same when put into
> another context. Probably it works here because everything is found through
> relative paths.
>
> > Does your script do something to put subfolder
> > in the Lua input path, or similar(*)? If not, or even if so, I strongly
> > recommend making the file basenames be unique, like
> > yourpkg-module-name.lua.
>
> As said, maybe it just works thanks to the relative paths. Another view on
> the directory structure quoted above is
>
> <root>
> |- luatemplates.lua
> |- luatemplates
>    |- builtins.lua
>    |- formatter.lua
>    |- ...
>
> So from within luatemplates.lua I can successfully write
>
>     require('luatemplates.builtins')
>
> This does not seem to be related to the current working directory because
> it also works when compiling the manual from the "documentation"
> subdirectory.
>
> Your comment made me think of whether this worked because the files are
> relative to the caller or because they are within the search path. Since
> changing "require('builtins')" also works I assume it's the latter. In that
> case I'll rename the files to make them unique so no other users
> accidentally load them ...
> But this should also imply that the files will be found when they are
> stored in another location not findable through relative paths and
> independently of the current working directory, right?
>
> >
> > If you have a preference, the runtime .lua files can end up either under
> > scripts/ or under tex/. Let me know. --best, karl.
>
> I don't know much about the TDS, but it seems somewhat natural that they
> are under scripts/.
>
> Thank you for the comments, and your work in general!
> Best
> Urs
>
> [1]
> This is not meant as a request but rather as an invitaion: I would be
> grateful for any public feedback (and discussiton, and contribution)
> *before* a CTAN release. The package is located at
> https://github.com/uliska/luatemplates, where also a compiled PDF of the
> current manual can be downloaded. I must admit, though, that making it work
> is a little bit tricky because it requires another package (lyluatex) to be
> run from its Github repository (instead of TeX Live), and even from a
> specific branch.
>
> For a glimpse of what it does the following example files may give an idea:
>
> https://github.com/uliska/luatemplates/blob/master/documentation/examples/luatemplates-mwe.tex
> and
>
> https://github.com/uliska/luatemplates/blob/master/documentation/examples/luatemplates-mwe-templates.lua
>    or
>
> https://github.com/uliska/luatemplates/blob/master/documentation/examples/validate-options.tex
> and
>
> https://github.com/uliska/luatemplates/blob/master/documentation/examples/validate-options.lua
> >
> > (*) It is possible to use kpsewhich --subdir=yourpkg to filter the
> possible
> > extraneous matches, which I implemented years ago for Heiko, but from a
> > quick grep, I didn't see anything actually using it ...
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190719/2173dd6d/attachment.html>

From dwz at sjtu.edu.cn  Fri Jul 19 07:25:45 2019
From: dwz at sjtu.edu.cn (dwz at sjtu.edu.cn)
Date: Fri, 19 Jul 2019 13:25:45 +0800
Subject: BUG: Installation failure with texlive2019 on windows
Message-ID: <000001d53df2$6a64d270$3f2e7750$@sjtu.edu.cn>

Dear TEX Live Supporter,

 



 

I encountered a problem when installing TEX Live 2019 on windows10, like
presented in the picture above. 

 

Installing [0001/3758, time/total: ??:??/??:??]: 12many [376k]

TLPDB::_install_package: unsupported container format xz

Installation failed.

Rerunning the installer will try to restart the installation.

Or you can restart by running the installer with:

  install-tl-windows.bat --profile installation.profile [EXTRA-ARGS]

or

  install-tl-advanced.bat --profile installation.profile [EXTRA-ARGS]

 

Can you help me with this? Thank you very much.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190719/3f2744bc/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 12646 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20190719/3f2744bc/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 24287 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20190719/3f2744bc/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ????_20190719132050.png
Type: image/png
Size: 24287 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20190719/3f2744bc/attachment-0005.png>

From nico at semmle.com  Fri Jul 19 11:15:07 2019
From: nico at semmle.com (Nicolas Waisman)
Date: Fri, 19 Jul 2019 06:15:07 -0300
Subject: Buffer overflow on axohelp
In-Reply-To: <201907182112.x6ILC8Gp011655@freefriends.org>
References: <CADJ_3a9=hrYc0_i_tfEZmG3aWAm6DAPoLDExgk9+a+gZ+snZ6g@mail.gmail.com>
 <201907182112.x6ILC8Gp011655@freefriends.org>
Message-ID: <CADJ_3a9cazisHibi0FGaxEyrQXHzJt8N4R3BmcSvVL1Vb_n8Nw@mail.gmail.com>

Sorry about that Karl. Where I look for a contact, it mention this as the
place to report "bugs", it was not every specific :D, I should have dig
more.

Thanks again
Nico
PS: Please let me know when you have a patch

On Thu, 18 Jul 2019 at 18:12, Karl Berry <karl at freefriends.org> wrote:

>     There is a buffer overflow on the way axohelp handle the .ax1 files.
>
> Thanks for the report. I forwarded it to the axohelp author, John
> Collins.  I expect one of us will fix it soon (in the sources at least),
> one way or another.
>
>     coordinate my disclosure
>
> Well, since you sent the report to a public list instead of our
> "security" list (tlsecurity at tug.org), it is already disclosed. Not that
> I think this particular vulnerability is drop-everything crucial;
> axohelp is rarely used and has no special privileges.
>
> Thanks again. --karl
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190719/af46deef/attachment.html>

From reinhard.kotucha at web.de  Fri Jul 19 20:24:57 2019
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 19 Jul 2019 20:24:57 +0200
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <fc9fef5c-d076-8436-3c31-55b78bb58ed9@gmail.com>
References: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>
 <trinity-a54ac742-1b7b-4583-b976-4216f7db6a44-1562912905334@3c-app-gmx-bs69>
 <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>
 <b660f644-db68-3b0b-7339-622b678ea0d9@gmx.net>
 <20190714042316.7lxdrvmr4yq6k5s6@bulldog.preining.info>
 <8c52a326-b749-2d92-25d7-691edc9b0759@gmx.net>
 <20190717022114.fufk66fdb5tguyks@bulldog.preining.info>
 <aa58372e-c5d8-2cc6-e76f-a9868c93affb@gmx.net>
 <20190719013426.gvrttfxrp7faqzsr@burischnitzel.preining.info>
 <fc9fef5c-d076-8436-3c31-55b78bb58ed9@gmail.com>
Message-ID: <23858.2809.954339.668548@gargle.gargle.HOWL>

On 2019-07-18 at 22:19:15 -0400, Ken Brown wrote:

 > On 7/18/2019 9:34 PM, Norbert Preining wrote:
 > > Hi Torsten,
 > >
 > > thanks for your debugging, this is all strange.
 > >
 > >> DEBUG cmd = wget http://mirror.ctan.org --timeout=30 -O nul 2>&1
 > >
 > >>      my $cmd = "$wget $mirror --timeout=$NetworkTimeout -O "
 > >> !              . (win32() ? "nul" : "/dev/null")
 > >> !              . " 2>&1 >" . (win32() ? "nul" : "/dev/null");
 > >
 > > So you *DO* get win32() == true ... in contrast to what you send me.
 > >
 > > It seems that
 > > - if the program is started via tlmgr.bat, perl detects is a Windows.
 > > - the redirection in the .bat file to nul works
 > > - the -O nul does NOT work because wget thinks different
 > >
 > > So this is really messed up situation, and now I somehow agree
 > > with Reinhard that mixing .bat Windows files with cygwin seems
 > > not an optimal solution.
 > >
 > > What puzzles me is that with the abov change one should *still*
 > > get the nul file from the -O, so maybe my theory is still not
 > > correct.
 > >
 > >> DEBUG cmd = wget http://mirror.ctan.org --timeout=30 -O nul 2>&1 >nul
 > >> than it seems to work. At least for this test case. Here is the diff
 > >
 > > Very very strange ...
 > >
 > > Any cygwin knowledgable participants here?
 >
 > I've been casually following this discussion, as the maintainer of
 > TeX Live on Cygwin, and I too agree with Reinhard.  Using Cygwin
 > tools to install Win32 TeX Live is asking for trouble.

Installation is not a problem.  TeX Live allows installation for more
than one platform already.  The post-install steps are done on the
current platform and the binaries for other platforms are just
extracted from the archives.  The only thing you can't do is to
install Unix binaries on Windows because Windows doesn't support Unix
symlinks.

But it's possible nowadays to install Cygwin binaries under Windows
because Cygwin symlinks are regular files.  What worked for me is to
install TeX Live on a Linux system at home with additional binaries
for Windows and Cygwin, create a .tar.xz file of the whole tree on a
USB stick, and extract the archive under Cygwin.  After setting PATH
on Cygwin and Windows everything works as expected.

As far as I understand, Torsten has a Windows installation and uses
Cygwin for convenient maintenance.  What IMO can't work reliably is
that his Cygwin PATH contains the bin/win32 binaries.  Even if this
worked in the past, if Cygwin binaries are linked against the cygwin
DLLs and Windows binaries are linked against against MSVCRT.DLL, there
*must* be differences in behavior.

tlmgr is a Perl script and works the same way on all platforms.  At
least until external programs are called.  If tlmgr calls an external
program under Cygwin with bin/win32 in PATH, this program assumes that
you're under Windows, not Cygwin.  Same problem with Perl modules.
There are binary modules which are linked against .so files on Cygwin
and .dll files on Windows.

Norbert, you already spent a lot of time in order to find out how to
fix tlmgr.  I don't think that tlmgr is the culprit.

If this works for Torsten

  * tlmgr platform add cygwin

  * prepend /cygdrive/c/TeX/bin/cygwin to the Cygwin PATH

everything is fine.  It's at least the only *correct* solution and I
don't see any reason to support anything else.  I also don't expect
that my x86_64-linux binaries work on my Rapberry Pi.

And there is no need to install anything from scratch.  Only the
binaries for Cygwin have to be added to the existing installation.

Torsten, does what I suggest work for you?

Regards,
  Reinhard

--
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From karl at freefriends.org  Fri Jul 19 23:48:58 2019
From: karl at freefriends.org (Karl Berry)
Date: Fri, 19 Jul 2019 15:48:58 -0600
Subject: Buffer overflow on axohelp
In-Reply-To: <CADJ_3a9cazisHibi0FGaxEyrQXHzJt8N4R3BmcSvVL1Vb_n8Nw@mail.gmail.com>
Message-ID: <201907192148.x6JLmwmb030676@freefriends.org>

    place to report "bugs", it was not every specific

True enough :). I added an item for tlsecurity on the
tug.org/texlive/bugs.html page.

Anyway, as for the actual problem, John is working on it. I'll let you
know when he has a patch. --thanks, karl.

From karl at freefriends.org  Sat Jul 20 00:25:54 2019
From: karl at freefriends.org (Karl Berry)
Date: Fri, 19 Jul 2019 16:25:54 -0600
Subject: Lua files as examples
In-Reply-To: <411486c43784e69a5331c27ed334f4b0@openlilylib.org>
Message-ID: <201907192225.x6JMPsi3002703@freefriends.org>

Hi Urs - the package sounds nice. Happy developing :).

    So my lua files are *not* intended to be used from the command line,
    only from documents/packages. 

For the record, the distinction between scripts/ and tex/ is not
strict. Both are searched for .lua files.

Well, everything that's invoked from the command line is in scripts/, as
far as I know. But sometimes document-intended .lua files are there too,
and that's ok.

    So they should rather be placed in the tex/luatex subtree.

Agreed. That sounds fine.

Ulrike, thanks for chiming in. --best, karl.

From eduardoochs at gmail.com  Sat Jul 20 06:29:43 2019
From: eduardoochs at gmail.com (Eduardo Ochs)
Date: Sat, 20 Jul 2019 01:29:43 -0300
Subject: Packages that only have Lua files
Message-ID: <CADs++6gTXh1_dLstz0bKmv-ZSmn2QuXU20U8-iwsYyn8nD=ttw@mail.gmail.com>

Hi List,

Are there any examples on CTAN of packages that are made of Lua files
only, except for documentation? I have this package here, that I would
like to submit to CTAN soon - i.e., in a few months - that is like
that...

  http://angg.twu.net/dednat6.html

In order to use it, in, say, foo.tex, one has to copy to the same
directory of foo.tex the file "dednat6load.lua" and the directory
"dednat6/" - that only contains Lua files.

  Thanks in advance!!!
    Eduardo Ochs
    http://angg.twu.net/dednat6.html
    http://angg.twu.net/math-b.html
    http://angg.twu.net/#eev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190720/cfada572/attachment.html>

From martin at dante.de  Sat Jul 20 08:43:19 2019
From: martin at dante.de (Martin Sievers)
Date: Sat, 20 Jul 2019 08:43:19 +0200
Subject: Packages that only have Lua files
In-Reply-To: <CADs++6gTXh1_dLstz0bKmv-ZSmn2QuXU20U8-iwsYyn8nD=ttw@mail.gmail.com>
References: <CADs++6gTXh1_dLstz0bKmv-ZSmn2QuXU20U8-iwsYyn8nD=ttw@mail.gmail.com>
Message-ID: <af92fb25-0b15-f6e3-533c-1a829c30c4ae@dante.de>

Am 20.07.19 um 06:29 schrieb Eduardo Ochs:
> Hi List,
> 
> Are there any examples on CTAN of packages that are made of Lua files
> only, except for documentation? I have this package here, that I would
> like to submit to CTAN soon - i.e., in a few months - that is like
> that...
> [...]

Hello,

you could/should ask the CTAN team at ctan at ctan.org  as well.

Best regards
Martin

From zdenek.wagner at gmail.com  Sat Jul 20 09:34:13 2019
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sat, 20 Jul 2019 09:34:13 +0200
Subject: Packages that only have Lua files
In-Reply-To: <af92fb25-0b15-f6e3-533c-1a829c30c4ae@dante.de>
References: <CADs++6gTXh1_dLstz0bKmv-ZSmn2QuXU20U8-iwsYyn8nD=ttw@mail.gmail.com>
 <af92fb25-0b15-f6e3-533c-1a829c30c4ae@dante.de>
Message-ID: <CAC1phybyAy-+++=f_QOAKCweS8B2cOt=xGjrHW7hMN9BysPDXQ@mail.gmail.com>

Hi,

generaly CTAN maintainers do not like a complex directory structure,
it should preferably be flat in order to mahe it easily browsable. It
is assumed that potential users would like to view it directly on the
web and if they download it, they will know what to do with it.
Maintainers of TeX Live and MiKTeX will put it to the correct
directories, hence you should put instructions to README both for
users and maintainers. Anyway, CTAN also contains hints for package
authors.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

so 20. 7. 2019 v 8:43 odes?latel Martin Sievers <martin at dante.de> napsal:
>
> Am 20.07.19 um 06:29 schrieb Eduardo Ochs:
> > Hi List,
> >
> > Are there any examples on CTAN of packages that are made of Lua files
> > only, except for documentation? I have this package here, that I would
> > like to submit to CTAN soon - i.e., in a few months - that is like
> > that...
> > [...]
>
> Hello,
>
> you could/should ask the CTAN team at ctan at ctan.org  as well.
>
> Best regards
> Martin


From petra at ctan.org  Sat Jul 20 09:37:45 2019
From: petra at ctan.org (Petra Ruebe-Pugliese)
Date: Sat, 20 Jul 2019 09:37:45 +0200
Subject: Packages that only have Lua files
In-Reply-To: <af92fb25-0b15-f6e3-533c-1a829c30c4ae@dante.de>
References: <CADs++6gTXh1_dLstz0bKmv-ZSmn2QuXU20U8-iwsYyn8nD=ttw@mail.gmail.com>
 <af92fb25-0b15-f6e3-533c-1a829c30c4ae@dante.de>
Message-ID: <20190720073744.GA2826@prptp>

Hi Martin,

I saw this question and was so happy not to have to work out a
reply, given that it was _not_ addressed to the CTAN team  ;-)

On Sat 20 Jul 2019 at 08:43:19 +0200  Martin Sievers <martin at dante.de> wrote:
> Am 20.07.19 um 06:29 schrieb Eduardo Ochs:
> > Hi List,
> > 
> > Are there any examples on CTAN of packages that are made of Lua files
> > only,

 Actually, I don't know.  I can't remember any and would have to
 devise a shrewd strategy for finding them, if they exist.

 Maybe the author of such a package could come forward and
 draw our attention to it ...

 In any case:  I doesn't matter. 
 There is a "first" for everything.
 Everything that has to do, in one way or another, with TeX &
 friends, is welcome on CTAN.

> > except for documentation? I have this package here, that I would
> > like to submit to CTAN soon - i.e., in a few months - that is like
> > that...
> > [...]

 Finding the right CTAN location might of course be a problem,
 but, as you say, we have still a few months to think about this  :-)
> 
> Hello,
> 
> you could/should ask the CTAN team at ctan at ctan.org  as well.

 No need for asking again now.

 Whatever is okay for TL is okay for CTAN, although the reverse
 is not true.
 
> Best regards
> Martin

   Best,
   Petra  (from CTAN)

-- 
Please send messages to ctan at ctan.org in English only.
Please do not send HTML messages, they are held in our spam filter.
Please do not send software via email, use the web upload form. Thanks!

From Herbert.Voss at fu-berlin.de  Sat Jul 20 09:38:25 2019
From: Herbert.Voss at fu-berlin.de (Herbert Voss)
Date: Sat, 20 Jul 2019 09:38:25 +0200
Subject: Packages that only have Lua files
In-Reply-To: <CADs++6gTXh1_dLstz0bKmv-ZSmn2QuXU20U8-iwsYyn8nD=ttw@mail.gmail.com>
References: <CADs++6gTXh1_dLstz0bKmv-ZSmn2QuXU20U8-iwsYyn8nD=ttw@mail.gmail.com>
Message-ID: <b876b574-7df0-b52b-ec4c-b231da1a7aa8@fu-berlin.de>



Am 20.07.19 um 06:29 schrieb Eduardo Ochs:

> Are there any examples on CTAN of packages that are made of Lua files
> only, except for documentation? I have this package here, that I would
> like to submit to CTAN soon - i.e., in a few months - that is like
> that...

for example: https://ctan.org/pkg/xindex

Herbert

From josef.kleber at gmx.de  Sat Jul 20 10:38:47 2019
From: josef.kleber at gmx.de (Josef Kleber)
Date: Sat, 20 Jul 2019 10:38:47 +0200
Subject: Packages that only have Lua files
In-Reply-To: <CADs++6gTXh1_dLstz0bKmv-ZSmn2QuXU20U8-iwsYyn8nD=ttw@mail.gmail.com>
References: <CADs++6gTXh1_dLstz0bKmv-ZSmn2QuXU20U8-iwsYyn8nD=ttw@mail.gmail.com>
Message-ID: <adda9c6f-215d-9b18-8b80-6230eee1757f@gmx.de>

Am 20.07.2019 um 06:29 schrieb Eduardo Ochs:
> ? http://angg.twu.net/dednat6.html
>
> In order to use it, in, say, foo.tex, one has to copy to the same
> directory of foo.tex the file "dednat6load.lua" and the directory
> "dednat6/" - that only contains Lua files.

As part of a distribution that's obviously a no go. Copy all your files
in a TDS compliant local tree. If this works there shouldn't be any
problems later as part of a distribution.

Josef


From lists at openlilylib.org  Sat Jul 20 10:43:48 2019
From: lists at openlilylib.org (Urs Liska)
Date: Sat, 20 Jul 2019 10:43:48 +0200
Subject: Packages that only have Lua files
In-Reply-To: <b876b574-7df0-b52b-ec4c-b231da1a7aa8@fu-berlin.de>
References: <CADs++6gTXh1_dLstz0bKmv-ZSmn2QuXU20U8-iwsYyn8nD=ttw@mail.gmail.com>
 <b876b574-7df0-b52b-ec4c-b231da1a7aa8@fu-berlin.de>
Message-ID: <EFA1EDBB-DDC6-4B8B-A7C6-F37659AA4066@openlilylib.org>



Am 20. Juli 2019 09:38:25 MESZ schrieb Herbert Voss <Herbert.Voss at fu-berlin.de>:
>
>
>Am 20.07.19 um 06:29 schrieb Eduardo Ochs:
>
>> Are there any examples on CTAN of packages that are made of Lua files
>> only, except for documentation? I have this package here, that I
>would
>> like to submit to CTAN soon - i.e., in a few months - that is like
>> that...
>
>for example: https://ctan.org/pkg/xindex
>

But this is a *program*, not a package to be loaded in a document, right?

I would suggest adding a .sty file as a thin wrapper around the Lua code, not because of concerns regarding CTAN but as a courtesy to the user. 
You can take care of the dependencies and reduce (of even eliminate) the use of \directlua required by the user. If I don't forget this I can write up how the necessary client side code changed (and minimized) through pulling that stuff in the package.

>Herbert


From news3 at nililand.de  Sat Jul 20 10:44:42 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Sat, 20 Jul 2019 10:44:42 +0200
Subject: Packages that only have Lua files
References: <CADs++6gTXh1_dLstz0bKmv-ZSmn2QuXU20U8-iwsYyn8nD=ttw@mail.gmail.com>
Message-ID: <o9wvh84o8du1.dlg@nililand.de>

Am Sat, 20 Jul 2019 01:29:43 -0300 schrieb Eduardo Ochs:

> Hi List,
> 
> Are there any examples on CTAN of packages that are made of Lua files
> only, except for documentation?

lualibs contains only lua files. And luaotfload in practice too -
while there is a sty it isn't needed much as latex loads the lua in
the format.  


-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From siepo at bitmuis.nl  Sat Jul 20 10:59:14 2019
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Sat, 20 Jul 2019 10:59:14 +0200
Subject: BUG: Installation failure with texlive2019 on windows
In-Reply-To: <000001d53df2$6a64d270$3f2e7750$@sjtu.edu.cn>
References: <000001d53df2$6a64d270$3f2e7750$@sjtu.edu.cn>
Message-ID: <20190720085914.GA1319@bitmuis.nl>

On Fri, Jul 19, 2019 at 01:25:45PM +0800, dwz at sjtu.edu.cn wrote:
> Dear TEX Live Supporter,
> 
>  
> 
> 
> 
>  
> 
> I encountered a problem when installing TEX Live 2019 on windows10, like
> presented in the picture above. 
> 
>  
> 
> Installing [0001/3758, time/total: ??:??/??:??]: 12many [376k]
> 
> TLPDB::_install_package: unsupported container format xz

The installer should contain an unpacker xz.exe for xz files, so
either the downloaded installer was corrupt or something strange is
going on.

The installer ended with writing a logfile, according to your second
screenshot. Maybe it contains better clues?

-- 
Siep Kroonenberg

From Torsten.Schuetze at gmx.net  Sat Jul 20 20:33:56 2019
From: Torsten.Schuetze at gmx.net (=?UTF-8?Q?=22Torsten_Sch=C3=BCtze=22?=)
Date: Sat, 20 Jul 2019 20:33:56 +0200
Subject: Aw: Re: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <23858.2809.954339.668548@gargle.gargle.HOWL>
References: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>
 <trinity-a54ac742-1b7b-4583-b976-4216f7db6a44-1562912905334@3c-app-gmx-bs69>
 <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>
 <b660f644-db68-3b0b-7339-622b678ea0d9@gmx.net>
 <20190714042316.7lxdrvmr4yq6k5s6@bulldog.preining.info>
 <8c52a326-b749-2d92-25d7-691edc9b0759@gmx.net>
 <20190717022114.fufk66fdb5tguyks@bulldog.preining.info>
 <aa58372e-c5d8-2cc6-e76f-a9868c93affb@gmx.net>
 <20190719013426.gvrttfxrp7faqzsr@burischnitzel.preining.info>
 <fc9fef5c-d076-8436-3c31-55b78bb58ed9@gmail.com>
 <23858.2809.954339.668548@gargle.gargle.HOWL>
Message-ID: <trinity-cfd5c3b0-0361-48fa-ab56-133deff40089-1563647635984@3c-app-gmx-bs77>

Hi all,

Reinhard Kotucha schrieb:
>
> As far as I understand, Torsten has a Windows installation and uses
> Cygwin for convenient maintenance.  What IMO can't work reliably is
> that his Cygwin PATH contains the bin/win32 binaries.  Even if this
> worked in the past, if Cygwin binaries are linked against the cygwin
> DLLs and Windows binaries are linked against against MSVCRT.DLL, there
> *must* be differences in behavior.

just to clarify: with my setup everything works fine EXCEPT the nul file, which is only a small disturbance. I now see that I obviously run a non-supported setup. But with the change described in my last mail (2>&1 > nul) everything is fine again. So, why not add it?

Therefore I don't see a urgent reason to change my setup. It should be noted that I need the TeX system under plain Win64 AND Cygwin. And I don't want to have two separate TeX installations. I could live with adding just the Cygwin binaries to the Win32/64 TeX System, but

> Norbert, you already spent a lot of time in order to find out how to
> fix tlmgr.  I don't think that tlmgr is the culprit.
>
> If this works for Torsten
>
>   * tlmgr platform add cygwin

this command from a Win64 cmd line doesn't work

tlmgr platform add cygwin
action `platform' not supported on Windows
tlmgr.pl: action platform returned an error; continuing.
Can't call method "option" on an undefined value at C:\TeX\texmf-dist\scripts\texlive\tlmgr.pl line 938.


>   * prepend /cygdrive/c/TeX/bin/cygwin to the Cygwin PATH
>
> everything is fine.  It's at least the only *correct* solution and I
> don't see any reason to support anything else.  I also don't expect
> that my x86_64-linux binaries work on my Rapberry Pi.
>
> And there is no need to install anything from scratch.  Only the
> binaries for Cygwin have to be added to the existing installation.
>
> Torsten, does what I suggest work for you?

No. See above. And if I use the cygwin setup-x86_64.exe, it installs TeX Live under Cygwin standard places.

I somehow could befriend with installing the cygwin binaries (only the binaries) in addition to Win32 TeXLive binaries. But for another reason: As far as I see the TeXLive binaries are still 'only' win32 (if one doesn't install the Win64 binaries from CTAN/systems/win32/w32tex/TLW64/tl-win64.zip). I tested above 64-bit binaries from Akira during the pretest phase. The cygwin TeXLive binaries would be 64-bit too, wouldn't they?

So, if my current setup is not supported, how can I install just the cygwin binaries under C:\TeX\bin\...?

@Ken: Why do I not use cygwin TeXLive in the first place? First, I somehow support the TeXLive installation for friends and colleagues. And not all of them use cygwin, but all use plain Windows. Second, in the past and during pretest, the win32 binaries came earlier than cygwin packages. And up to this conversation, I didn't see any big differences between Win32 and Cygwin packages. Similar situation as with the openSuSE Tumbleweed TeXLive system packages and separate TeX installation under /usr/local/TeX. At least I thought so...

Ciao,
  Torsten


From vojta at math.berkeley.edu  Sat Jul 20 22:29:38 2019
From: vojta at math.berkeley.edu (Paul Vojta)
Date: Sat, 20 Jul 2019 13:29:38 -0700
Subject: xdvi figure rendering broken with gs 9.26
In-Reply-To: <20190714002051.qykfqwifjcjlg47d@math.berkeley.edu>
References: <20190712204713.b6djtdrornjauhg4@math.berkeley.edu>
 <201907122143.x6CLhjQ9015399@freefriends.org>
 <20190713060310.re2eef2bv5vx7372@math.berkeley.edu>
 <20190714002051.qykfqwifjcjlg47d@math.berkeley.edu>
Message-ID: <20190720202938.lubwanajgcnmofjr@math.berkeley.edu>

Here's the final (I hope) version of the patch.  This one correctly supports
printing PostScript error messages.

On Sat, Jul 13, 2019 at 05:20:51PM -0700, Paul Vojta wrote:
> On Fri, Jul 12, 2019 at 11:03:10PM -0700, Paul Vojta wrote:
> > On Fri, Jul 12, 2019 at 03:43:45PM -0600, Karl Berry wrote:
> > >     What do you think of xdvi using libgs sometime down the road?
> > > 
> > > In short, it's painful.
> > > 
> > > dvisvgm uses libgs. What we found is that, for TL, it must be dlopen()d
> > > at runtime; otherwise, the shared library dependency (and the induced
> > > dependency on libstdc++) makes the binary unusable on a plurality of
> > > systems. Whereas distros would like to link with the libgs/libstdc++
> > > that any particular release provides. You can see the lengths that
> > > Martin G and I have gone to deal with in the dvisvgm sources in TL.
> > > 
> > > So ... if there's any way to keep the interface at the PostScript level,
> > > that sounds a lot simpler to me. Is /execute et al. still available in
> > > some private dictionary or something, maybe? Or maybe the gs people
> > > would be willing to do that, since they said they were willing to "work
> > > with" application developers affected by the removal of all those
> > > operators.
> > > 
> > > Thanks,
> > > Karl
> > 
> > Here's a proposed fix.  I haven't tried it in xdvik, only in the non-k xdvi.
> > But it should work.
> > 
> > (This only fixes the more recent of the two bugs I mentioned.  I'm still
> > looking into the other one.)
> > 
> > Paul
> 
> Oops, the following would probably be better.
> 
> Paul
> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: psgs.pat
Type: image/x-coreldrawpattern
Size: 447 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20190720/f60c8138/attachment.bin>

From norbert at preining.info  Sun Jul 21 13:18:33 2019
From: norbert at preining.info (Norbert Preining)
Date: Sun, 21 Jul 2019 20:18:33 +0900
Subject: xdvi figure rendering broken with gs 9.26
In-Reply-To: <20190720202938.lubwanajgcnmofjr@math.berkeley.edu>
References: <20190712204713.b6djtdrornjauhg4@math.berkeley.edu>
 <201907122143.x6CLhjQ9015399@freefriends.org>
 <20190713060310.re2eef2bv5vx7372@math.berkeley.edu>
 <20190714002051.qykfqwifjcjlg47d@math.berkeley.edu>
 <20190720202938.lubwanajgcnmofjr@math.berkeley.edu>
Message-ID: <20190721111833.zafj35h7czhrd3w4@bulldog.preining.info>

Hi Paul,

thanks a lot!

On Sat, 20 Jul 2019, Paul Vojta wrote:
> Here's the final (I hope) version of the patch.  This one correctly supports
> printing PostScript error messages.NA

The patch seems to be based on your development version. I included hier
in the TL 2019 sources I use for Debian as follows:

--- texlive-bin.orig/texk/xdvik/psgs.c
+++ texlive-bin/texk/xdvik/psgs.c
@@ -561,7 +561,8 @@ initGS(void)
        ">> setuserparams .locksafe "
        "} stopped pop\n";
     static const char str1[] =
-       "/xdvi$run {$error /newerror false put {currentfile cvx execute} stopped pop} "
+       "/xdvi$run "
+       "{$error /newerror false put currentfile cvx stopped {handleerror} if} "
        "def "
        "/xdvi$ack (\347\310\376) def "
        "/xdvi$dslen countdictstack def "

All the best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From karl at freefriends.org  Sun Jul 21 23:21:58 2019
From: karl at freefriends.org (Karl Berry)
Date: Sun, 21 Jul 2019 15:21:58 -0600
Subject: xdvi figure rendering broken with gs 9.26
In-Reply-To: <20190721111833.zafj35h7czhrd3w4@bulldog.preining.info>
Message-ID: <201907212121.x6LLLw60002533@freefriends.org>

    -       "/xdvi$run {$error /newerror false put {currentfile cvx execute} stopped pop} "
    +       "/xdvi$run "
    +       "{$error /newerror false put currentfile cvx stopped {handleerror} if} "

Sadly, it doesn't work for me with gs 9.27 (installed unmodified from
the original source), and the original test .tex+.eps from
https://bugs.mageia.org/show_bug.cgi?id=24941. The figure space still
comes up empty (and still shows up fine with 9.26).

Or is that the new expected behavior? (I'm missing how anything gets
executed now.) That would mean PS rendering is doa, since GS will
presumably never bring back those operators :(. --thanks, karl.

From preining at logic.at  Mon Jul 22 02:24:21 2019
From: preining at logic.at (Norbert Preining)
Date: Mon, 22 Jul 2019 09:24:21 +0900
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <trinity-cfd5c3b0-0361-48fa-ab56-133deff40089-1563647635984@3c-app-gmx-bs77>
References: <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>
 <b660f644-db68-3b0b-7339-622b678ea0d9@gmx.net>
 <20190714042316.7lxdrvmr4yq6k5s6@bulldog.preining.info>
 <8c52a326-b749-2d92-25d7-691edc9b0759@gmx.net>
 <20190717022114.fufk66fdb5tguyks@bulldog.preining.info>
 <aa58372e-c5d8-2cc6-e76f-a9868c93affb@gmx.net>
 <20190719013426.gvrttfxrp7faqzsr@burischnitzel.preining.info>
 <fc9fef5c-d076-8436-3c31-55b78bb58ed9@gmail.com>
 <23858.2809.954339.668548@gargle.gargle.HOWL>
 <trinity-cfd5c3b0-0361-48fa-ab56-133deff40089-1563647635984@3c-app-gmx-bs77>
Message-ID: <20190722002421.ymo5y7pn3tf4ns3h@bulldog.preining.info>

Hi Torsten,

> 2>&1 > nul everything is fine again. So, why not add it?

Because:
- we need to be sure that this change does not break any other system
- that this change is not a peculiarity of a certain version of cygwin
  and/or windows
- that we understand the reasons

> Therefore I don't see a urgent reason to change my setup.

I agree, and I propose to just ignore the nul file for now, or make the
changes you suggested after updates to texlive.infra (which doesn't
happen that often). I will look into at some point.

> >   * tlmgr platform add cygwin

Reinhard, on win32 platform support is not present, because links are
not supported.

> action `platform' not supported on Windows

Correct.

> tlmgr.pl: action platform returned an error; continuing.

Correct.

> Can't call method "option" on an undefined value at C:\TeX\texmf-dist\scripts\texlive\tlmgr.pl line 938.

Strange ... I need to look into that ... (3min later) ... fixed in svn.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From reinhard.kotucha at web.de  Mon Jul 22 02:46:22 2019
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 22 Jul 2019 02:46:22 +0200
Subject: Aw: Re: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <trinity-cfd5c3b0-0361-48fa-ab56-133deff40089-1563647635984@3c-app-gmx-bs77>
References: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>
 <trinity-a54ac742-1b7b-4583-b976-4216f7db6a44-1562912905334@3c-app-gmx-bs69>
 <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>
 <b660f644-db68-3b0b-7339-622b678ea0d9@gmx.net>
 <20190714042316.7lxdrvmr4yq6k5s6@bulldog.preining.info>
 <8c52a326-b749-2d92-25d7-691edc9b0759@gmx.net>
 <20190717022114.fufk66fdb5tguyks@bulldog.preining.info>
 <aa58372e-c5d8-2cc6-e76f-a9868c93affb@gmx.net>
 <20190719013426.gvrttfxrp7faqzsr@burischnitzel.preining.info>
 <fc9fef5c-d076-8436-3c31-55b78bb58ed9@gmail.com>
 <23858.2809.954339.668548@gargle.gargle.HOWL>
 <trinity-cfd5c3b0-0361-48fa-ab56-133deff40089-1563647635984@3c-app-gmx-bs77>
Message-ID: <23861.1886.256783.79126@gargle.gargle.HOWL>

On 2019-07-20 at 20:33:56 +0200, "Torsten Sch?tze" wrote:

 > Hi all,
 > 
 > Reinhard Kotucha schrieb:
 > >
 > > As far as I understand, Torsten has a Windows installation and uses
 > > Cygwin for convenient maintenance.  What IMO can't work reliably is
 > > that his Cygwin PATH contains the bin/win32 binaries.  Even if this
 > > worked in the past, if Cygwin binaries are linked against the cygwin
 > > DLLs and Windows binaries are linked against against MSVCRT.DLL, there
 > > *must* be differences in behavior.
 > 
 > just to clarify: with my setup everything works fine EXCEPT the nul
 > file, which is only a small disturbance. I now see that I obviously
 > run a non-supported setup. But with the change described in my last
 > mail (2>&1 > nul) everything is fine again. So, why not add it?

Torsten, tlmgr is Norbert's kid and thus Norbert has to decide.

But I don't think that everything is fine.  It's nice that your
mixture of operating systems worked in the past.  I'm convinced that
there are many other incompatibilities and that you just touched the
tip of the iceberg.  I strongly recommend not to support such setups
because this makes tlmgr and the installer unmaintainable.

What you want to achive is quite common.  Many people want to install
TeX Live from tug.org on Cygwin so that it can be used from both,
Cygwin and Windows.  This is fully supported by TeX Live for decades.
If it's not clear it makes much more sense to add something to the
HTML documentation @tug.org instead of changing the software.

In short: The proper way to install TeX Live for both systems is to do
that under Cygwin and enable "Windows (win32)" in the "binaries" menu
of the installer.  You have to set PATH, MANPATH, and INFOPATH on
both, Cygwin and Windows.  I can confirm that it works as expected.


 > Therefore I don't see a urgent reason to change my setup. It should
 > be noted that I need the TeX system under plain Win64 AND
 > Cygwin. And I don't want to have two separate TeX installations. I
 > could live with adding just the Cygwin binaries to the Win32/64 TeX
 > System, but
 > 
 > >   * tlmgr platform add cygwin
 > 
 > this command from a Win64 cmd line doesn't work
 > 
 > tlmgr platform add cygwin action `platform' not supported on
 > Windows tlmgr.pl: action platform returned an error; continuing.
 > Can't call method "option" on an undefined value at
 > C:\TeX\texmf-dist\scripts\texlive\tlmgr.pl line 938.

Invoke "tlmgr platform add cygwin" on Cygwin.  The error message

   action `platform' not supported on Windows

means that you can't add Unix binaries on Windows because Windows
can't create the symlinks for Unix systems.

However, it seems that symlinks under Cygwin are regular files.  They
contain a mixture of ASCII and UTF-16.  I'm on leave now and have no
acces to a Windows machine.  But I remember that they begin with
"<symlink" but the actual path is in UTF-16, like
"^@t^@e^@x^@l^@i^@v^@e".

Given that symlinks are regular files under Cygwin and both, Cygwin
and Windows share the same file system, it should be possible to allow
tlmgr to add the Cygwin binaries even when invoked under Windows.  But
I don't recommend to add the feature to tlmgr and the installer until
it's thoroughly tested.

> And I don't want to have two separate TeX installations.

No need at all.

 > And if I use the cygwin setup-x86_64.exe, it installs TeX Live
 > under Cygwin standard places.

I'm aware that this is not what you want.  The Cygwin standard places
are accessible by Windows but Cygwin doesn't provide win32 binaries.

 > I somehow could befriend with installing the cygwin binaries (only
 > the binaries) in addition to Win32 TeXLive binaries. But for
 > another reason: As far as I see the TeXLive binaries are still
 > 'only' win32 (if one doesn't install the Win64 binaries from
 > CTAN/systems/win32/w32tex/TLW64/tl-win64.zip). I tested above
 > 64-bit binaries from Akira during the pretest phase. The cygwin
 > TeXLive binaries would be 64-bit too, wouldn't they?

Yes.  And it doesn't matter whether you are using the TeX Live
installer from tug.org or Cygwin's package manager.  They are always
64 bit.

TeX Live currently provides 32-bit binaries for Windows because many
people still have 32-bit machines and the benefit of 64-bit binaries
is quite small.  TeX Live will switch to 64 bits when Microsoft drops
win32 support.  It's not difficult to switch to new binaries but it's
a lot of work to maintain two different sets of binaries for Windows
at the same time.  Not only the files in bin/win32 are affected but
also Perl, Ghostscript, TeXworks, etc. which TL doesn't provide for
any other platform.

 > So, if my current setup is not supported, how can I install just
 > the cygwin binaries under C:\TeX\bin\...?

Try to run tlmgr under Cygwin with bin/win32 in PATH in order to
install the missing binaries.  tlmgr assumes then that you are under
Cygwin because you are using Cygwin's Perl.  I'm not sure whether
tlmgr supports the addition of binaries for the platform you are
currently using (this is quite strange, isn't it?) but its worth a
try.

If this doesn't work, you can extract the file

  http://ms25.ddns.net/texlive/w32/x86_64-cygwin.zip 

in C:/TeX/bin .  I don't know whether it works either.  I just created
the zip file from my Linux installation and this contained real Unix
symlinks, not the regular files I've seen on Cygwin and Windows.  But
I don't know how they are processed by zip/unzip.  I must admit that
this is not the best solution anyway because tlmgr is not aware of
the new binaries and thus you don't get updates for them.

I personally believe that the cleanest solution is to install TL from
scratch under Cygwin with additional binaries for win32.  This is
fully supported by TeX Live.  I also recommend to keep the "2019"
directory so that TL-2019 and TL-2020 can exist side-by-side and you
don't have to delete anything until the new release is properly set
up.

At work, most of the time I use TeX Live on Debian within a virtual
machine under Windows.  This is very convenient and everything is much
faster than under Windows but it's less convenient to share files
among the sytems.  The VM supports a shared directory but Windows adds
the executable bits to all files, which is extremely annoying.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From reinhard.kotucha at web.de  Mon Jul 22 04:19:35 2019
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 22 Jul 2019 04:19:35 +0200
Subject: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <20190722002421.ymo5y7pn3tf4ns3h@bulldog.preining.info>
References: <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>
 <b660f644-db68-3b0b-7339-622b678ea0d9@gmx.net>
 <20190714042316.7lxdrvmr4yq6k5s6@bulldog.preining.info>
 <8c52a326-b749-2d92-25d7-691edc9b0759@gmx.net>
 <20190717022114.fufk66fdb5tguyks@bulldog.preining.info>
 <aa58372e-c5d8-2cc6-e76f-a9868c93affb@gmx.net>
 <20190719013426.gvrttfxrp7faqzsr@burischnitzel.preining.info>
 <fc9fef5c-d076-8436-3c31-55b78bb58ed9@gmail.com>
 <23858.2809.954339.668548@gargle.gargle.HOWL>
 <trinity-cfd5c3b0-0361-48fa-ab56-133deff40089-1563647635984@3c-app-gmx-bs77>
 <20190722002421.ymo5y7pn3tf4ns3h@bulldog.preining.info>
Message-ID: <23861.7479.124076.607544@gargle.gargle.HOWL>

On 2019-07-22 at 09:24:21 +0900, Norbert Preining wrote:

 > Reinhard, on win32 platform support is not present, because links
 > are not supported.

Hi Norbert,
sure, but I assumed that Torsten tries this under Cygwin with
bin/win32 in PATH.  Under Cygwin Perl assumes that he's under Cygwin
and the restriction doesn't exist.  The question is whether tlmgr
allows to add binaries to the system which is currently in use.

But I don't think that there is any reason to support such a mixture
of operating systems.  TeX Live allows to install binaries for various
platforms at once (though not under Windows).  Everything works fine.

Everything works as expected if TeX Live is set up properly at install
time on Cygwin.  I've described the details in a previous mail and
don't want to repeat them here.

There are only two points worth a discussion:

  1. Installing TL for both, Windows and Cygwin is a common case and
     works like a charm.  If users still run into trouble, maybe the
     documentation has to be improved.

  2. Given that Cygwin and Windows share the same file system and
     symlinks are regular files on Cygwin, tlmgr and the installer
     could allow to add binaries for Cygwin even under Windows.  But
     as I said in a previous mail, thorough testing is required in
     advance.

     Please also note that all this is not necessary if people set up
     their systems properly.  It makes much more sense to improve the
     documentation in order to prevent people from running into the
     problems Torsten encountered.  Such problems are easily avoidable
     with proper documentation.

Regards,
  Reinhard

--
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From kbrow1i at gmail.com  Mon Jul 22 04:43:49 2019
From: kbrow1i at gmail.com (Ken Brown)
Date: Sun, 21 Jul 2019 22:43:49 -0400
Subject: Aw: Re: Undesirable nul file with tlmgr.bat under Windows
In-Reply-To: <23861.1886.256783.79126@gargle.gargle.HOWL>
References: <20190712000422.sg7df26sbikby4mm@burischnitzel.preining.info>
 <trinity-a54ac742-1b7b-4583-b976-4216f7db6a44-1562912905334@3c-app-gmx-bs69>
 <20190712063209.xhy2yy2mqyrllg6r@bulldog.preining.info>
 <b660f644-db68-3b0b-7339-622b678ea0d9@gmx.net>
 <20190714042316.7lxdrvmr4yq6k5s6@bulldog.preining.info>
 <8c52a326-b749-2d92-25d7-691edc9b0759@gmx.net>
 <20190717022114.fufk66fdb5tguyks@bulldog.preining.info>
 <aa58372e-c5d8-2cc6-e76f-a9868c93affb@gmx.net>
 <20190719013426.gvrttfxrp7faqzsr@burischnitzel.preining.info>
 <fc9fef5c-d076-8436-3c31-55b78bb58ed9@gmail.com>
 <23858.2809.954339.668548@gargle.gargle.HOWL>
 <trinity-cfd5c3b0-0361-48fa-ab56-133deff40089-1563647635984@3c-app-gmx-bs77>
 <23861.1886.256783.79126@gargle.gargle.HOWL>
Message-ID: <c209cdfc-73ca-4e3e-b27e-6c99967d948d@gmail.com>

On 7/21/2019 8:46 PM, Reinhard Kotucha wrote:
> On 2019-07-20 at 20:33:56 +0200, "Torsten Sch?tze" wrote:
>   > The cygwin
>   > TeXLive binaries would be 64-bit too, wouldn't they?
> 
> Yes.  And it doesn't matter whether you are using the TeX Live
> installer from tug.org or Cygwin's package manager.  They are always
> 64 bit.

For the record, I provide both 32-bit and 64-bit binaries for Cygwin.

Ken

From vojta at math.berkeley.edu  Mon Jul 22 08:56:18 2019
From: vojta at math.berkeley.edu (Paul Vojta)
Date: Sun, 21 Jul 2019 23:56:18 -0700
Subject: xdvi figure rendering broken with gs 9.26
In-Reply-To: <201907212121.x6LLLw60002533@freefriends.org>
References: <20190721111833.zafj35h7czhrd3w4@bulldog.preining.info>
 <201907212121.x6LLLw60002533@freefriends.org>
Message-ID: <20190722065618.4wqgmaxvjsu2z6s2@math.berkeley.edu>

On Sun, Jul 21, 2019 at 03:21:58PM -0600, Karl Berry wrote:
>     -       "/xdvi$run {$error /newerror false put {currentfile cvx execute} stopped pop} "
>     +       "/xdvi$run "
>     +       "{$error /newerror false put currentfile cvx stopped {handleerror} if} "
> 
> Sadly, it doesn't work for me with gs 9.27 (installed unmodified from
> the original source), and the original test .tex+.eps from
> https://bugs.mageia.org/show_bug.cgi?id=24941. The figure space still
> comes up empty (and still shows up fine with 9.26).
> 
> Or is that the new expected behavior? (I'm missing how anything gets
> executed now.) That would mean PS rendering is doa, since GS will
> presumably never bring back those operators :(. --thanks, karl.

Admittedly, I didn't test it with xdvik, only with plain xdvi.

But, just now I tested it with an old version of xdvik (the version on
sourceforge, which goes back to 2016, r40253 in the TL svn).
That does work.

One possibility comes to mind.  Are you sure you're using ghostscript 9.27,
and not the current git version?  The newest gs (it identifies itself
as GIT PRERELEASE 9.28 in the first line of `gs -h`) also gives a blank
figure, but for a different reason.  In that case, though, you get terminal
output starting with "gs: Error: /invalidfileaccess in --run--".

If you are using the prerelease gs 9.28, adding the -nogssafer option
to xdvi allows you to see the figure.

Do you get any output on the terminal?

What output do you get when you run with -debug ps ?

Paul

From karl at freefriends.org  Mon Jul 22 23:56:07 2019
From: karl at freefriends.org (Karl Berry)
Date: Mon, 22 Jul 2019 15:56:07 -0600
Subject: xdvi figure rendering broken with gs 9.26
In-Reply-To: <20190722065618.4wqgmaxvjsu2z6s2@math.berkeley.edu>
Message-ID: <201907222156.x6MLu7qt021394@freefriends.org>

Hi Paul - it was my mistake. I forgot that in TL, xdvi is a shell script
that does various things with the paths. So just running xdvi in the
build directory doesn't work; quite annoying. When I put the new binary
in the regular path, the figure showed up. Yay!

I've committed the patch (Norbert's tweaked version) to TL. Thanks!!

BTW, can you make a new xdvi release sometime before TL'20, so this
change (and anything else) is in sync?
--thanks, karl.

P.S. For the record:

    Are you sure you're using ghostscript 9.27,
    and not the current git version?

I was sure. I've never compiled, or even looked at, the git version :).
Their releases are destabilizing enough.

From lists at openlilylib.org  Thu Jul 25 22:28:29 2019
From: lists at openlilylib.org (Urs Liska)
Date: Thu, 25 Jul 2019 20:28:29 +0000
Subject: Lua files as examples
In-Reply-To: <201907192225.x6JMPsi3002703@freefriends.org>
References: <201907192225.x6JMPsi3002703@freefriends.org>
Message-ID: <f2b3118e73d8c95a489b01a55cfef47b@openlilylib.org>

Hi Karl,

I have one more question: Are .lua files also found when they are in the doc tree of texlive?

Case in question: I right now have the following situation:

<root>
|- documentation
   |-luaformatters.tex
   |-luaformatters-manual.lua
   |-luaformattersmanual.sty
   |-examples
     |-example.lua
     |-...

Both luaformatters-manual.lua as well as the .lua files in the 'examples' directory should remain in these directories because they are included in the manual as listings with minted (\inputminted{lua}{examples/example.lua}) (for which I think the relative path is required). But they also have to be *found* as Lua modules from the manual, respectively its luaformattersmanual.sty.

I can't really test this because in my development repository already the root is in the LaTeX search path, and so anything in the documentation directory will be too.
In TeX Live, however, will the .lua files in the doc directory be found through the path, or at least through the relative path from the manual's .tex or .sty file?

Thanks
Urs


20. Juli 2019 00:26, "Karl Berry" <karl at freefriends.org> schrieb:

> Hi Urs - the package sounds nice. Happy developing :).
> 
> So my lua files are *not* intended to be used from the command line,
> only from documents/packages. 
> 
> For the record, the distinction between scripts/ and tex/ is not
> strict. Both are searched for .lua files.
> 
> Well, everything that's invoked from the command line is in scripts/, as
> far as I know. But sometimes document-intended .lua files are there too,
> and that's ok.
> 
> So they should rather be placed in the tex/luatex subtree.
> 
> Agreed. That sounds fine.
> 
> Ulrike, thanks for chiming in. --best, karl.


From karl at freefriends.org  Thu Jul 25 22:54:23 2019
From: karl at freefriends.org (Karl Berry)
Date: Thu, 25 Jul 2019 14:54:23 -0600
Subject: Lua files as examples
In-Reply-To: <f2b3118e73d8c95a489b01a55cfef47b@openlilylib.org>
Message-ID: <201907252054.x6PKsNFW029334@freefriends.org>

    But they also have to be *found* as Lua modules from the manual,
    respectively its luaformattersmanual.sty.

I don't know what that means. "Lua modules from the manual"?

Are you saying those .lua files need to be found by any documents using
your package, or are they specifically for your manual?

Generally there is no need for the TL import script, let alone users, to
rerun your manual, since you will (presumably) provide a preformatted
pdf.

Anyway, the answer is that the doc tree is not searched for .lua files
(or .sty or anything else). However, it is true that the current
directory is always searched, so if luatex is being run in the directory
with the .tex, a sibling .lua (and .sty and so forth) will be found. -k

From lists at openlilylib.org  Thu Jul 25 23:15:25 2019
From: lists at openlilylib.org (Urs Liska)
Date: Thu, 25 Jul 2019 21:15:25 +0000
Subject: Lua files as examples
In-Reply-To: <201907252054.x6PKsNFW029334@freefriends.org>
References: <201907252054.x6PKsNFW029334@freefriends.org>
Message-ID: <2f7e071200163a8baa224b140d3bc89a@openlilylib.org>

25. Juli 2019 22:54, "Karl Berry" <karl at freefriends.org> schrieb:

> But they also have to be *found* as Lua modules from the manual,
> respectively its luaformattersmanual.sty.
> 
> I don't know what that means. "Lua modules from the manual"?
> 
> Are you saying those .lua files need to be found by any documents using
> your package, or are they specifically for your manual?

Sorry for being unclear.
I mean that in the manual is something to the effect of "require(examples/example.lua)" *and* \inputminted{lua}{examples/example.lua}. These .lua files are *listed in* and *used by* the manual. But they are not needed for *using* the package.

> 
> Generally there is no need for the TL import script, let alone users, to
> rerun your manual, since you will (presumably) provide a preformatted
> pdf.

I do, but I thought it was a requirement that the manuals (or any other resources) should be reproducible from the sources.

> 
> Anyway, the answer is that the doc tree is not searched for .lua files
> (or .sty or anything else). However, it is true that the current
> directory is always searched, so if luatex is being run in the directory
> with the .tex, a sibling .lua (and .sty and so forth) will be found. -k

OK, so it *should* work as it is now, and given your previous comment I think it's ok to just try it out.

Thanks
Urs


From karl at freefriends.org  Thu Jul 25 23:24:25 2019
From: karl at freefriends.org (Karl Berry)
Date: Thu, 25 Jul 2019 15:24:25 -0600
Subject: Lua files as examples
In-Reply-To: <2f7e071200163a8baa224b140d3bc89a@openlilylib.org>
Message-ID: <201907252124.x6PLOPhd000561@freefriends.org>

    I thought it was a requirement that the manuals (or any other
    resources) should be reproducible from the sources.

You are absolutely correct about that. I don't make a strict requirement
that it can be reproduced with a simple command in any arbitrary
environment, but the idea is that it should be at least possible.

    OK, so it *should* work as it is now, 

Yes, I think you're fine for that purpose. That is what almost all
packages do -- put any extra stuff necessary for the manual with the
main manual .tex source, in the doc dir. --thanks, karl.

From kirillbalunov at gmail.com  Thu Jul 25 23:22:54 2019
From: kirillbalunov at gmail.com (Kirill Balunov)
Date: Fri, 26 Jul 2019 00:22:54 +0300
Subject: Relative paths with windows path separator does not work in
 TeXlive2019.
Message-ID: <CABwCVQBgK=-Vt72LZKLaFEgsYaGz6M7-2zjsA7rA7LdzwE_xow@mail.gmail.com>

Hi all! I'm new here, so apologize in advance if I choose the wrong mailing
list. I looked through the archive and found that to some extent this has
already been discussed here:
https://tug.org/pipermail/tex-live/2014-June/035499.html "Passing a valid
Windows path and file name to *TeX in TeXlive". At the end of this thread
Akira Kakuto wrote:

> In TeX Live 2015, not this year,  all of the following work on windows:
>
> pdftex test-test
> pdftex test-t~1
> pdftex c:/somedirectory/test-t~1
> pdftex c:/somedi~1/test-t~1
> pdftex c:\somedi~1\test-t~1
>
> but then wrote that '/' should be used instead of '\' even on windows.  Yes
it really works thank you.  Unfortunately this only works for absolute
paths (e.g. C:\path\to\tex\file.tex), but does not work with relative paths
(e.g. .\tex\file.tex). Would you consider to implement of such a
possibility?

Strange, but in some situations relative paths work, while in others it
does not work. For example this will work however in  -output-directory I
use relative path with Windows separators '\':

$ latex -interaction=batchmode -halt-on-error
-output-directory=".\Tex\local" "./Tex/test.tex"

but this one does not work (and no error is produced):

$ latex -interaction=batchmode -halt-on-error
-output-directory=".\Tex\local" ".\Tex\test.tex"

The only change is ".\Tex\test.tex" instead of  "./Tex/test.tex".  If I
specify the file using an absolute path, both options will work ( with "\"
and "/" separators.

Thank you!

with kind regards,
-gdg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190726/2334187d/attachment-0001.html>

From kakuto at w32tex.org  Fri Jul 26 00:23:24 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Fri, 26 Jul 2019 07:23:24 +0900
Subject: Relative paths with windows path separator does not work in
 TeXlive2019.
In-Reply-To: <CABwCVQBgK=-Vt72LZKLaFEgsYaGz6M7-2zjsA7rA7LdzwE_xow@mail.gmail.com>
References: <CABwCVQBgK=-Vt72LZKLaFEgsYaGz6M7-2zjsA7rA7LdzwE_xow@mail.gmail.com>
Message-ID: <2E23FE3D6427480282EB95FA3CEE42BF@CJ3001517A>

Dear Kirill,

> In TeX Live 2015, not this year,  all of the following work on windows:
>
> pdftex test-test
> pdftex test-t~1
> pdftex c:/somedirectory/test-t~1
> pdftex c:/somedi~1/test-t~1

In the recent releases, the support of 8.3 names, like test-t~1.tex,
was removed. Thus pdftex test-t~1 does not work.
Please don't use short names.

For the directory separator, please use forward slash "/".
Sorry for the inconvenience.

Best,
Akira


From kirillbalunov at gmail.com  Fri Jul 26 09:59:00 2019
From: kirillbalunov at gmail.com (Kirill Balunov)
Date: Fri, 26 Jul 2019 10:59:00 +0300
Subject: Relative paths with windows path separator does not work in
 TeXlive2019.
In-Reply-To: <2E23FE3D6427480282EB95FA3CEE42BF@CJ3001517A>
References: <CABwCVQBgK=-Vt72LZKLaFEgsYaGz6M7-2zjsA7rA7LdzwE_xow@mail.gmail.com>
 <2E23FE3D6427480282EB95FA3CEE42BF@CJ3001517A>
Message-ID: <CABwCVQAbNyb2Z++z5=rFXyaiV3AD6oY43eycd+rJ5un_Scf=+A@mail.gmail.com>

 Maybe I incorrectly described in what, in my opinion, TeX Live can
better.  I fully ok with the removal of  8.3 names support,  their time has
passed.

But as for the directory separator, I would like to TeXLive (on Windows) to
be as agnostic as possible, for two reasons:
1. It works in some parts, but not in the others.
2. No error is produced.

Concerning the 1. as I showed in the example it is ok to use both
-output-directory=".\Tex\local" and  -output-directory="./Tex/local", but
this does not work for input files ( this is obviously perceived as an
existing possibility, but to some extent not coordinated in various places).
Maybe I completely do not understand what difficulties are on the way. If
so I would like to know what they are.

Why I am so concerned :) because many cross-platform libraries and
utilities that work with paths (directories) use platform dependent
directory separators (and usually the user has no control over this). And
this miss in the TeXLive functionality in some parts, breaks their lovely
attempts. Of course it is not difficult at the end to replace every "\"
with "/", but it looks pretty crazy to do this for program running on
Windows. And of course it is a very hard to find bug, because no error is
produced.

with kind regards,
-gdg



??, 26 ???. 2019 ?. ? 01:23, Akira Kakuto <kakuto at w32tex.org>:

> Dear Kirill,
>
> > In TeX Live 2015, not this year,  all of the following work on windows:
> >
> > pdftex test-test
> > pdftex test-t~1
> > pdftex c:/somedirectory/test-t~1
> > pdftex c:/somedi~1/test-t~1
>
> In the recent releases, the support of 8.3 names, like test-t~1.tex,
> was removed. Thus pdftex test-t~1 does not work.
> Please don't use short names.
>
> For the directory separator, please use forward slash "/".
> Sorry for the inconvenience.
>
> Best,
> Akira
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190726/b3860e19/attachment.html>

From P.Taylor at rhul.ac.uk  Fri Jul 26 10:19:13 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Fri, 26 Jul 2019 08:19:13 +0000
Subject: Relative paths with windows path separator does not work in
 TeXlive2019.
In-Reply-To: <CABwCVQAbNyb2Z++z5=rFXyaiV3AD6oY43eycd+rJ5un_Scf=+A@mail.gmail.com>
References: <CABwCVQBgK=-Vt72LZKLaFEgsYaGz6M7-2zjsA7rA7LdzwE_xow@mail.gmail.com>
 <2E23FE3D6427480282EB95FA3CEE42BF@CJ3001517A>
 <CABwCVQAbNyb2Z++z5=rFXyaiV3AD6oY43eycd+rJ5un_Scf=+A@mail.gmail.com>
Message-ID: <0ab32d33-2b12-756b-01e1-4011c12a78a9@Rhul.Ac.Uk>

Kirill Balunov wrote:

Maybe I incorrectly described in what, in my opinion, TeX Live can better.  I fully ok with the removal of  8.3 names support,  their time has passed.

But as for the directory separator, I would like to TeXLive (on Windows) to be as agnostic as possible, for two reasons:
1. It works in some parts, but not in the others.
2. No error is produced.

Concerning the 1. as I showed in the example it is ok to use both -output-directory=".\Tex\local" and  -output-directory="./Tex/local", but this does not work for input files ( this is obviously perceived as an existing possibility, but to some extent not coordinated in various places).  Maybe I completely do not understand what difficulties are on the way. If so I would like to know what they are.

Why I am so concerned :) because many cross-platform libraries and utilities that work with paths (directories) use platform dependent directory separators (and usually the user has no control over this). And this miss in the TeXLive functionality in some parts, breaks their lovely attempts. Of course it is not difficult at the end to replace every "\" with "/", but it looks pretty crazy to do this for program running on Windows. And of course it is a very hard to find bug, because no error is produced.

The problem is simply that TeX's escape character is the same as MS-DOS's path-element separator (a backslash).  Once that is accepted, it is clear that TeX cannot of itself unambiguously parse (e.g.,) "TeX \string\filename.extension.  It cannot know whether "string" is a command or a path element.  Therefore a rule has to be implemented, and that rule is "TeX commands take precedence" ? wherever "\string" occurs in a context where it could represent a command and could also represent a path element, it will  invariably be parsed as a command.

Philip Taylor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190726/5bd34769/attachment-0001.html>

From kirillbalunov at gmail.com  Fri Jul 26 10:51:28 2019
From: kirillbalunov at gmail.com (Kirill Balunov)
Date: Fri, 26 Jul 2019 11:51:28 +0300
Subject: Relative paths with windows path separator does not work in
 TeXlive2019.
In-Reply-To: <0ab32d33-2b12-756b-01e1-4011c12a78a9@Rhul.Ac.Uk>
References: <CABwCVQBgK=-Vt72LZKLaFEgsYaGz6M7-2zjsA7rA7LdzwE_xow@mail.gmail.com>
 <2E23FE3D6427480282EB95FA3CEE42BF@CJ3001517A>
 <CABwCVQAbNyb2Z++z5=rFXyaiV3AD6oY43eycd+rJ5un_Scf=+A@mail.gmail.com>
 <0ab32d33-2b12-756b-01e1-4011c12a78a9@Rhul.Ac.Uk>
Message-ID: <CABwCVQDNgVV+otOHdMGjodS__A=DwT39Dt9b_RXtjveAMwtqZw@mail.gmail.com>

Philip thank you! I agree with your comments about ambiguity, also `TeX
--help` has a comment about starting with a `backslash`, I'm ok with it.
But there is a tiny little dot (full stop) in the beginning of my examples,
and I expect it should be enough to dispel ambiguity -> I worte `TeX
*.*\some\file.tex`
and not  `TeX \some\file.tex` without a dot, does this make sense to you?

with kind regards,
-gdg

??, 26 ???. 2019 ?. ? 11:19, Taylor, P <P.Taylor at rhul.ac.uk>:

> Kirill Balunov wrote:
>
> Maybe I incorrectly described in what, in my opinion, TeX Live can
> better.  I fully ok with the removal of  8.3 names support,  their time
> has passed.
>
> But as for the directory separator, I would like to TeXLive (on Windows)
> to be as agnostic as possible, for two reasons:
> 1. It works in some parts, but not in the others.
> 2. No error is produced.
>
> Concerning the 1. as I showed in the example it is ok to use both
> -output-directory=".\Tex\local" and  -output-directory="./Tex/local", but
> this does not work for input files ( this is obviously perceived as an
> existing possibility, but to some extent not coordinated in various places).
> Maybe I completely do not understand what difficulties are on the way. If
> so I would like to know what they are.
>
> Why I am so concerned :) because many cross-platform libraries and
> utilities that work with paths (directories) use platform dependent
> directory separators (and usually the user has no control over this). And
> this miss in the TeXLive functionality in some parts, breaks their lovely
> attempts. Of course it is not difficult at the end to replace every "\"
> with "/", but it looks pretty crazy to do this for program running on
> Windows. And of course it is a very hard to find bug, because no error is
> produced.
>
>
> The problem is simply that TeX's escape character is the same as MS-DOS's
> path-element separator (a backslash).  Once that is accepted, it is clear
> that TeX cannot of itself unambiguously parse (e.g.,) "TeX
> \string\filename.extension.  It cannot know whether "string" is a command
> or a path element.  Therefore a rule has to be implemented, and that rule
> is "TeX commands take precedence" ? wherever "\string" occurs in a context
> where it could represent a command and could also represent a path element,
> it will  invariably be parsed as a command.
>
> Philip Taylor
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190726/a86afaa2/attachment.html>

From P.Taylor at rhul.ac.uk  Fri Jul 26 11:15:20 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Fri, 26 Jul 2019 09:15:20 +0000
Subject: Relative paths with windows path separator does not work in
 TeXlive2019.
In-Reply-To: <CABwCVQDNgVV+otOHdMGjodS__A=DwT39Dt9b_RXtjveAMwtqZw@mail.gmail.com>
References: <CABwCVQBgK=-Vt72LZKLaFEgsYaGz6M7-2zjsA7rA7LdzwE_xow@mail.gmail.com>
 <2E23FE3D6427480282EB95FA3CEE42BF@CJ3001517A>
 <CABwCVQAbNyb2Z++z5=rFXyaiV3AD6oY43eycd+rJ5un_Scf=+A@mail.gmail.com>
 <0ab32d33-2b12-756b-01e1-4011c12a78a9@Rhul.Ac.Uk>
 <CABwCVQDNgVV+otOHdMGjodS__A=DwT39Dt9b_RXtjveAMwtqZw@mail.gmail.com>
Message-ID: <5d944dcb-f46a-1849-ae5c-e51a6e4fd083@Rhul.Ac.Uk>

Kirill Balunov wrote:
Philip thank you! I agree with your comments about ambiguity, also `TeX --help` has a comment about starting with a `backslash`, I'm ok with it. But there is a tiny little dot (full stop) in the beginning of my examples, and I expect it should be enough to dispel ambiguity -> I worte `TeX .\some\file.tex` and not  `TeX \some\file.tex` without a dot, does this make sense to you?

It makes perfect sense, Kirill, but unfortunately it does not (cannot) do what you expect (or would wish).  "TeX .\some\file.tex" will be parsed as :

    TeX (operating system command)
    "." (file to be processed by TeX)
    "\some" (TeX command)
    "\file" ( ? ditto ? )
    ".tex" (characters to be typeset).

You can see that this is true by typing (at your operating system's command-line interpreter prompt)

    TeX .\show\the.tex

Assuming that a file "..tex" does not exist within TeX's input path, you should receive :

TeX .\show\the.tex
This is TeX, Version 3.14159265 (TeX Live 2019/W32TeX) (preloaded format=tex)
! I can't find file `.'.
<to be read again>
                   \show
<*> .\show
          \the.tex
(Press Enter to retry, or Control-Z to exit)
Please type another input file name:

Now create "..tex" in your current directory and populate it with the single line "\relax".  Now try again.  This time you should receive :

TeX .\show\the.tex
This is TeX, Version 3.14159265 (TeX Live 2019/W32TeX) (preloaded format=tex)
(./..tex)
> \the=\the.
<*> .\show\the
              .tex
?

and if you then enter "s" (for scroll mode) followed by "\end" you should get a DVI file containing the typeset characters ".tex"
Philip Taylor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190726/33a31572/attachment-0001.html>

From kirillbalunov at gmail.com  Fri Jul 26 11:32:04 2019
From: kirillbalunov at gmail.com (Kirill Balunov)
Date: Fri, 26 Jul 2019 12:32:04 +0300
Subject: Relative paths with windows path separator does not work in
 TeXlive2019.
In-Reply-To: <5d944dcb-f46a-1849-ae5c-e51a6e4fd083@Rhul.Ac.Uk>
References: <CABwCVQBgK=-Vt72LZKLaFEgsYaGz6M7-2zjsA7rA7LdzwE_xow@mail.gmail.com>
 <2E23FE3D6427480282EB95FA3CEE42BF@CJ3001517A>
 <CABwCVQAbNyb2Z++z5=rFXyaiV3AD6oY43eycd+rJ5un_Scf=+A@mail.gmail.com>
 <0ab32d33-2b12-756b-01e1-4011c12a78a9@Rhul.Ac.Uk>
 <CABwCVQDNgVV+otOHdMGjodS__A=DwT39Dt9b_RXtjveAMwtqZw@mail.gmail.com>
 <5d944dcb-f46a-1849-ae5c-e51a6e4fd083@Rhul.Ac.Uk>
Message-ID: <CABwCVQB-XYXgPWYhkHutoqiYqEkGgXuO=MVfUhJZGZZuAU-=3g@mail.gmail.com>

 Hmm, thanks again. It is clear that everything is not easy with this
option. Then what do you think about the additional option
`-input-directory=` that will also be as good as  `-output-directory=`?  Or
do you think this is an overkill for this?

with kind regards,
-gdg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190726/21b3dc6b/attachment.html>

From zdenek.wagner at gmail.com  Fri Jul 26 11:37:16 2019
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 26 Jul 2019 11:37:16 +0200
Subject: Relative paths with windows path separator does not work in
 TeXlive2019.
In-Reply-To: <5d944dcb-f46a-1849-ae5c-e51a6e4fd083@Rhul.Ac.Uk>
References: <CABwCVQBgK=-Vt72LZKLaFEgsYaGz6M7-2zjsA7rA7LdzwE_xow@mail.gmail.com>
 <2E23FE3D6427480282EB95FA3CEE42BF@CJ3001517A>
 <CABwCVQAbNyb2Z++z5=rFXyaiV3AD6oY43eycd+rJ5un_Scf=+A@mail.gmail.com>
 <0ab32d33-2b12-756b-01e1-4011c12a78a9@Rhul.Ac.Uk>
 <CABwCVQDNgVV+otOHdMGjodS__A=DwT39Dt9b_RXtjveAMwtqZw@mail.gmail.com>
 <5d944dcb-f46a-1849-ae5c-e51a6e4fd083@Rhul.Ac.Uk>
Message-ID: <CAC1phyYiQSeS9e8i7aSPEosGDMDb7V03OaHwm+41RjPaX88rEQ@mail.gmail.com>

Hi,

p? 26. 7. 2019 v 11:15 odes?latel Taylor, P <P.Taylor at rhul.ac.uk> napsal:
>
> Kirill Balunov wrote:
>
> Philip thank you! I agree with your comments about ambiguity, also `TeX --help` has a comment about starting with a `backslash`, I'm ok with it. But there is a tiny little dot (full stop) in the beginning of my examples, and I expect it should be enough to dispel ambiguity -> I worte `TeX .\some\file.tex` and not  `TeX \some\file.tex` without a dot, does this make sense to you?
>
>
> It makes perfect sense, Kirill, but unfortunately it does not (cannot) do what you expect (or would wish).  "TeX .\some\file.tex" will be parsed as :
>
>     TeX (operating system command)
>     "." (file to be processed by TeX)
>     "\some" (TeX command)
>     "\file" ( ? ditto ? )
>     ".tex" (characters to be typeset).
>
The whole problem is a bit more complex. Don Knuth decided to use \ as
an escape character because at the time of TeX's birth it was not
used. UNIX always had / as a path separator. CP/M and older OSes for
8-bit computers worker with floppy disks and there were no
directories. Even the first version of MS-DOS have no concept of
directories, only later \ was introduced as a path separator. Later
even the MS-DOS system libraries were able to recognize both \ and /
(try to write a program in C and test yourself). However, the system
commands as copy, move, ren, del insist in usage of \ and reject /.
This is not a problem that MS-DOS and Windows would not understand,
they would but these commands reject /. On the contrary, TeX does not
accept just a file name but also TeX commands so the dot does not
prevent TeX commands from being interpreted as TeX commands.


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz


From zdenek.wagner at gmail.com  Fri Jul 26 11:42:39 2019
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 26 Jul 2019 11:42:39 +0200
Subject: Relative paths with windows path separator does not work in
 TeXlive2019.
In-Reply-To: <CABwCVQB-XYXgPWYhkHutoqiYqEkGgXuO=MVfUhJZGZZuAU-=3g@mail.gmail.com>
References: <CABwCVQBgK=-Vt72LZKLaFEgsYaGz6M7-2zjsA7rA7LdzwE_xow@mail.gmail.com>
 <2E23FE3D6427480282EB95FA3CEE42BF@CJ3001517A>
 <CABwCVQAbNyb2Z++z5=rFXyaiV3AD6oY43eycd+rJ5un_Scf=+A@mail.gmail.com>
 <0ab32d33-2b12-756b-01e1-4011c12a78a9@Rhul.Ac.Uk>
 <CABwCVQDNgVV+otOHdMGjodS__A=DwT39Dt9b_RXtjveAMwtqZw@mail.gmail.com>
 <5d944dcb-f46a-1849-ae5c-e51a6e4fd083@Rhul.Ac.Uk>
 <CABwCVQB-XYXgPWYhkHutoqiYqEkGgXuO=MVfUhJZGZZuAU-=3g@mail.gmail.com>
Message-ID: <CAC1phyYKvWndKCCKemXywbjFk4OKQzb2Ywg8UHa9FTVDnnDT0g@mail.gmail.com>

Hi

p? 26. 7. 2019 v 11:32 odes?latel Kirill Balunov
<kirillbalunov at gmail.com> napsal:
>
> Hmm, thanks again. It is clear that everything is not easy with this option. Then what do you think about the additional option `-input-directory=` that will also be as good as  `-output-directory=`?  Or do you think this is an overkill for this?
>
If I call TeX from a script, I prefer doing "cd" to the directory with
the files and work in the current directory. It solves a lot of
potential problems. In addition, the script can test the retern code
from "cd" so that it can exit with a reasonable error message if the
directory does not exist. If you try to work with other directories,
you can, of course, implements tests for nonexistent files and
nonexistent -output-directory, but it would IMHO require more code.

> with kind regards,
> -gdg


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz


From P.Taylor at rhul.ac.uk  Fri Jul 26 11:50:12 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Fri, 26 Jul 2019 09:50:12 +0000
Subject: Relative paths with windows path separator does not work in
 TeXlive2019.
In-Reply-To: <CABwCVQB-XYXgPWYhkHutoqiYqEkGgXuO=MVfUhJZGZZuAU-=3g@mail.gmail.com>
References: <CABwCVQBgK=-Vt72LZKLaFEgsYaGz6M7-2zjsA7rA7LdzwE_xow@mail.gmail.com>
 <2E23FE3D6427480282EB95FA3CEE42BF@CJ3001517A>
 <CABwCVQAbNyb2Z++z5=rFXyaiV3AD6oY43eycd+rJ5un_Scf=+A@mail.gmail.com>
 <0ab32d33-2b12-756b-01e1-4011c12a78a9@Rhul.Ac.Uk>
 <CABwCVQDNgVV+otOHdMGjodS__A=DwT39Dt9b_RXtjveAMwtqZw@mail.gmail.com>
 <5d944dcb-f46a-1849-ae5c-e51a6e4fd083@Rhul.Ac.Uk>
 <CABwCVQB-XYXgPWYhkHutoqiYqEkGgXuO=MVfUhJZGZZuAU-=3g@mail.gmail.com>
Message-ID: <88ea5a5e-0cd7-ff87-e02c-de8df98ab2a1@Rhul.Ac.Uk>

Kirill Balunov wrote:

Hmm, thanks again. It is clear that everything is not easy with this option. Then what do you think about the additional option `-input-directory=` that will also be as good as  `-output-directory=`?  Or do you think this is an overkill for this?

It seems a very logical extension to me, but whether our group of TeX implementors would be in favour (or willing to invest the necessary time) is moot.
Philip Taylor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190726/d134ce99/attachment-0001.html>

From pdgessler at gmail.com  Fri Jul 26 12:01:51 2019
From: pdgessler at gmail.com (Paul Gessler)
Date: Fri, 26 Jul 2019 05:01:51 -0500
Subject: Relative paths with windows path separator does not work in
 TeXlive2019.
In-Reply-To: <CABwCVQB-XYXgPWYhkHutoqiYqEkGgXuO=MVfUhJZGZZuAU-=3g@mail.gmail.com>
References: <CABwCVQBgK=-Vt72LZKLaFEgsYaGz6M7-2zjsA7rA7LdzwE_xow@mail.gmail.com>
 <2E23FE3D6427480282EB95FA3CEE42BF@CJ3001517A>
 <CABwCVQAbNyb2Z++z5=rFXyaiV3AD6oY43eycd+rJ5un_Scf=+A@mail.gmail.com>
 <0ab32d33-2b12-756b-01e1-4011c12a78a9@Rhul.Ac.Uk>
 <CABwCVQDNgVV+otOHdMGjodS__A=DwT39Dt9b_RXtjveAMwtqZw@mail.gmail.com>
 <5d944dcb-f46a-1849-ae5c-e51a6e4fd083@Rhul.Ac.Uk>
 <CABwCVQB-XYXgPWYhkHutoqiYqEkGgXuO=MVfUhJZGZZuAU-=3g@mail.gmail.com>
Message-ID: <CAPT88+APOQUyXiC0CHSCk4E=DkoXmc0kbWXfUKR2sh_5YcqBUw@mail.gmail.com>

I do not have a Windows machine to hand to test, but would adding your
input file's path to the TEXINPUTS environment variable suffice for
your use case? Only do this when you need to find files with this type
of path specification, not in general. I _think_ it will do what
you're after, without needing to add another command line option. I
could be wrong (please someone tell me/Kirill if so).

Paul

On Fri, 26 Jul 2019 at 04:33, Kirill Balunov <kirillbalunov at gmail.com> wrote:
>
> Hmm, thanks again. It is clear that everything is not easy with this option. Then what do you think about the additional option `-input-directory=` that will also be as good as  `-output-directory=`?  Or do you think this is an overkill for this?
>
> with kind regards,
> -gdg

From kirillbalunov at gmail.com  Fri Jul 26 12:56:51 2019
From: kirillbalunov at gmail.com (Kirill Balunov)
Date: Fri, 26 Jul 2019 13:56:51 +0300
Subject: Relative paths with windows path separator does not work in
 TeXlive2019.
In-Reply-To: <CAC1phyYKvWndKCCKemXywbjFk4OKQzb2Ywg8UHa9FTVDnnDT0g@mail.gmail.com>
References: <CABwCVQBgK=-Vt72LZKLaFEgsYaGz6M7-2zjsA7rA7LdzwE_xow@mail.gmail.com>
 <2E23FE3D6427480282EB95FA3CEE42BF@CJ3001517A>
 <CABwCVQAbNyb2Z++z5=rFXyaiV3AD6oY43eycd+rJ5un_Scf=+A@mail.gmail.com>
 <0ab32d33-2b12-756b-01e1-4011c12a78a9@Rhul.Ac.Uk>
 <CABwCVQDNgVV+otOHdMGjodS__A=DwT39Dt9b_RXtjveAMwtqZw@mail.gmail.com>
 <5d944dcb-f46a-1849-ae5c-e51a6e4fd083@Rhul.Ac.Uk>
 <CABwCVQB-XYXgPWYhkHutoqiYqEkGgXuO=MVfUhJZGZZuAU-=3g@mail.gmail.com>
 <CAC1phyYKvWndKCCKemXywbjFk4OKQzb2Ywg8UHa9FTVDnnDT0g@mail.gmail.com>
Message-ID: <CABwCVQCaWxveXhLGHpFZGCf5EtF2ZSk2mzcF2TvaWeganEV18g@mail.gmail.com>

??, 26 ???. 2019 ?. ? 12:43, Zdenek Wagner <zdenek.wagner at gmail.com>:

> Hi
>
> p? 26. 7. 2019 v 11:32 odes?latel Kirill Balunov
> <kirillbalunov at gmail.com> napsal:
> >
> > Hmm, thanks again. It is clear that everything is not easy with this
> option. Then what do you think about the additional option
> `-input-directory=` that will also be as good as  `-output-directory=`?  Or
> do you think this is an overkill for this?
> >
> If I call TeX from a script, I prefer doing "cd" to the directory with
> the files and work in the current directory. It solves a lot of
> potential problems.


Yes, it is what I'm doing right now, after reading several similar
questions on tex.stackexchange ( I have to admit that there are lots of
questions on this subject), because the general suggestion there is, like
you said, to `cd` to the directory with the files and work in the current
directory. But for me it is perceived as a workaround, to a certain extent,
the imposition of other people's preferences in the workflow. I love
freedom :))), so I think that it can be done better.


> In addition, the script can test the retern code
> from "cd" so that it can exit with a reasonable error message if the
> directory does not exist. If you try to work with other directories,
> you can, of course, implements tests for nonexistent files and
> nonexistent -output-directory, but it would IMHO require more code.
>
>
Yes at the moment if it is a user provided path, before the `cd` in the
directory, I check if it exists and what permissions does it have. My own
use case is the creation of many small .tex files and then the generation
of animation, like in https://www.3blue1brown.com/. I prefer to make these
files in distinct directories (because I put some additional files with
them). So I have many input directories and one output directory. And it
just so happened that it would be more convenient for me to generate one
line for the system call, but this, of course, is a matter of taste.

with kind regards,
-gdg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190726/a56222f1/attachment.html>

From news3 at nililand.de  Fri Jul 26 13:11:40 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Fri, 26 Jul 2019 13:11:40 +0200
Subject: Relative paths with windows path separator does not work in
 TeXlive2019.
References: <CABwCVQBgK=-Vt72LZKLaFEgsYaGz6M7-2zjsA7rA7LdzwE_xow@mail.gmail.com>
 <2E23FE3D6427480282EB95FA3CEE42BF@CJ3001517A>
 <CABwCVQAbNyb2Z++z5=rFXyaiV3AD6oY43eycd+rJ5un_Scf=+A@mail.gmail.com>
 <0ab32d33-2b12-756b-01e1-4011c12a78a9@Rhul.Ac.Uk>
 <CABwCVQDNgVV+otOHdMGjodS__A=DwT39Dt9b_RXtjveAMwtqZw@mail.gmail.com>
 <5d944dcb-f46a-1849-ae5c-e51a6e4fd083@Rhul.Ac.Uk>
 <CABwCVQB-XYXgPWYhkHutoqiYqEkGgXuO=MVfUhJZGZZuAU-=3g@mail.gmail.com>
Message-ID: <1cllx3lwqhon8$.dlg@nililand.de>

Am Fri, 26 Jul 2019 12:32:04 +0300 schrieb Kirill Balunov:

> Then what do you think about the additional option
> `-input-directory=` that will also be as good as  `-output-directory=`?  Or
> do you think this is an overkill for this?

miktex has an option  -include-directory=DIR  which prefixes DIR to
the input search path.

But it is absolutely not a good idea to use this to find the main
tex-file. You will run into lots of problems if you start the
compilation from another folder: \input won't do what you want,
graphics are not found, auxiliary files will not be where tex
expects them. 

Always cd into the folder of your main tex and then call
pdftex test-test 



-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From kirillbalunov at gmail.com  Fri Jul 26 13:53:22 2019
From: kirillbalunov at gmail.com (Kirill Balunov)
Date: Fri, 26 Jul 2019 14:53:22 +0300
Subject: Relative paths with windows path separator does not work in
 TeXlive2019.
In-Reply-To: <CAPT88+APOQUyXiC0CHSCk4E=DkoXmc0kbWXfUKR2sh_5YcqBUw@mail.gmail.com>
References: <CABwCVQBgK=-Vt72LZKLaFEgsYaGz6M7-2zjsA7rA7LdzwE_xow@mail.gmail.com>
 <2E23FE3D6427480282EB95FA3CEE42BF@CJ3001517A>
 <CABwCVQAbNyb2Z++z5=rFXyaiV3AD6oY43eycd+rJ5un_Scf=+A@mail.gmail.com>
 <0ab32d33-2b12-756b-01e1-4011c12a78a9@Rhul.Ac.Uk>
 <CABwCVQDNgVV+otOHdMGjodS__A=DwT39Dt9b_RXtjveAMwtqZw@mail.gmail.com>
 <5d944dcb-f46a-1849-ae5c-e51a6e4fd083@Rhul.Ac.Uk>
 <CABwCVQB-XYXgPWYhkHutoqiYqEkGgXuO=MVfUhJZGZZuAU-=3g@mail.gmail.com>
 <CAPT88+APOQUyXiC0CHSCk4E=DkoXmc0kbWXfUKR2sh_5YcqBUw@mail.gmail.com>
Message-ID: <CABwCVQBaScQNPT9PhMxrjV3hdMW32HCO7TJv6M-HO=VUn=AovA@mail.gmail.com>

 Paul thanks! It works to some extent, though again it uses the specifics
of windows:)) As suggested in this answer
https://tex.stackexchange.com/a/403973/181328 on windows you need to use a
`;` (semicolon) instead of  a `:` (colon). But this works.

with kind regards,
-gdg



??, 26 ???. 2019 ?. ? 13:02, Paul Gessler <pdgessler at gmail.com>:

> I do not have a Windows machine to hand to test, but would adding your
> input file's path to the TEXINPUTS environment variable suffice for
> your use case? Only do this when you need to find files with this type
> of path specification, not in general. I _think_ it will do what
> you're after, without needing to add another command line option. I
> could be wrong (please someone tell me/Kirill if so).
>
> Paul
>
> On Fri, 26 Jul 2019 at 04:33, Kirill Balunov <kirillbalunov at gmail.com>
> wrote:
> >
> > Hmm, thanks again. It is clear that everything is not easy with this
> option. Then what do you think about the additional option
> `-input-directory=` that will also be as good as  `-output-directory=`?  Or
> do you think this is an overkill for this?
> >
> > with kind regards,
> > -gdg
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190726/ea8c5cf6/attachment.html>

From zdenek.wagner at gmail.com  Fri Jul 26 14:46:14 2019
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 26 Jul 2019 14:46:14 +0200
Subject: Relative paths with windows path separator does not work in
 TeXlive2019.
In-Reply-To: <CABwCVQBaScQNPT9PhMxrjV3hdMW32HCO7TJv6M-HO=VUn=AovA@mail.gmail.com>
References: <CABwCVQBgK=-Vt72LZKLaFEgsYaGz6M7-2zjsA7rA7LdzwE_xow@mail.gmail.com>
 <2E23FE3D6427480282EB95FA3CEE42BF@CJ3001517A>
 <CABwCVQAbNyb2Z++z5=rFXyaiV3AD6oY43eycd+rJ5un_Scf=+A@mail.gmail.com>
 <0ab32d33-2b12-756b-01e1-4011c12a78a9@Rhul.Ac.Uk>
 <CABwCVQDNgVV+otOHdMGjodS__A=DwT39Dt9b_RXtjveAMwtqZw@mail.gmail.com>
 <5d944dcb-f46a-1849-ae5c-e51a6e4fd083@Rhul.Ac.Uk>
 <CABwCVQB-XYXgPWYhkHutoqiYqEkGgXuO=MVfUhJZGZZuAU-=3g@mail.gmail.com>
 <CAPT88+APOQUyXiC0CHSCk4E=DkoXmc0kbWXfUKR2sh_5YcqBUw@mail.gmail.com>
 <CABwCVQBaScQNPT9PhMxrjV3hdMW32HCO7TJv6M-HO=VUn=AovA@mail.gmail.com>
Message-ID: <CAC1phyZMNWUkT_dkQz+tvoLBSEkB8Y8Nz0UJG5-dSc3tnjr0hQ@mail.gmail.com>

Really? In Windows a colon separates a drive letter hence it must not
be used as the separator in TEXINPUT. I do not have Windows with TeX
so I cannot try but at least emTeX for OS/2 and MS-DOS used
semicolons.

I understand your requirement for freedom for users. Usage of `cd` is
not against freedom. I allow users to call the script (supplied by me)
in any way they like. I do `cd` inside the script and when the script
terminates, the user is back in the same directory from which the
script was started. The user need not know what's going on behind the
scene, the user only wishes that it works as expected.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

p? 26. 7. 2019 v 13:54 odes?latel Kirill Balunov
<kirillbalunov at gmail.com> napsal:
>
> Paul thanks! It works to some extent, though again it uses the specifics of windows:)) As suggested in this answer  https://tex.stackexchange.com/a/403973/181328 on windows you need to use a `;` (semicolon) instead of  a `:` (colon). But this works.
>
> with kind regards,
> -gdg
>
>
>
> ??, 26 ???. 2019 ?. ? 13:02, Paul Gessler <pdgessler at gmail.com>:
>>
>> I do not have a Windows machine to hand to test, but would adding your
>> input file's path to the TEXINPUTS environment variable suffice for
>> your use case? Only do this when you need to find files with this type
>> of path specification, not in general. I _think_ it will do what
>> you're after, without needing to add another command line option. I
>> could be wrong (please someone tell me/Kirill if so).
>>
>> Paul
>>
>> On Fri, 26 Jul 2019 at 04:33, Kirill Balunov <kirillbalunov at gmail.com> wrote:
>> >
>> > Hmm, thanks again. It is clear that everything is not easy with this option. Then what do you think about the additional option `-input-directory=` that will also be as good as  `-output-directory=`?  Or do you think this is an overkill for this?
>> >
>> > with kind regards,
>> > -gdg


From pablgonz at educarchile.cl  Fri Jul 26 17:33:28 2019
From: pablgonz at educarchile.cl (=?UTF-8?Q?Pablo_Gonz=C3=A1lez_L?=)
Date: Fri, 26 Jul 2019 11:33:28 -0400
Subject: Compilation time using TeXLive 2019 under WSL in window 10
Message-ID: <CANeU4n9h9yEp6ua+BsCEuBHm7jcYh_wCO15mN23G0caahQQzQA@mail.gmail.com>

Hello everyone, just out of curiosity and following the thread
(https://tug.org/pipermail/tex-live/2019-July/043876.html) I have installed
Ubuntu 18.04 on Windows 10 and TeXLive2019 to run the test.
In both cases the installation is full and updated to date. Using "time" I have
tried to compare how long it takes to compile "sample2e" and here are
the results
(.exe indicates that I use the version installed directly in win10):

pablo at win10x64:/mnt/d/test-speed$ time latex.exe
-interaction=nonstopmode sample2e
real    0m1.508s
user    0m0.016s
sys     0m0.000s

pablo at win10x64:/mnt/d/test-speed$ time latex -interaction=nonstopmode sample2e
real    0m0.474s
user    0m0.203s
sys     0m0.141s

pablo at win10x64:/mnt/d/test-speed$ time pdflatex.exe
-interaction=nonstopmode sample2e
real    0m2.229s
user    0m0.000s
sys     0m0.000s

pablo at win10x64:/mnt/d/test-speed$ time pdflatex
-interaction=nonstopmode sample2e
real    0m0.723s
user    0m0.438s
sys     0m0.188s

pablo at win10x64:/mnt/d/test-speed$ time lualatex.exe
-interaction=nonstopmode sample2e
real    0m3.166s
user    0m0.000s
sys     0m0.000s

pablo at win10x64:/mnt/d/test-speed$ time lualatex
-interaction=nonstopmode sample2e
real    0m1.554s
user    0m1.016s
sys     0m0.391s

pablo at win10x64:/mnt/d/test-speed$ time xelatex.exe
-interaction=nonstopmode sample2e
real    0m4.266s
user    0m0.000s
sys     0m0.016s

pablo at win10x64:/mnt/d/test-speed$ time xelatex -interaction=nonstopmode sample2e
real    0m2.158s
user    0m1.109s
sys     0m0.813s

I know that TeXLive is faster in Linux because of the access to disk, libraries
and others (I use fedora habitually), the curious thing is that when using
Ubuntu (under WSL) it runs faster than the native version of Win10, the
difference when using "pdflatex" is quite big. Can any of the members of the
list explain to me why?
Saludos

From kakuto at w32tex.org  Sat Jul 27 00:14:23 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Sat, 27 Jul 2019 07:14:23 +0900
Subject: Compilation time using TeXLive 2019 under WSL in window 10
In-Reply-To: <CANeU4n9h9yEp6ua+BsCEuBHm7jcYh_wCO15mN23G0caahQQzQA@mail.gmail.com>
References: <CANeU4n9h9yEp6ua+BsCEuBHm7jcYh_wCO15mN23G0caahQQzQA@mail.gmail.com>
Message-ID: <F0F2F45191CB4C97ABAFA00639873517@CJ3001517A>

> I know that TeXLive is faster in Linux because of the access to
> disk, libraries and others (I use fedora habitually), the curious
> thing is that when using Ubuntu (under WSL) it runs faster than
> the native version of Win10, the difference when using "pdflatex"
> is quite big. Can any of the members of the list explain to me why?

Windows native binaries have many aditional codes.
Thus they are inevitably slow.

Best,
Akira


From pablgonz at educarchile.cl  Sat Jul 27 01:29:10 2019
From: pablgonz at educarchile.cl (=?UTF-8?Q?Pablo_Gonz=C3=A1lez_L?=)
Date: Fri, 26 Jul 2019 19:29:10 -0400
Subject: Compilation time using TeXLive 2019 under WSL in window 10
In-Reply-To: <F0F2F45191CB4C97ABAFA00639873517@CJ3001517A>
References: <CANeU4n9h9yEp6ua+BsCEuBHm7jcYh_wCO15mN23G0caahQQzQA@mail.gmail.com>
 <F0F2F45191CB4C97ABAFA00639873517@CJ3001517A>
Message-ID: <CANeU4n-P17nmm9PLq9xqpVB2jRRi2-hhiZRZb+uXP-DJe4xRcQ@mail.gmail.com>

El vie., 26 jul. 2019 a las 18:14, Akira Kakuto (<kakuto at w32tex.org>) escribi?:
> Windows native binaries have many aditional codes.
> Thus they are inevitably slow.
>
> Best,
> Akira
>
So, if compilation speed is important, could I keep TeXLive Ubuntu (under WSL)?
This is interesting, I have returned to test with
\documentclass{article}
\usepackage{pgffor}
\begin{document}
\foreach\x in{1,2,...,1000}{\leavevmode\clearpage}
\end{document}
And the results are the same.
Saludos


From kakuto at w32tex.org  Sat Jul 27 01:40:11 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Sat, 27 Jul 2019 08:40:11 +0900
Subject: Compilation time using TeXLive 2019 under WSL in window 10
In-Reply-To: <CANeU4n-P17nmm9PLq9xqpVB2jRRi2-hhiZRZb+uXP-DJe4xRcQ@mail.gmail.com>
References: <CANeU4n9h9yEp6ua+BsCEuBHm7jcYh_wCO15mN23G0caahQQzQA@mail.gmail.com>
 <F0F2F45191CB4C97ABAFA00639873517@CJ3001517A>
 <CANeU4n-P17nmm9PLq9xqpVB2jRRi2-hhiZRZb+uXP-DJe4xRcQ@mail.gmail.com>
Message-ID: <6C10D1F91E4444B4B32FD89123190D29@CJ3001517A>

Dear Pablo,

> So, if compilation speed is important, could I keep TeXLive Ubuntu (under WSL)?

Indeed.

Best,
Akira


From pablgonz at educarchile.cl  Sat Jul 27 05:05:11 2019
From: pablgonz at educarchile.cl (=?UTF-8?Q?Pablo_Gonz=C3=A1lez_L?=)
Date: Fri, 26 Jul 2019 23:05:11 -0400
Subject: Compilation time using TeXLive 2019 under WSL in window 10
In-Reply-To: <6C10D1F91E4444B4B32FD89123190D29@CJ3001517A>
References: <CANeU4n9h9yEp6ua+BsCEuBHm7jcYh_wCO15mN23G0caahQQzQA@mail.gmail.com>
 <F0F2F45191CB4C97ABAFA00639873517@CJ3001517A>
 <CANeU4n-P17nmm9PLq9xqpVB2jRRi2-hhiZRZb+uXP-DJe4xRcQ@mail.gmail.com>
 <6C10D1F91E4444B4B32FD89123190D29@CJ3001517A>
Message-ID: <CANeU4n8K-qf9J0zmi7BgymDZNDsGAgDriPsZYNoSK_ZqHaEAYg@mail.gmail.com>

Question: There will be some difference if I install the 64-bit version
(it's just an idea)...I haven't done the test (it would break my
installation).

El viernes, 26 de julio de 2019, Akira Kakuto <kakuto at w32tex.org> escribi?:

> Dear Pablo,
>
> So, if compilation speed is important, could I keep TeXLive Ubuntu (under
>> WSL)?
>>
>
> Indeed.
>
> Best,
> Akira
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20190726/bdf7153d/attachment.html>

From kakuto at w32tex.org  Sat Jul 27 07:19:22 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Sat, 27 Jul 2019 14:19:22 +0900
Subject: Compilation time using TeXLive 2019 under WSL in window 10
In-Reply-To: <CANeU4n8K-qf9J0zmi7BgymDZNDsGAgDriPsZYNoSK_ZqHaEAYg@mail.gmail.com>
References: <CANeU4n9h9yEp6ua+BsCEuBHm7jcYh_wCO15mN23G0caahQQzQA@mail.gmail.com>
 <F0F2F45191CB4C97ABAFA00639873517@CJ3001517A>
 <CANeU4n-P17nmm9PLq9xqpVB2jRRi2-hhiZRZb+uXP-DJe4xRcQ@mail.gmail.com>
 <6C10D1F91E4444B4B32FD89123190D29@CJ3001517A>
 <CANeU4n8K-qf9J0zmi7BgymDZNDsGAgDriPsZYNoSK_ZqHaEAYg@mail.gmail.com>
Message-ID: <59973D8B8BD6449D876CFEDF61826F5A@CJ3001517A>

> Question: There will be some difference if I install the 64-bit version (it's just an idea)...

In the case of Windows native binaries, the performance will become
a little better. Of course there is not the limit 2G of usable memory.

Best,
Akira


From johannes.kunde at gmail.com  Mon Jul 29 18:38:10 2019
From: johannes.kunde at gmail.com (Johannes Kunde)
Date: Mon, 29 Jul 2019 18:38:10 +0200
Subject: TL 2019 - inconsistent processing of environment variable TEXINPUTS
Message-ID: <fbe6fcbd-00a3-8a6b-a9a6-04eb743bd7e1@gmail.com>

Hi TeX Live community,
I recently installed TeX Live 2019 on a Windows 10 machine and observed 
a strange behavior (at least in my eyes) with the environment variable 
TEXINPUTS.
I process LaTeX documents with XeLaTeX and in order to find all 
necessary files in my specific LaTeX document structure, I need to 
adjust the preconfigured PATH setting. To achieve this, I set TEXINPUTS 
as follows:
TEXINPUTS=.;my/path/goes/here//;

When I set TEXINPUTS as a windows environment variable in the OS 
settings, everything works as expected.
But when I try to set it via the appropriate config-file 
${basedir}/2019/texmf.cnf, TL messes up my whole PATH setting and 
terminates with ?! LaTeX Error: File `my/file.tex' not found.?

The TL documentation recommends to make all changes to the defaults in 
${basedir}/2019/texmf.cnf:
https://www.tug.org/texlive/doc/texlive-en/texlive-en.html#x1-560007.1.2

Is this a bug in TeX Live or do I miss something?

Best regards
Johannes

From lists at openlilylib.org  Tue Jul 30 15:58:54 2019
From: lists at openlilylib.org (Urs Liska)
Date: Tue, 30 Jul 2019 13:58:54 +0000
Subject: Another issue with luatex finding .sty files
Message-ID: <0e7e2c016242c256c1892ecb553f5dd4@openlilylib.org>

I'm pulling my hair because I don't understand this weird behaviour ...

I have a number of my own packages where the local installation should be used instead the TL
versions. Which *mostly* works, with one exception.

  $ kpsewhich --progname xelatex lyluatex.sty
  /home/uliska/texmf/tex/latex/git-latex/lyluatex/lyluatex.sty

  $ kpsewhich --progname lualatex lyluatex.sty
  /home/uliska/texmf/tex/latex/git-latex/lyluatex/lyluatex.sty

  $ kpsewhich --progname xelatex lilyglyphs.sty
  /home/uliska/texmf/tex/latex/git-latex/lilyglyphs/lilyglyphs.sty

  $ kpsewhich --progname lualatex lilyglyphs.sty
  /usr/local/texlive/2019/texmf-dist/tex/lualatex/lilyglyphs/lilyglyphs.sty

With lyluatex.sty both xelatex find the file in the local tree, but with lilyglyphts.sty xelatex finds it correctly while lualatex suddenly finds the TL version.

`git-latex` included in both ~/texmf/tex/latex and ~/texmf/tex/luatexare symlinks to a parent directory of my own packages. Which has always worked and now works also for all the other packages below that parent directory.

I'm also surprised that lualatex finds the "correct" lyluatex.sty through the tex/latex subdirectory. I was once told to use tex/luatex in order to prevent lualatex to first search the full installation before the local tree.

The only thing I can think of is some cache where an older access of the package stored.
Any other suggestion? It seems I can't remove an individual package with tlmgr that has been installed as part of a collection, isn't it?

Thank you for any advice
Urs


From news3 at nililand.de  Tue Jul 30 16:42:17 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Tue, 30 Jul 2019 16:42:17 +0200
Subject: Another issue with luatex finding .sty files
References: <0e7e2c016242c256c1892ecb553f5dd4@openlilylib.org>
Message-ID: <1eonyit8ix8mf.dlg@nililand.de>

Am Tue, 30 Jul 2019 13:58:54 +0000 schrieb Urs Liska:

>   /home/uliska/texmf/tex/latex/git-latex/lyluatex/lyluatex.sty
> 
>   $ kpsewhich --progname xelatex lilyglyphs.sty
>   /home/uliska/texmf/tex/latex/git-latex/lilyglyphs/lilyglyphs.sty
> 
>   $ kpsewhich --progname lualatex lilyglyphs.sty
>   /usr/local/texlive/2019/texmf-dist/tex/lualatex/lilyglyphs/lilyglyphs.sty
> 
> With lyluatex.sty both xelatex find the file in the local tree, but with lilyglyphts.sty xelatex finds it correctly while lualatex suddenly finds the TL version.

tex doesn't search first the local tree and then the global tree. It
does a sort of zigzag: For lualatex e.g. if will first look in all
trees in tex/lualatex, then in all trees in tex/latex etc. 

Your lilyglyphs.sty is in tex/lualatex in the main tree, but in
tex/latex in the local tree and so the main file is found first. 

Move it to  
 /home/uliska/texmf/tex/lualatex/git-latex/lilyglyphs/lilyglyphs.sty

-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From lists at openlilylib.org  Tue Jul 30 17:12:49 2019
From: lists at openlilylib.org (Urs Liska)
Date: Tue, 30 Jul 2019 15:12:49 +0000
Subject: Another issue with luatex finding .sty files
In-Reply-To: <1eonyit8ix8mf.dlg@nililand.de>
References: <1eonyit8ix8mf.dlg@nililand.de>
 <0e7e2c016242c256c1892ecb553f5dd4@openlilylib.org>
Message-ID: <ae850b5ce5f7ef313b540548a97531a4@openlilylib.org>

30. Juli 2019 16:42, "Ulrike Fischer" <news3 at nililand.de> schrieb:

> Am Tue, 30 Jul 2019 13:58:54 +0000 schrieb Urs Liska:
> 
>> /home/uliska/texmf/tex/latex/git-latex/lyluatex/lyluatex.sty
>> 
>> $ kpsewhich --progname xelatex lilyglyphs.sty
>> /home/uliska/texmf/tex/latex/git-latex/lilyglyphs/lilyglyphs.sty
>> 
>> $ kpsewhich --progname lualatex lilyglyphs.sty
>> /usr/local/texlive/2019/texmf-dist/tex/lualatex/lilyglyphs/lilyglyphs.sty
>> 
>> With lyluatex.sty both xelatex find the file in the local tree, but with lilyglyphts.sty xelatex
>> finds it correctly while lualatex suddenly finds the TL version.
> 
> tex doesn't search first the local tree and then the global tree. It
> does a sort of zigzag: For lualatex e.g. if will first look in all
> trees in tex/lualatex, then in all trees in tex/latex etc.
> 

Yes, that's what I thought (I think I was told so by you in an earlier question ...)

> Your lilyglyphs.sty is in tex/lualatex in the main tree, but in
> tex/latex in the local tree and so the main file is found first.

No, it is in *both* trees (through the symlink), that's what makes this so strange to me.
And no matter which symlink I remove (so it can be found in both trees, only the latex tree or only the luatex tree), the result is the same.

And even more surprising: The situation is the same with the lyluatex file, which *is* found locally before in the distribution.

Urs

> 
> Move it to
> /home/uliska/texmf/tex/lualatex/git-latex/lilyglyphs/lilyglyphs.sty
> 
> --
> Ulrike Fischer
> http://www.troubleshooting-tex.de


From news3 at nililand.de  Tue Jul 30 18:31:31 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Tue, 30 Jul 2019 18:31:31 +0200
Subject: Another issue with luatex finding .sty files
References: <1eonyit8ix8mf.dlg@nililand.de>
 <0e7e2c016242c256c1892ecb553f5dd4@openlilylib.org>
 <ae850b5ce5f7ef313b540548a97531a4@openlilylib.org>
Message-ID: <16s8whgf3hoqa$.dlg@nililand.de>

Am Tue, 30 Jul 2019 15:12:49 +0000 schrieb Urs Liska:

> And even more surprising: The situation is the same with the
> lyluatex file, which *is* found locally before in the
> distribution.

No the situation is not the same: lyluatex.sty is in tex\luatex and
not in tex\lualatex like lilyglyphs.sty

The search order for lualatex is

$TEXMF/tex/{lualatex,latex,luatex,generic,}//

so tex/luatex is searched after tex\latex.


-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From lists at openlilylib.org  Tue Jul 30 18:55:33 2019
From: lists at openlilylib.org (Urs Liska)
Date: Tue, 30 Jul 2019 16:55:33 +0000
Subject: Another issue with luatex finding .sty files
In-Reply-To: <16s8whgf3hoqa$.dlg@nililand.de>
References: <16s8whgf3hoqa$.dlg@nililand.de> <1eonyit8ix8mf.dlg@nililand.de>
 <0e7e2c016242c256c1892ecb553f5dd4@openlilylib.org>
 <ae850b5ce5f7ef313b540548a97531a4@openlilylib.org>
Message-ID: <606e6949b8d6095a78514d775554de0a@openlilylib.org>

30. Juli 2019 18:31, "Ulrike Fischer" <news3 at nililand.de> schrieb:

> Am Tue, 30 Jul 2019 15:12:49 +0000 schrieb Urs Liska:
> 
>> And even more surprising: The situation is the same with the
>> lyluatex file, which *is* found locally before in the
>> distribution.
> 
> No the situation is not the same: lyluatex.sty is in tex\luatex and
> not in tex\lualatex like lilyglyphs.sty
> 
> The search order for lualatex is
> 
> $TEXMF/tex/{lualatex,latex,luatex,generic,}//
> 
> so tex/luatex is searched after tex\latex.

Thank you, that was the culprit. After renaming tex/luatex to tex/lualatex (I only use lualatex, not luatex) it works as expected (by the creators, just not by me ...)

Best
Urs

> 
> --
> Ulrike Fischer
> https://www.troubleshooting-tex.de


From karl at freefriends.org  Wed Jul 31 23:47:34 2019
From: karl at freefriends.org (Karl Berry)
Date: Wed, 31 Jul 2019 15:47:34 -0600
Subject: TL 2019 - inconsistent processing of environment variable
 TEXINPUTS
In-Reply-To: <fbe6fcbd-00a3-8a6b-a9a6-04eb743bd7e1@gmail.com>
Message-ID: <201907312147.x6VLlXx1004926@freefriends.org>

Hi Johannes,

    But when I try to set it via the appropriate config-file 

I think this behavior is expected, and has been the case since the
beginning. A generic envvar value (TEXINPUTS in environment) does indeed
override any config file value, but a generic config file value
(TEXINPUTS in any texmf.cnf) will not override a program-specific config
file value (TEXINPUTS.latex in any texmf.cnf).

Thus, to override from one texmf.cnf to another, it's necessary to use
the program-specific form:
  TEXINPUTS.latex=.;my//;

Admittedly this is a pain, since we have separate TEXINPUTS for every
TeX format (which is a big drag in itself, but no way around it now).

Although one might wish earlier/generic config file values would win
over later/specific config files, it's never been that way, as far as I
can recall. It's not entirely clear to me it would be desirable. In any
case, I don't want to change such basic behavior now.

    The TL documentation recommends to make all changes to the defaults in 

I'll try to put some more explanation into that "Config files" section.
A blanket "don't use envvars" is too draconian. Your case of including a
personal directory is exactly where envvars are ok/useful It is using
envvars to override system directories that has been a common cause of
problems in the past.

Anyway, another option is to set TEXMFHOME (or use the default
TEXMFHOME, which is ~/texmf, instead of ~/my) -- although you have to
use the usual directory tree, like ~/my/tex/...

Yet another option, as of 2019, is to use TEXMFDOTDIR, in the
environment or a config file. I haven't played with it very much, but I
think something like this would work:
  TEXMFDOTDIR=.;~/my//

--best, karl.

