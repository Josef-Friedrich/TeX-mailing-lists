From boudiccas at skimble.plus.com  Mon Oct  7 12:17:25 2019
From: boudiccas at skimble.plus.com (Sharon Kimble)
Date: Mon, 07 Oct 2019 11:17:25 +0100
Subject: Hyperref change breaks every document that I'm writing!
Message-ID: <87eezooo5m.fsf@skimble.plus.com>


Since the hyperref changes and using the new hyperref every document
that I'm writing is now broken!

This is what it shows when trying to use a table of contents

--------------------
! Undefined control sequence.
\Ginclude at graphics ...\Ginput at path \set at curr@file 
                                                  {#1}\edef \uq at curr@file {\...
l.87 \tableofcontents
--------------------

and if I disable the table of contents, then it breaks on footnotes.

-----------------------
! Undefined control sequence.
l.177 ...ou'll have to do a little digging. \uline
                                                  {Message me} \footnote{\ur...
----------------------

I can't find anyway of getting the old settings working with the new
version.

So how do I use the old hyperref package which is stored in
'/home/boudiccas/texlive/2019/tlpkg/backups/hyperref.r52100.tar.lz4'
please?

Thanks
Sharon.
-- 
A taste of linux = http://www.sharons.org.uk
TGmeds = http://www.tgmeds.org.uk
DrugFacts = https://www.drugfacts.org.uk
Debian 10.1, fluxbox 1.3.7, emacs 26.3, org 9.2.6


From daleif at math.au.dk  Mon Oct  7 13:03:41 2019
From: daleif at math.au.dk (Lars Madsen)
Date: Mon, 7 Oct 2019 11:03:41 +0000
Subject: Hyperref change breaks every document that I'm writing!
In-Reply-To: <87eezooo5m.fsf@skimble.plus.com>
References: <87eezooo5m.fsf@skimble.plus.com>
Message-ID: <DB8PR01MB5947D8D047DC2682536AE16EF29B0@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>

that is not a hyperref error, it comes from graphicx

could you narrow this down do a small minimal example others can test?


/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at math<http://au.dk/daleif at imf> / More information: http://au.dk/en/daleif at math<http://au.dk/en/daleif at imf>

________________________________
From: tex-live <tex-live-bounces+daleif=imf.au.dk at tug.org> on behalf of Sharon Kimble <boudiccas at skimble.plus.com>
Sent: 07 October 2019 12:17
To: tex-live at tug.org <tex-live at tug.org>
Subject: Hyperref change breaks every document that I'm writing!


Since the hyperref changes and using the new hyperref every document
that I'm writing is now broken!

This is what it shows when trying to use a table of contents

--------------------
! Undefined control sequence.
\Ginclude at graphics ...\Ginput at path \set at curr@file
                                                  {#1}\edef \uq at curr@file {\...
l.87 \tableofcontents
--------------------

and if I disable the table of contents, then it breaks on footnotes.

-----------------------
! Undefined control sequence.
l.177 ...ou'll have to do a little digging. \uline
                                                  {Message me} \footnote{\ur...
----------------------

I can't find anyway of getting the old settings working with the new
version.

So how do I use the old hyperref package which is stored in
'/home/boudiccas/texlive/2019/tlpkg/backups/hyperref.r52100.tar.lz4'
please?

Thanks
Sharon.
--
A taste of linux = http://www.sharons.org.uk
TGmeds = http://www.tgmeds.org.uk
DrugFacts = https://www.drugfacts.org.uk
Debian 10.1, fluxbox 1.3.7, emacs 26.3, org 9.2.6

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191007/3462802b/attachment.html>

From daleif at math.au.dk  Mon Oct  7 13:07:04 2019
From: daleif at math.au.dk (Lars Madsen)
Date: Mon, 7 Oct 2019 11:07:04 +0000
Subject: Hyperref change breaks every document that I'm writing!
In-Reply-To: <DB8PR01MB5947D8D047DC2682536AE16EF29B0@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>
References: <87eezooo5m.fsf@skimble.plus.com>,
 <DB8PR01MB5947D8D047DC2682536AE16EF29B0@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>
Message-ID: <DB8PR01MB5947C829046545AAF4F9EC56F29B0@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>

I have no issues ussing a fully up to date texlive 2019 on this example


\documentclass[a4paper]{memoir}

\usepackage{graphicx}
\usepackage[colorlinks]{hyperref}

\begin{document}

\tableofcontents*

\chapter{Test}

test

\begin{figure}[htpb]
  \centering
  \includegraphics{example-image}
  \caption{Test}
  \label{fig:1}
\end{figure}

\ref{fig:1}


\end{document}



/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at math<http://au.dk/daleif at imf> / More information: http://au.dk/en/daleif at math<http://au.dk/en/daleif at imf>

________________________________
From: tex-live <tex-live-bounces+daleif=imf.au.dk at tug.org> on behalf of Lars Madsen <daleif at math.au.dk>
Sent: 07 October 2019 13:03
To: Sharon Kimble <boudiccas at skimble.plus.com>; tex-live at tug.org <tex-live at tug.org>
Subject: Re: Hyperref change breaks every document that I'm writing!

that is not a hyperref error, it comes from graphicx

could you narrow this down do a small minimal example others can test?


/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at math<http://au.dk/daleif at imf> / More information: http://au.dk/en/daleif at math<http://au.dk/en/daleif at imf>

________________________________
From: tex-live <tex-live-bounces+daleif=imf.au.dk at tug.org> on behalf of Sharon Kimble <boudiccas at skimble.plus.com>
Sent: 07 October 2019 12:17
To: tex-live at tug.org <tex-live at tug.org>
Subject: Hyperref change breaks every document that I'm writing!


Since the hyperref changes and using the new hyperref every document
that I'm writing is now broken!

This is what it shows when trying to use a table of contents

--------------------
! Undefined control sequence.
\Ginclude at graphics ...\Ginput at path \set at curr@file
                                                  {#1}\edef \uq at curr@file {\...
l.87 \tableofcontents
--------------------

and if I disable the table of contents, then it breaks on footnotes.

-----------------------
! Undefined control sequence.
l.177 ...ou'll have to do a little digging. \uline
                                                  {Message me} \footnote{\ur...
----------------------

I can't find anyway of getting the old settings working with the new
version.

So how do I use the old hyperref package which is stored in
'/home/boudiccas/texlive/2019/tlpkg/backups/hyperref.r52100.tar.lz4'
please?

Thanks
Sharon.
--
A taste of linux = http://www.sharons.org.uk
TGmeds = http://www.tgmeds.org.uk
DrugFacts = https://www.drugfacts.org.uk
Debian 10.1, fluxbox 1.3.7, emacs 26.3, org 9.2.6

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191007/0d6c6c62/attachment-0001.html>

From d.p.carlisle at gmail.com  Mon Oct  7 14:14:16 2019
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Mon, 7 Oct 2019 13:14:16 +0100
Subject: Hyperref change breaks every document that I'm writing!
In-Reply-To: <DB8PR01MB5947C829046545AAF4F9EC56F29B0@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>
References: <87eezooo5m.fsf@skimble.plus.com>
 <DB8PR01MB5947D8D047DC2682536AE16EF29B0@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>
 <DB8PR01MB5947C829046545AAF4F9EC56F29B0@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>
Message-ID: <CAEW6iOjD_OqvOszmCu0JeF0t5K2PuY8YYkR7onQXvxz7dbfcnA@mail.gmail.com>

> \set at curr@file

is defined in the latest latex format. if you have an up to date
texlive you should have LaTeX release 2019-10-01 and this should be
defined.

David

From phe.h.o1 at gmail.com  Mon Oct  7 12:26:36 2019
From: phe.h.o1 at gmail.com (Phelype Oleinik)
Date: Mon, 7 Oct 2019 07:26:36 -0300
Subject: Hyperref change breaks every document that I'm writing!
In-Reply-To: <87eezooo5m.fsf@skimble.plus.com>
References: <87eezooo5m.fsf@skimble.plus.com>
Message-ID: <CANfjC09uJjboYsiaYe6dM+9a=TVjYVzDNXuzKT8_KtrDLWE+gg@mail.gmail.com>

Hi Sharon,

A couple of days ago the LaTeX kernel was updated and the guilty
\set at curr@file macro was added (part of handling UTF8 chars and
spaces in file names).

Make sure that you updated the LaTeX kernel too, not only the
graphics bundle (which seems to be the case here).

Best,
Phelype

On Mon, Oct 7, 2019 at 7:19 AM Sharon Kimble <boudiccas at skimble.plus.com> wrote:
>
>
> Since the hyperref changes and using the new hyperref every document
> that I'm writing is now broken!
>
> This is what it shows when trying to use a table of contents
>
> --------------------
> ! Undefined control sequence.
> \Ginclude at graphics ...\Ginput at path \set at curr@file
>                                                   {#1}\edef \uq at curr@file {\...
> l.87 \tableofcontents
> --------------------
>
> and if I disable the table of contents, then it breaks on footnotes.
>
> -----------------------
> ! Undefined control sequence.
> l.177 ...ou'll have to do a little digging. \uline
>                                                   {Message me} \footnote{\ur...
> ----------------------
>
> I can't find anyway of getting the old settings working with the new
> version.
>
> So how do I use the old hyperref package which is stored in
> '/home/boudiccas/texlive/2019/tlpkg/backups/hyperref.r52100.tar.lz4'
> please?
>
> Thanks
> Sharon.
> --
> A taste of linux = http://www.sharons.org.uk
> TGmeds = http://www.tgmeds.org.uk
> DrugFacts = https://www.drugfacts.org.uk
> Debian 10.1, fluxbox 1.3.7, emacs 26.3, org 9.2.6
>

From tex at 2krueger.de  Mon Oct  7 12:49:27 2019
From: tex at 2krueger.de (Marcel Fabian =?utf-8?Q?Kr=C3=BCger?=)
Date: Mon, 7 Oct 2019 12:49:27 +0200
Subject: Hyperref change breaks every document that I'm writing!
In-Reply-To: <87eezooo5m.fsf@skimble.plus.com>
References: <87eezooo5m.fsf@skimble.plus.com>
Message-ID: <20191007104927.ekafjtbt3paxajj4@yoga>

On Mon, Oct 07, 2019 at 11:17:25AM +0100, Sharon Kimble wrote:
> 
> Since the hyperref changes and using the new hyperref every document
> that I'm writing is now broken!
> 
> This is what it shows when trying to use a table of contents
> 
> --------------------
> ! Undefined control sequence.
> \Ginclude at graphics ...\Ginput at path \set at curr@file 
>                                                   {#1}\edef \uq at curr@file {\...
> l.87 \tableofcontents
> --------------------
> 
> and if I disable the table of contents, then it breaks on footnotes.
> 
> -----------------------
> ! Undefined control sequence.
> l.177 ...ou'll have to do a little digging. \uline
>                                                   {Message me} \footnote{\ur...
> ----------------------
> 

Hey,

the problem seems to be that you didn't do a full update so you ended up
with inconsistant versions. The new version of the graphics bundle needs
the new LaTeX kernel. So please update `latex` or, if `latex` already is
up-to-date, try rebuilding your format (`fmtutil-sys --byfmt latex`).


Best regards,
Marcel

From boudiccas at skimble.plus.com  Mon Oct  7 15:42:28 2019
From: boudiccas at skimble.plus.com (Sharon Kimble)
Date: Mon, 07 Oct 2019 14:42:28 +0100
Subject: Hyperref change breaks every document that I'm writing!
References: <87eezooo5m.fsf@skimble.plus.com>
 <CANfjC09uJjboYsiaYe6dM+9a=TVjYVzDNXuzKT8_KtrDLWE+gg@mail.gmail.com>
Message-ID: <87ftk4n03f.fsf@skimble.plus.com>


Phelype Oleinik <phe.h.o1 at gmail.com> writes:

> Hi Sharon,
>
> A couple of days ago the LaTeX kernel was updated and the guilty
> \set at curr@file macro was added (part of handling UTF8 chars and
> spaces in file names).
>
> Make sure that you updated the LaTeX kernel too, not only the
> graphics bundle (which seems to be the case here).

Thanks Phelype, but I did a total texlive update at 0807 this morning,
and there have been no further updates since, I've checked.

Thanks
Sharon.

> Best,
> Phelype
>
> On Mon, Oct 7, 2019 at 7:19 AM Sharon Kimble <boudiccas at skimble.plus.com> wrote:
>>
>>
>> Since the hyperref changes and using the new hyperref every document
>> that I'm writing is now broken!
>>
>> This is what it shows when trying to use a table of contents
>>
>> --------------------
>> ! Undefined control sequence.
>> \Ginclude at graphics ...\Ginput at path \set at curr@file
>>                                                   {#1}\edef \uq at curr@file {\...
>> l.87 \tableofcontents
>> --------------------
>>
>> and if I disable the table of contents, then it breaks on footnotes.
>>
>> -----------------------
>> ! Undefined control sequence.
>> l.177 ...ou'll have to do a little digging. \uline
>>                                                   {Message me} \footnote{\ur...
>> ----------------------
>>
>> I can't find anyway of getting the old settings working with the new
>> version.
>>
>> So how do I use the old hyperref package which is stored in
>> '/home/boudiccas/texlive/2019/tlpkg/backups/hyperref.r52100.tar.lz4'
>> please?
>>
>> Thanks
>> Sharon.
>> --
>> A taste of linux = http://www.sharons.org.uk
>> TGmeds = http://www.tgmeds.org.uk
>> DrugFacts = https://www.drugfacts.org.uk
>> Debian 10.1, fluxbox 1.3.7, emacs 26.3, org 9.2.6
>>

-- 
A taste of linux = http://www.sharons.org.uk
TGmeds = http://www.tgmeds.org.uk
DrugFacts = https://www.drugfacts.org.uk
Debian 10.1, fluxbox 1.3.7, emacs 26.3, org 9.2.6


From daleif at math.au.dk  Mon Oct  7 15:47:23 2019
From: daleif at math.au.dk (Lars Madsen)
Date: Mon, 7 Oct 2019 13:47:23 +0000
Subject: Hyperref change breaks every document that I'm writing!
In-Reply-To: <87ftk4n03f.fsf@skimble.plus.com>
References: <87eezooo5m.fsf@skimble.plus.com>
 <CANfjC09uJjboYsiaYe6dM+9a=TVjYVzDNXuzKT8_KtrDLWE+gg@mail.gmail.com>,
 <87ftk4n03f.fsf@skimble.plus.com>
Message-ID: <DB8PR01MB5947F15A7B331E83DB351D4EF29B0@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>

Sharon do you know which mirror you are updating from?


/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at math<http://au.dk/daleif at imf> / More information: http://au.dk/en/daleif at math<http://au.dk/en/daleif at imf>

________________________________
From: tex-live <tex-live-bounces+daleif=imf.au.dk at tug.org> on behalf of Sharon Kimble <boudiccas at skimble.plus.com>
Sent: 07 October 2019 15:42
To: tex-live at tug.org <tex-live at tug.org>
Subject: Re: Hyperref change breaks every document that I'm writing!


Phelype Oleinik <phe.h.o1 at gmail.com> writes:

> Hi Sharon,
>
> A couple of days ago the LaTeX kernel was updated and the guilty
> \set at curr@file macro was added (part of handling UTF8 chars and
> spaces in file names).
>
> Make sure that you updated the LaTeX kernel too, not only the
> graphics bundle (which seems to be the case here).

Thanks Phelype, but I did a total texlive update at 0807 this morning,
and there have been no further updates since, I've checked.

Thanks
Sharon.

> Best,
> Phelype
>
> On Mon, Oct 7, 2019 at 7:19 AM Sharon Kimble <boudiccas at skimble.plus.com> wrote:
>>
>>
>> Since the hyperref changes and using the new hyperref every document
>> that I'm writing is now broken!
>>
>> This is what it shows when trying to use a table of contents
>>
>> --------------------
>> ! Undefined control sequence.
>> \Ginclude at graphics ...\Ginput at path \set at curr@file
>>                                                   {#1}\edef \uq at curr@file {\...
>> l.87 \tableofcontents
>> --------------------
>>
>> and if I disable the table of contents, then it breaks on footnotes.
>>
>> -----------------------
>> ! Undefined control sequence.
>> l.177 ...ou'll have to do a little digging. \uline
>>                                                   {Message me} \footnote{\ur...
>> ----------------------
>>
>> I can't find anyway of getting the old settings working with the new
>> version.
>>
>> So how do I use the old hyperref package which is stored in
>> '/home/boudiccas/texlive/2019/tlpkg/backups/hyperref.r52100.tar.lz4'
>> please?
>>
>> Thanks
>> Sharon.
>> --
>> A taste of linux = http://www.sharons.org.uk
>> TGmeds = http://www.tgmeds.org.uk
>> DrugFacts = https://www.drugfacts.org.uk
>> Debian 10.1, fluxbox 1.3.7, emacs 26.3, org 9.2.6
>>

--
A taste of linux = http://www.sharons.org.uk
TGmeds = http://www.tgmeds.org.uk
DrugFacts = https://www.drugfacts.org.uk
Debian 10.1, fluxbox 1.3.7, emacs 26.3, org 9.2.6

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191007/1c368726/attachment.html>

From d.p.carlisle at gmail.com  Mon Oct  7 15:48:36 2019
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Mon, 7 Oct 2019 14:48:36 +0100
Subject: Hyperref change breaks every document that I'm writing!
In-Reply-To: <87ftk4n03f.fsf@skimble.plus.com>
References: <87eezooo5m.fsf@skimble.plus.com>
 <CANfjC09uJjboYsiaYe6dM+9a=TVjYVzDNXuzKT8_KtrDLWE+gg@mail.gmail.com>
 <87ftk4n03f.fsf@skimble.plus.com>
Message-ID: <CAEW6iOgG9UVBr_yE-pHWq4xECuPt3zTrpna2Lj=XrTeGt7ZfFA@mail.gmail.com>

On Mon, 7 Oct 2019 at 14:44, Sharon Kimble <boudiccas at skimble.plus.com> wrote:

> Thanks Phelype, but I did a total texlive update at 0807 this morning,

does the top of your log say

LaTeX2e <2019-10-01>

or does it still say 2018?  The update should have downloaded the 2019
release and rebuild the formats.

From boudiccas at skimble.plus.com  Mon Oct  7 15:49:04 2019
From: boudiccas at skimble.plus.com (Sharon Kimble)
Date: Mon, 07 Oct 2019 14:49:04 +0100
Subject: Hyperref change breaks every document that I'm writing!
References: <87eezooo5m.fsf@skimble.plus.com>
 <20191007104927.ekafjtbt3paxajj4@yoga>
Message-ID: <87tv8kll7z.fsf@skimble.plus.com>


Marcel Fabian Kr?ger <tex at 2krueger.de> writes:

> On Mon, Oct 07, 2019 at 11:17:25AM +0100, Sharon Kimble wrote:
>> 
>> Since the hyperref changes and using the new hyperref every document
>> that I'm writing is now broken!
>> 
>> This is what it shows when trying to use a table of contents
>> 
>> --------------------
>> ! Undefined control sequence.
>> \Ginclude at graphics ...\Ginput at path \set at curr@file 
>>                                                   {#1}\edef \uq at curr@file {\...
>> l.87 \tableofcontents
>> --------------------
>> 
>> and if I disable the table of contents, then it breaks on footnotes.
>> 
>> -----------------------
>> ! Undefined control sequence.
>> l.177 ...ou'll have to do a little digging. \uline
>>                                                   {Message me} \footnote{\ur...
>> ----------------------
>> 
>
> Hey,
>
> the problem seems to be that you didn't do a full update so you ended up
> with inconsistant versions. The new version of the graphics bundle needs
> the new LaTeX kernel. So please update `latex` or, if `latex` already is
> up-to-date, try rebuilding your format (`fmtutil-sys --byfmt latex`).
>
>
> Best regards,
> Marcel

Thanks Marcel, I did a full update at 0807 this morning, but I have also
done your suggestion of `fmtutil-sys --byfmt latex`.

The thing that has been pointed out to me by Peter Flynn on the comp.tex
newsgroup is using part of the solution from [1], and although I'm using
Debian 10 it works, much to my surprise! And the workaround is placing
this in your preamble --

---------------
\makeatletter
\def\set at curr@file#1{%
  \begingroup
    \escapechar\m at ne
    \xdef\@curr at file{\expandafter\string\csname #1\endcsname}%
  \endgroup
}
\def\quote at name#1{"\quote@@name#1\@gobble""}
\def\quote@@name#1"{#1\quote@@name}
\def\unquote at name#1{\quote@@name#1\@gobble"}
\makeatother
\usepackage{graphics}
---------------

Thanks
Sharon.

[1] https://tex.stackexchange.com/questions/511138/miktex-graphics-version-1-3b-bug-on-windows-10-setcurrfile-undefined
-- 
A taste of linux = http://www.sharons.org.uk
TGmeds = http://www.tgmeds.org.uk
DrugFacts = https://www.drugfacts.org.uk
Debian 10.1, fluxbox 1.3.7, emacs 26.3, org 9.2.6


From boudiccas at skimble.plus.com  Mon Oct  7 15:53:40 2019
From: boudiccas at skimble.plus.com (Sharon Kimble)
Date: Mon, 07 Oct 2019 14:53:40 +0100
Subject: Hyperref change breaks every document that I'm writing!
References: <87eezooo5m.fsf@skimble.plus.com>
 <CANfjC09uJjboYsiaYe6dM+9a=TVjYVzDNXuzKT8_KtrDLWE+gg@mail.gmail.com>
 <87ftk4n03f.fsf@skimble.plus.com>
 <DB8PR01MB5947F15A7B331E83DB351D4EF29B0@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>
Message-ID: <87imp0ll0b.fsf@skimble.plus.com>


Lars Madsen <daleif at math.au.dk> writes:

> Sharon do you know which mirror you are updating from?

Thanks for replying Lars.

I have this `alias texupdate='env "PATH=$PATH" tlmgr update -all'` in my
`.bash_aliases` so I don't know which one I've been using. If it helps I
live in Kent, England?

Thanks
Sharon.

> /Lars Madsen
> Institut for Matematik / Department of Mathematics
> Aarhus Universitet / Aarhus University
> Mere info: http://au.dk/daleif at math / More information: http://au.dk/en/daleif at math
>
> ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
> From: tex-live <tex-live-bounces+daleif=imf.au.dk at tug.org> on behalf of Sharon Kimble <boudiccas at skimble.plus.com>
> Sent: 07 October 2019 15:42
> To: tex-live at tug.org <tex-live at tug.org>
> Subject: Re: Hyperref change breaks every document that I'm writing!
>
> Phelype Oleinik <phe.h.o1 at gmail.com> writes:
>
>> Hi Sharon,
>>
>> A couple of days ago the LaTeX kernel was updated and the guilty
>> \set at curr@file macro was added (part of handling UTF8 chars and
>> spaces in file names).
>>
>> Make sure that you updated the LaTeX kernel too, not only the
>> graphics bundle (which seems to be the case here).
>
> Thanks Phelype, but I did a total texlive update at 0807 this morning,
> and there have been no further updates since, I've checked.
>
> Thanks
> Sharon.
>
>> Best,
>> Phelype
>>
>> On Mon, Oct 7, 2019 at 7:19 AM Sharon Kimble <boudiccas at skimble.plus.com> wrote:
>>>
>>>
>>> Since the hyperref changes and using the new hyperref every document
>>> that I'm writing is now broken!
>>>
>>> This is what it shows when trying to use a table of contents
>>>
>>> --------------------
>>> ! Undefined control sequence.
>>> \Ginclude at graphics ...\Ginput at path \set at curr@file
>>>                                                   {#1}\edef \uq at curr@file {\...
>>> l.87 \tableofcontents
>>> --------------------
>>>
>>> and if I disable the table of contents, then it breaks on footnotes.
>>>
>>> -----------------------
>>> ! Undefined control sequence.
>>> l.177 ...ou'll have to do a little digging. \uline
>>>                                                   {Message me} \footnote{\ur...
>>> ----------------------
>>>
>>> I can't find anyway of getting the old settings working with the new
>>> version.
>>>
>>> So how do I use the old hyperref package which is stored in
>>> '/home/boudiccas/texlive/2019/tlpkg/backups/hyperref.r52100.tar.lz4'
>>> please?
>>>
>>> Thanks
>>> Sharon.
>>> --
-- 
A taste of linux = http://www.sharons.org.uk
TGmeds = http://www.tgmeds.org.uk
DrugFacts = https://www.drugfacts.org.uk
Debian 10.1, fluxbox 1.3.7, emacs 26.3, org 9.2.6


From boudiccas at skimble.plus.com  Mon Oct  7 15:57:43 2019
From: boudiccas at skimble.plus.com (Sharon Kimble)
Date: Mon, 07 Oct 2019 14:57:43 +0100
Subject: Hyperref change breaks every document that I'm writing!
References: <87eezooo5m.fsf@skimble.plus.com>
 <CANfjC09uJjboYsiaYe6dM+9a=TVjYVzDNXuzKT8_KtrDLWE+gg@mail.gmail.com>
 <87ftk4n03f.fsf@skimble.plus.com>
 <CAEW6iOgG9UVBr_yE-pHWq4xECuPt3zTrpna2Lj=XrTeGt7ZfFA@mail.gmail.com>
Message-ID: <878spwlktk.fsf@skimble.plus.com>


David Carlisle <d.p.carlisle at gmail.com> writes:

> On Mon, 7 Oct 2019 at 14:44, Sharon Kimble <boudiccas at skimble.plus.com> wrote:
>
>> Thanks Phelype, but I did a total texlive update at 0807 this morning,
>
> does the top of your log say
>
> LaTeX2e <2019-10-01>
>
> or does it still say 2018?  The update should have downloaded the 2019
> release and rebuild the formats.

`Automated TeX Live installation using profile: installation.profile
Trying to verify cryptographic signatures!
Loading http://ctan.cs.uu.nl/systems/texlive/tlnet/tlpkg/texlive.tlpdb
Installing TeX Live 2019 from: http://ctan.cs.uu.nl/systems/texlive/tlnet (verified)
Platform: x86_64-linux => 'GNU/Linux on x86_64'`

Thanks
Sharon,
-- 
A taste of linux = http://www.sharons.org.uk
TGmeds = http://www.tgmeds.org.uk
DrugFacts = https://www.drugfacts.org.uk
Debian 10.1, fluxbox 1.3.7, emacs 26.3, org 9.2.6


From karl at freefriends.org  Mon Oct  7 23:41:25 2019
From: karl at freefriends.org (Karl Berry)
Date: Mon, 7 Oct 2019 15:41:25 -0600
Subject: Hyperref change breaks every document that I'm writing!
In-Reply-To: <878spwlktk.fsf@skimble.plus.com>
Message-ID: <201910072141.x97LfPEJ008712@freefriends.org>

    Installing TeX Live 2019 from: http://ctan.cs.uu.nl/systems/texlive/tlnet

That mirror does appear to be up to date.
http://ctan.cs.uu.nl/systems/texlive/tlnet/archive/?C=M;O=A
(scroll to the bottom) shows that latex.tar.xz and all related dated
October 5, as they should be. What does 
  tlmgr info latex
report? It should be "revision: 52286".

Assuming that's current, maybe you have an old .fmt file shadowing the
one that (hopefully) got rebuilt. Try:
  kpsewhich --all -engine=/ pdflatex.fmt

And then ls -l on the results. Normally there should only be one, and it
should have the same October 5 (plus/minus depending on time zones) date.

Hope this helps,
Karl

From boudiccas at skimble.plus.com  Tue Oct  8 05:12:02 2019
From: boudiccas at skimble.plus.com (Sharon Kimble)
Date: Tue, 08 Oct 2019 04:12:02 +0100
Subject: Hyperref change breaks every document that I'm writing!
References: <878spwlktk.fsf@skimble.plus.com>
 <201910072141.x97LfPEJ008712@freefriends.org>
Message-ID: <87ftk4j5h9.fsf@skimble.plus.com>


Karl Berry <karl at freefriends.org> writes:

Thanks for replying Karl.

>     Installing TeX Live 2019 from: http://ctan.cs.uu.nl/systems/texlive/tlnet
>
> That mirror does appear to be up to date.
> http://ctan.cs.uu.nl/systems/texlive/tlnet/archive/?C=M;O=A
> (scroll to the bottom) shows that latex.tar.xz and all related dated
> October 5, as they should be. What does 
>   tlmgr info latex
> report? It should be "revision: 52286".

revision 52286

> Assuming that's current, maybe you have an old .fmt file shadowing the
> one that (hopefully) got rebuilt. Try:
>   kpsewhich --all -engine=/ pdflatex.fmt
>
> And then ls -l on the results. Normally there should only be one, and it
> should have the same October 5 (plus/minus depending on time zones) date.

pdflatex.fmt = Oct 7 0806 which tallies with me completing updating on
Monday Oct 7 @ 0807.

So it seems that I do have a fully updated texlive installation, hooray!

Thanks all.
Sharon.
-- 
A taste of linux = http://www.sharons.org.uk
TGmeds = http://www.tgmeds.org.uk
DrugFacts = https://www.drugfacts.org.uk
Debian 10.1, fluxbox 1.3.7, emacs 26.3, org 9.2.6


From maximilian.noethe at tu-dortmund.de  Tue Oct  8 12:33:12 2019
From: maximilian.noethe at tu-dortmund.de (=?UTF-8?Q?Maximilian_N=c3=b6the?=)
Date: Tue, 8 Oct 2019 12:33:12 +0200
Subject: lualatex: graphicx does not find any files when grffile is loaded
Message-ID: <b741c29e-f99a-25e9-4b45-c40525f2dd8e@tu-dortmund.de>

Hi all,

With the latest lualatex version,
loading the grffile package completely breaks includegraphics.

Example:

\documentclass{scrartcl}
\usepackage{graphicx}
\usepackage{grffile}

\begin{document}
 ??? \includegraphics{example-image-a.pdf}
\end{document}


The example compiles fine with pdflatex and xelatex, but with lualatex 
it raises the following error:

LaTeX Warning: File `example-image-a.pdf' not found on input line 9.

! error: (file """example-image-a".pdf) (pdf backend): cannot find image 
file '"""example-image-a".pdf'
! ==> Fatal error occurred, no output PDF file produced!

Observe the strange extra quotes around the file name.

Any ideas?

Cheers
Max


From d.p.carlisle at gmail.com  Tue Oct  8 12:51:52 2019
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Tue, 8 Oct 2019 11:51:52 +0100
Subject: lualatex: graphicx does not find any files when grffile is loaded
In-Reply-To: <b741c29e-f99a-25e9-4b45-c40525f2dd8e@tu-dortmund.de>
References: <b741c29e-f99a-25e9-4b45-c40525f2dd8e@tu-dortmund.de>
Message-ID: <CAEW6iOiFw8yTkgXAob9xgNeJiwiBowFi+wi90=n1QJRpAKjVzw@mail.gmail.com>

This will be fixed shortly but investigating the best place, please follow

https://github.com/ho-tex/oberdiek/issues/73

where this is being tracked

From boudiccas at skimble.plus.com  Tue Oct  8 14:46:37 2019
From: boudiccas at skimble.plus.com (Sharon Kimble)
Date: Tue, 08 Oct 2019 13:46:37 +0100
Subject: Hyperref change breaks every document that I'm writing!
References: <87eezooo5m.fsf@skimble.plus.com>
 <CANfjC09uJjboYsiaYe6dM+9a=TVjYVzDNXuzKT8_KtrDLWE+gg@mail.gmail.com>
 <87ftk4n03f.fsf@skimble.plus.com>
 <DB8PR01MB5947F15A7B331E83DB351D4EF29B0@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>
 <87imp0ll0b.fsf@skimble.plus.com>
Message-ID: <87o8yrievm.fsf@skimble.plus.com>


Dr Eberhard Lisse over on comp.tex newsgroup has found a simple solution
to this problem that doesn't involve adding any code to the preamble of
the document. You just do -

----------------
tlmgr update --all --self
tlmgr restore graphics 51733
---------------

I've found that this works very easily and neatly, and its now my
preferred solution to the problem of the graphics program.

Thanks all for your input
Sharon.
-- 
A taste of linux = http://www.sharons.org.uk
TGmeds = http://www.tgmeds.org.uk
DrugFacts = https://www.drugfacts.org.uk
Debian 10.1, fluxbox 1.3.7, emacs 26.3, org 9.2.6


From tex at 2krueger.de  Thu Oct 10 23:08:37 2019
From: tex at 2krueger.de (Marcel Fabian =?utf-8?Q?Kr=C3=BCger?=)
Date: Thu, 10 Oct 2019 23:08:37 +0200
Subject: Wrong assignment in texmf.cnf
Message-ID: <20191010210837.ny4pl2mmsydun5vj@yoga>

Hi,

in the current default version of texmf.cnf, LUAINPUTS.luahblatex
and LUAINPUTS.luahblatex-dev are not set. Instead their values are
assigned to TEXINPUTS.*.

Best regards,
Marcel

From karl at freefriends.org  Thu Oct 10 23:24:46 2019
From: karl at freefriends.org (Karl Berry)
Date: Thu, 10 Oct 2019 15:24:46 -0600
Subject: Wrong assignment in texmf.cnf
In-Reply-To: <20191010210837.ny4pl2mmsydun5vj@yoga>
Message-ID: <201910102124.x9ALOkex023208@freefriends.org>

    in the current default version of texmf.cnf, LUAINPUTS.luahblatex
    and LUAINPUTS.luahblatex-dev are not set. 

Thanks. Fixed for tonight's update. --best, karl.

From daleif at math.au.dk  Fri Oct 11 17:06:21 2019
From: daleif at math.au.dk (Lars Madsen)
Date: Fri, 11 Oct 2019 15:06:21 +0000
Subject: Updating basictex did not trigger format rebuild
Message-ID: <DB8PR01MB5947DB7FCDB24D1C4A24E1D1F2970@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>

Not sure if it is worth looking at

A user on https://tex.stackexchange.com/q/511838/3929

reported that updating basictex (the small MacTeX) did not trigger rebuilding the formats which is kinda critical after the latest latex kernel changes

A manual

sudo fmtutil-sys --all

helped. Just wanted to pass it on if there was a general problem with it.

Note that it is on Catalina if that makes a difference.

A another person in the comments mentioned the same problem with a full MacTeX. Not sure if that person is also on calatina.




/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at math<http://au.dk/daleif at imf> / More information: http://au.dk/en/daleif at math<http://au.dk/en/daleif at imf>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191011/5ce22b68/attachment.html>

From herbs at wideopenwest.com  Fri Oct 11 17:13:55 2019
From: herbs at wideopenwest.com (Herbert Schulz)
Date: Fri, 11 Oct 2019 10:13:55 -0500
Subject: Updating basictex did not trigger format rebuild
In-Reply-To: <DB8PR01MB5947DB7FCDB24D1C4A24E1D1F2970@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>
References: <DB8PR01MB5947DB7FCDB24D1C4A24E1D1F2970@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>
Message-ID: <A6475D09-CE26-4126-B938-AF2C79E8F093@wideopenwest.com>

> On Oct 11, 2019, at 10:06 AM, Lars Madsen <daleif at math.au.dk> wrote:
> 
> Not sure if it is worth looking at 
> 
> A user on https://tex.stackexchange.com/q/511838/3929
> 
> reported that updating basictex (the small MacTeX) did not trigger rebuilding the formats which is kinda critical after the latest latex kernel changes
> 
> A manual
> 
> sudo fmtutil-sys --all
> 
> helped. Just wanted to pass it on if there was a general problem with it.
> 
> Note that it is on Catalina if that makes a difference. 
> 
> A another person in the comments mentioned the same problem with a full MacTeX. Not sure if that person is also on calatina.
> 
> 
> 
> 
> /Lars Madsen
> Institut for Matematik / Department of Mathematics
> Aarhus Universitet / Aarhus University
> Mere info: http://au.dk/daleif at math / More information: http://au.dk/en/daleif at math
> 
> 

Howdy,

I can't say about BasicTeX but I have no problem updating the full TeX Live 2019 (installed by MacTeX) under Catalina. I usually us teX Live Utility which is a front end to tlmgr as well as tlmgr directly.

Good Luck,

Herb Schulz
(herbs at wideopenwest dot com)



From h.y.acetaminophen at gmail.com  Fri Oct 11 17:21:29 2019
From: h.y.acetaminophen at gmail.com (Hironobu Yamashita)
Date: Sat, 12 Oct 2019 00:21:29 +0900
Subject: Updating basictex did not trigger format rebuild
In-Reply-To: <A6475D09-CE26-4126-B938-AF2C79E8F093@wideopenwest.com>
References: <DB8PR01MB5947DB7FCDB24D1C4A24E1D1F2970@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>
 <A6475D09-CE26-4126-B938-AF2C79E8F093@wideopenwest.com>
Message-ID: <CAJCZBmQMDFBpW7SLCJpnj3syv+tneX3oUJHr7=1F5zqFHVbq5Q@mail.gmail.com>

Hi,

MacTeX and BasicTeX has different setup in texlive.tlpdb;

BasicTeX:
depend opt_create_formats:0

MacTeX:
depend opt_create_formats:1

I don't know why BasicTeX does not recreate format ...
I think this behavior is inconvenient enough

Hironobu


2019-10-12 (Sat.) 0:14 Herbert Schulz <herbs at wideopenwest.com>:

>
> > On Oct 11, 2019, at 10:06 AM, Lars Madsen <daleif at math.au.dk> wrote:
> >
> > Not sure if it is worth looking at
> >
> > A user on https://tex.stackexchange.com/q/511838/3929
> >
> > reported that updating basictex (the small MacTeX) did not trigger rebuilding the formats which is kinda critical after the latest latex kernel changes
> >
> > A manual
> >
> > sudo fmtutil-sys --all
> >
> > helped. Just wanted to pass it on if there was a general problem with it.
> >
> > Note that it is on Catalina if that makes a difference.
> >
> > A another person in the comments mentioned the same problem with a full MacTeX. Not sure if that person is also on calatina.
> >
> >
> >
> >
> > /Lars Madsen
> > Institut for Matematik / Department of Mathematics
> > Aarhus Universitet / Aarhus University
> > Mere info: http://au.dk/daleif at math / More information: http://au.dk/en/daleif at math
> >
> >
>
> Howdy,
>
> I can't say about BasicTeX but I have no problem updating the full TeX Live 2019 (installed by MacTeX) under Catalina. I usually us teX Live Utility which is a front end to tlmgr as well as tlmgr directly.
>
> Good Luck,
>
> Herb Schulz
> (herbs at wideopenwest dot com)
>
>

From koch at math.uoregon.edu  Fri Oct 11 17:59:40 2019
From: koch at math.uoregon.edu (Richard Koch)
Date: Fri, 11 Oct 2019 08:59:40 -0700
Subject: Updating basictex did not trigger format rebuild
In-Reply-To: <CAJCZBmQMDFBpW7SLCJpnj3syv+tneX3oUJHr7=1F5zqFHVbq5Q@mail.gmail.com>
References: <DB8PR01MB5947DB7FCDB24D1C4A24E1D1F2970@DB8PR01MB5947.eurprd01.prod.exchangelabs.com>
 <A6475D09-CE26-4126-B938-AF2C79E8F093@wideopenwest.com>
 <CAJCZBmQMDFBpW7SLCJpnj3syv+tneX3oUJHr7=1F5zqFHVbq5Q@mail.gmail.com>
Message-ID: <3DB45004-17E4-4DD2-8CFA-9581E9A668AC@math.uoregon.edu>

Folks,

(Adam and Norbert, I copied you on this email because it discusses a problem during updating TeX Live on Apple's latest operating system. I've copied earlier email at the end so you can pick up the thread.)

In the next several months I'll concentrate on mathematics rather than TeX, so let me pass on what I know and let all of you handle this problem.

Both MacTeX and BasicTeX are constructed the same way. I install the full TeX Live, or the "small scheme" of TeX Live, using the TeX Live install script. For BasicTeX, but not MacTeX, I uncheck the option "make format files" in the TeX Live install script. Both are installed in /usr/local/texlive, and the texlive subfolder did not exist before installation.

Then I copy the installation, without modifying anything, to a folder named "Root" in the directory where I build MacTeX or BasicTeX and tell Apple's PackageMaker software to create an install package from the contents of this Root folder.

Notice that this method, by design, involves NO customization whatever. I never touch texlive.tipdb myself, or touch any other file in the distribution.

I do not build formats in BasicTeX because I want this package to be as small as possible. Instead, in the post install script I call sudo fmtutil-sys --all. Size is not so important in MacTeX, so I do build formats there; however the formats are rebuilt in the post install script if necessary.

I have followed exactly this process for many years, and have never had reports of trouble after updating the distribution. Reports of trouble that emerged yesterday suggest a problem only on Catalina, and possibly only for BasicTeX.

I have used the full MacTeX on beta copies of Catalina for several months without problems.

Richard Koch
koch at uoregon.edu <mailto:koch at uoregon.edu>

----------------

Earlier items in the thread:


Hi,

MacTeX and BasicTeX has different setup in texlive.tlpdb;

BasicTeX:
depend opt_create_formats:0

MacTeX:
depend opt_create_formats:1

I don't know why BasicTeX does not recreate format ...
I think this behavior is inconvenient enough

Hironobu


2019-10-12 (Sat.) 0:14 Herbert Schulz <herbs at wideopenwest.com <mailto:herbs at wideopenwest.com>>:

> 
>> On Oct 11, 2019, at 10:06 AM, Lars Madsen <daleif at math.au.dk <mailto:daleif at math.au.dk>> wrote:
>> 
>> Not sure if it is worth looking at
>> 
>> A user on https://urldefense.com/v3/__https://tex.stackexchange.com/q/511838/3929__;!5W9E9PnL_ac!S-UYsaBgmYc7vqwhL7P3vSs4KT5Cx30fnUxPetEeWB_l_KyXs4gACpEWLi1QwDE$ <https://urldefense.com/v3/__https://tex.stackexchange.com/q/511838/3929__;!5W9E9PnL_ac!S-UYsaBgmYc7vqwhL7P3vSs4KT5Cx30fnUxPetEeWB_l_KyXs4gACpEWLi1QwDE$> 
>> 
>> reported that updating basictex (the small MacTeX) did not trigger rebuilding the formats which is kinda critical after the latest latex kernel changes
>> 
>> A manual
>> 
>> sudo fmtutil-sys --all
>> 
>> helped. Just wanted to pass it on if there was a general problem with it.
>> 
>> Note that it is on Catalina if that makes a difference.
>> 
>> A another person in the comments mentioned the same problem with a full MacTeX. Not sure if that person is also on calatina.
>> 
>> 
>> 
>> 
>> /Lars Madsen
>> Institut for Matematik / Department of Mathematics
>> Aarhus Universitet / Aarhus University
>> Mere info: https://urldefense.com/v3/__http://au.dk/daleif at math__;!5W9E9PnL_ac!S-UYsaBgmYc7vqwhL7P3vSs4KT5Cx30fnUxPetEeWB_l_KyXs4gACpEWCIta6G0$ <https://urldefense.com/v3/__http://au.dk/daleif at math__;!5W9E9PnL_ac!S-UYsaBgmYc7vqwhL7P3vSs4KT5Cx30fnUxPetEeWB_l_KyXs4gACpEWCIta6G0$>  / More information: https://urldefense.com/v3/__http://au.dk/en/daleif at math__;!5W9E9PnL_ac!S-UYsaBgmYc7vqwhL7P3vSs4KT5Cx30fnUxPetEeWB_l_KyXs4gACpEW0Mqyd3s$ <https://urldefense.com/v3/__http://au.dk/en/daleif at math__;!5W9E9PnL_ac!S-UYsaBgmYc7vqwhL7P3vSs4KT5Cx30fnUxPetEeWB_l_KyXs4gACpEW0Mqyd3s$> 
>> 
>> 
> 
> Howdy,
> 
> I can't say about BasicTeX but I have no problem updating the full TeX Live 2019 (installed by MacTeX) under Catalina. I usually us teX Live Utility which is a front end to tlmgr as well as tlmgr directly.
> 
> Good Luck,
> 
> Herb Schulz
> (herbs at wideopenwest dot com)






 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191011/c92407eb/attachment-0001.html>

From karl at freefriends.org  Fri Oct 11 23:54:04 2019
From: karl at freefriends.org (Karl Berry)
Date: Fri, 11 Oct 2019 15:54:04 -0600
Subject: Updating basictex did not trigger format rebuild
In-Reply-To: <3DB45004-17E4-4DD2-8CFA-9581E9A668AC@math.uoregon.edu>
Message-ID: <201910112154.x9BLs42r026620@freefriends.org>

    In the next several months I'll concentrate on mathematics rather
    than TeX,

What a concept..

    so let me pass on what I know and let all of you handle this
    problem.

I don't think we can.

    For BasicTeX, but not MacTeX, I uncheck the option "make
    format files" in the TeX Live install script. 

Well, if I'm understanding correctly, that is exactly the issue,
Dick. By unchecking that option you are telling TL to leave the formats
alone. Therefore it does so. I suggest leaving it checked for BasicTeX
too.

    I do not build formats in BasicTeX because I want this package to be as
    small as possible. 

basictex*.pkg is 76MB. I doubt a few .fmt files will increase it
appreciably, especially since presumably they are compressed as part of
the .pkg file.

    never had reports of trouble after updating the distribution. 

I surmise that the intersection of (a) people using BasicTeX
and (b) a format change being noticeable to the user
has heretofore been empty. Usually, the formats that get built at
install time are fine.

    Reports of trouble that emerged yesterday suggest a
    problem only on Catalina,

I can't imagine how the OS version could be relevant.

    and possibly only for BasicTeX.

Right, because that is where the option is unchecked.

Happy mathematicizing,
Karl

From karl at freefriends.org  Fri Oct 11 23:57:49 2019
From: karl at freefriends.org (Karl Berry)
Date: Fri, 11 Oct 2019 15:57:49 -0600
Subject: Updating basictex did not trigger format rebuild
In-Reply-To: <3DB45004-17E4-4DD2-8CFA-9581E9A668AC@math.uoregon.edu>
Message-ID: <201910112157.x9BLvnrw026878@freefriends.org>

P.S. Or, actually, ignore that. I think I'm totally wrong. The option is
about format creation at install time, not updates.

Also, another TL user reported the same problem of latex formats not
being rebuilt. I guess we are somehow missing a dependency for
rebuilding latex, despite all my efforts in that regard.

I don't think it is OS related, at least.

From preining at logic.at  Sat Oct 12 01:09:14 2019
From: preining at logic.at (Norbert Preining)
Date: Sat, 12 Oct 2019 08:09:14 +0900
Subject: Updating basictex did not trigger format rebuild
In-Reply-To: <201910112157.x9BLvnrw026878@freefriends.org>
References: <3DB45004-17E4-4DD2-8CFA-9581E9A668AC@math.uoregon.edu>
 <201910112157.x9BLvnrw026878@freefriends.org>
Message-ID: <20191011230914.kdzycttbtaibqytw@burischnitzel.preining.info>

Hi Karl,

@Dick: suggested solution at the end.

> P.S. Or, actually, ignore that. I think I'm totally wrong. The option is
> about format creation at install time, not updates.

No, you are not wrong. This options disables updates of formats also in
the running system:
tlmgr.pl l.938ff

    my $opt_fmt = $localtlpdb->option("create_formats");
    ...
    if ($opt_fmt && !$::regenerate_all_formats) {
      # first regenerate all formats --byengine
      ...
      # now rebuild all other formats
      ...
    }


> Also, another TL user reported the same problem of latex formats not
> being rebuilt. I guess we are somehow missing a dependency for
> rebuilding latex, despite all my efforts in that regard.

I just reduced the revision for latex package in my tlpdb and
run tlmgr update --all:
$ tlmgr update --all
tlmgr: package repositories
	main = /home/norbert/public_html/tlnet (verified)
	tltexjp = /home/norbert/public_html/tltexjp (verified)
	tlcritical = /home/norbert/public_html/tlcritical (verified)
	tlcontrib = /home/norbert/Domains/server/texlive.info/contrib/2019 (verified)
tlmgr: saving backups to /home/norbert/tl/2019/tlpkg/backups
[1/1, ??:??/??:??] update: latex [16812k] (5228 -> 52286 at main) ... done
running mktexlsr ...
done running mktexlsr.
running mtxrun --generate ...
done running mtxrun --generate.
regenerating fmtutil.cnf in /home/norbert/tl/2019/texmf-dist
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt pdflatex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt pdflatex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt pdfxmltex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt pdfxmltex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt xelatex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt xelatex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt uplatex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt uplatex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt cslatex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt cslatex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt lamed ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt lamed.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt platex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt platex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt dvilualatex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt dvilualatex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt lualatex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt lualatex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt mllatex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt mllatex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt pdfjadetex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt pdfjadetex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt xmltex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt xmltex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt latex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt latex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt pdfcslatex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt pdfcslatex.
running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt jadetex ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt jadetex.
tlmgr: package log updated: /home/norbert/tl/2019/texmf-var/web2c/tlmgr.log
$


I don't see a reason why formats are not rebuild, and I need to see the
actual invocation of the update with output.


So simplest solution for BasicTeX: Before moving the TL directory change
the tlpdb variable again (sed should be fine, or a call to the installed
tlmgr).
	sed -i -s 's/depend opt_create_formats:0/depend opt_create_formats:1/' path/to/texlive.tlpdb


Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From koch at math.uoregon.edu  Sat Oct 12 03:56:47 2019
From: koch at math.uoregon.edu (Richard Koch)
Date: Fri, 11 Oct 2019 18:56:47 -0700
Subject: Updating basictex did not trigger format rebuild
Message-ID: <CE5B79BA-7685-470A-866C-5D6C8C1D4239@math.uoregon.edu>

Norbert,

OK, I'll rebuild Basic TeX. Before starting, I decided to try an experiment. I made BasicTeX-2019 my default TeX Distribution and then ran "sudo tlmgr paper a4". As the console output below says, formats were rebuilt. Why didn't this operation consult 

	$opt_fmt = $localtlpdb->option("create_formats");

before rebuilding the formats, like tlmgr does when updating?


Richard

------------

tlmgr: setting paper size for dvipdfmx to a4: /usr/local/texlive/2019basic-hardened/texmf-config/dvipdfmx/dvipdfmx.cfg
tlmgr: setting paper size for dvips to a4: /usr/local/texlive/2019basic-hardened/texmf-config/dvips/config/config.ps
tlmgr: setting paper size for pdftex to a4: /usr/local/texlive/2019basic-hardened/texmf-config/tex/generic/config/pdftexconfig.tex
tlmgr: setting paper size for xdvi to a4: /usr/local/texlive/2019basic-hardened/texmf-config/xdvi/XDvi
Regenerating all formats, this may take some time ...running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --all ...
done running fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --all.
done

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191011/336004e7/attachment.html>

From koch at math.uoregon.edu  Sat Oct 12 05:53:30 2019
From: koch at math.uoregon.edu (Richard Koch)
Date: Fri, 11 Oct 2019 20:53:30 -0700
Subject: Updating basictex did not trigger format rebuild
Message-ID: <2BD9F963-BE9B-41A5-AFF1-D096DA76682A@math.uoregon.edu>

An updated BasicTeX-2019 is now on TUG and will flow to CTAN servers in the next few days. It is named mactex-basictex-20191011.pkg, and when it is updated, formats will be rebuilt if necessary.. This package is notarized and all binaries adopt a hardened runtime.

Richard Koch

From preining at logic.at  Sat Oct 12 08:29:48 2019
From: preining at logic.at (Norbert Preining)
Date: Sat, 12 Oct 2019 15:29:48 +0900
Subject: Updating basictex did not trigger format rebuild
In-Reply-To: <CE5B79BA-7685-470A-866C-5D6C8C1D4239@math.uoregon.edu>
References: <CE5B79BA-7685-470A-866C-5D6C8C1D4239@math.uoregon.edu>
Message-ID: <20191012062948.sxiodqgcgbvq6nvm@bulldog.preining.info>

Hi Richard,

On Fri, 11 Oct 2019, Richard Koch wrote:
> OK, I'll rebuild Basic TeX. Before starting, I decided to try an experiment. I made BasicTeX-2019 my default TeX Distribution and then ran "sudo tlmgr paper a4". As the console output below says, formats were rebuilt. Why didn't this operation consult 
> 
> 	$opt_fmt = $localtlpdb->option("create_formats");
> 
> before rebuilding the formats, like tlmgr does when updating?

Because I didn't think of that and the check is not in the code ;-) I
actually never thought anybody will disable the create_formats options,
it was there due to historical and portable reasons.

Do you want this fixed?

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From karl at freefriends.org  Sun Oct 13 00:47:46 2019
From: karl at freefriends.org (Karl Berry)
Date: Sat, 12 Oct 2019 16:47:46 -0600
Subject: Updating basictex did not trigger format rebuild
In-Reply-To: <CE5B79BA-7685-470A-866C-5D6C8C1D4239@math.uoregon.edu>
Message-ID: <201910122247.x9CMlkdd019373@freefriends.org>

    ran "sudo tlmgr paper a4". 

Not that I know anything anymore :), but I think it's actually desirable
that tlmgr paper always rebuilds formats, irrespectively of
create_formats. Because in that case the user is explicitly asking to do
something (change paper size) which definitely requires remaking the
formats.

Whereas downloading packages only implicitly requires new formats, so it
sort of makes sense for that be controlled by the option.  Although, as
we've seen, disabling remaking formats on package updates is not likely
to do anything but cause confusion in the few cases where it actually
makes a noticeable difference.

I think we originally had that option only for installation time,
because it is plausible, if unusual, to not create all formats
automatically at the end of installation, e.g., to allow for intervening
local tweaking of packages or setup. I sometimes disable create_formats
for myself, and let the formats be created on the fly (with mktexfmt),
just to make sure that that feature still works, and also so only the
formats I actually use get created.

So, Norbert, maybe it would be better for package updates to also ignore
create_formats, and for it only to apply at installation? Wdyt? --thanks, k.

From preining at logic.at  Sun Oct 13 14:34:39 2019
From: preining at logic.at (Norbert Preining)
Date: Sun, 13 Oct 2019 21:34:39 +0900
Subject: Updating basictex did not trigger format rebuild
In-Reply-To: <201910122247.x9CMlkdd019373@freefriends.org>
References: <CE5B79BA-7685-470A-866C-5D6C8C1D4239@math.uoregon.edu>
 <201910122247.x9CMlkdd019373@freefriends.org>
Message-ID: <20191013123439.hxmha6n5dgvgz5be@bulldog.preining.info>

Hi Karl,

On Sat, 12 Oct 2019, Karl Berry wrote:
> I think we originally had that option only for installation time,

Not sure about that, a git blame tlmgr.pl shows that the lines under
discussion are there since 2009 (svn 13671) so it has been like this for
quite some time ;-)

> So, Norbert, maybe it would be better for package updates to also ignore
> create_formats, and for it only to apply at installation? Wdyt? --thanks, k.

Then we could drop that option completely from the tlpdb, as it is only
an installation option. But I am not convinced that we should do that.
There might be other reasons (portable? read only? ...) that this option
is set.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From murrayeisenberg at gmail.com  Sun Oct 13 16:31:13 2019
From: murrayeisenberg at gmail.com (Murray Eisenberg)
Date: Sun, 13 Oct 2019 10:31:13 -0400
Subject: who can fix babel-french incompatibility with crossreftools
Message-ID: <5AC01C2B-2145-4958-9D51-3285ED1EBF4A@gmail.com>

Because babel-french makes the colon (:) an active character, the functions in the crossreftools cause errors with \label when the argument of \label includes a colon. See:

	https://tex.stackexchange.com/questions/511030/another-babel-french-incompatibility-with-crossreftools <https://tex.stackexchange.com/questions/511030/another-babel-french-incompatibility-with-crossreftools>

	https://tex.stackexchange.com/questions/510591/babel-and-crossreftools-incompatibility/510641#510641

Who can fix this? (I am unqualified: the TeX in crossreftools is well beyond my very rudimentary knowledge of pure TeX.)

The package maintainer is Christian Hupfer, but according to his tex.stackexchange.com <http://tex.stackexchange.com/> profile, he has stopped reading tex.stackexchange and ?returned to the Black Forest." 
---
Murray Eisenberg			murrayeisenberg at gmail.com
503 King Farm Blvd #101	Home (240)-246-7240
Rockville, MD 20850-6667	Mobile (413)-427-5334


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191013/d42f4022/attachment.html>

From zdenek.wagner at gmail.com  Sun Oct 13 19:26:45 2019
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sun, 13 Oct 2019 19:26:45 +0200
Subject: who can fix babel-french incompatibility with crossreftools
In-Reply-To: <5AC01C2B-2145-4958-9D51-3285ED1EBF4A@gmail.com>
References: <5AC01C2B-2145-4958-9D51-3285ED1EBF4A@gmail.com>
Message-ID: <CAC1phyYM0k8fvyczBgZqV1yHH-YFzpcS+Q-n4uHrZWUYUHU5bw@mail.gmail.com>

Hi,

you have to patch all macros where you need a colon with category 12,
for instance:

\let\origlabel\label
\def\label{\begingroup\catcode`\:12\inactivelabel}
\def\inactivelabel#1{\endgroup\origlabel{#1}}

This is a general problem with babel and nobody is able to fix all
packages with all languages. If you are not forced to use babel,
consider switching to XeLaTeX and polyglossia. You will not have so
many problems.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

ne 13. 10. 2019 v 17:38 odes?latel Murray Eisenberg
<murrayeisenberg at gmail.com> napsal:
>
> Because babel-french makes the colon (:) an active character, the functions in the crossreftools cause errors with \label when the argument of \label includes a colon. See:
>
> https://tex.stackexchange.com/questions/511030/another-babel-french-incompatibility-with-crossreftools
>
> https://tex.stackexchange.com/questions/510591/babel-and-crossreftools-incompatibility/510641#510641
>
> Who can fix this? (I am unqualified: the TeX in crossreftools is well beyond my very rudimentary knowledge of pure TeX.)
>
> The package maintainer is Christian Hupfer, but according to his tex.stackexchange.com profile, he has stopped reading tex.stackexchange and ?returned to the Black Forest."
> ---
> Murray Eisenberg murrayeisenberg at gmail.com
> 503 King Farm Blvd #101 Home (240)-246-7240
> Rockville, MD 20850-6667 Mobile (413)-427-5334
>
>


From d.p.carlisle at gmail.com  Sun Oct 13 19:38:39 2019
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Sun, 13 Oct 2019 18:38:39 +0100
Subject: who can fix babel-french incompatibility with crossreftools
In-Reply-To: <CAC1phyYM0k8fvyczBgZqV1yHH-YFzpcS+Q-n4uHrZWUYUHU5bw@mail.gmail.com>
References: <5AC01C2B-2145-4958-9D51-3285ED1EBF4A@gmail.com>
 <CAC1phyYM0k8fvyczBgZqV1yHH-YFzpcS+Q-n4uHrZWUYUHU5bw@mail.gmail.com>
Message-ID: <CAEW6iOgdfMMdqn3e1gm8odRgqOZEUjRRC9dZYBg9Su2PizPJ-Q@mail.gmail.com>

On Sun, 13 Oct 2019 at 18:28, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
>
> Hi,
>
> you have to patch all macros where you need a colon with category 12,
> for instance:


I think it's better just to make the active : definition safe in
\label (by making it safe in a csname)

\let\zzz\active at prefix
\def\active at prefix{\ifincsname\expandafter\string\else\expandafter\zzz\fi}

should make all babel shorthand characters be protected by \string in
such constructs.

David


>
> \let\origlabel\label
> \def\label{\begingroup\catcode`\:12\inactivelabel}
> \def\inactivelabel#1{\endgroup\origlabel{#1}}
>
> This is a general problem with babel and nobody is able to fix all
> packages with all languages. If you are not forced to use babel,
> consider switching to XeLaTeX and polyglossia. You will not have so
> many problems.
>
> Zden?k Wagner
> http://ttsm.icpf.cas.cz/team/wagner.shtml
> http://icebearsoft.euweb.cz
>
> ne 13. 10. 2019 v 17:38 odes?latel Murray Eisenberg
> <murrayeisenberg at gmail.com> napsal:
> >
> > Because babel-french makes the colon (:) an active character, the functions in the crossreftools cause errors with \label when the argument of \label includes a colon. See:
> >
> > https://tex.stackexchange.com/questions/511030/another-babel-french-incompatibility-with-crossreftools
> >
> > https://tex.stackexchange.com/questions/510591/babel-and-crossreftools-incompatibility/510641#510641
> >
> > Who can fix this? (I am unqualified: the TeX in crossreftools is well beyond my very rudimentary knowledge of pure TeX.)
> >
> > The package maintainer is Christian Hupfer, but according to his tex.stackexchange.com profile, he has stopped reading tex.stackexchange and ?returned to the Black Forest."
> > ---
> > Murray Eisenberg murrayeisenberg at gmail.com
> > 503 King Farm Blvd #101 Home (240)-246-7240
> > Rockville, MD 20850-6667 Mobile (413)-427-5334
> >
> >
>


From murrayeisenberg at gmail.com  Sun Oct 13 21:24:42 2019
From: murrayeisenberg at gmail.com (Murray Eisenberg)
Date: Sun, 13 Oct 2019 15:24:42 -0400
Subject: who can fix babel-french incompatibility with crossreftools
In-Reply-To: <CAEW6iOgdfMMdqn3e1gm8odRgqOZEUjRRC9dZYBg9Su2PizPJ-Q@mail.gmail.com>
References: <5AC01C2B-2145-4958-9D51-3285ED1EBF4A@gmail.com>
 <CAC1phyYM0k8fvyczBgZqV1yHH-YFzpcS+Q-n4uHrZWUYUHU5bw@mail.gmail.com>
 <CAEW6iOgdfMMdqn3e1gm8odRgqOZEUjRRC9dZYBg9Su2PizPJ-Q@mail.gmail.com>
Message-ID: <F3424B58-5D0D-436C-8F1D-1D65FD57D992@gmail.com>

Is that a one-place code addition I need to make, or is it something I need to use to patch each and every command in crossreftools that uses the csname?endcsname construction?

[I _said_, in effect, that I?m nearly clueless so far as pure TeX is concerned(.I can get around OK with LaTeX constructs.)]

> On 13 Oct2019, at 1:38 PM, David Carlisle <d.p.carlisle at gmail.com> wrote:
> 
> On Sun, 13 Oct 2019 at 18:28, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
>> 
>> Hi,
>> 
>> you have to patch all macros where you need a colon with category 12,
>> for instance:
> 
> 
> I think it's better just to make the active : definition safe in
> \label (by making it safe in a csname)
> 
> \let\zzz\active at prefix
> \def\active at prefix{\ifincsname\expandafter\string\else\expandafter\zzz\fi}
> 
> should make all babel shorthand characters be protected by \string in
> such constructs.
> 
> David
> 
> 
>> 
>> \let\origlabel\label
>> \def\label{\begingroup\catcode`\:12\inactivelabel}
>> \def\inactivelabel#1{\endgroup\origlabel{#1}}
>> 
>> This is a general problem with babel and nobody is able to fix all
>> packages with all languages. If you are not forced to use babel,
>> consider switching to XeLaTeX and polyglossia. You will not have so
>> many problems.
>> 
>> Zden?k Wagner
>> http://ttsm.icpf.cas.cz/team/wagner.shtml
>> http://icebearsoft.euweb.cz
>> 
>> ne 13. 10. 2019 v 17:38 odes?latel Murray Eisenberg
>> <murrayeisenberg at gmail.com> napsal:
>>> 
>>> Because babel-french makes the colon (:) an active character, the functions in the crossreftools cause errors with \label when the argument of \label includes a colon. See:
>>> 
>>> https://tex.stackexchange.com/questions/511030/another-babel-french-incompatibility-with-crossreftools
>>> 
>>> https://tex.stackexchange.com/questions/510591/babel-and-crossreftools-incompatibility/510641#510641
>>> 
>>> Who can fix this? (I am unqualified: the TeX in crossreftools is well beyond my very rudimentary knowledge of pure TeX.)
>>> 
>>> The package maintainer is Christian Hupfer, but according to his tex.stackexchange.com profile, he has stopped reading tex.stackexchange and ?returned to the Black Forest."
>>> ---
>>> Murray Eisenberg murrayeisenberg at gmail.com
>>> 503 King Farm Blvd #101 Home (240)-246-7240
>>> Rockville, MD 20850-6667 Mobile (413)-427-5334
>>> 
>>> 
>> 

---
Murray Eisenberg			murrayeisenberg at gmail.com
503 King Farm Blvd #101	Home (240)-246-7240
Rockville, MD 20850-6667	Mobile (413)-427-5334




From murrayeisenberg at gmail.com  Sun Oct 13 21:30:42 2019
From: murrayeisenberg at gmail.com (Murray Eisenberg)
Date: Sun, 13 Oct 2019 15:30:42 -0400
Subject: who can fix babel-french incompatibility with crossreftools
In-Reply-To: <F3424B58-5D0D-436C-8F1D-1D65FD57D992@gmail.com>
References: <5AC01C2B-2145-4958-9D51-3285ED1EBF4A@gmail.com>
 <CAC1phyYM0k8fvyczBgZqV1yHH-YFzpcS+Q-n4uHrZWUYUHU5bw@mail.gmail.com>
 <CAEW6iOgdfMMdqn3e1gm8odRgqOZEUjRRC9dZYBg9Su2PizPJ-Q@mail.gmail.com>
 <F3424B58-5D0D-436C-8F1D-1D65FD57D992@gmail.com>
Message-ID: <D5B4976B-4168-4277-A803-10D5CB16F44E@gmail.com>

David,

Never mind: it seems that inserting that code once after I load crossreftools avoids the errors.

Thank you so much! I dreaded having to poke into crossreftools and patch command after command.

Would you mind posting this workaround as an answer to this?

	https://tex.stackexchange.com/questions/510591/babel-and-crossreftools-incompatibility/510641#510641



> On 13 Oct2019, at 3:24 PM, Murray Eisenberg <murrayeisenberg at gmail.com> wrote:
> 
> Is that a one-place code addition I need to make, or is it something I need to use to patch each and every command in crossreftools that uses the csname?endcsname construction?
> 
> [I _said_, in effect, that I?m nearly clueless so far as pure TeX is concerned(.I can get around OK with LaTeX constructs.)]
> 
>> On 13 Oct2019, at 1:38 PM, David Carlisle <d.p.carlisle at gmail.com> wrote:
>> 
>> On Sun, 13 Oct 2019 at 18:28, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
>>> 
>>> Hi,
>>> 
>>> you have to patch all macros where you need a colon with category 12,
>>> for instance:
>> 
>> 
>> I think it's better just to make the active : definition safe in
>> \label (by making it safe in a csname)
>> 
>> \let\zzz\active at prefix
>> \def\active at prefix{\ifincsname\expandafter\string\else\expandafter\zzz\fi}
>> 
>> should make all babel shorthand characters be protected by \string in
>> such constructs.
>> 
>> David
>> 
>> 
>>> 
>>> \let\origlabel\label
>>> \def\label{\begingroup\catcode`\:12\inactivelabel}
>>> \def\inactivelabel#1{\endgroup\origlabel{#1}}
>>> 
>>> This is a general problem with babel and nobody is able to fix all
>>> packages with all languages. If you are not forced to use babel,
>>> consider switching to XeLaTeX and polyglossia. You will not have so
>>> many problems.
>>> 
>>> Zden?k Wagner
>>> http://ttsm.icpf.cas.cz/team/wagner.shtml
>>> http://icebearsoft.euweb.cz
>>> 
>>> ne 13. 10. 2019 v 17:38 odes?latel Murray Eisenberg
>>> <murrayeisenberg at gmail.com> napsal:
>>>> 
>>>> Because babel-french makes the colon (:) an active character, the functions in the crossreftools cause errors with \label when the argument of \label includes a colon. See:
>>>> 
>>>> https://tex.stackexchange.com/questions/511030/another-babel-french-incompatibility-with-crossreftools
>>>> 
>>>> https://tex.stackexchange.com/questions/510591/babel-and-crossreftools-incompatibility/510641#510641
>>>> 
>>>> Who can fix this? (I am unqualified: the TeX in crossreftools is well beyond my very rudimentary knowledge of pure TeX.)
>>>> 
>>>> The package maintainer is Christian Hupfer, but according to his tex.stackexchange.com profile, he has stopped reading tex.stackexchange and ?returned to the Black Forest."
>>>> ---
>>>> Murray Eisenberg murrayeisenberg at gmail.com
>>>> 503 King Farm Blvd #101 Home (240)-246-7240
>>>> Rockville, MD 20850-6667 Mobile (413)-427-5334
>>>> 
>>>> 
>>> 
> 
> ---
> Murray Eisenberg			murrayeisenberg at gmail.com
> 503 King Farm Blvd #101	Home (240)-246-7240
> Rockville, MD 20850-6667	Mobile (413)-427-5334
> 
> 

---
Murray Eisenberg			murrayeisenberg at gmail.com
503 King Farm Blvd #101	Home (240)-246-7240
Rockville, MD 20850-6667	Mobile (413)-427-5334




From karl at freefriends.org  Sun Oct 13 23:32:22 2019
From: karl at freefriends.org (Karl Berry)
Date: Sun, 13 Oct 2019 15:32:22 -0600
Subject: who can fix babel-french incompatibility with crossreftools
In-Reply-To: <F3424B58-5D0D-436C-8F1D-1D65FD57D992@gmail.com>
Message-ID: <201910132132.x9DLWM3d011295@freefriends.org>

    > \let\zzz\active at prefix
    > \def\active at prefix{\ifincsname\expandafter\string\else\expandafter\zzz\fi}
    > 
    > should make all babel shorthand characters be protected by \string in
    > such constructs.

David - seems like crossreftools (and presumably many other packages)
should make this change. Or can it be done in babel so the rest of the
world doesn't have to deal with it? -k


From zdenek.wagner at gmail.com  Sun Oct 13 23:37:43 2019
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sun, 13 Oct 2019 23:37:43 +0200
Subject: who can fix babel-french incompatibility with crossreftools
In-Reply-To: <201910132132.x9DLWM3d011295@freefriends.org>
References: <F3424B58-5D0D-436C-8F1D-1D65FD57D992@gmail.com>
 <201910132132.x9DLWM3d011295@freefriends.org>
Message-ID: <CAC1phyZy7StRa48cZbhJzn_HcWY=0FX=65w9HVg3ptWPxm7ouQ@mail.gmail.com>

Hi all,

this is not just a problem of French, Czech and Slovak activates a
hyphen, Latin has active characters, Slovak even activates ^ which
makes sequences like ^^A and ^^cd unavailable (and it cannot be solved
by \string). I am afraid that many other clashes can occur.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

ne 13. 10. 2019 v 23:32 odes?latel Karl Berry <karl at freefriends.org> napsal:
>
>     > \let\zzz\active at prefix
>     > \def\active at prefix{\ifincsname\expandafter\string\else\expandafter\zzz\fi}
>     >
>     > should make all babel shorthand characters be protected by \string in
>     > such constructs.
>
> David - seems like crossreftools (and presumably many other packages)
> should make this change. Or can it be done in babel so the rest of the
> world doesn't have to deal with it? -k
>


From d.p.carlisle at gmail.com  Sun Oct 13 23:56:59 2019
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Sun, 13 Oct 2019 22:56:59 +0100
Subject: who can fix babel-french incompatibility with crossreftools
In-Reply-To: <201910132132.x9DLWM3d011295@freefriends.org>
References: <F3424B58-5D0D-436C-8F1D-1D65FD57D992@gmail.com>
 <201910132132.x9DLWM3d011295@freefriends.org>
Message-ID: <CAEW6iOgtWkW=qdBZTouqtwi=S4O1B9GWWJPmemVCRYsTTgbQVQ@mail.gmail.com>

in Babel (I was planning to ping Javier:-)

On Sun, 13 Oct 2019 at 22:33, Karl Berry <karl at freefriends.org> wrote:
>
>     > \let\zzz\active at prefix
>     > \def\active at prefix{\ifincsname\expandafter\string\else\expandafter\zzz\fi}
>     >
>     > should make all babel shorthand characters be protected by \string in
>     > such constructs.
>
> David - seems like crossreftools (and presumably many other packages)
> should make this change. Or can it be done in babel so the rest of the
> world doesn't have to deal with it? -k
>

From d.p.carlisle at gmail.com  Mon Oct 14 00:00:53 2019
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Sun, 13 Oct 2019 23:00:53 +0100
Subject: who can fix babel-french incompatibility with crossreftools
In-Reply-To: <CAC1phyZy7StRa48cZbhJzn_HcWY=0FX=65w9HVg3ptWPxm7ouQ@mail.gmail.com>
References: <F3424B58-5D0D-436C-8F1D-1D65FD57D992@gmail.com>
 <201910132132.x9DLWM3d011295@freefriends.org>
 <CAC1phyZy7StRa48cZbhJzn_HcWY=0FX=65w9HVg3ptWPxm7ouQ@mail.gmail.com>
Message-ID: <CAEW6iOjBWrUs7cHwpJpA1b+aT462YOSPYKzvPCxSDBn81-5D-Q@mail.gmail.com>

On Sun, 13 Oct 2019 at 22:39, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
>
> Hi all,
>
> this is not just a problem of French, Czech and Slovak activates a
> hyphen, Latin has active characters, Slovak even activates ^ which
> makes sequences like ^^A and ^^cd unavailable (and it cannot be solved
> by \string). I am afraid that many other clashes can occur.
>
>
If they are babel shorthands defined by the babel declarations so
their active definition starts with \active at prefix
I do not see why the code that I suggested should not work. As you see
there is nothing specific to : or French in the suggested addition.
If you have an example where it does fail I'd be happy to have a look

David

From d.p.carlisle at gmail.com  Mon Oct 14 00:08:11 2019
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Sun, 13 Oct 2019 23:08:11 +0100
Subject: who can fix babel-french incompatibility with crossreftools
In-Reply-To: <CAEW6iOgtWkW=qdBZTouqtwi=S4O1B9GWWJPmemVCRYsTTgbQVQ@mail.gmail.com>
References: <F3424B58-5D0D-436C-8F1D-1D65FD57D992@gmail.com>
 <201910132132.x9DLWM3d011295@freefriends.org>
 <CAEW6iOgtWkW=qdBZTouqtwi=S4O1B9GWWJPmemVCRYsTTgbQVQ@mail.gmail.com>
Message-ID: <CAEW6iOjLmiXeepFyHpbeV-C3Z48WywHA5SBsYFyYcPf9Y8djUQ@mail.gmail.com>

On Sun, 13 Oct 2019 at 22:56, David Carlisle <d.p.carlisle at gmail.com> wrote:
>
> in Babel (I was planning to ping Javier:-)

https://github.com/latex3/babel/issues/32

>
> On Sun, 13 Oct 2019 at 22:33, Karl Berry <karl at freefriends.org> wrote:
> >
> >     > \let\zzz\active at prefix
> >     > \def\active at prefix{\ifincsname\expandafter\string\else\expandafter\zzz\fi}
> >     >
> >     > should make all babel shorthand characters be protected by \string in
> >     > such constructs.
> >
> > David - seems like crossreftools (and presumably many other packages)
> > should make this change. Or can it be done in babel so the rest of the
> > world doesn't have to deal with it? -k
> >

From zdenek.wagner at gmail.com  Mon Oct 14 00:08:36 2019
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 14 Oct 2019 00:08:36 +0200
Subject: who can fix babel-french incompatibility with crossreftools
In-Reply-To: <CAEW6iOjBWrUs7cHwpJpA1b+aT462YOSPYKzvPCxSDBn81-5D-Q@mail.gmail.com>
References: <F3424B58-5D0D-436C-8F1D-1D65FD57D992@gmail.com>
 <201910132132.x9DLWM3d011295@freefriends.org>
 <CAC1phyZy7StRa48cZbhJzn_HcWY=0FX=65w9HVg3ptWPxm7ouQ@mail.gmail.com>
 <CAEW6iOjBWrUs7cHwpJpA1b+aT462YOSPYKzvPCxSDBn81-5D-Q@mail.gmail.com>
Message-ID: <CAC1phyZxbStPYANDnJ0rAQHV+R=rWhcXk+hVe5GjoV=28sSNsg@mail.gmail.com>

po 14. 10. 2019 v 0:01 odes?latel David Carlisle
<d.p.carlisle at gmail.com> napsal:
>
> On Sun, 13 Oct 2019 at 22:39, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
> >
> > Hi all,
> >
> > this is not just a problem of French, Czech and Slovak activates a
> > hyphen, Latin has active characters, Slovak even activates ^ which
> > makes sequences like ^^A and ^^cd unavailable (and it cannot be solved
> > by \string). I am afraid that many other clashes can occur.
> >
> >
> If they are babel shorthands defined by the babel declarations so
> their active definition starts with \active at prefix
> I do not see why the code that I suggested should not work. As you see
> there is nothing specific to : or French in the suggested addition.
> If you have an example where it does fail I'd be happy to have a look
>
It is only a problem with ^^ notation. Your solution works "in  TeX's
stomach" but in order to make ^^ work properly, two adjacent
characters with category 7 must be seen "in TeX's mouth". I am afraid
that ^ is activated in several languages. If such a language package
is loaded and the language is not currently active, then ^ expands to
^ with character 7 so that it works properly in math but it is to late
for ^^. Other puctuation characters can be used in \label, \ref,
\cline, \hline, \hhline and here your solution will work (I hope).

> David


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz


From d.p.carlisle at gmail.com  Mon Oct 14 00:15:00 2019
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Sun, 13 Oct 2019 23:15:00 +0100
Subject: who can fix babel-french incompatibility with crossreftools
In-Reply-To: <CAC1phyZxbStPYANDnJ0rAQHV+R=rWhcXk+hVe5GjoV=28sSNsg@mail.gmail.com>
References: <F3424B58-5D0D-436C-8F1D-1D65FD57D992@gmail.com>
 <201910132132.x9DLWM3d011295@freefriends.org>
 <CAC1phyZy7StRa48cZbhJzn_HcWY=0FX=65w9HVg3ptWPxm7ouQ@mail.gmail.com>
 <CAEW6iOjBWrUs7cHwpJpA1b+aT462YOSPYKzvPCxSDBn81-5D-Q@mail.gmail.com>
 <CAC1phyZxbStPYANDnJ0rAQHV+R=rWhcXk+hVe5GjoV=28sSNsg@mail.gmail.com>
Message-ID: <CAEW6iOhnOFns1y8PcQrRZPfGcV=PyCL--_G5ENcKfw90TngKeA@mail.gmail.com>

oh ^^ yes of course that isn't available if you change the catcode of
^ (but ^^ shouldn't be appearing in \label anyway)
I was referring to your comment about active hyphen and active
characters for utf 8 accented latin etc.

David

On Sun, 13 Oct 2019 at 23:09, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
>
> po 14. 10. 2019 v 0:01 odes?latel David Carlisle
> <d.p.carlisle at gmail.com> napsal:
> >
> > On Sun, 13 Oct 2019 at 22:39, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
> > >
> > > Hi all,
> > >
> > > this is not just a problem of French, Czech and Slovak activates a
> > > hyphen, Latin has active characters, Slovak even activates ^ which
> > > makes sequences like ^^A and ^^cd unavailable (and it cannot be solved
> > > by \string). I am afraid that many other clashes can occur.
> > >
> > >
> > If they are babel shorthands defined by the babel declarations so
> > their active definition starts with \active at prefix
> > I do not see why the code that I suggested should not work. As you see
> > there is nothing specific to : or French in the suggested addition.
> > If you have an example where it does fail I'd be happy to have a look
> >
> It is only a problem with ^^ notation. Your solution works "in  TeX's
> stomach" but in order to make ^^ work properly, two adjacent
> characters with category 7 must be seen "in TeX's mouth". I am afraid
> that ^ is activated in several languages. If such a language package
> is loaded and the language is not currently active, then ^ expands to
> ^ with character 7 so that it works properly in math but it is to late
> for ^^. Other puctuation characters can be used in \label, \ref,
> \cline, \hline, \hhline and here your solution will work (I hope).
>
> > David
>
>
> Zden?k Wagner
> http://ttsm.icpf.cas.cz/team/wagner.shtml
> http://icebearsoft.euweb.cz


From joseph.wright at morningstar2.co.uk  Mon Oct 14 18:45:33 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Mon, 14 Oct 2019 17:45:33 +0100
Subject: Aleph
Message-ID: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>

Hello all,

I notice that TL continues to build the Aleph format: does anyone know 
if this is useful today?

Joseph


From herries.press at earthlink.net  Mon Oct 14 20:15:06 2019
From: herries.press at earthlink.net (Peter Wilson)
Date: Mon, 14 Oct 2019 19:15:06 +0100
Subject: Aleph
In-Reply-To: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
Message-ID: <2c136854-e04a-e45d-2841-7beeb37e98c3@earthlink.net>

What is the Aleph format?

Peter W.

PS. I actually know what it is but I expect the general response to be 
as above.


On 14/10/19 17:45, Joseph Wright wrote:
> Hello all,
>
> I notice that TL continues to build the Aleph format: does anyone know 
> if this is useful today?
>
> Joseph
>


From karl at freefriends.org  Mon Oct 14 23:00:51 2019
From: karl at freefriends.org (Karl Berry)
Date: Mon, 14 Oct 2019 15:00:51 -0600
Subject: Aleph
In-Reply-To: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
Message-ID: <201910142100.x9EL0pxf004792@freefriends.org>

Hi Joseph,

    I notice that TL continues to build the Aleph format: does anyone know 
    if this is useful today?

I wouldn't expect (m)any new documents to be written for Aleph, but it
is necessary any existing Omega and Aleph documents. There are certainly
some of those, e.g., I know Yannis himself has quite a few :). So I
would not want to gratuitiously drop it. As far as I know it's not
hurting anything ...

If anyone is curious as to what it is -- Omega was the first engine with
native Unicode support. Aleph primarily added the e-tex extensions to
Omega. Aleph is compatible with Omega, so many years ago, Peter
Breitenlohner and I proposed to Yannis to only maintain Aleph (for
critical bug fixes / system changes / etc.) going forward, and drop the
"omega" binary, to reduce the maintenance burden a little. Yannis was ok
with that.
https://ctan.org/pkg/aleph
https://ctan.org/pkg/omega

Best,
Karl

From kakuto at w32tex.org  Mon Oct 14 23:12:27 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Tue, 15 Oct 2019 06:12:27 +0900
Subject: Aleph
In-Reply-To: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
Message-ID: <34C4FBC918524F32A273BF8ABC4CEF97@CJ3001517A>

Dear Joseph,

> I notice that TL continues to build the Aleph format: does anyone know 
> if this is useful today?

One of the original authours of Omega, Yannis, wanted
to continue to build Aleph.

Thanks,
Akira


From preining at logic.at  Tue Oct 15 00:18:08 2019
From: preining at logic.at (Norbert Preining)
Date: Tue, 15 Oct 2019 07:18:08 +0900
Subject: Aleph
In-Reply-To: <201910142100.x9EL0pxf004792@freefriends.org>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
Message-ID: <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>

Just to add what Karl said,

On Mon, 14 Oct 2019, Karl Berry wrote:
> Hi Joseph,
> 
>     I notice that TL continues to build the Aleph format: does anyone know 
>     if this is useful today?
> 
> I wouldn't expect (m)any new documents to be written for Aleph, but it

I do expect a considerable amount of documents. I at least have quite
some of them, and my guess is there are many more.

> If anyone is curious as to what it is -- Omega was the first engine with
> native Unicode support. Aleph primarily added the e-tex extensions to

And, it provided a programmable finite state automaton at the input side
of TeX (the OTP - Omega Translation Process), which allows to treat
complicated scripts like Tibetan or Devanagari without a preprocessor.

I still consider it the superior solution, at least concerning Tibetan:
Both luatex and xetex fail badly with Tibetan scripts and are
practically unusable for real typesetting.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From news3 at nililand.de  Tue Oct 15 09:43:51 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Tue, 15 Oct 2019 09:43:51 +0200
Subject: Aleph
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
Message-ID: <k725kjv9l17n.dlg@nililand.de>

Am Tue, 15 Oct 2019 07:18:08 +0900 schrieb Norbert Preining:

> Both luatex and xetex fail badly with Tibetan scripts and are
> practically unusable for real typesetting.

Could you show a small example of such failure for someone who has
absolutly no knowledge of these scripts?

I run a short test with xelatex and luahblatex and it looked ok (in
the sense that it looked like the output in the browser):

\documentclass{report}
\usepackage{fontspec}
\setmainfont{Noto Sans Tibetan}%[RawFeature={mode=harf}] %luahblatex
\begin{document}
??????????????????????????????
?????????????????????????????
\end{document}


-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From P.Taylor at rhul.ac.uk  Tue Oct 15 10:16:16 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Tue, 15 Oct 2019 08:16:16 +0000
Subject: Aleph
In-Reply-To: <k725kjv9l17n.dlg@nililand.de>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
Message-ID: <b5e85ddb-9d3a-23b1-a656-2712045dc575@Rhul.Ac.Uk>

Ulrike Fischer wrote:


Am Tue, 15 Oct 2019 07:18:08 +0900 schrieb Norbert Preining:



Both luatex and xetex fail badly with Tibetan scripts and are
practically unusable for real typesetting.


Tibetan is just one of over 130 languages that feature on the Westberry Welcome involute (typeset using XeTeX), and I had no problems getting it to set correctly as I recall.  If Norbert could point out where it deviates from what was intended, I will investigate.

  *   https://www.dropbox.com/s/bqemjgh9jy9lo9y/Involute-003%20%28optimised%29.pdf?dl=0

** Phil.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191015/91b585c3/attachment.html>

From norbert at preining.info  Tue Oct 15 10:32:49 2019
From: norbert at preining.info (Norbert Preining)
Date: Tue, 15 Oct 2019 17:32:49 +0900
Subject: Aleph
In-Reply-To: <k725kjv9l17n.dlg@nililand.de>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
Message-ID: <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>

Hi Ulrike,

thanks for your email, it would be great if we could work that out, I am
helping a friend settting Tibetan/Sanskrit texts and this is a real
pain.

I attach four files
	tibetan-test.ENGINE.pdf
for ENGINE in luatex, xetex, luahbtex, harftex

* First of all, the text you send does not show up correctly with
  luatex, only with xetex, there is considerable overlap in glyphs
  and the wrong compound is selected in the luatex and luahbtex case.

* Then look at the first row of big characters
  - xetex got it correct with all fonts
  - lua(hb)tex use a strange glyph with a dotted circle set below, 
    in the Noto case

* The last line shows the biggest problem: In Tibetan there are
  "standard" combinations of characters, that are used in normal
  Tibetan, and then there are non-standard ones, that are often
  used to transcribe religious text, Devenagari etc etc. If the font
  does not provide a proper pre-composed glyph, the font/layout
  engine needs to do this manually.
  Back in Omega times I wrote code for this in OTPs (analyzing
  the stacks, and emitting TeX code creating the proper stacks),
  but with xetex and luatex the layout is completely broken.
  In the xetex case we even get the dotted circle variants set
  aside ..

  I included a graphics of the correct output.

(sorry for the dirty tex code, not much time here at my company ;-)

I also attach the fonts Jomolhari and DDC-Uchen.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
-------------- next part --------------
A non-text attachment was scrubbed...
Name: DDC-Uchen.ttf
Type: application/font-sfnt
Size: 861904 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191015/ffc92523/attachment-0002.ttf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Jomolhari.ttf
Type: application/font-sfnt
Size: 2269108 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191015/ffc92523/attachment-0003.ttf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tibetan-test.harftex.pdf
Type: application/pdf
Size: 61928 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191015/ffc92523/attachment-0004.pdf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tibetan-test.luahbtex.pdf
Type: application/pdf
Size: 61899 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191015/ffc92523/attachment-0005.pdf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tibetan-test.luatex.pdf
Type: application/pdf
Size: 61886 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191015/ffc92523/attachment-0006.pdf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tibetan-test.tex
Type: text/x-tex
Size: 1393 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191015/ffc92523/attachment-0001.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tibetan-test.xetex.pdf
Type: application/pdf
Size: 45001 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191015/ffc92523/attachment-0007.pdf>

From preining at logic.at  Tue Oct 15 10:35:37 2019
From: preining at logic.at (Norbert Preining)
Date: Tue, 15 Oct 2019 17:35:37 +0900
Subject: Aleph
In-Reply-To: <b5e85ddb-9d3a-23b1-a656-2712045dc575@Rhul.Ac.Uk>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <b5e85ddb-9d3a-23b1-a656-2712045dc575@Rhul.Ac.Uk>
Message-ID: <20191015083537.gfqvs2ks2gelaaa5@burischnitzel.preining.info>

Hi Phil,

On Tue, 15 Oct 2019, Taylor, P wrote:
>   *   https://www.dropbox.com/s/bqemjgh9jy9lo9y/Involute-003%20%28optimised%29.pdf?dl=0

That contains only trivial Tibetan ligatures, and even the last glyph
has the vowel set to close below. So far from working nicely.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From P.Taylor at rhul.ac.uk  Tue Oct 15 11:21:44 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Tue, 15 Oct 2019 09:21:44 +0000
Subject: Aleph
In-Reply-To: <20191015083537.gfqvs2ks2gelaaa5@burischnitzel.preining.info>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <b5e85ddb-9d3a-23b1-a656-2712045dc575@Rhul.Ac.Uk>
 <20191015083537.gfqvs2ks2gelaaa5@burischnitzel.preining.info>
Message-ID: <cf6b914b-f431-ca29-5141-5134eb5106b8@Rhul.Ac.Uk>

Norbert Preining wrote:


On Tue, 15 Oct 2019, Taylor, P wrote:


  *   https://www.dropbox.com/s/bqemjgh9jy9lo9y/Involute-003%20%28optimised%29.pdf?dl=0



That contains only trivial Tibetan ligatures, and even the last glyph
has the vowel set to[o] close below.


I would concur with both of those observations.  I may investigate the positioning of the elements of ?? when I have more time.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191015/c40f8283/attachment-0001.html>

From P.Taylor at rhul.ac.uk  Tue Oct 15 11:38:13 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Tue, 15 Oct 2019 09:38:13 +0000
Subject: Aleph
In-Reply-To: <cf6b914b-f431-ca29-5141-5134eb5106b8@Rhul.Ac.Uk>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <b5e85ddb-9d3a-23b1-a656-2712045dc575@Rhul.Ac.Uk>
 <20191015083537.gfqvs2ks2gelaaa5@burischnitzel.preining.info>
 <cf6b914b-f431-ca29-5141-5134eb5106b8@Rhul.Ac.Uk>
Message-ID: <c106b9b6-4e6b-6ed7-8911-b8ab5c1fb6d2@Rhul.Ac.Uk>

Philip Taylor wrote:
I would concur with both of those observations.  I may investigate the positioning of the elements of ?? when I have more time.

I note that the same occurs if I replace the Noto font by Microsoft Himalaya, so there may indeed be a bug in the font-shaping.
** P.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191015/03e3eb2e/attachment.html>

From zdenek.wagner at gmail.com  Tue Oct 15 11:40:24 2019
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Tue, 15 Oct 2019 11:40:24 +0200
Subject: Aleph
In-Reply-To: <cf6b914b-f431-ca29-5141-5134eb5106b8@Rhul.Ac.Uk>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <b5e85ddb-9d3a-23b1-a656-2712045dc575@Rhul.Ac.Uk>
 <20191015083537.gfqvs2ks2gelaaa5@burischnitzel.preining.info>
 <cf6b914b-f431-ca29-5141-5134eb5106b8@Rhul.Ac.Uk>
Message-ID: <CAC1phyZXqe8pe+U0KL=zGeOKu5uqcxGnKqMoRsV1DhMm2u+wCw@mail.gmail.com>

Hi,

I do not know much about OTP, I read an article about it many years
ago but never tried. I know the difference between XeTeX and luatex.
XeTeX first used ICU, now it makes use of harfbuzz, hence generally
all scripts are supported and should work. It is still a chance that
an error will be spotted by maintainers of these libraries even
outside TeX so we can benefit from users of other systems. In luatex
the glyph rendering must be programmed in lua. It can be done but
somebody has to do it. However, these rendering algorithms are used in
luatex only. Moreover, Devanagari is in luatex broken again and I am
not able to find a version which worked. And I do ot have time to
prepare a bug report. It can also be a font specific problem, because
the same feature can be encoded by several ways. I found that some
Devanageri fonts work fine in XeTeX, LibreOffice, Kate, <oXygen/>
(commercial XML editor), but not in MS Office.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

?t 15. 10. 2019 v 11:21 odes?latel Taylor, P <P.Taylor at rhul.ac.uk> napsal:
>
> Norbert Preining wrote:
>
> On Tue, 15 Oct 2019, Taylor, P wrote:
>
>   *   https://www.dropbox.com/s/bqemjgh9jy9lo9y/Involute-003%20%28optimised%29.pdf?dl=0
>
> That contains only trivial Tibetan ligatures, and even the last glyph
> has the vowel set to[o] close below.
>
> I would concur with both of those observations.  I may investigate the positioning of the elements of ?? when I have more time.


From d.p.carlisle at gmail.com  Tue Oct 15 12:06:43 2019
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Tue, 15 Oct 2019 11:06:43 +0100
Subject: Aleph
In-Reply-To: <CAC1phyZXqe8pe+U0KL=zGeOKu5uqcxGnKqMoRsV1DhMm2u+wCw@mail.gmail.com>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <b5e85ddb-9d3a-23b1-a656-2712045dc575@Rhul.Ac.Uk>
 <20191015083537.gfqvs2ks2gelaaa5@burischnitzel.preining.info>
 <cf6b914b-f431-ca29-5141-5134eb5106b8@Rhul.Ac.Uk>
 <CAC1phyZXqe8pe+U0KL=zGeOKu5uqcxGnKqMoRsV1DhMm2u+wCw@mail.gmail.com>
Message-ID: <CAEW6iOiUTO2VuopWcGKUOv5qnrnoG=2_jGOVwE34GSdkGc8pqw@mail.gmail.com>

On Tue, 15 Oct 2019 at 10:41, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
>
> Hi,
>
> I do not know much about OTP, I read an article about it many years
> ago but never tried. I know the difference between XeTeX and luatex.
> XeTeX first used ICU, now it makes use of harfbuzz, hence generally
> all scripts are supported and should work. It is still a chance that
> an error will be spotted by maintainers of these libraries even
> outside TeX so we can benefit from users of other systems. In luatex
> the glyph rendering must be programmed in lua.

No, Ulrike's example was with luahbtex which is luatex+harfbuzz (and
likely to be the engine used for lualatex going forward)


> It can be done but
> somebody has to do it. However, these rendering algorithms are used in
> luatex only. Moreover, Devanagari is in luatex broken again and I am
> not able to find a version which worked. And I do ot have time to
> prepare a bug report. It can also be a font specific problem, because
> the same feature can be encoded by several ways. I found that some
> Devanageri fonts work fine in XeTeX, LibreOffice, Kate, <oXygen/>
> (commercial XML editor), but not in MS Office.
>
> Zden?k Wagner
> http://ttsm.icpf.cas.cz/team/wagner.shtml
> http://icebearsoft.euweb.cz

David]


From zdenek.wagner at gmail.com  Tue Oct 15 12:12:22 2019
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Tue, 15 Oct 2019 12:12:22 +0200
Subject: Aleph
In-Reply-To: <CAEW6iOiUTO2VuopWcGKUOv5qnrnoG=2_jGOVwE34GSdkGc8pqw@mail.gmail.com>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <b5e85ddb-9d3a-23b1-a656-2712045dc575@Rhul.Ac.Uk>
 <20191015083537.gfqvs2ks2gelaaa5@burischnitzel.preining.info>
 <cf6b914b-f431-ca29-5141-5134eb5106b8@Rhul.Ac.Uk>
 <CAC1phyZXqe8pe+U0KL=zGeOKu5uqcxGnKqMoRsV1DhMm2u+wCw@mail.gmail.com>
 <CAEW6iOiUTO2VuopWcGKUOv5qnrnoG=2_jGOVwE34GSdkGc8pqw@mail.gmail.com>
Message-ID: <CAC1phyayAQSgKOa5i9CvXtg+AyZSNoA6z5WUhD7GHKpiaGW0ug@mail.gmail.com>

?t 15. 10. 2019 v 12:06 odes?latel David Carlisle
<d.p.carlisle at gmail.com> napsal:
>
> On Tue, 15 Oct 2019 at 10:41, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
> >
> > Hi,
> >
> > I do not know much about OTP, I read an article about it many years
> > ago but never tried. I know the difference between XeTeX and luatex.
> > XeTeX first used ICU, now it makes use of harfbuzz, hence generally
> > all scripts are supported and should work. It is still a chance that
> > an error will be spotted by maintainers of these libraries even
> > outside TeX so we can benefit from users of other systems. In luatex
> > the glyph rendering must be programmed in lua.
>
> No, Ulrike's example was with luahbtex which is luatex+harfbuzz (and
> likely to be the engine used for lualatex going forward)
>
Thank you for explanation.
>
> > It can be done but
> > somebody has to do it. However, these rendering algorithms are used in
> > luatex only. Moreover, Devanagari is in luatex broken again and I am
> > not able to find a version which worked. And I do ot have time to
> > prepare a bug report. It can also be a font specific problem, because
> > the same feature can be encoded by several ways. I found that some
> > Devanageri fonts work fine in XeTeX, LibreOffice, Kate, <oXygen/>
> > (commercial XML editor), but not in MS Office.
> >

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz


From tex at 2krueger.de  Tue Oct 15 14:15:19 2019
From: tex at 2krueger.de (Marcel Fabian =?utf-8?Q?Kr=C3=BCger?=)
Date: Tue, 15 Oct 2019 14:15:19 +0200
Subject: Aleph
In-Reply-To: <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
Message-ID: <20191015121518.ffln7dizr6nkule5@yoga>

Hi Norbert,

On Tue, Oct 15, 2019 at 05:32:49PM +0900, Norbert Preining wrote:
> Hi Ulrike,
> 
> thanks for your email, it would be great if we could work that out, I am
> helping a friend settting Tibetan/Sanskrit texts and this is a real
> pain.
> 
> I attach four files
> 	tibetan-test.ENGINE.pdf
> for ENGINE in luatex, xetex, luahbtex, harftex
> 
> * First of all, the text you send does not show up correctly with
>   luatex, only with xetex, there is considerable overlap in glyphs
>   and the wrong compound is selected in the luatex and luahbtex case.
> 
> * Then look at the first row of big characters
>   - xetex got it correct with all fonts
>   - lua(hb)tex use a strange glyph with a dotted circle set below, 
>     in the Noto case

I tried this with the current development branch for the HarfBuzz
support in luaotfload and got the same output as with XeTeX, so
luahbtex will be able to solve this issue.

> 
> * The last line shows the biggest problem: In Tibetan there are
>   "standard" combinations of characters, that are used in normal
>   Tibetan, and then there are non-standard ones, that are often
>   used to transcribe religious text, Devenagari etc etc. If the font
>   does not provide a proper pre-composed glyph, the font/layout
>   engine needs to do this manually.
>   Back in Omega times I wrote code for this in OTPs (analyzing
>   the stacks, and emitting TeX code creating the proper stacks),
>   but with xetex and luatex the layout is completely broken.
>   In the xetex case we even get the dotted circle variants set
>   aside ..

These look like problems with the fonts, do they work better in other
programs? Especially the dotted circles in Noto Tibetan was a known bug
which is fixed in current versions. Related to this: The font
"Noto Sans Tibetan" has been renamed to "Noto Serif Tibetan" so the
"Sans" file hasn't been updated in recent years.
If I try your example with "Serif", I get a glyph which looks quite
similiar to your picture. (I attached the PDF file)


Best regards,
Marcel

From P.Taylor at rhul.ac.uk  Tue Oct 15 14:20:51 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Tue, 15 Oct 2019 12:20:51 +0000
Subject: Aleph
In-Reply-To: <20191015121518.ffln7dizr6nkule5@yoga>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
Message-ID: <8deba746-7c95-9320-206a-825beae0023a@Rhul.Ac.Uk>

Marcel Fabian Kr?ger wrote:

> Related to this: The font
> "Noto Sans Tibetan" has been renamed to "Noto Serif Tibetan" so the
> "Sans" file hasn't been updated in recent years.
> If I try your example with "Serif", I get a glyph which looks quite
> similiar to your picture. (I attached the PDF file)

I cannot find "Noto Serif Tibetan" at https://www.google.com/get/noto/; 
where may it be found, please ?
** Phil.


From zdenek.wagner at gmail.com  Tue Oct 15 14:27:30 2019
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Tue, 15 Oct 2019 14:27:30 +0200
Subject: Aleph
In-Reply-To: <8deba746-7c95-9320-206a-825beae0023a@Rhul.Ac.Uk>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <8deba746-7c95-9320-206a-825beae0023a@Rhul.Ac.Uk>
Message-ID: <CAC1phybz1evmnLP-GaPY5DV7mZmJioXi4Dcz+obPXgwibxL0Cg@mail.gmail.com>

?t 15. 10. 2019 v 14:20 odes?latel Taylor, P <P.Taylor at rhul.ac.uk> napsal:
>
> Marcel Fabian Kr?ger wrote:
>
> > Related to this: The font
> > "Noto Sans Tibetan" has been renamed to "Noto Serif Tibetan" so the
> > "Sans" file hasn't been updated in recent years.
> > If I try your example with "Serif", I get a glyph which looks quite
> > similiar to your picture. (I attached the PDF file)
>
> I cannot find "Noto Serif Tibetan" at https://www.google.com/get/noto/;
> where may it be found, please ?
> ** Phil.
>
I have just tried my Linux distro and it finds only
google-noto-sans-tibetan-fonts.noarch : Sans Tibetan font
So the same here...

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz


From komascript at gmx.info  Tue Oct 15 14:41:31 2019
From: komascript at gmx.info (Markus Kohm)
Date: Tue, 15 Oct 2019 14:41:31 +0200
Subject: Aleph
In-Reply-To: <8deba746-7c95-9320-206a-825beae0023a@Rhul.Ac.Uk>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <8deba746-7c95-9320-206a-825beae0023a@Rhul.Ac.Uk>
Message-ID: <4181975.zFYmrkhx5g@komascript.de>

Am Dienstag, 15. Oktober 2019, 14:20:51 CEST schrieb Taylor, P:
> I cannot find "Noto Serif Tibetan" at https://www.google.com/get/noto/;
> where may it be found, please ?

I found https://www.tibetitw.com/news/1891.html or in Debian sid: https://
packages.debian.org/sid/fonts-noto-core
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part.
URL: <https://tug.org/pipermail/tex-live/attachments/20191015/d9759715/attachment-0001.sig>

From cpsychal at LIVE.COM  Tue Oct 15 05:57:54 2019
From: cpsychal at LIVE.COM (Costas Psychalinos)
Date: Tue, 15 Oct 2019 03:57:54 +0000
Subject: Changing the paper size through the Tex Live shell (GUI)
Message-ID: <AM6PR07MB51258F2D5C57CFCDF2BFC94EBC930@AM6PR07MB5125.eurprd07.prod.outlook.com>


Trying to change the paper size through the tab Options of the GUI of the Tex Live shell, the following message appears: ?tlmgr.pl: expected `a4' or `letter' after paper, not A4?.
This is originated from the available choices ?A4 and letter? which must be corrected into ?a4 and letter?.

Best regards
Costas

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191015/e21fac3d/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: screen.png
Type: image/png
Size: 41844 bytes
Desc: screen.png
URL: <https://tug.org/pipermail/tex-live/attachments/20191015/e21fac3d/attachment-0001.png>

From tex at 2krueger.de  Tue Oct 15 14:48:44 2019
From: tex at 2krueger.de (Marcel Fabian =?utf-8?Q?Kr=C3=BCger?=)
Date: Tue, 15 Oct 2019 14:48:44 +0200
Subject: Aleph
In-Reply-To: <8deba746-7c95-9320-206a-825beae0023a@Rhul.Ac.Uk>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <8deba746-7c95-9320-206a-825beae0023a@Rhul.Ac.Uk>
Message-ID: <20191015124844.op2gsemxseg7r7kp@yoga>

On Tue, Oct 15, 2019 at 12:20:51PM +0000, Taylor, P wrote:
> Marcel Fabian Kr?ger wrote:
> 
> > Related to this: The font
> > "Noto Sans Tibetan" has been renamed to "Noto Serif Tibetan" so the
> > "Sans" file hasn't been updated in recent years.
> > If I try your example with "Serif", I get a glyph which looks quite
> > similiar to your picture. (I attached the PDF file)
> 
> I cannot find "Noto Serif Tibetan" at https://www.google.com/get/noto/; 
> where may it be found, please ?
> ** Phil.

Oh, I didn't realize that they aren't in the last release. Anyway you
can find them on GitHub:

https://github.com/googlefonts/noto-fonts/tree/master/hinted/NotoSerifTibetan

Marcel

From P.Taylor at rhul.ac.uk  Tue Oct 15 16:11:55 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Tue, 15 Oct 2019 14:11:55 +0000
Subject: Aleph
In-Reply-To: <20191015124844.op2gsemxseg7r7kp@yoga>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <8deba746-7c95-9320-206a-825beae0023a@Rhul.Ac.Uk>
 <20191015124844.op2gsemxseg7r7kp@yoga>
Message-ID: <0dcc9c32-b7b4-972c-4251-ec9a425d53d9@Rhul.Ac.Uk>

Marcel Fabian Kr?ger wrote:
> Oh, I didn't realize that they aren't in the last release. Anyway you
> can find them on GitHub:
>
> https://github.com/googlefonts/noto-fonts/tree/master/hinted/NotoSerifTibetan

Sadly that version produces even worse results in my XeLaTeX/TikZ 
involute program ...? Link may follow in later message once I have 
checked that nothing else changed in the meantime ...

** Phil.


From P.Taylor at rhul.ac.uk  Tue Oct 15 16:48:52 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Tue, 15 Oct 2019 14:48:52 +0000
Subject: Aleph
In-Reply-To: <0dcc9c32-b7b4-972c-4251-ec9a425d53d9@Rhul.Ac.Uk>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <8deba746-7c95-9320-206a-825beae0023a@Rhul.Ac.Uk>
 <20191015124844.op2gsemxseg7r7kp@yoga>
 <0dcc9c32-b7b4-972c-4251-ec9a425d53d9@Rhul.Ac.Uk>
Message-ID: <ca69d157-8669-875c-3234-6a8d2eeb377e@Rhul.Ac.Uk>

Taylor, P wrote:

> Sadly that version produces even worse results in my XeLaTeX/TikZ
> involute program ...? Link may follow in later message once I have
> checked that nothing else changed in the meantime ...

Link : 
https://www.dropbox.com/s/t40sik54ugshhni/involute-gold-gamma.pdf?dl=0
No other changes, but seriously worse rendering of the Tibetan IMHO.

** Phil.


From preining at logic.at  Tue Oct 15 16:50:11 2019
From: preining at logic.at (Norbert Preining)
Date: Tue, 15 Oct 2019 23:50:11 +0900
Subject: Aleph
In-Reply-To: <CAC1phyZXqe8pe+U0KL=zGeOKu5uqcxGnKqMoRsV1DhMm2u+wCw@mail.gmail.com>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <b5e85ddb-9d3a-23b1-a656-2712045dc575@Rhul.Ac.Uk>
 <20191015083537.gfqvs2ks2gelaaa5@burischnitzel.preining.info>
 <cf6b914b-f431-ca29-5141-5134eb5106b8@Rhul.Ac.Uk>
 <CAC1phyZXqe8pe+U0KL=zGeOKu5uqcxGnKqMoRsV1DhMm2u+wCw@mail.gmail.com>
Message-ID: <20191015145011.tb34jn6ehy2sftrd@burischnitzel.preining.info>

Hi Zdenek,

On Tue, 15 Oct 2019, Zdenek Wagner wrote:
> luatex only. Moreover, Devanagari is in luatex broken again and I am

Yes, Devanagari and Tibetan are very similar (obviously from the
history), to they share the same problems.

You say that you would expect harfbuzz to work correctly, but I don't
see that this is actually the case.

Do you know what LibreOffice is using? Because LibreOffice correctly
displays the complicated ligature I send back then when using the fonts
	YagpoUni
(and some others), while with Noto Sans Tibetan it is broken.

The attached PDF is generated from LibreOffice with some fonts I have at
hand.

It shows that LibreOffice is indeed capable of correctly rendering the
complicated ligature, which none of lua(hb)tex nor xetex could render.
Though I have no idea what is the reason for that!

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
-------------- next part --------------
A non-text attachment was scrubbed...
Name: TibetanTest.pdf
Type: application/pdf
Size: 75038 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191015/a4cf4c9f/attachment-0001.pdf>

From norbert at preining.info  Tue Oct 15 16:52:53 2019
From: norbert at preining.info (Norbert Preining)
Date: Tue, 15 Oct 2019 23:52:53 +0900
Subject: Aleph
In-Reply-To: <20191015121518.ffln7dizr6nkule5@yoga>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
Message-ID: <20191015145253.45e2utn7qqnufxu6@burischnitzel.preining.info>

Hi Marcel,

On Tue, 15 Oct 2019, Marcel Fabian Kr?ger wrote:
> I tried this with the current development branch for the HarfBuzz
> support in luaotfload and got the same output as with XeTeX, so
> luahbtex will be able to solve this issue.

Good to hear.

> These look like problems with the fonts, do they work better in other
> programs? Especially the dotted circles in Noto Tibetan was a known bug

See my other post concerning usage in LibreOffice, where it works with
some fonts.

> "Noto Sans Tibetan" has been renamed to "Noto Serif Tibetan" so the
> "Sans" file hasn't been updated in recent years.

Ah, ok ... but that was what I had in Debian.

> If I try your example with "Serif", I get a glyph which looks quite
> similiar to your picture. (I attached the PDF file)

Nothing attached.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From norbert at preining.info  Tue Oct 15 16:56:01 2019
From: norbert at preining.info (Norbert Preining)
Date: Tue, 15 Oct 2019 23:56:01 +0900
Subject: Aleph
In-Reply-To: <ca69d157-8669-875c-3234-6a8d2eeb377e@Rhul.Ac.Uk>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <8deba746-7c95-9320-206a-825beae0023a@Rhul.Ac.Uk>
 <20191015124844.op2gsemxseg7r7kp@yoga>
 <0dcc9c32-b7b4-972c-4251-ec9a425d53d9@Rhul.Ac.Uk>
 <ca69d157-8669-875c-3234-6a8d2eeb377e@Rhul.Ac.Uk>
Message-ID: <20191015145601.a6ejrs6p66wtt6rd@burischnitzel.preining.info>

On Tue, 15 Oct 2019, Taylor, P wrote:
> https://www.dropbox.com/s/t40sik54ugshhni/involute-gold-gamma.pdf?dl=0
> No other changes, but seriously worse rendering of the Tibetan IMHO.

That looks indeed much worse, but are you sure it is the same input? It
shows *two* "u" subscripts, which is surprising.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From joseph.wright at morningstar2.co.uk  Tue Oct 15 17:04:09 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Tue, 15 Oct 2019 16:04:09 +0100
Subject: Aleph
In-Reply-To: <20191015145253.45e2utn7qqnufxu6@burischnitzel.preining.info>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <20191015145253.45e2utn7qqnufxu6@burischnitzel.preining.info>
Message-ID: <128c4722-8242-7481-fd87-4184ce48e3f5@morningstar2.co.uk>

On 15/10/2019 15:52, Norbert Preining wrote:
> Hi Marcel,
> 
> On Tue, 15 Oct 2019, Marcel Fabian Kr?ger wrote:
>> I tried this with the current development branch for the HarfBuzz
>> support in luaotfload and got the same output as with XeTeX, so
>> luahbtex will be able to solve this issue.
> 
> Good to hear.
> 
>> These look like problems with the fonts, do they work better in other
>> programs? Especially the dotted circles in Noto Tibetan was a known bug
> 
> See my other post concerning usage in LibreOffice, where it works with
> some fonts.

LibreOffice uses HarfBuzz, as do a long list of other projects:

 > HarfBuzz is used in Android, Chrome, ChromeOS, Firefox, GNOME, GTK+, 
KDE, LibreOffice, OpenJDK, PlayStation, Qt, XeTeX, and other places.

Joseph

From P.Taylor at rhul.ac.uk  Tue Oct 15 17:07:01 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Tue, 15 Oct 2019 15:07:01 +0000
Subject: Aleph
In-Reply-To: <20191015145601.a6ejrs6p66wtt6rd@burischnitzel.preining.info>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <8deba746-7c95-9320-206a-825beae0023a@Rhul.Ac.Uk>
 <20191015124844.op2gsemxseg7r7kp@yoga>
 <0dcc9c32-b7b4-972c-4251-ec9a425d53d9@Rhul.Ac.Uk>
 <ca69d157-8669-875c-3234-6a8d2eeb377e@Rhul.Ac.Uk>
 <20191015145601.a6ejrs6p66wtt6rd@burischnitzel.preining.info>
Message-ID: <9a87c84e-4186-6a4a-ed15-286431289bec@Rhul.Ac.Uk>

Norbert Preining wrote:

On Tue, 15 Oct 2019, Taylor, P wrote:


https://www.dropbox.com/s/t40sik54ugshhni/involute-gold-gamma.pdf?dl=0
No other changes, but seriously worse rendering of the Tibetan IMHO.


That looks indeed much worse, but are you sure it is the same input? It
shows *two* "u" subscripts, which is surprising.


Absolutely the same input, Norbert :  I made only a three/four/three character change in the file ("ans" -> "erif" -> "ans") and observed the output change.  The relevant lines of code are :

\newfontface \tibetan [Color=text-colour, Language=Tibetan, Script=Tibetan] {Noto Serif Tibetan Bold}

\def \Tibetan #1{{\tibetan #1}}


?dv?zlet ~ % Hungarian

??????????????????? ~ % Tibetan

F?ilte ~ % Scottish Gaelic

style characters={???????????????????} with {character command=\Tibetan},


The first two are lines 24 \& 36, the latter lines 68?70 and 241, so there is a very small probability that I might have inadvertently amended the latter while intending to amend the former.

** Phil.




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191015/20b2e1d1/attachment.html>

From zdenek.wagner at gmail.com  Tue Oct 15 17:12:20 2019
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Tue, 15 Oct 2019 17:12:20 +0200
Subject: Aleph
In-Reply-To: <20191015145011.tb34jn6ehy2sftrd@burischnitzel.preining.info>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <b5e85ddb-9d3a-23b1-a656-2712045dc575@Rhul.Ac.Uk>
 <20191015083537.gfqvs2ks2gelaaa5@burischnitzel.preining.info>
 <cf6b914b-f431-ca29-5141-5134eb5106b8@Rhul.Ac.Uk>
 <CAC1phyZXqe8pe+U0KL=zGeOKu5uqcxGnKqMoRsV1DhMm2u+wCw@mail.gmail.com>
 <20191015145011.tb34jn6ehy2sftrd@burischnitzel.preining.info>
Message-ID: <CAC1phyZZUEsWR09SCLmkZNoBQk8EAXcaLc9HHJcGjn5bcT1zVw@mail.gmail.com>

Hi Norbert,
>
> Hi Zdenek,
>
> On Tue, 15 Oct 2019, Zdenek Wagner wrote:
> > luatex only. Moreover, Devanagari is in luatex broken again and I am
>
> Yes, Devanagari and Tibetan are very similar (obviously from the
> history), to they share the same problems.
>
Yes, I do not remember the name of the Tibetan emperor who sent a few
persons to India to examine writing systems  and the name of the
person who developed the Tibetan script based on Devanagari. I saw a
textbook of Tibetan many years ago and if I remember it well, the
shaping is more complex than in case of other scripts based on Brahmi.

> You say that you would expect harfbuzz to work correctly, but I don't
> see that this is actually the case.
>
> Do you know what LibreOffice is using? Because LibreOffice correctly
> displays the complicated ligature I send back then when using the fonts
>         YagpoUni
> (and some others), while with Noto Sans Tibetan it is broken.
>
> The attached PDF is generated from LibreOffice with some fonts I have at
> hand.
>
I can see that the matras are not properly connected but I would not
try to typeset anything in Tibetan myself because I do not know the
language. In addition to Hindi I can only understand a little Nepali,
Marathi, Gujarati and I could probably verify correctness of other
languages using Devanagari and also Panjabi and Bangla. Tibetan is
beyon my knowledge, the typeset text may contain errors which I will
not recognize.

> It shows that LibreOffice is indeed capable of correctly rendering the
> complicated ligature, which none of lua(hb)tex nor xetex could render.
> Though I have no idea what is the reason for that!
>
> Best
>
> Norbert
>
> --
> PREINING Norbert                               http://www.preining.info
> Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From preining at logic.at  Tue Oct 15 17:13:39 2019
From: preining at logic.at (Norbert Preining)
Date: Wed, 16 Oct 2019 00:13:39 +0900
Subject: Aleph
In-Reply-To: <128c4722-8242-7481-fd87-4184ce48e3f5@morningstar2.co.uk>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <20191015145253.45e2utn7qqnufxu6@burischnitzel.preining.info>
 <128c4722-8242-7481-fd87-4184ce48e3f5@morningstar2.co.uk>
Message-ID: <20191015151339.icduuyouhu3ulq76@burischnitzel.preining.info>

On Tue, 15 Oct 2019, Joseph Wright wrote:
> LibreOffice uses HarfBuzz, as do a long list of other projects:

Then why is the output so much different?

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From tex at 2krueger.de  Tue Oct 15 18:46:08 2019
From: tex at 2krueger.de (Marcel Fabian =?utf-8?Q?Kr=C3=BCger?=)
Date: Tue, 15 Oct 2019 18:46:08 +0200
Subject: Aleph
In-Reply-To: <20191015145253.45e2utn7qqnufxu6@burischnitzel.preining.info>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <20191015145253.45e2utn7qqnufxu6@burischnitzel.preining.info>
Message-ID: <20191015164608.5fsrop2er6ybb3lp@yoga>

On Tue, Oct 15, 2019 at 11:52:53PM +0900, Norbert Preining wrote:
> Hi Marcel,
> 
> On Tue, 15 Oct 2019, Marcel Fabian Kr?ger wrote:
> > I tried this with the current development branch for the HarfBuzz
> > support in luaotfload and got the same output as with XeTeX, so
> > luahbtex will be able to solve this issue.
> 
> Good to hear.
> 
> > These look like problems with the fonts, do they work better in other
> > programs? Especially the dotted circles in Noto Tibetan was a known bug
> 
> See my other post concerning usage in LibreOffice, where it works with
> some fonts.

Thanks, I'll look into it.

> 
> > "Noto Sans Tibetan" has been renamed to "Noto Serif Tibetan" so the
> > "Sans" file hasn't been updated in recent years.
> 
> Ah, ok ... but that was what I had in Debian.
> 
> > If I try your example with "Serif", I get a glyph which looks quite
> > similiar to your picture. (I attached the PDF file)
> 
> Nothing attached.

This time it should be there. The Noto version looks fine to me, but
that doesn't mean much.

Marcel
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tibetan-test.pdf
Type: application/pdf
Size: 144686 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191015/9c870449/attachment-0001.pdf>

From siepo at bitmuis.nl  Tue Oct 15 20:31:26 2019
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Tue, 15 Oct 2019 20:31:26 +0200
Subject: Changing the paper size through the Tex Live shell (GUI)
In-Reply-To: <AM6PR07MB51258F2D5C57CFCDF2BFC94EBC930@AM6PR07MB5125.eurprd07.prod.outlook.com>
References: <AM6PR07MB51258F2D5C57CFCDF2BFC94EBC930@AM6PR07MB5125.eurprd07.prod.outlook.com>
Message-ID: <20191015183126.GA2466@bitmuis.nl>

On Tue, Oct 15, 2019 at 03:57:54AM +0000, Costas Psychalinos wrote:
> 
> Trying to change the paper size through the tab Options of the GUI of the Tex Live shell, the following message appears: ?tlmgr.pl: expected `a4' or `letter' after paper, not A4?.
> This is originated from the available choices ?A4 and letter? which must be corrected into ?a4 and letter?.
> 
> Best regards
> Costas

Should be fixed for r52390.

-- 
Siep Kroonenberg

From xdzeng96 at gmail.com  Tue Oct 15 19:07:38 2019
From: xdzeng96 at gmail.com (=?UTF-8?B?5pu+56Wl5Lic?=)
Date: Wed, 16 Oct 2019 01:07:38 +0800
Subject: ulem package redefined \MakeRobust command
Message-ID: <CAOCKH6Uz0bJbBY72-1_yZ14aHs3b_v_E0V_QcFRqC-aVvjUkkg@mail.gmail.com>

Hi everyone

I noticed that `ulem` package has redefined the `\MakeRobust` command,
which will override the recent changes in LaTeX kernel. This will lead to
the conflict of `ctex` and `newtx`, see
https://github.com/CTeX-org/ctex-kit/issues/454.

Is there anyone can fix it?

Best regards,
Xiangdong
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191016/551ad8d7/attachment.html>

From enrico.gregorio at gmail.com  Tue Oct 15 23:14:27 2019
From: enrico.gregorio at gmail.com (Enrico Gregorio)
Date: Tue, 15 Oct 2019 23:14:27 +0200
Subject: ulem package redefined \MakeRobust command
In-Reply-To: <CAOCKH6Uz0bJbBY72-1_yZ14aHs3b_v_E0V_QcFRqC-aVvjUkkg@mail.gmail.com>
References: <CAOCKH6Uz0bJbBY72-1_yZ14aHs3b_v_E0V_QcFRqC-aVvjUkkg@mail.gmail.com>
Message-ID: <75D45610-6FF3-4132-BD55-39E1CB27C115@gmail.com>


> On 15 Oct 2019, at 19:07 , ??? <xdzeng96 at gmail.com> wrote:
> 
> Hi everyone
> 
> I noticed that `ulem` package has redefined the `\MakeRobust` command, which will override the recent changes in LaTeX kernel. This will lead to the conflict of `ctex` and `newtx`, see https://github.com/CTeX-org/ctex-kit/issues/454.
> 
> Is there anyone can fix it?

The problem has been noticed and we hope it will be solved ASAP.

Ciao
Enrico

From norbert at preining.info  Wed Oct 16 02:42:55 2019
From: norbert at preining.info (Norbert Preining)
Date: Wed, 16 Oct 2019 09:42:55 +0900
Subject: Aleph
In-Reply-To: <20191015121518.ffln7dizr6nkule5@yoga>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
Message-ID: <20191016004255.7ysh4lyuxmu6fl25@burischnitzel.preining.info>

Hi Marcel,

On Tue, 15 Oct 2019, Marcel Fabian Kr?ger wrote:
> I tried this with the current development branch for the HarfBuzz
> support in luaotfload and got the same output as with XeTeX, so
> luahbtex will be able to solve this issue.

Can I test that somewhere, too? And which version/state of luahbtex is
necessary?

> These look like problems with the fonts, do they work better in other
> programs? Especially the dotted circles in Noto Tibetan was a known bug

Indeed, I switched to Noto Serif Tibetan and now in LibreOffice the 
layout is correct.

So that surprises me that xetex and luahbtex (both using harfbuzz like
LibreOffice) cannot get the stuff correct ... why? Is there any way I
can debug this?

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From norbert at preining.info  Wed Oct 16 03:35:45 2019
From: norbert at preining.info (Norbert Preining)
Date: Wed, 16 Oct 2019 10:35:45 +0900
Subject: Aleph
In-Reply-To: <20191015164608.5fsrop2er6ybb3lp@yoga>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <20191015145253.45e2utn7qqnufxu6@burischnitzel.preining.info>
 <20191015164608.5fsrop2er6ybb3lp@yoga>
Message-ID: <20191016013545.mqwsyzmxybmfn6lv@burischnitzel.preining.info>

Hi Marcel,

On Tue, 15 Oct 2019, Marcel Fabian Kr?ger wrote:
> This time it should be there. The Noto version looks fine to me, but
> that doesn't mean much.

Indeed. Could you let me know
* lua(hb)tex version used
* which version of fontloader?

I cannot get this result with current TeX Live uptodate ...

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From tex at 2krueger.de  Wed Oct 16 08:26:51 2019
From: tex at 2krueger.de (Marcel Fabian =?utf-8?Q?Kr=C3=BCger?=)
Date: Wed, 16 Oct 2019 08:26:51 +0200
Subject: Aleph
In-Reply-To: <20191016013545.mqwsyzmxybmfn6lv@burischnitzel.preining.info>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <20191015145253.45e2utn7qqnufxu6@burischnitzel.preining.info>
 <20191015164608.5fsrop2er6ybb3lp@yoga>
 <20191016013545.mqwsyzmxybmfn6lv@burischnitzel.preining.info>
Message-ID: <20191016062651.iacl4x7c467rfno2@yoga>

Hi Norbert,

I just found that I get similar output even with the classical
fontloader as long as the right script is specified, so just try adding
`Script=Tibetan` to `\newfontface`.

On Wed, Oct 16, 2019 at 10:35:45AM +0900, Norbert Preining wrote:
> Hi Marcel,
> 
> On Tue, 15 Oct 2019, Marcel Fabian Kr?ger wrote:
> > This time it should be there. The Noto version looks fine to me, but
> > that doesn't mean much.
> 
> Indeed. Could you let me know
> * lua(hb)tex version used
> * which version of fontloader?

The HarfBuzz code works best with current builds of LuaTeX's experimental
branch (We use a callback added in revision 7192 on Sep 27) but except for
some weird log output it should work for all luahbtex versions.

The fontloader version containing a variant of Khaled's `harf` Lua code
for HarfBuzz can be found on GitHub in the `latex3/luaotfload` branch
`harfindex-dev` or pre-release `v3.0006-dev` at

https://github.com/latex3/luaotfload/releases/download/v3.0006-dev/luaotfload-dev.tds.zip

This version installs into `latex-dev`, so it's only used with
`luahblatex-dev`.

-- Marcel

From news3 at nililand.de  Wed Oct 16 09:30:39 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Wed, 16 Oct 2019 09:30:39 +0200
Subject: Aleph
In-Reply-To: <20191016004255.7ysh4lyuxmu6fl25@burischnitzel.preining.info>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk> 
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <20191016004255.7ysh4lyuxmu6fl25@burischnitzel.preining.info>
Message-ID: <1034258179.20191016093039@nililand.de>

Hello Norbert,


>> I tried this with the current development branch for the HarfBuzz
>> support in luaotfload and got the same output as with XeTeX, so
>> luahbtex will be able to solve this issue.

> Can I test that somewhere, too? And which version/state of luahbtex is
> necessary?

Assuming that you know how to get luahbtex and luahblatex.exe:

You need a development version of luaotfload for this:

Marcel made yesterday a release that you can use:
https://github.com/latex3/luaotfload/releases.

Alternatively, if you want to keep track of the development you can
install luaotfload so that it is used with latex-dev:

Get the luaotfload git https://github.com/latex3/luaotfload

Checkout the harfnode-dev branch

Run in the folder with the build.lua

   l3build install

This will install luaotfload in the tex/latex-dev folder of your
texmfhome.

You then need also an luahblatex-dev entry in the fmtutil-sys and a
luahblatex-dev.exe  (a copy from luahblatex.exe).

Build the formats and then you can try. The log-file should
mention a 3.006 luaotfload.



To use harf you must declare the mode when loading the font. And as I
saw yesterday it is also necessary to correctly declare the script:

E.g.

\setmainfont{Noto Sans Tibetan}[RawFeature={mode=harf;script=tibt;}]



-- 
Mit freundlichen Gr??en
Ulrike Fischer



From norbert at preining.info  Wed Oct 16 11:15:13 2019
From: norbert at preining.info (Norbert Preining)
Date: Wed, 16 Oct 2019 18:15:13 +0900
Subject: Aleph
In-Reply-To: <20191016062651.iacl4x7c467rfno2@yoga>
 <1034258179.20191016093039@nililand.de>
Message-ID: <20191016091513.v33h5x6ialdube7x@burischnitzel.preining.info>

Hi Ulrike, hi Marcel,

(@Petra: please see attached PDFs, it shows that LuaTeX with Noto
Tibetan Serif actually displays all your examples correctly!)

thanks for your hints, that helped a lot to improve a bit.

> `Script=Tibetan` to `\newfontface`.

That helped indeed with Noto Tibetan Serif.

Thanks also to both of you for the explanations concerning testing
luaotfload dev versions, I will look into it the next days.

@Ulrike
> To use harf you must declare the mode when loading the font. And as I
> saw yesterday it is also necessary to correctly declare the script:
> \setmainfont{Noto Sans Tibetan}[RawFeature={mode=harf;script=tibt;}]

Is this necessary for harf(la)tex only I guess? I tried it with luahbtex
and it made everything worse.

For both of you - is there a way to distinguish between
luatex/luahbtex/harftex?

I use
\newfontface{\tibNoto}[Script=Tibetan]{Noto Serif Tibetan}
\newfontface{\tibDDC}[Script=Tibetan]{DDC-Uchen.ttf}
\newfontface{\tibJom}[Script=Tibetan]{Jomolhari.ttf}
\ifXeTeX
  \def\prog{Xe\LaTeX}
\else
  \ifLuaTeX
    % check for harftex
    \if1\directlua{if luaharfbuzz == nil then tex.print("1") else tex.print("2") end}
      \def\prog{Lua\TeX}
      \message{USING LUATEX CODE}
    \else
      \def\prog{LuaHB\LaTeX\ or Harf\LaTeX}
      \message{USING LUAHBTEX OR HARFTEX CODE}
      \renewfontface{\tibNoto}[RawFeature={mode=harf;script=tibt;}]{Noto Serif Tibetan}
      \renewfontface{\tibDDC}[RawFeature={mode=harf;script=tibt;}]{DDC-Uchen.ttf}
      \renewfontface{\tibJom}[RawFeature={mode=harf;script=tibt;}]{Jomolhari.ttf}
    \fi
  \fi
\fi

Is there a better way, and can we distinguish between harftex and
luahbtex?


I attach a new source code with a few more examples. It shows that
luatex with Noto Tibetan Serif actually works best for the given cases.

Interestingly, xetex stumbles over the Om compound at the end, while
even in my terminal it is properly displayed (although a bit small and
unreadable), and LibreOffice works, too.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tibetan-test.luatex.pdf
Type: application/pdf
Size: 69465 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191016/7811cadb/attachment-0002.pdf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tibetan-test.tex
Type: text/x-tex
Size: 2428 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191016/7811cadb/attachment-0001.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tibetan-test.xetex.pdf
Type: application/pdf
Size: 45527 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191016/7811cadb/attachment-0003.pdf>

From tex at 2krueger.de  Wed Oct 16 11:52:45 2019
From: tex at 2krueger.de (Marcel Fabian =?utf-8?Q?Kr=C3=BCger?=)
Date: Wed, 16 Oct 2019 11:52:45 +0200
Subject: Aleph
In-Reply-To: <20191016091513.v33h5x6ialdube7x@burischnitzel.preining.info>
References: <20191016062651.iacl4x7c467rfno2@yoga>
 <1034258179.20191016093039@nililand.de>
 <20191016091513.v33h5x6ialdube7x@burischnitzel.preining.info>
Message-ID: <20191016095245.stgpewsguox4frvs@yoga>

Hi Norbert,


On Wed, Oct 16, 2019 at 06:15:13PM +0900, Norbert Preining wrote:
> @Ulrike
> > To use harf you must declare the mode when loading the font. And as I
> > saw yesterday it is also necessary to correctly declare the script:
> > \setmainfont{Noto Sans Tibetan}[RawFeature={mode=harf;script=tibt;}]
> 
> Is this necessary for harf(la)tex only I guess? I tried it with luahbtex
> and it made everything worse.

While I am not entirely sure, I think you are trying to use `luahbtex`
with regular luaotfload versions (which do not include `mode=harf` yet)
and without loading the older `harf` code from Khaled. Then `mode=harf`
is not available and `luahbtex` behaves exactly like `luatex`. If you
specify `mode=harf` in that situation, you select a non-existing
mode, so you effectivly disable all shaping, leading to bad output.

So `mode=harf` should only be added when the `dev` version of luaotfload
is used in HarfBuzz engines. The difference between HarfTex and LuaHBTeX
is not important here.

> 
> For both of you - is there a way to distinguish between
> luatex/luahbtex/harftex?
> 
> I use
> \newfontface{\tibNoto}[Script=Tibetan]{Noto Serif Tibetan}
> \newfontface{\tibDDC}[Script=Tibetan]{DDC-Uchen.ttf}
> \newfontface{\tibJom}[Script=Tibetan]{Jomolhari.ttf}
> \ifXeTeX
>   \def\prog{Xe\LaTeX}
> \else
>   \ifLuaTeX
>     % check for harftex
>     \if1\directlua{if luaharfbuzz == nil then tex.print("1") else tex.print("2") end}
>       \def\prog{Lua\TeX}
>       \message{USING LUATEX CODE}
>     \else
>       \def\prog{LuaHB\LaTeX\ or Harf\LaTeX}
>       \message{USING LUAHBTEX OR HARFTEX CODE}
>       \renewfontface{\tibNoto}[RawFeature={mode=harf;script=tibt;}]{Noto Serif Tibetan}
>       \renewfontface{\tibDDC}[RawFeature={mode=harf;script=tibt;}]{DDC-Uchen.ttf}
>       \renewfontface{\tibJom}[RawFeature={mode=harf;script=tibt;}]{Jomolhari.ttf}
>     \fi
>   \fi
> \fi
> 
> Is there a better way, and can we distinguish between harftex and
> luahbtex?
> 

This works great for distinguishing between HarfBuzz and non-HarfBuzz
LuaTeX variants. Of course you do not catch if the necessary luaotfload
support exists, so you might prefer to check `luaotfload.harfbuzz` which
is only defined if `mode=harf` can be used:

\newfontface{\tibNoto}[Script=Tibetan]{Noto Serif Tibetan}                     
\newfontface{\tibDDC}[Script=Tibetan]{DDC-Uchen.ttf}                           
\newfontface{\tibJom}[Script=Tibetan]{Jomolhari.ttf}               
\ifXeTeX                                                           
  \def\prog{Xe\LaTeX}
\else
  \ifLuaTeX
    % check for harftex and compatible Lua support
    \if1\directlua{if luaotfload.harfbuzz then tex.print("2") else tex.print("1") end}
      \def\prog{Lua\TeX}                      
      \message{USING LUATEX CODE}             
    \else                                     
      \def\prog{LuaHB\LaTeX\ or Harf\LaTeX}
      \message{USING LUAHBTEX OR HARFTEX CODE}
      \renewfontface{\tibNoto}[RawFeature={mode=harf;script=tibt;}]{Noto Serif Tibetan}
      \renewfontface{\tibDDC}[RawFeature={mode=harf;script=tibt;}]{DDC-Uchen.ttf}
      \renewfontface{\tibJom}[RawFeature={mode=harf;script=tibt;}]{Jomolhari.ttf}
    \fi                                                                       
  \fi                                                                         
\fi

I don't think that there is a important use-case for distinguishing
harftex and luahbtex anymore. HarfTeX currently is deprecated and
doesn't behave differently than LuaHBTeX from a user perspective. 

But if you still want to, you can use `status.luatex_engine` to get the
name of the engine:

\ifcase\directlua{tex.write(({harftex = 2, luatex = 0, luahbtex = 1})[status.luatex_engine] or 3)}
  Lua%
\or
  LuaHB%
\or
  Harf%
\else
  ???%
\fi
\TeX


Marcel

From norbert at preining.info  Wed Oct 16 12:21:07 2019
From: norbert at preining.info (Norbert Preining)
Date: Wed, 16 Oct 2019 19:21:07 +0900
Subject: Aleph
In-Reply-To: <20191016095245.stgpewsguox4frvs@yoga>
References: <20191016062651.iacl4x7c467rfno2@yoga>
 <1034258179.20191016093039@nililand.de>
 <20191016091513.v33h5x6ialdube7x@burischnitzel.preining.info>
 <20191016095245.stgpewsguox4frvs@yoga>
Message-ID: <20191016102107.jiok5umm73am2nni@burischnitzel.preining.info>

Hi Ulrike, hi Marcel,

thanks again for your comments.

On Wed, 16 Oct 2019, Marcel Fabian Kr?ger wrote:
> So `mode=harf` should only be added when the `dev` version of luaotfload
> is used in HarfBuzz engines. The difference between HarfTex and LuaHBTeX

Ok, I have installed them now.

> \ifcase\directlua{tex.write(({harftex = 2, luatex = 0, luahbtex = 1})[status.luatex_engine] or 3)}

Thanks a lot.


Now an observation: With luahblatex-dev loading luaotfload-dev 3.006-dev
the "oM+'" ligature (top of second page) is broken. Here to confirm some
lines from the log file
LaTeX2e <2019-10-01> pre-release-3 (development 2019-10-16 branch)
Lua module: luaotfload-main 2019-10-15 3.0006-dev luaotfload entry point
Lua module: luaotfload-init 2019-10-15 3.0006-dev luaotfload submodule / initial
ization
Lua module: lualibs 2019-08-11 2.67 ConTeXt Lua standard libraries.
Lua module: lualibs-extended 2019-08-11 2.67 ConTeXt Lua libraries -- extended c
ollection.
Lua module: luaotfload-log 2019-10-15 3.0006-dev luaotfload submodule / logging
Lua module: luaotfload-parsers 2019-10-15 3.0006-dev luaotfload submodule / file
list
Lua module: luaotfload-configuration 2019-10-15 3.0006-dev luaotfload submodule


While with plain luahblatex or lualatex, it works ... do you understand
this?

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From tex at 2krueger.de  Wed Oct 16 14:33:32 2019
From: tex at 2krueger.de (Marcel Fabian =?utf-8?Q?Kr=C3=BCger?=)
Date: Wed, 16 Oct 2019 14:33:32 +0200
Subject: Aleph
In-Reply-To: <20191016102107.jiok5umm73am2nni@burischnitzel.preining.info>
References: <20191016062651.iacl4x7c467rfno2@yoga>
 <1034258179.20191016093039@nililand.de>
 <20191016091513.v33h5x6ialdube7x@burischnitzel.preining.info>
 <20191016095245.stgpewsguox4frvs@yoga>
 <20191016102107.jiok5umm73am2nni@burischnitzel.preining.info>
Message-ID: <20191016123332.i3jrvzwcs6ey32pn@yoga>

On Wed, Oct 16, 2019 at 07:21:07PM +0900, Norbert Preining wrote:
> Now an observation: With luahblatex-dev loading luaotfload-dev 3.006-dev
> the "oM+'" ligature (top of second page) is broken. Here to confirm some
> lines from the log file
> LaTeX2e <2019-10-01> pre-release-3 (development 2019-10-16 branch)
> Lua module: luaotfload-main 2019-10-15 3.0006-dev luaotfload entry point
> Lua module: luaotfload-init 2019-10-15 3.0006-dev luaotfload submodule / initial
> ization
> Lua module: lualibs 2019-08-11 2.67 ConTeXt Lua standard libraries.
> Lua module: lualibs-extended 2019-08-11 2.67 ConTeXt Lua libraries -- extended c
> ollection.
> Lua module: luaotfload-log 2019-10-15 3.0006-dev luaotfload submodule / logging
> Lua module: luaotfload-parsers 2019-10-15 3.0006-dev luaotfload submodule / file
> list
> Lua module: luaotfload-configuration 2019-10-15 3.0006-dev luaotfload submodule
> 
> 
> While with plain luahblatex or lualatex, it works ... do you understand
> this?

It seems like other HarfBuzz users, especially (my terminal,)
LibreOffice and XeTeX also shows the dotted circle there. It is
automatically inserted by HarfBuzz and looking into it I think that it
corresponds to the shaping rules in Unicode.

Does this work in any non-TeX programs?

The problem is that Om (U+0F00) has Indic Syllabic Category "Other"
which is not one of the base letter categories.
Therefore it is not a valid base for the following U+0FB0 and HarfBuzz
inserts the dotted circle to provide a base for the subjoint letter.
(This doesn't happen with LuaTeX because the ConTeXt fontloader never
inserts these dotted circles on it's own AFAICT)
I can't say if this classification is correct because I don't know
anything about this script, but if the same problem exists  in other
programs it might be worth raising an issue on the HarfBuzz tracker.


Marcel

> 
> Best
> 
> Norbert
> 
> --
> PREINING Norbert                               http://www.preining.info
> Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
> 

From zdenek.wagner at gmail.com  Wed Oct 16 14:54:29 2019
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 16 Oct 2019 14:54:29 +0200
Subject: Aleph
In-Reply-To: <20191016123332.i3jrvzwcs6ey32pn@yoga>
References: <20191016062651.iacl4x7c467rfno2@yoga>
 <1034258179.20191016093039@nililand.de>
 <20191016091513.v33h5x6ialdube7x@burischnitzel.preining.info>
 <20191016095245.stgpewsguox4frvs@yoga>
 <20191016102107.jiok5umm73am2nni@burischnitzel.preining.info>
 <20191016123332.i3jrvzwcs6ey32pn@yoga>
Message-ID: <CAC1phyZvqXM-uRLvmx0knvMXvX=M-4cYbtofOMC7jnEB7SG70w@mail.gmail.com>

st 16. 10. 2019 v 14:33 odes?latel Marcel Fabian Kr?ger
<tex at 2krueger.de> napsal:
>
> On Wed, Oct 16, 2019 at 07:21:07PM +0900, Norbert Preining wrote:
> > Now an observation: With luahblatex-dev loading luaotfload-dev 3.006-dev
> > the "oM+'" ligature (top of second page) is broken. Here to confirm some
> > lines from the log file
> > LaTeX2e <2019-10-01> pre-release-3 (development 2019-10-16 branch)
> > Lua module: luaotfload-main 2019-10-15 3.0006-dev luaotfload entry point
> > Lua module: luaotfload-init 2019-10-15 3.0006-dev luaotfload submodule / initial
> > ization
> > Lua module: lualibs 2019-08-11 2.67 ConTeXt Lua standard libraries.
> > Lua module: lualibs-extended 2019-08-11 2.67 ConTeXt Lua libraries -- extended c
> > ollection.
> > Lua module: luaotfload-log 2019-10-15 3.0006-dev luaotfload submodule / logging
> > Lua module: luaotfload-parsers 2019-10-15 3.0006-dev luaotfload submodule / file
> > list
> > Lua module: luaotfload-configuration 2019-10-15 3.0006-dev luaotfload submodule
> >
> >
> > While with plain luahblatex or lualatex, it works ... do you understand
> > this?
>
> It seems like other HarfBuzz users, especially (my terminal,)
> LibreOffice and XeTeX also shows the dotted circle there. It is
> automatically inserted by HarfBuzz and looking into it I think that it
> corresponds to the shaping rules in Unicode.
>
The dotted circle is displayed in all scripts derived from Brahmi in
dependent vowel (matras) and they denote the position of a consonant
or a consonant group. If you see the dotted circle in a regular
output, it means that the shaping rule did not connect the matra
correctly to the consonant. If you have Linux and open any Indic block
in gucharmap, you will see the dotted circles in the display of all
matras.

> Does this work in any non-TeX programs?
>
> The problem is that Om (U+0F00) has Indic Syllabic Category "Other"
> which is not one of the base letter categories.
> Therefore it is not a valid base for the following U+0FB0 and HarfBuzz
> inserts the dotted circle to provide a base for the subjoint letter.
> (This doesn't happen with LuaTeX because the ConTeXt fontloader never
> inserts these dotted circles on it's own AFAICT)
> I can't say if this classification is correct because I don't know
> anything about this script, but if the same problem exists  in other
> programs it might be worth raising an issue on the HarfBuzz tracker.
>
>
> Marcel
>

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz
> >
> > Best
> >
> > Norbert
> >
> > --
> > PREINING Norbert                               http://www.preining.info
> > Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
> > GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
> >


From P.Taylor at rhul.ac.uk  Wed Oct 16 15:26:26 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Wed, 16 Oct 2019 13:26:26 +0000
Subject: Aleph
In-Reply-To: <9a87c84e-4186-6a4a-ed15-286431289bec@Rhul.Ac.Uk>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <8deba746-7c95-9320-206a-825beae0023a@Rhul.Ac.Uk>
 <20191015124844.op2gsemxseg7r7kp@yoga>
 <0dcc9c32-b7b4-972c-4251-ec9a425d53d9@Rhul.Ac.Uk>
 <ca69d157-8669-875c-3234-6a8d2eeb377e@Rhul.Ac.Uk>
 <20191015145601.a6ejrs6p66wtt6rd@burischnitzel.preining.info>
 <9a87c84e-4186-6a4a-ed15-286431289bec@Rhul.Ac.Uk>
Message-ID: <2f1a74f7-2e7d-f9c5-04c6-55fed0b6c482@Rhul.Ac.Uk>

Taylor, P wrote:

Norbert Preining wrote:
That looks indeed much worse, but are you sure it is the same input? It

shows *two* "u" subscripts, which is surprising.


Absolutely the same input, Norbert :  I made only a three/four/three character change in the file ("ans" -> "erif" -> "ans") and observed the output change.

I can now confirm that XeTeX by itself does not misplace the final vowel in my sample text ? the problem is seemingly introduced by the use of TikZ's "style characters={???????????????????} with {character command=\Tibetan}"

\magnification \magstep 5

\font \TibetanSans = "Noto Sans Tibetan Bold"

\font \Tibetan = "Noto Serif Tibetan Bold"

\def \TibetanText {???????????????????}

\centerline {\TibetanSans \TibetanText}

\centerline {\Tibetan \TibetanText}

\end

** Phil.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191016/613100e7/attachment-0001.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Tibetan.log
URL: <https://tug.org/pipermail/tex-live/attachments/20191016/613100e7/attachment-0001.log>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Tibetan.pdf
Type: application/pdf
Size: 10440 bytes
Desc: Tibetan.pdf
URL: <https://tug.org/pipermail/tex-live/attachments/20191016/613100e7/attachment-0001.pdf>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Tibetan.tex
URL: <https://tug.org/pipermail/tex-live/attachments/20191016/613100e7/attachment-0001.ksh>

From zdenek.wagner at gmail.com  Wed Oct 16 15:36:44 2019
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 16 Oct 2019 15:36:44 +0200
Subject: Aleph
In-Reply-To: <2f1a74f7-2e7d-f9c5-04c6-55fed0b6c482@Rhul.Ac.Uk>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <8deba746-7c95-9320-206a-825beae0023a@Rhul.Ac.Uk>
 <20191015124844.op2gsemxseg7r7kp@yoga>
 <0dcc9c32-b7b4-972c-4251-ec9a425d53d9@Rhul.Ac.Uk>
 <ca69d157-8669-875c-3234-6a8d2eeb377e@Rhul.Ac.Uk>
 <20191015145601.a6ejrs6p66wtt6rd@burischnitzel.preining.info>
 <9a87c84e-4186-6a4a-ed15-286431289bec@Rhul.Ac.Uk>
 <2f1a74f7-2e7d-f9c5-04c6-55fed0b6c482@Rhul.Ac.Uk>
Message-ID: <CAC1phyY=iZPQO1xaJ+nV2ESe6je7b9kprzNKWDKYv_xj7fEjDQ@mail.gmail.com>

st 16. 10. 2019 v 15:26 odes?latel Taylor, P <P.Taylor at rhul.ac.uk> napsal:
>
> Taylor, P wrote:
>
> Norbert Preining wrote:
>
> That looks indeed much worse, but are you sure it is the same input? It
>
> shows *two* "u" subscripts, which is surprising.
>
>
> Absolutely the same input, Norbert :  I made only a three/four/three character change in the file ("ans" -> "erif" -> "ans") and observed the output change.
>
>
> I can now confirm that XeTeX by itself does not misplace the final vowel in my sample text ? the problem is seemingly introduced by the use of TikZ's "style characters={???????????????????} with {character command=\Tibetan}"

It depends what exactly you do in TikZ. Especially when typesetting
along a curved path TikZ can insert some code between codepoints and
then the shaping engine does not see the correct groups of characters.
It might help to enclose a consonant with its vowel into braces so
that TikZ considers it one token and does not insert anything in
between.

>
> \magnification \magstep 5
>
> \font \TibetanSans = "Noto Sans Tibetan Bold"
>
> \font \Tibetan = "Noto Serif Tibetan Bold"
>
> \def \TibetanText {???????????????????}
>
> \centerline {\TibetanSans \TibetanText}
>
> \centerline {\Tibetan \TibetanText}
>
> \end
>
>
> ** Phil.
>
Zden?k Wagner


From P.Taylor at rhul.ac.uk  Wed Oct 16 15:43:32 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Wed, 16 Oct 2019 13:43:32 +0000
Subject: Aleph
In-Reply-To: <CAC1phyY=iZPQO1xaJ+nV2ESe6je7b9kprzNKWDKYv_xj7fEjDQ@mail.gmail.com>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <8deba746-7c95-9320-206a-825beae0023a@Rhul.Ac.Uk>
 <20191015124844.op2gsemxseg7r7kp@yoga>
 <0dcc9c32-b7b4-972c-4251-ec9a425d53d9@Rhul.Ac.Uk>
 <ca69d157-8669-875c-3234-6a8d2eeb377e@Rhul.Ac.Uk>
 <20191015145601.a6ejrs6p66wtt6rd@burischnitzel.preining.info>
 <9a87c84e-4186-6a4a-ed15-286431289bec@Rhul.Ac.Uk>
 <2f1a74f7-2e7d-f9c5-04c6-55fed0b6c482@Rhul.Ac.Uk>
 <CAC1phyY=iZPQO1xaJ+nV2ESe6je7b9kprzNKWDKYv_xj7fEjDQ@mail.gmail.com>
Message-ID: <60f09f77-59c4-aede-3646-227d7854a377@Rhul.Ac.Uk>

Zdenek Wagner wrote:




I can now confirm that XeTeX by itself does not misplace the final vowel in my sample text ? the problem is seemingly introduced by the use of TikZ's "style characters={???????????????????} with {character command=\Tibetan}"



It depends what exactly you do in TikZ. Especially when typesetting
along a curved path TikZ can insert some code between codepoints and
then the shaping engine does not see the correct groups of characters.
It might help to enclose a consonant with its vowel into braces so
that TikZ considers it one token and does not insert anything in
between.


Yes, I am experimenting with this as I write ? I already use grouping for (e.g.,) Nepali & Arabic :

style characters={{????}{?}{?}{??}} with {character command=\Nepali},

style characters={{?????}{?}{?????}} with {character command=\Arabic},

but am hampered in trying to do the same with Tibetan due to TeXworks inconsistent treatment of <delete> and <cursor-left/right>.  With <delete>, I can break ??? down into four component elements, but my cursor keys treat it as inseparable ...

** Phil.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191016/bf07d5c9/attachment.html>

From pablgonz at educarchile.cl  Wed Oct 16 17:59:39 2019
From: pablgonz at educarchile.cl (=?UTF-8?Q?Pablo_Gonz=C3=A1lez_L?=)
Date: Wed, 16 Oct 2019 12:59:39 -0300
Subject: How to configure ConText in TeXLive 2019
In-Reply-To: <mailman.259.1571232394.2435.tex-live@tug.org>
References: <mailman.259.1571232394.2435.tex-live@tug.org>
Message-ID: <CANeU4n9J96ETq9oHqv4WifjoYrFEpYvong4i9etnCMU3c6sDJg@mail.gmail.com>

Hi, I'm trying to use ConText in TeXLive 2019 (updated), but I'm having some
problems and I haven't been able to solve them after a while searching the
net. I use fedora 30 and win10 and in neither of them I have managed to make
it work.

## output win10
C:\Users\pablo>kpsewhich -var-brace-value=TEXMF
D:/ltxcole/stycole/;C:/Users/pablo/.texlive2019/texmf-config;C:/Users/pablo/.texlive2019/texmf-var;C:/Users/pablo/texmf;!!C:/texlive/texmf-local;!!C:/texlive/2019/texmf-config;!!C:/texlive/2019/texmf-var;!!C:/texlive/2019/texmf-dist

C:\Users\pablo>kpsewhich -all texmf.cnf
c:/Users/pablo/texmf.cnf
c:/texlive/2019/texmf.cnf
c:/texlive/2019/texmf-dist/web2c/texmf.cnf

C:\Users\pablo>more texmf.cnf
TEXMFAUXTREES = D:/ltxcole/stycole/,

C:\Users\pablo>context --generate
mtxrun          | forcing cache reload
resolvers       | resolving | looking for regular 'texmfcnf.lua' on
weird path 'C:/Users/pablo' from specification 'C:/Users/pablo'
resolvers       | resolving | looking for fallback 'contextcnf.lua' on
weird path 'C:/Users/pablo' from specification 'C:/Users/pablo'
resolvers       | resolving |
resolvers       | resolving | warning: no lua configuration files found
resolvers       | resolving | no texmf paths are defined (using TEXMF)
resolvers       | resolving |
mtxrun          | the resolver databases are not present or outdated
resolvers       | resolving | using suffix based filetype 'scripts'
resolvers       | resolving | remembering file 'mtx-context.lua' using
hash 'lua::mtx-context.lua'
resolvers       | resolving | using suffix based filetype 'scripts'
resolvers       | resolving | remembering file 'mtx-contexts.lua'
using hash 'lua::mtx-contexts.lua'
resolvers       | resolving | remembered file 'mtx-context.lua'
resolvers       | resolving | using suffix based filetype 'scripts'
resolvers       | resolving | remembering file 'mtx-t-context.lua'
using hash 'lua::mtx-t-context.lua'
resolvers       | resolving | using suffix based filetype 'scripts'
resolvers       | resolving | remembering file 'mtx-t-contexts.lua'
using hash 'lua::mtx-t-contexts.lua'
resolvers       | resolving | remembered file 'mtx-t-context.lua'
resolvers       | resolving | using suffix based filetype 'scripts'
resolvers       | resolving | remembering file 'context.lua' using
hash 'lua::context.lua'
mtxrun          | unknown script 'context.lua' or 'mtx-context.lua'

C:\Users\pablo>context
mtxrun          | forcing cache reload
resolvers       | resolving | looking for regular 'texmfcnf.lua' on
weird path 'C:/Users/pablo' from specification 'C:/Users/pablo'
resolvers       | resolving | looking for fallback 'contextcnf.lua' on
weird path 'C:/Users/pablo' from specification 'C:/Users/pablo'
resolvers       | resolving |
resolvers       | resolving | warning: no lua configuration files found
resolvers       | resolving | no texmf paths are defined (using TEXMF)
resolvers       | resolving |
mtxrun          | the resolver databases are not present or outdated
resolvers       | resolving | using suffix based filetype 'scripts'
resolvers       | resolving | remembering file 'mtx-context.lua' using
hash 'lua::mtx-context.lua'
resolvers       | resolving | using suffix based filetype 'scripts'
resolvers       | resolving | remembering file 'mtx-contexts.lua'
using hash 'lua::mtx-contexts.lua'
resolvers       | resolving | remembered file 'mtx-context.lua'
resolvers       | resolving | using suffix based filetype 'scripts'
resolvers       | resolving | remembering file 'mtx-t-context.lua'
using hash 'lua::mtx-t-context.lua'
resolvers       | resolving | using suffix based filetype 'scripts'
resolvers       | resolving | remembering file 'mtx-t-contexts.lua'
using hash 'lua::mtx-t-contexts.lua'
resolvers       | resolving | remembered file 'mtx-t-context.lua'
resolvers       | resolving | using suffix based filetype 'scripts'
resolvers       | resolving | remembering file 'context.lua' using
hash 'lua::context.lua'
mtxrun          | unknown script 'context.lua' or 'mtx-context.lua'

## fedora 30
[pablo at worktex ~] $ kpsewhich -var-brace-value=TEXMF
/usr/share/texmf
[pablo at worktex ~] $ kpsewhich -all texmf.cnf
/home/pablo/texmf/texmf.cnf
/usr/local/texlive/2019/texmf.cnf
/usr/local/texlive/2019/texmf-dist/web2c/texmf.cnf
[pablo at worktex ~] $ cat /home/pablo/texmf/texmf.cnf
TEXMFAUXTREES = /home/pablo/ltxcole/stycole/,
[pablo at worktex ~] $ context --generate
mtxrun          | forcing cache reload
resolvers       | resolving | looking for regular 'texmfcnf.lua' on
weird path '$HOME/texmf:' from specification '$HOME/texmf:'
resolvers       | resolving | looking for fallback 'contextcnf.lua' on
weird path '$HOME/texmf:' from specification '$HOME/texmf:'
resolvers       | resolving |
resolvers       | resolving | warning: no lua configuration files found
resolvers       | resolving | locating list of '/usr/share/texmf'
(runtime) (tree:////usr/share/texmf)
resolvers       | methods | resolving, method 'locators', how 'uri',
handler 'tree', argument 'tree:////usr/share/texmf'
resolvers       | trees | locator '/usr/share/texmf' not found
resolvers       | resolving |
resolvers       | resolving |
mtxrun          | the resolver databases are not present or outdated
resolvers       | resolving | using suffix based filetype 'scripts'
resolvers       | resolving | remembering file 'mtx-context.lua' using
hash 'lua::mtx-context.lua'
resolvers       | resolving | using suffix based filetype 'scripts'
resolvers       | resolving | remembering file 'mtx-contexts.lua'
using hash 'lua::mtx-contexts.lua'
resolvers       | resolving | remembered file 'mtx-context.lua'
resolvers       | resolving | using suffix based filetype 'scripts'
resolvers       | resolving | remembering file 'mtx-t-context.lua'
using hash 'lua::mtx-t-context.lua'
resolvers       | resolving | using suffix based filetype 'scripts'
resolvers       | resolving | remembering file 'mtx-t-contexts.lua'
using hash 'lua::mtx-t-contexts.lua'
resolvers       | resolving | remembered file 'mtx-t-context.lua'
resolvers       | resolving | using suffix based filetype 'scripts'
resolvers       | resolving | remembering file 'context.lua' using
hash 'lua::context.lua'
mtxrun          | unknown script 'context.lua' or 'mtx-context.lua'

[pablo at worktex ~] $ context
mtxrun          | forcing cache reload
resolvers       | resolving | looking for regular 'texmfcnf.lua' on
weird path '$HOME/texmf:' from specification '$HOME/texmf:'
resolvers       | resolving | looking for fallback 'contextcnf.lua' on
weird path '$HOME/texmf:' from specification '$HOME/texmf:'
resolvers       | resolving |
resolvers       | resolving | warning: no lua configuration files found
resolvers       | resolving | locating list of '/usr/share/texmf'
(runtime) (tree:////usr/share/texmf)
resolvers       | methods | resolving, method 'locators', how 'uri',
handler 'tree', argument 'tree:////usr/share/texmf'
resolvers       | trees | locator '/usr/share/texmf' not found
resolvers       | resolving |
resolvers       | resolving |
mtxrun          | the resolver databases are not present or outdated
resolvers       | resolving | using suffix based filetype 'lua'
resolvers       | resolving | remembering file 'mtx-context.lua' using
hash 'lua::mtx-context.lua'
resolvers       | resolving | using suffix based filetype 'lua'
resolvers       | resolving | remembering file 'mtx-contexts.lua'
using hash 'lua::mtx-contexts.lua'
resolvers       | resolving | remembered file 'mtx-context.lua'
resolvers       | resolving | using suffix based filetype 'lua'
resolvers       | resolving | remembering file 'mtx-t-context.lua'
using hash 'lua::mtx-t-context.lua'
resolvers       | resolving | using suffix based filetype 'lua'
resolvers       | resolving | remembering file 'mtx-t-contexts.lua'
using hash 'lua::mtx-t-contexts.lua'
resolvers       | resolving | remembered file 'mtx-t-context.lua'
resolvers       | resolving | using suffix based filetype 'lua'
resolvers       | resolving | remembering file 'context.lua' using
hash 'lua::context.lua'
mtxrun          | unknown script 'context.lua' or 'mtx-context.lua'

The strange thing is that as a user `root` does work.

## root
[root at worktex ~] # kpsewhich -var-brace-value=TEXMF
/root/.texlive2019/texmf-config:/root/.texlive2019/texmf-var:/root/texmf:!!/usr/local/texlive/texmf-local:!!/usr/local/texlive/2019/texmf-config:!!/usr/local/texlive/2019/texmf-var:!!/usr/local/texlive/2019/texmf-dist
[root at worktex ~] # kpsewhich -all texmf.cnf
/usr/local/texlive/2019/texmf.cnf
/usr/local/texlive/2019/texmf-dist/web2c/texmf.cnf
[root at worktex ~] # cat /usr/local/texlive/2019/texmf.cnf
% (Public domain.)
% This texmf.cnf file should contain only your personal changes from the
% original texmf.cnf (for example, as chosen in the installer).
%
% That is, if you need to make changes to texmf.cnf, put your custom
% settings in this file, which is .../texlive/YYYY/texmf.cnf, rather than
% the distributed file (which is .../texlive/YYYY/texmf-dist/web2c/texmf.cnf).
% And include *only* your changed values, not a copy of the whole thing!
%
[root at worktex ~] # context --generate
resolvers       | resolving | configuration files already identified
resolvers       | resolving | loading configuration file
'selfautoparent:/texmfcnf.lua'
resolvers       | resolving |
resolvers       | resolving | loading configuration file
'selfautoparent:/texmf-dist/web2c/texmfcnf.lua'
resolvers       | resolving |
resolvers       | resolving | locating list of
'home:.texlive2019/texmf-config' (runtime)
(tree:///home:.texlive2019/texmf-config)
resolvers       | methods | resolving, method 'locators', how 'uri',
handler 'tree', argument 'tree:///home:.texlive2019/texmf-config'
resolvers       | trees | locator '/root/.texlive2019/texmf-config' found
resolvers       | resolving | hash 'home:.texlive2019/texmf-config' appended
resolvers       | resolving | locating list of 'home:texmf' (runtime)
(tree:///home:texmf)
resolvers       | methods | resolving, method 'locators', how 'uri',
handler 'tree', argument 'tree:///home:texmf'
resolvers       | trees | locator 'home:texmf' not found
resolvers       | resolving | locating list of
'selfautoparent:texmf-config' (cached)
resolvers       | methods | resolving, method 'locators', how 'uri',
handler 'file', argument 'selfautoparent:texmf-config'
resolvers       | files | file locator 'selfautoparent:texmf-config'
found as '/usr/local/texlive/2019/texmf-config'
resolvers       | resolving | locating list of
'selfautoparent:texmf-var' (cached)
resolvers       | methods | resolving, method 'locators', how 'uri',
handler 'file', argument 'selfautoparent:texmf-var'
resolvers       | files | file locator 'selfautoparent:texmf-var'
found as '/usr/local/texlive/2019/texmf-var'
resolvers       | resolving | locating list of
'selfautoparent:texmf-project' (cached)
resolvers       | methods | resolving, method 'locators', how 'uri',
handler 'file', argument 'selfautoparent:texmf-project'
resolvers       | files | file locator 'selfautoparent:texmf-project' not found
resolvers       | resolving | locating list of
'selfautoparent:texmf-fonts' (cached)
resolvers       | methods | resolving, method 'locators', how 'uri',
handler 'file', argument 'selfautoparent:texmf-fonts'
resolvers       | files | file locator 'selfautoparent:texmf-fonts' not found
resolvers       | resolving | locating list of
'/usr/local/texlive/texmf-local' (cached)
resolvers       | methods | resolving, method 'locators', how 'uri',
handler 'file', argument '/usr/local/texlive/texmf-local'
resolvers       | files | file locator
'/usr/local/texlive/texmf-local' found as
'/usr/local/texlive/texmf-local'
resolvers       | resolving | locating list of
'selfautoparent:texmf-dist' (cached)
resolvers       | methods | resolving, method 'locators', how 'uri',
handler 'file', argument 'selfautoparent:texmf-dist'
resolvers       | files | file locator 'selfautoparent:texmf-dist'
found as '/usr/local/texlive/2019/texmf-dist'
resolvers       | resolving |
resolvers       | methods | resolving, method 'generators', how 'uri',
handler 'file', argument 'home:.texlive2019/texmf-config'
resolvers       | expansions | using cached scan of path
'home:.texlive2019/texmf-config', branch
'home:.texlive2019/texmf-config'
resolvers       | methods | resolving, method 'generators', how 'uri',
handler 'file', argument 'selfautoparent:texmf-config'
resolvers       | expansions | scanning path
'selfautoparent:texmf-config', branch 'selfautoparent:texmf-config'
resolvers       | expansions | 1 files found on 0 directories with 1
uppercase remappings
resolvers       | methods | resolving, method 'generators', how 'uri',
handler 'file', argument 'selfautoparent:texmf-var'
resolvers       | expansions | scanning path
'selfautoparent:texmf-var', branch 'selfautoparent:texmf-var'
resolvers       | expansions | 143 files found on 40 directories with
1 uppercase remappings
resolvers       | methods | resolving, method 'generators', how 'uri',
handler 'file', argument '/usr/local/texlive/texmf-local'
resolvers       | expansions | scanning path
'/usr/local/texlive/texmf-local', branch
'/usr/local/texlive/texmf-local'
resolvers       | expansions | 1 files found on 27 directories with 1
uppercase remappings
resolvers       | methods | resolving, method 'generators', how 'uri',
handler 'file', argument 'selfautoparent:texmf-dist'
resolvers       | expansions | scanning path
'selfautoparent:texmf-dist', branch 'selfautoparent:texmf-dist'
resolvers       | globbing | confusing filename, name:
'custMatTransform.py', lower: 'custmattransform.py', already:
'CustMatTransform.py'
resolvers       | globbing | confusing filename, name:
'setCustomAnchor.py', lower: 'setcustomanchor.py', already:
'SetCustomAnchor.py'
resolvers       | globbing | confusing filename, name:
'widg_addLabel.py', lower: 'widg_addlabel.py', already:
'Widg_addLabel.py'
resolvers       | globbing | confusing filename, name:
'widg_addPolyOpt.py', lower: 'widg_addpolyopt.py', already:
'Widg_addPolyOpt.py'
resolvers       | globbing | confusing filename, name:
'widg_editBezier.py', lower: 'widg_editbezier.py', already:
'Widg_editBezier.py'
resolvers       | globbing | confusing filename, name: 'CHANGELOG',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'CHANGELOG',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'CHANGELOG',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'Readme.txt',
lower: 'readme.txt', already: 'README.txt'
resolvers       | globbing | confusing filename, name: 'License',
lower: 'license', already: 'LICENSE'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name:
'GUST-FONT-LICENSE.TXT', lower: 'gust-font-license.txt', already:
'GUST-FONT-LICENSE.txt'
resolvers       | globbing | confusing filename, name: 'CHANGELOG',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'License.txt',
lower: 'license.txt', already: 'LICENSE.txt'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'CHANGELOG',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name:
'Copyright.txt', lower: 'copyright.txt', already: 'COPYRIGHT.txt'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Manifest.txt',
lower: 'manifest.txt', already: 'MANIFEST.txt'
resolvers       | globbing | confusing filename, name: 'FONTLOG.txt',
lower: 'fontlog.txt', already: 'FontLog.txt'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'README.eng',
lower: 'readme.eng', already: 'README.ENG'
resolvers       | globbing | confusing filename, name: 'README.pol',
lower: 'readme.pol', already: 'README.POL'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'License.txt',
lower: 'license.txt', already: 'LICENSE.txt'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name:
'CHANGELOG.txt', lower: 'changelog.txt', already: 'ChangeLog.txt'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changelog',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'ANNOUNCE.txt',
lower: 'announce.txt', already: 'Announce.txt'
resolvers       | globbing | confusing filename, name: 'CHANGES.txt',
lower: 'changes.txt', already: 'Changes.txt'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'MANIFEST.TXT',
lower: 'manifest.txt', already: 'MANIFEST.txt'
resolvers       | globbing | confusing filename, name: 'ToDo', lower:
'todo', already: 'TODO'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'License.txt',
lower: 'license.txt', already: 'LICENSE.txt'
resolvers       | globbing | confusing filename, name: 'CHANGELOG',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'Copying',
lower: 'copying', already: 'COPYING'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'History',
lower: 'history', already: 'HISTORY'
resolvers       | globbing | confusing filename, name: 'License',
lower: 'license', already: 'LICENSE'
resolvers       | globbing | confusing filename, name: 'README-de',
lower: 'readme-de', already: 'README-DE'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'License.txt',
lower: 'license.txt', already: 'LICENSE.txt'
resolvers       | globbing | confusing filename, name: 'ANNOUNCE.txt',
lower: 'announce.txt', already: 'Announce.txt'
resolvers       | globbing | confusing filename, name: 'SRCFILEs.txt',
lower: 'srcfiles.txt', already: 'SrcFILEs.txt'
resolvers       | globbing | confusing filename, name: 'CHANGES.txt',
lower: 'changes.txt', already: 'Changes.txt'
resolvers       | globbing | confusing filename, name: 'License',
lower: 'license', already: 'LICENSE'
resolvers       | globbing | confusing filename, name: 'License',
lower: 'license', already: 'LICENSE'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'Bugs', lower:
'bugs', already: 'BUGS'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'CHANGELOG',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'LIESMICH.txt',
lower: 'liesmich.txt', already: 'Liesmich.txt'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'SRCFILEs.txt',
lower: 'srcfiles.txt', already: 'SrcFILEs.txt'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'History',
lower: 'history', already: 'HISTORY'
resolvers       | globbing | confusing filename, name: 'License',
lower: 'license', already: 'LICENSE'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'SRCFILEs.txt',
lower: 'srcfiles.txt', already: 'SrcFILEs.txt'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'License.txt',
lower: 'license.txt', already: 'LICENSE.txt'
resolvers       | globbing | confusing filename, name: 'ToDo', lower:
'todo', already: 'TODO'
resolvers       | globbing | confusing filename, name: 'LIESMICH.txt',
lower: 'liesmich.txt', already: 'Liesmich.txt'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'CHANGEs.txt',
lower: 'changes.txt', already: 'Changes.txt'
resolvers       | globbing | confusing filename, name: 'SRCFILEs.txt',
lower: 'srcfiles.txt', already: 'SrcFILEs.txt'
resolvers       | globbing | confusing filename, name: 'Copyright',
lower: 'copyright', already: 'COPYRIGHT'
resolvers       | globbing | confusing filename, name: 'License.txt',
lower: 'license.txt', already: 'LICENSE.txt'
resolvers       | globbing | confusing filename, name: 'ChangeLog.md',
lower: 'changelog.md', already: 'CHANGELOG.md'
resolvers       | globbing | confusing filename, name: 'CHANGELOG',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'ANNOUNCE',
lower: 'announce', already: 'Announce'
resolvers       | globbing | confusing filename, name: 'CHANGELOG',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'README.1st',
lower: 'readme.1st', already: 'README.1ST'
resolvers       | globbing | confusing filename, name: 'ANNOUNCE.txt',
lower: 'announce.txt', already: 'Announce.txt'
resolvers       | globbing | confusing filename, name: 'License.txt',
lower: 'license.txt', already: 'LICENSE.txt'
resolvers       | globbing | confusing filename, name: 'GNUmakefile',
lower: 'gnumakefile', already: 'GnuMakefile'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Readme.txt',
lower: 'readme.txt', already: 'README.txt'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'History',
lower: 'history', already: 'HISTORY'
resolvers       | globbing | confusing filename, name: 'License',
lower: 'license', already: 'LICENSE'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'ChangeLog.md',
lower: 'changelog.md', already: 'CHANGELOG.md'
resolvers       | globbing | confusing filename, name: 'LICENSE.TXT',
lower: 'license.txt', already: 'LICENSE.txt'
resolvers       | globbing | confusing filename, name: 'MANIFEST.TXT',
lower: 'manifest.txt', already: 'MANIFEST.txt'
resolvers       | globbing | confusing filename, name: 'TODO.TXT',
lower: 'todo.txt', already: 'ToDo.txt'
resolvers       | globbing | confusing filename, name: 'CHANGELOG',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'Changelog',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'VERSION.tex',
lower: 'version.tex', already: 'Version.tex'
resolvers       | globbing | confusing filename, name: 'CHANGELOG',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'Copyright',
lower: 'copyright', already: 'COPYRIGHT'
resolvers       | globbing | confusing filename, name: 'Copyright',
lower: 'copyright', already: 'COPYRIGHT'
resolvers       | globbing | confusing filename, name: 'History.txt',
lower: 'history.txt', already: 'HISTORY.TXT'
resolvers       | globbing | confusing filename, name: 'Manifest.txt',
lower: 'manifest.txt', already: 'MANIFEST.txt'
resolvers       | globbing | confusing filename, name: 'GNUmakefile',
lower: 'gnumakefile', already: 'GnuMakefile'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'License',
lower: 'license', already: 'LICENSE'
resolvers       | globbing | confusing filename, name: 'README.1st',
lower: 'readme.1st', already: 'README.1ST'
resolvers       | globbing | confusing filename, name: 'Changelog',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'License.txt',
lower: 'license.txt', already: 'LICENSE.txt'
resolvers       | globbing | confusing filename, name: 'License.txt',
lower: 'license.txt', already: 'LICENSE.txt'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'CHANGELOG',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'CHANGELOG',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'README.PL',
lower: 'readme.pl', already: 'README.pl'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'History',
lower: 'history', already: 'HISTORY'
resolvers       | globbing | confusing filename, name: 'License',
lower: 'license', already: 'LICENSE'
resolvers       | globbing | confusing filename, name: 'HISTORY.txt',
lower: 'history.txt', already: 'HISTORY.TXT'
resolvers       | globbing | confusing filename, name: 'Changelog',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name:
'README.TeXLive', lower: 'readme.texlive', already: 'README.TEXLIVE'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name:
'Contributors.md', lower: 'contributors.md', already:
'CONTRIBUTORS.md'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'CHANGELOG',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'logo.JPG',
lower: 'logo.jpg', already: 'Logo.jpg'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'License.txt',
lower: 'license.txt', already: 'LICENSE.txt'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'Changelog',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'Changelog',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'TODO.txt',
lower: 'todo.txt', already: 'ToDo.txt'
resolvers       | globbing | confusing filename, name: 'NEWS', lower:
'news', already: 'News'
resolvers       | globbing | confusing filename, name: 'GNUmakefile',
lower: 'gnumakefile', already: 'GnuMakefile'
resolvers       | globbing | confusing filename, name: 'CHANGELOG',
lower: 'changelog', already: 'ChangeLog'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | globbing | confusing filename, name: 'Changes',
lower: 'changes', already: 'CHANGES'
resolvers       | expansions | 190047 files found on 13428 directories
with 68175 uppercase remappings
resolvers       | methods | resolving, method 'generators', how 'uri',
handler 'file', argument 'home:.texlive2019/texmf-config'
resolvers       | expansions | using cached scan of path
'home:.texlive2019/texmf-config', branch
'home:.texlive2019/texmf-config'
resolvers       | resolving |
resolvers       | resolving | not saving runtime tree
'home:.texlive2019/texmf-config'
resolvers       | resolving | saving tree 'selfautoparent:texmf-config'
resolvers       | caches | hashing tree 'selfautoparent:texmf-config',
hash '9d8576a18c59fc65c42b8c6d0dc5211a'
resolvers       | caching | preparing 'files' for 'selfautoparent:texmf-config'
resolvers       | caching | category 'files', cachename
'selfautoparent:texmf-config' saved in
'/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/9d8576a18c59fc65c42b8c6d0dc5211a.lua'
system          | lua | compiling
'/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/9d8576a18c59fc65c42b8c6d0dc5211a.lua'
into '/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/9d8576a18c59fc65c42b8c6d0dc5211a.luc'
system          | lua | dumping
'/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/9d8576a18c59fc65c42b8c6d0dc5211a.lua'
into '/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/9d8576a18c59fc65c42b8c6d0dc5211a.luc'
stripped
resolvers       | caching | 'files' compiled to
'/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/9d8576a18c59fc65c42b8c6d0dc5211a.luc'
resolvers       | resolving | saving tree 'selfautoparent:texmf-var'
resolvers       | caches | hashing tree 'selfautoparent:texmf-var',
hash '80ba17e36177c570c2b7c4882672efc5'
resolvers       | caching | preparing 'files' for 'selfautoparent:texmf-var'
resolvers       | caching | category 'files', cachename
'selfautoparent:texmf-var' saved in
'/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/80ba17e36177c570c2b7c4882672efc5.lua'
system          | lua | compiling
'/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/80ba17e36177c570c2b7c4882672efc5.lua'
into '/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/80ba17e36177c570c2b7c4882672efc5.luc'
system          | lua | dumping
'/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/80ba17e36177c570c2b7c4882672efc5.lua'
into '/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/80ba17e36177c570c2b7c4882672efc5.luc'
stripped
resolvers       | caching | 'files' compiled to
'/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/80ba17e36177c570c2b7c4882672efc5.luc'
resolvers       | resolving | saving tree '/usr/local/texlive/texmf-local'
resolvers       | caches | hashing tree
'/usr/local/texlive/texmf-local', hash
'1f08e3a96247a4bd25d903ca1cb00c0e'
resolvers       | caching | preparing 'files' for
'/usr/local/texlive/texmf-local'
resolvers       | caching | category 'files', cachename
'/usr/local/texlive/texmf-local' saved in
'/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/1f08e3a96247a4bd25d903ca1cb00c0e.lua'
system          | lua | compiling
'/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/1f08e3a96247a4bd25d903ca1cb00c0e.lua'
into '/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/1f08e3a96247a4bd25d903ca1cb00c0e.luc'
system          | lua | dumping
'/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/1f08e3a96247a4bd25d903ca1cb00c0e.lua'
into '/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/1f08e3a96247a4bd25d903ca1cb00c0e.luc'
stripped
resolvers       | caching | 'files' compiled to
'/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/1f08e3a96247a4bd25d903ca1cb00c0e.luc'
resolvers       | resolving | saving tree 'selfautoparent:texmf-dist'
resolvers       | caches | hashing tree 'selfautoparent:texmf-dist',
hash '929f6dbc83f6d3b65dab91f1efa4aacb'
resolvers       | caching | preparing 'files' for 'selfautoparent:texmf-dist'
resolvers       | caching | category 'files', cachename
'selfautoparent:texmf-dist' saved in
'/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/929f6dbc83f6d3b65dab91f1efa4aacb.lua'
system          | lua | compiling
'/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/929f6dbc83f6d3b65dab91f1efa4aacb.lua'
into '/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/929f6dbc83f6d3b65dab91f1efa4aacb.luc'
system          | lua | dumping
'/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/929f6dbc83f6d3b65dab91f1efa4aacb.lua'
into '/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/929f6dbc83f6d3b65dab91f1efa4aacb.luc'
stripped
resolvers       | caching | 'files' compiled to
'/usr/local/texlive/2019/texmf-var/luatex-cache/context/a86c089b384a3076dc514ba966a1fac9/trees/929f6dbc83f6d3b65dab91f1efa4aacb.luc'
resolvers       | resolving | not saving runtime tree
'home:.texlive2019/texmf-config'
system          | total runtime: 53.091 seconds

[root at worktex ~] # context
mtx-context     | ConTeXt Process Management 1.02
mtx-context     |
mtx-context     | basic options:
mtx-context     |
mtx-context     | --run                  process (one or more) files
(default action)
mtx-context     | --make                 create context formats
mtx-context     |
mtx-context     | --ctx=name             use ctx file (process
management specification)
mtx-context     | --noctx                ignore ctx directives and flags
mtx-context     | --interface            use specified user interface
(default: en)
mtx-context     |
mtx-context     | --autopdf              close pdf file in viewer and
start pdf viewer afterwards
mtx-context     | --purge                purge files either or not
after a run (--pattern=...)
mtx-context     | --purgeall             purge all files either or not
after a run (--pattern=...)
mtx-context     |
mtx-context     | --usemodule=list       load the given module or
style, normally part of the distribution
mtx-context     | --environment=list     load the given environment
file first (document styles)
mtx-context     | --mode=list            enable given the modes
(conditional processing in styles)
mtx-context     | --path=list            also consult the given paths
when files are looked for
mtx-context     | --arguments=list       set variables that can be
consulted during a run (key/value pairs)
mtx-context     | --randomseed=number    set the randomseed
mtx-context     | --result=name          rename the resulting output
to the given name
mtx-context     | --trackers=list        set tracker variables (show
list with --showtrackers)
mtx-context     | --directives=list      set directive variables (show
list with --showdirectives)
mtx-context     | --silent=list          disable logcatgories (show
list with --showlogcategories)
mtx-context     | --strip                strip Lua code (only meant
for production where no errors are expected)
mtx-context     | --errors=list          show errors at the end of a
run, quit when in list (also when ----silent)
mtx-context     | --noconsole            disable logging to the
console (logfile only)
mtx-context     | --purgeresult          purge result file before run
mtx-context     |
mtx-context     | --forcexml             force xml stub
mtx-context     | --forcecld             force cld (context lua document) stub
mtx-context     | --forcelua             force lua stub (like texlua)
mtx-context     | --forcemp              force mp stub
mtx-context     |
mtx-context     | --arrange              run extra imposition pass,
given that the style sets up imposition
mtx-context     | --noarrange            ignore imposition
specifications in the style
mtx-context     |
mtx-context     | --jit                  use luajittex with jit turned
off (only use the faster virtual machine)
mtx-context     | --jiton                use luajittex with jit turned
on (in most cases not faster, even slower)
mtx-context     |
mtx-context     | --once                 only run once (no multipass
data file is produced)
mtx-context     | --runs                 process at most this many times
mtx-context     | --forcedruns           process this many times
(permits for optimization trial runs)
mtx-context     |
mtx-context     | --batchmode            run without stopping and do
not show messages on the console
mtx-context     | --nonstopmode          run without stopping
mtx-context     | --nosynctex            never initializes synctex
(for production runs)
mtx-context     | --synctex              run with synctex enabled
(better use \setupsynctex[state=start]
mtx-context     | --nodates              omit runtime dates in pdf
file (optional value: a number (this 1970 offset time) or string
"YYYY-MM-DD HH:MM")
mtx-context     | --nocompression        forcefully turns off
compression in the backend
mtx-context     | --trailerid            alternative trailer id (or
constant one)
mtx-context     |
mtx-context     | --generate             generate file database etc.
(as luatools does)
mtx-context     | --paranoid             do not descend to .. and ../..
mtx-context     | --version              report installed context version
mtx-context     |
mtx-context     | --global               assume given file present elsewhere
mtx-context     | --nofile               use dummy file as jobname
mtx-context     |
mtx-context     |
mtx-context     | More information about ConTeXt and the tools that
come with it can be found at:
mtx-context     |
mtx-context     | maillist : ntg-context at ntg.nl /
http://www.ntg.nl/mailman/listinfo/ntg-context
mtx-context     | webpage  : http://www.pragma-ade.nl / http://tex.aanhet.net
mtx-context     | wiki     : http://contextgarden.net

What is the correct way to configure this?

From borisv at lk.net  Wed Oct 16 18:49:46 2019
From: borisv at lk.net (Boris Veytsman)
Date: Wed, 16 Oct 2019 09:49:46 -0700
Subject: Aleph
In-Reply-To: <20191016091513.v33h5x6ialdube7x@burischnitzel.preining.info>
 (message from Norbert Preining on Wed, 16 Oct 2019 18:15:13 +0900)
References: <20191016091513.v33h5x6ialdube7x@burischnitzel.preining.info>
Message-ID: <201910161649.x9GGnkqs018262@bilbo.localnet>

NP> Date: Wed, 16 Oct 2019 18:15:13 +0900
NP> From: Norbert Preining <norbert at preining.info>


NP> (@Petra: please see attached PDFs, it shows that LuaTeX with Noto
NP> Tibetan Serif actually displays all your examples correctly!)

NP> thanks for your hints, that helped a lot to improve a bit.

I wonder whether we can publish a paper in TUGboat about typesetting
Tibetian in TeX: from Aleph to Lua/XeTeX.  It would be sad if this is
buried in list archives.


-- 
Good luck

-Boris

Real programmers don't draw flowcharts.  Flowcharts are, after all, the
illiterate's form of documentation.  Cavemen drew flowcharts; look how
much good it did them.

From lomov.vl at yandex.ru  Thu Oct 17 04:19:58 2019
From: lomov.vl at yandex.ru (Vladimir Lomov)
Date: Thu, 17 Oct 2019 10:19:58 +0800
Subject: How to configure ConText in TeXLive 2019
In-Reply-To: <CANeU4n9J96ETq9oHqv4WifjoYrFEpYvong4i9etnCMU3c6sDJg@mail.gmail.com>
References: <mailman.259.1571232394.2435.tex-live@tug.org>
 <CANeU4n9J96ETq9oHqv4WifjoYrFEpYvong4i9etnCMU3c6sDJg@mail.gmail.com>
Message-ID: <20191017021958.GE1540@smoon.bkoty.ru>

Hello,
** Pablo Gonz?lez L <pablgonz at educarchile.cl> [2019-10-16 12:59:39 -0300]:

> Hi, I'm trying to use ConText in TeXLive 2019 (updated), but I'm having some
> problems and I haven't been able to solve them after a while searching the
> net. I use fedora 30 and win10 and in neither of them I have managed to make
> it work.

Check if your environment has variables named as TEX*. I have TEXMFCNF
in my environment that causes the similar issue but when I unset it and
run

  $ mtxrun --generate; context --make ; context --version

I see context version.

> ## output win10
> C:\Users\pablo>kpsewhich -var-brace-value=TEXMF
> D:/ltxcole/stycole/;C:/Users/pablo/.texlive2019/texmf-config;C:/Users/pablo/.texlive2019/texmf-var;C:/Users/pablo/texmf;!!C:/texlive/texmf-local;!!C:/texlive/2019/texmf-config;!!C:/texlive/2019/texmf-var;!!C:/texlive/2019/texmf-dist
> 
> C:\Users\pablo>kpsewhich -all texmf.cnf
> c:/Users/pablo/texmf.cnf

I suspect that problem could be with that file. Check if your could run
context without that file, also check if root has something similar.

> c:/texlive/2019/texmf.cnf
> c:/texlive/2019/texmf-dist/web2c/texmf.cnf
> 
> C:\Users\pablo>more texmf.cnf
> TEXMFAUXTREES = D:/ltxcole/stycole/,

[...] 

> The strange thing is that as a user `root` does work.

See my suggestion above.

[...]

IIRC, this is context "feature", it doesn't use kpsewhich system and
uses it's own system. While kpsewhich joins all texmf.cnf files (and
trees) context system do things differently, if I'm not mistaken, it
reads only first file.

---
WBR, Vladimir Lomov

-- 
Taxes, n.:
	Of life's two certainties, the only one for which you can get
	an extension.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 228 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191017/1acfec09/attachment.sig>

From pablgonz at educarchile.cl  Thu Oct 17 05:47:39 2019
From: pablgonz at educarchile.cl (=?UTF-8?Q?Pablo_Gonz=C3=A1lez_L?=)
Date: Wed, 16 Oct 2019 23:47:39 -0400
Subject: How to configure ConText in TeXLive 2019
In-Reply-To: <20191017021958.GE1540@smoon.bkoty.ru>
References: <mailman.259.1571232394.2435.tex-live@tug.org>
 <CANeU4n9J96ETq9oHqv4WifjoYrFEpYvong4i9etnCMU3c6sDJg@mail.gmail.com>
 <20191017021958.GE1540@smoon.bkoty.ru>
Message-ID: <CANeU4n-UhEnJnBj42rQ70gRrgEaFE2whJr_zfKbJq-WNonx13Q@mail.gmail.com>

> El mi?., 16 oct. 2019 a las 22:20, Vladimir Lomov (<lomov.vl at yandex.ru>) escribi?:
>
> Check if your environment has variables named as TEX*. I have TEXMFCNF
> in my environment that causes the similar issue but when I unset it and
> run
That's where the problem was. My .bashrc file contained:
export TEXMFCNF='~/texmf:'

>   $ mtxrun --generate; context --make ; context --version
>
> I see context version.
mtx-context     | ConTeXt Process Management 1.02
mtx-context     |
mtx-context     | main context file:
/usr/local/texlive/2019/texmf-dist/tex/context/base/mkiv/context.mkiv
mtx-context     | current version: 2019.03.21 21:39

Now everything goes OK with context, but, I can no longer use my user
configuration for TEXMFAUXTREES :(
Any way to make both work?
Saludos


From P.Taylor at rhul.ac.uk  Thu Oct 17 23:46:32 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Thu, 17 Oct 2019 21:46:32 +0000
Subject: Aleph
In-Reply-To: <CAC1phyY=iZPQO1xaJ+nV2ESe6je7b9kprzNKWDKYv_xj7fEjDQ@mail.gmail.com>
References: <4fbbbdbc-252d-1eac-18ea-ab06235e17e4@morningstar2.co.uk>
 <201910142100.x9EL0pxf004792@freefriends.org>
 <20191014221808.k3dwp6u5fv3ukmeg@burischnitzel.preining.info>
 <k725kjv9l17n.dlg@nililand.de>
 <20191015083248.afdoaevxgofczlbh@burischnitzel.preining.info>
 <20191015121518.ffln7dizr6nkule5@yoga>
 <8deba746-7c95-9320-206a-825beae0023a@Rhul.Ac.Uk>
 <20191015124844.op2gsemxseg7r7kp@yoga>
 <0dcc9c32-b7b4-972c-4251-ec9a425d53d9@Rhul.Ac.Uk>
 <ca69d157-8669-875c-3234-6a8d2eeb377e@Rhul.Ac.Uk>
 <20191015145601.a6ejrs6p66wtt6rd@burischnitzel.preining.info>
 <9a87c84e-4186-6a4a-ed15-286431289bec@Rhul.Ac.Uk>
 <2f1a74f7-2e7d-f9c5-04c6-55fed0b6c482@Rhul.Ac.Uk>
 <CAC1phyY=iZPQO1xaJ+nV2ESe6je7b9kprzNKWDKYv_xj7fEjDQ@mail.gmail.com>
Message-ID: <1b052257-2405-3ae3-4807-085365a4fa1d@Rhul.Ac.Uk>

Zden?k Wagner wrote:


It might help to enclose a consonant with its vowel into braces so
that TikZ considers it one token and does not insert anything in
between.


Thank you for this most helpful suggestion, Zden?k.  As I noted in my earlier reply, I was already using this technique for some other languages, but at your suggestion am now using it most successfully for Tibetan as you can see from the attached.  My grouping is as follows ? it is probably overkill, but helps me to identify the semantic grouping.
{?????}{???}{????}{????}{??}?
Philip Taylor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191017/37727c25/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Involute-gold-gamma.pdf
Type: application/pdf
Size: 159572 bytes
Desc: Involute-gold-gamma.pdf
URL: <https://tug.org/pipermail/tex-live/attachments/20191017/37727c25/attachment-0001.pdf>

From joseph.wright at morningstar2.co.uk  Fri Oct 18 19:40:07 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Fri, 18 Oct 2019 18:40:07 +0100
Subject: \pdffilesize and spaces
Message-ID: <962551ee-4680-ec40-24e5-f4d3e0f45098@morningstar2.co.uk>

Hello all,

Tracking down the cause of 
https://tex.stackexchange.com/questions/512768, I spot a bug in 
\pdffilesize. This leads If you create a file "file_1.tex" and try

\edef\test{\pdffilesize{file_1.tex}}\show\test
\edef\test{\pdffilesize{file_1.tex }}\show\test
\edef\test{\pdffilesize{"file_1.tex "}}\show\test

all three results are the same. However, if you try the same with a 
Lua-based emulation in LuaTeX, it does what it 'should' and doesn't find 
the file with a space in the name.

This looks like a bug in \pdffilesize (and perhaps other pdfTeX file 
utilities): I'll try to track it down.

Joseph

From d.p.carlisle at gmail.com  Fri Oct 18 20:37:36 2019
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Fri, 18 Oct 2019 19:37:36 +0100
Subject: \pdffilesize and spaces
In-Reply-To: <962551ee-4680-ec40-24e5-f4d3e0f45098@morningstar2.co.uk>
References: <962551ee-4680-ec40-24e5-f4d3e0f45098@morningstar2.co.uk>
Message-ID: <CAEW6iOgwJs3ZP-3FUnB40EBqWX+DCoPF1ErXb1V=7Hr_k93y=A@mail.gmail.com>

I do not see that with cygwin texlve the last two find th efile with a
space in its namewith pdftex, and with xetex, the middle one does and
the last finds no file at all

On Fri, 18 Oct 2019 at 18:40, Joseph Wright
<joseph.wright at morningstar2.co.uk> wrote:
>
> Hello all,
>
> Tracking down the cause of
> https://tex.stackexchange.com/questions/512768, I spot a bug in
> \pdffilesize. This leads If you create a file "file_1.tex" and try
>
> \edef\test{\pdffilesize{file_1.tex}}\show\test
> \edef\test{\pdffilesize{file_1.tex }}\show\test
> \edef\test{\pdffilesize{"file_1.tex "}}\show\test
>
> all three results are the same. However, if you try the same with a
> Lua-based emulation in LuaTeX, it does what it 'should' and doesn't find
> the file with a space in the name.
>
> This looks like a bug in \pdffilesize (and perhaps other pdfTeX file
> utilities): I'll try to track it down.
>
> Joseph
> _______________________________________________
> Latex-team mailing list
> Latex-team at latex-project.org
> https://lists.dante.de/mailman/listinfo/latex-team

From P.Taylor at rhul.ac.uk  Fri Oct 18 22:05:41 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Fri, 18 Oct 2019 20:05:41 +0000
Subject: \pdffilesize and spaces
In-Reply-To: <962551ee-4680-ec40-24e5-f4d3e0f45098@morningstar2.co.uk>
References: <962551ee-4680-ec40-24e5-f4d3e0f45098@morningstar2.co.uk>
Message-ID: <f29f483f-1a3f-91b9-fd5f-e5286fe94033@Rhul.Ac.Uk>

\def \show #1{\message {\string #1 = #1}}

\edef \test {\pdffilesize {file_1.tex}} \show \test

\edef \test {\pdffilesize {file_1.tex }} \show \test

\edef \test {\pdffilesize {"file_1"}} \show \test

\edef \test {\pdffilesize {"file_1 "}} \show \test

\end

->

This is pdfTeX, Version 3.14159265-2.6-1.40.17 (TeX Live 2016/W32TeX) (preloaded format=pdftex)

restricted \write18 enabled.

entering extended mode

(./file_1.tex \test = 259 \test = 259 \test = 259 \test = )

No pages of output.

Transcript written on file_1.log.

UNIV: Windows 7 Enterprise (64 bit), TeX Live 2016, PdfTeX.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191018/9fad05f3/attachment.html>

From P.Taylor at rhul.ac.uk  Fri Oct 18 22:17:20 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Fri, 18 Oct 2019 20:17:20 +0000
Subject: \pdffilesize and spaces
In-Reply-To: <f29f483f-1a3f-91b9-fd5f-e5286fe94033@Rhul.Ac.Uk>
References: <962551ee-4680-ec40-24e5-f4d3e0f45098@morningstar2.co.uk>
 <f29f483f-1a3f-91b9-fd5f-e5286fe94033@Rhul.Ac.Uk>
Message-ID: <0db3122c-6c35-c13d-57e2-804f03830650@Rhul.Ac.Uk>

Also :

\def \show #1{\message {\string #1 = #1}}

\edef \test {\pdffilesize {"file_1.t e x"}} \show \test

\edef \test {\pdffilesize {"file_1.t e x "}} \show \test

\edef \test {\pdffilesize {"file_1.t e x" }} \show \test

\edef \test {\pdffilesize {"file_1.t e x " }} \show \test

\end

->

This is pdfTeX, Version 3.14159265-2.6-1.40.17 (TeX Live 2016/W32TeX) (preloaded format=pdftex)

restricted \write18 enabled.

entering extended mode

(./file_1.t e x \test = 281 \test = 281 \test = 281 \test = 281 )

No pages of output.

Transcript written on file_1.log.

UNIV: as before.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191018/022015c6/attachment.html>

From joseph.wright at morningstar2.co.uk  Fri Oct 18 23:00:03 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Fri, 18 Oct 2019 22:00:03 +0100
Subject: \pdffilesize and spaces
In-Reply-To: <962551ee-4680-ec40-24e5-f4d3e0f45098@morningstar2.co.uk>
References: <962551ee-4680-ec40-24e5-f4d3e0f45098@morningstar2.co.uk>
Message-ID: <203bf620-4e7f-cade-010e-095652a34362@morningstar2.co.uk>

On 18/10/2019 18:40, Joseph Wright wrote:
> Hello all,
> 
> Tracking down the cause of 
> https://tex.stackexchange.com/questions/512768, I spot a bug in 
> \pdffilesize. This leads If you create a file "file_1.tex" and try
> 
> \edef\test{\pdffilesize{file_1.tex}}\show\test
> \edef\test{\pdffilesize{file_1.tex }}\show\test
> \edef\test{\pdffilesize{"file_1.tex "}}\show\test

To be clear, I expected


 > \test=macro:
-><size of file_1.tex>.
l.1 \edef\test{\pdffilesize{file_1.tex}}\show\test

?
 > \test=macro:
->.
l.2 \edef\test{\pdffilesize{file_1.tex }}\show\test

?
 > \test=macro:
->.
l.2 \edef\test{\pdffilesize{"file_1.tex "}}\show\test

as I don't have the file with a space in the name.

Joseph

From karl at freefriends.org  Fri Oct 18 23:26:24 2019
From: karl at freefriends.org (Karl Berry)
Date: Fri, 18 Oct 2019 15:26:24 -0600
Subject: \pdffilesize and spaces
In-Reply-To: <962551ee-4680-ec40-24e5-f4d3e0f45098@morningstar2.co.uk>
Message-ID: <201910182126.x9ILQOfQ025399@freefriends.org>

    \edef\test{\pdffilesize{file_1.tex }}\show\test
    \edef\test{\pdffilesize{"file_1.tex "}}\show\test

Fixes are welcome (sorry, I didn't see the reason in pdf_file_size_code:
and show_token_list offhand), but (I doubt any of the following is news
to you) ... I think there is no way to use \pdffilesize etc. on
arbitrary filenames. Maybe they can be made to work with one space, but
2+ consecutive spaces in the input will get transmuted into one by TeX's
scanner before the primitive over sees it, if I understand
correctly. Catcode 9 characters will likewise disappear, etc., etc.

And the quotes are a whole problem in themselves, since now you can't
find filenames containing quotes. For example,
\pdffilesize{"file_1.tex"} should arguably fail unless the filename has
quotes. (I am not sure where the quotes are read in this case.)

It's all so broken, and has been since day one.  Some difference between
Lua (which I suppose can get all this right, since it can, I assume, see
the actual input characters, not just the token stream) and the other
engines is probably inevitable. -k


From joseph.wright at morningstar2.co.uk  Fri Oct 18 23:45:20 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Fri, 18 Oct 2019 22:45:20 +0100
Subject: \pdffilesize and spaces
In-Reply-To: <201910182126.x9ILQOfQ025399@freefriends.org>
References: <201910182126.x9ILQOfQ025399@freefriends.org>
Message-ID: <d007f885-a266-0164-6c20-1eb6ccea6ee5@morningstar2.co.uk>

On 18/10/2019 22:26, Karl Berry wrote:
> And the quotes are a whole problem in themselves, since now you can't
> find filenames containing quotes. For example,
> \pdffilesize{"file_1.tex"} should arguably fail unless the filename has
> quotes. (I am not sure where the quotes are read in this case.)

As a 'Windows person', quotes around file names are just 'part of 
filenames' and are equivalent: "<filename>" = <filename>. It's 
more-or-less impossible to create a file name containing double quote 
mark (See 
https://docs.microsoft.com/en-gb/windows/win32/fileio/naming-a-file?redirectedfrom=MSDN 
- there are quite a few reserved chars.)

Joseph


From joseph.wright at morningstar2.co.uk  Fri Oct 18 23:46:46 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Fri, 18 Oct 2019 22:46:46 +0100
Subject: \pdffilesize and spaces
In-Reply-To: <201910182126.x9ILQOfQ025399@freefriends.org>
References: <201910182126.x9ILQOfQ025399@freefriends.org>
Message-ID: <7f8803cf-197d-16f5-3d55-d2940e9ea219@morningstar2.co.uk>

On 18/10/2019 22:26, Karl Berry wrote:
>      \edef\test{\pdffilesize{file_1.tex }}\show\test
>      \edef\test{\pdffilesize{"file_1.tex "}}\show\test
> 
> Fixes are welcome (sorry, I didn't see the reason in pdf_file_size_code:
> and show_token_list offhand), but (I doubt any of the following is news
> to you) ... I think there is no way to use \pdffilesize etc. on
> arbitrary filenames. Maybe they can be made to work with one space, but
> 2+ consecutive spaces in the input will get transmuted into one by TeX's
> scanner before the primitive over sees it, if I understand
> correctly. Catcode 9 characters will likewise disappear, etc., etc.

Sure: I'm thinking of the detokenized name, after TeX has done 'stuff'. 
I'll see if I can work out where the issue is: I have a feeling it's not 
in the WEB but in the C ...

Joseph


From joseph.wright at morningstar2.co.uk  Sat Oct 19 00:02:25 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Fri, 18 Oct 2019 23:02:25 +0100
Subject: \pdffilesize and spaces
In-Reply-To: <7f8803cf-197d-16f5-3d55-d2940e9ea219@morningstar2.co.uk>
References: <201910182126.x9ILQOfQ025399@freefriends.org>
 <7f8803cf-197d-16f5-3d55-d2940e9ea219@morningstar2.co.uk>
Message-ID: <593085c8-3f78-dbfe-9878-0fbffa460bce@morningstar2.co.uk>

On 18/10/2019 22:46, Joseph Wright wrote:
> On 18/10/2019 22:26, Karl Berry wrote:
>> ???? \edef\test{\pdffilesize{file_1.tex }}\show\test
>> ???? \edef\test{\pdffilesize{"file_1.tex "}}\show\test
>>
>> Fixes are welcome (sorry, I didn't see the reason in pdf_file_size_code:
>> and show_token_list offhand), but (I doubt any of the following is news
>> to you) ... I think there is no way to use \pdffilesize etc. on
>> arbitrary filenames. Maybe they can be made to work with one space, but
>> 2+ consecutive spaces in the input will get transmuted into one by TeX's
>> scanner before the primitive over sees it, if I understand
>> correctly. Catcode 9 characters will likewise disappear, etc., etc.
> 
> Sure: I'm thinking of the detokenized name, after TeX has done 'stuff'. 
> I'll see if I can work out where the issue is: I have a feeling it's not 
> in the WEB but in the C ...

In particular, in texmfmp.c:

string
find_input_file(integer s)
{
     string filename;

#if defined(XeTeX)
     filename = gettexstring(s);
#else
     filename = makecfilename(s);
#endif

which means that XeTeX gives a different result to pdfTeX ... (at least 
for my simple test, XeTeX is 'correct', but I've no ideas why the 
difference in path here).

Joseph

From karl at freefriends.org  Sat Oct 19 00:30:26 2019
From: karl at freefriends.org (Karl Berry)
Date: Fri, 18 Oct 2019 16:30:26 -0600
Subject: \pdffilesize and spaces
In-Reply-To: <593085c8-3f78-dbfe-9878-0fbffa460bce@morningstar2.co.uk>
Message-ID: <201910182230.x9IMUQf7028135@freefriends.org>

    #if defined(XeTeX)
         filename = gettexstring(s);
    #else
         filename = makecfilename(s);
    #endif

The comment on gettexstring is:

  #ifdef XeTeX /* the string pool is UTF-16 but we want a UTF-8 string */
  string
  gettexstring (strnumber s)

And then it plays around with the bytes.
So evidently we can't just use gettexstring.

However, I don't see where spaces get removed in makecfilename.
Looks like only quotes. -k

From joseph.wright at morningstar2.co.uk  Sat Oct 19 08:44:40 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Sat, 19 Oct 2019 07:44:40 +0100
Subject: \pdffilesize and spaces
In-Reply-To: <d007f885-a266-0164-6c20-1eb6ccea6ee5@morningstar2.co.uk>
References: <201910182126.x9ILQOfQ025399@freefriends.org>
 <d007f885-a266-0164-6c20-1eb6ccea6ee5@morningstar2.co.uk>
Message-ID: <840498af-e044-8883-02bc-bc14e6c0972c@morningstar2.co.uk>

On 18/10/2019 22:45, Joseph Wright wrote:
> On 18/10/2019 22:26, Karl Berry wrote:
>> And the quotes are a whole problem in themselves, since now you can't
>> find filenames containing quotes. For example,
>> \pdffilesize{"file_1.tex"} should arguably fail unless the filename has
>> quotes. (I am not sure where the quotes are read in this case.)
> 
> As a 'Windows person', quotes around file names are just 'part of 
> filenames' and are equivalent: "<filename>" = <filename>. It's 
> more-or-less impossible to create a file name containing double quote 
> mark (See 
> https://docs.microsoft.com/en-gb/windows/win32/fileio/naming-a-file?redirectedfrom=MSDN 
> - there are quite a few reserved chars.)
> 
> Joseph
> 

David points out off-list that various Windows functions ignore trailing 
spaces in the extension of a file name: certainly this happens at the 
Command Prompt. Probably we are seeing that behaviour via API calls: 
probably best is for the macro layer to remove trailing spaces.

Joseph

From amunn at gmx.com  Sat Oct 19 15:33:35 2019
From: amunn at gmx.com (Alan Munn)
Date: Sat, 19 Oct 2019 09:33:35 -0400
Subject: pdfcrop bounding box problem
Message-ID: <5DAB10AF.7030206@gmx.com>

Hi, the following document, processed with any engine, crops improperly.
Perhaps this is a ghostscript problem, but I'll post it here in case
anyone can figure it out.

\documentclass{article}
\pagestyle{empty}
\begin{document}
\shipout\vbox
{\parbox{1.75in}{%
\centering
\raggedleft
\vspace{.25in}\par\fontsize{11}{13}\selectfont
Some Text\par\vspace{12pt}
\fontsize{10}{12}\selectfont
Some more text\par%
\vspace{12pt}\fontsize{8}{10}\selectfont
Even more text\par
\vspace{10pt}
Something else\par}
}
\end{document}

The output of pdfcrop (TL 2019, running on a Mac).  David Carlisle also
replicated this behaviour using cygwin.

pdfcrop --verbose pdfcrop-mwe.pdf
PDFCROP 1.38, 2012/11/02 - Copyright (c) 2002-2012 by Heiko Oberdiek.
* PDF header: %PDF-1.5
* Running ghostscript for BoundingBox calculation ...
GPL Ghostscript 9.27 (2019-04-04)
Copyright (C) 2018 Artifex Software, Inc.  All rights reserved.
This software is supplied under the GNU AGPLv3 and comes with NO WARRANTY:
see the file COPYING for details.
Processing pages 1 through 1.
Page 1
%%BoundingBox: 139 624 210 695
* Page 1: 139 624 210 695
%%HiResBoundingBox: 139.805996 624.095981 209.519994 694.745979
* Running pdfTeX ...
This is pdfTeX, Version 3.14159265-2.6-1.40.20 (TeX Live 2019)
(preloaded format=pdftex)
entering extended mode
(./tmp-pdfcrop-53360.tex [1 <./pdfcrop-mwe.pdf>] )
Output written on tmp-pdfcrop-53360.pdf (1 page, 22476 bytes).
Transcript written on tmp-pdfcrop-53360.log.
==> 1 page written on `pdfcrop-mwe-crop.pdf'.





From amunn at gmx.com  Sat Oct 19 17:06:07 2019
From: amunn at gmx.com (Alan Munn)
Date: Sat, 19 Oct 2019 11:06:07 -0400
Subject: pdfcrop bounding box problem
In-Reply-To: <5DAB10AF.7030206@gmx.com>
References: <5DAB10AF.7030206@gmx.com>
Message-ID: <5DAB265F.50500@gmx.com>

This is a ghostscript bug. Updating to the latest version (9.50) fixes
it.  Doe TL have a policy on how these sorts of updates are handled? As
I understand it, tlmgr doesn't update ghostscript, but MacTeX at least
installs v9.27.

Alan

Alan Munn wrote:
> Hi, the following document, processed with any engine, crops improperly.
> Perhaps this is a ghostscript problem, but I'll post it here in case
> anyone can figure it out.
>
> \documentclass{article}
> \pagestyle{empty}
> \begin{document}
> \shipout\vbox
> {\parbox{1.75in}{%
> \centering
> \raggedleft
> \vspace{.25in}\par\fontsize{11}{13}\selectfont
> Some Text\par\vspace{12pt}
> \fontsize{10}{12}\selectfont
> Some more text\par%
> \vspace{12pt}\fontsize{8}{10}\selectfont
> Even more text\par
> \vspace{10pt}
> Something else\par}
> }
> \end{document}
>
> The output of pdfcrop (TL 2019, running on a Mac).  David Carlisle also
> replicated this behaviour using cygwin.
>
> pdfcrop --verbose pdfcrop-mwe.pdf
> PDFCROP 1.38, 2012/11/02 - Copyright (c) 2002-2012 by Heiko Oberdiek.
> * PDF header: %PDF-1.5
> * Running ghostscript for BoundingBox calculation ...
> GPL Ghostscript 9.27 (2019-04-04)
> Copyright (C) 2018 Artifex Software, Inc.  All rights reserved.
> This software is supplied under the GNU AGPLv3 and comes with NO
> WARRANTY:
> see the file COPYING for details.
> Processing pages 1 through 1.
> Page 1
> %%BoundingBox: 139 624 210 695
> * Page 1: 139 624 210 695
> %%HiResBoundingBox: 139.805996 624.095981 209.519994 694.745979
> * Running pdfTeX ...
> This is pdfTeX, Version 3.14159265-2.6-1.40.20 (TeX Live 2019)
> (preloaded format=pdftex)
> entering extended mode
> (./tmp-pdfcrop-53360.tex [1 <./pdfcrop-mwe.pdf>] )
> Output written on tmp-pdfcrop-53360.pdf (1 page, 22476 bytes).
> Transcript written on tmp-pdfcrop-53360.log.
> ==> 1 page written on `pdfcrop-mwe-crop.pdf'.
>
>
>
>



From reinhard.kotucha at web.de  Sat Oct 19 22:22:31 2019
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 19 Oct 2019 22:22:31 +0200
Subject: pdfcrop bounding box problem
In-Reply-To: <5DAB265F.50500@gmx.com>
References: <5DAB10AF.7030206@gmx.com>
	<5DAB265F.50500@gmx.com>
Message-ID: <23979.28807.135028.511669@gargle.gargle.HOWL>

On 2019-10-19 at 11:06:07 -0400, Alan Munn wrote:

 > This is a ghostscript bug. Updating to the latest version (9.50) fixes
 > it.  Doe TL have a policy on how these sorts of updates are handled? As
 > I understand it, tlmgr doesn't update ghostscript, but MacTeX at least
 > installs v9.27.

TeX Live provides Ghostscript for Windows only.  I've uploaded the
latest version (9.50) a few days ago and it should be available from
the mirrors now.

On other systems an external Ghostscript is used and users have to
update it themselves.

Regarding MacTeX I recommend you to contact the developers.

Regards,
  Reinhard

--
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From karl at freefriends.org  Sun Oct 20 00:10:52 2019
From: karl at freefriends.org (Karl Berry)
Date: Sat, 19 Oct 2019 16:10:52 -0600
Subject: pdfcrop bounding box problem
In-Reply-To: <5DAB10AF.7030206@gmx.com>
Message-ID: <201910192210.x9JMAqPc013804@freefriends.org>

    Hi, the following document, processed with any engine, crops improperly.

For the record, it's gs-9.27 that had the cropping bug. It's ok with
earlier or later versions. The 9.27 failure can also be worked around
(suboptimally) by giving --margins values to pdfcrop. --best, karl.


From reinhard.kotucha at web.de  Sun Oct 20 01:56:33 2019
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sun, 20 Oct 2019 01:56:33 +0200
Subject: \pdffilesize and spaces
In-Reply-To: <201910182126.x9ILQOfQ025399@freefriends.org>
References: <962551ee-4680-ec40-24e5-f4d3e0f45098@morningstar2.co.uk>
 <201910182126.x9ILQOfQ025399@freefriends.org>
Message-ID: <23979.41649.192513.533670@gargle.gargle.HOWL>

On 2019-10-18 at 15:26:24 -0600, Karl Berry wrote:

 > I think there is no way to use \pdffilesize etc. on arbitrary
 > filenames. Maybe they can be made to work with one space, but 2+
 > consecutive spaces in the input will get transmuted into one by
 > TeX's scanner before the primitive over sees it, if I understand
 > correctly. Catcode 9 characters will likewise disappear, etc., etc.

I can at least confirm that pdftex primitives like \pdfximage
circumvent TeX's scanner and allow an arbitrary number of consecutive
spaces in filenames.  The argument must be surrounded by braces.
This is different from TeX, which assumes that a filename ends with a
space.  I don't know whether all catcodes are considered but macros
are expanded:

  \pdfximage {\dir/\file}

If catcode 9 makes particular characters inaccessible, pdftex
primitives should be called from a macro which restores the original
catcodes.  Admittedly, I've never seen anything in the TeX world which
makes use of catcode 9.

IMO the fact that pdftex primitives do not collapse an arbitrary
number of spaces into one is a great step forward.  It's much more
difficult to deal with \input, \openin, and \openout.

Regards,
  Reinhard

--
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From herbs at wideopenwest.com  Sun Oct 20 02:04:20 2019
From: herbs at wideopenwest.com (Herbert Schulz)
Date: Sat, 19 Oct 2019 19:04:20 -0500
Subject: pdfcrop bounding box problem
In-Reply-To: <201910192210.x9JMAqPc013804@freefriends.org>
References: <201910192210.x9JMAqPc013804@freefriends.org>
Message-ID: <7CC3DBFC-A61F-4CEE-B924-788B9C99DC46@wideopenwest.com>

Howdy,

There is patched version of 9.27 that is available and also is installed by the MacTeX installer that fixes that crop bug. 

I?ve typeset the MWE supplied by Alan but I?m not quite sure what he is expecting. I get the text but no leading vertical spacing. What does \centering followed be \raggedleft supposed to look like? Should the initial vertical space be there?

Good Luck,
Herb Schulz


> On Oct 19, 2019, at 5:11 PM, Karl Berry <karl at freefriends.org> wrote:
> 
> ?    Hi, the following document, processed with any engine, crops improperly.
> 
> For the record, it's gs-9.27 that had the cropping bug. It's ok with
> earlier or later versions. The 9.27 failure can also be worked around
> (suboptimally) by giving --margins values to pdfcrop. --best, karl.
> 



From blflatex at gmail.com  Sun Oct 20 09:48:47 2019
From: blflatex at gmail.com (Bruno Le Floch)
Date: Sun, 20 Oct 2019 09:48:47 +0200
Subject: \pdffilesize and spaces
In-Reply-To: <23979.41649.192513.533670@gargle.gargle.HOWL>
References: <962551ee-4680-ec40-24e5-f4d3e0f45098@morningstar2.co.uk>
 <201910182126.x9ILQOfQ025399@freefriends.org>
 <23979.41649.192513.533670@gargle.gargle.HOWL>
Message-ID: <c0b55630-6eb5-993e-25a2-06cc15992dc3@gmail.com>

On 10/20/19 1:56 AM, Reinhard Kotucha wrote:
> On 2019-10-18 at 15:26:24 -0600, Karl Berry wrote:
>
>  > I think there is no way to use \pdffilesize etc. on arbitrary
>  > filenames. Maybe they can be made to work with one space, but 2+
>  > consecutive spaces in the input will get transmuted into one by
>  > TeX's scanner before the primitive over sees it, if I understand
>  > correctly. Catcode 9 characters will likewise disappear, etc., etc.
>
> I can at least confirm that pdftex primitives like \pdfximage
> circumvent TeX's scanner and allow an arbitrary number of consecutive
> spaces in filenames.

Could you clarify what you mean?  Given the implementation in
pdftex.web, it's pretty clear that tokenization (including ignoring
consecutive spaces) still happens before \pdfximage receives its argument.

$ touch abc\ \ def
$ pdftex '\pdfximage{abc  def}'
<snip>
!pdfTeX error: pdftex (file abc def): cannot find image file
<snip>

$ touch ghi\ jkl
$ pdftex '\pdfximage{ghi  jkl}'
<snip>
!pdfTeX error: pdftex (file ./ghi jkl): reading image file failed
<snip>

It's easy to get spaces using the macro \space since everything is
expanded.  For \input, \openin etc you simply need to surround the whole
construction with quotes.

> The argument must be surrounded by braces.
> This is different from TeX, which assumes that a filename ends with a
> space.  I don't know whether all catcodes are considered but macros
> are expanded:
>
>   \pdfximage {\dir/\file}
>
> If catcode 9 makes particular characters inaccessible, pdftex
> primitives should be called from a macro which restores the original
> catcodes.  Admittedly, I've never seen anything in the TeX world which
> makes use of catcode 9.

\def\MakePercentIgnore{\catcode`\%9\relax}
in doc.sty and most other classes/packages to document code.

> IMO the fact that pdftex primitives do not collapse an arbitrary
> number of spaces into one is a great step forward.  It's much more
> difficult to deal with \input, \openin, and \openout.

Expansion is a little different for sure between the Knuth TeX
primitives and the pdfTeX ones, but the main difference in capability is
filenames with quotes.

Bruno

From blflatex at gmail.com  Sun Oct 20 12:15:59 2019
From: blflatex at gmail.com (Bruno Le Floch)
Date: Sun, 20 Oct 2019 12:15:59 +0200
Subject: \pdffilesize and spaces
In-Reply-To: <6A06F141-A498-4DD7-BEEC-BC046EF05149@gmail.com>
References: <c0b55630-6eb5-993e-25a2-06cc15992dc3@gmail.com>
 <6A06F141-A498-4DD7-BEEC-BC046EF05149@gmail.com>
Message-ID: <95c2e22a-3676-aa7e-92de-32fe5224444e@gmail.com>

On 10/20/19 10:41 AM, Chris Rowley wrote:
> Hi Bruno,
> 
> Not quite clear which ?expansion? you refer to hear: that of the primitive itself, or that when scanning the file name?  Also, what are these small differences?

I don't understand what difference you are referring to: when reading
its argument in the input stream the primitive expands.

>> Expansion is a little different for sure between the Knuth TeX
>> primitives and the pdfTeX ones

I'm writing this from memory of a few years back.  It is not very
important to the question at hand.

For \input, \openin and \openout it expands until getting a
non-expandable token.  If that's a character the character is appended
to a buffer building the file name, unless it is a double quote (in
which case it flips some boolean denoting whether we're inside or
outside quotes) or a space, which stops the file name if we are outside
quotes.  Any other nonexpandable token stops the expansion.  There are
details (perhaps different between \input and \openin/\openout) about
spaces at the start of the file name but they can be worked around by
using spaces with strange catcodes.

I also remember minor differences in LuaTeX for either \openin or
\openout, at least some time back.

For pdfTeX primitives dealing with files, the primitive reads an
argument exactly like \message, using the same internal routine which
expands tokens (except \protected ones) then appends them to a list of
tokens found, then upon finding the closing (explicit) end-group
character token the whole list of tokens is turned into a string used as
a file name.

The main differences are
- quotes, maybe, unless the pdfTeX primitives or something down the line
strips them;
- nonexpandable tokens, which just get turned to a string using the same
routine as \detokenize at the end.

For instance the second point can suggest making active characters into
\protected macros, as they would then automatically remain as they are
in pdfTeX primitives.  However, \input expands even protected macros.

Best,
Bruno

From alexgirao at gmail.com  Sun Oct 20 05:13:23 2019
From: alexgirao at gmail.com (Alexandre Girao)
Date: Sun, 20 Oct 2019 00:13:23 -0300
Subject: symlinks to installer not allowing portable installations
Message-ID: <CAMbCX-5f2eKoVkrVRyUPg5_N7v0dEywFng5KH3AsBMtXTwEt_g@mail.gmail.com>

Hi, I just subscribed to let you know my recent findings.

The revision 52189 (1) of some days ago adds a dependency to the installer
location, and I experienced 2 problems with this approach: the symlinks in
bin now points to the installer files (not portable anymore) and many
programs (e.g. pdflatex) fail to resolve the right installation directory
giving errors like "mktexfmt [ERROR]: -user mode but path setup is -sys
type, bailing out.".

It is straightforward to reproduce, just do a portable installation in a
non-standard directory, I am using linux (the latest centos 7, v7.7.1908)
and installing from a rsync'ed copy.

(1)
https://tug.org/svn/texlive/trunk/Master/tlpkg/TeXLive/TLUtils.pm?r1=52189&r2=52188&pathrev=52189

Alexandre Girao
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191020/03cde04c/attachment.html>

From c.a.rowley.2222 at gmail.com  Sun Oct 20 10:41:06 2019
From: c.a.rowley.2222 at gmail.com (Chris Rowley)
Date: Sun, 20 Oct 2019 15:41:06 +0700
Subject: \pdffilesize and spaces
In-Reply-To: <c0b55630-6eb5-993e-25a2-06cc15992dc3@gmail.com>
References: <c0b55630-6eb5-993e-25a2-06cc15992dc3@gmail.com>
Message-ID: <6A06F141-A498-4DD7-BEEC-BC046EF05149@gmail.com>

Hi Bruno,

Not quite clear which ?expansion? you refer to hear: that of the primitive itself, or that when scanning the file name?  Also, what are these small differences?
> Expansion is a little different for sure between the Knuth TeX
> primitives and the pdfTeX ones

Thanks,
Chris

From joseph.wright at morningstar2.co.uk  Sun Oct 20 22:34:38 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Sun, 20 Oct 2019 21:34:38 +0100
Subject: \pdfmajorversion
Message-ID: <78f26bcc-5726-385f-d7d7-7ee81fb5dfa1@morningstar2.co.uk>

Hello all,

I've started looking at PDF-2.0 support for pdfTeX. The attached 
introduces \pdfmajorversion for the binary: I need to look at the manual 
too.

At present, this does *not* address PDF inclusion: that requires minimal 
changes in the WEB but more significant changes in the C, and that looks 
more 'interesting'. I'm sending this first so others can test, etc.

Feedback welcome.

Joseph
-------------- next part --------------
From 49386543f2924d669adddd7db10eec2ec680d2f1 Mon Sep 17 00:00:00 2001
From: Joseph Wright <joseph.wright at morningstar2.co.uk>
Date: Sun, 20 Oct 2019 20:17:45 +0100
Subject: [PATCH] Introduce \pdfmajorversion

This does not cover PDF inclusion, which requires change in the C code.
---
 texk/web2c/pdftexdir/pdftex.web | 96 +++++++++++++++++++--------------
 1 file changed, 57 insertions(+), 39 deletions(-)

diff --git a/texk/web2c/pdftexdir/pdftex.web b/texk/web2c/pdftexdir/pdftex.web
index 80b6e00f8..1cc588075 100644
--- a/texk/web2c/pdftexdir/pdftex.web
+++ b/texk/web2c/pdftexdir/pdftex.web
@@ -5669,31 +5669,32 @@ that will be defined later.
 @d pdf_unique_resname_code   = pdftex_first_integer_code + 6 {generate unique names for resouces}
 @d pdf_option_always_use_pdfpagebox_code = pdftex_first_integer_code + 7 {if the PDF inclusion should always use a specific PDF page box}
 @d pdf_option_pdf_inclusion_errorlevel_code = pdftex_first_integer_code + 8 {if the PDF inclusion should treat pdfs newer than |pdf_minor_version| as an error}
- at d pdf_minor_version_code = pdftex_first_integer_code + 9 {fractional part of the PDF version produced}
- at d pdf_force_pagebox_code = pdftex_first_integer_code + 10 {if the PDF inclusion should always use a specific PDF page box}
- at d pdf_pagebox_code = pdftex_first_integer_code + 11 {default pagebox to use for PDF inclusion}
- at d pdf_inclusion_errorlevel_code = pdftex_first_integer_code + 12 {if the PDF inclusion should treat pdfs newer than |pdf_minor_version| as an error}
- at d pdf_gamma_code            = pdftex_first_integer_code + 13
- at d pdf_image_gamma_code      = pdftex_first_integer_code + 14
- at d pdf_image_hicolor_code    = pdftex_first_integer_code + 15
- at d pdf_image_apply_gamma_code = pdftex_first_integer_code + 16
- at d pdf_adjust_spacing_code   = pdftex_first_integer_code + 17 {level of spacing adjusting}
- at d pdf_protrude_chars_code   = pdftex_first_integer_code + 18 {protrude chars at left/right edge of paragraphs}
- at d pdf_tracing_fonts_code    = pdftex_first_integer_code + 19 {level of font detail in log}
- at d pdf_objcompresslevel_code = pdftex_first_integer_code + 20 {activate object streams}
- at d pdf_adjust_interword_glue_code    = pdftex_first_integer_code + 21 {adjust interword glue?}
- at d pdf_prepend_kern_code     = pdftex_first_integer_code + 22 {prepend kern before certain characters?}
- at d pdf_append_kern_code      = pdftex_first_integer_code + 23 {append kern before certain characters?}
- at d pdf_gen_tounicode_code    = pdftex_first_integer_code + 24 {generate ToUnicode for fonts?}
- at d pdf_draftmode_code        = pdftex_first_integer_code + 25 {switch on draftmode if positive}
- at d pdf_inclusion_copy_font_code = pdftex_first_integer_code + 26 {generate ToUnicode for fonts?}
- at d pdf_suppress_warning_dup_dest_code    = pdftex_first_integer_code + 27 {suppress warning about duplicated destinations}
- at d pdf_suppress_warning_dup_map_code     = pdftex_first_integer_code + 28 {suppress warning about duplicated map lines}
- at d pdf_suppress_warning_page_group_code  = pdftex_first_integer_code + 29 {suppress warning about multiple pdfs with page group}
- at d pdf_info_omit_date_code  = pdftex_first_integer_code + 30 {omit generating CreationDate and ModDate}
- at d pdf_suppress_ptex_info_code = pdftex_first_integer_code + 31 {suppress /PTEX.* entries in PDF dictionaries}
- at d pdf_omit_charset_code = pdftex_first_integer_code + 32 {suppress /PTEX.* entries in PDF dictionaries}
- at d pdf_int_pars=pdftex_first_integer_code + 33 {total number of \pdfTeX's integer parameters}
+ at d pdf_major_version_code = pdftex_first_integer_code + 9 {integer part of the PDF version produced}
+ at d pdf_minor_version_code = pdftex_first_integer_code + 10 {fractional part of the PDF version produced}
+ at d pdf_force_pagebox_code = pdftex_first_integer_code + 11 {if the PDF inclusion should always use a specific PDF page box}
+ at d pdf_pagebox_code = pdftex_first_integer_code + 12 {default pagebox to use for PDF inclusion}
+ at d pdf_inclusion_errorlevel_code = pdftex_first_integer_code + 13 {if the PDF inclusion should treat pdfs newer than |pdf_minor_version| as an error}
+ at d pdf_gamma_code            = pdftex_first_integer_code + 14
+ at d pdf_image_gamma_code      = pdftex_first_integer_code + 15
+ at d pdf_image_hicolor_code    = pdftex_first_integer_code + 16
+ at d pdf_image_apply_gamma_code = pdftex_first_integer_code + 17
+ at d pdf_adjust_spacing_code   = pdftex_first_integer_code + 18 {level of spacing adjusting}
+ at d pdf_protrude_chars_code   = pdftex_first_integer_code + 19 {protrude chars at left/right edge of paragraphs}
+ at d pdf_tracing_fonts_code    = pdftex_first_integer_code + 20 {level of font detail in log}
+ at d pdf_objcompresslevel_code = pdftex_first_integer_code + 21 {activate object streams}
+ at d pdf_adjust_interword_glue_code    = pdftex_first_integer_code + 22 {adjust interword glue?}
+ at d pdf_prepend_kern_code     = pdftex_first_integer_code + 23 {prepend kern before certain characters?}
+ at d pdf_append_kern_code      = pdftex_first_integer_code + 24 {append kern before certain characters?}
+ at d pdf_gen_tounicode_code    = pdftex_first_integer_code + 25 {generate ToUnicode for fonts?}
+ at d pdf_draftmode_code        = pdftex_first_integer_code + 26 {switch on draftmode if positive}
+ at d pdf_inclusion_copy_font_code = pdftex_first_integer_code + 27 {generate ToUnicode for fonts?}
+ at d pdf_suppress_warning_dup_dest_code    = pdftex_first_integer_code + 28 {suppress warning about duplicated destinations}
+ at d pdf_suppress_warning_dup_map_code     = pdftex_first_integer_code + 29 {suppress warning about duplicated map lines}
+ at d pdf_suppress_warning_page_group_code  = pdftex_first_integer_code + 30 {suppress warning about multiple pdfs with page group}
+ at d pdf_info_omit_date_code  = pdftex_first_integer_code + 31 {omit generating CreationDate and ModDate}
+ at d pdf_suppress_ptex_info_code = pdftex_first_integer_code + 32 {suppress /PTEX.* entries in PDF dictionaries}
+ at d pdf_omit_charset_code = pdftex_first_integer_code + 33 {suppress /PTEX.* entries in PDF dictionaries}
+ at d pdf_int_pars=pdftex_first_integer_code + 34 {total number of \pdfTeX's integer parameters}
 @#
 @d etex_int_base=pdf_int_pars {base for \eTeX's integer parameters}
 @d tracing_assigns_code=etex_int_base {show assignments}
@@ -5789,6 +5790,7 @@ that will be defined later.
 @d pdf_unique_resname   == int_par(pdf_unique_resname_code)
 @d pdf_option_always_use_pdfpagebox == int_par(pdf_option_always_use_pdfpagebox_code)
 @d pdf_option_pdf_inclusion_errorlevel == int_par(pdf_option_pdf_inclusion_errorlevel_code)
+ at d pdf_major_version == int_par(pdf_major_version_code)
 @d pdf_minor_version == int_par(pdf_minor_version_code)
 @d pdf_force_pagebox == int_par(pdf_force_pagebox_code)
 @d pdf_pagebox == int_par(pdf_pagebox_code)
@@ -5890,6 +5892,7 @@ pdf_pk_resolution_code:    print_esc("pdfpkresolution");
 pdf_unique_resname_code:   print_esc("pdfuniqueresname");
 pdf_option_always_use_pdfpagebox_code: print_esc("pdfoptionalwaysusepdfpagebox");
 pdf_option_pdf_inclusion_errorlevel_code: print_esc("pdfoptionpdfinclusionerrorlevel");
+pdf_major_version_code: print_esc("pdfmajorversion");
 pdf_minor_version_code: print_esc("pdfminorversion");
 pdf_force_pagebox_code: print_esc("pdfforcepagebox");
 pdf_pagebox_code: print_esc("pdfpagebox");
@@ -6056,6 +6059,8 @@ primitive("pdfoptionalwaysusepdfpagebox",assign_int,int_base+pdf_option_always_u
 @!@:pdf_option_always_use_pdfpagebox_}{\.{\\pdfoptionalwaysusepdfpagebox} primitive@>
 primitive("pdfoptionpdfinclusionerrorlevel",assign_int,int_base+pdf_option_pdf_inclusion_errorlevel_code);@/
 @!@:pdf_option_pdf_inclusion_errorlevel_}{\.{\\pdfoptionpdfinclusionerrorlevel} primitive@>
+primitive("pdfmajorversion",assign_int,int_base+pdf_major_version_code);@/
+@!@:pdf_major_version_}{\.{\\pdfmajorversion} primitive@>
 primitive("pdfminorversion",assign_int,int_base+pdf_minor_version_code);@/
 @!@:pdf_minor_version_}{\.{\\pdfminorversion} primitive@>
 primitive("pdfforcepagebox",assign_int,int_base+pdf_force_pagebox_code);@/
@@ -15076,6 +15081,7 @@ pdf_compress_level := 9;
 pdf_objcompresslevel := 0;
 pdf_decimal_digits := 3;
 pdf_image_resolution := 72;
+pdf_major_version := 1;
 pdf_minor_version := 4;
 pdf_gamma := 1000;
 pdf_image_gamma := 2200;
@@ -15348,9 +15354,10 @@ end
 @!pdf_gone: longinteger; {number of bytes that were flushed to output}
 @!pdf_save_offset: longinteger; {to save |pdf_offset|}
 @!zip_write_state: integer; {which state of compression we are in}
+@!fixed_pdf_major_version: integer; {fixed major part of the PDF version}
 @!fixed_pdf_minor_version: integer; {fixed minor part of the PDF version}
 @!fixed_pdf_objcompresslevel: integer; {fixed level for activating PDF object streams}
-@!pdf_minor_version_written: boolean; {flag if the PDF version has been written}
+@!pdf_version_written: boolean; {flag if the PDF version has been written}
 @!fixed_pdfoutput: integer; {fixed output format}
 @!fixed_pdfoutput_set: boolean; {|fixed_pdfoutput| has been set?}
 @!fixed_gamma: integer;
@@ -15376,7 +15383,7 @@ pdf_os_buf_size := inf_pdf_os_buf_size;
 pdf_buf := pdf_op_buf;
 pdf_seek_write_length := false;
 zip_write_state := no_zip;
-pdf_minor_version_written := false;
+pdf_version_written := false;
 fixed_pdfoutput_set := false;
 fixed_pdf_draftmode_set := false;
 
@@ -15396,10 +15403,18 @@ end;
 been written to the generated PDF file. Here also the PDF file is opened
 by |ensure_pdf_open| and the PDF header is written.
 
- at p procedure check_pdfminorversion;
+ at p procedure check_pdfversion;
 begin
-    if not pdf_minor_version_written then begin
-        pdf_minor_version_written := true;
+    if not pdf_version_written then begin
+        pdf_version_written := true;
+        if (pdf_major_version < 1) or (pdf_major_version > 2) then begin
+            print_err("pdfTeX error (illegal pdfmajorversion)");
+            print_ln;
+            help2 ("The pdfminorversion must be 1 or 2.")@/
+                ("I changed this to 1.");
+            int_error (pdf_major_version);
+            pdf_minor_version := 1;
+        end;
         if (pdf_minor_version < 0) or (pdf_minor_version > 9) then begin
             print_err("pdfTeX error (illegal pdfminorversion)");
             print_ln;
@@ -15408,6 +15423,7 @@ begin
             int_error (pdf_minor_version);
             pdf_minor_version := 4;
         end;
+        fixed_pdf_major_version := pdf_major_version;
         fixed_pdf_minor_version := pdf_minor_version;
         fixed_gamma             := fix_int(pdf_gamma, 0, 1000000);
         fixed_image_gamma       := fix_int(pdf_image_gamma, 0, 1000000);
@@ -15416,18 +15432,20 @@ begin
         fixed_pdf_objcompresslevel := fix_int(pdf_objcompresslevel, 0, 3);
         fixed_pdf_draftmode     := fix_int(pdf_draftmode, 0, 1);
         fixed_inclusion_copy_font      := fix_int(pdf_inclusion_copy_font, 0, 1);
-        if (fixed_pdf_minor_version >= 5) and (fixed_pdf_objcompresslevel > 0) then
+        if ((fixed_pdf_major_version > 1) or (fixed_pdf_minor_version >= 5)) and (fixed_pdf_objcompresslevel > 0) then
             pdf_os_enable := true
         else begin
             if fixed_pdf_objcompresslevel > 0 then begin
-                pdf_warning("Object streams", "\pdfobjcompresslevel > 0 requires \pdfminorversion > 4. Object streams disabled now.", true, true);
+                pdf_warning("Object streams", "\pdfobjcompresslevel > 0 requires PDF-1.5 or greater. Object streams disabled now.", true, true);
                 fixed_pdf_objcompresslevel := 0;
             end;
             pdf_os_enable := false;
         end;
         ensure_pdf_open;
         fix_pdfoutput;
-        pdf_print("%PDF-1.");
+        pdf_print("%PDF-");
+        pdf_print_int(fixed_pdf_major_version);
+        pdf_print(".");
         pdf_print_int_ln(fixed_pdf_minor_version);
         pdf_print("%");
         pdf_out(208); {'P' + 128}
@@ -15437,9 +15455,9 @@ begin
         pdf_print_nl;
     end
     else begin
-        if fixed_pdf_minor_version <> pdf_minor_version then
+        if (fixed_pdf_minor_version <> pdf_minor_version) or (fixed_pdf_major_version <> pdf_major_version) then
             pdf_error("setup",
-               "\pdfminorversion cannot be changed after data is written to the PDF file");
+               "PDF version cannot be changed after data is written to the PDF file");
     end;
 end;
 
@@ -16769,7 +16787,7 @@ end;
 
 procedure pdf_begin_obj(i: integer; pdf_os_level: integer); {begin a PDF object}
 begin
-    check_pdfminorversion;
+    check_pdfversion;
     pdf_os_prepare_obj(i, pdf_os_level);
     if not pdf_os_mode then begin
         pdf_print_int(i);
@@ -16798,7 +16816,7 @@ end;
 
 procedure pdf_begin_dict(i: integer; pdf_os_level: integer); {begin a PDF dictionary object}
 begin
-    check_pdfminorversion;
+    check_pdfversion;
     pdf_os_prepare_obj(i, pdf_os_level);
     if not pdf_os_mode then begin
         pdf_print_int(i);
@@ -19647,7 +19665,7 @@ begin
 end;
 
 @ @<Initialize variables for \.{PDF} output@>=
-check_pdfminorversion;
+check_pdfversion;
 prepare_mag;
 fixed_decimal_digits := fix_int(pdf_decimal_digits, 0, 4);
 min_bp_val :=
@@ -34371,7 +34389,7 @@ end;
 @ @<Implement \.{\\pdfximage}@>=
 begin
     check_pdfoutput("\pdfximage", true);
-    check_pdfminorversion;
+    check_pdfversion;
     scan_image;
 end
 
-- 
2.17.1


From d.p.carlisle at gmail.com  Sun Oct 20 22:52:12 2019
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Sun, 20 Oct 2019 21:52:12 +0100
Subject: \pdfmajorversion
In-Reply-To: <78f26bcc-5726-385f-d7d7-7ee81fb5dfa1@morningstar2.co.uk>
References: <78f26bcc-5726-385f-d7d7-7ee81fb5dfa1@morningstar2.co.uk>
Message-ID: <CAEW6iOj4E8zCQ9=UzCmJtvD5OE_EqBRK+yb0v0nWqgpDCcvh6g@mail.gmail.com>

> +        if (pdf_major_version < 1) or (pdf_major_version > 2) then begin

I think (even though only 1 or 2 are valid now) we should allow any
integer here, otherwise in 10 years time when pdf 3 comes out someone
is going to have to find all the places that have a built in
assumption of just 1 or 2 and update the code.

A macro layer could choose to warn the user if they set this to 42
now, but I'm not sure that it should be an error in the engine code.

David

From joseph.wright at morningstar2.co.uk  Sun Oct 20 23:03:57 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Sun, 20 Oct 2019 22:03:57 +0100
Subject: \pdfmajorversion
In-Reply-To: <78f26bcc-5726-385f-d7d7-7ee81fb5dfa1@morningstar2.co.uk>
References: <78f26bcc-5726-385f-d7d7-7ee81fb5dfa1@morningstar2.co.uk>
Message-ID: <cf32f1c9-0da3-23f2-5e6b-785bb460514d@morningstar2.co.uk>

On 20/10/2019 21:34, Joseph Wright wrote:
> Hello all,
> 
> I've started looking at PDF-2.0 support for pdfTeX. The attached 
> introduces \pdfmajorversion for the binary: I need to look at the manual 
> too.
> 
> At present, this does *not* address PDF inclusion: that requires minimal 
> changes in the WEB but more significant changes in the C, and that looks 
> more 'interesting'. I'm sending this first so others can test, etc.
> 
> Feedback welcome.
> 
> Joseph

I'm working slowly on other stuff:

https://github.com/josephwright/texlive-source/tree/PDF-2.0

Joseph

From karl at freefriends.org  Sun Oct 20 23:13:34 2019
From: karl at freefriends.org (Karl Berry)
Date: Sun, 20 Oct 2019 15:13:34 -0600
Subject: \pdfmajorversion
In-Reply-To: <CAEW6iOj4E8zCQ9=UzCmJtvD5OE_EqBRK+yb0v0nWqgpDCcvh6g@mail.gmail.com>
Message-ID: <201910202113.x9KLDYre016532@freefriends.org>

    I think (even though only 1 or 2 are valid now) we should allow any
    integer here

Well, maybe any whole number >= 1. I don't think we need to accept 
0 or negative. Surely (?) even standards committees won't be that stupid.

    A macro layer 

Validators/readers will also surely complain.

    I'm not sure that it should be an error in the engine code.

I tend to agree.

Thanks for working on this. (And what an endless amount of trouble it
will cause, but as usual we are powerless.) -k

From joseph.wright at morningstar2.co.uk  Sun Oct 20 23:15:20 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Sun, 20 Oct 2019 22:15:20 +0100
Subject: \pdfmajorversion
In-Reply-To: <201910202113.x9KLDYre016532@freefriends.org>
References: <201910202113.x9KLDYre016532@freefriends.org>
Message-ID: <f97337b9-43d0-c0b1-5148-009aaba39ff5@morningstar2.co.uk>

On 20/10/2019 22:13, Karl Berry wrote:
>      I think (even though only 1 or 2 are valid now) we should allow any
>      integer here
> 
> Well, maybe any whole number >= 1. I don't think we need to accept
> 0 or negative. Surely (?) even standards committees won't be that stupid.
> 
>      A macro layer
> 
> Validators/readers will also surely complain.
> 
>      I'm not sure that it should be an error in the engine code.
> 
> I tend to agree.

OK, I'll alter that as I work on this.

> Thanks for working on this. (And what an endless amount of trouble it
> will cause, but as usual we are powerless.) -k

Like I say, the C code is a lot more tricky: we have to pass along the 
major and minor versions, and everything currently assumes 
pdfminorversion = pdfversion ...

Further updates once I have something more extensive sorted.

Joseph


From karl at freefriends.org  Sun Oct 20 23:47:53 2019
From: karl at freefriends.org (Karl Berry)
Date: Sun, 20 Oct 2019 15:47:53 -0600
Subject: symlinks to installer not allowing portable installations
In-Reply-To: <CAMbCX-5f2eKoVkrVRyUPg5_N7v0dEywFng5KH3AsBMtXTwEt_g@mail.gmail.com>
Message-ID: <201910202147.x9KLlrF3017582@freefriends.org>

    The revision 52189 (1) of some days ago adds a dependency to the installer

Argh. Definitely not intended. Will pursue. Thanks. -k

From karl at freefriends.org  Mon Oct 21 00:24:38 2019
From: karl at freefriends.org (Karl Berry)
Date: Sun, 20 Oct 2019 16:24:38 -0600
Subject: symlinks to installer not allowing portable installations
In-Reply-To: <CAMbCX-5f2eKoVkrVRyUPg5_N7v0dEywFng5KH3AsBMtXTwEt_g@mail.gmail.com>
Message-ID: <201910202224.x9KMOc4t018747@freefriends.org>

    It is straightforward to reproduce, just do a portable installation in a
    non-standard directory

Hmm, I could not reproduce that particular problem. The symlinks in
bin/x86_64-linux/ were still relative for me after a portable <V>
installation. Can you send me the tlpkg/texlive.profile file that
resulted from the broken installation?

In any case, I can certainly believe that it happens, since clearly the
new code makes a symlink to an absolute path; that was its purpose :).
I have reverted the change and will push it out again tonight as another
critical update (tlmgr update --self). We'll have to find another way to
deal with the original issue (which was preparing for versioned
.tar.xz filenames, as I briefly mentioned a couple weeks ago).

Thanks,
Karl


From reinhard.kotucha at web.de  Mon Oct 21 00:41:59 2019
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 21 Oct 2019 00:41:59 +0200
Subject: \pdffilesize and spaces
In-Reply-To: <c0b55630-6eb5-993e-25a2-06cc15992dc3@gmail.com>
References: <962551ee-4680-ec40-24e5-f4d3e0f45098@morningstar2.co.uk>
 <201910182126.x9ILQOfQ025399@freefriends.org>
 <23979.41649.192513.533670@gargle.gargle.HOWL>
 <c0b55630-6eb5-993e-25a2-06cc15992dc3@gmail.com>
Message-ID: <23980.58039.349415.551530@gargle.gargle.HOWL>

On 2019-10-20 at 09:48:47 +0200, Bruno Le Floch wrote:

 > On 10/20/19 1:56 AM, Reinhard Kotucha wrote:
 > > On 2019-10-18 at 15:26:24 -0600, Karl Berry wrote:
 > >
 > >  > I think there is no way to use \pdffilesize etc. on arbitrary
 > >  > filenames. Maybe they can be made to work with one space, but 2+
 > >  > consecutive spaces in the input will get transmuted into one by
 > >  > TeX's scanner before the primitive over sees it, if I understand
 > >  > correctly. Catcode 9 characters will likewise disappear, etc., etc.
 > >
 > > I can at least confirm that pdftex primitives like \pdfximage
 > > circumvent TeX's scanner and allow an arbitrary number of
 > > consecutive spaces in filenames.
 >
 > Could you clarify what you mean?  Given the implementation in
 > pdftex.web, it's pretty clear that tokenization (including ignoring
 > consecutive spaces) still happens before \pdfximage receives its
 > argument.

Sorry for the noise.  I just looked into the script I wrote 13 years
ago and there is indeed a line

  \catcode32=13 \let \space

before the files are read.  I overlooked this line.

Regards,
  Reinhard

--
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From joseph.wright at morningstar2.co.uk  Mon Oct 21 12:54:47 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Mon, 21 Oct 2019 11:54:47 +0100
Subject: \pdfmajorversion
In-Reply-To: <cf32f1c9-0da3-23f2-5e6b-785bb460514d@morningstar2.co.uk>
References: <78f26bcc-5726-385f-d7d7-7ee81fb5dfa1@morningstar2.co.uk>
 <cf32f1c9-0da3-23f2-5e6b-785bb460514d@morningstar2.co.uk>
Message-ID: <a2f780d2-e9d5-0cd3-6253-40cbd9a8b093@morningstar2.co.uk>

On 20/10/2019 22:03, Joseph Wright wrote:
> On 20/10/2019 21:34, Joseph Wright wrote:
>> Hello all,
>>
>> I've started looking at PDF-2.0 support for pdfTeX. The attached 
>> introduces \pdfmajorversion for the binary: I need to look at the 
>> manual too.
>>
>> At present, this does *not* address PDF inclusion: that requires 
>> minimal changes in the WEB but more significant changes in the C, and 
>> that looks more 'interesting'. I'm sending this first so others can 
>> test, etc.
>>
>> Feedback welcome.
>>
>> Joseph
> 
> I'm working slowly on other stuff:
> 
> https://github.com/josephwright/texlive-source/tree/PDF-2.0
> 
> Joseph

Updated version of the patch is attached. This should cover all of the 
key points:

- PDF major version is allowed from 1 upward
- Minor fixes compared with previous patch
- Image inclusion checks \pdfmajorversion

Some of the error messages were a bit long if I said both 
\pdfmajorversion and \pdfminorversion, hence the re-phrasing.

Testing to date has been (a) does it build (Ubuntu as WSL, Travis-CI) 
and (b) does a very simple LaTeX document work. I'm pretty confident 
that setting "%PDF-2.0" is fine, but the image inclusion part may be 
more tricky. (In particular, I'm not sure whether the build set up uses 
the Poppler branch for PDF data retrieval.)

Joseph
-------------- next part --------------
From 71ccf3a65c849315a96a7c9c1c24084c4f80d1e9 Mon Sep 17 00:00:00 2001
From: Joseph Wright <joseph.wright at morningstar2.co.uk>
Date: Sun, 20 Oct 2019 20:17:45 +0100
Subject: [PATCH] Introduce \pdfmajorversion

The bulk of the work is focussed on the TeX support, but there is also a need to pass
the major version to image inclusion.

Note that there are no changes to the PDF other than the 'ID' line.
---
 texk/web2c/pdftexdir/pdftex-common.h |   2 +-
 texk/web2c/pdftexdir/pdftex.web      | 100 ++++++++++++++++-----------
 texk/web2c/pdftexdir/pdftoepdf.cc    |  12 ++--
 texk/web2c/pdftexdir/ptexlib.h       |   4 +-
 texk/web2c/pdftexdir/writeimg.c      |  16 ++---
 5 files changed, 76 insertions(+), 58 deletions(-)

diff --git a/texk/web2c/pdftexdir/pdftex-common.h b/texk/web2c/pdftexdir/pdftex-common.h
index 307ba64a3..494e9f2d0 100644
--- a/texk/web2c/pdftexdir/pdftex-common.h
+++ b/texk/web2c/pdftexdir/pdftex-common.h
@@ -83,7 +83,7 @@ extern fm_entry *lookup_fontmap(char *);
 /* pdftoepdf.cc */
 extern void epdf_check_mem(void);
 extern void epdf_delete(void);
-extern int read_pdf_info(char *, char *, int, int, int, int);
+extern int read_pdf_info(char *, char *, int, int, int, int, int);
 
 /* utils.c */
 extern char *convertStringToPDFString(const char *in, int len);
diff --git a/texk/web2c/pdftexdir/pdftex.web b/texk/web2c/pdftexdir/pdftex.web
index 80b6e00f8..39bf2d90f 100644
--- a/texk/web2c/pdftexdir/pdftex.web
+++ b/texk/web2c/pdftexdir/pdftex.web
@@ -5669,31 +5669,32 @@ that will be defined later.
 @d pdf_unique_resname_code   = pdftex_first_integer_code + 6 {generate unique names for resouces}
 @d pdf_option_always_use_pdfpagebox_code = pdftex_first_integer_code + 7 {if the PDF inclusion should always use a specific PDF page box}
 @d pdf_option_pdf_inclusion_errorlevel_code = pdftex_first_integer_code + 8 {if the PDF inclusion should treat pdfs newer than |pdf_minor_version| as an error}
- at d pdf_minor_version_code = pdftex_first_integer_code + 9 {fractional part of the PDF version produced}
- at d pdf_force_pagebox_code = pdftex_first_integer_code + 10 {if the PDF inclusion should always use a specific PDF page box}
- at d pdf_pagebox_code = pdftex_first_integer_code + 11 {default pagebox to use for PDF inclusion}
- at d pdf_inclusion_errorlevel_code = pdftex_first_integer_code + 12 {if the PDF inclusion should treat pdfs newer than |pdf_minor_version| as an error}
- at d pdf_gamma_code            = pdftex_first_integer_code + 13
- at d pdf_image_gamma_code      = pdftex_first_integer_code + 14
- at d pdf_image_hicolor_code    = pdftex_first_integer_code + 15
- at d pdf_image_apply_gamma_code = pdftex_first_integer_code + 16
- at d pdf_adjust_spacing_code   = pdftex_first_integer_code + 17 {level of spacing adjusting}
- at d pdf_protrude_chars_code   = pdftex_first_integer_code + 18 {protrude chars at left/right edge of paragraphs}
- at d pdf_tracing_fonts_code    = pdftex_first_integer_code + 19 {level of font detail in log}
- at d pdf_objcompresslevel_code = pdftex_first_integer_code + 20 {activate object streams}
- at d pdf_adjust_interword_glue_code    = pdftex_first_integer_code + 21 {adjust interword glue?}
- at d pdf_prepend_kern_code     = pdftex_first_integer_code + 22 {prepend kern before certain characters?}
- at d pdf_append_kern_code      = pdftex_first_integer_code + 23 {append kern before certain characters?}
- at d pdf_gen_tounicode_code    = pdftex_first_integer_code + 24 {generate ToUnicode for fonts?}
- at d pdf_draftmode_code        = pdftex_first_integer_code + 25 {switch on draftmode if positive}
- at d pdf_inclusion_copy_font_code = pdftex_first_integer_code + 26 {generate ToUnicode for fonts?}
- at d pdf_suppress_warning_dup_dest_code    = pdftex_first_integer_code + 27 {suppress warning about duplicated destinations}
- at d pdf_suppress_warning_dup_map_code     = pdftex_first_integer_code + 28 {suppress warning about duplicated map lines}
- at d pdf_suppress_warning_page_group_code  = pdftex_first_integer_code + 29 {suppress warning about multiple pdfs with page group}
- at d pdf_info_omit_date_code  = pdftex_first_integer_code + 30 {omit generating CreationDate and ModDate}
- at d pdf_suppress_ptex_info_code = pdftex_first_integer_code + 31 {suppress /PTEX.* entries in PDF dictionaries}
- at d pdf_omit_charset_code = pdftex_first_integer_code + 32 {suppress /PTEX.* entries in PDF dictionaries}
- at d pdf_int_pars=pdftex_first_integer_code + 33 {total number of \pdfTeX's integer parameters}
+ at d pdf_major_version_code = pdftex_first_integer_code + 9 {integer part of the PDF version produced}
+ at d pdf_minor_version_code = pdftex_first_integer_code + 10 {fractional part of the PDF version produced}
+ at d pdf_force_pagebox_code = pdftex_first_integer_code + 11 {if the PDF inclusion should always use a specific PDF page box}
+ at d pdf_pagebox_code = pdftex_first_integer_code + 12 {default pagebox to use for PDF inclusion}
+ at d pdf_inclusion_errorlevel_code = pdftex_first_integer_code + 13 {if the PDF inclusion should treat pdfs newer than |pdf_minor_version| as an error}
+ at d pdf_gamma_code            = pdftex_first_integer_code + 14
+ at d pdf_image_gamma_code      = pdftex_first_integer_code + 15
+ at d pdf_image_hicolor_code    = pdftex_first_integer_code + 16
+ at d pdf_image_apply_gamma_code = pdftex_first_integer_code + 17
+ at d pdf_adjust_spacing_code   = pdftex_first_integer_code + 18 {level of spacing adjusting}
+ at d pdf_protrude_chars_code   = pdftex_first_integer_code + 19 {protrude chars at left/right edge of paragraphs}
+ at d pdf_tracing_fonts_code    = pdftex_first_integer_code + 20 {level of font detail in log}
+ at d pdf_objcompresslevel_code = pdftex_first_integer_code + 21 {activate object streams}
+ at d pdf_adjust_interword_glue_code    = pdftex_first_integer_code + 22 {adjust interword glue?}
+ at d pdf_prepend_kern_code     = pdftex_first_integer_code + 23 {prepend kern before certain characters?}
+ at d pdf_append_kern_code      = pdftex_first_integer_code + 24 {append kern before certain characters?}
+ at d pdf_gen_tounicode_code    = pdftex_first_integer_code + 25 {generate ToUnicode for fonts?}
+ at d pdf_draftmode_code        = pdftex_first_integer_code + 26 {switch on draftmode if positive}
+ at d pdf_inclusion_copy_font_code = pdftex_first_integer_code + 27 {generate ToUnicode for fonts?}
+ at d pdf_suppress_warning_dup_dest_code    = pdftex_first_integer_code + 28 {suppress warning about duplicated destinations}
+ at d pdf_suppress_warning_dup_map_code     = pdftex_first_integer_code + 29 {suppress warning about duplicated map lines}
+ at d pdf_suppress_warning_page_group_code  = pdftex_first_integer_code + 30 {suppress warning about multiple pdfs with page group}
+ at d pdf_info_omit_date_code  = pdftex_first_integer_code + 31 {omit generating CreationDate and ModDate}
+ at d pdf_suppress_ptex_info_code = pdftex_first_integer_code + 32 {suppress /PTEX.* entries in PDF dictionaries}
+ at d pdf_omit_charset_code = pdftex_first_integer_code + 33 {suppress /PTEX.* entries in PDF dictionaries}
+ at d pdf_int_pars=pdftex_first_integer_code + 34 {total number of \pdfTeX's integer parameters}
 @#
 @d etex_int_base=pdf_int_pars {base for \eTeX's integer parameters}
 @d tracing_assigns_code=etex_int_base {show assignments}
@@ -5789,6 +5790,7 @@ that will be defined later.
 @d pdf_unique_resname   == int_par(pdf_unique_resname_code)
 @d pdf_option_always_use_pdfpagebox == int_par(pdf_option_always_use_pdfpagebox_code)
 @d pdf_option_pdf_inclusion_errorlevel == int_par(pdf_option_pdf_inclusion_errorlevel_code)
+ at d pdf_major_version == int_par(pdf_major_version_code)
 @d pdf_minor_version == int_par(pdf_minor_version_code)
 @d pdf_force_pagebox == int_par(pdf_force_pagebox_code)
 @d pdf_pagebox == int_par(pdf_pagebox_code)
@@ -5890,6 +5892,7 @@ pdf_pk_resolution_code:    print_esc("pdfpkresolution");
 pdf_unique_resname_code:   print_esc("pdfuniqueresname");
 pdf_option_always_use_pdfpagebox_code: print_esc("pdfoptionalwaysusepdfpagebox");
 pdf_option_pdf_inclusion_errorlevel_code: print_esc("pdfoptionpdfinclusionerrorlevel");
+pdf_major_version_code: print_esc("pdfmajorversion");
 pdf_minor_version_code: print_esc("pdfminorversion");
 pdf_force_pagebox_code: print_esc("pdfforcepagebox");
 pdf_pagebox_code: print_esc("pdfpagebox");
@@ -6056,6 +6059,8 @@ primitive("pdfoptionalwaysusepdfpagebox",assign_int,int_base+pdf_option_always_u
 @!@:pdf_option_always_use_pdfpagebox_}{\.{\\pdfoptionalwaysusepdfpagebox} primitive@>
 primitive("pdfoptionpdfinclusionerrorlevel",assign_int,int_base+pdf_option_pdf_inclusion_errorlevel_code);@/
 @!@:pdf_option_pdf_inclusion_errorlevel_}{\.{\\pdfoptionpdfinclusionerrorlevel} primitive@>
+primitive("pdfmajorversion",assign_int,int_base+pdf_major_version_code);@/
+@!@:pdf_major_version_}{\.{\\pdfmajorversion} primitive@>
 primitive("pdfminorversion",assign_int,int_base+pdf_minor_version_code);@/
 @!@:pdf_minor_version_}{\.{\\pdfminorversion} primitive@>
 primitive("pdfforcepagebox",assign_int,int_base+pdf_force_pagebox_code);@/
@@ -15076,6 +15081,7 @@ pdf_compress_level := 9;
 pdf_objcompresslevel := 0;
 pdf_decimal_digits := 3;
 pdf_image_resolution := 72;
+pdf_major_version := 1;
 pdf_minor_version := 4;
 pdf_gamma := 1000;
 pdf_image_gamma := 2200;
@@ -15348,9 +15354,10 @@ end
 @!pdf_gone: longinteger; {number of bytes that were flushed to output}
 @!pdf_save_offset: longinteger; {to save |pdf_offset|}
 @!zip_write_state: integer; {which state of compression we are in}
+@!fixed_pdf_major_version: integer; {fixed major part of the PDF version}
 @!fixed_pdf_minor_version: integer; {fixed minor part of the PDF version}
 @!fixed_pdf_objcompresslevel: integer; {fixed level for activating PDF object streams}
-@!pdf_minor_version_written: boolean; {flag if the PDF version has been written}
+@!pdf_version_written: boolean; {flag if the PDF version has been written}
 @!fixed_pdfoutput: integer; {fixed output format}
 @!fixed_pdfoutput_set: boolean; {|fixed_pdfoutput| has been set?}
 @!fixed_gamma: integer;
@@ -15376,7 +15383,7 @@ pdf_os_buf_size := inf_pdf_os_buf_size;
 pdf_buf := pdf_op_buf;
 pdf_seek_write_length := false;
 zip_write_state := no_zip;
-pdf_minor_version_written := false;
+pdf_version_written := false;
 fixed_pdfoutput_set := false;
 fixed_pdf_draftmode_set := false;
 
@@ -15396,10 +15403,18 @@ end;
 been written to the generated PDF file. Here also the PDF file is opened
 by |ensure_pdf_open| and the PDF header is written.
 
- at p procedure check_pdfminorversion;
+ at p procedure check_pdfversion;
 begin
-    if not pdf_minor_version_written then begin
-        pdf_minor_version_written := true;
+    if not pdf_version_written then begin
+        pdf_version_written := true;
+        if pdf_major_version < 1 then begin
+            print_err("pdfTeX error (illegal pdfmajorversion)");
+            print_ln;
+            help2 ("The pdfmajorversion must be 1 or greater.")@/
+                ("I changed this to 1.");
+            int_error (pdf_major_version);
+            pdf_major_version := 1;
+        end;
         if (pdf_minor_version < 0) or (pdf_minor_version > 9) then begin
             print_err("pdfTeX error (illegal pdfminorversion)");
             print_ln;
@@ -15408,6 +15423,7 @@ begin
             int_error (pdf_minor_version);
             pdf_minor_version := 4;
         end;
+        fixed_pdf_major_version := pdf_major_version;
         fixed_pdf_minor_version := pdf_minor_version;
         fixed_gamma             := fix_int(pdf_gamma, 0, 1000000);
         fixed_image_gamma       := fix_int(pdf_image_gamma, 0, 1000000);
@@ -15416,18 +15432,20 @@ begin
         fixed_pdf_objcompresslevel := fix_int(pdf_objcompresslevel, 0, 3);
         fixed_pdf_draftmode     := fix_int(pdf_draftmode, 0, 1);
         fixed_inclusion_copy_font      := fix_int(pdf_inclusion_copy_font, 0, 1);
-        if (fixed_pdf_minor_version >= 5) and (fixed_pdf_objcompresslevel > 0) then
+        if ((fixed_pdf_major_version > 1) or (fixed_pdf_minor_version >= 5)) and (fixed_pdf_objcompresslevel > 0) then
             pdf_os_enable := true
         else begin
             if fixed_pdf_objcompresslevel > 0 then begin
-                pdf_warning("Object streams", "\pdfobjcompresslevel > 0 requires \pdfminorversion > 4. Object streams disabled now.", true, true);
+                pdf_warning("Object streams", "\pdfobjcompresslevel > 0 requires PDF-1.5 or greater. Object streams disabled now.", true, true);
                 fixed_pdf_objcompresslevel := 0;
             end;
             pdf_os_enable := false;
         end;
         ensure_pdf_open;
         fix_pdfoutput;
-        pdf_print("%PDF-1.");
+        pdf_print("%PDF-");
+        pdf_print_int(fixed_pdf_major_version);
+        pdf_print(".");
         pdf_print_int_ln(fixed_pdf_minor_version);
         pdf_print("%");
         pdf_out(208); {'P' + 128}
@@ -15437,9 +15455,9 @@ begin
         pdf_print_nl;
     end
     else begin
-        if fixed_pdf_minor_version <> pdf_minor_version then
+        if (fixed_pdf_minor_version <> pdf_minor_version) or (fixed_pdf_major_version <> pdf_major_version) then
             pdf_error("setup",
-               "\pdfminorversion cannot be changed after data is written to the PDF file");
+               "PDF version cannot be changed after data is written to the PDF file");
     end;
 end;
 
@@ -16769,7 +16787,7 @@ end;
 
 procedure pdf_begin_obj(i: integer; pdf_os_level: integer); {begin a PDF object}
 begin
-    check_pdfminorversion;
+    check_pdfversion;
     pdf_os_prepare_obj(i, pdf_os_level);
     if not pdf_os_mode then begin
         pdf_print_int(i);
@@ -16798,7 +16816,7 @@ end;
 
 procedure pdf_begin_dict(i: integer; pdf_os_level: integer); {begin a PDF dictionary object}
 begin
-    check_pdfminorversion;
+    check_pdfversion;
     pdf_os_prepare_obj(i, pdf_os_level);
     if not pdf_os_mode then begin
         pdf_print_int(i);
@@ -19647,7 +19665,7 @@ begin
 end;
 
 @ @<Initialize variables for \.{PDF} output@>=
-check_pdfminorversion;
+check_pdfversion;
 prepare_mag;
 fixed_decimal_digits := fix_int(pdf_decimal_digits, 0, 4);
 min_bp_val :=
@@ -32999,7 +33017,7 @@ already in an earlier module.
 
 @<Undump pdftex data@>=
 begin
-undumpimagemeta(pdf_minor_version,pdf_inclusion_errorlevel);  {the image information array }
+undumpimagemeta(pdf_major_version,pdf_minor_version,pdf_inclusion_errorlevel);  {the image information array }
 undump_int(pdf_mem_size);
 pdf_mem := xrealloc_array(pdf_mem, integer, pdf_mem_size);
 undump_int(pdf_mem_ptr);
@@ -34358,7 +34376,7 @@ begin
     if pagebox = 0 then {no pagebox specification given}
         pagebox := pdf_box_spec_crop;
     obj_ximage_data(k) := read_image(s, page, named, colorspace, pagebox,
-                                     pdf_minor_version,
+                                     pdf_major_version, pdf_minor_version,
                                      pdf_inclusion_errorlevel);
     if named <> 0 then flush_str(named);
     flush_str(s);
@@ -34371,7 +34389,7 @@ end;
 @ @<Implement \.{\\pdfximage}@>=
 begin
     check_pdfoutput("\pdfximage", true);
-    check_pdfminorversion;
+    check_pdfversion;
     scan_image;
 end
 
diff --git a/texk/web2c/pdftexdir/pdftoepdf.cc b/texk/web2c/pdftexdir/pdftoepdf.cc
index 4db0c90a6..4242ce3e3 100644
--- a/texk/web2c/pdftexdir/pdftoepdf.cc
+++ b/texk/web2c/pdftexdir/pdftoepdf.cc
@@ -719,7 +719,7 @@ static PDFRectangle *get_pagebox(Page * page, int pagebox_spec)
 
 int
 read_pdf_info(char *image_name, char *page_name, int page_num,
-              int pagebox_spec, int minor_pdf_version_wanted,
+              int pagebox_spec, int major_pdf_version_wanted, int minor_pdf_version_wanted,
               int pdf_inclusion_errorlevel)
 {
     PdfDocument *pdf_doc;
@@ -747,21 +747,21 @@ read_pdf_info(char *image_name, char *page_name, int page_num,
 #ifdef POPPLER_VERSION
     pdf_major_version_found = pdf_doc->doc->getPDFMajorVersion();
     pdf_minor_version_found = pdf_doc->doc->getPDFMinorVersion();
-    if ((pdf_major_version_found > 1)
+    if ((pdf_major_version_found > major_pdf_version_wanted)
      || (pdf_minor_version_found > minor_pdf_version_wanted)) {
         const char *msg =
-            "PDF inclusion: found PDF version <%d.%d>, but at most version <1.%d> allowed";
+            "PDF inclusion: found PDF version <%d.%d>, but at most version <%d.%d> allowed";
         if (pdf_inclusion_errorlevel > 0) {
-            pdftex_fail(msg, pdf_major_version_found, pdf_minor_version_found, minor_pdf_version_wanted);
+            pdftex_fail(msg, pdf_major_version_found, pdf_minor_version_found, major_pdf_version_wanted, minor_pdf_version_wanted);
         } else if (pdf_inclusion_errorlevel < 0) {
             ; /* do nothing */
         } else { /* = 0, give warning */
-            pdftex_warn(msg, pdf_major_version_found, pdf_minor_version_found, minor_pdf_version_wanted);
+            pdftex_warn(msg, pdf_major_version_found, pdf_minor_version_found, major_pdf_version_wanted, minor_pdf_version_wanted);
         }
     }
 #else
     pdf_version_found = pdf_doc->doc->getPDFVersion();
-    pdf_version_wanted = 1 + (minor_pdf_version_wanted * 0.1);
+    pdf_version_wanted = major_pdf_version_wanted + (minor_pdf_version_wanted * 0.1);
     if (pdf_version_found > pdf_version_wanted + 0.01) {
         char msg[] =
             "PDF inclusion: found PDF version <%.1f>, but at most version <%.1f> allowed";
diff --git a/texk/web2c/pdftexdir/ptexlib.h b/texk/web2c/pdftexdir/ptexlib.h
index 03feb672c..e11ab0631 100644
--- a/texk/web2c/pdftexdir/ptexlib.h
+++ b/texk/web2c/pdftexdir/ptexlib.h
@@ -301,13 +301,13 @@ extern integer imagecolordepth(integer);
 extern integer getimagegroupref(integer);
 extern void setimagegroupref(integer,integer);
 extern integer readimage(strnumber, integer, strnumber, integer, integer,
-                         integer, integer);
+                         integer, integer, integer);
 extern void deleteimage(integer);
 extern void img_free(void);
 extern void updateimageprocset(integer);
 extern void writeimage(integer);
 extern void dumpimagemeta(void);
-extern void undumpimagemeta(integer, integer);
+extern void undumpimagemeta(integer, integer, integer);
 
 /* writejbig2.c */
 extern void flushjbig2page0objects(void);
diff --git a/texk/web2c/pdftexdir/writeimg.c b/texk/web2c/pdftexdir/writeimg.c
index 8455b03a5..c392df97c 100644
--- a/texk/web2c/pdftexdir/writeimg.c
+++ b/texk/web2c/pdftexdir/writeimg.c
@@ -292,7 +292,7 @@ static void checktypebyextension(integer img)
 
 integer readimage(strnumber s, integer page_num, strnumber page_name,
                   integer colorspace, integer pagebox,
-                  integer pdfversion, integer pdfinclusionerrorlevel)
+                  integer pdfmajorversion, integer pdfminorversion, integer pdfinclusionerrorlevel)
 {
     char *dest = NULL;
     integer img = new_image_entry();
@@ -316,7 +316,7 @@ integer readimage(strnumber s, integer page_num, strnumber page_name,
         pdf_ptr(img) = xtalloc(1, pdf_image_struct);
         pdf_ptr(img)->page_box = pagebox;
         page_num = read_pdf_info(img_name(img), dest, page_num, pagebox,
-                                 pdfversion, pdfinclusionerrorlevel);
+                                 pdfmajorversion, pdfminorversion, pdfinclusionerrorlevel);
         img_width(img) = bp2int(epdf_width);
         img_height(img) = bp2int(epdf_height);
         img_rotate(img) = epdf_rotate;
@@ -341,10 +341,10 @@ integer readimage(strnumber s, integer page_num, strnumber page_name,
         read_jpg_info(img);
         break;
     case IMAGE_TYPE_JBIG2:
-        if (pdfversion < 4) {
+        if (pdfmajorversion == 1 && pdfminorversion < 4) {
             pdftex_fail
                 ("JBIG2 images only possible with at least PDF 1.4; you are generating PDF 1.%i",
-                 (int) pdfversion);
+                 (int) pdfminorversion);
         }
         jbig2_ptr(img) = xtalloc(1, JBIG2_IMAGE_INFO);
         img_type(img) = IMAGE_TYPE_JBIG2;
@@ -507,7 +507,7 @@ void dumpimagemeta(void)
     }
 }
 
-void undumpimagemeta(integer pdfversion, integer pdfinclusionerrorlevel)
+void undumpimagemeta(integer pdfmajorversion, integer pdfminorversion, integer pdfinclusionerrorlevel)
 {
     int cur_image, img;
 
@@ -542,7 +542,7 @@ void undumpimagemeta(integer pdfversion, integer pdfinclusionerrorlevel)
             undumpinteger(pdf_ptr(img)->selected_page);
 
             read_pdf_info(img_name(img), NULL, pdf_ptr(img)->selected_page,
-                          pdf_ptr(img)->page_box, pdfversion,
+                          pdf_ptr(img)->page_box, pdfmajorversion, pdfminorversion,
                           pdfinclusionerrorlevel);
 
             img_width(img) = bp2int(epdf_width);
@@ -562,10 +562,10 @@ void undumpimagemeta(integer pdfversion, integer pdfinclusionerrorlevel)
             read_jpg_info(img);
             break;
         case IMAGE_TYPE_JBIG2:
-            if (pdfversion < 4) {
+            if (pdfmajorversion == 1 && pdfminorversion < 4) {
                 pdftex_fail
                     ("JBIG2 images only possible with at least PDF 1.4; you are generating PDF 1.%i",
-                     (int) pdfversion);
+                     (int) pdfminorversion);
             }
             jbig2_ptr(img) = xtalloc(1, JBIG2_IMAGE_INFO);
             img_type(img) = IMAGE_TYPE_JBIG2;
-- 
2.17.1


From joseph.wright at morningstar2.co.uk  Mon Oct 21 15:59:42 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Mon, 21 Oct 2019 14:59:42 +0100
Subject: \pdfmajorversion
In-Reply-To: <a2f780d2-e9d5-0cd3-6253-40cbd9a8b093@morningstar2.co.uk>
References: <78f26bcc-5726-385f-d7d7-7ee81fb5dfa1@morningstar2.co.uk>
 <cf32f1c9-0da3-23f2-5e6b-785bb460514d@morningstar2.co.uk>
 <a2f780d2-e9d5-0cd3-6253-40cbd9a8b093@morningstar2.co.uk>
Message-ID: <54a3f5f1-16b9-ff63-d992-3086808518ff@morningstar2.co.uk>

On 21/10/2019 11:54, Joseph Wright wrote:
> On 20/10/2019 22:03, Joseph Wright wrote:
>> On 20/10/2019 21:34, Joseph Wright wrote:
>>> Hello all,
>>>
>>> I've started looking at PDF-2.0 support for pdfTeX. The attached 
>>> introduces \pdfmajorversion for the binary: I need to look at the 
>>> manual too.
>>>
>>> At present, this does *not* address PDF inclusion: that requires 
>>> minimal changes in the WEB but more significant changes in the C, and 
>>> that looks more 'interesting'. I'm sending this first so others can 
>>> test, etc.
>>>
>>> Feedback welcome.
>>>
>>> Joseph
>>
>> I'm working slowly on other stuff:
>>
>> https://github.com/josephwright/texlive-source/tree/PDF-2.0
>>
>> Joseph
> 
> Updated version of the patch is attached. This should cover all of the 
> key points:
> 
> - PDF major version is allowed from 1 upward
> - Minor fixes compared with previous patch
> - Image inclusion checks \pdfmajorversion
> 
> Some of the error messages were a bit long if I said both 
> \pdfmajorversion and \pdfminorversion, hence the re-phrasing.
> 
> Testing to date has been (a) does it build (Ubuntu as WSL, Travis-CI) 
> and (b) does a very simple LaTeX document work. I'm pretty confident 
> that setting "%PDF-2.0" is fine, but the image inclusion part may be 
> more tricky. (In particular, I'm not sure whether the build set up uses 
> the Poppler branch for PDF data retrieval.)
> 
> Joseph

BTW, I will look to do the manual: I had to remember where it was ... 
(For reference, http://tug.org/svn/pdftex/branches/stable/doc/ rather 
than the obvious http://tug.org/svn/pdftex/trunk/doc.)

Joseph

From joseph.wright at morningstar2.co.uk  Mon Oct 21 16:03:53 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Mon, 21 Oct 2019 15:03:53 +0100
Subject: \pdfmajorversion
In-Reply-To: <54a3f5f1-16b9-ff63-d992-3086808518ff@morningstar2.co.uk>
References: <78f26bcc-5726-385f-d7d7-7ee81fb5dfa1@morningstar2.co.uk>
 <cf32f1c9-0da3-23f2-5e6b-785bb460514d@morningstar2.co.uk>
 <a2f780d2-e9d5-0cd3-6253-40cbd9a8b093@morningstar2.co.uk>
 <54a3f5f1-16b9-ff63-d992-3086808518ff@morningstar2.co.uk>
Message-ID: <c3dd8d72-4043-9b43-3a5a-bade6d6d8262@morningstar2.co.uk>

On 21/10/2019 14:59, Joseph Wright wrote:
> On 21/10/2019 11:54, Joseph Wright wrote:
>> On 20/10/2019 22:03, Joseph Wright wrote:
>>> On 20/10/2019 21:34, Joseph Wright wrote:
>>>> Hello all,
>>>>
>>>> I've started looking at PDF-2.0 support for pdfTeX. The attached 
>>>> introduces \pdfmajorversion for the binary: I need to look at the 
>>>> manual too.
>>>>
>>>> At present, this does *not* address PDF inclusion: that requires 
>>>> minimal changes in the WEB but more significant changes in the C, 
>>>> and that looks more 'interesting'. I'm sending this first so others 
>>>> can test, etc.
>>>>
>>>> Feedback welcome.
>>>>
>>>> Joseph
>>>
>>> I'm working slowly on other stuff:
>>>
>>> https://github.com/josephwright/texlive-source/tree/PDF-2.0
>>>
>>> Joseph
>>
>> Updated version of the patch is attached. This should cover all of the 
>> key points:
>>
>> - PDF major version is allowed from 1 upward
>> - Minor fixes compared with previous patch
>> - Image inclusion checks \pdfmajorversion
>>
>> Some of the error messages were a bit long if I said both 
>> \pdfmajorversion and \pdfminorversion, hence the re-phrasing.
>>
>> Testing to date has been (a) does it build (Ubuntu as WSL, Travis-CI) 
>> and (b) does a very simple LaTeX document work. I'm pretty confident 
>> that setting "%PDF-2.0" is fine, but the image inclusion part may be 
>> more tricky. (In particular, I'm not sure whether the build set up 
>> uses the Poppler branch for PDF data retrieval.)
>>
>> Joseph
> 
> BTW, I will look to do the manual: I had to remember where it was ... 
> (For reference, http://tug.org/svn/pdftex/branches/stable/doc/ rather 
> than the obvious http://tug.org/svn/pdftex/trunk/doc.)
> 
> Joseph

Also, are the older (1.30) \pdfoptionpdf... names still useful? They 
make life more 'interesting' reading the WEB, and would be easy enough 
to remove.

Joseph

From reinhard.kotucha at web.de  Mon Oct 21 22:39:08 2019
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 21 Oct 2019 22:39:08 +0200
Subject: \pdfmajorversion
In-Reply-To: <c3dd8d72-4043-9b43-3a5a-bade6d6d8262@morningstar2.co.uk>
References: <78f26bcc-5726-385f-d7d7-7ee81fb5dfa1@morningstar2.co.uk>
 <cf32f1c9-0da3-23f2-5e6b-785bb460514d@morningstar2.co.uk>
 <a2f780d2-e9d5-0cd3-6253-40cbd9a8b093@morningstar2.co.uk>
 <54a3f5f1-16b9-ff63-d992-3086808518ff@morningstar2.co.uk>
 <c3dd8d72-4043-9b43-3a5a-bade6d6d8262@morningstar2.co.uk>
Message-ID: <23982.5996.752750.778288@gargle.gargle.HOWL>

On 2019-10-21 at 15:03:53 +0100, Joseph Wright wrote:

 > Also, are the older (1.30) \pdfoptionpdf... names still useful?
 > They make life more 'interesting' reading the WEB, and would be
 > easy enough to remove.

I don't know how many old documents are affected.

There are only very few macro packages in TeX Live which contain
\pdfoptionpdf*, try

  cd texlive/2019/texmf-dist/tex && grep -r \\pdfoptionpdf

If it's too annoying to have all the old stuff in the WEB code and you
still want to keep backwards compatibility, a possible solution could
be to put aliases like

  \let \pdfoptionpdfminorversion \pdfminorversion
  \let \pdfoptionpdfmajorversion \pdfmajorversion
  ...

into a separate file and \input this file when the formats are created.
This way it's quite easy to postpone the decision at least.

Regards,
  Reinhard

--
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From karl at freefriends.org  Mon Oct 21 23:40:49 2019
From: karl at freefriends.org (Karl Berry)
Date: Mon, 21 Oct 2019 15:40:49 -0600
Subject: \pdfmajorversion
In-Reply-To: <a2f780d2-e9d5-0cd3-6253-40cbd9a8b093@morningstar2.co.uk>
Message-ID: <201910212140.x9LLencr012327@freefriends.org>

    I'm not sure whether the build set up uses 
    the Poppler branch for PDF data retrieval.

pdftex binaries made for native TL builds use our own libxpdf, not
poppler.  Distros (unfortunately) use poppler. Poppler is unusable for
our trying-to-be-widely-usable binaries because developers aggressively
use new C++ features. -k


From karl at freefriends.org  Mon Oct 21 23:40:48 2019
From: karl at freefriends.org (Karl Berry)
Date: Mon, 21 Oct 2019 15:40:48 -0600
Subject: \pdfmajorversion
In-Reply-To: <c3dd8d72-4043-9b43-3a5a-bade6d6d8262@morningstar2.co.uk>
Message-ID: <201910212140.x9LLemj0012317@freefriends.org>

    (For reference, http://tug.org/svn/pdftex/branches/stable/doc/ rather 
    than the obvious http://tug.org/svn/pdftex/trunk/doc.)

Someday maybe I will move pdftex trunk back to trunk. But whenever I am
on the verge of doing so, I think of all the existing checkouts that
would have to be changed, and end up doing nothing.

    Also, are the older (1.30) \pdfoptionpdf... names still useful? 

I am not inclined to remove them just for cleanup and gratuitiously
break whatever old stuff may be using it, e.g., as Reinhard found. Yes,
they make it more annoying to search the sources, but ... -k

From karl at freefriends.org  Mon Oct 21 23:40:50 2019
From: karl at freefriends.org (Karl Berry)
Date: Mon, 21 Oct 2019 15:40:50 -0600
Subject: \pdfmajorversion
In-Reply-To: <a2f780d2-e9d5-0cd3-6253-40cbd9a8b093@morningstar2.co.uk>
Message-ID: <201910212140.x9LLeoLV012341@freefriends.org>

    Updated version of the patch is attached. This should cover all of the 
    key points:

Wow, thank you. Do you have test documents?

If we ever get through the versioned TL containers stuff, I'll turn to
this next ...

    - Image inclusion checks \pdfmajorversion

Sorry, but I couldn't easily tell from the source: what happens when a
PDF2 image is included in a run with PDF1 output? Experience has shown
that we should allow this (not by default), that is,
\pdfinclusionerrorlevel and related should still take effect. I believe.
--thanks, karl.

From joseph.wright at morningstar2.co.uk  Mon Oct 21 23:50:04 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Mon, 21 Oct 2019 22:50:04 +0100
Subject: \pdfmajorversion
In-Reply-To: <201910212140.x9LLeoLV012341@freefriends.org>
References: <201910212140.x9LLeoLV012341@freefriends.org>
Message-ID: <ef0c7b65-2c9d-e367-9f3d-b92da2c6221f@morningstar2.co.uk>

On 21/10/2019 22:40, Karl Berry wrote:
>      Updated version of the patch is attached. This should cover all of the
>      key points:
> 
> Wow, thank you. Do you have test documents?

I only did minimal testing here thus-far: uncompressed run to be able to 
read the PDF as plain text.

> If we ever get through the versioned TL containers stuff, I'll turn to
> this next ...
> 
>      - Image inclusion checks \pdfmajorversion
> 
> Sorry, but I couldn't easily tell from the source: what happens when a
> PDF2 image is included in a run with PDF1 output? Experience has shown
> that we should allow this (not by default), that is,
> \pdfinclusionerrorlevel and related should still take effect. I believe.

I just extended the code that was already there, and thus should already 
be giving a warning/error if you include say a PDF 1.7 document in a PDF 
1.4 run. I hope it's acting correctly, but it's not been tested.

Joseph


From joseph.wright at morningstar2.co.uk  Tue Oct 22 00:31:17 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Mon, 21 Oct 2019 23:31:17 +0100
Subject: \pdfmajorversion
In-Reply-To: <201910212140.x9LLemj0012317@freefriends.org>
References: <201910212140.x9LLemj0012317@freefriends.org>
Message-ID: <83728905-0009-cf1f-b077-51fa7bde257b@morningstar2.co.uk>

On 21/10/2019 22:40, Karl Berry wrote:
>      (For reference, http://tug.org/svn/pdftex/branches/stable/doc/ rather
>      than the obvious http://tug.org/svn/pdftex/trunk/doc.)
> 
> Someday maybe I will move pdftex trunk back to trunk. But whenever I am
> on the verge of doing so, I think of all the existing checkouts that
> would have to be changed, and end up doing nothing.

Do you have an idea of the number of people actively using them?

>      Also, are the older (1.30) \pdfoptionpdf... names still useful?
> 
> I am not inclined to remove them just for cleanup and gratuitiously
> break whatever old stuff may be using it, e.g., as Reinhard found. Yes,
> they make it more annoying to search the sources, but ... -k

Fair enough: was only a passing thought. (I think the TL tree is OK as 
it's largely defensive code. It's of course individual docs that are 
harder.)

Joseph


From maximilian.noethe at tu-dortmund.de  Tue Oct 22 10:59:14 2019
From: maximilian.noethe at tu-dortmund.de (=?UTF-8?Q?Maximilian_N=c3=b6the?=)
Date: Tue, 22 Oct 2019 10:59:14 +0200
Subject: \pdfmajorversion
In-Reply-To: <201910212140.x9LLencr012327@freefriends.org>
References: <201910212140.x9LLencr012327@freefriends.org>
Message-ID: <16e29c92-c668-337d-2dd3-fce8b9c2b629@tu-dortmund.de>

Hi,

The current master of poppler uses C++14, which is now 5 years old.
Compiler support for most of it was already available in gcc 4.9 
(released 2014-04-22), fully supported in 5 (2015-04-22).
Clang 3.4 came out at the beginning of 2014 with full support of c++14.

* Is there a list of OSes that should still be supported?

* When is a decision made to drop old systems?

* Wouldn't it be okay for old systems just to install a compatible older 
release?

Cheers
Max


On 21.10.19 23:40, Karl Berry wrote:
>      I'm not sure whether the build set up uses
>      the Poppler branch for PDF data retrieval.
>
> pdftex binaries made for native TL builds use our own libxpdf, not
> poppler.  Distros (unfortunately) use poppler. Poppler is unusable for
> our trying-to-be-widely-usable binaries because developers aggressively
> use new C++ features. -k
>

From c.a.rowley at icloud.com  Wed Oct 23 13:21:08 2019
From: c.a.rowley at icloud.com (Christopher Rowley)
Date: Wed, 23 Oct 2019 18:21:08 +0700
Subject: \pdffilesize and spaces and other charcters
Message-ID: <38661F77-C189-48CD-A403-1BBB22D250A1@icloud.com>

?Bruno,

> On 20 Oct 2019, at 17:16, Bruno Le Floch <blflatex at gmail.com> wrote:
> 
> I'm writing this from memory of a few years back.  

Understood!  Also, I understood you to say that there are differences in the way protected macros are treated within file-name specs by different primitives, and maybe also for the same (name) primitive on different engines.  Is that corr3ct?

> It is not very important to the question at hand.

Maybe not to the spaces question, but maybe it is quite important in a more general sense?

If the handling of ?tex input intended to specify a file name? may be treated differently by different ?file-name processing primitives? or by the same (name) primitive in different engines then that is surely of some import.  At least these facts should be clearly established and fully documented.

Chris


From tljack at forallx.net  Wed Oct 23 21:46:37 2019
From: tljack at forallx.net (jack)
Date: Wed, 23 Oct 2019 13:46:37 -0600
Subject: Stray file in tlnet/ ?
Message-ID: <a19c3616259bdf331ac246589f3350b9.squirrel@box5445.bluehost.com>

Today I rsync'd the tl repo as usual, and I noticed that it brought in the
file "tlnet/.ilist".

Is this a mistake? Is it safe to delete? I can't tell what it is.  The
unix `file` command just says "data".

If it is not a mistake, what the heck is it?

-jack

From karl at freefriends.org  Thu Oct 24 00:13:36 2019
From: karl at freefriends.org (Karl Berry)
Date: Wed, 23 Oct 2019 16:13:36 -0600
Subject: Stray file in tlnet/ ?
In-Reply-To: <a19c3616259bdf331ac246589f3350b9.squirrel@box5445.bluehost.com>
Message-ID: <201910232213.x9NMDaOA030618@freefriends.org>

    Today I rsync'd the tl repo as usual, and I noticed that it brought in the
    file "tlnet/.ilist".

It's harmless and can be ignored. I'll remove it again with the next
build.  (It is created by cow-shell, which does not delete it
.. evidently some tiny bug in their code which I haven't bothered to
track down.) Thanks for the report. -k


From usenet at siart.de  Thu Oct 24 09:47:13 2019
From: usenet at siart.de (Uwe Siart)
Date: Thu, 24 Oct 2019 09:47:13 +0200
Subject: 'autoinst' does not terminate
Message-ID: <87tv7yshz2.fsf@siart.de>

Dear all,

Since a couple of days (don't know the precise date) 'autoinst' does not
work correctly for me. When I run it on an OTF where it used to work
earlier it hangs and does not return to the command prompt.

This is what it looks like on my Win7 machine (LinLibertine_R.otf is in
the working dir):

,----
| e:\try>autoinst -target=./ LinLibertine_R.otf
| [INFO]      Generating fonts ..
`----

At this stage it hangs and I have to kill it with CTRL-c. Even the
command window does not close on 'exit' after this. I have to kill the
cmd process or click the [x] instead.

I report it here because I don't know whether it is an issue with
autoinst itself or with running perl scripts on a windows box. If this
report should better go to Marc just let me know.

Thanks.

-- 
Uwe


From kakuto at w32tex.org  Fri Oct 25 06:37:03 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Fri, 25 Oct 2019 13:37:03 +0900
Subject: 'autoinst' does not terminate
In-Reply-To: <87tv7yshz2.fsf@siart.de>
References: <87tv7yshz2.fsf@siart.de>
Message-ID: <8A458F65936943CC956EBB542FD990DE@CJ3001517A>

Dear Uwe Siart,

> Since a couple of days (don't know the precise date) 'autoinst' does not
> work correctly for me. When I run it on an OTF where it used to work
> earlier it hangs and does not return to the command prompt.

autoinst of $VERSION = '20190712'
seems to work on Windows.

Newer versions than '20190712' use
IPC::Open3 ();
and
waitpid($pid, 0);
for otftotfm.

The waitpid($pid, 0) seems to be very unstable on perl
for Windows.
It sometimes succeeds and very often it does not exit
in the case of autoinst.

Thanks,
Akira


From usenet at siart.de  Fri Oct 25 09:37:46 2019
From: usenet at siart.de (Uwe Siart)
Date: Fri, 25 Oct 2019 09:37:46 +0200
Subject: 'autoinst' does not terminate
References: <87tv7yshz2.fsf@siart.de>
 <8A458F65936943CC956EBB542FD990DE@CJ3001517A>
Message-ID: <87zhhpl1h1.fsf@siart.de>

"Akira Kakuto" <kakuto at w32tex.org> writes:

> Newer versions than '20190712' use
> IPC::Open3 ();
> and
> waitpid($pid, 0);
> for otftotfm.
>
> The waitpid($pid, 0) seems to be very unstable on perl
> for Windows.
> It sometimes succeeds and very often it does not exit
> in the case of autoinst.

Dear Akira,

Many thanks for your analysis. Then, probably, I'm going to ask the
author of autoinst if there's something that can be done about it.

May I cite your findings for that purpose?

Regards,
Uwe


From kakuto at w32tex.org  Fri Oct 25 10:19:05 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Fri, 25 Oct 2019 17:19:05 +0900
Subject: 'autoinst' does not terminate
In-Reply-To: <87zhhpl1h1.fsf@siart.de>
References: <87tv7yshz2.fsf@siart.de>
 <8A458F65936943CC956EBB542FD990DE@CJ3001517A> <87zhhpl1h1.fsf@siart.de>
Message-ID: <BF8039724C9340DA828F3C11FF06460B@CJ3001517A>

Dear Uwe Siart,

> May I cite your findings for that purpose?

OK, thank you.

Here usually hangs with
   Generating fonts ..
In some cases hangs with
   Generating fonts .....
in your example.
In the first case, waitpid ($pid, 0) succeeds once,
and in the second case it succeeds 4 times.

Thanks,
Akira


From reinhard.kotucha at web.de  Fri Oct 25 22:32:36 2019
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 25 Oct 2019 22:32:36 +0200
Subject: 'autoinst' does not terminate
In-Reply-To: <87tv7yshz2.fsf@siart.de>
References: <87tv7yshz2.fsf@siart.de>
Message-ID: <23987.23524.332797.322281@gargle.gargle.HOWL>

On 2019-10-24 at 09:47:13 +0200, Uwe Siart wrote:

 >  autoinst -target=./ LinLibertine_R.otf

On Linux it exits with exit status 0, as expected.  However, it
creates a lot of LaTeX support files but no Type 1 or TrueType fonts
which are needed by engines which don't support OTF directly.

I'm not familiar with autoinst at all.  I just tried your example.
But I would at least expect a warning message if something goes wrong.

Regards,
  Reinhard

--
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From kakuto at w32tex.org  Fri Oct 25 23:25:25 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Sat, 26 Oct 2019 06:25:25 +0900
Subject: 'autoinst' does not terminate
In-Reply-To: <23987.23524.332797.322281@gargle.gargle.HOWL>
References: <87tv7yshz2.fsf@siart.de>
 <23987.23524.332797.322281@gargle.gargle.HOWL>
Message-ID: <9A698E34243E4F99B7E0E7388D0A2227@CJ3001517A>

Dear Reinhard,

> >  autoinst -target=./ LinLibertine_R.otf

> On Linux it exits with exit status 0, as expected.  However, it
> creates a lot of LaTeX support files but no Type 1 or TrueType fonts
> which are needed by engines which don't support OTF directly.

Because you have already relevant type1 fonts in a texmf tree where
otftotfm can find.
LCDF does not create a new truetype font. If an input font is truetype-flavored,
it is installed in a directory for truetype.

Thanks,
Akira


From kakuto at w32tex.org  Fri Oct 25 23:54:27 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Sat, 26 Oct 2019 06:54:27 +0900
Subject: 'autoinst' does not terminate
In-Reply-To: <87zhhpl1h1.fsf@siart.de>
References: <87tv7yshz2.fsf@siart.de>
 <8A458F65936943CC956EBB542FD990DE@CJ3001517A> <87zhhpl1h1.fsf@siart.de>
Message-ID: <2FE6005E64C94AAC83700060173BD0FB@CJ3001517A>

Dear Uwe Siart,

I found that after applying an attached patch,
autoinst.diff, to scripts/fontools/autoinst,
your example became to work on Windows.
(I don't know perl.)

Thanks,
Akira
-------------- next part --------------
A non-text attachment was scrubbed...
Name: autoinst.diff
Type: application/octet-stream
Size: 711 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191026/29b2011c/attachment.obj>

From kakuto at w32tex.org  Sat Oct 26 00:57:29 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Sat, 26 Oct 2019 07:57:29 +0900
Subject: 'autoinst' does not terminate
In-Reply-To: <2FE6005E64C94AAC83700060173BD0FB@CJ3001517A>
References: <87tv7yshz2.fsf@siart.de>
 <8A458F65936943CC956EBB542FD990DE@CJ3001517A> <87zhhpl1h1.fsf@siart.de>
 <2FE6005E64C94AAC83700060173BD0FB@CJ3001517A>
Message-ID: <704896819AFA4DC0B4E56A12D6D938D4@CJ3001517A>

Dear Uwe Siart,

> I found that after applying an attached patch,
> autoinst.diff, to scripts/fontools/autoinst,
> your example became to work on Windows.
> (I don't know perl.)

I attach an another patch, autoinst2.diff,
where warnings to stderr are disabled, probably
as the original autoinst.

Thanks,
Akira
-------------- next part --------------
A non-text attachment was scrubbed...
Name: autoinst2.diff
Type: application/octet-stream
Size: 1286 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20191026/f91e2f37/attachment.obj>

From reinhard.kotucha at web.de  Sat Oct 26 23:28:04 2019
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 26 Oct 2019 23:28:04 +0200
Subject: 'autoinst' does not terminate
In-Reply-To: <9A698E34243E4F99B7E0E7388D0A2227@CJ3001517A>
References: <87tv7yshz2.fsf@siart.de>
 <23987.23524.332797.322281@gargle.gargle.HOWL>
 <9A698E34243E4F99B7E0E7388D0A2227@CJ3001517A>
Message-ID: <23988.47716.874951.686767@gargle.gargle.HOWL>

On 2019-10-26 at 06:25:25 +0900, Akira Kakuto wrote:

 > Because you have already relevant type1 fonts in a texmf tree

There is a discrepancy between the kpathsea library and the
commandline option -target=./

The -target option doesn't work at all and should better be removed
for the time being.

For instance, autoinst calls updmap in order to register a map file.
This works because only the name is required, not the location.  The
file itself is installed somewhere else (value of -target), where
kpathsea doesn't look for files.

If you invoke updmap again, it's aware of the filename but the file
itself cannot be found and updmap suggests to run it again with
--syncwithtrees.

autoinst should never touch an existing TeX Live system unless -target
points exactly to this system or is omitted.

Regards,
  Reinhard

--
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From karl at freefriends.org  Sun Oct 27 00:53:20 2019
From: karl at freefriends.org (Karl Berry)
Date: Sat, 26 Oct 2019 16:53:20 -0600
Subject: \pdfmajorversion
In-Reply-To: <16e29c92-c668-337d-2dd3-fce8b9c2b629@tu-dortmund.de>
Message-ID: <201910262253.x9QMrKAZ015663@freefriends.org>

Hi Max -

    The current master of poppler uses C++14, which is now 5 years old.

I had the impression that current poppler sources require C++17.

Anyway, the chronological age of a standard doesn't much matter. What
matters is what distro-provided compilers support. The CentOS 7
compiler, for example, doesn't support C++14. And even CentOS 6 (doesn't
support C++11) has not yet reached end of life. Such problems occur with
other distros too.

    * Is there a list of OSes that should still be supported?

There is no particular list. We support as old of systems as we
reasonably can.

    * When is a decision made to drop old systems?

When it's no longer reasonable. The volunteers who build the TL binaries
for system X are the ones who ultimately decide what can be reasonably
supported.

    * Wouldn't it be okay for old systems just to install a compatible older 
    release?

If you mean an older TeX release, then, no. TeX users would not be happy
to be forced to live with an old, un-updatable, release just because
some third party library, which is a tiny part of the overall TeX world,
can no longer be compiled on their system.

In general, the TeX world has a long history of trying to be as portable
as possible, since after all TeX itself is completely portable, and TeX
distributions were happening years before the current kernels (Linux,
BSD, Solaris, ...) existed.

There continues to be a nontrivial number of people who cannot use the
binaries we compile now, which require C++11 (because of the glibc
implications).  We regretfully had to make that change because not just
poppler, but also ICU, started requiring the newer C++, and there was no
general workaround for that. It is a big hassle both for builders and for users.

The only way to deal with that is to compile and use a newer compiler on
the older system, which has plenty of its own problems. Nelson Beebe has
succeeded with that approach (among many other necessary changes) on a
huge variety of systems, but it's not feasible to require that much work
of the volunteers who build the binaries we distribute with TL.
http://tug.org/texlive/bugs.html
http://tug.org/texlive/custom-bin.html

Anyway, as far as poppler goes, the only thing it's used for in the TeX
tree is to read PDF files in batch, which is a small fraction of its
functionality. So the ultimate goal is to stop using poppler entirely
and use pplib, written in C by Pawel Jackowski. It's being used in
luatex as of the TL 2019 release, and we hope to extend it to other
engines if we (that is, Luigi Scarso, the luatex maintainer) can make it
reliable enough. We'll see.

Best,
Karl

From vincent.torri at gmail.com  Sun Oct 27 07:08:50 2019
From: vincent.torri at gmail.com (Vincent Torri)
Date: Sun, 27 Oct 2019 07:08:50 +0100
Subject: \pdfmajorversion
In-Reply-To: <201910262253.x9QMrKAZ015663@freefriends.org>
References: <16e29c92-c668-337d-2dd3-fce8b9c2b629@tu-dortmund.de>
 <201910262253.x9QMrKAZ015663@freefriends.org>
Message-ID: <CAMq1ado4SOWbgL2-LoCRkh8fKvJOO=jSaa4-5a0774uzksKkzA@mail.gmail.com>

On Sun, Oct 27, 2019 at 12:54 AM Karl Berry <karl at freefriends.org> wrote:
>
> Hi Max -
>
>     The current master of poppler uses C++14, which is now 5 years old.
>
> I had the impression that current poppler sources require C++17.
>
> Anyway, the chronological age of a standard doesn't much matter. What
> matters is what distro-provided compilers support. The CentOS 7
> compiler, for example, doesn't support C++14. And even CentOS 6 (doesn't
> support C++11) has not yet reached end of life. Such problems occur with
> other distros too.
>
>     * Is there a list of OSes that should still be supported?
>
> There is no particular list. We support as old of systems as we
> reasonably can.
>
>     * When is a decision made to drop old systems?
>
> When it's no longer reasonable. The volunteers who build the TL binaries
> for system X are the ones who ultimately decide what can be reasonably
> supported.
>
>     * Wouldn't it be okay for old systems just to install a compatible older
>     release?
>
> If you mean an older TeX release, then, no. TeX users would not be happy
> to be forced to live with an old, un-updatable, release just because
> some third party library, which is a tiny part of the overall TeX world,
> can no longer be compiled on their system.
>
> In general, the TeX world has a long history of trying to be as portable
> as possible, since after all TeX itself is completely portable, and TeX
> distributions were happening years before the current kernels (Linux,
> BSD, Solaris, ...) existed.
>
> There continues to be a nontrivial number of people who cannot use the
> binaries we compile now, which require C++11 (because of the glibc
> implications).  We regretfully had to make that change because not just
> poppler, but also ICU, started requiring the newer C++, and there was no
> general workaround for that. It is a big hassle both for builders and for users.
>
> The only way to deal with that is to compile and use a newer compiler on
> the older system, which has plenty of its own problems. Nelson Beebe has
> succeeded with that approach (among many other necessary changes) on a
> huge variety of systems, but it's not feasible to require that much work
> of the volunteers who build the binaries we distribute with TL.
> http://tug.org/texlive/bugs.html
> http://tug.org/texlive/custom-bin.html
>
> Anyway, as far as poppler goes, the only thing it's used for in the TeX
> tree is to read PDF files in batch, which is a small fraction of its
> functionality. So the ultimate goal is to stop using poppler entirely
> and use pplib, written in C by Pawel Jackowski. It's being used in
> luatex as of the TL 2019 release, and we hope to extend it to other
> engines if we (that is, Luigi Scarso, the luatex maintainer) can make it
> reliable enough. We'll see.

mupdf is written in C, I use it in one of my pet projects. it's AGPL3 though

Vincent Torri

From usenet at siart.de  Sun Oct 27 10:28:28 2019
From: usenet at siart.de (Uwe Siart)
Date: Sun, 27 Oct 2019 10:28:28 +0100
Subject: 'autoinst' does not terminate
References: <87tv7yshz2.fsf@siart.de>
 <23987.23524.332797.322281@gargle.gargle.HOWL>
 <9A698E34243E4F99B7E0E7388D0A2227@CJ3001517A>
 <23988.47716.874951.686767@gargle.gargle.HOWL>
Message-ID: <87wocqzgeb.fsf@siart.de>

Reinhard Kotucha <reinhard.kotucha at web.de> writes:

> On 2019-10-26 at 06:25:25 +0900, Akira Kakuto wrote:
>
>  > Because you have already relevant type1 fonts in a texmf tree
>
> There is a discrepancy between the kpathsea library and the
> commandline option -target=./
>
> The -target option doesn't work at all and should better be removed
> for the time being.
>
> For instance, autoinst calls updmap in order to register a map file.
> This works because only the name is required, not the location.  The
> file itself is installed somewhere else (value of -target), where
> kpathsea doesn't look for files.
>
> If you invoke updmap again, it's aware of the filename but the file
> itself cannot be found and updmap suggests to run it again with
> --syncwithtrees.
>
> autoinst should never touch an existing TeX Live system unless -target
> points exactly to this system or is omitted.

Hello Reinhard,

I have informed Marc about the points that you raised and I also sent
him Akira's feedback and his patches.

Thanks for discussing.

-- 
Uwe


From news3 at nililand.de  Sun Oct 27 17:22:50 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Sun, 27 Oct 2019 17:22:50 +0100
Subject: luatex doesn't find files with non-ascii  on windows
Message-ID: <15nsvyfiuqdap.dlg@nililand.de>

I can't input files with umlauts/non-ascii on windows 10.

\input gr??e
\bye

leads to 


This is LuaTeX, Version 1.10.0 (TeX Live 2019/W32TeX)
(format=luatex 2019.10.25)  27 OCT 2019 17:18
 restricted system commands enabled.
**test-utf8.tex
(./test-utf8.tex
! I can't find file `gr??e.tex'.
l.220 \input gr??e.tex

I tried also with luatex 1.11.1, and also in context. It fails
everywhere. pdftex has no problem, in miktex it works too.  

-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From P.Taylor at rhul.ac.uk  Sun Oct 27 17:29:02 2019
From: P.Taylor at rhul.ac.uk (Taylor, P)
Date: Sun, 27 Oct 2019 16:29:02 +0000
Subject: luatex doesn't find files with non-ascii on windows
In-Reply-To: <15nsvyfiuqdap.dlg@nililand.de>
References: <15nsvyfiuqdap.dlg@nililand.de>
Message-ID: <92167e94-c831-3de8-a313-280843019ffc@Rhul.Ac.Uk>

Ulrike Fischer wrote:


I can't input files with umlauts/non-ascii on windows 10.

\input gr??e


Any difference if you use only one of the two "odd" characters, as in :

  *

\input gr?e

  *

\input gr?e

?

Here I get (Windows 7 Enterprise, 64-bit)

D:\temp>copy con gr??e.tex
xxx
\end
^Z
        1 file(s) copied.

D:\temp>dir
 Volume in drive D is HDD 1 (Win 7 Data)
 Volume Serial Number is C21D-9491

 Directory of D:\temp

27/10/2019  16:27    <DIR>          .
27/10/2019  16:27    <DIR>          ..
27/10/2019  16:27                11 gr??e.tex
               1 File(s)             11 bytes
               2 Dir(s)  588,538,236,928 bytes free

D:\temp>luatex
This is LuaTeX, Version 1.10.0 (TeX Live 2019/W32TeX)
 restricted system commands enabled.
**\input gr??e
! String contains an invalid utf-8 sequence.
<*> \input gr
          ?e^^@e
? \end
Type <return> to proceed, S to scroll future error messages,
R to run without stopping, Q to run quietly,
I to insert something,
H for help, X to quit.
? x

warning  (pdf backend): no pages of output.

D:\temp>

Philip Taylor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20191027/622a8022/attachment.html>

From Herbert.Voss at fu-berlin.de  Sun Oct 27 19:46:37 2019
From: Herbert.Voss at fu-berlin.de (Herbert Voss)
Date: Sun, 27 Oct 2019 19:46:37 +0100
Subject: luatex doesn't find files with non-ascii on windows
In-Reply-To: <15nsvyfiuqdap.dlg@nililand.de>
References: <15nsvyfiuqdap.dlg@nililand.de>
Message-ID: <89c8ad90-eb12-9a11-8549-4b7fae74059a@fu-berlin.de>



Am 27.10.19 um 17:22 schrieb Ulrike Fischer:
> I can't input files with umlauts/non-ascii on windows 10.
> 
> \input gr??e
> \bye
> 
> leads to
> 
> 
> This is LuaTeX, Version 1.10.0 (TeX Live 2019/W32TeX)
> (format=luatex 2019.10.25)  27 OCT 2019 17:18
>   restricted system commands enabled.
> **test-utf8.tex
> (./test-utf8.tex
> ! I can't find file `gr??e.tex'.
> l.220 \input gr??e.tex
> 
> I tried also with luatex 1.11.1, and also in context. It fails
> everywhere. pdftex has no problem, in miktex it works too.

No problem on Linux with luatex 1.11.1

Herbert

From kakuto at w32tex.org  Sun Oct 27 22:31:27 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Mon, 28 Oct 2019 06:31:27 +0900
Subject: luatex doesn't find files with non-ascii  on windows
In-Reply-To: <15nsvyfiuqdap.dlg@nililand.de>
References: <15nsvyfiuqdap.dlg@nililand.de>
Message-ID: <08EAC2AA812C4F369EF4D59CEC48AB7B@CJ3001517A>

Dear Urlike,

> \input gr??e
> \bye

Sorry. Please use a special option for lua[jit]tex for W32TeX,
-cmdx, as the first option, that is, argv[1], if
non-ascii file names are used:
lualatex -cmdx ...
It must be the first option. Otherwise it is silently ignored.
I'm taking this dirty method since my code for non-ascii file
names is incompatible with ConTeXt.

Thanks,
Akira


From karl at freefriends.org  Sun Oct 27 23:13:53 2019
From: karl at freefriends.org (Karl Berry)
Date: Sun, 27 Oct 2019 16:13:53 -0600
Subject: \pdfmajorversion
In-Reply-To: <CAMq1ado4SOWbgL2-LoCRkh8fKvJOO=jSaa4-5a0774uzksKkzA@mail.gmail.com>
Message-ID: <201910272213.x9RMDrbD021923@freefriends.org>

    mupdf is written in C, 

Yes, thanks. I know about mupdf. Luigi and I have discussed it at length.

    it's AGPL3 though

Indeed. AGPL is not acceptable for a TeX engine, IMNSHO ... -k



From news3 at nililand.de  Mon Oct 28 10:12:48 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Mon, 28 Oct 2019 10:12:48 +0100
Subject: luatex doesn't find files with non-ascii  on windows
References: <15nsvyfiuqdap.dlg@nililand.de>
 <08EAC2AA812C4F369EF4D59CEC48AB7B@CJ3001517A>
Message-ID: <xp4wspglhi4z$.dlg@nililand.de>

Am Mon, 28 Oct 2019 06:31:27 +0900 schrieb Akira Kakuto:

Dear Akira,

>> \input gr??e
>> \bye
> 
> Sorry. Please use a special option for lua[jit]tex for W32TeX,
> -cmdx, as the first option, that is, argv[1], if
> non-ascii file names are used:
> lualatex -cmdx ...
> It must be the first option. Otherwise it is silently ignored.
> I'm taking this dirty method since my code for non-ascii file
> names is incompatible with ConTeXt.

Ah, yes I now remember the discussions last year. 

Using the option works fine, but I think that a solution is needed
which activates this option as default on windows, like the
"command_line_encoding = utf-8" in texmf.cnf for the other engines. 

I asked the luatex maintainer, perhaps something can be found that
is compatible to ConTeXt. 


-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From kakuto at w32tex.org  Tue Oct 29 01:50:27 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Tue, 29 Oct 2019 09:50:27 +0900
Subject: luatex doesn't find files with non-ascii  on windows
In-Reply-To: <xp4wspglhi4z$.dlg@nililand.de>
References: <15nsvyfiuqdap.dlg@nililand.de>
 <08EAC2AA812C4F369EF4D59CEC48AB7B@CJ3001517A> <xp4wspglhi4z$.dlg@nililand.de>
Message-ID: <83136817670E4D93BC4274BD015A416C@CJ3001517A>

Dear Ulrike,

> I asked the luatex maintainer, perhaps something can be found that
> is compatible to ConTeXt.

My method needs kpathsea to search for non-ascii named files.
So I thought that I should not use it for ConTeXt.
However I find that in the present ConTeXt,
%utf-8
\starttext
\input kanji-name.tex
\stoptext
does not work on my Windows, where kanji-name.tex is a
file with Japanese kanji. It is not found.
So I think that it may not be bad to make -cmdx as the
default, and remove the option -cmdx.
Both in the old and the new cases, ConTeXt cannot find
non-ascii named files on Windows, but works fine for ascii names.

Thanks,
Akira


From kakuto at w32tex.org  Tue Oct 29 06:21:47 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Tue, 29 Oct 2019 14:21:47 +0900
Subject: luatex doesn't find files with non-ascii  on windows
In-Reply-To: <83136817670E4D93BC4274BD015A416C@CJ3001517A>
References: <15nsvyfiuqdap.dlg@nililand.de>
 <08EAC2AA812C4F369EF4D59CEC48AB7B@CJ3001517A> <xp4wspglhi4z$.dlg@nililand.de>
 <83136817670E4D93BC4274BD015A416C@CJ3001517A>
Message-ID: <C5EB1D5F827443F08E6D101DD5889819@CJ3001517A>

Dear Ulrike,

> So I think that it may not be bad to make -cmdx as the
> default, and remove the option -cmdx.

Done in the latest binaries in W32TeX.
-cmdx is not necessary in the latest ones.
(The option -cmdx exists for compatibility, but it does nothing.)

Thanks,
Akira


From jspitzm at gmail.com  Tue Oct 29 10:04:16 2019
From: jspitzm at gmail.com (jspitzm at gmail.com)
Date: Tue, 29 Oct 2019 10:04:16 +0100
Subject: luavlna
Message-ID: <93abefccce9d05b41f9fa4f0b6692e01636579ce.camel@gmail.com>

Hi Karl (and all)

In the recent update of luavlna, the file luavlna.tex ended in doc/,
whereas it should go to tex/. This file is \input by luavlna.sty (I
think that such files should probably get the endings *.def to avoid
such misunderstandings, but that's another story).

Thanks
J?rgen




From news3 at nililand.de  Tue Oct 29 13:16:44 2019
From: news3 at nililand.de (Ulrike Fischer)
Date: Tue, 29 Oct 2019 13:16:44 +0100
Subject: luatex doesn't find files with non-ascii  on windows
References: <15nsvyfiuqdap.dlg@nililand.de>
 <08EAC2AA812C4F369EF4D59CEC48AB7B@CJ3001517A> <xp4wspglhi4z$.dlg@nililand.de>
 <83136817670E4D93BC4274BD015A416C@CJ3001517A>
 <C5EB1D5F827443F08E6D101DD5889819@CJ3001517A>
Message-ID: <1lj16cv1o20tn$.dlg@nililand.de>

Dear Akira,

>> So I think that it may not be bad to make -cmdx as the
>> default, and remove the option -cmdx.
> 
> Done in the latest binaries in W32TeX.
> -cmdx is not necessary in the latest ones.
> (The option -cmdx exists for compatibility, but it does nothing.)

I found the latest binaries and it seems to work fine: I could use
non-ascii for the main file, \input and kpse.

Thanks.

-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From michal.h21 at gmail.com  Tue Oct 29 16:00:24 2019
From: michal.h21 at gmail.com (Michal Hoftich)
Date: Tue, 29 Oct 2019 16:00:24 +0100
Subject: luavlna
In-Reply-To: <93abefccce9d05b41f9fa4f0b6692e01636579ce.camel@gmail.com>
References: <93abefccce9d05b41f9fa4f0b6692e01636579ce.camel@gmail.com>
Message-ID: <CAOCj1OesduTQz=E7QfuPhWVbk9OU1P6JSXepX-_ZsvxW0w=gbw@mail.gmail.com>

Hi J?rgen,

> In the recent update of luavlna, the file luavlna.tex ended in doc/,
> whereas it should go to tex/. This file is \input by luavlna.sty (I
> think that such files should probably get the endings *.def to avoid
> such misunderstandings, but that's another story).

you are right, luavlna.tex is not a documentation file, but a file
with macros for both Plain and LaTeX. I will upload a new version
soon, because I've just fixed the bug you found regarding the
Polyglossia support.

Best,
Michal


From karl at freefriends.org  Tue Oct 29 22:27:22 2019
From: karl at freefriends.org (Karl Berry)
Date: Tue, 29 Oct 2019 15:27:22 -0600
Subject: luavlna
In-Reply-To: <93abefccce9d05b41f9fa4f0b6692e01636579ce.camel@gmail.com>
Message-ID: <201910292127.x9TLRMCK018991@freefriends.org>

    luavlna.tex ended in doc/,
    whereas it should go to tex/. 

Thanks. Fixed for tonight's update. -k

From kakuto at w32tex.org  Wed Oct 30 08:47:55 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Wed, 30 Oct 2019 16:47:55 +0900
Subject: luatex doesn't find files with non-ascii  on windows
In-Reply-To: <1lj16cv1o20tn$.dlg@nililand.de>
References: <15nsvyfiuqdap.dlg@nililand.de>
 <08EAC2AA812C4F369EF4D59CEC48AB7B@CJ3001517A> <xp4wspglhi4z$.dlg@nililand.de>
 <83136817670E4D93BC4274BD015A416C@CJ3001517A>
 <C5EB1D5F827443F08E6D101DD5889819@CJ3001517A>
 <1lj16cv1o20tn$.dlg@nililand.de>
Message-ID: <4979E9D480FC447BACACEBC88ADCFB47@CJ3001517A>

Dear Ulrike,

> I found the latest binaries and it seems to work fine: I could use
> non-ascii for the main file, \input and kpse.

luatex is used as an interpreter of many scripts in TeX.
It is quite possible that the new change may introduce many
undesirable side effects. Thus I recovered the original behavior
in the case of "luaonly" mode in the latest update.
If used as a TeX engine, the new change is enabled.

Thanks,
Akira


From kakuto at w32tex.org  Wed Oct 30 11:58:14 2019
From: kakuto at w32tex.org (Akira Kakuto)
Date: Wed, 30 Oct 2019 19:58:14 +0900
Subject: luatex doesn't find files with non-ascii  on windows
In-Reply-To: <4979E9D480FC447BACACEBC88ADCFB47@CJ3001517A>
References: <15nsvyfiuqdap.dlg@nililand.de>
 <08EAC2AA812C4F369EF4D59CEC48AB7B@CJ3001517A> <xp4wspglhi4z$.dlg@nililand.de>
 <83136817670E4D93BC4274BD015A416C@CJ3001517A>
 <C5EB1D5F827443F08E6D101DD5889819@CJ3001517A>
 <1lj16cv1o20tn$.dlg@nililand.de>
 <4979E9D480FC447BACACEBC88ADCFB47@CJ3001517A>
Message-ID: <C9AE8FA6C8CE4C2C810BD063DCE55C06@CJ3001517A>

Dear Ulrike,

> Thus I recovered the original behavior
> in the case of "luaonly" mode in the latest update.
> If used as a TeX engine, the new change is enabled.

There is a bug in the updated binaries.
Unfortunately they are already in some mirrors.
I'll fix soon.

Thanks,
Akira


From a.soeyler at fu-berlin.de  Thu Oct 31 16:37:46 2019
From: a.soeyler at fu-berlin.de (brahms)
Date: Thu, 31 Oct 2019 16:37:46 +0100
Subject: Incorrect permissions on new packages
Message-ID: <e760c4f7-453e-e28d-3443-4adf2e62edf7@fu-berlin.de>

Hey fellas,

today I installed a few packages that I needed for a new template but I 
kept getting the error that the package was not installed. After looking 
a bit into it I realized, that for some reason all new packages had the 
permissions set to 0700, while the other packages had 0755 (i mean the 
directories of the .sty files).

I am not sure if the cause lies with 'tlmgr' or something else, but just 
wanted to drop in to let you know of it.



From joseph.wright at morningstar2.co.uk  Thu Oct 31 19:01:34 2019
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Thu, 31 Oct 2019 18:01:34 +0000
Subject: \pdfmajorversion
In-Reply-To: <a2f780d2-e9d5-0cd3-6253-40cbd9a8b093@morningstar2.co.uk>
References: <78f26bcc-5726-385f-d7d7-7ee81fb5dfa1@morningstar2.co.uk>
 <cf32f1c9-0da3-23f2-5e6b-785bb460514d@morningstar2.co.uk>
 <a2f780d2-e9d5-0cd3-6253-40cbd9a8b093@morningstar2.co.uk>
Message-ID: <bfb82243-c369-a3c6-08e0-9307b682bfd1@morningstar2.co.uk>

On 21/10/2019 11:54, Joseph Wright wrote:
> On 20/10/2019 22:03, Joseph Wright wrote:
>> On 20/10/2019 21:34, Joseph Wright wrote:
>>> Hello all,
>>>
>>> I've started looking at PDF-2.0 support for pdfTeX. The attached 
>>> introduces \pdfmajorversion for the binary: I need to look at the 
>>> manual too.
>>>
>>> At present, this does *not* address PDF inclusion: that requires 
>>> minimal changes in the WEB but more significant changes in the C, and 
>>> that looks more 'interesting'. I'm sending this first so others can 
>>> test, etc.
>>>
>>> Feedback welcome.
>>>
>>> Joseph
>>
>> I'm working slowly on other stuff:
>>
>> https://github.com/josephwright/texlive-source/tree/PDF-2.0
>>
>> Joseph
> 
> Updated version of the patch is attached. This should cover all of the 
> key points:
> 
> - PDF major version is allowed from 1 upward
> - Minor fixes compared with previous patch
> - Image inclusion checks \pdfmajorversion
> 
> Some of the error messages were a bit long if I said both 
> \pdfmajorversion and \pdfminorversion, hence the re-phrasing.
> 
> Testing to date has been (a) does it build (Ubuntu as WSL, Travis-CI) 
> and (b) does a very simple LaTeX document work. I'm pretty confident 
> that setting "%PDF-2.0" is fine, but the image inclusion part may be 
> more tricky. (In particular, I'm not sure whether the build set up uses 
> the Poppler branch for PDF data retrieval.)
> 
> Joseph

Does the patch look OK ... I've heard no comment, and the LaTeX team 
were recently asked about exactly this issue at the macro level!

Joseph

From karl at freefriends.org  Thu Oct 31 22:30:17 2019
From: karl at freefriends.org (Karl Berry)
Date: Thu, 31 Oct 2019 15:30:17 -0600
Subject: \pdfmajorversion
In-Reply-To: <bfb82243-c369-a3c6-08e0-9307b682bfd1@morningstar2.co.uk>
Message-ID: <201910312130.x9VLUHm9027984@freefriends.org>

    [ Discussing that patch at:
      https://tug.org/pipermail/tex-live/2019-October/044222.html ]
    
    Does the patch look OK ... I've heard no comment, and the LaTeX team 
    were recently asked about exactly this issue at the macro level!

I think I replied that I would work on this (for the pdftex repo) as
soon as we got through adding the TL "versioning" of
containers. Finishing that is still a little while away.

Nothing problematic jumped out at me when I looked at the patch. Adding
a \pdfmajorversion seems the only plausible approach. It will take some
testing of including/generating with the various combinations to see if
anything untoward happens at runtime, I'm not smart enough to intuit all
that from looking at the changes. Plus updating the doc, which can often
lead to tweaking the code.

Assuming we want the same for the other engines, perhaps also send it to
Jonathan, Luigi, Akira, others, if not already done?

In any case, thanks very much for doing all the work. --best, karl.

From karl at freefriends.org  Thu Oct 31 23:20:22 2019
From: karl at freefriends.org (Karl Berry)
Date: Thu, 31 Oct 2019 16:20:22 -0600
Subject: Incorrect permissions on new packages
In-Reply-To: <e760c4f7-453e-e28d-3443-4adf2e62edf7@fu-berlin.de>
Message-ID: <201910312220.x9VMKMF0030011@freefriends.org>

    permissions set to 0700, while the other packages had 0755 (i mean the 
    directories of the .sty files).

I know of nothing that has changed on the TL side that would affect
this. The directory
  texmf-dist/tex/latex/latino-sine-flexione/
for the package I added yesterday is mode 755 for me.

Perhaps something in your system changed and your umask during the
updates was now 0700 ... --best, karl.

