From karl at freefriends.org  Fri Jun  1 01:20:32 2007
From: karl at freefriends.org (Karl Berry)
Date: Thu, 31 May 2007 18:20:32 -0500
Subject: [tex-live] Bug#426790: mathpple.map should be listed
	in	updmap.cfg
In-Reply-To: <87fy5dxy47.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <200705312320.l4VNKWZ06317@f7.net>

    > MixedMap psfonts.amz

This file contains map lines for many basic math fonts, such as cmbsy5.
Those lines are in the TL psfonts.map, although I am not sure which map
file they come from.  Probably one of the ones in
texmf-dist/tpm/ams.tpm.

All those ams-* and psfonts.* map conglomerations confuse me.

    > MixedMap mathpple.map

That contains definitions for just two fonts, eurbo10 and eurmo10.
I've added mathpple.map to ams.tpm, since I don't see a better place for
it and that's where the Type 1's are.

Just for the record, I noticed that there is psnfss.tpm as part of the
psnfss package containing the same two lines.  TL doesn't use
psnfss.tpm, and it contains a ton of other definitions for the basic
fonts.  I feel quite at sea ...

    > mathpple is unusable

Just by the by, it also declares itself obsolete :).

Best,
Karl

From vext01 at gmail.com  Fri Jun  1 01:42:11 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Fri, 1 Jun 2007 00:42:11 +0100
Subject: [tex-live] post build of source.tar.bz2 (updmap-sys and
	kpsewhich)
In-Reply-To: <alpine.DEB.0.99.0705312212450.7394@hahepc1.hahe>
References: <a6e8c1d0705280731p7dbb9923yaf417223e2c3eaa7@mail.gmail.com>
	<a6e8c1d0705310520n31a8e453vcccac15896c1f8a7@mail.gmail.com>
	<87d50huo3p.fsf@riesling.zuerich.kuesterei.ch>
	<a6e8c1d0705310719qf0118fbx1417514b36291807@mail.gmail.com>
	<87k5up3r2q.fsf@riesling.zuerich.kuesterei.ch>
	<alpine.DEB.0.99.0705311824490.5324@hahepc1.hahe>
	<a6e8c1d0705311100q4e3efb2cj7b29f64b881b0988@mail.gmail.com>
	<alpine.DEB.0.99.0705312039480.5930@hahepc1.hahe>
	<a6e8c1d0705311301m4548397dg7e910f343e256634@mail.gmail.com>
	<alpine.DEB.0.99.0705312212450.7394@hahepc1.hahe>
Message-ID: <a6e8c1d0705311642r3e31f16fvc387cb70dd5764ce@mail.gmail.com>

Heya,

Solved!

in texmf.cnf SYSCONFDIR should be set to TEXMFMAIN it is not.

My next question is should --sysconfdir (configure) set that? If it
should, it is not and also the default is not EPREFIX/etc as --help
might suggest.


Thanks for all of your help!

-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From vext01 at gmail.com  Fri Jun  1 01:50:56 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Fri, 1 Jun 2007 00:50:56 +0100
Subject: [tex-live] post build of source.tar.bz2 (updmap-sys and
	kpsewhich)
In-Reply-To: <a6e8c1d0705311642r3e31f16fvc387cb70dd5764ce@mail.gmail.com>
References: <a6e8c1d0705280731p7dbb9923yaf417223e2c3eaa7@mail.gmail.com>
	<87d50huo3p.fsf@riesling.zuerich.kuesterei.ch>
	<a6e8c1d0705310719qf0118fbx1417514b36291807@mail.gmail.com>
	<87k5up3r2q.fsf@riesling.zuerich.kuesterei.ch>
	<alpine.DEB.0.99.0705311824490.5324@hahepc1.hahe>
	<a6e8c1d0705311100q4e3efb2cj7b29f64b881b0988@mail.gmail.com>
	<alpine.DEB.0.99.0705312039480.5930@hahepc1.hahe>
	<a6e8c1d0705311301m4548397dg7e910f343e256634@mail.gmail.com>
	<alpine.DEB.0.99.0705312212450.7394@hahepc1.hahe>
	<a6e8c1d0705311642r3e31f16fvc387cb70dd5764ce@mail.gmail.com>
Message-ID: <a6e8c1d0705311650k59de5b55n739d9a5d69b41253@mail.gmail.com>

On 01/06/07, Edd Barrett <vext01 at gmail.com> wrote:
> in texmf.cnf SYSCONFDIR should be set to TEXMFMAIN it is not.

Sorry its TEXMFSYSCONFIG, i guess they are different.

> --
> Best Regards
>
> Edd
>
> ---------------------------------------------------
> http://students.dec.bournemouth.ac.uk/ebarrett
>


-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From karl at freefriends.org  Fri Jun  1 01:56:53 2007
From: karl at freefriends.org (Karl Berry)
Date: Thu, 31 May 2007 18:56:53 -0500
Subject: [tex-live] Patch for "texdoc -s" to use the ls-R database
In-Reply-To: <877iqqusdc.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <200705312356.l4VNurr14061@f7.net>

Hi Frnak,

    It uses a new switch for the new behavior (-S)

My inclination would be to not have a new option just to enable the
"right" behavior.  Just have the right behavior by default.

    NODOC_PATTERN="\.tfm$|\.afm$|\.enc$|\.pfb$|\.pfa$|\.pfm$|\.vf|\.fd$|\.ttf$|\.htf$|\.mf$|\.otf$|\.[[:digit:]]*pk$"

Since everything ends in $ (except you forgot it on vf, unless you were
trying to ignore the few vf2/vf3 files?), might as well just assume
that.  It's no loss in generality, since a pattern could end with .*.
(That is, could egrep for "($NODOC_PATTERN)\$".)

    pattern should finally be made customizable with an option.  I also

I guess.  The chances of anyone actually wanting to customize it seem to
be between slim and none to me.

    call kpsewhere instead of kpsewhich in this case.

I didn't even know kpsewhere existed.  It should never have been
implemented, it seems to me.  It is what kpsewhich --all did, but
apparently that got broken at some intervening time.  Sigh.

    grep only through the doc parts of ls-R

If you mean extract out the doc subtrees only, maybe
filter first with sed -n '/^\.doc/,/^$/p' ?
Or it could definitely be done with awk.

    Or I reimplement texdoc in Perl - 

If you really have the energy!

    maybe that's even an improvement for the windows people?

Presumably it would be.

    With the old implementation (texdoc -s lm), I get 

With the texdoc in TL2007, texdoc -s lm takes 7sec on the first run for
me.  (Much less than 1sec on the second run, since it's all in disk
cache, presumably.)

Cheers,
karl

From karl at freefriends.org  Fri Jun  1 00:56:49 2007
From: karl at freefriends.org (Karl Berry)
Date: Thu, 31 May 2007 17:56:49 -0500
Subject: [tex-live] Misplaced file(s): mathdots
In-Reply-To: <20070531212721.GA4462@irwin.vpn.uni-freiburg.de>
Message-ID: <200705312256.l4VMuna00304@f7.net>

    In the .ins file the locations can be declared by \usedir.

I wasn't aware of this.  What does such a declaration really mean?  A
\message at the end of the run?  Nothing in the TL process reads that ...


From oberdiek at uni-freiburg.de  Fri Jun  1 08:32:49 2007
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Fri, 1 Jun 2007 08:32:49 +0200
Subject: [tex-live] Misplaced file(s): mathdots
In-Reply-To: <200705312256.l4VMuna00304@f7.net>
References: <20070531212721.GA4462@irwin.vpn.uni-freiburg.de>
	<200705312256.l4VMuna00304@f7.net>
Message-ID: <20070601063249.GB7484@irwin.vpn.uni-freiburg.de>

On Thu, May 31, 2007 at 05:56:49PM -0500, Karl Berry wrote:

>     In the .ins file the locations can be declared by \usedir.
> 
> I wasn't aware of this.  What does such a declaration really mean?  A
> \message at the end of the run?  Nothing in the TL process reads that ...

Excerpt from `atbegshi.ins':

  \generate{%
    \file{atbegshi.ins}{\from{atbegshi.dtx}{install}}%
    \file{atbegshi.drv}{\from{atbegshi.dtx}{driver}}%
    \usedir{tex/generic/oberdiek}%
    \file{atbegshi.sty}{\from{atbegshi.dtx}{package}}%
    \usedir{doc/latex/oberdiek}%
    \file{atbegshi-example.tex}{\from{atbegshi.dtx}{example}}%
    \file{atbegshi-test1.tex}{\from{atbegshi.dtx}{test1}}%
    \file{atbegshi-test2.tex}{\from{atbegshi.dtx}{test2}}%
  }

That means that atbegshi.ins and atbegshi.drv are generated
in the current directory, they don't need a TDS location.
The package is generated as TDS:tex/generic/oberdiek/atbegshi.sty
and the example and test files are put in TDS:doc/latex/oberdiek/.

It does not have an effect, if this feature is not enabled by
the user. He enables and configures it in his configuration
file `docstrip.cfg':

* \BaseDirectory{...} points to the root of the TDS tree
  where the package should be installed.

* \UseTDS enables it.

If \usedir is set, then docstrip will not unpack the files in
the current directory but in the directory constructed by
\BaseDirectory and \usedir.

A disadvantage remains that TeX cannot create directories,
therefore I am using the shell-escape feature in the scripts
of project latex-tds. The commands of docstrip.cfg:

  \BaseDirectory{texmf}
  \UseTDS

  \def\shell#{\immediate\write18}
  \def\mkdir#1{\shell{mkdir -p #1}}

  \let\saved at usedir\usedir
  \def\usedir#1{%
    \mkdir{\basedir#1}%
    \saved at usedir{#1}%
  }
  \endinput

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>

From Robin.Fairbairns at cl.cam.ac.uk  Fri Jun  1 10:49:40 2007
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Fri, 01 Jun 2007 09:49:40 +0100
Subject: [tex-live] Misplaced file(s): mathdots
In-Reply-To: Your message of Thu, 31 May 2007 23:27:21 +0200.
	<20070531212721.GA4462@irwin.vpn.uni-freiburg.de> 
Message-ID: <26017.1180687780@mole.cl.cam.ac.uk>

Heiko Oberdiek <oberdiek at uni-freiburg.de> wrote:

> On Thu, May 31, 2007 at 02:55:13PM -0500, Dan Luecking wrote:
> 
> > [PS:
> > This has happened a few times in past TeXLives and in other TeX
> > distributions. It seems highly likely there will be other
> > such misplacements in the future (and even now). Is there a way
> > of packaging things for CTAN so that this is less likely to
> > happen (apart from a tds ready zip archive)?

isn't it rather indicative that the file is on the ctan generic tree?

i've certainly moved things from there when it was clear that they
_didn't_ work with latex

> In the .ins file the locations can be declared by \usedir.
> I am using this information in the project latex-tds.

i suppose that's fine when you're packaging stuff that "ought" to be on
texmf-dist.  though of course it doesn't work for miktex, whose texmf
trees' names are getting odder and odder (\program files\miktex 2.6\miktex
on my latest install -- i forget what it was last time, but i'm fairly
sure it was different).

not all of us distribute things that are *definitely* going to be
provided as packages by distributions (hence getting around tree naming
problems)...

r

From Robin.Fairbairns at cl.cam.ac.uk  Fri Jun  1 12:15:25 2007
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Fri, 01 Jun 2007 11:15:25 +0100
Subject: [tex-live] Fedora 7
Message-ID: <28036.1180692925@mole.cl.cam.ac.uk>

has just been released[*], and is still using tetex :-(

[*] or rather, i've just logged in to my first such machine; it may have
been released as much as a couple of days ago...

From frank at kuesterei.ch  Fri Jun  1 14:38:37 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Fri, 01 Jun 2007 14:38:37 +0200
Subject: [tex-live] Patch for "texdoc -s" to use the ls-R database
In-Reply-To: <200705312356.l4VNurr14061@f7.net> (Karl Berry's message of "Thu\,
	31 May 2007 18\:56\:53 -0500")
References: <200705312356.l4VNurr14061@f7.net>
Message-ID: <87myzj4zoy.fsf@riesling.zuerich.kuesterei.ch>

karl at freefriends.org (Karl Berry) wrote:

>     call kpsewhere instead of kpsewhich in this case.
>
> I didn't even know kpsewhere existed.  It should never have been
> implemented, it seems to me.  It is what kpsewhich --all did, but
> apparently that got broken at some intervening time.  Sigh.

Any idea why it stopped working?

>     grep only through the doc parts of ls-R
>
> If you mean extract out the doc subtrees only, maybe
> filter first with sed -n '/^\.doc/,/^$/p' ?

sed -n '/^\.\/doc/,/^$/ p'

seems to work.

>     With the old implementation (texdoc -s lm), I get 
>
> With the texdoc in TL2007, texdoc -s lm takes 7sec on the first run for
> me.  (Much less than 1sec on the second run, since it's all in disk
> cache, presumably.)

That's really a big difference.  I hope it's not my harddisk which
causes this, like some DVD media...

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From jadefalkner at imperium-noctem.de  Fri Jun  1 15:03:47 2007
From: jadefalkner at imperium-noctem.de (Ronny Fauth)
Date: Fri, 01 Jun 2007 15:03:47 +0200
Subject: [tex-live] Fedora 7
In-Reply-To: <28036.1180692925@mole.cl.cam.ac.uk>
References: <28036.1180692925@mole.cl.cam.ac.uk>
Message-ID: <46601933.7080409@imperium-noctem.de>

Robin Fairbairns gab folgendes von sich am 01.06.2007 12:15:
> has just been released[*], and is still using tetex :-(
> 
> [*] or rather, i've just logged in to my first such machine; it may have
> been released as much as a couple of days ago...
> 

According to ReleaseEngineering/Meetings/2007-apr-16 this feature is not
ready for F7 and will not be included (16-APR-07) [1]

[1] http://fedoraproject.org/wiki/Releases/FeatureTexLive

Regards

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 251 bytes
Desc: OpenPGP digital signature
Url : http://tug.org/pipermail/tex-live/attachments/20070601/be6406ff/attachment.bin 

From rivanvx at gmail.com  Fri Jun  1 15:42:08 2007
From: rivanvx at gmail.com (=?UTF-8?Q?Vedran_Mileti=C4=87?=)
Date: Fri, 1 Jun 2007 15:42:08 +0200
Subject: [tex-live] Fedora 7
In-Reply-To: <46601933.7080409@imperium-noctem.de>
References: <28036.1180692925@mole.cl.cam.ac.uk>
	<46601933.7080409@imperium-noctem.de>
Message-ID: <fd3eb9bf0706010642o4d33b62dtcb90acbfb56c7538@mail.gmail.com>

As far as I see, only Debian has fully working and modular TL2007.
It's actually one of the reasons why I switched to Debian.

2007/6/1, Ronny Fauth <jadefalkner at imperium-noctem.de>:
> Robin Fairbairns gab folgendes von sich am 01.06.2007 12:15:
> > has just been released[*], and is still using tetex :-(
> >
> > [*] or rather, i've just logged in to my first such machine; it may have
> > been released as much as a couple of days ago...
> >
>
> According to ReleaseEngineering/Meetings/2007-apr-16 this feature is not
> ready for F7 and will not be included (16-APR-07) [1]
>
> [1] http://fedoraproject.org/wiki/Releases/FeatureTexLive
>
> Regards
>
>
>


-- 
Vedran Mileti?
Student at Math Department, University of Rijeka

From Robin.Fairbairns at cl.cam.ac.uk  Fri Jun  1 16:30:20 2007
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Fri, 01 Jun 2007 15:30:20 +0100
Subject: [tex-live] Fedora 7
In-Reply-To: Your message of Fri, 01 Jun 2007 15:42:08 +0200.
	<fd3eb9bf0706010642o4d33b62dtcb90acbfb56c7538@mail.gmail.com> 
Message-ID: <30360.1180708220@mole.cl.cam.ac.uk>

Vedran Mileti? <rivanvx at gmail.com> wrote:

> As far as I see, only Debian has fully working and modular TL2007.
> It's actually one of the reasons why I switched to Debian.

sadly, i don't have that level of control over the several hundred linux
machines in this department :-}

since redhat 9 days, i've been providing alternatives to the rh tex
rpms...  i just haven't got around to generating one for tex live, yet.

life as a sysadmin is *such* fun.

From zdenek.wagner at gmail.com  Fri Jun  1 16:48:14 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 1 Jun 2007 16:48:14 +0200
Subject: [tex-live] Bug in \discretionary in XeLaTeX for Linux
Message-ID: <8719b6240706010748v2ce7ec5bh8d3a9c6198c3eb23@mail.gmail.com>

Hello,
after some problems with \discretionary I made a sample file which
contains just path\discretionary{+}{:}{/} so that it outputs path/file
if not hyphenated and

path+
:file

if hyphenated. It works so in pdflatex. With XeLaTeX the same file
yields path/le if not hyphenated and

path+
:le

if hyphenated, i.e. two letters disappear.
-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From gnwiii at gmail.com  Fri Jun  1 20:04:08 2007
From: gnwiii at gmail.com (George N. White III)
Date: Fri, 1 Jun 2007 15:04:08 -0300
Subject: [tex-live] Patch for "texdoc -s" to use the ls-R database
In-Reply-To: <87myzj4zoy.fsf@riesling.zuerich.kuesterei.ch>
References: <200705312356.l4VNurr14061@f7.net>
	<87myzj4zoy.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <22af238a0706011104y61a6377n4f2393afc57a9722@mail.gmail.com>

On 6/1/07, Frank K?ster <frank at kuesterei.ch> wrote:

> karl at freefriends.org (Karl Berry) wrote:
>
> >     call kpsewhere instead of kpsewhich in this case.
> >
> > I didn't even know kpsewhere existed.  It should never have been
> > implemented, it seems to me.  It is what kpsewhich --all did, but
> > apparently that got broken at some intervening time.  Sigh.
>
> Any idea why it stopped working?
>
> >     grep only through the doc parts of ls-R
> >
> > If you mean extract out the doc subtrees only, maybe
> > filter first with sed -n '/^\.doc/,/^$/p' ?
>
> sed -n '/^\.\/doc/,/^$/ p'
>
> seems to work.

TDS says system/platform specific docs can be elsewhere, e.g.,
  texmf/vms/help (or, more likely, texmf/windujour/help for .chm files).

I suppose texdoc could always be configured to add such directories
if anyone discovers the need and actually has sed, etc.

> >     With the old implementation (texdoc -s lm), I get
> >
> > With the texdoc in TL2007, texdoc -s lm takes 7sec on the first run for
> > me.  (Much less than 1sec on the second run, since it's all in disk
> > cache, presumably.)

Think about people running tl in a linux VM or native linux on a P3

On my office P3 it took 45 s. for the first search, 11 for the 2nd
using the original
TL2007 texdoc.  I tend to avoid texdoc in favor of locate.

"texdoc -S lm-info" is much faster than the old version, but "texdoc -S lm" is
slower.  On the SGI at work (after editing "/bin/sh" --> /bin/ksh" and
"egrep -q"
--> "egrep -s") :

$ time texdoc -s lm
[...]
real    0m4.318s
user    0m0.095s
sys     0m1.021s


$ time texdoc -S lm
Directories that match lm:
/nfs/orion/disk2/TeX/texlive/2007/texmf-dist/doc/fonts/lm
/nfs/orion/disk2/TeX/texlive/2007/texmf-dist/doc/latex/elmath
/nfs/orion/disk2/TeX/texlive/2007/texmf-dist/doc/latex/epiolmec

Files that match lm
[...]
real    0m7.269s
user    0m4.571s
sys     0m1.351s

The difference is even greater for linux on P-III.

On a faster machine I tend to use locate or the full-text
index/search tools (beagle), so texdoc gets ignored.

> That's really a big difference.  I hope it's not my harddisk which
> causes this, like some DVD media...




-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From jonathan_kew at sil.org  Fri Jun  1 20:00:35 2007
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Fri, 1 Jun 2007 19:00:35 +0100
Subject: [tex-live] Bug in \discretionary in XeLaTeX for Linux
In-Reply-To: <8719b6240706010748v2ce7ec5bh8d3a9c6198c3eb23@mail.gmail.com>
References: <8719b6240706010748v2ce7ec5bh8d3a9c6198c3eb23@mail.gmail.com>
Message-ID: <641AA2B8-68FB-4626-A974-F81718967A59@sil.org>

On 1 Jun 2007, at 3:48 pm, Zdenek Wagner wrote:

> Hello,
> after some problems with \discretionary I made a sample file which
> contains just path\discretionary{+}{:}{/} so that it outputs path/file
> if not hyphenated and
>
> path+
> :file
>
> if hyphenated. It works so in pdflatex. With XeLaTeX the same file
> yields path/le if not hyphenated and
>
> path+
> :le
>
> if hyphenated, i.e. two letters disappear.

Yes, this is due to a bug in XeTeX; it was identified (and fixed in  
the XeTeX source repository) during the EuroBachoTeX conference  
(thanks to Jano Kula for bringing it to my attention), but of course  
the TeXLive release was well before this date.

If you're prepared to rebuild XeTeX from the development sources, the  
problem should go away, otherwise you'll need to wait for a new  
release; sorry!

JK


From karl at freefriends.org  Fri Jun  1 20:35:19 2007
From: karl at freefriends.org (Karl Berry)
Date: Fri, 1 Jun 2007 13:35:19 -0500
Subject: [tex-live] tex live 2007 released
In-Reply-To: <200702281523.l1SFNxT17776@cressida.cert.fr>
Message-ID: <200706011835.l51IZJh32571@f7.net>

Hi Jean-Pierre,

Back on this report from February:

    There must be somewhere in a Makefile a reference to $EXXXX
    instead of $(EXXXX)...

I am unable to find any bare $E in a Makefile.  I did a test build after
export E=karltest and it worked fine.

If the problem persists for you, please try to track down what package
contains the problem ...

best,
Karl

From karl at freefriends.org  Sun Jun  3 01:12:40 2007
From: karl at freefriends.org (Karl Berry)
Date: Sun, 3 Jun 2007 01:12:40 +0200
Subject: [tex-live] dvips config.ps letter/a4
Message-ID: <200706022312.l52NCeo29712@tug.org>

After consulting with Tom and Akira and Dick, I've changed the a4 and
letter paper size definitions in the dvips config.ps to execute the
setpagedevice operator if it exists, else execute the a4/letter
operators if they exist, or do nothing if nothing is available.

I also changed the a4size and letterSize paper size definitions in
config.ps to be identical to a4 and letter.

The new file is at
http://tug.org/svn/texlive/trunk/Master/texmf/dvips/config/config.ps?view=log
If anyone else feels like testing, please do.

(I also changed texconfig to use the names a4/letter instead of a4size
and letterSize, since they are simpler.)

The reason for all this is so that ps2pdf and maybe other distillers
have a better chance of working.  In the past, it would not propagate
the correct paper size through to the pdf without more work.

karl

--
% 0 0 595 842 is the right bounding box that applications expect
% for A4.  Since dvips always rounds up, choose something slightly
% smaller for our paper size.

@ a4 209.9mm 297.04mm
@+ ! %%DocumentPaperSizes: a4
@+ %%BeginPaperSize: a4
@+ /setpagedevice where
@+  { pop << /PageSize [595 842] >> setpagedevice }
@+  { /a4 where { pop a4 } if }
@+ ifelse
@+ %%EndPaperSize

@ letter 8.5in 11in
@+ ! %%DocumentPaperSizes: Letter
@+ %%BeginPaperSize: Letter
@+ /setpagedevice where
@+   { pop << /PageSize [612 792] >> setpagedevice }
@+   { /letter where { pop letter } if }
@+ ifelse
@+ %%EndPaperSize

From zdenek.wagner at gmail.com  Sun Jun  3 01:43:51 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sun, 3 Jun 2007 01:43:51 +0200
Subject: [tex-live] dvips config.ps letter/a4
In-Reply-To: <200706022312.l52NCeo29712@tug.org>
References: <200706022312.l52NCeo29712@tug.org>
Message-ID: <8719b6240706021643i4b28c128pd715d68c8e5ab7f6@mail.gmail.com>

2007/6/3, Karl Berry <karl at freefriends.org>:
> After consulting with Tom and Akira and Dick, I've changed the a4 and
> letter paper size definitions in the dvips config.ps to execute the
> setpagedevice operator if it exists, else execute the a4/letter
> operators if they exist, or do nothing if nothing is available.
>
> I also changed the a4size and letterSize paper size definitions in
> config.ps to be identical to a4 and letter.
>
The bounding box for PS is correct but the specification of the
formats requires integer numbers in milimeters. These are the
definitions takem from the textbooks on typography:

a0 841mm 1189mm
a1 594mm 841mm
a2 420mm 594mm
a3 297mm 420mm
a4 210mm 297mm
a5 148mm 210mm
a6 105mm 148mm
a7 74mm 105mm
a8 52mm 74mm
a9 37mm 52mm
a10 26mm 37mm
b0 1000mm 1414mm
b1 707mm 1000mm
b2 500mm 707mm
b3 353mm 500mm
b4 250mm 353mm
b5 176mm 250mm
b6 125mm 176mm
b7 88mm 125mm
b8 62mm 88mm
b9 44mm 62mm
b10 31mm 44mm
c0 917mm 1279mm
c1 648mm 917mm
c2 458mm 648mm
c3 324mm 458mm
c4 229mm 324mm
c5 162mm 229mm
c6 114mm 162mm
c7 81mm 114mm
c8 57mm 81mm
c9 40mm 57mm
c10 28mm 40mm


> The new file is at
> http://tug.org/svn/texlive/trunk/Master/texmf/dvips/config/config.ps?view=log
> If anyone else feels like testing, please do.
>
> (I also changed texconfig to use the names a4/letter instead of a4size
> and letterSize, since they are simpler.)
>
> The reason for all this is so that ps2pdf and maybe other distillers
> have a better chance of working.  In the past, it would not propagate
> the correct paper size through to the pdf without more work.
>
> karl
>
> --
> % 0 0 595 842 is the right bounding box that applications expect
> % for A4.  Since dvips always rounds up, choose something slightly
> % smaller for our paper size.
>
> @ a4 209.9mm 297.04mm
> @+ ! %%DocumentPaperSizes: a4
> @+ %%BeginPaperSize: a4
> @+ /setpagedevice where
> @+  { pop << /PageSize [595 842] >> setpagedevice }
> @+  { /a4 where { pop a4 } if }
> @+ ifelse
> @+ %%EndPaperSize
>
> @ letter 8.5in 11in
> @+ ! %%DocumentPaperSizes: Letter
> @+ %%BeginPaperSize: Letter
> @+ /setpagedevice where
> @+   { pop << /PageSize [612 792] >> setpagedevice }
> @+   { /letter where { pop letter } if }
> @+ ifelse
> @+ %%EndPaperSize
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From reinhard.kotucha at web.de  Sun Jun  3 01:30:02 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sun, 3 Jun 2007 01:30:02 +0200
Subject: [tex-live] TL-CD compression
Message-ID: <18017.64890.83663.121776@zarniwoop.ms25.local>

Hi,
currently the TL-CD is using zip to compress packages.  A few days
before TL-2007 had been frozen a few files had to be removed  in order
to get evreything on the CD.  In TL-2008 there will be even more stuff.

I just copied the install CD to disk and converted all .zip files to
.tar.bz2 and .tar.gz.

   $ du -sc TL2007-*
   655660  TL2007-tbz
   695896  TL2007-tgz
   728072  TL2007-zip

It seems that it is not worthwhile to consider switching from .zip to
.tar.gz since the gain is only 4%.  But .tar.bz2 is abt. 10% smaller,
the difference is 72.412 MB.

In my opinion the difference is significant.  Are there any good
reasons not to use .tar.bz2 instead of .zip?

bzip2 is horribly slow but if files are read from a CD/DVD or from the
network I think that it doesn't matter very much.

There would even be enough space left to provide emacs.

Since Norbert is writing the install scripts from scratch it makes
sense to consider whether switching from .zip to .tar.bz2 is reasonable. 

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From karl at freefriends.org  Sun Jun  3 01:58:14 2007
From: karl at freefriends.org (Karl Berry)
Date: Sat, 2 Jun 2007 18:58:14 -0500
Subject: [tex-live] dvips config.ps letter/a4
In-Reply-To: <8719b6240706021643i4b28c128pd715d68c8e5ab7f6@mail.gmail.com>
Message-ID: <200706022358.l52NwEV09010@f7.net>

    but the specification of the
    formats requires integer numbers in milimeters.

Why?  These definitions are read only by dvips, to decide which
definition to apply.  It accepts the usual TeX <dimen>s here.

From karl at freefriends.org  Sun Jun  3 02:15:34 2007
From: karl at freefriends.org (Karl Berry)
Date: Sat, 2 Jun 2007 19:15:34 -0500
Subject: [tex-live] The suggestions (from tex-d-l) (Re: Comment
	on	Re:	TeXLive-CD/DVD (Installation))
In-Reply-To: <18005.25026.748396.297222@gandalf.daimi.au.dk>
Message-ID: <200706030015.l530FY412140@f7.net>

     > > The existence of /etc/debian_version.

Given the complicated relationships, I do not think it is wise to try to
check for a specific (GNU/)Linux distribution in the TL installation
scripts.  It seems like it is going rather far afield, and would be
fragile.

It would be easy and reliable to check for a Linux kernel in general,
with uname.

But what could a message say?  All I can think of is something like this:

  You are running on a GNU/Linux system.  TeX Live is available via
  native packages for many such systems; you may prefer to install it
  that way.

If I was a user who didn't already know all the details, I would just be
confused by something so bland.  And if I do know all the details, then
I don't need the message to tell me.  

Furthermore, there are other sorts of systems with native packaging,
namely OpenBSD (now), MacOSX, maybe Solaris, for all I know.  Another
one might come along at any time.

All I can think of to do is put information on the web pages (where I am
happy to do so), instead of freezing knowledge into the install scripts.

k

From karl at freefriends.org  Sun Jun  3 02:04:18 2007
From: karl at freefriends.org (Karl Berry)
Date: Sat, 2 Jun 2007 19:04:18 -0500
Subject: [tex-live] TL-CD compression
In-Reply-To: <18017.64890.83663.121776@zarniwoop.ms25.local>
Message-ID: <200706030004.l5304IG10310@f7.net>

    the difference is 72.412 MB.

I am doubtful that even that will be enough to make the difference
between including all packages or not.  I fear that a completely
different install routine will be needed (which it will be anyway if the
new infrastructure comes to pass), one that does not assume the same set
of packages are in both distributions.  Or drop inst altogether.
Or something.

    Are there any good reasons not to use .tar.bz2 instead of .zip?

We actually tried bz2 at one point, and my recollection is that Fabrice
said the slow decompression made a *huge* difference.

By the way, I have heard that 9zip does even better compression than
bz2.  Don't know about decompression speed.

karl

From ghibo at mandriva.com  Sun Jun  3 13:22:09 2007
From: ghibo at mandriva.com (=?ISO-8859-1?Q?Giuseppe_Ghib=F2?=)
Date: Sun, 03 Jun 2007 13:22:09 +0200
Subject: [tex-live] TL-CD compression
In-Reply-To: <200706030004.l5304IG10310@f7.net>
References: <200706030004.l5304IG10310@f7.net>
Message-ID: <4662A461.2010501@mandriva.com>

Karl Berry ha scritto:

>     the difference is 72.412 MB.
> 
> I am doubtful that even that will be enough to make the difference
> between including all packages or not.  I fear that a completely
> different install routine will be needed (which it will be anyway if the
> new infrastructure comes to pass), one that does not assume the same set
> of packages are in both distributions.  Or drop inst altogether.
> Or something.
> 
>     Are there any good reasons not to use .tar.bz2 instead of .zip?
> 
> We actually tried bz2 at one point, and my recollection is that Fabrice
> said the slow decompression made a *huge* difference.
> 
> By the way, I have heard that 9zip does even better compression than
> bz2.  Don't know about decompression speed.
> 
> karl

How about to still use .tar but using "lzma -9" compression over
bzip2 or gzip? The lzma uses the same algorithm of
7zip (p7zip un Unix world, 7za command name), but works on single files
(which so can be the known .tar) rather than on archive.

Usually the lzma compresses 30% better than gzip and 15%
better than bzip2. Uncompression on lzma is way
faster than bzip2, let's say around 20-25 MB/s over
an Athlon64 3000-3500.

An .src.rpm of lzma (e.g. used on MandrivaLinux) is this one:

http://distrib-coffee.ipsl.jussieu.fr/pub/linux/MandrivaLinux/devel/2007.1/SRPMS/main/release/lzma-4.43-2mdv2007.1.src.rpm

If you give me the URL of the uncompressed .tar (but it shouldn't contain
any .zip file, as those can't be compressed further) I will post
some benchmark and compress ratio comparison using lzma.

Bye
Giuseppe.

From Robin.Fairbairns at cl.cam.ac.uk  Sun Jun  3 14:13:37 2007
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Sun, 03 Jun 2007 13:13:37 +0100
Subject: [tex-live] dvips config.ps letter/a4
In-Reply-To: Your message of Sat, 02 Jun 2007 18:58:14 -0500.
	<200706022358.l52NwEV09010@f7.net> 
Message-ID: <10745.1180872817@mole.cl.cam.ac.uk>

Karl Berry <karl at freefriends.org> wrote:

>     but the specification of the
>     formats requires integer numbers in milimeters.
> 
> Why?  These definitions are read only by dvips, to decide which
> definition to apply.  It accepts the usual TeX <dimen>s here.

because the iso standards specify round mm values; the original din
standard specified the fractional values, but we don't use that
nowadays.

r

From reinhard.kotucha at web.de  Mon Jun  4 02:03:59 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 4 Jun 2007 02:03:59 +0200
Subject: [tex-live] TL-CD compression
In-Reply-To: <4662A461.2010501@mandriva.com>
References: <200706030004.l5304IG10310@f7.net> <4662A461.2010501@mandriva.com>
Message-ID: <18019.22255.980446.347788@zarniwoop.ms25.local>

>>>>> "Giuseppe" == Giuseppe Ghib? <ghibo at mandriva.com> writes:

  > If you give me the URL of the uncompressed .tar (but it shouldn't
  > contain any .zip file, as those can't be compressed further) I
  > will post some benchmark and compress ratio comparison using lzma.

The files are too large to download them from my machine.  But I did
some tests myself.

du -sc TL2007-*
598732  TL2007-t7z
655660  TL2007-tbz
695896  TL2007-tgz
728072  TL2007-zip

The gain of using 7zip is about 20% in file size.  That's about 130~MB.

Uncompressing the archive directory takes about a minute for the zip
files, a little bit more than 2 minutes for the tar.7z files and about
3 minutes for the tar.bz2 files.  The files had been read from a hard
disk.  My machine is as an amd64 2.2 MHz dual core.  I assume that
even on a 300 MHz machine CPU time doesn't matter.

It seems that 7zip is the winner.

But there is another problem: 7zip is probably not available on all
platforms.  Suppose we put binaries for all platforms on the cd and
let config.guess find out which one to use, we would lose an enormous
amount of disk space because the size of the binary (7zr) is 800 kB.
The size of the bzip2 binary is 33 kB.  bzip2 is quite popular today
and we can expect that it is installed at least on all Linux systems.

Though 7zip is available as a Gentoo Linux package, I downloaded the
sources.  There are makefiles for many platforms but I'm not sure that
all platforms which are supported by TL are supported by 7zip.
Another thing which probably will cause headaches is that it is
dynamically linked against the C++ libraries.
 
Linking them statically would blow up the binaries even more.  

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From werner at suse.de  Mon Jun  4 11:07:58 2007
From: werner at suse.de (Dr. Werner Fink)
Date: Mon, 4 Jun 2007 11:07:58 +0200
Subject: [tex-live] Bug in \discretionary in XeLaTeX for Linux
In-Reply-To: <641AA2B8-68FB-4626-A974-F81718967A59@sil.org>
References: <8719b6240706010748v2ce7ec5bh8d3a9c6198c3eb23@mail.gmail.com>
	<641AA2B8-68FB-4626-A974-F81718967A59@sil.org>
Message-ID: <20070604090758.GA9544@boole.suse.de>

On Fri, Jun 01, 2007 at 07:00:35PM +0100, Jonathan Kew wrote:
> On 1 Jun 2007, at 3:48 pm, Zdenek Wagner wrote:
> 
> >Hello,
> >after some problems with \discretionary I made a sample file which
> >contains just path\discretionary{+}{:}{/} so that it outputs path/file
> >if not hyphenated and
> >
> >path+
> >:file
> >
> >if hyphenated. It works so in pdflatex. With XeLaTeX the same file
> >yields path/le if not hyphenated and
> >
> >path+
> >:le
> >
> >if hyphenated, i.e. two letters disappear.
> 
> Yes, this is due to a bug in XeTeX; it was identified (and fixed in  
> the XeTeX source repository) during the EuroBachoTeX conference  
> (thanks to Jano Kula for bringing it to my attention), but of course  
> the TeXLive release was well before this date.
> 
> If you're prepared to rebuild XeTeX from the development sources, the  
> problem should go away, otherwise you'll need to wait for a new  
> release; sorry!

Do you have a patch around?


    Werner

-- 
  "Having a smoking section in a restaurant is like having
          a peeing section in a swimming pool." -- Edward Burr

From jonathan_kew at sil.org  Mon Jun  4 11:48:07 2007
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Mon, 4 Jun 2007 10:48:07 +0100
Subject: [tex-live] Bug in \discretionary in XeLaTeX for Linux
In-Reply-To: <20070604090758.GA9544@boole.suse.de>
References: <8719b6240706010748v2ce7ec5bh8d3a9c6198c3eb23@mail.gmail.com>
	<641AA2B8-68FB-4626-A974-F81718967A59@sil.org>
	<20070604090758.GA9544@boole.suse.de>
Message-ID: <975A3686-F64D-49F0-B3DF-FC790F669EF0@sil.org>

On 4 Jun 2007, at 10:07 am, Dr. Werner Fink wrote:

> On Fri, Jun 01, 2007 at 07:00:35PM +0100, Jonathan Kew wrote:
>> On 1 Jun 2007, at 3:48 pm, Zdenek Wagner wrote:
>>
>>> Hello,
>>> after some problems with \discretionary I made a sample file which
>>> contains just path\discretionary{+}{:}{/} so that it outputs path/ 
>>> file
>>> if not hyphenated and
>>>
>>> path+
>>> :file
>>>
>>> if hyphenated. It works so in pdflatex. With XeLaTeX the same file
>>> yields path/le if not hyphenated and
>>>
>>> path+
>>> :le
>>>
>>> if hyphenated, i.e. two letters disappear.
>>
>> Yes, this is due to a bug in XeTeX; it was identified (and fixed in
>> the XeTeX source repository) during the EuroBachoTeX conference
>> (thanks to Jano Kula for bringing it to my attention), but of course
>> the TeXLive release was well before this date.
>>
>> If you're prepared to rebuild XeTeX from the development sources, the
>> problem should go away, otherwise you'll need to wait for a new
>> release; sorry!
>
> Do you have a patch around?

According to the subversion log, this was fixed at rev. 467 in the  
xetex repository. So you can get that change as a patch:

http://scripts.sil.org/svn-view/xetex/TRUNK/texk/web2c/xetexdir/ 
xetex.ch?r1=466&r2=467&view=patch

However, this won't quite apply to the sources currently in TeXLive  
(I just tried, but "2 out of 16 hunks FAILED"). I suppose it wouldn't  
be hard to back-port the fix, but it will depend on finding a little  
time....

JK


From preining at logic.at  Tue Jun  5 10:14:38 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 5 Jun 2007 10:14:38 +0200
Subject: [tex-live] Bug#426790: mathpple.map should be listed in
	updmap.cfg
In-Reply-To: <200705312320.l4VNKWZ06317@f7.net>
	<87fy5dxy47.fsf@riesling.zuerich.kuesterei.ch>
References: <87fy5dxy47.fsf@riesling.zuerich.kuesterei.ch>
	<200705312320.l4VNKWZ06317@f7.net>
	<1180560857.25842.8.camel@darkstar.darkmatter.com>
	<87fy5dxy47.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <20070605081438.GF18064@gamma.logic.tuwien.ac.at>

Hi all!

On Don, 31 Mai 2007, Frank K?ster wrote:
> > mathpple is unusable because the math italic fonts are not available.
> > For this, mathpple.map should be included in updmap.cfg. I have appended
> > the following lines to /etc/texmf/updmap.d/10texlive-base.cfg
> >
> > MixedMap psfonts.amz
> > MixedMap mathpple.map
> >
> > and pdflatex runs ok. 

psfonts.amz is useless. Do you really need this one?

On Don, 31 Mai 2007, Karl Berry wrote:
>     > MixedMap psfonts.amz
> 
> This file contains map lines for many basic math fonts, such as cmbsy5.
> Those lines are in the TL psfonts.map, although I am not sure which map
> file they come from.  Probably one of the ones in
> texmf-dist/tpm/ams.tpm.

The are all coming from ams/ams-bsr.map and ams/ams-bsr-interpolated.map

I have no idea what these psfonts.amz is used for ...

> All those ams-* and psfonts.* map conglomerations confuse me.

Not only you.

> That contains definitions for just two fonts, eurbo10 and eurmo10.
> I've added mathpple.map to ams.tpm, since I don't see a better place for
> it and that's where the Type 1's are.

Ok.

> Just for the record, I noticed that there is psnfss.tpm as part of the
> psnfss package containing the same two lines.  TL doesn't use

Just for the record, Frank, J?rg, whoever, can we rework the whole font
disaster???

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
EXETER (n.)
All light household and electrical goods contain a number of vital
components plus at least one exeter. If you've just mended a fuse,
changed a bulb or fixed a blender, the exeter is the small, flat or
round plastic or bakelite piece left over which means you have to undo
everything and start all over again.
			--- Douglas Adams, The Meaning of Liff

From oliver at first.in-berlin.de  Tue Jun  5 11:09:20 2007
From: oliver at first.in-berlin.de (Oliver Bandel)
Date: Tue, 5 Jun 2007 11:09:20 +0200
Subject: [tex-live] Speed of DVD-reads
Message-ID: <20070605090920.GB333@first.in-berlin.de>


Hello,

tonight I did some speed-tests on DVD-reading-times
of DVDs/CDs on my Linux-PC.

I didn't used special speed checkers, I just used hdparm.
In the hdparm manpage is mentioned one has to use it
more than once to get valid results.

So I did then.


Here are some results I got:


Solaris-DVD                                8,8 MB/s
(Solaris Express, Developer Edition)

BSI-CD (Sichere Informationstechnik        2,9 MB/s
f?r unsere Gesellschaft)

TeX-Live-DVD 2007 (DVD)                    2,6 MB/s

Solaris-DVD (like above, but "Preview")    4,9 MB/s


The DMA and 32-Bit settings had no influence on
the TeX-Live-reading-speed. But it had influence
on reading speeds of the Solaris-DVDs.
(The faster could be read slower and the slower faster.)

All values above were done with the default values,
which were set automatically after booting.

As you can see, there are speed-factors of aup to
about 3.4 between different DVDs.

So it looks like the TeXLive-DVD is not such a good one.
When low reading speed comes together with a disk-image
that is not so good and an installation script that
often does re-read informations from the disk and also
uses a lot of fork/exec-stuff (shells/subshells/calling external
programs instead of e.g. Perl-builtin-functions for String-matching)
then this all together wastes performance and time.

The installation-time could be much better, when the DVD could be
read as fast as the Solaris-DVD for example.

As hdparm seems to read a bigger chunk of data at a time,
this can't be compared directly to reading-operations,
where individual directories and files must be read.
So, installing a lot of single files seems to be much
slower than what hdparm offers here.

Ciao,
   Oliver

From frank at debian.org  Tue Jun  5 11:55:40 2007
From: frank at debian.org (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Tue, 05 Jun 2007 11:55:40 +0200
Subject: [tex-live] Bug#426790: Bug#426790: mathpple.map should be
	listed in updmap.cfg
In-Reply-To: <20070605081438.GF18064@gamma.logic.tuwien.ac.at> (Norbert
	Preining's message of "Tue\, 5 Jun 2007 10\:14\:38 +0200")
References: <87fy5dxy47.fsf@riesling.zuerich.kuesterei.ch>
	<200705312320.l4VNKWZ06317@f7.net>
	<1180560857.25842.8.camel@darkstar.darkmatter.com>
	<87fy5dxy47.fsf@riesling.zuerich.kuesterei.ch>
	<20070605081438.GF18064@gamma.logic.tuwien.ac.at>
Message-ID: <87ps4a9143.fsf@riesling.zuerich.kuesterei.ch>

Norbert Preining <preining at logic.at> wrote:

>> Just for the record, I noticed that there is psnfss.tpm as part of the
>> psnfss package containing the same two lines.  TL doesn't use
>
> Just for the record, Frank, J?rg, whoever, can we rework the whole font
> disaster???

I'd like to, but I don't have much time.  And I'm still waiting for
input from Walter Schmidt.

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From Robin.Fairbairns at cl.cam.ac.uk  Tue Jun  5 12:00:26 2007
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Tue, 05 Jun 2007 11:00:26 +0100
Subject: [tex-live] Bug#426790: Bug#426790: mathpple.map should be
	listed in updmap.cfg
In-Reply-To: Your message of Tue, 05 Jun 2007 11:55:40 +0200.
	<87ps4a9143.fsf@riesling.zuerich.kuesterei.ch> 
Message-ID: <14944.1181037626@mole.cl.cam.ac.uk>

Frank K?ster <frank at debian.org> wrote:

> I'd like to, but I don't have much time.  And I'm still waiting for
> input from Walter Schmidt.

a lot of people are waiting for input from walter schmidt; i'm beginning
to worry that he's seriously ill, or something.

i know of a contract he agreed to undertake, but he's disappeared from
the sight of the contracting people.

there are things i would like to ask him (faq-related), but i'm holding
off for signs that he's active again.

From martin at oneiros.de  Tue Jun  5 15:03:56 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 5 Jun 2007 15:03:56 +0200
Subject: [tex-live] Fedora 7
In-Reply-To: <fd3eb9bf0706010642o4d33b62dtcb90acbfb56c7538@mail.gmail.com>
References: <28036.1180692925@mole.cl.cam.ac.uk>
	<46601933.7080409@imperium-noctem.de>
	<fd3eb9bf0706010642o4d33b62dtcb90acbfb56c7538@mail.gmail.com>
Message-ID: <68c491a60706050603w55f94f0bkcac8ad1ae4999735@mail.gmail.com>

2007/6/1, Vedran Mileti? <rivanvx at gmail.com>:
> As far as I see, only Debian has fully working and modular TL2007.

Yes, but SUSE 10.3 will have a reasonable subset. All the other
Linuxes and BSDs are going that way as well.

Best
   Martin

From vext01 at gmail.com  Tue Jun  5 15:17:57 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Tue, 5 Jun 2007 14:17:57 +0100
Subject: [tex-live] Fedora 7
In-Reply-To: <68c491a60706050603w55f94f0bkcac8ad1ae4999735@mail.gmail.com>
References: <28036.1180692925@mole.cl.cam.ac.uk>
	<46601933.7080409@imperium-noctem.de>
	<fd3eb9bf0706010642o4d33b62dtcb90acbfb56c7538@mail.gmail.com>
	<68c491a60706050603w55f94f0bkcac8ad1ae4999735@mail.gmail.com>
Message-ID: <a6e8c1d0706050617g7ded08c3nfd2dc79f938d6921@mail.gmail.com>

Hi,

On 05/06/07, Martin Schr?der <martin at oneiros.de> wrote:
> Yes, but SUSE 10.3 will have a reasonable subset. All the other
> Linuxes and BSDs are going that way as well.

Has NetBSD and FreeBSD started work on texlive?


-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From martin at oneiros.de  Tue Jun  5 15:24:52 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 5 Jun 2007 15:24:52 +0200
Subject: [tex-live] Fedora 7
In-Reply-To: <a6e8c1d0706050617g7ded08c3nfd2dc79f938d6921@mail.gmail.com>
References: <28036.1180692925@mole.cl.cam.ac.uk>
	<46601933.7080409@imperium-noctem.de>
	<fd3eb9bf0706010642o4d33b62dtcb90acbfb56c7538@mail.gmail.com>
	<68c491a60706050603w55f94f0bkcac8ad1ae4999735@mail.gmail.com>
	<a6e8c1d0706050617g7ded08c3nfd2dc79f938d6921@mail.gmail.com>
Message-ID: <68c491a60706050624h6bfc8be7lf457aa7f97b8c75d@mail.gmail.com>

2007/6/5, Edd Barrett <vext01 at gmail.com>:
> On 05/06/07, Martin Schr?der <martin at oneiros.de> wrote:
> > Yes, but SUSE 10.3 will have a reasonable subset. All the other
> > Linuxes and BSDs are going that way as well.
>
> Has NetBSD and FreeBSD started work on texlive?

Not that I know of. But I'm hoping they'll benefit from your work. :-)

Best
   Martin

From rjerrard at math.concordia.ab.ca  Tue Jun  5 18:56:19 2007
From: rjerrard at math.concordia.ab.ca (Robert Jerrard)
Date: Tue, 05 Jun 2007 10:56:19 -0600
Subject: [tex-live] texlive and powerdot
Message-ID: <1181062589.7623.9.camel@riemann>

Hello, I have just joined the texlive mailing list since I have a
problem that I have been unable to find an answer to. I am running
Ubuntu feisty on a laptop and have installed the most recent version of
texlive. I am using powerdot in a tex document:

\documentclass[]{powerdot}

but when the document is latexed I get:

ERROR: Undefined control sequence.

--- TeX said ---
<recently read> \pddefinepalettes 
                                  
l.31 \pddefinepalettes

which has been reported on the powerdot list earlier in March by someone
else but there was no response so I thought I would try the texlive list
also.

Any information as to a fix would be appreciated. Thanks, Bob

--
Dr. Robert Jerrard
Dept of Math and Comp Sci
Concordia University College of Alberta


From john at wexfordpress.com  Wed Jun  6 16:20:18 2007
From: john at wexfordpress.com (John R. Culleton)
Date: Wed, 6 Jun 2007 10:20:18 -0400
Subject: [tex-live]
	=?utf-8?q?TeXLive2007=3A_Bug_in_=28Xe=29TeX_for_64bit_?=
	=?utf-8?q?and_big=09endianess?=
In-Reply-To: <46419583.4010001@wxs.nl>
References: <74f506dc0705081335g2e1c4bcerfd8141a863b0d1c9@mail.gmail.com>
	<87sla6o1g6.fsf@riesling.zuerich.kuesterei.ch>
	<46419583.4010001@wxs.nl>
Message-ID: <200706061020.18322.john@wexfordpress.com>

On Wednesday 09 May 2007 05:33, Hans Hagen wrote:
> Frank ? wrote:
> > So we're left with fixing the bugs, but that is, unfortunately,
> > *not* just a question of taking the xpdf patch, applying it to
> > the sources and recompiling the packages.  That would be
> > relatively easy and per se not a reason for a switch to poppler. 
> > The real problem is that in almost all cases, the published patch
> > does not apply because the copies of xpdf in pdftex, pdftohtml,
> > cups, forgotwhat all have slightly different versions.  Plus we
> > need to support our stable distribution, which meant patching
> > xpdf 1.x, 2.x and 3.x at some point in Debian (with sometimes two
> > or more different values for each x).
>
I am as usual confused. On my Slackware Linux system xpdf is just one 
of several available pdf viewers. I much prefer kpdf (KDE) or when it 
works Acrobat Reader. 

Is this thread discussing something else?

-- 
John Culleton
Able Indexing and Typesetting
Precision typesetting (tm) at reasonable cost.
Satisfaction guaranteed. 
http://wexfordpress.com


From frank at kuesterei.ch  Wed Jun  6 16:49:35 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Wed, 06 Jun 2007 16:49:35 +0200
Subject: [tex-live] TeXLive2007: Bug in (Xe)TeX for 64bit and
	big	endianess
In-Reply-To: <200706061020.18322.john@wexfordpress.com> (John R. Culleton's
	message of "Wed\, 6 Jun 2007 10\:20\:18 -0400")
References: <74f506dc0705081335g2e1c4bcerfd8141a863b0d1c9@mail.gmail.com>
	<87sla6o1g6.fsf@riesling.zuerich.kuesterei.ch>
	<46419583.4010001@wxs.nl> <200706061020.18322.john@wexfordpress.com>
Message-ID: <878xaxuohs.fsf@riesling.zuerich.kuesterei.ch>

"John R. Culleton" <john at wexfordpress.com> wrote:

> On Wednesday 09 May 2007 05:33, Hans Hagen wrote:
>> Frank ? wrote:
>> > So we're left with fixing the bugs, but that is, unfortunately,
>> > *not* just a question of taking the xpdf patch, applying it to
>> > the sources and recompiling the packages.  [...]
>>
> I am as usual confused. On my Slackware Linux system xpdf is just one 
> of several available pdf viewers. I much prefer kpdf (KDE) or when it 
> works Acrobat Reader. 
>
> Is this thread discussing something else?

Yes, xpdf is more than a viewer.  It's also a code resource, many
projects took source code from it and used it in their own, pdf-parsing
or pdf-displaying applications.  That's the classical situation for a
shared library: Have the code in one project where everyone else can use
it.  xpdf's upstream author, Derek Noonburg, has refused to create such
a shared library, but the poppler team forked xpdf to do just that -and
they have also altered the code a bit.

And now the question is whether to switch to the poppler library, allow
for both (with a configure-time switch) or stay with xpdf.  Actually, if
Martin Schr?der comes up with his patch, the answer will be "allow for
both". 

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From hanche at math.ntnu.no  Wed Jun  6 19:29:37 2007
From: hanche at math.ntnu.no (Harald Hanche-Olsen)
Date: Wed, 06 Jun 2007 19:29:37 +0200 (CEST)
Subject: [tex-live] texlive and powerdot
In-Reply-To: <1181062589.7623.9.camel@riemann>
References: <1181062589.7623.9.camel@riemann>
Message-ID: <20070606.192937.16637937.hanche@math.ntnu.no>

+ Robert Jerrard <rjerrard at math.concordia.ab.ca>:

| \documentclass[]{powerdot}
| 
| ERROR: Undefined control sequence.
| 
| <recently read> \pddefinepalettes 
|                                   
| l.31 \pddefinepalettes

Funny, \pddefinepalettes is certainly defined in powerdot.cls.

| Any information as to a fix would be appreciated. Thanks, Bob

I'm sure it would be.  However, if you want answers I think you need
to look at http://www.tex.ac.uk/cgi-bin/texfaq2html?label=askquestion
and pay particular attention to the last two bullet points.

- Harald

From luecking at uark.edu  Wed Jun  6 20:28:51 2007
From: luecking at uark.edu (Dan Luecking)
Date: Wed, 06 Jun 2007 13:28:51 -0500
Subject: [tex-live] BUG: misplaced files of the nag package
Message-ID: <200706061828.l56ISGq4017716@comp.uark.edu>


Here are some more code files misplaced in the doc tree.

The unpacked files of the nag package are all in
   /texmf-dist/doc/latex/nag/
The .cfg and .sty files should be in the latex input tree:
   /texmf-dist/tex/latex/nag/

Regards,
Dan


Daniel H. Luecking
Department of Mathematical Sciences
University of Arkansas
"I reject your reality, and substitute my own" --Adam Savage


From karl at freefriends.org  Thu Jun  7 00:38:24 2007
From: karl at freefriends.org (Karl Berry)
Date: Wed, 6 Jun 2007 17:38:24 -0500
Subject: [tex-live] BUG: misplaced files of the nag package
In-Reply-To: <200706061828.l56ISGq4017716@comp.uark.edu>
Message-ID: <200706062238.l56McOj24307@f7.net>

    Here are some more code files misplaced in the doc tree.

Thanks Dan.  Will fix.

From rjerrard at math.concordia.ab.ca  Thu Jun  7 05:22:10 2007
From: rjerrard at math.concordia.ab.ca (bob)
Date: Wed, 06 Jun 2007 21:22:10 -0600
Subject: [tex-live] texlive and powerdot
In-Reply-To: <20070606.192937.16637937.hanche@math.ntnu.no>
References: <1181062589.7623.9.camel@riemann>
	<20070606.192937.16637937.hanche@math.ntnu.no>
Message-ID: <1181186530.22560.2.camel@localhost>

On Wed, 2007-06-06 at 19:29 +0200, Harald Hanche-Olsen wrote:
> + Robert Jerrard <rjerrard at math.concordia.ab.ca>:
> 
> | \documentclass[]{powerdot}
> | 
> | ERROR: Undefined control sequence.
> | 
> | <recently read> \pddefinepalettes 
> |                                   
> | l.31 \pddefinepalettes
> 
> Funny, \pddefinepalettes is certainly defined in powerdot.cls.
> 
> | Any information as to a fix would be appreciated. Thanks, Bob
> 
> I'm sure it would be.  However, if you want answers I think you need
> to look at http://www.tex.ac.uk/cgi-bin/texfaq2html?label=askquestion
> and pay particular attention to the last two bullet points.
> 
> - Harald

Thanks Harald, I got a solution from the powerdot mailing list. It turns
out that the powerdot.cls and powerdot-*.sty files in the Ubuntu fiesty
package of texlive is too old. Downloading newer files from ctan and
doing an sudo mktexlsr fixed the problem.

Regards, Bob
-- 
Dr. Robert J. Jerrard, Professor of Mathematics,
Concordia University College of Alberta,
7128 Ada Blvd., Edmonton, Alberta, T5B 4E4, Canada.
Phone: (780) 479-9291, Fax: (780) 474-1933.


From lianqing.yu at hotmail.com  Fri Jun  8 10:56:29 2007
From: lianqing.yu at hotmail.com (Lianqing Yu)
Date: Fri, 8 Jun 2007 16:56:29 +0800
Subject: [tex-live] (TeXLive2003) dvipdfm fails to include .eps graphics file
Message-ID: <BAY143-W2BBC1CA268A5B6CA7921FF6250@phx.gbl>


Hi, I hope this is the right place I can get some help.
I use TeXLive 2003 on Windows XP. latex and dvips works fine but dvipdfm.exe fails to genereate a PDF file. 
 
Below is the error messages:
 
Warning:  Couldn't open font map file fonts.map][6Warning:  Couldn't open font map file fonts.mapWarning:  Couldn't open font map file fonts.map(./figures/ResponseCurveStatistics_mean_bar.eps<PS>Version of PDF file (1.4) is newer than version limit specification.pdf_open: Not a PDF 1.[1-3] file
Corrupt PDF file?
Ignoring stream with with multiple segments)pdf: image inclusion failed for (figures/ResponseCurveStatistics_mean_bar.eps).(./figures/ResponseCurveStatistics_sd_bar.eps<PS>Version of PDF file (1.4) is newer than version limit specification.pdf_open: Not a PDF 1.[1-3] file
Corrupt PDF file?
Ignoring stream with with multiple segments)pdf: image inclusion failed for (figures/ResponseCurveStatistics_sd_bar.eps).(./figures/ResponseCurveStatistics_mean_singrating.eps<PS>Version of PDF file (1.4) is newer than version limit specification.pdf_open: Not a PDF 1.[1-3] file
Corrupt PDF file?
Ignoring stream with with multiple segments)pdf: image inclusion failed for (figures/ResponseCurveStatistics_mean_singrating.eps).(./figures/ResponseCurveStatistics_sd_singrating.eps<PS>Version of PDF file (1.4) is newer than version limit specification.pdf_open: Not a PDF 1.[1-3] file
Corrupt PDF file?
Ignoring stream with with multiple segments)pdf: image inclusion failed for (figures/ResponseCurveStatistics_sd_singrating.eps).(./figures/ResponseCurveStatistics_mean_RDS.eps<PS>Version of PDF file (1.4) is newer than version limit specification.pdf_open: Not a PDF 1.[1-3] file
Corrupt PDF file?
Ignoring stream with with multiple segments)pdf: image inclusion failed for (figures/ResponseCurveStatistics_mean_RDS.eps).(./figures/ResponseCurveStatistics_sd_RDS.eps<PS>Version of PDF file (1.4) is newer than version limit specification.pdf_open: Not a PDF 1.[1-3] file
Corrupt PDF file?
Ignoring stream with with multiple segments)pdf: image inclusion failed for (figures/ResponseCurveStatistics_sd_RDS.eps).][7Warning:  Couldn't open font map file fonts.map][8][9Warning:  Couldn't open font map file fonts.map][10(./figures/VergenceImagePosRelation.eps<?>Error: /undefined in II*Operand stack:
Execution stack:   %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--   --nostringval--   false   1   %stopped_push   1   3   %oparray_pop   1   3   %oparray_pop   --nostringval--   1   3   %oparray_pop   1   3   %oparray_pop   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--Dictionary stack:   --dict:1125/1686(ro)(G)--   --dict:1/20(G)--   --dict:85/200(L)--Current allocation mode is localLast OS error: No such file or directoryAFPL Ghostscript 8.53: Unrecoverable error, exit code 1
Version of PDF file (1.4) is newer than version limit specification.pdf_open: Not a PDF 1.[1-3] file
Corrupt PDF file?
Ignoring stream with with multiple segments)pdf: image inclusion failed for (figures/VergenceImagePosRelation.eps).][11(./figures/missingfigure.eps<PS>Version of PDF file (1.4) is newer than version limit specification.pdf_open: Not a PDF 1.[1-3] file
Corrupt PDF file?
Ignoring stream with with multiple segments)pdf: image inclusion failed for (figures/missingfigure.eps).][12][13Warning:  Couldn't open font map file fonts.map][14Warning:  Couldn't open font map file fonts.mapWarning:  Couldn't open font map file fonts.map][15(./figures/PriorDistributionAbsDisp_cones.eps<PS>Version of PDF file (1.4) is newer than version limit specification.pdf_open: Not a PDF 1.[1-3] file
Corrupt PDF file?
Ignoring stream with with multiple segments)pdf: image inclusion failed for (figures/PriorDistributionAbsDisp_cones.eps).(./figures/PriorDistributionRelDisp_cones.eps<PS>Version of PDF file (1.4) is newer than version limit specification.pdf_open: Not a PDF 1.[1-3] file
Corrupt PDF file?
Ignoring stream with with multiple segments)pdf: image inclusion failed for (figures/PriorDistributionRelDisp_cones.eps).][16][17(./figures/LikelihoodDistribution_cones.eps<PS>Version of PDF file (1.4) is newer than version limit specification.pdf_open: Not a PDF 1.[1-3] file
Corrupt PDF file?
Ignoring stream with with multiple segments)pdf: image inclusion failed for (figures/LikelihoodDistribution_cones.eps).][18(./figures/V2DisparityModel.eps<PS>Terminating on signal SIGINT(2)^C
_________________________________________________________________
With Windows Live Hotmail, you can personalize your inbox with your favorite color.
www.windowslive-hotmail.com/learnmore/personalize.html?locale=en-us&ocid=TXT_TAGLM_HMWL_reten_addcolor_0607
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/tex-live/attachments/20070608/8e384c22/attachment.html 

From rivanvx at gmail.com  Fri Jun  8 12:20:05 2007
From: rivanvx at gmail.com (=?UTF-8?Q?Vedran_Mileti=C4=87?=)
Date: Fri, 8 Jun 2007 12:20:05 +0200
Subject: [tex-live] (TeXLive2003) dvipdfm fails to include .eps graphics
	file
In-Reply-To: <BAY143-W2BBC1CA268A5B6CA7921FF6250@phx.gbl>
References: <BAY143-W2BBC1CA268A5B6CA7921FF6250@phx.gbl>
Message-ID: <fd3eb9bf0706080320y3521cd9q7d991d33ebba0103@mail.gmail.com>

2007/6/8, Lianqing Yu <lianqing.yu at hotmail.com>:
>
>  Hi, I hope this is the right place I can get some help.
>  I use TeXLive 2003 on Windows XP. latex and dvips works fine but
> dvipdfm.exe fails to genereate a PDF file.
>

Why are you using so old version?

-- 
Vedran Mileti?
Student at Math Department, University of Rijeka

From hanthethanh at gmail.com  Fri Jun  8 12:20:30 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Fri, 8 Jun 2007 12:20:30 +0200
Subject: [tex-live] which version of gs is recommended?
Message-ID: <74f506dc0706080320m7fb8485ek29370c89efba98e1@mail.gmail.com>

Hi,

this question is slightly off-topic, but since the gs gurus
are here: I am looking for a version of gs to install for
use with mediawiki on a remote server. I took a look at
available versions of gs on the gs website, but it didn't
make me wiser. Can someone please recommend a version that
is suitable for my purpose (stable, sleek, doesn't have to
be up-to-date, X11 support excluded)?


Thanks,
Thanh

From zdenek.wagner at gmail.com  Fri Jun  8 12:28:11 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 8 Jun 2007 12:28:11 +0200
Subject: [tex-live] which version of gs is recommended?
In-Reply-To: <74f506dc0706080320m7fb8485ek29370c89efba98e1@mail.gmail.com>
References: <74f506dc0706080320m7fb8485ek29370c89efba98e1@mail.gmail.com>
Message-ID: <8719b6240706080328k42072dfh8462566478e18162@mail.gmail.com>

2007/6/8, Thanh Han The <hanthethanh at gmail.com>:
> Hi,
>
> this question is slightly off-topic, but since the gs gurus
> are here: I am looking for a version of gs to install for
> use with mediawiki on a remote server. I took a look at
> available versions of gs on the gs website, but it didn't
> make me wiser. Can someone please recommend a version that
> is suitable for my purpose (stable, sleek, doesn't have to
> be up-to-date, X11 support excluded)?
>
I sometimes have problems with gs version 7.x and earlier, mainly with
creaton PDF by epstopdf. Version 8.14 (at least in OS/2) seems to be
stable and bug free. I found no problem and I use it almost every day.

>
> Thanks,
> Thanh
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From gnwiii at gmail.com  Fri Jun  8 15:06:02 2007
From: gnwiii at gmail.com (George N. White III)
Date: Fri, 8 Jun 2007 10:06:02 -0300
Subject: [tex-live] which version of gs is recommended?
In-Reply-To: <74f506dc0706080320m7fb8485ek29370c89efba98e1@mail.gmail.com>
References: <74f506dc0706080320m7fb8485ek29370c89efba98e1@mail.gmail.com>
Message-ID: <22af238a0706080606q79729725rdf98abc5d1e268ae@mail.gmail.com>

On 6/8/07, Thanh Han The <hanthethanh at gmail.com> wrote:

> this question is slightly off-topic, but since the gs gurus
> are here: I am looking for a version of gs to install for
> use with mediawiki on a remote server. I took a look at
> available versions of gs on the gs website, but it didn't
> make me wiser. Can someone please recommend a version that
> is suitable for my purpose (stable, sleek, doesn't have to
> be up-to-date, X11 support excluded)?

For the past couple years, more bugs in gs come thru the
system libraries and compilers than from the gs code.

To give you an idea of what is in widespread use, my debian system has

$ gs-afpl -h
AFPL Ghostscript 8.53 (2005-10-20)

$ gs-esp -h
ESP Ghostscript 8.15.3 (2006-08-25)

See: <http://www.cups.org/espgs/index.php> for the status of ESP
ghostscript.  This was a fork that has become very popular with the
linux distros, and should be robust.  It is being merged with AFPL
gs.  The merged version isn't out yet, so I'd be tempted to grab a
recent source for ESP 8.15.4 and built it with a minimal set of devices.

More at: <http://www.openprinting.org/download/printing/esp-gpl-ghostscript-merge/README>

http://www.cups.org/espgs/software.php?VERSION=8.15.4&\
FILE=ghostscript/8.15.4/espgs-8.15.4-source.tar.bz2

To get sleek, disable devices you don't need in the top-level
Makefile.

-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From Vipan_Bahl at ml.com  Fri Jun  8 13:25:25 2007
From: Vipan_Bahl at ml.com (Bahl, Vipan (London))
Date: Fri, 8 Jun 2007 12:25:25 +0100
Subject: [tex-live] Installation help
Message-ID: <AD430CB17A310C469C01D443B0075B15295F5180@MLLNA203MB.emea.win.ml.com>

Hi

I am not sure if this is the correct group to ask for help on installing
the tex plugin if not please guide me to the correct group.
I have downloaded the file and uncompressed the file and copied it
across to my server where I want to install this but I cannot seem to
understand the install instructions i.e. do I need to mount the disk
where I extracted the .iso file or I can run this without doing a mount
and if so then how do I go about installing this.


Vipan Bahl
* Wk :+44 (0)20 7995 8036
* Mb: 07843065426
* mailto:vipan_bahl at ml.com





> For very important information relating to this e-mail please click on
> this link:  http://www.ml.com/legal_info.htm
> 
>
--------------------------------------------------------

This message w/attachments (message) may be privileged, confidential or proprietary, and if you are not an intended recipient, please notify the sender, do not use or share it and delete it. Unless specifically indicated, this message is not an offer to sell or a solicitation of any investment products or other financial product or service, an official confirmation of any transaction, or an official statement of Merrill Lynch. Subject to applicable law, Merrill Lynch may monitor, review and retain e-communications (EC) traveling through its networks/systems. The laws of the country of each sender/recipient may impact the handling of EC, and EC may be archived, supervised and produced in countries other than the country in which you are located. This message cannot be guaranteed to be secure or error-free. This message is subject to terms available at the following link: http://www.ml.com/e-communications_terms/. By messaging with Merrill Lynch you consent to the foregoing.
--------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/tex-live/attachments/20070608/872fb23d/attachment.html 

From zdenek.wagner at gmail.com  Fri Jun  8 15:39:34 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 8 Jun 2007 15:39:34 +0200
Subject: [tex-live] numerals in xelatex
Message-ID: <8719b6240706080639s50baa41cp9f8c528c5507cc9c@mail.gmail.com>

Hello,
I am trying to extend the Hindi module for babel so that it works in
XeLaTeX. The only problem is that automatically generated numbers as
\number\day in the definition of \today or \thepage (essentially
\arabic{page}) are displayed as Arabic numbers, not Devanagari. Should
I prepare a mapping and use something like
\addfeature{map=devanagari-numerals}, or is there some better way?
Other Indic scripts will have the same problem, so I would prefer some
universal solution.
-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From gnwiii at gmail.com  Fri Jun  8 18:02:10 2007
From: gnwiii at gmail.com (George N. White III)
Date: Fri, 8 Jun 2007 13:02:10 -0300
Subject: [tex-live] (TeXLive2003) dvipdfm fails to include .eps graphics
	file
In-Reply-To: <fd3eb9bf0706080320y3521cd9q7d991d33ebba0103@mail.gmail.com>
References: <BAY143-W2BBC1CA268A5B6CA7921FF6250@phx.gbl>
	<fd3eb9bf0706080320y3521cd9q7d991d33ebba0103@mail.gmail.com>
Message-ID: <22af238a0706080902l2419fbd5i4c74f08fccd0bbd2@mail.gmail.com>

On 6/8/07, Vedran Mileti? <rivanvx at gmail.com> wrote:

> 2007/6/8, Lianqing Yu <lianqing.yu at hotmail.com>:
> >
> >  Hi, I hope this is the right place I can get some help.
> >  I use TeXLive 2003 on Windows XP. latex and dvips works fine but
> > dvipdfm.exe fails to genereate a PDF file.

>From the subject I assume you think the problem is related
to a .eps file -- what evidence do you have for that?

Things to check:

1.  does dvipdfm work if you use draft mode for graphics?

This shoudl give a pdf file with boxes outlining the places
where figures will appear.

2.  can you convert the EPS to pdf using "eps2pdf ..."?

I think dvipdfm uses much the same conversion, so if this
fails, I would not exect dvipdfm to work.

3.  what does "epstool --test-eps ..." give?

Many files that have .eps extensions do not meet the
definition of a .eps file, including some created using
"name-brand" software.   Most such files can be
converted to pdf and will work with pdflatex.

4.  does dvipdfm work using a "known good" .eps file
such as golfer.eps from the ghostscript examples
directory?

If you are still having trouble after all this, please
read <www.chiark.greenend.org.uk/~sgtatham/bugs.html>.
Note that the best way for us to see the problem is if you
can provide a minimal example (e.g., under a dozen lines
of latex and using an eps file that we already have, such
as golfer.eps).  To save time, here is such an example:

   --------------------------------------------------------------------------
\documentclass{article}
\usepackage[dvipdfm]{graphicx}
\begin{document}
Example using \texttt{golfer.eps} from GhostScript.

\[
\includegraphics[width=8cm]{golfer.eps}
\]
\end{document}

tested on debian texlive 2007:
$ latex t-eps
This is pdfTeXk, Version 3.141592-1.40.3 (Web2C 7.5.6)
 %&-line parsing enabled.
entering extended mode
(./t-eps.tex
LaTeX2e <2005/12/01>
Babel <v3.8h> and hyphenation patterns for english, usenglishmax, dumylang, noh
yphenation, loaded.
(/usr/share/texmf-texlive/tex/latex/base/article.cls
Document Class: article 2005/09/16 v1.4f Standard LaTeX document class
(/usr/share/texmf-texlive/tex/latex/base/size10.clo))
(/usr/share/texmf-texlive/tex/latex/graphics/graphicx.sty
(/usr/share/texmf-texlive/tex/latex/graphics/keyval.sty)
(/usr/share/texmf-texlive/tex/latex/graphics/graphics.sty
(/usr/share/texmf-texlive/tex/latex/graphics/trig.sty)
(/etc/texmf/tex/latex/config/graphics.cfg)
(/usr/share/texmf-texlive/tex/latex/dvipdfm/dvipdfm.def))) (./t-eps.aux)
<golfer.eps> [1] (./t-eps.aux) )
Output written on t-eps.dvi (1 page, 384 bytes).
Transcript written on t-eps.log.
$ dvipdfm t-eps

t-eps.dvi -> t-eps.pdf
[1(./golfer.eps<PS>)]
25673 bytes written
 ------------------------------------------------

> Why are you using so old version?

I don't know about the OP, but many people are still using
the version of TL2003 from TLC because they never found
an acceptable replacement for emtex or Y&Y TeX or 4allTeX
(which they consider to represent a high point in the "evolution
^H^H^H^H^H^H^H^H^Hintelligent design" of TeX).

-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From rch at skynet.be  Fri Jun  8 17:55:14 2007
From: rch at skynet.be (Richard HARDWICK)
Date: Fri, 8 Jun 2007 17:55:14 +0200
Subject: [tex-live] 51232 re: Hidden treasures in TeXLive
Message-ID: <000601c7a9e5$67437eb0$23d74157@HPXPPRO>

    +--------------------------------------------------------+
                                   Bruxelles, le 08-06-2007
                                   notre ref RCH/0051232 51232 50290

    ? l'attention de Sebastian  Rahtz
    tex-live at tug.org

    objet : - 51232 re: Hidden treasures in TeXLive

Dear Sebastian Rahtz

    I have been vaguely aware that there are lots of
    interesting files sitting on my hard disk. No problem
    for jpgs and gifs etc - my filemanager can show them as
    thumbnails. But it cant do this for pdfs.

    So I just hacked a perl script that runs through the pdfs
    and spits out an html page, with thumbnails as clicky
    links to each pdf.

    And I immediately found lots and lots of hidden treasures
    sitting in my directory TeXLive2005.
    For which I thank you.

    This is a purely private enterprise - the html layout is
    not good, and my perl script is not fit for public
    viewing - but I would like to suggest that your users
    would be grateful for something like this in the next
    edition of TeXLive

    Demo at foot of this email

    Meilleures salutations
    Richard Hardwick

   +---------------------------------------------------------+
   .   BRUXELLES .   BELGIQUE   EUROPE   EMAIL RCH at SKYNET.BE .
   +---------------------------------------------------------+
    Demo -
    compare this
        c:\texlive2005\texmf-dist\doc\latex\base\modguide.pdf
        c:\texlive2005\texmf-dist\doc\latex\base\usrguide.pdf
        c:\texlive2005\texmf-dist\doc\latex\booktabs\booktabs.pdf
        ...
        c:\texlive2005\texmf-doc\doc\english\pstricks-tutorial\chap1.pdf
        c:\texlive2005\texmf-doc\doc\english\type1fonts\fontinstallationguide.pdf
        c:\texlive2005\texmf\doc\dvipdfm\transistor.pdf
    with this
    http://users.skynet.be/watermael/demo/texlive.html

----- End of Original Message ----- 


From hanthethanh at gmail.com  Fri Jun  8 22:25:01 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Fri, 8 Jun 2007 22:25:01 +0200
Subject: [tex-live] which version of gs is recommended?
Message-ID: <74f506dc0706081325h61a8c946m50d0483c92f7e99c@mail.gmail.com>

Hi,

many thanks to George and Zdenek for sharing your
experience. I will probably stick with the 8.15.4 version.

Best,
Thanh

On Fri, Jun 08, 2007 at 10:06:02AM -0300, George N. White III wrote:
> On 6/8/07, Thanh Han The <hanthethanh at gmail.com> wrote:
>
> >this question is slightly off-topic, but since the gs gurus
> >are here: I am looking for a version of gs to install for
> >use with mediawiki on a remote server. I took a look at
> >available versions of gs on the gs website, but it didn't
> >make me wiser. Can someone please recommend a version that
> >is suitable for my purpose (stable, sleek, doesn't have to
> >be up-to-date, X11 support excluded)?
>
> For the past couple years, more bugs in gs come thru the
> system libraries and compilers than from the gs code.
>
> To give you an idea of what is in widespread use, my debian system has
>
> $ gs-afpl -h
> AFPL Ghostscript 8.53 (2005-10-20)
>
> $ gs-esp -h
> ESP Ghostscript 8.15.3 (2006-08-25)
>
> See: <http://www.cups.org/espgs/index.php> for the status of ESP
> ghostscript.  This was a fork that has become very popular with the
> linux distros, and should be robust.  It is being merged with AFPL
> gs.  The merged version isn't out yet, so I'd be tempted to grab a
> recent source for ESP 8.15.4 and built it with a minimal set of devices.
>
> More at:
> <http://www.openprinting.org/download/printing/esp-gpl-ghostscript-merge/README>
>
> http://www.cups.org/espgs/software.php?VERSION=8.15.4&\
> FILE=ghostscript/8.15.4/espgs-8.15.4-source.tar.bz2
>
> To get sleek, disable devices you don't need in the top-level
> Makefile.
>
> --
> George N. White III <aa056 at chebucto.ns.ca>
> Head of St. Margarets Bay, Nova Scotia

From simon.dreher at gmx.net  Sat Jun  9 18:04:40 2007
From: simon.dreher at gmx.net (Simon Dreher)
Date: Sat, 09 Jun 2007 18:04:40 +0200
Subject: [tex-live] texdoc under windows
Message-ID: <466ACF98.8090603@gmx.net>

Hello,

I recently switched from mikTeX to TeXlive under windows (with the tetex 
package selection plus various other packages). But here, I miss texdoc. 
texdoctk works fine, but I got used to the simple texdoc. Is it not 
available in TeXlive, or how can I select texdoc for installation?

Best regards,
Simon

From gnwiii at gmail.com  Sat Jun  9 20:05:52 2007
From: gnwiii at gmail.com (George N. White III)
Date: Sat, 9 Jun 2007 15:05:52 -0300
Subject: [tex-live] texdoc under windows
In-Reply-To: <466ACF98.8090603@gmx.net>
References: <466ACF98.8090603@gmx.net>
Message-ID: <22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>

On 6/9/07, Simon Dreher <simon.dreher at gmx.net> wrote:

> I recently switched from mikTeX to TeXlive under windows (with the tetex
> package selection plus various other packages). But here, I miss texdoc.
> texdoctk works fine, but I got used to the simple texdoc. Is it not
> available in TeXlive, or how can I select texdoc for installation?

Did MikTeX have a texdoc, or are you thinking of tetex on *x?

You didn't mention which version of TeX Live you are using.  I don't
think the texdoctk.dat file is being maintained, so in TL2007 many
documents are not found.   The majority are .dvi --> .pdf, but some
have changed names/locations.

You might look into using msys to run texdoc on Windows, but some
effort may be needed to get it working.  Watch out for the search path.
On tetex, $TEXMF/doc was used, but this misses local additions to
$TEXDOCS, so for completness, one has to use the latter.  Unfortunately,
this leads to searching many more directories, so can be tedious to use.

These days I tend to avoid texdoc in favor of "locate" and full-text indexing
on systems that have decent implementations.   These are good enough
that texdoc (with "-s") has become more of a debugging tool for me than
a way to view documentation.

-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From wl at gnu.org  Sat Jun  9 22:20:07 2007
From: wl at gnu.org (Werner LEMBERG)
Date: Sat, 09 Jun 2007 22:20:07 +0200 (CEST)
Subject: [tex-live] mf2pt1 2.4 now in TeXLive
Message-ID: <20070609.222007.11891831.wl@gnu.org>


Scott,


I've just added version 2.4 of mf2pt1 to TeXLive, replacing the older
version(s) Karl has removed recently.


    Werner

From reinhard.kotucha at web.de  Sat Jun  9 23:48:27 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 9 Jun 2007 23:48:27 +0200
Subject: [tex-live] texdoc under windows
In-Reply-To: <22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
Message-ID: <18027.8235.396400.342647@zarniwoop.ms25.local>

George N. White III writes:

 > I don't think the texdoctk.dat file is being maintained, so in
 > TL2007 many documents are not found.  The majority are .dvi -->
 > .pdf, but some have changed names/locations.

Yes, unfortunately it is unmaintained.  It had been designed for
teTeX, which is significantly smaller than TeXLive.  Even there,
maintaining the database was a lot of work.  But for TeXLive it is
unmaintainable.

However, though I definitely refuse to take over maintenance, I will
at least try to fix bugs regarding the database reported by users as
good as I can.  That means that I will care about files which are not
found and about new packages which are important.  But I do not intend
to make the database complete.

Sending me a list of all packages which are not supported by texdoctk
does not make any sense.  I can create such a list myself but I refuse
spend that much much time on texdoctk.

 > You might look into using msys to run texdoc on Windows, but some
 > effort may be needed to get it working.

texdoc is a UNIX shell script.  Maybe it works on Windows in a MinGW
environment.  At the moment it seems that some UNIX guys are quite
unhappy with texdoc.  I don't know whether anybody thinks about
writing texdoc from scratch.  Maybe it should be ported to Perl, which
is provided by TeXLive for Windows already.

However, there is even a much better choice:  At the moment I'm
experimenting with texlua, the stand-alone Lua interpreter from the
LuaTeX project.  texlua has the kpse tables compiled in, that means
that it is much more platform independent than Perl.  

For instance, in texlua you can say

    path = kpse.expand_braces ("$TEXMF")

but in Perl you have to use the system command which requires that you
have to find out first on which platform you are in order to decide
whether you have to quote the dollar sign or not.

If anyone wants to translate Thomas' shell scripts to another language
or intends to write something from scratch, texlua is definitely the
best choice.

In TeXLive-2008 we will have LuaTeX, and texlua is currently just a
symlink to LuaTeX.

In my opinion, if someone intends to port shell scripts to some other
language, using texlua is definitely the best way to proceed.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From preining at logic.at  Sun Jun 10 00:00:59 2007
From: preining at logic.at (Norbert Preining)
Date: Sun, 10 Jun 2007 00:00:59 +0200
Subject: [tex-live] texdoc under windows
In-Reply-To: <18027.8235.396400.342647@zarniwoop.ms25.local>
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
Message-ID: <20070609220059.GO834@gamma.logic.tuwien.ac.at>

On Sam, 09 Jun 2007, Reinhard Kotucha wrote:
> unhappy with texdoc.  I don't know whether anybody thinks about
> writing texdoc from scratch.  Maybe it should be ported to Perl, which
> is provided by TeXLive for Windows already.

I heard rumors that someone on Debian-TeX is working on this ...

> However, there is even a much better choice:  At the moment I'm
[...]
> If anyone wants to translate Thomas' shell scripts to another language
> or intends to write something from scratch, texlua is definitely the
> best choice.

But it is not the time to do  it now. Nobody know whether the lua
interface to all the internals is already fixed, I wouldn't swear on it.
And re-rewriting it again and again is a pain. This is material for
after lua inclusion ...

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
FORSINAIN (n. archaic)
The right of the lord of the manor to molest dwarves on their
birthdays.
			--- Douglas Adams, The Meaning of Liff

From reinhard.kotucha at web.de  Sun Jun 10 00:12:08 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sun, 10 Jun 2007 00:12:08 +0200
Subject: [tex-live] texdoc under windows
In-Reply-To: <20070609220059.GO834@gamma.logic.tuwien.ac.at>
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
Message-ID: <18027.9656.741195.13867@zarniwoop.ms25.local>


Norbert Preining writes:

 > But it is not the time to do  it now. Nobody know whether the lua
 > interface to all the internals is already fixed, I wouldn't swear on it.
 > And re-rewriting it again and again is a pain. This is material for
 > after lua inclusion ...

Maybe you are right, I'm more optimistic than you. However, it would
be nice to know Taco's opinion.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From taco at elvenkind.com  Sun Jun 10 10:05:03 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 10 Jun 2007 10:05:03 +0200
Subject: [tex-live] texdoc under windows
In-Reply-To: <18027.9656.741195.13867@zarniwoop.ms25.local>
References: <466ACF98.8090603@gmx.net>	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>	<18027.8235.396400.342647@zarniwoop.ms25.local>	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
Message-ID: <466BB0AF.9070606@elvenkind.com>

Reinhard Kotucha wrote:
> Norbert Preining writes:
> 
>  > But it is not the time to do  it now. Nobody know whether the lua
>  > interface to all the internals is already fixed, I wouldn't swear on it.
>  > And re-rewriting it again and again is a pain. This is material for
>  > after lua inclusion ...

I disagree on that. If Reinhard can spend time on it now, then now
really is the time to do this, so that problems can be dealt with
without the heavy pressure that always occurs in the last few months.

I believe texlua is/will be good enough for scripting use in TL2008,
most changes take place in the tex internals part, not the lua side.
Hans and I plan to have rewritten the context-related perl/ruby scripts
before the end of this year, and these scripts are considerable more
complex than texdoc.

The interface to kpathsea is stable -- unless someone discovers missing
functionality -- and is definately capable of replacing kpsewhich.

The filesystem & os interface is not completely frozen yet, but it
needs user feedback more than anything else. Simply doing everything
the way perl|python|ruby does it is not the right way go, IMO. It
should be usable already, and if Reinhard has requests, these can be
incorporated quickly.

The one thing that is definately missing right now is something
like 'texluatk'. There is no pTK binding for the latest Lua,
and I have not investigated other GUI options yet.

I would be very pleased if Reinhard could spend time on doing texdoc
in texlua. And if he starts now(-ish) we have plenty of time to deal
with any problems long before TL2008's deadline arrives.

Cheers,

Taco






From frank at kuesterei.ch  Sun Jun 10 12:51:20 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Sun, 10 Jun 2007 12:51:20 +0200
Subject: [tex-live] 51232 re: Hidden treasures in TeXLive
In-Reply-To: <000601c7a9e5$67437eb0$23d74157@HPXPPRO> (Richard HARDWICK's
	message of "Fri\, 8 Jun 2007 17\:55\:14 +0200")
References: <000601c7a9e5$67437eb0$23d74157@HPXPPRO>
Message-ID: <873b10ytef.fsf@riesling.zuerich.kuesterei.ch>

"Richard HARDWICK" <rch at skynet.be> wrote:

> Dear Sebastian Rahtz
>
>     I have been vaguely aware that there are lots of
>     interesting files sitting on my hard disk. No problem
>     for jpgs and gifs etc - my filemanager can show them as
>     thumbnails. But it cant do this for pdfs.
>
>     So I just hacked a perl script that runs through the pdfs
>     and spits out an html page, with thumbnails as clicky
>     links to each pdf.
>
>     And I immediately found lots and lots of hidden treasures
>     sitting in my directory TeXLive2005.
>     For which I thank you.
>
>     This is a purely private enterprise - the html layout is
>     not good, and my perl script is not fit for public
>     viewing - but I would like to suggest that your users
>     would be grateful for something like this in the next
>     edition of TeXLive

teTeX contained a "mkhtml" script (in shell, and a mkhtml.nawk version)
which did something similar.  It cannot work with docs in multiple texmf
trees, however, and I've found no easy way to change this.  Otherwise I
would have used it to dynamically update the information for the Debian
teTeX packages plus add-ons.  I guess if we want to do something like
this in TeXLive, an implementation in a more clever language than shell
(e.g. Perl) would be needed.

An interesting feature which we could try to inherit from mkhtml is that
it groups the files hierarchically according to the TDS, it starts with
"amstex" (three doc files in teTeX 3.0), then comes "bibtex" with
subcategories base and bibgerm (4 and 1 file, respectively), context
with base, bib, manual and ppchtex and so on.

It also doesn't look at pdf files exclusively.  And personally I'd
rather not have a view of the first PDF page on the html page, but
rather meta-information like number of pages, whether there's a
"Implementation" chapter, and perhaps even info extracted from the Info
dictionary of the PDF file (after which we could enhance doc.sty to
provide commands for this meta information).

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From frank at kuesterei.ch  Sun Jun 10 13:00:58 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Sun, 10 Jun 2007 13:00:58 +0200
Subject: [tex-live] texdoc under windows
In-Reply-To: <466BB0AF.9070606@elvenkind.com> (Taco Hoekwater's message of
	"Sun\, 10 Jun 2007 10\:05\:03 +0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
Message-ID: <87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>

Taco Hoekwater <taco at elvenkind.com> wrote:

> Reinhard Kotucha wrote:
>> Norbert Preining writes:
>>
>>  > But it is not the time to do  it now. Nobody know whether the lua
>>  > interface to all the internals is already fixed, I wouldn't swear on it.
>>  > And re-rewriting it again and again is a pain. This is material for
>>  > after lua inclusion ...
>
> I disagree on that. If Reinhard can spend time on it now, then now
> really is the time to do this, so that problems can be dealt with
> without the heavy pressure that always occurs in the last few months.

I'm the one who started to rewrite texdoc in Perl.  I think that it
would definitely be better to do it in texlua.  If there are any
problems, let's see this just as a real-world testing example, and if
any internals change, well, it's just going to be a couple of replaces
in the script.

The only problem is that I don't know lua at all, and that I won't have
much time for software development when I start my new job in August.  I
had hoped to be able to produce something useful in Perl until then, but
I'm definitely sceptical about doing the same in lua.

But anyway, where can I find an introductory tutorial into 

a) lua

b) kpse* in luatex?

> The one thing that is definately missing right now is something
> like 'texluatk'. There is no pTK binding for the latest Lua,
> and I have not investigated other GUI options yet.

I was talking about texdoc, texdoctk is something different.  It's
written in Perl, and if any changes are needed to make it run under
Windows, I'd rather make these in the existing implementation.  The real
problem of texdoctk, as Reinhard has pointed out, is maintaining the
database.  

Maybe the "makehtml" approach discussed in the other thread ("Hidden
treasures in TeXLive") is a better alternative there.  Starting with a
sorting after the TDS, one could just add additional grouping
information as much as there is available, and leave the rest in a
"unsorted" category.

Regards, Frank

-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From juergen.fenn at GMX.DE  Sun Jun 10 13:21:48 2007
From: juergen.fenn at GMX.DE (Juergen Fenn)
Date: Sun, 10 Jun 2007 13:21:48 +0200
Subject: [tex-live] texdoc under windows
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
Message-ID: <wk8xasukab.fsf@juergenfenn.de>

"George N. White III" <gnwiii at gmail.com> writes:

> Did MikTeX have a texdoc, or are you thinking of tetex on *x?

MiKTeX comes with texdoc.exe.

J?rgen.


From gnwiii at gmail.com  Sun Jun 10 14:17:09 2007
From: gnwiii at gmail.com (George N. White III)
Date: Sun, 10 Jun 2007 09:17:09 -0300
Subject: [tex-live] texdoc under windows
In-Reply-To: <87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <22af238a0706100517r5f68be1cne52d2e34afdcd706@mail.gmail.com>

On 6/10/07, Frank K?ster <frank at kuesterei.ch> wrote:

> I'm the one who started to rewrite texdoc in Perl.  I think that it
> would definitely be better to do it in texlua.  If there are any
> problems, let's see this just as a real-world testing example, and if
> any internals change, well, it's just going to be a couple of replaces
> in the script.
>
> The only problem is that I don't know lua at all, and that I won't have
> much time for software development when I start my new job in August.  I
> had hoped to be able to produce something useful in Perl until then, but
> I'm definitely sceptical about doing the same in lua.
>
> But anyway, where can I find an introductory tutorial into
>
> a) lua

<http://lua-users.org/wiki/LuaTutorial> is very basic, but I find it important
to read such material because it makes it easier to discuss things with
newcomers (or warm them to look elsewhere!). It has links to other
reference material.  I haven't had timeto study, so it might be riddled
with errors and bad info.

> b) kpse* in luatex?
>
> > The one thing that is definately missing right now is something
> > like 'texluatk'. There is no pTK binding for the latest Lua,
> > and I have not investigated other GUI options yet.
>
> I was talking about texdoc, texdoctk is something different.  It's
> written in Perl, and if any changes are needed to make it run under
> Windows, I'd rather make these in the existing implementation.  The real
> problem of texdoctk, as Reinhard has pointed out, is maintaining the
> database.
>
> Maybe the "makehtml" approach discussed in the other thread ("Hidden
> treasures in TeXLive") is a better alternative there.  Starting with a
> sorting after the TDS, one could just add additional grouping
> information as much as there is available, and leave the rest in a
> "unsorted" category.

Interface aside, there are two approaches represented by texdoc and
texdoctk:

texdoc -- search TEXDOC trees for matching files.  This is slow with the
current kpathsea interface.   The proper fix may require fixing the long-lost
--all option to kpsewhich.

texdoctk -- you only see what is in the database, but you can browse an
organized list of topics.   This just can't work unless database maintenance
can be automated.   I'd prefer to see a system that is based on a more
comprehensive "master list" rather than from what is currently installed,
but I also see the value in a stripped down texdoctk.dat that just organizes
the docs for the most widely used and important packages, but offers a
"Search <more comprehensive database>" option (which could just open
a browser page).

The "TeX Catalog Online" seems to be a reasonable database.  A
search for "lm" which takes a long time with texdoc on local disk is
fast on the TCO.  Looking for the latin modern docs is also fast, and
gives:

    -------------------------------------------------------------------------
There are 6 matching packages.
These are all the results.  For more on any package, click on its name.

  	Package  	Caption

1 	ae 	            Virtual fonts for T1 encoded CMR-fonts.
2 	ec 	            Computer modern fonts in T1 and TS1 encodings.
3 	euenc 	          Unicode font encoding definitions for XeTeX.
4 	fontch 	           Changing fonts, sizes and encodings in Plain TeX.
5 	lm 	             Latin modern fonts in outline formats.
6 	metatype1 	Generate Type 1 fonts from MetaPost.


To search again, enter a new string: latin modern
    ---------------------------------------------------------------------------------

Clicking "lm" I get pointers to the package and the very helpful
information that
the package is included by TeX Live and MikTeX.   The missing step is a quick
way to view the docs for a locally installed package once I know the
name of the
package.

-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From frank at kuesterei.ch  Sun Jun 10 15:16:46 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Sun, 10 Jun 2007 15:16:46 +0200
Subject: [tex-live] texdoc under windows
In-Reply-To: <22af238a0706100517r5f68be1cne52d2e34afdcd706@mail.gmail.com>
	(George N. White, III's message of "Sun\,
	10 Jun 2007 09\:17\:09 -0300")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<22af238a0706100517r5f68be1cne52d2e34afdcd706@mail.gmail.com>
Message-ID: <87d504x83l.fsf@riesling.zuerich.kuesterei.ch>

"George N. White III" <gnwiii at gmail.com> wrote:

> On 6/10/07, Frank K?ster <frank at kuesterei.ch> wrote:
>
>> But anyway, where can I find an introductory tutorial into
>>
>> a) lua
>
> <http://lua-users.org/wiki/LuaTutorial> 

Thank you.

> Interface aside, there are two approaches represented by texdoc and
> texdoctk:
>
> texdoc -- search TEXDOC trees for matching files.  This is slow with the
> current kpathsea interface.   The proper fix may require fixing the long-lost
> --all option to kpsewhich.

Well, that's not the whole story.  The main function of texdoc is to
launch the document in a viewer when you  type its name, and that works
very well for me most of the time:  "texdoc paralist" (missing TL 2007,
but well), "texdoc gerdoc", "texdoc hyperref/manual".  This main
function is *not* slow, and "texdoc -l <name> is quite fast, too.  Only
searching for a regex pattern is slow.

> The "TeX Catalog Online" seems to be a reasonable database.  

But it isn't organized hierarchically, is it?

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From taco at elvenkind.com  Sun Jun 10 15:17:35 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 10 Jun 2007 15:17:35 +0200
Subject: [tex-live] texdoc under windows
In-Reply-To: <87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
References: <466ACF98.8090603@gmx.net>	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>	<18027.8235.396400.342647@zarniwoop.ms25.local>	<20070609220059.GO834@gamma.logic.tuwien.ac.at>	<18027.9656.741195.13867@zarniwoop.ms25.local>	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <466BF9EF.507@elvenkind.com>

Frank K?ster wrote:
> 
> b) kpse* in luatex?

I was going to say 'the reference manual' but I have done stuff in
the past weeks that is not in the manual yet. Because there are
only a few functions involved, here is the relevant documentation
(most have a 1-to-1 relationship  with the kpathsea C functions):

kpse.set_program_name("name" [, "progname"])
  * This initializes the search library.

kpse.init_prog("name", basedpi, "mfmode" [, "fallbackfont"])
  * This does roughly the same, but for progams that do
    PK/GF lookups (and creation), because that needs some
    default values.

"file" = kpse.readable_file("file_name")
  * Returns either the actual filename, or nil, depending on the
    readability of the absolute (!) file_name. The return
    value is a string because in some cases the used filename is
    not identical to the requested filename (think MSDOS)

"var" = kpse.expand_var("varname")
  * expand a texmf variable (== kpsewhich --expand-var)

"path" = kpse.expand_path("path")
  * expand a search path (== kpsewhich --expand-path)

"variable" = kpse.expand_braces("variable")
  * expand a braced set (== kpsewhich --expand-braces)

"file" == kpse.find_file("file" [, "type" [, must_exist] ] )
  * finds a file, or returns nil. The "type" argument is the
    stringified form of the file type, as for kpsewhich --format="",
    and defaults to 'tex'.
    The must_exist argument is a lua boolean value that maps to
    --must-exist, and defaults to false (but see the next paragraph).

"file" == kpse.find_file("file" , "type" , wanted_dpi )
  * In this second form, 'wanted_dpi' is a bitmap resolution. This
    value variant is used when 'type' is one of 'pk', 'gf', or
    'bitmap font'.

If this is not good enough, let me know. Adding an interface to other
existing kpathsea functionality takes no more than a few minutes.

Best wishes,
Taco





From Robin.Fairbairns at cl.cam.ac.uk  Sun Jun 10 15:31:34 2007
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Sun, 10 Jun 2007 14:31:34 +0100
Subject: [tex-live] texdoc under windows
In-Reply-To: Your message of Sun, 10 Jun 2007 13:00:58 +0200.
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch> 
Message-ID: <5143.1181482294@mole.cl.cam.ac.uk>

Frank K?ster <frank at kuesterei.ch> wrote:

> I was talking about texdoc, texdoctk is something different.  It's
> written in Perl, and if any changes are needed to make it run under
> Windows, I'd rather make these in the existing implementation.  The real
> problem of texdoctk, as Reinhard has pointed out, is maintaining the
> database.  

couldn't we generate the database from the doc stuff in the tpm files --
perhaps with some heuristics about what files should go into the
database?

that way we could in principle make the database on the fly as part of
installation, so not listing packages that aren't installed, and
ensuring all relevant documentation is listed for the packages that
_are_ installed.

robin

From Robin.Fairbairns at cl.cam.ac.uk  Sun Jun 10 15:42:54 2007
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Sun, 10 Jun 2007 14:42:54 +0100
Subject: [tex-live] texdoc under windows
In-Reply-To: Your message of Sun, 10 Jun 2007 15:16:46 +0200.
	<87d504x83l.fsf@riesling.zuerich.kuesterei.ch> 
Message-ID: <5271.1181482974@mole.cl.cam.ac.uk>

Frank K?ster <frank at kuesterei.ch> wrote:

> > The "TeX Catalog Online" seems to be a reasonable database.  
> 
> But it isn't organized hierarchically, is it?

in my instance of it, it's not even a database (jim's setup at
tug.ctan.org is a database ... sql, not hierarchical).

searching is actually pretty primitive.  i presume jim does an sql query
(i've never looked at the code); i simply search through a file that has
a trivial index to the xml source files.

running over a simple text file, like that, is really rather quick,
actually.

why do you want hierarchical?

robin

From frank at kuesterei.ch  Sun Jun 10 16:00:31 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Sun, 10 Jun 2007 16:00:31 +0200
Subject: [tex-live] texdoc under windows
In-Reply-To: <466BF9EF.507@elvenkind.com> (Taco Hoekwater's message of "Sun\,
	10 Jun 2007 15\:17\:35 +0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
Message-ID: <871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>

Taco Hoekwater <taco at elvenkind.com> wrote:

> Frank K?ster wrote:
>>
>> b) kpse* in luatex?
>
> I was going to say 'the reference manual' but I have done stuff in
> the past weeks that is not in the manual yet. Because there are
> only a few functions involved, here is the relevant documentation
> (most have a 1-to-1 relationship  with the kpathsea C functions):

Thank you, I think that'll be enough for me.

> "var" = kpse.expand_var("varname")
>  * expand a texmf variable (== kpsewhich --expand-var)
>
> "path" = kpse.expand_path("path")
>  * expand a search path (== kpsewhich --expand-path)
>
> "variable" = kpse.expand_braces("variable")
>  * expand a braced set (== kpsewhich --expand-braces)
[...]
> If this is not good enough, let me know. Adding an interface to other
> existing kpathsea functionality takes no more than a few minutes.

Probably I would need the analog of kpsewhich --var-value, too:

- As long as "--all" does not work for kpsew.find_file (I guess that's
  not a problem of kpsewhich, but of the library) I need to iterate over
  the trees in TEXDOCS.

- I probably need to get the values of TEXDOCSUFFIX or TEXDOCEXT from
  texmf.cnf, at least that is what texdoc currently does.  I was also
  thinking about allowing viewer commands to be customized in texmf.cnf
  - they are already different on OSX and will be even more different on
  WinXX - but I'm not sure whether this is a good idea.

TIA, Frank

-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From frank at kuesterei.ch  Sun Jun 10 16:02:29 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Sun, 10 Jun 2007 16:02:29 +0200
Subject: [tex-live] texdoc under windows
In-Reply-To: <5143.1181482294@mole.cl.cam.ac.uk> (Robin Fairbairns's message
	of "Sun\, 10 Jun 2007 14\:31\:34 +0100")
References: <5143.1181482294@mole.cl.cam.ac.uk>
Message-ID: <87wsybx5ze.fsf@riesling.zuerich.kuesterei.ch>

Robin Fairbairns <Robin.Fairbairns at cl.cam.ac.uk> wrote:

> Frank K?ster <frank at kuesterei.ch> wrote:
>
>> I was talking about texdoc, texdoctk is something different.  It's
>> written in Perl, and if any changes are needed to make it run under
>> Windows, I'd rather make these in the existing implementation.  The real
>> problem of texdoctk, as Reinhard has pointed out, is maintaining the
>> database.  
>
> couldn't we generate the database from the doc stuff in the tpm files --
> perhaps with some heuristics about what files should go into the
> database?
>
> that way we could in principle make the database on the fly as part of
> installation, so not listing packages that aren't installed, and
> ensuring all relevant documentation is listed for the packages that
> _are_ installed.

In my view, the problem is *not* to get a list of documentation files,
but to group them in a sensible order based on use cases (texdoctk has
"Mathematics", "Slides", "Macro programming", "Fonts" and the like) and
(ideally) to also get some short description for each document
(texdoctk.dat contains such a description for each document).

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From reinhard.kotucha at web.de  Sun Jun 10 16:01:05 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sun, 10 Jun 2007 16:01:05 +0200
Subject: [tex-live] texdoc under windows
In-Reply-To: <87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <18028.1057.691408.731928@zarniwoop.ms25.local>

Frank K?ster writes:

 > I'm the one who started to rewrite texdoc in Perl.  I think that it
 > would definitely be better to do it in texlua.  If there are any
 > problems, let's see this just as a real-world testing example, and if
 > any internals change, well, it's just going to be a couple of replaces
 > in the script.
 > 
 > The only problem is that I don't know lua at all, and that I won't have
 > much time for software development when I start my new job in August.  I
 > had hoped to be able to produce something useful in Perl until then, but
 > I'm definitely sceptical about doing the same in lua.

Yes, I think that it's best to continue writing in Perl under these
circumstances.  Lua is quite new for me too though I have the book
"Programming in Lua".  I could try to translate it to texlua, but I
can't guarantee that I can finish it before it is needed.

Let me know what you are going to do.  At the moment I'm writing a
script which converts 7/8-bit encoded files tu UTF-8, but it's not
much work any more.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From kakuto at fsci.fuk.kindai.ac.jp  Sun Jun 10 16:00:24 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Sun, 10 Jun 2007 23:00:24 +0900
Subject: [tex-live] texdoc under windows
In-Reply-To: Your message of "Sun, 10 Jun 2007 14:42:54 +0100"
References: <5271.1181482974@mole.cl.cam.ac.uk>
Message-ID: <200706101400.l5AE0PoH016204@jupiter.fsci.fuk.kindai.ac.jp>

Hi,

At present, one can use in TeXLive 2007 texdoc.exe for W32TeX,
which is in the attached zip file, by copying texdoc.exe into
bin/win32. texdoc.exe for W32TeX is not compatible with that
for teTeX:

Usage(1): texdoc -h
          Display this message
Usage(2): texdoc [Option(s)] FileName [SubStringInPath]
Options :
          -l list matching files without using viewers
          -s use substring for the FileName
Example :
texdoc -l -s readme pdftex
          list all files containing "readme" as a substring
          in the file name, and containing a string "pdftex"
          in the full path name.

-- 
Akira Kakuto
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/octet-stream
Size: 3980 bytes
Desc: not available
Url : http://tug.org/pipermail/tex-live/attachments/20070610/bf9bba6e/attachment.obj 

From frank at kuesterei.ch  Sun Jun 10 16:07:03 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Sun, 10 Jun 2007 16:07:03 +0200
Subject: [tex-live] texdoc under windows
In-Reply-To: <5271.1181482974@mole.cl.cam.ac.uk> (Robin Fairbairns's message
	of "Sun\, 10 Jun 2007 14\:42\:54 +0100")
References: <5271.1181482974@mole.cl.cam.ac.uk>
Message-ID: <87lkerx5rs.fsf@riesling.zuerich.kuesterei.ch>

Robin Fairbairns <Robin.Fairbairns at cl.cam.ac.uk> wrote:

> why do you want hierarchical?

I don't want the catalogue search to be hierarchical, but the catalogue
was suggested as a basis for a texdoc*tk* replacement.  And as I see it,
the main point of texdoctk is that it groups all documentation it knows
about into topics (and that it adds a short description to each doc).  

Regards, Frank

-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From karl at freefriends.org  Mon Jun 11 00:51:01 2007
From: karl at freefriends.org (Karl Berry)
Date: Sun, 10 Jun 2007 17:51:01 -0500
Subject: [tex-live] 51232 re: Hidden treasures in TeXLive
In-Reply-To: <873b10ytef.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <200706102251.l5AMp1o22514@f7.net>

    >     So I just hacked a perl script that runs through the pdfs
    >     and spits out an html page

I wrote a Perl script mkdocindex (in Build/tools) to do something like
that.  The output is included in the distribution, in the top-level file
doc.html (linked to from the README's, etc.).  Here it is online:
http://tug.org/texlive/devsrc/Master/doc.html

It certainly doesn't have everything on Frank's wishlist, or everything
in mkhtml (which I was unaware of), but maybe it is a place to start
from.

Thanks,
Karl

From karl at freefriends.org  Mon Jun 11 00:56:25 2007
From: karl at freefriends.org (Karl Berry)
Date: Sun, 10 Jun 2007 17:56:25 -0500
Subject: [tex-live] texdoc under windows
In-Reply-To: <466BB0AF.9070606@elvenkind.com>
Message-ID: <200706102256.l5AMuP223402@f7.net>

FWIW, I see no reason not to reimplement texdoc in Lua, if Reinhard is
into it.  Sounds fun.  Happy hacking.

k

From kakuto at fsci.fuk.kindai.ac.jp  Mon Jun 11 08:14:10 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Mon, 11 Jun 2007 15:14:10 +0900
Subject: [tex-live] texdoc under windows
In-Reply-To: Your message of "Sun, 10 Jun 2007 23:00:24 +0900"
References: <200706101400.l5AE0PoH016204@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <200706110614.l5B6EB4R019055@jupiter.fsci.fuk.kindai.ac.jp>

> At present, one can use in TeXLive 2007 texdoc.exe for W32TeX,
> which is in the attached zip file, by copying texdoc.exe into
> bin/win32.

There was a bug in the previous texdoc.zip.
Corrected one is attached here.
-- 
Akira Kakuto
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/octet-stream
Size: 3936 bytes
Desc: not available
Url : http://tug.org/pipermail/tex-live/attachments/20070611/8bcdc74d/attachment.obj 

From taco at elvenkind.com  Mon Jun 11 10:39:14 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 11 Jun 2007 10:39:14 +0200
Subject: [tex-live] texdoc under windows
In-Reply-To: <871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
References: <466ACF98.8090603@gmx.net>	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>	<18027.8235.396400.342647@zarniwoop.ms25.local>	<20070609220059.GO834@gamma.logic.tuwien.ac.at>	<18027.9656.741195.13867@zarniwoop.ms25.local>	<466BB0AF.9070606@elvenkind.com>	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <466D0A32.3000506@elvenkind.com>

Hi,


Frank K?ster wrote:
> Taco Hoekwater <taco at elvenkind.com> wrote:
> 
>> Frank K?ster wrote:
>>> b) kpse* in luatex?
>> I was going to say 'the reference manual' but I have done stuff in
>> the past weeks that is not in the manual yet. Because there are
>> only a few functions involved, here is the relevant documentation
>> (most have a 1-to-1 relationship  with the kpathsea C functions):
> 
> Thank you, I think that'll be enough for me.
> 
>> "var" = kpse.expand_var("varname")
>>  * expand a texmf variable (== kpsewhich --expand-var)
>>
>> "path" = kpse.expand_path("path")
>>  * expand a search path (== kpsewhich --expand-path)
>>
>> "variable" = kpse.expand_braces("variable")
>>  * expand a braced set (== kpsewhich --expand-braces)
> [...]
>> If this is not good enough, let me know. Adding an interface to other
>> existing kpathsea functionality takes no more than a few minutes.
> 
> Probably I would need the analog of kpsewhich --var-value, too:

Ok, that will be included in the next snapshot (sometime this week)

> - As long as "--all" does not work for kpsew.find_file (I guess that's
>   not a problem of kpsewhich, but of the library) I need to iterate over
>   the trees in TEXDOCS.

kpsewhich --all only works in combination with --path, and then it
calls a completely different library function that (seems to) test
the harddisk instead of the database. kpse_find_file() always returns
a single file, afaik.

The kpathsea headers are a bit scattered, I am not sure if there is
a possibility to get the full list of matches based on the database
(and optionally the disk as well). If it is not there, I could write
it myself of course, but it would be better if the library provided
that functionality.

Cheers,
Taco

From gnwiii at gmail.com  Mon Jun 11 12:41:25 2007
From: gnwiii at gmail.com (George N. White III)
Date: Mon, 11 Jun 2007 07:41:25 -0300
Subject: [tex-live] texdoc under windows
In-Reply-To: <5271.1181482974@mole.cl.cam.ac.uk>
References: <87d504x83l.fsf@riesling.zuerich.kuesterei.ch>
	<5271.1181482974@mole.cl.cam.ac.uk>
Message-ID: <22af238a0706110341n10aad48fv963e2b3ae20e2345@mail.gmail.com>

On 6/10/07, Robin Fairbairns <Robin.Fairbairns at cl.cam.ac.uk> wrote:

> Frank K?ster <frank at kuesterei.ch> wrote:
>
> > > The "TeX Catalog Online" seems to be a reasonable database.
> >
> > But it isn't organized hierarchically, is it?
>
> in my instance of it, it's not even a database (jim's setup at
> tug.ctan.org is a database ... sql, not hierarchical).
>
> searching is actually pretty primitive.  i presume jim does an sql query
> (i've never looked at the code); i simply search through a file that has
> a trivial index to the xml source files.
>
> running over a simple text file, like that, is really rather quick,
> actually.
>
> why do you want hierarchical?

texdoctk provides a hierarchical view.  One way to get around the
maintenance problem is to put only the most important docs
(according to her what does the work!) in texdoctk.dat, so changes
from year to year are manageable.  To augment the existing search
function, add a "search the TeX Catalog Online" button.

-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From kakuto at fsci.fuk.kindai.ac.jp  Mon Jun 11 12:48:09 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Mon, 11 Jun 2007 19:48:09 +0900
Subject: [tex-live] texdoc under windows
In-Reply-To: Your message of "Mon, 11 Jun 2007 15:14:10 +0900"
References: <200706110614.l5B6EB4R019055@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <200706111048.l5BAmBca020511@jupiter.fsci.fuk.kindai.ac.jp>

> > At present, one can use in TeXLive 2007 texdoc.exe for W32TeX,
> > which is in the attached zip file, by copying texdoc.exe into
> > bin/win32.
> 
> There was a bug in the previous texdoc.zip.
> Corrected one is attached here.

There was still a bug. Here is the 3rd one.
-- 
Akira Kakuto
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/octet-stream
Size: 3937 bytes
Desc: not available
Url : http://tug.org/pipermail/tex-live/attachments/20070611/ae9017a4/attachment.obj 

From lianqing.yu at hotmail.com  Mon Jun 11 15:14:46 2007
From: lianqing.yu at hotmail.com (Lianqing Yu)
Date: Mon, 11 Jun 2007 21:14:46 +0800
Subject: [tex-live] dvipdfm fails to include .eps graphics file
Message-ID: <BAY143-W18C4EE21638015581CE65CF61A0@phx.gbl>


> 1.  does dvipdfm work if you use draft mode for graphics?> This shoudl give a pdf file with boxes outlining the places> where figures will appear.
Yes, dvipdfm works in draft mode.
> 2.  can you convert the EPS to pdf using "eps2pdf ..."?> I think dvipdfm uses much the same conversion, so if this> fails, I would not exect dvipdfm to work.
It's not "eps2pdf.exe", but "epstopdf.exe", which can convert an EPS to an PDF. I tried "epstopdf" using the "golfer.eps" and converted "golfer.pdf" looks right in Adobe Reader 7.0.
> 3.  what does "epstool --test-eps ..." give?> Many files that have .eps extensions do not meet the> definition of a .eps file, including some created using> "name-brand" software.   Most such files can be> converted to pdf and will work with pdflatex.
There is no "epstool.exe" under the TexLive 2003 install directory, so I can't do this test.
> 4.  does dvipdfm work using a "known good" .eps file> such as golfer.eps from the ghostscript examples> directory?> If you are still having trouble after all this, please> read <www.chiark.greenend.org.uk/~sgtatham/bugs.html>.> Note that the best way for us to see the problem is if you> can provide a minimal example (e.g., under a dozen lines> of latex and using an eps file that we already have, such> as golfer.eps).  To save time, here is such an example:>   --------------------------------------------------------------------------> \documentclass{article}> \usepackage[dvipdfm]{graphicx}> \begin{document}> Example using \texttt{golfer.eps} from GhostScript.> \[> \includegraphics[width=8cm]{golfer.eps}> \]> \end{document}I tried your example and below is the output:
 ------------------------------------------------------------
D:\vision>latex t-epsThis is e-TeXk, Version 3.141592-2.1 (Web2c 7.5.2) %&-line parsing enabled. (c:/Program Files/TeXLive/texmf/web2c/cp8bit.tcx)entering extended mode(./t-eps.texLaTeX2e <2001/06/01>Babel <v3.7j> and hyphenation patterns for english, dumylang, nohyphenation, basque, czech, slovak, german, ngerman, spanish, catalan, french, ukenglish, italian, dutch, polish, portuguese, loaded.(c:/Program Files/TeXLive/texmf/tex/latex/base/article.clsDocument Class: article 2001/04/21 v1.4e Standard LaTeX document class(c:/Program Files/TeXLive/texmf/tex/latex/base/size10.clo))(c:/Program Files/TeXLive/texmf/tex/latex/graphics/graphicx.sty(c:/Program Files/TeXLive/texmf/tex/latex/graphics/keyval.sty)(c:/Program Files/TeXLive/texmf/tex/latex/graphics/graphics.sty(c:/Program Files/TeXLive/texmf/tex/latex/graphics/trig.sty)(c:/Program Files/TeXLive/texmf/tex/latex/texlive/graphics.cfg)(c:/Program Files/TeXLive/texmf/tex/latex/graphics/dvipdfm.def))) (./t-eps.aux)<golfer.eps> [1] (./t-eps.aux) )Output written on t-eps.dvi (1 page, 384 bytes).Transcript written on t-eps.log.
 
D:\vision>dvipdfm t-eps
t-eps.dvi -> t-eps.pdf[1Warning:  Couldn't open font map file fonts.mapWarning:  Couldn't open font map file fonts.map(./golfer.eps<PS>Version of PDF file (1.4) is newer than version limit specification.pdf_open: Not a PDF 1.[1-3] file
Corrupt PDF file?
Ignoring stream with with multiple segments)pdf: image inclusion failed for (golfer.eps).]14284 bytes written
D:\vision>
------------------------------------------------------------
I opened "t-eps.dvi" in "windvi.exe" and it looks right. What's problem?
 
_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today it's FREE!
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/tex-live/attachments/20070611/e1bbecf4/attachment.html 

From kakuto at fsci.fuk.kindai.ac.jp  Mon Jun 11 15:46:35 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Mon, 11 Jun 2007 22:46:35 +0900
Subject: [tex-live]  dvipdfm fails to include .eps graphics file
Message-ID: <200706111346.l5BDkaXO021253@jupiter.fsci.fuk.kindai.ac.jp>

> Version of PDF file (1.4) is newer than version limit specification.

The original dvipdfm does not support PDF newer than 1.3.
Try to add -dCompatibilityLevel=1.3 in your Ghostscript
command line in the config file for dvipdfm:

D "gswin32c -q -dSAFER -dNOPAUSE -dBATCH -sPAPERSIZE=a0 -sDEVICE=pdfwrite -dCompatibilityLevel=1.3 ... ..."

-- 
Akira Kakuto

From gnwiii at gmail.com  Mon Jun 11 15:57:43 2007
From: gnwiii at gmail.com (George N. White III)
Date: Mon, 11 Jun 2007 10:57:43 -0300
Subject: [tex-live] dvipdfm fails to include .eps graphics file
In-Reply-To: <BAY143-W18C4EE21638015581CE65CF61A0@phx.gbl>
References: <BAY143-W18C4EE21638015581CE65CF61A0@phx.gbl>
Message-ID: <22af238a0706110657jd5148e2m88b2f042f2a2a35b@mail.gmail.com>

On 6/11/07, Lianqing Yu <lianqing.yu at hotmail.com> wrote:
>
>  > 1.  does dvipdfm work if you use draft mode for graphics?
>
> > This shoudl give a pdf file with boxes outlining the places
> > where figures will appear.
>
>  Yes, dvipdfm works in draft mode.
>
> > 2.  can you convert the EPS to pdf using "eps2pdf ..."?
>
> > I think dvipdfm uses much the same conversion, so if this
> > fails, I would not exect dvipdfm to work.
>
>  It's not "eps2pdf.exe", but "epstopdf.exe", which can convert an EPS to an
> PDF. I tried "epstopdf" using the "golfer.eps" and converted "golfer.pdf"
> looks right in Adobe Reader 7.0.

You are right.  You can check the pdf version using Adobe Reader or
pdfinfo (which might be in texlive or can be obtained from "xpdf", which
is available for Win32).

> > 3.  what does "epstool --test-eps ..." give?
>
> > Many files that have .eps extensions do not meet the
> > definition of a .eps file, including some created using
> > "name-brand" software.   Most such files can be
> > converted to pdf and will work with pdflatex.
>
>  There is no "epstool.exe" under the TexLive 2003 install directory, so I
> can't do this test.

epstool is from ghostgum, so often gets installed with ghostscript.  In any
case:

http://tug.ctan.org/tex-archive/nonfree/support/ghostscript/ghostgum/

has a WIndows version

> > 4.  does dvipdfm work using a "known good" .eps file
> > such as golfer.eps from the ghostscript examples
> > directory?
>
> > If you are still having trouble after all this, please
> > read <www.chiark.greenend.org.uk/~sgtatham/bugs.html>.
> > Note that the best way for us to see the problem is if you
> > can provide a minimal example (e.g., under a dozen lines
> > of latex and using an eps file that we already have, such
> > as golfer.eps).  To save time, here is such an example:
>
> >
> --------------------------------------------------------------------------
> > \documentclass{article}
> > \usepackage[dvipdfm]{graphicx}
> > \begin{document}
> > Example using \texttt{golfer.eps} from GhostScript.
>
> > \[
> > \includegraphics[width=8cm]{golfer.eps}
> > \]
> > \end{document}
>
> I tried your example and below is the output:
>
> ------------------------------------------------------------
> D:\vision>latex t-eps
> This is e-TeXk, Version 3.141592-2.1 (Web2c 7.5.2)
>  %&-line parsing enabled.
>  (c:/Program Files/TeXLive/texmf/web2c/cp8bit.tcx)
> entering extended mode
> (./t-eps.tex
> LaTeX2e <2001/06/01>
> Babel <v3.7j> and hyphenation patterns for english, dumylang, nohyphenation,
> ba
> sque, czech, slovak, german, ngerman, spanish, catalan, french, ukenglish,
> ital
> ian, dutch, polish, portuguese, loaded.
> (c:/Program Files/TeXLive/texmf/tex/latex/base/article.cls
> Document Class: article 2001/04/21 v1.4e Standard LaTeX document class
> (c:/Program Files/TeXLive/texmf/tex/latex/base/size10.clo))
> (c:/Program
> Files/TeXLive/texmf/tex/latex/graphics/graphicx.sty
> (c:/Program
> Files/TeXLive/texmf/tex/latex/graphics/keyval.sty)
> (c:/Program
> Files/TeXLive/texmf/tex/latex/graphics/graphics.sty
> (c:/Program
> Files/TeXLive/texmf/tex/latex/graphics/trig.sty)
> (c:/Program
> Files/TeXLive/texmf/tex/latex/texlive/graphics.cfg)
> (c:/Program
> Files/TeXLive/texmf/tex/latex/graphics/dvipdfm.def)))
> (./t-eps.aux)
> <golfer.eps> [1] (./t-eps.aux) )
> Output written on t-eps.dvi (1 page, 384 bytes).
> Transcript written on t-eps.log.
>
>  D:\vision>dvipdfm t-eps
>  t-eps.dvi -> t-eps.pdf
> [1Warning:  Couldn't open font map file fonts.map
> Warning:  Couldn't open font map file fonts.map

Configuration problem -- you should sort this out.

> (./golfer.eps<PS>
> Version of PDF file (1.4) is newer than version limit specification.
> pdf_open: Not a PDF 1.[1-3] file
>  Corrupt PDF file?
>  Ignoring stream with with multiple segments
> )
> pdf: image inclusion failed for (golfer.eps).
> ]
> 14284 bytes written
>  D:\vision>
> ------------------------------------------------------------
>  I opened "t-eps.dvi" in "windvi.exe" and it looks right. What's problem?

I should have mentioned that the early texlive 2003 was buggy, but that
many of the bugs were fixed in the version that was bundled with The
Latex Companion.

My recollection is that dvipdfmx converts the .eps files to .pdf.  It may be
that it is using a newer ghostscript for this and the default for the eps-->pdf
conversion tool has changed to 1.4 from 1.3.  There may be a configuration
option to fix it.  The log indicated that parts of the .pdf file were
ignored.  It may
look OK, but there could be problems in other viewers that acroread silently
fixes.

It may easier to upgrade to TL2007 than to fix the problems with pdf 1.4
and the missing fonts.map file.  If you don't have the "TLC" update, then
you are almost surely better off upgrading to the current version.

-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From lianqing.yu at hotmail.com  Mon Jun 11 16:40:18 2007
From: lianqing.yu at hotmail.com (Lianqing Yu)
Date: Mon, 11 Jun 2007 22:40:18 +0800
Subject: [tex-live] dvipdfm fails to include .eps graphics file
Message-ID: <BAY143-W1515E9E7CDD5FD4B20D77DF61A0@phx.gbl>


Thanks for you help George, I'd better upgrade to TL 2007.> Date: Mon, 11 Jun 2007 10:57:43 -0300> From: gnwiii at gmail.com> To: lianqing.yu at hotmail.com> Subject: Re: dvipdfm fails to include .eps graphics file> CC: tex-live at tug.org> > On 6/11/07, Lianqing Yu <lianqing.yu at hotmail.com> wrote:> >> > > 1. does dvipdfm work if you use draft mode for graphics?> >> > > This shoudl give a pdf file with boxes outlining the places> > > where figures will appear.> >> > Yes, dvipdfm works in draft mode.> >> > > 2. can you convert the EPS to pdf using "eps2pdf ..."?> >> > > I think dvipdfm uses much the same conversion, so if this> > > fails, I would not exect dvipdfm to work.> >> > It's not "eps2pdf.exe", but "epstopdf.exe", which can convert an EPS to an> > PDF. I tried "epstopdf" using the "golfer.eps" and converted "golfer.pdf"> > looks right in Adobe Reader 7.0.> > You are right. You can check the pdf version using Adobe Reader or> pdfinfo (which might be in texlive or can be obtained from "xpdf", which> is available for Win32).> > > > 3. what does "epstool --test-eps ..." give?> >> > > Many files that have .eps extensions do not meet the> > > definition of a .eps file, including some created using> > > "name-brand" software. Most such files can be> > > converted to pdf and will work with pdflatex.> >> > There is no "epstool.exe" under the TexLive 2003 install directory, so I> > can't do this test.> > epstool is from ghostgum, so often gets installed with ghostscript. In any> case:> > http://tug.ctan.org/tex-archive/nonfree/support/ghostscript/ghostgum/> > has a WIndows version> > > > 4. does dvipdfm work using a "known good" .eps file> > > such as golfer.eps from the ghostscript examples> > > directory?> >> > > If you are still having trouble after all this, please> > > read <www.chiark.greenend.org.uk/~sgtatham/bugs.html>.> > > Note that the best way for us to see the problem is if you> > > can provide a minimal example (e.g., under a dozen lines> > > of latex and using an eps file that we already have, such> > > as go
lfer.eps). To save time, here is such an example:> >> > >> > --------------------------------------------------------------------------> > > \documentclass{article}> > > \usepackage[dvipdfm]{graphicx}> > > \begin{document}> > > Example using \texttt{golfer.eps} from GhostScript.> >> > > \[> > > \includegraphics[width=8cm]{golfer.eps}> > > \]> > > \end{document}> >> > I tried your example and below is the output:> >> > ------------------------------------------------------------> > D:\vision>latex t-eps> > This is e-TeXk, Version 3.141592-2.1 (Web2c 7.5.2)> > %&-line parsing enabled.> > (c:/Program Files/TeXLive/texmf/web2c/cp8bit.tcx)> > entering extended mode> > (./t-eps.tex> > LaTeX2e <2001/06/01>> > Babel <v3.7j> and hyphenation patterns for english, dumylang, nohyphenation,> > ba> > sque, czech, slovak, german, ngerman, spanish, catalan, french, ukenglish,> > ital> > ian, dutch, polish, portuguese, loaded.> > (c:/Program Files/TeXLive/texmf/tex/latex/base/article.cls> > Document Class: article 2001/04/21 v1.4e Standard LaTeX document class> > (c:/Program Files/TeXLive/texmf/tex/latex/base/size10.clo))> > (c:/Program> > Files/TeXLive/texmf/tex/latex/graphics/graphicx.sty> > (c:/Program> > Files/TeXLive/texmf/tex/latex/graphics/keyval.sty)> > (c:/Program> > Files/TeXLive/texmf/tex/latex/graphics/graphics.sty> > (c:/Program> > Files/TeXLive/texmf/tex/latex/graphics/trig.sty)> > (c:/Program> > Files/TeXLive/texmf/tex/latex/texlive/graphics.cfg)> > (c:/Program> > Files/TeXLive/texmf/tex/latex/graphics/dvipdfm.def)))> > (./t-eps.aux)> > <golfer.eps> [1] (./t-eps.aux) )> > Output written on t-eps.dvi (1 page, 384 bytes).> > Transcript written on t-eps.log.> >> > D:\vision>dvipdfm t-eps> > t-eps.dvi -> t-eps.pdf> > [1Warning: Couldn't open font map file fonts.map> > Warning: Couldn't open font map file fonts.map> > Configuration problem -- you should sort this out.> > > (./golfer.eps<PS>> > Version of PDF file (1.4) is newer than version limit specification.> > pdf_open: Not a PDF 1.[1-3] file> > Corrupt PDF file?> 
> Ignoring stream with with multiple segments> > )> > pdf: image inclusion failed for (golfer.eps).> > ]> > 14284 bytes written> > D:\vision>> > ------------------------------------------------------------> > I opened "t-eps.dvi" in "windvi.exe" and it looks right. What's problem?> > I should have mentioned that the early texlive 2003 was buggy, but that> many of the bugs were fixed in the version that was bundled with The> Latex Companion.> > My recollection is that dvipdfmx converts the .eps files to .pdf. It may be> that it is using a newer ghostscript for this and the default for the eps-->pdf> conversion tool has changed to 1.4 from 1.3. There may be a configuration> option to fix it. The log indicated that parts of the .pdf file were> ignored. It may> look OK, but there could be problems in other viewers that acroread silently> fixes.> > It may easier to upgrade to TL2007 than to fix the problems with pdf 1.4> and the missing fonts.map file. If you don't have the "TLC" update, then> you are almost surely better off upgrading to the current version.> > -- > George N. White III <aa056 at chebucto.ns.ca>> Head of St. Margarets Bay, Nova Scotia
_________________________________________________________________
With Windows Live Hotmail, you can personalize your inbox with your favorite color.
www.windowslive-hotmail.com/learnmore/personalize.html?locale=en-us&ocid=TXT_TAGLM_HMWL_reten_addcolor_0607
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/tex-live/attachments/20070611/8da2104a/attachment-0001.html 

From frank at kuesterei.ch  Mon Jun 11 17:05:43 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Mon, 11 Jun 2007 17:05:43 +0200
Subject: [tex-live] texconfig-sys: runs updmap instead of updmap-sys
Message-ID: <87d502wmyg.fsf@riesling.zuerich.kuesterei.ch>

Hi,

texconfig-sys is a wrapper around texconfig which mostly just sets
TEXMFVAR and TEXMFCONFIG to the corresponding SYS variables and then
calls texconfig.  However, in texconfig (around line 1151 in my local
copy) the command "init" runs fmtutil and updmap unconditionally.

I suggest that it should also set and export a variable, say
"syswide_mode=1", and texconfig can then check for this.

I must say that I don't know whether texconfig is used much at all (I
never use it), but as long as we provide it we should also maintain it a
bit. 

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From rch at skynet.be  Mon Jun 11 21:56:10 2007
From: rch at skynet.be (Richard HARDWICK)
Date: Mon, 11 Jun 2007 21:56:10 +0200
Subject: [tex-live] 51235 re: Hidden treasures in TeXLive
Message-ID: <001001c7ac62$8ec13e30$303ff551@HPXPPRO>

    +--------------------------------------------------------+
                                   Bruxelles, le 11-06-2007
                                   notre ref RCH/0051235 51235 51232

    ? l'attention de Frank  K?ster
    cc Karl Berry

    objet : - 51235 re: Hidden treasures in TeXLive

Dear Frank K?ster, Dear Karl Berry
    Thank you both for your very helpful inputs.

    Following your hints, I hacked my perl script so that it
    now formats the index as per the TeXLive directory
    structure.

    I think that the result is much improved - see
    http://users.skynet.be/watermael/demo/TeXLive_FRAMES.html

    I use Glyph & Cog's pdftotext.exe from TeXLive
    (c:\texlive2005\bin\win32\pdftotext.exe) to extract text
    from the pdf.

    I would try to get metadata out as well or instead, if only I knew how.
    I had a quick look at  the other Glyph & Cog utilities in \bin\win32\
    (pdffonts.exe, pdfimages.exe, pdfinfo.exe, pdfthumb.exe)
    but without much joy

    I use Leo Charre's module Image::Magick::Thumbnail::PDF
    to make the thumbnails. I think a thumbnail picture of the first
    page of each pdf is very helpful - but maybe you will
    say that all this is taking up too much space (420 gifs
    and 31 html files, 3.47MB total).

    Meilleures salutations
    Richard Hardwick
   +---------------------------------------------------------+
   .   BRUXELLES .   BELGIQUE   EUROPE   EMAIL RCH at SKYNET.BE .
   +---------------------------------------------------------+


From reinhard.kotucha at web.de  Mon Jun 11 23:57:45 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 11 Jun 2007 23:57:45 +0200
Subject: [tex-live] texconfig-sys: runs updmap instead of updmap-sys
In-Reply-To: <87d502wmyg.fsf@riesling.zuerich.kuesterei.ch>
References: <87d502wmyg.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <18029.50521.873863.39016@zarniwoop.ms25.local>

Frank K?ster writes:

 > texconfig-sys is a wrapper around texconfig which mostly just sets
 > TEXMFVAR and TEXMFCONFIG to the corresponding SYS variables and then
 > calls texconfig.  However, in texconfig (around line 1151 in my local
 > copy) the command "init" runs fmtutil and updmap unconditionally.

I don't like that too.  fmtutil and updmap are quite unrelated.
Thomas added the updmap call some time ago when he wrote the script
from scratch for teTeX-3.  I initially thought that this was a TeXLive
extension but even Thomas had to look into his stuff in order to find
out who made the change.  Hence I think that he had nothing fancy in
mind.

The result of our discussion was that Karl changed the script so that
updmap will not be executed if fmtutil fails.  The fact that formerly
you had no chance to read the error messages provided by fmtutil
bothered me a lot.

I do not see any good reason to call updmap here.  If nobody provides
a good reason, I'll remove it.  It's no problem to add an extra option
to allow people to run updmap from the menu.

 > I suggest that it should also set and export a variable, say
 > "syswide_mode=1", and texconfig can then check for this.

I'm wondering whether it makes more sense to integrate the stuff from
texconfig-sys into texconfig and make texconfig-sys a symlink.

 > I must say that I don't know whether texconfig is used much at all
 > (I never use it), but as long as we provide it we should also
 > maintain it a bit.

texconfig is the main configuration tool for teTeX and TeXLive.  It's
a pity that you never used it, maybe you should use it at least once
in order to find out what it does.  Run texconfig without any
arguments.

We should definitely maintain texconfig, of course.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From zdenek.wagner at gmail.com  Tue Jun 12 00:38:46 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Tue, 12 Jun 2007 00:38:46 +0200
Subject: [tex-live] numerals in xelatex
In-Reply-To: <8719b6240706080639s50baa41cp9f8c528c5507cc9c@mail.gmail.com>
References: <8719b6240706080639s50baa41cp9f8c528c5507cc9c@mail.gmail.com>
Message-ID: <8719b6240706111538i7f858e67td04d0fba78250590@mail.gmail.com>

Hello,
I have made very simple devnagnum.tec and now
\addfontfeature{Mapping=devnagnum} does exactly what I need. I will
put it to CVS at devnag.sarovar.org as soon as I organize the XeLaTeX
code.

2007/6/8, Zdenek Wagner <zdenek.wagner at gmail.com>:
> Hello,
> I am trying to extend the Hindi module for babel so that it works in
> XeLaTeX. The only problem is that automatically generated numbers as
> \number\day in the definition of \today or \thepage (essentially
> \arabic{page}) are displayed as Arabic numbers, not Devanagari. Should
> I prepare a mapping and use something like
> \addfeature{map=devanagari-numerals}, or is there some better way?
> Other Indic scripts will have the same problem, so I would prefer some
> universal solution.
> --
> Zden?k Wagner
> http://hroch486.icpf.cas.cz/wagner/
> http://icebearsoft.euweb.cz
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From reinhard.kotucha at web.de  Tue Jun 12 00:58:06 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 12 Jun 2007 00:58:06 +0200
Subject: [tex-live] texdoc under windows
In-Reply-To: <466BB0AF.9070606@elvenkind.com>
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
Message-ID: <18029.54142.603140.494088@zarniwoop.ms25.local>

Taco Hoekwater writes:

 > The one thing that is definately missing right now is something
 > like 'texluatk'. There is no pTK binding for the latest Lua,
 > and I have not investigated other GUI options yet.

I'm not sure whether it is so important at the moment.  In order to
avoid duplicate code it makes more sense to concentrate on a
command-line interface which provides everything needed by a GUI
wrapper.  I think that we should separate the thing which does all the
work from the user interface in the same way we distinguish between
content and layout if we are using TeX.

So let's write CLI tools but we should always have to keep in mind
that someone wants to provide a GUI wrapper.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From martin at oneiros.de  Tue Jun 12 01:58:24 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 12 Jun 2007 01:58:24 +0200
Subject: [tex-live] texconfig-sys: runs updmap instead of updmap-sys
In-Reply-To: <87d502wmyg.fsf@riesling.zuerich.kuesterei.ch>
References: <87d502wmyg.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <68c491a60706111658p3080b48cibc595a7477390be4@mail.gmail.com>

2007/6/11, Frank K?ster <frank at kuesterei.ch>:
> I must say that I don't know whether texconfig is used much at all (I
> never use it), but as long as we provide it we should also maintain it a
> bit.

Run "texconfig faq" and wonder... :-)

Best
   Martin

From karl at freefriends.org  Tue Jun 12 20:47:20 2007
From: karl at freefriends.org (Karl Berry)
Date: Tue, 12 Jun 2007 13:47:20 -0500
Subject: [tex-live] texconfig-sys: runs updmap instead of updmap-sys
In-Reply-To: <18029.50521.873863.39016@zarniwoop.ms25.local>
Message-ID: <200706121847.l5CIlKh27002@f7.net>

    I do not see any good reason to call updmap here.  

Because "texconfig init" should initialize the system?
(That is what we're talking about, right?)
Why shouldn't it call updmap?  Certainly map files are part of the system.

Right now, texconfig init does three things:
          ...   fmtutil --all \
             && texlinks --multiplatform \
             && updmap ...

    It's no problem to add an extra option to allow people to run updmap
    from the menu.

That could only help, in any case.  Go for it.

    I'm wondering whether it makes more sense to integrate the stuff from
    texconfig-sys into texconfig and make texconfig-sys a symlink.

Either way.  If you want to do the merge, that's fine by me.  If you
want to leave it to me, I will just do the variable export :).

Thanks,
Karl

From zdenek.wagner at gmail.com  Tue Jun 12 23:30:18 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Tue, 12 Jun 2007 23:30:18 +0200
Subject: [tex-live] Velthuis Devanagari for XeLaTeX
Message-ID: <8719b6240706121430w166ed4eeqbec923850555230c@mail.gmail.com>

Hello,
inspired by ArabTeX I have created first experiental TECkit map for
typesetting Velthuis encoded files by XeLaTeX. You can find the alpha
version at http://hroch486.icpf.cas.cz/xelatex-velthuis/xelatex-hindi-sample.zip

I do not know where XeLaTeX looks for the .tec files and whether I
should package the .tec file(s) with Velthuis or whether it should go
to some other package.

Regards,
-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From hartmut_henkel at gmx.de  Wed Jun 13 00:15:01 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed, 13 Jun 2007 00:15:01 +0200 (CEST)
Subject: [tex-live] texconfig-sys: runs updmap instead of updmap-sys
In-Reply-To: <200706121847.l5CIlKh27002@f7.net>
References: <200706121847.l5CIlKh27002@f7.net>
Message-ID: <alpine.DEB.0.99.0706130006500.10902@hahepc1.hahe>

On Tue, 12 Jun 2007, Karl Berry wrote:

>     I do not see any good reason to call updmap here.
>
> Because "texconfig init" should initialize the system?
> (That is what we're talking about, right?)
> Why shouldn't it call updmap?  Certainly map files are part of the system.

isn't this a classical "make" problem? updmap takes long time but is
only needed if map stuff has changed. There is the "newer" program in
tex live, maybe one could use "newer" to check if at least a map file or
the updmap.cfg file has been changed after .map output files were
generated, and only then run updmap?

Regards, Hartmut

From karl at freefriends.org  Wed Jun 13 00:21:45 2007
From: karl at freefriends.org (Karl Berry)
Date: Tue, 12 Jun 2007 17:21:45 -0500
Subject: [tex-live] texconfig-sys: runs updmap instead of updmap-sys
In-Reply-To: <alpine.DEB.0.99.0706130006500.10902@hahepc1.hahe>
Message-ID: <200706122221.l5CMLjf20987@f7.net>

    updmap takes long time 

True, but anyone who cares about speed is presumably not going to run
texconfig init in the first place -- it generates all the formats, and
that takes at least as long as running updmap, and serves even less
purpose, IMHO.

karl

From jonathan_kew at sil.org  Wed Jun 13 00:18:42 2007
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Tue, 12 Jun 2007 15:18:42 -0700
Subject: [tex-live] Velthuis Devanagari for XeLaTeX
In-Reply-To: <8719b6240706121430w166ed4eeqbec923850555230c@mail.gmail.com>
References: <8719b6240706121430w166ed4eeqbec923850555230c@mail.gmail.com>
Message-ID: <8A201AFD-7B89-472E-91AB-66435DC1D925@sil.org>

On 12 Jun 2007, at 2:30 pm, Zdenek Wagner wrote:

> Hello,
> inspired by ArabTeX I have created first experiental TECkit map for
> typesetting Velthuis encoded files by XeLaTeX. You can find the alpha
> version at http://hroch486.icpf.cas.cz/xelatex-velthuis/xelatex- 
> hindi-sample.zip

Cool! :)

> I do not know where XeLaTeX looks for the .tec files

Under whatever

    kpsewhich --show-path "misc fonts"

shows you (which in TeXLive means $TEXMF/fonts/misc//, IIRC).

JK


From j+tex-live at 2007.salmi.ch  Wed Jun 13 13:20:28 2007
From: j+tex-live at 2007.salmi.ch (Jukka Salmi)
Date: Wed, 13 Jun 2007 13:20:28 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
Message-ID: <20070613112028.GA6099@moray.salmi.ch>

Hi,

I'm trying install TeX Live on a NetBSD system because I want to use
LaTeX. Building the [1]sources using the `Build' script worked (almost)
out of the box, so now I have a TeX Live installation in `inst/'.

What steps do I have to take next? Except for moving the `inst/'
contents to the desired destination... E.g. I tried to run latex and
failed:

$ PATH=/usr/local/src/texlive/inst/bin/i386-unknown-netbsdelf4.99.20:$PATH
$ MANPATH=/usr/local/src/texlive/inst/man:$MANPATH
$ tex --version
TeX 3.141592 (Web2C 7.5.6)
kpathsea version 3.5.6
[...]
$ latex sample2e.tex
This is pdfTeX, Version 3.141592-1.40.3 (Web2C 7.5.6)
kpathsea: Running mktexfmt latex.fmt
I can't find the format file `latex.fmt'!

Hmm, any hints? Is there some documentation about what has to be done
after building TeX Live from source?


Help is appreciated!

TIA, Jukka

[1] http://mirror.ctan.org/systems/texlive/Source/source.tar.bz2

-- 
bashian roulette:
$ ((RANDOM%6)) || rm -rf ~

From zdenek.wagner at gmail.com  Wed Jun 13 13:55:07 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 13 Jun 2007 13:55:07 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <20070613112028.GA6099@moray.salmi.ch>
References: <20070613112028.GA6099@moray.salmi.ch>
Message-ID: <8719b6240706130455x47bd103g29626c36b24df71d@mail.gmail.com>

2007/6/13, Jukka Salmi <j+tex-live at 2007.salmi.ch>:
> Hi,
>
> I'm trying install TeX Live on a NetBSD system because I want to use
> LaTeX. Building the [1]sources using the `Build' script worked (almost)
> out of the box, so now I have a TeX Live installation in `inst/'.
>
> What steps do I have to take next? Except for moving the `inst/'
> contents to the desired destination... E.g. I tried to run latex and
> failed:
>
> $ PATH=/usr/local/src/texlive/inst/bin/i386-unknown-netbsdelf4.99.20:$PATH
> $ MANPATH=/usr/local/src/texlive/inst/man:$MANPATH
> $ tex --version
> TeX 3.141592 (Web2C 7.5.6)
> kpathsea version 3.5.6
> [...]
> $ latex sample2e.tex
> This is pdfTeX, Version 3.141592-1.40.3 (Web2C 7.5.6)
> kpathsea: Running mktexfmt latex.fmt
> I can't find the format file `latex.fmt'!

Do you have write permission in /usr/local/src/texlive/inst and its
subdirectories?

>
> Hmm, any hints? Is there some documentation about what has to be done
> after building TeX Live from source?
>
>
> Help is appreciated!
>
> TIA, Jukka
>
> [1] http://mirror.ctan.org/systems/texlive/Source/source.tar.bz2
>
> --
> bashian roulette:
> $ ((RANDOM%6)) || rm -rf ~
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From j+tex-live at 2007.salmi.ch  Wed Jun 13 15:34:40 2007
From: j+tex-live at 2007.salmi.ch (Jukka Salmi)
Date: Wed, 13 Jun 2007 15:34:40 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <8719b6240706130455x47bd103g29626c36b24df71d@mail.gmail.com>
References: <20070613112028.GA6099@moray.salmi.ch>
	<8719b6240706130455x47bd103g29626c36b24df71d@mail.gmail.com>
Message-ID: <20070613133440.GA819@moray.salmi.ch>

Zdenek Wagner --> tex-live (2007-06-13 13:55:07 +0200):
> 2007/6/13, Jukka Salmi <j+tex-live at 2007.salmi.ch>:
>> Hi,
>>
>> I'm trying install TeX Live on a NetBSD system because I want to use
>> LaTeX. Building the [1]sources using the `Build' script worked (almost)
>> out of the box, so now I have a TeX Live installation in `inst/'.
>>
>> What steps do I have to take next? Except for moving the `inst/'
>> contents to the desired destination... E.g. I tried to run latex and
>> failed:
>>
>> $ PATH=/usr/local/src/texlive/inst/bin/i386-unknown-netbsdelf4.99.20:$PATH
>> $ MANPATH=/usr/local/src/texlive/inst/man:$MANPATH
>> $ tex --version
>> TeX 3.141592 (Web2C 7.5.6)
>> kpathsea version 3.5.6
>> [...]
>> $ latex sample2e.tex
>> This is pdfTeX, Version 3.141592-1.40.3 (Web2C 7.5.6)
>> kpathsea: Running mktexfmt latex.fmt
>> I can't find the format file `latex.fmt'!
>
> Do you have write permission in /usr/local/src/texlive/inst and its
> subdirectories?

Yes.


Regards, Jukka

>> Hmm, any hints? Is there some documentation about what has to be done
>> after building TeX Live from source?
>>
>>
>> Help is appreciated!
>>
>> TIA, Jukka
>>
>> [1] http://mirror.ctan.org/systems/texlive/Source/source.tar.bz2
>>
>> --
>> bashian roulette:
>> $ ((RANDOM%6)) || rm -rf ~
>>
>
>
> -- 
> Zden?k Wagner
> http://hroch486.icpf.cas.cz/wagner/
> http://icebearsoft.euweb.cz

-- 
bashian roulette:
$ ((RANDOM%6)) || rm -rf ~

From zdenek.wagner at gmail.com  Wed Jun 13 16:20:58 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 13 Jun 2007 16:20:58 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <20070613133440.GA819@moray.salmi.ch>
References: <20070613112028.GA6099@moray.salmi.ch>
	<8719b6240706130455x47bd103g29626c36b24df71d@mail.gmail.com>
	<20070613133440.GA819@moray.salmi.ch>
Message-ID: <8719b6240706130720m307684bcs6a5d8e97f017ddf3@mail.gmail.com>

2007/6/13, Jukka Salmi <j+tex-live at 2007.salmi.ch>:
> Zdenek Wagner --> tex-live (2007-06-13 13:55:07 +0200):
> > 2007/6/13, Jukka Salmi <j+tex-live at 2007.salmi.ch>:
> >> Hi,
> >>
> >> I'm trying install TeX Live on a NetBSD system because I want to use
> >> LaTeX. Building the [1]sources using the `Build' script worked (almost)
> >> out of the box, so now I have a TeX Live installation in `inst/'.
> >>
> >> What steps do I have to take next? Except for moving the `inst/'
> >> contents to the desired destination... E.g. I tried to run latex and
> >> failed:
> >>
> >> $ PATH=/usr/local/src/texlive/inst/bin/i386-unknown-netbsdelf4.99.20:$PATH
> >> $ MANPATH=/usr/local/src/texlive/inst/man:$MANPATH
> >> $ tex --version
> >> TeX 3.141592 (Web2C 7.5.6)
> >> kpathsea version 3.5.6
> >> [...]
> >> $ latex sample2e.tex
> >> This is pdfTeX, Version 3.141592-1.40.3 (Web2C 7.5.6)
> >> kpathsea: Running mktexfmt latex.fmt
> >> I can't find the format file `latex.fmt'!
> >
> > Do you have write permission in /usr/local/src/texlive/inst and its
> > subdirectories?
>
> Yes.
>
OK. Try:

kpsewhich --show-path fmt

mktexfmt apparently did not manage to generate latex.fmt. You probably
have something wrong in your texmf.cnf so that mktexfmt did not find
any writable directory. Or the writable directory is preceded by !!
which means that latex.fmt will be found only by running mktexlsr
which was not invoked automaticall by mistake.. You can also try

kpsewhich latex.fmt

before and after running mktexlsr. If latex.fmt is found only after
mktexlsr, it is the !! problem. In your setup, latex.fmt should be
created in /usr/local/src/texlive/texmf-var/web2c

It is also possible that mktexfmt did not find tha latex sources in
/usr/local/src/texlive/inst/tex/latex or maybe your settings in
texmf.cnf are different.

If latex.fmt was not built, you can try to generate it manually by:

fmtutil --byfmt latex

it might tell you the reason why it cannot succeed.

>
> Regards, Jukka
>
> >> Hmm, any hints? Is there some documentation about what has to be done
> >> after building TeX Live from source?
> >>
> >>
> >> Help is appreciated!
> >>
> >> TIA, Jukka
> >>
> >> [1] http://mirror.ctan.org/systems/texlive/Source/source.tar.bz2
> >>
> >> --
> >> bashian roulette:
> >> $ ((RANDOM%6)) || rm -rf ~
> >>
> >
> >
> > --
> > Zden?k Wagner
> > http://hroch486.icpf.cas.cz/wagner/
> > http://icebearsoft.euweb.cz
>
> --
> bashian roulette:
> $ ((RANDOM%6)) || rm -rf ~
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From martin at oneiros.de  Wed Jun 13 16:52:30 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 13 Jun 2007 16:52:30 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <8719b6240706130720m307684bcs6a5d8e97f017ddf3@mail.gmail.com>
References: <20070613112028.GA6099@moray.salmi.ch>
	<8719b6240706130455x47bd103g29626c36b24df71d@mail.gmail.com>
	<20070613133440.GA819@moray.salmi.ch>
	<8719b6240706130720m307684bcs6a5d8e97f017ddf3@mail.gmail.com>
Message-ID: <68c491a60706130752k687018d2rd2d5b843372dcf33@mail.gmail.com>

2007/6/13, Zdenek Wagner <zdenek.wagner at gmail.com>:
> OK. Try:
>
> kpsewhich --show-path fmt

And if it fails, please give us the output of
   texconfig conf

Best
   Martin

From j+tex-live at 2007.salmi.ch  Wed Jun 13 18:43:16 2007
From: j+tex-live at 2007.salmi.ch (Jukka Salmi)
Date: Wed, 13 Jun 2007 18:43:16 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <8719b6240706130720m307684bcs6a5d8e97f017ddf3@mail.gmail.com>
References: <20070613112028.GA6099@moray.salmi.ch>
	<8719b6240706130455x47bd103g29626c36b24df71d@mail.gmail.com>
	<20070613133440.GA819@moray.salmi.ch>
	<8719b6240706130720m307684bcs6a5d8e97f017ddf3@mail.gmail.com>
Message-ID: <20070613164316.GA868@moray.salmi.ch>

Hi,

Zdenek Wagner --> tex-live (2007-06-13 16:20:58 +0200):
> OK. Try:
>
> kpsewhich --show-path fmt

$ kpsewhich --show-path fmt
.:/home/jukka/.texmf-config/web2c/unset//:/home/jukka/.texmf-var/web2c/unset//:/home/jukka/texmf/web2c/unset//:!!/a/src/local/texlive/inst/texmf-config/web2c/unset//:!!/a/src/local/texlive/inst/texmf-var/web2c/unset//:!!/a/src/local/texlive/inst/texmf/web2c/unset//:!!/a/src/local/texlive/inst/texmf-local/web2c/unset//:!!/a/src/local/texlive/inst/texmf-dist/web2c/unset//:/home/jukka/.texmf-config/web2c///:/home/jukka/.texmf-var/web2c///:/home/jukka/texmf/web2c///:!!/a/src/local/texlive/inst/texmf-config/web2c///:!!/a/src/local/texlive/inst/texmf-var/web2c///:!!/a/src/local/texlive/inst/texmf/web2c///:!!/a/src/local/texlive/inst/texmf-local/web2c///:!!/a/src/local/texlive/inst/texmf-dist/web2c///

(on this system /a/src/local is the same as /usr/local/src)

Hmm, these $HOME/.texmf-* directories don't exist here, but I'm able
to write to my $HOME ;-) so it should be possible to create them as
needed...

Since I'm not sure whether this should be interpreted as failure or
as success I attached output of `texconfig conf' as Martin requested.


> mktexfmt apparently did not manage to generate latex.fmt. You probably
> have something wrong in your texmf.cnf so that mktexfmt did not find
> any writable directory. Or the writable directory is preceded by !!
> which means that latex.fmt will be found only by running mktexlsr
> which was not invoked automaticall by mistake.. You can also try
>
> kpsewhich latex.fmt
>
> before and after running mktexlsr. If latex.fmt is found only after
> mktexlsr, it is the !! problem. In your setup, latex.fmt should be
> created in /usr/local/src/texlive/texmf-var/web2c

$ kpsewhich latex.fmt
$ echo $?
1
$ mktexlsr
mktexlsr: Updating /a/src/local/texlive/inst/texmf/ls-R... 
mktexlsr: Updating /a/src/local/texlive/inst/texmf-var/ls-R... 
mktexlsr: Done.
$ kpsewhich latex.fmt
$ echo $?
1


> It is also possible that mktexfmt did not find tha latex sources in
> /usr/local/src/texlive/inst/tex/latex or maybe your settings in
> texmf.cnf are different.

Hmm, there's no such directory here:

$ cd /usr/local/src/texlive
$ ls inst/tex/latex
ls: inst/tex/latex: No such file or directory

$ find . -name latex | xargs ls -ld
lrwxr-xr-x  1 jukka  wsrc    6 Jun 13 13:07 ./inst/bin/i386-unknown-netbsdelf4.99.20/latex -> pdftex
-rwxr-xr-x  1 jukka  wsrc   92 Jan 17  2006 ./texk/texlive/latex
drwxr-xr-x  2 jukka  wsrc  512 Sep 30  2006 ./texk/xdvipdfmx/contrib/latex


> If latex.fmt was not built, you can try to generate it manually by:
>
> fmtutil --byfmt latex
>
> it might tell you the reason why it cannot succeed.

$ fmtutil --byfmt latex
$ echo $?
0
$ find /usr/local/src/texlive -name latex.fmt
$ 


Thanks for your help so far!

Regards, Jukka

-- 
bashian roulette:
$ ((RANDOM%6)) || rm -rf ~
-------------- next part --------------
=========================== version information ==========================
teTeX-src release:   (info not available)
teTeX-texmf release: (info not available)

==================== binaries found by searching $PATH ===================
PATH=/usr/local/src/texlive/inst/bin/i386-unknown-netbsdelf4.99.20:/home/jukka/bin:/usr/local/bin:/usr/local/sbin:/usr/pkg/bin:/usr/pkg/sbin:/bin:/sbin:/usr/bin:/usr/sbin:/usr/X11R6/bin:/usr/games
kpsewhich: /usr/local/src/texlive/inst/bin/i386-unknown-netbsdelf4.99.20/kpsewhich
updmap: /usr/local/src/texlive/inst/bin/i386-unknown-netbsdelf4.99.20/updmap
fmtutil: /usr/local/src/texlive/inst/bin/i386-unknown-netbsdelf4.99.20/fmtutil
texconfig: /usr/local/src/texlive/inst/bin/i386-unknown-netbsdelf4.99.20/texconfig
tex: /usr/local/src/texlive/inst/bin/i386-unknown-netbsdelf4.99.20/tex
pdftex: /usr/local/src/texlive/inst/bin/i386-unknown-netbsdelf4.99.20/pdftex
mktexpk: /usr/local/src/texlive/inst/bin/i386-unknown-netbsdelf4.99.20/mktexpk
dvips: /usr/local/src/texlive/inst/bin/i386-unknown-netbsdelf4.99.20/dvips
dvipdfm: /usr/local/src/texlive/inst/bin/i386-unknown-netbsdelf4.99.20/dvipdfm

=========================== active config files ==========================
/a/src/local/texlive/inst/texmf/web2c/texmf.cnf
/a/src/local/texlive/inst/texmf/web2c/fmtutil.cnf
/a/src/local/texlive/inst/texmf/xdvi/XDvi
updmap.cfg: not found
config.ps: not found
mktex.cnf: not found
pdftexconfig.tex: not found
config: not found

============================= font map files =============================
psfonts.map: 
pdftex.map: 
ps2pk.map: 
dvipdfm.map: 

=========================== kpathsea variables ===========================
TEXMFMAIN=/a/src/local/texlive/inst/texmf
TEXMFDIST=/a/src/local/texlive/inst/texmf-dist
TEXMFLOCAL=/a/src/local/texlive/inst/texmf-local
TEXMFSYSVAR=/a/src/local/texlive/inst/texmf-var
TEXMFSYSCONFIG=/a/src/local/texlive/inst/texmf-config
TEXMFVAR=/home/jukka/.texmf-var
TEXMFCONFIG=/home/jukka/.texmf-config
TEXMFHOME=/home/jukka/texmf
VARTEXFONTS=/var/tmp/texfonts
TEXMF={/home/jukka/.texmf-config,/home/jukka/.texmf-var,/home/jukka/texmf,!!/a/src/local/texlive/inst/texmf-config,!!/a/src/local/texlive/inst/texmf-var,!!/a/src/local/texlive/inst/texmf,!!/a/src/local/texlive/inst/texmf-local,!!/a/src/local/texlive/inst/texmf-dist}
SYSTEXMF=/a/src/local/texlive/inst/texmf-local:/a/src/local/texlive/inst/texmf:/a/src/local/texlive/inst/texmf-dist
TEXMFDBS={/home/jukka/.texmf-config,/home/jukka/.texmf-var,/home/jukka/texmf,!!/a/src/local/texlive/inst/texmf-config,!!/a/src/local/texlive/inst/texmf-var,!!/a/src/local/texlive/inst/texmf,!!/a/src/local/texlive/inst/texmf-local,!!/a/src/local/texlive/inst/texmf-dist}:/var/tmp/texfonts
WEB2C={/home/jukka/.texmf-config,/home/jukka/.texmf-var,/home/jukka/texmf,!!/a/src/local/texlive/inst/texmf-config,!!/a/src/local/texlive/inst/texmf-var,!!/a/src/local/texlive/inst/texmf,!!/a/src/local/texlive/inst/texmf-local,!!/a/src/local/texlive/inst/texmf-dist}/web2c
TEXPSHEADERS=.:{/home/jukka/.texmf-config,/home/jukka/.texmf-var,/home/jukka/texmf,!!/a/src/local/texlive/inst/texmf-config,!!/a/src/local/texlive/inst/texmf-var,!!/a/src/local/texlive/inst/texmf,!!/a/src/local/texlive/inst/texmf-local,!!/a/src/local/texlive/inst/texmf-dist}/{dvips,fonts/{enc,type1,type42,type3}}//
TEXCONFIG={/home/jukka/.texmf-config,/home/jukka/.texmf-var,/home/jukka/texmf,!!/a/src/local/texlive/inst/texmf-config,!!/a/src/local/texlive/inst/texmf-var,!!/a/src/local/texlive/inst/texmf,!!/a/src/local/texlive/inst/texmf-local,!!/a/src/local/texlive/inst/texmf-dist}/dvips//
ENCFONTS=.:{/home/jukka/.texmf-config,/home/jukka/.texmf-var,/home/jukka/texmf,!!/a/src/local/texlive/inst/texmf-config,!!/a/src/local/texlive/inst/texmf-var,!!/a/src/local/texlive/inst/texmf,!!/a/src/local/texlive/inst/texmf-local,!!/a/src/local/texlive/inst/texmf-dist}/fonts/enc//
TEXFONTMAPS=.:{/home/jukka/.texmf-config,/home/jukka/.texmf-var,/home/jukka/texmf,!!/a/src/local/texlive/inst/texmf-config,!!/a/src/local/texlive/inst/texmf-var,!!/a/src/local/texlive/inst/texmf,!!/a/src/local/texlive/inst/texmf-local,!!/a/src/local/texlive/inst/texmf-dist}/fonts/map/{kpsewhich,pdftex,dvips,}//

==== kpathsea variables (from environment only; ok if no output here) ====

From frank at kuesterei.ch  Wed Jun 13 15:19:14 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Wed, 13 Jun 2007 15:19:14 +0200
Subject: [tex-live] texconfig-sys: runs updmap instead of updmap-sys
In-Reply-To: <18029.50521.873863.39016@zarniwoop.ms25.local> (Reinhard
	Kotucha's message of "Mon\, 11 Jun 2007 23\:57\:45 +0200")
References: <87d502wmyg.fsf@riesling.zuerich.kuesterei.ch>
	<18029.50521.873863.39016@zarniwoop.ms25.local>
Message-ID: <87wsy8xa99.fsf@riesling.zuerich.kuesterei.ch>

Reinhard Kotucha <reinhard.kotucha at web.de> wrote:

>  > I must say that I don't know whether texconfig is used much at all
>  > (I never use it), but as long as we provide it we should also
>  > maintain it a bit.
>
> texconfig is the main configuration tool for teTeX and TeXLive.  It's
> a pity that you never used it, maybe you should use it at least once
> in order to find out what it does.  Run texconfig without any
> arguments.

Oh, of course I've done that, but mostly in order to learn about it in
case some Debian user asks.  Personally, I prefer the individual
commandline tools.  (Which probably means that I'd use texconfig for
changing paper settings would I ever need to).

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From frank at debian.org  Wed Jun 13 16:04:42 2007
From: frank at debian.org (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Wed, 13 Jun 2007 16:04:42 +0200
Subject: [tex-live] comma versus colon in texmf.cnf
In-Reply-To: <20070611213951.GC2763@skye> (Ralf Stubner's message of "Mon\,
	11 Jun 2007 23\:39\:51 +0200")
References: <87k5uawo6n.fsf@riesling.zuerich.kuesterei.ch>
	<20070611203454.GA2763@skye>
	<87vedukwtu.fsf@riesling.zuerich.kuesterei.ch>
	<20070611213951.GC2763@skye>
Message-ID: <87k5u8x85h.fsf_-_@riesling.zuerich.kuesterei.ch>

Hi,

Ralf Stubner <ralf.stubner at web.de> wrote:

> PS: According to the begining of texmf.cnf the usage of ',' is
> deprecated. Is that new?

I don't know whether it is new (nor what qualify as new in the TeX
world), but for sure it isn't respected in texmf.cnf.  For reference,
the comment says:

% You can use brace notation, for example: /usr/local/{mytex:othertex}
% expands to /usr/local/mytex:/usr/local/othertex.  Instead of the path
% separator you can use a comma: /usr/local/{mytex,othertex} also expands
% to /usr/local/mytex:/usr/local/othertex.  However, the use of the comma
% instead of the path separator is deprecated.

However, the comma is used througout in Master/texmf/web2c/texmf.cnf and
in the -4WIN variant.  A semicolon is also used at a couple of places,
most notably

SYSTEXMF = $TEXMFLOCAL;$TEXMFMAIN;$TEXMFDIST

and after the . component in each TEXINPUTS.foo variable, although the
comment doesn't say anything about `;' in the middle of a path, only

% A leading/trailing/doubled ; in the paths will be expanded into the
%   compile-time default. Probably not what you want.

Should the comments be adapted to reality, or should we try to change
reality? 

Regards, Frank

-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From rivanvx at gmail.com  Wed Jun 13 20:57:46 2007
From: rivanvx at gmail.com (=?UTF-8?Q?Vedran_Mileti=C4=87?=)
Date: Wed, 13 Jun 2007 20:57:46 +0200
Subject: [tex-live] comma versus colon in texmf.cnf
In-Reply-To: <87k5u8x85h.fsf_-_@riesling.zuerich.kuesterei.ch>
References: <87k5uawo6n.fsf@riesling.zuerich.kuesterei.ch>
	<20070611203454.GA2763@skye>
	<87vedukwtu.fsf@riesling.zuerich.kuesterei.ch>
	<20070611213951.GC2763@skye>
	<87k5u8x85h.fsf_-_@riesling.zuerich.kuesterei.ch>
Message-ID: <fd3eb9bf0706131157w6f6d6ea3o55437127d26bff41@mail.gmail.com>

2007/6/13, Frank K?ster <frank at debian.org>:
> Should the comments be adapted to reality, or should we try to change
> reality?
>

I vote for changing the reality.

TeX as a whole is already a mess, but this is one of the situations
where it doesn't need to be messy. Why not make it that way?

-- 
Vedran Mileti?
Student at Math Department, University of Rijeka

From reinhard.kotucha at web.de  Wed Jun 13 21:26:05 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 13 Jun 2007 21:26:05 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <20070613112028.GA6099@moray.salmi.ch>
References: <20070613112028.GA6099@moray.salmi.ch>
Message-ID: <18032.17613.483685.844363@zarniwoop.ms25.local>

Jukka Salmi writes:
 > Hi,
 > 
 > I'm trying install TeX Live on a NetBSD system because I want to use
 > LaTeX. Building the [1]sources using the `Build' script worked (almost)
 > out of the box, so now I have a TeX Live installation in `inst/'.
 > 
 > What steps do I have to take next? Except for moving the `inst/'
 > contents to the desired destination... E.g. I tried to run latex and
 > failed:
 > 
 > $ PATH=/usr/local/src/texlive/inst/bin/i386-unknown-netbsdelf4.99.20:$PATH
 > $ MANPATH=/usr/local/src/texlive/inst/man:$MANPATH

This is probably the wrong way.  TeXLive-2007 works.  The only thing
missing are binaries for your platform.  The best solution is to
install TeXLive-2007 and add the missing files _only_.

Simply install TeXLive as it is (maybe without any binaries).  Then
get the Build tree and put it into a completely separate directory.

You need the Build tree for nothing else but for compiling the
binaries.  

And _don't_ use the current Build tree from the repository, check out
branches/branch2007/Build instead of trunk/Build.

The reason is that you probably get into trouble with pool files if
you are using the current sources.

Run the Build script and copy the binaries (and only the binaries) to
the appropriate directory in the TeXLive tree, for instance
/Path/to/TeXLive/bin/i386-netbsd.  Make sure that symlinks are copied
as symlinks.

Set $PATH accordingly and run:

    texconfig init

This will create all the format files.

The most important thing is that you do not use anything else but the
binaries from the inst tree.  Everything else in inst which is useful
is already in the TL-2007 distribution.

Regards,
  Reinhard 

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From reinhard.kotucha at web.de  Wed Jun 13 23:21:51 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 13 Jun 2007 23:21:51 +0200
Subject: [tex-live] texconfig-sys: runs updmap instead of updmap-sys
In-Reply-To: <87wsy8xa99.fsf@riesling.zuerich.kuesterei.ch>
References: <87d502wmyg.fsf@riesling.zuerich.kuesterei.ch>
	<18029.50521.873863.39016@zarniwoop.ms25.local>
	<87wsy8xa99.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <18032.24559.953212.968813@zarniwoop.ms25.local>

Frank K?ster writes:
 > Reinhard Kotucha <reinhard.kotucha at web.de> wrote:
 > > texconfig is the main configuration tool for teTeX and TeXLive.  It's
 > > a pity that you never used it, maybe you should use it at least once
 > > in order to find out what it does.  Run texconfig without any
 > > arguments.
 > 
 > Oh, of course I've done that, but mostly in order to learn about it in
 > case some Debian user asks.  Personally, I prefer the individual
 > commandline tools.  (Which probably means that I'd use texconfig for
 > changing paper settings would I ever need to).

texconfig is probably a bit more than the individual tools.  Does
fmtutil execute texlinks?

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From karl at freefriends.org  Thu Jun 14 01:44:12 2007
From: karl at freefriends.org (Karl Berry)
Date: Wed, 13 Jun 2007 18:44:12 -0500
Subject: [tex-live] comma versus colon in texmf.cnf
In-Reply-To: <87k5u8x85h.fsf_-_@riesling.zuerich.kuesterei.ch>
Message-ID: <200706132344.l5DNiCl05296@f7.net>

I changed the comments in texmf.cnf.

Comma is not deprecated as a brace element separator {foo,bar} as far as
I'm concerned.

It appears that only : can be used as a brace element separator on Unix:
  $ kpsewhich --expand-braces='a{b;c}'
  ab;c
shows no expansion, while
  $ kpsewhich --expand-braces='a{b:c}'
  ab:ac
is correctly expanded.  That seems like a deficiency (patches welcome,
I'm not going to work on it), because ...

... either ; or : can be used for path element separator in texmf.cnf,
regardless of the underlying system convention.  E.g., these are
equivalent in texmf.cnf:
TEXINPUTS = /some/dir:/another/dir
TEXINPUTS = /some/dir;/another/dir

I believe, though I haven't checked, that either : or ; can be used in
environment variables on Unix.  On Windows, I believe only ; can be
used, due to Windows limitations (I was told).

Hope this muddies the water sufficiently ,;:).

karl

From kakuto at fsci.fuk.kindai.ac.jp  Thu Jun 14 03:58:02 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu, 14 Jun 2007 10:58:02 +0900
Subject: [tex-live] comma versus colon in texmf.cnf
In-Reply-To: Your message of "Wed, 13 Jun 2007 18:44:12 -0500"
References: <200706132344.l5DNiCl05296@f7.net>
Message-ID: <200706140158.l5E1w3rk001118@jupiter.fsci.fuk.kindai.ac.jp>

> Comma is not deprecated as a brace element separator {foo,bar} as far as
> I'm concerned.
> 
> It appears that only : can be used as a brace element separator on Unix:
>   $ kpsewhich --expand-braces='a{b;c}'
>   ab;c
> shows no expansion, while
>   $ kpsewhich --expand-braces='a{b:c}'
>   ab:ac
> is correctly expanded.  That seems like a deficiency (patches welcome,
> I'm not going to work on it), because ...

[FYI]
On Windows,
kpsewhich --expand-braces "a{b:c}"
ab:c
(Not expanded.
 This is natural since ':' is used after a drive letter on Windows.)

kpsewhich --expand-braces "a{b;c}"
ab;ac

kpsewhich --expand-braces "a{b,c}"
ab;ac

Comma can be commonly used as a brace element separator
on Unix and Windows.

-- 
Akira Kakuto

From dak at gnu.org  Thu Jun 14 02:07:22 2007
From: dak at gnu.org (David Kastrup)
Date: Thu, 14 Jun 2007 02:07:22 +0200
Subject: [tex-live] comma versus colon in texmf.cnf
In-Reply-To: <200706132344.l5DNiCl05296@f7.net> (Karl Berry's message of "Wed\,
	13 Jun 2007 18\:44\:12 -0500")
References: <200706132344.l5DNiCl05296@f7.net>
Message-ID: <85bqfjs8jp.fsf@lola.goethe.zz>

karl at freefriends.org (Karl Berry) writes:

> I changed the comments in texmf.cnf.
>
> Comma is not deprecated as a brace element separator {foo,bar} as far as
> I'm concerned.
>
> It appears that only : can be used as a brace element separator on Unix:
>   $ kpsewhich --expand-braces='a{b;c}'
>   ab;c
> shows no expansion, while
>   $ kpsewhich --expand-braces='a{b:c}'
>   ab:ac
> is correctly expanded.  That seems like a deficiency (patches welcome,
> I'm not going to work on it), because ...
>
> ... either ; or : can be used for path element separator in texmf.cnf,
> regardless of the underlying system convention.  E.g., these are
> equivalent in texmf.cnf:
> TEXINPUTS = /some/dir:/another/dir
> TEXINPUTS = /some/dir;/another/dir
>
> I believe, though I haven't checked, that either : or ; can be used in
> environment variables on Unix.  On Windows, I believe only ; can be
> used, due to Windows limitations (I was told).
>
> Hope this muddies the water sufficiently ,;:).

I already stated my opinion that I would want those directories to
accept _both_ colons _as well as_ semicolons as path separators in
_arbitrary_ mixtures.

With the sole exception that a colon preceded by a just a _single_
letter is considered part of the drive name.

That way scripts adding material to environment variables will even
work when they are using a different convention from the one used
already in the environment variable.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From frank at kuesterei.ch  Thu Jun 14 08:38:49 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Thu, 14 Jun 2007 08:38:49 +0200
Subject: [tex-live] texconfig-sys: runs updmap instead of updmap-sys
In-Reply-To: <18032.24559.953212.968813@zarniwoop.ms25.local> (Reinhard
	Kotucha's message of "Wed\, 13 Jun 2007 23\:21\:51 +0200")
References: <87d502wmyg.fsf@riesling.zuerich.kuesterei.ch>
	<18029.50521.873863.39016@zarniwoop.ms25.local>
	<87wsy8xa99.fsf@riesling.zuerich.kuesterei.ch>
	<18032.24559.953212.968813@zarniwoop.ms25.local>
Message-ID: <87d4zzrqfa.fsf@riesling.zuerich.kuesterei.ch>

Reinhard Kotucha <reinhard.kotucha at web.de> wrote:

> Frank K?ster writes:
>  > Reinhard Kotucha <reinhard.kotucha at web.de> wrote:
>  > > texconfig is the main configuration tool for teTeX and TeXLive.  It's
>  > > a pity that you never used it, maybe you should use it at least once
>  > > in order to find out what it does.  Run texconfig without any
>  > > arguments.
>  > 
>  > Oh, of course I've done that, but mostly in order to learn about it in
>  > case some Debian user asks.  Personally, I prefer the individual
>  > commandline tools.  (Which probably means that I'd use texconfig for
>  > changing paper settings would I ever need to).
>
> texconfig is probably a bit more than the individual tools.  Does
> fmtutil execute texlinks?

No, but there's an individual commandline tool to do that.  It's called
texlinks ;-).

Personally, I never had to create *and* use a custom format, so I never
needed texlinks.

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From lianqing.yu at hotmail.com  Thu Jun 14 09:44:04 2007
From: lianqing.yu at hotmail.com (Lianqing Yu)
Date: Thu, 14 Jun 2007 15:44:04 +0800
Subject: [tex-live] TL2007 epstopdf: Script interpreter is not found in PATH
Message-ID: <BAY143-W22FDD3E66BE831CD911CF6F61F0@phx.gbl>


> I should have mentioned that the early texlive 2003 was buggy, but that> many of the bugs were fixed in the version that was bundled with The> Latex Companion.> > My recollection is that dvipdfmx converts the .eps files to .pdf. It may be> that it is using a newer ghostscript for this and the default for the eps-->pdf> conversion tool has changed to 1.4 from 1.3. There may be a configuration> option to fix it. The log indicated that parts of the .pdf file were> ignored. It may> look OK, but there could be problems in other viewers that acroread silently> fixes.> > It may easier to upgrade to TL2007 than to fix the problems with pdf 1.4> and the missing fonts.map file. If you don't have the "TLC" update, then> you are almost surely better off upgrading to the current version.> > -- > George N. White III <aa056 at chebucto.ns.ca>> Head of St. Margarets Bay, Nova Scotia
 
I uninstall TexLive 2003 and install 2007 and try the t-eps.tex you gave me. After the command 'epstopdf golfer.eps', I get the error message:
Script interpreter is not found in PATH.
What's problem? I remember I did not install perl during the installation of TeXLive 2007.
 
_________________________________________________________________
With Windows Live Hotmail, you can personalize your inbox with your favorite color.
www.windowslive-hotmail.com/learnmore/personalize.html?locale=en-us&ocid=TXT_TAGLM_HMWL_reten_addcolor_0607
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/tex-live/attachments/20070614/9c65e9d4/attachment.html 

From zdenek.wagner at gmail.com  Thu Jun 14 09:48:46 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 14 Jun 2007 09:48:46 +0200
Subject: [tex-live] TL2007 epstopdf: Script interpreter is not found in
	PATH
In-Reply-To: <BAY143-W22FDD3E66BE831CD911CF6F61F0@phx.gbl>
References: <BAY143-W22FDD3E66BE831CD911CF6F61F0@phx.gbl>
Message-ID: <8719b6240706140048r735fcc89jbca738a3e99f26a2@mail.gmail.com>

2007/6/14, Lianqing Yu <lianqing.yu at hotmail.com>:

>  I uninstall TexLive 2003 and install 2007 and try the t-eps.tex you gave
> me. After the command 'epstopdf golfer.eps', I get the error message:
>  Script interpreter is not found in PATH.
>  What's problem? I remember I did not install perl during the installation
> of TeXLive 2007.
>
That's exactly the problem, epstopdf is written in perl. And it uses
ghostscript so be sure that you have it too.
>
>
> ________________________________
> Make every IM count. Download Windows Live Messenger and join the i'm
> Initiative now. It's free.?? Make it count!


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From lianqing.yu at hotmail.com  Thu Jun 14 09:53:12 2007
From: lianqing.yu at hotmail.com (Lianqing Yu)
Date: Thu, 14 Jun 2007 15:53:12 +0800
Subject: [tex-live] TL2007 epstopdf: Script interpreter is not found in
 PATH
Message-ID: <BAY143-W18CA0B0BAA65347CA6B1F0F61F0@phx.gbl>


Thanks. But how to solve this problem?> Date: Thu, 14 Jun 2007 09:48:46 +0200> From: zdenek.wagner at gmail.com> To: lianqing.yu at hotmail.com> Subject: Re: [tex-live] TL2007 epstopdf: Script interpreter is not found in PATH> CC: tex-live at tug.org> > 2007/6/14, Lianqing Yu <lianqing.yu at hotmail.com>:> > > I uninstall TexLive 2003 and install 2007 and try the t-eps.tex you gave> > me. After the command 'epstopdf golfer.eps', I get the error message:> > Script interpreter is not found in PATH.> > What's problem? I remember I did not install perl during the installation> > of TeXLive 2007.> >> That's exactly the problem, epstopdf is written in perl. And it uses> ghostscript so be sure that you have it too.> >> >> > ________________________________> > Make every IM count. Download Windows Live Messenger and join the i'm> > Initiative now. It's free.?? Make it count!> > > -- > Zden?k Wagner> http://hroch486.icpf.cas.cz/wagner/> http://icebearsoft.euweb.cz
_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today it's FREE!
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/tex-live/attachments/20070614/848be6db/attachment-0001.html 

From kakuto at fsci.fuk.kindai.ac.jp  Thu Jun 14 09:58:19 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu, 14 Jun 2007 16:58:19 +0900
Subject: [tex-live] TL2007 epstopdf: Script interpreter is not found in	
	PATH
In-Reply-To: Your message of "Thu, 14 Jun 2007 15:44:04 +0800"
References: <BAY143-W22FDD3E66BE831CD911CF6F61F0@phx.gbl>
Message-ID: <200706140758.l5E7wK4C002109@jupiter.fsci.fuk.kindai.ac.jp>

> Script interpreter is not found in PATH.
> What's problem? I remember I did not install perl during
> the installation of TeXLive 2007.

Maybe you don't have perl.exe in your command PATH.

Best,
-- 
Akira Kakuto

From zdenek.wagner at gmail.com  Thu Jun 14 10:08:18 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 14 Jun 2007 10:08:18 +0200
Subject: [tex-live] TL2007 epstopdf: Script interpreter is not found in
	PATH
In-Reply-To: <BAY143-W18CA0B0BAA65347CA6B1F0F61F0@phx.gbl>
References: <BAY143-W18CA0B0BAA65347CA6B1F0F61F0@phx.gbl>
Message-ID: <8719b6240706140108x545590afw942285a0da1d94a6@mail.gmail.com>

2007/6/14, Lianqing Yu <lianqing.yu at hotmail.com>:
>
>  Thanks. But how to solve this problem?
>
I do not have TL in Windows so I cannot give you step-by-step
instructions but there is certainly some maintenance menu which allows
you to install missing components, e.g. perl and ghostscript.

> > Date: Thu, 14 Jun 2007 09:48:46 +0200
> > From: zdenek.wagner at gmail.com
> > To: lianqing.yu at hotmail.com
> > Subject: Re: [tex-live] TL2007 epstopdf: Script interpreter is not found
> in PATH
> > CC: tex-live at tug.org
>
> >
> > 2007/6/14, Lianqing Yu <lianqing.yu at hotmail.com>:
> >
> > > I uninstall TexLive 2003 and install 2007 and try the t-eps.tex you gave
> > > me. After the command 'epstopdf golfer.eps', I get the error message:
> > > Script interpreter is not found in PATH.
> > > What's problem? I remember I did not install perl during the
> installation
> > > of TeXLive 2007.
> > >
> > That's exactly the problem, epstopdf is written in perl. And it uses
> > ghostscript so be sure that you have it too.
> > >
> > >
> > > ________________________________
> > > Make every IM count. Download Windows Live Messenger and join the i'm
> > > Initiative now. It's free.?? Make it count!
> >
> >
> > --
> > Zden?k Wagner
> > http://hroch486.icpf.cas.cz/wagner/
> > http://icebearsoft.euweb.cz
>
> ________________________________
> Hotmail to go? Get your Hotmail, news, sports and much more! Check out the
> New MSN Mobile


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From j+tex-live at 2007.salmi.ch  Thu Jun 14 11:43:41 2007
From: j+tex-live at 2007.salmi.ch (Jukka Salmi)
Date: Thu, 14 Jun 2007 11:43:41 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <18032.17613.483685.844363@zarniwoop.ms25.local>
References: <20070613112028.GA6099@moray.salmi.ch>
	<18032.17613.483685.844363@zarniwoop.ms25.local>
Message-ID: <20070614094341.GA14717@moray.salmi.ch>

Reinhard Kotucha --> tex-live (2007-06-13 21:26:05 +0200):
> Jukka Salmi writes:
>  > Hi,
>  > 
>  > I'm trying install TeX Live on a NetBSD system because I want to use
>  > LaTeX. Building the [1]sources using the `Build' script worked (almost)
>  > out of the box, so now I have a TeX Live installation in `inst/'.
>  > 
>  > What steps do I have to take next? Except for moving the `inst/'
>  > contents to the desired destination... E.g. I tried to run latex and
>  > failed:
>  > 
>  > $ PATH=/usr/local/src/texlive/inst/bin/i386-unknown-netbsdelf4.99.20:$PATH
>  > $ MANPATH=/usr/local/src/texlive/inst/man:$MANPATH
> 
> This is probably the wrong way.  TeXLive-2007 works.

Sure, but unfortunately not for all definitions of `work' ;-)


> The only thing
> missing are binaries for your platform.  The best solution is to
> install TeXLive-2007 and add the missing files _only_.
> 
> Simply install TeXLive as it is (maybe without any binaries).  Then
> get the Build tree and put it into a completely separate directory.
> 
> You need the Build tree for nothing else but for compiling the
> binaries.  
> 
> And _don't_ use the current Build tree from the repository, check out
> branches/branch2007/Build instead of trunk/Build.

...and branch2007/Build contains exactly what the source tarball from
the iso image contains, isn't it? Anyway that's what I've used.

BTW, I had to use Google to find the TeX Live [1]repository; I can't
find a link to it from the project' [2]home page. Am I missing something
or is there really no link?


> The reason is that you probably get into trouble with pool files if
> you are using the current sources.
> 
> Run the Build script and copy the binaries (and only the binaries) to
> the appropriate directory in the TeXLive tree, for instance
> /Path/to/TeXLive/bin/i386-netbsd.  Make sure that symlinks are copied
> as symlinks.
> 
> Set $PATH accordingly and run:
> 
>     texconfig init
> 
> This will create all the format files.
> 
> The most important thing is that you do not use anything else but the
> binaries from the inst tree.  Everything else in inst which is useful
> is already in the TL-2007 distribution.

OK, thanks. I tried to follow your hints: I installed TL by running
`install-tl.sh' from the `inst' CD (see attached installation log) and
copied the bin directory from the TL build to where I installed TL.
But `texconfig init' failed:

$ ls /b/tmp/jukka/texlive/2007 
bin/         texmf/       texmf-dist/  texmf-doc/   texmf-local/ texmf-var/
$ PATH=/b/tmp/jukka/texlive/2007/bin:$PATH
$ texconfig init
/b/tmp/jukka/texlive/2007/bin/fmtutil: /b/tmp/jukka/texlive/texmf/texconfig/tcfmgr: not found
fmtutil: config file `fmtutil.cnf' not found.

And, where are the info, man, share, include, etc. directories which
were created in `inst/' when I ran the build script? Are they not
installed by default or does this indicate something went wrong?

Hmm...


Regards, Jukka

[1] http://www.tug.org/texlive/svn/
[2] http://www.tug.org/texlive/

-- 
bashian roulette:
$ ((RANDOM%6)) || rm -rf ~
-------------- next part --------------
==================> TeX Live installation procedure <=================

===> Note: Letters/digits in <angle brackets> indicate menu items <===
===>       for commands or configurable options                   <===

    Proposed platform: 
    
    <P> over-ride system detection and choose platform
    <B> binary systems:         0 out of  3
    <S> Installation scheme (scheme_full)
    [customizing installation scheme:
       <C> standard collections   <L> language collections]
    82 out of 85, disk space required: 1111249 kB
    <D> directories:
      TEXDIR      (The main TeX directory)        : /b/tmp/jukka/texlive/2007     
      TEXMFLOCAL  (Directory for local styles etc): /b/tmp/jukka/texlive/2007/texmf-local
      TEXMFSYSVAR (Directory for local config)    : /b/tmp/jukka/texlive/2007/texmf-var
    <O> options:
       [ ] alternate directory for generated fonts ()
       [ ] create symlinks in standard directories
       [ ] do not install macro/font doc tree
       [ ] do not install macro/font source tree
    <I> start installation
    <H> help,  <Q> quit

Enter command: I
Preparing destination directories... done preparing.
Preparing list of files to be installed...

  Essential programs and files 
  Extra BibTeX styles 
  TeX auxiliary programs 
  ConTeXt format 
  Base documentation 
  Bulgarian documentation 
  Chinese documentation 
  Czechslovak documentation 
  Dutch documentation 
  English documentation 
  Finnish documentation 
  French documentation 
  German documentation 
  Greek documentation 
  Italian documentation 
  Japanese documentation 
  Korean documentation 
  Mongolian documentation 
  Polish documentation 
  Portuguese documentation 
  Russian documentation 
  Spanish documentation 
  Thai documentation 
  Turkish documentation 
  Ukrainian documentation 
  Vietnamese documentation 
  TeX font-related programs 
  Extra fonts 
  Recommended fonts 
  Extra formats 
  Games typesetting (chess, etc) 
  Miscellaneous extra generic macros 
  Miscellaneous generic macros 
  Graphics tools 
  HTML/SGML/XML support 
  LaTeX support for the humanities 
  Basic LaTeX packages 
  LaTeX3 packages 
  LaTeX supplementary packages 
  LaTeX recommended packages 
  Advanced math typesetting 
  MetaPost (and Metafont) drawing packages 
  Music typesetting 
  Omega 
  Packages for drawings graphics 
  Plain TeX supplementary packages 
  PSTricks packages 
  PostScript and Truetype utilities 
  Support for publishers 
  Typesetting for natural and computer sciences 
  GNU Texinfo 
  TrueType font manipulation 
  XeTeX macros 

  African scripts 
  Arabic 
  Armenian 
  Chinese, Japanese, Korean 
  Croatian 
  Cyrillic 
  Czech/Slovak 
  Danish 
  Dutch 
  Finnish 
  French 
  German 
  Greek typesetting 
  Hebrew 
  Hungarian 
  Indic 
  Italian 
  Latin 
  Manju 
  Mongolian 
  Norwegian 
  Other hyphenation files 
  Polish 
  Portuguese 
  Spanish 
  Swedish 
  Tibetan 
  UK English 
  Vietnamese 
Initializing texmf-var...

Unpacking zip files for packages...
..............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................
Done unpacking.
Fixing permissions in /b/tmp/jukka/texlive/2007... done.
Setting up directories for automatic font creation... done.
Configuring fmtutil.cnf from /b/tmp/jukka/texlive/2007/texmf/web2c  into  /b/tmp/jukka/texlive/2007/texmf-var/web2c... 
Setting local tree (TEXMFLOCAL) to $SELFAUTOPARENT/texmf-local in /b/tmp/jukka/texlive/2007/texmf/web2c/texmf.cnf... 
Setting system var tree (TEXMFSYSVAR) to $SELFAUTOPARENT/texmf-var in /b/tmp/jukka/texlive/2007/texmf/web2c/texmf.cnf... 
Setting TEXMFHOME to $HOME/texmf in /b/tmp/jukka/texlive/2007/texmf/web2c/texmf.cnf... 
Done updating texmf.cnf.

Testing for /b/tmp/jukka/texlive/2007/bin//texconfig....

See ./index.html for links to documentation.
The TeX Live web site (http://tug.org/texlive/)
contains any updates and corrections.

TeX Live is a joint project of the TeX user groups around the world;
please consider supporting it by joining the group best for you.  
The list of groups is available on the web at 
http://tug.org/usergroups.html.

Welcome to TeX Live!

From martin at oneiros.de  Thu Jun 14 14:05:52 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Thu, 14 Jun 2007 14:05:52 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <20070614094341.GA14717@moray.salmi.ch>
References: <20070613112028.GA6099@moray.salmi.ch>
	<18032.17613.483685.844363@zarniwoop.ms25.local>
	<20070614094341.GA14717@moray.salmi.ch>
Message-ID: <68c491a60706140505k2b8a62b9m5298a693e99d5dae@mail.gmail.com>

2007/6/14, Jukka Salmi <j+tex-live at 2007.salmi.ch>:
> BTW, I had to use Google to find the TeX Live [1]repository; I can't
> find a link to it from the project' [2]home page. Am I missing something
> or is there really no link?

http://www.tug.org/tex-live/ -> How you can help
http://www.tug.org/tex-live/contribute.html -> As an author or
developer -> http://www.tug.org/tex-live/svn/

Best
   Martin

From karl at freefriends.org  Thu Jun 14 19:54:25 2007
From: karl at freefriends.org (Karl Berry)
Date: Thu, 14 Jun 2007 12:54:25 -0500
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <20070614094341.GA14717@moray.salmi.ch>
Message-ID: <200706141754.l5EHsPF14076@f7.net>

    ...and branch2007/Build contains exactly what the source tarball from
    the iso image contains, isn't it? 

Yes.

    /b/tmp/jukka/texlive/2007/bin/fmtutil:
    /b/tmp/jukka/texlive/texmf/texconfig/tcfmgr: not found 

I think the tcfmgr script is missing because it is part of the
bin-texconfig package, and you did not install any binaries.
I'm not sure what else might be in the same boat.

So, let me make this new suggestion (sorry): do the install-tl.sh again,
but this time use the b option and go ahead and install i386-linux.
After the install, ignore the bin/i386-linux/ dir and copy in your
netbsd binaries as before.

That way the "binaries" that are actually part of the texmf tree, like
tcfmgr, will get installed.  It would seem I should rearrange the
dependencies somehow, although the right thing is not immediately
apparent to me.

    fmtutil: config file `fmtutil.cnf' not found.

It should be in texmf/web2c/fmtutil.cnf, although maybe the missing
scripts caused problems. 

One other hint: If you have any TeX-related environment variables set,
unset them.

By the way, would you be interested in supplying netbsd binaries in the
next release?

Thanks,
Karl

From karl at freefriends.org  Thu Jun 14 21:58:58 2007
From: karl at freefriends.org (Karl Berry)
Date: Thu, 14 Jun 2007 14:58:58 -0500
Subject: [tex-live] comma versus colon in texmf.cnf
In-Reply-To: <85bqfjs8jp.fsf@lola.goethe.zz>
Message-ID: <200706141958.l5EJwwo17160@f7.net>

Hi David,

    That way scripts adding material to environment variables will even
    work when they are using a different convention from the one used
    already in the environment variable.

I see your logic, but it's not something I can make a priority to
implement myself.  A patch would be welcome.

    With the sole exception that a colon preceded by a just a _single_
    letter is considered part of the drive name.

On Unix, IMHO it would be necessary to check if the directory exists,
e.g.,
TEXINPUTS=c:

should first check if a directory named `c' exists, and if so, proceed
as usual ...

k

From dak at gnu.org  Thu Jun 14 23:10:35 2007
From: dak at gnu.org (David Kastrup)
Date: Thu, 14 Jun 2007 23:10:35 +0200
Subject: [tex-live] comma versus colon in texmf.cnf
In-Reply-To: <200706141958.l5EJwwo17160@f7.net> (Karl Berry's message of "Thu\,
	14 Jun 2007 14\:58\:58 -0500")
References: <200706141958.l5EJwwo17160@f7.net>
Message-ID: <85ir9qqm2c.fsf@lola.goethe.zz>

karl at freefriends.org (Karl Berry) writes:

> Hi David,
>
>     That way scripts adding material to environment variables will even
>     work when they are using a different convention from the one used
>     already in the environment variable.
>
> I see your logic, but it's not something I can make a priority to
> implement myself.  A patch would be welcome.
>
>     With the sole exception that a colon preceded by a just a _single_
>     letter is considered part of the drive name.
>
> On Unix, IMHO it would be necessary to check if the directory exists,
> e.g.,
> TEXINPUTS=c:
>
> should first check if a directory named `c' exists, and if so, proceed
> as usual ...

I don't think that single-letter relative directories are really worth
bothering for.  It would be likely more important to have a way to
precheck a Windows setup: I have indeed created directories called
C:\I\ don\'t\ believe\ this/
or similar under Unix in order to test some Windows-relevant scripts.

Anyway, one could still offer kpathseasep settings of colon, semicolon
and mixed.  That way, purists could still switch back to "colon", but
with the problem that a path like

~/tex;

will not work when some system-agnostic scripts uses that kind of
convention.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From karl at freefriends.org  Fri Jun 15 00:00:11 2007
From: karl at freefriends.org (Karl Berry)
Date: Thu, 14 Jun 2007 17:00:11 -0500
Subject: [tex-live] linux 2.4 binaries
Message-ID: <200706142200.l5EM0B820859@f7.net>

Michel Goossens at CERN kindly provided access to an old GNU/Linux
machine running a 2.4 kernel to produce the i386-linux binaries that
were in TL 2007.  CERN's security people are now planning to upgrade
that machine, so it won't be available for the next TL release.

So, does anyone else have a 2.4 machine available to do this?  The
easiest way is if I am able to log in and do the builds myself, but
having binaries supplied is doable too.  Obviously it doesn't matter
right now, but I'm trying to avoid surprises at the end.

Unless such a machine materializes, we will be forced to move on to
Linux 2.6 in 2008 :).

Thanks,
k

From reinhard.kotucha at web.de  Fri Jun 15 00:40:41 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 15 Jun 2007 00:40:41 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <20070614094341.GA14717@moray.salmi.ch>
References: <20070613112028.GA6099@moray.salmi.ch>
	<18032.17613.483685.844363@zarniwoop.ms25.local>
	<20070614094341.GA14717@moray.salmi.ch>
Message-ID: <18033.50153.498681.972634@zarniwoop.ms25.local>

Jukka Salmi writes:

 > $ ls /b/tmp/jukka/texlive/2007 
 > bin/         texmf/       texmf-dist/  texmf-doc/   texmf-local/ texmf-var/
 > $ PATH=/b/tmp/jukka/texlive/2007/bin:$PATH
 > $ texconfig init
 > /b/tmp/jukka/texlive/2007/bin/fmtutil: /b/tmp/jukka/texlive/texmf/texconfig/tcfmgr: not found

Put the binaries into

  /b/tmp/jukka/texlive/2007/bin/i386-netbsd

instead of 

  /b/tmp/jukka/texlive/2007/bin

This is important.  TeXLive depends on the directory structure.

 > And, where are the info, man, share, include, etc. directories which
 > were created in `inst/' when I ran the build script? Are they not
 > installed by default or does this indicate something went wrong?

The man and info files are in texmf/doc.  The install script issues a
message at the end of the installation process about how to set PATH,
MANPATH and INFOPATH.  The include files are not installed, don't worry.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From preining at logic.at  Fri Jun 15 02:02:15 2007
From: preining at logic.at (Norbert Preining)
Date: Thu, 14 Jun 2007 18:02:15 -0600
Subject: [tex-live] linux 2.4 binaries
In-Reply-To: <200706142200.l5EM0B820859@f7.net>
References: <200706142200.l5EM0B820859@f7.net>
Message-ID: <159-SnapperMsgD65F34B6C2978843@[10.8.65.224]>

Hi Karl,

no problem. In case I just boot one of my machines with a 2.4 kernel and compile in a debian etch chroot. So this is definitely not a problem.

Bye

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------


From reinhard.kotucha at web.de  Fri Jun 15 03:05:44 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 15 Jun 2007 03:05:44 +0200
Subject: [tex-live] linux 2.4 binaries
In-Reply-To: <159-SnapperMsgD65F34B6C2978843@[10.8.65.224]>
References: <200706142200.l5EM0B820859@f7.net>
	<159-SnapperMsgD65F34B6C2978843@[10.8.65.224]>
Message-ID: <18033.58856.483414.787380@zarniwoop.ms25.local>

Norbert Preining writes:

 > no problem. In case I just boot one of my machines with a 2.4
 > kernel and compile in a debian etch chroot. So this is definitely
 > not a problem.

I just compiled TeXLive on my old machine running Slackware 7.1.

$ uname -a
Linux zarniwoop 2.2.16 #9 SMP Sun Jan 5 23:13:52 CET 2003 i686 GNU/Linux
$ ./Build --without-xetex --without-xdvipdfmx

[...]

$ ls inst/bin/i686-pc-linux-gnu/ | wc -l
264


Actually I installed Slackware in 2000.  The kernel release is
probably less important than the libc version but I'm using a 7-year
old version of libc on that machine.

I cannot provide binaries for XeTeX and dvipdfmx because my libc is
too old and I don't get all the required libraries installed.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From j+tex-live at 2007.salmi.ch  Fri Jun 15 10:45:39 2007
From: j+tex-live at 2007.salmi.ch (Jukka Salmi)
Date: Fri, 15 Jun 2007 10:45:39 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <200706141754.l5EHsPF14076@f7.net>
References: <20070614094341.GA14717@moray.salmi.ch>
	<200706141754.l5EHsPF14076@f7.net>
Message-ID: <20070615084539.GA25063@moray.salmi.ch>

Hi,

Karl Berry --> tex-live (2007-06-14 12:54:25 -0500):
>     ...and branch2007/Build contains exactly what the source tarball from
>     the iso image contains, isn't it? 
> 
> Yes.
> 
>     /b/tmp/jukka/texlive/2007/bin/fmtutil:
>     /b/tmp/jukka/texlive/texmf/texconfig/tcfmgr: not found 

This problem disappeared after moving the binaries from `bin/' to
`bin/i386-netbsd/' as Reinhard Kotucha suggested.


> I think the tcfmgr script is missing because it is part of the
> bin-texconfig package, and you did not install any binaries.
> I'm not sure what else might be in the same boat.
> 
> So, let me make this new suggestion (sorry): do the install-tl.sh again,
> but this time use the b option and go ahead and install i386-linux.
> After the install, ignore the bin/i386-linux/ dir and copy in your
> netbsd binaries as before.
> 
> That way the "binaries" that are actually part of the texmf tree, like
> tcfmgr, will get installed.  It would seem I should rearrange the
> dependencies somehow, although the right thing is not immediately
> apparent to me.

OK, I installed TL as you told (selecting i386-linux binaries) and
then compared (diff -r) the two installations. Except for the
`bin/i386-linux/' directory and some `bin-*.i386-linux' files in
`texmf/lists/' both installations were identical.

After copying over the NetBSD binaries I set $PATH accordingly and ran
texconfig:

$ PATH=/b/tmp/jukka/texlive/2007.bin/bin/i386-netbsd:$PATH
$ texconfig init
tcfmgr: config file `tcfmgr.map' (usually in $TEXMFMAIN/texconfig) not found.
fmtutil: config file `fmtutil.cnf' not found.

Hmm, but these files are there:

$ cd /b/tmp/jukka/texlive/2007.bin
$ find . -name tcfmgr.map -o -name fmtutil.cnf
./texmf-var/web2c/fmtutil.cnf
./texmf/web2c/fmtutil.cnf
./texmf/texconfig/tcfmgr.map


> One other hint: If you have any TeX-related environment variables set,
> unset them.

I don't think I have...


BTW: while installing TL from the `live' distribution I see the
following error:

$ sh install-tl.sh
[...]
Enter command: i
Preparing destination directories... done preparing.
test: 1: unexpected operator
Preparing list of files to be installed...
[...]

$ sh -x install-tl.sh
[...]
+ test -z 
+ echo done preparing.
done preparing.
+ test = 1
test: 1: unexpected operator
+ make_local_skeleton
[...]

I don't see this error when installing from the `inst' distribution.
However, I compared installations from `inst' and `live' distributions
and they are identical, so it seems not to be a critical error.


> By the way, would you be interested in supplying netbsd binaries in the
> next release?

Sure, I could do this. But IMHO NetBSD users would appreciate it more
if there was a [1]pkgsrc package available to build TL. Currently only
teTeX can be built using pkgsrc. If I find out how to get TL working
on my NetBSD box I might try to create a TL pkgsrc package.


Regards, Jukka

[1] http://www.netbsd.org/docs/software/packages.html

-- 
bashian roulette:
$ ((RANDOM%6)) || rm -rf ~

From j+tex-live at 2007.salmi.ch  Fri Jun 15 10:51:12 2007
From: j+tex-live at 2007.salmi.ch (Jukka Salmi)
Date: Fri, 15 Jun 2007 10:51:12 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <18033.50153.498681.972634@zarniwoop.ms25.local>
References: <20070613112028.GA6099@moray.salmi.ch>
	<18032.17613.483685.844363@zarniwoop.ms25.local>
	<20070614094341.GA14717@moray.salmi.ch>
	<18033.50153.498681.972634@zarniwoop.ms25.local>
Message-ID: <20070615085112.GB25063@moray.salmi.ch>

Hi,

Reinhard Kotucha --> tex-live (2007-06-15 00:40:41 +0200):
[...]
> Put the binaries into
> 
>   /b/tmp/jukka/texlive/2007/bin/i386-netbsd
> 
> instead of 
> 
>   /b/tmp/jukka/texlive/2007/bin
> 
> This is important.  TeXLive depends on the directory structure.

Indeed, this works (see my reply to Karl Berry). Thanks!


> The man and info files are in texmf/doc.  The install script issues a
> message at the end of the installation process about how to set PATH,
> MANPATH and INFOPATH.  The include files are not installed, don't worry.

Thanks.

BTW: bbox.1 and ps2eps.1 seem to be missing. While building TL they
were placed to `inst/share/man/'; all other man pages were put to
`inst/man/'...


Regards, Jukka

-- 
bashian roulette:
$ ((RANDOM%6)) || rm -rf ~

From danielstefanmader at web.de  Fri Jun 15 11:56:03 2007
From: danielstefanmader at web.de (Daniel Mader)
Date: Fri, 15 Jun 2007 11:56:03 +0200
Subject: [tex-live] symlink bug in install-tl.sh?
Message-ID: <200706151156.03133.danielstefanmader@web.de>

Hello,

the current installation script for TeXLive 2007 seems to have a bug regarding 
the request to create symlinks for bin, man and info on i386 32bit GNU/Linux:

On SLES 10, the man-directory is not /usr/man but /usr/share/man, and when the 
user accepts the default value without checking, no link is created at all 
during the installation and no error message or warning about this is 
displayed after.

Or did I miss something?!

Very best regards,
Daniel Mader
-- 
Universit?t Freiburg
Institut f?r Mikrosystemtechnik (IMTEK)
Lehrstuhl f?r Mikrooptik
Georges-K?hler-Allee 102
79110 Freiburg i.Brsg.

From ghibo at mandriva.com  Fri Jun 15 17:06:50 2007
From: ghibo at mandriva.com (=?ISO-8859-1?Q?Giuseppe_Ghib=F2?=)
Date: Fri, 15 Jun 2007 17:06:50 +0200
Subject: [tex-live] linux 2.4 binaries
In-Reply-To: <159-SnapperMsgD65F34B6C2978843@[10.8.65.224]>
References: <200706142200.l5EM0B820859@f7.net>
	<159-SnapperMsgD65F34B6C2978843@[10.8.65.224]>
Message-ID: <4672AB0A.6060607@mandriva.com>

Norbert Preining ha scritto:

> Hi Karl,
> 
> no problem. In case I just boot one of my machines with a 2.4 kernel and compile in a debian etch chroot. So this is definitely not a problem.
> 
> Bye
> 
> Norbert
> 


If someone needs to build something on an obsolete machine, kernel, glibc, why 
just don't take a virtualizer and install there a distribution of several year
ago (with kernel 2.4, or even 2.2)? There were archives on the net containing 
ISOs of old linux distributions.

Just take one of the virtual machine around, such as:

- vmware player, proprietary but at no charge 
(http://www.vmware.com/download/player/)

- vmware server, (http://www.vmware.com/download/server/)

- virtualbox (http://www.virtualbox.org/), free GPL.

- qemu+kqemu (http://fabrice.bellard.free.fr/qemu/), free GPL.

Those can easily reach the performance of the native one. Also the
filedisk created can be easily exchanged between developers.

Bye
Giuseppe.


From vext01 at gmail.com  Fri Jun 15 19:35:43 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Fri, 15 Jun 2007 18:35:43 +0100
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <20070615084539.GA25063@moray.salmi.ch>
References: <20070614094341.GA14717@moray.salmi.ch>
	<200706141754.l5EHsPF14076@f7.net>
	<20070615084539.GA25063@moray.salmi.ch>
Message-ID: <a6e8c1d0706151035m3bc3cb5fk3aed6404bdf6242c@mail.gmail.com>

On 15/06/07, Jukka Salmi <j+tex-live at 2007.salmi.ch> wrote:
> > By the way, would you be interested in supplying netbsd binaries in the
> > next release?
>
> Sure, I could do this. But IMHO NetBSD users would appreciate it more
> if there was a [1]pkgsrc package available to build TL. Currently only
> teTeX can be built using pkgsrc. If I find out how to get TL working
> on my NetBSD box I might try to create a TL pkgsrc package.

I have already started documenting the OpenBSD port (not yet in tree),
and when finished I will be presenting the docs to NetBSD and FreeBSD
communities in the hope that they might find it useful.

-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From poti at potis.org  Fri Jun 15 19:13:24 2007
From: poti at potis.org (poti at potis.org)
Date: Fri, 15 Jun 2007 13:13:24 -0400
Subject: [tex-live] Tech Live (was Portable TeX web page)
In-Reply-To: <20070410061308.GA31132@mail.potis.org>
References: <20070408213722.GA15245@molly>
	<20070410061308.GA31132@mail.potis.org>
Message-ID: <20070615171324.GD419@mail.potis.org>

On 02:13 Tue 10 Apr     , poti at potis.org wrote:
> 
> On 23:37 Sun 08 Apr     , Siep Kroonenberg wrote:
> > http://tex.aanhet.net/portable/
> > 
> > Scripts and notes for portable TeX Live and portable MikTeX
> >
> Great to see your site Siep! 
> I have posted my emacs-specific scripts at:
> http://potis.org/~poti/software/livedvd
> 
> I just finished testing on Windows NT with the file
> texmf-doc/doc/english/guide-to-latex/demodoc.tex
> after commenting out \usepackage{palatino} and it seems
> to work. SumatraPDF works great as the pdf browser, thanks 
> for the tip. I do not know if the dvi solution is acceptable,
> though I think what I have also works. 
> 
> I believe all works on Linux and OSX too, though I am still
> testing as of this mail. 
>
I thought I should update that the Tex Live component of my project
has been working for some time now. The concept in general also works: 
attach your favorite portable media to a lab computer, and your work
environment is there. If you want to install on Windows, copy the contents 
to your hard drive, create an Emacs shortcut, and after a click, you can 
almost forget you are using Windows. I had the other programs working when 
a few people asked about Matlab, and I started to look into Octave. 

On the Octave maintainer's list it seems a portable Octave may work out
so I can add that to the project, in which case the name 'Tech Live' 
suggests itself for what I was calling the 'Stat Live' DVD. 

I may think better of this later, or upon correction here, but at the moment 
it seems very catchy and appropriate. 

-Poti Giannakouros


From reinhard.kotucha at web.de  Sat Jun 16 01:24:04 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 16 Jun 2007 01:24:04 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <20070615084539.GA25063@moray.salmi.ch>
References: <20070614094341.GA14717@moray.salmi.ch>
	<200706141754.l5EHsPF14076@f7.net>
	<20070615084539.GA25063@moray.salmi.ch>
Message-ID: <18035.8084.67076.913679@zarniwoop.ms25.local>

Jukka Salmi writes:

 > $ PATH=/b/tmp/jukka/texlive/2007.bin/bin/i386-netbsd:$PATH
 > $ texconfig init
 > tcfmgr: config file `tcfmgr.map' (usually in $TEXMFMAIN/texconfig) not found.
 > fmtutil: config file `fmtutil.cnf' not found.
 > 
 > Hmm, but these files are there:
 > 
 > $ cd /b/tmp/jukka/texlive/2007.bin
 > $ find . -name tcfmgr.map -o -name fmtutil.cnf
 > ./texmf-var/web2c/fmtutil.cnf
 > ./texmf/web2c/fmtutil.cnf
 > ./texmf/texconfig/tcfmgr.map

I'm clueless.  Though I don't think that you have to recreate the ls-R
databases, it doesn't hurt to run texhash.

If nobody else has a better idea I fear that you have to find out
where texconfig looks for files.  You can use strace if it is
available for your system.  texconfig uses kpsewhich in order to
determine the search paths.  You could try to run texconfig or
kpsewhich with some environment variables set for debugging as
described in section 2.6.3 of texmf/doc/info/kpathsea.info .

 > > By the way, would you be interested in supplying netbsd binaries in the
 > > next release?
 > 
 > Sure, I could do this. But IMHO NetBSD users would appreciate it more
 > if there was a [1]pkgsrc package available to build TL.

That's true.  But there are (at least) three reasons at least to
include your binaries to TeXLive:

 1. TL-2007 provides a lot of new stuff, for instance XeTeX, TikZ/pgf,
    PdfTeX had been improved significantly...  Most UNIX distributions
    still provide teTeX which is quite old.  In TL-2008 we will have
    LuaTeX but I doubt that when TL-2008 will be released, many UNIX
    distributions will provide TeXLive at all.

 2. Since TeXLive provides a live system, it would be nice to support
    as many platforms as possible.

 3. I have the impression that you are quite familiar with UNIX.  But
    modern TeX systems are extremely complex so that even you have
    problems.  It would be nice if KDE or Gnome users who never used a
    command-line interface can simply insert the DVD and run the
    installer. 

Your binaries are welcome!

 > Currently only teTeX can be built using pkgsrc. If I find out how
 > to get TL working on my NetBSD box I might try to create a TL
 > pkgsrc package.

That would be nice, but be aware that TeXLive is huge.  If netbsd is
distributed on CDs/DVDs this might be a problem.  Maybe you can use
scheme-tetex:  run the installer and press "s".  scheme-tetex had been
provided by Werner Fink (SuSE).

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From reinhard.kotucha at web.de  Sat Jun 16 01:41:36 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 16 Jun 2007 01:41:36 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <20070615085112.GB25063@moray.salmi.ch>
References: <20070613112028.GA6099@moray.salmi.ch>
	<18032.17613.483685.844363@zarniwoop.ms25.local>
	<20070614094341.GA14717@moray.salmi.ch>
	<18033.50153.498681.972634@zarniwoop.ms25.local>
	<20070615085112.GB25063@moray.salmi.ch>
Message-ID: <18035.9136.90123.767408@zarniwoop.ms25.local>

Jukka Salmi writes:

 > BTW: bbox.1 and ps2eps.1 seem to be missing. While building TL they
 > were placed to `inst/share/man/'; all other man pages were put to
 > `inst/man/'...

Thanks for the hint.  I've put it on my TODO list.  It is not easy to
write a script which copies files from inst/ to Master/ but I can do
it manually unless we find a better solution.

Regards,
  Reinhard 

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From karl at freefriends.org  Sat Jun 16 01:51:57 2007
From: karl at freefriends.org (Karl Berry)
Date: Fri, 15 Jun 2007 18:51:57 -0500
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <18035.9136.90123.767408@zarniwoop.ms25.local>
Message-ID: <200706152351.l5FNpvQ09092@f7.net>

    Thanks for the hint.  I've put it on my TODO list.  It is not easy to
    write a script which copies files from inst/ to Master/ 

I don't try to do that, but I have a script which compares inst and
Master/texmf, sort of.  (I think I may have sent it to you once,
Reinhard.)  Then I make adjustments by hand.  Someday there will be a
better way (or not).

    but I can do it manually unless we find a better solution.

I believe Jukka is reporting a problem with the result of the Build into
inst, not the contents of the Master tree.  In fact, I don't see bbox.1
and ps2eps.1 in the Master tree at all -- a bug in itself.  Looking at
ps2eps/Makefile.in, I don't see an obvious reason for there to be a
difference in ps2eps and everything else.  Maybe the variable not
getting passed down from the upper make?


From karl at freefriends.org  Sat Jun 16 02:06:21 2007
From: karl at freefriends.org (Karl Berry)
Date: Fri, 15 Jun 2007 19:06:21 -0500
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <20070615084539.GA25063@moray.salmi.ch>
Message-ID: <200706160006.l5G06Lk12243@f7.net>

    Except for the `bin/i386-linux/' directory and some
    `bin-*.i386-linux' files in `texmf/lists/' both installations were
    identical.

Interesting.  Sorry for the wrong suggestion.

    Hmm, but these files are there:

Just to follow up on Reinhard's mail, does 
kpsewhich -var-value=TEXMFMAIN report the right directory?

I suspect the fmtutil.cnf error is due to the tcfmgr.map error.

    Preparing destination directories... done preparing.
    test: 1: unexpected operator

I think this change to line 416 (or so) of common.sh will fix it:
-  if test $all_systems_ns = 1; then
+  if test "$all_systems_ns" = 1; then

I think Reinhard covered the rest ...

Best,
karl

From vext01 at gmail.com  Sat Jun 16 12:34:40 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Sat, 16 Jun 2007 11:34:40 +0100
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
Message-ID: <a6e8c1d0706160334i24d0a4aex3eaf88056875fb41@mail.gmail.com>

Just a note:

This error does not happen on i386.

-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From vext01 at gmail.com  Sat Jun 16 12:30:26 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Sat, 16 Jun 2007 11:30:26 +0100
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
Message-ID: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>

Hi Guys,

Just when I thought I had this port finished, this has cropped up:

During fmtutil-sys --all:

===========================================
Local configuration file hyphen.cfg used
===========================================
(/usr/local/share/texmf-dist/tex/generic/babel/hyphen.cfg
(/usr/local/share/texmf/tex/generic/hyphen/hyphen.tex)
(/usr/local/share/texmf/tex/generic/hyphen/ushyphmax.tex)
(/usr/local/share/texmf/tex/generic/hyphen/dumyhyph.tex)
(/usr/local/share/texmf/tex/generic/hyphen/zerohyph.tex)
(/usr/local/share/texmf/tex/generic/hyphen/zerohyph.tex)
(/usr/local/share/texmf-dist/tex/generic/xu-hyphen/xu-bahyph.tex
(/usr/local/share/texmf/tex/generic/hyphen/bahyph.tex))
(/usr/local/share/texmf-dist/tex/generic/xu-hyphen/xu-bghyphen.tex
(/usr/local/share/texmf-dist/tex/generic/bghyphen/bghyphsi.texBus
error (core dumped)
Error: `xetex -ini  -jobname=xelatex -progname=xelatex -etex xelatex.ini' failed

Wha! Thats a bus error.

Can you suggest anything before I turn on debugging symbols and gdb
it. I was hoping not to get this low level whilst porting.

-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From vext01 at gmail.com  Sat Jun 16 12:42:58 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Sat, 16 Jun 2007 11:42:58 +0100
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <a6e8c1d0706160334i24d0a4aex3eaf88056875fb41@mail.gmail.com>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
	<a6e8c1d0706160334i24d0a4aex3eaf88056875fb41@mail.gmail.com>
Message-ID: <a6e8c1d0706160342i51c7d30m565fa0359e0bef7e@mail.gmail.com>

And here is the relevent(?) part of a ktrace of the failing fmtutil-sys:

[.. .SNIP...]
 3549 sh       CALL  stat(0x45d4a510,0xfffffffffffbd8f0)
  3549 sh       NAMI  "/home/edd/bin/mkdir"
  3549 sh       RET   stat -1 errno 2 No such file or directory
  3549 sh       CALL  stat(0x45d4a510,0xfffffffffffbd8f0)
  3549 sh       NAMI  "/bin/mkdir"
  3549 sh       RET   stat 0
  3549 sh       CALL  access(0x45d4a510,0x1)
  3549 sh       NAMI  "/bin/mkdir"
  3549 sh       RET   access 0
  3549 sh       CALL  sigprocmask(0x1,0x80000)
  3549 sh       RET   sigprocmask 0
  3549 sh       CALL  fork()
  3549 sh       RET   fork 9096/0x2388
  3549 sh       CALL  sigsuspend(0)
  3549 sh       PSIG  SIGCHLD caught handler=0x129840 mask=0x80000
  3549 sh       RET   sigsuspend -1 errno 4 Interrupted system call
  3549 sh       CALL  getrusage(0xffffffffffffffff,0xfffffffffffbd4f0)
  3549 sh       RET   getrusage 0
  3549 sh       CALL  wait4(0xffffffffffffffff,0xfffffffffffbd45c,0x3,0)
  3549 sh       RET   wait4 9096/0x2388
  3549 sh       CALL  getrusage(0xffffffffffffffff,0xfffffffffffbd460)
  3549 sh       RET   getrusage 0
  3549 sh       CALL  wait4(0xffffffffffffffff,0xfffffffffffbd45c,0x3,0)
  3549 sh       RET   wait4 -1 errno 10 No child processes
  3549 sh       CALL  sigreturn(0xfffffffffffbd8d0)
  3549 sh       RET   sigreturn JUSTRETURN
  3549 sh       CALL  sigprocmask(0x3,0)
  3549 sh       RET   sigprocmask 524288/0x80000
  3549 sh       CALL  stat(0x4a82e9d0,0xfffffffffffbd490)
  3549 sh       NAMI  "xelatex.fmt"
  3549 sh       RET   stat -1 errno 2 No such file or directory
  3549 sh       CALL  fcntl(0x2,0x3,0)
  3549 sh       RET   fcntl 6
  3549 sh       CALL  fcntl(0x1,0,0xa)
  3549 sh       RET   fcntl 11/0xb
  3549 sh       CALL  fcntl(0xb,0x2,0x1)
  3549 sh       RET   fcntl 0
  3549 sh       CALL  dup2(0x2,0x1)
  3549 sh       RET   dup2 1
  3549 sh       CALL  write(0x1,0x45d4ac10,0x51)
  3549 sh       GIO   fd 1 wrote 81 bytes
       "Error: `xetex -ini  -jobname=xelatex -progname=xelatex -etex
xelatex.ini' failed
       "
[...SNIP...]

The upper part of the trace looks like the shell traversing PATH for
mkdir, then is it the stat causing the bus error? It could just be
checking if it needs to regenerate the fmt atall?

-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From martin at oneiros.de  Sat Jun 16 12:52:10 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sat, 16 Jun 2007 12:52:10 +0200
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
Message-ID: <68c491a60706160352t7db75d6dm9a0ca809d7f271a1@mail.gmail.com>

2007/6/16, Edd Barrett <vext01 at gmail.com>:
> Can you suggest anything before I turn on debugging symbols and gdb
> it. I was hoping not to get this low level whilst porting.

Can you try with the sparc binary from TL2007?

Best
   Martin

From vext01 at gmail.com  Sat Jun 16 13:22:00 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Sat, 16 Jun 2007 12:22:00 +0100
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <68c491a60706160352t7db75d6dm9a0ca809d7f271a1@mail.gmail.com>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
	<68c491a60706160352t7db75d6dm9a0ca809d7f271a1@mail.gmail.com>
Message-ID: <a6e8c1d0706160422s46042b5dtd9b93eb3452d809a@mail.gmail.com>

hi,

On 16/06/07, Martin Schr?der <martin at oneiros.de> wrote:
> 2007/6/16, Edd Barrett <vext01 at gmail.com>:
> > Can you suggest anything before I turn on debugging symbols and gdb
> > it. I was hoping not to get this low level whilst porting.
>
> Can you try with the sparc binary from TL2007?

TL does not contain sparc64 binaries for OpenBSD :P

-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From martin at oneiros.de  Sat Jun 16 13:27:45 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sat, 16 Jun 2007 13:27:45 +0200
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <a6e8c1d0706160422s46042b5dtd9b93eb3452d809a@mail.gmail.com>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
	<68c491a60706160352t7db75d6dm9a0ca809d7f271a1@mail.gmail.com>
	<a6e8c1d0706160422s46042b5dtd9b93eb3452d809a@mail.gmail.com>
Message-ID: <68c491a60706160427q4d880bcetd2f961af599531b9@mail.gmail.com>

2007/6/16, Edd Barrett <vext01 at gmail.com>:
> On 16/06/07, Martin Schr?der <martin at oneiros.de> wrote:
> > Can you try with the sparc binary from TL2007?
>
> TL does not contain sparc64 binaries for OpenBSD :P

No, but sparc(32) should run, shouldn't it? Just try the xetex binary.

Best
   Martin

From jonathan_kew at sil.org  Sat Jun 16 16:14:25 2007
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Sat, 16 Jun 2007 07:14:25 -0700
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
Message-ID: <40B9B15F-D567-4096-8D03-96BAA162129E@sil.org>

On 16 Jun 2007, at 3:30 am, Edd Barrett wrote:

> Hi Guys,
>
> Just when I thought I had this port finished, this has cropped up:
>
> During fmtutil-sys --all:
>
> ===========================================
> Local configuration file hyphen.cfg used
> ===========================================
> (/usr/local/share/texmf-dist/tex/generic/babel/hyphen.cfg
> (/usr/local/share/texmf/tex/generic/hyphen/hyphen.tex)
> (/usr/local/share/texmf/tex/generic/hyphen/ushyphmax.tex)
> (/usr/local/share/texmf/tex/generic/hyphen/dumyhyph.tex)
> (/usr/local/share/texmf/tex/generic/hyphen/zerohyph.tex)
> (/usr/local/share/texmf/tex/generic/hyphen/zerohyph.tex)
> (/usr/local/share/texmf-dist/tex/generic/xu-hyphen/xu-bahyph.tex
> (/usr/local/share/texmf/tex/generic/hyphen/bahyph.tex))
> (/usr/local/share/texmf-dist/tex/generic/xu-hyphen/xu-bghyphen.tex
> (/usr/local/share/texmf-dist/tex/generic/bghyphen/bghyphsi.texBus
> error (core dumped)
> Error: `xetex -ini  -jobname=xelatex -progname=xelatex -etex  
> xelatex.ini' failed
>
> Wha! Thats a bus error.
>
> Can you suggest anything before I turn on debugging symbols and gdb
> it. I was hoping not to get this low level whilst porting.

Sorry; I think you're seeing a xetex bug that is liable to show up on  
64-bit big-endian architectures. It was reported by Werner Fink (see  
<http://tug.org/pipermail/tex-live/2007-May/013573.html>). Note,  
however, that the patch suggested there is not fully correct; it may  
prevent the immediate crash but will not function properly in actual  
use.

The underlying problem has been fixed in the xetex sources on  
scripts.sil.org (see <http://scripts.sil.org/svn-view/xetex? 
rev=468&view=rev>), but this applies to the current development  
version, not the release currently in TeX Live. When the next release  
of xetex happens, this will of course be committed to TL as well, but  
in the meantime it might be possible to develop a patch based on  
these changes.

Alternatively, is it possible to build a 32-bit binary as an interim  
workaround?

JK


From gnwiii at gmail.com  Sat Jun 16 17:33:12 2007
From: gnwiii at gmail.com (George N. White III)
Date: Sat, 16 Jun 2007 12:33:12 -0300
Subject: [tex-live] TL2007 epstopdf: Script interpreter is not found in
	PATH
In-Reply-To: <8719b6240706140108x545590afw942285a0da1d94a6@mail.gmail.com>
References: <BAY143-W18CA0B0BAA65347CA6B1F0F61F0@phx.gbl>
	<8719b6240706140108x545590afw942285a0da1d94a6@mail.gmail.com>
Message-ID: <22af238a0706160833q5df857d5ud5e2cd2a2d01dfbf@mail.gmail.com>

On 6/14/07, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:

> 2007/6/14, Lianqing Yu <lianqing.yu at hotmail.com>:
> >
> >  Thanks. But how to solve this problem?
> >
> I do not have TL in Windows so I cannot give you step-by-step
> instructions but there is certainly some maintenance menu which allows
> you to install missing components, e.g. perl and ghostscript.

Or just install Active State Perl and a current ghostscript independently of
TL.  You may have to add a few perl modules using the ASP tools -- I seem
to recall that along with perl.exe comes some perl library stuff (maybe
needed only for texdoctk?).

-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From vext01 at gmail.com  Sun Jun 17 02:14:21 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Sun, 17 Jun 2007 01:14:21 +0100
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <40B9B15F-D567-4096-8D03-96BAA162129E@sil.org>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
	<40B9B15F-D567-4096-8D03-96BAA162129E@sil.org>
Message-ID: <a6e8c1d0706161714h5534a99dm2b0dfdb740c8b796@mail.gmail.com>

On 16/06/07, Jonathan Kew <jonathan_kew at sil.org> wrote:
> Sorry; I think you're seeing a xetex bug that is liable to show up on
> 64-bit big-endian architectures. It was reported by Werner Fink (see
> <http://tug.org/pipermail/tex-live/2007-May/013573.html>). Note,
> however, that the patch suggested there is not fully correct; it may
> prevent the immediate crash but will not function properly in actual
> use.
>
> The underlying problem has been fixed in the xetex sources on
> scripts.sil.org (see <http://scripts.sil.org/svn-view/xetex?
> rev=468&view=rev>), but this applies to the current development
> version, not the release currently in TeX Live. When the next release
> of xetex happens, this will of course be committed to TL as well, but
> in the meantime it might be possible to develop a patch based on
> these changes.
>
> Alternatively, is it possible to build a 32-bit binary as an interim
> workaround?


I would rather a patch as Im not sure how compatible sparc/sparc64
binaries are on OpenBSD (yeh sure on solaris!).

Do you have a patch?

Many thanks for your help. I would have spent mant hours tryng to debug this.

-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From jonathan_kew at sil.org  Sun Jun 17 08:08:44 2007
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Sat, 16 Jun 2007 23:08:44 -0700
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <a6e8c1d0706161714h5534a99dm2b0dfdb740c8b796@mail.gmail.com>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
	<40B9B15F-D567-4096-8D03-96BAA162129E@sil.org>
	<a6e8c1d0706161714h5534a99dm2b0dfdb740c8b796@mail.gmail.com>
Message-ID: <8DFFB674-3598-419F-88F6-E8CD94C4B2A4@sil.org>

On 16 Jun 2007, at 5:14 pm, Edd Barrett wrote:

> On 16/06/07, Jonathan Kew <jonathan_kew at sil.org> wrote:
>> Sorry; I think you're seeing a xetex bug that is liable to show up on
>> 64-bit big-endian architectures. It was reported by Werner Fink (see
>> <http://tug.org/pipermail/tex-live/2007-May/013573.html>). Note,
>> however, that the patch suggested there is not fully correct; it may
>> prevent the immediate crash but will not function properly in actual
>> use.
>>
>> The underlying problem has been fixed in the xetex sources on
>> scripts.sil.org (see <http://scripts.sil.org/svn-view/xetex?
>> rev=468&view=rev>), but this applies to the current development
>> version, not the release currently in TeX Live. When the next release
>> of xetex happens, this will of course be committed to TL as well, but
>> in the meantime it might be possible to develop a patch based on
>> these changes.
>>
>> Alternatively, is it possible to build a 32-bit binary as an interim
>> workaround?
>
>
> I would rather a patch as Im not sure how compatible sparc/sparc64
> binaries are on OpenBSD (yeh sure on solaris!).
>
> Do you have a patch?

Not at the moment, but I'll see if I can generate one by back-porting  
the fix for this (and a couple of other bugs) from the 0.997-dev code  
to the 0.996 source in TL2007. It won't happen for a few days,  
though, at least until I get back to the office from current travels.  
Feel free to ping me in a week if nothing has happened by then.

JK


From mariano.suarezalvarez at gmail.com  Sun Jun 17 01:41:49 2007
From: mariano.suarezalvarez at gmail.com (=?UTF-8?Q?Mariano_Su=C3=A1rez-Alvarez?=)
Date: Sat, 16 Jun 2007 20:41:49 -0300
Subject: [tex-live] Updating and maintaining an installation
Message-ID: <a50d3ec30706161641n745e9f2fw9a61009db0307900@mail.gmail.com>

Hi all,

I'm a recent TeXLive convert (teTeX, though, will always have a
special place in my heart! ;-) ) who, after googling for a bit,  has
not been able to find out how to update within Linux what I have
installed (that is, whatever came in the ISO image) to more recent
versions of packages, or, really, even if that is possible at
all---short of downloading packages `by hand' from CTAN and
overwriting old versions. Any pointers?

Also, reading through the documentation, it appears that there is some
GUI maintenance tool for windows but I see no mention of such a thing
for unixy environments. I think I could spend the time needed to come
up with a such a thing, if indeed it does not yet exist. So: is there
such a tool? If not: is the way the windows app works documented
somewhere, for me to try to clone that?

Cheers,

-- m


-- 
Mariano Su?rez-Alvarez
http://mate.dm.uba.ar/~aldoc9
http://www.gnome.org/~mariano

From reinhard.kotucha at web.de  Sun Jun 17 12:11:20 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sun, 17 Jun 2007 12:11:20 +0200
Subject: [tex-live] Updating and maintaining an installation
In-Reply-To: <a50d3ec30706161641n745e9f2fw9a61009db0307900@mail.gmail.com>
References: <a50d3ec30706161641n745e9f2fw9a61009db0307900@mail.gmail.com>
Message-ID: <18037.2248.357626.385191@zarniwoop.ms25.local>

Mariano Su?rez-Alvarez writes:
 > Hi all,
 > 
 > I'm a recent TeXLive convert (teTeX, though, will always have a
 > special place in my heart! ;-) ) who, after googling for a bit,  has
 > not been able to find out how to update within Linux what I have
 > installed (that is, whatever came in the ISO image) to more recent
 > versions of packages, or, really, even if that is possible at
 > all---short of downloading packages `by hand' from CTAN and
 > overwriting old versions. Any pointers?
 > 
 > Also, reading through the documentation, it appears that there is some
 > GUI maintenance tool for windows but I see no mention of such a thing
 > for unixy environments. I think I could spend the time needed to come
 > up with a such a thing, if indeed it does not yet exist. So: is there
 > such a tool? If not: is the way the windows app works documented
 > somewhere, for me to try to clone that?

look into the directory setuptl on the CD/DVD.  There are GUI
installers for a few several UNIX platforms.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From dak at gnu.org  Sun Jun 17 21:58:19 2007
From: dak at gnu.org (David Kastrup)
Date: Sun, 17 Jun 2007 21:58:19 +0200
Subject: [tex-live] Updating and maintaining an installation
In-Reply-To: <a50d3ec30706161641n745e9f2fw9a61009db0307900@mail.gmail.com>
	("Mariano =?iso-8859-1?Q?Su=E1rez-Alvarez=22's?= message of "Sat\,
	16 Jun 2007 20\:41\:49 -0300")
References: <a50d3ec30706161641n745e9f2fw9a61009db0307900@mail.gmail.com>
Message-ID: <854pl6l5es.fsf@lola.goethe.zz>

"Mariano Su?rez-Alvarez" <mariano.suarezalvarez at gmail.com> writes:

> Hi all,
>
> I'm a recent TeXLive convert (teTeX, though, will always have a
> special place in my heart! ;-) )

Well, it has a special place in TeXlive, so that's ok.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From karl at freefriends.org  Sun Jun 17 22:38:15 2007
From: karl at freefriends.org (Karl Berry)
Date: Sun, 17 Jun 2007 15:38:15 -0500
Subject: [tex-live] Updating and maintaining an installation
In-Reply-To: <a50d3ec30706161641n745e9f2fw9a61009db0307900@mail.gmail.com>
Message-ID: <200706172038.l5HKcFP01900@f7.net>

     how to update within Linux what I have installed

Indeed, that is not implemented.  Sorry.  It is a priority.

karl

From lianqing.yu at hotmail.com  Mon Jun 18 02:55:07 2007
From: lianqing.yu at hotmail.com (Lianqing Yu)
Date: Mon, 18 Jun 2007 08:55:07 +0800
Subject: [tex-live] TL2007 epstopdf: Script interpreter is not found in
 PATH
Message-ID: <BAY143-W13FB074B97204CD5826911F6130@phx.gbl>


I uninstall TL first and reinstall it again with perl and ghostscript installed. This time I get another error such like "invalid path "C:\Program". I guess it should be "C:\Program Files\..." but perl cannot deal with space characters in the path. I give up. 
I don't think it is a good idea for TL to require perl and another version of ghostscript to work properly. I've already had ghostscript 8.53 installed and TL installs ghostscript 8.54, wired. 
I try MiKTeX 2.6 today and it works. No perl, ghostscript dependencies. dvipdfm works fine.> Date: Sat, 16 Jun 2007 12:33:12 -0300> From: gnwiii at gmail.com> To: zdenek.wagner at gmail.com> Subject: Re: [tex-live] TL2007 epstopdf: Script interpreter is not found in PATH> CC: lianqing.yu at hotmail.com; tex-live at tug.org> > On 6/14/07, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:> > > 2007/6/14, Lianqing Yu <lianqing.yu at hotmail.com>:> > >> > > Thanks. But how to solve this problem?> > >> > I do not have TL in Windows so I cannot give you step-by-step> > instructions but there is certainly some maintenance menu which allows> > you to install missing components, e.g. perl and ghostscript.> > Or just install Active State Perl and a current ghostscript independently of> TL. You may have to add a few perl modules using the ASP tools -- I seem> to recall that along with perl.exe comes some perl library stuff (maybe> needed only for texdoctk?).> > -- > George N. White III <aa056 at chebucto.ns.ca>> Head of St. Margarets Bay, Nova Scotia
_________________________________________________________________
With Windows Live Hotmail, you can personalize your inbox with your favorite color.
www.windowslive-hotmail.com/learnmore/personalize.html?locale=en-us&ocid=TXT_TAGLM_HMWL_reten_addcolor_0607
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/tex-live/attachments/20070618/9663b58d/attachment.html 

From frank at debian.org  Mon Jun 18 09:25:52 2007
From: frank at debian.org (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Mon, 18 Jun 2007 09:25:52 +0200
Subject: [tex-live] Bug#429257: asks for file Arabicore.sty while
	provide arabicore.sty
In-Reply-To: <200706161734.35911.mazen.neifer@supaero.org> (Mazen NEIFER's
	message of "Sat\, 16 Jun 2007 17\:34\:35 +0200")
References: <200706161734.35911.mazen.neifer@supaero.org>
Message-ID: <87645lvi4f.fsf@riesling.zuerich.kuesterei.ch>

Dear Youssef,

a user of arabi as part of TeX Live in the Debian/GNU Linux distribution
has reported a problem:

Mazen NEIFER <mazen.neifer at supaero.org> wrote:

> File /usr/share/texmf-texlive/tex/latex/arabi/arabic.ldf is asking for latex 
> package named Arabicore.sty while this one is provided as arabicore.sty. This 
> seems to be caused by the original package sources (which was developed for 
> windows latex). 

The same problem also exists in the files on CTAN, and probably shows up
on every system which has a case-sensitive filesystem (i.e. also on Mac
OSX).

What do you suggest?  Should we rename the file to Arabicore.sty with
capital A, or rather change arabic.ldf (and probably other files) and
replace Arabicore with arabicore?

Thank you in advance, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From owner at bugs.debian.org  Mon Jun 18 11:07:03 2007
From: owner at bugs.debian.org (Debian Bug Tracking System)
Date: Mon, 18 Jun 2007 09:07:03 +0000
Subject: [tex-live] Bug#429257: Info received (Bug#429257: asks for
	file	Arabicore.sty while provide arabicore.sty)
References: <87645lvi4f.fsf@riesling.zuerich.kuesterei.ch>
	<200706161734.35911.mazen.neifer@supaero.org>
Message-ID: <handler.429257.B429257.118215141823644.ackinfo@bugs.debian.org>

Thank you for the additional information you have supplied regarding
this problem report.  It has been forwarded to the package maintainer(s)
and to other interested parties to accompany the original report.

Your message has been sent to the package maintainer(s):
 Debian TeX Maintainers <debian-tex-maint at lists.debian.org>

If you wish to continue to submit further information on this problem,
please send it to 429257 at bugs.debian.org, as before.

Please do not reply to the address at the top of this message,
unless you wish to report a problem with the Bug-tracking system.

Debian bug tracking system administrator
(administrator, Debian Bugs database)

From owner at bugs.debian.org  Mon Jun 18 11:07:54 2007
From: owner at bugs.debian.org (Debian Bug Tracking System)
Date: Mon, 18 Jun 2007 09:07:54 +0000
Subject: [tex-live] Bug#429257: marked as forwarded (asks for file
	Arabicore.sty	while provide arabicore.sty)
References: <87645lvi4f.fsf@riesling.zuerich.kuesterei.ch>
	<200706161734.35911.mazen.neifer@supaero.org>
Message-ID: <header.429257.F429257.118215141823636.ackfwdd@bugs.debian.org>

Your message dated Mon, 18 Jun 2007 09:25:52 +0200
with message-id <87645lvi4f.fsf at riesling.zuerich.kuesterei.ch>
has caused the Debian Bug report #429257,
regarding asks for file Arabicore.sty while provide arabicore.sty
to be marked as having been forwarded to the upstream software
author(s) Youssef Jabri <yjabri at ensa.univ-oujda.ac.ma>.

(NB: If you are a system administrator and have no idea what I am
talking about this indicates a serious mail system misconfiguration
somewhere.  Please contact me immediately.)

Debian bug tracking system administrator
(administrator, Debian Bugs database)

-------------- next part --------------
An embedded message was scrubbed...
From: Frank =?iso-8859-1?Q?K=FCster?= <frank at debian.org>
Subject: Re: Bug#429257: asks for file Arabicore.sty while provide
	arabicore.sty
Date: Mon, 18 Jun 2007 09:25:52 +0200
Size: 2916
Url: http://tug.org/pipermail/tex-live/attachments/20070618/f4113648/attachment.mht 

From vext01 at gmail.com  Mon Jun 18 16:40:45 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Mon, 18 Jun 2007 15:40:45 +0100
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <8DFFB674-3598-419F-88F6-E8CD94C4B2A4@sil.org>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
	<40B9B15F-D567-4096-8D03-96BAA162129E@sil.org>
	<a6e8c1d0706161714h5534a99dm2b0dfdb740c8b796@mail.gmail.com>
	<8DFFB674-3598-419F-88F6-E8CD94C4B2A4@sil.org>
Message-ID: <a6e8c1d0706180740s387011e1tc1eac054c865012@mail.gmail.com>

Hi Jonathan,

> > Do you have a patch?
>
> Not at the moment, but I'll see if I can generate one by back-porting
> the fix for this (and a couple of other bugs) from the 0.997-dev code
> to the 0.996 source in TL2007. It won't happen for a few days,
> though, at least until I get back to the office from current travels.
> Feel free to ping me in a week if nothing has happened by then.
>

I would really appreciate that, so I can finally finish the OpenBSD
port off. I'll drop you mail in a week if I dont hear back from you in
the meantime!

Thanks for your help.

-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From j+tex-live at 2007.salmi.ch  Mon Jun 18 17:08:58 2007
From: j+tex-live at 2007.salmi.ch (Jukka Salmi)
Date: Mon, 18 Jun 2007 17:08:58 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <18035.8084.67076.913679@zarniwoop.ms25.local>
References: <20070614094341.GA14717@moray.salmi.ch>
	<200706141754.l5EHsPF14076@f7.net>
	<20070615084539.GA25063@moray.salmi.ch>
	<18035.8084.67076.913679@zarniwoop.ms25.local>
Message-ID: <20070618150858.GA1432@moray.salmi.ch>

Hi,

Reinhard Kotucha --> tex-live (2007-06-16 01:24:04 +0200):
> Jukka Salmi writes:
> 
>  > $ PATH=/b/tmp/jukka/texlive/2007.bin/bin/i386-netbsd:$PATH
>  > $ texconfig init
>  > tcfmgr: config file `tcfmgr.map' (usually in $TEXMFMAIN/texconfig) not found.
>  > fmtutil: config file `fmtutil.cnf' not found.
>  > 
>  > Hmm, but these files are there:
>  > 
>  > $ cd /b/tmp/jukka/texlive/2007.bin
>  > $ find . -name tcfmgr.map -o -name fmtutil.cnf
>  > ./texmf-var/web2c/fmtutil.cnf
>  > ./texmf/web2c/fmtutil.cnf
>  > ./texmf/texconfig/tcfmgr.map
> 
> I'm clueless.  Though I don't think that you have to recreate the ls-R
> databases, it doesn't hurt to run texhash.
> 
> If nobody else has a better idea I fear that you have to find out
> where texconfig looks for files.  You can use strace if it is
> available for your system.  texconfig uses kpsewhich in order to
> determine the search paths.  You could try to run texconfig or
> kpsewhich with some environment variables set for debugging as
> described in section 2.6.3 of texmf/doc/info/kpathsea.info .

Tracing texconfig revealed that kpsewhich searches for tcfmgr.map in
the following directories (in this order):

.
$HOME/.texlive2007/texmf-config/texconfig/
$HOME/.texlive2007/texmf-var/texconfig/
$HOME/texmf/texconfig/

and then gives up, i.e. exits with exit status 1. Hmm, neither
$HOME/.texlive2007/ nor $HOME/texmf/ exist...

At this point I ran texhash as you suggested, and after that `texconfig
init' succeeded! Now I (seem to) have a working TL installation!

Hmm, should texhash have been run by the TL installation routine?

BTW, I ran install-tl.sh as non-root. Could this be the source of the
problems?


>  > Sure, I could do this. But IMHO NetBSD users would appreciate it more
>  > if there was a [1]pkgsrc package available to build TL.
> 
> That's true.  But there are (at least) three reasons at least to
> include your binaries to TeXLive:
> 
>  1. TL-2007 provides a lot of new stuff, for instance XeTeX, TikZ/pgf,
>     PdfTeX had been improved significantly...  Most UNIX distributions
>     still provide teTeX which is quite old.  In TL-2008 we will have
>     LuaTeX but I doubt that when TL-2008 will be released, many UNIX
>     distributions will provide TeXLive at all.
> 
>  2. Since TeXLive provides a live system, it would be nice to support
>     as many platforms as possible.
> 
>  3. I have the impression that you are quite familiar with UNIX.  But
>     modern TeX systems are extremely complex so that even you have
>     problems.  It would be nice if KDE or Gnome users who never used a
>     command-line interface can simply insert the DVD and run the
>     installer. 
> 
> Your binaries are welcome!

OK, convinced ;-) But I could provide binaries for i386 and sparc64
only.


>  > Currently only teTeX can be built using pkgsrc. If I find out how
>  > to get TL working on my NetBSD box I might try to create a TL
>  > pkgsrc package.
> 
> That would be nice, but be aware that TeXLive is huge.  If netbsd is
> distributed on CDs/DVDs this might be a problem.  Maybe you can use
> scheme-tetex:  run the installer and press "s".  scheme-tetex had been
> provided by Werner Fink (SuSE).

Thanks for the hints. Using the tetex scheme when creating a package
seems to be a good idea.


Regards, Jukka

-- 
bashian roulette:
$ ((RANDOM%6)) || rm -rf ~

From j+tex-live at 2007.salmi.ch  Mon Jun 18 17:11:07 2007
From: j+tex-live at 2007.salmi.ch (Jukka Salmi)
Date: Mon, 18 Jun 2007 17:11:07 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <200706160006.l5G06Lk12243@f7.net>
References: <20070615084539.GA25063@moray.salmi.ch>
	<200706160006.l5G06Lk12243@f7.net>
Message-ID: <20070618151106.GB1432@moray.salmi.ch>

Hi,

Karl Berry --> tex-live (2007-06-15 19:06:21 -0500):
[...]
> Just to follow up on Reinhard's mail, does 
> kpsewhich -var-value=TEXMFMAIN report the right directory?
> 
> I suspect the fmtutil.cnf error is due to the tcfmgr.map error.

At least now it does, yes. Running texhash fixed the problem (see my
reply to Reinhard).


>     Preparing destination directories... done preparing.
>     test: 1: unexpected operator
> 
> I think this change to line 416 (or so) of common.sh will fix it:
> -  if test $all_systems_ns = 1; then
> +  if test "$all_systems_ns" = 1; then

This only fights the symptom; i.e. no error message is output anymore,
but install-tl.sh still prints

    <B> binary systems:           out of 15

The attached patch changes this to read "0 out of 15".


Regards, Jukka

-- 
bashian roulette:
$ ((RANDOM%6)) || rm -rf ~
-------------- next part --------------
--- common.sh.orig	2007-02-06 01:37:38.000000000 +0100
+++ common.sh	2007-06-18 14:36:45.000000000 +0200
@@ -224,6 +224,8 @@
     eval this_platform_n=\$p_${this_system}_n
     eval this_platform_fn=\$p_${this_system}_fn
     all_systems_ns=1
+  else
+    all_systems_ns=0
   fi
   setlength all_systems_anz 2
   setlength all_systems_ns 2

From gnwiii at gmail.com  Mon Jun 18 19:13:19 2007
From: gnwiii at gmail.com (George N. White III)
Date: Mon, 18 Jun 2007 14:13:19 -0300
Subject: [tex-live] TL2007 epstopdf: Script interpreter is not found in
	PATH
In-Reply-To: <BAY143-W13FB074B97204CD5826911F6130@phx.gbl>
References: <BAY143-W13FB074B97204CD5826911F6130@phx.gbl>
Message-ID: <22af238a0706181013n3c080e69h8abb8f0a7f244871@mail.gmail.com>

On 6/17/07, Lianqing Yu <lianqing.yu at hotmail.com> wrote:

>  I uninstall TL first and reinstall it again with perl and ghostscript
> installed. This time I get another error such like "invalid path
> "C:\Program". I guess it should be "C:\Program Files\..." but perl cannot
> deal with space characters in the path. I give up.
>  I don't think it is a good idea for TL to require perl and another version
> of ghostscript to work properly. I've already had ghostscript 8.53 installed
> and TL installs ghostscript 8.54, wired.
>  I try MiKTeX 2.6 today and it works. No perl, ghostscript dependencies.
> dvipdfm works fine.

Glad you got it to work, but it is too bad you didn't press on and provide
a bit more information so we can fix TL.  Did you get the error from epstopdf
or from dvipdfm?

MikTeX 2.6 provides "mgs", which is ghostscript 8.54, but I think ConTeXt tools
do require 3rd party versions of perl and ruby.

Perl can deal with spaces, but that takes extra care when writing scripts.
Most TL development is done on linux where people tend to avoid spaces.
Clearly testing on Windows was not adequate.  I try to test TL on Windows
each year, but I have perl and ghostscript installed separately (as
"C:\Perl" and
"C:\gs"), and I didn't take the time to test the versions included
with TL or installs
of perl or gs in "C:\Program files\...".

-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From yjabri at ensa.univ-oujda.ac.ma  Mon Jun 18 16:39:54 2007
From: yjabri at ensa.univ-oujda.ac.ma (Youssef JABRI)
Date: Mon, 18 Jun 2007 14:39:54 +0000
Subject: [tex-live] Bug#429257: asks for file Arabicore.sty while
	provide	arabicore.sty
In-Reply-To: <87645lvi4f.fsf@riesling.zuerich.kuesterei.ch>
References: <200706161734.35911.mazen.neifer@supaero.org>
	<87645lvi4f.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <4676993A.3030209@ensa.univ-oujda.ac.ma>

Frank K?ster wrote:

>Dear Youssef,
>
>a user of arabi as part of TeX Live in the Debian/GNU Linux distribution
>has reported a problem:
>
>Mazen NEIFER <mazen.neifer at supaero.org> wrote:
>
>  
>
>>File /usr/share/texmf-texlive/tex/latex/arabi/arabic.ldf is asking for latex 
>>package named Arabicore.sty while this one is provided as arabicore.sty. This 
>>seems to be caused by the original package sources (which was developed for 
>>windows latex). 
>>    
>>
>
>The same problem also exists in the files on CTAN, and probably shows up
>on every system which has a case-sensitive filesystem (i.e. also on Mac
>OSX).
>
>What do you suggest?  Should we rename the file to Arabicore.sty with
>capital A, or rather change arabic.ldf (and probably other files) and
>replace Arabicore with arabicore?
>
>Thank you in advance, Frank
>  
>
Yes please, keep only the filename with lowercase letters and/or 
eventually change the line of code  in arabic.ldf that calls it.
I should post soon an update to the package with some corrections other 
improvements. I got very busy these  last time.

Thank you very much.

Youssef.

From karl at freefriends.org  Mon Jun 18 20:46:36 2007
From: karl at freefriends.org (Karl Berry)
Date: Mon, 18 Jun 2007 13:46:36 -0500
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <20070618151106.GB1432@moray.salmi.ch>
Message-ID: <200706181846.l5IIka821730@f7.net>

    +  else
    +    all_systems_ns=0

Thanks, I installed it.  

From karl at freefriends.org  Mon Jun 18 20:46:36 2007
From: karl at freefriends.org (Karl Berry)
Date: Mon, 18 Jun 2007 13:46:36 -0500
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <20070618150858.GA1432@moray.salmi.ch>
Message-ID: <200706181846.l5IIkaa21742@f7.net>

    OK, convinced ;-) 

Thanks.  Will be in touch when we start updating the sources.

    Hmm, should texhash have been run by the TL installation routine?

With 0 sets of binaries, there is no way to run anything.
If there are binaries, then texhash is indeed run (twice).
At least that's my experience.

    BTW, I ran install-tl.sh as non-root. Could this be the source of
    the problems?

No, that should be fine.  (It's what I do myself.)

Best,
Karl

From reinhard.kotucha at web.de  Mon Jun 18 22:52:47 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 18 Jun 2007 22:52:47 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <20070618150858.GA1432@moray.salmi.ch>
References: <20070614094341.GA14717@moray.salmi.ch>
	<200706141754.l5EHsPF14076@f7.net>
	<20070615084539.GA25063@moray.salmi.ch>
	<18035.8084.67076.913679@zarniwoop.ms25.local>
	<20070618150858.GA1432@moray.salmi.ch>
Message-ID: <18038.61599.546695.816035@zarniwoop.ms25.local>

Jukka Salmi writes:

 > Tracing texconfig revealed that kpsewhich searches for tcfmgr.map in
 > the following directories (in this order):
 > 
 > .
 > $HOME/.texlive2007/texmf-config/texconfig/
 > $HOME/.texlive2007/texmf-var/texconfig/
 > $HOME/texmf/texconfig/

Does this happen if you run texconfig-sys init ?

 > and then gives up, i.e. exits with exit status 1. Hmm, neither
 > $HOME/.texlive2007/ nor $HOME/texmf/ exist...

They don't exist by default.  $HOME/texmf/ is where you can store your
personal files and the directory $HOME/.texlive2007/ will be created
when it's needed.  The fact that tcfmgr.map is expected in $HOME is
quite strange.

 > At this point I ran texhash as you suggested, and after that `texconfig
 > init' succeeded! Now I (seem to) have a working TL installation!

Great!  

 > Hmm, should texhash have been run by the TL installation routine?

Though texhash is a shell script, it depends on kpsewhich, which is
a binary.  You installed TeXLive before you added the binaries for
your platform.  You already said that you got an error message from
the installer.  The shell script called binaries which didn't exist
for your platform at this time.  I suppose that this was the problem.

 > BTW, I ran install-tl.sh as non-root. Could this be the source of the
 > problems?

No, you don't have to be root.  TeXLive is supposed to work everywhere
and for everybody.  I would complain loudly otherwise, I've made some
bad experiences with stupid system administrators at the university
many years ago and I'll never forget this.

 > > Your binaries are welcome!
 > 
 > OK, convinced ;-) But I could provide binaries for i386 and sparc64
 > only.

At the moment there are no binaries available for NetBSD at all.  I'm
quite amazed that you can even provide binaries for _two_ platforms.

Best Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From j+tex-live at 2007.salmi.ch  Mon Jun 18 23:46:44 2007
From: j+tex-live at 2007.salmi.ch (Jukka Salmi)
Date: Mon, 18 Jun 2007 23:46:44 +0200
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <18038.61599.546695.816035@zarniwoop.ms25.local>
References: <20070614094341.GA14717@moray.salmi.ch>
	<200706141754.l5EHsPF14076@f7.net>
	<20070615084539.GA25063@moray.salmi.ch>
	<18035.8084.67076.913679@zarniwoop.ms25.local>
	<20070618150858.GA1432@moray.salmi.ch>
	<18038.61599.546695.816035@zarniwoop.ms25.local>
Message-ID: <20070618214644.GA21972@moray.salmi.ch>

Reinhard Kotucha --> tex-live (2007-06-18 22:52:47 +0200):
> Jukka Salmi writes:
> 
>  > Tracing texconfig revealed that kpsewhich searches for tcfmgr.map in
>  > the following directories (in this order):
>  > 
>  > .
>  > $HOME/.texlive2007/texmf-config/texconfig/
>  > $HOME/.texlive2007/texmf-var/texconfig/
>  > $HOME/texmf/texconfig/
> 
> Does this happen if you run texconfig-sys init ?

Yes, in exactly the same way.


>  > and then gives up, i.e. exits with exit status 1. Hmm, neither
>  > $HOME/.texlive2007/ nor $HOME/texmf/ exist...
> 
> They don't exist by default.  $HOME/texmf/ is where you can store your
> personal files and the directory $HOME/.texlive2007/ will be created
> when it's needed.  The fact that tcfmgr.map is expected in $HOME is
> quite strange.

Indeed.

BTW, what does the `mf' in `texmf' stand for?


>  > Hmm, should texhash have been run by the TL installation routine?
> 
> Though texhash is a shell script, it depends on kpsewhich, which is
> a binary.  You installed TeXLive before you added the binaries for
> your platform.  You already said that you got an error message from
> the installer.  The shell script called binaries which didn't exist
> for your platform at this time.  I suppose that this was the problem.

This makes sense. (But the installer error was another problem and
fixed in the meantime.)


>  > BTW, I ran install-tl.sh as non-root. Could this be the source of the
>  > problems?
> 
> No, you don't have to be root.  TeXLive is supposed to work everywhere
> and for everybody.

That's what I wanted to hear, thanks ;-)


Regards, Jukka

-- 
bashian roulette:
$ ((RANDOM%6)) || rm -rf ~

From karl at freefriends.org  Mon Jun 18 23:55:41 2007
From: karl at freefriends.org (Karl Berry)
Date: Mon, 18 Jun 2007 16:55:41 -0500
Subject: [tex-live] TeX Live on NetBSD: first steps
In-Reply-To: <20070618214644.GA21972@moray.salmi.ch>
Message-ID: <200706182155.l5ILtfL14147@f7.net>

    BTW, what does the `mf' in `texmf' stand for?

mf = metafont.  Knuth's original digital typography project had two main
fruits, TeX (for typesetting) and Metafont (for typeface design).

From lianqing.yu at hotmail.com  Tue Jun 19 02:24:39 2007
From: lianqing.yu at hotmail.com (Lianqing Yu)
Date: Tue, 19 Jun 2007 08:24:39 +0800
Subject: [tex-live] TL2007 epstopdf: Script interpreter is not found in
 PATH
Message-ID: <BAY143-W4A82E60A32AF26EED65D5F6120@phx.gbl>


Thanks for your info. I got the error from epstopdf. All stuff (TL, gs, perl) are installed under C:\Program Files.> Date: Mon, 18 Jun 2007 14:13:19 -0300> From: gnwiii at gmail.com> To: lianqing.yu at hotmail.com> Subject: Re: [tex-live] TL2007 epstopdf: Script interpreter is not found in PATH> CC: tex-live at tug.org> > On 6/17/07, Lianqing Yu <lianqing.yu at hotmail.com> wrote:> > > I uninstall TL first and reinstall it again with perl and ghostscript> > installed. This time I get another error such like "invalid path> > "C:\Program". I guess it should be "C:\Program Files\..." but perl cannot> > deal with space characters in the path. I give up.> > I don't think it is a good idea for TL to require perl and another version> > of ghostscript to work properly. I've already had ghostscript 8.53 installed> > and TL installs ghostscript 8.54, wired.> > I try MiKTeX 2.6 today and it works. No perl, ghostscript dependencies.> > dvipdfm works fine.> > Glad you got it to work, but it is too bad you didn't press on and provide> a bit more information so we can fix TL. Did you get the error from epstopdf> or from dvipdfm?> > MikTeX 2.6 provides "mgs", which is ghostscript 8.54, but I think ConTeXt tools> do require 3rd party versions of perl and ruby.> > Perl can deal with spaces, but that takes extra care when writing scripts.> Most TL development is done on linux where people tend to avoid spaces.> Clearly testing on Windows was not adequate. I try to test TL on Windows> each year, but I have perl and ghostscript installed separately (as> "C:\Perl" and> "C:\gs"), and I didn't take the time to test the versions included> with TL or installs> of perl or gs in "C:\Program files\...".> > -- > George N. White III <aa056 at chebucto.ns.ca>> Head of St. Margarets Bay, Nova Scotia
_________________________________________________________________
Make every IM count. Download Windows Live Messenger and join the i?m Initiative now. It?s free.?
http://im.live.com/messenger/im/home/?source=TAGWL_June07
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/tex-live/attachments/20070619/7f0832a6/attachment.html 

From frank at kuesterei.ch  Tue Jun 19 13:58:10 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Tue, 19 Jun 2007 13:58:10 +0200
Subject: [tex-live] Bug#429257: asks for file Arabicore.sty while
	provide	arabicore.sty
In-Reply-To: <4676993A.3030209@ensa.univ-oujda.ac.ma> (Youssef JABRI's message
	of "Mon\, 18 Jun 2007 14\:39\:54 +0000")
References: <200706161734.35911.mazen.neifer@supaero.org>
	<87645lvi4f.fsf@riesling.zuerich.kuesterei.ch>
	<4676993A.3030209@ensa.univ-oujda.ac.ma>
Message-ID: <873b0oupf1.fsf@riesling.zuerich.kuesterei.ch>

Hi Youssef,

Youssef JABRI <yjabri at ensa.univ-oujda.ac.ma> wrote:

> Yes please, keep only the filename with lowercase letters and/or
> eventually change the line of code  in arabic.ldf that calls it.
> I should post soon an update to the package with some corrections
> other improvements. I got very busy these  last time.

Okay, we'll move everything to lowercase for TL 2007 in Debian, and TL
2008 can just pull your corrected package from CTAN, correct?

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From yjabri at ensa.univ-oujda.ac.ma  Tue Jun 19 15:02:10 2007
From: yjabri at ensa.univ-oujda.ac.ma (Youssef JABRI)
Date: Tue, 19 Jun 2007 13:02:10 +0000
Subject: [tex-live] Bug#429257: asks for file Arabicore.sty while
 provide arabicore.sty
In-Reply-To: <873b0oupf1.fsf@riesling.zuerich.kuesterei.ch>
References: <200706161734.35911.mazen.neifer@supaero.org>	<87645lvi4f.fsf@riesling.zuerich.kuesterei.ch>	<4676993A.3030209@ensa.univ-oujda.ac.ma>
	<873b0oupf1.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <4677D3D2.3050400@ensa.univ-oujda.ac.ma>

Frank K?ster wrote:

>Hi Youssef,
>
>Youssef JABRI <yjabri at ensa.univ-oujda.ac.ma> wrote:
>
>  
>
>>Yes please, keep only the filename with lowercase letters and/or
>>eventually change the line of code  in arabic.ldf that calls it.
>>I should post soon an update to the package with some corrections
>>other improvements. I got very busy these  last time.
>>    
>>
>
>Okay, we'll move everything to lowercase for TL 2007 in Debian, and TL
>2008 can just pull your corrected package from CTAN, correct?
>
>Regards, Frank
>  
>
Right :)
Thanks.

Youssef

From gnwiii at gmail.com  Tue Jun 19 16:20:29 2007
From: gnwiii at gmail.com (George N. White III)
Date: Tue, 19 Jun 2007 11:20:29 -0300
Subject: [tex-live] TL2007 epstopdf: Script interpreter is not found in
	PATH
In-Reply-To: <BAY143-W4A82E60A32AF26EED65D5F6120@phx.gbl>
References: <BAY143-W4A82E60A32AF26EED65D5F6120@phx.gbl>
Message-ID: <22af238a0706190720t77ceaf6fmbfeefad3eb962fcc@mail.gmail.com>

I installed gs8.57 and ActiveState perl 5.8.8.820 to their respective
directories under C:\Program Files to test epstopdf and dvipdfm.  For
the latter, I had to edit the
configuration file "texmf-var/dvipdfm/config" as follows:

% Distiller config. Uses ghostscript and works on compressed and
% uncompressed files.
%D "zcat -f %i | gs -q -sPAPERSIZE=a0 -sDEVICE=pdfwrite -dCompatibilityLevel=1.2
 -dUseFlateCompression=true -dSAFER -sOutputFile=%o - -c quit"
% Win32 -- no support for compressed files
D "gswin32c -q -dNOPAUSE -sPAPERSIZE=letter -sDEVICE=pdfwrite -dCompatibilityLev
el=1.2 -dUseFlateCompression=true -dSAFER -sOutputFile=%o %i -c quit"

The dvipdfmx.cfg config file also needed editing, but does provide a
Win32 section so
it is just a matter of changing a comment.  All this is a bit much to
expect from an
installer.   Things are much simpler when you only have one platform
to worry about.

On 6/18/07, Lianqing Yu <lianqing.yu at hotmail.com> wrote:
>
>  Thanks for your info. I got the error from epstopdf. All stuff (TL, gs,
> perl) are installed under C:\Program Files.
>
> > Date: Mon, 18 Jun 2007 14:13:19 -0300
> > From: gnwiii at gmail.com
> > To: lianqing.yu at hotmail.com
> > Subject: Re: [tex-live] TL2007 epstopdf: Script interpreter is not found
> in PATH
> > CC: tex-live at tug.org
>
> >
> > On 6/17/07, Lianqing Yu <lianqing.yu at hotmail.com> wrote:
> >
> > > I uninstall TL first and reinstall it again with perl and ghostscript
> > > installed. This time I get another error such like "invalid path
> > > "C:\Program". I guess it should be "C:\Program Files\..." but perl
> cannot
> > > deal with space characters in the path. I give up.
> > > I don't think it is a good idea for TL to require perl and another
> version
> > > of ghostscript to work properly. I've already had ghostscript 8.53
> installed
> > > and TL installs ghostscript 8.54, wired.
> > > I try MiKTeX 2.6 today and it works. No perl, ghostscript dependencies.
> > > dvipdfm works fine.
> >
> > Glad you got it to work, but it is too bad you didn't press on and provide
> > a bit more information so we can fix TL. Did you get the error from
> epstopdf
> > or from dvipdfm?
> >
> > MikTeX 2.6 provides "mgs", which is ghostscript 8.54, but I think ConTeXt
> tools
> > do require 3rd party versions of perl and ruby.
> >
> > Perl can deal with spaces, but that takes extra care when writing scripts.
> > Most TL development is done on linux where people tend to avoid spaces.
> > Clearly testing on Windows was not adequate. I try to test TL on Windows
> > each year, but I have perl and ghostscript installed separately (as
> > "C:\Perl" and
> > "C:\gs"), and I didn't take the time to test the versions included
> > with TL or installs
> > of perl or gs in "C:\Program files\...".
> >
> > --
> > George N. White III <aa056 at chebucto.ns.ca>
> > Head of St. Margarets Bay, Nova Scotia
>
> ________________________________
> Play free games, earn tickets, get cool prizes! Join Live Search Club.
> Join Live Search Club!


-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From kakuto at fsci.fuk.kindai.ac.jp  Tue Jun 19 17:39:42 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Wed, 20 Jun 2007 00:39:42 +0900
Subject: [tex-live] TL2007 epstopdf: Script interpreter is not found
	inPATH
In-Reply-To: Your message of "Tue, 19 Jun 2007 11:20:29 -0300"
References: <22af238a0706190720t77ceaf6fmbfeefad3eb962fcc@mail.gmail.com>
Message-ID: <200706191539.l5JFdhh8026249@jupiter.fsci.fuk.kindai.ac.jp>

> I installed gs8.57 and ActiveState perl 5.8.8.820 to their respective
> directories under C:\Program Files to test epstopdf and dvipdfm.  For
> the latter, I had to edit the
> configuration file "texmf-var/dvipdfm/config" as follows:

[FYI]
dvipdfm.exe for Win32 first tries to read the configuration
file "dvipdfm.cfg".  If failed it tries next "config".

Thanks,
Akira

From j+nbsd at 2007.salmi.ch  Wed Jun 20 12:14:26 2007
From: j+nbsd at 2007.salmi.ch (Jukka Salmi)
Date: Wed, 20 Jun 2007 12:14:26 +0200
Subject: [tex-live] TeX Live on NetBSD
Message-ID: <20070620101425.GA14165@moray.salmi.ch>

Hi,

I recently installed [1]TeX Live on a NetBSD system and wrote down a
short installation [2]howto; just in case somebody finds this useful.


Regards, Jukka

[1] http://www.tug.org/texlive/
[2] http://salmi.ch/~jukka/nbsd/nbsd-tl.txt

-- 
bashian roulette:
$ ((RANDOM%6)) || rm -rf ~

From frank at debian.org  Wed Jun 20 19:12:18 2007
From: frank at debian.org (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Wed, 20 Jun 2007 19:12:18 +0200
Subject: [tex-live] Bug#425085: texlive-doc-en: catalogue entries with
	dangling links
In-Reply-To: <20070518234022.GA1892@alea.gnuu.de> (=?iso-8859-1?Q?J=F6rg?=
	Sommer's message of "Sat\, 19 May 2007 01\:40\:22 +0200")
References: <20070518234022.GA1892@alea.gnuu.de>
Message-ID: <874pl2v9cd.fsf@riesling.zuerich.kuesterei.ch>

Hi,

there's a problem with the format of the catalogue as shipped with TeX
Live: 

J?rg Sommer <joerg at alea.gnuu.de> wrote:

> some of the catalogue entries include links to additional documentions
> and the like, but these files do not exist. Often local files are
> referenced while the site says this package is not part of TeX Live, e.g.
> MikTeX.
>
> I've run webcheck on the catalogue to see which files are affected.
>
> % wecheck -o /tmp /usr/share/doc/texlive-doc-en/english/catalogue/index.html
>
> webcheck found more than 6000 bad links. 

This is not a Debian-specific problem, it is also present in the normal
TeXlive installation.  For example, let's take the alphabetically first
entry, a0poster

/usr/local/texlive/2007/texmf-doc/doc/english/catalogue/entries/a0poster.html

The first link under "Documentation" looks like this:

        <a href="../../../macros/latex/contrib/a0poster/a0_eng.pdf"><img src="../acroread.png" ALT="Documentation">Package documentation (English): a0_eng.pdf.</a>

which is probably correct on CTAN, but should be 

-        <a href="../../../macros/latex/contrib/a0poster/a0_eng.pdf"><img src="../acroread.png" ALT="Documentation">Package documentation (English): a0_eng.pdf.</a>
+        <a href="../../../../../texmf-dist/doc/latex/a0poster/a0_eng.pdf"><img src="../acroread.png" ALT="Documentation">Package documentation (English): a0_eng.pdf.</a>

So we need to

- go down 5 directories, not three,

- choose between texmf, texmf-dist and texmf-doc

- s/macros/doc/

- s at contrib/@@ (or analogous).

Doesn't look straightforward to fix - any ideas?

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From viton.1 at osu.edu  Wed Jun 20 19:23:37 2007
From: viton.1 at osu.edu (Philip A. Viton)
Date: Wed, 20 Jun 2007 14:23:37 -0300
Subject: [tex-live] texlive2007 gui
Message-ID: <200706201823.l5KINuiu016884@defang10.it.ohio-state.edu>


The very nice installation GUI contains a number of dialogs of the form:

"Are you sure to install Ghostscript"

it's probably old news, but I think it would be more idiomatic to 
change all those dialogs to "Are you sure you want to ...", assuming, 
as I think is correct, that "Yes" means "Yes I want to install 
Ghostscript", etc. I know that the first time I saw the dialog I was 
a bit nonplussed, not being entirely sure what was being asked.

Regards,



------------------------
Philip A. Viton
City Planning, Ohio State University
275 West Woodruff Avenue, Columbus OH 43210
viton.1 at osu.edu


From reinhard.kotucha at web.de  Wed Jun 20 23:06:26 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 20 Jun 2007 23:06:26 +0200
Subject: [tex-live] texlive2007 gui
In-Reply-To: <200706201823.l5KINuiu016884@defang10.it.ohio-state.edu>
References: <200706201823.l5KINuiu016884@defang10.it.ohio-state.edu>
Message-ID: <18041.38610.570217.758434@zarniwoop.ms25.local>

Philip A. Viton writes:

 > The very nice installation GUI contains a number of dialogs of the form:
 > 
 > "Are you sure to install Ghostscript"
 > 
 > it's probably old news, but I think it would be more idiomatic to 
 > change all those dialogs to "Are you sure you want to ...", assuming, 
 > as I think is correct, that "Yes" means "Yes I want to install 
 > Ghostscript", etc. I know that the first time I saw the dialog I was 
 > a bit nonplussed, not being entirely sure what was being asked.

There are many things which can be improved.  The guys who wrote the
installer did not get much feedback from users before the test images
had been available.  But then they worked very hard to solve problems
with certain platforms and even provided support for more platforms.
There had not been enough time to fix the string pool.

However, at the moment we are thinking about a new installer but we
cannot guarantee that it will be ready when TL-2008 is released.
Therefore we decided not to remove the TL-2007 installer until we have
something better.

I suppose that your native language is English.  Then you can help us.
On your CD/DVD there is a file "setuptl/msgs/en.msg" which contains
the messages.  If you send me an improved version I'll replace the
file in the TeXLive repository.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From karl at freefriends.org  Wed Jun 20 23:36:48 2007
From: karl at freefriends.org (Karl Berry)
Date: Wed, 20 Jun 2007 16:36:48 -0500
Subject: [tex-live] Bug#425085: texlive-doc-en: catalogue entries
	with	dangling links
In-Reply-To: <874pl2v9cd.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <200706202136.l5KLam609226@f7.net>

    Doesn't look straightforward to fix - any ideas?

We will probably reinstate the Catalogue in TL, and when we do, I guess
we should not just copy the files, but set up some kind of "conversion"
process.  Ugh.

Does MiKTeX contain the Catalogue?  If so, are the links properly
transformed?  If so, maybe we could just work from that.

If someone wants to take this up, great.

Best,
Karl

From karl at freefriends.org  Thu Jun 21 00:16:53 2007
From: karl at freefriends.org (Karl Berry)
Date: Wed, 20 Jun 2007 17:16:53 -0500
Subject: [tex-live] TeX Live on NetBSD
In-Reply-To: <20070620101425.GA14165@moray.salmi.ch>
Message-ID: <200706202216.l5KMGrc19078@f7.net>

    [2] http://salmi.ch/~jukka/nbsd/nbsd-tl.txt

Very nice.  Thanks.

If you like, we could put your binaries on the TL web pages, so others
could get them from there.

Also, what patches did you have to apply?  Should any come back to the
sources?

Best,
Karl

From Robin.Fairbairns at cl.cam.ac.uk  Thu Jun 21 01:00:52 2007
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Thu, 21 Jun 2007 00:00:52 +0100
Subject: [tex-live] Bug#425085: texlive-doc-en: catalogue entries with
	dangling links
In-Reply-To: Your message of Wed, 20 Jun 2007 16:36:48 -0500.
	<200706202136.l5KLam609226@f7.net> 
Message-ID: <19740.1182380452@mole.cl.cam.ac.uk>

Karl Berry <karl at freefriends.org> wrote:

>     Doesn't look straightforward to fix - any ideas?
> 
> We will probably reinstate the Catalogue in TL, and when we do, I guess
> we should not just copy the files, but set up some kind of "conversion"
> process.  Ugh.

the catalogue as you see it on ctan or sarovar is the result of
processing the xml files that make up the repository.

since those xml files contain the names of tpm files (for those for
which i know the correspondence).  for example:

<entry datestamp='$Date: 2007-06-20 23:40:03 +0100 (Wed, 20 Jun 2007) $' modifier='$Author: robin $' id='footmisc'>
  ...
  <texlive location='footmisc'/>
  ...
</entry>

[the id is the name of the xml file (and hence the name of the converted
html file); the texlive location is the name of the tpm file.]

given that info, one could in principle match things up, presumably?

but before we even start, we need to know what we want the links to
point to.  suppose ctan has pdf docs and texlive has .dvi ... or, as in
the case of footmisc, ctan has pdf and texlive has no docs at all?

> Does MiKTeX contain the Catalogue?  If so, are the links properly
> transformed?  If so, maybe we could just work from that.

it doesn't, that i can see.  (there's a file called files.csv.bz2 in the
miktex package repository, that tells you every file in miktex and the
miktex package it belongs to.  i've no script that looks in all the
different formats and extracts the data.)

> If someone wants to take this up, great.

as it stands, i don't think it's do-able.  we need a definition of
what's really required.  (this comes as a surprise to me ... until this
issue arose, i had assumed it was all trivial.)

would a non-ctan html version, as you find on sarovar, help?

robin

From frank at debian.org  Thu Jun 21 08:12:21 2007
From: frank at debian.org (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Thu, 21 Jun 2007 08:12:21 +0200
Subject: [tex-live] Bug#425085: Bug#425085: texlive-doc-en: catalogue
	entries with dangling links
In-Reply-To: <19740.1182380452@mole.cl.cam.ac.uk> (Robin Fairbairns's message
	of "Thu\, 21 Jun 2007 00\:00\:52 +0100")
References: <19740.1182380452@mole.cl.cam.ac.uk>
Message-ID: <87y7idj0oq.fsf@riesling.zuerich.kuesterei.ch>

Robin Fairbairns <Robin.Fairbairns at cl.cam.ac.uk> wrote:

> but before we even start, we need to know what we want the links to
> point to.  suppose ctan has pdf docs and texlive has .dvi ... or, as in
> the case of footmisc, ctan has pdf and texlive has no docs at all?

If texlive has no docs at all, it's a bug.  If the format is different,
hm, some simple matching rules?

>> If someone wants to take this up, great.
>
> as it stands, i don't think it's do-able.  we need a definition of
> what's really required.  (this comes as a surprise to me ... until this
> issue arose, i had assumed it was all trivial.)
>
> would a non-ctan html version, as you find on sarovar, help?

Yes, that's the style.  But here the doc links point to a CTAN mirror,
for example

http://theory.uwinnipeg.ca/scripts/CTAN/macros/latex/contrib/a0poster/a0_eng.pdf

but for offline use you want the FOO/macros/latex/contrib to be replaced
by the path in the TEXMF tree...

Regards, Frank

P.S. Who is J?rg at tug.org in the Cc line?  My mail program refused to
send the umlaut
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From dak at gnu.org  Thu Jun 21 08:25:46 2007
From: dak at gnu.org (David Kastrup)
Date: Thu, 21 Jun 2007 08:25:46 +0200
Subject: [tex-live] Bug#425085: texlive-doc-en: catalogue entries
	with	dangling links
In-Reply-To: <200706202136.l5KLam609226@f7.net> (Karl Berry's message of "Wed\,
	20 Jun 2007 16\:36\:48 -0500")
References: <200706202136.l5KLam609226@f7.net>
Message-ID: <86lkedomc5.fsf@lola.quinscape.zz>

karl at freefriends.org (Karl Berry) writes:

>     Doesn't look straightforward to fix - any ideas?
>
> We will probably reinstate the Catalogue in TL, and when we do, I guess
> we should not just copy the files, but set up some kind of "conversion"
> process.  Ugh.
>
> Does MiKTeX contain the Catalogue?  If so, are the links properly
> transformed?  If so, maybe we could just work from that.
>
> If someone wants to take this up, great.

I'll try massaging an Emacs script in my free time.  This sounds like
a reasonably doable job, and since it is a one-time exercise, my
choice of scripting engine should not really matter.

Could mean that at one time I would need write access to TeXlive,
though.

-- 
David Kastrup

From preining at logic.at  Thu Jun 21 09:16:37 2007
From: preining at logic.at (Norbert Preining)
Date: Thu, 21 Jun 2007 09:16:37 +0200
Subject: [tex-live] New Debian TeX packages for Etch
Message-ID: <20070621071637.GE29155@gamma.logic.tuwien.ac.at>

Hi all!

The new packages uploaded yesterday by Frank to Debian unstable have
been backported to etch are as usual available on people.debian.org.
Don't forget that you will also need lmodern and context for
texlive-full.

Binaries of texlive-bin 2007-12 are currently only for i386, I hope to
get powerpc binaries soon. If there is need for amd64 I can do them,
too.

texlive and tex-common
 	deb http://people.debian.org/~preining/TeX/ tl2007/
 	deb-src http://people.debian.org/~preining/TeX/ src/

lmodern
	deb http://people.debian.org/~preining/TeX/ lmodern/
	deb-src http://people.debian.org/~preining/TeX/ lmodern/

context
 	deb http://people.debian.org/~preining/TeX/ context/
 	deb-src http://people.debian.org/~preining/TeX/ context/

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
CLONMULT (n.)
A yellow ooze usually found near secretions of buldoo (q.v.) and
sadberge (q.v.)
			--- Douglas Adams, The Meaning of Liff

From ci4ic4 at gmail.com  Thu Jun 21 01:25:47 2007
From: ci4ic4 at gmail.com (Chavdar Ivanov)
Date: Thu, 21 Jun 2007 00:25:47 +0100
Subject: [tex-live] TeX Live on NetBSD
In-Reply-To: <20070620101425.GA14165@moray.salmi.ch>
References: <20070620101425.GA14165@moray.salmi.ch>
Message-ID: <bc8ff1fd0706201625m1097b485na2b83601ce125d3d@mail.gmail.com>

On 20/06/07, Jukka Salmi <j+nbsd at 2007.salmi.ch> wrote:
> Hi,
>
> I recently installed [1]TeX Live on a NetBSD system and wrote down a
> short installation [2]howto; just in case somebody finds this useful.

Blindly following your instructions, I get:

.........
c++ -o xetex -Wl,-rpath,/usr/pkg/lib -Wl,-rpath,/usr/X11R6/lib
xetexini.o xetex0.o xetex1.o xetex2.o xetexextra.o trans.o XeTeX_ext.o
XeTeXFontMgr_FC.o mfileio.o numbers.o pdfimage.o bmpimage.o
jpegimage.o pngimage.o XeTeX_pic.o XeTeXFontMgr.o
XeTeXLayoutInterface.o XeTeXOTLayoutEngine.o XeTeXFontInst.o cmaps.o
FontTableCache.o XeTeXOTMath.o XeTeXFontInst_FT2.o  \
        -L/usr/pkg/lib  ../../libs/icu-xetex/lib/libsicuuc.a
../../libs/icu-xetex/lib/libsicule.a
../../libs/icu-xetex/lib/libsicudata.a
../../libs/teckit/lib/.libs/libTECkit.a -L/usr/pkg/lib -lfreetype
-L/usr/lib -lz ../../libs/xpdf/xpdf/libxpdf.a
../../libs/xpdf/goo/libGoo.a ../../libs/xpdf/fofi/libfofi.a
-L/usr/pkg/lib -lpng -lfontconfig \
        lib/lib.a ../kpathsea/.libs/libkpathsea.a -lm   -nodefaultlibs
-Wl,-Bstatic -lstdc++ -Wl,-Bdynamic -lm -lgcc_eh -lgcc -lc -lgcc_eh
-lgcc -pthread -lpthread
XeTeX_ext.o: In function `measure_native_node':
../../../texk/web2c/xetexdir/XeTeX_ext.c:1524: undefined reference to
`ubidi_open_3_6'
../../../texk/web2c/xetexdir/XeTeX_ext.c:1527: undefined reference to
`ubidi_setPara_3_6'
../../../texk/web2c/xetexdir/XeTeX_ext.c:1529: undefined reference to
`ubidi_getDirection_3_6'
../../../texk/web2c/xetexdir/XeTeX_ext.c:1638: undefined reference to
`ubidi_close_3_6'
../../../texk/web2c/xetexdir/XeTeX_ext.c:1535: undefined reference to
`ubidi_countRuns_3_6'
../../../texk/web2c/xetexdir/XeTeX_ext.c:1542: undefined reference to
`ubidi_getVisualRun_3_6'
../../../texk/web2c/xetexdir/XeTeX_ext.c:1571: undefined reference to
`ubidi_getVisualRun_3_6'
XeTeX_ext.o: In function `uclose':
../../../texk/web2c/xetexdir/XeTeX_ext.c:280: undefined reference to
`ucnv_close_3_6'
XeTeX_ext.o: In function `getencodingmodeandinfo':
../../../texk/web2c/xetexdir/XeTeX_ext.c:430: undefined reference to
`ucnv_open_3_6'
../../../texk/web2c/xetexdir/XeTeX_ext.c:436: undefined reference to
`ucnv_close_3_6'
XeTeX_ext.o: In function `linebreaknext':
../../../texk/web2c/xetexdir/XeTeX_ext.c:392: undefined reference to
`ubrk_next_3_6'
XeTeX_ext.o: In function `setinputfileencoding':
../../../texk/web2c/xetexdir/XeTeX_ext.c:259: undefined reference to
`ucnv_open_3_6'
../../../texk/web2c/xetexdir/XeTeX_ext.c:244: undefined reference to
`ucnv_close_3_6'
XeTeX_ext.o: In function `linebreakstart':
../../../texk/web2c/xetexdir/XeTeX_ext.c:364: undefined reference to
`ubrk_close_3_6'
../../../texk/web2c/xetexdir/XeTeX_ext.c:370: undefined reference to
`ubrk_open_3_6'
../../../texk/web2c/xetexdir/XeTeX_ext.c:374: undefined reference to
`ubrk_close_3_6'
../../../texk/web2c/xetexdir/XeTeX_ext.c:376: undefined reference to
`ubrk_open_3_6'
../../../texk/web2c/xetexdir/XeTeX_ext.c:386: undefined reference to
`ubrk_setText_3_6'
XeTeX_ext.o: In function `input_line_icu':
../../../texk/web2c/xetexdir/XeTeX_ext.c:329: undefined reference to
`ucnv_toUChars_3_6'
gmake[2]: *** [xetex] Error 1
gmake[2]: Leaving directory `/usr/local/src/texlive_2007/Work/texk/web2c'
gmake[1]: *** [all] Error 1
gmake[1]: Leaving directory `/usr/local/src/texlive_2007/Work/texk'
gmake: *** [all] Error 1
      509.87 real       410.40 user        52.88 sys
zsh: exit 2     sh Build.nbsd
..........

Am I missing something in the system? It is -current from a few days
ago, as well as
updated pkgsrc.

>
>
> Regards, Jukka
>
> [1] http://www.tug.org/texlive/
> [2] http://salmi.ch/~jukka/nbsd/nbsd-tl.txt
>
> --
> bashian roulette:
> $ ((RANDOM%6)) || rm -rf ~
>

Chavdar Ivanov

From frank at kuesterei.ch  Thu Jun 21 13:22:48 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Thu, 21 Jun 2007 13:22:48 +0200
Subject: [tex-live] License of CSfonts
Message-ID: <87fy4limbb.fsf@riesling.zuerich.kuesterei.ch>

Hi Petr,

while reading ftp://math.feld.cvut.cz/pub/cstex/license.eng I found that
the "implementation of CSfont in Type1 format" is under the same license
as the Bakoma fonts, and it says that they are in a file
CSTEX:/web2c/cspdftexlib.tar.gz.  However, I cannot find this file,
instead there is
ftp://math.feld.cvut.cz/pub/cstex/web2c/csfonts-t1.tar.gz. 

Is it right that the fonts in this file, csfonts-t1.tar.gz, are those
under the Bakoma License?

Regards, Frank

P.S. Any chance that you upload csplain with a new license soon?
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From jonathan_kew at sil.org  Thu Jun 21 14:37:45 2007
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Thu, 21 Jun 2007 13:37:45 +0100
Subject: [tex-live] TeX Live on NetBSD
In-Reply-To: <bc8ff1fd0706201625m1097b485na2b83601ce125d3d@mail.gmail.com>
References: <20070620101425.GA14165@moray.salmi.ch>
	<bc8ff1fd0706201625m1097b485na2b83601ce125d3d@mail.gmail.com>
Message-ID: <DC78BEA5-840D-41B8-90A1-06F19B62799D@sil.org>

On 21 Jun 2007, at 12:25 am, Chavdar Ivanov wrote:

> On 20/06/07, Jukka Salmi <j+nbsd at 2007.salmi.ch> wrote:
>> Hi,
>>
>> I recently installed [1]TeX Live on a NetBSD system and wrote down a
>> short installation [2]howto; just in case somebody finds this useful.
>
> Blindly following your instructions, I get:
>
> .........
> c++ -o xetex -Wl,-rpath,/usr/pkg/lib -Wl,-rpath,/usr/X11R6/lib
> xetexini.o xetex0.o xetex1.o xetex2.o xetexextra.o trans.o XeTeX_ext.o
> XeTeXFontMgr_FC.o mfileio.o numbers.o pdfimage.o bmpimage.o
> jpegimage.o pngimage.o XeTeX_pic.o XeTeXFontMgr.o
> XeTeXLayoutInterface.o XeTeXOTLayoutEngine.o XeTeXFontInst.o cmaps.o
> FontTableCache.o XeTeXOTMath.o XeTeXFontInst_FT2.o  \
>        -L/usr/pkg/lib  ../../libs/icu-xetex/lib/libsicuuc.a
> ../../libs/icu-xetex/lib/libsicule.a
> ../../libs/icu-xetex/lib/libsicudata.a
> ../../libs/teckit/lib/.libs/libTECkit.a -L/usr/pkg/lib -lfreetype
> -L/usr/lib -lz ../../libs/xpdf/xpdf/libxpdf.a
> ../../libs/xpdf/goo/libGoo.a ../../libs/xpdf/fofi/libfofi.a
> -L/usr/pkg/lib -lpng -lfontconfig \
>        lib/lib.a ../kpathsea/.libs/libkpathsea.a -lm   -nodefaultlibs
> -Wl,-Bstatic -lstdc++ -Wl,-Bdynamic -lm -lgcc_eh -lgcc -lc -lgcc_eh
> -lgcc -pthread -lpthread
> XeTeX_ext.o: In function `measure_native_node':
> ../../../texk/web2c/xetexdir/XeTeX_ext.c:1524: undefined reference to
> `ubidi_open_3_6'

This looks like you have mixed ICU versions somewhere. The texlive  
source includes ICU 3.4 (slightly modified for XeTeX), but some of  
the source files must have been compiled with headers from ICU 3.6  
(perhaps installed elsewhere on your system?). I'm not sure how this  
would have happened; the TL build should normally use its own private  
copy of ICU.

JK


From j+tex-live at 2007.salmi.ch  Thu Jun 21 14:49:48 2007
From: j+tex-live at 2007.salmi.ch (Jukka Salmi)
Date: Thu, 21 Jun 2007 14:49:48 +0200
Subject: [tex-live] TeX Live on NetBSD
In-Reply-To: <200706202216.l5KMGrc19078@f7.net>
References: <20070620101425.GA14165@moray.salmi.ch>
	<200706202216.l5KMGrc19078@f7.net>
Message-ID: <20070621124948.GA9409@moray.salmi.ch>

Karl Berry --> tex-live (2007-06-20 17:16:53 -0500):
> If you like, we could put your binaries on the TL web pages, so others
> could get them from there.

I built them on a -current (CVS HEAD version of NetBSD sources) system,
so these binaries won't run on any currently release version of NetBSD.
Thus I doubt there is much request for these binaries...


> Also, what patches did you have to apply?  Should any come back to the
> sources?

It's only the common.sh patch you already committed to the repository
some days ago, a temporary hack needed because the TL installer doesn't
know about NetBSD (yet) and a pkgsrc patch to just execute dialog(1)
without searching for it (in texconfig and texconfig-dialog).

Maybe something like this texconfig dialog patch should be committed;
at least I don't see any reason why a system dialog(1) or whiptail(1)
should only be searched for on FreeBSD, Linux and Cygwin. See attached
diff. Hmm, but why are findDialogProg() and runDialog() defined in
texconfig at all? It seems that they are never used, and the functions
which should be changed are findDialog() and runDialog() from
texconfig-dialog... Am I missing something?


Regards, Jukka

-- 
bashian roulette:
$ ((RANDOM%6)) || rm -rf ~
-------------- next part --------------
--- texk/tetex/texconfig.orig	2007-01-16 01:33:36.000000000 +0100
+++ texk/tetex/texconfig	2007-06-21 14:39:55.000000000 +0200
@@ -165,14 +165,14 @@
 ###############################################################################
 findDialogProg()
 {
-  { u=`uname -s`; } 2>/dev/null
-  case "$u" in
-    FreeBSD|Linux|cygwin*|CYGWIN*)
-      test -f /usr/bin/whiptail && DIALOG_PROG=/usr/bin/whiptail
-      test -f /usr/bin/dialog && DIALOG_PROG=/usr/bin/dialog
-      test -f /bin/dialog && DIALOG_PROG=/bin/dialog
-      ;;
-  esac
+  for bin in whiptail dialog
+  do
+    binLoc=`checkForBinary $bin`
+    case $binLoc in
+      "") DIALOG_PROG="";;
+      *)  DIALOG_PROG=$binLoc; break;;
+    esac
+  done
 }
 
 ###############################################################################

From karl at freefriends.org  Thu Jun 21 23:47:17 2007
From: karl at freefriends.org (Karl Berry)
Date: Thu, 21 Jun 2007 16:47:17 -0500
Subject: [tex-live] Bug#425085: texlive-doc-en: catalogue entries
	with	dangling links
In-Reply-To: <86lkedomc5.fsf@lola.quinscape.zz>
Message-ID: <200706212147.l5LLlH424081@f7.net>

    since it is a one-time exercise, 

I don't understand.  Any massaging process will be rerun a zillion
times, since of course the Catalogue is being updated constantly.  (Not
that I have any objection to Elisp myself.)

karl

From karl at freefriends.org  Thu Jun 21 23:55:08 2007
From: karl at freefriends.org (Karl Berry)
Date: Thu, 21 Jun 2007 16:55:08 -0500
Subject: [tex-live] Bug#425085: texlive-doc-en: catalogue entries with
	dangling links
In-Reply-To: <19740.1182380452@mole.cl.cam.ac.uk>
Message-ID: <200706212155.l5LLt8S25964@f7.net>

      <texlive location='footmisc'/>
      ...
    </entry>

    [the id is the name of the xml file (and hence the name of the converted
    html file); the texlive location is the name of the tpm file.]

    given that info, one could in principle match things up, presumably?

Yes, thanks.  That seems like a good starting point.

    suppose ctan has pdf docs and texlive has .dvi ... 

We don't.

    or, as in the case of footmisc, ctan has pdf and texlive has no docs
    at all?

It does now :).

In general, if something is missing, it's just a bug and we should fix
it in whatever way is best.

Thanks,
k

From dak at gnu.org  Fri Jun 22 00:48:28 2007
From: dak at gnu.org (David Kastrup)
Date: Fri, 22 Jun 2007 00:48:28 +0200
Subject: [tex-live] Bug#425085: texlive-doc-en: catalogue entries
	with	dangling links
In-Reply-To: <200706212147.l5LLlH424081@f7.net> (Karl Berry's message of "Thu\,
	21 Jun 2007 16\:47\:17 -0500")
References: <200706212147.l5LLlH424081@f7.net>
Message-ID: <85bqf8exfn.fsf@lola.goethe.zz>

karl at freefriends.org (Karl Berry) writes:

>     since it is a one-time exercise, 
>
> I don't understand.  Any massaging process will be rerun a zillion
> times, since of course the Catalogue is being updated constantly.  (Not
> that I have any objection to Elisp myself.)

But it is going to be run by people maintaining TeXlive, not people
fetching TeXlive.  Similar to ls-R regeneration, I would guess.

Could probably be rewritten at some time in Lua, but Lua seems less
convenient for in-place text manipulation.  And I know I'll be faster
with prototyping in Elisp.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From peterih at gmail.com  Fri Jun 22 00:01:12 2007
From: peterih at gmail.com (Peter I. Hansen)
Date: Fri, 22 Jun 2007 00:01:12 +0200
Subject: [tex-live] TeX Live on NetBSD
In-Reply-To: <20070620101425.GA14165@moray.salmi.ch>
References: <20070620101425.GA14165@moray.salmi.ch>
Message-ID: <b11f605c0706211501r7df53f2ajc52190be89f9c8f7@mail.gmail.com>

On 6/20/07, Jukka Salmi <j+nbsd at 2007.salmi.ch> wrote:
>
> Hi,
>
> I recently installed [1]TeX Live on a NetBSD system and wrote down a
> short installation [2]howto; just in case somebody finds this useful.
>
>
> Regards, Jukka
>
> [1] http://www.tug.org/texlive/
> [2] http://salmi.ch/~jukka/nbsd/nbsd-tl.txt


Hi

Is there any chance you are looking into converting this work to a package
for pkgsrc-wip? That would be fantastic, since TeX Live seems to be
replacing teTeX on more and more systems.

Cheers, Peter
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/tex-live/attachments/20070622/e4e0427d/attachment.html 

From frank at debian.org  Fri Jun 22 11:21:11 2007
From: frank at debian.org (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Fri, 22 Jun 2007 11:21:11 +0200
Subject: [tex-live] Inclusion of large eps files with dvipdfm
In-Reply-To: <20070620203028.GA25372@jim.sh> (Jim Paris's message of "Wed\,
	20 Jun 2007 16\:30\:28 -0400")
References: <20070620064415.GA10586@jim.sh>
	<87ejk7yrwh.fsf@riesling.zuerich.kuesterei.ch>
	<20070620203028.GA25372@jim.sh>
Message-ID: <87d4zogxa0.fsf_-_@riesling.zuerich.kuesterei.ch>

Dear all,

I would like to hear your opinions about the Ghostscript options that
should be used in dvipdfm(x)'s config file for inclusion of eps files.  

The problem with the setting we had previously in teTeX and TeXLive,
"-sPAPERSIZE=a0", lead to the problem described at
http://groups.google.com/group/comp.text.tex/msg/3aeeb27907a7dbef 

namely that an image which was very large (multiples of a0) wasn't
included properly.  Back then, we decided to use a suggestion which
Heiko Oberdiek made, namely "-dEPSCrop".  However, this introduced a new
problem, described in
http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=428014:

,----
| dvipdfm doesn't correctly handle an eps figure whose lower-left corner
| is not at (0,0).  In some cases, the resulting figure appears in the
| document, but is shifted.  In other cases, it doesn't appear at all.
| Such figures are produced by lots of software, e.g. gnuplot.
`----

The submitter of that bug suggested to go back to specifying the
papersize, but this time not as a0, but in absolute (large) numbers:

>> >
>> > I tested Dan's suggestion: replacing -dEPSCrop in the config file with
>> >
>> >   -dDEVICEWIDTHPOINTS=500000 -dDEVICEHEIGHTPOINTS=500000
>> >
>> > solves the problem for me.

I'm not sure whether we need even more "0"s, or whether this would again
cause problems elsewhere (and be it only performance).

What do you think?

TIA, Frank

P.S. to Jim:

>> This is a configuration file; maybe the right fix is to just document
>> this (in the file and in some README) and leave the choice to the
>> user.
>
> It isn't marked as a conffile in the package, and it's not in /etc,
> so it will need a bit more than just documentation.

That's solved in sid, where it is a configuration file.  In etch, you
can just copy the file to /etc/texmf/dvipdfm/config and edit there, it
will be used (maybe texhash is needed, I'm not sure).

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From hartmut_henkel at gmx.de  Fri Jun 22 11:32:50 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Fri, 22 Jun 2007 11:32:50 +0200 (CEST)
Subject: [tex-live] Inclusion of large eps files with dvipdfm
In-Reply-To: <87d4zogxa0.fsf_-_@riesling.zuerich.kuesterei.ch>
References: <20070620064415.GA10586@jim.sh>
	<87ejk7yrwh.fsf@riesling.zuerich.kuesterei.ch>
	<20070620203028.GA25372@jim.sh>
	<87d4zogxa0.fsf_-_@riesling.zuerich.kuesterei.ch>
Message-ID: <alpine.DEB.0.99.0706221128510.4539@hahepc1.hahe>

On Fri, 22 Jun 2007, Frank K?ster wrote:

> I would like to hear your opinions about the Ghostscript options that
> should be used in dvipdfm(x)'s config file for inclusion of eps files.

dvipdfmx works substantially different and much better than dvipdfm. One
should try to check if all these problems persist in dvipdfmx, and if
not suggest to use this instead of ancient dvipdfm. If gs works in
standard eps/crop mode it should be just right.

> The problem with the setting we had previously in teTeX and TeXLive,
> "-sPAPERSIZE=a0", lead to the problem described at
> http://groups.google.com/group/comp.text.tex/msg/3aeeb27907a7dbef
>
> namely that an image which was very large (multiples of a0) wasn't
> included properly.  Back then, we decided to use a suggestion which
> Heiko Oberdiek made, namely "-dEPSCrop".  However, this introduced a new
> problem, described in
> http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=428014:
>
> ,----
> | dvipdfm doesn't correctly handle an eps figure whose lower-left corner
> | is not at (0,0).  In some cases, the resulting figure appears in the
> | document, but is shifted.  In other cases, it doesn't appear at all.
> | Such figures are produced by lots of software, e.g. gnuplot.
> `----

this is a definitive bug in dvipdfm, solved in dvipdfmx.

Regards, Hartmut


------------------------------------------------------------------------
Dr.-Ing. Hartmut Henkel
In den Auwiesen 6, D-68723 Oftersheim, Germany
E-Mail: hartmut_henkel at gmx.de
http://www.circuitwizard.de
------------------------------------------------------------------------

From jonathan_kew at sil.org  Fri Jun 22 13:19:00 2007
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Fri, 22 Jun 2007 12:19:00 +0100
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <a6e8c1d0706161714h5534a99dm2b0dfdb740c8b796@mail.gmail.com>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
	<40B9B15F-D567-4096-8D03-96BAA162129E@sil.org>
	<a6e8c1d0706161714h5534a99dm2b0dfdb740c8b796@mail.gmail.com>
Message-ID: <188451E5-242D-4A1B-8F9A-DFD1020BF2FF@sil.org>

On 17 Jun 2007, at 1:14 am, Edd Barrett wrote:

> On 16/06/07, Jonathan Kew <jonathan_kew at sil.org> wrote:
>> Sorry; I think you're seeing a xetex bug that is liable to show up on
>> 64-bit big-endian architectures. It was reported by Werner Fink (see
>> <http://tug.org/pipermail/tex-live/2007-May/013573.html>). Note,
>> however, that the patch suggested there is not fully correct; it may
>> prevent the immediate crash but will not function properly in actual
>> use.
>>
>> The underlying problem has been fixed in the xetex sources on
>> scripts.sil.org (see <http://scripts.sil.org/svn-view/xetex?
>> rev=468&view=rev>), but this applies to the current development
>> version, not the release currently in TeX Live. When the next release
>> of xetex happens, this will of course be committed to TL as well, but
>> in the meantime it might be possible to develop a patch based on
>> these changes.
>>
>> Alternatively, is it possible to build a 32-bit binary as an interim
>> workaround?
>
>
> I would rather a patch as Im not sure how compatible sparc/sparc64
> binaries are on OpenBSD (yeh sure on solaris!).
>
> Do you have a patch?

I'm attaching a patch for xetex based on the sources in TeX Live 2007  
(from texlive/branches/branch2007/Build/source). It also seems to  
apply cleanly to the current sources in TL trunk, as of r4491. I hope  
this will solve the error you've been seeing on the sparc64 system,  
but as I don't have access to one myself I'd appreciate hearing the  
result.

This patch also includes the fixes for two bugs reported in version  
0.996 that led to incorrect output in certain (relatively obscure)  
situations. It does not include any of the new features currently  
being developed for the next release. The pool file is unchanged, so  
the binary is a drop-in replacement; "-patch1" is appended to the  
banner line so that it can be identified.

Please let me know if this works for you; unless anyone objects, I  
propose to commit it to TL once we know it solves the issue.

JK

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: xetex-0996-patch1.txt
Url: http://tug.org/pipermail/tex-live/attachments/20070622/2a957e72/attachment.txt 
-------------- next part --------------



From preining at logic.at  Fri Jun 22 13:34:35 2007
From: preining at logic.at (Norbert Preining)
Date: Fri, 22 Jun 2007 13:34:35 +0200
Subject: [tex-live] New Debian TeX packages for Etch
In-Reply-To: <20070621071637.GE29155@gamma.logic.tuwien.ac.at>
References: <20070621071637.GE29155@gamma.logic.tuwien.ac.at>
Message-ID: <20070622113435.GA22976@gamma.logic.tuwien.ac.at>

On Don, 21 Jun 2007, Norbert Preining wrote:
> Binaries of texlive-bin 2007-12 are currently only for i386, I hope to
> get powerpc binaries soon. If there is need for amd64 I can do them,
> too.

Now for i386 and amd64.

For powerpc still 2007-11.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
BAUGHURST
That kind of large fierce ugly woman who owns a small fierce ugly dog.
			--- Douglas Adams, The Meaning of Liff

From owner at bugs.debian.org  Fri Jun 22 12:03:39 2007
From: owner at bugs.debian.org (Debian Bug Tracking System)
Date: Fri, 22 Jun 2007 10:03:39 +0000
Subject: [tex-live] Bug#428014: Info received and FILED only (was Inclusion
	of large	eps files with dvipdfm)
References: <87tzt0fgrg.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <handler.428014.Q428014.118250645827966.ackinfoquiet@bugs.debian.org>

Thank you for the additional information you have supplied regarding
this problem report.  It has NOT been forwarded to the package
maintainers, but will accompany the original report in the Bug
tracking system.  Please ensure that you yourself have sent a copy of
the additional information to any relevant developers or mailing lists.

If you wish to continue to submit further information on this problem,
please send it to 428014-quiet at bugs.debian.org, as before.

Please do not reply to the address at the top of this message,
unless you wish to report a problem with the Bug-tracking system.

Debian bug tracking system administrator
(administrator, Debian Bugs database)

From oliver at first.in-berlin.de  Fri Jun 22 14:58:52 2007
From: oliver at first.in-berlin.de (Oliver Bandel)
Date: Fri, 22 Jun 2007 14:58:52 +0200
Subject: [tex-live] [OT]: Say NO to the Microsoft Office format as an ISO
	standard
Message-ID: <1182517132.467bc78cb183a@webmail.in-berlin.de>

Hello,

do you want proprietary, patent-contaminated ISO-standards??!

If not, sign here:

  http://www.noooxml.org/petition


For german readers this also might be interesting:

   http://www.heise.de/newsticker/meldung/91579


Ciao,
   Oliver

From kakuto at fsci.fuk.kindai.ac.jp  Fri Jun 22 16:19:53 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Fri, 22 Jun 2007 23:19:53 +0900
Subject: [tex-live] Inclusion of large eps files with dvipdfm
In-Reply-To: Your message of "Fri, 22 Jun 2007 11:32:50 +0200 (CEST)"
References: <alpine.DEB.0.99.0706221128510.4539@hahepc1.hahe>
Message-ID: <200706221419.l5MEJstl009404@jupiter.fsci.fuk.kindai.ac.jp>

> > I would like to hear your opinions about the Ghostscript options that
> > should be used in dvipdfm(x)'s config file for inclusion of eps files.
> 
> dvipdfmx works substantially different and much better than dvipdfm. One
> should try to check if all these problems persist in dvipdfmx, and if
> not suggest to use this instead of ancient dvipdfm. If gs works in
> standard eps/crop mode it should be just right.

[related problem]
dvipdfm, as dvipdfmx, tries to include a MetaPost-made eps
directly without the help of Ghostscript.
However the output format of the new ( > 0.9 ) MetaPost
is changed. Thus dvipdfm fails to check that an eps is
made by MetaPost. The following are borrowed from dvipdfmx:

Best,
Akira

--- mpost.c.orig	Wed Jan 18 06:41:52 2006
+++ mpost.c	Fri Jun 22 20:19:31 2007
@@ -42,17 +42,21 @@
 
 int check_for_mp (FILE *image_file) 
 {
+  int i;
+  int n = 0;
   rewind (image_file);
   /* For now, this is an exact test that must be passed, character for
      character */
   mfgets (work_buffer, WORK_BUFFER_SIZE, image_file);
   if (strncmp (work_buffer, "%!PS", 4))
     return 0;
-  mfgets (work_buffer, WORK_BUFFER_SIZE, image_file);
-  if (strncmp (work_buffer, "%%BoundingBox", strlen("%%BoundingBox")))
-    return 0;
-  mfgets (work_buffer, WORK_BUFFER_SIZE, image_file);
-  if (strncmp (work_buffer, "%%Creator: MetaPost", strlen("%%Creator: MetaPost")))
+  for(i=0; i < 10; i++) {
+    mfgets (work_buffer, WORK_BUFFER_SIZE, image_file);
+    if(strncmp(work_buffer, "%%Creator: MetaPost", strlen("%%Creator: MetaPost"))
+               == 0)
+      n++;
+  }
+  if(n == 0)
     return 0;
   return 1;
 }

From karl at freefriends.org  Fri Jun 22 20:05:03 2007
From: karl at freefriends.org (Karl Berry)
Date: Fri, 22 Jun 2007 13:05:03 -0500
Subject: [tex-live] Inclusion of large eps files with dvipdfm
In-Reply-To: <200706221419.l5MEJstl009404@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <200706221805.l5MI53B25244@f7.net>

    --- mpost.c.orig	Wed Jan 18 06:41:52 2006
    +++ mpost.c	Fri Jun 22 20:19:31 2007

Thanks as always, Akira.

I would much prefer to do away with dvipdfm (I mean, make it a symlink
to dvipdfmx) than to patch it.  I guess I will write ChoF and see if
he's made any progress on that front.

Best,
k

From karl at freefriends.org  Fri Jun 22 20:17:26 2007
From: karl at freefriends.org (Karl Berry)
Date: Fri, 22 Jun 2007 13:17:26 -0500
Subject: [tex-live] Inclusion of large eps files with dvipdfm
In-Reply-To: <87d4zogxa0.fsf_-_@riesling.zuerich.kuesterei.ch>
Message-ID: <200706221817.l5MIHQV31122@f7.net>

    >> >   -dDEVICEWIDTHPOINTS=500000 -dDEVICEHEIGHTPOINTS=500000

Akira, does this sound like a good solution to you?
(It seems ok to me.)

    I'm not sure whether we need even more "0"s, 

If I'm doing my arithmetic right, 500,000 points is more than 150
yards/meters.  I find it hard to picture anyone needing anything bigger :).

karl

From vext01 at gmail.com  Sat Jun 23 01:38:26 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Sat, 23 Jun 2007 00:38:26 +0100
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <188451E5-242D-4A1B-8F9A-DFD1020BF2FF@sil.org>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
	<40B9B15F-D567-4096-8D03-96BAA162129E@sil.org>
	<a6e8c1d0706161714h5534a99dm2b0dfdb740c8b796@mail.gmail.com>
	<188451E5-242D-4A1B-8F9A-DFD1020BF2FF@sil.org>
Message-ID: <a6e8c1d0706221638n777dc100k55db4d0afb776577@mail.gmail.com>

Hi Jonathan,

On 22/06/07, Jonathan Kew <jonathan_kew at sil.org> wrote:
> Please let me know if this works for you; unless anyone objects, I
> propose to commit it to TL once we know it solves the issue.

Bad news...

cc -DHAVE_CONFIG_H  -I.
-I/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c
-I.. -I/usr/po
rts/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/..
 -I/usr/X11R6/include -I../../libs/obsdcompa                        t
-I../../libs/obsdcompat/..
-I/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/../../lib
                       s/obsdcompat
-I/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/../../libs/obsdcompat/..
                        -O2 -pipe  -I../../libs/icu-xetex/common
-I/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web
                       2c/../../libs/icu-xetex/common
-I/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/../../l
                       ibs/icu-xetex/layout -DLE_USE_CMEMORY
-I/usr/X11R6/include -I/usr/X11R6/include/freetype2
-I/usr/ports/print/texlive/ba
se/w-texlive_base-2007/texlive_base-2007/texk/web2c/../../libs/teckit/source/Public-headers
-I/usr/local/include/libpng                         -I../../libs/xpdf
-I../../libs/xpdf/xpdf -I../../libs/xpdf/goo -I../../libs/xpdf/fofi
-I/usr/ports/print/texlive/base/
w-texlive_base-2007/texlive_base-2007/texk/web2c/../../libs/xpdf
-I/usr/ports/print/texlive/base/w-texlive_base-2007/te
       xlive_base-2007/texk/web2c/../../libs/xpdf/xpdf
-I/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/t
                       exk/web2c/../../libs/xpdf/goo
-I/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/../../li
                       bs/xpdf/fofi  -DHAVE_CONFIG_H  -I.
-I/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c
-I.                        .
-I/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/..
 -I/usr/X11R6/include -I../../lib                        s/obsdcompat
-I../../libs/obsdcompat/..
-I/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2
                       c/../../libs/obsdcompat
-I/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/../../libs/obs
                       dcompat/.. -O2 -pipe  -DXETEX_OTHER -c
/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/x
                       etexdir/XeTeX_ext.c -o XeTeX_ext.o
/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/xetexdir/XeTeX_ext.c:980:
error: conflic                        ting types for `otfontget'
/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/xetexdir/XeTeX_ext.h:241:
error: previou                        s declaration of `otfontget'
/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/xetexdir/XeTeX_ext.c:998:
error: conflic                        ting types for `otfontget1'
/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/xetexdir/XeTeX_ext.h:242:
error: previou                        s declaration of `otfontget1'
/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/xetexdir/XeTeX_ext.c:1016:
error: confli                        cting types for `otfontget2'
/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/xetexdir/XeTeX_ext.h:243:
error: previou                        s declaration of `otfontget2'
/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/xetexdir/XeTeX_ext.c:1035:
error: confli                        cting types for `otfontget3'
/usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/xetexdir/XeTeX_ext.h:244:
error: previou                        s declaration of `otfontget3'
gmake[2]: *** [XeTeX_ext.o] Error 1
gmake[2]: Leaving directory
`/usr/ports/print/texlive/base/w-texlive_base-2007/build-sparc64/texk/web2c'
gmake[1]: *** [all] Error 1
gmake[1]: Leaving directory
`/usr/ports/print/texlive/base/w-texlive_base-2007/build-sparc64/texk'
gmake: *** [all] Error 1
*** Error code 2

Stop in /usr/ports/print/texlive/base (line 2055 of
/usr/ports/infrastructure/mk/bsd.port.mk).

:(


-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From kakuto at fsci.fuk.kindai.ac.jp  Sat Jun 23 02:50:18 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Sat, 23 Jun 2007 09:50:18 +0900
Subject: [tex-live] Inclusion of large eps files with dvipdfm
In-Reply-To: Your message of "Fri, 22 Jun 2007 13:17:26 -0500"
References: <200706221817.l5MIHQV31122@f7.net>
Message-ID: <200706230050.l5N0oJ6r011137@jupiter.fsci.fuk.kindai.ac.jp>

>     >> >   -dDEVICEWIDTHPOINTS=500000 -dDEVICEHEIGHTPOINTS=500000
> 
> Akira, does this sound like a good solution to you?
> (It seems ok to me.)
> 
>     I'm not sure whether we need even more "0"s, 
> 
> If I'm doing my arithmetic right, 500,000 points is more than 150
> yards/meters.  I find it hard to picture anyone needing anything bigger :).

I think it sounds good. But anyway, eps inclusion in dvipdfm(x)
"through Ghostscript" has a limitation at present that
"negative values for BoundingBox are not treated correctly".
In such a case, I first change eps to pdf by epstopdf.
eps by MetaPost with negative values for BoundingBox
is correctly included by dvipdfmx.

Best regards,
Akira

From karl at freefriends.org  Sat Jun 23 02:59:53 2007
From: karl at freefriends.org (Karl Berry)
Date: Fri, 22 Jun 2007 19:59:53 -0500
Subject: [tex-live] new tl infrastructure
Message-ID: <200706230059.l5N0xrx10870@f7.net>

There is a new file in the TL hierarchy: Master/texlive.tlpdb.
It is created from the scripts and files in the new Master/tlpkg
directory.  This is the result of a lot of discussion, instigated by
Pawel (Jackowski) last year, and implementation, done nearly entirely by
Norbert (Preining).

What is it all about?  Well, we all know we want TL to provide dynamic
updates over the web, an improved cross-platform installer, etc.  TPM
files were simply not a good basis for moving forward.  They are a
mixture of source and derived information, are difficult and slow to
parse, and hard to reuse: witness the fact that the existing installers
(the Unix scripts and tlpm/tlpmgui) do not use them; they all use the
much simpler lists files that Sebastian invented originally.

So to move forward, we designed "tlpsrc" (TeX Live Package Source)
files, which are a simple line-based format (more or less an augmented
form of the lists files) consisting entirely of source information.
(The .tlpsrc for most packages is just a couple of lines.)  Then there
are scripts to expand these into the full database (also line-based
plain text), which consists of essentially the same information that was
in the tpm's -- all the same categories of packages (TLCore Package
Source), all the same classes of files (Bin Doc Run ...), etc.

As an interim step, we also continue to generate exactly the same lists
files that were previously made from the tpm's.  So the existing
installers continue to function without change.  We do plan to get rid
of the lists files as well before the next release of TL, by changing
the installers to use the database directly.

There's a Perl API for the database that most of the new scripts, and a
shell API for a few odds and ends.  These are documented in the
Master/tlpkg/doc/ directory, along with some specs for the associated
files, etc.  The Debian processes will be changed to use the new
database; anyone else using the TL tpm's (we are not aware of anyone),
please do the same!

On a final note, I'd like to extend my appreciation to Norbert Preining
for working through all the myriad details with remarkable good cheer.
We'd still be in the "someday" stage if not for his efforts.

Karl

P.S. The tpm files are still in the hierarchy for now, but will be
removed in the not-too-distant future.  The infrastructure scripts will
also be rearranged and updated.  In general, there's lots left to do; we
just wanted to make this announcement as soon as we had something functional.

From jonathan_kew at sil.org  Sat Jun 23 08:42:49 2007
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Sat, 23 Jun 2007 07:42:49 +0100
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <a6e8c1d0706221638n777dc100k55db4d0afb776577@mail.gmail.com>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
	<40B9B15F-D567-4096-8D03-96BAA162129E@sil.org>
	<a6e8c1d0706161714h5534a99dm2b0dfdb740c8b796@mail.gmail.com>
	<188451E5-242D-4A1B-8F9A-DFD1020BF2FF@sil.org>
	<a6e8c1d0706221638n777dc100k55db4d0afb776577@mail.gmail.com>
Message-ID: <D1EBC1B5-2ADD-4972-8198-9EBE4AFA7249@sil.org>

On 23 Jun 2007, at 12:38 am, Edd Barrett wrote:

> Hi Jonathan,
>
> On 22/06/07, Jonathan Kew <jonathan_kew at sil.org> wrote:
>> Please let me know if this works for you; unless anyone objects, I
>> propose to commit it to TL once we know it solves the issue.
>
> Bad news...

Drat, sorry. (I need a 64-bit compiler to test stuff!)

Attached is a revised version that should get further. Hope I didn't  
miss any others like that...

JK

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: xetex-0996-patch1a.txt
Url: http://tug.org/pipermail/tex-live/attachments/20070623/3db39cc1/attachment-0001.txt 
-------------- next part --------------



From vext01 at gmail.com  Sat Jun 23 17:03:24 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Sat, 23 Jun 2007 16:03:24 +0100
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <D1EBC1B5-2ADD-4972-8198-9EBE4AFA7249@sil.org>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
	<40B9B15F-D567-4096-8D03-96BAA162129E@sil.org>
	<a6e8c1d0706161714h5534a99dm2b0dfdb740c8b796@mail.gmail.com>
	<188451E5-242D-4A1B-8F9A-DFD1020BF2FF@sil.org>
	<a6e8c1d0706221638n777dc100k55db4d0afb776577@mail.gmail.com>
	<D1EBC1B5-2ADD-4972-8198-9EBE4AFA7249@sil.org>
Message-ID: <a6e8c1d0706230803o614fea36lc49bfad2cc8f1e8f@mail.gmail.com>

On 23/06/07, Jonathan Kew <jonathan_kew at sil.org> wrote:
> Attached is a revised version that should get further. Hope I didn't
> miss any others like that...

Superb, Now I can build documents with xelatex on sparc64!

Many thanks for you work.



-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From vext01 at gmail.com  Sat Jun 23 19:53:40 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Sat, 23 Jun 2007 18:53:40 +0100
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <77F18E62-FBE6-46BF-A33D-6A8EB540D7B3@sil.org>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
	<40B9B15F-D567-4096-8D03-96BAA162129E@sil.org>
	<a6e8c1d0706161714h5534a99dm2b0dfdb740c8b796@mail.gmail.com>
	<188451E5-242D-4A1B-8F9A-DFD1020BF2FF@sil.org>
	<a6e8c1d0706221638n777dc100k55db4d0afb776577@mail.gmail.com>
	<D1EBC1B5-2ADD-4972-8198-9EBE4AFA7249@sil.org>
	<a6e8c1d0706230803o614fea36lc49bfad2cc8f1e8f@mail.gmail.com>
	<77F18E62-FBE6-46BF-A33D-6A8EB540D7B3@sil.org>
Message-ID: <a6e8c1d0706231053t39f5127bpc23980c68e1e43b3@mail.gmail.com>

Hi Jonathan,

On 23/06/07, Jonathan Kew <jonathan_kew at sil.org> wrote:
> Just curious, have you actually had a chance to try xelatex with an
> OpenType or TrueType font installed in ~/.fonts or /usr/share/fonts/
> or wherever OpenBSD puts them, to confirm that you get sensible
> output? Or are we at the stage of "it builds, and dumps xelatex.fmt
> without crashing"?

I have run a test following your instructions, however does this test
the opentype functionality, as the font you directed me to was
distributed in ttf? I have never owned a opentype font to date. Where
might I get one?

Anyway I have emailed you the source code and output pdf from my tests
(list didn't allow me to attach if i remember correctly). The test was
run on i386 and sparc64. The reulst I have mailed you are from the
sparc64 machine. It seems to look fine to me, but I must admit I have
limited knowledge of fonts.



-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From reinhard.kotucha at web.de  Sat Jun 23 20:14:52 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 23 Jun 2007 20:14:52 +0200
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <a6e8c1d0706231053t39f5127bpc23980c68e1e43b3@mail.gmail.com>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
	<40B9B15F-D567-4096-8D03-96BAA162129E@sil.org>
	<a6e8c1d0706161714h5534a99dm2b0dfdb740c8b796@mail.gmail.com>
	<188451E5-242D-4A1B-8F9A-DFD1020BF2FF@sil.org>
	<a6e8c1d0706221638n777dc100k55db4d0afb776577@mail.gmail.com>
	<D1EBC1B5-2ADD-4972-8198-9EBE4AFA7249@sil.org>
	<a6e8c1d0706230803o614fea36lc49bfad2cc8f1e8f@mail.gmail.com>
	<77F18E62-FBE6-46BF-A33D-6A8EB540D7B3@sil.org>
	<a6e8c1d0706231053t39f5127bpc23980c68e1e43b3@mail.gmail.com>
Message-ID: <18045.25372.382065.233299@zarniwoop.ms25.local>

Edd Barrett writes:

 > I have never owned a opentype font to date. Where might I get one?

  http://www.gust.org.pl/projects/e-foundry/latin-modern

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From vext01 at gmail.com  Sat Jun 23 20:32:57 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Sat, 23 Jun 2007 19:32:57 +0100
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <18045.25372.382065.233299@zarniwoop.ms25.local>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
	<40B9B15F-D567-4096-8D03-96BAA162129E@sil.org>
	<a6e8c1d0706161714h5534a99dm2b0dfdb740c8b796@mail.gmail.com>
	<188451E5-242D-4A1B-8F9A-DFD1020BF2FF@sil.org>
	<a6e8c1d0706221638n777dc100k55db4d0afb776577@mail.gmail.com>
	<D1EBC1B5-2ADD-4972-8198-9EBE4AFA7249@sil.org>
	<a6e8c1d0706230803o614fea36lc49bfad2cc8f1e8f@mail.gmail.com>
	<77F18E62-FBE6-46BF-A33D-6A8EB540D7B3@sil.org>
	<a6e8c1d0706231053t39f5127bpc23980c68e1e43b3@mail.gmail.com>
	<18045.25372.382065.233299@zarniwoop.ms25.local>
Message-ID: <a6e8c1d0706231132q2708f1c2h3f8ef5bf90de3b7b@mail.gmail.com>

Hi Reinhard,

On 23/06/07, Reinhard Kotucha <reinhard.kotucha at web.de> wrote:
>   http://www.gust.org.pl/projects/e-foundry/latin-modern

Great! Thanks for that.

I'm now stuck at the stage where I do not know the name of the font to
specify. I have been googling a good half hour now! Is there a way to
find this out. As much as I love 'strings', its not ideal :P


-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From jonathan_kew at sil.org  Sat Jun 23 22:46:30 2007
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Sat, 23 Jun 2007 21:46:30 +0100
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <a6e8c1d0706231132q2708f1c2h3f8ef5bf90de3b7b@mail.gmail.com>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
	<40B9B15F-D567-4096-8D03-96BAA162129E@sil.org>
	<a6e8c1d0706161714h5534a99dm2b0dfdb740c8b796@mail.gmail.com>
	<188451E5-242D-4A1B-8F9A-DFD1020BF2FF@sil.org>
	<a6e8c1d0706221638n777dc100k55db4d0afb776577@mail.gmail.com>
	<D1EBC1B5-2ADD-4972-8198-9EBE4AFA7249@sil.org>
	<a6e8c1d0706230803o614fea36lc49bfad2cc8f1e8f@mail.gmail.com>
	<77F18E62-FBE6-46BF-A33D-6A8EB540D7B3@sil.org>
	<a6e8c1d0706231053t39f5127bpc23980c68e1e43b3@mail.gmail.com>
	<18045.25372.382065.233299@zarniwoop.ms25.local>
	<a6e8c1d0706231132q2708f1c2h3f8ef5bf90de3b7b@mail.gmail.com>
Message-ID: <90455BA2-B797-490C-8CEA-B507BEB1DE96@sil.org>


On 23 Jun 2007, at 7:32 pm, Edd Barrett wrote:

> Hi Reinhard,
>
> On 23/06/07, Reinhard Kotucha <reinhard.kotucha at web.de> wrote:
>>   http://www.gust.org.pl/projects/e-foundry/latin-modern
>
> Great! Thanks for that.
>
> I'm now stuck at the stage where I do not know the name of the font to
> specify. I have been googling a good half hour now! Is there a way to
> find this out. As much as I love 'strings', its not ideal :P

If you've installed the font where fontconfig (and therefore xetex)  
can find it, you can run fc-list and look at the output (filter  
through sort, grep, etc to find what you want).

Or if you're running a desktop such as Gnome, it probably has a way  
to examine fonts; on my Ubuntu machine I can right-click a font file  
and "open with GNOME Font Viewer". Or you can look at the font menu/ 
dialog of a typical GUI application; xetex will generally recognize  
the same names.

Or you can try guessing! :-) In many cases, an "obvious" font name  
will work. Unfortunately, that's not true with Latin Modern, though,  
because of how the multitude of faces are organized. (A topic for  
further discussion, some time in the future.)

JK


From vext01 at gmail.com  Sat Jun 23 23:10:45 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Sat, 23 Jun 2007 22:10:45 +0100
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <a6e8c1d0706231132q2708f1c2h3f8ef5bf90de3b7b@mail.gmail.com>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
	<a6e8c1d0706161714h5534a99dm2b0dfdb740c8b796@mail.gmail.com>
	<188451E5-242D-4A1B-8F9A-DFD1020BF2FF@sil.org>
	<a6e8c1d0706221638n777dc100k55db4d0afb776577@mail.gmail.com>
	<D1EBC1B5-2ADD-4972-8198-9EBE4AFA7249@sil.org>
	<a6e8c1d0706230803o614fea36lc49bfad2cc8f1e8f@mail.gmail.com>
	<77F18E62-FBE6-46BF-A33D-6A8EB540D7B3@sil.org>
	<a6e8c1d0706231053t39f5127bpc23980c68e1e43b3@mail.gmail.com>
	<18045.25372.382065.233299@zarniwoop.ms25.local>
	<a6e8c1d0706231132q2708f1c2h3f8ef5bf90de3b7b@mail.gmail.com>
Message-ID: <a6e8c1d0706231410t68939a5dy706c1c423ec76d43@mail.gmail.com>

On 23/06/07, Edd Barrett <vext01 at gmail.com> wrote:
> I'm now stuck at the stage where I do not know the name of the font to
> specify. I have been googling a good half hour now! Is there a way to
> find this out. As much as I love 'strings', its not ideal :P

I have found a piece of software called fontforge which is capable of
telling me the name to use.

The OpenType font suggested by Reinhard works fine (but I don't think
it has unicode characters included).

I also tryed downloading and using several fonts from the web and
using them with varying success. It could be due to the quality of the
font itself however, rather than the binaries.

For example SquareTextTryout (http://fontfreak.com/fonts-s3.htm) does
this on i386:

[...snip]
(/usr/local/share/texmf-dist/tex/latex/xkeyval/xkeyval.sty
(/usr/local/share/texmf-dist/tex/latex/xkeyval/xkeyval.tex
(/usr/local/share/texmf-dist/tex/latex/xkeyval/keyval.tex)))
(/usr/local/share/texmf-dist/tex/latex/lm/lmodern.sty)
(/usr/local/share/texmf-dist/tex/latex/base/fontenc.sty
(/usr/local/share/texmf-dist/tex/xelatex/euenc/eu1enc.def)
(/usr/local/share/texmf-dist/tex/xelatex/euenc/lm/eu1lmr.fd))
fontspec.cfg loaded.
(/usr/local/share/texmf-dist/tex/xelatex/fontspec/fontspec.cfg))
(/usr/local/share/texmf-dist/tex/xelatex/xunicode/xunicode.sty) (./test.aux)
Underfull \hbox (badness 10000) in paragraph at lines 6--9

[1] (./test.aux) )
(see the transcript file for additional information)

** NOTICE: This document contains an embedded font with licensing
restrictions **
Segmentation fault (core dumped)
Output written on test.pdf (1 page).
Transcript written on test.log.

Do you get a segfault if you use this font on your system.

When it does work it is beautiful though. Very impressed.

-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From jonathan_kew at sil.org  Sun Jun 24 00:03:04 2007
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Sat, 23 Jun 2007 23:03:04 +0100
Subject: [tex-live] xelatex on OpenBSD sparc64 - Bus Error
In-Reply-To: <a6e8c1d0706231410t68939a5dy706c1c423ec76d43@mail.gmail.com>
References: <a6e8c1d0706160330r32390bbau2a1cc7bad0153c20@mail.gmail.com>
	<a6e8c1d0706161714h5534a99dm2b0dfdb740c8b796@mail.gmail.com>
	<188451E5-242D-4A1B-8F9A-DFD1020BF2FF@sil.org>
	<a6e8c1d0706221638n777dc100k55db4d0afb776577@mail.gmail.com>
	<D1EBC1B5-2ADD-4972-8198-9EBE4AFA7249@sil.org>
	<a6e8c1d0706230803o614fea36lc49bfad2cc8f1e8f@mail.gmail.com>
	<77F18E62-FBE6-46BF-A33D-6A8EB540D7B3@sil.org>
	<a6e8c1d0706231053t39f5127bpc23980c68e1e43b3@mail.gmail.com>
	<18045.25372.382065.233299@zarniwoop.ms25.local>
	<a6e8c1d0706231132q2708f1c2h3f8ef5bf90de3b7b@mail.gmail.com>
	<a6e8c1d0706231410t68939a5dy706c1c423ec76d43@mail.gmail.com>
Message-ID: <136E118F-041F-459E-8705-DAA1517F49C5@sil.org>

On 23 Jun 2007, at 10:10 pm, Edd Barrett wrote:

> I also tryed downloading and using several fonts from the web and
> using them with varying success. It could be due to the quality of the
> font itself however, rather than the binaries.
>
> For example SquareTextTryout (http://fontfreak.com/fonts-s3.htm) does
> this on i386:
> <snip>
> [1] (./test.aux) )
> (see the transcript file for additional information)
>
> ** NOTICE: This document contains an embedded font with licensing
> restrictions **
> Segmentation fault (core dumped)

BTW, this is actually the xdvipdfmx driver that's crashing, rather  
than xetex itself....

> Output written on test.pdf (1 page).
> Transcript written on test.log.

....which is why these lines still appeared. (xetex didn't notice  
that the driver crashed, as it had already sent all its output down  
the pipe.)

> Do you get a segfault if you use this font on your system.

I tried a small sample with this font on Mac OS X (PowerPC) and Linux  
(i386), and didn't get a segfault on either of these; the output  
looked OK (modulo the limited character set of the "tryout" font).

It may well be that the font is poor quality; that's true of many of  
the cheap or free TrueType fonts out there that were made with cheap  
or free tools. Apple's ftxvalidator utility does report several  
errors, though obviously the font is still able to work in many  
situations.

Another possibility is that xdvipdfmx has a bug that's leading to a  
crash with this font. (Well, even if the font is faulty, segfaulting  
is not a good response!) I'll try to investigate further, on another  
system or two. Does OpenBSD create a log/dump of some kind that shows  
a backtrace for the crash? Or can you run xdvipdfmx under gdb and  
generate one? To do this, you'd run "xelatex -no-pdf test", so it  
creates a file test.xdv on disk; then load xdvipdfmx under gdb, and  
run it with the command line "-E test.xdv".

JK


From mwicks at kettering.edu  Sun Jun 24 02:08:15 2007
From: mwicks at kettering.edu (Mark A. Wicks)
Date: Sat, 23 Jun 2007 20:08:15 -0400 (EDT)
Subject: [tex-live] Inclusion of large eps files with dvipdfm
In-Reply-To: <87d4zogxa0.fsf_-_@riesling.zuerich.kuesterei.ch>
References: <20070620064415.GA10586@jim.sh>
	<87ejk7yrwh.fsf@riesling.zuerich.kuesterei.ch>
	<20070620203028.GA25372@jim.sh>
	<87d4zogxa0.fsf_-_@riesling.zuerich.kuesterei.ch>
Message-ID: <Pine.NEB.4.64.0706231932490.17210@gaspra.kettering.edu>

On Fri, 22 Jun 2007, Frank K?ster wrote:

>>>> I tested Dan's suggestion: replacing -dEPSCrop in the config file with
>>>>
>>>>   -dDEVICEWIDTHPOINTS=500000 -dDEVICEHEIGHTPOINTS=500000
>>>>
>>>> solves the problem for me.

> What do you think?

That seems like a reasonable solution.

> I'm not sure whether we need even more "0"s, or whether this would again
> cause problems elsewhere (and be it only performance).
>

There are probably enough zeros.

On Fri, 22 June, 2007, Hartmut Henkel wrote:

> dvipdfmx works substantially different and much better than dvipdfm. One
> should try to check if all these problems persist in dvipdfmx, and if
> not suggest to use this instead of ancient dvipdfm. If gs works in
> standard eps/crop mode it should be just right.

Dvipdfm and dvipdfmx behave the same way in this regard.  The behavior is 
not a bug, but is intentional.  When I wrote the graphic inclusion code, I 
had one design goal:  Dvipdfm should behave the same way as dvips when run 
on the same DVI file.  In other words, dvipdfm uses the same 
interpretation of the coordinate system interpretation of what's in the 
DVI file is contrained by the dvips interpretation.  This constraint 
requires this behavior.  Changing the behavior so that it just works with 
the gs EPSCrop option has three implications:

1) A source code change to both dvipdfm(x)

2) A corresponding change to the (La)TeX graphics file, which must be 
distributed at the same time as the source code patch(es).

3) Incompatibility with dvips in certain situations.

>> | dvipdfm doesn't correctly handle an eps figure whose lower-left 
>> corner | is not at (0,0).  In some cases, the resulting figure appears 
>> in the | document, but is shifted.  In other cases, it doesn't appear 
>> at all. | Such figures are produced by lots of software, e.g. gnuplot.

> this is a definitive bug in dvipdfm, solved in dvipdfmx.

The statement that "dvipdfm doesn't correctly handle an eps figure whose 
lower-left corner is not at (0,0)" is not correct. This is exactly the 
same issue as the Debian bug report and it's intended behavior to maintain 
compatibility with dvips (not a bug).  It's not a matter of dvipdfm (or 
dvipdfmx, the behavior is the same) not handling the bb correctly, it's a 
matter of dvipdfm(x) being presented with a different bounding box than 
(La)TeX saw when the source was processed.  In effect, the EPSCrop option 
*changes* the bounding box to have a corner at (0,0).

I don't know why you say it's "solved" in dvipdfmx. Both dvipdfm and 
dvipdfmx have the same behavior on files converted by an external program. 
If the behavior appears different on a particular installation, it's 
because the dvipdfmx config file isn't using the EPSCrop option.

I agree with Akira that many of these problems can be avoided by 
converting the EPS file to PDF *first* and not trying to do it on the fly. 
That way you are working with the coordinates in the PDF file and not the 
coordinates in the EPS file.  The on-the-fly conversion was largely 
intended for compatability with old DVI files.  New work should not be 
done this way.  This is largely a user education issue.  I probably should 
write a FAQ explaining why the problem exists and what a "good" work-flow 
should be.

Mark

______________________________________________________________________

   Mark A. Wicks                                mwicks at kettering.edu
   Professor and Head
   ECE Department, Kettering University         Voice: (810) 762-7992
   1700 West Third Ave, Flint, MI 48504-4898    Fax:   (810) 762-9830

From preining at logic.at  Sun Jun 24 10:02:30 2007
From: preining at logic.at (Norbert Preining)
Date: Sun, 24 Jun 2007 10:02:30 +0200
Subject: [tex-live] new tl infrastructure
In-Reply-To: <200706230059.l5N0xrx10870@f7.net>
References: <200706230059.l5N0xrx10870@f7.net>
Message-ID: <20070624080230.GC18602@gamma.logic.tuwien.ac.at>

Hi all,

On Fre, 22 Jun 2007, Karl Berry wrote:
> There's a Perl API for the database that most of the new scripts, and a
> shell API for a few odds and ends.  These are documented in the
> Master/tlpkg/doc/ directory, along with some specs for the associated

I would like to add that 
- if you need some extensions or more specific stuff
- explanations because the specification is not to complete
- etc
please contact me here or via personal mail.

The modules and scripts will get pod documentation slowly. The scripts
should already have -help and -man cmd line options.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
CLACKAVOID (n.)
Technical BBC term for a page of dialogue from Blake's Seven.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Sun Jun 24 10:11:06 2007
From: preining at logic.at (Norbert Preining)
Date: Sun, 24 Jun 2007 10:11:06 +0200
Subject: [tex-live] New Debian TeX packages for Etch
In-Reply-To: <20070622113435.GA22976@gamma.logic.tuwien.ac.at>
References: <20070621071637.GE29155@gamma.logic.tuwien.ac.at>
	<20070622113435.GA22976@gamma.logic.tuwien.ac.at>
Message-ID: <20070624081106.GE18602@gamma.logic.tuwien.ac.at>

On Fre, 22 Jun 2007, Norbert Preining wrote:
> > Binaries of texlive-bin 2007-12 are currently only for i386, I hope to
> > get powerpc binaries soon. If there is need for amd64 I can do them,
> > too.
> 
> Now for i386 and amd64.
> 
> For powerpc still 2007-11.

And now also for powerpc we are at 12, thanks again to Thomas A.
Schmitz.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
KURDISTAN (n.)
Hard stare given by a husband to his wife when he notices a sharp
increase in the number of times he answers the phone to be told,
'Sorry, wrong number.'
			--- Douglas Adams, The Meaning of Liff

From gnwiii at gmail.com  Sun Jun 24 13:21:41 2007
From: gnwiii at gmail.com (George N. White III)
Date: Sun, 24 Jun 2007 08:21:41 -0300
Subject: [tex-live] Inclusion of large eps files with dvipdfm
In-Reply-To: <Pine.NEB.4.64.0706231932490.17210@gaspra.kettering.edu>
References: <20070620064415.GA10586@jim.sh>
	<87ejk7yrwh.fsf@riesling.zuerich.kuesterei.ch>
	<20070620203028.GA25372@jim.sh>
	<87d4zogxa0.fsf_-_@riesling.zuerich.kuesterei.ch>
	<Pine.NEB.4.64.0706231932490.17210@gaspra.kettering.edu>
Message-ID: <22af238a0706240421q55c337a3p280a6eee2c867fe5@mail.gmail.com>

On 6/23/07, Mark A. Wicks <mwicks at kettering.edu> wrote:

> I agree with Akira that many of these problems can be avoided by
> converting the EPS file to PDF *first* and not trying to do it on the fly.
> That way you are working with the coordinates in the PDF file and not the
> coordinates in the EPS file.  The on-the-fly conversion was largely
> intended for compatability with old DVI files.  New work should not be
> done this way.  This is largely a user education issue.  I probably should
> write a FAQ explaining why the problem exists and what a "good" work-flow
> should be.

Such a  FAQ is badly needed, but there are some questions that users
don't ask due to mis-understandings or lack of knowledge, so maybe
a Rarely Asked Questions (that should be asked more often) or RAQ
is more appropriate.

It is a bit surprising how many people cling to EPS workflows.   In my
experience, many problems with figures are due to files that have .eps
extensions but don't meet the definition of EPS.  It is hard for the typical
user to tell the difference, but users need to understand that even
dubious .eps files make useful PDF files.

RAQ 1) Why does converting figures in .eps files to PDF often work,
e.g., with dvipdfm[x] when using the figures directly fails?

A1.  Not all .eps files meet the definition of EPS, even if the files can
be viewed/printed.  With PDF format, the view/print test is much more
likely to ensure that a figure can be placed in a tex document without
problems.

A2.  For compatibility with dvips, there are some limits on the BoundingBox
entries in valid EPS files that can be used with dvipfm[x] -- the entries
should be nonegative.  If EPScrop is used, they should not exceed the
values DEVICEWIDTHPOINTS and DEVICEHEIGHTPOINTS in the config file.

-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From vext01 at gmail.com  Sun Jun 24 15:11:55 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Sun, 24 Jun 2007 14:11:55 +0100
Subject: [tex-live] new tl infrastructure
In-Reply-To: <20070624080230.GC18602@gamma.logic.tuwien.ac.at>
References: <200706230059.l5N0xrx10870@f7.net>
	<20070624080230.GC18602@gamma.logic.tuwien.ac.at>
Message-ID: <a6e8c1d0706240611l1f4cc117qd00be3881ae150bd@mail.gmail.com>

Hi,

On 24/06/07, Norbert Preining <preining at logic.at> wrote:
> Hi all,
>
> On Fre, 22 Jun 2007, Karl Berry wrote:
> > There's a Perl API for the database that most of the new scripts, and a
> > shell API for a few odds and ends.  These are documented in the
> > Master/tlpkg/doc/ directory, along with some specs for the associated
>
> I would like to add that
> - if you need some extensions or more specific stuff
> - explanations because the specification is not to complete
> - etc
> please contact me here or via personal mail.

You may have such functionality already. I would like to see
functionality that will help me generate my distfiles for the 2008
release of the OpenBSD port. For 2007 I wrote a tool myself (MFsplit I
called it), which can do things like:

scheme-full minus scheme-tetex.tpm, but only runfiles and srcfiles.

And it would copy only what you specify into a folder.

The sources of that tool and the documentation for how i used it
(porting guide) is here:

http://students.dec.bmth.ac.uk/ebarrett/texlive/

Hope you see this as useful.

-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From vext01 at gmail.com  Sun Jun 24 15:26:12 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Sun, 24 Jun 2007 14:26:12 +0100
Subject: [tex-live] xdvipdfm seg faults when using some TTF fonts (Was
	xelatex on OpenBSD sparc64 - Bus Error)
Message-ID: <a6e8c1d0706240626k100f630bhb50539c1eac8cdf9@mail.gmail.com>

Hi,

I thought we should change the title of the thread in order to make it
easily searched for in the future. For those who were not following,
the conversation starts here:
http://tug.org/pipermail/tex-live/2007-June/014116.html

Anyway, here is gdb says about the whole ordeal:

$ gdb xdvipdfmx
GNU gdb 6.3
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i386-unknown-openbsd4.1"...
(gdb) run -E test.xdv
Starting program: /usr/local/bin/xdvipdfmx -E test.xdv
test.xdv -> test.pdf
[1
** NOTICE: This document contains an embedded font with licensing
restrictions **
]
Program received signal SIGSEGV, Segmentation fault.
0x1c04dbc6 in create_ToUnicode_cmap4 (map=0x89d0c6a0,
cmap_name=0x82acd8c0 "/home/edd/.fonts/SQUATT__.TTF,000-UTF16",
cmap_add=0x0,
    used_glyphs=0x82c5c000 "\200", post=0x82acdf80)
    at /usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/xdvipdfmx/src/tt_cmap.c:956
956             gid = (map->glyphIndexArray[j+d] +
(gdb) bt
#0  0x1c04dbc6 in create_ToUnicode_cmap4 (map=0x89d0c6a0,
cmap_name=0x82acd8c0 "/home/edd/.fonts/SQUATT__.TTF,000-UTF16",
    cmap_add=0x0, used_glyphs=0x82c5c000 "\200", post=0x82acdf80)
    at /usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/xdvipdfmx/src/tt_cmap.c:956
#1  0x1c04e06e in otf_create_ToUnicode_stream (font_name=0x868b28c0
"\004", ttc_index=0, face=0x83ae2000,
    used_glyphs=0x82c5c000 "\200")
    at /usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/xdvipdfmx/src/tt_cmap.c:1145
#2  0x1c0560ea in add_ToUnicode (font=0x88da5800)
    at /usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/xdvipdfmx/src/type0.c:209
#3  0x1c0567bc in Type0Font_cache_close ()
    at /usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/xdvipdfmx/src/type0.c:549
#4  0x1c032fb0 in pdf_close_fonts ()
    at /usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/xdvipdfmx/src/pdffont.c:533
#5  0x1c02d75e in pdf_close_document ()
    at /usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/xdvipdfmx/src/pdfdoc.c:2108
#6  0x1c01ca90 in main (argc=0, argv=0x1)
    at /usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/xdvipdfmx/src/dvipdfmx.c:887

-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From jonathan_kew at sil.org  Sun Jun 24 15:58:10 2007
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Sun, 24 Jun 2007 14:58:10 +0100
Subject: [tex-live] xdvipdfm seg faults when using some TTF fonts (Was
	xelatex on OpenBSD sparc64 - Bus Error)
In-Reply-To: <a6e8c1d0706240626k100f630bhb50539c1eac8cdf9@mail.gmail.com>
References: <a6e8c1d0706240626k100f630bhb50539c1eac8cdf9@mail.gmail.com>
Message-ID: <90992E39-138D-4666-AC41-866D11C4055B@sil.org>

Hi Edd,

On 24 Jun 2007, at 2:26 pm, Edd Barrett wrote:

> Hi,
>
> I thought we should change the title of the thread in order to make it
> easily searched for in the future. For those who were not following,
> the conversation starts here:
> http://tug.org/pipermail/tex-live/2007-June/014116.html
>
> Anyway, here is gdb says about the whole ordeal:
> [snip]

OK; that's helpful in knowing which part of the process to look at.

One more thing -- could you please send me (off-list is fine) the  
actual "test.tex" associated with the crash? I'd like to try running  
the exact same text as you're using, rather than an arbitrary sample  
of my own.

Thanks,

JK


From vext01 at gmail.com  Sun Jun 24 17:48:47 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Sun, 24 Jun 2007 16:48:47 +0100
Subject: [tex-live] xdvipdfm seg faults when using some TTF fonts (Was
	xelatex on OpenBSD sparc64 - Bus Error)
In-Reply-To: <D49B7E0B-FADF-49C4-92D0-E3B173805A83@sil.org>
References: <a6e8c1d0706240626k100f630bhb50539c1eac8cdf9@mail.gmail.com>
	<90992E39-138D-4666-AC41-866D11C4055B@sil.org>
	<a6e8c1d0706240704k196cdafeh345f27d0956cb855@mail.gmail.com>
	<D49B7E0B-FADF-49C4-92D0-E3B173805A83@sil.org>
Message-ID: <a6e8c1d0706240848x8a1c776q1d584432f5df9454@mail.gmail.com>

Hi Jonathan,

Here is the xetex --version output on my i386:

XeTeX 3.141592-0.996-patch1 (Web2C 7.5.6)
kpathsea version 3.5.6
Copyright 2007 SIL International.
Kpathsea is copyright 2007 Karl Berry and Olaf Weber.
There is NO warranty.  Redistribution of this software is
covered by the terms of both the XeTeX copyright and
the Lesser GNU General Public License.
For more information about these matters, see the file
named COPYING and the XeTeX source.
Primary author of XeTeX: Jonathan Kew.
Kpathsea written by Karl Berry, Olaf Weber, and others.

Compiled with ICU version 3.4 [with modifications for XeTeX]
Compiled with zlib version 1.2.3; using 1.2.3
Compiled with FreeType2 version 2.2.1; using 2.2.1
Compiled with fontconfig version 2.4.2; using 2.4.2
Compiled with libpng version 1.2.18; using 1.2.18
Compiled with xpdf version 3.01


On 24/06/07, Jonathan Kew <jonathan_kew at sil.org> wrote:
> And one more thing: you have both i386 and sparc64 machines
> available, right? Does this test crash on both, or only on one of the
> architectures? Are the OS and library versions equivalent on both?

Here is the sparc64 --version output:
$ xetex --version
XeTeX 3.141592-0.996-patch1 (Web2C 7.5.6)
kpathsea version 3.5.6
Copyright 2007 SIL International.
Kpathsea is copyright 2007 Karl Berry and Olaf Weber.
There is NO warranty.  Redistribution of this software is
covered by the terms of both the XeTeX copyright and
the Lesser GNU General Public License.
For more information about these matters, see the file
named COPYING and the XeTeX source.
Primary author of XeTeX: Jonathan Kew.
Kpathsea written by Karl Berry, Olaf Weber, and others.

Compiled with ICU version 3.4 [with modifications for XeTeX]
Compiled with zlib version 1.2.3; using 1.2.3
Compiled with FreeType2 version 2.2.1; using 2.2.1
Compiled with fontconfig version 2.4.2; using 2.4.2
Compiled with libpng version 1.2.16; using 1.2.16
Compiled with xpdf version 3.01

libpng is newer on my i386 box. This will just be because it is
running a newer developer snapshot of OpenBSD. Im guessing you were
looking for a vanilla version of icu, which would royally screw it all
up. Alas, I was informed :P

Unfortunatley, the same test makes a different error on sparc64. On
the initial run I get:
[...snip]
(/usr/local/share/texmf-dist/tex/xelatex/euenc/eu1enc.def)
(/usr/local/share/texmf-dist/tex/xelatex/euenc/lm/eu1lmr.fd))
fontspec.cfg loaded.
(/usr/local/share/texmf-dist/tex/xelatex/fontspec/fontspec.cfg))
No file test.aux.
Bus error (core dumped)

If I run again (now that there is an .aux file in cwd):
[...snip]
(/usr/local/share/texmf-dist/tex/xelatex/euenc/eu1enc.def)
(/usr/local/share/texmf-dist/tex/xelatex/euenc/lm/eu1lmr.fd))
fontspec.cfg loaded.
(/usr/local/share/texmf-dist/tex/xelatex/fontspec/fontspec.cfg))
(./test.aux)Bus error (core dumped)


I will rebuild on sparc64 with debug symbols. If you could let me know
which binary that is that has crashed I will gdb it later.

I don't know if this might help, but I might aswell suggest it anyway.
OpenBSD has very strict buffer checks, which may be why the segfault
atleast cannot be repro'd on your linux(?) system. This probably can't
apply to the bus error's though. Thoughts?

-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From dak at gnu.org  Sun Jun 24 18:09:40 2007
From: dak at gnu.org (David Kastrup)
Date: Sun, 24 Jun 2007 18:09:40 +0200
Subject: [tex-live] Bug#425085: texlive-doc-en: catalogue entries
	with	dangling links
In-Reply-To: <86lkedomc5.fsf@lola.quinscape.zz> (David Kastrup's message of
	"Thu\, 21 Jun 2007 08\:25\:46 +0200")
References: <200706202136.l5KLam609226@f7.net>
	<86lkedomc5.fsf@lola.quinscape.zz>
Message-ID: <854pkxe3ln.fsf@lola.goethe.zz>

A non-text attachment was scrubbed...
Name: fixtexlive.el
Type: application/emacs-lisp
Size: 4160 bytes
Desc: not available
Url : http://tug.org/pipermail/tex-live/attachments/20070624/bb729e9d/attachment.bin 

From jonathan_kew at sil.org  Sun Jun 24 19:54:45 2007
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Sun, 24 Jun 2007 18:54:45 +0100
Subject: [tex-live] xdvipdfm seg faults when using some TTF fonts (Was
	xelatex on OpenBSD sparc64 - Bus Error)
In-Reply-To: <a6e8c1d0706240848x8a1c776q1d584432f5df9454@mail.gmail.com>
References: <a6e8c1d0706240626k100f630bhb50539c1eac8cdf9@mail.gmail.com>
	<90992E39-138D-4666-AC41-866D11C4055B@sil.org>
	<a6e8c1d0706240704k196cdafeh345f27d0956cb855@mail.gmail.com>
	<D49B7E0B-FADF-49C4-92D0-E3B173805A83@sil.org>
	<a6e8c1d0706240848x8a1c776q1d584432f5df9454@mail.gmail.com>
Message-ID: <3BFC9C87-E102-45EA-97BC-E3183E494F12@sil.org>

On 24 Jun 2007, at 4:48 pm, Edd Barrett wrote:

> Here is the sparc64 --version output:
> $ xetex --version
> XeTeX 3.141592-0.996-patch1 (Web2C 7.5.6)
> kpathsea version 3.5.6
> Copyright 2007 SIL International.
> Kpathsea is copyright 2007 Karl Berry and Olaf Weber.
> There is NO warranty.  Redistribution of this software is
> covered by the terms of both the XeTeX copyright and
> the Lesser GNU General Public License.
> For more information about these matters, see the file
> named COPYING and the XeTeX source.
> Primary author of XeTeX: Jonathan Kew.
> Kpathsea written by Karl Berry, Olaf Weber, and others.
>
> Compiled with ICU version 3.4 [with modifications for XeTeX]
> Compiled with zlib version 1.2.3; using 1.2.3
> Compiled with FreeType2 version 2.2.1; using 2.2.1
> Compiled with fontconfig version 2.4.2; using 2.4.2
> Compiled with libpng version 1.2.16; using 1.2.16
> Compiled with xpdf version 3.01
>
> libpng is newer on my i386 box. This will just be because it is
> running a newer developer snapshot of OpenBSD. Im guessing you were
> looking for a vanilla version of icu, which would royally screw it all
> up. Alas, I was informed :P

That's why the TeX Live configure script doesn't offer a --with- 
system-icu option; you'd have to work extra hard to mess it up in  
that way! No, I was mostly wondering about the FreeType versions, but  
you seem to have the same as I do.

> Unfortunatley, the same test makes a different error on sparc64. On
> the initial run I get:
> [...snip]
> (/usr/local/share/texmf-dist/tex/xelatex/euenc/eu1enc.def)
> (/usr/local/share/texmf-dist/tex/xelatex/euenc/lm/eu1lmr.fd))
> fontspec.cfg loaded.
> (/usr/local/share/texmf-dist/tex/xelatex/fontspec/fontspec.cfg))
> No file test.aux.
> Bus error (core dumped)
>
> If I run again (now that there is an .aux file in cwd):
> [...snip]
> (/usr/local/share/texmf-dist/tex/xelatex/euenc/eu1enc.def)
> (/usr/local/share/texmf-dist/tex/xelatex/euenc/lm/eu1lmr.fd))
> fontspec.cfg loaded.
> (/usr/local/share/texmf-dist/tex/xelatex/fontspec/fontspec.cfg))
> (./test.aux)Bus error (core dumped)
>
>
> I will rebuild on sparc64 with debug symbols. If you could let me know
> which binary that is that has crashed I will gdb it later.

Hard to be sure from this output, but you can easily determine which  
is failing by running "xelatex -no-pdf" followed by "xdvipdfmx -E"  
separately.

> I don't know if this might help, but I might aswell suggest it anyway.
> OpenBSD has very strict buffer checks, which may be why the segfault
> atleast cannot be repro'd on your linux(?) system. This probably can't
> apply to the bus error's though. Thoughts?

It could easily be the same underlying bug on both systems, just  
manifesting differently because of the different architectures.

I think I can have access to an OpenBSD machine (i386) at the office  
in a couple of days, so will try to investigate there, if I can't  
reproduce/solve the failure before then.

JK


From vext01 at gmail.com  Sun Jun 24 21:20:09 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Sun, 24 Jun 2007 20:20:09 +0100
Subject: [tex-live] xdvipdfm seg faults when using some TTF fonts (Was
	xelatex on OpenBSD sparc64 - Bus Error)
In-Reply-To: <3BFC9C87-E102-45EA-97BC-E3183E494F12@sil.org>
References: <a6e8c1d0706240626k100f630bhb50539c1eac8cdf9@mail.gmail.com>
	<90992E39-138D-4666-AC41-866D11C4055B@sil.org>
	<a6e8c1d0706240704k196cdafeh345f27d0956cb855@mail.gmail.com>
	<D49B7E0B-FADF-49C4-92D0-E3B173805A83@sil.org>
	<a6e8c1d0706240848x8a1c776q1d584432f5df9454@mail.gmail.com>
	<3BFC9C87-E102-45EA-97BC-E3183E494F12@sil.org>
Message-ID: <a6e8c1d0706241220r6ec82eacma60a35e276b6b343@mail.gmail.com>

On 24/06/07, Jonathan Kew <jonathan_kew at sil.org> wrote:
> I think I can have access to an OpenBSD machine (i386) at the office
> in a couple of days, so will try to investigate there, if I can't
> reproduce/solve the failure before then.

Im not sure if it will be the same as I have heavily patched my
sources and I am running developer snapshots. Give it a go anyhow.

My sparc64 debug build is almost done. Backtrace soon.

-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From vext01 at gmail.com  Sun Jun 24 22:03:04 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Sun, 24 Jun 2007 21:03:04 +0100
Subject: [tex-live] xdvipdfm seg faults when using some TTF fonts (Was
	xelatex on OpenBSD sparc64 - Bus Error)
In-Reply-To: <a6e8c1d0706241220r6ec82eacma60a35e276b6b343@mail.gmail.com>
References: <a6e8c1d0706240626k100f630bhb50539c1eac8cdf9@mail.gmail.com>
	<90992E39-138D-4666-AC41-866D11C4055B@sil.org>
	<a6e8c1d0706240704k196cdafeh345f27d0956cb855@mail.gmail.com>
	<D49B7E0B-FADF-49C4-92D0-E3B173805A83@sil.org>
	<a6e8c1d0706240848x8a1c776q1d584432f5df9454@mail.gmail.com>
	<3BFC9C87-E102-45EA-97BC-E3183E494F12@sil.org>
	<a6e8c1d0706241220r6ec82eacma60a35e276b6b343@mail.gmail.com>
Message-ID: <a6e8c1d0706241303s379170b1j192e844af77a4dcb@mail.gmail.com>

As promised:

On 24/06/07, Edd Barrett <vext01 at gmail.com> wrote:
> My sparc64 debug build is almost done. Backtrace soon.

GNU gdb 6.3
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "sparc64-unknown-openbsd4.1"...
(gdb) run -no-pdf test
Starting program: /usr/local/bin/xelatex -no-pdf test
This is XeTeX, Version 3.141592-2.2-0.996-patch1 (Web2C 7.5.6)
entering extended mode
(./test.tex
LaTeX2e <2005/12/01>
Babel <v3.8h> and hyphenation patterns for english, usenglishmax, dumylang, noh
yphenation, arabic, basque, bulgarian, coptic, welsh, czech, slovak, german, ng
erman, danish, esperanto, spanish, catalan, galician, estonian, farsi, finnish,
 french, greek, monogreek, ancientgreek, croatian, hungarian, interlingua, ibyc
us, indonesian, icelandic, italian, latin, mongolian, dutch, norsk, polish, por
tuguese, pinyin, romanian, russian, slovenian, uppersorbian, serbian, swedish,
turkish, ukenglish, ukrainian, loaded.
(/usr/local/share/texmf-dist/tex/latex/base/article.cls
Document Class: article 2005/09/16 v1.4f Standard LaTeX document class
(/usr/local/share/texmf-dist/tex/latex/base/size11.clo))
(/usr/local/share/texmf-dist/tex/xelatex/fontspec/fontspec.sty
(/usr/local/share/texmf-dist/tex/generic/ifxetex/ifxetex.sty)
(/usr/local/share/texmf-dist/tex/latex/tools/calc.sty)
(/usr/local/share/texmf-dist/tex/latex/xkeyval/xkeyval.sty
(/usr/local/share/texmf-dist/tex/latex/xkeyval/xkeyval.tex
(/usr/local/share/texmf-dist/tex/latex/xkeyval/keyval.tex)))
(/usr/local/share/texmf-dist/tex/latex/lm/lmodern.sty)
(/usr/local/share/texmf-dist/tex/latex/base/fontenc.sty
(/usr/local/share/texmf-dist/tex/xelatex/euenc/eu1enc.def)
(/usr/local/share/texmf-dist/tex/xelatex/euenc/lm/eu1lmr.fd))
fontspec.cfg loaded.
(/usr/local/share/texmf-dist/tex/xelatex/fontspec/fontspec.cfg))
No file test.aux.

Program received signal SIGBUS, Bus error.
icu_3_4::KernTable::process(icu_3_4::LEGlyphStorage&)
(this=0xfffffffffffdc030, storage=@0x4d631400)
    at /usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/libs/icu-xetex/layout/KernTable.cpp:155
155           if (key > SWAPL(tp->key)) {
Current language:  auto; currently c++
(gdb) bt
#0  icu_3_4::KernTable::process(icu_3_4::LEGlyphStorage&)
(this=0xfffffffffffdc030, storage=@0x4d631400)
    at /usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/libs/icu-xetex/layout/KernTable.cpp:155
#1  0x000000000020c9f4 in
icu_3_4::LayoutEngine::adjustGlyphPositions(unsigned short const*,
int, int, signed char, icu_3_4::L               EGlyphStorage&,
icu_3_4::LEErrorCode&) (this=0x4d631300, chars=0x50eb55c8, offset=4,
count=4, glyphStorage=@0x4d631400,
    success=@0xfffffffffffdc20c)
    at /usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/libs/icu-xetex/layout/LayoutEngine.cpp:307
#2  0x000000000020cf70 in icu_3_4::LayoutEngine::layoutChars(unsigned
short const*, int, int, int, signed char, float, float,
icu_3_4::LEErrorCode&) (this=0x4d631300, chars=0x50eb55c8, offset=0,
count=4, max=4, rightToLeft=0 '\0', x=0, y=0,
    success=@0xfffffffffffdc20c)
    at /usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/libs/icu-xetex/layout/LayoutEngine.cpp:445
#3  0x0000000000180588 in layoutChars ()
#4  0x000000000016e35c in measure_native_node (pNode=0x50eb5598,
use_glyph_metrics=1)
    at /usr/ports/print/texlive/base/w-texlive_base-2007/texlive_base-2007/texk/web2c/xetexdir/XeTeX_ext.c:1597
#5  0x0000000000165bc0 in maincontrol () at xetex2.c:6920
#6  0x0000000000115e6c in mainbody () at xetexini.c:4965
#7  0x00000000001688bc in main (ac=0, av=0xc00) at xetexextra.c:349

-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From jonathan_kew at sil.org  Sun Jun 24 23:18:02 2007
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Sun, 24 Jun 2007 22:18:02 +0100
Subject: [tex-live] xdvipdfm seg faults when using some TTF fonts (Was
	xelatex on OpenBSD sparc64 - Bus Error)
In-Reply-To: <a6e8c1d0706241303s379170b1j192e844af77a4dcb@mail.gmail.com>
References: <a6e8c1d0706240626k100f630bhb50539c1eac8cdf9@mail.gmail.com>
	<90992E39-138D-4666-AC41-866D11C4055B@sil.org>
	<a6e8c1d0706240704k196cdafeh345f27d0956cb855@mail.gmail.com>
	<D49B7E0B-FADF-49C4-92D0-E3B173805A83@sil.org>
	<a6e8c1d0706240848x8a1c776q1d584432f5df9454@mail.gmail.com>
	<3BFC9C87-E102-45EA-97BC-E3183E494F12@sil.org>
	<a6e8c1d0706241220r6ec82eacma60a35e276b6b343@mail.gmail.com>
	<a6e8c1d0706241303s379170b1j192e844af77a4dcb@mail.gmail.com>
Message-ID: <A12AF0CB-74A4-44E9-8F30-64C3DACEB50C@sil.org>

On 24 Jun 2007, at 9:03 pm, Edd Barrett wrote:

> (gdb) run -no-pdf test
[snip]
> Program received signal SIGBUS, Bus error.
> icu_3_4::KernTable::process(icu_3_4::LEGlyphStorage&)
> (this=0xfffffffffffdc030, storage=@0x4d631400)
>    at /usr/ports/print/texlive/base/w-texlive_base-2007/ 
> texlive_base-2007/libs/icu-xetex/layout/KernTable.cpp:155
> 155           if (key > SWAPL(tp->key)) {
> Current language:  auto; currently c++

Aha - interesting that this occurs where ICU is processing the kern  
table. One of the things Apple's validator tool reports about the  
font is a kern table error:

> $ ftxvalidator ~/Library/Fonts/SQUATT__.TTF
>
> ====== /Users/jonathan/Library/Fonts/SQUATT__.TTF  
> ============================================
> ------ sfnt: , sfnt ID: -12914 ------
>     Error: 'cmap':  Format 4 idRangeOffset[40] == 0x0000FFFF an  
> unexpeced value for the last segment
>     Error: bad entry count in cmap format 6(index 257)
>     Error: 'cmap':  Format 4 idRangeOffset[40] == 0x0000FFFF an  
> unexpeced value for the last segment
>     Error: missing sentinal kerning pair
>     Error: Postscript name (index 6) has non-ASCII character(s)
>     Error: Postscript name (index 20) has non-ASCII character(s)
>     Error: multiple postscript names: 3
>     Error: OS/2: bad embedding flags (0x0001)
>     Error:  name index isn't unique for glyph # 16 (=2 matches that  
> of glyph # 2)

That may well explain this crash. The TrueType/OpenType spec requires  
a special terminator value at the end of a list of kern pairs, and if  
this is missing it could easily lead to a program looking at invalid  
data or memory locations.

I dumped the 'kern' table and compared the data with Microsoft's spec  
at http://www.microsoft.com/typography/otspec/kern.htm, and it looks  
to me like the binary search header fields for the kern pairs has bad  
data:

Beginning of 'kern' table:
	0000 version
	0001 nTables

	0000 subtable version
	1F82 length
	0001 coverage (horizontal kerning)

	053E nPairs (1342 decimal)
	003C searchRange .... should be 1800 = 0400 * 6
	000A entrySelector .. correct
	1F38 rangeShift  .... should be 0774 = (053E - 0400) * 6
	
	0004 000F 0056   1st kern pair
	0004 0012 FF68   2nd kern pair
	0004 0066 FFC7   etc

Unless I'm misinterpreting things, the data here looks badly broken,  
and that probably explains this crash. But it doesn't explain the  
xdvipdfmx crash, as that program doesn't read the 'kern' data.

Of course, even if the font is broken, it would be nice if xetex  
didn't crash. I'll see if there's an easy way to make the ICU library  
more robust here.

JK


From hartmut_henkel at gmx.de  Sun Jun 24 23:37:38 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sun, 24 Jun 2007 23:37:38 +0200 (CEST)
Subject: [tex-live] Inclusion of large eps files with dvipdfm
In-Reply-To: <Pine.NEB.4.64.0706231932490.17210@gaspra.kettering.edu>
References: <20070620064415.GA10586@jim.sh>
	<87ejk7yrwh.fsf@riesling.zuerich.kuesterei.ch>
	<20070620203028.GA25372@jim.sh>
	<87d4zogxa0.fsf_-_@riesling.zuerich.kuesterei.ch>
	<Pine.NEB.4.64.0706231932490.17210@gaspra.kettering.edu>
Message-ID: <alpine.DEB.0.99.0706242241290.5195@hahepc1.hahe>

On Sat, 23 Jun 2007, Mark A. Wicks wrote:
> On Fri, 22 Jun 2007, Frank K?ster wrote:
>> namely that an image which was very large (multiples of a0) wasn't
>> included properly.  Back then, we decided to use a suggestion which
>> Heiko Oberdiek made, namely "-dEPSCrop".  However, this introduced a
>> new problem, described in
>> http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=428014:
>>
>> ,----
>> | dvipdfm doesn't correctly handle an eps figure whose lower-left corner
>> | is not at (0,0).  In some cases, the resulting figure appears in the
>> | document, but is shifted.  In other cases, it doesn't appear at all.
>> | Such figures are produced by lots of software, e.g. gnuplot.
>> `----

> On Fri, 22 June, 2007, Hartmut Henkel wrote:
> > dvipdfmx works substantially different and much better than dvipdfm.
> > One should try to check if all these problems persist in dvipdfmx,

(anybody tried?)

> > and if not suggest to use this instead of ancient dvipdfm. If gs
> > works in standard eps/crop mode it should be just right.
>
> Dvipdfm and dvipdfmx behave the same way in this regard.  The behavior
> is not a bug, but is intentional.

well, if you look 1. at dvipdfm, it e. g. changes an incoming
%%BoundingBox: -1 -1 151 151 from an eps file created by MPost to
/BBox[0 0 2384 3370]. And nothing is shifted inside the /XObject stream.
Example attached. Anything negative in the embedded image might be
cropped by the viewer application. People do have problems with this.

Now please look 2. at dvipdfmx. It properly takes the %%BoundingBox: -1
-1 151 151 and emits it correctly into the PDF file as /BBox[-1 -1 151
151]. Nice.

Now look 3. at dvips. It properly puts the incoming %%BoundingBox: -1 -1
151 151 into the ps file as -1 @llx -1 @lly 151 @urx 151 @ury. Correct.

> When I wrote the graphic inclusion code, I had one design goal:
> Dvipdfm should behave the same way as dvips when run on the same DVI
> file.

Seems in its current version 0.13.2 it doesn't any more, as you see. But
maybe it's just my setup here.

> In other words, dvipdfm uses the same interpretation of the coordinate
> system interpretation of what's in the DVI file is contrained by the
> dvips interpretation.  This constraint requires this behavior.
> Changing the behavior so that it just works with the gs EPSCrop option
> has three implications:
>
> 1) A source code change to both dvipdfm(x)
>
> 2) A corresponding change to the (La)TeX graphics file, which must be
> distributed at the same time as the source code patch(es).
>
> 3) Incompatibility with dvips in certain situations.

seems currently dvipdfm is incompatible to dvips, as it crops negative
stuff off, at least here.

> > > dvipdfm doesn't correctly handle an eps figure whose lower-left
> > > corner is not at (0,0).  In some cases, the resulting figure
> > > appears in the document, but is shifted.  In other cases, it
> > > doesn't appear at all. Such figures are produced by lots of
> > > software, e.g. gnuplot.
>
> > this is a definitive bug in dvipdfm, solved in dvipdfmx.

please see the examples above. Dvipdfmx produces an embedded PDF image
whose negative parts are not cropped as in dvipdfm. The problematic
effect with xx-dvipdfm.pdf can be seen e. g. with xpdf when continuously
zooming in and out.

> I don't know why you say it's "solved" in dvipdfmx. Both dvipdfm and
> dvipdfmx have the same behavior on files converted by an external
> program. If the behavior appears different on a particular
> installation, it's because the dvipdfmx config file isn't using the
> EPSCrop option.

well, i thought this non-negative /BBox problem in dvipdfm is the cause
of the evil discussed, maybe i have misunderstood something, or my
installation is different, then sorry.

BTW, i'm no fan of having an incredibly large BBox with 50000 or so
numbers in some PDF file. The size of the original PDF image is well
known, but afaics it gets replaced by a fake in the embedding process,
which in fact is information loss: It annihilates the purpose of the
/BBox for /XObject. And there is the -sDEVICE=bbox mode in gs that would
tell the right bounding box. If you ever want to extract some embedded
graphics from a PDF file created by dvipdfm(x), you would have to deal
with this grossly oversized BBox, which has nothing to do with the
original, and recover a reasonable value by some (auto-)cropping. IMHO
it would be much nicer if the original BBox from the embedded eps/pdf
would go into the PDF file unchanged. But i see that there is no easy
solution with gs other than having two gs runs in sequence. I actually
had misunderstood the EPSCrop gs flag (i'm sorry, should have checked),
as i thought it would work also in pdfwrite mode, so to produce some
proper kind of "embedded" PDF, but it doesn't. Against having two gs
runs seems to be currently that the quoting mechanism in dvipdfmx.conf
does allow only single lines and no shell scripts; else maybe one could
cook up a real BBox manufacturing in the 1st gs run and tell these
numbers to gs for the 2nd run as parameters for conversion into pdf.

Regards, Hartmut
-------------- next part --------------
A non-text attachment was scrubbed...
Name: x-dvipdfm.tgz
Type: application/x-gtar
Size: 29427 bytes
Desc: x-dvipdfm.tgz
Url : http://tug.org/pipermail/tex-live/attachments/20070624/ff70104a/attachment-0001.gtar 

From martin at oneiros.de  Sun Jun 24 23:55:55 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sun, 24 Jun 2007 23:55:55 +0200
Subject: [tex-live] Inclusion of large eps files with dvipdfm
In-Reply-To: <alpine.DEB.0.99.0706242241290.5195@hahepc1.hahe>
References: <20070620064415.GA10586@jim.sh>
	<87ejk7yrwh.fsf@riesling.zuerich.kuesterei.ch>
	<20070620203028.GA25372@jim.sh>
	<87d4zogxa0.fsf_-_@riesling.zuerich.kuesterei.ch>
	<Pine.NEB.4.64.0706231932490.17210@gaspra.kettering.edu>
	<alpine.DEB.0.99.0706242241290.5195@hahepc1.hahe>
Message-ID: <68c491a60706241455u6ada3abdu17f46ecfd88f376b@mail.gmail.com>

2007/6/24, Hartmut Henkel <hartmut_henkel at gmx.de>:
> BTW, i'm no fan of having an incredibly large BBox with 50000 or so
> numbers in some PDF file. The size of the original PDF image

50000 is well out of range. See the implementation limits of Adobe
Reader in Appendix C of the PDF Ref.: PDF is essentially limited to
200x200 inches (14400 x 14400 bp). This can be extended in PDF 1.6,
but that's difficult. So you are generating PDFs which many PDF
consuming applications will reject.

Best
   Martin

From vext01 at gmail.com  Mon Jun 25 00:30:07 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Sun, 24 Jun 2007 23:30:07 +0100
Subject: [tex-live] xdvipdfm seg faults when using some TTF fonts (Was
	xelatex on OpenBSD sparc64 - Bus Error)
In-Reply-To: <A12AF0CB-74A4-44E9-8F30-64C3DACEB50C@sil.org>
References: <a6e8c1d0706240626k100f630bhb50539c1eac8cdf9@mail.gmail.com>
	<90992E39-138D-4666-AC41-866D11C4055B@sil.org>
	<a6e8c1d0706240704k196cdafeh345f27d0956cb855@mail.gmail.com>
	<D49B7E0B-FADF-49C4-92D0-E3B173805A83@sil.org>
	<a6e8c1d0706240848x8a1c776q1d584432f5df9454@mail.gmail.com>
	<3BFC9C87-E102-45EA-97BC-E3183E494F12@sil.org>
	<a6e8c1d0706241220r6ec82eacma60a35e276b6b343@mail.gmail.com>
	<a6e8c1d0706241303s379170b1j192e844af77a4dcb@mail.gmail.com>
	<A12AF0CB-74A4-44E9-8F30-64C3DACEB50C@sil.org>
Message-ID: <a6e8c1d0706241530v3a89eab1p3ccb942942d7f9ea@mail.gmail.com>

Hi again,

On 24/06/07, Jonathan Kew <jonathan_kew at sil.org> wrote:
> Unless I'm misinterpreting things, the data here looks badly broken,
> and that probably explains this crash.

Wow..Yikes, I know nothing of this "kerning" of which you speak.
Please excuse my lack of knowledge in this field. I am in fact quite
new to TeX (I have used it for university assignments for about 2
years). So it's a bad font?

> But it doesn't explain the
> xdvipdfmx crash, as that program doesn't read the 'kern' data.

This was the i386 crash. Do you need any more information regarding
this / whats next?

>
> Of course, even if the font is broken, it would be nice if xetex
> didn't crash. I'll see if there's an easy way to make the ICU library
> more robust here.

I agree. That would be great.

Thanks for your continued help.

-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From jonathan_kew at sil.org  Mon Jun 25 00:36:06 2007
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Sun, 24 Jun 2007 23:36:06 +0100
Subject: [tex-live] xdvipdfm seg faults when using some TTF fonts (Was
	xelatex on OpenBSD sparc64 - Bus Error)
In-Reply-To: <a6e8c1d0706241530v3a89eab1p3ccb942942d7f9ea@mail.gmail.com>
References: <a6e8c1d0706240626k100f630bhb50539c1eac8cdf9@mail.gmail.com>
	<90992E39-138D-4666-AC41-866D11C4055B@sil.org>
	<a6e8c1d0706240704k196cdafeh345f27d0956cb855@mail.gmail.com>
	<D49B7E0B-FADF-49C4-92D0-E3B173805A83@sil.org>
	<a6e8c1d0706240848x8a1c776q1d584432f5df9454@mail.gmail.com>
	<3BFC9C87-E102-45EA-97BC-E3183E494F12@sil.org>
	<a6e8c1d0706241220r6ec82eacma60a35e276b6b343@mail.gmail.com>
	<a6e8c1d0706241303s379170b1j192e844af77a4dcb@mail.gmail.com>
	<A12AF0CB-74A4-44E9-8F30-64C3DACEB50C@sil.org>
	<a6e8c1d0706241530v3a89eab1p3ccb942942d7f9ea@mail.gmail.com>
Message-ID: <E08FB1A6-5805-46D7-B855-A54AB4755B87@sil.org>

On 24 Jun 2007, at 11:30 pm, Edd Barrett wrote:

> Hi again,
>
> On 24/06/07, Jonathan Kew <jonathan_kew at sil.org> wrote:
>> Unless I'm misinterpreting things, the data here looks badly broken,
>> and that probably explains this crash.
>
> Wow..Yikes, I know nothing of this "kerning" of which you speak.
> Please excuse my lack of knowledge in this field. I am in fact quite
> new to TeX (I have used it for university assignments for about 2
> years). So it's a bad font?

It is, but it still shouldn't crash xetex. I've just been looking at  
the ICU code and have concluded that there is indeed a bug here: it  
reads longword values from addresses that might not be 4-byte  
aligned, and this will bus-error on some platforms (of which sparc is  
one).

So I'll give you a patch for this (tomorrow), and also report it  
upstream to the ICU project. That should prevent the crash, though  
the font is still incorrect (and so the kerning probably won't be  
applied as intended).

>
>> But it doesn't explain the
>> xdvipdfmx crash, as that program doesn't read the 'kern' data.
>
> This was the i386 crash. Do you need any more information regarding
> this / whats next?

I'll move on to that shortly....

JK




From kakuto at fsci.fuk.kindai.ac.jp  Mon Jun 25 03:02:37 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Mon, 25 Jun 2007 10:02:37 +0900
Subject: [tex-live] Inclusion of large eps files with dvipdfm
In-Reply-To: Your message of "Sun, 24 Jun 2007 23:37:38 +0200 (CEST)"
References: <alpine.DEB.0.99.0706242241290.5195@hahepc1.hahe>
Message-ID: <200706250102.l5P12f3p018767@jupiter.fsci.fuk.kindai.ac.jp>

Hi Hartmut,

> please see the examples above. Dvipdfmx produces an embedded PDF image
> whose negative parts are not cropped as in dvipdfm. The problematic
> effect with xx-dvipdfm.pdf can be seen e. g. with xpdf when continuously
> zooming in and out.

This is because dvipdfmx didn't use Ghostscript and dvipdfm did use
Ghostscript to include xx-1.eps. If you apply my previous patch
for mpost.c for dvipdfm, dvipdfm also includes MetaPost-made xx-1.eps
directly and negative values are correctly treated.

Conversely, if you erase the line
%%Creator: MetaPost 1.000
in xx-1.eps, dvipdfmx also uses Ghostscript and produces
an incorrect pdf.

Best regards,
Akira

From nr at eecs.harvard.edu  Sun Jun 24 16:34:45 2007
From: nr at eecs.harvard.edu (Norman Ramsey)
Date: Sun, 24 Jun 2007 10:34:45 -0400
Subject: [tex-live] texlive-publishers:
	/usr/share/texmf-texlive/bibtex/bib/acmconf/pubform.bib	is
	ill-formatted
Message-ID: <20070624143445.12586.55244.reportbug@localhost.localdomain>

Package: texlive-publishers
Version: 2005.dfsg.3-1
Severity: normal


Line 39 of /usr/share/texmf-texlive/bibtex/bib/acmconf/pubform.bib 
contains an @ sign that does not begin a proper bibtex entry.
Contrary to popular belief, the % does not introduce a comment into
a bibtex file.  In fact there are no comments in bibtex files -- only
ignored characters between entries.  

This file breaks software that crawls my system looking for all bibtex entries.

The following patch works around the problem:

--- /usr/share/texmf-texlive/bibtex/bib/acmconf/pubform.bib~    2000-05-19 04:59:01.000000000 -0400
+++ /usr/share/texmf-texlive/bibtex/bib/acmconf/pubform.bib     2007-06-24 10:32:47.000000000 -0400
@@ -36,7 +36,7 @@
 %%   Minus         \-     Point         \.     Solidus       \/
 %%   Colon         \:     Semicolon     \;     Less than     \<
 %%   Equals        \=     Greater than  \>     Question mark \?
-%%   Commercial at \@     Left bracket  \[     Backslash     \\
+%%   Commercial at \<at>  Left bracket  \[     Backslash     \\
 %%   Right bracket \]     Circumflex    \^     Underscore    \_
 %%   Grave accent  \`     Left brace    \{     Vertical bar  \|
 %%   Right brace   \}     Tilde         \~}



-- Package-specific info:
If you report an error when running one of the TeX-related binaries 
(latex, pdftex, metafont,...), or if the bug is related to bad or wrong
output, please include a MINIMAL example input file that produces the
error in your report. Don't forget to also include minimal examples of
other files that are needed, e.g. bibtex databases. Often it also helps
to include the logfile. Please, never send included pictures!

If your example file isn't short or produces more than one page of
output (except when multiple pages are needed to show the problem),
you can probably minimize it further. Instructions on how to do that
can be found at

http://www.latex-einfuehrung.de/mini-en.html (english)

or 

http://www.latex-einfuehrung.de/mini.html (german)

##################################
minimal input file


##################################
other files

######################################
 List of ls-R files

-rw-rw-r-- 1 nr nr 1195 Dec 16  2006 /home/nr/texmf/ls-R
-rw-r--r-- 1 root root 1192 Jun 24 09:41 /var/lib/texmf/ls-R
lrwxrwxrwx 1 root root 29 Jun 22 12:58 /usr/share/texmf/ls-R -> /var/lib/texmf/ls-R-TEXMFMAIN
lrwxrwxrwx 1 root root 27 May 19 21:43 /usr/share/texmf-texlive/ls-R -> /var/lib/texmf/ls-R-TEXLIVE
lrwxrwxrwx 1 root root 27 May 19 21:43 /usr/share/texmf-texlive/ls-R -> /var/lib/texmf/ls-R-TEXLIVE
######################################
 Config files
lrwxrwxrwx 1 root root 20 Jun 22 12:58 /usr/share/texmf/web2c/texmf.cnf -> /etc/texmf/texmf.cnf
-rw-r--r-- 1 root root 9300 Jun 22 12:58 /var/lib/texmf/web2c/fmtutil.cnf
-rw-r--r-- 1 root root 17392 Jun 22 12:58 /var/lib/texmf/web2c/updmap.cfg
-rw-r--r-- 1 root root 10363 Jun 22 12:58 /var/lib/texmf/tex/generic/config/language.dat

-- System Information:
Debian Release: lenny/sid
  APT prefers testing
  APT policy: (500, 'testing'), (500, 'stable'), (50, 'unstable')
Architecture: i386 (i686)

Kernel: Linux 2.6.18-4-k7 (SMP w/1 CPU core)
Locale: LANG=C, LC_CTYPE=C (charmap=ANSI_X3.4-1968)
Shell: /bin/sh linked to /bin/bash

Versions of packages texlive-publishers depends on:
ii  texlive-common             2005.dfsg.3-1 TeX Live: Base component
ii  texlive-latex-base         2005.dfsg.3-1 TeX Live: Basic LaTeX packages

texlive-publishers recommends no packages.

Versions of packages tex-common depends on:
ii  debconf                       1.5.13     Debian configuration management sy
ii  ucf                           3.001      Update Configuration File: preserv

Versions of packages texlive-publishers is related to:
pn  tetex-base                    <none>     (no description available)
pn  tetex-bin                     <none>     (no description available)
pn  tetex-extra                   <none>     (no description available)

-- debconf information:
  tex-common/check_texmf_wrong:
  tex-common/check_texmf_missing:
  tex-common/singleuser: false

From preining at logic.at  Mon Jun 25 10:10:06 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 25 Jun 2007 10:10:06 +0200
Subject: [tex-live] new tl infrastructure
In-Reply-To: <a6e8c1d0706240611l1f4cc117qd00be3881ae150bd@mail.gmail.com>
References: <200706230059.l5N0xrx10870@f7.net>
	<20070624080230.GC18602@gamma.logic.tuwien.ac.at>
	<a6e8c1d0706240611l1f4cc117qd00be3881ae150bd@mail.gmail.com>
Message-ID: <20070625081006.GA2956@gamma.logic.tuwien.ac.at>

Hi Edd,

On Son, 24 Jun 2007, Edd Barrett wrote:
> You may have such functionality already. I would like to see
> functionality that will help me generate my distfiles for the 2008
> release of the OpenBSD port. For 2007 I wrote a tool myself (MFsplit I
> called it), which can do things like:
> 
> scheme-full minus scheme-tetex.tpm, but only runfiles and srcfiles.

Nup, something does not exist. We will probably have to write something
similar for the (new) perl based installer. But until that time you have
to rewrite it yourself.

Btw, since you seem to be fluent in Python, could you write some access
library to the TeX Live Package Database for python? Since our
management scripts are based on perl the perl libraries are more
extensive then necessary. For python we would need only the equivalent
of the TLPDB.pm and TLPOBJ.pm (afais) ?!  ;-)

> Hope you see this as useful.

I don't understand python at all .... so no help for me.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
WHASSET (n.)
A business car in you wallet belonging to someone whom you have no
recollection of meeting.
			--- Douglas Adams, The Meaning of Liff

From vext01 at gmail.com  Mon Jun 25 13:13:50 2007
From: vext01 at gmail.com (Edd Barrett)
Date: Mon, 25 Jun 2007 12:13:50 +0100
Subject: [tex-live] new tl infrastructure
In-Reply-To: <20070625081006.GA2956@gamma.logic.tuwien.ac.at>
References: <200706230059.l5N0xrx10870@f7.net>
	<20070624080230.GC18602@gamma.logic.tuwien.ac.at>
	<a6e8c1d0706240611l1f4cc117qd00be3881ae150bd@mail.gmail.com>
	<20070625081006.GA2956@gamma.logic.tuwien.ac.at>
Message-ID: <a6e8c1d0706250413m65c7d952yc12cc22e8009c841@mail.gmail.com>

Hi,

On 25/06/07, Norbert Preining <preining at logic.at> wrote:
> Btw, since you seem to be fluent in Python,

:P I learnt it whilst porting texlive. I started out in perl but got
infuriated with "hashrefs" and so moved on to something new. I'm sure
any python developer would spit at my code :)


-- 
Best Regards

Edd

---------------------------------------------------
http://students.dec.bournemouth.ac.uk/ebarrett

From daleif at imf.au.dk  Mon Jun 25 13:35:04 2007
From: daleif at imf.au.dk (Lars Madsen)
Date: Mon, 25 Jun 2007 13:35:04 +0200 (CEST)
Subject: [tex-live] new tl infrastructure
In-Reply-To: <a6e8c1d0706250413m65c7d952yc12cc22e8009c841@mail.gmail.com>
References: <200706230059.l5N0xrx10870@f7.net>
	<20070624080230.GC18602@gamma.logic.tuwien.ac.at>
	<a6e8c1d0706240611l1f4cc117qd00be3881ae150bd@mail.gmail.com>
	<20070625081006.GA2956@gamma.logic.tuwien.ac.at>
	<a6e8c1d0706250413m65c7d952yc12cc22e8009c841@mail.gmail.com>
Message-ID: <Pine.LNX.4.64.0706251333420.4343@gloin.imf.au.dk>

Edd Barrett :

> Hi,
>
> On 25/06/07, Norbert Preining <preining at logic.at> wrote:
>> Btw, since you seem to be fluent in Python,
>
> :P I learnt it whilst porting texlive. I started out in perl but got
> infuriated with "hashrefs" and so moved on to something new. I'm sure
> any python developer would spit at my code :)
>
>

what's wrong with hashrefs, they are nice to work with ;-)

BTW: is there any more information about this new infrastructure, I'm 
quite interested in how it works and the philosophy behind it.


/daleif

From preining at logic.at  Mon Jun 25 13:49:28 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 25 Jun 2007 13:49:28 +0200
Subject: [tex-live] new tl infrastructure
In-Reply-To: <Pine.LNX.4.64.0706251333420.4343@gloin.imf.au.dk>
References: <200706230059.l5N0xrx10870@f7.net>
	<20070624080230.GC18602@gamma.logic.tuwien.ac.at>
	<a6e8c1d0706240611l1f4cc117qd00be3881ae150bd@mail.gmail.com>
	<20070625081006.GA2956@gamma.logic.tuwien.ac.at>
	<a6e8c1d0706250413m65c7d952yc12cc22e8009c841@mail.gmail.com>
	<Pine.LNX.4.64.0706251333420.4343@gloin.imf.au.dk>
Message-ID: <20070625114928.GC28275@gamma.logic.tuwien.ac.at>

On Mon, 25 Jun 2007, Lars Madsen wrote:
> BTW: is there any more information about this new infrastructure, I'm 
> quite interested in how it works and the philosophy behind it.

Yes, it was in the announcement of Karl. Some documentation is in
	Master/tlpkg/doc/
(see http://www.tug.org/svn/texlive/trunk/Master/tlpkg/doc/) and some of
the scripts have pod documentation.

If you have questions, ask here or me.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
MALIBU (n.)
The height by which the top of a wave exceeds the height to which you
have rolled up your trousers.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Mon Jun 25 14:39:19 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 25 Jun 2007 14:39:19 +0200
Subject: [tex-live] pubform.bib is ill-formatted
Message-ID: <20070625123919.GG28275@gamma.logic.tuwien.ac.at>

Dear J?rgen,

it seems that the pubform.bib as shipped on CTAN (or created from the
files there) is not well-formed. The problem is the CharacterTable in
the header which contains a @ which in turn is interpreted by bibtex as
an entry (bibtex does not know about comments, only about ignored
chars).

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
ULLOCK (n.)
The correct name for either of the deaf Scandinavian tourists who are
standing two abreast in front of you on the escalator.
			--- Douglas Adams, The Meaning of Liff
-------------- next part --------------
An embedded message was scrubbed...
From: Norman Ramsey <nr at eecs.harvard.edu>
Subject: [tex-live] texlive-publishers:
	/usr/share/texmf-texlive/bibtex/bib/acmconf/pubform.bib	is
	ill-formatted
Date: Sun, 24 Jun 2007 10:34:45 -0400
Size: 7824
Url: http://tug.org/pipermail/tex-live/attachments/20070625/ecabca9d/attachment.mht 

From frank at kuesterei.ch  Mon Jun 25 14:57:03 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Mon, 25 Jun 2007 14:57:03 +0200
Subject: [tex-live] texdoc in luatex (was:  texdoc under windows)
In-Reply-To: <466D0A32.3000506@elvenkind.com> (Taco Hoekwater's message of
	"Mon\, 11 Jun 2007 10\:39\:14 +0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
Message-ID: <877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>

Taco Hoekwater <taco at elvenkind.com> wrote:

>>> Frank K?ster wrote:
>>>> b) kpse* in luatex?
[...]
>> Probably I would need the analog of kpsewhich --var-value, too:
>
> Ok, that will be included in the next snapshot (sometime this week)

Thanks, I've started working on "texdoclua".  I've not actually used
kpse.var_value yet, because I ran into a different problem:  if it needs
to unzip, texdoc creates a temporary directory and puts the file there.  

But I couldn't find a way to create a directory in lua.  There's
io.tempfile, but that gives always a file, and os.tempname, but then I'm
missing a function os.createdir.  Can anyone help me?

The current state is attached, the -l and -h options already work.

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

-------------- next part --------------
#!/usr/bin/luatexlua
--[[ Written in lua by Frank K?ster (2007) based on the shell script by
Thomas Esser, David Aspinall, and Simon Wilkinson.
Public domain.]]

progname = 'texdoc';
usage = '      Usage: ' .. progname ..' [-h|--help] name\
	 -h|--help\t\t Show this help\
         -l|--list\t\t List matching files, do not start a viewer.';


if not arg[1] then
   print (usage);
   return
end

if string.match (arg[1],'^-') then
   if string.match (arg[1],'-h') or string.match (arg[1],'--help') then
      print (usage);
   elseif string.match (arg[1],'-l') or string.match (arg[1],'--list') then
      mode = 'list';
      iter_arg_start = 1;
   end
else
   mode = 'view';
   iter_arg_start = 0;
end

--[[ function definitions ]]
function list_iter (t)
      local i = 0
      local n = table.getn(t)
      return function ()
               i = i + 1
               if i <= n then return t[i] end
             end
   end
function list_iter_arg (t,start)
      local i = start
      local n = table.getn(t)
      return function ()
               i = i + 1
               if i <= n then return t[i] end
             end
   end

--[[ initialize kpathsea ]]
kpse.set_program_name("texdoc")

-- [[ initialize some variables ]]
verbose = false;
nodoc_pattern = [=[\.tfm|\.afm|\.enc|\.pfb|\.pfa|\.pfm|\.vf|\.fd|\.ttf|\.htf|\.mf|\.otf|\.[[:digit:]]*pk]=];
extlist = {'.dvi', '.dvi.gz', '.dvi.bz2', '.pdf', '.pdf.gz', '.pdf.bz2', '.ps', '.ps.gz', '.ps.bz2', '.txt', '.txt.gz', '.txt.bz2', '.html'};
texdoc_unzip = { gz = "gzip -d -c", bz2 = "bzip2 -d -c"};

found = false;

for docname in list_iter_arg (arg,iter_arg_start) do
   for ext in list_iter(extlist) do
      filename = kpse.find_file(docname .. ext , "TeX system documentation")
      if  filename then
	 found = "true"

	 if string.match (mode, 'list') then
	    print(filename);
	 else
	    -- mode should be view
	    dirname  = string.match(filename,'.*/');
	    -- is unzipping needed?
	    zipext = string.match(ext,'%..*%.(.*)');
	    if zipext then
	       unzip_command = texdoc_unzip[zipext];
	       viewext = string.match(ext,'%.(.*)%..*$');
	       print ("found " .. viewext);

	       -- uncompress only once per file, in case it is given more
	       -- than once
	       -- TODO: to be done

	       tmpdir = os.tmpname;
	       

	    else
	       print "unzipped";
	    end

	 end
      end
   end      
end



From taco at elvenkind.com  Mon Jun 25 15:18:08 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 25 Jun 2007 15:18:08 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
References: <466ACF98.8090603@gmx.net>	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>	<18027.8235.396400.342647@zarniwoop.ms25.local>	<20070609220059.GO834@gamma.logic.tuwien.ac.at>	<18027.9656.741195.13867@zarniwoop.ms25.local>	<466BB0AF.9070606@elvenkind.com>	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>	<466BF9EF.507@elvenkind.com>	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
Message-ID: <467FC090.7070700@elvenkind.com>



Frank K?ster wrote:
> Taco Hoekwater <taco at elvenkind.com> wrote:
> 
>>>> Frank K?ster wrote:
>>>>> b) kpse* in luatex?
> [...]
>>> Probably I would need the analog of kpsewhich --var-value, too:
>> Ok, that will be included in the next snapshot (sometime this week)
> 
> Thanks, I've started working on "texdoclua".  I've not actually used
> kpse.var_value yet, because I ran into a different problem:  if it needs
> to unzip, texdoc creates a temporary directory and puts the file there.  
> 
> But I couldn't find a way to create a directory in lua.  There's
> io.tempfile, but that gives always a file, and os.tempname, but then I'm
> missing a function os.createdir.  Can anyone help me?

LuaFileSystem (from the kepler project) is included, and it has an
lfs.mkdir function.  See
   http://www.keplerproject.org/luafilesystem/manual.html
for some other useful functions.

Cheers, taco


From preining at logic.at  Mon Jun 25 15:23:12 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 25 Jun 2007 15:23:12 +0200
Subject: [tex-live] texdoc in luatex (was:  texdoc under windows)
In-Reply-To: <877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
References: <22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
Message-ID: <20070625132312.GU28275@gamma.logic.tuwien.ac.at>

Hi Frank!

On Mon, 25 Jun 2007, Frank K?ster wrote:
> [Taco wrote]
> > Ok, that will be included in the next snapshot (sometime this week)

Will be in Debian/unstable soon.

> Thanks, I've started working on "texdoclua".  I've not actually used

Nice, it is running and finding documents. Wow Frank!

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
KENT (adj.)
Politely determined not to help despite a violent urge to the
contrary. Kent expressions are seen on the faces of people who are
good at something watching someone else who can't do it at all.
			--- Douglas Adams, The Meaning of Liff

From frank at kuesterei.ch  Mon Jun 25 15:50:34 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Mon, 25 Jun 2007 15:50:34 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <467FC090.7070700@elvenkind.com> (Taco Hoekwater's message of
	"Mon\, 25 Jun 2007 15\:18\:08 +0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<467FC090.7070700@elvenkind.com>
Message-ID: <87sl8gb0t1.fsf@riesling.zuerich.kuesterei.ch>

Taco Hoekwater <taco at elvenkind.com> wrote:

> Frank K?ster wrote:
>> Taco Hoekwater <taco at elvenkind.com> wrote:
>>
>>>>> Frank K?ster wrote:
>>>>>> b) kpse* in luatex?
>> [...]
>>>> Probably I would need the analog of kpsewhich --var-value, too:
>>> Ok, that will be included in the next snapshot (sometime this week)
>>
>> Thanks, I've started working on "texdoclua".  I've not actually used
>> kpse.var_value yet, because I ran into a different problem:  if it needs
>> to unzip, texdoc creates a temporary directory and puts the file
>> there.  
>>
>> But I couldn't find a way to create a directory in lua.  There's
>> io.tempfile, but that gives always a file, and os.tempname, but then I'm
>> missing a function os.createdir.  Can anyone help me?
>
> LuaFileSystem (from the kepler project) is included, 

Ah, I had just found that and was about to ask whether it's possible to
somehow include this in TeXLive.  If it's already in luaTeX, even
better.

It's in the "Lua changes" section of the luatex reference, but it would
deserve mentioning in "4 Lua libraries", maybe in an additional
subsection 4.1 (or 4.$last) "Lua libraries that are not TeX-related". 

Many thanks, Frank

-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From frank at kuesterei.ch  Mon Jun 25 16:08:07 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Mon, 25 Jun 2007 16:08:07 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <20070625132312.GU28275@gamma.logic.tuwien.ac.at> (Norbert
	Preining's message of "Mon\, 25 Jun 2007 15\:23\:12 +0200")
References: <22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<20070625132312.GU28275@gamma.logic.tuwien.ac.at>
Message-ID: <87lke8azzs.fsf@riesling.zuerich.kuesterei.ch>

Norbert Preining <preining at logic.at> wrote:

> Hi Frank!
>
> On Mon, 25 Jun 2007, Frank K?ster wrote:
>> [Taco wrote]
>> > Ok, that will be included in the next snapshot (sometime this week)
>
> Will be in Debian/unstable soon.

Tacos message was old, it's already in 

ii  luatex-snapshot               20070619-1~alocalbackport.1

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From preining at logic.at  Mon Jun 25 18:58:22 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 25 Jun 2007 18:58:22 +0200
Subject: [tex-live] new tl infrastructure
In-Reply-To: <200706230059.l5N0xrx10870@f7.net>
References: <200706230059.l5N0xrx10870@f7.net>
Message-ID: <20070625165822.GC25971@gamma.logic.tuwien.ac.at>

Hi all!

On Fre, 22 Jun 2007, Karl Berry wrote:
> There's a Perl API for the database that most of the new scripts, and a
> shell API for a few odds and ends.  These are documented in the
> Master/tlpkg/doc/ directory, along with some specs for the associated

I have started to document the Perl API *AND* the specification the POD
documentation of the respective modules. For now TLPSRC.pm has been
documented extensively. 

So a plea, if someone with a better english, or a better pod knowledge,
or both, can read over the pod documentation and fix stupid errors, pod
usage errors etc etc.

I will continue to write documentation for all the modules, because I
don't want to have the same situation as we had before with tpms ;-)

Thanks a lot for any comments and remarks and improvements etc. It is
my first time I am writing pods, so don't treat me too badly ;-)

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
`The best way to get a drink out of a Vogon is to stick
your finger down his throat...'
                 --- The Book, on one of the Vogon's social inadequacies.
                 --- Douglas Adams, The Hitchhikers Guide to the Galaxy

From frank at kuesterei.ch  Mon Jun 25 19:08:39 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Mon, 25 Jun 2007 19:08:39 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch> (Frank
	=?iso-8859-1?Q?K=FCster's?= message of "Mon\, 25 Jun 2007 14\:57\:03
	+0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
Message-ID: <87lke8t10o.fsf@riesling.zuerich.kuesterei.ch>

Frank K?ster <frank at kuesterei.ch> wrote:

> The current state is attached, the -l and -h options already work.

Attached is version 0.1.  It can be used to list and view files (and it
has a '-v|--version' option, but the regex search is not implemented.

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

-------------- next part --------------
#!/usr/bin/luatexlua
--[[ Written in lua by Frank K?ster (2007) based on the shell script by
Thomas Esser, David Aspinall, and Simon Wilkinson.
Public domain.]]

progname = 'texdoc';
version = '0.1';
usage = '      Usage: ' .. progname ..' [-h|--help] name\
	 -h|--help\t\t Show this help\
         -v|--version\t\t Print the version of the program\
         -l|--list\t\t List matching files, do not start a viewer.';


if not arg[1] then
   print (usage);
   return
end

if string.match (arg[1],'^-') then
   if string.match (arg[1],'-h') or string.match (arg[1],'--help') then
      print (usage);
      os.exit(0);
   elseif string.match (arg[1],'-v') or string.match (arg[1],'--version') then
      print (progname .. ' version: ' .. version );
      os.exit(0);
   elseif string.match (arg[1],'-l') or string.match (arg[1],'--list'   ) then
      mode = 'list';
      iter_arg_start = 1;
   end
else
   mode = 'view';
   iter_arg_start = 0;
end

--[[ function definitions ]]
function list_iter (t)
   local i = 0
   local n = table.getn(t)
   return function ()
	     i = i + 1
	     if i <= n then return t[i] end
	  end
end

function list_iter_arg (t,start)
   local i = start
   local n = table.getn(t)
   return function ()
	     i = i + 1
	     if i <= n then return t[i] end
	  end
end

local tmpdir;
function cleanup_tmpdir ()
   local is_successful
   local error_string
   if needs_cleanup then
      is_successful,error_string = lfs.rmdir (tmpdir);
      if is_successful then
	 print ("removing worked");
      else
	 print ("removing failed");
	 print (error_string);
      end
   end
end


--[[ initialize kpathsea ]]
kpse.set_program_name("texdoc")

-- [[ initialize some variables ]]
verbose = false;
nodoc_pattern = [=[\.tfm|\.afm|\.enc|\.pfb|\.pfa|\.pfm|\.vf|\.fd|\.ttf|\.htf|\.mf|\.otf|\.[[:digit:]]*pk]=];
extlist = {'.dvi', '.dvi.gz', '.dvi.bz2', '.pdf', '.pdf.gz', '.pdf.bz2', '.ps', '.ps.gz', '.ps.bz2', '.txt', '.txt.gz', '.txt.bz2', '.html'};
texdoc_unzip = { gz = "gzip -d -c ", bz2 = "bzip2 -d -c "};
texdoc_viewer = { 
   dvi  = '(xdvi %s ) &',
   html = '(see %s) &',
   pdf = '(see %s) &'
};
rmfile_command = 'rm -f ';
rmdir_command = 'rmdir ';

found = false;
-- needs_cleanup = false;

for docname in list_iter_arg (arg,iter_arg_start) do
   for ext in list_iter(extlist) do
      filename = kpse.find_file(docname .. ext , "TeX system documentation")
      if  filename then
	 found = "true"

	 if string.match (mode, 'list') then
	    print(filename);
	 else
	    -- mode should be view
	    dirname  = string.match(filename,'.*/');
	    -- is unzipping needed?
	    zipext = string.match(ext,'%..*%.(.*)');
	    if zipext then
	       unzip_command = texdoc_unzip[zipext];
	       viewext = string.match(ext,'%.(.*)%..*$');
	       basebame_pattern = '.*/(.*%.' .. viewext .. ')';
	       basename = string.match(filename,basebame_pattern);

	       -- uncompress only once per file, in case it is given more
	       -- than once
	       -- TODO: to be done

	       tmpdir = os.tmpname();
	       is_ok_tmpdir,error_string = lfs.mkdir(tmpdir)
	       if is_ok_tmpdir then
-- 		  needs_cleanup = true;
	       else
		  print(error_string);
		  os.exit(1);
	       end
	       
	       unzip_commandline = unzip_command .. filename .. " > " .. tmpdir .. "/" .. basename;
	       
	       if os.execute(unzip_commandline) then
		  filename = tmpdir .. "/" .. basename;
	       else
		  print("Error executing \n" .. unzip_commandline);
	       end
	       viewer_replacement = filename .. ';' .. rmfile_command .. filename .. ';' .. rmdir_command .. tmpdir;
	    else
	       viewer_replacement = filename;
	       viewext = string.match(ext,'%.(.*)$');
	    end
	    view_command = string.gsub(texdoc_viewer[viewext],'%%s',viewer_replacement)
	    view_result = os.execute(view_command);
	    if view_result then
	       do break end;
	    else
	       print("Error executing \n" .. view_command);
	    end
	 end
      end
   end      
end

-- cleanup_tmpdir();

From reinhard.kotucha at web.de  Mon Jun 25 19:06:12 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 25 Jun 2007 19:06:12 +0200
Subject: [tex-live] texdoc in luatex (was:  texdoc under windows)
In-Reply-To: <877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
Message-ID: <18047.62980.707394.324252@zarniwoop.ms25.local>

Frank K?ster writes:
 > The current state is attached, the -l and -h options already work.

Cool, and it's quite fast.

 > #!/usr/bin/luatexlua

It's better to write

 > #!/usr/bin/env texlua

instead.  "texlua" and "luatexlua" are equivalent if the symlinks to
luatex exist, but the latter sounds a bit clumsy.  So "texlua" is the
preferred name. 

For Windows I suggest to use the extension ".texlua" instead of ".lua"
in order to avoid conflicts with a "normal" Lua interpreter someone
might have installed already. 

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From preining at logic.at  Mon Jun 25 19:18:22 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 25 Jun 2007 19:18:22 +0200
Subject: [tex-live] texdoc in luatex (was:  texdoc under windows)
In-Reply-To: <18047.62980.707394.324252@zarniwoop.ms25.local>
References: <18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<18047.62980.707394.324252@zarniwoop.ms25.local>
Message-ID: <20070625171822.GA4320@gamma.logic.tuwien.ac.at>

On Mon, 25 Jun 2007, Reinhard Kotucha wrote:
>  > #!/usr/bin/env texlua
> 
> instead.  "texlua" and "luatexlua" are equivalent if the symlinks to

Is this the preferred name? In the debian packages I only put
	luatexlua
because at a time this was the only/preferred way. Are there now other
names accepted for the script only mode? 

For Frank: Which name do we want? Only texlua, or luatexlua and texlua?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
HEATON PUNCHARDON (n.) A violent argument which breaks out in the car
on the way home from a party between a couple who have had to be
polite to each other in company all evening.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Mon Jun 25 19:28:15 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 25 Jun 2007 19:28:15 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <20070625171822.GA4320@gamma.logic.tuwien.ac.at>
References: <18027.8235.396400.342647@zarniwoop.ms25.local>	<20070609220059.GO834@gamma.logic.tuwien.ac.at>	<18027.9656.741195.13867@zarniwoop.ms25.local>	<466BB0AF.9070606@elvenkind.com>	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>	<466BF9EF.507@elvenkind.com>	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>	<466D0A32.3000506@elvenkind.com>	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>	<18047.62980.707394.324252@zarniwoop.ms25.local>
	<20070625171822.GA4320@gamma.logic.tuwien.ac.at>
Message-ID: <467FFB2F.1060701@wxs.nl>

Norbert Preining wrote:
> On Mon, 25 Jun 2007, Reinhard Kotucha wrote:
>>  > #!/usr/bin/env texlua
>>
>> instead.  "texlua" and "luatexlua" are equivalent if the symlinks to
> 
> Is this the preferred name? In the debian packages I only put
> 	luatexlua
> because at a time this was the only/preferred way. Are there now other
> names accepted for the script only mode? 
> 
> For Frank: Which name do we want? Only texlua, or luatexlua and texlua?

texlua is now the formal name but luatexlua is still recognized

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Mon Jun 25 20:05:06 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 25 Jun 2007 20:05:06 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <20070625171822.GA4320@gamma.logic.tuwien.ac.at>
References: <18027.8235.396400.342647@zarniwoop.ms25.local>	<20070609220059.GO834@gamma.logic.tuwien.ac.at>	<18027.9656.741195.13867@zarniwoop.ms25.local>	<466BB0AF.9070606@elvenkind.com>	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>	<466BF9EF.507@elvenkind.com>	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>	<466D0A32.3000506@elvenkind.com>	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>	<18047.62980.707394.324252@zarniwoop.ms25.local>
	<20070625171822.GA4320@gamma.logic.tuwien.ac.at>
Message-ID: <468003D2.2020003@elvenkind.com>

Norbert Preining wrote:
> On Mon, 25 Jun 2007, Reinhard Kotucha wrote:
>>  > #!/usr/bin/env texlua
>>
>> instead.  "texlua" and "luatexlua" are equivalent if the symlinks to
> 
> Is this the preferred name? In the debian packages I only put
> 	luatexlua
> because at a time this was the only/preferred way. Are there now other
> names accepted for the script only mode? 
> 
> For Frank: Which name do we want? Only texlua, or luatexlua and texlua?

Reinhard argued with me that luatexlua was a bad name; and did so long
enough to win me over. The check now accepts both texlua and luatexlua,
but texlua is the preferred name.

Best wishes,
Taco

From taco at elvenkind.com  Mon Jun 25 20:11:04 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 25 Jun 2007 20:11:04 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87lke8t10o.fsf@riesling.zuerich.kuesterei.ch>
References: <466ACF98.8090603@gmx.net>	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>	<18027.8235.396400.342647@zarniwoop.ms25.local>	<20070609220059.GO834@gamma.logic.tuwien.ac.at>	<18027.9656.741195.13867@zarniwoop.ms25.local>	<466BB0AF.9070606@elvenkind.com>	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>	<466BF9EF.507@elvenkind.com>	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>	<466D0A32.3000506@elvenkind.com>	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87lke8t10o.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <46800538.1060000@elvenkind.com>

Frank K?ster wrote:
> Frank K?ster <frank at kuesterei.ch> wrote:
> 
>> The current state is attached, the -l and -h options already work.
> 
> Attached is version 0.1.  It can be used to list and view files (and it
> has a '-v|--version' option, but the regex search is not implemented.

Frank, luatex links against libz (of course), so I could easily, and
with just a minimum amound of extra compiled code, offer an interface
to that directly from lua. Doinfg so would remove the need to call the
g(un)zip executable. If you like that, let me know what you believe
the best interface would be.

Cheers,

Taco

From pragma at wxs.nl  Mon Jun 25 20:33:09 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 25 Jun 2007 20:33:09 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <46800538.1060000@elvenkind.com>
References: <466ACF98.8090603@gmx.net>	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>	<18027.8235.396400.342647@zarniwoop.ms25.local>	<20070609220059.GO834@gamma.logic.tuwien.ac.at>	<18027.9656.741195.13867@zarniwoop.ms25.local>	<466BB0AF.9070606@elvenkind.com>	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>	<466BF9EF.507@elvenkind.com>	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>	<466D0A32.3000506@elvenkind.com>	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>	<87lke8t10o.fsf@riesling.zuerich.kuesterei.ch>
	<46800538.1060000@elvenkind.com>
Message-ID: <46800A65.1030305@wxs.nl>

Taco Hoekwater wrote:
> Frank K?ster wrote:
>> Frank K?ster <frank at kuesterei.ch> wrote:
>>
>>> The current state is attached, the -l and -h options already work.
>>
>> Attached is version 0.1.  It can be used to list and view files (and it
>> has a '-v|--version' option, but the regex search is not implemented.
> 
> Frank, luatex links against libz (of course), so I could easily, and
> with just a minimum amound of extra compiled code, offer an interface
> to that directly from lua. Doinfg so would remove the need to call the
> g(un)zip executable. If you like that, let me know what you believe
> the best interface would be.

why not take

	http://mega.ist.utl.pt/~tngd/lua/lzlib-0.2.tar.gz

then

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From dak at gnu.org  Mon Jun 25 20:46:35 2007
From: dak at gnu.org (David Kastrup)
Date: Mon, 25 Jun 2007 20:46:35 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <46800538.1060000@elvenkind.com> (Taco Hoekwater's message of
	"Mon\, 25 Jun 2007 20\:11\:04 +0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87lke8t10o.fsf@riesling.zuerich.kuesterei.ch>
	<46800538.1060000@elvenkind.com>
Message-ID: <85abunc1o4.fsf@lola.goethe.zz>

Taco Hoekwater <taco at elvenkind.com> writes:

> Frank K?ster wrote:
>> Frank K?ster <frank at kuesterei.ch> wrote:
>>
>>> The current state is attached, the -l and -h options already work.
>>
>> Attached is version 0.1.  It can be used to list and view files (and it
>> has a '-v|--version' option, but the regex search is not implemented.
>
> Frank, luatex links against libz (of course), so I could easily, and
> with just a minimum amound of extra compiled code, offer an interface
> to that directly from lua. Doinfg so would remove the need to call the
> g(un)zip executable. If you like that, let me know what you believe
> the best interface would be.

LuaZip from the Kepler project appears like a reasonable interface
into zip files
<URL:http://www.keplerproject.org/luazip/manual.html#introduction>.
However, this does not cover gzip files and uses zlib instead of libz.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From hartmut_henkel at gmx.de  Mon Jun 25 21:57:15 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Mon, 25 Jun 2007 21:57:15 +0200 (CEST)
Subject: [tex-live] Inclusion of large eps files with dvipdfm
In-Reply-To: <200706250102.l5P12f3p018767@jupiter.fsci.fuk.kindai.ac.jp>
References: <alpine.DEB.0.99.0706242241290.5195@hahepc1.hahe>
	<200706250102.l5P12f3p018767@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <alpine.DEB.0.99.0706252145560.23106@hahepc1.hahe>

Hi Akira,

On Mon, 25 Jun 2007, Akira Kakuto wrote:

> > please see the examples above. Dvipdfmx produces an embedded PDF
> > image whose negative parts are not cropped as in dvipdfm. The
> > problematic effect with xx-dvipdfm.pdf can be seen e. g. with xpdf
> > when continuously zooming in and out.
>
> This is because dvipdfmx didn't use Ghostscript and dvipdfm did use
> Ghostscript to include xx-1.eps. If you apply my previous patch for
> mpost.c for dvipdfm, dvipdfm also includes MetaPost-made xx-1.eps
> directly and negative values are correctly treated.
>
> Conversely, if you erase the line
> %%Creator: MetaPost 1.000
> in xx-1.eps, dvipdfmx also uses Ghostscript and produces
> an incorrect pdf.

thanks a lot for explanation! So it's a completely different story than
i thought, sorry.

Regards, Hartmut

From frank at kuesterei.ch  Mon Jun 25 22:30:31 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Mon, 25 Jun 2007 22:30:31 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <46800538.1060000@elvenkind.com> (Taco Hoekwater's message of
	"Mon\, 25 Jun 2007 20\:11\:04 +0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87lke8t10o.fsf@riesling.zuerich.kuesterei.ch>
	<46800538.1060000@elvenkind.com>
Message-ID: <87abunrd3s.fsf@riesling.zuerich.kuesterei.ch>

Taco Hoekwater <taco at elvenkind.com> wrote:

> Frank K?ster wrote:
>> Frank K?ster <frank at kuesterei.ch> wrote:
>>
>>> The current state is attached, the -l and -h options already work.
>>
>> Attached is version 0.1.  It can be used to list and view files (and it
>> has a '-v|--version' option, but the regex search is not implemented.
>
> Frank, luatex links against libz (of course), so I could easily, and
> with just a minimum amound of extra compiled code, offer an interface
> to that directly from lua. Doinfg so would remove the need to call the
> g(un)zip executable. If you like that, let me know what you believe
> the best interface would be.

Hm, the current texdoc shell script works with .gz and .bz2.  In terms
of easy programming and maintainability, I think it would only be an
advantage if we either decide to not support bzip2 (and 7zip in the
future), or include those, too (which is probably not as easy).

I don't know who was using compressed documentation; we (Debian) have
done it for long, but our xdvi is able to ready dvi.gz even without
texdoc, and we slowly switch to not compressing pdf any more.

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From karl at freefriends.org  Mon Jun 25 22:34:33 2007
From: karl at freefriends.org (Karl Berry)
Date: Mon, 25 Jun 2007 15:34:33 -0500
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87abunrd3s.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <200706252034.l5PKYXQ28051@f7.net>

    Hm, the current texdoc shell script works with .gz and .bz2.  In terms
    of easy programming and maintainability, I think it would only be an
    advantage if we either decide to not support bzip2 (and 7zip in the
    future), or include those, too (which is probably not as easy).

If I'm understanding correctly, I see no overriding reason to support
.bz2'd documents in TL.

Right now, I see no .pdf.gz's in the hierarchy, only a few .ps.gz's, and
just one obscure bz2'd that isn't even installed:
Build/source/texk/windvi/Examples/ws_bzip2.ps.bz2

Am I missing some whole group of files?

From frank at kuesterei.ch  Tue Jun 26 08:58:22 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Tue, 26 Jun 2007 08:58:22 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <200706252034.l5PKYXQ28051@f7.net> (Karl Berry's message of "Mon\,
	25 Jun 2007 15\:34\:33 -0500")
References: <200706252034.l5PKYXQ28051@f7.net>
Message-ID: <87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>

karl at freefriends.org (Karl Berry) wrote:

>     Hm, the current texdoc shell script works with .gz and .bz2.  In terms
>     of easy programming and maintainability, I think it would only be an
>     advantage if we either decide to not support bzip2 (and 7zip in the
>     future), or include those, too (which is probably not as easy).
>
> If I'm understanding correctly, I see no overriding reason to support
> .bz2'd documents in TL.
>
> Right now, I see no .pdf.gz's in the hierarchy, only a few .ps.gz's, and
> just one obscure bz2'd that isn't even installed:
> Build/source/texk/windvi/Examples/ws_bzip2.ps.bz2
>
> Am I missing some whole group of files?

Rather a group of users, those who change TeX Live.  For example, Debian
usually installs documentation files gzipped, and we have done this with
teTeX and now with TeXLive.  Well, for PDF files we recently stopped
doing that (because you then need texdoc, neither xpdf nor acroread can
uncompress on-the-fly, and because gzip compression is not impressive on
internally compressed PDF files), but dvi and ps are consequently
compressed.  

I don't know about other re-distributors.

Actually, it shouldn't be too hard to make xpdf a wrapper which detects
the .gz (or bz2) extension and decompresses on-the-fly, and that might
save valuable space on the live DVD.

One thing to consider for future development is the following: If we
stick to PDF as the main documentation format, we probably want more
efficient compression methods than gz, but ideally the PDF files should
not be internally compressed for smallest end sizes[1].  For DVI (and I tend
to agree with David Kastrup's ceterum censeo about using DVI with source
specials) some test files don't give a lot of difference between gz and
bz2, and 7zip isn't much better:

$ lh labsem.dvi*
-rw-r--r-- 1 frank frank  15K 2007-06-26 08:51 labsem.dvi
-rw-r--r-- 1 frank frank 6.4K 2007-06-26 08:51 labsem.dvi.7z
-rw-r--r-- 1 frank frank 6.6K 2007-06-26 08:46 labsem.dvi.bz2
-rw-r--r-- 1 frank frank 6.7K 2007-06-26 08:46 labsem.dvi.gz

Regards, Frank



[1] http://article.gmane.org/gmane.linux.debian.devel.general/100253/match=gz+bz2+compress+ratio
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From pragma at wxs.nl  Tue Jun 26 09:20:30 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 26 Jun 2007 09:20:30 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
References: <200706252034.l5PKYXQ28051@f7.net>
	<87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <4680BE3E.4080808@wxs.nl>

Frank K?ster wrote:

> One thing to consider for future development is the following: If we
> stick to PDF as the main documentation format, we probably want more
> efficient compression methods than gz, but ideally the PDF files should
> not be internally compressed for smallest end sizes[1].  For DVI (and I tend

one reason why (already compressed) pdf files could be compressed 
further is that annotations and object resource specs etc were not 
compressed; now that we have object streams there is not much to gain 
from further compression

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From keinstein_junior at gmx.net  Tue Jun 26 11:14:31 2007
From: keinstein_junior at gmx.net (Tobias Schlemmer)
Date: Tue, 26 Jun 2007 11:14:31 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
References: <200706252034.l5PKYXQ28051@f7.net>
	<87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <f5qldn$cej$1@sea.gmane.org>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Frank K?ster wrote:
> Rather a group of users, those who change TeX Live.  For example, Debian
> usually installs documentation files gzipped, and we have done this with
> teTeX and now with TeXLive.  Well, for PDF files we recently stopped
> doing that (because you then need texdoc, neither xpdf nor acroread can
> uncompress on-the-fly, and because gzip compression is not impressive on
> internally compressed PDF files), but dvi and ps are consequently
> compressed.  

I recently discovered a program named zxpdf. It's in xpdf-reader at
least in version 3.01-1 (Debian testing).

Tobias.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGgNj3gUXoKM0juR4RAobFAKCpd9dv/fAVN7LHsPLJZjSXBomjHwCgofo/
j6AufYFaFDCHVG+AJcPBTa8=
=BGwN
-----END PGP SIGNATURE-----


From martin at oneiros.de  Tue Jun 26 11:42:47 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 26 Jun 2007 11:42:47 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
References: <200706252034.l5PKYXQ28051@f7.net>
	<87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <68c491a60706260242h644fabf3ob5427dae97994ec4@mail.gmail.com>

2007/6/26, Frank K?ster <frank at kuesterei.ch>:
> Actually, it shouldn't be too hard to make xpdf a wrapper which detects
> the .gz (or bz2) extension and decompresses on-the-fly, and that might
> save valuable space on the live DVD.

Decompressing pdfs on the fly will cost time as PDFs have to be
decompressed completely before they can be read (unless they are
linearized).

Best
   Martin

From frank at kuesterei.ch  Tue Jun 26 12:37:53 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Tue, 26 Jun 2007 12:37:53 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <f5qldn$cej$1@sea.gmane.org> (Tobias Schlemmer's message of "Tue\,
	26 Jun 2007 11\:14\:31 +0200")
References: <200706252034.l5PKYXQ28051@f7.net>
	<87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
	<f5qldn$cej$1@sea.gmane.org>
Message-ID: <87abunt30e.fsf@riesling.zuerich.kuesterei.ch>

Tobias Schlemmer <keinstein_junior at gmx.net> wrote:

> Frank K?ster wrote:
>> Rather a group of users, those who change TeX Live.  For example, Debian
>> usually installs documentation files gzipped, and we have done this with
>> teTeX and now with TeXLive.  Well, for PDF files we recently stopped
>> doing that (because you then need texdoc, neither xpdf nor acroread can
>> uncompress on-the-fly, and because gzip compression is not impressive on
>> internally compressed PDF files), but dvi and ps are consequently
>> compressed.  
>
> I recently discovered a program named zxpdf. It's in xpdf-reader at
> least in version 3.01-1 (Debian testing).

I know, but you first have to discover it, whereas xdvi (on Debian) can
read dvi.gz by itself.

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From frank at kuesterei.ch  Tue Jun 26 12:43:50 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Tue, 26 Jun 2007 12:43:50 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <68c491a60706260242h644fabf3ob5427dae97994ec4@mail.gmail.com>
	(Martin =?iso-8859-1?Q?Schr=F6der's?= message of "Tue\, 26 Jun 2007
	11\:42\:47 +0200")
References: <200706252034.l5PKYXQ28051@f7.net>
	<87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260242h644fabf3ob5427dae97994ec4@mail.gmail.com>
Message-ID: <87645bt2qh.fsf@riesling.zuerich.kuesterei.ch>

"Martin Schr?der" <martin at oneiros.de> wrote:

> 2007/6/26, Frank K?ster <frank at kuesterei.ch>:
>> Actually, it shouldn't be too hard to make xpdf a wrapper which detects
>> the .gz (or bz2) extension and decompresses on-the-fly, and that might
>> save valuable space on the live DVD.
>
> Decompressing pdfs on the fly will cost time as PDFs have to be
> decompressed completely before they can be read (unless they are
> linearized).

Is that a real problem on an installed system or the Live DVD?  

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From martin at oneiros.de  Tue Jun 26 12:48:23 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 26 Jun 2007 12:48:23 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87645bt2qh.fsf@riesling.zuerich.kuesterei.ch>
References: <200706252034.l5PKYXQ28051@f7.net>
	<87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260242h644fabf3ob5427dae97994ec4@mail.gmail.com>
	<87645bt2qh.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <68c491a60706260348n30359109k4865c8098599c90e@mail.gmail.com>

2007/6/26, Frank K?ster <frank at kuesterei.ch>:
> > Decompressing pdfs on the fly will cost time as PDFs have to be
> > decompressed completely before they can be read (unless they are
> > linearized).
>
> Is that a real problem on an installed system or the Live DVD?

Always. Non-linearized pdfs are first read from the end to find the
xref table, and then you access indivial objects. So you need tmp
space (either in memory or on disc) -- you can't work on streams. For
linearized pdfs this is different, but since almost nobody produces
them (pdftex doesn't) we can ignore them.

Best
   Martin

From frank at kuesterei.ch  Tue Jun 26 13:04:03 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Tue, 26 Jun 2007 13:04:03 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <4680BE3E.4080808@wxs.nl> (Hans Hagen's message of "Tue\,
	26 Jun 2007 09\:20\:30 +0200")
References: <200706252034.l5PKYXQ28051@f7.net>
	<87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
	<4680BE3E.4080808@wxs.nl>
Message-ID: <87y7i7rn8c.fsf@riesling.zuerich.kuesterei.ch>

Hans Hagen <pragma at wxs.nl> wrote:

> Frank K?ster wrote:
>
>> One thing to consider for future development is the following: If we
>> stick to PDF as the main documentation format, we probably want more
>> efficient compression methods than gz, but ideally the PDF files should
>> not be internally compressed for smallest end sizes[1].  For DVI (and I tend
>
> one reason why (already compressed) pdf files could be compressed
> further is that annotations and object resource specs etc were not
> compressed; now that we have object streams there is not much to gain
> from further compression

The difference seems still to be there:

$ lh policy*pdf*
-rw-r--r-- 1 frank frank 639K 2007-06-26 12:45 policy.pdf
-rw-r--r-- 1 frank frank 441K 2007-06-26 12:45 policy.pdf.gz
-rw-r--r-- 1 frank frank 1.2M 2007-06-26 12:56 policy.unc.pdf
-rw-r--r-- 1 frank frank 304K 2007-06-26 12:58 policy.unc.pdf.bz2
-rw-r--r-- 1 frank frank 375K 2007-06-26 12:57 policy.unc.pdf.gz
-rw-r--r-- 1 frank frank 655K 2007-06-26 12:56 policy.recomp.pdf
$ pdfinfo policy.pdf | grep Producer
Producer:       pdfTeX-1.40.3

internally-compressed pdf    -> i-c pdf.gz    saves 31%
internally-compressed pdf.gz -> plain pdf.gz  saves 15%
internally-compressed pdf    -> plain pdf.gz  saves 41%
internally-compressed pdf    -> plain pdf.bz2 saves 52%

Regards, Frank

P.S. This is the complete output of pdfinfo:

Title:          
Subject:        
Keywords:       
Author:         
Creator:        LaTeX with hyperref package
Producer:       pdfTeX-1.40.3
CreationDate:   Tue Jun 26 12:45:35 2007
ModDate:        Tue Jun 26 12:45:35 2007
Tagged:         no
Pages:          138
Encrypted:      no
Page size:      595.913 x 842.74 pts (A4)
File size:      654270 bytes
Optimized:      no
PDF version:    1.4


-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From martin at oneiros.de  Tue Jun 26 13:14:43 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 26 Jun 2007 13:14:43 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87y7i7rn8c.fsf@riesling.zuerich.kuesterei.ch>
References: <200706252034.l5PKYXQ28051@f7.net>
	<87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
	<4680BE3E.4080808@wxs.nl>
	<87y7i7rn8c.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <68c491a60706260414w4048b261jf0f0d215aa2bb43@mail.gmail.com>

2007/6/26, Frank K?ster <frank at kuesterei.ch>:
> Hans Hagen <pragma at wxs.nl> wrote:
> > one reason why (already compressed) pdf files could be compressed
> > further is that annotations and object resource specs etc were not
> > compressed; now that we have object streams there is not much to gain
> > from further compression
>
> The difference seems still to be there:

[...]

> PDF version:    1.4

Compressed object streams need PDF 1.5.

------------------
  - pdfTeX can now generate PDF 1.5 object streams, which leads to smaller
    PDFs. This is controlled by setting \pdfobjcompresslevel to a value >0 (3
    compress everything, 2 don't compress /Info, 1 also don't compress embedded
    PDFs) and works only with PDF >=1.5
------------------
Best
   Martin

From dak at gnu.org  Tue Jun 26 12:57:36 2007
From: dak at gnu.org (David Kastrup)
Date: Tue, 26 Jun 2007 12:57:36 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <68c491a60706260348n30359109k4865c8098599c90e@mail.gmail.com>
	("Martin =?iso-8859-1?Q?Schr=F6der=22's?= message of "Tue\, 26 Jun 2007
	12\:48\:23 +0200")
References: <200706252034.l5PKYXQ28051@f7.net>
	<87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260242h644fabf3ob5427dae97994ec4@mail.gmail.com>
	<87645bt2qh.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260348n30359109k4865c8098599c90e@mail.gmail.com>
Message-ID: <868xa7dlun.fsf@lola.quinscape.zz>

"Martin Schr?der" <martin at oneiros.de> writes:

> 2007/6/26, Frank K?ster <frank at kuesterei.ch>:
>> > Decompressing pdfs on the fly will cost time as PDFs have to be
>> > decompressed completely before they can be read (unless they are
>> > linearized).
>>
>> Is that a real problem on an installed system or the Live DVD?
>
> Always. Non-linearized pdfs are first read from the end to find the
> xref table, and then you access indivial objects. So you need tmp
> space (either in memory or on disc) -- you can't work on streams. For
> linearized pdfs this is different, but since almost nobody produces
> them (pdftex doesn't) we can ignore them.

Presumably whoever chose a procedure for gzipping PDFs could include a
linearization step, too.  But this would not help much unless one was
only interested in linear access (like when printing without
previewing).

-- 
David Kastrup

From frank at kuesterei.ch  Tue Jun 26 13:35:52 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Tue, 26 Jun 2007 13:35:52 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <68c491a60706260348n30359109k4865c8098599c90e@mail.gmail.com>
	(Martin =?iso-8859-1?Q?Schr=F6der's?= message of "Tue\, 26 Jun 2007
	12\:48\:23 +0200")
References: <200706252034.l5PKYXQ28051@f7.net>
	<87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260242h644fabf3ob5427dae97994ec4@mail.gmail.com>
	<87645bt2qh.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260348n30359109k4865c8098599c90e@mail.gmail.com>
Message-ID: <87bqf3rlrb.fsf@riesling.zuerich.kuesterei.ch>

"Martin Schr?der" <martin at oneiros.de> wrote:

> 2007/6/26, Frank K?ster <frank at kuesterei.ch>:
>> > Decompressing pdfs on the fly will cost time as PDFs have to be
>> > decompressed completely before they can be read (unless they are
>> > linearized).
>>
>> Is that a real problem on an installed system or the Live DVD?
>
> Always. Non-linearized pdfs are first read from the end to find the
> xref table, and then you access indivial objects. So you need tmp
> space (either in memory or on disc) 

I mean, is it a problem in real life - with the kind of CPU, memory and
DVD reader our average user has, and with the typical large-size PDF
file in TeXLive:

find TeXLive2007/texmf-doc/doc/ -name "*pdf" | xargs ls -lh | sed -n '/frank[[:space:]]*[[:digit:].]*M/ {s at .*frank @@;s at M.*/@M @;p}'
2.3M lshort-bg.pdf
3.1M symbols-a4.pdf
2.6M newfaq.pdf
1.9M survey.pdf
1.4M book.pdf
2.1M lshort.pdf
3.6M Mathmode.pdf
1.6M visualFAQ.pdf
2.0M lyhyt2e.pdf
2.1M fepslatex.pdf
1.5M fbook.pdf
2.5M flshort-3.20.pdf
1.4M de-tex-faq.pdf
1.1M itlshort.pdf
1.3M jlshort.pdf
1.4M lshort-kr.pdf
1.1M pedeefy.pdf
1.3M lshort2e.pdf
1.9M ptlshort.pdf
1.9M lshortru.pdf
1.7M lshort-tr.pdf
2.4M lshort-ukr.pdf
2.0M lshort-vi.pdf


-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From frank at kuesterei.ch  Tue Jun 26 13:41:50 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Tue, 26 Jun 2007 13:41:50 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <68c491a60706260414w4048b261jf0f0d215aa2bb43@mail.gmail.com>
	(Martin =?iso-8859-1?Q?Schr=F6der's?= message of "Tue\, 26 Jun 2007
	13\:14\:43 +0200")
References: <200706252034.l5PKYXQ28051@f7.net>
	<87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
	<4680BE3E.4080808@wxs.nl>
	<87y7i7rn8c.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260414w4048b261jf0f0d215aa2bb43@mail.gmail.com>
Message-ID: <871wfzrlhd.fsf@riesling.zuerich.kuesterei.ch>

"Martin Schr?der" <martin at oneiros.de> wrote:

> 2007/6/26, Frank K?ster <frank at kuesterei.ch>:
>> Hans Hagen <pragma at wxs.nl> wrote:
>> > one reason why (already compressed) pdf files could be compressed
>> > further is that annotations and object resource specs etc were not
>> > compressed; now that we have object streams there is not much to gain
>> > from further compression
>>
>> The difference seems still to be there:
>
> [...]
>
>> PDF version:    1.4
>
> Compressed object streams need PDF 1.5.
>
> ------------------
>  - pdfTeX can now generate PDF 1.5 object streams, which leads to smaller
>    PDFs. This is controlled by setting \pdfobjcompresslevel to a value >0 (3
>    compress everything, 2 don't compress /Info, 1 also don't compress embedded
>    PDFs) and works only with PDF >=1.5
> ------------------

Ah, I wasn't aware that it is optional.  Should and/or will this be the
default in TeXLive 2008? 

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From martin at oneiros.de  Tue Jun 26 13:51:27 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 26 Jun 2007 13:51:27 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87bqf3rlrb.fsf@riesling.zuerich.kuesterei.ch>
References: <200706252034.l5PKYXQ28051@f7.net>
	<87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260242h644fabf3ob5427dae97994ec4@mail.gmail.com>
	<87645bt2qh.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260348n30359109k4865c8098599c90e@mail.gmail.com>
	<87bqf3rlrb.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <68c491a60706260451v7b4b52b8s2ad5e4a50d8c5c52@mail.gmail.com>

2007/6/26, Frank K?ster <frank at kuesterei.ch>:
> I mean, is it a problem in real life - with the kind of CPU, memory and
> DVD reader our average user has, and with the typical large-size PDF
> file in TeXLive:

Probably not. But in my experience you don't gain much by eternally
compressing PDFs; and since the decompression is a separate step, it's
kind of clumsy.

Best
   Martin

From martin at oneiros.de  Tue Jun 26 13:52:55 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 26 Jun 2007 13:52:55 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <871wfzrlhd.fsf@riesling.zuerich.kuesterei.ch>
References: <200706252034.l5PKYXQ28051@f7.net>
	<87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
	<4680BE3E.4080808@wxs.nl>
	<87y7i7rn8c.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260414w4048b261jf0f0d215aa2bb43@mail.gmail.com>
	<871wfzrlhd.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <68c491a60706260452i33567d47ife9fbba52788e8a4@mail.gmail.com>

2007/6/26, Frank K?ster <frank at kuesterei.ch>:
> Ah, I wasn't aware that it is optional.  Should and/or will this be the
> default in TeXLive 2008?

We haven't discussed this yet. For PDF 1.5 you need XPDF 3.00++ or
AR6++, so this will be a problem on older systems.

Best
   Martin

From martin at oneiros.de  Tue Jun 26 13:54:00 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 26 Jun 2007 13:54:00 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <68c491a60706260451v7b4b52b8s2ad5e4a50d8c5c52@mail.gmail.com>
References: <200706252034.l5PKYXQ28051@f7.net>
	<87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260242h644fabf3ob5427dae97994ec4@mail.gmail.com>
	<87645bt2qh.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260348n30359109k4865c8098599c90e@mail.gmail.com>
	<87bqf3rlrb.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260451v7b4b52b8s2ad5e4a50d8c5c52@mail.gmail.com>
Message-ID: <68c491a60706260454y17852373w7c35e7c47abde854@mail.gmail.com>

2007/6/26, Martin Schr?der <martin at oneiros.de>:
> Probably not. But in my experience you don't gain much by eternally

s/eter/exter/ :-)

Best
   Martin

From frank at kuesterei.ch  Tue Jun 26 14:48:43 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Tue, 26 Jun 2007 14:48:43 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <68c491a60706260451v7b4b52b8s2ad5e4a50d8c5c52@mail.gmail.com>
	(Martin =?iso-8859-1?Q?Schr=F6der's?= message of "Tue\, 26 Jun 2007
	13\:51\:27 +0200")
References: <200706252034.l5PKYXQ28051@f7.net>
	<87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260242h644fabf3ob5427dae97994ec4@mail.gmail.com>
	<87645bt2qh.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260348n30359109k4865c8098599c90e@mail.gmail.com>
	<87bqf3rlrb.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260451v7b4b52b8s2ad5e4a50d8c5c52@mail.gmail.com>
Message-ID: <87ir9aridw.fsf@riesling.zuerich.kuesterei.ch>

"Martin Schr?der" <martin at oneiros.de> wrote:

> 2007/6/26, Frank K?ster <frank at kuesterei.ch>:
>> I mean, is it a problem in real life - with the kind of CPU, memory and
>> DVD reader our average user has, and with the typical large-size PDF
>> file in TeXLive:
>
> Probably not. But in my experience you don't gain much by eternally
> compressing PDFs; 

Well, I wouldn't call 40 or 50% "not much".  And that's what we're left
with if we do not switch to PDF 1.5.

> and since the decompression is a separate step, it's
> kind of clumsy.

Well, yes - that's what this thread started with, and the question I'm
still interested in:  Should tools like texdoc or viewers like xpdf be
written such that they can transparently access those files, or isn't it
worth it?

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From Robin.Fairbairns at cl.cam.ac.uk  Tue Jun 26 13:32:19 2007
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Tue, 26 Jun 2007 12:32:19 +0100
Subject: [tex-live] texdoc in luatex
In-Reply-To: Your message of Tue, 26 Jun 2007 12:48:23 +0200.
	<68c491a60706260348n30359109k4865c8098599c90e@mail.gmail.com> 
Message-ID: <25732.1182857539@mole.cl.cam.ac.uk>

Martin Schr?der <martin at oneiros.de> wrote:

> 2007/6/26, Frank K?ster <frank at kuesterei.ch>:
> > > Decompressing pdfs on the fly will cost time as PDFs have to be
> > > decompressed completely before they can be read (unless they are
> > > linearized).
> >
> > Is that a real problem on an installed system or the Live DVD?
> 
> Always. Non-linearized pdfs are first read from the end to find the
> xref table, and then you access indivial objects. So you need tmp
> space (either in memory or on disc) -- you can't work on streams. For
> linearized pdfs this is different, but since almost nobody produces
> them (pdftex doesn't) we can ignore them.

fwiw, i do, when generating docs to go on ctan.  since i also do that
for ctan packages whose authors have chosen not to bother, the number of
linearised pdfs on ctan may even reached the point where they would show
up in a quick statistical survey ;-)

robin

From oberdiek at uni-freiburg.de  Tue Jun 26 14:56:17 2007
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Tue, 26 Jun 2007 14:56:17 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <868xa7dlun.fsf@lola.quinscape.zz>
References: <200706252034.l5PKYXQ28051@f7.net>
	<87d4zj8anl.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260242h644fabf3ob5427dae97994ec4@mail.gmail.com>
	<87645bt2qh.fsf@riesling.zuerich.kuesterei.ch>
	<68c491a60706260348n30359109k4865c8098599c90e@mail.gmail.com>
	<868xa7dlun.fsf@lola.quinscape.zz>
Message-ID: <20070626125617.GA4353@irwin.vpn.uni-freiburg.de>

On Tue, Jun 26, 2007 at 12:57:36PM +0200, David Kastrup wrote:

> "Martin Schr?der" <martin at oneiros.de> writes:
> 
> > 2007/6/26, Frank K?ster <frank at kuesterei.ch>:
> >> > Decompressing pdfs on the fly will cost time as PDFs have to be
> >> > decompressed completely before they can be read (unless they are
> >> > linearized).
> >>
> >> Is that a real problem on an installed system or the Live DVD?
> >
> > Always. Non-linearized pdfs are first read from the end to find the
> > xref table, and then you access indivial objects. So you need tmp
> > space (either in memory or on disc) -- you can't work on streams. For
> > linearized pdfs this is different, but since almost nobody produces
> > them (pdftex doesn't) we can ignore them.
> 
> Presumably whoever chose a procedure for gzipping PDFs could include a
> linearization step, too.  But this would not help much unless one was
> only interested in linear access (like when printing without
> previewing).

And it is pointless if the PDF reading application is not able
to read the PDF file in linear access (most applications are
not able to read the PDF file this way).

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>

From hanthethanh at gmail.com  Tue Jun 26 15:44:00 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Tue, 26 Jun 2007 15:44:00 +0200
Subject: [tex-live] texdoc in luatex
Message-ID: <74f506dc0706260644m1016cab3gd4dc7a4bf8dd6086@mail.gmail.com>

if the point is to have minimum size of pdfs, I would do the
following:

- use dvipdfm(x), without compression. It supports Type1C
  font, so the pdfs can be compressed efficiently in next
  step

- then compress the pdf by bzip2 or lzma


Thanh

On Tue, Jun 26, 2007 at 02:56:17PM +0200, Heiko Oberdiek wrote:
> On Tue, Jun 26, 2007 at 12:57:36PM +0200, David Kastrup wrote:
>
> > "Martin Schr?der" <martin at oneiros.de> writes:
> >
> > > 2007/6/26, Frank K?ster <frank at kuesterei.ch>:
> > >> > Decompressing pdfs on the fly will cost time as PDFs have to be
> > >> > decompressed completely before they can be read (unless they are
> > >> > linearized).
> > >>
> > >> Is that a real problem on an installed system or the Live DVD?
> > >
> > > Always. Non-linearized pdfs are first read from the end to find the
> > > xref table, and then you access indivial objects. So you need tmp
> > > space (either in memory or on disc) -- you can't work on streams. For
> > > linearized pdfs this is different, but since almost nobody produces
> > > them (pdftex doesn't) we can ignore them.
> >
> > Presumably whoever chose a procedure for gzipping PDFs could include a
> > linearization step, too.  But this would not help much unless one was
> > only interested in linear access (like when printing without
> > previewing).
>
> And it is pointless if the PDF reading application is not able
> to read the PDF file in linear access (most applications are
> not able to read the PDF file this way).
>
> Yours sincerely
>   Heiko <oberdiek at uni-freiburg.de>

From frank at kuesterei.ch  Tue Jun 26 16:36:27 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Tue, 26 Jun 2007 16:36:27 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch> (Frank
	=?iso-8859-1?Q?K=FCster's?= message of "Mon\, 25 Jun 2007 14\:57\:03
	+0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
Message-ID: <87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>

Frank K?ster <frank at kuesterei.ch> wrote:

> Thanks, I've started working on "texdoclua".  

So here is the next iteration.  It basically does what it is supposed
to:

$ texdoclua -h 
      Usage: texdoc [-h|--help] name
	 -h|--help		 Show this help
         -v|--version		 Print the version of the program
         -l|--list		 List matching files, do not start a viewer.
         -s|--search		 search for name as a pattern


Some remarks:

- I like it, it's lightning fast, and it doesn't even need the
  NODOC_PATTERN I had to use in the bash version

- the shebang line is not yet fixed, since the Debian package doesn't
  install /usr/bin/texlua yet.

- The search option now accepts lua patterns instead of egrep patterns.
  It shouldn't be too hard to use egrep instead, but for sure it's
  slower (one external egrep process for each file in a documentation
  directory).

  So the question is whether people actually use the egrep features.

  Myself, I use -s mostly if I don't remember whether the doc for that
  list layout package I'm searching is called "$package.ps",
  "manual.dvi" or "user.pdf", but it must be in a directory containing
  "list", probably "par.*list".  This works as before.  You can even
  search for c[oau]ncrete if you're not sure about english
  pronounciation/spelling relations, but 'colo(u|)r' does not work (but
  it works with the egrep patterns in bash texdoc).

  I'd really appreciate if people could comment on this.

- All variables are still hardcoded, reading them from texmf.cnf is the
  next step.

TIA, Frank

-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

-------------- next part --------------
#!/usr/bin/luatexlua
--[[ Written in lua by Frank K?ster (2007) based on the shell script by
Thomas Esser, David Aspinall, and Simon Wilkinson.
Public domain.]]

progname = 'texdoc';
version = '0.1';
usage = '      Usage: ' .. progname ..' [-h|--help] name\
	 -h|--help\t\t Show this help\
         -v|--version\t\t Print the version of the program\
         -l|--list\t\t List matching files, do not start a viewer.\
         -s|--search\t\t search for name as a pattern';


if not arg[1] then
   print (usage);
   return
end

if string.match (arg[1],'^-') then
   if string.match (arg[1],'-h') or string.match (arg[1],'--help') then
      print (usage);
      os.exit(0);
   elseif string.match (arg[1],'-v') or string.match (arg[1],'--version') then
      print (progname .. ' version: ' .. version );
      os.exit(0);
   elseif string.match (arg[1],'-l') or string.match (arg[1],'--list'   ) then
      mode = 'list';
      iter_arg_start = 1;
   elseif string.match (arg[1],'-s') or string.match (arg[1],'--search'   ) then
      mode = 'search';
      iter_arg_start = 1;
   end
else
   mode = 'view';
   iter_arg_start = 0;
end

--[[ function definitions ]]
function list_iter (t)
   local i = 0
   local n = table.getn(t)
   return function ()
	     i = i + 1
	     if i <= n then return t[i] end
	  end
end

function list_iter_arg (t,start)
   local i = start
   local n = table.getn(t)
   return function ()
	     i = i + 1
	     if i <= n then return t[i] end
	  end
end

local tmpdir;
function cleanup_tmpdir ()
   local is_successful
   local error_string
   if needs_cleanup then
      is_successful,error_string = lfs.rmdir (tmpdir);
      if is_successful then
	 print ("removing worked");
      else
	 print ("removing failed");
	 print (error_string);
      end
   end
end

-- [[ functions for the search option ]]

function get_lsr_files ()
   local lsr_files = {};
   local pathlist = kpse.expand_braces('$TEXDOCS');
   for path in string.gmatch(pathlist, "[^:]*") do
      path = string.gsub(path,'doc//$','')
      path = string.gsub(path,'^!!','')
      if lfs.isfile(path .. "ls-R") then
	 table.insert(lsr_files,path .. "ls-R")
      end -- does lsRfile exist?
   end -- for path
   local i = 0
   local n = table.getn(lsr_files)
   -- TODO: We completely ignore trees without ls-R files.  Since I
   -- don't know how to get the output of "find" without resorting to
   -- temporary files, anyway, I don't care.
   return function ()
	     i = i +1
	     if i <= n then return lsr_files[i] end
	  end
	     
end -- get_lsr_files()

docdirs = {}
docfiles = {}
function pattern_search (pattern)
   -- populate docdirs and doclines list
   for database in get_lsr_files() do
      local texmf_tree = string.gsub(database,'/ls%-R$','')
      is_docline = false
      local this_dir -- changed to each individual docdir
      for line in io.lines(database) do
	 if string.match(line,'^./') then
	    -- a directory
	    this_dir = string.gsub(line,'^./',texmf_tree)
	    this_dir = string.gsub(this_dir,':$','/')
	    if string.match(line,'^./doc') then
	       -- the next file lines are in docdir "this_dir"
	       is_docline = true
	       -- save it in the docdirs table
	       table.insert(docdirs,this_dir)
	    else
	       is_docline = false
	    end -- docdir
	 elseif string.match(line,'^%s*$') then
	    -- empty line, do nothing
	 -- now we have only file lines left, are they a docline?
	 elseif is_docline then
	    local fullpath = texmf_tree .. this_dir .. line
-- 	    print(fullpath)
	    table.insert(docfiles,fullpath)
	 end -- line starting with ./
      end -- for line
   end -- for database

   print("Directories that match:")
   for dir in list_iter(docdirs) do
      if string.match(dir,pattern) then
	 print (dir)
      end
   end -- for dir
   print()
   print("Files that match:")
   for file in list_iter(docfiles) do
      if string.match(file,pattern) then
	 print (file)
      end
   end -- for file

end -- function pattern_search()


--[[ initialize kpathsea ]]
kpse.set_program_name("texdoc")

-- [[ initialize some variables ]]
verbose = false;
nodoc_pattern = [=[\.tfm|\.afm|\.enc|\.pfb|\.pfa|\.pfm|\.vf|\.fd|\.ttf|\.htf|\.mf|\.otf|\.[[:digit:]]*pk]=];
extlist = {'.dvi', '.dvi.gz', '.dvi.bz2', '.pdf', '.pdf.gz', '.pdf.bz2', '.ps', '.ps.gz', '.ps.bz2', '.txt', '.txt.gz', '.txt.bz2', '.html'};
texdoc_unzip = { gz = "gzip -d -c ", bz2 = "bzip2 -d -c "};
texdoc_viewer = { 
   dvi  = '(xdvi %s ) &',
   html = '(see %s) &',
   pdf = '(see %s) &'
};
rmfile_command = 'rm -f ';
rmdir_command = 'rmdir ';

-- needs_cleanup = false;

for docname in list_iter_arg (arg,iter_arg_start) do
   if string.match(mode,'search') then
      pattern_search(docname);
   elseif string.match(mode,'view') or string.match(mode,'list') then
      for ext in list_iter(extlist) do
	 filename = kpse.find_file(docname .. ext , "TeX system documentation")

	 if filename then
	    if string.match (mode, 'list') then
	       print(filename);
	    else
	       -- mode is view, is unzipping needed?
	       zipext = string.match(ext,'%..*%.(.*)');
	       if zipext then
		  unzip_command = texdoc_unzip[zipext];
		  viewext = string.match(ext,'%.(.*)%..*$');
		  basebame_pattern = '.*/(.*%.' .. viewext .. ')';
		  basename = string.match(filename,basebame_pattern);

		  -- uncompress only once per file, in case it is given more
		  -- than once (dvi besides ps or so)
		  -- TODO: to be done

		  tmpdir = os.tmpname();
		  is_ok_tmpdir,error_string = lfs.mkdir(tmpdir)
		  if is_ok_tmpdir then
		     -- 		  needs_cleanup = true;
		  else
		     print(error_string);
		     os.exit(1);
		  end
		  
		  unzip_commandline = unzip_command .. filename .. " > " .. tmpdir .. "/" .. basename;
		  
		  if os.execute(unzip_commandline) then
		     filename = tmpdir .. "/" .. basename;
		  else
		     print("Error executing \n" .. unzip_commandline);
		  end
		  viewer_replacement = filename .. ';' .. rmfile_command .. filename .. ';' .. rmdir_command .. tmpdir;
	       else
		  viewer_replacement = filename;
		  viewext = string.match(ext,'%.(.*)$');
	       end -- zipped or not
	       view_command = string.gsub(texdoc_viewer[viewext],'%%s',viewer_replacement)
	       view_result = os.execute(view_command);
	       if view_result then
		  do break end;
	       else
		  print("Error executing \n" .. view_command);
	       end
	    end -- list or view
	 end -- found a filename with that extension or not?
      end -- for ext
   end -- if construct "case mode in"
end -- for docname

-- cleanup_tmpdir();

From kakuto at fsci.fuk.kindai.ac.jp  Tue Jun 26 17:14:10 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Wed, 27 Jun 2007 00:14:10 +0900
Subject: [tex-live] texdoc in luatex
In-Reply-To: Your message of "Tue, 26 Jun 2007 16:36:27 +0200"
References: <87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <200706261514.l5QFEB3M024476@jupiter.fsci.fuk.kindai.ac.jp>

> So here is the next iteration.  It basically does what it is supposed

Thanks a lot. It is running on Windows also.

On Windows, path separator is ;. Thus, for example

>    local pathlist = kpse.expand_braces('$TEXDOCS');
>    for path in string.gmatch(pathlist, "[^:]*") do

should be

    local pathlist = kpse.expand_braces('$TEXDOCS');
    for path in string.gmatch(pathlist, "[^;]*") do

I hope it may be possible to unify these cases.

Best regards,
Akira

From frank at kuesterei.ch  Tue Jun 26 18:07:31 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Tue, 26 Jun 2007 18:07:31 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87d4zipytw.fsf@riesling.zuerich.kuesterei.ch> (Frank
	=?iso-8859-1?Q?K=FCster's?= message of "Tue\, 26 Jun 2007 16\:36\:27
	+0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>

Frank K?ster <frank at kuesterei.ch> wrote:

> Some remarks:

And some more questions, in particular because I hope this also runs on
windows:

- How (except with a temporary file) can I access the output of an
  external program from a lua script?  I'm searching for the lua
  equivalent for

      case `(uname -s) 2>/dev/null` in
         Darwin)

- How do I detect whether I'm on windows?  

- What are safe commands to remove a file and a directory on Windows?
  I can't do that in lua, because the viewer is forked, the lua script
  exits, and the temporary file and directory need to be removed
  afterwards

- Can I use ';' to separate consecutive commands on windows, like this: 

viewer_replacement = filename .. ';' .. rmfile_command .. filename .. ';' .. rmdir_command .. tmpdir;

Regards, Frank

-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From reinhard.kotucha at web.de  Tue Jun 26 18:19:15 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 26 Jun 2007 18:19:15 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <18049.15491.398014.636281@zarniwoop.ms25.local>

Frank K?ster writes:
 > Frank K?ster <frank at kuesterei.ch> wrote:

 > - the shebang line is not yet fixed, since the Debian package doesn't
 >   install /usr/bin/texlua yet.

For TeXLive we need /usr/bin/env anyway.

When I try texdoc -l vntex I get what I expect, but texdoc -s vntex does
not work properly.  The path to the doc tree appears twice and the
slash in front of doc/... is missing.
 
 >    -- TODO: We completely ignore trees without ls-R files.  Since I
 >    -- don't know how to get the output of "find" without resorting to
 >    -- temporary files, anyway, I don't care.

You could use io.popen() in order to read from a pipe.  But do you
want to give up platform independence?

Assuming that in texmf trees which do not use an ls-R database the doc
tree will either be empty or very small, you could probably better
search the directory tree using some lua code.

This is what I found among the lfs files:
_____________________________________________________
function attrdir (path)
    for file in lfs.dir(path) do
        if file ~= "." and file ~= ".." then
            local f = path..'/'..file
            print ("\t "..f)
            local attr = lfs.attributes (f)
            assert (type(attr) == "table")
            if attr.mode == "directory" then
                attrdir (f)
            else
                for name, value in pairs(attr) do
                    print (name, value)
                end
            end
        end
    end
end

attrdir (".")
_____________________________________________________

This is probably a starting point.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From frank at kuesterei.ch  Tue Jun 26 18:24:23 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Tue, 26 Jun 2007 18:24:23 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <200706261514.l5QFEB3M024476@jupiter.fsci.fuk.kindai.ac.jp>
	(Akira Kakuto's message of "Wed\, 27 Jun 2007 00\:14\:10 +0900")
References: <87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
	<200706261514.l5QFEB3M024476@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <877ipqof9k.fsf@riesling.zuerich.kuesterei.ch>

Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp> wrote:

> On Windows, path separator is ;. Thus, for example
>
>>    local pathlist = kpse.expand_braces('$TEXDOCS');
>>    for path in string.gmatch(pathlist, "[^:]*") do
>
> should be
>
>     local pathlist = kpse.expand_braces('$TEXDOCS');
>     for path in string.gmatch(pathlist, "[^;]*") do
>
> I hope it may be possible to unify these cases.

-for path in string.gmatch(pathlist, "[^:]*") do
+for path in string.gmatch(pathlist, "[^:;]*") do

should do.  So the rm and rmdir commands work, too?  Or are there any
tempfiles left, wherever they are put?  Or should we just not care
because original TeXLive doesn't compress documentation, and there's not
Debian for Windows yet?


Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From reinhard.kotucha at web.de  Tue Jun 26 18:31:57 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 26 Jun 2007 18:31:57 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <18049.16253.561266.346143@zarniwoop.ms25.local>

Frank K?ster writes:

 > - How do I detect whether I'm on windows?  

In Perl I always test (-d "/usr/bin").  Provides correct results for
Cygwin too (which is a UNIX-like system).

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From zdenek.wagner at gmail.com  Tue Jun 26 18:38:48 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Tue, 26 Jun 2007 18:38:48 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <18049.16253.561266.346143@zarniwoop.ms25.local>
References: <466ACF98.8090603@gmx.net> <466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>
	<18049.16253.561266.346143@zarniwoop.ms25.local>
Message-ID: <8719b6240706260938o43e53100h7832e98f01535100@mail.gmail.com>

2007/6/26, Reinhard Kotucha <reinhard.kotucha at web.de>:
> Frank K?ster writes:
>
>  > - How do I detect whether I'm on windows?
>
> In Perl I always test (-d "/usr/bin").  Provides correct results for
> Cygwin too (which is a UNIX-like system).
>
I use the following:

use Config;

if ($Config{'osname'} =~ /windows|cygwin|mswin/i) {
# in Windows
}

I hope it catches everything.

> Regards,
>   Reinhard
>
> --
> ----------------------------------------------------------------------------
> Reinhard Kotucha                                      Phone: +49-511-4592165
> Marschnerstr. 25
> D-30167 Hannover                              mailto:reinhard.kotucha at web.de
> ----------------------------------------------------------------------------
> Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
> ----------------------------------------------------------------------------
>
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From frank at kuesterei.ch  Tue Jun 26 18:44:15 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Tue, 26 Jun 2007 18:44:15 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch> (Frank
	=?iso-8859-1?Q?K=FCster's?= message of "Tue\, 26 Jun 2007 18\:07\:31
	+0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <87r6nymzs0.fsf@riesling.zuerich.kuesterei.ch>

Frank K?ster <frank at kuesterei.ch> wrote:

> And some more questions, in particular because I hope this also runs on
> windows:

And, most importantly, which commands should I use (in os.execute()) to
start viewers on windows systems?

I mean, with what should I replace 

texdoc_viewer = { 
   dvi  = '(xdvi %s ) &',
   html = '(see %s) &',
   pdf = '(xpdf %s) &'
};

Regards, Frank

-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From reinhard.kotucha at web.de  Tue Jun 26 19:03:59 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 26 Jun 2007 19:03:59 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <8719b6240706260938o43e53100h7832e98f01535100@mail.gmail.com>
References: <466ACF98.8090603@gmx.net> <466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>
	<18049.16253.561266.346143@zarniwoop.ms25.local>
	<8719b6240706260938o43e53100h7832e98f01535100@mail.gmail.com>
Message-ID: <18049.18175.657284.505253@zarniwoop.ms25.local>

Zdenek Wagner writes:

 > > In Perl I always test (-d "/usr/bin").  Provides correct results for
 > > Cygwin too (which is a UNIX-like system).
 > >
 > I use the following:
 > 
 > use Config;
 > 
 > if ($Config{'osname'} =~ /windows|cygwin|mswin/i) {
 > # in Windows
 > }

This assumes that Cygwin is Windows.  But within a Cygwin environment
you have a filesystem with a single root, forward slashes as directory
separators, X11, and bash.  There is not very much which looks like
windows, though all binaries have the extension ".exe".

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From reinhard.kotucha at web.de  Tue Jun 26 19:12:48 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 26 Jun 2007 19:12:48 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87r6nymzs0.fsf@riesling.zuerich.kuesterei.ch>
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>
	<87r6nymzs0.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <18049.18704.102431.995352@zarniwoop.ms25.local>

Frank K?ster writes:

 > And, most importantly, which commands should I use (in os.execute()) to
 > start viewers on windows systems?
 > 
 > I mean, with what should I replace 
 > 
 > texdoc_viewer = { 
 >    dvi  = '(xdvi %s ) &',
 >    html = '(see %s) &',
 >    pdf = '(xpdf %s) &'
 > };

texdoc_viewer = { 
   dvi  = '(start "" %s ) &',
   html = '(start "" %s) &',
   pdf = '(start "" %s) &'
};

On Windows filename extensions are associated with programs.  start
launches the appropriate program.  The first argument is a string
supposed to appear in the title bar.  I it is ommitted, a shell window
will open with the expansion of %s in the title bar and nothing else
will happen.

Regards,
  Reinhard 

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From laurent07 at gmail.com  Tue Jun 26 18:20:43 2007
From: laurent07 at gmail.com (c l)
Date: Tue, 26 Jun 2007 09:20:43 -0700
Subject: [tex-live] fullpage package, tabular and margin
Message-ID: <4ba3c6910706260920n10869bb3p56a45276c7604ada@mail.gmail.com>

When i compile and see the following tex code, i have the text and last
\hline too right vs. *Achieved Projects* and first big \rule.
I'd like the text and last \hline in line with *Archived Projects* and first
big \rule.

How can i fix the right margin issue in the following tex code?


\documentclass[10pt]{article}
\usepackage{charter}
\usepackage{fullpage}
\usepackage[colorlinks=false]{hyperref}

\pagestyle{empty}

\begin{document}
\flushright
{\LARGE\bfseries
Achieved Projects
}
\noindent\rule[-1ex]{\textwidth}{2.5pt}\\[2.5ex]
\flushleft
\begin{tabular}{lp{\textwidth}}
\textbf{2003}  &
\textbf{Project 1 Virtual channels Allocation} \emph{UML-Java, Network
Calculus} -- Study the allocation of the virtual channels of the Project 1
Study Full-Duplex Layer 2 (\,part 7 of the Standard B Specification\,) in
order to comply with the latency constraints, bus load, and safety. Use of
methods of network computations, optimization with constraints and
heuristcs. Define and compare different algorithms allowing the optimization
of the virtual channels allocation.\\[2.5ex]
\textbf{2002} &
\textbf{Network Simulations} \emph{QNAP} -- Analyze the network performance
evaluations via software simulation with QNAP.\\[2.5ex]
\hline
\end{tabular}
\end{document}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/tex-live/attachments/20070626/2a52944f/attachment.html 

From frank at kuesterei.ch  Tue Jun 26 19:37:57 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Tue, 26 Jun 2007 19:37:57 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <18049.15491.398014.636281@zarniwoop.ms25.local> (Reinhard
	Kotucha's message of "Tue\, 26 Jun 2007 18\:19\:15 +0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
	<18049.15491.398014.636281@zarniwoop.ms25.local>
Message-ID: <873b0emxai.fsf@riesling.zuerich.kuesterei.ch>

Reinhard Kotucha <reinhard.kotucha at web.de> wrote:

> Frank K?ster writes:
>  > Frank K?ster <frank at kuesterei.ch> wrote:
>
>  > - the shebang line is not yet fixed, since the Debian package doesn't
>  >   install /usr/bin/texlua yet.
>
> For TeXLive we need /usr/bin/env anyway.
>
> When I try texdoc -l vntex I get what I expect, but texdoc -s vntex does
> not work properly.  The path to the doc tree appears twice and the
> slash in front of doc/... is missing.

yes, I found that too - messed up in some reorganisation, and easily
fixed.

>  >    -- TODO: We completely ignore trees without ls-R files.  Since I
>  >    -- don't know how to get the output of "find" without resorting to
>  >    -- temporary files, anyway, I don't care.
>
> You could use io.popen() in order to read from a pipe.  But do you
> want to give up platform independence?

No - I didn't think about find availability when I wrote that remark. 

> Assuming that in texmf trees which do not use an ls-R database the doc
> tree will either be empty or very small, you could probably better
> search the directory tree using some lua code.
>
> This is what I found among the lfs files:

Thank you, that looks good.

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From P.Taylor at rhul.ac.uk  Tue Jun 26 19:14:11 2007
From: P.Taylor at rhul.ac.uk (Philip Taylor (Webmaster))
Date: Tue, 26 Jun 2007 18:14:11 +0100
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87r6nymzs0.fsf@riesling.zuerich.kuesterei.ch>
References: <466ACF98.8090603@gmx.net>	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>	<18027.8235.396400.342647@zarniwoop.ms25.local>	<20070609220059.GO834@gamma.logic.tuwien.ac.at>	<18027.9656.741195.13867@zarniwoop.ms25.local>	<466BB0AF.9070606@elvenkind.com>	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>	<466BF9EF.507@elvenkind.com>	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>	<466D0A32.3000506@elvenkind.com>	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>
	<87r6nymzs0.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <46814963.10205@Rhul.Ac.Uk>

under Windows (recent versions at least)
you start the file itself and let the
file start the application.

Philip Taylor
--------
Frank K?ster wrote:
> Frank K?ster <frank at kuesterei.ch> wrote:
> 
>> And some more questions, in particular because I hope this also runs on
>> windows:
> 
> And, most importantly, which commands should I use (in os.execute()) to
> start viewers on windows systems?
> 
> I mean, with what should I replace 
> 
> texdoc_viewer = { 
>    dvi  = '(xdvi %s ) &',
>    html = '(see %s) &',
>    pdf = '(xpdf %s) &'
> };
> 
> Regards, Frank
> 

From karl at freefriends.org  Tue Jun 26 20:53:36 2007
From: karl at freefriends.org (Karl Berry)
Date: Tue, 26 Jun 2007 13:53:36 -0500
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <200706261853.l5QIraN03834@f7.net>

      pronounciation/spelling relations, but 'colo(u|)r' does not work (but

Don't Lua regexps support alternation?

(Well, I gather regexps aren't "built in" to Lua proper, but whatever
external thingy implements them.)

From karl at freefriends.org  Tue Jun 26 21:01:54 2007
From: karl at freefriends.org (Karl Berry)
Date: Tue, 26 Jun 2007 14:01:54 -0500
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87ir9aridw.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <200706261901.l5QJ1s506613@f7.net>

    Should tools like texdoc or viewers like xpdf be written such that
    they can transparently access those files, or isn't it worth it?

Regardless of what happens in TL, in general it seems like a nice
feature that is probably not too hard to add, IMHO.  

So if you want to do it in texdoc, why not?  For xpdf, have to ask
Derek.  He may or may not care to implement it.

As for what pdf's end up on TL, my guiding principle is to copy what's
on CTAN.  Anything else just leads to more trouble than it's worth, in
my experience.

karl

From preining at logic.at  Tue Jun 26 22:20:33 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 26 Jun 2007 22:20:33 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
References: <18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <20070626202033.GA8115@gamma.logic.tuwien.ac.at>

On Die, 26 Jun 2007, Frank K?ster wrote:
> - the shebang line is not yet fixed, since the Debian package doesn't
>   install /usr/bin/texlua yet.

They do.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
YARMOUTH (vb.)
To shout at foreigners in the belief that the louder you speak, the
better they'll understand you.
			--- Douglas Adams, The Meaning of Liff

From frank at kuesterei.ch  Tue Jun 26 22:29:45 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Tue, 26 Jun 2007 22:29:45 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <200706261853.l5QIraN03834@f7.net> (Karl Berry's message of "Tue\,
	26 Jun 2007 13\:53\:36 -0500")
References: <200706261853.l5QIraN03834@f7.net>
Message-ID: <874pkularq.fsf@riesling.zuerich.kuesterei.ch>

karl at freefriends.org (Karl Berry) wrote:

>       pronounciation/spelling relations, but 'colo(u|)r' does not work (but
>
> Don't Lua regexps support alternation?

Not according to http://www.lua.org/manual/5.1/manual.html#5.4.1 ( The
pipe symbol | matches itself).

> (Well, I gather regexps aren't "built in" to Lua proper, but whatever
> external thingy implements them.)

string.foo

Or is there something else?

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From pragma at wxs.nl  Tue Jun 26 22:50:44 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 26 Jun 2007 22:50:44 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <874pkularq.fsf@riesling.zuerich.kuesterei.ch>
References: <200706261853.l5QIraN03834@f7.net>
	<874pkularq.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <46817C24.5010404@wxs.nl>

Frank K?ster wrote:
> karl at freefriends.org (Karl Berry) wrote:
> 
>>       pronounciation/spelling relations, but 'colo(u|)r' does not work (but
>>
>> Don't Lua regexps support alternation?
> 
> Not according to http://www.lua.org/manual/5.1/manual.html#5.4.1 ( The
> pipe symbol | matches itself).
> 
>> (Well, I gather regexps aren't "built in" to Lua proper, but whatever
>> external thingy implements them.)
> 
> string.foo
> 
> Or is there something else?
>

a regexp library in lua would result in more code being dedicated to 
regexp than to lua itself

alternation can be done by using a loop (of a few nested loops if there 
are more alternations); pretty fast btw

there is also an experimental lpeg parser which is alpha stage and the 
interface may change but here is a good chance that something like that 
will make it into the lua core some time in the future; we decided to 
add it to luatex prematurely in orde to be able to play with it

(at tug 2005 the lua author will do a workshop on lpeg)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From karl at freefriends.org  Tue Jun 26 22:54:02 2007
From: karl at freefriends.org (Karl Berry)
Date: Tue, 26 Jun 2007 15:54:02 -0500
Subject: [tex-live] texdoc in luatex
In-Reply-To: <871wfzrlhd.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <200706262054.l5QKs2X10262@f7.net>

    Should and/or will [pdf 1.5] be the default in TeXLive 2008? 

I sincerely hope not.  Way too many older readers out there.

karl

From karl at freefriends.org  Tue Jun 26 22:59:58 2007
From: karl at freefriends.org (Karl Berry)
Date: Tue, 26 Jun 2007 15:59:58 -0500
Subject: [tex-live] texdoc in luatex
In-Reply-To: <46817C24.5010404@wxs.nl>
Message-ID: <200706262059.l5QKxwX12174@f7.net>

    there is also an experimental lpeg parser which is alpha stage and the 

>From http://www.inf.puc-rio.br/~roberto/lpeg.html, I see it has
alternation, more or less, so I'm happy, I guess :).

The re syntactic sugar talked about there is really needed.  Too many
people's brains have regex syntax embedded in them, no matter how much
core it takes up there :).

karl

From frank at kuesterei.ch  Wed Jun 27 08:38:53 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Wed, 27 Jun 2007 08:38:53 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <200706262059.l5QKxwX12174@f7.net> (Karl Berry's message of "Tue\,
	26 Jun 2007 15\:59\:58 -0500")
References: <200706262059.l5QKxwX12174@f7.net>
Message-ID: <87wsxpoq9u.fsf@riesling.zuerich.kuesterei.ch>

karl at freefriends.org (Karl Berry) wrote:

>     there is also an experimental lpeg parser which is alpha stage and the 
>
>>From http://www.inf.puc-rio.br/~roberto/lpeg.html, I see it has
> alternation, more or less, so I'm happy, I guess :).

I've only had a quick look, but I don't think it helps much in my case,
nor would a loop help.  The only thing that would help me is if people
can use "standard" alternation syntax on the commandline,

texdoc -s 'colo(u|)r'

but for a loop or lpeg.S(colou)+lpeg.S(colo) my script would have to
understand the "standard" alternation.

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From frank at kuesterei.ch  Wed Jun 27 08:39:35 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Wed, 27 Jun 2007 08:39:35 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <20070626202033.GA8115@gamma.logic.tuwien.ac.at> (Norbert
	Preining's message of "Tue\, 26 Jun 2007 22\:20\:33 +0200")
References: <18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
	<20070626202033.GA8115@gamma.logic.tuwien.ac.at>
Message-ID: <87sl8doq8o.fsf@riesling.zuerich.kuesterei.ch>

Norbert Preining <preining at logic.at> wrote:

> On Die, 26 Jun 2007, Frank K?ster wrote:
>> - the shebang line is not yet fixed, since the Debian package doesn't
>>   install /usr/bin/texlua yet.
>
> They do.

Thank you.  You can't provide backports automatically, can you?

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From zdenek.wagner at gmail.com  Wed Jun 27 11:10:48 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 27 Jun 2007 11:10:48 +0200
Subject: [tex-live] fullpage package, tabular and margin
In-Reply-To: <4ba3c6910706260920n10869bb3p56a45276c7604ada@mail.gmail.com>
References: <4ba3c6910706260920n10869bb3p56a45276c7604ada@mail.gmail.com>
Message-ID: <8719b6240706270210x2b79ed38m3009da1136307677@mail.gmail.com>

2007/6/26, c l <laurent07 at gmail.com>:
> When i compile and see the following tex code, i have the text and last
> \hline too right vs. *Achieved Projects* and first big \rule.
> I'd like the text and last \hline in line with *Archived Projects* and first
> big \rule.
>
> How can i fix the right margin issue in the following tex code?
>
Your table is too wide. The width of the second column is equal to the
\textwidth, so you have the width of the first column + 4\tabcolsep
more. \hline is inside the table, so its width is the width of the
table while the width of the first rule is \textwidth. I would not use
tabular for such a code. This is my solution:

\documentclass[10pt]{article}
\usepackage{charter}
\usepackage{fullpage}
\usepackage[colorlinks=false]{hyperref}

\pagestyle{empty}

\newenvironment{myitems}[1][2000]{\normalfont \normalsize \flushleft
% you wished flushleft
  \noindent\rule[-1ex]{\textwidth}{2.5pt}\par
  \settowidth\leftskip{\textbf{#1}\hspace{.5em}}%
  \parskip 2.5ex
  \def\mklabel##1 {\noindent\llap{\hbox to
\leftskip{\textbf{##1}\hss}}\ignorespaces}%
  \everypar{\mklabel}}%
  {\par\everypar{}\leftskip0mm\noindent\rule[-1ex]{\textwidth}{2.5pt}\par}

\begin{document}
\flushright
{\LARGE\bfseries
Achieved Projects
}

\begin{myitems}
2003
\textbf{Project 1 Virtual channels Allocation} \emph{UML-Java, Network
Calculus} -- Study the
allocation of the virtual channels of the Project 1 Study Full-Duplex
Layer 2 (\,part 7 of the
Standard B Specification\,) in order to comply with the latency
constraints, bus load, and safety.
Use of methods of network computations, optimization with constraints
and heuristcs.  Define and
compare different algorithms allowing the optimization of the virtual
channels allocation.

2002
\textbf{Network Simulations} \emph{QNAP} -- Analyze the network
performance evaluations via
software simulation with QNAP.
\end{myitems}
\end{document}


>
> \documentclass[10pt]{article}
> \usepackage{charter}
> \usepackage{fullpage}
> \usepackage[colorlinks=false]{hyperref}
>
> \pagestyle{empty}
>
> \begin{document}
> \flushright
> {\LARGE\bfseries
> Achieved Projects
> }
> \noindent\rule[-1ex]{\textwidth}{2.5pt}\\[2.5ex]
> \flushleft
> \begin{tabular}{lp{\textwidth}}
> \textbf{2003}  &
> \textbf{Project 1 Virtual channels Allocation} \emph{UML-Java, Network
> Calculus} -- Study the allocation of the virtual channels of the Project 1
> Study Full-Duplex Layer 2 (\,part 7 of the Standard B Specification\,) in
> order to comply with the latency constraints, bus load, and safety. Use of
> methods of network computations, optimization with constraints and
> heuristcs. Define and compare different algorithms allowing the optimization
> of the virtual channels allocation.\\[ 2.5ex]
> \textbf{2002} &
> \textbf{Network Simulations} \emph{QNAP} -- Analyze the network performance
> evaluations via software simulation with QNAP.\\[2.5ex]
> \hline
> \end{tabular}
> \end{document}


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From frank at kuesterei.ch  Wed Jun 27 10:35:10 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Wed, 27 Jun 2007 10:35:10 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <18049.18704.102431.995352@zarniwoop.ms25.local> (Reinhard
	Kotucha's message of "Tue\, 26 Jun 2007 19\:12\:48 +0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>
	<87r6nymzs0.fsf@riesling.zuerich.kuesterei.ch>
	<18049.18704.102431.995352@zarniwoop.ms25.local>
Message-ID: <87bqf1okw1.fsf@riesling.zuerich.kuesterei.ch>

Reinhard Kotucha <reinhard.kotucha at web.de> wrote:

> texdoc_viewer = { 
>    dvi  = '(start "" %s ) &',
>    html = '(start "" %s) &',
>    pdf = '(start "" %s) &'
> };
>
> On Windows filename extensions are associated with programs.

On (Debian) GNU/Linux, too, actually we use "see %s".

But I guess there's a problem with "start":  Won't it return at once
when the viewer has been launched?  This would only work for
uncompressed files.  For compressed, I need a command like

"($startcommand $filename; rm $filename; rmdir $tempdir) &"

and I guess this works only if "rm" is only executed after startcommand
doesn't need and lock $filename any more.  Or will the file stay opened
and present on disk until the viewer exits, without being accessible in
any directory?

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From frank at kuesterei.ch  Wed Jun 27 14:58:46 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Wed, 27 Jun 2007 14:58:46 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <18049.16253.561266.346143@zarniwoop.ms25.local> (Reinhard
	Kotucha's message of "Tue\, 26 Jun 2007 18\:31\:57 +0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>
	<18049.16253.561266.346143@zarniwoop.ms25.local>
Message-ID: <87fy4d8sft.fsf@riesling.zuerich.kuesterei.ch>

Reinhard Kotucha <reinhard.kotucha at web.de> wrote:

> Frank K?ster writes:
>
>  > - How do I detect whether I'm on windows?  
>
> In Perl I always test (-d "/usr/bin").  Provides correct results for
> Cygwin too (which is a UNIX-like system).

Fine, lfs.isdir("/usr/bin").  However, what can I use to distinguish OSX
from other unix-like systems?  bash-texdoc checks for "Darwin" in 
`uname -s`, but there doesn't seem any lua function which executes an
external command and returns its stdout.

Is there some file which could be used for this?

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From jonathan_kew at sil.org  Wed Jun 27 17:23:29 2007
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Wed, 27 Jun 2007 16:23:29 +0100
Subject: [tex-live] bugfixes for TL2007
Message-ID: <394F0AB5-9C72-49ED-B89C-A029564ECE7F@sil.org>

I have just checked in a few bug fixes for XeTeX in TeX Live 2007, in  
texlive/branches/branch2007 of the SVN repository.


Some notes regarding how things are arranged in the repository:

* texlive/trunk will no doubt receive all kinds of updates, new  
features, etc over the coming months. This is in contrast to the  
TL2007 branch discussed below.

* texlive/branches/branch2007 is for the TL2007 release, and will not  
receive new features, only bug fixes for what's already part of the  
release. (Until today, it was untouched since the release.)

* texlive/tags/texlive-2007.0 is a copy of TL2007 at the time of the  
DVD release; this should not be changed. Additional tags may be  
created to identify subsequent bug-fix "releases" (even though these  
will not be released on physical media).

* the copy of source.tar.bz2 in branch2007 is not necessarily up-to- 
date with the most recent patches committed to the actual source tree  
there. (Dates and/or revision numbers should make this clear!) I  
suggest that when we tag a bug-fix release, though, we should ensure  
it has a fresh source.tar.bz2 archive as a convenience for  
redistributors who wish to adopt the fixed version as the basis of  
their packages.


Regarding the actual fixes committed to the 2007 branch: these  
primarily provide xetex compatibility on big-endian 64-bit systems.  
In addition, they correct two minor bugs where xetex generated  
incorrect output, and protect xetex and xdvipdfmx from certain kinds  
of defective TrueType fonts that could cause crashes.

The current branch2007/Build/source code has been successfully built  
on powerpc-darwin, i386-darwin, i386-openbsd, and i386-linux. If the  
changes have inadvertently introduced problems anywhere else, please  
let me know.

A cumulative patch based on the code from the DVD release can readily  
be generated from Subversion:

   svn diff svn://tug.org/texlive/tags/texlive-2007.0/Build/source \
            svn://tug.org/texlive/branches/branch2007/Build/source \
            > tl2007.1.patch.txt

This generates a 32K patch incorporating all the changes so far. (See  
the Subversion log for more details of the individual changes, if  
desired.)

If no problems are noted within the next couple of days, I propose to  
update source.tar.bz2 in the branch, and tag this bug-fix release as  
texlive-2007.1.

JK


From maarten.sneep at xs4all.nl  Wed Jun 27 17:22:50 2007
From: maarten.sneep at xs4all.nl (Maarten Sneep)
Date: Wed, 27 Jun 2007 17:22:50 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <871wfx8mmj.fsf@riesling.zuerich.kuesterei.ch>
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>
	<18049.16253.561266.346143@zarniwoop.ms25.local>
	<87fy4d8sft.fsf@riesling.zuerich.kuesterei.ch>
	<7B2E0C99-8891-495B-915B-94093180624A@xs4all.nl>
	<871wfx8mmj.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <3B55B4DF-A752-453D-8BA5-A788BB167DB6@xs4all.nl>


On Jun 27, 2007, at 17:04, Frank K?ster wrote:

> Hi Maarten,
>
> Did you reply to me in private on purpose?  I wouldn't mind continuing
> this on the list, feel free to quote me there

No, just the setting in my mail client (reply to instead of reply to  
all), and the setting of the mailing list setting the reply-to header  
to the sender only rather than the list.

> Maarten Sneep <maarten.sneep at xs4all.nl> wrote:
>
>> A similar trick could be used, I think. The trick bit is not to call
>> a plain Darwin 'Mac OS X', unless you don't care about that (i.e.
>> what do you need this information for?)
>
> I need it for assigning proper viewer commands: Windows has "start % 
> s",
> Debian Linux "see %s", other Unices individual calls like "gv %s".
> That's what the old texdoc script uses, and for "`uname -s` =  
> Darwin" it
> uses "open %s".

That is what I guessed. If you can test for the existence of a  
directory, then it seems that testing for the existence of a file  
should be possible as well. Why not check for the existence of /usr/ 
bin/open?

if [ -x /usr/bin/open -a -x ]
then
	handle='/usr/bin/open'
fi

>> Potential directories to test for:
>>
>> /.Spotlight-V100
>> (Mac OS X 10.4.x or later only)
>> /.Trashes
>> /Applications
>>
>> Potential files:
>> /Desktop DB
>> /Desktop DF
>> .DS_Store
>
> Hm.  I don't want to restrict myself to >= 10.4.x; but the others  
> don't
> really look too safe.  Some other system might have them, too...

I guess that that is always the case. Do you want a listing of any  
particular drectory to see if I missed something?

>> If you don't care about mixing Darwin and Mac OS X, then the
>> pressence of the kernel is probably a decent choice: /mach_kernel, /
>> mach.sym (although this may catch other mach-based systems).
>
> I fear other systems might not have "open", have they?

Actually, I don't think that open is present on 'pure' Darwin either.

Maarten

From martin at oneiros.de  Wed Jun 27 17:33:18 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 27 Jun 2007 17:33:18 +0200
Subject: [tex-live] bugfixes for TL2007
In-Reply-To: <394F0AB5-9C72-49ED-B89C-A029564ECE7F@sil.org>
References: <394F0AB5-9C72-49ED-B89C-A029564ECE7F@sil.org>
Message-ID: <68c491a60706270833s21f6f83dya1662dbcd50d2afb@mail.gmail.com>

2007/6/27, Jonathan Kew <jonathan_kew at sil.org>:
> If no problems are noted within the next couple of days, I propose to
> update source.tar.bz2 in the branch, and tag this bug-fix release as
> texlive-2007.1.

I will release pdfTeX 1.40.4 till TUG2007; how difficult would it be
to release an updated image after that?

Best
   Martin

From frank at kuesterei.ch  Wed Jun 27 18:06:55 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Wed, 27 Jun 2007 18:06:55 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <3B55B4DF-A752-453D-8BA5-A788BB167DB6@xs4all.nl> (Maarten Sneep's
	message of "Wed\, 27 Jun 2007 17\:22\:50 +0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>
	<18049.16253.561266.346143@zarniwoop.ms25.local>
	<87fy4d8sft.fsf@riesling.zuerich.kuesterei.ch>
	<7B2E0C99-8891-495B-915B-94093180624A@xs4all.nl>
	<871wfx8mmj.fsf@riesling.zuerich.kuesterei.ch>
	<3B55B4DF-A752-453D-8BA5-A788BB167DB6@xs4all.nl>
Message-ID: <87k5tp5qlc.fsf@riesling.zuerich.kuesterei.ch>

Maarten Sneep <maarten.sneep at xs4all.nl> wrote:

>> I need it for assigning proper viewer commands: Windows has "start %
>> s",
>> Debian Linux "see %s", other Unices individual calls like "gv %s".
>> That's what the old texdoc script uses, and for "`uname -s` =
>> Darwin" it
>> uses "open %s".
>
> That is what I guessed. If you can test for the existence of a
> directory, then it seems that testing for the existence of a file
> should be possible as well. Why not check for the existence of /usr/
> bin/open?
>
> if [ -x /usr/bin/open -a -x ]
> then
> 	handle='/usr/bin/open'
> fi

Yes, that's surely the best way to decide whether open should be used (I
just wasn't sure where it is in the filesystem).
lfs.isfile('/usr/bin/open').  Or even using $PATH

if os.execute('open 2>/dev/null') / 256 == 127 then
   print("does not exist")
end

Hm, what does that give on Windows?  If you don't know, execute the
following lua script

********* snip *********
#!/usr/bin/env texlua

if os.execute('nothere 2>/dev/null') / 256 == 127 then
   print("does not exist")
end
********* snap *********

and tell me the output

Regards, Frank

-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From frank at kuesterei.ch  Wed Jun 27 18:07:32 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Wed, 27 Jun 2007 18:07:32 +0200
Subject: [tex-live] bugfixes for TL2007
In-Reply-To: <68c491a60706270833s21f6f83dya1662dbcd50d2afb@mail.gmail.com>
	(Martin =?iso-8859-1?Q?Schr=F6der's?= message of "Wed\, 27 Jun 2007
	17\:33\:18 +0200")
References: <394F0AB5-9C72-49ED-B89C-A029564ECE7F@sil.org>
	<68c491a60706270833s21f6f83dya1662dbcd50d2afb@mail.gmail.com>
Message-ID: <87fy4d5qkb.fsf@riesling.zuerich.kuesterei.ch>

"Martin Schr?der" <martin at oneiros.de> wrote:

> 2007/6/27, Jonathan Kew <jonathan_kew at sil.org>:
>> If no problems are noted within the next couple of days, I propose to
>> update source.tar.bz2 in the branch, and tag this bug-fix release as
>> texlive-2007.1.
>
> I will release pdfTeX 1.40.4 till TUG2007; how difficult would it be
> to release an updated image after that?

Has the pool file changed?

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From martin at oneiros.de  Wed Jun 27 18:17:23 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 27 Jun 2007 18:17:23 +0200
Subject: [tex-live] bugfixes for TL2007
In-Reply-To: <87fy4d5qkb.fsf@riesling.zuerich.kuesterei.ch>
References: <394F0AB5-9C72-49ED-B89C-A029564ECE7F@sil.org>
	<68c491a60706270833s21f6f83dya1662dbcd50d2afb@mail.gmail.com>
	<87fy4d5qkb.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <68c491a60706270917s604d3124v4a7996963a55471f@mail.gmail.com>

2007/6/27, Frank K?ster <frank at kuesterei.ch>:
> Has the pool file changed?

Yes.

Best
   Martin

From preining at logic.at  Wed Jun 27 17:54:09 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 27 Jun 2007 17:54:09 +0200
Subject: [tex-live] bugfixes for TL2007
In-Reply-To: <68c491a60706270833s21f6f83dya1662dbcd50d2afb@mail.gmail.com>
References: <394F0AB5-9C72-49ED-B89C-A029564ECE7F@sil.org>
	<68c491a60706270833s21f6f83dya1662dbcd50d2afb@mail.gmail.com>
Message-ID: <20070627155409.GF22631@gamma.logic.tuwien.ac.at>

Hi Martin,

On Mit, 27 Jun 2007, Martin Schr?der wrote:
> I will release pdfTeX 1.40.4 till TUG2007; how difficult would it be
> to release an updated image after that?

Umpf. Does this need new pool files?

If yes it is not a good idea to include it into the 2007 branch because
we would have to build on *ALL* archs again ...

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
NAD (n.)
Measure defined as the distance between a driver's outstretched
fingertips and the ticket machine in an automatic car-park. 1 nad =
18.4 cm.
			--- Douglas Adams, The Meaning of Liff

From reinhard.kotucha at web.de  Wed Jun 27 20:46:08 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 27 Jun 2007 20:46:08 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87k5tp5qlc.fsf@riesling.zuerich.kuesterei.ch>
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>
	<18049.16253.561266.346143@zarniwoop.ms25.local>
	<87fy4d8sft.fsf@riesling.zuerich.kuesterei.ch>
	<7B2E0C99-8891-495B-915B-94093180624A@xs4all.nl>
	<871wfx8mmj.fsf@riesling.zuerich.kuesterei.ch>
	<3B55B4DF-A752-453D-8BA5-A788BB167DB6@xs4all.nl>
	<87k5tp5qlc.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <18050.45168.366154.383572@zarniwoop.ms25.local>

Frank K?ster writes:

 > if os.execute('nothere 2>/dev/null') / 256 == 127 then
 >    print("does not exist")
 > end

/dev/null works on UNIX, on Windows it's nul (and does not appear in
the filesystem).  However, another nice solution would be to walk
through the path (os.getenv("PATH")).  With other words, write a
function which does the same as the UNIX which command.

Note that paths are separated by ";" on Windows instead of ":".

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From reinhard.kotucha at web.de  Thu Jun 28 00:04:23 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Thu, 28 Jun 2007 00:04:23 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <18050.45168.366154.383572@zarniwoop.ms25.local>
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>
	<18049.16253.561266.346143@zarniwoop.ms25.local>
	<87fy4d8sft.fsf@riesling.zuerich.kuesterei.ch>
	<7B2E0C99-8891-495B-915B-94093180624A@xs4all.nl>
	<871wfx8mmj.fsf@riesling.zuerich.kuesterei.ch>
	<3B55B4DF-A752-453D-8BA5-A788BB167DB6@xs4all.nl>
	<87k5tp5qlc.fsf@riesling.zuerich.kuesterei.ch>
	<18050.45168.366154.383572@zarniwoop.ms25.local>
Message-ID: <18050.57063.119441.958164@zarniwoop.ms25.local>

Reinhard Kotucha writes:

 > However, another nice solution would be to walk through the path
 > (os.getenv("PATH")).  With other words, write a function which does
 > the same as the UNIX which command.

I forgot to say this: It would be nice if environment variables like
TEXDOC_VIEWER_DVI, TEXDOC_VIEWER_HTML, TEXDOC_VIEWER_PDF, ... are
evaluated before you attempt to search for a program.

Not everybody is happy with the defaults.  The best way to access
these environment variables is using kpse.expand_var.  Then a system
administrator can set reasonable default values for a particular
platform in texmf.cnf and a user can overwrite them in his
environment.

There are many good reasons to make this configurable.  Some people
prefer xpdf, others prefer acroread.  If some package doesn't provide
any documentation, you'll be pointed to the catalogue HTML files.
This is not a big problem if a web browser is already running but it
is very annoying if it has to be launched.

The tex-catalogue HTML files are well designed and are formatted
perfectly in text-based web browsers like elinks or lynx.  Since many
people are not familiar with them we have to launch such clumsy and
stupid programs like firefox by default.  But it should be
customizable.

Cheers,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From reinhard.kotucha at web.de  Thu Jun 28 00:46:37 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Thu, 28 Jun 2007 00:46:37 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87wsxpoq9u.fsf@riesling.zuerich.kuesterei.ch>
References: <200706262059.l5QKxwX12174@f7.net>
	<87wsxpoq9u.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <18050.59597.981425.464346@zarniwoop.ms25.local>

Frank K?ster writes:

 > I've only had a quick look, but I don't think it helps much in my case,
 > nor would a loop help.  The only thing that would help me is if people
 > can use "standard" alternation syntax on the commandline,
 > 
 > texdoc -s 'colo(u|)r'

I fear that most users are not familiar with regular expressions
anyway.  

Regular expressions are fine, but what do you think about an alias file?
______________________
alias colour color
alias amslatex amsldoc
...
______________________

The amslatex/amsldoc problem cannot be solved by regular expressions.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From frank at kuesterei.ch  Thu Jun 28 09:14:19 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Thu, 28 Jun 2007 09:14:19 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <18050.57063.119441.958164@zarniwoop.ms25.local> (Reinhard
	Kotucha's message of "Thu\, 28 Jun 2007 00\:04\:23 +0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>
	<18049.16253.561266.346143@zarniwoop.ms25.local>
	<87fy4d8sft.fsf@riesling.zuerich.kuesterei.ch>
	<7B2E0C99-8891-495B-915B-94093180624A@xs4all.nl>
	<871wfx8mmj.fsf@riesling.zuerich.kuesterei.ch>
	<3B55B4DF-A752-453D-8BA5-A788BB167DB6@xs4all.nl>
	<87k5tp5qlc.fsf@riesling.zuerich.kuesterei.ch>
	<18050.45168.366154.383572@zarniwoop.ms25.local>
	<18050.57063.119441.958164@zarniwoop.ms25.local>
Message-ID: <87abukczzo.fsf@riesling.zuerich.kuesterei.ch>

Reinhard Kotucha <reinhard.kotucha at web.de> wrote:

> Reinhard Kotucha writes:
>
>  > However, another nice solution would be to walk through the path
>  > (os.getenv("PATH")).  With other words, write a function which does
>  > the same as the UNIX which command.
>
> I forgot to say this: It would be nice if environment variables like
> TEXDOC_VIEWER_DVI, TEXDOC_VIEWER_HTML, TEXDOC_VIEWER_PDF, ... are
> evaluated before you attempt to search for a program.

That will happen anyway if I query kpse.var_value:

$ grep TEXDOC_VIEWER_DVI /etc/texmf/texmf.cnf 
TEXDOC_VIEWER_DVI = evince
$ kpsewhich --var-value='TEXDOC_VIEWER_DVI'
evince
$ TEXDOC_VIEWER_DVI=xdvi kpsewhich --var-value='TEXDOC_VIEWER_DVI'
xdvi

But I want to set sane defaults in case there is nothing in texmf.cnf.
I want texdoc to work even when just copied to a MikTeX or whateverTeX
system (as long as they have luatex, of course).

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From frank at kuesterei.ch  Thu Jun 28 09:20:40 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Thu, 28 Jun 2007 09:20:40 +0200
Subject: [tex-live] Typo on the web site: missing architecture
Message-ID: <87sl8cbl4n.fsf@riesling.zuerich.kuesterei.ch>

Hi,

from http://www.tug.org/texlive/doc.html

# powerpc-aix (IBM RS/6000 AIX)
# powerpc-darwin (PowerPC MacOSX; bash.dmg available for bootstrap)
# powerpc-aix (PowerPC GNU/Linux) 

The third line should contain "powerpc-linux", I guess.

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From pragma at wxs.nl  Thu Jun 28 11:58:54 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 28 Jun 2007 11:58:54 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <18050.45168.366154.383572@zarniwoop.ms25.local>
References: <466ACF98.8090603@gmx.net>	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>	<18027.8235.396400.342647@zarniwoop.ms25.local>	<20070609220059.GO834@gamma.logic.tuwien.ac.at>	<18027.9656.741195.13867@zarniwoop.ms25.local>	<466BB0AF.9070606@elvenkind.com>	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>	<466BF9EF.507@elvenkind.com>	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>	<466D0A32.3000506@elvenkind.com>	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>	<18049.16253.561266.346143@zarniwoop.ms25.local>	<87fy4d8sft.fsf@riesling.zuerich.kuesterei.ch>	<7B2E0C99-8891-495B-915B-94093180624A@xs4all.nl>	<871wfx8mmj.fsf@riesling.zuerich.kuesterei.ch>	<3B55B4DF-A752-453D-8BA5-A788BB167DB6@xs4all.nl>	<87k5tp5qlc.fsf@riesling.zuerich.kuesterei.ch>
	<18050.45168.366154.383572@zarniwoop.ms25.local>
Message-ID: <4683865E.2030007@wxs.nl>

Reinhard Kotucha wrote:
> Frank K?ster writes:
> 
>  > if os.execute('nothere 2>/dev/null') / 256 == 127 then
>  >    print("does not exist")
>  > end
> 
> /dev/null works on UNIX, on Windows it's nul (and does not appear in
> the filesystem).  However, another nice solution would be to walk
> through the path (os.getenv("PATH")).  With other words, write a
> function which does the same as the UNIX which command.
> 
> Note that paths are separated by ";" on Windows instead of ":".

this is indeed a good test, here i normally use:

if string.find(os.getenv("PATH"),";") then
   -- windows
else
   -- unix
end

doing an os.execute is an unneccessary slow alternative

Hans



-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From jschrod at acm.org  Thu Jun 28 11:47:10 2007
From: jschrod at acm.org (Joachim Schrod)
Date: Thu, 28 Jun 2007 11:47:10 +0200
Subject: [tex-live] Build/source/Makefile oddity in all target
Message-ID: <f6002v$l8q$1@sea.gmane.org>

Hi,

In Build/source/Makefile.in we have:

all: @LIBSDEP@
all clean mostlyclean:
	esubdirs="$(LIBSDIRS) $(ESUBDIRS)"; \
	  for dir in $$esubdirs; do \
	    echo making $@ in $$dir; \
	    (if test -f $$dir/Makefile; then cd $$dir && $(MAKE) $@; else 
true; fi) || exit 1; \
	  done

where the first line expands to

all:  $(ZLIBDIR)/libz.a $(LIBPNGDIR)/libpng.a  $(LIBT1DIR)/libt1.a 
$(LIBT1DIR)/../type1/libtype1.a   $(FREETYPE2DIR)/.libs/libfreetype.a

in the generated Makefile. I'd like to inquire about the intent of 
that:

$(LIBDIRS) has all the library directories that are in @LIBSDEP@, 
so these libraries will be made by the recursion in the all action 
anyhow. Nothing else is done before. So why was the @LIBSDEP@ 
dependency added explicitly?

That said, I find the target in itself very convenient: Currently I 
work only on drivers and not on anything web2c related. I.e., I 
don't want to compile the whole web2c shebang just to change the 
source of a dvi driver. When I change the first dependency line to

lib: @LIBSDEP@

(and maybe add lib as dependency to the rule below, even though 
that's superfluous owing to the recursion into $(LIBSDIRS)), then 
I'm able to call "make lib" in Build/source and thus get all 
prerequisites done to be able to go into a specific subdirectory 
(say, texk/dviljk/) and use make there without further problems.

Maybe such a change would meet general agreement by you?

Best, and TIA for any answer,

	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod				Email: jschrod at acm.org
Roedermark, Germany


From jschrod at acm.org  Thu Jun 28 12:25:13 2007
From: jschrod at acm.org (Joachim Schrod)
Date: Thu, 28 Jun 2007 12:25:13 +0200
Subject: [tex-live] Inconsistency in SVN repository and make clean in
	alephdir
Message-ID: <f602aa$sor$1@sea.gmane.org>

Hi,

The Make include file Build/source/texk/web2c/alephdir/aleph.mk 
deletes $(alephdir)/alephextra.h in its aleph-clean target; but 
that file is checked into SVN. That means that a make distclean 
does not leave a pristine source tree.

Somebody who knows the aleph context better might either remove 
that file from SVN, or discard its deletion from aleph.mk.

Best,
	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod				Email: jschrod at acm.org
Roedermark, Germany


From zdenek.wagner at gmail.com  Thu Jun 28 12:29:55 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 28 Jun 2007 12:29:55 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <4683865E.2030007@wxs.nl>
References: <466ACF98.8090603@gmx.net>
	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>
	<18049.16253.561266.346143@zarniwoop.ms25.local>
	<87fy4d8sft.fsf@riesling.zuerich.kuesterei.ch>
	<7B2E0C99-8891-495B-915B-94093180624A@xs4all.nl>
	<871wfx8mmj.fsf@riesling.zuerich.kuesterei.ch>
	<3B55B4DF-A752-453D-8BA5-A788BB167DB6@xs4all.nl>
	<87k5tp5qlc.fsf@riesling.zuerich.kuesterei.ch>
	<18050.45168.366154.383572@zarniwoop.ms25.local>
	<4683865E.2030007@wxs.nl>
Message-ID: <8719b6240706280329l54822a24r2efb72ca7ea8bb9f@mail.gmail.com>

2007/6/28, Hans Hagen <pragma at wxs.nl>:
> Reinhard Kotucha wrote:
> > Frank K?ster writes:
> >
> >  > if os.execute('nothere 2>/dev/null') / 256 == 127 then
> >  >    print("does not exist")
> >  > end
> >
> > /dev/null works on UNIX, on Windows it's nul (and does not appear in
> > the filesystem).  However, another nice solution would be to walk
> > through the path (os.getenv("PATH")).  With other words, write a
> > function which does the same as the UNIX which command.
> >
> > Note that paths are separated by ";" on Windows instead of ":".
>
> this is indeed a good test, here i normally use:
>
> if string.find(os.getenv("PATH"),";") then
>    -- windows
or OS/2

> else
>    -- unix
> end
>
I know that OS/2 (eComStation) is not yet supported in TL but thinking
to the future this more extensive test should work:

if string.find(os.getenv("PATH"), ";") then
  if string.find(os.getenv("PATH"), "\\OS2\\") then
    -- OS/2
  else
    -- windows
  end
else
  -- unix
end

> doing an os.execute is an unneccessary slow alternative
>
> Hans
>
>
>
> -----------------------------------------------------------------
>                                            Hans Hagen | PRAGMA ADE
>                Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>       tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
>                                               | www.pragma-pod.nl
> -----------------------------------------------------------------
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From pragma at wxs.nl  Thu Jun 28 12:51:55 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 28 Jun 2007 12:51:55 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <8719b6240706280329l54822a24r2efb72ca7ea8bb9f@mail.gmail.com>
References: <466ACF98.8090603@gmx.net>	
	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>	
	<18049.16253.561266.346143@zarniwoop.ms25.local>	
	<87fy4d8sft.fsf@riesling.zuerich.kuesterei.ch>	
	<7B2E0C99-8891-495B-915B-94093180624A@xs4all.nl>	
	<871wfx8mmj.fsf@riesling.zuerich.kuesterei.ch>	
	<3B55B4DF-A752-453D-8BA5-A788BB167DB6@xs4all.nl>	
	<87k5tp5qlc.fsf@riesling.zuerich.kuesterei.ch>	
	<18050.45168.366154.383572@zarniwoop.ms25.local>	
	<4683865E.2030007@wxs.nl>
	<8719b6240706280329l54822a24r2efb72ca7ea8bb9f@mail.gmail.com>
Message-ID: <468392CB.7040203@wxs.nl>

Zdenek Wagner wrote:

> 
> if string.find(os.getenv("PATH"), ";") then
>  if string.find(os.getenv("PATH"), "\\OS2\\") then
>    -- OS/2
>  else
>    -- windows
>  end
> else
>  -- unix
> end

Just curious. In what respect does os/2 need special treatment in tex 
live i.e. where does it differ from windows when it comes down to 
scripting?

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From frank at kuesterei.ch  Thu Jun 28 13:35:27 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Thu, 28 Jun 2007 13:35:27 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <468392CB.7040203@wxs.nl> (Hans Hagen's message of "Thu\,
	28 Jun 2007 12\:51\:55 +0200")
References: <466ACF98.8090603@gmx.net>
	<87k5tqog1o.fsf@riesling.zuerich.kuesterei.ch>
	<18049.16253.561266.346143@zarniwoop.ms25.local>
	<87fy4d8sft.fsf@riesling.zuerich.kuesterei.ch>
	<7B2E0C99-8891-495B-915B-94093180624A@xs4all.nl>
	<871wfx8mmj.fsf@riesling.zuerich.kuesterei.ch>
	<3B55B4DF-A752-453D-8BA5-A788BB167DB6@xs4all.nl>
	<87k5tp5qlc.fsf@riesling.zuerich.kuesterei.ch>
	<18050.45168.366154.383572@zarniwoop.ms25.local>
	<4683865E.2030007@wxs.nl>
	<8719b6240706280329l54822a24r2efb72ca7ea8bb9f@mail.gmail.com>
	<468392CB.7040203@wxs.nl>
Message-ID: <874pksjoqo.fsf@riesling.zuerich.kuesterei.ch>

Hans Hagen <pragma at wxs.nl> wrote:

> Zdenek Wagner wrote:
>
>>
>> if string.find(os.getenv("PATH"), ";") then
>>  if string.find(os.getenv("PATH"), "\\OS2\\") then
>>    -- OS/2
>>  else
>>    -- windows
>>  end
>> else
>>  -- unix
>> end
>
> Just curious. In what respect does os/2 need special treatment in tex
> live i.e. where does it differ from windows when it comes down to
> scripting?

The viewers are different.  But I'm not sure (Zdenek, that saves me an
answer to your private mail to me) whether it's worth catering for at
the moment.  Once TeXLive supports OS/2 officially and a decision about
the necessary separate add-ons (POSIX-shell etc.) has been made, we can
always add that.  But at the moment, I suggest that the OS/2 users just
put the commands into texmf.cnf.

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From zdenek.wagner at gmail.com  Thu Jun 28 13:57:54 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 28 Jun 2007 13:57:54 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <874pksjoqo.fsf@riesling.zuerich.kuesterei.ch>
References: <466ACF98.8090603@gmx.net>
	<7B2E0C99-8891-495B-915B-94093180624A@xs4all.nl>
	<871wfx8mmj.fsf@riesling.zuerich.kuesterei.ch>
	<3B55B4DF-A752-453D-8BA5-A788BB167DB6@xs4all.nl>
	<87k5tp5qlc.fsf@riesling.zuerich.kuesterei.ch>
	<18050.45168.366154.383572@zarniwoop.ms25.local>
	<4683865E.2030007@wxs.nl>
	<8719b6240706280329l54822a24r2efb72ca7ea8bb9f@mail.gmail.com>
	<468392CB.7040203@wxs.nl>
	<874pksjoqo.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <8719b6240706280457v459efef3ycf191783759e0f95@mail.gmail.com>

2007/6/28, Frank K?ster <frank at kuesterei.ch>:
> Hans Hagen <pragma at wxs.nl> wrote:
>
> > Zdenek Wagner wrote:
> >
> >>
> >> if string.find(os.getenv("PATH"), ";") then
> >>  if string.find(os.getenv("PATH"), "\\OS2\\") then
> >>    -- OS/2
> >>  else
> >>    -- windows
> >>  end
> >> else
> >>  -- unix
> >> end
> >
> > Just curious. In what respect does os/2 need special treatment in tex
> > live i.e. where does it differ from windows when it comes down to
> > scripting?
>
> The viewers are different.  But I'm not sure (Zdenek, that saves me an
> answer to your private mail to me) whether it's worth catering for at
> the moment.  Once TeXLive supports OS/2 officially and a decision about
> the necessary separate add-ons (POSIX-shell etc.) has been made, we can
> always add that.  But at the moment, I suggest that the OS/2 users just
> put the commands into texmf.cnf.
>
If the scripts look into texmf.cnf, it will be fine. kpsewhich
--expand-var works.

> Regards, Frank
> --
> Frank K?ster
> Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
> Debian Developer (teTeX/TeXLive)
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From john at wexfordpress.com  Thu Jun 28 13:27:35 2007
From: john at wexfordpress.com (John R. Culleton)
Date: Thu, 28 Jun 2007 07:27:35 -0400
Subject: [tex-live] Non-free parts within TeXLive 2007
In-Reply-To: <200705152045.l4FKjVO01100@f7.net>
References: <200705152045.l4FKjVO01100@f7.net>
Message-ID: <200706280727.35968.john@wexfordpress.com>

On Tuesday 15 May 2007 16:45, Karl Berry wrote:
>     mreadme seems (to me) to say that documentation is available in
> the tex collection, but that it's subject to a licence that means
> it shouldn't be in the tex collection.

>
Does this apply only to the Context documentation as furnished? Could 
a true GPLed set of documentation be written that did not plagarize 
the regular documentation? (This would be difficult.)  

BTW the Context macros also contain copyright notices. Hans Hagen will 
have to explain what his intentions are with these notices. Perhaps 
they exist only to prvent someone else from copyrighting them. 

-- 
John Culleton
ATTN Publishers/authors:
If you don't read you don't succeed.
Free short list of publishing/marketing books. 
http://wexfordpress.com/tex/shortlist.pdf



From frank at kuesterei.ch  Thu Jun 28 15:04:47 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Thu, 28 Jun 2007 15:04:47 +0200
Subject: [tex-live] Non-free parts within TeXLive 2007
In-Reply-To: <200706280727.35968.john@wexfordpress.com> (John R. Culleton's
	message of "Thu\, 28 Jun 2007 07\:27\:35 -0400")
References: <200705152045.l4FKjVO01100@f7.net>
	<200706280727.35968.john@wexfordpress.com>
Message-ID: <87lke4i61c.fsf@riesling.zuerich.kuesterei.ch>

"John R. Culleton" <john at wexfordpress.com> wrote:

> On Tuesday 15 May 2007 16:45, Karl Berry wrote:
>>     mreadme seems (to me) to say that documentation is available in
>> the tex collection, but that it's subject to a licence that means
>> it shouldn't be in the tex collection.
>
>>
> Does this apply only to the Context documentation as furnished? Could 
> a true GPLed set of documentation be written that did not plagarize 
> the regular documentation? (This would be difficult.)  

Of course you are free to rewrite the documentation.  I fear, most
people on this list have better things to do (in particular since it's
only the license which is questioned, whereas the quality seems to be
really good).

> BTW the Context macros also contain copyright notices. Hans Hagen will 
> have to explain what his intentions are with these notices. Perhaps 
> they exist only to prvent someone else from copyrighting them. 

What's the problem with these Copyright notices?  ConTeXt can be
distributed under the GPL or LPPL, as you prefer; don't mix up license
and copyright.

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From frank at kuesterei.ch  Thu Jun 28 16:47:40 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Thu, 28 Jun 2007 16:47:40 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87d4zipytw.fsf@riesling.zuerich.kuesterei.ch> (Frank
	=?iso-8859-1?Q?K=FCster's?= message of "Tue\, 26 Jun 2007 16\:36\:27
	+0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <87hcosi19v.fsf@riesling.zuerich.kuesterei.ch>

Frank K?ster <frank at kuesterei.ch> wrote:

> Frank K?ster <frank at kuesterei.ch> wrote:
>
>> Thanks, I've started working on "texdoclua".  
>
> So here is the next iteration.  

And the next one.  It implements the complete functionality of
bash-texdoc, plus it parses ls-R for the '-s' option, and it reads its
configuration from texmf.cnf (with defaults in the file, so it should
work without).  

Sample lines for texmf.cnf are given in the manpage.  So are the
limitations: 

       Specifying the filename, complete with extension
              This doesn't work for compressed files.

       Search in TEXMF trees without ls-R
               The -s-Option only searches in ls-R files.   It ignores TEXMF trees which don't have one.

       manpage
              The manpage has been written on a template created by pod2man, and its source contains a lot of (proba-
              bly) useless cruft at the beginning.


(Ah, and I forgot: How do I correctly type "K?ster" in a man page source?)

Regards, Frank


-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

-------------- next part --------------
#!/usr/bin/env texlua
--[[ Written in lua by Frank K?ster (2007) based on the shell script by
Thomas Esser, David Aspinall, and Simon Wilkinson.
Public domain.]]

progname = 'texdoc';
version = '0.2';
usage = '      Usage: ' .. progname ..' [-h|--help] name\
	 -h|--help\t\t Show this help\
         -V|--version\t\t Print the version of the program\
         -v|--verbose\t\t Show the command being used to display the documentation\
         -l|--list\t\t List matching files, do not start a viewer.\
         -s|--search\t\t search for name as a pattern';


if not arg[1] then
   print (usage);
   return
end

mode = 'view';
verbose = false;
while table.maxn(arg) > 0 and string.match(arg[1],'^%-') do
   curr_arg = table.remove(arg,1)
   if string.match (curr_arg,'-h') or string.match (curr_arg,'--help') then
      print (usage);
      os.exit(0);
   elseif string.match (curr_arg,'-V') or string.match (curr_arg,'--version') then
      print (progname .. ' version: ' .. version );
      os.exit(0);
   elseif string.match (curr_arg,'-v') or string.match (curr_arg,'--verbose') then
      verbose = true;
   elseif string.match (curr_arg,'-l') or string.match (curr_arg,'--list'   ) then
      mode = 'list';
   elseif string.match (curr_arg,'-s') or string.match (curr_arg,'--search'   ) then
      mode = 'search';
   end
end

--[[ function definitions ]]
function list_iter (t)
   local i = 0
   local n = table.getn(t)
   return function ()
	     i = i + 1
	     if i <= n then return t[i] end
	  end
end


-- [[ functions for the search option ]]

function get_lsr_files ()
   local lsr_files = {};
   local pathlist = kpse.expand_braces('$TEXDOCS');
   for path in string.gmatch(pathlist, "[^:;]*") do
      path = string.gsub(path,'doc//$','')
      path = string.gsub(path,'^!!','')
      if lfs.isfile(path .. "ls-R") then
	 table.insert(lsr_files,path .. "ls-R")
      end -- does lsRfile exist?
   end -- for path
   local i = 0
   local n = table.getn(lsr_files)
   -- TODO: We completely ignore trees without ls-R files.  Since I
   -- don't know how to get the output of "find" without resorting to
   -- temporary files, anyway, I don't care.
   return function ()
	     i = i +1
	     if i <= n then return lsr_files[i] end
	  end
	     
end -- get_lsr_files()

function deluaficate(oldpat)
   local newpat
   -- better use long strings here, no escaping of \ needed there.
   newpat = string.gsub(oldpat,'([^\\])%-','%1%%%-')
   newpat = string.gsub(newpat,'\\','')
   return newpat
end --deluaficate

docdirs = {}
docfiles = {}
function pattern_search (pattern)
   pattern = deluaficate(pattern)
   -- populate docdirs and doclines list
   for database in get_lsr_files() do
      local texmf_tree = string.gsub(database,'ls%-R$','')
      is_docline = false
      local this_dir -- changed to each individual docdir
      for line in io.lines(database) do
	 if string.match(line,'^./') then
	    -- a directory
	    this_dir = string.gsub(line,'^./',texmf_tree)
	    this_dir = string.gsub(this_dir,':$','/')
	    if string.match(line,'^./doc') then
	       -- the next file lines are in docdir "this_dir"
	       is_docline = true
	       -- save it in the docdirs table
	       table.insert(docdirs,this_dir)
	    else
	       is_docline = false
	    end -- docdir
	 elseif string.match(line,'^%s*$') then
	    -- empty line, do nothing
	 -- now we have only file lines left, are they a docline?
	 elseif is_docline then
	    if string.match(line,'lm-hist') then
	       print(line)
	    end
	    local fullpath = this_dir .. line
-- 	    print(fullpath)
	    table.insert(docfiles,fullpath)
	 end -- line starting with ./
      end -- for line
   end -- for database

   print("Directories that match:")
   for dir in list_iter(docdirs) do
      if string.match(dir,pattern) then
	 print (dir)
      end
   end -- for dir
   print()
   print("Files that match:")
   for file in list_iter(docfiles) do
      if string.match(file,pattern) then
	 print (file)
      end
   end -- for file

end -- function pattern_search()

--[[ functions for parsing texmf.cnf ]]
function set_var_from_texmf(oldvalue,texmfvar)
   local newvalue
   newvalue = kpse.var_value(texmfvar)
   if newvalue then
      return newvalue
   else
      return oldvalue
   end
end
function set_listvar_from_texmf(oldvalue,texmfvar)
   local list_as_string
   local templist = {}
   list_as_string = set_var_from_texmf('',texmfvar)
   for element in string.gmatch(list_as_string,'[^,;:]+') do
      table.insert(templist,element)
   end
   if table.maxn(templist) > 0 then
      return templist
   else
      return oldvalue
   end
end -- set_listvar_from_texmf

function set_listvar_from_expand_braces(oldvalue,texmfvar)
   local list_as_string
   local templist = {}
   list_as_string = kpse.expand_braces(texmfvar)
   for element in string.gmatch(list_as_string,'[^,;:]*:') do
      element = string.gsub(element,':','')
      table.insert(templist,element)
   end
   if table.maxn(templist) > 0 then
      return templist
   else
      return oldvalue
   end
end -- set_listvar_from_expand_braces

--[[ initialize kpathsea ]]
kpse.set_program_name("texdoc")

-- [[ initialize some variables ]]
texdoc_formats = {'dvi','pdf','ps','txt','html'}

if lfs.isdir('/usr/bin') then
   -- probably UNIX-like
   texdoc_unzip = { 
      gz = "gzip -d -c ",
      bz2 = "bzip2 -d -c "
   };
   texdoc_viewer = { 
      dvi  = '(xdvi %s ) &',
      html = '(see %s) &',
      pdf = '(acroread %s) &',
      ps = '(gv %s) &',
      txt = '(less %s )',
      tex = '(less %s )'
   };
   rmfile_command = 'rm -f ';
   rmdir_command = 'rmdir ';
else
   -- probably Windows, 
   -- which commands should we use for unzipping?
   texdoc_unzip = { 
      gz = "gzip -d -c ",
      bz2 = "bzip2 -d -c "
   };
   texdoc_viewer = { 
      dvi  = '(start %s ) &',
      html = '(start %s) &',
      pdf = '(start %s) &',
      ps = '(start %s) &',
      txt = '(start %s) &',
      tex = '(start %s) &'
   };
   rmfile_command = 'del /F ';
   rmdir_command = 'rmdir ';

end
texdoc_zipformats = {'','gz','bz2'};
texdoc_formats = {'','dvi','html','pdf','ps','txt','tex'};
extlist = {'','.dvi', '.dvi.gz', '.dvi.bz2', '.pdf', '.pdf.gz', '.pdf.bz2', '.ps', '.ps.gz', '.ps.bz2', '.txt', '.txt.gz', '.txt.bz2', '.html'};

-- [[ override hardcoded variables with values from texmf.cnf ]]
rmfile_command = set_var_from_texmf(rmfile_command,'TEXDOC_RMFILE')
rmdir_command = set_var_from_texmf(rmdir_command,'TEXDOC_RMDIR')
texdoc_formats = set_listvar_from_texmf(texdoc_formats,'TEXDOC_FORMATS')
for format in list_iter(texdoc_formats) do
   viewer_var = 'TEXDOC_VIEWER_' .. string.upper(format)
   texdoc_viewer[format] = set_var_from_texmf(texdoc_viewer[format],viewer_var)
end
texdoc_zipformats = set_listvar_from_texmf(texdoc_zipformats,'TEXDOC_ZIPFORMATS')
for zipext in list_iter(texdoc_zipformats) do
   viewer_var = 'TEXDOC_UNZIP_' .. string.upper(zipext)
   texdoc_unzip[zipext] = set_var_from_texmf(texdoc_unzip[zipext],viewer_var)
end
extlist = set_listvar_from_expand_braces(extlist,'$TEXDOCEXT');
-- we want an empty string for ext at the beginning, so that it works
-- to specify the complete filename.  Doesn't matter when there's one
-- more empty string, but we can easily avoid two in a row
if not extlist[1] == '' then
   insert(extlist,1,'')
end


for docname in list_iter (arg) do
   if string.match(mode,'search') then
      pattern_search(docname);
   elseif string.match(mode,'view') or string.match(mode,'list') then
      for ext in list_iter(extlist) do
	 filename = kpse.find_file(docname .. ext , "TeX system documentation")

	 if filename then
	    if string.match (mode, 'list') then
	       print(filename);
	    else
	       -- mode is view, is unzipping needed?
	       zipext = string.match(ext,'%..*%.(.*)');
	       if zipext then
		  unzip_command = texdoc_unzip[zipext];
		  viewext = string.match(ext,'%.(.*)%..*$');
		  basebame_pattern = '.*/(.*%.' .. viewext .. ')';
		  basename = string.match(filename,basebame_pattern);

		  -- uncompress only once per file, in case it is given more
		  -- than once (dvi besides ps or so)
		  -- TODO: to be done

		  tmpdir = os.tmpname();
		  is_ok_tmpdir,error_string = lfs.mkdir(tmpdir)
		  if is_ok_tmpdir then
		     -- 		  needs_cleanup = true;
		  else
		     print(error_string);
		     os.exit(1);
		  end
		  
		  unzip_commandline = unzip_command .. filename .. " > " .. tmpdir .. "/" .. basename;
		  if os.execute(unzip_commandline) then
		     filename = tmpdir .. "/" .. basename;
		  else
		     print("Error executing \n" .. unzip_commandline);
		  end
		  viewer_replacement = filename .. ';' .. rmfile_command .. filename .. ';' .. rmdir_command .. tmpdir;
	       else
		  if ext == '' then
		     print("empty ext")
		     -- fallback if complete filename has been specified
		     ext = string.match(filename,'.*(%..*)$')
		     print("Now ext is :"..ext)
		  end
		  viewer_replacement = filename;
		  viewext = string.match(ext,'%.(.*)$');
		  print("viewext: "..viewext)
		  if not texdoc_viewer[viewext] then
		     -- complete filename specified, unknown extension, use "txt"
		     viewext = 'txt'
		  end
	       end -- zipped or not
	       view_command = string.gsub(texdoc_viewer[viewext],'%%s',viewer_replacement)
	       if verbose then
		  print(view_command);
	       end
	       view_result = os.execute(view_command);
	       if view_result then
		  do break end;
	       else
		  print("Error executing \n" .. view_command);
	       end
	    end -- list or view
	 end -- found a filename with that extension or not?
      end -- for ext
   end -- if construct "case mode in"
end -- for docname

-- cleanup_tmpdir();
-------------- next part --------------
.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "TEXDOC 1"
.TH TEXDOC 1 "2007-06-05" "perl v5.8.8" "User Contributed Perl Documentation"
.SH "NAME"
texdoc \- Search for NAME in the TeX documentation and start a viewer.
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBtexdoc\fR
[\fB\-h|\-\-help\fR]
[\fB\-v|\-\-verbose\fR]
[\fB\-V|\-\-version\fR]
[\fB\-l|\-\-list\fR]
[\fB\-S|\-\-search\fR]
[\fIname|pattern\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\fBtexdoc\fR is a script which attempts to find and display
documentation for tex files.  Without any options, the file
\fBname\fR\fI.ext\fR is displayed, where \fI.ext\fR is one of the
extensions defined in the variable \s-1TEXDOCext\s0 in
\&\fBtexmf.cnf\fR.  The viewer used for displaying the file can be
customized.

\fBtexdoc\fR accepts compressed files, too.  You can also specify the
complete filename, e.g. to decide which of two files with equal
basename you want., In this case, however, access to compressed files
is not possible.
.SH "OPTIONS"
.IP "\fB\-h\fR, \fB\-\-help\fR" 4
Display a usage message
.IP "\fB\-V\fR, \fB\-\-version\fR" 4
Display version information and exit
.IP "\fB\-v\fR, \fB\-\-verbose\fR" 4
verbose mode: show viewer command
.IP "\fB\-l\fR, \fB\-\-list\fR" 4
Just list all files that match \fIname\fR, do not start a viewer.
.IP "\fB\-S\fR, \fB\-\-search\fR \fIpattern\fR" 4
\&\fIpattern\fR is treated as a lua pattern (similar to basic regular
expressions, with `%' as escape character instead of `\\').  The output first lists all
directory names which match \fIpattern\fR and then all files.
Currently, directories without an ls-R file are ignored.
.SH "VARIABLES"
.RS 4
.IP "\s-1TEXDOCEXT\s0 = {:.pdf:.ps:.dvi:.txt:.tex}{:.gz:.bz2}:.html" 4
Recognized formats for documentation, the first match wins.  The
default uses standard kpathsea brace notation.  `html' should be last
in order to prevent the catalogue entry from being shown when other
documentation exists.
.IP "\s-1TEXDOC_VIEWER_\fBFORMAT\fR\s0 = (command %s) &" 4
Defines the viewer to be used for \fBFORMAT\fR,
e.g. \fITEXDOC_VIEWER_DVI\fR.  The filename (and tempfile cleanup
commands, if needed after decompression) is substituted for `%s'.  If
the viewer does not put itself in the background, the command must be
enclosed in parentheses and the `&' sign appended, as shown in the
example for \fIcommand\fR.
.IP "\s-1TEXDOC_UNZIP_\fBFORMAT\fR\s0 = command -a -c " 4
This variable specifies the command which is used to uncompress a file
compressed as \fBFORMAT\fR.  It result must go to \fIstdout\fR.
.IP "\s-1TEXDOC_FORMATS\s0 = pdf,dvi,ps,txt,tex" 4
The formats for which a viewer is defined in \fItexmf.cnf\fR (order
does not matter). 
.IP "\s-1TEXDOC_ZIPFORMATS\s0 = gz,bz2" 4
The compression formats for which a decompression command is defined
in \fItexmf.cnf\fR.
.IP "\s-1TEXDOC_RMFILE\s0 = rm -f" 4
The command used to remove a file on the target system.  This is used
for temporary files which are needed for viewing compressed documents.
.IP "\s-1TEXDOC_RMDIR\s0 = rmdir" 4
The command used to remove a directory on the target system.  This is
used for temporary directories which are needed for viewing compressed
documents.
.SH "BUGS"
Currently no bugs are known, but there are some limitations:
.IP "Specifying the filename, complete with extension"
This doesn't work for compressed files.
.IP "Search in TEXMF trees without ls-R"
 The \fI-s\fR\-Option only searches in ls-R files.   It ignores
TEXMF trees which don't have one.
.IP manpage
The manpage has been written on a template created by pod2man, and its
source contains a lot of (probably) useless cruft at the beginning.
.SH "HISTORY"
Original version by David Aspinall <da at dcs.ed.ac.uk>
.Sp
Rewritten for use with bash 2 and teTeX under Linux by Simon Wilkinson
<sxw at dcs.ed.ac.uk>
.Sp
Changes for web2c\-7.2 resp. teTeX\-0.9 and portability fixes by
Thomas Esser <te at dbs.uni\-hannover.de>, Jun 14 1998
.Sp
Support for compressed documentation implemented by adopting changes
made by debian. Thomas Esser, Dec. 2004.
.Sp
Rewritten using texlua by Frank K?ster <frank at kuesterei.ch>.  Changed
the \-s option to use ls-R instead of \fIfind\fR, May/June 2007.



From frank at kuesterei.ch  Thu Jun 28 19:40:28 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Thu, 28 Jun 2007 19:40:28 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87d4zipytw.fsf@riesling.zuerich.kuesterei.ch> (Frank
	=?iso-8859-1?Q?K=FCster's?= message of "Tue\, 26 Jun 2007 16\:36\:27
	+0200")
References: <466ACF98.8090603@gmx.net>
	<22af238a0706091105x5e010535vbbab04451ff63b4@mail.gmail.com>
	<18027.8235.396400.342647@zarniwoop.ms25.local>
	<20070609220059.GO834@gamma.logic.tuwien.ac.at>
	<18027.9656.741195.13867@zarniwoop.ms25.local>
	<466BB0AF.9070606@elvenkind.com>
	<87y7isxedx.fsf@riesling.zuerich.kuesterei.ch>
	<466BF9EF.507@elvenkind.com>
	<871wgjykn4.fsf@riesling.zuerich.kuesterei.ch>
	<466D0A32.3000506@elvenkind.com>
	<877ipsp4yo.fsf_-_@riesling.zuerich.kuesterei.ch>
	<87d4zipytw.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <876458m0z7.fsf@riesling.zuerich.kuesterei.ch>

Frank K?ster <frank at kuesterei.ch> wrote:

> Frank K?ster <frank at kuesterei.ch> wrote:
>
>> Thanks, I've started working on "texdoclua".  
>
> So here is the next iteration.  

Now I'm at version 0.3:

--[[ Changelog
 0.3 2007-06-28
 - added changelog
 - better OS detection for default viewer settings
 - removed some debugging code
 - -s now works in dirs without ls-R, too

And I guess that should be it for a while (I'm going on vacation the
next two weeks).

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

-------------- next part --------------
#!/usr/bin/env texlua
--[[ Written in lua by Frank K?ster (2007) based on the shell script by
Thomas Esser, David Aspinall, and Simon Wilkinson.
Public domain.]]
--[[ Changelog
 0.3 2007-06-28
 - added changelog
 - better OS detection for default viewer settings
 - removed some debugging code
 - -s now works in dirs without ls-R, too

 0.2 2007-06-28
 - implemented reading of configuration from texmf.cnf
 - fixed "-s" option

 0.1
 - initial public release 
]]

progname = 'texdoc';
version = '0.2';
usage = '      Usage: ' .. progname ..' [-h|--help] name\
	 -h|--help\t\t Show this help\
         -V|--version\t\t Print the version of the program\
         -v|--verbose\t\t Show the command being used to display the documentation\
         -l|--list\t\t List matching files, do not start a viewer.\
         -s|--search\t\t search for name as a pattern';


if not arg[1] then
   print (usage);
   return
end

mode = 'view';
verbose = false;
while table.maxn(arg) > 0 and string.match(arg[1],'^%-') do
   curr_arg = table.remove(arg,1)
   if string.match (curr_arg,'-h') or string.match (curr_arg,'--help') then
      print (usage);
      os.exit(0);
   elseif string.match (curr_arg,'-V') or string.match (curr_arg,'--version') then
      print (progname .. ' version: ' .. version );
      os.exit(0);
   elseif string.match (curr_arg,'-v') or string.match (curr_arg,'--verbose') then
      verbose = true;
   elseif string.match (curr_arg,'-l') or string.match (curr_arg,'--list'   ) then
      mode = 'list';
   elseif string.match (curr_arg,'-s') or string.match (curr_arg,'--search'   ) then
      mode = 'search';
   end
end

--[[ function definitions ]]
function list_iter (t)
   local i = 0
   local n = table.getn(t)
   return function ()
	     i = i + 1
	     if i <= n then return t[i] end
	  end
end


-- [[ functions for the search option ]]
no_lsr_doctrees = {};
function get_lsr_files ()
   local lsr_files = {};
   local pathlist = kpse.expand_braces('$TEXDOCS');
   for path in string.gmatch(pathlist, "[^:;]+") do
      path = string.gsub(path,'//$','')
      local tree_root
      tree_root = string.gsub(path,'doc$','')
      tree_root = string.gsub(tree_root,'^!!','')
      if lfs.isfile(tree_root .. "ls-R") then
	 table.insert(lsr_files,tree_root .. "ls-R")
      else
	 if not string.match(path,'^%.$') and lfs.isdir(path) then
	    table.insert(no_lsr_doctrees,path)
	 end
      end -- does lsRfile exist?
   end -- for path
   local i = 0
   local n = table.getn(lsr_files)
   -- TODO: We completely ignore trees without ls-R files.  Since I
   -- don't know how to get the output of "find" without resorting to
   -- temporary files, anyway, I don't care.
   return function ()
	     i = i +1
	     if i <= n then return lsr_files[i] end
	  end
	     
end -- get_lsr_files()

function deluaficate(oldpat)
   local newpat
   -- better use long strings here, no escaping of \ needed there.
   newpat = string.gsub(oldpat,'([^\\])%-','%1%%%-')
   newpat = string.gsub(newpat,'\\','')
   return newpat
end --deluaficate

docdirs = {}
docfiles = {}
function pattern_search (pattern)
   pattern = deluaficate(pattern)
   -- populate docdirs and doclines list
   for database in get_lsr_files() do
      local texmf_tree = string.gsub(database,'ls%-R$','')
      is_docline = false
      local this_dir -- changed to each individual docdir
      for line in io.lines(database) do
	 if string.match(line,'^./') then
	    -- a directory
	    this_dir = string.gsub(line,'^./',texmf_tree)
	    this_dir = string.gsub(this_dir,':$','/')
	    if string.match(line,'^./doc') then
	       -- the next file lines are in docdir "this_dir"
	       is_docline = true
	       -- save it in the docdirs table
	       table.insert(docdirs,this_dir)
	    else
	       is_docline = false
	    end -- docdir
	 elseif string.match(line,'^%s*$') then
	    -- empty line, do nothing
	 -- now we have only file lines left, are they a docline?
	 elseif is_docline then
	    local fullpath = this_dir .. line
-- 	    print(fullpath)
	    table.insert(docfiles,fullpath)
	 end -- line starting with ./
      end -- for line
   end -- for database
   for no_lsr_dir in list_iter(no_lsr_doctrees) do
      recurse_tree(no_lsr_dir)
   end

   print("Directories that match:")
   for dir in list_iter(docdirs) do
      if string.match(dir,pattern) then
	 print (dir)
      end
   end -- for dir
   print()
   print("Files that match:")
   for file in list_iter(docfiles) do
      if string.match(file,pattern) then
	 print (file)
      end
   end -- for file

end -- function pattern_search()

function recurse_tree (path)
    for file in lfs.dir(path) do
        if file ~= "." and file ~= ".." then
            local f = path..'/'..file
            local attr = lfs.attributes (f)
	    if attr then -- else stale symlink
	       if attr.mode == "directory" then
		  table.insert(docdirs,f)
		  recurse_tree (f)
	       else
		  table.insert(docfiles,f)
	       end
            end
        end
    end
 end --function recurse_tree


--[[ functions for parsing texmf.cnf ]]
function set_var_from_texmf(oldvalue,texmfvar)
   local newvalue
   newvalue = kpse.var_value(texmfvar)
   if newvalue then
      return newvalue
   else
      return oldvalue
   end
end
function set_listvar_from_texmf(oldvalue,texmfvar)
   local list_as_string
   local templist = {}
   list_as_string = set_var_from_texmf('',texmfvar)
   for element in string.gmatch(list_as_string,'[^,;:]+') do
      table.insert(templist,element)
   end
   if table.maxn(templist) > 0 then
      return templist
   else
      return oldvalue
   end
end -- set_listvar_from_texmf

function set_listvar_from_expand_braces(oldvalue,texmfvar)
   local list_as_string
   local templist = {}
   list_as_string = kpse.expand_braces(texmfvar)
   for element in string.gmatch(list_as_string,'[^,;:]*:') do
      element = string.gsub(element,':','')
      table.insert(templist,element)
   end
   if table.maxn(templist) > 0 then
      return templist
   else
      return oldvalue
   end
end -- set_listvar_from_expand_braces

--[[ initialize kpathsea ]]
kpse.set_program_name("texdoc")

-- [[ initialize some variables ]]
texdoc_formats = {'dvi','pdf','ps','txt','html'}

if string.find(os.getenv("PATH"),";") then
   -- probably Windows (or OS/2)
   -- which commands should we use for unzipping?
   texdoc_unzip = { 
      gz = "gzip -d -c ",
      bz2 = "bzip2 -d -c "
   };
   texdoc_viewer = { 
      dvi  = '(start %s ) &',
      html = '(start %s) &',
      pdf = '(start %s) &',
      ps = '(start %s) &',
      txt = '(start %s) &',
      tex = '(start %s) &'
   };
   rmfile_command = 'del /F ';
   rmdir_command = 'rmdir ';
else
   -- probably UNIX-like
   texdoc_unzip = { 
      gz = "gzip -d -c ",
      bz2 = "bzip2 -d -c "
   };
   texdoc_viewer = { 
      dvi  = '(xdvi %s ) &',
      html = '(see %s) &',
      pdf = '(xpdf %s) &',
      ps = '(gv %s) &',
      txt = '(less %s )',
      tex = '(less %s )'
   };
   rmfile_command = 'rm -f ';
   rmdir_command = 'rmdir ';
end

texdoc_zipformats = {'','gz','bz2'};
texdoc_formats = {'','dvi','html','pdf','ps','txt','tex'};
extlist = {'','.dvi', '.dvi.gz', '.dvi.bz2', '.pdf', '.pdf.gz', '.pdf.bz2', '.ps', '.ps.gz', '.ps.bz2', '.txt', '.txt.gz', '.txt.bz2', '.html'};

-- [[ override hardcoded variables with values from texmf.cnf ]]
rmfile_command = set_var_from_texmf(rmfile_command,'TEXDOC_RMFILE')
rmdir_command = set_var_from_texmf(rmdir_command,'TEXDOC_RMDIR')
texdoc_formats = set_listvar_from_texmf(texdoc_formats,'TEXDOC_FORMATS')
for format in list_iter(texdoc_formats) do
   viewer_var = 'TEXDOC_VIEWER_' .. string.upper(format)
   texdoc_viewer[format] = set_var_from_texmf(texdoc_viewer[format],viewer_var)
end
texdoc_zipformats = set_listvar_from_texmf(texdoc_zipformats,'TEXDOC_ZIPFORMATS')
for zipext in list_iter(texdoc_zipformats) do
   viewer_var = 'TEXDOC_UNZIP_' .. string.upper(zipext)
   texdoc_unzip[zipext] = set_var_from_texmf(texdoc_unzip[zipext],viewer_var)
end
extlist = set_listvar_from_expand_braces(extlist,'$TEXDOCEXT');
-- we want an empty string for ext at the beginning, so that it works
-- to specify the complete filename.  Doesn't matter when there's one
-- more empty string, but we can easily avoid two in a row
if not extlist[1] == '' then
   insert(extlist,1,'')
end


for docname in list_iter (arg) do
   if string.match(mode,'search') then
      pattern_search(docname);
   elseif string.match(mode,'view') or string.match(mode,'list') then
      for ext in list_iter(extlist) do
	 filename = kpse.find_file(docname .. ext , "TeX system documentation")

	 if filename then
	    if string.match (mode, 'list') then
	       print(filename);
	    else
	       -- mode is view, is unzipping needed?
	       zipext = string.match(ext,'%..*%.(.*)');
	       if zipext then
		  unzip_command = texdoc_unzip[zipext];
		  viewext = string.match(ext,'%.(.*)%..*$');
		  basebame_pattern = '.*/(.*%.' .. viewext .. ')';
		  basename = string.match(filename,basebame_pattern);

		  -- uncompress only once per file, in case it is given more
		  -- than once (dvi besides ps or so)
		  -- TODO: to be done

		  tmpdir = os.tmpname();
		  is_ok_tmpdir,error_string = lfs.mkdir(tmpdir)
		  if is_ok_tmpdir then
		     -- 		  needs_cleanup = true;
		  else
		     print(error_string);
		     os.exit(1);
		  end
		  
		  unzip_commandline = unzip_command .. filename .. " > " .. tmpdir .. "/" .. basename;
		  if os.execute(unzip_commandline) then
		     filename = tmpdir .. "/" .. basename;
		  else
		     print("Error executing \n" .. unzip_commandline);
		  end
		  viewer_replacement = filename .. ';' .. rmfile_command .. filename .. ';' .. rmdir_command .. tmpdir;
	       else
		  if ext == '' then
		     -- fallback if complete filename has been specified
		     ext = string.match(filename,'.*(%..*)$')
		  end
		  viewer_replacement = filename;
		  viewext = string.match(ext,'%.(.*)$');
		  if not texdoc_viewer[viewext] then
		     -- complete filename specified, unknown extension, use "txt"
		     viewext = 'txt'
		  end
	       end -- zipped or not
	       view_command = string.gsub(texdoc_viewer[viewext],'%%s',viewer_replacement)
	       if verbose then
		  print(view_command);
	       end
	       view_result = os.execute(view_command);
	       if view_result then
		  do break end;
	       else
		  print("Error executing \n" .. view_command);
	       end
	    end -- list or view
	 end -- found a filename with that extension or not?
      end -- for ext
   end -- if construct "case mode in"
end -- for docname

-- cleanup_tmpdir();
-------------- next part --------------
.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "TEXDOC 1"
.TH TEXDOC 1 "2007-06-05" "perl v5.8.8" "User Contributed Perl Documentation"
.SH "NAME"
texdoc \- Search for NAME in the TeX documentation and start a viewer.
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBtexdoc\fR
[\fB\-h|\-\-help\fR]
[\fB\-v|\-\-verbose\fR]
[\fB\-V|\-\-version\fR]
[\fB\-l|\-\-list\fR]
[\fB\-S|\-\-search\fR]
[\fIname|pattern\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\fBtexdoc\fR is a script which attempts to find and display
documentation for tex files.  Without any options, the file
\fBname\fR\fI.ext\fR is displayed, where \fI.ext\fR is one of the
extensions defined in the variable \s-1TEXDOCEXT\s0 in
\&\fBtexmf.cnf\fR.  The viewer used for displaying the file can be
customized.

\fBtexdoc\fR accepts compressed files, too.  You can also specify the
complete filename, e.g. to decide which of two files with equal
basename you want., In this case, however, access to compressed files
is not possible.
.SH "OPTIONS"
.IP "\fB\-h\fR, \fB\-\-help\fR" 4
Display a usage message
.IP "\fB\-V\fR, \fB\-\-version\fR" 4
Display version information and exit
.IP "\fB\-v\fR, \fB\-\-verbose\fR" 4
verbose mode: show viewer command
.IP "\fB\-l\fR, \fB\-\-list\fR" 4
Just list all files that match \fIname\fR, do not start a viewer.
.IP "\fB\-S\fR, \fB\-\-search\fR \fIpattern\fR" 4
\&\fIpattern\fR is treated as a lua pattern (similar to basic regular
expressions, with `%' as escape character instead of `\\').  The output first lists all
directory names which match \fIpattern\fR and then all files.
Currently, directories without an ls-R file are ignored.
.SH "VARIABLES"
.RS 4
.IP "TEXDOCS = .;$TEXMF/doc//"
Specifies the directories where TeX documentation is stored
.IP "\s-1TEXDOCEXT\s0 = {:.pdf:.ps:.dvi:.txt:.tex}{:.gz:.bz2}:.html" 4
Recognized formats for documentation, the first match wins.  The
default uses standard kpathsea brace notation.  `html' should be last
in order to prevent the catalogue entry from being shown when other
documentation exists.
.IP "\s-1TEXDOC_VIEWER_\fBFORMAT\fR\s0 = (command %s) &" 4
Defines the viewer to be used for \fBFORMAT\fR,
e.g. \fITEXDOC_VIEWER_DVI\fR.  The filename (and tempfile cleanup
commands, if needed after decompression) is substituted for `%s'.  If
the viewer does not put itself in the background, the command must be
enclosed in parentheses and the `&' sign appended, as shown in the
example for \fIcommand\fR.
.IP "\s-1TEXDOC_UNZIP_\fBFORMAT\fR\s0 = command -a -c " 4
This variable specifies the command which is used to uncompress a file
compressed as \fBFORMAT\fR.  It result must go to \fIstdout\fR.
.IP "\s-1TEXDOC_FORMATS\s0 = pdf,dvi,ps,txt,tex" 4
The formats for which a viewer is defined in \fItexmf.cnf\fR (order
does not matter). 
.IP "\s-1TEXDOC_ZIPFORMATS\s0 = gz,bz2" 4
The compression formats for which a decompression command is defined
in \fItexmf.cnf\fR.
.IP "\s-1TEXDOC_RMFILE\s0 = rm -f" 4
The command used to remove a file on the target system.  This is used
for temporary files which are needed for viewing compressed documents.
.IP "\s-1TEXDOC_RMDIR\s0 = rmdir" 4
The command used to remove a directory on the target system.  This is
used for temporary directories which are needed for viewing compressed
documents.
.SH "BUGS"
Currently no bugs are known, but there are some limitations:
.IP "Specifying the filename, complete with extension"
This doesn't work for compressed files.
.IP manpage
The manpage has been written on a template created by pod2man, and its
source contains a lot of (probably) useless cruft at the beginning.
.SH "HISTORY"
Original version by David Aspinall <da at dcs.ed.ac.uk>
.Sp
Rewritten for use with bash 2 and teTeX under Linux by Simon Wilkinson
<sxw at dcs.ed.ac.uk>
.Sp
Changes for web2c\-7.2 resp. teTeX\-0.9 and portability fixes by
Thomas Esser <te at dbs.uni\-hannover.de>, Jun 14 1998
.Sp
Support for compressed documentation implemented by adopting changes
made by debian. Thomas Esser, Dec. 2004.
.Sp
Rewritten using texlua by Frank K?ster <frank at kuesterei.ch>.  Changed
the \-s option to use ls-R instead of \fIfind\fR, May/June 2007.



From rivanvx at gmail.com  Thu Jun 28 20:09:41 2007
From: rivanvx at gmail.com (=?UTF-8?Q?Vedran_Mileti=C4=87?=)
Date: Thu, 28 Jun 2007 20:09:41 +0200
Subject: [tex-live] bugfixes for TL2007
In-Reply-To: <20070627155409.GF22631@gamma.logic.tuwien.ac.at>
References: <394F0AB5-9C72-49ED-B89C-A029564ECE7F@sil.org>
	<68c491a60706270833s21f6f83dya1662dbcd50d2afb@mail.gmail.com>
	<20070627155409.GF22631@gamma.logic.tuwien.ac.at>
Message-ID: <fd3eb9bf0706281109o1df18a37jadf7728400b3ad86@mail.gmail.com>

Does that mean that updated TL2007 will make it into Debian unstable eventually?

-- 
Vedran Mileti?
Student at Math Department, University of Rijeka

2007/6/27, Norbert Preining <preining at logic.at>:
> Hi Martin,
>
> On Mit, 27 Jun 2007, Martin Schr?der wrote:
> > I will release pdfTeX 1.40.4 till TUG2007; how difficult would it be
> > to release an updated image after that?
>
> Umpf. Does this need new pool files?
>
> If yes it is not a good idea to include it into the 2007 branch because
> we would have to build on *ALL* archs again ...
>
> Best wishes
>
> Norbert
>
> -------------------------------------------------------------------------------
> Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
> Debian Developer <preining at debian.org>                         Debian TeX Group
> gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
> -------------------------------------------------------------------------------
> NAD (n.)
> Measure defined as the distance between a driver's outstretched
> fingertips and the ticket machine in an automatic car-park. 1 nad =
> 18.4 cm.
>                         --- Douglas Adams, The Meaning of Liff
>

From preining at logic.at  Thu Jun 28 20:32:24 2007
From: preining at logic.at (Norbert Preining)
Date: Thu, 28 Jun 2007 20:32:24 +0200
Subject: [tex-live] bugfixes for TL2007
In-Reply-To: <fd3eb9bf0706281109o1df18a37jadf7728400b3ad86@mail.gmail.com>
References: <394F0AB5-9C72-49ED-B89C-A029564ECE7F@sil.org>
	<68c491a60706270833s21f6f83dya1662dbcd50d2afb@mail.gmail.com>
	<20070627155409.GF22631@gamma.logic.tuwien.ac.at>
	<fd3eb9bf0706281109o1df18a37jadf7728400b3ad86@mail.gmail.com>
Message-ID: <20070628183224.GA4029@gamma.logic.tuwien.ac.at>

On Don, 28 Jun 2007, Vedran Mileti?? wrote:
> Does that mean that updated TL2007 will make it into Debian unstable 
> eventually?

What do you need? All the patches discussed up to now are either already
in the debian packages (the dvips stuff) or will be in the next release
(the xetex stuff).

Anything else you need?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
GLASGOW (n.)
The feeling of infinite sadness engendered when walking through a
place filled with happy people fifteen years younger than yourself.
			--- Douglas Adams, The Meaning of Liff

From martin at oneiros.de  Thu Jun 28 23:35:07 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Thu, 28 Jun 2007 23:35:07 +0200
Subject: [tex-live] Non-free parts within TeXLive 2007
In-Reply-To: <200706280727.35968.john@wexfordpress.com>
References: <200705152045.l4FKjVO01100@f7.net>
	<200706280727.35968.john@wexfordpress.com>
Message-ID: <68c491a60706281435x6adb60d1k6e66f2d2e9dd685c@mail.gmail.com>

2007/6/28, John R. Culleton <john at wexfordpress.com>:
> BTW the Context macros also contain copyright notices. Hans Hagen will
> have to explain what his intentions are with these notices. Perhaps
> they exist only to prvent someone else from copyrighting them.

The Context developers do not discuss the license. AFAIK it says so in
the license. :-)

Best
   Martin

From rivanvx at gmail.com  Fri Jun 29 07:23:22 2007
From: rivanvx at gmail.com (=?UTF-8?Q?Vedran_Mileti=C4=87?=)
Date: Fri, 29 Jun 2007 07:23:22 +0200
Subject: [tex-live] bugfixes for TL2007
In-Reply-To: <20070628183224.GA4029@gamma.logic.tuwien.ac.at>
References: <394F0AB5-9C72-49ED-B89C-A029564ECE7F@sil.org>
	<68c491a60706270833s21f6f83dya1662dbcd50d2afb@mail.gmail.com>
	<20070627155409.GF22631@gamma.logic.tuwien.ac.at>
	<fd3eb9bf0706281109o1df18a37jadf7728400b3ad86@mail.gmail.com>
	<20070628183224.GA4029@gamma.logic.tuwien.ac.at>
Message-ID: <fd3eb9bf0706282223p32f993ecrcf138bc73c1af551@mail.gmail.com>

Actually, xetex was the part I cared about. Good then. Does that mean
that Debian will continue to include TeX Live's bugfixes?

-- 
Vedran Mileti?
Student at Math Department, University of Rijeka

2007/6/28, Norbert Preining <preining at logic.at>:
> On Don, 28 Jun 2007, Vedran Mileti?? wrote:
> > Does that mean that updated TL2007 will make it into Debian unstable
> > eventually?
>
> What do you need? All the patches discussed up to now are either already
> in the debian packages (the dvips stuff) or will be in the next release
> (the xetex stuff).
>
> Anything else you need?
>
> Best wishes
>
> Norbert
>
> -------------------------------------------------------------------------------
> Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
> Debian Developer <preining at debian.org>                         Debian TeX Group
> gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
> -------------------------------------------------------------------------------
> GLASGOW (n.)
> The feeling of infinite sadness engendered when walking through a
> place filled with happy people fifteen years younger than yourself.
>                         --- Douglas Adams, The Meaning of Liff
>

From preining at logic.at  Fri Jun 29 07:40:51 2007
From: preining at logic.at (Norbert Preining)
Date: Fri, 29 Jun 2007 07:40:51 +0200
Subject: [tex-live] bugfixes for TL2007
In-Reply-To: <fd3eb9bf0706282223p32f993ecrcf138bc73c1af551@mail.gmail.com>
References: <394F0AB5-9C72-49ED-B89C-A029564ECE7F@sil.org>
	<68c491a60706270833s21f6f83dya1662dbcd50d2afb@mail.gmail.com>
	<20070627155409.GF22631@gamma.logic.tuwien.ac.at>
	<fd3eb9bf0706281109o1df18a37jadf7728400b3ad86@mail.gmail.com>
	<20070628183224.GA4029@gamma.logic.tuwien.ac.at>
	<fd3eb9bf0706282223p32f993ecrcf138bc73c1af551@mail.gmail.com>
Message-ID: <20070629054051.GB4171@gamma.logic.tuwien.ac.at>

On Fre, 29 Jun 2007, Vedran Mileti?? wrote:
> Actually, xetex was the part I cared about. Good then. Does that mean
> that Debian will continue to include TeX Live's bugfixes?

Yes, as long as they are not to invasive.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
WIMBLEDON (n.)
That last drop which, no matter how much you shake it, always goes
down your trouser leg.
			--- Douglas Adams, The Meaning of Liff

From hanthethanh at gmail.com  Fri Jun 29 11:32:05 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Fri, 29 Jun 2007 11:32:05 +0200
Subject: [tex-live] gs reports error: "Embedded font uses undefined
	procedure(s)"
Message-ID: <74f506dc0706290232v7e38bbb1pcc3164031ab24455@mail.gmail.com>

with the minimal test file:

,--------
| \font\f=bchb8y\f
| Hello
| \bye
`--------

the pdf produced by pdftex (1.40.3) and dvipdfm (0.13.2c)
seems to make gs (AFPL Ghostscript 8.53 (2005-10-20) on debian linux)
unhappy:

,--------
|    **** Embedded font uses undefined procedure(s):  ND 5 times, RD 209 times,
|
|    **** This file had errors that were repaired or ignored.
|    **** The file was produced by:
|    **** >>>> dvipdfm 0.13.2c, Copyright ? 1998, by Mark A. Wicks <<<<
|    (or **** >>>> pdfTeX-1.40.3 <<<< in case of pdftex)
|    **** Please notify the author of the software that produced this
|    **** file that it does not conform to Adobe's published PDF
|    **** specification.
`--------

the same error with gs-esp (8.15)

when extracting the font from the pdf, it seems to be quite ok, ND and RD are
defined there and t1lint didn't report anything.

Can it be a problem of gs?

Regards,
Thanh

From frank at kuesterei.ch  Fri Jun 29 12:21:20 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Fri, 29 Jun 2007 12:21:20 +0200
Subject: [tex-live] gs reports error: "Embedded font uses undefined
	procedure(s)"
In-Reply-To: <74f506dc0706290232v7e38bbb1pcc3164031ab24455@mail.gmail.com>
	(Thanh Han The's message of "Fri\, 29 Jun 2007 11\:32\:05 +0200")
References: <74f506dc0706290232v7e38bbb1pcc3164031ab24455@mail.gmail.com>
Message-ID: <87bqez2h9b.fsf@riesling.zuerich.kuesterei.ch>

"Thanh Han The" <hanthethanh at gmail.com> wrote:

> with the minimal test file:
>
> ,--------
> | \font\f=bchb8y\f
> | Hello
> | \bye
> `--------
>
> the pdf produced by pdftex (1.40.3) and dvipdfm (0.13.2c)
> seems to make gs (AFPL Ghostscript 8.53 (2005-10-20) on debian linux)
> unhappy:
[...]
> Can it be a problem of gs?

What exactly did you do with gs?  I have here

$ gs latex/test/debian-tetex/fontprob.pdf 
GPL Ghostscript 8.54 (2006-05-17)
Copyright (C) 2006 artofcode LLC, Benicia, CA.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Warning: the map file cidfmap was not found.
Processing pages 1 through 1.
Page 1
>>showpage, press <return> to continue<<

$
(that is GPL Ghostscript).

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From hanthethanh at gmail.com  Fri Jun 29 12:45:17 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Fri, 29 Jun 2007 12:45:17 +0200
Subject: [tex-live] gs reports error: "Embedded font uses undefined
	procedure(s)"
Message-ID: <74f506dc0706290345p75086c9fsb573e653151d913@mail.gmail.com>

On Fri, Jun 29, 2007 at 12:21:20PM +0200, Frank K?ster wrote:
> "Thanh Han The" <hanthethanh at gmail.com> wrote:
>
> > with the minimal test file:
> >
> > ,--------
> > | \font\f=bchb8y\f
> > | Hello
> > | \bye
> > `--------
> >
> > the pdf produced by pdftex (1.40.3) and dvipdfm (0.13.2c)
> > seems to make gs (AFPL Ghostscript 8.53 (2005-10-20) on debian linux)
> > unhappy:
> [...]
> > Can it be a problem of gs?
>
> What exactly did you do with gs?  I have here
>
> $ gs latex/test/debian-tetex/fontprob.pdf
> GPL Ghostscript 8.54 (2006-05-17)
> Copyright (C) 2006 artofcode LLC, Benicia, CA.  All rights reserved.
> This software comes with NO WARRANTY: see the file PUBLIC for details.
> Warning: the map file cidfmap was not found.
> Processing pages 1 through 1.
> Page 1
> >>showpage, press <return> to continue<<
>
> $
> (that is GPL Ghostscript).

I use the gs version that comes with debian
(apt-get install gs-afpl) and nothing more.

I uploaded my pdf file here, can you please give it a try.

http://www.sendspace.com/file/yaids6


Thanks,
Thanh

From preining at logic.at  Fri Jun 29 13:07:21 2007
From: preining at logic.at (Norbert Preining)
Date: Fri, 29 Jun 2007 13:07:21 +0200
Subject: [tex-live] gs reports error: "Embedded font uses undefined
	procedure(s)"
In-Reply-To: <74f506dc0706290345p75086c9fsb573e653151d913@mail.gmail.com>
References: <74f506dc0706290345p75086c9fsb573e653151d913@mail.gmail.com>
Message-ID: <20070629110721.GI2968@gamma.logic.tuwien.ac.at>

On Fre, 29 Jun 2007, Thanh Han The wrote:
> http://www.sendspace.com/file/yaids6

Ok, with gs-gpl
	GPL Ghostscript 8.56 (2007-03-14)
I get:
	- no error message
	- but TWO (2) pages on screen (with the same "Hello")
	- after I press enter even a thrid one!

With gs-esp
	ESP Ghostscript 815.03 (2006-08-25)
I get:
	- first a lot of error messages:
		**** Embedded font uses undefined procedure RD
	- then
		%%BoundingBox: 92 759 117 768
		%%HiResBoundingBox: 92.141997 759.833977 116.225996 767.285977
	- but no output
	- pressing "Enter" gives me your error message.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
BOTLEY
The prominent stain on a man's trouser crotch seen on his return from
the lavatory. A botley proper is caused by an accident with the push
taps, and should not be confused with any stain caused by insufficient
waggling of the willy.
			--- Douglas Adams, The Meaning of Liff

From zdenek.wagner at gmail.com  Fri Jun 29 13:23:42 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 29 Jun 2007 13:23:42 +0200
Subject: [tex-live] gs reports error: "Embedded font uses undefined
	procedure(s)"
In-Reply-To: <20070629110721.GI2968@gamma.logic.tuwien.ac.at>
References: <74f506dc0706290345p75086c9fsb573e653151d913@mail.gmail.com>
	<20070629110721.GI2968@gamma.logic.tuwien.ac.at>
Message-ID: <8719b6240706290423ma121b73hbc0edf852205292@mail.gmail.com>

2007/6/29, Norbert Preining <preining at logic.at>:
> On Fre, 29 Jun 2007, Thanh Han The wrote:
> > http://www.sendspace.com/file/yaids6
>
> Ok, with gs-gpl
>         GPL Ghostscript 8.56 (2007-03-14)
> I get:
>         - no error message
>         - but TWO (2) pages on screen (with the same "Hello")
>         - after I press enter even a thrid one!
>
> With gs-esp
>         ESP Ghostscript 815.03 (2006-08-25)
> I get:
>         - first a lot of error messages:
>                 **** Embedded font uses undefined procedure RD
>         - then
>                 %%BoundingBox: 92 759 117 768
>                 %%HiResBoundingBox: 92.141997 759.833977 116.225996 767.285977
>         - but no output
>         - pressing "Enter" gives me your error message.
>
I have AFPL Ghostscript 8.14 in OS/2, it does not any error message.

> Best wishes
>
> Norbert
>
> -------------------------------------------------------------------------------
> Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
> Debian Developer <preining at debian.org>                         Debian TeX Group
> gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
> -------------------------------------------------------------------------------
> BOTLEY
> The prominent stain on a man's trouser crotch seen on his return from
> the lavatory. A botley proper is caused by an accident with the push
> taps, and should not be confused with any stain caused by insufficient
> waggling of the willy.
>                         --- Douglas Adams, The Meaning of Liff
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From hartmut_henkel at gmx.de  Fri Jun 29 14:30:58 2007
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Fri, 29 Jun 2007 14:30:58 +0200 (CEST)
Subject: [tex-live] gs reports error: "Embedded font uses undefined
 procedure(s)"
In-Reply-To: <8719b6240706290423ma121b73hbc0edf852205292@mail.gmail.com>
References: <74f506dc0706290345p75086c9fsb573e653151d913@mail.gmail.com>
	<20070629110721.GI2968@gamma.logic.tuwien.ac.at>
	<8719b6240706290423ma121b73hbc0edf852205292@mail.gmail.com>
Message-ID: <alpine.DEB.0.999.0706291428290.22663@hahepc1.hahe>

On Fri, 29 Jun 2007, Zdenek Wagner wrote:

> 2007/6/29, Norbert Preining <preining at logic.at>:
> > On Fre, 29 Jun 2007, Thanh Han The wrote:
> > > http://www.sendspace.com/file/yaids6
> >
> > Ok, with gs-gpl
> >         GPL Ghostscript 8.56 (2007-03-14)
> > I get:
> >         - no error message
> >         - but TWO (2) pages on screen (with the same "Hello")
> >         - after I press enter even a thrid one!
> >
> > With gs-esp
> >         ESP Ghostscript 815.03 (2006-08-25)
> > I get:
> >         - first a lot of error messages:
> >                 **** Embedded font uses undefined procedure RD
> >         - then
> >                 %%BoundingBox: 92 759 117 768
> >                 %%HiResBoundingBox: 92.141997 759.833977 116.225996 767.285977
> >         - but no output
> >         - pressing "Enter" gives me your error message.
> >
> I have AFPL Ghostscript 8.14 in OS/2, it does not any error message.

the file from sendspace shows ok here with gs 8.60:

$ gs f.pdf
GPL Ghostscript SVN PRE-RELEASE 8.60 (2007-05-12)
Copyright (C) 2007 Artifex Software, Inc.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Processing pages 1 through 1.
Page 1
>>showpage, press <return> to continue<<

Regards, Hartmut

From kakuto at fsci.fuk.kindai.ac.jp  Fri Jun 29 14:41:17 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Fri, 29 Jun 2007 21:41:17 +0900
Subject: [tex-live] texdoc in luatex
In-Reply-To: Your message of "Thu, 28 Jun 2007 19:40:28 +0200"
References: <876458m0z7.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <200706291241.l5TCfIoB007391@jupiter.fsci.fuk.kindai.ac.jp>

Hi Frank,

> Now I'm at version 0.3:

Comments on texdoclua on windows:

>   rmfile_command = 'del /F ';
>   rmdir_command = 'rmdir ';

Most applications on Windows support forward slash '/' as a
directory separator, but internal commands such as
'del', 'rmdir', ... do not. So you have to replace forward
slashes by backward slashes in the path if you use 'del' and 'rmdir'.

>   texdoc_viewer = { 
>      dvi  = '(start %s ) &',
>      html = '(start %s) &',
>      pdf = '(start %s) &',
>      ps = '(start %s) &',
>      txt = '(start %s) &',
>      tex = '(start %s) &'
>   };

In cmd.exe (Windows' shell), '&' is a command separator
like ';' in sh. So, the above may be rewritten as
 
   texdoc_viewer = { 
      dvi  = '(start %s)',
      html = '(start %s)',
      pdf = '(start %s)',
      ps = '(start %s)',
      txt = '(less %s)',
      tex = '(less %s)'
   };

Text files may have various suffixes, so 'start' is not appropriate.
I'm using less (less.exe is needed). If you use the standard
Windows command 'more', you have to replace / by \ in %s.

texdoclua is working on Windows. Thanks.

[FYI]
texdoc.exe in W32TeX allows an optional argument [SubStringInPath]
in order to specify a file:

texdoc manual.pdf geometry
displays manual.pdf for the geometry package, while

texdoc manual.pdf hyperref
displays manual.pdf for the hyperref package.

Best regards,
Akira

From hanthethanh at gmail.com  Fri Jun 29 15:12:04 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Fri, 29 Jun 2007 15:12:04 +0200
Subject: [tex-live] gs reports error: "Embedded font uses undefined
	procedure(s)"
Message-ID: <74f506dc0706290612w74efd045ve6de92b21464ac74@mail.gmail.com>

many thanks to all for testing. I was also looking at the
pdf and the font, but couldn't find anything that can be the
reason for the error.

For those who interested in further details, here is a quick
summary:

- this happens with Charter fonts only
- ps from dvips is ok
- it's not caused by truncating 512 trailing zeros in the
  type1 fonts (tried to put it back -- didn't help)
- it's not caused by the UniqueID (tried with bugfix774 --
  didn't help)
- the fonts as extracted from the ps (by dvips) and pdf (by
  pdftex) look identical (apart from the subset tag)

Thanh

On Fri, Jun 29, 2007 at 02:30:58PM +0200, Hartmut Henkel wrote:
> On Fri, 29 Jun 2007, Zdenek Wagner wrote:
>
> > 2007/6/29, Norbert Preining <preining at logic.at>:
> > > On Fre, 29 Jun 2007, Thanh Han The wrote:
> > > > http://www.sendspace.com/file/yaids6
> > >
> > > Ok, with gs-gpl
> > >         GPL Ghostscript 8.56 (2007-03-14)
> > > I get:
> > >         - no error message
> > >         - but TWO (2) pages on screen (with the same "Hello")
> > >         - after I press enter even a thrid one!
> > >
> > > With gs-esp
> > >         ESP Ghostscript 815.03 (2006-08-25)
> > > I get:
> > >         - first a lot of error messages:
> > >                 **** Embedded font uses undefined procedure RD
> > >         - then
> > >                 %%BoundingBox: 92 759 117 768
> > >                 %%HiResBoundingBox: 92.141997 759.833977 116.225996 767.285977
> > >         - but no output
> > >         - pressing "Enter" gives me your error message.
> > >
> > I have AFPL Ghostscript 8.14 in OS/2, it does not any error message.
>
> the file from sendspace shows ok here with gs 8.60:
>
> $ gs f.pdf
> GPL Ghostscript SVN PRE-RELEASE 8.60 (2007-05-12)
> Copyright (C) 2007 Artifex Software, Inc.  All rights reserved.
> This software comes with NO WARRANTY: see the file PUBLIC for details.
> Processing pages 1 through 1.
> Page 1
> >>showpage, press <return> to continue<<
>
> Regards, Hartmut

From reinhard.kotucha at web.de  Fri Jun 29 17:11:49 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 29 Jun 2007 17:11:49 +0200
Subject: [tex-live] gs reports error: "Embedded font uses
	undefined	procedure(s)"
In-Reply-To: <20070629110721.GI2968@gamma.logic.tuwien.ac.at>
References: <74f506dc0706290345p75086c9fsb573e653151d913@mail.gmail.com>
	<20070629110721.GI2968@gamma.logic.tuwien.ac.at>
Message-ID: <18053.8501.548817.692508@zarniwoop.ms25.local>

Norbert Preining writes:

 > On Fre, 29 Jun 2007, Thanh Han The wrote:
 > > http://www.sendspace.com/file/yaids6
 > 
 > Ok, with gs-gpl
 > 	GPL Ghostscript 8.56 (2007-03-14)
 > I get:
 > 	- no error message
 > 	- but TWO (2) pages on screen (with the same "Hello")
 > 	- after I press enter even a thrid one!

The same version works perfectly here.  Only one page of output and no
error messages.

$ gs ~/downloads/f.pdf
GPL Ghostscript 8.56 (2007-03-14)
Copyright (C) 2007 artofcode LLC, Benicia, CA.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Processing pages 1 through 1.
Page 1
>>showpage, press <return> to continue<<

GS>
GS>quit

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From frank at kuesterei.ch  Fri Jun 29 18:46:56 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Fri, 29 Jun 2007 18:46:56 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <200706291241.l5TCfIoB007391@jupiter.fsci.fuk.kindai.ac.jp>
	(Akira Kakuto's message of "Fri\, 29 Jun 2007 21\:41\:17 +0900")
References: <876458m0z7.fsf@riesling.zuerich.kuesterei.ch>
	<200706291241.l5TCfIoB007391@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <87fy4aaetb.fsf@riesling.zuerich.kuesterei.ch>

Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp> wrote:

> Hi Frank,
>
>> Now I'm at version 0.3:
>
> Comments on texdoclua on windows:
>
>>   rmfile_command = 'del /F ';
>>   rmdir_command = 'rmdir ';
>
> Most applications on Windows support forward slash '/' as a
> directory separator, but internal commands such as
> 'del', 'rmdir', ... do not. So you have to replace forward
> slashes by backward slashes in the path if you use 'del' and 'rmdir'.

That's a misunderstanding: the '/F' is supposed to be an option (force,
remove even if the file is non-writable).  It probably doesn't make much
sense, it's there because the bash version has it, too.

> In cmd.exe (Windows' shell), '&' is a command separator
> like ';' in sh. So, the above may be rewritten as
>  
>    texdoc_viewer = { 
>       dvi  = '(start %s)',

Hm. What I want is something like (start /WAIT %s), but the whole thing
in the background.  The point is that %s is substituted not only with
the filename, but (in case of a compressed file) with 

filename .. command_sep .. rmfile_command .. tempfile .. command_sep .. rmdir .. tempdir

And I want the lua script to continue at once, but the rm stuff should
only be executed once the viewer has stopped.  I guess otherwise the rm
commands will either fail (because the file is locked by the viewer), or
the viewer might get problems if it hasn't loaded all pages by the time
the rm stuff is executed.

On Unix-like systems, this is achieved by starting a subshell with
`(...)' and putting it in the background with `&', but within the shell
the commands are executed one after the other, `;'.  How would I do that
on Windows?

> Text files may have various suffixes, so 'start' is not appropriate.
> I'm using less (less.exe is needed). If you use the standard
> Windows command 'more', you have to replace / by \ in %s.

Hm, does texdoclua show filenames with forward slashes on Windows?

> texdoclua is working on Windows. Thanks.
>
> [FYI]
> texdoc.exe in W32TeX allows an optional argument [SubStringInPath]
> in order to specify a file:
>
> texdoc manual.pdf geometry
> displays manual.pdf for the geometry package, while
>
> texdoc manual.pdf hyperref
> displays manual.pdf for the hyperref package.

Well, that's "texdoc[lua] geometry/manual" vs "texdoc[lua]
hyperref/manual".  Since one system has to face an incompatibility, I
fear it's Windows which has to suffer.  Both because it's easier to
implement and because I think it's more logical to have the directory in
front. 

Many thanks for your feedback!

Regards, Frank

-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From zdenek.wagner at gmail.com  Fri Jun 29 20:31:14 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 29 Jun 2007 20:31:14 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87fy4aaetb.fsf@riesling.zuerich.kuesterei.ch>
References: <876458m0z7.fsf@riesling.zuerich.kuesterei.ch>
	<200706291241.l5TCfIoB007391@jupiter.fsci.fuk.kindai.ac.jp>
	<87fy4aaetb.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <8719b6240706291131m3998f318r9d4234cbb1557a6a@mail.gmail.com>

2007/6/29, Frank K?ster <frank at kuesterei.ch>:
> Akira Kakuto <kakuto at fsci.fuk.kindai.ac.jp> wrote:
>
> > Hi Frank,
> >
> >> Now I'm at version 0.3:
> >
> > Comments on texdoclua on windows:
> >
> >>   rmfile_command = 'del /F ';
> >>   rmdir_command = 'rmdir ';
> >
> > Most applications on Windows support forward slash '/' as a
> > directory separator, but internal commands such as
> > 'del', 'rmdir', ... do not. So you have to replace forward
> > slashes by backward slashes in the path if you use 'del' and 'rmdir'.
>
> That's a misunderstanding: the '/F' is supposed to be an option (force,
> remove even if the file is non-writable).  It probably doesn't make much
> sense, it's there because the bash version has it, too.
>
> > In cmd.exe (Windows' shell), '&' is a command separator
> > like ';' in sh. So, the above may be rewritten as
> >
> >    texdoc_viewer = {
> >       dvi  = '(start %s)',
>
> Hm. What I want is something like (start /WAIT %s), but the whole thing
> in the background.  The point is that %s is substituted not only with
> the filename, but (in case of a compressed file) with
>
> filename .. command_sep .. rmfile_command .. tempfile .. command_sep .. rmdir .. tempdir
>
> And I want the lua script to continue at once, but the rm stuff should
> only be executed once the viewer has stopped.  I guess otherwise the rm
> commands will either fail (because the file is locked by the viewer), or
> the viewer might get problems if it hasn't loaded all pages by the time
> the rm stuff is executed.
>
> On Unix-like systems, this is achieved by starting a subshell with
> `(...)' and putting it in the background with `&', but within the shell
> the commands are executed one after the other, `;'.  How would I do that
> on Windows?
>
command1 & command2 & command3 & ...

The same in OS/2

> > Text files may have various suffixes, so 'start' is not appropriate.
> > I'm using less (less.exe is needed). If you use the standard
> > Windows command 'more', you have to replace / by \ in %s.
>
> Hm, does texdoclua show filenames with forward slashes on Windows?
>
> > texdoclua is working on Windows. Thanks.
> >
> > [FYI]
> > texdoc.exe in W32TeX allows an optional argument [SubStringInPath]
> > in order to specify a file:
> >
> > texdoc manual.pdf geometry
> > displays manual.pdf for the geometry package, while
> >
> > texdoc manual.pdf hyperref
> > displays manual.pdf for the hyperref package.
>
> Well, that's "texdoc[lua] geometry/manual" vs "texdoc[lua]
> hyperref/manual".  Since one system has to face an incompatibility, I
> fear it's Windows which has to suffer.  Both because it's easier to
> implement and because I think it's more logical to have the directory in
> front.
>
> Many thanks for your feedback!
>
> Regards, Frank
>
> --
> Frank K?ster
> Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
> Debian Developer (teTeX/TeXLive)
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From frank at kuesterei.ch  Fri Jun 29 22:52:53 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Fri, 29 Jun 2007 22:52:53 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <8719b6240706291131m3998f318r9d4234cbb1557a6a@mail.gmail.com>
	(Zdenek Wagner's message of "Fri\, 29 Jun 2007 20\:31\:14 +0200")
References: <876458m0z7.fsf@riesling.zuerich.kuesterei.ch>
	<200706291241.l5TCfIoB007391@jupiter.fsci.fuk.kindai.ac.jp>
	<87fy4aaetb.fsf@riesling.zuerich.kuesterei.ch>
	<8719b6240706291131m3998f318r9d4234cbb1557a6a@mail.gmail.com>
Message-ID: <87tzsqiiu2.fsf@riesling.zuerich.kuesterei.ch>

"Zdenek Wagner" <zdenek.wagner at gmail.com> wrote:

> 2007/6/29, Frank K?ster <frank at kuesterei.ch>:
>> And I want the lua script to continue at once, but the rm stuff should
>> only be executed once the viewer has stopped.  I guess otherwise the rm
>> commands will either fail (because the file is locked by the viewer), or
>> the viewer might get problems if it hasn't loaded all pages by the time
>> the rm stuff is executed.
>>
>> On Unix-like systems, this is achieved by starting a subshell with
>> `(...)' and putting it in the background with `&', but within the shell
>> the commands are executed one after the other, `;'.  How would I do that
>> on Windows?
>>
> command1 & command2 & command3 & ...
>
> The same in OS/2

But will the lua script continue before command1 has finished?  That's
what I achieve with the `&' at the end on Unix.

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From zdenek.wagner at gmail.com  Fri Jun 29 23:14:15 2007
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 29 Jun 2007 23:14:15 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87tzsqiiu2.fsf@riesling.zuerich.kuesterei.ch>
References: <876458m0z7.fsf@riesling.zuerich.kuesterei.ch>
	<200706291241.l5TCfIoB007391@jupiter.fsci.fuk.kindai.ac.jp>
	<87fy4aaetb.fsf@riesling.zuerich.kuesterei.ch>
	<8719b6240706291131m3998f318r9d4234cbb1557a6a@mail.gmail.com>
	<87tzsqiiu2.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <8719b6240706291414w6088184ev1e79fba248959124@mail.gmail.com>

2007/6/29, Frank K?ster <frank at kuesterei.ch>:
> "Zdenek Wagner" <zdenek.wagner at gmail.com> wrote:
>
> > 2007/6/29, Frank K?ster <frank at kuesterei.ch>:
> >> And I want the lua script to continue at once, but the rm stuff should
> >> only be executed once the viewer has stopped.  I guess otherwise the rm
> >> commands will either fail (because the file is locked by the viewer), or
> >> the viewer might get problems if it hasn't loaded all pages by the time
> >> the rm stuff is executed.
> >>
> >> On Unix-like systems, this is achieved by starting a subshell with
> >> `(...)' and putting it in the background with `&', but within the shell
> >> the commands are executed one after the other, `;'.  How would I do that
> >> on Windows?
> >>
> > command1 & command2 & command3 & ...
> >
> > The same in OS/2
>
> But will the lua script continue before command1 has finished?  That's
> what I achieve with the `&' at the end on Unix.
>
I think not unless the lua script starts a new cmd.exe shell.

> Regards, Frank
> --
> Frank K?ster
> Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
> Debian Developer (teTeX/TeXLive)
>


-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz

From Philip-and-LeKhanh at Royal-Tunbridge-Wells.Org  Fri Jun 29 23:28:51 2007
From: Philip-and-LeKhanh at Royal-Tunbridge-Wells.Org (Philip TAYLOR)
Date: Fri, 29 Jun 2007 22:28:51 +0100
Subject: [tex-live] texdoc in luatex
In-Reply-To: <8719b6240706291414w6088184ev1e79fba248959124@mail.gmail.com>
References: <876458m0z7.fsf@riesling.zuerich.kuesterei.ch>	<200706291241.l5TCfIoB007391@jupiter.fsci.fuk.kindai.ac.jp>	<87fy4aaetb.fsf@riesling.zuerich.kuesterei.ch>	<8719b6240706291131m3998f318r9d4234cbb1557a6a@mail.gmail.com>	<87tzsqiiu2.fsf@riesling.zuerich.kuesterei.ch>
	<8719b6240706291414w6088184ev1e79fba248959124@mail.gmail.com>
Message-ID: <46857993.2020008@Royal-Tunbridge-Wells.Org>

For XP and similar, the following brief extract
from "Start /?" may help to clarify the situation :

> START ["title"] [/Dpath] [/I] [/MIN] [/MAX] [/SEPARATE | /SHARED]
>       [/LOW | /NORMAL | /HIGH | /REALTIME | /ABOVENORMAL | /BELOWNORMAL]
>       [/WAIT] [/B] [command/program]
>       [parameters]


>> But will the lua script continue before command1 has finished?  That's
>> what I achieve with the `&' at the end on Unix.
>>
> I think not unless the lua script starts a new cmd.exe shell.

From kakuto at fsci.fuk.kindai.ac.jp  Sat Jun 30 00:11:18 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Sat, 30 Jun 2007 07:11:18 +0900
Subject: [tex-live] texdoc in luatex
In-Reply-To: Your message of "Fri, 29 Jun 2007 18:46:56 +0200"
References: <87fy4aaetb.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <200706292211.l5TMBJ2W008695@jupiter.fsci.fuk.kindai.ac.jp>

Hi Frank,

> >>   rmfile_command = 'del /F ';
> >>   rmdir_command = 'rmdir ';
> >
> > Most applications on Windows support forward slash '/' as a
> > directory separator, but internal commands such as
> > 'del', 'rmdir', ... do not. So you have to replace forward
> > slashes by backward slashes in the path if you use 'del' and 'rmdir'.
> 
> That's a misunderstanding: the '/F' is supposed to be an option (force,
> remove even if the file is non-writable).  It probably doesn't make much
> sense, it's there because the bash version has it, too.

I didn't mean /F. That is an option.
del /F c:/tmp/foo/bar.txt
does not work.  You have to replace / in the path like
del /F c:\tmp\foo\bar.txt

> > Text files may have various suffixes, so 'start' is not appropriate.
> > I'm using less (less.exe is needed). If you use the standard
> > Windows command 'more', you have to replace / by \ in %s.
> 
> Hm, does texdoclua show filenames with forward slashes on Windows?

Kpathsea and ls-R for TeXLive 2007 use forward slashes
(the same as on Unix) since I think it is more natural
in the TeX world.

Best regards,
Akira

From kakuto at fsci.fuk.kindai.ac.jp  Sat Jun 30 02:48:18 2007
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Sat, 30 Jun 2007 09:48:18 +0900
Subject: [tex-live] texdoc in luatex
In-Reply-To: Your message of "Fri, 29 Jun 2007 18:46:56 +0200"
References: <87fy4aaetb.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <200706300048.l5U0mJQR008969@jupiter.fsci.fuk.kindai.ac.jp>

Hi Frank,

> > texdoc manual.pdf geometry
> > displays manual.pdf for the geometry package, while
> >
> > texdoc manual.pdf hyperref
> > displays manual.pdf for the hyperref package.
> 
> Well, that's "texdoc[lua] geometry/manual" vs "texdoc[lua]
> hyperref/manual".  Since one system has to face an incompatibility, I
> fear it's Windows which has to suffer.  Both because it's easier to
> implement and because I think it's more logical to have the directory in
> front. 

I said 'optional' argument.
texdoc geometry/manual
is also ok.

Abbreviated one:
texdoc manual geo

Anyway, the present texdoc for Windows will retire
when texdoc by texlua comes in.

Best regards,
Akira

From jschrod at acm.org  Sat Jun 30 09:59:45 2007
From: jschrod at acm.org (Joachim Schrod)
Date: Sat, 30 Jun 2007 09:59:45 +0200
Subject: [tex-live] Perl availability in the TeX-Live build environment
Message-ID: <f652hi$go3$1@sea.gmane.org>

Hi,

I want to update the dviljk man page; it is both incomplete and has 
wrong information. Since my nroff-foo is not really good, I will 
write it as a POD file and generate the man page by Perl.

Can I assume that Perl is available in a TeX-Live build environment?

I.e., do I add the pod2man call to the build process, or do I 
commit the generated man page to SVN?

Best,
	Joachim

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
Joachim Schrod				Email: jschrod at acm.org
Roedermark, Germany


From frank at kuesterei.ch  Sat Jun 30 10:31:03 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Sat, 30 Jun 2007 10:31:03 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <46857993.2020008@Royal-Tunbridge-Wells.Org> (Philip TAYLOR's
	message of "Fri\, 29 Jun 2007 22\:28\:51 +0100")
References: <876458m0z7.fsf@riesling.zuerich.kuesterei.ch>
	<200706291241.l5TCfIoB007391@jupiter.fsci.fuk.kindai.ac.jp>
	<87fy4aaetb.fsf@riesling.zuerich.kuesterei.ch>
	<8719b6240706291131m3998f318r9d4234cbb1557a6a@mail.gmail.com>
	<87tzsqiiu2.fsf@riesling.zuerich.kuesterei.ch>
	<8719b6240706291414w6088184ev1e79fba248959124@mail.gmail.com>
	<46857993.2020008@Royal-Tunbridge-Wells.Org>
Message-ID: <87myyh4zeg.fsf@riesling.zuerich.kuesterei.ch>

Philip TAYLOR <Philip-and-LeKhanh at Royal-Tunbridge-Wells.Org> wrote:

> For XP and similar, the following brief extract
> from "Start /?" may help to clarify the situation :
>
>> START ["title"] [/Dpath] [/I] [/MIN] [/MAX] [/SEPARATE | /SHARED]
>>       [/LOW | /NORMAL | /HIGH | /REALTIME | /ABOVENORMAL | /BELOWNORMAL]
>>       [/WAIT] [/B] [command/program]
>>       [parameters]

You mean the /WAIT?  Not each program seems to respect it; I think if
PDF is associated with Adobe Reader, wait will finish at once.

>"Zdenek Wagner" <zdenek.wagner at gmail.com>
>
>>> But will the lua script continue before command1 has finished?  That's
>>> what I achieve with the `&' at the end on Unix.
>>>
>> I think not unless the lua script starts a new cmd.exe shell.

I don't understand - how can the start of a new cmd.exe influence the
behavior of the existing one?

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From wl at gnu.org  Sat Jun 30 11:15:44 2007
From: wl at gnu.org (Werner LEMBERG)
Date: Sat, 30 Jun 2007 11:15:44 +0200 (CEST)
Subject: [tex-live] Perl availability in the TeX-Live build environment
In-Reply-To: <f652hi$go3$1@sea.gmane.org>
References: <f652hi$go3$1@sea.gmane.org>
Message-ID: <20070630.111544.147252876.wl@gnu.org>


> I want to update the dviljk man page; it is both incomplete and has
> wrong information. Since my nroff-foo is not really good, I will
> write it as a POD file and generate the man page by Perl.

Alternatively, send me the file after your update so that I can fix
the groff stuff.


    Werner

From preining at logic.at  Sat Jun 30 11:52:47 2007
From: preining at logic.at (Norbert Preining)
Date: Sat, 30 Jun 2007 11:52:47 +0200
Subject: [tex-live] Perl availability in the TeX-Live build environment
In-Reply-To: <f652hi$go3$1@sea.gmane.org>
References: <f652hi$go3$1@sea.gmane.org>
Message-ID: <20070630095247.GA30467@gamma.logic.tuwien.ac.at>

On Sam, 30 Jun 2007, Joachim Schrod wrote:
> Can I assume that Perl is available in a TeX-Live build environment?

Well I cannot imagine a decent compile system *without* perl. But the
more strange arch/os combination builders should speak up.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
SUTTON and CHEAM (nouns)
Sutton and cheam are the kinds of dirt into which all dirt is
divided. 'Sutton' is the dark sort that always gets on to
light-coloured things, 'cheam' the light-coloured sort that clings to
dark items. Anyone who has ever found Marmite stains on a dress-shirt
or seagull goo on a dinner jacket (a) knows all about sutton and
cheam, and (b) is going to tome very curious dinner parties.
			--- Douglas Adams, The Meaning of Liff

From reinhard.kotucha at web.de  Sat Jun 30 17:02:46 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 30 Jun 2007 17:02:46 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87myyh4zeg.fsf@riesling.zuerich.kuesterei.ch>
References: <876458m0z7.fsf@riesling.zuerich.kuesterei.ch>
	<200706291241.l5TCfIoB007391@jupiter.fsci.fuk.kindai.ac.jp>
	<87fy4aaetb.fsf@riesling.zuerich.kuesterei.ch>
	<8719b6240706291131m3998f318r9d4234cbb1557a6a@mail.gmail.com>
	<87tzsqiiu2.fsf@riesling.zuerich.kuesterei.ch>
	<8719b6240706291414w6088184ev1e79fba248959124@mail.gmail.com>
	<46857993.2020008@Royal-Tunbridge-Wells.Org>
	<87myyh4zeg.fsf@riesling.zuerich.kuesterei.ch>
Message-ID: <18054.28822.539370.730133@zarniwoop.ms25.local>

Frank K?ster writes:
 > Philip TAYLOR <Philip-and-LeKhanh at Royal-Tunbridge-Wells.Org> wrote:
 > 
 > > For XP and similar, the following brief extract
 > > from "Start /?" may help to clarify the situation :
 > >
 > >> START ["title"] [/Dpath] [/I] [/MIN] [/MAX] [/SEPARATE | /SHARED]
 > >>       [/LOW | /NORMAL | /HIGH | /REALTIME | /ABOVENORMAL | /BELOWNORMAL]
 > >>       [/WAIT] [/B] [command/program]
 > >>       [parameters]
 > 
 > You mean the /WAIT?  Not each program seems to respect it; I think if
 > PDF is associated with Adobe Reader, wait will finish at once.

Frank,
if Debian needs all PDF files comressed, which tools does Debian
provide to deal with them?  And why do you take care about Windows?

In TeXLive we cannot have compressed PDF files because this would
break a lot of things.  There are HTML files with links to PDF files
and there are links in PDF files to other PDF files.  The doc trees
should be browsable because not everyone is familiar with commandline
tools and texdoctk is incomplete and does not support documentation
written in any other language than English.

Compressed files will cause a lot of problems and people can't use
programs of their choice to browse documentation.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From gnwiii at gmail.com  Sat Jun 30 17:38:29 2007
From: gnwiii at gmail.com (George N. White III)
Date: Sat, 30 Jun 2007 12:38:29 -0300
Subject: [tex-live] gs reports error: "Embedded font uses undefined
	procedure(s)"
In-Reply-To: <74f506dc0706290232v7e38bbb1pcc3164031ab24455@mail.gmail.com>
References: <74f506dc0706290232v7e38bbb1pcc3164031ab24455@mail.gmail.com>
Message-ID: <22af238a0706300838g348b6d41p1c2b87f3984eba17@mail.gmail.com>

On 6/29/07, Thanh Han The <hanthethanh at gmail.com> wrote:

I have seen this before.  Bug 687824 seems to be related (default
versions of missing procedures are defined but when used you get the
warning).

I don't see the messages in current gs versions, but many distros
seem to have stalled at 8.14 or 8.15, so I have filed bug report #689314.
If you use a distro that has the old versions, file bug reports.

Other sitings of the problem:

<http://nashi.altmuehlnet.de/pipermail/scribus/2006-May/017624.html>!


> with the minimal test file:
>
> ,--------
> | \font\f=bchb8y\f
> | Hello
> | \bye
> `--------
>
> the pdf produced by pdftex (1.40.3) and dvipdfm (0.13.2c)
> seems to make gs (AFPL Ghostscript 8.53 (2005-10-20) on debian linux)
> unhappy:

Using the same versions, I don't see a problem with the merged esp+gpl gs, but
I do get the error with ESP gs-8.15 (as provided by Fedora 7).

$ gs t2.pdf
GPL Ghostscript SVN PRE-RELEASE 8.60 (2007-05-12)
Copyright (C) 2007 artofcode LLC, Benicia, CA.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Processing pages 1 through 1.
Page 1
%%BoundingBox: 92 55 308 718
%%HiResBoundingBox: 92.123997 55.277998 307.691991 717.407978

> ,--------
> |    **** Embedded font uses undefined procedure(s):  ND 5 times, RD 209 times,
> |
> |    **** This file had errors that were repaired or ignored.
> |    **** The file was produced by:
> |    **** >>>> dvipdfm 0.13.2c, Copyright ? 1998, by Mark A. Wicks <<<<
> |    (or **** >>>> pdfTeX-1.40.3 <<<< in case of pdftex)
> |    **** Please notify the author of the software that produced this
> |    **** file that it does not conform to Adobe's published PDF
> |    **** specification.
> `--------
>
> the same error with gs-esp (8.15)
>
> when extracting the font from the pdf, it seems to be quite ok, ND and RD are
> defined there and t1lint didn't report anything.
>
> Can it be a problem of gs?

I also tried your From:
http://fs02n2.sendspace.com/download/lite/9618c93247e185df30261f0b34b816b5/46864161/yaids6/47ee257959d85f73ed35e3880c95fdc8/ZSIKc3JQaXIPK1o+YBd7G3NNVDt0ZE8fXW8fSTBCPmF7fVM7/f.pdf

Did you mean this to be the pdftex output?

[gwhite at cerberus t2]$ pdfinfo f.pdf
Creator:        TeX
Producer:       pdfTeX-1.40.3
CreationDate:   Fri Jun 29 11:20:03 2007
ModDate:        Fri Jun 29 11:20:03 2007
Tagged:         no
Pages:          1
Encrypted:      no
Page size:      595.276 x 841.89 pts (A4)
File size:      7260 bytes
Optimized:      no
PDF version:    1.4
[gwhite at cerberus t2]$ pdfinfo t2.pdf
Creator:         TeX output 2007.06.30:0837
Producer:       dvipdfm 0.13.2c, Copyright (c) 1998, by Mark A. Wicks
CreationDate:   Sat Jun 30 08:38:34 2007
Tagged:         no
Pages:          1
Encrypted:      no
Page size:      612 x 792 pts (letter)
File size:      21923 bytes
Optimized:      no
PDF version:    1.2


-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From Philip-and-LeKhanh at Royal-Tunbridge-Wells.Org  Sat Jun 30 17:40:27 2007
From: Philip-and-LeKhanh at Royal-Tunbridge-Wells.Org (Philip TAYLOR)
Date: Sat, 30 Jun 2007 16:40:27 +0100
Subject: [tex-live] texdoc in luatex
In-Reply-To: <18054.28822.539370.730133@zarniwoop.ms25.local>
References: <876458m0z7.fsf@riesling.zuerich.kuesterei.ch>	<200706291241.l5TCfIoB007391@jupiter.fsci.fuk.kindai.ac.jp>	<87fy4aaetb.fsf@riesling.zuerich.kuesterei.ch>	<8719b6240706291131m3998f318r9d4234cbb1557a6a@mail.gmail.com>	<87tzsqiiu2.fsf@riesling.zuerich.kuesterei.ch>	<8719b6240706291414w6088184ev1e79fba248959124@mail.gmail.com>	<46857993.2020008@Royal-Tunbridge-Wells.Org>	<87myyh4zeg.fsf@riesling.zuerich.kuesterei.ch>
	<18054.28822.539370.730133@zarniwoop.ms25.local>
Message-ID: <4686796B.8080303@Royal-Tunbridge-Wells.Org>

Definitely works for me, Frank.  Attached is the
file against which I tested, and the incantation
was :

	Start /wait FILELOAD[1].pdf

which then sat there until I closed Adobe Acrobat.
This was admittedly Adobe Acrobat Professional
and not Acrobat Reader, but I don't have a copy
of the latter against which to test ...

** Phil.
--------

Reinhard Kotucha wrote:
> Frank K?ster writes:
>  > Philip TAYLOR <Philip-and-LeKhanh at Royal-Tunbridge-Wells.Org> wrote:
>  > 
>  > > For XP and similar, the following brief extract
>  > > from "Start /?" may help to clarify the situation :
>  > >
>  > >> START ["title"] [/Dpath] [/I] [/MIN] [/MAX] [/SEPARATE | /SHARED]
>  > >>       [/LOW | /NORMAL | /HIGH | /REALTIME | /ABOVENORMAL | /BELOWNORMAL]
>  > >>       [/WAIT] [/B] [command/program]
>  > >>       [parameters]
>  > 
>  > You mean the /WAIT?  Not each program seems to respect it; I think if
>  > PDF is associated with Adobe Reader, wait will finish at once.

From hanthethanh at gmail.com  Sat Jun 30 17:52:23 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Sat, 30 Jun 2007 17:52:23 +0200
Subject: [tex-live] gs reports error: "Embedded font uses undefined
	procedure(s)"
Message-ID: <74f506dc0706300852p7cf308fv7015206ef11fec7f@mail.gmail.com>

On Sat, Jun 30, 2007 at 12:38:29PM -0300, George N. White III wrote:
> I have seen this before.  Bug 687824 seems to be related (default
> versions of missing procedures are defined but when used you get the
> warning).
>
> I don't see the messages in current gs versions, but many distros
> seem to have stalled at 8.14 or 8.15, so I have filed bug report #689314.
> If you use a distro that has the old versions, file bug reports.
>
> Other sitings of the problem:
>
> <http://nashi.altmuehlnet.de/pipermail/scribus/2006-May/017624.html>!

thanks for the additional info. The problem seems to be
related to Charter fonts and some versions of gs. I was
wondering whether pdftex is the culprit, but it seems not.

Regards,
Thanh

From f.rougon at free.fr  Sat Jun 30 18:22:49 2007
From: f.rougon at free.fr (Florent Rougon)
Date: Sat, 30 Jun 2007 18:22:49 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <18054.28822.539370.730133@zarniwoop.ms25.local> (Reinhard
	Kotucha's message of "Sat, 30 Jun 2007 17:02:46 +0200")
References: <876458m0z7.fsf@riesling.zuerich.kuesterei.ch>
	<200706291241.l5TCfIoB007391@jupiter.fsci.fuk.kindai.ac.jp>
	<87fy4aaetb.fsf@riesling.zuerich.kuesterei.ch>
	<8719b6240706291131m3998f318r9d4234cbb1557a6a@mail.gmail.com>
	<87tzsqiiu2.fsf@riesling.zuerich.kuesterei.ch>
	<8719b6240706291414w6088184ev1e79fba248959124@mail.gmail.com>
	<46857993.2020008@Royal-Tunbridge-Wells.Org>
	<87myyh4zeg.fsf@riesling.zuerich.kuesterei.ch>
	<18054.28822.539370.730133@zarniwoop.ms25.local>
Message-ID: <87d4zdbeee.fsf@florent.maison>

Hi,

Reinhard Kotucha <reinhard.kotucha at web.de> wrote:

> Frank,
> if Debian needs all PDF files comressed, which tools does Debian
> provide to deal with them?

  1) Debian doesn't provide 'brain', but it has been a standard component
     required on the user side for a lot of years...

  2) see(1)

  3) zxpdf(1)

> And why do you take care about Windows?

I'm not Frank, but I suppose the reason is that he's a nice guy and
takes pity on those poor lost souls (well, to be accurate, sometimes
they are not lost but simply forced by someone higher in the hierarchy
:).

> In TeXLive we cannot have compressed PDF files because this would
> break a lot of things.  There are HTML files with links to PDF files

I think a good combination of web server/web browser should deal with
with gz/bzip2/etc. being an encoding in the HTTP protocol. However, I'm
not sure what to do when browsing local files, i.e. when no HTTP server
can provide the proper encoding metadata. But I'm not an expert in this
area, so I may be missing some way out of the problem.

> and there are links in PDF files to other PDF files.  The doc trees

Unless the PDF specification has forseen the use of compressed files,
this is indeed a real problem. :-/

> should be browsable because not everyone is familiar with commandline
> tools and texdoctk is incomplete and does not support documentation
> written in any other language than English.

FWIW, I'm pondering these days about rewriting texdoctk in Python (and
probably Qt for the GUI toolkit) to deal with the major problems we've
seen in the last years, mainly that:

  - distributors such as Debian want each package to be able to provide
    its own peace of metadata describing the documentation provided by
    the package. This avoids the need of a permanent superman
    maintaining a central database that records all documents in the TeX
    world.

    This would allow separate Debian packages to record their
    documentation in the texdoctk database without any work from the
    Debian TeX maintainers.

    IMHO, this metadata should be part of the LaTeX package on CTAN and
    could be used by the TeX Catalogue to automatically point to the
    various documentation files, the master file (index) if any, deal
    with the various languages, etc.

  - some packages such as hyperref have a documentation that is split
    into several files, and this is a very well known problem for
    texdoc. As said previously, I'd like LaTeX packages to ship metadata
    listing all the documentation files, their languages and tell which
    one is the index, if any (for a given language).

If people are interested, this may motivate me to allocate the needed
time in these holidays.

> Compressed files will cause a lot of problems and people can't use
> programs of their choice to browse documentation.

The main problem I see (as a Debian guy who can polish the simple tools
such as see(1)) is links from PDF files to other PDF files. But I'm
wondering whether these links are really useful because I don't know how
they deal with paths. For instance, suppose that

  texmf/doc/some/document1.pdf

points to:

  texmf/doc/other/document2.pdf

I suppose the link in document1.pdf can be "../other/document2.pdf", but
I'm not sure this would work on Windows. But even this is not robust
enough for Debian. The reason is, in Debian, the TEXMF tree for TL stuff
is

  /usr/share/texmf-texlive

(for teTeX, it was /usr/share/texmf-tetex and both could be combined at
the same time until teTeX got removed from the archive)

but packages that are packaged separately for Debian (which allows us to
update them more frequently than they are in TL), such as lmodern, are
installed into another TEXMF tree (/usr/share/texmf).

Therefore, a link such as ../other/document2.pdf would break as soon as
document1.pdf and document2.pdf are located in different TEXMF trees.

As a consequence, I suppose these links are mostly useful for files that
are supposed to be installed in the same directory, such as, I presume,
the various files comprising the hyperref documentation. But even in
this case, unless the PDF specification allows us to point to a .pdf.gz
*and* $pdf_viewer_in_use is able to cope with that *and* we either don't
change upstream choices (to ship as .pdf or .pdf.gz or .pdf.bz2) or
rebuild the docs for Debian (to ship .pdf.bz2 *and* update the
corresponding internal links in the docs, which would be a PITA), we're
screwed.

That makes a lot of "if's", so I'd tend to say that we're basically
screwed unless we (TL or Debian) give up on either compressed PDF files
or on links from PDF files to other PDF files.

Sorry for the length...

-- 
Florent

From gnwiii at gmail.com  Sat Jun 30 18:44:47 2007
From: gnwiii at gmail.com (George N. White III)
Date: Sat, 30 Jun 2007 13:44:47 -0300
Subject: [tex-live] gs reports error: "Embedded font uses undefined
	procedure(s)"
In-Reply-To: <74f506dc0706300852p7cf308fv7015206ef11fec7f@mail.gmail.com>
References: <74f506dc0706300852p7cf308fv7015206ef11fec7f@mail.gmail.com>
Message-ID: <22af238a0706300944q5fea6a44w41de85ac67c1df0@mail.gmail.com>

On 6/30/07, Thanh Han The <hanthethanh at gmail.com> wrote:
> On Sat, Jun 30, 2007 at 12:38:29PM -0300, George N. White III wrote:
> > I have seen this before.  Bug 687824 seems to be related (default
> > versions of missing procedures are defined but when used you get the
> > warning).
> >
> > I don't see the messages in current gs versions, but many distros
> > seem to have stalled at 8.14 or 8.15, so I have filed bug report #689314.
> > If you use a distro that has the old versions, file bug reports.
> >
> > Other sitings of the problem:
> >
> > <http://nashi.altmuehlnet.de/pipermail/scribus/2006-May/017624.html>!
>
> thanks for the additional info. The problem seems to be
> related to Charter fonts and some versions of gs. I was
> wondering whether pdftex is the culprit, but it seems not.

I found an old posting for this in

http://groups.google.com/group/de.comp.text.tex

  ---------------------------------------------------------
Christian Ebert <blacktr... at gmx.net> writes:
> \usepackage{charter}
[...]
> $ gs gstest.pdf
> **** Embedded font uses undefined procedure RD
> **** Embedded font uses undefined procedure ND
> [ obiges einige zig mal]
>>>showpage, press <return> to continue<<

> **** This file had errors that were repaired or ignored.
> **** The file was produced by:
> **** >>>> pdfeTeX-1.21a <<<<
> **** Please notify the author of the software that produced this
> **** file that it does not conform to Adobe's published PDF
> **** specification.
[...]
> lmodern oder mathpazo z.B. laufen ohne Warnungen durch.

Interessant. In lmr10.pfb findet man ?ber t1disasm

/RD{string currentfile exch readstring pop}executeonly def
/ND{noaccess def}executeonly def

genau so, wie es in den Type1 Spezifikationen von Adobe steht. In
bchr8a.pfb steht dagegen

userdict /RD {string currentfile exch readstring pop} executeonly put
userdict /ND {noaccess def} executeonly put

Wenn ich die Type1 Spezifikationen richtig verstehe, ist das auch eine
legale Definition f?r RD und ND. In der PDF Spezifikation finde ich
nichts zu diesem Thema. Sieht f?r mich eher nach einem Fehler in gs aus.
Vielleicht habe ich aber auch etwas ?bersehen ...

cheerio
ralf  [Ralf Stubner <ralf.stub... at physik.dot.uni-erlangen.dot.de>]
 -------------------------------------------------------------------


-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia

From karl at freefriends.org  Sat Jun 30 19:59:10 2007
From: karl at freefriends.org (Karl Berry)
Date: Sat, 30 Jun 2007 12:59:10 -0500
Subject: [tex-live] Build/source/Makefile oddity in all target
In-Reply-To: <f6002v$l8q$1@sea.gmane.org>
Message-ID: <200706301759.l5UHxAW21683@f7.net>

    When I change the first dependency line to
    lib: @LIBSDEP@

Sounds reasonable.  I can't think of any deep reason behind the way it
is now; my guess is that it is just the accretion of history.

I'll test out the change as soon as I can.

Thanks Joachim.

From karl at freefriends.org  Sat Jun 30 19:59:10 2007
From: karl at freefriends.org (Karl Berry)
Date: Sat, 30 Jun 2007 12:59:10 -0500
Subject: [tex-live] Inconsistency in SVN repository and make clean
	in	alephdir
In-Reply-To: <f602aa$sor$1@sea.gmane.org>
Message-ID: <200706301759.l5UHxAs21666@f7.net>

    The Make include file Build/source/texk/web2c/alephdir/aleph.mk 
    deletes $(alephdir)/alephextra.h in its aleph-clean target; but 
    that file is checked into SVN. That means that a make distclean 
    does not leave a pristine source tree.

Thanks for reporting it.  I'll take a look.
(Hopefully next year we'll be removing aleph entirely in favor of luatex
...)

k

From frank at kuesterei.ch  Sat Jun 30 20:07:07 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Sat, 30 Jun 2007 20:07:07 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87d4zdbeee.fsf@florent.maison> (Florent Rougon's message of
	"Sat\, 30 Jun 2007 18\:22\:49 +0200")
References: <876458m0z7.fsf@riesling.zuerich.kuesterei.ch>
	<200706291241.l5TCfIoB007391@jupiter.fsci.fuk.kindai.ac.jp>
	<87fy4aaetb.fsf@riesling.zuerich.kuesterei.ch>
	<8719b6240706291131m3998f318r9d4234cbb1557a6a@mail.gmail.com>
	<87tzsqiiu2.fsf@riesling.zuerich.kuesterei.ch>
	<8719b6240706291414w6088184ev1e79fba248959124@mail.gmail.com>
	<46857993.2020008@Royal-Tunbridge-Wells.Org>
	<87myyh4zeg.fsf@riesling.zuerich.kuesterei.ch>
	<18054.28822.539370.730133@zarniwoop.ms25.local>
	<87d4zdbeee.fsf@florent.maison>
Message-ID: <87fy4948qc.fsf@riesling.zuerich.kuesterei.ch>

Florent Rougon <f.rougon at free.fr> wrote:

> Hi,
>
> Reinhard Kotucha <reinhard.kotucha at web.de> wrote:
>
>> Frank,
>> if Debian needs all PDF files comressed, which tools does Debian
>> provide to deal with them?
>
>   1) Debian doesn't provide 'brain', but it has been a standard component
>      required on the user side for a lot of years...
>
>   2) see(1)
>
>   3) zxpdf(1)

4) texdoclua(1)

>> And why do you take care about Windows?
>
> I'm not Frank, but I suppose the reason is that he's a nice guy and
> takes pity on those poor lost souls (well, to be accurate, sometimes
> they are not lost but simply forced by someone higher in the hierarchy
> :).

Yes, if texdoc supports compressed files on most platforms, why should I
leave that out on Windows?

>> In TeXLive we cannot have compressed PDF files because this would
>> break a lot of things.  There are HTML files with links to PDF files

It's not only about PDF files, which are at the moment not compressed in
Debian's TeXLive packages.  But DVI files are compressed (and xdvi can
deal with that on its own).

> FWIW, I'm pondering these days about rewriting texdoctk in Python (and
> probably Qt for the GUI toolkit) to deal with the major problems we've
> seen in the last years, mainly that:
>
>   - distributors such as Debian want each package to be able to provide
>     its own peace of metadata describing the documentation provided by
>     the package. This avoids the need of a permanent superman
>     maintaining a central database that records all documents in the TeX
>     world.

Have you talked to Thomas Ruedas about that?  I think he also considered
this. Maybe he has some code (but you'd have to read Perl, which is said
to be harder than to write it...)

Regards, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From frank at kuesterei.ch  Sat Jun 30 20:18:23 2007
From: frank at kuesterei.ch (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Sat, 30 Jun 2007 20:18:23 +0200
Subject: [tex-live] gs reports error: "Embedded font uses undefined
	procedure(s)"
In-Reply-To: <22af238a0706300944q5fea6a44w41de85ac67c1df0@mail.gmail.com>
	(George N. White, III's message of "Sat\,
	30 Jun 2007 13\:44\:47 -0300")
References: <74f506dc0706300852p7cf308fv7015206ef11fec7f@mail.gmail.com>
	<22af238a0706300944q5fea6a44w41de85ac67c1df0@mail.gmail.com>
Message-ID: <87ejjt2tn4.fsf@riesling.zuerich.kuesterei.ch>

"George N. White III" <gnwiii at gmail.com> wrote:

> I found an old posting for this in
>
> http://groups.google.com/group/de.comp.text.tex

Do you need it translated?

>> lmodern oder mathpazo z.B. laufen ohne Warnungen durch.

No warnings with e.g.  ...
>
> Interessant. In lmr10.pfb findet man ?ber t1disasm
>
> /RD{string currentfile exch readstring pop}executeonly def
> /ND{noaccess def}executeonly def
>
> genau so, wie es in den Type1 Spezifikationen von Adobe steht. In
> bchr8a.pfb steht dagegen

exactly as in the type1 specification by Adobe.  In bchr8a.pfb, however, 

> userdict /RD {string currentfile exch readstring pop} executeonly put
> userdict /ND {noaccess def} executeonly put
>
> Wenn ich die Type1 Spezifikationen richtig verstehe, ist das auch eine
> legale Definition f?r RD und ND. In der PDF Spezifikation finde ich
> nichts zu diesem Thema. Sieht f?r mich eher nach einem Fehler in gs aus.
> Vielleicht habe ich aber auch etwas ?bersehen ...

If I understand the Type1 spec correctly, this is also a legal
definition for RD and ND.  In the PDF spec, I cannot find anything on
the topic.  Looks rather like a bug in gs to me.  But maybe I missed
something. 

Gru?, Frank
-- 
Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From reinhard.kotucha at web.de  Sat Jun 30 21:32:48 2007
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 30 Jun 2007 21:32:48 +0200
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87d4zdbeee.fsf@florent.maison>
References: <876458m0z7.fsf@riesling.zuerich.kuesterei.ch>
	<200706291241.l5TCfIoB007391@jupiter.fsci.fuk.kindai.ac.jp>
	<87fy4aaetb.fsf@riesling.zuerich.kuesterei.ch>
	<8719b6240706291131m3998f318r9d4234cbb1557a6a@mail.gmail.com>
	<87tzsqiiu2.fsf@riesling.zuerich.kuesterei.ch>
	<8719b6240706291414w6088184ev1e79fba248959124@mail.gmail.com>
	<46857993.2020008@Royal-Tunbridge-Wells.Org>
	<87myyh4zeg.fsf@riesling.zuerich.kuesterei.ch>
	<18054.28822.539370.730133@zarniwoop.ms25.local>
	<87d4zdbeee.fsf@florent.maison>
Message-ID: <18054.45024.921354.863273@zarniwoop.ms25.local>

Hi Florent and thanks for the detailed response.

Florent Rougon writes:

 > Reinhard Kotucha <reinhard.kotucha at web.de> wrote:
 > 
 > > Frank,
 > > if Debian needs all PDF files comressed, which tools does Debian
 > > provide to deal with them?
 > 
 >   1) Debian doesn't provide 'brain', but it has been a standard component
 >      required on the user side for a lot of years...
 > 
 >   2) see(1)
 > 
 >   3) zxpdf(1)

I suppose that zxpdf can deal with compressed PDF files which are
linked to other PDF files, but I fear that we cannot assume that it is
available on all platforms supported by TeXLive.  Furthermore, xpdf
does not support everything needed.  It is unavoidable that acroread
can be used.

I doubt that see(1) is able to deal with compressed files required by
other PDF files.  But you can try with hyperref.
 
 > > And why do you take care about Windows?
 > 
 > I'm not Frank, but I suppose the reason is that he's a nice guy and
 > takes pity on those poor lost souls (well, to be accurate, sometimes
 > they are not lost but simply forced by someone higher in the hierarchy
 > :).

What I meant is that there is no Debian for Windows (yet) and
regarding TeXLive, I don't see how to support compressed PDF files for
all the platforms supported by TeXLive.

 > > In TeXLive we cannot have compressed PDF files because this would
 > > break a lot of things.  There are HTML files with links to PDF files
 > 
 > I think a good combination of web server/web browser should deal with
 > with gz/bzip2/etc. being an encoding in the HTTP protocol. However, I'm
 > not sure what to do when browsing local files, i.e. when no HTTP server
 > can provide the proper encoding metadata. But I'm not an expert in this
 > area, so I may be missing some way out of the problem.

There is no HTTP server involved and it is required that people can
use the software they have already installed.  You can do almost
everything in Debian if you provide the required software.  TeXLive
supports more platforms than Debian.  And this is the problem.  You
can use zxpdf in Debian but porting it to Windows is certainly quite
painful.  

 > > and there are links in PDF files to other PDF files.  The doc trees
 > 
 > Unless the PDF specification has forseen the use of compressed files,
 > this is indeed a real problem. :-/

I don't see any good reason why the PDF specification should support
it because objects in PDF files are compressed already.  It actually
doesn't make sense to compress PDF files.  Maybe PDF files produced by
pdftex are larger than necessary because pdftex does not convert Type1
fonts to CFF, but future versions will do that.  PDF files can be
smaller when object stream compression is enabled in pdftex, but
object stream compression requires Acrobat version < 5, but we cannot
assume that everyone has a recent version of acroread.

 > > should be browsable because not everyone is familiar with commandline
 > > tools and texdoctk is incomplete and does not support documentation
 > > written in any other language than English.
 > 
 > FWIW, I'm pondering these days about rewriting texdoctk in Python (and
 > probably Qt for the GUI toolkit) to deal with the major problems we've
 > seen in the last years, mainly that:

It's certainly not a big problem to include a Python script but it's
quite unlikely that Python itself will be included.  We have Perl/Tk
for Windows on the CD/DVD but there is no space for Python on the CD.

If you have Debian in mind, use Python.  But a Python script is
useless for TeXLive.  It will not work on all platforms.

 > If people are interested, this may motivate me to allocate the needed
 > time in these holidays.

Before you plan anything it would be nice to hear about Karl's
opinion.  I'm not against everything but I see a lot of problems.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-4592165
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From hanthethanh at gmail.com  Sat Jun 30 22:18:21 2007
From: hanthethanh at gmail.com (Thanh Han The)
Date: Sat, 30 Jun 2007 22:18:21 +0200
Subject: [tex-live] gs reports error: "Embedded font uses undefined
	procedure(s)"
Message-ID: <74f506dc0706301318w3cc16064x32868837af026d18@mail.gmail.com>

thanks for the translation.

another thing to notice is that the ps file created by dvips
is ok, although the embedded fonts in pdf and ps are almost
identical (apart from the subset tag). Looks likely a gs
problem.

Regards,
Thanh


On Sat, Jun 30, 2007 at 08:18:23PM +0200, Frank K?ster wrote:
> "George N. White III" <gnwiii at gmail.com> wrote:
>
> > I found an old posting for this in
> >
> > http://groups.google.com/group/de.comp.text.tex
>
> Do you need it translated?
>
> >> lmodern oder mathpazo z.B. laufen ohne Warnungen durch.
>
> No warnings with e.g.  ...
> >
> > Interessant. In lmr10.pfb findet man ?ber t1disasm
> >
> > /RD{string currentfile exch readstring pop}executeonly def
> > /ND{noaccess def}executeonly def
> >
> > genau so, wie es in den Type1 Spezifikationen von Adobe steht. In
> > bchr8a.pfb steht dagegen
>
> exactly as in the type1 specification by Adobe.  In bchr8a.pfb, however,
>
> > userdict /RD {string currentfile exch readstring pop} executeonly put
> > userdict /ND {noaccess def} executeonly put
> >
> > Wenn ich die Type1 Spezifikationen richtig verstehe, ist das auch eine
> > legale Definition f?r RD und ND. In der PDF Spezifikation finde ich
> > nichts zu diesem Thema. Sieht f?r mich eher nach einem Fehler in gs aus.
> > Vielleicht habe ich aber auch etwas ?bersehen ...
>
> If I understand the Type1 spec correctly, this is also a legal
> definition for RD and ND.  In the PDF spec, I cannot find anything on
> the topic.  Looks rather like a bug in gs to me.  But maybe I missed
> something.
>
> Gru?, Frank
> --
> Frank K?ster
> Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
> Debian Developer (teTeX/TeXLive)

From andrea.loyer at crans.org  Sat Jun 30 21:42:26 2007
From: andrea.loyer at crans.org (=?UTF-8?B?QW5kcsOpYSBMb3llcg==?=)
Date: Sat, 30 Jun 2007 21:42:26 +0200
Subject: [tex-live] enhancement suggestion
Message-ID: <4686B222.8010404@crans.org>

Hello,

       I have been a user of MikTEx under Windows, and then Texlive 
(under unix). What seems to me to be missing in any tex distribution for 
unix I know, is something like the option "-enable-installer" of MikTex, 
that enables on the fly installation of packages directly downloaded 
from CTAN.

       It seems to me that such an option is very important for people 
don't wanting to have a whole and huge installation of Tex, since it 
will just adapt itself to the tex files they are wanting to compile.


Best regards.

-- 
A. loyer

From karl at freefriends.org  Sat Jun 30 23:02:08 2007
From: karl at freefriends.org (Karl Berry)
Date: Sat, 30 Jun 2007 16:02:08 -0500
Subject: [tex-live] enhancement suggestion
In-Reply-To: <4686B222.8010404@crans.org>
Message-ID: <200706302102.l5UL28J09849@f7.net>

    unix I know, is something like the option "-enable-installer" of MikTex, 
    that enables on the fly installation of packages directly downloaded 

Indeed, TeX Live simply does not have this feature, today.  It's
something we'd like to add in the future, but there are a lot of
infrastructure issues that have to be solved first.

Best,
Karl

From karl at freefriends.org  Sat Jun 30 23:18:50 2007
From: karl at freefriends.org (Karl Berry)
Date: Sat, 30 Jun 2007 16:18:50 -0500
Subject: [tex-live] texdoc in luatex
In-Reply-To: <18054.45024.921354.863273@zarniwoop.ms25.local>
Message-ID: <200706302118.l5ULIoo16775@f7.net>

    If you have Debian in mind, use Python.  But a Python script is
    useless for TeXLive.  It will not work on all platforms.

In this particular case, I don't see much difference between a Python
script and a Perl/Tk script in terms of portability.  We aren't and
won't be including all the support for either one in TL.

So if Florent has the time and inclination to move this forward, I think
it'd be an excellent step forward to have a new and improved version in
Python vs. an unmaintained version in Perl.

k



From karl at freefriends.org  Sat Jun 30 19:59:10 2007
From: karl at freefriends.org (Karl Berry)
Date: Sat, 30 Jun 2007 12:59:10 -0500
Subject: [tex-live] texdoc in luatex
In-Reply-To: <87d4zdbeee.fsf@florent.maison>
Message-ID: <200706301759.l5UHxAN21701@f7.net>

I see no hugely critical reason to support compressed pdf files.  I
don't think we should have them in TeX Live.  The amount of space saved
is not worth the ensuing trouble IMHO.

As for the problem of a documentation database, the Catalogue is the
obvious (and only) place to get good information from.  Expecting
individual authors to provide any such metadata is doomed to failure, in
my experience.  (That is, some authors will, but many authors won't, so
you can't count on it, so you have to deal with the metadata being
missing anyway, so you might as well not ask authors to do more work in
the first place.)

If you want to rewrite texdoctk to somehow make use of this, perhaps
using the Catalogue data as processed for TL by David's new Elisp (which
I still haven't tried yet, sadly), go for it.  I certainly agree that
texdoctk.dat is not a good solution.

Best,
Karl

