From ms at artcom-gmbh.de  Thu Jul  1 00:28:58 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Thu Jul  1 01:03:26 2004
Subject: [tex-live] Port of TeX Live to x86_64 architecture?
In-Reply-To: <Pine.LNX.4.44.0406301745160.27911-100000@einstein.homenet>
References: <40E2DB93.1030007@computing-services.oxford.ac.uk>
	<Pine.LNX.4.44.0406301745160.27911-100000@einstein.homenet>
Message-ID: <20040630222858.GA15639@lucien.kn-bremen.de>

On 2004-06-30 17:49:50 +0100, Tigran Aivazian wrote:
> On Wed, 30 Jun 2004, Sebastian Rahtz wrote:
> > check out //depot/Build/source.development. Then go there and do "bash Build"
> 
> Then Build complains about not finding texmf tree. Should I sync with the 

That's only a warning, which can be ignored.

Best regards
    Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From staw at gust.org.pl  Thu Jul  1 01:44:19 2004
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Thu Jul  1 01:34:37 2004
Subject: [tex-live] Port of TeX Live to x86_64 architecture?
In-Reply-To: <20040630222858.GA15639@lucien.kn-bremen.de>
Message-ID: <Pine.LNX.4.44.0407010121380.13134-100000@re86.internetdsl.tpnet.pl>

On Thu, 1 Jul 2004, Martin [iso-8859-1] Schr?der wrote:

> On 2004-06-30 17:49:50 +0100, Tigran Aivazian wrote:
> > On Wed, 30 Jun 2004, Sebastian Rahtz wrote:
> > > check out //depot/Build/source.development. Then go there and do "bash Build"
> > 
> > Then Build complains about not finding texmf tree. Should I sync with
> > the
> 
> That's only a warning, which can be ignored.

Contradiction, sorry. For proper Build result you should have installed
texmf tree. I think you can use at least teTeX-beta/tetex-texmf*
from CTAN. Of course, it would be better syncing with //depot/Master

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl


From bilotta78 at hotpop.com  Thu Jul  1 01:56:52 2004
From: bilotta78 at hotpop.com (Giuseppe Bilotta)
Date: Thu Jul  1 01:59:15 2004
Subject: [tex-live] Re: Port of TeX Live to x86_64 architecture?
References: <Pine.LNX.4.44.0406301556351.2731-100000@einstein.homenet>
	<20040630154722.GD8095@artcom8.artcom-gmbh.de>
	<40E2E424.4070402@wxs.nl>
Message-ID: <MPG.1b4d71749ea551099896d3@news.gmane.org>

Hans Hagen wrote:
> it may even be worse because tex leaves much of the 32/64 bits unused

Omega & family can benefit from 64-bit machines.

-- 
Giuseppe "Oblomov" Bilotta

Can't you see
It all makes perfect sense
Expressed in dollar and cents
Pounds shillings and pence
                  (Roger Waters)

From staw at gust.org.pl  Thu Jul  1 02:11:49 2004
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Thu Jul  1 02:02:11 2004
Subject: [tex-live] web2c documentation
Message-ID: <Pine.LNX.4.44.0407010149090.13154-100000@re86.internetdsl.tpnet.pl>

Karl,

sorry for being so annoing, but would you please reconsider the current
state of the web2c documentation (#5337)
we agreed there's no more ini* and vir* instances in web2c based
distributions, so perhaps it is also good time to remove/change such
items in the web2c.texi

wdyt?

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl


From karl at freefriends.org  Thu Jul  1 02:28:07 2004
From: karl at freefriends.org (Karl Berry)
Date: Thu Jul  1 02:29:13 2004
Subject: [tex-live] web2c documentation
In-Reply-To: <Pine.LNX.4.44.0407010149090.13154-100000@re86.internetdsl.tpnet.pl>
Message-ID: <200407010028.i610S7e26135@f7.net>

    we agreed there's no more ini* and vir* instances in web2c based
    distributions, so perhaps it is also good time to remove/change such
    items in the web2c.texi

I think it would be best if Olaf updated the documentation, as he's
obviously far more aware of what needs to be changed than I am.  (All I
did in that change was fix a few Texinfo niglets.)

That said, I guess I could work on removing ini/vir stuff in particular,
if Olaf wants me to.

From sebastian.rahtz at computing-services.oxford.ac.uk  Thu Jul  1 09:40:23 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Thu Jul  1 09:52:42 2004
Subject: [tex-live] Problem with \usepackage{mathbbol} - bug?
In-Reply-To: <1088618313.1527.183.camel@pc118>
References: <1088618313.1527.183.camel@pc118>
Message-ID: <40E3BFE7.2050402@computing-services.oxford.ac.uk>

The package assumes that bbold11 exists,  which it doesn't. Some mix up 
assuming Sauter inerpolation. You need
to discuss that with the author of the mathbbol package.

In general, this sort of problem is only relevant to TeX Live if we have 
got a package
dependency wrong (ie installed A but not the B which is needed by A), but I
dont think this is an example of it. See what Jorg Knappen says.

Sebastian

From sebastian.rahtz at computing-services.oxford.ac.uk  Thu Jul  1 09:56:23 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Thu Jul  1 10:08:41 2004
Subject: [tex-live] Port of TeX Live to x86_64 architecture?
In-Reply-To: <Pine.LNX.4.44.0406301745160.27911-100000@einstein.homenet>
References: <Pine.LNX.4.44.0406301745160.27911-100000@einstein.homenet>
Message-ID: <40E3C3A7.2050206@computing-services.oxford.ac.uk>

Tigran Aivazian wrote:

>Then Build complains about not finding texmf tree. Should I sync with the 
>Master/texmf one? 
>  
>
no, you should not need to. if that script does not not run to 
completion, we want to see the log of
what happened. Don't worry about warning,s the bottom line is whether a 
set of binaries falls
out the end

>Do I need anything else for successful Build? (other than a normal C
>development environment obviously)
>
>  
>
and C++

>(as a test exercise I decided to build it on normal IA-32 Linux 2.4.26 
>machine, to make sure everything compiles OK, before I copy the sources to 
>x86_64 and compile them there).
>  
>
I'd expect to see bin/i386-linux populated by several hundred programs 
after about 20 minutes work
in that situation.

-- 
Sebastian Rahtz      Information Manager
Oxford University Computing Services
13 Banbury Road, Oxford OX2 6NN. Phone +44 1865 283431

From tigran at aivazian.fsnet.co.uk  Thu Jul  1 22:08:30 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Thu Jul  1 22:10:53 2004
Subject: [tex-live] Port of TeX Live to x86_64 architecture?
In-Reply-To: <40E3C3A7.2050206@computing-services.oxford.ac.uk>
Message-ID: <Pine.LNX.4.44.0407012059560.16404-100000@einstein.homenet>

Ok, good news, I have just compiled it and it produced 229 binaries:

/usr/src/Build/source.development# ls bin/x86_64-unknown-linux-gnu/| wc
    229     229    2056
/usr/src/Build/source.development# bin/x86_64-unknown-linux-gnu/tex
This is TeXk, Version 3.141592 (Web2C 7.5.3)
 %&-line parsing enabled.
**
! End of file on the terminal... why?
/usr/src/Build/source.development# file bin/x86_64-unknown-linux-gnu/tex
bin/x86_64-unknown-linux-gnu/tex: ELF 64-bit LSB executable, AMD x86-64, 
version 1 (SYSV), for GNU/Linux 2.4.0, dynamically linked (uses shared 
libs), stripped
/usr/src/Build/source.development# uname -a
Linux tank 2.6.7 #1 SMP Tue Jun 29 19:04:29 BST 2004 x86_64 x86_64 x86_64 GNU/Linux

So, now do I just copy this directory to Master/bin and Master/ will
become a new TeX Live DVD or do I need some massaging of files in some
way? (looking at your makeimage script suggests that there is nothing 
extra to be done, but I thought I should ask just in case).

Also, I haven't checked the install-compr.sh to see how it detects the 
architecture (presumably `uname -m`?) to select which binaries to copy.

Btw, it took about 4 minutes to compile and I uploaded the output from 
Build here, in case someone wants to double-check everything is OK:

  http://www.bibles.org.uk/x86_64

Kind regards
Tigran

 On Thu, 1 Jul 2004, Sebastian Rahtz 
wrote:

> Tigran Aivazian wrote:
> 
> >Then Build complains about not finding texmf tree. Should I sync with the 
> >Master/texmf one? 
> >  
> >
> no, you should not need to. if that script does not not run to 
> completion, we want to see the log of
> what happened. Don't worry about warning,s the bottom line is whether a 
> set of binaries falls
> out the end
> 
> >Do I need anything else for successful Build? (other than a normal C
> >development environment obviously)
> >
> >  
> >
> and C++
> 
> >(as a test exercise I decided to build it on normal IA-32 Linux 2.4.26 
> >machine, to make sure everything compiles OK, before I copy the sources to 
> >x86_64 and compile them there).
> >  
> >
> I'd expect to see bin/i386-linux populated by several hundred programs 
> after about 20 minutes work
> in that situation.
> 
> 

From sebastian.rahtz at computing-services.oxford.ac.uk  Thu Jul  1 22:04:27 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Thu Jul  1 22:16:53 2004
Subject: [tex-live] Port of TeX Live to x86_64 architecture?
In-Reply-To: <Pine.LNX.4.44.0407012059560.16404-100000@einstein.homenet>
References: <Pine.LNX.4.44.0407012059560.16404-100000@einstein.homenet>
Message-ID: <40E46E4B.5060802@computing-services.oxford.ac.uk>

Tigran Aivazian wrote:

>st copy this directory to Master/bin and Master/ will
>become a new TeX Live DVD or do I need some massaging of files in some
>way? (looking at your makeimage script suggests that there is nothing 
>extra to be done, but I thought I should ask just in case).
>
>  
>
there is no extra work you need to do to your binaries. the extra stages are

   a) the install scripts in Master need telling about the new binary set
   b) updating all the metadata files which reference binaries. this 
should happen automatically

if anyone would like to work on a), I'd be very happy not to have to do 
it myself :-}

>Also, I haven't checked the install-compr.sh to see how it detects the 
>architecture (presumably `uname -m`?) to select which binaries to copy.
>
>  
>
it runs config.guess

>Btw, it took about 4 minutes to compile
>
pretty good!

-- 
Sebastian Rahtz      Information Manager
Oxford University Computing Services
13 Banbury Road, Oxford OX2 6NN. Phone +44 1865 283431

From tigran at aivazian.fsnet.co.uk  Thu Jul  1 22:20:18 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Thu Jul  1 22:22:39 2004
Subject: [tex-live] Port of TeX Live to x86_64 architecture?
In-Reply-To: <40E46E4B.5060802@computing-services.oxford.ac.uk>
Message-ID: <Pine.LNX.4.44.0407012117420.16404-100000@einstein.homenet>

On Thu, 1 Jul 2004, Sebastian Rahtz wrote:
>    a) the install scripts in Master need telling about the new binary set
>    b) updating all the metadata files which reference binaries. this 
> should happen automatically
> 
> if anyone would like to work on a), I'd be very happy not to have to do 
> it myself :-}

Ok, I'll have a go at it and when I have it working I will upload the
patches to the scripts and the actual binary set to bibles.org.uk. I am
very impressed with the fact that I didn't have to patch any sources so
far --- they just compiled :)

Kind regards
Tigran

From tigran at aivazian.fsnet.co.uk  Fri Jul  2 00:21:53 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Fri Jul  2 00:24:15 2004
Subject: [tex-live] Port of TeX Live to x86_64 architecture?
In-Reply-To: <Pine.LNX.4.44.0407012117420.16404-100000@einstein.homenet>
Message-ID: <Pine.LNX.4.44.0407012307070.16706-100000@einstein.homenet>

On Thu, 1 Jul 2004, Tigran Aivazian wrote:
> Ok, I'll have a go at it

The main thing that is left to do is Tools/update-lists but I see it is
calling p4 (just like Tools/tlrebuild does) which is a bit inconvenient (I 
don't think I have permission to do all those p4 operations on your 
repository and I really would NOT like to have that permission, lest I 
damage something in your tree accidentally.

Is there a way to generate those lists without referring to your 
repository, i.e. working purely on my snapshot which was fully synced with 
your tree this morning? (Maybe I should just read p4 doc to see what those 
operations do and just comment them out in the script...)

I understood MakeImage.sh (and how it prepares archive zip files) and
install-compr.sh and I updated common.sh and utils.sh to select x86_64
architecture correctly, but if I start the installation then not all files
are actually copied because there were no "list files" in
Master/texmf/lists for this architecture when MakeImages.sh was run.

Kind regards
Tigran

From karl at freefriends.org  Fri Jul  2 02:10:51 2004
From: karl at freefriends.org (Karl Berry)
Date: Fri Jul  2 02:11:54 2004
Subject: [tex-live] Port of TeX Live to x86_64 architecture?
In-Reply-To: <Pine.LNX.4.44.0407012307070.16706-100000@einstein.homenet>
Message-ID: <200407020010.i620Ap328292@f7.net>

Hi Tigran,

    The main thing that is left to do is Tools/update-lists but I see it is

There's not any obvious way you would know this, but the lists files are
actually completely generated from the tpm files.  So what really has to
be updated is the tpm's.

I wrote a little about this whole process in Master/Tools/README.  (It's
pretty minimal right now, suggestions are more than welcome.)

Perhaps it would be good for you to simply check in the binaries as a
first step.  After all, that is necessary anyway, and then we can see
what happens with the nightly rebuild of the tpm/list files :).

But first, a question: about the architecture name.  I guess you used
what config.guess returns (x86_64-unknown-linux-gnu), which makes sense,
but it's so darn long, and most of the other names don't match
config.guess names either.  Can you switch it to i386_64-linux?  (I'm
not crazy about that it, but i38664-linux just seems too weird.)

    Is there a way to generate those lists without referring to your
    repository, i.e. working purely on my snapshot which was fully
    synced with your tree this morning?

The only thing that matters are the p4 submits.  Other p4 commands don't
actually alter anything (for other people).  So if you comment out the
p4 submits, you should be able to tinker to your heart's content.

If you don't have permission to do p4 submits, please tar them up
somewhere and one of us can check them in (and Sebastian can give you
permission, even though you say you don't want it).  In this case,
please also send your diffs to the scripts :).


BTW, try not to spend too much time learning the ins and outs of p4.  We
hope to switch to a public hosting facility and thus another version
system after this year's release.


Finally, I'd just like to say that it's great that you were able to do
all this from a standing start!  We need more volunteers like you :).
Please let us know if there's anything we can do to make things better.


Thanks very much,
karl

From tigran at aivazian.fsnet.co.uk  Fri Jul  2 09:14:32 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Fri Jul  2 09:16:52 2004
Subject: [tex-live] Port of TeX Live to x86_64 architecture?
In-Reply-To: <200407020010.i620Ap328292@f7.net>
Message-ID: <Pine.LNX.4.44.0407020758580.1199-100000@einstein.homenet>

Hi Karl,

Thank you for your answers. Here is a couple of comments:

> Perhaps it would be good for you to simply check in the binaries as a
> first step.  After all, that is necessary anyway, and then we can see
> what happens with the nightly rebuild of the tpm/list files :).

I uploaded the binaries here:

http://www.bibles.org.uk/x86_64/x86_64-linux.tar.gz

so that someone with checkin permission can submit them to the master
tree.

> But first, a question: about the architecture name.  I guess you used
> what config.guess returns (x86_64-unknown-linux-gnu), which makes sense,
> but it's so darn long, and most of the other names don't match
> config.guess names either.  Can you switch it to i386_64-linux?  (I'm
> not crazy about that it, but i38664-linux just seems too weird.)

No, I called it "x86_64_linux" and the binary directory "x86_64-linux" but 
now that I think about it, I believe I should have called the architecture 
"x86_64-linux" so that we don't have to deal with the underscore-to-hyphen 
conversion unnecessarily.

I object to your suggestion of "i386_64-linux" because:

a) x86_64 is NOT i386. It is not even i686. The family number is 15 but to 
call it i1586 would be somewhat ridiculous (though maybe consistent :)

b) in all my time of participating on x86_64 development list and 
monitoring the developments nobody refers to it by this name, but only by 
the name x86_64, so this is kind of "standard" now.

I also added the name "AMD" in the textual description (see the full patch 
below).

> Finally, I'd just like to say that it's great that you were able to do
> all this from a standing start!  We need more volunteers like you :).
> Please let us know if there's anything we can do to make things better.

Thank you for your compliments :) 

Many years ago I was a "child" who was "fanatical" about Linux and I made
some contributions to it. I grew up since then and understood that the
only thing on this planet worthy of being "crazy" about is the Word of
God, the Bible.  But someone needs to "maintain" the Bible just like one
needs to maintain Linux, otherwise it will fall apart. So I volunteered to
be a Bible maintainer (at least for the original languages and reporting
to God directly), and believe me, it turned out to require a _lot_ more
technical skills than even maintaining the _whole_ Linux kernel, not just
a couple of device drivers I wrote for Linux. So, the summary is, for the
sake of my Biblical typesetting projects (see http://www.bibles.org.uk) I
am happy to help with any tools that are required for this project :)

Kind regards
Tigran

--- common.sh.orig	2004-07-01 22:43:43.000000000 +0100
+++ common.sh	2004-07-01 22:49:02.000000000 +0100
@@ -26,6 +26,7 @@
 p_alpha_linux_n='DEC Alpha with GNU/Linux'
 p_alphaev5_osf40d_n='DEC Alphaev5 OSF 4.0d'
 p_i386_linux_n='Intel x86 with GNU/Linux'
+p_x86_64_linux_n='Intel/AMD x86_64 with GNU/Linux'
 p_i386_openbsd33_n='OpenBSD 3.3'
 p_i386_freebsd48_n='FreeBSD 4.8'
 p_i386_solaris28_n="Intel x86 with Sun Solaris 2.8"
@@ -509,7 +510,7 @@
     while true; do
         cls
         textvar_show screen_5; echo
-      case `getopt NABCDEFGHIJRQ 'Select the platform you are currently on'` in
+      case `getopt NABCDEFGHIJKRQ 'Select the platform you are currently on'` in
           N) this_system=''; this_platform_set ;;
           A) this_system=i386_linux; this_platform_set ;;
           B) this_system=win32; this_platform_set ;;
@@ -521,6 +522,7 @@
           H) this_system=i386_openbsd33; this_platform_set ;;
           I) this_system=i386_freebsd48; this_platform_set ;;
           J) this_system=powerpc_aix4330; this_platform_set ;;
+          K) this_system=x86_64_linux; this_platform_set ;;
           R)  total_stat; return;;
           Q) exit_on_confirm;;
         esac
@@ -766,6 +768,7 @@
   <H> $p_i386_openbsd33_n
   <I> $p_i386_freebsd48_n
   <J> $p_powerpc_aix4330_n
+  <K> $p_x86_64_linux_n
 
   <R>   return to main menu
   <Q>   quit
--- utils.sh.orig	2004-07-01 22:52:02.000000000 +0100
+++ utils.sh	2004-07-01 22:52:50.000000000 +0100
@@ -396,6 +396,7 @@
   case $system in
   powerpc-darwin[56]*)   usrprefix=/usr ;varprefix=/var ;Sys=powerpc_darwin66;;
   *86-linux*)		usrprefix=/usr ;varprefix=/var ;Sys=i386_linux;;
+  *86_64*-linux*)	usrprefix=/usr ;varprefix=/var ;Sys=x86_64_linux;;
   *86-openbsd*)		usrprefix=/usr ;varprefix=/var ;Sys=i386_openbsd33;;
   *86-freebsd*)		usrprefix=/usr ;varprefix=/var ;Sys=i386_freebsd48;;
   mips-irix*)     usrprefix=/usr ;varprefix=/var ;Sys=mips_irix65;;

From sebastian.rahtz at computing-services.oxford.ac.uk  Fri Jul  2 10:16:48 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Fri Jul  2 10:29:12 2004
Subject: [tex-live] Port of TeX Live to x86_64 architecture?
In-Reply-To: <Pine.LNX.4.44.0407020758580.1199-100000@einstein.homenet>
References: <Pine.LNX.4.44.0407020758580.1199-100000@einstein.homenet>
Message-ID: <40E519F0.6070306@computing-services.oxford.ac.uk>

I have applied the patches, grabbed the binaries, and am now rebuilding 
all TPMs and lists.

(Karl, for reference, Tpm.pm needs telling about new binary systems too)

sebastian

From tigran at aivazian.fsnet.co.uk  Fri Jul  2 11:54:37 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Fri Jul  2 11:56:58 2004
Subject: [tex-live] Port of TeX Live to x86_64 architecture?
In-Reply-To: <40E46E4B.5060802@computing-services.oxford.ac.uk>
Message-ID: <Pine.LNX.4.44.0407021048330.2190-100000@einstein.homenet>

On Thu, 1 Jul 2004, Sebastian Rahtz wrote:
> >Btw, it took about 4 minutes to compile
> >
> pretty good!

actually, I used the generic IDE support because the chipset-specific
driver for this hardware is still being developed. This means that instead
of about 60-70M/sec disk io I was getting only about 3.6M/sec. Therefore,
with the proper IDE chipset driver (when it is ready) this machine will
become even more fantastic performance-wise.

In fact, its performance is currently tolerable only due to 2.6 kernel's
very clever io strategy. With older kernels working on 3.6M/sec hard disk
is horrible...

Kind regards
Tigran

From olaf at infovore.xs4all.nl  Fri Jul  2 11:59:23 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Fri Jul  2 12:00:25 2004
Subject: [tex-live] Changes 5347, 5348
Message-ID: <87briyybk4.fsf@infovore.xs4all.nl>

I've just checked in changes that affect the TeX binaries, one to get
them to accept -efmt as an alternate spelling of -fmt, and an update
to encTeX from Petr Olsak.

infovore:/home/olaf$ p4 describe -s 5347
Change 5347 by olaf@olaf on 2004/07/02 11:49:26

        Add the -efmt switch as an "alias" for -fmt to the TeX binaries.
        This is for backward compatibility only, to allow some scripts
        some time to transition.

Affected files ...

... //depot/Build/source.development/TeX/texk/web2c/lib/texmfmp.c#35 edit

infovore:/home/olaf$ p4 describe -s 5348
Change 5348 by olaf@olaf on 2004/07/02 11:54:27

        tex.ch: Update to encTeX from Petr Olsak.  These fix three bugs.
        These bugs are seen only in encTeX mode when \mubytein=1 and in
        very rare cases.  Petr's explanation follows:

        1) If the control sequence is converted by \mubyte table but it is
        not shrunk then the non-converted alternative of control sequence
        is really used. It can be possible only if one-byte to one-byte
        conversion is used and declared by \mubyte primitive. More common
        is to use \mubyte for multi-byte to one-byte conversion. In such
        situation, there is no problem because control sequence is
        schrunk. Thanks to Wlodzimierz Bzyl for bugreport.

           \def\aXb{xx}
           \mubyte X Y\endmubyte
           \mubytein=1
           \aYb   % writes "undefined control sequence \aXb" because
                  % error message is converted but real control sequence
                  % is not converted and \aYb is undefined.

        2) If multi-byte to one-byte conversion is done during scanning of
        control sequence name with the result: one-letter control
        sequence, then this control sequence is not connected with
        "native" one-letter control sequence but the new "multi-letter
        control sequence" is allocated with only one letter in real.

           \def\X{xx} % one-letter control sequence is defined
           \mubyte X YZ\endmubyte
           \mubytein=1
           \YZ   % writes "undefined control sequence \X" because \YZ is
                 % converted to \X but allocated as multi-letter control
                 % sequence, but one-letter control sequence is defined

        3) If \catcode`\^^@=11 or 7 and if control sequence is terminated
        by generated control sequence (from \mubyte conversion) then the
        result of reading is unpredictable.

           \def\XXX{xx}
           \mubyte \XXX YZ\endmubyte
           \mubytein=1 \relaxYZ % it is OK: \relax followed by \XXX
           \par\catcode`\^^@=11
           \relaxYZ   % bad reading: \relaxYZ control sequence not defined

Affected files ...

... //depot/Build/source.development/TeX/texk/web2c/tex.ch#31 edit

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From aa056 at chebucto.ns.ca  Fri Jul  2 17:39:04 2004
From: aa056 at chebucto.ns.ca (George N. White III)
Date: Fri Jul  2 17:40:25 2004
Subject: [tex-live] Re: bbmtt10.tfm in test-texlive2004-live-20040627
In-Reply-To: <40E462F0.8000500@computing-services.oxford.ac.uk>
References: <Pine.SGI.4.60.0407011241010.12065@montigo.bio.dfo.ca>
	<40E462F0.8000500@computing-services.oxford.ac.uk>
Message-ID: <Pine.SGI.4.60.0407021136030.16091@montigo.bio.dfo.ca>

On Thu, 1 Jul 2004, Sebastian Rahtz wrote:

> George N. White III wrote:
>
>> Testing "latex symbols" fails.
>> 
> did you mean to report this to the texlive list?

Sorry -- haste makes waste and I don't have time at present to do
proper testing/reporting.

>> texmf-dist/fonts/tfm/public/bbm lacks bbmtt10.tfm, and,
>> on linux (Knoppix 3.4), mf gives an error.  Here is bbmtt10.log:
>> 
> there is not much I can do about this. if the Metafont sources don't 
> compile, report it to the author of the font.

I'm not sure where bbmtt10.tfm got lost.  It is in 
tetex-texmf-beta-2.96.3.20040511.  I don't think the .mf sources for these 
fonts have changed in years.  Google shows that the error is not new, so
I guess it has been ignored in the past.

For tetex-beta-2.96.3.20040511 both "latex symbols" and "pdflatex symbols"
worked.  With test-texlive2004-live-20040627, adding bbmtt10.tfm and the
.pk file allows "latex symbols" and "pdflatex symbols" to run, but
there are more problems with .pk fonts using dvips or pdflatex because
files like ifclk.gen aren't being found (in TL they are in
texmf-dist/source/latex/ifsym/, but teTeX had them with the mf sources).

--
George N. White III  <aa056@chebucto.ns.ca>
   Head of St. Margarets Bay, Nova Scotia, Canada

From sebastian.rahtz at computing-services.oxford.ac.uk  Fri Jul  2 22:21:26 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Fri Jul  2 22:22:29 2004
Subject: [tex-live] Re: bbmtt10.tfm in test-texlive2004-live-20040627
In-Reply-To: <Pine.SGI.4.60.0407021136030.16091@montigo.bio.dfo.ca>
References: <Pine.SGI.4.60.0407011241010.12065@montigo.bio.dfo.ca>
	<40E462F0.8000500@computing-services.oxford.ac.uk>
	<Pine.SGI.4.60.0407021136030.16091@montigo.bio.dfo.ca>
Message-ID: <20040702202125.GA11193@raven.linux.ox.ac.uk>

> For tetex-beta-2.96.3.20040511 both "latex symbols" and "pdflatex symbols"
> worked.  With test-texlive2004-live-20040627, adding bbmtt10.tfm and the
> .pk file allows "latex symbols" and "pdflatex symbols" to run, but
> there are more problems with .pk fonts using dvips or pdflatex because
> files like ifclk.gen aren't being found (in TL they are in
> texmf-dist/source/latex/ifsym/, but teTeX had them with the mf sources).

now thats something I _can_ correct.

The reason it comes about is that I use an automated machine
to build packages based on rules; and the rules don't  know
that .gen files are Metafont sources. Thomas, on the other
hand, actually looks at what he is doing :-}

Sebastian

From J.Fine at open.ac.uk  Fri Jul  2 18:28:29 2004
From: J.Fine at open.ac.uk (Jonathan Fine)
Date: Sat Jul  3 00:01:06 2004
Subject: [tex-live] Please enable ipc in tex
Message-ID: <cc42fe$62m$1@sea.gmane.org>

Please, if not already done, would you build TeX with
  configure --enable-ipc

Here is why:

Ordinarily, TeX buffers its output dvi file.
Tom Rokicki made changes here on the NeXT platform.
This allowed dvi files to be previewed while TeX was still running.

--enable-ipc adds these changes to the system dependent part of TeX.
This adds a command line flag --ipc, whic turns off buffering.

The texd project, and also dvipng and PyX, use this when available.
(All 3 projects are on sourceforge.)

For several years tex on Debian has included this feature.

For info on texd visit http://www.pytex.org/texd/index.html


Jonathan



From dak at gnu.org  Sat Jul  3 00:09:12 2004
From: dak at gnu.org (David Kastrup)
Date: Sat Jul  3 00:10:19 2004
Subject: [tex-live] Please enable ipc in tex
In-Reply-To: <cc42fe$62m$1@sea.gmane.org>
References: <cc42fe$62m$1@sea.gmane.org>
Message-ID: <x51xjuvz7b.fsf@lola.goethe.zz>

"Jonathan Fine" <J.Fine@open.ac.uk> writes:

> Please, if not already done, would you build TeX with
>   configure --enable-ipc
> 
> Here is why:
> 
> Ordinarily, TeX buffers its output dvi file.
> Tom Rokicki made changes here on the NeXT platform.
> This allowed dvi files to be previewed while TeX was still running.
> 
> --enable-ipc adds these changes to the system dependent part of TeX.
> This adds a command line flag --ipc, whic turns off buffering.
> 
> The texd project, and also dvipng and PyX, use this when available.
> (All 3 projects are on sourceforge.)

dvipng uses this, really?  I am not sure about that.  While dvipng
can work on a pipe in real time, it would not take a look at the
socket from the ipc flag unless I am mistaken, and the socket
interaction is necessary, isn't it?

Maybe it would be a good idea to add a separate option to web2c that
merely flushes the DVI buffer at the end of each page without fiddling
around with sockets?  I don't think that many programs exist that
actually need the socket.  The buffer flushing should be sufficient
in most cases, right?

It would also have the advantage of compiling and working without
additional library dependencies on probably pretty much every
platform.  So one would not get into the constant "should it be
enabled or disabled" hassle that the --ipc option is suffering from.

Olaf, what do you think?

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From staw at gust.org.pl  Sat Jul  3 05:05:01 2004
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Sat Jul  3 04:57:37 2004
Subject: [tex-live] schemes for installation
Message-ID: <Pine.LNX.4.44.0407030403180.1971-100000@re86.internetdsl.tpnet.pl>

It seems that xdvi dissapeared somehow from any installable scheme ;-)
I've corrected collection-basic and also made scheme-basic really basic
and working (Sebastian, scheme-minimal is quite the same :).
Of course as compromise we have in scheme-basic some (latex) packages 
which cannnot work (like tpslifonts) because of some missing fonts.
Anyway it contains the same set of binaries and fonts as scheme-minimal,
so removing dvips and xdvi is no worth the time spending on it.

I also moved some omega/[]/misc files from the "misc" package
to "omega" (Fabrice?). 

I've observed that we lost so many <description> fields in TPM. Last year
I filled that for ~200 packages...

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl


From sebastian.rahtz at computing-services.oxford.ac.uk  Sat Jul  3 11:38:46 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Sat Jul  3 11:51:37 2004
Subject: [tex-live] schemes for installation
In-Reply-To: <Pine.LNX.4.44.0407030403180.1971-100000@re86.internetdsl.tpnet.pl>
References: <Pine.LNX.4.44.0407030403180.1971-100000@re86.internetdsl.tpnet.pl>
Message-ID: <40E67EA6.50500@computing-services.oxford.ac.uk>

Staszek Wawrykiewicz wrote:

>It seems that xdvi dissapeared somehow from any installable scheme ;-)
>I've corrected collection-basic and also made scheme-basic really basic
>and working (Sebastian, scheme-minimal is quite the same :).
>  
>
I'll throw away scheme minimal, it was just an idle exercise

>I've observed that we lost so many <description> fields in TPM. Last year
>I filled that for ~200 packages...
>  
>
you can get them back from Perforce; they need to get into the Williams 
catalogue

-- 
Sebastian Rahtz      Information Manager
Oxford University Computing Services
13 Banbury Road, Oxford OX2 6NN. Phone +44 1865 283431

From olaf at infovore.xs4all.nl  Sat Jul  3 19:35:06 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Sat Jul  3 19:36:09 2004
Subject: [tex-live] --with-etex, --without-etex, --with-pdftex,
	--without-pdftex ?
Message-ID: <871xjtuh85.fsf@infovore.xs4all.nl>

Perhaps a very stupid question, but is the following in tetex.ac a
wise choice for TeX-live?

: ${with_etex=no}
export with_etex

: ${with_pdftex=no}
export with_pdftex


I noticed this because the Makefiles are broken in some fashion: with
these settings, it looks like pdftex is nevertheless built during
normal build, while etex is build during 'make install'.  Of course,
with these explicitly disabled, neither should be built at all...

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From olaf at infovore.xs4all.nl  Sat Jul  3 19:58:20 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Sat Jul  3 19:59:27 2004
Subject: [tex-live] --with-etex, --without-etex, --with-pdftex,
	--without-pdftex ?
In-Reply-To: <871xjtuh85.fsf@infovore.xs4all.nl> (Olaf Weber's message of
	"Sat, 03 Jul 2004 19:35:06 +0200")
References: <871xjtuh85.fsf@infovore.xs4all.nl>
Message-ID: <87vfh5t1kz.fsf@infovore.xs4all.nl>

Olaf Weber writes:

> Perhaps a very stupid question, but is the following in tetex.ac a
> wise choice for TeX-live?

> : ${with_etex=no}
> export with_etex

> : ${with_pdftex=no}
> export with_pdftex


> I noticed this because the Makefiles are broken in some fashion: with
> these settings, it looks like pdftex is nevertheless built during
> normal build, while etex is build during 'make install'.  Of course,
> with these explicitly disabled, neither should be built at all...

On reflection, I recall that this was, indeed, a delibrate choice: to
build tex and pdfetex and leave the rest be (pdfxtex?).  Which in turn
means that etex and pdftex should be symbolic links for all platforms,
which at present they are not.  Are we that much behind in building
these?

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From te at dbs.uni-hannover.de  Sat Jul  3 20:04:50 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Sat Jul  3 20:05:53 2004
Subject: [tex-live] --with-etex, --without-etex, --with-pdftex,
	--without-pdftex ?
In-Reply-To: <871xjtuh85.fsf@infovore.xs4all.nl>
References: <871xjtuh85.fsf@infovore.xs4all.nl>
Message-ID: <20040703180449.GB29863@dbs.uni-hannover.de>

> I noticed this because the Makefiles are broken in some fashion: with

Something that you might want to fix? :-)

Thomas

From te at dbs.uni-hannover.de  Sat Jul  3 20:06:59 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Sat Jul  3 20:11:20 2004
Subject: [tex-live] --with-etex, --without-etex, --with-pdftex,
	--without-pdftex ?
In-Reply-To: <87vfh5t1kz.fsf@infovore.xs4all.nl>
References: <871xjtuh85.fsf@infovore.xs4all.nl>
	<87vfh5t1kz.fsf@infovore.xs4all.nl>
Message-ID: <20040703180659.GC29863@dbs.uni-hannover.de>

> build tex and pdfetex and leave the rest be (pdfxtex?).  Which in turn
> means that etex and pdftex should be symbolic links for all platforms,

fmtutil / texlinks are set up to create these symlinks. So, a full build
should create these links.

Thomas

From olaf at infovore.xs4all.nl  Sat Jul  3 20:17:38 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Sat Jul  3 20:18:40 2004
Subject: [tex-live] --with-etex, --without-etex, --with-pdftex,
	--without-pdftex ?
In-Reply-To: <20040703180449.GB29863@dbs.uni-hannover.de> (Thomas Esser's
	message of "Sat, 3 Jul 2004 20:04:50 +0200")
References: <871xjtuh85.fsf@infovore.xs4all.nl>
	<20040703180449.GB29863@dbs.uni-hannover.de>
Message-ID: <87r7rtt0ot.fsf@infovore.xs4all.nl>

Thomas Esser writes:

>> I noticed this because the Makefiles are broken in some fashion: with

> Something that you might want to fix? :-)

Yeah.  :-P

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From olaf at infovore.xs4all.nl  Sat Jul  3 20:24:37 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Sat Jul  3 20:25:43 2004
Subject: [tex-live] web2c documentation
In-Reply-To: <200407010028.i610S7e26135@f7.net> (Karl Berry's message of
	"Wed, 30 Jun 2004 20:28:07 -0400")
References: <200407010028.i610S7e26135@f7.net>
Message-ID: <87k6xlt0d6.fsf@infovore.xs4all.nl>

Karl Berry writes:

>     we agreed there's no more ini* and vir* instances in web2c based
>     distributions, so perhaps it is also good time to remove/change such
>     items in the web2c.texi

> I think it would be best if Olaf updated the documentation, as he's
> obviously far more aware of what needs to be changed than I am.  (All I
> did in that change was fix a few Texinfo niglets.)

> That said, I guess I could work on removing ini/vir stuff in particular,
> if Olaf wants me to.

I wouldn't mind if you did.  (Always happy with volunteers for that
kind of stuff, as you should be only too well aware of.)

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From sebastian.rahtz at computing-services.oxford.ac.uk  Sat Jul  3 20:09:00 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Sat Jul  3 20:25:54 2004
Subject: [tex-live] --with-etex, --without-etex, --with-pdftex,
	--without-pdftex ?
In-Reply-To: <87vfh5t1kz.fsf@infovore.xs4all.nl>
References: <871xjtuh85.fsf@infovore.xs4all.nl>
	<87vfh5t1kz.fsf@infovore.xs4all.nl>
Message-ID: <40E6F63C.6000404@computing-services.oxford.ac.uk>

Olaf Weber wrote:

>On reflection, I recall that this was, indeed, a delibrate choice: to
>build tex and pdfetex and leave the rest be (pdfxtex?).  Which in turn
>means that etex and pdftex should be symbolic links for all platforms,
>which at present they are not.  Are we that much behind in building
>these?
>  
>
yes. we _are_ behind in binary building. I think some people are holding 
off until the
source claims to be stable. I think its with you and Martin :-}

-- 
Sebastian Rahtz      Information Manager
Oxford University Computing Services
13 Banbury Road, Oxford OX2 6NN. Phone +44 1865 283431

From olaf at infovore.xs4all.nl  Sat Jul  3 20:48:25 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Sat Jul  3 20:49:31 2004
Subject: [tex-live] --with-etex, --without-etex, --with-pdftex,
	--without-pdftex ?
In-Reply-To: <40E6F63C.6000404@computing-services.oxford.ac.uk> (Sebastian
	Rahtz's message of "Sat, 03 Jul 2004 19:09:00 +0100")
References: <871xjtuh85.fsf@infovore.xs4all.nl>
	<87vfh5t1kz.fsf@infovore.xs4all.nl>
	<40E6F63C.6000404@computing-services.oxford.ac.uk>
Message-ID: <87fz89sz9i.fsf@infovore.xs4all.nl>

Sebastian Rahtz writes:

> yes. we _are_ behind in binary building. I think some people are
> holding off until the source claims to be stable. I think its with
> you and Martin :-}

Chicken, meet egg.

With the changes to the format files and options and stuff, I need
feedback from users of the new binaries in order to know whether there
are any bad mistakes left.  Happily, some things that would have been
showstoppers were found -- that Thomas is using much the same source
in the teTeX-beta helps here as well.

Also, other change requests tend to dribble in over time, and will
continue, up to the point where I get told that we have to have a code
freeze.  (For example, the discussion about backward compatibility of
options, and whether aleph and omega shouldn't just parse-and-ignore
options like -translate-file and -8bit.)

Coming up is a bit more of that, as well as some changes requested to
get cross-compiling work better for the Cygwin maintainer (I _think_
I've got that part down to something small and simple now.)

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From staw at gust.org.pl  Sat Jul  3 22:46:24 2004
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Sat Jul  3 22:39:37 2004
Subject: [tex-live] --with-etex, --without-etex, --with-pdftex,
	--without-pdftex ?
In-Reply-To: <87vfh5t1kz.fsf@infovore.xs4all.nl>
Message-ID: <Pine.LNX.4.44.0407032242090.3362-100000@re86.internetdsl.tpnet.pl>

On Sat, 3 Jul 2004, Olaf Weber wrote:

> build tex and pdfetex and leave the rest be (pdfxtex?).  Which in turn
> means that etex and pdftex should be symbolic links for all platforms,
> which at present they are not.  Are we that much behind in building
> these?

When making full build on i386-linux I have etex and pdftex both linked to
pdfetex, so interesting that eg. alpha-linux has separate etex

Ps. I've just remade some binaries for linux, covering libxpdf 3.0

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl


From olaf at infovore.xs4all.nl  Sun Jul  4 00:30:12 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Sun Jul  4 00:31:23 2004
Subject: [tex-live] --with-etex, --without-etex, --with-pdftex,
	--without-pdftex ?
In-Reply-To: <87r7rtt0ot.fsf@infovore.xs4all.nl> (Olaf Weber's message of
	"Sat, 03 Jul 2004 20:17:38 +0200")
References: <871xjtuh85.fsf@infovore.xs4all.nl>
	<20040703180449.GB29863@dbs.uni-hannover.de>
	<87r7rtt0ot.fsf@infovore.xs4all.nl>
Message-ID: <87smc8sozv.fsf@infovore.xs4all.nl>

Olaf Weber writes:
> Thomas Esser writes:

>>> I noticed this because the Makefiles are broken in some fashion: with

>> Something that you might want to fix? :-)

> Yeah.  :-P

My preferred way of working here (and for pdftex, omega, ...) is that
we have general rules which depend on specific rules, and
conditionally enable/disable that dependency, as opposed to disabling
the actions within a rule.

For example, I prefer this:

install-data:: @ETEX@ install-etex-data
install-etex-data:: $(texpooldir) etex.pool
	$(INSTALL_DATA) etex.pool $(texpooldir)/etex.pool

over this:

install-data:: install-pdftex-data
install-pdftex-data:: $(texpooldir)
@PTEX@	$(INSTALL_DATA) pdftex.pool $(texpooldir)/pdftex.pool


One reason why I prefer this is that with a disabled automatic build
and installation, you can still use the specific rules to build and
install, without having to re-run configure (which on some platforms
is a slow and sometimes tricky process).

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From staw at gust.org.pl  Sun Jul  4 00:58:17 2004
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Sun Jul  4 00:50:24 2004
Subject: [tex-live] man&info
Message-ID: <Pine.LNX.4.44.0407040042010.3524-100000@re86.internetdsl.tpnet.pl>

some questions concerning man and info pages:
1. I'm trying to update for the depot man pages as they are generated
   but don't know how to rebuild .html versions (and have no time for 
   that:)
2. as for info pages I've got somehow different set (compared to p4), eg. 
texinfo
texinfo-1
texinfo-2
texinfo-3
(without .info extension!), and also texi2html.info[-1-3], 
web2c.info[-1-4]. p4 depot contains some more files (bzip2 etc.)
so I cannot just replace the whole set (including dir) and remade
.tpm files. Any hint?

Thanks,

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl


From karl at freefriends.org  Sun Jul  4 01:18:58 2004
From: karl at freefriends.org (Karl Berry)
Date: Sun Jul  4 01:59:09 2004
Subject: [tex-live] man&info
In-Reply-To: <Pine.LNX.4.44.0407040042010.3524-100000@re86.internetdsl.tpnet.pl>
Message-ID: <200407032318.i63NIwp07023@f7.net>

    1. I'm trying to update for the depot man pages as they are generated
       but don't know how to rebuild .html versions

Well, there is a program man2html (installed on tug.org, for example),
although I don't know for a fact that that is what was used.

   (and have no time for that:)

We should do so automatically, but that's one thing that doesn't have a
script or Makefile yet, as far as I know.  

    2. as for info pages I've got somehow different set (compared to p4), eg. 
    texinfo
    texinfo-1
    texinfo-2
    texinfo-3
    (without .info extension!), 

The lack of the .info extension there is intentional.  It's explained in
texinfo.txi; the weirdness is basically to appease rms, although I could
probably change it at this point.  In any case, I made the name
texinfo.info by hand.

    and also texi2html.info[-1-3], 
    web2c.info[-1-4]. p4 depot contains some more files (bzip2 etc.)
    so I cannot just replace the whole set (including dir) and remade
    .tpm files. 

Let me be sure I understand.
Are you comparing the result of make install to what is in
texmf/doc/info?

If so, the answer is simple.  Forget make install.  I generated the info
files currently in p4 by hand, with makeinfo --no-split.  (At Fabrice's
suggestion, it seemed silly to have multiple files, they just cause trouble.)

I wasn't aware that there was a texi2html.texi, but I see there is now.
Well, one of us can build that.

One possible improvement would be for the build process to pass
--no-split.  Then the result of make install could be used.  This should
be possible via MAKEINFO_FLAGS, etc.

Or, perhaps it would be even better to either have the Makefiles or a
script that builds the Info, HTML (also --no-split), and PDF files for
these manuals.  I did all that by hand, since there aren't very many of
them and they don't often change.  Before doing it again, I would
probably write a script :).

    Any hint?

Does this help explain the situation?

From karl at freefriends.org  Sun Jul  4 01:55:38 2004
From: karl at freefriends.org (Karl Berry)
Date: Sun Jul  4 01:59:50 2004
Subject: [tex-live] --with-etex, --without-etex, --with-pdftex,
	--without-pdftex ?
In-Reply-To: <87fz89sz9i.fsf@infovore.xs4all.nl>
Message-ID: <200407032355.i63Ntc012147@f7.net>

    With the changes to the format files and options and stuff, I need
    feedback from users of the new binaries in order to know whether
    there are any bad mistakes left.

FWIW, today I tried both live and inst installations, with the
recommended and GUT schemes, and was able to create formats and run
simple documents.  There were a few installation-time errors which I'm
working out with Sebastian, but it all seemed basically functional.

Are there particular things you would like be tested?

    Coming up is a bit more of that

Well, we have a number of volunteers who responded to my earlier
requests for people to test.  But I don't think it makes sense to ask
them to start until we have something which we believe is stable, i.e.,
you and Martin, at least, have no more pending changes.  Having them try
when it's still a moving target seems like it will just be frustrating.
(Ditto remaking all the binaries.)

Until then, of course it is good for anyone who is willing to test the
code in its current state, as Staszek, Daniel, and others are doing.

(And if Kim R., or anyone, can find other devoted workers willing to
test, as was discussed at Bachotek, so much the better.)

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 12:17:08 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 12:19:31 2004
Subject: [tex-live] [patch] fix to the Build script.
In-Reply-To: <40E519F0.6070306@computing-services.oxford.ac.uk>
Message-ID: <Pine.LNX.4.44.0407041111460.3557-100000@einstein.homenet>

Hi Sebastian,

The top level Build script executes "make clean" but there is no Makefile 
in the current directory. If, however, the Makefile.in is used as a 
Makefile then it works. Without it the current snapshot fails to Build 
because of the leftovers from previous built.

(Patch is attached, but I assume the correct fix is to generate the 
Makefile from Makefile.in properly)

Kind regards
Tigran

PS. I will test the x86_64 installation today and let you know if any more 
changes are needed.

--- Build.orig	2004-07-04 11:06:23.653785240 +0100
+++ Build	2004-07-04 11:06:35.388001368 +0100
@@ -1,4 +1,4 @@
-make clean 
+make -f Makefile.in clean 
 find . -name config.cache -print -exec rm -f {} \;
 H=`pwd`
 rm -rf Work; mkdir Work; cd Work

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 13:32:02 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 13:34:29 2004
Subject: [tex-live] installation errors with the current snapshot
Message-ID: <Pine.LNX.4.44.0407041228330.3557-100000@einstein.homenet>

Hello,

Attempting to install the current TeX Live distribution I got the following
errors (I will start debugging in this order but if someone recognizes 
these to be generic problems that can be ignored please shout so I skip to 
the next one):

Installation problems:
======================

1.  ./install-tl.sh: line 123: /home/tl/TeX/texmf-var/web2c/updmap.cfg: Permission denied

2. why is there win32 installed in TeX/bin directory? I only selected the
default (x86_64) architecture to be installed.

3. reported required disk size 120M but the real number (du -sh TeX) is 
almost hundred times higher, 1.1G.

4. something to do with updating font maps:
...
mapWarn notFound context.map
...
mapWarn notFound nnt.map
...
updmap: Severe problems during map file lookup, see mapWarn messages. Consult the manualpage for details.

5. at the end of installation the message tells about PATH but forgets
to mention VARTEXMF. Is this no longer needed?

Runtime problems
================

Ignoring the above installation problems I tried to compile a simple hello.tex
anyway and noticed that texconfig init failed to generate most of the *.fmt
files.

$ cat hello.tex 
\documentclass[a4paper,12pt]{article}

\begin{document}
\begin{center}
Hello, world!
\end{center}
\end{document}

$ pdflatex hello.tex
This is pdfeTeXk, Version 3.141592-1.20a-rc4-2.1 (Web2C 7.5.3)
 %&-line parsing enabled.
kpathsea: Running mktexfmt pdflatex.fmt
running `pdfetex -ini   -jobname=pdflatex -progname=pdflatex -8bit *pdflatex.ini' ...
This is pdfeTeXk, Version 3.141592-1.20a-rc4-2.1 (Web2C 7.5.3) (INITEX)
 %&-line parsing enabled.
output format initialized to DVI
entering extended mode
(/home/tl/TeX/texmf-dist/tex/latex/config/pdflatex.ini
(/home/tl/TeX/texmf-var/tex/generic/config/pdftexconfig.tex)
(/home/tl/TeX/texmf-dist/tex/latex/base/latex.ltx
(/home/tl/TeX/texmf-dist/tex/latex/base/texsys.cfg)
./texsys.aux found


\@currdir set to: ./.


Assuming \openin and \input 
have the same search path.
Defining UNIX/DOS style filename parser.

catcodes, registers, compatibility for TeX 2,  parameters,
LaTeX2e <2003/12/01>
hacks, control, par, spacing, files, font encodings, lengths,
====================================

Local config file fonttext.cfg used

====================================
(/home/tl/TeX/texmf-dist/tex/latex/base/fonttext.cfg
(/home/tl/TeX/texmf-dist/tex/latex/base/fonttext.ltx
=== Don't modify this file, use a .cfg file instead ===

(/home/tl/TeX/texmf-dist/tex/latex/base/omlenc.def)
(/home/tl/TeX/texmf-dist/tex/latex/base/t1enc.def)
(/home/tl/TeX/texmf-dist/tex/latex/base/ot1enc.def)
(/home/tl/TeX/texmf-dist/tex/latex/base/omsenc.def)
(/home/tl/TeX/texmf-dist/tex/latex/base/t1cmr.fd)
(/home/tl/TeX/texmf-dist/tex/latex/base/ot1cmr.fd)
(/home/tl/TeX/texmf-dist/tex/latex/base/ot1cmss.fd)
(/home/tl/TeX/texmf-dist/tex/latex/base/ot1cmtt.fd)))
====================================

Local config file fontmath.cfg used

====================================
(/home/tl/TeX/texmf-dist/tex/latex/base/fontmath.cfg
(/home/tl/TeX/texmf-dist/tex/latex/base/fontmath.ltx
=== Don't modify this file, use a .cfg file instead ===

(/home/tl/TeX/texmf-dist/tex/latex/base/omlcmm.fd)
(/home/tl/TeX/texmf-dist/tex/latex/base/omscmsy.fd)
(/home/tl/TeX/texmf-dist/tex/latex/base/omxcmex.fd)
(/home/tl/TeX/texmf-dist/tex/latex/base/ucmr.fd)))
====================================
Local configuration file hyphen.cfg used
===========================================
(/home/tl/TeX/texmf-dist/tex/generic/babel/hyphen.cfg
(/home/tl/TeX/texmf/tex/generic/hyphen/ushyph.tex)
(/home/tl/TeX/texmf/tex/generic/hyphen/dumyhyph.tex)
(/home/tl/TeX/texmf/tex/generic/hyphen/zerohyph.tex)
(/home/tl/TeX/texmf/tex/generic/hyphen/bahyph.tex)
(/home/tl/TeX/texmf/tex/generic/hyphen/czhyph.tex
(/home/tl/TeX/texmf-dist/tex/csplain/base/t1code.tex
Font encoding set to Cork.)
The \^, \`, \', \v, \" and \r expands to characters by Cork.
(/home/tl/TeX/texmf-dist/tex/csplain/base/czhyphen.tex))
(/home/tl/TeX/texmf/tex/generic/hyphen/skhyph.tex
(/home/tl/TeX/texmf-dist/tex/csplain/base/t1code.tex
Font encoding set to Cork.)
The \^, \`, \', \v, \" and \r expands to characters by Cork.
(/home/tl/TeX/texmf-dist/tex/csplain/base/skhyphen.tex))
(/home/tl/TeX/texmf/tex/generic/hyphen/dehypht.tex
German Traditional Hyphenation Patterns `dehypht' Version 3.2a <1999/03/03>
(Formerly known under the name `ghyph31' and `ghyphen'.))
(/home/tl/TeX/texmf/tex/generic/hyphen/dehyphn.tex
New German Hyphenation Patterns `dehyphn' Rev.31 <2001-05-07> (WaS))
(/home/tl/TeX/texmf/tex/generic/hyphen/dkhyph.tex
(/home/tl/TeX/texmf/tex/generic/hyphen/dkcommon.tex)
(/home/tl/TeX/texmf/tex/generic/hyphen/dkspecial.tex)
(/home/tl/TeX/texmf/tex/generic/hyphen/dkspecial.tex))
(/home/tl/TeX/texmf/tex/generic/hyphen/eohyph.tex
! Nonletter.
l.37 .^^^
         ^01084
! Bad \patterns.
l.37 .^^^^
          01084
! Nonletter.
l.37 .^^^^01
            084
! Nonletter.
l.37 .^^^^0108
...... Lots more of these errors.....
(That makes 100 errors; please try again.)
No pages of output.
Transcript written on pdflatex.log.' instead of a filename.
I can't find the format file `pdflatex.fmt'!

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 13:33:31 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 13:35:51 2004
Subject: [tex-live] Re: installation errors with the current snapshot
In-Reply-To: <Pine.LNX.4.44.0407041228330.3557-100000@einstein.homenet>
Message-ID: <Pine.LNX.4.44.0407041232500.3557-100000@einstein.homenet>

On Sun, 4 Jul 2004, Tigran Aivazian wrote:
> 3. reported required disk size 120M but the real number (du -sh TeX) is 
> almost hundred times higher, 1.1G.
         ^^^^^^^

Ok, not hundred but ten, still quite noticeable :)

Kind regards
Tigran

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 13:43:36 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 13:45:56 2004
Subject: [tex-live] installation errors with the current snapshot
In-Reply-To: <Pine.LNX.4.44.0407041228330.3557-100000@einstein.homenet>
Message-ID: <Pine.LNX.4.44.0407041238320.3557-100000@einstein.homenet>

On Sun, 4 Jul 2004, Tigran Aivazian wrote:
> 1.  ./install-tl.sh: line 123: /home/tl/TeX/texmf-var/web2c/updmap.cfg: Permission denied

this is a trivial error, the code is doing:

(cd $CDDIR/texmf-var; tar cf - . ) | ( cd $TEXDIR/texmf-var; tar xf - )
cat > $VARTEXMF/web2c/updmap.cfg <<OAF

but the original copy on the CD, i.e. $CDDIR/texmf-var/web2c/updmap.cfg 
has 0444 permission so obviously the shell cannot open it for writing 
because bash tries to open it like this:

[pid  4147] open("new", O_WRONLY|O_CREAT|O_TRUNC|O_LARGEFILE, 0666) = -1 EACCES (Permission denied)
[pid  4147] open("new", O_WRONLY|O_TRUNC|O_LARGEFILE) = -1 EACCES (Permission denied)

The solution is to do chmod 0644 $VARTEXMF/web2c/updmap.cfg before cat'ing 
to it. Or, even better, store the file with 0644 mode when the CD is being 
generated, this way one saves a bit of time during installation by not 
doing an extra chmod.

Kind regards
Tigran

From olaf at infovore.xs4all.nl  Sun Jul  4 13:56:14 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Sun Jul  4 13:57:18 2004
Subject: [tex-live] Changes 5374 - 5395 -- resolving diffs between web2c and
	TeX-live
Message-ID: <876594rnoh.fsf@infovore.xs4all.nl>

The following changes resolve the bulk of the differences between
TeX-live and web2c.  With it there is the infrastructure for
cross-compiling in the web2c source tree.  Not yet included are some
cygwin-specific fixes that I've been sent.

Note that for other reasons cross-compilation will still fail at
configure time except for a few selected (special-coded!) cases.
That bit will be fixed once web2c moves to current autoconf, which
should be in the next iteration of TeX-live.


Change 5395 on 2004/07/04 by olaf@olaf

        Update non-source file from web2c/kpathsea master.

Change 5394 on 2004/07/04 by olaf@olaf

        Syncing non-source files with web2c master.

Change 5393 on 2004/07/04 by olaf@olaf

        web2c/lib/Makefile.in: Remove alloca.o from the objects.  We shouldn't
        be using it anywhere.
        web2c/lib/texmfmp.c: Allow omega/aleph to parse the -8bit and
        -translate-file options without errors.

Change 5392 on 2004/07/04 by olaf@olaf

        web2c/doc/{install,web2c}.texi (and info): Sync with web2c tree.  More
        updates are necessary though.  In particular, the documentation about
        "funny coredumps" has been removed, as they haven't been used in a long
        time now.

Change 5391 on 2004/07/04 by olaf@olaf

        web2c/omegadir/{com16bit,comsrcspec}.ch: Incorporate the latest spaces-
        in-filenames changes.  Hopefully things are stable now.

Change 5390 on 2004/07/04 by olaf@olaf

        web2c/alephdir/com16bit-rc2.ch: Bring this up-to-date with the latest
        changes for spaces in filenames.  Hopefully this area of code is now
        stable.

Change 5389 on 2004/07/04 by olaf@olaf

        web2c/pdftexdir/pdftexlib.mk: Change the rule for $(LIBMD5DIR) from a
        double-colon rule into a single-colon rule.  The double-colon rule
        resulted in the directory being recreated too often, which resulted
        in pdf*tex being relinked too often.

Change 5388 on 2004/07/04 by olaf@olaf

        web2c/ChangeLog, web2c/etrip/etrip.diffs: Update.

Change 5387 on 2004/07/04 by olaf@olaf

        web2c/Makefile.in, web2c/*dir/*.mk:  Changes to the Makefile and makefile
        fragments so that when cross-compiling, a pre-installed tangle (etc) is
        used.  Also changes to the rules in the makefile fragments to ensure
        that the --without-* options work properly.
        Todo: not building formats when cross-compiling.

Change 5386 on 2004/07/04 by olaf@olaf

        tex.ch: Make |mubyte_incs| a boolean variable.

Change 5385 on 2004/07/04 by olaf@olaf

        weave.ch: Change |max_names| to 10220 which is just about the most
        it can be without extensive rework.  This allows weave to (barely)
        process pdfetex.web.

Change 5384 on 2004/07/04 by olaf@olaf

        web2c/window/depend.mk update

Change 5383 on 2004/07/04 by olaf@olaf

        web2c/web2c: To make cross-compiling feasible, the web2c conversion
        programs are changed to stand alone instead of using libkpathsea or
        even lib.a.
        kps.c: New file, implements functions used in common.
        Makefile.in: Add ../make/cross.mk to the ac_includes.  Changes to
        build rules.
        depend.mk: Updated.
        fixwrites.c: Remove dependencies on lib.a and libkpathsea.
        main.c: Remove dependencies on lib.a and libkpathsea.  Also remove
        references to yytext, so we no longer need to care about its type.
        splitup.c: Remove dependencies on lib.a and libkpathsea.
        web2c.h: Remove the YYTEXT_POINTER, YYTEXT_UCHAR stuff.  Declare
        the functions in kps.c.
        web2c.l: Add functions to access yytext.
        web2c.y: Replace direct accesses to yytext with functions.

Change 5382 on 2004/07/04 by olaf@olaf

        configure: Generated file, new configure.in was submitted.

Change 5381 on 2004/07/04 by olaf@olaf

        Include KPSE_CROSS* invocations to set up things for cross-compiling.

Change 5380 on 2004/07/04 by olaf@olaf

        configure, kpathsea.info: generated files, separate submission
        from their sources which hopefully avoids timestamp issues.

Change 5379 on 2004/07/04 by olaf@olaf

        Bundle of changes to sync with web2c/kpathsea master tree.
        common.ac: Add "standard" invocations of KPSE_CROSS_BUILD_VAR.
        kpathsea.texi: Update copyright dare, clarify use of kpathsea/kpathsea.h.
        kpsewhich.c: Update copyright date.
        mktextfm: Accept same metafont errors as mktexpk.

Change 5378 on 2004/07/04 by olaf@olaf

        acsite.m4: Add KPSE_CROSS_BUILD_VAR and KPSE_CROSS_PATH_PROG
        macros.
        cross.mk: Makefile fragment that uses some "standard" values
        to be set up with KPSE_CROSS_BUILD_VAR.

Change 5377 on 2004/07/04 by olaf@olaf

        acspecific.m4: Sync with web2c tree -- comment change.

Change 5376 on 2004/07/04 by rahtz@tex

        hopefully avoid spurious collections in install

Change 5375 on 2004/07/04 by olaf@olaf

        Correct date of encTeX version in banner.

Change 5374 on 2004/07/04 by olaf@olaf

        Updated web2c manual pages to the versions in the web2c sources.


-- 
Olaf Weber

               (This space left blank for technical reasons.)

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 14:26:33 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 14:29:00 2004
Subject: [tex-live] installation errors with the current snapshot
In-Reply-To: <Pine.LNX.4.44.0407041238320.3557-100000@einstein.homenet>
Message-ID: <Pine.LNX.4.44.0407041325400.3557-100000@einstein.homenet>

On Sun, 4 Jul 2004, Tigran Aivazian wrote:

> On Sun, 4 Jul 2004, Tigran Aivazian wrote:
> > 1.  ./install-tl.sh: line 123: /home/tl/TeX/texmf-var/web2c/updmap.cfg: Permission denied
> 
> this is a trivial error, the code is doing:
> 
> (cd $CDDIR/texmf-var; tar cf - . ) | ( cd $TEXDIR/texmf-var; tar xf - )
> cat > $VARTEXMF/web2c/updmap.cfg <<OAF
> 
> but the original copy on the CD, i.e. $CDDIR/texmf-var/web2c/updmap.cfg 
> has 0444 permission so obviously the shell cannot open it for writing 
> because bash tries to open it like this:
> 
> [pid  4147] open("new", O_WRONLY|O_CREAT|O_TRUNC|O_LARGEFILE, 0666) = -1 EACCES (Permission denied)
> [pid  4147] open("new", O_WRONLY|O_TRUNC|O_LARGEFILE) = -1 EACCES (Permission denied)
> 
> The solution is to do chmod 0644 $VARTEXMF/web2c/updmap.cfg before cat'ing 
> to it. Or, even better, store the file with 0644 mode when the CD is being 
> generated, this way one saves a bit of time during installation by not 
> doing an extra chmod.

I assumed that this file is needed on CD for other reasons (like not being 
generated for non-Unix platforms?) which is why I didn't suggest not 
having it at all (or deleting it before generating -inst iso image).

Kind regards
Tigran

From olaf at infovore.xs4all.nl  Sun Jul  4 14:32:33 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Sun Jul  4 14:33:37 2004
Subject: [tex-live] dvipsk/squeeze and cross-compilation
Message-ID: <87vfh4osv2.fsf@infovore.xs4all.nl>

squeeze is a little program that is compresses PS headers and is not
installed.  When cross-compiling, it needs to be treated differently.
I believe the following changes for dvipsk do the trick, even if they
are less than squeaky clean.  Change 5396 does the actual work, change
5397 checks in the updated configure script.

This as an example of how the cross-compilation support I added works
in practice.


infovore:.../texlive/development/TeX/texk/dvipsk$ p4 describe -du 5396
Change 5396 by olaf@olaf on 2004/07/04 14:27:07

        dvipsk/Makefile.in, dvipsk/configure.in: squeeze must be compiled
        for the build machine when cross-compiling.  These changes should
        do the trick, in combination with regenerating configure.

Affected files ...

... //depot/Build/source.development/TeX/texk/dvipsk/Makefile.in#14 edit
... //depot/Build/source.development/TeX/texk/dvipsk/configure.in#4 edit

Differences ...

==== //depot/Build/source.development/TeX/texk/dvipsk/Makefile.in#14 (text) ====

@@ -16,6 +16,7 @@
 ac_include ../make/paths.mk
 ac_include ../make/common.mk
 ac_include ../make/programs.mk
+ac_include ../make/cross.mk
 ac_include ../make/texi.mk
 prog_cflags = -DUNIX -DKPATHSEA -DNeedFunctionPrototypes -DSHIFTLOWCHARS

@@ -46,8 +47,10 @@
 afm2tfm: $(kpathsea) afm2tfm.o
        $(kpathsea_link) afm2tfm.o $(LOADLIBES)
 # Omit LOADLIBES since no need to dynamically link with kpathsea.
+queeze.o: squeeze.c
+       $(build_compile) -c $<
 squeeze: squeeze.o
-       $(link_command) squeeze.o $(LIBS) $(XLOADLIBES)
+       $(build_link_command) -o $@ squeeze.o

 @MAINT@$(srcdir)/writet1.c: $(srcdir)/../web2c/pdftexdir/writet1.c
 @MAINT@        cp -f $(srcdir)/../web2c/pdftexdir/writet1.c $@

==== //depot/Build/source.development/TeX/texk/dvipsk/configure.in#4 (text) ====

@@ -21,6 +21,15 @@
 AC_UNSET_CC
 AC_CHECK_SIZEOF(int)
 AC_RESET_CC
+
+# If you're cross-compiling, these macros set up the variables in
+# ../make/cross.mk: BUILDCC, BUILDCFLAGS, BUILDCCLD etc.
+KPSE_CROSS_BUILD_VAR(CC, cc)
+KPSE_CROSS_BUILD_VAR(CFLAGS, $(BUILDXCFLAGS))
+KPSE_CROSS_BUILD_VAR(CPPFLAGS, $(BUILDXCPPFLAGS))
+KPSE_CROSS_BUILD_VAR(LDFLAGS, $(BUILDXLDFLAGS))
+KPSE_CROSS_BUILD_VAR(CCLD, $(BUILDCC))
+
 AC_OUTPUT(Makefile)
 dnl Update stamp-auto, since we just remade `c-auto.h'.
 date >stamp-auto


-- 
Olaf Weber

               (This space left blank for technical reasons.)

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 15:14:12 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 15:16:35 2004
Subject: [tex-live] installation errors with the current snapshot
In-Reply-To: <Pine.LNX.4.44.0407041325400.3557-100000@einstein.homenet>
Message-ID: <Pine.LNX.4.44.0407041406390.3557-100000@einstein.homenet>

Hi,

Fixing updmap.cfg generation error made all the installation
errors/warnings go away.

So, the only problem that still remains is --- the end result doesn't work
due to not being able to generate any fmt files.

If I try to run "texconfig init" by hand then it loops forever because of 
xmltex.fmt.

Now, I cc'd Yannis Haralambous because the file 
texmf/tex/generic/hyphen/eohyph.tex says:

% --> for Unicode issues contact Yannis.Haralambous@univ-lille1.fr

and the error I get is at line 37, 55, 96 and every line that 
contains "^^^^" i.e. Unicode stuff:

...
(/home/tl/TeX/texmf/tex/generic/hyphen/eohyph.tex
! Nonletter.
l.37 .^^^
         ^01084
! Bad \patterns.
l.37 .^^^^
          01084
! Nonletter.
l.37 .^^^^01
            084
! Nonletter.
l.37 .^^^^0108
              4
! Nonletter.
l.55 .^^^
         ^01102
! Bad \patterns.
l.55 .^^^^

Kind regards
Tigran

PS. The file hello.tex which I try to run pdflatex on is simply:

\documentclass[pdftex,a4paper,12pt]{article}
\begin{document}
\begin{center}
Hello, world!
\end{center}
\end{document}


From karl at freefriends.org  Sun Jul  4 15:20:08 2004
From: karl at freefriends.org (Karl Berry)
Date: Sun Jul  4 15:21:12 2004
Subject: [tex-live] installation errors with the current snapshot
In-Reply-To: <Pine.LNX.4.44.0407041238320.3557-100000@einstein.homenet>
Message-ID: <200407041320.i64DK8B05446@f7.net>

    store the file with 0644 mode when the CD is being 
    generated, 

Yes, as it happens, I made that change yesterday.  However, I think your
other proposal, to simply not include it at all, might be the right one :).

    2. why is there win32 installed in TeX/bin directory? I only selected the
    default (x86_64) architecture to be installed.

Looking ...

    3. reported required disk size 120M but the real number (du -sh TeX) is 
    almost hundred times higher, 1.1G.

Er.  Sebastian?

    4. something to do with updating font maps:

This is why we probably should not use the updmap.cfg from the master.

    5. at the end of installation the message tells about PATH but forgets
    to mention VARTEXMF. Is this no longer needed?

It is needed.  I'll be moving the runsetup function to common.sh, so
that both inst and live will do the same things.

    (/home/tl/TeX/texmf/tex/generic/hyphen/eohyph.tex
    ! Nonletter.
    l.37 .^^^
             ^01084

As you saw, eohyph.tex says:
  % Characters out of ASCII range are in Unicode ^^^^xxxx notation

The implication is that eohyph.tex can only be processed by omega or aleph.
I don't know if the infrastructure has a way to represent that.
Just remove esperanto as a dependency, maybe?  Sebastian?

I had no problem creating fmt files yesterday, by the way, with the
default and GUT setups.  I didn't have time to try the full scheme,
which is probably where eo comes in.

Thanks,
k

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 15:30:30 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 15:32:53 2004
Subject: [tex-live] installation errors with the current snapshot
In-Reply-To: <200407041320.i64DK8B05446@f7.net>
Message-ID: <Pine.LNX.4.44.0407041427340.3557-100000@einstein.homenet>

On Sun, 4 Jul 2004, Karl Berry wrote:
>     2. why is there win32 installed in TeX/bin directory? I only selected the
>     default (x86_64) architecture to be installed.
> 
> Looking ...

some more data, to save your time. Not the whole set of win32 binaries is 
installed, but just some fmp files:

$ l -R win32/
win32/:
total 4
drwxr-xr-x  2 tl tl 4096 Jul  4 14:02 pstoedit/

win32/pstoedit:
total 516
-rw-r--r--  1 tl tl 211231 Jul  1 09:27 latex2e.fmp
-rw-r--r--  1 tl tl 296447 Jul  1 09:27 mpost.fmp
-rw-r--r--  1 tl tl   1096 Jul  1 09:27 svg.fmp
-rw-r--r--  1 tl tl    615 Jul  1 09:27 wemf.fmp


> I had no problem creating fmt files yesterday, by the way, with the
> default and GUT setups.  I didn't have time to try the full scheme,
> which is probably where eo comes in.

Yes, you are right, I selected full scheme (in fear that pdflatex and
russian and greek are not considered essential enough :)  I will try now
with default scheme.

Kind regards
Tigran

From te at dbs.uni-hannover.de  Sun Jul  4 16:40:18 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Sun Jul  4 16:41:30 2004
Subject: [tex-live] Problem with \usepackage{mathbbol} - bug?
In-Reply-To: <1088618313.1527.183.camel@pc118>
References: <1088618313.1527.183.camel@pc118>
Message-ID: <20040704144017.GJ7458@dbs.uni-hannover.de>

On Wed, Jun 30, 2004 at 06:58:33PM +0100, John Murdie wrote:
> > mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode; input bbold11
> > This is METAFONT, Version 2.71828 (Web2C 7.5.2)
> > (/usr/local/pkg/texlive-200309/texmf/web2c/cp8bit.tcx)
> >  
> > (/usr/local/var/texlive-200309/texfonts/source/jknappen/sauter/bbold11.mf
> > (/usr/local/pkg/texlive-200309/texmf/fonts/source/public/bbold/bbold.mf
> > (/usr/local/pkg/texlive-200309/texmf/fonts/source/public/bbold/bbparams.mf
> > >> asc_height#-x_height#-0.30714bigcap#
> > ! Unknown relation will be considered false.
> ... (oodles of error messages elided)

No problem here (current souces of the upcoming teTeX-3.0 and TL 2004):

$ mf-nowin -progname=mf '\mode:=ljfour; mag:=1; nonstopmode; input bbold11'
This is METAFONT, Version 2.71828 (Web2C 7.5.3)


(/software/oss/Text/teTeX-3.0/share/texmf-dist/fonts/source/jknappen/sauter/bbo
ld11.mf
(/software/oss/Text/teTeX-3.0/share/texmf-dist/fonts/source/jknappen/sauter/b-b
bold.mf
(/software/oss/Text/teTeX-3.0/share/texmf-dist/fonts/source/public/bbold/bbbase
.mf)
(/software/oss/Text/teTeX-3.0/share/texmf-dist/fonts/source/jknappen/sauter/c-c
mr.mf)
(/software/oss/Text/teTeX-3.0/share/texmf-dist/fonts/source/public/bbold/bbold.
mf
(/software/oss/Text/teTeX-3.0/share/texmf-dist/fonts/source/public/bbold/bbpara
ms.mf)
(/software/oss/Text/teTeX-3.0/share/texmf-dist/fonts/source/public/bbold/bbgree
ku.mf [0] [1] [2] [3] [4] [5] [6] [7] [8] [9] [10])
(/software/oss/Text/teTeX-3.0/share/texmf-dist/fonts/source/public/bbold/bbgree
kl.mf [11] [12] [13] [14] [15] [16] [17] [18] [19] [20] [21] [22] [23] [24]
[25] [26] [27] [28] [29] [30] [31] [32] [127])
(/software/oss/Text/teTeX-3.0/share/texmf-dist/fonts/source/public/bbold/bbnum.
mf [48] [49] [50] [51] [52] [53] [54] [55] [56] [57])
(/software/oss/Text/teTeX-3.0/share/texmf-dist/fonts/source/public/bbold/bbuppe
r.mf [65] [66] [67] [68] [69] [70] [71] [72] [73] [74] [75] [76] [77] [78]
[79] [80] [81] [82] [83] [84] [85] [86] [87] [88] [89] [90])
(/software/oss/Text/teTeX-3.0/share/texmf-dist/fonts/source/public/bbold/bblowe
r.mf [97] [98] [99] [100] [101] [102] [103] [104] [105] [106] [107] [108]
[109] [110] [111] [112] [113] [114] [115] [116] [117] [118] [119] [120]
[121] [122])
(/software/oss/Text/teTeX-3.0/share/texmf-dist/fonts/source/public/bbold/bbpunc
.mf [33] [35] [36] [37] [38] [39] [40] [41] [42] [43] [44] [45] [46] [47]
[58] [59] [60] [61] [62] [63] [64] [91] [92] [93] [94] [95] [96] [124])
(/software/oss/Text/teTeX-3.0/share/texmf-dist/fonts/source/public/bbold/bbligs
.mf [123] [125] [126] [34])) ) )
Font metrics written on bbold11.tfm.
Output written on bbold11.600gf (128 characters, 35700 bytes).
Transcript written on bbold11.log.

Thomas

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 17:27:54 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 17:30:17 2004
Subject: [tex-live] installation errors with the current snapshot
In-Reply-To: <Pine.LNX.4.44.0407041427340.3557-100000@einstein.homenet>
Message-ID: <Pine.LNX.4.44.0407041621000.3557-100000@einstein.homenet>

On Sun, 4 Jul 2004, Tigran Aivazian wrote:
> Yes, you are right, I selected full scheme (in fear that pdflatex and
> russian and greek are not considered essential enough :)  I will try now
> with default scheme.

Yes, as I suspected, such critical (ok, maybe not for everyone :) things
like Hebrew, Arabic, Greek, Russian, Latin, footmisc.sty and possibly
other bits and pieces are not included by default, so I'll just have to
install them manually.

The default installation succeeded and compiled hello.tex into hello.pdf 
successfully. The only change I made to install-tl.sh is to rm -f 
updmap.cfg before cat-ing to it.

On the positive side, I noticed that Kerkis fonts were upgraded to the 
recent version in TeX Live --- that saved me time upgrading them manually.

Also, I normally patch texmf/web2c/texmf.cnf like this for my needs:

--- texmf.cnf.0 2004-04-19 20:11:30.000000000 +0100
+++ texmf.cnf   2004-04-19 20:12:57.000000000 +0100
@@ -447,7 +447,7 @@
 % increase extra_mem_bot.
 % 
 % 
-main_memory =                  1500000 % words of inimemory available; also applies to inimf&mp
+main_memory =                  4500000 % words of inimemory available; also applies to inimf&mp
 extra_mem_bot    =             0 % extra high memory for chars, tokens,etc.
 extra_mem_bot.context    =             4000000 % extra high memory for chars, tokens, etc.
 extra_mem_top    =             2000000 % extra low memory for boxes, glue, breakpoints, etc.

Because the default value of 1500000 is too small for the huge paragraphs 
I have in HebrewNT.pdf.

Kind regards
Tigran

From olaf at infovore.xs4all.nl  Sun Jul  4 19:15:30 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Sun Jul  4 19:16:33 2004
Subject: [tex-live] Permissions of texk/xdvik/xdvizilla are wrong.
Message-ID: <87vfh3ofrh.fsf@infovore.xs4all.nl>

The permissions of texk/xdvik/xdvizilla are 444 (read-only) and should
be 555 (read-and-execute).  The xdvi/Makefile.in contains this rule:

install-exec: @final_exec_name@
	$(SHELL) $(top_srcdir)/../mkinstalldirs $(bindir)
	$(INSTALL_LIBTOOL_PROG) @final_exec_name@ $(bindir)
	$(INSTALL_SCRIPT) xdvi-sh $(scriptdir)/@wrapper_script@
### fix wrong CVS permissions for shell script
	chmod +x $(srcdir)/xdvizilla
	$(INSTALL_SCRIPT) $(srcdir)/xdvizilla $(scriptdir)/xdvizilla

The "chmod +x $(srcdir)/xdvizilla" is a problem as it means a build
from read-only source fails; this should be changed.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From te at dbs.uni-hannover.de  Sun Jul  4 19:32:08 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Sun Jul  4 19:33:22 2004
Subject: [tex-live] Permissions of texk/xdvik/xdvizilla are wrong.
In-Reply-To: <87vfh3ofrh.fsf@infovore.xs4all.nl>
References: <87vfh3ofrh.fsf@infovore.xs4all.nl>
Message-ID: <20040704173208.GB7856@dbs.uni-hannover.de>

On Sun, Jul 04, 2004 at 07:15:30PM +0200, Olaf Weber wrote:
> The permissions of texk/xdvik/xdvizilla are 444 (read-only) and should
> be 555 (read-and-execute).  The xdvi/Makefile.in contains this rule:

Fixed (#5408 and #5409). This was already ok in Stefan's tree. My updating
of xdvik has not changed the permissions after the initial version,
so Stefan's fix has never made it into our tree.

> ### fix wrong CVS permissions for shell script
> 	chmod +x $(srcdir)/xdvizilla

Removed from Makefile.in (#5410).

Thomas

From stefan-ulrich.nntp at zen.co.uk  Sun Jul  4 19:42:20 2004
From: stefan-ulrich.nntp at zen.co.uk (Stefan Ulrich)
Date: Sun Jul  4 19:38:20 2004
Subject: [tex-live] Permissions of texk/xdvik/xdvizilla are wrong.
In-Reply-To: <87vfh3ofrh.fsf@infovore.xs4all.nl>
References: <87vfh3ofrh.fsf@infovore.xs4all.nl>
Message-ID: <16616.16764.259160.726139@82.69.16.43>

Olaf Weber <olaf@infovore.xs4all.nl> writes:

> The permissions of texk/xdvik/xdvizilla are 444 (read-only) and should
> be 555 (read-and-execute).  The xdvi/Makefile.in contains this rule:

> install-exec: @final_exec_name@
> 	$(SHELL) $(top_srcdir)/../mkinstalldirs $(bindir)
> 	$(INSTALL_LIBTOOL_PROG) @final_exec_name@ $(bindir)
> 	$(INSTALL_SCRIPT) xdvi-sh $(scriptdir)/@wrapper_script@
> ### fix wrong CVS permissions for shell script
> 	chmod +x $(srcdir)/xdvizilla
> 	$(INSTALL_SCRIPT) $(srcdir)/xdvizilla $(scriptdir)/xdvizilla

> The "chmod +x $(srcdir)/xdvizilla" is a problem as it means a build
> from read-only source fails; this should be changed.

Maybe we could swap it:

 	$(INSTALL_SCRIPT) $(srcdir)/xdvizilla $(scriptdir)/xdvizilla
 	chmod +x $(scriptdir)/xdvizilla

-- 
Stefan Ulrich

From te at dbs.uni-hannover.de  Sun Jul  4 19:44:37 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Sun Jul  4 19:45:39 2004
Subject: [tex-live] Permissions of texk/xdvik/xdvizilla are wrong.
In-Reply-To: <16616.16764.259160.726139@82.69.16.43>
References: <87vfh3ofrh.fsf@infovore.xs4all.nl>
	<16616.16764.259160.726139@82.69.16.43>
Message-ID: <20040704174437.GA27016@dbs.uni-hannover.de>

>  	chmod +x $(scriptdir)/xdvizilla

The permissions are ok now. Do you fear to loose the correct permissions
somehow?

Thomas

From te at dbs.uni-hannover.de  Sun Jul  4 19:59:53 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Sun Jul  4 20:00:56 2004
Subject: [tex-live] Permissions of texk/xdvik/xdvizilla are wrong.
In-Reply-To: <20040704174437.GA27016@dbs.uni-hannover.de>
References: <87vfh3ofrh.fsf@infovore.xs4all.nl>
	<16616.16764.259160.726139@82.69.16.43>
	<20040704174437.GA27016@dbs.uni-hannover.de>
Message-ID: <20040704175953.GB27016@dbs.uni-hannover.de>

> >  	chmod +x $(scriptdir)/xdvizilla
> 
> The permissions are ok now. Do you fear to loose the correct permissions
> somehow?

Hm... I guess that the permissions in my tree are only correct, because
the Makefile.in has fixed them. They are still wrong in your tarball.
Maybe, we should keep the above unless you can make sure to fix the
permissions on your side permanently.

Thomas

From sebastian.rahtz at computing-services.oxford.ac.uk  Sun Jul  4 19:02:47 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Sun Jul  4 20:03:02 2004
Subject: [tex-live] Re: [patch] fix to the Build script.
In-Reply-To: <Pine.LNX.4.44.0407041111460.3557-100000@einstein.homenet>
References: <Pine.LNX.4.44.0407041111460.3557-100000@einstein.homenet>
Message-ID: <40E83837.5050300@computing-services.oxford.ac.uk>

Tigran Aivazian wrote:

>Hi Sebastian,
>
>The top level Build script executes "make clean" but there is no Makefile 
>in the current directory. If, however, the Makefile.in is used as a 
>Makefile then it works. Without it the current snapshot fails to Build 
>because of the leftovers from previous built.
>  
>

hmm. I added
 test -f Makefile && make clean
which is better, isn't it?

-- 
Sebastian Rahtz      Information Manager
Oxford University Computing Services
13 Banbury Road, Oxford OX2 6NN. Phone +44 1865 283431

From karl at freefriends.org  Sun Jul  4 20:05:25 2004
From: karl at freefriends.org (Karl Berry)
Date: Sun Jul  4 20:06:28 2004
Subject: [tex-live] Re: [patch] fix to the Build script.
In-Reply-To: <40E83837.5050300@computing-services.oxford.ac.uk>
Message-ID: <200407041805.i64I5Ph29401@f7.net>

     test -f Makefile && make clean
    which is better, isn't it?

It will fail (and stop the build) when Makefile does not exist.  Maybe
you want test ! -f Makefile || make clean?

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 20:04:33 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 20:06:56 2004
Subject: [tex-live] Re: [patch] fix to the Build script.
In-Reply-To: <40E83837.5050300@computing-services.oxford.ac.uk>
Message-ID: <Pine.LNX.4.44.0407041902450.4709-100000@einstein.homenet>

On Sun, 4 Jul 2004, Sebastian Rahtz wrote:

> Tigran Aivazian wrote:
> 
> >Hi Sebastian,
> >
> >The top level Build script executes "make clean" but there is no Makefile 
> >in the current directory. If, however, the Makefile.in is used as a 
> >Makefile then it works. Without it the current snapshot fails to Build 
> >because of the leftovers from previous built.
> >  
> >
> 
> hmm. I added
>  test -f Makefile && make clean
> which is better, isn't it?

No, because with your version it won't build today. But if you make sure
there is a Makefile (whether it is the same as Makefile.in currently
present or something else, I have no idea) then still there will be no
need for "test -f Makefile" either, because the Makefile will just be
there.

Kind regards
Tigran

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 20:07:47 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 20:10:12 2004
Subject: [tex-live] type1 font handling for pdflatex changed?
Message-ID: <Pine.LNX.4.44.0407041900500.4709-100000@einstein.homenet>

Hello,

In TeX Live 2003 I simply added the line to the file 
texmf-var/pdftex/config/pdftex.cfg:

map +tiqwah.map

and added tiqwah.map to some subdirectory inside TeX/texmf-local
and then run texconfig rehash.

But now something is different. Namely there is no pdftex.cfg anywhere. 
Ok, I thought, let's see how kerkis.map is registered. So I found it 
registered in texmf-local/web2c/updmap.cfg and I added a similar line:

Map tiqwah.map

and run texconfig rehash. But it still doesn't work, i.e. pdflatex tries 
to generate pk bitmap versions from sources. (I have the sources of Tiqwah 
fonts but I have produced Type1 version of them, so I insist on using them 
as they are much much better than the original pk version)

Any ideas which step I am missing in registration of Type1 fonts?

Kind regards
Tigran


From sebastian.rahtz at computing-services.oxford.ac.uk  Sun Jul  4 19:57:38 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Sun Jul  4 20:11:18 2004
Subject: [tex-live] installation errors with the current snapshot
In-Reply-To: <Pine.LNX.4.44.0407041228330.3557-100000@einstein.homenet>
References: <Pine.LNX.4.44.0407041228330.3557-100000@einstein.homenet>
Message-ID: <40E84512.5050206@computing-services.oxford.ac.uk>

Tigran Aivazian wrote:

>1.  ./install-tl.sh: line 123: /home/tl/TeX/texmf-var/web2c/updmap.cfg: Permission denied
>
>  
>
fixed

>2. why is there win32 installed in TeX/bin directory? I only selected the
>default (x86_64) architecture to be installed.
>
>  
>
fixed

>3. reported required disk size 120M but the real number (du -sh TeX) is 
>almost hundred times higher, 1.1G.
>  
>
thats odd. I haven't looked at that code for ages

Thanks for these reports. very useful!

-- 
Sebastian Rahtz      Information Manager
Oxford University Computing Services
13 Banbury Road, Oxford OX2 6NN. Phone +44 1865 283431

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 20:09:09 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 20:11:33 2004
Subject: [tex-live] Re: type1 font handling for pdflatex changed?
In-Reply-To: <Pine.LNX.4.44.0407041900500.4709-100000@einstein.homenet>
Message-ID: <Pine.LNX.4.44.0407041908550.4709-100000@einstein.homenet>

I forgot to mention that I did run updmap of course. But it didn't help.

On Sun, 4 Jul 2004, Tigran Aivazian wrote:

> Hello,
> 
> In TeX Live 2003 I simply added the line to the file 
> texmf-var/pdftex/config/pdftex.cfg:
> 
> map +tiqwah.map
> 
> and added tiqwah.map to some subdirectory inside TeX/texmf-local
> and then run texconfig rehash.
> 
> But now something is different. Namely there is no pdftex.cfg anywhere. 
> Ok, I thought, let's see how kerkis.map is registered. So I found it 
> registered in texmf-local/web2c/updmap.cfg and I added a similar line:
> 
> Map tiqwah.map
> 
> and run texconfig rehash. But it still doesn't work, i.e. pdflatex tries 
> to generate pk bitmap versions from sources. (I have the sources of Tiqwah 
> fonts but I have produced Type1 version of them, so I insist on using them 
> as they are much much better than the original pk version)
> 
> Any ideas which step I am missing in registration of Type1 fonts?
> 
> Kind regards
> Tigran
> 
> 
> 

From sebastian.rahtz at computing-services.oxford.ac.uk  Sun Jul  4 19:59:26 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Sun Jul  4 20:12:19 2004
Subject: [tex-live] installation errors with the current snapshot
In-Reply-To: <Pine.LNX.4.44.0407041406390.3557-100000@einstein.homenet>
References: <Pine.LNX.4.44.0407041406390.3557-100000@einstein.homenet>
Message-ID: <40E8457E.1060309@computing-services.oxford.ac.uk>

eohyph should not be accessed at all for a normal LaTeX build,
so something has screwed up. needs investigating....

Sebastian

From Daniel.Flipo at univ-lille1.fr  Sun Jul  4 20:13:34 2004
From: Daniel.Flipo at univ-lille1.fr (Daniel Flipo)
Date: Sun Jul  4 20:14:41 2004
Subject: [tex-live] TL004 installation from DVD image
In-Reply-To: <1ggd3ks.115mr6d13qf1a8M%jpg45@wanadoo.fr>
Message-ID: <200407041813.i64IDXOk032363@reserv5.univ-lille1.fr>


Hi all,

I have investigated a bit more about what I called some days ago
"Severe bug in TL2004 DVD installation".

Fact: on my linux (debian testing) system, installation from
  the test-texlive2004-inst-20040625.iso image (kind of) works, while
  the test-texlive2004-live-20040625.iso image doesn't install
  any binary at all!

As Sebastian pointed out, the 'live' image prints

    <B> binary systems:        1 out of  0             <= *** BUG ***

I have looked into both versions install-tl.sh script,
the variable $systems is evaluated differently:

inst>   systems=`(cd $LISTS; ls bin-tex.* | sed  -e 's/bin-tex.//')`

live>   systems=`(cd $BIN; ls -l | grep "^d" | awk '{print $9}')`

The 9th field is empty... this would work for me:
live>   systems=`(cd $BIN; ls -l | grep "^d" | awk '{print $8}')`
as ls -l | grep "^d" produces:
drwxr-xr-x    2 root     root        30720 2004-06-22 08:10
alpha-linux/
drwxr-xr-x    2 root     root        30720 2004-05-11 11:40
i386-freebsd4.8/
drwxr-xr-x    2 root     root        30720 2004-06-22 18:30
i386-linux/
drwxr-xr-x    2 root     root        30720 2004-05-11 11:40
i386-openbsd3.3/
drwxr-xr-x    2 root     root        30720 2004-05-11 11:40
i386-solaris2.8/
drwxr-xr-x    2 root     root        30720 2004-06-22 19:20
mips-irix6.5/
drwxr-xr-x    2 root     root        30720 2004-05-11 11:40
powerpc-aix4.3.3.0/
drwxr-xr-x    2 root     root        30720 2004-05-11 11:40
powerpc-darwin6.6/
drwxr-xr-x    2 root     root        30720 2004-05-11 11:40
sparc64-linux/
drwxr-xr-x    2 root     root        30720 2004-05-11 11:40
sparc-solaris2.7/
drwxr-xr-x    5 root     root        55296 2004-06-20 17:10 win32/
drwxr-xr-x    2 root     root         8192 2004-06-07 15:10
win32-static/

May I also suggest to use '\ls' instead of 'ls' as the command 'ls'
is often aliased, I have:
alias ls='ls -F --color=auto'
this appends a '/' at the end of the directories, should be harmless
but...

Daniel Flipo

From te at dbs.uni-hannover.de  Sun Jul  4 20:13:38 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Sun Jul  4 20:14:43 2004
Subject: [tex-live] Re: [patch] fix to the Build script.
In-Reply-To: <40E83837.5050300@computing-services.oxford.ac.uk>
References: <Pine.LNX.4.44.0407041111460.3557-100000@einstein.homenet>
	<40E83837.5050300@computing-services.oxford.ac.uk>
Message-ID: <20040704181338.GD27016@dbs.uni-hannover.de>

On Sun, Jul 04, 2004 at 06:02:47PM +0100, Sebastian Rahtz wrote:
> test -f Makefile && make clean

Looks good. To save some time, you could also
  rm -rf Work
before "find . -name config.cache -print -exec rm -f {} \;".

--enable-multiplatform is already the default due to TeX/tetex.ac
(included by configure.in).

Thomas

From sebastian.rahtz at computing-services.oxford.ac.uk  Sun Jul  4 20:03:18 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Sun Jul  4 20:16:16 2004
Subject: [tex-live] Re: [patch] fix to the Build script.
In-Reply-To: <200407041805.i64I5Ph29401@f7.net>
References: <200407041805.i64I5Ph29401@f7.net>
Message-ID: <40E84666.1010104@computing-services.oxford.ac.uk>

Karl Berry wrote:

>     test -f Makefile && make clean
>    which is better, isn't it?
>
>It will fail (and stop the build) when Makefile does not exist. 
>
why should it stop the build? this is a shell script, not a Makefile itself

> Maybe
>you want test ! -f Makefile || make clean?
>
>  
>
ok


-- 
Sebastian Rahtz      Information Manager
Oxford University Computing Services
13 Banbury Road, Oxford OX2 6NN. Phone +44 1865 283431

From te at dbs.uni-hannover.de  Sun Jul  4 20:17:01 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Sun Jul  4 20:18:03 2004
Subject: [tex-live] Re: [patch] fix to the Build script.
In-Reply-To: <200407041805.i64I5Ph29401@f7.net>
References: <40E83837.5050300@computing-services.oxford.ac.uk>
	<200407041805.i64I5Ph29401@f7.net>
Message-ID: <20040704181701.GE27016@dbs.uni-hannover.de>

On Sun, Jul 04, 2004 at 02:05:25PM -0400, Karl Berry wrote:
>      test -f Makefile && make clean
>     which is better, isn't it?
> 
> It will fail (and stop the build) when Makefile does not exist.  Maybe
> you want test ! -f Makefile || make clean?

Why does the build stop? Is there some automatic "set -e" somewhere?

Thomas

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 20:16:42 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 20:19:05 2004
Subject: [tex-live] Re: [patch] fix to the Build script.
In-Reply-To: <40E84666.1010104@computing-services.oxford.ac.uk>
Message-ID: <Pine.LNX.4.44.0407041914470.4709-100000@einstein.homenet>

I suspected that my omission (unintentional) of details will confuse 
someone. Namely, I didn't mention that by "leftover from previous build" I 
meant that there was something in your tree (not my local tree!) which 
caused the build to fail unless one executes "make clean" for real and to 
do that one needs a Makefile, so I used Makefile.in as Makefile and it did 
the trick.

So, I repeat, I did "p4 sync" on a clean tree (no previous builds) then 
copied that tree somewhere and did a Build on it, which failed.

Kind regards
Tigran

On Sun, 4 Jul 2004, Sebastian Rahtz wrote:

> Karl Berry wrote:
> 
> >     test -f Makefile && make clean
> >    which is better, isn't it?
> >
> >It will fail (and stop the build) when Makefile does not exist. 
> >
> why should it stop the build? this is a shell script, not a Makefile itself
> 
> > Maybe
> >you want test ! -f Makefile || make clean?
> >
> >  
> >
> ok
> 
> 
> 

From te at dbs.uni-hannover.de  Sun Jul  4 20:20:38 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Sun Jul  4 20:21:42 2004
Subject: [tex-live] Re: type1 font handling for pdflatex changed?
In-Reply-To: <Pine.LNX.4.44.0407041908550.4709-100000@einstein.homenet>
References: <Pine.LNX.4.44.0407041900500.4709-100000@einstein.homenet>
	<Pine.LNX.4.44.0407041908550.4709-100000@einstein.homenet>
Message-ID: <20040704182038.GF27016@dbs.uni-hannover.de>

On Sun, Jul 04, 2004 at 07:09:09PM +0100, Tigran Aivazian wrote:
> > In TeX Live 2003 I simply added the line to the file 
> > texmf-var/pdftex/config/pdftex.cfg:
> > 
> > map +tiqwah.map

forget about that old config file. Edit pdftexconfig.tex (use \pdfmapfile)
and "fmtutil --all".

Thomas

From sebastian.rahtz at computing-services.oxford.ac.uk  Sun Jul  4 20:08:31 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Sun Jul  4 20:21:46 2004
Subject: [tex-live] type1 font handling for pdflatex changed?
In-Reply-To: <Pine.LNX.4.44.0407041900500.4709-100000@einstein.homenet>
References: <Pine.LNX.4.44.0407041900500.4709-100000@einstein.homenet>
Message-ID: <40E8479F.1010104@computing-services.oxford.ac.uk>

Tigran Aivazian wrote:

>Ok, I thought, let's see how kerkis.map is registered. So I found it 
>registered in texmf-local/web2c/updmap.cfg and I added a similar line:
>  
>
ah, a gotcha. look at texmf-var/web2c/updmap.cfg first...

cf  discussions on this list a week or two ago

-- 
Sebastian Rahtz      Information Manager
Oxford University Computing Services
13 Banbury Road, Oxford OX2 6NN. Phone +44 1865 283431

From sebastian.rahtz at computing-services.oxford.ac.uk  Sun Jul  4 20:10:16 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Sun Jul  4 20:23:23 2004
Subject: [tex-live] installation errors with the current snapshot
In-Reply-To: <Pine.LNX.4.44.0407041621000.3557-100000@einstein.homenet>
References: <Pine.LNX.4.44.0407041621000.3557-100000@einstein.homenet>
Message-ID: <40E84808.7040106@computing-services.oxford.ac.uk>

Tigran Aivazian wrote:

>On Sun, 4 Jul 2004, Tigran Aivazian wrote:
>  
>
>>Yes, you are right, I selected full scheme (in fear that pdflatex and
>>russian and greek are not considered essential enough :)  I will try now
>>with default scheme.
>>    
>>
>
>Yes, as I suspected, such critical (ok, maybe not for everyone :) things
>like Hebrew, Arabic, Greek, Russian, Latin, footmisc.sty and possibly
>other bits and pieces are not included by default, so I'll just have to
>install them manually.
>  
>
can you convince me that the default should include these packages?

-- 
Sebastian Rahtz      Information Manager
Oxford University Computing Services
13 Banbury Road, Oxford OX2 6NN. Phone +44 1865 283431

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 20:27:11 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 20:29:34 2004
Subject: [tex-live] installation errors with the current snapshot
In-Reply-To: <40E84808.7040106@computing-services.oxford.ac.uk>
Message-ID: <Pine.LNX.4.44.0407041922170.4709-100000@einstein.homenet>

On Sun, 4 Jul 2004, Sebastian Rahtz wrote:
> >Yes, as I suspected, such critical (ok, maybe not for everyone :) things
> >like Hebrew, Arabic, Greek, Russian, Latin, footmisc.sty and possibly
> >other bits and pieces are not included by default, so I'll just have to
> >install them manually.
> >  
> >
> can you convince me that the default should include these packages?

No, I can't and, on the contrary, I wouldn't recommend it. Now that the
Esperanto problem is solved by simply disabling "other languages" in the
Language selection and still selecting the full scheme. I prefer
"everything except known broken stuff" instead of "only known non-broken
stuff" :)

So, I didn't have to install anything manually in the end (well, except
Tiqwah, but I don't think you can include Tiqwah in TeX Live, i.e. Yannis
would probably not like the idea).

If one day someone will write a free software that can do Hebrew
consonants, vowels and accents in pdfLaTeX then I will use it instead of 
Tiqwah.

Kind regards
Tigran

From sebastian.rahtz at computing-services.oxford.ac.uk  Sun Jul  4 20:16:07 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Sun Jul  4 20:35:44 2004
Subject: [tex-live] TL004 installation from DVD image
In-Reply-To: <200407041813.i64IDXOk032363@reserv5.univ-lille1.fr>
References: <200407041813.i64IDXOk032363@reserv5.univ-lille1.fr>
Message-ID: <40E84967.7020104@computing-services.oxford.ac.uk>

Daniel Flipo wrote:

>inst>   systems=`(cd $LISTS; ls bin-tex.* | sed  -e 's/bin-tex.//')`
>
>live>   systems=`(cd $BIN; ls -l | grep "^d" | awk '{print $9}')`
>
>  
>
I have switched live to use the same as inst


-- 
Sebastian Rahtz      Information Manager
Oxford University Computing Services
13 Banbury Road, Oxford OX2 6NN. Phone +44 1865 283431

From karl at freefriends.org  Sun Jul  4 20:44:18 2004
From: karl at freefriends.org (Karl Berry)
Date: Sun Jul  4 20:45:22 2004
Subject: [tex-live] TL004 installation from DVD image
In-Reply-To: <200407041813.i64IDXOk032363@reserv5.univ-lille1.fr>
Message-ID: <200407041844.i64IiIV06728@f7.net>

      the test-texlive2004-inst-20040625.iso image (kind of) works, while
      the test-texlive2004-live-20040625.iso image doesn't install

There have been many fixes in the last few days.  You might want to try
the current ones.

Except there have been plenty of fixes just today.  The nightly rebuild
will be in 4 hours or so ...

    May I also suggest to use '\ls' instead of 'ls' as the command 'ls'

That should not be necessary.  Aliases are thankfully not inherited by
shell scripts.  (I have the same sort of alias as you, and it does not
cause trouble for me.)  After all, every single command could be aliased
in a problematic way.

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 20:47:37 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 20:50:04 2004
Subject: [tex-live] Re: [patch] fix to the Build script.
In-Reply-To: <20040704181701.GE27016@dbs.uni-hannover.de>
Message-ID: <Pine.LNX.4.44.0407041928520.4709-100000@einstein.homenet>

On Sun, 4 Jul 2004, Thomas Esser wrote:

> On Sun, Jul 04, 2004 at 02:05:25PM -0400, Karl Berry wrote:
> >      test -f Makefile && make clean
> >     which is better, isn't it?
> > 
> > It will fail (and stop the build) when Makefile does not exist.  Maybe
> > you want test ! -f Makefile || make clean?
> 
> Why does the build stop? Is there some automatic "set -e" somewhere?
> 

Fortunately, I still have a clean Build.tar snapshot from this morning.
So, unpacking it and running Build again I see the following (when built 
without "make -f Makefile.inp clean" i.e.)

[skipped]
cd ../../../../TeX/texk/devnag && /bin/sh 
/usr/src/Build/source.development/TeX/texk/devnag/missing --run autoconf
/bin/sh ./config.status --recheck
running /bin/sh ../../../../TeX/texk/devnag/configure  
--prefix=/usr/src/Build/source.development 
--datadir=/usr/src/Build/source.development --enable-multiplatform 
--cache-file=../../.././config.cache --srcdir=../../../../TeX/texk/devnag  
--no-create --no-recursion
configure: loading cache ../../.././config.cache
configure: error: `CC' was not set in the previous run
configure: error: `CFLAGS' was not set in the previous run
configure: error: `LDFLAGS' was not set in the previous run
configure: error: changes in the environment can compromise the build
configure: error: run `make distclean' and/or `rm ../../.././config.cache' 
and start over
make[3]: *** [config.status] Error 1
make[3]: Leaving directory 
`/usr/src/Build/source.development/Work/TeX/texk/devnag'
make[2]: *** [all] Error 1
make[2]: Leaving directory 
`/usr/src/Build/source.development/Work/TeX/texk'
make[1]: *** [all] Error 1
make[1]: Leaving directory `/usr/src/Build/source.development/Work/TeX'
make: *** [all] Error 1

I uploaded the full Build.log for you here, if you want to take a closer 
look:

http://www.bibles.org.uk/x86_64

Kind regards
Tigran



From olaf at infovore.xs4all.nl  Sun Jul  4 21:17:36 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Sun Jul  4 21:18:46 2004
Subject: [tex-live] Re: [patch] fix to the Build script.
In-Reply-To: <Pine.LNX.4.44.0407041928520.4709-100000@einstein.homenet> (Tigran
	Aivazian's message of "Sun, 4 Jul 2004 19:47:37 +0100 (BST)")
References: <Pine.LNX.4.44.0407041928520.4709-100000@einstein.homenet>
Message-ID: <87llhzoa3z.fsf@infovore.xs4all.nl>

Tigran Aivazian writes:

> [skipped]
> cd ../../../../TeX/texk/devnag && /bin/sh 
> /usr/src/Build/source.development/TeX/texk/devnag/missing --run autoconf
> /bin/sh ./config.status --recheck
> running /bin/sh ../../../../TeX/texk/devnag/configure  
> --prefix=/usr/src/Build/source.development 
> --datadir=/usr/src/Build/source.development --enable-multiplatform 
> --cache-file=../../.././config.cache --srcdir=../../../../TeX/texk/devnag  
> --no-create --no-recursion
> configure: loading cache ../../.././config.cache
> configure: error: `CC' was not set in the previous run
> configure: error: `CFLAGS' was not set in the previous run
> configure: error: `LDFLAGS' was not set in the previous run
> configure: error: changes in the environment can compromise the build
> configure: error: run `make distclean' and/or `rm ../../.././config.cache' 
> and start over

These are typical messages of autoconf 2.50 and up.  The way we
intermix autoconf 2.13 and autoconf 2.50 may be related to this
problem.  However, I'd also guess there's something wrong with the
timestamps or makefiles, and we shouldn't get a configure --recheck
run when doing a 'make' immediately after 'configure'.  According to
the build log these --recheck operations happen in an number of
places, and IMHO each of those should be looked into.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From olaf at infovore.xs4all.nl  Sun Jul  4 21:27:14 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Sun Jul  4 21:28:16 2004
Subject: [tex-live] xdvik squeeze and cross-compilation
Message-ID: <87d63bo9nx.fsf@infovore.xs4all.nl>

Like dvipsk:

$ p4 describe -du 5418
Change 5418 by olaf@olaf on 2004/07/04 21:24:41

        When cross-compiling, compile squeeze for the build-host.

Affected files ...

... //depot/Build/source.development/TeX/texk/xdvik/Makefile.in#26 edit
... //depot/Build/source.development/TeX/texk/xdvik/configure.in#22 edit

Differences ...

==== //depot/Build/source.development/TeX/texk/xdvik/Makefile.in#26 (text) ====

@@ -7,6 +7,7 @@
 ac_include ../make/paths.mk
 ac_include ../make/common.mk
 ac_include ../make/programs.mk
+ac_include ../make/cross.mk

 all_subdirs = gui

@@ -103,8 +104,10 @@
 @final_exec_name@: $(kpathsea) $(objects) $(LIBT1DEP) $(LIBGUIDEP)
        $(kpathsea_link) $(objects) $(LIBGUI) $(x_link) $(LOADLIBES)

+squeese.o: squeeze.c
+       $(build_compile) -c $<
 squeeze: squeeze.o
-       $(link_command) squeeze.o $(LIBS) $(XLOADLIBES)
+       $(build_link_command) squeeze.o

 psheader.c: psheader.txt squeeze
        ./squeeze $(srcdir)/psheader.txt $@

==== //depot/Build/source.development/TeX/texk/xdvik/configure.in#22 (text) ====

@@ -269,6 +269,15 @@
 AC_CHECK_LIB(m, main)
 AC_C_CONST()

+# If you're cross-compiling, these macros set up the variables in
+# ../make/cross.mk: BUILDCC, BUILDCFLAGS, BUILDCCLD etc.  These are
+# near the end so people have some chance of seeing them.
+KPSE_CROSS_BUILD_VAR(CC, cc)
+KPSE_CROSS_BUILD_VAR(CFLAGS, $(BUILDXCFLAGS))
+KPSE_CROSS_BUILD_VAR(CPPFLAGS, $(BUILDXCPPFLAGS))
+KPSE_CROSS_BUILD_VAR(LDFLAGS, $(BUILDXLDFLAGS))
+KPSE_CROSS_BUILD_VAR(CCLD, $(BUILDCC))
+
 AC_OUTPUT(Makefile gui/Makefile xdvi-sh)

 dnl update `stamp-auto' since we just remade `c-auto.h'

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 21:43:48 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 21:46:13 2004
Subject: [tex-live] Re: type1 font handling for pdflatex changed?
In-Reply-To: <20040704182038.GF27016@dbs.uni-hannover.de>
Message-ID: <Pine.LNX.4.44.0407042034450.4709-100000@einstein.homenet>

On Sun, 4 Jul 2004, Thomas Esser wrote:
> On Sun, Jul 04, 2004 at 07:09:09PM +0100, Tigran Aivazian wrote:
> > > In TeX Live 2003 I simply added the line to the file 
> > > texmf-var/pdftex/config/pdftex.cfg:
> > > 
> > > map +tiqwah.map
> 
> forget about that old config file. Edit pdftexconfig.tex (use \pdfmapfile)
> and "fmtutil --all".

Hmmm, didn't work for some reason :(

I get:

kpathsea: Running mktextfm tq24
/home/tl/TeX/texmf/web2c/mktexnam: Could not map typeface abbreviation q2 for tq24.
/home/tl/TeX/texmf/web2c/mktexnam: Need to update 
/home/tl/TeX/texmf-dist/fonts/map/dvips/fontname/special.map?
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1; 
nonstopmode; input tq24
This is METAFONT, Version 2.71828 (Web2C 7.5.3)

kpathsea: Running mktexmf tq24
! I can't find file `tq24'.

I don't know where "q2" comes from. The tiqwah.map file contains no 
mention of "q2":

tq6 TeX-tq6 <tq6.pfb
tq7 TeX-tq7 <tq7.pfb
tq8 TeX-tq8 <tq8.pfb
tq9 TeX-tq9 <tq9.pfb
tq10 TeX-tq10 <tq10.pfb
tq11 TeX-tq11 <tq11.pfb
tq12 TeX-tq12 <tq12.pfb
tq14 TeX-tq14 <tq14.pfb
tq17 TeX-tq17 <tq17.pfb
tq24 TeX-tq24 <tq24.pfb
tq20 TeX-tq20 <tq20.pfb
tq36 TeX-tq36 <tq36.pfb

which worked fine on TeX Live 2003.

Sebastian recommended using texmf-var/web2c/updmap.cfg and searching
archives for possible clues, which I am doing at the moment but still have
not found a way to do this. I also learnt the "user-friendly" way of 
using "updmap --edit" but it didn't make any difference either.

Kind regards
Tigran


From te at dbs.uni-hannover.de  Sun Jul  4 21:48:18 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Sun Jul  4 21:49:21 2004
Subject: [tex-live] Re: [patch] fix to the Build script.
In-Reply-To: <Pine.LNX.4.44.0407041928520.4709-100000@einstein.homenet>
References: <20040704181701.GE27016@dbs.uni-hannover.de>
	<Pine.LNX.4.44.0407041928520.4709-100000@einstein.homenet>
Message-ID: <20040704194818.GK27016@dbs.uni-hannover.de>

On Sun, Jul 04, 2004 at 07:47:37PM +0100, Tigran Aivazian wrote:
> cd ../../../../TeX/texk/devnag && /bin/sh 
> /usr/src/Build/source.development/TeX/texk/devnag/missing --run autoconf
> /bin/sh ./config.status --recheck

I just completed a successful Build (without any "make clean"). I did
not get any of those --recheck invocations. Please run
  p4 client
and make sure that you have set the option "modtime".

If you still get problems, I recommend to
  rm -rf /usr/src/Build/source.development
  p4 sync /usr/src/Build/source.development/...

Thomas

From te at dbs.uni-hannover.de  Sun Jul  4 21:51:51 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Sun Jul  4 21:52:54 2004
Subject: [tex-live] Re: type1 font handling for pdflatex changed?
In-Reply-To: <Pine.LNX.4.44.0407042034450.4709-100000@einstein.homenet>
References: <20040704182038.GF27016@dbs.uni-hannover.de>
	<Pine.LNX.4.44.0407042034450.4709-100000@einstein.homenet>
Message-ID: <20040704195151.GL27016@dbs.uni-hannover.de>

On Sun, Jul 04, 2004 at 08:43:48PM +0100, Tigran Aivazian wrote:
> kpathsea: Running mktextfm tq24

The tfm's are a different matter and not related to map file setup.
Where do you have tq24.tfm?

> not found a way to do this. I also learnt the "user-friendly" way of 
> using "updmap --edit" but it didn't make any difference either.

The reason is that you are failing even before the map entries come into
action. *TeX needs a tfm for every font, no matter how it is set up.

Thomas

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 21:50:31 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 21:52:59 2004
Subject: [tex-live] Re: [patch] fix to the Build script.
In-Reply-To: <20040704194818.GK27016@dbs.uni-hannover.de>
Message-ID: <Pine.LNX.4.44.0407042050080.4709-100000@einstein.homenet>

On Sun, 4 Jul 2004, Thomas Esser wrote:
> and make sure that you have set the option "modtime".

yes, that was probably the reason, it was set to "nomodtime".

Kind regards
Tigran

From te at dbs.uni-hannover.de  Sun Jul  4 22:01:37 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Sun Jul  4 22:02:41 2004
Subject: [tex-live] Re: [patch] fix to the Build script.
In-Reply-To: <20040704194818.GK27016@dbs.uni-hannover.de>
References: <20040704181701.GE27016@dbs.uni-hannover.de>
	<Pine.LNX.4.44.0407041928520.4709-100000@einstein.homenet>
	<20040704194818.GK27016@dbs.uni-hannover.de>
Message-ID: <20040704200137.GA17487@dbs.uni-hannover.de>

On Sun, Jul 04, 2004 at 09:48:18PM +0200, Thomas Esser wrote:
> If you still get problems, I recommend to
>   rm -rf /usr/src/Build/source.development
>   p4 sync /usr/src/Build/source.development/...

Must be
  rm -rf /usr/src/Build/source.development
  p4 sync -f /usr/src/Build/source.development/...
          ^^
of course...

Thomas

From tigran at aivazian.fsnet.co.uk  Sun Jul  4 22:03:57 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul  4 22:06:22 2004
Subject: [tex-live] Re: type1 font handling for pdflatex changed?
In-Reply-To: <20040704195151.GL27016@dbs.uni-hannover.de>
Message-ID: <Pine.LNX.4.44.0407042051540.4709-100000@einstein.homenet>

Ah, sorry, my fault. Yes, I forgot to copy *.tfm and only remembered to
copy *.pfb files. Now that I copied *.tfm to
TeX/texmf-local/fonts/tfm/tiqwah and re-run "texconfig init" everything
works fine, thank you!

Now the file tnk.pdf which took 85 minutes to generate in the past is 
generated in just 9 minutes, thanks to TeX Live 2004 on x86_64! :)

Kind regards
Tigran

On Sun, 4 Jul 2004, Thomas Esser wrote:

> On Sun, Jul 04, 2004 at 08:43:48PM +0100, Tigran Aivazian wrote:
> > kpathsea: Running mktextfm tq24
> 
> The tfm's are a different matter and not related to map file setup.
> Where do you have tq24.tfm?
> 
> > not found a way to do this. I also learnt the "user-friendly" way of 
> > using "updmap --edit" but it didn't make any difference either.
> 
> The reason is that you are failing even before the map entries come into
> action. *TeX needs a tfm for every font, no matter how it is set up.
> 
> Thomas
> 


From olaf at infovore.xs4all.nl  Sun Jul  4 22:34:22 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Sun Jul  4 22:35:27 2004
Subject: [tex-live] --with-etex, --without-etex, --with-pdftex,
	--without-pdftex ?
In-Reply-To: <200407032355.i63Ntc012147@f7.net> (Karl Berry's message of
	"Sat, 3 Jul 2004 19:55:38 -0400")
References: <200407032355.i63Ntc012147@f7.net>
Message-ID: <87n02fmrzl.fsf@infovore.xs4all.nl>

Karl Berry writes:

> Are there particular things you would like be tested?

The catch is that the things that should be tested are almost
certainly things I'd never think of testing myself...

> Well, we have a number of volunteers who responded to my earlier
> requests for people to test.  But I don't think it makes sense to ask
> them to start until we have something which we believe is stable, i.e.,
> you and Martin, at least, have no more pending changes.  Having them try
> when it's still a moving target seems like it will just be frustrating.
> (Ditto remaking all the binaries.)

Well, I think the web2c binaries should be stable now (though I've
thought that before), except for some platform-specific (Cygwin)
stuff.

This weekend's main work has actually been in the build system.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From stefan-ulrich.nntp at zen.co.uk  Sun Jul  4 23:03:04 2004
From: stefan-ulrich.nntp at zen.co.uk (Stefan Ulrich)
Date: Sun Jul  4 22:59:05 2004
Subject: [tex-live] Permissions of texk/xdvik/xdvizilla are wrong.
In-Reply-To: <20040704175953.GB27016@dbs.uni-hannover.de>
References: <87vfh3ofrh.fsf@infovore.xs4all.nl>
	<16616.16764.259160.726139@82.69.16.43>
	<20040704174437.GA27016@dbs.uni-hannover.de>
	<20040704175953.GB27016@dbs.uni-hannover.de>
Message-ID: <16616.28808.587134.348798@82.69.16.43>

Thomas Esser <te@dbs.uni-hannover.de> writes:

>> >  	chmod +x $(scriptdir)/xdvizilla
>> 
>> The permissions are ok now. Do you fear to loose the correct permissions
>> somehow?

> Hm... I guess that the permissions in my tree are only correct, because
> the Makefile.in has fixed them. They are still wrong in your tarball.
> Maybe, we should keep the above unless you can make sure to fix the
> permissions on your side permanently.

Unfortunately they're wrong in my CVS master on sourceforge (for
some reason); fixing that would require submitting a support
request to the SF team, which I'd rather like to avoid if there's
an easy way around it (I had hoped a quick chmod at install time
would be harmless ...)

-- 
Stefan Ulrich

From te at dbs.uni-hannover.de  Sun Jul  4 23:04:46 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Sun Jul  4 23:05:52 2004
Subject: [tex-live] Permissions of texk/xdvik/xdvizilla are wrong.
In-Reply-To: <16616.28808.587134.348798@82.69.16.43>
References: <87vfh3ofrh.fsf@infovore.xs4all.nl>
	<16616.16764.259160.726139@82.69.16.43>
	<20040704174437.GA27016@dbs.uni-hannover.de>
	<20040704175953.GB27016@dbs.uni-hannover.de>
	<16616.28808.587134.348798@82.69.16.43>
Message-ID: <20040704210446.GA17860@dbs.uni-hannover.de>

On Sun, Jul 04, 2004 at 10:03:04PM +0100, Stefan Ulrich wrote:
> Unfortunately they're wrong in my CVS master on sourceforge (for
> some reason); fixing that would require submitting a support

Ok, so I agree to keep some chmod. It is better to run it on the installed
script since this works even for a read-only source media.

Thomas

From fabrice.popineau at supelec.fr  Sun Jul  4 23:10:05 2004
From: fabrice.popineau at supelec.fr (Fabrice Popineau)
Date: Sun Jul  4 23:11:04 2004
Subject: [tex-live] schemes for installation
In-Reply-To: <40E67EA6.50500@computing-services.oxford.ac.uk>
Message-ID: <20040704211001.36B4A173930@postfix3-1.free.fr>

> >I've observed that we lost so many <description> fields in TPM. Last year
> >I filled that for ~200 packages...
> >
> >
> you can get them back from Perforce; they need to get into the Williams
> catalogue

Imho, there should be only one source for all this stuff. The best would be
to forward those descriptions to Graham Williams. I know this is not funny
job, but on the other hand I found quite many bits of information in the
Catalogue that were not reflected into tpm files.

Fabrice
 


From staw at gust.org.pl  Sun Jul  4 23:24:37 2004
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Sun Jul  4 23:16:13 2004
Subject: [tex-live] schemes for installation
In-Reply-To: <20040704211001.36B4A173930@postfix3-1.free.fr>
Message-ID: <Pine.LNX.4.44.0407042322010.10819-100000@re86.internetdsl.tpnet.pl>

On Sun, 4 Jul 2004, Fabrice Popineau wrote:

> > >I've observed that we lost so many <description> fields in TPM. Last year
> > >I filled that for ~200 packages...
> > >
> > you can get them back from Perforce; they need to get into the Williams
> > catalogue
> 
> Imho, there should be only one source for all this stuff. The best would be
> to forward those descriptions to Graham Williams. I know this is not funny
> job, but on the other hand I found quite many bits of information in the
> Catalogue that were not reflected into tpm files.

Well, I forwarded all that work to Graham last year, but I had no time to 
check whether he included it to the Catalogue...

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl


From staw at gust.org.pl  Mon Jul  5 05:30:43 2004
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Mon Jul  5 05:22:13 2004
Subject: [tex-live] hyphenation puzzle
Message-ID: <Pine.LNX.4.44.0407050517270.11846-100000@re86.internetdsl.tpnet.pl>

I've tried my best to resolve language/hyphenation mess reported by Tigran

Change 5424 on 2004/07/05 by staw@staszek

	following change #5423 deleted tpm files: hyphen-bulgarian, 
	hyphen-esperanto, hyphen-lithuanian; modified collection-langother 
	and omega; lists regenerated

Change 5423 on 2004/07/05 by staw@staszek

	some unicode based patterns moved from texmf/tex/generic/hyphen/ to
	texmf-dist/tex/generic/omegahyph/, srhyphc.tex added from CTAN,
	shhyph.tex renamed to shhyphl.tex (as on CTAN), language.dat
	language.sr.dat and language.sh.dat modified as well as tpm files

I'm quite sure that's not ideal for eg. lambda, but it seems that nobody 
wants to check the usability of hyphenation patterns found in
texmf-dist/tex/generic/omegahyph/

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl


From te at dbs.uni-hannover.de  Mon Jul  5 06:07:31 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Mon Jul  5 06:08:37 2004
Subject: [tex-live] hyphenation puzzle
In-Reply-To: <Pine.LNX.4.44.0407050517270.11846-100000@re86.internetdsl.tpnet.pl>
References: <Pine.LNX.4.44.0407050517270.11846-100000@re86.internetdsl.tpnet.pl>
Message-ID: <20040705040730.GA20282@dbs.uni-hannover.de>

On Mon, Jul 05, 2004 at 05:30:43AM +0200, Staszek Wawrykiewicz wrote:
> 	shhyph.tex renamed to shhyphl.tex (as on CTAN), language.dat

shhyphl.tex has a license of the nocommercial type.

ushyph.tex = hyphen.tex.
gbhyph.tex = ukhyph.tex and they don't allow any changes (btw.: hyphen.tex does).
ishyphen.tex does not allow any changes, too.

So, I suggest to remove the duplicates gbhyph.tex and ushyph.tex and the
nonfree file shhyphl.tex. And what about ukhyph.tex and ishyphen.tex?
Even Knuth has added this "Modifications are permitted, but only if the
resulting file is not named ..."  for hyphen.tex and plain.tex.

Thomas

From preining at logic.at  Mon Jul  5 10:06:56 2004
From: preining at logic.at (Norbert Preining)
Date: Mon Jul  5 10:07:59 2004
Subject: [tex-live] p4 sync problems?
Message-ID: <20040705080656.GA22191@gamma.logic.tuwien.ac.at>

On Son, 04 Jul 2004, Thomas Esser wrote:
> Must be
>   rm -rf /usr/src/Build/source.development
>   p4 sync -f /usr/src/Build/source.development/...
>           ^^

I did this with source.development/texmf to get rid of old stuff, but:
$ pwd
/data/norbert/texlive/p4-base/Build/source.development
$ rm -rf texmf
$ p4 sync -f `pwd`/texmf/...
/data/norbert/texlive/p4-base/Build/source.development/texmf/... - file(s) up-to-date.
$  p4 -V
Perforce - The Fast Software Configuration Management System.
Copyright 1995, 1999 Perforce Software.  All rights reserved.
Rev. P4/LINUXAXP/99.1/10580 (1999/04/23).


Is my client too old?

Best wishes

Norbert

-------------------------------------------------------------------------------
Norbert Preining <preining AT logic DOT at>         Technische Universit?t Wien
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
HENSTRIDGE (n.)
The dried yellow substance found between the prongs of forks in
restaurants.
			--- Douglas Adams, The Meaning of Liff

From karl at freefriends.org  Mon Jul  5 15:38:21 2004
From: karl at freefriends.org (Karl Berry)
Date: Mon Jul  5 15:39:56 2004
Subject: [tex-live] p4 sync problems?
In-Reply-To: <20040705080656.GA22191@gamma.logic.tuwien.ac.at>
Message-ID: <200407051338.i65DcLc25596@f7.net>

    Is my client too old?

No, that's the same version that we have on tug.org.

    $ p4 sync -f `pwd`/texmf/...
    /data/norbert/texlive/p4-base/Build/source.development/texmf/... - file(s) up-to-date.

Hmm.  I tried deleting a junk directory (web/texlive) and doing p4 sync
-f `pwd`/texlive on tug.org, and it worked.

Perhaps Sebastian will have an explanation.

From sebastian.rahtz at computing-services.oxford.ac.uk  Mon Jul  5 15:49:06 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Mon Jul  5 15:50:10 2004
Subject: [tex-live] p4 sync problems?
In-Reply-To: <200407051338.i65DcLc25596@f7.net>
References: <200407051338.i65DcLc25596@f7.net>
Message-ID: <40E95C52.6040005@computing-services.oxford.ac.uk>

Karl Berry wrote:

>Perhaps Sebastian will have an explanation.
>  
>
I'd try the alternative:

p4 sync //depot/Build/...#none
p4 sync


-- 
Sebastian Rahtz      Information Manager
Oxford University Computing Services
13 Banbury Road, Oxford OX2 6NN. Phone +44 1865 283431

From preining at logic.at  Mon Jul  5 15:57:05 2004
From: preining at logic.at (Norbert Preining)
Date: Mon Jul  5 15:58:10 2004
Subject: [tex-live] p4 sync problems?
In-Reply-To: <40E95C52.6040005@computing-services.oxford.ac.uk>
References: <200407051338.i65DcLc25596@f7.net>
	<40E95C52.6040005@computing-services.oxford.ac.uk>
Message-ID: <20040705135705.GA17710@gamma.logic.tuwien.ac.at>

On Mon, 05 Jul 2004, Sebastian Rahtz wrote:
> >Perhaps Sebastian will have an explanation.
> > 
> >
> I'd try the alternative:
> 
> p4 sync //depot/Build/...#none
> p4 sync

Hmm. Ok, this deleted the whole Build tree and remade it. This worked.
But there should be a better way, at least IMHO.

Anyway, all now U2D, thanks.

Best wishes

Norbert

-------------------------------------------------------------------------------
Norbert Preining <preining AT logic DOT at>         Technische Universit?t Wien
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
WRABNESS (n.)
The feeling after having tried to dry oneself with a damp towel.
			--- Douglas Adams, The Meaning of Liff

From staw at gust.org.pl  Mon Jul  5 16:43:00 2004
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Mon Jul  5 16:34:12 2004
Subject: [tex-live] hyphenation puzzle
In-Reply-To: <20040705040730.GA20282@dbs.uni-hannover.de>
Message-ID: <Pine.LNX.4.44.0407051636440.12532-100000@re86.internetdsl.tpnet.pl>

On Mon, 5 Jul 2004, Thomas Esser wrote:

> On Mon, Jul 05, 2004 at 05:30:43AM +0200, Staszek Wawrykiewicz wrote:
> > 	shhyph.tex renamed to shhyphl.tex (as on CTAN), language.dat
> 
> shhyphl.tex has a license of the nocommercial type.

OK, will remove
 
> ushyph.tex = hyphen.tex.
> gbhyph.tex = ukhyph.tex and they don't allow any changes (btw.: hyphen.tex does).
> ishyphen.tex does not allow any changes, too.
> 
> So, I suggest to remove the duplicates gbhyph.tex and ushyph.tex and the
> nonfree file shhyphl.tex. And what about ukhyph.tex and ishyphen.tex?
> Even Knuth has added this "Modifications are permitted, but only if the
> resulting file is not named ..."  for hyphen.tex and plain.tex.

I don't know who (and for what reason) introduced that mess?
We discussed that many years ago :-)
I'm going to follow your suggestions anyway (leaving ukhyph and ishyphen
for better time). Thanks for pointing that.

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl


From staw at gust.org.pl  Mon Jul  5 18:09:42 2004
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Mon Jul  5 18:00:52 2004
Subject: [tex-live] p4 sync problems?
In-Reply-To: <20040705135705.GA17710@gamma.logic.tuwien.ac.at>
Message-ID: <Pine.LNX.4.44.0407051806001.12657-100000@re86.internetdsl.tpnet.pl>

Norbert,

After syncing your last upload I still see etex binary (~1.6MB), not
symbolic link etex->pdfetex. What did you get when compiling?

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl


From J.Fine at open.ac.uk  Mon Jul  5 19:06:28 2004
From: J.Fine at open.ac.uk (Jonathan Fine)
Date: Mon Jul  5 19:07:33 2004
Subject: [tex-live] Re: Please enable ipc in tex
References: <cc42fe$62m$1@sea.gmane.org> <x51xjuvz7b.fsf@lola.goethe.zz>
Message-ID: <ccc1ql$hbn$1@sea.gmane.org>

"David Kastrup" <dak@gnu.org> wrote in message
news:x51xjuvz7b.fsf@lola.goethe.zz...
> "Jonathan Fine" <J.Fine@open.ac.uk> writes:
>
> > Please, if not already done, would you build TeX with
> >   configure --enable-ipc
> >
> > Here is why:
> >
> > Ordinarily, TeX buffers its output dvi file.
> > Tom Rokicki made changes here on the NeXT platform.
> > This allowed dvi files to be previewed while TeX was still running.
> >
> > --enable-ipc adds these changes to the system dependent part of TeX.
> > This adds a command line flag --ipc, whic turns off buffering.
> >
> > The texd project, and also dvipng and PyX, use this when available.
> > (All 3 projects are on sourceforge.)
>
> dvipng uses this, really?  I am not sure about that.  While dvipng
> can work on a pipe in real time, it would not take a look at the
> socket from the ipc flag unless I am mistaken, and the socket
> interaction is necessary, isn't it?

The socket remarks might be a distraction to what is, in my opinion,
a simple request.  David might be relying on inaccurate documentation
(see below).

As stated above,
  tex --ipc
turns off buffering of the output dvi file.

For dvipng to work efficiently "in real time", this buffering must be
turned off.  Otherwise you have to wait for it to come out of the
pipe.

For "real time" and interactive applications, the output buffering is
a real pain.  It can even be thought of as an example of premature
optimization.
   http://c2.com/cgi/wiki?PrematureOptimization


> Maybe it would be a good idea to add a separate option to web2c that
> merely flushes the DVI buffer at the end of each page without fiddling
> around with sockets?  I don't think that many programs exist that
> actually need the socket.  The buffer flushing should be sufficient
> in most cases, right?

As stated above,
  tex --ipc
does precisely what David suggests.

I don't recall exactly what --enable-ipc adds to TeX beside this.

> It would also have the advantage of compiling and working without
> additional library dependencies on probably pretty much every
> platform.  So one would not get into the constant "should it be
> enabled or disabled" hassle that the --ipc option is suffering from.

To summarize, I am suggesting:
1.  No new code on Unix/Linux platforms
2.  Enabling of existing code on Unix/Linux platforms
3.  No divergence between Debian and TeX live on this matter
    (on Unix/Linux platforms)
4.  On Windows and other platforms, --ipc turns off buffering

BTW, here is the Debian change request:
  http://lists.debian.org/debian-tetex-maint/2001/06/msg00107.html

Here is another request for this change:

http://www.mail-archive.com/debian-tetex-maint@lists.debian.org/msg02029.html

I think the sockets side of --enable-ipc is a distraction.

The info page at:
  http://www.fifi.org/cgi-bin/info2www?(web2c)tex+invocation
reads
==
`-ipc'
`-ipc-start'
     With either option, TeX writes its DVI output to a socket as well
     as to the usual `.dvi' file.  With `-ipc-start', TeX also opens a
     server program at the other end to read the output.
==

This is, I think, wrong.  The --ipc option does not, so far as I can
tell, actually cause writing to a socket.

However, I'm not at this moment in a position to check this.


> Olaf, what do you think?
I'd like to join in on this request.


Jonathan



From sebastian.rahtz at computing-services.oxford.ac.uk  Mon Jul  5 21:09:19 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Mon Jul  5 21:10:23 2004
Subject: [tex-live] Re: Please enable ipc in tex
In-Reply-To: <ccc1ql$hbn$1@sea.gmane.org>
References: <cc42fe$62m$1@sea.gmane.org> <x51xjuvz7b.fsf@lola.goethe.zz>
	<ccc1ql$hbn$1@sea.gmane.org>
Message-ID: <20040705190919.GB10853@herald.ox.ac.uk>

What puzzles me is that setting ipc looks to be
the default already in TL, though it obviously
isn't there in the compiled binaries. 

I still want to hear what Olaf and Thomas say.

Sebastian

From te at dbs.uni-hannover.de  Mon Jul  5 21:46:54 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Mon Jul  5 21:47:59 2004
Subject: [tex-live] Re: Please enable ipc in tex
In-Reply-To: <20040705190919.GB10853@herald.ox.ac.uk>
References: <cc42fe$62m$1@sea.gmane.org> <x51xjuvz7b.fsf@lola.goethe.zz>
	<ccc1ql$hbn$1@sea.gmane.org>
	<20040705190919.GB10853@herald.ox.ac.uk>
Message-ID: <20040705194654.GA25326@dbs.uni-hannover.de>

> What puzzles me is that setting ipc looks to be
> the default already in TL, though it obviously
> isn't there in the compiled binaries. 

tetex.ac has enable_ipc=yes, but only for *nextstep3*|*NEXTSTEP*, this
variable is exported. So, if we want to enable it globally, we need to
use
  enable_ipc=yes; export enable_ipc

I don't mind to do that...

Thomas

From sebastian.rahtz at computing-services.oxford.ac.uk  Mon Jul  5 21:54:44 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Mon Jul  5 21:57:13 2004
Subject: [tex-live] Re: Please enable ipc in tex
In-Reply-To: <20040705194654.GA25326@dbs.uni-hannover.de>
References: <cc42fe$62m$1@sea.gmane.org>
	<x51xjuvz7b.fsf@lola.goethe.zz>	<ccc1ql$hbn$1@sea.gmane.org>	<20040705190919.GB10853@herald.ox.ac.uk>
	<20040705194654.GA25326@dbs.uni-hannover.de>
Message-ID: <40E9B204.8090909@computing-services.oxford.ac.uk>

Thomas Esser wrote:

>tetex.ac has enable_ipc=yes, but only for *nextstep3*|*NEXTSTEP*, this
>variable is exported. So, if we want to enable it globally, we need to
>use
>  enable_ipc=yes; export enable_ipc
>
>I don't mind to do that...
>  
>
if you think its safe, lets do it then.

-- 
Sebastian Rahtz      Information Manager
Oxford University Computing Services
13 Banbury Road, Oxford OX2 6NN. Phone +44 1865 283431

From te at dbs.uni-hannover.de  Mon Jul  5 22:02:21 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Mon Jul  5 22:03:25 2004
Subject: [tex-live] Re: Please enable ipc in tex
In-Reply-To: <40E9B204.8090909@computing-services.oxford.ac.uk>
References: <cc42fe$62m$1@sea.gmane.org> <x51xjuvz7b.fsf@lola.goethe.zz>
	<ccc1ql$hbn$1@sea.gmane.org>
	<20040705190919.GB10853@herald.ox.ac.uk>
	<20040705194654.GA25326@dbs.uni-hannover.de>
	<40E9B204.8090909@computing-services.oxford.ac.uk>
Message-ID: <20040705200220.GA26761@dbs.uni-hannover.de>

> if you think its safe, lets do it then.

Done.

I think that this already was the default with some version of teTeX...

Thomas

From olaf at infovore.xs4all.nl  Mon Jul  5 22:02:17 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Mon Jul  5 22:03:28 2004
Subject: [tex-live] Re: Please enable ipc in tex
In-Reply-To: <20040705190919.GB10853@herald.ox.ac.uk> (Sebastian Rahtz's
	message of "Mon, 5 Jul 2004 20:09:19 +0100")
References: <cc42fe$62m$1@sea.gmane.org> <x51xjuvz7b.fsf@lola.goethe.zz>
	<ccc1ql$hbn$1@sea.gmane.org> <20040705190919.GB10853@herald.ox.ac.uk>
Message-ID: <87k6xikyt2.fsf@infovore.xs4all.nl>

Sebastian Rahtz writes:

> What puzzles me is that setting ipc looks to be
> the default already in TL, though it obviously
> isn't there in the compiled binaries. 

> I still want to hear what Olaf and Thomas say.

Let's switch it on and see what breaks then.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From preining at logic.at  Mon Jul  5 23:29:23 2004
From: preining at logic.at (Norbert Preining)
Date: Mon Jul  5 23:30:27 2004
Subject: [tex-live] p4 sync problems?
In-Reply-To: <Pine.LNX.4.44.0407051806001.12657-100000@re86.internetdsl.tpnet.pl>
References: <20040705135705.GA17710@gamma.logic.tuwien.ac.at>
	<Pine.LNX.4.44.0407051806001.12657-100000@re86.internetdsl.tpnet.pl>
Message-ID: <20040705212923.GA6791@gamma.logic.tuwien.ac.at>

On Mon, 05 Jul 2004, Staszek Wawrykiewicz wrote:
> After syncing your last upload I still see etex binary (~1.6MB), not
> symbolic link etex->pdfetex. What did you get when compiling?

Hmm, strange ...:
$ pwd
/data/norbert/texlive/p4-base/Master/bin/alpha-linux
$ ls -l etex
lrwxrwxrwx    1 preining assoc           7 Jun 28 09:22 etex -> pdfetex

So it seems that it is ok. Isn't it in the depot?

Best wishes

Norbert

-------------------------------------------------------------------------------
Norbert Preining <preining AT logic DOT at>         Technische Universit?t Wien
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
FLIMBY (n.)
One of those irritating handle-less slippery translucent plastic bags
you get in supermarkets which, no matter how you hold them, always
contrive to let something fall out.
			--- Douglas Adams, The Meaning of Liff

From olaf at infovore.xs4all.nl  Mon Jul  5 23:31:37 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Mon Jul  5 23:32:41 2004
Subject: [tex-live] Re: Please enable ipc in tex
In-Reply-To: <ccc1ql$hbn$1@sea.gmane.org> (Jonathan Fine's message of "Mon,
	5 Jul 2004 18:06:28 +0100")
References: <cc42fe$62m$1@sea.gmane.org> <x51xjuvz7b.fsf@lola.goethe.zz>
	<ccc1ql$hbn$1@sea.gmane.org>
Message-ID: <87fz86kuo6.fsf@infovore.xs4all.nl>

Jonathan Fine writes:
> "David Kastrup" <dak@gnu.org> wrote in message

>> Maybe it would be a good idea to add a separate option to web2c that
>> merely flushes the DVI buffer at the end of each page without fiddling
>> around with sockets?  I don't think that many programs exist that
>> actually need the socket.  The buffer flushing should be sufficient
>> in most cases, right?

> As stated above,
>   tex --ipc
> does precisely what David suggests.

> I don't recall exactly what --enable-ipc adds to TeX beside this.

Note that I am not the author of the ipc code, and don't know _that_
much about it.  It seems to me that aggressive flushing of the dvi
file enabled by --ipc is a side-effect of needing to do this on the
socket.

The ipc code definitely opens a socket when --ipc is given.  To be
precise, it is a UNIX domain socket named "$HOME/.TeXview_Pipe".  With
--ipc-start it also tries to run "open `which TeXview`" as the
consumer (see IPC_SERVER_CMD in texmfmp.c).

I suspect that for large dvi files, if there is no listener on the
socket, TeX will just hang on a write on the socket after a while.  It
looks to me like TeX writes typically 6 bytes per page on the socket
(which is really used to synchronize the viewer with TeX).  With OS
buffers typically 1024 or 4096 bytes, that means 150+ or 650+ pages.

If you (generic you) want just the aggressive flushing, feel free to
propose a patch.  I think I've figured what would be required, but it
is something I'd like to see independent confirmation of.

Also a proposal on how to specify it on the command line would be
useful.  (As usual, I'm not saying I'd incorporate it, but I do want
to know what lines of thought people have in the matter, if only to
make sure that I don't do something by myself which turns out to be
utterly useless.)

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From preining at logic.at  Mon Jul  5 23:49:02 2004
From: preining at logic.at (Norbert Preining)
Date: Mon Jul  5 23:50:05 2004
Subject: [tex-live] p4 sync problems?
In-Reply-To: <20040705212923.GA6791@gamma.logic.tuwien.ac.at>
References: <20040705135705.GA17710@gamma.logic.tuwien.ac.at>
	<Pine.LNX.4.44.0407051806001.12657-100000@re86.internetdsl.tpnet.pl>
	<20040705212923.GA6791@gamma.logic.tuwien.ac.at>
Message-ID: <20040705214902.GB6791@gamma.logic.tuwien.ac.at>

On Mon, 05 Jul 2004, Norbert Preining wrote:
> > After syncing your last upload I still see etex binary (~1.6MB), not
> > symbolic link etex->pdfetex. What did you get when compiling?
> 
> Hmm, strange ...:
> $ pwd
> /data/norbert/texlive/p4-base/Master/bin/alpha-linux
> $ ls -l etex
> lrwxrwxrwx    1 preining assoc           7 Jun 28 09:22 etex -> pdfetex
> 
> So it seems that it is ok. Isn't it in the depot?

No it wasn't, I fixed it.

But alas ... recompiling again with ipc ...

Best wishes

Norbert

-------------------------------------------------------------------------------
Norbert Preining <preining AT logic DOT at>         Technische Universit?t Wien
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
HASTINGS (pl.n.)
Things said on the spur of the moment to explain to someone who comes
into a room unexpectedly precisely what it is you are doing.
			--- Douglas Adams, The Meaning of Liff

From sebastian.rahtz at computing-services.oxford.ac.uk  Mon Jul  5 23:56:02 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Mon Jul  5 23:59:42 2004
Subject: [tex-live] p4 sync problems?
In-Reply-To: <20040705212923.GA6791@gamma.logic.tuwien.ac.at>
References: <20040705135705.GA17710@gamma.logic.tuwien.ac.at>	<Pine.LNX.4.44.0407051806001.12657-100000@re86.internetdsl.tpnet.pl>
	<20040705212923.GA6791@gamma.logic.tuwien.ac.at>
Message-ID: <40E9CE72.8020506@computing-services.oxford.ac.uk>

Norbert Preining wrote:

>On Mon, 05 Jul 2004, Staszek Wawrykiewicz wrote:
>  
>
>>After syncing your last upload I still see etex binary (~1.6MB), not
>>symbolic link etex->pdfetex. What did you get when compiling?
>>    
>>
>
>Hmm, strange ...:
>$ pwd
>/data/norbert/texlive/p4-base/Master/bin/alpha-linux
>$ ls -l etex
>lrwxrwxrwx    1 preining assoc           7 Jun 28 09:22 etex -> pdfetex
>
>So it seems that it is ok. Isn't it in the depot?
>  
>

no. odd.  changed. lets hope it stays changed!

-- 
Sebastian Rahtz      Information Manager
Oxford University Computing Services
13 Banbury Road, Oxford OX2 6NN. Phone +44 1865 283431

From olaf at infovore.xs4all.nl  Tue Jul  6 08:16:06 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Tue Jul  6 08:17:17 2004
Subject: [tex-live] p4 sync problems?
In-Reply-To: <40E9CE72.8020506@computing-services.oxford.ac.uk> (Sebastian
	Rahtz's message of "Mon, 05 Jul 2004 22:56:02 +0100")
References: <20040705135705.GA17710@gamma.logic.tuwien.ac.at>
	<Pine.LNX.4.44.0407051806001.12657-100000@re86.internetdsl.tpnet.pl>
	<20040705212923.GA6791@gamma.logic.tuwien.ac.at>
	<40E9CE72.8020506@computing-services.oxford.ac.uk>
Message-ID: <878ydxlkyh.fsf@infovore.xs4all.nl>

Sebastian Rahtz writes:
> Norbert Preining wrote:
>> On Mon, 05 Jul 2004, Staszek Wawrykiewicz wrote:

>>> After syncing your last upload I still see etex binary (~1.6MB), not
>>> symbolic link etex->pdfetex. What did you get when compiling?

>> Hmm, strange ...:
>> $ pwd
>> /data/norbert/texlive/p4-base/Master/bin/alpha-linux
>> $ ls -l etex
>> lrwxrwxrwx    1 preining assoc           7 Jun 28 09:22 etex -> pdfetex

>> So it seems that it is ok. Isn't it in the depot?

> no. odd.  changed. lets hope it stays changed!

I has something similar with the IRIX binaries, which I fixed by a p4
delete of the binary, and then a p4 add of the symbolic link.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From taco at elvenkind.com  Tue Jul  6 12:10:01 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed Jul  7 15:11:24 2004
Subject: [tex-live] Fw: build problems with HEAD
Message-ID: <20040706121001.39c75498@glenlivet.elvenkind.com>



Begin forwarded message:

Date: Mon, 5 Jul 2004 12:20:44 +0200
From: Taco Hoekwater <taco@elvenkind.com>
To: ntg-pdftex@ntg.nl
Subject: build problems with HEAD



Hi,

Just to let you know: I cannot get the HEAD to compile without manually 
adding a "-i" option to the make call in the Build script.

"make" bombs at:

gcc  -g -O2   -o texindex  texindex.o ../lib/libtxi.a
make[4]: *** No rule to make target `../../../../../TeX/utils/texinfo/doc/version.texi', needed by `texinfo.cat'.  Stop.
make[4]: Leaving directory `/home/taco/perforce/Build/source.development/Work/TeX/utils/texinfo/util'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/home/taco/perforce/Build/source.development/Work/TeX/utils/texinfo'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/home/taco/perforce/Build/source.development/Work/TeX/utils/texinfo'
make[1]: *** [all] Error 1
make[1]: Leaving directory `/home/taco/perforce/Build/source.development/Work/TeX'


And later, the lcdf-typetools don't compile (not updated for automake-1.8 yet?).
I get loads and loads of these "underquoted" warnings:

making all in utils/lcdf-typetools
make[2]: Entering directory `/home/taco/perforce/Build/source.development/Work/TeX/utils/lcdf-typetools'
cd ../../../../TeX/utils/lcdf-typetools && /bin/sh /home/taco/perforce/Build/source.development/TeX/utils/lcdf-typetools/missing --run aclocal-1.8
/usr/share/aclocal/vorbis.m4:9: warning: underquoted definition of XIPH_PATH_VORBIS
  run info '(automake1.8)Extending aclocal'
  or see http://sources.redhat.com/automake/automake.html#Extending%20aclocal
/usr/share/aclocal/ogg.m4:8: warning: underquoted definition of XIPH_PATH_OGG



-- 
groeten,

Taco


-- 
groeten,

Taco

From taco at elvenkind.com  Tue Jul  6 15:06:07 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed Jul  7 15:11:26 2004
Subject: [tex-live] interactive output filenames
In-Reply-To: <40E90DCC.3030004@wxs.nl>
References: <40E90DCC.3030004@wxs.nl>
Message-ID: <20040706150607.2d5a229b@glenlivet.elvenkind.com>


Hi all,

Here is a proposal for a change to TeX's defailt behaviour. What are the opinions
on the following?

On the NTG-pdftex list, Hans Hagen asked the following:

> Subject: [NTG-pdftex] output file in pdftex
> 
> when the pdf file cannot be written, pdftex asks for a filename; is it 
> possible to replace en empty name (one hits return after closing the 
> file in acroread for instance) by the 'normal' one? Now er can get funny 
> names like .pdf and such.

I created a 3-line patch (attached) to do this. It saves the 'current name'
before calling prompt_input () and restores that value when the net 
result of prompt_input() is empty.

However, this changes all cases where tex explicitly asks for a file name on the 
terminal, not just the one for pdf file. I think this is ok, because similar 'null file' 
problems appear in all cases of the keypress "<return>". 

Martin Schroeder, and later Olaf, responded :
> 
Martin> > This seems like a case for Olaf, as pdfTeX currently doesn't
Martin> > change the routine.
> 
Olaf> I'd like to see more opinions on this.  Please propose on the tex-live list.



-- 
groeten,

Taco
-------------- next part --------------
A non-text attachment was scrubbed...
Name: empty_filename.patch
Type: application/octet-stream
Size: 809 bytes
Desc: not available
Url : http://tug.org/mailman/private/tex-live/attachments/20040706/ef1bcac9/empty_filename.obj
From karl at freefriends.org  Wed Jul  7 15:28:13 2004
From: karl at freefriends.org (Karl Berry)
Date: Wed Jul  7 15:29:19 2004
Subject: [tex-live] interactive output filenames
In-Reply-To: <20040706150607.2d5a229b@glenlivet.elvenkind.com>
Message-ID: <200407071328.i67DSDi07158@f7.net>

    > when the pdf file cannot be written, pdftex asks for a filename; is it 
    > possible to replace en empty name (one hits return after closing the 
    > file in acroread for instance) by the 'normal' one? 

Sounds like a good idea to me.  I've always thought that trying to write
to ".pdf" or whatever was dumb behavior.

From J.Fine at open.ac.uk  Thu Jul  8 18:22:13 2004
From: J.Fine at open.ac.uk (Jonathan Fine)
Date: Thu Jul  8 18:23:27 2004
Subject: [tex-live] Re: Re: Please enable ipc in tex
References: <cc42fe$62m$1@sea.gmane.org>
	<x51xjuvz7b.fsf@lola.goethe.zz><ccc1ql$hbn$1@sea.gmane.org>
	<87fz86kuo6.fsf@infovore.xs4all.nl>
Message-ID: <ccjsbn$tno$1@sea.gmane.org>

"Olaf Weber" <olaf@infovore.xs4all.nl> wrote in message
news:87fz86kuo6.fsf@infovore.xs4all.nl...
> Jonathan Fine writes:
<snip>
> > I don't recall exactly what --enable-ipc adds to TeX beside this.
>
> Note that I am not the author of the ipc code, and don't know _that_
> much about it.  It seems to me that aggressive flushing of the dvi
> file enabled by --ipc is a side-effect of needing to do this on the
> socket.
>
> The ipc code definitely opens a socket when --ipc is given.  To be
> precise, it is a UNIX domain socket named "$HOME/.TeXview_Pipe".  With
> --ipc-start it also tries to run "open `which TeXview`" as the
> consumer (see IPC_SERVER_CMD in texmfmp.c).
>
> I suspect that for large dvi files, if there is no listener on the
> socket, TeX will just hang on a write on the socket after a while.  It
> looks to me like TeX writes typically 6 bytes per page on the socket
> (which is really used to synchronize the viewer with TeX).  With OS
> buffers typically 1024 or 4096 bytes, that means 150+ or 650+ pages.
>
> If you (generic you) want just the aggressive flushing, feel free to
> propose a patch.  I think I've figured what would be required, but it
> is something I'd like to see independent confirmation of.
>
> Also a proposal on how to specify it on the command line would be
> useful.  (As usual, I'm not saying I'd incorporate it, but I do want
> to know what lines of thought people have in the matter, if only to
> make sure that I don't do something by myself which turns out to be
> utterly useless.)

Thanks for the consideration and all the informed comment.

Here are my views on the matter.


The present behaviour, once we --enable-ipc, is adequate.

And it has the great merit of being compatible with existing
distributions - such as Debian.

On Windows, loosing the Unix domain socket would be fine.


I hope that at least for Unix/Linux, tex will have ipc enabled
from now on.


Jonathan



From te at dbs.uni-hannover.de  Fri Jul  9 10:52:39 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Fri Jul  9 10:53:50 2004
Subject: [tex-live] enctex support files in texmf
Message-ID: <20040709085239.GA31682@dbs.uni-hannover.de>

I don't think that enctex's macro files should go to tex/enctex. Some
are clearly for the plain format, others are generic. Here is what I
have in teTeX-beta:

doc/generic/enctex/COPYING
doc/generic/enctex/COPYING.UCD
doc/generic/enctex/INSTALL
doc/generic/enctex/INSTALL.eng
doc/generic/enctex/README
doc/generic/enctex/unimap.diff
doc/generic/enctex/unimap.py
doc/generic/enctex/changes.txt
doc/generic/enctex/vlna.tex
doc/generic/enctex/math-example.tex
doc/generic/enctex/encdoc-e.dvi
doc/generic/enctex/encdoc.dvi
tex/plain/enctex/plain-1250-cs.tex
tex/plain/enctex/plain-1250-dc.tex
tex/plain/enctex/plain-852-cs.tex
tex/plain/enctex/plain-852-dc.tex
tex/plain/enctex/plain-il2-cs.tex
tex/plain/enctex/plain-il2-dc.tex
tex/plain/enctex/plain-kam-cs.tex
tex/plain/enctex/plain-kam-dc.tex
tex/plain/enctex/plain-utf8-cs.tex
tex/plain/enctex/plain-utf8-ec.tex
tex/plain/enctex/noprefnt.tex
tex/plain/enctex/dcfonts.tex
tex/plain/enctex/ecfonts.tex
tex/generic/enctex/1250-csf.tex
tex/generic/enctex/1250-il2.tex
tex/generic/enctex/1250-latex.tex
tex/generic/enctex/1250-t1.tex
tex/generic/enctex/852-csf.tex
tex/generic/enctex/852-il2.tex
tex/generic/enctex/852-latex.tex
tex/generic/enctex/852-t1.tex
tex/generic/enctex/csfmacro.tex
tex/generic/enctex/enc-k.tex
tex/generic/enctex/enc-p.tex
tex/generic/enctex/enc-u.tex
tex/generic/enctex/enc-w.tex
tex/generic/enctex/encmacro.tex
tex/generic/enctex/il2-1250.tex
tex/generic/enctex/il2-852.tex
tex/generic/enctex/il2-csf.tex
tex/generic/enctex/il2-kam.tex
tex/generic/enctex/il2-t1.tex
tex/generic/enctex/kam-csf.tex
tex/generic/enctex/kam-il2.tex
tex/generic/enctex/kam-latex.tex
tex/generic/enctex/kam-t1.tex
tex/generic/enctex/polyset.tex
tex/generic/enctex/t1macro.tex
tex/generic/enctex/utf8-csf.tex
tex/generic/enctex/utf8-t1.tex
tex/generic/enctex/utf8cseq.tex
tex/generic/enctex/utf8math.tex
tex/generic/enctex/utf8raw.tex
tex/generic/enctex/utf8unkn.tex

Thomas

From te at dbs.uni-hannover.de  Fri Jul  9 13:45:06 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Fri Jul  9 13:46:16 2004
Subject: [tex-live] [david@dcarlisle.demon.co.uk: RE:
	[inoue@ma.ns.musashi-tech.ac.jp: graphics/dvipdfm.def]]
Message-ID: <20040709114506.GC31693@dbs.uni-hannover.de>

For teTeX-beta, I have removed tex/latex/graphics/dvipdfm.def (from
graphics) and added tex/latex/dvipdfm/dvipdfm.def (from dvipdfm
distribution). I suggest that TL follows this.

Thomas

----- Forwarded message from David Carlisle <david@dcarlisle.demon.co.uk> -----

From: "David Carlisle" <david@dcarlisle.demon.co.uk>
To: "Frank Mittelbach" <frank.mittelbach@latex-project.org>,
        "Mark A. Wicks" <mwicks@kettering.edu>
Cc: "Thomas Esser" <te@dbs.uni-hannover.de>, <latex-team@latex-project.org>,
        <inoue@ma.ns.musashi-tech.ac.jp>
Subject: RE: [inoue@ma.ns.musashi-tech.ac.jp: graphics/dvipdfm.def]
Date: Tue, 29 Jun 2004 23:12:09 +0100
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
In-Reply-To: <16609.55276.365225.550273@istrati.mittelbach-online.de>
X-UIDL: AT\"!9Zk"!Ff)!!ECe!!
X-Spam-Status: No, hits=0.000000 required=0.900000

Probably we should now not have any driver .def files in the core distrib,
just a drivers.dtx that sort of documents how to make such a file. Any
driver that is maintained at all has a .def file by now, and its much easier
for it to be maintained with the driver.

David


-----Original Message-----
From: Frank Mittelbach [mailto:frank.mittelbach@latex-project.org]
Sent: 29 June 2004 21:58
To: Mark A. Wicks
Cc: Thomas Esser; latex-team@latex-project.org;
inoue@ma.ns.musashi-tech.ac.jp
Subject: Re: [inoue@ma.ns.musashi-tech.ac.jp: graphics/dvipdfm.def]


Mark A. Wicks writes:
 > I apologize for my delayed response.  I am currently on vacation
 > and my only internet access is by a metered dialup connection
 > in a hotel, so I am checking my email rather infrequently.
 >
 > Several years ago, I asked Davis Carlisle not to use the
 > dvipdfm.def file that I distribute because at that time older
 > versions of dvipdfm wouldn't understand the 'psfile' command.
 > Today that's no longer true because these old versions are no
 > longer around.  Unless somebody else has a good reason not too,
 > today I would recommend that you (and anybody else) use the
 > version of dvipdfm.def that is distributed with dvipdfm.

agreed.

in fact i would very much prefer if we strip down the driver section in
graphics to what the LaTeX team can actually support (to some extend) and
only
put a list of "additional" drivers that can be obtained there. distributions
like tetex then only have to combnie and not to merge

frank

----- End forwarded message -----

From siepo at cybercomm.nl  Fri Jul  9 14:28:34 2004
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Fri Jul  9 14:54:08 2004
Subject: [tex-live] A couple of suggestions
Message-ID: <20040709122833.GC8607@muisje>

Two suggestions:

- for updmap an option to leave the generated mapfiles in the
  current directory

- for texconfig not to do anything on startup unless an option
  -batch is given

This would make these scripts safer and more useful for people who
have their own arrangement of trees.

-- 
Siep Kroonenberg

From vvv at vsu.ru  Fri Jul  9 15:06:02 2004
From: vvv at vsu.ru (Vladimir Volovich)
Date: Fri Jul  9 15:07:42 2004
Subject: [tex-live] A couple of suggestions
In-Reply-To: <20040709122833.GC8607@muisje> (Siep Kroonenberg's message of
	"Fri, 9 Jul 2004 14:28:34 +0200")
References: <20040709122833.GC8607@muisje>
Message-ID: <87iscxnxdx.fsf@video.uic.vsu.ru>

"SK" == Siep Kroonenberg writes:

 SK> - for updmap an option to leave the generated mapfiles in the
 SK> current directory

running "updmap --help" shows that this can be accomplished by
updmap --outputdir .

Best,
v.

From karl at freefriends.org  Fri Jul  9 15:37:26 2004
From: karl at freefriends.org (Karl Berry)
Date: Fri Jul  9 15:38:37 2004
Subject: [tex-live] [david@dcarlisle.demon.co.uk: RE:
	[inoue@ma.ns.musashi-tech.ac.jp: graphics/dvipdfm.def]]
In-Reply-To: <20040709114506.GC31693@dbs.uni-hannover.de>
Message-ID: <200407091337.i69DbQq25935@f7.net>

    For teTeX-beta, I have removed tex/latex/graphics/dvipdfm.def (from
    graphics) and added tex/latex/dvipdfm/dvipdfm.def (from dvipdfm
    distribution). I suggest that TL follows this.

Sounds good.  Can you make the change?  Unless there's some objection.

Ditto the enctex locations ...

thanks.

From te at dbs.uni-hannover.de  Fri Jul  9 15:48:30 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Fri Jul  9 15:49:41 2004
Subject: [tex-live] [david@dcarlisle.demon.co.uk: RE:
	[inoue@ma.ns.musashi-tech.ac.jp: graphics/dvipdfm.def]]
In-Reply-To: <200407091337.i69DbQq25935@f7.net>
References: <20040709114506.GC31693@dbs.uni-hannover.de>
	<200407091337.i69DbQq25935@f7.net>
Message-ID: <20040709134830.GA6636@dbs.uni-hannover.de>

> Sounds good.  Can you make the change?  Unless there's some objection.
> Ditto the enctex locations ...

I have never done anything in the texmf tree. First is that I don't know
how to adjust the tpms. Second is that I can't make sure that any tool /
whatever installs files into a different place next time.

Thomas

From siepo at cybercomm.nl  Fri Jul  9 15:51:36 2004
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Fri Jul  9 15:51:18 2004
Subject: [tex-live] A couple of suggestions
In-Reply-To: <87iscxnxdx.fsf@video.uic.vsu.ru>
References: <20040709122833.GC8607@muisje> <87iscxnxdx.fsf@video.uic.vsu.ru>
Message-ID: <20040709135136.GD8607@muisje>

On Fri, Jul 09, 2004 at 05:06:02PM +0400, Vladimir Volovich wrote:
> "SK" == Siep Kroonenberg writes:
> 
>  SK> - for updmap an option to leave the generated mapfiles in the
>  SK> current directory
> 
> running "updmap --help" shows that this can be accomplished by
> updmap --outputdir .
> 
> Best,
> v.

Thanks; somehow I had missed that.

-- 
Siep Kroonenberg

From te at dbs.uni-hannover.de  Fri Jul  9 16:11:50 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Fri Jul  9 16:13:03 2004
Subject: [tex-live] A couple of suggestions
In-Reply-To: <20040709122833.GC8607@muisje>
References: <20040709122833.GC8607@muisje>
Message-ID: <20040709141150.GB6636@dbs.uni-hannover.de>

On Fri, Jul 09, 2004 at 02:28:34PM +0200, Siep Kroonenberg wrote:
> - for texconfig not to do anything on startup unless an option
>   -batch is given

To rework the startup behaviour of texconfig is something on my list.
I agree that texconfig shouldn't do anything unless it is explicitly
asked for some action.

> This would make these scripts safer and more useful for people who
> have their own arrangement of trees.

Good point.

Thanks,

Thomas

From staw at gust.org.pl  Fri Jul  9 17:34:54 2004
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Fri Jul  9 17:34:51 2004
Subject: [tex-live] enctex support files in texmf
In-Reply-To: <20040709085239.GA31682@dbs.uni-hannover.de>
Message-ID: <Pine.LNX.4.44.0407091640570.18970-100000@re86.internetdsl.tpnet.pl>

On Fri, 9 Jul 2004, Thomas Esser wrote:

> I don't think that enctex's macro files should go to tex/enctex. Some
> are clearly for the plain format, others are generic. Here is what I
> have in teTeX-beta:

I noticed that last night when updating enctex from CTAN. As I understand
Fabrice's idea, enctex can be considered like mltex, etc., serving
to prepare specific _format_ file(s), thus tex/enctex at the same level
as amstex, mltex, plain, etc. Personally I'd prefer having it
in tex/generic/enctex but not spliting into tex/generic/enctex
and tex/plain/enctex. Thomas, for me there is no reason to split
such stuff into 2 directories, as "generic" is dedicated for macros
which can serve for any format. We can even use enctex extensions
for making latex format, I guess. 

Next example from the current teTeX-beta: tex/generic/epsf/epsf.tex and
tex/plain/dvips/ (the rest from generic dvips macros; e.g. rotate.tex
which could be usable in latex, why not?). btw. where are in teTeX
epsf.sty, etc.? I really do not see any reason for such spliting...

> doc/generic/enctex/unimap.diff
> doc/generic/enctex/unimap.py
Those files should rather go into source/generic/enctex/
(of course when "generic macros"  vs. "independent format stuff" 
would be acceptable ;-)

> doc/generic/enctex/vlna.tex
it should go to the input area

As you can see, it is sometimes very difficult to find out where
the files should go. It could be even more difficult to update
a package (esp. with some new files and other removed from the 
distribution), when the contents of that package has to be splited
into many directories. Having tex/generic is enough clear.

Thanks,

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl

From pragma at wxs.nl  Fri Jul  9 18:41:07 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Fri Jul  9 18:42:24 2004
Subject: [tex-live] bug in etex 
Message-ID: <40EECAA3.3010909@wxs.nl>

Hi Taco (since i think that you qualify for sorting this out -) and others,

Etex can have > 256 token registers. The following fails (bombs) on my machine (i cannot make atest file since it's part of a more complex piece of code) 

\toks260 has some content 
\toks262 is yet empty and never accessed 

failure : 

  \tokdeffed_262=\tokdeffed_260

failure (content copied, but later on bug and no content) : 

  \tokdeffed_262=\tokdeffed_260
  \tokdeffed_262=\tokdeffed_260

success (but empty destination register) 

  \toks262=\toks260 
  \tokdeffed_262=\tokdeffed_260

So, it looks like there is some problem with \toksdeffed things: \somename with meaning \toks262 is treated differently from the direct call and content is not copied; it may be related to the fact that those  >255 registers are implement differently (using main mem if i remember right) than the lower ones. 

The bug has a slightly random character (changing order/place). 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From dak at gnu.org  Fri Jul  9 19:04:51 2004
From: dak at gnu.org (David Kastrup)
Date: Fri Jul  9 19:06:00 2004
Subject: [tex-live] Re: [tex-implementors] bug in etex
In-Reply-To: <200407091700.i69H0HfM028550@hugh.cs.washington.edu>
References: <40EECAA3.3010909@wxs.nl>
	<200407091700.i69H0HfM028550@hugh.cs.washington.edu>
Message-ID: <x57jtdaz7w.fsf@lola.goethe.zz>

Pierre MacKay <mackay@cs.washington.edu> writes:

> I think, given the special nature of \toks registers
> that you would have to say
> 
> \tokdeffed_262={\the\tokdeffed_260}
> 
> so that what was placed in \tokdeffed_262 was the actual string
> contents of the other \toks register.  That is certainly what I do
> to concatenate the contents of \toks registers.

That maybe what you _attempt_ for _assigning_ \toks registers, but it
does not do the job without at least one \expandafter.

But token registers can also be assigned directly.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From P.Taylor at Rhul.Ac.Uk  Fri Jul  9 19:55:06 2004
From: P.Taylor at Rhul.Ac.Uk (Philip TAYLOR)
Date: Fri Jul  9 20:16:12 2004
Subject: [tex-live] Re: [tex-implementors] bug in etex
In-Reply-To: <40EECAA3.3010909@wxs.nl>
References: <40EECAA3.3010909@wxs.nl>
Message-ID: <40EEDBFA.5020002@Rhul.Ac.Uk>

Can't replicate the problem here, Hans : don't understand, though,
when you say you can't make a test file -- is that that simple
tests such as mine fail to replicate the bug ?  If so, what
are the necessary and sufficient conditions for its replication ?

** Phil.
--------
\toksdef \foo = 262
\toksdef \bar = 260
\toks 260 = {This is toks 260}
\foo = \bar
\showthe \foo
\showthe \bar
\end

->

F:\DATAFI~1\TeX>etex hh
This is e-TeXk, Version 3.141592-2.1 (Web2c 7.5.2)
  %&-line parsing enabled.
  (f:/Layered products/Tex/Live/texmf/web2c/cp8bit.tcx)
entering extended mode
(./hh.tex
 > This is toks 260.
l.5 \showthe \foo

?
 > This is toks 260.
l.6 \showthe \bar

?
  )
No pages of output.
Transcript written on hh.log.

F:\DATAFI~1\TeX>

Hans Hagen wrote:

> Hi Taco (since i think that you qualify for sorting this out -) and others,
> 
> Etex can have > 256 token registers. The following fails (bombs) on my 
> machine (i cannot make atest file since it's part of a more complex 
> piece of code)
> \toks260 has some content \toks262 is yet empty and never accessed
> failure :
>  \tokdeffed_262=\tokdeffed_260
> 
> failure (content copied, but later on bug and no content) :
>  \tokdeffed_262=\tokdeffed_260
>  \tokdeffed_262=\tokdeffed_260
> 
> success (but empty destination register)
>  \toks262=\toks260  \tokdeffed_262=\tokdeffed_260
> 
> So, it looks like there is some problem with \toksdeffed things: 
> \somename with meaning \toks262 is treated differently from the direct 
> call and content is not copied; it may be related to the fact that 
> those  >255 registers are implement differently (using main mem if i 
> remember right) than the lower ones.
> The bug has a slightly random character (changing order/place).
> Hans
> -----------------------------------------------------------------
>                                          Hans Hagen | PRAGMA ADE
>              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
>                                             | www.pragma-pod.nl
> -----------------------------------------------------------------
> 
> _______________________________________________
> tex-implementors mailing list
> postmaster@tug.org
> http://tug.org/mailman/listinfo/tex-implementors

From hartmut_henkel at gmx.de  Fri Jul  9 23:21:28 2004
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Fri Jul  9 23:24:05 2004
Subject: [tex-live] enctex-e.pdf crashes xpdf
Message-ID: <Pine.LNX.4.60.0407092318290.1724@hahepc1.hahe>

had a look to the freshly arrived enctex-e.pdf at tex-live. When i try
to get to the 2nd page, xpdf 3.0 exits with segfault. The pdf file seems
to be created by pdftex 0.13 IIRC.

Regards, Hartmut

From mackay at cs.washington.edu  Fri Jul  9 19:00:17 2004
From: mackay at cs.washington.edu (Pierre MacKay)
Date: Sat Jul 10 14:43:11 2004
Subject: [tex-live] Re: [tex-implementors] bug in etex
In-Reply-To: <40EECAA3.3010909@wxs.nl> (message from Hans Hagen on Fri, 09 Jul
	2004 18:41:07 +0200)
References: <40EECAA3.3010909@wxs.nl>
Message-ID: <200407091700.i69H0HfM028550@hugh.cs.washington.edu>

I think, given the special nature of \toks registers
that you would have to say

\tokdeffed_262={\the\tokdeffed_260}

so that what was placed in \tokdeffed_262 was the actual string
contents of the other \toks register.  That is certainly what I do
to concatenate the contents of \toks registers.

Pierre MacKay

****************************************************************
"George the first was always reckoned
Vile, but viler, George the second. . ."   
					  Walter Savage Landor

****************************************************************

From mackay at cs.washington.edu  Fri Jul  9 22:14:58 2004
From: mackay at cs.washington.edu (Pierre MacKay)
Date: Sat Jul 10 14:43:14 2004
Subject: [tex-live] Re: [tex-implementors] bug in etex
In-Reply-To: <x57jtdaz7w.fsf@lola.goethe.zz> (message from David Kastrup on 09
	Jul 2004 19:04:51 +0200)
References: <40EECAA3.3010909@wxs.nl>
	<200407091700.i69H0HfM028550@hugh.cs.washington.edu>
	<x57jtdaz7w.fsf@lola.goethe.zz>
Message-ID: <200407092014.i69KEw13001895@hugh.cs.washington.edu>

Sorry. Careless of me, it does need the \expandafter.

Pierre MacKay

From hartmut_henkel at gmx.de  Sat Jul 10 20:13:30 2004
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sat Jul 10 20:21:38 2004
Subject: [tex-live] enctex-e.pdf crashes xpdf
In-Reply-To: <Pine.LNX.4.60.0407092318290.1724@hahepc1.hahe>
References: <Pine.LNX.4.60.0407092318290.1724@hahepc1.hahe>
Message-ID: <Pine.LNX.4.60.0407102009480.1295@hahepc1.hahe>

sorry, i meant the doc/enctex/base/encdoc-e.pdf crashes xpdf, when
switching to page 2. And also the encdoc.pdf lets xpdf end with
segfault. Acroread can handle both files. After recompiling with recent
pdftex it's ok also for xpdf.

Regards, Hartmut

From dak at gnu.org  Sun Jul 11 00:26:45 2004
From: dak at gnu.org (David Kastrup)
Date: Sun Jul 11 00:27:55 2004
Subject: [tex-live] Re: [tex-implementors] bug in etex
In-Reply-To: <200407091700.i69H0HfM028550@hugh.cs.washington.edu>
References: <40EECAA3.3010909@wxs.nl>
	<200407091700.i69H0HfM028550@hugh.cs.washington.edu>
Message-ID: <x5n027fqhm.fsf@lola.goethe.zz>

Pierre MacKay <mackay@cs.washington.edu> writes:

> I think, given the special nature of \toks registers
> that you would have to say
> 
> \tokdeffed_262={\the\tokdeffed_260}
> 
> so that what was placed in \tokdeffed_262 was the actual string
> contents of the other \toks register.  That is certainly what I do
> to concatenate the contents of \toks registers.

>From the TeXbook:

<variable assignment>\is<integer variable><equals><number>
  \alt<dimen variable><equals><dimen>
  \alt<glue variable><equals><glue>
  \alt<muglue variable><equals><muglue>
  \alt<token variable><equals><general text>
  \alt<token variable><equals><filler><token variable>

So there you have it, straight from the lion's mouth.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From wl at gnu.org  Sat Jul 10 19:31:09 2004
From: wl at gnu.org (Werner LEMBERG)
Date: Sun Jul 11 07:40:14 2004
Subject: [tex-live] utf8 input encoding problem
Message-ID: <20040710.193109.75754534.wl@gnu.org>


Is the LaTeX team aware that by choosing `utf8' as an input encoding
name, many documents which use Dominique Unruh's utf8.def file no
longer compile?  Why hasn't been chosen a different name, say,
`utf-8'?

I consider this a serious compatibility problem which should be fixed
ASAP, deserving an intermediate LaTeX release.


    Werner

From karl at freefriends.org  Sun Jul 11 17:48:44 2004
From: karl at freefriends.org (Karl Berry)
Date: Sun Jul 11 17:48:45 2004
Subject: [tex-live] kpsewhich --format=texmfscripts for texexec
Message-ID: <200407111548.i6BFmin14092@tug.org>

Hans, I'm sorry to say that the texexec currently checked into TL fails
at startup, because it can't find texexec.ini or .rme.  This is because
texexec.pl says:

my $IniPath = `$kpsewhich --format="scripts" -progname=context texexec.$suffix` ;

It should be --format=texmfscripts.  Sorry.
(I didn't look for other occurrences.)

Not sure if other programs might be in the same boat, hence sending to
the list.

Best,
karl


P.S. Also, texexec.rme starts with the statement "this is texexec.ini",
which is rather confusing :).

From sebastian.rahtz at computing-services.oxford.ac.uk  Sun Jul 11 18:07:10 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Sun Jul 11 18:08:32 2004
Subject: [tex-live] kpsewhich --format=texmfscripts for texexec
In-Reply-To: <200407111548.i6BFmin14092@tug.org>
References: <200407111548.i6BFmin14092@tug.org>
Message-ID: <40F165AE.90209@computing-services.oxford.ac.uk>

Karl Berry wrote:

>Hans, I'm sorry to say that the texexec currently checked into TL fails
>at startup, because it can't find texexec.ini or .rme.  This is because
>texexec.pl says:
>
>my $IniPath = `$kpsewhich --format="scripts" -progname=context texexec.$suffix` ;
>
>  
>
fixed in TL as she stands, but only until the next ConTeXt update.

-- 
Sebastian Rahtz      Information Manager
Oxford University Computing Services
13 Banbury Road, Oxford OX2 6NN. Phone +44 1865 283431

From te at dbs.uni-hannover.de  Sun Jul 11 18:41:16 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Sun Jul 11 18:42:27 2004
Subject: [tex-live] kpsewhich --format=texmfscripts for texexec
In-Reply-To: <40F165AE.90209@computing-services.oxford.ac.uk>
References: <200407111548.i6BFmin14092@tug.org>
	<40F165AE.90209@computing-services.oxford.ac.uk>
Message-ID: <20040711164116.GA1483@dbs.uni-hannover.de>

On Sun, Jul 11, 2004 at 05:07:10PM +0100, Sebastian Rahtz wrote:
> >my $IniPath = `$kpsewhich --format="scripts" -progname=context 
> >texexec.$suffix` ;

"beta = better" as usual :-) The current beta release of context gets it
right. At least, almost...:

$ find scripts/context -type f | xargs grep "kpsewhich.*format.*script"
scripts/context/perl/texexec.pl:    my $IniPath = `$kpsewhich --format="texmfscripts" -progname=context texexec.$suffix` ;
scripts/context/perl/texshow.pl:    $cont_pm_path = `kpsewhich --format="texmfscripts" --progname=context cont_mis.pm` ;
scripts/context/ruby/texmfstart.rb:                fullname = `kpsewhich -progname=#{program} -format=scripts #{filename}.#{suffix}`.chomp
scripts/context/ruby/textools.rb:                used = `kpsewhich -format=texmfscripts #{filename}`.chomp
scripts/context/ruby/textools.rb:                used = `kpsewhich -progname=context -format=texmfscripts #{filename}`.chomp

So, only texmfstart.rb still uses
  -format=scripts

Thomas

From preining at logic.at  Mon Jul 12 01:35:26 2004
From: preining at logic.at (Norbert Preining)
Date: Mon Jul 12 01:36:34 2004
Subject: [tex-live] beamer theme files gone?
Message-ID: <20040711233526.GC22259@gamma.logic.tuwien.ac.at>

HI Sebastian!

I found that all the beamertheme* from the themes/ subdir are missing in
TeXlive.

I have put them back in for now. If this is not intended, please delete
again. But I think without them beamer is useless.

If there is more to do (fixing ls-R files, or tpm files or whatever)
please tell me and I can do it.

Best wishes

Norbert

-------------------------------------------------------------------------------
Norbert Preining <preining AT logic DOT at>         Technische Universit?t Wien
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
KENT (adj.)
Politely determined not to help despite a violent urge to the
contrary. Kent expressions are seen on the faces of people who are
good at something watching someone else who can't do it at all.
			--- Douglas Adams, The Meaning of Liff

From staw at gust.org.pl  Mon Jul 12 04:31:32 2004
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Mon Jul 12 04:30:07 2004
Subject: [tex-live] enctex etc.
Message-ID: <Pine.LNX.4.44.0407120410550.27856-100000@re86.internetdsl.tpnet.pl>

After some discussion with Karl, Petr and Thomas, I moved finally
enctex stuff from tex/enctex to tex/generic/enctex and also 
corrected csplain package.
As usual Thomas provided the clearest argument (many thanks for that):

>The macro files themselves don't make a new format. They can be
>used together with other macro files. The "-enc" switch has more the
>characteristic to define a new engine rather than a new format.  And,
>we have dropped the engine-specific top-levels (mltex, etex, ...).

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl


From pragma at wxs.nl  Mon Jul 12 09:58:03 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Jul 12 09:59:31 2004
Subject: [tex-live] Re: [tex-implementors] bug in etex
In-Reply-To: <200407091700.i69H0HfM028550@hugh.cs.washington.edu>
References: <40EECAA3.3010909@wxs.nl>
	<200407091700.i69H0HfM028550@hugh.cs.washington.edu>
Message-ID: <40F2448B.5040006@wxs.nl>

Pierre MacKay wrote:

>I think, given the special nature of \toks registers
>that you would have to say
>
>\tokdeffed_262={\the\tokdeffed_260}
>  
>
hm, sounds strange to me since then changing the content of 260 would influence 262, unless you mean: 

\tokdeffed_262=\expandafter{\the\tokdeffed_260}

assigning toks to toks works will in other cases 

Hans 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Mon Jul 12 10:00:54 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Jul 12 10:02:13 2004
Subject: [tex-live] Re: [tex-implementors] bug in etex
In-Reply-To: <40EEDBFA.5020002@Rhul.Ac.Uk>
References: <40EECAA3.3010909@wxs.nl> <40EEDBFA.5020002@Rhul.Ac.Uk>
Message-ID: <40F24536.5050704@wxs.nl>

Philip TAYLOR wrote:

> Can't replicate the problem here, Hans : don't understand, though,
> when you say you can't make a test file -- is that that simple
> tests such as mine fail to replicate the bug ?  If so, what
> are the necessary and sufficient conditions for its replication ?
>
> ** Phil.
> --------
> \toksdef \foo = 262
> \toksdef \bar = 260
> \toks 260 = {This is toks 260}
> \foo = \bar
> \showthe \foo
> \showthe \bar
> \end
>
The problem occurs in context where i cross the 255 barier (so lots of 
token registers are allocated) as well as much memory (given the 
specific task); since registers > 255 are implemente using main mem (or 
at least different than those <256) i think that there  is a problem in 
the mem allocation (or copy) area

Hans

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Mon Jul 12 10:08:55 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Jul 12 10:10:13 2004
Subject: [tex-live] kpsewhich --format=texmfscripts for texexec
In-Reply-To: <20040711164116.GA1483@dbs.uni-hannover.de>
References: <200407111548.i6BFmin14092@tug.org>
	<40F165AE.90209@computing-services.oxford.ac.uk>
	<20040711164116.GA1483@dbs.uni-hannover.de>
Message-ID: <40F24717.9040903@wxs.nl>

Thomas Esser wrote:

>So, only texmfstart.rb still uses
>  -format=scripts
>  
>
ah, thanks, fixed

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From sebastian.rahtz at computing-services.oxford.ac.uk  Mon Jul 12 10:21:16 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Mon Jul 12 10:25:16 2004
Subject: [tex-live] beamer theme files gone?
In-Reply-To: <20040711233526.GC22259@gamma.logic.tuwien.ac.at>
References: <20040711233526.GC22259@gamma.logic.tuwien.ac.at>
Message-ID: <20040712082116.GB19680@herald.ox.ac.uk>

> 
> I found that all the beamertheme* from the themes/ subdir are missing in
> TeXlive.
> 
> I have put them back in for now. If this is not intended, please delete
> again. But I think without them beamer is useless.

thats very odd. I did a big cleanup on beamer, and thought I had it
fixed. thanks for looking. I'll watch out for it at the
next update.

> If there is more to do (fixing ls-R files, or tpm files or whatever)
> please tell me and I can do it.

that happens by magic anyway, so don't worry

Sebastian

From taco at elvenkind.com  Tue Jul 13 14:53:59 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue Jul 13 14:55:08 2004
Subject: [tex-live] Re: bug in etex
In-Reply-To: <40EECAA3.3010909@wxs.nl>
References: <40EECAA3.3010909@wxs.nl>
Message-ID: <20040713145359.3eb46258@glenlivet.elvenkind.com>


Hi all (especially Peter),

> Hi Taco (since i think that you qualify for sorting this out -) and others,
> 
> Etex can have > 256 token registers. The following fails (bombs) on my machine 
> (i cannot make atest file since it's part of a more complex piece of code) 
> ....

I've been working on this for quite a few hours now, and there really is a bug
somewhere in the (web2c version of) the etex code. The following extended 
mode plain input file causes both of pdfetex and etex (Web2c 7.5.3 and 7.4.5) 
to quit with SIGSEGV under linux:

------
  \toksdef\whatevertoks = 266
  \toksdef\extratoks = 267
  \whatevertoks={junk}
  \everypar{\extratoks=\whatevertoks}
  \immediate\write16{t={\the\toks265}}
  some paragraph\par
  \bye
-------

It seems that the '\the' command that accesses a previously undefined token 
register is what is causing the problem later on; the SIGSEGV happens when
TeX tries to access the RHS of the \extratoks=\whatevertoks assignment.

------
  (gdb) r
  Starting program: /home/taco/perforce/Build/source.development/Work/TeX/texk/
   web2c/tests/texmf/bin/pdfetex \&plain dumptest
  This is pdfeTeX, Version 3.141592-1.20a-rc4-2.1 (Web2C 7.5.3)
   \write18 enabled.
  output format initialized to DVI
  entering extended mode
  (./dumptest.tex
  t={}

  Program received signal SIGSEGV, Segmentation fault.
  0x0805048f in prefixedcommand () at pdfetexini.c:2903
  2903            else q = mem [curptr + 1 ].hh .v.RH ;
  (gdb) bt
  #0  0x0805048f in prefixedcommand () at pdfetexini.c:2903
  #1  0x08095c46 in maincontrol () at pdfetex3.c:6560
  #2  0x080576a4 in mainbody () at pdfetexini.c:5592
  #3  0x0809a08d in main (ac=3, av=0xbffff4b4) at pdfetexextra.c:327
  (gdb) p curptr
  $1 = -268435455
-----

I hope Peter can sort this out quicker than I can. The line in the 
stack trace refers to this section of the web, the marked line {HERE!}:

------
@ @<If the right-hand side is a token parameter...@>=
if (cur_cmd=toks_register)or(cur_cmd=assign_toks) then
  begin if cur_cmd=toks_register then
    if cur_chr=mem_bot then
      begin scan_register_num;
      if cur_val<256 then q:=equiv(toks_base+cur_val)
      else  begin find_sa_element(tok_val,cur_val,false);
        if cur_ptr=null then q:=null
        else q:=sa_ptr(cur_ptr);
        end;
      end
    else q:=sa_ptr(cur_ptr)  {HERE! }
  else q:=equiv(cur_chr);
  if q=null then sa_define(p,null)(p,undefined_cs,null)
  else  begin add_token_ref(q); sa_define(p,q)(p,call,q);
    end;
  goto done;
  end
------
And 
------
  curptr (in C)  == cur_ptr (in pWeb) 
  -268435455 (in C) == null (in pWeb)
-----

-- 
groeten,

Taco

From P.Taylor at Rhul.Ac.Uk  Tue Jul 13 16:21:08 2004
From: P.Taylor at Rhul.Ac.Uk (Philip TAYLOR)
Date: Tue Jul 13 16:23:55 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <20040713145359.3eb46258@glenlivet.elvenkind.com>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
Message-ID: <40F3EFD4.4030602@Rhul.Ac.Uk>

If I can find my Pascal reference implementation,
I'll test Taco's code there.

** Phil.
--------
Taco Hoekwater wrote:

> Hi all (especially Peter),
> 
> 
>>Hi Taco (since i think that you qualify for sorting this out -) and others,
>>
>>Etex can have > 256 token registers. The following fails (bombs) on my machine 
>>(i cannot make atest file since it's part of a more complex piece of code) 
>>....
> 
> 
> I've been working on this for quite a few hours now, and there really is a bug
> somewhere in the (web2c version of) the etex code. The following extended 
> mode plain input file causes both of pdfetex and etex (Web2c 7.5.3 and 7.4.5) 
> to quit with SIGSEGV under linux:
> 
> ------
>   \toksdef\whatevertoks = 266
>   \toksdef\extratoks = 267
>   \whatevertoks={junk}
>   \everypar{\extratoks=\whatevertoks}
>   \immediate\write16{t={\the\toks265}}
>   some paragraph\par
>   \bye
> -------
> 
> It seems that the '\the' command that accesses a previously undefined token 
> register is what is causing the problem later on; the SIGSEGV happens when
> TeX tries to access the RHS of the \extratoks=\whatevertoks assignment.
> 
> ------
>   (gdb) r
>   Starting program: /home/taco/perforce/Build/source.development/Work/TeX/texk/
>    web2c/tests/texmf/bin/pdfetex \&plain dumptest
>   This is pdfeTeX, Version 3.141592-1.20a-rc4-2.1 (Web2C 7.5.3)
>    \write18 enabled.
>   output format initialized to DVI
>   entering extended mode
>   (./dumptest.tex
>   t={}
> 
>   Program received signal SIGSEGV, Segmentation fault.
>   0x0805048f in prefixedcommand () at pdfetexini.c:2903
>   2903            else q = mem [curptr + 1 ].hh .v.RH ;
>   (gdb) bt
>   #0  0x0805048f in prefixedcommand () at pdfetexini.c:2903
>   #1  0x08095c46 in maincontrol () at pdfetex3.c:6560
>   #2  0x080576a4 in mainbody () at pdfetexini.c:5592
>   #3  0x0809a08d in main (ac=3, av=0xbffff4b4) at pdfetexextra.c:327
>   (gdb) p curptr
>   $1 = -268435455
> -----
> 
> I hope Peter can sort this out quicker than I can. The line in the 
> stack trace refers to this section of the web, the marked line {HERE!}:
> 
> ------
> @ @<If the right-hand side is a token parameter...@>=
> if (cur_cmd=toks_register)or(cur_cmd=assign_toks) then
>   begin if cur_cmd=toks_register then
>     if cur_chr=mem_bot then
>       begin scan_register_num;
>       if cur_val<256 then q:=equiv(toks_base+cur_val)
>       else  begin find_sa_element(tok_val,cur_val,false);
>         if cur_ptr=null then q:=null
>         else q:=sa_ptr(cur_ptr);
>         end;
>       end
>     else q:=sa_ptr(cur_ptr)  {HERE! }
>   else q:=equiv(cur_chr);
>   if q=null then sa_define(p,null)(p,undefined_cs,null)
>   else  begin add_token_ref(q); sa_define(p,q)(p,call,q);
>     end;
>   goto done;
>   end
> ------
> And 
> ------
>   curptr (in C)  == cur_ptr (in pWeb) 
>   -268435455 (in C) == null (in pWeb)
> -----
> 

From pragma at wxs.nl  Tue Jul 13 17:13:15 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Tue Jul 13 17:14:41 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
Message-ID: <40F3FC0B.6060905@wxs.nl>

Peter Breitenlohner wrote:

> On Tue, 13 Jul 2004, Taco Hoekwater wrote:
>
>> I've been working on this for quite a few hours now, and there really 
>> is a bug
>> somewhere in the (web2c version of) the etex code. The following 
>> extended
>> mode plain input file causes both of pdfetex and etex (Web2c 7.5.3 
>> and 7.4.5)
>> to quit with SIGSEGV under linux:
>>
>> ------
>>  \toksdef\whatevertoks = 266
>>  \toksdef\extratoks = 267
>>  \whatevertoks={junk}
>>  \everypar{\extratoks=\whatevertoks}
>>  \immediate\write16{t={\the\toks265}}
>>  some paragraph\par
>>  \bye
>> -------
>>
>> It seems that the '\the' command that accesses a previously undefined 
>> token
>> register is what is causing the problem later on; the SIGSEGV happens 
>> when
>> TeX tries to access the RHS of the \extratoks=\whatevertoks assignment.
>
>
> Hi Taco,
>
> I have just reproduced the SIGSEGV with
>     "This is e-TeX, Version 3.14159-2.1 (Web2C 7.3.1)"
> (yes we still use this somewhat oldish version).
> I'll have to look into the code to find out what goes wrong.
>
> --------------------------
>
> Could any one test this on a non-linux Unix system and report the 
> outcome?

In the process of uncovering the bug taco worked on unix and i tested on windows; both old and new versions of pdfetex show the problem 

in some cases there is no segfault but registers end up empty (null pointer of so) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From P.Taylor at Rhul.Ac.Uk  Tue Jul 13 17:16:56 2004
From: P.Taylor at Rhul.Ac.Uk (Philip TAYLOR)
Date: Tue Jul 13 17:19:42 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
References: <40EECAA3.3010909@wxs.nl>	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
Message-ID: <40F3FCE8.2060406@Rhul.Ac.Uk>



Peter Breitenlohner wrote:


 > Could any one test this on a non-linux Unix system and report the outcome?

Trying to rebuild now, but this is not helped by CTAN having
dropped (silently?) the KNUTH directory of the distribution ...

** Phil.

From pragma at wxs.nl  Tue Jul 13 17:20:16 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Tue Jul 13 17:21:27 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <CD7AA515-D4DC-11D8-B945-000393BD674C@sil.org>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<CD7AA515-D4DC-11D8-B945-000393BD674C@sil.org>
Message-ID: <40F3FDB0.7090805@wxs.nl>

Jonathan Kew wrote:

>
> On 13 Jul 2004, at 3:29 pm, Peter Breitenlohner wrote:
>
>> I have just reproduced the SIGSEGV with
>>     "This is e-TeX, Version 3.14159-2.1 (Web2C 7.3.1)"
>> (yes we still use this somewhat oldish version).
>>
>
> This suggests that my note re XeTeX (based on 3.14159-2.1) *not* 
> failing on this test is probably irrelevant; most likely something 
> else is masking the problem in that case.

normally the bug goes unnoticed (that is, the registers end up empty) but taco figured out a way to trigger the underlying (mem) problem; 

Hans 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From P.Taylor at Rhul.Ac.Uk  Tue Jul 13 18:11:23 2004
From: P.Taylor at Rhul.Ac.Uk (Philip TAYLOR)
Date: Tue Jul 13 18:14:18 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <20040713145359.3eb46258@glenlivet.elvenkind.com>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
Message-ID: <40F409AB.1020408@Rhul.Ac.Uk>



Taco Hoekwater wrote:

>   \toksdef\whatevertoks = 266
>   \toksdef\extratoks = 267
>   \whatevertoks={junk}
>   \everypar{\extratoks=\whatevertoks}
>   \immediate\write16{t={\the\toks265}}
>   some paragraph\par
>   \bye
> -------
> 
> It seems that the '\the' command that accesses a previously undefined token 
> register is what is causing the problem later on; the SIGSEGV happens when
> TeX tries to access the RHS of the \extratoks=\whatevertoks assignment.

Using the VMS Pascal reference implementation :

ALPHA9::Chaa006 : type taco.tex

   \toksdef \whatevertoks = 266
   \toksdef \extratoks = 267
   \whatevertoks = {junk}
   \everypar {\extratoks = \whatevertoks}
   \immediate \write 16 {t = {\the \toks 265}}
   some paragraph \par
   \bye

ALPHA9::Chaa006 : etex taco

This is e-TeX, Version 3.14159-2.0;fMar06 [PD VMS 3.6f] (preloaded format=etex 4
.7.13)
entering extended mode
(CHAA:[006.E-TEX.VMS]TACO.TEX;1
t = {}
[1] )
Output written on CHAA:[006.E-TEX.VMS]TACO.DVI;1 (1 page, 224 bytes).
Transcript written on CHAA:[006.E-TEX.VMS]TACO.LIS;1.

ALPHA9::Chaa006 :

** Phil.

From rainer.schoepf at proteosys.com  Tue Jul 13 17:51:50 2004
From: rainer.schoepf at proteosys.com (=?ISO-8859-1?Q?Rainer_Sch=F6pf?=)
Date: Tue Jul 13 18:17:20 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <40F3FCE8.2060406@Rhul.Ac.Uk>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<40F3FCE8.2060406@Rhul.Ac.Uk>
Message-ID: <Pine.LNX.4.58.0407131750590.17565@lucy.proteosys>

On Tue, 13 Jul 2004, Philip TAYLOR wrote:

 > Trying to rebuild now, but this is not helped by CTAN having
 > dropped (silently?) the KNUTH directory of the distribution ...

Or maybe you're not looking in the right place...

It's in systems/knuth, as it has been for some time.

 Rainer

From olaf at infovore.xs4all.nl  Tue Jul 13 18:15:38 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Tue Jul 13 18:19:00 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <40F3FCE8.2060406@Rhul.Ac.Uk> (Philip TAYLOR's message of "Tue,
	13 Jul 2004 16:16:56 +0100")
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<40F3FCE8.2060406@Rhul.Ac.Uk>
Message-ID: <871xjfhoid.fsf@infovore.xs4all.nl>

Philip TAYLOR writes:
> Peter Breitenlohner wrote:

>> Could any one test this on a non-linux Unix system and report the outcome?

> Trying to rebuild now, but this is not helped by CTAN having
> dropped (silently?) the KNUTH directory of the distribution ...

/tex-archive/systems/knuth

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From dak at gnu.org  Tue Jul 13 18:40:51 2004
From: dak at gnu.org (David Kastrup)
Date: Tue Jul 13 18:42:02 2004
Subject: [tex-live] Re: bug in etex
In-Reply-To: <20040713145359.3eb46258@glenlivet.elvenkind.com>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
Message-ID: <x5eknf97xo.fsf@lola.goethe.zz>

Taco Hoekwater <taco@elvenkind.com> writes:

> ------
> @ @<If the right-hand side is a token parameter...@>=
> if (cur_cmd=toks_register)or(cur_cmd=assign_toks) then
>   begin if cur_cmd=toks_register then
>     if cur_chr=mem_bot then
>       begin scan_register_num;
>       if cur_val<256 then q:=equiv(toks_base+cur_val)
>       else  begin find_sa_element(tok_val,cur_val,false);
>         if cur_ptr=null then q:=null
>         else q:=sa_ptr(cur_ptr);
>         end;
>       end
>     else q:=sa_ptr(cur_ptr)  {HERE! }

Unless I am very much mistaken, this `else' belongs to `if
cur_chr=mem_bot', and from the surface look of the code I don't see
why cur_ptr should have any sensible value at that point.  Where would
it come from?  Or should the comparison be `if cur_ptr=mem_bot' and
the cur_ptr is set some time before?  It would appear more sensible if
some _pointer_ would be compared here to something called `mem_bot'.

>   else q:=equiv(cur_chr);

And this `else' belongs to `if cur_cmd=toks_register'.  Hm, looks
like q get set in every path after all.

Ok, just some musings.  Maybe it will give somebody with more of a
clue an idea what happens here.

>   if q=null then sa_define(p,null)(p,undefined_cs,null)
>   else  begin add_token_ref(q); sa_define(p,q)(p,call,q);
>     end;
>   goto done;
>   end

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From P.Taylor at Rhul.Ac.Uk  Tue Jul 13 19:03:36 2004
From: P.Taylor at Rhul.Ac.Uk (Philip TAYLOR)
Date: Tue Jul 13 19:06:25 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
References: <40EECAA3.3010909@wxs.nl>	<20040713145359.3eb46258@glenlivet.elvenkind.com>	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
Message-ID: <40F415E8.4050408@Rhul.Ac.Uk>



Peter Breitenlohner wrote:

> On Tue, 13 Jul 2004, Peter Breitenlohner wrote:
> 
>> ..........
>> Could any one test this on a non-linux Unix system and report the 
>> outcome?
> 
> 
> Thanks to all the testers; here a short summary:
> 
> Petr Sojka, Martin Schroeder, and Apostolos Syropoulos reported a
> Segmentation Fault (or Bus Error) on different SunOS and IRIX systems,
> all using (different versions of) Web2C.
> 
> Phil Taylor reported no such problem with the VMS Pascal implementation.

Just by way of clarification, here are the command-line qualifiers
for the Pascal incantation :

	"/noopt /check=all /float=g_float /list /debug"

Of these, "/Check=all" is significant (all array accesses checked).

** Phil.

From olaf at infovore.xs4all.nl  Tue Jul 13 19:29:58 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Tue Jul 13 19:55:46 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <40F415E8.4050408@Rhul.Ac.Uk> (Philip TAYLOR's message of "Tue,
	13 Jul 2004 18:03:36 +0100")
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk>
Message-ID: <87wu17g6i1.fsf@infovore.xs4all.nl>

Philip TAYLOR writes:
> Peter Breitenlohner wrote:
>> On Tue, 13 Jul 2004, Peter Breitenlohner wrote:

>>> ..........
>>> Could any one test this on a non-linux Unix system and report the
>>> outcome?

>> Thanks to all the testers; here a short summary:
>> Petr Sojka, Martin Schroeder, and Apostolos Syropoulos reported a
>> Segmentation Fault (or Bus Error) on different SunOS and IRIX systems,
>> all using (different versions of) Web2C.
>> Phil Taylor reported no such problem with the VMS Pascal
>> implementation.

> Just by way of clarification, here are the command-line qualifiers
> for the Pascal incantation :

> 	"/noopt /check=all /float=g_float /list /debug"

> Of these, "/Check=all" is significant (all array accesses checked).

What is null in etex in the Pascal version?  In web2c it is defined as
min_halfword, which is a large negative number (-@"FFFFFFF).  However,
in the original tex.web, min_halfword equals 0.  So the reason the
Pascal version doesn't trap may be that an invalid (null) cur_ptr,
is still a valid array index, in contrast to web2c.

The web2c sources contain a small change file etex.fix which contains
two fixes for what (as far as we've been able to determine) are
definitely bugs in etex.  One of these is a confusion of null and 0
involving cur_ptr.

% Bugfixes for etex.ch version 2.1
% Public Domain.

@x l.1163
    begin cur_val:=int_val;
@y
    begin cur_val_level:=int_val;
@z

@x l.5503
  if cur_ptr<>0 then
@y
  if cur_ptr<>null then
@z

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From kakuto at fsci.fuk.kindai.ac.jp  Wed Jul 14 03:15:07 2004
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Wed Jul 14 03:17:09 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: Your message of "Tue, 13 Jul 2004 17:13:15 +0200"
References: <40F3FC0B.6060905@wxs.nl>
Message-ID: <200407140115.i6E1F8pO016983@jupiter.fsci.fuk.kindai.ac.jp>

> > Could any one test this on a non-linux Unix system and report the 
> > outcome?
> 
> In the process of uncovering the bug taco worked on unix and i tested on windows; both old and new versions of pdfetex show the problem 
> 
> in some cases there is no segfault but registers end up empty (null pointer of so) 
> 
> Hans 

etex, pdfetex, pdfxtex were ng.
aleph was ok. (Windows, Web2C-7.5.3).

Best regards
Akira

From te at dbs.uni-hannover.de  Wed Jul 14 05:23:03 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Wed Jul 14 05:24:22 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
Message-ID: <20040714032303.GD9641@dbs.uni-hannover.de>

Please, have a look at the forwarded mail. Paul Vojta shows a problem
with the "all characters printable" setting.  When replying, please
consider that Paul did not follow the discussion in may/june on the
texlive list about this neverending story...

In a follow-up, he wrote:
    Never mind ... it's being set in fmtutil.cnf.
    I hope Thomas seriously considers taking it out.

So, despite the fact that there was silence on *this list* about this
for a few weeks, I fear that we have to open this problem for discussion
again.

Thomas

----- Forwarded message from Paul Vojta <vojta@math.berkeley.edu> -----

X-Authentication-Warning: leo.dbs.uni-hannover.de: mdom set sender to owner-tetex-pretest@informatik.uni-hannover.de using -f
Date: Mon, 12 Jul 2004 17:57:48 -0700
From: Paul Vojta <vojta@math.berkeley.edu>
To: tetex-pretest@dbs.uni-hannover.de
Cc: Olaf Weber <olaf@infovore.xs4all.nl>
Subject: \delta in overfull \hboxes screws up xterm
User-Agent: Mutt/1.4i
X-Scanned-By: MIMEDefang 2.43
X-Scanned-By: milter-sender/0.58.805 (mail.Math.Berkeley.EDU [169.229.58.57]); Mon, 12 Jul 2004 17:57:48 -0700
Precedence: bulk
X-UIDL: %)h!!dUL"!iF\"!_S)"!
X-Spam-Status: No, hits=0.000000 required=0.900000

Folks:

When you have $\delta$ in the text produced by an overfull \hbox, it leaves
xterm in some funny mode in which most of the characters are graphics
things of some sort.

This is with teTeX-beta-2.96.4.20040627 (TeX, Version 3.141592 (Web2C 7.5.3)).

Here's a sample plain tex file:

	\showhyphens{$\delta$}
	\bye

My environment contains (among other things):

	LANG=C
	LC_CTYPE=en_US.ISO-8859-1

-- 
Paul Vojta, vojta@math.berkeley.edu

----- End forwarded message -----

From taco at elvenkind.com  Wed Jul 14 09:12:50 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed Jul 14 09:14:00 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <20040714032303.GD9641@dbs.uni-hannover.de>
References: <20040714032303.GD9641@dbs.uni-hannover.de>
Message-ID: <20040714091250.0831e927@glenlivet.elvenkind.com>

On Wed, 14 Jul 2004 05:23:03 +0200, Thomas wrote:

> Please, have a look at the forwarded mail. Paul Vojta shows a problem
> with the "all characters printable" setting.  When replying, please
> consider that Paul did not follow the discussion in may/june on the
> texlive list about this neverending story...

Neither was I, and the archive for TeXlive seems to be broken so I cannot
read back the old discussion. But luckily that doesn't stop me from having
a say about it :)

TeX's behaviour in this situation is, IMO, broken, and I would personally
prefer fixing TeX, instead of disabling 8bit :

The user *did not* input the character corresponding to ^^J, but the 6 characters 
comprising the string "\delta". The fact that someone \mathcode-ed the character 
^^J to mean the same thing as the \mathchardef named \delta should not have 
an effect on the printing of the control sequence "\delta". 



-- 
groeten,

Taco

From vvv at vsu.ru  Wed Jul 14 09:38:19 2004
From: vvv at vsu.ru (Vladimir Volovich)
Date: Wed Jul 14 09:40:48 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <20040714091250.0831e927@glenlivet.elvenkind.com> (Taco
	Hoekwater's message of "Wed, 14 Jul 2004 09:12:50 +0200")
References: <20040714032303.GD9641@dbs.uni-hannover.de>
	<20040714091250.0831e927@glenlivet.elvenkind.com>
Message-ID: <87acy3qbro.fsf@video.uic.vsu.ru>

"TH" == Taco Hoekwater writes:

 >> Please, have a look at the forwarded mail. Paul Vojta shows a
 >> problem with the "all characters printable" setting.  When
 >> replying, please consider that Paul did not follow the discussion
 >> in may/june on the texlive list about this neverending story...

 TH> Neither was I, and the archive for TeXlive seems to be broken so
 TH> I cannot read back the old discussion. But luckily that doesn't
 TH> stop me from having a say about it :)

 TH> TeX's behaviour in this situation is, IMO, broken, and I would
 TH> personally prefer fixing TeX, instead of disabling 8bit :

 TH> The user *did not* input the character corresponding to ^^J, but
 TH> the 6 characters comprising the string "\delta". The fact that
 TH> someone \mathcode-ed the character ^^J to mean the same thing as
 TH> the \mathchardef named \delta should not have an effect on the
 TH> printing of the control sequence "\delta".

Or at least, TeX's output to *terminal* should honor the locale's
isprint() properties. All other output (to log files, \write,
\special, etc) MAY use 8-bit, if one wants to, but there's no reason
to insist on "pure 8-bit" for output to *terminal*.

Best,
v.

From dak at gnu.org  Wed Jul 14 10:29:15 2004
From: dak at gnu.org (David Kastrup)
Date: Wed Jul 14 10:30:23 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <20040714091250.0831e927@glenlivet.elvenkind.com>
References: <20040714032303.GD9641@dbs.uni-hannover.de>
	<20040714091250.0831e927@glenlivet.elvenkind.com>
Message-ID: <x5hdsbhu04.fsf@lola.goethe.zz>

Taco Hoekwater <taco@elvenkind.com> writes:

> On Wed, 14 Jul 2004 05:23:03 +0200, Thomas wrote:
> 
> > Please, have a look at the forwarded mail. Paul Vojta shows a problem
> > with the "all characters printable" setting.  When replying, please
> > consider that Paul did not follow the discussion in may/june on the
> > texlive list about this neverending story...
> 
> Neither was I, and the archive for TeXlive seems to be broken so I cannot
> read back the old discussion. But luckily that doesn't stop me from having
> a say about it :)
> 
> TeX's behaviour in this situation is, IMO, broken, and I would personally
> prefer fixing TeX, instead of disabling 8bit :
> 
> The user *did not* input the character corresponding to ^^J, but the
> 6 characters comprising the string "\delta". The fact that someone
> \mathcode-ed the character ^^J to mean the same thing as the
> \mathchardef named \delta should not have an effect on the printing
> of the control sequence "\delta".

There is no such control sequence.  This is the output from an
overfull hbox message.  It contains only nameless characters.
Whether they were produced by \mathcode, \char, \delta, whatever is
not known anymore.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From dak at gnu.org  Wed Jul 14 10:34:32 2004
From: dak at gnu.org (David Kastrup)
Date: Wed Jul 14 10:35:39 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <87acy3qbro.fsf@video.uic.vsu.ru>
References: <20040714032303.GD9641@dbs.uni-hannover.de>
	<20040714091250.0831e927@glenlivet.elvenkind.com>
	<87acy3qbro.fsf@video.uic.vsu.ru>
Message-ID: <x5d62zhtrb.fsf@lola.goethe.zz>

Vladimir Volovich <vvv@vsu.ru> writes:

> Or at least, TeX's output to *terminal* should honor the locale's
> isprint() properties. All other output (to log files, \write,
> \special, etc) MAY use 8-bit, if one wants to, but there's no reason
> to insist on "pure 8-bit" for output to *terminal*.

You mean, like AUCTeX which correlates the output of error messages on
the terminal with input lines?

Sorry, but when TeX is running inside of a TeX shell (writing into a
pipe or pseudo terminal) there are valid reasons for wanting 8bit
throughput.  So while we don't want a _default_ print-through setting
probably, we at least want an option to have the terminal output go
through.

It is not sufficient here to just have the log file work out: if I am
using TeX in interactive mode, it is the terminal messages that I have
to analyze since they are up to date and flushed.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From vvv at vsu.ru  Wed Jul 14 11:26:10 2004
From: vvv at vsu.ru (Vladimir Volovich)
Date: Wed Jul 14 11:28:39 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <x5d62zhtrb.fsf@lola.goethe.zz> (David Kastrup's message of "14
	Jul 2004 10:34:32 +0200")
References: <20040714032303.GD9641@dbs.uni-hannover.de>
	<20040714091250.0831e927@glenlivet.elvenkind.com>
	<87acy3qbro.fsf@video.uic.vsu.ru> <x5d62zhtrb.fsf@lola.goethe.zz>
Message-ID: <871xjfq6rx.fsf@video.uic.vsu.ru>

"DK" == David Kastrup writes:

 >> Or at least, TeX's output to *terminal* should honor the locale's
 >> isprint() properties. All other output (to log files, \write,
 >> \special, etc) MAY use 8-bit, if one wants to, but there's no
 >> reason to insist on "pure 8-bit" for output to *terminal*.

 DK> You mean, like AUCTeX which correlates the output of error
 DK> messages on the terminal with input lines?

 DK> Sorry, but when TeX is running inside of a TeX shell (writing
 DK> into a pipe or pseudo terminal) there are valid reasons for
 DK> wanting 8bit throughput.  So while we don't want a _default_
 DK> print-through setting probably, we at least want an option to
 DK> have the terminal output go through.

 DK> It is not sufficient here to just have the log file work out: if
 DK> I am using TeX in interactive mode, it is the terminal messages
 DK> that I have to analyze since they are up to date and flushed.

Shouldn't you then better have correct locale (LC_CTYPE) setting on
your terminal, instead of unconditionally writing binary characters
onto terminal? And what is the point to have "full 8-bit output" to
terminal, even for all codes less than 32?

Best,
v.

From olaf at infovore.xs4all.nl  Wed Jul 14 12:10:00 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Wed Jul 14 12:13:16 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <87wu17g6i1.fsf@infovore.xs4all.nl> (Olaf Weber's message of
	"Tue, 13 Jul 2004 19:29:58 +0200")
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk> <87wu17g6i1.fsf@infovore.xs4all.nl>
Message-ID: <87smbugarr.fsf@infovore.xs4all.nl>

Olaf Weber writes:
> Philip TAYLOR writes:

>> Just by way of clarification, here are the command-line qualifiers
>> for the Pascal incantation :

>> "/noopt /check=all /float=g_float /list /debug"

>> Of these, "/Check=all" is significant (all array accesses checked).

> What is null in etex in the Pascal version?  In web2c it is defined as
> min_halfword, which is a large negative number (-@"FFFFFFF).  However,
> in the original tex.web, min_halfword equals 0.  So the reason the
> Pascal version doesn't trap may be that an invalid (null) cur_ptr,
> is still a valid array index, in contrast to web2c.

In particular, it looks like the code

if (cur_cmd=toks_register)or(cur_cmd=assign_toks) then
  begin if cur_cmd=toks_register then
    if cur_chr=mem_bot then
      begin scan_register_num;
      if cur_val<256 then q:=equiv(toks_base+cur_val)
      else  begin find_sa_element(tok_val,cur_val,false);
        if cur_ptr=null then q:=null
        else q:=sa_ptr(cur_ptr);
        end;
      end
    else q:=sa_ptr(cur_ptr)                               { <---1--- }
  else q:=equiv(cur_chr);
  if q=null then sa_define(p,null)(p,undefined_cs,null)   { <---2--- }
  else  begin add_token_ref(q); sa_define(p,q)(p,call,q);
    end;
  goto done;
  end

can get to (1) with cur_ptr=null.  When null==0, the sa_ptr(cur_ptr)
will read from mem[1], which when I checked it at that point contained
all zeros, therefore effectively assigning a null to q.  This case is
then handled at (2).

A common idiom for the use of cur_ptr is like this:
    if cur_ptr=null then #:=null@+else #:=sa_ptr(cur_ptr);

If I make a similar change (through web2c's etex.fix file, given
below) then the crashes go away.  Whether this is the _correct_ thing
to do is another matter...


% Bugfixes for etex.ch version 2.1
% Public Domain.

@x l.1163
    begin cur_val:=int_val;
@y
    begin cur_val_level:=int_val;
@z

@x l.2737
    else q:=sa_ptr(cur_ptr)
@y
    else if cur_ptr=null then q:=null else q:=sa_ptr(cur_ptr)
@z

@x l.5503
  if cur_ptr<>0 then
@y
  if cur_ptr<>null then
@z

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From dak at gnu.org  Wed Jul 14 12:19:47 2004
From: dak at gnu.org (David Kastrup)
Date: Wed Jul 14 12:20:56 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <871xjfq6rx.fsf@video.uic.vsu.ru>
References: <20040714032303.GD9641@dbs.uni-hannover.de>
	<20040714091250.0831e927@glenlivet.elvenkind.com>
	<87acy3qbro.fsf@video.uic.vsu.ru> <x5d62zhtrb.fsf@lola.goethe.zz>
	<871xjfq6rx.fsf@video.uic.vsu.ru>
Message-ID: <x5llhmhovw.fsf@lola.goethe.zz>

Vladimir Volovich <vvv@vsu.ru> writes:

> "DK" == David Kastrup writes:
> 
>  >> Or at least, TeX's output to *terminal* should honor the locale's
>  >> isprint() properties. All other output (to log files, \write,
>  >> \special, etc) MAY use 8-bit, if one wants to, but there's no
>  >> reason to insist on "pure 8-bit" for output to *terminal*.
> 
>  DK> You mean, like AUCTeX which correlates the output of error
>  DK> messages on the terminal with input lines?
> 
>  DK> Sorry, but when TeX is running inside of a TeX shell (writing
>  DK> into a pipe or pseudo terminal) there are valid reasons for
>  DK> wanting 8bit throughput.  So while we don't want a _default_
>  DK> print-through setting probably, we at least want an option to
>  DK> have the terminal output go through.
> 
>  DK> It is not sufficient here to just have the log file work out: if
>  DK> I am using TeX in interactive mode, it is the terminal messages
>  DK> that I have to analyze since they are up to date and flushed.
> 
> Shouldn't you then better have correct locale (LC_CTYPE) setting on
> your terminal, instead of unconditionally writing binary characters
> onto terminal?

LC_CTYPE is not a terminal setting, and you tell me what a correct
LC_CTYPE setting for Windows, MacOSX, HP/UX, Linux, Solaris in various
versions for a document including subchapters by different people
written in utf8, latin1 and applemac input encoding would be, even if
we stipulated that we wanted to goof around with the environment in
the first place.

> And what is the point to have "full 8-bit output" to terminal, even
> for all codes less than 32?

^^I is a valid input character.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From vvv at vsu.ru  Wed Jul 14 13:17:46 2004
From: vvv at vsu.ru (Vladimir Volovich)
Date: Wed Jul 14 13:20:21 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <x5llhmhovw.fsf@lola.goethe.zz> (David Kastrup's message of "14
	Jul 2004 12:19:47 +0200")
References: <20040714032303.GD9641@dbs.uni-hannover.de>
	<20040714091250.0831e927@glenlivet.elvenkind.com>
	<87acy3qbro.fsf@video.uic.vsu.ru> <x5d62zhtrb.fsf@lola.goethe.zz>
	<871xjfq6rx.fsf@video.uic.vsu.ru> <x5llhmhovw.fsf@lola.goethe.zz>
Message-ID: <87u0waq1lx.fsf@video.uic.vsu.ru>

Hi!

David Kastrup wrote:

> Vladimir Volovich <vvv@vsu.ru> writes:
> > "DK" == David Kastrup writes:
> > 
> >  >> Or at least, TeX's output to *terminal* should honor the locale's
> >  >> isprint() properties. All other output (to log files, \write,
> >  >> \special, etc) MAY use 8-bit, if one wants to, but there's no
> >  >> reason to insist on "pure 8-bit" for output to *terminal*.
> > 
> >  DK> You mean, like AUCTeX which correlates the output of error
> >  DK> messages on the terminal with input lines?
> > 
> >  DK> Sorry, but when TeX is running inside of a TeX shell (writing
> >  DK> into a pipe or pseudo terminal) there are valid reasons for
> >  DK> wanting 8bit throughput.  So while we don't want a _default_
> >  DK> print-through setting probably, we at least want an option to
> >  DK> have the terminal output go through.
> > 
> >  DK> It is not sufficient here to just have the log file work out: if
> >  DK> I am using TeX in interactive mode, it is the terminal messages
> >  DK> that I have to analyze since they are up to date and flushed.
> > 
> > Shouldn't you then better have correct locale (LC_CTYPE) setting on
> > your terminal, instead of unconditionally writing binary characters
> > onto terminal?
> 
> LC_CTYPE is not a terminal setting,

Certainly, it's a locale setting, and user is supposed to set the
locale correctly while working in the terminal, in particular to
properly define which characters are printable.

Otherwise, if we ignore the locale setting when pringing to terminal,
we can get unreadable text and/or risk to change the terminal settings
in weird way, as happened in the case which opened thos thread.

> and you tell me what a correct LC_CTYPE setting for Windows, MacOSX,
> HP/UX, Linux, Solaris in various versions for a document including
> subchapters by different people written in utf8, latin1 and applemac
> input encoding would be, even if we stipulated that we wanted to
> goof around with the environment in the first place.

LC_CTYPE is independent of the encoding in which the document is
written. It's the property of the user's system (and depends, in
particular, on the character set acceptable on his terminal).

The TeX document which is being processed can be in completely
different encoding (e.g. it may come from other person who uses
another encoding or language), and has nothing to do with user's
locale.

The point is that TeX when writing to terminal should not print
unprintable characters for that particular terminal (doing otherwise
results in unreadable characters or messed-up terminal settings). And
information about printability of characters is contained in locale
settings.

> > And what is the point to have "full 8-bit output" to terminal, even
> > for all codes less than 32?
> 
> ^^I is a valid input character.

Looking at tex.web, we see some arguments:

==================
@ The first 128 strings will contain 95 standard ASCII characters, and the
other 33 characters will be printed in three-symbol form like `\.{\^\^A}'
unless a system-dependent change is made here. Installations that have
an extended character set, where for example |xchr[@'32]=@t\.{\'^^Z\'}@>|,
would like string @'32 to be the single character @'32 instead of the
three characters @'136, @'136, @'132 (\.{\^\^Z}). On the other hand,
even people with an extended character set will want to represent string
@'15 by \.{\^\^M}, since @'15 is |carriage_return|; the idea is to
produce visible strings instead of tabs or line-feeds or carriage-returns
or bell-rings or characters that are treated anomalously in text files.
==================

And what about most of the other characters with codes less than 32?
what is the point in writing them in "binary" form to the terminal?

Best,
v.

From vvv at vsu.ru  Wed Jul 14 13:22:15 2004
From: vvv at vsu.ru (Vladimir Volovich)
Date: Wed Jul 14 13:24:46 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <x5d62zhtrb.fsf@lola.goethe.zz> (David Kastrup's message of "14
	Jul 2004 10:34:32 +0200")
References: <20040714032303.GD9641@dbs.uni-hannover.de>
	<20040714091250.0831e927@glenlivet.elvenkind.com>
	<87acy3qbro.fsf@video.uic.vsu.ru> <x5d62zhtrb.fsf@lola.goethe.zz>
Message-ID: <87pt6yq1eg.fsf@video.uic.vsu.ru>

"DK" == David Kastrup writes:

 DK> Sorry, but when TeX is running inside of a TeX shell (writing
 DK> into a pipe or pseudo terminal) there are valid reasons for
 DK> wanting 8bit throughput.  So while we don't want a _default_
 DK> print-through setting probably, we at least want an option to
 DK> have the terminal output go through.

BTW, is it that hard to automatically translate ^^-notation to 8-bit
notation inside the AUC-TeX?

Best,
v.

From dak at gnu.org  Wed Jul 14 13:47:17 2004
From: dak at gnu.org (David Kastrup)
Date: Wed Jul 14 13:48:25 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <87pt6yq1eg.fsf@video.uic.vsu.ru>
References: <20040714032303.GD9641@dbs.uni-hannover.de>
	<20040714091250.0831e927@glenlivet.elvenkind.com>
	<87acy3qbro.fsf@video.uic.vsu.ru> <x5d62zhtrb.fsf@lola.goethe.zz>
	<87pt6yq1eg.fsf@video.uic.vsu.ru>
Message-ID: <x5fz7uhku2.fsf@lola.goethe.zz>

Vladimir Volovich <vvv@vsu.ru> writes:

> "DK" == David Kastrup writes:
> 
>  DK> Sorry, but when TeX is running inside of a TeX shell (writing
>  DK> into a pipe or pseudo terminal) there are valid reasons for
>  DK> wanting 8bit throughput.  So while we don't want a _default_
>  DK> print-through setting probably, we at least want an option to
>  DK> have the terminal output go through.
> 
> BTW, is it that hard to automatically translate ^^-notation to 8-bit
> notation inside the AUC-TeX?

The problem is that it is wrong.  If I have something like

  You can use \verb+^^I+ to produce a TAB character.

then this translation should not happen.  If I do this sort of
translation from the log file, then I don't get a string from the
error message context suitable for searching in the source text, since
it is completely unknown whether ^^I or a TAB character was actually
typed.  I would then have to convert each ^^ occurence into a regular
expression like \(?:\^\^I\|	\).  And then we have different ^^
conventions to cater for in connection with Omega and stuff.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From P.Taylor at Rhul.Ac.Uk  Wed Jul 14 14:11:26 2004
From: P.Taylor at Rhul.Ac.Uk (Philip TAYLOR)
Date: Wed Jul 14 14:14:15 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <87wu17g6i1.fsf@infovore.xs4all.nl>
References: <40EECAA3.3010909@wxs.nl>	<20040713145359.3eb46258@glenlivet.elvenkind.com>	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>	<40F415E8.4050408@Rhul.Ac.Uk>
	<87wu17g6i1.fsf@infovore.xs4all.nl>
Message-ID: <40F522EE.5040504@Rhul.Ac.Uk>



Olaf Weber wrote:

[snip]

> What is null in etex in the Pascal version?  In web2c it is defined as
> min_halfword, which is a large negative number (-@"FFFFFFF).  However,
> in the original tex.web, min_halfword equals 0.  So the reason the
> Pascal version doesn't trap may be that an invalid (null) cur_ptr,
> is still a valid array index, in contrast to web2c.

In TeX.web, NULL is @D'd to MIN_HALFWORD, which is itself @D'd to 0.
When you say "In web2c it is defined as min_halfword", I don't think
this is "web2c"-specific at all : it appears to derive directly from
Knuth's canonical Pascal code.  A global search over all of the
AXP/VMS and ETEX directories does not reveal change to tbe /status
quo/ : both (VMS) TeX.ch and (VMS) eTeX.ch simply repeat that declaration :


ALPHA9::Chaa006 : search [...]*.* "@d min_halfword"

******************************
CHAA:[006.E-TEX.KNUTH]TEX.WEB;1

@d min_halfword==0 {smallest allowable value in a |halfword|}

******************************
CHAA:[006.E-TEX.VMS]ETEX_VMS.CH;5

@d min_halfword==0 {smallest allowable value in a |halfword|}
@d min_halfword==0 {smallest allowable value in a |halfword|}

******************************
CHAA:[006.E-TEX.VMS]TEX_VMS.CH;1

@d min_halfword==0 {smallest allowable value in a |halfword|}
@d min_halfword==0 {smallest allowable value in a |halfword|}
ALPHA9::Chaa006 :

** Phil.

From olaf at infovore.xs4all.nl  Wed Jul 14 14:42:22 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Wed Jul 14 14:43:31 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <40F522EE.5040504@Rhul.Ac.Uk> (Philip TAYLOR's message of "Wed,
	14 Jul 2004 13:11:26 +0100")
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk> <87wu17g6i1.fsf@infovore.xs4all.nl>
	<40F522EE.5040504@Rhul.Ac.Uk>
Message-ID: <87llhmg3pt.fsf@infovore.xs4all.nl>

Philip TAYLOR writes:
> Olaf Weber wrote:

>> What is null in etex in the Pascal version?  In web2c it is defined as
>> min_halfword, which is a large negative number (-@"FFFFFFF).  However,
>> in the original tex.web, min_halfword equals 0.  So the reason the
>> Pascal version doesn't trap may be that an invalid (null) cur_ptr,
>> is still a valid array index, in contrast to web2c.

> In TeX.web, NULL is @D'd to MIN_HALFWORD, which is itself @D'd to 0.
> When you say "In web2c it is defined as min_halfword", I don't think
> this is "web2c"-specific at all : it appears to derive directly from
> Knuth's canonical Pascal code.  A global search over all of the
> AXP/VMS and ETEX directories does not reveal change to tbe /status
> quo/ : both (VMS) TeX.ch and (VMS) eTeX.ch simply repeat that declaration :

True, I formulated that badly.  The definition of null remains the
same (min_halfword), but the definition of min_halfword differs, with
the result that on web2c, an access of mem[min_halfword] or
mem[min_halfword+1] often traps.

This does not happen on those systems where min_halfword is defined as
0, as mem[0] and mem[1] are valid array accesses, even if they are
semantically invalid in the code doing those accesses.

Or to put it differently: the fact that the reference implementation
on VMS didn't detect an out-of-array-bounds condition does not mean
that the code is correct, because no such condition occurs in the
failing case.

I strongly recommend inserting a trap in the location given, to verify
whether in the reference implementation we also end up "dereferencing"
a null.

@x l.2737 - guard against |sa_ptr|(|null|).
    else q:=sa_ptr(cur_ptr)
@y
    else if cur_ptr=null then q:=null else q:=sa_ptr(cur_ptr)
@z

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From dak at gnu.org  Wed Jul 14 14:46:33 2004
From: dak at gnu.org (David Kastrup)
Date: Wed Jul 14 14:47:44 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <87llhmg3pt.fsf@infovore.xs4all.nl>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk> <87wu17g6i1.fsf@infovore.xs4all.nl>
	<40F522EE.5040504@Rhul.Ac.Uk> <87llhmg3pt.fsf@infovore.xs4all.nl>
Message-ID: <x5n022g3iu.fsf@lola.goethe.zz>

Olaf Weber <olaf@infovore.xs4all.nl> writes:

> I strongly recommend inserting a trap in the location given, to verify
> whether in the reference implementation we also end up "dereferencing"
> a null.
> 
> @x l.2737 - guard against |sa_ptr|(|null|).
>     else q:=sa_ptr(cur_ptr)
> @y
>     else if cur_ptr=null then q:=null else q:=sa_ptr(cur_ptr)
> @z

That sounds like trying to mask instead of fixing a bug.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From olaf at infovore.xs4all.nl  Wed Jul 14 14:53:23 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Wed Jul 14 14:55:41 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <x5n022g3iu.fsf@lola.goethe.zz> (David Kastrup's message of "14
	Jul 2004 14:46:33 +0200")
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk> <87wu17g6i1.fsf@infovore.xs4all.nl>
	<40F522EE.5040504@Rhul.Ac.Uk> <87llhmg3pt.fsf@infovore.xs4all.nl>
	<x5n022g3iu.fsf@lola.goethe.zz>
Message-ID: <87ekneg37g.fsf@infovore.xs4all.nl>

David Kastrup writes:
> Olaf Weber <olaf@infovore.xs4all.nl> writes:

>> I strongly recommend inserting a trap in the location given, to verify
>> whether in the reference implementation we also end up "dereferencing"
>> a null.

>> @x l.2737 - guard against |sa_ptr|(|null|).
>>     else q:=sa_ptr(cur_ptr)
>> @y
>>     else if cur_ptr=null then q:=null else q:=sa_ptr(cur_ptr)
>> @z

> That sounds like trying to mask instead of fixing a bug.

Normally I would agree, but this idiom is common in the etex source,
so I would not be surprized if the problem is indeed just that this
check was omitted here.  (Note that the subsequent code does check
whether q is null.)

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From peb at mppmu.mpg.de  Tue Jul 13 16:29:01 2004
From: peb at mppmu.mpg.de (Peter Breitenlohner)
Date: Wed Jul 14 15:00:54 2004
Subject: [tex-live] Re: bug in etex
In-Reply-To: <20040713145359.3eb46258@glenlivet.elvenkind.com>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
Message-ID: <Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>

On Tue, 13 Jul 2004, Taco Hoekwater wrote:

> I've been working on this for quite a few hours now, and there really is a bug
> somewhere in the (web2c version of) the etex code. The following extended
> mode plain input file causes both of pdfetex and etex (Web2c 7.5.3 and 7.4.5)
> to quit with SIGSEGV under linux:
>
> ------
>  \toksdef\whatevertoks = 266
>  \toksdef\extratoks = 267
>  \whatevertoks={junk}
>  \everypar{\extratoks=\whatevertoks}
>  \immediate\write16{t={\the\toks265}}
>  some paragraph\par
>  \bye
> -------
>
> It seems that the '\the' command that accesses a previously undefined token
> register is what is causing the problem later on; the SIGSEGV happens when
> TeX tries to access the RHS of the \extratoks=\whatevertoks assignment.

Hi Taco,

I have just reproduced the SIGSEGV with
 	"This is e-TeX, Version 3.14159-2.1 (Web2C 7.3.1)"
(yes we still use this somewhat oldish version).
I'll have to look into the code to find out what goes wrong.

--------------------------

Could any one test this on a non-linux Unix system and report the outcome?

regards
Peter Breitenlohner <peb@mppmu.mpg.de>

From jonathan_kew at sil.org  Tue Jul 13 16:56:21 2004
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Wed Jul 14 15:00:57 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
Message-ID: <CD7AA515-D4DC-11D8-B945-000393BD674C@sil.org>


On 13 Jul 2004, at 3:29 pm, Peter Breitenlohner wrote:

> I have just reproduced the SIGSEGV with
> 	"This is e-TeX, Version 3.14159-2.1 (Web2C 7.3.1)"
> (yes we still use this somewhat oldish version).
>

This suggests that my note re XeTeX (based on 3.14159-2.1) *not* 
failing on this test is probably irrelevant; most likely something else 
is masking the problem in that case.

Jonathan

From sojka at informatics.muni.cz  Tue Jul 13 17:03:19 2004
From: sojka at informatics.muni.cz (Petr Sojka)
Date: Wed Jul 14 15:01:00 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
Message-ID: <20040713150319.GF19713@informatics.muni.cz>

On Tue, Jul 13, 2004 at 04:29:01PM +0200, Peter Breitenlohner wrote:
> Could any one test this on a non-linux Unix system and report the outcome?

a)
$ etex tmp
This is e-TeX, Version 3.14159-2.1 (Web2C 7.3.3.1)
entering extended mode
(./tmp.tex
t={}
Segmentation Fault
anxur  1 bash:2  sojka  Tue 13.07.04  139   /tmp
$ uname -a
SunOS anxur 5.8 Generic_108528-15 sun4u sparc SUNW,Ultra-Enterprise

b)
$ etex tmp
This is e-TeXk, Version 3.141592-2.1 (Web2C 7.5.2)
 %&-line parsing enabled.
entering extended mode
(./tmp.tex
t={}
Bus error
aisa  ttyq29 bash:2  sojka  Tue 13.07.04  138   /tmp
$ uname -a
IRIX64 aisa 6.5 10070055 IP27

Regards
--ps

From jonathan_kew at sil.org  Tue Jul 13 16:31:57 2004
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Wed Jul 14 15:01:03 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <20040713145359.3eb46258@glenlivet.elvenkind.com>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
Message-ID: <650EBF01-D4D9-11D8-B945-000393BD674C@sil.org>

On 13 Jul 2004, at 1:53 pm, Taco Hoekwater wrote:

>
> Hi all (especially Peter),
>
>> Hi Taco (since i think that you qualify for sorting this out -) and 
>> others,
>>
>> Etex can have > 256 token registers. The following fails (bombs) on 
>> my machine
>> (i cannot make atest file since it's part of a more complex piece of 
>> code)
>> ....
>
> I've been working on this for quite a few hours now, and there really 
> is a bug
> somewhere in the (web2c version of) the etex code. The following 
> extended
> mode plain input file causes both of pdfetex and etex (Web2c 7.5.3 and 
> 7.4.5)
> to quit with SIGSEGV under linux:
>
> ------
>   \toksdef\whatevertoks = 266
>   \toksdef\extratoks = 267
>   \whatevertoks={junk}
>   \everypar{\extratoks=\whatevertoks}
>   \immediate\write16{t={\the\toks265}}
>   some paragraph\par
>   \bye
> -------

FWIW, you might like to know that on my Mac OS X system, I see a crash 
with [pdf]etex, but my current build of XeTeX (a Mac OS X-only 
extension based on e-TeX) does not show the same problem, at least not 
with this particular test case.

Thus,
----
[Kew-TiBook:~] jonathan% etex crash
This is e-TeXk, Version 3.141592-2.1 (Web2C 7.5.2)
  %&-line parsing enabled.
  (/usr/local/teTeX/share/texmf.tetex/web2c/cp8bit.tcx)
entering extended mode
(./crash.tex
t={}
Segmentation fault
[Kew-TiBook:~] jonathan%
----

but,
----
[Kew-TiBook:~] jonathan% xetex crash
This is XeTeXk, Version 3.14159-2.1-0.83 (Web2C 7.5.2)
  %&-line parsing enabled.
entering extended mode
(./crash.tex
t={}
[1] )
Output written on crash.pdf (1 page).
Transcript written on crash.log.
[Kew-TiBook:~] jonathan%
----

I notice that the etex I have installed is 3.141592-2.1, whereas xetex 
is currently based on the sources for 3.14159-2.1. So this raises the 
question in my mind as to whether something in the most recent TeX 
changes is leading to the problem. Note also that the Web2C version is 
the same in both cases.

Of course, it's possible that XeTeX happens to survive this test for 
some other reason. But if anyone has an older build of e-TeX around it 
might be interesting to compare that.

Jonathan

From peb at mppmu.mpg.de  Tue Jul 13 18:43:57 2004
From: peb at mppmu.mpg.de (Peter Breitenlohner)
Date: Wed Jul 14 15:01:07 2004
Subject: [tex-live] Re: bug in etex
In-Reply-To: <Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
Message-ID: <Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>

On Tue, 13 Jul 2004, Peter Breitenlohner wrote:

> ..........
> Could any one test this on a non-linux Unix system and report the outcome?

Thanks to all the testers; here a short summary:

Petr Sojka, Martin Schroeder, and Apostolos Syropoulos reported a
Segmentation Fault (or Bus Error) on different SunOS and IRIX systems,
all using (different versions of) Web2C.

Phil Taylor reported no such problem with the VMS Pascal implementation.

This MIGHT (but need not) indicate that this is a Web2C problem (either
something Web2C doesn't handle correctly or a bug in the Web2C change file).
I'll look closely at the e-TeX WEB (Pascal) code as well as the C code
generated by Web2C.

regards
Peter Breitenlohner <peb@mppmu.mpg.de>

From P.Taylor at Rhul.Ac.Uk  Wed Jul 14 15:00:55 2004
From: P.Taylor at Rhul.Ac.Uk (Philip TAYLOR)
Date: Wed Jul 14 15:03:44 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <87llhmg3pt.fsf@infovore.xs4all.nl>
References: <40EECAA3.3010909@wxs.nl>	<20040713145359.3eb46258@glenlivet.elvenkind.com>	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>	<40F415E8.4050408@Rhul.Ac.Uk>
	<87wu17g6i1.fsf@infovore.xs4all.nl>	<40F522EE.5040504@Rhul.Ac.Uk>
	<87llhmg3pt.fsf@infovore.xs4all.nl>
Message-ID: <40F52E87.2080606@Rhul.Ac.Uk>



Olaf Weber wrote:

[snip]

> This does not happen on those systems where min_halfword is defined as
> 0, as mem[0] and mem[1] are valid array accesses, even if they are
> semantically invalid in the code doing those accesses.

Intriguingly, Knuth writes :

	The minimum halfword value represents a null pointer.
	\TeX\ does not assume that |mem[null]| exists.

whilst in the EteX Pascal source, we find :

	CHAA:[006.E-TEX.VMS]ETEX.PAS;2

	MEM[0].HH.RH:=MEM[0].HH.RH+530;{:228}{232:}EQTB[11312].HH.RH:=0;
	IF T<=3 THEN BEGIN MEM[CURPTR+1].HH.RH:=0;MEM[0].HH.RH:=MEM[0].HH.RH+1;
	IF S<>0 THEN BEGIN MEM[0].HH.RH:=MEM[0].HH.RH+1;DELETEGLUEREF(S);
	INT=0)THEN BEGIN MEM[0].HH.RH:=MEM[0].HH.RH+1;DELETEGLUEREF(CURVAL);

There's no conflict, but it is intriguing to see that MEM[0] is explicitly
referenced at a few points in the code ...

** Phil.


From peb at mppmu.mpg.de  Wed Jul 14 15:02:49 2004
From: peb at mppmu.mpg.de (Peter Breitenlohner)
Date: Wed Jul 14 15:03:56 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <87smbugarr.fsf@infovore.xs4all.nl>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk>
	<87wu17g6i1.fsf@infovore.xs4all.nl> <87smbugarr.fsf@infovore.xs4all.nl>
Message-ID: <Pine.LNX.4.60.0407141454010.27913@pcl321.mppmu.mpg.de>

On Wed, 14 Jul 2004, Olaf Weber wrote:

> In particular, it looks like the code
>
> if (cur_cmd=toks_register)or(cur_cmd=assign_toks) then
>  begin if cur_cmd=toks_register then
>    if cur_chr=mem_bot then
>      begin scan_register_num;
>      if cur_val<256 then q:=equiv(toks_base+cur_val)
>      else  begin find_sa_element(tok_val,cur_val,false);
>        if cur_ptr=null then q:=null
>        else q:=sa_ptr(cur_ptr);
>        end;
>      end
>    else q:=sa_ptr(cur_ptr)                               { <---1--- }
>  else q:=equiv(cur_chr);
>  if q=null then sa_define(p,null)(p,undefined_cs,null)   { <---2--- }
>  else  begin add_token_ref(q); sa_define(p,q)(p,call,q);
>    end;
>  goto done;
>  end
>
> can get to (1) with cur_ptr=null.  When null==0, the sa_ptr(cur_ptr)
> will read from mem[1], which when I checked it at that point contained
> all zeros, therefore effectively assigning a null to q.  This case is
> then handled at (2).
>
> A common idiom for the use of cur_ptr is like this:
>    if cur_ptr=null then #:=null@+else #:=sa_ptr(cur_ptr);
>
> If I make a similar change (through web2c's etex.fix file, given
> below) then the crashes go away.  Whether this is the _correct_ thing
> to do is another matter...

Hi Olaf,

your analysis of the problem is certainly correct. The proposed change will
indeed avoid the segmentation fault but will NOT yield correct results.

There is something basically wrong with (that part of) the sparse array handling.

The basic idea is that the
 	\toksdef\whatevertoks = 266
should first create that token register (if it doesn't already exist) and
then increase its reference count, such that this register will not
disappear. Thus a later reference to \whatevertoks should work without such
a safeguard.

Somehow the logic of all that is brokem somewhere and I'll have to find out
where.

regards
Peter Breitenlohner <peb@mppmu.mpg.de>

From karl at freefriends.org  Wed Jul 14 15:13:51 2004
From: karl at freefriends.org (Karl Berry)
Date: Wed Jul 14 15:15:09 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <20040714091250.0831e927@glenlivet.elvenkind.com>
Message-ID: <200407141313.i6EDDp011893@f7.net>

    the archive for TeXlive seems to be broken 

I have no problems accessing the archive at
http://tug.org/mailman/private/tex-live/,
or searching it at http://tug.org/mailman/mmsearch/tex-live.

Perhaps you aren't able to access it because of username/password
issues.  You seem to be subscribed as taco@aanhet.net, if that helps.

If that's not it, please mail webmaster with a description of whatever
problem you are seeing.

Thanks,
k

From taco at elvenkind.com  Wed Jul 14 15:31:24 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed Jul 14 15:32:31 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <200407141313.i6EDDp011893@f7.net>
References: <20040714091250.0831e927@glenlivet.elvenkind.com>
	<200407141313.i6EDDp011893@f7.net>
Message-ID: <20040714153124.38246126@glenlivet.elvenkind.com>


Hi Karl,

In this case I have a bugreport for the website (Sebastian?). There is a
broken link to the mailing list archive on this page:

  http://www.tug.org/texlive/ , section "contributing to TeX live"

which was the link I followed, obviously. 

The link from mailman's index page is ok.

On Wed, 14 Jul 2004 09:13:51 -0400, Karl wrote:

>     the archive for TeXlive seems to be broken 
> 
> I have no problems accessing the archive at
> http://tug.org/mailman/private/tex-live/,
> or searching it at http://tug.org/mailman/mmsearch/tex-live.
> 
> Perhaps you aren't able to access it because of username/password
> issues.  You seem to be subscribed as taco@aanhet.net, if that helps.
> 
> If that's not it, please mail webmaster with a description of whatever
> problem you are seeing.
> 
> Thanks,
> k


-- 
groeten,

Taco

From peb at mppmu.mpg.de  Wed Jul 14 15:34:27 2004
From: peb at mppmu.mpg.de (Peter Breitenlohner)
Date: Wed Jul 14 15:35:36 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <40F52E87.2080606@Rhul.Ac.Uk>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk>
	<87wu17g6i1.fsf@infovore.xs4all.nl> <40F522EE.5040504@Rhul.Ac.Uk>
	<87llhmg3pt.fsf@infovore.xs4all.nl> <40F52E87.2080606@Rhul.Ac.Uk>
Message-ID: <Pine.LNX.4.60.0407141512100.27913@pcl321.mppmu.mpg.de>

On Wed, 14 Jul 2004, Philip TAYLOR wrote:

>> This does not happen on those systems where min_halfword is defined as
>> 0, as mem[0] and mem[1] are valid array accesses, even if they are
>> semantically invalid in the code doing those accesses.
>
> Intriguingly, Knuth writes :
>
> 	The minimum halfword value represents a null pointer.
> 	\TeX\ does not assume that |mem[null]| exists.
>
> whilst in the EteX Pascal source, we find :
>
> 	CHAA:[006.E-TEX.VMS]ETEX.PAS;2
>
> 	IF S<>0 THEN BEGIN MEM[0].HH.RH:=MEM[0].HH.RH+1;DELETEGLUEREF(S);
> There's no conflict, but it is intriguing to see that MEM[0] is explicitly
> referenced at a few points in the code ...

Well, well

The line above comes from

 	@ @<Nullify |width(q)| and the tabskip glue following this column@>=
 	begin width(q):=0; r:=link(q); s:=glue_ptr(r);
 	if s<>zero_glue then
 	  begin add_glue_ref(zero_glue); delete_glue_ref(s);
 	  glue_ptr(r):=zero_glue;
 	  end;
 	end

where zero_glue is @D'd as
 	@d zero_glue==mem_bot {specification for \.{0pt plus 0pt minus 0pt}}
and mem_bot is @D'd as
 	@d mem_bot=0 {smallest index in the |mem| array dumped by \.{INITEX};
 	  must not be less than |mem_min|}

It is true that mem[null] need not exist but mem[mem_bot] must exist. In fact
mem[mem_bot..mem_bot+3] contain the glue specification '0pt plus 0pt minus 0pt'
and as such should not be accessed as normal nodes, only as glue_spec.

It so happens that in tex.web null==min_halfword and mem_bot are both @D'd
as 0; this is, however, not true for the Web2C implementation.

regards
Peter Breitenlohner <peb@mppmu.mpg.de>

From pragma at wxs.nl  Wed Jul 14 15:40:42 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Wed Jul 14 15:42:03 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <CD7AA515-D4DC-11D8-B945-000393BD674C@sil.org>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<CD7AA515-D4DC-11D8-B945-000393BD674C@sil.org>
Message-ID: <40F537DA.6080800@wxs.nl>

Jonathan Kew wrote:

>
> On 13 Jul 2004, at 3:29 pm, Peter Breitenlohner wrote:
>
>> I have just reproduced the SIGSEGV with
>>     "This is e-TeX, Version 3.14159-2.1 (Web2C 7.3.1)"
>> (yes we still use this somewhat oldish version).
>>
>
> This suggests that my note re XeTeX (based on 3.14159-2.1) *not* 
> failing on this test is probably irrelevant; most likely something 
> else is masking the problem in that case.

does xetex use omega (bigger array) or etex (sparse array) extended registers ? 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From jonathan_kew at sil.org  Wed Jul 14 15:45:14 2004
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Wed Jul 14 15:44:39 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <40F537DA.6080800@wxs.nl>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<CD7AA515-D4DC-11D8-B945-000393BD674C@sil.org>
	<40F537DA.6080800@wxs.nl>
Message-ID: <08DEB9F3-D59C-11D8-B945-000393BD674C@sil.org>


On 14 Jul 2004, at 2:40 pm, Hans Hagen wrote:

> Jonathan Kew wrote:
>
>>
>> On 13 Jul 2004, at 3:29 pm, Peter Breitenlohner wrote:
>>
>>> I have just reproduced the SIGSEGV with
>>>     "This is e-TeX, Version 3.14159-2.1 (Web2C 7.3.1)"
>>> (yes we still use this somewhat oldish version).
>>>
>>
>> This suggests that my note re XeTeX (based on 3.14159-2.1) *not* 
>> failing on this test is probably irrelevant; most likely something 
>> else is masking the problem in that case.
>
> does xetex use omega (bigger array) or etex (sparse array) extended 
> registers ?

etex (sparse array).

Jonathan

From jonathan_kew at sil.org  Wed Jul 14 15:50:47 2004
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Wed Jul 14 15:50:11 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <Pine.LNX.4.60.0407141454010.27913@pcl321.mppmu.mpg.de>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk> <87wu17g6i1.fsf@infovore.xs4all.nl>
	<87smbugarr.fsf@infovore.xs4all.nl>
	<Pine.LNX.4.60.0407141454010.27913@pcl321.mppmu.mpg.de>
Message-ID: <CF1EE14C-D59C-11D8-B945-000393BD674C@sil.org>

On 14 Jul 2004, at 2:02 pm, Peter Breitenlohner wrote:

> Hi Olaf,
>
> your analysis of the problem is certainly correct. The proposed change 
> will
> indeed avoid the segmentation fault but will NOT yield correct results.
>
> There is something basically wrong with (that part of) the sparse 
> array handling.
>
> The basic idea is that the
> 	\toksdef\whatevertoks = 266
> should first create that token register (if it doesn't already exist) 
> and
> then increase its reference count, such that this register will not
> disappear. Thus a later reference to \whatevertoks should work without 
> such
> a safeguard.
>
> Somehow the logic of all that is brokem somewhere and I'll have to 
> find out
> where.

I'm not sure that this is precisely what's broken (though I may just be 
displaying ignorance here).

Seems to me that the key line that triggers trouble is

   \immediate\write16{t={\the\toks265}}

where \toks265 has NOT previously been created with \toksdef. If I 
change this \write to use \toks267, which was defined with \toksdef but 
has not actually been assigned to, all is well.

Would a direct reference like this to an as-yet-uncreated token 
register lead to the null cur_ptr that may need to be checked?

Jonathan

From karl at freefriends.org  Wed Jul 14 16:14:38 2004
From: karl at freefriends.org (Karl Berry)
Date: Wed Jul 14 16:15:45 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <20040714153124.38246126@glenlivet.elvenkind.com>
Message-ID: <200407141414.i6EEEcf25938@f7.net>

    In this case I have a bugreport for the website (Sebastian?). There is a

I am maintaining the web site these days, pretty much.

  http://www.tug.org/texlive/ , section "contributing to TeX live"

Ah.  I fixed the link to the archive there.  Thanks.

From karl at freefriends.org  Wed Jul 14 17:32:15 2004
From: karl at freefriends.org (Karl Berry)
Date: Wed Jul 14 17:33:27 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <20040714032303.GD9641@dbs.uni-hannover.de>
Message-ID: <200407141532.i6EFWFF11300@f7.net>

            \showhyphens{$\delta$}

How about if we make the default (in fmtutil.cnf) be what it was for
2003: only codes 32 and higher are printable on terminal by default
("7.5-bit" :).  Do any *languages* need codes <32 printable?  I don't
think so.

Auc-tex and any other applications which need codes <32 printable can
accomplish that with an environment (config) variable setting, among (I
would guess) other ways.

I admit I do not know the exact incantations to accomplish this, but I
believe there is sufficient flexibility in the mechanisms to allow it.
I sincerely hope so, anyway.

Having the default be something which can mess up many users' terminals
does not seem right to me.

k

From peb at mppmu.mpg.de  Wed Jul 14 17:51:37 2004
From: peb at mppmu.mpg.de (Peter Breitenlohner)
Date: Wed Jul 14 17:52:50 2004
Subject: [tex-live] Re: [tex-implementors] bug in etex
In-Reply-To: <87smbugarr.fsf@infovore.xs4all.nl>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk>
	<87wu17g6i1.fsf@infovore.xs4all.nl> <87smbugarr.fsf@infovore.xs4all.nl>
Message-ID: <Pine.LNX.4.60.0407141727320.27913@pcl321.mppmu.mpg.de>

On Wed, 14 Jul 2004, Olaf Weber wrote:

> In particular, it looks like the code
> .....
>    if cur_chr=mem_bot then
>      begin scan_register_num;
>      if cur_val<256 then q:=equiv(toks_base+cur_val)
>      else  begin find_sa_element(tok_val,cur_val,false);
>        if cur_ptr=null then q:=null
>        else q:=sa_ptr(cur_ptr);
>        end;
>      end
>    else q:=sa_ptr(cur_ptr)                               { <---1--- }
>  else q:=equiv(cur_chr);
> .....

Hi Olaf,

this was a stupid typo. The line (1) above should read
>   else q:=sa_ptr(cur_chr)
                        ^^^
and everything should be fine.

A completely analogous piece of code in etex.ch reads
>     if m=mem_bot then
>       begin scan_register_num;
>       if cur_val<256 then cur_val:=equiv(toks_base+cur_val)
>       else  begin find_sa_element(tok_val,cur_val,false);
>         if cur_ptr=null then cur_val:=null
>         else cur_val:=sa_ptr(cur_ptr);
>         end;
>       end
>     else cur_val:=sa_ptr(m)
>   else cur_val:=equiv(m);

Could you test this? Right now I have some difficulties recompiling etex.

Some explanation:
 	cur_cmd == toks_register && cur_chr != mem_bot
indicates a \toksdef'ed sparse array element (which can't disappear due to
its reference count) with cur_chr pointing to the actual array element.

The global variable cur_ptr should only be used in a very local context.

Referencing the (non-existing) \toks265 results in cur_ptr==null. Even
without that, i.e. with cur_ptr!=null the "q:=sa_ptr(cur_ptr)" gives a
wrong value!

regards
Peter Breitenlohner <peb@mppmu.mpg.de>

From pragma at wxs.nl  Wed Jul 14 17:58:53 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Wed Jul 14 18:00:07 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <200407141532.i6EFWFF11300@f7.net>
References: <200407141532.i6EFWFF11300@f7.net>
Message-ID: <40F5583D.4050703@wxs.nl>

Karl Berry wrote:

>            \showhyphens{$\delta$}
>
>How about if we make the default (in fmtutil.cnf) be what it was for
>2003: only codes 32 and higher are printable on terminal by default
>("7.5-bit" :).  Do any *languages* need codes <32 printable?  I don't
>think so.
>  
>
eh .. only terminal then, not files! i really need those <32 chars in files; i'm less worried about a screwed up terminal (tex messages are messy anyway) then an unusable system because files behave strange

(dangerous to mention 'for 2003' because that was also dealing with files) 

(i wonder why tex cannot behave like other systems, i never have to worry about such issues when using perl or ruby) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From karl at freefriends.org  Wed Jul 14 18:07:24 2004
From: karl at freefriends.org (Karl Berry)
Date: Wed Jul 14 18:08:36 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <40F5583D.4050703@wxs.nl>
Message-ID: <200407141607.i6EG7OE19125@f7.net>

    eh .. only terminal then, not files! 

Yes, agreed.  We are only discussing terminal output.

Is this approach implementable with tcx as it stands now?
(I hope.)

    (dangerous to mention 'for 2003' because that was also dealing with files) 

I'm sorry for the confusion, I didn't realize that.

From olaf at infovore.xs4all.nl  Wed Jul 14 18:15:51 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Wed Jul 14 18:16:59 2004
Subject: [tex-live] Re: [tex-implementors] bug in etex
In-Reply-To: <Pine.LNX.4.60.0407141727320.27913@pcl321.mppmu.mpg.de> (Peter
	Breitenlohner's message of "Wed, 14 Jul 2004 17:51:37 +0200 (CEST)")
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk> <87wu17g6i1.fsf@infovore.xs4all.nl>
	<87smbugarr.fsf@infovore.xs4all.nl>
	<Pine.LNX.4.60.0407141727320.27913@pcl321.mppmu.mpg.de>
Message-ID: <87vfgqef9k.fsf@infovore.xs4all.nl>

Peter Breitenlohner writes:

> this was a stupid typo. The line (1) above should read
>>    else q:=sa_ptr(cur_chr)
>                         ^^^
> and everything should be fine.

That makes for this change:

@x l.2737
    else q:=sa_ptr(cur_ptr)
@y
    else q:=sa_ptr(cur_chr)
@z

> Could you test this? Right now I have some difficulties recompiling etex.

It prevents the crash.  I'm not sure how to check for correctness
beyond that point.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From bilotta78 at hotpop.com  Wed Jul 14 18:21:28 2004
From: bilotta78 at hotpop.com (Giuseppe Bilotta)
Date: Wed Jul 14 18:23:15 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk> <87wu17g6i1.fsf@infovore.xs4all.nl>
	<40F522EE.5040504@Rhul.Ac.Uk> <87llhmg3pt.fsf@infovore.xs4all.nl>
Message-ID: <MPG.1b5f7808689e81d09896d5@news.gmane.org>

Olaf Weber wrote:
> True, I formulated that badly.  The definition of null remains the
> same (min_halfword), but the definition of min_halfword differs, with
> the result that on web2c, an access of mem[min_halfword] or
> mem[min_halfword+1] often traps.
> 
> This does not happen on those systems where min_halfword is defined as
> 0, as mem[0] and mem[1] are valid array accesses, even if they are
> semantically invalid in the code doing those accesses.

I find it amusing that on LKML there is a similar discussion on 
NULL vs 0 in C code ... if null (in Pascal) is supposed to be 
the null pointer in C, then the web2c conversion should take 
care of it and translate null to NULL or 0 ...

-- 
Giuseppe "Oblomov" Bilotta

Can't you see
It all makes perfect sense
Expressed in dollar and cents
Pounds shillings and pence
                  (Roger Waters)

From olaf at infovore.xs4all.nl  Wed Jul 14 18:34:57 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Wed Jul 14 18:36:01 2004
Subject: [tex-live] Re: [tex-implementors] Re: bug in etex
In-Reply-To: <MPG.1b5f7808689e81d09896d5@news.gmane.org> (Giuseppe Bilotta's
	message of "Wed, 14 Jul 2004 18:21:28 +0200")
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk> <87wu17g6i1.fsf@infovore.xs4all.nl>
	<40F522EE.5040504@Rhul.Ac.Uk> <87llhmg3pt.fsf@infovore.xs4all.nl>
	<MPG.1b5f7808689e81d09896d5@news.gmane.org>
Message-ID: <87r7reeedq.fsf@infovore.xs4all.nl>

Giuseppe Bilotta writes:

> I find it amusing that on LKML there is a similar discussion on 
> NULL vs 0 in C code ... if null (in Pascal) is supposed to be 
> the null pointer in C, then the web2c conversion should take 
> care of it and translate null to NULL or 0 ...

In the TeX sources, "pointers" are usually indexes into the mem array,
therefore always integers from the C point of view.  Thus it is never
appropriate to translate TeX's |null| into C's NULL.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From olaf at infovore.xs4all.nl  Wed Jul 14 18:41:38 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Wed Jul 14 18:42:42 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <x5hdsbhu04.fsf@lola.goethe.zz> (David Kastrup's message of "14
	Jul 2004 10:29:15 +0200")
References: <20040714032303.GD9641@dbs.uni-hannover.de>
	<20040714091250.0831e927@glenlivet.elvenkind.com>
	<x5hdsbhu04.fsf@lola.goethe.zz>
Message-ID: <87n022ee2l.fsf@infovore.xs4all.nl>

David Kastrup writes:

[...]

> There is no such control sequence.  This is the output from an
> overfull hbox message.  It contains only nameless characters.
> Whether they were produced by \mathcode, \char, \delta, whatever is
> not known anymore.

IMO the inability to go back from the internal codes to something
resembling the source that produced them is a bug in the design of
TeX.  "Fixing" TeX would require a major rewrite.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From peb at mppmu.mpg.de  Wed Jul 14 18:43:30 2004
From: peb at mppmu.mpg.de (Peter Breitenlohner)
Date: Wed Jul 14 18:44:42 2004
Subject: [tex-live] Re: [tex-implementors] bug in etex
In-Reply-To: <87vfgqef9k.fsf@infovore.xs4all.nl>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk>
	<87wu17g6i1.fsf@infovore.xs4all.nl> <87smbugarr.fsf@infovore.xs4all.nl>
	<Pine.LNX.4.60.0407141727320.27913@pcl321.mppmu.mpg.de>
	<87vfgqef9k.fsf@infovore.xs4all.nl>
Message-ID: <Pine.LNX.4.60.0407141839260.27913@pcl321.mppmu.mpg.de>

On Wed, 14 Jul 2004, Olaf Weber wrote:

> That makes for this change:
>
> @x l.2737
>    else q:=sa_ptr(cur_ptr)
> @y
>    else q:=sa_ptr(cur_chr)
> @z
>
>> Could you test this? Right now I have some difficulties recompiling etex.
>
> It prevents the crash.  I'm not sure how to check for correctness
> beyond that point.

You could run this

   \toksdef\whatevertoks = 266
   \toksdef\extratoks = 267
   \whatevertoks={junk}
   \everypar{\extratoks=\whatevertoks}
   \immediate\write16{t={\the\toks265}}
   \showthe\extratoks  % should be empty
   some paragraph
   \showthe\extratoks  % should be "junk"
   \par
   \bye

Peter Breitenlohner <peb@mppmu.mpg.de>

From olaf at infovore.xs4all.nl  Wed Jul 14 18:47:18 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Wed Jul 14 18:48:22 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <40F5583D.4050703@wxs.nl> (Hans Hagen's message of "Wed, 14 Jul
	2004 17:58:53 +0200")
References: <200407141532.i6EFWFF11300@f7.net> <40F5583D.4050703@wxs.nl>
Message-ID: <87iscqedt5.fsf@infovore.xs4all.nl>

Hans Hagen writes:

> (i wonder why tex cannot behave like other systems, i never have to
> worry about such issues when using perl or ruby)

The problem is an artifact of the way TeX encodes its data internally,
in particular that it uses the space allocated to ASCII control
characters for "printable" matter.  No other language implementation
that I'm aware of does this.  But if there were such characters in the
input of a ruby/perl/whatever program, you might well see them in the
output as well.

(And I believe I'm entitled to a small "I told you so" as I did try to
point this out during previous rounds of this discussion.)

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From olaf at infovore.xs4all.nl  Wed Jul 14 18:50:46 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Wed Jul 14 18:51:53 2004
Subject: [tex-live] Re: [tex-implementors] bug in etex
In-Reply-To: <Pine.LNX.4.60.0407141839260.27913@pcl321.mppmu.mpg.de> (Peter
	Breitenlohner's message of "Wed, 14 Jul 2004 18:43:30 +0200 (CEST)")
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk> <87wu17g6i1.fsf@infovore.xs4all.nl>
	<87smbugarr.fsf@infovore.xs4all.nl>
	<Pine.LNX.4.60.0407141727320.27913@pcl321.mppmu.mpg.de>
	<87vfgqef9k.fsf@infovore.xs4all.nl>
	<Pine.LNX.4.60.0407141839260.27913@pcl321.mppmu.mpg.de>
Message-ID: <87ekneednd.fsf@infovore.xs4all.nl>

Peter Breitenlohner writes:
> On Wed, 14 Jul 2004, Olaf Weber wrote:

>> ...  I'm not sure how to check for correctness beyond that point.

> You could run this

>    \toksdef\whatevertoks = 266
>    \toksdef\extratoks = 267
>    \whatevertoks={junk}
>    \everypar{\extratoks=\whatevertoks}
>    \immediate\write16{t={\the\toks265}}
>    \showthe\extratoks  % should be empty
>    some paragraph
>    \showthe\extratoks  % should be "junk"
>    \par
>    \bye

My results:

$ ./etex /tmp/etst2.tex
This is e-TeXk, Version 3.141592-2.1 (Web2C 7.5.3)
 %&-line parsing enabled.
entering extended mode
(/tmp/etst2.tex
t={}
> .
l.6 \showthe\extratoks
                        % should be empty
?
> junk.
l.8 \showthe\extratoks
                        % should be "junk"
?
[1] )
Output written on etst2.dvi (1 page, 224 bytes).
Transcript written on etst2.log.

> Peter Breitenlohner <peb@mppmu.mpg.de>

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From dak at gnu.org  Wed Jul 14 18:54:12 2004
From: dak at gnu.org (David Kastrup)
Date: Wed Jul 14 18:55:25 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <87n022ee2l.fsf@infovore.xs4all.nl>
References: <20040714032303.GD9641@dbs.uni-hannover.de>
	<20040714091250.0831e927@glenlivet.elvenkind.com>
	<x5hdsbhu04.fsf@lola.goethe.zz> <87n022ee2l.fsf@infovore.xs4all.nl>
Message-ID: <x5zn62pm17.fsf@lola.goethe.zz>

Olaf Weber <olaf@infovore.xs4all.nl> writes:

> David Kastrup writes:
> 
> [...]
> 
> > There is no such control sequence.  This is the output from an
> > overfull hbox message.  It contains only nameless characters.
> > Whether they were produced by \mathcode, \char, \delta, whatever is
> > not known anymore.
> 
> IMO the inability to go back from the internal codes to something
> resembling the source that produced them is a bug in the design of
> TeX.  "Fixing" TeX would require a major rewrite.

What is the source that produced them?

If you have the following TeX file:

\input binhex.tex
\char"\hex{`x}

What is the source of the `z' if I have

\def\xxx#1{\yyy{#1}}
\def\yyy#1{#1}

\xxx{z}

Is it the source code calling \xxx?  Is it the source of \xxx?  That
of \yyy?

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From pragma at wxs.nl  Wed Jul 14 18:58:31 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Wed Jul 14 19:01:01 2004
Subject: [tex-live] Re: [tex-implementors] bug in etex
In-Reply-To: <Pine.LNX.4.60.0407141727320.27913@pcl321.mppmu.mpg.de>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk> <87wu17g6i1.fsf@infovore.xs4all.nl>
	<87smbugarr.fsf@infovore.xs4all.nl>
	<Pine.LNX.4.60.0407141727320.27913@pcl321.mppmu.mpg.de>
Message-ID: <40F56637.4030109@wxs.nl>

Peter Breitenlohner wrote:

> Referencing the (non-existing) \toks265 results in cur_ptr==null. Even
> without that, i.e. with cur_ptr!=null the "q:=sa_ptr(cur_ptr)" gives a
> wrong value!

indeed, this is how i ran into it, i got empty toks while i expected values 

Thanks to all for the speed of looking into it. 

Hans  

PS. Some time ago there was a bug related the lastnode, did fabrice's patch migrate back into the etex source? 

Hans  

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Wed Jul 14 19:01:58 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Wed Jul 14 19:03:10 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <200407141607.i6EG7OE19125@f7.net>
References: <200407141607.i6EG7OE19125@f7.net>
Message-ID: <40F56706.1060700@wxs.nl>

Karl Berry wrote:

>    eh .. only terminal then, not files! 
>
>Yes, agreed.  We are only discussing terminal output.
>
>Is this approach implementable with tcx as it stands now?
>(I hope.)
>  
>
no, because the tcx concerns the file as well; maybe two tcx files are 
needed, one for files and one for the terminal

Hans

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Wed Jul 14 19:03:47 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Wed Jul 14 19:06:01 2004
Subject: [tex-live] Re: [tex-implementors] bug in etex
In-Reply-To: <87vfgqef9k.fsf@infovore.xs4all.nl>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk> <87wu17g6i1.fsf@infovore.xs4all.nl>
	<87smbugarr.fsf@infovore.xs4all.nl>
	<Pine.LNX.4.60.0407141727320.27913@pcl321.mppmu.mpg.de>
	<87vfgqef9k.fsf@infovore.xs4all.nl>
Message-ID: <40F56773.1000407@wxs.nl>

Olaf Weber wrote:

>It prevents the crash.  I'm not sure how to check for correctness
>beyond that point.
>  
>
i can do that as soon as i have win binaries 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Wed Jul 14 19:08:52 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Wed Jul 14 19:11:05 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <87iscqedt5.fsf@infovore.xs4all.nl>
References: <200407141532.i6EFWFF11300@f7.net> <40F5583D.4050703@wxs.nl>
	<87iscqedt5.fsf@infovore.xs4all.nl>
Message-ID: <40F568A4.9020902@wxs.nl>

Olaf Weber wrote:

>(And I believe I'm entitled to a small "I told you so" as I did try to
>point this out during previous rounds of this discussion.)
>  
>
-) i'm aware of the internal mapping that tex does, but i just wondered where this anomality originates esp since i know of no other system that uses ^^ for escaping; maybe that was normal 25 years ago 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From dak at gnu.org  Wed Jul 14 19:16:09 2004
From: dak at gnu.org (David Kastrup)
Date: Wed Jul 14 19:17:17 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <40F568A4.9020902@wxs.nl>
References: <200407141532.i6EFWFF11300@f7.net> <40F5583D.4050703@wxs.nl>
	<87iscqedt5.fsf@infovore.xs4all.nl> <40F568A4.9020902@wxs.nl>
Message-ID: <x5hdsapl0m.fsf@lola.goethe.zz>

Hans Hagen <pragma@wxs.nl> writes:

> Olaf Weber wrote:
> 
> >(And I believe I'm entitled to a small "I told you so" as I did try to
> >point this out during previous rounds of this discussion.)
> >  
> -) i'm aware of the internal mapping that tex does, but i just
>  wondered where this anomality originates esp since i know of no other
>  system that uses ^^ for escaping; maybe that was normal 25 years ago

It never was, but single ^ signs already have a different meaning in
TeX.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From karl at freefriends.org  Wed Jul 14 19:22:55 2004
From: karl at freefriends.org (Karl Berry)
Date: Wed Jul 14 19:24:02 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <40F56706.1060700@wxs.nl>
Message-ID: <200407141722.i6EHMtb06012@f7.net>

    no, because the tcx concerns the file as well; maybe two tcx files are 
    needed, one for files and one for the terminal

Another column for the TCX would be easier to manage, I expect.

Is there no way, in the current setup of things, to affect only the
terminal output?  Olaf?

From karl at freefriends.org  Wed Jul 14 19:22:55 2004
From: karl at freefriends.org (Karl Berry)
Date: Wed Jul 14 19:24:04 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <40F568A4.9020902@wxs.nl>
Message-ID: <200407141722.i6EHMtO05998@f7.net>

    no other system that uses ^^ for escaping; maybe that was normal 25
    years ago

No.  I always figured it came from the convention of writing "^A" for
Control-A, etc.  Except of course he wanted ^ for superscript, so he had
to use ^^. Just a random idiosyncrasy, in other words.

From dak at gnu.org  Wed Jul 14 19:39:33 2004
From: dak at gnu.org (David Kastrup)
Date: Wed Jul 14 19:40:45 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <200407141722.i6EHMtb06012@f7.net>
References: <200407141722.i6EHMtb06012@f7.net>
Message-ID: <x5d62ypjxm.fsf@lola.goethe.zz>

karl@freefriends.org (Karl Berry) writes:

>     no, because the tcx concerns the file as well; maybe two tcx files are 
>     needed, one for files and one for the terminal
> 
> Another column for the TCX would be easier to manage, I expect.

I really think that there should be no difference between log and
terminal output.  After all, the log is a more verbose version of the
terminal, and if we can't correlate log and terminal messages because
of different encodings, this is an added nuisance without apparent
gains.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From olaf at infovore.xs4all.nl  Wed Jul 14 21:33:44 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Wed Jul 14 21:34:36 2004
Subject: [tex-live] Re: [tex-implementors] bug in etex
In-Reply-To: <87ekneednd.fsf@infovore.xs4all.nl> (Olaf Weber's message of
	"Wed, 14 Jul 2004 18:50:46 +0200")
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk> <87wu17g6i1.fsf@infovore.xs4all.nl>
	<87smbugarr.fsf@infovore.xs4all.nl>
	<Pine.LNX.4.60.0407141727320.27913@pcl321.mppmu.mpg.de>
	<87vfgqef9k.fsf@infovore.xs4all.nl>
	<Pine.LNX.4.60.0407141839260.27913@pcl321.mppmu.mpg.de>
	<87ekneednd.fsf@infovore.xs4all.nl>
Message-ID: <87acy2e63r.fsf@infovore.xs4all.nl>

Olaf Weber writes:

> ...  I'm not sure how to check for correctness beyond that point.

Note that the "fixed" etex seems to etrip slightly differently from
before.  Not sure whether this indicates a problem with the code or
whether it means the etrip test was already showing us something we
were ignoring...

+< {reassigning \toks3000=}
+< {reassigning \toks3000=}
+---
+> {changing \toks3000=}
+> {into \toks3000=a b c}
+> {changing \toks3000=a b c}
+> {into \toks3000=}

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From olaf at infovore.xs4all.nl  Wed Jul 14 21:43:28 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Wed Jul 14 21:44:16 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <200407141722.i6EHMtb06012@f7.net> (Karl Berry's message of
	"Wed, 14 Jul 2004 13:22:55 -0400")
References: <200407141722.i6EHMtb06012@f7.net>
Message-ID: <87658qe5nj.fsf@infovore.xs4all.nl>

Karl Berry writes:

>     no, because the tcx concerns the file as well; maybe two tcx files are 
>     needed, one for files and one for the terminal

> Another column for the TCX would be easier to manage, I expect.

> Is there no way, in the current setup of things, to affect only the
> terminal output?  Olaf?

FWIW I just checked in new code containing fixes for the encTeX
problem, which threw a spanner into the printing functions already.

In TeX, the decision whether to expand a character into an escape
sequence is made comparatively early, and the selector determining
where a character goes includes |term_only|, |log_only|, and
|term_and_log|.  This complicates matters somewhat.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From olaf at infovore.xs4all.nl  Wed Jul 14 21:44:45 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Wed Jul 14 21:45:33 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <40F568A4.9020902@wxs.nl> (Hans Hagen's message of "Wed, 14 Jul
	2004 19:08:52 +0200")
References: <200407141532.i6EFWFF11300@f7.net> <40F5583D.4050703@wxs.nl>
	<87iscqedt5.fsf@infovore.xs4all.nl> <40F568A4.9020902@wxs.nl>
Message-ID: <871xjee5le.fsf@infovore.xs4all.nl>

Hans Hagen writes:
> Olaf Weber wrote:

>> (And I believe I'm entitled to a small "I told you so" as I did try to
>> point this out during previous rounds of this discussion.)

> -) i'm aware of the internal mapping that tex does, but i just
> wondered where this anomality originates esp since i know of no other
> system that uses ^^ for escaping; maybe that was normal 25 years ago

Now I'm not sure what anomaly you're talking about.  The use of ^^ is
idiosyncratic, but any consistent quoting strategy would have done.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From olaf at infovore.xs4all.nl  Wed Jul 14 22:59:30 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Wed Jul 14 23:00:03 2004
Subject: [tex-live] Updates to web2c parts of tree -- encTeX fix, e-TeX fix.
Message-ID: <87pt6ycnkd.fsf@infovore.xs4all.nl>

Change 5505 is an ugly bundle of a lot of stuff that had accumulated
in my tree and I didn't have the energy to try and separate out the
checkins.  Among other things, it includes what I believe to be a fix
for the encTeX problem recently discussed.

Change 5507 contains Peter Breitenlohner's fix for the e-TeX problem
being discussed on this list.


infovore:/home/olaf$ p4 describe -s 5505 5506 5507 5508
Change 5505 by olaf@olaf on 2004/07/14 20:29:22

        Add a second parameter to usagehelp (aka usage_help) to give
        the email address for bug reports.  Affects all .ch files in
        the list except for mf.ch, mp.ch, tex.ch.  Also affects
        web2c/mpware/mpto.c, web2c/omegafonts/omfonts.c.  And of
        course web2c/lib/usage.c, web2c/config.h.

        Add BUG_ADDRESS to web2c/lib/texmfmp.c, web2c/*dir/*extra.h.

        To fix a problem with the encTeX merge, go back to the older
        system by which TeX prints (e.g, slow_print, print, print_char
        instead of print, print_char, print_visible_char).

        Similar changes to mf.ch (incomplete).

        Related changes to mp.ch.

        Replace setupcharset with readtcxfile and some additional code
        in the engine's change file.  Affects web2c/lib/texmfmp.c,
        web2c/web2c/texmfmp.defines, web2c/texmfmp.h.

        Correct help messages for Aleph in web2c/texmfmp-help.h.

        Remove redundant -o $@ from web2c/web2c/Makefile.in.

        Add -output-format to the list of recognized options in
        web2c/lib/texmfmp.c.

Affected files ...

... //depot/Build/source.development/TeX/texk/web2c/ChangeLog#24 edit
... //depot/Build/source.development/TeX/texk/web2c/alephdir/alephextra-rc2.h#4 edit
... //depot/Build/source.development/TeX/texk/web2c/alephdir/alephextra.h#4 edit
... //depot/Build/source.development/TeX/texk/web2c/bibtex.ch#10 edit
... //depot/Build/source.development/TeX/texk/web2c/config.h#9 edit
... //depot/Build/source.development/TeX/texk/web2c/cwebdir/comm-w2c.ch#9 edit
... //depot/Build/source.development/TeX/texk/web2c/dvicopy.ch#6 edit
... //depot/Build/source.development/TeX/texk/web2c/dvitomp.ch#9 edit
... //depot/Build/source.development/TeX/texk/web2c/dvitype.ch#5 edit
... //depot/Build/source.development/TeX/texk/web2c/etexdir/ChangeLog#10 edit
... //depot/Build/source.development/TeX/texk/web2c/etexdir/etexextra.h#5 edit
... //depot/Build/source.development/TeX/texk/web2c/gftodvi.ch#6 edit
... //depot/Build/source.development/TeX/texk/web2c/gftopk.ch#4 edit
... //depot/Build/source.development/TeX/texk/web2c/gftype.ch#4 edit
... //depot/Build/source.development/TeX/texk/web2c/lib/ChangeLog#17 edit
... //depot/Build/source.development/TeX/texk/web2c/lib/texmfmp.c#38 edit
... //depot/Build/source.development/TeX/texk/web2c/lib/usage.c#3 edit
... //depot/Build/source.development/TeX/texk/web2c/mf.ch#16 edit
... //depot/Build/source.development/TeX/texk/web2c/mft.ch#6 edit
... //depot/Build/source.development/TeX/texk/web2c/mp.ch#20 edit
... //depot/Build/source.development/TeX/texk/web2c/mpware/ChangeLog#12 edit
... //depot/Build/source.development/TeX/texk/web2c/mpware/mpto.c#7 edit
... //depot/Build/source.development/TeX/texk/web2c/omegadir/omegaextra.h#11 edit
... //depot/Build/source.development/TeX/texk/web2c/omegafonts/omfonts.c#7 edit
... //depot/Build/source.development/TeX/texk/web2c/omegaware/odvicopy.ch#6 edit
... //depot/Build/source.development/TeX/texk/web2c/omegaware/odvitype.ch#6 edit
... //depot/Build/source.development/TeX/texk/web2c/omegaware/ofm2opl.ch#4 edit
... //depot/Build/source.development/TeX/texk/web2c/omegaware/opl2ofm.ch#4 edit
... //depot/Build/source.development/TeX/texk/web2c/omegaware/otangle.ch#4 edit
... //depot/Build/source.development/TeX/texk/web2c/omegaware/ovf2ovp.ch#4 edit
... //depot/Build/source.development/TeX/texk/web2c/omegaware/ovp2ovf.ch#4 edit
... //depot/Build/source.development/TeX/texk/web2c/patgen.ch#5 edit
... //depot/Build/source.development/TeX/texk/web2c/pdfetexdir/pdfetexextra.h#123 edit
... //depot/Build/source.development/TeX/texk/web2c/pdftexdir/pdftexextra.h#123 edit
... //depot/Build/source.development/TeX/texk/web2c/pdfxtexdir/pdfxtexextra.h#8 edit
... //depot/Build/source.development/TeX/texk/web2c/pktogf.ch#4 edit
... //depot/Build/source.development/TeX/texk/web2c/pktype.ch#4 edit
... //depot/Build/source.development/TeX/texk/web2c/pltotf.ch#4 edit
... //depot/Build/source.development/TeX/texk/web2c/pooltype.ch#5 edit
... //depot/Build/source.development/TeX/texk/web2c/tangle.ch#8 edit
... //depot/Build/source.development/TeX/texk/web2c/tex.ch#34 edit
... //depot/Build/source.development/TeX/texk/web2c/texmfmp-help.h#22 edit
... //depot/Build/source.development/TeX/texk/web2c/texmfmp.h#15 edit
... //depot/Build/source.development/TeX/texk/web2c/tftopl.ch#4 edit
... //depot/Build/source.development/TeX/texk/web2c/vftovp.ch#6 edit
... //depot/Build/source.development/TeX/texk/web2c/vptovf.ch#4 edit
... //depot/Build/source.development/TeX/texk/web2c/weave.ch#6 edit
... //depot/Build/source.development/TeX/texk/web2c/web2c/ChangeLog#13 edit
... //depot/Build/source.development/TeX/texk/web2c/web2c/Makefile.in#6 edit
... //depot/Build/source.development/TeX/texk/web2c/web2c/texmf.defines#9 edit
... //depot/Build/source.development/TeX/texk/xdvik/Makefile.in#28 edit

Change 5506 by olaf@olaf on 2004/07/14 20:29:57

        Update *boot files affected by change to usagehelp().

Affected files ...

... //depot/Build/source.development/TeX/texk/web2c/cwebboot.c#10 edit
... //depot/Build/source.development/TeX/texk/web2c/tangleboot.p#10 edit

Change 5507 by olaf@olaf on 2004/07/14 20:30:26

        Add fix from Peter Breitenlohner.

Affected files ...

... //depot/Build/source.development/TeX/texk/web2c/etexdir/etex.fix#6 edit

Change 5508 by olaf@olaf on 2004/07/14 21:28:21

        Complete reversion to old-style print code in mf.ch.

Affected files ...

... //depot/Build/source.development/TeX/texk/web2c/ChangeLog#25 edit
... //depot/Build/source.development/TeX/texk/web2c/mf.ch#17 edit

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From wl at gnu.org  Wed Jul 14 23:42:59 2004
From: wl at gnu.org (Werner LEMBERG)
Date: Wed Jul 14 23:47:59 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <200407141532.i6EFWFF11300@f7.net>
References: <20040714032303.GD9641@dbs.uni-hannover.de>
	<200407141532.i6EFWFF11300@f7.net>
Message-ID: <20040714.234259.15403127.wl@gnu.org>

> Do any *languages* need codes <32 printable?

Vietnamese (both VSCII and VISCII encoding, IIRC).


    Werner

From karl at freefriends.org  Thu Jul 15 01:51:11 2004
From: karl at freefriends.org (Karl Berry)
Date: Thu Jul 15 01:52:19 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <20040714.234259.15403127.wl@gnu.org>
Message-ID: <200407142351.i6ENpBD01212@f7.net>

    karl> Do any *languages* need codes <32 printable?
    wl> Vietnamese (both VSCII and VISCII encoding, IIRC).

Oh, well, then it's hopeless.

   hans> only terminal then, not files!
   ...
   dak> I really think that there should be no difference between log and
   dak> terminal output.  

Oh, well, then it's even more hopeless.


Guys, these are logically inconsistent requirements.  I see everyone's
point and don't think anyone is "wrong" ... but we can't make TL fulfill
all of this (by default).


So I think the question is what takes precedence:
1) "clean" pure 8-bit approach.
2) "mixed" 7.5-bit approach to terminal, 8-bit files (new implementation
   work needed).
3) "mixed" 7.5-bit approach to both terminal and files.

Personally, I think writing binary codes < 32 to the terminal is the
most important thing to avoid.  It can mess up users who are simply
trying to do exactly has always worked and what Knuth documents. But
that's just my opinion.  What do others think?  Thomas, Olaf, Fabrice,
Staszek, Sebastian?


Anyway, I'm shutting down my computer in a few minutes and it will stay
off for about a week (long-planned trip).  I'll be back online next
Friday or so.

Good luck.

karl

From dak at gnu.org  Thu Jul 15 02:06:16 2004
From: dak at gnu.org (David Kastrup)
Date: Thu Jul 15 02:07:28 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <200407142351.i6ENpBD01212@f7.net>
References: <200407142351.i6ENpBD01212@f7.net>
Message-ID: <x5llhmm8w7.fsf@lola.goethe.zz>

karl@freefriends.org (Karl Berry) writes:

>     karl> Do any *languages* need codes <32 printable?
>     wl> Vietnamese (both VSCII and VISCII encoding, IIRC).
> 
> Oh, well, then it's hopeless.
> 
>    hans> only terminal then, not files!
>    ...
>    dak> I really think that there should be no difference between log and
>    dak> terminal output.  
> 
> Oh, well, then it's even more hopeless.
> 
> 
> Guys, these are logically inconsistent requirements.  I see
> everyone's point and don't think anyone is "wrong" ... but we can't
> make TL fulfill all of this (by default).

I guess I'll have to make do with giving up on sensible behavior and
instead do some sort of fuzzy matching on error messages containing
^^.

Of course, it will fail on ^ followed by a control character, since
TeX has ^^^ as a legal output possibility.

It has been an uphill battle all the way to butcher TeX
implementations and locales into putting out ? as ? on the terminal.
I'll probably notify all other Emacs package authors interacting with
the location mechanism of AUCTeX that they can kiss the previous
interfaces goodbye.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From staw at gust.org.pl  Thu Jul 15 02:35:35 2004
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Thu Jul 15 02:32:34 2004
Subject: [tex-live] bin/i386-linux ready on p4...
Message-ID: <Pine.LNX.4.44.0407150232210.32402-100000@re86.internetdsl.tpnet.pl>

...covering change #5508. Passed my tests, e-tex problem, etc.
Thanks, Olaf!

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl


From pragma at wxs.nl  Thu Jul 15 09:01:19 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Jul 15 09:03:29 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <871xjee5le.fsf@infovore.xs4all.nl>
References: <200407141532.i6EFWFF11300@f7.net> <40F5583D.4050703@wxs.nl>
	<87iscqedt5.fsf@infovore.xs4all.nl> <40F568A4.9020902@wxs.nl>
	<871xjee5le.fsf@infovore.xs4all.nl>
Message-ID: <40F62BBF.4050008@wxs.nl>

Olaf Weber wrote:

>Hans Hagen writes:
>  
>
>>Olaf Weber wrote:
>>    
>>
>
>  
>
>>>(And I believe I'm entitled to a small "I told you so" as I did try to
>>>point this out during previous rounds of this discussion.)
>>>      
>>>
>
>  
>
>>-) i'm aware of the internal mapping that tex does, but i just
>>wondered where this anomality originates esp since i know of no other
>>system that uses ^^ for escaping; maybe that was normal 25 years ago
>>    
>>
>
>Now I'm not sure what anomaly you're talking about.  The use of ^^ is
>idiosyncratic, but any consistent quoting strategy would have done.
>  
>
The problem with such 'escapes' i sthat it may the confuse users (like me)

is it 

  \expandafer^^G\whatever 

or 

  \expandafter^\expandafter^\expandafter G

(and something similar for #1 ##1 ... ##########1 etc, i.e. the macro parameter character is even more tricky sometimes)

tex differs from other systems (that use escapes) in the fact that it expands (although ... in javascript one ends up with messy escaped chars in regexps, so it may belong to thsi world)   

Anyhow, we have to live with it and somehow deal with the terminal output (i'd love to be able to spit out ansi escape sequences to color messages, so if we can have 8 bit terminal output ... -) 

Hans  


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From olaf at infovore.xs4all.nl  Thu Jul 15 09:09:35 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Thu Jul 15 09:09:03 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <200407142351.i6ENpBD01212@f7.net> (Karl Berry's message of
	"Wed, 14 Jul 2004 19:51:11 -0400")
References: <200407142351.i6ENpBD01212@f7.net>
Message-ID: <87llhld9w0.fsf@infovore.xs4all.nl>

Karl Berry writes:

> Guys, these are logically inconsistent requirements.  I see everyone's
> point and don't think anyone is "wrong" ... but we can't make TL fulfill
> all of this (by default).

Exactly.  Like it or not, we'll have to pick some kind of default that
we can at least live with.

> So I think the question is what takes precedence:
> 1) "clean" pure 8-bit approach.

Implementation: "-8bit" in fmtutil.cnf.

> 2) "mixed" 7.5-bit approach to terminal, 8-bit files (new implementation
>    work needed).

Which I'm not even starting on unless the clear consensus is that this
is what should be done.

> 3) "mixed" 7.5-bit approach to both terminal and files.

Implementation: "-translate-file=cp8bit" in fmtutil.cnf.  That's the
same file that is automatically included in current released TeX-live,
and makes codes 128...255 printable.

> Personally, I think writing binary codes < 32 to the terminal is the
> most important thing to avoid.  It can mess up users who are simply
> trying to do exactly has always worked and what Knuth documents. But
> that's just my opinion.  What do others think?  Thomas, Olaf, Fabrice,
> Staszek, Sebastian?

One this I'd like to observe is that on my Debian GNU/Linux system,
xterm does not exhibit this behaviour.  I believe it may be build from
different sources than the RedHat (etc) xterm, and probably has SO and
SI disabled.  On my IRIX machine, the normal winterm and xterm both
seem to ignore SO and SI.

Personally, I have seen the switch-to-and-unreadable-mess behaviour of
xterm only on Linux systems.  I do not recall ever needing it, only
being frustrated by it, and suspect that I wasn't the only one.

Has anyone encountered other terminal types that get confused like
this?

Of course, it is also possible to get TeX to spew actual ESC sequences
and mess up a terminal that way.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From taco at elvenkind.com  Thu Jul 15 09:22:43 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu Jul 15 09:23:50 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <87llhld9w0.fsf@infovore.xs4all.nl>
References: <200407142351.i6ENpBD01212@f7.net>
	<87llhld9w0.fsf@infovore.xs4all.nl>
Message-ID: <20040715092243.2b70a906@glenlivet.elvenkind.com>

On Thu, 15 Jul 2004 09:09:35 +0200, Olaf wrote:

> Has anyone encountered other terminal types that get confused like
> this?

Only my linux xterm, the linux console, and the ms-dos console have
ever done that (not sure if ms-dos is relevant). 

I suspect that the problem is caused by the TERM=linux environment 
setting. In the past I have had to manually change that into TERM=xterm.

-- 
groeten,

Taco

From peb at mppmu.mpg.de  Thu Jul 15 10:10:34 2004
From: peb at mppmu.mpg.de (Peter Breitenlohner)
Date: Thu Jul 15 10:11:44 2004
Subject: [tex-live] Re: [tex-implementors] bug in etex
In-Reply-To: <87acy2e63r.fsf@infovore.xs4all.nl>
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk>
	<87wu17g6i1.fsf@infovore.xs4all.nl> <87smbugarr.fsf@infovore.xs4all.nl>
	<Pine.LNX.4.60.0407141727320.27913@pcl321.mppmu.mpg.de>
	<87vfgqef9k.fsf@infovore.xs4all.nl>
	<Pine.LNX.4.60.0407141839260.27913@pcl321.mppmu.mpg.de>
	<87ekneednd.fsf@infovore.xs4all.nl>
	<87acy2e63r.fsf@infovore.xs4all.nl>
Message-ID: <Pine.LNX.4.60.0407150953300.27913@pcl321.mppmu.mpg.de>

On Wed, 14 Jul 2004, Olaf Weber wrote:

> Note that the "fixed" etex seems to etrip slightly differently from
> before.  Not sure whether this indicates a problem with the code or
> whether it means the etrip test was already showing us something we
> were ignoring...
>
> +< {reassigning \toks3000=}
> +< {reassigning \toks3000=}
> +---
> +> {changing \toks3000=}
> +> {into \toks3000=a b c}
> +> {changing \toks3000=a b c}
> +> {into \toks3000=}

Hi Olaf,

ouch, the new output is correct and we should have noticed that bug ages
ago: lines 1002,1003 of etrip.tex read
>         \toks30=\1 \toks30=\toks2000 \toks30=\toks2001
>         \toks3000=\1 \toks3000=\toks2000 \toks3000=\toks2001
with "\1" defined via "\toksdef\1=2002". Consequently the result should be
> {changing \toks30=}
> {into \toks30=a b c}
> {changing \toks30=a b c}
> {into \toks30=}
> {changing \toks30=}
> {into \toks30=a b c}
> {changing \toks3000=}
> {into \toks3000=a b c}
> {changing \toks3000=a b c}
> {into \toks3000=}
> {changing \toks3000=}
> {into \toks3000=a b c}
and not
> {changing \toks30=}
> {into \toks30=a b c}
> {changing \toks30=a b c}
> {into \toks30=}
> {changing \toks30=}
> {into \toks30=a b c}
> {reassigning \toks3000=}
> {reassigning \toks3000=}
> {changing \toks3000=}
> {into \toks3000=a b c}
exactly as found in the trip test for the "fixed" etex.

I would suggest that you temporarily modify your etex.log by hand, until I
have prepared a revised version.

regards
Peter Breitenlohner <peb@mppmu.mpg.de>

From olaf at infovore.xs4all.nl  Thu Jul 15 10:20:36 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Thu Jul 15 10:20:08 2004
Subject: [tex-live] Re: [tex-implementors] bug in etex
In-Reply-To: <Pine.LNX.4.60.0407150953300.27913@pcl321.mppmu.mpg.de> (Peter
	Breitenlohner's message of "Thu, 15 Jul 2004 10:10:34 +0200 (CEST)")
References: <40EECAA3.3010909@wxs.nl>
	<20040713145359.3eb46258@glenlivet.elvenkind.com>
	<Pine.LNX.4.60.0407131622150.27913@pcl321.mppmu.mpg.de>
	<Pine.LNX.4.60.0407131834560.27913@pcl321.mppmu.mpg.de>
	<40F415E8.4050408@Rhul.Ac.Uk> <87wu17g6i1.fsf@infovore.xs4all.nl>
	<87smbugarr.fsf@infovore.xs4all.nl>
	<Pine.LNX.4.60.0407141727320.27913@pcl321.mppmu.mpg.de>
	<87vfgqef9k.fsf@infovore.xs4all.nl>
	<Pine.LNX.4.60.0407141839260.27913@pcl321.mppmu.mpg.de>
	<87ekneednd.fsf@infovore.xs4all.nl>
	<87acy2e63r.fsf@infovore.xs4all.nl>
	<Pine.LNX.4.60.0407150953300.27913@pcl321.mppmu.mpg.de>
Message-ID: <87d62xd6ln.fsf@infovore.xs4all.nl>

Peter Breitenlohner writes:

> Hi Olaf,

> ouch, the new output is correct and we should have noticed that bug ages
> ago: ...

> I would suggest that you temporarily modify your etex.log by hand, until I
> have prepared a revised version.

Will do.

Thanks.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From vvv at vsu.ru  Thu Jul 15 13:48:32 2004
From: vvv at vsu.ru (Vladimir Volovich)
Date: Thu Jul 15 13:51:18 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <x5fz7uhku2.fsf@lola.goethe.zz> (David Kastrup's message of "14
	Jul 2004 13:47:17 +0200")
References: <20040714032303.GD9641@dbs.uni-hannover.de>
	<20040714091250.0831e927@glenlivet.elvenkind.com>
	<87acy3qbro.fsf@video.uic.vsu.ru> <x5d62zhtrb.fsf@lola.goethe.zz>
	<87pt6yq1eg.fsf@video.uic.vsu.ru> <x5fz7uhku2.fsf@lola.goethe.zz>
Message-ID: <87d62xv6cv.fsf@video.uic.vsu.ru>

Hi!

David Kastrup wrote:

> Vladimir Volovich <vvv@vsu.ru> writes:
> > "DK" == David Kastrup writes:
> > 
> >  DK> Sorry, but when TeX is running inside of a TeX shell (writing
> >  DK> into a pipe or pseudo terminal) there are valid reasons for
> >  DK> wanting 8bit throughput.  So while we don't want a _default_
> >  DK> print-through setting probably, we at least want an option to
> >  DK> have the terminal output go through.
> > 
> > BTW, is it that hard to automatically translate ^^-notation to 8-bit
> > notation inside the AUC-TeX?
> 
> The problem is that it is wrong.  If I have something like
> 
>   You can use \verb+^^I+ to produce a TAB character.
> 
> then this translation should not happen.  If I do this sort of
> translation from the log file, then I don't get a string from the
> error message context suitable for searching in the source text, since
> it is completely unknown whether ^^I or a TAB character was actually
> typed.  I would then have to convert each ^^ occurence into a regular
> expression like \(?:\^\^I\|	\).  And then we have different ^^
> conventions to cater for in connection with Omega and stuff.

Compare this with your reply to Taco Hoekwater:

> > The user *did not* input the character corresponding to ^^J, but the
> > 6 characters comprising the string "\delta". The fact that someone
> > \mathcode-ed the character ^^J to mean the same thing as the
> > \mathchardef named \delta should not have an effect on the printing
> > of the control sequence "\delta".
> 
> There is no such control sequence.  This is the output from an
> overfull hbox message.  It contains only nameless characters.
> Whether they were produced by \mathcode, \char, \delta, whatever is
> not known anymore.

You argue that it's not possible to "go back" to \delta once it
reached TeX's stomach (which is quite true); I see no major difference
between this "loss of connection to original input" and the same loss
of connection to original input which occurs in e.g. \verb+^^I+: once
TeX have read the input, and converted it to tokens, the connection to
the original input is lost.

You also wrote:

> It has been an uphill battle all the way to butcher TeX
> implementations and locales into putting out ? as ? on the terminal.

If one uses inputenc-like approach, then the document may have
contained the character ? in some input encoding (it may even have
been represented by several bytes in case of utf-8 input encoding),
and once this character reaches the TeX's stomach, the ? ends up as a
completely different thing compared to what it may have been in the
original document.

And TeX may output to terminal in two "fundamentally" different
situations:

* unprocessed text (in the original input encoding) as it appears in
  the document, when TeX shows error context lines

* text from stomach e.g. when printing "overfill hbox" messages

There is nothing which can guarantee that the encodings of the
characters in input encoding (in error context lines messages) match
encodings of characters in TeX's internal representation.

So, even if TeX will output ? in 8-bit form to the terminal, it will
ABSOLUTELY not help AUC-TeX, because this character absolutely may
have no relation to letter ?.

Best,
v.

From vvv at vsu.ru  Thu Jul 15 14:56:37 2004
From: vvv at vsu.ru (Vladimir Volovich)
Date: Thu Jul 15 14:59:19 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <87d62xv6cv.fsf@video.uic.vsu.ru> (Vladimir Volovich's message of
	"Thu, 15 Jul 2004 15:48:32 +0400")
References: <20040714032303.GD9641@dbs.uni-hannover.de>
	<20040714091250.0831e927@glenlivet.elvenkind.com>
	<87acy3qbro.fsf@video.uic.vsu.ru> <x5d62zhtrb.fsf@lola.goethe.zz>
	<87pt6yq1eg.fsf@video.uic.vsu.ru> <x5fz7uhku2.fsf@lola.goethe.zz>
	<87d62xv6cv.fsf@video.uic.vsu.ru>
Message-ID: <873c3tv37e.fsf@video.uic.vsu.ru>

"VV" == Vladimir Volovich writes:

 VV> So, even if TeX will output ? in 8-bit form to the terminal, it
 VV> will ABSOLUTELY not help AUC-TeX, because this character
 VV> absolutely may have no relation to letter ?.

The same way, if TeX will output character with code 9 instead of ^^I
it will not mean that the character has any relation to the tabulation,
because it may correspond to character with code 9 in some font
which in almost all cases has absolutely NO relation to TAB.

So, seeing a TAB on console in such situation will be absolutely
misleading and useless. That's probably what DEK meant when he wrote
in tex.web:

  On the other hand,
  even people with an extended character set will want to represent string
  @'15 by \.{\^\^M}, since @'15 is |carriage_return|; the idea is to
  produce visible strings instead of tabs or line-feeds or carriage-returns
  or bell-rings or characters that are treated anomalously in text files.

Best,
v.

From kakuto at fsci.fuk.kindai.ac.jp  Thu Jul 15 23:55:11 2004
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu Jul 15 23:57:46 2004
Subject: [tex-live] Updates to web2c parts of tree -- encTeX fix, e-TeX
	fix.
In-Reply-To: Your message of "Wed, 14 Jul 2004 22:59:30 +0200"
References: <87pt6ycnkd.fsf@infovore.xs4all.nl>
Message-ID: <200407152155.i6FLtCDp027541@jupiter.fsci.fuk.kindai.ac.jp>

> Change 5505 is an ugly bundle of a lot of stuff that had accumulated
> in my tree and I didn't have the energy to try and separate out the
> checkins.  Among other things, it includes what I believe to be a fix
> for the encTeX problem recently discussed.

Is the --8bit option dummy currently?

Best regards
Akira

From kakuto at fsci.fuk.kindai.ac.jp  Fri Jul 16 03:28:24 2004
From: kakuto at fsci.fuk.kindai.ac.jp (Akira Kakuto)
Date: Fri Jul 16 03:30:59 2004
Subject: [tex-live] Updates to web2c parts of tree -- encTeX fix, e-TeXfix.
In-Reply-To: Your message of "Fri, 16 Jul 2004 06:55:11 +0900"
References: <200407152155.i6FLtCDp027541@jupiter.fsci.fuk.kindai.ac.jp>
Message-ID: <200407160128.i6G1SP56028368@jupiter.fsci.fuk.kindai.ac.jp>

> > Change 5505 is an ugly bundle of a lot of stuff that had accumulated
> > in my tree and I didn't have the energy to try and separate out the
> > checkins.  Among other things, it includes what I believe to be a fix
> > for the encTeX problem recently discussed.
> 
> Is the --8bit option dummy currently?

I have noticed that the --8bit option is effective. Sorry.

Best regards
Akira

From dak at gnu.org  Fri Jul 16 10:44:56 2004
From: dak at gnu.org (David Kastrup)
Date: Fri Jul 16 10:46:08 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <87d62xv6cv.fsf@video.uic.vsu.ru>
References: <20040714032303.GD9641@dbs.uni-hannover.de>
	<20040714091250.0831e927@glenlivet.elvenkind.com>
	<87acy3qbro.fsf@video.uic.vsu.ru> <x5d62zhtrb.fsf@lola.goethe.zz>
	<87pt6yq1eg.fsf@video.uic.vsu.ru> <x5fz7uhku2.fsf@lola.goethe.zz>
	<87d62xv6cv.fsf@video.uic.vsu.ru>
Message-ID: <x5iscojq7r.fsf@lola.goethe.zz>

Vladimir Volovich <vvv@vsu.ru> writes:

> David Kastrup wrote:
> 
> > Vladimir Volovich <vvv@vsu.ru> writes:
> > > "DK" == David Kastrup writes:
> > > 
> > >  DK> Sorry, but when TeX is running inside of a TeX shell
> > >  DK> (writing into a pipe or pseudo terminal) there are valid
> > >  DK> reasons for wanting 8bit throughput.  So while we don't
> > >  DK> want a _default_ print-through setting probably, we at
> > >  DK> least want an option to have the terminal output go
> > >  DK> through.
> > > 
> > > BTW, is it that hard to automatically translate ^^-notation to
> > > 8-bit notation inside the AUC-TeX?
> > 
> > The problem is that it is wrong.  If I have something like
> > 
> >   You can use \verb+^^I+ to produce a TAB character.
> > 
> > then this translation should not happen.  If I do this sort of
> > translation from the log file, then I don't get a string from the
> > error message context suitable for searching in the source text,
> > since it is completely unknown whether ^^I or a TAB character was
> > actually typed.  I would then have to convert each ^^ occurence
> > into a regular expression like \(?:\^\^I\| \).  And then we have
> > different ^^ conventions to cater for in connection with Omega and
> > stuff.
> 
> Compare this with your reply to Taco Hoekwater:
> 
> > > The user *did not* input the character corresponding to ^^J, but
> > > the 6 characters comprising the string "\delta". The fact that
> > > someone \mathcode-ed the character ^^J to mean the same thing as
> > > the \mathchardef named \delta should not have an effect on the
> > > printing of the control sequence "\delta".
> > 
> > There is no such control sequence.  This is the output from an
> > overfull hbox message.  It contains only nameless characters.
> > Whether they were produced by \mathcode, \char, \delta, whatever is
> > not known anymore.
> 
> You argue that it's not possible to "go back" to \delta once it
> reached TeX's stomach (which is quite true); I see no major
> difference between this "loss of connection to original input" and
> the same loss of connection to original input which occurs in
> e.g. \verb+^^I+: once TeX have read the input, and converted it to
> tokens, the connection to the original input is lost.

Well, and your point is?  The error context in TeX's error messages
is straight from the input buffer, _before_ conversion to tokens.
And it is the veracity of those error messages that I am talking
about all the time.  Tokenization has absolutely nothing to with it.
Neither has internal list presentation.

The problem is that TeX is using the same output routines for
rendering error message contexts "readable" as it does for rendering
material passed through or produced by TeX readable.

> You also wrote:
> 
> > It has been an uphill battle all the way to butcher TeX
> > implementations and locales into putting out ? as ? on the
> > terminal.
> 
> If one uses inputenc-like approach, then the document may have
> contained the character ? in some input encoding (it may even have
> been represented by several bytes in case of utf-8 input encoding),
> and once this character reaches the TeX's stomach, the ? ends up as a
> completely different thing compared to what it may have been in the
> original document.

Error message contexts don't pass TeX's stomach.  They don't even
pass its tokenizer.

> And TeX may output to terminal in two "fundamentally" different
> situations:
> 
> * unprocessed text (in the original input encoding) as it appears in
>   the document, when TeX shows error context lines
> 
> * text from stomach e.g. when printing "overfill hbox" messages
> 
> There is nothing which can guarantee that the encodings of the
> characters in input encoding (in error context lines messages) match
> encodings of characters in TeX's internal representation.

Who said it was?

> So, even if TeX will output ? in 8-bit form to the terminal, it will
> ABSOLUTELY not help AUC-TeX, because this character absolutely may
> have no relation to letter ?.

I am talking about error message contexts.  The important thing is
that the error context corresponds with the source, regardless of what
input encoding may be active.  The input encoding is not even
involved at the level I am talking about.  I am not sure, though, how
the effects of using a latin2 tcx file or similar would be to those
error contexts, and it is not the recommended LaTeX way, anyhow.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From daleif at imf.au.dk  Fri Jul 16 13:45:28 2004
From: daleif at imf.au.dk (Lars Madsen)
Date: Fri Jul 16 13:46:36 2004
Subject: [tex-live] TL 2003 on RH 7.3
Message-ID: <Pine.LNX.4.50.0407161337100.2331-100000@radagast.imf.au.dk>


A friend of mine tried to install TL 2003 on her RH 7.3 but it failed with
an error like this

Error: `etex -ini  -jobname=latex -progname=latex *latex.ini' failed
Error: `pdftex -ini  -jobname=pdftex -progname=pdftex pdftex.ini' failed
Error: `pdfetex -ini  -jobname=pdflatex -progname=pdflatex *pdflatex.ini'
failedError: `omega -ini  -jobname=lambda -progname=lambda lambda.ini'
failed
Error: `eomega -ini  -jobname=elambda -progname=elambda *elambda.ini'
failed

etc.

any idea what happens here, it install without problems om our RH 7.2
system.


TEXMFINPUT(S) has been set to a local directory, can this influence
anything??


/daleif

``You cannot help men permanently by doing for them
what they could and should do for themselves. ''
 -- Abraham Lincoln

From vvv at vsu.ru  Sat Jul 17 00:42:13 2004
From: vvv at vsu.ru (Vladimir Volovich)
Date: Sat Jul 17 00:43:52 2004
Subject: [tex-live] fwd: \delta in overfull \hboxes screws up xterm
In-Reply-To: <x5iscojq7r.fsf@lola.goethe.zz> (David Kastrup's message of "16
	Jul 2004 10:44:56 +0200")
References: <20040714032303.GD9641@dbs.uni-hannover.de>
	<20040714091250.0831e927@glenlivet.elvenkind.com>
	<87acy3qbro.fsf@video.uic.vsu.ru> <x5d62zhtrb.fsf@lola.goethe.zz>
	<87pt6yq1eg.fsf@video.uic.vsu.ru> <x5fz7uhku2.fsf@lola.goethe.zz>
	<87d62xv6cv.fsf@video.uic.vsu.ru> <x5iscojq7r.fsf@lola.goethe.zz>
Message-ID: <m3acxz7ewq.fsf@vvv.vsu.ru>

"DK" == David Kastrup writes:

[...]
 >> You argue that it's not possible to "go back" to \delta once it
 >> reached TeX's stomach (which is quite true); I see no major
 >> difference between this "loss of connection to original input" and
 >> the same loss of connection to original input which occurs in
 >> e.g. \verb+^^I+: once TeX have read the input, and converted it to
 >> tokens, the connection to the original input is lost.

 DK> Well, and your point is?  The error context in TeX's error
 DK> messages is straight from the input buffer, _before_ conversion
 DK> to tokens.  And it is the veracity of those error messages that I
 DK> am talking about all the time.  Tokenization has absolutely
 DK> nothing to with it.  Neither has internal list presentation.

 DK> The problem is that TeX is using the same output routines for
 DK> rendering error message contexts "readable" as it does for
 DK> rendering material passed through or produced by TeX readable.

right, - so making "full 8-bit terminal output" will not only allow
TeX to output error context lines "as is", but also will have
potentially meaningless and/or dangerous behavior when it will be
applied to "passed through" material.

the only clean solution would be to allow full 8-bit output only for
the messages produced for unparsed material (error context lines, etc).

i don't know if it's simple enough to separate such kinds of terminal
writes in TeX.

Best,
v.

From te at dbs.uni-hannover.de  Sun Jul 18 17:32:49 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Sun Jul 18 17:34:03 2004
Subject: [tex-live] enctex support files in texmf
In-Reply-To: <Pine.LNX.4.44.0407091640570.18970-100000@re86.internetdsl.tpnet.pl>
References: <20040709085239.GA31682@dbs.uni-hannover.de>
	<Pine.LNX.4.44.0407091640570.18970-100000@re86.internetdsl.tpnet.pl>
Message-ID: <20040718153249.GA29269@dbs.uni-hannover.de>

> and tex/plain/enctex. Thomas, for me there is no reason to split
> such stuff into 2 directories, as "generic" is dedicated for macros
> which can serve for any format. We can even use enctex extensions
> for making latex format, I guess. 

have you looked at these plain-*.tex files? They \dump in the end and they
can only be used to create a plain-like format. Similar are dcfonts.tex,
ecfonts.tex and noprefnt.tex: they can be used to "patch" plain.tex.

So, I am sure that you agree with me that some subdirectory of tex/plain
is the right place for these files. I wonder what the "trouble" is that
you want to avoid.

> Next example from the current teTeX-beta: tex/generic/epsf/epsf.tex and

Reinhard Kotucha suggested to move the file (26 Jan 2003, tetex-pretest
list). Nobody disagreed...

> > doc/generic/enctex/unimap.diff
> > doc/generic/enctex/unimap.py

A diff file or a script *can* be considered to be documentation (at
least for some people). But I agree, and have moved the files.

> > doc/generic/enctex/vlna.tex
> it should go to the input area

I think that a sample document is documentation. For things like
"story.tex", "small2e.tex" and "sample2e.tex" it is nice to have them
in TEXINPUTS, because they can be used for a short test to verify the
installation. Is "vlna.tex" of the same kind?

> As you can see, it is sometimes very difficult to find out where
> the files should go.

Yes. And sometimes, it is just a matter of taste (as with story.tex,
etc.).

> It could be even more difficult to update
> a package (esp. with some new files and other removed from the 
> distribution), when the contents of that package has to be splited
> into many directories.

Lets create the right tools for package management, then this will become
easier. The user (who upgrades a package) should not need to know about
the directory structure that is used.

> Having tex/generic is enough clear.

We try to follow the tds. If we see that the tds is a pain to follow, we
try to modify and to improve it. For teTeX, I have even split latex/base,
because I have installed fontmath.cfg, fonttext.cfg and preload.cfg into
tex/generic/config (for some good reason).

Thomas

From te at dbs.uni-hannover.de  Sun Jul 18 17:36:42 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Sun Jul 18 17:37:55 2004
Subject: [tex-live] A couple of suggestions
In-Reply-To: <87iscxnxdx.fsf@video.uic.vsu.ru>
References: <20040709122833.GC8607@muisje> <87iscxnxdx.fsf@video.uic.vsu.ru>
Message-ID: <20040718153642.GB29269@dbs.uni-hannover.de>

>  SK> - for updmap an option to leave the generated mapfiles in the
>  SK> current directory
> 
> running "updmap --help" shows that this can be accomplished by
> updmap --outputdir .

Right and in this case, it makes also sense to add --nohash, so:
  updmap --nohash --outputdir .

Thomas

From Gerben.Wierda at rna.nl  Mon Jul 19 17:33:47 2004
From: Gerben.Wierda at rna.nl (Gerben Wierda)
Date: Mon Jul 19 17:34:58 2004
Subject: [tex-live] Re: Please enable ipc in tex
In-Reply-To: <87fz86kuo6.fsf@infovore.xs4all.nl>
References: <cc42fe$62m$1@sea.gmane.org>
	<x51xjuvz7b.fsf@lola.goethe.zz><ccc1ql$hbn$1@sea.gmane.org>
	<87fz86kuo6.fsf@infovore.xs4all.nl>
Message-ID: <44336.159.46.248.216.1090251227.squirrel@mail.rna.nl>

Catching up....

> Note that I am not the author of the ipc code, and don't know _that_
> much about it.  It seems to me that aggressive flushing of the dvi
> file enabled by --ipc is a side-effect of needing to do this on the
> socket.
>
> The ipc code definitely opens a socket when --ipc is given.  To be
> precise, it is a UNIX domain socket named "$HOME/.TeXview_Pipe".  With
> --ipc-start it also tries to run "open `which TeXview`" as the
> consumer (see IPC_SERVER_CMD in texmfmp.c).
>
> I suspect that for large dvi files, if there is no listener on the
> socket, TeX will just hang on a write on the socket after a while.  It
> looks to me like TeX writes typically 6 bytes per page on the socket
> (which is really used to synchronize the viewer with TeX).  With OS
> buffers typically 1024 or 4096 bytes, that means 150+ or 650+ pages.
>
> If you (generic you) want just the aggressive flushing, feel free to
> propose a patch.  I think I've figured what would be required, but it
> is something I'd like to see independent confirmation of.
>
> Also a proposal on how to specify it on the command line would be
> useful.  (As usual, I'm not saying I'd incorporate it, but I do want
> to know what lines of thought people have in the matter, if only to
> make sure that I don't do something by myself which turns out to be
> utterly useless.)

If I recall an earlier discussion on this subject, a big plus would be if
we would have something  like "serialized PDF" as output of PDFTeX such
that this socket-signalling could also be used by PDF-previewers next to
DVI-previewers.

G

From fabrice.popineau at supelec.fr  Mon Jul 19 20:26:42 2004
From: fabrice.popineau at supelec.fr (Fabrice Popineau)
Date: Mon Jul 19 20:28:04 2004
Subject: [tex-live] enctex support files in texmf
In-Reply-To: <20040718153249.GA29269@dbs.uni-hannover.de>
Message-ID: <20040719182646.51DB2C658@postfix3-2.free.fr>

> So, I am sure that you agree with me that some subdirectory of tex/plain
> is the right place for these files. I wonder what the "trouble" is that
> you want to avoid.

See below.

> Lets create the right tools for package management, then this will become
> easier. The user (who upgrades a package) should not need to know about
> the directory structure that is used.

There are about 3000 lines of perl code to do that in Master/Tools (TL
depot).

> We try to follow the tds. If we see that the tds is a pain to follow, we
> try to modify and to improve it.

I don't agree that much with this approach. This stuff is a mess today and
it is very difficult to know how any change can impact existing
installations or future ones. Even worse, any such change will impact any
tools for package management and I'm not sure there is much programming
manpower to assume those changes.

Fabrice


From Alois.Steindl+e325 at tuwien.ac.at  Tue Jul 20 13:19:33 2004
From: Alois.Steindl+e325 at tuwien.ac.at (Alois Steindl)
Date: Tue Jul 20 13:20:42 2004
Subject: [tex-live] TL 2003 on RH 7.3
In-Reply-To: <Pine.LNX.4.50.0407161337100.2331-100000@radagast.imf.au.dk>
References: <Pine.LNX.4.50.0407161337100.2331-100000@radagast.imf.au.dk>
Message-ID: <200407201319.33092.Alois.Steindl+e325@tuwien.ac.at>

On Freitag, 16. Juli 2004 13:45, Lars Madsen wrote:
> A friend of mine tried to install TL 2003 on her RH 7.3 but it failed with
> an error like this
>
> Error: `etex -ini  -jobname=latex -progname=latex *latex.ini' failed
>[...]
> etc.
>
> any idea what happens here, it install without problems om our RH 7.2
> system.
>
Hello,
since I have not yet seen any answer to your question, I give it a try.
My guess would be, that the problem already occured somewhere before.
Did your friend already have a TeX installation before? Where did she install 
the distribution? I encountered some problems, when I installed it on a FAT 
partition. Did she update all involved environment variables, especially PATH 
and TEXMF and friends?
What gives 
which latex
which kpsewhich
kpsewhich texmf.cnf

She could also try 
texconfig confall
after she made sure, that the environment variables are set correctly.
Alois
>
> TEXMFINPUT(S) has been set to a local directory, can this influence
> anything??
>
Are you sure, that there is some variable like that? I know TEXINPUTS, TEXMF, 
TEXMFCNF and so on.
If she sets TEXINPUTS, she should also take care, that the default directories 
are included; usually that is accomplished by an empty entry, eg. by a ":" at 
the end or by "::" in the interior of the variable (of course, also by ":" at 
the start).

Good luck
Alois

From J.Fine at open.ac.uk  Tue Jul 20 18:47:48 2004
From: J.Fine at open.ac.uk (Jonathan Fine)
Date: Tue Jul 20 18:49:05 2004
Subject: [tex-live] Re: Re: Please enable ipc in tex
References: <cc42fe$62m$1@sea.gmane.org><x51xjuvz7b.fsf@lola.goethe.zz><ccc1ql$hbn$1@sea.gmane.org><87fz86kuo6.fsf@infovore.xs4all.nl>
	<44336.159.46.248.216.1090251227.squirrel@mail.rna.nl>
Message-ID: <cdjibm$h03$1@sea.gmane.org>

"Gerben Wierda" <Gerben.Wierda@rna.nl> wrote in message
news:44336.159.46.248.216.1090251227.squirrel@mail.rna.nl...
>
> If I recall an earlier discussion on this subject, a big plus would be if
> we would have something  like "serialized PDF" as output of PDFTeX such
> that this socket-signalling could also be used by PDF-previewers next to
> DVI-previewers.
>

This might be a little off-topic, but here goes.

I agree, this would be a big plus.  Especially for web servers that
need to generate many small PDF files.

But modifying pdfTeX in this way might be hard.

Better might be to use --ipc enabled TeX piping into a dvi to pfd
translator.  Such as dvipdfm, by Mark Wicks.

In any case, enabling ipc on TeX is easy (at least on Linux/Unix).

Doing something similar for pdfTeX is likely to be much harder.


Jonathan



From taco at elvenkind.com  Tue Jul 20 19:23:22 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue Jul 20 19:22:02 2004
Subject: [tex-live] Re: Re: Please enable ipc in tex
In-Reply-To: <cdjibm$h03$1@sea.gmane.org>
References: <cc42fe$62m$1@sea.gmane.org> <x51xjuvz7b.fsf@lola.goethe.zz>
	<ccc1ql$hbn$1@sea.gmane.org> <87fz86kuo6.fsf@infovore.xs4all.nl>
	<44336.159.46.248.216.1090251227.squirrel@mail.rna.nl>
	<cdjibm$h03$1@sea.gmane.org>
Message-ID: <20040720192322.665e0577.taco@elvenkind.com>


Hi,

This keeps cropping up. I do not think that it can be done without a major 
effort.

When Adobe says "linearized" or "optimized" in reference to PDF documents, 
then for the producing program of a PDF document this works as follows:

- process the entire document as normal, until reaching the end of typesetting,
  where you have all of the needed information for the optimization step.

- now go back to the beginning to create the /Linearization dictionary
  and the first cross-ref table using that gathered information.

- write final output file.

As a result, creating linearized PDF is a slow process. In fact quite a bit
slower than if you wouldn't have bothered in the first place. Therefore,
this is unusable, and as a result, so is previewing in the Reader.

Your only option is to create a new previewer (or modify xpdf/gs to allow
incremental file reads). That would be a mayor amount of work, but nearly
all of it outside of pdftex.

Greetings, Taco


"Gerben Wierda" <Gerben.Wierda@rna.nl> wrote in message
news:44336.159.46.248.216.1090251227.squirrel@mail.rna.nl...
>
> If I recall an earlier discussion on this subject, a big plus would be if
> we would have something  like "serialized PDF" as output of PDFTeX such
> that this socket-signalling could also be used by PDF-previewers next to
> DVI-previewers.


 

From pragma at wxs.nl  Tue Jul 20 22:48:59 2004
From: pragma at wxs.nl (Hans Hagen Outside)
Date: Tue Jul 20 22:50:16 2004
Subject: [tex-live] Re: Re: Please enable ipc in tex
In-Reply-To: <20040720192322.665e0577.taco@elvenkind.com>
References: <cc42fe$62m$1@sea.gmane.org> <x51xjuvz7b.fsf@lola.goethe.zz>
	<ccc1ql$hbn$1@sea.gmane.org> <87fz86kuo6.fsf@infovore.xs4all.nl>
	<44336.159.46.248.216.1090251227.squirrel@mail.rna.nl>
	<cdjibm$h03$1@sea.gmane.org>
	<20040720192322.665e0577.taco@elvenkind.com>
Message-ID: <40FD853B.2030104@wxs.nl>

Taco Hoekwater wrote:

>Hi,
>
>This keeps cropping up. I do not think that it can be done without a major 
>effort.
>
>When Adobe says "linearized" or "optimized" in reference to PDF documents, 
>then for the producing program of a PDF document this works as follows:
>
>- process the entire document as normal, until reaching the end of typesetting,
>  where you have all of the needed information for the optimization step.
>
>- now go back to the beginning to create the /Linearization dictionary
>  and the first cross-ref table using that gathered information.
>
>- write final output file.
>
>As a result, creating linearized PDF is a slow process. In fact quite a bit
>slower than if you wouldn't have bothered in the first place. Therefore,
>this is unusable, and as a result, so is previewing in the Reader.
>
>Your only option is to create a new previewer (or modify xpdf/gs to allow
>incremental file reads). That would be a mayor amount of work, but nearly
>all of it outside of pdftex.
>  
>
incremental would mean something: 

flush page 
flush fonts and images 
add xref section

and for the next page overwrite the fonts/images and xref section which probably ends up in an inefficient process. 

An option could be to use the new embedded pdf stream feature and make each page an independent document, but that will interfere with resource management; so ... i don't see it happen 

Hans  

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From ms at artcom-gmbh.de  Wed Jul 21 00:56:47 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed Jul 21 01:05:02 2004
Subject: [tex-live] incremental pdf (was: Please enable ipc in tex)
In-Reply-To: <40FD853B.2030104@wxs.nl>
References: <cc42fe$62m$1@sea.gmane.org> <x51xjuvz7b.fsf@lola.goethe.zz>
	<ccc1ql$hbn$1@sea.gmane.org> <87fz86kuo6.fsf@infovore.xs4all.nl>
	<44336.159.46.248.216.1090251227.squirrel@mail.rna.nl>
	<cdjibm$h03$1@sea.gmane.org>
	<20040720192322.665e0577.taco@elvenkind.com>
	<40FD853B.2030104@wxs.nl>
Message-ID: <20040720225647.GA13253@lucien.kn-bremen.de>

On 2004-07-20 13:48:59 -0700, Hans Hagen wrote:
> incremental would mean something: 
> 
> flush page 
> flush fonts and images 
> add xref section
> 
> and for the next page overwrite the fonts/images and xref section which 
> probably ends up in an inefficient process. 

And needs a new previewer. Your best bet is to convince Adobe to
add this feature to PDF 2.0 :-(

Best regards
    Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From aa056 at chebucto.ns.ca  Wed Jul 21 14:05:59 2004
From: aa056 at chebucto.ns.ca (George N. White III)
Date: Wed Jul 21 14:07:46 2004
Subject: [tex-live] incremental pdf (was: Please enable ipc in tex)
In-Reply-To: <20040720225647.GA13253@lucien.kn-bremen.de>
References: <cc42fe$62m$1@sea.gmane.org> <x51xjuvz7b.fsf@lola.goethe.zz>
	<ccc1ql$hbn$1@sea.gmane.org> <87fz86kuo6.fsf@infovore.xs4all.nl>
	<44336.159.46.248.216.1090251227.squirrel@mail.rna.nl>
	<cdjibm$h03$1@sea.gmane.org>
	<20040720192322.665e0577.taco@elvenkind.com>
	<40FD853B.2030104@wxs.nl> <20040720225647.GA13253@lucien.kn-bremen.de>
Message-ID: <Pine.SGI.4.61.0407210822150.400379@montigo.bio.dfo.ca>

On Wed, 21 Jul 2004, Martin Schr?der wrote:

> On 2004-07-20 13:48:59 -0700, Hans Hagen wrote:
>> incremental would mean something:
>>
>> flush page
>> flush fonts and images
>> add xref section
>>
>> and for the next page overwrite the fonts/images and xref section which
>> probably ends up in an inefficient process.

Why not just emit 1-page PDF's without embedding fonts?  Since the viewer 
would be running in parallel with tex, you can assume the fonts are 
available, so they don't need to be embedded. An existing viewer could be 
adapted to present the pages as if they were part of a single document, 
and a post-processor could be used to assemble a final PDF and embed 
the fonts.

> And needs a new previewer. Your best bet is to convince Adobe to
> add this feature to PDF 2.0 :-(

Why wait for Adobe?  Do it and Adobe will follow.

PdfTeX solves a lot of problems, but it is much more complicated than TeX 
due to all the font/image smarts that are required.  On SGI Irix using 
system (e.g., shared) libraries, the pdfetex binary is 3x larger than tex, 
needs both C++ and C compilers, and is linked to 3x as many libraries (C++ 
runtime, libpng, zlib, libfofi, libGoo, md5.a, and libxpdf).  An ipdfTeX 
could be simplified and made less platform dependent by offloading much of 
the font/image processing that the current pdftex steals from xpdf to the 
viewer and ipdf2pdf converter.  Graphical display and font handling are 
platform dependent -- a platform neutral ipdfTeX with viewers for each 
platform could provide a more reponsive authoring environment and simplify
the work of developers, porters, and maintainers.

--
George N. White III  <aa056@chebucto.ns.ca>
   Head of St. Margarets Bay, Nova Scotia, Canada
From daleif at imf.au.dk  Wed Jul 21 15:02:50 2004
From: daleif at imf.au.dk (Lars Madsen)
Date: Wed Jul 21 15:03:58 2004
Subject: [tex-live] TL 2003 on RH 7.3 (fwd)
Message-ID: <Pine.LNX.4.50.0407211502150.8940-100000@radagast.imf.au.dk>


Forwarded answer:

>
> On Freitag, 16. Juli 2004 13:45, Lars Madsen wrote:
>> A friend of mine tried to install TL 2003 on her RH 7.3 but it failed with
>> an error like this
>>
>> Error: `etex -ini  -jobname=latex -progname=latex *latex.ini' failed
>>[...]
>> etc.
>>
>> any idea what happens here, it install without problems om our RH 7.2
>> system.
>>
> Hello,
> since I have not yet seen any answer to your question, I give it a try.
> My guess would be, that the problem already occured somewhere before.
> Did your friend already have a TeX installation before? Where did she install
> the distribution?

Yes I have tetex-1.0.7 installed in /usr/share/texmf and /usr/bin is
included in my path. I have two directories where I have write access
without being root: /usr/users/vivip (=HOME) which is nfs-mounted and
where I have a local texmf-tree where I have installed some packages
which I where missing. The other is /home/vivip which is on my local
machine and I tried to install in /home/vivip/usr/TeX.

> I encountered some problems, when I installed it on a FAT
> partition. Did she update all involved environment variables, especially PATH
> and TEXMF and friends?

No, I tried to follow section 3.2 in the documentation and it said I
should update PATH after I had run "sh install-tl.sh", but that gave
me the above errors. I don't have any environment variables named
something with TEX (after I deleted TEXINPUTS). Maybe this is what I
did wrong?

> What gives
> which latex

Before I tried to install it gave /usr/bin/latex (should I have
removed /usr/bin from my PATH while I installed Tex-Live?)

> which kpsewhich
> kpsewhich texmf.cnf
>
> She could also try
> texconfig confall
> after she made sure, that the environment variables are set correctly.
> Alois

I tried installing tetex-2.0.2 instead and that works, so now I'm using
that, but thanks for your answer.

>>
>> TEXMFINPUT(S) has been set to a local directory, can this influence
>> anything??
>>
> Are you sure, that there is some variable like that? I know TEXINPUTS, TEXMF,
> TEXMFCNF and so on.
> If she sets TEXINPUTS, she should also take care, that the default directories
> are included; usually that is accomplished by an empty entry, eg. by a ":" at
> the end or by "::" in the interior of the variable (of course, also by ":" at
> the start).
>

Sorry, I remembered wrong. The one that was set was TEXINPUTS ~/texmf//:
I deleted it and tried to install again, but it gave the same errors.

Regards
Vivi

-- 

From fabrice.popineau at supelec.fr  Wed Jul 21 18:34:02 2004
From: fabrice.popineau at supelec.fr (Fabrice Popineau)
Date: Wed Jul 21 18:35:13 2004
Subject: [tex-live] pdftexinfo
Message-ID: <20040721163403.0532A1AF6A7@postfix4-2.free.fr>

Currently, I can't dump the pdftexinfo format. See below. What happened to
pdftexinfo.tex?

Fabrice

C:\ >fmtutil --byfmt=pdftexinfo
running `pdfetex -ini  -jobname=pdftexinfo -progname=pdftexinfo -8bit
texinfo.ini <nul' ...
This is pdfeTeXk, Version 3.141592-1.20a-rc4-2.1 (Web2c 7.5.3) (INITEX)
 %&-line parsing enabled.
output format initialized to DVI
(c:/Program Files/TeXLive/texmf-dist/tex/texinfo/config/texinfo.ini
(c:/Program Files/TeXLive/texmf-dist/tex/plain/base/plain.tex
Preloading the plain format: codes, registers, parameters, fonts, more
fonts,
macros, math definitions, output routines, hyphenation
(c:/Program Files/TeXLive/texmf/tex/generic/hyphen/hyphen.tex))
! I can't find file `pdftexinfo'.
\TexinfoPackageName ->pdftexinfo

l.10 \expandafter\input\TexinfoPackageName

Please type another input file name:
! Emergency stop.
\TexinfoPackageName ->pdftexinfo

l.10 \expandafter\input\TexinfoPackageName

No pages of output.
Transcript written on pdftexinfo.log.
############################################################################
###
fmtutil: Error! Not all formats have been built successfully.
Visit the log files in directory
  c:/Program Files/TeXLive/texmf-var/web2c
for details.
############################################################################
###

This is a summary of all `failed' messages and warnings:
fmtutil: command `pdfetex -ini  -jobname=pdftexinfo -progname=pdftexinfo
-8bit texinfo.ini <nul' failed (ret = 1, pdftexinfo.fmt).

From olaf at infovore.xs4all.nl  Wed Jul 21 18:37:12 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Wed Jul 21 18:38:33 2004
Subject: [tex-live] e-TeX updates and pdf*TeX
Message-ID: <87658h8gg7.fsf@infovore.xs4all.nl>

I've been merging updates to e-TeX from Peter Breitenloher.  However,
it should be noted that in order to simplify the build and changefiles
a bit, he's been making some changes outside the e-TeX tree as well.

The checking that did this is contained below.

Also note (I forgot to add this to the comments):

" Updating etex-2.1 to TeX 3.141592 (not yet finished). This shall eventually
" become etex-2.2.

" Updating pdftex to TeX 3.141592 (glue and leader box rounding plus some
" typos). In doing so I have removed a few modules that were identical copies
" of those for TeX; without these copies the leader box rounding problem
" wouldn't have existed.

" Adapting pdfetex (and pdfxtex) to etex changes.

" Rewrite of build rules for {etex,pdf*tex}.{web,ch} and removal of obsolete
" files from the dependencies. Removal of some spurious dependencies for
" pdf*tex.web.

" Note (1): I have not yet removed some of the etex-related changes
" conflicting with TeX 3.141592 but instead made them ineffective by prefixing
" them a blank. They should eventually go away when etex-2.2 is finished.

" Note (2): The etex changes are at the moment semi-official and intended for
" web2c/teTeX exclusively. Once etex-2.2 is finished they will all end up on
" my ftp server and thus eventually make it into CTAN.

I do hope I got the merge correct.


$ p4 describe -s 5546
Change 5546 by olaf@olaf on 2004/07/21 18:31:30

        This is a batch of changes by Peter Breitenlohner related to the
        revised e-TeX code he's writing.

                " This patch [...] reorganizes the handling of the
                " additional token list and integer parameters introduced by
                " WEB2C (MLTeX and encTeX), e-TeX, and pdfTeX in order to reduce
                " the interference between the tex.ch, etexdir/etex.ch, and
                " pdftexdir/pdftex.ch change files and to increase their
                " maintainability.

                " Building {e,pdf}tex.ch, and pdfetex.{web,ch} requires additional
                " small files in {e,pfd,pdfe}texdir/ which do depend on the fact
                " that e.g., each of WEB2C, e-TeX, and pdfTeX introduces integer
                " parameters in addition to those defined in TeX. These small
                " files do, however, not depend on the number of such parameters
                " introduced by WEB2C, e-TeX, or pdfTeX nor on their names.

                " The number of additional parameters introduced by WEB2C as well
                " as their names appear only in tex.ch, those for e-TeX only in
                " etexdir/etex.ch and those for pdfTeX only in pdftexdir/pdftex.ch.

Affected files ...

... //depot/Build/source.development/TeX/texk/web2c/pdfetexdir/pdfetex.ch1#5 edit
... //depot/Build/source.development/TeX/texk/web2c/pdfetexdir/pdfetex.ch2#13 edit
... //depot/Build/source.development/TeX/texk/web2c/pdfetexdir/pdfetex.mk#19 edit
... //depot/Build/source.development/TeX/texk/web2c/pdfetexdir/tex.ch0#8 edit
... //depot/Build/source.development/TeX/texk/web2c/pdfetexdir/tex.ch1#10 edit
... //depot/Build/source.development/TeX/texk/web2c/pdftexdir/hz.ch#8 edit
... //depot/Build/source.development/TeX/texk/web2c/pdftexdir/pdftex.ch#144 edit
... //depot/Build/source.development/TeX/texk/web2c/pdftexdir/pdftex.mk#23 edit
... //depot/Build/source.development/TeX/texk/web2c/pdftexdir/tex.ch0#8 edit
... //depot/Build/source.development/TeX/texk/web2c/pdftexdir/tex.ch1#9 edit
... //depot/Build/source.development/TeX/texk/web2c/pdftexdir/tex.pch#21 edit
... //depot/Build/source.development/TeX/texk/web2c/pdfxtexdir/pdfxtex.ch2#6 edit
... //depot/Build/source.development/TeX/texk/web2c/pdfxtexdir/pdfxtex.mk#10 edit
... //depot/Build/source.development/TeX/texk/web2c/pdfxtexdir/tex.ch0#4 edit
... //depot/Build/source.development/TeX/texk/web2c/pdfxtexdir/tex.ch1#4 edit

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From ms at artcom-gmbh.de  Wed Jul 21 18:44:45 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed Jul 21 18:47:02 2004
Subject: [tex-live] e-TeX updates and pdf*TeX
In-Reply-To: <87658h8gg7.fsf@infovore.xs4all.nl>
References: <87658h8gg7.fsf@infovore.xs4all.nl>
Message-ID: <20040721164444.GX29108@artcom8.artcom-gmbh.de>

On 2004-07-21 18:37:12 +0200, Olaf Weber wrote:
> I do hope I got the merge correct.

Not really; maybe it clashes with my #5535 :-(

./tie -c pdftex.ch pdftex.web \
../../../src/texk/web2c/pdftexdir/tex.ch0 \
../../../src/texk/web2c/tex.ch \
../../../src/texk/web2c/pdftexdir/tex.ch1 \
../../../src/texk/web2c/pdftexdir/tex.pch \
../../../src/texk/web2c/pdftexdir/tex.ch2
This is TIE, CWEB Version 2.4. (Web2C 7.5.3)
Copyright (c) 1989,1992 by THD/ITI. All rights reserved.
(pdftex.web)
(../../../src/texk/web2c/pdftexdir/tex.ch0)
(../../../src/texk/web2c/tex.ch)
(../../../src/texk/web2c/pdftexdir/tex.ch1)
(../../../src/texk/web2c/pdftexdir/tex.pch)
(../../../src/texk/web2c/pdftexdir/tex.ch2)
....500....1000....1500....2000....2500....3000....3500....4000....4500....5000....5500....6000....6500....7000....7500....8000....8500....9000....9500....10000....10500....11000....11500....12000....12500....13000....13500....14000....14500....15000....15500....16000....16500....17000....17500....18000....18500....19000....19500....20000....20500....21000....21500....22000....22500....23000....23500....24000....24500....25000....25500....26000....26500....27000....27500....28000....28500....29000....29500....30000....30500....31000....31500....32000
! Change file entry did not match (file ../../../src/texk/web2c/pdftexdir/tex.pch, l.24).

(Pardon me, but I think I spotted something wrong..)
make: *** [pdftex.ch] Error 1

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From olaf at infovore.xs4all.nl  Wed Jul 21 19:09:25 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Wed Jul 21 19:10:40 2004
Subject: [tex-live] e-TeX updates and pdf*TeX
In-Reply-To: <20040721164444.GX29108@artcom8.artcom-gmbh.de> (Martin
	=?iso-8859-1?q?Schr=F6der's?= message of "Wed,
	21 Jul 2004 18:44:45 +0200")
References: <87658h8gg7.fsf@infovore.xs4all.nl>
	<20040721164444.GX29108@artcom8.artcom-gmbh.de>
Message-ID: <87zn5tmgmy.fsf@infovore.xs4all.nl>

Martin Schr?der writes:
> On 2004-07-21 18:37:12 +0200, Olaf Weber wrote:

>> I do hope I got the merge correct.

> Not really; maybe it clashes with my #5535 :-(

Re-sync please.  It looks like you're using an "old" pdftex.mk
makefile fragment.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From ms at artcom-gmbh.de  Wed Jul 21 19:22:48 2004
From: ms at artcom-gmbh.de (Martin =?iso-8859-1?Q?Schr=F6der?=)
Date: Wed Jul 21 19:25:03 2004
Subject: [tex-live] e-TeX updates and pdf*TeX
In-Reply-To: <87zn5tmgmy.fsf@infovore.xs4all.nl>
References: <87658h8gg7.fsf@infovore.xs4all.nl>
	<20040721164444.GX29108@artcom8.artcom-gmbh.de>
	<87zn5tmgmy.fsf@infovore.xs4all.nl>
Message-ID: <20040721172248.GY29108@artcom8.artcom-gmbh.de>

On 2004-07-21 19:09:25 +0200, Olaf Weber wrote:
> Re-sync please.  It looks like you're using an "old" pdftex.mk
> makefile fragment.

You didn't change any pdf*.mk today (you comitted them, but
there's no difference). My source is up-to-date.

Best regards
        Martin
-- 
               Martin Schr?der, ms@artcom-gmbh.de
     ArtCom GmbH, Lise-Meitner-Str 5, 28359 Bremen, Germany
          Voice +49 421 20419-44 / Fax +49 421 20419-10
                    http://www.artcom-gmbh.de

From olaf at infovore.xs4all.nl  Wed Jul 21 20:24:31 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Wed Jul 21 20:25:40 2004
Subject: [tex-live] e-TeX updates and pdf*TeX
In-Reply-To: <87zn5tmgmy.fsf@infovore.xs4all.nl> (Olaf Weber's message of
	"Wed, 21 Jul 2004 19:09:25 +0200")
References: <87658h8gg7.fsf@infovore.xs4all.nl>
	<20040721164444.GX29108@artcom8.artcom-gmbh.de>
	<87zn5tmgmy.fsf@infovore.xs4all.nl>
Message-ID: <87ekn5z09s.fsf@infovore.xs4all.nl>

Olaf Weber writes:
> Martin Schr?der writes:
>> On 2004-07-21 18:37:12 +0200, Olaf Weber wrote:

>>> I do hope I got the merge correct.

>> Not really; maybe it clashes with my #5535 :-(

> Re-sync please.  It looks like you're using an "old" pdftex.mk
> makefile fragment.

This is not my day.  Re-sync please, as this time the changes should
actually be there...

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From staw at gust.org.pl  Wed Jul 21 22:40:43 2004
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Wed Jul 21 22:38:28 2004
Subject: [tex-live] pdftexinfo
In-Reply-To: <20040721163403.0532A1AF6A7@postfix4-2.free.fr>
Message-ID: <Pine.LNX.4.44.0407212227140.18041-100000@re86.internetdsl.tpnet.pl>

On Wed, 21 Jul 2004, Fabrice Popineau wrote:

> Currently, I can't dump the pdftexinfo format. See below. What happened
> to pdftexinfo.tex?

Argh... That was pretty messed. I can cure it on behalf of Karl, OK?
1. fmtutil.cnf:
< pdftexinfo  pdfetex  -  -8bit texinfo.ini
> pdftexinfo  pdfetex  -  -8bit *texinfo.ini

2. texmf-dist/tex/texinfo/config/pdftexinfo.ini --> pdftexinfo.tex

3. pdftexinfo.tex:
< \input texinfo.ini
> \input texinfo

Anyway that's very strange strategy. I hope that only Karl can
answer...

BTW, it seems that we should recompile binaries and change pool files.

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl


From te at dbs.uni-hannover.de  Thu Jul 22 00:13:33 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Thu Jul 22 00:14:49 2004
Subject: [tex-live] pdftexinfo
In-Reply-To: <20040721163403.0532A1AF6A7@postfix4-2.free.fr>
References: <20040721163403.0532A1AF6A7@postfix4-2.free.fr>
Message-ID: <20040721221333.GE1561@dbs.uni-hannover.de>

> Currently, I can't dump the pdftexinfo format. See below. What happened to

What's wrong with texi2dvi --pdf or texi2pdf (which is about the
same)? In the "old days" there used to exist an inofficial pdf-enabled
pdftexinfo.tex, but these days, texinfo.tex ist completely sufficient.

Where do we need the format for?

Thomas

From staw at gust.org.pl  Thu Jul 22 05:11:11 2004
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Thu Jul 22 05:12:19 2004
Subject: [tex-live] binaries, pool and texinfo
Message-ID: <Pine.LNX.4.44.0407220455290.1912-100000@re86.internetdsl.tpnet.pl>

I've remade binaries for i386-linux, there are altogether 230 
now (including soft links); the new one is pdfcrop, but I don't
know to which package/tpm it should belong.

Also corrected all relevant files for making pdftexinfo. I'd left
the decission about keeping (pdf)texinfo formats (or not, as Thomas
kindly suggested) for the Great Boss. Anyway it works now correctly.

Change 5561 on 2004/07/22 by staw@staw

	some bin/i386-linux/ binaries updated, new: pdfcrop; pdfetex.pool,
	pdfxtex.pool. Corrected fmtutil.in in the sources and live 
	texmf/web2c/fmtutil.cnf; pdftexinfo.tex added (instead of .ini)

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl


From te at dbs.uni-hannover.de  Thu Jul 22 06:49:52 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Thu Jul 22 06:51:08 2004
Subject: [tex-live] binaries, pool and texinfo
In-Reply-To: <Pine.LNX.4.44.0407220455290.1912-100000@re86.internetdsl.tpnet.pl>
References: <Pine.LNX.4.44.0407220455290.1912-100000@re86.internetdsl.tpnet.pl>
Message-ID: <20040722044952.GG1561@dbs.uni-hannover.de>

> I've remade binaries for i386-linux, there are altogether 230 
> now (including soft links); the new one is pdfcrop, but I don't

As suggested by Karl, I have added this script (to teTeX). What you see
in bin is just a symlink for the perl-wrapper. The actual perl-script
has to be installed into the texmf tree
  CTAN:support/pdfcrop/pdfcrop.pl -> texmf-dist/scripts/pdfcrop/pdfcrop.pl

Thomas

From fabrice.popineau at supelec.fr  Thu Jul 22 12:17:32 2004
From: fabrice.popineau at supelec.fr (Fabrice Popineau)
Date: Thu Jul 22 12:18:41 2004
Subject: [tex-live] pdftexinfo
In-Reply-To: <20040721221333.GE1561@dbs.uni-hannover.de>
Message-ID: <20040722101732.5B4F31AFFB4@postfix4-2.free.fr>

> Where do we need the format for?

It is enabled in fmtutil.cnf.

Fabrice

From te at dbs.uni-hannover.de  Thu Jul 22 18:08:51 2004
From: te at dbs.uni-hannover.de (Thomas Esser)
Date: Thu Jul 22 18:10:08 2004
Subject: [tex-live] pdftexinfo
In-Reply-To: <20040722101732.5B4F31AFFB4@postfix4-2.free.fr>
References: <20040721221333.GE1561@dbs.uni-hannover.de>
	<20040722101732.5B4F31AFFB4@postfix4-2.free.fr>
Message-ID: <20040722160851.GI1561@dbs.uni-hannover.de>

> It is enabled in fmtutil.cnf.

In TeX Live's version, maybe. I don't feel responsible for this file (same
for texmf.cnf). When sync'ing the differences between teTeX / TeX Live,
I don't care about these two files because they are totally different.

Thomas

From staw at gust.org.pl  Thu Jul 22 20:06:07 2004
From: staw at gust.org.pl (Staszek Wawrykiewicz)
Date: Thu Jul 22 20:06:53 2004
Subject: [tex-live] binaries, pool and texinfo
In-Reply-To: <20040722044952.GG1561@dbs.uni-hannover.de>
Message-ID: <Pine.LNX.4.44.0407221957530.2971-100000@re86.internetdsl.tpnet.pl>

On Thu, 22 Jul 2004, Thomas Esser wrote:

> As suggested by Karl, I have added this script (to teTeX). What you see
> in bin is just a symlink for the perl-wrapper. The actual perl-script
> has to be installed into the texmf tree
>   CTAN:support/pdfcrop/pdfcrop.pl -> texmf-dist/scripts/pdfcrop/pdfcrop.pl

Thanks for pointing that. As for TL we have all binary related stuff
gathered in texmf/ as well as texmf/tpm/bin-*.tpm files, it would be 
rather
texmf/scripts/pdfcrop/pdfcrop.pl
texmf/doc/pdfcrop/README

(exacly like pkfix etc.). Sebastian, am I right?

-- 
Staszek Wawrykiewicz
StaW@gust.org.pl


From sebastian.rahtz at computing-services.oxford.ac.uk  Thu Jul 22 23:49:36 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Thu Jul 22 23:54:47 2004
Subject: [tex-live] binaries, pool and texinfo
In-Reply-To: <Pine.LNX.4.44.0407221957530.2971-100000@re86.internetdsl.tpnet.pl>
References: <Pine.LNX.4.44.0407221957530.2971-100000@re86.internetdsl.tpnet.pl>
Message-ID: <41003670.8010704@computing-services.oxford.ac.uk>

Staszek Wawrykiewicz wrote:

>
>Thanks for pointing that. As for TL we have all binary related stuff
>gathered in texmf/ as well as texmf/tpm/bin-*.tpm files, it would be 
>rather
>texmf/scripts/pdfcrop/pdfcrop.pl
>texmf/doc/pdfcrop/README
>
>(exacly like pkfix etc.). Sebastian, am I right?
>
>  
>

yes, I'd agree with that

-- 
Sebastian Rahtz      Information Manager
Oxford University Computing Services
13 Banbury Road, Oxford OX2 6NN. Phone +44 1865 283431

From J.Fine at open.ac.uk  Fri Jul 23 10:07:19 2004
From: J.Fine at open.ac.uk (Jonathan Fine)
Date: Fri Jul 23 10:08:37 2004
Subject: [tex-live] Re: incremental pdf (was: Please enable ipc in tex)
References: <cc42fe$62m$1@sea.gmane.org>
	<x51xjuvz7b.fsf@lola.goethe.zz><ccc1ql$hbn$1@sea.gmane.org>
	<87fz86kuo6.fsf@infovore.xs4all.nl><44336.159.46.248.216.1090251227.squirrel@mail.rna.nl><cdjibm$h03$1@sea.gmane.org><20040720192322.665e0577.taco@elvenkind.com><40FD853B.2030104@wxs.nl>
	<20040720225647.GA13253@lucien.kn-bremen.de>
Message-ID: <cdqgvp$de$1@sea.gmane.org>

This might be a little off-topic.

Pdftex is a widely used program, which clearly meets the
need to generate pdf files from tex sources.

However, I never understood why pdftex was written, rather
than a dvi to pdf translator.

This may be a failing on my part, I simply don't remember
seeing the reasons for this choice.

The current wish for incremental pdf raises this question
again, in my opinion.


Could anyone inform me, as to why pdftex rather than a
dvi to pdf translator.

Thank you.


Jonathan




From taco at elvenkind.com  Fri Jul 23 10:34:57 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri Jul 23 10:36:07 2004
Subject: [tex-live] Re: incremental pdf (was: Please enable ipc in tex)
In-Reply-To: <cdqgvp$de$1@sea.gmane.org>
References: <cc42fe$62m$1@sea.gmane.org> <x51xjuvz7b.fsf@lola.goethe.zz>
	<ccc1ql$hbn$1@sea.gmane.org> <87fz86kuo6.fsf@infovore.xs4all.nl>
	<44336.159.46.248.216.1090251227.squirrel@mail.rna.nl>
	<cdjibm$h03$1@sea.gmane.org>
	<20040720192322.665e0577.taco@elvenkind.com>
	<40FD853B.2030104@wxs.nl>
	<20040720225647.GA13253@lucien.kn-bremen.de>
	<cdqgvp$de$1@sea.gmane.org>
Message-ID: <20040723103457.4aadfc7d@glenlivet.elvenkind.com>



On Fri, 23 Jul 2004 09:07:19 +0100, Jonathan wrote:

> This may be a failing on my part, I simply don't remember
> seeing the reasons for this choice.

Jonathan,

You are indeed off-topic, as well as trolling. As you would have known if you 
would have bothered to even attempt to find an answer to your question,
  http://www.tug.org/applications/pdftex/  
has a link to Thanh's paper.

Please don't reply to this message.

-- 
groeten,

Taco

From sebastian.rahtz at computing-services.oxford.ac.uk  Fri Jul 23 12:23:11 2004
From: sebastian.rahtz at computing-services.oxford.ac.uk (Sebastian Rahtz)
Date: Fri Jul 23 12:28:41 2004
Subject: [tex-live] Re: incremental pdf
In-Reply-To: <cdqgvp$de$1@sea.gmane.org>
References: <cc42fe$62m$1@sea.gmane.org>	<x51xjuvz7b.fsf@lola.goethe.zz><ccc1ql$hbn$1@sea.gmane.org>	<87fz86kuo6.fsf@infovore.xs4all.nl><44336.159.46.248.216.1090251227.squirrel@mail.rna.nl><cdjibm$h03$1@sea.gmane.org><20040720192322.665e0577.taco@elvenkind.com><40FD853B.2030104@wxs.nl>	<20040720225647.GA13253@lucien.kn-bremen.de>
	<cdqgvp$de$1@sea.gmane.org>
Message-ID: <4100E70F.4060603@computing-services.oxford.ac.uk>

Way off topic. And very ancient history!

Sebastian

From ulrichmschwarz at gmx.net  Wed Jul 21 23:35:47 2004
From: ulrichmschwarz at gmx.net (Ulrich M. Schwarz)
Date: Fri Jul 23 18:09:02 2004
Subject: [tex-live] Bug in install-tl.sh (TeX Collection '03 and TLC2)
Message-ID: <86k6wxujpo.fsf@invisibletruth.local>

(Oh, btw: tex-demo@tug.org, which is given within install-tl.sh itself
as a contact address, bounced on me.)

Dear TeX-Live team,

I have, regrettably, discovered that install-tl will break on systems
with too new a ls:

Apparently, with recent versions of GNU ls (5.2.1 fails, 4.1 used to
work), the output format for the file date has changed:

# ls (fileutils) 4.1 (as shipped with SuSE 8.0)
: ~/temp/fixtl [0 534]; /mnt/datadisk/bin/ls -l /dvd/bin
total 112
drwxr-xr-x    2 root     root        32768 Sep 28  2003 i386-linux
drwxr-xr-x    2 root     root        32768 Sep 28  2003 powerpc-darwin6.6
drwxr-xr-x    4 root     root        49152 Mar 11 13:49 win32

# ls (coreutils) 5.2.1 (as ships with slackware 10)
: ~/temp/fixtl [0 540]; ls -l /dvd/bin
total 112
drwxr-xr-x  2 root root 32768 2003-09-28 20:50 i386-linux
drwxr-xr-x  2 root root 32768 2003-09-28 20:50 powerpc-darwin6.6
drwxr-xr-x  4 root root 49152 2004-03-11 13:49 win32

As a consequence, install-tl.sh cannot extract platform names from the
bin/ directory and (silently!) fails to install any binaries at all
(It expects the name in record 9, whereas it is record 8 with the
newer version), consequently (again, silently) fails to build formats
and all sorts of "It's not working" fun ensue.

As a fix, I would suggest that line 60 in series_init be changed as
follows:

systems=`(cd $BIN; ls -l | grep "^d" | awk '{print $9}')`

to

systems=`(cd $BIN; ls -l | awk '/^d/ {print $NF}')`

which will eliminate a spurious call to grep as well and should work
as long as the file name is the last entry in the line. (This will
break for symlinks, but I do not think that ought to happen under
these circumstances. This will also break if platform names may
contain spaces and need not be unique in their last "word", but so did
the old one.)

All the same, I would like to take the opportunity to point out that
TL/TC is a wonderful and highly useful collection, which has, more
than once, saved me from either hours of downloading and installing or
coping with the antique installations of TeX and friends some
distributors see fit to, well, distribute.

Sincerely, 
 Ulrich Schwarz
-- 
Dein Haar ist wie ein Motor. Ohne regelm??ige Wartung l??t seine
Leistung nach.

From olaf at infovore.xs4all.nl  Fri Jul 23 18:28:17 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Fri Jul 23 18:29:29 2004
Subject: [tex-live] Bug in install-tl.sh (TeX Collection '03 and TLC2)
In-Reply-To: <86k6wxujpo.fsf@invisibletruth.local> (Ulrich M. Schwarz's
	message of "Wed, 21 Jul 2004 23:35:47 +0200")
References: <86k6wxujpo.fsf@invisibletruth.local>
Message-ID: <87658er8m6.fsf@infovore.xs4all.nl>

Ulrich M Schwarz writes:

> (Oh, btw: tex-demo@tug.org, which is given within install-tl.sh itself
> as a contact address, bounced on me.)

> Dear TeX-Live team,

> I have, regrettably, discovered that install-tl will break on systems
> with too new a ls:

> Apparently, with recent versions of GNU ls (5.2.1 fails, 4.1 used to
> work), the output format for the file date has changed:

> # ls (fileutils) 4.1 (as shipped with SuSE 8.0)
> : ~/temp/fixtl [0 534]; /mnt/datadisk/bin/ls -l /dvd/bin
> total 112
> drwxr-xr-x    2 root     root        32768 Sep 28  2003 i386-linux
> drwxr-xr-x    2 root     root        32768 Sep 28  2003 powerpc-darwin6.6
> drwxr-xr-x    4 root     root        49152 Mar 11 13:49 win32

> # ls (coreutils) 5.2.1 (as ships with slackware 10)
> : ~/temp/fixtl [0 540]; ls -l /dvd/bin
> total 112
> drwxr-xr-x  2 root root 32768 2003-09-28 20:50 i386-linux
> drwxr-xr-x  2 root root 32768 2003-09-28 20:50 powerpc-darwin6.6
> drwxr-xr-x  4 root root 49152 2004-03-11 13:49 win32

This is because the output format of the date is sensitive to the
locale settings.  Putting an
       export LC_ALL=C
somewhere suitable in the script should work, and is probably (part
of) the best solution.

> As a consequence, install-tl.sh cannot extract platform names from the
> bin/ directory and (silently!) fails to install any binaries at all
> (It expects the name in record 9, whereas it is record 8 with the
> newer version), consequently (again, silently) fails to build formats
> and all sorts of "It's not working" fun ensue.

> As a fix, I would suggest that line 60 in series_init be changed as
> follows:

> systems=`(cd $BIN; ls -l | grep "^d" | awk '{print $9}')`

> to

> systems=`(cd $BIN; ls -l | awk '/^d/ {print $NF}')`

> which will eliminate a spurious call to grep as well and should work
> as long as the file name is the last entry in the line. (This will
> break for symlinks, but I do not think that ought to happen under
> these circumstances. This will also break if platform names may
> contain spaces and need not be unique in their last "word", but so did
> the old one.)

I don't think the platform can contain spaces, as I'm reasonably
certain it would make the configure scripts explode.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From pragma at wxs.nl  Fri Jul 23 20:26:20 2004
From: pragma at wxs.nl (Hans Hagen Outside)
Date: Fri Jul 23 20:27:35 2004
Subject: [tex-live] Re: incremental pdf
In-Reply-To: <cdqgvp$de$1@sea.gmane.org>
References: <cc42fe$62m$1@sea.gmane.org> <x51xjuvz7b.fsf@lola.goethe.zz>
	<ccc1ql$hbn$1@sea.gmane.org> <87fz86kuo6.fsf@infovore.xs4all.nl>
	<44336.159.46.248.216.1090251227.squirrel@mail.rna.nl>
	<cdjibm$h03$1@sea.gmane.org>
	<20040720192322.665e0577.taco@elvenkind.com>
	<40FD853B.2030104@wxs.nl>
	<20040720225647.GA13253@lucien.kn-bremen.de>
	<cdqgvp$de$1@sea.gmane.org>
Message-ID: <4101584C.5010109@wxs.nl>

Jonathan Fine wrote:

>Could anyone inform me, as to why pdftex rather than a
>dvi to pdf translator.
>  
>
i guess it must have been done in a moment of weakness, oh, how i long to those 2 gig dvi files and 4.7 gig ps files opposed to .8 gig pdf files, and how do i miss the moments i have to explain why the tex community could not come up with dvi#  ... 

sorry i can't help you answering this question, since i garbage collected the part of my brain dedicated to tex and friends  

Hans  

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From tigran at aivazian.fsnet.co.uk  Sun Jul 25 00:12:50 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul 25 00:15:22 2004
Subject: [tex-live] Bug in install-tl.sh (TeX Collection '03 and TLC2)
In-Reply-To: <87658er8m6.fsf@infovore.xs4all.nl>
Message-ID: <Pine.LNX.4.44.0407242311310.2383-100000@einstein.homenet>

why do we need to use "ls -l" at all and do all those execs, pipes etc?
why not simply:

(cd /whatever ; echo *)

as long as the script is executed by bash echo is going to be builtin and 
will produce the desired output, without any overhead of forking another 
process.

Kind regards
Tigran

On Fri, 23 Jul 2004, Olaf Weber wrote:

> Ulrich M Schwarz writes:
> 
> > (Oh, btw: tex-demo@tug.org, which is given within install-tl.sh itself
> > as a contact address, bounced on me.)
> 
> > Dear TeX-Live team,
> 
> > I have, regrettably, discovered that install-tl will break on systems
> > with too new a ls:
> 
> > Apparently, with recent versions of GNU ls (5.2.1 fails, 4.1 used to
> > work), the output format for the file date has changed:
> 
> > # ls (fileutils) 4.1 (as shipped with SuSE 8.0)
> > : ~/temp/fixtl [0 534]; /mnt/datadisk/bin/ls -l /dvd/bin
> > total 112
> > drwxr-xr-x    2 root     root        32768 Sep 28  2003 i386-linux
> > drwxr-xr-x    2 root     root        32768 Sep 28  2003 powerpc-darwin6.6
> > drwxr-xr-x    4 root     root        49152 Mar 11 13:49 win32
> 
> > # ls (coreutils) 5.2.1 (as ships with slackware 10)
> > : ~/temp/fixtl [0 540]; ls -l /dvd/bin
> > total 112
> > drwxr-xr-x  2 root root 32768 2003-09-28 20:50 i386-linux
> > drwxr-xr-x  2 root root 32768 2003-09-28 20:50 powerpc-darwin6.6
> > drwxr-xr-x  4 root root 49152 2004-03-11 13:49 win32
> 
> This is because the output format of the date is sensitive to the
> locale settings.  Putting an
>        export LC_ALL=C
> somewhere suitable in the script should work, and is probably (part
> of) the best solution.
> 
> > As a consequence, install-tl.sh cannot extract platform names from the
> > bin/ directory and (silently!) fails to install any binaries at all
> > (It expects the name in record 9, whereas it is record 8 with the
> > newer version), consequently (again, silently) fails to build formats
> > and all sorts of "It's not working" fun ensue.
> 
> > As a fix, I would suggest that line 60 in series_init be changed as
> > follows:
> 
> > systems=`(cd $BIN; ls -l | grep "^d" | awk '{print $9}')`
> 
> > to
> 
> > systems=`(cd $BIN; ls -l | awk '/^d/ {print $NF}')`
> 
> > which will eliminate a spurious call to grep as well and should work
> > as long as the file name is the last entry in the line. (This will
> > break for symlinks, but I do not think that ought to happen under
> > these circumstances. This will also break if platform names may
> > contain spaces and need not be unique in their last "word", but so did
> > the old one.)
> 
> I don't think the platform can contain spaces, as I'm reasonably
> certain it would make the configure scripts explode.
> 
> 

From tigran at aivazian.fsnet.co.uk  Sun Jul 25 00:20:20 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul 25 00:22:46 2004
Subject: [tex-live] problems with non-final sigma
Message-ID: <Pine.LNX.4.44.0407242309050.2383-100000@einstein.homenet>

Hello,

I emailed to the maintainer of Babel/Greek with this question a couple of 
months ago but, unfortunately, even he didn't know what the solution to 
the problem is, so I decided to ask here (but cc'd Apostolos in case he 
already found the solution by now).

In the past, there used to be separate characters for normal sigma (s) and 
the final sigma (c), so printing a final or non-final version was trivial.

However, recently (in the last few years or so) someone decided to
"improve" the situation and made this context-sensitive, i.e.  
automatically decide whether "s" is going to be normal or a final sigma.  
Well, ok, maybe it is useful (though I prefer a fixed plain version for
certainty sake) but now it seems to be impossible to produce a non-final
sigma where the context demands a final version.

An example of such situation is a table of the alphabet where a letter 
appears on its own and LaTeX decides it must be final.

So far, the only workaround (a horrible fontsize-specific one) I invented 
is to use "color" package and print another letter after it and then 
backspace and overprint it with white color, like this:

% a curious way to force non-final sigma:
% draw an alpha after sigma and then backspace and draw
% another alpha over it with white color.
% then backspace again for the space balance
\newcommand{\mysigma}{%
        \textgreek{sa%
                \hspace{-5.56pt}%
                \textcolor{white}{a}%
                \hspace{-4pt}%
        }
}

Can someone please suggest a proper solution, i.e. how to force 
\textgreek{s} on its own to produce a non-final sigma? Thank you.

Kind regards
Tigran



From karl at freefriends.org  Sun Jul 25 00:26:26 2004
From: karl at freefriends.org (Karl Berry)
Date: Sun Jul 25 00:27:35 2004
Subject: [tex-live] Bug in install-tl.sh (TeX Collection '03 and TLC2)
In-Reply-To: <Pine.LNX.4.44.0407242311310.2383-100000@einstein.homenet>
Message-ID: <200407242226.i6OMQQO14397@f7.net>

    (cd /whatever ; echo *)

At first blush, it sounds good.  I will think about it, and fix it one
way or another.  (Unless someone else beats me to it. :)  Thanks.

From vvv at vsu.ru  Sun Jul 25 00:30:21 2004
From: vvv at vsu.ru (Vladimir Volovich)
Date: Sun Jul 25 00:31:16 2004
Subject: [tex-live] problems with non-final sigma
In-Reply-To: <Pine.LNX.4.44.0407242309050.2383-100000@einstein.homenet>
	(Tigran Aivazian's message of "Sat, 24 Jul 2004 23:20:20 +0100 (BST)")
References: <Pine.LNX.4.44.0407242309050.2383-100000@einstein.homenet>
Message-ID: <m3ekn1rqbm.fsf@vvv.vsu.ru>

"TA" == Tigran Aivazian writes:

 TA> Can someone please suggest a proper solution, i.e. how to force
 TA> \textgreek{s} on its own to produce a non-final sigma? Thank you.

find out what is the <slot number> of the "non-final sigma" glyph, and
use \char<slot number>
(you may use testfont.tex to pring all glyph slots)

or better lgrenc.def shall better define
\DeclareTextSymbol{\nonfinalsigma}{LGR}{...}

Best,
v.

From tigran at aivazian.fsnet.co.uk  Sun Jul 25 00:40:34 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul 25 00:43:07 2004
Subject: [tex-live] problems with non-final sigma
In-Reply-To: <m3ekn1rqbm.fsf@vvv.vsu.ru>
Message-ID: <Pine.LNX.4.44.0407242333210.2383-100000@einstein.homenet>

On Sun, 25 Jul 2004, Vladimir Volovich wrote:

> "TA" == Tigran Aivazian writes:
> 
>  TA> Can someone please suggest a proper solution, i.e. how to force
>  TA> \textgreek{s} on its own to produce a non-final sigma? Thank you.
> 
> find out what is the <slot number> of the "non-final sigma" glyph, and
> use \char<slot number>
> (you may use testfont.tex to pring all glyph slots)

I wish it was that easy. Yes, that was the first thing I tried but it 
still produced the final sigma. But the same \char'163 followed by another 
letter produced the non-final sigma.

(I didn't know about testfont.tex in the past so I just used od -x output 
of dvi file).

Kind regards
Tigran

From vvv at vsu.ru  Sun Jul 25 00:51:10 2004
From: vvv at vsu.ru (Vladimir Volovich)
Date: Sun Jul 25 00:52:07 2004
Subject: [tex-live] problems with non-final sigma
In-Reply-To: <Pine.LNX.4.44.0407242333210.2383-100000@einstein.homenet>
	(Tigran Aivazian's message of "Sat, 24 Jul 2004 23:40:34 +0100 (BST)")
References: <Pine.LNX.4.44.0407242333210.2383-100000@einstein.homenet>
Message-ID: <m3acxprpcx.fsf@vvv.vsu.ru>

"TA" == Tigran Aivazian writes:

 TA> I wish it was that easy. Yes, that was the first thing I tried
 TA> but it still produced the final sigma. But the same \char'163
 TA> followed by another letter produced the non-final sigma.

uh, then put {} after that char - it will suppress the ligature...

Best,
v.

From tigran at aivazian.fsnet.co.uk  Sun Jul 25 09:08:12 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul 25 09:10:41 2004
Subject: [tex-live] problems with non-final sigma
In-Reply-To: <m3acxprpcx.fsf@vvv.vsu.ru>
Message-ID: <Pine.LNX.4.44.0407250804170.1319-100000@einstein.homenet>

On Sun, 25 Jul 2004, Vladimir Volovich wrote:

> "TA" == Tigran Aivazian writes:
> 
>  TA> I wish it was that easy. Yes, that was the first thing I tried
>  TA> but it still produced the final sigma. But the same \char'163
>  TA> followed by another letter produced the non-final sigma.
> 
> uh, then put {} after that char - it will suppress the ligature...
> 

Of course I tried that as well (2 months ago) and it didn't work either.
If it was that easy then Apostolos Syropoulos (the author of Babel/Greek 
option) would have been able to solve it... As I said, this is a complex 
fundamental problem and I tried many possibilities that I could think of 
(with my modest 10 years experience in TeX/LaTeX).

No, it is something more fundamental, like catcode redefining or something 
like that, which I don't fully understand (but I am sure someone does).

So, so far, there seems to be NO way to force a non-final sigma in a Greek
text, therefore I suggest to remove the context-sensitive logic from
Babel/Greek language definition because it introduces this serious bug.  
I.e. unless someone does come up with a working way to display a non-final
sigma.

Kind regards
Tigran

From vvv at vsu.ru  Sun Jul 25 11:14:25 2004
From: vvv at vsu.ru (Vladimir Volovich)
Date: Sun Jul 25 11:15:22 2004
Subject: [tex-live] problems with non-final sigma
In-Reply-To: <Pine.LNX.4.44.0407250804170.1319-100000@einstein.homenet>
	(Tigran Aivazian's message of "Sun, 25 Jul 2004 08:08:12 +0100 (BST)")
References: <Pine.LNX.4.44.0407250804170.1319-100000@einstein.homenet>
Message-ID: <m3smbgqwi6.fsf@vvv.vsu.ru>

"TA" == Tigran Aivazian writes:

 TA> I wish it was that easy. Yes, that was the first thing I tried
 TA> but it still produced the final sigma. But the same \char'163
 TA> followed by another letter produced the non-final sigma.
 >>  uh, then put {} after that char - it will suppress the
 >> ligature...

 TA> Of course I tried that as well (2 months ago) and it didn't work
 TA> either.

could you then post a small test file which demonstrates the problem?
I'll try to help.

Best,
v.

From Robin.Fairbairns at cl.cam.ac.uk  Sun Jul 25 10:53:05 2004
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Sun Jul 25 11:17:25 2004
Subject: [pdftex] Re: [tex-live] problems with non-final sigma 
In-Reply-To: Your message of Sun, 25 Jul 2004 08:08:12 +0100.
	<Pine.LNX.4.44.0407250804170.1319-100000@einstein.homenet> 
Message-ID: <E1Boekk-0002yI-00@mta1.cl.cam.ac.uk>

Tigran Aivazian writes:

> No, it is something more fundamental, like catcode redefining or something 
> like that, which I don't fully understand (but I am sure someone does).

doesn't sound like it to me (and indeed it doesn't occur in the
absence of babel greek of any sort -- nb i only know modern greek).
it would take rather extreme coding to decide to change the catcode of
a letter.  far more likely is a boundary character ligature, as
vladimir suggests -- except at a cursory glance (i've installed the
fonts since i started typing ... helps to maintain a ctan mirror at
home, and a sunday morning to play) i can't find the ligature in the
table.

however, while i see your problem, i don't really understand your
premise.  the only circumstance i can imagine needing a non-terminal
sigma is in an instructional manual, and in that case it's easy enough
to do a fiddle like yours with alpha (though i personally wouldn't
code it like you did...).

> So, so far, there seems to be NO way to force a non-final sigma in a Greek
> text, therefore I suggest to remove the context-sensitive logic from
> Babel/Greek language definition because it introduces this serious bug.  
> I.e. unless someone does come up with a working way to display a non-final
> sigma.

my guess is there's no context sensitivity in babel greek (for sure,
none is needed in this area) -- it's all in the font.  and there is
notoriously no way to switch off ligature effects in tex.  :-(

incidentally, knuth's test \lowers, in testfont, is particularly
useless in this case, since it would appear not to allow any two
letters to ligature -- every sigma in it appears as a terminal sigma.
even \names only produces one medial sigma that i can see (which has
me boggling about how he implements that test ... i can imagine such
an infelicity in \lowers).

robin

nb, i've placed reply-to texhax in the header.  *please* don't post
general tex questions to pdftex or tex-live -- this isn't a pdftex or
a packaging effect, which are what those lists are for.

From vvv at vsu.ru  Sun Jul 25 11:22:51 2004
From: vvv at vsu.ru (Vladimir Volovich)
Date: Sun Jul 25 11:23:44 2004
Subject: [tex-live] errors during automated updates?
Message-ID: <m3oem4qw44.fsf@vvv.vsu.ru>


Build/cdbuild/logs/log contains these things:

Date 2004/07/22 10:09:45:
Operation: user-describe
Librarian diff depot/Master/texmf-dist/ls-R failed.
can't make directory for 1.91
checkout 1.91 failed
no revision after 1.92!

Is something unexpected happening during automated updates?

Best,
v.

From tigran at aivazian.fsnet.co.uk  Sun Jul 25 11:27:02 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul 25 11:29:30 2004
Subject: [tex-live] problems with non-final sigma
In-Reply-To: <m3smbgqwi6.fsf@vvv.vsu.ru>
Message-ID: <Pine.LNX.4.44.0407251026170.1660-100000@einstein.homenet>

On Sun, 25 Jul 2004, Vladimir Volovich wrote:
> could you then post a small test file which demonstrates the problem?
> I'll try to help.

Thank you, Vladimir. I should have done that from the beginning. Here it 
is:

 http://www.bibles.org.uk/sigma

It contains simple.tex and simple.pdf (pdflatex simple).

Kind regards
Tigran

From vvv at vsu.ru  Sun Jul 25 12:20:45 2004
From: vvv at vsu.ru (Vladimir Volovich)
Date: Sun Jul 25 12:21:43 2004
Subject: [tex-live] problems with non-final sigma
In-Reply-To: <Pine.LNX.4.44.0407251026170.1660-100000@einstein.homenet>
	(Tigran Aivazian's message of "Sun, 25 Jul 2004 10:27:02 +0100 (BST)")
References: <Pine.LNX.4.44.0407251026170.1660-100000@einstein.homenet>
Message-ID: <m3k6wsqtfm.fsf@vvv.vsu.ru>

"TA" == Tigran Aivazian writes:

 >> could you then post a small test file which demonstrates the
 >> problem?  I'll try to help.

 TA> Thank you, Vladimir. I should have done that from the
 TA> beginning. Here it is:

 TA>  http://www.bibles.org.uk/sigma

 TA> It contains simple.tex and simple.pdf (pdflatex simple).

well, it appeared that it's not about catcodes, etc - it was a
boundary character ligature (in the font gk7t.tfm) which makes it hard
to input non-final sigma as a separate character.

You can use this:

\def\finalsigma{\noboundary c\noboundary}
\def\nonfinalsigma{\noboundary s\noboundary}

Best,
v.

P.S. sorry for posting to tex-live and pdftex - hopefully it's the
last email on this subject.

From tigran at aivazian.fsnet.co.uk  Sun Jul 25 12:59:24 2004
From: tigran at aivazian.fsnet.co.uk (Tigran Aivazian)
Date: Sun Jul 25 13:01:54 2004
Subject: [tex-live] problems with non-final sigma
In-Reply-To: <m3k6wsqtfm.fsf@vvv.vsu.ru>
Message-ID: <Pine.LNX.4.44.0407251144170.1824-100000@einstein.homenet>

On Sun, 25 Jul 2004, Vladimir Volovich wrote:
> You can use this:
> 
> \def\finalsigma{\noboundary c\noboundary}
> \def\nonfinalsigma{\noboundary s\noboundary}

Yes, this is a working solution. Thank you.

> P.S. sorry for posting to tex-live and pdftex - hopefully it's the
> last email on this subject.

No, I am afraid there has to be at least one more --- this one :) 

Thank you very much for your help, Vladimir. I acknowledged your help in
the Intro section of gnt.pdf here:

 http://www.bibles.org.uk/pdf/bibles/

Spasibo,
Tigran

From karl at freefriends.org  Sun Jul 25 15:49:20 2004
From: karl at freefriends.org (Karl Berry)
Date: Sun Jul 25 15:50:58 2004
Subject: [tex-live] errors during automated updates?
In-Reply-To: <m3oem4qw44.fsf@vvv.vsu.ru>
Message-ID: <200407251349.i6PDnKE18382@f7.net>

    Date 2004/07/22 10:09:45:
    Operation: user-describe
    Librarian diff depot/Master/texmf-dist/ls-R failed.
    can't make directory for 1.91
    checkout 1.91 failed
    no revision after 1.92!

This is because texmf-dist/ls-R has options set to keep history (I
believe).  It's harmless, as far as I can see.  I couldn't see an easy
way to change the scripts to avoid it.

From olaf at infovore.xs4all.nl  Sun Jul 25 16:58:33 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Sun Jul 25 16:59:59 2004
Subject: [tex-live] Bug in install-tl.sh (TeX Collection '03 and TLC2)
In-Reply-To: <200407242226.i6OMQQO14397@f7.net> (Karl Berry's message of
	"Sat, 24 Jul 2004 18:26:26 -0400")
References: <200407242226.i6OMQQO14397@f7.net>
Message-ID: <87pt6kp206.fsf@infovore.xs4all.nl>

Karl Berry writes:

>     (cd /whatever ; echo *)

> At first blush, it sounds good.  I will think about it, and fix it one
> way or another.  (Unless someone else beats me to it. :)  Thanks.

You might want to do someting like

	(cd /whatever; echo x *)

and strip the 'x'.  This to catch the case where a filename starting
with a '-' is present, which some version of echo might try to
interpret as an option.

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From potamianos at sch.gr  Sun Jul 25 19:47:51 2004
From: potamianos at sch.gr (=?iso-8859-7?B?w+nc7e3n8iDQ7/Th7Onc7e/y?=)
Date: Mon Jul 26 15:15:19 2004
Subject: [tex-live] Correction for the package elmath.doc
Message-ID: <000a01c4726f$82295660$2a12ba51@pc>

Correction for the package elmath

The command in the package elmath made by Yiannis Potamianos and A. Syropoulos 
which is contained in CTAN must de corrected:

\def^^ed{\mu} to \def^^ed{\nu}

Yours Faithfully
Yiannis Potamianos

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/mailman/private/tex-live/attachments/20040725/02eb5375/attachment.htm
From karl at freefriends.org  Mon Jul 26 15:35:48 2004
From: karl at freefriends.org (Karl Berry)
Date: Mon Jul 26 15:37:00 2004
Subject: [tex-live] Correction for the package elmath.doc
In-Reply-To: <000a01c4726f$82295660$2a12ba51@pc>
Message-ID: <200407261335.i6QDZm219449@f7.net>

    The command in the package elmath made by Yiannis Potamianos and
    A. Syropoulos which is contained in CTAN must de corrected:

    \def^^ed{\mu} to \def^^ed{\nu}

We can make the correction in the TL sources,
but can you also upload a new version to CTAN, please?

I actually don't see any elmath.doc on CTAN at all.

Thanks,
k

From karl at freefriends.org  Tue Jul 27 01:53:08 2004
From: karl at freefriends.org (Karl Berry)
Date: Tue Jul 27 01:54:08 2004
Subject: [tex-live] Bug in install-tl.sh (TeX Collection '03 and TLC2)
In-Reply-To: <86k6wxujpo.fsf@invisibletruth.local>
Message-ID: <200407262353.i6QNr8X20040@f7.net>

    systems=`(cd $BIN; ls -l | grep "^d" | awk '{print $9}')`

I decided to change this to:
  systems=`(cd $LISTS; ls bin-tex.* | sed  -e 's/bin-tex.//')
which is the same logic used in install-live.sh and install-compr.sh (now).
I'm not worried about the extra processes.

    (Oh, btw: tex-demo@tug.org, which is given within install-tl.sh itself
    as a contact address, bounced on me.)

One too many global replaces.  I changed to the intended tex-live@tug.org.
Glad you got past that :).

       export LC_ALL=C

I added this to common.sh, although I don't think it's necessary any
more.  I hope it doesn't cause unexpected trouble, like people wanting
any shell error messages in their locale language or something.


We don't currently plan to have the "demo" distribution this year
anyway, but in case we do, at least it's fixed.

Thanks,
karl

From wl at gnu.org  Tue Jul 27 08:55:25 2004
From: wl at gnu.org (Werner LEMBERG)
Date: Tue Jul 27 09:01:53 2004
Subject: [tex-live] request for improvement of p4changelog
Message-ID: <20040727.085525.98558079.wl@gnu.org>


Karl,


can you suppress entries like this?

  Change 5569 by karl@karltug on 2004/07/24 10:09:47

          regenerated by /home/karl/src/Master/Tools/p4changelog

  Affected files ...
   Build/cdbuild/logs/log#33 edit

IMHO they are not very meaningful...

    Werner

From karl at freefriends.org  Tue Jul 27 15:43:24 2004
From: karl at freefriends.org (Karl Berry)
Date: Tue Jul 27 15:47:33 2004
Subject: [tex-live] request for improvement of p4changelog
In-Reply-To: <20040727.085525.98558079.wl@gnu.org>
Message-ID: <200407271343.i6RDhOU25418@f7.net>

              regenerated by /home/karl/src/Master/Tools/p4changelog

      Affected files ...
       Build/cdbuild/logs/log#33 edit

    IMHO they are not very meaningful...

If you want to hack the script to omit the log change, that's fine with
me.  It's Master/Tools/p4changelog.  I need to work on other things.

From karl at freefriends.org  Sat Jul 31 01:51:43 2004
From: karl at freefriends.org (Karl Berry)
Date: Sat Jul 31 01:53:02 2004
Subject: [tex-live] cp227.tcx default mapping
Message-ID: <200407302351.i6UNph005429@f7.net>

After discussions with Olaf, Hans, and Thomas (Sebastian was included,
but appears to be busy with other things), we reached a consensus of
using a new file cp227.tcx as the -translate-file for all formats except
ConTeXt (which remains using -8bit).

This new tcx makes codes 128 and above printable, as just (the misnamed)
cp8bit.tcx does that we used last year.  In addition, it makes tab
(0x9), vertical tab (0xa), and form feed (0xb) printable.  All other
codes <=31 remain unprintable and will appear in ^^ notation.

As originally noted by Paul Vojta, this has the downside that certain
diagnostics to tty will be difficult to understand, for example:
  \showhyphens{$\Psi}
writes this to the terminal:
  Underfull \hbox (badness 10000) detected at line 0
  [] $\tenrm 	$
(that's a real tab character after the \tenrm)
This is because \Psi is \mathchardef to "..09.  Similarly for \Omega and
\alpha.

But the advantage is that now real tabs and form feeds in the input will
*not* be translated to ^^I and ^^L when TeX writes error messages.
These are probably the most common codes below 32 which appear in input
files, thus the idea of translating only them.

Furthermore, writing other codes can confuse the linux terminal type (at
least), which would be perhaps the worst possible outcome.

I'm sure many people will be confused and/or upset by this, but it seems
the best we can do this year.  There are various improvements possible,
but they all require changing quite a bit of code, and if we still hope
to make a release in 2004, we need to stabilize.

I've checked in cp227.tcx and new versions of fmtutil.in and fmtutil.cnf
to implement this (change #5593).  Hope there is no horrible outcry ...

Thanks,
k

From dak at gnu.org  Sat Jul 31 02:12:19 2004
From: dak at gnu.org (David Kastrup)
Date: Sat Jul 31 02:13:40 2004
Subject: [tex-live] cp227.tcx default mapping
In-Reply-To: <200407302351.i6UNph005429@f7.net>
References: <200407302351.i6UNph005429@f7.net>
Message-ID: <x5wu0lyqzg.fsf@lola.goethe.zz>

karl@freefriends.org (Karl Berry) writes:

> After discussions with Olaf, Hans, and Thomas (Sebastian was included,
> but appears to be busy with other things), we reached a consensus of
> using a new file cp227.tcx as the -translate-file for all formats except
> ConTeXt (which remains using -8bit).
> 
> This new tcx makes codes 128 and above printable, as just (the misnamed)
> cp8bit.tcx does that we used last year.  In addition, it makes tab
> (0x9), vertical tab (0xa), and form feed (0xb) printable.  All other
> codes <=31 remain unprintable and will appear in ^^ notation.
> 
> As originally noted by Paul Vojta, this has the downside that certain
> diagnostics to tty will be difficult to understand, for example:
>   \showhyphens{$\Psi}
> writes this to the terminal:
>   Underfull \hbox (badness 10000) detected at line 0
>   [] $\tenrm 	$
> (that's a real tab character after the \tenrm)
> This is because \Psi is \mathchardef to "..09.  Similarly for \Omega and
> \alpha.
> 
> But the advantage is that now real tabs and form feeds in the input will
> *not* be translated to ^^I and ^^L when TeX writes error messages.

What would actually be needed is a special mode for error contexts in
which TeX does not translate at all.

I am trying to get this wrapped by preview-latex (and later AUCTeX)
currently regardless of the encoding.  Particularly ugly is the
following:

ERROR: Undefined control sequence.

--- TeX said ---
l.5 ...f^^87^^e1^^bf^^87 ^^e1^^bc^^a6^^ce^^bd\barf
                                                   ^^e1^^bd^^81 ^^ce^^bb^^e1...

The "...f" actually is the tail from something like ^^8f -- argh!  TeX
cuts the error context off in the middle of a byte!

It would at least appear that TeX will cut the _trailing_ error
context off at byte boundaries, no idea why that would be the case if
it does not care at the front.  But it still is not a UTF-8 character
boundary where the cut occurs.

Also note that the above output gets produced by default from
TeXlive2003 with a valid utf8 locale.

Sigh.  Programming TeX shells is no fun.

-- 
David Kastrup, Kriemhildstr. 15, 44793 Bochum

From karl at freefriends.org  Sat Jul 31 02:21:45 2004
From: karl at freefriends.org (Karl Berry)
Date: Sat Jul 31 02:23:12 2004
Subject: [tex-live] cp227.tcx default mapping
In-Reply-To: <x5wu0lyqzg.fsf@lola.goethe.zz>
Message-ID: <200407310021.i6V0Ljr11338@f7.net>

    What would actually be needed is a special mode for error contexts in
    which TeX does not translate at all.

Yeah.  Not going to happen for this release.  Sorry.

From hebron at cs.sfu.ca  Sat Jul 31 02:13:24 2004
From: hebron at cs.sfu.ca (John Hebron)
Date: Sat Jul 31 14:45:50 2004
Subject: [tex-live] vptovf bug on Solaris platform
Message-ID: <200407310013.i6V0DO300313@chrysanthemum.css.sfu.ca>

Hi TUG,

I'd like to report a bug with the Solaris version of vptovf.
(TeXLive 2003) When running vptovf on a vpl file, it makes the
tfm file okay, but only gets part way through making the vf file,
and then reports:

vptovf: fatal: putbyte(255) failed.

We are running Solaris 8 on sparc.

(We also tried the Linux version of vptovf [TeXLive 2003], and it
worked okay.  The problem seems to be restricted to the Solaris
version.)

John
----
John Hebron, Development Manager
Network Support Group
Faculty of Applied Sciences
Simon Fraser University
Burnaby, B.C. V5A 1S6
Canada

From vvv at vsu.ru  Sat Jul 31 14:51:55 2004
From: vvv at vsu.ru (Vladimir Volovich)
Date: Sat Jul 31 14:52:55 2004
Subject: [tex-live] vptovf bug on Solaris platform
In-Reply-To: <200407310013.i6V0DO300313@chrysanthemum.css.sfu.ca> (John
	Hebron's message of "Fri, 30 Jul 2004 17:13:24 -0700 (PDT)")
References: <200407310013.i6V0DO300313@chrysanthemum.css.sfu.ca>
Message-ID: <m38yd0uyok.fsf@vvv.vsu.ru>

"JH" == John Hebron writes:

 JH> Hi TUG, I'd like to report a bug with the Solaris version of
 JH> vptovf.  (TeXLive 2003) When running vptovf on a vpl file, it
 JH> makes the tfm file okay, but only gets part way through making
 JH> the vf file, and then reports:

 JH> vptovf: fatal: putbyte(255) failed.

 JH> We are running Solaris 8 on sparc.

 JH> (We also tried the Linux version of vptovf [TeXLive 2003], and it
 JH> worked okay.  The problem seems to be restricted to the Solaris
 JH> version.)

This is a long known bug - see http://www.tug.org/texlive/bugs.html

Best,
v.

From olaf at infovore.xs4all.nl  Sat Jul 31 17:06:43 2004
From: olaf at infovore.xs4all.nl (Olaf Weber)
Date: Sat Jul 31 17:04:17 2004
Subject: [tex-live] e-TeX schedule
Message-ID: <87llh043ng.fsf@infovore.xs4all.nl>

Word from Peter Breitenlohner is that e-TeX 2.2 will most likely be
available in the first half of september.  (He'll be out of touch in
the interval, making an earlier release impossible.)

-- 
Olaf Weber

               (This space left blank for technical reasons.)

From karl at freefriends.org  Sat Jul 31 17:10:01 2004
From: karl at freefriends.org (Karl Berry)
Date: Sat Jul 31 17:14:24 2004
Subject: [tex-live] e-TeX schedule
In-Reply-To: <87llh043ng.fsf@infovore.xs4all.nl>
Message-ID: <200407311510.i6VFA1I29633@f7.net>

    Word from Peter Breitenlohner is that e-TeX 2.2 will most likely be
    available in the first half of september.

Is there anything crucial in 2.2 that must be in TL 2004?

I sure hope not.  I would be even more worried than I am already if we
cannot start building and testing the final binaries until September!

Thanks for the info.

From pragma at wxs.nl  Sat Jul 31 18:41:02 2004
From: pragma at wxs.nl (Hans Hagen Outside)
Date: Sat Jul 31 18:42:33 2004
Subject: [tex-live] e-TeX schedule
In-Reply-To: <200407311510.i6VFA1I29633@f7.net>
References: <200407311510.i6VFA1I29633@f7.net>
Message-ID: <410BCB9E.2070502@wxs.nl>

Karl Berry wrote:

>    Word from Peter Breitenlohner is that e-TeX 2.2 will most likely be
>    available in the first half of september.
>
>Is there anything crucial in 2.2 that must be in TL 2004?
>  
>
about from crucial, will there be anything new? if so, is there already info on that? (as far as i know there is nothing announced, so for me the most important issue is that the bugs are solved) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

