From kakuto at fuk.kindai.ac.jp  Mon Jul  2 16:29:11 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Mon, 2 Jul 2018 23:29:11 +0900
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
Message-ID: <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>

Dear Josef,

> Surprisingly, I just learned that it works if called from getmap.sty!

Thanks for the test.
I don't know lua, and I don't understand what is changed,
but I think that it is best and simplest at present to update getmapdl.lua
as follows, as stated by Ulrike:

--- getmapdl.lua.orig    Sun Oct 12 07:25:53 2014
+++ getmapdl.lua    Mon Jul 02 23:02:58 2018
@@ -10,7 +10,7 @@
--
local http = require("socket.http");
local ltn12 = require("ltn12")
-local url = require("socket.url")
+local url = socket.url or require("socket.url")

local OSMURL = "http://open.mapquestapi.com/staticmap/v4/getplacemap"
local GMURL = "http://maps.googleapis.com/maps/api/staticmap"


Thanks,
Akira


From ab2rock at nycap.rr.com  Mon Jul  2 08:24:23 2018
From: ab2rock at nycap.rr.com (Alexander Rock)
Date: Mon, 2 Jul 2018 02:24:23 -0400
Subject: [tex-live] Unable to install package with tlmgr
Message-ID: <cf305e8c-5f4c-5f59-b01f-2be7ee3b084f@nycap.rr.com>

Hello,

I got the following error when attempting to install the placeins 
package on my system, and the error message instructed me to report it 
to you. Is there any way I can install the placeins package using tlmgr?

[erebus at the_void ~]$ sudo tlmgr install placeins
/opt/texlive/2018/bin/x86_64-linux/tlmgr: signature verification error 
of /tmp/2jPW_0Y2Nf/Yw1ZqsWk3X from 
http://mirrors.ibiblio.org/pub/mirrors/CTAN/systems/texlive/tlnet/tlpkg/texlive.tlpdb: 
cryptographic signature verification of
 ? /tmp/2jPW_0Y2Nf/xElUk31DMs
against
http://mirrors.ibiblio.org/pub/mirrors/CTAN/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc
failed. Output was
gpg: verify signatures failed: Unknown system error

Please report to texlive at tug.org

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180702/3a44367d/attachment.html>

From karl at freefriends.org  Mon Jul  2 22:52:41 2018
From: karl at freefriends.org (Karl Berry)
Date: Mon, 2 Jul 2018 20:52:41 GMT
Subject: [tex-live] Problem with `kpsewhich --all'
In-Reply-To: <20180407.123934.1482178050355138840.wl@gnu.org>
Message-ID: <201807022052.w62KqfY1018158@freefriends.org>

    It seems that option `--all' of `kpsewhich' has an undocumented
    limitation: It doesn't work for PK files.

I documented it, and made kpsewhich give a warning if it is used.

Unfortunately actually making it work seemed impractical, given the many
peculiarities of glyph search. -k

From nospam-abuse at ilyaz.org  Wed Jul  4 19:03:55 2018
From: nospam-abuse at ilyaz.org (Ilya Zakharevich)
Date: Wed, 4 Jul 2018 10:03:55 -0700
Subject: [tex-live] tl2018: problems with including a (very specific)
 PNG file
In-Reply-To: <201806242150.w5OLolos019690@freefriends.org>
References: <20180620121655.vvaioqlwtyp3nato@math.berkeley.edu>
 <201806242150.w5OLolos019690@freefriends.org>
Message-ID: <20180704170355.tbjbc5pcotegv5re@math.berkeley.edu>

On Sun, Jun 24, 2018 at 09:50:47PM +0000, Karl Berry wrote:
>     The attached files build ???fine??? with tl2009, but produce a very bad
>     result with tl2018.
> 
> I don't get any difference in the output between 2009 and today (on
> x86-linux), but anyway, whatever is going on I believe is in the LaTeX
> drivers rather than the pdftex binary, because it worked normally with
> plain pdftex. So I posted here:
> https://github.com/latex3/graphics-def/issues/18

A lot of thanks!

> I surmise a workaround could be to open/save the png, or run through
> pngtopnm|pnmtopng, or whatever, since clearly that particular png is
> indeed "unusual". --best, karl.

Unfortunately, no.  This file is freshly generated by ImageMagick??s
convert.  This unfortunate property survives all the conversions???

  [ However, the file this image was ???convert???ed from may be indeed
    problematic.  It dates from the time of emTeX, which supported
    only, essentially, .PCX.  At the time, since (my?) graphing
    infrastructure was in infancy only, a wrong DPI value may have
    easily crept in. ]

Anyway, it is hours lost in debugging?????????and, apparently, not much can
be improved here???  A pity!

Thankfully, yours,
Ilya

From kakuto at fuk.kindai.ac.jp  Thu Jul  5 12:43:53 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu, 5 Jul 2018 19:43:53 +0900
Subject: [tex-live] tl2018: problems with including a (very specific) PNG
	file
In-Reply-To: <201807022052.w62KqfY1018158@freefriends.org>
References: <201807022052.w62KqfY1018158@freefriends.org>
Message-ID: <E183DDCA0E9C484FA8AFE448828D0248@CJ3001517A>

Dear Ilya Zakharevich,

> Unfortunately, no.  This file is freshly generated by ImageMagick's
> convert.  This unfortunate property survives all the conversions.

I tried by using the convert in ImageMagick:

convert -geometry 202x38 -verbose try-tl2018a.png small.png

Obtained small.png seems to be good.

extractbb shows:

%%Title: try-tl2018a.png
%%Creator: extractbb 20180506
%%BoundingBox: 0 0 73555 13810

Note that 73555bp is larger than 2^30sp, so calculation
is impossible as a TeX dimension.

Best,
Akira


From tex at 2krueger.de  Thu Jul  5 18:12:56 2018
From: tex at 2krueger.de (=?UTF-8?Q?Marcel_Kr=C3=BCger?=)
Date: Thu, 05 Jul 2018 18:12:56 +0200
Subject: [tex-live] Activation of Map file for package fontawesome5
Message-ID: <1646b37cef4.bafbfb3a2247.89758934367857254@2krueger.de>

Hi, 

I maintain the package fontawesome5 and got some bug reports because the Map file of the font is not added automatically if the package is installed with TeXLive.
I think the problem is a missing

    execute addMap fontawesome5.map

in fontawesome5.tlpsrc. Does anyone know what I have to do to add this in the TeXLive repo?

Best regards
Marcel Kr?ger



From martin at dante.de  Thu Jul  5 18:49:51 2018
From: martin at dante.de (Martin Sievers)
Date: Thu, 5 Jul 2018 18:49:51 +0200
Subject: [tex-live] Activation of Map file for package fontawesome5
In-Reply-To: <1646b37cef4.bafbfb3a2247.89758934367857254@2krueger.de>
References: <1646b37cef4.bafbfb3a2247.89758934367857254@2krueger.de>
Message-ID: <d454fba3-49fe-512a-cf06-4f227b5a3cae@dante.de>

Am 05.07.2018 um 18:12 schrieb Marcel Kr?ger:
> Hi,
>
> I maintain the package fontawesome5 and got some bug reports because the Map file of the font is not added automatically if the package is installed with TeXLive.
> I think the problem is a missing
>
>     execute addMap fontawesome5.map
>
> in fontawesome5.tlpsrc. Does anyone know what I have to do to add this in the TeXLive repo?
>
> Best regards
> Marcel Kr?ger

Hello,

usually there is always a fast response (and fix) from Karl, Norbert or 
any other TeX Live person :-)

Best regards
Martin


From preining at logic.at  Thu Jul  5 22:22:09 2018
From: preining at logic.at (Norbert Preining)
Date: Fri, 6 Jul 2018 05:22:09 +0900
Subject: [tex-live] Activation of Map file for package fontawesome5
In-Reply-To: <1646b37cef4.bafbfb3a2247.89758934367857254@2krueger.de>
References: <1646b37cef4.bafbfb3a2247.89758934367857254@2krueger.de>
Message-ID: <20180705202209.GA3620@burischnitzel.preining.info>

>     execute addMap fontawesome5.map

Already fixed in svn, will be in the next rebuild. (thanks Karl)

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From kakuto at fuk.kindai.ac.jp  Fri Jul  6 01:27:17 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Fri, 6 Jul 2018 08:27:17 +0900
Subject: [tex-live] tl2018: problems with including a (very specific)
	PNG file
Message-ID: <9A47778743B544229EF7A0D5E63CB3BD@CJ3001517A>

> I tried by using the convert in ImageMagick:
>
> convert -geometry 202x38 -verbose try-tl2018a.png small.png

A better example.

identify -verbose try-tl2018a.png
shows

  Resolution: 0.39x0.39
  Units: PixelsPerCentimeter

This is the reason of the large size (0.39 pixel / cm !!!)

The command

convert -units PixelsPerCentimeter -density 28 -verbose try-tl2018a.png small.png

creates a better result than my previous example.

  Resolution: 28x28
  Units: PixelsPerCentimeter

Best,
Akira


From josef.kleber at gmx.de  Sat Jul  7 14:38:02 2018
From: josef.kleber at gmx.de (Josef Kleber)
Date: Sat, 7 Jul 2018 14:38:02 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
Message-ID: <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>

Dear Akira,

sorry for the late response, but I was busy ...

Am 02.07.2018 um 16:29 schrieb Akira Kakuto:
> Dear Josef,
> 
>> Surprisingly, I just learned that it works if called from getmap.sty!
> 
> Thanks for the test.
> I don't know lua, and I don't understand what is changed,
> but I think that it is best and simplest at present to update getmapdl.lua
> as follows, as stated by Ulrike:
> 
> --- getmapdl.lua.orig??? Sun Oct 12 07:25:53 2014
> +++ getmapdl.lua??? Mon Jul 02 23:02:58 2018
> @@ -10,7 +10,7 @@
> -- 
> local http = require("socket.http");
> local ltn12 = require("ltn12")
> -local url = require("socket.url")
> +local url = socket.url or require("socket.url")
> 
> local OSMURL = "http://open.mapquestapi.com/staticmap/v4/getplacemap"
> local GMURL = "http://maps.googleapis.com/maps/api/staticmap"
> 

I can change getmapdl.lua. I already had a workaround by copying the 4
lines of socket.url's escape function into a local function in
getmapdl.lua, which seems to be saver at the moment. This problem seems
to indicate a serious problem in (TL's) luatex. Whatever you have
changed, it was a game changer. Please reconsider your decesion and
upload the new version. A luatex in TL unable to load a standard lib can
potentially cause more problems elsewhere.

Best,

Josef


From kakuto at fuk.kindai.ac.jp  Sun Jul  8 08:04:38 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Sun, 8 Jul 2018 15:04:38 +0900
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
 <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
Message-ID: <C86CB746B3414730889CEE9193E8096C@CJ3001517A>

Dear Josef,

> Please reconsider your decesion and upload the new version.
> A luatex in TL unable to load a standard lib can
> potentially cause more problems elsewhere.

Thanks. I have updated luatex.dll in TeX Live SVN, r48163.
Here it seems that getmap "package" is working.
Please discard all files in the previous getmaptest.zip.

Best,
Akira


From news3 at nililand.de  Tue Jul 10 15:39:43 2018
From: news3 at nililand.de (Ulrike Fischer)
Date: Tue, 10 Jul 2018 15:39:43 +0200
Subject: [tex-live] change in luatex? log is different
Message-ID: <z41pejfw099z.dlg@nililand.de>

I have problem with luatex and some l3build-tests on a travis setup.

When I compile on travis a document like this with lualatex

\documentclass{article}
\begin{document}
\showoutput
 abc abc 
\end{document}

I get in the log-file 

....\kern0.28

When I do the same locally (on windows, with TL18)

....\kern0.28 (font)


Last week the build worked, and while I did change a few things imho
none of this changes explains this change in the log-file.

The luatex on travis is in `bin/x86_64-linux` (at least that the
path the script checks). Has there been any change to this luatex
that would explain the behaviour? 


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From joseph.wright at morningstar2.co.uk  Tue Jul 10 15:48:02 2018
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Tue, 10 Jul 2018 14:48:02 +0100
Subject: [tex-live] change in luatex? log is different
In-Reply-To: <z41pejfw099z.dlg@nililand.de>
References: <z41pejfw099z.dlg@nililand.de>
Message-ID: <405e0a6c-9156-aea9-5262-061fa0686a7c@morningstar2.co.uk>

On 10/07/2018 14:39, Ulrike Fischer wrote:
> I have problem with luatex and some l3build-tests on a travis setup.
> 
> When I compile on travis a document like this with lualatex
> 
> \documentclass{article}
> \begin{document}
> \showoutput
>   abc abc
> \end{document}
> 
> I get in the log-file
> 
> ....\kern0.28
> 
> When I do the same locally (on windows, with TL18)
> 
> ....\kern0.28 (font)
> 
> 
> Last week the build worked, and while I did change a few things imho
> none of this changes explains this change in the log-file.
> 
> The luatex on travis is in `bin/x86_64-linux` (at least that the
> path the script checks). Has there been any change to this luatex
> that would explain the behaviour?

l3build normalises some of this 'extra data': you'll need to use a VM or 
similar if you want to compare the raw logs. Here, TL'18 LuaTeX is more 
'talkative' than earlier releases: it's tricky to fully normalise to the 
same format as from TL'17.

Joseph

From news3 at nililand.de  Tue Jul 10 16:43:35 2018
From: news3 at nililand.de (Ulrike Fischer)
Date: Tue, 10 Jul 2018 16:43:35 +0200
Subject: [tex-live] change in luatex? log is different
References: <z41pejfw099z.dlg@nililand.de>
 <405e0a6c-9156-aea9-5262-061fa0686a7c@morningstar2.co.uk>
Message-ID: <1xsagp18viu98.dlg@nililand.de>

Am Tue, 10 Jul 2018 14:48:02 +0100 schrieb Joseph Wright:


> l3build normalises some of this 'extra data': you'll need to use a VM or 
> similar if you want to compare the raw logs. Here, TL'18 LuaTeX is more 
> 'talkative' than earlier releases: 

Well the problem is not that it is more talkative but that its
"talkativness" differs across the systems ;-).

Side remark: the luatex from miktex (currently) does not add the
(font), so currently I'm just resaving the tests with miktex in the
hope that they then pass on the travis linux ;-)


>it's tricky to fully normalise to the same format as from TL'17.

There is no TL17 involved (I hope ...)

Beside this: how does this explain the change compared to last week?

Why does my luatex (on windows) add "(font)" in the log while other
binaries do not? 



-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From josef.kleber at gmx.de  Tue Jul 10 18:30:05 2018
From: josef.kleber at gmx.de (Josef Kleber)
Date: Tue, 10 Jul 2018 18:30:05 +0200
Subject: [tex-live] change in luatex? log is different
In-Reply-To: <1xsagp18viu98.dlg@nililand.de>
References: <z41pejfw099z.dlg@nililand.de>
 <405e0a6c-9156-aea9-5262-061fa0686a7c@morningstar2.co.uk>
 <1xsagp18viu98.dlg@nililand.de>
Message-ID: <b0ad8c0e-ad9f-531f-5fc5-837209d54aa4@gmx.de>

Hall?le Ulrike,

Am 10.07.2018 um 16:43 schrieb Ulrike Fischer:
> Am Tue, 10 Jul 2018 14:48:02 +0100 schrieb Joseph Wright:
> 
> 
>> l3build normalises some of this 'extra data': you'll need to use a VM or 
>> similar if you want to compare the raw logs. Here, TL'18 LuaTeX is more 
>> 'talkative' than earlier releases: 
> 
> Well the problem is not that it is more talkative but that its
> "talkativness" differs across the systems ;-).
> 
> Side remark: the luatex from miktex (currently) does not add the
> (font), so currently I'm just resaving the tests with miktex in the
> hope that they then pass on the travis linux ;-)
> 
> 
>> it's tricky to fully normalise to the same format as from TL'17.
> 
> There is no TL17 involved (I hope ...)
> 
> Beside this: how does this explain the change compared to last week?
> 
> Why does my luatex (on windows) add "(font)" in the log while other
> binaries do not? 

Akira did update luatex.dll on my request. Don't know if this is related.

Josef

From josef.kleber at gmx.de  Tue Jul 10 18:30:16 2018
From: josef.kleber at gmx.de (Josef Kleber)
Date: Tue, 10 Jul 2018 18:30:16 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <C86CB746B3414730889CEE9193E8096C@CJ3001517A>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
 <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
 <C86CB746B3414730889CEE9193E8096C@CJ3001517A>
Message-ID: <f5cfc32a-c817-8d8e-7361-b5a0a33b45ed@gmx.de>

Dear Akira,

sorry to bother you again, but it's becoming weird! :-(

Am 08.07.2018 um 08:04 schrieb Akira Kakuto:
> Dear Josef,
> 
>> Please reconsider your decesion and upload the new version.
>> A luatex in TL unable to load a standard lib can
>> potentially cause more problems elsewhere.
> 
> Thanks. I have updated luatex.dll in TeX Live SVN, r48163.
> Here it seems that getmap "package" is working.
> Please discard all files in the previous getmaptest.zip.

The following test file worked with the version you sent me last week.
After updating luatex the first - and only the first - map does not
work. No error but again a malformed URL, but only for '?' instead of
'ss'. See commented line:

\documentclass{article}
\usepackage{graphicx}
\usepackage[overwrite=true]{getmap}
\begin{document}
%\getmap[mode=gm]{Bergheimer Stra?e 110A, 69115 Heidelberg, Germany}
\getmap[mode=gm]{Bergheimer Strasse 110a, 69115 Heidelberg, Germany}
\includegraphics[width=10cm]{getmap}

\getmap[file=berlin, mode=gm]{Brandenburger Tor, Berlin}
\includegraphics[width=10cm]{berlin}

%\getmap[file=muc, mode=gm]{Stachus, Muenchen}
\getmap[file=muc, mode=gm]{Stachus, M?nchen}
\includegraphics[width=10cm]{muc}
\end{document}

Something I absolutly don't understand.

Best,

Josef

From news3 at nililand.de  Tue Jul 10 19:11:36 2018
From: news3 at nililand.de (Ulrike Fischer)
Date: Tue, 10 Jul 2018 19:11:36 +0200
Subject: [tex-live] change in luatex? log is different
References: <z41pejfw099z.dlg@nililand.de>
 <405e0a6c-9156-aea9-5262-061fa0686a7c@morningstar2.co.uk>
 <1xsagp18viu98.dlg@nililand.de> <b0ad8c0e-ad9f-531f-5fc5-837209d54aa4@gmx.de>
Message-ID: <1ta9wy65oiboi$.dlg@nililand.de>

Am Tue, 10 Jul 2018 18:30:05 +0200 schrieb Josef Kleber:

> Akira did update luatex.dll on my request. Don't know if this is related.

I thought about it, but don't see how. The update was on windows and
there I had no problems with the checks. Its the binaries on linux
which seems to have changed, but there was not update ;-(. It is
quite bewildering. 



-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From kakuto at fuk.kindai.ac.jp  Wed Jul 11 00:38:56 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Wed, 11 Jul 2018 07:38:56 +0900
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <f5cfc32a-c817-8d8e-7361-b5a0a33b45ed@gmx.de>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
 <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
 <C86CB746B3414730889CEE9193E8096C@CJ3001517A>
 <f5cfc32a-c817-8d8e-7361-b5a0a33b45ed@gmx.de>
Message-ID: <694CB4D0088545F3BDF77D4FBF7743D4@CJ3001517A>

Dear Josef,

> sorry to bother you again, but it's becoming weird! :-(
> ...

With the following source,

%
% encoding is UTF-8
%
\documentclass{article}
\usepackage{graphicx}
\usepackage[overwrite=true]{getmap}
\begin{document}
\getmap[mode=gm]{Bergheimer Stra?e 110A, 69115 Heidelberg, Germany}
%\getmap[mode=gm]{Bergheimer Strasse 110a, 69115 Heidelberg, Germany}
\includegraphics[width=10cm]{getmap}

\getmap[file=berlin, mode=gm]{Brandenburger Tor, Berlin}
\includegraphics[width=10cm]{berlin}

%\getmap[file=muc, mode=gm]{Stachus, Muenchen}
\getmap[file=muc, mode=gm]{Stachus, M?nchen}
\includegraphics[width=10cm]{muc}
\end{document}

I obtain the URL for the first map:
url =
http://maps.googleapis.com/maps/api/staticmap?center=Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 307 bytes

which I think is right.

Best,
Akira


From kakuto at fuk.kindai.ac.jp  Wed Jul 11 01:19:46 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Wed, 11 Jul 2018 08:19:46 +0900
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
Message-ID: <07C3F1474C954195BAED8F3B6D0285E3@CJ3001517A>

Dear Josef,

I also tested the following with success:

%
% CP 1252
%
\documentclass{article}
\usepackage[latin1]{inputenc}
\usepackage{graphicx}
\usepackage[overwrite=true]{getmap}
\begin{document}
\getmap[mode=gm]{Bergheimer Stra?e 110A, 69115 Heidelberg, Germany}
%\getmap[mode=gm]{Bergheimer Strasse 110a, 69115 Heidelberg, Germany}
\includegraphics[width=10cm]{getmap}

\getmap[file=berlin, mode=gm]{Brandenburger Tor, Berlin}
\includegraphics[width=10cm]{berlin}

%\getmap[file=muc, mode=gm]{Stachus, Muenchen}
\getmap[file=muc, mode=gm]{Stachus, M?nchen}
\includegraphics[width=10cm]{muc}
\end{document}

url =
http://maps.googleapis.com/maps/api/staticmap?center=Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 307 bytes

Best,
Akira


From josef.kleber at gmx.de  Wed Jul 11 10:36:12 2018
From: josef.kleber at gmx.de (Josef Kleber)
Date: Wed, 11 Jul 2018 10:36:12 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <694CB4D0088545F3BDF77D4FBF7743D4@CJ3001517A>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
 <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
 <C86CB746B3414730889CEE9193E8096C@CJ3001517A>
 <f5cfc32a-c817-8d8e-7361-b5a0a33b45ed@gmx.de>
 <694CB4D0088545F3BDF77D4FBF7743D4@CJ3001517A>
Message-ID: <1590e1b8-51b4-3012-bc67-7206d56f3567@gmx.de>

Dear Akira, weirdness lives on! ;-)

Am 11.07.2018 um 00:38 schrieb Akira Kakuto:
> Dear Josef,
> 
> With the following source,
> 
> %
> % encoding is UTF-8
> %
> \documentclass{article}
> \usepackage{graphicx}
> \usepackage[overwrite=true]{getmap}
> \begin{document}
> \getmap[mode=gm]{Bergheimer Stra?e 110A, 69115 Heidelberg, Germany}
> %\getmap[mode=gm]{Bergheimer Strasse 110a, 69115 Heidelberg, Germany}
> \includegraphics[width=10cm]{getmap}
> 
> \getmap[file=berlin, mode=gm]{Brandenburger Tor, Berlin}
> \includegraphics[width=10cm]{berlin}
> 
> %\getmap[file=muc, mode=gm]{Stachus, Muenchen}
> \getmap[file=muc, mode=gm]{Stachus, M?nchen}
> \includegraphics[width=10cm]{muc}
> \end{document}
> 
> I obtain the URL for the first map:
> url =
> http://maps.googleapis.com/maps/api/staticmap?center=Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&maptype=roadmap&scale=1&format=png&language=en&sensor=false
> 
> url length = 307 bytes
> 
> which I think is right.

Yes! ;-) You compiled with pdflatex, right? I discovered that it works
for me with pdflatex but *not* with lualatex???

If you compare the following 2 URLs (1: pdflatex, 2:lualatex)

http://maps.googleapis.com/maps/api/staticmap?center=Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&maptype=roadmap&scale=1&format=png&language=en&sensor=false

http://maps.googleapis.com/maps/api/staticmap?center=Bergheimer%20Stra%c3%3fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Bergheimer%20Stra%c3%3fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&maptype=roadmap&scale=1&format=png&language=en&sensor=false

pdflatex encodes '?' to %c3%9f, which is the correct utf-8 encoding for
?, but lualatex encodes it to %c3%3f. Strangely, luatex works for the
other adresses with umlauts.

Any idea why luatex behaves different??

Josef

From kakuto at fuk.kindai.ac.jp  Wed Jul 11 12:04:02 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Wed, 11 Jul 2018 19:04:02 +0900
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <1590e1b8-51b4-3012-bc67-7206d56f3567@gmx.de>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
 <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
 <C86CB746B3414730889CEE9193E8096C@CJ3001517A>
 <f5cfc32a-c817-8d8e-7361-b5a0a33b45ed@gmx.de>
 <694CB4D0088545F3BDF77D4FBF7743D4@CJ3001517A>
 <1590e1b8-51b4-3012-bc67-7206d56f3567@gmx.de>
Message-ID: <C4136FA9CA8D487A940353A20C66781E@CJ3001517A>

Dear Josef,

> Dear Akira, weirdness lives on! ;-)

My experimental consequence:

(1) In the case of pdflatex:

If the encoding is UTF-8, command like
\usepackage[utf8]{inputenc}
is not necessary.
In the other cases, command like
\usepackage[cp1252]{inputenc}
is necessary. Otherwise, URLs are broken and
correct maps are not obtained for non-ascii names.

(2) In the case of xelatex and lualatex, use 'UTF-8' encoding only!!.

lualatex result for UTF-8 encoding case:

url =
http://maps.googleapis.com/maps/api/staticmap?center=Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 307 bytes

Best,
Akira


From maximilian.noethe at tu-dortmund.de  Wed Jul 11 12:51:43 2018
From: maximilian.noethe at tu-dortmund.de (=?UTF-8?Q?Maximilian_N=c3=b6the?=)
Date: Wed, 11 Jul 2018 12:51:43 +0200
Subject: [tex-live] LuaTeX cache messes with latexmk dependency checking
In-Reply-To: <07C3F1474C954195BAED8F3B6D0285E3@CJ3001517A>
References: <07C3F1474C954195BAED8F3B6D0285E3@CJ3001517A>
Message-ID: <69cea8df-5a19-ac50-f2fd-bba875a634e5@tu-dortmund.de>

Hi all,

In an up-to-date TL 2018, latexmk keeps on running documents, because
the files

* texlive/2018/texmf-var/luatex-cache/generic/fonts/otl/lmmono12-regular.luc
*
texlive/2018/texmf-var/luatex-cache/generic/fonts/otl/lmroman17-regular.luc

keep changing.

As those are cache files, I suppose it's wanted that they change but
they should probably be ignored
in latexmks checking of dependencies.

As latexmk does not seem to have a public issue tracker or even a
homepage, I'm a bit lost where to report.

Regards
Max N?the

From maximilian.noethe at tu-dortmund.de  Wed Jul 11 12:59:27 2018
From: maximilian.noethe at tu-dortmund.de (=?UTF-8?Q?Maximilian_N=c3=b6the?=)
Date: Wed, 11 Jul 2018 12:59:27 +0200
Subject: [tex-live] LuaTeX cache messes with latexmk dependency checking
Message-ID: <ba1f7c0d-b302-d965-63ae-2eb9376fcdb1@tu-dortmund.de>

Hi all,

In an up-to-date TL 2018, latexmk keeps on running documents, because
the files

* texlive/2018/texmf-var/luatex-cache/generic/fonts/otl/lmmono12-regular.luc
*
texlive/2018/texmf-var/luatex-cache/generic/fonts/otl/lmroman17-regular.luc

keep changing.

As those are cache files, I suppose it's wanted that they change but
they should probably be ignored
in latexmks checking of dependencies.

As latexmk does not seem to have a public issue tracker or even a
homepage, I'm a bit lost where to report.

Regards
Max N?the


From artourter at gmail.com  Wed Jul 11 14:23:55 2018
From: artourter at gmail.com (Greg' Ar Tourter)
Date: Wed, 11 Jul 2018 13:23:55 +0100
Subject: [tex-live] user manual pdf in new arara package corrupted
Message-ID: <CAK09-vnU=eL00w03GMeSc4XjTqoAOxb91-UxY0eqq52rrYeouA@mail.gmail.com>

Hi,

The pdf manual for the new arara package seems to be corrupted. Adobe
Reader 9 on linux brings an error when scrolling past page 2. Some other
viewers I have tried such as Okular from Plasma5 openit fine.

I have been able to fix it by processing it with pdftk (pdftk original.pdf
output fixed.pdf), the result of which displays all fine in Adobe Reader.

I am not sure whether there is something in the current source which
compiled by pdflatex renders the output corrupted as far as adobe reader is
concerned or if there is a problem with the copy on the repo. I have tried
to recompile the document on my machine but some files are missing in the
package in texlive to do so (the source expects a logos folder outside of
the arara documentation folder. I will get the source from git and try from
that later and report back.

Cheers

Greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20180711/4bbc2eaf/attachment.html>

From jcc8 at psu.edu  Wed Jul 11 19:50:34 2018
From: jcc8 at psu.edu (John Collins)
Date: Wed, 11 Jul 2018 13:50:34 -0400
Subject: [tex-live] LuaTeX cache messes with latexmk dependency checking
In-Reply-To: <ba1f7c0d-b302-d965-63ae-2eb9376fcdb1@tu-dortmund.de>
References: <ba1f7c0d-b302-d965-63ae-2eb9376fcdb1@tu-dortmund.de>
Message-ID: <38ec414f-786d-9daf-e4d2-bfd7d5012c6c@psu.edu>

On 7/11/18 6:59 AM, Maximilian N?the wrote:
> Hi all,
> 
> In an up-to-date TL 2018, latexmk keeps on running documents, because
> the files
> 
> * texlive/2018/texmf-var/luatex-cache/generic/fonts/otl/lmmono12-regular.luc
> *
> texlive/2018/texmf-var/luatex-cache/generic/fonts/otl/lmroman17-regular.luc
> 
> keep changing.
> 
> As those are cache files, I suppose it's wanted that they change but
> they should probably be ignored
> in latexmks checking of dependencies.
> 
> As latexmk does not seem to have a public issue tracker or even a
> homepage, I'm a bit lost where to report.

Latexmk's author (me) has an e-mail that is listed in the documentation 
and that is also given by running "latexmk --help".  That's the place to 
report problems.

With my test files, I don't find a problem.  Could you send me a MWE 
that triggers the problem.

John

From cereda.paulo at gmail.com  Wed Jul 11 19:58:05 2018
From: cereda.paulo at gmail.com (Paulo Roberto Massa Cereda)
Date: Wed, 11 Jul 2018 14:58:05 -0300
Subject: [tex-live] user manual pdf in new arara package corrupted
In-Reply-To: <CAK09-vnU=eL00w03GMeSc4XjTqoAOxb91-UxY0eqq52rrYeouA@mail.gmail.com>
References: <CAK09-vnU=eL00w03GMeSc4XjTqoAOxb91-UxY0eqq52rrYeouA@mail.gmail.com>
Message-ID: <c2ad4d23-3b38-675f-b7ae-4c2506b09f74@gmail.com>

Hello, Greg,

Thanks for the report. After installing Reader 9.5.5 on my Fedora 
machine, I was able to reproduce the issue. Some pages are not properly 
rendered. The majority looks fine.

I tried with the latest version of Reader on Windows and the document 
was correctly rendered. I really have no idea of what happened.

As you mentioned, other viewers do not complain, including the one I 
use, Evince. So I am puzzled with this particular issue. I might need a 
PDF expert to guide me through the issue.

Deeply sorry for the trouble. I am looking forward to your report. You 
can contact me off-list, if the discussion branches too much. Thank you!

All the best!

Paulo

Em 11-07-2018 09:23, Greg' Ar Tourter escreveu:
> Hi,
> 
> The pdf manual for the new arara package seems to be corrupted. Adobe 
> Reader 9 on linux brings an error when scrolling past page 2. Some other 
> viewers I have tried such as Okular from Plasma5 openit fine.
> 
> I have been able to fix it by processing it with pdftk (pdftk 
> original.pdf output fixed.pdf), the result of which displays all fine in 
> Adobe Reader.
> 
> I am not sure whether there is something in the current source which 
> compiled by pdflatex renders the output corrupted as far as adobe reader 
> is concerned or if there is a problem with the copy on the repo. I have 
> tried to recompile the document on my machine but some files are missing 
> in the package in texlive to do so (the source expects a logos folder 
> outside of the arara documentation folder. I will get the source from 
> git and try from that later and report back.
> 
> Cheers
> 
> Greg

From daleif at math.au.dk  Thu Jul 12 08:52:55 2018
From: daleif at math.au.dk (Lars Madsen)
Date: Thu, 12 Jul 2018 06:52:55 +0000
Subject: [tex-live] LuaTeX cache messes with latexmk dependency checking
In-Reply-To: <69cea8df-5a19-ac50-f2fd-bba875a634e5@tu-dortmund.de>
References: <07C3F1474C954195BAED8F3B6D0285E3@CJ3001517A>,
 <69cea8df-5a19-ac50-f2fd-bba875a634e5@tu-dortmund.de>
Message-ID: <1531378375273.82608@math.au.dk>

erh, did you run 

latexmk -help?

Johns contact information is in the last line of the help message.

He usually responds quite quickly.


/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at math / More information: http://au.dk/en/daleif at math


________________________________________
From: tex-live <tex-live-bounces at tug.org> on behalf of Maximilian N?the <maximilian.noethe at tu-dortmund.de>
Sent: 11 July 2018 12:51
To: tex-live at tug.org
Subject: [tex-live] LuaTeX cache messes with latexmk dependency checking

Hi all,

In an up-to-date TL 2018, latexmk keeps on running documents, because
the files

* texlive/2018/texmf-var/luatex-cache/generic/fonts/otl/lmmono12-regular.luc
*
texlive/2018/texmf-var/luatex-cache/generic/fonts/otl/lmroman17-regular.luc

keep changing.

As those are cache files, I suppose it's wanted that they change but
they should probably be ignored
in latexmks checking of dependencies.

As latexmk does not seem to have a public issue tracker or even a
homepage, I'm a bit lost where to report.

Regards
Max N?the


From daleif at math.au.dk  Thu Jul 12 09:06:16 2018
From: daleif at math.au.dk (Lars Madsen)
Date: Thu, 12 Jul 2018 07:06:16 +0000
Subject: [tex-live] LuaTeX cache messes with latexmk dependency checking
In-Reply-To: <1531378375273.82608@math.au.dk>
References: <07C3F1474C954195BAED8F3B6D0285E3@CJ3001517A>,
 <69cea8df-5a19-ac50-f2fd-bba875a634e5@tu-dortmund.de>,
 <1531378375273.82608@math.au.dk>
Message-ID: <1531379176246.11434@math.au.dk>

sorry about that, threads aren't working well in my webmail, didn't see Johns answer before I answered


/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at math / More information: http://au.dk/en/daleif at math


________________________________________
From: tex-live <tex-live-bounces at tug.org> on behalf of Lars Madsen <daleif at math.au.dk>
Sent: 12 July 2018 08:52
To: Maximilian N?the; tex-live at tug.org
Subject: Re: [tex-live] LuaTeX cache messes with latexmk dependency checking

erh, did you run

latexmk -help?

Johns contact information is in the last line of the help message.

He usually responds quite quickly.


/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at math / More information: http://au.dk/en/daleif at math


________________________________________
From: tex-live <tex-live-bounces at tug.org> on behalf of Maximilian N?the <maximilian.noethe at tu-dortmund.de>
Sent: 11 July 2018 12:51
To: tex-live at tug.org
Subject: [tex-live] LuaTeX cache messes with latexmk dependency checking

Hi all,

In an up-to-date TL 2018, latexmk keeps on running documents, because
the files

* texlive/2018/texmf-var/luatex-cache/generic/fonts/otl/lmmono12-regular.luc
*
texlive/2018/texmf-var/luatex-cache/generic/fonts/otl/lmroman17-regular.luc

keep changing.

As those are cache files, I suppose it's wanted that they change but
they should probably be ignored
in latexmks checking of dependencies.

As latexmk does not seem to have a public issue tracker or even a
homepage, I'm a bit lost where to report.

Regards
Max N?the



From cereda.paulo at gmail.com  Thu Jul 12 14:13:28 2018
From: cereda.paulo at gmail.com (Paulo Roberto Massa Cereda)
Date: Thu, 12 Jul 2018 09:13:28 -0300
Subject: [tex-live] user manual pdf in new arara package corrupted
In-Reply-To: <c2ad4d23-3b38-675f-b7ae-4c2506b09f74@gmail.com>
References: <CAK09-vnU=eL00w03GMeSc4XjTqoAOxb91-UxY0eqq52rrYeouA@mail.gmail.com>
 <c2ad4d23-3b38-675f-b7ae-4c2506b09f74@gmail.com>
Message-ID: <86992996-d06c-b956-4ef1-b7188a1d1576@gmail.com>

Friends,

Greg and I found a fix, and the new updated documentation is now sent to 
CTAN. Fingers crossed!

Cheerio,

Paulo

From news3 at nililand.de  Thu Jul 12 14:16:57 2018
From: news3 at nililand.de (Ulrike Fischer)
Date: Thu, 12 Jul 2018 14:16:57 +0200
Subject: [tex-live] LuaTeX cache messes with latexmk dependency checking
References: <ba1f7c0d-b302-d965-63ae-2eb9376fcdb1@tu-dortmund.de>
 <38ec414f-786d-9daf-e4d2-bfd7d5012c6c@psu.edu>
Message-ID: <18drrxjclgvm4$.dlg@nililand.de>

Am Wed, 11 Jul 2018 13:50:34 -0400 schrieb John Collins:

>> the files
>> 
>> * texlive/2018/texmf-var/luatex-cache/generic/fonts/otl/lmmono12-regular.luc
>> * texlive/2018/texmf-var/luatex-cache/generic/fonts/otl/lmroman17-regular.luc
>> keep changing.

They shouldn't. So independant from latexmk you should try to find
out why this happens. It can make compilation quite slow if this
cache files are recreated constantly. 



-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From maximilian.noethe at tu-dortmund.de  Thu Jul 12 14:28:17 2018
From: maximilian.noethe at tu-dortmund.de (=?UTF-8?Q?Maximilian_N=c3=b6the?=)
Date: Thu, 12 Jul 2018 14:28:17 +0200
Subject: [tex-live] LuaTeX cache messes with latexmk dependency checking
In-Reply-To: <18drrxjclgvm4$.dlg@nililand.de>
References: <ba1f7c0d-b302-d965-63ae-2eb9376fcdb1@tu-dortmund.de>
 <38ec414f-786d-9daf-e4d2-bfd7d5012c6c@psu.edu>
 <18drrxjclgvm4$.dlg@nililand.de>
Message-ID: <2b6daef1-3ee3-03c0-c568-9de31c64f68a@tu-dortmund.de>

Hi,

So you say it's not a problem with latexmk but the fact that these files
are updated is itself the problem?

I don't know when and how those files are updated or cached.
Where do I start looking?


Cheers
Max


On 12.07.2018 14:16, Ulrike Fischer wrote:
> Am Wed, 11 Jul 2018 13:50:34 -0400 schrieb John Collins:
>
>>> the files
>>>
>>> * texlive/2018/texmf-var/luatex-cache/generic/fonts/otl/lmmono12-regular.luc
>>> * texlive/2018/texmf-var/luatex-cache/generic/fonts/otl/lmroman17-regular.luc
>>> keep changing.
> They shouldn't. So independant from latexmk you should try to find
> out why this happens. It can make compilation quite slow if this
> cache files are recreated constantly. 
>
>
>




From maximilian.noethe at tu-dortmund.de  Thu Jul 12 14:35:14 2018
From: maximilian.noethe at tu-dortmund.de (=?UTF-8?Q?Maximilian_N=c3=b6the?=)
Date: Thu, 12 Jul 2018 14:35:14 +0200
Subject: [tex-live] LuaTeX cache messes with latexmk dependency checking
In-Reply-To: <2b6daef1-3ee3-03c0-c568-9de31c64f68a@tu-dortmund.de>
References: <ba1f7c0d-b302-d965-63ae-2eb9376fcdb1@tu-dortmund.de>
 <38ec414f-786d-9daf-e4d2-bfd7d5012c6c@psu.edu>
 <18drrxjclgvm4$.dlg@nililand.de>
 <2b6daef1-3ee3-03c0-c568-9de31c64f68a@tu-dortmund.de>
Message-ID: <c1037bb9-b0e6-94e5-833c-583654199a65@tu-dortmund.de>

It seems that these files are written at each run of luatex at least 2
times.


On 12.07.2018 14:28, Maximilian N?the wrote:
> Hi,
>
> So you say it's not a problem with latexmk but the fact that these files
> are updated is itself the problem?
>
> I don't know when and how those files are updated or cached.
> Where do I start looking?
>
>
> Cheers
> Max
>
>
> On 12.07.2018 14:16, Ulrike Fischer wrote:
>> Am Wed, 11 Jul 2018 13:50:34 -0400 schrieb John Collins:
>>
>>>> the files
>>>>
>>>> * texlive/2018/texmf-var/luatex-cache/generic/fonts/otl/lmmono12-regular.luc
>>>> * texlive/2018/texmf-var/luatex-cache/generic/fonts/otl/lmroman17-regular.luc
>>>> keep changing.
>> They shouldn't. So independant from latexmk you should try to find
>> out why this happens. It can make compilation quite slow if this
>> cache files are recreated constantly. 
>>
>>
>>
>
>


From news3 at nililand.de  Thu Jul 12 15:04:03 2018
From: news3 at nililand.de (Ulrike Fischer)
Date: Thu, 12 Jul 2018 15:04:03 +0200
Subject: [tex-live] LuaTeX cache messes with latexmk dependency checking
References: <ba1f7c0d-b302-d965-63ae-2eb9376fcdb1@tu-dortmund.de>
 <38ec414f-786d-9daf-e4d2-bfd7d5012c6c@psu.edu>
 <18drrxjclgvm4$.dlg@nililand.de>
 <2b6daef1-3ee3-03c0-c568-9de31c64f68a@tu-dortmund.de>
 <c1037bb9-b0e6-94e5-833c-583654199a65@tu-dortmund.de>
Message-ID: <n3ww2j42ogza.dlg@nililand.de>

Am Thu, 12 Jul 2018 14:35:14 +0200 schrieb Maximilian N?the:

> It seems that these files are written at each run of luatex at least 2
> times.

Make a minimal example and show it along with the log-file.

-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From maximilian.noethe at tu-dortmund.de  Thu Jul 12 15:19:26 2018
From: maximilian.noethe at tu-dortmund.de (=?UTF-8?Q?Maximilian_N=c3=b6the?=)
Date: Thu, 12 Jul 2018 15:19:26 +0200
Subject: [tex-live] LuaTeX cache messes with latexmk dependency checking
In-Reply-To: <n3ww2j42ogza.dlg@nililand.de>
References: <ba1f7c0d-b302-d965-63ae-2eb9376fcdb1@tu-dortmund.de>
 <38ec414f-786d-9daf-e4d2-bfd7d5012c6c@psu.edu>
 <18drrxjclgvm4$.dlg@nililand.de>
 <2b6daef1-3ee3-03c0-c568-9de31c64f68a@tu-dortmund.de>
 <c1037bb9-b0e6-94e5-833c-583654199a65@tu-dortmund.de>
 <n3ww2j42ogza.dlg@nililand.de>
Message-ID: <574d7ecd-a0f3-9490-fb3a-4331ce94a4e1@tu-dortmund.de>

It seems there was something messed up with my TL installations, I had
both 2017
and 2018 installed. The 2018 started out as a pretest and I upgraded it
in the meantime.

Somehow, 2018 seemed to use stuff from the 2017 installation. When I
deleted the 2017
installation, I got errors like this when running 2018 lualatex:


! Font \TU/lmr/m/n/10=[lmroman10-regular]:+tlig; at 10pt not loadable:
metric data not found or bad.

So I deleted it all and reinstalled 2018 and now everything works fine.


On 12.07.2018 15:04, Ulrike Fischer wrote:
> Am Thu, 12 Jul 2018 14:35:14 +0200 schrieb Maximilian N?the:
>
>> It seems that these files are written at each run of luatex at least 2
>> times.
> Make a minimal example and show it along with the log-file.
>


From zdenek.wagner at gmail.com  Thu Jul 12 15:22:52 2018
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 12 Jul 2018 15:22:52 +0200
Subject: [tex-live] LuaTeX cache messes with latexmk dependency checking
In-Reply-To: <574d7ecd-a0f3-9490-fb3a-4331ce94a4e1@tu-dortmund.de>
References: <ba1f7c0d-b302-d965-63ae-2eb9376fcdb1@tu-dortmund.de>
 <38ec414f-786d-9daf-e4d2-bfd7d5012c6c@psu.edu>
 <18drrxjclgvm4$.dlg@nililand.de>
 <2b6daef1-3ee3-03c0-c568-9de31c64f68a@tu-dortmund.de>
 <c1037bb9-b0e6-94e5-833c-583654199a65@tu-dortmund.de>
 <n3ww2j42ogza.dlg@nililand.de>
 <574d7ecd-a0f3-9490-fb3a-4331ce94a4e1@tu-dortmund.de>
Message-ID: <CAC1phyZA1HXRpOavEPmFkt7eAa1Y-YFpHo0f+dYcQMmXmhFNdQ@mail.gmail.com>

This is usually caused by wrong PATH setting. I can imagine that such
things happen if you have both TL 2018 and 2017 in PATH.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2018-07-12 15:19 GMT+02:00 Maximilian N?the <
maximilian.noethe at tu-dortmund.de>:

> It seems there was something messed up with my TL installations, I had
> both 2017
> and 2018 installed. The 2018 started out as a pretest and I upgraded it
> in the meantime.
>
> Somehow, 2018 seemed to use stuff from the 2017 installation. When I
> deleted the 2017
> installation, I got errors like this when running 2018 lualatex:
>
>
> ! Font \TU/lmr/m/n/10=[lmroman10-regular]:+tlig; at 10pt not loadable:
> metric data not found or bad.
>
> So I deleted it all and reinstalled 2018 and now everything works fine.
>
>
> On 12.07.2018 15:04, Ulrike Fischer wrote:
> > Am Thu, 12 Jul 2018 14:35:14 +0200 schrieb Maximilian N?the:
> >
> >> It seems that these files are written at each run of luatex at least 2
> >> times.
> > Make a minimal example and show it along with the log-file.
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20180712/757ab1fc/attachment.html>

From maximilian.noethe at tu-dortmund.de  Thu Jul 12 15:24:36 2018
From: maximilian.noethe at tu-dortmund.de (=?UTF-8?Q?Maximilian_N=c3=b6the?=)
Date: Thu, 12 Jul 2018 15:24:36 +0200
Subject: [tex-live] LuaTeX cache messes with latexmk dependency checking
In-Reply-To: <CAC1phyZA1HXRpOavEPmFkt7eAa1Y-YFpHo0f+dYcQMmXmhFNdQ@mail.gmail.com>
References: <ba1f7c0d-b302-d965-63ae-2eb9376fcdb1@tu-dortmund.de>
 <38ec414f-786d-9daf-e4d2-bfd7d5012c6c@psu.edu>
 <18drrxjclgvm4$.dlg@nililand.de>
 <2b6daef1-3ee3-03c0-c568-9de31c64f68a@tu-dortmund.de>
 <c1037bb9-b0e6-94e5-833c-583654199a65@tu-dortmund.de>
 <n3ww2j42ogza.dlg@nililand.de>
 <574d7ecd-a0f3-9490-fb3a-4331ce94a4e1@tu-dortmund.de>
 <CAC1phyZA1HXRpOavEPmFkt7eAa1Y-YFpHo0f+dYcQMmXmhFNdQ@mail.gmail.com>
Message-ID: <18c67d9f-9dc3-f553-c321-c19bbf347db7@tu-dortmund.de>

I only had TL 2018 in the PATH


On 12.07.2018 15:22, Zdenek Wagner wrote:
> This is usually caused by wrong PATH setting. I can imagine that such
> things happen if you have both TL 2018 and 2017 in PATH.
>
> Zden?k Wagner
> http://ttsm.icpf.cas.cz/team/wagner.shtml
> http://icebearsoft.euweb.cz
>
> 2018-07-12 15:19 GMT+02:00 Maximilian N?the
> <maximilian.noethe at tu-dortmund.de
> <mailto:maximilian.noethe at tu-dortmund.de>>:
>
>     It seems there was something messed up with my TL installations, I had
>     both 2017
>     and 2018 installed. The 2018 started out as a pretest and I
>     upgraded it
>     in the meantime.
>
>     Somehow, 2018 seemed to use stuff from the 2017 installation. When I
>     deleted the 2017
>     installation, I got errors like this when running 2018 lualatex:
>
>
>     ! Font \TU/lmr/m/n/10=[lmroman10-regular]:+tlig; at 10pt not loadable:
>     metric data not found or bad.
>
>     So I deleted it all and reinstalled 2018 and now everything works
>     fine.
>
>
>     On 12.07.2018 15:04, Ulrike Fischer wrote:
>     > Am Thu, 12 Jul 2018 14:35:14 +0200 schrieb Maximilian N?the:
>     >
>     >> It seems that these files are written at each run of luatex at
>     least 2
>     >> times.
>     > Make a minimal example and show it along with the log-file.
>     >
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20180712/37242f34/attachment-0001.html>

From josef.kleber at gmx.de  Fri Jul 13 12:33:19 2018
From: josef.kleber at gmx.de (Josef Kleber)
Date: Fri, 13 Jul 2018 12:33:19 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <C4136FA9CA8D487A940353A20C66781E@CJ3001517A>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
 <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
 <C86CB746B3414730889CEE9193E8096C@CJ3001517A>
 <f5cfc32a-c817-8d8e-7361-b5a0a33b45ed@gmx.de>
 <694CB4D0088545F3BDF77D4FBF7743D4@CJ3001517A>
 <1590e1b8-51b4-3012-bc67-7206d56f3567@gmx.de>
 <C4136FA9CA8D487A940353A20C66781E@CJ3001517A>
Message-ID: <2142be90-34e9-5cc9-5a81-f913b9d5a6ed@gmx.de>

Dear Akira

Am 11.07.2018 um 12:04 schrieb Akira Kakuto:
> Dear Josef,
> 
>> Dear Akira, weirdness lives on! ;-)
> 
> My experimental consequence:
> 
> (1) In the case of pdflatex:
> 
> If the encoding is UTF-8, command like
> \usepackage[utf8]{inputenc}
> is not necessary.
> In the other cases, command like
> \usepackage[cp1252]{inputenc}
> is necessary. Otherwise, URLs are broken and
> correct maps are not obtained for non-ascii names.

Agreed

> (2) In the case of xelatex and lualatex, use 'UTF-8' encoding only!!.

That's where my problem starts. If I use exactly the example in your
last email and save it in utf8 and it is utf8

$ file bug_getmap_2.tex
bug_getmap_2.tex: LaTeX 2e document, UTF-8 Unicode text, with CRLF line
terminators

$ hexdump -C bug_getmap_2.tex
00000000  5c 64 6f 63 75 6d 65 6e  74 63 6c 61 73 73 7b 61
|\documentclass{a|
00000010  72 74 69 63 6c 65 7d 0d  0a 5c 75 73 65 70 61 63
|rticle}..\usepac|
00000020  6b 61 67 65 7b 67 72 61  70 68 69 63 78 7d 0d 0a
|kage{graphicx}..|
00000030  5c 75 73 65 70 61 63 6b  61 67 65 5b 6f 76 65 72
|\usepackage[over|
00000040  77 72 69 74 65 3d 74 72  75 65 5d 7b 67 65 74 6d
|write=true]{getm|
00000050  61 70 7d 0d 0a 5c 62 65  67 69 6e 7b 64 6f 63 75
|ap}..\begin{docu|
00000060  6d 65 6e 74 7d 0d 0a 5c  67 65 74 6d 61 70 5b 6d
|ment}..\getmap[m|
00000070  6f 64 65 3d 67 6d 5d 7b  42 65 72 67 68 65 69 6d
|ode=gm]{Bergheim|
00000080  65 72 20 53 74 72 61 *c3  9f* 65 20 31 31 30 41 2c  |er
Stra..e 110A,|  *<--------*
00000090  20 36 39 31 31 35 20 48  65 69 64 65 6c 62 65 72  | 69115
Heidelber|
000000a0  67 2c 20 47 65 72 6d 61  6e 79 7d 0d 0a 25 5c 67  |g,
Germany}..%\g|
000000b0  65 74 6d 61 70 5b 6d 6f  64 65 3d 67 6d 5d 7b 42
|etmap[mode=gm]{B|
000000c0  65 72 67 68 65 69 6d 65  72 20 53 74 72 61 73 73  |ergheimer
Strass|
000000d0  65 20 31 31 30 61 2c 20  36 39 31 31 35 20 48 65  |e 110a,
69115 He|
000000e0  69 64 65 6c 62 65 72 67  2c 20 47 65 72 6d 61 6e  |idelberg,
German|
000000f0  79 7d 0d 0a 5c 69 6e 63  6c 75 64 65 67 72 61 70
|y}..\includegrap|
00000100  68 69 63 73 5b 77 69 64  74 68 3d 31 30 63 6d 5d
|hics[width=10cm]|
00000110  7b 67 65 74 6d 61 70 7d  0d 0a 0d 0a 5c 67 65 74
|{getmap}....\get|
00000120  6d 61 70 5b 66 69 6c 65  3d 62 65 72 6c 69 6e 2c
|map[file=berlin,|
00000130  20 6d 6f 64 65 3d 67 6d  5d 7b 42 72 61 6e 64 65  |
mode=gm]{Brande|
00000140  6e 62 75 72 67 65 72 20  54 6f 72 2c 20 42 65 72  |nburger
Tor, Ber|
00000150  6c 69 6e 7d 0d 0a 5c 69  6e 63 6c 75 64 65 67 72
|lin}..\includegr|
00000160  61 70 68 69 63 73 5b 77  69 64 74 68 3d 31 30 63
|aphics[width=10c|
00000170  6d 5d 7b 62 65 72 6c 69  6e 7d 0d 0a 0d 0a 25 5c
|m]{berlin}....%\|
00000180  67 65 74 6d 61 70 5b 66  69 6c 65 3d 6d 75 63 2c
|getmap[file=muc,|
00000190  20 6d 6f 64 65 3d 67 6d  5d 7b 53 74 61 63 68 75  |
mode=gm]{Stachu|
000001a0  73 2c 20 4d 75 65 6e 63  68 65 6e 7d 0d 0a 5c 67  |s,
Muenchen}..\g|
000001b0  65 74 6d 61 70 5b 66 69  6c 65 3d 6d 75 63 2c 20
|etmap[file=muc, |
000001c0  6d 6f 64 65 3d 67 6d 5d  7b 53 74 61 63 68 75 73
|mode=gm]{Stachus|
000001d0  2c 20 4d c3 bc 6e 63 68  65 6e 7d 0d 0a 5c 69 6e  |,
M..nchen}..\in|
000001e0  63 6c 75 64 65 67 72 61  70 68 69 63 73 5b 77 69
|cludegraphics[wi|
000001f0  64 74 68 3d 31 30 63 6d  5d 7b 6d 75 63 7d 0d 0a
|dth=10cm]{muc}..|
00000200  5c 65 6e 64 7b 64 6f 63  75 6d 65 6e 74 7d        |\end{document}|
0000020e

Even in the hexdump you can clearly see that '?' is correctly encoded as
c3 9f

If I compile this file with pdflatex everything is fine.

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 307 bytes
output = getmap.png

?: c3 9f

But lualatex -shell-escape file (the very same utf8 file) produces:

! error:  (file getmap.png) (pdf backend): internal error: unknown image
type
!  ==> Fatal error occurred, no output PDF file produced!


> lualatex result for UTF-8 encoding case:
> 
> url =
> http://maps.googleapis.com/maps/api/staticmap?center=Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&maptype=roadmap&scale=1&format=png&language=en&sensor=false
> 
> url length = 307 bytes

url =
http://maps.googleapis.com/maps/api/staticmap?center=Bergheimer%20Stra%c3%3fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Bergheimer%20Stra%c3%3fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 307 bytes

because '?' is encoded c3 3f instead of c3 9f.

This could be some strange weirdness on my system. I de- and reinstalled
both luatex and getmap without any change. I'm puzzled and don't know
what I still can do.

Can please somebody else test the following file on his/her system with:
lualatex -shell-escape file

%
% encoding is UTF-8
%
\documentclass{article}
\usepackage{graphicx}
\usepackage[overwrite=true]{getmap}
\begin{document}
\getmap[mode=gm]{Bergheimer Stra?e 110A, 69115 Heidelberg, Germany}
%\getmap[mode=gm]{Bergheimer Strasse 110a, 69115 Heidelberg, Germany}
\includegraphics[width=10cm]{getmap}

\getmap[file=berlin, mode=gm]{Brandenburger Tor, Berlin}
\includegraphics[width=10cm]{berlin}

%\getmap[file=muc, mode=gm]{Stachus, Muenchen}
\getmap[file=muc, mode=gm]{Stachus, M?nchen}
\includegraphics[width=10cm]{muc}
\end{document}

This was from the very beginning a Windows only problem, right? Can
someone with a Linux system do the test, too?

Best,

Josef



From josef.kleber at gmx.de  Fri Jul 13 14:37:01 2018
From: josef.kleber at gmx.de (Josef Kleber)
Date: Fri, 13 Jul 2018 14:37:01 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <20DA7738-24D7-4544-8E3C-80F63CF5348B@wideopenwest.com>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
 <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
 <C86CB746B3414730889CEE9193E8096C@CJ3001517A>
 <f5cfc32a-c817-8d8e-7361-b5a0a33b45ed@gmx.de>
 <694CB4D0088545F3BDF77D4FBF7743D4@CJ3001517A>
 <1590e1b8-51b4-3012-bc67-7206d56f3567@gmx.de>
 <C4136FA9CA8D487A940353A20C66781E@CJ3001517A>
 <2142be90-34e9-5cc9-5a81-f913b9d5a6ed@gmx.de>
 <20DA7738-24D7-4544-8E3C-80F63CF5348B@wideopenwest.com>
Message-ID: <64d32a5d-795b-1228-5268-6fd20640f438@gmx.de>

Hi Herb,

I hope it's okay for you to forward your email to the mailing list.

Am 13.07.2018 um 14:10 schrieb Herbert Schulz:
>> On Jul 13, 2018, at 5:33 AM, Josef Kleber <josef.kleber at gmx.de> wrote:
>>
>> ...
>> This was from the very beginning a Windows only problem, right? Can
>> someone with a Linux system do the test, too?
> Howdy,
> 
> Once I fix the getmapdl.lua script as noted before 

You mean local url = socket.url or require("socket.url")? It did not
work without changing this line? You got the loading error about the
socket.url module? That would mean that not just the windows binary of
luatex is affected.

> all is well with my fully updated TeX Live 2018 on my Mac (installed by MacTeX). The URL encoding of ?, %c3%9f, is correct and the map does get downloaded and included in the document.

Thanks for the test.

Josef

From josef.kleber at gmx.de  Fri Jul 13 15:26:30 2018
From: josef.kleber at gmx.de (Josef Kleber)
Date: Fri, 13 Jul 2018 15:26:30 +0200
Subject: [tex-live] Fwd: Lua module 'socket.url' loading problem with getmap
In-Reply-To: <5D1F6EE9-367A-48A0-8375-7697122039D1@wideopenwest.com>
References: <5D1F6EE9-367A-48A0-8375-7697122039D1@wideopenwest.com>
Message-ID: <2612bf15-81f6-e134-cbb2-8f7f3abb6ef9@gmx.de>


Ooops, Herb did it again! ;-)

-------- Weitergeleitete Nachricht --------
Betreff: Re: [tex-live] Lua module 'socket.url' loading problem with getmap
Datum: Fri, 13 Jul 2018 08:23:13 -0500
Von: Herbert Schulz <herbs at wideopenwest.com>
An: Josef Kleber <josef.kleber at gmx.de>

> On Jul 13, 2018, at 7:37 AM, Josef Kleber <josef.kleber at gmx.de> wrote:
> 
> Hi Herb,
> 
> I hope it's okay for you to forward your email to the mailing list.

Howdy,

No problem. I keep forgetting to Reply to All on that list.

> 
> Am 13.07.2018 um 14:10 schrieb Herbert Schulz:
>>> On Jul 13, 2018, at 5:33 AM, Josef Kleber <josef.kleber at gmx.de> wrote:
>>> 
>>> ...
>>> This was from the very beginning a Windows only problem, right? Can
>>> someone with a Linux system do the test, too?
>> Howdy,
>> 
>> Once I fix the getmapdl.lua script as noted before 
> 
> You mean local url = socket.url or require("socket.url")? It did not
> work without changing this line? You got the loading error about the
> socket.url module? That would mean that not just the windows binary of
> luatex is affected.
> 
>> all is well with my fully updated TeX Live 2018 on my Mac (installed by MacTeX). The URL encoding of ?, %c3%9f, is correct and the map does get downloaded and included in the document.
> 
> Thanks for the test.
> 
> Josef

I had to change the line

local url = require("socket.url")

to

local url = socket.url

to get the script to work. Once that was done it downloaded and typeset
all three maps.

Good Luck,

Herb Schulz
(herbs at wideopenwest dot com)


From kakuto at fuk.kindai.ac.jp  Sat Jul 14 00:02:46 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Sat, 14 Jul 2018 07:02:46 +0900
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <2142be90-34e9-5cc9-5a81-f913b9d5a6ed@gmx.de>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
 <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
 <C86CB746B3414730889CEE9193E8096C@CJ3001517A>
 <f5cfc32a-c817-8d8e-7361-b5a0a33b45ed@gmx.de>
 <694CB4D0088545F3BDF77D4FBF7743D4@CJ3001517A>
 <1590e1b8-51b4-3012-bc67-7206d56f3567@gmx.de>
 <C4136FA9CA8D487A940353A20C66781E@CJ3001517A>
 <2142be90-34e9-5cc9-5a81-f913b9d5a6ed@gmx.de>
Message-ID: <F7FAD2E6B8664501B37669F0D2B94171@CJ3001517A>

Dear Josef,

> Can please somebody else test the following file on
> his/her system with:
> lualatex -shell-escape file
>
> %
> % encoding is UTF-8
> %
> ... ...

The example works fine here on Windows for lualatex, and xelatex.

However in other cases, for example Japanese Kanji names,
\StringEncodingConvert sometimes convert a clean UTF-8 string
in a source into a broken string for lualatex and xelatex.
In the case of pdflatex, all is OK. I don't know why.
Since sources in xelatex and lualatex are generically UTF-8,
I think that it is better to redefine \StringEncodingConvert
not to convert the string.
Please see an attached patch: getmap.sty.diff and
please test it for lualatex and xelatex.

Best,
Akira
-------------- next part --------------
A non-text attachment was scrubbed...
Name: getmap.sty.diff
Type: application/octet-stream
Size: 757 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20180714/2ffb7cfb/attachment.obj>

From kakuto at fuk.kindai.ac.jp  Sat Jul 14 00:58:28 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Sat, 14 Jul 2018 07:58:28 +0900
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
Message-ID: <92D710DE160847C8AC8C62EE0287DDD8@CJ3001517A>

Dear Josef,

> However in other cases, for example Japanese Kanji names,
> \StringEncodingConvert sometimes convert a clean UTF-8 string
> in a source into a broken string for lualatex and xelatex.

I attache an example: xelualatexsample.tex.

Best,
Akira
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xelualatexsample.tex
Type: application/octet-stream
Size: 445 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20180714/42e86714/attachment.obj>

From kakuto at fuk.kindai.ac.jp  Sat Jul 14 01:18:15 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Sat, 14 Jul 2018 08:18:15 +0900
Subject: [tex-live] Fwd: Lua module 'socket.url' loading problem with
	getmap
In-Reply-To: <2612bf15-81f6-e134-cbb2-8f7f3abb6ef9@gmx.de>
References: <5D1F6EE9-367A-48A0-8375-7697122039D1@wideopenwest.com>
 <2612bf15-81f6-e134-cbb2-8f7f3abb6ef9@gmx.de>
Message-ID: <B989F29C61E94A1193EA91EA2AEEF49A@CJ3001517A>

> I had to change the line
>
> local url = require("socket.url")
>
> to
>
> local url = socket.url

Windows updated binary modifies luasocket library by
changing a few lua modules and their C version by
adding lacking lines like
module("socket.url") by comparing with the good socket.http.
So probably getmapdl.lua works only on Windows now.

Thus, currently it will be best to modify the script as

local url = socket.url or require("socket.url")

Best,
Akira


From josef.kleber at gmx.de  Sat Jul 14 11:23:17 2018
From: josef.kleber at gmx.de (Josef Kleber)
Date: Sat, 14 Jul 2018 11:23:17 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <F7FAD2E6B8664501B37669F0D2B94171@CJ3001517A>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
 <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
 <C86CB746B3414730889CEE9193E8096C@CJ3001517A>
 <f5cfc32a-c817-8d8e-7361-b5a0a33b45ed@gmx.de>
 <694CB4D0088545F3BDF77D4FBF7743D4@CJ3001517A>
 <1590e1b8-51b4-3012-bc67-7206d56f3567@gmx.de>
 <C4136FA9CA8D487A940353A20C66781E@CJ3001517A>
 <2142be90-34e9-5cc9-5a81-f913b9d5a6ed@gmx.de>
 <F7FAD2E6B8664501B37669F0D2B94171@CJ3001517A>
Message-ID: <8083ca1b-e425-f871-5fe9-cd7dbcb3b6b1@gmx.de>

Dear Akira

Am 14.07.2018 um 00:02 schrieb Akira Kakuto:
> Dear Josef,
> 
>> Can please somebody else test the following file on
>> his/her system with:
>> lualatex -shell-escape file
>>
>> %
>> % encoding is UTF-8
>> %
>> ... ...
> 
> The example works fine here on Windows for lualatex, and xelatex.
> 

Unfortunately, I have to report that your diff does not change anything
on my side.

$ kpsewhich getmap.sty
c:/texlive/2018/texmf-dist/tex/latex/getmap/getmap.sty

jk at HP-kleberj /cygdrive/c/texlive/2018/texmf-dist/tex/latex/getmap
$ diff getmap.sty.orig getmap.sty
33a34
> \RequirePackage{ifxetex}%
34a36,50
> %
> % In the case of xelatex and lualatex, \StringEncodingConvert
> % sometimes convert a clean UTF-8 string in a source into
> % a broken string. Since sources in xelatex and lualatex are
> % generically UTF-8, it is better to redefine
> % \StringEncodingConvert not to convert the string.
> %
> \ifxetex%
> \def\StringEncodingConvert#1#2#3#4{%
> \def#1{#2}%
> }\fi%
> \ifluatex%
> \def\StringEncodingConvert#1#2#3#4{%
> \def#1{#2}%
> }\fi%

I expanded your test file with my troublesome address:

%
% UTF-8 encoding
%
\documentclass{article}
\usepackage{graphicx}
\usepackage[overwrite=true]{getmap}
\begin{document}
\getmap[file=tokyo, mode=gm]{??, ??}
\includegraphics[width=10cm]{tokyo}

\getmap[mode=gm]{Bergheimer Stra?e 110A, 69115 Heidelberg, Germany}
%\getmap[mode=gm]{Bergheimer Strasse 110a, 69115 Heidelberg, Germany}
\includegraphics[width=10cm]{getmap}
\end{document}

Both work fine here with pdflatex and xelatex but not with lualatex!

Produced URLs:

pdflatex:

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=%e6%b8%8b%e8%b0%b7%2c%20%e6%9d%b1%e4%ba%ac&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|%e6%b8%8b%e8%b0%b7%2c%20%e6%9d%b1%e4%ba%ac&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 255 bytes
output = tokyo.png

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 307 bytes
output = getmap.png


xelatex:

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=%e6%b8%8b%e8%b0%b7%2c%20%e6%9d%b1%e4%ba%ac&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|%e6%b8%8b%e8%b0%b7%2c%20%e6%9d%b1%e4%ba%ac&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 255 bytes
output = tokyo.png

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 307 bytes
output = getmap.png


lualatex:

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=%e6%b8%3f%e8%b0%b7%2c%20%e6%9d%b1%e4%ba%ac&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|%e6%b8%3f%e8%b0%b7%2c%20%e6%9d%b1%e4%ba%ac&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 255 bytes
output = tokyo.png

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=Bergheimer%20Stra%c3%3fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Bergheimer%20Stra%c3%3fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 307 bytes
output = getmap.png

Looking at the URLs you can see that also in your Tokio example there is
a faulty 3f byte, which seems to indicate some kind of systematic error
in luatex v1.0.7. At least my example worked with the version included
in TL2016 (for sure) and most likely TL2017!

@Ulrike: Can you please test the above test file both with lualatex
v1.0.7 and v1.0.8? Have you done your last test with the original
getmapdl.lua or with the adapted version?

Best,

Josef

From kakuto at fuk.kindai.ac.jp  Sat Jul 14 12:34:06 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Sat, 14 Jul 2018 19:34:06 +0900
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <8083ca1b-e425-f871-5fe9-cd7dbcb3b6b1@gmx.de>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
 <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
 <C86CB746B3414730889CEE9193E8096C@CJ3001517A>
 <f5cfc32a-c817-8d8e-7361-b5a0a33b45ed@gmx.de>
 <694CB4D0088545F3BDF77D4FBF7743D4@CJ3001517A>
 <1590e1b8-51b4-3012-bc67-7206d56f3567@gmx.de>
 <C4136FA9CA8D487A940353A20C66781E@CJ3001517A>
 <2142be90-34e9-5cc9-5a81-f913b9d5a6ed@gmx.de>
 <F7FAD2E6B8664501B37669F0D2B94171@CJ3001517A>
 <8083ca1b-e425-f871-5fe9-cd7dbcb3b6b1@gmx.de>
Message-ID: <829F149D00014C5B921227D3FBEDFF98@CJ3001517A>

Dear Josef,

> Unfortunately, I have to report that your diff does not change anything
> on my side.

It is very strange!!

I show results obtained here on Windows.
Binaries and packages are in the latest TeX Live master.

(1) xelatex with the original getmap.sty
(2) lualatex with the original getmap.sty
(3) xelatex with the modified getmap.sty
(4) lualatex with the modified getmap.sty

getmap.png seems to be correct in all 4 cases.
tokyo.png is broken in (1) and (2).
tokyo.png is correct in (3) and (4).

Best,
Akira

------------------------------------------
(1) xelatex with the original getmap.sty

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=%c3%ae%c3%81E%c3%81E%25%c3%9e%c3%aa%c3%aa%c3%aa%c3%ae%c3%81E%c3%81E%25%c3%9e%c3%aa%c3%aa%c3%aa%2c%20%c3%ae%c3%81E%c3%81E%25%c3%9e%c3%aa%c3%aa%c3%aa%c3%ae%c3%81E%c3%81E%25%c3%9e%c3%aa%c3%aa%c3%aa&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|%c3%ae%c3%81E%c3%81E%25%c3%9e%c3%aa%c3%aa%c3%aa%c3%ae%c3%81E%c3%81E%25%c3%9e%c3%aa%c3%aa%c3%aa%2c%20%c3%ae%c3%81E%c3%81E%25%c3%9e%c3%aa%c3%aa%c3%aa%c3%ae%c3%81E%c3%81E%25%c3%9e%c3%aa%c3%aa%c3%aa&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 559 bytes
output = tokyo.png

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 307 bytes
output = getmap.png
------------------------------------------

(2) lualatex with the original getmap.sty

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=%2c%20&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|%2c%20&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 183 bytes
output = tokyo.png

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 307 bytes
output = getmap.png
------------------------------------------
(3) xelatex with the modified getmap.sty

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=%e6%b8%8b%e8%b0%b7%2c%20%e6%9d%b1%e4%ba%ac&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|%e6%b8%8b%e8%b0%b7%2c%20%e6%9d%b1%e4%ba%ac&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 255 bytes
output = tokyo.png

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 307 bytes
output = getmap.png
------------------------------------------
(4) lualatex with the modified getmap.sty

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=%e6%b8%8b%e8%b0%b7%2c%20%e6%9d%b1%e4%ba%ac&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|%e6%b8%8b%e8%b0%b7%2c%20%e6%9d%b1%e4%ba%ac&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 255 bytes
output = tokyo.png

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Bergheimer%20Stra%c3%9fe%20110A%2c%2069115%20Heidelberg%2c%20Germany&maptype=roadmap&scale=1&format=png&language=en&sensor=false
url length = 307 bytes
output = getmap.png
------------------------------------------


From horakk at math.cas.cz  Sat Jul 14 17:06:41 2018
From: horakk at math.cas.cz (Karel)
Date: Sat, 14 Jul 2018 16:06:41 +0100
Subject: [tex-live] bug in synctex
Message-ID: <5B4A1181.8040301@math.cas.cz>

I have found a bug using synctex with other magnification than 1000,
but I cannot locate some appropriate place to report it.

So I try this mailing list:-)

Even if another magnification is set (1200 usually) in TeX document, the 
information in synctex file says

Output:pdf
Magnification:1000

which implies incorrect navigation in the editor.
(Of course when I change the value to 1200 by hand, the navigation is 
perfect.)


      How to reproduce

Start any document with
\magnification 1200
or
\mag 1200


      Expected behavior

in the corresponding synctex file should be
Magnification:1200


      Actual behavior

Magnification:1000
is written instead which probably means that dimensions which should be 
multiplied by 1.2
are read without any multiplication.

Thanks for any progress,
Karel Horak


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20180714/5164dd56/attachment.html>

From josef.kleber at gmx.de  Sat Jul 14 16:14:07 2018
From: josef.kleber at gmx.de (Josef Kleber)
Date: Sat, 14 Jul 2018 16:14:07 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <829F149D00014C5B921227D3FBEDFF98@CJ3001517A>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
 <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
 <C86CB746B3414730889CEE9193E8096C@CJ3001517A>
 <f5cfc32a-c817-8d8e-7361-b5a0a33b45ed@gmx.de>
 <694CB4D0088545F3BDF77D4FBF7743D4@CJ3001517A>
 <1590e1b8-51b4-3012-bc67-7206d56f3567@gmx.de>
 <C4136FA9CA8D487A940353A20C66781E@CJ3001517A>
 <2142be90-34e9-5cc9-5a81-f913b9d5a6ed@gmx.de>
 <F7FAD2E6B8664501B37669F0D2B94171@CJ3001517A>
 <8083ca1b-e425-f871-5fe9-cd7dbcb3b6b1@gmx.de>
 <829F149D00014C5B921227D3FBEDFF98@CJ3001517A>
Message-ID: <33f9d790-764e-4a35-f9bf-fe0400dcb25d@gmx.de>

Dear Akira

Am 14.07.2018 um 12:34 schrieb Akira Kakuto:
> Dear Josef,
> 
>> Unfortunately, I have to report that your diff does not change anything
>> on my side.
> 
> It is very strange!!
> 
> I show results obtained here on Windows.
> Binaries and packages are in the latest TeX Live master.
> 
> (1) xelatex with the original getmap.sty
> (2) lualatex with the original getmap.sty
> (3) xelatex with the modified getmap.sty
> (4) lualatex with the modified getmap.sty
> 
> getmap.png seems to be correct in all 4 cases.
> tokyo.png is broken in (1) and (2).
> tokyo.png is correct in (3) and (4).
> 

In the last 2 hours I have reinstalled TL2018 with no change ;-(

getmap.sty unmodified getmapdl.lua unmodified
pdflatex: tokyo + munich +
xelatex : tokyo - munich +
lualatex: tokyo - munich -

getmap.sty unmodified getmapdl.lua modified
pdflatex: tokyo + munich +
xelatex : tokyo - munich +
lualatex: tokyo - munich -

getmap.sty modified getmapdl.lua modified
pdflatex: tokyo + munich +
xelatex : tokyo + munich +
lualatex: tokyo - munich -

Because of the luatex update, there's no change with (un)modified
getmapdl.lua. After modifying getmap.sty, tokyo.png works with xelatex ,
getmap.png works also with the unmodified version.
Nothing works for me with lualatex, it is always the '3f' error.

Using Cygwin's lua:

modified getmapdl.lua:

jk at HP-kleberj ~
$ lua /cygdrive/c/texlive/2018/texmf-dist/scripts/getmap/getmapdl.lua -m
gm -l "??, ??"-i png -o tokyo
lua: ...ve/c/texlive/2018/texmf-dist/scripts/getmap/getmapdl.lua:13:
attempt to index global 'socket' (a nil value)
stack traceback:
        ...ve/c/texlive/2018/texmf-dist/scripts/getmap/getmapdl.lua:13:
in main chunk
        [C]: in ?

unmodified getmapdl.lua:

jk at HP-kleberj ~
$ lua /cygdrive/c/texlive/2018/texmf-dist/scripts/getmap/getmapdl.lua -m
gm -l "??, ??" -i png -o tokyo


WARNING: ZOOM not specified; using ZOOM=17 as default!
WARNING: XSIZE not specified; using XSIZE=600 as default!
WARNING: YSIZE not specified; using YSIZE=400 as default!
WARNING: SCALE not specified, using SCALE=1 as default!
WARNING: TYPE not specified; using roadmap as default!
WARNING: COLOR not specified; using blue as default!
WARNING: NUMBER not specified; using 1 as default!


getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=%e6%b8%8b%e8%b0%b7%2c%20%e6%9d%b1%e4%ba%ac&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|%e6%b8%8b%e8%b0%b7%2c%20%e6%9d%b1%e4%ba%ac&maptype=roadmap&scale=1&format=png&sensor=false
url length = 243 bytes
output = tokyo.png

:-((

Best,

Josef

From news3 at nililand.de  Sat Jul 14 17:03:28 2018
From: news3 at nililand.de (Ulrike Fischer)
Date: Sat, 14 Jul 2018 17:03:28 +0200
Subject: [tex-live] bug in synctex
References: <5B4A1181.8040301@math.cas.cz>
Message-ID: <bjz8h05n75jy$.dlg@nililand.de>

Am Sat, 14 Jul 2018 16:06:41 +0100 schrieb Karel:

> I have found a bug using synctex with other magnification than 1000,
> but I cannot locate some appropriate place to report it.

https://github.com/jlaurens/synctex


-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From kakuto at fuk.kindai.ac.jp  Sat Jul 14 21:04:45 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Sun, 15 Jul 2018 04:04:45 +0900
Subject: [tex-live] bug in synctex
In-Reply-To: <5B4A1181.8040301@math.cas.cz>
References: <5B4A1181.8040301@math.cas.cz>
Message-ID: <D53ADD42277C473D97BD02E30D688538@CJ3001517A>

Dear Karel,

> I have found a bug using synctex with other magnification than 1000,
> ... ...

Thanks for the report.
Fixed in the TeX Live SVN in r48195.

Thanks,
Akira


From kakuto at fuk.kindai.ac.jp  Sun Jul 15 06:23:24 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Sun, 15 Jul 2018 13:23:24 +0900
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <33f9d790-764e-4a35-f9bf-fe0400dcb25d@gmx.de>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
 <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
 <C86CB746B3414730889CEE9193E8096C@CJ3001517A>
 <f5cfc32a-c817-8d8e-7361-b5a0a33b45ed@gmx.de>
 <694CB4D0088545F3BDF77D4FBF7743D4@CJ3001517A>
 <1590e1b8-51b4-3012-bc67-7206d56f3567@gmx.de>
 <C4136FA9CA8D487A940353A20C66781E@CJ3001517A>
 <2142be90-34e9-5cc9-5a81-f913b9d5a6ed@gmx.de>
 <F7FAD2E6B8664501B37669F0D2B94171@CJ3001517A>
 <8083ca1b-e425-f871-5fe9-cd7dbcb3b6b1@gmx.de>
 <829F149D00014C5B921227D3FBEDFF98@CJ3001517A>
 <33f9d790-764e-4a35-f9bf-fe0400dcb25d@gmx.de>
Message-ID: <5CF98A30A62443C18E1715C2DE3F2A45@CJ3001517A>

Dear Josef,

> In the last 2 hours I have reinstalled TL2018 with no change ;-(

Next trial.
Please test an attached getmap.sty.
That is not a patch, but a complete file.
I have slightly changed the previous one.
Here, your example and tokyo.png for lualatex are
working fine also by using the new getmap.sty.

Best,
Akira
-------------- next part --------------
A non-text attachment was scrubbed...
Name: getmap.sty
Type: application/octet-stream
Size: 9298 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20180715/a662ae01/attachment-0001.obj>

From josef.kleber at gmx.de  Sun Jul 15 10:45:50 2018
From: josef.kleber at gmx.de (Josef Kleber)
Date: Sun, 15 Jul 2018 10:45:50 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <5CF98A30A62443C18E1715C2DE3F2A45@CJ3001517A>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
 <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
 <C86CB746B3414730889CEE9193E8096C@CJ3001517A>
 <f5cfc32a-c817-8d8e-7361-b5a0a33b45ed@gmx.de>
 <694CB4D0088545F3BDF77D4FBF7743D4@CJ3001517A>
 <1590e1b8-51b4-3012-bc67-7206d56f3567@gmx.de>
 <C4136FA9CA8D487A940353A20C66781E@CJ3001517A>
 <2142be90-34e9-5cc9-5a81-f913b9d5a6ed@gmx.de>
 <F7FAD2E6B8664501B37669F0D2B94171@CJ3001517A>
 <8083ca1b-e425-f871-5fe9-cd7dbcb3b6b1@gmx.de>
 <829F149D00014C5B921227D3FBEDFF98@CJ3001517A>
 <33f9d790-764e-4a35-f9bf-fe0400dcb25d@gmx.de>
 <5CF98A30A62443C18E1715C2DE3F2A45@CJ3001517A>
Message-ID: <25b95f36-962a-38da-db60-aad7abcad905@gmx.de>

Dear Akira,

Am 15.07.2018 um 06:23 schrieb Akira Kakuto:
> Dear Josef,
> 
>> In the last 2 hours I have reinstalled TL2018 with no change ;-(
> 
> Next trial.
> Please test an attached getmap.sty.
> That is not a patch, but a complete file.
> I have slightly changed the previous one.
> Here, your example and tokyo.png for lualatex are
> working fine also by using the new getmap.sty.

Eureka! :-))

This also works for me! (pdflatex,xelatex and lualatex)

Am I correct that 'os.setlocale('','ctype')' does set the 'letter'
locale to a system independant lua default? This would indeed explain
different behavior on different systems. Although, it's still strange
that luatex accepts german umlauts but no ? on my side.
Still don't understand why a change in luatex or (some versions of)
Windows would require that now, but worked flawlessly with older versions.

Thanks for your effort and patience! :-)

Best,

Josef

From kakuto at fuk.kindai.ac.jp  Sun Jul 15 15:31:10 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Sun, 15 Jul 2018 22:31:10 +0900
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <25b95f36-962a-38da-db60-aad7abcad905@gmx.de>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
 <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
 <C86CB746B3414730889CEE9193E8096C@CJ3001517A>
 <f5cfc32a-c817-8d8e-7361-b5a0a33b45ed@gmx.de>
 <694CB4D0088545F3BDF77D4FBF7743D4@CJ3001517A>
 <1590e1b8-51b4-3012-bc67-7206d56f3567@gmx.de>
 <C4136FA9CA8D487A940353A20C66781E@CJ3001517A>
 <2142be90-34e9-5cc9-5a81-f913b9d5a6ed@gmx.de>
 <F7FAD2E6B8664501B37669F0D2B94171@CJ3001517A>
 <8083ca1b-e425-f871-5fe9-cd7dbcb3b6b1@gmx.de>
 <829F149D00014C5B921227D3FBEDFF98@CJ3001517A>
 <33f9d790-764e-4a35-f9bf-fe0400dcb25d@gmx.de>
 <5CF98A30A62443C18E1715C2DE3F2A45@CJ3001517A>
 <25b95f36-962a-38da-db60-aad7abcad905@gmx.de>
Message-ID: <42E756E69AED4307B1217CEAA07D37E8@CJ3001517A>

Dear Josef,

> This also works for me! (pdflatex,xelatex and lualatex)

I tried following the investigation by Arata Mizuki.
Please read
https://tug.org/pipermail/tex-live/2018-May/041628.html

The reason seems to be the update of the used
compiler and its standard libraries.

Best,
Akira


From josef.kleber at gmx.de  Sun Jul 15 16:56:52 2018
From: josef.kleber at gmx.de (Josef Kleber)
Date: Sun, 15 Jul 2018 16:56:52 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <42E756E69AED4307B1217CEAA07D37E8@CJ3001517A>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
 <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
 <C86CB746B3414730889CEE9193E8096C@CJ3001517A>
 <f5cfc32a-c817-8d8e-7361-b5a0a33b45ed@gmx.de>
 <694CB4D0088545F3BDF77D4FBF7743D4@CJ3001517A>
 <1590e1b8-51b4-3012-bc67-7206d56f3567@gmx.de>
 <C4136FA9CA8D487A940353A20C66781E@CJ3001517A>
 <2142be90-34e9-5cc9-5a81-f913b9d5a6ed@gmx.de>
 <F7FAD2E6B8664501B37669F0D2B94171@CJ3001517A>
 <8083ca1b-e425-f871-5fe9-cd7dbcb3b6b1@gmx.de>
 <829F149D00014C5B921227D3FBEDFF98@CJ3001517A>
 <33f9d790-764e-4a35-f9bf-fe0400dcb25d@gmx.de>
 <5CF98A30A62443C18E1715C2DE3F2A45@CJ3001517A>
 <25b95f36-962a-38da-db60-aad7abcad905@gmx.de>
 <42E756E69AED4307B1217CEAA07D37E8@CJ3001517A>
Message-ID: <f42b745f-3119-4cf6-6efb-f14c4ec19bb7@gmx.de>

Dear Akira,

Am 15.07.2018 um 15:31 schrieb Akira Kakuto:
> Dear Josef,
> 
>> This also works for me! (pdflatex,xelatex and lualatex)
> 
> I tried following the investigation by Arata Mizuki.
> Please read
> https://tug.org/pipermail/tex-live/2018-May/041628.html
> 
> The reason seems to be the update of the used
> compiler and its standard libraries.

I've read the mail, but don't get the story. In
https://www.lua.org/manual/5.1/manual.html#pdf-os.setlocale there's:

"If locale is the empty string, the current locale is set to an
implementation-defined native locale."

Whatever that might be.

On
http://pubs.opengroup.org/onlinepubs/009604499/functions/setlocale.html
there's

""
    Specifies an implementation-defined native environment. [CX] [Option
Start]  The determination of the name of the new locale for the
specified category depends on the value of the associated environment
variables, LC_* and LANG ; see the Base Definitions volume of IEEE Std
1003.1-2001, Chapter 7, Locale and the Base Definitions volume of IEEE
Std 1003.1-2001, Chapter 8, Environment Variables. [Option End]

Here I use two shells: cmd.exe and Cygwin's bash

C:\Users\jk>chcp
Aktive Codepage: 850.

$ locale
LANG=de_DE.UTF-8
LC_CTYPE="de_DE.UTF-8"
LC_NUMERIC="de_DE.UTF-8"
LC_TIME="de_DE.UTF-8"
LC_COLLATE="de_DE.UTF-8"
LC_MONETARY="de_DE.UTF-8"
LC_MESSAGES="de_DE.UTF-8"
LC_ALL=

It works on both, although getmap.sty takes care to explicitly convert
problematic strings to utf8. I don't see how the the loale can be set to
a specific platform dependant codepage. I would say it's exactly the
opposite.

Another question would be why I need to reset the locale again, although
it's done by runscript.tlu.

However, it does work! ;-)

Josef

From jfbu at free.fr  Mon Jul 16 01:45:30 2018
From: jfbu at free.fr (jfbu)
Date: Mon, 16 Jul 2018 01:45:30 +0200
Subject: [tex-live] Issue with \textgreater and lualatex
Message-ID: <1DC3555E-409D-4AFF-BF24-018EF12C0219@free.fr>

Hi,

apologies if wrong list, but I am online for a short wile and
wasn't sure where to post.

This MWE

\documentclass{article}

\ifdefined\directlua
\usepackage{fontspec}
\else
\ifdefined\XeTeXinterchartoks
\usepackage{fontspec}
\else
\usepackage[T1]{fontenc}
\fi\fi

\begin{document}
% uniquement avec lualatex donne ?
\textgreater{}\textgreater{}

% ici aussi donne ?
{\textgreater}{\textgreater}

\end{document}


produces similar result with pdflatex and xelatex
but not with lualatex which applies a ligature.

Surely this has been raised somewhere, but is there
a fix in mark-up which would be engine independent.

This is a real life issue arising in indexing of
Python's >>> prompt with the > being escaped into
TeX macro \textgreater{} by some documentation
production tool, and then LuaLaTeX gives bad result.

Best,

Jean-Fran?ois



From kakuto at fuk.kindai.ac.jp  Mon Jul 16 04:28:01 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Mon, 16 Jul 2018 11:28:01 +0900
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <f42b745f-3119-4cf6-6efb-f14c4ec19bb7@gmx.de>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
 <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>
 <0724EB1E2F2E4F78928A458E9223A14E@CJ3001517A>
 <90ea29a1-6fb6-b51b-8b93-e26fff131e11@gmx.de>
 <C86CB746B3414730889CEE9193E8096C@CJ3001517A>
 <f5cfc32a-c817-8d8e-7361-b5a0a33b45ed@gmx.de>
 <694CB4D0088545F3BDF77D4FBF7743D4@CJ3001517A>
 <1590e1b8-51b4-3012-bc67-7206d56f3567@gmx.de>
 <C4136FA9CA8D487A940353A20C66781E@CJ3001517A>
 <2142be90-34e9-5cc9-5a81-f913b9d5a6ed@gmx.de>
 <F7FAD2E6B8664501B37669F0D2B94171@CJ3001517A>
 <8083ca1b-e425-f871-5fe9-cd7dbcb3b6b1@gmx.de>
 <829F149D00014C5B921227D3FBEDFF98@CJ3001517A>
 <33f9d790-764e-4a35-f9bf-fe0400dcb25d@gmx.de>
 <5CF98A30A62443C18E1715C2DE3F2A45@CJ3001517A>
 <25b95f36-962a-38da-db60-aad7abcad905@gmx.de>
 <42E756E69AED4307B1217CEAA07D37E8@CJ3001517A>
 <f42b745f-3119-4cf6-6efb-f14c4ec19bb7@gmx.de>
Message-ID: <83859DB131C24F9D875573C2EB6AD8A5@CJ3001517A>

Dear Josef,

> Another question would be why I need to reset the locale again,
> although it's done by runscript.tlu.

I don't understand anything, but the above is a different
problem.

First, os.execute("getmapdl ..."), is called by lualatex,
where LC_CTYPE is still "C", not by the wrapper. 
Then "getmapdl ..." starts the wrapper runscript.

Best,
Akira


From d.p.carlisle at gmail.com  Mon Jul 16 08:34:14 2018
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Mon, 16 Jul 2018 07:34:14 +0100
Subject: [tex-live] Issue with \textgreater and lualatex
In-Reply-To: <1DC3555E-409D-4AFF-BF24-018EF12C0219@free.fr>
References: <1DC3555E-409D-4AFF-BF24-018EF12C0219@free.fr>
Message-ID: <CAEW6iOiqRG_HpOWWwTeJXcDNspq4i7UgYK2Z4nOEt520nho0TQ@mail.gmail.com>

luatex list would be better but...

This is unrelated to \textgreater, it is a documented feature that
braces have do not affect ligaturing in luatex.

Using {} is not reliable in classic tex either (a change between the
earliest and later editions of the texbook was to change the
suggestion to use {} to \/ for breaking ff ligatures) It does or does
not break the ligature depending on whether the word was considered
for hyphenation.

You could use \mbox{\textgreater}  or \textgreater\/\textgreater or ....



On 16 July 2018 at 00:45, jfbu <jfbu at free.fr> wrote:
> Hi,
>
> apologies if wrong list, but I am online for a short wile and
> wasn't sure where to post.
>
> This MWE
>
> \documentclass{article}
>
> \ifdefined\directlua
> \usepackage{fontspec}
> \else
> \ifdefined\XeTeXinterchartoks
> \usepackage{fontspec}
> \else
> \usepackage[T1]{fontenc}
> \fi\fi
>
> \begin{document}
> % uniquement avec lualatex donne ?
> \textgreater{}\textgreater{}
>
> % ici aussi donne ?
> {\textgreater}{\textgreater}
>
> \end{document}
>
>
> produces similar result with pdflatex and xelatex
> but not with lualatex which applies a ligature.
>
> Surely this has been raised somewhere, but is there
> a fix in mark-up which would be engine independent.
>
> This is a real life issue arising in indexing of
> Python's >>> prompt with the > being escaped into
> TeX macro \textgreater{} by some documentation
> production tool, and then LuaLaTeX gives bad result.
>
> Best,
>
> Jean-Fran?ois
>
>


From jfbu at free.fr  Mon Jul 16 10:29:36 2018
From: jfbu at free.fr (jfbu)
Date: Mon, 16 Jul 2018 10:29:36 +0200
Subject: [tex-live] Issue with \textgreater and lualatex
In-Reply-To: <CAEW6iOiqRG_HpOWWwTeJXcDNspq4i7UgYK2Z4nOEt520nho0TQ@mail.gmail.com>
References: <1DC3555E-409D-4AFF-BF24-018EF12C0219@free.fr>
 <CAEW6iOiqRG_HpOWWwTeJXcDNspq4i7UgYK2Z4nOEt520nho0TQ@mail.gmail.com>
Message-ID: <87B8CE5E-CF9A-4139-8E51-A9348B0C1CDC@free.fr>

Thanks David,

Of course I now recall I had this bit of info at back of my head.
(but only use the front part)

On first sight modifying all {} into \/ at the upstream project (Sphinx),
for those kinds of escape from ascii should make it.

Best,

Jean-Fran?ois


Le 16 juil. 2018 ? 08:34, David Carlisle <d.p.carlisle at gmail.com> a ?crit :

> luatex list would be better but...
> 
> This is unrelated to \textgreater, it is a documented feature that
> braces have do not affect ligaturing in luatex.
> 
> Using {} is not reliable in classic tex either (a change between the
> earliest and later editions of the texbook was to change the
> suggestion to use {} to \/ for breaking ff ligatures) It does or does
> not break the ligature depending on whether the word was considered
> for hyphenation.
> 
> You could use \mbox{\textgreater}  or \textgreater\/\textgreater or ....
> 
> 
> 
> On 16 July 2018 at 00:45, jfbu <jfbu at free.fr> wrote:
>> Hi,
>> 
>> apologies if wrong list, but I am online for a short wile and
>> wasn't sure where to post.
>> 
>> This MWE
>> 
>> \documentclass{article}
>> 
>> \ifdefined\directlua
>> \usepackage{fontspec}
>> \else
>> \ifdefined\XeTeXinterchartoks
>> \usepackage{fontspec}
>> \else
>> \usepackage[T1]{fontenc}
>> \fi\fi
>> 
>> \begin{document}
>> % uniquement avec lualatex donne ?
>> \textgreater{}\textgreater{}
>> 
>> % ici aussi donne ?
>> {\textgreater}{\textgreater}
>> 
>> \end{document}
>> 
>> 
>> produces similar result with pdflatex and xelatex
>> but not with lualatex which applies a ligature.
>> 
>> Surely this has been raised somewhere, but is there
>> a fix in mark-up which would be engine independent.
>> 
>> This is a real life issue arising in indexing of
>> Python's >>> prompt with the > being escaped into
>> TeX macro \textgreater{} by some documentation
>> production tool, and then LuaLaTeX gives bad result.
>> 
>> Best,
>> 
>> Jean-Fran?ois
>> 
>> 



From karl at freefriends.org  Tue Jul 17 01:53:51 2018
From: karl at freefriends.org (Karl Berry)
Date: Mon, 16 Jul 2018 23:53:51 GMT
Subject: [tex-live] Issue with \textgreater and lualatex
In-Reply-To: <87B8CE5E-CF9A-4139-8E51-A9348B0C1CDC@free.fr>
Message-ID: <201807162353.w6GNrp5s031259@freefriends.org>

    On first sight modifying all {} into \/ 

Using \/ to break ff ligatures is sensible, but I doubt it's ideal to
insert an italic correction in general if the only goal is to break the
liagture. At least, I would check the output to be sure it doesn't look
weird. You never know what ic value might end up in the font. \kern0pt
or similar might be safer. -k


From reinhard.kotucha at web.de  Tue Jul 17 03:47:40 2018
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 17 Jul 2018 03:47:40 +0200
Subject: [tex-live] Fwd: Lua module 'socket.url' loading problem
	with	getmap
In-Reply-To: <B989F29C61E94A1193EA91EA2AEEF49A@CJ3001517A>
References: <5D1F6EE9-367A-48A0-8375-7697122039D1@wideopenwest.com>
 <2612bf15-81f6-e134-cbb2-8f7f3abb6ef9@gmx.de>
 <B989F29C61E94A1193EA91EA2AEEF49A@CJ3001517A>
Message-ID: <23373.19132.160380.197842@gargle.gargle.HOWL>

On 2018-07-14 at 08:18:15 +0900, Akira Kakuto wrote:

 > > I had to change the line
 > >
 > > local url = require("socket.url")
 > >
 > > to
 > >
 > > local url = socket.url
 > 
 > Windows updated binary modifies luasocket library by
 > changing a few lua modules and their C version by
 > adding lacking lines like
 > module("socket.url") by comparing with the good socket.http.
 > So probably getmapdl.lua works only on Windows now.

Dear Akira and Joseph,
I followed your discussion with great interest and occasionally did
some tests on x86_64-linux.

I can confirm that everything works like charm with {pdf,lua,xe}latex
now.  Both, Josef's test file (Heidelberg, Berlin, Munich) and Akira's
test file (Tokyo) work perfectly.

I had to replace

  local url = require("socket.url")

with

  local url = socket.url

But this shouldn't be necessary and it wasn't necessary in the past.
There is definitely a bug in the current version of luatex which
should be fixed upstream.  I just informed luatex developers:

  https://mailman.ntg.nl/pipermail/dev-luatex/2018-July/006066.html

 > local url = socket.url or require("socket.url")

This is certainly the best workaround for the time being.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From jfbu at free.fr  Tue Jul 17 12:14:05 2018
From: jfbu at free.fr (jfbu)
Date: Tue, 17 Jul 2018 12:14:05 +0200
Subject: [tex-live] Issue with \textgreater and lualatex
In-Reply-To: <201807162353.w6GNrp5s031259@freefriends.org>
References: <201807162353.w6GNrp5s031259@freefriends.org>
Message-ID: <FCAAB83B-AD4D-4903-9CE4-7FDE6704028B@free.fr>

Hi Karl,


Le 17 juil. 2018 ? 01:53, Karl Berry <karl at freefriends.org> a ?crit :

>    On first sight modifying all {} into \/ 
> 
> Using \/ to break ff ligatures is sensible, but I doubt it's ideal to
> insert an italic correction in general if the only goal is to break the
> liagture. At least, I would check the output to be sure it doesn't look
> weird. You never know what ic value might end up in the font. \kern0pt
> or similar might be safer. -k
> 


Thanks, actually I possibly need this only for a few very specific case,
\textgreater, \textless, not checked yet if others.

I must be careful though that in my context (where the LaTeX is produced
out of some other mark-up), there is a notion of "parsed literal", which
is some sort of "alltt", and in that environment I redefined \textgreater
and \textless to insert discretionaries to allow linebreaks, and I will
have to check how \/ will behave there.

This is not extremely urgent matter as the set of lualatex users in my
context is probably nil, but I will have to do it at some point.

It is a bit annoying though that the same LaTeX mark-up produces different
results according to engine, I have to live with it, the main problem is
for long-term maintenance by fellow contributors who will be even
less LaTeX-savvy than I am. I expect my LaTeX contributions there will
be seen in awe for decades to come and never modified... so I have to
get them right to start with :).

Best,

Jean-Fran?ois





From kakuto at fuk.kindai.ac.jp  Wed Jul 18 01:21:18 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Wed, 18 Jul 2018 08:21:18 +0900
Subject: [tex-live] Fwd: Lua module 'socket.url' loading problem
	withgetmap
In-Reply-To: <23373.19132.160380.197842@gargle.gargle.HOWL>
References: <5D1F6EE9-367A-48A0-8375-7697122039D1@wideopenwest.com><2612bf15-81f6-e134-cbb2-8f7f3abb6ef9@gmx.de><B989F29C61E94A1193EA91EA2AEEF49A@CJ3001517A>
 <23373.19132.160380.197842@gargle.gargle.HOWL>
Message-ID: <1B3EB473D6B84206BB82CB80202FDC04@CJ3001517A>

Dear Reinhard,

> But this shouldn't be necessary and it wasn't necessary in the past.
> There is definitely a bug in the current version of luatex which
> should be fixed upstream.

I have applied my patch in the TeX Live SVN, r48217,
since that is accepted in the experimental branch in the
upstream.
Thus local url = require("socket.url") is expected to work on
any platform if luatex is rebuilt.
However in most cases, new binaries are not made until the
next year. So the best workaround now may be to change the
script as
local url = socket.url or require("socket.url")

Best,
Akira


From jarausch at skynet.be  Thu Jul 19 13:27:26 2018
From: jarausch at skynet.be (Helmut Jarausch)
Date: Thu, 19 Jul 2018 13:27:26 +0200
Subject: [tex-live] ngerman.sty - Undefined control sequence
Message-ID: <IELSSP32.HKVL2TVD.7NX3TNOO@UG2OEBPS.T652ANVY.LKA7LLNO>

Hi

I'm running TeXLive 2017 here on Gentoo.

I've observed the following problem

eplain
\input ngerman.sty


gives

entering extended mode
Babel <3.10> and hyphenation patterns for 12 language(s) loaded.
(/usr/share/texmf-dist/tex/generic/german/ngerman.sty v2.5e 1998-07-08
! Undefined control sequence.
\declare at robustcommand ...\csname \bbl at stripslash
                                                   #1 \endcsname  
}\expandafte...
l.255 \DeclareRobustCommand{\glqq}
                                   {%


The same occurs with german.sty

Many thanks for any hint on this one,
Helmut


From karl at freefriends.org  Thu Jul 19 23:35:16 2018
From: karl at freefriends.org (Karl Berry)
Date: Thu, 19 Jul 2018 21:35:16 GMT
Subject: [tex-live] ngerman.sty - Undefined control sequence
In-Reply-To: <IELSSP32.HKVL2TVD.7NX3TNOO@UG2OEBPS.T652ANVY.LKA7LLNO>
Message-ID: <201807192135.w6JLZGvF029320@freefriends.org>

Hi Helmut,

    eplain
    \input ngerman.sty
    ...
    \declare at robustcommand ...\csname \bbl at stripslash

Interesting. It is apparently related to running eplain as a .fmt,
since a one-line file:
  \input eplain \input ngerman.sty \end
run with (e)tex does not yield the error. I will look at it as soon as I
have a chance. Thanks for the report. --karl


From d.p.carlisle at gmail.com  Fri Jul 20 08:58:04 2018
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Fri, 20 Jul 2018 07:58:04 +0100
Subject: [tex-live] ngerman.sty - Undefined control sequence
In-Reply-To: <201807192135.w6JLZGvF029320@freefriends.org>
References: <IELSSP32.HKVL2TVD.7NX3TNOO@UG2OEBPS.T652ANVY.LKA7LLNO>
 <201807192135.w6JLZGvF029320@freefriends.org>
Message-ID: <CAEW6iOj=VTgV1oEVvRi+2ixXnN+yJLpGOnyy2VR5_pJo6mCi9w@mail.gmail.com>

You can use

\input eplain
\let\zzz\DeclareTextSymbol
\let\DeclareTextSymbol\undefined
\input ngerman.sty
\let\DeclareTextSymbol\zzz

\bye


(\DeclareTextSymbol gets defined in the format in babel's hyphenation
code somewhere, and then eplain takes the  "latex branch" at one point
as it tests if that command is undefined to decide to use latex style
or plain style definitions)

This may not be the best fix but it's a usable workaround.


On 19 July 2018 at 22:35, Karl Berry <karl at freefriends.org> wrote:
> Hi Helmut,
>
>     eplain
>     \input ngerman.sty
>     ...
>     \declare at robustcommand ...\csname \bbl at stripslash
>
> Interesting. It is apparently related to running eplain as a .fmt,
> since a one-line file:
>   \input eplain \input ngerman.sty \end
> run with (e)tex does not yield the error. I will look at it as soon as I
> have a chance. Thanks for the report. --karl
>

From alarrosa at suse.com  Fri Jul 20 19:17:31 2018
From: alarrosa at suse.com (Antonio Larrosa)
Date: Fri, 20 Jul 2018 19:17:31 +0200
Subject: [tex-live] Patches to build texlive with poppler 0.66.0
Message-ID: <aac380be-9614-0d70-e17d-7f078bfc780b@suse.com>

Hello,

During the update process of poppler to version 0.66.0 in openSUSE Tumbleweed,
we (openSUSE developers) noticed this new release breaks the build of texlive
(as well as other packages).

Some methods have been changed to return a const type pointer in poppler, and
thus, texlive fails to build with certain compiler flags since texlive sources
try to assign those to non-const variables.

I attached the patch that fixes the issues just in case it's useful for you,
please feel free to submit it to your repository. It basically changes some
variables and function parameters to be const so it should be safe to use it
with older poppler releases too.

Greetings,

-- 
Antonio Larrosa
-------------- next part --------------
A non-text attachment was scrubbed...
Name: source-fix-const-poppler0.66.0.patch
Type: text/x-patch
Size: 3912 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20180720/4dc842af/attachment.bin>

From texlive at schoepfer.info  Sun Jul 22 01:59:43 2018
From: texlive at schoepfer.info (texlive at schoepfer.info)
Date: Sun, 22 Jul 2018 01:59:43 +0200
Subject: [tex-live] texdoc texlive.tlpdb cache-tlpdb.lua
Message-ID: <9af8c4deb5f3254fa52e505c4fa7403e@schoepfer.info>

Hi,

on my selfcompiled texlive2018 on linux i get

$ texdoc texdoc
[string "/usr/share/texmf-dist/scripts/texdoc/search.t..."]:569: 
assertion failed!

It works after putting texlive.tlpdb in /tlpkg.
It keeps working after
rm /tlpkg/texlive.tlpdb
touch /tlpkg/texlive.tlpdb

Where can i tell texdoc to look in /usr/share/texmf-dist/tlpkg for 
texlive.tlpdb?
But even more i'd like to avoid having texlive.tlpdb shipped when 
packaging, is there a "direct" way to generate
texmf-var/texdoc/cache-tlpdb.lua
with a /custom/path/texlive.tlpdb?

Thanks,

Johannes









From preining at logic.at  Sun Jul 22 02:45:23 2018
From: preining at logic.at (Norbert Preining)
Date: Sun, 22 Jul 2018 09:45:23 +0900
Subject: [tex-live] texdoc texlive.tlpdb cache-tlpdb.lua
In-Reply-To: <9af8c4deb5f3254fa52e505c4fa7403e@schoepfer.info>
References: <9af8c4deb5f3254fa52e505c4fa7403e@schoepfer.info>
Message-ID: <F2A68DF0-083E-46A4-B84E-96C11E00DF9F@logic.at>

does
  export TEXMFROOT=/usr/share
Help?


On July 22, 2018 8:59:43 AM GMT+09:00, texlive at schoepfer.info wrote:
>Hi,
>
>on my selfcompiled texlive2018 on linux i get
>
>$ texdoc texdoc
>[string "/usr/share/texmf-dist/scripts/texdoc/search.t..."]:569: 
>assertion failed!
>
>It works after putting texlive.tlpdb in /tlpkg.
>It keeps working after
>rm /tlpkg/texlive.tlpdb
>touch /tlpkg/texlive.tlpdb
>
>Where can i tell texdoc to look in /usr/share/texmf-dist/tlpkg for 
>texlive.tlpdb?
>But even more i'd like to avoid having texlive.tlpdb shipped when 
>packaging, is there a "direct" way to generate
>texmf-var/texdoc/cache-tlpdb.lua
>with a /custom/path/texlive.tlpdb?
>
>Thanks,
>
>Johannes


--
PREINING Norbert http://www.preining.info
Accelia Inc. + JAIST + TeX Live + Debian Developer
GPG: 0x860CDC13 fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From tkt.asakura at gmail.com  Sun Jul 22 05:29:22 2018
From: tkt.asakura at gmail.com (Takuto ASAKURA)
Date: Sun, 22 Jul 2018 12:29:22 +0900
Subject: [tex-live] texdoc texlive.tlpdb cache-tlpdb.lua
In-Reply-To: <F2A68DF0-083E-46A4-B84E-96C11E00DF9F@logic.at>
References: <9af8c4deb5f3254fa52e505c4fa7403e@schoepfer.info>
 <F2A68DF0-083E-46A4-B84E-96C11E00DF9F@logic.at>
Message-ID: <5113ABAF-4945-4FBE-8C5A-7F39BB8779AB@gmail.com>


Hi Johannes,

I'm afraid there's no sophisticated way to do that except setting the
environment variable, like Norbert is saying, at this point.

JFYI, copying texmf-var/texdoc/cache-tlpdb.lua to
texmf-dist/scripts/texdoc/Data.tlpdb.lua, which is the official way to
activate Texdoc without shipping texlive.tlpdb, is supported by the
build script.

* Please reference the "Generating a pre-hashed cache file" section in
  the README file (https://github.com/TeX-Live/texdoc)

We can add an optional argument to specify /custom/path/texlive.tlpdb
for the task "rake gen_datafile", if it is desirable.

Best,
Takuto

> On 2018/07/22, at 9:45, Norbert Preining <preining at logic.at> wrote:
> 
> does
>  export TEXMFROOT=/usr/share
> Help?
> 
> 
> On July 22, 2018 8:59:43 AM GMT+09:00, texlive at schoepfer.info wrote:
>> Hi,
>> 
>> on my selfcompiled texlive2018 on linux i get
>> 
>> $ texdoc texdoc
>> [string "/usr/share/texmf-dist/scripts/texdoc/search.t..."]:569: 
>> assertion failed!
>> 
>> It works after putting texlive.tlpdb in /tlpkg.
>> It keeps working after
>> rm /tlpkg/texlive.tlpdb
>> touch /tlpkg/texlive.tlpdb
>> 
>> Where can i tell texdoc to look in /usr/share/texmf-dist/tlpkg for 
>> texlive.tlpdb?
>> But even more i'd like to avoid having texlive.tlpdb shipped when 
>> packaging, is there a "direct" way to generate
>> texmf-var/texdoc/cache-tlpdb.lua
>> with a /custom/path/texlive.tlpdb?
>> 
>> Thanks,
>> 
>> Johannes
> 
> 
> --
> PREINING Norbert http://www.preining.info
> Accelia Inc. + JAIST + TeX Live + Debian Developer
> GPG: 0x860CDC13 fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
> 


From texlive at schoepfer.info  Sun Jul 22 08:41:29 2018
From: texlive at schoepfer.info (texlive at schoepfer.info)
Date: Sun, 22 Jul 2018 08:41:29 +0200
Subject: [tex-live] texdoc texlive.tlpdb cache-tlpdb.lua
In-Reply-To: <5113ABAF-4945-4FBE-8C5A-7F39BB8779AB@gmail.com>
References: <9af8c4deb5f3254fa52e505c4fa7403e@schoepfer.info>
 <F2A68DF0-083E-46A4-B84E-96C11E00DF9F@logic.at>
 <5113ABAF-4945-4FBE-8C5A-7F39BB8779AB@gmail.com>
Message-ID: <dc7780cdcd81294b0954dea1c52d7fca@schoepfer.info>

Hi Takuto,

> I'm afraid there's no sophisticated way to do that except setting the
> environment variable, like Norbert is saying, at this point.
> 
> JFYI, copying texmf-var/texdoc/cache-tlpdb.lua to
> texmf-dist/scripts/texdoc/Data.tlpdb.lua, which is the official way to
> activate Texdoc without shipping texlive.tlpdb, is supported by the
> build script.

Thanks,
manually copying works, but i still need to keep 
/tlpkg/texlive.tlpdb(after generatig the data, an empty texlive.tlpdb 
also works) which is not good for packaging.

I compile texlive from the official release, but texdoc comes by tlnet 
(no makefile/rakefile), which was no issue with texlive 2017.

What do other package distributors do since texdoc 3.0?

Johannes

From tkt.asakura at gmail.com  Sun Jul 22 09:37:08 2018
From: tkt.asakura at gmail.com (Takuto ASAKURA)
Date: Sun, 22 Jul 2018 16:37:08 +0900
Subject: [tex-live] texdoc texlive.tlpdb cache-tlpdb.lua
In-Reply-To: <dc7780cdcd81294b0954dea1c52d7fca@schoepfer.info>
References: <9af8c4deb5f3254fa52e505c4fa7403e@schoepfer.info>
 <F2A68DF0-083E-46A4-B84E-96C11E00DF9F@logic.at>
 <5113ABAF-4945-4FBE-8C5A-7F39BB8779AB@gmail.com>
 <dc7780cdcd81294b0954dea1c52d7fca@schoepfer.info>
Message-ID: <84469D06-4521-4693-BBE5-F7F7FD117E77@gmail.com>


Hi Johannes,

under the condition:

1. Data.tlpdb.lua exists in the appropriate location
   (please be aware of the file name; it's not cache-tlpdb.lua)
2. /tlpkg/texlive.tlpdb does not exist
   (even empty texlive.tlpdb is not necessary)

Texdoc should be work fine. Running `texdoc -dtlpdb foo` with
the above condition, Texdoc will show

	texdoc debug-tlpdb: Using shipped tlpdb data.

If the message appear but Texdoc still does not work, maybe something
is wrong with the condition 1.

Thanks,
Takuto

> On 2018/07/22, at 15:41, texlive at schoepfer.info wrote:
> 
> Hi Takuto,
> 
>> I'm afraid there's no sophisticated way to do that except setting the
>> environment variable, like Norbert is saying, at this point.
>> JFYI, copying texmf-var/texdoc/cache-tlpdb.lua to
>> texmf-dist/scripts/texdoc/Data.tlpdb.lua, which is the official way to
>> activate Texdoc without shipping texlive.tlpdb, is supported by the
>> build script.
> 
> Thanks,
> manually copying works, but i still need to keep /tlpkg/texlive.tlpdb(after generatig the data, an empty texlive.tlpdb also works) which is not good for packaging.
> 
> I compile texlive from the official release, but texdoc comes by tlnet (no makefile/rakefile), which was no issue with texlive 2017.
> 
> What do other package distributors do since texdoc 3.0?
> 
> Johannes



From texlive at schoepfer.info  Sun Jul 22 10:10:52 2018
From: texlive at schoepfer.info (texlive at schoepfer.info)
Date: Sun, 22 Jul 2018 10:10:52 +0200
Subject: [tex-live] texdoc texlive.tlpdb cache-tlpdb.lua
In-Reply-To: <84469D06-4521-4693-BBE5-F7F7FD117E77@gmail.com>
References: <9af8c4deb5f3254fa52e505c4fa7403e@schoepfer.info>
 <F2A68DF0-083E-46A4-B84E-96C11E00DF9F@logic.at>
 <5113ABAF-4945-4FBE-8C5A-7F39BB8779AB@gmail.com>
 <dc7780cdcd81294b0954dea1c52d7fca@schoepfer.info>
 <84469D06-4521-4693-BBE5-F7F7FD117E77@gmail.com>
Message-ID: <06db7bc8bbc4e82d65a4860f2fed32b6@schoepfer.info>

> under the condition:
> 
> 1. Data.tlpdb.lua exists in the appropriate location
>    (please be aware of the file name; it's not cache-tlpdb.lua)
> 2. /tlpkg/texlive.tlpdb does not exist
>    (even empty texlive.tlpdb is not necessary)
> 
> Texdoc should be work fine. Running `texdoc -dtlpdb foo` with
> the above condition, Texdoc will show
> 
> 	texdoc debug-tlpdb: Using shipped tlpdb data.

Indeed, i forget mktexlsr after adding Data.tlpdb.lua.

Thank you very much!

Johannes

From texlive at schoepfer.info  Mon Jul 23 17:47:05 2018
From: texlive at schoepfer.info (texlive at schoepfer.info)
Date: Mon, 23 Jul 2018 17:47:05 +0200
Subject: [tex-live] synctex_version.h
Message-ID: <de9d9c0ed37f504454425d5513aca683@schoepfer.info>

Hi,

the synctex-github-site doesn't provide Makefiles, so im posting here:

I had to apply the attached patch to have synctex_version.h available.
synctex_parser.h and synctex_parser_utils.h include synctex_version.h,
without this patch other projects fail to build if using these headers.

Johannes
-------------- next part --------------
A non-text attachment was scrubbed...
Name: synctex-missing-header.patch
Type: text/x-diff
Size: 751 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20180723/bd0bb6f4/attachment.bin>

From kakuto at fuk.kindai.ac.jp  Mon Jul 23 23:56:20 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Tue, 24 Jul 2018 06:56:20 +0900
Subject: [tex-live] synctex_version.h
In-Reply-To: <de9d9c0ed37f504454425d5513aca683@schoepfer.info>
References: <de9d9c0ed37f504454425d5513aca683@schoepfer.info>
Message-ID: <82D4E8CEEFDF44428D2338E9DB543135@CJ3001517A>

Dear Johannes,

> I had to apply the attached patch to have synctex_version.h available.

Thanks. Applied in r48260 in the TeX Live SVN.

Best,
Akira


From preining at logic.at  Tue Jul 24 01:13:19 2018
From: preining at logic.at (Norbert Preining)
Date: Tue, 24 Jul 2018 08:13:19 +0900
Subject: [tex-live] synctex_version.h
In-Reply-To: <de9d9c0ed37f504454425d5513aca683@schoepfer.info>
References: <de9d9c0ed37f504454425d5513aca683@schoepfer.info>
Message-ID: <20180723231319.GA31116@bulldog.preining.info>

Hi

> I had to apply the attached patch to have synctex_version.h available.

I think I posted about this already quite some time ago. Yes, that needs
fixing.

In addition, I *STRONGLY* recommend to bump the API level, because the
version in TL2018 changes *considerable*, and updating the libsynctex
library will make all packages depending on it fail!

--- texlive-bin.orig/texk/web2c/synctexdir/ac/synctex.ac
+++ texlive-bin/texk/web2c/synctexdir/ac/synctex.ac
@@ -5,7 +5,7 @@
 dnl
 dnl Additional code for synctex
 dnl
-m4_define([synctex_version], m4_chomp(m4_include([synctexdir/synctex_parser_version.txt]))[.0])
+m4_define([synctex_version], m4_chomp(m4_include([synctexdir/synctex_parser_api_level]))[.0])
 AC_SUBST([SYNCTEXVERSION], [synctex_version])
 KPSE_LT_VERSION([synctex])


See
https://github.com/jlaurens/synctex/issues/23
https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=895980

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From werner at suse.de  Wed Jul 25 09:07:21 2018
From: werner at suse.de (Dr. Werner Fink)
Date: Wed, 25 Jul 2018 09:07:21 +0200
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
Message-ID: <20180725070721.GA10615@boole.suse.de>

Hi,

I've several reports about not working UTF-8 characters in file names.

That is

  pdflatex Die?bung.tex

works but

  pdflatex -file-line-error -interaction=nonstopmode "\input Die?bung.tex"

does not.  As the last line is common used by texi tools and also by
GNU Emacs AucTex this cause bug reports.  How to (re)enable high bit and
multi byte character support in the (pdf)(La)Tex engines?  As on older
TeXLive installation this works flawless.

Werner

-- 
  "Having a smoking section in a restaurant is like having
          a peeing section in a swimming pool." -- Edward Burr
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 880 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20180725/9b1458d5/attachment.sig>

From P.Taylor at Rhul.Ac.Uk  Wed Jul 25 09:22:01 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Wed, 25 Jul 2018 08:22:01 +0100
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <20180725070721.GA10615@boole.suse.de>
References: <20180725070721.GA10615@boole.suse.de>
Message-ID: <c7ac7162-ad3b-eb7c-0ba4-e5efa59eb8b5@Rhul.Ac.Uk>

I am very surprised to learn that it worked in earlier release (I will test later); here PdfLaTeX performs exactly as I would have expected when presented with non-ASCII input :

> X:\>pdflatex
> This is pdfTeX, Version 3.14159265-2.6-1.40.19 (TeX Live 2018/W32TeX) (preloaded format=pdflatex)
> **\input Die?bung.tex
> entering extended mode
> LaTeX2e <2018-04-01> patch level 5
> ! I can't find file `Die'.
> <to be read again>
> ?????????????????? \protect
> <*> \input Die?
> ?????????????? bung.tex
> (Press Enter to retry, or Control-Z to exit)
> Please type another input file name: ^Z
>
> ! Emergency stop.
> <to be read again>
> ?????????????????? \protect
> <*> \input Die?
> ?????????????? bung.tex
> !? ==> Fatal error occurred, no output PDF file produced!
> Transcript written on texput.log.
>
> X:\>pdflatex
> This is pdfTeX, Version 3.14159265-2.6-1.40.19 (TeX Live 2018/W32TeX) (preloaded format=pdflatex)
> **\catcode `\? = \catcode `\a
> entering extended mode
> LaTeX2e <2018-04-01> patch level 5
>
> *\input \input Die?bung.tex
> (d:/TeX/Live/2018/texmf-dist/tex/latex/tools/.tex File ignored)
> ! I can't find file `Die?bung.tex'.
> <*> \input \input Die?bung.tex
>
> (Press Enter to retry, or Control-Z to exit)
> Please type another input file name: ^Z
>
> ! Emergency stop.
> <*> \input \input Die?bung.tex
>
> !? ==> Fatal error occurred, no output PDF file produced!
> Transcript written on texput.log.
>
> X:\>


Dr. Werner Fink wrote:
> Hi,
>
> I've several reports about not working UTF-8 characters in file names.
>
> That is
>
>   pdflatex Die?bung.tex
>
> works but
>
>   pdflatex -file-line-error -interaction=nonstopmode "\input Die?bung.tex"
>
> does not.  As the last line is common used by texi tools and also by
> GNU Emacs AucTex this cause bug reports.  How to (re)enable high bit and
> multi byte character support in the (pdf)(La)Tex engines?  As on older
> TeXLive installation this works flawless.
>
> Werner
>

-- 
<Signature>
Philip Taylor

From P.Taylor at Rhul.Ac.Uk  Wed Jul 25 09:25:49 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Wed, 25 Jul 2018 08:25:49 +0100
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <c7ac7162-ad3b-eb7c-0ba4-e5efa59eb8b5@Rhul.Ac.Uk>
References: <20180725070721.GA10615@boole.suse.de>
 <c7ac7162-ad3b-eb7c-0ba4-e5efa59eb8b5@Rhul.Ac.Uk>
Message-ID: <4c4a330a-38e5-b94c-5223-d3ec82856db8@Rhul.Ac.Uk>



Philip Taylor wrote:
> I am very surprised to learn that it worked in earlier release ...
However, for 2017 at least, I can confirm that it did :

> Y:\>pdflatex
> This is pdfTeX, Version 3.14159265-2.6-1.40.18 (TeX Live 2017/W32TeX) (preloaded format=pdflatex)
> ?restricted \write18 enabled.
> **\input Die?bung.tex
> entering extended mode
> LaTeX2e <2017-04-15>
> Babel <3.9r> and hyphenation patterns for 83 language(s) loaded.
> ! I can't find file `Die?bung.tex'.
> <*> \input Die?bung.tex
>
> (Press Enter to retry, or Control-Z to exit)
> Please type another input file name: ^Z
>
> ! Emergency stop.
> <*> \input Die?bung.tex
>
> !? ==> Fatal error occurred, no output PDF file produced!
> Transcript written on texput.log.
>
> Y:\>


From preining at logic.at  Wed Jul 25 09:44:13 2018
From: preining at logic.at (Norbert Preining)
Date: Wed, 25 Jul 2018 16:44:13 +0900
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <20180725070721.GA10615@boole.suse.de>
References: <20180725070721.GA10615@boole.suse.de>
Message-ID: <20180725074413.GB20342@burischnitzel.preining.info>

Hi

> I've several reports about not working UTF-8 characters in file names.
>   pdflatex -file-line-error -interaction=nonstopmode "\input Die?bung.tex"

I guess this is also a consequence of the recent "minor" change in the LaTeX
kernel about switching to a default of utf8, see ltnews.pdf, Issue 28, p38.

One needs to use
	... "\UseRawInputEncoding \input Die?bung.tex"

With this on my linux it is working.

How would dare to have non-ascii file names ... tststs ;-)

Enjoy.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From jfbu at free.fr  Wed Jul 25 09:48:14 2018
From: jfbu at free.fr (jfbu)
Date: Wed, 25 Jul 2018 09:48:14 +0200
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <20180725070721.GA10615@boole.suse.de>
References: <20180725070721.GA10615@boole.suse.de>
Message-ID: <F7A6A4E3-0C3F-44F0-A7B1-CC02CCD2439C@free.fr>


Le 25 juil. 2018 ? 09:07, Dr. Werner Fink <werner at suse.de> a ?crit :

> That is
> 
>  pdflatex Die?bung.tex
> 
> works but
> 
>  pdflatex -file-line-error -interaction=nonstopmode "\input Die?bung.tex"
> 
> does not.  
> As the last line is common used by texi tools and also by
> GNU Emacs AucTex this cause bug reports.

Hi 

about GNU Emacs AucTeX, 

the dev version has workarounds already incorporated

commit cad042f02e3e919876b474572e6cb375ed551dcb
Author: Ikumi Keita <ikumi at ikumi.que.jp>
Date:   Thu May 31 16:01:59 2018 +0900

    Add note and test about the change involving non-ascii file name
    
    * doc/changes.texi (News in 12.2): Add note that support for standard
    LaTeX without e-TeX extension is now very limited.
    * tests/tex/command-expansion.el (TeX-command-detokenize): New test to
    check whether \input and \detokenize are supplied when necessary.

commit 3b1ffcd8c3387f67fd9be5e1da73d780dffbdd51
Author: Ikumi Keita <ikumi at ikumi.que.jp>
Date:   Mon May 28 14:46:52 2018 +0900

    TL 2018 non-ascii file name fix for preview-latex
    
    * preview.el.in (preview-LaTeX-command): Wrap file name after implicit
    \input in \detokenize{}.
    (preview-cache-preamble): Arrange the ini file code so that non-ascii
    file name can be used with generated format file.  Be careful not to
    lose capability of handling file name with space.
    (preview-undump-replacements): Use new TeX macro defined in the above
    ini file code to accept even unusual file name with non-ascii
    character or space.
    Delegate quoting of format name to `TeX-inline-preview-internal' so
    that non-ascii character will not be quoted twice.
    (TeX-inline-preview-internal): Adjust to the above change.

commit a8ea1273fd95da5702fe95ad3f41d151b621bc72
Author: Ikumi Keita <ikumi at ikumi.que.jp>
Date:   Mon May 28 14:39:26 2018 +0900

    Accept non-ascii file name in accord with change in TL 2018
    
    * tex.el (TeX-expand-list-builtin): Add new entry %T.  Same as %t,
    except to enclose with \detokenize{} for non UTF-8 LaTeX when \input
    is supplmented.
    Adjust the entries %` and %' so that \input is supplemented only when
    any TeX code is present between them and leave the bind to
    `TeX-command-text' for later examination.
    The bind to `TeX-command-pos' is no longer retained.
    (TeX-command-list): Use %T for "LaTeX".
    Adjust "TeX" and "AmSTeX" as the same with "LaTeX" in the aspect that
    user can supply one's own TeX code, as well as any command line
    options, through `TeX-command-extra-options'.
    * tex-buf.el (TeX--master-or-region-file-with-extra-quotes): New
    function to act as a wrapper of `TeX-master-file' and
    `TeX-region-file' inside `TeX-command-expand'.
    (TeX-command-expand): Use the above function as the value of `file'
    and get rid of tricky temporal overriding of `file' with lambda form.
    (TeX-region-create): Make the first line parsing of %&FORMAT
    construct, if any, to be valid even for region compilation.
    Discard text properties when constructing the content of _region_.tex.
    Drop bind check for `buffer-file-coding-system'.
    * tests/tex/command-expansion.el (TeX-command-expansion): Reflect the
    change that \input is not necessarily supplemented now by %`-%' pair
    in `TeX-command-expand'.


Best,
Jean-Fran?ois

From werner at suse.de  Wed Jul 25 10:00:57 2018
From: werner at suse.de (Dr. Werner Fink)
Date: Wed, 25 Jul 2018 10:00:57 +0200
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <20180725074413.GB20342@burischnitzel.preining.info>
References: <20180725070721.GA10615@boole.suse.de>
 <20180725074413.GB20342@burischnitzel.preining.info>
Message-ID: <20180725080057.GA16630@boole.suse.de>

On Wed, Jul 25, 2018 at 04:44:13PM +0900, Norbert Preining wrote:
> Hi
> 
> > I've several reports about not working UTF-8 characters in file names.
> >   pdflatex -file-line-error -interaction=nonstopmode "\input Die?bung.tex"
> 
> I guess this is also a consequence of the recent "minor" change in the LaTeX
> kernel about switching to a default of utf8, see ltnews.pdf, Issue 28, p38.
> 
> One needs to use
> 	... "\UseRawInputEncoding \input Die?bung.tex"
> 
> With this on my linux it is working.
> 
> How would dare to have non-ascii file names ... tststs ;-)

Ohmmm ... strange that switching to utf8 breaks reading files
which are named with utf8 multi byte characters.  I guess that
now utf8 characters are handled/mapped to the correct font
character glyph.

And indeed \UseRawInputEncoding before \input does help. Does
this mean that I've now hack texi2pdf/texi2dvi as well as AucTex?
Or is it possible that the utf8 based engines also can handle
utf8 characters in file names (utf8x)

Werner

-- 
  "Having a smoking section in a restaurant is like having
          a peeing section in a swimming pool." -- Edward Burr
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 880 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20180725/9eb68c1e/attachment.sig>

From preining at logic.at  Wed Jul 25 10:13:28 2018
From: preining at logic.at (Norbert Preining)
Date: Wed, 25 Jul 2018 17:13:28 +0900
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <20180725080057.GA16630@boole.suse.de>
References: <20180725070721.GA10615@boole.suse.de>
 <20180725074413.GB20342@burischnitzel.preining.info>
 <20180725080057.GA16630@boole.suse.de>
Message-ID: <20180725081328.GC20342@burischnitzel.preining.info>

As mentioned in the other email

> > 	... "\UseRawInputEncoding \input Die?bung.tex"

	pdflatex "\input \detokenize{Die?bung.tex}"

also works.

> this mean that I've now hack texi2pdf/texi2dvi as well as AucTex?
> Or is it possible that the utf8 based engines also can handle
> utf8 characters in file names (utf8x)

There are only two ways: try each and every combination, or ask the
LaTeX team (which mostly is on the way from the TUG conference in Rio
back home, so don't expect a quick answer).

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From zdenek.wagner at gmail.com  Wed Jul 25 10:18:39 2018
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 25 Jul 2018 10:18:39 +0200
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <20180725080057.GA16630@boole.suse.de>
References: <20180725070721.GA10615@boole.suse.de>
 <20180725074413.GB20342@burischnitzel.preining.info>
 <20180725080057.GA16630@boole.suse.de>
Message-ID: <CAC1phyY2FBa=xapn8zY5pbfpj5i9_GzUVH-zAWHEqu-ydfYOXw@mail.gmail.com>

2018-07-25 10:00 GMT+02:00 Dr. Werner Fink <werner at suse.de>:

> On Wed, Jul 25, 2018 at 04:44:13PM +0900, Norbert Preining wrote:
> > Hi
> >
> > > I've several reports about not working UTF-8 characters in file names.
> > >   pdflatex -file-line-error -interaction=nonstopmode "\input
> Die?bung.tex"
> >
> > I guess this is also a consequence of the recent "minor" change in the
> LaTeX
> > kernel about switching to a default of utf8, see ltnews.pdf, Issue 28,
> p38.
> >
> > One needs to use
> >       ... "\UseRawInputEncoding \input Die?bung.tex"
> >
> > With this on my linux it is working.
> >
> > How would dare to have non-ascii file names ... tststs ;-)
>
> Ohmmm ... strange that switching to utf8 breaks reading files
> which are named with utf8 multi byte characters.  I guess that
> now utf8 characters are handled/mapped to the correct font
> character glyph.
>

pdflatex is an 8-bit SW, it is not Unicode-aware. It is achieved by active
characters which break a lot of things. Almost all my older files ceased to
work with pdflatex and TL2018 .

>
> And indeed \UseRawInputEncoding before \input does help. Does
> this mean that I've now hack texi2pdf/texi2dvi as well as AucTex?
> Or is it possible that the utf8 based engines also can handle
> utf8 characters in file names (utf8x)
>
> Werner
>



Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz



>
> --
>   "Having a smoking section in a restaurant is like having
>           a peeing section in a swimming pool." -- Edward Burr
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20180725/a43e676f/attachment.html>

From werner at suse.de  Wed Jul 25 10:21:50 2018
From: werner at suse.de (Dr. Werner Fink)
Date: Wed, 25 Jul 2018 10:21:50 +0200
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <F7A6A4E3-0C3F-44F0-A7B1-CC02CCD2439C@free.fr>
References: <20180725070721.GA10615@boole.suse.de>
 <F7A6A4E3-0C3F-44F0-A7B1-CC02CCD2439C@free.fr>
Message-ID: <20180725082150.GB16630@boole.suse.de>

On Wed, Jul 25, 2018 at 09:48:14AM +0200, jfbu wrote:
> 
> Le 25 juil. 2018 ? 09:07, Dr. Werner Fink <werner at suse.de> a ?crit :
> 
> > That is
> > 
> >  pdflatex Die?bung.tex
> > 
> > works but
> > 
> >  pdflatex -file-line-error -interaction=nonstopmode "\input Die?bung.tex"
> > 
> > does not.  
> > As the last line is common used by texi tools and also by
> > GNU Emacs AucTex this cause bug reports.
> 
> Hi 
> 
> about GNU Emacs AucTeX, 
> 
> the dev version has workarounds already incorporated
> 
> commit cad042f02e3e919876b474572e6cb375ed551dcb
> Author: Ikumi Keita <ikumi at ikumi.que.jp>
> Date:   Thu May 31 16:01:59 2018 +0900
> 
>     Add note and test about the change involving non-ascii file name
>     
>     * doc/changes.texi (News in 12.2): Add note that support for standard
>     LaTeX without e-TeX extension is now very limited.
>     * tests/tex/command-expansion.el (TeX-command-detokenize): New test to
>     check whether \input and \detokenize are supplied when necessary.
> 
> commit 3b1ffcd8c3387f67fd9be5e1da73d780dffbdd51
> Author: Ikumi Keita <ikumi at ikumi.que.jp>
> Date:   Mon May 28 14:46:52 2018 +0900
[...]
> 
> commit a8ea1273fd95da5702fe95ad3f41d151b621bc72
> Author: Ikumi Keita <ikumi at ikumi.que.jp>
> Date:   Mon May 28 14:39:26 2018 +0900
[...]

Indeed \detokenize{} is also an option,  I'll go to add these three
commits to AucTeX, Thanks a lot.

Werner

-- 
  "Having a smoking section in a restaurant is like having
          a peeing section in a swimming pool." -- Edward Burr
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 880 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20180725/183cd4df/attachment.sig>

From d.p.carlisle at gmail.com  Wed Jul 25 10:58:27 2018
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Wed, 25 Jul 2018 09:58:27 +0100
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <20180725070721.GA10615@boole.suse.de>
References: <20180725070721.GA10615@boole.suse.de>
Message-ID: <CAEW6iOj5Jn0M3w8htgoAyy+QRYzOpXBgYbFoMYJdQVp63Yrm6Q@mail.gmail.com>

On 25 July 2018 at 08:07, Dr. Werner Fink <werner at suse.de> wrote:
> Hi,
>
> I've several reports about not working UTF-8 characters in file names.
>
> That is
>
>   pdflatex Die?bung.tex
>
> works but
>
>   pdflatex -file-line-error -interaction=nonstopmode "\input Die?bung.tex"
>
> does not.  As the last line is common used by texi tools and also by
> GNU Emacs AucTex this cause bug reports.  How to (re)enable high bit and
> multi byte character support in the (pdf)(La)Tex engines?  As on older
> TeXLive installation this works flawless.


pdflatex -file-line-error -interaction=nonstopmode "\input
\detokenize{Die?bung.tex}"

would work, and recent releases of auctex have been updated to work
with such files.

It's possible that we can make

pdflatex -file-line-error -interaction=nonstopmode "\input {Die?bung.tex}"

with the braced form work but the primitive unbraced \input is very
hard to catch.

>
> Werner
>
> --
>   "Having a smoking section in a restaurant is like having
>           a peeing section in a swimming pool." -- Edward Burr
David


From d.p.carlisle at gmail.com  Wed Jul 25 11:00:31 2018
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Wed, 25 Jul 2018 10:00:31 +0100
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <20180725080057.GA16630@boole.suse.de>
References: <20180725070721.GA10615@boole.suse.de>
 <20180725074413.GB20342@burischnitzel.preining.info>
 <20180725080057.GA16630@boole.suse.de>
Message-ID: <CAEW6iOia9UDF9PM3XoNa9KLARsSPmVi4LaJbnFN-mvbjA1b8iQ@mail.gmail.com>

On 25 July 2018 at 09:00, Dr. Werner Fink <werner at suse.de> wrote:
> On Wed, Jul 25, 2018 at 04:44:13PM +0900, Norbert Preining wrote:
>> Hi
>>
>> > I've several reports about not working UTF-8 characters in file names.
>> >   pdflatex -file-line-error -interaction=nonstopmode "\input Die?bung.tex"
>>
>> I guess this is also a consequence of the recent "minor" change in the LaTeX
>> kernel about switching to a default of utf8, see ltnews.pdf, Issue 28, p38.
>>
>> One needs to use
>>       ... "\UseRawInputEncoding \input Die?bung.tex"
>>
>> With this on my linux it is working.
>>
>> How would dare to have non-ascii file names ... tststs ;-)
>
> Ohmmm ... strange that switching to utf8 breaks reading files
> which are named with utf8 multi byte characters.  I guess that
> now utf8 characters are handled/mapped to the correct font
> character glyph.
>
> And indeed \UseRawInputEncoding before \input does help.

No don'd do that. that changes teh interpretation of teh file
_contents_ as well as teh name, use \detokenize.




> Does
> this mean that I've now hack texi2pdf/texi2dvi as well as AucTex?

no it is only the tex macro layer that is affected.

> Or is it possible that the utf8 based engines also can handle
> utf8 characters in file names (utf8x)
>
> Werner
>
> --
>   "Having a smoking section in a restaurant is like having
>           a peeing section in a swimming pool." -- Edward Burr


From d.p.carlisle at gmail.com  Wed Jul 25 11:36:30 2018
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Wed, 25 Jul 2018 10:36:30 +0100
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <CAC1phyY2FBa=xapn8zY5pbfpj5i9_GzUVH-zAWHEqu-ydfYOXw@mail.gmail.com>
References: <20180725070721.GA10615@boole.suse.de>
 <20180725074413.GB20342@burischnitzel.preining.info>
 <20180725080057.GA16630@boole.suse.de>
 <CAC1phyY2FBa=xapn8zY5pbfpj5i9_GzUVH-zAWHEqu-ydfYOXw@mail.gmail.com>
Message-ID: <CAEW6iOhNbcysHMQqU_bbLq+ZSORxe0ygiSj-UnStffE12JEr3A@mail.gmail.com>

On 25 July 2018 at 09:18, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:

>
> pdflatex is an 8-bit SW, it is not Unicode-aware. It is achieved by active
> characters which break a lot of things. Almost all my older files ceased to
> work with pdflatex and TL2018 .
>>

That's very surprising, you could have reported at least one to the team!

Since the release I have only seen one report of a user file that
generated an error
(and that was silently mos-interpreting non ascii input in older
releases so the error wasn#t really a bad thing)

If you have an example of a conforming document that failed to work
after the 2018 release let us know
at the very least we can add to the documentation to say what to do,
if that is not covered by the existing documentation.


David

From zdenek.wagner at gmail.com  Wed Jul 25 11:51:42 2018
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 25 Jul 2018 11:51:42 +0200
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <CAEW6iOhNbcysHMQqU_bbLq+ZSORxe0ygiSj-UnStffE12JEr3A@mail.gmail.com>
References: <20180725070721.GA10615@boole.suse.de>
 <20180725074413.GB20342@burischnitzel.preining.info>
 <20180725080057.GA16630@boole.suse.de>
 <CAC1phyY2FBa=xapn8zY5pbfpj5i9_GzUVH-zAWHEqu-ydfYOXw@mail.gmail.com>
 <CAEW6iOhNbcysHMQqU_bbLq+ZSORxe0ygiSj-UnStffE12JEr3A@mail.gmail.com>
Message-ID: <CAC1phyYPESQ7GC2vW89AD8+poPjxqh9cLRCs8HWdfGiF=ftvdg@mail.gmail.com>

Hi all,

I was too busy with my own work so that I almost have not tested TL 2018. I
found that my LaTeX documents do not work and since I have all releases
starting at 2014, I have just switched back and had no time to examine it
further.

Now I probably know the reason. I often use constructions as
\futurelet\next\dosomething or \everypar{\setinitial} with
\def\setinitial#1{... do something with the first character ...}. For these
macros everything must be a character with category 11 or 12, not an active
character. The inputenc package in case of UTF8 will give me just a part of
the character. For this reason I use encTeX where active characters are not
needed. As I am thinking about it just now, it seems to be easily solvable.
The encoding files for encTeX can start with \csname
UseRawInputEncoding\endcsname which will revert the encoding for new LaTeX
and insert harmless \relax in all other cases. The same encTeX files are
also used in the plain TeX so \csname seems to me as most portable.


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2018-07-25 11:36 GMT+02:00 David Carlisle <d.p.carlisle at gmail.com>:

> On 25 July 2018 at 09:18, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
>
> >
> > pdflatex is an 8-bit SW, it is not Unicode-aware. It is achieved by
> active
> > characters which break a lot of things. Almost all my older files ceased
> to
> > work with pdflatex and TL2018 .
> >>
>
> That's very surprising, you could have reported at least one to the team!
>
> Since the release I have only seen one report of a user file that
> generated an error
> (and that was silently mos-interpreting non ascii input in older
> releases so the error wasn#t really a bad thing)
>
> If you have an example of a conforming document that failed to work
> after the 2018 release let us know
> at the very least we can add to the documentation to say what to do,
> if that is not covered by the existing documentation.
>
>
> David
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20180725/eb826e2a/attachment.html>

From d.p.carlisle at gmail.com  Wed Jul 25 12:26:01 2018
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Wed, 25 Jul 2018 11:26:01 +0100
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <CAC1phyYPESQ7GC2vW89AD8+poPjxqh9cLRCs8HWdfGiF=ftvdg@mail.gmail.com>
References: <20180725070721.GA10615@boole.suse.de>
 <20180725074413.GB20342@burischnitzel.preining.info>
 <20180725080057.GA16630@boole.suse.de>
 <CAC1phyY2FBa=xapn8zY5pbfpj5i9_GzUVH-zAWHEqu-ydfYOXw@mail.gmail.com>
 <CAEW6iOhNbcysHMQqU_bbLq+ZSORxe0ygiSj-UnStffE12JEr3A@mail.gmail.com>
 <CAC1phyYPESQ7GC2vW89AD8+poPjxqh9cLRCs8HWdfGiF=ftvdg@mail.gmail.com>
Message-ID: <CAEW6iOg3PnwrKgkCCQxDit7W6vBCXLiuS=s0rYCvrjDOLKrx_g@mail.gmail.com>

hmm for all variants that I can detect are using things incompatible
with inputenc it is not preloaded



% Skip this section in Unicode TeX, or if  MLTeX and EncTeX are enabled.
%    \begin{macrocode}
\ifnum0%
  \ifx\Umathchar\@undefined\else 1\fi
  \ifx\mubyte\@undefined\else 1\fi
  \ifx\charsubdef\@undefined\else 1\fi
  =\z@


so in a format built with enctex there should be no change in the 2018
release (or that's a bug, sorry)

David


On 25 July 2018 at 10:51, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
> Hi all,
>
> I was too busy with my own work so that I almost have not tested TL 2018. I
> found that my LaTeX documents do not work and since I have all releases
> starting at 2014, I have just switched back and had no time to examine it
> further.
>
> Now I probably know the reason. I often use constructions as
> \futurelet\next\dosomething or \everypar{\setinitial} with
> \def\setinitial#1{... do something with the first character ...}. For these
> macros everything must be a character with category 11 or 12, not an active
> character. The inputenc package in case of UTF8 will give me just a part of
> the character. For this reason I use encTeX where active characters are not
> needed. As I am thinking about it just now, it seems to be easily solvable.
> The encoding files for encTeX can start with \csname
> UseRawInputEncoding\endcsname which will revert the encoding for new LaTeX
> and insert harmless \relax in all other cases. The same encTeX files are
> also used in the plain TeX so \csname seems to me as most portable.
>
>
> Zden?k Wagner
> http://ttsm.icpf.cas.cz/team/wagner.shtml
> http://icebearsoft.euweb.cz
>
> 2018-07-25 11:36 GMT+02:00 David Carlisle <d.p.carlisle at gmail.com>:
>>
>> On 25 July 2018 at 09:18, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
>>
>> >
>> > pdflatex is an 8-bit SW, it is not Unicode-aware. It is achieved by
>> > active
>> > characters which break a lot of things. Almost all my older files ceased
>> > to
>> > work with pdflatex and TL2018 .
>> >>
>>
>> That's very surprising, you could have reported at least one to the team!
>>
>> Since the release I have only seen one report of a user file that
>> generated an error
>> (and that was silently mos-interpreting non ascii input in older
>> releases so the error wasn#t really a bad thing)
>>
>> If you have an example of a conforming document that failed to work
>> after the 2018 release let us know
>> at the very least we can add to the documentation to say what to do,
>> if that is not covered by the existing documentation.
>>
>>
>> David
>
>


From zdenek.wagner at gmail.com  Wed Jul 25 12:39:27 2018
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 25 Jul 2018 12:39:27 +0200
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <CAEW6iOg3PnwrKgkCCQxDit7W6vBCXLiuS=s0rYCvrjDOLKrx_g@mail.gmail.com>
References: <20180725070721.GA10615@boole.suse.de>
 <20180725074413.GB20342@burischnitzel.preining.info>
 <20180725080057.GA16630@boole.suse.de>
 <CAC1phyY2FBa=xapn8zY5pbfpj5i9_GzUVH-zAWHEqu-ydfYOXw@mail.gmail.com>
 <CAEW6iOhNbcysHMQqU_bbLq+ZSORxe0ygiSj-UnStffE12JEr3A@mail.gmail.com>
 <CAC1phyYPESQ7GC2vW89AD8+poPjxqh9cLRCs8HWdfGiF=ftvdg@mail.gmail.com>
 <CAEW6iOg3PnwrKgkCCQxDit7W6vBCXLiuS=s0rYCvrjDOLKrx_g@mail.gmail.com>
Message-ID: <CAC1phyYpr0dGXmRV4tGFBn_riRDb6J7QWpi7gpgy2K_r=17Jzg@mail.gmail.com>

Anyway, as I wrote, I had no time to test it and I will have no time at
least to the end of September.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2018-07-25 12:26 GMT+02:00 David Carlisle <d.p.carlisle at gmail.com>:

> hmm for all variants that I can detect are using things incompatible
> with inputenc it is not preloaded
>
>
>
> % Skip this section in Unicode TeX, or if  MLTeX and EncTeX are enabled.
> %    \begin{macrocode}
> \ifnum0%
>   \ifx\Umathchar\@undefined\else 1\fi
>   \ifx\mubyte\@undefined\else 1\fi
>   \ifx\charsubdef\@undefined\else 1\fi
>   =\z@
>
>
> so in a format built with enctex there should be no change in the 2018
> release (or that's a bug, sorry)
>
> David
>
>
> On 25 July 2018 at 10:51, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
> > Hi all,
> >
> > I was too busy with my own work so that I almost have not tested TL
> 2018. I
> > found that my LaTeX documents do not work and since I have all releases
> > starting at 2014, I have just switched back and had no time to examine it
> > further.
> >
> > Now I probably know the reason. I often use constructions as
> > \futurelet\next\dosomething or \everypar{\setinitial} with
> > \def\setinitial#1{... do something with the first character ...}. For
> these
> > macros everything must be a character with category 11 or 12, not an
> active
> > character. The inputenc package in case of UTF8 will give me just a part
> of
> > the character. For this reason I use encTeX where active characters are
> not
> > needed. As I am thinking about it just now, it seems to be easily
> solvable.
> > The encoding files for encTeX can start with \csname
> > UseRawInputEncoding\endcsname which will revert the encoding for new
> LaTeX
> > and insert harmless \relax in all other cases. The same encTeX files are
> > also used in the plain TeX so \csname seems to me as most portable.
> >
> >
> > Zden?k Wagner
> > http://ttsm.icpf.cas.cz/team/wagner.shtml
> > http://icebearsoft.euweb.cz
> >
> > 2018-07-25 11:36 GMT+02:00 David Carlisle <d.p.carlisle at gmail.com>:
> >>
> >> On 25 July 2018 at 09:18, Zdenek Wagner <zdenek.wagner at gmail.com>
> wrote:
> >>
> >> >
> >> > pdflatex is an 8-bit SW, it is not Unicode-aware. It is achieved by
> >> > active
> >> > characters which break a lot of things. Almost all my older files
> ceased
> >> > to
> >> > work with pdflatex and TL2018 .
> >> >>
> >>
> >> That's very surprising, you could have reported at least one to the
> team!
> >>
> >> Since the release I have only seen one report of a user file that
> >> generated an error
> >> (and that was silently mos-interpreting non ascii input in older
> >> releases so the error wasn#t really a bad thing)
> >>
> >> If you have an example of a conforming document that failed to work
> >> after the 2018 release let us know
> >> at the very least we can add to the documentation to say what to do,
> >> if that is not covered by the existing documentation.
> >>
> >>
> >> David
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20180725/2caa10f4/attachment.html>

From jfbu at free.fr  Wed Jul 25 13:46:21 2018
From: jfbu at free.fr (jfbu)
Date: Wed, 25 Jul 2018 13:46:21 +0200
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <20180725082150.GB16630@boole.suse.de>
References: <20180725070721.GA10615@boole.suse.de>
 <F7A6A4E3-0C3F-44F0-A7B1-CC02CCD2439C@free.fr>
 <20180725082150.GB16630@boole.suse.de>
Message-ID: <BECD2E97-9BCC-414F-A165-B15F4069E925@free.fr>


Le 25 juil. 2018 ? 10:21, Dr. Werner Fink <werner at suse.de> a ?crit :

> On Wed, Jul 25, 2018 at 09:48:14AM +0200, jfbu wrote:
>> 
>> Le 25 juil. 2018 ? 09:07, Dr. Werner Fink <werner at suse.de> a ?crit :
>> 
>>> That is
>>> 
>>> pdflatex Die?bung.tex
>>> 
>>> works but
>>> 
>>> pdflatex -file-line-error -interaction=nonstopmode "\input Die?bung.tex"
>>> 
>>> does not.  
>>> As the last line is common used by texi tools and also by
>>> GNU Emacs AucTex this cause bug reports.
>> 
>> Hi 
>> 
>> about GNU Emacs AucTeX, 
>> 
>> the dev version has workarounds already incorporated
>> 
>> commit cad042f02e3e919876b474572e6cb375ed551dcb
>> Author: Ikumi Keita <ikumi at ikumi.que.jp>
>> Date:   Thu May 31 16:01:59 2018 +0900
>> 
>>    Add note and test about the change involving non-ascii file name
>> 
>>    * doc/changes.texi (News in 12.2): Add note that support for standard
>>    LaTeX without e-TeX extension is now very limited.
>>    * tests/tex/command-expansion.el (TeX-command-detokenize): New test to
>>    check whether \input and \detokenize are supplied when necessary.
>> 
>> commit 3b1ffcd8c3387f67fd9be5e1da73d780dffbdd51
>> Author: Ikumi Keita <ikumi at ikumi.que.jp>
>> Date:   Mon May 28 14:46:52 2018 +0900
> [...]
>> 
>> commit a8ea1273fd95da5702fe95ad3f41d151b621bc72
>> Author: Ikumi Keita <ikumi at ikumi.que.jp>
>> Date:   Mon May 28 14:39:26 2018 +0900
> [...]
> 
> Indeed \detokenize{} is also an option,  I'll go to add these three
> commits to AucTeX, Thanks a lot.
> 

Hi Werner

if you have a custom TeX-command-list you might need
to make modifications based upon what one sees in the
new default TeX-command-list,

if you did not customize TeX-command-list before,
then it should be ok

there were changes related to Preview too,
beware that AUCTeX dev repo has a preview.el.in
which becomes preview.el in distributed releases
so the git diff will not apply as is to your (presumably)
ELPA installed AUCTeX, but what can edit manually
the patch

(I am a bit vague and can't check details now)

Best,

Jean-Fran?ois



From jfbu at free.fr  Wed Jul 25 14:25:39 2018
From: jfbu at free.fr (jfbu)
Date: Wed, 25 Jul 2018 14:25:39 +0200
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <BECD2E97-9BCC-414F-A165-B15F4069E925@free.fr>
References: <20180725070721.GA10615@boole.suse.de>
 <F7A6A4E3-0C3F-44F0-A7B1-CC02CCD2439C@free.fr>
 <20180725082150.GB16630@boole.suse.de>
 <BECD2E97-9BCC-414F-A165-B15F4069E925@free.fr>
Message-ID: <3F0B6005-0ACC-46C3-BD7E-E38FCAACDC5D@free.fr>


Le 25 juil. 2018 ? 13:46, jfbu <jfbu at free.fr> a ?crit :

> ELPA installed AUCTeX, but what can edit manually
> the patch

I meant "one can edit manually"

> 
> (I am a bit vague and can't check details now)

Best wishes,

Jean-Fran?ois

From ttk at t-lab.opal.ne.jp  Wed Jul 25 16:35:20 2018
From: ttk at t-lab.opal.ne.jp (TANAKA Takuji)
Date: Wed, 25 Jul 2018 23:35:20 +0900
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <20180725070721.GA10615@boole.suse.de>
References: <20180725070721.GA10615@boole.suse.de>
Message-ID: <ecfbe219-dc15-0129-bd70-7774a5a3203b@t-lab.opal.ne.jp>

Hi,

In TeX Live 2018/W32TeX,
Akira-san and I have implemented a function which treat UTF-8 on the console of Windows.
If you set a option "command_line_encoding=utf-8" in your texmf.cnf,
current version (since 2018/06/11) will accept utf-8 strings.
I expect following examples will work:

     pdflatex Die?bung.tex

and

     pdflatex -file-line-error -interaction=nonstopmode "\input{\detokenize{Die?bung.tex}}"


In my environment (W32TeX, LaTeX2e <2018-04-01> patch level 5),
the following test case runs correctly.

=====
% -*- coding: utf-8 -*-
\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}

\begin{document}
Happy \TeX-ing!!

\typeout{\detokenize{Sch?n}}

%%%
%%% locale: UTF-8
%%% ? : U+00F6, UTF-8 0xC3 0xB6
\input{\detokenize{sch?n.tex}}
%\include{\detokenize{sch?n}}%  Files sch?n.tex, sch?n.aux must be read. However, it fails to read *.aux.
\includegraphics[width=30mm,bb=0 0 550 568]{\detokenize{sch?n.jpg}}
\includegraphics[width=30mm,bb=0 0 550 568]{\detokenize{sch?n.png}}
\includegraphics[width=30mm,bb=0 0 550 568]{\detokenize{sch?n.pdf}}

\end{document}
=====

Best,
Takuji Tanaka

On 2018/07/25 16:07, Dr. Werner Fink wrote:
> Hi,
> 
> I've several reports about not working UTF-8 characters in file names.
> 
> That is
> 
>    pdflatex Die?bung.tex
> 
> works but
> 
>    pdflatex -file-line-error -interaction=nonstopmode "\input Die?bung.tex"
> 
> does not.  As the last line is common used by texi tools and also by
> GNU Emacs AucTex this cause bug reports.  How to (re)enable high bit and
> multi byte character support in the (pdf)(La)Tex engines?  As on older
> TeXLive installation this works flawless.
> 
> Werner
> 


From d.p.carlisle at gmail.com  Wed Jul 25 16:51:53 2018
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Wed, 25 Jul 2018 15:51:53 +0100
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <ecfbe219-dc15-0129-bd70-7774a5a3203b@t-lab.opal.ne.jp>
References: <20180725070721.GA10615@boole.suse.de>
 <ecfbe219-dc15-0129-bd70-7774a5a3203b@t-lab.opal.ne.jp>
Message-ID: <CAEW6iOiDS9QBf4JR2DbzG0b5C+wgYU11RuO=d_ig+hrQ+OuPTg@mail.gmail.com>

On 25 July 2018 at 15:35, TANAKA Takuji <ttk at t-lab.opal.ne.jp> wrote:
>\input{\detokenize{Die?bung.tex}}"
>
>
> \typeout{\detokenize{Sch?n}}
>
> \includegraphics[width=30mm,bb=0 0 550 568]{\detokenize{sch?n.jpg}}

Hopefully we will see a way to not need those detokenize. It's a bit
of a tricky area so we didn't do it this release.

obviously could easily define \typeout (and the others) to apply
\detokenize implicitly, then

\typeout{Sch?n}

would work, but the hard bit is to do that while keeping

\typeout{\detokenize{Sch?n}}

or

\newcommand\zz{abc}\typeout{\zz}

working

David


From kakuto at fuk.kindai.ac.jp  Thu Jul 26 01:20:31 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu, 26 Jul 2018 08:20:31 +0900
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <ecfbe219-dc15-0129-bd70-7774a5a3203b@t-lab.opal.ne.jp>
References: <20180725070721.GA10615@boole.suse.de>
 <ecfbe219-dc15-0129-bd70-7774a5a3203b@t-lab.opal.ne.jp>
Message-ID: <A8C318EBAF28467D8BFE5A28B8B7401B@CJ3001517A>

> In TeX Live 2018/W32TeX,
> Akira-san and I have implemented a function which treat
> UTF-8 on the console of Windows.
> If you set a option "command_line_encoding=utf-8" in your
> texmf.cnf, current version (since 2018/06/11) will accept
> utf-8 strings. I expect following examples will work:
> ... ...

The current binary of pdftex on Windows in the TeX Live 2018
does not have the above function.
Please wait for the next TeX Live 2019.

In the current TeX Live 2018, the variable
"command_line_encoding" affects 3 TeX engines: uptex, euptex,
xetex, and 2 drivers: dvips, (x)dvipdfmx. In the next
TeX Live 2019, the engine pdftex will be added.

In a personal texmf.cnf, e.g., c:/texlive/YYYY/texmf.cnf,
users can write a line
command_line_encoding = utf-8
in order to switch on the function.
However, I recommend to use the function by writing personal
batch files such as

@echo off
rem myxelatex.bat
setlocal
set command_line_encoding=utf-8
xelatex %*
endlocal

because it is desirable to switch on or to switch off the
function easily and flexibly for each program.

Thanks,
Akira


From acar at me.com  Sat Jul 28 16:01:34 2018
From: acar at me.com (L. Acar)
Date: Sat, 28 Jul 2018 17:01:34 +0300
Subject: [tex-live] Macports Distribution Can't Be Configured
Message-ID: <D44ACC44-AA65-453C-9382-29916958B1E1@me.com>

The macports distribution doesn?t seem to contain the function ?tlmgr? and none of the ?texconfig? commands work.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20180728/2d4b83ac/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1583 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20180728/2d4b83ac/attachment.p7s>

From preining at logic.at  Sat Jul 28 16:52:17 2018
From: preining at logic.at (Norbert Preining)
Date: Sat, 28 Jul 2018 22:52:17 +0800
Subject: [tex-live] Macports Distribution Can't Be Configured
In-Reply-To: <D44ACC44-AA65-453C-9382-29916958B1E1@me.com>
References: <D44ACC44-AA65-453C-9382-29916958B1E1@me.com>
Message-ID: <8D4E391F-5027-4878-80A1-758A6749564E@logic.at>

Please contact the macport maintainer, we here are mostly concerned with the original TeX Live which you can install without macport with our own Installer.

Thanks

Norbert

On July 28, 2018 10:01:34 PM GMT+08:00, "L. Acar" <acar at me.com> wrote:
>The macports distribution doesn?t seem to contain the function ?tlmgr?
>and none of the ?texconfig? commands work.


--
PREINING Norbert http://www.preining.info
Accelia Inc. + JAIST + TeX Live + Debian Developer
GPG: 0x860CDC13 fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From herbs at wideopenwest.com  Sat Jul 28 17:09:56 2018
From: herbs at wideopenwest.com (Herbert Schulz)
Date: Sat, 28 Jul 2018 11:09:56 -0400
Subject: [tex-live] Macports Distribution Can't Be Configured
In-Reply-To: <8D4E391F-5027-4878-80A1-758A6749564E@logic.at>
References: <D44ACC44-AA65-453C-9382-29916958B1E1@me.com>
 <8D4E391F-5027-4878-80A1-758A6749564E@logic.at>
Message-ID: <619ACAD0-39C5-43DE-9C29-B69FE5860843@wideopenwest.com>

Howdy,

Or MacTeX! :-)

Good Luck,
Herb Schulz


> On Jul 28, 2018, at 10:52 AM, Norbert Preining <preining at logic.at> wrote:
> 
> Please contact the macport maintainer, we here are mostly concerned with the original TeX Live which you can install without macport with our own Installer.
> 
> Thanks
> 
> Norbert
> 
>> On July 28, 2018 10:01:34 PM GMT+08:00, "L. Acar" <acar at me.com> wrote:
>> The macports distribution doesn?t seem to contain the function ?tlmgr?
>> and none of the ?texconfig? commands work.
> 
> 
> --
> PREINING Norbert http://www.preining.info
> Accelia Inc. + JAIST + TeX Live + Debian Developer
> GPG: 0x860CDC13 fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
> 



From zdenek.wagner at gmail.com  Sat Jul 28 17:15:31 2018
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sat, 28 Jul 2018 17:15:31 +0200
Subject: [tex-live] TL2018: UTF-8 characters in file names with pdflatex
In-Reply-To: <CAC1phyYpr0dGXmRV4tGFBn_riRDb6J7QWpi7gpgy2K_r=17Jzg@mail.gmail.com>
References: <20180725070721.GA10615@boole.suse.de>
 <20180725074413.GB20342@burischnitzel.preining.info>
 <20180725080057.GA16630@boole.suse.de>
 <CAC1phyY2FBa=xapn8zY5pbfpj5i9_GzUVH-zAWHEqu-ydfYOXw@mail.gmail.com>
 <CAEW6iOhNbcysHMQqU_bbLq+ZSORxe0ygiSj-UnStffE12JEr3A@mail.gmail.com>
 <CAC1phyYPESQ7GC2vW89AD8+poPjxqh9cLRCs8HWdfGiF=ftvdg@mail.gmail.com>
 <CAEW6iOg3PnwrKgkCCQxDit7W6vBCXLiuS=s0rYCvrjDOLKrx_g@mail.gmail.com>
 <CAC1phyYpr0dGXmRV4tGFBn_riRDb6J7QWpi7gpgy2K_r=17Jzg@mail.gmail.com>
Message-ID: <CAC1phyZT_O68Hmrz_Ho7h396EOk9vdgszDeuxnkuKD1K8DTrVA@mail.gmail.com>

Hi all,

in the meantime I tried a minimal example and it works so there must be an
incompatibility in one of the packages. I will examine it further when I
have time.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2018-07-25 12:39 GMT+02:00 Zdenek Wagner <zdenek.wagner at gmail.com>:

> Anyway, as I wrote, I had no time to test it and I will have no time at
> least to the end of September.
>
> Zden?k Wagner
> http://ttsm.icpf.cas.cz/team/wagner.shtml
> http://icebearsoft.euweb.cz
>
> 2018-07-25 12:26 GMT+02:00 David Carlisle <d.p.carlisle at gmail.com>:
>
>> hmm for all variants that I can detect are using things incompatible
>> with inputenc it is not preloaded
>>
>>
>>
>> % Skip this section in Unicode TeX, or if  MLTeX and EncTeX are enabled.
>> %    \begin{macrocode}
>> \ifnum0%
>>   \ifx\Umathchar\@undefined\else 1\fi
>>   \ifx\mubyte\@undefined\else 1\fi
>>   \ifx\charsubdef\@undefined\else 1\fi
>>   =\z@
>>
>>
>> so in a format built with enctex there should be no change in the 2018
>> release (or that's a bug, sorry)
>>
>> David
>>
>>
>> On 25 July 2018 at 10:51, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
>> > Hi all,
>> >
>> > I was too busy with my own work so that I almost have not tested TL
>> 2018. I
>> > found that my LaTeX documents do not work and since I have all releases
>> > starting at 2014, I have just switched back and had no time to examine
>> it
>> > further.
>> >
>> > Now I probably know the reason. I often use constructions as
>> > \futurelet\next\dosomething or \everypar{\setinitial} with
>> > \def\setinitial#1{... do something with the first character ...}. For
>> these
>> > macros everything must be a character with category 11 or 12, not an
>> active
>> > character. The inputenc package in case of UTF8 will give me just a
>> part of
>> > the character. For this reason I use encTeX where active characters are
>> not
>> > needed. As I am thinking about it just now, it seems to be easily
>> solvable.
>> > The encoding files for encTeX can start with \csname
>> > UseRawInputEncoding\endcsname which will revert the encoding for new
>> LaTeX
>> > and insert harmless \relax in all other cases. The same encTeX files are
>> > also used in the plain TeX so \csname seems to me as most portable.
>> >
>> >
>> > Zden?k Wagner
>> > http://ttsm.icpf.cas.cz/team/wagner.shtml
>> > http://icebearsoft.euweb.cz
>> >
>> > 2018-07-25 11:36 GMT+02:00 David Carlisle <d.p.carlisle at gmail.com>:
>> >>
>> >> On 25 July 2018 at 09:18, Zdenek Wagner <zdenek.wagner at gmail.com>
>> wrote:
>> >>
>> >> >
>> >> > pdflatex is an 8-bit SW, it is not Unicode-aware. It is achieved by
>> >> > active
>> >> > characters which break a lot of things. Almost all my older files
>> ceased
>> >> > to
>> >> > work with pdflatex and TL2018 .
>> >> >>
>> >>
>> >> That's very surprising, you could have reported at least one to the
>> team!
>> >>
>> >> Since the release I have only seen one report of a user file that
>> >> generated an error
>> >> (and that was silently mos-interpreting non ascii input in older
>> >> releases so the error wasn#t really a bad thing)
>> >>
>> >> If you have an example of a conforming document that failed to work
>> >> after the 2018 release let us know
>> >> at the very least we can add to the documentation to say what to do,
>> >> if that is not covered by the existing documentation.
>> >>
>> >>
>> >> David
>> >
>> >
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20180728/80c7b3f0/attachment.html>

From mojca.miklavec.lists at gmail.com  Sat Jul 28 19:53:09 2018
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 28 Jul 2018 19:53:09 +0200
Subject: [tex-live] Macports Distribution Can't Be Configured
In-Reply-To: <D44ACC44-AA65-453C-9382-29916958B1E1@me.com>
References: <D44ACC44-AA65-453C-9382-29916958B1E1@me.com>
Message-ID: <CALBOmsbLspp5mfnKpb0X21rEuqP17-aOyvYZ+U36Dw27zM8eog@mail.gmail.com>

Hi,

It is somewhat tricky (though not impossible) to provide a package manager
(tlmgr) inside another package manager. And then you have a problem of
conflicting binaries, one set provided by tlmgr and one by Macports.

In order to be able to answer you better: what problem would you like to
solve exactly? I'm a MacPorts fan, but I use MacTeX. TL from MP is only
there on my machine to satisfy dependencies of other software.

Anyway, while this is probably not the most suitable list for answering
downstream packaging, it is also unlikely that someone would jump up and
write missing support if you ask on MP list.

Mojca

V sob., 28. jul. 2018 16:46 je oseba L. Acar napisala:

> The macports distribution doesn?t seem to contain the function ?tlmgr? and
> none of the ?texconfig? commands work.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20180728/a07aa086/attachment-0001.html>

From Herbert.Voss at fu-berlin.de  Sun Jul 29 15:34:50 2018
From: Herbert.Voss at fu-berlin.de (Herbert Voss)
Date: Sun, 29 Jul 2018 15:34:50 +0200
Subject: [tex-live] tlmgr --reinstall
Message-ID: <a74d53df-a8d0-640f-054a-a24b315d9e23@fu-berlin.de>

With an up-to-date TL2018 and Ubuntu 18.04:

-----------------------------------------------------------------------
voss at shania:~$ tlmgr install --reinstall mathfont
tlmgr: package repositories
	main = http://mirror.ctan.org/systems/texlive/tlnet/ (verified)
	tlcontrib = http://contrib.texlive.info/current (not verified: pubkey 
missing)
	KOMA = http://www.komascript.de/repository/texlive/2018 (not verified: 
pubkey missing)
[1/1, ??:??/??:??] reinstall: mathfont @main [253k]
*** BUG ***
In pixman_region32_init_rect: Invalid rectangle passed
Set a breakpoint on '_pixman_log_error' to debug

*** BUG ***
In pixman_region32_init_rect: Invalid rectangle passed
Set a breakpoint on '_pixman_log_error' to debug

running mktexlsr ...
done running mktexlsr.
running mtxrun --generate ...
done running mtxrun --generate.
tlmgr: package log updated: 
/usr/local/texlive/2018/texmf-var/web2c/tlmgr.log
----------------------------------------------------------------------------


Herbert

From Herbert.Voss at fu-berlin.de  Sun Jul 29 16:05:06 2018
From: Herbert.Voss at fu-berlin.de (Herbert Voss)
Date: Sun, 29 Jul 2018 16:05:06 +0200
Subject: [tex-live] tlmgr --reinstall
In-Reply-To: <a74d53df-a8d0-640f-054a-a24b315d9e23@fu-berlin.de>
References: <a74d53df-a8d0-640f-054a-a24b315d9e23@fu-berlin.de>
Message-ID: <d8c35178-0161-6237-c972-97582b6b1ee3@fu-berlin.de>



Am 29.07.2018 um 15:34 schrieb Herbert Voss:
> With an up-to-date TL2018 and Ubuntu 18.04:
> 

sorry for the noise, a problem with Ubuntu ...

Herbert

> -----------------------------------------------------------------------
> voss at shania:~$ tlmgr install --reinstall mathfont
> tlmgr: package repositories
>  ????main = http://mirror.ctan.org/systems/texlive/tlnet/ (verified)
>  ????tlcontrib = http://contrib.texlive.info/current (not verified: 
> pubkey missing)
>  ????KOMA = http://www.komascript.de/repository/texlive/2018 (not 
> verified: pubkey missing)
> [1/1, ??:??/??:??] reinstall: mathfont @main [253k]
> *** BUG ***
> In pixman_region32_init_rect: Invalid rectangle passed
> Set a breakpoint on '_pixman_log_error' to debug
> 
> *** BUG ***
> In pixman_region32_init_rect: Invalid rectangle passed
> Set a breakpoint on '_pixman_log_error' to debug
> 
> running mktexlsr ...
> done running mktexlsr.
> running mtxrun --generate ...
> done running mtxrun --generate.
> tlmgr: package log updated: 
> /usr/local/texlive/2018/texmf-var/web2c/tlmgr.log
> ---------------------------------------------------------------------------- 
> 
> 
> 
> Herbert

From amaxwell at mac.com  Mon Jul 30 04:53:44 2018
From: amaxwell at mac.com (Adam R. Maxwell)
Date: Sun, 29 Jul 2018 19:53:44 -0700
Subject: [tex-live] TLU update fails (non-corporate MacOS machine)
In-Reply-To: <20180622025520.GD1605@bulldog.preining.info>
References: <9FF4A659-724F-4728-A65C-98C60135618B@mit.edu>
 <C470F4B0-EC72-4C16-A2E3-496721455FEE@mac.com>
 <3C0E7B7B-26C8-49E5-A4C4-A75967E71B55@mit.edu>
 <A8BD0F41-6FBF-4D89-8BE9-C90617BBF92B@mac.com>
 <20180622025520.GD1605@bulldog.preining.info>
Message-ID: <A1571D8F-5324-48DB-9E48-ACC2D9F2103F@mac.com>



> On Jun 21, 2018, at 19:55 , Norbert Preining <preining at logic.at> wrote:
> 
> On Thu, 21 Jun 2018, Adam R. Maxwell wrote:
>>> How do I tell TLU to use /usr/local/MacGPG2/bin/gpg2?
>> 
>> Hack TLCrypto.pm or TLU yourself.
> 
> No need.
> 
> It already does:
>  * check for TL_GNUPG env var
>  * check for gpg in the PATH
>  * check for gpg2 in the PATH
>  * check for TL shipped gpg if available

The last is the only one that will work for TLU, FYI, unless
gpg or gpg2 is in /usr/bin. I sanitize the PATH pretty
heavily, and no longer allow even /usr/local/bin due to ancient
broken stuff that users keep in it. TL_GNUPG env var should
work if you know how to make GUI processes inherit it.
Anyone who is interested in why I do this can read the comments
in TLMEnvironment.m.

https://github.com/amaxwell/tlutility/blob/master/TLMEnvironment.m

-- adam


From uri at mit.edu  Mon Jul 30 06:19:44 2018
From: uri at mit.edu (Uri Blumenthal)
Date: Mon, 30 Jul 2018 04:19:44 +0000
Subject: [tex-live] TLU update fails (non-corporate MacOS machine)
In-Reply-To: <A1571D8F-5324-48DB-9E48-ACC2D9F2103F@mac.com>
References: <9FF4A659-724F-4728-A65C-98C60135618B@mit.edu>
 <C470F4B0-EC72-4C16-A2E3-496721455FEE@mac.com>
 <3C0E7B7B-26C8-49E5-A4C4-A75967E71B55@mit.edu>
 <A8BD0F41-6FBF-4D89-8BE9-C90617BBF92B@mac.com>
 <20180622025520.GD1605@bulldog.preining.info>,
 <A1571D8F-5324-48DB-9E48-ACC2D9F2103F@mac.com>
Message-ID: <817D6887-9A96-4DBE-A12F-493E0E367705@mit.edu>

No offence meant, but this (such a sanitization) is crazy. 

Sent from my test iPhone

> On Jul 29, 2018, at 22:53, Adam R. Maxwell <amaxwell at mac.com> wrote:
> 
> 
> 
>> On Jun 21, 2018, at 19:55 , Norbert Preining <preining at logic.at> wrote:
>> 
>> On Thu, 21 Jun 2018, Adam R. Maxwell wrote:
>>>> How do I tell TLU to use /usr/local/MacGPG2/bin/gpg2?
>>> 
>>> Hack TLCrypto.pm or TLU yourself.
>> 
>> No need.
>> 
>> It already does:
>> * check for TL_GNUPG env var
>> * check for gpg in the PATH
>> * check for gpg2 in the PATH
>> * check for TL shipped gpg if available
> 
> The last is the only one that will work for TLU, FYI, unless
> gpg or gpg2 is in /usr/bin. I sanitize the PATH pretty
> heavily, and no longer allow even /usr/local/bin due to ancient
> broken stuff that users keep in it. TL_GNUPG env var should
> work if you know how to make GUI processes inherit it.
> Anyone who is interested in why I do this can read the comments
> in TLMEnvironment.m.
> 
> https://github.com/amaxwell/tlutility/blob/master/TLMEnvironment.m
> 
> -- adam
> 


From amaxwell at mac.com  Mon Jul 30 07:02:04 2018
From: amaxwell at mac.com (Adam R. Maxwell)
Date: Sun, 29 Jul 2018 22:02:04 -0700
Subject: [tex-live] TLU update fails (non-corporate MacOS machine)
In-Reply-To: <817D6887-9A96-4DBE-A12F-493E0E367705@mit.edu>
References: <9FF4A659-724F-4728-A65C-98C60135618B@mit.edu>
 <C470F4B0-EC72-4C16-A2E3-496721455FEE@mac.com>
 <3C0E7B7B-26C8-49E5-A4C4-A75967E71B55@mit.edu>
 <A8BD0F41-6FBF-4D89-8BE9-C90617BBF92B@mac.com>
 <20180622025520.GD1605@bulldog.preining.info>
 <A1571D8F-5324-48DB-9E48-ACC2D9F2103F@mac.com>
 <817D6887-9A96-4DBE-A12F-493E0E367705@mit.edu>
Message-ID: <8F763B09-106F-41E0-B950-9026F61CAAA1@mac.com>


> On Jul 29, 2018, at 21:19, Uri Blumenthal <uri at mit.edu> wrote:
> 
> No offence meant, but this (such a sanitization) is crazy. 

None taken. I couldn?t really care less.

? adam




From werner at suse.de  Mon Jul 30 11:27:05 2018
From: werner at suse.de (Dr. Werner Fink)
Date: Mon, 30 Jul 2018 11:27:05 +0200
Subject: [tex-live] Class moderncv and XeLateX: xdvipdfmx:fatal
Message-ID: <20180730092705.GA3016@boole.suse.de>

Hi,

I've a bug report that the template.tex of the LaTeX class moderncv
for typesetting modern curriculums vitae, cause an error

 xdvipdfmx:fatal: pdf_ref_obj(): passed invalid object.

 Output file removed.
 (see the transcript file for additional information)

and testing this I see in template.log

 Here is how much of TeX's memory you used:
  22724 strings out of 492979
  423028 string characters out of 6141751
  560602 words of memory out of 5000000
  26518 multiletter control sequences out of 15000+600000
  544859 words of font info for 61 fonts, out of 8000000 for 9000
  1348 hyphenation exceptions out of 8191
  57i,21n,65p,10361b,467s stack positions out of 5000i,500n,10000p,200000b,80000s
 
 Error 256 (driver return code) generating output;
 file template.pdf may not be valid.

... if the line

 \moderncvstyle{casual}

is change to

 \moderncvstyle{classic}

it works out.   The only main difference seems to be

 diff -up moderncvstyleclassic.sty moderncvstylecasual.sty
 [...]
  % symbols
 -\moderncvicons{marvosym}
 +\moderncvicons{awesome}

which leads to loading fronts from the sub package fontawesome but
for the wrong engine? Or moderncviconsawesome.sty seems to use hard
coded symbols which are not given for XeLaTex here.  This because
all symbols are found in fontawesomesymbols-generic.tex.


Werner

-- 
  "Having a smoking section in a restaurant is like having
          a peeing section in a swimming pool." -- Edward Burr
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 880 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20180730/16754a03/attachment.sig>

From werner at suse.de  Tue Jul 31 11:03:30 2018
From: werner at suse.de (Dr. Werner Fink)
Date: Tue, 31 Jul 2018 11:03:30 +0200
Subject: [tex-live] Class moderncv and XeLateX: xdvipdfmx:fatal
In-Reply-To: <20180730092705.GA3016@boole.suse.de>
References: <20180730092705.GA3016@boole.suse.de>
Message-ID: <20180731090330.GA670@boole.suse.de>

On Mon, Jul 30, 2018 at 11:27:05AM +0200, Dr. Werner Fink wrote:
> Hi,
> 
> I've a bug report that the template.tex of the LaTeX class moderncv
> for typesetting modern curriculums vitae, cause an error
> 
>  xdvipdfmx:fatal: pdf_ref_obj(): passed invalid object.
> 
>  Output file removed.
>  (see the transcript file for additional information)
> 
> and testing this I see in template.log
> 
>  Here is how much of TeX's memory you used:
>   22724 strings out of 492979
>   423028 string characters out of 6141751
>   560602 words of memory out of 5000000
>   26518 multiletter control sequences out of 15000+600000
>   544859 words of font info for 61 fonts, out of 8000000 for 9000
>   1348 hyphenation exceptions out of 8191
>   57i,21n,65p,10361b,467s stack positions out of 5000i,500n,10000p,200000b,80000s
>  
>  Error 256 (driver return code) generating output;
>  file template.pdf may not be valid.
> 
> ... if the line
> 
>  \moderncvstyle{casual}
> 
> is change to
> 
>  \moderncvstyle{classic}
> 
> it works out.   The only main difference seems to be
> 
>  diff -up moderncvstyleclassic.sty moderncvstylecasual.sty
>  [...]
>   % symbols
>  -\moderncvicons{marvosym}
>  +\moderncvicons{awesome}
> 
> which leads to loading fronts from the sub package fontawesome but
> for the wrong engine? Or moderncviconsawesome.sty seems to use hard
> coded symbols which are not given for XeLaTex here.  This because
> all symbols are found in fontawesomesymbols-generic.tex.

Seems that the Type1 font of fontawesome does mask the opentype version.
After telling fontconfig to ignore Type1 it works.

Werner

-- 
  "Having a smoking section in a restaurant is like having
          a peeing section in a swimming pool." -- Edward Burr
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 880 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20180731/e154ccbd/attachment.sig>

From zdenek.wagner at gmail.com  Tue Jul 31 11:17:07 2018
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Tue, 31 Jul 2018 11:17:07 +0200
Subject: [tex-live] Class moderncv and XeLateX: xdvipdfmx:fatal
In-Reply-To: <20180731090330.GA670@boole.suse.de>
References: <20180730092705.GA3016@boole.suse.de>
 <20180731090330.GA670@boole.suse.de>
Message-ID: <CAC1phya3KuvX=WsLvzWdpy_2C5Tt5jZ548STwQrjgtX-+LRZ4w@mail.gmail.com>

You have not written details about your operating system. I can confirm
that fontconfig in Linux is quite strange. I had exactly the same fonts
installed on two computers with the same version of Fedora and the same
configuration files. I had two versions of FreeFont on both computers, one
with correct Devanagari block and one older where Devanagari did not work.
Preferences were set so that the working version should be used. It worked
on one computer but did not work on the other. I had to remove the older
version of Freefont. So if fontconfig can see two versions then no matter
how the preferences are set, unpredictable things may happen. And it can
even depend on the version of fontconfig.


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2018-07-31 11:03 GMT+02:00 Dr. Werner Fink <werner at suse.de>:

> On Mon, Jul 30, 2018 at 11:27:05AM +0200, Dr. Werner Fink wrote:
> > Hi,
> >
> > I've a bug report that the template.tex of the LaTeX class moderncv
> > for typesetting modern curriculums vitae, cause an error
> >
> >  xdvipdfmx:fatal: pdf_ref_obj(): passed invalid object.
> >
> >  Output file removed.
> >  (see the transcript file for additional information)
> >
> > and testing this I see in template.log
> >
> >  Here is how much of TeX's memory you used:
> >   22724 strings out of 492979
> >   423028 string characters out of 6141751
> >   560602 words of memory out of 5000000
> >   26518 multiletter control sequences out of 15000+600000
> >   544859 words of font info for 61 fonts, out of 8000000 for 9000
> >   1348 hyphenation exceptions out of 8191
> >   57i,21n,65p,10361b,467s stack positions out of
> 5000i,500n,10000p,200000b,80000s
> >
> >  Error 256 (driver return code) generating output;
> >  file template.pdf may not be valid.
> >
> > ... if the line
> >
> >  \moderncvstyle{casual}
> >
> > is change to
> >
> >  \moderncvstyle{classic}
> >
> > it works out.   The only main difference seems to be
> >
> >  diff -up moderncvstyleclassic.sty moderncvstylecasual.sty
> >  [...]
> >   % symbols
> >  -\moderncvicons{marvosym}
> >  +\moderncvicons{awesome}
> >
> > which leads to loading fronts from the sub package fontawesome but
> > for the wrong engine? Or moderncviconsawesome.sty seems to use hard
> > coded symbols which are not given for XeLaTex here.  This because
> > all symbols are found in fontawesomesymbols-generic.tex.
>
> Seems that the Type1 font of fontawesome does mask the opentype version.
> After telling fontconfig to ignore Type1 it works.
>
> Werner
>
> --
>   "Having a smoking section in a restaurant is like having
>           a peeing section in a swimming pool." -- Edward Burr
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20180731/eb3a948f/attachment.html>

From werner at suse.de  Tue Jul 31 11:36:53 2018
From: werner at suse.de (Dr. Werner Fink)
Date: Tue, 31 Jul 2018 11:36:53 +0200
Subject: [tex-live] Class moderncv and XeLateX: xdvipdfmx:fatal
In-Reply-To: <CAC1phya3KuvX=WsLvzWdpy_2C5Tt5jZ548STwQrjgtX-+LRZ4w@mail.gmail.com>
References: <20180730092705.GA3016@boole.suse.de>
 <20180731090330.GA670@boole.suse.de>
 <CAC1phya3KuvX=WsLvzWdpy_2C5Tt5jZ548STwQrjgtX-+LRZ4w@mail.gmail.com>
Message-ID: <20180731093653.GA3814@boole.suse.de>

On Tue, Jul 31, 2018 at 11:17:07AM +0200, Zdenek Wagner wrote:
> You have not written details about your operating system. I can confirm
> that fontconfig in Linux is quite strange. I had exactly the same fonts
> installed on two computers with the same version of Fedora and the same
> configuration files. I had two versions of FreeFont on both computers, one
> with correct Devanagari block and one older where Devanagari did not work.
> Preferences were set so that the working version should be used. It worked
> on one computer but did not work on the other. I had to remove the older
> version of Freefont. So if fontconfig can see two versions then no matter
> how the preferences are set, unpredictable things may happen. And it can
> even depend on the version of fontconfig.

It had happen on openSUSE Tumbleweed for a user and I have reproduced this
on an other openSUSE Tumbleweed.  That is I've to change the package
installation in such a way that Type1 fonts do not mask the opentype fonts.

> Zden?k Wagner
> http://ttsm.icpf.cas.cz/team/wagner.shtml
> http://icebearsoft.euweb.cz
> 
> 2018-07-31 11:03 GMT+02:00 Dr. Werner Fink <werner at suse.de>:
> 
> > On Mon, Jul 30, 2018 at 11:27:05AM +0200, Dr. Werner Fink wrote:
> > > Hi,
> > >
> > > I've a bug report that the template.tex of the LaTeX class moderncv
> > > for typesetting modern curriculums vitae, cause an error
> > >
> > >  xdvipdfmx:fatal: pdf_ref_obj(): passed invalid object.
> > >
> > >  Output file removed.
> > >  (see the transcript file for additional information)
> > >
> > > and testing this I see in template.log
> > >
> > >  Here is how much of TeX's memory you used:
> > >   22724 strings out of 492979
> > >   423028 string characters out of 6141751
> > >   560602 words of memory out of 5000000
> > >   26518 multiletter control sequences out of 15000+600000
> > >   544859 words of font info for 61 fonts, out of 8000000 for 9000
> > >   1348 hyphenation exceptions out of 8191
> > >   57i,21n,65p,10361b,467s stack positions out of
> > 5000i,500n,10000p,200000b,80000s
> > >
> > >  Error 256 (driver return code) generating output;
> > >  file template.pdf may not be valid.
> > >
> > > ... if the line
> > >
> > >  \moderncvstyle{casual}
> > >
> > > is change to
> > >
> > >  \moderncvstyle{classic}
> > >
> > > it works out.   The only main difference seems to be
> > >
> > >  diff -up moderncvstyleclassic.sty moderncvstylecasual.sty
> > >  [...]
> > >   % symbols
> > >  -\moderncvicons{marvosym}
> > >  +\moderncvicons{awesome}
> > >
> > > which leads to loading fronts from the sub package fontawesome but
> > > for the wrong engine? Or moderncviconsawesome.sty seems to use hard
> > > coded symbols which are not given for XeLaTex here.  This because
> > > all symbols are found in fontawesomesymbols-generic.tex.
> >
> > Seems that the Type1 font of fontawesome does mask the opentype version.
> > After telling fontconfig to ignore Type1 it works.
> >
> > Werner

-- 
  "Having a smoking section in a restaurant is like having
          a peeing section in a swimming pool." -- Edward Burr
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 880 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20180731/89db7577/attachment.sig>

From news3 at nililand.de  Tue Jul 31 12:38:13 2018
From: news3 at nililand.de (Ulrike Fischer)
Date: Tue, 31 Jul 2018 12:38:13 +0200
Subject: [tex-live] Class moderncv and XeLateX: xdvipdfmx:fatal
References: <20180730092705.GA3016@boole.suse.de>
 <20180731090330.GA670@boole.suse.de>
Message-ID: <1pea6uw2oe9m8$.dlg@nililand.de>


> Seems that the Type1 font of fontawesome does mask the opentype version.
> After telling fontconfig to ignore Type1 it works.

See also
https://tex.stackexchange.com/questions/334078/xdvipdfmx-pdf-ref-obj-error-with-fontawesome

Imho the best would be if moderncv would call the font by font name
but by file name. 

--  
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From zdenek.wagner at gmail.com  Tue Jul 31 12:57:55 2018
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Tue, 31 Jul 2018 12:57:55 +0200
Subject: [tex-live] Class moderncv and XeLateX: xdvipdfmx:fatal
In-Reply-To: <1pea6uw2oe9m8$.dlg@nililand.de>
References: <20180730092705.GA3016@boole.suse.de>
 <20180731090330.GA670@boole.suse.de>
 <1pea6uw2oe9m8$.dlg@nililand.de>
Message-ID: <CAC1phybOozjnz3=fCH-v080a=H0pkcsCV2X9sxK-6TDLzcGGSg@mail.gmail.com>

2018-07-31 12:38 GMT+02:00 Ulrike Fischer <news3 at nililand.de>:

>
> > Seems that the Type1 font of fontawesome does mask the opentype version.
> > After telling fontconfig to ignore Type1 it works.
>
> See also
> https://tex.stackexchange.com/questions/334078/xdvipdfmx-
> pdf-ref-obj-error-with-fontawesome
>
> Imho the best would be if moderncv would call the font by font name
> but by file name.
>

Loading a fot via a file name is IMHO good for nonstandard fonts that are
distributed with the document and copied to the working directory. You
never know what is the directory sturcture on someone else's computer and
where the font file is located.


>
> --
> Ulrike Fischer
> http://www.troubleshooting-tex.de/
>
>

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20180731/00f93b3d/attachment.html>

From news3 at nililand.de  Tue Jul 31 13:26:15 2018
From: news3 at nililand.de (Ulrike Fischer)
Date: Tue, 31 Jul 2018 13:26:15 +0200
Subject: [tex-live] Class moderncv and XeLateX: xdvipdfmx:fatal
References: <20180730092705.GA3016@boole.suse.de>
 <20180731090330.GA670@boole.suse.de> <1pea6uw2oe9m8$.dlg@nililand.de>
 <CAC1phybOozjnz3=fCH-v080a=H0pkcsCV2X9sxK-6TDLzcGGSg@mail.gmail.com>
Message-ID: <h3www6obt59z$.dlg@nililand.de>

Am Tue, 31 Jul 2018 12:57:55 +0200 schrieb Zdenek Wagner:

>> Imho the best would be if moderncv would call the font by font name
>> but by file name.
>>
> 
> Loading a fot via a file name is IMHO good for nonstandard fonts that are
> distributed with the document and copied to the working directory.

I meant "the best would if modernce would call the font *not* by
font name ...". The heat seems to have bad effects on my typing ...


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


