From jfbu at free.fr  Fri Jun  1 14:19:48 2018
From: jfbu at free.fr (jfbu)
Date: Fri, 1 Jun 2018 14:19:48 +0200
Subject: [tex-live] is luatex parsing of first line off?
Message-ID: <96FD89E3-9752-4143-A798-D3C455234B2F@free.fr>

Hi,

sorry if perhaps off-list 

I have problems with first line %&formatname and luatex

Consider this

$ luatex -ini -jobname myformat \&lualatex \\def\\foo{foo} \\dump

It works.

Then consider file testlualatex.tex
whose contents are

%&myformat
\documentclass{article}

\begin{document}
hello

\foo
\end{document}


and try

$ luatex testluatex.tex 
This is LuaTeX, Version 1.07.0 (TeX Live 2018) 
 restricted system commands enabled.
(./testluatex.tex
! Undefined control sequence.
l.2 \documentclass
                {article}
? X

warning  (pdf backend): no pages of output.
Transcript written on testluatex.log.


On the other hand

$ luatex \&myformat testluatex.tex

does work.

Now repeat the whole thing with xetex or pdftex, then it works.

For example

$ xetex -ini -jobname myformat \&xelatex \\def\\foo{foo} \\dump

Then 

$ xetex testluatex.tex 
This is XeTeX, Version 3.14159265-2.6-0.99999 (TeX Live 2018) (preloaded format=myformat)
 restricted \write18 enabled.
entering extended mode
(./testluatex.tex
LaTeX2e <2018-04-01> patch level 5
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/article.cls
Document Class: article 2014/09/29 v1.4h Standard LaTeX document class
(/usr/local/texlive/2018/texmf-dist/tex/latex/base/size10.clo))
(./testluatex.aux) [1] (./testluatex.aux) )
Output written on testluatex.pdf (1 page).
Transcript written on testluatex.log.


(sorry for filename... it should have been testformat.tex)

Best

Jean-Fran?ois

From jfbu at free.fr  Fri Jun  1 14:43:53 2018
From: jfbu at free.fr (jfbu)
Date: Fri, 1 Jun 2018 14:43:53 +0200
Subject: [tex-live] is luatex parsing of first line off?
In-Reply-To: <96FD89E3-9752-4143-A798-D3C455234B2F@free.fr>
References: <96FD89E3-9752-4143-A798-D3C455234B2F@free.fr>
Message-ID: <FC5D0167-0626-4C71-AC1B-655296495131@free.fr>


Le 1 juin 2018 ? 14:19, jfbu <jfbu at free.fr> a ?crit :

> Hi,
> 
> sorry if perhaps off-list 
> 
> I have problems with first line %&formatname and luatex
> 
> Consider this
> 
> $ luatex -ini -jobname myformat \&lualatex \\def\\foo{foo} \\dump
> 
> It works.
> 
> Then consider file testlualatex.tex
> whose contents are
> 
> %&myformat
> \documentclass{article}
> 
> \begin{document}
> hello
> 
> \foo
> \end{document}
> 
> 
> and try
> 
> $ luatex testluatex.tex 
> This is LuaTeX, Version 1.07.0 (TeX Live 2018) 
> restricted system commands enabled.
> (./testluatex.tex
> ! Undefined control sequence.
> l.2 \documentclass
>                {article}
> ? X
> 
> warning  (pdf backend): no pages of output.
> Transcript written on testluatex.log.
> 
> 
> On the other hand
> 
> $ luatex \&myformat testluatex.tex
> 
> does work.
> 
> Now repeat the whole thing with xetex or pdftex, then it works.
> 
> For example
> 
> $ xetex -ini -jobname myformat \&xelatex \\def\\foo{foo} \\dump
> 
> Then 
> 
> $ xetex testluatex.tex 
> This is XeTeX, Version 3.14159265-2.6-0.99999 (TeX Live 2018) (preloaded format=myformat)
> restricted \write18 enabled.
> entering extended mode
> (./testluatex.tex
> LaTeX2e <2018-04-01> patch level 5
> (/usr/local/texlive/2018/texmf-dist/tex/latex/base/article.cls
> Document Class: article 2014/09/29 v1.4h Standard LaTeX document class
> (/usr/local/texlive/2018/texmf-dist/tex/latex/base/size10.clo))
> (./testluatex.aux) [1] (./testluatex.aux) )
> Output written on testluatex.pdf (1 page).
> Transcript written on testluatex.log.
> 
> 
> (sorry for filename... it should have been testformat.tex)



trying man luatex I see this in output

       --fmt=FORMAT
              Use  FORMAT as the name of the format to be used, instead of the
              name by which luaTeX was called or a %& line.


which suggest that %& line parsing should work although that is perhaps
not so clear from top of man page

Best,

Jean-Fran?ois

From jfbu at free.fr  Fri Jun  1 14:47:16 2018
From: jfbu at free.fr (jfbu)
Date: Fri, 1 Jun 2018 14:47:16 +0200
Subject: [tex-live] is luatex parsing of first line off?
In-Reply-To: <FC5D0167-0626-4C71-AC1B-655296495131@free.fr>
References: <96FD89E3-9752-4143-A798-D3C455234B2F@free.fr>
 <FC5D0167-0626-4C71-AC1B-655296495131@free.fr>
Message-ID: <52D4B797-9A3D-41CA-9AC7-D273B07D98A3@free.fr>


Le 1 juin 2018 ? 14:43, jfbu <jfbu at free.fr> a ?crit :

> 
> Le 1 juin 2018 ? 14:19, jfbu <jfbu at free.fr> a ?crit :
> 
>> Hi,
>> 
>> sorry if perhaps off-list 
>> 
>> I have problems with first line %&formatname and luatex
>> 
>> Consider this
>> 
>> $ luatex -ini -jobname myformat \&lualatex \\def\\foo{foo} \\dump
>> 
>> It works.
>> 
>> Then consider file testlualatex.tex
>> whose contents are
>> 
>> %&myformat
>> \documentclass{article}
>> 
>> \begin{document}
>> hello
>> 
>> \foo
>> \end{document}
>> 
>> 
>> and try
>> 
>> $ luatex testluatex.tex 
>> This is LuaTeX, Version 1.07.0 (TeX Live 2018) 
>> restricted system commands enabled.
>> (./testluatex.tex
>> ! Undefined control sequence.
>> l.2 \documentclass
>>               {article}
>> ? X
>> 
>> warning  (pdf backend): no pages of output.
>> Transcript written on testluatex.log.
>> 
>> 
>> On the other hand
>> 
>> $ luatex \&myformat testluatex.tex
>> 
>> does work.
>> 
>> Now repeat the whole thing with xetex or pdftex, then it works.
>> 
>> For example
>> 
>> $ xetex -ini -jobname myformat \&xelatex \\def\\foo{foo} \\dump
>> 
>> Then 
>> 
>> $ xetex testluatex.tex 
>> This is XeTeX, Version 3.14159265-2.6-0.99999 (TeX Live 2018) (preloaded format=myformat)
>> restricted \write18 enabled.
>> entering extended mode
>> (./testluatex.tex
>> LaTeX2e <2018-04-01> patch level 5
>> (/usr/local/texlive/2018/texmf-dist/tex/latex/base/article.cls
>> Document Class: article 2014/09/29 v1.4h Standard LaTeX document class
>> (/usr/local/texlive/2018/texmf-dist/tex/latex/base/size10.clo))
>> (./testluatex.aux) [1] (./testluatex.aux) )
>> Output written on testluatex.pdf (1 page).
>> Transcript written on testluatex.log.
>> 
>> 
>> (sorry for filename... it should have been testformat.tex)
> 
> 
> 
> trying man luatex I see this in output
> 
>       --fmt=FORMAT
>              Use  FORMAT as the name of the format to be used, instead of the
>              name by which luaTeX was called or a %& line.
> 
> 
> which suggest that %& line parsing should work although that is perhaps
> not so clear from top of man page
> 

again replying to myself the man page also contains

       The following options are ignored:

       --8bit, --etex, --parse-first-line, --no-parse-first-line
              These are always on.

but this sounds self-contradictory regarding the parse first line things

Jean-Fran?ois





From P.Taylor at Rhul.Ac.Uk  Fri Jun  1 14:56:30 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Fri, 1 Jun 2018 13:56:30 +0100
Subject: [tex-live] "Getnonfreefonts-sys"
Message-ID: <cdf84c0d-0197-5045-c662-84f1d14a67a0@Rhul.Ac.Uk>

Attempting to resurrect a TeX project last updated in 2009, I am running into problems accessing the URW Garamond fonts.? The source line reads

  * \usepackage[urw-garamond]{mathdesign}

and the diagnostic is :

> This is XeTeX, Version 3.14159265-2.6-0.99999 (TeX Live 2018/W32TeX) (preloaded format=xelatex)
>
> entering extended mode
>
> (./Porphyrogenitus.tex
>
> LaTeX2e <2018-04-01> patch level 5
>
> [...]
>
> Chapter 1.
>
> (./Introduction.tex
>
> shipout called with parameters : [\box ][\AtBeginShipoutBox ] [1name = ugmm8a, rootname = ugmm8a, pointsize =
>
> mktexmf: empty or non-existent rootfile!
>
> Cannot find font ugmm8a in map file(s).
>
>
> kpathsea: Running mktexmf ugmm8a.mf
>
>
> The command name is D:\TeX\Live\2018\bin\win32\mktexmf
>
> Cannot find ugmm8a.mf .
>
> I try ps2pk --> gsftopk --> ttf2pk --> hbf2gf.
>
> ps2pk cannot be used.
>
> I try gsftopk.
>
> gsftopk.exe ugmm8a 600
>
> gsftopk cannot be used.
>
> Next I try ttf2pk.
>
> ttf2pk.exe -q ugmm8a 600
>
> ttf2pk failed.
>
> Finally I try hbf2gf.
>
> hbf2gf.exe -q -p ugmm8a 600
>
> All trials failed.
>

Referring to https://latex.org/forum/viewtopic.php?t=3778, I then tried (from the TeX Live 2018 command line)

  * C:\Users\Philip Taylor.Fujitsu-PC>getnonfreefonts-sys -a

but was told :

> 'getnonfreefonts-sys' is not recognized as an internal or external command,
> operable program or batch file.

M'aidez, svp.
Philip Taylor


From enrico.gregorio at gmail.com  Fri Jun  1 14:58:13 2018
From: enrico.gregorio at gmail.com (Enrico Gregorio)
Date: Fri, 1 Jun 2018 14:58:13 +0200
Subject: [tex-live] "Getnonfreefonts-sys"
In-Reply-To: <cdf84c0d-0197-5045-c662-84f1d14a67a0@Rhul.Ac.Uk>
References: <cdf84c0d-0197-5045-c662-84f1d14a67a0@Rhul.Ac.Uk>
Message-ID: <9AC2386B-580D-439A-B9DF-0A6DD390BEC4@gmail.com>


> On 1 Jun 2018, at 14:56 , Philip Taylor <P.Taylor at Rhul.Ac.Uk> wrote:
> 
> Attempting to resurrect a TeX project last updated in 2009, I am running into problems accessing the URW Garamond fonts.  The source line reads
> 
>  * \usepackage[urw-garamond]{mathdesign}
> 
> and the diagnostic is :
> 
>> This is XeTeX, Version 3.14159265-2.6-0.99999 (TeX Live 2018/W32TeX) (preloaded format=xelatex)
>> 
>> entering extended mode
>> 
>> (./Porphyrogenitus.tex
>> 
>> LaTeX2e <2018-04-01> patch level 5
>> 
>> [...]
>> 
>> Chapter 1.
>> 
>> (./Introduction.tex
>> 
>> shipout called with parameters : [\box ][\AtBeginShipoutBox ] [1name = ugmm8a, rootname = ugmm8a, pointsize =
>> 
>> mktexmf: empty or non-existent rootfile!
>> 
>> Cannot find font ugmm8a in map file(s).
>> 
>> 
>> kpathsea: Running mktexmf ugmm8a.mf
>> 
>> 
>> The command name is D:\TeX\Live\2018\bin\win32\mktexmf
>> 
>> Cannot find ugmm8a.mf .
>> 
>> I try ps2pk --> gsftopk --> ttf2pk --> hbf2gf.
>> 
>> ps2pk cannot be used.
>> 
>> I try gsftopk.
>> 
>> gsftopk.exe ugmm8a 600
>> 
>> gsftopk cannot be used.
>> 
>> Next I try ttf2pk.
>> 
>> ttf2pk.exe -q ugmm8a 600
>> 
>> ttf2pk failed.
>> 
>> Finally I try hbf2gf.
>> 
>> hbf2gf.exe -q -p ugmm8a 600
>> 
>> All trials failed.
>> 
> 
> Referring to https://latex.org/forum/viewtopic.php?t=3778, I then tried (from the TeX Live 2018 command line)
> 
>  * C:\Users\Philip Taylor.Fujitsu-PC>getnonfreefonts-sys -a
> 
> but was told :
> 
>> 'getnonfreefonts-sys' is not recognized as an internal or external command,
>> operable program or batch file.
> 
> M'aidez, svp.
> Philip Taylor
> 

https://www.tug.org/fonts/getnonfreefonts/

Ciao
Enrico

From norbert at preining.info  Fri Jun  1 15:09:07 2018
From: norbert at preining.info (Norbert Preining)
Date: Fri, 1 Jun 2018 22:09:07 +0900
Subject: [tex-live] "Getnonfreefonts-sys"
In-Reply-To: <9AC2386B-580D-439A-B9DF-0A6DD390BEC4@gmail.com>
References: <cdf84c0d-0197-5045-c662-84f1d14a67a0@Rhul.Ac.Uk>
 <9AC2386B-580D-439A-B9DF-0A6DD390BEC4@gmail.com>
Message-ID: <20180601130907.GC23849@bulldog.preining.info>

> >  * \usepackage[urw-garamond]{mathdesign}

> https://www.tug.org/fonts/getnonfreefonts/

ODer
  tlcontrib.texlive.info
where the fonts are included and tlmgr ready installable.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From P.Taylor at Rhul.Ac.Uk  Fri Jun  1 15:43:32 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Fri, 1 Jun 2018 14:43:32 +0100
Subject: [tex-live] "Getnonfreefonts-sys"
In-Reply-To: <9AC2386B-580D-439A-B9DF-0A6DD390BEC4@gmail.com>
References: <cdf84c0d-0197-5045-c662-84f1d14a67a0@Rhul.Ac.Uk>
 <9AC2386B-580D-439A-B9DF-0A6DD390BEC4@gmail.com>
Message-ID: <63f241c3-c475-df8b-9369-355892259a8b@Rhul.Ac.Uk>

Thank you, Enrico.
> https://www.tug.org/fonts/getnonfreefonts/

Sadly

> D:\TeX\Live>texlua install-getnonfreefonts
> Detected System: win32
> Your TeX System seems to be broken.? Can't continue.

** Phil.


From P.Taylor at Rhul.Ac.Uk  Fri Jun  1 18:38:56 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Fri, 1 Jun 2018 17:38:56 +0100
Subject: [tex-live] "Getnonfreefonts-sys"
In-Reply-To: <20180601134915.GE23849@bulldog.preining.info>
References: <cdf84c0d-0197-5045-c662-84f1d14a67a0@Rhul.Ac.Uk>
 <9AC2386B-580D-439A-B9DF-0A6DD390BEC4@gmail.com>
 <20180601130907.GC23849@bulldog.preining.info>
 <e7c4590c-52c3-838a-6174-0a5c82e36dbd@Rhul.Ac.Uk>
 <20180601134915.GE23849@bulldog.preining.info>
Message-ID: <fb4f964a-470e-1a4d-4106-564502c4aca9@Rhul.Ac.Uk>

Norbert Preining wrote:
>> Not sure if that is intended to be a web-browsable URL, but if it is, I cannot resolve it :
> Sorry,
>    http://contrib.texlive.info/
>
> Norbert

Thank you Norbert, much better.? Do you have any thoughts regarding :
>> https://www.tug.org/fonts/getnonfreefonts/
> Sadly
>
>> D:\TeX\Live>texlua install-getnonfreefonts
>> Detected System: win32
>> Your TeX System seems to be broken.? Can't continue.

?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180601/77687851/attachment.html>

From reinhard.kotucha at web.de  Fri Jun  1 22:26:53 2018
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 1 Jun 2018 22:26:53 +0200
Subject: [tex-live] "Getnonfreefonts-sys"
In-Reply-To: <fb4f964a-470e-1a4d-4106-564502c4aca9@Rhul.Ac.Uk>
References: <cdf84c0d-0197-5045-c662-84f1d14a67a0@Rhul.Ac.Uk>
 <9AC2386B-580D-439A-B9DF-0A6DD390BEC4@gmail.com>
 <20180601130907.GC23849@bulldog.preining.info>
 <e7c4590c-52c3-838a-6174-0a5c82e36dbd@Rhul.Ac.Uk>
 <20180601134915.GE23849@bulldog.preining.info>
 <fb4f964a-470e-1a4d-4106-564502c4aca9@Rhul.Ac.Uk>
Message-ID: <23313.44045.896671.405831@gargle.gargle.HOWL>

On 2018-06-01 at 17:38:56 +0100, Philip Taylor wrote:

 >     Sadly
 > 
 >         D:\TeX\Live>texlua install-getnonfreefonts
 >         Detected System: win32
 >         Your TeX System seems to be broken.? Can't continue.
 > 
 > ?

Dear Phil,
the installer aborts with the error message above if

  $SELFAUTOPARENT/texmf-dist/scripts

doesn't exist or is not a directory.

Please locate this piece of code in install-getnonfreefonts

--[[
print ('TEXDIR='..texdir)
print ('BINDIR='..bindir)
print ('EXEDIR='..exedir)
print ('SCRIPTDIR='..scriptdir)
print ('MANDIR='..mandir)
print ('INSTDIR='..instdir)
--]]

and replace --[[ with ---[[ .  The crash will be more noisy then.

Ancient versions of the installer don't work anymore because they
assume that $SELFAUTOPARENT/texmf/ exists.  Contents of this directory
was moved to texmf-dist some time ago.  Recent versions of the
installer check whether $SELFAUTOPARENT/texmf/ exists and thus support
older versions of TeX Live too.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From P.Taylor at Rhul.Ac.Uk  Fri Jun  1 23:31:26 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Fri, 1 Jun 2018 22:31:26 +0100
Subject: [tex-live] "Getnonfreefonts-sys"
In-Reply-To: <23313.44045.896671.405831@gargle.gargle.HOWL>
References: <cdf84c0d-0197-5045-c662-84f1d14a67a0@Rhul.Ac.Uk>
 <9AC2386B-580D-439A-B9DF-0A6DD390BEC4@gmail.com>
 <20180601130907.GC23849@bulldog.preining.info>
 <e7c4590c-52c3-838a-6174-0a5c82e36dbd@Rhul.Ac.Uk>
 <20180601134915.GE23849@bulldog.preining.info>
 <fb4f964a-470e-1a4d-4106-564502c4aca9@Rhul.Ac.Uk>
 <23313.44045.896671.405831@gargle.gargle.HOWL>
Message-ID: <16783f86-e319-c7bc-c926-6813a95a0e55@Rhul.Ac.Uk>



Reinhard Kotucha wrote:
> Dear Phil,
> the installer aborts with the error message above if
>
>   $SELFAUTOPARENT/texmf-dist/scripts
>
> doesn't exist or is not a directory.
>
> Please locate this piece of code in install-getnonfreefonts
>
> --[[
> print ('TEXDIR='..texdir) 
> [...]
>
> and replace --[[ with ---[[ .  
Done as requested.? New output :

> D:\TeX\Live>texlua install-getnonfreefonts
> TEXDIR=D:/TeX/Live/2018
> BINDIR=D:/TeX/Live/2018/bin
> EXEDIR=D:/TeX/Live/2018/bin/win32
> SCRIPTDIR=D:/TeX/Live/2018/texmf/scripts
> MANDIR=D:/TeX/Live/2018/texmf/doc/man/man1
> INSTDIR=D:/TeX/Live/2018/texmf/scripts/getnonfreefonts
> Detected System: win32
> Your TeX System seems to be broken.? Can't continue.

** Phil.

From P.Taylor at Rhul.Ac.Uk  Fri Jun  1 23:37:07 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Fri, 1 Jun 2018 22:37:07 +0100
Subject: [tex-live] "Getnonfreefonts-sys"
In-Reply-To: <20180601134915.GE23849@bulldog.preining.info>
References: <cdf84c0d-0197-5045-c662-84f1d14a67a0@Rhul.Ac.Uk>
 <9AC2386B-580D-439A-B9DF-0A6DD390BEC4@gmail.com>
 <20180601130907.GC23849@bulldog.preining.info>
 <e7c4590c-52c3-838a-6174-0a5c82e36dbd@Rhul.Ac.Uk>
 <20180601134915.GE23849@bulldog.preining.info>
Message-ID: <acfa6c91-3e5d-9ee2-5642-c17daa8832e9@Rhul.Ac.Uk>


> Sorry,
>   http://contrib.texlive.info/
>
> Norbert

Thank you Norbert.?? Now able to browse the URL, but in attempting to follow the instructions the second step failed :

> C:\Windows\system32>tlmgr repository add http://contrib.texlive.info/current tlcontrib
> tlmgr.pl: added repository with tag tlcontrib: http://contrib.texlive.info/current
>
> C:\Windows\system32>tlmgr pinning add tlcontrib '*'
> tlmgr.pl: package repositories
> ??????? main = D:/TeX/Live/2018/Pre-test (not verified: gpg unavailable)
> ??????? tlcontrib = http://contrib.texlive.info/current (not verified: gpg unavailable)
> tlmgr (TLPDB): pinning warning: the package pattern '*' on the line:
> ? tlcontrib:'*'
> ? does not match any package
> tlmgr.pl: new pinning data for tlcontrib: '*'

** Phil.

From reinhard.kotucha at web.de  Sat Jun  2 00:07:06 2018
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 2 Jun 2018 00:07:06 +0200
Subject: [tex-live] "Getnonfreefonts-sys"
In-Reply-To: <16783f86-e319-c7bc-c926-6813a95a0e55@Rhul.Ac.Uk>
References: <cdf84c0d-0197-5045-c662-84f1d14a67a0@Rhul.Ac.Uk>
 <9AC2386B-580D-439A-B9DF-0A6DD390BEC4@gmail.com>
 <20180601130907.GC23849@bulldog.preining.info>
 <e7c4590c-52c3-838a-6174-0a5c82e36dbd@Rhul.Ac.Uk>
 <20180601134915.GE23849@bulldog.preining.info>
 <fb4f964a-470e-1a4d-4106-564502c4aca9@Rhul.Ac.Uk>
 <23313.44045.896671.405831@gargle.gargle.HOWL>
 <16783f86-e319-c7bc-c926-6813a95a0e55@Rhul.Ac.Uk>
Message-ID: <23313.50058.668563.407502@gargle.gargle.HOWL>

On 2018-06-01 at 22:31:26 +0100, Philip Taylor wrote:

 > Done as requested.? New output :
 > 
 > > D:\TeX\Live>texlua install-getnonfreefonts
 > > TEXDIR=D:/TeX/Live/2018
 > > BINDIR=D:/TeX/Live/2018/bin
 > > EXEDIR=D:/TeX/Live/2018/bin/win32
 > > SCRIPTDIR=D:/TeX/Live/2018/texmf/scripts
 > > MANDIR=D:/TeX/Live/2018/texmf/doc/man/man1
 > > INSTDIR=D:/TeX/Live/2018/texmf/scripts/getnonfreefonts
 > > Detected System: win32
 > > Your TeX System seems to be broken.? Can't continue.

You obviously have an ancient release of the installer.

 > SCRIPTDIR=D:/TeX/Live/2018/texmf/scripts

Newer releases check whether a directory "texmf" exists and assume
"texmf-dist" otherwise.

Could you try again with the latest release?

  https://www.tug.org/fonts/getnonfreefonts/install-getnonfreefonts

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From norbert at preining.info  Sat Jun  2 14:26:26 2018
From: norbert at preining.info (Norbert Preining)
Date: Sat, 2 Jun 2018 21:26:26 +0900
Subject: [tex-live] "Getnonfreefonts-sys"
In-Reply-To: <acfa6c91-3e5d-9ee2-5642-c17daa8832e9@Rhul.Ac.Uk>
References: <cdf84c0d-0197-5045-c662-84f1d14a67a0@Rhul.Ac.Uk>
 <9AC2386B-580D-439A-B9DF-0A6DD390BEC4@gmail.com>
 <20180601130907.GC23849@bulldog.preining.info>
 <e7c4590c-52c3-838a-6174-0a5c82e36dbd@Rhul.Ac.Uk>
 <20180601134915.GE23849@bulldog.preining.info>
 <acfa6c91-3e5d-9ee2-5642-c17daa8832e9@Rhul.Ac.Uk>
Message-ID: <20180602122626.GA1156@bulldog.preining.info>

Hi Philip,

> > C:\Windows\system32>tlmgr pinning add tlcontrib '*'
> > tlmgr.pl: package repositories
> > ??????? main = D:/TeX/Live/2018/Pre-test (not verified: gpg unavailable)
> > ??????? tlcontrib = http://contrib.texlive.info/current (not verified: gpg unavailable)
> > tlmgr (TLPDB): pinning warning: the package pattern '*' on the line:
> > ? tlcontrib:'*'
> > ? does not match any package
> > tlmgr.pl: new pinning data for tlcontrib: '*'

Hmm, can you try first to remove the wrong pinning entry:
  tlmgr pinning remove tlcontrib '*'
and then add a correct one via
  tlmgr pinning add tlcontrib *
(again one of the peculiarities of Windows). Does that help?

After that 
  tlmgr install <your-preferred-fontpackage>
should work.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From P.Taylor at Rhul.Ac.Uk  Sat Jun  2 14:53:41 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Sat, 2 Jun 2018 13:53:41 +0100
Subject: [tex-live] "Getnonfreefonts-sys"
In-Reply-To: <20180602122626.GA1156@bulldog.preining.info>
References: <cdf84c0d-0197-5045-c662-84f1d14a67a0@Rhul.Ac.Uk>
 <9AC2386B-580D-439A-B9DF-0A6DD390BEC4@gmail.com>
 <20180601130907.GC23849@bulldog.preining.info>
 <e7c4590c-52c3-838a-6174-0a5c82e36dbd@Rhul.Ac.Uk>
 <20180601134915.GE23849@bulldog.preining.info>
 <acfa6c91-3e5d-9ee2-5642-c17daa8832e9@Rhul.Ac.Uk>
 <20180602122626.GA1156@bulldog.preining.info>
Message-ID: <043249e6-728a-41ff-837d-d097fdbb77da@Rhul.Ac.Uk>

Hallo Norbert --
> Hmm, can you try first to remove the wrong pinning entry:
>   tlmgr pinning remove tlcontrib '*'
> and then add a correct one via
>   tlmgr pinning add tlcontrib *
> (again one of the peculiarities of Windows). Does that help?

OK, that looks good(-ish) :

> D:\TeX\Live\2018\TeXMF>tlmgr pinning remove tlcontrib '*'
> tlmgr (TLPDB): pinning warning: the package pattern '*' on the line:
> ? tlcontrib:'*'
> ? does not match any package
> tlmgr.pl: package repositories
> ??????? main = D:/TeX/Live/2018/Pre-test (not verified: gpg unavailable)
> ??????? tlcontrib = http://contrib.texlive.info/current (not verified: gpg unava
> ilable)
> tlmgr (TLPDB): pinning warning: the package pattern '*' on the line:
> ? tlcontrib:'*'
> ? does not match any package
> tlmgr.pl: removed pinning data for repository tlcontrib: '*'
>
> D:\TeX\Live\2018\TeXMF>tlmgr pinning add tlcontrib *
> tlmgr.pl: package repositories
> ??????? main = D:/TeX/Live/2018/Pre-test (not verified: gpg unavailable)
> ??????? tlcontrib = http://contrib.texlive.info/current (not verified: gpg unava
> ilable)
> tlmgr.pl: new pinning data for tlcontrib: *

>
> After that 
>   tlmgr install <your-preferred-fontpackage>
> should work.

OK, thereafter "match urw-garamond" does indeed select a single installable package, "mathdesign 31639 (2.31) Mathematical fonts to fit with particular text fonts", but trying to install that tells me "package already present: mathdesign".? However, it /then/ offers me a new package, "garamond 11 at tlcontrib", and that package appears to have installed cleanly.? A great deal of work will clearly be required to convert the original 8-bit polytonic Greek text into Unicode (at the moment there is no Greek visible in the output at all -- it should compose over 90% !), but at least the sources now compiles.? Many thanks to Norbert, Reinhard, Nelson and all others.

** Phil.


From norbert at preining.info  Sat Jun  2 14:58:18 2018
From: norbert at preining.info (Norbert Preining)
Date: Sat, 2 Jun 2018 21:58:18 +0900
Subject: [tex-live] "Getnonfreefonts-sys"
In-Reply-To: <043249e6-728a-41ff-837d-d097fdbb77da@Rhul.Ac.Uk>
References: <cdf84c0d-0197-5045-c662-84f1d14a67a0@Rhul.Ac.Uk>
 <9AC2386B-580D-439A-B9DF-0A6DD390BEC4@gmail.com>
 <20180601130907.GC23849@bulldog.preining.info>
 <e7c4590c-52c3-838a-6174-0a5c82e36dbd@Rhul.Ac.Uk>
 <20180601134915.GE23849@bulldog.preining.info>
 <acfa6c91-3e5d-9ee2-5642-c17daa8832e9@Rhul.Ac.Uk>
 <20180602122626.GA1156@bulldog.preining.info>
 <043249e6-728a-41ff-837d-d097fdbb77da@Rhul.Ac.Uk>
Message-ID: <20180602125818.GG1156@bulldog.preining.info>

> OK, that looks good(-ish) :

There is nothing more satisfactory than a compliment my the Holy Grail
Master of Abuntabimat, Philip Taylor!

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From P.Taylor at Rhul.Ac.Uk  Sun Jun  3 15:14:02 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Sun, 3 Jun 2018 14:14:02 +0100
Subject: [tex-live] Maximum fetch rate from
	ftp://tug.org/historic/systems/texlive/
Message-ID: <493ed74d-8074-64f2-a746-0ff46d0228e5@Rhul.Ac.Uk>

What is the necessary and sufficient pause between downloads to prevent

> Logging in as anonymous ...
> Login incorrect.

I ask because I need to install all TeX Lives that I do not already have installed from TeX Live 2008 onwards.? I have successfully fetched the 2008 & 2009 ISOs (as LZMA and XZ respectively) but failed at 2010 (no compressed version offered) with the above error message.

-- 
<Signature>
Philip Taylor

From P.Taylor at Rhul.Ac.Uk  Sun Jun  3 16:43:19 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor (Rhul.Ac.Uk))
Date: Sun, 3 Jun 2018 15:43:19 +0100
Subject: [tex-live] TeX Live 2008 installer hangs at "Installing zwgetfdate"
Message-ID: <ed24474c-b0ab-4153-9e1c-a72d356c4ea2@Rhul.Ac.Uk>

I have now twice tried to install TeX Live 2008 on my Windows 7 Ultimate 
system (16Gb, i7 processor), and on both occasions it has hung having 
reported "Installing zwgetfdate".? Can anyone remember sufficiently far 
back to advise if there are additional debugging options I can invoke so 
as to better be able to identify the source of the problem ?? Perl uses 
25% of available CPU and never progresses further.

Philip Taylor

From bvoisin at icloud.com  Sun Jun  3 20:18:11 2018
From: bvoisin at icloud.com (Bruno Voisin)
Date: Sun, 03 Jun 2018 20:18:11 +0200
Subject: [tex-live] pkfix not EOL-savvy
Message-ID: <047C6AAD-419D-4F78-A88F-EBA0453929B4@icloud.com>

Applying pkfix-helper and pkfix for the first time in years, after digging an old 1996 PS file prepared with dvips 5.62, I got really puzzled by the outcome: pkfix-helper doing business as usual

$ pkfix-helper intro.ps intro-pkfix-helper.ps -f "Fp=cmr10 @ 1.095X" -f "Fg=cmti10 @ 1.095X" -f "Fi=cmr10" -f "Fq = cmsl10 @1.095X" -f "Fh = cmmi10 @ 1.095X" -f "Ft=cmbx12 @ 1.728X" -f "Fj=cmr7"
Reading intro.ps ... done.
Number of Type 3 fonts encountered in included documents: 0
Total number of Type 3 fonts encountered: 21
Bitmapped fonts are typeset at 600 DPI.
Finding character widths ... done.
Reading TFM files ... done (103 TFMs in 193 scaling variations).
Matching fonts:
    Processing Fs ... done (cmsl12 @ 1X, mismatch=0.09259).
    Processing Ff ... done (cmti12 @ 1X, mismatch=0.04730).
    Processing Fo ... done (cmmi12 @ 1X, mismatch=0.05333).
    Processing Fp ... done (cmr10 @ 1.095X, mismatch=0.10846).
    Processing Fu ... done (cmbx12 @ 1.2X, mismatch=0.03960).
    Processing Fe ... done (cmbx12 @ 1X, mismatch=0.05146).
    Processing Fg ... done (cmti10 @ 1.095X, mismatch=0.03715).
    Processing Fl ... done (cmmi8 @ 1X, mismatch=0.03546).
    Processing Fi ... done (cmr10 @ 1X, mismatch=0.01755).
    Processing Fr ... done (cmsy10 @ 1.2X, mismatch=0.02969).
    Processing Fq ... done (cmsl10 @ 1.095X, mismatch=0.04676).
    Processing Fm ... done (cmr8 @ 1X, mismatch=0.01835).
    Processing Fb ... done (cmti12 @ 1.2X, mismatch=0.00740).
    Processing Fh ... done (cmmi10 @ 1.095X, mismatch=0.01453).
    Processing Fn ... done (cmex10 @ 1.2X, mismatch=0.02115).
    Processing Fa ... done (cmcsc10 @ 1.2X, mismatch=0.00723).
    Processing Ft ... done (cmbx12 @ 1.728X, mismatch=0.01844).
    Processing Fk ... done (cmsy8 @ 1X, mismatch=0.02516).
    Processing Fc ... done (cmr6 @ 1X, mismatch=0.01846).
    Processing Fd ... done (cmmi6 @ 1X, mismatch=0.00077).
    Processing Fj ... done (cmr7 @ 1X, mismatch=0.00020).

but pkfix doing nothing

$ pkfix intro-pkfix-helper.ps intro-pkfix.ps
PKFIX 1.7, 2012/04/18 - Copyright (c) 2001, 2005, 2007, 2009, 2011, 2012 by Heiko Oberdiek.
==> no fonts converted

After a couple of hours trying to figure out all sorts of explanations, it turns out it's an EOL problem: the original PS file had Mac EOLs (= CR) and the pkfix-helper output too. Changing the EOLs to Unix (= LF), then the world is back to normal:

$ pkfix intro-pkfix-helper.ps intro-pkfix.ps
PKFIX 1.7, 2012/04/18 - Copyright (c) 2001, 2005, 2007, 2009, 2011, 2012 by Heiko Oberdiek.
*** Font conversion: `cmcsc10' -> `CMCSC10'.
*** Font conversion: `cmti12' -> `CMTI12'.
*** Font conversion: `cmr6' -> `CMR6'.
*** Font conversion: `cmmi6' -> `CMMI6'.
*** Font conversion: `cmbx12' -> `CMBX12'.
*** Font conversion: `cmti12' -> `CMTI12'.
*** Font conversion: `cmti10' -> `CMTI10'.
*** Font conversion: `cmmi10' -> `CMMI10'.
*** Font conversion: `cmr10' -> `CMR10'.
*** Font conversion: `cmr7' -> `CMR7'.
*** Font conversion: `cmsy8' -> `CMSY8'.
*** Font conversion: `cmmi8' -> `CMMI8'.
*** Font conversion: `cmr8' -> `CMR8'.
*** Font conversion: `cmex10' -> `CMEX10'.
*** Font conversion: `cmmi12' -> `CMMI12'.
*** Font conversion: `cmr10' -> `CMR10'.
*** Font conversion: `cmsl10' -> `CMSL10'.
*** Font conversion: `cmsy10' -> `CMSY10'.
*** Font conversion: `cmsl12' -> `CMSL12'.
*** Font conversion: `cmbx12' -> `CMBX12'.
*** Font conversion: `cmbx12' -> `CMBX12'.
*** Merging font `CMTI12' (2).
*** Merging font `CMBX12' (3).
*** Merging font `CMR10' (2).
==> 21 converted fonts.
==> 3 merged fonts.

Not a big deal, but I really thought I was going mad.

Bruno Voisin
(not on the list)



From bvoisin at icloud.com  Sun Jun  3 20:24:33 2018
From: bvoisin at icloud.com (Bruno Voisin)
Date: Sun, 03 Jun 2018 20:24:33 +0200
Subject: [tex-live] pkfix not EOL-savvy (correction)
Message-ID: <DB2AA3B3-AA90-40EE-961F-B67F798FDD5B@icloud.com>

Just one correction: the old PS file was from dvips 5.58f, not 5.62 (it's pkfix-helper that sets the version to 5.62).

Sorry!

Bruno

From karl at freefriends.org  Mon Jun  4 00:31:38 2018
From: karl at freefriends.org (Karl Berry)
Date: Mon, 4 Jun 2018 00:31:38 +0200
Subject: [tex-live] tlcritical->tlnet for downloader/compressor
Message-ID: <201806032231.w53MVccJ014270@tug.org>

If all goes well, we will push the current tlcritical to tlnet tonight.
It may take additional day(s) to reach the CTAN mirrors, as usual.

There is a bunch of new code from Norbert relating to the download and
compression programs used, with details as follows. (I'll add this text
to tug.org/texlive/tlmgr-news.html after the update goes through.)

Many thanks to several Mac people for testing.

Good luck to us all,
Karl

<p><b>tlmgr 47907 (released 4 June 2018):</b>
<li>support for curl as a download program, and new default behavior for
choosing. In this order:
  <ol>
  <li>If the environment variable <tt>TEXLIVE_DOWNLOADER</tt> is
      defined, use it; abort if the specified program doesn't work.
      Possible values: <tt>curl</tt>, <tt>wget</tt>.
  <li>If the environment variable <tt>TL_DOWNLOAD_PROGRAM</tt> is
      defined (can be any value), use it together with
      <tt>TL_DOWNLOAD_ARGS</tt>; abort if it doesn't work.
  <li>If LWP is available and working, use that (by far the most
      efficient method, as it supports persistent downloads).
  <li>If curl is available (from the system) and working, use that.
  <li>If wget is available (either from the system or TL) and
      working, use that.
  </ol>
  <p>TL still provides <tt>wget</tt> binaries for some platforms, so
  some download method should always be available.
  
<li>support for alternative compressor programs; until now, backups and
  intermediate rollback containers were always created with xz. Now:
  <ol>
  <li>If the environment variable <tt>TEXLIVE_COMPRESSOR</tt> is
      defined, use it; abort if it doesn't work. Possible values:
      <tt>lz4</tt>, <tt>gzip</tt>, <tt>xz</tt>.
  <li>If lz4 is available (either from the system or TL) and working, use that.
  <li>If gzip is available (from the system) and working, use that.
  <li>If xz is available (either from the system or TL) and working, use that.
  </ol>
  <p>lz4 and gzip are much faster in creating tlmgr's local backups.
  The unconditional use of xz for the tlnet containers is unaffected,
  to minimize download sizes.

<li><a href="https://openssh.com/">ssh</a> support: installing from a
  repository of the form <tt>user at machine:/path/to/tlnet</tt> is now
  supported; the url-like forms
  <tt>scp://user at machine/path/to/tlnet</tt> and
  <tt>ssh://user at machine/path/to/tlnet</tt> are equivalent. ssh-agent
  is strongly recommended!

<li>Not tlmgr, but close enough: our generic Windows wrapper
runscript.tlu now sets <tt>LC_CTYPE</tt> to be the system encoding, to
support files with non-ASCII characters.

From adrian.devries at t-online.de  Mon Jun  4 13:57:31 2018
From: adrian.devries at t-online.de (Adrian Devries)
Date: Mon, 4 Jun 2018 13:57:31 +0200
Subject: [tex-live] tlcritical->tlnet for downloader/compressor
In-Reply-To: <201806032231.w53MVccJ014270@tug.org>
References: <201806032231.w53MVccJ014270@tug.org>
Message-ID: <1d6fc432-8002-ac95-e832-10e18db8b79a@t-online.de>

Hi Karl,

it seems, unfortunately, that there are issues with lz4 in the updated
infrastructure. Under win7 and win10 tlmgr isn't able to create backups
anymore and the output of tlmgr is full of binary codes. But there is a
workaround: After setting the environment variables
TEXLIVE_COMPRESSOR=xz and TEXLIVE_DOWNLOADER=wget all is working as
before. Note that a curl executable hasn't been installed during the
update of the infrastructure.

Best regards,
Adrian

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 195 bytes
Desc: OpenPGP digital signature
URL: <http://tug.org/pipermail/tex-live/attachments/20180604/ac487f15/attachment.sig>

From preining at logic.at  Mon Jun  4 14:54:51 2018
From: preining at logic.at (Norbert Preining)
Date: Mon, 04 Jun 2018 21:54:51 +0900
Subject: [tex-live] tlcritical->tlnet for downloader/compressor
In-Reply-To: <1d6fc432-8002-ac95-e832-10e18db8b79a@t-online.de>
References: <201806032231.w53MVccJ014270@tug.org>
 <1d6fc432-8002-ac95-e832-10e18db8b79a@t-online.de>
Message-ID: <EE3188C8-A5D7-460E-A58C-89178691A93D@logic.at>

Hi Adrian

Can you please run
   tlmgr update -v <somepackage>
On the CMD prompt and send me the output?
I tested it on a Windows 10 with success....

Norbert

On June 4, 2018 8:57:31 PM GMT+09:00, Adrian Devries <adrian.devries at t-online.de> wrote:
>Hi Karl,
>
>it seems, unfortunately, that there are issues with lz4 in the updated
>infrastructure. Under win7 and win10 tlmgr isn't able to create backups
>anymore and the output of tlmgr is full of binary codes. But there is a
>workaround: After setting the environment variables
>TEXLIVE_COMPRESSOR=xz and TEXLIVE_DOWNLOADER=wget all is working as
>before. Note that a curl executable hasn't been installed during the
>update of the infrastructure.
>
>Best regards,
>Adrian


--
PREINING Norbert http://www.preining.info
Accelia Inc. + JAIST + TeX Live + Debian Developer
GPG: 0x860CDC13 fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From preining at logic.at  Mon Jun  4 15:35:41 2018
From: preining at logic.at (Norbert Preining)
Date: Mon, 4 Jun 2018 22:35:41 +0900
Subject: [tex-live] tlcritical->tlnet for downloader/compressor
In-Reply-To: <1d6fc432-8002-ac95-e832-10e18db8b79a@t-online.de>
References: <201806032231.w53MVccJ014270@tug.org>
 <1d6fc432-8002-ac95-e832-10e18db8b79a@t-online.de>
Message-ID: <20180604133541.GB26104@bulldog.preining.info>

Hi Adrian,

one more thing,

> TEXLIVE_COMPRESSOR=xz and TEXLIVE_DOWNLOADER=wget all is working as
> before. Note that a curl executable hasn't been installed during the

TEXLIVE_DOWNLOADER should be irrelevant. By default LWP is used, and if
curl is not available (like on most Windows system), it will simply not
be used.

Please do not set
  TEXLIVE_DOWNLOADER
it is faster with LWP, and has no connection with the compression
problem.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From jimsheldon at icloud.com  Mon Jun  4 14:54:52 2018
From: jimsheldon at icloud.com (James Sheldon)
Date: Mon, 04 Jun 2018 07:54:52 -0500
Subject: [tex-live] gpg: verify signatures failed: Unknown system error
Message-ID: <0DD933BF-44A9-4CAE-97A7-C862CA76C58E@icloud.com>

Hello,

I received the following error this morning when executing `sudo -H tlmgr update ?self`

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180604/55ada410/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PastedGraphic-1.png
Type: image/png
Size: 784209 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180604/55ada410/attachment-0001.png>

From preining at logic.at  Mon Jun  4 15:58:04 2018
From: preining at logic.at (Norbert Preining)
Date: Mon, 4 Jun 2018 22:58:04 +0900
Subject: [tex-live] gpg: verify signatures failed: Unknown system error
In-Reply-To: <0DD933BF-44A9-4CAE-97A7-C862CA76C58E@icloud.com>
References: <0DD933BF-44A9-4CAE-97A7-C862CA76C58E@icloud.com>
Message-ID: <20180604135804.GC3672@bulldog.preining.info>

Hi James,

> I received the following error this morning when executing `sudo -H tlmgr update ?self`

Strange, can you please send the output of
  tlmgr -v -v update --all
 
Thanks

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From jimsheldon at icloud.com  Mon Jun  4 16:11:09 2018
From: jimsheldon at icloud.com (James Sheldon)
Date: Mon, 04 Jun 2018 09:11:09 -0500
Subject: [tex-live] gpg: verify signatures failed: Unknown system error
In-Reply-To: <20180604135804.GC3672@bulldog.preining.info>
References: <0DD933BF-44A9-4CAE-97A7-C862CA76C58E@icloud.com>
 <20180604135804.GC3672@bulldog.preining.info>
Message-ID: <0F95FB87-5F32-4566-86B6-865A50B90184@icloud.com>

Here you are.

I was able to address the issue by updating tlmgr alone w/o chaining other commands (me being lazy).

I think the error in this file is due to my not running the command with sudo.

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: out.txt
URL: <http://tug.org/pipermail/tex-live/attachments/20180604/d7841ab6/attachment.txt>
-------------- next part --------------


> On Jun 4, 2018, at 8:58 AM, Norbert Preining <preining at logic.at> wrote:
> 
> Hi James,
> 
>> I received the following error this morning when executing `sudo -H tlmgr update ?self`
> 
> Strange, can you please send the output of
>  tlmgr -v -v update --all
> 
> Thanks
> 
> Norbert
> 
> --
> PREINING Norbert                               http://www.preining.info
> Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From preining at logic.at  Mon Jun  4 16:46:43 2018
From: preining at logic.at (Norbert Preining)
Date: Mon, 4 Jun 2018 23:46:43 +0900
Subject: [tex-live] gpg: verify signatures failed: Unknown system error
In-Reply-To: <0F95FB87-5F32-4566-86B6-865A50B90184@icloud.com>
References: <0DD933BF-44A9-4CAE-97A7-C862CA76C58E@icloud.com>
 <20180604135804.GC3672@bulldog.preining.info>
 <0F95FB87-5F32-4566-86B6-865A50B90184@icloud.com>
Message-ID: <20180604144643.GA5548@bulldog.preining.info>

> I think the error in this file is due to my not running the command with sudo.

Yes indeed, which is also clearly stated in the tlmgr output:

> You don't have permission to change the installation in any way,
> specifically, the directory /usr/local/texlive/2018/tlpkg/ is not writable.
> Please run this program as administrator, or contact your local admin.
> tlmgr: An error has occurred. See above messages. Exiting.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From news3 at nililand.de  Mon Jun  4 18:37:43 2018
From: news3 at nililand.de (Ulrike Fischer)
Date: Mon, 4 Jun 2018 18:37:43 +0200
Subject: [tex-live] tlcritical->tlnet for downloader/compressor
References: <201806032231.w53MVccJ014270@tug.org>
 <1d6fc432-8002-ac95-e832-10e18db8b79a@t-online.de>
 <EE3188C8-A5D7-460E-A58C-89178691A93D@logic.at>
Message-ID: <ra7eahfbjg0$.dlg@nililand.de>

Am Mon, 04 Jun 2018 21:54:51 +0900 schrieb Norbert Preining:

> I tested it on a Windows 10 with success....

I just updated on windows 10 (before I saw the thread) and 
update --self and then update worked without any problems. 

I have the april windows update on this PC (imho you need this
windows version to have an preinstalled curl).

-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From adrian.devries at t-online.de  Mon Jun  4 20:27:14 2018
From: adrian.devries at t-online.de (Adrian Devries)
Date: Mon, 4 Jun 2018 20:27:14 +0200
Subject: [tex-live] tlcritical->tlnet for downloader/compressor
In-Reply-To: <EE3188C8-A5D7-460E-A58C-89178691A93D@logic.at>
References: <201806032231.w53MVccJ014270@tug.org>
 <1d6fc432-8002-ac95-e832-10e18db8b79a@t-online.de>
 <EE3188C8-A5D7-460E-A58C-89178691A93D@logic.at>
Message-ID: <5d13a593-4964-73be-1152-92a09f631c41@t-online.de>

Hi Norbert,

please, find log files attached for both systems: win7 and winx.

Note, that on both systems all updates from Microsoft have been installed.

I've removed both environment variables TEXLIVE_COMPRESSOR and
TEXLIVE_DOWNLOADER before I've called tlmgr again.

Due to the fact that I've installed all packages I was required to
remove one package in order to be able to reinstall it. On both systems
the result is the same: the backup fails.

Adrian
Am 04.06.2018 um 14:54 schrieb Norbert Preining:
> Hi Adrian
> 
> Can you please run
>    tlmgr update -v <somepackage>
> On the CMD prompt and send me the output?
> I tested it on a Windows 10 with success....
> 
> Norbert
> 
> On June 4, 2018 8:57:31 PM GMT+09:00, Adrian Devries <adrian.devries at t-online.de> wrote:
>> Hi Karl,
>>
>> it seems, unfortunately, that there are issues with lz4 in the updated
>> infrastructure. Under win7 and win10 tlmgr isn't able to create backups
>> anymore and the output of tlmgr is full of binary codes. But there is a
>> workaround: After setting the environment variables
>> TEXLIVE_COMPRESSOR=xz and TEXLIVE_DOWNLOADER=wget all is working as
>> before. Note that a curl executable hasn't been installed during the
>> update of the infrastructure.
>>
>> Best regards,
>> Adrian
> 
> 
> --
> PREINING Norbert http://www.preining.info
> Accelia Inc. + JAIST + TeX Live + Debian Developer
> GPG: 0x860CDC13 fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: UpdateTeXlive_Win7_20180604_201237.log
Type: application/octet-stream
Size: 130354 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180604/294d382e/attachment-0002.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: UpdateTeXlive_WinX_20180604_195546.log
Type: application/octet-stream
Size: 130211 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180604/294d382e/attachment-0003.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 195 bytes
Desc: OpenPGP digital signature
URL: <http://tug.org/pipermail/tex-live/attachments/20180604/294d382e/attachment-0001.sig>

From karl at freefriends.org  Mon Jun  4 23:46:48 2018
From: karl at freefriends.org (Karl Berry)
Date: Mon, 4 Jun 2018 21:46:48 GMT
Subject: [tex-live] tlcritical->tlnet for downloader/compressor
In-Reply-To: <1d6fc432-8002-ac95-e832-10e18db8b79a@t-online.de>
Message-ID: <201806042146.w54Lkmk9029375@freefriends.org>

    a curl executable hasn't been installed during the
    update of the infrastructure.

For the record: this is expected/intentional. We don't distribute any
curl binaries, and only include lz4 binaries for some platforms
(and not Windows).

No harm should accrue, as the programs that have been used up to now are
unchanged. --best, karl.

From preining at logic.at  Tue Jun  5 05:07:27 2018
From: preining at logic.at (Norbert Preining)
Date: Tue, 5 Jun 2018 12:07:27 +0900
Subject: [tex-live] tlcritical->tlnet for downloader/compressor
In-Reply-To: <5d13a593-4964-73be-1152-92a09f631c41@t-online.de>
References: <201806032231.w53MVccJ014270@tug.org>
 <1d6fc432-8002-ac95-e832-10e18db8b79a@t-online.de>
 <EE3188C8-A5D7-460E-A58C-89178691A93D@logic.at>
 <5d13a593-4964-73be-1152-92a09f631c41@t-online.de>
Message-ID: <20180605030727.GD22640@bulldog.preining.info>

Hi Adrian,

this is strange, I have seen something very similar at one point by a
MacTeX user ...

> D:selected compressor: C:\texlive\2018\tlpkg\installer\lz4\lz4.exe with -zf --rm -q
> "MdPa?> 
> % -> % \makeatletter is used so we can reference commands and definitions> % ?> > \def\tlcProductQ> \b?{??A

Suddently the output goes to stdout, which is wrong.
Could you check what files you have in 
  C:\texlive\2018\tlpkg\backup\
? Are there some files with *only* the
  .tar
extension?

Thanks

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From adrian.devries at t-online.de  Tue Jun  5 07:31:14 2018
From: adrian.devries at t-online.de (Adrian Devries)
Date: Tue, 5 Jun 2018 07:31:14 +0200
Subject: [tex-live] tlcritical->tlnet for downloader/compressor
In-Reply-To: <20180605030727.GD22640@bulldog.preining.info>
References: <201806032231.w53MVccJ014270@tug.org>
 <1d6fc432-8002-ac95-e832-10e18db8b79a@t-online.de>
 <EE3188C8-A5D7-460E-A58C-89178691A93D@logic.at>
 <5d13a593-4964-73be-1152-92a09f631c41@t-online.de>
 <20180605030727.GD22640@bulldog.preining.info>
Message-ID: <6d33334e-629f-450f-90e9-2e11e374a3e3@t-online.de>

Hi Norbert,

yes, there is one file with only a .tar extension, but I think that is
because I had terminated the process yesterday. This morning I've
performed an update and I've monitored what is going on in the backup
folder: There were 7 updates and for each update a .tar file has been
created temporarily and removed afterwards. No .tar.lz4 files have been
created.

By the way: The update process stopped to work at the following point:

> [7/7, 01:27/01:33] update: texlive-scripts [116k] (47907 -> 47920) ... done
> running mktexlsr ...
> done running mktexlsr.
> running mtxrun --generate ...
> done running mtxrun --generate.
> running updmap-sys ...
> done running updmap-sys.
> tlmgr.pl: package log updated: C:/texlive/2018/texmf-var/web2c/tlmgr.log
>  

I was required to kill it.

Adrian

Am 05.06.2018 um 05:07 schrieb Norbert Preining:
> Hi Adrian,
> 
> this is strange, I have seen something very similar at one point by a
> MacTeX user ...
> 
>> D:selected compressor: C:\texlive\2018\tlpkg\installer\lz4\lz4.exe with -zf --rm -q
> 
>> "MdPa?> 
>> % -> % \makeatletter is used so we can reference commands and definitions
> % ?> > \def\tlcProductQ
> \b?{??A
> 
> Suddently the output goes to stdout, which is wrong.
> Could you check what files you have in 
>   C:\texlive\2018\tlpkg\backup\
> ? Are there some files with *only* the
>   .tar
> extension?
> 
> Thanks
> 
> Norbert
> 
> --
> PREINING Norbert                               http://www.preining.info
> Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
> 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 195 bytes
Desc: OpenPGP digital signature
URL: <http://tug.org/pipermail/tex-live/attachments/20180605/6530476c/attachment.sig>

From fxcoudert at gmail.com  Tue Jun  5 09:52:48 2018
From: fxcoudert at gmail.com (FX)
Date: Tue, 5 Jun 2018 09:52:48 +0200
Subject: [tex-live] Texlive update failed with signature error
Message-ID: <A24555BB-EF63-4A0E-B633-8ABB2768DDFE@gmail.com>

Hi,

I am reporting per instructions in the following error message, which I get with "tlmgr update --all? depending on the mirror that is automatically selected:

> $ sudo tlmgr update --all 
> /Library/TeX/texbin/tlmgr: signature verification error of /tmp/rFoY7Mi80K/xj9m414iJv from http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb: cryptographic signature verification of
>   /tmp/rFoY7Mi80K/RylsFm4b8W
> against
>   http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc
> failed. Output was
> gpg: no valid OpenPGP data found.
> gpg: the signature could not be verified.
> Please remember that the signature file (.sig or .asc)
> should be the first file given on the command line.
> 
> Please report to texlive at tug.org


Cheers,
FX

From fxcoudert at gmail.com  Tue Jun  5 09:58:57 2018
From: fxcoudert at gmail.com (FX)
Date: Tue, 5 Jun 2018 09:58:57 +0200
Subject: [tex-live] Texlive update failed with signature error
In-Reply-To: <A24555BB-EF63-4A0E-B633-8ABB2768DDFE@gmail.com>
References: <A24555BB-EF63-4A0E-B633-8ABB2768DDFE@gmail.com>
Message-ID: <3FEA0143-658A-411A-923B-393963B96C70@gmail.com>

Should add: I also get the same error with another French mirror:
http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc

FX

From preining at logic.at  Tue Jun  5 14:35:30 2018
From: preining at logic.at (Norbert Preining)
Date: Tue, 5 Jun 2018 21:35:30 +0900
Subject: [tex-live] Texlive update failed with signature error
In-Reply-To: <A24555BB-EF63-4A0E-B633-8ABB2768DDFE@gmail.com>
References: <A24555BB-EF63-4A0E-B633-8ABB2768DDFE@gmail.com>
Message-ID: <20180605123530.GC20983@bulldog.preining.info>

> > gpg: the signature could not be verified.

Can you repeat this problem?

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From fxcoudert at gmail.com  Tue Jun  5 14:57:04 2018
From: fxcoudert at gmail.com (FX)
Date: Tue, 5 Jun 2018 14:57:04 +0200
Subject: [tex-live] Texlive update failed with signature error
In-Reply-To: <20180605123530.GC20983@bulldog.preining.info>
References: <A24555BB-EF63-4A0E-B633-8ABB2768DDFE@gmail.com>
 <20180605123530.GC20983@bulldog.preining.info>
Message-ID: <548B3CAB-80D5-4D80-84C9-DF4AD50359CD@gmail.com>

Yes, every time this mirror is chosen, the same error is observed.

FX


Le 5 juin 2018 ? 14:35, Norbert Preining <preining at logic.at> a ?crit :

>>> gpg: the signature could not be verified.
> 
> Can you repeat this problem?
> 
> Norbert
> 
> --
> PREINING Norbert                               http://www.preining.info
> Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From preining at logic.at  Tue Jun  5 15:00:43 2018
From: preining at logic.at (Norbert Preining)
Date: Tue, 5 Jun 2018 22:00:43 +0900
Subject: [tex-live] Texlive update failed with signature error
In-Reply-To: <548B3CAB-80D5-4D80-84C9-DF4AD50359CD@gmail.com>
References: <A24555BB-EF63-4A0E-B633-8ABB2768DDFE@gmail.com>
 <20180605123530.GC20983@bulldog.preining.info>
 <548B3CAB-80D5-4D80-84C9-DF4AD50359CD@gmail.com>
Message-ID: <20180605130043.GD20983@bulldog.preining.info>

> Yes, every time this mirror is chosen, the same error is observed.

Hmm, can you please run
  tlmgr -v --repository <your-choosen-mirror> update --list
and send the output here.

Thanks.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From fxcoudert at gmail.com  Tue Jun  5 16:54:25 2018
From: fxcoudert at gmail.com (FX)
Date: Tue, 5 Jun 2018 16:54:25 +0200
Subject: [tex-live] Texlive update failed with signature error
In-Reply-To: <20180605130043.GD20983@bulldog.preining.info>
References: <A24555BB-EF63-4A0E-B633-8ABB2768DDFE@gmail.com>
 <20180605123530.GC20983@bulldog.preining.info>
 <548B3CAB-80D5-4D80-84C9-DF4AD50359CD@gmail.com>
 <20180605130043.GD20983@bulldog.preining.info>
Message-ID: <67313BC5-B866-4B55-B9C1-B4C7EA5F5FD1@gmail.com>

Find below the information requested.
curl is macOS 10.13.4 system curl.

$ curl -V
curl 7.54.0 (x86_64-apple-darwin17.0) libcurl/7.54.0 LibreSSL/2.0.20 zlib/1.2.11 nghttp2/1.24.0
Protocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 pop3s rtsp smb smbs smtp smtps telnet tftp 
Features: AsynchDNS IPv6 Largefile GSS-API Kerberos SPNEGO NTLM NTLM_WB SSL libz HTTP2 UnixSockets HTTPS-proxy 

$ sudo tlmgr -v update --repository http://ctan.crest.fr/tex-archive/systems/texlive/tlnet --list
D:tlmgr:main: ::tldownload_server defined: TeXLive::TLDownload=HASH(0x7fb4d10d1b98)
D:Using system curl (tested).
D:Using shipped /usr/local/texlive/2018/tlpkg/installer/wget/wget.x86_64-darwin for wget (tested).
D:Using shipped /usr/local/texlive/2018/tlpkg/installer/lz4/lz4.x86_64-darwin for lz4 (tested).
D:Using system gzip (tested).
D:Using shipped /usr/local/texlive/2018/tlpkg/installer/xz/xz.x86_64-darwin for xz (tested).
D:Using checksum method digest::sha
D:Testing for gpg in gpg
D: ... gpg not ok! [gpg --version >/dev/null 2>&1]
D:Testing for gpg in gpg2
D: ... gpg not ok! [gpg2 --version >/dev/null 2>&1]
D:Testing for gpg in /usr/local/texlive/2018/tlpkg/installer/gpg/gpg.x86_64-darwin
D:gpg command line: "/usr/local/texlive/2018/tlpkg/installer/gpg/gpg.x86_64-darwin" --homedir "/usr/local/texlive/2018/tlpkg/gpg" --no-secmem-warning --no-permission-warning --lock-never 
D:will verify cryptographic signatures
D:TLPDB.pm: trying to initialize from http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb
D:trying to download http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.xz to /tmp/N5M2fXFn45/kanxa6Z72O
D:persistent connection set up, trying to get http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.xz (for /tmp/N5M2fXFn45/kanxa6Z72O)
D:TLDownload::get_file: response error: 500 Can't verify SSL peers without knowing which Certificate Authorities to trust (for http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.xz)
D:TLUtils::download_file: persistent connection ok, but download failed: http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.xz
D:TLUtils::download_file: retrying with wget.
D:TLUtils::_download_file_program: curl http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.xz /tmp/N5M2fXFn45/kanxa6Z72O
D:downloading http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.xz using curl --user-agent texlive/curl --retry 10 --connect-timeout 30 --silent --output
D:download of http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.xz succeeded
D:TLUtils::download_file: downloading using curl succeeded
D:decompressing /tmp/N5M2fXFn45/kanxa6Z72O to /tmp/N5M2fXFn45/4z3B8K540K
D:found the uncompressed xz file
D:persistent connection set up, trying to get http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512 (for /tmp/N5M2fXFn45/RfbdfXZZ7u)
D:TLDownload::get_file: response error: 500 Can't verify SSL peers without knowing which Certificate Authorities to trust (for http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512)
D:TLUtils::download_file: persistent connection ok, but download failed: http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512
D:TLUtils::download_file: retrying with wget.
D:TLUtils::_download_file_program: curl http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512 /tmp/N5M2fXFn45/RfbdfXZZ7u
D:downloading http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512 using curl --user-agent texlive/curl --retry 10 --connect-timeout 30 --silent --output
D:download of http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512 succeeded
D:TLUtils::download_file: downloading using curl succeeded
D:persistent connection set up, trying to get http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc (for /tmp/N5M2fXFn45/2bOqdPZaKV)
D:TLDownload::get_file: response error: 500 Can't verify SSL peers without knowing which Certificate Authorities to trust (for http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc)
D:TLUtils::download_file: persistent connection ok, but download failed: http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc
D:TLUtils::download_file: retrying with wget.
D:TLUtils::_download_file_program: curl http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc /tmp/N5M2fXFn45/2bOqdPZaKV
D:downloading http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc using curl --user-agent texlive/curl --retry 10 --connect-timeout 30 --silent --output
D:download of http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc succeeded
D:TLUtils::download_file: downloading using curl succeeded
D:verify_checksum: returning 2 and cryptographic signature verification of
  /tmp/N5M2fXFn45/RfbdfXZZ7u
against
  http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc
failed. Output was
gpg: no valid OpenPGP data found.
gpg: the signature could not be verified.
Please remember that the signature file (.sig or .asc)
should be the first file given on the command line.

Please report to texlive at tug.org

/Library/TeX/texbin/tlmgr: signature verification error of /tmp/N5M2fXFn45/4z3B8K540K from http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb: cryptographic signature verification of
  /tmp/N5M2fXFn45/RfbdfXZZ7u
against
  http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc
failed. Output was
gpg: no valid OpenPGP data found.
gpg: the signature could not be verified.
Please remember that the signature file (.sig or .asc)
should be the first file given on the command line.

Please report to texlive at tug.org



From preining at logic.at  Tue Jun  5 17:09:58 2018
From: preining at logic.at (Norbert Preining)
Date: Wed, 6 Jun 2018 00:09:58 +0900
Subject: [tex-live] Texlive update failed with signature error
In-Reply-To: <67313BC5-B866-4B55-B9C1-B4C7EA5F5FD1@gmail.com>
References: <A24555BB-EF63-4A0E-B633-8ABB2768DDFE@gmail.com>
 <20180605123530.GC20983@bulldog.preining.info>
 <548B3CAB-80D5-4D80-84C9-DF4AD50359CD@gmail.com>
 <20180605130043.GD20983@bulldog.preining.info>
 <67313BC5-B866-4B55-B9C1-B4C7EA5F5FD1@gmail.com>
Message-ID: <20180605150958.GA10467@bulldog.preining.info>

Hi

thanks, that explained a lot.

> $ sudo tlmgr -v update --repository http://ctan.crest.fr/tex-archive/systems/texlive/tlnet --list

Try once
  curl http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb
and you will get
  <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
  <html><head>
  <title>301 Moved Permanently</title>
  </head><body>
  <h1>Moved Permanently</h1>
  <p>The document has moved <a href="https://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb">here</a>.</p>
  </body></html>
So then of course signature verification fails.

You need to use **https://** to use this repository.

It is sooo stupid of the maintainer of the mirror not to provide a
redirect but a template html page :-(((

Bottom line, we must inform the mirror maintainer to kill off this
server.

I tried just now with https and that worked out.

Bottomline: not a problem in our code - or well, more or less, we could
try to check the *content* of the downloaded file and see whether this
is something we expect ... work for the future.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From fredhdx at gmail.com  Tue Jun  5 17:40:12 2018
From: fredhdx at gmail.com (Huang Fred)
Date: Tue, 5 Jun 2018 10:40:12 -0500
Subject: [tex-live] Uninstall older tex live version Windows 10
Message-ID: <CAP-WPWxhEREnEQJq3gqWaJ-+4=uAXV9niTX+n4pFT5KzVGzf8g@mail.gmail.com>

Hi,

I have a problem uninstalling Tex 2017 from Windows 10 after I installed
2018. The installation is under C:/texlive (NOT in program files) and there
is no entry in Control Panel->Programs and Features for Texlive at all.

Is it safe to just remove the 2017 folder? Will that affect Texstudio or
Texworks?

Thanks.

Fred
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180605/939fc805/attachment.html>

From jfbu at free.fr  Tue Jun  5 18:57:24 2018
From: jfbu at free.fr (jfbu)
Date: Tue, 5 Jun 2018 18:57:24 +0200
Subject: [tex-live] since when does platex format incorporate e-TeX
	extensions?
Message-ID: <88D4BBB6-D248-4C03-84E5-3AB086DB9034@free.fr>

Hi,

I found very nice platex-en.pdf, which says:

> In recent versions of TEX Live and W32TEX, the default engine
> of pLATEX changed from original pTEX to e-pTEX (pTEX with e-pTEX extension),

I would like to know since when since is the case, and
have not found yet the information in this document.

Can someone please help me out?

(I checked also texlive-en.pdf)

Best,

Jean-Fran?ois



From siepo at cybercomm.nl  Tue Jun  5 20:36:10 2018
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Tue, 5 Jun 2018 20:36:10 +0200
Subject: [tex-live] Uninstall older tex live version Windows 10
In-Reply-To: <CAP-WPWxhEREnEQJq3gqWaJ-+4=uAXV9niTX+n4pFT5KzVGzf8g@mail.gmail.com>
References: <CAP-WPWxhEREnEQJq3gqWaJ-+4=uAXV9niTX+n4pFT5KzVGzf8g@mail.gmail.com>
Message-ID: <20180605183610.GA9911@bitmuis.thuis.internal>

On Tue, Jun 05, 2018 at 10:40:12AM -0500, Huang Fred wrote:
> Hi,
> 
> I have a problem uninstalling Tex 2017 from Windows 10 after I installed
> 2018. The installation is under C:/texlive (NOT in program files) and there
> is no entry in Control Panel->Programs and Features for Texlive at all.

For wX and a user install the installer does not create a registry
entry, since it would show up under Settings / Apps / Apps & features,
where it would trigger an inappropriate UAC prompt and lead to a
failed uninstall.

In this case, there ought to be an uninstall menu entry, although wX
might decide for reasons unknown to not display this menu entry.

But you can invoke the uninstaller manually:
<tlroot>\tlpkg\installer\uninst.bat

-- 
Siep Kroonenberg

From tljack at forallx.net  Tue Jun  5 21:03:47 2018
From: tljack at forallx.net (jack)
Date: Tue, 5 Jun 2018 14:03:47 -0500
Subject: [tex-live] huge extraneous eps file in tlnet
Message-ID: <4aeeb5229c428edd12ca3cfd5f32ca91.squirrel@box5445.bluehost.com>

I found the following unpleasant surprise in TL 2018.  The file

/texmf-dist/doc/latex/latex2e-help-texinfo/latex2e-figures/list.eps

is around 66MB, even though the corresponding pdf and png files are 10K
and 75K respectively.  TL 2017 didn't have this giant file.

Could this file please be removed from TeXLive?

-Jack

From reinhard.kotucha at web.de  Tue Jun  5 23:29:46 2018
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 5 Jun 2018 23:29:46 +0200
Subject: [tex-live] huge extraneous eps file in tlnet
In-Reply-To: <4aeeb5229c428edd12ca3cfd5f32ca91.squirrel@box5445.bluehost.com>
References: <4aeeb5229c428edd12ca3cfd5f32ca91.squirrel@box5445.bluehost.com>
Message-ID: <23319.202.319023.13897@gargle.gargle.HOWL>

On 2018-06-05 at 14:03:47 -0500, jack wrote:

 > I found the following unpleasant surprise in TL 2018.  The file
 > 
 > /texmf-dist/doc/latex/latex2e-help-texinfo/latex2e-figures/list.eps
 > 
 > is around 66MB, even though the corresponding pdf and png files are
 > 10K and 75K respectively.  TL 2017 didn't have this giant file.
 
The EPS file is quite large because binary data is represeted as
hexadecimal ASCII data.  Means: two characters per byte and no
compression.

 > Could this file please be removed from TeXLive?

Please consult the package author.  TeX Live provides what is on CTAN
and CTAN provides what they get from the authors.  The only one who
can remove the file is the package author.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From kakuto at fuk.kindai.ac.jp  Tue Jun  5 23:32:09 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Wed, 6 Jun 2018 06:32:09 +0900
Subject: [tex-live] since when does platex format incorporate
	e-TeXextensions?
In-Reply-To: <88D4BBB6-D248-4C03-84E5-3AB086DB9034@free.fr>
References: <88D4BBB6-D248-4C03-84E5-3AB086DB9034@free.fr>
Message-ID: <8C49AF4675B04A32B9CA44CB029279A1@CJ3001517A>

>> In recent versions of TEX Live and W32TEX, the default engine
>> of pLATEX changed from original pTEX to e-pTEX (pTEX with e-pTEX extension),
>
> I would like to know since when since is the case, and
> have not found yet the information in this document.

It was probably 2011.

Best,
Akira


From beebe at math.utah.edu  Tue Jun  5 23:42:28 2018
From: beebe at math.utah.edu (Nelson H. F. Beebe)
Date: Tue, 5 Jun 2018 15:42:28 -0600
Subject: [tex-live] since when does platex format incorporate
 e-TeXextensions?
In-Reply-To: <8C49AF4675B04A32B9CA44CB029279A1@CJ3001517A>
Message-ID: <CMM.0.95.0.1528234948.beebe@gamma.math.utah.edu>

>> In recent versions of TEX Live and W32TEX, the default engine
>> of pLATEX changed from original pTEX to e-pTEX (pTEX with e-pTEX extension),
>
> I would like to know since when since is the case, and
> have not found yet the information in this document.

The 2010 TeX Live release of platex reports:

    pTeX 3.1415926-p3.1.11 (utf8.euc) (TeX Live 2010)
    kpathsea version 6.0.0
    ptetex 1.1.1

The 2011 release says

    e-pTeX 3.1415926-p3.2-110415-2.3 (utf8.euc) (TeX Live 2011)
    kpathsea version 6.0.1
    ptexenc 1.2.0

The 2018 version says

    e-pTeX 3.14159265-p3.8.0-180226-2.6 (utf8.euc) (TeX Live 2018)
    kpathsea version 6.3.0
    ptexenc version 1.3.6

Thus, the change from pTeX to e-pTeX appeared with TeX Live 2011.


-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- University of Utah                    FAX: +1 801 581 4148                  -
- Department of Mathematics, 110 LCB    Internet e-mail: beebe at math.utah.edu  -
- 155 S 1400 E RM 233                       beebe at acm.org  beebe at computer.org -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe/ -
-------------------------------------------------------------------------------

From karl at freefriends.org  Tue Jun  5 23:59:43 2018
From: karl at freefriends.org (Karl Berry)
Date: Tue, 5 Jun 2018 21:59:43 GMT
Subject: [tex-live] huge extraneous eps file in tlnet
In-Reply-To: <4aeeb5229c428edd12ca3cfd5f32ca91.squirrel@box5445.bluehost.com>
Message-ID: <201806052159.w55Lxh93019557@freefriends.org>

    /texmf-dist/doc/latex/latex2e-help-texinfo/latex2e-figures/list.eps

As one of the maintainers of that document, I removed it and will rework
the example. Sorry for not noticing when it went in. -k

From preining at logic.at  Wed Jun  6 02:15:12 2018
From: preining at logic.at (Norbert Preining)
Date: Wed, 6 Jun 2018 09:15:12 +0900
Subject: [tex-live] tlcritical->tlnet for downloader/compressor
In-Reply-To: <6d33334e-629f-450f-90e9-2e11e374a3e3@t-online.de>
References: <201806032231.w53MVccJ014270@tug.org>
 <1d6fc432-8002-ac95-e832-10e18db8b79a@t-online.de>
 <EE3188C8-A5D7-460E-A58C-89178691A93D@logic.at>
 <5d13a593-4964-73be-1152-92a09f631c41@t-online.de>
 <20180605030727.GD22640@bulldog.preining.info>
 <6d33334e-629f-450f-90e9-2e11e374a3e3@t-online.de>
Message-ID: <20180606001512.GD18985@bulldog.preining.info>

Hi Adrian,

> yes, there is one file with only a .tar extension, but I think that is

Ok, we found the reason, and have switched back to xz for now with
today's update.

Just FYI, the problem is that lz4 tries to be intelligent and when
called like
  lz4 -z file
decides based on the stdout being console or not whether it should send
the output to stdout or to file.lz4

And they don't have an option but one needs to pass in a second filename
  lz4 file file.lz4
(breaking with all the ways other compression programs work ...)

Anyway, we will fix that in due time.

THanks for helping us debugging!

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From h.y.acetaminophen at gmail.com  Wed Jun  6 05:13:37 2018
From: h.y.acetaminophen at gmail.com (Hironobu Yamashita)
Date: Wed, 6 Jun 2018 12:13:37 +0900
Subject: [tex-live] since when does platex format incorporate e-TeX
	extensions?
In-Reply-To: <88D4BBB6-D248-4C03-84E5-3AB086DB9034@free.fr>
References: <88D4BBB6-D248-4C03-84E5-3AB086DB9034@free.fr>
Message-ID: <CAJCZBmRFTcg3bXhPvbZQZnByO10pMw1nE_Xiidabs9bHZfiJMQ@mail.gmail.com>

Hi Jean-Fran?ois,

> Thus, the change from pTeX to e-pTeX appeared with TeX Live 2011.

I'll add that info next time, thanks ;-)

---
Hironobu Yamashita (@aminophen)
Japanese TeX Development Community



2018-06-06 1:57 GMT+09:00 jfbu <jfbu at free.fr>:
> Hi,
>
> I found very nice platex-en.pdf, which says:
>
>> In recent versions of TEX Live and W32TEX, the default engine
>> of pLATEX changed from original pTEX to e-pTEX (pTEX with e-pTEX extension),
>
> I would like to know since when since is the case, and
> have not found yet the information in this document.
>
> Can someone please help me out?
>
> (I checked also texlive-en.pdf)
>
> Best,
>
> Jean-Fran?ois
>
>


From jfbu at free.fr  Wed Jun  6 08:10:58 2018
From: jfbu at free.fr (jfbu)
Date: Wed, 6 Jun 2018 08:10:58 +0200
Subject: [tex-live] since when does platex format incorporate e-TeX
	extensions?
In-Reply-To: <CAJCZBmRFTcg3bXhPvbZQZnByO10pMw1nE_Xiidabs9bHZfiJMQ@mail.gmail.com>
References: <88D4BBB6-D248-4C03-84E5-3AB086DB9034@free.fr>
 <CAJCZBmRFTcg3bXhPvbZQZnByO10pMw1nE_Xiidabs9bHZfiJMQ@mail.gmail.com>
Message-ID: <84118087-D6BB-441A-B561-9128378DA799@free.fr>

Hi,

a great many thanks to all for the information that 
it was with TeX Live 2011 !

Best,

Jean-Fran?ois

Le 6 juin 2018 ? 05:13, Hironobu Yamashita <h.y.acetaminophen at gmail.com> a ?crit :

> Hi Jean-Fran?ois,
> 
>> Thus, the change from pTeX to e-pTeX appeared with TeX Live 2011.
> 
> I'll add that info next time, thanks ;-)
> 
> ---
> Hironobu Yamashita (@aminophen)
> Japanese TeX Development Community
> 
> 
> 
> 2018-06-06 1:57 GMT+09:00 jfbu <jfbu at free.fr>:
>> Hi,
>> 
>> I found very nice platex-en.pdf, which says:
>> 
>>> In recent versions of TEX Live and W32TEX, the default engine
>>> of pLATEX changed from original pTEX to e-pTEX (pTEX with e-pTEX extension),
>> 
>> I would like to know since when since is the case, and
>> have not found yet the information in this document.
>> 
>> Can someone please help me out?
>> 
>> (I checked also texlive-en.pdf)
>> 
>> Best,
>> 
>> Jean-Fran?ois
>> 
>> 



From usenet at siart.de  Thu Jun  7 07:10:13 2018
From: usenet at siart.de (Uwe Siart)
Date: Thu, 07 Jun 2018 07:10:13 +0200
Subject: [tex-live] Cleaning backups doesn't work anymore
Message-ID: <877enbfah6.fsf@siart.de>

After today's update tlmgr fails to clean updates. Here's what I get on
a Win7 machine:

,----
| C:\>tlmgr backup newtx
| saving current status of newtx to C:/Programme1/texlive/2018/tlpkg/backups/newtx.r47889.tar.lz4
| 
| C:\>tlmgr backup --clean=0 --all
| 
| C:\>
`----

After this the backup file newtx.r47889.tar.lz4 is still there.

-- 
Uwe


From preining at logic.at  Thu Jun  7 07:56:17 2018
From: preining at logic.at (Norbert Preining)
Date: Thu, 7 Jun 2018 14:56:17 +0900
Subject: [tex-live] Cleaning backups doesn't work anymore
In-Reply-To: <877enbfah6.fsf@siart.de>
References: <877enbfah6.fsf@siart.de>
Message-ID: <20180607055617.GA4613@burischnitzel.preining.info>

Hi Uwe,

> After this the backup file newtx.r47889.tar.lz4 is still there.

Thanks, fixed now.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From list1 at michaelshell.org  Thu Jun  7 09:34:11 2018
From: list1 at michaelshell.org (Michael Shell)
Date: Thu, 7 Jun 2018 03:34:11 -0400
Subject: [tex-live] huge extraneous eps file in tlnet
In-Reply-To: <23319.202.319023.13897@gargle.gargle.HOWL>
References: <4aeeb5229c428edd12ca3cfd5f32ca91.squirrel@box5445.bluehost.com>
 <23319.202.319023.13897@gargle.gargle.HOWL>
Message-ID: <20180607033411.1646357415d274060f62ae0a@michaelshell.org>

On Tue, 5 Jun 2018 23:29:46 +0200
Reinhard Kotucha <reinhard.kotucha at web.de> wrote:

> The EPS file is quite large because binary data is represeted as
> hexadecimal ASCII data.  Means: two characters per byte and no
> compression.


No, that EPS file is far, far larger than it should be even considering
the loss in compression. That EPS file was probably improperly created
using a high resolution rasterization of the PDF version. Therefore,
unlike the PDF, the EPS file is no longer in vector form.

I went to

https://ctan.org/texarchive/info/latex2e-help-texinfo/latex2e-figures

grabbed a copy of list.pdf, printed it to a .ps file using acrobat reader,
then ran

ps2eps list.ps

which resulted in a good, vector form, EPS file of 200K size.

Edit: In a later post, I see Karl is now working on it. :)


  Cheers,

  Mike Shell

From fxcoudert at gmail.com  Thu Jun  7 11:04:26 2018
From: fxcoudert at gmail.com (FX)
Date: Thu, 7 Jun 2018 11:04:26 +0200
Subject: [tex-live] Texlive update failed with signature error
In-Reply-To: <20180605150958.GA10467@bulldog.preining.info>
References: <A24555BB-EF63-4A0E-B633-8ABB2768DDFE@gmail.com>
 <20180605123530.GC20983@bulldog.preining.info>
 <548B3CAB-80D5-4D80-84C9-DF4AD50359CD@gmail.com>
 <20180605130043.GD20983@bulldog.preining.info>
 <67313BC5-B866-4B55-B9C1-B4C7EA5F5FD1@gmail.com>
 <20180605150958.GA10467@bulldog.preining.info>
Message-ID: <CF376606-5477-45F3-BEA1-AAC96675B145@gmail.com>

Hi Norbert,

> You need to use **https://** to use this repository.

OK. But I actually never asked to use this repository, at first I was just running ?tlmgr update? and it selected the wrong URL all by itself.


> Bottomline: not a problem in our code

Maybe not in the code, but definitely in the mirror list.

Thanks,
FX

From Herbert.Voss at fu-berlin.de  Thu Jun  7 11:58:13 2018
From: Herbert.Voss at fu-berlin.de (Herbert Voss)
Date: Thu, 7 Jun 2018 11:58:13 +0200
Subject: [tex-live] huge extraneous eps file in tlnet
In-Reply-To: <20180607033411.1646357415d274060f62ae0a@michaelshell.org>
References: <4aeeb5229c428edd12ca3cfd5f32ca91.squirrel@box5445.bluehost.com>
 <23319.202.319023.13897@gargle.gargle.HOWL>
 <20180607033411.1646357415d274060f62ae0a@michaelshell.org>
Message-ID: <cb4eafea-6dcb-4dd3-83d7-607092a8adf5@fu-berlin.de>

Am 07.06.18 um 09:34 schrieb Michael Shell:

> I went to
> https://ctan.org/texarchive/info/latex2e-help-texinfo/latex2e-figures
>
> grabbed a copy of list.pdf, printed it to a .ps file using acrobat reader,
> then ran
>
> ps2eps list.ps
>
> which resulted in a good, vector form, EPS file of 200K size.

with

pdftocairo -eps list.pdf list2.eps

the eps is about 24kB

Herbert


From preining at logic.at  Thu Jun  7 15:39:33 2018
From: preining at logic.at (Norbert Preining)
Date: Thu, 7 Jun 2018 22:39:33 +0900
Subject: [tex-live] Texlive update failed with signature error
In-Reply-To: <CF376606-5477-45F3-BEA1-AAC96675B145@gmail.com>
References: <A24555BB-EF63-4A0E-B633-8ABB2768DDFE@gmail.com>
 <20180605123530.GC20983@bulldog.preining.info>
 <548B3CAB-80D5-4D80-84C9-DF4AD50359CD@gmail.com>
 <20180605130043.GD20983@bulldog.preining.info>
 <67313BC5-B866-4B55-B9C1-B4C7EA5F5FD1@gmail.com>
 <20180605150958.GA10467@bulldog.preining.info>
 <CF376606-5477-45F3-BEA1-AAC96675B145@gmail.com>
Message-ID: <20180607133933.GC10446@bulldog.preining.info>

Hi

> > You need to use **https://** to use this repository.
> 
> OK. But I actually never asked to use this repository, at first I was just running ?tlmgr update? and it selected the wrong URL all by itself.

Yes, that is a problem in the mirror.ctan.org redirection it seems. I
will try to find out what can be done.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From Christopher.Wright at rhul.ac.uk  Thu Jun  7 20:37:15 2018
From: Christopher.Wright at rhul.ac.uk (Wright, Christopher)
Date: Thu, 7 Jun 2018 18:37:15 +0000
Subject: [tex-live] TeX Live 2009 installation problem
Message-ID: <VI1PR0302MB27184706111A2C6D3556D0EDAB640@VI1PR0302MB2718.eurprd03.prod.outlook.com>

I have been trying to install TeX Live 2009 (using this older version for compatibility reasons), but when I try to run the installer it almost immediately stops with the following error message:


> 'perl' is not recognised as an internal or external command, operable program or batch file


I am informed that perl should be included with the installer, so that this should not in theory be a problem. Does this problem sound familiar to anyone?


Thanks,


Chris Wright
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180607/b2168733/attachment.html>

From joseph.wright at morningstar2.co.uk  Thu Jun  7 22:25:59 2018
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Thu, 7 Jun 2018 21:25:59 +0100
Subject: [tex-live] TeX Live 2009 installation problem
In-Reply-To: <VI1PR0302MB27184706111A2C6D3556D0EDAB640@VI1PR0302MB2718.eurprd03.prod.outlook.com>
References: <VI1PR0302MB27184706111A2C6D3556D0EDAB640@VI1PR0302MB2718.eurprd03.prod.outlook.com>
Message-ID: <f2bf5e97-854e-01bc-c3c5-3083fe8bc786@morningstar2.co.uk>

On 07/06/2018 19:37, Wright, Christopher wrote:
> I have been trying to install TeX Live 2009 (using this older version for compatibility reasons), but when I try to run the installer it almost immediately stops with the following error message:
> 
> 
>> 'perl' is not recognised as an internal or external command, operable program or batch file
> 
> 
> I am informed that perl should be included with the installer, so that this should not in theory be a problem. Does this problem sound familiar to anyone?
> 
> 
> Thanks,
> 
> 
> Chris Wright

Which OS? I have TL'09 on Windows, re-installed not that long ago with 
no issues.

Joseph


From siepo at cybercomm.nl  Thu Jun  7 22:32:08 2018
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Thu, 7 Jun 2018 22:32:08 +0200
Subject: [tex-live] TeX Live 2009 installation problem
In-Reply-To: <VI1PR0302MB27184706111A2C6D3556D0EDAB640@VI1PR0302MB2718.eurprd03.prod.outlook.com>
References: <VI1PR0302MB27184706111A2C6D3556D0EDAB640@VI1PR0302MB2718.eurprd03.prod.outlook.com>
Message-ID: <20180607203208.GA11924@bitmuis.thuis.internal>

On Thu, Jun 07, 2018 at 06:37:15PM +0000, Wright, Christopher wrote:
> I have been trying to install TeX Live 2009 (using this older version for compatibility reasons), but when I try to run the installer it almost immediately stops with the following error message:
> 
> 
> > 'perl' is not recognised as an internal or external command, operable program or batch file
> 
> 
> I am informed that perl should be included with the installer, so that this should not in theory be a problem. Does this problem sound familiar to anyone?

This is windows? How did you try to install? For windows, there are
a couple of batchfile wrappers:

- install-tl.bat or install-tl-windows.bat, depending on the release
  This one installs everything, with a minimum of questions

- install-tl-advanced.bat which lets you pick and choose

The batchfile takes care of invoking a private copy of perl, which
is more or less invisible to the rest of the system.

Other perl scripts are also invoked via wrappers which know where to
find the hidden perl.

-- 
Siep Kroonenberg

From list1 at michaelshell.org  Fri Jun  8 09:33:03 2018
From: list1 at michaelshell.org (Michael Shell)
Date: Fri, 8 Jun 2018 03:33:03 -0400
Subject: [tex-live] huge extraneous eps file in tlnet
In-Reply-To: <cb4eafea-6dcb-4dd3-83d7-607092a8adf5@fu-berlin.de>
References: <4aeeb5229c428edd12ca3cfd5f32ca91.squirrel@box5445.bluehost.com>
 <23319.202.319023.13897@gargle.gargle.HOWL>
 <20180607033411.1646357415d274060f62ae0a@michaelshell.org>
 <cb4eafea-6dcb-4dd3-83d7-607092a8adf5@fu-berlin.de>
Message-ID: <20180608033303.6fce3236f1a794526fddf0a9@michaelshell.org>

On Thu, 7 Jun 2018 11:58:13 +0200
Herbert Voss <Herbert.Voss at fu-berlin.de> wrote:

> pdftocairo -eps list.pdf list2.eps
> 
> the eps is about 24kB


Interesting utility, Herbert!

But, there is a problem with it on my system, but it probably is because
I have not upgraded the poppler tools in a long time.

On my system, the output eps is clipped at the right side. Adding the
-W option does not seem to have any effect.

If there isn't any clipping in your list2.eps, and color information
is preserved, and conversion of that list2.eps to pdf retains the fonts
in vector form, I would definitely say that pdftocairo is a winner here.


  Cheers and thanks,

  Mike


From usenet at siart.de  Fri Jun  8 09:47:51 2018
From: usenet at siart.de (Uwe Siart)
Date: Fri, 08 Jun 2018 09:47:51 +0200
Subject: [tex-live] Cleaning backups doesn't work anymore
References: <877enbfah6.fsf@siart.de>
 <20180607055617.GA4613@burischnitzel.preining.info>
Message-ID: <87h8mdbty0.fsf@siart.de>

Norbert Preining <preining at logic.at> writes:

>> After this the backup file newtx.r47889.tar.lz4 is still there.
>
> Thanks, fixed now.

Thanks. Seems to work correctly again.

-- 
Uwe


From kakuto at fuk.kindai.ac.jp  Fri Jun  8 11:06:42 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Fri, 8 Jun 2018 18:06:42 +0900
Subject: [tex-live]  huge extraneous eps file in tlnet
In-Reply-To: <20180605183610.GA9911@bitmuis.thuis.internal>
References: <CAP-WPWxhEREnEQJq3gqWaJ-+4=uAXV9niTX+n4pFT5KzVGzf8g@mail.gmail.com>
 <20180605183610.GA9911@bitmuis.thuis.internal>
Message-ID: <AC3E9222D9EA4D21BE436051EAB54B79@CJ3001517A>

> On my system, the output eps is clipped at the right side.

pdftocairo -ps list.pdf list2.ps

seems not to clip at the right side.

Best,
Akira


From zdenek.wagner at gmail.com  Fri Jun  8 11:26:18 2018
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 8 Jun 2018 11:26:18 +0200
Subject: [tex-live] huge extraneous eps file in tlnet
In-Reply-To: <20180608033303.6fce3236f1a794526fddf0a9@michaelshell.org>
References: <4aeeb5229c428edd12ca3cfd5f32ca91.squirrel@box5445.bluehost.com>
 <23319.202.319023.13897@gargle.gargle.HOWL>
 <20180607033411.1646357415d274060f62ae0a@michaelshell.org>
 <cb4eafea-6dcb-4dd3-83d7-607092a8adf5@fu-berlin.de>
 <20180608033303.6fce3236f1a794526fddf0a9@michaelshell.org>
Message-ID: <CAC1phyauz9NgXUMi3QA3G6FPor1egk9Q1sTDCMPN3NU+WQampg@mail.gmail.com>

2018-06-08 9:33 GMT+02:00 Michael Shell <list1 at michaelshell.org>:

> On Thu, 7 Jun 2018 11:58:13 +0200
> Herbert Voss <Herbert.Voss at fu-berlin.de> wrote:
>
> > pdftocairo -eps list.pdf list2.eps
> >
> > the eps is about 24kB
>
>
> Interesting utility, Herbert!
>
> But, there is a problem with it on my system, but it probably is because
> I have not upgraded the poppler tools in a long time.
>
> On my system, the output eps is clipped at the right side. Adding the
> -W option does not seem to have any effect.
>
> If there isn't any clipping in your list2.eps, and color information
> is preserved, and conversion of that list2.eps to pdf retains the fonts
> in vector form, I would definitely say that pdftocairo is a winner here.
>

I am not sure whether it has anything to do with poppler, it probably uses
its own library "cairo". This library is also used in gnuplot and the
output is vector graphic with embedded fonts. It can also embed TrueType
and OpenType fonts.

>
>
>   Cheers and thanks,
>
>   Mike
>
>

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180608/f9c3fc1c/attachment-0001.html>

From kakuto at fuk.kindai.ac.jp  Fri Jun  8 11:51:54 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Fri, 8 Jun 2018 18:51:54 +0900
Subject: [tex-live] huge extraneous eps file in tlnet
Message-ID: <E172EE055C4841FCB96627C649FAE0BE@CJ3001517A>

>> On my system, the output eps is clipped at the right side.
>>
> pdftocairo -ps list.pdf list2.ps
>
> seems not to clip at the right side.
>

ps2eps list2.ps

may be used to obtain list2.eps

Best,
Akira


From Christopher.Wright at rhul.ac.uk  Fri Jun  8 12:25:28 2018
From: Christopher.Wright at rhul.ac.uk (Wright, Christopher)
Date: Fri, 8 Jun 2018 10:25:28 +0000
Subject: [tex-live] TeX Live 2009 installation problem
In-Reply-To: <20180607203208.GA11924@bitmuis.thuis.internal>
References: <VI1PR0302MB27184706111A2C6D3556D0EDAB640@VI1PR0302MB2718.eurprd03.prod.outlook.com>,
 <20180607203208.GA11924@bitmuis.thuis.internal>
Message-ID: <AM4PR0302MB27076B51AD26AD8EBE74CFA4AB7B0@AM4PR0302MB2707.eurprd03.prod.outlook.com>

Windows 10. I tried both install-tl.bat and install-tl-advanced.bat with the same result.


CW

________________________________
From: tex-live <tex-live-bounces at tug.org> on behalf of Siep Kroonenberg <siepo at cybercomm.nl>
Sent: 07 June 2018 21:32:08
To: tex-live at tug.org
Subject: Re: [tex-live] TeX Live 2009 installation problem

On Thu, Jun 07, 2018 at 06:37:15PM +0000, Wright, Christopher wrote:
> I have been trying to install TeX Live 2009 (using this older version for compatibility reasons), but when I try to run the installer it almost immediately stops with the following error message:
>
>
> > 'perl' is not recognised as an internal or external command, operable program or batch file
>
>
> I am informed that perl should be included with the installer, so that this should not in theory be a problem. Does this problem sound familiar to anyone?

This is windows? How did you try to install? For windows, there are
a couple of batchfile wrappers:

- install-tl.bat or install-tl-windows.bat, depending on the release
  This one installs everything, with a minimum of questions

- install-tl-advanced.bat which lets you pick and choose

The batchfile takes care of invoking a private copy of perl, which
is more or less invisible to the rest of the system.

Other perl scripts are also invoked via wrappers which know where to
find the hidden perl.

--
Siep Kroonenberg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180608/1f71e7ed/attachment.html>

From siepo at cybercomm.nl  Fri Jun  8 13:40:24 2018
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Fri, 8 Jun 2018 13:40:24 +0200
Subject: [tex-live] TeX Live 2009 installation problem
In-Reply-To: <AM4PR0302MB27076B51AD26AD8EBE74CFA4AB7B0@AM4PR0302MB2707.eurprd03.prod.outlook.com>
References: <VI1PR0302MB27184706111A2C6D3556D0EDAB640@VI1PR0302MB2718.eurprd03.prod.outlook.com>
 <20180607203208.GA11924@bitmuis.thuis.internal>
 <AM4PR0302MB27076B51AD26AD8EBE74CFA4AB7B0@AM4PR0302MB2707.eurprd03.prod.outlook.com>
Message-ID: <20180608114024.GA1718@bitmuis.nl>

On Fri, Jun 08, 2018 at 10:25:28AM +0000, Wright, Christopher wrote:
> Windows 10. I tried both install-tl.bat and install-tl-advanced.bat with the same result.

I cannot reproduce this with the 2009 release. Both double-clicking
in explorer and explicitly invoking from either a cmd.exe- or
a powershell command-line works fine.

We can try to debug this, or you can make use of the fact that the
dvd of this release is still a real `live' release, i.e. after
prepending <root>\bin\win32 to the searchpath a command `pdflatex
filename' should just work.

-- 
Siep Kroonenberg

From karl at freefriends.org  Mon Jun 11 00:25:53 2018
From: karl at freefriends.org (Karl Berry)
Date: Sun, 10 Jun 2018 22:25:53 GMT
Subject: [tex-live] bug report of bibtex
In-Reply-To: <9e733c4a-d316-2ea1-6a83-2624241439e3@psu.edu>
Message-ID: <201806102225.w5AMProp014591@freefriends.org>

Hi John,

        bibtex output/main.aux

    Then the search for subsidiary .aux files is changed from no path to 
    just the path component of the top-level aux file.

I just committed a change that attempts to implement this (edited patch
below for the record, r47979). Hope I didn't break the world.

That is, when looking for a subsidiary aux file, it first checks the
current directory (no change), then the dirname of the main aux file.

It occurred to me that another approach to this might be to give BibTeX
the -output-directory option. I have the start of a patch for that, but
then turned out to require messing around with the kpse_out_name_ok
logic in bibtex.ch, and I ran out of energy. If anyone feels like giving
it a try, let me know and I'll send what I've got.

Anyway, hope the present change helps, eventually. --thanks, karl.


Index: ChangeLog
===================================================================
--- ChangeLog	(revision 47973)
+++ ChangeLog	(working copy)
@@ -1,3 +1,15 @@
+2018-06-08  Karl Berry  <karl at freefriends.org>
+
+	* bibtex.ch (142): also try opening subsidiary .aux files
+	via a_open_in_with_dirname.
+	(bib_makecstring): new fn.
+	* cpascal.h (aopeninwithdirname): new #define.
+	* lib/openclose.c (open_input_with_dirname): new fn.
+	* tests/bibtex-auxinclude.test: new test.
+	* tests/auxinclude*.*: files for test.
+	Suggestion from John Collins. See thread from
+	http://tug.org/pipermail/tex-live/2018-May/041624.html.
+
 2018-05-03  Karl Berry  <karl at freefriends.org>
 
 	* patgen.ch (trie_size, triec_size): increase greatly.
Index: NEWS
===================================================================
--- NEWS	(revision 47973)
+++ NEWS	(working copy)
@@ -1,5 +1,9 @@
 This file records noteworthy changes.  (Public domain.)
 
+BibTeX: subsidiary .aux files are looked for in the directory of the
+main .aux file, if not found as-is (to work better with -output-directory).
+
+
 2018 (for TeX Live 2018, 14 April 2018)
 * Directories in the -output-directory do not mask files by the same name.
 
Index: bibtex.ch
===================================================================
--- bibtex.ch	(revision 47973)
+++ bibtex.ch	(working copy)
@@ -413,8 +413,24 @@
 begin rewrite(f,name_of_file,'/O'); a_open_out:=rewrite_OK(f);
 end;
 @y
-@ File opening will be done in C.
+@ File opening will be done in C. But we want an auxiliary function to
+change a \BibTeX\ string into a C string, to keep string pool stuff
+out of the C code in @.{lib/openclose.c}.
+
 @d no_file_path = -1
+
+@<Procedures and functions for all file...@>=
+function bib_makecstring(s:str_number):cstring;
+var cstr:cstring;
+    i:pool_pointer;
+begin
+  cstr := xmalloc_array (ASCII_code, length (s) + 1);
+  for i := 0 to length(s) - 1 do begin
+    cstr[i] := str_pool[str_start[s] + i];
+  end;
+  cstr[length(s)] := 0;
+  bib_makecstring := cstr;
+exit: end;
 @z
 
 @x [39] Do file closing in C.
@@ -1008,8 +1024,15 @@
         end;
 @z
 
-% [142] Don't pad with blanks.
-% Don't use a path to search for subsidiary aux files, either.
+% [142] Don't pad with blanks, terminate with null.
+% Don't use a path to search for subsidiary aux files,
+% but do check the directory of the main .aux file.
+% 
+% This last is useful, for example, when --output-dir is used and the
+% .aux file has an \@input directive resulting from a LaTeX \include;
+% see bibtex-auxinclude.test. It's necessary because BibTeX itself does
+% not have --output-directory. Maybe it would be (have been?) better to
+% add it, but seems too intrusive now? Different bbl location.
 @x
 while (name_ptr <= file_name_size) do   {pad with blanks}
     begin
@@ -1019,8 +1042,11 @@
 if (not a_open_in(cur_aux_file)) then
 @y
 name_of_file[name_ptr] := 0;
-if (not kpse_in_name_ok(stringcast(name_of_file+1)) or
-    not a_open_in(cur_aux_file, no_file_path)) then
+if (not kpse_in_name_ok(stringcast(name_of_file+1))
+    or (not a_open_in(cur_aux_file, no_file_path)
+        and not a_open_in_with_dirname(cur_aux_file, no_file_path,
+                                       bib_makecstring(top_lev_str)))
+    ) then
 @z
 
 % [152] This goto gets turned into a setjmp/longjmp by ./convert --
Index: cpascal.h
===================================================================
--- cpascal.h	(revision 47973)
+++ cpascal.h	(working copy)
@@ -141,6 +141,9 @@
 #define aopenout(f)  open_output (&(f), FOPEN_W_MODE)
 #define aclose close_file
 
+/* Used in BibTeX for subsidiary aux files. */
+#define aopeninwithdirname(f,p,s) open_input_with_dirname (&(f), p, s)
+
 /* How to output to the GF or DVI file.  */
 #define WRITE_OUT(a, b)							\
   if ((size_t) fwrite ((char *) &OUT_BUF[a], sizeof (OUT_BUF[a]),       \
Index: lib/openclose.c
===================================================================
--- lib/openclose.c	(revision 47973)
+++ lib/openclose.c	(working copy)
@@ -297,7 +297,35 @@
 
     return *f_ptr != NULL;
 }
+
 
+/* Open input file *F_PTR (of type FILEFMT), prepending the directory
+   part of the string FNAME. This is called from BibTeX, to open
+   subsidiary .aux files, with FNAME set to the top-level aux file. The
+   idea is that if invoked as bibtex somedir/foo.aux, and foo.aux has an
+   \@input{bar} statement, we should look for somedir/bar.aux too.
+   (See bibtex-auxinclude.test.)  */
+
+boolean
+open_input_with_dirname (FILE **f_ptr, int filefmt, const char *fname)
+{
+  boolean ret = false;
+  char *top_dir = xdirname (fname);
+
+  if (top_dir && *top_dir && !STREQ (top_dir, ".")) {
+    char *newname = concat3 (top_dir, DIR_SEP_STRING, nameoffile+1);
+    free (nameoffile);
+    nameoffile = xmalloc (strlen (newname) + 2);
+    strcpy (nameoffile + 1, newname);
+    ret = open_input (f_ptr, filefmt, FOPEN_RBIN_MODE);
+    free (newname);
+  }
+
+  free (top_dir);
+  return ret;
+}
+
+
 /* Open an output file F either in the current directory or in
    $TEXMFOUTPUT/F, if the environment variable `TEXMFOUTPUT' exists.
    (Actually, this also applies to the BibTeX and MetaPost output files,
Index: web2c/common.defines
===================================================================
--- web2c/common.defines	(revision 47973)
+++ web2c/common.defines	(working copy)
@@ -97,6 +97,7 @@
 @define function abs ();
 @define function addressof ();
 @define function aopenin ();
+ at define function aopeninwithdirname ();
 @define function aopenout ();
 @define function atof ();
 @define function atoi ();

From martin at dante.de  Tue Jun 12 17:51:05 2018
From: martin at dante.de (Martin Sievers)
Date: Tue, 12 Jun 2018 17:51:05 +0200
Subject: [tex-live] How to add my very own unsigned repository
Message-ID: <f5c71656-88bd-29f0-2bea-9c5c2d38bd4e@dante.de>

Dear all,

I would like to add a custom (unsigned) repository to TeX Live in order 
to distribute updates of project-specific LaTeX class and style files to 
my colleagues.

I followed the section "Multiple Repositories" from the tlmgr help pages 
and the recent version of "How to set up your own TeX Live package 
repository". I ended up having a valid repository (at least in my 
opinion) using "tl-update-containers" with the "-no-sign" option which 
is successfully added to the repository list.

However, when testing "tlmgr --location=/tmp/TeXLive_MUYA list" only 
gives me:
tlmgr: main database at /tmp/TeXLive_MUYA is not signed

Installation works fine though from this local repository.

However, when trying to copy the repository to a web server and 
installing the packages from there, I get the following error:
/usr/local/texlive/current/bin/i386-linux/tlmgr: signature verification 
error of /tmp/mXX6S0Ljag/ko5GlUdB_5 from 
http://MYSERVER/tlnet/tlpkg/texlive.tlpdb: cryptographic signature 
verification of /tmp/mXX6S0Ljag/zqh8EyD4kn against 
http://MYSERVER/tlnet/tlpkg/texlive.tlpdb.sha512.asc
failed. Output was
gpg: Keine g??ltigen OpenPGP-Daten gefunden.
gpg: Die Signatur konnte nicht ??berpr??ft werden.
Denken Sie daran, da?? die Datei mit der Signatur (.sig oder .asc)
als erste in der Kommandozeile stehen sollte.

Do you have an idea, what went wrong here? Is it not possible to copy a 
local unsigned repository to some web space? I thought, that using 
"-no-sign" is sufficient when creating the repository and that there is 
no verification for additional repositories by default. Did I understand 
this wrongly?

Thank you.

Best regards
Martin

From esr at thyrsus.com  Tue Jun 12 21:16:13 2018
From: esr at thyrsus.com (esr at thyrsus.com)
Date: Tue, 12 Jun 2018 15:16:13 -0400 (EDT)
Subject: [tex-live] Problems in devnag.1, synctex.1
Message-ID: <20180612191613.C5D563A4F1E@snark.thyrsus.com>

This is automatically generated email about markup problems in a man
page for which you appear to be responsible.  If you are not the right
person or list, please tell me so I can correct my database.

See http://catb.org/~esr/doclifter/bugs.html for details on how and
why these patches were generated.  Feel free to email me with any
questions.  Note: These patches do not change the modification date of
any manual page.  You may wish to do that by hand.

I apologize if this message seems spammy or impersonal. The volume of
markup bugs I am tracking is over five hundred - there is no real
alternative to generating bugmail from a database and template.

--
                             Eric S. Raymond
-------------- next part --------------
Problems with devnag.1:

Ambiguous or invalid backslash.  This doesn't cause groff a problem.
but it confuses doclifter and may confuse older troff implementations.

--- devnag.1-unpatched	2012-07-06 10:48:31.946717382 -0400
+++ devnag.1	2012-07-06 10:49:24.874716396 -0400
@@ -7,7 +7,7 @@
 .PP
 .B devnag
 is a preprocessor that reads transliterated Devanagari input delimited by
-\dn and converts it into a form with which TeX is familiar.
+\\dn and converts it into a form with which TeX is familiar.
 .PP
 The preprocessor
 handles the details of character placement such as the alignment of
-------------- next part --------------
Problems with synctex.1:

List syntax error. This means .IP, .TP or .RS/.RE markup is garbled.
Common causes include .TP just before a section header, .TP entries
with tags but no bodies, and mandoc lists with no trailing .El.
These confuse doclifter, and may also mess up stricter man-page
browsers like Xman and Rosetta.

--- synctex.1-unpatched	2018-05-28 03:39:05.347651587 -0400
+++ synctex.1	2018-05-28 03:39:44.143387929 -0400
@@ -14,18 +14,20 @@
 .Pp
 Run `synctex help' to access the built-in tool documentation.
 .Sh TEX ENGINE OPTION -synctex=NUMBER
+.Bl -bullet compact
 .It
-.Li If NUMBER=0 or no option is given, no synctex file is created.
+If NUMBER=0 or no option is given, no synctex file is created.
 .It
-.Li If NUMBER<0, synctex files are text files.
+If NUMBER<0, synctex files are text files.
 .It
-.Li If NUMBER>0, synctex files are compressed with gz.
+If NUMBER>0, synctex files are compressed with gz.
 .It
-.Li If NUMBER&2, no .gz extension is used.
+If NUMBER&2, no .gz extension is used.
 .It
-.Li If NUMBER&4, activate form support, useful for pdftex.
+If NUMBER&4, activate form support, useful for pdftex.
 .It
-.Li If NUMBER&8, better file compression.
+If NUMBER&8, better file compression.
+.El
 .Pp
 Use for example `pdftex -synctex=15 foo.tex' to activate all the options.
 .Pp

From preining at logic.at  Wed Jun 13 01:42:19 2018
From: preining at logic.at (Norbert Preining)
Date: Wed, 13 Jun 2018 08:42:19 +0900
Subject: [tex-live] How to add my very own unsigned repository
In-Reply-To: <f5c71656-88bd-29f0-2bea-9c5c2d38bd4e@dante.de>
References: <f5c71656-88bd-29f0-2bea-9c5c2d38bd4e@dante.de>
Message-ID: <20180612234219.GA27142@burischnitzel.preining.info>

Hi Martin,

> "tl-update-containers" with the "-no-sign" option which is successfully

Sounds correct.

> However, when testing "tlmgr --location=/tmp/TeXLive_MUYA list" only gives
> me:
> tlmgr: main database at /tmp/TeXLive_MUYA is not signed

Yes, that is true. The reason is as follows:
We allow unsigned subsidiary (additional) repositories, but the *main*
repository needs to be signed.

When you use --location or --repository, the one that is passed on to is
considered the *main* repository since it is the only one, and thus
needs to be signed.

Two options:
* use --no-verify-downloads
* add it to the list of repos with
  tlmgr repo add 

In both cases it should be working.

> However, when trying to copy the repository to a web server and installing
> the packages from there, I get the following error:
> /usr/local/texlive/current/bin/i386-linux/tlmgr: signature verification
> error of /tmp/mXX6S0Ljag/ko5GlUdB_5 from
> http://MYSERVER/tlnet/tlpkg/texlive.tlpdb: cryptographic signature
> verification of /tmp/mXX6S0Ljag/zqh8EyD4kn against
> http://MYSERVER/tlnet/tlpkg/texlive.tlpdb.sha512.asc
> failed. Output was

That is strange, do you by chance have set
  --require-verification
either on the command line, or much more likely, in the tlmgr config
file?

If you could send me (also in private) the output of
  tlmgr -v ....
call that would help

> Do you have an idea, what went wrong here? Is it not possible to copy a
> local unsigned repository to some web space? I thought, that using
> "-no-sign" is sufficient when creating the repository and that there is no
> verification for additional repositories by default. Did I understand this
> wrongly?

No, that is correct. Or at least it should be correct ;-)

All the best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From preining at logic.at  Wed Jun 13 11:52:50 2018
From: preining at logic.at (Norbert Preining)
Date: Wed, 13 Jun 2018 18:52:50 +0900
Subject: [tex-live] How to add my very own unsigned repository
In-Reply-To: <f5c71656-88bd-29f0-2bea-9c5c2d38bd4e@dante.de>
References: <f5c71656-88bd-29f0-2bea-9c5c2d38bd4e@dante.de>
Message-ID: <20180613095250.GA27137@burischnitzel.preining.info>

Answer for all here,

> Do you have an idea, what went wrong here? Is it not possible to copy a
> local unsigned repository to some web space? I thought, that using

The problem is with curl, which is used after LWP didn't find the
signature file.

curl interestingly returns 0 on all operations unless --fail is passed
in.

I have committed a new version of TLConfig.pm which adds the --fail
option to curl.

If someone needs this fix immediately, please update TLConfig.pm
(in tlpkg/TeXLive/TLConfig.pm) with the following patch:
@@ -116,7 +116,7 @@ our $DefaultFallbackDownloader = "wget";
 our @AcceptedFallbackDownloaders = qw/curl wget/;
 our %FallbackDownloaderProgram = ( 'wget' => 'wget', 'curl' => 'curl');
 our %FallbackDownloaderArgs = (
-  'curl' => ['--user-agent', 'texlive/curl', '--retry', '10',
+  'curl' => ['--user-agent', 'texlive/curl', '--retry', '10', '--fail',
              '--connect-timeout', "$NetworkTimeout", '--silent', '--output'],
   'wget' => ['--user-agent=texlive/wget', '--tries=10',
              "--timeout=$NetworkTimeout", '-q', '-O'],

That is, simply add in the line starting with 
  'curl' =>
at the end the following
  '--fail',
(including the comma!)

Thanks

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From scolby33 at gmail.com  Wed Jun 13 09:15:07 2018
From: scolby33 at gmail.com (Scott Colby)
Date: Wed, 13 Jun 2018 00:15:07 -0700
Subject: [tex-live] Tlmgr gpg error
Message-ID: <556c681b-7c40-4e7e-881a-58a72a7285da@Spark>

Hello,

I just experienced the following error:

$ sudo tlmgr update --all
tlmgr: verification of checksum for http://mirrors.ibiblio.org/pub/mirrors/CTAN/systems/texlive/tlnet failed: cryptographic signature verification of
/tmp/nJHgGxaxI2/pJUjNDnB5T
against
http://mirrors.ibiblio.org/pub/mirrors/CTAN/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc
failed. Output was
gpg: verify signatures failed: Unknown system error

Please report to texlive at tug.org


I am running macOS 10.13.5 with tlmgr revision 47951 and gpg (via Homebrew) 2.2.8.

Please let me know if there is anything I should try to debug or ameliorate this issue.


Thanks,
Scott

Scott Colby
Chemistry
Stanford University
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180613/3a2e35b4/attachment.html>

From martin at dante.de  Wed Jun 13 20:48:28 2018
From: martin at dante.de (Martin Sievers)
Date: Wed, 13 Jun 2018 20:48:28 +0200
Subject: [tex-live] Setting predefined pinning information to a custom
	repository?
Message-ID: <649af4f3-a9da-1738-0c77-2fc9c77701f5@dante.de>

Dear all,

after having successfully set up my custom repository I wonder, whether
it is possible to attach pinning information directly to it, i.e. users
should not have to set them manually using some kind of shell. I have
neither found anything in the documentation nor within the GUI. Is the
file pinning.txt an meant for that?

Background: I have some users who are not familiar with command line
working ;-). A fixed setting would make their work easier (and mine as well)

Thank you.

Best regards
Martin

From karl at freefriends.org  Thu Jun 14 00:01:52 2018
From: karl at freefriends.org (Karl Berry)
Date: Wed, 13 Jun 2018 22:01:52 GMT
Subject: [tex-live] Problems in devnag.1, synctex.1
In-Reply-To: <20180612191613.C5D563A4F1E@snark.thyrsus.com>
Message-ID: <201806132201.w5DM1q5s007141@freefriends.org>

Hi Eric,

    devnag.1
    -\dn and converts it into a form with which TeX is familiar.
    +\\dn and converts it into a form with which TeX is familiar.

We've discussed that one already. It is (and has been) fixed in both the
TL sources and runtime, but apparently never gets updated in your
database :).

    List syntax error. This means .IP, .TP or .RS/.RE markup is garbled.
    [...]
    --- synctex.1-unpatched	2018-05-28 03:39:05.347651587 -0400
    +++ synctex.1	2018-05-28 03:39:44.143387929 -0400
    
I take your word for it. Fix committed in TL r48008.
However, your change:

    +.Bl -bullet compact

FYI, the "compact" is not understood by either the unmodified upstream
GNU groff 1.22.3, or groff as distributed with CentOS 7 (fully patched).
Specifically, after applying your patch, the command:
    groff -man -t -rS11 synctex.1
results in the error:
  mdoc warning: Unknown keyword `compact' in .Bl macro (#17)
with both of those versions of groff.

For our purposes, I just left out the "compact". You may want to
adjust your setup not to suggest it. --best, karl.

From esr at thyrsus.com  Thu Jun 14 06:00:35 2018
From: esr at thyrsus.com (Eric S. Raymond)
Date: Thu, 14 Jun 2018 00:00:35 -0400
Subject: [tex-live] Problems in devnag.1, synctex.1
In-Reply-To: <201806132201.w5DM1q5s007141@freefriends.org>
References: <20180612191613.C5D563A4F1E@snark.thyrsus.com>
 <201806132201.w5DM1q5s007141@freefriends.org>
Message-ID: <20180614040035.GE23233@thyrsus.com>

Karl Berry <karl at freefriends.org>:
> Hi Eric,
> 
>     devnag.1
>     -\dn and converts it into a form with which TeX is familiar.
>     +\\dn and converts it into a form with which TeX is familiar.
> 
> We've discussed that one already. It is (and has been) fixed in both the
> TL sources and runtime, but apparently never gets updated in your
> database :).

It's marked "superseded" as it should be in that case.  Looking...
yep, my robomailer had a minor bug, now fixed.

>     List syntax error. This means .IP, .TP or .RS/.RE markup is garbled.
>     [...]
>     --- synctex.1-unpatched	2018-05-28 03:39:05.347651587 -0400
>     +++ synctex.1	2018-05-28 03:39:44.143387929 -0400
>     
> I take your word for it. Fix committed in TL r48008.
> However, your change:
> 
>     +.Bl -bullet compact
> 
> FYI, the "compact" is not understood by either the unmodified upstream
> GNU groff 1.22.3, or groff as distributed with CentOS 7 (fully patched).
> Specifically, after applying your patch, the command:
>     groff -man -t -rS11 synctex.1
> results in the error:
>   mdoc warning: Unknown keyword `compact' in .Bl macro (#17)
> with both of those versions of groff.
> 
> For our purposes, I just left out the "compact". You may want to
> adjust your setup not to suggest it. --best, karl.

That shoulds be "-compact", which is a documented modifier to .Bl. 
-- 
		<a href="http://www.catb.org/~esr/">Eric S. Raymond</a>

My work is funded by the Internet Civil Engineering Institute: https://icei.org
Please visit their site and donate: the civilization you save might be your own.



From preining at logic.at  Thu Jun 14 06:30:30 2018
From: preining at logic.at (Norbert Preining)
Date: Thu, 14 Jun 2018 13:30:30 +0900
Subject: [tex-live] Setting predefined pinning information to a custom
 repository?
In-Reply-To: <649af4f3-a9da-1738-0c77-2fc9c77701f5@dante.de>
References: <649af4f3-a9da-1738-0c77-2fc9c77701f5@dante.de>
Message-ID: <20180614043030.GA6137@bulldog.preining.info>

Hi Martin,

> it is possible to attach pinning information directly to it, i.e. users
> should not have to set them manually using some kind of shell. I have

No, that is not possible at the moment.

What *could* be done is a switch to
  tlmgr repo add ....
called
  --pin-all
that when given automatically adds pinning of all packages from the
repo, the equivalent of
  tlmgr pinning add foobar *

But that is not something that will be out in a few days ;-)

WDYT? Karl?

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From martin at dante.de  Thu Jun 14 10:02:27 2018
From: martin at dante.de (Martin Sievers)
Date: Thu, 14 Jun 2018 10:02:27 +0200
Subject: [tex-live] Setting predefined pinning information to a custom
 repository?
In-Reply-To: <20180614043030.GA6137@bulldog.preining.info>
References: <649af4f3-a9da-1738-0c77-2fc9c77701f5@dante.de>
 <20180614043030.GA6137@bulldog.preining.info>
Message-ID: <f2f08363-0a46-4ba7-3e17-1a5d0fd2fb32@dante.de>

Am 14.06.2018 um 06:30 schrieb Norbert Preining:
> Hi Martin,
> 
>> it is possible to attach pinning information directly to it, i.e. users
>> should not have to set them manually using some kind of shell. I have
> 
> No, that is not possible at the moment.
> 
> What *could* be done is a switch to
>    tlmgr repo add ....
> called
>    --pin-all
> that when given automatically adds pinning of all packages from the
> repo, the equivalent of
>    tlmgr pinning add foobar *
> 
> But that is not something that will be out in a few days ;-)
> 
> WDYT? Karl?
> 
> Norbert

Hi Norbert,

okay. Then I keep my fingers crossed, that "my" users won't curse me for 
having to use a shell/command line ;-)

I might send them a script to doubleclick ...

Best regards
Martin



From preining at logic.at  Sat Jun 16 01:26:39 2018
From: preining at logic.at (Norbert Preining)
Date: Sat, 16 Jun 2018 08:26:39 +0900
Subject: [tex-live] gpg updated
Message-ID: <20180615232639.GC22810@bulldog.preining.info>

Dear all,

I have updated gpg in tlgpg to version 1.4.23 for Windows.

Please update your gpg if installed using
  tlmgr --repo http://www.preining.info/tlgpg update tlgpg

Thanks

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From paul at paulromer.net  Sun Jun 17 01:51:02 2018
From: paul at paulromer.net (Paul Romer)
Date: Sat, 16 Jun 2018 19:51:02 -0400
Subject: [tex-live] Possible security problem -- ctan mirrors at
 concertpass.com and hoobly.com
Message-ID: <CAKgbKVgFeXKc470unb7VkSfT1-wTjMinv2hVeUDm4Hj1ROrvSw@mail.gmail.com>

Today, Tex Live Utility tried to connect to a ctan mirror at concertpass.com.
This seemed unusual.

I looked on the ??status page at https://ctan.org/mirrors/mirmon and saw a
few other .com mirrors in the US:


?
A Virus Total scan of concernpass.com and mirrors.concertpass.com showed no
malware, but when I looked a little further, it looks like there were
suspect files at hoobly.com in the recent past:


?
I will look for another security related address to send this information,
but thought I should what I have now.

Paul Romer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180616/92d36afa/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: malware at hoobly-com.png
Type: image/png
Size: 288797 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180616/92d36afa/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ctan-mirrors.jpg
Type: image/jpeg
Size: 114449 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180616/92d36afa/attachment-0001.jpg>

From lstonys at vtex.lt  Mon Jun 18 10:05:40 2018
From: lstonys at vtex.lt (Linas Stonys)
Date: Mon, 18 Jun 2018 11:05:40 +0300
Subject: [tex-live] TL2018 runscript problem
Message-ID: <d08af1b8-b532-0464-3e61-0819b9fe9644@vtex.lt>

Hi,
runscript with my local programs doesn't work any more.
They are in TEXMFLOCAL and used to work well with TL2016. Now I'm 
getting error:
d:\texroot\2018\bin\win32\runscript.tlu:815: 
d:\texroot\2018\bin\win32\runscript.tlu:770: no appropriate script or 
program found: setmd5info
 ?Problem appears because of? os.setenv('TEXMF', TEXMFDIST):

"""""""""""""""""
if not ARGV then
*os.setenv('TEXMF', TEXMFDIST)*
 ? local extlist = 
'.tlu;.texlua;.pl;.lua;.rb;.py;.tcl;.jar;.vbs;.js;.bat;.cmd;\0'
 ? local progfullname = search_path(progname, BINDIR, '.tlu;.bat;.cmd') or
 ?????????????????????? assert(find_texmfscript(progname, extlist))
 ? os.setenv('TEXMF', nil)
"""""""""""""""""

Linas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180618/68b1e38e/attachment.html>

From kakuto at fuk.kindai.ac.jp  Mon Jun 18 10:43:48 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Mon, 18 Jun 2018 17:43:48 +0900
Subject: [tex-live] TL2018 runscript problem
In-Reply-To: <d08af1b8-b532-0464-3e61-0819b9fe9644@vtex.lt>
References: <d08af1b8-b532-0464-3e61-0819b9fe9644@vtex.lt>
Message-ID: <2544E2E0354C42AF98851421F851D301@CJ3001517A>

> runscript with my local programs doesn't work any more. 
> They are in TEXMFLOCAL and used to work well with TL2016. Now I'm getting error:
> d:\texroot\2018\bin\win32\runscript.tlu:815: d:\texroot\2018\bin\win32\runscript.tlu:770:
> no appropriate script or program found: setmd5info
> Problem appears because of  os.setenv('TEXMF', TEXMFDIST): 

That is an intentional change in TeX Live 2018.
Sorry for your inconvenience.

Thanks,
Akira


From slava.asipenko at notarize.com  Mon Jun 18 12:20:17 2018
From: slava.asipenko at notarize.com (Slava Asipenko)
Date: Mon, 18 Jun 2018 06:20:17 -0400
Subject: [tex-live] TeX Live installation error
Message-ID: <FBF07F1E-191C-4174-80B6-ACD0DE76C697@notarize.com>

Hello,

Recently, we started having this error when installing TeX Live on our Heroku dynos using a buildpack. Reporting as suggested in the output, any help would be appreciated.

Thanks!

-----> Installing TeX Live...
Automated TeX Live installation using profile: /app/tmp/buildpacks/097475f404d0d602e3e9a028f81d1ca3f604021b60fbdb4fbc36307fd27192293672066726c6ef8803f19c9634a02e9a0df370c9a40cba769c2d2545d1500476/bin/../conf/texlive.profile
Loading http://mirrors.ibiblio.org/pub/mirrors/CTAN/systems/texlive/tlnet/tlpkg/texlive.tlpdb
./install-tl: signature verification error of /tmp/7xXngfGlQW/vUVRyoYk96 from http://mirrors.ibiblio.org/pub/mirrors/CTAN/systems/texlive/tlnet/tlpkg/texlive.tlpdb: cryptographic signature verification of
  /tmp/7xXngfGlQW/kVVrspR2mZ
against
  http://mirrors.ibiblio.org/pub/mirrors/CTAN/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc
failed. Output was
gpg: verify signatures failed: eof
Please report to texlive at tug.org

 

-- 
Slava Asipenko
Engineering Manager
Notarize

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180618/4f757ba1/attachment.html>

From joseph.wright at morningstar2.co.uk  Mon Jun 18 22:28:17 2018
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Mon, 18 Jun 2018 21:28:17 +0100
Subject: [tex-live] Primitive parity, \expanded and \Ucharcat
In-Reply-To: <8c3ca787-8924-5bbe-3cba-b80b09ae4831@gmail.com>
References: <c87a52e4-260f-a41e-acf5-8ac8ef316252@morningstar2.co.uk>
 <c601b58d-eb5a-b5af-e207-2b0fa41a0a13@morningstar2.co.uk>
 <676954d7-65de-aabb-7c1f-387f32a5a2f0@gmail.com>
 <6de5d6ef-658b-3815-6303-285aa45897f0@morningstar2.co.uk>
 <8c3ca787-8924-5bbe-3cba-b80b09ae4831@gmail.com>
Message-ID: <6e61e96e-85de-5d8b-7096-e8cf48c4f4e7@morningstar2.co.uk>

On 13/05/2018 13:36, Jonathan Kew wrote:
> On 13/05/2018 13:15, Joseph Wright wrote:
>> On 13/05/2018 12:23, Jonathan Kew wrote:
>>> On 13/05/2018 10:57, Joseph Wright wrote:
>>>> Hello all,
>>>>
>>>> Modulo any issues that show up in testing, all of the above is now 
>>>> done and on my GitHub fork 
>>>> (https://github.com/josephwright/texlive-source/tree/Ucharcat: this 
>>>> branch has 'all the stuff' on it).
>>>>
>>>> I know that https://github.com/texjporg/tex-jp-build already has a 
>>>> branch for \expanded. What's the best way to request 'officially' 
>>>> that the changes go into pdfTeX/XeTeX? I can send a .diff to the 
>>>> pdfTeX dev list, and put in a pull request on SourceForge for XeTeX, 
>>>> if that's best.
>>>
>>> Thanks for working on these things, Joseph.
>>>
>>> For xetex, a pull request would be the best approach, I think; or if 
>>> it's feasible to do separate PRs for each feature, that would 
>>> probably make reviewing and tracking the changes easier.
>>>
>>> Is there documentation of the added features available somewhere, so 
>>> we can more accurately understand what we're thinking of adding? Thanks!
>>>
>>> JK
>>
>> Excellent: I'll start on putting something together later today.
>>
>> Do you want all PRs against master or can they be 'chained'? Adding 
>> primitives, it's easier if you are working knowing which others have 
>> been created.
> 
> "Chained" should be fine, I expect; I doubt there'd be any reason we'll 
> want to take a later one but decide against an earlier one.
> 
> At which point perhaps a single PR is just as good, as long each feature 
> is a separate commit so that it comes in manageable chunks. From a quick 
> glance at your fork, it looks like that's how it would naturally appear. 
> So, feel free to do whichever seems easiest for you.
> 
> JK

Hello Jonathan,

Have you been able to look at my merge requests? We are now moving to 
using \expanded for other engines: it's going into pdfTeX and (u)pTeX, 
and is already in LuaTeX. Ideally, we'd like to avoid XeTeX being 'left 
behind'.

Joseph

From jfkthame at gmail.com  Mon Jun 18 22:47:45 2018
From: jfkthame at gmail.com (Jonathan Kew)
Date: Mon, 18 Jun 2018 21:47:45 +0100
Subject: [tex-live] Primitive parity, \expanded and \Ucharcat
In-Reply-To: <6e61e96e-85de-5d8b-7096-e8cf48c4f4e7@morningstar2.co.uk>
References: <c87a52e4-260f-a41e-acf5-8ac8ef316252@morningstar2.co.uk>
 <c601b58d-eb5a-b5af-e207-2b0fa41a0a13@morningstar2.co.uk>
 <676954d7-65de-aabb-7c1f-387f32a5a2f0@gmail.com>
 <6de5d6ef-658b-3815-6303-285aa45897f0@morningstar2.co.uk>
 <8c3ca787-8924-5bbe-3cba-b80b09ae4831@gmail.com>
 <6e61e96e-85de-5d8b-7096-e8cf48c4f4e7@morningstar2.co.uk>
Message-ID: <bf793c35-53dd-fc58-b24f-45e9b8377bc4@gmail.com>

On 18/06/2018 21:28, Joseph Wright wrote:
> On 13/05/2018 13:36, Jonathan Kew wrote:
>> On 13/05/2018 13:15, Joseph Wright wrote:
>>> On 13/05/2018 12:23, Jonathan Kew wrote:
>>>> On 13/05/2018 10:57, Joseph Wright wrote:
>>>>> Hello all,
>>>>>
>>>>> Modulo any issues that show up in testing, all of the above is now 
>>>>> done and on my GitHub fork 
>>>>> (https://github.com/josephwright/texlive-source/tree/Ucharcat: this 
>>>>> branch has 'all the stuff' on it).
>>>>>
>>>>> I know that https://github.com/texjporg/tex-jp-build already has a 
>>>>> branch for \expanded. What's the best way to request 'officially' 
>>>>> that the changes go into pdfTeX/XeTeX? I can send a .diff to the 
>>>>> pdfTeX dev list, and put in a pull request on SourceForge for 
>>>>> XeTeX, if that's best.
>>>>
>>>> Thanks for working on these things, Joseph.
>>>>
>>>> For xetex, a pull request would be the best approach, I think; or if 
>>>> it's feasible to do separate PRs for each feature, that would 
>>>> probably make reviewing and tracking the changes easier.
>>>>
>>>> Is there documentation of the added features available somewhere, so 
>>>> we can more accurately understand what we're thinking of adding? 
>>>> Thanks!
>>>>
>>>> JK
>>>
>>> Excellent: I'll start on putting something together later today.
>>>
>>> Do you want all PRs against master or can they be 'chained'? Adding 
>>> primitives, it's easier if you are working knowing which others have 
>>> been created.
>>
>> "Chained" should be fine, I expect; I doubt there'd be any reason 
>> we'll want to take a later one but decide against an earlier one.
>>
>> At which point perhaps a single PR is just as good, as long each 
>> feature is a separate commit so that it comes in manageable chunks. 
>> From a quick glance at your fork, it looks like that's how it would 
>> naturally appear. So, feel free to do whichever seems easiest for you.
>>
>> JK
> 
> Hello Jonathan,
> 
> Have you been able to look at my merge requests? We are now moving to 
> using \expanded for other engines: it's going into pdfTeX and (u)pTeX, 
> and is already in LuaTeX. Ideally, we'd like to avoid XeTeX being 'left 
> behind'.
> 
> Joseph
> 

Hi Joseph,

Sorry for the slowness at this end, I know it's been a while... Copying 
the response I just posted on the SF merge request:

 > Sorry, I just got home from a work trip overseas, and haven't had a
 > chance to look into this in any detail yet. (I suspect it's probably
 > fine, but would like to make sure I understand what's being added.)
 >
 > Can you point me at documentation of the new primitives (particularly
 > \expanded), to help understand exactly how it's supposed to work?
 > (Apologies if this has been posted somewhere already, and I've missed
 > it...)

Thanks,

JK

From reinhard.kotucha at web.de  Mon Jun 18 23:10:38 2018
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 18 Jun 2018 23:10:38 +0200
Subject: [tex-live] TL2018 runscript problem
In-Reply-To: <d08af1b8-b532-0464-3e61-0819b9fe9644@vtex.lt>
References: <d08af1b8-b532-0464-3e61-0819b9fe9644@vtex.lt>
Message-ID: <23336.8142.562990.342487@gargle.gargle.HOWL>

On 2018-06-18 at 11:05:40 +0300, Linas Stonys wrote:

 > Hi,
 > runscript with my local programs doesn't work any more.
 > They are in TEXMFLOCAL and used to work well with TL2016. Now I'm getting
 > error:
 > d:\texroot\2018\bin\win32\runscript.tlu:815: d:\texroot\2018\bin\win32\
 > runscript.tlu:770: no appropriate script or program found: setmd5info
 > ?Problem appears because of? os.setenv('TEXMF', TEXMFDIST):
 > 
 > """""""""""""""""
 > if not ARGV then
 > ? os.setenv('TEXMF', TEXMFDIST)
 > ? local extlist =
 > '.tlu;.texlua;.pl;.lua;.rb;.py;.tcl;.jar;.vbs;.js;.bat;.cmd;\0'
 > ? local progfullname = search_path(progname, BINDIR, '.tlu;.bat;.cmd') or
 > ?????????????????????? assert(find_texmfscript(progname, extlist))
 > ? os.setenv('TEXMF', nil)
 > """""""""""""""""
 > 
 > Linas

Dear Linas,
I investigated a bit and the SVN history led me to the message below.
It explains the reason of the change.

It seems to be quite inconvenient at a first glance if you can't
maintain your scripts in TEXMFLOCAL anymore.  But because you had to
create the wrappers/symlinks in bin/<platform> each year again and
again it wasn't very convenient in the past either.

A better solution is to create a TDS-compliant tree somewhere else

  bin/win32
  bin/x68_64-linux
  texmf-dist/scripts/vtex
  texmf-dist/scripts/linas

and to maintain your scripts there.  bin/win32 should only contain the
<script>.exe files but not runscript.dll or runscript.tlu.  For Linux
create relative symlinks to your scripts in bin/x68_64-linux.

Then create a .tar file of this tree and extract it in TEXMFROOT.

Another approach is to use version control tools.  Check out your
files in texlive/2018.  Next year copy texlive/2018/.svn to
texlive/2019 and run "svn update", for example.  I'm using SVN in
order to maintain configuration files for Bash, Emacs, X11,... on
various machines and it turned out to be more convenient than anything
else.

Regards,
  Reinhard

------- start of forwarded message -------
| From: Karl Berry <karl at freefriends.org>
| Subject: windows wrapper not using TEXMFHOME?
| Date: Fri, 9 Mar 2018 23:09:43 GMT
| 
| I think Joseph makes a good point here. Should w32_wrapper be changed to
| only look in the system tree, as is the behavior on Unix? --thanks, karl.
| 
| Date: Fri, 9 Mar 2018 07:51:35 +0000
| From: Joseph Wright <joseph.wright at morningstar2.co.uk>
| To: Karl Berry <karl at freefriends.org>
| Subject: Re: l3build script in tl
| 
| Oh, by the way, we noticed that there's a difference between Windows and 
| *nix in handling 'local' installs. On *nix, TL uses a simple symlink 
| from <root>/bin/<platform>/<name> to 
| <root>/texmf-dist/scripts/<name>/<name>.<whatever>, so you only ever get 
| the version in the managed tree.
| 
| On Windows, <root>/bin/<platform>/<name>.exe uses a 'runner' which will
| pick up ~/texmf/scripts/<name>/<name>.<whatever> if it exists, in
| preference to <root>/texmf-dist/scripts/<name>/<name>.<whatever>.
| 
| We ...  wondered if Windows should be brought into line? (Makes testing
| a little more 'interesting' but such is life.)
| 
| Joseph

------- end of forwarded message -------
-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From nospam-abuse at ilyaz.org  Tue Jun 19 17:35:33 2018
From: nospam-abuse at ilyaz.org (Ilya Zakharevich)
Date: Tue, 19 Jun 2018 08:35:33 -0700
Subject: [tex-live] TeXLive 2018 (Windows): unclear message from the
	installer
Message-ID: <20180619153533.hz2hkyvztjbhkpmh@math.berkeley.edu>

At the end of the installation, I received the following message from
PerlTk-version of installer (on Windows):

 Welcome to TeX Live!

 The following environment variables contain the string "tex"
 (case-independent).  If you're doing anything but adding personal
 directories to the system paths, they may well cause trouble
 somewhere while running TeX.  If you encounter problems, try
 unsetting them.  Please ignore spurious matches unrelated to TeX.

    USE_TEXLIVE=D:\...

===========================

There are two issues with this message:

A) It is not saved in a .log file.

   How would I be able to ?try unsetting them? if the list disappears
   when I close the window?

B) The message is not very comprehensible (to put it mildly).  I
   propose to restate it like this:

 Your system defines the following environment variables containing
 the string "tex" (case-independent).  Some variables of this form
 have a chance to cause trouble somewhere when running TeX.

    USE_TEXLIVE=D:\...

 Please inspect the list above.  If you encounter problems, try
 unsetting these variables.  (To find how, search for
      set environment variables in windows
 on the web.)

 In the list above, please ignore spurious matches unrelated to TeX,
 and variable which only add personal directories to the system paths.

===========================

Enjoy,
Ilya

From uri at ll.mit.edu  Tue Jun 19 21:24:30 2018
From: uri at ll.mit.edu (Blumenthal, Uri - 0553 - MITLL)
Date: Tue, 19 Jun 2018 19:24:30 +0000
Subject: [tex-live] TeXLive-2018 fails to update across firewall
Message-ID: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>

My machines run MacOS High Sierra 10.13.5. I?ve just upgraded from TeXLive-2017 to TeXLive-2018, and I lost the ability to pull updates.

 

Some of my machines reside behind a corporate firewall, with Internet accessible only via web proxy (defined in HTTP_PROXY and HTTPS_PROXY environment variables).

 

wget on all of my machines is located in /opt/local/bin directory (installed by Macports).

 

The error log I?m getting from TeX Live Utility.app seems to indicate that it is unable now to locate wget executable (which is /opt/local/bin/wget and on the PATH).

 

2018-06-19 19:09:41 +0000 Notice +[TLMEnvironment _handleLocationOperationFinished:][24805]? Finished setting command line server location:

???? location = http://tug.ctan.org/tex-archive/systems/texlive/tlnet

2018-06-19 19:09:58 +0000 Notice -[TLMLogWindowController awakeFromNib][24805]???? Loaded log window controller

2018-06-19 19:11:36 +0000 Notice -[TLMOperation main][24805]???? Successfully executed `/Applications/TeX/TeX Live Utility.app/Contents/MacOS/agent_installer.py --install --plist /var/folders/c6/lnc_0m093ys8w16md_fm1mnxhtfnj8/T/TLMLaunchAgentController/com.googlecode.mactlmgr.update_check.plist --script /Applications/TeX/TeX Live Utility.app/Contents/Resources/update_check.py`

2018-06-19 19:11:36 +0000 Notice -[TLMOperation main][24805]???? agent_installer.py: nothing to unload

2018-06-19 19:11:36 +0000 Notice -[TLMMainWindowController _handleLaunchAgentInstallFinishedNotification:][24805] Finished running launchd agent installer script

2018-06-19 19:12:16 +0000 Notice -[TLMMainWindowController _refreshUpdatedPackageListFromLocation:][24805]? Refreshing list of updated packages?

2018-06-19 19:12:17 +0000 Notice -[TLMOperation main][24805]???? Failed executing `/Library/TeX/texbin/tlmgr --machine-readable --repository http://tug.ctan.org/tex-archive/systems/texlive/tlnet update --list --all` (error 1)

2018-06-19 19:12:17 +0000 Notice -[TLMOperation main][24805]???? /Library/TeX/texbin/tlmgr: Initialization failed (in setup_unix_one):

/Library/TeX/texbin/tlmgr: could not find a usable wget.

/Library/TeX/texbin/tlmgr: Please install wget and try again.

tlmgr: Couldn't set up the necessary programs.

Installation of packages is not supported.

Please report to texlive at tug.org.

Use of uninitialized value $r in split at /usr/local/texlive/2018/tlpkg/TeXLive/TLUtils.pm line 4167.

tlmgr: Cannot find main repository, you have to tag one as main!

 

Attempt to manually invoke the above command results in:

 

$ sudo /Library/TeX/texbin/tlmgr --machine-readable --repository http://tug.ctan.org/tex-archive/system/texlive/tlnet update --list --all

/Library/TeX/texbin/tlmgr: open tlpdb(http://tug.ctan.org/tex-archive/system/texlive/tlnet/tlpkg/texlive.tlpdb) failed: Operation timed out at /usr/local/texlive/2018/tlpkg/TeXLive/TLPDB.pm line 362.

$

 

Please help!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180619/6746c2f7/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 5211 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180619/6746c2f7/attachment.p7s>

From gnwiii at gmail.com  Wed Jun 20 00:21:52 2018
From: gnwiii at gmail.com (George N. White III)
Date: Tue, 19 Jun 2018 19:21:52 -0300
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
Message-ID: <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>

On Tue, 19 Jun 2018 at 17:27, Blumenthal, Uri - 0553 - MITLL <uri at ll.mit.edu>
wrote:

> My machines run MacOS High Sierra 10.13.5. I?ve just upgraded from
> TeXLive-2017 to TeXLive-2018, and I lost the ability to pull updates.
>
>
>
> Some of my machines reside behind a corporate firewall, with Internet
> accessible only via web proxy (defined in HTTP_PROXY and HTTPS_PROXY
> environment variables).
>
>
>
> wget on all of my machines is located in /opt/local/bin directory
> (installed by Macports).
>
>
>
> The error log I?m getting from TeX Live Utility.app seems to indicate that
> it is unable now to locate wget executable (which is /opt/local/bin/wget
> and on the PATH).
>
>
>
> 2018-06-19 19:09:41 +0000 Notice +[TLMEnvironment
> _handleLocationOperationFinished:][24805]  Finished setting command line
> server location:
>
>      location = http://tug.ctan.org/tex-archive/systems/texlive/tlnet
>
> 2018-06-19 19:09:58 +0000 Notice -[TLMLogWindowController
> awakeFromNib][24805]     Loaded log window controller
>
> 2018-06-19 19:11:36 +0000 Notice -[TLMOperation main][24805]
> Successfully executed `/Applications/TeX/TeX Live
> Utility.app/Contents/MacOS/agent_installer.py --install --plist
> /var/folders/c6/lnc_0m093ys8w16md_fm1mnxhtfnj8/T/TLMLaunchAgentController/com.googlecode.mactlmgr.update_check.plist
> --script /Applications/TeX/TeX Live
> Utility.app/Contents/Resources/update_check.py`
>
> 2018-06-19 19:11:36 +0000 Notice -[TLMOperation main][24805]
> agent_installer.py: nothing to unload
>
> 2018-06-19 19:11:36 +0000 Notice -[TLMMainWindowController
> _handleLaunchAgentInstallFinishedNotification:][24805] Finished running
> launchd agent installer script
>
> 2018-06-19 19:12:16 +0000 Notice -[TLMMainWindowController
> _refreshUpdatedPackageListFromLocation:][24805]  Refreshing list of updated
> packages?
>
> 2018-06-19 19:12:17 +0000 Notice -[TLMOperation main][24805]     Failed
> executing `/Library/TeX/texbin/tlmgr --machine-readable --repository
> http://tug.ctan.org/tex-archive/systems/texlive/tlnet update --list
> --all` (error 1)
>
> 2018-06-19 19:12:17 +0000 Notice -[TLMOperation main][24805]
> /Library/TeX/texbin/tlmgr: Initialization failed (in setup_unix_one):
>
> /Library/TeX/texbin/tlmgr: could not find a usable wget.
>
> /Library/TeX/texbin/tlmgr: Please install wget and try again.
>
> tlmgr: Couldn't set up the necessary programs.
>
> Installation of packages is not supported.
>
> Please report to texlive at tug.org.
>
> Use of uninitialized value $r in split at
> /usr/local/texlive/2018/tlpkg/TeXLive/TLUtils.pm line 4167.
>
> tlmgr: Cannot find main repository, you have to tag one as main!
>
>
>
> Attempt to manually invoke the above command results in:
>
>
>
> $ sudo /Library/TeX/texbin/tlmgr --machine-readable --repository
> http://tug.ctan.org/tex-archive/system/texlive/tlnet update --list --all
>
> /Library/TeX/texbin/tlmgr: open tlpdb(
> http://tug.ctan.org/tex-archive/system/texlive/tlnet/tlpkg/texlive.tlpdb)
> failed: Operation timed out at
> /usr/local/texlive/2018/tlpkg/TeXLive/TLPDB.pm line 362.
>
> $
>
>
>
> Please help!
>


As a start to sorting this out, it could be useful to know if "sudo -E
  /Library/TeX/texbin/tlmgr
--machine-readable --repository
 http://tug.ctan.org/tex-archive/system/texlive/tlnet update --list --all"
works.

The "-E" option tells sudo to pass user's environment (e.g., to get the
_PROXY variables and a PATH that mentions /opt/local/bin).

-- 
George N. White III
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180619/8a2b3c4f/attachment-0001.html>

From uri at ll.mit.edu  Wed Jun 20 00:27:14 2018
From: uri at ll.mit.edu (Blumenthal, Uri - 0553 - MITLL)
Date: Tue, 19 Jun 2018 22:27:14 +0000
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
Message-ID: <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>

I?m afraid this did not work either:

 

$ sudo -E /Library/TeX/texbin/tlmgr --machine-readable --repository http://tug.ctan.org/tex-archive/system/texlive/tlnet update --list --all

Enter PIN for 'Certificate For PIV Authentication (Uri the Great)': 

/Library/TeX/texbin/tlmgr: open tlpdb(http://tug.ctan.org/tex-archive/system/texlive/tlnet/tlpkg/texlive.tlpdb) failed:  at /usr/local/texlive/2018/tlpkg/TeXLive/TLPDB.pm line 362.

$

 

Are there any logs that you may want me to pull for you?

 

Thanks!

 

From: "George N. White III" <gnwiii at gmail.com>
Date: Tuesday, June 19, 2018 at 18:22
To: Uri Blumenthal <uri at ll.mit.edu>
Cc: TeX Live 2008 <texlive at tug.org>
Subject: Re: [tex-live] TeXLive-2018 fails to update across firewall

 

 

On Tue, 19 Jun 2018 at 17:27, Blumenthal, Uri - 0553 - MITLL <uri at ll.mit.edu> wrote:

My machines run MacOS High Sierra 10.13.5. I?ve just upgraded from TeXLive-2017 to TeXLive-2018, and I lost the ability to pull updates.

 

Some of my machines reside behind a corporate firewall, with Internet accessible only via web proxy (defined in HTTP_PROXY and HTTPS_PROXY environment variables).

 

wget on all of my machines is located in /opt/local/bin directory (installed by Macports).

 

The error log I?m getting from TeX Live Utility.app seems to indicate that it is unable now to locate wget executable (which is /opt/local/bin/wget and on the PATH).

 

2018-06-19 19:09:41 +0000 Notice +[TLMEnvironment _handleLocationOperationFinished:][24805]  Finished setting command line server location:

     location = http://tug.ctan.org/tex-archive/systems/texlive/tlnet

2018-06-19 19:09:58 +0000 Notice -[TLMLogWindowController awakeFromNib][24805]     Loaded log window controller

2018-06-19 19:11:36 +0000 Notice -[TLMOperation main][24805]     Successfully executed `/Applications/TeX/TeX Live Utility.app/Contents/MacOS/agent_installer.py --install --plist /var/folders/c6/lnc_0m093ys8w16md_fm1mnxhtfnj8/T/TLMLaunchAgentController/com.googlecode.mactlmgr.update_check.plist --script /Applications/TeX/TeX Live Utility.app/Contents/Resources/update_check.py`

2018-06-19 19:11:36 +0000 Notice -[TLMOperation main][24805]     agent_installer.py: nothing to unload

2018-06-19 19:11:36 +0000 Notice -[TLMMainWindowController _handleLaunchAgentInstallFinishedNotification:][24805] Finished running launchd agent installer script

2018-06-19 19:12:16 +0000 Notice -[TLMMainWindowController _refreshUpdatedPackageListFromLocation:][24805]  Refreshing list of updated packages?

2018-06-19 19:12:17 +0000 Notice -[TLMOperation main][24805]     Failed executing `/Library/TeX/texbin/tlmgr --machine-readable --repository http://tug.ctan.org/tex-archive/systems/texlive/tlnet update --list --all` (error 1)

2018-06-19 19:12:17 +0000 Notice -[TLMOperation main][24805]     /Library/TeX/texbin/tlmgr: Initialization failed (in setup_unix_one):

/Library/TeX/texbin/tlmgr: could not find a usable wget.

/Library/TeX/texbin/tlmgr: Please install wget and try again.

tlmgr: Couldn't set up the necessary programs.

Installation of packages is not supported.

Please report to texlive at tug.org.

Use of uninitialized value $r in split at /usr/local/texlive/2018/tlpkg/TeXLive/TLUtils.pm line 4167.

tlmgr: Cannot find main repository, you have to tag one as main!

 

Attempt to manually invoke the above command results in:

 

$ sudo /Library/TeX/texbin/tlmgr --machine-readable --repository http://tug.ctan.org/tex-archive/system/texlive/tlnet update --list --all

/Library/TeX/texbin/tlmgr: open tlpdb(http://tug.ctan.org/tex-archive/system/texlive/tlnet/tlpkg/texlive.tlpdb) failed: Operation timed out at /usr/local/texlive/2018/tlpkg/TeXLive/TLPDB.pm line 362.

$

 

Please help!

 

 

As a start to sorting this out, it could be useful to know if "sudo -E   /Library/TeX/texbin/tlmgr --machine-readable --repository

 http://tug.ctan.org/tex-archive/system/texlive/tlnet update --list --all" works.  



The "-E" option tells sudo to pass user's environment (e.g., to get the _PROXY variables and a PATH that mentions /opt/local/bin).  

 

-- 

George N. White III

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180619/5dda614f/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 5211 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180619/5dda614f/attachment.p7s>

From gnwiii at gmail.com  Wed Jun 20 02:36:35 2018
From: gnwiii at gmail.com (George N. White III)
Date: Tue, 19 Jun 2018 21:36:35 -0300
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
 <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>
Message-ID: <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>

On Tue, 19 Jun 2018 at 19:27, Blumenthal, Uri - 0553 - MITLL <uri at ll.mit.edu>
wrote:

> I?m afraid this did not work either:
>
>
>
> $ sudo -E /Library/TeX/texbin/tlmgr --machine-readable --repository
> http://tug.ctan.org/tex-archive/system/texlive/tlnet update --list --all
>
> Enter PIN for 'Certificate For PIV Authentication (Uri the Great)':
>
> /Library/TeX/texbin/tlmgr: open tlpdb(
> http://tug.ctan.org/tex-archive/system/texlive/tlnet/tlpkg/texlive.tlpdb)
> failed:  at /usr/local/texlive/2018/tlpkg/TeXLive/TLPDB.pm line 362.
>
> $
>
>
>
> Are there any logs that you may want me to pull for you?
>

Looks like "sudo -E" runs into problems with your  Personal Identity
Verification (*PIV*) system.   You should
check with your IT people -- your issues are somewhat outside the scope of
TeX Live and MacTeX and may
have an "official" solution.  If you are having this probelm at MIT, the
MIT Knowledge Base <http://kb.mit.edu/confluence/x/AoDjBQ>
appears to need some site-specific additions.

There are more fine-grained ways to pass environment variables to a sudo
session; look for
" env_keep" in the sudo documentation.



>
>
> Thanks!
>
>
>
> *From: *"George N. White III" <gnwiii at gmail.com>
> *Date: *Tuesday, June 19, 2018 at 18:22
> *To: *Uri Blumenthal <uri at ll.mit.edu>
> *Cc: *TeX Live 2008 <texlive at tug.org>
> *Subject: *Re: [tex-live] TeXLive-2018 fails to update across firewall
>
>
>
>
>
> On Tue, 19 Jun 2018 at 17:27, Blumenthal, Uri - 0553 - MITLL <
> uri at ll.mit.edu> wrote:
>
> My machines run MacOS High Sierra 10.13.5. I?ve just upgraded from
> TeXLive-2017 to TeXLive-2018, and I lost the ability to pull updates.
>
>
>
> Some of my machines reside behind a corporate firewall, with Internet
> accessible only via web proxy (defined in HTTP_PROXY and HTTPS_PROXY
> environment variables).
>
>
>
> wget on all of my machines is located in /opt/local/bin directory
> (installed by Macports).
>
>
>
> The error log I?m getting from TeX Live Utility.app seems to indicate that
> it is unable now to locate wget executable (which is /opt/local/bin/wget
> and on the PATH).
>
>
>
> 2018-06-19 19:09:41 +0000 Notice +[TLMEnvironment
> _handleLocationOperationFinished:][24805]  Finished setting command line
> server location:
>
>      location = http://tug.ctan.org/tex-archive/systems/texlive/tlnet
>
> 2018-06-19 19:09:58 +0000 Notice -[TLMLogWindowController
> awakeFromNib][24805]     Loaded log window controller
>
> 2018-06-19 19:11:36 +0000 Notice -[TLMOperation main][24805]
> Successfully executed `/Applications/TeX/TeX Live
> Utility.app/Contents/MacOS/agent_installer.py --install --plist
> /var/folders/c6/lnc_0m093ys8w16md_fm1mnxhtfnj8/T/TLMLaunchAgentController/com.googlecode.mactlmgr.update_check.plist
> --script /Applications/TeX/TeX Live
> Utility.app/Contents/Resources/update_check.py`
>
> 2018-06-19 19:11:36 +0000 Notice -[TLMOperation main][24805]
> agent_installer.py: nothing to unload
>
> 2018-06-19 19:11:36 +0000 Notice -[TLMMainWindowController
> _handleLaunchAgentInstallFinishedNotification:][24805] Finished running
> launchd agent installer script
>
> 2018-06-19 19:12:16 +0000 Notice -[TLMMainWindowController
> _refreshUpdatedPackageListFromLocation:][24805]  Refreshing list of updated
> packages?
>
> 2018-06-19 19:12:17 +0000 Notice -[TLMOperation main][24805]     Failed
> executing `/Library/TeX/texbin/tlmgr --machine-readable --repository
> http://tug.ctan.org/tex-archive/systems/texlive/tlnet update --list
> --all` (error 1)
>
> 2018-06-19 19:12:17 +0000 Notice -[TLMOperation main][24805]
> /Library/TeX/texbin/tlmgr: Initialization failed (in setup_unix_one):
>
> /Library/TeX/texbin/tlmgr: could not find a usable wget.
>
> /Library/TeX/texbin/tlmgr: Please install wget and try again.
>
> tlmgr: Couldn't set up the necessary programs.
>
> Installation of packages is not supported.
>
> Please report to texlive at tug.org.
>
> Use of uninitialized value $r in split at
> /usr/local/texlive/2018/tlpkg/TeXLive/TLUtils.pm line 4167.
>
> tlmgr: Cannot find main repository, you have to tag one as main!
>
>
>
> Attempt to manually invoke the above command results in:
>
>
>
> $ sudo /Library/TeX/texbin/tlmgr --machine-readable --repository
> http://tug.ctan.org/tex-archive/system/texlive/tlnet update --list --all
>
> /Library/TeX/texbin/tlmgr: open tlpdb(
> http://tug.ctan.org/tex-archive/system/texlive/tlnet/tlpkg/texlive.tlpdb)
> failed: Operation timed out at
> /usr/local/texlive/2018/tlpkg/TeXLive/TLPDB.pm line 362.
>
> $
>
>
>
> Please help!
>
>
>
>
>
> As a start to sorting this out, it could be useful to know if "sudo -E   /Library/TeX/texbin/tlmgr
> --machine-readable --repository
>
>  http://tug.ctan.org/tex-archive/system/texlive/tlnet update --list
> --all" works.
>
>
>
> The "-E" option tells sudo to pass user's environment (e.g., to get the
> _PROXY variables and a PATH that mentions /opt/local/bin).
>
>
>
> --
>
> George N. White III
>


-- 
George N. White III
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180619/4d9aa81b/attachment-0001.html>

From amaxwell at mac.com  Wed Jun 20 02:43:14 2018
From: amaxwell at mac.com (Adam R. Maxwell)
Date: Tue, 19 Jun 2018 17:43:14 -0700
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
Message-ID: <9B47B7E4-775B-4764-9B65-5335D3A84FE5@mac.com>



> On Jun 19, 2018, at 12:24 , Blumenthal, Uri - 0553 - MITLL <uri at ll.mit.edu> wrote:
> 
> Some of my machines reside behind a corporate firewall, with Internet accessible only via web proxy (defined in HTTP_PROXY and HTTPS_PROXY environment variables).
>  
> wget on all of my machines is located in /opt/local/bin directory (installed by Macports).
>  
> The error log I?m getting from TeX Live Utility.app seems to indicate that it is unable now to locate wget executable (which is /opt/local/bin/wget and on the PATH).

TeX Live Utility will create a clean environment that does not include /opt/local/bin, in order to force usage of the wget shipped with TeX Live. As far as I recall, the normal Perl LWP download also respects the http_proxy and ftp_proxy environment variables.

TeX Live Utility also sets http_proxy and ftp_proxy environment variables based on the OS X system proxy settings, but it does not do this for https_proxy. That might be a problem for TLU, but wouldn't affect your command-line results.

-- adam



From taylorkgb at gmail.com  Wed Jun 20 01:23:20 2018
From: taylorkgb at gmail.com (Yusuke Terada)
Date: Wed, 20 Jun 2018 08:23:20 +0900
Subject: [tex-live] Bug report of TeX gyre map files
Message-ID: <749339B8-1FCF-4515-B1D2-A3582EE7E700@gmail.com>

On TeX Live r48025, qag.map and qpl.map were modified.

https://www.tug.org/svn/texlive?view=revision&revision=48025
https://www.tug.org/svn/texlive/trunk/Master/texmf-dist/fonts/map/dvips/tex-gyre/qag.map?r1=48025&r2=48024&pathrev=48025
https://www.tug.org/svn/texlive/trunk/Master/texmf-dist/fonts/map/dvips/tex-gyre/qpl.map?r1=48025&r2=48024&pathrev=48025

In this modification, pfb font file names were changed to wrong names which have double extensions like "qplr.pfb.pfb."
Due to this, pdflatex fails to compile the following code:

\documentclass{article}
\usepackage{newpxtext}
\begin{document}
\textbullet
\end{document}

This produces the following error.

!pdfTeX error: pdflatex (file qplr.pfb.pfb): cannot open Type 1 font file for reading
 ==> Fatal error occurred, no output PDF file produced!

Sincerely,
Yusuke Terada





From preining at logic.at  Wed Jun 20 03:49:01 2018
From: preining at logic.at (Norbert Preining)
Date: Wed, 20 Jun 2018 10:49:01 +0900
Subject: [tex-live] TeXLive 2018 (Windows): unclear message from the
 installer
In-Reply-To: <20180619153533.hz2hkyvztjbhkpmh@math.berkeley.edu>
References: <20180619153533.hz2hkyvztjbhkpmh@math.berkeley.edu>
Message-ID: <20180620014901.GA3796@bulldog.preining.info>

Hi Ilya,

Thanks for your comments.

>  The following environment variables contain the string "tex"

[...]

> A) It is not saved in a .log file.

Ok, I have adjusted the text and wizards installer, but the perltk
installer is slightly different and I hope Siep will fix this.

>    How would I be able to ?try unsetting them? if the list disappears
>    when I close the window?

You should be aware of these environment variables, because you did set
them. Then, copy and paste should work.

> B) The message is not very comprehensible (to put it mildly).  I
>    propose to restate it like this:
>       set environment variables in windows

But this is nothing Windows specific, the same happens on Linux,
Solaris, AIX, whatever.

Thanks

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From preining at logic.at  Wed Jun 20 04:14:51 2018
From: preining at logic.at (Norbert Preining)
Date: Wed, 20 Jun 2018 11:14:51 +0900
Subject: [tex-live] TeXLive 2018 (Windows): unclear message from the
 installer
In-Reply-To: <20180620014901.GA3796@bulldog.preining.info>
References: <20180619153533.hz2hkyvztjbhkpmh@math.berkeley.edu>
 <20180620014901.GA3796@bulldog.preining.info>
Message-ID: <20180620021451.GB3796@bulldog.preining.info>

Hi Ilya,

> Ok, I have adjusted the text and wizards installer, but the perltk
> installer is slightly different and I hope Siep will fix this.

Now also the perltk installer is updated.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From preining at logic.at  Wed Jun 20 04:22:39 2018
From: preining at logic.at (Norbert Preining)
Date: Wed, 20 Jun 2018 11:22:39 +0900
Subject: [tex-live] Bug report of TeX gyre map files
In-Reply-To: <749339B8-1FCF-4515-B1D2-A3582EE7E700@gmail.com>
References: <749339B8-1FCF-4515-B1D2-A3582EE7E700@gmail.com>
Message-ID: <20180620022239.GD3796@bulldog.preining.info>

Hi

> !pdfTeX error: pdflatex (file qplr.pfb.pfb): cannot open Type 1 font file for reading

Thanks for the report, fixed in the repository, will hopefully be in
rebuild from tomorrow.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From preining at logic.at  Wed Jun 20 05:33:59 2018
From: preining at logic.at (Norbert Preining)
Date: Wed, 20 Jun 2018 12:33:59 +0900
Subject: [tex-live] Possible security problem -- ctan mirrors at
 concertpass.com and hoobly.com
In-Reply-To: <CAKgbKVgFeXKc470unb7VkSfT1-wTjMinv2hVeUDm4Hj1ROrvSw@mail.gmail.com>
References: <CAKgbKVgFeXKc470unb7VkSfT1-wTjMinv2hVeUDm4Hj1ROrvSw@mail.gmail.com>
Message-ID: <20180620033359.GA17769@bulldog.preining.info>

Hi Paul,

> A Virus Total scan of concernpass.com and mirrors.concertpass.com showed no
> malware, but when I looked a little further, it looks like there were
> suspect files at hoobly.com in the recent past:

Virus scanners have a tendency to misclassify files from us. No idea
why.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From preining at logic.at  Wed Jun 20 05:34:42 2018
From: preining at logic.at (Norbert Preining)
Date: Wed, 20 Jun 2018 12:34:42 +0900
Subject: [tex-live] TeX Live installation error
In-Reply-To: <FBF07F1E-191C-4174-80B6-ACD0DE76C697@notarize.com>
References: <FBF07F1E-191C-4174-80B6-ACD0DE76C697@notarize.com>
Message-ID: <20180620033442.GB17769@bulldog.preining.info>

> Recently, we started having this error when installing TeX Live on our Heroku dynos using a buildpack. Reporting as suggested in the output, any help would be appreciated.

Is this reproducible behaviour? One possible reason for this is that the
download did not succeed.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From uri at ll.mit.edu  Wed Jun 20 05:52:01 2018
From: uri at ll.mit.edu (Blumenthal, Uri - 0553 - MITLL)
Date: Tue, 19 Jun 2018 23:52:01 -0400
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <9B47B7E4-775B-4764-9B65-5335D3A84FE5@mac.com>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <9B47B7E4-775B-4764-9B65-5335D3A84FE5@mac.com>
Message-ID: <B059E139-89ED-499A-814A-B9A43E952324@ll.mit.edu>

>> The error log I?m getting from TeX Live Utility.app seems to indicate that it is unable now to locate wget executable (which is /opt/local/bin/wget and on the PATH).
> 
> TeX Live Utility will create a clean environment that does not include /opt/local/bin, in order to force usage of the wget shipped with TeX Live. As far as I recall, the normal Perl LWP download also respects the http_proxy and ftp_proxy environment variables.

I don?t think there was ?wget? in ?/Library/TeX/texbin? directory. Perhaps that?s the problem???

$ ls -alF /Library/TeX/texbin/wget
ls: /Library/TeX/texbin/wget: No such file or directory
$

In any case, if possible I?d much prefer to use my wget (aka /opt/local/bin/wget).  Also, usually people set env variables for a reason. Perhaps you could add a config option to not clean environment, and use the provided env variables instead?

> TeX Live Utility also sets http_proxy and ftp_proxy environment variables based on the OS X system proxy settings, but it does not do this for https_proxy. That might be a problem for TLU, but wouldn't affect your command-line results.

Don?t know what to say. OS X has the correct proxy settings (for both http and https), as evidenced by the fact that all the relevant apps can access Internet? And as you said - it shouldn?t affect command-line results anyway...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180619/775a7191/attachment.html>

From amaxwell at mac.com  Wed Jun 20 05:56:31 2018
From: amaxwell at mac.com (Adam R. Maxwell)
Date: Tue, 19 Jun 2018 20:56:31 -0700
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <B059E139-89ED-499A-814A-B9A43E952324@ll.mit.edu>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <9B47B7E4-775B-4764-9B65-5335D3A84FE5@mac.com>
 <B059E139-89ED-499A-814A-B9A43E952324@ll.mit.edu>
Message-ID: <C2CD89D9-06ED-4ABE-B953-70EC134E847B@mac.com>


> On Jun 19, 2018, at 20:52 , Blumenthal, Uri - 0553 - MITLL <uri at ll.mit.edu> wrote:
> 
> I don?t think there was ?wget? in ?/Library/TeX/texbin? directory. Perhaps that?s the problem???

Try this:

$ ls /usr/local/texlive/2018/tlpkg/installer/wget/
wget.x86_64-darwin




From uri at ll.mit.edu  Wed Jun 20 06:09:31 2018
From: uri at ll.mit.edu (Blumenthal, Uri - 0553 - MITLL)
Date: Wed, 20 Jun 2018 00:09:31 -0400
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <C2CD89D9-06ED-4ABE-B953-70EC134E847B@mac.com>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <9B47B7E4-775B-4764-9B65-5335D3A84FE5@mac.com>
 <B059E139-89ED-499A-814A-B9A43E952324@ll.mit.edu>
 <C2CD89D9-06ED-4ABE-B953-70EC134E847B@mac.com>
Message-ID: <EDEB9A3A-B57B-42D5-864D-C21DED56F78E@ll.mit.edu>

>> On Jun 19, 2018, at 20:52 , Blumenthal, Uri - 0553 - MITLL <uri at ll.mit.edu> wrote:
>> 
>> I don?t think there was ?wget? in ?/Library/TeX/texbin? directory. Perhaps that?s the problem???
> 
> Try this:
> 
> $ ls /usr/local/texlive/2018/tlpkg/installer/wget/wget.x86_64-darwin

Yes it is there, thanks! (But this directory is not on the PATH - so tlmgr must have its own way of finding it there, right?)

But it seems to me that it doesn?t work properly in the proxied environment (if/when https gets involved, which occurs now more and more often). As an experiment, I?m trying to download a non-existing file (because I can?t think of an existing file offhand ;) with texlive wget, and then with Macports wget:

$ /usr/local/texlive/2018/tlpkg/installer/wget/wget.x86_64-darwin http://www.office365.com/owasmime.msi
--2018-06-20 00:04:04--  http://www.office365.com/owasmime.msi
Resolving llproxy.llan.ll.mit.edu...
Connecting to llproxy.llan.ll.mit.edu|... connected.
Proxy request sent, awaiting response... 302 Found
Location: http://products.office.com/?ms.url=office365com [following]
--2018-06-20 00:04:04--  http://products.office.com/?ms.url=office365com
Reusing existing connection to llproxy.llan.ll.mit.edu:8080.
Proxy request sent, awaiting response... 301 Moved Permanently
Location: https://products.office.com/?ms.url=office365com [following]
https://products.office.com/?ms.url=office365com: HTTPS support not compiled in.
$ wget http://www.office365.com/owasmime.msi
--2018-06-20 00:04:21--  http://www.office365.com/owasmime.msi
Resolving llproxy.llan.ll.mit.edu (llproxy.llan.ll.mit.edu)... 
Connecting to llproxy.llan.ll.mit.edu (llproxy.llan.ll.mit.edu)|... connected.
Proxy request sent, awaiting response... 302 Found
Location: http://products.office.com/?ms.url=office365com [following]
--2018-06-20 00:04:21--  http://products.office.com/?ms.url=office365com
Reusing existing connection to llproxy.llan.ll.mit.edu:8080.
Proxy request sent, awaiting response... 301 Moved Permanently
Location: https://products.office.com/?ms.url=office365com [following]
--2018-06-20 00:04:21--  https://products.office.com/?ms.url=office365com
Connecting to llproxy.llan.ll.mit.edu (llproxy.llan.ll.mit.edu)|155.34.234.20|:8080... connected.
Proxy request sent, awaiting response... 302 Moved Temporarily
Location: https://products.office.com/en-US/?ms.url=office365com [following]
--2018-06-20 00:04:21--  https://products.office.com/en-US/?ms.url=office365com
Connecting to llproxy.llan.ll.mit.edu (llproxy.llan.ll.mit.edu)|... connected.
Proxy request sent, awaiting response... 200 OK
Length: 85977 (84K) [text/html]
Saving to: ?owasmime.msi?

owasmime.msi             100%[==================================>]  83.96K  --.-KB/s    in 0.1s    

2018-06-20 00:04:21 (866 KB/s) - ?owasmime.msi? saved [85977/85977]

$



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180620/cf58f077/attachment-0001.html>

From kakuto at fuk.kindai.ac.jp  Wed Jun 20 06:15:00 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Wed, 20 Jun 2018 13:15:00 +0900
Subject: [tex-live] TL2018 runscript problem
In-Reply-To: <d08af1b8-b532-0464-3e61-0819b9fe9644@vtex.lt>
References: <d08af1b8-b532-0464-3e61-0819b9fe9644@vtex.lt>
Message-ID: <F5C089F6AAE648BA94B82D30BB9E81C6@CJ3001517A>

Dear Linas,

> runscript with my local programs doesn't work any more. 
> They are in TEXMFLOCAL and used to work well with TL2016.
> Now I'm getting error:
> ...

In r48059, I have installed a new runscript.tlu in the TeX Live
svn. After the next update of the tlcritical, you may be able to
use your scripts in trees other than TEXMFDIST.
It may require some time for the update of the tlcritical.
You can test by downloading
https://www.tug.org/svn/texlive/trunk/Master/bin/win32/runscript.tlu

Thanks,
Akira


From amaxwell at mac.com  Wed Jun 20 06:17:00 2018
From: amaxwell at mac.com (Adam R. Maxwell)
Date: Tue, 19 Jun 2018 21:17:00 -0700
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <EDEB9A3A-B57B-42D5-864D-C21DED56F78E@ll.mit.edu>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <9B47B7E4-775B-4764-9B65-5335D3A84FE5@mac.com>
 <B059E139-89ED-499A-814A-B9A43E952324@ll.mit.edu>
 <C2CD89D9-06ED-4ABE-B953-70EC134E847B@mac.com>
 <EDEB9A3A-B57B-42D5-864D-C21DED56F78E@ll.mit.edu>
Message-ID: <200B7C42-96C2-4741-93EF-8C362476020B@mac.com>



> On Jun 19, 2018, at 21:09 , Blumenthal, Uri - 0553 - MITLL <uri at ll.mit.edu> wrote:
> 
>>> On Jun 19, 2018, at 20:52 , Blumenthal, Uri - 0553 - MITLL <uri at ll.mit.edu <mailto:uri at ll.mit.edu>> wrote:
>>> 
>>> I don?t think there was ?wget? in ?/Library/TeX/texbin? directory. Perhaps that?s the problem???
>> 
>> Try this:
>> 
>> $ ls /usr/local/texlive/2018/tlpkg/installer/wget/wget.x86_64-darwin
> 
> Yes it is there, thanks! (But this directory is not on the PATH - so tlmgr must have its own way of finding it there, right?)
> 
> But it seems to me that it doesn?t work properly in the proxied environment (if/when https gets involved, which occurs now more and more often).

Yes, and I think this should be resolved with the latest tlmgr, which will fall back to curl instead of wget on OS X. In TeX Live Utility, choose "Actions->Reinstall TeX Live Manager" and see if that lets you list updates after the installation finishes.

-- adam

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180619/b36dfbc5/attachment.html>

From uri at ll.mit.edu  Wed Jun 20 06:24:08 2018
From: uri at ll.mit.edu (Blumenthal, Uri - 0553 - MITLL)
Date: Wed, 20 Jun 2018 00:24:08 -0400
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
 <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>
 <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
Message-ID: <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>

> On Jun 19, 2018, at 20:36, George N. White III <gnwiii at gmail.com> wrote:
> 
> On Tue, 19 Jun 2018 at 19:27, Blumenthal, Uri - 0553 - MITLL <uri at ll.mit.edu <mailto:uri at ll.mit.edu>> wrote:
> I?m afraid this did not work either: 
> 
> 
> $ sudo -E /Library/TeX/texbin/tlmgr --machine-readable --repository http://tug.ctan.org/tex-archive/system/texlive/tlnet <http://tug.ctan.org/tex-archive/system/texlive/tlnet> update --list --all
> 
> Enter PIN for 'Certificate For PIV Authentication (Uri the Great)': 
> 
> /Library/TeX/texbin/tlmgr: open tlpdb(http://tug.ctan.org/tex-archive/system/texlive/tlnet/tlpkg/texlive.tlpdb <http://tug.ctan.org/tex-archive/system/texlive/tlnet/tlpkg/texlive.tlpdb>) failed:  at /usr/local/texlive/2018/tlpkg/TeXLive/TLPDB.pm line 362.
> 
> $
> 
> Are there any logs that you may want me to pull for you?
> 
> 
> Looks like "sudo -E" runs into problems with your  Personal Identity Verification (PIV) system.   

With all due respect, I don?t think so.  Also, I can do the same by starting root shell (aka ?sudo bash?), set any env variable to whatever you think it should be set to, and repeat the test.

Also, since the error message seems to talk about ?texlive.tlpdb? file - I tried to download it via both texlive wget, and macports wget. It failed in both cases - is it normal?

$ /usr/local/texlive/2018/tlpkg/installer/wget/wget.x86_64-darwin http://tug.ctan.org/tex-archive/system/texlive/tlnet/tlpkg/texlive.tlpdb
--2018-06-20 00:15:38--  http://tug.ctan.org/tex-archive/system/texlive/tlnet/tlpkg/texlive.tlpdb
Resolving llproxy.llan.ll.mit.edu... 
Connecting to llproxy.llan.ll.mit.edu|... connected.
Proxy request sent, awaiting response... 404 Not Found
2018-06-20 00:15:38 ERROR 404: Not Found.

$ wget http://tug.ctan.org/tex-archive/system/texlive/tlnet/tlpkg/texlive.tlpdb
--2018-06-20 00:15:52--  http://tug.ctan.org/tex-archive/system/texlive/tlnet/tlpkg/texlive.tlpdb
Resolving llproxy.llan.ll.mit.edu (llproxy.llan.ll.mit.edu)... 
Connecting to llproxy.llan.ll.mit.edu (llproxy.llan.ll.mit.edu)|... connected.
Proxy request sent, awaiting response... 404 Not Found
2018-06-20 00:15:52 ERROR 404: Not Found.

$


> You should check with your IT people -- your issues are somewhat outside the scope of TeX Live and MacTeX and may
> have an "official" solution. 

Observe:

$ sudo date
Enter PIN for 'Certificate For PIV Authentication (Uri the Great)': 
Tue Jun 19 23:53:54 EDT 2018
$

I?ve built the PIV support on my computers, and tested the tokens for production. If you think it?s necessary, I can disable PIV and enable password auth for the test.

> There are more fine-grained ways to pass environment variables to a sudo session; look for "env_keep" in the sudo documentation.

I checked, thanks!

But why would you think we need more than ?-E?? Is there any evidence that an env var that?s needed does not get passed across ?sudo?, or that something that shouldn?t be passed, gets across and contaminates the environment?

 -E, --preserve-env
                   Indicates to the security policy that the user wishes to preserve their
                   existing environment variables.  The security policy may return an
                   error if the user does not have permission to preserve the environment.


$ sudo printenv PATH
Enter PIN for 'Certificate For PIV Authentication (Uri the Great)': 
/Library/TeX/texbin:/opt/local/bin:/opt/local/sbin:/Users/ur20980/.local/bin:/Users/ur20980/Library/Haskell/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Applications/VMware Fusion.app/Contents/Public/:/Library/TeX/texbin:/usr/local/MacGPG2/bin:/usr/local/share/dotnet:/opt/X11/bin:/Library/Frameworks/Mono.framework/Versions/Current/Commands:/Applications/Wireshark.app/Contents/MacOS:/Applications/Xamarin Workbooks.app/Contents/SharedSupport/path-bin:~/Library/Haskell/bin:/opt/local/Library/Frameworks/Python.framework/Versions/3.6/bin:/Users/ur20980/bin
$ sudo -E printenv HTTPS_PROXY
http://llproxy.llan.ll.mit.edu:8080
$ 


Thanks!

> From: "George N. White III" <gnwiii at gmail.com <mailto:gnwiii at gmail.com>>
> Date: Tuesday, June 19, 2018 at 18:22
> To: Uri Blumenthal <uri at ll.mit.edu <mailto:uri at ll.mit.edu>>
> Cc: TeX Live 2008 <texlive at tug.org <mailto:texlive at tug.org>>
> Subject: Re: [tex-live] TeXLive-2018 fails to update across firewall
> 
>  
> 
>  
> 
> On Tue, 19 Jun 2018 at 17:27, Blumenthal, Uri - 0553 - MITLL <uri at ll.mit.edu <mailto:uri at ll.mit.edu>> wrote:
> 
> My machines run MacOS High Sierra 10.13.5. I?ve just upgraded from TeXLive-2017 to TeXLive-2018, and I lost the ability to pull updates.
> 
>  
> 
> Some of my machines reside behind a corporate firewall, with Internet accessible only via web proxy (defined in HTTP_PROXY and HTTPS_PROXY environment variables).
> 
>  
> 
> wget on all of my machines is located in /opt/local/bin directory (installed by Macports).
> 
>  
> 
> The error log I?m getting from TeX Live Utility.app seems to indicate that it is unable now to locate wget executable (which is /opt/local/bin/wget and on the PATH).
> 
>  
> 
> 2018-06-19 19:09:41 +0000 Notice +[TLMEnvironment _handleLocationOperationFinished:][24805]  Finished setting command line server location:
> 
>      location = http://tug.ctan.org/tex-archive/systems/texlive/tlnet <http://tug.ctan.org/tex-archive/systems/texlive/tlnet>
> 2018-06-19 19:09:58 +0000 Notice -[TLMLogWindowController awakeFromNib][24805]     Loaded log window controller
> 
> 2018-06-19 19:11:36 +0000 Notice -[TLMOperation main][24805]     Successfully executed `/Applications/TeX/TeX Live Utility.app/Contents/MacOS/agent_installer.py --install --plist /var/folders/c6/lnc_0m093ys8w16md_fm1mnxhtfnj8/T/TLMLaunchAgentController/com.googlecode.mactlmgr.update_check.plist --script /Applications/TeX/TeX Live Utility.app/Contents/Resources/update_check.py`
> 
> 2018-06-19 19:11:36 +0000 Notice -[TLMOperation main][24805]     agent_installer.py: nothing to unload
> 
> 2018-06-19 19:11:36 +0000 Notice -[TLMMainWindowController _handleLaunchAgentInstallFinishedNotification:][24805] Finished running launchd agent installer script
> 
> 2018-06-19 19:12:16 +0000 Notice -[TLMMainWindowController _refreshUpdatedPackageListFromLocation:][24805]  Refreshing list of updated packages?
> 
> 2018-06-19 19:12:17 +0000 Notice -[TLMOperation main][24805]     Failed executing `/Library/TeX/texbin/tlmgr --machine-readable --repository http://tug.ctan.org/tex-archive/systems/texlive/tlnet <http://tug.ctan.org/tex-archive/systems/texlive/tlnet> update --list --all` (error 1)
> 
> 2018-06-19 19:12:17 +0000 Notice -[TLMOperation main][24805]     /Library/TeX/texbin/tlmgr: Initialization failed (in setup_unix_one):
> 
> /Library/TeX/texbin/tlmgr: could not find a usable wget.
> 
> /Library/TeX/texbin/tlmgr: Please install wget and try again.
> 
> tlmgr: Couldn't set up the necessary programs.
> 
> Installation of packages is not supported.
> 
> Please report to texlive at tug.org <mailto:texlive at tug.org>.
> 
> Use of uninitialized value $r in split at /usr/local/texlive/2018/tlpkg/TeXLive/TLUtils.pm line 4167.
> 
> tlmgr: Cannot find main repository, you have to tag one as main!
> 
>  
> 
> Attempt to manually invoke the above command results in:
> 
>  
> 
> $ sudo /Library/TeX/texbin/tlmgr --machine-readable --repository http://tug.ctan.org/tex-archive/system/texlive/tlnet <http://tug.ctan.org/tex-archive/system/texlive/tlnet> update --list --all
> 
> /Library/TeX/texbin/tlmgr: open tlpdb(http://tug.ctan.org/tex-archive/system/texlive/tlnet/tlpkg/texlive.tlpdb <http://tug.ctan.org/tex-archive/system/texlive/tlnet/tlpkg/texlive.tlpdb>) failed: Operation timed out at /usr/local/texlive/2018/tlpkg/TeXLive/TLPDB.pm line 362.
> 
> $
> 
>  
> 
> Please help!
> 
>  
> 
>  
> 
> As a start to sorting this out, it could be useful to know if "sudo -E   /Library/TeX/texbin/tlmgr --machine-readable --repository
> 
>  http://tug.ctan.org/tex-archive/system/texlive/tlnet <http://tug.ctan.org/tex-archive/system/texlive/tlnet> update --list --all" works.  
> 
> 
> 
> 
> The "-E" option tells sudo to pass user's environment (e.g., to get the _PROXY variables and a PATH that mentions /opt/local/bin).  
> 
>  
> 
> -- 
> 
> George N. White III
> 
> 
> 
> -- 
> George N. White III

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180620/b839f165/attachment-0001.html>

From lstonys at vtex.lt  Wed Jun 20 06:50:13 2018
From: lstonys at vtex.lt (Linas Stonys)
Date: Wed, 20 Jun 2018 07:50:13 +0300
Subject: [tex-live] TL2018 runscript problem
In-Reply-To: <F5C089F6AAE648BA94B82D30BB9E81C6@CJ3001517A>
References: <d08af1b8-b532-0464-3e61-0819b9fe9644@vtex.lt>
 <F5C089F6AAE648BA94B82D30BB9E81C6@CJ3001517A>
Message-ID: <f45e4c0a-fd35-6b94-cd88-cd75711ce506@vtex.lt>

That is great! It works well.
Thanks a lot.

Linas

On 6/20/2018 7:15 AM, Akira Kakuto wrote:
> Dear Linas,
> 
>> runscript with my local programs doesn't work any more. They are in 
>> TEXMFLOCAL and used to work well with TL2016.
>> Now I'm getting error:
>> ...
> 
> In r48059, I have installed a new runscript.tlu in the TeX Live
> svn. After the next update of the tlcritical, you may be able to
> use your scripts in trees other than TEXMFDIST.
> It may require some time for the update of the tlcritical.
> You can test by downloading
> https://www.tug.org/svn/texlive/trunk/Master/bin/win32/runscript.tlu
> 
> Thanks,
> Akira
> 
> 
> 

From preining at logic.at  Wed Jun 20 07:02:06 2018
From: preining at logic.at (Norbert Preining)
Date: Wed, 20 Jun 2018 14:02:06 +0900
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
 <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>
 <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
 <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
Message-ID: <20180620050206.GA12044@burischnitzel.preining.info>

hi,

can we all please calm down and do this a bit more systematically, since
there are so many sources of errors.

First of all, Uri, please *fix* your URL
  http://tug.ctan.org/tex-archive/system/texlive/tlnet
which you used is *wrong*, it should be *systems* (mind the final s).

Then for the proxy: I don't think that wget supports proxies. That is
one of the many reasons why the default in TeX Live is to use
  LWP

Could you please do
  sudo -E /Library/TeX/texbin/tlmgr -v --repository http://tug.ctan.org/tex-archive/systems/texlive/tlnet update --list
and send me the output?

Also , please the output of
  /Library/TeX/texbin/tlmgr version -v

> Also, since the error message seems to talk about ?texlive.tlpdb? file - I tried to download it via both texlive wget, and macports wget. It failed in both cases - is it normal?

Yes, because the URL is wrong. As it was correctly stated:

> Proxy request sent, awaiting response... 404 Not Found
> 2018-06-20 00:15:38 ERROR 404: Not Found.

You could have checked by opening the URL in a browser.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From amaxwell at mac.com  Wed Jun 20 07:19:11 2018
From: amaxwell at mac.com (Adam R. Maxwell)
Date: Tue, 19 Jun 2018 22:19:11 -0700
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <20180620050206.GA12044@burischnitzel.preining.info>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
 <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>
 <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
 <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
 <20180620050206.GA12044@burischnitzel.preining.info>
Message-ID: <25424869-896D-4604-9407-19259655EA27@mac.com>



> On Jun 19, 2018, at 22:02 , Norbert Preining <preining at logic.at> wrote:
> 
> First of all, Uri, please *fix* your URL
>  http://tug.ctan.org/tex-archive/system/texlive/tlnet <http://tug.ctan.org/tex-archive/system/texlive/tlnet>
> which you used is *wrong*, it should be *systems* (mind the final s).

Good catch, I missed that. Note that the URL in TLU in the original
post was correct, so that problem still exists.

> Then for the proxy: I don't think that wget supports proxies. That is
> one of the many reasons why the default in TeX Live is to use
>  LWP

Wget uses http_proxy and https_proxy envvars. IIRC they can
be set in .wgetrc, also, as I had a user break his system
with that back in the old days before LWP.

https://www.gnu.org/software/wget/manual/html_node/Proxies.html <https://www.gnu.org/software/wget/manual/html_node/Proxies.html>

-- adam

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180619/519466ae/attachment.html>

From preining at logic.at  Wed Jun 20 07:31:58 2018
From: preining at logic.at (Norbert Preining)
Date: Wed, 20 Jun 2018 14:31:58 +0900
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <25424869-896D-4604-9407-19259655EA27@mac.com>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
 <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>
 <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
 <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
 <20180620050206.GA12044@burischnitzel.preining.info>
 <25424869-896D-4604-9407-19259655EA27@mac.com>
Message-ID: <20180620053158.GA31002@burischnitzel.preining.info>

Hi,

> Wget uses http_proxy and https_proxy envvars. IIRC they can
> be set in .wgetrc, also, as I had a user break his system

Indeed, I searched the man page but I guess I mistyped something because
there was no hit ;-)

That means, let us test a bit more what is going on:

* please set the proxy env vars, then try

  wget http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb
 
* try the same with the TL wget

  /usr/local/texlive/2018/tlpkg/installer/wget/wget.x86_64-darwin http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb

* next try the same with the system provided curl

  curl http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb
 
* next, do *ALL* the above with

  sudo -E ...

and please don't forget to send the outputs of the tlmgr calls I asked 
in the last email. Thanks

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From nospam-abuse at ilyaz.org  Wed Jun 20 11:52:21 2018
From: nospam-abuse at ilyaz.org (Ilya Zakharevich)
Date: Wed, 20 Jun 2018 02:52:21 -0700
Subject: [tex-live] TeXLive 2018 (Windows): unclear message from the
 installer
In-Reply-To: <20180620014901.GA3796@bulldog.preining.info>
References: <20180619153533.hz2hkyvztjbhkpmh@math.berkeley.edu>
 <20180620014901.GA3796@bulldog.preining.info>
Message-ID: <20180620095221.qxwfkuwvyhc6zgrc@math.berkeley.edu>

On Wed, Jun 20, 2018 at 10:49:01AM +0900, Norbert Preining wrote:
> Ok, I have adjusted the text and wizards installer, but the perltk
> installer is slightly different and I hope Siep will fix this.

Thanks!

> >    How would I be able to ?try unsetting them? if the list disappears
> >    when I close the window?
> 
> You should be aware of these environment variables, because you did set
> them. Then, copy and paste should work.

You have a very particular usage model in your head.  Most people have
no clue about environment variables; if the variables are set, they
were set by somebody else.

> > B) The message is not very comprehensible (to put it mildly).  I
> >    propose to restate it like this:
> >       set environment variables in windows
> 
> But this is nothing Windows specific, the same happens on Linux,
> Solaris, AIX, whatever.

But this is Perl, right?
   $msg .= " in windows" if $Config{osname} eq 'MSWin32';  # spelling?
is not a big deal?

Yours,
Ilya

From nospam-abuse at ilyaz.org  Wed Jun 20 14:16:55 2018
From: nospam-abuse at ilyaz.org (Ilya Zakharevich)
Date: Wed, 20 Jun 2018 05:16:55 -0700
Subject: [tex-live] tl2018: problems with including a (very specific) PNG
	file
Message-ID: <20180620121655.vvaioqlwtyp3nato@math.berkeley.edu>

I?m at loss of words to describe precisely what happens.  Please
compile the minimal example I provide, and see the output.

The attached files build ?fine? with tl2009, but produce a very bad
result with tl2018.

A) Both give a warning
      arithmetic: number too big

B) however, the result of tl2009 is ?as expected????provided that both
   width= and height= parameters are given.  (Otherwise tl2009 produces
   something huge.  In the attached example I do not set height=, so
   the height is huge.)

C) The result of tl2018 is humongous (no matter what width= and height=
   say).  Moreover, I think it is wrongly positioned (but this is hard
   to judge?).

Thanks,
Ilya
-------------- next part --------------
A non-text attachment was scrubbed...
Name: try2018.tex
Type: text/x-tex
Size: 163 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180620/d7e93496/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: try-tl2018a.png
Type: image/png
Size: 776 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180620/d7e93496/attachment.png>

From jfbu at free.fr  Wed Jun 20 14:26:01 2018
From: jfbu at free.fr (jfbu)
Date: Wed, 20 Jun 2018 14:26:01 +0200
Subject: [tex-live] Fwd: tl2018: problems with including a (very specific)
	PNG file
References: <A1EAB9A7-FA82-4D71-A1D6-7D2A72751499@free.fr>
Message-ID: <3E3B73E3-AC80-4B63-8983-D99B5C076171@free.fr>



D?but du message r?exp?di? :

> HI
> 
> Le 20 juin 2018 ? 14:16, Ilya Zakharevich <nospam-abuse at ilyaz.org> a ?crit :
> 
>> I?m at loss of words to describe precisely what happens.  Please
>> compile the minimal example I provide, and see the output.
>> 
>> The attached files build ?fine? with tl2009, but produce a very bad
>> result with tl2018.
>> 
>> A) Both give a warning
>>     arithmetic: number too big
>> 
>> B) however, the result of tl2009 is ?as expected????provided that both
>>  width= and height= parameters are given.  (Otherwise tl2009 produces
>>  something huge.  In the attached example I do not set height=, so
>>  the height is huge.)
>> 
>> C) The result of tl2018 is humongous (no matter what width= and height=
>>  say).  Moreover, I think it is wrongly positioned (but this is hard
>>  to judge?).
> 
> 
> opening the png file in Preview.app on Mac OS it says
> 
> 0,99 pixels/pouce
> 
> 1012 ? 190 pixels
> 
> This, by itself, sounds weird: 1 pixel per inch ?
> 
> Best
> 



From zdenek.wagner at gmail.com  Wed Jun 20 14:34:21 2018
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 20 Jun 2018 14:34:21 +0200
Subject: [tex-live] Fwd: tl2018: problems with including a (very
 specific) PNG file
In-Reply-To: <3E3B73E3-AC80-4B63-8983-D99B5C076171@free.fr>
References: <A1EAB9A7-FA82-4D71-A1D6-7D2A72751499@free.fr>
 <3E3B73E3-AC80-4B63-8983-D99B5C076171@free.fr>
Message-ID: <CAC1phyZU3DRKj=HrekC0wSnPbB+HGYWdXc2N6OANPAA_JDMwow@mail.gmail.com>

Hi,

Gimp in Linux says the same, 0.991 pixels/inch, so the image is expected to
be approx 2.8 m wide and 48.7 cm high.



Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2018-06-20 14:26 GMT+02:00 jfbu <jfbu at free.fr>:

>
>
> D?but du message r?exp?di? :
>
> > HI
> >
> > Le 20 juin 2018 ? 14:16, Ilya Zakharevich <nospam-abuse at ilyaz.org> a
> ?crit :
> >
> >> I?m at loss of words to describe precisely what happens.  Please
> >> compile the minimal example I provide, and see the output.
> >>
> >> The attached files build ?fine? with tl2009, but produce a very bad
> >> result with tl2018.
> >>
> >> A) Both give a warning
> >>     arithmetic: number too big
> >>
> >> B) however, the result of tl2009 is ?as expected? ? provided that both
> >>  width= and height= parameters are given.  (Otherwise tl2009 produces
> >>  something huge.  In the attached example I do not set height=, so
> >>  the height is huge.)
> >>
> >> C) The result of tl2018 is humongous (no matter what width= and height=
> >>  say).  Moreover, I think it is wrongly positioned (but this is hard
> >>  to judge?).
> >
> >
> > opening the png file in Preview.app on Mac OS it says
> >
> > 0,99 pixels/pouce
> >
> > 1012 ? 190 pixels
> >
> > This, by itself, sounds weird: 1 pixel per inch ?
> >
> > Best
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180620/1f015169/attachment.html>

From uri at ll.mit.edu  Wed Jun 20 15:35:07 2018
From: uri at ll.mit.edu (Blumenthal, Uri - 0553 - MITLL)
Date: Wed, 20 Jun 2018 13:35:07 +0000
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <20180620050206.GA12044@burischnitzel.preining.info>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
 <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>
 <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
 <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
 <20180620050206.GA12044@burischnitzel.preining.info>
Message-ID: <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>

WARNING: long email

     First of all, Uri, please *fix* your URL
          http://tug.ctan.org/tex-archive/system/texlive/tlnet
     which you used is *wrong*, it should be *systems* (mind the final s).
    
I'm pretty sure I copy-pasted it from the TeX Live Utility log... I could've made a mistake, of course.

And a pleasant news: as of this morning (after doing the tlmgr infrastructure update), TeX Live Utility seems to work, and is happily updating .

I still think the wget provided with texlive package is old/broken, and would like the ability to use the one installed instead (e.g., /opt/local/bin/wget):

$ /usr/local/texlive/2018/tlpkg/installer/wget/wget.x86_64-darwin http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb
wget.x86_64-darwin: Unknown command 'secureprotocol' in /Users/ur20980/.wgetrc at line 139.
$ sudo -E /usr/local/texlive/2018/tlpkg/installer/wget/wget.x86_64-darwin http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb
wget.x86_64-darwin: Unknown command 'secureprotocol' in /Users/ur20980/.wgetrc at line 139.
$ wget http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb
--2018-06-20 09:25:04--  http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb
Resolving llproxy.llan.ll.mit.edu... 
Connecting to llproxy.llan.ll.mit.edu... connected.
Proxy request sent, awaiting response... 200 OK
Length: 13678183 (13M) [text/plain]
Saving to: ?texlive.tlpdb?

texlive.tlpdb                  100%[====================================================>]  13.04M  1.94MB/s    in 7.3s    

2018-06-20 09:25:11 (1.80 MB/s) - ?texlive.tlpdb? saved [13678183/13678183]

$ sudo -E wget http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb
--2018-06-20 09:24:42--  http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb
Resolving llproxy.llan.ll.mit.edu... 
Connecting to llproxy.llan.ll.mit.edu... connected.
Proxy request sent, awaiting response... 200 OK
Length: 13678183 (13M) [text/plain]
Saving to: ?texlive.tlpdb?

texlive.tlpdb                  100%[====================================================>]  13.04M  1.81MB/s    in 7.6s    

2018-06-20 09:24:50 (1.71 MB/s) - ?texlive.tlpdb? saved [13678183/13678183]

$
$ sudo -E curl http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb > t.tlpdb
Warning: /Users/ur20980/.curlrc:2: warning: 'no_proxy' is unknown
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 13.0M  100 13.0M    0     0  1756k      0  0:00:07  0:00:07 --:--:-- 1693k
$


    Could you please do
      sudo -E /Library/TeX/texbin/tlmgr -v --repository http://tug.ctan.org/tex-archive/systems/texlive/tlnet update --list
    and send me the output? Also , please the output of
      /Library/TeX/texbin/tlmgr version -v

Sure. Here are all the outputs:

$ /Library/TeX/texbin/tlmgr version -v
tlmgr revision 47951 (2018-06-07 07:55:43 +0200)
tlmgr using installation: /usr/local/texlive/2018
TeX Live (http://tug.org/texlive) version 2018
Revisions of TeXLive:: modules:
TLConfig: 47938
TLUtils:  47887
TLPOBJ:   47934
TLPDB:    47834
TLPaper:  45795
TLWinGoo: 47907
$ 
$ sudo -E /Library/TeX/texbin/tlmgr -v --repository http://tug.ctan.org/tex-archive/systems/texlive/tlnet update --list
Enter PIN for 'Certificate For PIV Authentication (Uri the Great)': 
D:tlmgr:main: ::tldownload_server defined: TeXLive::TLDownload=HASH(0x7f7f147df978)
D:Using system curl (tested).
D:Using system wget (tested).
D:Using system lz4 (tested).
D:Using system gzip (tested).
D:Using shipped /usr/local/texlive/2018/tlpkg/installer/xz/xz.x86_64-darwin for xz (tested).
D:Using checksum method digest::sha
D:Testing for gpg in gpg
D: ... gpg ok! [gpg --version >/dev/null 2>&1]
D:gpg command line: gpg --homedir "/usr/local/texlive/2018/tlpkg/gpg" --no-secmem-warning --no-permission-warning --lock-never 
D:will verify cryptographic signatures
D:persistent connection set up, trying to get http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512 (for /var/folders/c6/lnc_0m093ys8w16md_fm1mnxhtfnj8/T/JWU0fxuOBF/gcPBuJpuI2)
D:TLUtils::download_file: downloading using lwp succeeded
D:persistent connection set up, trying to get http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc (for /var/folders/c6/lnc_0m093ys8w16md_fm1mnxhtfnj8/T/JWU0fxuOBF/EgIz4Xjf4u)
D:TLUtils::download_file: downloading using lwp succeeded
D:verification succeeded, output:
gpg: Signature made Tue Jun 19 20:24:01 2018 EDT
gpg:                using RSA key 4CE1877E19438C70
gpg: Good signature from "TeX Live Distribution <tex-live at tug.org>" [ultimate]

D:cryptographic signature of http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512 verified
D:verify_checksum: found remote digest
  1c85da777e56c28137c6b0d38c784eaf764a10157e73ff77a177036546263e41d60628077b06b1ef783e6172851fa9b80e3fef831ebc417b075f6e1d49f48e26
from
  /var/folders/c6/lnc_0m093ys8w16md_fm1mnxhtfnj8/T/JWU0fxuOBF/gcPBuJpuI2
for
  /usr/local/texlive/2018/tlpkg/texlive.tlpdb.3c8f533db99d2cf81d8972d89f35787c
and
  http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512
D:tlchecksum(/usr/local/texlive/2018/tlpkg/texlive.tlpdb.3c8f533db99d2cf81d8972d89f35787c): ===1c85da777e56c28137c6b0d38c784eaf764a10157e73ff77a177036546263e41d60628077b06b1ef783e6172851fa9b80e3fef831ebc417b075f6e1d49f48e26===
D:verify_checksum: local_digest = 1c85da777e56c28137c6b0d38c784eaf764a10157e73ff77a177036546263e41d60628077b06b1ef783e6172851fa9b80e3fef831ebc417b075f6e1d49f48e26
D:checksum of local copy identical with remote hash
tlmgr: package repository http://tug.ctan.org/tex-archive/systems/texlive/tlnet (verified)
D:Automatic backups activated, keeping 1 backups.
tlmgr: saving backups to /usr/local/texlive/2018/tlpkg/backups
D:tlmgr: new pkgs: latex-via-exemplos
	luavlna
	includernw
	milsymb
	lualatex-truncate
	powerdot-tuliplab
	pdfoverlay
	cellprops
	onedown
	xbmks
	texdate
	padcount
	musikui
	postage
	clrdblpg
	bezierplot
	dsserif
	competences
	stickstoo
	texdoctk
	erw-l3
	stix2-otf
	kanaparser
	stix2-type1
	endnotesj
	manyind
	gatherenum
	ecothesis
	texdoctk.x86_64-darwin
	cascade
	modulus
	libertinus-otf
	cqubeamer
	colophon
	kurdishlipsum
	tlc-article
	bath-bst
	biblatex-socialscienceshuberlin
D:tlmgr: deleted : 
D:tlmgr: forced  : cochineal
skipping forcibly removed package cochineal
D:bath-bst new package
D:bezierplot new package
D:biblatex-socialscienceshuberlin new package
D:cascade new package
D:cellprops new package
D:clrdblpg new package
D:colophon new package
D:competences new package
D:cqubeamer new package
D:dsserif new package
D:ecothesis new package
D:endnotesj new package
D:erw-l3 new package
D:gatherenum new package
D:includernw new package
D:kanaparser new package
D:kurdishlipsum new package
D:latex-via-exemplos new package
D:libertinus-otf new package
D:lualatex-truncate new package
D:luavlna new package
D:manyind new package
D:milsymb new package
D:modulus new package
D:musikui new package
D:onedown new package
D:padcount new package
D:pdfoverlay new package
D:postage new package
D:powerdot-tuliplab new package
D:stickstoo new package
D:stix2-otf new package
D:stix2-type1 new package
D:texdate new package
D:texdoctk new package
D:texdoctk.x86_64-darwin new package
D:tlc-article new package
D:xbmks new package
D:collection-bibtexextra upd package
D:collection-binextra upd package
D:collection-fontsextra upd package
D:collection-games upd package
D:collection-langarabic upd package
D:collection-langjapanese upd package
D:collection-langportuguese upd package
D:collection-latexextra upd package
D:collection-luatex upd package
D:collection-mathscience upd package
D:collection-pictures upd package
D:collection-plaingeneric upd package
D:collection-publishers upd package
D:collection-xetex upd package
D:colortbl upd package
D:context-filter upd package
D:context-vim upd package
D:cooking-units upd package
D:crossrefware upd package
D:cslatex upd package
D:csquotes upd package
D:ctex upd package
D:ctie.x86_64-darwin upd package
D:cweb.x86_64-darwin upd package
D:datatool upd package
D:datetime2-estonian upd package
D:datetime2-galician upd package
D:datetime2-greek upd package
D:datetime2-hebrew upd package
D:datetime2-icelandic upd package
D:datetime2-irish upd package
D:datetime2-latin upd package
D:datetime2-lsorbian upd package
D:datetime2-ukrainian upd package
D:dccpaper upd package
D:detex.x86_64-darwin upd package
D:doclicense upd package
D:dozenal upd package
D:dtl.x86_64-darwin upd package
D:dvi2tty.x86_64-darwin upd package
D:dvicopy.x86_64-darwin upd package
D:dvidvi.x86_64-darwin upd package
D:dviljk.x86_64-darwin upd package
D:dvipng.x86_64-darwin upd package
D:dvipos.x86_64-darwin upd package
D:dvips.x86_64-darwin upd package
D:dvisvgm.x86_64-darwin upd package
D:dynkin-diagrams upd package
D:esami upd package
D:eso-pic upd package
D:etoc upd package
D:exercisebank upd package
D:factura upd package
D:fduthesis upd package
D:filecontents upd package
D:fira upd package
D:fontawesome5 upd package
D:fonts-tlwg upd package
D:fontware.x86_64-darwin upd package
D:gbt7714 upd package
D:genealogytree upd package
D:gentombow upd package
D:geometry upd package
D:glossaries upd package
D:glossaries-extra upd package
D:graph35 upd package
D:gregoriotex.x86_64-darwin upd package
D:gsftopk.x86_64-darwin upd package
D:handin upd package
D:hecthese upd package
D:ifmtarg upd package
D:ipaex-type1 upd package
D:isodoc upd package
D:japanese-otf-uptex upd package
D:jlreq upd package
D:ketcindy upd package
D:knowledge upd package
D:koma-script-examples upd package
D:komacv-rg upd package
D:kpathsea.x86_64-darwin upd package
D:l3build upd package
D:l3experimental upd package
D:l3kernel upd package
D:l3packages upd package
D:lacheck.x86_64-darwin upd package
D:langsci upd package
D:latex upd package
D:latex-bin upd package
D:latex-make upd package
D:latex2e-help-texinfo upd package
D:latex2man upd package
D:latexindent upd package
D:latexmk upd package
D:latexpand upd package
D:lcdftypetools.x86_64-darwin upd package
D:libertinus upd package
D:libertinust1math upd package
D:ltximg upd package
D:lua-check-hyphen upd package
D:luamplib upd package
D:luatex.x86_64-darwin upd package
D:luatexja upd package
D:luatexko upd package
D:luaxml upd package
D:lwarp upd package
D:ly1 upd package
D:lyluatex upd package
D:m-tx upd package
D:m-tx.x86_64-darwin upd package
D:make4ht upd package
D:makeindex.x86_64-darwin upd package
D:marginnote upd package
D:mathalfa upd package
D:mcf2graph upd package
D:media9 upd package
D:metafont.x86_64-darwin upd package
D:metapost.x86_64-darwin upd package
D:mflua.x86_64-darwin upd package
D:mfware.x86_64-darwin upd package
D:musicography upd package
D:musixtex upd package
D:musixtnt.x86_64-darwin upd package
D:newtx upd package
D:newtxsf upd package
D:nicematrix upd package
D:novel upd package
D:ocgx2 upd package
D:omegaware.x86_64-darwin upd package
D:optidef upd package
D:paracol upd package
D:patgen.x86_64-darwin upd package
D:pdftex.x86_64-darwin upd package
D:pdftools.x86_64-darwin upd package
D:pgfornament-han upd package
D:pkgloader upd package
D:plantuml upd package
D:platex upd package
D:plex-otf upd package
D:pmx.x86_64-darwin upd package
D:polexpr upd package
D:ps2pk.x86_64-darwin upd package
D:pst-ode upd package
D:pstools.x86_64-darwin upd package
D:pstricks upd package
D:psutils.x86_64-darwin upd package
D:ptex upd package
D:ptex.x86_64-darwin upd package
D:ptex2pdf upd package
D:regexpatch upd package
D:register upd package
D:reledmac upd package
D:roboto upd package
D:robustindex upd package
D:scientific-thesis-cover upd package
D:scsnowman upd package
D:seetexk.x86_64-darwin upd package
D:semantic-markup upd package
D:siunitx upd package
D:skdoc upd package
D:stix upd package
D:structmech upd package
D:struktex upd package
D:synctex upd package
D:synctex.x86_64-darwin upd package
D:t1utils.x86_64-darwin upd package
D:t2 upd package
D:tetex upd package
D:tex-gyre upd package
D:tex.x86_64-darwin upd package
D:tex4ebook upd package
D:tex4ht upd package
D:tex4ht.x86_64-darwin upd package
D:texdoc upd package
D:texdoc.x86_64-darwin upd package
D:texlive-de upd package
D:texlive-docindex upd package
D:texlive-en upd package
D:texlive-fr upd package
D:texlive-msg-translations upd package
D:texlive-scripts upd package
D:texware.x86_64-darwin upd package
D:thesis-gwu upd package
D:thucoursework upd package
D:thuthesis upd package
D:tie.x86_64-darwin upd package
D:tikz-relay upd package
D:tikzsymbols upd package
D:tools upd package
D:toptesi upd package
D:tracklang upd package
D:ttfutils.x86_64-darwin upd package
D:turabian-formatting upd package
D:uantwerpendocs upd package
D:unicode-data upd package
D:univie-ling upd package
D:updmap-map upd package
D:uplatex upd package
D:uptex upd package
D:uptex.x86_64-darwin upd package
D:velthuis.x86_64-darwin upd package
D:venndiagram upd package
D:visualtikz upd package
D:vlna.x86_64-darwin upd package
D:web.x86_64-darwin upd package
D:witharrows upd package
D:xassoccnt upd package
D:xcharter upd package
D:xdvi.x86_64-darwin upd package
D:xecjk upd package
D:xellipsis upd package
D:xepersian upd package
D:xetex upd package
D:xetex.x86_64-darwin upd package
D:xetexko upd package
D:xindy.x86_64-darwin upd package
D:xint upd package
D:xltabular upd package
D:xsavebox upd package
D:xurl upd package
D:yathesis upd package
D:zxjafont upd package
D:zxjatype upd package
update:   colortbl           [595k]: local:    29803, source:    47614
update:   context-filter      [17k]: local:    47085, source:    47530
update:   context-vim         [15k]: local:    47085, source:    47531
update:   cooking-units      [663k]: local:    45585, source:    47943
update:   crossrefware       [235k]: local:    45927, source:    47861
update:   cslatex             [55k]: local:    45678, source:    47536
update:   csquotes           [325k]: local:    46601, source:    47564
update:   ctex              [1221k]: local:    46474, source:    47595
update:   ctie.x86_64-darwin  [33k]: local:    47165, source:    47653
update:   cweb.x86_64-darwin  [77k]: local:    47165, source:    47653
update:   datatool          [2766k]: local:    45759, source:    47543
update:   datetime2-estonian  [87k]: local:    36682, source:    47565
update:   datetime2-galician  [87k]: local:    36692, source:    47631
update:   datetime2-greek     [84k]: local:    36692, source:    47533
update:   datetime2-hebrew   [271k]: local:    36692, source:    47534
update:   datetime2-icelandic [87k]: local:    36692, source:    47501
update:   datetime2-irish    [322k]: local:    36635, source:    47632
update:   datetime2-latin    [273k]: local:    36692, source:    47748
update:   datetime2-lsorbian  [92k]: local:    36692, source:    47749
update:   datetime2-ukrainian [73k]: local:    44588, source:    47552
update:   dccpaper           [287k]: local:    45638, source:    47717
update:   detex.x86_64-darwin [43k]: local:    47165, source:    47653
update:   doclicense         [495k]: local:    46661, source:    47975
update:   dozenal            [415k]: local:    44740, source:    47680
update:   dtl.x86_64-darwin   [21k]: local:    47165, source:    47653
update:   dvi2tty.x86_64-darwin [69k]: local:    47165, source:    47653
update:   dvicopy.x86_64-darwin [56k]: local:    47165, source:    47653
update:   dvidvi.x86_64-darwin [9k]: local:    47165, source:    47653
update:   dviljk.x86_64-darwin [83k]: local:    47165, source:    47653
update:   dvipng.x86_64-darwin [463k]: local:    47165, source:    47653
update:   dvipos.x86_64-darwin [46k]: local:    47165, source:    47653
update:   dvips.x86_64-darwin [147k]: local:    47165, source:    47653
update:   dvisvgm.x86_64-darwin [1483k]: local:    47165, source:    47653
update:   dynkin-diagrams    [603k]: local:    46821, source:    47620
update:   esami             [1420k]: local:    46961, source:    47639
update:   eso-pic            [257k]: local:    37925, source:    47694
update:   etoc              [1230k]: local:    46735, source:    48047
update:   exercisebank       [282k]: local:    47380, source:    47483
update:   factura            [784k]: local:    46949, source:    47816
update:   fduthesis         [1546k]: local:    47408, source:    47628
update:   filecontents       [123k]: local:    24250, source:    47890
update:   fira             [13971k]: local:    46260, source:    47835
update:   fontawesome5      [1246k]: local:    46787, source:    48045
update:   fonts-tlwg        [6963k]: local:    45469, source:    47499
update:   fontware.x86_64-darwin [101k]: local:    47165, source:    47653
update:   gbt7714            [159k]: local:    47418, source:    47792
update:   genealogytree     [3657k]: local:    46018, source:    47539
update:   gentombow          [538k]: local:    46987, source:    47738
update:   geometry           [477k]: local:    47106, source:    47638
update:   glossaries        [5442k]: local:    47357, source:    47898
update:   glossaries-extra  [4937k]: local:    47410, source:    47827
update:   graph35           [2100k]: local:    47088, source:    47522
update:   gregoriotex.x86_64-darwin [124k]: local:    47165, source:    47653
update:   gsftopk.x86_64-darwin [40k]: local:    47165, source:    47653
update:   handin            [2371k]: local:    47292, source:    47590
update:   hecthese           [892k]: local:    45953, source:    47473
update:   ifmtarg             [40k]: local:    19363, source:    47544
update:   ipaex-type1      [13214k]: local:    42403, source:    47700
update:   isodoc            [2551k]: local:    39520, source:    47868
update:   japanese-otf-uptex [152k]: local:    47352, source:    47702
update:   jlreq              [103k]: local:    46514, source:    48039
update:   ketcindy         [10034k]: local:    47435, source:    48037
update:   knowledge          [750k]: local:    46669, source:    47739
update:   koma-script-examples [551k]: local:    34243, source:    47523
update:   komacv-rg          [852k]: local:    45187, source:    47668
update:   kpathsea.x86_64-darwin [47k]: local:    47165, source:    47653
update:   l3build            [718k]: local:    47135, source:    47669
update:   l3experimental    [2848k]: local:    46875, source:    47705
update:   l3kernel          [8051k]: local:    46875, source:    48022
update:   l3packages        [1794k]: local:    46712, source:    47705
update:   lacheck.x86_64-darwin [20k]: local:    47165, source:    47653
update:   langsci            [192k]: local:    45403, source:    47487
update:   latex            [13389k]: local:    47377, source:    47860
update:   latex-bin           [21k]: local:    47198, source:    47536
update:   latex-make         [748k]: local:    42914, source:    47869
update:   latex2e-help-texinfo [1413k]: local:    47419, source:    47936
update:   latex2man          [374k]: local:    45484, source:    47942
update:   latexindent        [750k]: local:    46388, source:    47964
update:   latexmk            [523k]: local:    46378, source:    47836
update:   latexpand            [9k]: local:    41873, source:    47535
update:   lcdftypetools.x86_64-darwin [663k]: local:    47165, source:    47653
update:   libertinus        [5350k]: local:    47077, source:    47488
update:   libertinust1math  [2490k]: local:    45439, source:    47571
update:   ltximg             [216k]: local:    37006, source:    47568
update:   lua-check-hyphen   [118k]: local:    46573, source:    47527
update:   luamplib           [190k]: local:    47336, source:    47547
update:   luatex.x86_64-darwin [3777k]: local:    47348, source:    47653
update:   luatexja          [3557k]: local:    47178, source:    48031
update:   luatexko           [256k]: local:    47337, source:    47512
update:   luaxml             [125k]: local:    46768, source:    48015
update:   lwarp             [2382k]: local:    47250, source:    47944
update:   ly1                 [58k]: local:    21086, source:    47848
update:   lyluatex           [872k]: local:    46952, source:    47584
update:   m-tx.x86_64-darwin  [45k]: local:    47165, source:    47653
update:   m-tx               [496k]: local:    47198, source:    47553
update:   make4ht            [137k]: local:    47398, source:    47616
update:   makeindex.x86_64-darwin [46k]: local:    47165, source:    47653
update:   marginnote         [315k]: local:    43979, source:    47515
update:   mathalfa           [956k]: local:    43332, source:    47575
update:   mcf2graph          [886k]: local:    46199, source:    48046
update:   media9            [6694k]: local:    47333, source:    47957
update:   metafont.x86_64-darwin [234k]: local:    47165, source:    47653
update:   metapost.x86_64-darwin [870k]: local:    47165, source:    47653
update:   mflua.x86_64-darwin [540k]: local:    47165, source:    47653
update:   mfware.x86_64-darwin [118k]: local:    47165, source:    47653
update:   musicography       [263k]: local:    45658, source:    47838
update:   musixtex          [2065k]: local:    46141, source:    47682
update:   musixtnt.x86_64-darwin [8k]: local:    47165, source:    47653
update:   newtx             [4442k]: local:    47160, source:    47889
update:   newtxsf            [428k]: local:    41918, source:    47958
update:   nicematrix         [265k]: local:    47232, source:    47545
update:   novel             [4682k]: local:    47361, source:    47492
update:   ocgx2               [15k]: local:    47334, source:    47961
update:   omegaware.x86_64-darwin [258k]: local:    47165, source:    47653
update:   optidef            [248k]: local:    45945, source:    47818
update:   paracol            [823k]: local:    38621, source:    47750
update:   patgen.x86_64-darwin [22k]: local:    47165, source:    47653
update:   pdftex.x86_64-darwin [859k]: local:    47165, source:    47653
update:   pdftools.x86_64-darwin [350k]: local:    47165, source:    47653
update:   pgfornament-han    [992k]: local:    47399, source:    47789
update:   pkgloader          [475k]: local:    47251, source:    47486
update:   plantuml            [67k]: local:    47089, source:    47924
update:   platex            [1622k]: local:    47402, source:    47782
update:   plex-otf           [536k]: local:    47157, source:    47562
update:   pmx.x86_64-darwin  [233k]: local:    47165, source:    47653
update:   polexpr             [48k]: local:    47412, source:    47509
update:   ps2pk.x86_64-darwin [86k]: local:    47165, source:    47653
update:   pst-ode            [125k]: local:    45057, source:    47959
update:   pstools.x86_64-darwin [4k]: local:    47165, source:    47653
update:   pstricks          [6997k]: local:    46232, source:    47572
update:   psutils.x86_64-darwin [60k]: local:    47165, source:    47653
update:   ptex.x86_64-darwin [1492k]: local:    47165, source:    47653
update:   ptex                [97k]: local:    47198, source:    47918
update:   ptex2pdf            [16k]: local:    44664, source:    47716
update:   regexpatch         [533k]: local:    47233, source:    47601
update:   register           [312k]: local:    21127, source:    47773
update:   reledmac          [3243k]: local:    47359, source:    47794
update:   roboto           [13502k]: local:    38386, source:    47586
update:   robustindex        [418k]: local:    45452, source:    47521
update:   scientific-thesis-cover [134k]: local:    46172, source:    47923
update:   scsnowman          [476k]: local:    46320, source:    47953
update:   seetexk.x86_64-darwin [28k]: local:    47165, source:    47653
update:   semantic-markup    [274k]: local:    42374, source:    47837
update:   siunitx            [723k]: local:    47045, source:    47746
update:   skdoc              [301k]: local:    43170, source:    47526
update:   stix              [4357k]: local:    36914, source:    47652
update:   structmech         [148k]: local:    47351, source:    47859
update:   struktex           [841k]: local:    46873, source:    47931
update:   synctex.x86_64-darwin [72k]: local:    47165, source:    47653
update:   synctex             [42k]: local:    47198, source:    48032
update:   t1utils.x86_64-darwin [44k]: local:    47165, source:    47653
update:   t2                  [55k]: local:    47458, source:    47870
update:   tetex              [583k]: local:    47198, source:    47929
update:   tex.x86_64-darwin  [216k]: local:    47165, source:    47653
update:   tex-gyre         [15075k]: local:    18651, source:    48025
update:   tex4ebook           [94k]: local:    47414, source:    47672
update:   tex4ht.x86_64-darwin [96k]: local:    47165, source:    47653
update:   tex4ht             [899k]: local:    47437, source:    48002
update:   texdoc.x86_64-darwin [1k]: local:    29809, source:    47948
update:   texdoc             [151k]: local:    47446, source:    47946
update:   texlive-de         [649k]: local:    47442, source:    47592
update:   texlive-docindex   [237k]: local:    47424, source:    48049
update:   texlive-en        [1559k]: local:    47434, source:    47845
update:   texlive-fr        [1054k]: local:    47425, source:    47463
update:   texlive-msg-translations [110k]: local:    47433, source:    47921
update:   texlive-scripts    [116k]: local:    47368, source:    48035
update:   texware.x86_64-darwin [51k]: local:    47165, source:    47653
update:   thesis-gwu         [505k]: local:    46524, source:    47795
update:   thucoursework      [652k]: local:    47227, source:    47781
update:   thuthesis         [1913k]: local:    46132, source:    47740
update:   tie.x86_64-darwin   [32k]: local:    47165, source:    47653
update:   tikz-relay         [478k]: local:    46680, source:    48024
update:   tikzsymbols        [576k]: local:    45222, source:    47730
update:   tools             [5310k]: local:    47377, source:    47671
update:   toptesi           [5413k]: local:    46404, source:    47699
update:   tracklang          [963k]: local:    46703, source:    47704
update:   ttfutils.x86_64-darwin [413k]: local:    47165, source:    47653
update:   turabian-formatting [124k]: local:    45700, source:    47796
update:   uantwerpendocs    [2221k]: local:    46786, source:    47732
update:   unicode-data       [229k]: local:    44711, source:    48003
update:   univie-ling       [2049k]: local:    46790, source:    47490
update:   updmap-map         [182k]: local:    46957, source:    47662
update:   uplatex            [893k]: local:    47376, source:    47536
update:   uptex.x86_64-darwin [6793k]: local:    47348, source:    47653
update:   uptex               [27k]: local:    46931, source:    47918
update:   velthuis.x86_64-darwin [14k]: local:    47165, source:    47653
update:   venndiagram        [345k]: local:    40058, source:    47952
update:   visualtikz        [3869k]: local:    46386, source:    47888
update:   vlna.x86_64-darwin   [9k]: local:    47165, source:    47653
update:   web.x86_64-darwin   [79k]: local:    47165, source:    47653
update:   witharrows         [291k]: local:    46616, source:    47751
update:   xassoccnt         [1203k]: local:    46209, source:    47976
update:   xcharter          [1685k]: local:    46105, source:    47941
update:   xdvi.x86_64-darwin [526k]: local:    47165, source:    47653
update:   xecjk             [1776k]: local:    47362, source:    47519
update:   xellipsis          [349k]: local:    42764, source:    47546
update:   xepersian         [1074k]: local:    46485, source:    48020
update:   xetex.x86_64-darwin [6957k]: local:    47348, source:    47653
update:   xetex              [594k]: local:    45931, source:    47536
update:   xetexko            [282k]: local:    47338, source:    47513
update:   xindy.x86_64-darwin [1928k]: local:    47165, source:    47653
update:   xint              [2761k]: local:    46870, source:    48040
update:   xltabular           [73k]: local:    45609, source:    47829
update:   xsavebox           [369k]: local:    47177, source:    47962
update:   xurl                [44k]: local:    46268, source:    47904
update:   yathesis          [4889k]: local:    42671, source:    47914
update:   zxjafont           [146k]: local:    37281, source:    47613
update:   zxjatype           [142k]: local:    44949, source:    47597
autoinst: bath-bst           [740k]: local: <absent>, source:    47507
autoinst: bezierplot         [256k]: local: <absent>, source:    47977
autoinst: biblatex-socialscienceshuberlin [112k]: local: <absent>, source:    47839
autoinst: cascade             [77k]: local: <absent>, source:    47532
autoinst: cellprops          [571k]: local: <absent>, source:    48023
autoinst: clrdblpg           [288k]: local: <absent>, source:    47511
autoinst: colophon           [378k]: local: <absent>, source:    47913
autoinst: competences          [8k]: local: <absent>, source:    47573
autoinst: cqubeamer         [2455k]: local: <absent>, source:    47630
autoinst: dsserif            [320k]: local: <absent>, source:    47570
autoinst: ecothesis          [334k]: local: <absent>, source:    48007
autoinst: endnotesj          [155k]: local: <absent>, source:    47703
autoinst: erw-l3             [463k]: local: <absent>, source:    47826
autoinst: gatherenum         [420k]: local: <absent>, source:    48051
autoinst: includernw         [158k]: local: <absent>, source:    47557
autoinst: kanaparser         [363k]: local: <absent>, source:    48052
autoinst: kurdishlipsum       [89k]: local: <absent>, source:    47518
autoinst: latex-via-exemplos [1640k]: local: <absent>, source:    48038
autoinst: libertinus-otf    [2212k]: local: <absent>, source:    48006
autoinst: lualatex-truncate   [66k]: local: <absent>, source:    47915
autoinst: luavlna             [95k]: local: <absent>, source:    47892
autoinst: manyind            [154k]: local: <absent>, source:    47574
autoinst: milsymb           [1530k]: local: <absent>, source:    47482
autoinst: modulus            [175k]: local: <absent>, source:    47599
autoinst: musikui            [423k]: local: <absent>, source:    47472
autoinst: onedown           [2055k]: local: <absent>, source:    47828
autoinst: padcount           [149k]: local: <absent>, source:    47621
autoinst: pdfoverlay         [540k]: local: <absent>, source:    47657
autoinst: postage            [308k]: local: <absent>, source:    47893
autoinst: powerdot-tuliplab [1252k]: local: <absent>, source:    47963
autoinst: stickstoo         [3107k]: local: <absent>, source:    47858
autoinst: stix2-otf         [1264k]: local: <absent>, source:    47549
autoinst: stix2-type1       [4425k]: local: <absent>, source:    47554
autoinst: texdate            [261k]: local: <absent>, source:    47878
autoinst: texdoctk.x86_64-darwin [1k]: local: <absent>, source:    29809
autoinst: texdoctk            [57k]: local: <absent>, source:    47978
autoinst: tlc-article        [112k]: local: <absent>, source:    47891
autoinst: xbmks              [282k]: local: <absent>, source:    48005
update:   collection-bibtexextra [2k]: local:    47407, source:    47839
update:   collection-binextra  [1k]: local:    47421, source:    47945
update:   collection-fontsextra [2k]: local:    46869, source:    47656
update:   collection-games     [1k]: local:    42992, source:    47828
update:   collection-langarabic [1k]: local:    46628, source:    47518
update:   collection-langjapanese [1k]: local:    46987, source:    47703
update:   collection-langportuguese [1k]: local:    30962, source:    47524
update:   collection-latexextra [6k]: local:    47224, source:    48051
update:   collection-luatex    [1k]: local:    47011, source:    48052
update:   collection-mathscience [2k]: local:    47351, source:    47532
update:   collection-pictures  [2k]: local:    47088, source:    47893
update:   collection-plaingeneric [1k]: local:    45805, source:    47878
update:   collection-publishers [2k]: local:    47227, source:    48007
update:   collection-xetex     [1k]: local:    45489, source:    47630
$

 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 5211 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180620/fa78f3aa/attachment-0001.p7s>

From zdenek.wagner at gmail.com  Wed Jun 20 15:40:45 2018
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 20 Jun 2018 15:40:45 +0200
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
 <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>
 <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
 <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
 <20180620050206.GA12044@burischnitzel.preining.info>
 <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
Message-ID: <CAC1phyZ7rpBF2=__8qvAH3uXT=u6LRmjRo-Mg161AH106XYC9g@mail.gmail.com>

2018-06-20 15:35 GMT+02:00 Blumenthal, Uri - 0553 - MITLL <uri at ll.mit.edu>:

> WARNING: long email
>
>      First of all, Uri, please *fix* your URL
>           http://tug.ctan.org/tex-archive/system/texlive/tlnet
>      which you used is *wrong*, it should be *systems* (mind the final s).
>
> I'm pretty sure I copy-pasted it from the TeX Live Utility log... I
> could've made a mistake, of course.
>
> And a pleasant news: as of this morning (after doing the tlmgr
> infrastructure update), TeX Live Utility seems to work, and is happily
> updating .
>
> I still think the wget provided with texlive package is old/broken, and
> would like the ability to use the one installed instead (e.g.,
> /opt/local/bin/wget):
>
> It was mentioned here a short time ago, wget from MacPorts supports https
but wget in MacTeX is compiled without https. For this reason the installer
is being modified to use curl which is distributed with Mac OS X (no user
installation needed) and https is supported.


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180620/5b6e1133/attachment.html>

From amaxwell at mac.com  Wed Jun 20 15:58:56 2018
From: amaxwell at mac.com (Adam R. Maxwell)
Date: Wed, 20 Jun 2018 06:58:56 -0700
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
 <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>
 <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
 <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
 <20180620050206.GA12044@burischnitzel.preining.info>
 <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
Message-ID: <3A2818AD-3D8E-441C-A3D7-69E63FAA8517@mac.com>



> On Jun 20, 2018, at 06:35 , Blumenthal, Uri - 0553 - MITLL <uri at ll.mit.edu> wrote:
> 
> I still think the wget provided with texlive package is old/broken, and would like the ability to use the one installed instead (e.g., /opt/local/bin/wget):
> 
> $ /usr/local/texlive/2018/tlpkg/installer/wget/wget.x86_64-darwin http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb <http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb>
> wget.x86_64-darwin: Unknown command 'secureprotocol' in /Users/ur20980/.wgetrc at line 139.

FWIW, the full TLU log would have had a warning about the existence of ~/.wgetrc, since I've seen problems with "unknown command" before. Wget doesn't seem to care about being forward-compatible with its config files.

-- 
adam

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180620/835451b0/attachment.html>

From preining at logic.at  Wed Jun 20 17:05:54 2018
From: preining at logic.at (Norbert Preining)
Date: Thu, 21 Jun 2018 00:05:54 +0900
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
 <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>
 <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
 <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
 <20180620050206.GA12044@burischnitzel.preining.info>
 <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
Message-ID: <20180620150554.GA11093@bulldog.preining.info>

Hi Uri,

> And a pleasant news: as of this morning (after doing the tlmgr infrastructure update), TeX Live Utility seems to work, and is happily updating .

That is surprising, because it uses LWP and in this respect nothing has
changed in long long time. But see below.

> I still think the wget provided with texlive package is old/broken, and would like the ability to use the one installed instead (e.g., /opt/local/bin/wget):

That is true, the shipped wget is a bit old and we are working to update
it.

BUT ... it doesn't seem that the shipped wget is used, but the one
provided by the system!!!

> $ sudo -E wget http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb
> --2018-06-20 09:24:42--  http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb
> Resolving llproxy.llan.ll.mit.edu... 
> Connecting to llproxy.llan.ll.mit.edu... connected.
> Proxy request sent, awaiting response... 200 OK
> Length: 13678183 (13M) [text/plain]

So that shows that it has nothing to do with sudo or not sudo.

> $ sudo -E curl http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb > t.tlpdb
> Warning: /Users/ur20980/.curlrc:2: warning: 'no_proxy' is unknown

This is again strange on your system. TeX Live does not ship curl, but
uses the system provided one ... but that one cannot read your .curlrc.
What are you putting into it????

> 100 13.0M  100 13.0M    0     0  1756k      0  0:00:07  0:00:07 --:--:-- 1693k

But at least it downloaded the correct stuff.

> $ /Library/TeX/texbin/tlmgr version -v
> tlmgr revision 47951 (2018-06-07 07:55:43 +0200)

This is after the update of texlive.infra/tlmgr.

> D:tlmgr:main: ::tldownload_server defined: TeXLive::TLDownload=HASH(0x7f7f147df978)

Which shows that LWP is used.

> D:Using system wget (tested).

THis is *really* surprising... WHY did it choose wget from the system,
it should have taken the one provided by TL ... I need to find out why.

> D:persistent connection set up, trying to get http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512 (for /var/folders/c6/lnc_0m093ys8w16md_fm1mnxhtfnj8/T/JWU0fxuOBF/gcPBuJpuI2)
> D:TLUtils::download_file: downloading using lwp succeeded

So we see that neither wget nor curl is used, which IS GOOD!!!

To repeat it the uptimes times, the defaults in TL are made for speed
and broad support, please don't play with them if not necessary.

> D:tlmgr: new pkgs: latex-via-exemplos

So all looks fine here, nothing I can help you now.

All the best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From uri at ll.mit.edu  Wed Jun 20 17:47:13 2018
From: uri at ll.mit.edu (Blumenthal, Uri - 0553 - MITLL)
Date: Wed, 20 Jun 2018 15:47:13 +0000
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <20180620150554.GA11093@bulldog.preining.info>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
 <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>
 <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
 <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
 <20180620050206.GA12044@burischnitzel.preining.info>
 <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
 <20180620150554.GA11093@bulldog.preining.info>
Message-ID: <26F5343E-94C9-4BB1-BB65-B307E6A27A43@ll.mit.edu>

    > I still think the wget provided with texlive package is old/broken, and would like the ability to use the one installed instead (e.g., /opt/local/bin/wget):
    
    That is true, the shipped wget is a bit old and we are working to update it.
    
    BUT ... it doesn't seem that the shipped wget is used, but the one
    provided by the system!!!

I for one am VERY HAPPY that it used the system-provided wget.
    
    > $ sudo -E curl http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb > t.tlpdb
    > Warning: /Users/ur20980/.curlrc:2: warning: 'no_proxy' is unknown
    
    This is again strange on your system. TeX Live does not ship curl, but
    uses the system provided one ... but that one cannot read your .curlrc.
    What are you putting into it????

I'm pretty sure it uses the system-provided curl. And again, am very happy about that. 

After checking, my ".curlrc" defined both "noproxy=..." and "no_proxy=...". The second one appears to be incorrect, so I removed it.
    
    > 100 13.0M  100 13.0M    0     0  1756k      0  0:00:07  0:00:07 --:--:-- 1693k
    
    But at least it downloaded the correct stuff.

Yep!
    
    > $ /Library/TeX/texbin/tlmgr version -v
    > tlmgr revision 47951 (2018-06-07 07:55:43 +0200)
    
    This is after the update of texlive.infra/tlmgr.

Yep.
    
    > D:tlmgr:main: ::tldownload_server defined: TeXLive::TLDownload=HASH(0x7f7f147df978)
    
    Which shows that LWP is used.
    
    > D:Using system wget (tested).
    
    THis is *really* surprising... WHY did it choose wget from the system,
    it should have taken the one provided by TL ... I need to find out why.
    
Can you please make an option for the user to force using the system-provided wget? Pretty-please?

    > D:TLUtils::download_file: downloading using lwp succeeded
    
    So we see that neither wget nor curl is used, which IS GOOD!!!

;-)
    
    To repeat it the uptimes times, the defaults in TL are made for speed
    and broad support, please don't play with them if not necessary.

I wouldn't mess with it, if it worked! 

As for wget and curl - they are used pretty heavily, so, naturally, I had to put some config parameters in - like what proxies 
    
    > D:tlmgr: new pkgs: latex-via-exemplos
    
    So all looks fine here, nothing I can help you now.
    
Maybe it would be possible to use system-provided (instead of TL-packaged) wget and/or curl when LWP doesn't work? And allowing the user to choose between system-provided and TL-provided?

Thanks! 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 5211 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180620/8090cc9b/attachment-0001.p7s>

From karl at freefriends.org  Wed Jun 20 23:12:39 2018
From: karl at freefriends.org (Karl Berry)
Date: Wed, 20 Jun 2018 21:12:39 GMT
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <20180620150554.GA11093@bulldog.preining.info>
Message-ID: <201806202112.w5KLCdXH003187@freefriends.org>

    the shipped wget is a bit old 

I don't think TL wget.*darwin is old (and even if it is, the oldness
doesn't matter). The deficiency is that it doesn't support https. And I
don't see a great need to change that, which would not be easy, due to
insane ssl-related dependencies.

With the new defaults, the TL wget is only used if the system curl is
not available. That should usually solve the problem for https on macs.

For the systems where there is no curl, I think it is good to still
distribute the wget we have now so there is something available. -k

From preining at logic.at  Thu Jun 21 01:51:06 2018
From: preining at logic.at (Norbert Preining)
Date: Thu, 21 Jun 2018 08:51:06 +0900
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <26F5343E-94C9-4BB1-BB65-B307E6A27A43@ll.mit.edu>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
 <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>
 <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
 <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
 <20180620050206.GA12044@burischnitzel.preining.info>
 <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
 <20180620150554.GA11093@bulldog.preining.info>
 <26F5343E-94C9-4BB1-BB65-B307E6A27A43@ll.mit.edu>
Message-ID: <20180620235106.GA18704@bulldog.preining.info>

Hi Uri,

> I'm pretty sure it uses the system-provided curl. And again, am very happy about that. 

TL does not provide curl, it needs to be provided by the system. But it
is not necessary.

>     THis is *really* surprising... WHY did it choose wget from the system,
>     it should have taken the one provided by TL ... I need to find out why.
>     
> Can you please make an option for the user to force using the system-provided wget? Pretty-please?

What for? On Mac it will probably never hit wget anymore. With the
latest update you included, the logic is now
  - by default try LWP
  - if that fails and curl is available, try curl
  - if that fails, use wget
Now since curl is always available on MacOS, I guess that wget will
never be used on.

And, in addition, there is already a way to force TL to use
different programs. I quote from the tlmgr man page:

    "TEXLIVE_DOWNLOADER"
    "TL_DOWNLOAD_PROGRAM"
    "TL_DOWNLOAD_ARGS"
        These options allow selecting different download programs then the
        ones automatically selected by the installer. The order of selection
        is:

        1.      If the environment variable "TEXLIVE_DOWNLOADER" is defined,
                use it; abort if the specified program doesn't work. Possible
                values: "curl", "wget". The necessary options are added
                internally.

        2.      If the environment variable "TL_DOWNLOAD_PROGRAM" is defined
                (can be any value), use it together with "TL_DOWNLOAD_ARGS";
                abort if it doesn't work.

        3.      If LWP is available and working, use that (by far the most
                efficient method, as it supports persistent downloads).

        4.      If curl is available (from the system) and working, use that.

        5.      If wget is available (either from the system or TL) and
                working, use that.

        TL still provides "wget" binaries for some platforms, so some download
        method should always be available.


> I wouldn't mess with it, if it worked! 

It works, right?

> Maybe it would be possible to use system-provided (instead of TL-packaged) wget and/or curl when LWP doesn't work? And allowing the user to choose between system-provided and TL-provided?

As I said, and explained in the excerpt from the man page, it is curl that 
will be used.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From preining at logic.at  Thu Jun 21 01:51:56 2018
From: preining at logic.at (Norbert Preining)
Date: Thu, 21 Jun 2018 08:51:56 +0900
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <201806202112.w5KLCdXH003187@freefriends.org>
References: <20180620150554.GA11093@bulldog.preining.info>
 <201806202112.w5KLCdXH003187@freefriends.org>
Message-ID: <20180620235156.GB18704@bulldog.preining.info>

> I don't think TL wget.*darwin is old (and even if it is, the oldness
> doesn't matter). The deficiency is that it doesn't support https. And I

Indeed, you are right. That error message has nothing to do with old/new.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From uri at ll.mit.edu  Thu Jun 21 03:23:59 2018
From: uri at ll.mit.edu (Blumenthal, Uri - 0553 - MITLL)
Date: Wed, 20 Jun 2018 21:23:59 -0400
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <20180620235106.GA18704@bulldog.preining.info>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
 <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>
 <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
 <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
 <20180620050206.GA12044@burischnitzel.preining.info>
 <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
 <20180620150554.GA11093@bulldog.preining.info>
 <26F5343E-94C9-4BB1-BB65-B307E6A27A43@ll.mit.edu>
 <20180620235106.GA18704@bulldog.preining.info>
Message-ID: <1EFBC576-0F29-46F1-8B94-BE8C6BF2F88B@ll.mit.edu>


>> I'm pretty sure it uses the system-provided curl. And again, am very happy about that. 
> 
> TL does not provide curl, it needs to be provided by the system. But it
> is not necessary.

Not necessary in what sense? If LWP works, then nothing else is needed. If it doesn?t work (for whatever reason), then reverting to what?s installed on the target system seems a reasonable fallback.

>>    THis is *really* surprising... WHY did it choose wget from the system,
>>    it should have taken the one provided by TL ... I need to find out why.
>> 
>> Can you please make an option for the user to force using the system-provided wget? Pretty-please?
> 
> What for?

So it would work (a) on systems like mine, and (b) with the current web servers that now usually insist on https, and often rewrite the URL switching to https: on their own.

> On Mac it will probably never hit wget anymore. With the
> latest update you included, the logic is now
>  - by default try LWP
>  - if that fails and curl is available, try curl
>  - if that fails, use wget

But which wget? The one that?s shipped with TL doesn?t cut the mustard.

> Now since curl is always available on MacOS, I guess that wget will
> never be used on.

You may be right in this. Still, I see no harm in allowing for wget - some installations may have curl broken. I know it took me some time to get it working, and it wasn?t a high priority because wget was there, doing the job.

> And, in addition, there is already a way to force TL to use
> different programs. I quote from the tlmgr man page:
> 
>    "TEXLIVE_DOWNLOADER"
>    "TL_DOWNLOAD_PROGRAM"
>    ?TL_DOWNLOAD_ARGS"

Ah. I wouldn?t be able to use these with TeX Live Utility, but they should work with tlmgr?


>        These options allow selecting different download programs then the
>        ones automatically selected by the installer. The order of selection
>        is:
> 
>        1.      If the environment variable "TEXLIVE_DOWNLOADER" is defined,
>                use it; abort if the specified program doesn't work. Possible
>                values: "curl", "wget". The necessary options are added
>                internally.

What about path? What if a system has more than one wget or curl installed? E.g.,

$ type -all curl
curl is /opt/local/bin/curl
curl is /usr/bin/curl
$

>        3.      If LWP is available and working, use that (by far the most
>                efficient method, as it supports persistent downloads).

Makes sense.

>        4.      If curl is available (from the system) and working, use that.

Makes sense.

>        5.      If wget is available (either from the system or TL) and
>                working, use that.

I?d much rather use my wget than the TL-supplied one.

>        TL still provides "wget" binaries for some platforms, so some download
>        method should always be available.
> 
>> I wouldn't mess with it, if it worked! 
> 
> It works, right?

Now it does, thank you! But it didn?t when I had to mess with it.

>> Maybe it would be possible to use system-provided (instead of TL-packaged) wget and/or curl when LWP doesn't work? And allowing the user to choose between system-provided and TL-provided?
> 
> As I said, and explained in the excerpt from the man page, it is curl that 
> will be used.

I guess that?s fine.

Thanks!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180620/beb392a2/attachment.html>

From preining at logic.at  Thu Jun 21 04:06:50 2018
From: preining at logic.at (Norbert Preining)
Date: Thu, 21 Jun 2018 11:06:50 +0900
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <1EFBC576-0F29-46F1-8B94-BE8C6BF2F88B@ll.mit.edu>
References: <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
 <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>
 <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
 <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
 <20180620050206.GA12044@burischnitzel.preining.info>
 <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
 <20180620150554.GA11093@bulldog.preining.info>
 <26F5343E-94C9-4BB1-BB65-B307E6A27A43@ll.mit.edu>
 <20180620235106.GA18704@bulldog.preining.info>
 <1EFBC576-0F29-46F1-8B94-BE8C6BF2F88B@ll.mit.edu>
Message-ID: <20180621020650.GF18704@bulldog.preining.info>

Hi,

> > TL does not provide curl, it needs to be provided by the system. But it
> > is not necessary.
> 
> Not necessary in what sense? If LWP works, then nothing else is needed. If it doesn?t work (for whatever reason), then reverting to what?s installed on the target system seems a reasonable fallback.

If LWP does not work, TL will fallback to wget, which is provided
by TL for those strange systems that don't have it (Mac, Windows, 
some more), but expected to be available on all normal systems.

> So it would work (a) on systems like mine, and (b) with the current web servers that now usually insist on https, and often rewrite the URL switching to https: on their own.

that is what LWP and curl is for.

> But which wget? The one that?s shipped with TL doesn?t cut the mustard.

I expected it to use the TL internal if available, otherwise the system
provided one. But you logs show something different, which is surprising.

> You may be right in this. Still, I see no harm in allowing for wget - some installations may have curl broken. I know it took me some time to get it working, and it wasn?t a high priority because wget was there, doing the job.

You can already, see below.

> >    "TEXLIVE_DOWNLOADER"
> >    "TL_DOWNLOAD_PROGRAM"
> >    ?TL_DOWNLOAD_ARGS"
> 
> Ah. I wouldn?t be able to use these with TeX Live Utility, but they should work with tlmgr?

Why not? Is TLU removing these kind of settings from the environment?

> >        1.      If the environment variable "TEXLIVE_DOWNLOADER" is defined,
> >                use it; abort if the specified program doesn't work. Possible
> >                values: "curl", "wget". The necessary options are added
> >                internally.
> 
> What about path? What if a system has more than one wget or curl installed? E.g.,

The usual way this is determined, the first one in the $PATH.
We don't change the PATH variable (AFAIR). But TLU might be special, 
nothing I can do.


> >        5.      If wget is available (either from the system or TL) and
> >                working, use that.
> 
> I?d much rather use my wget than the TL-supplied one.

For that you have to use TL_DOWNLOAD_*

> Now it does, thank you! But it didn?t when I had to mess with it.

That was before the rewrite which was specifically targetting MacOS
and https mirrors by allowing to fallback to curl instead of wget.

BUT, it should have worked *before* the same way as of now with LWP,
in this respect nothing has changed.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From amaxwell at mac.com  Thu Jun 21 05:10:39 2018
From: amaxwell at mac.com (Adam R. Maxwell)
Date: Wed, 20 Jun 2018 20:10:39 -0700
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <20180621020650.GF18704@bulldog.preining.info>
References: <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
 <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>
 <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
 <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
 <20180620050206.GA12044@burischnitzel.preining.info>
 <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
 <20180620150554.GA11093@bulldog.preining.info>
 <26F5343E-94C9-4BB1-BB65-B307E6A27A43@ll.mit.edu>
 <20180620235106.GA18704@bulldog.preining.info>
 <1EFBC576-0F29-46F1-8B94-BE8C6BF2F88B@ll.mit.edu>
 <20180621020650.GF18704@bulldog.preining.info>
Message-ID: <E8B3266A-1E11-4735-A738-64E9342BA822@mac.com>



> On Jun 20, 2018, at 19:06 , Norbert Preining <preining at logic.at> wrote:
> 
> 
>>>   "TEXLIVE_DOWNLOADER"
>>>   "TL_DOWNLOAD_PROGRAM"
>>>   ?TL_DOWNLOAD_ARGS"
>> 
>> Ah. I wouldn?t be able to use these with TeX Live Utility, but they should work with tlmgr?
> 
> Why not? Is TLU removing these kind of settings from the environment?

Not at present, but setting environment variables for GUI programs on OS X is poorly documented, and I'm not telling anyone how to to do it. The net result is invariably more work for me, when some idiot reads on stackexchange that "setting umask=077 will totes secure ur system" and breaks tlmgr.

You can test the environment vars by running TLU from the command line, where it should inherit the shell environment.

> 
>>>       1.      If the environment variable "TEXLIVE_DOWNLOADER" is defined,
>>>               use it; abort if the specified program doesn't work. Possible
>>>               values: "curl", "wget". The necessary options are added
>>>               internally.
>> 
>> What about path? What if a system has more than one wget or curl installed? E.g.,
> 
> The usual way this is determined, the first one in the $PATH.
> We don't change the PATH variable (AFAIR). But TLU might be special, 
> nothing I can do.

TLU sanitizes the environment, again because user modifications to the PATH and other environment variables usually always break tlmgr and I refuse to waste more days debugging this kind of crap via email. Sorry, I'm not as nice as you or Karl :-).

-- 
adam



From preining at logic.at  Thu Jun 21 05:39:02 2018
From: preining at logic.at (Norbert Preining)
Date: Thu, 21 Jun 2018 12:39:02 +0900
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <E8B3266A-1E11-4735-A738-64E9342BA822@mac.com>
References: <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
 <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
 <20180620050206.GA12044@burischnitzel.preining.info>
 <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
 <20180620150554.GA11093@bulldog.preining.info>
 <26F5343E-94C9-4BB1-BB65-B307E6A27A43@ll.mit.edu>
 <20180620235106.GA18704@bulldog.preining.info>
 <1EFBC576-0F29-46F1-8B94-BE8C6BF2F88B@ll.mit.edu>
 <20180621020650.GF18704@bulldog.preining.info>
 <E8B3266A-1E11-4735-A738-64E9342BA822@mac.com>
Message-ID: <20180621033902.GI18704@bulldog.preining.info>

> Sorry, I'm not as nice as you or Karl :-).

We will learn from you!!!

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From uri at ll.mit.edu  Fri Jun 22 00:31:58 2018
From: uri at ll.mit.edu (Blumenthal, Uri - 0553 - MITLL)
Date: Thu, 21 Jun 2018 22:31:58 +0000
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <20180621033902.GI18704@bulldog.preining.info>
References: <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
 <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
 <20180620050206.GA12044@burischnitzel.preining.info>
 <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
 <20180620150554.GA11093@bulldog.preining.info>
 <26F5343E-94C9-4BB1-BB65-B307E6A27A43@ll.mit.edu>
 <20180620235106.GA18704@bulldog.preining.info>
 <1EFBC576-0F29-46F1-8B94-BE8C6BF2F88B@ll.mit.edu>
 <20180621020650.GF18704@bulldog.preining.info>
 <E8B3266A-1E11-4735-A738-64E9342BA822@mac.com>
 <20180621033902.GI18704@bulldog.preining.info>
Message-ID: <0FA6A340-857C-4C8F-BDC9-AAAE1CA08696@ll.mit.edu>

??? > Sorry, I'm not as nice as you or Karl :-).

??? 

????We will learn from you!!!

??? 

I'd rather you don't.

 

Anyway. Here's a problem. One machine seems to be unable to reach the 'Net. It sets proxy correctly (at least the IP address and the port are right). It sanitized the path, so it uses an old python 2.7.10 - while the rest of the system has been configured to use ?the current python 2.7.15 (with its corresponding libraries, etc), but offhand I can't tell if it matters. It claims to be the latest version available, and it doesn?t update worth ****.

 

 

 

Here's the log:

 

2018-06-21 22:20:01 +0000 Notice +[TLMEnvironment initialize][77662]?? Welcome to TeX Live Utility 1.34, running under Mac OS X Version 10.13.5 (Build 17F77) with 8/8 processors active and 16.0 GB physical memory.

2018-06-21 22:20:01 +0000 Notice +[TLMEnvironment _checkProcessUmask][77662]???? Process umask = 022

2018-06-21 22:20:01 +0000 Notice __TLMCheckWgetrc[77662]??? *** WARNING *** ~/.wgetrc exists. If you encounter problems, ensure that it does not conflict with system proxy settings.

2018-06-21 22:20:01 +0000 Notice __TLMProxySettingsChanged[77662] Trying to find a proxy for http://tug.ctan.org/tex-archive/systems/texlive/tlnet using PAC http://llproxy.llan.ll.mit.edu/proxy.pac?

2018-06-21 22:20:01 +0000 Notice __TLMPacCallback[77662]??? Proxy list = (

??????? {

??????? kCFProxyHostNameKey = "xxxxxxxx";

??????? kCFProxyPortNumberKey = 8080;

??????? kCFProxyTypeKey = kCFProxyTypeHTTP;

??? }

)

2018-06-21 22:20:01 +0000 Notice __TLMGetUserAndPassForProxy[77662]?? No username/password for proxy xxxxxxxx:8080

2018-06-21 22:20:01 +0000 Notice __TLMSetProxyEnvironment[77662] setting http_proxy = http://xxxxxxxx:8080

2018-06-21 22:20:01 +0000 Notice +[TLMEnvironment updateEnvironment][77662]???? Setting up a new environment for /usr/local/texlive/2018?

2018-06-21 22:20:01 +0000 Notice +[TLMEnvironment updatePathEnvironment][77662]???? Using PATH = "(

??? "/usr/bin",

??? "/bin",

??? "/usr/sbin",

??? "/sbin",

??? "/Library/TeX/texbin"

)"

2018-06-21 22:20:01 +0000 Notice +[TLMEnvironment _checkSystemPythonMajorVersion:minorVersion:][77662]? Using python at '/usr/bin/python'

2018-06-21 22:20:01 +0000 Notice +[TLMEnvironment _checkSystemPythonMajorVersion:minorVersion:][77662]? Python version is 2.7.10 (default, Oct? 6 2017, 22:29:07) 

[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)]

2018-06-21 22:20:01 +0000 Notice +[TLMEnvironment updateEnvironment][77662]???? Nothing to update for /usr/local/texlive/2018

2018-06-21 22:20:01 +0000 Notice -[TLMDatabase _downloadDatabaseHead][77662]???? Checking the repository version.? Please be patient.

2018-06-21 22:20:01 +0000 Notice -[TLMDatabase _downloadDatabaseHead][77662]???? Downloading at least 2048 bytes of tlpdb for a version check?

2018-06-21 22:20:01 +0000 Notice -[TLMDatabase _downloadDatabaseHead][77662]???? Downloaded 65536 bytes of tlpdb for version check

2018-06-21 22:20:01 +0000 Notice -[TLMEnvironment initWithInstallDirectory:][77662]???? Looks like you're using TeX Live 2018

2018-06-21 22:20:01 +0000 Notice +[TLMEnvironment _logEnvironment][77662]???? Current environment from /usr/bin/env:

__CF_USER_TEXT_ENCODING=0x61A75628:0x0:0x0

Apple_PubSub_Socket_Render=/private/tmp/com.apple.launchd.8oWqmBp7yc/Render

CC_FOR_BUILD=no_compiler_found

DISPLAY=/private/tmp/com.apple.launchd.lxepum9Co0/org.macosforge.xquartz:0

HOME=/Users/ur20980

http_proxy=http://xxxxxxxx:8080

LOGNAME=ur20980

PATH=/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin

SERVICEHUBTRACELEVEL=all

SHELL=/bin/bash

SSH_AUTH_SOCK=/private/tmp/com.apple.launchd.RzBEKVoubA/Listeners

TMPDIR=/var/folders/c6/lnc_0m093ys8w16md_fm1mnxhtfnj8/T/

USER=ur20980

XPC_FLAGS=0x0

XPC_SERVICE_NAME=0

2018-06-21 22:20:01 +0000 Notice __TLMPacCallback[77662]??? Only setting http_proxy from PAC; ftp mirrors may not work.

2018-06-21 22:20:01 +0000 Notice -[TLMEnvironment _checkForRootPrivileges][77662] Root permission required for installation at /usr/local/texlive/2018

2018-06-21 22:20:01 +0000 Notice +[TLMEnvironment updateEnvironment][77662]???? Nothing to update for /usr/local/texlive/2018

2018-06-21 22:20:01 +0000 Notice -[TLMLogWindowController awakeFromNib][77662]???? Loaded log window controller

2018-06-21 22:20:01 +0000 Notice -[TLMMainWindowController showWindow:][77662]???? User has chosen to permanently ignore the GPG install alert

2018-06-21 22:20:01 +0000 Notice -[TLMDatabase _downloadDatabaseHead][77662]???? Checking the repository version.? Please be patient.

2018-06-21 22:20:01 +0000 Notice -[TLMDatabase _downloadDatabaseHead][77662]???? Downloading at least 2048 bytes of tlpdb for a version check?

2018-06-21 22:20:31 +0000 Notice -[TLMDatabase connection:didFailWithError:][77662]? Failed to download tlpdb for version check http://tug.ctan.org/tex-archive/systems/texlive/tlnet : Error Domain=NSURLErrorDomain Code=-1001 "The request timed out." UserInfo={NSUnderlyingError=0x604000247050 {Error Domain=kCFErrorDomainCFNetwork Code=-1001 "The request timed out." UserInfo={NSErrorFailingURLStringKey=http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb, NSErrorFailingURLKey=http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb, _kCFStreamErrorCodeKey=-2102, _kCFStreamErrorDomainKey=4, NSLocalizedDescription=The request timed out.}}, NSErrorFailingURLStringKey=http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb, NSErrorFailingURLKey=http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb, _kCFStreamErrorDomainKey=4, _kCFStreamErrorCodeKey=-2102, NSLocalizedDescription=The request timed out.}

2018-06-21 22:20:31 +0000 Notice -[TLMDatabase _downloadDatabaseHead][77662]???? http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb took more than 30 seconds to respond.? Cancelling request.

2018-06-21 22:20:31 +0000 Notice -[TLMDatabase _downloadDatabaseHead][77662]???? Downloaded 0 bytes of tlpdb for version check

2018-06-21 22:20:31 +0000 Notice -[TLMDatabase packageNamed:][77662]?? *** WARNING *** Requested package 00texlive.config from database without a full download

2018-06-21 22:20:31 +0000 Notice -[TLMDatabase texliveYear][77662]??? Unable to determine year from 00texlive.config

2018-06-21 22:20:31 +0000 Notice -[TLMDatabase texliveYear][77662]??? Failed to use this repository 0.1 seconds ago.? Using that result.

2018-06-21 22:20:31 +0000 Notice -[TLMMainWindowController _refreshUpdatedPackageListFromLocation:][77662]? Not updating package list, since the repository database version could not be determined

2018-06-21 22:20:34 +0000 Notice -[TLMMainWindowController _paperSizeCheckTerminated:][77662]??? System paper size = letter, pdftex paper size = letter

2018-06-21 22:20:41 +0000 Notice -[TLMFaviconCache _cancelFaviconLoad:][77662]???? Stopping favicon download from http://tug.ctan.org/tex-archive/systems/texlive/tlnet due to timeout

 

 

Also, this is of concern, and I don?t know why on this machine texlive seems to be blown:

 

$ fmtutil --sys --listcfg

fmtutil: fmtutil is using the following fmtutil.cnf files (in precedence order):

fmtutil: fmtutil is using the following fmtutil.cnf file for writing changes:

fmtutil:   /usr/local/texlive/2018/texmf-config/web2c/fmtutil.cnf

List of all formats:

fmtutil [INFO]: exiting with status 1

$ 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180621/efaa7a69/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 39628 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180621/efaa7a69/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 5211 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180621/efaa7a69/attachment-0001.p7s>

From reinhard.kotucha at web.de  Fri Jun 22 01:04:51 2018
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 22 Jun 2018 01:04:51 +0200
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <20180620235106.GA18704@bulldog.preining.info>
References: <42198751-F614-4902-97C5-AD96968C0002@ll.mit.edu>
 <CAKTOP46ucktQ1u_Yd8Rdp1kdpWCSWVT9iCpJK5hG+Bt2ew7cyA@mail.gmail.com>
 <0CBF2FCE-95B1-4B98-B299-753D4E214F9C@ll.mit.edu>
 <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
 <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
 <20180620050206.GA12044@burischnitzel.preining.info>
 <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
 <20180620150554.GA11093@bulldog.preining.info>
 <26F5343E-94C9-4BB1-BB65-B307E6A27A43@ll.mit.edu>
 <20180620235106.GA18704@bulldog.preining.info>
Message-ID: <23340.12051.440215.288329@gargle.gargle.HOWL>

On 2018-06-21 at 08:51:06 +0900, Norbert Preining wrote:

 >> Can you please make an option for the user to force using the
 >> system-provided wget? Pretty-please?
 > 
 > What for? On Mac it will probably never hit wget anymore. With the
 > latest update you included, the logic is now
 >   - by default try LWP
 >   - if that fails and curl is available, try curl
 >   - if that fails, use wget
 > Now since curl is always available on MacOS, I guess that wget will
 > never be used on.

I thought that the wget binaries shipped with TeX Live are only for
systems which don't provide wget by themselves (Windows, OS X, BSD).   

Given that almost(?) all systems provide either curl and wget it's
probably best to rely on them and revert to the wget binaries shipped
with TeX Live only iff neither curl nor wget is in PATH:

  - by default try LWP
  - if that fails and curl is available, try curl
  - if that fails and wget is available, try wget
  - if that fails, use wget provided by TeX Live
  
Because most Unix/Linux package managers depend on either curl or wget
I suppose that these programs are properly configured, support https,
and that the wget binaries shipped with TL are then used in very rare
cases only, if at all.

On all systems except Windows we expect a working Perl installation.
Can't we expect similarly that either a working curl or wget is
present and use the TL binaries only as a last resort (if neither
curl nor wget is in PATH)?

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From preining at logic.at  Fri Jun 22 01:58:42 2018
From: preining at logic.at (Norbert Preining)
Date: Fri, 22 Jun 2018 08:58:42 +0900
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <0FA6A340-857C-4C8F-BDC9-AAAE1CA08696@ll.mit.edu>
References: <20180620050206.GA12044@burischnitzel.preining.info>
 <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
 <20180620150554.GA11093@bulldog.preining.info>
 <26F5343E-94C9-4BB1-BB65-B307E6A27A43@ll.mit.edu>
 <20180620235106.GA18704@bulldog.preining.info>
 <1EFBC576-0F29-46F1-8B94-BE8C6BF2F88B@ll.mit.edu>
 <20180621020650.GF18704@bulldog.preining.info>
 <E8B3266A-1E11-4735-A738-64E9342BA822@mac.com>
 <20180621033902.GI18704@bulldog.preining.info>
 <0FA6A340-857C-4C8F-BDC9-AAAE1CA08696@ll.mit.edu>
Message-ID: <20180621235842.GA24574@bulldog.preining.info>

Hi,

> 2018-06-21 22:20:01 +0000 Notice -[TLMDatabase _downloadDatabaseHead][77662]???? Checking the repository version.? Please be patient.
> 
> 2018-06-21 22:20:01 +0000 Notice -[TLMDatabase _downloadDatabaseHead][77662]???? Downloading at least 2048 bytes of tlpdb for a version check?
> 
> 2018-06-21 22:20:01 +0000 Notice -[TLMDatabase _downloadDatabaseHead][77662]???? Downloaded 65536 bytes of tlpdb for version check

It seems it *did* download something ...

> 
> 2018-06-21 22:20:01 +0000 Notice -[TLMDatabase _downloadDatabaseHead][77662]???? Downloading at least 2048 bytes of tlpdb for a version check?
> 
> 2018-06-21 22:20:31 +0000 Notice -[TLMDatabase connection:didFailWithError:][77662]? Failed to download tlpdb for version check http://tug.ctan.org/tex-archive/systems/texlive/tlnet : Error Domain=NSURLErrorDomain Code=-1001 "The request timed out." UserInfo={NSUnderlyingError=0x604000247050 {Error Domain=kCFErrorDomainCFNetwork Code=-1001 "The request timed out." UserInfo={NSErrorFailingURLStringKey=http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb, NSErrorFailingURLKey=http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb, _kCFStreamErrorCodeKey=-2102, _kCFStreamErrorDomainKey=4, NSLocalizedDescription=The request timed out.}}, NSErrorFailingURLStringKey=http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb, NSErrorFailingURLKey=http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb, _kCFStreamErrorDomainKey=4, _kCFStreamErrorCodeKey=-2102, NSLocalizedDescription=The request timed out.}

And then it failed, request timed out.

But I don't actually see tlmgr doing anything here. It seems to me
that TLU and not tlmgr is doing this.


> $ fmtutil --sys --listcfg
> fmtutil: fmtutil is using the following fmtutil.cnf files (in precedence order):
> 

THat is bad. What does
  kpsewhich -all fmtutil.cnf
say? In my case there is
  /home/norbert/tl/2018/texmf-dist/web2c/fmtutil.cnf

So where is your
  /usr/local/texlive/2018/texmf-dist/web2c/fmtutil.cnf
If it is not there, please run
  tlmgr generate _fmtutil
and then try the kpsewhich call again, it should be there.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From amaxwell at mac.com  Fri Jun 22 02:20:26 2018
From: amaxwell at mac.com (Adam R. Maxwell)
Date: Thu, 21 Jun 2018 17:20:26 -0700
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <0FA6A340-857C-4C8F-BDC9-AAAE1CA08696@ll.mit.edu>
References: <CAKTOP468bDZMvkuvp2XXav=WJ=ZznH5rCxXAvGNf=h4741suhg@mail.gmail.com>
 <C8694B39-323E-49E7-A602-E414E7388E4E@ll.mit.edu>
 <20180620050206.GA12044@burischnitzel.preining.info>
 <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
 <20180620150554.GA11093@bulldog.preining.info>
 <26F5343E-94C9-4BB1-BB65-B307E6A27A43@ll.mit.edu>
 <20180620235106.GA18704@bulldog.preining.info>
 <1EFBC576-0F29-46F1-8B94-BE8C6BF2F88B@ll.mit.edu>
 <20180621020650.GF18704@bulldog.preining.info>
 <E8B3266A-1E11-4735-A738-64E9342BA822@mac.com>
 <20180621033902.GI18704@bulldog.preining.info>
 <0FA6A340-857C-4C8F-BDC9-AAAE1CA08696@ll.mit.edu>
Message-ID: <685A9F07-A56B-4C5B-9F66-C447E65C94BD@mac.com>



> On Jun 21, 2018, at 15:31, Blumenthal, Uri - 0553 - MITLL <uri at ll.mit.edu> wrote:
> 
> [TLMDatabase connection:didFailWithError:][77662]  Failed to download tlpdb for version check http://tug.ctan.org/tex-archive/systems/texlive/tlnet : Error Domain=NSURLErrorDomain Code=-1001 "The request timed out."

See if you can reach that URL from Safari on the machine where TLU fails. 

? adam

From uri at ll.mit.edu  Fri Jun 22 03:01:38 2018
From: uri at ll.mit.edu (Blumenthal, Uri - 0553 - MITLL)
Date: Thu, 21 Jun 2018 21:01:38 -0400
Subject: [tex-live] TeXLive-2018 fails to update across firewall
In-Reply-To: <20180621235842.GA24574@bulldog.preining.info>
References: <20180620050206.GA12044@burischnitzel.preining.info>
 <B51C88A7-8943-4420-8EB1-10E012BFAAAC@ll.mit.edu>
 <20180620150554.GA11093@bulldog.preining.info>
 <26F5343E-94C9-4BB1-BB65-B307E6A27A43@ll.mit.edu>
 <20180620235106.GA18704@bulldog.preining.info>
 <1EFBC576-0F29-46F1-8B94-BE8C6BF2F88B@ll.mit.edu>
 <20180621020650.GF18704@bulldog.preining.info>
 <E8B3266A-1E11-4735-A738-64E9342BA822@mac.com>
 <20180621033902.GI18704@bulldog.preining.info>
 <0FA6A340-857C-4C8F-BDC9-AAAE1CA08696@ll.mit.edu>
 <20180621235842.GA24574@bulldog.preining.info>
Message-ID: <4678FAE3-743A-4D8D-925B-6C83CFE102FE@ll.mit.edu>

$ kpsewhich -all fmtutil.cnf
$ ll /usr/local/texlive/2018/texmf-dist/web2c/fmtutil.cnf 
-rw-r--r--  1 root  wheel  4357 Apr 16 23:08 /usr/local/texlive/2018/texmf-dist/web2c/fmtutil.cnf
$ ll ~/tl/
ls: /Users/ur20980/tl/: No such file or directory
$ tlmgr generate _fmtutil
Cannot open /usr/local/texlive/2018/texmf-dist/web2c/fmtutil.cnf for writing: Permission denied at /usr/local/texlive/2018/tlpkg/TeXLive/TLUtils.pm line 2894.
$ sudo -E tlmgr generate _fmtutil
Enter PIN for 'Certificate For PIV Authentication (Uri the Great)': 
To make the newly-generated fmtutil.cnf take effect, run fmtutil-sys --all.
$ sudo -E fmtutil-sys --all
fmtutil [WARNING]: resetting $HOME value (was /Users/ur20980) to root's actual home (/var/root).
fmtutil: fmtutil is using the following fmtutil.cnf files (in precedence order):
fmtutil: fmtutil is using the following fmtutil.cnf file for writing changes:
fmtutil:   /usr/local/texlive/2018/texmf-config/web2c/fmtutil.cnf
fmtutil [INFO]: writing formats under /usr/local/texlive/2018/texmf-var/web2c
Use of uninitialized value $whatarg in concatenation (.) or string at /Library/TeX/texbin/fmtutil line 443.
fmtutil [INFO]: did not find entry for all=, skipped
fmtutil [INFO]: Total formats: 0
fmtutil [INFO]: exiting with status 0
$ kpsewhich -all fmtutil.cnf
$
?
Regards,
Uri

> On Jun 21, 2018, at 19:58, Norbert Preining <preining at logic.at> wrote:
> 
> Hi,
> 
>> 2018-06-21 22:20:01 +0000 Notice -[TLMDatabase _downloadDatabaseHead][77662]     Checking the repository version.  Please be patient.
>> 
>> 2018-06-21 22:20:01 +0000 Notice -[TLMDatabase _downloadDatabaseHead][77662]     Downloading at least 2048 bytes of tlpdb for a version check?
>> 
>> 2018-06-21 22:20:01 +0000 Notice -[TLMDatabase _downloadDatabaseHead][77662]     Downloaded 65536 bytes of tlpdb for version check
> 
> It seems it *did* download something ...
> 
>> 
>> 2018-06-21 22:20:01 +0000 Notice -[TLMDatabase _downloadDatabaseHead][77662]     Downloading at least 2048 bytes of tlpdb for a version check?
>> 
>> 2018-06-21 22:20:31 +0000 Notice -[TLMDatabase connection:didFailWithError:][77662]  Failed to download tlpdb for version check http://tug.ctan.org/tex-archive/systems/texlive/tlnet : Error Domain=NSURLErrorDomain Code=-1001 "The request timed out." UserInfo={NSUnderlyingError=0x604000247050 {Error Domain=kCFErrorDomainCFNetwork Code=-1001 "The request timed out." UserInfo={NSErrorFailingURLStringKey=http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb, NSErrorFailingURLKey=http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb, _kCFStreamErrorCodeKey=-2102, _kCFStreamErrorDomainKey=4, NSLocalizedDescription=The request timed out.}}, NSErrorFailingURLStringKey=http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb, NSErrorFailingURLKey=http://tug.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb, _kCFStreamErrorDomainKey=4, _kCFStreamErrorCodeKey=-2102, NSLocalizedDescription=The request timed out.}
> 
> And then it failed, request timed out.
> 
> But I don't actually see tlmgr doing anything here. It seems to me
> that TLU and not tlmgr is doing this.
> 
> 
>> $ fmtutil --sys --listcfg
>> fmtutil: fmtutil is using the following fmtutil.cnf files (in precedence order):
>> 
> 
> THat is bad. What does
>  kpsewhich -all fmtutil.cnf
> say? In my case there is
>  /home/norbert/tl/2018/texmf-dist/web2c/fmtutil.cnf
> 
> So where is your
>  /usr/local/texlive/2018/texmf-dist/web2c/fmtutil.cnf
> If it is not there, please run
>  tlmgr generate _fmtutil
> and then try the kpsewhich call again, it should be there.
> 
> Best
> 
> Norbert
> 
> --
> PREINING Norbert                               http://www.preining.info
> Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180621/69d6360b/attachment-0001.html>

From uri at mit.edu  Fri Jun 22 02:52:13 2018
From: uri at mit.edu (Uri Blumenthal)
Date: Fri, 22 Jun 2018 00:52:13 +0000
Subject: [tex-live] TLU update fails (non-corporate MacOS machine)
Message-ID: <9FF4A659-724F-4728-A65C-98C60135618B@mit.edu>

TLU says ?Update failed?.

Here?s the log:

2018-06-22 00:37:32 +0000 Notice -[TLMAppController handleGetURLEvent:withReplyEvent:][17403]	Requesting listing from location http://mirror.hmc.edu/ctan/systems/texlive/tlnet
2018-06-22 00:37:32 +0000 Notice -[TLMMainWindowController 

showWindow:][17403]	User has chosen to permanently ignore the GPG 
install alert
 my question - how did TLU arrive at this conclusion, since there is no visible config option to do anything with GPG?

2018-06-22 00:37:32 +0000 Notice +[TLMEnvironment initialize][17403]	Welcome to TeX Live Utility 1.34, running under Mac OS X Version 10.13.5 (Build 17F77) with 4/4 processors active and 8.0 GB physical memory.
2018-06-22 00:37:32 +0000 Notice +[TLMEnvironment _checkProcessUmask][17403]	Process umask = 022
2018-06-22 00:37:32 +0000 Notice __TLMCheckWgetrc[17403]	*** WARNING *** ~/.wgetrc exists. If you encounter problems, ensure that it does not conflict with system proxy settings.
2018-06-22 00:37:32 +0000 Notice +[TLMEnvironment updateEnvironment][17403]	Setting up a new environment for /usr/local/texlive/2018?
2018-06-22 00:37:32 +0000 Notice +[TLMEnvironment updatePathEnvironment][17403]	Using PATH = "(
    "/usr/bin",
    "/bin",
    "/usr/sbin",
    "/sbin",
    "/usr/local/texlive/2018/bin/x86_64-darwin"
)"
2018-06-22 00:37:33 +0000 Notice +[TLMEnvironment _checkSystemPythonMajorVersion:minorVersion:][17403]	Using python at '/usr/bin/python'
2018-06-22 00:37:33 +0000 Notice +[TLMEnvironment _checkSystemPythonMajorVersion:minorVersion:][17403]	Python version is 2.7.10 (default, Oct  6 2017, 22:29:07) 
[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)]
2018-06-22 00:37:33 +0000 Notice +[TLMEnvironment updateEnvironment][17403]	Nothing to update for /usr/local/texlive/2018
2018-06-22 00:37:33 +0000 Notice -[TLMDatabase _downloadDatabaseHead][17403]	Checking the repository version.  Please be patient.
2018-06-22 00:37:33 +0000 Notice -[TLMDatabase _downloadDatabaseHead][17403]	Downloading at least 2048 bytes of tlpdb for a version check?
2018-06-22 00:37:33 +0000 Notice -[TLMDatabase _downloadDatabaseHead][17403]	Downloaded 65536 bytes of tlpdb for version check
2018-06-22 00:37:33 +0000 Notice -[TLMEnvironment initWithInstallDirectory:][17403]	Looks like you're using TeX Live 2018
2018-06-22 00:37:33 +0000 Notice -[TLMEnvironment _checkForRootPrivileges][17403]	Root permission required for installation at /usr/local/texlive/2018
2018-06-22 00:37:33 +0000 Notice +[TLMEnvironment _logEnvironment][17403]	Current environment from /usr/bin/env:
__CF_USER_TEXT_ENCODING=0x1F5:0x0:0x0
Apple_PubSub_Socket_Render=/private/tmp/com.apple.launchd.U2N2zqU485/Render
CC_FOR_BUILD=no_compiler_found
DBUS_LAUNCHD_SESSION_BUS_SOCKET=/private/tmp/com.apple.launchd.ZhWOY1xbpo/unix_domain_listener
DISPLAY=/private/tmp/com.apple.launchd.lATCoix9d8/org.macosforge.xquartz:0
HOME=/Users/uri
LOGNAME=uri
PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/texlive/2018/bin/x86_64-darwin
SHELL=/bin/bash
SSH_AUTH_SOCK=/private/tmp/com.apple.launchd.bQZSpK4R9S/Listeners
TMPDIR=/var/folders/pd/mxn5kp_55jg23x7jjd10gtwm0000gn/T/
USER=uri
VERSIONER_PYTHON_PREFER_32_BIT=no
VERSIONER_PYTHON_VERSION=2.7
XPC_FLAGS=0x0
XPC_SERVICE_NAME=0
2018-06-22 00:37:33 +0000 Notice -[TLMDatabase _downloadDatabaseHead][17403]	Checking the repository version.  Please be patient.
2018-06-22 00:37:33 +0000 Notice -[TLMDatabase _downloadDatabaseHead][17403]	Downloading at least 2048 bytes of tlpdb for a version check?
2018-06-22 00:37:34 +0000 Notice -[TLMDatabase connection:willSendRequest:redirectResponse:][17403]	redirected request to http://mirror.hmc.edu/ctan/systems/texlive/tlnet/tlpkg/texlive.tlpdb
2018-06-22 00:37:34 +0000 Notice -[TLMDatabase _downloadDatabaseHead][17403]	Downloaded 4029 bytes of tlpdb for version check
2018-06-22 00:37:34 +0000 Notice -[TLMEnvironment _getValidServerURL:repositoryYear:fromURL:][17403]	Repository version appears to be 2018; a young TeX Live
2018-06-22 00:37:34 +0000 Notice -[TLMDatabase _downloadDatabaseHead][17403]	Checking the repository version.  Please be patient.
2018-06-22 00:37:34 +0000 Notice -[TLMDatabase _downloadDatabaseHead][17403]	Downloading at least 2048 bytes of tlpdb for a version check?
2018-06-22 00:37:34 +0000 Notice -[TLMDatabase _downloadDatabaseHead][17403]	Downloaded 4029 bytes of tlpdb for version check
2018-06-22 00:37:35 +0000 Notice -[TLMMainWindowController _refreshUpdatedPackageListFromLocation:][17403]	Refreshing list of updated packages?
2018-06-22 00:37:35 +0000 Notice +[TLMEnvironment updateEnvironment][17403]	Nothing to update for /usr/local/texlive/2018
2018-06-22 00:37:49 +0000 Notice -[TLMOperation main][17403]	Successfully executed `/usr/local/texlive/2018/bin/x86_64-darwin/tlmgr --machine-readable --repository http://mirror.hmc.edu/ctan/systems/texlive/tlnet update --list --all`
2018-06-22 00:38:32 +0000 Notice -[TLMMainWindowController _isCorrectDatabaseVersionAtURL:][17403]	Checking database version in case preferences have been changed?
2018-06-22 00:38:32 +0000 Notice -[TLMMainWindowController _updateAllPackagesFromRepository:][17403]	Beginning update of all packages from http://mirror.hmc.edu/ctan/systems/texlive/tlnet
2018-06-22 00:38:32 +0000 Notice -[TLMAuthorizedOperation main][17403]	Checking code signature before running tlu_ipctask as root?
2018-06-22 00:38:32 +0000 Notice /usr/bin/codesign[17403]	/Applications/TeX/TeX Live Utility.app/Contents/MacOS/tlu_ipctask: valid on disk
/Applications/TeX/TeX Live Utility.app/Contents/MacOS/tlu_ipctask: satisfies its Designated Requirement
2018-06-22 00:38:32 +0000 Notice -[TLMAuthorizedOperation main][17403]	Signature was valid, okay to run tlu_ipctask
2018-06-22 00:38:39 +0000 Notice -[TLMAuthorizedOperation main][17403]	Invoking privileged task via AuthorizationExecuteWithPrivileges
2018-06-22 00:38:39 +0000 Notice tlu_ipctask[23004]	dropped privileges to user nobody
2018-06-22 00:38:40 +0000 Notice -[TLMAuthorizedOperation setWrapperPID:][17403]	tlu_ipctask checking in:  tlu_ipctask pid = 23004
2018-06-22 00:38:40 +0000 Notice -[TLMAuthorizedOperation setUnderlyingPID:][17403]	tlu_ipctask checking in: pid = 23005 (/usr/local/texlive/2018/bin/x86_64-darwin/tlmgr --repository http://mirror.hmc.edu/ctan/systems/texlive/tlnet --machine-readable --persistent-downloads update --all)
2018-06-22 00:38:40 +0000 Notice tlu_ipctask[23004]	tlu_ipctask: child HOME = '/var/root'
2018-06-22 00:38:40 +0000 Notice tlu_ipctask[23004]	tlu_ipctask: current HOME = '/var/empty'
2018-06-22 00:39:09 +0000 Notice tlu_ipctask[23004]	location-url	http://mirror.hmc.edu/ctan/systems/texlive/tlnet
2018-06-22 00:39:09 +0000 Notice tlu_ipctask[23004]	Beginning download of 21889.7 kbytes
2018-06-22 00:39:09 +0000 Notice tlu_ipctask[23004]	Beginning download and installation of packages
2018-06-22 00:39:14 +0000 Notice tlu_ipctask[23004]	Updating etoc
2018-06-22 00:39:25 +0000 Notice tlu_ipctask[23004]	Updating fontawesome5
2018-06-22 00:39:31 +0000 Notice tlu_ipctask[23004]	Updating mcf2graph
2018-06-22 00:39:57 +0000 Notice tlu_ipctask[23004]	Updating tex-gyre
2018-06-22 00:40:17 +0000 Notice tlu_ipctask[23004]	Updating texlive-docindex
2018-06-22 00:40:25 +0000 Notice tlu_ipctask[23004]	Updating texlive-scripts
2018-06-22 00:40:34 +0000 Notice tlu_ipctask[23004]	Updating uantwerpendocs
2018-06-22 00:40:39 +0000 Notice tlu_ipctask[23004]	Adding gatherenum
2018-06-22 00:40:43 +0000 Notice tlu_ipctask[23004]	Adding kanaparser
2018-06-22 00:41:02 +0000 Notice tlu_ipctask[23004]	Updating collection-latexextra
2018-06-22 00:41:09 +0000 Notice tlu_ipctask[23004]	Updating collection-luatex
2018-06-22 00:41:11 +0000 Warning tlu_ipctask[23004]	running mktexlsr ...
2018-06-22 00:41:11 +0000 Notice tlu_ipctask[23004]	Installation complete; reconfiguring TeX Live
2018-06-22 00:41:23 +0000 Warning tlu_ipctask[23004]	done running mktexlsr.
2018-06-22 00:41:23 +0000 Warning tlu_ipctask[23004]	running mtxrun --generate ...
2018-06-22 00:42:08 +0000 Warning tlu_ipctask[23004]	done running mtxrun --generate.
2018-06-22 00:42:12 +0000 Warning tlu_ipctask[23004]	running updmap-sys ...
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	tlmgr: updmap-sys failed (status 1), output:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap will read the following updmap.cfg files (in precedence order):
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	/usr/local/texlive/texmf-local/web2c/updmap.cfg
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	/usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap may write changes to the following updmap.cfg file:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	/usr/local/texlive/2018/texmf-config/web2c/updmap.cfg
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	dvips output dir: "/usr/local/texlive/2018/texmf-var/fonts/map/dvips/updmap"
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	pdftex output dir: "/usr/local/texlive/2018/texmf-var/fonts/map/pdftex/updmap"
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	dvipdfmx output dir: "/usr/local/texlive/2018/texmf-var/fonts/map/dvipdfmx/updmap"
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ckmr-v is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-ko-baekmuk.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ccmr-v is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-sc-arphic.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ukmr-v is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-ko-baekmuk.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ckgr-v is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-ko-baekmuk.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ukmr-h is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-ko-baekmuk.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ucgr-v is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-sc-arphic.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ucmr-h is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-sc-arphic.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ctmr-h is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-tc-arphic.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ucmr-v is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-sc-arphic.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ctmr-v is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-tc-arphic.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ckgr-h is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-ko-baekmuk.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ccmr-h is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-sc-arphic.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-utmr-h is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-tc-arphic.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ukgr-h is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-ko-baekmuk.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ckmr-h is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-ko-baekmuk.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ccgr-v is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-sc-arphic.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ccgr-h is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-sc-arphic.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ctgr-h is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-tc-arphic.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-utmr-v is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-tc-arphic.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ucgr-h is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-sc-arphic.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-utgr-v is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-tc-arphic.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ukgr-v is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-ko-baekmuk.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-utgr-h is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-tc-arphic.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ctgr-v is defined multiple times:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-tc-arphic.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [ERROR]: The following map file(s) couldn't be found:
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [ERROR]: 	morisawa.map (in /usr/local/texlive/texmf-local/web2c/updmap.cfg)
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [ERROR]: Did you run mktexlsr?
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	You can disable non-existent map entries using the option
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	--syncwithtrees.
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	tlmgr: package log updated: /usr/local/texlive/2018/texmf-var/web2c/tlmgr.log
2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	tlmgr: An error has occurred. See above messages. Exiting.
2018-06-22 00:42:39 +0000 Notice -[TLMAuthorizedOperation _runUntilChildExit][17403]	kqueue noted that pid 23005 exited (/usr/local/texlive/2018/bin/x86_64-darwin/tlmgr --repository http://mirror.hmc.edu/ctan/systems/texlive/tlnet --machine-readable --persistent-downloads update --all)
2018-06-22 00:42:39 +0000 Notice tlu_ipctask[23004]	child process pid = 23005 exited
2018-06-22 00:42:40 +0000 Error tlu_ipctask[23004]	Value of errno is Operation not permitted
2018-06-22 00:42:40 +0000 Error tlu_ipctask[23004]	*** ERROR *** exit status of pid = 23005 was 2
2018-06-22 00:42:40 +0000 Notice -[TLMAuthorizedOperation _runUntilChildExit][17403]	waitpid returned 23004, WIFEXITED(512) = 1, errno = 9 (No error)
2018-06-22 00:42:40 +0000 Notice -[TLMAuthorizedOperation _runUntilChildExit][17403]	kqueue noted that tlu_ipctask (pid = 23004) exited with status 2
2018-06-22 00:42:47 +0000 Notice -[TLMLogWindowController awakeFromNib][17403]	Loaded log window controller
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180622/432423f6/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1595 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180622/432423f6/attachment-0001.p7s>

From amaxwell at mac.com  Fri Jun 22 03:44:03 2018
From: amaxwell at mac.com (Adam R. Maxwell)
Date: Thu, 21 Jun 2018 18:44:03 -0700
Subject: [tex-live] TLU update fails (non-corporate MacOS machine)
In-Reply-To: <9FF4A659-724F-4728-A65C-98C60135618B@mit.edu>
References: <9FF4A659-724F-4728-A65C-98C60135618B@mit.edu>
Message-ID: <C470F4B0-EC72-4C16-A2E3-496721455FEE@mac.com>


> On Jun 21, 2018, at 17:52 , Uri Blumenthal <uri at mit.edu> wrote:
> 
> 2018-06-22 00:37:32 +0000 Notice -[TLMMainWindowController 
> 
> showWindow:][17403]	User has chosen to permanently ignore the GPG 
> install alert
>  my question - how did TLU arrive at this conclusion, since there is no visible config option to do anything with GPG?

At some point, you were prompted via an alert to install GPG. It has a checkbox option for users who are afraid to install it and don't want to be nagged each time TLU launches. You apparently checked the box to never see that warning again (though it will be reset for TL 2019).

You need to reset it in Terminal:

defaults delete com.googlecode.mactlmgr.tlu TLMDisableGPGAlertPreferenceKey

The alert will read "This version of TeX Live allows you to check the digital signature of downloaded packages by installing GnuPG. For better security, you should enable this feature."

Sorry I can't help with updmap stuff, as I've never understood the proper incantations for the different trees. Norbert can probably decipher it easily:

> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [ERROR]: The following map file(s) couldn't be found:
> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [ERROR]: 	morisawa.map (in /usr/local/texlive/texmf-local/web2c/updmap.cfg)
> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [ERROR]: Did you run mktexlsr?
> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	
> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	You can disable non-existent map entries using the option
> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	--syncwithtrees.

-- adam





From preining at logic.at  Fri Jun 22 04:06:32 2018
From: preining at logic.at (Norbert Preining)
Date: Fri, 22 Jun 2018 11:06:32 +0900
Subject: [tex-live] TLU update fails (non-corporate MacOS machine)
In-Reply-To: <4678FAE3-743A-4D8D-925B-6C83CFE102FE@ll.mit.edu>
 <9FF4A659-724F-4728-A65C-98C60135618B@mit.edu>
Message-ID: <20180622020632.GA1605@bulldog.preining.info>

Hi Uri,

first of all, one thing, something has messed up your system completely,
and I can guarantee you, it was not *us*.

> showWindow:][17403]	User has chosen to permanently ignore the GPG 

See Max answer.

> 2018-06-22 00:41:11 +0000 Warning tlu_ipctask[23004]	running mktexlsr ...
> 2018-06-22 00:41:23 +0000 Warning tlu_ipctask[23004]	done running mktexlsr.

That did run, but ..

> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ckmr-h is defined multiple times:
> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-ko-baekmuk.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)

You messed around with updmap.cfg and added entries to 
  TEXMFLOCAL/web2c/updmap.cfg
That is *never* done by anyone of us, but must have been done by you or
your system admin.

> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [ERROR]: The following map file(s) couldn't be found:
> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [ERROR]: 	morisawa.map (in /usr/local/texlive/texmf-local/web2c/updmap.cfg)

Again, this is your fault. If you put a map into their that is not
available, it will break.

The file
  TEXMFLOCAL/web2c/updmap.cfg
should only contain references to font maps that are installed WITHIN
TEXMFLOCAL!

On Thu, 21 Jun 2018, Blumenthal, Uri - 0553 - MITLL wrote:
> $ kpsewhich -all fmtutil.cnf
> $ ll /usr/local/texlive/2018/texmf-dist/web2c/fmtutil.cnf 
> -rw-r--r--  1 root  wheel  4357 Apr 16 23:08 /usr/local/texlive/2018/texmf-dist/web2c/fmtutil.cnf

Then your ls-R is hosed, although mktexlsr was run.

What does
  ls -l /usr/local/texlive/2018/texmf-dist/ls-R
say? Does it contain an entry for fmtutil.cnf

> $ sudo -E fmtutil-sys --all
> fmtutil [WARNING]: resetting $HOME value (was /Users/ur20980) to root's actual home (/var/root).
> fmtutil: fmtutil is using the following fmtutil.cnf files (in precedence order):

fmtutil determines the list via 
  kpsewhich -all fmtutil.cnf
You can debug this on your side by 
* become root (sudo su)
* run kpsewhich --debug -1 fmtutil.cnf
and crawl through the output until you fine something strange.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From uri at mit.edu  Fri Jun 22 04:21:46 2018
From: uri at mit.edu (Uri Blumenthal)
Date: Fri, 22 Jun 2018 02:21:46 +0000
Subject: [tex-live] TLU update fails (non-corporate MacOS machine)
In-Reply-To: <20180622020632.GA1605@bulldog.preining.info>
References: <20180622020632.GA1605@bulldog.preining.info>
Message-ID: <EA6D8E84-E6AC-4C69-A14E-4AC9E895F0BA@mit.edu>

Norbert, there are three different machines! One that this email refers to, is under my own control/management and has direct access to the Internet. The other two are under ?corporate management? and live behind a web proxy.

> On Jun 21, 2018, at 22:06 , Norbert Preining <preining at logic.at> wrote:
> 
> first of all, one thing, something has messed up your system completely,
> and I can guarantee you, it was not *us*.

Do you mean each and every machine that I?m reporting problems on? Because there seem to be different problems on different machines. So if possible, I?d like to ask to keep these email threads separate.

For example, on this one TLU doesn?t seem to update properly, but LaTeX/XeLaTeX etc. work just fine.

On the other machine (a ?corporate? one, where the formats don?t seem to exist) manual invocation of pdflatex on a simple test file fails.


>> showWindow:][17403]	User has chosen to permanently ignore the GPG 
> 
> See Max answer.

Thanks, took care of it.

>> 2018-06-22 00:41:11 +0000 Warning tlu_ipctask[23004]	running mktexlsr ...
>> 2018-06-22 00:41:23 +0000 Warning tlu_ipctask[23004]	done running mktexlsr.
> 
> That did run, but ?

But??

>> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ckmr-h is defined multiple times:
>> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-ko-baekmuk.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
>> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
> 
> You messed around with updmap.cfg and added entries to  TEXMFLOCAL/web2c/updmap.cfg
> That is *never* done by anyone of us, but must have been done by you or
> your system admin.

Understood. TEXMFLOCAL has been here for a very long time - and the reason was simple: to add support for several PS fonts, mostly for non-Latin languages. I did not update/touch it as TL progressed from before-2014 to 2018.

>> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [ERROR]: The following map file(s) couldn't be found:
>> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [ERROR]: 	morisawa.map (in /usr/local/texlive/texmf-local/web2c/updmap.cfg)
> 
> Again, this is your fault. If you put a map into their that is not
> available, it will break.

Understood.

> The file
>  TEXMFLOCAL/web2c/updmap.cfg
> should only contain references to font maps that are installed WITHIN
> TEXMFLOCAL!

Ah. Thanks. I don?t think I knew that, or observed that. So would have to go through that file with a fine-tooth comb? :-(

I?ll respond to the rest of this from the other machine, which that part relates to.

> On Thu, 21 Jun 2018, Blumenthal, Uri - 0553 - MITLL wrote:
>> $ kpsewhich -all fmtutil.cnf
>> $ ll /usr/local/texlive/2018/texmf-dist/web2c/fmtutil.cnf 
>> -rw-r--r--  1 root  wheel  4357 Apr 16 23:08 /usr/local/texlive/2018/texmf-dist/web2c/fmtutil.cnf
> 
> Then your ls-R is hosed, although mktexlsr was run.
> 
> What does
>  ls -l /usr/local/texlive/2018/texmf-dist/ls-R
> say? Does it contain an entry for fmtutil.cnf



>> $ sudo -E fmtutil-sys --all
>> fmtutil [WARNING]: resetting $HOME value (was /Users/ur20980) to root's actual home (/var/root).
>> fmtutil: fmtutil is using the following fmtutil.cnf files (in precedence order):
> 
> fmtutil determines the list via 
>  kpsewhich -all fmtutil.cnf
> You can debug this on your side by 
> * become root (sudo su)
> * run kpsewhich --debug -1 fmtutil.cnf
> and crawl through the output until you fine something strange.
> 
> Best
> 
> Norbert
> 
> --
> PREINING Norbert                               http://www.preining.info
> Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180622/a9634d1f/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1838 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180622/a9634d1f/attachment.p7s>

From uri at mit.edu  Fri Jun 22 04:31:44 2018
From: uri at mit.edu (Uri Blumenthal)
Date: Fri, 22 Jun 2018 02:31:44 +0000
Subject: [tex-live] TLU update fails (non-corporate MacOS machine)
In-Reply-To: <C470F4B0-EC72-4C16-A2E3-496721455FEE@mac.com>
References: <9FF4A659-724F-4728-A65C-98C60135618B@mit.edu>
 <C470F4B0-EC72-4C16-A2E3-496721455FEE@mac.com>
Message-ID: <3C0E7B7B-26C8-49E5-A4C4-A75967E71B55@mit.edu>

On Jun 21, 2018, at 21:44 , Adam R. Maxwell <amaxwell at mac.com> wrote:
> On Jun 21, 2018, at 17:52 , Uri Blumenthal <uri at mit.edu> wrote:
>> 
>> 2018-06-22 00:37:32 +0000 Notice -[TLMMainWindowController 
>> 
>> showWindow:][17403]	User has chosen to permanently ignore the GPG 
>> install alert
>> my question - how did TLU arrive at this conclusion, since there is no visible config option to do anything with GPG?
> 
> At some point, you were prompted via an alert to install GPG. It has a checkbox option for users who are afraid to install it and don't want to be nagged each time TLU launches. You apparently checked the box to never see that warning again (though it will be reset for TL 2019).

I assure you this was not the case, because I?ve been running GPG since it was PGP by Phil Zimmerman (in fact was on the PGP Design Team when the Usenet post came about that Prof. Sinelnikov found weaknesses in PGP).

On the other hand, I do not want any app (including TLU) to install some weird version go GnuPG. 

How do I tell TLU to use /usr/local/MacGPG2/bin/gpg2? If worst comes to worst, for apps that are too inflexible I symlinked it to /usr/local/bin/gpg... 

> You need to reset it in Terminal:
> 
> defaults delete com.googlecode.mactlmgr.tlu TLMDisableGPGAlertPreferenceKey

Thank you! Did that, and here?s the new log. Unfortunately, there are no updates available right now:

2018-06-22 02:22:20 +0000 Notice +[TLMEnvironment initialize][83368]	Welcome to TeX Live Utility 1.34, running under Mac OS X Version 10.13.5 (Build 17F77) with 4/4 processors active and 8.0 GB physical memory.
2018-06-22 02:22:20 +0000 Notice +[TLMEnvironment _checkProcessUmask][83368]	Process umask = 022
2018-06-22 02:22:20 +0000 Notice __TLMCheckWgetrc[83368]	*** WARNING *** ~/.wgetrc exists. If you encounter problems, ensure that it does not conflict with system proxy settings.
2018-06-22 02:22:20 +0000 Notice +[TLMEnvironment updateEnvironment][83368]	Setting up a new environment for /usr/local/texlive/2018?
2018-06-22 02:22:20 +0000 Notice +[TLMEnvironment updatePathEnvironment][83368]	Using PATH = "(
    "/usr/bin",
    "/bin",
    "/usr/sbin",
    "/sbin",
    "/usr/local/texlive/2018/bin/x86_64-darwin"
)"
2018-06-22 02:22:20 +0000 Notice +[TLMEnvironment _checkSystemPythonMajorVersion:minorVersion:][83368]	Using python at '/usr/bin/python'
2018-06-22 02:22:20 +0000 Notice +[TLMEnvironment _checkSystemPythonMajorVersion:minorVersion:][83368]	Python version is 2.7.10 (default, Oct  6 2017, 22:29:07) 
[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)]
2018-06-22 02:22:20 +0000 Notice +[TLMEnvironment updateEnvironment][83368]	Nothing to update for /usr/local/texlive/2018
2018-06-22 02:22:20 +0000 Notice -[TLMDatabase _downloadDatabaseHead][83368]	Checking the repository version.  Please be patient.
2018-06-22 02:22:20 +0000 Notice -[TLMDatabase _downloadDatabaseHead][83368]	Downloading at least 2048 bytes of tlpdb for a version check?
2018-06-22 02:22:20 +0000 Notice -[TLMDatabase _downloadDatabaseHead][83368]	Downloaded 65536 bytes of tlpdb for version check
2018-06-22 02:22:20 +0000 Notice -[TLMEnvironment initWithInstallDirectory:][83368]	Looks like you're using TeX Live 2018
2018-06-22 02:22:20 +0000 Notice -[TLMEnvironment _checkForRootPrivileges][83368]	Root permission required for installation at /usr/local/texlive/2018
2018-06-22 02:22:20 +0000 Notice +[TLMEnvironment _logEnvironment][83368]	Current environment from /usr/bin/env:
__CF_USER_TEXT_ENCODING=0x1F5:0x0:0x0
Apple_PubSub_Socket_Render=/private/tmp/com.apple.launchd.U2N2zqU485/Render
CC_FOR_BUILD=no_compiler_found
DBUS_LAUNCHD_SESSION_BUS_SOCKET=/private/tmp/com.apple.launchd.ZhWOY1xbpo/unix_domain_listener
DISPLAY=/private/tmp/com.apple.launchd.lATCoix9d8/org.macosforge.xquartz:0
HOME=/Users/uri
LOGNAME=uri
PATH=/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/texlive/2018/bin/x86_64-darwin
SHELL=/bin/bash
SSH_AUTH_SOCK=/private/tmp/com.apple.launchd.bQZSpK4R9S/Listeners
TMPDIR=/var/folders/pd/mxn5kp_55jg23x7jjd10gtwm0000gn/T/
USER=uri
XPC_FLAGS=0x0
XPC_SERVICE_NAME=0
2018-06-22 02:22:20 +0000 Notice -[TLMLogWindowController awakeFromNib][83368]	Loaded log window controller
2018-06-22 02:22:21 +0000 Notice -[TLMDatabase _reloadFromLocalFile][83368]	Reloading local tlpdb from file:///usr/local/texlive/2018/tlpkg/texlive.tlpdb
2018-06-22 02:22:24 +0000 Notice -[TLMDatabase _reloadFromLocalFile][83368]	Took 3.03 seconds to reload local tlpdb
2018-06-22 02:22:24 +0000 Notice -[TLMDatabase _downloadDatabaseHead][83368]	Checking the repository version.  Please be patient.
2018-06-22 02:22:24 +0000 Notice -[TLMDatabase _downloadDatabaseHead][83368]	Downloading at least 2048 bytes of tlpdb for a version check?
2018-06-22 02:22:24 +0000 Notice -[TLMDatabase connection:willSendRequest:redirectResponse:][83368]	redirected request to http://ftp.math.purdue.edu/mirrors/ctan.org/systems/texlive/tlnet/tlpkg/texlive.tlpdb
2018-06-22 02:22:28 +0000 Notice -[TLMDatabase _downloadDatabaseHead][83368]	Downloaded 4064 bytes of tlpdb for version check
2018-06-22 02:22:28 +0000 Notice -[TLMEnvironment _getValidServerURL:repositoryYear:fromURL:][83368]	Repository version appears to be 2018; a young TeX Live
2018-06-22 02:22:29 +0000 Notice -[TLMMainWindowController _refreshUpdatedPackageListFromLocation:][83368]	Refreshing list of updated packages?
2018-06-22 02:22:31 +0000 Notice -[TLMMainWindowController _paperSizeCheckTerminated:][83368]	System paper size = letter, pdftex paper size = letter
2018-06-22 02:22:34 +0000 Notice -[TLMOperation main][83368]	Successfully executed `/usr/local/texlive/2018/bin/x86_64-darwin/tlmgr --machine-readable --repository http://ftp.math.purdue.edu/mirrors/ctan.org/systems/texlive/tlnet/ update --list --all`


> The alert will read "This version of TeX Live allows you to check the digital signature of downloaded packages by installing GnuPG. For better security, you should enable this feature.?


I haven?t gotten any alert after running that command in Terminal and then invoking TLU.

> Sorry I can't help with updmap stuff, as I've never understood the proper incantations for the different trees. Norbert can probably decipher it easily?

No problem. Norbert is on the case, thankfully.

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180622/df4f47c3/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1838 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180622/df4f47c3/attachment-0001.p7s>

From uri at mit.edu  Fri Jun 22 04:45:25 2018
From: uri at mit.edu (Uri Blumenthal)
Date: Fri, 22 Jun 2018 02:45:25 +0000
Subject: [tex-live] TLU update fails (non-corporate MacOS machine)
In-Reply-To: <EA6D8E84-E6AC-4C69-A14E-4AC9E895F0BA@mit.edu>
References: <20180622020632.GA1605@bulldog.preining.info>
 <EA6D8E84-E6AC-4C69-A14E-4AC9E895F0BA@mit.edu>
Message-ID: <D8E1B6D2-0176-4172-8FD6-E09A3E8C8C50@mit.edu>

I pruned /usr/local/texlive/texmf-local/web2c/updmap.cfg, and here?s the result of the run (in Terminal, not via TLU yet, because there doesn?t seem to be a way to force ?updmap? from within TLU, nor a way to force re-generating formats). Does it look good to you?

$ sudo -E updmap-sys --syncwithtrees
updmap [WARNING]: resetting $HOME value (was /Users/uri) to root's actual home (/var/root).
updmap will read the following updmap.cfg files (in precedence order):
  /usr/local/texlive/texmf-local/web2c/updmap.cfg
  /usr/local/texlive/2018/texmf-config/web2c/updmap.cfg
  /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg
updmap may write changes to the following updmap.cfg file:
  /usr/local/texlive/texmf-local/web2c/updmap.cfg
$ sudo -E mktexlsr
mktexlsr: Updating /usr/local/texlive/2018/texmf-config/ls-R... 
mktexlsr: Updating /usr/local/texlive/2018/texmf-dist/ls-R... 
mktexlsr: Updating /usr/local/texlive/2018/texmf-var/ls-R... 
mktexlsr: Updating /usr/local/texlive/texmf-local/ls-R... 
mktexlsr: Done.
$ sudo -E updmap-sys
updmap [WARNING]: resetting $HOME value (was /Users/uri) to root's actual home (/var/root).
updmap will read the following updmap.cfg files (in precedence order):
  /usr/local/texlive/texmf-local/web2c/updmap.cfg
  /usr/local/texlive/2018/texmf-config/web2c/updmap.cfg
  /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg
updmap may write changes to the following updmap.cfg file:
  /usr/local/texlive/texmf-local/web2c/updmap.cfg
dvips output dir: "/usr/local/texlive/2018/texmf-var/fonts/map/dvips/updmap"
pdftex output dir: "/usr/local/texlive/2018/texmf-var/fonts/map/pdftex/updmap"
dvipdfmx output dir: "/usr/local/texlive/2018/texmf-var/fonts/map/dvipdfmx/updmap"

updmap is creating new map files
using the following configuration:
  LW35 font names                  : URWkb (/usr/local/texlive/texmf-local/web2c/updmap.cfg)
  prefer outlines                  : true (/usr/local/texlive/texmf-local/web2c/updmap.cfg)
  texhash enabled                  : true
  download standard fonts (dvips)  : true (/usr/local/texlive/texmf-local/web2c/updmap.cfg)
  download standard fonts (pdftex) : true (/usr/local/texlive/texmf-local/web2c/updmap.cfg)
  jaEmbed replacement string       : ipaex (/usr/local/texlive/texmf-local/web2c/updmap.cfg)
  jaVariant replacement string     : <empty> (default)
  scEmbed replacement string       : arphic (/usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
  tcEmbed replacement string       : arphic (/usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
  koEmbed replacement string       : baekmuk (/usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
  create a mapfile for pxdvi       : false (default)

Scanning for LW35 support files  [  3 files]
Scanning for MixedMap entries    [ 44 files]
Scanning for KanjiMap entries    [ 11 files]
Scanning for Map entries         [274 files]

Generating output for dvipdfmx...
Generating output for ps2pk...
Generating output for dvips...
Generating output for pdftex...

Files generated:
  /usr/local/texlive/2018/texmf-var/fonts/map/dvips/updmap:
       15796 2018-06-21 22:42:37 builtin35.map
       21269 2018-06-21 22:42:37 download35.map
     2599932 2018-06-21 22:42:38 psfonts_pk.map
     2860827 2018-06-21 22:42:37 psfonts_t1.map
     2855116 2018-06-21 22:42:37 ps2pk.map
          14 2018-06-21 22:42:38 psfonts.map -> psfonts_t1.map
  /usr/local/texlive/2018/texmf-var/fonts/map/pdftex/updmap:
     2855123 2018-06-21 22:42:38 pdftex_dl14.map
     2853458 2018-06-21 22:42:38 pdftex_ndl14.map
          15 2018-06-21 22:42:38 pdftex.map -> pdftex_dl14.map
  /usr/local/texlive/2018/texmf-var/fonts/map/dvipdfmx/updmap:
        8565 2018-06-21 22:42:37 kanjix.map

Transcript written on "/usr/local/texlive/2018/texmf-var/web2c/updmap.log".
updmap: Updating ls-R files.
$ 


> On Jun 21, 2018, at 22:21 , Uri Blumenthal <uri at MIT.EDU> wrote:
> 
> Norbert, there are three different machines! One that this email refers to, is under my own control/management and has direct access to the Internet. The other two are under ?corporate management? and live behind a web proxy.
> 
>> On Jun 21, 2018, at 22:06 , Norbert Preining <preining at logic.at <mailto:preining at logic.at>> wrote:
>> 
>> first of all, one thing, something has messed up your system completely,
>> and I can guarantee you, it was not *us*.
> 
> Do you mean each and every machine that I?m reporting problems on? Because there seem to be different problems on different machines. So if possible, I?d like to ask to keep these email threads separate.
> 
> For example, on this one TLU doesn?t seem to update properly, but LaTeX/XeLaTeX etc. work just fine.
> 
> On the other machine (a ?corporate? one, where the formats don?t seem to exist) manual invocation of pdflatex on a simple test file fails.
> 
> 
>>> showWindow:][17403]	User has chosen to permanently ignore the GPG 
>> 
>> See Max answer.
> 
> Thanks, took care of it.
> 
>>> 2018-06-22 00:41:11 +0000 Warning tlu_ipctask[23004]	running mktexlsr ...
>>> 2018-06-22 00:41:23 +0000 Warning tlu_ipctask[23004]	done running mktexlsr.
>> 
>> That did run, but ?
> 
> But??
> 
>>> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]: font otf-ckmr-h is defined multiple times:
>>> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-ko-baekmuk.map (from /usr/local/texlive/2018/texmf-dist/web2c/updmap.cfg)
>>> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [WARNING]:   otf-cktx.map (from /usr/local/texlive/texmf-local/web2c/updmap.cfg) (used)
>> 
>> You messed around with updmap.cfg and added entries to  TEXMFLOCAL/web2c/updmap.cfg
>> That is *never* done by anyone of us, but must have been done by you or
>> your system admin.
> 
> Understood. TEXMFLOCAL has been here for a very long time - and the reason was simple: to add support for several PS fonts, mostly for non-Latin languages. I did not update/touch it as TL progressed from before-2014 to 2018.
> 
>>> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [ERROR]: The following map file(s) couldn't be found:
>>> 2018-06-22 00:42:37 +0000 Warning tlu_ipctask[23004]	updmap [ERROR]: 	morisawa.map (in /usr/local/texlive/texmf-local/web2c/updmap.cfg)
>> 
>> Again, this is your fault. If you put a map into their that is not
>> available, it will break.
> 
> Understood.
> 
>> The file
>>  TEXMFLOCAL/web2c/updmap.cfg
>> should only contain references to font maps that are installed WITHIN
>> TEXMFLOCAL!
> 
> Ah. Thanks. I don?t think I knew that, or observed that. So would have to go through that file with a fine-tooth comb? :-(
> 
> I?ll respond to the rest of this from the other machine, which that part relates to.
> 
>> On Thu, 21 Jun 2018, Blumenthal, Uri - 0553 - MITLL wrote:
>>> $ kpsewhich -all fmtutil.cnf
>>> $ ll /usr/local/texlive/2018/texmf-dist/web2c/fmtutil.cnf 
>>> -rw-r--r--  1 root  wheel  4357 Apr 16 23:08 /usr/local/texlive/2018/texmf-dist/web2c/fmtutil.cnf
>> 
>> Then your ls-R is hosed, although mktexlsr was run.
>> 
>> What does
>>  ls -l /usr/local/texlive/2018/texmf-dist/ls-R
>> say? Does it contain an entry for fmtutil.cnf
> 
> 
> 
>>> $ sudo -E fmtutil-sys --all
>>> fmtutil [WARNING]: resetting $HOME value (was /Users/ur20980) to root's actual home (/var/root).
>>> fmtutil: fmtutil is using the following fmtutil.cnf files (in precedence order):
>> 
>> fmtutil determines the list via 
>>  kpsewhich -all fmtutil.cnf
>> You can debug this on your side by 
>> * become root (sudo su)
>> * run kpsewhich --debug -1 fmtutil.cnf
>> and crawl through the output until you fine something strange.
>> 
>> Best
>> 
>> Norbert
>> 
>> --
>> PREINING Norbert                               http://www.preining.info <http://www.preining.info/>
>> Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
>> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180622/54da0d87/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1838 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180622/54da0d87/attachment-0001.p7s>

From amaxwell at mac.com  Fri Jun 22 04:47:53 2018
From: amaxwell at mac.com (Adam R. Maxwell)
Date: Thu, 21 Jun 2018 19:47:53 -0700
Subject: [tex-live] TLU update fails (non-corporate MacOS machine)
In-Reply-To: <3C0E7B7B-26C8-49E5-A4C4-A75967E71B55@mit.edu>
References: <9FF4A659-724F-4728-A65C-98C60135618B@mit.edu>
 <C470F4B0-EC72-4C16-A2E3-496721455FEE@mac.com>
 <3C0E7B7B-26C8-49E5-A4C4-A75967E71B55@mit.edu>
Message-ID: <A8BD0F41-6FBF-4D89-8BE9-C90617BBF92B@mac.com>



> On Jun 21, 2018, at 19:31 , Uri Blumenthal <uri at mit.edu> wrote:
> 
> On Jun 21, 2018, at 21:44 , Adam R. Maxwell <amaxwell at mac.com <mailto:amaxwell at mac.com>> wrote:
>> On Jun 21, 2018, at 17:52 , Uri Blumenthal <uri at mit.edu <mailto:uri at mit.edu>> wrote:
>>> 
>>> 2018-06-22 00:37:32 +0000 Notice -[TLMMainWindowController 
>>> 
>>> showWindow:][17403]	User has chosen to permanently ignore the GPG 
>>> install alert
>>> my question - how did TLU arrive at this conclusion, since there is no visible config option to do anything with GPG?
>> 
>> At some point, you were prompted via an alert to install GPG. It has a checkbox option for users who are afraid to install it and don't want to be nagged each time TLU launches. You apparently checked the box to never see that warning again (though it will be reset for TL 2019).
> 
> I assure you this was not the case, because I?ve been running GPG since it was PGP by Phil Zimmerman (in fact was on the PGP Design Team when the Usenet post came about that Prof. Sinelnikov found weaknesses in PGP).

The only way that preference key would be set (and thus the log
message) is if you checked the box on the alert.

> On the other hand, I do not want any app (including TLU) to install some weird version go GnuPG. 
> 
> How do I tell TLU to use /usr/local/MacGPG2/bin/gpg2?

Hack TLCrypto.pm or TLU yourself.

> If worst comes to worst, for apps that are too inflexible I symlinked it to /usr/local/bin/gpg... 

That shouldn't work. I remove /usr/local/bin from TLU's PATH
since too many users installed things that broke TLU or tlmgr.

If you don't see the alert, it suggests that you already installed 
the tlgpg package, which installs to the TL tree. Try

tlmgr show tlgpg

which is how I check for it.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180621/d5fa991c/attachment.html>

From preining at logic.at  Fri Jun 22 04:52:38 2018
From: preining at logic.at (Norbert Preining)
Date: Fri, 22 Jun 2018 11:52:38 +0900
Subject: [tex-live] TLU update fails (non-corporate MacOS machine)
In-Reply-To: <D8E1B6D2-0176-4172-8FD6-E09A3E8C8C50@mit.edu>
References: <20180622020632.GA1605@bulldog.preining.info>
 <EA6D8E84-E6AC-4C69-A14E-4AC9E895F0BA@mit.edu>
 <D8E1B6D2-0176-4172-8FD6-E09A3E8C8C50@mit.edu>
Message-ID: <20180622025238.GC1605@bulldog.preining.info>

On Fri, 22 Jun 2018, Uri Blumenthal wrote:
> $ sudo -E updmap-sys --syncwithtrees

Umpf, not the --syncwithtrees. That is suboptimal. And I guess
it is actually not working ;-)
SO that means all fine.

Looks fine.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From preining at logic.at  Fri Jun 22 04:55:20 2018
From: preining at logic.at (Norbert Preining)
Date: Fri, 22 Jun 2018 11:55:20 +0900
Subject: [tex-live] TLU update fails (non-corporate MacOS machine)
In-Reply-To: <A8BD0F41-6FBF-4D89-8BE9-C90617BBF92B@mac.com>
References: <9FF4A659-724F-4728-A65C-98C60135618B@mit.edu>
 <C470F4B0-EC72-4C16-A2E3-496721455FEE@mac.com>
 <3C0E7B7B-26C8-49E5-A4C4-A75967E71B55@mit.edu>
 <A8BD0F41-6FBF-4D89-8BE9-C90617BBF92B@mac.com>
Message-ID: <20180622025520.GD1605@bulldog.preining.info>

On Thu, 21 Jun 2018, Adam R. Maxwell wrote:
> > How do I tell TLU to use /usr/local/MacGPG2/bin/gpg2?
> 
> Hack TLCrypto.pm or TLU yourself.

No need.

It already does:
  * check for TL_GNUPG env var
  * check for gpg in the PATH
  * check for gpg2 in the PATH
  * check for TL shipped gpg if available

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From preining at logic.at  Fri Jun 22 04:57:24 2018
From: preining at logic.at (Norbert Preining)
Date: Fri, 22 Jun 2018 11:57:24 +0900
Subject: [tex-live] TLU update fails (non-corporate MacOS machine)
In-Reply-To: <EA6D8E84-E6AC-4C69-A14E-4AC9E895F0BA@mit.edu>
References: <20180622020632.GA1605@bulldog.preining.info>
 <EA6D8E84-E6AC-4C69-A14E-4AC9E895F0BA@mit.edu>
Message-ID: <20180622025724.GE1605@bulldog.preining.info>

> Do you mean each and every machine that I?m reporting problems on? Because there seem to be different problems on different machines. So if possible, I?d like to ask to keep these email threads separate.

Sorry, I don't have any idea which machine you are using when. I don't
care. If you have problems on multiple machines, please separate out the
parts according to the machines, I can't do that.

I see three problems:
* proxy/https
  that is fixed by updating to current texlive.infra
* updmap
  that is fixed by cleaning out TEXMFLOCAL/web2c/updmap.cfg
* fmtutil
  this is open

> On the other machine (a ?corporate? one, where the formats don?t seem to exist) manual invocation of pdflatex on a simple test file fails.

Of course, because the formats have not been built.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From uri at ll.mit.edu  Fri Jun 22 05:32:45 2018
From: uri at ll.mit.edu (Blumenthal, Uri - 0553 - MITLL)
Date: Thu, 21 Jun 2018 23:32:45 -0400
Subject: [tex-live] TLU update fails (non-corporate MacOS machine)
In-Reply-To: <20180622020632.GA1605@bulldog.preining.info>
References: <20180622020632.GA1605@bulldog.preining.info>
Message-ID: <45703A27-210C-4F35-8E6A-04B851194975@ll.mit.edu>

This is the ?firewalledl? machine that?s screwed up the most. It has been re-imaged (so whatever config was done, is mostly lost), and a new copy of TL was downloaded & installed (so instead of TL 2016 and 2017, it now has only TL 2018).

This afternoon I re-installed TL 2018. Results seem to be the same, maybe a touch better.

> On Thu, 21 Jun 2018, Blumenthal, Uri - 0553 - MITLL wrote:
>> $ kpsewhich -all fmtutil.cnf
>> $ ll /usr/local/texlive/2018/texmf-dist/web2c/fmtutil.cnf 
>> -rw-r--r--  1 root  wheel  4357 Apr 16 23:08 /usr/local/texlive/2018/texmf-dist/web2c/fmtutil.cnf
> 
> Then your ls-R is hosed, although mktexlsr was run.

Yeah, I suspect a lot of things on this machine are hosed. The question is how to straighten this up? :-(


> What does
>  ls -l /usr/local/texlive/2018/texmf-dist/ls-R
> say? Does it contain an entry for fmtutil.cnf

Yes it does.


>> $ sudo -E fmtutil-sys --all
>> fmtutil [WARNING]: resetting $HOME value (was /Users/ur20980) to root's actual home (/var/root).
>> fmtutil: fmtutil is using the following fmtutil.cnf files (in precedence order):
> 
> fmtutil determines the list via 
>  kpsewhich -all fmtutil.cnf
> You can debug this on your side by 
> * become root (sudo su)
> * run kpsewhich --debug -1 fmtutil.cnf
> and crawl through the output until you fine something strange.

It all looks strange. ;-)


$ latex t
This is pdfTeX, Version 3.14159265-2.6-1.40.19 (TeX Live 2018) (preloaded format=latex)
 restricted \write18 enabled.

kpathsea: Running mktexfmt latex.fmt
mktexfmt: mktexfmt is using the following fmtutil.cnf files (in precedence order):
mktexfmt: mktexfmt is using the following fmtutil.cnf file for writing changes:
mktexfmt:   /Users/ur20980/Library/texlive/2018/texmf-config/web2c/fmtutil.cnf
mktexfmt [INFO]: writing formats under /Users/ur20980/Library/texlive/2018/texmf-var/web2c
mktexfmt [INFO]: did not find entry for byfmt=latex, skipped
mktexfmt [INFO]: Total formats: 0
mktexfmt [INFO]: exiting with status 0
I can't find the format file `latex.fmt'!
$ sudo -E fmtutil-sys --listcfg
fmtutil [WARNING]: resetting $HOME value (was /Users/ur20980) to root's actual home (/var/root).
fmtutil: fmtutil is using the following fmtutil.cnf files (in precedence order):
fmtutil: fmtutil is using the following fmtutil.cnf file for writing changes:
fmtutil:   /usr/local/texlive/2018/texmf-config/web2c/fmtutil.cnf
List of all formats:
fmtutil [INFO]: exiting with status 1
$ sudo -E updmap-sys
updmap [WARNING]: resetting $HOME value (was /Users/ur20980) to root's actual home (/var/root).
updmap will read the following updmap.cfg files (in precedence order):
updmap may write changes to the following updmap.cfg file:
  /usr/local/texlive/2018/texmf-config/web2c/updmap.cfg
dvips output dir: "/usr/local/texlive/2018/texmf-var/fonts/map/dvips/updmap"
pdftex output dir: "/usr/local/texlive/2018/texmf-var/fonts/map/pdftex/updmap"
dvipdfmx output dir: "/usr/local/texlive/2018/texmf-var/fonts/map/dvipdfmx/updmap"
Use of uninitialized value $fn in concatenation (.) or string at /Library/TeX/texbin/updmap line 2138.
Use of uninitialized value $fn in concatenation (.) or string at /Library/TeX/texbin/updmap line 2139.
updmap: open() failed: No such file or directory at /Library/TeX/texbin/updmap line 2139.
Use of uninitialized value $fn in concatenation (.) or string at /Library/TeX/texbin/updmap line 2138.
Use of uninitialized value $fn in concatenation (.) or string at /Library/TeX/texbin/updmap line 2139.
updmap: open() failed: No such file or directory at /Library/TeX/texbin/updmap line 2139.
Use of uninitialized value $fn in concatenation (.) or string at /Library/TeX/texbin/updmap line 2138.
Use of uninitialized value $fn in concatenation (.) or string at /Library/TeX/texbin/updmap line 2139.
updmap: open() failed: No such file or directory at /Library/TeX/texbin/updmap line 2139.
updmap [ERROR]: The following map file(s) couldn't be found:
updmap [ERROR]: 	dvips35.map (in builtin)
updmap [ERROR]: 	pdftex35.map (in builtin)
updmap [ERROR]: 	ps2pk35.map (in builtin)
updmap [ERROR]: Did you run mktexlsr?

	You can disable non-existent map entries using the option
	  --syncwithtrees.

$ sudo -E mktexlsr
mktexlsr: Updating /usr/local/texlive/2018/texmf-config/ls-R... 
mktexlsr: Updating /usr/local/texlive/2018/texmf-dist/ls-R... 
mktexlsr: Updating /usr/local/texlive/2018/texmf-var/ls-R... 
mktexlsr: Updating /usr/local/texlive/texmf-local/ls-R... 
mktexlsr: Done.
$ sudo -E updmap-sys
updmap [WARNING]: resetting $HOME value (was /Users/ur20980) to root's actual home (/var/root).
updmap will read the following updmap.cfg files (in precedence order):
updmap may write changes to the following updmap.cfg file:
  /usr/local/texlive/2018/texmf-config/web2c/updmap.cfg
dvips output dir: "/usr/local/texlive/2018/texmf-var/fonts/map/dvips/updmap"
pdftex output dir: "/usr/local/texlive/2018/texmf-var/fonts/map/pdftex/updmap"
dvipdfmx output dir: "/usr/local/texlive/2018/texmf-var/fonts/map/dvipdfmx/updmap"
Use of uninitialized value $fn in concatenation (.) or string at /Library/TeX/texbin/updmap line 2138.
Use of uninitialized value $fn in concatenation (.) or string at /Library/TeX/texbin/updmap line 2139.
updmap: open() failed: No such file or directory at /Library/TeX/texbin/updmap line 2139.
Use of uninitialized value $fn in concatenation (.) or string at /Library/TeX/texbin/updmap line 2138.
Use of uninitialized value $fn in concatenation (.) or string at /Library/TeX/texbin/updmap line 2139.
updmap: open() failed: No such file or directory at /Library/TeX/texbin/updmap line 2139.
Use of uninitialized value $fn in concatenation (.) or string at /Library/TeX/texbin/updmap line 2138.
Use of uninitialized value $fn in concatenation (.) or string at /Library/TeX/texbin/updmap line 2139.
updmap: open() failed: No such file or directory at /Library/TeX/texbin/updmap line 2139.
updmap [ERROR]: The following map file(s) couldn't be found:
updmap [ERROR]: 	dvips35.map (in builtin)
updmap [ERROR]: 	pdftex35.map (in builtin)
updmap [ERROR]: 	ps2pk35.map (in builtin)
updmap [ERROR]: Did you run mktexlsr?

	You can disable non-existent map entries using the option
	  --syncwithtrees.

$ sudo -E fmtutil-sys --all
fmtutil [WARNING]: resetting $HOME value (was /Users/ur20980) to root's actual home (/var/root).
fmtutil: fmtutil is using the following fmtutil.cnf files (in precedence order):
fmtutil: fmtutil is using the following fmtutil.cnf file for writing changes:
fmtutil:   /usr/local/texlive/2018/texmf-config/web2c/fmtutil.cnf
fmtutil [INFO]: writing formats under /usr/local/texlive/2018/texmf-var/web2c
Use of uninitialized value $whatarg in concatenation (.) or string at /Library/TeX/texbin/fmtutil line 443.
fmtutil [INFO]: did not find entry for all=, skipped
fmtutil [INFO]: Total formats: 0
fmtutil [INFO]: exiting with status 0
$ env | grep TEX
TEXMF=/usr/local/texlive/2018
$ 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180621/2d1df8db/attachment-0001.html>

From preining at logic.at  Fri Jun 22 06:32:47 2018
From: preining at logic.at (Norbert Preining)
Date: Fri, 22 Jun 2018 13:32:47 +0900
Subject: [tex-live] TLU update fails (non-corporate MacOS machine)
In-Reply-To: <45703A27-210C-4F35-8E6A-04B851194975@ll.mit.edu>
References: <20180622020632.GA1605@bulldog.preining.info>
 <45703A27-210C-4F35-8E6A-04B851194975@ll.mit.edu>
Message-ID: <20180622043247.GA3429@bulldog.preining.info>

Hi,

> > What does
> >  ls -l /usr/local/texlive/2018/texmf-dist/ls-R
> > say? Does it contain an entry for fmtutil.cnf
> 
> Yes it does.

What does the ls -l say? Is the file readable for everyone?

Can you please send me a tar.gz or similar of the following files:
* /usr/local/texlive/2018/texmf-dist/ls-R
* /usr/local/texlive/2018/texmf-dist/web2c/fmtutil.cnf
* the output of kpsewhich --debug -1 fmtutil.cnf

> $ latex t

Doesn't work since the format is not defined and built, no need to try.

> updmap [ERROR]: The following map file(s) couldn't be found:
> updmap [ERROR]: 	dvips35.map (in builtin)
> updmap [ERROR]: 	pdftex35.map (in builtin)
> updmap [ERROR]: 	ps2pk35.map (in builtin)
> updmap [ERROR]: Did you run mktexlsr?

Again, that looks strange. These files should be there in
  texmf-dist/fonts/map/dvips/tetex/

kpse lookup is broken on your system. I have no idea why.

If this does not work, nothing work, nor updmap, nor fmtutil, nor latex.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From enrico.gregorio at gmail.com  Fri Jun 22 15:22:07 2018
From: enrico.gregorio at gmail.com (Enrico Gregorio)
Date: Fri, 22 Jun 2018 15:22:07 +0200
Subject: [tex-live] Wrong map entry after update to libertinust1math
Message-ID: <181D3FC4-6981-43BD-BE55-B28990C96EBA@gmail.com>

The following test file

\documentclass{article}
\usepackage[sansmath]{libertinust1math}
\begin{document}
$a+b$
\end{document}

fails with

kpathsea: Running mktexpk --mfmode / --bdpi 600 --mag 0+572/600 --dpi 572 BDXsfmi-reg
mktexpk: don't know how to create bitmap font for BDXsfmi-reg.
mktexpk: perhaps BDXsfmi-reg is missing from the map file.
kpathsea: Appending font creation commands to missfont.log.

Ciao
Enrico

From jcc8 at psu.edu  Fri Jun 22 20:01:31 2018
From: jcc8 at psu.edu (John Collins)
Date: Fri, 22 Jun 2018 14:01:31 -0400
Subject: [tex-live] bug report of bibtex
In-Reply-To: <201806102225.w5AMProp014591@freefriends.org>
References: <201806102225.w5AMProp014591@freefriends.org>
Message-ID: <219080a0-e33f-e42d-f3a9-b474e45fb062@psu.edu>

Hi Karl,

On 6/10/18 6:25 PM, Karl Berry wrote:
> Hi John,
> 
>          bibtex output/main.aux
> 
>      Then the search for subsidiary .aux files is changed from no path to
>      just the path component of the top-level aux file.
> 
> I just committed a change that attempts to implement this (edited patch
> below for the record, r47979). Hope I didn't break the world.
> 
> That is, when looking for a subsidiary aux file, it first checks the
> current directory (no change), then the dirname of the main aux file.

I've done some extensive tests, everything seems to work as intended, 
and nothing has failed.

I've also modified latexmk (for a version 4.57 to appear) to be able to 
use the new version of bibtex.  In previous versions, latexmk did an 
ugly work-around to be able to use an output-directory with bibtex.  Now 
there's a configuration variable to turn this work-around off.  (Even 
without the new version of bibtex, that also solves the problem that was 
reported by the OP of this thread.)

One thing I noticed in the code is that the second possibility tried for 
opening a subsidiary aux file involves an unconditional concatenation of 
the path component of the top-level aux file with the specified name of 
the subsidiary aux file.  Almost all of the time, that is the correct 
thing to try.  However, it could be that the subsidiary file is 
specified with an absolute path name.  That is very unusual, and of 
course the creation of such an aux file is prohibited by the default 
setting of openout_any.  Even so, it is a possible situation.  Would it 
be possible to turn of the second possibility for opening the aux file 
if its pathname is absolute?  I.e., if the path is absolute, then the 
search for the aux file relative to the output directory is not done.

John

From preining at logic.at  Fri Jun 22 22:53:20 2018
From: preining at logic.at (Norbert Preining)
Date: Sat, 23 Jun 2018 05:53:20 +0900
Subject: [tex-live] TLU update fails (non-corporate MacOS machine)
In-Reply-To: <20180622025724.GE1605@bulldog.preining.info>
References: <20180622020632.GA1605@bulldog.preining.info>
 <EA6D8E84-E6AC-4C69-A14E-4AC9E895F0BA@mit.edu>
 <20180622025724.GE1605@bulldog.preining.info>
Message-ID: <19979EC1-4EA5-42DA-BD7C-C7A1888C091B@logic.at>

Hi everyone

>I see three problems:
>* proxy/https
>  that is fixed by updating to current texlive.infra
>* updmap
>  that is fixed by cleaning out TEXMFLOCAL/web2c/updmap.cfg
>* fmtutil
>  this is open

Just to report off list communication has solved the last problem, too. The respective computer had some very unforgiving env vars set:
TEXMFLOCAL=/usr/local/texlive/texmf-local/
TEXMFSYSVAR=/usr/local/texlive/2018/texmf-var
TEXMFSYSCONFIG=/usr/local/texlive/2018/texmf-config
TEXDIR=/usr/local/texlive/2018
TEXMF=/usr/local/texlive/2018

Unsetting them solved all problems.

Norbert



--
PREINING Norbert http://www.preining.info
Accelia Inc. + JAIST + TeX Live + Debian Developer
GPG: 0x860CDC13 fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From karl at freefriends.org  Sat Jun 23 00:12:37 2018
From: karl at freefriends.org (Karl Berry)
Date: Fri, 22 Jun 2018 22:12:37 GMT
Subject: [tex-live] Wrong map entry after update to libertinust1math
In-Reply-To: <181D3FC4-6981-43BD-BE55-B28990C96EBA@gmail.com>
Message-ID: <201806222212.w5MMCbv0010500@freefriends.org>

    mktexpk: perhaps BDXsfmi-reg is missing from the map file.

I forwarded to the maintainer (Michael Sharpe). Thanks. -k

From karl at freefriends.org  Sat Jun 23 00:12:38 2018
From: karl at freefriends.org (Karl Berry)
Date: Fri, 22 Jun 2018 22:12:38 GMT
Subject: [tex-live] bug report of bibtex
In-Reply-To: <219080a0-e33f-e42d-f3a9-b474e45fb062@psu.edu>
Message-ID: <201806222212.w5MMCcvD010518@freefriends.org>

    be possible to turn of the second possibility for opening the aux file 
    if its pathname is absolute?  I.e., if the path is absolute, then the 
    search for the aux file relative to the output directory is not done.

"Absolutely" :). I actually thought I had done that, but I guess only in
my head, not the code. Oops. Thank you for the careful review. I'll let
you know when I've gotten back to fix that so you can check. --best, karl.

From karl at freefriends.org  Sun Jun 24 23:50:47 2018
From: karl at freefriends.org (Karl Berry)
Date: Sun, 24 Jun 2018 21:50:47 GMT
Subject: [tex-live] tl2018: problems with including a (very specific)
	PNG	file
In-Reply-To: <20180620121655.vvaioqlwtyp3nato@math.berkeley.edu>
Message-ID: <201806242150.w5OLolos019690@freefriends.org>

    The attached files build ????fine???? with tl2009, but produce a very bad
    result with tl2018.

I don't get any difference in the output between 2009 and today (on
x86-linux), but anyway, whatever is going on I believe is in the LaTeX
drivers rather than the pdftex binary, because it worked normally with
plain pdftex. So I posted here:
https://github.com/latex3/graphics-def/issues/18

I surmise a workaround could be to open/save the png, or run through
pngtopnm|pnmtopng, or whatever, since clearly that particular png is
indeed "unusual". --best, karl.

From slava.asipenko at notarize.com  Mon Jun 25 15:44:45 2018
From: slava.asipenko at notarize.com (Slava Asipenko)
Date: Mon, 25 Jun 2018 09:44:45 -0400
Subject: [tex-live] TeX Live installation error
In-Reply-To: <20180620033442.GB17769@bulldog.preining.info>
References: <FBF07F1E-191C-4174-80B6-ACD0DE76C697@notarize.com>
 <20180620033442.GB17769@bulldog.preining.info>
Message-ID: <AAA41298-C5E8-41C7-845F-C55480381FB9@notarize.com>

Unfortunately it?s not consistent, and could be something on our end. Even though we have not changed the installation script. Was just hoping it will ring a bell e.g. if there was a recent release potentially contributing to this.

Thanks

-- 
Slava Asipenko
Engineering Manager
Notarize

> On Jun 19, 2018, at 11:34 PM, Norbert Preining <preining at logic.at> wrote:
> 
>> Recently, we started having this error when installing TeX Live on our Heroku dynos using a buildpack. Reporting as suggested in the output, any help would be appreciated.
> 
> Is this reproducible behaviour? One possible reason for this is that the
> download did not succeed.
> 
> Norbert
> 
> --
> PREINING Norbert                               http://www.preining.info
> Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180625/f1c1156b/attachment.html>

From fxcoudert at gmail.com  Tue Jun 26 19:13:26 2018
From: fxcoudert at gmail.com (FX)
Date: Tue, 26 Jun 2018 19:13:26 +0200
Subject: [tex-live] Texlive update failed with signature error
In-Reply-To: <20180607133933.GC10446@bulldog.preining.info>
References: <A24555BB-EF63-4A0E-B633-8ABB2768DDFE@gmail.com>
 <20180605123530.GC20983@bulldog.preining.info>
 <548B3CAB-80D5-4D80-84C9-DF4AD50359CD@gmail.com>
 <20180605130043.GD20983@bulldog.preining.info>
 <67313BC5-B866-4B55-B9C1-B4C7EA5F5FD1@gmail.com>
 <20180605150958.GA10467@bulldog.preining.info>
 <CF376606-5477-45F3-BEA1-AAC96675B145@gmail.com>
 <20180607133933.GC10446@bulldog.preining.info>
Message-ID: <6CA9F5C5-542D-443E-B9D0-D10CD95EB12D@gmail.com>

> Yes, that is a problem in the mirror.ctan.org redirection it seems. I
> will try to find out what can be done.

The issue still exists. Can the mirror be removed please?

$ sudo tlmgr update --all
/Library/TeX/texbin/tlmgr: signature verification error of /tmp/rylsvOXImB/AdKeuJ_HyT from http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb: cryptographic signature verification of
  /tmp/rylsvOXImB/NWAj7fhoWH
against
  http://ctan.crest.fr/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc
failed. Output was
gpg: no valid OpenPGP data found.
gpg: the signature could not be verified.
Please remember that the signature file (.sig or .asc)
should be the first file given on the command line.

Please report to texlive at tug.org




From preining at logic.at  Tue Jun 26 23:02:44 2018
From: preining at logic.at (Norbert Preining)
Date: Wed, 27 Jun 2018 06:02:44 +0900
Subject: [tex-live] Texlive update failed with signature error
In-Reply-To: <6CA9F5C5-542D-443E-B9D0-D10CD95EB12D@gmail.com>
References: <A24555BB-EF63-4A0E-B633-8ABB2768DDFE@gmail.com>
 <20180605123530.GC20983@bulldog.preining.info>
 <548B3CAB-80D5-4D80-84C9-DF4AD50359CD@gmail.com>
 <20180605130043.GD20983@bulldog.preining.info>
 <67313BC5-B866-4B55-B9C1-B4C7EA5F5FD1@gmail.com>
 <20180605150958.GA10467@bulldog.preining.info>
 <CF376606-5477-45F3-BEA1-AAC96675B145@gmail.com>
 <20180607133933.GC10446@bulldog.preining.info>
 <6CA9F5C5-542D-443E-B9D0-D10CD95EB12D@gmail.com>
Message-ID: <20180626210244.GB10844@burischnitzel.preining.info>

On Tue, 26 Jun 2018, FX wrote:
> The issue still exists. Can the mirror be removed please?

Strange ... I just tried it myself:
  $ tlmgr --repo http://ctan.crest.fr/tex-archive/systems/texlive/tlnet update --list
  tlmgr: package repository http://ctan.crest.fr/tex-archive/systems/texlive/tlnet (verified)
  tlmgr: saving backups to /home/norbert/tl/2018/tlpkg/backups
  keep:     texlive.infra            : local:    48080, source:    47951
  tlmgr: no updates available
  $
and I don't see any errors.

It turns out that LWP handles redirects automatically, but curl
needs an additional argument.

Can you please *edit* the file tlpkg/TeXLive/TLConfig.pm, around 
line 119 there is now something like

our %FallbackDownloaderArgs = (
  'curl' => ['--user-agent', 'texlive/curl', '--retry', '10', '--fail',
             '--connect-timeout', "$NetworkTimeout", '--silent', '--output'],

please add *after* the '--fail', the additional option --location, so
that it looks like
our %FallbackDownloaderArgs = (
  'curl' => ['--user-agent', 'texlive/curl', '--retry', '10', '--fail', '--location',
             '--connect-timeout', "$NetworkTimeout", '--silent', '--output'],
With that, it should start to work.

I will commit this change to our main repo, too.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From Punit.Dubey at aptaracorp.com  Wed Jun 27 17:24:22 2018
From: Punit.Dubey at aptaracorp.com (Punit Kumar Dubey)
Date: Wed, 27 Jun 2018 15:24:22 +0000
Subject: [tex-live] Texlive 2018 unable to install
Message-ID: <0AD98B7C246F6B4FB1A95C83C8537F1B01367330@exch2010n1>


HI team,

we are not able to install texlive2018 on system and please share texlive 2018 requirement .

[cid:image001.png at 01D40E56.758D7C50]


Regards,
Punit Dubey
Desktop Support Engineer | IT-Support
Punit.dubey at aptaracorp.com<mailto:Punit.dubey at aptaracorp.com> | aptaracorp.com<http://www.aptaracorp.com/>
O: +0120-7182424 x3461, 3462, 3469

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180627/6b1d8ad6/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 281694 bytes
Desc: image001.png
URL: <http://tug.org/pipermail/tex-live/attachments/20180627/6b1d8ad6/attachment-0001.png>

From siepo at cybercomm.nl  Wed Jun 27 18:31:40 2018
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Wed, 27 Jun 2018 18:31:40 +0200
Subject: [tex-live] Texlive 2018 unable to install
In-Reply-To: <0AD98B7C246F6B4FB1A95C83C8537F1B01367330@exch2010n1>
References: <0AD98B7C246F6B4FB1A95C83C8537F1B01367330@exch2010n1>
Message-ID: <20180627163140.GB5767@bitmuis.thuis.internal>

On Wed, Jun 27, 2018 at 03:24:22PM +0000, Punit Kumar Dubey wrote:
> 
> HI team,
> 
> we are not able to install texlive2018 on system and please share texlive 2018 requirement .
> 
> [cid:image001.png at 01D40E56.758D7C50]

Please follow the advice in the screenshot: choose the unpack
button and then invoke one of the two install-tl batchfiles.

There will be a command prompt window from which you can
copy-and-paste relevant information for us.

-- 
Siep Kroonenberg

From Punit.Dubey at aptaracorp.com  Thu Jun 28 18:37:27 2018
From: Punit.Dubey at aptaracorp.com (Punit Kumar Dubey)
Date: Thu, 28 Jun 2018 16:37:27 +0000
Subject: [tex-live] Texlive 2018 unable to install
Message-ID: <0AD98B7C246F6B4FB1A95C83C8537F1B013678B7@exch2010n1>

Hi Team,

Still waiting your response.

Regards,
Punit Dubey
Desktop Support Engineer | IT-Support
Punit.dubey at aptaracorp.com<mailto:Punit.dubey at aptaracorp.com> | aptaracorp.com<http://www.aptaracorp.com/>
O: +0120-7182424 x3461, 3462, 3469



From: Punit Kumar Dubey
Sent: Wednesday, June 27, 2018 8:54 PM
To: 'texlive at tug.org'
Cc: Shamshad Ali; Ravi Sharma; 'Siban Hashmi'
Subject: Texlive 2018 unable to install


HI team,

we are not able to install texlive2018 on system and please share texlive 2018 requirement .

[cid:image001.png at 01D40F2C.659A84B0]


Regards,
Punit Dubey
Desktop Support Engineer | IT-Support
Punit.dubey at aptaracorp.com<mailto:Punit.dubey at aptaracorp.com> | aptaracorp.com<http://www.aptaracorp.com/>
O: +0120-7182424 x3461, 3462, 3469

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180628/5166f674/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 281694 bytes
Desc: image001.png
URL: <http://tug.org/pipermail/tex-live/attachments/20180628/5166f674/attachment-0001.png>

From P.Taylor at Rhul.Ac.Uk  Thu Jun 28 19:14:33 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor (RHBNC))
Date: Thu, 28 Jun 2018 18:14:33 +0100
Subject: [tex-live] Texlive 2018 unable to install
In-Reply-To: <0AD98B7C246F6B4FB1A95C83C8537F1B013678B7@exch2010n1>
References: <0AD98B7C246F6B4FB1A95C83C8537F1B013678B7@exch2010n1>
Message-ID: <ae70e24f-9c91-0d0b-d6b8-7c953f0cf276@Rhul.Ac.Uk>

Punit Kumar Dubey wrote:
>
> Hi Team,
>
> Still waiting your response.
>
Siep Kroonenberg sent the following but you may not have been cc'd :

> On Wed, Jun 27, 2018 at 03:24:22PM +0000, Punit Kumar Dubey wrote:
>> HI team,
>>
>> we are not able to install texlive2018 on system and please share texlive 2018 requirement .
>>
>> [cid:image001.png at 01D40E56.758D7C50]
> Please follow the advice in the screenshot: choose the unpack
> button and then invoke one of the two install-tl batchfiles.
>
> There will be a command prompt window from which you can
> copy-and-paste relevant information for us.
>
> -- Siep Kroonenberg

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180628/07f6a782/attachment.html>

From cursus.publicus at sacrumromanumimperium.org  Thu Jun 28 19:20:34 2018
From: cursus.publicus at sacrumromanumimperium.org (Andreas Hirsch)
Date: Thu, 28 Jun 2018 19:20:34 +0200
Subject: [tex-live] Texlive 2018 unable to install
In-Reply-To: <0AD98B7C246F6B4FB1A95C83C8537F1B013678B7@exch2010n1>
References: <0AD98B7C246F6B4FB1A95C83C8537F1B013678B7@exch2010n1>
Message-ID: <dd295a94-f672-ce93-091e-c727df1fe25d@sacrumromanumimperium.org>

Hi,

Punit Kumar Dubey schrieb am 2018-06-28 um 18:37:
> Hi Team,
> 
> Still waiting your response.

Of course, I'm not able to speak for anyone else on the list, but for me
your description of your problem is absolutely insufficient for giving
any help.

Andreas

> From: Punit Kumar Dubey
> Sent: Wednesday, June 27, 2018 8:54 PM
> To: 'texlive at tug.org'
> Cc: Shamshad Ali; Ravi Sharma; 'Siban Hashmi'
> Subject: Texlive 2018 unable to install
> 
> 
> HI team,
> 
> we are not able to install texlive2018 on system and please share texlive 2018 requirement .
> 
> [cid:image001.png at 01D40F2C.659A84B0]
> 
> 
> Regards,
> Punit Dubey
> Desktop Support Engineer | IT-Support
> Punit.dubey at aptaracorp.com<mailto:Punit.dubey at aptaracorp.com> | aptaracorp.com<http://www.aptaracorp.com/>
> O: +0120-7182424 x3461, 3462, 3469
> 
> 

-- 
'Zuviel und
 zuwenig Vertrauen
 sind Nachbarskinder.'
       Wilhelm Busch (1832-1908)

From josef.kleber at gmx.de  Fri Jun 29 13:05:20 2018
From: josef.kleber at gmx.de (Josef Kleber)
Date: Fri, 29 Jun 2018 13:05:20 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
Message-ID: <d7013ae6-5768-9bfe-402d-4dc058c1ae68@gmx.de>

Hi,

I just received a bug report about getmap.sty
(https://bitbucket.org/kleberj/getmap/issues/2/error-argument-of-write-has-an-extra).

I get a different error message, but I can reproduce the problem with
fully updated TL2018.

\documentclass[12pt]{article}
\usepackage{graphics}
\usepackage{getmap}
\begin{filecontents*}{muc.epl}
&path=weight:5|color:orange|enc:okydHa}peAXOHi at jANv@A at kJJmFAiDJuAHmDXcBb@cC?@gC^_DV}CJaCF{APaBVkBdAyEf at qC?@{B\aDSwB
\end{filecontents*}
\begin{document}
\getmap[file=muc, mode=gm,
        markers={&markers=size:mid|label:H|color:green|M?nchen, Hbf
                 &markers=label:S|color:yellow|Stachus, M?nchen
				 &markers=label:M|color:blue|Marienplatz, M?nchen},
	    pathfile={muc.epl}]{}
\includegraphics[width=10cm]{muc}
\end{document}

leads to:

C:\texlive\2018\bin\win32\runscript.tlu:815:
c:/texlive/2018/texmf-dist/scripts/getmap/getmapdl.lua:13: module
'socket.url' not found:
        no field package.preload['socket.url']
        [kpse lua searcher] file not found: 'socket.url'
        [kpse C searcher] file not found: 'socket.url'
        no file 'C:\texlive\2018\bin\win32\socket.dll'
        no file 'C:\texlive\2018\bin\win32\loadall.dll'
        no file '.\socket.dll'
)
Runaway argument?
width=10cm]{muc} \end {document}
! File ended while scanning use of \Gin at iii.
<inserted text>
                \par
<*> bug_getmap_1

Relevant code in getmapdl.lua (/scripts/getmap)

local http = require("socket.http");
local ltn12 = require("ltn12")
local url = require("socket.url")

So I guess socket.http and ltn12 are found, but no socket.url!

The MWE was taken from getmap doc and created in 2016 with TL2016. The
latest questions on tex.sx are from early 2018, so I guess everything
was fine with TL2017. I got a new laptop a few weeks ago, so I have only
TL2018 available for testing. Maybe someone with an older version can
test the MWE?

I've read a few weeks ago that the handling of scripts were changed in
TL2018 (Win only??). Could this be the source of the problem? Any other
idea?

Thanks,

Josef

From josef.kleber at gmx.de  Fri Jun 29 15:46:35 2018
From: josef.kleber at gmx.de (Josef Kleber)
Date: Fri, 29 Jun 2018 15:46:35 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <d7013ae6-5768-9bfe-402d-4dc058c1ae68@gmx.de>
References: <d7013ae6-5768-9bfe-402d-4dc058c1ae68@gmx.de>
Message-ID: <42accd07-5fc4-e4fd-59b9-f6158bb7974d@gmx.de>

Am 29.06.2018 um 13:05 schrieb Josef Kleber:
> 
> Relevant code in getmapdl.lua (/scripts/getmap)
> 
> local http = require("socket.http");
> local ltn12 = require("ltn12")
> local url = require("socket.url")
> 
> So I guess socket.http and ltn12 are found, but no socket.url!
> 

If I use getmapdl.lua with Cygwin's 'lua' (I had to install the lua
socket module), then the script works without problem.


$ lua getmapdl.lua -m gm -l 'Stachus, M?nchen' -o muc -i png


WARNING: ZOOM not specified; using ZOOM=17 as default!
WARNING: XSIZE not specified; using XSIZE=600 as default!
WARNING: YSIZE not specified; using YSIZE=400 as default!
WARNING: SCALE not specified, using SCALE=1 as default!
WARNING: TYPE not specified; using roadmap as default!
WARNING: COLOR not specified; using blue as default!
WARNING: NUMBER not specified; using 1 as default!


getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=Stachus%2c%20M%c3%bcnchen&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Stachus%2c%20M%c3%bcnchen&maptype=roadmap&scale=1&format=png&sensor=false
url length = 209 bytes
output = muc.png


The downloaded png is ok.

So it seems there is a bug in luatex, missing some parts of the socket
module, at least socket.url!

Josef

From news3 at nililand.de  Fri Jun 29 16:46:04 2018
From: news3 at nililand.de (Ulrike Fischer)
Date: Fri, 29 Jun 2018 16:46:04 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
References: <d7013ae6-5768-9bfe-402d-4dc058c1ae68@gmx.de>
 <42accd07-5fc4-e4fd-59b9-f6158bb7974d@gmx.de>
Message-ID: <19zej3eclytlk.dlg@nililand.de>

Am Fri, 29 Jun 2018 15:46:35 +0200 schrieb Josef Kleber:

> Am 29.06.2018 um 13:05 schrieb Josef Kleber:
>> 
>> Relevant code in getmapdl.lua (/scripts/getmap)
>> 
>> local http = require("socket.http");
>> local ltn12 = require("ltn12")
>> local url = require("socket.url")
>> 
>> So I guess socket.http and ltn12 are found, but no socket.url!

It is rather curious. It looks as if one can use 
local url=socket.url 
 but not 
local url=require("socket.url")
while 
local http=require("socket.http") works ok.

But with luatex 1.08 it seems to work again. 

-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From josef.kleber at gmx.de  Fri Jun 29 18:11:29 2018
From: josef.kleber at gmx.de (Josef Kleber)
Date: Fri, 29 Jun 2018 18:11:29 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <19zej3eclytlk.dlg@nililand.de>
References: <d7013ae6-5768-9bfe-402d-4dc058c1ae68@gmx.de>
 <42accd07-5fc4-e4fd-59b9-f6158bb7974d@gmx.de> <19zej3eclytlk.dlg@nililand.de>
Message-ID: <c2c1da00-677b-0558-eec7-05c6939a11ec@gmx.de>

Am 29.06.2018 um 16:46 schrieb Ulrike Fischer:
> Am Fri, 29 Jun 2018 15:46:35 +0200 schrieb Josef Kleber:
> 
>> Am 29.06.2018 um 13:05 schrieb Josef Kleber:
>>>
>>> Relevant code in getmapdl.lua (/scripts/getmap)
>>>
>>> local http = require("socket.http");
>>> local ltn12 = require("ltn12")
>>> local url = require("socket.url")
>>>
>>> So I guess socket.http and ltn12 are found, but no socket.url!
> 
> It is rather curious. It looks as if one can use 
> local url=socket.url 

Some day I wanna see your crystal ball! ;-) But that's a workaround at best.

>  but not 
> local url=require("socket.url")
> while 
> local http=require("socket.http") works ok.
> 
> But with luatex 1.08 it seems to work again. 
> 

Strangely, it also works with texlua and texlua53 both v1.07 as in TL2018

jk at HP-kleberj /cygdrive/c/texlive/2018/texmf-dist/scripts/getmap
$ texlua getmapdl.lua -m gm -l 'Brandenburger Tor, Berlin' -o berlin -i png


WARNING: ZOOM not specified; using ZOOM=17 as default!
WARNING: XSIZE not specified; using XSIZE=600 as default!
WARNING: YSIZE not specified; using YSIZE=400 as default!
WARNING: SCALE not specified, using SCALE=1 as default!
WARNING: TYPE not specified; using roadmap as default!
WARNING: COLOR not specified; using blue as default!
WARNING: NUMBER not specified; using 1 as default!


getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=Brandenburger%20Tor%2c%20Berlin&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Brandenburger%20Tor%2c%20Berlin&maptype=roadmap&scale=1&format=png&sensor=false
url length = 221 bytes
output = berlin.png

jk at HP-kleberj /cygdrive/c/texlive/2018/texmf-dist/scripts/getmap
$ texlua53 getmapdl.lua -m gm -l 'Brandenburger Tor, Berlin' -o berlin2
-i png


WARNING: ZOOM not specified; using ZOOM=17 as default!
WARNING: XSIZE not specified; using XSIZE=600 as default!
WARNING: YSIZE not specified; using YSIZE=400 as default!
WARNING: SCALE not specified, using SCALE=1 as default!
WARNING: TYPE not specified; using roadmap as default!
WARNING: COLOR not specified; using blue as default!
WARNING: NUMBER not specified; using 1 as default!


getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=Brandenburger%20Tor%2c%20Berlin&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Brandenburger%20Tor%2c%20Berlin&maptype=roadmap&scale=1&format=png&sensor=false
url length = 221 bytes
output = berlin2.png

There's *something* broken.

Josef

From josef.kleber at gmx.de  Fri Jun 29 19:04:24 2018
From: josef.kleber at gmx.de (Josef Kleber)
Date: Fri, 29 Jun 2018 19:04:24 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <c2c1da00-677b-0558-eec7-05c6939a11ec@gmx.de>
References: <d7013ae6-5768-9bfe-402d-4dc058c1ae68@gmx.de>
 <42accd07-5fc4-e4fd-59b9-f6158bb7974d@gmx.de> <19zej3eclytlk.dlg@nililand.de>
 <c2c1da00-677b-0558-eec7-05c6939a11ec@gmx.de>
Message-ID: <4d5bf119-a687-3b35-caa0-a6ff7b4e400a@gmx.de>

Am 29.06.2018 um 18:11 schrieb Josef Kleber:
> Am 29.06.2018 um 16:46 schrieb Ulrike Fischer:
>> Am Fri, 29 Jun 2018 15:46:35 +0200 schrieb Josef Kleber:
>>
>>> Am 29.06.2018 um 13:05 schrieb Josef Kleber:
>>>>
>>>> Relevant code in getmapdl.lua (/scripts/getmap)
>>>>
>>>> local http = require("socket.http");
>>>> local ltn12 = require("ltn12")
>>>> local url = require("socket.url")
>>>>
>>>> So I guess socket.http and ltn12 are found, but no socket.url!
>>
>> It is rather curious. It looks as if one can use 
>> local url=socket.url 
> 
> Some day I wanna see your crystal ball! ;-) But that's a workaround at best.
> 
>>  but not 
>> local url=require("socket.url")
>> while 
>> local http=require("socket.http") works ok.
>>
>> But with luatex 1.08 it seems to work again. 
>>
> 
> Strangely, it also works with texlua and texlua53 both v1.07 as in TL2018
> 
> jk at HP-kleberj /cygdrive/c/texlive/2018/texmf-dist/scripts/getmap
> $ texlua getmapdl.lua -m gm -l 'Brandenburger Tor, Berlin' -o berlin -i png
> 
> 
> WARNING: ZOOM not specified; using ZOOM=17 as default!
> WARNING: XSIZE not specified; using XSIZE=600 as default!
> WARNING: YSIZE not specified; using YSIZE=400 as default!
> WARNING: SCALE not specified, using SCALE=1 as default!
> WARNING: TYPE not specified; using roadmap as default!
> WARNING: COLOR not specified; using blue as default!
> WARNING: NUMBER not specified; using 1 as default!
> 
> 
> getmapdl.lua:
> url =
> http://maps.googleapis.com/maps/api/staticmap?center=Brandenburger%20Tor%2c%20Berlin&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Brandenburger%20Tor%2c%20Berlin&maptype=roadmap&scale=1&format=png&sensor=false
> url length = 221 bytes
> output = berlin.png
> 
> jk at HP-kleberj /cygdrive/c/texlive/2018/texmf-dist/scripts/getmap
> $ texlua53 getmapdl.lua -m gm -l 'Brandenburger Tor, Berlin' -o berlin2
> -i png
> 
> 
> WARNING: ZOOM not specified; using ZOOM=17 as default!
> WARNING: XSIZE not specified; using XSIZE=600 as default!
> WARNING: YSIZE not specified; using YSIZE=400 as default!
> WARNING: SCALE not specified, using SCALE=1 as default!
> WARNING: TYPE not specified; using roadmap as default!
> WARNING: COLOR not specified; using blue as default!
> WARNING: NUMBER not specified; using 1 as default!
> 
> 
> getmapdl.lua:
> url =
> http://maps.googleapis.com/maps/api/staticmap?center=Brandenburger%20Tor%2c%20Berlin&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Brandenburger%20Tor%2c%20Berlin&maptype=roadmap&scale=1&format=png&sensor=false
> url length = 221 bytes
> output = berlin2.png
> 

Sorry for the noise. That only worked because I changed getmapdl.lua in
the way Ulrike suggested.

From imap.jk at kleberj.de  Fri Jun 29 18:49:47 2018
From: imap.jk at kleberj.de (Josef Kleber)
Date: Fri, 29 Jun 2018 18:49:47 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <c2c1da00-677b-0558-eec7-05c6939a11ec@gmx.de>
References: <d7013ae6-5768-9bfe-402d-4dc058c1ae68@gmx.de>
 <42accd07-5fc4-e4fd-59b9-f6158bb7974d@gmx.de> <19zej3eclytlk.dlg@nililand.de>
 <c2c1da00-677b-0558-eec7-05c6939a11ec@gmx.de>
Message-ID: <1b9b24f3-c6ab-39d9-58b7-25ac194e1637@kleberj.de>

Am 29.06.2018 um 18:11 schrieb Josef Kleber:
> Am 29.06.2018 um 16:46 schrieb Ulrike Fischer:
>> Am Fri, 29 Jun 2018 15:46:35 +0200 schrieb Josef Kleber:
>>
>>> Am 29.06.2018 um 13:05 schrieb Josef Kleber:
>>>>
>>>> Relevant code in getmapdl.lua (/scripts/getmap)
>>>>
>>>> local http = require("socket.http");
>>>> local ltn12 = require("ltn12")
>>>> local url = require("socket.url")
>>>>
>>>> So I guess socket.http and ltn12 are found, but no socket.url!
>>
>> It is rather curious. It looks as if one can use 
>> local url=socket.url 
> 
> Some day I wanna see your crystal ball! ;-) But that's a workaround at best.
> 
>>  but not 
>> local url=require("socket.url")
>> while 
>> local http=require("socket.http") works ok.
>>
>> But with luatex 1.08 it seems to work again. 
>>
> 
> Strangely, it also works with texlua and texlua53 both v1.07 as in TL2018
> 
> jk at HP-kleberj /cygdrive/c/texlive/2018/texmf-dist/scripts/getmap
> $ texlua getmapdl.lua -m gm -l 'Brandenburger Tor, Berlin' -o berlin -i png
> 
> 
> WARNING: ZOOM not specified; using ZOOM=17 as default!
> WARNING: XSIZE not specified; using XSIZE=600 as default!
> WARNING: YSIZE not specified; using YSIZE=400 as default!
> WARNING: SCALE not specified, using SCALE=1 as default!
> WARNING: TYPE not specified; using roadmap as default!
> WARNING: COLOR not specified; using blue as default!
> WARNING: NUMBER not specified; using 1 as default!
> 
> 
> getmapdl.lua:
> url =
> http://maps.googleapis.com/maps/api/staticmap?center=Brandenburger%20Tor%2c%20Berlin&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Brandenburger%20Tor%2c%20Berlin&maptype=roadmap&scale=1&format=png&sensor=false
> url length = 221 bytes
> output = berlin.png
> 
> jk at HP-kleberj /cygdrive/c/texlive/2018/texmf-dist/scripts/getmap
> $ texlua53 getmapdl.lua -m gm -l 'Brandenburger Tor, Berlin' -o berlin2
> -i png
> 
> 
> WARNING: ZOOM not specified; using ZOOM=17 as default!
> WARNING: XSIZE not specified; using XSIZE=600 as default!
> WARNING: YSIZE not specified; using YSIZE=400 as default!
> WARNING: SCALE not specified, using SCALE=1 as default!
> WARNING: TYPE not specified; using roadmap as default!
> WARNING: COLOR not specified; using blue as default!
> WARNING: NUMBER not specified; using 1 as default!
> 
> 
> getmapdl.lua:
> url =
> http://maps.googleapis.com/maps/api/staticmap?center=Brandenburger%20Tor%2c%20Berlin&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Brandenburger%20Tor%2c%20Berlin&maptype=roadmap&scale=1&format=png&sensor=false
> url length = 221 bytes
> output = berlin2.png

Sorry for the noise. That only worked because I changed getmapdl.lua in
the way Ulrike suggested.

From imap.jk at kleberj.de  Fri Jun 29 18:56:37 2018
From: imap.jk at kleberj.de (Josef Kleber)
Date: Fri, 29 Jun 2018 18:56:37 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <c2c1da00-677b-0558-eec7-05c6939a11ec@gmx.de>
References: <d7013ae6-5768-9bfe-402d-4dc058c1ae68@gmx.de>
 <42accd07-5fc4-e4fd-59b9-f6158bb7974d@gmx.de> <19zej3eclytlk.dlg@nililand.de>
 <c2c1da00-677b-0558-eec7-05c6939a11ec@gmx.de>
Message-ID: <55779b7a-4531-c6a6-8eb6-14b0f3bde5b3@kleberj.de>

Am 29.06.2018 um 18:11 schrieb Josef Kleber:
> Am 29.06.2018 um 16:46 schrieb Ulrike Fischer:
>> Am Fri, 29 Jun 2018 15:46:35 +0200 schrieb Josef Kleber:
>>
>>> Am 29.06.2018 um 13:05 schrieb Josef Kleber:
>>>>
>>>> Relevant code in getmapdl.lua (/scripts/getmap)
>>>>
>>>> local http = require("socket.http");
>>>> local ltn12 = require("ltn12")
>>>> local url = require("socket.url")
>>>>
>>>> So I guess socket.http and ltn12 are found, but no socket.url!
>>
>> It is rather curious. It looks as if one can use 
>> local url=socket.url 
> 
> Some day I wanna see your crystal ball! ;-) But that's a workaround at best.
> 
>>  but not 
>> local url=require("socket.url")
>> while 
>> local http=require("socket.http") works ok.
>>
>> But with luatex 1.08 it seems to work again. 
>>
> 
> Strangely, it also works with texlua and texlua53 both v1.07 as in TL2018
> 
> jk at HP-kleberj /cygdrive/c/texlive/2018/texmf-dist/scripts/getmap
> $ texlua getmapdl.lua -m gm -l 'Brandenburger Tor, Berlin' -o berlin -i png
> 
> 
> WARNING: ZOOM not specified; using ZOOM=17 as default!
> WARNING: XSIZE not specified; using XSIZE=600 as default!
> WARNING: YSIZE not specified; using YSIZE=400 as default!
> WARNING: SCALE not specified, using SCALE=1 as default!
> WARNING: TYPE not specified; using roadmap as default!
> WARNING: COLOR not specified; using blue as default!
> WARNING: NUMBER not specified; using 1 as default!
> 
> 
> getmapdl.lua:
> url =
> http://maps.googleapis.com/maps/api/staticmap?center=Brandenburger%20Tor%2c%20Berlin&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Brandenburger%20Tor%2c%20Berlin&maptype=roadmap&scale=1&format=png&sensor=false
> url length = 221 bytes
> output = berlin.png
> 
> jk at HP-kleberj /cygdrive/c/texlive/2018/texmf-dist/scripts/getmap
> $ texlua53 getmapdl.lua -m gm -l 'Brandenburger Tor, Berlin' -o berlin2
> -i png
> 
> 
> WARNING: ZOOM not specified; using ZOOM=17 as default!
> WARNING: XSIZE not specified; using XSIZE=600 as default!
> WARNING: YSIZE not specified; using YSIZE=400 as default!
> WARNING: SCALE not specified, using SCALE=1 as default!
> WARNING: TYPE not specified; using roadmap as default!
> WARNING: COLOR not specified; using blue as default!
> WARNING: NUMBER not specified; using 1 as default!
> 
> 
> getmapdl.lua:
> url =
> http://maps.googleapis.com/maps/api/staticmap?center=Brandenburger%20Tor%2c%20Berlin&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Brandenburger%20Tor%2c%20Berlin&maptype=roadmap&scale=1&format=png&sensor=false
> url length = 221 bytes
> output = berlin2.png

Sorry for the noise. That only worked because I changed getmapdl.lua in
the way Ulrike suggested.

From lists at openlilylib.org  Sat Jun 30 09:22:13 2018
From: lists at openlilylib.org (Urs Liska)
Date: Sat, 30 Jun 2018 09:22:13 +0200
Subject: [tex-live] LaTeX suddenly stopped working (loop/memory leak?)
Message-ID: <795baa05-78a3-1d19-a270-0b302d24544d@openlilylib.org>

Hi,

yesterday my texlive installation (texlive-full on Debian Testing) 
stopped working all of a sudden. Unfortunately my day was so 
frustratingly fragmented that I can't recall what events immediately 
preceded the problem. There were a few things happening yesterday, but 
I'm not sure if they're related:

  * I had a major package update with apt (I'll copy the respective
    changes at the end of this message) but I'm 98% sure that this was
    hours before texlive stopped working.
  * Atom wreaked havoc eating up *all* memory including swap, freezing
    my computer. After I removed it and installed the latest version
    this seemed to have been fixed, though
  * At one point I was surprised that I had to log in after a break,
    when I *think* I only set the computer to standby.

So at one point my .tex documents weren't compiled anymore, with xxTeX 
seemingly hanging. First I thought it had to do with issues in my files, 
but the MWE behaves exactly the same:

 ? \documentclass{article}
 ? \begin{document}
 ? Test
 ? \end{document}

I tested this by invoking a ..tex while watching with htop.

1)

$ latex loop.tex
This is pdfTeX, Version 3.14159265-2.6-1.40.19 (TeX Live 2018/Debian) (preloaded format=latex)
  restricted \write18 enabled.
entering extended mode
(./loop.tex
LaTeX2e <2018-04-01> patch level 4
Babel <3.20> and hyphenation patterns for 84 language(s) loaded.

2)

$ lualatex loop.tex
This is LuaTeX, Version 1.07.0 (TeX Live 2018/Debian)
  restricted system commands enabled.
(./loop.tex

In both cases there is no further output on the console. The 
corresponding "latex" or "lualatex" permanently process consumes 100% of 
one CPU core, and memory continuously rises by ~ 6MB/sec - it looks like 
it would do so until there is no memory left. I canceled this after 1/2 GB.

When I stop the compilation with Ctrl-Z (message: "killed") the process 
stays alive, keeping all the memory it had at the end, but CPU dropping 
to zero. I can't kill the process with SIGTERM, only after a SIGKILL it 
disappears.

###

Is there any way I can proceed investigating what could have gotten 
wrong here?

TIA
Urs

PS: After describing this process I have the impression that Atom wasn't 
at fault at all but that this already was LaTeX giving problems. So 
maybe the memory leak was already there while I still could compile .tex 
documents?

PPS: Here are the related changes in the apt upgrade from yesterday (as 
recorded by etckeeper):

$ sudo git log -n 1 | grep tex
 ??? -fonts-texgyre 20160520-1 all
 ??? +fonts-texgyre 20180621-1 all
 ??? -ktexteditor-data 5.45.0-1 all
 ??? -ktexteditor-katepart 5.45.0-1 amd64
 ??? +ktexteditor-data 5.46.0-1 all
 ??? +ktexteditor-katepart 5.46.0-1 amd64
 ??? -latexmk 1:4.41-1 all
 ??? +latexmk 1:4.56-0.1 all
 ??? -libkf5texteditor-bin 5.45.0-1 amd64
 ??? -libkf5texteditor5 5.45.0-1 amd64
 ??? -libkf5textwidgets-data 5.45.0-2 all
 ??? -libkf5textwidgets5 5.45.0-2 amd64
 ??? +libkf5texteditor-bin 5.46.0-1 amd64
 ??? +libkf5texteditor5 5.46.0-1 amd64
 ??? +libkf5textwidgets-data 5.46.0-1 all
 ??? +libkf5textwidgets5 5.46.0-1 amd64
 ??? -libptexenc1 2018.20180416.47457-3+b1 amd64
 ??? +libptexenc1 2018.20180416.47457-4 amd64
 ??? -libsynctex2 2018.20180416.47457-3+b1 amd64
 ??? +libsynctex2 2018.20180416.47457-4 amd64
 ??? -libtexlua52 2018.20180416.47457-3+b1 amd64
 ??? -libtexlua53 2018.20180416.47457-3+b1 amd64
 ??? -libtexluajit2 2018.20180416.47457-3+b1 amd64
 ??? +libtexlua52 2018.20180416.47457-4 amd64
 ??? +libtexlua53 2018.20180416.47457-4 amd64
 ??? +libtexluajit2 2018.20180416.47457-4 amd64
 ??? -tex-gyre 20160520-1 all
 ??? +tex-gyre 20180621-1 all
 ??? -texinfo 6.5.0.dfsg.1-2+b1 amd64
 ??? +texinfo 6.5.0.dfsg.1-3 amd64
 ??? -texlive-binaries 2018.20180416.47457-3+b1 amd64
 ??? +texlive-binaries 2018.20180416.47457-4 amd64
 ??? -texstudio 2.12.8+debian-1 amd64
 ??? -texstudio-doc 2.12.8+debian-1 all
 ??? -texstudio-l10n 2.12.8+debian-1 all
 ??? +texstudio 2.12.8+debian-2 amd64
 ??? +texstudio-doc 2.12.8+debian-2 all
 ??? +texstudio-l10n 2.12.8+debian-2 all

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180630/f5fc4aad/attachment.html>

From news3 at nililand.de  Sat Jun 30 12:09:59 2018
From: news3 at nililand.de (Ulrike Fischer)
Date: Sat, 30 Jun 2018 12:09:59 +0200
Subject: [tex-live] LaTeX suddenly stopped working (loop/memory leak?)
References: <795baa05-78a3-1d19-a270-0b302d24544d@openlilylib.org>
Message-ID: <hjqx07f9af95.dlg@nililand.de>

Am Sat, 30 Jun 2018 09:22:13 +0200 schrieb Urs Liska:


> LaTeX2e <2018-04-01> patch level 4

> In both cases there is no further output on the console. 

Did you try to recreate the formats? Did you try to update (patch
level 4 is not the newest latex)? Did you try a plain tex document?

-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From lists at openlilylib.org  Sat Jun 30 12:21:16 2018
From: lists at openlilylib.org (Urs Liska)
Date: Sat, 30 Jun 2018 12:21:16 +0200
Subject: [tex-live] LaTeX suddenly stopped working (loop/memory leak?)
In-Reply-To: <hjqx07f9af95.dlg@nililand.de>
References: <795baa05-78a3-1d19-a270-0b302d24544d@openlilylib.org>
 <hjqx07f9af95.dlg@nililand.de>
Message-ID: <e6f9e4c3-0bc8-d4ec-0b70-3b1d4a738fa9@openlilylib.org>



Am 30.06.2018 um 12:09 schrieb Ulrike Fischer:
> Am Sat, 30 Jun 2018 09:22:13 +0200 schrieb Urs Liska:
>
>
>> LaTeX2e <2018-04-01> patch level 4
>> In both cases there is no further output on the console.
> Did you try to recreate the formats?

No, because I don't have any idea what that means.

>   Did you try to update (patch
> level 4 is not the newest latex)?

I have texlive-full on Debian Testing, and what I have is the latest 
from the repositories. I'm not inclined to meddle around with that.

> Did you try a plain tex document?
>
I hadn't (I've never used plain TeX until now). Now I did (copying a 
document from the web), and it *did* produce a document.

Does this give any further indications? Is there something wrong with 
the current packages in Debian? (But then I'd suppose more impact on 
many users ...)

Urs


From news3 at nililand.de  Sat Jun 30 12:36:38 2018
From: news3 at nililand.de (Ulrike Fischer)
Date: Sat, 30 Jun 2018 12:36:38 +0200
Subject: [tex-live] LaTeX suddenly stopped working (loop/memory leak?)
References: <795baa05-78a3-1d19-a270-0b302d24544d@openlilylib.org>
 <hjqx07f9af95.dlg@nililand.de>
 <e6f9e4c3-0bc8-d4ec-0b70-3b1d4a738fa9@openlilylib.org>
Message-ID: <1ty0rs18k4rax.dlg@nililand.de>

Am Sat, 30 Jun 2018 12:21:16 +0200 schrieb Urs Liska:

>> Did you try to recreate the formats?
> 
> No, because I don't have any idea what that means.

Then run 

fmtutil-sys --refresh 

or something like this. 

-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From lists at openlilylib.org  Sat Jun 30 12:59:14 2018
From: lists at openlilylib.org (Urs Liska)
Date: Sat, 30 Jun 2018 12:59:14 +0200
Subject: [tex-live] LaTeX suddenly stopped working (loop/memory leak?)
In-Reply-To: <1ty0rs18k4rax.dlg@nililand.de>
References: <795baa05-78a3-1d19-a270-0b302d24544d@openlilylib.org>
 <hjqx07f9af95.dlg@nililand.de>
 <e6f9e4c3-0bc8-d4ec-0b70-3b1d4a738fa9@openlilylib.org>
 <1ty0rs18k4rax.dlg@nililand.de>
Message-ID: <84771466-eeea-6165-4e85-1172c7fe9bff@openlilylib.org>



Am 30.06.2018 um 12:36 schrieb Ulrike Fischer:
> Am Sat, 30 Jun 2018 12:21:16 +0200 schrieb Urs Liska:
>
>>> Did you try to recreate the formats?
>> No, because I don't have any idea what that means.
> Then run
>
> fmtutil-sys --refresh
>
> or something like this.
>

After looking at the manpage I issued this with sudo.
The end of the output is

fmtutil [INFO]: /var/lib/texmf/web2c/aleph/lamed.fmt installed.
fmtutil [ERROR]: running `euptex -ini?? -jobname=euptex -progname=euptex 
*euptex.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `tex -ini?? -jobname=tex -progname=tex tex.ini 
</dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `luatex -ini?? -jobname=luatex -progname=luatex 
luatex.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `xetex -ini?? -jobname=xetex -progname=xetex 
-etex xetex.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `ptex -ini?? -jobname=ptex -progname=ptex 
ptex.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `eptex -ini?? -jobname=eptex -progname=eptex 
*eptex.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `uptex -ini?? -jobname=uptex -progname=uptex 
uptex.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `aleph -ini?? -jobname=aleph -progname=aleph 
*aleph.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdftex -progname=pdftex 
-translate-file=cp227.tcx *pdfetex.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfmex -progname=pdfmex 
-translate-file=cp227.tcx *pdfmex.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `pdftex -ini?? -jobname=amstex -progname=amstex 
-translate-file=cp227.tcx *amstex.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `pdftex -ini?? -jobname=mex -progname=mex 
-translate-file=cp227.tcx *mex.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `pdftex -ini?? -jobname=texsis -progname=texsis 
-translate-file=cp227.tcx texsis.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `pdftex -ini?? -jobname=csplain 
-progname=csplain -etex -enc csplain-utf8.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfetex 
-progname=pdfetex -translate-file=cp227.tcx *pdfetex.ini </dev/null' 
return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `xetex -ini?? -jobname=pdfcsplain 
-progname=pdfcsplain -etex csplain.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `luatex -ini?? -jobname=pdfcsplain 
-progname=pdfcsplain -etex csplain.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfcsplain 
-progname=pdfcsplain -etex -enc csplain-utf8.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `pdftex -ini?? -jobname=mltex -progname=mltex 
-translate-file=cp227.tcx -mltex mltex.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `pdftex -ini?? -jobname=etex -progname=etex 
-translate-file=cp227.tcx *etex.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `luatex -ini?? -jobname=dviluatex 
-progname=dviluatex dviluatex.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `pdftex -ini?? -jobname=mptopdf 
-progname=context -translate-file=cp227.tcx mptopdf.tex </dev/null' 
return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `pdftex -ini?? -jobname=eplain -progname=eplain 
-translate-file=cp227.tcx *eplain.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [ERROR]: running `pdftex -ini?? -jobname=utf8mex 
-progname=utf8mex -enc *utf8mex.ini </dev/null' return status 1
fmtutil [ERROR]: return error due to options --strict
fmtutil [INFO]: Disabled formats: 3
fmtutil [INFO]: Successfully rebuilt formats: 19
fmtutil [INFO]: Failed to build: 24 (euptex/euptex tex/tex luatex/luatex 
xetex/xetex ptex/ptex eptex/eptex uptex/uptex aleph/aleph pdftex/pdftex 
pdftex/pdfmex pdftex/amstex pdftex/mex pdftex/texsis pdftex/csplain 
pdftex/pdfetex xetex/pdfcsplain luatex/pdfcsplain pdftex/pdfcsplain 
pdftex/mltex pdftex/etex luatex/dviluatex pdftex/mptopdf pdftex/eplain 
pdftex/utf8mex)
fmtutil [INFO]: Total formats: 46
fmtutil [INFO]: exiting with status 24

which seems to indicate a lot of problems...

From lists at openlilylib.org  Sat Jun 30 13:20:53 2018
From: lists at openlilylib.org (Urs Liska)
Date: Sat, 30 Jun 2018 13:20:53 +0200
Subject: [tex-live] LaTeX suddenly stopped working (loop/memory leak?)
In-Reply-To: <84771466-eeea-6165-4e85-1172c7fe9bff@openlilylib.org>
References: <795baa05-78a3-1d19-a270-0b302d24544d@openlilylib.org>
 <hjqx07f9af95.dlg@nililand.de>
 <e6f9e4c3-0bc8-d4ec-0b70-3b1d4a738fa9@openlilylib.org>
 <1ty0rs18k4rax.dlg@nililand.de>
 <84771466-eeea-6165-4e85-1172c7fe9bff@openlilylib.org>
Message-ID: <1a3b58c6-95a8-353c-f1b0-11da6f971eac@openlilylib.org>



Am 30.06.2018 um 12:59 schrieb Urs Liska:
>
>
> Am 30.06.2018 um 12:36 schrieb Ulrike Fischer:
>> Am Sat, 30 Jun 2018 12:21:16 +0200 schrieb Urs Liska:
>>
>>>> Did you try to recreate the formats?
>>> No, because I don't have any idea what that means.
>> Then run
>>
>> fmtutil-sys --refresh
>>
>> or something like this.
>>
>
> After looking at the manpage I issued this with sudo.
> The end of the output is
>
> fmtutil [INFO]: /var/lib/texmf/web2c/aleph/lamed.fmt installed.
> fmtutil [ERROR]: running `euptex -ini?? -jobname=euptex 
> -progname=euptex *euptex.ini </dev/null' return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `tex -ini?? -jobname=tex -progname=tex 
> tex.ini </dev/null' return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `luatex -ini?? -jobname=luatex 
> -progname=luatex luatex.ini </dev/null' return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `xetex -ini?? -jobname=xetex -progname=xetex 
> -etex xetex.ini </dev/null' return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `ptex -ini?? -jobname=ptex -progname=ptex 
> ptex.ini </dev/null' return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `eptex -ini?? -jobname=eptex -progname=eptex 
> *eptex.ini </dev/null' return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `uptex -ini?? -jobname=uptex -progname=uptex 
> uptex.ini </dev/null' return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `aleph -ini?? -jobname=aleph -progname=aleph 
> *aleph.ini </dev/null' return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdftex 
> -progname=pdftex -translate-file=cp227.tcx *pdfetex.ini </dev/null' 
> return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfmex 
> -progname=pdfmex -translate-file=cp227.tcx *pdfmex.ini </dev/null' 
> return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `pdftex -ini?? -jobname=amstex 
> -progname=amstex -translate-file=cp227.tcx *amstex.ini </dev/null' 
> return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `pdftex -ini?? -jobname=mex -progname=mex 
> -translate-file=cp227.tcx *mex.ini </dev/null' return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `pdftex -ini?? -jobname=texsis 
> -progname=texsis -translate-file=cp227.tcx texsis.ini </dev/null' 
> return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `pdftex -ini?? -jobname=csplain 
> -progname=csplain -etex -enc csplain-utf8.ini </dev/null' return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfetex 
> -progname=pdfetex -translate-file=cp227.tcx *pdfetex.ini </dev/null' 
> return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `xetex -ini?? -jobname=pdfcsplain 
> -progname=pdfcsplain -etex csplain.ini </dev/null' return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `luatex -ini?? -jobname=pdfcsplain 
> -progname=pdfcsplain -etex csplain.ini </dev/null' return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfcsplain 
> -progname=pdfcsplain -etex -enc csplain-utf8.ini </dev/null' return 
> status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `pdftex -ini?? -jobname=mltex -progname=mltex 
> -translate-file=cp227.tcx -mltex mltex.ini </dev/null' return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `pdftex -ini?? -jobname=etex -progname=etex 
> -translate-file=cp227.tcx *etex.ini </dev/null' return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `luatex -ini?? -jobname=dviluatex 
> -progname=dviluatex dviluatex.ini </dev/null' return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `pdftex -ini?? -jobname=mptopdf 
> -progname=context -translate-file=cp227.tcx mptopdf.tex </dev/null' 
> return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `pdftex -ini?? -jobname=eplain 
> -progname=eplain -translate-file=cp227.tcx *eplain.ini </dev/null' 
> return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [ERROR]: running `pdftex -ini?? -jobname=utf8mex 
> -progname=utf8mex -enc *utf8mex.ini </dev/null' return status 1
> fmtutil [ERROR]: return error due to options --strict
> fmtutil [INFO]: Disabled formats: 3
> fmtutil [INFO]: Successfully rebuilt formats: 19
> fmtutil [INFO]: Failed to build: 24 (euptex/euptex tex/tex 
> luatex/luatex xetex/xetex ptex/ptex eptex/eptex uptex/uptex 
> aleph/aleph pdftex/pdftex pdftex/pdfmex pdftex/amstex pdftex/mex 
> pdftex/texsis pdftex/csplain pdftex/pdfetex xetex/pdfcsplain 
> luatex/pdfcsplain pdftex/pdfcsplain pdftex/mltex pdftex/etex 
> luatex/dviluatex pdftex/mptopdf pdftex/eplain pdftex/utf8mex)
> fmtutil [INFO]: Total formats: 46
> fmtutil [INFO]: exiting with status 24
>
> which seems to indicate a lot of problems...

Hm, since it was time to make lunch anyway I decided to reinstall 
texlive-full, after cleaning up the system with apt purge and a number 
of reiterations of apt update, apt autoremove, apt purge etc.

Reinstalling texlive-full through apt resulted in exactly the same 
situation as before :-(

So do I have to assume that the current version of texlive 
(https://packages.debian.org/buster/texlive-full) is broken in Debian? I 
would find that rather strange ...

But still I'm not inclined to remove the package and install TL from its 
installer - first, that just can't be the solution and second, I need TL 
from the packages as part of some others' dependencies (the LilyPond 
build system).

So is there anything left for me to do?

Thanks
Urs

From news3 at nililand.de  Sat Jun 30 13:30:35 2018
From: news3 at nililand.de (Ulrike Fischer)
Date: Sat, 30 Jun 2018 13:30:35 +0200
Subject: [tex-live] LaTeX suddenly stopped working (loop/memory leak?)
References: <795baa05-78a3-1d19-a270-0b302d24544d@openlilylib.org>
 <hjqx07f9af95.dlg@nililand.de>
 <e6f9e4c3-0bc8-d4ec-0b70-3b1d4a738fa9@openlilylib.org>
 <1ty0rs18k4rax.dlg@nililand.de>
 <84771466-eeea-6165-4e85-1172c7fe9bff@openlilylib.org>
 <1a3b58c6-95a8-353c-f1b0-11da6f971eac@openlilylib.org>
Message-ID: <6yvnskkc63ik$.dlg@nililand.de>

Am Sat, 30 Jun 2018 13:20:53 +0200 schrieb Urs Liska:

> So is there anything left for me to do?

latex isn't in the list of format failures. Did you check if it
works again?


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From lists at openlilylib.org  Sat Jun 30 13:37:34 2018
From: lists at openlilylib.org (Urs Liska)
Date: Sat, 30 Jun 2018 13:37:34 +0200
Subject: [tex-live] LaTeX suddenly stopped working (loop/memory leak?)
In-Reply-To: <6yvnskkc63ik$.dlg@nililand.de>
References: <795baa05-78a3-1d19-a270-0b302d24544d@openlilylib.org>
 <hjqx07f9af95.dlg@nililand.de>
 <e6f9e4c3-0bc8-d4ec-0b70-3b1d4a738fa9@openlilylib.org>
 <1ty0rs18k4rax.dlg@nililand.de>
 <84771466-eeea-6165-4e85-1172c7fe9bff@openlilylib.org>
 <1a3b58c6-95a8-353c-f1b0-11da6f971eac@openlilylib.org>
 <6yvnskkc63ik$.dlg@nililand.de>
Message-ID: <0eed9d97-8020-82f8-64fd-bf354e1c4243@openlilylib.org>



Am 30.06.2018 um 13:30 schrieb Ulrike Fischer:
> Am Sat, 30 Jun 2018 13:20:53 +0200 schrieb Urs Liska:
>
>> So is there anything left for me to do?
> latex isn't in the list of format failures. Did you check if it
> works again?
>

Yes, I checked, no it doesn't work (i.e. the original state of when I 
reported first).
OTOH, tex *is* in the list of format failures, yet it *does* work.

From mikey at werzowa.at  Sat Jun 30 13:06:11 2018
From: mikey at werzowa.at (Michael Werzowa)
Date: Sat, 30 Jun 2018 13:06:11 +0200
Subject: [tex-live] texlive error when tlmgr update --all
Message-ID: <A22C5053-DDD0-493F-9536-92DA95C54245@werzowa.at>

Dear texlive support!

Problem when trying tu update TeXLive/MacTeX on my System ? two days ago everything was fine.

Error report:

Michaels-MacBook-Pro:~ mikey$ sudo tlmgr update --all
Password:
tlmgr: verification of checksum for http://mirror.easyname.at/ctan/systems/texlive/tlnet failed: cryptographic signature verification of
  /tmp/ekIWK0gC1w/r4iavevF0m
against
  http://mirror.easyname.at/ctan/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc
failed. Output was
gpg: no valid OpenPGP data found.
gpg: the signature could not be verified.
Please remember that the signature file (.sig or .asc)
should be the first file given on the command line.

Please report to texlive at tug.org

Best,
Michael

--
*******************************************************************
Michael Werzowa
A-1180 Wien, Alsegger Str 9
+43 664 302 4511,  fax +43 810 9554 185931
mikey at werzowa.at
*******************************************************************






-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180630/5d67dfe8/attachment-0001.html>

From kakuto at fuk.kindai.ac.jp  Sat Jun 30 15:31:15 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Sat, 30 Jun 2018 22:31:15 +0900
Subject: [tex-live]  Lua module 'socket.url' loading problem with getmap
In-Reply-To: <201806242150.w5OLolos019690@freefriends.org>
References: <201806242150.w5OLolos019690@freefriends.org>
Message-ID: <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>

Dear Josef,

> I get a different error message, but I can reproduce the problem with
> fully updated TL2018.

An attached getmaptest.zip
contains

runscript.tlu

lua/ltn12.lua
lua/mime.lua
lua/socket.lua

lua/socket/ftp.lua
lua/socket/headers.lua
lua/socket/http.lua
lua/socket/smtp.lua
lua/socket/tp.lua
lua/socket/url.lua

After saving the original runscript.tlu,
please copy all these 10 files in bin/win32,
by preserving the directory structure.

Here
getmapdl -m gm -l 'Stachus, Munchen' -o muc -i png
works with the above.

Thanks,
Akira
-------------- next part --------------
A non-text attachment was scrubbed...
Name: getmaptest.zip
Type: application/x-zip-compressed
Size: 31528 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180630/782f30a2/attachment-0001.bin>

From preining at logic.at  Sat Jun 30 15:41:01 2018
From: preining at logic.at (Norbert Preining)
Date: Sat, 30 Jun 2018 15:41:01 +0200
Subject: [tex-live] LaTeX suddenly stopped working (loop/memory leak?)
In-Reply-To: <1a3b58c6-95a8-353c-f1b0-11da6f971eac@openlilylib.org>
References: <795baa05-78a3-1d19-a270-0b302d24544d@openlilylib.org>
 <hjqx07f9af95.dlg@nililand.de>
 <e6f9e4c3-0bc8-d4ec-0b70-3b1d4a738fa9@openlilylib.org>
 <1ty0rs18k4rax.dlg@nililand.de>
 <84771466-eeea-6165-4e85-1172c7fe9bff@openlilylib.org>
 <1a3b58c6-95a8-353c-f1b0-11da6f971eac@openlilylib.org>
Message-ID: <C938C2DF-B762-4385-9377-518F6885B6B1@logic.at>

I can tell you that the packages in Debian are working correctly, it must be something special on your system.

>From what you wrote it sounds like you had an HD error, or memory that resulted in some corruption.

I'm currently out in the mountains and cannot help much more, but can you please send me the list of files in /etc/texmf/, and all environment variables you have set which might be trusted to TeX, and your path, and the output of which mktexlsr, and any further information.

Thanks

Norbert

PS, this is not a list to discuss Debian's TeX Live, please use debian-tex-maint at lists.debian.org or the BTS, thanks


On June 30, 2018 1:20:53 PM GMT+02:00, Urs Liska <lists at openlilylib.org> wrote:
>
>
>Am 30.06.2018 um 12:59 schrieb Urs Liska:
>>
>>
>> Am 30.06.2018 um 12:36 schrieb Ulrike Fischer:
>>> Am Sat, 30 Jun 2018 12:21:16 +0200 schrieb Urs Liska:
>>>
>>>>> Did you try to recreate the formats?
>>>> No, because I don't have any idea what that means.
>>> Then run
>>>
>>> fmtutil-sys --refresh
>>>
>>> or something like this.
>>>
>>
>> After looking at the manpage I issued this with sudo.
>> The end of the output is
>>
>> fmtutil [INFO]: /var/lib/texmf/web2c/aleph/lamed.fmt installed.
>> fmtutil [ERROR]: running `euptex -ini?? -jobname=euptex 
>> -progname=euptex *euptex.ini </dev/null' return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `tex -ini?? -jobname=tex -progname=tex 
>> tex.ini </dev/null' return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `luatex -ini?? -jobname=luatex 
>> -progname=luatex luatex.ini </dev/null' return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `xetex -ini?? -jobname=xetex -progname=xetex
>
>> -etex xetex.ini </dev/null' return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `ptex -ini?? -jobname=ptex -progname=ptex 
>> ptex.ini </dev/null' return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `eptex -ini?? -jobname=eptex -progname=eptex
>
>> *eptex.ini </dev/null' return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `uptex -ini?? -jobname=uptex -progname=uptex
>
>> uptex.ini </dev/null' return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `aleph -ini?? -jobname=aleph -progname=aleph
>
>> *aleph.ini </dev/null' return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdftex 
>> -progname=pdftex -translate-file=cp227.tcx *pdfetex.ini </dev/null' 
>> return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfmex 
>> -progname=pdfmex -translate-file=cp227.tcx *pdfmex.ini </dev/null' 
>> return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=amstex 
>> -progname=amstex -translate-file=cp227.tcx *amstex.ini </dev/null' 
>> return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=mex -progname=mex 
>> -translate-file=cp227.tcx *mex.ini </dev/null' return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=texsis 
>> -progname=texsis -translate-file=cp227.tcx texsis.ini </dev/null' 
>> return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=csplain 
>> -progname=csplain -etex -enc csplain-utf8.ini </dev/null' return
>status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfetex 
>> -progname=pdfetex -translate-file=cp227.tcx *pdfetex.ini </dev/null' 
>> return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `xetex -ini?? -jobname=pdfcsplain 
>> -progname=pdfcsplain -etex csplain.ini </dev/null' return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `luatex -ini?? -jobname=pdfcsplain 
>> -progname=pdfcsplain -etex csplain.ini </dev/null' return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfcsplain 
>> -progname=pdfcsplain -etex -enc csplain-utf8.ini </dev/null' return 
>> status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=mltex
>-progname=mltex 
>> -translate-file=cp227.tcx -mltex mltex.ini </dev/null' return status
>1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=etex -progname=etex 
>> -translate-file=cp227.tcx *etex.ini </dev/null' return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `luatex -ini?? -jobname=dviluatex 
>> -progname=dviluatex dviluatex.ini </dev/null' return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=mptopdf 
>> -progname=context -translate-file=cp227.tcx mptopdf.tex </dev/null' 
>> return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=eplain 
>> -progname=eplain -translate-file=cp227.tcx *eplain.ini </dev/null' 
>> return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=utf8mex 
>> -progname=utf8mex -enc *utf8mex.ini </dev/null' return status 1
>> fmtutil [ERROR]: return error due to options --strict
>> fmtutil [INFO]: Disabled formats: 3
>> fmtutil [INFO]: Successfully rebuilt formats: 19
>> fmtutil [INFO]: Failed to build: 24 (euptex/euptex tex/tex 
>> luatex/luatex xetex/xetex ptex/ptex eptex/eptex uptex/uptex 
>> aleph/aleph pdftex/pdftex pdftex/pdfmex pdftex/amstex pdftex/mex 
>> pdftex/texsis pdftex/csplain pdftex/pdfetex xetex/pdfcsplain 
>> luatex/pdfcsplain pdftex/pdfcsplain pdftex/mltex pdftex/etex 
>> luatex/dviluatex pdftex/mptopdf pdftex/eplain pdftex/utf8mex)
>> fmtutil [INFO]: Total formats: 46
>> fmtutil [INFO]: exiting with status 24
>>
>> which seems to indicate a lot of problems...
>
>Hm, since it was time to make lunch anyway I decided to reinstall 
>texlive-full, after cleaning up the system with apt purge and a number 
>of reiterations of apt update, apt autoremove, apt purge etc.
>
>Reinstalling texlive-full through apt resulted in exactly the same 
>situation as before :-(
>
>So do I have to assume that the current version of texlive 
>(https://packages.debian.org/buster/texlive-full) is broken in Debian?
>I 
>would find that rather strange ...
>
>But still I'm not inclined to remove the package and install TL from
>its 
>installer - first, that just can't be the solution and second, I need
>TL 
>from the packages as part of some others' dependencies (the LilyPond 
>build system).
>
>So is there anything left for me to do?
>
>Thanks
>Urs


--
PREINING Norbert http://www.preining.info
Accelia Inc. + JAIST + TeX Live + Debian Developer
GPG: 0x860CDC13 fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From lists at openlilylib.org  Sat Jun 30 16:36:32 2018
From: lists at openlilylib.org (Urs Liska)
Date: Sat, 30 Jun 2018 16:36:32 +0200
Subject: [tex-live] LaTeX suddenly stopped working (loop/memory leak?)
In-Reply-To: <C938C2DF-B762-4385-9377-518F6885B6B1@logic.at>
References: <795baa05-78a3-1d19-a270-0b302d24544d@openlilylib.org>
 <hjqx07f9af95.dlg@nililand.de>
 <e6f9e4c3-0bc8-d4ec-0b70-3b1d4a738fa9@openlilylib.org>
 <1ty0rs18k4rax.dlg@nililand.de>
 <84771466-eeea-6165-4e85-1172c7fe9bff@openlilylib.org>
 <1a3b58c6-95a8-353c-f1b0-11da6f971eac@openlilylib.org>
 <C938C2DF-B762-4385-9377-518F6885B6B1@logic.at>
Message-ID: <06ab14de-82dc-d186-0434-27702e1f2efc@openlilylib.org>

Hi Norbert,


Am 30.06.2018 um 15:41 schrieb Norbert Preining:
> I can tell you that the packages in Debian are working correctly, it must be something special on your system.

Thank you for confirming. I would have been very surprised about such a 
severe issue without anyone else running into it.

>
>  From what you wrote it sounds like you had an HD error, or memory that resulted in some corruption.

That makes some sense, and if it's true that I had an unjustified reboot 
that would point in that direction.
OTOH it would be strange if a complete reinstall wouldn't fix that.

>
> I'm currently out in the mountains and cannot help much more, but can you please send me the list of files in /etc/texmf/, and all environment variables you have set which might be trusted to TeX, and your path, and the output of which mktexlsr, and any further information.

$ tree /etc/texmf
/etc/texmf
??? dvipdfmx
??? dvips
??? ??? config
??? tex
??? ??? context
??? ??? ??? user
??? ???     ??? cont-sys.rme
??? ??? generic
???     ??? config
??? texdoctk
??? ??? texdocrc.defaults
??? texmf.d
??? ??? 00debian.cnf
??? web2c
     ??? mktex.cnf
     ??? texmf.cnf


I don't see any environment variables that seem to refer to TeX (I 
haven't set any)

$ echo $PATH
/home/uliska/git/lilypond/git-cl:/home/uliska/bin:/home/shared/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games

$ which mktexlsr
/usr/bin/mktexlsr


Hm, I have no further idea what to look for. Is there any way to make 
XXtex's output more verbose to get a better idea at what point it fails?

>
> Thanks
>
> Norbert
>
> PS, this is not a list to discuss Debian's TeX Live, please use debian-tex-maint at lists.debian.org or the BTS, thanks

Do you mean there shouldn't be questions/discussions about Debian 
specific issues with TeX Live, or is this list not the platform for 
*any* TeX Live questions that happen to occur with the Debian packages?

Thanks
Urs

>
>
> On June 30, 2018 1:20:53 PM GMT+02:00, Urs Liska <lists at openlilylib.org> wrote:
>>
>> Am 30.06.2018 um 12:59 schrieb Urs Liska:
>>>
>>> Am 30.06.2018 um 12:36 schrieb Ulrike Fischer:
>>>> Am Sat, 30 Jun 2018 12:21:16 +0200 schrieb Urs Liska:
>>>>
>>>>>> Did you try to recreate the formats?
>>>>> No, because I don't have any idea what that means.
>>>> Then run
>>>>
>>>> fmtutil-sys --refresh
>>>>
>>>> or something like this.
>>>>
>>> After looking at the manpage I issued this with sudo.
>>> The end of the output is
>>>
>>> fmtutil [INFO]: /var/lib/texmf/web2c/aleph/lamed.fmt installed.
>>> fmtutil [ERROR]: running `euptex -ini?? -jobname=euptex
>>> -progname=euptex *euptex.ini </dev/null' return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `tex -ini?? -jobname=tex -progname=tex
>>> tex.ini </dev/null' return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `luatex -ini?? -jobname=luatex
>>> -progname=luatex luatex.ini </dev/null' return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `xetex -ini?? -jobname=xetex -progname=xetex
>>> -etex xetex.ini </dev/null' return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `ptex -ini?? -jobname=ptex -progname=ptex
>>> ptex.ini </dev/null' return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `eptex -ini?? -jobname=eptex -progname=eptex
>>> *eptex.ini </dev/null' return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `uptex -ini?? -jobname=uptex -progname=uptex
>>> uptex.ini </dev/null' return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `aleph -ini?? -jobname=aleph -progname=aleph
>>> *aleph.ini </dev/null' return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdftex
>>> -progname=pdftex -translate-file=cp227.tcx *pdfetex.ini </dev/null'
>>> return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfmex
>>> -progname=pdfmex -translate-file=cp227.tcx *pdfmex.ini </dev/null'
>>> return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=amstex
>>> -progname=amstex -translate-file=cp227.tcx *amstex.ini </dev/null'
>>> return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=mex -progname=mex
>>> -translate-file=cp227.tcx *mex.ini </dev/null' return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=texsis
>>> -progname=texsis -translate-file=cp227.tcx texsis.ini </dev/null'
>>> return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=csplain
>>> -progname=csplain -etex -enc csplain-utf8.ini </dev/null' return
>> status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfetex
>>> -progname=pdfetex -translate-file=cp227.tcx *pdfetex.ini </dev/null'
>>> return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `xetex -ini?? -jobname=pdfcsplain
>>> -progname=pdfcsplain -etex csplain.ini </dev/null' return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `luatex -ini?? -jobname=pdfcsplain
>>> -progname=pdfcsplain -etex csplain.ini </dev/null' return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfcsplain
>>> -progname=pdfcsplain -etex -enc csplain-utf8.ini </dev/null' return
>>> status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=mltex
>> -progname=mltex
>>> -translate-file=cp227.tcx -mltex mltex.ini </dev/null' return status
>> 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=etex -progname=etex
>>> -translate-file=cp227.tcx *etex.ini </dev/null' return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `luatex -ini?? -jobname=dviluatex
>>> -progname=dviluatex dviluatex.ini </dev/null' return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=mptopdf
>>> -progname=context -translate-file=cp227.tcx mptopdf.tex </dev/null'
>>> return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=eplain
>>> -progname=eplain -translate-file=cp227.tcx *eplain.ini </dev/null'
>>> return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=utf8mex
>>> -progname=utf8mex -enc *utf8mex.ini </dev/null' return status 1
>>> fmtutil [ERROR]: return error due to options --strict
>>> fmtutil [INFO]: Disabled formats: 3
>>> fmtutil [INFO]: Successfully rebuilt formats: 19
>>> fmtutil [INFO]: Failed to build: 24 (euptex/euptex tex/tex
>>> luatex/luatex xetex/xetex ptex/ptex eptex/eptex uptex/uptex
>>> aleph/aleph pdftex/pdftex pdftex/pdfmex pdftex/amstex pdftex/mex
>>> pdftex/texsis pdftex/csplain pdftex/pdfetex xetex/pdfcsplain
>>> luatex/pdfcsplain pdftex/pdfcsplain pdftex/mltex pdftex/etex
>>> luatex/dviluatex pdftex/mptopdf pdftex/eplain pdftex/utf8mex)
>>> fmtutil [INFO]: Total formats: 46
>>> fmtutil [INFO]: exiting with status 24
>>>
>>> which seems to indicate a lot of problems...
>> Hm, since it was time to make lunch anyway I decided to reinstall
>> texlive-full, after cleaning up the system with apt purge and a number
>> of reiterations of apt update, apt autoremove, apt purge etc.
>>
>> Reinstalling texlive-full through apt resulted in exactly the same
>> situation as before :-(
>>
>> So do I have to assume that the current version of texlive
>> (https://packages.debian.org/buster/texlive-full) is broken in Debian?
>> I
>> would find that rather strange ...
>>
>> But still I'm not inclined to remove the package and install TL from
>> its
>> installer - first, that just can't be the solution and second, I need
>> TL
> >from the packages as part of some others' dependencies (the LilyPond 
>> build system).
>>
>> So is there anything left for me to do?
>>
>> Thanks
>> Urs
>
> --
> PREINING Norbert http://www.preining.info
> Accelia Inc. + JAIST + TeX Live + Debian Developer
> GPG: 0x860CDC13 fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From preining at logic.at  Sat Jun 30 16:45:39 2018
From: preining at logic.at (Norbert Preining)
Date: Sat, 30 Jun 2018 16:45:39 +0200
Subject: [tex-live] LaTeX suddenly stopped working (loop/memory leak?)
In-Reply-To: <06ab14de-82dc-d186-0434-27702e1f2efc@openlilylib.org>
References: <795baa05-78a3-1d19-a270-0b302d24544d@openlilylib.org>
 <hjqx07f9af95.dlg@nililand.de>
 <e6f9e4c3-0bc8-d4ec-0b70-3b1d4a738fa9@openlilylib.org>
 <1ty0rs18k4rax.dlg@nililand.de>
 <84771466-eeea-6165-4e85-1172c7fe9bff@openlilylib.org>
 <1a3b58c6-95a8-353c-f1b0-11da6f971eac@openlilylib.org>
 <C938C2DF-B762-4385-9377-518F6885B6B1@logic.at>
 <06ab14de-82dc-d186-0434-27702e1f2efc@openlilylib.org>
Message-ID: <A69D20B5-49E9-4102-8F6E-6DF171E2B176@logic.at>

Then please run 
  latex -kpsedebug +1 somefile.tex
And capture the debug output (2>foo.log)
Let it run a bit and then so it. The file will be big, please if possible put it not compressed somewhere online, I'm online on my mobile.

Thanks

Norbert

On June 30, 2018 4:36:32 PM GMT+02:00, Urs Liska <lists at openlilylib.org> wrote:
>Hi Norbert,
>
>
>Am 30.06.2018 um 15:41 schrieb Norbert Preining:
>> I can tell you that the packages in Debian are working correctly, it
>must be something special on your system.
>
>Thank you for confirming. I would have been very surprised about such a
>
>severe issue without anyone else running into it.
>
>>
>>  From what you wrote it sounds like you had an HD error, or memory
>that resulted in some corruption.
>
>That makes some sense, and if it's true that I had an unjustified
>reboot 
>that would point in that direction.
>OTOH it would be strange if a complete reinstall wouldn't fix that.
>
>>
>> I'm currently out in the mountains and cannot help much more, but can
>you please send me the list of files in /etc/texmf/, and all
>environment variables you have set which might be trusted to TeX, and
>your path, and the output of which mktexlsr, and any further
>information.
>
>$ tree /etc/texmf
>/etc/texmf
>??? dvipdfmx
>??? dvips
>??? ??? config
>??? tex
>??? ??? context
>??? ??? ??? user
>??? ???     ??? cont-sys.rme
>??? ??? generic
>???     ??? config
>??? texdoctk
>??? ??? texdocrc.defaults
>??? texmf.d
>??? ??? 00debian.cnf
>??? web2c
>     ??? mktex.cnf
>     ??? texmf.cnf
>
>
>I don't see any environment variables that seem to refer to TeX (I 
>haven't set any)
>
>$ echo $PATH
>/home/uliska/git/lilypond/git-cl:/home/uliska/bin:/home/shared/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
>
>$ which mktexlsr
>/usr/bin/mktexlsr
>
>
>Hm, I have no further idea what to look for. Is there any way to make 
>XXtex's output more verbose to get a better idea at what point it
>fails?
>
>>
>> Thanks
>>
>> Norbert
>>
>> PS, this is not a list to discuss Debian's TeX Live, please use
>debian-tex-maint at lists.debian.org or the BTS, thanks
>
>Do you mean there shouldn't be questions/discussions about Debian 
>specific issues with TeX Live, or is this list not the platform for 
>*any* TeX Live questions that happen to occur with the Debian packages?
>
>Thanks
>Urs
>
>>
>>
>> On June 30, 2018 1:20:53 PM GMT+02:00, Urs Liska
><lists at openlilylib.org> wrote:
>>>
>>> Am 30.06.2018 um 12:59 schrieb Urs Liska:
>>>>
>>>> Am 30.06.2018 um 12:36 schrieb Ulrike Fischer:
>>>>> Am Sat, 30 Jun 2018 12:21:16 +0200 schrieb Urs Liska:
>>>>>
>>>>>>> Did you try to recreate the formats?
>>>>>> No, because I don't have any idea what that means.
>>>>> Then run
>>>>>
>>>>> fmtutil-sys --refresh
>>>>>
>>>>> or something like this.
>>>>>
>>>> After looking at the manpage I issued this with sudo.
>>>> The end of the output is
>>>>
>>>> fmtutil [INFO]: /var/lib/texmf/web2c/aleph/lamed.fmt installed.
>>>> fmtutil [ERROR]: running `euptex -ini?? -jobname=euptex
>>>> -progname=euptex *euptex.ini </dev/null' return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `tex -ini?? -jobname=tex -progname=tex
>>>> tex.ini </dev/null' return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `luatex -ini?? -jobname=luatex
>>>> -progname=luatex luatex.ini </dev/null' return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `xetex -ini?? -jobname=xetex
>-progname=xetex
>>>> -etex xetex.ini </dev/null' return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `ptex -ini?? -jobname=ptex -progname=ptex
>>>> ptex.ini </dev/null' return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `eptex -ini?? -jobname=eptex
>-progname=eptex
>>>> *eptex.ini </dev/null' return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `uptex -ini?? -jobname=uptex
>-progname=uptex
>>>> uptex.ini </dev/null' return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `aleph -ini?? -jobname=aleph
>-progname=aleph
>>>> *aleph.ini </dev/null' return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdftex
>>>> -progname=pdftex -translate-file=cp227.tcx *pdfetex.ini </dev/null'
>>>> return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfmex
>>>> -progname=pdfmex -translate-file=cp227.tcx *pdfmex.ini </dev/null'
>>>> return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=amstex
>>>> -progname=amstex -translate-file=cp227.tcx *amstex.ini </dev/null'
>>>> return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=mex -progname=mex
>>>> -translate-file=cp227.tcx *mex.ini </dev/null' return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=texsis
>>>> -progname=texsis -translate-file=cp227.tcx texsis.ini </dev/null'
>>>> return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=csplain
>>>> -progname=csplain -etex -enc csplain-utf8.ini </dev/null' return
>>> status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfetex
>>>> -progname=pdfetex -translate-file=cp227.tcx *pdfetex.ini
></dev/null'
>>>> return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `xetex -ini?? -jobname=pdfcsplain
>>>> -progname=pdfcsplain -etex csplain.ini </dev/null' return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `luatex -ini?? -jobname=pdfcsplain
>>>> -progname=pdfcsplain -etex csplain.ini </dev/null' return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfcsplain
>>>> -progname=pdfcsplain -etex -enc csplain-utf8.ini </dev/null' return
>>>> status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=mltex
>>> -progname=mltex
>>>> -translate-file=cp227.tcx -mltex mltex.ini </dev/null' return
>status
>>> 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=etex
>-progname=etex
>>>> -translate-file=cp227.tcx *etex.ini </dev/null' return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `luatex -ini?? -jobname=dviluatex
>>>> -progname=dviluatex dviluatex.ini </dev/null' return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=mptopdf
>>>> -progname=context -translate-file=cp227.tcx mptopdf.tex </dev/null'
>>>> return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=eplain
>>>> -progname=eplain -translate-file=cp227.tcx *eplain.ini </dev/null'
>>>> return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=utf8mex
>>>> -progname=utf8mex -enc *utf8mex.ini </dev/null' return status 1
>>>> fmtutil [ERROR]: return error due to options --strict
>>>> fmtutil [INFO]: Disabled formats: 3
>>>> fmtutil [INFO]: Successfully rebuilt formats: 19
>>>> fmtutil [INFO]: Failed to build: 24 (euptex/euptex tex/tex
>>>> luatex/luatex xetex/xetex ptex/ptex eptex/eptex uptex/uptex
>>>> aleph/aleph pdftex/pdftex pdftex/pdfmex pdftex/amstex pdftex/mex
>>>> pdftex/texsis pdftex/csplain pdftex/pdfetex xetex/pdfcsplain
>>>> luatex/pdfcsplain pdftex/pdfcsplain pdftex/mltex pdftex/etex
>>>> luatex/dviluatex pdftex/mptopdf pdftex/eplain pdftex/utf8mex)
>>>> fmtutil [INFO]: Total formats: 46
>>>> fmtutil [INFO]: exiting with status 24
>>>>
>>>> which seems to indicate a lot of problems...
>>> Hm, since it was time to make lunch anyway I decided to reinstall
>>> texlive-full, after cleaning up the system with apt purge and a
>number
>>> of reiterations of apt update, apt autoremove, apt purge etc.
>>>
>>> Reinstalling texlive-full through apt resulted in exactly the same
>>> situation as before :-(
>>>
>>> So do I have to assume that the current version of texlive
>>> (https://packages.debian.org/buster/texlive-full) is broken in
>Debian?
>>> I
>>> would find that rather strange ...
>>>
>>> But still I'm not inclined to remove the package and install TL from
>>> its
>>> installer - first, that just can't be the solution and second, I
>need
>>> TL
>> >from the packages as part of some others' dependencies (the LilyPond
>
>>> build system).
>>>
>>> So is there anything left for me to do?
>>>
>>> Thanks
>>> Urs
>>
>> --
>> PREINING Norbert http://www.preining.info
>> Accelia Inc. + JAIST + TeX Live + Debian Developer
>> GPG: 0x860CDC13 fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


--
PREINING Norbert http://www.preining.info
Accelia Inc. + JAIST + TeX Live + Debian Developer
GPG: 0x860CDC13 fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From lists at openlilylib.org  Sat Jun 30 17:02:28 2018
From: lists at openlilylib.org (Urs Liska)
Date: Sat, 30 Jun 2018 17:02:28 +0200
Subject: [tex-live] LaTeX suddenly stopped working (loop/memory leak?)
In-Reply-To: <A69D20B5-49E9-4102-8F6E-6DF171E2B176@logic.at>
References: <795baa05-78a3-1d19-a270-0b302d24544d@openlilylib.org>
 <hjqx07f9af95.dlg@nililand.de>
 <e6f9e4c3-0bc8-d4ec-0b70-3b1d4a738fa9@openlilylib.org>
 <1ty0rs18k4rax.dlg@nililand.de>
 <84771466-eeea-6165-4e85-1172c7fe9bff@openlilylib.org>
 <1a3b58c6-95a8-353c-f1b0-11da6f971eac@openlilylib.org>
 <C938C2DF-B762-4385-9377-518F6885B6B1@logic.at>
 <06ab14de-82dc-d186-0434-27702e1f2efc@openlilylib.org>
 <A69D20B5-49E9-4102-8F6E-6DF171E2B176@logic.at>
Message-ID: <f6517d18-6931-153a-b76f-d350c2129ef6@openlilylib.org>

Hi Norbert,


Am 30.06.2018 um 16:45 schrieb Norbert Preining:
> Then please run
>    latex -kpsedebug +1 somefile.tex
> And capture the debug output (2>foo.log)

Thank you for that hint. I had to search a while for the right option 
-kpathsea-debug=+1, but that let me find the issue myself.

I had created a loop by having a symlink from a document's directory to 
a grandparent directory, which wasn't even intended for LaTeX. I hadn't 
thought of the possibility that LaTeX follows such a symlink in order to 
collect all possible targets down the (of course circular) directory 
hierarchy.

So thank you for the various input, Norbert and Ulrike. Unfortunately 
one can't mark a mailing list thread "closed".

Thanks
Urs

> Let it run a bit and then so it. The file will be big, please if possible put it not compressed somewhere online, I'm online on my mobile.
>
> Thanks
>
> Norbert
>
> On June 30, 2018 4:36:32 PM GMT+02:00, Urs Liska <lists at openlilylib.org> wrote:
>> Hi Norbert,
>>
>>
>> Am 30.06.2018 um 15:41 schrieb Norbert Preining:
>>> I can tell you that the packages in Debian are working correctly, it
>> must be something special on your system.
>>
>> Thank you for confirming. I would have been very surprised about such a
>>
>> severe issue without anyone else running into it.
>>
>>>   From what you wrote it sounds like you had an HD error, or memory
>> that resulted in some corruption.
>>
>> That makes some sense, and if it's true that I had an unjustified
>> reboot
>> that would point in that direction.
>> OTOH it would be strange if a complete reinstall wouldn't fix that.
>>
>>> I'm currently out in the mountains and cannot help much more, but can
>> you please send me the list of files in /etc/texmf/, and all
>> environment variables you have set which might be trusted to TeX, and
>> your path, and the output of which mktexlsr, and any further
>> information.
>>
>> $ tree /etc/texmf
>> /etc/texmf
>> ??? dvipdfmx
>> ??? dvips
>> ??? ??? config
>> ??? tex
>> ??? ??? context
>> ??? ??? ??? user
>> ??? ???     ??? cont-sys.rme
>> ??? ??? generic
>> ???     ??? config
>> ??? texdoctk
>> ??? ??? texdocrc.defaults
>> ??? texmf.d
>> ??? ??? 00debian.cnf
>> ??? web2c
>>      ??? mktex.cnf
>>      ??? texmf.cnf
>>
>>
>> I don't see any environment variables that seem to refer to TeX (I
>> haven't set any)
>>
>> $ echo $PATH
>> /home/uliska/git/lilypond/git-cl:/home/uliska/bin:/home/shared/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
>>
>> $ which mktexlsr
>> /usr/bin/mktexlsr
>>
>>
>> Hm, I have no further idea what to look for. Is there any way to make
>> XXtex's output more verbose to get a better idea at what point it
>> fails?
>>
>>> Thanks
>>>
>>> Norbert
>>>
>>> PS, this is not a list to discuss Debian's TeX Live, please use
>> debian-tex-maint at lists.debian.org or the BTS, thanks
>>
>> Do you mean there shouldn't be questions/discussions about Debian
>> specific issues with TeX Live, or is this list not the platform for
>> *any* TeX Live questions that happen to occur with the Debian packages?
>>
>> Thanks
>> Urs
>>
>>>
>>> On June 30, 2018 1:20:53 PM GMT+02:00, Urs Liska
>> <lists at openlilylib.org> wrote:
>>>> Am 30.06.2018 um 12:59 schrieb Urs Liska:
>>>>> Am 30.06.2018 um 12:36 schrieb Ulrike Fischer:
>>>>>> Am Sat, 30 Jun 2018 12:21:16 +0200 schrieb Urs Liska:
>>>>>>
>>>>>>>> Did you try to recreate the formats?
>>>>>>> No, because I don't have any idea what that means.
>>>>>> Then run
>>>>>>
>>>>>> fmtutil-sys --refresh
>>>>>>
>>>>>> or something like this.
>>>>>>
>>>>> After looking at the manpage I issued this with sudo.
>>>>> The end of the output is
>>>>>
>>>>> fmtutil [INFO]: /var/lib/texmf/web2c/aleph/lamed.fmt installed.
>>>>> fmtutil [ERROR]: running `euptex -ini?? -jobname=euptex
>>>>> -progname=euptex *euptex.ini </dev/null' return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `tex -ini?? -jobname=tex -progname=tex
>>>>> tex.ini </dev/null' return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `luatex -ini?? -jobname=luatex
>>>>> -progname=luatex luatex.ini </dev/null' return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `xetex -ini?? -jobname=xetex
>> -progname=xetex
>>>>> -etex xetex.ini </dev/null' return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `ptex -ini?? -jobname=ptex -progname=ptex
>>>>> ptex.ini </dev/null' return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `eptex -ini?? -jobname=eptex
>> -progname=eptex
>>>>> *eptex.ini </dev/null' return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `uptex -ini?? -jobname=uptex
>> -progname=uptex
>>>>> uptex.ini </dev/null' return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `aleph -ini?? -jobname=aleph
>> -progname=aleph
>>>>> *aleph.ini </dev/null' return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdftex
>>>>> -progname=pdftex -translate-file=cp227.tcx *pdfetex.ini </dev/null'
>>>>> return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfmex
>>>>> -progname=pdfmex -translate-file=cp227.tcx *pdfmex.ini </dev/null'
>>>>> return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=amstex
>>>>> -progname=amstex -translate-file=cp227.tcx *amstex.ini </dev/null'
>>>>> return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=mex -progname=mex
>>>>> -translate-file=cp227.tcx *mex.ini </dev/null' return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=texsis
>>>>> -progname=texsis -translate-file=cp227.tcx texsis.ini </dev/null'
>>>>> return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=csplain
>>>>> -progname=csplain -etex -enc csplain-utf8.ini </dev/null' return
>>>> status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfetex
>>>>> -progname=pdfetex -translate-file=cp227.tcx *pdfetex.ini
>> </dev/null'
>>>>> return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `xetex -ini?? -jobname=pdfcsplain
>>>>> -progname=pdfcsplain -etex csplain.ini </dev/null' return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `luatex -ini?? -jobname=pdfcsplain
>>>>> -progname=pdfcsplain -etex csplain.ini </dev/null' return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=pdfcsplain
>>>>> -progname=pdfcsplain -etex -enc csplain-utf8.ini </dev/null' return
>>>>> status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=mltex
>>>> -progname=mltex
>>>>> -translate-file=cp227.tcx -mltex mltex.ini </dev/null' return
>> status
>>>> 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=etex
>> -progname=etex
>>>>> -translate-file=cp227.tcx *etex.ini </dev/null' return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `luatex -ini?? -jobname=dviluatex
>>>>> -progname=dviluatex dviluatex.ini </dev/null' return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=mptopdf
>>>>> -progname=context -translate-file=cp227.tcx mptopdf.tex </dev/null'
>>>>> return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=eplain
>>>>> -progname=eplain -translate-file=cp227.tcx *eplain.ini </dev/null'
>>>>> return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [ERROR]: running `pdftex -ini?? -jobname=utf8mex
>>>>> -progname=utf8mex -enc *utf8mex.ini </dev/null' return status 1
>>>>> fmtutil [ERROR]: return error due to options --strict
>>>>> fmtutil [INFO]: Disabled formats: 3
>>>>> fmtutil [INFO]: Successfully rebuilt formats: 19
>>>>> fmtutil [INFO]: Failed to build: 24 (euptex/euptex tex/tex
>>>>> luatex/luatex xetex/xetex ptex/ptex eptex/eptex uptex/uptex
>>>>> aleph/aleph pdftex/pdftex pdftex/pdfmex pdftex/amstex pdftex/mex
>>>>> pdftex/texsis pdftex/csplain pdftex/pdfetex xetex/pdfcsplain
>>>>> luatex/pdfcsplain pdftex/pdfcsplain pdftex/mltex pdftex/etex
>>>>> luatex/dviluatex pdftex/mptopdf pdftex/eplain pdftex/utf8mex)
>>>>> fmtutil [INFO]: Total formats: 46
>>>>> fmtutil [INFO]: exiting with status 24
>>>>>
>>>>> which seems to indicate a lot of problems...
>>>> Hm, since it was time to make lunch anyway I decided to reinstall
>>>> texlive-full, after cleaning up the system with apt purge and a
>> number
>>>> of reiterations of apt update, apt autoremove, apt purge etc.
>>>>
>>>> Reinstalling texlive-full through apt resulted in exactly the same
>>>> situation as before :-(
>>>>
>>>> So do I have to assume that the current version of texlive
>>>> (https://packages.debian.org/buster/texlive-full) is broken in
>> Debian?
>>>> I
>>>> would find that rather strange ...
>>>>
>>>> But still I'm not inclined to remove the package and install TL from
>>>> its
>>>> installer - first, that just can't be the solution and second, I
>> need
>>>> TL
>>> >from the packages as part of some others' dependencies (the LilyPond
>>>> build system).
>>>>
>>>> So is there anything left for me to do?
>>>>
>>>> Thanks
>>>> Urs
>>> --
>>> PREINING Norbert http://www.preining.info
>>> Accelia Inc. + JAIST + TeX Live + Debian Developer
>>> GPG: 0x860CDC13 fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
>
> --
> PREINING Norbert http://www.preining.info
> Accelia Inc. + JAIST + TeX Live + Debian Developer
> GPG: 0x860CDC13 fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From imap.jk at kleberj.de  Sat Jun 30 17:07:58 2018
From: imap.jk at kleberj.de (Josef Kleber)
Date: Sat, 30 Jun 2018 17:07:58 +0200
Subject: [tex-live] Lua module 'socket.url' loading problem with getmap
In-Reply-To: <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
References: <201806242150.w5OLolos019690@freefriends.org>
 <BB4EF50853CF47A69B045F999BF933BE@CJ3001517A>
Message-ID: <ae89a08d-4d7b-a78e-f43b-945cf9e1ae7f@kleberj.de>

Dear Akira,

Am 30.06.2018 um 15:31 schrieb Akira Kakuto:
> Dear Josef,
> 
>> I get a different error message, but I can reproduce the problem with
>> fully updated TL2018.
> 
> An attached getmaptest.zip
> contains
> 
> runscript.tlu
> 
> lua/ltn12.lua
> lua/mime.lua
> lua/socket.lua
> 
> lua/socket/ftp.lua
> lua/socket/headers.lua
> lua/socket/http.lua
> lua/socket/smtp.lua
> lua/socket/tp.lua
> lua/socket/url.lua
> 
> After saving the original runscript.tlu,
> please copy all these 10 files in bin/win32,
> by preserving the directory structure.
> 
> Here
> getmapdl -m gm -l 'Stachus, Munchen' -o muc -i png
> works with the above.
> 

this worked unfortunaly only by accident, because there's no need for
url escaping or at least the comma and the space does not hurt.

If I use M?nchen with german u umlaut, I don't get an error message but
socket.url seems still not loaded. There seems to be a png download but
its size is less than 1kb and corrupt.

$ getmapdl -m gm -l 'Stachus, M?nchen' -i png -o muc

[snip]

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=Stachus%2c%20M%fcnchen&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Stachus%2c%20M%fcnchen&maptype=roadmap&scale=1&format=png&sensor=false
url length = 203 bytes

If you copy the produced url into a browser, then Google servers respond
with "The Google Maps Platform server rejected your request. Invalid
request. One of the input parameters contains a non-UTF-8 string."

If I use standard lua (from Cygwin) I get a valid url and a correct png:

$ lua /cygdrive/c/texlive/2018/texmf-dist/scripts/getmap/getmapdl.lua -m
gm -l 'Stachus, M?nchen' -i png -o muc

[snip]

getmapdl.lua:
url =
http://maps.googleapis.com/maps/api/staticmap?center=Stachus%2c%20M%c3%bcnchen&size=600x400&zoom=17&markers=size:mid|color:blue|label:1|Stachus%2c%20M%c3%bcnchen&maptype=roadmap&scale=1&format=png&sensor=false
url length = 209 bytes
output = muc.png

So my conclusion is that the error message is gone but socket.url is
still not loaded. See difference in url length of 6 byte.

I have as workaround copied the code of socket.url.escape into a local
function in an adapted getmapdl.lua
(https://a237234.jupiter.1blu.de/data/public/330a5d.php). This version
works as expected, therefore my conclusion that socket.url is still missing.

...

Surprisingly, I just learned that it works if called from getmap.sty!
utf8 as well as latin1/ansi!

\documentclass{article}
%\usepackage[latin1]{inputenc}
\usepackage{graphicx}
\usepackage[overwrite=true]{getmap}
\begin{document}
\getmap[mode=gm]{Bergheimer Stra?e 110A, 69115 Heidelberg, Germany}
\includegraphics[width=10cm]{getmap}

\getmap[file=berlin, mode=gm]{Brandenburger Tor, Berlin}
\includegraphics[width=10cm]{berlin}

%\getmap[file=muc, mode=gm]{Stachus, Muenchen}
\getmap[file=muc, mode=gm]{Stachus, M?nchen}
\includegraphics[width=10cm]{muc}
\end{document}

Run pdflatex -shell-escape file.tex

Maybe you can add an example with japanese "letters" in utf-8. Should
work with Google.

So my new conclusion is that socket.url is in but there's maybe still an
encoding problem if called from command line, but this also worked 2
years ago. ???

As long as it works with the package, that's ok for me. ;-)

Josef

