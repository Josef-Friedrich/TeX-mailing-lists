From ingli at ingli.de  Tue Jan  2 12:55:26 2018
From: ingli at ingli.de (Ingmar Lippert)
Date: Tue, 2 Jan 2018 12:55:26 +0100
Subject: [tex-live] bug install-tl?
Message-ID: <a072ff2d-21bd-fdbe-4b9d-87ebe407ccf9@ingli.de>

Hello,

and happy new year!

I have been using texlive for a decade or so on linux systems. Wonderful
& thank you for your community efforts!

I just tried to install with the netinstaller. When evoking "sh
install-tl" in the shell, I get the following reaction

install-tl: line 22: my: command not found
install-tl: line 23: syntax error near unexpected token `('
install-tl: line 23: `$svnrev =~ m/: ([0-9]+) /;'

So, in my lay considerations, this seems to be a bug.

System 4.14.8-300.fc27.x86_64


Best wishes,

Ingmar

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180102/451896c2/attachment.html>

From cereda.paulo at gmail.com  Tue Jan  2 14:47:08 2018
From: cereda.paulo at gmail.com (Paulo Roberto Massa Cereda)
Date: Tue, 2 Jan 2018 11:47:08 -0200
Subject: [tex-live] bug install-tl?
In-Reply-To: <a072ff2d-21bd-fdbe-4b9d-87ebe407ccf9@ingli.de>
References: <a072ff2d-21bd-fdbe-4b9d-87ebe407ccf9@ingli.de>
Message-ID: <6bc425c8-14bb-f87f-88b7-2120ab6680e5@gmail.com>

'ello and happy new year!

 > I just tried to install with the netinstaller. When evoking "sh
 > install-tl" in the shell, I get the following reaction
 >
 > install-tl: line 22: my: command not found
 > install-tl: line 23: syntax error near unexpected token `('
 > install-tl: line 23: `$svnrev =~ m/: ([0-9]+) /;'

The installer is actually a Perl script, hence the error. :)

[paulo at cambridge install-tl-20180102] $ file install-tl
install-tl: Perl script text executable

You can run it with either ./install-tl (it already has the +x flag) or 
with perl install-tl.

Cheerio!

Paulo

Em 02-01-2018 09:55, Ingmar Lippert escreveu:
> Hello,
> 
> and happy new year!
> 
> I have been using texlive for a decade or so on linux systems. Wonderful 
> & thank you for your community efforts!
> 
> I just tried to install with the netinstaller. When evoking "sh 
> install-tl" in the shell, I get the following reaction
> 
> install-tl: line 22: my: command not found
> install-tl: line 23: syntax error near unexpected token `('
> install-tl: line 23: `$svnrev =~ m/: ([0-9]+) /;'
> 
> So, in my lay considerations, this seems to be a bug.
> 
> System 4.14.8-300.fc27.x86_64
> 
> 
> Best wishes,
> 
> Ingmar
> 

From rmeyer2 at uni-goettingen.de  Fri Jan  5 12:28:32 2018
From: rmeyer2 at uni-goettingen.de (Ralf Meyer)
Date: Fri, 5 Jan 2018 12:28:32 +0100
Subject: [tex-live] Making lua modules findable
Message-ID: <424a6224-2139-0711-ff63-3c9933347f04@uni-goettingen.de>

Dear texlive developers,

with luatex it becomes possible to embed lua modules in luatex 
documents.? Many such modules are listed at luarocks.org, and quite a 
few can be useful in luatex.? For normal users, this is too complicated 
in texlive 2017 because of search path differences.? I suggest to change 
the configuration of kpathsea in a new release of texlive so that luatex 
searches lua modules also in the standard folders for lua modules.? This 
is currently not the case, which creates an extra hurdle to use 
general-purpose lua modules in luatex documents.? On my ubuntu system, 
luarocks installs modules in /usr/local/share/lua and 
/usr/local/lib/lua. And lua -e "print(package.path)" and lua -e 
"print(package.cpath)" shows several more paths.? Or maybe you know an 
even better way to make lua modules in these folders findable by luatex 
as automatically as possible.

Yours,

Ralf Meyer


From reinhard.kotucha at web.de  Fri Jan  5 22:25:02 2018
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 5 Jan 2018 22:25:02 +0100
Subject: [tex-live] Making lua modules findable
In-Reply-To: <424a6224-2139-0711-ff63-3c9933347f04@uni-goettingen.de>
References: <424a6224-2139-0711-ff63-3c9933347f04@uni-goettingen.de>
Message-ID: <23119.60718.680769.258134@gargle.gargle.HOWL>

On 2018-01-05 at 12:28:32 +0100, Ralf Meyer wrote:

 > Dear texlive developers,
 > 
 > with luatex it becomes possible to embed lua modules in luatex
 > documents.? Many such modules are listed at luarocks.org, and quite
 > a few can be useful in luatex.? For normal users, this is too
 > complicated in texlive 2017 because of search path differences.? I
 > suggest to change the configuration of kpathsea in a new release of
 > texlive so that luatex searches lua modules also in the standard
 > folders for lua modules.? This is currently not the case, which
 > creates an extra hurdle to use general-purpose lua modules in
 > luatex documents.? On my ubuntu system, luarocks installs modules
 > in /usr/local/share/lua and /usr/local/lib/lua. And lua -e
 > "print(package.path)" and lua -e "print(package.cpath)" shows
 > several more paths.? Or maybe you know an even better way to make
 > lua modules in these folders findable by luatex as automatically as
 > possible.

Hi Ralf,

in this case kpathsea isn't involved at all.  kpathsea looks for Lua
libraries in $TEXMF _additionally_.  From texmf-dist/web2c/texmf.cnf:

  % Lua needs to look for binary lua libraries distributed with packages.
  CLUAINPUTS = .;$SELFAUTOLOC/lib/{$progname,$engine,}/lua//

You could add other search path there but this is probaly not what you
want. 

The variables package.path and package.cpath you have in mind are
compiled into the luatex binary.  And variables can be changed at any
time.

Since luatex is currently based on Lua 5.2, the appropriate
directories are /usr/local/{lib,share}/lua/5.2/... .  If it's too
difficult to tell luarocks to install libraries there, the best
solution is to add paths to package.path and package.cpath in your lua
scripts before any package is loaded.   
 
The attached script hopefully does what you need:

-------------- next part --------------
A non-text attachment was scrubbed...
Name: testluapaths.gz
Type: application/x-gzip
Size: 527 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180105/71d4ce19/attachment.bin>
-------------- next part --------------

Run

  gunzip testluapaths.gz
  chmod 755 testluapaths
  ./testluapaths | tr \; \\n

At a first glance the function looks a bit complex but simply
appending the new paths is not a good solution.

Instead of

  /usr/local/{lib,share}/lua/5.2/
  ./
  
the new search order is

  /usr/local/{lib,share}/lua/5.2/
  /usr/local/{lib,share}/lua/
  ./

Does this solve your problem?

I suppose that the fuction works on Windows too (\ is recognized as a
path separator as well) but I expect severe problems with drive
letters because not everybody is willing to install everything on
drive "C:".

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From karl at freefriends.org  Fri Jan  5 23:27:23 2018
From: karl at freefriends.org (Karl Berry)
Date: Fri, 5 Jan 2018 22:27:23 GMT
Subject: [tex-live] Making lua modules findable
In-Reply-To: <424a6224-2139-0711-ff63-3c9933347f04@uni-goettingen.de>
Message-ID: <201801052227.w05MRNGY004106@freefriends.org>

    lua -e "print(package.path)" and lua -e 
    "print(package.cpath)"

I can agree that making it easier to add the "standard Lua directories"
to the Lua search path would be useful.

However, I can't feasibly add a large random set of directories
determined at runtime to the kpathsea search paths.

I don't know if luatex itself can reasonably look up and add those
paths, but it might be more plausible.

In any case, I think adding such directories should be optional, and off
by default, rather than "automatic"ally done. Otherwise debugging
anything becomes substantially more complex, it seems to me. --best, karl.

From axiomtutor at gmail.com  Sat Jan  6 20:06:24 2018
From: axiomtutor at gmail.com (A F)
Date: Sat, 6 Jan 2018 14:06:24 -0500
Subject: [tex-live] Error using tlmgr
Message-ID: <CALMYmNob+pXx-_AMU9AP5fADk5f8VtXaTe5pZtKrpeOrZbww6w@mail.gmail.com>

Hi, I ran the following code and received the following error--it had
instructions to email you about it, so I'm sending this along.

user at newuser-Latitude-D830 ~ $ sudo tlmgr init-usertree
(running on Debian, switching to user mode!)
/usr/bin/tlmgr: Initialization failed (in setup_unix_one):
/usr/bin/tlmgr: could not find a usable xzdec.
/usr/bin/tlmgr: Please install xzdec and try again.
tlmgr: Couldn't set up the necessary programs.
Installation of packages is not supported.
Please report to texlive at tug.org.
tlmgr: user mode database already set up in
tlmgr:   /home/user/texmf/tlpkg/texlive.tlpdb
tlmgr: not overwriting it.

Best wishes,
Adam Frank

347-589-2747
www.axiomtutor.com

A calendar of my available times can be found at
http://www.axiomtutor.com/schedule/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180106/84637210/attachment.html>

From zdenek.wagner at gmail.com  Sat Jan  6 22:20:47 2018
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sat, 6 Jan 2018 22:20:47 +0100
Subject: [tex-live] Error using tlmgr
In-Reply-To: <CALMYmNob+pXx-_AMU9AP5fADk5f8VtXaTe5pZtKrpeOrZbww6w@mail.gmail.com>
References: <CALMYmNob+pXx-_AMU9AP5fADk5f8VtXaTe5pZtKrpeOrZbww6w@mail.gmail.com>
Message-ID: <CAC1phyZsHtJrU8iOYbXoiJ9uMnVbLYvrCdGDSJZTnb+26X3kdw@mail.gmail.com>

The answer is in the message if you read more that the last line: Please
install xzdec and try again.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2018-01-06 20:06 GMT+01:00 A F <axiomtutor at gmail.com>:

> Hi, I ran the following code and received the following error--it had
> instructions to email you about it, so I'm sending this along.
>
> user at newuser-Latitude-D830 ~ $ sudo tlmgr init-usertree
> (running on Debian, switching to user mode!)
> /usr/bin/tlmgr: Initialization failed (in setup_unix_one):
> /usr/bin/tlmgr: could not find a usable xzdec.
> /usr/bin/tlmgr: Please install xzdec and try again.
> tlmgr: Couldn't set up the necessary programs.
> Installation of packages is not supported.
> Please report to texlive at tug.org.
> tlmgr: user mode database already set up in
> tlmgr:   /home/user/texmf/tlpkg/texlive.tlpdb
> tlmgr: not overwriting it.
>
> Best wishes,
> Adam Frank
>
> 347-589-2747 <(347)%20589-2747>
> www.axiomtutor.com
>
> A calendar of my available times can be found at
> http://www.axiomtutor.com/schedule/
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180106/91fbcd6d/attachment.html>

From P.Taylor at Rhul.Ac.Uk  Sat Jan  6 22:51:01 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor (RHUoL))
Date: Sat, 6 Jan 2018 21:51:01 +0000
Subject: [tex-live] Error using tlmgr
In-Reply-To: <CAC1phyZsHtJrU8iOYbXoiJ9uMnVbLYvrCdGDSJZTnb+26X3kdw@mail.gmail.com>
References: <CALMYmNob+pXx-_AMU9AP5fADk5f8VtXaTe5pZtKrpeOrZbww6w@mail.gmail.com>
 <CAC1phyZsHtJrU8iOYbXoiJ9uMnVbLYvrCdGDSJZTnb+26X3kdw@mail.gmail.com>
Message-ID: <19462845-d10c-07e0-3554-7801d72a6662@Rhul.Ac.Uk>

Zden?k Wagner wrote:
> The answer is in the message if you read more that the last line: 
> Please install xzdec and try again.
But on Microsoft Windows, "xzdec" will not exist /a priori/, and so the 
installer will provide one; could not the same behaviour be offered for 
non-Windows users ?
Philip Taylor
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180106/456936eb/attachment.html>

From zdenek.wagner at gmail.com  Sat Jan  6 23:06:30 2018
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sat, 6 Jan 2018 23:06:30 +0100
Subject: [tex-live] Error using tlmgr
In-Reply-To: <19462845-d10c-07e0-3554-7801d72a6662@Rhul.Ac.Uk>
References: <CALMYmNob+pXx-_AMU9AP5fADk5f8VtXaTe5pZtKrpeOrZbww6w@mail.gmail.com>
 <CAC1phyZsHtJrU8iOYbXoiJ9uMnVbLYvrCdGDSJZTnb+26X3kdw@mail.gmail.com>
 <19462845-d10c-07e0-3554-7801d72a6662@Rhul.Ac.Uk>
Message-ID: <CAC1phyb+tv_KtOehOrkKZzwVaKpEFu8rOaMV9TuoRfqf2BYdvw@mail.gmail.com>

This should be a qeustion for Linux maintainers. All Linux distributions
provide its xzdec. CentOS and Fedora install it as default, Raspbian
requires manual installation of the .deb package, it is probably the same
in Debian. IMHO it is not a wise idea to duplicate a part of a system
distribution just because a user has not installed it. And tlmgr cannot
install it automatically because the name of the package is distro
dependent and the name of the packager differs as well (dnf, yum, apt-get,
...). In addition, TeX Live (from TUG, not from the packaging systems)
should preferably be installed by an ordinary user while the package
containing xzdec must be installed by root or using sudo.


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2018-01-06 22:51 GMT+01:00 Philip Taylor (RHUoL) <P.Taylor at rhul.ac.uk>:

> Zden?k Wagner wrote:
>
> The answer is in the message if you read more that the last line: Please
> install xzdec and try again.
>
> But on Microsoft Windows, "xzdec" will not exist *a priori*, and so the
> installer will provide one; could not the same behaviour be offered for
> non-Windows users ?
> Philip Taylor
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180106/4ee0015f/attachment-0001.html>

From P.Taylor at Rhul.Ac.Uk  Sun Jan  7 19:48:29 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor (RHUoL))
Date: Sun, 7 Jan 2018 18:48:29 +0000
Subject: [tex-live] Error using tlmgr
In-Reply-To: <CAC1phyb+tv_KtOehOrkKZzwVaKpEFu8rOaMV9TuoRfqf2BYdvw@mail.gmail.com>
References: <CALMYmNob+pXx-_AMU9AP5fADk5f8VtXaTe5pZtKrpeOrZbww6w@mail.gmail.com>
 <CAC1phyZsHtJrU8iOYbXoiJ9uMnVbLYvrCdGDSJZTnb+26X3kdw@mail.gmail.com>
 <19462845-d10c-07e0-3554-7801d72a6662@Rhul.Ac.Uk>
 <CAC1phyb+tv_KtOehOrkKZzwVaKpEFu8rOaMV9TuoRfqf2BYdvw@mail.gmail.com>
Message-ID: <5488ab53-0e16-e0a1-b2ad-993372f0e7ed@Rhul.Ac.Uk>

Zden?k Wagner wrote:
> This should be a question for Linux maintainers. All Linux 
> distributions provide its xzdec. CentOS and Fedora install it as 
> default, Raspbian requires manual installation of the .deb package, it 
> is probably the same in Debian. IMHO it is not a wise idea to 
> duplicate a part of a system distribution just because a user has not 
> installed it. And tlmgr cannot install it automatically because the 
> name of the package is distro dependent and the name of the packager 
> differs as well (dnf, yum, apt-get, ...). In addition, TeX Live (from 
> TUG, not from the packaging systems) should preferably be installed by 
> an ordinary user while the package containing xzdec must be installed 
> by root or using sudo.
Well, I am confused, Zden?k.? What are all these instances of "xzdec" 
which accompanied the pre-test ?

** Phil.
--------
Directory of D:\TeX\Live\2017\tlpretest\tlpkg\installer\xz

17/04/2017? 23:32??????????? 72,784 xzdec.amd64-freebsd
15/04/2017? 13:58??????????? 73,008 xzdec.amd64-netbsd
26/04/2017? 16:42??????????? 62,012 xzdec.armel-linux
25/11/2016? 18:34??????????? 64,444 xzdec.armhf-linux
13/04/2017? 21:24?????????? 111,104 xzdec.exe
15/04/2017? 20:32??????????? 83,470 xzdec.i386-cygwin.exe
16/04/2017? 22:49?????????? 100,536 xzdec.i386-darwin
17/04/2017? 23:32??????????? 69,884 xzdec.i386-freebsd
13/04/2017? 20:40??????????? 71,064 xzdec.i386-linux
15/04/2017? 13:58??????????? 75,968 xzdec.i386-netbsd
19/04/2017? 15:29??????????? 71,260 xzdec.i386-solaris
16/04/2017? 22:49?????????? 127,900 xzdec.powerpc-darwin
29/04/2017? 21:57??????????? 69,732 xzdec.powerpc-linux
19/04/2017? 15:29??????????? 74,188 xzdec.sparc-solaris
15/04/2017? 20:32??????????? 74,752 xzdec.x86_64-cygwin.exe
15/04/2017? 23:15??????????? 76,276 xzdec.x86_64-darwin
16/04/2017? 22:49??????????? 80,128 xzdec.x86_64-darwinlegacy
15/04/2017? 01:00??????????? 72,472 xzdec.x86_64-linux
19/04/2017? 15:29??????????? 76,568 xzdec.x86_64-solaris



From zdenek.wagner at gmail.com  Sun Jan  7 20:42:01 2018
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sun, 7 Jan 2018 20:42:01 +0100
Subject: [tex-live] Error using tlmgr
In-Reply-To: <5488ab53-0e16-e0a1-b2ad-993372f0e7ed@Rhul.Ac.Uk>
References: <CALMYmNob+pXx-_AMU9AP5fADk5f8VtXaTe5pZtKrpeOrZbww6w@mail.gmail.com>
 <CAC1phyZsHtJrU8iOYbXoiJ9uMnVbLYvrCdGDSJZTnb+26X3kdw@mail.gmail.com>
 <19462845-d10c-07e0-3554-7801d72a6662@Rhul.Ac.Uk>
 <CAC1phyb+tv_KtOehOrkKZzwVaKpEFu8rOaMV9TuoRfqf2BYdvw@mail.gmail.com>
 <5488ab53-0e16-e0a1-b2ad-993372f0e7ed@Rhul.Ac.Uk>
Message-ID: <CAC1phyZUB-O88WHXRx6-gRofDi1+gqrL-uMYNC8M8qoWQO82FA@mail.gmail.com>

2018-01-07 19:48 GMT+01:00 Philip Taylor (RHUoL) <P.Taylor at rhul.ac.uk>:

> Zden?k Wagner wrote:
>
>> This should be a question for Linux maintainers. All Linux distributions
>> provide its xzdec. CentOS and Fedora install it as default, Raspbian
>> requires manual installation of the .deb package, it is probably the same
>> in Debian. IMHO it is not a wise idea to duplicate a part of a system
>> distribution just because a user has not installed it. And tlmgr cannot
>> install it automatically because the name of the package is distro
>> dependent and the name of the packager differs as well (dnf, yum, apt-get,
>> ...). In addition, TeX Live (from TUG, not from the packaging systems)
>> should preferably be installed by an ordinary user while the package
>> containing xzdec must be installed by root or using sudo.
>>
> Well, I am confused, Zden?k.  What are all these instances of "xzdec"
> which accompanied the pre-test ?
>

I do not know. My TeX Live contains such files in installer/xz but "which
xzdec" finds that file in a system directory (TeX Live binaries are
prefered, they are higher in PATH).

** Phil.
> --------
> Directory of D:\TeX\Live\2017\tlpretest\tlpkg\installer\xz
>
> 17/04/2017  23:32            72,784 xzdec.amd64-freebsd
> 15/04/2017  13:58            73,008 xzdec.amd64-netbsd
> 26/04/2017  16:42            62,012 xzdec.armel-linux
> 25/11/2016  18:34            64,444 xzdec.armhf-linux
> 13/04/2017  21:24           111,104 xzdec.exe
> 15/04/2017  20:32            83,470 xzdec.i386-cygwin.exe
> 16/04/2017  22:49           100,536 xzdec.i386-darwin
> 17/04/2017  23:32            69,884 xzdec.i386-freebsd
> 13/04/2017  20:40            71,064 xzdec.i386-linux
> 15/04/2017  13:58            75,968 xzdec.i386-netbsd
> 19/04/2017  15:29            71,260 xzdec.i386-solaris
> 16/04/2017  22:49           127,900 xzdec.powerpc-darwin
> 29/04/2017  21:57            69,732 xzdec.powerpc-linux
> 19/04/2017  15:29            74,188 xzdec.sparc-solaris
> 15/04/2017  20:32            74,752 xzdec.x86_64-cygwin.exe
> 15/04/2017  23:15            76,276 xzdec.x86_64-darwin
> 16/04/2017  22:49            80,128 xzdec.x86_64-darwinlegacy
> 15/04/2017  01:00            72,472 xzdec.x86_64-linux
> 19/04/2017  15:29            76,568 xzdec.x86_64-solaris
>
>
>
> Zden?k Wagner
> http://ttsm.icpf.cas.cz/team/wagner.shtml
> http://icebearsoft.euweb.cz
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180107/8f82ffc7/attachment.html>

From norbert at preining.info  Mon Jan  8 04:21:57 2018
From: norbert at preining.info (Norbert Preining)
Date: Mon, 8 Jan 2018 12:21:57 +0900
Subject: [tex-live] Error using tlmgr
In-Reply-To: <CALMYmNob+pXx-_AMU9AP5fADk5f8VtXaTe5pZtKrpeOrZbww6w@mail.gmail.com>
References: <CALMYmNob+pXx-_AMU9AP5fADk5f8VtXaTe5pZtKrpeOrZbww6w@mail.gmail.com>
Message-ID: <20180108032157.tseeehrqzvbqmp7k@bulldog.preining.info>

Hi

> user at newuser-Latitude-D830 ~ $ sudo tlmgr init-usertree
> (running on Debian, switching to user mode!)
> /usr/bin/tlmgr: Initialization failed (in setup_unix_one):
> /usr/bin/tlmgr: could not find a usable xzdec.
> /usr/bin/tlmgr: Please install xzdec and try again.

While upstream TeX Live does ship xzdec for all supported architectures
(Zdenek, Phil!), this is tlmgr from Debian and in Debian we do not ship
xzdec. Maybe I should add it to the dependencies ...

A simple
  sudo apt-get install xzdec
should fix that.

BUT: What are you (A F) doing with 
  *sudo*   and   *init-usertree*
That does NOT make sense!!! The *user-mode* facility of tlmgr is here to
help users that do NOT have access to su/root/sudo.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From tljack at forallx.net  Wed Jan 10 09:35:02 2018
From: tljack at forallx.net (jack)
Date: Wed, 10 Jan 2018 02:35:02 -0600
Subject: [tex-live] Missing files in "comprehensive"
Message-ID: <a0872ecf2e50d5d4ed390b83b6510112.squirrel@box5445.bluehost.com>

After a "tlmgr update", it looks like the "comprehensive" package is
missing the PDF file called "symbols-letter.pdf".

I hope this is an accidental oversight and not on purpose.  Its twin
"symbols-a4.pdf" (which is still there) is inconvenient for those of us in
the USA, and also, on a laptop screen it's too small to comfortably read
when zoomed in such a way that the whole page is on the screen at once.

It looks like nothing else changed in the package except the removal of
two other PDF files.

-Jack

From herbs at wideopenwest.com  Wed Jan 10 14:52:34 2018
From: herbs at wideopenwest.com (Herbert Schulz)
Date: Wed, 10 Jan 2018 07:52:34 -0600
Subject: [tex-live] Missing files in "comprehensive"
In-Reply-To: <a0872ecf2e50d5d4ed390b83b6510112.squirrel@box5445.bluehost.com>
References: <a0872ecf2e50d5d4ed390b83b6510112.squirrel@box5445.bluehost.com>
Message-ID: <160D3FEB-43BD-4E5E-B022-71A6EA5ECC53@wideopenwest.com>

> On Jan 10, 2018, at 2:35 AM, jack <tljack at forallx.net> wrote:
> 
> After a "tlmgr update", it looks like the "comprehensive" package is
> missing the PDF file called "symbols-letter.pdf".
> 
> I hope this is an accidental oversight and not on purpose.  Its twin
> "symbols-a4.pdf" (which is still there) is inconvenient for those of us in
> the USA, and also, on a laptop screen it's too small to comfortably read
> when zoomed in such a way that the whole page is on the screen at once.
> 
> It looks like nothing else changed in the package except the removal of
> two other PDF files.
> 
> -Jack

Howdy,

With a fully updated TeX Live 2017 I see that document when I run `texdoc -l symbols` and it opens successfully when I choose it.

Good Luck,

Herb Schulz
(herbs at wideopenwest dot com)



From herbs at wideopenwest.com  Wed Jan 10 15:22:58 2018
From: herbs at wideopenwest.com (Herbert Schulz)
Date: Wed, 10 Jan 2018 08:22:58 -0600
Subject: [tex-live] Missing files in "comprehensive"
In-Reply-To: <a0872ecf2e50d5d4ed390b83b6510112.squirrel@box5445.bluehost.com>
References: <a0872ecf2e50d5d4ed390b83b6510112.squirrel@box5445.bluehost.com>
Message-ID: <B2790469-6880-43E9-AE81-2171784310B0@wideopenwest.com>

> On Jan 10, 2018, at 2:35 AM, jack <tljack at forallx.net> wrote:
> 
> After a "tlmgr update", it looks like the "comprehensive" package is
> missing the PDF file called "symbols-letter.pdf".
> 
> I hope this is an accidental oversight and not on purpose.  Its twin
> "symbols-a4.pdf" (which is still there) is inconvenient for those of us in
> the USA, and also, on a laptop screen it's too small to comfortably read
> when zoomed in such a way that the whole page is on the screen at once.
> 
> It looks like nothing else changed in the package except the removal of
> two other PDF files.
> 
> -Jack

Howdy,

Sigh... after this morning's update the document does seem to be missing.

Good Luck,

Herb Schulz
(herbs at wideopenwest dot com)


From vascomalmeida at sapo.pt  Wed Jan 10 21:43:02 2018
From: vascomalmeida at sapo.pt (Vasco Almeida)
Date: Wed, 10 Jan 2018 19:43:02 -0100
Subject: [tex-live] babel Portuguese package name misspelled?
Message-ID: <1515616982.6942.19.camel@sapo.pt>

The Portuguese babel packages is babel-portuges. I would expect it to
be babel-portuguese instead. Either way I have a file with the
following rows.

> \documentclass[portuguese,a4paper]{europasscv}
> \usepackage[portuguese]{babel}

When I issue pdflatex cv_pt.tex, I read the following warning and it
seems the hyphenation is not working.

> Package babel Warning: No hyphenation patterns were preloaded for
> (babel)                the language `Portuguese' into the format.
> (babel)                Please, configure your TeX system to add them and
> (babel)                rebuild the format. Now I will use the patterns
> (babel)                preloaded for english instead on input line 55.

I tried with \usepackage[portuges]{babel} also.

In /usr/share/texlive/texmf-dist/tex/generic/babel-
portuges/portuges.ldf file there is this rows and other instances of
"portuges" and also portuguese.

> \ProvidesLanguage{portuges}
>         [2008/03/18 v1.2q Portuguese support from the babel system]

Can you shed some light on this? Is this a bug?

From karl at freefriends.org  Wed Jan 10 22:39:24 2018
From: karl at freefriends.org (Karl Berry)
Date: Wed, 10 Jan 2018 21:39:24 GMT
Subject: [tex-live] Missing files in "comprehensive"
In-Reply-To: <a0872ecf2e50d5d4ed390b83b6510112.squirrel@box5445.bluehost.com>
Message-ID: <201801102139.w0ALdOqA031413@freefriends.org>

I removed it to make more space on the DVD, which is pretty much
overfull already.

It's not make or break to put it back, but in these days of arbitrarily
magnifiable electronic documents, I don't understand the need to also
have the letter over having just the a4. Your explanations didn't make
sense to me, sorry. (I doubted anyone printed it out on an actual
printer, and for that, the -letter.pdf on CTAN should suffice anyway.)

E.g., I long ago set up my PDF viewer for texdoc to default to just
fitting to the window size, since there are tons of both a4 and letter
pdfs in TL.

If all other things were equal, I'd certainly include them both, but all
other things aren't equal. -k

P.S. I have to remove more platform binary sets from the DVD only
(they'll still be available for normal network install), as we started
doing last year. I also removed the premade pst-geo examples/*.pdf files
for the same reason.

From siepo at cybercomm.nl  Wed Jan 10 22:49:56 2018
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Wed, 10 Jan 2018 22:49:56 +0100
Subject: [tex-live] Missing files in "comprehensive"
In-Reply-To: <201801102139.w0ALdOqA031413@freefriends.org>
References: <a0872ecf2e50d5d4ed390b83b6510112.squirrel@box5445.bluehost.com>
 <201801102139.w0ALdOqA031413@freefriends.org>
Message-ID: <20180110214956.urrcj34n3wki4pom@bitmuis.thuis.internal>

On Wed, Jan 10, 2018 at 09:39:24PM +0000, Karl Berry wrote:
> I removed it to make more space on the DVD, which is pretty much
> overfull already.
> 
> It's not make or break to put it back, but in these days of arbitrarily
> magnifiable electronic documents, I don't understand the need to also
> have the letter over having just the a4. Your explanations didn't make
> sense to me, sorry. (I doubted anyone printed it out on an actual
> printer, and for that, the -letter.pdf on CTAN should suffice anyway.)
> 
> E.g., I long ago set up my PDF viewer for texdoc to default to just
> fitting to the window size, since there are tons of both a4 and letter
> pdfs in TL.
> 
> If all other things were equal, I'd certainly include them both, but all
> other things aren't equal. -k
> 
> P.S. I have to remove more platform binary sets from the DVD only
> (they'll still be available for normal network install), as we started
> doing last year. I also removed the premade pst-geo examples/*.pdf files
> for the same reason.

What about only including recommended fonts next time?

-- 
Siep Kroonenberg

From tljack at forallx.net  Wed Jan 10 23:25:27 2018
From: tljack at forallx.net (jack)
Date: Wed, 10 Jan 2018 16:25:27 -0600
Subject: [tex-live] Missing files in 'comprehensive'
In-Reply-To: <201801102139.w0ALdOqA031413@freefriends.org>
References: <201801102139.w0ALdOqA031413@freefriends.org>
Message-ID: <8dfc6301c142dc3c86e5f8a8bdf72dca.squirrel@box5445.bluehost.com>

On Wed, January 10, 2018 3:39 pm, Karl Berry wrote:
> Your explanations didn't make sense to
> me, sorry. (I doubted anyone printed it out on an actual printer, and for
> that, the -letter.pdf on CTAN should suffice anyway.)

If nobody printed it anyway, then the size to keep is the one that makes
on-screen viewing easiest.  That is symbols-letter.pdf.

Because A4 paper is taller than letter paper, if an A4 PDF is zoomed in
such a way that the whole page is on the screen---so that one doesn't have
to scroll up or down---the page contents must be smaller and harder to see
than they would be under letter size.  On a 13-inch laptop, that ends up
being painfully small.  (It's awfully small already even with letter-size,
but it's doable.)

-Jack

From karl at freefriends.org  Fri Jan 12 01:48:27 2018
From: karl at freefriends.org (Karl Berry)
Date: Fri, 12 Jan 2018 00:48:27 GMT
Subject: [tex-live] babel Portuguese package name misspelled?
In-Reply-To: <1515616982.6942.19.camel@sapo.pt>
Message-ID: <201801120048.w0C0mRvA003795@freefriends.org>

    The Portuguese babel packages is babel-portuges. I would expect it to
    be babel-portuguese instead.

That's the package name on CTAN, https://ctan.org/pkg/babel-portuges.
If you want to request changing it, please write CTAN and the babel
maintainer.

    > \documentclass[portuguese,a4paper]{europasscv}
    > \usepackage[portuguese]{babel}
    ...
    > Package babel Warning: No hyphenation patterns were preloaded for
    > (babel)                the language `Portuguese' into the format.

It works for me with vanilla TL (which loads all available hyphenation
patterns).

    In /usr/share/texlive/texmf-dist/tex/generic/babel-
    portuges/portuges.ldf file ...

>From /usr/share/..., I surmise you are using distro TeX, not the
original TL. Please look at your distro doc/report to distro maintainers.

BTW, your mailer is apparently making incorrect line breaks at hyphens.
--best, karl.

From karl at freefriends.org  Fri Jan 12 01:48:26 2018
From: karl at freefriends.org (Karl Berry)
Date: Fri, 12 Jan 2018 00:48:26 GMT
Subject: [tex-live] Missing files in 'comprehensive'
In-Reply-To: <8dfc6301c142dc3c86e5f8a8bdf72dca.squirrel@box5445.bluehost.com>
Message-ID: <201801120048.w0C0mQpr003787@freefriends.org>

Ok, I understand now. I'm not adamantly opposed I guess, but a plethora,
I suspect the majority, of package documentation PDFs in TL are a4. That
is why I chose to keep that format. So whatever the situation with a4,
it seems you and everyone else must have already solved it as well as it
can be solved. Maybe providing the document with a larger font size is
the least bad answer ... Scott? -k

From tljack at forallx.net  Fri Jan 12 06:29:50 2018
From: tljack at forallx.net (jack)
Date: Thu, 11 Jan 2018 23:29:50 -0600
Subject: [tex-live] Missing files in 'comprehensive'
In-Reply-To: <201801120048.w0C0mQpr003787@freefriends.org>
References: <201801120048.w0C0mQpr003787@freefriends.org>
Message-ID: <67135886ec9ec5625781aace1c1c33d6.squirrel@box5445.bluehost.com>

On Thu, January 11, 2018 6:48 pm, Karl Berry wrote:
> Ok, I understand now. I'm not adamantly opposed I guess, but a plethora,
> I suspect the majority, of package documentation PDFs in TL are a4. That
> is why I chose to keep that format. So whatever the situation with a4, it
> seems you and everyone else must have already solved it as well as it can
> be solved. Maybe providing the document with a larger font size is the
> least bad answer ... Scott? -k

A larger font size is probably a bad idea, since it will likely force
inconvenient pagebreaks in the middle of some blocks of symbols.  (Not to
mention, it will make an already large pagecount even bigger, which makes
flipping through them less efficient.)

I hadn't realized at first that symbols-letter.pdf will remain on CTAN. 
I'll just get it from there and keep it locally.

-Jack

From joseph.wright at morningstar2.co.uk  Fri Jan 19 10:27:09 2018
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Fri, 19 Jan 2018 09:27:09 +0000
Subject: [tex-live] TL'18: LuaTeX and Lua version
Message-ID: <053e4b0e-f79a-0acc-b5a7-028ac2a03d3d@morningstar2.co.uk>

Hello all,

As binary building for TL'18 has started, I've been testing LuaTeX v1.07 
against the LaTeX kernel test suite (using the W32TeX binaries: thanks 
Akira). Currently, I believe the plan is that TL'18 will use LuaTeX with 
Lua 5.2 with a second binary for Lua 5.3 for testing.

I can understand the desire for stability in the Lua version, but at the 
same time I'm not sure how much testing Lua 5.3 will get here. To use it 
you'll need to select the right binary, which at least as I understand 
it will be plain/iniTeX only, making using LaTeX with it a bit more 'fun'.

I've gone for the approach of simply swapping my luatex.dll and 
rebuilding everything, which works for me but isn't that general. At the 
same time, my understanding of the Lua 5.3 changes is that they are 
largely quite specialised, and at least in initial testing don't break 
e.g. luaotfload.

I wonder if

- There is a need to not simply make the change and use LuaTeX with
   Lua 5.3
- That being the case, if a mechanism to 'swap' what version
   "luatex"/"lualatex" point to could be arranged (symlinks/swapping
   .dlls/whatever)

Joseph

From norbert at preining.info  Fri Jan 19 14:45:28 2018
From: norbert at preining.info (Norbert Preining)
Date: Fri, 19 Jan 2018 22:45:28 +0900
Subject: [tex-live] TL'18: LuaTeX and Lua version
In-Reply-To: <053e4b0e-f79a-0acc-b5a7-028ac2a03d3d@morningstar2.co.uk>
References: <053e4b0e-f79a-0acc-b5a7-028ac2a03d3d@morningstar2.co.uk>
Message-ID: <20180119134528.GD8856@bulldog.preining.info>

Hi JOseph,

> - There is a need to not simply make the change and use LuaTeX with
>   Lua 5.3

This is up to the maintainers of luatex. Please contact them and ask
them to explain their decision.

> - That being the case, if a mechanism to 'swap' what version
>   "luatex"/"lualatex" point to could be arranged (symlinks/swapping
>   .dlls/whatever)

That is not easily possible, but what is possible is that we add formats
for the luatex53.

It would be much easier if the binaries are named luatex-devel or so
(as far as I remember), because fmtutil already supports this kind of
-dev binaries/formats (specifically done for luatex last or two years
ago!).

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From d.p.carlisle at gmail.com  Fri Jan 19 15:54:38 2018
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Fri, 19 Jan 2018 14:54:38 +0000
Subject: [tex-live] TL'18: LuaTeX and Lua version
In-Reply-To: <20180119134528.GD8856@bulldog.preining.info>
References: <053e4b0e-f79a-0acc-b5a7-028ac2a03d3d@morningstar2.co.uk>
 <20180119134528.GD8856@bulldog.preining.info>
Message-ID: <CAEW6iOg1wmHwwn-VMg-Q=0C4PsEKyCJj94N+wBuv_oJ2G+bc2w@mail.gmail.com>

On 19 January 2018 at 13:45, Norbert Preining <norbert at preining.info> wrote:
> Hi JOseph,
>
>> - There is a need to not simply make the change and use LuaTeX with
>>   Lua 5.3
>
> This is up to the maintainers of luatex. Please contact them and ask
> them to explain their decision.
>
>> - That being the case, if a mechanism to 'swap' what version
>>   "luatex"/"lualatex" point to could be arranged (symlinks/swapping
>>   .dlls/whatever)
>
> That is not easily possible, but what is possible is that we add formats
> for the luatex53.
>
> It would be much easier if the binaries are named luatex-devel or so
> (as far as I remember), because fmtutil already supports this kind of
> -dev binaries/formats (specifically done for luatex last or two years
> ago!).
>
> Best
>
> Norbert
>
 we wondered about that but in practice that makes it harder for any
real people to use as
editors and ide's etc need to then be set up to know about the new
formats, so we'll have a
year of telling people how to do that in help forums followed by a
year of telling
people why the button they set up this year fails next year when
(presumably) we go back to
just having one flavour of luatex again.

even if it wasn't integrated into tlmgr but just an add on script or
batch file or whatever, in my own setup
the easiest way of testing luatex53 seemed to be just to copy it in to
the existing (texlive 2017) bin area
as luatex and then let fmtutil(-sys) rebuild everything. I could of
course have set up texlua53 and lualatex53
as separate commands but then I'd have to configure test suites and
editors etc to use them.

David

From tljack at forallx.net  Fri Jan 19 19:54:25 2018
From: tljack at forallx.net (jack)
Date: Fri, 19 Jan 2018 12:54:25 -0600
Subject: [tex-live] TL2017's dvipdfmx prints warnings that no earlier TL one
	does.
Message-ID: <e99bb5a41fba93286ce8f4ba940a0786.squirrel@box5445.bluehost.com>

Ever since TeXLive 2017 came out, dvipdfmx is throwing weird warning
messages when I use garamond as the font, when the exact same document
involves no such warnings in prior years of TeXLive.

Consider the following tiny sample, which we can call "demo.tex"

\documentclass{article}
\usepackage[mdugm]{mathdesign}
\begin{document}
[foo]
\end{document}

If I run `latex demo.tex`, followed by `dvipdfmx demo`, I do get a pdf
created but the following messages get shown:

  atemplate-2 -> atemplate-2.pdf
  [1]
  xdvipdfmx:warning: Glyph width mismatch for TFM and font (md-gmr8t)
  xdvipdfmx:warning: TFM: 375.402 vs. Type1 font: 374
  xdvipdfmx:warning: Glyph width mismatch for TFM and font (md-gmr8t)
  xdvipdfmx:warning: TFM: 375.402 vs. Type1 font: 374

These never appeared prior to TeXLive 2017, even with the exact same
sample document and even though I have the garamond fonts installed in the
same location.  (Namely, I have a symlink in
$TL2017/texmf-local/fonts/type1 called "urw" that points to a folder in my
$HOME.  This has worked flawlessly for years.) I have this problem on
multiple machines.

I'm not a TeX expert, but I don't see why there would suddenly be a
mismatch between metrics and what the font says.  Those garamond fonts
have not changed in years as far as I know.  I got them from the
"garamond" package on CTAN, which hasn't changed in years.  I seem to
recall the directions in there told me that all I need are: ugmm8a.pfb,
ugmmi8a.pfb, ugmr8a.pfb, and ugmri8a.pfb.  That is indeed what is in the
dir that my symlink points to.

It is worth noting that in the sample document, if I just delete the
square brackets surrounding "foo", the warning messages go away.

-Jack


From kakuto at fuk.kindai.ac.jp  Fri Jan 19 22:05:28 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Sat, 20 Jan 2018 06:05:28 +0900
Subject: [tex-live] TL'18: LuaTeX and Lua version
In-Reply-To: <20180119134528.GD8856@bulldog.preining.info>
References: <053e4b0e-f79a-0acc-b5a7-028ac2a03d3d@morningstar2.co.uk>
 <20180119134528.GD8856@bulldog.preining.info>
Message-ID: <CDD33F17D17D4750825FEB464B2CDD66@CJ3001517A>

Hi Norbert,

> That is not easily possible, but what is possible is
> that we add formats for the luatex53.

In order to use luatex53 as a TeX engine, with the
other luatex on lua-5.2, a little more change is needed.
I asked developers what is their plan.
They asked that luatex53 is not intended to use as above.
It is provided only for tests of lua-5.3 scripts.

If you discard luatex on lua-5.2, then it is possible to
use the present luatex53 as a TeX engine.
You have to rename it as luatex.

In W32TeX, luatex on lua-5.3, with format files, is provided
for tests and for ConTeXt:
luatex-exp-w32.tar.xz
luatex-exp-w64.tar.xz

Best,
Akira


From rdt at cs.queensu.ca  Sat Jan 20 16:16:16 2018
From: rdt at cs.queensu.ca (Bob Tennent)
Date: Sat, 20 Jan 2018 10:16:16 -0500
Subject: [tex-live] TL2017's dvipdfmx prints warnings
Message-ID: <20180120151616.ORya6tg3S%rdt@cs.queensu.ca>

 >|Ever since TeXLive 2017 came out, dvipdfmx is throwing weird warning
 >|messages when I use garamond as the font, when the exact same document
 >|involves no such warnings in prior years of TeXLive.
 >|
 >|Consider the following tiny sample, which we can call "demo.tex"
 >|
 >|\documentclass{article}
 >|\usepackage[mdugm]{mathdesign}
 >|\begin{document}
 >|[foo]
 >|\end{document}
 >|
 >|If I run `latex demo.tex`, followed by `dvipdfmx demo`, I do get a pdf
 >|created but the following messages get shown:
 >|
 >|  atemplate-2 -> atemplate-2.pdf
 >|  [1]
 >|  xdvipdfmx:warning: Glyph width mismatch for TFM and font (md-gmr8t)
 >|  xdvipdfmx:warning: TFM: 375.402 vs. Type1 font: 374
 >|  xdvipdfmx:warning: Glyph width mismatch for TFM and font (md-gmr8t)
 >|  xdvipdfmx:warning: TFM: 375.402 vs. Type1 font: 374
 >|
 >|These never appeared prior to TeXLive 2017, even with the exact same
 >|sample document and even though I have the garamond fonts installed in the
 >|same location.  (Namely, I have a symlink in
 >|$TL2017/texmf-local/fonts/type1 called "urw" that points to a folder in my
 >|$HOME.  This has worked flawlessly for years.) I have this problem on
 >|multiple machines.
 >|
 >|I'm not a TeX expert, but I don't see why there would suddenly be a
 >|mismatch between metrics and what the font says.  Those garamond fonts
 >|have not changed in years as far as I know.  I got them from the
 >|"garamond" package on CTAN, which hasn't changed in years.  I seem to
 >|recall the directions in there told me that all I need are: ugmm8a.pfb,
 >|ugmmi8a.pfb, ugmr8a.pfb, and ugmri8a.pfb.  That is indeed what is in the
 >|dir that my symlink points to.

Your MWE uses 

\usepackage[mdugm]{mathdesign}

which provides its own versions of the garamond fonts. So
it looks to me like there's an issue with the mathdesign
package.

Bob T.

From rdt at cs.queensu.ca  Sat Jan 20 16:32:58 2018
From: rdt at cs.queensu.ca (Bob Tennent)
Date: Sat, 20 Jan 2018 10:32:58 -0500
Subject: [tex-live] TL2017's dvipdfmx prints warnings
Message-ID: <20180120153258.7J98SCzie%rdt@cs.queensu.ca>

 >|Your MWE uses 
 >|
 >|\usepackage[mdugm]{mathdesign}
 >|
 >|which provides its own versions of the garamond fonts. So
 >|it looks to me like there's an issue with the mathdesign
 >|package.

Just to clarify: mathdesign provides *math* fonts for
use with urw-garamond and it is one of these that is
problematic. If you replace the \usepackage command by

\renewcommand{\rmdefault}{ugm}

there are no warning messages.

Bob T.

From tljack at forallx.net  Sat Jan 20 17:02:57 2018
From: tljack at forallx.net (jack)
Date: Sat, 20 Jan 2018 10:02:57 -0600
Subject: [tex-live] TL2017's dvipdfmx prints warnings
In-Reply-To: <20180120153258.7J98SCzie%rdt@cs.queensu.ca>
References: <20180120153258.7J98SCzie%rdt@cs.queensu.ca>
Message-ID: <42e3f936a4dc8a85803c3c2cb84f9d71.squirrel@box5445.bluehost.com>

On Sat, January 20, 2018 9:32 am, Bob Tennent wrote:
>> |Your MWE uses
>> |
>> |\usepackage[mdugm]{mathdesign}
>> |
>> |which provides its own versions of the garamond fonts. So
>> |it looks to me like there's an issue with the mathdesign
>> |package.
>>
>
> Just to clarify: mathdesign provides *math* fonts for
> use with urw-garamond and it is one of these that is problematic.

That's weird!  My document never enters math mode, so I don't see why math
fonts are in play.

-Jack

From tljack at forallx.net  Sat Jan 20 17:08:49 2018
From: tljack at forallx.net (jack)
Date: Sat, 20 Jan 2018 10:08:49 -0600
Subject: [tex-live] TL2017's dvipdfmx prints warnings
In-Reply-To: <20180120151616.ORya6tg3S%rdt@cs.queensu.ca>
References: <20180120151616.ORya6tg3S%rdt@cs.queensu.ca>
Message-ID: <1bcf15012a6a363407ea18d6c8d17849.squirrel@box5445.bluehost.com>

On Sat, January 20, 2018 9:16 am, Bob Tennent wrote:
>> |Ever since TeXLive 2017 came out, dvipdfmx is throwing weird warning
>> |messages when I use garamond as the font, when the exact same document
>> |involves no such warnings in prior years of TeXLive.
>> |
>> |Consider the following tiny sample, which we can call "demo.tex"
>> |
>> |\documentclass{article}
>> |\usepackage[mdugm]{mathdesign}
>> |\begin{document}
>> |[foo]
>> |\end{document}
>> |
>> |If I run `latex demo.tex`, followed by `dvipdfmx demo`, I do get a pdf
>> |created but the following messages get shown:
>> |
>> |  atemplate-2 -> atemplate-2.pdf
>> |  [1]
>> |  xdvipdfmx:warning: Glyph width mismatch for TFM and font (md-gmr8t)
>> |  xdvipdfmx:warning: TFM: 375.402 vs. Type1 font: 374
>> |  xdvipdfmx:warning: Glyph width mismatch for TFM and font (md-gmr8t)
>> |  xdvipdfmx:warning: TFM: 375.402 vs. Type1 font: 374
>> |
>> |These never appeared prior to TeXLive 2017, even with the exact same
>> |sample document and even though I have the garamond fonts installed in
>> the |same location.  (Namely, I have a symlink in
>> |$TL2017/texmf-local/fonts/type1 called "urw" that points to a folder in
>> my |$HOME.  This has worked flawlessly for years.) I have this problem
>> on |multiple machines.
>> |
>> |I'm not a TeX expert, but I don't see why there would suddenly be a
>> |mismatch between metrics and what the font says.  Those garamond fonts
>> |have not changed in years as far as I know.  I got them from the
>> |"garamond" package on CTAN, which hasn't changed in years.  I seem to
>> |recall the directions in there told me that all I need are: ugmm8a.pfb,
>>  |ugmmi8a.pfb, ugmr8a.pfb, and ugmri8a.pfb.  That is indeed what is in
>> the |dir that my symlink points to.
>>
>
> Your MWE uses
>
>
> \usepackage[mdugm]{mathdesign}
>
>
> which provides its own versions of the garamond fonts. So it looks to me
> like there's an issue with the mathdesign package.

According to its manual (and also the top of mathdesign.sty), the
mathdesign package hasn't changed since 2013.  And yet these warnings
didn't appear until TL2017.  So there is something about TL2017 in
particular that is either causing a bug or revealing a latent one.

-Jack

From P.Taylor at Rhul.Ac.Uk  Sat Jan 20 17:12:44 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor (RHUoL))
Date: Sat, 20 Jan 2018 16:12:44 +0000
Subject: [tex-live] TL2017's dvipdfmx prints warnings
In-Reply-To: <42e3f936a4dc8a85803c3c2cb84f9d71.squirrel@box5445.bluehost.com>
References: <20180120153258.7J98SCzie%rdt@cs.queensu.ca>
 <42e3f936a4dc8a85803c3c2cb84f9d71.squirrel@box5445.bluehost.com>
Message-ID: <66bfa18b-c644-97a4-de57-f9216ae2a2ad@Rhul.Ac.Uk>

jack wrote:
> That's weird!  My document never enters math mode, so I don't see why math
> fonts are in play.

Don't the square brackets cause maths mode to be entered ?

> \documentclass{article}
> \usepackage[mdugm]{mathdesign}
> \begin{document}
> [foo]
> \end{document}

Philip Taylor


From kakuto at fuk.kindai.ac.jp  Sat Jan 20 20:45:56 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Sun, 21 Jan 2018 04:45:56 +0900
Subject: [tex-live] TL2017's dvipdfmx prints warnings
In-Reply-To: <1bcf15012a6a363407ea18d6c8d17849.squirrel@box5445.bluehost.com>
References: <20180120151616.ORya6tg3S%rdt@cs.queensu.ca>
 <1bcf15012a6a363407ea18d6c8d17849.squirrel@box5445.bluehost.com>
Message-ID: <19D9B342794B4035BE355F7B5317B0D3@CJ3001517A>

Dear Jack,

> According to its manual (and also the top of mathdesign.sty), the
> mathdesign package hasn't changed since 2013.  And yet these warnings
> didn't appear until TL2017.  So there is something about TL2017 in
> particular that is either causing a bug or revealing a latent one.

For example, the character width of
character 91 (/bracketleft) from md-gmr8t.tfm and
md-gmr8t.pfb is found as:

375.402 from (CHARWD R 0.375402) in md-gmr8t.tfm
374     from 69 374 hsbw in md-gmr8t.pfb.

If |difference| > 1.0, warning is shown.
Please ignore the warning.

Thanks,
Akira


From reinhard.kotucha at web.de  Sat Jan 20 21:35:27 2018
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 20 Jan 2018 21:35:27 +0100
Subject: [tex-live] TL2017's dvipdfmx prints warnings
In-Reply-To: <66bfa18b-c644-97a4-de57-f9216ae2a2ad@Rhul.Ac.Uk>
References: <20180120153258.7J98SCzie%rdt@cs.queensu.ca>
 <42e3f936a4dc8a85803c3c2cb84f9d71.squirrel@box5445.bluehost.com>
 <66bfa18b-c644-97a4-de57-f9216ae2a2ad@Rhul.Ac.Uk>
Message-ID: <23139.43023.881029.325714@gargle.gargle.HOWL>

On 2018-01-20 at 16:12:44 +0000, Philip Taylor (RHUoL) wrote:

 > jack wrote:
 > > That's weird!  My document never enters math mode, so I don't see
 > > why math fonts are in play.
 > 
 > Don't the square brackets cause maths mode to be entered ?

LaTeX's square brackets have the same \catcode as those in plain TeX.

  *\showthe\catcode `[
  > 12.

I just tried the document provided by Jack with TeX Live 2015 and 2017
on Linux:

  strace -eopen pdflatex demo.tex

No difference.  The math fonts have always been loaded in the past.
Nothing has changed in TeX Live 2017.

  texlive/2015/texmf-dist/tex/latex/mathdesign/mdugm/ot1mdugm.fd
  texlive/2015/texmf-dist/fonts/map/fontname/texfonts.map
  texlive/2015/texmf-dist/fonts/tfm/public/mathdesign/mdugm/mdugmr7t.tfm
  texlive/2015/texmf-dist/tex/latex/base/fontenc.sty
  texlive/2015/texmf-dist/tex/latex/base/t1enc.def
  texlive/2015/texmf-dist/tex/latex/mathdesign/mdugm/t1mdugm.fd
  texlive/2015/texmf-dist/fonts/tfm/public/mathdesign/mdugm/mdugmr8t.tfm
  texlive/2015/texmf-dist/tex/latex/mathdesign/mdacmr.fd
  texlive/2015/texmf-dist/tex/latex/mathdesign/mdbcmr.fd
  texlive/2015/texmf-dist/fonts/vf/public/mathdesign/mdugm/mdugmr8t.vf
  texlive/2015/texmf-dist/fonts/tfm/public/mathdesign/mdugm/md-gmr8y.tfm
  texlive/2015/texmf-dist/fonts/tfm/public/mathdesign/mdugm/md-gmr8t.tfm
  texlive/2015/texmf-var/fonts/map/pdftex/updmap/pdftex.map

  texlive/2017/texmf-dist/tex/latex/mathdesign/mdugm/ot1mdugm.fd
  texlive/2017/texmf-dist/fonts/map/fontname/texfonts.map
  texlive/2017/texmf-dist/fonts/tfm/public/mathdesign/mdugm/mdugmr7t.tfm
  texlive/2017/texmf-dist/tex/latex/base/fontenc.sty
  texlive/2017/texmf-dist/tex/latex/base/t1enc.def
  texlive/2017/texmf-dist/tex/latex/mathdesign/mdugm/t1mdugm.fd
  texlive/2017/texmf-dist/fonts/tfm/public/mathdesign/mdugm/mdugmr8t.tfm
  texlive/2017/texmf-dist/tex/latex/mathdesign/mdacmr.fd
  texlive/2017/texmf-dist/tex/latex/mathdesign/mdbcmr.fd
  texlive/2017/texmf-dist/fonts/vf/public/mathdesign/mdugm/mdugmr8t.vf
  texlive/2017/texmf-dist/fonts/tfm/public/mathdesign/mdugm/md-gmr8y.tfm
  texlive/2017/texmf-dist/fonts/tfm/public/mathdesign/mdugm/md-gmr8t.tfm
  texlive/2017/texmf-var/fonts/map/pdftex/updmap/pdftex.map

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From kakuto at fuk.kindai.ac.jp  Sat Jan 20 21:53:41 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Sun, 21 Jan 2018 05:53:41 +0900
Subject: [tex-live] TL2017's dvipdfmx prints warnings
In-Reply-To: <1bcf15012a6a363407ea18d6c8d17849.squirrel@box5445.bluehost.com>
References: <20180120151616.ORya6tg3S%rdt@cs.queensu.ca>
 <1bcf15012a6a363407ea18d6c8d17849.squirrel@box5445.bluehost.com>
Message-ID: <1F701C92582447348DBE3C8E7B90501B@CJ3001517A>

Dear Jack,

> And yet these warnings didn't appear until TL2017. 

You are right.
I found that the check of character width was
introduced by the author from TL 2017.

Thanks,
Akira


From reinhard.kotucha at web.de  Sun Jan 21 00:22:22 2018
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sun, 21 Jan 2018 00:22:22 +0100
Subject: [tex-live] TL2017's dvipdfmx prints warnings
In-Reply-To: <19D9B342794B4035BE355F7B5317B0D3@CJ3001517A>
References: <20180120151616.ORya6tg3S%rdt@cs.queensu.ca>
 <1bcf15012a6a363407ea18d6c8d17849.squirrel@box5445.bluehost.com>
 <19D9B342794B4035BE355F7B5317B0D3@CJ3001517A>
Message-ID: <23139.53038.314335.832917@gargle.gargle.HOWL>

On 2018-01-21 at 04:45:56 +0900, Akira Kakuto wrote:

 > Dear Jack,
 > 
 > > According to its manual (and also the top of mathdesign.sty), the
 > > mathdesign package hasn't changed since 2013.  And yet these warnings
 > > didn't appear until TL2017.  So there is something about TL2017 in
 > > particular that is either causing a bug or revealing a latent one.
 > 
 > For example, the character width of
 > character 91 (/bracketleft) from md-gmr8t.tfm and
 > md-gmr8t.pfb is found as:
 > 
 > 375.402 from (CHARWD R 0.375402) in md-gmr8t.tfm
 > 374     from 69 374 hsbw in md-gmr8t.pfb.
 > 
 > If |difference| > 1.0, warning is shown.
 > Please ignore the warning.

There is definitely a severe bug in the current version of xdvipdfmx.

Jack reported:

  xdvipdfmx:warning: Glyph width mismatch for TFM and font (md-gmr8t)
  xdvipdfmx:warning: TFM: 375.402 vs. Type1 font: 374

First of all, let me state that this warning message is extremely
helpful.  It clearly shows what's going wrong.

xdvipdfmx erroneously assumes that values in TFM files are in "big
points".  The obvious solution is to divide values read from a TFM
file by 72.27 and multiply them with 72.

  $ octave -q
  octave:1> 375.402 / 72.27 * 72
  ans =  374.00

I don't know whether DVI files are affected too.  Values therein are
most likely in pt rather than in bp and certainly have to be converted
as well.

Given that xdvipdfmx really assumes that values in TFM and/or DVI
files are in bp, I fear that the PDF output is also incorrect.

Jack, the warning messages will disappear whenever the bug is fixed.

 > If |difference| > 1.0, warning is shown.

The resolution of TeX's fixed point numbers is about a hundredth of
the wavelength of visible light.  Even if we expect rounding errors
somewhere, the threshold of 1bp is much too large in order to detect
any problems at all.

Akira, are you in contact with xdvipdfmx developers?

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From rdtennent at gmail.com  Sat Jan 20 17:54:22 2018
From: rdtennent at gmail.com (Bob Tennent)
Date: Sat, 20 Jan 2018 11:54:22 -0500
Subject: [tex-live] TL2017's dvipdfmx prints warnings
Message-ID: <20180120165422.qj870eG4i%rdtennent@gmail.com>


 >| My document never enters math mode, so I don't see why
 >| math fonts are in play.

Presumably mathdesign implements square brackets with its
math font.

 >|According to its manual (and also the top of
 >|mathdesign.sty), the mathdesign package hasn't changed
 >|since 2013. And yet these warnings didn't appear until
 >|TL2017. So there is something about TL2017 in particular
 >|that is either causing a bug or revealing a latent one.

Perhaps dvipdfmx now generates warnings that it didn't
bother with earlier. You can turn them off by using 
dvipdfmx -q.

Bob T.

From kakuto at fuk.kindai.ac.jp  Sun Jan 21 07:57:34 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Sun, 21 Jan 2018 15:57:34 +0900
Subject: [tex-live] TL2017's dvipdfmx prints warnings
In-Reply-To: <23139.53038.314335.832917@gargle.gargle.HOWL>
References: <20180120151616.ORya6tg3S%rdt@cs.queensu.ca><1bcf15012a6a363407ea18d6c8d17849.squirrel@box5445.bluehost.com><19D9B342794B4035BE355F7B5317B0D3@CJ3001517A>
 <23139.53038.314335.832917@gargle.gargle.HOWL>
Message-ID: <1E1FFC14982E47B5A8C045C527538E01@CJ3001517A>

Dear Reinhard,

> There is definitely a severe bug in the current version of xdvipdfmx.
> ... ...
> xdvipdfmx erroneously assumes that values in TFM files are in "big
> points".  The obvious solution is to divide values read from a TFM
> file by 72.27 and multiply them with 72.
>
>  $ octave -q
>  octave:1> 375.402 / 72.27 * 72
>  ans =  374.00

Those values are relative to the full width value of 1000,
or rarios. Thus they are dimensionless:
375.402 / 1000, and 374 / 1000.

If you try to transform to "big points", there will be full
of warning messages.
Please see ,e.g., an example of cmr12.tfm and cmr12.pfb:

cmr12.tfm
(CHARACTER O 0
   (CHARWD R 0.6118)
cmr12.pfb
/Gamma {
    41 611 hsbw

cmr12.tfm
(CHARACTER O 1
   (CHARWD R 0.815964)
cmr12.pfb
/Delta {
    46 815 hsbw

cmr12.tfm
(CHARACTER O 2
   (CHARWD R 0.761566)
cmr12.pfb
/Theta {
    54 761 hsbw

... ...

Thanks,
Akira


From shunsaku.hirata74 at gmail.com  Sun Jan 21 09:06:55 2018
From: shunsaku.hirata74 at gmail.com (Shunsaku Hirata)
Date: Sun, 21 Jan 2018 17:06:55 +0900
Subject: [tex-live] TL2017's dvipdfmx prints warnings
In-Reply-To: <23139.53038.314335.832917@gargle.gargle.HOWL>
References: <20180120151616.ORya6tg3S%rdt@cs.queensu.ca>
 <1bcf15012a6a363407ea18d6c8d17849.squirrel@box5445.bluehost.com>
 <19D9B342794B4035BE355F7B5317B0D3@CJ3001517A>
 <23139.53038.314335.832917@gargle.gargle.HOWL>
Message-ID: <CAOyMh2rgVXC3HUgO_-tmKeeXajjNZ5ziSSDwgZtOkKW8FV-31Q@mail.gmail.com>

> There is definitely a severe bug in the current version of xdvipdfmx.

This is definitely not a bug in xdvipdfmx.

> xdvipdfmx erroneously assumes that values in TFM files are in "big
> points".

No. They are all relative.


Shunsaku Hirata

From philipp.kupferschmied at gmail.com  Sun Jan 21 22:02:15 2018
From: philipp.kupferschmied at gmail.com (Philipp)
Date: Sun, 21 Jan 2018 22:02:15 +0100
Subject: [tex-live] tlmgr: Package verification
In-Reply-To: <20171107234529.g5hbuj54z3auykue@bulldog.preining.info>
References: <CAN8x3858EfWmd_5nUZBsBf1y=MSxYEwERgCoDnhDbwUBXnS1Uw@mail.gmail.com>
 <20171105235645.wt23nabaa55xztvo@bulldog.preining.info>
 <CAP7DCDfknNmPusvTMhPyQ-rSa8o1af=QTZ7hUvuCOG31UxJCUg@mail.gmail.com>
 <20171107234529.g5hbuj54z3auykue@bulldog.preining.info>
Message-ID: <CAN8x385Z9kQ6M1OFuH7YwT1oOgxL9iro=uqpzYhjwOwn=13rcg@mail.gmail.com>

As I just had to install Texlive on a new machine, I realized that I
don't understand the difference between "--require-verification" and
"--verifiy-downloads".

I installed from DVD, changed the repository afterwards to the CTAN
mirror and then ran "tlmgr update --self --require-verification" and
"tlmgr update --all --require-verification".
Is this sufficient to ensure that all downloaded packages are actually verified?
According to the manual, "verify-downloads" seems to be set to true by
default, so I guess one doesn't have to deal with that option unless
one wants to disable it?
What would happen if one combines "--require-verification" with
"--no-verify-downloads" or vice versa?

I also wanted to have a look at the config files for tlmgr to have a
look at the default values, but it seems that neither a system-wide
nor a user-specific file exists. Is this correct? (kpsewhich
-var-value=... lists paths for both, but the system-wide path only
contains a file named "ls-R" and the user-specific doesn't even
exist).

Regards,
Philipp

From norbert at preining.info  Mon Jan 22 01:11:29 2018
From: norbert at preining.info (Norbert Preining)
Date: Mon, 22 Jan 2018 09:11:29 +0900
Subject: [tex-live] tlmgr: Package verification
In-Reply-To: <CAN8x385Z9kQ6M1OFuH7YwT1oOgxL9iro=uqpzYhjwOwn=13rcg@mail.gmail.com>
References: <CAN8x3858EfWmd_5nUZBsBf1y=MSxYEwERgCoDnhDbwUBXnS1Uw@mail.gmail.com>
 <20171105235645.wt23nabaa55xztvo@bulldog.preining.info>
 <CAP7DCDfknNmPusvTMhPyQ-rSa8o1af=QTZ7hUvuCOG31UxJCUg@mail.gmail.com>
 <20171107234529.g5hbuj54z3auykue@bulldog.preining.info>
 <CAN8x385Z9kQ6M1OFuH7YwT1oOgxL9iro=uqpzYhjwOwn=13rcg@mail.gmail.com>
Message-ID: <20180122001127.pauq2cqn7vvjamso@bulldog.preining.info>

Hi,

verify-downloads sets the stage for general verification by searching
for a valid gpg binary. If this is not available, no verification can
happen.
verify-downloads can be set in the user or global configuration file
(TEXMFSYSCONFIG/tlmgr/config or TEXMFCONFIG/tlmgr/config) using the
key
  verify-downloads = 0|1
If verify-downloads is set to 0 in the config file, or via
--no-verify-downloads then gpg is not searched and all gpg operations
will error.

require-verification defines the policy what to do if a repository is
either not signed, or it is signed but the public key has not been
imported into the TeX Live keyring:
- if require-verification is off (default), missing signatures or
  unavailable public keys are *NOT* errors
- if require-verification is on, missing signatures or unavailable
  public keys results in tlmgr terminating.
Note however that for the *main* repository (tlnet) this is turned 
on by default, that means that whatever setting you have for 
require-verification, the signature of the main repository will
be checked.

Explanation:
- we know that the main repository is always signed, because we do not
  push out from our server to CTAN if the signature creation failed.
- we *don't* know whether all other repositories are signed, and in
  particular whether the user has imported the respect keys for
  verification.
- the defaults are set up that if gpg is available, the main repository
  will be checked, and other repositories will be checked *if* they
  provide a signature *and* the user has imported the remote public key.
- if an additional repository is not signed, or signed and the remote
  public key is not imported, and require-verification is not set, then
  tlmgr will *not* error out.

> I installed from DVD, changed the repository afterwards to the CTAN
> mirror and then ran "tlmgr update --self --require-verification" and
> "tlmgr update --all --require-verification".
> Is this sufficient to ensure that all downloaded packages are actually verified?

For packages downloaded from the main TeX Live repository, that is one
of the CTAN tlnet mirrors, this is enough if you have a gpg available.

> According to the manual, "verify-downloads" seems to be set to true by
> default, so I guess one doesn't have to deal with that option unless
> one wants to disable it?

Correct.

> What would happen if one combines "--require-verification" with
> "--no-verify-downloads" or vice versa?

Consequence of the above:
- because --no-verify-downloads is set, no gpg is initialized.
- because we require verification, all repositories, including main
  are checked with gpg, which results in a failure,
thus tlmgr will error out, as trivial experiment shows:

[~] tlmgr update --list
tlmgr: package repositories
	main = /home/norbert/public_html/tlnet (verified)
	tlcontrib = /home/norbert/Domains/server/texlive.info/contrib/2017 (verified)
	tltexjp = /home/norbert/public_html/tltexjp (verified)
	tlcritical = /home/norbert/public_html/tlcritical (verified)
tlmgr: saving backups to /home/norbert/tl/2017/tlpkg/backups
tlmgr: no updates available

[~] tlmgr --no-verify-downloads update --list
tlmgr: package repositories
	main = /home/norbert/public_html/tlnet (not verified: gpg unavailable)
	tltexjp = /home/norbert/public_html/tltexjp (not verified: gpg unavailable)
	tlcontrib = /home/norbert/Domains/server/texlive.info/contrib/2017 (not verified: gpg unavailable)
	tlcritical = /home/norbert/public_html/tlcritical (not verified: gpg unavailable)
tlmgr: saving backups to /home/norbert/tl/2017/tlpkg/backups
tlmgr: no updates available

[~] tlmgr --require-verification update --list
tlmgr: package repositories
	main = /home/norbert/public_html/tlnet (verified)
	tlcritical = /home/norbert/public_html/tlcritical (verified)
	tlcontrib = /home/norbert/Domains/server/texlive.info/contrib/2017 (verified)
	tltexjp = /home/norbert/public_html/tltexjp (verified)
tlmgr: saving backups to /home/norbert/tl/2017/tlpkg/backups
tlmgr: no updates available

[~] tlmgr --no-verify-downloads --require-verification update --list
Remote TeX Live database (/home/norbert/public_html/tlnet) is not verified, exiting.


Now, let us remove the signature of an additional repository
(tlcontrib):
[~] tlmgr update --list
tlmgr: package repositories
	main = /home/norbert/public_html/tlnet (verified)
	tltexjp = /home/norbert/public_html/tltexjp (verified)
	tlcontrib = /home/norbert/Domains/server/texlive.info/contrib/2017 (not verified: unsigned)
	tlcritical = /home/norbert/public_html/tlcritical (verified)
tlmgr: saving backups to /home/norbert/tl/2017/tlpkg/backups
tlmgr: no updates available

[~] tlmgr --no-verify-downloads update --list
  remains the same as above

[~] tlmgr --require-verification update --list
Remote TeX Live database (/home/norbert/Domains/server/texlive.info/contrib/2017) is not verified, exiting.

[~] tlmgr --no-verify-downloads --require-verification update --list
Remote TeX Live database (/home/norbert/public_html/tlnet) is not verified, exiting.

More or less the same happens if the remote key is not installed, just
the message in the first case (not verified: unsigned) changes.

> I also wanted to have a look at the config files for tlmgr to have a
> look at the default values, but it seems that neither a system-wide
> nor a user-specific file exists. Is this correct? (kpsewhich

No, this is not correct, see the documentation
https://www.tug.org/texlive/doc/tlmgr.html#CONFIGURATION-FILE-FOR-TLMGR

Hope that helps

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From philipp.kupferschmied at gmail.com  Mon Jan 22 18:35:10 2018
From: philipp.kupferschmied at gmail.com (Philipp)
Date: Mon, 22 Jan 2018 18:35:10 +0100
Subject: [tex-live] tlmgr update dry-run
Message-ID: <CAN8x384-78USDk7F7bAFzManEUJNtGh+uphPy17yreArWCTuAA@mail.gmail.com>

Hi,

I'm a bit confused by the --dry-run option for tlmgr update

I just ran "tlmgr update --all --require-verification --dry-run" and got

tlmgr.pl: package repository
http://ftp.gwdg.de/pub/ctan/systems/texlive/tlnet (verified)
tlmgr.pl update: dry run, no changes will be made
tlmgr.pl: saving backups to C:/texlive/2017/tlpkg/backups
[1/8, ??:??/??:??] update: luatexja [3553k] (45761 -> 46405)
[2/8, 00:00/00:00] update: pm-isomath [600k] (46012 -> 46402)
[3/8, 00:00/00:00] update: texlive-scripts [118k] (46306 -> 46398)
[4/8, 00:00/00:00] update: thesis-gwu [504k] (46114 -> 46403)
[5/8, 00:00/00:00] update: tlcockpit [12705k] (46392 -> 46406)
[6/8, 00:00/00:00] update: toptesi [5041k] (46074 -> 46404)
[7/8, 00:00/00:00] auto-install: fancyhandout (46401) [74k] ... [8/8,
00:00/00:00] update: collection-latexextra [6k] (46213 -> 46401)

Directly afterwards, I ran "tlmgr update --all --require-verification"
(i.e. the same command without the --dry-run option) and got
tlmgr.pl: package repository
ftp://ftp.tu-chemnitz.de/pub/tex/systems/texlive/tlnet (verified)
tlmgr.pl: saving backups to C:/texlive/2017/tlpkg/backups
tlmgr.pl: no updates available

So it looks to me as if either the updates where installed with the
first run despite the --dry-run option, or the option prevents the
updates from being found (again) when --dry-run is omitted afterwards.

Am I doing something wrong here, or is this a bug?

Regards,
Philipp

From P.Taylor at Rhul.Ac.Uk  Mon Jan 22 18:58:24 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor (RHUoL))
Date: Mon, 22 Jan 2018 17:58:24 +0000
Subject: [tex-live] tlmgr update dry-run
In-Reply-To: <CAN8x384-78USDk7F7bAFzManEUJNtGh+uphPy17yreArWCTuAA@mail.gmail.com>
References: <CAN8x384-78USDk7F7bAFzManEUJNtGh+uphPy17yreArWCTuAA@mail.gmail.com>
Message-ID: <f668c5a2-8d09-91bd-8a9b-2ca7ea68e99d@Rhul.Ac.Uk>



Philipp wrote:
> tlmgr.pl: package repository
> http://ftp.gwdg.de/pub/ctan/systems/texlive/tlnet (verified)
>
> tlmgr.pl: package repository
> ftp://ftp.tu-chemnitz.de/pub/tex/systems/texlive/tlnet (verified)

Is it possible that the two repositories are not in synch ?
Philip Taylor

From philipp.kupferschmied at gmail.com  Mon Jan 22 19:40:20 2018
From: philipp.kupferschmied at gmail.com (Philipp)
Date: Mon, 22 Jan 2018 19:40:20 +0100
Subject: [tex-live] tlmgr update dry-run
In-Reply-To: <f668c5a2-8d09-91bd-8a9b-2ca7ea68e99d@Rhul.Ac.Uk>
References: <CAN8x384-78USDk7F7bAFzManEUJNtGh+uphPy17yreArWCTuAA@mail.gmail.com>
 <f668c5a2-8d09-91bd-8a9b-2ca7ea68e99d@Rhul.Ac.Uk>
Message-ID: <CAN8x386XGnT3UqarLQ3=PoqeMjmcm8FiT+aDHfZxw3DKovyvYg@mail.gmail.com>

2018-01-22 18:58 GMT+01:00 Philip Taylor (RHUoL) <P.Taylor at rhul.ac.uk>:

> Is it possible that the two repositories are not in synch ?
> Philip Taylor

Thank you, this seems to have been the issue. I ran the command again,
and now the updates where found again.
I didn't think of this possibility.

Regards,
Philipp

From philipp.kupferschmied at gmail.com  Mon Jan 22 23:58:22 2018
From: philipp.kupferschmied at gmail.com (Philipp)
Date: Mon, 22 Jan 2018 23:58:22 +0100
Subject: [tex-live] tlmgr: Package verification
In-Reply-To: <20180122001127.pauq2cqn7vvjamso@bulldog.preining.info>
References: <CAN8x3858EfWmd_5nUZBsBf1y=MSxYEwERgCoDnhDbwUBXnS1Uw@mail.gmail.com>
 <20171105235645.wt23nabaa55xztvo@bulldog.preining.info>
 <CAP7DCDfknNmPusvTMhPyQ-rSa8o1af=QTZ7hUvuCOG31UxJCUg@mail.gmail.com>
 <20171107234529.g5hbuj54z3auykue@bulldog.preining.info>
 <CAN8x385Z9kQ6M1OFuH7YwT1oOgxL9iro=uqpzYhjwOwn=13rcg@mail.gmail.com>
 <20180122001127.pauq2cqn7vvjamso@bulldog.preining.info>
Message-ID: <CAN8x384FResvE6xJQ90vGVYBbm_LsOirvoSsQdw0cAxyhw4C7Q@mail.gmail.com>

Thank you for the detailed reply and explanation. Perhaps this could
also be made somewhat clearer in the tlmgr manual?
I still don't quite understand why --no-verify-downloads is needed: If
one has gpg installed, but doesn't want signatures to be checked,
wouldn't --no-require-verification suffice (apart from the main
repository, where you said this option has no effect)?


What I didn't realize up to now was that these settings have nothing
to do with the verification of the actual packages, i.e. the
computation and comparison of sha512 hashes, as introduced with
Texlive 2016.

Am I right that a) the Windows version ships with Perl's Digest::SHA
and that b) hashes of *all* downloaded/updated packages are computed
and compared with the values specified in the database file by
default? Both the terminal output and the logfile say nothing about
this, but as tlmgr seems to be rather silent as long as there are no
problems, I hope this is a good sign ;-)

I find the description in the manual a bit confusing, as it first
mentions package checksums, but then explains it further by refering
to texlive.tlpdb.sha512, which only seems to contain a hash for the
texlive.tlpdb file itself.
(The manual says "That is, for each texlive.tlpdb loaded from a
repository, the corresponding checksum file texlive.tlpdb.sha512 is
also downloaded, and tlmgr confirms whether the checksum of the
downloaded TLPDB file agrees with the download data." - which sounds
as if *only* the tlpdb file is verified).


>> I also wanted to have a look at the config files for tlmgr to have a
>> look at the default values, but it seems that neither a system-wide
>> nor a user-specific file exists. Is this correct? (kpsewhich
>
> No, this is not correct, see the documentation
> https://www.tug.org/texlive/doc/tlmgr.html#CONFIGURATION-FILE-FOR-TLMGR

I did read this and tried both  "kpsewhich -var-value TEXMFCONFIG" and
"kpsewhich -var-value TEXMFSYSCONFIG"

The former prints a path inside my user directory that does not exist,
the latter refers to "texmf-config" inside the Texlive install
directory, but there's only a file named "ls-R" inside, and no "tlmgr"
subfolder.
I guess I could place a config file at either location, but I wonder
if any default config file should already be there.

> Hope that helps

Yes, it did. Thanks again, and sorry for another ton of questions in
this mail...

Oh, and one more thing: "tlmgr --version" reports revision 46034 after
the latest update, but this version isn't yet listed in the tlmgr
news: https://www.tug.org/texlive/tlmgr-news.html



Philipp

From norbert at preining.info  Tue Jan 23 01:06:36 2018
From: norbert at preining.info (Norbert Preining)
Date: Tue, 23 Jan 2018 09:06:36 +0900
Subject: [tex-live] tlmgr: Package verification
In-Reply-To: <CAN8x384FResvE6xJQ90vGVYBbm_LsOirvoSsQdw0cAxyhw4C7Q@mail.gmail.com>
References: <CAN8x3858EfWmd_5nUZBsBf1y=MSxYEwERgCoDnhDbwUBXnS1Uw@mail.gmail.com>
 <20171105235645.wt23nabaa55xztvo@bulldog.preining.info>
 <CAP7DCDfknNmPusvTMhPyQ-rSa8o1af=QTZ7hUvuCOG31UxJCUg@mail.gmail.com>
 <20171107234529.g5hbuj54z3auykue@bulldog.preining.info>
 <CAN8x385Z9kQ6M1OFuH7YwT1oOgxL9iro=uqpzYhjwOwn=13rcg@mail.gmail.com>
 <20180122001127.pauq2cqn7vvjamso@bulldog.preining.info>
 <CAN8x384FResvE6xJQ90vGVYBbm_LsOirvoSsQdw0cAxyhw4C7Q@mail.gmail.com>
Message-ID: <20180123000634.nral6ksywt22qmoq@bulldog.preining.info>

Hi Philipp,

> also be made somewhat clearer in the tlmgr manual?

Yes indeed, it could be made clearer  :-)

> I still don't quite understand why --no-verify-downloads is needed: If
> one has gpg installed, but doesn't want signatures to be checked,
> wouldn't --no-require-verification suffice (apart from the main
> repository, where you said this option has no effect)?

Without --no-verify-downloads you will always get the main repository
checked, which cannot be turned off with --no-require-verification.
But with --no-verify-downloads even the main repo is not checked.

> What I didn't realize up to now was that these settings have nothing
> to do with the verification of the actual packages, i.e. the
> computation and comparison of sha512 hashes, as introduced with
> Texlive 2016.

I tend to not call this "verification" but integrity check. Without
verification of the signature of the main tlpdb, the package can still
contain anything (an attacker can change the content of a package as
well as the sha/md sums in the tlpdb). The checksum is here to guarantee
integrity of the downloaded package.

It is true that without verification this is not that useful, because
the un-xz is a very good integrity checker, too.

> Am I right that a) the Windows version ships with Perl's Digest::SHA
> and that b) hashes of *all* downloaded/updated packages are computed
> and compared with the values specified in the database file by

Yes.

> default? Both the terminal output and the logfile say nothing about
> this, but as tlmgr seems to be rather silent as long as there are no
> problems, I hope this is a good sign ;-)

Yes, the checksums are always done. Run tlmgr with -v and you will see
some more output:
...
D:12many upd package
D: done 12many.r1587.tar.xz, size 382132, 5e1a3e83b1f186dd4108843a0c248126566a20b9070b06f12a76b5e308615aeb5a419bdcbab2ccee66daeed1032e724ec016e5a005ac330e314228b6d5199b8e
...

If you run with -v -v then you will get even more (but expect faaaar too
much output to actually find it ;-)
...
D:12many upd package
DD:running system(tar -cf /home/norbert/tl/2017/tlpkg/backups/12many.r1587.tar texmf-dist/doc/latex/12many/12many.pdf texmf-dist/doc/latex/12many/README texmf-dist/source/latex/12many/12many.dtx texmf-dist/source/latex/12many/12many.ins texmf-dist/tex/latex/12many/12many.sty tlpkg/tlpobj/12many.tlpobj)
DD:tlchecksum: out = 8322d74706c0fa431319a937b1712d49a0244b9bc70b44bbe471a75603f99f89728f8270dc5369318a1fe8185d3667af097675e1b79f4d9931616d6a8e26255b
DD:tlchecksum: cs ===8322d74706c0fa431319a937b1712d49a0244b9bc70b44bbe471a75603f99f89728f8270dc5369318a1fe8185d3667af097675e1b79f4d9931616d6a8e26255b===
DD:xchdir(/home/norbert) ok
D: done 12many.r1587.tar.xz, size 382132, 8322d74706c0fa431319a937b1712d49a0244b9bc70b44bbe471a75603f99f89728f8270dc5369318a1fe8185d3667af097675e1b79f4d9931616d6a8e26255b

> (The manual says "That is, for each texlive.tlpdb loaded from a
> repository, the corresponding checksum file texlive.tlpdb.sha512 is
> also downloaded, and tlmgr confirms whether the checksum of the
> downloaded TLPDB file agrees with the download data." - which sounds
> as if *only* the tlpdb file is verified).

*verified* means that a cryptographic signature is checked. After that
each package in turn is checked for integrity, and as a consequence also
verified (unless the checksum mechanism is broken and can be
circumvented, which is with sha256 not possible at the moment).

> I did read this and tried both  "kpsewhich -var-value TEXMFCONFIG" and
> "kpsewhich -var-value TEXMFSYSCONFIG"
> 
> The former prints a path inside my user directory that does not exist,
> the latter refers to "texmf-config" inside the Texlive install
> directory, but there's only a file named "ls-R" inside, and no "tlmgr"
> subfolder.
> I guess I could place a config file at either location, but I wonder
> if any default config file should already be there.

No default config file is provided, none is necessary.

> Oh, and one more thing: "tlmgr --version" reports revision 46034 after
> the latest update, but this version isn't yet listed in the tlmgr
> news: https://www.tug.org/texlive/tlmgr-news.html

Because you install from tlcritical maybe? The tlmgr-news is for the
released version of tlmgr, not the one in testing/tlcritical.

All the best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From karl at freefriends.org  Tue Jan 23 01:17:01 2018
From: karl at freefriends.org (Karl Berry)
Date: Mon, 22 Jan 2018 17:17:01 -0700
Subject: [tex-live] tlmgr: Package verification
In-Reply-To: <20180123000634.nral6ksywt22qmoq@bulldog.preining.info> (message
 from Norbert Preining on Tue, 23 Jan 2018 09:06:36 +0900)
Message-ID: <86wp09e8ea.fsf@frenzy.freefriends.org>

    > Oh, and one more thing: "tlmgr --version" reports revision 46034 after
    > the latest update, but this version isn't yet listed in the tlmgr
    > news: https://www.tug.org/texlive/tlmgr-news.html

Oops, I forgot to update tlmgr-news after the last release.
It's there now. Thanks. -k

From jfbu at free.fr  Tue Jan 23 14:08:51 2018
From: jfbu at free.fr (jfbu)
Date: Tue, 23 Jan 2018 14:08:51 +0100
Subject: [tex-live] issue with texdoc footnote.dtx
Message-ID: <d7e1ec91-9fb7-6a05-8860-84f07c86b983@free.fr>

Hi,

latex package "disser" provides a file "footnote.dtx" which
shadows "footnote.dtx" from package "footnote"

$ kpsewhich footnote.dtx
/path/texlive/2017/texmf-dist/source/latex/disser/footnote.dtx

this is slightly perturbing...

but I guess as

$ ls /import/extra/burnol/texlive/2017/texmf-dist/source/latex/mdwtools
at.dtx	  doafter.dtx	mdwlist.dtx  mdwtab.dtx    sverb.dtx
cmtt.dtx  footnote.dtx	mdwmath.dtx  mdwtools.ins  syntax.dtx

it is not clearcut to which footnote.dtx best belong

It is not like if there was footnote/footnote.dtx

much to my awe, I see that

$ kpsewhich mdwtools/footnote.dtx

does output

/import/extra/burnol/texlive/2017/texmf-dist/source/latex/mdwtools/footnote.dtx

(which is the file I was looking for)

Best,

Jean-Fran?ois



From Enrico.Gregorio at univr.it  Tue Jan 23 15:52:19 2018
From: Enrico.Gregorio at univr.it (Enrico Gregorio)
Date: Tue, 23 Jan 2018 15:52:19 +0100
Subject: [tex-live] Bug in pdftex. Suggestions on who to report?
Message-ID: <2638DEF9-D367-43F6-88E9-87E3AE2EE42D@univr.it>

The following example, compiled with pdftex,

\edef\tenitnumber{\pdffontobjnum\tenit}
\message{The font number is \tenitnumber}

\tenitnumber

\bye

fails with

This is pdfTeX, Version 3.14159265-2.6-1.40.18 (TeX Live 2017) (preloaded format=pdftex)

 restricted \write18 enabled.
entering extended mode

(./alfon.tex{/usr/local/texlive/2017/texmf-var/fonts/map/pdftex/updmap/pdftex.m
ap} The font number is 1 [1]Assertion failed: (fo->last_char >= fo->first_char), function create_fontdictionary, file ../../../texk/web2c/pdftexdir/writefont.c, line 607.
 )Abort trap: 6

The similar 

\edef\first{\pdffeedback fontobjnum\tenit}

\first

\bye

doesn?t fail on LuaTeX.

Tested both on Mac OS X and Windows (Joseph Wright tested it).

Any suggestion on who to report the bug?

Ciao
Enrico

From philipp.kupferschmied at gmail.com  Tue Jan 23 19:27:32 2018
From: philipp.kupferschmied at gmail.com (Philipp)
Date: Tue, 23 Jan 2018 19:27:32 +0100
Subject: [tex-live] tlmgr: Package verification
In-Reply-To: <20180123000634.nral6ksywt22qmoq@bulldog.preining.info>
References: <CAN8x3858EfWmd_5nUZBsBf1y=MSxYEwERgCoDnhDbwUBXnS1Uw@mail.gmail.com>
 <20171105235645.wt23nabaa55xztvo@bulldog.preining.info>
 <CAP7DCDfknNmPusvTMhPyQ-rSa8o1af=QTZ7hUvuCOG31UxJCUg@mail.gmail.com>
 <20171107234529.g5hbuj54z3auykue@bulldog.preining.info>
 <CAN8x385Z9kQ6M1OFuH7YwT1oOgxL9iro=uqpzYhjwOwn=13rcg@mail.gmail.com>
 <20180122001127.pauq2cqn7vvjamso@bulldog.preining.info>
 <CAN8x384FResvE6xJQ90vGVYBbm_LsOirvoSsQdw0cAxyhw4C7Q@mail.gmail.com>
 <20180123000634.nral6ksywt22qmoq@bulldog.preining.info>
Message-ID: <CAN8x386v9y35NUm9otNzXp0k+4WBu7kM_RiWO2D_JhQB286ZBQ@mail.gmail.com>

Hi Norbert,

thanks again for shedding some light on the details of tlmgr.

> Yes indeed, it could be made clearer  :-)

I'd like to help here, but I haven't had an idea so far how it could
be made clearer.

> Without --no-verify-downloads you will always get the main repository
> checked, which cannot be turned off with --no-require-verification.
> But with --no-verify-downloads even the main repo is not checked.

Is this the only case where it makes a difference? I can't even guess
how many users might need it, but it would greatly simplify the manual
if "--(no)-verify-downloads" could be completely removed ;-)


> Yes, the checksums are always done. Run tlmgr with -v and you will see
> some more output:

Thanks for the hint, the additional output is indeed interesting.
Out of curiosity, I randomly picked one of the hashes printed by "-v"
and searched the tlpdb files for it (both texlive.tlpdb and all of the
texlive.tlpdb.somehash files). To my surprise, the hash wasn't found
anywhere.
I then had a look at the "backups" folder and calculated the
sha512-hashes of all the .tar.xz files there. I found that the hash I
had copied is the hash of "collection-latexextra.r46401.tar.xz". The
file is 5628 bytes in size, and its hash is
18DF732AAF72569D72FCD1DBEEB905FFBEB089D9FFC5FB01D7FC70431ADA735B28C01D35C61220064F90360963952803D93B16C8533FA1B74AC335B7859B1861

In the corresponding tlpdp, file, I found the following:
> name collection-latexextra
> category Collection
> revision 46401
> [...] lots of stuff ommitted
> containersize 5504
> containerchecksum 1ff42dd776de6e3325e1bca5b9975353b56531a5da2f961612c0e41e41b419a0b1a77a14191b935f591d7df14049fd8f4cea11ddec46851b43fa03ee9748cf92

I'd like to understand what is happening here. Obviously, the hash in
the database does not match the hash of the corresponding .tar.xz
file, but tlmgr did not complain. It also does not match the hash of
the .tar file that's inside, nor of the included .tlpobj file.

As the .tar.xz file is also 124 bytes larger than specified in the
database, I guess some bytes are stripped before the hash is
calculated? But if so, why? And why does -v print the "wrong" hash?
I also noted that in your example, -v prints a different hash than -v
-v, although the package/file seems to be the same?!



>> (The manual says "That is, for each texlive.tlpdb loaded from a
>> repository, the corresponding checksum file texlive.tlpdb.sha512 is
>> also downloaded, and tlmgr confirms whether the checksum of the
>> downloaded TLPDB file agrees with the download data." - which sounds
>> as if *only* the tlpdb file is verified).
>
> *verified* means that a cryptographic signature is checked. After that
> each package in turn is checked for integrity, and as a consequence also
> verified (unless the checksum mechanism is broken and can be
> circumvented, which is with sha256 not possible at the moment).

Sorry, my mistake - I used "verified" here, but meant integrity check,
i.e. comparison of sha512 hashes. The manual doesn't confuse these two
terms. Still, I think it's somewhat confusing. It first says:

> By default, package checksums computed and stored on the server (in the TLPDB) are
> compared to checksums computed locally after downloading.

This seems to precisely describe what is going on. The manual goes on with:

> That is, for each texlive.tlpdb loaded from a repository, the corresponding checksum file
> texlive.tlpdb.sha512 is also downloaded, and tlmgr confirms whether the checksum of the
> downloaded TLPDB file agrees with the download data.

This sounds to me as if hash computation and comparison is only done
for the tlpdb file(s), not for each downloaded package, so in my
opinion, it is rather misleading, given the first sentence.


Best regards,
Philipp

From webrown.cpp at gmail.com  Tue Jan 23 20:18:55 2018
From: webrown.cpp at gmail.com (W Brown)
Date: Tue, 23 Jan 2018 13:18:55 -0600
Subject: [tex-live] Suggestion
Message-ID: <0F688E54-E013-4B52-967D-057FEDF75800@gmail.com>

I respectfully would appreciate some additional high-level categorization of packages.  Examples of categories:

  - fonts
  - theses & dissertations
  - bibliography styles
  - languages, Western
  - languages, non-Western

Once thusly categorized, I would find it useful to be able to omit downloading & installing entire categories.  For example, I will never (again) write a thesis, so would prefer to save the space and effort of obtaining & maintaining any and all such packages.

Independent of the feasibility of the above, I want to thank everyone for the commitment and hard work that has gone and continues to go into providing such an incredibly useful software collection.

Best,

-- WEB




From karl at freefriends.org  Tue Jan 23 23:50:39 2018
From: karl at freefriends.org (Karl Berry)
Date: Tue, 23 Jan 2018 22:50:39 GMT
Subject: [tex-live] Bug in pdftex. Suggestions on who to report?
In-Reply-To: <2638DEF9-D367-43F6-88E9-87E3AE2EE42D@univr.it>
Message-ID: <201801232250.w0NModhd014269@freefriends.org>

    Any suggestion on who to report the bug?

In principle, pdftex bugs are best reported to ntg-pdftex at ntg.nl, but in
practice, Akira, Thanh, or I are the only ones likely to look at it, and
Akira and I are on this list too, so close enough :). Will see what we
can see ... thanks for the report, karl.

From karl at freefriends.org  Tue Jan 23 23:50:40 2018
From: karl at freefriends.org (Karl Berry)
Date: Tue, 23 Jan 2018 22:50:40 GMT
Subject: [tex-live] issue with texdoc footnote.dtx
In-Reply-To: <d7e1ec91-9fb7-6a05-8860-84f07c86b983@free.fr>
Message-ID: <201801232250.w0NMoeuf014277@freefriends.org>

    latex package "disser" provides a file "footnote.dtx" which
    shadows "footnote.dtx" from package "footnote"

I do not try to keep names in the source/ (or doc/) trees unique;
that is, I don't complain to authors about duplicate names there.
Dealing with the tex/ and fonts/ trees is plenty painful enough.

If you want to ask the mdwtools and/or disser authors to uniqify their
dtx names, go right ahead. Would be all to the good ... --best, karl.

From rdtennent at gmail.com  Wed Jan 24 02:42:10 2018
From: rdtennent at gmail.com (Bob Tennent)
Date: Tue, 23 Jan 2018 20:42:10 -0500
Subject: [tex-live] interfering tfms
Message-ID: <20180124014210.QpMXEzU2M%rdtennent@gmail.com>


A user has complained that the tgothic fonts aren't working:

https://tex.stackexchange.com/questions/410965

It seems the ptex-fonts package includes tfms that interfere
with constructing tfms from the bookhands sources.

I got the latter working by forcing removal of the
ptex-fonts package. Is there a better way?

Bob T.

From norbert at preining.info  Wed Jan 24 03:41:39 2018
From: norbert at preining.info (Norbert Preining)
Date: Wed, 24 Jan 2018 11:41:39 +0900
Subject: [tex-live] interfering tfms
In-Reply-To: <20180124014210.QpMXEzU2M%rdtennent@gmail.com>
References: <20180124014210.QpMXEzU2M%rdtennent@gmail.com>
Message-ID: <20180124024137.v44g2lxs5z2w7xrd@bulldog.preining.info>

> It seems the ptex-fonts package includes tfms that interfere
> with constructing tfms from the bookhands sources.

I opened an issue with the Japanese TeX Developer Community
https://github.com/texjporg/ptex-fonts/issues/2

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From h.y.acetaminophen at gmail.com  Wed Jan 24 04:14:26 2018
From: h.y.acetaminophen at gmail.com (Hironobu Yamashita)
Date: Wed, 24 Jan 2018 12:14:26 +0900
Subject: [tex-live] interfering tfms
In-Reply-To: <20180124024137.v44g2lxs5z2w7xrd@bulldog.preining.info>
References: <20180124014210.QpMXEzU2M%rdtennent@gmail.com>
 <20180124024137.v44g2lxs5z2w7xrd@bulldog.preining.info>
Message-ID: <CAJCZBmTe+w800tnFes_hEw2t5abQdD7bgQK36-2ig_MCQWgE6g@mail.gmail.com>

Hi,

I'm one of the maintainers of ptex-fonts, Japanesee TeX Development Community
We _cannot_ change the font name, as "tgoth10,tfm" has been existed since 1980s,
and almost all of Japanese classees and packages assume it exists.
Also, "tgoth10.tfm" is a default pTeX / pLaTeX font used in both formats.

The possibility is that restricting the search path (TEXINPUTS?)
for Japanese tgoth10,tfm for pTeX-related formats in texmf.cnf
in the TeX Live distribution side. Is it possible?

----
Hironobu Yamashita


2018-01-24 11:41 GMT+09:00 Norbert Preining <norbert at preining.info>:
>> It seems the ptex-fonts package includes tfms that interfere
>> with constructing tfms from the bookhands sources.
>
> I opened an issue with the Japanese TeX Developer Community
> https://github.com/texjporg/ptex-fonts/issues/2
>
> Best
>
> Norbert
>
> --
> PREINING Norbert                               http://www.preining.info
> Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From norbert at preining.info  Wed Jan 24 05:00:32 2018
From: norbert at preining.info (Norbert Preining)
Date: Wed, 24 Jan 2018 13:00:32 +0900
Subject: [tex-live] tlmgr: Package verification
In-Reply-To: <CAN8x386v9y35NUm9otNzXp0k+4WBu7kM_RiWO2D_JhQB286ZBQ@mail.gmail.com>
References: <CAN8x3858EfWmd_5nUZBsBf1y=MSxYEwERgCoDnhDbwUBXnS1Uw@mail.gmail.com>
 <20171105235645.wt23nabaa55xztvo@bulldog.preining.info>
 <CAP7DCDfknNmPusvTMhPyQ-rSa8o1af=QTZ7hUvuCOG31UxJCUg@mail.gmail.com>
 <20171107234529.g5hbuj54z3auykue@bulldog.preining.info>
 <CAN8x385Z9kQ6M1OFuH7YwT1oOgxL9iro=uqpzYhjwOwn=13rcg@mail.gmail.com>
 <20180122001127.pauq2cqn7vvjamso@bulldog.preining.info>
 <CAN8x384FResvE6xJQ90vGVYBbm_LsOirvoSsQdw0cAxyhw4C7Q@mail.gmail.com>
 <20180123000634.nral6ksywt22qmoq@bulldog.preining.info>
 <CAN8x386v9y35NUm9otNzXp0k+4WBu7kM_RiWO2D_JhQB286ZBQ@mail.gmail.com>
Message-ID: <20180124040032.hey5gbzwdzw2tba3@bulldog.preining.info>

Hi Philipp,

(btw, removing Martin, he is anyway on the list I guess)

> I'd like to help here, but I haven't had an idea so far how it could
> be made clearer.

If I have some spare time, I will try to write up more details, but I am
not sure whether the tlmgr man page is the correct place.

> 
> > Without --no-verify-downloads you will always get the main repository
> > checked, which cannot be turned off with --no-require-verification.
> > But with --no-verify-downloads even the main repo is not checked.
> 
> Is this the only case where it makes a difference? I can't even guess

Wellm these are conceptionally two different things: The one controls
whether checks should be made, the other controls whether missing
signatures should be treated as errors or not.

Thus there are more differences: With --no-verify-downloads, nothing is
done, and no gpg available or so is reported. While without it, the
signature status (no signature, missing public key, ...) is reported.

> texlive.tlpdb.somehash files). To my surprise, the hash wasn't found
> anywhere.

Indeed, there are a lot of components playing into, one being that the
logging of checksum was not done in all places :-((( Sorry for that.
The other thing was that the actual packages were only checked against
the sizes and not the checksum, due to some refactoring at some point
(renaming the checksum data from containermd5 to containerchecksum).

This has been fixed now in the subversion repository and will be pushed
out rather soon. Now with -v tlmgr would spit out something like this:

D:tlpdb:_install_data: what=/home/norbert/public_html/tlnet/archive/collection-latexextra.tar.xz, target=/home/norbert/tl/2017/texmf-dist, size=5504, checksum=6e72d01334e032e927d1ccc06e50766d6d151e20e6d6997a3c4e2950b73bc082bce773a946930b9db9ec20f323a88a2d242f0cb012998a258fc4244de546fb33, tmpdir=/tmp/UQNV4diBME/lzqy7LKVuv
D:check_file /tmp/UQNV4diBME/lzqy7LKVuv/collection-latexextra.tar.xz, 6e72d01334e032e927d1ccc06e50766d6d151e20e6d6997a3c4e2950b73bc082bce773a946930b9db9ec20f323a88a2d242f0cb012998a258fc4244de546fb33, 5504
D:tlchecksum(/tmp/UQNV4diBME/lzqy7LKVuv/collection-latexextra.tar.xz): ===6e72d01334e032e927d1ccc06e50766d6d151e20e6d6997a3c4e2950b73bc082bce773a946930b9db9ec20f323a88a2d242f0cb012998a258fc4244de546fb33===
D:TLUtils::check_file: checksums for /tmp/UQNV4diBME/lzqy7LKVuv/collection-latexextra.tar.xz agree
D:un-xzing /tmp/UQNV4diBME/lzqy7LKVuv/collection-latexextra.tar.xz to /tmp/UQNV4diBME/lzqy7LKVuv/collection-latexextra.tar

Big thanks for your insistance which pointed me at insufficiencies *and*
bugs in the code!!!!

Thanks

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From norbert at preining.info  Wed Jan 24 05:22:12 2018
From: norbert at preining.info (Norbert Preining)
Date: Wed, 24 Jan 2018 13:22:12 +0900
Subject: [tex-live] interfering tfms
In-Reply-To: <CAJCZBmTe+w800tnFes_hEw2t5abQdD7bgQK36-2ig_MCQWgE6g@mail.gmail.com>
References: <20180124014210.QpMXEzU2M%rdtennent@gmail.com>
 <20180124024137.v44g2lxs5z2w7xrd@bulldog.preining.info>
 <CAJCZBmTe+w800tnFes_hEw2t5abQdD7bgQK36-2ig_MCQWgE6g@mail.gmail.com>
Message-ID: <20180124042212.6wykziavnta4tzpk@bulldog.preining.info>

HI Bob, Hironobu,

> We _cannot_ change the font name, as "tgoth10,tfm" has been existed since 1980s,

Indeed, and already in 2011 Karl realized that and stated it clearly:
https://www.tug.org/pipermail/tex-live/2011-August/030031.html

The user on sx used files that are NOT provided by TeX Live and was
suprised that there was a conflict. 

I agree with Karl that tgothic package should change the font names,
which is far easier than changing a range of several TeX engines and
support document.

Thanks

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From preining at logic.at  Wed Jan 24 07:26:14 2018
From: preining at logic.at (Norbert Preining)
Date: Wed, 24 Jan 2018 15:26:14 +0900
Subject: [tex-live] Suggestion
In-Reply-To: <0F688E54-E013-4B52-967D-057FEDF75800@gmail.com>
References: <0F688E54-E013-4B52-967D-057FEDF75800@gmail.com>
Message-ID: <20180124062612.j6axofnny2wgn4p2@bulldog.preining.info>

Hi W

>   - fonts

collection-fontsrecommended
collection-fontsextra

>   - theses & dissertations

collection-publishers

>   - bibliography styles

collection-bibtexextra

>   - languages, Western
>   - languages, non-Western

collection-langXXXX

> Once thusly categorized, I would find it useful to be able to omit downloading & installing entire categories.  For example, I will never (again) write a thesis, so would prefer to save the space and effort of obtaining & maintaining any and all such packages.

No problem, just install
  scheme-small
and then add what is needed with tlmgr.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From philipp.kupferschmied at gmail.com  Wed Jan 24 08:01:48 2018
From: philipp.kupferschmied at gmail.com (Philipp)
Date: Wed, 24 Jan 2018 08:01:48 +0100
Subject: [tex-live] tlmgr: Package verification
In-Reply-To: <20180124040032.hey5gbzwdzw2tba3@bulldog.preining.info>
References: <CAN8x3858EfWmd_5nUZBsBf1y=MSxYEwERgCoDnhDbwUBXnS1Uw@mail.gmail.com>
 <20171105235645.wt23nabaa55xztvo@bulldog.preining.info>
 <CAP7DCDfknNmPusvTMhPyQ-rSa8o1af=QTZ7hUvuCOG31UxJCUg@mail.gmail.com>
 <20171107234529.g5hbuj54z3auykue@bulldog.preining.info>
 <CAN8x385Z9kQ6M1OFuH7YwT1oOgxL9iro=uqpzYhjwOwn=13rcg@mail.gmail.com>
 <20180122001127.pauq2cqn7vvjamso@bulldog.preining.info>
 <CAN8x384FResvE6xJQ90vGVYBbm_LsOirvoSsQdw0cAxyhw4C7Q@mail.gmail.com>
 <20180123000634.nral6ksywt22qmoq@bulldog.preining.info>
 <CAN8x386v9y35NUm9otNzXp0k+4WBu7kM_RiWO2D_JhQB286ZBQ@mail.gmail.com>
 <20180124040032.hey5gbzwdzw2tba3@bulldog.preining.info>
Message-ID: <CAN8x387Lb63CL9WctUdo84QYDNiu9iBhv2+U4yMMF2+os8xv8w@mail.gmail.com>

Hi Norbert,

> Indeed, there are a lot of components playing into, one being that the
> logging of checksum was not done in all places :-((( Sorry for that.
> The other thing was that the actual packages were only checked against
> the sizes and not the checksum, due to some refactoring at some point
> (renaming the checksum data from containermd5 to containerchecksum).

Oh, that's bad news. :-( So in the worst case, a compromised mirror
could have delivered arbitrary packages, as long as they matched the
original version in size?

But despite all this, one question remains: From what I can tell, "-v"
printed the actual checksum of the tar.xz file, but the database
contained another checksum.
This would mean that the file that was downloaded is not what it
should be according to the database. The size also did not match, so
even if tlmgr ignored the checksum mismatch, this should not have
worked. Doesn't the database entry refer to the .tar.xz file(s)?

> Big thanks for your insistance which pointed me at insufficiencies *and*
> bugs in the code!!!!

I'm glad if I could help.

Best regards,
Philipp

From norbert at preining.info  Wed Jan 24 08:26:14 2018
From: norbert at preining.info (Norbert Preining)
Date: Wed, 24 Jan 2018 16:26:14 +0900
Subject: [tex-live] tlmgr: Package verification
In-Reply-To: <CAN8x387Lb63CL9WctUdo84QYDNiu9iBhv2+U4yMMF2+os8xv8w@mail.gmail.com>
References: <20171105235645.wt23nabaa55xztvo@bulldog.preining.info>
 <CAP7DCDfknNmPusvTMhPyQ-rSa8o1af=QTZ7hUvuCOG31UxJCUg@mail.gmail.com>
 <20171107234529.g5hbuj54z3auykue@bulldog.preining.info>
 <CAN8x385Z9kQ6M1OFuH7YwT1oOgxL9iro=uqpzYhjwOwn=13rcg@mail.gmail.com>
 <20180122001127.pauq2cqn7vvjamso@bulldog.preining.info>
 <CAN8x384FResvE6xJQ90vGVYBbm_LsOirvoSsQdw0cAxyhw4C7Q@mail.gmail.com>
 <20180123000634.nral6ksywt22qmoq@bulldog.preining.info>
 <CAN8x386v9y35NUm9otNzXp0k+4WBu7kM_RiWO2D_JhQB286ZBQ@mail.gmail.com>
 <20180124040032.hey5gbzwdzw2tba3@bulldog.preining.info>
 <CAN8x387Lb63CL9WctUdo84QYDNiu9iBhv2+U4yMMF2+os8xv8w@mail.gmail.com>
Message-ID: <20180124072614.yxgsrr56p74fjpzh@bulldog.preining.info>

Hi,

> Oh, that's bad news. :-( So in the worst case, a compromised mirror
> could have delivered arbitrary packages, as long as they matched the
> original version in size?

Well, that was the case for the last 10 years, without even the size
check ;-) No we have at least a guaranteed size check ;-) And with the
fixes I just committed again also checksum checks.

> But despite all this, one question remains: From what I can tell, "-v"
> printed the actual checksum of the tar.xz file, but the database
> contained another checksum.

No, it printed the checksum of the backup made before doing the upgrade.
That is of course not registered anywhere because it depends on the
system.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From rdt at cs.queensu.ca  Wed Jan 24 11:47:40 2018
From: rdt at cs.queensu.ca (Bob Tennent)
Date: Wed, 24 Jan 2018 05:47:40 -0500
Subject: [tex-live] interfering tfms
Message-ID: <20180124104740.7YKHFkRTj%rdt@cs.queensu.ca>

 >|I agree with Karl that tgothic package should change the
 >|font names, which is far easier than changing a range of
 >|several TeX engines and support document.

The developer (Peter Wilson) says

 I did the Gothic fonts and packages in 2002 but that's
 a long time ago and looking at some of the code now I
 don't understand it. My original coding has been lost with
 international moves and various computers.

so I think that option isn't available.  

It's unlikely any user would need both Olde Englishe fonts
and Japanese fonts. Perhaps some cautionary advice in the
tgothic README would suffice. But what should that advice
be: if necessary, remove ptex before using tgothic? My
original question was "Is there a better way?"

Bob T.

From P.Taylor at Rhul.Ac.Uk  Wed Jan 24 12:34:14 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor (RHUoL))
Date: Wed, 24 Jan 2018 11:34:14 +0000
Subject: [tex-live] interfering tfms
In-Reply-To: <20180124104740.7YKHFkRTj%rdt@cs.queensu.ca>
References: <20180124104740.7YKHFkRTj%rdt@cs.queensu.ca>
Message-ID: <4af73c79-c2cd-2389-f9b1-263e267f8e3d@Rhul.Ac.Uk>



Bob Tennent wrote:
>   
> It's unlikely any user would need both Olde Englishe fonts
> and Japanese fonts.
Thomas J Watson (founder of IBM) thought it unlikely that the world 
would ever need more than five computers ...

Philip Taylor

From preining at logic.at  Wed Jan 24 14:17:07 2018
From: preining at logic.at (Norbert Preining)
Date: Wed, 24 Jan 2018 22:17:07 +0900
Subject: [tex-live] interfering tfms
In-Reply-To: <20180124104740.7YKHFkRTj%rdt@cs.queensu.ca>
References: <20180124104740.7YKHFkRTj%rdt@cs.queensu.ca>
Message-ID: <20180124131707.oh6feckupj3kaqdm@bulldog.preining.info>

Hi Bob, hi all,

>  I did the Gothic fonts and packages in 2002 but that's
>  a long time ago and looking at some of the code now I
>  don't understand it. My original coding has been lost with
>  international moves and various computers.
> 
> so I think that option isn't available.  

It is, it is trivial. Just rename the font/mf tgoth10, tgoth7, tgoth17
to tgothr10, tgothr7, tgothr17.

Attached is a patch to the dtx file and the README that fixes all
problems and interferences. 

I tested it by running the .ins runner, installed all the .mf/.sty/.fd
into my TeX Live system, and then did run the document allfonts.tex.
No problem.

So it is only a question of getting Peter to upload a fixed package,
or the permission that I can upload it.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tgoth.diff
Type: text/x-diff
Size: 3056 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20180124/bef489c1/attachment.bin>

From jfbu at free.fr  Wed Jan 24 09:34:26 2018
From: jfbu at free.fr (jfbu)
Date: Wed, 24 Jan 2018 09:34:26 +0100
Subject: [tex-live] pygmentex package inclusion in collection math-science
Message-ID: <0A35A886-C591-4AA0-881E-D6F9B0611778@free.fr>

Hi,

today I added collection-mathscience to an installation
and discovered package "pygmentex" on this occasion

After reading its documentation I see it does very similar
task as package minted,
but minted is categorized in latex-extra

The packages achieving very similar things it is odd that
they end up in distinct collections,

pygmentex and minted do share the

cat-topics:  listing synt-hlt

tag

Best,

Jean-Fran?ois



From zdenek.wagner at gmail.com  Wed Jan 24 14:28:03 2018
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 24 Jan 2018 14:28:03 +0100
Subject: [tex-live] interfering tfms
In-Reply-To: <4af73c79-c2cd-2389-f9b1-263e267f8e3d@Rhul.Ac.Uk>
References: <20180124104740.7YKHFkRTj%rdt@cs.queensu.ca>
 <4af73c79-c2cd-2389-f9b1-263e267f8e3d@Rhul.Ac.Uk>
Message-ID: <CAC1phyaOy7rfvzzQ6Cx5VymSYstdj-O7_-MG5r6K-WY6OAYuiw@mail.gmail.com>

Look at this book: https://www.databazeknih.cz/knihy/je-jaro-1-36-178314
1+36 in the title means that is is a Czech text translated into 36
languages including Japanese, Chinese, Hindi, Persian, Arabic, Hebrew,
modern and ancient Greek, modern and ancient Mongolian, Amharic and others.
It si a rare book but you can see, that a lot of scripts were needed
(althoug some texts were scanned manuscripts, some texts were created by
other program then TeX, pages exported as EPS and included as images).


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2018-01-24 12:34 GMT+01:00 Philip Taylor (RHUoL) <P.Taylor at rhul.ac.uk>:

>
>
> Bob Tennent wrote:
>
>>   It's unlikely any user would need both Olde Englishe fonts
>> and Japanese fonts.
>>
> Thomas J Watson (founder of IBM) thought it unlikely that the world would
> ever need more than five computers ...
>
> Philip Taylor
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180124/8820b493/attachment.html>

From herries.press at earthlink.net  Wed Jan 24 19:20:28 2018
From: herries.press at earthlink.net (Peter Wilson)
Date: Wed, 24 Jan 2018 18:20:28 +0000
Subject: [tex-live] interfering tfms
In-Reply-To: <30beb921-8929-ada7-f886-971153005303@earthlink.net>
References: <20180124104740.7YKHFkRTj%rdt@cs.queensu.ca>
 <20180124131707.oh6feckupj3kaqdm@bulldog.preining.info>
 <30beb921-8929-ada7-f886-971153005303@earthlink.net>
Message-ID: <1ec2dc48-dff9-e895-4089-3549e6cf8020@earthlink.net>

On 24/01/18 18:17, Peter Wilson wrote:
>
> Norbert,
>
> Thank you so much for providing a patch to the dtx and other files. 
> Even more so for your offer to upload the patched results to CTAN. 
> Please, please do it.
>
> Best regards
>
> Peter W.
>
>
> On 24/01/18 13:17, Norbert Preining wrote:
>> Hi Bob, hi all,
>>
>>>   I did the Gothic fonts and packages in 2002 but that's
>>>   a long time ago and looking at some of the code now I
>>>   don't understand it. My original coding has been lost with
>>>   international moves and various computers.
>>>
>>> so I think that option isn't available.
>> It is, it is trivial. Just rename the font/mf tgoth10, tgoth7, tgoth17
>> to tgothr10, tgothr7, tgothr17.
>>
>> Attached is a patch to the dtx file and the README that fixes all
>> problems and interferences.
>>
>> I tested it by running the .ins runner, installed all the .mf/.sty/.fd
>> into my TeX Live system, and then did run the document allfonts.tex.
>> No problem.
>>
>> So it is only a question of getting Peter to upload a fixed package,
>> or the permission that I can upload it.
>>
>> Best
>>
>> Norbert
>>
>> --
>> PREINING Norberthttp://www.preining.info
>> Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
>> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
>


From karl at freefriends.org  Thu Jan 25 01:59:38 2018
From: karl at freefriends.org (Karl Berry)
Date: Thu, 25 Jan 2018 00:59:38 GMT
Subject: [tex-live] pygmentex package inclusion in collection
	math-science
In-Reply-To: <0A35A886-C591-4AA0-881E-D6F9B0611778@free.fr>
Message-ID: <201801250059.w0P0xcrv030281@freefriends.org>

    The packages achieving very similar things it is odd that
    they end up in distinct collections,

I must not have been thinking clearly when I added pygmentex.
Moved to c-latexextra. Thanks. -k

From reinhard.kotucha at web.de  Thu Jan 25 02:26:50 2018
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Thu, 25 Jan 2018 02:26:50 +0100
Subject: [tex-live] interfering tfms
In-Reply-To: <20180124042212.6wykziavnta4tzpk@bulldog.preining.info>
References: <20180124014210.QpMXEzU2M%rdtennent@gmail.com>
 <20180124024137.v44g2lxs5z2w7xrd@bulldog.preining.info>
 <CAJCZBmTe+w800tnFes_hEw2t5abQdD7bgQK36-2ig_MCQWgE6g@mail.gmail.com>
 <20180124042212.6wykziavnta4tzpk@bulldog.preining.info>
Message-ID: <23145.12890.426174.960069@gargle.gargle.HOWL>

On 2018-01-24 at 13:22:12 +0900, Norbert Preining wrote:

 > I agree with Karl that tgothic package should change the font
 > names, which is far easier than changing a range of several TeX
 > engines and support document.

LaTeX users usually include a macro package in order to select a font.
In this case the actual names of .tfm files can be changed at any time
if the macro packages are adapted accordingly.

The problem is plain TeX.  TeX's \font primitive expects basenames
of .tfm file as arguments, for instance

  \font cmr10

loads cmr10.tfm .

Renamed TFM files break existing documents.

There is no simple solution.  If the names of the Japanese .tfm files
are changed, it might be possible to re-define the \font primitive in
p[la]tex format files in order to preserve backwards compatibility.

What I can imagine is that the p[la]tex format files contain lookup
tables which map "tgoth10[.tfm]" to "ptex_tgoth10[.tfm]", for
instance.  This is probably a reasonable approach if not too many
fonts are concerned.

Since TeX is not the most comfortable programming language, I'm aware
that all this is easier said than done.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From norbert at preining.info  Thu Jan 25 05:43:50 2018
From: norbert at preining.info (Norbert Preining)
Date: Thu, 25 Jan 2018 13:43:50 +0900
Subject: [tex-live] interfering tfms
In-Reply-To: <23145.12890.426174.960069@gargle.gargle.HOWL>
References: <20180124014210.QpMXEzU2M%rdtennent@gmail.com>
 <20180124024137.v44g2lxs5z2w7xrd@bulldog.preining.info>
 <CAJCZBmTe+w800tnFes_hEw2t5abQdD7bgQK36-2ig_MCQWgE6g@mail.gmail.com>
 <20180124042212.6wykziavnta4tzpk@bulldog.preining.info>
 <23145.12890.426174.960069@gargle.gargle.HOWL>
Message-ID: <20180125044350.oh3uabnbwtwrn5y6@bulldog.preining.info>

Hi Reinhard,

> The problem is plain TeX.  TeX's \font primitive expects basenames
> of .tfm file as arguments, for instance

Yes of course, but since the tgoth10.tfm of the tgothic package have
never been part of TeX Live I am more than indifferent against this
problem.

> Renamed TFM files break existing documents.

Not in this case, because it would have been broken from the very
beginning using the wrong tfms.

> There is no simple solution.  If the names of the Japanese .tfm files
> are changed, it might be possible to re-define the \font primitive in
> p[la]tex format files in order to preserve backwards compatibility.

This would break far more documents, than you could imagine, and it
would be break with what is currently in TeX Live.

I will upload a new tgothic package with the posted changes.

Best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From enrico.gregorio at gmail.com  Fri Jan 26 11:05:27 2018
From: enrico.gregorio at gmail.com (Enrico Gregorio)
Date: Fri, 26 Jan 2018 11:05:27 +0100
Subject: [tex-live] =?utf-8?q?Issue_with_XeTeX_on_MacTeX_related_to_=22=5C?=
 =?utf-8?b?aW5wdXR84oCd?=
Message-ID: <2AFFCFFE-5818-491A-ADBD-89B8BEFCE4A4@gmail.com>

I get back with the same issue I reported a few months ago,
hoping it will be solved in the next release. I?m certain others
suffer with the issue.

If I typeset the following noinput.tex test file with ?xetex -shell-escape noinput?

---\input"|echo $(date)?\relax---

---\input"|echo $(date)?\relax---

\bye

the console output is

> xetex -shell-escape noinput
This is XeTeX, Version 3.14159265-2.6-0.99998 (TeX Live 2017) (preloaded format=xetex)
 \write18 enabled.
entering extended mode
(./noinput.tex (|echo $(date)---) (|echo $(date)---) [1] >

Note the missing newline. No PDF file is produced. If I call it as

> xetex -shell-escape -no-pdf noinput && xdvipdfmx noinput

then a PDF file is produced, but only the first \input| command shows output. The
second one seems to just produce a \par. The console output, in this case, is

This is XeTeX, Version 3.14159265-2.6-0.99998 (TeX Live 2017) (preloaded format=xetex)
 \write18 enabled.
entering extended mode
(./noinput.tex (|echo $(date)) (|echo $(date)) [1] )
Output written on noinput.xdv (1 page, 288 bytes).
Transcript written on noinput.log.
noinput -> noinput.pdf
[1]
3338 bytes written

The log file shows nothing suspicious.

Ciao
Enrico

From enrico.gregorio at gmail.com  Fri Jan 26 16:08:28 2018
From: enrico.gregorio at gmail.com (Enrico Gregorio)
Date: Fri, 26 Jan 2018 16:08:28 +0100
Subject: [tex-live]
 =?utf-8?q?Issue_with_XeTeX_on_MacTeX_related_to_=22=5C?=
 =?utf-8?b?aW5wdXR84oCd?=
In-Reply-To: <CMM.0.95.0.1516978746.beebe@gamma.math.utah.edu>
References: <CMM.0.95.0.1516978746.beebe@gamma.math.utah.edu>
Message-ID: <3648B705-2564-47C4-BFA8-F37155557765@gmail.com>


> On 26 Jan 2018, at 15:59 , Nelson H. F. Beebe <beebe at math.utah.edu> wrote:
> 
> I tried your experiment with the file
> 
> 	% cat /var/tmp/noinput.tex 
> 	---\input"|echo $(date)--
> 	---\input"|echo $(date)--
> 	\bye
> 
> and with both
> 
> 	xetex -shell-escape noinput
> 	xetex -shell-escape -no-pdf noinput && xdvipdfmx noinput
> 
> on my new TeX Live 2018 build on GNU/Linux (CentOS 7), I got expected
> PDF files with output similar to this:
> 
> 	--Fri Jan 26 06:52:15 MST 2018 --
> 	--Fri Jan 26 06:52:15 MST 2018 --

Yes, it seems a specific issue with MacTeX.

I tried on a vanilla TeX Live on Fedora and on TeX Live/Debian 2016,
the result is as expected in both cases.

Ciao
Enrico

From gnwiii at gmail.com  Fri Jan 26 18:44:12 2018
From: gnwiii at gmail.com (George N. White III)
Date: Fri, 26 Jan 2018 13:44:12 -0400
Subject: [tex-live]
	=?utf-8?q?Issue_with_XeTeX_on_MacTeX_related_to_=22=5C?=
	=?utf-8?b?aW5wdXR84oCd?=
In-Reply-To: <3648B705-2564-47C4-BFA8-F37155557765@gmail.com>
References: <CMM.0.95.0.1516978746.beebe@gamma.math.utah.edu>
 <3648B705-2564-47C4-BFA8-F37155557765@gmail.com>
Message-ID: <CAKTOP47pCP=PoGCvqmShp=ZF5=sRCubHRBwu=GyEgFHWGHt+BQ@mail.gmail.com>

On 26 January 2018 at 11:08, Enrico Gregorio <enrico.gregorio at gmail.com>
wrote:

>
> > On 26 Jan 2018, at 15:59 , Nelson H. F. Beebe <beebe at math.utah.edu>
> wrote:
> >
> > I tried your experiment with the file
> >
> >       % cat /var/tmp/noinput.tex
> >       ---\input"|echo $(date)--
> >       ---\input"|echo $(date)--
> >       \bye
> >
> > and with both
> >
> >       xetex -shell-escape noinput
> >       xetex -shell-escape -no-pdf noinput && xdvipdfmx noinput
> >
> > on my new TeX Live 2018 build on GNU/Linux (CentOS 7), I got expected
> > PDF files with output similar to this:
> >
> >       --Fri Jan 26 06:52:15 MST 2018 --
> >       --Fri Jan 26 06:52:15 MST 2018 --
>
> Yes, it seems a specific issue with MacTeX.
>

The bug is also present in the MacPorts version (Version
3.14159265-2.6-0.99998 (TeX Live 2017/MacPorts 2017_2)



> I tried on a vanilla TeX Live on Fedora and on TeX Live/Debian 2016,
> the result is as expected in both cases.
>

also works: TeX Live 2017 and "TeX Live 2013/Debian" on Ubuntu 14.04

-- 
George N. White III
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180126/bc3a786f/attachment.html>

From munepixyz at gmail.com  Mon Jan 29 10:55:25 2018
From: munepixyz at gmail.com (Munehiro Yamamoto)
Date: Mon, 29 Jan 2018 18:55:25 +0900
Subject: [tex-live] TL2017's tlpkg/installer/wget/wget.x86_64-darwin: HTTPS
 support not compiled in.
Message-ID: <CAJ8ZS2=6+-zMMf61U9Sxfo-yb=U-HzOYWH+o_obfMV8o0bmj0A@mail.gmail.com>

Hi,

I am a member of Japanese TeX Development Community.

I just found tthat the TL2017's tlpkg/installer/wget/wget.x86_64-darwin binary
does not support HTTPS protocol.

Indeed, the wget binary which I built just works with https.

$ wget https://texlive.texjp.org/current/tlnet/tlpkg/texlive.tlpdb
--2018-01-29 18:29:12--
https://texlive.texjp.org/current/tlnet/tlpkg/texlive.tlpdb
Resolving texlive.texjp.org (texlive.texjp.org)... 133.130.98.34
Connecting to texlive.texjp.org
(texlive.texjp.org)|133.130.98.34|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 13218739 (13M) [application/octet-stream]
Saving to: 'texlive.tlpdb'

But, the wget binary bundled in TL2017 does not support HTTPS protocol.

$ /opt/texlive/2017/tlpkg/installer/wget/wget.x86_64-darwin
https://texlive.texjp.org/current/tlnet/tlpkg/texlive.tlpdb
https://texlive.texjp.org/current/tlnet/tlpkg/texlive.tlpdb: HTTPS
support not compiled in.

I would like to rebuild it with https support by 12mar (TL2017
frozen), if possible.

Best regards,
Munehiro

?? ?? Munehiro "munepi" Yamamoto
Founder, President & CEO, Green Cherry Ltd.    <munepi at greencherry.jp>
http://greencherry.jp/
Public Relations, Project Vine    <munepi at vinelinux.org> http://vinelinux.org/
GPG Key Fingerprint: 61EC 85A8 5F34 5E35 91E8  8AD0 1D28 D5DE C24B 55FD


From preining at logic.at  Mon Jan 29 12:26:28 2018
From: preining at logic.at (Norbert Preining)
Date: Mon, 29 Jan 2018 20:26:28 +0900
Subject: [tex-live] TL2017's tlpkg/installer/wget/wget.x86_64-darwin:
 HTTPS support not compiled in.
In-Reply-To: <CAJ8ZS2=6+-zMMf61U9Sxfo-yb=U-HzOYWH+o_obfMV8o0bmj0A@mail.gmail.com>
References: <CAJ8ZS2=6+-zMMf61U9Sxfo-yb=U-HzOYWH+o_obfMV8o0bmj0A@mail.gmail.com>
Message-ID: <20180129112628.mpssi534r73pgvw7@bulldog.preining.info>

Dear Munehiro,

> I would like to rebuild it with https support by 12mar (TL2017
> frozen), if possible.

Please rebuild and either commit a fixed version or send it to us.

Please make sure that it runs on all supported older systems, too.

All the best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From karl at freefriends.org  Tue Jan 30 19:00:59 2018
From: karl at freefriends.org (Karl Berry)
Date: Tue, 30 Jan 2018 18:00:59 GMT
Subject: [tex-live] TL2017's tlpkg/installer/wget/wget.x86_64-darwin:
 HTTPS support not compiled in.
In-Reply-To: <CAJ8ZS2=6+-zMMf61U9Sxfo-yb=U-HzOYWH+o_obfMV8o0bmj0A@mail.gmail.com>
Message-ID: <201801301800.w0UI0xdv013060@freefriends.org>

    I just found tthat the TL2017's
    tlpkg/installer/wget/wget.x86_64-darwin binary does not support
    HTTPS protocol.

As Mojca pointed out separately, this is most likely because
I actually suggested/recommended building wget --without-ssl for TL:
http://tug.org/texlive/build.html#xz

This is because, as far as I know, it has become impossible to build a
wget binary supporting ssl which either (a) runs on wider variety of
systems than just the build system and close relatives (e.g., across
Linux-based distros), or (b) is statically linked. Both of these used to
be fairly practical, but now, due to "improvements" in the computing
world, I think they are not.

Maybe I am wrong, but I'd like to see the proof before changing or
committing anything. I suspect that if you want a full-fledged wget, it
has to be provided elsewhere.  You can set TL_DOWNLOAD_PROGRAM and
TL_DOWNLOAD_ARGS to override using the TL-shipped wget.

(Maybe we should change the download logic to prefer a wget found in
PATH to our shipped one, for this reason. That has its own problems,
though.) --best, karl.


From reinhard.kotucha at web.de  Wed Jan 31 01:16:08 2018
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 31 Jan 2018 01:16:08 +0100
Subject: [tex-live] TL2017's tlpkg/installer/wget/wget.x86_64-darwin:
 HTTPS support not compiled in.
In-Reply-To: <201801301800.w0UI0xdv013060@freefriends.org>
References: <CAJ8ZS2=6+-zMMf61U9Sxfo-yb=U-HzOYWH+o_obfMV8o0bmj0A@mail.gmail.com>
 <201801301800.w0UI0xdv013060@freefriends.org>
Message-ID: <23153.2760.206569.48944@gargle.gargle.HOWL>

On 2018-01-30 at 18:00:59 GMT, Karl Berry wrote:

 > (Maybe we should change the download logic to prefer a wget found
 > in PATH to our shipped one, for this reason. That has its own
 > problems, though.) --best, karl.

If wget is searched in PATH, I recommend to search for curl if wget
isn't found.  I suppose that many non-Linux Unix systems provide curl
instead of wget by default.

getnonfreefonts, for instance, is using curl whenever wget isn't
available.  It's not difficult to support both programs.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From norbert at preining.info  Wed Jan 31 01:35:38 2018
From: norbert at preining.info (Norbert Preining)
Date: Wed, 31 Jan 2018 09:35:38 +0900
Subject: [tex-live] TL2017's tlpkg/installer/wget/wget.x86_64-darwin:
 HTTPS support not compiled in.
In-Reply-To: <23153.2760.206569.48944@gargle.gargle.HOWL>
References: <CAJ8ZS2=6+-zMMf61U9Sxfo-yb=U-HzOYWH+o_obfMV8o0bmj0A@mail.gmail.com>
 <201801301800.w0UI0xdv013060@freefriends.org>
 <23153.2760.206569.48944@gargle.gargle.HOWL>
Message-ID: <20180131003536.e4h7j3bef5alffnj@bulldog.preining.info>

> available.  It's not difficult to support both programs.

Patch please ...

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From beebe at math.utah.edu  Wed Jan 31 01:45:13 2018
From: beebe at math.utah.edu (Nelson H. F. Beebe)
Date: Tue, 30 Jan 2018 17:45:13 -0700
Subject: [tex-live] TL2017's tlpkg/installer/wget/wget.x86_64-darwin:
 HTTPS support not compiled in.
In-Reply-To: <23153.2760.206569.48944@gargle.gargle.HOWL>
Message-ID: <CMM.0.96.0.1517359513.beebe@gamma.math.utah.edu>

Reinhard Kotucha writes today

>> If wget is searched in PATH, I recommend to search for curl if wget
>> isn't found.  I suppose that many non-Linux Unix systems provide curl
>> instead of wget by default.

I suggest that if you look for curl, then also look for gnurl, a new
(December 2017) GNU project that is a fork of curl that removes
support for older protocols, and adds support for more cryptographic
backends.  See

	ftp://ftp.gnu.org/gnu/gnunet/

gnurl is not yet in a many GNU/Linux (or other UNIX flavor)
distributions, but I expect it will be added over the next few months.

You can use it like curl:

	gnurl remote-URL  > local-file
	

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- University of Utah                    FAX: +1 801 581 4148                  -
- Department of Mathematics, 110 LCB    Internet e-mail: beebe at math.utah.edu  -
- 155 S 1400 E RM 233                       beebe at acm.org  beebe at computer.org -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe/ -
-------------------------------------------------------------------------------

From gnwiii at gmail.com  Wed Jan 31 13:43:32 2018
From: gnwiii at gmail.com (George N. White III)
Date: Wed, 31 Jan 2018 08:43:32 -0400
Subject: [tex-live] TL2017's tlpkg/installer/wget/wget.x86_64-darwin:
 HTTPS support not compiled in.
In-Reply-To: <201801301800.w0UI0xdv013060@freefriends.org>
References: <CAJ8ZS2=6+-zMMf61U9Sxfo-yb=U-HzOYWH+o_obfMV8o0bmj0A@mail.gmail.com>
 <201801301800.w0UI0xdv013060@freefriends.org>
Message-ID: <CAKTOP47gec_q61x7hAVUgjn33rdTUwQypiNd+HkOZA17xgit8w@mail.gmail.com>

On 30 January 2018 at 14:00, Karl Berry <karl at freefriends.org> wrote:

>     I just found tthat the TL2017's
>     tlpkg/installer/wget/wget.x86_64-darwin binary does not support
>     HTTPS protocol.
>
> As Mojca pointed out separately, this is most likely because
> I actually suggested/recommended building wget --without-ssl for TL:
> http://tug.org/texlive/build.html#xz
>
> This is because, as far as I know, it has become impossible to build a
> wget binary supporting ssl which either (a) runs on wider variety of
> systems than just the build system and close relatives (e.g., across
> Linux-based distros), or (b) is statically linked. Both of these used to
> be fairly practical, but now, due to "improvements" in the computing
> world, I think they are not.
>

Whatever you ship would be outdated in less than a year.  Users
have been known to use TL's wget for other purposes, so it falls
into the category of an "attractive nuisance".   It is best to
encourage users to rely on supported crypto with regular updates.

wget without ssl support will work with fewer and fewer servers in the
future.  Meanwhile, the options for having a current downloader (wget,
curl, gnurl) have improved, so it is not unreasonable to simple state
that a suitable downloader must be provided before attempting to
run the installer.   Effort would be better spent supporting
curl/gnurl as many users will already have one of these.  Curl, for
example, is provided by Anaconda Python (available on linux,
macOS, and Windows).


>
> Maybe I am wrong, but I'd like to see the proof before changing or
> committing anything. I suspect that if you want a full-fledged wget, it
> has to be provided elsewhere.  You can set TL_DOWNLOAD_PROGRAM and
> TL_DOWNLOAD_ARGS to override using the TL-shipped wget.
>
> (Maybe we should change the download logic to prefer a wget found in
> PATH to our shipped one, for this reason. That has its own problems,
> though.) --best, karl.
>
>
The installer should check for wget, curl, and gnurl in the PATH.  If none
is found,
it can point to a document where the requirements are detailed and
suitable sources of the programs for various platforms are listed.

-- 
George N. White III
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180131/021effde/attachment.html>

From P.Taylor at Rhul.Ac.Uk  Wed Jan 31 14:17:12 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor (RHUoL))
Date: Wed, 31 Jan 2018 13:17:12 +0000
Subject: [tex-live] TL2017's tlpkg/installer/wget/wget.x86_64-darwin:
 HTTPS support not compiled in.
In-Reply-To: <CAKTOP47gec_q61x7hAVUgjn33rdTUwQypiNd+HkOZA17xgit8w@mail.gmail.com>
References: <CAJ8ZS2=6+-zMMf61U9Sxfo-yb=U-HzOYWH+o_obfMV8o0bmj0A@mail.gmail.com>
 <201801301800.w0UI0xdv013060@freefriends.org>
 <CAKTOP47gec_q61x7hAVUgjn33rdTUwQypiNd+HkOZA17xgit8w@mail.gmail.com>
Message-ID: <ac53e881-906c-6c70-4ee0-21ed1e004489@Rhul.Ac.Uk>



George N. White III wrote:
> [...]? it is not unreasonable to simple state
> that a suitable downloader must be provided before attempting to
> run the installer.

I am sorry, George, I completely disagree.? Someone seeking to install 
TeX Live can reasonably be assumed to know a little about computer 
typesetting and a little about using the operating system of his/her 
choice; there is no /a priori/ evidence that he or she knows anything 
more.? Therefore, to expect such a user to locate, download and install 
"a suitable downloader" is (IMHO) completelu unreasonable.? A suitable 
downloader should form an integral part of the TeX Live installer, and 
automatically come therewith.

Philip Taylor

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180131/2521e2dc/attachment.html>

From gnwiii at gmail.com  Wed Jan 31 16:01:49 2018
From: gnwiii at gmail.com (George N. White III)
Date: Wed, 31 Jan 2018 11:01:49 -0400
Subject: [tex-live] TL2017's tlpkg/installer/wget/wget.x86_64-darwin:
 HTTPS support not compiled in.
In-Reply-To: <ac53e881-906c-6c70-4ee0-21ed1e004489@Rhul.Ac.Uk>
References: <CAJ8ZS2=6+-zMMf61U9Sxfo-yb=U-HzOYWH+o_obfMV8o0bmj0A@mail.gmail.com>
 <201801301800.w0UI0xdv013060@freefriends.org>
 <CAKTOP47gec_q61x7hAVUgjn33rdTUwQypiNd+HkOZA17xgit8w@mail.gmail.com>
 <ac53e881-906c-6c70-4ee0-21ed1e004489@Rhul.Ac.Uk>
Message-ID: <CAKTOP458Vo5zQC2y9r_gWo-iuwqbiQV6sVBfOWee+rpat-s7Bw@mail.gmail.com>

On 31 January 2018 at 09:17, Philip Taylor (RHUoL) <P.Taylor at rhul.ac.uk>
wrote:

>
>
> George N. White III wrote:
>
> [...]  it is not unreasonable to simple state
> that a suitable downloader must be provided before attempting to
> run the installer.
>
>
> I am sorry, George, I completely disagree.  Someone seeking to install TeX
> Live can reasonably be assumed to know a little about computer typesetting
> and a little about using the operating system of his/her choice; there is
> no *a priori* evidence that he or she knows anything more.  Therefore, to
> expect such a user to locate, download and install "a suitable downloader"
> is (IMHO) completelu unreasonable.  A suitable downloader should form an
> integral part of the TeX Live installer, and automatically come therewith.
>
> Philip Taylor
>

The need to support HTTPS is what started this thread.   Downloaders that
support HTTPS brings in many new complications such as handling HTTP
redirects to HTTPS servers, cipher suites, and certificates.
Most users rely on vendors to make this work, and regular updates to keep
it going as the standards evolve.   Supporting HTTPS with TeX Live's wget
may not be practical, and in any case is a large task.


I work in a government research institute, so there are many TeX
installations.  I avoid Windows, but it is the "corporate standard" so I
can't completely avoid it.  I use 2 applications (ESA SNAP, QGIS. both with
normal Windows installers and regular upgrades) that provide a curl.exe in
a "private" location within the application's folders.  TeX Live users
often continue with their original version for years. There have been
problems where a user needed wget so copied the version from TeX Live  to a
more convenient  location.  Then the US gov. got rid of their HTTP servers
and users ran into (difficult to diagnose) problems with wget and HTTPS
URL's.  My experience says there are far too many downloaders floating
around on Windows systems already.  As file servers move to https with
newer ciphers, downloaders that have not been updated stopped working.
Windows applications protect themselves by including a private downloader
(usually curl) that gets newer versions thru the application's own
updater.

Many installers based on more normal Windows standards include downloaders
and are easier for users than the TeX Live installer.   If wget is not
included, and not alread installed by some other packages, there does need
to be support in the form of a list of  Windows packages with good
installers that provide a downloader.     I don't have anaconda python on
Windows because another work application (ArcGIS) provides a python
system.  If the TeX Live installer uses an external downloader it may be
useful to provide a tool that generates a list (with versions) of already
installed downloaders and ask the user to choose the one they wish to use.
On Unix the priorities  should have already been set using the PATH
variable, so the choice would be between wget, curl, and gnurl.   On
Windows a search becomes more complex, so if a downloader is not found via
the PATH and maybe a few additional common locations, then the user may
have to enter the location for the downloader they wish to use.


-- 
George N. White III
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180131/5051f4be/attachment-0001.html>

From zdenek.wagner at gmail.com  Wed Jan 31 22:21:49 2018
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 31 Jan 2018 22:21:49 +0100
Subject: [tex-live] TL2017's tlpkg/installer/wget/wget.x86_64-darwin:
 HTTPS support not compiled in.
In-Reply-To: <CAKTOP458Vo5zQC2y9r_gWo-iuwqbiQV6sVBfOWee+rpat-s7Bw@mail.gmail.com>
References: <CAJ8ZS2=6+-zMMf61U9Sxfo-yb=U-HzOYWH+o_obfMV8o0bmj0A@mail.gmail.com>
 <201801301800.w0UI0xdv013060@freefriends.org>
 <CAKTOP47gec_q61x7hAVUgjn33rdTUwQypiNd+HkOZA17xgit8w@mail.gmail.com>
 <ac53e881-906c-6c70-4ee0-21ed1e004489@Rhul.Ac.Uk>
 <CAKTOP458Vo5zQC2y9r_gWo-iuwqbiQV6sVBfOWee+rpat-s7Bw@mail.gmail.com>
Message-ID: <CAC1phyawP_sGq7+5pAB3j-yoR+-n=qw=CerJPgGSZQEYZwiROA@mail.gmail.com>

Hi,

I cannot agree. I avoid Windows whenever possible but I develop SW that
must run under Windows so I have o test it. Some multiplatform libraries
state that they rely upon curl which is not available in Windows and must
be installed separately. I have just searched through the whole disk. I
found two versions of curl.exe as a part of git but my users are not
supposed to have git. So without my SW with its own curl and without git
there would be no curl.exe on my Windows 7. And I do not have wget either
(I do not have TL on it). Thus it is too risky to assume that there is
curl.exe somewhere.


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2018-01-31 16:01 GMT+01:00 George N. White III <gnwiii at gmail.com>:

> On 31 January 2018 at 09:17, Philip Taylor (RHUoL) <P.Taylor at rhul.ac.uk>
> wrote:
>
>>
>>
>> George N. White III wrote:
>>
>> [...]  it is not unreasonable to simple state
>> that a suitable downloader must be provided before attempting to
>> run the installer.
>>
>>
>> I am sorry, George, I completely disagree.  Someone seeking to install
>> TeX Live can reasonably be assumed to know a little about computer
>> typesetting and a little about using the operating system of his/her
>> choice; there is no *a priori* evidence that he or she knows anything
>> more.  Therefore, to expect such a user to locate, download and install "a
>> suitable downloader" is (IMHO) completelu unreasonable.  A suitable
>> downloader should form an integral part of the TeX Live installer, and
>> automatically come therewith.
>>
>> Philip Taylor
>>
>
> The need to support HTTPS is what started this thread.   Downloaders that
> support HTTPS brings in many new complications such as handling HTTP
> redirects to HTTPS servers, cipher suites, and certificates.
> Most users rely on vendors to make this work, and regular updates to keep
> it going as the standards evolve.   Supporting HTTPS with TeX Live's wget
> may not be practical, and in any case is a large task.
>
>
> I work in a government research institute, so there are many TeX
> installations.  I avoid Windows, but it is the "corporate standard" so I
> can't completely avoid it.  I use 2 applications (ESA SNAP, QGIS. both with
> normal Windows installers and regular upgrades) that provide a curl.exe in
> a "private" location within the application's folders.  TeX Live users
> often continue with their original version for years. There have been
> problems where a user needed wget so copied the version from TeX Live  to a
> more convenient  location.  Then the US gov. got rid of their HTTP servers
> and users ran into (difficult to diagnose) problems with wget and HTTPS
> URL's.  My experience says there are far too many downloaders floating
> around on Windows systems already.  As file servers move to https with
> newer ciphers, downloaders that have not been updated stopped working.
> Windows applications protect themselves by including a private downloader
> (usually curl) that gets newer versions thru the application's own
> updater.
>
> Many installers based on more normal Windows standards include downloaders
> and are easier for users than the TeX Live installer.   If wget is not
> included, and not alread installed by some other packages, there does need
> to be support in the form of a list of  Windows packages with good
> installers that provide a downloader.     I don't have anaconda python on
> Windows because another work application (ArcGIS) provides a python
> system.  If the TeX Live installer uses an external downloader it may be
> useful to provide a tool that generates a list (with versions) of already
> installed downloaders and ask the user to choose the one they wish to use.
> On Unix the priorities  should have already been set using the PATH
> variable, so the choice would be between wget, curl, and gnurl.   On
> Windows a search becomes more complex, so if a downloader is not found via
> the PATH and maybe a few additional common locations, then the user may
> have to enter the location for the downloader they wish to use.
>
>
> --
> George N. White III
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20180131/78a44e2c/attachment.html>

From reinhard.kotucha at web.de  Wed Jan 31 23:30:03 2018
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 31 Jan 2018 23:30:03 +0100
Subject: [tex-live] TL2017's tlpkg/installer/wget/wget.x86_64-darwin:
 HTTPS support not compiled in.
In-Reply-To: <ac53e881-906c-6c70-4ee0-21ed1e004489@Rhul.Ac.Uk>
References: <CAJ8ZS2=6+-zMMf61U9Sxfo-yb=U-HzOYWH+o_obfMV8o0bmj0A@mail.gmail.com>
 <201801301800.w0UI0xdv013060@freefriends.org>
 <CAKTOP47gec_q61x7hAVUgjn33rdTUwQypiNd+HkOZA17xgit8w@mail.gmail.com>
 <ac53e881-906c-6c70-4ee0-21ed1e004489@Rhul.Ac.Uk>
Message-ID: <23154.17259.186872.488506@gargle.gargle.HOWL>

On 2018-01-31 at 13:17:12 +0000, Philip Taylor (RHUoL) wrote:

 > George N. White III wrote:
 > 
 >     [...]? it is not unreasonable to simple state
 >     that a suitable downloader must be provided before attempting to
 >     run the installer.??
 > 
 > I am sorry, George, I completely disagree.? Someone seeking to
 > install TeX Live can reasonably be assumed to know a little about
 > computer typesetting and a little about using the operating system
 > of his/her choice; there is no a priori evidence that he or she
 > knows anything more.? Therefore, to expect such a user to locate,
 > download and install "a suitable downloader" is (IMHO) completelu
 > unreasonable.? A suitable downloader should form an integral part
 > of the TeX Live installer, and automatically come therewith.

TeX Live was supposed to always work out-of-the-box from the very
beginning and there are no intentions to change this behaviour,
at least not deliberately.   

On Unix I don't expect any problems.  If a particular program isn't
found, a user can deduce from the error message which package is
missing and use the package manager in order to download and install
the package within a few seconds.

On Windows the situation is worse.  The error message says which
program is missing.  The user then has to determine the location of
the package in the internet, download it, install it, ...
This is absolutely inacceptable, of course.

But I have one very important question:

Does getnonfreefonts still work on Windows?

A few years ago a concerned user asked me to make downloading the
remote part of the script more secure.  I then replaced http://tug.org
by https://tug.org in order to activate SSL encryption.

On Windows, getnonfreefonts entirely depends on the wget binary
shipped with TeX Live.  Nobody complained so far, hence I assume that
tlpkg/installer/wget/wget.exe supports HTTPS already.

If somebody can confirm that getnonfreefonts works on Windows at all,
we can leave the Windows part of TeX Live as it is and save a lot of
time.

Download

  https://www.tug.org/fonts/getnonfreefonts/install-getnonfreefonts

to an arbitrary directory, move into this directory, run

  texlua install-getnonfreefonts

and then execute

  getnonfreefonts --sys --lsfonts

Does getnonfreefonts work on Windows?

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From P.Taylor at Rhul.Ac.Uk  Wed Jan 31 23:33:07 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor (RHUoL))
Date: Wed, 31 Jan 2018 22:33:07 +0000
Subject: [tex-live] TL2017's tlpkg/installer/wget/wget.x86_64-darwin:
 HTTPS support not compiled in.
In-Reply-To: <23154.17259.186872.488506@gargle.gargle.HOWL>
References: <CAJ8ZS2=6+-zMMf61U9Sxfo-yb=U-HzOYWH+o_obfMV8o0bmj0A@mail.gmail.com>
 <201801301800.w0UI0xdv013060@freefriends.org>
 <CAKTOP47gec_q61x7hAVUgjn33rdTUwQypiNd+HkOZA17xgit8w@mail.gmail.com>
 <ac53e881-906c-6c70-4ee0-21ed1e004489@Rhul.Ac.Uk>
 <23154.17259.186872.488506@gargle.gargle.HOWL>
Message-ID: <57a30092-d2ac-dc32-0095-69525865155c@Rhul.Ac.Uk>



Reinhard Kotucha wrote:
> Does getnonfreefonts work on Windows?


It would so seem :

> P:\>cd gnff
>
> P:\GNFF>texlua install-getnonfreefonts
> Detected System: win32
> Detected Installation: D:/TeX/Live/2017
> mkdir D:/TeX/Live/2017/texmf-dist/scripts/getnonfreefonts 
> ...??????????? [done]
> Installing texmf-dist/scripts/getnonfreefonts/getnonfreefonts.pl 
> ...???? [done]
> Installing texmf-dist/doc/man/man1/getnonfreefonts.1 
> ...???????????????? [done]
> Installing texmf-dist/doc/man/man1/getnonfreefonts.man1.pdf 
> ...????????? [done]
> md5sum: a9e772165e8fdb620bcf9c75c17facda getnonfreefonts.pl 
> ...??????????? [ok]
> md5sum: 49be4444054d85b6037d237552a7cea1 getnonfreefonts.1 
> ...???????????? [ok]
> md5sum: f825d523d686dbecdc787535b40f09d0 getnonfreefonts.man1.pdf 
> ...????? [ok]
> Creating wrapper in 'bin/win32' ...
> ?file(s) copied.
> ? [done]
> mktexlsr: Updating D:/TeX/Live/2017/texmf-dist/ls-R...
> mktexlsr: Updated D:/TeX/Live/2017/texmf-dist/ls-R.
> mktexlsr: Done.
>
> P:\GNFF>getnonfreefonts --sys --lsfonts
> --2018-01-31 22:32:18-- 
> https://www.tug.org/~kotucha/getnonfreefonts/getfont.p
>
> Resolving www.tug.org... 91.121.174.77
> Connecting to www.tug.org|91.121.174.77|:443... connected.
> HTTP request sent, awaiting response... 200 OK
> Length: 32681 (32K)
> Saving to: 'getfont.pl'
>
> getfont.pl????????? 100%[===================>]? 31.92K --.-KB/s??? in 
> 0.03s
>
> 2018-01-31 22:32:18 (1.01 MB/s) - 'getfont.pl' saved [32681/32681]
>
> ------------------------------------------------
> Installation directory: D:/TeX/Live/TeX-MF/Local
> ------------------------------------------------
> arial-urw????? Arial (URW) [not installed]
> classico?????? Classico (URW) [not installed]
> dayroman?????? Day Roman (Apostrophiclabs) [not installed]
> eurofont?????? Euro Symbols (Adobe) [not installed]
> gandhi???????? Gandhi (Librerias Gandhi S.A. de C.V.) [not installed]
> garamond?????? GaramondNo8 (URW) [not installed]
> garamondx????? GaramondNo8 Expert (URW & Michael Sharpe)??????? [not 
> installed]
> lettergothic?? LetterGothic (URW) [not installed]
> literaturnaya? Literatunaya (Paragraph) [not installed]
> luximono?????? Luxi Mono (Bigelow & Holmes)???????????????????? [not 
> installed]
> vntex-nonfree? VnTeX nonfree (URW & Han The Thanh)????????????? [not 
> installed]
> webomints????? Webomints (Galapagos Design Group) [not installed]
>
> P:\GNFF>


From kakuto at fuk.kindai.ac.jp  Wed Jan 31 23:40:29 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu, 1 Feb 2018 07:40:29 +0900
Subject: [tex-live] TL2017's tlpkg/installer/wget/wget.x86_64-darwin:
	HTTPS support not compiled in.
In-Reply-To: <CAC1phyawP_sGq7+5pAB3j-yoR+-n=qw=CerJPgGSZQEYZwiROA@mail.gmail.com>
References: <CAJ8ZS2=6+-zMMf61U9Sxfo-yb=U-HzOYWH+o_obfMV8o0bmj0A@mail.gmail.com>
 <201801301800.w0UI0xdv013060@freefriends.org>
 <CAKTOP47gec_q61x7hAVUgjn33rdTUwQypiNd+HkOZA17xgit8w@mail.gmail.com>
 <ac53e881-906c-6c70-4ee0-21ed1e004489@Rhul.Ac.Uk>
 <CAKTOP458Vo5zQC2y9r_gWo-iuwqbiQV6sVBfOWee+rpat-s7Bw@mail.gmail.com>
 <CAC1phyawP_sGq7+5pAB3j-yoR+-n=qw=CerJPgGSZQEYZwiROA@mail.gmail.com>
Message-ID: <38269E3DBFF845CB93037525B3A0C19B@CJ3001517A>

Hi,

> I cannot agree. I avoid Windows whenever possible but I develop SW that must run under Windows so I have o test it. 
> Some multiplatform libraries state that they rely upon curl which is not available in Windows and must be installed 
> separately. I have just searched through the whole disk. I found two versions of curl.exe as a part of git but my users are 
> not supposed to have git. So without my SW with its own curl and without git there would be no curl.exe on my Windows 
> 7. And I do not have wget either (I do not have TL on it). Thus it is too risky to assume that there is curl.exe somewhere.

In
CTAN/systems/win32/w32tex
and
CTAN/systems/win32/w32tex/win64
you find context.tar.xz and context-w64.tar.xz
where curl.exe (32bit and 64bit) built with Visual Studio 2015
is provided (libs are statically linked):

curl 7.58.0 (i386-pc-win32) libcurl/7.58.0 OpenSSL/1.0.2n zlib/1.2.11 libssh2/1.8.0
Release-Date: 2018-01-24
Protocols: dict file ftp ftps gopher http https imap imaps pop3 pop3s rtsp scp sftp smb smbs smtp smtps telnet tftp 
Features: AsynchDNS IPv6 Largefile SSPI Kerberos SPNEGO NTLM SSL libz HTTPS-proxy 

Best,
Akira


From kakuto at fuk.kindai.ac.jp  Wed Jan 31 23:49:46 2018
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu, 1 Feb 2018 07:49:46 +0900
Subject: [tex-live] TL2017's tlpkg/installer/wget/wget.x86_64-darwin:
	HTTPS support not compiled in.
In-Reply-To: <23154.17259.186872.488506@gargle.gargle.HOWL>
References: <CAJ8ZS2=6+-zMMf61U9Sxfo-yb=U-HzOYWH+o_obfMV8o0bmj0A@mail.gmail.com>
 <201801301800.w0UI0xdv013060@freefriends.org>
 <CAKTOP47gec_q61x7hAVUgjn33rdTUwQypiNd+HkOZA17xgit8w@mail.gmail.com>
 <ac53e881-906c-6c70-4ee0-21ed1e004489@Rhul.Ac.Uk>
 <23154.17259.186872.488506@gargle.gargle.HOWL>
Message-ID: <75DA4422EE814695AF010442A1BE7A3D@CJ3001517A>

Hi,

> On Windows, getnonfreefonts entirely depends on the wget binary
> shipped with TeX Live.  Nobody complained so far, hence I assume that
> tlpkg/installer/wget/wget.exe supports HTTPS already.

I built wget for windows and wget --version shows

-cares +digest -gpgme +https +ipv6 -iri +large-file -metalink -nls
-ntlm +opie -psl +ssl/gnutls

So maybe it supports HTTPS.

Best,
Akira


From P.Taylor at Rhul.Ac.Uk  Wed Jan 31 23:50:59 2018
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor (RHUoL))
Date: Wed, 31 Jan 2018 22:50:59 +0000
Subject: [tex-live] TL2017's tlpkg/installer/wget/wget.x86_64-darwin:
 HTTPS support not compiled in.
In-Reply-To: <38269E3DBFF845CB93037525B3A0C19B@CJ3001517A>
References: <CAJ8ZS2=6+-zMMf61U9Sxfo-yb=U-HzOYWH+o_obfMV8o0bmj0A@mail.gmail.com>
 <201801301800.w0UI0xdv013060@freefriends.org>
 <CAKTOP47gec_q61x7hAVUgjn33rdTUwQypiNd+HkOZA17xgit8w@mail.gmail.com>
 <ac53e881-906c-6c70-4ee0-21ed1e004489@Rhul.Ac.Uk>
 <CAKTOP458Vo5zQC2y9r_gWo-iuwqbiQV6sVBfOWee+rpat-s7Bw@mail.gmail.com>
 <CAC1phyawP_sGq7+5pAB3j-yoR+-n=qw=CerJPgGSZQEYZwiROA@mail.gmail.com>
 <38269E3DBFF845CB93037525B3A0C19B@CJ3001517A>
Message-ID: <22109343-e4d9-62df-07a5-ba5d4896557c@Rhul.Ac.Uk>



Akira Kakuto wrote:

>
> In
> CTAN/systems/win32/w32tex
> and
> CTAN/systems/win32/w32tex/win64
> you find context.tar.xz and context-w64.tar.xz


Confirmed findable and usable :

> ????????????????????????????????? _?? _ ____? _
> ? Project???????????????????? ___| | | |? _ \| |
> ???????????????????????????? / __| | | | |_) | |
> ??????????????????????????? | (__| |_| |? _ <| |___
> ???????????????????????????? \___|\___/|_| \_\_____|
>
> NAME
> ?????? curl - transfer a URL
>
> SYNOPSIS
> ?????? curl [options] [URL...]
>
> DESCRIPTION
> ?????? curl? is? a tool to transfer data from or to a server, using 
> one of the
> ?????? supported protocols (DICT, FILE, FTP, FTPS, GOPHER, HTTP, 
> HTTPS,? IMAP,
> ?????? IMAPS,? LDAP,? LDAPS,? POP3,? POP3S,? RTMP, RTSP, SCP, SFTP, 
> SMB, SMBS,
> ?????? SMTP, SMTPS, TELNET and TFTP). The command is designed to work? 
> without
> ?????? user interaction.
>
> ?????? curl offers a busload of useful tricks like proxy support, user 
> authen-
> ?????? tication, FTP upload, HTTP post, SSL connections, cookies, 
> file? trans-
> ?????? fer? resume,? Metalink,? and more. As you will see below, the 
> number of
> ?????? features will make your head spin!
>
> ?????? curl is powered by? libcurl? for? all? transfer-related 
> features.? See
> ?????? libcurl(3) for details.

** Phil.


