From jfine2358 at gmail.com  Wed Sep  1 20:43:14 2021
From: jfine2358 at gmail.com (Jonathan Fine)
Date: Wed, 1 Sep 2021 19:43:14 +0100
Subject: TeX Hour Thur 2 Sept: Interactive online help: 6:30 to 7:30pm London
 time
In-Reply-To: <CALD=Yf8rkEhh53ZdY2+gJ5aqNOj-Q2b9UnN87TSbDLER9J6Cgg@mail.gmail.com>
References: <e8bd2b17-ae1a-4ba1-bddb-bc35aaad0223n@googlegroups.com>
 <CALD=Yf8YrNW4ndqHHUV0hjz-7emLWjLOVrQROwVV-P9Jkpfdyw@mail.gmail.com>
 <CALD=Yf8rkEhh53ZdY2+gJ5aqNOj-Q2b9UnN87TSbDLER9J6Cgg@mail.gmail.com>
Message-ID: <CALD=Yf-HmcDEwoY1FEGKKfXuZgmRw0+jYsvqkEJyn2HJXZj+FQ@mail.gmail.com>

Hi

Summary: Most popular computer languages provide useful interactive online
help and documentation. LaTeX

Date and time: Thursday 2 September, 6.30 to 7.30pm UK time.
UK time now: https://time.is/UK.
Zoom URL:
https://us02web.zoom.us/j/78551255396?pwd=cHdJN0pTTXRlRCtSd1lCTHpuWmNIUT09

OVERVIEW
I'd like our community to develop online tools to help LaTeX authors,
particularly beginners. Here's an example. It's easy to make a syntax error
when writing a LaTeX document. And then you get a TeX error, perhaps
unconnected with your error. I'd like to see an online LaTeX syntax
checker, that's linked to a help system.

Searching for https://www.google.com/search?q=json+syntax+checker
immediately gives about 20 online JSON checkers. However, a similar search
for LaTeX doesn't give similar results. I think there's a big gap here.

HTML has https://www.w3schools.com/, which allows you to start learning
immediately. For comparison look at https://www.learnlatex.org/en/.

That's my gripe. I'd like to hear yours, and discuss what we could do to
improve interactive online help and documentation for LaTeX users,
particularly beginners.

INVITE
You're invited to tomorrow's TeX Hour: Interactive online help.
Date and time: Thursday 2 September, 6.30 to 7.30pm UK time.
UK time now: https://time.is/UK.
Zoom URL:
https://us02web.zoom.us/j/78551255396?pwd=cHdJN0pTTXRlRCtSd1lCTHpuWmNIUT09
Meeting ID: 785 5125 5396
Passcode: knuth

LAST WEEK'S VIDEOS
Last week's TeX Hour was onPortable TeX Documents.  It's now closer to
being a thing. I'm encouraged. The videos are available at
https://www.youtube.com/playlist?list=PLw1FZfIX1w7gcm6b4MzRKDIlW7xV4yFnd

Happy TeXing

Jonathan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210901/b694340b/attachment.html>

From bernhard.kleine at gmx.net  Tue Sep  7 12:55:42 2021
From: bernhard.kleine at gmx.net (Bernhard Kleine)
Date: Tue, 7 Sep 2021 12:55:42 +0200
Subject: state of the use group
Message-ID: <d2926ecf-0d23-a67a-5008-6d4855eb0ea7@gmx.net>

for about two weeks now, I didnot receive any mails but the two from
Jonathan Fine. Strange!! If anything has changed, please not me via PN.

Thanks a lot

Bernhard

-- 
spitzhalde9
D-79853 lenzkirch
bernhard.kleine at gmx.net
www.b-kleine.com, www.urseetal.net
Ich darf auf mein neues Buch "670 Falterarten im Hochschwarzwald" aufmerksam machen 
(Infos bei mir)
-
thunderbird
GPG schl?ssel: D5257409
fingerprint:
08 B7 F8 70 22 7A FC C1 15 49 CA A6 C7 6F A0 2E D5 25 74 09


-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature
Type: application/pgp-signature
Size: 840 bytes
Desc: OpenPGP digital signature
URL: <https://tug.org/pipermail/tex-live/attachments/20210907/61969006/attachment.sig>

From norbert at preining.info  Tue Sep  7 13:55:21 2021
From: norbert at preining.info (Norbert Preining)
Date: Tue, 7 Sep 2021 20:55:21 +0900
Subject: state of the use group
In-Reply-To: <d2926ecf-0d23-a67a-5008-6d4855eb0ea7@gmx.net>
References: <d2926ecf-0d23-a67a-5008-6d4855eb0ea7@gmx.net>
Message-ID: <YTdTKXd6iolawyWI@bulldog.preining.info>

> for about two weeks now, I didnot receive any mails but the two from
> Jonathan Fine. Strange!! If anything has changed, please not me via PN.

Don't worry, all fine ;-)

Best

Norbert

--
PREINING Norbert                              https://www.preining.info
Fujitsu Research  +  IFMGA Guide  +  TU Wien  +  TeX Live  + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From usenet at siart.de  Tue Sep  7 14:15:41 2021
From: usenet at siart.de (Uwe Siart)
Date: Tue, 07 Sep 2021 14:15:41 +0200
Subject: state of the use group
References: <d2926ecf-0d23-a67a-5008-6d4855eb0ea7@gmx.net>
 <YTdTKXd6iolawyWI@bulldog.preining.info>
Message-ID: <861r60eg42.fsf@siart.de>

Norbert Preining <norbert at preining.info> writes:

>> for about two weeks now, I didnot receive any mails but the two from
>> Jonathan Fine. Strange!! If anything has changed, please not me via PN.
>
> Don't worry, all fine ;-)

"No traffic" means: "The whole lot of TeXLive works pretty smooth". I
can confirm.

-- 
Uwe


From bernhard.kleine at gmx.net  Tue Sep  7 14:41:37 2021
From: bernhard.kleine at gmx.net (Bernhard Kleine)
Date: Tue, 7 Sep 2021 14:41:37 +0200
Subject: state of the use group
In-Reply-To: <861r60eg42.fsf@siart.de>
References: <d2926ecf-0d23-a67a-5008-6d4855eb0ea7@gmx.net>
 <YTdTKXd6iolawyWI@bulldog.preining.info> <861r60eg42.fsf@siart.de>
Message-ID: <5273a261-edfa-3c7d-5096-7d8690a0020e@gmx.net>

Am 07.09.2021 um 14:15 schrieb Uwe Siart:
> Norbert Preining <norbert at preining.info> writes:
>
>>> for about two weeks now, I didnot receive any mails but the two from
>>> Jonathan Fine. Strange!! If anything has changed, please not me via PN.
>> Don't worry, all fine ;-)
> "No traffic" means: "The whole lot of TeXLive works pretty smooth". I
> can confirm.

Obviously. Sorry for the noise!

Bernhard

-- 
spitzhalde9
D-79853 lenzkirch
bernhard.kleine at gmx.net
www.b-kleine.com, www.urseetal.net
Ich darf auf mein neues Buch "670 Falterarten im Hochschwarzwald" aufmerksam machen 
(Infos bei mir)
-
thunderbird
GPG schl?ssel: D5257409
fingerprint:
08 B7 F8 70 22 7A FC C1 15 49 CA A6 C7 6F A0 2E D5 25 74 09


-------------- next part --------------
A non-text attachment was scrubbed...
Name: OpenPGP_signature
Type: application/pgp-signature
Size: 840 bytes
Desc: OpenPGP digital signature
URL: <https://tug.org/pipermail/tex-live/attachments/20210907/7de9c4c8/attachment.sig>

From jfine2358 at gmail.com  Tue Sep  7 18:21:45 2021
From: jfine2358 at gmail.com (Jonathan Fine)
Date: Tue, 7 Sep 2021 17:21:45 +0100
Subject: Thur 9 Sept: TeX Hour: Rich DVI files and accessible PDF (6:30 to
 7:30pm UK time)
In-Reply-To: <CALD=Yf-gcCKntU18BXgqS_Z+9Gs+iwccZ4=P3pMt=s70X6LKBw@mail.gmail.com>
References: <CALD=Yf_KK0sTP2U+vftk9Q+jefhudjjn0B1f-1YKAZj+0o0usg@mail.gmail.com>
 <CALD=Yf-gcCKntU18BXgqS_Z+9Gs+iwccZ4=P3pMt=s70X6LKBw@mail.gmail.com>
Message-ID: <CALD=Yf8kyL95jQYebX5TsYPjFG=gQVxjm0quYGMiRocTWyYRoQ@mail.gmail.com>

Hi

Summary: TeX converts source to DVI, an abstract page description language.
By definition, a rich DVI file contains word-by-word backlinks to the TeX
source. We discuss how to create rich DVI, and how to render it to an
accessible PDF. We compare this to the LaTeX Project approach.

Date and time: Thursday 9 September, 6.30 to 7.30pm UK time.
UK time now: https://time.is/UK.
Zoom URL:
https://us02web.zoom.us/j/78551255396?pwd=cHdJN0pTTXRlRCtSd1lCTHpuWmNIUT09

OVERVIEW
Producing accessible PDF from LaTeX source would be a tremendous advance
(as would reliable production of accessible HTML). A large part of the
problem of creating accessible PDFs is to merge two document trees, namely
the TeX source (as HTML) and the PDF.  At last month's TeX Conference Frank
Mittlebach presented his solution to this problem.

At tomorrow's TeX Hour I'll present my solution, via the concept of rich
DVI files. This goes back 25 years, to my TUGBoat article "Editing .dvi
Files, or Visual TEX". Although in some ways dated, the basic concepts are
still sound and even more relevant than before.

My approach is to pre-process the source tree so that every word (and
similar source objects) is tagged in the resulting DVI file. This will then
give a rich DVI, from which an external program can create an accessible
PDF. Frank's approach is similar, except that he uses complex and ingenious
LaTeX macros for everything, and tags only the paragraphs.

Frank's approach leads to a multi-year journey to modernize LaTeX, and
avoids the need for a post-processor. My approach can use current LaTeX, by
use of an input filter to add tagging, and an output filter to render the
rich DVI to accessible PDF.

This is an important choice, which will affect TeX for over 30 years. If
you're keen, you can read about these two approaches at
https://tug.org/TUGboat/tb17-3/tb52finv.pdf
https://tug.org/tug2021/assets/pdf/Frank-Mittelbach-slides.pdf

INVITE
You're invited to tomorrow's TeX Hour: Rich DVI files and accessible PDF.
Date and time: Thursday 9 September, 6.30 to 7.30pm UK time.
UK time now: https://time.is/UK.
Zoom URL:
https://us02web.zoom.us/j/78551255396?pwd=cHdJN0pTTXRlRCtSd1lCTHpuWmNIUT09
Meeting ID: 785 5125 5396
Passcode: knuth

LAST WEEK'S VIDEOS
Last week's TeX Hour was on Docs and help for LaTeX users.  The videos are
available at
https://www.youtube.com/playlist?list=PLw1FZfIX1w7h74asldt29nO1XUiNrWSnz

Arising from that is a project to help users find existing advice on LaTeX
best practice,
https://github.com/texhour/latex-best-practice

Happy TeXing

Jonathan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210907/0f2b3f28/attachment.html>

From karl at aspodata.se  Fri Sep 10 14:22:14 2021
From: karl at aspodata.se (karl at aspodata.se)
Date: Fri, 10 Sep 2021 14:22:14 +0200 (CEST)
Subject: fixed columns in math mode
Message-ID: <20210910122214.ED3B68517F7B@turkos.aspodata.se>

Any ideas how to solve the problem below or how to find a nicer
solution ?

I'm trying to write some text with formulas interspaced with comments,
but i want to have the equalsign (or something else) and possible some
if's (at right) at the same "columns" in the text.

See e.g. page 11 and 14 of the current result:
 http://aspodata.se/tmp/voltage_inverter.pdf
with source in:
 http://aspodata.se/git/openhw/text/switched_power/

///

Is there any \makebox-like thing that works in math mode so I can set the
contents width, or rather where the next thing will land ?

///

I have tried with the array, IEEEeqnarray and some other environments
but they didn't do what I wanted so I came up with

\newcommand*{\eqnline}[4]{%
\makebox[\widthA]{$\hfill\displaystyle{#1}$}%
{$\:\displaystyle{#2}\:$}%
\makebox[\widthB]{$\displaystyle{#3}$\hfill }%
$\displaystyle{#4}$%
}

That way I can have
. the "=" and the if's (#2, #4) at the same position
. the "between" equations text at left, just where ordinary text is
. page breaks can happen between equation lines just as it does for
  ordinary text

There is a problem with this, since the line ends doesn't know about
\displaystyle{} (my guess), so I have to add \\[1ex] and similar.

///

And I cannot figure out how to make a macro of

\makebox[\widthA]{$\hfill\displaystyle{\max i_L}$}%
{$\:\displaystyle{=}\:$}%
{$\left\{
\begin{array}{l}
%\makebox[\widthB]{$\displaystyle{A}$\hfill }deldrift\\[1ex]
\text{\makebox[\widthC]{$\displaystyle{- I_B P_B}$\hfill }deldrift}\\[1ex]
\text{\makebox[\widthC]{$\displaystyle{- I_{LPP}}$\hfill }gr?nsdrift}\\[1ex]
\text{\makebox[\widthC]{$\displaystyle{- \frac{I_{LPP}}{2} + \frac{-I_{ut}}{P_B}}$\hfill }heldrift}\\[1ex]
\end{array}
\right.$}\\[1ex]

I.e. something similar to:

\begin{equation*}
 |x| =
 \begin{cases}
   -x & \text{if } x < 0,\\
    0 & \text{if } x = 0,\\
    x & \text{if } x > 0.
 \end{cases}
\end{equation*}

Regards,
/Karl Hammar



From hartmut_henkel at gmx.de  Fri Sep 10 14:57:09 2021
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Fri, 10 Sep 2021 14:57:09 +0200 (CEST)
Subject: fixed columns in math mode
In-Reply-To: <20210910122214.ED3B68517F7B@turkos.aspodata.se>
References: <20210910122214.ED3B68517F7B@turkos.aspodata.se>
Message-ID: <f6478ccb-9324-021-da5f-cb9e153afba2@hahepc1.hahe>

Hi Karl,

On Fri, 10 Sep 2021, karl at aspodata.se wrote:

> Any ideas how to solve the problem below or how to find a nicer
> solution ?
>
> I'm trying to write some text with formulas interspaced with comments,
> but i want to have the equalsign (or something else) and possible some
> if's (at right) at the same "columns" in the text.

only partial way forward, dirty: You could hijack the equation number,
since it's flush right, hopfefully not interfering with the formula
stuff, e. g. principally like this:

\documentclass{article}
\makeatletter
%\def\@eqnnum{{\normalfont \normalcolor (\theequation)}}
\def\etxt#1{\xdef\@eqnnum{{#1}}}
\def\noetxt{\def\@eqnnum{{\normalfont \normalcolor (\theequation)}}}
\makeatother
\begin{document}
\begin{eqnarray}
 x & = & \sin(u) \etxt{bar}\\
 y & = & \cos(u) \etxt{foo}
\end{eqnarray}
\noetxt
\begin{eqnarray}
 x & = & \sin(u) \\
 y & = & \cos(u)
\end{eqnarray}
\end{document}

Then you could style the \etxt macro for some fixed widths fitting the
items that should go there...

Best Regards, Hartmut


> See e.g. page 11 and 14 of the current result:
>  http://aspodata.se/tmp/voltage_inverter.pdf
> with source in:
>  http://aspodata.se/git/openhw/text/switched_power/
>
> ///
>
> Is there any \makebox-like thing that works in math mode so I can set the
> contents width, or rather where the next thing will land ?
>
> ///
>
> I have tried with the array, IEEEeqnarray and some other environments
> but they didn't do what I wanted so I came up with
>
> \newcommand*{\eqnline}[4]{%
> \makebox[\widthA]{$\hfill\displaystyle{#1}$}%
> {$\:\displaystyle{#2}\:$}%
> \makebox[\widthB]{$\displaystyle{#3}$\hfill }%
> $\displaystyle{#4}$%
> }
>
> That way I can have
> . the "=" and the if's (#2, #4) at the same position
> . the "between" equations text at left, just where ordinary text is
> . page breaks can happen between equation lines just as it does for
>   ordinary text
>
> There is a problem with this, since the line ends doesn't know about
> \displaystyle{} (my guess), so I have to add \\[1ex] and similar.
>
> ///
>
> And I cannot figure out how to make a macro of
>
> \makebox[\widthA]{$\hfill\displaystyle{\max i_L}$}%
> {$\:\displaystyle{=}\:$}%
> {$\left\{
> \begin{array}{l}
> %\makebox[\widthB]{$\displaystyle{A}$\hfill }deldrift\\[1ex]
> \text{\makebox[\widthC]{$\displaystyle{- I_B P_B}$\hfill }deldrift}\\[1ex]
> \text{\makebox[\widthC]{$\displaystyle{- I_{LPP}}$\hfill }gr?nsdrift}\\[1ex]
> \text{\makebox[\widthC]{$\displaystyle{- \frac{I_{LPP}}{2} + \frac{-I_{ut}}{P_B}}$\hfill }heldrift}\\[1ex]
> \end{array}
> \right.$}\\[1ex]
>
> I.e. something similar to:
>
> \begin{equation*}
>  |x| =
>  \begin{cases}
>    -x & \text{if } x < 0,\\
>     0 & \text{if } x = 0,\\
>     x & \text{if } x > 0.
>  \end{cases}
> \end{equation*}
>
> Regards,
> /Karl Hammar

From harald at mailbox.org  Fri Sep 10 21:01:50 2021
From: harald at mailbox.org (Harald Koenig)
Date: Fri, 10 Sep 2021 21:01:50 +0200
Subject: different hyphenation between pdftex and luatex
Message-ID: <YTurnsOqjIENAmgK@hl.fritz.box>

Hi (Lua)TeX experts,

Marei Peischl noticed that using "*" for gender forms in german language
gives different hyphenation when using luatex and pdftex -- pdftex does not hyphenate, luatex does:

	$ pdftex '\hsize=5mm \showhyphens{nutzer*innengerechte}\bye' | egrep 'This|nutzer'
	This is pdfTeX, Version 3.141592653-2.6-1.40.23 (TeX Live 2021) (preloaded format=pdftex)
	[] \tenrm nutzer*innengerechte

	$ luatex '\hsize=5mm \showhyphens{nutzer*innengerechte}\bye' | egrep 'This|nutzer'
	This is LuaTeX, Version 1.13.2 (TeX Live 2021) 
	[] \tenrm nutzer*in-nen-gerechte

luatex gives same hyphenation as pdftex without that gender "*"

	$ pdftex '\hsize=5mm \showhyphens{nutzerinnengerechte}\bye' | egrep 'This|nutzer'
	This is pdfTeX, Version 3.141592653-2.6-1.40.23 (TeX Live 2021) (preloaded format=pdftex)
	[] \tenrm nutzerin-nen-gerechte
	

thanks for any insights;)

Harald
-- 
"I hope to die                                      ___       _____
before I *have* to use Microsoft Word.",           0--,|    /OOOOOOO\
Donald E. Knuth, 02-Oct-2001 in Tuebingen.        <_/  /  /OOOOOOOOOOO\
                                                    \  \/OOOOOOOOOOOOOOO\
                                                      \ OOOOOOOOOOOOOOOOO|//
                                                       \/\/\/\/\/\/\/\/\/
Harald Koenig                                           //  /     \\  \
harald.koenig at mailbox.org                              ^^^^^       ^^^^^

From P.Taylor at Rhul.Ac.Uk  Sat Sep 11 01:12:56 2021
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Sat, 11 Sep 2021 00:12:56 +0100
Subject: [EXT] different hyphenation between pdftex and luatex
In-Reply-To: <YTurnsOqjIENAmgK@hl.fritz.box>
References: <YTurnsOqjIENAmgK@hl.fritz.box>
Message-ID: <4e1de3f3-c85b-0576-7990-0c39b0b5daff@Rhul.Ac.Uk>

Harald Koenig via tex-live wrote:

> Marei Peischl noticed that using "*" for gender forms in german language
> gives different hyphenation when using luatex and pdftex -- pdftex does not hyphenate, luatex does

I would imagine, Harald, that rather than using a bare asterisk you
would need to use (for example) "\*", where \* expands to a bare
asterisk with catcode <letter>.
** Phil.

--
Please note that the following boiler-plate text (if any) has been inserted without my consent, and I have no control over its content.
If it makes any reference to "us", I have no idea as to whom it refers.

This email, its contents and any attachments are intended solely for the addressee and may contain confidential information. In certain circumstances, it may also be subject to legal privilege. Any unauthorised use, disclosure, or copying is not permitted. If you have received this email in error, please notify us and immediately and permanently delete it. Any views or opinions expressed in personal emails are solely those of the author and do not necessarily represent those of Royal Holloway, University of London. It is your responsibility to ensure that this email and any attachments are virus free.


From zdenek.wagner at gmail.com  Sat Sep 11 01:19:13 2021
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sat, 11 Sep 2021 01:19:13 +0200
Subject: [EXT] different hyphenation between pdftex and luatex
In-Reply-To: <4e1de3f3-c85b-0576-7990-0c39b0b5daff@Rhul.Ac.Uk>
References: <YTurnsOqjIENAmgK@hl.fritz.box>
 <4e1de3f3-c85b-0576-7990-0c39b0b5daff@Rhul.Ac.Uk>
Message-ID: <CAC1phyah7isorgCp4bH-1TW-q__PLc0-M-KqpYy5=2ojV2wr9A@mail.gmail.com>

so 11. 9. 2021 v 1:13 odes?latel Philip Taylor <P.Taylor at rhul.ac.uk> napsal:
>
> Harald Koenig via tex-live wrote:
>
> > Marei Peischl noticed that using "*" for gender forms in german language
> > gives different hyphenation when using luatex and pdftex -- pdftex does not hyphenate, luatex does
>
> I would imagine, Harald, that rather than using a bare asterisk you
> would need to use (for example) "\*", where \* expands to a bare
> asterisk with catcode <letter>.
> ** Phil.
>
Isn't it a problem of a word boundary? I would rather use
\def\*{*\nobreak\hskip 0pt \ignorespaces}
> --

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml


> Please note that the following boiler-plate text (if any) has been inserted without my consent, and I have no control over its content.
> If it makes any reference to "us", I have no idea as to whom it refers.
>
> This email, its contents and any attachments are intended solely for the addressee and may contain confidential information. In certain circumstances, it may also be subject to legal privilege. Any unauthorised use, disclosure, or copying is not permitted. If you have received this email in error, please notify us and immediately and permanently delete it. Any views or opinions expressed in personal emails are solely those of the author and do not necessarily represent those of Royal Holloway, University of London. It is your responsibility to ensure that this email and any attachments are virus free.
>


From P.Taylor at Hellenic-Institute.Uk  Sat Sep 11 10:49:26 2021
From: P.Taylor at Hellenic-Institute.Uk (Philip Taylor)
Date: Sat, 11 Sep 2021 09:49:26 +0100
Subject: [EXT] different hyphenation between pdftex and luatex
In-Reply-To: <CAC1phyah7isorgCp4bH-1TW-q__PLc0-M-KqpYy5=2ojV2wr9A@mail.gmail.com>
References: <YTurnsOqjIENAmgK@hl.fritz.box>
 <4e1de3f3-c85b-0576-7990-0c39b0b5daff@Rhul.Ac.Uk>
 <CAC1phyah7isorgCp4bH-1TW-q__PLc0-M-KqpYy5=2ojV2wr9A@mail.gmail.com>
Message-ID: <b921e81c-c754-fc9c-28c3-5e9d4933d5ac@Hellenic-Institute.Uk>

Zden?k Wagner wrote:
> so 11. 9. 2021 v 1:13 odes?latel Philip Taylor <P.Taylor at rhul.ac.uk> napsal:
>>
>>> Marei Peischl noticed that using "*" for gender forms in german language
>>> gives different hyphenation when using luatex and pdftex -- pdftex does not hyphenate, luatex does
>> I would imagine, Harald, that rather than using a bare asterisk you
>> would need to use (for example) "\*", where \* expands to a bare
>> asterisk with catcode <letter>.
>> ** Phil.
>>
> Isn't it a problem of a word boundary? I would rather use
> \def\*{*\nobreak\hskip 0pt \ignorespaces}

You may will be correct, Zden?k .? I was thinking that the form with 
embedded asterisk may hyphenate differently, but of course if that is 
not the case then your solution will have the desired effect.
-- 
/** Phil./
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210911/f9a5ac8d/attachment-0001.html>

From d.p.carlisle at gmail.com  Sat Sep 11 11:03:25 2021
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Sat, 11 Sep 2021 10:03:25 +0100
Subject: different hyphenation between pdftex and luatex
In-Reply-To: <YTurnsOqjIENAmgK@hl.fritz.box>
References: <YTurnsOqjIENAmgK@hl.fritz.box>
Message-ID: <CAEW6iOgGq7+g=fTfnBMUxbE+ptn9Xcm3tH6JOTdq=PYhGKaZgQ@mail.gmail.com>

(I think this is more texhax at tug.org than tex-live list but as it's here...)

The hyphenation in luatex is different in many ways to that of classic
tex even when they use the same \pattern data so it's not that
surprising that you get different results for some constructs.

Here the main issue is that apart from some legacy compatibility
luatex has moved away from the (frankly weird) reliance on lowercase
codes for determining which characters take part in hyphenation. So
luatex sees the whole construct as a single word and looks it up using
the patterns, pdftex sees the * as a word boundary and doesn't start
the next word until after it sees some white space so skips most of
this.

If you set the lccode of * to itself then you get the same result as luatex

$ pdftex '\lccode`\*=`\* \showhyphens{nutzer*innengerechte}\bye' |
egrep 'This|nutzer'
This is pdfTeX, Version 3.141592653-2.6-1.40.23 (TeX Live 2022/dev)
(preloaded format=pdftex)
[] \tenrm nutzer*in-nen-gerechte


David



On Fri, 10 Sept 2021 at 20:05, Harald Koenig via tex-live
<tex-live at tug.org> wrote:
>
> Hi (Lua)TeX experts,
>
> Marei Peischl noticed that using "*" for gender forms in german language
> gives different hyphenation when using luatex and pdftex -- pdftex does not hyphenate, luatex does:
>
>         $ pdftex '\hsize=5mm \showhyphens{nutzer*innengerechte}\bye' | egrep 'This|nutzer'
>         This is pdfTeX, Version 3.141592653-2.6-1.40.23 (TeX Live 2021) (preloaded format=pdftex)
>         [] \tenrm nutzer*innengerechte
>
>         $ luatex '\hsize=5mm \showhyphens{nutzer*innengerechte}\bye' | egrep 'This|nutzer'
>         This is LuaTeX, Version 1.13.2 (TeX Live 2021)
>         [] \tenrm nutzer*in-nen-gerechte
>
> luatex gives same hyphenation as pdftex without that gender "*"
>
>         $ pdftex '\hsize=5mm \showhyphens{nutzerinnengerechte}\bye' | egrep 'This|nutzer'
>         This is pdfTeX, Version 3.141592653-2.6-1.40.23 (TeX Live 2021) (preloaded format=pdftex)
>         [] \tenrm nutzerin-nen-gerechte
>
>
> thanks for any insights;)
>
> Harald
> --
> "I hope to die                                      ___       _____
> before I *have* to use Microsoft Word.",           0--,|    /OOOOOOO\
> Donald E. Knuth, 02-Oct-2001 in Tuebingen.        <_/  /  /OOOOOOOOOOO\
>                                                     \  \/OOOOOOOOOOOOOOO\
>                                                       \ OOOOOOOOOOOOOOOOO|//
>                                                        \/\/\/\/\/\/\/\/\/
> Harald Koenig                                           //  /     \\  \
> harald.koenig at mailbox.org                              ^^^^^       ^^^^^

From P.Taylor at Hellenic-Institute.Uk  Sat Sep 11 13:06:20 2021
From: P.Taylor at Hellenic-Institute.Uk (Philip Taylor)
Date: Sat, 11 Sep 2021 12:06:20 +0100
Subject: [EXT] Re: different hyphenation between pdftex and luatex
In-Reply-To: <CAEW6iOgGq7+g=fTfnBMUxbE+ptn9Xcm3tH6JOTdq=PYhGKaZgQ@mail.gmail.com>
References: <YTurnsOqjIENAmgK@hl.fritz.box>
 <CAEW6iOgGq7+g=fTfnBMUxbE+ptn9Xcm3tH6JOTdq=PYhGKaZgQ@mail.gmail.com>
Message-ID: <059bb078-fab1-597e-3a8f-61b205080c1e@Hellenic-Institute.Uk>

David Carlisle wrote:
> The hyphenation in luatex is different in many ways to that of classic
> tex even when they use the same \pattern data so it's not that
> surprising that you get different results for some constructs.
>
> Here the main issue is that apart from some legacy compatibility
> luatex has moved away from the (frankly weird) reliance on lowercase
> codes for determining which characters take part in hyphenation. So
> luatex sees the whole construct as a single word and looks it up using
> the patterns, pdftex sees the * as a word boundary and doesn't start
> the next word until after it sees some white space so skips most of
> this.
>
> If you set the lccode of * to itself then you get the same result as luatex

Ah yes, /mea culpa/ ? it is \lccode, not \catcode, that matters here 
(see below).? But I would, with respect, beg to differ with your 
assertion that TeX has a "frankly weird" reliance on \lccodes; at the 
time that TeX was written, every last byte counted, and if overloading 
the significance of \lccode allowed other more important features to be 
included, then I would suggest that the decision was a wise one at the time.

>  TEX looks for potentially hyphenatable words by searching ahead 
> from each glue
> item that is not in a math formula. The search bypasses characters whose
> \lccode is zero, or ligatures that begin with such characters; it also 
> bypasses whatsits
> and implicit kern items, i.e., kerns that were inserted by TEX itself 
> because of information
> stored with the font. If the search finds a character with nonzero 
> \lccode, or if it finds a ligature
> that begins with such a character, that character is called the 
> starting letter. But if any
> other type of item occurs before a suitable starting letter is found, 
> hyphenation is abandoned
> (until after the next glue item). Thus, a box or rule or mark, or a 
> kern that was explicitly inserted
> by \kern or \/, must not intervene between glue and a hyphenatable 
> word. If the starting
> letter is not lowercase (i.e., if it doesn?t equal its own \lccode), 
> hyphenation is abandoned
> unless \uchyph is positive.
>
>  If a suitable starting letter is found, let it be in font f. 
> Hyphenation is abandoned unless
> the \hyphenchar of f is a number between 0 and 255, inclusive. If this 
> test is
> passed, TEX continues to scan forward until coming to something that?s 
> not one of the following
> three ?admissible items?: (1) a character in font f whose \lccode is 
> nonzero; (2) a ligature
> formed entirely from characters of type (1); (3) an implicit kern. The 
> first inadmissible
> item terminates this part of the process; the trial word consists of 
> all the letters found in admissible
> items. Notice that all of these letters are in font f.

-- 
/** Phil./
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210911/5506ee7f/attachment.html>

From borisv at lk.net  Sun Sep 12 05:12:36 2021
From: borisv at lk.net (Boris Veytsman)
Date: Sat, 11 Sep 2021 20:12:36 -0700
Subject: [EXT] Re: different hyphenation between pdftex and luatex
In-Reply-To: <059bb078-fab1-597e-3a8f-61b205080c1e@Hellenic-Institute.Uk>
 (message from Philip Taylor on Sat, 11 Sep 2021 12:06:20 +0100)
References: <YTurnsOqjIENAmgK@hl.fritz.box>
 <CAEW6iOgGq7+g=fTfnBMUxbE+ptn9Xcm3tH6JOTdq=PYhGKaZgQ@mail.gmail.com>
 <059bb078-fab1-597e-3a8f-61b205080c1e@Hellenic-Institute.Uk>
Message-ID: <202109120312.18C3Caj8015236@bilbo.localnet>

PT> From: Philip Taylor <P.Taylor at Hellenic-Institute.Uk>
PT> Date: Sat, 11 Sep 2021 12:06:20 +0100


PT> Ah yes, /mea culpa/ ? it is \lccode, not \catcode, that matters here 
PT> (see below).? But I would, with respect, beg to differ with your 
PT> assertion that TeX has a "frankly weird" reliance on \lccodes; at the 
PT> time that TeX was written, every last byte counted, and if overloading 
PT> the significance of \lccode allowed other more important features to be 
PT> included, then I would suggest that the decision was a wise one at the time.

The author of this decision said at some point, 'Premature
optimization is the root of all evil.'

-- 
Good luck

-Boris

All the evidence concerning the universe has not yet been collected,
so there's still hope.

From list1 at michaelshell.org  Sun Sep 12 08:21:30 2021
From: list1 at michaelshell.org (Michael Shell)
Date: Sun, 12 Sep 2021 02:21:30 -0400
Subject: fixed columns in math mode
In-Reply-To: <20210910122214.ED3B68517F7B@turkos.aspodata.se>
References: <20210910122214.ED3B68517F7B@turkos.aspodata.se>
Message-ID: <20210912022130.d4832956f7b6f7a45b2af05f@michaelshell.org>

On Fri, 10 Sep 2021 14:22:14 +0200 (CEST)
karl at aspodata.se wrote:

> Is there any \makebox-like thing that works in math mode so I can set the
> contents width, or rather where the next thing will land?



  Karl,


You are asking for a math mode equivalent of Scott Pakin's eqparbox package:

https://www.ctan.org/pkg/eqparbox

i.e., "inter-alignment alignments"

Using Pakin's approach with math mode (which I haven't actually tried
myself) you would have to put everything back into math mode within the
eqparbox's. The big benefit here is that eqparbox would autocalculate the
reserved width (the maximum width) you need for a given column. Be aware
that you will have to rerun LaTeX when changes are made to the columns
that increase the maximum width because eqparbox will only know the maximum
width value after it has finished processing the entire document - if the
maximum width has changed since the start of the run (starting with the
value imported from the previous run via the .aux file), a rerun will be
needed.

Whether or not you use simple manual or Pakin-type automatic setting of the
reserved widths, there is a way to coax IEEEeqnarray to do as you need. The
trick is to insert a phantom/strut row that reserves the needed width in
the given columns without otherwise altering the formatting (i.e., we must
remove any extra vertical spacing caused by this phantom row).

The code below shows an example of use. Do let us know if this does as
you need. In this example, I specified the reserved width as a percentage
of the column width rather than in points. This should help to make the
setting more likely to be acceptable for a variety of content (i.e., it
will work fine as long as the given IEEEeqnarray column(s) does not exceed
30% of the text width.) 


  Cheers,


  Mike Shell



%%%%%
% Test document showing fixed length columns under IEEEeqnarray
% by Michael Shell 9/11/2021
\documentclass{article}


\usepackage{IEEEtrantools}


% length to hold interline spacing used by \IEEEeqnarray
% \MYstdeqnarrylinespacing = \baselineskip + \jot
\newlength{\MYstdeqnarrylinespacing}
\setlength{\MYstdeqnarrylinespacing}{\baselineskip}
\addtolength{\MYstdeqnarrylinespacing}{\jot}

% invisible phantom/strut row
% adjust width as needed, must be at least as large as the widest element
% whose width is to become irrelevant in the alignment instances.
% for diagnostic purposes, to make this strut visible, set the height of
% both rules to something nonzero such as 0.2pt
\newcommand{\MYeqnarrayphantomrow}{\hbox{\vrule height 0pt depth 0pt width 0.3\columnwidth}&&\hbox{\vrule height 0pt depth 0pt width 0.3\columnwidth}\\*[-\MYstdeqnarrylinespacing]}



\begin{document}


\title{A Test Example of Fixed Width IEEEeqnarray Columns}
\author{Michael Shell}
\date{\scriptsize (September 11, 2021)}
\maketitle


Test 1 (no phantom row):
\begin{IEEEeqnarray*}{RCL}
a & = & x
\end{IEEEeqnarray*}

Test 2 (with phantom row, the result is the same as above):
\begin{IEEEeqnarray*}{RCL}
\MYeqnarrayphantomrow
a & = & x
\end{IEEEeqnarray*}

Test 3 (wider LHS, with phantom row):
\begin{IEEEeqnarray*}{RCL}
\MYeqnarrayphantomrow
a+b+c & = & y
\end{IEEEeqnarray*}

Test 4 (like test 3, but without phantom row, note alignment failure):
\begin{IEEEeqnarray*}{RCL}
a+b+c & = & y
\end{IEEEeqnarray*}

Test 5 (much wider RHS, with a phantom as well as a second row):
\begin{IEEEeqnarray*}{RCL}
\MYeqnarrayphantomrow
a+b+c & = & y+z+\alpha+\beta+\delta+\gamma\\
b & = & g 
\end{IEEEeqnarray*}


Tests 2, 3 and 5 will maintain their alignment of the = in the center
of the page column, as long as the content of the first and third columns
of the IEEEeqnarrays does not exceed the space reserved in \textbackslash
MYeqnarrayphantomrow, which in this test case is
0.3\textbackslash columnwidth.

As a diagnostic, to make the phantom rows visible, set the two rule
heights in the definition of \textbackslash MYeqnarrayphantomrow to
something nonzero, such as 0.2pt. Then you can easily see via
inspection if you have reserved enough space for the given content.

\end{document}
%%%%%

From christophe.dervieux at gmail.com  Wed Sep 15 11:20:34 2021
From: christophe.dervieux at gmail.com (christophe dervieux)
Date: Wed, 15 Sep 2021 11:20:34 +0200
Subject: Issue with tlmgr info --data on Windows
Message-ID: <CAJJMaCS-+-5UnAgwo9BYZgcwcN234ENvC2MZ-W1UTdSh9VQXmA@mail.gmail.com>

Hi,

I recently have an issue on Windows with tlmgr info

This type of command works on Linux (Ubuntu 20)

$ tlmgr info --only-installed --data name,size | head -n 3
alegreya,89411584
amscls,323584
amsfonts,7696384

But it does not on Windows 10 (in powershell)

? tlmgr info --only-installed --data name,size | head -n 3tlmgr.pl:
package size not locally!tlmgr.pl: action info returned an error;
continuing.tlmgr.pl: An error has occurred. See above messages.
Exiting.

It seems that the --data field is not parsed correctly.

? tlmgr info --only-installed --data name,category | head -n
3tlmgr.pl: package category not locally!tlmgr.pl: action info returned
an error; continuing.tlmgr.pl: An error has occurred. See above
messages. Exiting.

The issue thrown is from here I believe
https://github.com/TeX-Live/installer/blob/06c2ba2ec75038b6815d5452dd643f6e0ac82c81/texmf-dist/scripts/texlive/tlmgr.pl#L3992
but code does not seem to have recently changed

Is it something known already ?

Here is my TeXLive version

? tlmgr --version
tlmgr revision 59291 (2021-05-21 05:14:40 +0200)
tlmgr using installation: C:/Users/chris/AppData/Roaming/TinyTeX
TeX Live (https://tug.org/texlive) version 2021

Thank you.

Christophe Dervieux
https://github.com/cderv
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210915/4f8405da/attachment.html>

From P.Taylor at Hellenic-Institute.Uk  Wed Sep 15 16:28:00 2021
From: P.Taylor at Hellenic-Institute.Uk (Philip Taylor)
Date: Wed, 15 Sep 2021 15:28:00 +0100
Subject: Issue with tlmgr info --data on Windows
In-Reply-To: <CAJJMaCS-+-5UnAgwo9BYZgcwcN234ENvC2MZ-W1UTdSh9VQXmA@mail.gmail.com>
References: <CAJJMaCS-+-5UnAgwo9BYZgcwcN234ENvC2MZ-W1UTdSh9VQXmA@mail.gmail.com>
Message-ID: <4cbca259-89c2-a529-0b17-f7f63da7122d@Hellenic-Institute.Uk>

Christophe DERVIEUX wrote:

> Hi,
>
> I recently have an issue on Windows with |tlmgr info|
>
> This type of command works on Linux (Ubuntu 20)
>
> |$ tlmgr info --only-installed --data name,size | head -n 3|

I get the same here under Windows 7 (CMD prompt), Christophe , and can 
work around it as follows :

> > tlmgr info --only-installed --data "name,size" | head -n 3
> 12many,430080
> 2up,94208
> Asana-Math,1363968
> Unable to flush stdout: Invalid argument

I assume that the "Unable to flush stdout: Invalid argument" is 
something to do with " | head -n 3" (something I have never used).
-- 
/Philip Taylor/



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210915/3e67c407/attachment.html>

From christophe.dervieux at gmail.com  Wed Sep 15 16:37:05 2021
From: christophe.dervieux at gmail.com (christophe dervieux)
Date: Wed, 15 Sep 2021 16:37:05 +0200
Subject: Issue with tlmgr info --data on Windows
In-Reply-To: <4cbca259-89c2-a529-0b17-f7f63da7122d@Hellenic-Institute.Uk>
References: <CAJJMaCS-+-5UnAgwo9BYZgcwcN234ENvC2MZ-W1UTdSh9VQXmA@mail.gmail.com>
 <4cbca259-89c2-a529-0b17-f7f63da7122d@Hellenic-Institute.Uk>
Message-ID: <CAJJMaCRYLEo6XXd+8HfoPfpC3MCJJj==FAo3rGabzY7ShD_-Zg@mail.gmail.com>

Thank you for sharing this.

tlmgr info --only-installed --data "name,size" works ok on CMD window
indeed. I hadn?t notice. But it does not work in powershell.
I still get the error.

I tried several quotes and can?t manage to find one that works in
powershell.

I believe in previous versions it was working ok. So I wonder what has
changed.

| head -n 3 is not important here. It was just so that I could get a
shorter result.

Le mer. 15 sept. 2021 ? 16:28, Philip Taylor <P.Taylor at hellenic-institute.uk>
a ?crit :

> Christophe DERVIEUX wrote:
>
> Hi,
>
> I recently have an issue on Windows with tlmgr info
>
> This type of command works on Linux (Ubuntu 20)
>
> $ tlmgr info --only-installed --data name,size | head -n 3
>
>
> I get the same here under Windows 7 (CMD prompt), Christophe , and can
> work around it as follows :
>
> > tlmgr info --only-installed --data "name,size" | head -n 3
> 12many,430080
> 2up,94208
> Asana-Math,1363968
> Unable to flush stdout: Invalid argument
>
>
> I assume that the "Unable to flush stdout: Invalid argument" is something
> to do with " | head -n 3" (something I have never used).
> --
> *Philip Taylor*
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210915/242bb80c/attachment.html>

From siepo at bitmuis.nl  Wed Sep 15 17:34:34 2021
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Wed, 15 Sep 2021 17:34:34 +0200
Subject: Issue with tlmgr info --data on Windows
In-Reply-To: <CAJJMaCRYLEo6XXd+8HfoPfpC3MCJJj==FAo3rGabzY7ShD_-Zg@mail.gmail.com>
References: <CAJJMaCS-+-5UnAgwo9BYZgcwcN234ENvC2MZ-W1UTdSh9VQXmA@mail.gmail.com>
 <4cbca259-89c2-a529-0b17-f7f63da7122d@Hellenic-Institute.Uk>
 <CAJJMaCRYLEo6XXd+8HfoPfpC3MCJJj==FAo3rGabzY7ShD_-Zg@mail.gmail.com>
Message-ID: <YUISikfhOz1FIwqz@bitmuis.nl>

On Wed, Sep 15, 2021 at 04:37:05PM +0200, christophe dervieux wrote:
> Thank you for sharing this.
> 
> tlmgr info --only-installed --data "name,size" works ok on CMD window
> indeed. I hadn?t notice. But it does not work in powershell.
> I still get the error.
> 
> I tried several quotes and can?t manage to find one that works in
> powershell.

Same here. I also tried to escape the comma with '`', but that made
no difference.

The following worked:

cmd /c --% tlmgr.bat info --only-installed --data "name,size"

'--%' means: 'stop parsing'.

> I believe in previous versions it was working ok. So I wonder what has
> changed.
> 
> | head -n 3 is not important here. It was just so that I could get a
> shorter result.
> 
> Le mer. 15 sept. 2021 ? 16:28, Philip Taylor <P.Taylor at hellenic-institute.uk>
> a ?crit :
> 
> > Christophe DERVIEUX wrote:
> >
> > Hi,
> >
> > I recently have an issue on Windows with tlmgr info
> >
> > This type of command works on Linux (Ubuntu 20)
> >
> > $ tlmgr info --only-installed --data name,size | head -n 3
> >
> >
> > I get the same here under Windows 7 (CMD prompt), Christophe , and can
> > work around it as follows :
> >
> > > tlmgr info --only-installed --data "name,size" | head -n 3
> > 12many,430080
> > 2up,94208
> > Asana-Math,1363968
> > Unable to flush stdout: Invalid argument
> >
> >
> > I assume that the "Unable to flush stdout: Invalid argument" is something
> > to do with " | head -n 3" (something I have never used).
> > --
> > *Philip Taylor*
> >
> >
> >
> >

-- 
Siep Kroonenberg

From siepo at bitmuis.nl  Wed Sep 15 17:46:43 2021
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Wed, 15 Sep 2021 17:46:43 +0200
Subject: Issue with tlmgr info --data on Windows
In-Reply-To: <YUISikfhOz1FIwqz@bitmuis.nl>
References: <CAJJMaCS-+-5UnAgwo9BYZgcwcN234ENvC2MZ-W1UTdSh9VQXmA@mail.gmail.com>
 <4cbca259-89c2-a529-0b17-f7f63da7122d@Hellenic-Institute.Uk>
 <CAJJMaCRYLEo6XXd+8HfoPfpC3MCJJj==FAo3rGabzY7ShD_-Zg@mail.gmail.com>
 <YUISikfhOz1FIwqz@bitmuis.nl>
Message-ID: <YUIVY/X8s8Hen1pI@bitmuis.nl>

On Wed, Sep 15, 2021 at 05:34:34PM +0200, Siep Kroonenberg wrote:
> On Wed, Sep 15, 2021 at 04:37:05PM +0200, christophe dervieux wrote:
> > Thank you for sharing this.
> > 
> > tlmgr info --only-installed --data "name,size" works ok on CMD window
> > indeed. I hadn?t notice. But it does not work in powershell.
> > I still get the error.
> > 
> > I tried several quotes and can?t manage to find one that works in
> > powershell.
> 
> Same here. I also tried to escape the comma with '`', but that made
> no difference.
> 
> The following worked:
> 
> cmd /c --% tlmgr.bat info --only-installed --data "name,size"

Actually, 
tlmgr.bat --% info --only-installed --data "name,size"
will do.

> '--%' means: 'stop parsing'.
> 
> > I believe in previous versions it was working ok. So I wonder what has
> > changed.
> > 
> > | head -n 3 is not important here. It was just so that I could get a
> > shorter result.
> > 
> > Le mer. 15 sept. 2021 ? 16:28, Philip Taylor <P.Taylor at hellenic-institute.uk>
> > a ?crit :
> > 
> > > Christophe DERVIEUX wrote:
> > >
> > > Hi,
> > >
> > > I recently have an issue on Windows with tlmgr info
> > >
> > > This type of command works on Linux (Ubuntu 20)
> > >
> > > $ tlmgr info --only-installed --data name,size | head -n 3
> > >
> > >
> > > I get the same here under Windows 7 (CMD prompt), Christophe , and can
> > > work around it as follows :
> > >
> > > > tlmgr info --only-installed --data "name,size" | head -n 3
> > > 12many,430080
> > > 2up,94208
> > > Asana-Math,1363968
> > > Unable to flush stdout: Invalid argument
> > >
> > >
> > > I assume that the "Unable to flush stdout: Invalid argument" is something
> > > to do with " | head -n 3" (something I have never used).
> > > --
> > > *Philip Taylor*
> > >
> > >
> > >
> > >
> 
> -- 
> Siep Kroonenberg

-- 
Siep Kroonenberg

From jfine2358 at gmail.com  Wed Sep 15 20:23:11 2021
From: jfine2358 at gmail.com (Jonathan Fine)
Date: Wed, 15 Sep 2021 19:23:11 +0100
Subject: Thur 16 Sept: TeX Hour: Pretty-print, lint and link LaTeX source
 files (6:30 to 7:30pm UK time)
In-Reply-To: <CALD=Yf-TGDf2yw2ALkrZsqe_RUQ71SXY8NAT7ZqpPWsa7aJRrA@mail.gmail.com>
References: <CALD=Yf_KK0sTP2U+vftk9Q+jefhudjjn0B1f-1YKAZj+0o0usg@mail.gmail.com>
 <CALD=Yf-gcCKntU18BXgqS_Z+9Gs+iwccZ4=P3pMt=s70X6LKBw@mail.gmail.com>
 <CALD=Yf8kyL95jQYebX5TsYPjFG=gQVxjm0quYGMiRocTWyYRoQ@mail.gmail.com>
 <CALD=Yf-1Z0_Kgddnd0G3Bzu56WOSEXOvBq+Jzv6Jsu6uUer5HQ@mail.gmail.com>
 <CALD=Yf8HHUrYV6M9dhD02mpm8RMFVTR8bgoJ=_fuRbOWjsMKRw@mail.gmail.com>
 <CALD=Yf_skh8rC0cnBWWLq6qgD+j0xJkEWd2ApatT9jWd6atV9Q@mail.gmail.com>
 <CALD=Yf-fqGQSkeuLf9Ezd4VjnaFaLBti89HFd3J=x9omZnpv6A@mail.gmail.com>
 <CALD=Yf8J27HCGYB=i8bZaZphhSobMp575mi49_WfnMeqWdCUBg@mail.gmail.com>
 <CALD=Yf9yCwGuzaka+QEZOsd_0ArC=XoJA0aRNmMP11-j_6TZaA@mail.gmail.com>
 <CALD=Yf_dg+845YbsJ4Yf=YXwA4inGorv=1ODoNpsh8iymcO97w@mail.gmail.com>
 <CALD=Yf-TGDf2yw2ALkrZsqe_RUQ71SXY8NAT7ZqpPWsa7aJRrA@mail.gmail.com>
Message-ID: <CALD=Yf_CvwPwV6gOm=KD+Z5JcN0Z16KEwRh-3xY+pse7r_=uUg@mail.gmail.com>

Hi

SUMMARY
Tomorrow's TeX Hour will discuss tools for pretty-printing, lint, index and
other tools for processing LaTeX document source files. The usual LaTeX to
PDF provides value for those who read typeset documents (on-screen or when
printed). The focus tomorrow will be on tools that provide additional value
for those who read and write LaTeX source documents. Such tools are also a
route to improved accessibility.

Date and time: Thursday 16 September, 6.30 to 7.30pm UK time.
UK time now: https://time.is/UK.
Zoom URL:
https://us02web.zoom.us/j/78551255396?pwd=cHdJN0pTTXRlRCtSd1lCTHpuWmNIUT09

OVERVIEW
First some history, 1967 to 1994. Around 1967 Bill Gosper developed a
pretty-printer for LISP programs. In 1969 Wilfred Hansen developed a syntax
directed editor. In 1978 Stephen Johnson developed lint software while
debugging C source code. About 30 years ago Dave Raggett developed and
released HTML Tidy. In 1984 Don Knuth introduced literate programming,
which provides a book-like view of computer language source files. Around
1994 Nikos Drakos developed LaTeX2HTML.

Lint, HTML Tidy and LaTeX2HTML are all still in use today, as are tools for
syntax highlighting / structure editing. There are many benefits in having
similar tools for making LaTeX document source files more readable and
ultimately easier to edit.

All such tools have a single purpose: to provide added value to those who
read and edit LaTeX source documents. They should have a common core, the
parsing of LaTeX source files. These tools also have benefits, as Stephen
Johnson discovered, in software development. Here's a surprising example.

Leaders of the LaTeX3 team wish to generate tagged PDF from LaTeX source.
As tagged PDF to HTML is fairly trivial, they also wish to create another
LaTeX to HTML translator. A solid and reliable LaTeX to HTML translator can
provide scaffolding and a test framework for the LaTeX3 tagged PDF project.
It can also be used to specify the tagged output and test it for blind
accessibility.

Beginners and those who write documentation will get many benefits.
Wouldn't it be nice to upload a LaTeX source document and get back an HTML
view of the source document with errors and poor practice highlighted, and
links or tool-tip help for all the LaTeX commands and environments in the
source document.

For an example of what can be done see https://htmltidy.net/, the online
HTML markup corrector. In that context see also https://html-css-js.com/.

Finally, of course, a solid and reliable LaTeX to HTML translator will
nicely complement LaTeX to tagged PDF. LaTeX to HTML will provide many
accessibility benefits earlier than LaTeX to tagged PDF can, train authors
and publishers to value and provide these benefits and so create a more
favourable environment for widespread adoption of LaTeX to tagged PDF.

INVITE
You're invited to Thursday's TeX Hour: Pretty-print, lint and link LaTeX
source files
Date and time: Thursday16 September, 6.30 to 7.30pm UK time.
UK time now: https://time.is/UK.
Zoom URL:
https://us02web.zoom.us/j/78551255396?pwd=cHdJN0pTTXRlRCtSd1lCTHpuWmNIUT09
Meeting ID: 785 5125 5396
Passcode: knuth

LAST WEEK'S VIDEOS
Last week's TeX Hour was on rich DVI files and accessible PDF.  The videos
will within 4 hours be available at
https://www.youtube.com/playlist?list=PLw1FZfIX1w7iVMCRKBGqFxUpW-SbqqFc3

Happy TeXing

Jonathan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210915/feaf5c59/attachment.html>

From daleif at math.au.dk  Thu Sep 16 14:39:21 2021
From: daleif at math.au.dk (Lars Madsen)
Date: Thu, 16 Sep 2021 12:39:21 +0000
Subject: Addition to the texlive manual
Message-ID: <AM0PR01MB5425B4B6DCC33CE782AC5053F2DC9@AM0PR01MB5425.eurprd01.prod.exchangelabs.com>

In

https://www.tug.org/texlive/doc/texlive-en/texlive-en.html#x1-300003.4.1

the profile on unix-like systems are mentioned. (like ~/.profile)

Mit might be an idea to note that one need to re-login for changes in .profile to come into full effect (affect?)



Lars Madsen
Programm?r

Institut for Matematik
Aarhus Universitet

person.au.dk/daleif at math<https://person.au.dk/daleif at math>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210916/9c9f044b/attachment.html>

From daleif at math.au.dk  Thu Sep 16 14:52:48 2021
From: daleif at math.au.dk (Lars Madsen)
Date: Thu, 16 Sep 2021 12:52:48 +0000
Subject: Addition to the texlive manual
In-Reply-To: <AM0PR01MB5425B4B6DCC33CE782AC5053F2DC9@AM0PR01MB5425.eurprd01.prod.exchangelabs.com>
References: <AM0PR01MB5425B4B6DCC33CE782AC5053F2DC9@AM0PR01MB5425.eurprd01.prod.exchangelabs.com>
Message-ID: <AM0PR01MB5425CAC36C1D4229F076168DF2DC9@AM0PR01MB5425.eurprd01.prod.exchangelabs.com>

Something similar probably ought to be added to the quick guide as well as we still see many questions where installing upsteam TL did not work for a user because they ended up adding the path change to say .bashrc? instead of .profile?





Lars Madsen
Programm?r

Institut for Matematik
Aarhus Universitet

person.au.dk/daleif at math<https://person.au.dk/daleif at math>

________________________________
From: tex-live <tex-live-bounces+daleif=imf.au.dk at tug.org> on behalf of Lars Madsen <daleif at math.au.dk>
Sent: 16 September 2021 14:39
To: tex-live at tug.org <tex-live at tug.org>
Subject: Addition to the texlive manual

In

https://www.tug.org/texlive/doc/texlive-en/texlive-en.html#x1-300003.4.1

the profile on unix-like systems are mentioned. (like ~/.profile)

Mit might be an idea to note that one need to re-login for changes in .profile to come into full effect (affect?)



Lars Madsen
Programm?r

Institut for Matematik
Aarhus Universitet

person.au.dk/daleif at math<https://person.au.dk/daleif at math>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210916/91aa68d6/attachment-0001.html>

From denis.bitouze at univ-littoral.fr  Thu Sep 16 15:02:03 2021
From: denis.bitouze at univ-littoral.fr (Denis =?utf-8?Q?Bitouz=C3=A9?=)
Date: Thu, 16 Sep 2021 15:02:03 +0200 (CEST)
Subject: Addition to the texlive manual
In-Reply-To: <AM0PR01MB5425CAC36C1D4229F076168DF2DC9@AM0PR01MB5425.eurprd01.prod.exchangelabs.com>
References: <AM0PR01MB5425B4B6DCC33CE782AC5053F2DC9@AM0PR01MB5425.eurprd01.prod.exchangelabs.com>
 <AM0PR01MB5425CAC36C1D4229F076168DF2DC9@AM0PR01MB5425.eurprd01.prod.exchangelabs.com>
Message-ID: <889732667.11683174.1631797323772.JavaMail.zimbra@univ-littoral.fr>

----- Mail original -----
> De: "Lars Madsen" <daleif at math.au.dk>
> ?: "tex-live" <tex-live at tug.org>
> Envoy?: Jeudi 16 Septembre 2021 14:52:48
> Objet: Re: Addition to the texlive manual
>
> Something similar probably ought to be added to the quick guide as well as we
> still see many questions where installing upsteam TL did not work for a user
> because they ended up adding the path change to say .bashrc instead of
> .profile

That's why I prefer symlinks (okay, okay, I know the drawbacks and okay, okay,
I won't restart the discussion ;)
-- 
Denis


From zdenek.wagner at gmail.com  Thu Sep 16 16:37:33 2021
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 16 Sep 2021 16:37:33 +0200
Subject: Addition to the texlive manual
In-Reply-To: <AM0PR01MB5425CAC36C1D4229F076168DF2DC9@AM0PR01MB5425.eurprd01.prod.exchangelabs.com>
References: <AM0PR01MB5425B4B6DCC33CE782AC5053F2DC9@AM0PR01MB5425.eurprd01.prod.exchangelabs.com>
 <AM0PR01MB5425CAC36C1D4229F076168DF2DC9@AM0PR01MB5425.eurprd01.prod.exchangelabs.com>
Message-ID: <CAC1phyb54yJ51Pt_4khOeYKrKYGgNRxKjvo2CdHv4FOSzvyWAw@mail.gmail.com>

This is even more complex. If the changes are in .bashrc, it is
sufficient to start a new terminal or just type in an existing
terminal:

. ~/.bashrc

Notice the period which executed .bashrc in the current shell.
However, settings from .bashrc do not propagate to GUI apps unless you
invoke it from the profile.

Sincerely (med venlig hilsen)
Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml

?t 16. 9. 2021 v 14:52 odes?latel Lars Madsen <daleif at math.au.dk> napsal:
>
> Something similar probably ought to be added to the quick guide as well as we still see many questions where installing upsteam TL did not work for a user because they ended up adding the path change to say .bashrc instead of .profile
>
>
>
>
>
> Lars Madsen
> Programm?r
>
> Institut for Matematik
> Aarhus Universitet
>
> person.au.dk/daleif at math
>
> ________________________________
> From: tex-live <tex-live-bounces+daleif=imf.au.dk at tug.org> on behalf of Lars Madsen <daleif at math.au.dk>
> Sent: 16 September 2021 14:39
> To: tex-live at tug.org <tex-live at tug.org>
> Subject: Addition to the texlive manual
>
> In
>
> https://www.tug.org/texlive/doc/texlive-en/texlive-en.html#x1-300003.4.1
>
> the profile on unix-like systems are mentioned. (like ~/.profile)
>
> Mit might be an idea to note that one need to re-login for changes in .profile to come into full effect (affect?)
>
>
>
> Lars Madsen
> Programm?r
>
> Institut for Matematik
> Aarhus Universitet
>
> person.au.dk/daleif at math
>


From karl at freefriends.org  Sat Sep 18 00:36:43 2021
From: karl at freefriends.org (Karl Berry)
Date: Fri, 17 Sep 2021 16:36:43 -0600
Subject: Addition to the texlive manual
In-Reply-To: <AM0PR01MB5425CAC36C1D4229F076168DF2DC9@AM0PR01MB5425.eurprd01.prod.exchangelabs.com>
Message-ID: <202109172236.18HMahwF028442@freefriends.org>

    Mit might be an idea to note that one need to re-login for changes
    in .profile to come into full effect (affect?)

effect is right :). Ok.

    Something similar probably ought to be added to the quick guide 

I was intentionally trying to avoid "educating" people about Unix basics
on TL's web pages, but ok, I added a sentence
https://tug.org/texlive/quickinstall.html about logout/login.

I find myself doubting that users will actually be reading that page so
carefully, but if it helps, good ... --thanks, karl.

From karl at aspodata.se  Sat Sep 18 20:47:09 2021
From: karl at aspodata.se (karl at aspodata.se)
Date: Sat, 18 Sep 2021 20:47:09 +0200 (CEST)
Subject: fixed columns in math mode
In-Reply-To: <f6478ccb-9324-021-da5f-cb9e153afba2@hahepc1.hahe>
References: <20210910122214.ED3B68517F7B@turkos.aspodata.se>
 <f6478ccb-9324-021-da5f-cb9e153afba2@hahepc1.hahe>
Message-ID: <20210918184709.559FD80C6FD9@turkos.aspodata.se>

Hartmut Henkel:
> On Fri, 10 Sep 2021, karl at aspodata.se wrote:
...
> > I'm trying to write some text with formulas interspaced with comments,
> > but i want to have the equalsign (or something else) and possible some
> > if's (at right) at the same "columns" in the text.
> only partial way forward, dirty: You could hijack the equation number,
...

Thanks for the idea, but that won't solve the problem.

Regards,
/Karl Hammar


From karl at aspodata.se  Sat Sep 18 20:47:10 2021
From: karl at aspodata.se (karl at aspodata.se)
Date: Sat, 18 Sep 2021 20:47:10 +0200 (CEST)
Subject: fixed columns in math mode
In-Reply-To: <20210912022130.d4832956f7b6f7a45b2af05f@michaelshell.org>
References: <20210910122214.ED3B68517F7B@turkos.aspodata.se>
 <20210912022130.d4832956f7b6f7a45b2af05f@michaelshell.org>
Message-ID: <20210918184711.0A93080C6FDA@turkos.aspodata.se>

Michael Shell:
> On Fri, 10 Sep 2021 14:22:14 +0200 (CEST)
> karl at aspodata.se wrote:
> 
> > Is there any \makebox-like thing that works in math mode so I can set the
> > contents width, or rather where the next thing will land?
...
> You are asking for a math mode equivalent of Scott Pakin's eqparbox package:
> 
> https://www.ctan.org/pkg/eqparbox
> 
> i.e., "inter-alignment alignments"
> 
> Using Pakin's approach with math mode (which I haven't actually tried
> myself) you would have to put everything back into math mode within the
> eqparbox's. The big benefit here is that eqparbox would autocalculate the
> reserved width (the maximum width) you need for a given column.

Wery nice, could be something, and running latex twice isn't a problem.
It's like a distributed tabular.

> Whether or not you use simple manual or Pakin-type automatic setting of the
> reserved widths,

Manual is fine for the momenent.

> there is a way to coax IEEEeqnarray to do as you need. The
> trick is to insert a phantom/strut row that reserves the needed width in
> the given columns without otherwise altering the formatting (i.e., we must
> remove any extra vertical spacing caused by this phantom row).
...

Didn't know about \hbox\hrule, never run tex as is, so I had to look
them up.

I tried your tip and got this result:
 http://aspodata.se/tmp/tex/

So, while the code is easier to read with IEEEeqnarray,
it introduces to much vertical space, and the fourth
column comes out differently, and I still want a tiny bit
more vertical space around the big sqrt.

So, in essence, I think, I guess what I want besides similar
column positions, is something between a $...$ and \[ ... \],
i.e. as in $...$, the math should be closer integrated with
the text, but presented one line a the time like \[...\].

Regards,
/Karl Hammar




From P.Taylor at Hellenic-Institute.Uk  Sun Sep 19 12:49:26 2021
From: P.Taylor at Hellenic-Institute.Uk (Philip Taylor)
Date: Sun, 19 Sep 2021 11:49:26 +0100
Subject: Problems with Windows and TeXLive 2021
In-Reply-To: <52143dd1-00ef-9590-4915-c586df4c2ba3@gmail.com>
References: <79b0f08a-00e7-6d44-142d-5f990370c84c@gmail.com>
 <47b829f4-5c3b-5458-1da0-17f7ea443f6e@Hellenic-Institute.Uk>
 <52143dd1-00ef-9590-4915-c586df4c2ba3@gmail.com>
Message-ID: <47145ee1-bbf7-3bb9-a8fb-2de79552ecae@Hellenic-Institute.Uk>

Jason Stahlecker wrote:

> Dear Mr. Taylor,
>
> thank you for your quick response! I am sorry for forgetting to 
> mention this, I am using? Windows 10 (Build: 19041.1165) on a AMD 
> Ryzen 5 3600. I have already looked to uninstall it via windows, as 
> you suggested, but it does not appear in that window. I also did not 
> find an uninstaller in the texlive folder (C:\texlive). It does not 
> seem right to simply delete that folder. Is there any other way to 
> safetly remove it? Thank you for your help!
>
> Best,
>
> Jason
>

Well, to the best of my belief TeX Live makes only minimal changes to 
the system, modifying the path and possibly changing some file 
associations.? You can easily check whether TeX Live 2021 has been added 
to your (or the system) path, and remove it therefrom, and you can check 
and modify file associations using (e.g.,) "assoc".? Once you have 
undone anything necessary, you can then safely delete the entire TeX 
Live file hierarchy.

TeX Live developers cc'd for comment.
-- 
/Philip Taylor/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210919/b11ff2e0/attachment.html>

From zdenek.wagner at gmail.com  Sun Sep 19 13:41:38 2021
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sun, 19 Sep 2021 13:41:38 +0200
Subject: Problems with Windows and TeXLive 2021
In-Reply-To: <47145ee1-bbf7-3bb9-a8fb-2de79552ecae@Hellenic-Institute.Uk>
References: <79b0f08a-00e7-6d44-142d-5f990370c84c@gmail.com>
 <47b829f4-5c3b-5458-1da0-17f7ea443f6e@Hellenic-Institute.Uk>
 <52143dd1-00ef-9590-4915-c586df4c2ba3@gmail.com>
 <47145ee1-bbf7-3bb9-a8fb-2de79552ecae@Hellenic-Institute.Uk>
Message-ID: <CAC1phyZv9sMb26UDtFw=t=+qSw6ezb0vuqZFse8XuDZQAa+03w@mail.gmail.com>

ne 19. 9. 2021 v 12:49 odes?latel Philip Taylor
<P.Taylor at hellenic-institute.uk> napsal:
>
> Jason Stahlecker wrote:
>
> Dear Mr. Taylor,
>
> thank you for your quick response! I am sorry for forgetting to mention this, I am using  Windows 10 (Build: 19041.1165) on a AMD Ryzen 5 3600. I have already looked to uninstall it via windows, as you suggested, but it does not appear in that window. I also did not find an uninstaller in the texlive folder (C:\texlive). It does not seem right to simply delete that folder. Is there any other way to safetly remove it? Thank you for your help!
>
> Best,
>
> Jason
>
>
> Well, to the best of my belief TeX Live makes only minimal changes to the system, modifying the path and possibly changing some file associations.  You can easily check whether TeX Live 2021 has been added to your (or the system) path, and remove it therefrom, and you can check and modify file associations using (e.g.,) "assoc".  Once you have undone anything necessary, you can then safely delete the entire TeX Live file hierarchy.
>
Hi,

although I am not a Windows user, I am quite sure that the system is
quite clever. If you just delete the C:\texlive tree and do not modify
the PATH, the system will silently skip noexistent directories when
searching PATH. It will slow down the search but the difference will
be less than a milisecond, you will not notice. If you double-click to
a file which used to be associated to a program which no longer
exists, Windows will ask what to do and you can change the association
temporarily or permanently. Thus even if you forget changing PATH and
associations prior to deletion, nothing critical happens.


> TeX Live developers cc'd for comment.
> --
> Philip Taylor
Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml


From siepo at bitmuis.nl  Sun Sep 19 14:20:34 2021
From: siepo at bitmuis.nl (Siep Kroonenberg)
Date: Sun, 19 Sep 2021 14:20:34 +0200
Subject: Problems with Windows and TeXLive 2021
In-Reply-To: <47145ee1-bbf7-3bb9-a8fb-2de79552ecae@Hellenic-Institute.Uk>
References: <79b0f08a-00e7-6d44-142d-5f990370c84c@gmail.com>
 <47b829f4-5c3b-5458-1da0-17f7ea443f6e@Hellenic-Institute.Uk>
 <52143dd1-00ef-9590-4915-c586df4c2ba3@gmail.com>
 <47145ee1-bbf7-3bb9-a8fb-2de79552ecae@Hellenic-Institute.Uk>
Message-ID: <YUcrErBq0Hrzq+4J@bitmuis.nl>

On Sun, Sep 19, 2021 at 11:49:26AM +0100, Philip Taylor wrote:
> Jason Stahlecker wrote:
> 
> > Dear Mr. Taylor,
> > 
> > thank you for your quick response! I am sorry for forgetting to mention
> > this, I am using? Windows 10 (Build: 19041.1165) on a AMD Ryzen 5 3600.
> > I have already looked to uninstall it via windows, as you suggested, but
> > it does not appear in that window. I also did not find an uninstaller in
> > the texlive folder (C:\texlive). It does not seem right to simply delete
> > that folder. Is there any other way to safetly remove it? Thank you for
> > your help!
> > 
> > Best,
> > 
> > Jason

For a single-user installation, the uninstaller is a menu item under
TeX Live. For a multiuser installation, use 'Apps Y Features' of the
Settings app.

If you somehow want to bypass these interfaces: the uninstaller is
<TeX Live Root>\tlpkg\installer\uninst.bat.  For a single-user
installation, it must be uninstalled by its user.  For a multiuser
installation, the file must be invoked with administrative
permissions.

-- 
Siep Kroonenberg

From daniel.nachun at gmail.com  Tue Sep 21 02:28:07 2021
From: daniel.nachun at gmail.com (Daniel Nachun)
Date: Mon, 20 Sep 2021 17:28:07 -0700
Subject: Improvements to path resolution in tlmgr and other scripts using
 kpathsea
Message-ID: <31D49F68-9A9B-40BF-9519-623DFC148857@gmail.com>

We are currently attempting to package TeXLive in Homebrew: https://github.com/Homebrew/homebrew-core/pull/83738.? The primary target for this package will be our Linux users, although some macOS users have also expressed interest in using this package instead of MacTeX.? One difficulty we?ve encountered is the way that TeXLive installation root is identified in tlmgr and some other scripts (a few for crossrefware, cjk-js-integrate and possibly mtxrun) is through kpsewhich ?var-value SELFAUTOPARENT.? 

 

On a system with ?disable-multiplatform (which is set for us by ?disable-native-texlive-build), SELFAUTOPARENT returns the parent directory of the TeXLive root installation rather than the root installation itself, because the directory where the scripts are installed does not have an architecture subdirectory (darwin-universal etc.).? Would it be an acceptable change for us to change these cases to TEXMFROOT, which we can configure in texmf.cnf? ?From what I understand, the places where SELFAUTOPARENT is being used are also trying the find the root installation, and are simply assuming it is SELFAUTOPARENT, rather than querying it with kpsewhich ?var-value TEXMFROOT.

 

Although we want to ship TeXLive as a distro build, we still want tlmgr to be usable in usermode for users to manage a local installation as well, and currently we have to resort to some complicated symlinking to make this work.? Making these proposed changes would let us avoid this, and would also make packaging easier for other Linux distros.? Please let me know if more explanation is needed.

 

Daniel Nachun

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210920/ed3f1627/attachment.html>

From norbert at preining.info  Tue Sep 21 03:16:03 2021
From: norbert at preining.info (Norbert Preining)
Date: Tue, 21 Sep 2021 10:16:03 +0900
Subject: Improvements to path resolution in tlmgr and other scripts using
 kpathsea
In-Reply-To: <31D49F68-9A9B-40BF-9519-623DFC148857@gmail.com>
References: <31D49F68-9A9B-40BF-9519-623DFC148857@gmail.com>
Message-ID: <YUkyUz73h9wBctgY@bulldog.preining.info>

Hi Daniel,

(intro: author of tlmgr and texlive infra, and maintainer of texlive-*
in Debian)

> We are currently attempting to package TeXLive in Homebrew: https://github.com/Homebrew/homebrew-core/pull/83738.

Interesting. I have written one recipe for homebrew/linuxbrew but never
tried to do that for TeX Live!

>?kpsewhich ?var-value SELFAUTOPARENT.? 

We have the same problem in Debian, and we patch out the whole BEGIN
block and auto-switch to user mode in Debian, see:
https://github.com/debian-tex/texlive-nonbin/blob/master/texlive-base/debian/patches/debian-tlmgr-usermode
There are some other patches you might want to look into.
Our (Debian) layout is
	/usr/bin/*	binaries and scripts linked
	/usr/share/texlive/texmf-dist	main tree

I can surely help you with the homebrew adaption (if testing is possible
on linux with linuxbrew, I don't have macs around). Feel free to ping
me.

Best

Norbert

--
PREINING Norbert                              https://www.preining.info
Fujitsu Research  +  IFMGA Guide  +  TU Wien  +  TeX Live  + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From daniel.nachun at gmail.com  Tue Sep 21 05:20:40 2021
From: daniel.nachun at gmail.com (Daniel Nachun)
Date: Mon, 20 Sep 2021 20:20:40 -0700
Subject: Improvements to path resolution in tlmgr and other scripts using
 kpathsea
In-Reply-To: <YUkyUz73h9wBctgY@bulldog.preining.info>
References: <31D49F68-9A9B-40BF-9519-623DFC148857@gmail.com>
 <YUkyUz73h9wBctgY@bulldog.preining.info>
Message-ID: <E3282FF2-2667-40B6-9F4A-BC0B0DFD4619@gmail.com>

Hi Norbert,

Thanks for the quick and helpful response.  We'd definitely appreciate upstream feedback on how to package TeXLive right, and I've pinged you in the PR on GitHub in case you want to provide feedback there.

There are a few differences between the way Homebrew and Debian are maintained that are worth noting:
1) Homebrew tries to avoid carrying patches ourselves as much as possible.  We do not have dedicated maintainers for specific packages so it's not efficient or easy for us to maintain patches.  For that reason we try to find solutions that require minimal patching, or try to upstream patches when possible.
2) Every package exists in its own subdirectory in HOMEBREW_PREFIX/Cellar/PACKAGE_NAME/VERSION, so the root directory for TeXLive would be HOMEBREW_PREFIX/Cellar/texlive/58837.  Ideally we'd be able to treat HOMEBREW_PREFIX/Cellar/texlive/58837 like /usr/ is on Debian, though that does not work at the moment for the reasons mentioned in my previous email.
3) We don't typically split packages up the way Debian and other distros do for some large packages like TeXLive or Qt.  This is done for ease of maintenance, in exchange for packages like TeXLive being larger.

It is most certainly possible to test our formula on Linux by using our Docker image, which should be identical to what is used in our Linux CI.  It can be started with docker run -it homebrew/ubuntu16.04:master.  The differences between macOS and Linux for this formula are trivial - basically just disabling X.  So whatever you test in Linux will be equally applicable on macOS.  Let me know if further guidance is needed on how to do the testing in Docker as I use it all the time.

Daniel Nachun

?On 9/20/21, 18:16, "Norbert Preining" <norbert at preining.info> wrote:

    Hi Daniel,

    (intro: author of tlmgr and texlive infra, and maintainer of texlive-*
    in Debian)

    > We are currently attempting to package TeXLive in Homebrew: https://github.com/Homebrew/homebrew-core/pull/83738.

    Interesting. I have written one recipe for homebrew/linuxbrew but never
    tried to do that for TeX Live!

    > kpsewhich ?var-value SELFAUTOPARENT.  

    We have the same problem in Debian, and we patch out the whole BEGIN
    block and auto-switch to user mode in Debian, see:
    https://github.com/debian-tex/texlive-nonbin/blob/master/texlive-base/debian/patches/debian-tlmgr-usermode
    There are some other patches you might want to look into.
    Our (Debian) layout is
    	/usr/bin/*	binaries and scripts linked
    	/usr/share/texlive/texmf-dist	main tree

    I can surely help you with the homebrew adaption (if testing is possible
    on linux with linuxbrew, I don't have macs around). Feel free to ping
    me.

    Best

    Norbert

    --
    PREINING Norbert                              https://www.preining.info
    Fujitsu Research  +  IFMGA Guide  +  TU Wien  +  TeX Live  + Debian Dev
    GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13




From norbert at preining.info  Tue Sep 21 05:36:54 2021
From: norbert at preining.info (Norbert Preining)
Date: Tue, 21 Sep 2021 12:36:54 +0900
Subject: Improvements to path resolution in tlmgr and other scripts using
 kpathsea
In-Reply-To: <E3282FF2-2667-40B6-9F4A-BC0B0DFD4619@gmail.com>
References: <31D49F68-9A9B-40BF-9519-623DFC148857@gmail.com>
 <YUkyUz73h9wBctgY@bulldog.preining.info>
 <E3282FF2-2667-40B6-9F4A-BC0B0DFD4619@gmail.com>
Message-ID: <YUlTVgalFEvEHApf@bulldog.preining.info>

Hi Daniel,

I just commented on the PR.

> 1) Homebrew tries to avoid carrying patches ourselves as much as possible.  We do not have dedicated maintainers for specific packages so it's not efficient or easy for us to maintain patches.  For that reason we try to find solutions that require minimal patching, or try to upstream patches when possible.

Ok, we can look into this.

> 2) Every package exists in its own subdirectory in HOMEBREW_PREFIX/Cellar/PACKAGE_NAME/VERSION, so the root directory for TeXLive would be HOMEBREW_PREFIX/Cellar/texlive/58837.  Ideally we'd be able to treat HOMEBREW_PREFIX/Cellar/texlive/58837 like /usr/ is on Debian, though that does not work at the moment for the reasons mentioned in my previous email.

Ah yeah, forgot about this. So you cannot hardcode the path indeed. then
your proposed way to patch tlmgr would be fine, but I am not sure about
how we could integrate this into the main code base without breaking.
There would be the need for some automatic detection in tlmgr.

> 3) We don't typically split packages up the way Debian and other distros do for some large packages like TeXLive or Qt.  This is done for ease of maintenance, in exchange for packages like TeXLive being larger.

Makes it much easier to develop a Formula, definitely. 
With only one TL package in Debian it would be rather simply to get
everything going, and in particular no problem with config files.

> It is most certainly possible to test our formula on Linux by using

Well, I have linuxbrew installed (since I contribute on Formula for
CafeOBJ), and will try if it works build the current TL formula using
linuxbrew.

Best

Norbert

--
PREINING Norbert                              https://www.preining.info
Fujitsu Research  +  IFMGA Guide  +  TU Wien  +  TeX Live  + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From jfine2358 at gmail.com  Wed Sep 22 19:30:14 2021
From: jfine2358 at gmail.com (Jonathan Fine)
Date: Wed, 22 Sep 2021 18:30:14 +0100
Subject: Fwd: TeX Hour tomorrow: An online forum for TeX users in the UK
 (18:30 to 19:30 UK time)
In-Reply-To: <CALD=Yf-4W5EdQQMXwnzYuMnjGBwoGi+7E7XaAV-bdJqEK6_oXw@mail.gmail.com>
References: <CALD=Yf-4W5EdQQMXwnzYuMnjGBwoGi+7E7XaAV-bdJqEK6_oXw@mail.gmail.com>
Message-ID: <CALD=Yf9LNW2fNX-d=C+7q06Qg+6qyLOTES16u+zjh5aYgJZ5Ow@mail.gmail.com>

Hi

Tomorrow's TeX Hour is a bit special, and also a bit sad. The UK TeX Users
Group is stagnant, and might very soon decide to dissolve itself. I've been
a member since about 1990 so that will hit me hard.

To help us make the best of what there is, I've taken the initiative to set
up an online forum for TeX users in the UK. The closest we've got to that
today is UK-TUG-Announce. I posted to that list (see below) reporting on
progress so far.

Tomorrow's TeX Hour won't be recorded, and people and issues from the UK
will have priority in speaking. Do come along if you think the meeting is
relevant to you. There's no fixed agenda.

Date and time: Thursday 23 September: 18:30 to 19:30 UK time.
UK time now: https://time.is/UK.
Zoom URL:
https://us02web.zoom.us/j/78551255396?pwd=cHdJN0pTTXRlRCtSd1lCTHpuWmNIUT09

Here's the message to UK-TUG-Announce
===
Dear UK TUG Member

I've some good news. Fellow member Antoni Diller (author of LaTeX Line
by Line) wrote to me:

"I'm interested in being kept informed of the online UK-focused TeX
forum that you talk about in your email.  I've found your emails concerning
the TeX Hour very informative, telling me things I didn't know about such
as various pretty-printing tools.  I'd like to continue receiving these."

I thank Antoni for permission to quote his message. And another person,
an expert in math accessibility and not a member of UK TUG, has also
said they'd like to subscribe to such a forum.

BBC Radio 4 has a program "In Touch" which gives news, views
and information for people who are blind or partially sighted.
Yesterday's episode was The Return to University. Recommended. If you're in
the UK you can listen to it (18 minutes long) at
https://www.bbc.co.uk/sounds/play/m000ztb0

At last week's TeX Hour someone said that their UK-based university
was monitoring uploaded PDFs for accessibility. Their PDFs scored low,
although whether it was the LaTeX or the math that problem wasn't clear.

If you'd like to join Antoni, myself and others in an online forum
please let me know. Or if you have time, come along to tomorrow's TeX Hour
(6:30 to 7:30pm).

Zoom URL:
https://us02web.zoom.us/j/78551255396?pwd=cHdJN0pTTXRlRCtSd1lCTHpuWmNIUT09

Here's Antoni's website: https://www.cantab.net/users/antoni.diller/

Happy TeXing

Jonathan
===
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210922/d8c0f2c6/attachment.html>

From jfine2358 at gmail.com  Wed Sep 22 22:37:51 2021
From: jfine2358 at gmail.com (Jonathan Fine)
Date: Wed, 22 Sep 2021 21:37:51 +0100
Subject: ACCEPTED: Packaging-con: Tools for packaging and using Portable TeX
 Documents
Message-ID: <CALD=Yf9nrBPGHX6j16O7Ou1bSrja3hYrnKdmkRvxxgAApnkYrw@mail.gmail.com>

Hi

I am a sucker. My talk proposal for https://packaging-con.org/ has been
accepted. I'm a bit flattered as I'm new to packaging, and they accepted 67
out of 95 full talk proposals. The conference itself is Tuesday 9 and
Wednesday 10 November.

I now have to write and deliver a talk. It would also be good to have at
least one working example that people can play with.

I hope some of you will help me with this, or at least answer some of my
questions. The rest of this message is the ACCEPTED proposal. I'll keep you
posted, particularly of other talks that might be relevant to our community.

The https://packaging-con.org/ conference fee is quite modest (unless your
employer is paying). By the way, the conference is organized in partnership
with NumFOCUS, who've been sponsoring MathJax since 2019. The
already there's another TeX connection.
https://numfocus.org/project/mathjax

Happy TeXing

Jonathan

Title: Tools for packaging and using Portable TeX Documents

Abstract:
Both software and documents have dependencies. This talk focuses on
managing document dependencies, to reduce both network and computation
latency, and to ensure reproducible build (or typesetting) behaviour. Web
development has a strong focus on reducing user experienced latency, as
does serverless cloud computing.

At present human activity and large downloads are required to achieve these
goals for TeX documents.  To improve matters the speaker has introduced the
concept of Portable TeX Documents (PTD).  The PTD concept is intended to
bring to source documents and the TeX community benefits similar to the
benefits Portable Document Format (PDF) brought to Word users and Adobe.

The concepts and tools underlying PTD, particularly mounting git as a
read-only file system, and the use of git backing stores (alternate object
databases) are likely to be useful elsewhere. This is particularly true
when most of the variability of a system lies in a small folder of text
files (which is the case for TeX's typesetting inputs).

Description:
Adobe's Portable Document Format (PDF) stores the output of a typesetting
process. It includes a structured storage system for storing dependencies
such as fonts, graphics, multimedia objects and other resources. The
speaker is creating similar tools and standards for the inputs to a
typesetting process. It will allow authors and others to collaborate using
Portable TeX Documents (PDT).

A key technology will be git used with a backing store (ie alternate object
database). Each PDT will be a git tree containing all typesetting inputs.
Shared resources such as fonts and style files will be placed in the
backing store. Being able to mount a git repository as a read-only file
system would be very helpful. Use of PTD will greatly reduce the human,
bandwidth and storage cost of typesetting a new TeX document in your inbox.
It will also greatly increase the sender's confidence that your output will
be identical to theirs.

The basic idea of PDT is to use git with a backing store. This technology
and associated tools will be most helpful when most of the variability of
the system lies in a small folder of text files (which is the case for
TeX's typesetting inputs). For more information see [video discussion of
Portable TeX Documents](
https://www.youtube.com/playlist?list=PLw1FZfIX1w7gcm6b4MzRKDIlW7xV4yFnd).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210922/f31e19a8/attachment.html>

From norbert at preining.info  Wed Sep 22 23:44:50 2021
From: norbert at preining.info (Norbert Preining)
Date: Wed, 22 Sep 2021 21:44:50 +0000 (UTC)
Subject: ACCEPTED: Packaging-con: Tools for packaging and using Portable
 TeX Documents
In-Reply-To: <CALD=Yf9nrBPGHX6j16O7Ou1bSrja3hYrnKdmkRvxxgAApnkYrw@mail.gmail.com>
References: <CALD=Yf9nrBPGHX6j16O7Ou1bSrja3hYrnKdmkRvxxgAApnkYrw@mail.gmail.com>
Message-ID: <2c64033f-d61f-4ef5-90a7-d336964a43ef@preining.info>

Hi

Congratulations, so there will be two talks on TeX, mine has been accepted, too.

See you there

Norbert
-- 
PREINING Norbert????????????????????????????? https://www.preining.info
Fujitsu?????????????? + IFMGA ProGuide + TU Wien + TeX Live + Debian Dev
GPG: 0x860CDC13?? fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

Sep 23, 2021 05:38:25 Jonathan Fine <jfine2358 at gmail.com>:

> Hi
> 
> I am a sucker. My talk proposal for https://packaging-con.org/ has been accepted. I'm a bit flattered as I'm new to packaging, and they accepted 67 out of 95 full talk proposals. The conference itself is Tuesday 9 and Wednesday 10 November.
> 
> I now have to write and deliver a talk. It would also be good to have at least one working example that people can play with.
> 
> I hope some of you will help me with this, or at least answer some of my questions. The rest of this message is the ACCEPTED proposal. I'll keep you posted, particularly of other talks that might be relevant to our community.
> 
> The?https://packaging-con.org/ conference fee is quite modest (unless your employer is paying). By the way, the conference is organized in partnership with NumFOCUS, who've been sponsoring MathJax since 2019. The already?there's another TeX connection.
> https://numfocus.org/project/mathjax
> 
> Happy?TeXing
> 
> Jonathan
> 
> Title: Tools for packaging and using Portable TeX Documents
> 
> Abstract:
> Both software and documents have dependencies. This talk focuses on managing document dependencies, to reduce both network and computation latency, and to ensure reproducible build (or typesetting) behaviour. Web development has a strong focus on reducing user experienced latency, as does serverless cloud computing.
> 
> At present human activity and large downloads are required to achieve these goals for TeX documents.? To improve matters the speaker has introduced the concept of Portable TeX Documents (PTD).? The PTD concept is intended to bring to source documents and the TeX community benefits similar to the benefits Portable Document Format (PDF) brought to Word users and Adobe.
> 
> The concepts and tools underlying PTD, particularly mounting git as a read-only file system, and the use of git backing stores (alternate object databases) are likely to be useful elsewhere. This is particularly true when most of the variability of a system lies in a small folder of text files (which is the case for TeX's typesetting inputs).
> 
> Description:
> Adobe's Portable Document Format (PDF) stores the output of a typesetting process. It includes a structured storage system for storing dependencies such as fonts, graphics, multimedia objects and other resources. The speaker is creating similar tools and standards for the inputs to a typesetting process. It will allow authors and others to collaborate using Portable TeX Documents (PDT).
> 
> A key technology will be git used with a backing store (ie alternate object database). Each PDT will be a git tree containing all typesetting inputs. Shared resources such as fonts and style files will be placed in the backing store. Being able to mount a git repository as a read-only file system would be very helpful. Use of PTD will greatly reduce the human, bandwidth and storage cost of typesetting a new TeX document in your inbox. It will also greatly increase the sender's confidence that your output will be identical to theirs.
> 
> The basic idea of PDT is to use git with a backing store. This technology and associated tools will be most helpful when most of the variability of the system lies in a small folder of text files (which is the case for TeX's typesetting inputs). For more information see [video discussion of Portable TeX Documents](https://www.youtube.com/playlist?list=PLw1FZfIX1w7gcm6b4MzRKDIlW7xV4yFnd).
> 
> 


From addictc at protonmail.com  Wed Sep 22 23:02:23 2021
From: addictc at protonmail.com (Addict)
Date: Wed, 22 Sep 2021 21:02:23 +0000
Subject: unexpected return value from verify_checksum: -5
Message-ID: <Yl1eOtt1RkVv0YeyjnW4oNiwhDrzVZJhhzAhgVOOnMa34fPWP0s0L4FZ-ZK4XLRdmkkRkgiAeHT-HHYZRx0RBlNcftKwoTGn2CLKRHo45hM=@protonmail.com>

Greetings.

I'm a very new ubuntu user and im trying to download a basic-scheme texlive install however I've run into problems when trying to use tlmgr to download packages I get the message "/usr/bin/tlmgr:unexpected return value from verify_checksum: -5"
After a bit of searching online i found this post
https://tex.stackexchange.com/questions/528634/tlmgr-unexpected-return-value-from-verify-checksum-5
however even after adding the lines

export PATH=$PATH:/usr/local/texlive/2021/bin/x86_64-linux export MANPATH=/usr/local/texlive/2021/texmf-dist/doc/man export INFOPATH=/usr/local/texlive/2021/texmf-dist/doc/info

to .bashrc accessed by:

$ cd
$ vim .bashrc

when using

$ echo $PATH

It returns

/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/texlive/2021/bin/x86_64-linux:/usr/local/texlive/2021/bin/x86_64-linux

which im guessing means that it has been added to PATH as instructed by the post?

however running

$ sudo env PATH="$PATH" ./update-tlmgr-latest.sh
returns
"Verifying archive integrity...Error in MD5 checksums: 658d7ba1e8ac697d6df7dbd5f6bb58ad is different from 37070fa51acca146e95ff2e2fff2fa77"

and

$ sudo kpsewhich --var-value=SELFAUTOPARENT

still returns just a /

and if I try to install a package with

$ tlmgr install siunitx

it still returns
Im pretty much out of ideas for what to try at this point. If anyone can tell me what I am doing from it would be much appreciated

Best regards

Sent with [ProtonMail](https://protonmail.com/) Secure Email.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210922/5b44151d/attachment-0001.html>

From axel.retif at gmail.com  Thu Sep 23 04:37:11 2021
From: axel.retif at gmail.com (Axel E. Retif)
Date: Wed, 22 Sep 2021 21:37:11 -0500
Subject: unexpected return value from verify_checksum: -5
In-Reply-To: <Yl1eOtt1RkVv0YeyjnW4oNiwhDrzVZJhhzAhgVOOnMa34fPWP0s0L4FZ-ZK4XLRdmkkRkgiAeHT-HHYZRx0RBlNcftKwoTGn2CLKRHo45hM=@protonmail.com>
References: <Yl1eOtt1RkVv0YeyjnW4oNiwhDrzVZJhhzAhgVOOnMa34fPWP0s0L4FZ-ZK4XLRdmkkRkgiAeHT-HHYZRx0RBlNcftKwoTGn2CLKRHo45hM=@protonmail.com>
Message-ID: <c00d1194-c05c-432d-9e8d-bc0380dfa16b@gmail.com>


> I'm a very new ubuntu user and im trying to download a basic-scheme 
> texlive install however I've run into problems when trying to use tlmgr 
> to download packages I get the message "/usr/bin/tlmgr:unexpected return 
> value from verify_checksum: -5"
> After a bit of searching online i found this post
> https://tex.stackexchange.com/questions/528634/tlmgr-unexpected-return-value-from-verify-checksum-5 
> however even after adding the lines
> 
> export PATH=$PATH:/usr/local/texlive/2021/bin/x86_64-linux export 
> MANPATH=/usr/local/texlive/2021/texmf-dist/doc/man export 
> INFOPATH=/usr/local/texlive/2021/texmf-dist/doc/info
> 
> to .bashrc

> when using
> 
> $ echo $PATH
> 
> It returns
> 
> /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/usr/local/texlive/2021/bin/x86_64-linux:/usr/local/texlive/2021/bin/x86_64-linux

 From what I see ("/usr/bin/tlmgr:unexpected return...") you also have 
an installation of TeX from the repositories, and as you see in your 
line above /usr/bin comes before 
/usr/local/texlive/2021/bin/x86_64-linux (I don't know why it appears 
twice). So if the system finds a tlmgr in /usr/bin it selects that and 
simply ignores what comes after.

That is to say, you have *appended* the PATH 
/usr/local/texlive/2021/bin/x86_64-linux; but in order for the system to 
select tlmgr from .../texlive/2021 you have to *prepend* it, so it comes 
first in the search path.

For that I've been using in general the instructions from ?Gilles 'SO- 
stop being evil'? in

https://unix.stackexchange.com/questions/26047/how-to-correctly-add-a-path-to-path

(it's the replay that starts with the title ?The simple stuff?; I know 
it's ?old?, but it works for me). So it would be

PATH=/usr/local/texlive/2021/bin/x86_64-linux:$PATH

I say that I follow said instructions ?in general? because they say to 
put the PATH in ~/.profile, but I do it in ~/.bashrc, and I source 
~/.bashrc in ~/.profile with these lines:

# if running bash
if [ -n "$BASH_VERSION" ]; then
     # include .bashrc if it exists
     if [ -f "$HOME/.bashrc" ]; then
	. "$HOME/.bashrc"
     fi
fi


Best

Axel

From axel.retif at gmail.com  Thu Sep 23 05:19:18 2021
From: axel.retif at gmail.com (Axel E. Retif)
Date: Wed, 22 Sep 2021 22:19:18 -0500
Subject: unexpected return value from verify_checksum: -5
In-Reply-To: <c00d1194-c05c-432d-9e8d-bc0380dfa16b@gmail.com>
References: <Yl1eOtt1RkVv0YeyjnW4oNiwhDrzVZJhhzAhgVOOnMa34fPWP0s0L4FZ-ZK4XLRdmkkRkgiAeHT-HHYZRx0RBlNcftKwoTGn2CLKRHo45hM=@protonmail.com>
 <c00d1194-c05c-432d-9e8d-bc0380dfa16b@gmail.com>
Message-ID: <31e00cdb-6be2-0ec3-bf5b-3847873f9414@gmail.com>

On 9/22/21 9:37 PM, Axel E. Retif wrote:

> For that I've been using in general the instructions from ?Gilles 'SO- 
> stop being evil'? in
> 
> https://unix.stackexchange.com/questions/26047/how-to-correctly-add-a-path-to-path 
> 
> So it would be
> 
> PATH=/usr/local/texlive/2021/bin/x86_64-linux:$PATH

I didn't know if to add the following, but I might as well do it:

For the specific case of TeXLive (I also use Ubuntu), I don't follow the 
above method, but I prepend the PATH of .../texlive... in 
/etc/environment (I haven't installed yet TeXLive 2021):

PATH="/usr/local/texlive/2020/bin/x86_64-linux:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin"

Also I keep /usr/local/texlive owned by root (a habit from my old Mac 
days), so i have to

    sudo su

in the terminal to update texlive (sudo tlmgr doesn't work with my 
setup: ?sudo: tlmgr: command not found?).


Best

Axel

From axel.retif at gmail.com  Thu Sep 23 05:25:45 2021
From: axel.retif at gmail.com (Axel E. Retif)
Date: Wed, 22 Sep 2021 22:25:45 -0500
Subject: unexpected return value from verify_checksum: -5
In-Reply-To: <c00d1194-c05c-432d-9e8d-bc0380dfa16b@gmail.com>
References: <Yl1eOtt1RkVv0YeyjnW4oNiwhDrzVZJhhzAhgVOOnMa34fPWP0s0L4FZ-ZK4XLRdmkkRkgiAeHT-HHYZRx0RBlNcftKwoTGn2CLKRHo45hM=@protonmail.com>
 <c00d1194-c05c-432d-9e8d-bc0380dfa16b@gmail.com>
Message-ID: <97b66999-f8aa-9e58-2be5-278a4fe00c17@gmail.com>

On 9/22/21 9:37 PM, Axel E. Retif wrote:

> it's the replay

Sorry: reply.

Axel

From yvon.henel at yvon-henel.fr  Thu Sep 23 07:32:22 2021
From: yvon.henel at yvon-henel.fr (Yvon Henel)
Date: Thu, 23 Sep 2021 07:32:22 +0200
Subject: error in tlmgr today
Message-ID: <bbb2304b-c463-6937-6d19-d4238e5eb7aa@yvon-henel.fr>

hello all

below what I obtained today when using
tlmgr update --self --all


tlmgr: package repository 
https://mirrors.ircam.fr/pub/CTAN/systems/texlive/tlnet (verified)
tlmgr: saving backups to /mnt/donnees3/texlive/2021/tlpkg/backups
TeXLive::TLUtils::check_file_and_remove: checksums differ for 
/tmp/_0o2X3oeL_/uOHUKf3EIv/texlive.infra.tar.xz:
TeXLive::TLUtils::check_file_and_remove: 
tlchecksum=318d24e48a2880488924a2beb54552f028f47397b5b75b7a606926b63ad9bb26017bbbd128ca16a7f3c7578e89047b58955d0106fb6a00c4c7085e241d5213f4, 
arg=797cf90dbd6862303f5f009d87c5ec1bdcd6d8e14fbec9189bd52b144c377558fb9b094a4387c7d53578be65205c938c0fd529eb7dd47e5b790b184a87f193a7
TeXLive::TLUtils::check_file_and_remove: backtrace:
  -> /mnt/donnees3/texlive/2021/tlpkg/TeXLive/TLUtils.pm:2399: 
TeXLive::TLUtils::check_file_and_remove
  -> /mnt/donnees3/texlive/2021/tlpkg/TeXLive/TLPDB.pm:1978: 
TeXLive::TLUtils::unpack
  -> /mnt/donnees3/texlive/2021/tlpkg/TeXLive/TLPDB.pm:1813: 
TeXLive::TLPDB::_install_data
  -> /mnt/donnees3/texlive/2021/tlpkg/TeXLive/TLPDB.pm:1729: 
TeXLive::TLPDB::not_virtual_install_package
  -> /mnt/donnees3/texlive/2021/bin/x86_64-linux/tlmgr:3370: 
TeXLive::TLPDB::install_package
  -> /mnt/donnees3/texlive/2021/bin/x86_64-linux/tlmgr:795: 
main::action_update
  -> /mnt/donnees3/texlive/2021/bin/x86_64-linux/tlmgr:701: 
main::execute_action
  -> /mnt/donnees3/texlive/2021/bin/x86_64-linux/tlmgr:365: main::main
TeXLive::TLUtils::check_file_and_remove:   removing 
/tmp/_0o2X3oeL_/uOHUKf3EIv/texlive.infra.tar.xz, but saving copy in 
/tmp/GxM2Xd25Yz
TLPDB::_install_data: downloading did not succeed (check_file_and_remove 
failed) for 
https://mirrors.ircam.fr/pub/CTAN/systems/texlive/tlnet/archive/texlive.infra.tar.xz
tlmgr: Installation of new version of texlive.infra failed, trying to 
unwind.
[1/1, ??:??/??:??] update: texlive.infra [429k] (59352 -> 60568) ... 
tlmgr: Restoring old package state succeeded.
tlmgr: action update returned an error; continuing.
done
tlmgr: An error has occurred. See above messages. Exiting.
tlmgr: package log updated: 
/mnt/donnees3/texlive/2021/texmf-var/web2c/tlmgr.log

I hope somebody will understand all of that.

best regards

-- 
Yvon Henel

From garbytrash at gmail.com  Thu Sep 23 09:46:24 2021
From: garbytrash at gmail.com (Zenny)
Date: Thu, 23 Sep 2021 09:46:24 +0200
Subject: ACCEPTED: Packaging-con: Tools for packaging and using Portable
 TeX Documents
In-Reply-To: <2c64033f-d61f-4ef5-90a7-d336964a43ef@preining.info>
References: <CALD=Yf9nrBPGHX6j16O7Ou1bSrja3hYrnKdmkRvxxgAApnkYrw@mail.gmail.com>
 <2c64033f-d61f-4ef5-90a7-d336964a43ef@preining.info>
Message-ID: <CACuV5sCq7Ccv=m10-pCbFjMgQ2Lj_U=0zuSbitTBXR=CoHrV+A@mail.gmail.com>

Congrats, John. Best of luck!

On 9/22/21, Norbert Preining <norbert at preining.info> wrote:
> Hi
>
> Congratulations, so there will be two talks on TeX, mine has been accepted,
> too.
>
> See you there
>
> Norbert
> --
> PREINING Norbert????????????????????????????? https://www.preining.info
> Fujitsu?????????????? + IFMGA ProGuide + TU Wien + TeX Live + Debian Dev
> GPG: 0x860CDC13?? fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
>
> Sep 23, 2021 05:38:25 Jonathan Fine <jfine2358 at gmail.com>:
>
>> Hi
>>
>> I am a sucker. My talk proposal for https://packaging-con.org/ has been
>> accepted. I'm a bit flattered as I'm new to packaging, and they accepted
>> 67 out of 95 full talk proposals. The conference itself is Tuesday 9 and
>> Wednesday 10 November.
>>
>> I now have to write and deliver a talk. It would also be good to have at
>> least one working example that people can play with.
>>
>> I hope some of you will help me with this, or at least answer some of my
>> questions. The rest of this message is the ACCEPTED proposal. I'll keep
>> you posted, particularly of other talks that might be relevant to our
>> community.
>>
>> The?https://packaging-con.org/ conference fee is quite modest (unless your
>> employer is paying). By the way, the conference is organized in
>> partnership with NumFOCUS, who've been sponsoring MathJax since 2019. The
>> already?there's another TeX connection.
>> https://numfocus.org/project/mathjax
>>
>> Happy?TeXing
>>
>> Jonathan
>>
>> Title: Tools for packaging and using Portable TeX Documents
>>
>> Abstract:
>> Both software and documents have dependencies. This talk focuses on
>> managing document dependencies, to reduce both network and computation
>> latency, and to ensure reproducible build (or typesetting) behaviour. Web
>> development has a strong focus on reducing user experienced latency, as
>> does serverless cloud computing.
>>
>> At present human activity and large downloads are required to achieve
>> these goals for TeX documents.? To improve matters the speaker has
>> introduced the concept of Portable TeX Documents (PTD).? The PTD concept
>> is intended to bring to source documents and the TeX community benefits
>> similar to the benefits Portable Document Format (PDF) brought to Word
>> users and Adobe.
>>
>> The concepts and tools underlying PTD, particularly mounting git as a
>> read-only file system, and the use of git backing stores (alternate object
>> databases) are likely to be useful elsewhere. This is particularly true
>> when most of the variability of a system lies in a small folder of text
>> files (which is the case for TeX's typesetting inputs).
>>
>> Description:
>> Adobe's Portable Document Format (PDF) stores the output of a typesetting
>> process. It includes a structured storage system for storing dependencies
>> such as fonts, graphics, multimedia objects and other resources. The
>> speaker is creating similar tools and standards for the inputs to a
>> typesetting process. It will allow authors and others to collaborate using
>> Portable TeX Documents (PDT).
>>
>> A key technology will be git used with a backing store (ie alternate
>> object database). Each PDT will be a git tree containing all typesetting
>> inputs. Shared resources such as fonts and style files will be placed in
>> the backing store. Being able to mount a git repository as a read-only
>> file system would be very helpful. Use of PTD will greatly reduce the
>> human, bandwidth and storage cost of typesetting a new TeX document in
>> your inbox. It will also greatly increase the sender's confidence that
>> your output will be identical to theirs.
>>
>> The basic idea of PDT is to use git with a backing store. This technology
>> and associated tools will be most helpful when most of the variability of
>> the system lies in a small folder of text files (which is the case for
>> TeX's typesetting inputs). For more information see [video discussion of
>> Portable TeX
>> Documents](https://www.youtube.com/playlist?list=PLw1FZfIX1w7gcm6b4MzRKDIlW7xV4yFnd).
>>
>>
>
>


-- 
Cheers,
/z

-.. .. ... -.-. .-.. .- .. -- . .-. | -.. .. ... -.-. .-.. .- .. -- . .-.
CONFIDENTIALITY NOTICE AND DISCLAIMER: Access to this e-mail and its
contents by anyone other than the intended recipient is unauthorized as it
contains privileged and confidential information, and is subject to legal
privilege. Please do not re/distribute it.  If you are not the intended
recipient (or responsible for delivery of the message to such person), you
may not use, copy, distribute or deliver the email and part of its contents
to anyone this message (or any part of its contents or take any action in
connection to it. In such case, you should destroy this message, and notify
the sender immediately. If you have received this email in error, please
notify the sender or your sysadmin immediately by e-mail or telephone, and
delete the e-mail from any computer. If you or your employer does not
consent to internet e-mail messages of this kind, please notify the sender
immediately. All reasonable precautions have been taken to ensure no
viruses are present in this e-mail and attachments included. As the sender
cannot accept responsibility for any loss or damage arising from the use of
this e-mail or attachments it is recommended that you are responsible to
follow your virus checking procedures prior to use. The views, opinions,
conclusions and other informations expressed in this electronic mail are
not given or endorsed by any company including the network providers unless
otherwise indicated by an authorized representative independent of this
message.
-.. .. ... -.-. .-.. .- .. -- . .-. | -.. .. ... -.-. .-.. .- .. -- . .-.


From ilg at livius.net  Thu Sep 23 22:21:59 2021
From: ilg at livius.net (Liviu Ionescu)
Date: Thu, 23 Sep 2021 23:21:59 +0300
Subject: The Arm Linux binaries are incompatible with older systems
Message-ID: <64E43AF4-507B-4FE8-B29B-A170346F4CF1@livius.net>

For several years I used TeX Live 2018 in a cross-platform build environment (Docker based for Intel & Arm Linux, a separate folder on macOS).

When I tried to upgrade all platforms to TeX Live 2021, the `install-tl` script failed in the Arm Docker images. 

After several investigations, I found out that the LUA binaries are compiled agains GLIBC_2.28 (probably on a Raspberry Pi):

% grep GLIB install-tl.log
texlua: /lib/aarch64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by texlua)
luatex: /lib/aarch64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by luatex)
luajittex: /lib/aarch64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by luajittex)
luajithbtex: /lib/aarch64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by luajithbtex)
luahbtex: /lib/aarch64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by luahbtex)
luatex: /lib/aarch64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by luatex)
luatex: /lib/aarch64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by luatex)
luatex: /lib/aarch64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by luatex)
luatex: /lib/aarch64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by luatex)
luatex: /lib/aarch64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by luatex)
luahbtex: /lib/aarch64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by luahbtex)


For compatibility with older systems, my build environment is based on Ubuntu 16, which uses an older GLIBC (2.23), and thus the system loader cannot load the more recent binaries:

```
# ldd --version
ldd (Ubuntu GLIBC 2.23-0ubuntu11.3) 2.23

# ldd -v /opt/texlive/bin/aarch64-linux/luatex
/opt/texlive/bin/aarch64-linux/luatex: /lib/aarch64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by /opt/texlive/bin/aarch64-linux/luatex)
	linux-vdso.so.1 =>  (0x0000007fa2e9b000)
	libdl.so.2 => /lib/aarch64-linux-gnu/libdl.so.2 (0x0000007fa22bf000)
	libm.so.6 => /lib/aarch64-linux-gnu/libm.so.6 (0x0000007fa2212000)
	libc.so.6 => /lib/aarch64-linux-gnu/libc.so.6 (0x0000007fa20cc000)
	/lib/ld-linux-aarch64.so.1 (0x0000007fa2e70000)

	Version information:
	/opt/texlive/bin/aarch64-linux/luatex:
		libm.so.6 (GLIBC_2.17) => /lib/aarch64-linux-gnu/libm.so.6
		libdl.so.2 (GLIBC_2.17) => /lib/aarch64-linux-gnu/libdl.so.2
		libc.so.6 (GLIBC_2.28) => not found
		libc.so.6 (GLIBC_2.17) => /lib/aarch64-linux-gnu/libc.so.6
	/lib/aarch64-linux-gnu/libdl.so.2:
		ld-linux-aarch64.so.1 (GLIBC_PRIVATE) => /lib/ld-linux-aarch64.so.1
		libc.so.6 (GLIBC_PRIVATE) => /lib/aarch64-linux-gnu/libc.so.6
		libc.so.6 (GLIBC_2.17) => /lib/aarch64-linux-gnu/libc.so.6
	/lib/aarch64-linux-gnu/libm.so.6:
		libc.so.6 (GLIBC_PRIVATE) => /lib/aarch64-linux-gnu/libc.so.6
		libc.so.6 (GLIBC_2.17) => /lib/aarch64-linux-gnu/libc.so.6
	/lib/aarch64-linux-gnu/libc.so.6:
		ld-linux-aarch64.so.1 (GLIBC_2.17) => /lib/ld-linux-aarch64.so.1
		ld-linux-aarch64.so.1 (GLIBC_PRIVATE) => /lib/ld-linux-aarch64.so.1
```

Same for the 32-bit version:

```
# ldd -v /opt/texlive/bin/armhf-linux/luatex 
/opt/texlive/bin/armhf-linux/luatex: /lib/arm-linux-gnueabihf/libc.so.6: version `GLIBC_2.28' not found (required by /opt/texlive/bin/armhf-linux/luatex)
	libdl.so.2 => /lib/arm-linux-gnueabihf/libdl.so.2 (0xf7c9f000)
	libm.so.6 => /lib/arm-linux-gnueabihf/libm.so.6 (0xf7c27000)
	libc.so.6 => /lib/arm-linux-gnueabihf/libc.so.6 (0xf7b3b000)
	/lib/ld-linux-armhf.so.3 (0xf7cb2000)

	Version information:
	/opt/texlive/bin/armhf-linux/luatex:
		libdl.so.2 (GLIBC_2.4) => /lib/arm-linux-gnueabihf/libdl.so.2
		libm.so.6 (GLIBC_2.4) => /lib/arm-linux-gnueabihf/libm.so.6
		libc.so.6 (GLIBC_2.28) => not found
		libc.so.6 (GLIBC_2.7) => /lib/arm-linux-gnueabihf/libc.so.6
		libc.so.6 (GLIBC_2.4) => /lib/arm-linux-gnueabihf/libc.so.6
	/lib/arm-linux-gnueabihf/libdl.so.2:
		ld-linux-armhf.so.3 (GLIBC_PRIVATE) => /lib/ld-linux-armhf.so.3
		libc.so.6 (GLIBC_PRIVATE) => /lib/arm-linux-gnueabihf/libc.so.6
		libc.so.6 (GLIBC_2.4) => /lib/arm-linux-gnueabihf/libc.so.6
	/lib/arm-linux-gnueabihf/libm.so.6:
		libc.so.6 (GLIBC_PRIVATE) => /lib/arm-linux-gnueabihf/libc.so.6
		libc.so.6 (GLIBC_2.4) => /lib/arm-linux-gnueabihf/libc.so.6
	/lib/arm-linux-gnueabihf/libc.so.6:
		ld-linux-armhf.so.3 (GLIBC_2.4) => /lib/ld-linux-armhf.so.3
		ld-linux-armhf.so.3 (GLIBC_PRIVATE) => /lib/ld-linux-armhf.so.3
```

To be noted that the Intel Linux LUA binaries were built on an old enough system such that installing TeX Live 2021 was possible even inside the very old Ubuntu 12 x86_64 and i386 Docker images.

---

So, for now, unless you have a better suggestion (like selectively disabling the LUA packages?), I have to stick with the 2018 distribution for all platforms; but since the 2018 distribution can no longer be installed on more recent macOS releases, for macOS I'm forced to upgrade to 2021, resulting an inconsistent environment, which usually asks for trouble.

It would be great to rebuild the Arm LUA binaries (64/32-bit) on an Ubuntu 16 (this can be easily done with existing Docker images), to increase compatibility of the TeX Live distribution. In fact the world did not start with the Raspberry Pi revolution.


Regards,

Liviu
 

p.s. If needed, the full install log is attached.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: install-tl.log
Type: application/octet-stream
Size: 372230 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20210923/b7b51051/attachment-0001.obj>
-------------- next part --------------



From lahcim8 at gmail.com  Thu Sep 23 23:19:35 2021
From: lahcim8 at gmail.com (=?utf-8?q?Michal_Vlas=C3=A1k?=)
Date: Thu, 23 Sep 2021 23:19:35 +0200
Subject: The Arm Linux binaries are incompatible with older systems
In-Reply-To: <64E43AF4-507B-4FE8-B29B-A170346F4CF1@livius.net>
Message-ID: <CEHKU8I4393A.2UHW69HHBLJAK@deimos>

On Thu Sep 23, 2021 at 10:21 PM CEST, Liviu Ionescu wrote:
> For several years I used TeX Live 2018 in a cross-platform build
> environment (Docker based for Intel & Arm Linux, a separate folder on
> macOS).
>
> When I tried to upgrade all platforms to TeX Live 2021, the `install-tl`
> script failed in the Arm Docker images.
>
> After several investigations, I found out that the LUA binaries are
> compiled agains GLIBC_2.28 (probably on a Raspberry Pi):
>
> % grep GLIB install-tl.log
> texlua: /lib/aarch64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by texlua)
> luatex: /lib/aarch64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found (required by luatex)
> [...]

Ah, the good old "too new glibc required by the binary" problem.
Recently, essentially the same problem showed up for the same
architecture for ConTeXt:

    https://mailman.ntg.nl/pipermail/ntg-context/2021/102893.html

To accomodate that, Mojca Miklavec set up a new builder for the ConTeXt
build farm (https://build.contextgarden.net/). As the build farm also
builds whole TeX Live, theoretically you could use those binaries (IIRC
the TeX Live installer allows custom binaries). But those are from the
development versions -- though I think that you can safely use the
"luatex" binary from there:

    https://dl.contextgarden.net/build/texlive/aarch64-linux.tar.xz

Anyways, the usual TeX Live binaries need a rebuild against older glibc
(by e.g. building on an older Linux distro release).

AFAICT the aarch64-linux binaries are provided by Johannes Hielscher and
the armhf-linux binaries by Simon Dales. But maybe the binaries can be
built on the ConTeXt build farm by Mojca, considering that it is already
set up?

Michal Vlas?k

PS: The only GLIBC_2.28 symbol in luatex seems to be fcntl64. Which is
there, because the Lua filesystem (LFS) library used by LuaTeX supports
long files by default. There is a check for LFS_DO_NOT_USE_LARGE_FILE,
though it's probably not wise to go that route.


From ilg at livius.net  Fri Sep 24 11:52:02 2021
From: ilg at livius.net (Liviu Ionescu)
Date: Fri, 24 Sep 2021 12:52:02 +0300
Subject: The Arm Linux binaries are incompatible with older systems
In-Reply-To: <CEHKU8I4393A.2UHW69HHBLJAK@deimos>
References: <CEHKU8I4393A.2UHW69HHBLJAK@deimos>
Message-ID: <95C299C9-EC12-49D3-9751-3DF6B4E98076@livius.net>



> On 24 Sep 2021, at 00:19, Michal Vlas?k <lahcim8 at gmail.com> wrote:
> 
> ... a new builder for the ConTeXt
> build farm (https://build.contextgarden.net/). As the build farm also
> builds whole TeX Live, theoretically you could use those binaries (IIRC
> the TeX Live installer allows custom binaries). But those are from the
> development versions -- though I think that you can safely use the
> "luatex" binary from there:
> 
>    https://dl.contextgarden.net/build/texlive/aarch64-linux.tar.xz

Thank you, but, if I got it right, these binaries are also built on a Debian 10, which uses the same GLIBC 2.28 version.

For my build environment I did a research on how GLIBC versions were used during time for various distributions, and I ended with a page to summarise this:

- https://github.com/xpack/xpack-build-box#distro-versions

>From my understanding, the oldest 64-bit Arm systems used GLIBC 2.23 (Ubuntu 16) and 2.24 (Debian 9).

For various practical reasons (like more recent updates available), for my build environment I decided to use Ubuntu 16, which, in my opinion, should cover the vast majority of existing Arm Linux machines.

> Anyways, the usual TeX Live binaries need a rebuild against older glibc
> (by e.g. building on an older Linux distro release).

Agree. My suggestion is to go back as far as GLIBC 2.23.

> ... But maybe the binaries can be
> built on the ConTeXt build farm by Mojca, considering that it is already
> set up?

Yes, that would be a solution, but he should add Ubuntu 16 runners instead of the existing Debian 10 runners. 

But why not build the LUA binaries on the same machine where the other binaries are built?

Another option would be to have a choice (like a command line option for the install script) to compile these binaries locally from sources.

> PS: The only GLIBC_2.28 symbol in luatex seems to be fcntl64. Which is
> there, because the Lua filesystem (LFS) library used by LuaTeX supports
> long files by default. There is a check for LFS_DO_NOT_USE_LARGE_FILE,
> though it's probably not wise to go that route.

You mean that building the binaries on an older GLIBC will not use this feature, because this system call was added in 2.28?

---

Anyway, a new release with these binaries fixed will most probably take more time that I can afford to wait.

So, for my specific use case, is there any hack that I can try in order to install 2021 in my build environment (Ubuntu 16 for Arm and Ubuntu 12 for Intel)?

I think I can live well enough without LUA support, so my first choice would be to remove it from the installation. Currently I pass "medium" to the install script. Is there any way to pass something like "medium without lua"?

If this is not reasonable, the second choice would be to build the binaries locally and patch the install script to skip the copy of the available binaries.

If none of these is reasonable, I'll probably have to stick to 2018 for this release of my build environment and hope that the future TeX Live release will be fixed.


Regards,

Liviu







From jhielscher at posteo.de  Fri Sep 24 16:44:49 2021
From: jhielscher at posteo.de (Johannes Hielscher)
Date: Fri, 24 Sep 2021 14:44:49 +0000
Subject: The Arm Linux binaries are incompatible with older systems
In-Reply-To: <64E43AF4-507B-4FE8-B29B-A170346F4CF1@livius.net>
References: <64E43AF4-507B-4FE8-B29B-A170346F4CF1@livius.net>
Message-ID: <20210924164449.3af61886@capsicvm>

Am Thu, 23 Sep 2021 23:21:59 +0300
schrieb Liviu Ionescu <ilg at livius.net>:

> For several years I used TeX Live 2018 in a cross-platform build
> environment (Docker based for Intel & Arm Linux, a separate folder on
> macOS).
> 
> When I tried to upgrade all platforms to TeX Live 2021, the
> `install-tl` script failed in the Arm Docker images. 
> 
> After several investigations, I found out that the LUA binaries are
> compiled agains GLIBC_2.28 (probably on a Raspberry Pi):
> 

> For compatibility with older systems, my build environment is based
> on Ubuntu 16, which uses an older GLIBC (2.23), and thus the system
> loader cannot load the more recent binaries:

When compatibility with older systems is an issue that blocks you from
upgrading your operating system baseline, does this mean that the
content for which you provide TL binaries does also not rely on
recent/bleeding-edge developments on the TeX side?

The kernel of TeX and most of the popular macro sets are slow-moving
these days. And even in case of changes (bug fixes, etc.), it appears
to me that the TeXLive packages provided in the repositories of
your Linux distribution (DEBs via apt) should be first choice in any
case, IMHO.
I don't see a point in clinging to a Linux platform for half a decade
(or longer), but then pull in the newest and shiniest TeXLive with all
its subtle changes on a yearly basis.

I settled to do my builds (aarch64-linux) on Debian oldstable (buster
atm) to avoid the worst incompatibilities with people who haven't
managed to upgrade their boxes for the last about two years. I deem
this a reasonable compromise on a ?young? platform like AArch64.

> 
> So, for now, unless you have a better suggestion (like selectively
> disabling the LUA packages?),
Yes, you can run install-tl on another machine, select a custom
scheme (that excludes LuaTeX), save via 'P', and feed the resulting
texlive.profile into your Dockerfile.

> I have to stick with the 2018
> distribution for all platforms; but since the 2018 distribution can
> no longer be installed on more recent macOS releases, for macOS I'm
> forced to upgrade to 2021, resulting an inconsistent environment,
> which usually asks for trouble.

Isn't old Ubuntu + new macOS an inconsistent environment in any case?

> 
> It would be great to rebuild the Arm LUA binaries (64/32-bit) on an
> Ubuntu 16 (this can be easily done with existing Docker images)

I personally am very reluctant to invest into containerisation, just to
make it superficially easier to prolong the life of obsolete
infrastructure (Ubuntu 16.04LTS is apparently only the tip of the
iceberg). It is my conviction that it is an *advantage* of free
software that things like glibc or the Linux kernel periodically break
binary compatibility, to make it more difficult for code rot or
questionable ?works for me, can't be bad? hacks to creep into complex
systems.


> In fact the
> world did not start with the Raspberry Pi revolution.
FWIW, said Raspberry Pi ?revolution? is not a great measure of progress
at all. Still stuck to 32-bit instructions on hardware that speaks
64 bits since 2016.

> 
> 
> Regards,
> 
> Liviu
>  


Please don't get me wrong. I don't want to be unhelpful, I'm just under
the impression that you are facing a problem that lies deeper than just
the inconvenient progress of the glibc ABI. Having TL binaries compiled
against old glibc would be easiest for you, but it doesn't solve your
problem, it just postpones it (nicely wrapped into the SPOF Y2038-class
issue of Dockerification). I strongly suggest that you consider other
possibilities (like upgrading whatever keeps you from dropping Ubuntu
16.04LTS, or becoming more insistent towards those who are behind
schedule at keeping pace with modern OS development ? I wonder why
this works for macOS but not for Linux?), before you rely on volunteers
to build binaries on outdated platforms for an indefinite time into the
future.

By the way, have you tried to build TeXLive by yourself? The build
is not complicated, especially if you --disable-native-texlive-build
(check the wrap-up [0], the SVN READMEs [1] and/or CI workflow files
[2]). It takes less than an hour on modern RPi/SBC hardware.

The contextgarden binaries, like kindly suggested by Michal, are a
viable option for the moment. Though, clarify with Mojca, Hans etc.
first, if/how long they intend to keep this service online for
non-interactive productivity purposes of third parties.


Best,
Johannes


[0]
http://tug.org/texlive/build.html
[1]
http://tug.org/svn/texlive/trunk/Build/source/README.2building?view=markup
[2]
http://tug.org/svn/texlive/trunk/Build/source/.github/workflows/main.yml?view=markup


From ilg at livius.net  Fri Sep 24 18:08:47 2021
From: ilg at livius.net (Liviu Ionescu)
Date: Fri, 24 Sep 2021 19:08:47 +0300
Subject: The Arm Linux binaries are incompatible with older systems
In-Reply-To: <20210924164449.3af61886@capsicvm>
References: <64E43AF4-507B-4FE8-B29B-A170346F4CF1@livius.net>
 <20210924164449.3af61886@capsicvm>
Message-ID: <2195394C-DD0B-41AA-867F-241C84667187@livius.net>



> On 24 Sep 2021, at 17:44, Johannes Hielscher <jhielscher at posteo.de> wrote:
> 
> When compatibility with older systems is an issue that blocks you from
> upgrading your operating system baseline, does this mean that the
> content for which you provide TL binaries does also not rely on
> recent/bleeding-edge developments on the TeX side?

To be honest, I include TL in my build environment only to build the manuals that accompany some GNU packages, like GCC.

I don't know what features are used by the GCC manuals, but so far building the PDFs for GCC 11 with TL 2018 seemed ok.


> The kernel of TeX and most of the popular macro sets are slow-moving
> these days. And even in case of changes (bug fixes, etc.), it appears
> to me that the TeXLive packages provided in the repositories of
> your Linux distribution (DEBs via apt) should be first choice in any
> case, IMHO.

My build platforms are 

- Ubuntu 12 for Intel Linux
- Ubuntu 16 for Arm linux
- macOS 10.13 for Intel Linux 
- (to be added soon) macOS 11 for Arm macOS.

The Ubuntu 12 is definitely too old, Ubuntu 16 may be able to build the current GCC manuals (and a few more other, but nothing bleeding edge), and installing TL on a headless macOS requires the install-tl script anyway.

Initially I used macOS 10.10, and I was able to install TL 2018 on all platforms.

Now I moved to macOS 10.13 and I can no longer install 2018 on it. Thus I moved to 2021; it worked for 10.13 and 11.x, but fails on older Ubuntus.

> I don't see a point in clinging to a Linux platform for half a decade
> (or longer), but then pull in the newest and shiniest TeXLive with all
> its subtle changes on a yearly basis.

I don't mind using TL 2018, but I can no longer install it on macOS 10.13.

>> So, for now, unless you have a better suggestion (like selectively
>> disabling the LUA packages?),
> Yes, you can run install-tl on another machine, select a custom
> scheme (that excludes LuaTeX), save via 'P', and feed the resulting
> texlive.profile into your Dockerfile.

Thank you, I'll try it, but this just adds some extra maintenance, since I have to do this with each new release.

> Isn't old Ubuntu + new macOS an inconsistent environment in any case?

It is, but Arm macOS started with 11.x. For Intel macOS the reference platform is macOS 10.13.

> ... Having TL binaries compiled
> against old glibc would be easiest for you, but it doesn't solve your
> problem, it just postpones it

No, it simply prevents me from using a more recent TL.

> ... I strongly suggest that you consider other
> possibilities (like upgrading whatever keeps you from dropping Ubuntu
> 16.04LTS, or becoming more insistent towards those who are behind
> schedule at keeping pace with modern OS development

Support for RedHat Enterprise 7.7 ends in Aug. 2023. RH7 uses GLIBC 2.17.

Initially I planned to base my build environment on RH 7, but, for various reasons, this proved not realistic; the next available choice was Ubuntu 12, with GLIBC 2.15.

I produce binaries to be used in build and testing environments (like toolchains), and some of these testing environments are very conservative, I cannot force them to upgrade them.

I'll not wait till 2023, next year I'll drop support for RH 7 and move to GLIBC 2.23, available since Ubuntu 16.


So, thank you for your suggestion, but the choice for the system version is not mine; if I want my binaries to be useful in enterprise build environments, for now I have to keep compatibility with RH 7. 

FYI, the initial version of my binaries were built on CentOS 6, for the same reasons, compatibility wit RHE 6. I'm glad I got rid of CentOS 6, since it was a real pain in the rear.

> By the way, have you tried to build TeXLive by yourself? The build
> is not complicated, especially if you --disable-native-texlive-build
> (check the wrap-up [0], the SVN READMEs [1] and/or CI workflow files
> [2]). It takes less than an hour on modern RPi/SBC hardware.

Yes, that's a good suggestion; I'll consider it for the future releases of my build environment.

> The contextgarden binaries, like kindly suggested by Michal, are a
> viable option for the moment.

The contextgarden binaries, if built for Debian 10 (GLIBC 2.28), will not run on Ubuntu 16.

---

So, as a conclusion, it would be great to provide Arm binaries based on a bit older platforms (similarly to Intel binaries).

If that is not possible, that's it.

For now I'll probably continue to use TL 2018. If, at a later moment, maintaining the TL binaries in my build environment (which is a free open-source project) will become too expensive, I'll simply drop support for building the embedded manuals. :-(


Thank you,

Liviu




From lahcim8 at gmail.com  Fri Sep 24 19:28:03 2021
From: lahcim8 at gmail.com (=?utf-8?q?Michal_Vlas=C3=A1k?=)
Date: Fri, 24 Sep 2021 19:28:03 +0200
Subject: The Arm Linux binaries are incompatible with older systems
In-Reply-To: <2195394C-DD0B-41AA-867F-241C84667187@livius.net>
Message-ID: <CEIAJIFCUX11.1BZ76VOS3E3RA@phobos>

On Fri Sep 24, 2021 at 6:08 PM CEST, Liviu Ionescu wrote:
> > The contextgarden binaries, like kindly suggested by Michal, are a
> > viable option for the moment.
>
> The contextgarden binaries, if built for Debian 10 (GLIBC 2.28), will
> not run on Ubuntu 16.

My apologies to everyone. I confused the glibc version numbers. Indeed
the binaries from ConTeXt garden are not useful in this case. And I don't
think that the build machine there will / should downgrade.

Sorry.


On Fri Sep 24, 2021 at 11:52 AM CEST, Liviu Ionescu wrote:
> You mean that building the binaries on an older GLIBC will not use
> this feature, because this system call was added in 2.28?

There are more things at play here, but essentially yes.

Michal Vlas?k


From karl at freefriends.org  Sat Sep 25 00:51:37 2021
From: karl at freefriends.org (Karl Berry)
Date: Fri, 24 Sep 2021 16:51:37 -0600
Subject: The Arm Linux binaries are incompatible with older systems
In-Reply-To: <2195394C-DD0B-41AA-867F-241C84667187@livius.net>
Message-ID: <202109242251.18OMpbfm006646@freefriends.org>

1. GNU manuals should not (and usually do not) even require the latest
version of Texinfo, let alone the latest version of TeX.

2. In practice, Texinfo does not need (or make use of) any new version
of TeX. I believe any version of TeX going back, oh, a decade or two
would suffice for most Texinfo manuals.

3. Nelson Beebe provides binaries for a great many platforms, including
arm.  I don't know the version. See
  http://ftp.math.utah.edu/pub/texlive-utah-2021/
the binaries are at
  http://ftp.math.utah.edu/pub/texlive-utah-2021/bin/armhf-linux.tar.xz
  http://ftp.math.utah.edu/pub/texlive-utah-2021/bin/armv7l-archlinux.tar.xz

4. I use CentOS 7 myself. I built the distributed x86-linux binaries
there for many years. Then ICU, in its wisdom, started requiring new
"features" of C++ than were supported. I did not want to distribute
binaries built with my own gcc (I've done it in the past), so had to
give up. 

5. In principle, we want to distribute binaries built on the oldest
"feasible" system, whatever that might mean in a given case. It comes
down to what systems are available to the volunteers who provide the
binaries, and how much time they have to finagle all the necessary
dependencies.

6. Building a cut-down set of binaries yourself seems like the best
approach. I suppose you want to provide pdfs. In which case all you need
is pdftex and the (relatively tiny) support files to build the plain
format.

Happy TeXing,
Karl

From ilg at livius.net  Sat Sep 25 01:23:10 2021
From: ilg at livius.net (Liviu Ionescu)
Date: Sat, 25 Sep 2021 02:23:10 +0300
Subject: The Arm Linux binaries are incompatible with older systems
In-Reply-To: <202109242251.18OMpbfm006646@freefriends.org>
References: <2195394C-DD0B-41AA-867F-241C84667187@livius.net>
 <202109242251.18OMpbfm006646@freefriends.org>
Message-ID: <CAG7hfcLLPxFF=7eHMEb743iMFWvvQRtgDjy8Xwi9MyWPsW9kvA@mail.gmail.com>

On Sat, 25 Sep 2021 at 01:51, Karl Berry <karl at freefriends.org> wrote:

> 1 - 6
> ...
> Happy TeXing,
> Karl


Thank you, Karl, for the detailed explanation. Sounds reasonable.

I understand that TL 2018 should be more than enough for the GCC manuals,
so I'll stick to it for the Linux build boxes I have.

In 2022 I'll bump all Linux build box to Ubuntu 16. If at that moment the
latest TL binaries will run on it, fine. Otherwise I'll check if the U16
distribution binaries are usable for the GCC manuals; if so, I'll ditch the
separate TL install.

Thank you,

Liviu




-- 
Sent from my iPad via Gmail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210925/1e14ea7e/attachment.html>

From henri at henrimenke.de  Sat Sep 25 09:50:03 2021
From: henri at henrimenke.de (Henri Menke)
Date: Sat, 25 Sep 2021 09:50:03 +0200
Subject: The Arm Linux binaries are incompatible with older systems
In-Reply-To: <202109242251.18OMpbfm006646@freefriends.org>
References: <202109242251.18OMpbfm006646@freefriends.org>
Message-ID: <2f9ae859db32fb3056cbe9373ab5404464dcca6d.camel@henrimenke.de>

On Fri, 2021-09-24 at 16:51 -0600, Karl Berry wrote:
> 1. GNU manuals should not (and usually do not) even require the
> latest
> version of Texinfo, let alone the latest version of TeX.
> 
> 2. In practice, Texinfo does not need (or make use of) any new
> version
> of TeX. I believe any version of TeX going back, oh, a decade or two
> would suffice for most Texinfo manuals.
> 
> 3. Nelson Beebe provides binaries for a great many platforms,
> including
> arm.? I don't know the version. See
> ? http://ftp.math.utah.edu/pub/texlive-utah-2021/
> the binaries are at
> ?
> http://ftp.math.utah.edu/pub/texlive-utah-2021/bin/armhf-linux.tar.xz
> ?
> http://ftp.math.utah.edu/pub/texlive-utah-2021/bin/armv7l-archlinux.tar.xz
> 
> 4. I use CentOS 7 myself. I built the distributed x86-linux binaries
> there for many years. Then ICU, in its wisdom, started requiring new
> "features" of C++ than were supported. I did not want to distribute
> binaries built with my own gcc (I've done it in the past), so had to
> give up. 
> 
> 5. In principle, we want to distribute binaries built on the oldest
> "feasible" system, whatever that might mean in a given case. It comes
> down to what systems are available to the volunteers who provide the
> binaries, and how much time they have to finagle all the necessary
> dependencies.

I don't know what's the situation for musl on ARM, but in principle we
could just statically link the entire libc for musl builds and
distribute fully self-contained binaries that way.

Cheers, Henri

> 6. Building a cut-down set of binaries yourself seems like the best
> approach. I suppose you want to provide pdfs. In which case all you
> need
> is pdftex and the (relatively tiny) support files to build the plain
> format.
> 
> Happy TeXing,
> Karl



From dsge94 at gmail.com  Sat Sep 25 13:18:29 2021
From: dsge94 at gmail.com (Devon Ge)
Date: Sat, 25 Sep 2021 19:18:29 +0800
Subject: tlmgr failed due to a system reboot
Message-ID: <CAHu0-jOMnDLmXvqL-3HxRyx7fjRw1qNBwcvrj6bmVzAvShFrKQ@mail.gmail.com>

Hi,
   Just now I used `tlmgr update --all` to update my packages. During the
updating process, my PC got a blue screen (Yes, Windows 10
operating system) and rebooted itself. Now I type "tlmgr update --all" and
it failed.
Here is the error message:

> First directive needs to be 'name', not  at
> C:/texlive/2021/tlpkg/TeXLive/TLPOBJ.pm line 104, <TMP> line 1.


[image: image.png]
 Is it possible to fix this? or do I need to re-installed the iso file?
 Thanks!

Devon G
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210925/7d5677af/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 20122 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20210925/7d5677af/attachment-0001.png>

From P.Taylor at Hellenic-Institute.Uk  Sat Sep 25 14:50:56 2021
From: P.Taylor at Hellenic-Institute.Uk (Philip Taylor)
Date: Sat, 25 Sep 2021 13:50:56 +0100
Subject: tlmgr failed due to a system reboot
In-Reply-To: <CAHu0-jOMnDLmXvqL-3HxRyx7fjRw1qNBwcvrj6bmVzAvShFrKQ@mail.gmail.com>
References: <CAHu0-jOMnDLmXvqL-3HxRyx7fjRw1qNBwcvrj6bmVzAvShFrKQ@mail.gmail.com>
Message-ID: <3f3853e3-7378-27b5-f197-68ac726fb243@Hellenic-Institute.Uk>

Devon Ge wrote:

> ?? Just now I used `tlmgr update --all` to update my packages. During 
> the updating process, my PC got a blue screen (Yes, Windows 10 
> operating?system) and rebooted itself. Now I type "tlmgr update --all" 
> and it failed.
> Here is the error message: First directive needs to be 'name', not ?at 
> C:/texlive/2021/tlpkg/TeXLive/TLPOBJ.pm line 104, <TMP> line 1.
> ?Is it possible to fix this? or do I need to re-installed the iso file?

I suspect that it has left a temporary file which is confusing it. I 
don't have a Windows 10 system (thank G0d) but I do have a Windows 
Server 2019 system which shares much of the same codebase.? I find on my 
WS-2019 system that if I launch a CMD prompt and then type "Set" 
(without the string quotes), it offers a list of all known environment 
variables.? Two of mine are TEMP and TMP, both of which expand to

    C:\Users\<redacted>~1\AppData\Local\Temp\1

If I were you, I would look in wherever TEMP and/or TMP expand to for 
files created today, and delete any/all that might be TeX-Live related.? 
It would almost certainly do no harm to empty the director{y|ies} 
completely, since you won't be allowed to delete any files that are 
currently open.? Then try again.
-- 
/Philip Taylor/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210925/b7ac9bc0/attachment.html>

From lahcim8 at gmail.com  Sat Sep 25 15:31:45 2021
From: lahcim8 at gmail.com (=?utf-8?q?Michal_Vlas=C3=A1k?=)
Date: Sat, 25 Sep 2021 15:31:45 +0200
Subject: The Arm Linux binaries are incompatible with older systems
In-Reply-To: <2f9ae859db32fb3056cbe9373ab5404464dcca6d.camel@henrimenke.de>
Message-ID: <CEJ054WUKWKX.2TI57T9ZQU0ND@phobos>

On Sat Sep 25, 2021 at 9:50 AM CEST, Henri Menke via tex-live wrote:
> On Fri, 2021-09-24 at 16:51 -0600, Karl Berry wrote:
> > 5. In principle, we want to distribute binaries built on the oldest
> > "feasible" system, whatever that might mean in a given case. It comes
> > down to what systems are available to the volunteers who provide the
> > binaries, and how much time they have to finagle all the necessary
> > dependencies.
>
> I don't know what's the situation for musl on ARM, but in principle we
> could just statically link the entire libc for musl builds and
> distribute fully self-contained binaries that way.

While I agree generally, statically linking Lua(TeX), means losing the
support for loading C modules, which requires a dynamic linker. And IIRC
networking (with luasocket in LuaTeX) also depends on dynamic libraries
(NSS) in normal glibc systems -- i.e. the statically linked musl binaries
would not respect the system settings.

I think that the only use of C modules in TeX Live itself is in PGF/TikZ
(although this still must be set up manually by the user?).

But there are users that use modules outside of TeX Live as well. E.g.
https://tug.org/pipermail/luatex/2021-March/007494.html.

Michal Vlas?k


From Jim.Diamond at acadiau.ca  Sat Sep 25 17:43:01 2021
From: Jim.Diamond at acadiau.ca (Jim Diamond)
Date: Sat, 25 Sep 2021 12:43:01 -0300
Subject: tlmgr --self
Message-ID: <20210925154301.GC30635@zsdhome.ddns.net>

Hi,

every now and then when I just type
        tlmgr update --all
instead of
        tlmgr update --all --self
I get the standard whinage
        tlmgr itself needs to be updated.

Q: why is --self not the default?  Are there any/many situations where
you would not want the self-update to happen?

Thanks.

                                Jim

From karl at freefriends.org  Sat Sep 25 23:46:31 2021
From: karl at freefriends.org (Karl Berry)
Date: Sat, 25 Sep 2021 15:46:31 -0600
Subject: tlmgr --self
In-Reply-To: <20210925154301.GC30635@zsdhome.ddns.net>
Message-ID: <202109252146.18PLkVIk011688@freefriends.org>

Hi Jim,

    Q: why is --self not the default?  Are there any/many situations where
    you would not want the self-update to happen?

I don't know of any specific situation where you wouldn't want to do
--self, if you're doing daily updates anyway. But I guess we felt it was
better for the user to explicitly specify this, i.e., to be able to
postpone it if timing was bad for an infrastructure update.

What I do myself is, essentially,
repo="--repository ctan"  # or whatever
tlmgr $repo update --self && tlmgr $repo update --all

since I want to know soonest if an update breaks something :). --best, karl.

From karl at freefriends.org  Sun Sep 26 00:02:11 2021
From: karl at freefriends.org (Karl Berry)
Date: Sat, 25 Sep 2021 16:02:11 -0600
Subject: tlmgr failed due to a system reboot
In-Reply-To: <CAHu0-jOMnDLmXvqL-3HxRyx7fjRw1qNBwcvrj6bmVzAvShFrKQ@mail.gmail.com>
Message-ID: <202109252202.18PM2Bhj014206@freefriends.org>

    Here is the error message:

    > First directive needs to be 'name', not  at
    > C:/texlive/2021/tlpkg/TeXLive/TLPOBJ.pm line 104, <TMP> line 1.

Looks like your c:/texlive/2021/tlpkg/texlive.tlpdb file, or the sibling
texlive.tlpdb.main.<string>, got clobbered by the reboot. Check the file
length/contents? If it's empty/junk, the only reliable recovery will be
to reinstall. Unless I'm forgetting something. Sorry. --best, karl.

From zdenek.wagner at gmail.com  Sun Sep 26 09:49:56 2021
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sun, 26 Sep 2021 09:49:56 +0200
Subject: tlmgr --self
In-Reply-To: <202109252146.18PLkVIk011688@freefriends.org>
References: <20210925154301.GC30635@zsdhome.ddns.net>
 <202109252146.18PLkVIk011688@freefriends.org>
Message-ID: <CAC1phyYcMyUhjBnm1ZMSN3xu6_D9CLNop5n9fUFydi=8Q6MyHQ@mail.gmail.com>

so 25. 9. 2021 v 23:46 odes?latel Karl Berry <karl at freefriends.org> napsal:
>
> Hi Jim,
>
>     Q: why is --self not the default?  Are there any/many situations where
>     you would not want the self-update to happen?
>
> I don't know of any specific situation where you wouldn't want to do
> --self, if you're doing daily updates anyway. But I guess we felt it was
> better for the user to explicitly specify this, i.e., to be able to
> postpone it if timing was bad for an infrastructure update.
>
> What I do myself is, essentially,
> repo="--repository ctan"  # or whatever
> tlmgr $repo update --self && tlmgr $repo update --all
>
> since I want to know soonest if an update breaks something :). --best, karl.

If I remember it well, tlmgr --self --all does not work on Windows due
to file locking, it is necessary to use tlmgr --self followed by tlmgr
--all. But maybe the problem has already been solved somehow, I am not
sure.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml


From herbs at wideopenwest.com  Sun Sep 26 15:11:02 2021
From: herbs at wideopenwest.com (Herbert Schulz)
Date: Sun, 26 Sep 2021 08:11:02 -0500
Subject: pstricks & xelatex
Message-ID: <8CEA771D-C5BF-455A-BF87-5F9BD3BCA1B0@wideopenwest.com>

Howdy,

It appears that simple pstricks figures are failing in xelatex again. I'm using the command line

xelatex --shell-escape --synctex=1 -file-line-error -output-driver="xdvipdfmx -q -E" file.tex

for processing.

Good Luck,

Herb Schulz
herbs at wideopenwest.com




From Herbert.Voss at fu-berlin.de  Sun Sep 26 15:58:40 2021
From: Herbert.Voss at fu-berlin.de (Herbert Voss)
Date: Sun, 26 Sep 2021 15:58:40 +0200
Subject: pstricks & xelatex
In-Reply-To: <8CEA771D-C5BF-455A-BF87-5F9BD3BCA1B0@wideopenwest.com>
References: <8CEA771D-C5BF-455A-BF87-5F9BD3BCA1B0@wideopenwest.com>
Message-ID: <0e8bcd1a-5dbe-5fd1-dfd2-599b89db9be0@fu-berlin.de>



Am 26.09.21 um 15:11 schrieb Herbert Schulz:
> Howdy,
>
> It appears that simple pstricks figures are failing in xelatex again. I'm using the command line
>
> xelatex --shell-escape --synctex=1 -file-line-error -output-driver="xdvipdfmx -q -E" file.tex
>
> for processing.

I have no problem with the following example. But the first one is 
printed and the second one not,
which seems to be a problem with the code.

Herbert


\documentclass[10pt]{article}
\usepackage{pstricks,pst-jtree,pst-node}
\listfiles

\begin{document}
\jtree
\! = <left>{A}!a ^<right>{B}.
\!a = <left>{C}!a ^<right>{D}.
\!a = <left>{E} ^<right>{F}.
\endjtree


\jtree[xunit=2.8em,yunit=1em]
! = {ST}
:{SN} {T'} .
\endjtree

\end{document}


From norbert at preining.info  Sun Sep 26 16:28:34 2021
From: norbert at preining.info (Norbert Preining)
Date: Sun, 26 Sep 2021 23:28:34 +0900
Subject: tlmgr failed due to a system reboot
In-Reply-To: <202109252202.18PM2Bhj014206@freefriends.org>
References: <CAHu0-jOMnDLmXvqL-3HxRyx7fjRw1qNBwcvrj6bmVzAvShFrKQ@mail.gmail.com>
 <202109252202.18PM2Bhj014206@freefriends.org>
Message-ID: <YVCDklnOsyohwoD2@bulldog.preining.info>

On Sat, 25 Sep 2021, Karl Berry wrote:
> texlive.tlpdb.main.<string>, got clobbered by the reboot. Check the file
> length/contents? If it's empty/junk, the only reliable recovery will be
> to reinstall. Unless I'm forgetting something. Sorry. --best, karl.

Karl is correct, but just in case there is also the option to recreate
the tlpdb from the tlpobj files which are saved into
	ROOT/tlpkg/tlpobj/
You can all
	tlmgr recreate-tlpdb
This MIGHT help and should be the last resort, and something might get
lost, but you can get a halfway working tlpdb back.

Then you can run
	tlmgr update --self
	tlmgr update --all

And after that a 
	tlmgr check
might be good idea I guess.

Best

Norbert

--
PREINING Norbert                              https://www.preining.info
Fujitsu Research  +  IFMGA Guide  +  TU Wien  +  TeX Live  + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From dsge94 at gmail.com  Sun Sep 26 17:08:06 2021
From: dsge94 at gmail.com (Devon Ge)
Date: Sun, 26 Sep 2021 23:08:06 +0800
Subject: tlmgr failed due to a system reboot
In-Reply-To: <YVCDklnOsyohwoD2@bulldog.preining.info>
References: <CAHu0-jOMnDLmXvqL-3HxRyx7fjRw1qNBwcvrj6bmVzAvShFrKQ@mail.gmail.com>
 <202109252202.18PM2Bhj014206@freefriends.org>
 <YVCDklnOsyohwoD2@bulldog.preining.info>
Message-ID: <CAHu0-jPEW5q8bPH3L60RTugeHzsGRadijRDE83aPNTvOVnf5+g@mail.gmail.com>

the tlpdb file contents are (partly) missing. I re-install it.

Heavens, a reinstall saved the day!

Thank you all!

Devon G

Norbert Preining <norbert at preining.info> ?2021?9?26??? ??10:28???

> On Sat, 25 Sep 2021, Karl Berry wrote:
> > texlive.tlpdb.main.<string>, got clobbered by the reboot. Check the file
> > length/contents? If it's empty/junk, the only reliable recovery will be
> > to reinstall. Unless I'm forgetting something. Sorry. --best, karl.
>
> Karl is correct, but just in case there is also the option to recreate
> the tlpdb from the tlpobj files which are saved into
>         ROOT/tlpkg/tlpobj/
> You can all
>         tlmgr recreate-tlpdb
> This MIGHT help and should be the last resort, and something might get
> lost, but you can get a halfway working tlpdb back.
>
> Then you can run
>         tlmgr update --self
>         tlmgr update --all
>
> And after that a
>         tlmgr check
> might be good idea I guess.
>
> Best
>
> Norbert
>
> --
> PREINING Norbert                              https://www.preining.info
> Fujitsu Research  +  IFMGA Guide  +  TU Wien  +  TeX Live  + Debian Dev
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210926/0bb45e47/attachment.html>

From Jim.Diamond at acadiau.ca  Sun Sep 26 17:19:01 2021
From: Jim.Diamond at acadiau.ca (Jim Diamond)
Date: Sun, 26 Sep 2021 12:19:01 -0300
Subject: tlmgr --self
In-Reply-To: <CAC1phyYcMyUhjBnm1ZMSN3xu6_D9CLNop5n9fUFydi=8Q6MyHQ@mail.gmail.com>
 <202109252146.18PLkVIk011688@freefriends.org>
Message-ID: <20210926151901.GB9395@zsdhome.ddns.net>

Hi Karl and Zden?k,

thanks for your answers.  I'm not sure they are quite as enlightening
as I hoped, but since they both make sense, I guess it is all good.

Karl, assuming you are using Unix or Linux, does
        tlmgr $repo update --self --all
not work for you?  (In the interest of shorter command lines?)
I just tried it, and there is no "--self" update available for me, but
it did update 5 packages for me.

Cheers.
                                Jim

On Sat, Sep 25, 2021 at 15:46 (-0600), Karl Berry wrote:

> Hi Jim,

>> Q: why is --self not the default?  Are there any/many situations where
>> you would not want the self-update to happen?

> I don't know of any specific situation where you wouldn't want to do
> --self, if you're doing daily updates anyway. But I guess we felt it was
> better for the user to explicitly specify this, i.e., to be able to
> postpone it if timing was bad for an infrastructure update.

> What I do myself is, essentially,
> repo="--repository ctan"  # or whatever
> tlmgr $repo update --self && tlmgr $repo update --all

> since I want to know soonest if an update breaks something :). --best, karl.

On Sun, Sep 26, 2021 at 09:49 (+0200), Zdenek Wagner wrote:

> CAUTION: This email comes from outside Acadia. Verify the sender and use caution with any requests, links or attachments.

> so 25. 9. 2021 v 23:46 odes?latel Karl Berry <karl at freefriends.org> napsal:

>> Hi Jim,

>>> Q: why is --self not the default?  Are there any/many situations where
>>> you would not want the self-update to happen?

>> I don't know of any specific situation where you wouldn't want to do
>> --self, if you're doing daily updates anyway. But I guess we felt it was
>> better for the user to explicitly specify this, i.e., to be able to
>> postpone it if timing was bad for an infrastructure update.

>> What I do myself is, essentially,
>> repo="--repository ctan"  # or whatever
>> tlmgr $repo update --self && tlmgr $repo update --all

>> since I want to know soonest if an update breaks something :). --best, karl.

> If I remember it well, tlmgr --self --all does not work on Windows due
> to file locking, it is necessary to use tlmgr --self followed by tlmgr
> --all. But maybe the problem has already been solved somehow, I am not
> sure.

> Zden?k Wagner
> http://ttsm.icpf.cas.cz/team/wagner.shtml


From karl at freefriends.org  Sun Sep 26 23:37:48 2021
From: karl at freefriends.org (Karl Berry)
Date: Sun, 26 Sep 2021 15:37:48 -0600
Subject: pstricks & xelatex
In-Reply-To: <8CEA771D-C5BF-455A-BF87-5F9BD3BCA1B0@wideopenwest.com>
Message-ID: <202109262137.18QLbm8W030133@freefriends.org>

    It appears that simple pstricks figures are failing in xelatex again.

Possibly it's because I failed to update all the pst-* packages uploaded
recently. Sorry about that. Please try again after tonight's update. -k


From karl at freefriends.org  Sun Sep 26 23:37:50 2021
From: karl at freefriends.org (Karl Berry)
Date: Sun, 26 Sep 2021 15:37:50 -0600
Subject: tlmgr --self
In-Reply-To: <20210926151901.GB9395@zsdhome.ddns.net>
Message-ID: <202109262137.18QLboUQ030149@freefriends.org>

            tlmgr $repo update --self --all
    not work for you?

 It works. I guess I was just being extra-cautious that the --self
 succeeded before doing the --all :). --happy updating, karl.
 

From herbs at wideopenwest.com  Mon Sep 27 14:27:59 2021
From: herbs at wideopenwest.com (Herbert Schulz)
Date: Mon, 27 Sep 2021 07:27:59 -0500
Subject: pstricks & xelatex
In-Reply-To: <202109262137.18QLbm8W030133@freefriends.org>
References: <202109262137.18QLbm8W030133@freefriends.org>
Message-ID: <AF42008B-4C75-4F58-9DF3-B1F2FFBFF7BA@wideopenwest.com>



> On Sep 26, 2021, at 4:37 PM, Karl Berry <karl at freefriends.org> wrote:
> 
>    It appears that simple pstricks figures are failing in xelatex again.
> 
> Possibly it's because I failed to update all the pst-* packages uploaded
> recently. Sorry about that. Please try again after tonight's update. -k
> 

Howdy,

Those files were updated today bit there still is a problem. For the file.tex I gave before along with the command stated there I'm getting

Error: /typecheck in --restore--
Operand stack:
   --dict:13/22(ro)(L)--   --dict:13/22(ro)(L)--
Execution stack:
   %interp_exit   .runexec2   --nostringval--   restore   --nostringval--   2   %stopped_push   --nostringval--   restore   restore   false   1   %stopped_push   1974   1   3   %oparray_pop   1973   1   3   %oparray_pop   1961   1   3   %oparray_pop   1817   1   3   %oparray_pop   --nostringval--   %errorexec_pop   .runexec2   --nostringval--   restore   --nostringval--   2   %stopped_push   --nostringval--   1878   1   3   %oparray_pop   restore   1859   1   3   %oparray_pop   restore
Dictionary stack:
   --dict:763/1123(ro)(G)--   --dict:0/20(G)--   --dict:121/200(L)--
Current allocation mode is local
Current file position is 685
GPL Ghostscript 9.54.0: Unrecoverable error, exit code 1
)

and it used to run fine before.

Good Luck,

Herb Schulz
herbs at wideopenwest.com




From daleif at math.au.dk  Mon Sep 27 15:48:53 2021
From: daleif at math.au.dk (Lars Madsen)
Date: Mon, 27 Sep 2021 13:48:53 +0000
Subject: pstricks & xelatex
In-Reply-To: <AF42008B-4C75-4F58-9DF3-B1F2FFBFF7BA@wideopenwest.com>
References: <202109262137.18QLbm8W030133@freefriends.org>
 <AF42008B-4C75-4F58-9DF3-B1F2FFBFF7BA@wideopenwest.com>
Message-ID: <AM0PR01MB542580985FA3CD0104E449C4F2A79@AM0PR01MB5425.eurprd01.prod.exchangelabs.com>

When I run Voss' example though the long command that Herb listed I also get a lot of gs errors, here running

gs -v
GPL Ghostscript 9.26 (2018-11-20)

lualatex runs fine

Lars Madsen
Programm?r

Institut for Matematik
Aarhus Universitet

person.au.dk/daleif at math<https://person.au.dk/daleif at math>

________________________________
From: tex-live <tex-live-bounces+daleif=imf.au.dk at tug.org> on behalf of Herbert Schulz <herbs at wideopenwest.com>
Sent: 27 September 2021 14:27
To: Karl Berry <karl at freefriends.org>
Cc: tex-live at tug.org <tex-live at tug.org>
Subject: Re: pstricks & xelatex



> On Sep 26, 2021, at 4:37 PM, Karl Berry <karl at freefriends.org> wrote:
>
>    It appears that simple pstricks figures are failing in xelatex again.
>
> Possibly it's because I failed to update all the pst-* packages uploaded
> recently. Sorry about that. Please try again after tonight's update. -k
>

Howdy,

Those files were updated today bit there still is a problem. For the file.tex I gave before along with the command stated there I'm getting

Error: /typecheck in --restore--
Operand stack:
   --dict:13/22(ro)(L)--   --dict:13/22(ro)(L)--
Execution stack:
   %interp_exit   .runexec2   --nostringval--   restore   --nostringval--   2   %stopped_push   --nostringval--   restore   restore   false   1   %stopped_push   1974   1   3   %oparray_pop   1973   1   3   %oparray_pop   1961   1   3   %oparray_pop   1817   1   3   %oparray_pop   --nostringval--   %errorexec_pop   .runexec2   --nostringval--   restore   --nostringval--   2   %stopped_push   --nostringval--   1878   1   3   %oparray_pop   restore   1859   1   3   %oparray_pop   restore
Dictionary stack:
   --dict:763/1123(ro)(G)--   --dict:0/20(G)--   --dict:121/200(L)--
Current allocation mode is local
Current file position is 685
GPL Ghostscript 9.54.0: Unrecoverable error, exit code 1
)

and it used to run fine before.

Good Luck,

Herb Schulz
herbs at wideopenwest.com



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210927/33a15f22/attachment.html>

From Herbert.Voss at fu-berlin.de  Mon Sep 27 15:55:54 2021
From: Herbert.Voss at fu-berlin.de (Herbert Voss)
Date: Mon, 27 Sep 2021 15:55:54 +0200
Subject: pstricks & xelatex
In-Reply-To: <AF42008B-4C75-4F58-9DF3-B1F2FFBFF7BA@wideopenwest.com>
References: <202109262137.18QLbm8W030133@freefriends.org>
 <AF42008B-4C75-4F58-9DF3-B1F2FFBFF7BA@wideopenwest.com>
Message-ID: <5a095203-3624-bffe-0a98-70ab17a9add4@fu-berlin.de>



Am 27.09.21 um 14:27 schrieb Herbert Schulz:
>
>> On Sep 26, 2021, at 4:37 PM, Karl Berry <karl at freefriends.org> wrote:
>>
>>     It appears that simple pstricks figures are failing in xelatex again.
>>
>> Possibly it's because I failed to update all the pst-* packages uploaded
>> recently. Sorry about that. Please try again after tonight's update. -k
>>
> Howdy,
>
> Those files were updated today bit there still is a problem. For the file.tex I gave before along with the command stated there I'm getting
>
> Error: /typecheck in --restore--
> Operand stack:
>     --dict:13/22(ro)(L)--   --dict:13/22(ro)(L)--
> Execution stack:
>     %interp_exit   .runexec2   --nostringval--   restore   --nostringval--   2   %stopped_push   --nostringval--   restore   restore   false   1   %stopped_push   1974   1   3   %oparray_pop   1973   1   3   %oparray_pop   1961   1   3   %oparray_pop   1817   1   3   %oparray_pop   --nostringval--   %errorexec_pop   .runexec2   --nostringval--   restore   --nostringval--   2   %stopped_push   --nostringval--   1878   1   3   %oparray_pop   restore   1859   1   3   %oparray_pop   restore
> Dictionary stack:
>     --dict:763/1123(ro)(G)--   --dict:0/20(G)--   --dict:121/200(L)--
> Current allocation mode is local
> Current file position is 685
> GPL Ghostscript 9.54.0: Unrecoverable error, exit code 1
> )
>
> and it used to run fine before.

Just updated macTeX and

xelatex --shell-escape --synctex=1 -file-line-error 
-output-driver="xdvipdfmx -i dvipdfmx-unsafe.cfg -q -E" test01.tex

runs without any problem in a terminal.

Herbert


From usenet at siart.de  Wed Sep 29 06:56:07 2021
From: usenet at siart.de (Uwe Siart)
Date: Wed, 29 Sep 2021 06:56:07 +0200
Subject: Ghostscript comes with old gs_init.ps
Message-ID: <86o88cask8.fsf@siart.de>

After today's update, ps2pdf fails with:

gs: Interpreter revision (9550) does not match gs_init.ps revision (9540).

-- 
Uwe


From news3 at nililand.de  Wed Sep 29 09:07:16 2021
From: news3 at nililand.de (Ulrike Fischer)
Date: Wed, 29 Sep 2021 09:07:16 +0200
Subject: Ghostscript comes with old gs_init.ps
References: <86o88cask8.fsf@siart.de>
Message-ID: <1f50vl13b658$.dlg@nililand.de>

Am Wed, 29 Sep 2021 06:56:07 +0200 schrieb Uwe Siart:

> After today's update, ps2pdf fails with:
> 
> gs: Interpreter revision (9550) does not match gs_init.ps revision (9540).

I didn't check yet, but I typically get this error if the versions
of the texlive ghostscript and my external ghostscript don't match.
I then have to update the external ghostscript too.
(I haven't yet found out why they interfere)

-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From usenet at siart.de  Wed Sep 29 09:43:08 2021
From: usenet at siart.de (Uwe Siart)
Date: Wed, 29 Sep 2021 09:43:08 +0200
Subject: Ghostscript comes with old gs_init.ps
References: <86o88cask8.fsf@siart.de> <1f50vl13b658$.dlg@nililand.de>
Message-ID: <867dez3jzn.fsf@siart.de>

Ulrike Fischer <news3 at nililand.de> writes:

> Am Wed, 29 Sep 2021 06:56:07 +0200 schrieb Uwe Siart:
>
>> After today's update, ps2pdf fails with:
>> 
>> gs: Interpreter revision (9550) does not match gs_init.ps revision (9540).
>
> I didn't check yet, but I typically get this error if the versions
> of the texlive ghostscript and my external ghostscript don't match.
> I then have to update the external ghostscript too.
> (I haven't yet found out why they interfere)

I think I can rule this out. My external Ghostscript is not 9.54.0 but
9.55.0. For testing TeXLive is explicitely shifted my external gs behind
TeXLive on PATH. When I move TeXLive behind my local gs everything works
fine.

-- 
Uwe


From news3 at nililand.de  Wed Sep 29 13:58:47 2021
From: news3 at nililand.de (Ulrike Fischer)
Date: Wed, 29 Sep 2021 13:58:47 +0200
Subject: Ghostscript comes with old gs_init.ps
References: <86o88cask8.fsf@siart.de> <1f50vl13b658$.dlg@nililand.de>
 <867dez3jzn.fsf@siart.de>
Message-ID: <1wcnmnuagxd6e$.dlg@nililand.de>

Am Wed, 29 Sep 2021 09:43:08 +0200 schrieb Uwe Siart:


>>> After today's update, ps2pdf fails with:
>>> 
>>> gs: Interpreter revision (9550) does not match gs_init.ps revision (9540).
>>
>> I didn't check yet, but I typically get this error if the versions
>> of the texlive ghostscript and my external ghostscript don't match.
>> I then have to update the external ghostscript too.
>> (I haven't yet found out why they interfere)
> 
> I think I can rule this out.

Yes, the texlive version seems to be wrong. At least on windows the
exe has version 9.55 but the gs_init.ps says 9540

I reverted today update from tlgs.win32 and it seems to work ok now. 


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From jfine2358 at gmail.com  Wed Sep 29 21:27:42 2021
From: jfine2358 at gmail.com (Jonathan Fine)
Date: Wed, 29 Sep 2021 20:27:42 +0100
Subject: No TeX Hour tomorrow (Thursday 30 September)
In-Reply-To: <CALD=Yf8ZUC2Dxfz0u-=ecsdk+_MOTmt=7qm3GDV8DHduj0M-QA@mail.gmail.com>
References: <CALD=Yf8w7No3WDd_-uFwi5NxzxLVZ9Utq3haCaqHyu6SMWifGA@mail.gmail.com>
 <CALD=Yf8ZUC2Dxfz0u-=ecsdk+_MOTmt=7qm3GDV8DHduj0M-QA@mail.gmail.com>
Message-ID: <CALD=Yf_ZREpKz8xLE2dvR+EZWOSbKRD1nOATX06oRZddaN5tqQ@mail.gmail.com>

Hi

I'm on holiday and lack sufficient internet to host the TeX Hour. Apologies
and please come back next week.

best regards

Jonathan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/tex-live/attachments/20210929/d83f647e/attachment.html>

From reinhard.kotucha at web.de  Wed Sep 29 23:44:09 2021
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 29 Sep 2021 23:44:09 +0200
Subject: Ghostscript comes with old gs_init.ps
In-Reply-To: <86o88cask8.fsf@siart.de>
References: <86o88cask8.fsf@siart.de>
Message-ID: <24916.56873.367048.79265@gargle.gargle.HOWL>

On 2021-09-29 at 06:56:07 +0200, Uwe Siart wrote:

 > After today's update, ps2pdf fails with:
 >
 > gs: Interpreter revision (9550) does not match gs_init.ps revision (9540).

Hi Uwe,
this time the package was created after Akira committed his files and
before I uploaded my files.  Everything in the repository seems to be
ok.  Just update again tomorrow.

Regards,
  Reinhard

--
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From daniel.nachun at gmail.com  Thu Sep 30 02:31:58 2021
From: daniel.nachun at gmail.com (Daniel Nachun)
Date: Wed, 29 Sep 2021 17:31:58 -0700
Subject: Improvements to path resolution in tlmgr and other scripts using
 kpathsea
In-Reply-To: <YUlTVgalFEvEHApf@bulldog.preining.info>
References: <31D49F68-9A9B-40BF-9519-623DFC148857@gmail.com>
 <YUkyUz73h9wBctgY@bulldog.preining.info>
 <E3282FF2-2667-40B6-9F4A-BC0B0DFD4619@gmail.com>
 <YUlTVgalFEvEHApf@bulldog.preining.info>
Message-ID: <518417A4-A78E-4D3D-AC00-16B291D66759@gmail.com>

Hi Norbert,

I attached what I think is the right set of patches to change the usage of SELFAUTOPARENT to TEXMFROOT for the scripts which TeXLive itself maintains.  Please let me know if anything needs to be changed!

Daniel

?On 9/20/21, 20:36, "Norbert Preining" <norbert at preining.info> wrote:

    Hi Daniel,

    I just commented on the PR.

    > 1) Homebrew tries to avoid carrying patches ourselves as much as possible.  We do not have dedicated maintainers for specific packages so it's not efficient or easy for us to maintain patches.  For that reason we try to find solutions that require minimal patching, or try to upstream patches when possible.

    Ok, we can look into this.

    > 2) Every package exists in its own subdirectory in HOMEBREW_PREFIX/Cellar/PACKAGE_NAME/VERSION, so the root directory for TeXLive would be HOMEBREW_PREFIX/Cellar/texlive/58837.  Ideally we'd be able to treat HOMEBREW_PREFIX/Cellar/texlive/58837 like /usr/ is on Debian, though that does not work at the moment for the reasons mentioned in my previous email.

    Ah yeah, forgot about this. So you cannot hardcode the path indeed. then
    your proposed way to patch tlmgr would be fine, but I am not sure about
    how we could integrate this into the main code base without breaking.
    There would be the need for some automatic detection in tlmgr.

    > 3) We don't typically split packages up the way Debian and other distros do for some large packages like TeXLive or Qt.  This is done for ease of maintenance, in exchange for packages like TeXLive being larger.

    Makes it much easier to develop a Formula, definitely. 
    With only one TL package in Debian it would be rather simply to get
    everything going, and in particular no problem with config files.

    > It is most certainly possible to test our formula on Linux by using

    Well, I have linuxbrew installed (since I contribute on Formula for
    CafeOBJ), and will try if it works build the current TL formula using
    linuxbrew.

    Best

    Norbert

    --
    PREINING Norbert                              https://www.preining.info
    Fujitsu Research  +  IFMGA Guide  +  TU Wien  +  TeX Live  + Debian Dev
    GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

-------------- next part --------------
A non-text attachment was scrubbed...
Name: use_texmfroot.patch
Type: application/octet-stream
Size: 2253 bytes
Desc: not available
URL: <https://tug.org/pipermail/tex-live/attachments/20210929/3a39fbdf/attachment.obj>

From karl at freefriends.org  Thu Sep 30 23:40:27 2021
From: karl at freefriends.org (Karl Berry)
Date: Thu, 30 Sep 2021 15:40:27 -0600
Subject: Improvements to path resolution in tlmgr and other scripts using
 kpathsea
In-Reply-To: <518417A4-A78E-4D3D-AC00-16B291D66759@gmail.com>
Message-ID: <202109302140.18ULeR32013792@freefriends.org>

I trust you've actually tried these changes from SELFAUTOPARENT to
TEXMFROOT? They look ok to me, but SELFAUTOPARENT gets defined within
the kpsewhich/kpathsea code, while TEXMFROOT requires the texmf.cnf file.

Presumably you have kpsewhich set up in such a way that it can find
texmf.cnf (from its myriad builtin places to check), and then it should
all be fine, but ... something to be aware of. Sorry if already known.

At any rate, I don't think the changes will make any difference for native TL.
Norbert, feel free to apply when ready, or I can. --thanks, karl.

