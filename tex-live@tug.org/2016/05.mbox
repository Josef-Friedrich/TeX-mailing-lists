From kakuto at fuk.kindai.ac.jp  Sun May  1 01:23:52 2016
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Sun, 1 May 2016 08:23:52 +0900
Subject: [tex-live] Bug in pdflatex: doesn't compile file with 2
 adjacent spaces in the name
Message-ID: <BB38FC1A81AD489D802D0343B677C552@CJ3001517A>

Heiko gives an example to handle two adjacent spaces
in a file name in SX. In the case of cmd.exe in windows
"foo  bar.tex" can be compiled by
pdftex "\def\x#1{\input \"foo#1#1bar.tex\"}\x{ }"

Best,
Akira


From rod.yager at mq.edu.au  Sun May  1 05:21:13 2016
From: rod.yager at mq.edu.au (Rod Yager)
Date: Sun, 1 May 2016 03:21:13 +0000
Subject: [tex-live] MacTeX installer does not read updmap.cfg files in
 /usr/local/texlive/texmf-local/web2c when running updmap-sys
Message-ID: <2120020F-B4F7-4DC1-8ED9-97E9C0FF5638@mq.edu.au>

The unix texlive installer reads any updmap.cfg  in /usr/local/texlive/texmf-local/web2c when it runs.

Time used for installing the packages: 14:41
running mktexlsr /usr/local/texlive/2016/texmf-dist ...
writing fmtutil.cnf to /usr/local/texlive/2016/texmf-dist/web2c/fmtutil.cnf
writing updmap.cfg to /usr/local/texlive/2016/texmf-dist/web2c/updmap.cfg
writing language.dat to /usr/local/texlive/2016/texmf-var/tex/generic/config/language.dat
writing language.def to /usr/local/texlive/2016/texmf-var/tex/generic/config/language.def
writing language.dat.lua to /usr/local/texlive/2016/texmf-var/tex/generic/config/language.dat.lua
running mktexlsr /usr/local/texlive/2016/texmf-var /usr/local/texlive/2016/texmf-config /usr/local/texlive/2016/texmf-dist ...
running updmap-sys --nohash ...done
updmap [WARNING]: resetting $HOME value (was /Users/rodyager) to root's actual home (/var/root).
updmap will read the following updmap.cfg files (in precedence order):
  /usr/local/texlive/2016/texmf-config/web2c/updmap.cfg
  /usr/local/texlive/texmf-local/web2c/updmap.cfg
  /usr/local/texlive/2016/texmf-dist/web2c/updmap.cfg
updmap may write changes to the following updmap.cfg file:
  /usr/local/texlive/2016/texmf-config/web2c/updmap.cfg
dvips output dir: "/usr/local/texlive/2016/texmf-var/fonts/map/dvips/updmap"
pdftex output dir: "/usr/local/texlive/2016/texmf-var/fonts/map/pdftex/updmap"
dvipdfmx output dir: "/usr/local/texlive/2016/texmf-var/fonts/map/dvipdfmx/updmap"


However, the MacTeX installer does not:

Time used for installing the packages: 09:54
running mktexlsr /usr/local/texlive/2016/texmf-dist ...
writing fmtutil.cnf to /usr/local/texlive/2016/texmf-dist/web2c/fmtutil.cnf
writing updmap.cfg to /usr/local/texlive/2016/texmf-dist/web2c/updmap.cfg
writing language.dat to /usr/local/texlive/2016/texmf-var/tex/generic/config/language.dat
writing language.def to /usr/local/texlive/2016/texmf-var/tex/generic/config/language.def
writing language.dat.lua to /usr/local/texlive/2016/texmf-var/tex/generic/config/language.dat.lua
running mktexlsr /usr/local/texlive/2016/texmf-var /usr/local/texlive/2016/texmf-config /usr/local/texlive/2016/texmf-dist ...
running updmap-sys --nohash ...done
updmap [WARNING]: resetting $HOME value (was /Users/koch) to root's actual home (/var/root).
updmap will read the following updmap.cfg files (in precedence order):
  /usr/local/texlive/2016/texmf-dist/web2c/updmap.cfg
updmap may write changes to the following updmap.cfg file:
  /usr/local/texlive/2016/texmf-config/web2c/updmap.cfg
dvips output dir: "/usr/local/texlive/2016/texmf-var/fonts/map/dvips/updmap"
pdftex output dir: "/usr/local/texlive/2016/texmf-var/fonts/map/pdftex/updmap"
dvipdfmx output dir: "/usr/local/texlive/2016/texmf-var/fonts/map/dvipdfmx/updmap?



As a result, it is necessary to run updmap-sys after the MacTeX installer has finished to enable any additional maps configured in /usr/local/texlive/texmf-local/web2c/updmap.cfg

Rod





From P.Taylor at Rhul.Ac.Uk  Sun May  1 09:12:38 2016
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Sun, 1 May 2016 08:12:38 +0100
Subject: [tex-live] Bug in pdflatex: doesn't compile file with 2
 adjacent spaces in the name
In-Reply-To: <BB38FC1A81AD489D802D0343B677C552@CJ3001517A>
References: <BB38FC1A81AD489D802D0343B677C552@CJ3001517A>
Message-ID: <5725AC66.8050809@Rhul.Ac.Uk>



Akira Kakuto wrote:

> Heiko gives an example to handle two adjacent spaces
> in a file name in SX. In the case of cmd.exe in windows
> "foo  bar.tex" can be compiled by
> pdftex "\def\x#1{\input \"foo#1#1bar.tex\"}\x{ }"

I applaud the idea of using #1 to represent a non-elidable space, but
from the perspective of the reader the following may be simpler to
understand (i.e., more transparent) --

D:\>tex \input "a\space \space a.tex"
This is TeX, Version 3.14159265 (TeX Live 2014/W32TeX) (preloaded
format=tex)
(./a  a.tex )
No pages of output.
Transcript written on "a  a.log".

Philip Taylor

From usr345 at gmail.com  Sun May  1 09:22:25 2016
From: usr345 at gmail.com (Ivanov Dmitry)
Date: Sun, 1 May 2016 10:22:25 +0300
Subject: [tex-live] Bug in pdflatex: doesn't compile file with 2
 adjacent spaces in the name
In-Reply-To: <E948E2B77BC54C649BE19574C5DC6028@CJ3001517A>
References: <CAHyAE13KGueAdrtpcwpzAbSvMTrDJCUX0ba5KGCOU4JjGqpQYw@mail.gmail.com>
 <E948E2B77BC54C649BE19574C5DC6028@CJ3001517A>
Message-ID: <CAHyAE122NiPvJnqbCGX-k0O6k960kqPO1DUFC9NioXyTS5E4Aw@mail.gmail.com>

> TeX reduces consecutive spaces to one space token, but it will not
directly input files with a space in their name.
> You can use the quoting feature:
>    pdflatex "a\space\space a.tex"
> which, on my machine, works.

Doesn't work in MikTeX on Windows. What OS and TeX do you use?

Here is what I get:

$ pdflatex "a\space\space a.tex"
This is pdfTeX, Version 3.14159265-2.6-1.40.16 (MiKTeX 2.9)
entering extended mode
! I can't find file `a'.
\space ->

<*> a\space
           \space a.tex
Please type another input file name:
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/c5a54c53/attachment-0001.html>

From P.Taylor at Rhul.Ac.Uk  Sun May  1 09:24:34 2016
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Sun, 1 May 2016 08:24:34 +0100
Subject: [tex-live] Bug in pdflatex: doesn't compile file with 2
 adjacent spaces in the name
In-Reply-To: <5725AC66.8050809@Rhul.Ac.Uk>
References: <BB38FC1A81AD489D802D0343B677C552@CJ3001517A>
 <5725AC66.8050809@Rhul.Ac.Uk>
Message-ID: <5725AF32.8040105@Rhul.Ac.Uk>



Philip Taylor wrote:

> D:\>tex \input "a\space \space a.tex"

Or (even simpler, tho' perhaps marginally less transparent) --

D:\>tex \input "a \space a.tex"
This is TeX, Version 3.14159265 (TeX Live 2014/W32TeX) (preloaded
format=tex)
(./a  a.tex )
No pages of output.
Transcript written on "a  a.log".

From kakuto at fuk.kindai.ac.jp  Sun May  1 10:00:49 2016
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Sun, 1 May 2016 17:00:49 +0900
Subject: [tex-live] Bug in pdflatex: doesn't compile file with 2
 adjacent spaces in the name
In-Reply-To: <5725AF32.8040105@Rhul.Ac.Uk>
References: <BB38FC1A81AD489D802D0343B677C552@CJ3001517A>
 <5725AC66.8050809@Rhul.Ac.Uk> <5725AF32.8040105@Rhul.Ac.Uk>
Message-ID: <9444F5AF761D48E5AAE7547E69A58820@CJ3001517A>

Dear Philip,

D:\>tex \input "a \space a.tex"

Thanks a lot. It works fine.

Best,
Akira


From enrico.gregorio at gmail.com  Sun May  1 15:47:18 2016
From: enrico.gregorio at gmail.com (Enrico Gregorio)
Date: Sun, 1 May 2016 15:47:18 +0200
Subject: [tex-live] Fwd: Bug in pdflatex: doesn't compile file with 2
 adjacent spaces in the name
In-Reply-To: <CAD1MDiB9J+iOkcCciQ0Hg4pUvFVbve8hj=MTsCJqvGLDCrCyHQ@mail.gmail.com>
References: <CAHyAE13KGueAdrtpcwpzAbSvMTrDJCUX0ba5KGCOU4JjGqpQYw@mail.gmail.com>
 <CAD1MDiB9J+iOkcCciQ0Hg4pUvFVbve8hj=MTsCJqvGLDCrCyHQ@mail.gmail.com>
Message-ID: <CAD1MDiB2_BcRp5F6Bzqeoo7rYjnRcWqMH6OU6GUq3K-PFDX=VQ@mail.gmail.com>

TeX reduces consecutive spaces to one space token, but it will not directly
input files with a space in their name.

You can use the quoting feature:

    pdflatex "a\space\space a.tex"

which, on my machine, works.

Ciao
Enrico
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/accea5b9/attachment.html>

From alexis.bienvenue at univ-lyon1.fr  Sun May  1 14:33:24 2016
From: alexis.bienvenue at univ-lyon1.fr (=?UTF-8?Q?Alexis_Bienven=c3=bce?=)
Date: Sun, 1 May 2016 14:33:24 +0200
Subject: [tex-live] Extending SOURCE_DATE_EPOCH support
Message-ID: <5725F794.5070603@univ-lyon1.fr>

Hi.

In reproducible build context [1], the SOURCE_DATE_EPOCH environment
variable [2] support is very powerful [3]. AFAIK, TL-2016 partially
supports it, which is really great!

However, I think this should be enhanced in the following ways:
1) make latex, lualatex, xelatex also honour SOURCE_DATE_EPOCH
2) make \today honour SOURCE_DATE_EPOCH

I tried to work on those points with texlive from svn (I hope I used the
right repository/version).

Please find attached:
- a patch to use as a starting point, that extend SOURCE_DATE_EPOCH as
described.
- a simple test script test.sh, with results before and after applying
the patch

Regards,
Alexis Bienven?e

[1]: https://wiki.debian.org/ReproducibleBuilds/
[2]: https://reproducible-builds.org/specs/source-date-epoch/
[3]: https://www.tug.org/pipermail/pdftex/2015-July/008954.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: extend_S_D_E_support.diff
Type: text/x-patch
Size: 7302 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/4012c640/attachment-0004.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.sh
Type: application/x-shellscript
Size: 781 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/4012c640/attachment-0005.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test-before-patch.log
Type: text/x-log
Size: 1890 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/4012c640/attachment-0006.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test-with-patch.log
Type: text/x-log
Size: 1878 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/4012c640/attachment-0007.bin>

From pado at passoire.fr  Sun May  1 00:28:35 2016
From: pado at passoire.fr (=?UTF-8?Q?Alexis_Bienven=c3=bce?=)
Date: Sun, 1 May 2016 00:28:35 +0200
Subject: [tex-live] Extending SOURCE_DATE_EPOCH support
Message-ID: <57253193.7010908@passoire.fr>

Hi.

In reproducible build context [1], the SOURCE_DATE_EPOCH environment
variable [2] support is very powerful [3]. AFAIK, TL-2016 partially
supports it, which is really great!

However, I think this should be enhanced in the following ways:
1) make latex, lualatex, xelatex also honour SOURCE_DATE_EPOCH
2) make \today honour SOURCE_DATE_EPOCH

I tried to work on those points with texlive from svn (I hope I used the
right repository/version).

Please find attached:
- a patch to use as a starting point, that extend SOURCE_DATE_EPOCH as
described.
- a simple test script test.sh, with results before and after applying
the patch

Regards,
Alexis Bienven?e

[1]: https://wiki.debian.org/ReproducibleBuilds/
[2]: https://reproducible-builds.org/specs/source-date-epoch/
[3]: https://www.tug.org/pipermail/pdftex/2015-July/008954.html
-------------- next part --------------
A non-text attachment was scrubbed...
Name: extend_S_D_E_support.diff
Type: text/x-patch
Size: 7301 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/d7361706/attachment-0004.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.sh
Type: application/x-shellscript
Size: 781 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/d7361706/attachment-0005.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test-before-patch.log
Type: text/x-log
Size: 1889 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/d7361706/attachment-0006.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test-with-patch.log
Type: text/x-log
Size: 1877 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/d7361706/attachment-0007.bin>

From pado at passoire.fr  Sun May  1 08:52:30 2016
From: pado at passoire.fr (=?UTF-8?Q?Alexis_Bienven=c3=bce?=)
Date: Sun, 1 May 2016 08:52:30 +0200
Subject: [tex-live] Extending SOURCE_DATE_EPOCH support
Message-ID: <5725A7AE.3060006@passoire.fr>

Hi.

In reproducible build context [1], the SOURCE_DATE_EPOCH environment
variable [2] support is very powerful [3]. AFAIK, TL-2016 partially
supports it, which is really great!

However, I think this should be enhanced in the following ways:
1) make latex, lualatex, xelatex also honour SOURCE_DATE_EPOCH
2) make \today honour SOURCE_DATE_EPOCH

I tried to work on those points with texlive from svn (I hope I used the
right repository/version).

Please find attached:
- a patch to use as a starting point, that extend SOURCE_DATE_EPOCH as
described.
- a simple test script test.sh, with results before and after applying
the patch

Regards,
Alexis Bienven?e

[1]: https://wiki.debian.org/ReproducibleBuilds/
[2]: https://reproducible-builds.org/specs/source-date-epoch/
[3]: https://www.tug.org/pipermail/pdftex/2015-July/008954.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: extend_S_D_E_support.diff
Type: text/x-patch
Size: 7302 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/4824a67c/attachment-0004.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.sh
Type: application/x-shellscript
Size: 781 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/4824a67c/attachment-0005.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test-before-patch.log
Type: text/x-log
Size: 1890 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/4824a67c/attachment-0006.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test-with-patch.log
Type: text/x-log
Size: 1878 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/4824a67c/attachment-0007.bin>

From pado at passoire.fr  Sun May  1 14:13:14 2016
From: pado at passoire.fr (=?UTF-8?Q?Alexis_Bienven=c3=bce?=)
Date: Sun, 1 May 2016 14:13:14 +0200
Subject: [tex-live] Extending source_date_epoch support
Message-ID: <5725F2DA.6090702@passoire.fr>

Hi.

In reproducible build context [1], the SOURCE_DATE_EPOCH environment
variable [2] support is very powerful [3]. AFAIK, TL-2016 partially
supports it, which is really great!

However, I think this should be enhanced in the following ways:
1) make latex, lualatex, xelatex also honour SOURCE_DATE_EPOCH
2) make \today honour SOURCE_DATE_EPOCH

I tried to work on those points with texlive from svn (I hope I used the
right repository/version).

Please find attached/below:
- a patch to use as a starting point, that extend SOURCE_DATE_EPOCH as
described.
- a simple test script test.sh, with results before and after applying
the patch

I have already sent this mail in a different format, but it seemed to be
silently ignored. My apologies in case of multiple posts.

Regards,
Alexis Bienven?e

[1]: https://wiki.debian.org/ReproducibleBuilds/
[2]: https://reproducible-builds.org/specs/source-date-epoch/
[3]: https://www.tug.org/pipermail/pdftex/2015-July/008954.html

=================================== test.sh ============================
#! /bin/sh

T=today

cd /tmp

cat <<EOF > $T.tex
\documentclass[a4paper]{article}
\begin{document}
\message{^^JTODAY=\today^^J}
Today is \today !
\end{document}
EOF

one_pass() {

echo "\n* LATEX\n"
latex $T | grep "TODAY="
echo -n "LOG: " ; grep "This is" $T.log || echo
echo -n "DVI: " ; strings $T.dvi | grep "TeX output" || echo

for engine in pdf lua xe
do

    echo "\n* ${engine}LATEX\n"
    ${engine}latex $T | grep "TODAY="
    echo -n "LOG: " ; grep "This is" $T.log || echo
    pdftk $T.pdf output $T.u.pdf uncompress
    grep -aP '^/((Creation|Mod)Date|Creator) ' $T.u.pdf

done

}

echo "******************************** TODAY"
one_pass

echo "\n\n******************************** SOURCE_DATE_EPOCH=31536000 ->
1971"
export SOURCE_DATE_EPOCH=31536000
one_pass

=================================== test-before-patch.log =============
******************************** TODAY
[...]

******************************** SOURCE_DATE_EPOCH=31536000 -> 1971

* LATEX

TODAY=April 30, 2016
LOG: This is pdfTeX, Version 3.14159265-2.6-1.40.17 (TeX Live 2016)
(preloaded format=latex 2016.4.30)  30 APR 2016 11:25
DVI:  TeX output 2016.04.30:1125

* pdfLATEX

TODAY=April 30, 2016
LOG: This is pdfTeX, Version 3.14159265-2.6-1.40.17 (TeX Live 2016)
(preloaded format=pdflatex 2016.4.30)  30 APR 2016 11:25
/ModDate (D:19710101000000Z)
/CreationDate (D:19710101000000Z)
/Creator (TeX)

* luaLATEX

TODAY=April 30, 2016
LOG: This is LuaTeX, Version 0.95.0 (TeX Live 2016)  (format=lualatex
2016.4.30)  30 APR 2016 11:25
/ModDate (D:20160430112553-11'00')
/CreationDate (D:20160430112553-11'00')
/Creator (TeX)

* xeLATEX

TODAY=April 30, 2016
LOG: This is XeTeX, Version 3.14159265-2.6-0.99996 (TeX Live 2016)
(preloaded format=xelatex 2016.4.30)  30 APR 2016 11:25
/CreationDate (D:19701231130000-11'00')
/Creator ( XeTeX output 2016.04.30:1125)

=================================== test-after-patch.log ==============
******************************** TODAY

* LATEX

TODAY=April 30, 2016
LOG: This is pdfTeX, Version 3.14159265-2.6-1.40.17 (TeX Live 2016)
(preloaded format=latex 2016.4.30)  30 APR 2016 10:52
DVI:  TeX output 2016.04.30:1052

* pdfLATEX

TODAY=April 30, 2016
LOG: This is pdfTeX, Version 3.14159265-2.6-1.40.17 (TeX Live 2016)
(preloaded format=pdflatex 2016.4.30)  30 APR 2016 10:52
/ModDate (D:20160430105258-11'00')
/CreationDate (D:20160430105258-11'00')
/Creator (TeX)

* luaLATEX

TODAY=April 30, 2016
LOG: This is LuaTeX, Version 0.95.0 (TeX Live 2016)  (format=lualatex
2016.4.30)  30 APR 2016 10:52
/ModDate (D:20160430105258-11'00')
/CreationDate (D:20160430105258-11'00')
/Creator (TeX)

* xeLATEX

TODAY=April 30, 2016
LOG: This is XeTeX, Version 3.14159265-2.6-0.99996 (TeX Live 2016)
(preloaded format=xelatex 2016.4.30)  30 APR 2016 10:52
/CreationDate (D:20160430105300-11'00')
/Creator ( XeTeX output 2016.04.30:1052)


******************************** SOURCE_DATE_EPOCH=31536000 -> 1971

* LATEX

TODAY=January 1, 1971
LOG: This is pdfTeX, Version 3.14159265-2.6-1.40.17 (TeX Live 2016)
(preloaded format=latex 2016.4.30)  1 JAN 1971 00:00
DVI:  TeX output 1971.01.01:0000

* pdfLATEX

TODAY=January 1, 1971
LOG: This is pdfTeX, Version 3.14159265-2.6-1.40.17 (TeX Live 2016)
(preloaded format=pdflatex 2016.4.30)  1 JAN 1971 00:00
/ModDate (D:19710101000000Z)
/CreationDate (D:19710101000000Z)
/Creator (TeX)

* luaLATEX

TODAY=January 1, 1971
LOG: This is LuaTeX, Version 0.95.0 (TeX Live 2016)  (format=lualatex
2016.4.30)  1 JAN 1971 00:00
/ModDate (D:19710101000000Z)
/CreationDate (D:19710101000000Z)
/Creator (TeX)

* xeLATEX

TODAY=January 1, 1971
LOG: This is XeTeX, Version 3.14159265-2.6-0.99996 (TeX Live 2016)
(preloaded format=xelatex 2016.4.30)  1 JAN 1971 00:00
/CreationDate (D:19710101000000-00'00')
/Creator ( XeTeX output 1971.01.01:0000)





-------------- next part --------------
A non-text attachment was scrubbed...
Name: extend_S_D_E_support.diff
Type: text/x-patch
Size: 7303 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/c5bc2b6d/attachment.bin>

From bernhard.kleine at gmx.net  Sun May  1 22:36:44 2016
From: bernhard.kleine at gmx.net (Bernhard Kleine)
Date: Sun, 1 May 2016 22:36:44 +0200
Subject: [tex-live] Extending SOURCE_DATE_EPOCH support
In-Reply-To: <5725F794.5070603@univ-lyon1.fr>
References: <5725F794.5070603@univ-lyon1.fr>
Message-ID: <604d0dc3-0e9e-7f78-4fcf-563714c275a6@gmx.net>



Am 01.05.2016 um 14:33 schrieb Alexis Bienven?e:
> Hi.
>
> In reproducible build context [1], the SOURCE_DATE_EPOCH environment
> variable [2] support is very powerful [3]. AFAIK, TL-2016 partially
> supports it, which is really great!

I got this four fold at four different times???

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/fff84b08/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 819 bytes
Desc: OpenPGP digital signature
URL: <http://tug.org/pipermail/tex-live/attachments/20160501/fff84b08/attachment-0001.bin>

From preining at logic.at  Sun May  1 23:26:47 2016
From: preining at logic.at (Norbert Preining)
Date: Mon, 2 May 2016 06:26:47 +0900
Subject: [tex-live] Extending SOURCE_DATE_EPOCH support
In-Reply-To: <5725F794.5070603@univ-lyon1.fr>
References: <5725F794.5070603@univ-lyon1.fr>
Message-ID: <20160501212647.GA24540@wienerschnitzel>

Hi Alexis,

thanks for your email and the patches, but allow me a few comments:
* don't send the same email 4 times, it doesn't improve your message
* this is the list for TeX Live development, not for development
  of the various engines. The developers of luatex, xetex, and pdftex
  are most probably *not* reading the list here. And we include 
  what *they* provide.

> However, I think this should be enhanced in the following ways:
> 1) make latex, lualatex, xelatex also honour SOURCE_DATE_EPOCH

latex etc are *formats* and it is completely irrelevant. What you
want to change is the engines pdftex, luatex, xetex.

The patches for the other engines look definitely worth considering,
and I consider sending it with explanations to the tex-k at tug.org
mailing list, which is a better place, as the development of TeX Live
will not change things in the engines. Also contacting the
developers of luatex and xetex for changes to their engines
will help.

All the best

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From P.Taylor at Rhul.Ac.Uk  Sun May  1 23:35:44 2016
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor)
Date: Sun, 1 May 2016 22:35:44 +0100
Subject: [tex-live] Extending SOURCE_DATE_EPOCH support
In-Reply-To: <604d0dc3-0e9e-7f78-4fcf-563714c275a6@gmx.net>
References: <5725F794.5070603@univ-lyon1.fr>
 <604d0dc3-0e9e-7f78-4fcf-563714c275a6@gmx.net>
Message-ID: <572676B0.8080602@Rhul.Ac.Uk>



Bernhard Kleine wrote:

> I got this four fold at four different times???

Shush -- Keep it to yourself, or /everyone/ will want four copies !

From pado at passoire.fr  Mon May  2 00:05:15 2016
From: pado at passoire.fr (=?UTF-8?Q?Alexis_Bienven=c3=bce?=)
Date: Mon, 2 May 2016 00:05:15 +0200
Subject: [tex-live] Extending SOURCE_DATE_EPOCH support
In-Reply-To: <20160501212647.GA24540@wienerschnitzel>
References: <5725F794.5070603@univ-lyon1.fr>
 <20160501212647.GA24540@wienerschnitzel>
Message-ID: <57267D9B.6090707@passoire.fr>

Hi Norbert.

Le 01/05/2016 23:26, Norbert Preining a ?crit :
> * don't send the same email 4 times, it doesn't improve your message

I am terribly sorry for this mess. Since the delay was very long for
them, I thought the mails were thrown away by some spam-catcher or so.
This happened to me several times, even without notification.
I send my apologies to all the list.

> * this is the list for TeX Live development, not for development
>   of the various engines. The developers of luatex, xetex, and pdftex
>   are most probably *not* reading the list here. And we include 
>   what *they* provide.

OK, I see.

> The patches for the other engines look definitely worth considering,
> and I consider sending it with explanations to the tex-k at tug.org
> mailing list, which is a better place, as the development of TeX Live
> will not change things in the engines. Also contacting the
> developers of luatex and xetex for changes to their engines
> will help.

Thank you for directing me to the right place.

Regards,
Alexis Bienven?e.



From kakuto at fuk.kindai.ac.jp  Mon May  2 00:08:53 2016
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Mon, 2 May 2016 07:08:53 +0900
Subject: [tex-live] Extending SOURCE_DATE_EPOCH support
In-Reply-To: <20160501212647.GA24540@wienerschnitzel>
References: <5725F794.5070603@univ-lyon1.fr>
 <20160501212647.GA24540@wienerschnitzel>
Message-ID: <DD343ACD3B894E7FB0C9E36715EE4C2B@CJ3001517A>

> The patches for the other engines look definitely worth considering,
> and I consider sending it with explanations to the tex-k at tug.org
> mailing list, which is a better place, as the development of TeX Live
> will not change things in the engines.

(1) SOURCE_DATE_EPOCH support in (x)dvipdfmx is by myself,
    so I'll apply the patch for (x)dvipdfmx.

(2) The texmfmp.c is mainly maintained by Karl, so Karl will
    determine to apply the patch or not.

(3) luatex is developed by the LuaTeX team, mainly
    Hans, and Luigi recently.

Best,
Akira


From kakuto at fuk.kindai.ac.jp  Mon May  2 01:19:31 2016
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Mon, 2 May 2016 08:19:31 +0900
Subject: [tex-live] Extending SOURCE_DATE_EPOCH support
Message-ID: <1469DD81A158439E9369886A99B2D94D@CJ3001517A>

> (1) SOURCE_DATE_EPOCH support in (x)dvipdfmx is by myself,
>    so I'll apply the patch for (x)dvipdfmx.

Done, with other minor changes. I'll commit the changes
when allowed. (Currently the TeX Live sources are temporarily frozen).

Best,
Akira


From Herbert.Voss at FU-Berlin.DE  Mon May  2 08:31:23 2016
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Mon, 2 May 2016 08:31:23 +0200
Subject: [tex-live] tlmgr
Message-ID: <5726F43B.3000808@FU-Berlin.DE>

Todays update

voss at shania:~> tlmgr update --self --all
tlmgr: package repository http://ftp.cstug.cz/pub/tex/local/tlpretest 
(verified)
tlmgr: saving backups to /usr/local/texlive/2016/tlpkg/backups
voss at shania:~>

No any other message.

Herbert

voss at shania:~> tlmgr -v update --self --all
D:tlmgr:main: ::tldownload_server defined
D:Using system wget (tested).
D:Using shipped 
/usr/local/texlive/2016/tlpkg/installer/xz/xzdec.x86_64-linux for xzdec 
(tested).
D:Using shipped 
/usr/local/texlive/2016/tlpkg/installer/xz/xz.x86_64-linux for xz (not 
tested).
D:Using checksum method digest::sha
D:Testing for gpg in gpg
D:  ... found!
D:gpg command line: gpg --homedir "/usr/local/texlive/2016/tlpkg/gpg" 
--no-secmem-warning --no-permission-warning --lock-never
D:will verify cryptographic signatures
D:persistent connection set up, trying to get 
http://ftp.cstug.cz/pub/tex/local/tlpretest/tlpkg/texlive.tlpdb.sha512 
(for /tmp/8nF5gpomxu)
D:downloading file via persistent connection succeeded
D:persistent connection set up, trying to get 
http://ftp.cstug.cz/pub/tex/local/tlpretest/tlpkg/texlive.tlpdb.sha512.asc 
(for /tmp/jA4SOQgGMY)
D:downloading file via persistent connection succeeded
D:verification succeeded, output:
gpg: Signatur vom So 01 Mai 2016 04:36:56 CEST mittels RSA-Schl??ssel ID 
19438C70
gpg: Korrekte Signatur von "TeX Live Distribution <tex-live at tug.org>" 
[uneingeschr??nkt]

D:cryptographic signature of 
http://ftp.cstug.cz/pub/tex/local/tlpretest/tlpkg/texlive.tlpdb.sha512 
verified
D:TLPDB.pm: trying to initialize from 
http://ftp.cstug.cz/pub/tex/local/tlpretest/tlpkg/texlive.tlpdb
D:trying to download 
http://ftp.cstug.cz/pub/tex/local/tlpretest/tlpkg/texlive.tlpdb.xz to 
/tmp/k8Lj3xaHIx
D:persistent connection set up, trying to get 
http://ftp.cstug.cz/pub/tex/local/tlpretest/tlpkg/texlive.tlpdb.xz (for 
/tmp/k8Lj3xaHIx)
D:downloading file via persistent connection succeeded
D:xzdec-ing /tmp/k8Lj3xaHIx to /tmp/xWgJSXGa6m
D:found the uncompressed xz file
D:persistent connection set up, trying to get 
http://ftp.cstug.cz/pub/tex/local/tlpretest/tlpkg/texlive.tlpdb.sha512 
(for /tmp/stmPUcmHJX)
D:downloading file via persistent connection succeeded
D:persistent connection set up, trying to get 
http://ftp.cstug.cz/pub/tex/local/tlpretest/tlpkg/texlive.tlpdb.sha512.asc 
(for /tmp/G7xS6_XcFg)
D:downloading file via persistent connection succeeded
D:verification succeeded, output:
gpg: Signatur vom So 01 Mai 2016 04:36:56 CEST mittels RSA-Schl??ssel ID 
19438C70
gpg: Korrekte Signatur von "TeX Live Distribution <tex-live at tug.org>" 
[uneingeschr??nkt]

D:cryptographic signature of 
http://ftp.cstug.cz/pub/tex/local/tlpretest/tlpkg/texlive.tlpdb.sha512 
verified
D:checksum of local copy identical with remote hash
D:writing out tlpdb to 
/usr/local/texlive/2016/tlpkg/texlive.tlpdb.e6fea370d3b91ec56f8920164da527ea
tlmgr: package repository http://ftp.cstug.cz/pub/tex/local/tlpretest 
(verified)
D:Automatic backups activated, keeping 1 backups.
tlmgr: saving backups to /usr/local/texlive/2016/tlpkg/backups
D:tlmgr: new pkgs:
D:tlmgr: deleted :
D:tlmgr: forced  :
voss at shania:~>

From preining at logic.at  Mon May  2 09:53:22 2016
From: preining at logic.at (Norbert Preining)
Date: Mon, 2 May 2016 16:53:22 +0900
Subject: [tex-live] tlmgr
In-Reply-To: <5726F43B.3000808@FU-Berlin.DE>
References: <5726F43B.3000808@FU-Berlin.DE>
Message-ID: <20160502075322.GA28820@wienerschnitzel>

On Mo, 02 Mai 2016, Herbert Voss wrote:
> voss at shania:~> tlmgr update --self --all
> tlmgr: package repository http://ftp.cstug.cz/pub/tex/local/tlpretest
> (verified)
> tlmgr: saving backups to /usr/local/texlive/2016/tlpkg/backups

Rebuild broke today, no updates available.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From karl at freefriends.org  Mon May  2 23:08:36 2016
From: karl at freefriends.org (Karl Berry)
Date: Mon, 2 May 2016 21:08:36 +0000
Subject: [tex-live] Extending SOURCE_DATE_EPOCH support
In-Reply-To: <20160501212647.GA24540@wienerschnitzel>
Message-ID: <201605022108.u42L8a37014292@freefriends.org>

    The patches for the other engines look definitely worth considering,
    and I consider sending it with explanations to the tex-k at tug.org

Patches for luatex should go to the dev-luatex list
(http://www.ntg.nl/mailman/listinfo/dev-luatex).

Patches for xetex are probably best submitted to their sf repository,
https://sourceforge.net/p/xetex.  The mailing list would be
http://lists.tug.org/xetex, afaik.

I don't think we should even consider making this change in luatex for
tl16 at this late date, since its source is independent and thus there
is great potential for problems.  xetex is slightly less problematic,
but ... we'll see.  --thanks, karl.

From karl at freefriends.org  Tue May  3 00:04:11 2016
From: karl at freefriends.org (Karl Berry)
Date: Mon, 2 May 2016 22:04:11 +0000
Subject: [tex-live] 3.4.4 System font configuration for XeTEX and LuaTEX
In-Reply-To: <B02088AF-9EBA-4A35-A274-6AAF12C71402@free.fr>
Message-ID: <201605022204.u42M4Bhv020622@freefriends.org>

    the explanations in 3.4.4 System font configuration for XeTEX and
    LuaTEX for ``Unix-compatible system'' do not apply to Mac OS X

Yeah.  Thanks for the report/suggestion.  Will contemplate.  -karl

From karl at freefriends.org  Tue May  3 00:04:12 2016
From: karl at freefriends.org (Karl Berry)
Date: Mon, 2 May 2016 22:04:12 +0000
Subject: [tex-live] mention changed luaotfload features in TeX Live
 guide ?
In-Reply-To: <ADCC80F3-2DB7-4F40-9333-7710F7A4EB33@free.fr>
Message-ID: <201605022204.u42M4CVK020630@freefriends.org>

    * Remove support for builtin Fontforge libraries (this includes
      the PFA, PFB, DFONT, and feature file readers).

Well, that seems awful.

But I don't care to mention changes in luaotfload in the distribution
news, certainly not now, because it is too much in flux.  I hope
Philipp, or whoever, will make it work again.  If it's still problematic
in practice after the release, we can add it to the bugs/news page.
Thanks, Karl.

From karl at freefriends.org  Tue May  3 00:29:31 2016
From: karl at freefriends.org (Karl Berry)
Date: Mon, 2 May 2016 22:29:31 +0000
Subject: [tex-live] gpg with tlmgr with tl 2016 pretest, etc, on a Mac
In-Reply-To: <572389C7.7010509@psu.edu>
Message-ID: <201605022229.u42MTV3W022089@freefriends.org>

    https://www.tug.org/texlive/quickinstall.html the recommendation is 
    merely stated, but no justification is given.

The justification is given: "it's conventional".  That is the only
reason.  There is no technical reason from TeX Live's perspective.  -k

From karl at freefriends.org  Tue May  3 00:45:36 2016
From: karl at freefriends.org (Karl Berry)
Date: Mon, 2 May 2016 22:45:36 +0000
Subject: [tex-live] writing kpsewhich output to a file
In-Reply-To: <1nfkpg9rzkg3f.dlg@nililand.de>
Message-ID: <201605022245.u42Mjaoq022922@freefriends.org>

Hi Ulrike,

    wonder how I can catch the argument ...
    http://tex.stackexchange.com/questions/306987/

There is no way without using --shell-escape or pipes, as far as I can
imagine.  Clearly we cannot allow shell redirections in restricted mode.

Admittedly this makes having kpsewhich in the restricted list rather
useless, but I don't see any way to solve it.  We'd have to add a new
primitive that expands to the output of a shell command.  That would be
highly useful, but I don't see it happening :(.  -k

From witiko at gmail.com  Tue May  3 08:30:58 2016
From: witiko at gmail.com (=?iso-8859-1?Q?V=EDt_Novotn=FD?=)
Date: Tue, 3 May 2016 08:30:58 +0200
Subject: [tex-live] The time of the final freeze
In-Reply-To: <mailman.4273.1462228180.10827.tex-live@tug.org>
References: <mailman.4273.1462228180.10827.tex-live@tug.org>
Message-ID: <20160503063056.GA15086@witiko>

Greetings,

what is the current plan regarding the final freeze? Is it going to take
place tomorrow?

Best Regards,
V?t Novotn?

From preining at logic.at  Tue May  3 15:44:17 2016
From: preining at logic.at (Norbert Preining)
Date: Tue, 3 May 2016 15:44:17 +0200
Subject: [tex-live] The time of the final freeze
In-Reply-To: <20160503063056.GA15086@witiko>
References: <mailman.4273.1462228180.10827.tex-live@tug.org>
 <20160503063056.GA15086@witiko>
Message-ID: <68B68EDA-86F5-4A58-80B8-3615D0D225A0@logic.at>

Final freeze of the sources (not the usual updates from CTAN) will happen rather soon, if not tomorrow then within very few days.

Norbert


On May 3, 2016 8:30:58 AM GMT+02:00, "V?t Novotn?" <witiko at gmail.com> wrote:
>Greetings,
>
>what is the current plan regarding the final freeze? Is it going to
>take
>place tomorrow?
>
>Best Regards,
>V?t Novotn?

-- 
Sent from my mobile device. Please excuse my brevity.

From germano.massullo at gmail.com  Tue May  3 16:02:20 2016
From: germano.massullo at gmail.com (Germano Massullo)
Date: Tue, 3 May 2016 16:02:20 +0200
Subject: [tex-live] Add LNCS to TeXLive
In-Reply-To: <CADP=ZZoXiL2gi5jM7JwZFgnkSY9_5FAkQ_joc9NsmOmK=9uwRg@mail.gmail.com>
References: <571D0DC1.3070902@gmail.com>
 <201604242130.u3OLUwix020395@freefriends.org>
 <CADP=ZZoXiL2gi5jM7JwZFgnkSY9_5FAkQ_joc9NsmOmK=9uwRg@mail.gmail.com>
Message-ID: <5b01ba87-e6e3-0ffc-9e92-8e76d83ac930@gmail.com>

I actually have not yet received any reply from Springer

From kbrow1i at gmail.com  Tue May  3 16:24:35 2016
From: kbrow1i at gmail.com (Ken Brown)
Date: Tue, 3 May 2016 10:24:35 -0400
Subject: [tex-live] Recent change to _create_config_files broke
 installation in user mode
In-Reply-To: <48F7D928-019A-4341-AD8E-07AABC353DBC@logic.at>
References: <5725129E.10609@gmail.com>
 <48F7D928-019A-4341-AD8E-07AABC353DBC@logic.at>
Message-ID: <5728B4A3.4050402@gmail.com>

On 4/30/2016 5:05 PM, Norbert Preining wrote:
> Interesting, the comment in three commit mentions that this cannot be reached in user mode.
>
> I need to check again, thanks for the report

Hi Norbert,

In case you haven't had a chance to look at this yet, I can save you a 
little time: _create_config_files can be reached in user mode because 
handle_execute_actions in tlmgr.pl (line 795) calls create_updmap in 
user mode.

Ken


From preining at logic.at  Tue May  3 16:29:04 2016
From: preining at logic.at (Norbert Preining)
Date: Tue, 3 May 2016 16:29:04 +0200
Subject: [tex-live] Add LNCS to TeXLive
In-Reply-To: <5b01ba87-e6e3-0ffc-9e92-8e76d83ac930@gmail.com>
References: <571D0DC1.3070902@gmail.com>
 <201604242130.u3OLUwix020395@freefriends.org>
 <CADP=ZZoXiL2gi5jM7JwZFgnkSY9_5FAkQ_joc9NsmOmK=9uwRg@mail.gmail.com>
 <5b01ba87-e6e3-0ffc-9e92-8e76d83ac930@gmail.com>
Message-ID: <7DF69B7E-C3C6-4992-99C0-0E30BD536507@logic.at>

Not surprisingly....

On May 3, 2016 4:02:20 PM GMT+02:00, Germano Massullo <germano.massullo at gmail.com> wrote:
>I actually have not yet received any reply from Springer

-- 
Sent from my mobile device. Please excuse my brevity.

From preining at logic.at  Tue May  3 16:33:24 2016
From: preining at logic.at (Norbert Preining)
Date: Tue, 3 May 2016 16:33:24 +0200
Subject: [tex-live] Recent change to _create_config_files broke
 installation in user mode
In-Reply-To: <5728B4A3.4050402@gmail.com>
References: <5725129E.10609@gmail.com>
 <48F7D928-019A-4341-AD8E-07AABC353DBC@logic.at> <5728B4A3.4050402@gmail.com>
Message-ID: <499261B6-A861-4B9F-B985-F3F97EF4DFA8@logic.at>

Thanks a lot, will hopefully look into it on my intercontinental flight tomorrow back from BachoTeX.

All the best

Norbert
-- 
Sent from my mobile device. Please excuse my brevity.

From vivrii at gmail.com  Tue May  3 17:52:29 2016
From: vivrii at gmail.com (Victor Ivrii)
Date: Tue, 3 May 2016 18:52:29 +0300
Subject: [tex-live] Add LNCS to TeXLive
In-Reply-To: <5b01ba87-e6e3-0ffc-9e92-8e76d83ac930@gmail.com>
References: <571D0DC1.3070902@gmail.com>
 <201604242130.u3OLUwix020395@freefriends.org>
 <CADP=ZZoXiL2gi5jM7JwZFgnkSY9_5FAkQ_joc9NsmOmK=9uwRg@mail.gmail.com>
 <5b01ba87-e6e3-0ffc-9e92-8e76d83ac930@gmail.com>
Message-ID: <CADP=ZZpSpRftYWk1iHtbVpeUwiyKajzqCfqzG9jhR=bUOnbDfg@mail.gmail.com>

On Tue, May 3, 2016 at 5:02 PM, Germano Massullo <germano.massullo at gmail.com
> wrote:

> I actually have not yet received any reply from Springer
>


As I wrote it is not the worst case scenario; they could follow Elsevier
providing CTAN with the file, then updating it without uploading updated
version to CTAN.
-- 

Victor Ivrii
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160503/cca99f6a/attachment-0001.html>

From petr at olsak.net  Tue May  3 21:32:52 2016
From: petr at olsak.net (Petr Olsak)
Date: Tue, 3 May 2016 21:32:52 +0200
Subject: [tex-live] Bug in pdflatex: doesn't compile file with 2
 adjacent spaces in the name
Message-ID: <alpine.DEB.2.10.1605032124140.11040@newton.feld.cvut.cz>


> 1. Create a file: "a  a.tex" with sample data.
> 2. Run: $pdflatex a\ \ a.tex
> 3. Get an error: ...

Hello,

the second space is consumed by token processor. If you write

    $pdftex "a\space\space a"

then the file with two spaces in its filename is read.

Note that your example: $pdftex a\ \ a.tex means that backslash is 
interpreted by shell and the real parameter is "a<space><space>a.tex" and 
this is tokenized to "a<space>a.tex". In my example, the real parameter is 
"a\space\space<space>a" and this is expanded to "a<space><space>a".

Petr Olsak

From komascript at gmx.info  Wed May  4 11:03:12 2016
From: komascript at gmx.info (Markus Kohm)
Date: Wed, 4 May 2016 11:03:12 +0200
Subject: [tex-live] How to add a key to the tlmgr gpg keyring persistently?
Message-ID: <1990994.XHioZExbH6@mailjo.komascript.de>

I've added a public key for an additional repository to the keyring used by 
tlmgr. After `tlmgr update -self' the keyring has been "updated" too and the 
manually added key has been "removed". After this I've got an fatal error, 
because the signature of the additional repository cannot be checked.

So how can I add a key to the keyring without need to add it again and again 
after each update of the TeX Live infrastructure files?
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 181 bytes
Desc: This is a digitally signed message part.
URL: <http://tug.org/pipermail/tex-live/attachments/20160504/5ba9f8eb/attachment.bin>

From preining at logic.at  Wed May  4 14:56:16 2016
From: preining at logic.at (Norbert Preining)
Date: Wed, 4 May 2016 15:56:16 +0300
Subject: [tex-live] How to add a key to the tlmgr gpg keyring
 persistently?
In-Reply-To: <1990994.XHioZExbH6@mailjo.komascript.de>
References: <1990994.XHioZExbH6@mailjo.komascript.de>
Message-ID: <56646EF5-916C-498F-B987-0A5FC80FBE17@logic.at>

Hi Markus,

At the moment this is not possible unless you use the env vars TL_GNUPGHOME (afair).

Adding key management Issy on my to-do list.

The easiest way is of course for now to not provide signatures for alternative repositories (especially since you have full control of the server there is less danger of compromise).

If there is no signature available tlmgr will still work with the repository.

Adding key management is in the work, though.

Norbert

-- 
Sent from my mobile device. Please excuse my brevity.

From preining at logic.at  Wed May  4 09:59:12 2016
From: preining at logic.at (Norbert Preining)
Date: Wed, 4 May 2016 16:59:12 +0900
Subject: [tex-live] Recent change to _create_config_files broke
 installation in user mode
In-Reply-To: <5728B4A3.4050402@gmail.com>
References: <5725129E.10609@gmail.com>
 <48F7D928-019A-4341-AD8E-07AABC353DBC@logic.at> <5728B4A3.4050402@gmail.com>
Message-ID: <20160504075912.GA3951@wienerschnitzel>

Hi Ken,

> little time: _create_config_files can be reached in user mode because

Thanks, indeed. I can easily remove the 'die' there, but then an already
present updmap.cfg in $HOME/texmf/web2c/updmap.cfg will be overwritten,
not necessarily the best approach.

What do you suggest here? Not generating any updmap.cfg? I don't want
to parse a local updmap.cfg, though.

Maybe remove the die and add a clear warning in the docs that a local
updmap.cfg will be overwritten?


All the best

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From preining at logic.at  Thu May  5 05:11:37 2016
From: preining at logic.at (Norbert Preining)
Date: Thu, 5 May 2016 12:11:37 +0900
Subject: [tex-live] How to add a key to the tlmgr gpg keyring
 persistently?
In-Reply-To: <1990994.XHioZExbH6@mailjo.komascript.de>
References: <1990994.XHioZExbH6@mailjo.komascript.de>
Message-ID: <20160505031137.GA6521@wienerschnitzel>

Hi Markus,

> So how can I add a key to the keyring without need to add it again and again 
> after each update of the TeX Live infrastructure files?

Well, since you beat me to it ... a long intercontinental flight back
from BachoTeX and the code is submitted. tlmgr interface is:
	tlmgr key list
		lists all keys
	tlmgr key add <keyfile> | -
		adds a key from file or stdin
	tlmgr key delete <keyid>
		deletes a key
What happens behind the scenes is that an additional keyring is generated
in TLROOT/tlpkg/gpg/ (where also the main keyring is), called
	repository-keys.gpg
Keys are added/removed from this keyring to keep the main keyring clean.

In addition, I have adjusted tlmgr so that:
* does not die if a key is not available for checking
* in case of non-verified sources, reports a short reason:
	... (not verified: pub key missing)
	... (not verified: no gpg available)
	... (not verified: not signed)
  (with obvious meanings)

If all goes well this will be in the next rebuild tomorrow.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From komascript at gmx.info  Thu May  5 07:47:53 2016
From: komascript at gmx.info (Markus Kohm)
Date: Thu, 5 May 2016 07:47:53 +0200
Subject: [tex-live] How to add a key to the tlmgr gpg keyring
 persistently?
In-Reply-To: <20160505031137.GA6521@wienerschnitzel>
References: <1990994.XHioZExbH6@mailjo.komascript.de>
 <20160505031137.GA6521@wienerschnitzel>
Message-ID: <1903672.oI5p9bNFam@mailjo.komascript.de>

> Well, since you beat me to it ...

;-)

>         tlmgr key list
>                 lists all keys
>         tlmgr key add <keyfile> | -
>                 adds a key from file or stdin
>         tlmgr key delete <keyid>
>                 deletes a key

Nice. I'll test it ASAP.

Thank you.

Markus

From kbrow1i at gmail.com  Thu May  5 14:31:49 2016
From: kbrow1i at gmail.com (Ken Brown)
Date: Thu, 5 May 2016 08:31:49 -0400
Subject: [tex-live] Recent change to _create_config_files broke
 installation in user mode
In-Reply-To: <20160504075912.GA3951@wienerschnitzel>
References: <5725129E.10609@gmail.com>
 <48F7D928-019A-4341-AD8E-07AABC353DBC@logic.at> <5728B4A3.4050402@gmail.com>
 <20160504075912.GA3951@wienerschnitzel>
Message-ID: <4e23ece9-967f-34f8-92de-6f1d51e2e562@gmail.com>

Hi Norbert,

On 5/4/2016 3:59 AM, Norbert Preining wrote:
> What do you suggest here? Not generating any updmap.cfg? I don't want
> to parse a local updmap.cfg, though.
>
> Maybe remove the die and add a clear warning in the docs that a local
> updmap.cfg will be overwritten?

That seems reasonable to me.  A more drastic solution would be to find a 
way for _create_config_files to know whether it's operating in user 
mode.  But I don't know if you want to do that at this late stage in the 
pretest.

Best regards,

Ken


From preining at logic.at  Thu May  5 14:48:17 2016
From: preining at logic.at (Norbert Preining)
Date: Thu, 5 May 2016 21:48:17 +0900
Subject: [tex-live] Recent change to _create_config_files broke
 installation in user mode
In-Reply-To: <4e23ece9-967f-34f8-92de-6f1d51e2e562@gmail.com>
References: <5725129E.10609@gmail.com>
 <48F7D928-019A-4341-AD8E-07AABC353DBC@logic.at> <5728B4A3.4050402@gmail.com>
 <20160504075912.GA3951@wienerschnitzel>
 <4e23ece9-967f-34f8-92de-6f1d51e2e562@gmail.com>
Message-ID: <20160505124817.GD27097@logic.at>

On Thu, 05 May 2016, Ken Brown wrote:
> >Maybe remove the die and add a clear warning in the docs that a local
> >updmap.cfg will be overwritten?
> 
> That seems reasonable to me.  A more drastic solution would be to
> find a way for _create_config_files to know whether it's operating
> in user mode.  But I don't know if you want to do that at this late

But then what? The case of die is 99% user mode (or a huge bug),
but what to do in user mode? Overwrite? Not write? That is the 
question.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From kbrow1i at gmail.com  Thu May  5 15:11:27 2016
From: kbrow1i at gmail.com (Ken Brown)
Date: Thu, 5 May 2016 09:11:27 -0400
Subject: [tex-live] Recent change to _create_config_files broke
 installation in user mode
In-Reply-To: <20160505124817.GD27097@logic.at>
References: <5725129E.10609@gmail.com>
 <48F7D928-019A-4341-AD8E-07AABC353DBC@logic.at> <5728B4A3.4050402@gmail.com>
 <20160504075912.GA3951@wienerschnitzel>
 <4e23ece9-967f-34f8-92de-6f1d51e2e562@gmail.com>
 <20160505124817.GD27097@logic.at>
Message-ID: <32f91de3-2fff-f5d8-bd55-21631926fa78@gmail.com>

On 5/5/2016 8:48 AM, Norbert Preining wrote:
> On Thu, 05 May 2016, Ken Brown wrote:
>>> Maybe remove the die and add a clear warning in the docs that a local
>>> updmap.cfg will be overwritten?
>>
>> That seems reasonable to me.  A more drastic solution would be to
>> find a way for _create_config_files to know whether it's operating
>> in user mode.  But I don't know if you want to do that at this late
>
> But then what? The case of die is 99% user mode (or a huge bug),
> but what to do in user mode? Overwrite? Not write? That is the
> question.

I would say overwrite.  Otherwise, the config file doesn't reflect the 
newly installed packages.  Or am I missing something?

Ken


From preining at logic.at  Thu May  5 15:15:32 2016
From: preining at logic.at (Norbert Preining)
Date: Thu, 5 May 2016 22:15:32 +0900
Subject: [tex-live] Recent change to _create_config_files broke
 installation in user mode
In-Reply-To: <32f91de3-2fff-f5d8-bd55-21631926fa78@gmail.com>
References: <5725129E.10609@gmail.com>
 <48F7D928-019A-4341-AD8E-07AABC353DBC@logic.at> <5728B4A3.4050402@gmail.com>
 <20160504075912.GA3951@wienerschnitzel>
 <4e23ece9-967f-34f8-92de-6f1d51e2e562@gmail.com>
 <20160505124817.GD27097@logic.at>
 <32f91de3-2fff-f5d8-bd55-21631926fa78@gmail.com>
Message-ID: <20160505131532.GI27097@logic.at>

> the newly installed packages.  Or am I missing something?

Yes, people installing font packages *manually* without tlmgr and
creating manually a updmap.cfg, which is in fact the much more common
case in my feeling ...

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From kbrow1i at gmail.com  Thu May  5 15:37:31 2016
From: kbrow1i at gmail.com (Ken Brown)
Date: Thu, 5 May 2016 09:37:31 -0400
Subject: [tex-live] Recent change to _create_config_files broke
 installation in user mode
In-Reply-To: <20160505131532.GI27097@logic.at>
References: <5725129E.10609@gmail.com>
 <48F7D928-019A-4341-AD8E-07AABC353DBC@logic.at> <5728B4A3.4050402@gmail.com>
 <20160504075912.GA3951@wienerschnitzel>
 <4e23ece9-967f-34f8-92de-6f1d51e2e562@gmail.com>
 <20160505124817.GD27097@logic.at>
 <32f91de3-2fff-f5d8-bd55-21631926fa78@gmail.com>
 <20160505131532.GI27097@logic.at>
Message-ID: <ecc5aa48-9848-d797-d0e4-d8e5c0e01c7e@gmail.com>

On 5/5/2016 9:15 AM, Norbert Preining wrote:
>> the newly installed packages.  Or am I missing something?
>
> Yes, people installing font packages *manually* without tlmgr and
> creating manually a updmap.cfg, which is in fact the much more common
> case in my feeling ...

OK, you have much more experience with this than I do.  I think you 
should use your own judgment.  My only request is that a user mode 
installation shouldn't die, and that whatever happens to updmap.cfg 
should be well documented.

Ken


From kbrow1i at gmail.com  Thu May  5 17:13:01 2016
From: kbrow1i at gmail.com (Ken Brown)
Date: Thu, 5 May 2016 11:13:01 -0400
Subject: [tex-live] Recent change to _create_config_files broke
 installation in user mode
In-Reply-To: <20160505131532.GI27097@logic.at>
References: <5725129E.10609@gmail.com>
 <48F7D928-019A-4341-AD8E-07AABC353DBC@logic.at> <5728B4A3.4050402@gmail.com>
 <20160504075912.GA3951@wienerschnitzel>
 <4e23ece9-967f-34f8-92de-6f1d51e2e562@gmail.com>
 <20160505124817.GD27097@logic.at>
 <32f91de3-2fff-f5d8-bd55-21631926fa78@gmail.com>
 <20160505131532.GI27097@logic.at>
Message-ID: <cd9d0dc1-e2b1-3f26-d8e8-0e83124f9fa6@gmail.com>

On 5/5/2016 9:15 AM, Norbert Preining wrote:
>> the newly installed packages.  Or am I missing something?
>
> Yes, people installing font packages *manually* without tlmgr and
> creating manually a updmap.cfg, which is in fact the much more common
> case in my feeling ...

Hi again Norbert,

I'm sorry, but I don't see how people who have manually created 
updmap.cfg are hurt by the existing code for _create_config_files with 
the "die" removed.  Doesn't the new map information simply get appended 
to what was already there?  I'm looking at the code starting at line 
2745 in TLUtils.pm (rev 40900).

I apologize in advance if I've missed something obvious.

Ken


From preining at logic.at  Thu May  5 17:40:53 2016
From: preining at logic.at (Norbert Preining)
Date: Fri, 6 May 2016 00:40:53 +0900
Subject: [tex-live] Recent change to _create_config_files broke
 installation in user mode
In-Reply-To: <cd9d0dc1-e2b1-3f26-d8e8-0e83124f9fa6@gmail.com>
References: <5725129E.10609@gmail.com>
 <48F7D928-019A-4341-AD8E-07AABC353DBC@logic.at> <5728B4A3.4050402@gmail.com>
 <20160504075912.GA3951@wienerschnitzel>
 <4e23ece9-967f-34f8-92de-6f1d51e2e562@gmail.com>
 <20160505124817.GD27097@logic.at>
 <32f91de3-2fff-f5d8-bd55-21631926fa78@gmail.com>
 <20160505131532.GI27097@logic.at>
 <cd9d0dc1-e2b1-3f26-d8e8-0e83124f9fa6@gmail.com>
Message-ID: <20160505154053.GJ27097@logic.at>

On Thu, 05 May 2016, Ken Brown wrote:
> I'm sorry, but I don't see how people who have manually created
> updmap.cfg are hurt by the existing code for _create_config_files
> with the "die" removed.  Doesn't the new map information simply get
> appended to what was already there?  I'm looking at the code
> starting at line 2745 in TLUtils.pm (rev 40900).

$localconf is set to undef in the call to create_updmap...

I have a different approach, copying to updmap.cfg.backup and
regenerating it in usermode. Will be tsted an committed after
tomorrows rebuild (don't want to disturb other things)

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From kbrow1i at gmail.com  Fri May  6 17:41:13 2016
From: kbrow1i at gmail.com (Ken Brown)
Date: Fri, 6 May 2016 11:41:13 -0400
Subject: [tex-live] Recent change to _create_config_files broke
 installation in user mode
In-Reply-To: <20160505154053.GJ27097@logic.at>
References: <5725129E.10609@gmail.com>
 <48F7D928-019A-4341-AD8E-07AABC353DBC@logic.at> <5728B4A3.4050402@gmail.com>
 <20160504075912.GA3951@wienerschnitzel>
 <4e23ece9-967f-34f8-92de-6f1d51e2e562@gmail.com>
 <20160505124817.GD27097@logic.at>
 <32f91de3-2fff-f5d8-bd55-21631926fa78@gmail.com>
 <20160505131532.GI27097@logic.at>
 <cd9d0dc1-e2b1-3f26-d8e8-0e83124f9fa6@gmail.com>
 <20160505154053.GJ27097@logic.at>
Message-ID: <cff4508b-ca8a-ddfe-7d51-5f984bab3943@gmail.com>

On 5/5/2016 11:40 AM, Norbert Preining wrote:
> I have a different approach, copying to updmap.cfg.backup and
> regenerating it in usermode.

Thanks, this works well.

While testing it, however, I found another glitch in _create_config_files, unrelated to the usermode issue.  Namely, writing to $dest shouldn't be conditioned on $#lines >= 0.  If there are no lines to write, then updmap.cfg should still be written, with no map lines.  This can happen after the removal of packages, if there are no more packages left with map files.

Here's the example that bit me (which happens to be in usermode, but that's irrelevant):

$ tlmgr --usermode install noto
tlmgr: package repository http://www.math.utah.edu/pub/texlive/tlpretest/ (verified)
[1/1, ??:??/??:??] install: noto [4401k]
tlmgr: package log updated: /home/kbrown/texmf/web2c/tlmgr.log
running mktexlsr ...
done running mktexlsr.
running updmap ...
done running updmap.

kbrown at moufang ~
$ tlmgr --usermode remove noto
tlmgr: removing package noto
tlmgr: ultimately removed these packages: noto
tlmgr: package log updated: /home/kbrown/texmf/web2c/tlmgr.log
running mktexlsr ...
done running mktexlsr.
running updmap ...

tlmgr: updmap failed (status 1), output:
updmap will read the following updmap.cfg files (in precedence order):
  /home/kbrown/texmf/web2c/updmap.cfg
  /usr/local/texlive/2016/texmf-dist/web2c/updmap.cfg
updmap may write changes to the following updmap.cfg file:
  /home/kbrown/texmf/web2c/updmap.cfg
dvips output dir: "/home/kbrown/.texlive2016/texmf-var/fonts/map/dvips/updmap"
pdftex output dir: "/home/kbrown/.texlive2016/texmf-var/fonts/map/pdftex/updmap"
dvipdfmx output dir: "/home/kbrown/.texlive2016/texmf-var/fonts/map/dvipdfmx/updmap"
updmap [ERROR]: The following map file(s) couldn't be found:
updmap [ERROR]:         noto.map (in /home/kbrown/texmf/web2c/updmap.cfg)
updmap [ERROR]: Did you run mktexlsr?
[...]

Ken

From preining at logic.at  Fri May  6 17:56:23 2016
From: preining at logic.at (Norbert Preining)
Date: Sat, 7 May 2016 00:56:23 +0900
Subject: [tex-live] Recent change to _create_config_files broke
 installation in user mode
In-Reply-To: <cff4508b-ca8a-ddfe-7d51-5f984bab3943@gmail.com>
References: <48F7D928-019A-4341-AD8E-07AABC353DBC@logic.at>
 <5728B4A3.4050402@gmail.com> <20160504075912.GA3951@wienerschnitzel>
 <4e23ece9-967f-34f8-92de-6f1d51e2e562@gmail.com>
 <20160505124817.GD27097@logic.at>
 <32f91de3-2fff-f5d8-bd55-21631926fa78@gmail.com>
 <20160505131532.GI27097@logic.at>
 <cd9d0dc1-e2b1-3f26-d8e8-0e83124f9fa6@gmail.com>
 <20160505154053.GJ27097@logic.at>
 <cff4508b-ca8a-ddfe-7d51-5f984bab3943@gmail.com>
Message-ID: <20160506155623.GB27097@logic.at>

Hi Ken,

the changes I mentioned will be in tomorrow's rebuild (if successful).

On Fri, 06 May 2016, Ken Brown wrote:
> While testing it, however, I found another glitch in _create_config_files, unrelated to the usermode issue.  Namely, writing to $dest shouldn't be conditioned on $#lines >= 0.  If there are no lines to write, then updmap.cfg should still be written, with no map lines.  This can happen after the removal of packages, if there are no more packages left with map files.

Indeed, I was tracking this down myself this morning, but was derailed
by other things.

Thanks for the good analysis. I will fix it soon.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From karl at freefriends.org  Fri May  6 18:10:40 2016
From: karl at freefriends.org (Karl Berry)
Date: Fri, 6 May 2016 16:10:40 +0000
Subject: [tex-live] Pretest: perl coredumps
Message-ID: <201605061610.u46GAeYq012926@freefriends.org>

Norbert - back in
  http://tug.org/pipermail/tex-live/2016-April/038320.html
Nikola reported tlmgr -gui (=> Perl => Perl::Tk) crashing
on his FreeBSD.

Ignore the "download did not succeed" part of that message; what's
relevant is the "Bus error (core dumped)".  At that time, he was
pointing the pretest tlmgr to an old repo (via CTAN), but after more
testing, we (he) discovered the crash happens even after a simple
"Update all installed" when pointing to a pretest repo.  Thus, GUI mode
is basically useless on FreeBSD as it stands.  The update itself happens
ok, but it crashes afterward.  His 8mb log (with -vv) ends with:

--end of output of fmtutil-sys --no-error-if-no-engine=luajittex,mfluajit --byfmt lualollipop.Completed.
DD:TLPDB new: verify = 0
DD:pre_select = texlive.infra
[ends]

Not very illuminating.

Anyway, clearly it's a bug in Perl::Tk on that system, but the odd thing
is that this did not happen in our previous releases.  Can you guess at
what might have changed to trigger the bug?  The GUI printing of the
"(verified)" somehow?

No crashes in terminal mode; only GUI.

Nikola will surely be happy to send full logs or do any tests, if you
have any ideas.  (Nikola, please correct me if I got stuff wrong.)

Thanks,
Karl

From nikola.lecic at anthesphoria.net  Fri May  6 22:37:57 2016
From: nikola.lecic at anthesphoria.net (Nikola =?UTF-8?B?TGXEjWnEhw==?=)
Date: Fri, 6 May 2016 23:37:57 +0300
Subject: [tex-live] Pretest: perl coredumps
In-Reply-To: <201605061610.u46GAeYq012926@freefriends.org>
References: <201605061610.u46GAeYq012926@freefriends.org>
Message-ID: <201605062038.u46KcCYG098673@anthesphoria.net>

On Fri, 6 May 2016 16:10:40 +0000
  <201605061610.u46GAeYq012926 at freefriends.org>
  Karl Berry <karl at freefriends.org> wrote:

[...]
> Nikola will surely be happy to send full logs or do any tests, if you
> have any ideas.

Sure.

> Nikola, please correct me if I got stuff wrong.

Everything is correct. I'd just add that after successfully performed
'Update all installed' it crashes with 'Segmentation fault (core
dumped)'.

Unfortunately, it wouldn't be an easy task to reproduce the exact
environment of 2015 pretest. Anyway, since we still have (a little)
time, I'll continue to experiment in hope of finding some useful info.
This way, tlmgr GUI is indeed useless.

-- 
Nikola Le?i? = ?????? ?????
fingerprint : FEF3 66AF C90E EDC3 D878  7CDC 956D F4AB A377 1C9B
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 314 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160506/11ffff7c/attachment.bin>

From preining at logic.at  Sat May  7 00:46:21 2016
From: preining at logic.at (Norbert Preining)
Date: Sat, 7 May 2016 07:46:21 +0900
Subject: [tex-live] Pretest: perl coredumps
In-Reply-To: <201605061610.u46GAeYq012926@freefriends.org>
References: <201605061610.u46GAeYq012926@freefriends.org>
Message-ID: <20160506224621.GC27097@logic.at>

Hi Nikola, hi Karl,

On Fri, 06 May 2016, Karl Berry wrote:
> testing, we (he) discovered the crash happens even after a simple
> "Update all installed" when pointing to a pretest repo.  Thus, GUI mode

Very strange. 

Do you think this is reproducible in a virtual machine running
your vrsion of freebsd?

Another thing that comes to my mind is that you add printf statements
throught the code to find the place where it happens. I would do that ;-)

> is that this did not happen in our previous releases.  Can you guess at
> what might have changed to trigger the bug?  The GUI printing of the
> "(verified)" somehow?

Not the slightest idea, but the (verified) is probably not the case.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From preining at logic.at  Sat May  7 00:54:15 2016
From: preining at logic.at (Norbert Preining)
Date: Sat, 7 May 2016 07:54:15 +0900
Subject: [tex-live] Recent change to _create_config_files broke
 installation in user mode
In-Reply-To: <cff4508b-ca8a-ddfe-7d51-5f984bab3943@gmail.com>
References: <48F7D928-019A-4341-AD8E-07AABC353DBC@logic.at>
 <5728B4A3.4050402@gmail.com> <20160504075912.GA3951@wienerschnitzel>
 <4e23ece9-967f-34f8-92de-6f1d51e2e562@gmail.com>
 <20160505124817.GD27097@logic.at>
 <32f91de3-2fff-f5d8-bd55-21631926fa78@gmail.com>
 <20160505131532.GI27097@logic.at>
 <cd9d0dc1-e2b1-3f26-d8e8-0e83124f9fa6@gmail.com>
 <20160505154053.GJ27097@logic.at>
 <cff4508b-ca8a-ddfe-7d51-5f984bab3943@gmail.com>
Message-ID: <20160506225415.GD27097@logic.at>

On Fri, 06 May 2016, Ken Brown wrote:
> While testing it, however, I found another glitch in _create_config_files, unrelated to the usermode issue.  Namely, writing to $dest shouldn't be conditioned on $#lines >= 0.  If there are no lines to write, then updmap.cfg should still be written, with no map lines.  This can happen after the removal of packages, if there are no more packages left with map files.

Fixed for today's rebuild. I simply removed the $#lines >= 0 check,
as it is incorrect.

All the best

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From nikola.lecic at anthesphoria.net  Sat May  7 03:21:14 2016
From: nikola.lecic at anthesphoria.net (Nikola =?UTF-8?B?TGXEjWnEhw==?=)
Date: Sat, 7 May 2016 04:21:14 +0300
Subject: [tex-live] Pretest: perl coredumps
In-Reply-To: <20160506224621.GC27097@logic.at>
References: <201605061610.u46GAeYq012926@freefriends.org>
 <20160506224621.GC27097@logic.at>
Message-ID: <201605070121.u471LPjM001340@anthesphoria.net>

On Sat, 7 May 2016 07:46:21 +0900
  in <20160506224621.GC27097 at logic.at>
  Norbert Preining <preining at logic.at> wrote:

Hi Norbert,

> Very strange. 
> 
> Do you think this is reproducible in a virtual machine running
> your vrsion of freebsd?

I'm pretty sure it is. Right now I'm running 10.0/amd64, perl-5.16.3,
p5-Tk-804.031 (tried 804.032 and 804.033, no difference).

> Another thing that comes to my mind is that you add printf statements
> throught the code to find the place where it happens. I would do
> that ;-)

I'll try and report back.

-- 
Nikola Le?i? = ?????? ?????
fingerprint : FEF3 66AF C90E EDC3 D878  7CDC 956D F4AB A377 1C9B
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 314 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160507/7cc9a868/attachment.bin>

From nikola.lecic at anthesphoria.net  Sat May  7 18:21:00 2016
From: nikola.lecic at anthesphoria.net (Nikola =?UTF-8?B?TGXEjWnEhw==?=)
Date: Sat, 7 May 2016 19:21:00 +0300
Subject: [tex-live] Pretest: perl coredumps
In-Reply-To: <201605070121.u471LPjM001340@anthesphoria.net>
References: <201605061610.u46GAeYq012926@freefriends.org>
 <20160506224621.GC27097@logic.at>
 <201605070121.u471LPjM001340@anthesphoria.net>
Message-ID: <201605071621.u47GLBVr008670@anthesphoria.net>

On Sat, 7 May 2016 04:21:14 +0300
  in <201605070121.u471LPjM001340 at anthesphoria.net>
  Nikola Le?i? <nikola.lecic at anthesphoria.net> wrote:

> I'll try and report back.

Perl dumps core if exit is used with Tk. With tldie like this

sub tldie {
  tlwarn(@_);
  if ($::gui_mode) {
    Tk::exit(1);
  } else {
    exit(1);
  }
}

everything is ok. As far as I understand, this means that all exit's
should be replaced with some new subroutine (tlexit?), which
conditionally uses Tk::exit.

-- 
Nikola Le?i? = ?????? ?????
fingerprint : FEF3 66AF C90E EDC3 D878  7CDC 956D F4AB A377 1C9B
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 314 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160507/3864bd0d/attachment.bin>

From heiko.oberdiek at googlemail.com  Sat May  7 21:47:42 2016
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Sat, 7 May 2016 21:47:42 +0200
Subject: [tex-live] doc/generic/gobble/gobble.tex ->
 tex/generic/gobble/gobble.tex
Message-ID: <c5ff2b1f-e27f-f618-d301-6b04b8805144@googlemail.com>

Hello,

file `gobble.tex` of package `gobble` is misplaced, it should go to:
   TDS:tex/generic/gobble/gobble.tex

The file contains the implementation of the package.
The LaTeX package is just a wrapper, which uses
\input{gobble}. This fails, if `gobble.tex` is in the TDS:doc tree.

Yours sincerely
   Heiko Oberdiek

From karl at freefriends.org  Sun May  8 00:21:57 2016
From: karl at freefriends.org (Karl Berry)
Date: Sat, 7 May 2016 22:21:57 +0000
Subject: [tex-live] Pretest: perl coredumps
In-Reply-To: <201605071621.u47GLBVr008670@anthesphoria.net>
Message-ID: <201605072221.u47MLvEW008357@freefriends.org>

    all exit's
    should be replaced with some new subroutine (tlexit?), 

This does not sound right to me.  A particular version of Perl::Tk on a
particular system breaks exit, one of the most fundamental functions
there is.  I think it is worse to obfuscate the code than to require
people to use a different version (or a patch?)  than the broken one.
We use exit everywhere.  This problem has never come up before.  I'd
really much rather not "fix" it, since avoiding exit does not sound
maintainable to me ... -k


From karl at freefriends.org  Sun May  8 00:28:36 2016
From: karl at freefriends.org (Karl Berry)
Date: Sat, 7 May 2016 22:28:36 +0000
Subject: [tex-live] doc/generic/gobble/gobble.tex ->
 tex/generic/gobble/gobble.tex
In-Reply-To: <c5ff2b1f-e27f-f618-d301-6b04b8805144@googlemail.com>
Message-ID: <201605072228.u47MSa29009710@freefriends.org>

    file `gobble.tex` of package `gobble` is misplaced, it should go to:
       TDS:tex/generic/gobble/gobble.tex

Thanks Heiko, fixed for tonight.  -k

From nikola.lecic at anthesphoria.net  Sun May  8 00:40:31 2016
From: nikola.lecic at anthesphoria.net (Nikola =?UTF-8?B?TGXEjWnEhw==?=)
Date: Sun, 8 May 2016 01:40:31 +0300
Subject: [tex-live] Pretest: perl coredumps
In-Reply-To: <201605072221.u47MLvEW008357@freefriends.org>
References: <201605071621.u47GLBVr008670@anthesphoria.net>
 <201605072221.u47MLvEW008357@freefriends.org>
Message-ID: <201605072240.u47MekGe012415@anthesphoria.net>

On Sat, 7 May 2016 22:21:57 GMT
  <201605072221.u47MLvEW008357 at freefriends.org>
  Karl Berry <karl at freefriends.org> wrote:

>     all exit's
>     should be replaced with some new subroutine (tlexit?), 
> 
> This does not sound right to me.  A particular version of Perl::Tk on
> a particular system breaks exit, one of the most fundamental functions
> there is.  I think it is worse to obfuscate the code than to require
> people to use a different version (or a patch?)  than the broken one.
> We use exit everywhere.

I see. And there is not an explicit recommendation on whether to use it
or not (I mean, here: http://search.cpan.org/dist/Tk/pod/exit.pod).

> This problem has never come up before.

May I ask Solaris people to test if tlmgr gui crashes in the same way as
mine? Start pretest tlmgr gui and try to load the default repo.
(Just curious.)

-- 
Nikola Le?i? = ?????? ?????
fingerprint : FEF3 66AF C90E EDC3 D878  7CDC 956D F4AB A377 1C9B
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 314 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160508/dd33a4c3/attachment.bin>

From beebe at math.utah.edu  Sun May  8 01:56:50 2016
From: beebe at math.utah.edu (Nelson H. F. Beebe)
Date: Sat, 7 May 2016 17:56:50 -0600
Subject: [tex-live] Pretest: perl coredumps
In-Reply-To: <201605072240.u47MekGe012415@anthesphoria.net>
Message-ID: <CMM.0.96.0.1462665410.beebe@gamma.math.utah.edu>

Nikola =?UTF-8?B?TGXEjWnEhw==?= <nikola.lecic at anthesphoria.net>
writes today:

>> May I ask Solaris people to test if tlmgr gui crashes in the same way as
>> mine? Start pretest tlmgr gui and try to load the default repo.

I just tried that on our new Solaris 11.3 box:

	% tlmgr --version
	tlmgr revision 40844 (2016-05-03 01:46:44 +0200)
	tlmgr using installation: /usr/uumath/texlive/2016
	TeX Live (http://tug.org/texlive) version 2016

	% tlmgr gui
	tlmgr: Cannot load Tk, thus the GUI cannot be started!
	The Perl/Tk module is not shipped with the TeX Live installation.
	You have to install it to get the tlmgr GUI working.
	(INC = /usr/uumath/texlive/2016/texmf-dist/scripts/texlive /usr/uumath/texlive/2016/tlpkg
	/usr/perl5/site_perl/5.12/i86pc-solaris-64int /usr/perl5/site_perl/5.12 /usr/perl5/vendor_perl/5.12/i86pc-solaris-64int
	/usr/perl5/vendor_perl/5.12 /usr/perl5/5.12/lib/i86pc-solaris-64int /usr/perl5/5.12/lib .)

	See http://tug.org/texlive/distro.html#perltk for more details.
	Goodbye.

I got the same response on OpenIndiana (OpenIndiana Development
oi_151.1.9 X86 (powered by illumos): 17-Jan-2014).

On both Solaris 11.3 and OpenIndiana, I found the CSW repository
module pm_tk and installed it, then added /opt/csw/bin to the front of
PATH, and ran

	tlmgr gui

On both systems, a GUI window appears on my desktop.  I clicked the
"Update all installed" button on each, and both are now running
updates, with output to their original xterm windows, as well as to
the 4-line bottom of the tlmgr GUI window.




-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- University of Utah                    FAX: +1 801 581 4148                  -
- Department of Mathematics, 110 LCB    Internet e-mail: beebe at math.utah.edu  -
- 155 S 1400 E RM 233                       beebe at acm.org  beebe at computer.org -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe/ -
-------------------------------------------------------------------------------

From nikola.lecic at anthesphoria.net  Sun May  8 02:03:20 2016
From: nikola.lecic at anthesphoria.net (Nikola =?UTF-8?B?TGXEjWnEhw==?=)
Date: Sun, 8 May 2016 03:03:20 +0300
Subject: [tex-live] Pretest: perl coredumps
In-Reply-To: <CMM.0.96.0.1462665410.beebe@gamma.math.utah.edu>
References: <201605072240.u47MekGe012415@anthesphoria.net>
 <CMM.0.96.0.1462665410.beebe@gamma.math.utah.edu>
Message-ID: <201605080003.u4803YuR013115@anthesphoria.net>

On Sat, 7 May 2016 17:56:50 -0600
  in <CMM.0.96.0.1462665410.beebe at gamma.math.utah.edu>
  "Nelson H. F. Beebe" <beebe at math.utah.edu> wrote:

> On both systems, a GUI window appears on my desktop.  I clicked the
> "Update all installed" button on each, and both are now running
> updates, with output to their original xterm windows, as well as to
> the 4-line bottom of the tlmgr GUI window.

That works for me as well. The point is to do something that invokes
exit in gui mode, for example loading the default, non-pretest
repository. (From your description, it appears that you loaded a pretest
repository.)

-- 
Nikola Le?i? = ?????? ?????
fingerprint : FEF3 66AF C90E EDC3 D878  7CDC 956D F4AB A377 1C9B
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 314 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160508/3a1a6903/attachment.bin>

From preining at logic.at  Sun May  8 02:10:26 2016
From: preining at logic.at (Norbert Preining)
Date: Sun, 8 May 2016 09:10:26 +0900
Subject: [tex-live] Pretest: perl coredumps
In-Reply-To: <201605071621.u47GLBVr008670@anthesphoria.net>
References: <201605061610.u46GAeYq012926@freefriends.org>
 <20160506224621.GC27097@logic.at>
 <201605070121.u471LPjM001340@anthesphoria.net>
 <201605071621.u47GLBVr008670@anthesphoria.net>
Message-ID: <20160508001026.GH27097@logic.at>

On Sat, 07 May 2016, Nikola Le?i? wrote:
> Perl dumps core if exit is used with Tk. With tldie like this

AFAIR Tk::exit and exxit are the *same* ... but I might be wrong.

Can you get a backtrace? Or some debug output? ANything that
helps to see *where* the problem occurs.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From nikola.lecic at anthesphoria.net  Sun May  8 02:25:24 2016
From: nikola.lecic at anthesphoria.net (Nikola =?UTF-8?B?TGXEjWnEhw==?=)
Date: Sun, 8 May 2016 03:25:24 +0300
Subject: [tex-live] Pretest: perl coredumps
In-Reply-To: <20160508001026.GH27097@logic.at>
References: <201605061610.u46GAeYq012926@freefriends.org>
 <20160506224621.GC27097@logic.at>
 <201605070121.u471LPjM001340@anthesphoria.net>
 <201605071621.u47GLBVr008670@anthesphoria.net>
 <20160508001026.GH27097@logic.at>
Message-ID: <201605080025.u480PYbH013333@anthesphoria.net>

On Sun, 8 May 2016 09:10:26 +0900
Norbert Preining <preining at logic.at> wrote:

> On Sat, 07 May 2016, Nikola Le?i? wrote:
> > Perl dumps core if exit is used with Tk. With tldie like this
> 
> AFAIR Tk::exit and exxit are the *same* ... but I might be wrong.
> 
> Can you get a backtrace? Or some debug output? ANything that
> helps to see *where* the problem occurs.

Is this useful?

Loaded symbols for /libexec/ld-elf.so.1
#0  0x0000000803e793b9 in TkEventDeadWindow ()
   from /usr/local/lib/perl5/site_perl/5.16/mach/auto/Tk/Tk.so
[New Thread 801c06400 (LWP 100394/perl5.16.3)]
(gdb)

-- 
Nikola Le?i? = ?????? ?????
fingerprint : FEF3 66AF C90E EDC3 D878  7CDC 956D F4AB A377 1C9B
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 314 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160508/f92bdd43/attachment-0001.bin>

From preining at logic.at  Sun May  8 02:29:59 2016
From: preining at logic.at (Norbert Preining)
Date: Sun, 8 May 2016 09:29:59 +0900
Subject: [tex-live] Pretest: perl coredumps
In-Reply-To: <201605080025.u480PYbH013333@anthesphoria.net>
References: <201605061610.u46GAeYq012926@freefriends.org>
 <20160506224621.GC27097@logic.at>
 <201605070121.u471LPjM001340@anthesphoria.net>
 <201605071621.u47GLBVr008670@anthesphoria.net>
 <20160508001026.GH27097@logic.at>
 <201605080025.u480PYbH013333@anthesphoria.net>
Message-ID: <20160508002959.GK27097@logic.at>

On Sun, 08 May 2016, Nikola Le?i? wrote:
> #0  0x0000000803e793b9 in TkEventDeadWindow ()
>    from /usr/local/lib/perl5/site_perl/5.16/mach/auto/Tk/Tk.so

Hmm, as far as I see before all the exits there is a
	$mw->destroy
so that should not be a problem ... very puzzling.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From preining at logic.at  Sun May  8 02:36:02 2016
From: preining at logic.at (Norbert Preining)
Date: Sun, 8 May 2016 09:36:02 +0900
Subject: [tex-live] Pretest: perl coredumps
In-Reply-To: <20160508002959.GK27097@logic.at>
References: <201605061610.u46GAeYq012926@freefriends.org>
 <20160506224621.GC27097@logic.at>
 <201605070121.u471LPjM001340@anthesphoria.net>
 <201605071621.u47GLBVr008670@anthesphoria.net>
 <20160508001026.GH27097@logic.at>
 <201605080025.u480PYbH013333@anthesphoria.net>
 <20160508002959.GK27097@logic.at>
Message-ID: <20160508003602.GL27097@logic.at>

On Sun, 08 May 2016, Norbert Preining wrote:
> Hmm, as far as I see before all the exits there is a
> 	$mw->destroy
> so that should not be a problem ... very puzzling.

So I found that indeed Tk::exit should be used. But since we
are doing
	use Tk;
the normal exit should be Tk::exit.

I found one instance where the exit is forwarded to the tlmgr code base:
  # also delete the main window before we kill the process to 
  # make sure that Tk is happy (segfault on cmd line, email Taco)
  $mw->destroy;
  finish(0); 


The exit you found where the problem ocurs, is it in the tlmgr.pl
or tlmgrgui.pl code. If it is in the tlmgrgui.pl code, can you replace
it with an explicite call to Tk::exit and see if it changes something?

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From nikola.lecic at anthesphoria.net  Sun May  8 02:46:52 2016
From: nikola.lecic at anthesphoria.net (Nikola =?UTF-8?B?TGXEjWnEhw==?=)
Date: Sun, 8 May 2016 03:46:52 +0300
Subject: [tex-live] Pretest: perl coredumps
In-Reply-To: <20160508003602.GL27097@logic.at>
References: <201605061610.u46GAeYq012926@freefriends.org>
 <20160506224621.GC27097@logic.at>
 <201605070121.u471LPjM001340@anthesphoria.net>
 <201605071621.u47GLBVr008670@anthesphoria.net>
 <20160508001026.GH27097@logic.at>
 <201605080025.u480PYbH013333@anthesphoria.net>
 <20160508002959.GK27097@logic.at>	<20160508003602.GL27097@logic.at>
Message-ID: <201605080047.u480l284013547@anthesphoria.net>

On Sun, 8 May 2016 09:36:02 +0900
  in <20160508003602.GL27097 at logic.at>
  Norbert Preining <preining at logic.at> wrote:

> So I found that indeed Tk::exit should be used. But since we
> are doing
> 	use Tk;
> the normal exit should be Tk::exit.
> 
> I found one instance where the exit is forwarded to the tlmgr code
> base: # also delete the main window before we kill the process to 
>   # make sure that Tk is happy (segfault on cmd line, email Taco)
>   $mw->destroy;
>   finish(0); 
> 
> The exit you found where the problem ocurs, is it in the tlmgr.pl
> or tlmgrgui.pl code.

I experimented with the exit from TLUtils.pm (tldie), since it is
invoked when one tries to load a wrong repository.

> If it is in the tlmgrgui.pl code, can you replace it with an
> explicite call to Tk::exit and see if it changes something?

I'll try, but tell me please, what is the simplest way to invoke that
piece of code?

-- 
Nikola Le?i? = ?????? ?????
fingerprint : FEF3 66AF C90E EDC3 D878  7CDC 956D F4AB A377 1C9B
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 314 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160508/61cb8df2/attachment-0001.bin>

From preining at logic.at  Sun May  8 02:56:24 2016
From: preining at logic.at (Norbert Preining)
Date: Sun, 8 May 2016 09:56:24 +0900
Subject: [tex-live] Pretest: perl coredumps
In-Reply-To: <201605080047.u480l284013547@anthesphoria.net>
References: <201605061610.u46GAeYq012926@freefriends.org>
 <20160506224621.GC27097@logic.at>
 <201605070121.u471LPjM001340@anthesphoria.net>
 <201605071621.u47GLBVr008670@anthesphoria.net>
 <20160508001026.GH27097@logic.at>
 <201605080025.u480PYbH013333@anthesphoria.net>
 <20160508002959.GK27097@logic.at> <20160508003602.GL27097@logic.at>
 <201605080047.u480l284013547@anthesphoria.net>
Message-ID: <20160508005624.GM27097@logic.at>

On Sun, 08 May 2016, Nikola Le?i? wrote:
> I experimented with the exit from TLUtils.pm (tldie), since it is
> invoked when one tries to load a wrong repository.

So you do see a core dump *only* when the exit from tldie (TLUtils)
is used?

> I'll try, but tell me please, what is the simplest way to invoke that
> piece of code?

I don't understand? I asked you where *you* see the segfaults!

If it is only in 'tldie' then one can do something about it, probably.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From nikola.lecic at anthesphoria.net  Sun May  8 03:14:52 2016
From: nikola.lecic at anthesphoria.net (Nikola =?UTF-8?B?TGXEjWnEhw==?=)
Date: Sun, 8 May 2016 04:14:52 +0300
Subject: [tex-live] Pretest: perl coredumps
In-Reply-To: <20160508005624.GM27097@logic.at>
References: <201605061610.u46GAeYq012926@freefriends.org>
 <20160506224621.GC27097@logic.at>
 <201605070121.u471LPjM001340@anthesphoria.net>
 <201605071621.u47GLBVr008670@anthesphoria.net>
 <20160508001026.GH27097@logic.at>
 <201605080025.u480PYbH013333@anthesphoria.net>
 <20160508002959.GK27097@logic.at>	<20160508003602.GL27097@logic.at>
 <201605080047.u480l284013547@anthesphoria.net>
 <20160508005624.GM27097@logic.at>
Message-ID: <201605080115.u481F2uj013778@anthesphoria.net>

On Sun, 8 May 2016 09:56:24 +0900
  <20160508005624.GM27097 at logic.at>
  Norbert Preining <preining at logic.at> wrote:

> On Sun, 08 May 2016, Nikola Le?i? wrote:
> > I experimented with the exit from TLUtils.pm (tldie), since it is
> > invoked when one tries to load a wrong repository.
> 
> So you do see a core dump *only* when the exit from tldie (TLUtils)
> is used?

I explicitly tested only crashing with 'Load default'. I don't know if
other exit's are used with different actions (for example, core
dumping happens after tlmgr updates itself). I'll try and report back.

Or I can simply list the actions that lead to core dumping, and you'll
know what exit is used.

> > I'll try, but tell me please, what is the simplest way to invoke
> > that piece of code?
> 
> I don't understand? I asked you where *you* see the segfaults!

Sorry, I realised that I wrongly understood your question after
clicking 'Send'. 

It happens after this piece of code from tlmgr.pl is executed:
$remotetlpdb = TeXLive::TLPDB->new(root => $location, verify => 1);

-- 
Nikola Le?i? = ?????? ?????
fingerprint : FEF3 66AF C90E EDC3 D878  7CDC 956D F4AB A377 1C9B
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 314 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160508/ea943ba1/attachment.bin>

From markus.kohm at gmx.de  Sun May  8 10:43:08 2016
From: markus.kohm at gmx.de (Markus Kohm)
Date: Sun, 8 May 2016 10:43:08 +0200
Subject: [tex-live] How to add a key to the tlmgr gpg keyring
 persistently?
In-Reply-To: <1903672.oI5p9bNFam@mailjo.komascript.de>
References: <1990994.XHioZExbH6@mailjo.komascript.de>
 <20160505031137.GA6521@wienerschnitzel>
 <1903672.oI5p9bNFam@mailjo.komascript.de>
Message-ID: <2453311.aat1fRe0pH@x61s.fritz.box>

Am Donnerstag, 5. Mai 2016, 07:47:53 schrieb Markus Kohm:
> I'll test it ASAP.

Done. Works as expected. Thank you.

Markus
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 181 bytes
Desc: This is a digitally signed message part.
URL: <http://tug.org/pipermail/tex-live/attachments/20160508/34ebe48a/attachment-0001.bin>

From preining at logic.at  Sun May  8 13:59:39 2016
From: preining at logic.at (Norbert Preining)
Date: Sun, 8 May 2016 20:59:39 +0900
Subject: [tex-live] How to add a key to the tlmgr gpg keyring
 persistently?
In-Reply-To: <2453311.aat1fRe0pH@x61s.fritz.box>
References: <1990994.XHioZExbH6@mailjo.komascript.de>
 <20160505031137.GA6521@wienerschnitzel>
 <1903672.oI5p9bNFam@mailjo.komascript.de> <2453311.aat1fRe0pH@x61s.fritz.box>
Message-ID: <20160508115939.GO27097@logic.at>

> Done. Works as expected. Thank you.

Thanks for testing and reporting back.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From nikola.lecic at anthesphoria.net  Mon May  9 00:32:35 2016
From: nikola.lecic at anthesphoria.net (Nikola =?UTF-8?B?TGXEjWnEhw==?=)
Date: Mon, 9 May 2016 01:32:35 +0300
Subject: [tex-live] Pretest: perl coredumps
In-Reply-To: <20160508005624.GM27097@logic.at>
References: <201605061610.u46GAeYq012926@freefriends.org>
 <20160506224621.GC27097@logic.at>
 <201605070121.u471LPjM001340@anthesphoria.net>
 <201605071621.u47GLBVr008670@anthesphoria.net>
 <20160508001026.GH27097@logic.at>
 <201605080025.u480PYbH013333@anthesphoria.net>
 <20160508002959.GK27097@logic.at>	<20160508003602.GL27097@logic.at>
 <201605080047.u480l284013547@anthesphoria.net>
 <20160508005624.GM27097@logic.at>
Message-ID: <201605082232.u48MWnQE024818@anthesphoria.net>

On Sun, 8 May 2016 09:56:24 +0900
  <20160508005624.GM27097 at logic.at>
  Norbert Preining <preining at logic.at> wrote:

> If it is only in 'tldie' then one can do something about it, probably.

It appears it's not only in tldie. This code from tlmgrgui.pl
(mentioned by you earlier in this thread) also causes core dumping:

  # also delete the main window before we kill the process to 
  # make sure that Tk is happy (segfault on cmd line, email Taco)
  $mw->destroy;
  finish(0);

Changing 'finish(0);' to 'Tk::exit(0);' resolves the problem.

-- 
Nikola Le?i? = ?????? ?????
fingerprint : FEF3 66AF C90E EDC3 D878  7CDC 956D F4AB A377 1C9B
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 314 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160509/332a1dc7/attachment.bin>

From slewsys at gmail.com  Mon May  9 14:51:48 2016
From: slewsys at gmail.com (Andrew Moore)
Date: Mon, 9 May 2016 08:51:48 -0400
Subject: [tex-live] mirroring pretest mactex
Message-ID: <84ECEFFD-A06C-4D8E-9B86-95DC7E8012A2@gmail.com>

Hi,
On the TeX Live pretest page (http://tug.org/texlive/pretest.html), instructions are provided for excluding `mactex*'.  Without making it too easy for Mac folks, It might be worth adding a command for mirroring only mactex-basictex*:

rsync -a --delete --include="mactex-basictex*" --exclude="*? somemirror::/some/path/ /your/local/dir 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160509/adce8d77/attachment.html>

From usenet at siart.de  Mon May  9 16:52:50 2016
From: usenet at siart.de (Uwe Siart)
Date: Mon, 9 May 2016 16:52:50 +0200
Subject: [tex-live] tlmgr-gui.exe crashes on XP
Message-ID: <84inynxozh.fsf@siart.de>

When I try to start TeX Live Manager from the start menu it crashes on
an XP machine (i.e. an error window appears and the program aborts).

This is a minor issue to me (tlmgr command line user) and XP is
certainly a legacy OS. But wanted to let you know.

-- 
Uwe


From siepo at cybercomm.nl  Mon May  9 21:37:03 2016
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Mon, 9 May 2016 21:37:03 +0200
Subject: [tex-live] tlmgr-gui.exe crashes on XP
In-Reply-To: <84inynxozh.fsf@siart.de>
References: <84inynxozh.fsf@siart.de>
Message-ID: <20160509193703.GC25152@maki.thuis.internal>

On Mon, May 09, 2016 at 04:52:50PM +0200, Uwe Siart wrote:
> When I try to start TeX Live Manager from the start menu it crashes on
> an XP machine (i.e. an error window appears and the program aborts).
> 
> This is a minor issue to me (tlmgr command line user) and XP is
> certainly a legacy OS. But wanted to let you know.

Ok. Without promising an in--depth analysis I do have some questions:

- was this an admin install?
- was tlmgr-gui started with the same permissions as the installer?
- did the error box give any information such as an error number, or
  does it have a button for more information? In which case a
  screenshot might help.
- If you try to run tlmgr-gui from a command prompt, do you get e.g.
  backtrace information which you can show us?

-- 
Siep Kroonenberg

From usenet at siart.de  Mon May  9 21:56:05 2016
From: usenet at siart.de (Uwe Siart)
Date: Mon, 9 May 2016 21:56:05 +0200
Subject: [tex-live] tlmgr-gui.exe crashes on XP
References: <84inynxozh.fsf@siart.de>
 <20160509193703.GC25152@maki.thuis.internal>
Message-ID: <8437prknu2.fsf@siart.de>

Siep Kroonenberg <siepo at cybercomm.nl> writes:

> - was this an admin install?

Yes

> - was tlmgr-gui started with the same permissions as the installer?

Yes

> - did the error box give any information such as an error number, or
>   does it have a button for more information? In which case a
>   screenshot might help.

I posted drwtsn32.log below.

> - If you try to run tlmgr-gui from a command prompt, do you get e.g.
>   backtrace information which you can show us?

The same thing: error window and abort.


Microsoft (R) DrWtsn32
Copyright (C) 1985-2001 Microsoft Corp. Alle Rechte vorbehalten.



Anwendungsausnahme aufgetreten:
        Anwendung: C:\Programme\texlive\2016\bin\win32\tlmgr-gui.exe (pid=3172)
        Wann: 09.05.2016 @ 21:51:01.656
        Ausnahmenummer: c0000005 (Zugriffsverletzung)

*----> Systeminformationen <----*
        Computername: PEGASUS
        Benutzername: siart
        Terminalsitzungskennung: 0
        Prozessoranzahl: 4
        Prozessortyp: x86 Family 6 Model 37 Stepping 2
        Windows-Version: 5.1
        Aktuelles Build: 2600
        Service Pack: 3
        Aktueller Typ: Multiprocessor Free
        Firma: yz
        Besitzer: xy

*----> Taskliste <----*
   0 System Process
   4 System
2036 smss.exe
1136 csrss.exe
1180 winlogon.exe
1244 services.exe
1256 lsass.exe
1496 svchost.exe
1604 svchost.exe
1924 svchost.exe
1752 svchost.exe
1888 svchost.exe
 480 spoolsv.exe
 684 acs.exe
1132 svchost.exe
 572 GoogleCrashHandler.exe
1776 cvpnd.exe
1848 PresentationFontCache.exe
1736 jqs.exe
2136 sgvpn.exe
2184 ALsvc.exe
2240 svchost.exe
2620 ThpSrv.exe
2808 WMCore.exe
2936 sgpm.exe
3572 wmiapsrv.exe
3892 alg.exe
1920 swc_service.exe
 248 SavService.exe
3696 SAVAdminService.exe
3064 swi_service.exe
 804 Explorer.EXE
2712 ACU.exe
2784 RTHDCPL.EXE
 316 thpsrv.exe
 304 concentr.exe
3928 igfxtray.exe
 548 hkcmd.exe
3564 igfxpers.exe
1872 wfcrun32.exe
 816 sggui.exe
2756 fpassist.exe
2368 almon.exe
 400 ctfmon.exe
3632 sgcrypto.exe
3744 TSVNCache.exe
2796 TOTALCMD.EXE
1672 vpngui.exe
3024 emacs.exe
3172 tlmgr-gui.exe
2420 dwwin.exe
3968 drwtsn32.exe

*----> Modulliste <----*
(0000000000400000 - 000000000040b000: C:\Programme\texlive\2016\bin\win32\tlmgr-gui.exe
(000000005d450000 - 000000005d4ea000: C:\WINDOWS\system32\comctl32.dll
(000000006fa00000 - 000000006fa46000: c:\PROGRA~1\Sophos\SOPHOS~1\SOPHOS~1.DLL
(0000000076330000 - 000000007634d000: C:\WINDOWS\system32\IMM32.DLL
(0000000076bb0000 - 0000000076bbb000: C:\WINDOWS\system32\PSAPI.DLL
(00000000773a0000 - 00000000774a3000: C:\WINDOWS\WinSxS\x86_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.2600.6028_x-ww_61e65202\comctl32.dll
(00000000774b0000 - 00000000775ee000: C:\WINDOWS\system32\ole32.dll
(0000000077b10000 - 0000000077b32000: C:\WINDOWS\system32\Apphelp.dll
(0000000077bd0000 - 0000000077bd8000: C:\WINDOWS\system32\VERSION.dll
(0000000077be0000 - 0000000077c38000: C:\WINDOWS\system32\msvcrt.dll
(0000000077da0000 - 0000000077e4a000: C:\WINDOWS\system32\ADVAPI32.dll
(0000000077e50000 - 0000000077ee3000: C:\WINDOWS\system32\RPCRT4.dll
(0000000077ef0000 - 0000000077f39000: C:\WINDOWS\system32\GDI32.dll
(0000000077f40000 - 0000000077fb6000: C:\WINDOWS\system32\SHLWAPI.dll
(0000000077fc0000 - 0000000077fd1000: C:\WINDOWS\system32\Secur32.dll
(000000007c800000 - 000000007c908000: C:\WINDOWS\system32\kernel32.dll
(000000007c910000 - 000000007c9c9000: C:\WINDOWS\system32\ntdll.dll
(000000007e360000 - 000000007e3f1000: C:\WINDOWS\system32\USER32.dll
(000000007e670000 - 000000007ee91000: C:\WINDOWS\system32\SHELL32.DLL

*----> Statusabbild f?r Threadkennung 0x4b4 <----*

eax=00000020 ebx=0022fbd0 ecx=7ffdf000 edx=00000020 esi=0000002d edi=00000000
eip=7c91100b esp=0022fb6c ebp=0022fb74 iopl=0         nv up ei pl nz na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000202

*** ERROR: Symbol file could not be found.  Defaulted to export symbols for C:\WINDOWS\system32\ntdll.dll - 
Funktion: ntdll!RtlEnterCriticalSection
        7c910ff3 0000             add     [eax],al
        7c910ff5 0000             add     [eax],al
        7c910ff7 0000             add     [eax],al
        7c910ff9 0000             add     [eax],al
        7c910ffb 0000             add     [eax],al
        7c910ffd 0000             add     [eax],al
        7c910fff 00648b0d         add     [ebx+ecx*4+0xd],ah
        7c911003 1800             sbb     [eax],al
        7c911005 0000             add     [eax],al
        7c911007 8b542404         mov     edx,[esp+0x4]
FEHLER ->7c91100b 837a1400      cmp dword ptr [edx+0x14],0x0 ds:0023:00000034=????????
        7c91100f 754f             jnz   ntdll!RtlEnterCriticalSection+0x60 (7c911060)
        7c911011 f0ff4204         lock    inc dword ptr [edx+0x4]
        7c911015 7519             jnz   ntdll!RtlEnterCriticalSection+0x30 (7c911030)
        7c911017 8b4124           mov     eax,[ecx+0x24]
        7c91101a 89420c           mov     [edx+0xc],eax
        7c91101d c7420801000000   mov     dword ptr [edx+0x8],0x1
        7c911024 33c0             xor     eax,eax
        7c911026 c20400           ret     0x4
        7c911029 8da42400000000   lea     esp,[esp]
        7c911030 8b4124           mov     eax,[ecx+0x24]

*----> Stack Back Trace <----*
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for C:\WINDOWS\system32\msvcrt.dll - 
WARNING: Stack unwind information not available. Following frames may be wrong.
*** ERROR: Module load completed but symbols could not be loaded for C:\Programme\texlive\2016\bin\win32\tlmgr-gui.exe
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for C:\WINDOWS\system32\kernel32.dll - 
ChildEBP RetAddr  Args to Child              
0022fb74 77c1120f 00000000 00000000 0000002d ntdll!RtlEnterCriticalSection+0xb
0022fba8 00401934 0022fbd0 00000001 000000c8 msvcrt!fread+0x14
0022feb8 00401ccb 0040502c 0000005c 00000104 tlmgr-gui+0x1934
0022fed8 0040283d 00400000 00000000 000209b4 tlmgr-gui+0x1ccb
0022fef8 004013f2 00000001 003e2740 003e45b0 tlmgr-gui+0x283d
0022ffc0 7c816037 00320036 00350033 7ffd4000 tlmgr-gui+0x13f2
0022fff0 00000000 004014d0 00000000 78746341 kernel32!RegisterWaitForInputIdle+0x49

*----> Raw Stack Dump <----*
000000000022fb6c  0d b9 c0 77 20 00 00 00 - a8 fb 22 00 0f 12 c1 77  ...w ....."....w
000000000022fb7c  00 00 00 00 00 00 00 00 - 2d 00 00 00 d0 fb 22 00  ........-.....".
000000000022fb8c  50 45 be 77 80 fb 22 00 - 90 f7 22 00 e0 ff 22 00  PE.w.."..."...".
000000000022fb9c  94 5c c0 77 60 46 be 77 - ff ff ff ff b8 fe 22 00  .\.w`F.w......".
000000000022fbac  34 19 40 00 d0 fb 22 00 - 01 00 00 00 c8 00 00 00  4. at ...".........
000000000022fbbc  00 00 00 00 62 ea 93 7c - 01 00 00 00 f0 fb 22 00  ....b..|......".
000000000022fbcc  5e ea 93 7c 01 00 00 00 - 03 00 00 00 52 e9 93 7c  ^..|........R..|
000000000022fbdc  31 00 92 7c 06 00 00 00 - a8 07 3e 00 00 00 3e 00  1..|......>...>.
000000000022fbec  00 00 00 00 31 00 fd 7f - 3c fc 22 00 1c fc 22 00  ....1...<."...".
000000000022fbfc  c0 67 93 7c 50 fc 22 00 - d1 ba 00 00 5c fd 22 00  .g.|P.".....\.".
000000000022fc0c  a8 e8 93 7c 03 00 00 00 - 01 00 00 00 01 00 00 00  ...|............
000000000022fc1c  3b fc 22 00 01 00 00 00 - 94 fd 22 00 b0 fe 22 00  ;."......."...".
000000000022fc2c  0a 53 94 7c 28 22 92 7c - 94 fd 22 00 01 00 00 01  .S.|(".|..".....
000000000022fc3c  1c 01 00 00 05 00 00 00 - 01 00 00 00 28 0a 00 00  ............(...
000000000022fc4c  02 00 00 00 53 00 65 00 - 72 00 76 00 69 00 63 00  ....S.e.r.v.i.c.
000000000022fc5c  65 00 20 00 50 00 61 00 - 63 00 6b 00 20 00 33 00  e. .P.a.c.k. .3.
000000000022fc6c  00 00 00 00 00 00 00 00 - 00 00 00 00 00 00 00 00  ................
000000000022fc7c  00 00 00 00 00 00 00 00 - 00 00 00 00 00 00 00 00  ................
000000000022fc8c  00 00 00 00 00 00 00 00 - 00 00 00 00 43 00 3a 00  ............C.:.
000000000022fc9c  5c 00 50 00 72 00 6f 00 - 67 00 72 00 61 00 6d 00  \.P.r.o.g.r.a.m.



From reinhard.kotucha at web.de  Mon May  9 23:41:43 2016
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 9 May 2016 23:41:43 +0200
Subject: [tex-live] tlmgr-gui.exe crashes on XP
In-Reply-To: <8437prknu2.fsf@siart.de>
References: <84inynxozh.fsf@siart.de>
 <20160509193703.GC25152@maki.thuis.internal>	<8437prknu2.fsf@siart.de>
Message-ID: <22321.1047.68313.605780@zaphod.ms25.net>

On 2016-05-09 at 21:56:05 +0200, Uwe Siart wrote:

 >         Ausnahmenummer: c0000005 (Zugriffsverletzung)

means:
           exception number: c0000005 (access violation)

According to Wikipedia

  https://de.wikipedia.org/wiki/Schutzverletzung

the words "Zugriffsverletzung" and "Schutzverletzung" denote
segmentation faults, hence no good news at all.  But this obviously
means that file permissions are not the major problem.

Maybe Tk has problems on certain platforms but I fear that the only
way to find out _where_ it crashes is to run the program within a
debugger.  At least if it's not a Heisenbug.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From karl at freefriends.org  Tue May 10 00:31:24 2016
From: karl at freefriends.org (Karl Berry)
Date: Mon, 9 May 2016 22:31:24 +0000
Subject: [tex-live] mirroring pretest mactex
In-Reply-To: <84ECEFFD-A06C-4D8E-9B86-95DC7E8012A2@gmail.com>
Message-ID: <201605092231.u49MVO15002041@freefriends.org>

    It might be worth adding a command for mirroring only mactex-basictex*:

Thanks for the suggestion.  I agree about adding an example rsync, but I
did it for the full mactex, since I don't especially want to promote use
of basictex.  Basictex people should be able to figure it out easily
enough ... thanks, k.

From ziegenhagen at gmail.com  Tue May 10 06:04:39 2016
From: ziegenhagen at gmail.com (Uwe Ziegenhagen)
Date: Tue, 10 May 2016 06:04:39 +0200
Subject: [tex-live] tlmgr-gui.exe crashes on XP
In-Reply-To: <22321.1047.68313.605780@zaphod.ms25.net>
References: <84inynxozh.fsf@siart.de>
 <20160509193703.GC25152@maki.thuis.internal>	<8437prknu2.fsf@siart.de>
 <22321.1047.68313.605780@zaphod.ms25.net>
Message-ID: <CAML7JCh-KzHtw38jADA6MsBoEs0WfuJUs4YGiWVQMCMH2d6MvQ@mail.gmail.com>

The TeX Live manual says that it may or may not work on Windows 2000 and
XP, so I wouldn't spend more time on this. Everything below Windows 7 is
legacy OS and should not be used anymore.

Uwe

2016-05-09 23:41 GMT+02:00 Reinhard Kotucha <reinhard.kotucha at web.de>:

> On 2016-05-09 at 21:56:05 +0200, Uwe Siart wrote:
>
>  >         Ausnahmenummer: c0000005 (Zugriffsverletzung)
>
> means:
>            exception number: c0000005 (access violation)
>
> According to Wikipedia
>
>   https://de.wikipedia.org/wiki/Schutzverletzung
>
> the words "Zugriffsverletzung" and "Schutzverletzung" denote
> segmentation faults, hence no good news at all.  But this obviously
> means that file permissions are not the major problem.
>
> Maybe Tk has problems on certain platforms but I fear that the only
> way to find out _where_ it crashes is to run the program within a
> debugger.  At least if it's not a Heisenbug.
>
> Regards,
>   Reinhard
>
> --
> ------------------------------------------------------------------
> Reinhard Kotucha                            Phone: +49-511-3373112
> Marschnerstr. 25
> D-30167 Hannover                    mailto:reinhard.kotucha at web.de
> ------------------------------------------------------------------
>



-- 
Dr. Uwe Ziegenhagen
<http://www.uweziegenhagen.de>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160510/62402ff1/attachment.html>

From usenet at siart.de  Tue May 10 06:52:00 2016
From: usenet at siart.de (Uwe Siart)
Date: Tue, 10 May 2016 06:52:00 +0200
Subject: [tex-live] tlmgr-gui.exe crashes on XP
References: <84inynxozh.fsf@siart.de>
 <20160509193703.GC25152@maki.thuis.internal> <8437prknu2.fsf@siart.de>
 <22321.1047.68313.605780@zaphod.ms25.net>
 <CAML7JCh-KzHtw38jADA6MsBoEs0WfuJUs4YGiWVQMCMH2d6MvQ@mail.gmail.com>
Message-ID: <84y47iwm4v.fsf@siart.de>

Uwe Ziegenhagen <ziegenhagen at gmail.com> writes:

> The TeX Live manual says that it may or may not work on Windows 2000
> and XP, [...]

Well, perhaps that's mentioned like this somewhere -- I couldn't find it
on the quick, but rather:

,----[ 1.2 Operating system support ]
| As to Windows: Windows XP and later are supported. Windows 2000 will
| probably still mostly work.
`----

And I verfied that tlmgr-gui.exe runs without problems in TL15 final. So
perhaps the culprit is just an unnecessary change that can be reverted?

> Everything below Windows 7 is legacy OS and should not be used
> anymore.

Agreed. But in some (maybe rare) cases that's easier said than done.

-- 
Uwe


From norbert at preining.info  Tue May 10 08:36:05 2016
From: norbert at preining.info (Norbert Preining)
Date: Tue, 10 May 2016 15:36:05 +0900
Subject: [tex-live] tlmgr-gui.exe crashes on XP
In-Reply-To: <84y47iwm4v.fsf@siart.de>
References: <84inynxozh.fsf@siart.de>
 <20160509193703.GC25152@maki.thuis.internal> <8437prknu2.fsf@siart.de>
 <22321.1047.68313.605780@zaphod.ms25.net>
 <CAML7JCh-KzHtw38jADA6MsBoEs0WfuJUs4YGiWVQMCMH2d6MvQ@mail.gmail.com>
 <84y47iwm4v.fsf@siart.de>
Message-ID: <20160510063605.GH4108@logic.at>

On Tue, 10 May 2016, Uwe Siart wrote:
> And I verfied that tlmgr-gui.exe runs without problems in TL15 final. So
> perhaps the culprit is just an unnecessary change that can be reverted?

Hmmm, there haven't been any serious changes that would call for a
crash like this.

Maybe the new tlperl?

Could you do an experiment: Can you get/copy the tlperl directory 
from 2015 and replacing (after backup) the one in 2016?

Would be nice to hear whether this works or not.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From usenet at siart.de  Tue May 10 10:42:47 2016
From: usenet at siart.de (Uwe Siart)
Date: Tue, 10 May 2016 10:42:47 +0200
Subject: [tex-live] tlmgr-gui.exe crashes on XP
References: <84inynxozh.fsf@siart.de>
 <20160509193703.GC25152@maki.thuis.internal> <8437prknu2.fsf@siart.de>
 <22321.1047.68313.605780@zaphod.ms25.net>
 <CAML7JCh-KzHtw38jADA6MsBoEs0WfuJUs4YGiWVQMCMH2d6MvQ@mail.gmail.com>
 <84y47iwm4v.fsf@siart.de> <20160510063605.GH4108@logic.at>
Message-ID: <84r3dawbg8.fsf@siart.de>

Norbert Preining <norbert at preining.info> writes:

> Could you do an experiment: Can you get/copy the tlperl directory 
> from 2015 and replacing (after backup) the one in 2016?

This doesn't help. I renamed tlpkg/tlperl to tlpkg/tlperl-2016 and then
copied tlpkg/tlperl from 2015. The crash remains.

I tried out the same with tlmgr-gui.exe but this doesn't help either.

-- 
Uwe


From siepo at cybercomm.nl  Tue May 10 10:56:34 2016
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Tue, 10 May 2016 10:56:34 +0200
Subject: [tex-live] tlmgr-gui.exe crashes on XP
In-Reply-To: <CAML7JCh-KzHtw38jADA6MsBoEs0WfuJUs4YGiWVQMCMH2d6MvQ@mail.gmail.com>
References: <84inynxozh.fsf@siart.de>
 <20160509193703.GC25152@maki.thuis.internal> <8437prknu2.fsf@siart.de>
 <22321.1047.68313.605780@zaphod.ms25.net>
 <CAML7JCh-KzHtw38jADA6MsBoEs0WfuJUs4YGiWVQMCMH2d6MvQ@mail.gmail.com>
Message-ID: <20160510085634.GA2034@maki.thuis.internal>

On Tue, May 10, 2016 at 06:04:39AM +0200, Uwe Ziegenhagen wrote:
> The TeX Live manual says that it may or may not work on Windows 2000 and
> XP, so I wouldn't spend more time on this. Everything below Windows 7 is
> legacy OS and should not be used anymore.
> 
> Uwe
> 
> 2016-05-09 23:41 GMT+02:00 Reinhard Kotucha <reinhard.kotucha at web.de>:
> 
> > On 2016-05-09 at 21:56:05 +0200, Uwe Siart wrote:
> >
> >  >         Ausnahmenummer: c0000005 (Zugriffsverletzung)
> >
> > means:
> >            exception number: c0000005 (access violation)
> >
> > According to Wikipedia
> >
> >   https://de.wikipedia.org/wiki/Schutzverletzung
> >
> > the words "Zugriffsverletzung" and "Schutzverletzung" denote
> > segmentation faults, hence no good news at all.  But this obviously
> > means that file permissions are not the major problem.

On windows, error 5 access denied can also mean that you do not have
the right to access a file or registry key, maybe because of
permissions, but maybe because of a temporary lock on a file or
other resource.

Unfortunately this does not tell me what went wrong where.

Since we, as already mentioned, no longer support XP and the
command-line tlmgr provides a usable workaround I am not going to
spend more time on this, unless somebody finds a really good clue of
what went wrong.

> > Maybe Tk has problems on certain platforms but I fear that the only
> > way to find out _where_ it crashes is to run the program within a
> > debugger.  At least if it's not a Heisenbug.

I remember Heisenbugs with Windows 2000, which went away when
running Perl in debug mode.

-- 
Siep Kroonenberg

From siepo at cybercomm.nl  Tue May 10 11:30:03 2016
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Tue, 10 May 2016 11:30:03 +0200
Subject: [tex-live] tlmgr-gui.exe crashes on XP
In-Reply-To: <20160510085634.GA2034@maki.thuis.internal>
References: <84inynxozh.fsf@siart.de>
 <20160509193703.GC25152@maki.thuis.internal> <8437prknu2.fsf@siart.de>
 <22321.1047.68313.605780@zaphod.ms25.net>
 <CAML7JCh-KzHtw38jADA6MsBoEs0WfuJUs4YGiWVQMCMH2d6MvQ@mail.gmail.com>
 <20160510085634.GA2034@maki.thuis.internal>
Message-ID: <20160510093003.GB2034@maki.thuis.internal>

On Tue, May 10, 2016 at 10:56:34AM +0200, Siep Kroonenberg wrote:
> On Tue, May 10, 2016 at 06:04:39AM +0200, Uwe Ziegenhagen wrote:
> > The TeX Live manual says that it may or may not work on Windows 2000 and
> > XP, so I wouldn't spend more time on this. Everything below Windows 7 is
> > legacy OS and should not be used anymore.
> > 
> > Uwe
> > 
> > 2016-05-09 23:41 GMT+02:00 Reinhard Kotucha <reinhard.kotucha at web.de>:
> > 
> > > On 2016-05-09 at 21:56:05 +0200, Uwe Siart wrote:
> > >
> > >  >         Ausnahmenummer: c0000005 (Zugriffsverletzung)
> > >
> > > means:
> > >            exception number: c0000005 (access violation)
> > >
> > > According to Wikipedia
> > >
> > >   https://de.wikipedia.org/wiki/Schutzverletzung
> > >
> > > the words "Zugriffsverletzung" and "Schutzverletzung" denote
> > > segmentation faults, hence no good news at all.  But this obviously
> > > means that file permissions are not the major problem.
> 
> On windows, error 5 access denied can also mean that you do not have
> the right to access a file or registry key, maybe because of
> permissions, but maybe because of a temporary lock on a file or
> other resource.

But I admit that it somehow looks more like a segfault.

-- 
Siep Kroonenberg

From norbert at preining.info  Tue May 10 13:29:45 2016
From: norbert at preining.info (Norbert Preining)
Date: Tue, 10 May 2016 20:29:45 +0900
Subject: [tex-live] tlmgr-gui.exe crashes on XP
In-Reply-To: <84r3dawbg8.fsf@siart.de>
References: <84inynxozh.fsf@siart.de>
 <20160509193703.GC25152@maki.thuis.internal> <8437prknu2.fsf@siart.de>
 <22321.1047.68313.605780@zaphod.ms25.net>
 <CAML7JCh-KzHtw38jADA6MsBoEs0WfuJUs4YGiWVQMCMH2d6MvQ@mail.gmail.com>
 <84y47iwm4v.fsf@siart.de> <20160510063605.GH4108@logic.at>
 <84r3dawbg8.fsf@siart.de>
Message-ID: <20160510112945.GR4108@logic.at>

> This doesn't help. I renamed tlpkg/tlperl to tlpkg/tlperl-2016 and then
> copied tlpkg/tlperl from 2015. The crash remains.

Thanks for testing. Well, then I am out of ideas. Of course,
one could do many things like doing a git-over-svn checkout
from the last working (tl2015 code), and start a git bisect.
Shouldn't take too long as there are ot soo many commits 
regarding texlive.infra.

But then ... worth the trouble?

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From usenet at siart.de  Tue May 10 13:48:36 2016
From: usenet at siart.de (Uwe Siart)
Date: Tue, 10 May 2016 13:48:36 +0200
Subject: [tex-live] tlmgr-gui.exe crashes on XP
References: <84inynxozh.fsf@siart.de>
 <20160509193703.GC25152@maki.thuis.internal> <8437prknu2.fsf@siart.de>
 <22321.1047.68313.605780@zaphod.ms25.net>
 <CAML7JCh-KzHtw38jADA6MsBoEs0WfuJUs4YGiWVQMCMH2d6MvQ@mail.gmail.com>
 <84y47iwm4v.fsf@siart.de> <20160510063605.GH4108@logic.at>
 <84r3dawbg8.fsf@siart.de> <20160510112945.GR4108@logic.at>
Message-ID: <84mvnyw2uj.fsf@siart.de>

Norbert Preining <norbert at preining.info> writes:

> But then ... worth the trouble?

Certainly not.

-- 
Uwe


From rpspringuel at gmail.com  Wed May 11 03:16:51 2016
From: rpspringuel at gmail.com (Br. Samuel Springuel)
Date: Tue, 10 May 2016 21:16:51 -0400
Subject: [tex-live] Adding programs to shell_escape_commands
Message-ID: <e681b756-f6e2-22fb-96f7-1fbe28b963db@gmail.com>

So, now that gregorio will be in the shell_escape_commands list in 
TL2016 and beyond, I'm planning on modifying our installation 
instructions for TL2015 and earlier so that they instruct the user to 
add gregorio to the shell_escape_commands instead of using the 
--shell-escape option.  As part of that I'm considering writing a script 
which will do the leg work for those who are less comfortable with 
digging through their /usr directory (we have some Mac and Windows users 
that aren't comfortable with anything connected to the command-line). 
So far, I've got the basic steps for creating 
/usr/local/texlive/texmf-local/web2c/texmf.cnf (I'm starting with Mac 
and will translate for Windows later) and populating it with the 
existing shell_escape_commands as well as gregorio.

If /usr/local/texlive/texmf-local/web2c/texmf.cnf already exists then I 
don't want to just blindly over write it, but respect the current 
contents.  Now, so far, if all the file contains is the list of 
shell_escape_commands, then my script will respect that list and simply 
append gregorio to it.  My question is whether this is sufficient.  Can 
that file contain other information which I need to look for?




For reference, here is my script as I've written it thus far (obviously 
it needs to be run with sufficient privileges to write to 
/usr/local/texlive/texmf-local/web2c/texmf.cnf, usually root on a Mac):

mkdir -p /usr/local/texlive/texmf-local/web2c
temp=`kpsewhich --var-value=shell_escape_commands`"\\"
echo "shell_escape_commands = \\" > 
/usr/local/texlive/texmf-local/web2c/texmf.cnf
echo $temp >> /usr/local/texlive/texmf-local/web2c/texmf.cnf
echo "gregorio,\\" >> /usr/local/texlive/texmf-local/web2c/texmf.cnf
echo "" >> /usr/local/texlive/texmf-local/web2c/texmf.cnf
mktexlsr

-- 
?????????????????????????
Br. Samuel, OSB
St. Anselm?s Abbey
Washington, DC
(R. Padraic Springuel)

PAX ? ???????

From norbert at preining.info  Wed May 11 03:42:30 2016
From: norbert at preining.info (Norbert Preining)
Date: Wed, 11 May 2016 10:42:30 +0900
Subject: [tex-live] Adding programs to shell_escape_commands
In-Reply-To: <e681b756-f6e2-22fb-96f7-1fbe28b963db@gmail.com>
References: <e681b756-f6e2-22fb-96f7-1fbe28b963db@gmail.com>
Message-ID: <20160511014230.GA4108@logic.at>

On Tue, 10 May 2016, Br. Samuel Springuel wrote:
> If /usr/local/texlive/texmf-local/web2c/texmf.cnf already exists
> then I don't want to just blindly over write it, but respect the

And this is a good idea, you could seriously upset some users,
me including.

> sufficient.  Can that file contain other information which I need to
> look for?

That is a full fledged texmf.cnf file and thus *can* possible contain
everything that is there in a normal texmf.cnf file.

> mkdir -p /usr/local/texlive/texmf-local/web2c
> temp=`kpsewhich --var-value=shell_escape_commands`"\\"
> echo "shell_escape_commands = \\" >
> /usr/local/texlive/texmf-local/web2c/texmf.cnf
> echo $temp >> /usr/local/texlive/texmf-local/web2c/texmf.cnf
> echo "gregorio,\\" >> /usr/local/texlive/texmf-local/web2c/texmf.cnf
> echo "" >> /usr/local/texlive/texmf-local/web2c/texmf.cnf
> mktexlsr

Umpf, well, slight modifications might be useful.
What happens with a setting of shell_escape_commands in there?
Also,
	echo "shell_escape_commands = `...`,gregorio" >> ...
is a bit more concise.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From rpspringuel at gmail.com  Wed May 11 04:50:19 2016
From: rpspringuel at gmail.com (Br. Samuel Springuel)
Date: Tue, 10 May 2016 22:50:19 -0400
Subject: [tex-live] Adding programs to shell_escape_commands
In-Reply-To: <20160511014230.GA4108@logic.at>
References: <e681b756-f6e2-22fb-96f7-1fbe28b963db@gmail.com>
 <20160511014230.GA4108@logic.at>
Message-ID: <4933eafd-61a0-b73c-1cb0-2c89bb18891a@gmail.com>

On 2016-05-10 9:42 PM, Norbert Preining wrote:
> That is a full fledged texmf.cnf file and thus *can* possible contain
> everything that is there in a normal texmf.cnf file.
 > ...
> What happens with a setting of shell_escape_commands in there?


Okay, so my starting idea is insufficient to the task (I had a sneaking 
suspicion, but thought it safer to ask than assume).  IIUC, I need to 
take the time to check for the file, examine the contents, and use 
substitution when necessary.  Here's my revision to do all that:

mkdir -p /usr/local/texlive/texmf-local/web2c
touch /usr/local/texlive/texmf-local/web2c/texmf.cnf
if grep -q "^shell_escape_commands =.*gregorio.*" 
/usr/local/texlive/texmf-local/web2c/texmf.cnf; then
     echo "gregorio is already in the shell_escape_commands"
     echo "doing nothing"
elif grep -q "^shell_escape_commands =" 
/usr/local/texlive/texmf-local/web2c/texmf.cnf; then
     sed -i.temp '/^shell_escape_commands =/ s/$/gregorio,/' 
/usr/local/texlive/texmf-local/web2c/texmf.cnf
     mktexlsr
else
     echo "" >> /usr/local/texlive/texmf-local/web2c/texmf.cnf
     echo "shell_escape_commands = `kpsewhich 
--var-value=shell_escape_commands`gregorio," >> 
/usr/local/texlive/texmf-local/web2c/texmf.cnf
     echo "" >> /usr/local/texlive/texmf-local/web2c/texmf.cnf
     mktexlsr
fi


Does anyone see any potential problems here?
-- 
?????????????????????????
Br. Samuel, OSB
St. Anselm?s Abbey
Washington, DC
(R. Padraic Springuel)

PAX ? ???????

From samuel.c.p.neves at gmail.com  Wed May 11 07:09:02 2016
From: samuel.c.p.neves at gmail.com (Samuel Neves)
Date: Wed, 11 May 2016 06:09:02 +0100
Subject: [tex-live] Bugs in tlmgr-gui.c
Message-ID: <5c4e7935-176e-9a22-7515-200a75aafa19@gmail.com>

Hi,

I found the reason for the XP crash reported by Uwe earlier, and it's not Windows XP-related at all. Looking at tlmgr-gui.c in /trunk/Master/source/tlmgr-gui_UAC.zip, we see:

    char * get_tl_release() {
      // read release from release-texlive.txt in root of installation

      ...

      char relcontents[200];

      ...

      // read start of release file
      relfile = _wfopen( relfilename, L"rb" );
      i = fread( relcontents, 1, sizeof( relcontents ), relfile );
      fclose( relfile );

      ...

      cptr = strstr( relcontents, "version 2" );

      ...

      return cptr;

    }

Two things stand out here:

 - The function is returning a pointer to a dangling local variable, which is undefined behavior and was working before purely by luck.

 - If the file 'C:\texlive\2016\release-texlive.txt' does not exist---which was the case in my installation for some reason---it will try to fread out of a NULL pointer, and this was most likely the reason for the crash observed by Uwe.

Best regards,

Samuel Neves


From usenet at siart.de  Wed May 11 17:18:42 2016
From: usenet at siart.de (Uwe Siart)
Date: Wed, 11 May 2016 17:18:42 +0200
Subject: [tex-live] Bugs in tlmgr-gui.c
References: <5c4e7935-176e-9a22-7515-200a75aafa19@gmail.com>
Message-ID: <84a8jwmxm5.fsf@siart.de>

Samuel Neves <samuel.c.p.neves at gmail.com> writes:

>  - If the file 'C:\texlive\2016\release-texlive.txt' does not exist---which was
> the case in my installation for some reason---it will try to fread out of a NULL
> pointer, and this was most likely the reason for the crash observed by Uwe.

Great analysis, Simon! I can confirm that tlmgr-gui.exe runs perfectly
fine as soon as release-texlive.txt exists. I copied that file from tl15
and updated the version info. After that the crash was gone.

Perhaps release-texlive.txt does not (yet) exist because it's still
pretest.

-- 
Uwe


From usenet at siart.de  Wed May 11 18:01:11 2016
From: usenet at siart.de (Uwe Siart)
Date: Wed, 11 May 2016 18:01:11 +0200
Subject: [tex-live] Bugs in tlmgr-gui.c
References: <5c4e7935-176e-9a22-7515-200a75aafa19@gmail.com>
 <84a8jwmxm5.fsf@siart.de>
Message-ID: <8460ukmvnc.fsf@siart.de>

Uwe Siart <usenet at siart.de> writes:

> Great analysis, Simon!

Samuel! :-[

-- 
Uwe


From siepo at cybercomm.nl  Wed May 11 18:21:31 2016
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Wed, 11 May 2016 18:21:31 +0200
Subject: [tex-live] Bugs in tlmgr-gui.c
In-Reply-To: <5c4e7935-176e-9a22-7515-200a75aafa19@gmail.com>
References: <5c4e7935-176e-9a22-7515-200a75aafa19@gmail.com>
Message-ID: <20160511162131.GC1938@bitmuis.thuis.internal>

On Wed, May 11, 2016 at 06:09:02AM +0100, Samuel Neves wrote:
> Hi,
> 
> I found the reason for the XP crash reported by Uwe earlier, and it's not Windows XP-related at all. Looking at tlmgr-gui.c in /trunk/Master/source/tlmgr-gui_UAC.zip, we see:
> 
>     char * get_tl_release() {
>       // read release from release-texlive.txt in root of installation
> 
>       ...
> 
>       char relcontents[200];
> 
>       ...
> 
>       // read start of release file
>       relfile = _wfopen( relfilename, L"rb" );
>       i = fread( relcontents, 1, sizeof( relcontents ), relfile );
>       fclose( relfile );
> 
>       ...
> 
>       cptr = strstr( relcontents, "version 2" );
> 
>       ...
> 
>       return cptr;
> 
>     }
> 
> Two things stand out here:
> 
>  - The function is returning a pointer to a dangling local variable, which is undefined behavior and was working before purely by luck.
> 
>  - If the file 'C:\texlive\2016\release-texlive.txt' does not exist---which was the case in my installation for some reason---it will try to fread out of a NULL pointer, and this was most likely the reason for the crash observed by Uwe.

Thanks for finding the problem!

Norbert Preining suggested to me a better way to get the release.
Should be fixed soon.

-- 
Siep Kroonenberg

From karl at freefriends.org  Thu May 12 00:50:21 2016
From: karl at freefriends.org (Karl Berry)
Date: Wed, 11 May 2016 22:50:21 +0000
Subject: [tex-live] Bugs in tlmgr-gui.c
In-Reply-To: <84a8jwmxm5.fsf@siart.de>
Message-ID: <201605112250.u4BMoLPw026063@freefriends.org>

    Perhaps release-texlive.txt does not (yet) exist because it's still
    pretest.

It should exist, in the pretest and everywhere else.  It's in the
installer package (00texlive.installer.tlpsrc).  However, I see we never
put it into texlive.infra or any other normal package.  I added it to
texlive.infra.  We'll see if that breaks the world.

In any case, of course it is good to be robust against its nonexistence
and get the version info from texlive.tlpdb.  -k



From siepo at cybercomm.nl  Thu May 12 12:01:56 2016
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Thu, 12 May 2016 12:01:56 +0200
Subject: [tex-live] Bugs in tlmgr-gui.c
In-Reply-To: <20160511162131.GC1938@bitmuis.thuis.internal>
References: <5c4e7935-176e-9a22-7515-200a75aafa19@gmail.com>
 <20160511162131.GC1938@bitmuis.thuis.internal>
Message-ID: <20160512100156.GA1350@bitmuis.thuis.internal>

On Wed, May 11, 2016 at 06:21:31PM +0200, Siep Kroonenberg wrote:
> On Wed, May 11, 2016 at 06:09:02AM +0100, Samuel Neves wrote:
> > Hi,
> > 
> > I found the reason for the XP crash reported by Uwe earlier, and it's not Windows XP-related at all. Looking at tlmgr-gui.c in /trunk/Master/source/tlmgr-gui_UAC.zip, we see:
> 
> Thanks for finding the problem!
> 
> Norbert Preining suggested to me a better way to get the release.
> Should be fixed soon.

Just uploaded the new version (r. 41061)

-- 
Siep Kroonenberg

From Jim.Diamond at acadiau.ca  Thu May 12 14:53:23 2016
From: Jim.Diamond at acadiau.ca (Jim Diamond)
Date: Thu, 12 May 2016 09:53:23 -0300
Subject: [tex-live] problems with tl2016 pretest
Message-ID: <20160512125323.GA818@jdiamond-nb.acadiau.ca>

Hi,

this is just a report of a couple of issues with tl2016 pretest.
I d/l'ed install-tl-unx.tar.gz to install it on a 64-bit Linux system
and did
       ./install-tl -repository ftp://ftp.math.utah.edu/pub/texlive/tlpretest/

(1) After choosing what I wanted installed and telling it to install,
    I got
    Enter command: I
    Installing to: /usr/local/texlive/2016
    Installing [0001/3246, time/total: ??:??/??:??]: 12many [376k]
    TLDownload::get_file: response error: 501 Protocol scheme 'ftp' is not supported (for ftp://ftp.math.utah.edu/pub/texlive/tlpretest/archive/12many.tar.xz)
    TLUtils::download_file: persistent connection ok, but download failed: ftp://ftp.math.utah.edu/pub/texlive/tlpretest/archive/12many.tar.xz
    TLUtils::download_file: retrying with wget.
    TLUtils::download_file: retry with wget succeeded: ftp://ftp.math.utah.edu/pub/texlive/tlpretest/archive/12many.tar.xz
    TLDownload::get_file: response error: 501 Attempt to reload LWP/Protocol/ftp.pm aborted.
    Compilation failed in require (for ftp://ftp.math.utah.edu/pub/texlive/tlpretest/archive/12many.source.tar.xz)
    TLUtils::download_file: persistent connection ok, but download failed: ftp://ftp.math.utah.edu/pub/texlive/tlpretest/archive/12many.source.tar.xz
    TLUtils::download_file: retrying with wget.
    TLUtils::download_file: retry with wget succeeded: ftp://ftp.math.utah.edu/pub/texlive/tlpretest/archive/12many.source.tar.xz
    TLDownload::get_file: response error: 501 Attempt to reload LWP/Protocol/ftp.pm aborted.

    These error messages are not confidence-inspiring.
    Should I expect them?

    After leaving it run for a while it got happier (or, at least,
    quieter):
    Installing [0004/3246, time/total: 00:40/25:00:14]: ESIEEcv [137k]
    Installing [0005/3246, time/total: 00:44/23:57:38]: FAQ-en [4971k]
    Installing [0006/3246, time/total: 00:50/04:46:49]: GS1 [1100k]

    This eventually finished.

(2) I tried running updmap-sys and was told there was no such
    command.   Looking in /local/texlive/2016/bin/x86_64-linux/
    there are a lot of programs, but pdftex is a broken link and
    updmap-sys is not there at all.


I'm in the middle of reinstalling (hmmm, I'm beginning to feel like a
m$-windows user), but in case this report is of any interest to
anyone, I thought I'd send it along.


(3) The download speed is very slow.  I don't know if
    ftp.math.utah.edu throttles its connections or is just very busy,
    or something else makes the installation happen very slowly.
    But in any case, things are slow.  (I'm not complaining, just
    observing and reporting!)


                                Jim

From Jim.Diamond at acadiau.ca  Thu May 12 15:46:05 2016
From: Jim.Diamond at acadiau.ca (Jim Diamond)
Date: Thu, 12 May 2016 10:46:05 -0300
Subject: [tex-live] tl-install of 2016-pretest: litter in /tmp
Message-ID: <20160512134605.GA21405@jdiamond-nb.acadiau.ca>

Hi,

Linux 64-bit, tl2016 pretest:

tlinstall is filling up my /tmp with tmpdirs which it is not removing
when it is done with them.  At about 35% of the way through my
installation, I have well over 3000 of them.

Perhaps it will clean up after itself when it is done, but even if so,
I think it is a bit anti-social to leave them there for the duration.

Cheers.

                                Jim

From mojca.miklavec.lists at gmail.com  Thu May 12 16:24:16 2016
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 12 May 2016 16:24:16 +0200
Subject: [tex-live] problems with tl2016 pretest
In-Reply-To: <20160512125323.GA818@jdiamond-nb.acadiau.ca>
References: <20160512125323.GA818@jdiamond-nb.acadiau.ca>
Message-ID: <CALBOmsYPVFpCe-etxathSF4zVy0mKALv_8GAHOsWY=5iRE_APw@mail.gmail.com>

On 12 May 2016 at 14:53, Jim Diamond wrote:
>
> (3) The download speed is very slow.  I don't know if
>     ftp.math.utah.edu throttles its connections or is just very busy,
>     or something else makes the installation happen very slowly.
>     But in any case, things are slow.  (I'm not complaining, just
>     observing and reporting!)

You could check if using one of the European mirrors helps.

You could also try to fetch the files with rsync first and then
install from the tarballs on the filesystem.

Mojca

From beebe at math.utah.edu  Thu May 12 16:39:59 2016
From: beebe at math.utah.edu (Nelson H. F. Beebe)
Date: Thu, 12 May 2016 08:39:59 -0600
Subject: [tex-live] problems with tl2016 pretest
In-Reply-To: <20160512125323.GA818@jdiamond-nb.acadiau.ca>
Message-ID: <CMM.0.96.0.1463063999.beebe@gamma.math.utah.edu>

Jim Diamond <Jim.Diamond at acadiau.ca> asks on Thu, 12 May 2016 09:53:23 -0300

>> The download speed is very slow.  I don't know if
>> ftp.math.utah.edu throttles its connections or is just very busy,

No, we do not throttle connections, and our uplink should be quite
fast.  If you can run

	traceroute www.math.utah.edu

from your system, that should tell you how many router hops it takes,
and which ones are the bandwidth bottlenecks.

I just made a test from a guest account that I have at another
university in the state of California:

	wget http://www.math.utah.edu/pub/texlive/bin/i386-freebsd-9.1.tar.xz
	...
	100%[======================================>] 35,882,840  29.1MB/s   in 1.2s   


	wget ftp://ftp.math.utah.edu/pub/texlive/bin/i386-freebsd-9.1.tar.xz
	...
	100%[======================================>] 35,882,840  33.7MB/s   in 1.0s   

At the moment, that is the only user account that I have outside the
state of Utah.

Perhaps others on this list could report download times for the above
URLs (identical filesystem locations, but different protocols).

>From my home system (Comcast cable-modem connection), just 5km south
of my office on campus, I got transfer rates of 0.717MB/s and
0.419MB/s, about 50 to 100 times slower than the inter-state
inter-university download.  That is just a reflection of the poor
Internet service speeds that we have to put up with at homes in Salt
Lake City from our only two major providers: cable and telephone DSL.
Most local users report higher bandwidth from cable than from DSL.

Google Fiber is coming to our city, but deployment has not yet reached
my neighborhood, and I pay $90/month for my current service.

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- University of Utah                    FAX: +1 801 581 4148                  -
- Department of Mathematics, 110 LCB    Internet e-mail: beebe at math.utah.edu  -
- 155 S 1400 E RM 233                       beebe at acm.org  beebe at computer.org -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe/ -
-------------------------------------------------------------------------------

From beebe at math.utah.edu  Thu May 12 16:51:07 2016
From: beebe at math.utah.edu (Nelson H. F. Beebe)
Date: Thu, 12 May 2016 08:51:07 -0600
Subject: [tex-live] problems with tl2016 pretest
In-Reply-To: <CALBOmsYPVFpCe-etxathSF4zVy0mKALv_8GAHOsWY=5iRE_APw@mail.gmail.com>
Message-ID: <CMM.0.96.0.1463064667.beebe@gamma.math.utah.edu>

Mojca Miklavec <mojca.miklavec.lists at gmail.com> writes on Thu, 12 May 2016 16:24:16 +0200
about Jim Diamond's <Jim.Diamond at acadiau.ca> report of slow download times
from ftp.math.utah.edu:

>> You could also try to fetch the files with rsync first and then
>> install from the tarballs on the filesystem.

We DO support rsync for access to important software collections:

% rsync rsync://ftp.math.utah.edu/
CTAN            all of ftp://ctan.tug.org/ (huge)
bib             TeX User Group bibliography archive
bibnet          BibNet Project bibliography archive
historic        archive of past TeX distributions and files
texlive         all of ftp://tug.org/texlive/ (huge)
TUHS            The Unix Heritage Society (TUHS) mirror

>From my home system on cable modem connection, I just did

	rsync -av rsync://ftp.math.utah.edu/texlive/bin/i386-freebsd-9.1.tar.xz .
	...
	sent 43 bytes  received 35,891,702 bytes  401,025.08 bytes/sec
	total size is 35,882,840  speedup is 1.00

That speed is comparable to the speed I reported for "wget ftp:...."
a few minutes ago.  I did the same rsync command at the California
site, and got 10.25MB/sec, about three times slower than wget with
http:... or ftp:.... URLs.

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- University of Utah                    FAX: +1 801 581 4148                  -
- Department of Mathematics, 110 LCB    Internet e-mail: beebe at math.utah.edu  -
- 155 S 1400 E RM 233                       beebe at acm.org  beebe at computer.org -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe/ -
-------------------------------------------------------------------------------

From zdenek.wagner at gmail.com  Thu May 12 16:52:04 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 12 May 2016 16:52:04 +0200
Subject: [tex-live] problems with tl2016 pretest
In-Reply-To: <CMM.0.96.0.1463063999.beebe@gamma.math.utah.edu>
References: <20160512125323.GA818@jdiamond-nb.acadiau.ca>
 <CMM.0.96.0.1463063999.beebe@gamma.math.utah.edu>
Message-ID: <CAC1phybnpxernvbX_h1Gkii=k3==T5+N5p+Gg6h3DFDBfuMzJw@mail.gmail.com>

2016-05-12 16:39 GMT+02:00 Nelson H. F. Beebe <beebe at math.utah.edu>:

> Jim Diamond <Jim.Diamond at acadiau.ca> asks on Thu, 12 May 2016 09:53:23
> -0300
>
> >> The download speed is very slow.  I don't know if
> >> ftp.math.utah.edu throttles its connections or is just very busy,
>
> No, we do not throttle connections, and our uplink should be quite
> fast.  If you can run
>
>         traceroute www.math.utah.edu
>
> from your system, that should tell you how many router hops it takes,
> and which ones are the bandwidth bottlenecks.
>
> I just made a test from a guest account that I have at another
> university in the state of California:
>
>         wget
> http://www.math.utah.edu/pub/texlive/bin/i386-freebsd-9.1.tar.xz
>         ...
>         100%[======================================>] 35,882,840
> 29.1MB/s   in 1.2s
>
>
>         wget
> ftp://ftp.math.utah.edu/pub/texlive/bin/i386-freebsd-9.1.tar.xz
>         ...
>         100%[======================================>] 35,882,840
> 33.7MB/s   in 1.0s
>
> At the moment, that is the only user account that I have outside the
> state of Utah.
>

Here in Prague, 50s via http, 10s via ftp. The bottleneck seems to be in
France as reported by traceroute. The second wget via http succeeded within
20s but the file might be cached in one of the squid's on the way.

>
> Perhaps others on this list could report download times for the above
> URLs (identical filesystem locations, but different protocols).
>
> >From my home system (Comcast cable-modem connection), just 5km south
> of my office on campus, I got transfer rates of 0.717MB/s and
> 0.419MB/s, about 50 to 100 times slower than the inter-state
> inter-university download.  That is just a reflection of the poor
> Internet service speeds that we have to put up with at homes in Salt
> Lake City from our only two major providers: cable and telephone DSL.
> Most local users report higher bandwidth from cable than from DSL.
>
> Google Fiber is coming to our city, but deployment has not yet reached
> my neighborhood, and I pay $90/month for my current service.
>



Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz



>
>
> -------------------------------------------------------------------------------
> - Nelson H. F. Beebe                    Tel: +1 801 581 5254
>     -
> - University of Utah                    FAX: +1 801 581 4148
>     -
> - Department of Mathematics, 110 LCB    Internet e-mail:
> beebe at math.utah.edu  -
> - 155 S 1400 E RM 233                       beebe at acm.org
> beebe at computer.org -
> - Salt Lake City, UT 84112-0090, USA    URL:
> http://www.math.utah.edu/~beebe/ -
>
> -------------------------------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160512/83358333/attachment.html>

From dbitouze at wanadoo.fr  Thu May 12 17:05:42 2016
From: dbitouze at wanadoo.fr (=?utf-8?Q?Denis_Bitouz=C3=A9?=)
Date: Thu, 12 May 2016 17:05:42 +0200
Subject: [tex-live] problems with tl2016 pretest
References: <20160512125323.GA818@jdiamond-nb.acadiau.ca>
 <CMM.0.96.0.1463063999.beebe@gamma.math.utah.edu>
 <CAC1phybnpxernvbX_h1Gkii=k3==T5+N5p+Gg6h3DFDBfuMzJw@mail.gmail.com>
Message-ID: <m3k2izpb95.fsf@example.com>

Le 12/05/16 ? 16h52, Zdenek Wagner a ?crit :

> Here in Prague, 50s via http, 10s via ftp. The bottleneck seems to be
> in France as reported by traceroute. The second wget via http
> succeeded within 20s but the file might be cached in one of the
> squid's on the way.

Here in Dunkirk (north of France):

- http : 35s
- ftp  :  7s
-- 
Denis


From Jim.Diamond at acadiau.ca  Thu May 12 18:06:46 2016
From: Jim.Diamond at acadiau.ca (Jim Diamond)
Date: Thu, 12 May 2016 13:06:46 -0300
Subject: [tex-live] problems with tl2016 pretest
In-Reply-To: <CMM.0.96.0.1463064667.beebe@gamma.math.utah.edu>
 <CMM.0.96.0.1463063999.beebe@gamma.math.utah.edu>
 <CALBOmsYPVFpCe-etxathSF4zVy0mKALv_8GAHOsWY=5iRE_APw@mail.gmail.com>
Message-ID: <20160512160646.GB7521@jdiamond-nb.acadiau.ca>

Thanks to everyone who responded.

On Thu, May 12, 2016 at 16:24 (+0200), Mojca Miklavec wrote:

> On 12 May 2016 at 14:53, Jim Diamond wrote:

>> (3) The download speed is very slow.  I don't know if
>> ftp.math.utah.edu throttles its connections or is just very busy,
>> or something else makes the installation happen very slowly.
>> But in any case, things are slow.  (I'm not complaining, just
>> observing and reporting!)

> You could check if using one of the European mirrors helps.
Thanks.  That is possible further away, but you never know.

I am now nearing the end of my current attempt, so if I am lucky I
won't need to try.

> You could also try to fetch the files with rsync first and then
> install from the tarballs on the filesystem.
True.  (But in the interest in contributing to "test the system before
it goes live" I'm betting most "users" will use tl-install.)



On Thu, May 12, 2016 at 08:39 (-0600), Nelson H. F. Beebe wrote:

> Jim Diamond <Jim.Diamond at acadiau.ca> asks on Thu, 12 May 2016 09:53:23 -0300

>>> The download speed is very slow.  I don't know if
>>> ftp.math.utah.edu throttles its connections or is just very busy,

> No, we do not throttle connections, and our uplink should be quite
> fast.  If you can run

> 	traceroute www.math.utah.edu

> from your system, that should tell you how many router hops it takes,
> and which ones are the bandwidth bottlenecks.

25 hops.  No obvious bottlenecks, at least as far as I can see from
the RTTs.

> I just made a test from a guest account that I have at another
> university in the state of California:

> 	wget http://www.math.utah.edu/pub/texlive/bin/i386-freebsd-9.1.tar.xz
> 	...
> 	100%[======================================>] 35,882,840  29.1MB/s   in 1.2s   


> 	wget ftp://ftp.math.utah.edu/pub/texlive/bin/i386-freebsd-9.1.tar.xz
> 	...
> 	100%[======================================>] 35,882,840  33.7MB/s   in 1.0s

Woof!  I'm working from home today, but I just tried from my
university, which has both a good commercial connection and a fast
research net connection (CA*net, similar to Internet2 in the US and
other high-performance networks in other places).

It took 64 seconds to d/l that (http) from my university.  And there
are only 17 hops there, and traceroute shows that the connection is
via CA*net to internet2.

I tried ftp from work and this time got 49 seconds.  Better, and yet
not very good.


> From my home system (Comcast cable-modem connection), just 5km south
> of my office on campus, I got transfer rates of 0.717MB/s and
> 0.419MB/s, about 50 to 100 times slower than the inter-state
> inter-university download.  That is just a reflection of the poor
> Internet service speeds that we have to put up with at homes in Salt
> Lake City from our only two major providers: cable and telephone DSL.
> Most local users report higher bandwidth from cable than from DSL.
Well, I will be near the last in line to defend my ISP, but while they
are not great, nor are they terrible.  I just tried again with ftp,
and this time got
100%[======================================>] 35,882,840  1.07MB/s   in 41s    

> Google Fiber is coming to our city, but deployment has not yet
> reached my neighborhood, and I pay $90/month for my current service.
I have fiber to my home, but that just means the slowdown isn't in my
house :-)



Certainly the wget was much faster than tl-install picking up the
individual packages.

So maybe my question should have been:

Q: why is install-tl making such limited use of my bandwidth?

Looking at a program I use to monitor things on my machine (procmeter3),
I see that when I was grabbing the files with wget (both http and ftp)
I was getting way more data/second than when tl-install was running.

Looking at the tl-install log, I see things like this:
Installing [3215/3246, time/total: 03:24:55/03:25:49]: xypic-tut-pt [221k]
Installing [3216/3246, time/total: 03:24:58/03:25:51]: xytree [229k]
Installing [3217/3246, time/total: 03:25:01/03:25:53]: yafoot [266k]
Installing [3218/3246, time/total: 03:25:06/03:25:56]: yagusylo [1665k]
Installing [3219/3246, time/total: 03:25:11/03:25:51]: yannisgr [65k]
so there are "large" times between downloads.  Perhaps tl-install is
taking coffee breaks between each package.  (I am using a laptop with
Intel(R) Core(TM) i7-2760QM CPU @ 2.40GHz, 8 GB RAM, and a fast disk
(as spinny disks go).  Not super top of the line, but not an 80386
either.)

Oh well... at least this time I got pdftex.  :-)


Cheers.
                                Jim

From beebe at math.utah.edu  Thu May 12 21:39:41 2016
From: beebe at math.utah.edu (Nelson H. F. Beebe)
Date: Thu, 12 May 2016 13:39:41 -0600
Subject: [tex-live] more on bandwidth from ftp.math.utah.edu and
 www.math.utah.edu
Message-ID: <CMM.0.96.0.1463081981.beebe@gamma.math.utah.edu>

I've just updated some performance plots and dropped them at

	http://www.math.utah.edu/pub/texlive/ftp.math.utah.edu.pdf
	http://www.math.utah.edu/pub/texlive/www.math.utah.edu.pdf

They show 5.4 years of traffic outbound from those two hosts.

Our current connections are:

	machine-room servers to building switch:	 1Gb/s
	building switch to campus backbone:		10Gb/s
	UofUtah campus backbone to Internet:		40Gb/s

The bottleneck in our building cannot be resolved until a major
hardware upgrade of the central fileserver, possibly this summer.

Still, 1Gb/s is about 100MB/s, or 360GB/hr, or 8640GB/day, as a
maximum possible, whereas our peak outbound FTP is rarely 500GB/day,
and usually about 300GB/day.

What we don't yet have is minute-by-minute network bandwidth reports;
I'm looking into whether data are available to produce them.

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- University of Utah                    FAX: +1 801 581 4148                  -
- Department of Mathematics, 110 LCB    Internet e-mail: beebe at math.utah.edu  -
- 155 S 1400 E RM 233                       beebe at acm.org  beebe at computer.org -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe/ -
-------------------------------------------------------------------------------

From karl at freefriends.org  Thu May 12 23:51:24 2016
From: karl at freefriends.org (Karl Berry)
Date: Thu, 12 May 2016 21:51:24 +0000
Subject: [tex-live] problems with tl2016 pretest
In-Reply-To: <20160512125323.GA818@jdiamond-nb.acadiau.ca>
Message-ID: <201605122151.u4CLpOET015679@freefriends.org>

Hi Jim,

Thanks for trying things out, sorry for the problems.

    Looking in /local/texlive/2016/bin/x86_64-linux/
        there are a lot of programs, but pdftex is a broken link and
        updmap-sys is not there at all.

In theory, the installation should abort when the download of a package
fails.  I guess that failed install directory is gone now, but if the
same failures happen again, please take a look at the install-tl.log
file at the top-level of the install directory and see if there are any
pointers in there.

The installer code doesn't intentionally slow down any downloads, as far
as I can see.  My only suggestion would be to try a different mirror
next time to see if it makes a difference.

    TLDownload::get_file: response error: 501 Protocol scheme 'ftp' is not supported (for ftp://ftp.math.utah.edu/pub/texlive/tlpretest/archive/12many.tar.xz)
    ...
    TLDownload::get_file: response error: 501 Attempt to reload LWP/Protocol/ftp.pm aborted.

It looks like your Perl installation is messed up somehow.  -k

From rod.yager at mq.edu.au  Thu May 12 23:58:51 2016
From: rod.yager at mq.edu.au (Rod Yager)
Date: Thu, 12 May 2016 21:58:51 +0000
Subject: [tex-live] problems with tl2016 pretest
Message-ID: <55569F48-6C9F-44AA-A0C2-AABA36DA6C08@mq.edu.au>

Installing [3219/3246, time/total: 03:25:11/03:25:51]: yannisgr [65k]
so there are "large" times between downloads.  Perhaps tl-install is
taking coffee breaks between each package.  (I am using a laptop with


No. tl-install isn?t taking coffee breaks. It?s doing more than just downloading the package. It?s also installing it at the same time.
Once the tl-install has downloaded and installed the packages, the only tasks left are configuration tasks, (eg. updmap-sys, mktexlsr, creation of formats.)

Rod



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160512/b569c5ee/attachment.html>

From alessi at robertalessi.net  Fri May 13 06:32:40 2016
From: alessi at robertalessi.net (Robert Alessi)
Date: Fri, 13 May 2016 06:32:40 +0200
Subject: [tex-live] installation of kpathsea and texlive-docindex failed
Message-ID: <20160513043239.GA3916@riseup.net>

Hi,

I just got these on a "tlmgr update --all":
	[18/61, 06:10/13:12] update: kpathsea [1139k] (40768 -> 41019)
	... TLUtils::check_file: removing
	/tmp/lEmipxOd06/kpathsea.tar.xz, sizes differ:
	TLUtils::check_file:   TL=30476, arg=30472
	TLPDB::_install_package: downloading did not succeed
	tlmgr: Installation of new version of kpathsea did fail,
	trying to unwind.
	tlmgr: Restoring old package state succeeded.
	done

	[36/61, 10:59/13:26] update: texlive-msg-translations [110k]
	(40944 -> 40996) ... TLUtils::check_file: removing
	/tmp/ra7i773_b2/texlive-msg-translations.tar.xz, sizes differ:
	TLUtils::check_file:   TL=112304, arg=112264
	TLPDB::_install_package: downloading did not succeed
	tlmgr: Installation of new version of texlive-msg-translations
	did fail, trying to unwind.
	tlmgr: Restoring old package state succeeded.
	done

But I'm not worried, I'll try again later on.

Best,

Robert


From alessi at robertalessi.net  Fri May 13 06:37:50 2016
From: alessi at robertalessi.net (Robert Alessi)
Date: Fri, 13 May 2016 06:37:50 +0200
Subject: [tex-live] installation of kpathsea and texlive-docindex failed
In-Reply-To: <20160513043239.GA3916@robertalessi.net>
References: <20160513043239.GA3916@robertalessi.net>
Message-ID: <20160513043750.GB3916@riseup.net>

Hi,

I just tried again: everything went fine.

Robert

On Fri, May 13, 2016 at 06:32:39AM +0200, Robert Alessi wrote:
> Hi,
> 
> I just got these on a "tlmgr update --all":
> 	[18/61, 06:10/13:12] update: kpathsea [1139k] (40768 -> 41019)
> 	... TLUtils::check_file: removing
> 	/tmp/lEmipxOd06/kpathsea.tar.xz, sizes differ:
> 	TLUtils::check_file:   TL=30476, arg=30472
> 	TLPDB::_install_package: downloading did not succeed
> 	tlmgr: Installation of new version of kpathsea did fail,
> 	trying to unwind.
> 	tlmgr: Restoring old package state succeeded.
> 	done
> 
> 	[36/61, 10:59/13:26] update: texlive-msg-translations [110k]
> 	(40944 -> 40996) ... TLUtils::check_file: removing
> 	/tmp/ra7i773_b2/texlive-msg-translations.tar.xz, sizes differ:
> 	TLUtils::check_file:   TL=112304, arg=112264
> 	TLPDB::_install_package: downloading did not succeed
> 	tlmgr: Installation of new version of texlive-msg-translations
> 	did fail, trying to unwind.
> 	tlmgr: Restoring old package state succeeded.
> 	done
> 
> But I'm not worried, I'll try again later on.
> 
> Best,
> 
> Robert
> 

From jfbu at free.fr  Fri May 13 09:07:43 2016
From: jfbu at free.fr (jfbu)
Date: Fri, 13 May 2016 09:07:43 +0200
Subject: [tex-live] 3.4.4 System font configuration for XeTEX and LuaTEX
Message-ID: <04B5F63F-0F54-44EC-9C48-3D477FB4A899@free.fr>

Hi

> On Windows and Mac OS X, fonts shipped with TEX Live are made
  available to XeTEX automatically.

in section 3.4.4 System font configuration for XeTEX and LuaTEX of
the The TEX Live Guide?2016.

I wonder about the validity of that assertion about Mac OS X. Does
MacTeX do anything special which is new ? because in recent years
I don't think that was the case. Indeed, the common advice on the
Mac OS X mailing list is to *copy* manually all fonts one wishes
to use from the TeXLive tree to the user $HOME/Library/Fonts
repertory for XeTeX visibility.

Else one must use filenames, or fontspec with ExternalLocation
key.

Jean-Fran?ois

From Jim.Diamond at acadiau.ca  Fri May 13 15:14:34 2016
From: Jim.Diamond at acadiau.ca (Jim Diamond)
Date: Fri, 13 May 2016 10:14:34 -0300
Subject: [tex-live] problems with tl2016 pretest
In-Reply-To: <201605122151.u4CLpOET015679@freefriends.org>
References: <20160512125323.GA818@jdiamond-nb.acadiau.ca>
 <201605122151.u4CLpOET015679@freefriends.org>
Message-ID: <20160513131434.GA2671@jdiamond-nb.acadiau.ca>

On Thu, May 12, 2016 at 21:51 (+0000), Karl Berry wrote:

Hi Karl,

> Thanks for trying things out, sorry for the problems.
No worries, I tried it out specifically knowing that I might find
something :-)

>> Looking in /local/texlive/2016/bin/x86_64-linux/
>> there are a lot of programs, but pdftex is a broken link and
>> updmap-sys is not there at all.

> In theory, the installation should abort when the download of a package
> fails.  I guess that failed install directory is gone now, but if the
> same failures happen again, please take a look at the install-tl.log
> file at the top-level of the install directory and see if there are any
> pointers in there.
Thanks for the pointer, I will do that.

> The installer code doesn't intentionally slow down any downloads, as
> far as I can see.  My only suggestion would be to try a different
> mirror next time to see if it makes a difference.
Will do.  Although reviewing things after I sent that message makes me
think that it just may be an issue of the design of tl-install, in
that it doesn't overlap "download the next file" with "unpack this
file".

Is that the case?  (I dislike Perl enough that I don't look at Perl
programs unless under great duress :-)

> TLDownload::get_file: response error: 501 Protocol scheme 'ftp' is not supported (for ftp://ftp.math.utah.edu/pub/texlive/tlpretest/archive/12many.tar.xz)
>     ...
> TLDownload::get_file: response error: 501 Attempt to reload LWP/Protocol/ftp.pm aborted.

> It looks like your Perl installation is messed up somehow.
Huh.  I try not to mess with it (see above).  However, I guess it is
good to know that it is then likely just me with that problem.

Cheers.
                                Jim

From norbert at preining.info  Fri May 13 15:57:37 2016
From: norbert at preining.info (Norbert Preining)
Date: Fri, 13 May 2016 22:57:37 +0900
Subject: [tex-live] problems with tl2016 pretest
In-Reply-To: <20160513131434.GA2671@jdiamond-nb.acadiau.ca>
References: <20160512125323.GA818@jdiamond-nb.acadiau.ca>
 <201605122151.u4CLpOET015679@freefriends.org>
 <20160513131434.GA2671@jdiamond-nb.acadiau.ca>
Message-ID: <20160513135737.GQ4108@logic.at>

Hi Jim,

> think that it just may be an issue of the design of tl-install, in
> that it doesn't overlap "download the next file" with "unpack this
> file".

What do you mean with "overlap"?

The installer does the following:
for each package to be installed:
  download the file
  check size and checksum
  unpack into destination
done

Where the 'download the file' has several fall back:
- first try LWP, that is persistent connections
- if that fails, try wget (a few times)
- if that fails, too, give up

So I dont know what you mean with overlap.

> > TLDownload::get_file: response error: 501 Protocol scheme 'ftp' is not supported (for ftp://ftp.math.utah.edu/pub/texlive/tlpretest/archive/12many.tar.xz)
> > TLDownload::get_file: response error: 501 Attempt to reload LWP/Protocol/ftp.pm aborted.
> 
> > It looks like your Perl installation is messed up somehow.
> Huh.  I try not to mess with it (see above).  However, I guess it is
> good to know that it is then likely just me with that problem.

I have to agree with Karl here. Unless the math.utah mirror really
rejects ftp (which Nelson said it doesn't), all this looks really
strange and - not by me - to me. I want to say, I am simply using the 
perl modules LWP, which *should* (and in 99.99999%) work correctly,
as far as I know. The warning message above are from LWP itself and
really look strange.

Some guess work from my side: 
Do you have a firewall (local or local network) that blocks ftp or
active ftp?
Do you need proxies for ftp?

All these things could influence the outcome ... hard to analyze from
here without physical access to the network.

All the best

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From zdenek.wagner at gmail.com  Fri May 13 16:20:33 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 13 May 2016 16:20:33 +0200
Subject: [tex-live] problems with tl2016 pretest
In-Reply-To: <20160513135737.GQ4108@logic.at>
References: <20160512125323.GA818@jdiamond-nb.acadiau.ca>
 <201605122151.u4CLpOET015679@freefriends.org>
 <20160513131434.GA2671@jdiamond-nb.acadiau.ca>
 <20160513135737.GQ4108@logic.at>
Message-ID: <CAC1phyZHmt6Lon0vAQOzjByt=MCdK1BChxtxp2PAon2CzYT9qQ@mail.gmail.com>

2016-05-13 15:57 GMT+02:00 Norbert Preining <norbert at preining.info>:

> Hi Jim,
>
> > think that it just may be an issue of the design of tl-install, in
> > that it doesn't overlap "download the next file" with "unpack this
> > file".
>
> What do you mean with "overlap"?
>
> The installer does the following:
> for each package to be installed:
>   download the file
>   check size and checksum
>   unpack into destination
> done
>
> Where the 'download the file' has several fall back:
> - first try LWP, that is persistent connections
> - if that fails, try wget (a few times)
> - if that fails, too, give up
>
> So I dont know what you mean with overlap.
>
> > > TLDownload::get_file: response error: 501 Protocol scheme 'ftp' is not
> supported (for
> ftp://ftp.math.utah.edu/pub/texlive/tlpretest/archive/12many.tar.xz)
> > > TLDownload::get_file: response error: 501 Attempt to reload
> LWP/Protocol/ftp.pm aborted.
> >
> > > It looks like your Perl installation is messed up somehow.
> > Huh.  I try not to mess with it (see above).  However, I guess it is
> > good to know that it is then likely just me with that problem.
>
> I have to agree with Karl here. Unless the math.utah mirror really
> rejects ftp (which Nelson said it doesn't), all this looks really
>

I tried ftp from math.utah and it worked


> strange and - not by me - to me. I want to say, I am simply using the
> perl modules LWP, which *should* (and in 99.99999%) work correctly,
> as far as I know. The warning message above are from LWP itself and
> really look strange.
>
> Some guess work from my side:
> Do you have a firewall (local or local network) that blocks ftp or
> active ftp?
> Do you need proxies for ftp?
>
> All these things could influence the outcome ... hard to analyze from
> here without physical access to the network.
>
> All the best
>
> Norbert
>



Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz



>
> ------------------------------------------------------------------------
> PREINING, Norbert                               http://www.preining.info
> JAIST, Japan                                 TeX Live & Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
> ------------------------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160513/79a72043/attachment-0001.html>

From karl at freefriends.org  Sat May 14 00:14:01 2016
From: karl at freefriends.org (Karl Berry)
Date: Fri, 13 May 2016 22:14:01 +0000
Subject: [tex-live] problems with tl2016 pretest
In-Reply-To: <20160513131434.GA2671@jdiamond-nb.acadiau.ca>
Message-ID: <201605132214.u4DME1N2027046@freefriends.org>

    it just may be an issue of the design of tl-install, in that it
    doesn't overlap "download the next file" with "unpack this file".

Doing the operations (install package A while downloading the next
package B) concurrently is indeed beyond the scope of the implementation
as it stands.  And it doesn't sound easy, or reliable, to accomplish :(. -k

From karl at freefriends.org  Sat May 14 00:49:34 2016
From: karl at freefriends.org (Karl Berry)
Date: Fri, 13 May 2016 22:49:34 +0000
Subject: [tex-live] 3.4.4 System font configuration for XeTEX and LuaTEX
In-Reply-To: <04B5F63F-0F54-44EC-9C48-3D477FB4A899@free.fr>
Message-ID: <201605132249.u4DMnYWS030466@freefriends.org>

    because in recent years I don't think that was the case. 

I suppose you're right.  I'll have to ask about what can be sensibly
said instead.  Thanks.

    Else one must use filenames, or fontspec with ExternalLocation

Well, that's preferable anyway :).  --karl

From petr at olsak.net  Sat May 14 08:10:58 2016
From: petr at olsak.net (Petr Olsak)
Date: Sat, 14 May 2016 08:10:58 +0200
Subject: [tex-live] LuaLaTeX potential problems
Message-ID: <alpine.DEB.2.10.1605140805170.17411@newton.feld.cvut.cz>


Hello,

I did try (only coincidentally) following document

\documentclass[varwidth]{standalone}
\begin{document}
Nazdar.
\end{document}

processed by LuaLaTeX. It doesn't work with new LuaTeX where \pdfpagewidth 
primitive isn't accesible (in TeXlive pretest).

There are thousands LaTeX packages and classes, they may be used in 
LuaLaTeX document. IMHO, there is very hight probability of problems 
simlilar like this. I don't understand why LuaLateX doesn't load 
luatex85.sty by default when it is generated.

Of course, this is not my problem because I am not supporting LaTeX. OPmac 
macros were corrected, they work with new LuaTeX with etex.src format. And 
CSplain reads luatex85.sty when it is generated with LuaTeX.

Petr Olsak



From zdenek.wagner at gmail.com  Sat May 14 09:32:32 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sat, 14 May 2016 09:32:32 +0200
Subject: [tex-live] problems with tl2016 pretest
In-Reply-To: <201605132214.u4DME1N2027046@freefriends.org>
References: <20160513131434.GA2671@jdiamond-nb.acadiau.ca>
 <201605132214.u4DME1N2027046@freefriends.org>
Message-ID: <CAC1phybj6r_qj7UTVsd4UieQXUSy-inj2tWKY4a0UokG7XnxbA@mail.gmail.com>

2016-05-14 0:14 GMT+02:00 Karl Berry <karl at freefriends.org>:

>     it just may be an issue of the design of tl-install, in that it
>     doesn't overlap "download the next file" with "unpack this file".
>
> Doing the operations (install package A while downloading the next
> package B) concurrently is indeed beyond the scope of the implementation
> as it stands.  And it doesn't sound easy, or reliable, to accomplish :(. -k
>

It is very difficult. You have packages of different size and users have
different bandwidth. In theory, you may quickly download several small
packages if you have a gigabit line and it may cause concurrent unpacking
and installation of several packages, so you may end up with many processes
which will mean that yout tcp/ip subsystem might discard incoming packages
due to overloading of the processor. It could be solved by having one
process for downloading that would put the names of downloaded packages to
a queue and another process will unpack and install them. If you have Intel
i5 or better, it will work but if you install to Raspberry Pi, it may cause
problems due to limited resources. Moreover, I am not sure whether the same
IPC is available for all platforms, so such a solution is really difficult
and will need a lot of testing and debugging.



Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160514/88a9f542/attachment-0001.html>

From d.p.carlisle at gmail.com  Sat May 14 09:37:56 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Sat, 14 May 2016 08:37:56 +0100
Subject: [tex-live] LuaLaTeX potential problems
In-Reply-To: <alpine.DEB.2.10.1605140805170.17411@newton.feld.cvut.cz>
References: <alpine.DEB.2.10.1605140805170.17411@newton.feld.cvut.cz>
Message-ID: <CAEW6iOhBqdOn_wwTpydZt8ZFhUhNucFt7ZGYsgS7704i5FaVWg@mail.gmail.com>

On 14 May 2016 at 07:10, Petr Olsak <petr at olsak.net> wrote:
>
> Hello,
>
> I did try (only coincidentally) following document
>
> \documentclass[varwidth]{standalone}
> \begin{document}
> Nazdar.
> \end{document}
>
> processed by LuaLaTeX. It doesn't work with new LuaTeX where \pdfpagewidth
> primitive isn't accesible (in TeXlive pretest).
>
> There are thousands LaTeX packages and classes, they may be used in LuaLaTeX
> document. IMHO, there is very hight probability of problems simlilar like
> this. I don't understand why LuaLateX doesn't load luatex85.sty by default
> when it is generated.
>


Hi, yes as Karl pointed out on a message to this list at the start of
the tl2016 pretest
texlive "just" distributes what is provided to ctan, so this is the
wrong list for package
or luatex error reports.
It needs to be reported to Martin to update standalone (but I think he
knows:-) or
the latex project to suggest a change to the latex format.

> Of course, this is not my problem because I am not supporting LaTeX. OPmac
> macros were corrected, they work with new LuaTeX with etex.src format. And
> CSplain reads luatex85.sty when it is generated with LuaTeX.
>
> Petr Olsak
>
>

It is of course your choice to do that, and it's probably reasonable
in a plain based format
where the philosophy is presumably as with plain that the format
macros are a "starter kit"
without any claims to generality.

luatex85.sty is a "quick fix" that can hide some of the issues in the
new luatex so it's a good
thing to have available as the updates are not fully rolled out but it
isn't a good fix for a format
such as latex which unlike plain aims for robust solutions in the
format rather than aiming for
simple macros that work as examples and need to be extended for
particular cases.

We did consider adding luatex85 to the format, but while the renamed
primitives can be aliased
reasonably safely with \let the ones that are now macros using
\pdfextension etc have different
expansion behaviour. A safer approach to pdftex-luatex compatibility
would be like Heiko's pdftexcmds.sty
where you have wrapper macros on both engines so the expansion steps
are the same, but that doesn't help with the current
problem of compatibility with existing code using the primitives.

Perhaps more importantly it doesn't fix many packages where the
breakage is in lua code where the node library interfaces have changed
a lot.


There are thousands of packages but not thousands using \pdfxxx (we
searched the texlive tree to look:-) and even fewer authors of
packages needing updates.

So overall it's better to update code that claims to work with luatex
so that it does, in fact, work, even though that causes some short
term pain in terms of rolling out the necessary updates.

That said, the particular cases of \pdfpagewidth/height are (a) one of
the safest things to alias and (b) most commonly used.
We may yet add those two to the format, one of the things that we are
looking out for during the pretest is any reasonable cases where that
would help, ie cases that are not covered by package updates.

David

From zdenek.wagner at gmail.com  Sat May 14 09:37:35 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sat, 14 May 2016 09:37:35 +0200
Subject: [tex-live] 3.4.4 System font configuration for XeTEX and LuaTEX
In-Reply-To: <201605132249.u4DMnYWS030466@freefriends.org>
References: <04B5F63F-0F54-44EC-9C48-3D477FB4A899@free.fr>
 <201605132249.u4DMnYWS030466@freefriends.org>
Message-ID: <CAC1phyY3PR7OxvZrc_Py-cvYtRDsksNxv+L+_XEd0d2ORnj40w@mail.gmail.com>

2016-05-14 0:49 GMT+02:00 Karl Berry <karl at freefriends.org>:

>     because in recent years I don't think that was the case.
>
> I suppose you're right.  I'll have to ask about what can be sensibly
> said instead.  Thanks.
>
>     Else one must use filenames, or fontspec with ExternalLocation
>
> Well, that's preferable anyway :).  --karl
>

As I remember, someone has already mentioned that the font instructions for
Mac OSX are wrong. I do not have Mac so I cannot try whether it is really
necessary to copy the fonts, maybe the symlink would be sufficient. And I
do not know whether the font files must be symlinked, maybe just the parent
directory may be symlinked. I do not know whether Mac can look for fonts
into subdirectories.



Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160514/a7852931/attachment.html>

From petr at olsak.net  Sat May 14 11:54:57 2016
From: petr at olsak.net (Petr Olsak)
Date: Sat, 14 May 2016 11:54:57 +0200
Subject: [tex-live] LuaLaTeX potential problems
In-Reply-To: <CAEW6iOhBqdOn_wwTpydZt8ZFhUhNucFt7ZGYsgS7704i5FaVWg@mail.gmail.com>
References: <alpine.DEB.2.10.1605140805170.17411@newton.feld.cvut.cz>
 <CAEW6iOhBqdOn_wwTpydZt8ZFhUhNucFt7ZGYsgS7704i5FaVWg@mail.gmail.com>
Message-ID: <alpine.DEB.2.10.1605141116320.31184@newton.feld.cvut.cz>


On Sat, 14 May 2016, David Carlisle wrote:

> On 14 May 2016 at 07:10, Petr Olsak <petr at olsak.net> wrote:
>>
>> Hello,
>>
>> I did try (only coincidentally) following document
>>
>> \documentclass[varwidth]{standalone}
>> \begin{document}
>> Nazdar.
>> \end{document}
>>
>> processed by LuaLaTeX. It doesn't work with new LuaTeX where \pdfpagewidth
>> primitive isn't accesible (in TeXlive pretest).
>>
>> There are thousands LaTeX packages and classes, they may be used in LuaLaTeX
>> document. IMHO, there is very hight probability of problems simlilar like
>> this. I don't understand why LuaLateX doesn't load luatex85.sty by default
>> when it is generated.
>
> Hi, yes as Karl pointed out on a message to this list at the start of 
> the tl2016 pretest texlive "just" distributes what is provided to ctan, 
> so this is the wrong list for package or luatex error reports.

Hi, this is interesting idea: "TeXlive is only a collection of CTAN 
software". In such case and without more communication, it is very 
probably a software which doesn't work. I know that all authors are only 
volunteers, so we cannot want more.

>From average user point of view: a part of TeXlive (LuaLaTeX with some 
package) doesn't work but it worked in previous version of TeXlive => 
new TeXlive is wrong. He/she don't distinguish more details (what engine, 
what package, what author etc.).

I was a idealist: All authors of packages were informed about luatex 
changes and there was sufficiency time to test new versions of such 
packages in TL pretest. Before the deadline when TeXlive will be frozen (I 
mean "frozen" in this sense: it will be propagated to Linux distros, where 
it will be one year unchanged typically, or it will be saved to a DVD). 
Now, near the deadline, I did *only one accidental* test with LaTeX 
(normally I don't use LaTeX) and huh: there is a problem.

Karl Berry informed me (as package writer) about luatex changes at Dec. 
15. I was convinced that others package writers were informed too. So the 
decision in LaTeX team about concept in LuaLaTeX were done many months 
ago. And now, all these changes were comprehesively tested. IMHO, without 
such communication isn't possible to distribute working TeXlive.

> Perhaps more importantly it doesn't fix many packages where the
> breakage is in lua code where the node library interfaces have changed
> a lot.

OT:
Yes, I know this problem:) My luafonts.tex (which is an alternative of 
luaotfload.sty) lost its functionality and I wasn't informed about it from 
lua developers. It happened about 1 year ago. More communications between 
developers can avoid such problems, maybe.

Best regards

Petr Olsak


From preining at logic.at  Sat May 14 12:10:39 2016
From: preining at logic.at (Norbert Preining)
Date: Sat, 14 May 2016 19:10:39 +0900
Subject: [tex-live] LuaLaTeX potential problems
In-Reply-To: <alpine.DEB.2.10.1605141116320.31184@newton.feld.cvut.cz>
References: <alpine.DEB.2.10.1605140805170.17411@newton.feld.cvut.cz>
 <CAEW6iOhBqdOn_wwTpydZt8ZFhUhNucFt7ZGYsgS7704i5FaVWg@mail.gmail.com>
 <alpine.DEB.2.10.1605141116320.31184@newton.feld.cvut.cz>
Message-ID: <957BEDC0-6AFD-4632-8BCF-4AA51A7BD117@logic.at>

Petr,

Luatex was titulated beta till now, including changes to all APIs. There is nothing to complain and request. Those who used luatex have hopefully been aware of the fact that there might (and note are) incompatible changes.

That is all there to say.

Those who don't care will ship unfixed packages in TeX Live, those who care will upload fixed packages to CTAN. There is still enough time.

Last: do you really expect devs to search for all other package writers and contact them about incompatible changes in a beta product?

If yes, then you are a hopeless dreamer ;-)

Norbert


On May 14, 2016 6:54:57 PM GMT+09:00, Petr Olsak <petr at olsak.net> wrote:
>
>On Sat, 14 May 2016, David Carlisle wrote:
>
>> On 14 May 2016 at 07:10, Petr Olsak <petr at olsak.net> wrote:
>>>
>>> Hello,
>>>
>>> I did try (only coincidentally) following document
>>>
>>> \documentclass[varwidth]{standalone}
>>> \begin{document}
>>> Nazdar.
>>> \end{document}
>>>
>>> processed by LuaLaTeX. It doesn't work with new LuaTeX where
>\pdfpagewidth
>>> primitive isn't accesible (in TeXlive pretest).
>>>
>>> There are thousands LaTeX packages and classes, they may be used in
>LuaLaTeX
>>> document. IMHO, there is very hight probability of problems simlilar
>like
>>> this. I don't understand why LuaLateX doesn't load luatex85.sty by
>default
>>> when it is generated.
>>
>> Hi, yes as Karl pointed out on a message to this list at the start of
>
>> the tl2016 pretest texlive "just" distributes what is provided to
>ctan, 
>> so this is the wrong list for package or luatex error reports.
>
>Hi, this is interesting idea: "TeXlive is only a collection of CTAN 
>software". In such case and without more communication, it is very 
>probably a software which doesn't work. I know that all authors are
>only 
>volunteers, so we cannot want more.
>
>>From average user point of view: a part of TeXlive (LuaLaTeX with some
>
>package) doesn't work but it worked in previous version of TeXlive => 
>new TeXlive is wrong. He/she don't distinguish more details (what
>engine, 
>what package, what author etc.).
>
>I was a idealist: All authors of packages were informed about luatex 
>changes and there was sufficiency time to test new versions of such 
>packages in TL pretest. Before the deadline when TeXlive will be frozen
>(I 
>mean "frozen" in this sense: it will be propagated to Linux distros,
>where 
>it will be one year unchanged typically, or it will be saved to a DVD).
>
>Now, near the deadline, I did *only one accidental* test with LaTeX 
>(normally I don't use LaTeX) and huh: there is a problem.
>
>Karl Berry informed me (as package writer) about luatex changes at Dec.
>
>15. I was convinced that others package writers were informed too. So
>the 
>decision in LaTeX team about concept in LuaLaTeX were done many months 
>ago. And now, all these changes were comprehesively tested. IMHO,
>without 
>such communication isn't possible to distribute working TeXlive.
>
>> Perhaps more importantly it doesn't fix many packages where the
>> breakage is in lua code where the node library interfaces have
>changed
>> a lot.
>
>OT:
>Yes, I know this problem:) My luafonts.tex (which is an alternative of 
>luaotfload.sty) lost its functionality and I wasn't informed about it
>from 
>lua developers. It happened about 1 year ago. More communications
>between 
>developers can avoid such problems, maybe.
>
>Best regards
>
>Petr Olsak

-- 
Sent from my mobile device. Please excuse my brevity.

From norbert at preining.info  Sat May 14 13:23:44 2016
From: norbert at preining.info (Norbert Preining)
Date: Sat, 14 May 2016 20:23:44 +0900
Subject: [tex-live] tl-install of 2016-pretest: litter in /tmp
In-Reply-To: <20160512134605.GA21405@jdiamond-nb.acadiau.ca>
References: <20160512134605.GA21405@jdiamond-nb.acadiau.ca>
Message-ID: <20160514112344.GE4108@logic.at>

> tlinstall is filling up my /tmp with tmpdirs which it is not removing

They would be removed at the end of the installation ... but I changed
the code in one of the modules that they are not even generated ;-)

Thanks for the report, it reminded me to look into it.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From Jim.Diamond at acadiau.ca  Sat May 14 13:33:14 2016
From: Jim.Diamond at acadiau.ca (Jim Diamond)
Date: Sat, 14 May 2016 08:33:14 -0300
Subject: [tex-live] tl-install of 2016-pretest: litter in /tmp
In-Reply-To: <20160514112344.GE4108@logic.at>
References: <20160512134605.GA21405@jdiamond-nb.acadiau.ca>
 <20160514112344.GE4108@logic.at>
Message-ID: <20160514113314.GA21061@jdiamond-nb.acadiau.ca>

On Sat, May 14, 2016 at 20:23 (+0900), Norbert Preining wrote:

>> tlinstall is filling up my /tmp with tmpdirs which it is not removing

> They would be removed at the end of the installation ... but I changed
> the code in one of the modules that they are not even generated ;-)

> Thanks for the report, it reminded me to look into it.

Norbert,

thanks for taking care of that.

                                Jim

From d.p.carlisle at gmail.com  Sat May 14 14:02:37 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Sat, 14 May 2016 13:02:37 +0100
Subject: [tex-live] LuaLaTeX potential problems
In-Reply-To: <CAEW6iOhBqdOn_wwTpydZt8ZFhUhNucFt7ZGYsgS7704i5FaVWg@mail.gmail.com>
References: <alpine.DEB.2.10.1605140805170.17411@newton.feld.cvut.cz>
 <CAEW6iOhBqdOn_wwTpydZt8ZFhUhNucFt7ZGYsgS7704i5FaVWg@mail.gmail.com>
Message-ID: <CAEW6iOjK-Oc7M8LvkWjjcU_m+FNzQD1cs45coOO6rDFNfX4j2A@mail.gmail.com>

Just to confirm this is already reported to the standalone source repository

https://bitbucket.org/martin_scharrer/standalone/issues/23/no-write18-or-pdfxxx-commands-in-luatex

David

From zdenek.wagner at gmail.com  Sat May 14 17:42:32 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sat, 14 May 2016 17:42:32 +0200
Subject: [tex-live] tl-install of 2016-pretest: litter in /tmp
In-Reply-To: <20160514113314.GA21061@jdiamond-nb.acadiau.ca>
References: <20160512134605.GA21405@jdiamond-nb.acadiau.ca>
 <20160514112344.GE4108@logic.at>
 <20160514113314.GA21061@jdiamond-nb.acadiau.ca>
Message-ID: <CAC1phyaGYfJ7pKkrXLSzX702GmY4EsyyjMgDz5gf+Um1_DAspg@mail.gmail.com>

Hi,

/tmp is not a good place, in some Linux distros /tmp lives in tmpfs which
is a small and expensive place. If they are not removed immediately after
use, they may cause problems. Before I bought a new computer with a lot of
memory, I modified the unit file to limit /tmp to 256MB, now the limit is
1GB. /var/tmp will probably be better if a lot of temporary files should
live for a longer period of time.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2016-05-14 13:33 GMT+02:00 Jim Diamond <Jim.Diamond at acadiau.ca>:

> On Sat, May 14, 2016 at 20:23 (+0900), Norbert Preining wrote:
>
> >> tlinstall is filling up my /tmp with tmpdirs which it is not removing
>
> > They would be removed at the end of the installation ... but I changed
> > the code in one of the modules that they are not even generated ;-)
>
> > Thanks for the report, it reminded me to look into it.
>
> Norbert,
>
> thanks for taking care of that.
>
>                                 Jim
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160514/4bf6462c/attachment.html>

From reinhard.kotucha at web.de  Sat May 14 22:10:22 2016
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 14 May 2016 22:10:22 +0200
Subject: [tex-live] tl-install of 2016-pretest: litter in /tmp
In-Reply-To: <CAC1phyaGYfJ7pKkrXLSzX702GmY4EsyyjMgDz5gf+Um1_DAspg@mail.gmail.com>
References: <20160512134605.GA21405@jdiamond-nb.acadiau.ca>
 <20160514112344.GE4108@logic.at>
 <20160514113314.GA21061@jdiamond-nb.acadiau.ca>
 <CAC1phyaGYfJ7pKkrXLSzX702GmY4EsyyjMgDz5gf+Um1_DAspg@mail.gmail.com>
Message-ID: <22327.34350.529281.940888@zaphod.ms25.net>

On 2016-05-14 at 17:42:32 +0200, Zdenek Wagner wrote:

 > Hi,
 > 
 > /tmp is not a good place, in some Linux distros /tmp lives in tmpfs
 > which is a small and expensive place. If they are not removed
 > immediately after use, they may cause problems. Before I bought a
 > new computer with a lot of memory, I modified the unit file to
 > limit /tmp to 256MB, now the limit is 1GB. /var/tmp will probably
 > be better if a lot of temporary files should live for a longer
 > period of time.

The proper place on Unix is $TMPDIR.  No program should use hard-coded
paths here.  The TeX Live installer is using /tmp only as a fallback
if $TMPDIR is not set.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From zdenek.wagner at gmail.com  Sat May 14 22:17:20 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sat, 14 May 2016 22:17:20 +0200
Subject: [tex-live] tl-install of 2016-pretest: litter in /tmp
In-Reply-To: <22327.34350.529281.940888@zaphod.ms25.net>
References: <20160512134605.GA21405@jdiamond-nb.acadiau.ca>
 <20160514112344.GE4108@logic.at>
 <20160514113314.GA21061@jdiamond-nb.acadiau.ca>
 <CAC1phyaGYfJ7pKkrXLSzX702GmY4EsyyjMgDz5gf+Um1_DAspg@mail.gmail.com>
 <22327.34350.529281.940888@zaphod.ms25.net>
Message-ID: <CAC1phyaoO9bbzbdxvNKF1FP6B4DNxwXmvt1LbfKwnvfg6k2epQ@mail.gmail.com>

2016-05-14 22:10 GMT+02:00 Reinhard Kotucha <reinhard.kotucha at web.de>:

> On 2016-05-14 at 17:42:32 +0200, Zdenek Wagner wrote:
>
>  > Hi,
>  >
>  > /tmp is not a good place, in some Linux distros /tmp lives in tmpfs
>  > which is a small and expensive place. If they are not removed
>  > immediately after use, they may cause problems. Before I bought a
>  > new computer with a lot of memory, I modified the unit file to
>  > limit /tmp to 256MB, now the limit is 1GB. /var/tmp will probably
>  > be better if a lot of temporary files should live for a longer
>  > period of time.
>
> The proper place on Unix is $TMPDIR.  No program should use hard-coded
> paths here.  The TeX Live installer is using /tmp only as a fallback
> if $TMPDIR is not set.
>

Thank you, I have TMPDIR=/var/tmp in my computers.

>
> Regards,
>   Reinhard
>



Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz



>
> --
> ------------------------------------------------------------------
> Reinhard Kotucha                            Phone: +49-511-3373112
> Marschnerstr. 25
> D-30167 Hannover                    mailto:reinhard.kotucha at web.de
> ------------------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160514/fea22133/attachment.html>

From herbs at wideopenwest.com  Sat May 14 23:56:58 2016
From: herbs at wideopenwest.com (Herbert Schulz)
Date: Sat, 14 May 2016 16:56:58 -0500
Subject: [tex-live] LuaLaTeX potential problems
In-Reply-To: <CAEW6iOjK-Oc7M8LvkWjjcU_m+FNzQD1cs45coOO6rDFNfX4j2A@mail.gmail.com>
References: <alpine.DEB.2.10.1605140805170.17411@newton.feld.cvut.cz>
 <CAEW6iOhBqdOn_wwTpydZt8ZFhUhNucFt7ZGYsgS7704i5FaVWg@mail.gmail.com>
 <CAEW6iOjK-Oc7M8LvkWjjcU_m+FNzQD1cs45coOO6rDFNfX4j2A@mail.gmail.com>
Message-ID: <C585929F-54B0-49B2-B970-2CE62D85A030@wideopenwest.com>

> On May 14, 2016, at 7:02 AM, David Carlisle <d.p.carlisle at gmail.com> wrote:
> 
> Just to confirm this is already reported to the standalone source repository
> 
> https://bitbucket.org/martin_scharrer/standalone/issues/23/no-write18-or-pdfxxx-commands-in-luatex
> 
> David

Howdy,

Thanks for this information. I have a tikz example file that needs to call gnuplot (via \write18) that failed under LuaLaTeX but adding \RequirePackage{shellesc} fixed it up.

Good Luck,

Herb Schulz
(herbs at wideopenwest dot com)







From rod.yager at mq.edu.au  Sun May 15 06:35:43 2016
From: rod.yager at mq.edu.au (Rod Yager)
Date: Sun, 15 May 2016 04:35:43 +0000
Subject: [tex-live] Pretest tlmgr downloads fail
Message-ID: <BE9BA1D2-26D3-4CFA-AA2B-27E7B29D2FAC@mq.edu.au>

After the overnight updates, tlmgr now fails on each package download.

Here?s the relevant output.

[ 1/39, ??:??/??:??] update: biblatex-apa [233k] (39930 -> 41125) ... tlmgr: Restoring old package state succeeded.
done
Use of uninitialized value $filesize in numeric ne (!=) at /usr/local/texlive/2016/tlpkg/TeXLive/TLUtils.pm line 1989.
TLUtils::check_file: removing /usr/local/texlive/2016/temp/cjkpunct.tar.xz, sizes differ:
Use of uninitialized value $filesize in concatenation (.) or string at /usr/local/texlive/2016/tlpkg/TeXLive/TLUtils.pm line 1991.
TLUtils::check_file:   TL=, arg=4056
TLPDB::_install_package: downloading did not succeed
tlmgr: Installation of new version of cjkpunct failed, trying to unwind.


Rod


From norbert at preining.info  Sun May 15 09:07:10 2016
From: norbert at preining.info (Norbert Preining)
Date: Sun, 15 May 2016 16:07:10 +0900
Subject: [tex-live] tl-install of 2016-pretest: litter in /tmp
In-Reply-To: <CAC1phyaGYfJ7pKkrXLSzX702GmY4EsyyjMgDz5gf+Um1_DAspg@mail.gmail.com>
References: <20160512134605.GA21405@jdiamond-nb.acadiau.ca>
 <20160514112344.GE4108@logic.at>
 <20160514113314.GA21061@jdiamond-nb.acadiau.ca>
 <CAC1phyaGYfJ7pKkrXLSzX702GmY4EsyyjMgDz5gf+Um1_DAspg@mail.gmail.com>
Message-ID: <20160515070710.GM4108@logic.at>

On Sat, 14 May 2016, Zdenek Wagner wrote:
> /tmp is not a good place, in some Linux distros /tmp lives in tmpfs which

Recent changes ensured that tmep files are created within the
installation destination hierarchy.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From usenet at siart.de  Sun May 15 09:07:10 2016
From: usenet at siart.de (Uwe Siart)
Date: Sun, 15 May 2016 09:07:10 +0200
Subject: [tex-live] Pretest tlmgr downloads fail
References: <BE9BA1D2-26D3-4CFA-AA2B-27E7B29D2FAC@mq.edu.au>
Message-ID: <8460ufhk9t.fsf@siart.de>

Rod Yager <rod.yager at mq.edu.au> writes:

> After the overnight updates, tlmgr now fails on each package download.

Can't confirm this. Just did a successful update from the Czech mirror.

-- 
Uwe


From norbert at preining.info  Sun May 15 09:09:58 2016
From: norbert at preining.info (Norbert Preining)
Date: Sun, 15 May 2016 16:09:58 +0900
Subject: [tex-live] Pretest tlmgr downloads fail
In-Reply-To: <BE9BA1D2-26D3-4CFA-AA2B-27E7B29D2FAC@mq.edu.au>
References: <BE9BA1D2-26D3-4CFA-AA2B-27E7B29D2FAC@mq.edu.au>
Message-ID: <20160515070958.GN4108@logic.at>

Hi

I have seen such report also on mactex list .. are you using mactex?

I cannot reproduce it, and I am surprised about the error:
This is
      my $filesize = (stat $xzfile)[7];
and that means that
      stat
did not work, which is *strange* ... also the changes I made to
TLUtils are unrelated, namely only replacing some temp  file
invocations.

Can anyone of you who can reproduce this problem (I cannot!!!)
copy the attached TLUtils.pm into the respective location
and then run
      tlmgr update -v biblatex-apa
(or any other package that needs updates) and send me the output?

That would help.

THanks

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From petr at olsak.net  Sun May 15 09:22:18 2016
From: petr at olsak.net (Petr Olsak)
Date: Sun, 15 May 2016 09:22:18 +0200
Subject: [tex-live] Pretest tlmgr downloads fail
Message-ID: <alpine.DEB.2.10.1605150917560.19099@newton.feld.cvut.cz>


> Use of uninitialized value $filesize in numeric ne (!=) at 
> /usr/local/texlive/2016/tlpkg/TeXLive/TLUtils.pm line 1989.
> TLUtils::check_file: removing 
> /usr/local/texlive/2016/temp/cjkpunct.tar.xz, sizes differ:
> Use of uninitialized value $filesize in concatenation (.) or string at 
> /usr/local/texlive/2016/tlpkg/TeXLive/TLUtils.pm line 1991.

I confirm, have the same problem.

tlmgr: package repository http://ftp.cstug.cz/pub/tex/local/tlpretest 
(verified)
tlmgr: saving backups to /usr/local/texlive/2016/tlpkg/backups
Use of uninitialized value $filesize in numeric ne (!=) at 
/usr/local/texlive/2016/tlpkg/TeXLive/TLUtils.pm line 1989.
TLUtils::check_file: removing 
/usr/local/texlive/2016/temp/asymptote.x86_64-linux.tar.xz, sizes differ:
Use of uninitialized value $filesize in concatenation (.) or string at 
/usr/local/texlive/2016/tlpkg/TeXLive/TLUtils.pm line 1991.
TLUtils::check_file:   TL=, arg=1023400
TLPDB::_install_package: downloading did not succeed
tlmgr: Installation of new version of asymptote.x86_64-linux failed, 
trying to unwind.
[ 1/46, ??:??/??:??] update: asymptote.x86_64-linux [1000k] (40384 -> 
41084) ... tlmgr: Restoring old package state succeeded.
done

Petr Olsak

From norbert at preining.info  Sun May 15 09:24:13 2016
From: norbert at preining.info (Norbert Preining)
Date: Sun, 15 May 2016 16:24:13 +0900
Subject: [tex-live] Pretest tlmgr downloads fail
In-Reply-To: <20160515070958.GN4108@logic.at>
References: <BE9BA1D2-26D3-4CFA-AA2B-27E7B29D2FAC@mq.edu.au>
 <20160515070958.GN4108@logic.at>
Message-ID: <20160515072413.GO4108@logic.at>

Now with TLUtils.pm

On Sun, 15 May 2016, Norbert Preining wrote:
> Hi
> 
> I have seen such report also on mactex list .. are you using mactex?
> 
> I cannot reproduce it, and I am surprised about the error:
> This is
>       my $filesize = (stat $xzfile)[7];
> and that means that
>       stat
> did not work, which is *strange* ... also the changes I made to
> TLUtils are unrelated, namely only replacing some temp  file
> invocations.
> 
> Can anyone of you who can reproduce this problem (I cannot!!!)
> copy the attached TLUtils.pm into the respective location
> and then run
>       tlmgr update -v biblatex-apa
> (or any other package that needs updates) and send me the output?
> 
> That would help.
> 
> THanks
> 
> Norbert
> 
> ------------------------------------------------------------------------
> PREINING, Norbert                               http://www.preining.info
> JAIST, Japan                                 TeX Live & Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
> ------------------------------------------------------------------------

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------
-------------- next part --------------
A non-text attachment was scrubbed...
Name: TLUtils.pm
Type: text/x-perl
Size: 113909 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160515/0a4968ff/attachment-0001.bin>

From norbert at preining.info  Sun May 15 09:27:40 2016
From: norbert at preining.info (Norbert Preining)
Date: Sun, 15 May 2016 16:27:40 +0900
Subject: [tex-live] Pretest tlmgr downloads fail
In-Reply-To: <alpine.DEB.2.10.1605150917560.19099@newton.feld.cvut.cz>
References: <alpine.DEB.2.10.1605150917560.19099@newton.feld.cvut.cz>
Message-ID: <20160515072740.GP4108@logic.at>

Hi Petr,

> I confirm, have the same problem.

Strange. Can you please try the following command lineL:
	perl -e 'print  ( (stat "/bin/true")[7], "\n");'
(hopeing you have /bin/true ;-)

Which version of perl?

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From petr at olsak.net  Sun May 15 09:39:30 2016
From: petr at olsak.net (Petr Olsak)
Date: Sun, 15 May 2016 09:39:30 +0200
Subject: [tex-live] Pretest tlmgr downloads fail
Message-ID: <alpine.DEB.2.10.1605150937130.19099@newton.feld.cvut.cz>


With TLUtils from attachment:

tlmgr: package repository http://ftp.cstug.cz/pub/tex/local/tlpretest 
(verified)
tlmgr: saving backups to /usr/local/texlive/2016/tlpkg/backups
skipping forcibly removed package cjkpunct
[ 1/45, ??:??/??:??] update: asymptote.x86_64-linux [1000k] (40384 -> 
41084) ... DEBUG+++ xzfile = 
/usr/local/texlive/2016/temp/asymptote.x86_64-linux.tar.xz, checksize = 
1023400
DEBUG+++ stat xzfile =
Use of uninitialized value $filesize in numeric ne (!=) at 
/usr/local/texlive/2016/tlpkg/TeXLive/TLUtils.pm line 1992.
TLUtils::check_file: removing 
/usr/local/texlive/2016/temp/asymptote.x86_64-linux.tar.xz, sizes differ:
Use of uninitialized value $filesize in concatenation (.) or string at 
/usr/local/texlive/2016/tlpkg/TeXLive/TLUtils.pm line 1994.
TLUtils::check_file:   TL=, arg=1023400
TLPDB::_install_package: downloading did not succeed
tlmgr: Installation of new version of asymptote.x86_64-linux failed, 
trying to unwind.
tlmgr: Restoring old package state succeeded.
done

Petr Olsak

From zdenek.wagner at gmail.com  Sun May 15 09:36:26 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sun, 15 May 2016 09:36:26 +0200
Subject: [tex-live] Pretest tlmgr downloads fail
In-Reply-To: <20160515072740.GP4108@logic.at>
References: <alpine.DEB.2.10.1605150917560.19099@newton.feld.cvut.cz>
 <20160515072740.GP4108@logic.at>
Message-ID: <CAC1phyZD9LSZgPHAMAR+cijAVKZeDGxeJR_zskge-72vr3ps0w@mail.gmail.com>

I have the same error as Petr Ol??k using the very same Czech mirror.

$ perl -e 'print  ( (stat "/bin/true")[7], "\n");'
28432

$ perl --version

This is perl 5, version 22, subversion 1 (v5.22.1) built for
x86_64-linux-thread-multi
(with 15 registered patches, see perl -V for more detail)

$ perl -V
Summary of my perl5 (revision 5 version 22 subversion 1) configuration:

  Platform:
    osname=linux, osvers=4.3.5-300.fc23.x86_64,
archname=x86_64-linux-thread-multi
    uname='linux buildvm-19.phx2.fedoraproject.org 4.3.5-300.fc23.x86_64 #1
smp mon feb 1 03:18:41 utc 2016 x86_64 x86_64 x86_64 gnulinux '
    config_args='-des -Doptimize=none -Dccflags=-O2 -g -pipe -Wall
-Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions
-fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches
-m64 -mtune=generic -Dldflags=-Wl,-z,relro
-Dccdlflags=-Wl,--enable-new-dtags -Wl,-z,relro  -Dlddlflags=-shared
-Wl,-z,relro  -Dshrpdir=/usr/lib64 -DDEBUGGING=-g -Dversion=5.22.1
-Dmyhostname=localhost -Dperladmin=root at localhost -Dcc=gcc -Dcf_by=Red Hat,
Inc. -Dprefix=/usr -Dvendorprefix=/usr -Dsiteprefix=/usr/local
-Dsitelib=/usr/local/share/perl5 -Dsitearch=/usr/local/lib64/perl5
-Dprivlib=/usr/share/perl5 -Dvendorlib=/usr/share/perl5/vendor_perl
-Darchlib=/usr/lib64/perl5 -Dvendorarch=/usr/lib64/perl5/vendor_perl
-Darchname=x86_64-linux-thread-multi -Dlibpth=/usr/local/lib64 /lib64
/usr/lib64 -Duseshrplib -Dusethreads -Duseithreads
-Dusedtrace=/usr/bin/dtrace -Duselargefiles -Dd_semctl_semun -Di_db
-Ui_ndbm -Di_gdbm -Di_shadow -Di_syslog -Dman3ext=3pm -Duseperlio
-Dinstallusrbinperl=n -Ubincompat5005 -Uversiononly -Dpager=/usr/bin/less
-isr -Dd_gethostent_r_proto -Ud_endhostent_r_proto -Ud_sethostent_r_proto
-Ud_endprotoent_r_proto -Ud_setprotoent_r_proto -Ud_endservent_r_proto
-Ud_setservent_r_proto -Dscriptdir=/usr/bin -Dusesitecustomize'
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=define, usemultiplicity=define
    use64bitint=define, use64bitall=define, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc='gcc', ccflags ='-D_REENTRANT -D_GNU_SOURCE -O2 -g -pipe -Wall
-Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions
-fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches
-m64 -mtune=generic -fwrapv -fno-strict-aliasing -I/usr/local/include
-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64',
    optimize='  -g',
    cppflags='-D_REENTRANT -D_GNU_SOURCE -O2 -g -pipe -Wall
-Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions
-fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches
-m64 -mtune=generic -fwrapv -fno-strict-aliasing -I/usr/local/include'
    ccversion='', gccversion='5.3.1 20151207 (Red Hat 5.3.1-2)',
gccosandvers=''
    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678,
doublekind=3
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16,
longdblkind=3
    ivtype='long', ivsize=8, nvtype='double', nvsize=8, Off_t='off_t',
lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld='gcc', ldflags ='-Wl,-z,relro  -fstack-protector-strong
-L/usr/local/lib'
    libpth=/usr/local/lib64 /lib64 /usr/lib64 /usr/local/lib /usr/lib
/lib/../lib64 /usr/lib/../lib64 /lib
    libs=-lpthread -lresolv -lnsl -lgdbm -ldb -ldl -lm -lcrypt -lutil -lc
-lgdbm_compat
    perllibs=-lpthread -lresolv -lnsl -ldl -lm -lcrypt -lutil -lc
    libc=libc-2.22.so, so=so, useshrplib=true, libperl=libperl.so
    gnulibc_version='2.22'
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef,
ccdlflags='-Wl,--enable-new-dtags -Wl,-z,relro '
    cccdlflags='-fPIC', lddlflags='-shared -Wl,-z,relro  -L/usr/local/lib
-fstack-protector-strong'


Characteristics of this binary (from libperl):
  Compile-time options: HAS_TIMES MULTIPLICITY PERLIO_LAYERS
                        PERL_DONT_CREATE_GVSV
                        PERL_HASH_FUNC_ONE_AT_A_TIME_HARD
                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP
                        PERL_NEW_COPY_ON_WRITE PERL_PRESERVE_IVUV
                        USE_64_BIT_ALL USE_64_BIT_INT USE_ITHREADS
                        USE_LARGE_FILES USE_LOCALE USE_LOCALE_COLLATE
                        USE_LOCALE_CTYPE USE_LOCALE_NUMERIC USE_LOCALE_TIME
                        USE_PERLIO USE_PERL_ATOF USE_REENTRANT_API
                        USE_SITECUSTOMIZE
  Locally applied patches:
        Fedora Patch1: Removes date check, Fedora/RHEL specific
        Fedora Patch3: support for libdir64
        Fedora Patch4: use libresolv instead of libbind
        Fedora Patch5: USE_MM_LD_RUN_PATH
        Fedora Patch6: Skip hostname tests, due to builders not being
network capable
        Fedora Patch7: Dont run one io test due to random builder failures
        Fedora Patch15: Define SONAME for libperl.so
        Fedora Patch16: Install libperl.so to -Dshrpdir value
        Fedora Patch22: Document Math::BigInt::CalcEmu requires
Math::BigInt (CPAN RT#85015)
        Fedora Patch26: Make *DBM_File desctructors thread-safe (RT#61912)
        Fedora Patch27: Make PadlistNAMES() lvalue again (CPAN RT#101063)
        Fedora Patch28: Make magic vtable writable as a work-around for
Coro (CPAN RT#101063)
        Fedora Patch29: Fix CVE-2016-2381 (ambiguous environment variables
handling)
        Fedora Patch200: Link XS modules to libperl.so with EU::CBuilder on
Linux
        Fedora Patch201: Link XS modules to libperl.so with EU::MM on Linux
  Built under linux
  Compiled at Mar  2 2016 13:27:57
  %ENV:
    PERL5LIB="/home/zw/zwperl/lib"
  @INC:
    /home/zw/zwperl/lib
    /usr/local/lib64/perl5
    /usr/local/share/perl5
    /usr/lib64/perl5/vendor_perl
    /usr/share/perl5/vendor_perl
    /usr/lib64/perl5
    /usr/share/perl5
    .


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2016-05-15 9:27 GMT+02:00 Norbert Preining <norbert at preining.info>:

> Hi Petr,
>
> > I confirm, have the same problem.
>
> Strange. Can you please try the following command lineL:
>         perl -e 'print  ( (stat "/bin/true")[7], "\n");'
> (hopeing you have /bin/true ;-)
>
> Which version of perl?
>
> Norbert
>
> ------------------------------------------------------------------------
> PREINING, Norbert                               http://www.preining.info
> JAIST, Japan                                 TeX Live & Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
> ------------------------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160515/39b3d3f2/attachment-0001.html>

From petr at olsak.net  Sun May 15 09:42:26 2016
From: petr at olsak.net (Petr Olsak)
Date: Sun, 15 May 2016 09:42:26 +0200
Subject: [tex-live] Pretest tlmgr downloads fail
In-Reply-To: <20160515072740.GP4108@logic.at>
References: <alpine.DEB.2.10.1605150917560.19099@newton.feld.cvut.cz>
 <20160515072740.GP4108@logic.at>
Message-ID: <alpine.DEB.2.10.1605150941000.19099@newton.feld.cvut.cz>



On Sun, 15 May 2016, Norbert Preining wrote:

> Hi Petr,
>
>> I confirm, have the same problem.
>
> Strange. Can you please try the following command lineL:
> 	perl -e 'print  ( (stat "/bin/true")[7], "\n");'
> (hopeing you have /bin/true ;-)
>
> Which version of perl?

$ perl -e 'print  ( (stat "/bin/true")[7], "\n");'
27168

$ perl -version

This is perl 5, version 18, subversion 2 (v5.18.2) built for 
x86_64-linux-gnu-thread-multi
(with 44 registered patches, see perl -V for more detail)

Copyright 1987-2013, Larry Wall

Perl may be copied only under the terms of either the Artistic License or 
the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using "man perl" or "perldoc perl".  If you have access to the
Internet, point your browser at http://www.perl.org/, the Perl Home Page.


From Herbert.Voss at FU-Berlin.DE  Sun May 15 09:39:40 2016
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Sun, 15 May 2016 09:39:40 +0200
Subject: [tex-live] Pretest tlmgr downloads fail
In-Reply-To: <20160515072413.GO4108@logic.at>
References: <BE9BA1D2-26D3-4CFA-AA2B-27E7B29D2FAC@mq.edu.au>
 <20160515070958.GN4108@logic.at> <20160515072413.GO4108@logic.at>
Message-ID: <573827BC.70204@FU-Berlin.DE>

Am 15.05.2016 um 09:24 schrieb Norbert Preining:
> Now with TLUtils.pm

I had the same problem with Linux. And with your attached TLUtils.pm
I get:

voss at shania:~> tlupdateP
tlmgr: package repository http://ftp.cstug.cz/pub/tex/local/tlpretest 
(verified)
tlmgr: saving backups to /usr/local/texlive/2016/tlpkg/backups
[ 1/38, ??:??/??:??] update: biblatex-apa [233k] (39930 -> 41125) ... 
/usr/local/texlive/2016/temp/biblatex-apa.tar.xz: Datei oder Verzeichnis 
nicht gefunden
DEBUG+++ xzfile = /usr/local/texlive/2016/temp/biblatex-apa.tar.xz, 
checksize = 18536
DEBUG+++ stat xzfile =
Use of uninitialized value $filesize in numeric ne (!=) at 
/usr/local/texlive/2016/tlpkg/TeXLive/TLUtils.pm line 1992.
TLUtils::check_file: removing 
/usr/local/texlive/2016/temp/biblatex-apa.tar.xz, sizes differ:
Use of uninitialized value $filesize in concatenation (.) or string at 
/usr/local/texlive/2016/tlpkg/TeXLive/TLUtils.pm line 1994.
TLUtils::check_file:   TL=, arg=18536
TLPDB::_install_package: downloading did not succeed
tlmgr: Installation of new version of biblatex-apa failed, trying to unwind.
tlmgr: Restoring old package state succeeded.
done
[ 2/38, 00:01/02:20] update: cjkpunct [151k] (15878 -> 41119) ... 
/usr/local/texlive/2016/temp/cjkpunct.tar.xz: Datei oder Ver
...

--------------------------------------------------------------------------


voss at shania:~> perl -e 'print  ( (stat "/bin/true")[7], "\n");'
27328
voss at shania:~> perl -v

This is perl 5, version 18, subversion 2 (v5.18.2) built for 
x86_64-linux-thread-multi

Copyright 1987-2013, Larry Wall

Perl may be copied only under the terms of either the Artistic License 
or the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using "man perl" or "perldoc perl".  If you have access to the
Internet, point your browser at http://www.perl.org/, the Perl Home Page.




Herbert


From Herbert.Voss at FU-Berlin.DE  Sun May 15 09:45:29 2016
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Sun, 15 May 2016 09:45:29 +0200
Subject: [tex-live] Pretest tlmgr downloads fail
In-Reply-To: <573827BC.70204@FU-Berlin.DE>
References: <BE9BA1D2-26D3-4CFA-AA2B-27E7B29D2FAC@mq.edu.au>
 <20160515070958.GN4108@logic.at> <20160515072413.GO4108@logic.at>
 <573827BC.70204@FU-Berlin.DE>
Message-ID: <57382919.3000501@FU-Berlin.DE>

Am 15.05.2016 um 09:39 schrieb Herbert Voss:

> voss at shania:~> tlupdateP
> tlmgr: package repository http://ftp.cstug.cz/pub/tex/local/tlpretest
> (verified)
> tlmgr: saving backups to /usr/local/texlive/2016/tlpkg/backups
> [ 1/38, ??:??/??:??] update: biblatex-apa [233k] (39930 -> 41125) ...
> /usr/local/texlive/2016/temp/biblatex-apa.tar.xz: Datei oder Verzeichnis
> nicht gefunden

curious. I created the directory /usr/local/texlive/2016/temp/
by hand and then it worked.

Herbert



> DEBUG+++ xzfile = /usr/local/texlive/2016/temp/biblatex-apa.tar.xz,
> checksize = 18536
> DEBUG+++ stat xzfile =
> Use of uninitialized value $filesize in numeric ne (!=) at
> /usr/local/texlive/2016/tlpkg/TeXLive/TLUtils.pm line 1992.
> TLUtils::check_file: removing
> /usr/local/texlive/2016/temp/biblatex-apa.tar.xz, sizes differ:
> Use of uninitialized value $filesize in concatenation (.) or string at
> /usr/local/texlive/2016/tlpkg/TeXLive/TLUtils.pm line 1994.
> TLUtils::check_file:   TL=, arg=18536
> TLPDB::_install_package: downloading did not succeed
> tlmgr: Installation of new version of biblatex-apa failed, trying to
> unwind.
> tlmgr: Restoring old package state succeeded.
> done
> [ 2/38, 00:01/02:20] update: cjkpunct [151k] (15878 -> 41119) ...
> /usr/local/texlive/2016/temp/cjkpunct.tar.xz: Datei oder Ver
> ...
>
> --------------------------------------------------------------------------
>
>
> voss at shania:~> perl -e 'print  ( (stat "/bin/true")[7], "\n");'
> 27328
> voss at shania:~> perl -v
>
> This is perl 5, version 18, subversion 2 (v5.18.2) built for
> x86_64-linux-thread-multi
>
> Copyright 1987-2013, Larry Wall
>
> Perl may be copied only under the terms of either the Artistic License
> or the
> GNU General Public License, which may be found in the Perl 5 source kit.
>
> Complete documentation for Perl, including FAQ lists, should be found on
> this system using "man perl" or "perldoc perl".  If you have access to the
> Internet, point your browser at http://www.perl.org/, the Perl Home Page.
>
>
>
>
> Herbert
>


From norbert at preining.info  Sun May 15 09:47:09 2016
From: norbert at preining.info (Norbert Preining)
Date: Sun, 15 May 2016 16:47:09 +0900
Subject: [tex-live] Pretest tlmgr downloads fail
In-Reply-To: <alpine.DEB.2.10.1605150937130.19099@newton.feld.cvut.cz>
References: <alpine.DEB.2.10.1605150937130.19099@newton.feld.cvut.cz>
Message-ID: <20160515074709.GS4108@logic.at>

Does
	mkdir /usr/local/texlive/2016/temp
help?

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From petr at olsak.net  Sun May 15 10:04:08 2016
From: petr at olsak.net (Petr Olsak)
Date: Sun, 15 May 2016 10:04:08 +0200
Subject: [tex-live] Pretest tlmgr downloads fail
In-Reply-To: <20160515074709.GS4108@logic.at>
References: <alpine.DEB.2.10.1605150937130.19099@newton.feld.cvut.cz>
 <20160515074709.GS4108@logic.at>
Message-ID: <alpine.DEB.2.10.1605151002030.19099@newton.feld.cvut.cz>



On Sun, 15 May 2016, Norbert Preining wrote:

> Does
> 	mkdir /usr/local/texlive/2016/temp
> help?

Yes, help.

Petr Olsak


From d.p.carlisle at gmail.com  Sun May 15 10:33:26 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Sun, 15 May 2016 09:33:26 +0100
Subject: [tex-live] LuaLaTeX potential problems
In-Reply-To: <C585929F-54B0-49B2-B970-2CE62D85A030@wideopenwest.com>
References: <alpine.DEB.2.10.1605140805170.17411@newton.feld.cvut.cz>
 <CAEW6iOhBqdOn_wwTpydZt8ZFhUhNucFt7ZGYsgS7704i5FaVWg@mail.gmail.com>
 <CAEW6iOjK-Oc7M8LvkWjjcU_m+FNzQD1cs45coOO6rDFNfX4j2A@mail.gmail.com>
 <C585929F-54B0-49B2-B970-2CE62D85A030@wideopenwest.com>
Message-ID: <CAEW6iOhCTGnd_PGWV7BO84zo1SLZ7fTk1fWi_+vo+uu3uy8b4g@mail.gmail.com>

On 14 May 2016 at 22:56, Herbert Schulz <herbs at wideopenwest.com> wrote:
>> On May 14, 2016, at 7:02 AM, David Carlisle <d.p.carlisle at gmail.com> wrote:
>>
>> Just to confirm this is already reported to the standalone source repository
>>
>> https://bitbucket.org/martin_scharrer/standalone/issues/23/no-write18-or-pdfxxx-commands-in-luatex
>>
>> David
>
> Howdy,
>
> Thanks for this information. I have a tikz example file that needs to call gnuplot (via \write18) that failed under LuaLaTeX but adding \RequirePackage{shellesc} fixed it up.
>
> Good Luck,
>
> Herb Schulz
> (herbs at wideopenwest dot com)
>
>

If you were calling write18 directly yourself that's probably how it
has to be. If the system call was behind some tikz interface tikz
probably should (now) be using os.exec not write18 on luatex, which is
something you could report to them.

David

From d.p.carlisle at gmail.com  Sun May 15 11:31:57 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Sun, 15 May 2016 10:31:57 +0100
Subject: [tex-live] tlmgr: Use of uninitialized value $filesize
Message-ID: <CAEW6iOhNRums4fSfkkkPaPRDP3yOz2LikSZkN03xmoeDMawEag@mail.gmail.com>

Hi,

update this morning (on a cygwin64 build) is failing on every package

Use of uninitialized value $filesize in numeric ne (!=) at
/usr/local/texlive/2016/tlpkg/TeXLive/TLUtils.pm line 1989.
TLUtils::check_file: removing
/usr/local/texlive/2016/temp/mathastext.tar.xz, sizes differ:
Use of uninitialized value $filesize in concatenation (.) or string at
/usr/local/texlive/2016/tlpkg/TeXLive/TLUtils.pm line 1991.
TLUtils::check_file:   TL=, arg=14676
TLPDB::_install_package: downloading did not succeed
tlmgr: Installation of new version of mathastext failed, trying to unwind.
[32/55, 01:35/03:09] update: mathastext [576k] (40875 -> 41096) ...
tlmgr: Restoring old package state succeeded.

tlmgr --self
worked OK but

tlmgr --all
less so?

$ tlmgr update --self
tlmgr: package repository http://ftp.cstug.cz/pub/tex/local/tlpretest (verified)
tlmgr: saving backups to /usr/local/texlive/2016/tlpkg/backups
tlmgr: no self-updates for tlmgr available.

Then I tried to use the update shell script instead, downloaded it but:

$ /c/users/davidc/Downloads/update-tlmgr-latest\(1\).sh
Verifying archive integrity... All good.
Uncompressing TeX Live Manager
Updater.............................................................................................................................................................................
./runme.sh: updating in /usr/local/texlive/2016...
./runme.sh: tlmgr version says this is TeX Live 2016
./runme.sh: proceeding with tlmgr update.
D:tlmgr:main: ::tldownload_server defined
Unknown directive ...containerchecksum
96c69ba0583dd906d4711c0fd3f4ef96c304ff98b81039c722e7919e876c4126cc9bc4a48c49a6c99df03a1e7287a06933f658e537edda9be2c5546280743cf6...
, please fix it! at /usr/local/texlive/2016/tlpkg/TeXLive/TLPOBJ.pm
line 210, <TMP> line 1094.
./runme.sh: done.


David

From norbert at preining.info  Sun May 15 12:07:44 2016
From: norbert at preining.info (Norbert Preining)
Date: Sun, 15 May 2016 19:07:44 +0900
Subject: [tex-live] tlmgr: Use of uninitialized value $filesize
In-Reply-To: <CAEW6iOhNRums4fSfkkkPaPRDP3yOz2LikSZkN03xmoeDMawEag@mail.gmail.com>
References: <CAEW6iOhNRums4fSfkkkPaPRDP3yOz2LikSZkN03xmoeDMawEag@mail.gmail.com>
Message-ID: <20160515100744.GW4108@logic.at>

> update this morning (on a cygwin64 build) is failing on every package

See other emails. Either create 2016/temp or wait till tomorrow ;-)

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From herbs at wideopenwest.com  Sun May 15 13:59:25 2016
From: herbs at wideopenwest.com (Herbert Schulz)
Date: Sun, 15 May 2016 06:59:25 -0500
Subject: [tex-live] LuaLaTeX potential problems
In-Reply-To: <CAEW6iOhCTGnd_PGWV7BO84zo1SLZ7fTk1fWi_+vo+uu3uy8b4g@mail.gmail.com>
References: <alpine.DEB.2.10.1605140805170.17411@newton.feld.cvut.cz>
 <CAEW6iOhBqdOn_wwTpydZt8ZFhUhNucFt7ZGYsgS7704i5FaVWg@mail.gmail.com>
 <CAEW6iOjK-Oc7M8LvkWjjcU_m+FNzQD1cs45coOO6rDFNfX4j2A@mail.gmail.com>
 <C585929F-54B0-49B2-B970-2CE62D85A030@wideopenwest.com>
 <CAEW6iOhCTGnd_PGWV7BO84zo1SLZ7fTk1fWi_+vo+uu3uy8b4g@mail.gmail.com>
Message-ID: <32A8314B-9313-4CA7-BFE4-675E50518C34@wideopenwest.com>

> On May 15, 2016, at 3:33 AM, David Carlisle <d.p.carlisle at gmail.com> wrote:
> 
> On 14 May 2016 at 22:56, Herbert Schulz <herbs at wideopenwest.com> wrote:
>>> On May 14, 2016, at 7:02 AM, David Carlisle <d.p.carlisle at gmail.com> wrote:
>>> 
>>> Just to confirm this is already reported to the standalone source repository
>>> 
>>> https://bitbucket.org/martin_scharrer/standalone/issues/23/no-write18-or-pdfxxx-commands-in-luatex
>>> 
>>> David
>> 
>> Howdy,
>> 
>> Thanks for this information. I have a tikz example file that needs to call gnuplot (via \write18) that failed under LuaLaTeX but adding \RequirePackage{shellesc} fixed it up.
>> 
>> Good Luck,
>> 
>> Herb Schulz
>> (herbs at wideopenwest dot com)
>> 
>> 
> 
> If you were calling write18 directly yourself that's probably how it
> has to be. If the system call was behind some tikz interface tikz
> probably should (now) be using os.exec not write18 on luatex, which is
> something you could report to them.
> 
> David

Howdy,

In this case the \write18 is via the tikz-fct. I'll report it to them.

Thanks again.

Good Luck,

Herb Schulz
(herbs at wideopenwest dot com)







From martinfeck at aol.com  Sun May 15 10:08:57 2016
From: martinfeck at aol.com (Martin Feck)
Date: Sun, 15 May 2016 10:08:57 +0200
Subject: [tex-live] tex-live Digest, Vol 160, Issue 52
In-Reply-To: <mailman.449.1463298335.3842.tex-live@tug.org>
References: <mailman.449.1463298335.3842.tex-live@tug.org>
Message-ID: <c65e78f8-d801-ce55-3d77-8589881632e3@aol.com>

I created the directory/usr/local/texlive/2016/temp/
by hand and then it worked.


Am 15.05.2016 um 09:45 schrieb tex-live-request at tug.org:
> I created the directory/usr/local/texlive/2016/temp/
> by hand and then it worked.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160515/da27a43d/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: martinfeck.vcf
Type: text/x-vcard
Size: 100 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160515/da27a43d/attachment-0001.vcf>

From bernhard.kleine at gmx.net  Sun May 15 14:48:40 2016
From: bernhard.kleine at gmx.net (Bernhard Kleine)
Date: Sun, 15 May 2016 14:48:40 +0200
Subject: [tex-live] pretest failed with size mismatched
Message-ID: <8cdc615e-a505-78a6-18aa-c82f4ff376e4@gmx.net>

Today I tried to install pretest and failed:

    Loading ftp://ftp.cstug.cz/pub/tex/local/tlpretest/tlpkg/texlive.tlpdb
    Installing TeX Live 2016 from: ftp://ftp.cstug.cz/pub/tex/local/tlpretest (not verified)
    Platform: win32 => 'Windows'
    Distribution: net  (downloading)
    Using URL: ftp://ftp.cstug.cz/pub/tex/local/tlpretest
    Directory for temporary files: C:/Users/bk/AppData/Local/Temp
    Installing [0001/3241, time/total: ??:??/??:??]: 12many [376k]
    TLUtils::check_file: removing F:\texlive\2016pre\temp\12many.tar.xz, sizes differ:
    TLUtils::check_file:   TL=, arg=2100
    TLPDB::_install_package: downloading did not succeed
    Installation failed.
    Rerunning the installer will try to restart the installation.
    Or you can restart by running the installer with:
      install-tl-windows.bat --profile installation.profile [EXTRA-ARGS]
    or
      install-tl-advanced.bat --profile installation.profile [EXTRA-ARGS]
    f:\Downloads\texlive\install-tl\install-tl-20160515\install-tl: Writing log in current directory: f:/Downloads/texlive/install-tl/install-tl-20160515/install-tl.log

    Dr?cken Sie eine beliebige Taste . . .

Installation was with the following command:
install-tl-advanced -repository
ftp://ftp.cstug.cz/pub/tex/local/tlpretest/ -gui perltk

This failed either as user and as admin to.

Please advise.

Kind regards

Bernhard Kleine

--
spitzhalde9
79853 lenzkirch
bernhard.kleine at gmx.net
www.b-kleine.com, www.urseetal.net
-
thunderbird mit enigmail
GPG schl?ssel: D5257409
fingerprint:
08 B7 F8 70 22 7A FC C1 15 49 CA A6 C7 6F A0 2E D5 25 74 09

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160515/ecba5613/attachment.html>

From jfbu at free.fr  Sun May 15 16:38:03 2016
From: jfbu at free.fr (jfbu)
Date: Sun, 15 May 2016 16:38:03 +0200
Subject: [tex-live] 3.4.4 System font configuration for XeTEX and LuaTEX
In-Reply-To: <CAC1phyY3PR7OxvZrc_Py-cvYtRDsksNxv+L+_XEd0d2ORnj40w@mail.gmail.com>
References: <04B5F63F-0F54-44EC-9C48-3D477FB4A899@free.fr>
 <201605132249.u4DMnYWS030466@freefriends.org>
 <CAC1phyY3PR7OxvZrc_Py-cvYtRDsksNxv+L+_XEd0d2ORnj40w@mail.gmail.com>
Message-ID: <FFEAD54F-6BBD-4E22-B9C1-2F9ECBBA477A@free.fr>

Hi


Le 14 mai 2016 ? 09:37, Zdenek Wagner <zdenek.wagner at gmail.com> a
?crit :

>> 2016-05-14 0:49 GMT+02:00 Karl Berry <karl at freefriends.org>:
>>     because in recent years I don't think that was the case.
>> 
>> I suppose you're right. I'll have to ask about what can be
>> sensibly said instead. Thanks.
>> 
>>     Else one must use filenames, or fontspec with ExternalLocation
>> 
>> Well, that's preferable anyway :). --karl
> As I remember, someone has already mentioned that the font
> instructions for Mac OSX are wrong.

I think that was me, a few weeks ago ;-) and perhaps also
last year ;-) 

Then the formulation changed but the new formulation says that
things are automatically set-up for XeTeX on mac os x, which is
wrong.


> I do not have Mac so I cannot try whether it is really necessary
> to copy the fonts, maybe the symlink would be sufficient. And I do
> not know whether the font files must be symlinked, maybe just the
> parent directory may be symlinked. I do not know whether Mac can
> look for fonts into subdirectories.
> 

1. I had not tried earlier the symlink approach because the Mac
comes with FontBook app which has a concept of "Font Library"
which one can add to it without having to copy or symlink the
fonts. Also I feared that perhaps I would have to symlink
individually files or many repertories.

The "Font Library" method initially seemed to work but I soon
realized it was a nightmare, because FontBook.app is seriously
broken (at least on Mavericks, but Herb indicates he also has had
bad experiences).

Thus I dropped it some months ago and entered resignation mode.

(Michael Sharpe has some very nice extras to his font packages so
that even when accessing a font by filename with xelatex one does
not have to list explicitely the bold, italic, etc.. variants, but
doing this for all fonts obviously requires extra work)

2. But Herb Schulz gave me very good advice to simply symlink the
texmf-dist/fonts/opentype (and I did also texmf-dist/fonts/truetype)
from $HOME/Library/Fonts. The miracle is :

a. FontBook.app is still usable after that. There is only a
slight delay in opening it, about two seconds during which the font
list is prepared.

b. all fonts in sub-repertories are found nicely

c. there are a few duplicates between .otf and .ttf (FreeSerif,
FreeSans, FreeMono in particular) but the FontBook GUI allows to
choose which fonts to validate and this works with no hiccup.
(which is surprising regarding FontBook.app)

d. there is slight disadvantage that some fonts with names
starting with "drm" occupies many (dozens) lines in FontBook
display, but that's cosmetic.

After my bad experience with the concept of "Font Library" I was
very much surprised that simply putting symlinks worked out so
well. Thanks Herb !

And I could confirm that after that, all the TeXLive distributed
opentype/truetype fonts become generally available to Mac
Applications such as TextEdit, OpenOffice, etc... and to XeTeX
naturally. The delay I mentioned above applies only to FontBook.app,
applications such as OpenOffice have their font popup instantly
available with TeX Gyre Termes etc... and naturally XeTeX works
with no delay either.

3. There is perhaps an impact on LuaTeX+luaotfload, because the
TeXLive distributed fonts will be indexed twice. I do not know if
this slows down LuaTeX. I opened a ticked on github site of
luaotfload about this asking for info.

https://github.com/lualatex/luaotfload/issues/359

4. The specific way to symlink by Herb takes advantage of the
TeXDist structure which has been part of MacTeX install for some
years, in /Library/TeX. This way the symlinks are dynamical and
obey on the fly change of TeXLive distribution year.

ln -s /Library/TeX/Root/texmf-dist/fonts/opentype
~/Library/Fonts/TeXOpenType

I did also

ln -s /Library/TeX/Root/texmf-dist/fonts/truetype
~/Library/Fonts/TeXTrueType

but had to resolve a few duplicates then as mentioned above.

(the point is that /Library/TeX/Root is already itself a symlink,
and when changing distribution year via the former Panel or via
TLU, its target is automatically updated)

5. To make my story complete: took me a while to go to the root
of the following problem. I was surprised to see that log files
with \XeTeXtracingfonts1 indicated the opentype fonts were picked
always from texlive/2015, even if working with TL2014 or TL2016
pretest.

Turns out that my earlier attempt at adding TeXLive OpenType fonts
to general mac os availability via a "Font Library" added to FontBook.app
had resulted in some non-removed cache in /private/var/folders.

I looked
in vain everywhere in my $HOME and in obvious system locations,
for such a file, as it was obviously the only explanation to the
observed behavior and was finally saved by the tip at

http://osxdaily.com/2015/01/08/clear-font-caches-databases-mac-os-x/

which is to do $ sudo atsutil databases -remove

it is important to reboot immediately after that.

This last item is only of relevance to people who messed up with
FontBook.app before, I guess.

To sum up: For smooth experience with XeTeX on Mac OS X, some
people (me following Herb) have found that 

ln -s /Library/TeX/Root/texmf-dist/fonts/opentype ~/Library/Fonts/TeXOpenType

and

ln -s /Library/TeX/Root/texmf-dist/fonts/truetype ~/Library/Fonts/TeXTrueType

is a well-working approach. In some rare cases, it might be needed to do
(before or after it does not matter)

   sudo atsutil databases -remove

and
to reboot. That's only to clean-up a pre-existing dysfunctional font situation.

Hope it helps.

Jean-Fran?ois



From jfbu at free.fr  Sun May 15 16:42:25 2016
From: jfbu at free.fr (jfbu)
Date: Sun, 15 May 2016 16:42:25 +0200
Subject: [tex-live] 3.4.4 System font configuration for XeTEX and LuaTEX
In-Reply-To: <FFEAD54F-6BBD-4E22-B9C1-2F9ECBBA477A@free.fr>
References: <04B5F63F-0F54-44EC-9C48-3D477FB4A899@free.fr>
 <201605132249.u4DMnYWS030466@freefriends.org>
 <CAC1phyY3PR7OxvZrc_Py-cvYtRDsksNxv+L+_XEd0d2ORnj40w@mail.gmail.com>
 <FFEAD54F-6BBD-4E22-B9C1-2F9ECBBA477A@free.fr>
Message-ID: <3A0B1B20-B69F-4EA5-A32F-CA9A5F82E913@free.fr>


Le 15 mai 2016 ? 16:38, jfbu <jfbu at free.fr> a ?crit :

> ln -s /Library/TeX/Root/texmf-dist/fonts/opentype
> ~/Library/Fonts/TeXOpenType
> 
> I did also
> 
> ln -s /Library/TeX/Root/texmf-dist/fonts/truetype
> ~/Library/Fonts/TeXTrueType

these invocations must be each on one line naturally. Sorry for hard-wrap.

From jhielscher at posteo.de  Sun May 15 16:11:12 2016
From: jhielscher at posteo.de (jhielscher at posteo.de)
Date: Sun, 15 May 2016 16:11:12 +0200
Subject: [tex-live] Fresh install fails
Message-ID: <a3f564b7919504ba07ff2293022882f4@posteo.de>

Hi,

I was trying to do a fresh install of tl16-pretest (as I had 
successfully done on other boxes before) on linux-x86_64.
install-tl fails (after downloading texlive.tlpdb{.xz,}) complaining

./install-tl: open 
tlpdb(ftp://ftp.math.utah.edu/pub/texlive/tlpretest/tlpkg/texlive.tlpdb) 
failed: Inappropriate ioctl for device at tlpkg/TeXLive/TLPDB.pm line 
358.

Selecting other mirrors does not help, nor does switching from http to 
ftp.

Following the discussion this morning, creating $TEXDIR/temp helped to 
make the broken update of existing tl16-pretest installations work 
again!
But for fresh installs, naively creating such a temp dir in the 
installer root folder didn't help.

Best
Johannes

From karl at freefriends.org  Mon May 16 00:42:13 2016
From: karl at freefriends.org (Karl Berry)
Date: Sun, 15 May 2016 22:42:13 +0000
Subject: [tex-live] tl16 release schedule
Message-ID: <201605152242.u4FMgD9A027057@freefriends.org>

At present, I hope to take the final updates from CTAN on Wednesday
(May 18), and do the final TL image build on Sunday (May 22).

If there are critical problems outstanding that anyone feels we need to
wait for, let me know the specifics.  --karl

From zdenek.wagner at gmail.com  Mon May 16 01:24:59 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 16 May 2016 01:24:59 +0200
Subject: [tex-live] 3.4.4 System font configuration for XeTEX and LuaTEX
In-Reply-To: <FFEAD54F-6BBD-4E22-B9C1-2F9ECBBA477A@free.fr>
References: <04B5F63F-0F54-44EC-9C48-3D477FB4A899@free.fr>
 <201605132249.u4DMnYWS030466@freefriends.org>
 <CAC1phyY3PR7OxvZrc_Py-cvYtRDsksNxv+L+_XEd0d2ORnj40w@mail.gmail.com>
 <FFEAD54F-6BBD-4E22-B9C1-2F9ECBBA477A@free.fr>
Message-ID: <CAC1phybY5HP-9t3+4jmWDjMAqOe04QXxD3yvcHrfFRPDmHYHXQ@mail.gmail.com>

Hi,

this is good to know. A friend of mine just copied all the font files which
I do not consider good. Imagine that one year later you will have to remove
TL fonts and install the new versions. Copying all files can then turn into
a nightmare. This is why I sggested to try to symlink the directory tree.
It is good news that it works.

I have not only the TL fonts but also a huge collection of commercial
fonts. Yes, when I want to see the font list in any Linux application, it
takes some time but I do not need it frequently. I prefer having the fonts
available.


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2016-05-15 16:38 GMT+02:00 jfbu <jfbu at free.fr>:

> Hi
>
>
> Le 14 mai 2016 ? 09:37, Zdenek Wagner <zdenek.wagner at gmail.com> a
> ?crit :
>
> >> 2016-05-14 0:49 GMT+02:00 Karl Berry <karl at freefriends.org>:
> >>     because in recent years I don't think that was the case.
> >>
> >> I suppose you're right. I'll have to ask about what can be
> >> sensibly said instead. Thanks.
> >>
> >>     Else one must use filenames, or fontspec with ExternalLocation
> >>
> >> Well, that's preferable anyway :). --karl
> > As I remember, someone has already mentioned that the font
> > instructions for Mac OSX are wrong.
>
> I think that was me, a few weeks ago ;-) and perhaps also
> last year ;-)
>
> Then the formulation changed but the new formulation says that
> things are automatically set-up for XeTeX on mac os x, which is
> wrong.
>
>
> > I do not have Mac so I cannot try whether it is really necessary
> > to copy the fonts, maybe the symlink would be sufficient. And I do
> > not know whether the font files must be symlinked, maybe just the
> > parent directory may be symlinked. I do not know whether Mac can
> > look for fonts into subdirectories.
> >
>
> 1. I had not tried earlier the symlink approach because the Mac
> comes with FontBook app which has a concept of "Font Library"
> which one can add to it without having to copy or symlink the
> fonts. Also I feared that perhaps I would have to symlink
> individually files or many repertories.
>
> The "Font Library" method initially seemed to work but I soon
> realized it was a nightmare, because FontBook.app is seriously
> broken (at least on Mavericks, but Herb indicates he also has had
> bad experiences).
>
> Thus I dropped it some months ago and entered resignation mode.
>
> (Michael Sharpe has some very nice extras to his font packages so
> that even when accessing a font by filename with xelatex one does
> not have to list explicitely the bold, italic, etc.. variants, but
> doing this for all fonts obviously requires extra work)
>
> 2. But Herb Schulz gave me very good advice to simply symlink the
> texmf-dist/fonts/opentype (and I did also texmf-dist/fonts/truetype)
> from $HOME/Library/Fonts. The miracle is :
>
> a. FontBook.app is still usable after that. There is only a
> slight delay in opening it, about two seconds during which the font
> list is prepared.
>
> b. all fonts in sub-repertories are found nicely
>
> c. there are a few duplicates between .otf and .ttf (FreeSerif,
> FreeSans, FreeMono in particular) but the FontBook GUI allows to
> choose which fonts to validate and this works with no hiccup.
> (which is surprising regarding FontBook.app)
>
> d. there is slight disadvantage that some fonts with names
> starting with "drm" occupies many (dozens) lines in FontBook
> display, but that's cosmetic.
>
> After my bad experience with the concept of "Font Library" I was
> very much surprised that simply putting symlinks worked out so
> well. Thanks Herb !
>
> And I could confirm that after that, all the TeXLive distributed
> opentype/truetype fonts become generally available to Mac
> Applications such as TextEdit, OpenOffice, etc... and to XeTeX
> naturally. The delay I mentioned above applies only to FontBook.app,
> applications such as OpenOffice have their font popup instantly
> available with TeX Gyre Termes etc... and naturally XeTeX works
> with no delay either.
>
> 3. There is perhaps an impact on LuaTeX+luaotfload, because the
> TeXLive distributed fonts will be indexed twice. I do not know if
> this slows down LuaTeX. I opened a ticked on github site of
> luaotfload about this asking for info.
>
> https://github.com/lualatex/luaotfload/issues/359
>
> 4. The specific way to symlink by Herb takes advantage of the
> TeXDist structure which has been part of MacTeX install for some
> years, in /Library/TeX. This way the symlinks are dynamical and
> obey on the fly change of TeXLive distribution year.
>
> ln -s /Library/TeX/Root/texmf-dist/fonts/opentype
> ~/Library/Fonts/TeXOpenType
>
> I did also
>
> ln -s /Library/TeX/Root/texmf-dist/fonts/truetype
> ~/Library/Fonts/TeXTrueType
>
> but had to resolve a few duplicates then as mentioned above.
>
> (the point is that /Library/TeX/Root is already itself a symlink,
> and when changing distribution year via the former Panel or via
> TLU, its target is automatically updated)
>
> 5. To make my story complete: took me a while to go to the root
> of the following problem. I was surprised to see that log files
> with \XeTeXtracingfonts1 indicated the opentype fonts were picked
> always from texlive/2015, even if working with TL2014 or TL2016
> pretest.
>
> Turns out that my earlier attempt at adding TeXLive OpenType fonts
> to general mac os availability via a "Font Library" added to FontBook.app
> had resulted in some non-removed cache in /private/var/folders.
>
> I looked
> in vain everywhere in my $HOME and in obvious system locations,
> for such a file, as it was obviously the only explanation to the
> observed behavior and was finally saved by the tip at
>
> http://osxdaily.com/2015/01/08/clear-font-caches-databases-mac-os-x/
>
> which is to do $ sudo atsutil databases -remove
>
> it is important to reboot immediately after that.
>
> This last item is only of relevance to people who messed up with
> FontBook.app before, I guess.
>
> To sum up: For smooth experience with XeTeX on Mac OS X, some
> people (me following Herb) have found that
>
> ln -s /Library/TeX/Root/texmf-dist/fonts/opentype
> ~/Library/Fonts/TeXOpenType
>
> and
>
> ln -s /Library/TeX/Root/texmf-dist/fonts/truetype
> ~/Library/Fonts/TeXTrueType
>
> is a well-working approach. In some rare cases, it might be needed to do
> (before or after it does not matter)
>
>    sudo atsutil databases -remove
>
> and
> to reboot. That's only to clean-up a pre-existing dysfunctional font
> situation.
>
> Hope it helps.
>
> Jean-Fran?ois
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160516/a0568492/attachment-0001.html>

From preining at logic.at  Mon May 16 01:27:46 2016
From: preining at logic.at (Norbert Preining)
Date: Mon, 16 May 2016 08:27:46 +0900
Subject: [tex-live] Fresh install fails
In-Reply-To: <a3f564b7919504ba07ff2293022882f4@posteo.de>
References: <a3f564b7919504ba07ff2293022882f4@posteo.de>
Message-ID: <20160515232746.GC17189@wienerschnitzel>

On Sun, 15 May 2016, jhielscher at posteo.de wrote:
> I was trying to do a fresh install of tl16-pretest (as I had successfully

Should be fixed with today's update, too.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From preining at logic.at  Mon May 16 05:18:57 2016
From: preining at logic.at (Norbert Preining)
Date: Mon, 16 May 2016 12:18:57 +0900
Subject: [tex-live] Default local disk repository seems to be wrong
 after install-tl from rsync'ed mirror
In-Reply-To: <20150419122924.GP29795@auth.logic.tuwien.ac.at>
References: <140418FF-638C-43A0-8B75-6453E7E7F145@free.fr>
 <20150419122924.GP29795@auth.logic.tuwien.ac.at>
Message-ID: <20160516031857.GA2943@wienerschnitzel>

On Sun, 19 Apr 2015, Norbert Preining wrote:
> > ./install-tl -repository .
> 
> Thanks. There is a missing rewrite from relative to absolute path
> happening. I need to look into it, although it was like this since
> ever ;-)

Took some time, but now I have changed it. The next install-tl script
should save a proper location even when . is passed

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From jfbu at free.fr  Mon May 16 10:12:04 2016
From: jfbu at free.fr (jfbu)
Date: Mon, 16 May 2016 10:12:04 +0200
Subject: [tex-live] luaotfload not in latex-recommended
Message-ID: <289BF6F7-A4BC-45CD-A80E-976DCD5CA9F1@free.fr>

Hi,

for some reason I tried the basic scheme.

One can already use lualatex on sample2e. There is no fontspec
thus I installed the collection latex-recommended.

But one can not use lualatex on a document using fontspec
because luaotfload is not part of latex-recommended.

I needed to install

luaotfload
lualibs
luatex-def

and xunicode

which is a dependency of fontspec-luatex.sty.

I thus wonder why is fontspec in latex-recommended, I thought
perhaps for use with xelatex ? but then I realized that xelatex
is not available,  contrarily to lualatex, from having installed
only basic + latex-recommended.

(lualatex is there already from basic)

It thus appears that if fontspec is included in latex-recommended
then also luaotfload, lualibs, luatex-def and xunicode should be
because they are dependencies of fontspec under lualatex, and
one basic+latex-recommended as such does not provide xelatex
which is the other thing one could use with fontspec.

Best,

Jean-Fran?ois 





From jfbu at free.fr  Mon May 16 10:15:46 2016
From: jfbu at free.fr (jfbu)
Date: Mon, 16 May 2016 10:15:46 +0200
Subject: [tex-live] luaotfload not in latex-recommended
In-Reply-To: <289BF6F7-A4BC-45CD-A80E-976DCD5CA9F1@free.fr>
References: <289BF6F7-A4BC-45CD-A80E-976DCD5CA9F1@free.fr>
Message-ID: <40E9FC1D-4BD7-42C4-98CB-64265ED9D5A7@free.fr>


Le 16 mai 2016 ? 10:12, jfbu <jfbu at free.fr> a ?crit :

> because luaotfload is not part of latex-recommended.

I meant latexrecommended. There is no hyphen.

From martinfeck at aol.com  Mon May 16 10:25:41 2016
From: martinfeck at aol.com (Martin Feck)
Date: Mon, 16 May 2016 10:25:41 +0200
Subject: [tex-live] texlive2016 pretest
In-Reply-To: <mailman.666.1463386333.3842.tex-live@tug.org>
References: <mailman.666.1463386333.3842.tex-live@tug.org>
Message-ID: <93e042e9-6d08-b76f-9927-8f2a230fd195@aol.com>

there seems to be a bug in biblatex apa. Error message! Undefined 
control sequence.
<Argument> \ ifuniqueprimaryauthor
l.5 \ textcite [S. 333] {} Steiner1903
?
! Package keyval Error: uniqueprimaryauthor undefined.
See the keyval package documentation for explanation.
Type H <return> for immediate help. ...

l.226 ... dateabbrev = false}


Am 16.05.2016 um 10:12 schrieb tex-live-request at tug.org:
> Send tex-live mailing list submissions to
> 	tex-live at tug.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
> 	http://tug.org/mailman/listinfo/tex-live
> or, via email, send a message with subject or body 'help' to
> 	tex-live-request at tug.org
>
> You can reach the person managing the list at
> 	tex-live-owner at tug.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of tex-live digest..."
>
>
> Today's Topics:
>
>     1. Re: Fresh install fails (Norbert Preining)
>     2. Re: Default local disk repository seems to be wrong after
>        install-tl from rsync'ed mirror (Norbert Preining)
>     3. luaotfload not in latex-recommended (jfbu)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Mon, 16 May 2016 08:27:46 +0900
> From: Norbert Preining <preining at logic.at>
> To: jhielscher at posteo.de
> Cc: TeXLive Mailing List <tex-live at tug.org>
> Subject: Re: [tex-live] Fresh install fails
> Message-ID: <20160515232746.GC17189 at wienerschnitzel>
> Content-Type: text/plain; charset=us-ascii
>
> On Sun, 15 May 2016, jhielscher at posteo.de wrote:
>> I was trying to do a fresh install of tl16-pretest (as I had successfully
> Should be fixed with today's update, too.
>
> Norbert
>
> ------------------------------------------------------------------------
> PREINING, Norbert                               http://www.preining.info
> JAIST, Japan                                 TeX Live & Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
> ------------------------------------------------------------------------
>
>
> ------------------------------
>
> Message: 2
> Date: Mon, 16 May 2016 12:18:57 +0900
> From: Norbert Preining <preining at logic.at>
> To: jfbu <jfbu at free.fr>
> Cc: TeXLive <tex-live at tug.org>
> Subject: Re: [tex-live] Default local disk repository seems to be
> 	wrong after install-tl from rsync'ed mirror
> Message-ID: <20160516031857.GA2943 at wienerschnitzel>
> Content-Type: text/plain; charset=us-ascii
>
> On Sun, 19 Apr 2015, Norbert Preining wrote:
>>> ./install-tl -repository .
>> Thanks. There is a missing rewrite from relative to absolute path
>> happening. I need to look into it, although it was like this since
>> ever ;-)
> Took some time, but now I have changed it. The next install-tl script
> should save a proper location even when . is passed
>
> Norbert
>
> ------------------------------------------------------------------------
> PREINING, Norbert                               http://www.preining.info
> JAIST, Japan                                 TeX Live & Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
> ------------------------------------------------------------------------
>
>
> ------------------------------
>
> Message: 3
> Date: Mon, 16 May 2016 10:12:04 +0200
> From: jfbu <jfbu at free.fr>
> To: TeX Live <tex-live at tug.org>
> Subject: [tex-live] luaotfload not in latex-recommended
> Message-ID: <289BF6F7-A4BC-45CD-A80E-976DCD5CA9F1 at free.fr>
> Content-Type: text/plain; charset="iso-8859-1"
>
> Hi,
>
> for some reason I tried the basic scheme.
>
> One can already use lualatex on sample2e. There is no fontspec
> thus I installed the collection latex-recommended.
>
> But one can not use lualatex on a document using fontspec
> because luaotfload is not part of latex-recommended.
>
> I needed to install
>
> luaotfload
> lualibs
> luatex-def
>
> and xunicode
>
> which is a dependency of fontspec-luatex.sty.
>
> I thus wonder why is fontspec in latex-recommended, I thought
> perhaps for use with xelatex ? but then I realized that xelatex
> is not available,  contrarily to lualatex, from having installed
> only basic + latex-recommended.
>
> (lualatex is there already from basic)
>
> It thus appears that if fontspec is included in latex-recommended
> then also luaotfload, lualibs, luatex-def and xunicode should be
> because they are dependencies of fontspec under lualatex, and
> one basic+latex-recommended as such does not provide xelatex
> which is the other thing one could use with fontspec.
>
> Best,
>
> Jean-Fran?ois
>
>
>
>
>
>
> ------------------------------
>
> Subject: Digest Footer
>
> _______________________________________________
> tex-live mailing list
> tex-live at tug.org
> http://tug.org/mailman/listinfo/tex-live
>
>
> ------------------------------
>
> End of tex-live Digest, Vol 160, Issue 58
> *****************************************

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160516/57284ac4/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: martinfeck.vcf
Type: text/x-vcard
Size: 100 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160516/57284ac4/attachment-0001.vcf>

From news3 at nililand.de  Mon May 16 10:43:49 2016
From: news3 at nililand.de (Ulrike Fischer)
Date: Mon, 16 May 2016 10:43:49 +0200
Subject: [tex-live] texlive2016 pretest
References: <mailman.666.1463386333.3842.tex-live@tug.org>
 <93e042e9-6d08-b76f-9927-8f2a230fd195@aol.com>
Message-ID: <1c9p8oqlv1xec.dlg@nililand.de>

Am Mon, 16 May 2016 10:25:41 +0200 schrieb Martin Feck:

> there seems to be a bug in biblatex apa. Error message! Undefined 
> control sequence.
> <Argument> \ ifuniqueprimaryauthor
> l.5 \ textcite [S. 333] {} Steiner1903
> ?
> ! Package keyval Error: uniqueprimaryauthor undefined.
> See the keyval package documentation for explanation.
> Type H <return> for immediate help. ...
> 
> l.226 ... dateabbrev = false}
> 

This should go to the biblatex-apa bug tracker
https://github.com/plk/biblatex-apa/issues

(with a complete example)


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From news3 at nililand.de  Mon May 16 10:51:51 2016
From: news3 at nililand.de (Ulrike Fischer)
Date: Mon, 16 May 2016 10:51:51 +0200
Subject: [tex-live] font sizes in the tlmgr GUI
Message-ID: <zuz7797jxn0r$.dlg@nililand.de>

Can one enlarge the fonts in the GUI?

I'm normally not using the GUI but the question just came up on
tex.sx:

http://tex.stackexchange.com/questions/309809/texlive-tlmgr-on-hidpi-screens


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From jfbu at free.fr  Mon May 16 10:54:14 2016
From: jfbu at free.fr (jfbu)
Date: Mon, 16 May 2016 10:54:14 +0200
Subject: [tex-live] luaotfload-tool writes database to TEXMFSYSVAR if
 writable
Message-ID: <1D07C97E-3D2F-464A-B10B-F470CD9E725C@free.fr>

Hi

this is also a TeXLive issue in so far as it concerns
TEXMFVAR/TEXMFSYSVAR

I have observed that doing "luaotfload-tool -fu -vvv"
puts its output in TEXMFSYSVAR if the corresponding
location is writable by the account issuing the command

For example on a test with user XXX I have
TEXMFSYSVAR=/usr/local/texlive/2016b/texmf-var
TEXMFVAR=/Users/XXX/.texlive2016b/texmf-var

and I see on doing luaotfload -fu -vvv for user 
XXX who actually owns 2016b/texmf-var

luaotfload | db : Gzip: /usr/local/texlive/2016b/texmf-var/luatex-cache/generic/names/luaotfload-names.lua.gz
luaotfload | db : Byte: /usr/local/texlive/2016b/texmf-var/luatex-cache/generic/names/luaotfload-names.luc



With user YYY, which has only read-access I get the expected

luaotfload | db : Gzip: /Users/YYY/.texlive2016b/texmf-var/luatex-cache/generic/names/luaotfload-names.lua.gz
luaotfload | db : Byte: /Users/YYY/.texlive2016b/texmf-var/luatex-cache/generic/names/luaotfload-names.luc

but if I open write access to YYY for repertory 2016b/texmf-var,
for example because
both YYY and XXX are in admin group, and I change the group
to admin for all of 2016b/texmf-var, then the invocation of
luaotfload by user YYY will produce the database in the 
/usr/local/texlive/2016b/texmf-var repertory as it was for
XXX who actually owned the repertory.

This looks wrong because each user may have its own fonts, 
and it is not because one user has write-access to

/usr/local/texlive/2016b/texmf-var

that it should mean that its personal config has to be made
generally available.

I expect that account ZZZ with no write access will have LuaLaTeX
use .texlive2016b/texmf-var/luatex-cache/generic/names/luaotfload-names.luc
but there is an issue if both accounts XXX and YYY with write access
to /usr/local/texlive/2016b/texmf-var exist, and have no .texlive2016b/texmf-var
then XXX font config will overwrite the YYY one and vice versa.


My question to TeXLive generally is: is this behaviour of luaotfload
the expected one, are executables expected to write to the first
repertory where they have write access ?

otherwise stated, it seems luaotfload acts a bit like a luaotfload-sys
would. Is this normal ?

I will open a ticket only if needed on luaotfload github repo 
depending on answers received here.

Best

Jean-Fran?ois

From norbert at preining.info  Mon May 16 11:06:40 2016
From: norbert at preining.info (Norbert Preining)
Date: Mon, 16 May 2016 18:06:40 +0900
Subject: [tex-live] luaotfload-tool writes database to TEXMFSYSVAR if
 writable
In-Reply-To: <1D07C97E-3D2F-464A-B10B-F470CD9E725C@free.fr>
References: <1D07C97E-3D2F-464A-B10B-F470CD9E725C@free.fr>
Message-ID: <20160516090640.GJ4108@logic.at>

On Mon, 16 May 2016, jfbu wrote:
> My question to TeXLive generally is: is this behaviour of luaotfload
> the expected one, are executables expected to write to the first
> repertory where they have write access ?

My answer from TeX Live: Complain to the author's of luaotfload.
I also consider it strange, but *we* will not hack around in the script.

> I will open a ticket only if needed on luaotfload github repo 
> depending on answers received here.

I think it makes sense.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From norbert at preining.info  Mon May 16 11:07:25 2016
From: norbert at preining.info (Norbert Preining)
Date: Mon, 16 May 2016 18:07:25 +0900
Subject: [tex-live] font sizes in the tlmgr GUI
In-Reply-To: <zuz7797jxn0r$.dlg@nililand.de>
References: <zuz7797jxn0r$.dlg@nililand.de>
Message-ID: <20160516090725.GK4108@logic.at>

> Can one enlarge the fonts in the GUI?

Not by now. I will look into it whether I can find a simple way
around it till freeze time.

(Perl/Tk is not very good in that)

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From zdenek.wagner at gmail.com  Mon May 16 11:13:01 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 16 May 2016 11:13:01 +0200
Subject: [tex-live] font sizes in the tlmgr GUI
In-Reply-To: <zuz7797jxn0r$.dlg@nililand.de>
References: <zuz7797jxn0r$.dlg@nililand.de>
Message-ID: <CAC1phya9p5YGtAcM3sDgMtEDEofaqXRmawKYDZ0nWNxQqxBYsg@mail.gmail.com>

Hi,

I see that it is forbidden, if -font is specified on the command line,
install-tl complains. I have the following in one of my programs:


# Main window
our $mw = new MainWindow (-title => "Anton Paar DSA 5000");
$mw->CmdLine;

CmdLine interprets the command-line parameters known by Tk, thus I can get
a huge font by specifying -font 'Helvetica 24'



Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2016-05-16 10:51 GMT+02:00 Ulrike Fischer <news3 at nililand.de>:

> Can one enlarge the fonts in the GUI?
>
> I'm normally not using the GUI but the question just came up on
> tex.sx:
>
>
> http://tex.stackexchange.com/questions/309809/texlive-tlmgr-on-hidpi-screens
>
>
> --
> Ulrike Fischer
> http://www.troubleshooting-tex.de/
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160516/95bace3c/attachment-0001.html>

From jfbu at free.fr  Mon May 16 11:18:11 2016
From: jfbu at free.fr (jfbu)
Date: Mon, 16 May 2016 11:18:11 +0200
Subject: [tex-live] luaotfload-tool writes database to TEXMFSYSVAR if
 writable
In-Reply-To: <20160516090640.GJ4108@logic.at>
References: <1D07C97E-3D2F-464A-B10B-F470CD9E725C@free.fr>
 <20160516090640.GJ4108@logic.at>
Message-ID: <F6FC7378-4926-43D9-B882-058F3A2308D9@free.fr>


Le 16 mai 2016 ? 11:06, Norbert Preining <norbert at preining.info> a ?crit :

> On Mon, 16 May 2016, jfbu wrote:
>> My question to TeXLive generally is: is this behaviour of luaotfload
>> the expected one, are executables expected to write to the first
>> repertory where they have write access ?
> 
> My answer from TeX Live: Complain to the author's of luaotfload.
> I also consider it strange, but *we* will not hack around in the script.
> 
>> I will open a ticket only if needed on luaotfload github repo 
>> depending on answers received here.
> 
> I think it makes sense.

Thanks for the reply, here is some more info. First of all,
the database build does not need to be invoked by luaotfload-tool -u,
it can be triggered from a document accessing a not yet known font.

Second: turns out that if 2016b/texmf-var/luatex-cache does not exist,
it will be create naturally using the umask of the account.

Thus user YYY with umask 755 and write access to 2016b/texmf-var
will thus produce a 2016b/texmf-var/luatex-cache
which is non writable to user XXX having nevertheless write access
to 2016b/texmf-var.

This creates a problem when XXX tries to compile

\documentclass{article}
\usepackage{fontspec}
\setmainfont{CourierStd.otf}
\begin{document}
Hello
\end{document}

with CourierStd.otf a font which was not known to YYY account:

luaotfload | db : Reload initiated (formats: otf,ttf,ttc); reason: "File not found: CourierStd.otf.".
luaotfload | db : Index file not writable
luaotfload | db : Failed to write /usr/local/texlive/2016b/texmf-var/luatex-cache/generic/names/luaotfload-names.lua.
luaotfload | db : Failed to write /usr/local/texlive/2016b/texmf-var/luatex-cache/generic/names/luaotfload-names.luc.
luaotfload | db : Failed to save database to disk: nil
luaotfload | cache : Lookup cache file not writable.
luaotfload | cache : Failed to write /usr/local/texlive/2016b/texmf-var/luatex-cache/generic/names/luaotfload-lookup-cache.lua.
luaotfload | cache : Failed to write /usr/local/texlive/2016b/texmf-var/luatex-cache/generic/names/luaotfload-lookup-cache.luc.(compili
ng luc: /usr/local/texlive/2016b/texmf-var/luatex-cache/generic/fonts/otl/couri
erstd.luc)(save: /usr/local/texlive/2016b/texmf-var/luatex-cache/generic/fonts/
otl/courierstd.lua)(save: /usr/local/texlive/2016b/texmf-var/luatex-cache/gener
ic/fonts/otl/courierstd.luc) (./test.aux)

Nevertheless the last lines indicate that luaotfload found a
way to overcome the problem, and the produced pdf is *fine*,
despite the fact that the general name database of fonts
could not be updated.

I think however that nothing of this would happen if luaotfload
by default obeyed TEXMFVAR rather than using TEXMFSYSVAR if the
latter is writable.

There might be some reason to it, though.

Best

Jean-Fran?ois



From jfbu at free.fr  Mon May 16 11:20:32 2016
From: jfbu at free.fr (jfbu)
Date: Mon, 16 May 2016 11:20:32 +0200
Subject: [tex-live] luaotfload-tool writes database to TEXMFSYSVAR if
 writable
In-Reply-To: <F6FC7378-4926-43D9-B882-058F3A2308D9@free.fr>
References: <1D07C97E-3D2F-464A-B10B-F470CD9E725C@free.fr>
 <20160516090640.GJ4108@logic.at>
 <F6FC7378-4926-43D9-B882-058F3A2308D9@free.fr>
Message-ID: <FA296E3A-E7FB-49C7-BA73-CB59CD84B5EF@free.fr>


Le 16 mai 2016 ? 11:18, jfbu <jfbu at free.fr> a ?crit :

> Thus user YYY with umask 755 and write access to 2016b/texmf-var

I naturally meant umask 22 sorry for the confusion.

Will try to learn to read my messages before posting.

sorry
JF

From texlive at schoepfer.info  Mon May 16 11:27:43 2016
From: texlive at schoepfer.info (texlive at schoepfer.info)
Date: Mon, 16 May 2016 11:27:43 +0200
Subject: [tex-live] luaotfload not in latex-recommended
In-Reply-To: <289BF6F7-A4BC-45CD-A80E-976DCD5CA9F1@free.fr>
References: <289BF6F7-A4BC-45CD-A80E-976DCD5CA9F1@free.fr>
Message-ID: <9e14323fbf9c750c5ea281d292bfa262@schoepfer.info>


> It thus appears that if fontspec is included in latex-recommended
> then also luaotfload, lualibs, luatex-def and xunicode should be
> because they are dependencies of fontspec under lualatex, and
> one basic+latex-recommended as such does not provide xelatex
> which is the other thing one could use with fontspec.

If fontspec and xunicode would be a dependency of collection-lualatex 
rather than of collection-latexrecommended,
your problem would have been solved by installaing scheme-basic and 
collection-lualatex.
This seems for me to be the most obvious approach if someone wants
to have a small luatex-capable texlive installation.


Johannes

From zdenek.wagner at gmail.com  Mon May 16 11:37:50 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 16 May 2016 11:37:50 +0200
Subject: [tex-live] luaotfload not in latex-recommended
In-Reply-To: <9e14323fbf9c750c5ea281d292bfa262@schoepfer.info>
References: <289BF6F7-A4BC-45CD-A80E-976DCD5CA9F1@free.fr>
 <9e14323fbf9c750c5ea281d292bfa262@schoepfer.info>
Message-ID: <CAC1phyZ6FR9et6kgLscPdh_X+fENrTh_reVS74Xx2K5_jPk-kw@mail.gmail.com>

2016-05-16 11:27 GMT+02:00 <texlive at schoepfer.info>:

>
> It thus appears that if fontspec is included in latex-recommended
>> then also luaotfload, lualibs, luatex-def and xunicode should be
>> because they are dependencies of fontspec under lualatex, and
>> one basic+latex-recommended as such does not provide xelatex
>> which is the other thing one could use with fontspec.
>>
>
> If fontspec and xunicode would be a dependency of collection-lualatex
> rather than of collection-latexrecommended,
> your problem would have been solved by installaing scheme-basic and
> collection-lualatex.
> This seems for me to be the most obvious approach if someone wants
> to have a small luatex-capable texlive installation.
>

fontspec and xunicode are also needed by xelatex.

>
>
> Johannes
>
> Zden?k Wagner
> http://ttsm.icpf.cas.cz/team/wagner.shtml
> http://icebearsoft.euweb.cz
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160516/04a1540e/attachment.html>

From mojca.miklavec.lists at gmail.com  Mon May 16 11:38:50 2016
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 16 May 2016 11:38:50 +0200
Subject: [tex-live] luaotfload not in latex-recommended
In-Reply-To: <289BF6F7-A4BC-45CD-A80E-976DCD5CA9F1@free.fr>
References: <289BF6F7-A4BC-45CD-A80E-976DCD5CA9F1@free.fr>
Message-ID: <CALBOmsb0OrxPRer4HYy6JRzSjP6-NiRXcJ_gcCCd0m2Tqw_FLA@mail.gmail.com>

On 16 May 2016 at 10:12, jfbu wrote:
> Hi,
>
> for some reason I tried the basic scheme.
>
> One can already use lualatex on sample2e. There is no fontspec
> thus I installed the collection latex-recommended.
>
> But one can not use lualatex on a document using fontspec
> because luaotfload is not part of latex-recommended.
>
> I needed to install
>
> luaotfload
> lualibs
> luatex-def
>
> and xunicode
>
> which is a dependency of fontspec-luatex.sty.
>
> I thus wonder why is fontspec in latex-recommended, I thought
> perhaps for use with xelatex ? but then I realized that xelatex
> is not available,  contrarily to lualatex, from having installed
> only basic + latex-recommended.
>
> (lualatex is there already from basic)
>
> It thus appears that if fontspec is included in latex-recommended
> then also luaotfload, lualibs, luatex-def and xunicode should be
> because they are dependencies of fontspec under lualatex, and
> one basic+latex-recommended as such does not provide xelatex
> which is the other thing one could use with fontspec.

There are two separate issues for two kinds of users:
- those installing via tlmgr
- those installing from the package manager

For the first group of people by far the best solution would be to add
all the required dependencies to
    fontspec.tlpsrc
Then anyone installing fontspec would also get all the dependencies
automatically without having to change anything in the collections
themselves.

If someone can prepare a complete list of dependencies of fontspec, I
can add them to tlpsrc. (Dependencies are fully supported with tlmgr,
but having a complete list of dependencies has never been a priority
for the TL team. If someone cares enough about adding dependencies for
a particular package, they can easily be added though.)


The question about the best collection for each package is still
relevant for package managers though because inter-package
dependencies are not tracked there.

Mojca

From norbert at preining.info  Mon May 16 14:52:47 2016
From: norbert at preining.info (Norbert Preining)
Date: Mon, 16 May 2016 21:52:47 +0900
Subject: [tex-live] font sizes in the tlmgr GUI
In-Reply-To: <CAC1phya9p5YGtAcM3sDgMtEDEofaqXRmawKYDZ0nWNxQqxBYsg@mail.gmail.com>
References: <zuz7797jxn0r$.dlg@nililand.de>
 <CAC1phya9p5YGtAcM3sDgMtEDEofaqXRmawKYDZ0nWNxQqxBYsg@mail.gmail.com>
Message-ID: <20160516125247.GL4108@logic.at>

Hi Zdenek,

> $mw->CmdLine;

Good idea in principle, I need to look into how to get this work.
THe command line handling of tlmgr is rather complicated as you 
can imagine. I don't want to add/allow arbitrary command line
options.

But well, in he case the gui is requested, I will look into it.

Thanks for the hint.

PS: Do you know the equivalen in Perl/Tk?

All the best

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From reinhard.kotucha at web.de  Mon May 16 15:12:35 2016
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 16 May 2016 15:12:35 +0200
Subject: [tex-live] font sizes in the tlmgr GUI
In-Reply-To: <20160516090725.GK4108@logic.at>
References: <zuz7797jxn0r$.dlg@nililand.de>	<20160516090725.GK4108@logic.at>
Message-ID: <22329.51011.546905.94848@zaphod.ms25.net>

On 2016-05-16 at 18:07:25 +0900, Norbert Preining wrote:

 > > Can one enlarge the fonts in the GUI?
 > 
 > Not by now. I will look into it whether I can find a simple way
 > around it till freeze time.
 > 
 > (Perl/Tk is not very good in that)

Norbert, you could check how it was done in texdoctk?

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From bernhard.kleine at gmx.net  Mon May 16 15:25:12 2016
From: bernhard.kleine at gmx.net (Bernhard Kleine)
Date: Mon, 16 May 2016 15:25:12 +0200
Subject: [tex-live] pretest failed with size mismatched
In-Reply-To: <8cdc615e-a505-78a6-18aa-c82f4ff376e4@gmx.net>
References: <8cdc615e-a505-78a6-18aa-c82f4ff376e4@gmx.net>
Message-ID: <3fc27e82-0df3-6094-c15a-55a78bdacdf1@gmx.net>

Am 15.05.2016 um 14:48 schrieb Bernhard Kleine:
>
> Today I tried to install pretest and failed:
>
>     ...
>
>     Installing [0001/3241, time/total: ??:??/??:??]: 12many [376k]
>     TLUtils::check_file: removing F:\texlive\2016pre\temp\12many.tar.xz, sizes differ:
>     TLUtils::check_file:   TL=, arg=2100
>     TLPDB::_install_package: downloading did not succeed
>     Installation failed.
>     Rerunning the installer will try to restart the installation.
>     Or you can restart by running the installer with:
>       install-tl-windows.bat --profile installation.profile [EXTRA-ARGS]
>     or
>       install-tl-advanced.bat --profile installation.profile [EXTRA-ARGS]
>     f:\Downloads\texlive\install-tl\install-tl-20160515\install-tl: Writing log in current directory: f:/Downloads/texlive/install-tl/install-tl-20160515/install-tl.log
>

Pretest 2016 could be successfully installed from cstug.cz. And it
compiles my book.

I would like to add that restarting an aborted installation in the
pretest directory, however, pointed to a 2015 installation. No
restarting possible.

Regards

Bernhard

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160516/a4bef7c4/attachment-0001.html>

From zdenek.wagner at gmail.com  Mon May 16 15:36:16 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 16 May 2016 15:36:16 +0200
Subject: [tex-live] font sizes in the tlmgr GUI
In-Reply-To: <20160516125247.GL4108@logic.at>
References: <zuz7797jxn0r$.dlg@nililand.de>
 <CAC1phya9p5YGtAcM3sDgMtEDEofaqXRmawKYDZ0nWNxQqxBYsg@mail.gmail.com>
 <20160516125247.GL4108@logic.at>
Message-ID: <CAC1phyb8+BwH5Hzu1jNU05QK3SJ2=-qSmjBBdL6ZPUZbF_dfOQ@mail.gmail.com>

Hi Norbert,

this _is_ PerlTk. Tk has its options for positioning the window etc. You
use CmdLine after creation of the main window. It scans the command line
options and if they are recognized by Tk, they are used. I have not tried
to use it together with my own options but it should work. It will need
some testing. Inthe current version -font stops install-tl and shows help.
You should allow X11 options. Some example is shown by

perldoc Tk::CmdLine


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2016-05-16 14:52 GMT+02:00 Norbert Preining <norbert at preining.info>:

> Hi Zdenek,
>
> > $mw->CmdLine;
>
> Good idea in principle, I need to look into how to get this work.
> THe command line handling of tlmgr is rather complicated as you
> can imagine. I don't want to add/allow arbitrary command line
> options.
>
> But well, in he case the gui is requested, I will look into it.
>
> Thanks for the hint.
>
> PS: Do you know the equivalen in Perl/Tk?
>
> All the best
>
> Norbert
>
> ------------------------------------------------------------------------
> PREINING, Norbert                               http://www.preining.info
> JAIST, Japan                                 TeX Live & Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
> ------------------------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160516/406b3eee/attachment.html>

From zdenek.wagner at gmail.com  Mon May 16 15:37:23 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 16 May 2016 15:37:23 +0200
Subject: [tex-live] pretest failed with size mismatched
In-Reply-To: <3fc27e82-0df3-6094-c15a-55a78bdacdf1@gmx.net>
References: <8cdc615e-a505-78a6-18aa-c82f4ff376e4@gmx.net>
 <3fc27e82-0df3-6094-c15a-55a78bdacdf1@gmx.net>
Message-ID: <CAC1phyYx7Zi6tizZSzspS6HsonzLZ_feC9tCwj4-emVEn2+_Wg@mail.gmail.com>

It was yesterday's problem, it is fixed now if the mirror is up-to-date.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2016-05-16 15:25 GMT+02:00 Bernhard Kleine <bernhard.kleine at gmx.net>:

> Am 15.05.2016 um 14:48 schrieb Bernhard Kleine:
>
> Today I tried to install pretest and failed:
>
> ...
>
> Installing [0001/3241, time/total: ??:??/??:??]: 12many [376k]
> TLUtils::check_file: removing F:\texlive\2016pre\temp\12many.tar.xz, sizes differ:
> TLUtils::check_file:   TL=, arg=2100
> TLPDB::_install_package: downloading did not succeed
> Installation failed.
> Rerunning the installer will try to restart the installation.
> Or you can restart by running the installer with:
>   install-tl-windows.bat --profile installation.profile [EXTRA-ARGS]
> or
>   install-tl-advanced.bat --profile installation.profile [EXTRA-ARGS]
> f:\Downloads\texlive\install-tl\install-tl-20160515\install-tl: Writing log in current directory: f:/Downloads/texlive/install-tl/install-tl-20160515/install-tl.log
>
>
> Pretest 2016 could be successfully installed from cstug.cz. And it
> compiles my book.
>
> I would like to add that restarting an aborted installation in the pretest
> directory, however, pointed to a 2015 installation. No restarting possible.
>
> Regards
>
> Bernhard
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160516/b4b8300a/attachment-0001.html>

From norbert at preining.info  Mon May 16 15:41:24 2016
From: norbert at preining.info (Norbert Preining)
Date: Mon, 16 May 2016 22:41:24 +0900
Subject: [tex-live] font sizes in the tlmgr GUI
In-Reply-To: <CAC1phyb8+BwH5Hzu1jNU05QK3SJ2=-qSmjBBdL6ZPUZbF_dfOQ@mail.gmail.com>
References: <zuz7797jxn0r$.dlg@nililand.de>
 <CAC1phya9p5YGtAcM3sDgMtEDEofaqXRmawKYDZ0nWNxQqxBYsg@mail.gmail.com>
 <20160516125247.GL4108@logic.at>
 <CAC1phyb8+BwH5Hzu1jNU05QK3SJ2=-qSmjBBdL6ZPUZbF_dfOQ@mail.gmail.com>
Message-ID: <20160516134124.GP4108@logic.at>

> this _is_ PerlTk.

Sorry, too late in the night ... indeed, obviously ;-)

I still need to tell tlmgr to pass these options on ...

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From zdenek.wagner at gmail.com  Mon May 16 15:55:20 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 16 May 2016 15:55:20 +0200
Subject: [tex-live] font sizes in the tlmgr GUI
In-Reply-To: <20160516134124.GP4108@logic.at>
References: <zuz7797jxn0r$.dlg@nililand.de>
 <CAC1phya9p5YGtAcM3sDgMtEDEofaqXRmawKYDZ0nWNxQqxBYsg@mail.gmail.com>
 <20160516125247.GL4108@logic.at>
 <CAC1phyb8+BwH5Hzu1jNU05QK3SJ2=-qSmjBBdL6ZPUZbF_dfOQ@mail.gmail.com>
 <20160516134124.GP4108@logic.at>
Message-ID: <CAC1phyZR4cqU9-n5aaQouY-T--4443dRhVcnJn0orvpd2bqNZw@mail.gmail.com>

You just have to ensure that they remain in @ARGV. CmdLine does not
complain if there are unknown options. And I forgot to write that these
options are inheritted in other windows, so if you create a dialogue
window, t will use the same font unless you set another font in the program.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2016-05-16 15:41 GMT+02:00 Norbert Preining <norbert at preining.info>:

> > this _is_ PerlTk.
>
> Sorry, too late in the night ... indeed, obviously ;-)
>
> I still need to tell tlmgr to pass these options on ...
>
> Norbert
>
> ------------------------------------------------------------------------
> PREINING, Norbert                               http://www.preining.info
> JAIST, Japan                                 TeX Live & Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
> ------------------------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160516/2367331f/attachment.html>

From siepo at cybercomm.nl  Mon May 16 16:10:11 2016
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Mon, 16 May 2016 16:10:11 +0200
Subject: [tex-live] font sizes in the tlmgr GUI
In-Reply-To: <CAC1phyZR4cqU9-n5aaQouY-T--4443dRhVcnJn0orvpd2bqNZw@mail.gmail.com>
References: <zuz7797jxn0r$.dlg@nililand.de>
 <CAC1phya9p5YGtAcM3sDgMtEDEofaqXRmawKYDZ0nWNxQqxBYsg@mail.gmail.com>
 <20160516125247.GL4108@logic.at>
 <CAC1phyb8+BwH5Hzu1jNU05QK3SJ2=-qSmjBBdL6ZPUZbF_dfOQ@mail.gmail.com>
 <20160516134124.GP4108@logic.at>
 <CAC1phyZR4cqU9-n5aaQouY-T--4443dRhVcnJn0orvpd2bqNZw@mail.gmail.com>
Message-ID: <20160516141011.GA1530@bitmuis.thuis.internal>

On Mon, May 16, 2016 at 03:55:20PM +0200, Zdenek Wagner wrote:
> You just have to ensure that they remain in @ARGV. CmdLine does not
> complain if there are unknown options. And I forgot to write that these
> options are inheritted in other windows, so if you create a dialogue
> window, t will use the same font unless you set another font in the program.
> 
> Zden?k Wagner
> http://ttsm.icpf.cas.cz/team/wagner.shtml
> http://icebearsoft.euweb.cz
> 
> 2016-05-16 15:41 GMT+02:00 Norbert Preining <norbert at preining.info>:
> 
> > > this _is_ PerlTk.

Meanwhile, I posted on tex.stackexchange a solution on how to set a
default font for Perl/Tk with X resources, e.g.

*Font: -*-nimbus sans l-medium-r-normal-*-18-*-*-*-p-*-iso10646-1

-- 
Siep Kroonenberg

From norbert at preining.info  Mon May 16 16:10:12 2016
From: norbert at preining.info (Norbert Preining)
Date: Mon, 16 May 2016 23:10:12 +0900
Subject: [tex-live] font sizes in the tlmgr GUI
In-Reply-To: <zuz7797jxn0r$.dlg@nililand.de>
References: <zuz7797jxn0r$.dlg@nililand.de>
Message-ID: <20160516141012.GQ4108@logic.at>

Hi Ulrike,

thanks to Zdenek's suggestion, tomorrow's tlmgr gui should allow for
	tlmgr -font 'Helvetica 18' gui
etc. Will be in tomorrow's (20160517) tlpretest rebuild.

All the best


Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From johannes at schoepfer.info  Mon May 16 19:00:54 2016
From: johannes at schoepfer.info (johannes at schoepfer.info)
Date: Mon, 16 May 2016 19:00:54 +0200
Subject: [tex-live] luaotfload not in latex-recommended
In-Reply-To: <CALBOmsb0OrxPRer4HYy6JRzSjP6-NiRXcJ_gcCCd0m2Tqw_FLA@mail.gmail.com>
References: <289BF6F7-A4BC-45CD-A80E-976DCD5CA9F1@free.fr>
 <CALBOmsb0OrxPRer4HYy6JRzSjP6-NiRXcJ_gcCCd0m2Tqw_FLA@mail.gmail.com>
Message-ID: <a8c1be994cac6e4e4d4594a019c93ba8@schoepfer.info>

On , Mojca Miklavec wrote:
> On 16 May 2016 at 10:12, jfbu wrote:
>> Hi,
>> 
>> for some reason I tried the basic scheme.
>> 
>> One can already use lualatex on sample2e. There is no fontspec
>> thus I installed the collection latex-recommended.
>> 
>> But one can not use lualatex on a document using fontspec
>> because luaotfload is not part of latex-recommended.
>> 
>> I needed to install
>> 
>> luaotfload
>> lualibs
>> luatex-def
>> 
>> and xunicode
>> 
>> which is a dependency of fontspec-luatex.sty.
>> 
>> I thus wonder why is fontspec in latex-recommended, I thought
>> perhaps for use with xelatex ? but then I realized that xelatex
>> is not available,  contrarily to lualatex, from having installed
>> only basic + latex-recommended.
>> 
>> (lualatex is there already from basic)
>> 
>> It thus appears that if fontspec is included in latex-recommended
>> then also luaotfload, lualibs, luatex-def and xunicode should be
>> because they are dependencies of fontspec under lualatex, and
>> one basic+latex-recommended as such does not provide xelatex
>> which is the other thing one could use with fontspec.
> 
> There are two separate issues for two kinds of users:
> - those installing via tlmgr
> - those installing from the package manager
> 
> For the first group of people by far the best solution would be to add
> all the required dependencies to
>     fontspec.tlpsrc
> Then anyone installing fontspec would also get all the dependencies
> automatically without having to change anything in the collections
> themselves.
> 
> If someone can prepare a complete list of dependencies of fontspec, I
> can add them to tlpsrc. (Dependencies are fully supported with tlmgr,
> but having a complete list of dependencies has never been a priority
> for the TL team. If someone cares enough about adding dependencies for
> a particular package, they can easily be added though.)

 From the pov of tlmgr i suggest following changes to tlpdb:
collection-latexrecommended:
-fontspec

collection-luatex:
+fontspec

collection-xetex:
+fontspec
-xunicode

fontspec:
+luaotfload
+lualibs
+luatex-def
+xunicode

scheme-small
-lualibs
-luaotfload

This should fix the issues Francois reported and keeps xunicode in 
collection xetex. Users who want collection-latexrecommended but don't 
care about luatex/xetex aren't forced to grab fontspec.

> The question about the best collection for each package is still
> relevant for package managers though because inter-package
> dependencies are not tracked there.

I think packagers(I am a packager ;-)) have to take care what 
dependencies(fontspec is only useful with xetex/luatex as far i know) a 
collection has, otherwise all inter-package
dependencies had to be listet in each collection, which would be 
error-prone and confusing.

Johannes

From boudiccas at skimble.plus.com  Mon May 16 19:36:56 2016
From: boudiccas at skimble.plus.com (Sharon Kimble)
Date: Mon, 16 May 2016 18:36:56 +0100
Subject: [tex-live] Unknown directive ...containerchecksum
Message-ID: <87twhxaoqv.fsf@skimble.plus.com>

I had a problem with tlmgr, so I used ' tlmgr update --self' which
failed so I then tried ' ./update-tlmgr-latest.sh' which failed with
this error report -

--8<---------------cut here---------------start------------->8---
tlmgr update --self
Unknown directive ...containerchecksum c59200574a316416a23695c258edf3a32531fbda43ccdc09360ee105c3f07f9fb77df17c4ba4c2ea4f3a5ea6667e064b51e3d8c2fe6c984ba3e71b4e32716955... , please fix it! at /usr/local/texlive/2016/tlpkg/TeXLive/TLPOBJ.pm line 210, <TMP> line 36.
--8<---------------cut here---------------end--------------->8---

Now tlmgr is failing to work. Is it possible to copy over tlmgr from
texlive 2015 to get things working properly again? If not, how do I get
texlive2016-pretest working again please?

Thanks
Sharon.
-- 
A taste of linux = http://www.sharons.org.uk
TGmeds = http://www.tgmeds.org.uk
Debian 8.4, fluxbox 1.3.7, emacs 25.0.93
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 818 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160516/b29d7b26/attachment-0001.bin>

From d.p.carlisle at gmail.com  Mon May 16 19:51:51 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Mon, 16 May 2016 18:51:51 +0100
Subject: [tex-live] Unknown directive ...containerchecksum
In-Reply-To: <87twhxaoqv.fsf@skimble.plus.com>
References: <87twhxaoqv.fsf@skimble.plus.com>
Message-ID: <CAEW6iOjF9=pzt50LBNHVPovq2ojt3WgfzgBxPHacAmLoyYrpTA@mail.gmail.com>

On 16 May 2016 at 18:36, Sharon Kimble <boudiccas at skimble.plus.com> wrote:
> I had a problem with tlmgr, so I used ' tlmgr update --self' which
> failed so I then tried ' ./update-tlmgr-latest.sh' which failed with
> this error report -


Did you get  update-tlmgr-latest.sh from the tlpretest mirror, not the
one linked from the top level texlive page (which is 2015 version)
I've seen that error after makingtthat mistake myself:-)

David

>
> --8<---------------cut here---------------start------------->8---
> tlmgr update --self
> Unknown directive ...containerchecksum c59200574a316416a23695c258edf3a32531fbda43ccdc09360ee105c3f07f9fb77df17c4ba4c2ea4f3a5ea6667e064b51e3d8c2fe6c984ba3e71b4e32716955... , please fix it! at /usr/local/texlive/2016/tlpkg/TeXLive/TLPOBJ.pm line 210, <TMP> line 36.
> --8<---------------cut here---------------end--------------->8---
>
> Now tlmgr is failing to work. Is it possible to copy over tlmgr from
> texlive 2015 to get things working properly again? If not, how do I get
> texlive2016-pretest working again please?
>
> Thanks
> Sharon.
> --
> A taste of linux = http://www.sharons.org.uk
> TGmeds = http://www.tgmeds.org.uk
> Debian 8.4, fluxbox 1.3.7, emacs 25.0.93



-- 
http://dpcarlisle.blogspot.com/


From boudiccas at skimble.plus.com  Mon May 16 20:11:28 2016
From: boudiccas at skimble.plus.com (Sharon Kimble)
Date: Mon, 16 May 2016 19:11:28 +0100
Subject: [tex-live] Unknown directive ...containerchecksum
References: <87twhxaoqv.fsf@skimble.plus.com>
 <CAEW6iOjF9=pzt50LBNHVPovq2ojt3WgfzgBxPHacAmLoyYrpTA@mail.gmail.com>
Message-ID: <8737phan5b.fsf@skimble.plus.com>

David Carlisle <d.p.carlisle at gmail.com> writes:

> On 16 May 2016 at 18:36, Sharon Kimble <boudiccas at skimble.plus.com> wrote:
>> I had a problem with tlmgr, so I used ' tlmgr update --self' which
>> failed so I then tried ' ./update-tlmgr-latest.sh' which failed with
>> this error report -
>
>
> Did you get  update-tlmgr-latest.sh from the tlpretest mirror, not the
> one linked from the top level texlive page (which is 2015 version)
> I've seen that error after makingtthat mistake myself:-)
>
> David

You were right, it was from texlive2015, and getting the correct one has
solved the problem and I'm updating as I speak.

Thanks
Sharon.
>
>>
>> --8<---------------cut here---------------start------------->8---
>> tlmgr update --self
>> Unknown directive ...containerchecksum
>> c59200574a316416a23695c258edf3a32531fbda43ccdc09360ee105c3f07f9fb77df17c4ba4c2ea4f3a5ea6667e064b51e3d8c2fe6c984ba3e71b4e32716955...
>> , please fix it! at /usr/local/texlive/2016/tlpkg/TeXLive/TLPOBJ.pm line 210, <TMP> line 36.
>> --8<---------------cut here---------------end--------------->8---
>>
>> Now tlmgr is failing to work. Is it possible to copy over tlmgr from
>> texlive 2015 to get things working properly again? If not, how do I get
>> texlive2016-pretest working again please?
>>
>> Thanks
>> Sharon.
-- 
A taste of linux = http://www.sharons.org.uk
TGmeds = http://www.tgmeds.org.uk
Debian 8.4, fluxbox 1.3.7, emacs 25.0.93
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 818 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160516/122cb175/attachment.bin>

From texlive at schoepfer.info  Mon May 16 22:12:36 2016
From: texlive at schoepfer.info (texlive at schoepfer.info)
Date: Mon, 16 May 2016 22:12:36 +0200
Subject: [tex-live] updmap-map misses containerchecksum
Message-ID: <99ead532f3ac20726c283266c6eb1ae8@schoepfer.info>

Hi,

the current pretest texlive.tlpdb from yesterday 15.5. 19:15h misses the 
containerchecksum from updmap-map, at least on the cz and us mirror.

Johannes

From karl at freefriends.org  Mon May 16 22:49:17 2016
From: karl at freefriends.org (Karl Berry)
Date: Mon, 16 May 2016 20:49:17 +0000
Subject: [tex-live] luaotfload not in latex-recommended
In-Reply-To: <a8c1be994cac6e4e4d4594a019c93ba8@schoepfer.info>
Message-ID: <201605162049.u4GKnHLN005392@freefriends.org>

    collection-latexrecommended:
    -fontspec

    collection-luatex:
    +fontspec

    collection-xetex:
    +fontspec
    -xunicode

Thanks for the idea, but it's not possible.  By definition, each package
is in exactly one (no more, no less) collection.  That is a fundamental
invariant of how TL is built.

    fontspec:
    +luaotfload
    +lualibs
    +luatex-def

But if someone uses fontspec only with xetex, not luatex,
they do not need the lua packages.

    +xunicode

Accepted.  I installed that one.

Admittedly this whole setup is not optimal; for one obvious example,
xunicode does not belong in collection-xetex.  I can imagine many
possible changes (many of which have been discussed ad infinitum
already), all of which have pros and cons.  Not going to attempt to do
anything more now (and maybe not ever).

Best,
K

From reinhard.kotucha at web.de  Mon May 16 22:52:45 2016
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 16 May 2016 22:52:45 +0200
Subject: [tex-live] pretest failed with size mismatched
In-Reply-To: <CAC1phyYx7Zi6tizZSzspS6HsonzLZ_feC9tCwj4-emVEn2+_Wg@mail.gmail.com>
References: <8cdc615e-a505-78a6-18aa-c82f4ff376e4@gmx.net>
 <3fc27e82-0df3-6094-c15a-55a78bdacdf1@gmx.net>
 <CAC1phyYx7Zi6tizZSzspS6HsonzLZ_feC9tCwj4-emVEn2+_Wg@mail.gmail.com>
Message-ID: <22330.13085.708112.18590@zaphod.ms25.net>

On 2016-05-16 at 15:37:23 +0200, Zdenek Wagner wrote:

 > It was yesterday's problem,

Don't know whether Bernhard encountered the same problem as me, but I
had to mkdir texlive/2016/temp manually today because otherwise the
texlive.infra package, which contains the fix, couldn't be updated.

Now, with the new texlive.infra, I can delete texlive/2016/temp and
tlmgr creates it again when needed.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From karl at freefriends.org  Mon May 16 22:53:57 2016
From: karl at freefriends.org (Karl Berry)
Date: Mon, 16 May 2016 14:53:57 -0600
Subject: [tex-live] updmap-map misses containerchecksum
In-Reply-To: <99ead532f3ac20726c283266c6eb1ae8@schoepfer.info>
 (texlive@schoepfer.info)
Message-ID: <86inydzpui.fsf@frenzy.freefriends.org>

    the current pretest texlive.tlpdb from yesterday 15.5. 19:15h misses the 
    containerchecksum from updmap-map, at least on the cz and us mirror.

Thanks for the report.  Indeed, I do not see the containerchecksum in
the pretest original texlive.tlpdb, either.  Investigating ... -k

From bernhard.kleine at gmx.net  Mon May 16 22:57:27 2016
From: bernhard.kleine at gmx.net (Bernhard Kleine)
Date: Mon, 16 May 2016 22:57:27 +0200
Subject: [tex-live] When will biber 2.5 be avaible and biblatex 3.4?
Message-ID: <8e56a7b9-cf03-d272-3fbc-c6375600dd89@gmx.net>

I have installed the pretest but I wonder why biber 2.5 is not included
and the corresponding biblatex?

Bernhard

--
spitzhalde9
79853 lenzkirch
bernhard.kleine at gmx.net
www.b-kleine.com, www.urseetal.net
-
thunderbird mit enigmail
GPG schl?ssel: D5257409
fingerprint:
08 B7 F8 70 22 7A FC C1 15 49 CA A6 C7 6F A0 2E D5 25 74 09

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160516/11808bac/attachment.html>

From bernhard.kleine at gmx.net  Mon May 16 22:59:54 2016
From: bernhard.kleine at gmx.net (Bernhard Kleine)
Date: Mon, 16 May 2016 22:59:54 +0200
Subject: [tex-live] pretest failed with size mismatched
In-Reply-To: <22330.13085.708112.18590@zaphod.ms25.net>
References: <8cdc615e-a505-78a6-18aa-c82f4ff376e4@gmx.net>
 <3fc27e82-0df3-6094-c15a-55a78bdacdf1@gmx.net>
 <CAC1phyYx7Zi6tizZSzspS6HsonzLZ_feC9tCwj4-emVEn2+_Wg@mail.gmail.com>
 <22330.13085.708112.18590@zaphod.ms25.net>
Message-ID: <060dde6f-1b12-9e3b-24ad-91b8a1516a12@gmx.net>



Am 16.05.2016 um 22:52 schrieb Reinhard Kotucha:
> On 2016-05-16 at 15:37:23 +0200, Zdenek Wagner wrote:
>
>  > It was yesterday's problem,
>
> Don't know whether Bernhard encountered the same problem as me, but I
> had to mkdir texlive/2016/temp manually today because otherwise the
> texlive.infra package, which contains the fix, couldn't be updated.
>
> Now, with the new texlive.infra, I can delete texlive/2016/temp and
> tlmgr creates it again when needed.
>
> Regards,
>   Reinhard
>
One day later It works.
Bernhard

--
spitzhalde9
79853 lenzkirch
bernhard.kleine at gmx.net
www.b-kleine.com, www.urseetal.net
-
thunderbird mit enigmail
GPG schl?ssel: D5257409
fingerprint:
08 B7 F8 70 22 7A FC C1 15 49 CA A6 C7 6F A0 2E D5 25 74 09

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160516/e559ce4f/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 819 bytes
Desc: OpenPGP digital signature
URL: <http://tug.org/pipermail/tex-live/attachments/20160516/e559ce4f/attachment.bin>

From zdenek.wagner at gmail.com  Mon May 16 23:00:50 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 16 May 2016 23:00:50 +0200
Subject: [tex-live] pretest failed with size mismatched
In-Reply-To: <22330.13085.708112.18590@zaphod.ms25.net>
References: <8cdc615e-a505-78a6-18aa-c82f4ff376e4@gmx.net>
 <3fc27e82-0df3-6094-c15a-55a78bdacdf1@gmx.net>
 <CAC1phyYx7Zi6tizZSzspS6HsonzLZ_feC9tCwj4-emVEn2+_Wg@mail.gmail.com>
 <22330.13085.708112.18590@zaphod.ms25.net>
Message-ID: <CAC1phyb9jiH9mvoFshTTw77ud3xau7g-gxWLNYpxX+mRroJQrQ@mail.gmail.com>

Hi,

it seems a bit more complex. I did tlmgr update -self -all in the morning
on my office computer that was last updated a few days ago and everything
worked fine. Now I have tried on my home computer where update failed
yesterday and I did not go further by creating the temp directory. And here
it fails. Probably the problem from yesterday remains somewhere inside the
installed version.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2016-05-16 22:52 GMT+02:00 Reinhard Kotucha <reinhard.kotucha at web.de>:

> On 2016-05-16 at 15:37:23 +0200, Zdenek Wagner wrote:
>
>  > It was yesterday's problem,
>
> Don't know whether Bernhard encountered the same problem as me, but I
> had to mkdir texlive/2016/temp manually today because otherwise the
> texlive.infra package, which contains the fix, couldn't be updated.
>
> Now, with the new texlive.infra, I can delete texlive/2016/temp and
> tlmgr creates it again when needed.
>
> Regards,
>   Reinhard
>
> --
> ------------------------------------------------------------------
> Reinhard Kotucha                            Phone: +49-511-3373112
> Marschnerstr. 25
> D-30167 Hannover                    mailto:reinhard.kotucha at web.de
> ------------------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160516/064af945/attachment-0001.html>

From karl at freefriends.org  Mon May 16 23:12:53 2016
From: karl at freefriends.org (Karl Berry)
Date: Mon, 16 May 2016 15:12:53 -0600
Subject: [tex-live] When will biber 2.5 be avaible and biblatex 3.4?
In-Reply-To: <8e56a7b9-cf03-d272-3fbc-c6375600dd89@gmx.net> (message from
 Bernhard Kleine on Mon, 16 May 2016 22:57:27 +0200)
Message-ID: <86futhzoyy.fsf@frenzy.freefriends.org>

    I have installed the pretest but I wonder why biber 2.5 is not included
    and the corresponding biblatex?

I just installed them; they should show up in tonight's update.  -k

From sobenlee at gmail.com  Tue May 17 05:51:32 2016
From: sobenlee at gmail.com (Qing Lee)
Date: Tue, 17 May 2016 11:51:32 +0800
Subject: [tex-live] tlmgr mkdir failed with option autobackup 0
Message-ID: <18575013-db0a-1dba-fb45-ff37d5ccce20@gmail.com>

See

     > tlmgr option autobackup 0
     tlmgr.pl: setting option autobackup to 0.
     > tlmgr update --all
     tlmgr.pl: package repository http://ftp.math.utah.edu/pub/texlive/tlpretest (verified)
     [ 1/32] auto-remove: epyt ... done
     C:\texlive\2016\texmf-dist\scripts\texlive\tlmgr.pl: mkdir(C:/texlive/C:\Users\Qing\AppData\Local\Temp\6vbQWJFbjJ\2EwrZ7jHKG/) failed, goodbye: Invalid argument
     [ 2/32, ??:??/??:??] update: academicons [95k] (39919 -> 41194) ...

Maybe it is caused by the following codes in the function `make_container`:

     # load Cwd only if necessary ...
     require Cwd;
     my $cwd = &Cwd::getcwd;
     if ("$destdir" !~ m@^(.:)?/@) {
       # we have an relative containerdir, so we have to make it absolute
       $destdir = "$cwd/$destdir";
     }
     &TeXLive::TLUtils::mkdirhier("$destdir");

Best,
Qing Lee

From Herbert.Voss at FU-Berlin.DE  Tue May 17 09:01:53 2016
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Tue, 17 May 2016 09:01:53 +0200
Subject: [tex-live] pst-cie
Message-ID: <573AC1E1.8050608@FU-Berlin.DE>

the files of the package pst-cie are in a wrong place.
They are all under
/texmf-dist/doc/latex/pst-cie/
and it looks that the CTAN-directory was simply copied.

Herbert

From jfbu at free.fr  Tue May 17 09:36:15 2016
From: jfbu at free.fr (jfbu)
Date: Tue, 17 May 2016 09:36:15 +0200
Subject: [tex-live] temp repertory not removed
Message-ID: <49278A29-F546-46D5-A793-39828A56836A@free.fr>

Hi,

the temp/ repertory at top of texlive 2016 installation
which is used since yesterday's tlmgr update is not removed
after updating packages. (even if it did not exist before
the updates and was created by tlmgr)

I guess this is expected ?

Jean-Fran?ois




From jfbu at free.fr  Tue May 17 09:44:02 2016
From: jfbu at free.fr (jfbu)
Date: Tue, 17 May 2016 09:44:02 +0200
Subject: [tex-live] temp repertory not removed
In-Reply-To: <49278A29-F546-46D5-A793-39828A56836A@free.fr>
References: <49278A29-F546-46D5-A793-39828A56836A@free.fr>
Message-ID: <8E534054-5C39-4172-BF37-F527E9528986@free.fr>


Le 17 mai 2016 ? 09:36, jfbu <jfbu at free.fr> a ?crit :

> Hi,
> 
> the temp/ repertory at top of texlive 2016 installation
> which is used since yesterday's tlmgr update is not removed
> after updating packages. (even if it did not exist before
> the updates and was created by tlmgr)
> 
> I guess this is expected ?
> 

if it is there to stay, perhaps putting it under tlpkg/
would be a better option ? (there is already backups/ there)

Jean-Fran?ois



From preining at logic.at  Tue May 17 09:50:07 2016
From: preining at logic.at (Norbert Preining)
Date: Tue, 17 May 2016 16:50:07 +0900
Subject: [tex-live] temp repertory not removed
In-Reply-To: <49278A29-F546-46D5-A793-39828A56836A@free.fr>
References: <49278A29-F546-46D5-A793-39828A56836A@free.fr>
Message-ID: <20160517075007.GA6447@wienerschnitzel>

> the temp/ repertory at top of texlive 2016 installation
> which is used since yesterday's tlmgr update is not removed

And since today's update it is not used anymore ...
you can remove it.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From preining at logic.at  Tue May 17 09:54:34 2016
From: preining at logic.at (Norbert Preining)
Date: Tue, 17 May 2016 16:54:34 +0900
Subject: [tex-live] tlmgr mkdir failed with option autobackup 0
In-Reply-To: <18575013-db0a-1dba-fb45-ff37d5ccce20@gmail.com>
References: <18575013-db0a-1dba-fb45-ff37d5ccce20@gmail.com>
Message-ID: <20160517075434.GB6447@wienerschnitzel>

Hi,

>     C:\texlive\2016\texmf-dist\scripts\texlive\tlmgr.pl: mkdir(C:/texlive/C:\Users\Qing\AppData\Local\Temp\6vbQWJFbjJ\2EwrZ7jHKG/) failed, goodbye: Invalid argument
>     [ 2/32, ??:??/??:??] update: academicons [95k] (39919 -> 41194) ...

Hmm, that is strange ... can you run
	tlmgr update -v academicons
and send the output?

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From preining at logic.at  Tue May 17 10:22:39 2016
From: preining at logic.at (Norbert Preining)
Date: Tue, 17 May 2016 17:22:39 +0900
Subject: [tex-live] tlmgr mkdir failed with option autobackup 0
In-Reply-To: <18575013-db0a-1dba-fb45-ff37d5ccce20@gmail.com>
References: <18575013-db0a-1dba-fb45-ff37d5ccce20@gmail.com>
Message-ID: <DF1897E6-E10C-490F-B7B7-DCDA201502F4@logic.at>

OK found the bug, will be fixed for tomorrow.

Sorry...

Norbert


On May 17, 2016 12:51:32 PM GMT+09:00, Qing Lee <sobenlee at gmail.com> wrote:
>See
>
>     > tlmgr option autobackup 0
>     tlmgr.pl: setting option autobackup to 0.
>     > tlmgr update --all
>tlmgr.pl: package repository
>http://ftp.math.utah.edu/pub/texlive/tlpretest (verified)
>     [ 1/32] auto-remove: epyt ... done
>C:\texlive\2016\texmf-dist\scripts\texlive\tlmgr.pl:
>mkdir(C:/texlive/C:\Users\Qing\AppData\Local\Temp\6vbQWJFbjJ\2EwrZ7jHKG/)
>failed, goodbye: Invalid argument
>    [ 2/32, ??:??/??:??] update: academicons [95k] (39919 -> 41194) ...
>
>Maybe it is caused by the following codes in the function
>`make_container`:
>
>     # load Cwd only if necessary ...
>     require Cwd;
>     my $cwd = &Cwd::getcwd;
>     if ("$destdir" !~ m@^(.:)?/@) {
>     # we have an relative containerdir, so we have to make it absolute
>       $destdir = "$cwd/$destdir";
>     }
>     &TeXLive::TLUtils::mkdirhier("$destdir");
>
>Best,
>Qing Lee

-- 
Sent from my mobile device. Please excuse my brevity.

From jfbu at free.fr  Tue May 17 10:23:05 2016
From: jfbu at free.fr (jfbu)
Date: Tue, 17 May 2016 10:23:05 +0200
Subject: [tex-live] Default local disk repository seems to be wrong
 after install-tl from rsync'ed mirror
In-Reply-To: <20160516031857.GA2943@wienerschnitzel>
References: <140418FF-638C-43A0-8B75-6453E7E7F145@free.fr>
 <20150419122924.GP29795@auth.logic.tuwien.ac.at>
 <20160516031857.GA2943@wienerschnitzel>
Message-ID: <E6CFE673-D6AB-4D21-9C28-CBCD1E2DC75D@free.fr>


Le 16 mai 2016 ? 05:18, Norbert Preining <preining at logic.at> a ?crit :

> On Sun, 19 Apr 2015, Norbert Preining wrote:
>>> ./install-tl -repository .
>> 
>> Thanks. There is a missing rewrite from relative to absolute path
>> happening. I need to look into it, although it was like this since
>> ever ;-)
> 
> Took some time, but now I have changed it. The next install-tl script
> should save a proper location even when . is passed
> 

confirmed, it works on my side.
Jean-Fran?ois




From karl at freefriends.org  Wed May 18 00:01:19 2016
From: karl at freefriends.org (Karl Berry)
Date: Tue, 17 May 2016 22:01:19 +0000
Subject: [tex-live] pst-cie
In-Reply-To: <573AC1E1.8050608@FU-Berlin.DE>
Message-ID: <201605172201.u4HM1Je4006447@freefriends.org>

    the files of the package pst-cie are in a wrong place.

Whoops, sorry.  Should be better for tonight.  -k

From usenet at siart.de  Wed May 18 08:11:17 2016
From: usenet at siart.de (Uwe Siart)
Date: Wed, 18 May 2016 08:11:17 +0200
Subject: [tex-live] Compilation failed in require
Message-ID: <84posjnbei.fsf@siart.de>

During today's update I got an error about failed compilation. It looked
like this:

d:\>tlmgr update --all
tlmgr.pl: package repository ftp://ftp.cstug.cz/pub/local/tlpretest (not verified: gnupg not available)
tlmgr.pl: saving backups to C:/Programme/texlive/2016/tlpkg/backups
[1/9, ??:??/??:??] update: context [21902k] (41191 -> 41222) ... done
[2/9, 03:21/06:43] update: pst-cie [19533k] (41197 -> 41223) ... done
[3/9, 03:46/04:00] update: ptex [39k] (41021 -> 41220) ... done
[4/9, 03:51/04:05] update: ptex2pdf [11k] (37566 -> 41217) ... Undefined subroutine &TeXLive::TLWinGoo::reg_country call
ed at C:/Programme/texlive/2016/tlpkg/TeXLive/trans.pl line 35.
Compilation failed in require at C:/Programme/texlive/2016/tlpkg/tlpostcode/ptex2pdf-tlpost.pl line 33.
C:\Programme\texlive\2016\texmf-dist\scripts\texlive\tlmgr.pl: calling post action script tlpkg/tlpostcode/ptex2pdf-tlpo
st.pl did not succeed in C:/Programme/texlive/2016, status 255 at C:/Programme/texlive/2016/tlpkg/TeXLive/TLUtils.pm lin
e 1575.
done
[5/9, 03:59/04:13] update: texlive-docindex [219k] (41172 -> 41212) ... done
[6/9, 04:06/04:19] update: texlive-es [1003k] (40668 -> 41224) ... done
[7/9, 04:14/04:21] update: texlive-msg-translations [110k] (41178 -> 41213) ... done
[8/9, 04:21/04:28] update: texlive-pl [1082k] (37455 -> 41226) ... done
[9/9, 04:29/04:29] update: texlive-scripts [107k] (41181 -> 41225) ... done
tlmgr.pl: package log updated: C:/Programme/texlive/2016/texmf-var/web2c/tlmgr.log
running mktexlsr ...

-- 
Uwe


From norbert at preining.info  Wed May 18 08:35:20 2016
From: norbert at preining.info (Norbert Preining)
Date: Wed, 18 May 2016 15:35:20 +0900
Subject: [tex-live] Compilation failed in require
In-Reply-To: <84posjnbei.fsf@siart.de>
References: <84posjnbei.fsf@siart.de>
Message-ID: <20160518063520.GF4108@logic.at>

On Wed, 18 May 2016, Uwe Siart wrote:
> [4/9, 03:51/04:05] update: ptex2pdf [11k] (37566 -> 41217) ... Undefined subroutine &TeXLive::TLWinGoo::reg_country call
> ed at C:/Programme/texlive/2016/tlpkg/TeXLive/trans.pl line 35.

Thanks, will be hopefully fixed for tomorrow.

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13
------------------------------------------------------------------------

From d.p.carlisle at gmail.com  Thu May 19 10:46:28 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Thu, 19 May 2016 09:46:28 +0100
Subject: [tex-live] biber in cygwin64 tl2016 builds
Message-ID: <CAEW6iOgwARwyAmqitEM8Cd2tLu+WjJGZpgRoPPbcL=7aM5ErVA@mail.gmail.com>

biber apparently hangs on any input if I just use something as simple as

\documentclass{article}
\usepackage{biblatex}
\begin{document}
\end{document}


then after pdflatex file, biber file just hangs at the command line
with no output and no log (even with --trace) and I have to kill it.

biber -- help works and biber --cache shows a cache in /tmp (which I
tried removing and it built another one but with same result)

There were some problems at the start of tl2015 with biber but they
cleared up at some point, although to be honest I don't recall if they
fixed in texlive or if I just switched in the biber that comes with
cygwin.  The cygwin /usr/bin/biber works most of the time but now
complains that the version in the bcf file is 3.1 not 3.0 so
presumably it will fail if any new features are really used.

David

From zarniwhoop at ntlworld.com  Thu May 19 12:18:04 2016
From: zarniwhoop at ntlworld.com (Ken Moffat)
Date: Thu, 19 May 2016 11:18:04 +0100
Subject: [tex-live] biber in cygwin64 tl2016 builds
In-Reply-To: <CAEW6iOgwARwyAmqitEM8Cd2tLu+WjJGZpgRoPPbcL=7aM5ErVA@mail.gmail.com>
References: <CAEW6iOgwARwyAmqitEM8Cd2tLu+WjJGZpgRoPPbcL=7aM5ErVA@mail.gmail.com>
Message-ID: <20160519101803.GB7584@milliways.localdomain>

On Thu, May 19, 2016 at 09:46:28AM +0100, David Carlisle wrote:
> biber apparently hangs on any input if I just use something as simple as
> 
> \documentclass{article}
> \usepackage{biblatex}
> \begin{document}
> \end{document}
> 
> 
> then after pdflatex file, biber file just hangs at the command line
> with no output and no log (even with --trace) and I have to kill it.
> 
> biber -- help works and biber --cache shows a cache in /tmp (which I
> tried removing and it built another one but with same result)
> 
> There were some problems at the start of tl2015 with biber but they
> cleared up at some point, although to be honest I don't recall if they
> fixed in texlive or if I just switched in the biber that comes with
> cygwin.  The cygwin /usr/bin/biber works most of the time but now
> complains that the version in the bcf file is 3.1 not 3.0 so
> presumably it will fail if any new features are really used.
> 
> David

On linux with tl2015 and biber-2.3, if I use your example with
pdflatex and then biber, biber fails with:

INFO - This is Biber 2.3
INFO - Logfile is 'biber.tex.blg'
ERROR - Cannot find control file 'biber.tex.bcf'! - did you pass the
"backend=biber" option to BibLaTeX?
INFO - ERRORS: 1

That implies that your example is defective ?

In my own test suite I use:

\usepackage[
    backend=biber,
    style=authoryear,
    natbib=true
]{biblatex}

The message I got implies that at least the backend specification is
required.  Why yours hangs I have no idea, but the results of what a
program considers to be unexpected input (if you will allow me to
anthropomorphize programs) are always "interesting" and only
occasionally match what humans expect (I'm thinking particularly of
compilation error messages, at least after the first error).

BUT - for me, an essentially empty document with all of my normal
package settings fails in the same way.  Has such an empty document
worked in the past ?  If it has, should it be expected to work ?
I've no idea, it took me a long time to find a biber example that
worked for me, I'm just asking if this is a realistic document.

?en
-- 
This email was written using 100% recycled letters.

From kakuto at fuk.kindai.ac.jp  Thu May 19 12:34:48 2016
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu, 19 May 2016 19:34:48 +0900
Subject: [tex-live] biber in cygwin64 tl2016 builds
In-Reply-To: <20160519101803.GB7584@milliways.localdomain>
References: <CAEW6iOgwARwyAmqitEM8Cd2tLu+WjJGZpgRoPPbcL=7aM5ErVA@mail.gmail.com>
 <20160519101803.GB7584@milliways.localdomain>
Message-ID: <1950AB49E5A24F94A190F584DEE9FB05@CJ3001517A>

Dear Ken,

> INFO - This is Biber 2.3
> INFO - Logfile is 'biber.tex.blg'
> ERROR - Cannot find control file 'biber.tex.bcf'! - did you pass the
> "backend=biber" option to BibLaTeX?
> INFO - ERRORS: 1

Here (win32)
pdflatex t.tex
biber t

INFO - This is Biber 2.5
INFO - Logfile is 't.blg'
INFO - Reading 't.bcf'
WARN - No data sources defined!

Best,
Akira


From d.p.carlisle at gmail.com  Thu May 19 12:41:47 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Thu, 19 May 2016 11:41:47 +0100
Subject: [tex-live] biber in cygwin64 tl2016 builds
In-Reply-To: <1950AB49E5A24F94A190F584DEE9FB05@CJ3001517A>
References: <CAEW6iOgwARwyAmqitEM8Cd2tLu+WjJGZpgRoPPbcL=7aM5ErVA@mail.gmail.com>
 <20160519101803.GB7584@milliways.localdomain>
 <1950AB49E5A24F94A190F584DEE9FB05@CJ3001517A>
Message-ID: <CAEW6iOj6Rt4hHm0e9VwJ2wcU0cwAOd1SRjbHwE7-70cpDo52Nw@mail.gmail.com>

Sorry, the empty file was just a minimal example, this also hangs (I
think _any_ input file hangs)

\documentclass{article}
\usepackage[
    backend=biber
]{biblatex}
\addbibresource{biblatex-examples.bib}
\begin{document}
testing: \cite{sigfridsson}
\printbibliography
\end{document}

From zarniwhoop at ntlworld.com  Thu May 19 13:34:24 2016
From: zarniwhoop at ntlworld.com (Ken Moffat)
Date: Thu, 19 May 2016 12:34:24 +0100
Subject: [tex-live] biber in cygwin64 tl2016 builds
In-Reply-To: <CAEW6iOj6Rt4hHm0e9VwJ2wcU0cwAOd1SRjbHwE7-70cpDo52Nw@mail.gmail.com>
References: <CAEW6iOgwARwyAmqitEM8Cd2tLu+WjJGZpgRoPPbcL=7aM5ErVA@mail.gmail.com>
 <20160519101803.GB7584@milliways.localdomain>
 <1950AB49E5A24F94A190F584DEE9FB05@CJ3001517A>
 <CAEW6iOj6Rt4hHm0e9VwJ2wcU0cwAOd1SRjbHwE7-70cpDo52Nw@mail.gmail.com>
Message-ID: <20160519113424.GA9878@milliways.localdomain>

On Thu, May 19, 2016 at 11:41:47AM +0100, David Carlisle wrote:
> Sorry, the empty file was just a minimal example, this also hangs (I
> think _any_ input file hangs)
> 
> \documentclass{article}
> \usepackage[
>     backend=biber
> ]{biblatex}
> \addbibresource{biblatex-examples.bib}
> \begin{document}
> testing: \cite{sigfridsson}
> \printbibliography
> \end{document}

Sorry, my earlier reply was incorrect (I'm used to using a Makefile,
I vwrongly invoked biber on the tex file).

With 2.4 in pretest from earlier this week your example above worked
fine, and now that I've updated to 2.5 it still works.  This is on
x86_64 linux, so it looks like a cygwin-specific problem.

?en
-- 
This email was written using 100% recycled letters.

From zarniwhoop at ntlworld.com  Thu May 19 13:40:23 2016
From: zarniwhoop at ntlworld.com (Ken Moffat)
Date: Thu, 19 May 2016 12:40:23 +0100
Subject: [tex-live] biber in cygwin64 tl2016 builds
In-Reply-To: <1950AB49E5A24F94A190F584DEE9FB05@CJ3001517A>
References: <CAEW6iOgwARwyAmqitEM8Cd2tLu+WjJGZpgRoPPbcL=7aM5ErVA@mail.gmail.com>
 <20160519101803.GB7584@milliways.localdomain>
 <1950AB49E5A24F94A190F584DEE9FB05@CJ3001517A>
Message-ID: <20160519114023.GB9878@milliways.localdomain>

On Thu, May 19, 2016 at 07:34:48PM +0900, Akira Kakuto wrote:
> Dear Ken,
> 
> > INFO - This is Biber 2.3
> > INFO - Logfile is 'biber.tex.blg'
> > ERROR - Cannot find control file 'biber.tex.bcf'! - did you pass the
> > "backend=biber" option to BibLaTeX?
> > INFO - ERRORS: 1
> 
> Here (win32)
> pdflatex t.tex
> biber t
> 
> INFO - This is Biber 2.5
> INFO - Logfile is 't.blg'
> INFO - Reading 't.bcf'
> WARN - No data sources defined!
> 
> Best,
> Akira
Dear Akira,

thanks for the prompt.  My report was incorrect.

I managed to wrongly invoke biber on the tex file.

If I run pdflatex and then biber (without specifying the file
extension) I get similar results to you.

?en
-- 
This email was written using 100% recycled letters.

From jfbu at free.fr  Thu May 19 13:55:30 2016
From: jfbu at free.fr (jfbu)
Date: Thu, 19 May 2016 13:55:30 +0200
Subject: [tex-live] shouldn't biber be a dependency of biblatex ?
Message-ID: <6A665AED-5388-47BA-94C7-84689F3BBA34@free.fr>

Hi,

following on David's report today I wanted to check on mac os x, but I not installed bib-related stuff.

tlmgr info --list biblatex reports

> BibLaTeX uses its own data backend program called "biber" to read and process the bibliographic data. With biber, BibLaTeX has many features rivalling or surpassing other bibliography systems.

but there is no mention of biber executable in the produced list.

And indeed after tlmgr install biblatex, the biber executable is not installed.

Expected ?

Best

Jean-Fran?ois



From jfbu at free.fr  Thu May 19 13:59:21 2016
From: jfbu at free.fr (jfbu)
Date: Thu, 19 May 2016 13:59:21 +0200
Subject: [tex-live] biber in cygwin64 tl2016 builds
In-Reply-To: <20160519114023.GB9878@milliways.localdomain>
References: <CAEW6iOgwARwyAmqitEM8Cd2tLu+WjJGZpgRoPPbcL=7aM5ErVA@mail.gmail.com>
 <20160519101803.GB7584@milliways.localdomain>
 <1950AB49E5A24F94A190F584DEE9FB05@CJ3001517A>
 <20160519114023.GB9878@milliways.localdomain>
Message-ID: <C93A94AD-3402-4B92-B273-96AE8D6BFAE6@free.fr>


Le 19 mai 2016 ? 13:40, Ken Moffat <zarniwhoop at ntlworld.com> a ?crit :

> On Thu, May 19, 2016 at 07:34:48PM +0900, Akira Kakuto wrote:
>> Dear Ken,
>> 
>>> INFO - This is Biber 2.3
>>> INFO - Logfile is 'biber.tex.blg'
>>> ERROR - Cannot find control file 'biber.tex.bcf'! - did you pass the
>>> "backend=biber" option to BibLaTeX?
>>> INFO - ERRORS: 1
>> 
>> Here (win32)
>> pdflatex t.tex
>> biber t
>> 
>> INFO - This is Biber 2.5
>> INFO - Logfile is 't.blg'
>> INFO - Reading 't.bcf'
>> WARN - No data sources defined!
>> 
>> Best,
>> Akira
> Dear Akira,
> 
> thanks for the prompt.  My report was incorrect.
> 
> I managed to wrongly invoke biber on the tex file.
> 
> If I run pdflatex and then biber (without specifying the file
> extension) I get similar results to you.
> 
> ?en
> -- 
> This email was written using 100% recycled letters.


On mac os x, after installing biblatex+biber+logreq I also
get no hang but

$ pdflatex testbiber.tex
[output suppressed]

$ biber testbiber
INFO - This is Biber 2.5
INFO - Logfile is 'testbiber.blg'
INFO - Reading 'testbiber.bcf'
WARN - No data sources defined!

on David's file.

Jean-Fran?ois

From jfbu at free.fr  Thu May 19 14:03:15 2016
From: jfbu at free.fr (jfbu)
Date: Thu, 19 May 2016 14:03:15 +0200
Subject: [tex-live] shouldn't biber be a dependency of biblatex ?
In-Reply-To: <6A665AED-5388-47BA-94C7-84689F3BBA34@free.fr>
References: <6A665AED-5388-47BA-94C7-84689F3BBA34@free.fr>
Message-ID: <BFF80A80-0891-4478-A6EF-329B8663CDC0@free.fr>


Le 19 mai 2016 ? 13:55, jfbu <jfbu at free.fr> a ?crit :

> Hi,
> 
> following on David's report today I wanted to check on mac os x, but I not installed bib-related stuff.
> 
> tlmgr info --list biblatex reports
> 
>> BibLaTeX uses its own data backend program called "biber" to read and process the bibliographic data. With biber, BibLaTeX has many features rivalling or surpassing other bibliography systems.
> 
> but there is no mention of biber executable in the produced list.
> 
> And indeed after tlmgr install biblatex, the biber executable is not installed.


I also needed tlmgr install logreq after biblatex + biber

Sorry for post-final pretest report.

Jean-Fran?ois



From d.p.carlisle at gmail.com  Thu May 19 14:11:15 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Thu, 19 May 2016 13:11:15 +0100
Subject: [tex-live] biber in cygwin64 tl2016 builds
In-Reply-To: <C93A94AD-3402-4B92-B273-96AE8D6BFAE6@free.fr>
References: <CAEW6iOgwARwyAmqitEM8Cd2tLu+WjJGZpgRoPPbcL=7aM5ErVA@mail.gmail.com>
 <20160519101803.GB7584@milliways.localdomain>
 <1950AB49E5A24F94A190F584DEE9FB05@CJ3001517A>
 <20160519114023.GB9878@milliways.localdomain>
 <C93A94AD-3402-4B92-B273-96AE8D6BFAE6@free.fr>
Message-ID: <CAEW6iOg7XCrcJfAuw=kJD-CkLjxA-N_V0tUpHedh5h4F2p5B3Q@mail.gmail.com>

On 19 May 2016 at 12:59, jfbu <jfbu at free.fr> wrote:
>
> Le 19 mai 2016 ? 13:40, Ken Moffat <zarniwhoop at ntlworld.com> a ?crit :
>
> On mac os x, after installing biblatex+biber+logreq I also
> get no hang but
>
> $ pdflatex testbiber.tex
> [output suppressed]
>
> $ biber testbiber
> INFO - This is Biber 2.5
> INFO - Logfile is 'testbiber.blg'
> INFO - Reading 'testbiber.bcf'
> WARN - No data sources defined!
>
> on David's file.
>
> Jean-Fran?ois



so that's good then and seems to contradict what your wrote in the
other message that biber is not installed.
there was no data source specified in the first test file, so that
warning is the expected behaviour.

David


From jfbu at free.fr  Thu May 19 14:14:59 2016
From: jfbu at free.fr (jfbu)
Date: Thu, 19 May 2016 14:14:59 +0200
Subject: [tex-live] biber in cygwin64 tl2016 builds
In-Reply-To: <CAEW6iOg7XCrcJfAuw=kJD-CkLjxA-N_V0tUpHedh5h4F2p5B3Q@mail.gmail.com>
References: <CAEW6iOgwARwyAmqitEM8Cd2tLu+WjJGZpgRoPPbcL=7aM5ErVA@mail.gmail.com>
 <20160519101803.GB7584@milliways.localdomain>
 <1950AB49E5A24F94A190F584DEE9FB05@CJ3001517A>
 <20160519114023.GB9878@milliways.localdomain>
 <C93A94AD-3402-4B92-B273-96AE8D6BFAE6@free.fr>
 <CAEW6iOg7XCrcJfAuw=kJD-CkLjxA-N_V0tUpHedh5h4F2p5B3Q@mail.gmail.com>
Message-ID: <16F1BAC8-0354-471F-A9A4-AD6B644C3660@free.fr>


Le 19 mai 2016 ? 14:11, David Carlisle <d.p.carlisle at gmail.com> a ?crit :

> On 19 May 2016 at 12:59, jfbu <jfbu at free.fr> wrote:
>> 
>> Le 19 mai 2016 ? 13:40, Ken Moffat <zarniwhoop at ntlworld.com> a ?crit :
>> 
>> On mac os x, after installing biblatex+biber+logreq I also
>> get no hang but
>> 
>> $ pdflatex testbiber.tex
>> [output suppressed]
>> 
>> $ biber testbiber
>> INFO - This is Biber 2.5
>> INFO - Logfile is 'testbiber.blg'
>> INFO - Reading 'testbiber.bcf'
>> WARN - No data sources defined!
>> 
>> on David's file.
>> 
>> Jean-Fran?ois
> 
> 
> 
> so that's good then and seems to contradict what your wrote in the
> other message that biber is not installed.

Hi David

sorry for possible confusion but I mentioned above "after installing biblatex+biber+logreq"

> there was no data source specified in the first test file, so that
> warning is the expected behaviour.

I tried with your second test file and I get now

$ biber testbiber2
INFO - This is Biber 2.5
INFO - Logfile is 'testbiber2.blg'
INFO - Reading 'testbiber2.bcf'
INFO - Found 1 citekeys in bib section 0
INFO - Processing section 0
INFO - Looking for bibtex format file 'biblatex-examples.bib' for section 0
INFO - Decoding LaTeX character macros into UTF-8
INFO - Found BibTeX data source '/usr/local/texlive/2016/texmf-dist/bibtex/bib/biblatex/biblatex/biblatex-examples.bib'
INFO - Overriding locale 'en-US' defaults 'variable = shifted' with 'variable = non-ignorable'
INFO - Overriding locale 'en-US' defaults 'normalization = NFD' with 'normalization = prenormalized'
INFO - Sorting list 'nty/global/' of type 'entry' with scheme 'nty' and locale 'en-US'
INFO - No sort tailoring available for locale 'en-US'
INFO - Writing 'testbiber2.bbl' with encoding 'ascii'
INFO - Output to testbiber2.bbl


Best

Jean-Fran?ois



From news3 at nililand.de  Thu May 19 14:50:19 2016
From: news3 at nililand.de (Ulrike Fischer)
Date: Thu, 19 May 2016 14:50:19 +0200
Subject: [tex-live] biber in cygwin64 tl2016 builds
References: <CAEW6iOgwARwyAmqitEM8Cd2tLu+WjJGZpgRoPPbcL=7aM5ErVA@mail.gmail.com>
Message-ID: <14s8b3owvfdr5.dlg@nililand.de>

Am Thu, 19 May 2016 09:46:28 +0100 schrieb David Carlisle:

> biber apparently hangs on any input if I just use something as simple as
> 
> \documentclass{article}
> \usepackage{biblatex}
> \begin{document}
> \end{document}
> 
> 
> then after pdflatex file, biber file just hangs at the command line
> with no output and no log (even with --trace) and I have to kill it.

You could also add an issue to the biber tracker
https://github.com/plk/biber/issues. Philip has perhaps an idea
what's going on.  



-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From kbrow1i at gmail.com  Thu May 19 15:06:42 2016
From: kbrow1i at gmail.com (Ken Brown)
Date: Thu, 19 May 2016 09:06:42 -0400
Subject: [tex-live] biber in cygwin64 tl2016 builds
In-Reply-To: <14s8b3owvfdr5.dlg@nililand.de>
References: <CAEW6iOgwARwyAmqitEM8Cd2tLu+WjJGZpgRoPPbcL=7aM5ErVA@mail.gmail.com>
 <14s8b3owvfdr5.dlg@nililand.de>
Message-ID: <351743ba-2b45-2867-cd3e-40d446b98feb@gmail.com>

On 5/19/2016 8:50 AM, Ulrike Fischer wrote:
> Am Thu, 19 May 2016 09:46:28 +0100 schrieb David Carlisle:
>
>> biber apparently hangs on any input if I just use something as simple as
>>
>> \documentclass{article}
>> \usepackage{biblatex}
>> \begin{document}
>> \end{document}
>>
>>
>> then after pdflatex file, biber file just hangs at the command line
>> with no output and no log (even with --trace) and I have to kill it.
>
> You could also add an issue to the biber tracker
> https://github.com/plk/biber/issues. Philip has perhaps an idea
> what's going on.

I built the binary, so let me take a look and see if I can figure out 
what the problem is.  Phil, I may need your help.  Do you have any 
debugging hints?

Ken

From kbrow1i at gmail.com  Thu May 19 15:57:02 2016
From: kbrow1i at gmail.com (Ken Brown)
Date: Thu, 19 May 2016 09:57:02 -0400
Subject: [tex-live] biber in cygwin64 tl2016 builds
In-Reply-To: <351743ba-2b45-2867-cd3e-40d446b98feb@gmail.com>
References: <CAEW6iOgwARwyAmqitEM8Cd2tLu+WjJGZpgRoPPbcL=7aM5ErVA@mail.gmail.com>
 <14s8b3owvfdr5.dlg@nililand.de>
 <351743ba-2b45-2867-cd3e-40d446b98feb@gmail.com>
Message-ID: <a52555f6-e8c5-2756-a0e1-504920e9ca68@gmail.com>

On 5/19/2016 9:06 AM, Ken Brown wrote:
> On 5/19/2016 8:50 AM, Ulrike Fischer wrote:
>> Am Thu, 19 May 2016 09:46:28 +0100 schrieb David Carlisle:
>>
>>> biber apparently hangs on any input if I just use something as simple as
>>>
>>> \documentclass{article}
>>> \usepackage{biblatex}
>>> \begin{document}
>>> \end{document}
>>>
>>>
>>> then after pdflatex file, biber file just hangs at the command line
>>> with no output and no log (even with --trace) and I have to kill it.
>>
>> You could also add an issue to the biber tracker
>> https://github.com/plk/biber/issues. Philip has perhaps an idea
>> what's going on.
>
> I built the binary, so let me take a look and see if I can figure out
> what the problem is.  Phil, I may need your help.  Do you have any
> debugging hints?

Never mind.  I can't reproduce the problem on my system:

$ cat test.tex
\documentclass{article}
\usepackage{biblatex}
\begin{document}
\end{document}

$ /usr/local/texlive/2016/bin/x86_64-cygwin/pdflatex test
This is pdfTeX, Version 3.14159265-2.6-1.40.17 (TeX Live 2016) 
(preloaded format=pdflatex)
  restricted \write18 enabled.
entering extended mode
(./test.tex
[...]
No file test.aux.
No file test.bbl.
(./test.aux)

LaTeX Warning: There were undefined references.


Package biblatex Warning: Please (re)run Biber on the file:
(biblatex)                test
(biblatex)                and rerun LaTeX afterwards.

  )
No pages of output.
Transcript written on test.log.

$ /usr/local/texlive/2016/bin/x86_64-cygwin/biber test
INFO - This is Biber 2.5
INFO - Logfile is 'test.blg'
INFO - Reading 'test.bcf'
WARN - No data sources defined!

David, I'm sorry, but I don't know what the problem could be on your system.

Ken

From koch at uoregon.edu  Thu May 19 22:53:36 2016
From: koch at uoregon.edu (Richard Koch)
Date: Thu, 19 May 2016 13:53:36 -0700
Subject: [tex-live] Latin Modern in Simple TeX
Message-ID: <903C07DF-1F1F-4BD2-82BF-F87B6668F7AB@uoregon.edu>

The ?small? scheme in TeX Live is supposed to be equivalent to
the BasicTeX install package for the Macintosh. 

It appears that recently the LatinModern package, lm, was
removed from this scheme. Actually, lm was a deliberate part
of BasicTeX to support Europeans using the package.

Not that it matters, but there is a description of the
construction of BasicTeX at

	http://pages.uoregon.edu/koch/BasicTeX.pdf

See the section titled ?Worrying About Europe? for an explanation
about why lm is part of the package.

Please add lm back to the small scheme!

Dick Koch

From karl at freefriends.org  Fri May 20 00:00:19 2016
From: karl at freefriends.org (Karl Berry)
Date: Thu, 19 May 2016 22:00:19 +0000
Subject: [tex-live] tl16 final(?) build tonight
Message-ID: <201605192200.u4JM0JTB010760@freefriends.org>

I've imported today's updates from CTAN (pstricks, tex-gyre-math,
mptopdf, csplain).  If tonight's build goes ok (last night's failed, for
stupid reasons -- my fault), I hope it will be the last one for the
official release => TL'16 => DVD'16.

That is, I don't plan to import more updates as a matter of course.
Indeed, barring bad bugs cropping up in the next couple days, I don't
plan to make any more commits of any kind.  If anyone else thinks they
need to make a commit, please write me first.

(I won't be surprised if we need to make a critical fix or two,
and that's ok.  It's just done "as far as I know".)

We will stay in this frozen state for at least a couple of days to have
a chance for final testing.  My plan is to turn the image over to
Manfred on Sunday for putting together the whole TeX Collection.  When
he and the other DVD testers (Klaus ...) deem it ok and send the final
image to manufacturing, I'll make the net release of TL'16 as usual.

Happy TeXing,
Karl

From beebe at math.utah.edu  Fri May 20 03:47:35 2016
From: beebe at math.utah.edu (Nelson H. F. Beebe)
Date: Thu, 19 May 2016 19:47:35 -0600
Subject: [tex-live]  another network outage at Utah
Message-ID: <CMM.0.96.0.1463708855.beebe@gamma.math.utah.edu>

This morning at 11:13 MDT (UTC - 6h), the local power company lost
their feed to the University of Utah main campus, and power did not
return to campus for about two hours.

Normally, we have a diesel generator that kicks in and keeps us
running, and it did, but a recent failure of our machine-room UPS
prevented electrical pass through to the room, so all equipment
instantly was without power.  In addition, our desktop UPSes are good
for about an hour, but that was not long enough for the outage.

As usually happens with major power events, there are machines that
won't restart, network switches that get confused, disks and fans that
won't spin up, and other headaches.  We have spent the last five hours
recovering systems, and are almost back to normal.

The result of this mess is that traffic to and from *.utah.edu
machines was impossible for two to three hours in the middle of the
day.  Classes were cancelled, and departmental offices were closed.

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- University of Utah                    FAX: +1 801 581 4148                  -
- Department of Mathematics, 110 LCB    Internet e-mail: beebe at math.utah.edu  -
- 155 S 1400 E RM 233                       beebe at acm.org  beebe at computer.org -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe/ -
-------------------------------------------------------------------------------

From beebe at math.utah.edu  Fri May 20 03:48:26 2016
From: beebe at math.utah.edu (Nelson H. F. Beebe)
Date: Thu, 19 May 2016 19:48:26 -0600
Subject: [tex-live]  another network outage at Utah
Message-ID: <CMM.0.96.0.1463708906.beebe@gamma.math.utah.edu>

This morning at 11:13 MDT (UTC - 6h), the local power company lost
their feed to the University of Utah main campus, and power did not
return to campus for about two hours.

Normally, we have a diesel generator that kicks in and keeps us
running, and it did, but a recent failure of our machine-room UPS
prevented electrical pass through to the room, so all equipment
instantly was without power.  In addition, our desktop UPSes are good
for about an hour, but that was not long enough for the outage.

As usually happens with major power events, there are machines that
won't restart, network switches that get confused, disks and fans that
won't spin up, and other headaches.  We have spent the last five hours
recovering systems, and are almost back to normal.

The result of this mess is that traffic to and from *.utah.edu
machines was impossible for two to three hours in the middle of the
day.  Classes were cancelled, and departmental offices were closed.

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- University of Utah                    FAX: +1 801 581 4148                  -
- Department of Mathematics, 110 LCB    Internet e-mail: beebe at math.utah.edu  -
- 155 S 1400 E RM 233                       beebe at acm.org  beebe at computer.org -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe/ -
-------------------------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Fri May 20 10:21:46 2016
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 20 May 2016 10:21:46 +0200
Subject: [tex-live] compiler error for devnag.c (clang++, OS X 10.11)
Message-ID: <CALBOmsZ-Wi0neqpVk5XEThr6WF6Y335-kP8YHCWBFT2ucz_aaw@mail.gmail.com>

Hi,

First of all, the information in
    http://tug.org/svn/texlive/trunk/Build/source/utils/devnag/AUTHORS?revision=35886&view=markup
is apparently misleading / old, it says:

~~~~~
Author : Frans J. Velthuis
Date : 09 May 1991

The maintainer of this program is now John Smith
~~~~~

I contacted John Smith who replied that he no longer maintains devnag
and that I should contact Zdenek.

I'm not even sure whether there is any other "upstream" source for
devnag or if TeX Live's SVN is considered "upstream". The man page
from "texdoc devnag" points to this mailing list.

The problem is that the source gets compiled with C++ (actually with
"clang++ -stdlib=libc++ -std=c++14"). That mostly works, but the
compiler is not particularly happy about
    void err_ill(const char *str);
    err_ill('\0')

It throws an error saying:

err_ill: no known conversion from 'char' to 'const char *' for 1st
argument void err_ill(const char *str);

I bumped into this problem when compiling "that other TeX
distribution" on OS X. I filed a report at
    https://sourceforge.net/p/miktex/patches/11/

Can someone please take a look?

Thank you,
    Mojca

From zdenek.wagner at gmail.com  Fri May 20 10:52:17 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 20 May 2016 10:52:17 +0200
Subject: [tex-live] compiler error for devnag.c (clang++, OS X 10.11)
In-Reply-To: <CALBOmsZ-Wi0neqpVk5XEThr6WF6Y335-kP8YHCWBFT2ucz_aaw@mail.gmail.com>
References: <CALBOmsZ-Wi0neqpVk5XEThr6WF6Y335-kP8YHCWBFT2ucz_aaw@mail.gmail.com>
Message-ID: <CAC1phyYcbmxN+YeY9x3fk=6cYTeXTAGPYprjc=dNvtrKyKgy3g@mail.gmail.com>

Hi,

thank you for this report. It is a long story how the upstream source
suddenly disappeared, the most recent version is thus in the TL repository
and will soon be uploaded to CTAN. The MiKTeX patch seems well to me. If
you can, apply the patch and test it, I will then test it on Linux. I
examined the code of err_ill and this patch should not break anything.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2016-05-20 10:21 GMT+02:00 Mojca Miklavec <mojca.miklavec.lists at gmail.com>:

> Hi,
>
> First of all, the information in
>
> http://tug.org/svn/texlive/trunk/Build/source/utils/devnag/AUTHORS?revision=35886&view=markup
> is apparently misleading / old, it says:
>
> ~~~~~
> Author : Frans J. Velthuis
> Date : 09 May 1991
>
> The maintainer of this program is now John Smith
> ~~~~~
>
> I contacted John Smith who replied that he no longer maintains devnag
> and that I should contact Zdenek.
>
> I'm not even sure whether there is any other "upstream" source for
> devnag or if TeX Live's SVN is considered "upstream". The man page
> from "texdoc devnag" points to this mailing list.
>
> The problem is that the source gets compiled with C++ (actually with
> "clang++ -stdlib=libc++ -std=c++14"). That mostly works, but the
> compiler is not particularly happy about
>     void err_ill(const char *str);
>     err_ill('\0')
>
> It throws an error saying:
>
> err_ill: no known conversion from 'char' to 'const char *' for 1st
> argument void err_ill(const char *str);
>
> I bumped into this problem when compiling "that other TeX
> distribution" on OS X. I filed a report at
>     https://sourceforge.net/p/miktex/patches/11/
>
> Can someone please take a look?
>
> Thank you,
>     Mojca
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160520/e9277b74/attachment.html>

From mojca.miklavec.lists at gmail.com  Fri May 20 11:57:13 2016
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 20 May 2016 11:57:13 +0200
Subject: [tex-live] compiler error for devnag.c (clang++, OS X 10.11)
In-Reply-To: <CAC1phyYcbmxN+YeY9x3fk=6cYTeXTAGPYprjc=dNvtrKyKgy3g@mail.gmail.com>
References: <CALBOmsZ-Wi0neqpVk5XEThr6WF6Y335-kP8YHCWBFT2ucz_aaw@mail.gmail.com>
 <CAC1phyYcbmxN+YeY9x3fk=6cYTeXTAGPYprjc=dNvtrKyKgy3g@mail.gmail.com>
Message-ID: <CALBOmsauhRx78EahdsDt9fqpY7_xWxjZhFW+SvF2WwMrHDLAEg@mail.gmail.com>

On May 20, 2016 10:52 AM, "Zdenek Wagner" wrote:
>
> Hi,
>
> thank you for this report. It is a long story how the upstream source
suddenly disappeared, the most recent version is thus in the TL repository
and will soon be uploaded to CTAN.

Thank you.

(The added value could be a standalone repository with a bug tracker, but
only if there is any serious development still going on, otherwise TL makes
more sense.)

> The MiKTeX patch seems well to me. If you can, apply the patch and test
it, I will then test it on Linux.

I wrote the patch myself as a temporary workaround. I'm sure there must be
a more elegant solution, but it did the trick for me (on OS X 10.11 with
clang++).

In any case we need to wait with any patches now.

Mojca
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160520/7be3279a/attachment.html>

From zdenek.wagner at gmail.com  Fri May 20 12:11:38 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 20 May 2016 12:11:38 +0200
Subject: [tex-live] compiler error for devnag.c (clang++, OS X 10.11)
In-Reply-To: <CALBOmsauhRx78EahdsDt9fqpY7_xWxjZhFW+SvF2WwMrHDLAEg@mail.gmail.com>
References: <CALBOmsZ-Wi0neqpVk5XEThr6WF6Y335-kP8YHCWBFT2ucz_aaw@mail.gmail.com>
 <CAC1phyYcbmxN+YeY9x3fk=6cYTeXTAGPYprjc=dNvtrKyKgy3g@mail.gmail.com>
 <CALBOmsauhRx78EahdsDt9fqpY7_xWxjZhFW+SvF2WwMrHDLAEg@mail.gmail.com>
Message-ID: <CAC1phyYjuyHA-t02GQF7_mDiCjo-3o0erw=67F8sAWSjxJZuwg@mail.gmail.com>

2016-05-20 11:57 GMT+02:00 Mojca Miklavec <mojca.miklavec.lists at gmail.com>:

> On May 20, 2016 10:52 AM, "Zdenek Wagner" wrote:
> >
> > Hi,
> >
> > thank you for this report. It is a long story how the upstream source
> suddenly disappeared, the most recent version is thus in the TL repository
> and will soon be uploaded to CTAN.
>
> Thank you.
>
> (The added value could be a standalone repository with a bug tracker, but
> only if there is any serious development still going on, otherwise TL makes
> more sense.)
>

It used to exist. We have not received any bug report for several years. We
consider it obsolete, XeTeX offers much better solution but there ae still
many documents using the package, so it is necessary to keep it working. A
few years ago prasanna Mishra even wrote an article about it in Hindi.

> > The MiKTeX patch seems well to me. If you can, apply the patch and test
> it, I will then test it on Linux.
>
> I wrote the patch myself as a temporary workaround. I'm sure there must be
> a more elegant solution, but it did the trick for me (on OS X 10.11 with
> clang++).
>
> In any case we need to wait with any patches now.
>

In these two cases err_ill apparently expect an empty string so your
solution is perfect. The program is not Unicode aware although it can use
Unicode input outside the {\dn } mode. I have tested it using a document
written in Czech and Hindi. Outside {\dn } it just copies the bytes.


> Mojca
>



Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160520/76bd81bd/attachment.html>

From beebe at math.utah.edu  Fri May 20 18:12:59 2016
From: beebe at math.utah.edu (Nelson H. F. Beebe)
Date: Fri, 20 May 2016 10:12:59 -0600
Subject: [tex-live] another network outage at Utah
Message-ID: <CMM.0.96.0.1463760779.beebe@gamma.math.utah.edu>

The electrical problems in Utah continue:

	Up to 85,000 affected by northern Utah power outages overnight 
	http://www.sltrib.com/news/3913898-155/up-to-85000-affected-by-northern

Power disappeared again about 11pm last night for an hour or so, and
my colleague came in about 2am to restart systems and services.  We
are still recovering this morning, but most machines and services are
operational.

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- University of Utah                    FAX: +1 801 581 4148                  -
- Department of Mathematics, 110 LCB    Internet e-mail: beebe at math.utah.edu  -
- 155 S 1400 E RM 233                       beebe at acm.org  beebe at computer.org -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe/ -
-------------------------------------------------------------------------------

From endre.88.oma at gmail.com  Mon May 23 14:29:19 2016
From: endre.88.oma at gmail.com (Endre Oma)
Date: Mon, 23 May 2016 12:29:19 +0000
Subject: [tex-live] pretesttl2016: bibtex and bibtex8 via biblatex produce
 output that stops pdflatex
Message-ID: <CA+LiVb6U-46C9f0jeGm2W4rUcT_FiOmJ2ZaYyTuBtdkfHcKpDw@mail.gmail.com>

Hi, I stumpled upon a bug in bibtex and bibtex8, using biblatex, where they
seem to add a newline if some parameter to a verb is too long. I've added a
minimum working sample at the end.


Wrong output:
--- snip ---
    \verb{url}
    \verb
  https://example.com/some/really/really/long/and/winding/path/to/documen
    \verb t.html
    \endverb
--- /snip ---


Expected output:
--- snip ---
    \verb{url}
    \verb
https://example.com/some/really/really/long/and/winding/path/to/documen
    \verb t.html
    \endverb
--- /snip ---


File mwe.tex:
\begin{filecontents*}{mwe.bib}
@online{sampleurl,
    title={sample},
    author={{Sample Sampleson}},
    url={
https://example.com/some/really/really/long/and/winding/path/to/document.html
},
},
\end{filecontents*}
\documentclass{article}

\usepackage[backend=bibtex8]{biblatex}
%\usepackage[backend=biber]{biblatex}
\addbibresource{mwe.bib}

\begin{document}

See \cite{sampleurl}

\printbibliography
\end{document}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160523/f7b698d5/attachment.html>

From joseph.wright at morningstar2.co.uk  Mon May 23 17:20:46 2016
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Mon, 23 May 2016 16:20:46 +0100
Subject: [tex-live] pretesttl2016: bibtex and bibtex8 via biblatex
 produce output that stops pdflatex
In-Reply-To: <CA+LiVb6U-46C9f0jeGm2W4rUcT_FiOmJ2ZaYyTuBtdkfHcKpDw@mail.gmail.com>
References: <CA+LiVb6U-46C9f0jeGm2W4rUcT_FiOmJ2ZaYyTuBtdkfHcKpDw@mail.gmail.com>
Message-ID: <0550ce89-4cf6-a506-61bd-053852b6a411@morningstar2.co.uk>

On 23/05/2016 13:29, Endre Oma wrote:
> Hi, I stumpled upon a bug in bibtex and bibtex8, using biblatex, where they
> seem to add a newline if some parameter to a verb is too long. I've added a
> minimum working sample at the end.
> 
> 
> Wrong output:
> --- snip ---
>     \verb{url}
>     \verb
>   https://example.com/some/really/really/long/and/winding/path/to/documen
>     \verb t.html
>     \endverb
> --- /snip ---
> 
> 
> Expected output:
> --- snip ---
>     \verb{url}
>     \verb
> https://example.com/some/really/really/long/and/winding/path/to/documen
>     \verb t.html
>     \endverb
> --- /snip ---
> 
> 
> File mwe.tex:
> \begin{filecontents*}{mwe.bib}
> @online{sampleurl,
>     title={sample},
>     author={{Sample Sampleson}},
>     url={
> https://example.com/some/really/really/long/and/winding/path/to/document.html
> },
> },
> \end{filecontents*}
> \documentclass{article}
> 
> \usepackage[backend=bibtex8]{biblatex}
> %\usepackage[backend=biber]{biblatex}
> \addbibresource{mwe.bib}
> 
> \begin{document}
> 
> See \cite{sampleurl}
> 
> \printbibliography
> \end{document}
> 

Not a TeX Live question, rather a biblatex bug. In any case, I will take
a look at this: will relate to recent changes in the .bst file. Given
the TeX Live DVD is currently being prepared, an update will not happen
until normal additions from CTAN resume.

Joseph

From joseph.wright at morningstar2.co.uk  Mon May 23 17:42:30 2016
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Mon, 23 May 2016 16:42:30 +0100
Subject: [tex-live] pretesttl2016: bibtex and bibtex8 via biblatex
 produce output that stops pdflatex
In-Reply-To: <0550ce89-4cf6-a506-61bd-053852b6a411@morningstar2.co.uk>
References: <CA+LiVb6U-46C9f0jeGm2W4rUcT_FiOmJ2ZaYyTuBtdkfHcKpDw@mail.gmail.com>
 <0550ce89-4cf6-a506-61bd-053852b6a411@morningstar2.co.uk>
Message-ID: <8ed742d0-0624-9279-bfff-a55e4b953b4d@morningstar2.co.uk>

On 23/05/2016 16:20, Joseph Wright wrote:
> Not a TeX Live question, rather a biblatex bug. In any case, I will take
> a look at this: will relate to recent changes in the .bst file. Given
> the TeX Live DVD is currently being prepared, an update will not happen
> until normal additions from CTAN resume.

Problem identified: fix committed to development source.

Joseph


From ross.moore at mq.edu.au  Wed May 25 05:28:22 2016
From: ross.moore at mq.edu.au (Ross Moore)
Date: Wed, 25 May 2016 03:28:22 +0000
Subject: [tex-live] pdfx has been incorrectly packaged in the texlive-pretest
Message-ID: <2C9B31A8-8839-4C24-AA7D-169A28F9B815@mq.edu.au>

Hi Karl, and others,

I?ve just noticed that the  pdfx  package is incorrect, within the TeX Live pretest,
from ~12 May.

Some files that need to be under     ?./tex/latex/pdfx/
have been incorrectly placed into    ?./doc/latex/pdfx/

Since the doc/ branch is not normally searched, this means that
some files needed for features described in the documentation
will not be found for LaTeX jobs.

The incorrectly placed files are:

SCI:OTC ross$ ls -l /usr/local/texlive/2016/texmf-dist/doc/latex/pdfx/

-rw-r--r--  1 root  wheel    15733 Feb  6 10:40 AdobeColorProfiles.tex
-rw-r--r--  1 root  wheel    24028 Feb  6 10:40 AdobeExternalProfiles.tex
-rw-r--r--  1 root  wheel     2100 Feb  6 10:40 ICC_LICENSE.txt
-rw-r--r--  1 root  wheel     4580 May 12 07:27 armglyphs.dfu

Note that  ICC_LICENSE.txt  is a licence message for the ICC Color Profiles
  coated_FOGRA39L_argl.icc  and  sRGB_IEC61966-2-1_black_scaled.icc
This licence text should accompany the profiles, within  ../tex/latex/pdfx/ .



Note that MikTeX has propagated the error and in fact made it much worse,
by omitting even more files from the distribution, retaining only the
 .sty  and .def  files in  ?./tex/latex/pdfx/  and removing all the sources
of the documentation. Now *no* LaTeX job is capable of producing
a validating PDF/A or PDF/X.

I was only alerted to these errors by a user in Germany reporting failure
when typesetting of his thesis, to meet the PDF/A requirement for
submission to his university library. He was using  LyX/MikTeX .
The only way to get his job working properly was to download and install
directly from CTAN.


Please rectify this situation.

Ross


Dr Ross Moore

Mathematics Dept | Level 2, S2.638 AHH
Macquarie University, NSW 2109, Australia

T: +61 2 9850 8955  |  F: +61 2 9850 8114<tel:%2B61%202%209850%209695>
M:+61 407 288 255<tel:%2B61%20409%20125%20670>  |  E: ross.moore at mq.edu.au<mailto:rick.minter at mq.edu.au>

http://www.maths.mq.edu.au<http://mq.edu.au/>


[cid:image001.png at 01D030BE.D37A46F0]<http://mq.edu.au/>


CRICOS Provider Number 00002J. Think before you print.
Please consider the environment before printing this email.<http://mq.edu.au/>

This message is intended for the addressee named and may
contain confidential information. If you are not the intended
recipient, please delete it and notify the sender. Views expressed
in this message are those of the individual sender, and are not
necessarily the views of Macquarie University.<http://mq.edu.au/>




Dr Ross Moore

Mathematics Dept | Level 2, S2.638 AHH
Macquarie University, NSW 2109, Australia

T: +61 2 9850 8955  |  F: +61 2 9850 8114<tel:%2B61%202%209850%209695>
M:+61 407 288 255<tel:%2B61%20409%20125%20670>  |  E: ross.moore at mq.edu.au<mailto:rick.minter at mq.edu.au>

http://www.maths.mq.edu.au<http://mq.edu.au/>


[cid:image001.png at 01D030BE.D37A46F0]<http://mq.edu.au/>


CRICOS Provider Number 00002J. Think before you print.
Please consider the environment before printing this email.<http://mq.edu.au/>

This message is intended for the addressee named and may
contain confidential information. If you are not the intended
recipient, please delete it and notify the sender. Views expressed
in this message are those of the individual sender, and are not
necessarily the views of Macquarie University.<http://mq.edu.au/>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160525/e3b4207a/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 4605 bytes
Desc: image001.png
URL: <http://tug.org/pipermail/tex-live/attachments/20160525/e3b4207a/attachment-0001.png>

From news3 at nililand.de  Wed May 25 12:46:48 2016
From: news3 at nililand.de (Ulrike Fischer)
Date: Wed, 25 May 2016 12:46:48 +0200
Subject: [tex-live] pdfx has been incorrectly packaged in the
 texlive-pretest
References: <2C9B31A8-8839-4C24-AA7D-169A28F9B815@mq.edu.au>
Message-ID: <1593t1n77waic$.dlg@nililand.de>

Am Wed, 25 May 2016 03:28:22 +0000 schrieb Ross Moore:


> Note that MikTeX has propagated the error and in fact made it much worse,
> by omitting even more files from the distribution, retaining only the
>  .sty  and .def  files in  ?./tex/latex/pdfx/  and removing all the sources
> of the documentation. Now *no* LaTeX job is capable of producing
> a validating PDF/A or PDF/X.

Can you make a bug report for miktex:
https://sourceforge.net/projects/miktex/ ?


(I could do it too, but only in the evening as I would have to sort
out the files first)


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From karl at freefriends.org  Wed May 25 19:21:53 2016
From: karl at freefriends.org (Karl Berry)
Date: Wed, 25 May 2016 17:21:53 +0000
Subject: [tex-live] pdfx has been incorrectly packaged in the
 texlive-pretest
In-Reply-To: <2C9B31A8-8839-4C24-AA7D-169A28F9B815@mq.edu.au>
Message-ID: <201605251721.u4PHLr0m026159@freefriends.org>

Darn it.  I'll fix it in TeX Live in the initial update after the release.

From news3 at nililand.de  Wed May 25 23:34:03 2016
From: news3 at nililand.de (Ulrike Fischer)
Date: Wed, 25 May 2016 23:34:03 +0200
Subject: [tex-live] pdfx has been incorrectly packaged in the
 texlive-pretest
References: <2C9B31A8-8839-4C24-AA7D-169A28F9B815@mq.edu.au>
 <1593t1n77waic$.dlg@nililand.de>
Message-ID: <m1wy3h3z9dxb.dlg@nililand.de>

Am Wed, 25 May 2016 12:46:48 +0200 schrieb Ulrike Fischer:

> Am Wed, 25 May 2016 03:28:22 +0000 schrieb Ross Moore:
> 
> 
>> Note that MikTeX has propagated the error and in fact made it much worse,
>> by omitting even more files from the distribution, retaining only the
>>  .sty  and .def  files in  ?./tex/latex/pdfx/  and removing all the sources
>> of the documentation. Now *no* LaTeX job is capable of producing
>> a validating PDF/A or PDF/X.
> 
> Can you make a bug report for miktex:
> https://sourceforge.net/projects/miktex/ ?
> 
> 
> (I could do it too, but only in the evening as I would have to sort
> out the files first)

I made a report https://sourceforge.net/p/miktex/bugs/2500/. Perhaps
you could check if I got the locations right.


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From ross.moore at mq.edu.au  Thu May 26 01:00:31 2016
From: ross.moore at mq.edu.au (Ross Moore)
Date: Wed, 25 May 2016 23:00:31 +0000
Subject: [tex-live] pdfx has been incorrectly packaged in the
 texlive-pretest
In-Reply-To: <201605251721.u4PHLr0m026159@freefriends.org>
References: <201605251721.u4PHLr0m026159@freefriends.org>
Message-ID: <750C31C3-1C42-4850-B2A8-AF7E88D8D0BC@mq.edu.au>

Hi Karl,

On May 26, 2016, at 3:21 AM, Karl Berry <karl at freefriends.org<mailto:karl at freefriends.org>> wrote:

Darn it.  I'll fix it in TeX Live in the initial update after the release.

Sure; that?ll be fine.

The good news is ?

Apart from the ICC license file, the others are only used in extremely
special, esoteric situations.

e.g., doing all the artwork in LaTeX (e.g. book-cover, technical posters,
magazine pages with colored graphics) requiring high-end printing.
Currently, if this was done with TeX/LaTeX, you?d probably take the PDF
into Acrobat (or other Adobe software) to add the desired Color Profile.
Now  pdfx  allows the profile specification to be added directly into the
 PDF/X  document being built.
Pretty esoteric, but potentially useful to some users.

armglyphs.dfu  contains the requisite  \pdfglyphtounicode  instructions
to allow a valid  /ToUnicode  map to be generated by  pdfTeX
for OT6  (Armenian) fonts, as used by ArmTeX.
Again, pretty esoteric.

If anyone needs these before the update, it?s pretty easy to tell them
where to find the files.


Cheers,

Ross


Dr Ross Moore

Mathematics Dept | Level 2, S2.638 AHH
Macquarie University, NSW 2109, Australia

T: +61 2 9850 8955  |  F: +61 2 9850 8114<tel:%2B61%202%209850%209695>
M:+61 407 288 255<tel:%2B61%20409%20125%20670>  |  E: ross.moore at mq.edu.au<mailto:rick.minter at mq.edu.au>

http://www.maths.mq.edu.au<http://mq.edu.au/>


[cid:image001.png at 01D030BE.D37A46F0]<http://mq.edu.au/>


CRICOS Provider Number 00002J. Think before you print.
Please consider the environment before printing this email.<http://mq.edu.au/>

This message is intended for the addressee named and may
contain confidential information. If you are not the intended
recipient, please delete it and notify the sender. Views expressed
in this message are those of the individual sender, and are not
necessarily the views of Macquarie University.<http://mq.edu.au/>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160525/df3528c7/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 4605 bytes
Desc: image001.png
URL: <http://tug.org/pipermail/tex-live/attachments/20160525/df3528c7/attachment-0001.png>

From mojca.miklavec.lists at gmail.com  Thu May 26 07:30:24 2016
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 26 May 2016 07:30:24 +0200
Subject: [tex-live] pdfx has been incorrectly packaged in the
 texlive-pretest
In-Reply-To: <2C9B31A8-8839-4C24-AA7D-169A28F9B815@mq.edu.au>
References: <2C9B31A8-8839-4C24-AA7D-169A28F9B815@mq.edu.au>
Message-ID: <CALBOmsa1gOHvymF9GkcohfizFWdQY6kD-VGLypy0GPTKa1eCbg@mail.gmail.com>

Hi,

On 25 May 2016 at 05:28, Ross Moore wrote:
>
> Note that  ICC_LICENSE.txt  is a licence message for the ICC Color Profiles
>   coated_FOGRA39L_argl.icc  and  sRGB_IEC61966-2-1_black_scaled.icc
> This licence text should accompany the profiles, within  ../tex/latex/pdfx/

I have one further question. Do we plan to ship copies of colour
profiles for each engine and format separately? Wouldn't it make more
sense to share resources like we do for fonts?

The ConTeXt files are currently in
    tex/context/colors/icc
and thus only "usable" for ConTeXt, this package ships files that are
only "usable" in LaTeX.

At the moment there are not that many files (many useful ones are
probably missing due to copyright issues), but it seems a waste of
resources to provide copies for each format / engine.

Mojca

From preining at logic.at  Thu May 26 07:40:59 2016
From: preining at logic.at (Norbert Preining)
Date: Thu, 26 May 2016 14:40:59 +0900
Subject: [tex-live] pdfx has been incorrectly packaged in the
 texlive-pretest
In-Reply-To: <CALBOmsa1gOHvymF9GkcohfizFWdQY6kD-VGLypy0GPTKa1eCbg@mail.gmail.com>
References: <2C9B31A8-8839-4C24-AA7D-169A28F9B815@mq.edu.au>
 <CALBOmsa1gOHvymF9GkcohfizFWdQY6kD-VGLypy0GPTKa1eCbg@mail.gmail.com>
Message-ID: <20160526054059.GV965@logic.at>

> At the moment there are not that many files (many useful ones are
> probably missing due to copyright issues), but it seems a waste of
> resources to provide copies for each format / engine.

Yes, many of those are actually not redistributable.

Norbert

--
PREINING Norbert + TeX Live & Debian Developer + http://www.preining.info
GPG: 0x860CDC13    fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13

From bvoisin at icloud.com  Thu May 26 14:29:11 2016
From: bvoisin at icloud.com (Bruno Voisin)
Date: Thu, 26 May 2016 14:29:11 +0200
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
Message-ID: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>

On a TL 2016 pretest setup (installed via MacTeX), complete with all updates etc., and A4 as the default paper size, typesetting the attached minimal test file with LuaLaTeX yields A4 PDF output. But as soon as fontspec is called, output switches to US Letter.

To be fair, I don't think fontspec does anything in this respect, but it calls

- components from LaTeX 3 (like texmf-dist/tex/latex/l3kernel/expl3-code.tex)

- various files from "Oberdiek" directories (like texmf-dist/tex/generic/oberdiek/pdftexcmds.sty)

- luaotfload.sty

I have no idea what's causing the observed behaviour -- any of the above, or something else.

This has been reported to the MacTeX list (private) and brought there to Norbert's attention, but given this seems a wider-ranging bahaviour I'm reporting here as well.

The same doesn't happen with TL 2015 (I just tried).

Bruno Voisin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Test-Paper-Size.tex
Type: application/x-tex
Size: 93 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160526/e398782a/attachment.tex>

From kakuto at fuk.kindai.ac.jp  Thu May 26 15:21:39 2016
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu, 26 May 2016 22:21:39 +0900
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
Message-ID: <04815D660AAE420EACBFC6DF64000962@CJ3001517A>

Dear Bruno,

> On a TL 2016 pretest setup (installed via MacTeX), complete with all updates etc.,
> and A4 as the default paper size, typesetting the attached 
> minimal test file with LuaLaTeX yields A4 PDF output.
> But as soon as fontspec is called, output switches to US Letter.

Confirmed on windows.
If I put an empty luatex.def in the current directory,
I obtain an a4 pdf. So I suspect that luatex.def does change
the paper size.

Best,
Akira


From d.p.carlisle at gmail.com  Thu May 26 15:23:02 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Thu, 26 May 2016 14:23:02 +0100
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
Message-ID: <CAEW6iOiVZLgiGktsCCM3DMnCQC+g8YYkRYJkCGyeoi6GokBMcA@mail.gmail.com>

fontspec (unless you use the new tuenc option) ends up loading
graphics, and this behaviour has always been this way

\documentclass{article}
%\usepackage{graphics}

\begin{document}

Hello World!

\end{document}

with pdftex will (if pdftex is set up to default to A4) give A4 as
above but letter if you uncomment graphics.

The default page size for latex standard classes  is _always_ usletter
however by default it does not communicate that to the back end  so it
just prints or previews on whatever size "paper" you have set up.  If
you use graphics (or geometry) or one or two other packages, they do
use a special or pdfliteral so set up the right size so ine pdf above
is then usletter unless you add [a4paper] in which case latex adjusts
the text block to A4 and graphics inserts the whatsit to force the
backend to A4

David

From bvoisin at icloud.com  Thu May 26 15:25:23 2016
From: bvoisin at icloud.com (Bruno Voisin)
Date: Thu, 26 May 2016 15:25:23 +0200
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
Message-ID: <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>


> Le 26 mai 2016 ? 15:21, Akira Kakuto <kakuto at fuk.kindai.ac.jp> a ?crit :
> 
> Dear Bruno,
> 
>> On a TL 2016 pretest setup (installed via MacTeX), complete with all updates etc.,
>> and A4 as the default paper size, typesetting the attached minimal test file with LuaLaTeX yields A4 PDF output.
>> But as soon as fontspec is called, output switches to US Letter.
> 
> Confirmed on windows.
> If I put an empty luatex.def in the current directory,
> I obtain an a4 pdf. So I suspect that luatex.def does change
> the paper size.
> 
> Best,
> Akira


Akira, David,

Thanks for the lightspeed debugging.

I was coming to the conclusion graphics.sty, of the various packages called by fontspec, triggered the bug. But I hadn't been as far as identifying luatex.def as the culprit!

Bruno



From d.p.carlisle at gmail.com  Thu May 26 15:28:15 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Thu, 26 May 2016 14:28:15 +0100
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
Message-ID: <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>

On 26 May 2016 at 14:25, Bruno Voisin <bvoisin at icloud.com> wrote:
>
>> Le 26 mai 2016 ? 15:21, Akira Kakuto <kakuto at fuk.kindai.ac.jp> a ?crit :
>>
>> Dear Bruno,
>>
>>> On a TL 2016 pretest setup (installed via MacTeX), complete with all updates etc.,
>>> and A4 as the default paper size, typesetting the attached minimal test file with LuaLaTeX yields A4 PDF output.
>>> But as soon as fontspec is called, output switches to US Letter.
>>
>> Confirmed on windows.
>> If I put an empty luatex.def in the current directory,
>> I obtain an a4 pdf. So I suspect that luatex.def does change
>> the paper size.
>>
>> Best,
>> Akira
>
>
> Akira, David,
>
> Thanks for the lightspeed debugging.
>
> I was coming to the conclusion graphics.sty, of the various packages called by fontspec, triggered the bug. But I hadn't been as far as identifying luatex.def as the culprit!

so far it looks like expected behaviour, I don't see a bug.

\documentclass{article}

specifies a USletter document and (once you load a package that knows
anything about the back end) that is what you are getting.


>
> Bruno
>



David


From bvoisin at icloud.com  Thu May 26 15:35:01 2016
From: bvoisin at icloud.com (Bruno Voisin)
Date: Thu, 26 May 2016 15:35:01 +0200
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
Message-ID: <6CB28B8E-E525-4C7F-A362-7D076DF535E6@icloud.com>

> Le 26 mai 2016 ? 15:28, David Carlisle <d.p.carlisle at gmail.com> a ?crit :
> 
> so far it looks like expected behaviour, I don't see a bug.
> 
> \documentclass{article}
> 
> specifies a USletter document and (once you load a package that knows
> anything about the back end) that is what you are getting.

Not here (Mac with MacTeX-2016 pretest, everything set up for A4 paper -- through tlmgr I believe -- at install time, no specific customization):

\documentclass{article}
\begin{document}
Hello World!
\end{document}

yields A4 output with all of TeX+dvips, pdfTeX and XeTeX. Only LuaTeX gives US Letter.

Bruno



From d.p.carlisle at gmail.com  Thu May 26 15:55:19 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Thu, 26 May 2016 14:55:19 +0100
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <6CB28B8E-E525-4C7F-A362-7D076DF535E6@icloud.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <6CB28B8E-E525-4C7F-A362-7D076DF535E6@icloud.com>
Message-ID: <CAEW6iOit=EajjXXpUKWJOrsGZUwuMhM=LhFKE4Ld+VnKdN6tyA@mail.gmail.com>

>
>
> \documentclass{article}
\begin{document}
Hello World!
\end{document}

yields A4 output with all of TeX+dvips, pdfTeX and XeTeX. Only LuaTeX gives
US Letter.





The internal page size setting in the pdf is whatever your local
customisation is, but
the _latex_ typesets that as US letter, the text block and left margin are
set to center it on a US letter page
if you view it or print it on A4 it just sort of accidentally works as they
are not that different.

If you load a driver that knows about the back end the back end will be
informed that this is a us letter document and
set things up accordingly.

It's been that way with pdftex since latex had a standard driver  .def
configuration in 1994.

If you specify [a4paper] the text block and margins are set for A4, and (if
you load graphics or geometry)
the internal pdf page size will be set to match, even if your local default
is US letter.

So the unfortunate part is that the specified pdf page size only matches
the size used for typesetting
if a package is loaded. But that's due to compatibility with latex 2.09 and
no standard dvi driver page configuration
at that time. It's a wart in the system but had relatively few complaints
about it in all that time:-)



David






On 26 May 2016 at 14:35, Bruno Voisin <bvoisin at icloud.com> wrote:

> > Le 26 mai 2016 ? 15:28, David Carlisle <d.p.carlisle at gmail.com> a ?crit
> :
> >
> > so far it looks like expected behaviour, I don't see a bug.
> >
> > \documentclass{article}
> >
> > specifies a USletter document and (once you load a package that knows
> > anything about the back end) that is what you are getting.
>
> Not here (Mac with MacTeX-2016 pretest, everything set up for A4 paper --
> through tlmgr I believe -- at install time, no specific customization):
>
> \documentclass{article}
> \begin{document}
> Hello World!
> \end{document}
>
> yields A4 output with all of TeX+dvips, pdfTeX and XeTeX. Only LuaTeX
> gives US Letter.
>
> Bruno
>
>


-- 
http://dpcarlisle.blogspot.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160526/9fd2a9b3/attachment.html>

From preining at logic.at  Thu May 26 16:00:30 2016
From: preining at logic.at (Norbert Preining)
Date: Thu, 26 May 2016 23:00:30 +0900
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
Message-ID: <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>

Hi David

>so far it looks like expected behaviour, I don't see a bug.
>
>\documentclass{article}
>
>specifies a USletter document and (once you load a package that knows
>anything about the back end) that is what you are getting.

That hasn't been the behaviour since many years.

We allowed for setting the global paper size so that documents without a paper specification got that paper size.

This is broken now, and I consider this very unfortunate.

Norbert

-- 
Sent from my mobile device. Please excuse my brevity.

From bvoisin at icloud.com  Thu May 26 16:01:19 2016
From: bvoisin at icloud.com (Bruno Voisin)
Date: Thu, 26 May 2016 16:01:19 +0200
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <6CB28B8E-E525-4C7F-A362-7D076DF535E6@icloud.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <6CB28B8E-E525-4C7F-A362-7D076DF535E6@icloud.com>
Message-ID: <058244BA-3B83-42EF-807A-BA71864DD974@icloud.com>

> Le 26 mai 2016 ? 15:35, Bruno Voisin <bvoisin at icloud.com> a ?crit :
> 
>> Le 26 mai 2016 ? 15:28, David Carlisle <d.p.carlisle at gmail.com> a ?crit :
>> 
>> \documentclass{article}
>> 
>> specifies a USletter document and (once you load a package that knows
>> anything about the back end) that is what you are getting.
> 
> Not here (Mac with MacTeX-2016 pretest, everything set up for A4 paper -- through tlmgr I believe -- at install time, no specific customization):
> 
> \documentclass{article}
> \begin{document}
> Hello World!
> \end{document}
> 
> yields A4 output with all of TeX+dvips, pdfTeX and XeTeX. Only LuaTeX gives US Letter.

I wasn't clear, sorry, and misinterpreted what you wrote.

After systematic testing:

\documentclass{article}

  -> A4: TeX + dvips + gs
  -> A4: pdfTeX
  -> A4: XeTeX
  -> A4: LuaTeX

\documentclass{article}
\usepackage{graphics}

  -> A4: TeX + dvips + gs
  -> Letter: pdfTeX
  -> A4: XeTeX
  -> Letter: LuaTeX

\documentclass[a4paper]{article}

  -> A4: TeX + dvips + gs
  -> A4: pdfTeX
  -> A4: XeTeX
  -> A4: LuaTeX

\documentclass[a4paper]{article}
\usepackage{graphics}

  -> A4: TeX + dvips + gs
  -> A4: pdfTeX
  -> A4: XeTeX
  -> A4: LuaTeX

OK, I'll adapt my practice to this.

But I'm surprised: I thought the idea was a total separation between

- the media size, based on \pageheight etc., defined in pdftexconfig.tex and the like, on one hand;

- the page size (used for calculating the text width and the margins etc.), based on \paperheight and the like, defined by the package option, on the other hand.

As I said, no big deal, I'll adapt.

Bruno



From d.p.carlisle at gmail.com  Thu May 26 16:04:48 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Thu, 26 May 2016 15:04:48 +0100
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
Message-ID: <CAEW6iOgtpo_YfwsFpsepoFPkLY2X7zbXVSRJ+UTj4LQroyfP7g@mail.gmail.com>

On 26 May 2016 at 15:00, Norbert Preining <preining at logic.at> wrote:

> Hi David
>
> >so far it looks like expected behaviour, I don't see a bug.
> >
> >\documentclass{article}
> >
> >specifies a USletter document and (once you load a package that knows
> >anything about the back end) that is what you are getting.
>
> That hasn't been the behaviour since many years.
>

yes honestly latex has not changed here since 199-something.

>
> We allowed for setting the global paper size so that documents without a
> paper specification got that paper size.
>

where? latex has no local configuration file that is input.

texlive lets you customise the default page sive for pdf/lua tex and dvi
dvrivers but latex's typesetting has no knowledge of this.

a document typeset with

\documentclass{article}

should produce the same text block _everywhere_ the line breaking does not
depend on local configuration.




>
> This is broken now, and I consider this very unfortunate.
>

No, pdflatex is working as it always has done, and lualatex is working like
pdflatex.


>
> Norbert
>
> --



David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160526/f79e58bc/attachment.html>

From zdenek.wagner at gmail.com  Thu May 26 16:11:19 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 26 May 2016 16:11:19 +0200
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
Message-ID: <CAC1phyZD2hEttGUR-61-4B9TwpNubN3YkKuYmBmRQ611XEJR7A@mail.gmail.com>

Hi all,

it is necessary to distinguish two things. The paper size defined by LaTeX
and stored in \paperwidth and \paperheight and the physical size known by
the driver. Unless a package gets the values from \paperheight and
\paperwidth and sends them to the driver, the physical size will remain at
its default no matter whether I specify a4paper in \documentclass or not.
This year the internals of luatex has changed so it is possible that it no
longer sets the default page size configured in TeX Live. Anyway, the
default mechanism in TeX Live need not work in other TeX distros (MiKTeX,
...). If the physical page size is not set explicitely in the document, it
will vary from computer to computer, from distro to distro. This is a
feature, not a bug.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2016-05-26 16:00 GMT+02:00 Norbert Preining <preining at logic.at>:

> Hi David
>
> >so far it looks like expected behaviour, I don't see a bug.
> >
> >\documentclass{article}
> >
> >specifies a USletter document and (once you load a package that knows
> >anything about the back end) that is what you are getting.
>
> That hasn't been the behaviour since many years.
>
> We allowed for setting the global paper size so that documents without a
> paper specification got that paper size.
>
> This is broken now, and I consider this very unfortunate.
>
> Norbert
>
> --
> Sent from my mobile device. Please excuse my brevity.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160526/0d5c7d4e/attachment-0001.html>

From zdenek.wagner at gmail.com  Thu May 26 16:14:49 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 26 May 2016 16:14:49 +0200
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <CAEW6iOgtpo_YfwsFpsepoFPkLY2X7zbXVSRJ+UTj4LQroyfP7g@mail.gmail.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
 <CAEW6iOgtpo_YfwsFpsepoFPkLY2X7zbXVSRJ+UTj4LQroyfP7g@mail.gmail.com>
Message-ID: <CAC1phybbnAa3GXYP6fsptDnFJ=XCRyRyyJ6RqVdd1gJR7-SO=Q@mail.gmail.com>

2016-05-26 16:04 GMT+02:00 David Carlisle <d.p.carlisle at gmail.com>:

>
>
> On 26 May 2016 at 15:00, Norbert Preining <preining at logic.at> wrote:
>
>> Hi David
>>
>> >so far it looks like expected behaviour, I don't see a bug.
>> >
>> >\documentclass{article}
>> >
>> >specifies a USletter document and (once you load a package that knows
>> >anything about the back end) that is what you are getting.
>>
>> That hasn't been the behaviour since many years.
>>
>
> yes honestly latex has not changed here since 199-something.
>
>>
>> We allowed for setting the global paper size so that documents without a
>> paper specification got that paper size.
>>
>
> where? latex has no local configuration file that is input.
>

If I understand the concept well, the default page size (A4 or letter) is
set for the output drivers, not for LaTeX classes.

>
> texlive lets you customise the default page sive for pdf/lua tex and dvi
> dvrivers but latex's typesetting has no knowledge of this.
>
> a document typeset with
>
> \documentclass{article}
>
> should produce the same text block _everywhere_ the line breaking does not
> depend on local configuration.
>
>
>
>
>>
>> This is broken now, and I consider this very unfortunate.
>>
>
> No, pdflatex is working as it always has done, and lualatex is working
> like pdflatex.
>
>
>>
>> Norbert
>>
>> --
>
>
>
> David
>


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160526/95dd6438/attachment.html>

From joseph.wright at morningstar2.co.uk  Thu May 26 16:17:49 2016
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Thu, 26 May 2016 15:17:49 +0100
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
Message-ID: <9c0ac4e6-c84f-cd46-d1f0-50a65d4bf083@morningstar2.co.uk>

On 26/05/2016 15:00, Norbert Preining wrote:
> Hi David
> 
>> so far it looks like expected behaviour, I don't see a bug.
>>
>> \documentclass{article}
>>
>> specifies a USletter document and (once you load a package that knows
>> anything about the back end) that is what you are getting.
> 
> That hasn't been the behaviour since many years.
> 
> We allowed for setting the global paper size so that documents without a paper specification got that paper size.
> 
> This is broken now, and I consider this very unfortunate.
> 
> Norbert

Hi Norbert,

I think there is a misunderstanding here as there are two essentially
independent places paper size come in.

>From the driver point of view there's the physical size of the paper.
LaTeX2e itself doesn't attempt to set this as there was no common
mechanism in the early 1990s for this. Values are set by graphics for
dvips, etc., and in direct PDF output mode some decision has to be made
about paper size so it's also set there.

There's then the layout that is being targeted from the macro level. The
LaTeX2e kernel defaults to letter paper with an assumption that the
result will be printed on something appropriate. This means that

    \documentclass{article}
    \begin{document}
    Hello
    \end{document}

has the wrong margin values for A4 paper irrespective of what the driver
end does. You therefore *have* to have

    \documentclass[a4paper]{article}

or a package-based equivalent to get that right.

Various packages do try to bring the two concepts together, most notable
geometry.

Joseph


From joseph.wright at morningstar2.co.uk  Thu May 26 16:29:59 2016
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Thu, 26 May 2016 15:29:59 +0100
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <058244BA-3B83-42EF-807A-BA71864DD974@icloud.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <6CB28B8E-E525-4C7F-A362-7D076DF535E6@icloud.com>
 <058244BA-3B83-42EF-807A-BA71864DD974@icloud.com>
Message-ID: <a8756ea6-9979-54e4-6098-58612964de13@morningstar2.co.uk>

On 26/05/2016 15:01, Bruno Voisin wrote:
> \documentclass{article}
> \usepackage{graphics}
> 
>   -> A4: TeX + dvips + gs
>   -> Letter: pdfTeX
>   -> A4: XeTeX
>   -> Letter: LuaTeX

I don't see this: my \listfiles

 *File List*
 article.cls    2014/09/29 v1.4h Standard LaTeX document class
  size10.clo    2014/09/29 v1.4h Standard LaTeX file (size option)
graphics.sty    2016/05/09 v1.0r Standard LaTeX Graphics (DPC,SPQR)
    trig.sty    2016/01/03 v1.10 sin cos tan (DPC)
graphics.cfg    2016/01/02 v1.10 sample graphics configuration
  luatex.def    2016/01/23 v0.01b Graphics/Color for luaTeX
infwarerr.sty    2016/05/16 v1.4 Providing info/warning/error messages (HO)
 ltxcmds.sty    2016/05/16 v1.23 LaTeX kernel commands for general use (HO)
supp-pdf.mkii
epstopdf-base.sty    2016/05/15 v2.6 Base part for package epstopdf
  grfext.sty    2016/05/16 v1.2 Manage graphics extensions (HO)
kvdefinekeys.sty    2016/05/16 v1.4 Define keys (HO)
kvoptions.sty    2016/05/16 v3.12 Key value format for package options (HO)
  keyval.sty    2014/10/28 v1.15 key=value parser (DPC)
kvsetkeys.sty    2016/05/16 v1.17 Key value parser (HO)
etexcmds.sty    2016/05/16 v1.6 Avoid name clashes with e-TeX commands (HO)
ifluatex.sty    2016/05/16 v1.4 Provides the ifluatex switch (HO)
pdftexcmds.sty    2016/05/10 v0.21 Utility functions of pdfTeX for
LuaTeX (HO)
   ifpdf.sty    2016/05/14 v3.1 Provides the ifpdf switch
luatex-loader.sty    2016/05/16 v0.6 Lua module loader (HO)
epstopdf-sys.cfg    2010/07/13 v1.3 Configuration of (r)epstopdf for TeX
Live
 ***********

What are you getting here?

Joseph


From news3 at nililand.de  Thu May 26 16:34:01 2016
From: news3 at nililand.de (Ulrike Fischer)
Date: Thu, 26 May 2016 16:34:01 +0200
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
Message-ID: <x2eb1706golm$.dlg@nililand.de>

Am Thu, 26 May 2016 23:00:30 +0900 schrieb Norbert Preining:

>>\documentclass{article}
>>
>>specifies a USletter document and (once you load a package that knows
>>anything about the back end) that is what you are getting.
> 
> That hasn't been the behaviour since many years.
> 
> We allowed for setting the global paper size so that documents without a paper specification got that paper size.
> 
> This is broken now, and I consider this very unfortunate.

I don't think that it is broken. But as nowaday almost every
document loads a package which sets the page specification
(hyperref, graphicx, drivers, geometry, KOMA-classes ...) the global
paper size isn't effective very often and the documentation paper
size wins normally. 

(I never rely on the global setting and always make sure that my
document sets the paper size correctly). 


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From news3 at nililand.de  Thu May 26 16:53:06 2016
From: news3 at nililand.de (Ulrike Fischer)
Date: Thu, 26 May 2016 16:53:06 +0200
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <6CB28B8E-E525-4C7F-A362-7D076DF535E6@icloud.com>
 <058244BA-3B83-42EF-807A-BA71864DD974@icloud.com>
 <a8756ea6-9979-54e4-6098-58612964de13@morningstar2.co.uk>
Message-ID: <19s00wg0mp96s.dlg@nililand.de>

Am Thu, 26 May 2016 15:29:59 +0100 schrieb Joseph Wright:

>> \documentclass{article}
>> \usepackage{graphics}
>> 
>>   -> A4: TeX + dvips + gs
>>   -> Letter: pdfTeX
>>   -> A4: XeTeX
>>   -> Letter: LuaTeX
> 
> I don't see this: my \listfiles

I get the same result as Bruno:

pdftex + luatex has the correct media size, as the graphics drivers
sets them, dvips + xetex gets the global default (which is A4 for
me). 

(but for some reason geometry + article + dvips + ps2pdf gives A4 in
miktex which it should do.)


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From joseph.wright at morningstar2.co.uk  Thu May 26 17:05:27 2016
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Thu, 26 May 2016 16:05:27 +0100
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <19s00wg0mp96s.dlg@nililand.de>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <6CB28B8E-E525-4C7F-A362-7D076DF535E6@icloud.com>
 <058244BA-3B83-42EF-807A-BA71864DD974@icloud.com>
 <a8756ea6-9979-54e4-6098-58612964de13@morningstar2.co.uk>
 <19s00wg0mp96s.dlg@nililand.de>
Message-ID: <c43f1dc0-1e64-db60-fc12-b95d44e3708f@morningstar2.co.uk>

On 26/05/2016 15:53, Ulrike Fischer wrote:
> Am Thu, 26 May 2016 15:29:59 +0100 schrieb Joseph Wright:
> 
>>> \documentclass{article}
>>> \usepackage{graphics}
>>>
>>>   -> A4: TeX + dvips + gs
>>>   -> Letter: pdfTeX
>>>   -> A4: XeTeX
>>>   -> Letter: LuaTeX
>>
>> I don't see this: my \listfiles
> 
> I get the same result as Bruno:
> 
> pdftex + luatex has the correct media size, as the graphics drivers
> sets them, dvips + xetex gets the global default (which is A4 for
> me). 
> 
> (but for some reason geometry + article + dvips + ps2pdf gives A4 in
> miktex which it should do.)

Ah, my mistake: was reading the wrong value :-)

Joseph



From bvoisin at icloud.com  Thu May 26 18:13:42 2016
From: bvoisin at icloud.com (Bruno Voisin)
Date: Thu, 26 May 2016 18:13:42 +0200
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <CAC1phybbnAa3GXYP6fsptDnFJ=XCRyRyyJ6RqVdd1gJR7-SO=Q@mail.gmail.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
 <CAEW6iOgtpo_YfwsFpsepoFPkLY2X7zbXVSRJ+UTj4LQroyfP7g@mail.gmail.com>
 <CAC1phybbnAa3GXYP6fsptDnFJ=XCRyRyyJ6RqVdd1gJR7-SO=Q@mail.gmail.com>
Message-ID: <A7304777-5850-4757-8114-0EFE172EB223@icloud.com>


> Le 26 mai 2016 ? 16:14, Zdenek Wagner <zdenek.wagner at gmail.com> a ?crit :
> 
> If I understand the concept well, the default page size (A4 or letter) is set for the output drivers, not for LaTeX classes. 

Several things here:


- Originally I thought this was all caused by the replacement of \pdfpageheight by \pageheight etc. in the new LuaTeX. It turns out this has nothing to do with it, and is caused by LaTeX.


- In principle, I'm all for the simplicity implied by the LaTeX design, seen from the user's point of view: the user doesn't want to have to know about the difference between paper size (\LaTeX's \paperheight etc.) and media size (the driver's \pageheight etc.); they expect to specify [a4paper] and have everything taken care of such that the output is designed for and delivered on A4 paper.


- But what's confusing is that this is not implemented as a core LaTeX functionality, and instead added by an optional package whose functionality is not directly connected with page design. It's confusing for the user to call the graphics/x package for figure inclusion with \includegraphics, and find out suddenly the page size of the output has changed. It's even more confusing for the user -- like me -- to call fontspec so as to load fonts installed at the OS level, and find out the page size of the output has also changed.


- In any case, I'm not sure this is a good thing to assume that when the user says nothing (ie \documentclass{article} instead of \documentclass[a4paper]{article}), then assume that they want the LaTeX default to be enforced by graphics/x. The user might not even know there is such a default -- I didn't.

The user is generally asked at install time to specify the paper size for all drivers/engines, and if not a suitable default is chosen -- on the Mac taken from the printer settings in the system prefs. That's all the user generally knows about. So I would have expected that, when the user specifies nothing, then LaTeX remains neutral on the matter and just lets the paper size be as specified by the engine/driver settings.


The above for all it's worth: I was reporting this because I thought this was a bug connected with the new LuateX design, hence worth considering and possibly fixing before the new TL release. But since it's not, the matter is far from pressing.

Bruno

From news3 at nililand.de  Thu May 26 18:44:50 2016
From: news3 at nililand.de (Ulrike Fischer)
Date: Thu, 26 May 2016 18:44:50 +0200
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
 <CAEW6iOgtpo_YfwsFpsepoFPkLY2X7zbXVSRJ+UTj4LQroyfP7g@mail.gmail.com>
 <CAC1phybbnAa3GXYP6fsptDnFJ=XCRyRyyJ6RqVdd1gJR7-SO=Q@mail.gmail.com>
 <A7304777-5850-4757-8114-0EFE172EB223@icloud.com>
Message-ID: <1fmuuzemun6f7$.dlg@nililand.de>

Am Thu, 26 May 2016 18:13:42 +0200 schrieb Bruno Voisin:

> So I would have expected that, when the user specifies nothing,
> then LaTeX remains neutral on the matter and just lets the paper
> size be as specified by the engine/driver settings.

LaTeX is neutral -- the class is not. If you would use a koma class
you would get A4 as default. A class has to setup a layout and it
rather difficult how it should do it without defining a default
layout. The default for article is letter, and so you should specify
a4paper if don't want it -- better for the margins anyway.


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From d.p.carlisle at gmail.com  Thu May 26 18:45:37 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Thu, 26 May 2016 17:45:37 +0100
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <A7304777-5850-4757-8114-0EFE172EB223@icloud.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
 <CAEW6iOgtpo_YfwsFpsepoFPkLY2X7zbXVSRJ+UTj4LQroyfP7g@mail.gmail.com>
 <CAC1phybbnAa3GXYP6fsptDnFJ=XCRyRyyJ6RqVdd1gJR7-SO=Q@mail.gmail.com>
 <A7304777-5850-4757-8114-0EFE172EB223@icloud.com>
Message-ID: <CAEW6iOi0ddYx8CzgeYYVwuMz2C_fpx6C+G-3oryc4x5sXL44NQ@mail.gmail.com>

On 26 May 2016 at 17:13, Bruno Voisin <bvoisin at icloud.com> wrote:

>
>
>
>
> - But what's confusing is that this is not implemented as a core LaTeX
> functionality, and instead added by an optional package whose functionality
> is not directly connected with page design.


It's not ideal but it is what it is, based on various historical facts and
decisions that it's hard to undo.
dvi has no notion of page size you just specify a text block and print it
at some offset from the top left
corner, defaulting at 1in,1in. At the time that the 2e interface was fixed
it was still uncommon for
dvi drivers to have a page size setting (and pdftex didn't exist) the
nearest would be inserting printer-model
specific codes to select the right paper tray in the printer.

the model when the <driver>.def files got done was that they should have
all the back end specific code that would be needed (it didn't quite turn
out that way)
Which is why color and graphics share def files, and why the page size gets
set in the def files for those I knew about at the time.





> It's confusing for the user to call the graphics/x package for figure
> inclusion with \includegraphics, and find out suddenly the page size of the
> output has changed.


Think of it as "corrected" not "changed" and it doesn't seem so bad.
Rendering an A4 formatted document to a letter sized pdf is (to put it
mildly) sub-optimal and as soon as latex knows it is running under pdftex
(specifically when pdftex.def gets loaded by color or graphics, or similar
code in geometry and hyperref) then it does the driver specific commands
necessary to fix the page size.

It sounds confusing but latex has done this for as long as pdftex has
existed (starting with the initial pdftex support in epsfig.sty for
latex2.09) and given how infrequently this has come up, I think in the main
it "does what people expect".

The standard document classes could (as some contributed classes do) detect
pdftex and insert a back end page size but there were a lot more relevant
drivers back then and the standard classes avoided any driver specific code
as they have to offer the standard baseline portability layer. As article
doesn't have a dvips option it can't distinguish dvips from dvisvg or emtex
or whatever else might be used to process the dvi so can't specify a page
size in general.



> It's even more confusing for the user -- like me -- to call fontspec so as
> to load fonts installed at the OS level, and find out the page size of the
> output has also changed.
>

Yes the fact that fontspec ends up loading graphics is a long story and
unfortunate, it doesn't happen if you use the newer tuenc settings which
Will had hoped to make the default but didn't get time to switch before
tl2016, hopefully in an update soon:-)


Meanwhile, related to this as you noted dvips.def and xetex.def currently
don't use a pagesize special (probably a bug I should fix) and despite the
fact that geometry has been mentioned  a few times, it currently doesn't
work in texlive 2016 luatex unless you load luatex85.sty first, owing to
the name changes of \pdfpageheight etc. (An update has been promised for
that by the geometry package maintainer so hopefully that's just a
temporary problem).

So like many things with TeX, it's all perfectly natural and understandable
if you happen to know a 30 year history and squint at it from a strange
angle, otherwise it's less understandable. But short of re-running that
history on a slightly different path it's not clear that the current
situation is wrong or can be changed.

What can I say: It's not all my fault:-)

David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160526/008b8d13/attachment.html>

From zdenek.wagner at gmail.com  Thu May 26 18:54:35 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 26 May 2016 18:54:35 +0200
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <A7304777-5850-4757-8114-0EFE172EB223@icloud.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
 <CAEW6iOgtpo_YfwsFpsepoFPkLY2X7zbXVSRJ+UTj4LQroyfP7g@mail.gmail.com>
 <CAC1phybbnAa3GXYP6fsptDnFJ=XCRyRyyJ6RqVdd1gJR7-SO=Q@mail.gmail.com>
 <A7304777-5850-4757-8114-0EFE172EB223@icloud.com>
Message-ID: <CAC1phybN6bJuLO+H0H5iBK5qcO6Ue1hiTjhuyUc+CDq1_uOhoA@mail.gmail.com>

2016-05-26 18:13 GMT+02:00 Bruno Voisin <bvoisin at icloud.com>:

>
> > Le 26 mai 2016 ? 16:14, Zdenek Wagner <zdenek.wagner at gmail.com> a ?crit
> :
> >
> > If I understand the concept well, the default page size (A4 or letter)
> is set for the output drivers, not for LaTeX classes.
>
> Several things here:
>
>
> - Originally I thought this was all caused by the replacement of
> \pdfpageheight by \pageheight etc. in the new LuaTeX. It turns out this has
> nothing to do with it, and is caused by LaTeX.
>
>
> - In principle, I'm all for the simplicity implied by the LaTeX design,
> seen from the user's point of view: the user doesn't want to have to know
> about the difference between paper size (\LaTeX's \paperheight etc.) and
> media size (the driver's \pageheight etc.); they expect to specify
> [a4paper] and have everything taken care of such that the output is
> designed for and delivered on A4 paper.
>

This is not a defficiency of LaTeX. The problem is that the output devices
do not understand LaTeX. Since the first version of LaTeX the output
drivers changed many times. If LaTeX had to reflect every change in
printing technology, it would have to change very often and compatibility
between versions could be lost.

>
>
> - But what's confusing is that this is not implemented as a core LaTeX
> functionality, and instead added by an optional package whose functionality
> is not directly connected with page design. It's confusing for the user to
> call the graphics/x package for figure inclusion with \includegraphics, and
> find out suddenly the page size of the output has changed. It's even more
> confusing for the user -- like me -- to call fontspec so as to load fonts
> installed at the OS level, and find out the page size of the output has
> also changed.
>

That's what I dislike, package should do its own work, the graphics package
should deal with graphics, not wit paper size.

>
>
> - In any case, I'm not sure this is a good thing to assume that when the
> user says nothing (ie \documentclass{article} instead of
> \documentclass[a4paper]{article}), then assume that they want the LaTeX
> default to be enforced by graphics/x. The user might not even know there is
> such a default -- I didn't.
>
> The user is generally asked at install time to specify the paper size for
> all drivers/engines, and if not a suitable default is chosen -- on the Mac
> taken from the printer settings in the system prefs. That's all the user
> generally knows about. So I would have expected that, when the user
> specifies nothing, then LaTeX remains neutral on the matter and just lets
> the paper size be as specified by the engine/driver settings.
>

It is but each engine may have a different default.

>
>
> The above for all it's worth: I was reporting this because I thought this
> was a bug connected with the new LuateX design, hence worth considering and
> possibly fixing before the new TL release. But since it's not, the matter
> is far from pressing.
>
> Bruno




Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160526/e512b5bf/attachment-0001.html>

From bvoisin at icloud.com  Thu May 26 19:12:01 2016
From: bvoisin at icloud.com (Bruno Voisin)
Date: Thu, 26 May 2016 19:12:01 +0200
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <CAEW6iOi0ddYx8CzgeYYVwuMz2C_fpx6C+G-3oryc4x5sXL44NQ@mail.gmail.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
 <CAEW6iOgtpo_YfwsFpsepoFPkLY2X7zbXVSRJ+UTj4LQroyfP7g@mail.gmail.com>
 <CAC1phybbnAa3GXYP6fsptDnFJ=XCRyRyyJ6RqVdd1gJR7-SO=Q@mail.gmail.com>
 <A7304777-5850-4757-8114-0EFE172EB223@icloud.com>
 <CAEW6iOi0ddYx8CzgeYYVwuMz2C_fpx6C+G-3oryc4x5sXL44NQ@mail.gmail.com>
Message-ID: <D08360EB-6BC2-43A1-AC00-CDC0EA636FB0@icloud.com>

> Am Thu, 26 May 2016 18:13:42 +0200 schrieb Bruno Voisin:
> 
> > So I would have expected that, when the user specifies nothing, 
> > then LaTeX remains neutral on the matter and just lets the paper 
> > size be as specified by the engine/driver settings.
> 
> LaTeX is neutral -- the class is not. If you would use a koma class you would get A4 as default. A class has to setup a layout and it rather difficult how it should do it without defining a default layout. The default for article is letter, and so you should specify a4paper if don't want it -- better for the margins anyway.

Only answering now (I'm not subscribed to tex-live, and wasn't cc'ed your message, hence only saw it when browsing the list archive on the web page):

By neutral I meant set \paperheight etc. to their default LaTeX value of course, but don't attempt to match \(pdf)pageheight etc. to them unless the user specifies [a4paper] or [letter] explicitly : just let these be whatever the driver config files specify, irrespective of \paperheight etc.

But David in the next message explained why he thinks this is faulty design, and instead willingly ensures that \pageheight and \paperheight match. I can identify to that.

Bruno

From zdenek.wagner at gmail.com  Thu May 26 21:41:37 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 26 May 2016 21:41:37 +0200
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <D08360EB-6BC2-43A1-AC00-CDC0EA636FB0@icloud.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
 <CAEW6iOgtpo_YfwsFpsepoFPkLY2X7zbXVSRJ+UTj4LQroyfP7g@mail.gmail.com>
 <CAC1phybbnAa3GXYP6fsptDnFJ=XCRyRyyJ6RqVdd1gJR7-SO=Q@mail.gmail.com>
 <A7304777-5850-4757-8114-0EFE172EB223@icloud.com>
 <CAEW6iOi0ddYx8CzgeYYVwuMz2C_fpx6C+G-3oryc4x5sXL44NQ@mail.gmail.com>
 <D08360EB-6BC2-43A1-AC00-CDC0EA636FB0@icloud.com>
Message-ID: <CAC1phyZOsy2fn6aPiAeh_twJ6D3GB0hW5PWvBShhdXLRaEOXow@mail.gmail.com>

2016-05-26 19:12 GMT+02:00 Bruno Voisin <bvoisin at icloud.com>:

> > Am Thu, 26 May 2016 18:13:42 +0200 schrieb Bruno Voisin:
> >
> > > So I would have expected that, when the user specifies nothing,
> > > then LaTeX remains neutral on the matter and just lets the paper
> > > size be as specified by the engine/driver settings.
> >
> > LaTeX is neutral -- the class is not. If you would use a koma class you
> would get A4 as default. A class has to setup a layout and it rather
> difficult how it should do it without defining a default layout. The
> default for article is letter, and so you should specify a4paper if don't
> want it -- better for the margins anyway.
>
> Only answering now (I'm not subscribed to tex-live, and wasn't cc'ed your
> message, hence only saw it when browsing the list archive on the web page):
>
> By neutral I meant set \paperheight etc. to their default LaTeX value of
> course, but don't attempt to match \(pdf)pageheight etc. to them unless the
> user specifies [a4paper] or [letter] explicitly : just let these be
> whatever the driver config files specify, irrespective of \paperheight etc.
>

This is OMHO not a problem of LaTeX but a problem of a package doing it
without being asked to do it. This is the very reason why my zwpagelayout
defers all settings requested by the user to \AtBeginDocument so that all
unwanted settings made by other packages are neglected.

>
> But David in the next message explained why he thinks this is faulty
> design, and instead willingly ensures that \pageheight and \paperheight
> match. I can identify to that.
>
> Bruno
>



Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160526/b8586927/attachment-0001.html>

From karl at freefriends.org  Fri May 27 01:04:13 2016
From: karl at freefriends.org (Karl Berry)
Date: Thu, 26 May 2016 23:04:13 +0000
Subject: [tex-live] pdfx has been incorrectly packaged in the
 texlive-pretest
In-Reply-To: <CALBOmsa1gOHvymF9GkcohfizFWdQY6kD-VGLypy0GPTKa1eCbg@mail.gmail.com>
Message-ID: <201605262304.u4QN4D3C014778@freefriends.org>

    Do we plan to ship copies of colour
    profiles for each engine and format separately? 

I have no plan.

    Wouldn't it make more
    sense to share resources like we do for fonts?

In theory, sure.  In practice, there are few and they are relatively
small, so it doesn't seem critical.

In any case, if you want to work to Ross to arrange for a generic free
color profile package that both context and pdfx use, by all means!

Best,
Karl

From preining at logic.at  Fri May 27 03:58:10 2016
From: preining at logic.at (Norbert Preining)
Date: Fri, 27 May 2016 10:58:10 +0900
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <CAEW6iOgtpo_YfwsFpsepoFPkLY2X7zbXVSRJ+UTj4LQroyfP7g@mail.gmail.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
 <CAEW6iOgtpo_YfwsFpsepoFPkLY2X7zbXVSRJ+UTj4LQroyfP7g@mail.gmail.com>
Message-ID: <20160527015810.GX965@logic.at>

> > We allowed for setting the global paper size so that documents without a
> > paper specification got that paper size.
> >
> 
> where? latex has no local configuration file that is input.

As Zdenek said, I was talking about output paper size, driver, however
you call it. Not the internal latex setup - that needs the proper
options and that should be like this.

But we want that the paper ize information in the final pdf fits to
the paper that is used.

> No, pdflatex is working as it always has done, and lualatex is working like
> pdflatex.

Hmmm, as far as I read Bruno's comments is that the paper size is
different in pdflatex and lualatex?

Norbert

--
PREINING Norbert + TeX Live & Debian Developer + http://www.preining.info
GPG: 0x860CDC13    fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13

From d.p.carlisle at gmail.com  Fri May 27 08:44:51 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Fri, 27 May 2016 07:44:51 +0100
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <20160527015810.GX965@logic.at>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
 <CAEW6iOgtpo_YfwsFpsepoFPkLY2X7zbXVSRJ+UTj4LQroyfP7g@mail.gmail.com>
 <20160527015810.GX965@logic.at>
Message-ID: <CAEW6iOgy5ijB4rUEZXn1h8VEUdDyCcGOg04G18AqqQLFtm8rQQ@mail.gmail.com>

On 27 May 2016 at 02:58, Norbert Preining <preining at logic.at> wrote:

>
> Hmmm, as far as I read Bruno's comments is that the paper size is
> different in pdflatex and lualatex?
>
> Norbert


No, different in latex with and without the graphics package (implicitly
input in luatex via fontspec)

David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160527/5ea45738/attachment-0001.html>

From mojca.miklavec.lists at gmail.com  Fri May 27 09:04:00 2016
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 27 May 2016 09:04:00 +0200
Subject: [tex-live] pdfx has been incorrectly packaged in the
 texlive-pretest
In-Reply-To: <201605262304.u4QN4D3C014778@freefriends.org>
References: <CALBOmsa1gOHvymF9GkcohfizFWdQY6kD-VGLypy0GPTKa1eCbg@mail.gmail.com>
 <201605262304.u4QN4D3C014778@freefriends.org>
Message-ID: <CALBOmsZWHQmDj_zVkqC1t4YdA6nUi0ykM_RR7s6gX6nqb9AONA@mail.gmail.com>

On 27 May 2016 at 01:04, Karl Berry wrote:
>
>     Wouldn't it make more
>     sense to share resources like we do for fonts?
>
> In theory, sure.  In practice, there are few and they are relatively
> small, so it doesn't seem critical.
>
> In any case, if you want to work to Ross to arrange for a generic free
> color profile package that both context and pdfx use, by all means!

>From what I understand both ConTeXt and pdfx packages fully support
inclusion of any given ICC profile. It's just that some profiles are
current stored under TEXMF/tex/context and some are stored under
TEXMF/tex/latex/pdfx, meaning that the same ICC files cannot be used
in the other engine.

Hans initially suggested TEXMF/color, but this was rejected. If adding
another top level directory is completely undesirable, the only
solution for sharing resources I see is using something like
    TEXMF/tex/generic/color/context/ (for files from context)
    TEXMF/tex/generic/color/pdfx/ (for files from pdfx)
and the files could then be used by either engine.

Mojca

From zdenek.wagner at gmail.com  Fri May 27 09:55:40 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 27 May 2016 09:55:40 +0200
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <CAEW6iOgy5ijB4rUEZXn1h8VEUdDyCcGOg04G18AqqQLFtm8rQQ@mail.gmail.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
 <CAEW6iOgtpo_YfwsFpsepoFPkLY2X7zbXVSRJ+UTj4LQroyfP7g@mail.gmail.com>
 <20160527015810.GX965@logic.at>
 <CAEW6iOgy5ijB4rUEZXn1h8VEUdDyCcGOg04G18AqqQLFtm8rQQ@mail.gmail.com>
Message-ID: <CAC1phyZnSaKxJAk5ef+WzALCC5sHOmJt3=6Ld9-wPyg6Mvor6A@mail.gmail.com>

2016-05-27 8:44 GMT+02:00 David Carlisle <d.p.carlisle at gmail.com>:

>
>
> On 27 May 2016 at 02:58, Norbert Preining <preining at logic.at> wrote:
>
>>
>> Hmmm, as far as I read Bruno's comments is that the paper size is
>> different in pdflatex and lualatex?
>>
>> Norbert
>
>
> No, different in latex with and without the graphics package (implicitly
> input in luatex via fontspec)
>

The standard LaTeX classes just set \paperheight and \papegwidth, nothing
else. The graphics package propagates it to the media setting in a way
required by the output driver.

>
> David
>
>

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160527/1eb009d6/attachment.html>

From bvoisin at icloud.com  Fri May 27 12:33:43 2016
From: bvoisin at icloud.com (Bruno Voisin)
Date: Fri, 27 May 2016 12:33:43 +0200
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <20160527015810.GX965@logic.at>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
 <CAEW6iOgtpo_YfwsFpsepoFPkLY2X7zbXVSRJ+UTj4LQroyfP7g@mail.gmail.com>
 <20160527015810.GX965@logic.at>
Message-ID: <A54AEA9A-41FA-4236-9D6E-BB5D681FF4D6@icloud.com>

> Le 27 mai 2016 ? 03:58, Norbert Preining <preining at logic.at> a ?crit :
> 
> Hmmm, as far as I read Bruno's comments is that the paper size is
> different in pdflatex and lualatex?

LaTeX defines \paperheight and \paperwidth, which are then used to calculate the text height and width on each page, and the margins. As far as I remember this was introduced with LaTeX 2e in 1994. Before that, LaTeX 2.09 was hardcoded for US Letter paper, and it was up to the user (or to styles like a4wide.sty) to adjust the page design if need be for A4 paper.

This is something specific to LaTeX. The user specifies her/his preference with class options like [a4paper] or [letterpaper]. If unspecified, [letterpaper] is assumed.

Settings for the page of PDF output say (to simplify) are something which came later, in a totally independent way. At the time LaTeX 2e was introduced, everything connected with PostScript was still considered experimental, not widely available to most users and different for each DVI driver. Hence, even within LateX, the delegation of the PostScript-specific code to separate packages like graphics, color and pict2e.

The page size specification is done by the driver via \pdfpageheight and \pdfpagewidth for pdfTeX and XeTeX, \pageheight and \pagewidth for (new-style) LuaTeX, and \special{papersize=width,height} for dvips. All this is totally independent from LaTeX, which knows nothing about the actual page size the output will be delivered onto. And conversely the driver knows nothing about the paper size used by LaTeX to format the page content.

That is, until graphics.sty or graphicx.sty come into play. I hadn't realized it until David explained it yesterday, but the graphics package uses the LaTeX paper size to modify the driver output page size to match it. This is done, again based on David's messages, in the driver files for the graphics package:

dvips:  /usr/local/texlive/2015/texmf-dist/tex/latex/graphics/dvips.def
pdftex: /usr/local/texlive/2015/texmf-dist/tex/latex/pdftex-def/pdftex.def
xetex:  /usr/local/texlive/2015/texmf-dist/tex/xelatex/xetex-def/xetex.def
luatex: /usr/local/texlive/2015/texmf-dist/tex/lualatex/luatex-def/luatex.def

Except that pdftex.def and luatex.def actually do this, but not dvips.def and xetex.def. This is clearly an inconsistency. David wrote yesterday he thinks this a bug, and might plan to fix it.

(By the way, regarding xetex.def, I don't remember exactly its relation to dvipdfmx.def. Any change to one should probably be propagated to the other. Development for both now takes place at <http://puszcza.gnu.org.ua/projects/latexfmxdef>.)

Hopefully, I imagine that when LaTeX 3 is released (whenever that will be) such inconsistencies will be erased by moving the functionality of such established packages as graphics to the LaTeX core.

Bruno

(*) Regarding XeTeX, I don't remember which 



From andreas_tex at freenet.de  Fri May 27 12:59:50 2016
From: andreas_tex at freenet.de (Andreas Scherer)
Date: Fri, 27 May 2016 12:59:50 +0200
Subject: [tex-live] TL platforms vs. dpkg-architecture
Message-ID: <6376589.sPHuAaI7rA@asuspro52h>

Greetings,

I am in the process of upgrading my physical desktop with a new computer and 
experience some discrepancies between TL's 'platform list' and the respective 
analysis of the 'dpkg-architecture' programme.

Machine A is running Linux Mint 17.2 (based on Ubuntu 14.04) and is found to 
have these values from 'dpkg-architecture':

    arch = i386
    build_arch = i386
    os = linux
    host_cpu = i686
    host_os = linux

The installed TL2015 runs out of 'bin/i386-linux'.

Machine B is running Kubuntu 16.04 and has these values:

    arch = amd64
    build_arch = amd64
    os = linux
    host_cpu = x86_64
    host_os = linux

and its TL2015 uses 'bin/x86_64-linux'.

My problem is to find common variables that work on both machines. (See 
https://github.com/ascherer/debbuild/ for details.) I started with using 
'arch' on machine A ('i386' + 'linux' = 'i386-linux'), but this doesn't suite 
machine B ('amd64' + 'linux' /= 'x86_64-linux'). So now I switched to using 
'host_cpu' on machine B ('x86_64' + 'linux' = 'x86_64-linux'), but now machine 
A hickups ('i686' + 'linux' /= 'i386-linux').

Why are some platforms listed with 'amd64' (e.g., bsd), while others are 
listed with 'x86_64' (e.g., linux)?

For now I stick with 'host_cpu' and set a softlink from 'bin/i386-linux' to 
'i686-linux' on machine A.

Andreas

From zdenek.wagner at gmail.com  Fri May 27 13:13:03 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 27 May 2016 13:13:03 +0200
Subject: [tex-live] TL platforms vs. dpkg-architecture
In-Reply-To: <6376589.sPHuAaI7rA@asuspro52h>
References: <6376589.sPHuAaI7rA@asuspro52h>
Message-ID: <CAC1phyaOccf5wCnQ8B-pgkBP+Rsee-jUac4RsOwuSPV04hLFNQ@mail.gmail.com>

Both i386 and i686 refer to 32bit architecture, amd64 refers to 64bit
architecture. 64bit binaries cannot work on a 32bit architecture. 32bit
binaries in principle work on 64bit architecture but it may be necessary to
install some 32bit libraries that are not installed as default. There
should not be a remarkable difference between amd64 and x86_64 (Intel). My
colleagues use molecular dynamics, so their software must be well optimized
to run fast. They have special optimization switched on, so they have a
separate binary optimized for amd64 and a separate binary optimized for
x86_64. I think this is not the case of TeX.

Remember that if you install a package by the packaging manager f your
distro, it usually install only a package for your platform, If you need a
32bit package for a 64bit platform, you have to specify it explicitely.


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2016-05-27 12:59 GMT+02:00 Andreas Scherer <andreas_tex at freenet.de>:

> Greetings,
>
> I am in the process of upgrading my physical desktop with a new computer
> and
> experience some discrepancies between TL's 'platform list' and the
> respective
> analysis of the 'dpkg-architecture' programme.
>
> Machine A is running Linux Mint 17.2 (based on Ubuntu 14.04) and is found
> to
> have these values from 'dpkg-architecture':
>
>     arch = i386
>     build_arch = i386
>     os = linux
>     host_cpu = i686
>     host_os = linux
>
> The installed TL2015 runs out of 'bin/i386-linux'.
>
> Machine B is running Kubuntu 16.04 and has these values:
>
>     arch = amd64
>     build_arch = amd64
>     os = linux
>     host_cpu = x86_64
>     host_os = linux
>
> and its TL2015 uses 'bin/x86_64-linux'.
>
> My problem is to find common variables that work on both machines. (See
> https://github.com/ascherer/debbuild/ for details.) I started with using
> 'arch' on machine A ('i386' + 'linux' = 'i386-linux'), but this doesn't
> suite
> machine B ('amd64' + 'linux' /= 'x86_64-linux'). So now I switched to using
> 'host_cpu' on machine B ('x86_64' + 'linux' = 'x86_64-linux'), but now
> machine
> A hickups ('i686' + 'linux' /= 'i386-linux').
>
> Why are some platforms listed with 'amd64' (e.g., bsd), while others are
> listed with 'x86_64' (e.g., linux)?
>
> For now I stick with 'host_cpu' and set a softlink from 'bin/i386-linux' to
> 'i686-linux' on machine A.
>
> Andreas
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160527/779c7576/attachment-0001.html>

From preining at logic.at  Fri May 27 13:47:08 2016
From: preining at logic.at (Norbert Preining)
Date: Fri, 27 May 2016 20:47:08 +0900
Subject: [tex-live] TL platforms vs. dpkg-architecture
In-Reply-To: <6376589.sPHuAaI7rA@asuspro52h>
References: <6376589.sPHuAaI7rA@asuspro52h>
Message-ID: <20160527114708.GE965@logic.at>

Hi Andreas,

> experience some discrepancies between TL's 'platform list' and the respective 
> analysis of the 'dpkg-architecture' programme.

Indeed, there is no relation, or not that I know off. Our (TL) platform
is more or less the output config.guess that gets massaged.

For details see
	TLUtils::platform*
in particular
	TLUtils::platform_name
that does the massaging from config.gues to TL:

Example code there:
  # armv6l-unknown-linux-gnueabihf -> armhf-linux (RPi)
  # armv7l-unknown-linux-gnueabi   -> armel-linux (Android)
  if ($CPU =~ /^arm/) {
    $CPU = $guessed_platform =~ /hf$/ ? "armhf" : "armel";
  }

> My problem is to find common variables that work on both machines. (See 
> https://github.com/ascherer/debbuild/ for details.) I started with using 

What do you need that for? What is the aim for it? Debian anyway
use self-compiled, so the names as used by TL are not very important.

Do you want to use one installation with various archs, and
geenrate the correct link automatically by querying dpkg?

You could probably use the perl code for that:
	perl -I /path/to/tl/2016/tlpkg/ -e '$::installerdir = "/path/to/tl/2016"; use TeXLive::TLUtils; print TeXLive::TLUtils::platform_name(TeXLive::TLUtils::platform()), "\n"; '

which gives in my case
	x86_64-linux

> Why are some platforms listed with 'amd64' (e.g., bsd), while others are
> listed with 'x86_64' (e.g., linux)?

I guess because config.guess is doing that.

Hope that helps

Norbert

--
PREINING Norbert + TeX Live & Debian Developer + http://www.preining.info
GPG: 0x860CDC13    fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13

From preining at logic.at  Fri May 27 13:48:22 2016
From: preining at logic.at (Norbert Preining)
Date: Fri, 27 May 2016 20:48:22 +0900
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <CAEW6iOgy5ijB4rUEZXn1h8VEUdDyCcGOg04G18AqqQLFtm8rQQ@mail.gmail.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
 <CAEW6iOgtpo_YfwsFpsepoFPkLY2X7zbXVSRJ+UTj4LQroyfP7g@mail.gmail.com>
 <20160527015810.GX965@logic.at>
 <CAEW6iOgy5ijB4rUEZXn1h8VEUdDyCcGOg04G18AqqQLFtm8rQQ@mail.gmail.com>
Message-ID: <20160527114822.GF965@logic.at>

> No, different in latex with and without the graphics package (implicitly
> input in luatex via fontspec)

Ahh, sorry, misread that (thought about the endless pdftexconfig.dat/def/tex
debate and freaked out ;-)))

Norbert

--
PREINING Norbert + TeX Live & Debian Developer + http://www.preining.info
GPG: 0x860CDC13    fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13

From kakuto at fuk.kindai.ac.jp  Fri May 27 14:00:57 2016
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Fri, 27 May 2016 21:00:57 +0900
Subject: [tex-live] Fontspec overriding default paper size with LuaTeX
In-Reply-To: <A54AEA9A-41FA-4236-9D6E-BB5D681FF4D6@icloud.com>
References: <1380BF15-B8AF-4091-A4C8-F6A2214D84E3@icloud.com>
 <04815D660AAE420EACBFC6DF64000962@CJ3001517A>
 <349AB11F-658D-469B-B3E9-A5F366D4C2DD@icloud.com>
 <CAEW6iOhMvoGgYjKFcez3bxEUp+CdRAb=n-fNoRcf3VKKbC2GFQ@mail.gmail.com>
 <16093142-FF72-4648-B2DC-0309EC97A52A@logic.at>
 <CAEW6iOgtpo_YfwsFpsepoFPkLY2X7zbXVSRJ+UTj4LQroyfP7g@mail.gmail.com>
 <20160527015810.GX965@logic.at>
 <A54AEA9A-41FA-4236-9D6E-BB5D681FF4D6@icloud.com>
Message-ID: <1665F400ADA24ADEA566A70283F4C6ED@CJ3001517A>

> Except that pdftex.def and luatex.def actually do this, but not dvips.def and xetex.def.
> This is clearly an inconsistency.
> David wrote yesterday he thinks this a bug, and might plan to fix it.

In the case of drivers dvips and (x)dvipdfmx,
we usually write in a TeX source:
\special{papersize=width,height}

Best,
Akira


From andreas_tex at freenet.de  Fri May 27 14:58:54 2016
From: andreas_tex at freenet.de (Andreas Scherer)
Date: Fri, 27 May 2016 14:58:54 +0200
Subject: [tex-live] TL platforms vs. dpkg-architecture
In-Reply-To: <20160527114708.GE965@logic.at>
References: <6376589.sPHuAaI7rA@asuspro52h> <20160527114708.GE965@logic.at>
Message-ID: <3691864.mMf1fZMvdi@asuspro52h>

Am Freitag, 27. Mai 2016, 20:47:08 schrieb Norbert Preining:
> > My problem is to find common variables that work on both machines. (See
> > https://github.com/ascherer/debbuild/ for details.) I started with using
> 
> What do you need that for? What is the aim for it? Debian anyway
> use self-compiled, so the names as used by TL are not very important.

Hi Norbert,

my expos? was a tad brief, so let me amend: The TeXlive installations on both 
my computers work perfectly by setting $PATH appropriately in ~/.bashrc. (And 
I do _not_ try to use a single set of TL binaries on both.)

The issue at hand is the macro setting for %__texlive_bin in 
https://github.com/ascherer/debbuild/blob/master/macros/macros.texlive#L10
which I try to make use variables from 
https://github.com/ascherer/debbuild/blob/master/macros/macros.in
that are set by 'dpkg-architecture' in 
https://github.com/ascherer/debbuild/blob/master/scripts/post.sh
when 'debbuild' is installed on a particular machine.

This 'debbuild' script is used to create installation packages in .deb format 
from descriptions in rpm's .spec file format. The problem occurs in one of my 
.spec files, which uses %__latex and thus %__texlive_bin. The latter can not be 
defined to work on both 'linux' systems with different 'arch' and 'host_cpu' 
settings, because neither can be synched with TL's idea of 'platform' (or 
'arch') as described earlier.

Thanks for explaining the 'config.guess' approach used by TL. I think I can 
cope with my partical situation (I'll dispose of machine A RSN anyway) and 
there were no complains from 'debbuild' users to date.

Cheers, Andreas


From borisv at lk.net  Fri May 27 18:31:32 2016
From: borisv at lk.net (Boris Veytsman)
Date: Fri, 27 May 2016 12:31:32 -0400
Subject: [tex-live] pdfx has been incorrectly packaged in the
 texlive-pretest
In-Reply-To: <CALBOmsZWHQmDj_zVkqC1t4YdA6nUi0ykM_RR7s6gX6nqb9AONA@mail.gmail.com>	(message
 from Mojca Miklavec on Fri, 27 May 2016 09:04:00 +0200)
References: <CALBOmsa1gOHvymF9GkcohfizFWdQY6kD-VGLypy0GPTKa1eCbg@mail.gmail.com>
 <201605262304.u4QN4D3C014778@freefriends.org>
 <CALBOmsZWHQmDj_zVkqC1t4YdA6nUi0ykM_RR7s6gX6nqb9AONA@mail.gmail.com>
Message-ID: <201605271631.u4RGVWCm030655@bilbo.localnet>

MM> Date: Fri, 27 May 2016 09:04:00 +0200
MM> From: Mojca Miklavec <mojca.miklavec.lists at gmail.com>


MM> Hans initially suggested TEXMF/color, but this was rejected. If adding
MM> another top level directory is completely undesirable, the only
MM> solution for sharing resources I see is using something like
MM>     TEXMF/tex/generic/color/context/ (for files from context)
MM>     TEXMF/tex/generic/color/pdfx/ (for files from pdfx)
MM> and the files could then be used by either engine.

I would think generic is a very good fit for the purpose.

-- 
Good luck

-Boris

Smoking is one of the leading causes of statistics.
		-- Fletcher Knebel

From karl at freefriends.org  Sat May 28 01:01:11 2016
From: karl at freefriends.org (Karl Berry)
Date: Fri, 27 May 2016 23:01:11 +0000
Subject: [tex-live] TL platforms vs. dpkg-architecture
In-Reply-To: <6376589.sPHuAaI7rA@asuspro52h>
Message-ID: <201605272301.u4RN1Bfp002247@freefriends.org>

    Why are some platforms listed with 'amd64' (e.g., bsd), while others are 
    listed with 'x86_64' (e.g., linux)?

Just because we follow the prevailing naming convention of the os, and
(unfortunately) different os's have chosen different names for the
hardware.

config.guess always returns x86_64, but (as I recall) years ago when we
first started having the 64-bit bsd builds, the builders and/or users
wished that the name would be the one they were familiar with.

Regardless of name, what's done is just normal 64-bit builds on the
given system.  There's no actual distinction being made between 64-bit
AMD and Intel, just as Zdenek supposed.  -k

From reinhard.kotucha at web.de  Sat May 28 01:04:59 2016
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 28 May 2016 01:04:59 +0200
Subject: [tex-live] pdfx has been incorrectly packaged in the
 texlive-pretest
In-Reply-To: <201605271631.u4RGVWCm030655@bilbo.localnet>
References: <CALBOmsa1gOHvymF9GkcohfizFWdQY6kD-VGLypy0GPTKa1eCbg@mail.gmail.com>
 <201605262304.u4QN4D3C014778@freefriends.org>
 <CALBOmsZWHQmDj_zVkqC1t4YdA6nUi0ykM_RR7s6gX6nqb9AONA@mail.gmail.com>
 <201605271631.u4RGVWCm030655@bilbo.localnet>
Message-ID: <22344.53915.724592.904099@zaphod.ms25.net>

On 2016-05-27 at 12:31:32 -0400, Boris Veytsman wrote:

 > MM> Date: Fri, 27 May 2016 09:04:00 +0200
 > MM> From: Mojca Miklavec <mojca.miklavec.lists at gmail.com>
 > 
 > 
 > MM> Hans initially suggested TEXMF/color, but this was rejected. If adding
 > MM> another top level directory is completely undesirable, the only
 > MM> solution for sharing resources I see is using something like
 > MM>     TEXMF/tex/generic/color/context/ (for files from context)
 > MM>     TEXMF/tex/generic/color/pdfx/ (for files from pdfx)
 > MM> and the files could then be used by either engine.
 > 
 > I would think generic is a very good fit for the purpose.

Definitely!  But I don't know whether it's better to name the
directory "icc" or "icc-profiles" instead of "color".  Are there
any other color related things which are not ICC profiles?

Maybe someone uploads a package to CTAN which contains other profiles
provided by http://color.org sometime.  Then it would make sense to
put them into a directory named "color" (we don't have dots in
directory names and thus "color.org" is probably deprecated) and I
think that

  generic/icc/color

sounds better than

  generic/color/color

and is more comprehensible.

Anyway, I like Mojca's idea to share ICC profiles among engines/formats.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From d.p.carlisle at gmail.com  Sat May 28 12:58:41 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Sat, 28 May 2016 11:58:41 +0100
Subject: [tex-live] paper size special
Message-ID: <CAEW6iOizYwRfP4BNgN-cHKJ23-SrrO88LMWmyfXPuvVmXw=UsA@mail.gmail.com>

The recent discussion of page sizes caused me to look again at the
papersize special and whether latex ought to be adding it in more places.

The special was originally implemented in dvips and the dvips manual says
it hopes that other drivers support it. It seems like that has happened
except that all other drivers support it in an incompatible way..

Consider this plain tex document

\ifx\pdfvariable\undefined\else
\let\pdfoutput\outputmode
\let\pdfpagewidth\pagewidth
\let\pdfpageheight\pageheight
\fi

\ifx\XeTeXversion\undefined\else
\chardef\pdfoutput=0
\fi

\ifnum\pdfoutput=0
  \special{papersize=200bp,200bp}
  \special{papersize=400bp,100bp}
\else
  \pdfpagewidth=200bp  \pdfpageheight=200bp
  \pdfpagewidth=400bp  \pdfpageheight=100bp
\fi

hello

\bye





dvips reports a page size of 200x200 (first special wins)

etex pagesize;dvips pagesize;ps2pdf pagesize.ps; pdfinfo pagesize.pdf| grep
'Page size'
Page size:      200 x 200 pts


However all these variants using dvipdfm(x) or xdvi drivers report a page
size of  400 x 100 (last special on first page wins)



etex pagesize;dvipdfm pagesize; pagesize.ps; pdfinfo pagesize.pdf| grep
'Page size'

etex pagesize;dvipdfmx pagesize; pagesize.ps; pdfinfo pagesize.pdf| grep
'Page size'

etex pagesize;xdvipdfmx pagesize; pagesize.ps; pdfinfo pagesize.pdf| grep
'Page size'


xetex pagesize; pdfinfo pagesize.pdf| grep 'Page size'


etex pagesize; xdvi pagesize&

That of course matches the use of \pdfpagewidth in pdftex where the
register is reset until used as the first page is shipped out, these also
report 400x100


pdftex pagesize; pdfinfo pagesize.pdf| grep 'Page size'

luatex pagesize; pdfinfo pagesize.pdf| grep 'Page size'


the only combination I could find other than dvips not to report 400x100
was dvisvgm but I didn't understand its size at all:

etex pagesize; dvisvgm pagesize
pre-processing DVI file (format 2)
processing page 1
  page size: 217.359pt x 664.121pt (76.3929mm x 233.412mm)

???


in latex at least the specials can be inserted in reverse order using

  \AtBeginDVI{\special{papersize=200bp,200bp}}
  \AtBeginDVI{\\special{papersize=400bp,100bp}}

(the AtBeginDVI hook was added for more or less exactly that)
but all packages would have to agree to use the same hook, and
it would still mean that the tex code and resulting dvi file had
to target either dvips or xdvi/dvipdfm the same dvi couldn't be used for
both.


So... I was wondering if dvi drivers that support special{papersize= could
agree on how to treat multiple instances?

Changing (say) dvips would of course affect the behaviour of any document
that has this set twice (eg has hyperref and geometry both loaded) so it's
not necessarily a good idea, but I'm not sure the current situation is that
easy to maintain either....

Something to think about after TL2016 out....

David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160528/7dd93fc0/attachment.html>

From karl at freefriends.org  Sun May 29 00:15:41 2016
From: karl at freefriends.org (Karl Berry)
Date: Sat, 28 May 2016 22:15:41 +0000
Subject: [tex-live] paper size special
In-Reply-To: <CAEW6iOizYwRfP4BNgN-cHKJ23-SrrO88LMWmyfXPuvVmXw=UsA@mail.gmail.com>
Message-ID: <201605282215.u4SMFfAn020366@freefriends.org>

    except that all other drivers support it in an incompatible way..

How unsurprising.

    was dvisvgm but I didn't understand its size at all:
    etex pagesize; dvisvgm pagesize
    pre-processing DVI file (format 2)
    processing page 1
      page size: 217.359pt x 664.121pt (76.3929mm x 233.412mm)

I believe dvisvgm trying to create an includable graphic rather than a
full page, thus it's more or less the bounding box of the output?  Full
pages are not what SVG files are for, after all.  The papersize special
is not mentioned on the dvisvgm man page.  Could ask MartinG and/or look
at the source if it matters.

    So... I was wondering if dvi drivers that support special{papersize=
    could agree on how to treat multiple instances?

If the only thing we have to change is dvips, per your experiments, that
is feasible, in principle.  It certainly seems more feasible than
changing "everything else".  And also the behavior (last special on
first page wins) seems better -- matches pdftex better.

    Changing (say) dvips would of course affect the behaviour of any
    document that has this set twice (eg has hyperref and geometry both
    loaded) so it's not necessarily a good idea, 

Let's suppose, hypothetically, that we change dvips to match the others
(with an option so people can get the old behavior if they want it, etc.).

Would this imply you would then make further changes in latex?  If so, what?

And, are any changes in this area desirable at all in latex2e?  I am
skeptical.  Whatever the deficiencies and suboptimalities of the current
situation (no argument that there are plenty), people have necessarily
figured out how to get the page sizes they want with the software they
want.  If we make any changes, I highly suspect existing workflows will
break, and not in any obvious way.

Or am I being too negative?  -k

From d.p.carlisle at gmail.com  Sun May 29 00:41:44 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Sat, 28 May 2016 23:41:44 +0100
Subject: [tex-live] paper size special
In-Reply-To: <201605282215.u4SMFfAn020366@freefriends.org>
References: <CAEW6iOizYwRfP4BNgN-cHKJ23-SrrO88LMWmyfXPuvVmXw=UsA@mail.gmail.com>
 <201605282215.u4SMFfAn020366@freefriends.org>
Message-ID: <CAEW6iOhkURC8CN44pdcHD7T_eLqKTAX8LQ6b3uXGZ_G+wE_2Hg@mail.gmail.com>

On 28 May 2016 at 23:15, Karl Berry <karl at freefriends.org> wrote:

>     except that all other drivers support it in an incompatible way..
>
> How unsurprising.
>

:-)


>
>     was dvisvgm but I didn't understand its size at all:
>     etex pagesize; dvisvgm pagesize
>     pre-processing DVI file (format 2)
>     processing page 1
>       page size: 217.359pt x 664.121pt (76.3929mm x 233.412mm)
>
> I believe dvisvgm trying to create an includable graphic rather than a
> full page, thus it's more or less the bounding box of the output?


I discounted that (due to the height), but of course I'd forgotten the page
number, so yes ignore
dvisvgm, it just doesn't use the special at all, which is OK, my error.



> Full
> pages are not what SVG files are for, after all.  The papersize special
> is not mentioned on the dvisvgm man page.  Could ask MartinG and/or look
> at the source if it matters.
>

No as I say that was my error.


>
>     So... I was wondering if dvi drivers that support special{papersize=
>     could agree on how to treat multiple instances?
>
> If the only thing we have to change is dvips, per your experiments, that
> is feasible, in principle.  It certainly seems more feasible than
> changing "everything else".  And also the behavior (last special on
> first page wins) seems better -- matches pdftex better.
>


yes but (despite raising the issue) I'm not at all sure changing dvips
after all this time
would have any good consequences.



>
>     Changing (say) dvips would of course affect the behaviour of any
>     document that has this set twice (eg has hyperref and geometry both
>     loaded) so it's not necessarily a good idea,
>
> Let's suppose, hypothetically, that we change dvips to match the others
> (with an option so people can get the old behavior if they want it, etc.).
>
> Would this imply you would then make further changes in latex?  If so,
> what?
>

I'm not sure:-) Partly I sent the message just to stir the pot and see if
anyone had
a brilliant idea.


>
> And, are any changes in this area desirable at all in latex2e?  I am
> skeptical.  Whatever the deficiencies and suboptimalities of the current
> situation (no argument that there are plenty), people have necessarily
> figured out how to get the page sizes they want with the software they
> want.  If we make any changes, I highly suspect existing workflows will
> break, and not in any obvious way.
>

yes

>
> Or am I being too negative?  -k
>

no

I suspect that changing the drivers isn't going to work, even if you added
an option
to change the behaviour back it will just lead to confusion.


What I think I should probably try to do in latex is set up a system that
allows cooperating
packages to not add the special more than once, then the issue doesn't
arise.

there are various ways that could be done for example dvips/dvipdfm options
could
instead of adding the special directly as now which implies some rather odd
package ordering
behaviour, they could just set some defined \pagewidth and \pageheight
lengths (as for pdftex/luatex)
and then latex could insert a single special when shipping out the first
page based on those values at that time.

or something...



David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160528/f8acbb47/attachment-0001.html>

From zdenek.wagner at gmail.com  Sun May 29 00:47:55 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sun, 29 May 2016 00:47:55 +0200
Subject: [tex-live] paper size special
In-Reply-To: <201605282215.u4SMFfAn020366@freefriends.org>
References: <CAEW6iOizYwRfP4BNgN-cHKJ23-SrrO88LMWmyfXPuvVmXw=UsA@mail.gmail.com>
 <201605282215.u4SMFfAn020366@freefriends.org>
Message-ID: <CAC1phybF=eCs-1fZ1okgZtSMH8vEq1Q2ExyL7g_1oC0RfA3ozA@mail.gmail.com>

2016-05-29 0:15 GMT+02:00 Karl Berry <karl at freefriends.org>:

>     except that all other drivers support it in an incompatible way..
>
> How unsurprising.
>
>     was dvisvgm but I didn't understand its size at all:
>     etex pagesize; dvisvgm pagesize
>     pre-processing DVI file (format 2)
>     processing page 1
>       page size: 217.359pt x 664.121pt (76.3929mm x 233.412mm)
>
> I believe dvisvgm trying to create an includable graphic rather than a
> full page, thus it's more or less the bounding box of the output?  Full
> pages are not what SVG files are for, after all.  The papersize special
> is not mentioned on the dvisvgm man page.  Could ask MartinG and/or look
> at the source if it matters.
>
>     So... I was wondering if dvi drivers that support special{papersize=
>     could agree on how to treat multiple instances?
>
> If the only thing we have to change is dvips, per your experiments, that
> is feasible, in principle.  It certainly seems more feasible than
> changing "everything else".  And also the behavior (last special on
> first page wins) seems better -- matches pdftex better.
>
>     Changing (say) dvips would of course affect the behaviour of any
>     document that has this set twice (eg has hyperref and geometry both
>     loaded) so it's not necessarily a good idea,
>
> Let's suppose, hypothetically, that we change dvips to match the others
> (with an option so people can get the old behavior if they want it, etc.).
>
> Would this imply you would then make further changes in latex?  If so,
> what?
>
> And, are any changes in this area desirable at all in latex2e?  I am
> skeptical.  Whatever the deficiencies and suboptimalities of the current
> situation (no argument that there are plenty), people have necessarily
> figured out how to get the page sizes they want with the software they
> want.  If we make any changes, I highly suspect existing workflows will
> break, and not in any obvious way.
>
> Or am I being too negative?  -k
>

I am skeptical too. If I prepare a document to be printed on my office
printer, I use A4. However, I prepare more frequently books and leaflets
and in such cases A4 is really rare, the crop size is usuall A5, B5, C6 or
even a nonstandard size. And the media size must include the area for a
bleed box and for the crop marks. I am afraid LaTeX itself cannot do all
this, a package for layout definition will always be needed. This is why I
developed zwpagelayout because even geometry does not do all what I need.



Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160529/1c556470/attachment.html>

From d.p.carlisle at gmail.com  Sun May 29 00:58:51 2016
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Sat, 28 May 2016 23:58:51 +0100
Subject: [tex-live] paper size special
In-Reply-To: <CAC1phybF=eCs-1fZ1okgZtSMH8vEq1Q2ExyL7g_1oC0RfA3ozA@mail.gmail.com>
References: <CAEW6iOizYwRfP4BNgN-cHKJ23-SrrO88LMWmyfXPuvVmXw=UsA@mail.gmail.com>
 <201605282215.u4SMFfAn020366@freefriends.org>
 <CAC1phybF=eCs-1fZ1okgZtSMH8vEq1Q2ExyL7g_1oC0RfA3ozA@mail.gmail.com>
Message-ID: <CAEW6iOgSgV8uzVk+NLRTDTAUH7cnUMhrUnG3Go7=RvmaLeOdyg@mail.gmail.com>

On 28 May 2016 at 23:47, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:

>
>
>>
> I am skeptical too. If I prepare a document to be printed on my office
> printer, I use A4. However, I prepare more frequently books and leaflets
> and in such cases A4 is really rare, the crop size is usuall A5, B5, C6 or
> even a nonstandard size. And the media size must include the area for a
> bleed box and for the crop marks. I am afraid LaTeX itself cannot do all
> this, a package for layout definition will always be needed. This is why I
> developed zwpagelayout because even geometry does not do all what I need.
>
>
>
yes but I'd like to make it easier for your package to work, or at least
easier to document how it works.

You do

\AtBeginDocument{\ifcaseZWdriver \or
   \pdfpagewidth\paperwidth \pdfpageheight\paperheight
\else
   \special{papersize=\the\paperwidth,\the\paperheight}\fi}


but hyperref and geometry use \AtBeginDvi  (or \AtBeginShipoutFirst) so the
special they insert will come before the one you insert, even if the
package is used later.

so that means if a document uses hyperref and zwpagelayout then the
hyperref special is first so if the dvi file is processed with dvips
hyperref determines the page size and if the same dvi file is processed
with dvipdfm then zwpagelayout determines the page size.

I would like there to be a documented way to avoid that and have the same
markup have the same effect on both drivers.


David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160528/56f016fa/attachment-0001.html>

From zdenek.wagner at gmail.com  Sun May 29 01:11:29 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sun, 29 May 2016 01:11:29 +0200
Subject: [tex-live] paper size special
In-Reply-To: <CAEW6iOgSgV8uzVk+NLRTDTAUH7cnUMhrUnG3Go7=RvmaLeOdyg@mail.gmail.com>
References: <CAEW6iOizYwRfP4BNgN-cHKJ23-SrrO88LMWmyfXPuvVmXw=UsA@mail.gmail.com>
 <201605282215.u4SMFfAn020366@freefriends.org>
 <CAC1phybF=eCs-1fZ1okgZtSMH8vEq1Q2ExyL7g_1oC0RfA3ozA@mail.gmail.com>
 <CAEW6iOgSgV8uzVk+NLRTDTAUH7cnUMhrUnG3Go7=RvmaLeOdyg@mail.gmail.com>
Message-ID: <CAC1phyYe-iJ4mzKxkW+VhDF=AsOndZLqc3zWT7p+3fFQZz6dPw@mail.gmail.com>

2016-05-29 0:58 GMT+02:00 David Carlisle <d.p.carlisle at gmail.com>:

>
>
> On 28 May 2016 at 23:47, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
>
>>
>>
>>>
>> I am skeptical too. If I prepare a document to be printed on my office
>> printer, I use A4. However, I prepare more frequently books and leaflets
>> and in such cases A4 is really rare, the crop size is usuall A5, B5, C6 or
>> even a nonstandard size. And the media size must include the area for a
>> bleed box and for the crop marks. I am afraid LaTeX itself cannot do all
>> this, a package for layout definition will always be needed. This is why I
>> developed zwpagelayout because even geometry does not do all what I need.
>>
>>
>>
> yes but I'd like to make it easier for your package to work, or at least
> easier to document how it works.
>
> You do
>
> \AtBeginDocument{\ifcaseZWdriver \or
>    \pdfpagewidth\paperwidth \pdfpageheight\paperheight
> \else
>    \special{papersize=\the\paperwidth,\the\paperheight}\fi}
>
>
> but hyperref and geometry use \AtBeginDvi  (or \AtBeginShipoutFirst) so
> the special they insert will come before the one you insert, even if the
> package is used later.
>
> so that means if a document uses hyperref and zwpagelayout then the
> hyperref special is first so if the dvi file is processed with dvips
> hyperref determines the page size and if the same dvi file is processed
> with dvipdfm then zwpagelayout determines the page size.
>
> I would like there to be a documented way to avoid that and have the same
> markup have the same effect on both drivers.
>

Yes, it will be useful.


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz



>
>
> David
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160529/eca50f3c/attachment.html>

From xuwang762 at gmail.com  Sun May 29 08:36:55 2016
From: xuwang762 at gmail.com (Xu Wang)
Date: Sun, 29 May 2016 02:36:55 -0400
Subject: [tex-live] Confirmation of three questions about pretest transition
Message-ID: <CAJhTkNjmBV6k8+cb=8=TA26TOSiD6sfMWYyCFg72o3yeAd-JLA@mail.gmail.com>

Dear list,

I would like to confirm three things:

1. On 8 June (as listed on the website), when I do a normal tex live
install, it will install TL 2016.
2. On 8 June CTAN updates will be reenabled
3. If I have a 2016 pretest, when I do tlmgr update, I will have the
same TeX installation as if I had installed TL 2016 after 8 June.

Did I have correct understanding?

Kind regards,

Xu

From zdenek.wagner at gmail.com  Sun May 29 09:30:36 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Sun, 29 May 2016 09:30:36 +0200
Subject: [tex-live] Confirmation of three questions about pretest
 transition
In-Reply-To: <CAJhTkNjmBV6k8+cb=8=TA26TOSiD6sfMWYyCFg72o3yeAd-JLA@mail.gmail.com>
References: <CAJhTkNjmBV6k8+cb=8=TA26TOSiD6sfMWYyCFg72o3yeAd-JLA@mail.gmail.com>
Message-ID: <CAC1phyapYqvo4xdSAsHvYuMXUtJMhhTFN0yC5in7Xa-2B4FymQ@mail.gmail.com>

Hi,

if you have pretest installed and the regular TL 2016 starts to be
distributed, you will no longer be able to update pretest. First you have
to change the repository location by:

tlmgr option repository http://mirror.ctan.org/systems/texlive/tlnet

Afterwards the updates will be received from TL 2016.


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2016-05-29 8:36 GMT+02:00 Xu Wang <xuwang762 at gmail.com>:

> Dear list,
>
> I would like to confirm three things:
>
> 1. On 8 June (as listed on the website), when I do a normal tex live
> install, it will install TL 2016.
> 2. On 8 June CTAN updates will be reenabled
> 3. If I have a 2016 pretest, when I do tlmgr update, I will have the
> same TeX installation as if I had installed TL 2016 after 8 June.
>
> Did I have correct understanding?
>
> Kind regards,
>
> Xu
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160529/e2e80819/attachment-0001.html>

From tex at axelkielhorn.de  Sun May 29 10:13:00 2016
From: tex at axelkielhorn.de (Axel Kielhorn)
Date: Sun, 29 May 2016 10:13:00 +0200
Subject: [tex-live] Bug in TL infra
Message-ID: <D49F489A-421C-4120-B6E8-EDBED8EDDEC7@axelkielhorn.de>

Hi,

I'm sorry for being late but I think I have discovered a bug in TLPOBJ.pm.

I just updated TL 2016 pretest via TeX Live Utility which gave me a new infra.

Updating the two remaining packages via TLU failed, thus I tried tlmgr.

To switch the repository to cstug pretest I used the option in TLU, which failed.

When I typed

tlmgr option show

in bash, I got:

Invalid name: name ! at /Volumes/Macintosh HD/usr/local/texlive/2016/tlpkg/TeXLive/TLPOBJ.pm line 173, <TMP> line 1.

On my second machine I switched the repository first because the infra update in TLU failed.
This worked without a problem.

Axel

From preining at logic.at  Sun May 29 15:32:10 2016
From: preining at logic.at (Norbert Preining)
Date: Sun, 29 May 2016 22:32:10 +0900
Subject: [tex-live] Bug in TL infra
In-Reply-To: <D49F489A-421C-4120-B6E8-EDBED8EDDEC7@axelkielhorn.de>
References: <D49F489A-421C-4120-B6E8-EDBED8EDDEC7@axelkielhorn.de>
Message-ID: <1960DE78-5017-4C7B-9DBD-3E39A1EB3146@logic.at>

Hi Axel

>Invalid name: name ! at /Volumes/Macintosh
>HD/usr/local/texlive/2016/tlpkg/TeXLive/TLPOBJ.pm line 173, <TMP> line
>1.


Can you send me the texlive.tlpdb? There seems to be something completely messed up in it.

Reading crystal balls as usual, did you have any hard-disk failure, crashes, hard reboots or similar?


Norbert

-- 
Sent from my mobile device. Please excuse my brevity.

From richardmoncriefkoch at icloud.com  Sun May 29 16:04:33 2016
From: richardmoncriefkoch at icloud.com (Richard Koch)
Date: Sun, 29 May 2016 07:04:33 -0700
Subject: [tex-live] Bug in TL infra
Message-ID: <880D41A3-CD2E-4C92-8DB6-CDF0A233383E@icloud.com>

Axel,

Which version of OS X are you using?

Dick Koch

From tex at axelkielhorn.de  Sun May 29 16:44:21 2016
From: tex at axelkielhorn.de (Axel Kielhorn)
Date: Sun, 29 May 2016 16:44:21 +0200
Subject: [tex-live] Bug in TL infra
In-Reply-To: <880D41A3-CD2E-4C92-8DB6-CDF0A233383E@icloud.com>
References: <880D41A3-CD2E-4C92-8DB6-CDF0A233383E@icloud.com>
Message-ID: <98725A7D-693A-4D2A-822D-57EADCE36D9C@axelkielhorn.de>


Am 29.05.2016 um 16:04 schrieb Richard Koch <richardmoncriefkoch at icloud.com>:

> Axel,
> 
> Which version of OS X are you using?

Sorry, forgot to mention it.
This is on 10.8.5 with TLU 1.25 beta.

Axel


From tex at axelkielhorn.de  Sun May 29 17:09:53 2016
From: tex at axelkielhorn.de (Axel Kielhorn)
Date: Sun, 29 May 2016 17:09:53 +0200
Subject: [tex-live] Bug in TL infra
In-Reply-To: <1960DE78-5017-4C7B-9DBD-3E39A1EB3146@logic.at>
References: <D49F489A-421C-4120-B6E8-EDBED8EDDEC7@axelkielhorn.de>
 <1960DE78-5017-4C7B-9DBD-3E39A1EB3146@logic.at>
Message-ID: <E180EBA6-5C86-49C3-A843-0C5F0579B2D0@axelkielhorn.de>

Hi Norbert,

>> Invalid name: name ! at /Volumes/Macintosh
>> HD/usr/local/texlive/2016/tlpkg/TeXLive/TLPOBJ.pm line 173, <TMP> line
>> 1.
> 
> 
> Can you send me the texlive.tlpdb? There seems to be something completely messed up in it.

I can send you the whole file off list (it is 2 MB zipped) but here is something I found comparing it with the older version:

<snip>
name 
category Package

name 00texlive.config
category Package
depend minrelease/2016
depend release/2016

name 00texlive.installation
category TLCore
depend opt_location:http://mirror.ctan.org/systems/texlive/tlnet
depend opt_autobackup:1
depend opt_backupdir:tlpkg/backups
depend opt_create_formats:1
depend opt_desktop_integration:1
depend opt_file_assocs:1
depend opt_post_code:1
depend opt_sys_bin:/usr/local/bin
depend opt_sys_info:/usr/local/share/info
depend opt_sys_man:/usr/local/share/man
depend opt_install_docfiles:1
depend opt_install_srcfiles:1
depend opt_w32_multi_user:1
depend setting_available_architectures:x86_64-darwin universal-darwin

</snip>

There is an empty entry that wasn't there in the version from 2016-05-21.

I can delete it, but the question is how it got there.

> Reading crystal balls as usual, did you have any hard-disk failure, crashes, hard reboots or similar?

Nothing I'm aware of.

Just ran disk utility and it says the volume is probably ok.

Axel

From tex at axelkielhorn.de  Sun May 29 17:28:30 2016
From: tex at axelkielhorn.de (Axel Kielhorn)
Date: Sun, 29 May 2016 17:28:30 +0200
Subject: [tex-live] Bug in TL infra
In-Reply-To: <6ECDBA59-5041-4CD6-BFB1-D52A0998C6C9@wideopenwest.com>
References: <880D41A3-CD2E-4C92-8DB6-CDF0A233383E@icloud.com>
 <98725A7D-693A-4D2A-822D-57EADCE36D9C@axelkielhorn.de>
 <6ECDBA59-5041-4CD6-BFB1-D52A0998C6C9@wideopenwest.com>
Message-ID: <AE8BEFA8-AC22-436C-8BC8-C39E54533C14@axelkielhorn.de>

Am 29.05.2016 um 17:04 schrieb Herbert Schulz <herbs at wideopenwest.com>:

>> On May 29, 2016, at 9:44 AM, Axel Kielhorn <tex at axelkielhorn.de> wrote:
>> 
>> 
>> Am 29.05.2016 um 16:04 schrieb Richard Koch <richardmoncriefkoch at icloud.com>:
>> 
>>> Axel,
>>> 
>>> Which version of OS X are you using?
>> 
>> Sorry, forgot to mention it.
>> This is on 10.8.5 with TLU 1.25 beta.
>> 
>> Axel
>> 
> 
> Howdy,
> 
> Could you open the Log window in TLU and copy/paste it into an email?

I included it as a file, it was rather large.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: tlu.log
Type: application/octet-stream
Size: 20382 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160529/f0db1606/attachment-0001.obj>
-------------- next part --------------



> You might also go back to the TLU 1.24 release just as a check.

Right now my tlpdb is corrupt.
I'm waiting for a reply from Norbert.

> It would also help if you let us know the steps you used to change the repository? Did you also click on the `Use as Home' button after making the change? You must do that to change the default used by tlmgr.

I used cstug pretest for TLU only since the normal CTAN mirror will be working for 2016 in a few days.
Since the update in TLU didn't work I used the "Manage Repository" dialog to change to cstug again, this time answering yes to the question about changing the command line repository.

But it seems the update with the log above corrupted the tlpdb.
There is at least a quoting error which stumbles over the space in "Macintosh HD".

Axel

From amaxwell at mac.com  Sun May 29 19:29:37 2016
From: amaxwell at mac.com (Adam R. Maxwell)
Date: Sun, 29 May 2016 10:29:37 -0700
Subject: [tex-live] Bug in TL infra
In-Reply-To: <AE8BEFA8-AC22-436C-8BC8-C39E54533C14@axelkielhorn.de>
References: <880D41A3-CD2E-4C92-8DB6-CDF0A233383E@icloud.com>
 <98725A7D-693A-4D2A-822D-57EADCE36D9C@axelkielhorn.de>
 <6ECDBA59-5041-4CD6-BFB1-D52A0998C6C9@wideopenwest.com>
 <AE8BEFA8-AC22-436C-8BC8-C39E54533C14@axelkielhorn.de>
Message-ID: <D804BC76-D05E-4FA9-8B9B-FF9FC5619A00@mac.com>



> On May 29, 2016, at 08:28, Axel Kielhorn <tex at axelkielhorn.de> wrote:
> 
> I included it as a file, it was rather large.

Looks like update-tlmgr-latest.sh failed badly. You can use the Reinstall TeX Live Manager menu item to try again if needed.

> 
>> You might also go back to the TLU 1.24 release just as a check.
> 
> Right now my tlpdb is corrupt.
> I'm waiting for a reply from Norbert.

Changes in the TLU beta are not relevant to this problem.

-- adam 




From tex at axelkielhorn.de  Sun May 29 21:05:31 2016
From: tex at axelkielhorn.de (Axel Kielhorn)
Date: Sun, 29 May 2016 21:05:31 +0200
Subject: [tex-live] Bug in TL infra
In-Reply-To: <E180EBA6-5C86-49C3-A843-0C5F0579B2D0@axelkielhorn.de>
References: <D49F489A-421C-4120-B6E8-EDBED8EDDEC7@axelkielhorn.de>
 <1960DE78-5017-4C7B-9DBD-3E39A1EB3146@logic.at>
 <E180EBA6-5C86-49C3-A843-0C5F0579B2D0@axelkielhorn.de>
Message-ID: <B045A248-CF7B-4BBA-94EC-02232CDF33BC@axelkielhorn.de>


Am 29.05.2016 um 17:09 schrieb Axel Kielhorn <tex at axelkielhorn.de>:

I removed the empty entry and updates the infra from TLU -> empty entry reappeared.
TLU said that the update succeeded.
I updated with tlmgr --self and everything was fine.
I updated with tlmgr --all and everything is fine.

Here is the TLU log:

-------------- next part --------------
A non-text attachment was scrubbed...
Name: tlu2.log
Type: application/octet-stream
Size: 12681 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160529/8349e886/attachment-0001.obj>
-------------- next part --------------


One question: Is an infra update in TLU different from tlmgr update --self?

I noted problems with TLU updates in the past that I could fix by using the Terminal.
This could be an old bug not related to pretest at all.

Axel

From xuwang762 at gmail.com  Mon May 30 00:01:04 2016
From: xuwang762 at gmail.com (Xu Wang)
Date: Sun, 29 May 2016 18:01:04 -0400
Subject: [tex-live] Confirmation of three questions about pretest
 transition
In-Reply-To: <CAC1phyapYqvo4xdSAsHvYuMXUtJMhhTFN0yC5in7Xa-2B4FymQ@mail.gmail.com>
References: <CAJhTkNjmBV6k8+cb=8=TA26TOSiD6sfMWYyCFg72o3yeAd-JLA@mail.gmail.com>
 <CAC1phyapYqvo4xdSAsHvYuMXUtJMhhTFN0yC5in7Xa-2B4FymQ@mail.gmail.com>
Message-ID: <CAJhTkNgtDs+ekRpZxih82OujSW1R52z05C=FDVa9sJQaNnQfnA@mail.gmail.com>

Ah thank you for warning! I will remember to do that. I did understand
correctly the website that on 8 June CTAN updates will resume to TL?

Kind regards,

Xu

On Sun, May 29, 2016 at 3:30 AM, Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
> Hi,
>
> if you have pretest installed and the regular TL 2016 starts to be
> distributed, you will no longer be able to update pretest. First you have to
> change the repository location by:
>
> tlmgr option repository http://mirror.ctan.org/systems/texlive/tlnet
>
> Afterwards the updates will be received from TL 2016.
>
>
> Zden?k Wagner
> http://ttsm.icpf.cas.cz/team/wagner.shtml
> http://icebearsoft.euweb.cz
>
> 2016-05-29 8:36 GMT+02:00 Xu Wang <xuwang762 at gmail.com>:
>>
>> Dear list,
>>
>> I would like to confirm three things:
>>
>> 1. On 8 June (as listed on the website), when I do a normal tex live
>> install, it will install TL 2016.
>> 2. On 8 June CTAN updates will be reenabled
>> 3. If I have a 2016 pretest, when I do tlmgr update, I will have the
>> same TeX installation as if I had installed TL 2016 after 8 June.
>>
>> Did I have correct understanding?
>>
>> Kind regards,
>>
>> Xu
>
>


From karl at freefriends.org  Mon May 30 00:24:48 2016
From: karl at freefriends.org (Karl Berry)
Date: Sun, 29 May 2016 16:24:48 -0600
Subject: [tex-live] Confirmation of three questions about pretest
 transition
In-Reply-To: <CAJhTkNgtDs+ekRpZxih82OujSW1R52z05C=FDVa9sJQaNnQfnA@mail.gmail.com> (message
 from Xu Wang on Sun, 29 May 2016 18:01:04 -0400)
Message-ID: <867fecfqof.fsf@frenzy.freefriends.org>

Don't take "June 8" too seriously.  It might be June 9, or 10, or who
knows.  It depends on the testing (that is happening now).  -k

From xuwang762 at gmail.com  Mon May 30 02:59:19 2016
From: xuwang762 at gmail.com (Xu Wang)
Date: Sun, 29 May 2016 20:59:19 -0400
Subject: [tex-live] Confirmation of three questions about pretest
 transition
In-Reply-To: <867fecfqof.fsf@frenzy.freefriends.org>
References: <CAJhTkNgtDs+ekRpZxih82OujSW1R52z05C=FDVa9sJQaNnQfnA@mail.gmail.com>
 <867fecfqof.fsf@frenzy.freefriends.org>
Message-ID: <CAJhTkNg1nHZZO6dse+VGwQrBUUNENG9TtMD5v5H6KM0uxkbDqA@mail.gmail.com>

On Sun, May 29, 2016 at 6:24 PM, Karl Berry <karl at freefriends.org> wrote:
> Don't take "June 8" too seriously.  It might be June 9, or 10, or who
> knows.  It depends on the testing (that is happening now).  -k

I see. Thank you for warning. I will keep the party hat ready for when
it happens!

Thank you for all work.

Kind regards,

Xu

From amaxwell at mac.com  Mon May 30 06:08:45 2016
From: amaxwell at mac.com (Adam R. Maxwell)
Date: Sun, 29 May 2016 21:08:45 -0700
Subject: [tex-live] Bug in TL infra
In-Reply-To: <B045A248-CF7B-4BBA-94EC-02232CDF33BC@axelkielhorn.de>
References: <D49F489A-421C-4120-B6E8-EDBED8EDDEC7@axelkielhorn.de>
 <1960DE78-5017-4C7B-9DBD-3E39A1EB3146@logic.at>
 <E180EBA6-5C86-49C3-A843-0C5F0579B2D0@axelkielhorn.de>
 <B045A248-CF7B-4BBA-94EC-02232CDF33BC@axelkielhorn.de>
Message-ID: <2712388F-5F59-467E-AD25-61B9AE55729D@mac.com>



> On May 29, 2016, at 12:05, Axel Kielhorn <tex at axelkielhorn.de> wrote:
> 
> One question: Is an infra update in TLU different from tlmgr update --self?

Yes, TLU always downloads and runs update-tlmgr-latest.sh, and does not use tlmgr update --self.

-- adam 



From komascript at gmx.info  Mon May 30 07:42:50 2016
From: komascript at gmx.info (Markus Kohm)
Date: Mon, 30 May 2016 07:42:50 +0200
Subject: [tex-live] paper size special
In-Reply-To: <CAEW6iOhkURC8CN44pdcHD7T_eLqKTAX8LQ6b3uXGZ_G+wE_2Hg@mail.gmail.com>
References: <CAEW6iOizYwRfP4BNgN-cHKJ23-SrrO88LMWmyfXPuvVmXw=UsA@mail.gmail.com>
 <201605282215.u4SMFfAn020366@freefriends.org>
 <CAEW6iOhkURC8CN44pdcHD7T_eLqKTAX8LQ6b3uXGZ_G+wE_2Hg@mail.gmail.com>
Message-ID: <1751001.dhj39kfXtI@x61s.fritz.box>

Am Samstag, 28. Mai 2016, 23:41:44 schrieb David Carlisle:
> yes but (despite raising the issue) I'm not at all sure changing dvips
> after all this time
> would have any good consequences.

dvips set up page size only once: At the start of the document. Therefore 
hdvips.def (hyperref) uses, something like:

\AtBeginShipoutFirst{%
?
  \special{papersize=\the\paperwidth,\the\paperheight}
}

geometry and typearea:

\AtBeginDocument{%
  ?
  \AtBeginDvi{\special{papersize=\the\paperwidth,\the\paperheight}}%
  ?
}

typearea has also some crude code (with side effects for the logical page 
number) to change paper size inside the document, something dvips itself does 
not support.

With the code above it should not matter whether dvips uses the first or the 
last value of papersize. So changing of dvips should not break a lot of 
documents. If dvips would also allow to change the page size inside the 
document, the crude code in typearea could be removed by more clean code.

Markus
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 181 bytes
Desc: This is a digitally signed message part.
URL: <http://tug.org/pipermail/tex-live/attachments/20160530/8b78ea40/attachment.bin>

From bernhard.kleine at gmx.net  Mon May 30 08:50:11 2016
From: bernhard.kleine at gmx.net (Bernhard Kleine)
Date: Mon, 30 May 2016 08:50:11 +0200
Subject: [tex-live] Tlmgr closing takes fairly long
Message-ID: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>

On my win7 box, closing the tlmgr (pretest and all before) takes at
least 30 sec, in my mind very long. Is there a reason behind?

Regards

Bernhard Kleine


-- 
--
spitzhalde9
79853 lenzkirch
bernhard.kleine at gmx.net
www.b-kleine.com, www.urseetal.net
-
thunderbird mit enigmail
GPG schl?ssel: D5257409
fingerprint:
08 B7 F8 70 22 7A FC C1 15 49 CA A6 C7 6F A0 2E D5 25 74 09

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160530/ffe7fe12/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 819 bytes
Desc: OpenPGP digital signature
URL: <http://tug.org/pipermail/tex-live/attachments/20160530/ffe7fe12/attachment-0001.bin>

From usenet at siart.de  Mon May 30 13:55:49 2016
From: usenet at siart.de (Uwe Siart)
Date: Mon, 30 May 2016 13:55:49 +0200
Subject: [tex-live] Tlmgr closing takes fairly long
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
Message-ID: <84eg8j3gl6.fsf@siart.de>

Bernhard Kleine <bernhard.kleine at gmx.net> writes:

> On my win7 box, closing the tlmgr (pretest and all before) takes at
> least 30 sec, in my mind very long. Is there a reason behind?

I've been observing this ever since. Just didn't care. As we know from
Java, platform independent programming environments (as is Tcl/Tk) tend
to be slow. Perhaps this is simply the price to pay for platform
independence.

-- 
Uwe


From martin at oneiros.de  Mon May 30 22:07:49 2016
From: martin at oneiros.de (=?UTF-8?Q?Martin_Schr=C3=B6der?=)
Date: Mon, 30 May 2016 22:07:49 +0200
Subject: [tex-live] Tlmgr closing takes fairly long
In-Reply-To: <84eg8j3gl6.fsf@siart.de>
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
 <84eg8j3gl6.fsf@siart.de>
Message-ID: <CAP7DCDds3Og4H6fbxRKCxw4vCPZYHex7vCez4RH_A1-gDL3RUQ@mail.gmail.com>

2016-05-30 13:55 GMT+02:00 Uwe Siart <usenet at siart.de>:
> As we know from Java, platform independent programming environments (as is Tcl/Tk) tend to be slow.

And then there was JIT. "You know nothing, Uwe Siart." :-)

Best
   Martin

From bernhard.kleine at gmx.net  Mon May 30 22:22:22 2016
From: bernhard.kleine at gmx.net (Bernhard Kleine)
Date: Mon, 30 May 2016 22:22:22 +0200
Subject: [tex-live] Tlmgr closing takes fairly long
In-Reply-To: <CAP7DCDds3Og4H6fbxRKCxw4vCPZYHex7vCez4RH_A1-gDL3RUQ@mail.gmail.com>
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
 <84eg8j3gl6.fsf@siart.de>
 <CAP7DCDds3Og4H6fbxRKCxw4vCPZYHex7vCez4RH_A1-gDL3RUQ@mail.gmail.com>
Message-ID: <b60f56b5-c96d-2f4f-1d03-2b8945cdecf1@gmx.net>



Am 30.05.2016 um 22:07 schrieb Martin Schr?der:
> 2016-05-30 13:55 GMT+02:00 Uwe Siart <usenet at siart.de>:
>> As we know from Java, platform independent programming environments (as is Tcl/Tk) tend to be slow.
> And then there was JIT. "You know nothing, Uwe Siart." :-)
>
> Best
>    Martin
Pity, I cannot understand the joke.

Bernhard

-- 
--
spitzhalde9
79853 lenzkirch
bernhard.kleine at gmx.net
www.b-kleine.com, www.urseetal.net
-
thunderbird mit enigmail
GPG schl?ssel: D5257409
fingerprint:
08 B7 F8 70 22 7A FC C1 15 49 CA A6 C7 6F A0 2E D5 25 74 09

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160530/5be97a95/attachment-0001.html>

From martin at oneiros.de  Mon May 30 22:31:29 2016
From: martin at oneiros.de (=?UTF-8?Q?Martin_Schr=C3=B6der?=)
Date: Mon, 30 May 2016 22:31:29 +0200
Subject: [tex-live] Tlmgr closing takes fairly long
In-Reply-To: <b60f56b5-c96d-2f4f-1d03-2b8945cdecf1@gmx.net>
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
 <84eg8j3gl6.fsf@siart.de>
 <CAP7DCDds3Og4H6fbxRKCxw4vCPZYHex7vCez4RH_A1-gDL3RUQ@mail.gmail.com>
 <b60f56b5-c96d-2f4f-1d03-2b8945cdecf1@gmx.net>
Message-ID: <CAP7DCDe-tUjf7CXf3prvBJka6BAWfo_rRCnFwUOGdK3aEAxeHQ@mail.gmail.com>

2016-05-30 22:22 GMT+02:00 Bernhard Kleine <bernhard.kleine at gmx.net>:
> And then there was JIT. "You know nothing, Uwe Siart." :-)
>
> Pity, I cannot understand the joke.

https://en.wikipedia.org/wiki/Just-in-time_compilation

If you are really interested, read up on LuaJIT. It can get
performance that's better than
hand-tuned assembler.

Best
   Martin

From reinhard.kotucha at web.de  Mon May 30 23:38:15 2016
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 30 May 2016 23:38:15 +0200
Subject: [tex-live] Tlmgr closing takes fairly long
In-Reply-To: <84eg8j3gl6.fsf@siart.de>
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
 <84eg8j3gl6.fsf@siart.de>
Message-ID: <22348.45767.11629.528210@zaphod.ms25.net>

On 2016-05-30 at 13:55:49 +0200, Uwe Siart wrote:

 > Bernhard Kleine <bernhard.kleine at gmx.net> writes:
 > 
 > > On my win7 box, closing the tlmgr (pretest and all before) takes
 > > at least 30 sec, in my mind very long. Is there a reason behind?
 > 
 > I've been observing this ever since. Just didn't care. As we know
 > from Java, platform independent programming environments (as is
 > Tcl/Tk) tend to be slow. Perhaps this is simply the price to pay
 > for platform independence.

It takes much less than a second to close tlmgr on Linux.  Hence it's
obviously a Windows issue.  Unless there is a program like strace for
Windows it's nearly impossible to find out what's going on.  Maybe one
could examine with Cygwin, but I fear that the problem can't be solved
anyway because a program has no influence on what happens after it's
finished.  Of course, the O/S has to close open files and reclaim
memory, but I don't know why this takes so much time on Windows.
Creating new processes is also very slow on Windows.

BTW, Tcl/Tk is not slow because it's a platform independent
programming environment, it's slow because Tcl is an interpreted
language.  Most other scripting languages pre-compile the code before
it's executed.  This makes a very big difference. 

I don't know anything about Java, but I've been told that current
implementations are quite fast.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From zdenek.wagner at gmail.com  Mon May 30 23:56:27 2016
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 30 May 2016 23:56:27 +0200
Subject: [tex-live] Tlmgr closing takes fairly long
In-Reply-To: <22348.45767.11629.528210@zaphod.ms25.net>
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
 <84eg8j3gl6.fsf@siart.de> <22348.45767.11629.528210@zaphod.ms25.net>
Message-ID: <CAC1phyZgHXv63_NXBNT_iTkyeo79yMTY-mPTKW7ofoEkSs2VqQ@mail.gmail.com>

2016-05-30 23:38 GMT+02:00 Reinhard Kotucha <reinhard.kotucha at web.de>:

> On 2016-05-30 at 13:55:49 +0200, Uwe Siart wrote:
>
>  > Bernhard Kleine <bernhard.kleine at gmx.net> writes:
>  >
>  > > On my win7 box, closing the tlmgr (pretest and all before) takes
>  > > at least 30 sec, in my mind very long. Is there a reason behind?
>  >
>  > I've been observing this ever since. Just didn't care. As we know
>  > from Java, platform independent programming environments (as is
>  > Tcl/Tk) tend to be slow. Perhaps this is simply the price to pay
>  > for platform independence.
>
> It takes much less than a second to close tlmgr on Linux.  Hence it's
> obviously a Windows issue.  Unless there is a program like strace for
> Windows it's nearly impossible to find out what's going on.  Maybe one
> could examine with Cygwin, but I fear that the problem can't be solved
> anyway because a program has no influence on what happens after it's
> finished.  Of course, the O/S has to close open files and reclaim
> memory, but I don't know why this takes so much time on Windows.
> Creating new processes is also very slow on Windows.
>
> BTW, Tcl/Tk is not slow because it's a platform independent
> programming environment, it's slow because Tcl is an interpreted
> language.  Most other scripting languages pre-compile the code before
> it's executed.  This makes a very big difference.
>

It is even worse, Tcl lacks numeric variables. If you want to evaluate 3 +
2, first the string "3" is converted internally to a number, then the
string "2" is converted internally to a number, the expression is evaluated
to number 5 which is converte?d to string "5" and the string is stored.

>
> I don't know anything about Java, but I've been told that current
> implementations are quite fast.
>

Yes, it is fast but the GNU Java for Linux lacks GUI, Java for other
platforms is not freely redistributable, users will have to download and
install it themselves. It need not be trivial. A few month ago I found that
a Java app working fine on my Linux did not work on a Windows computer and
the error message was not useful. The reason was that the app required
standard classes that are not distributed with JRE but JDK is required. It
can easily be figured out by a Java expert but not by normal users, they
will just report that it does not work.

>
> Regards,
>   Reinhard
>



Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz



>
> --
> ------------------------------------------------------------------
> Reinhard Kotucha                            Phone: +49-511-3373112
> Marschnerstr. 25
> D-30167 Hannover                    mailto:reinhard.kotucha at web.de
> ------------------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160530/5ea41203/attachment-0001.html>

From reinhard.kotucha at web.de  Tue May 31 00:25:28 2016
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 31 May 2016 00:25:28 +0200
Subject: [tex-live] Tlmgr closing takes fairly long
In-Reply-To: <CAP7DCDe-tUjf7CXf3prvBJka6BAWfo_rRCnFwUOGdK3aEAxeHQ@mail.gmail.com>
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
 <84eg8j3gl6.fsf@siart.de>
 <CAP7DCDds3Og4H6fbxRKCxw4vCPZYHex7vCez4RH_A1-gDL3RUQ@mail.gmail.com>
 <b60f56b5-c96d-2f4f-1d03-2b8945cdecf1@gmx.net>
 <CAP7DCDe-tUjf7CXf3prvBJka6BAWfo_rRCnFwUOGdK3aEAxeHQ@mail.gmail.com>
Message-ID: <22348.48600.69374.924485@zaphod.ms25.net>

On 2016-05-30 at 22:31:29 +0200, Martin Schr?der wrote:

 > If you are really interested, read up on LuaJIT. It can get
 > performance that's better than hand-tuned assembler.

Martin, how can this be?  If your manually written assembly code is
optimal, no program can provide better code.  Otherwise you should
revise your assembly code.

Many developers claim that their software is the fastest the world has
ever seen.  I always ignore all these advertisements.  If you want to
convince me, come up with numbers.  All the advertizing is meaningless
without numbers.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From martin at oneiros.de  Tue May 31 00:33:14 2016
From: martin at oneiros.de (=?UTF-8?Q?Martin_Schr=C3=B6der?=)
Date: Tue, 31 May 2016 00:33:14 +0200
Subject: [tex-live] Tlmgr closing takes fairly long
In-Reply-To: <22348.48600.69374.924485@zaphod.ms25.net>
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
 <84eg8j3gl6.fsf@siart.de>
 <CAP7DCDds3Og4H6fbxRKCxw4vCPZYHex7vCez4RH_A1-gDL3RUQ@mail.gmail.com>
 <b60f56b5-c96d-2f4f-1d03-2b8945cdecf1@gmx.net>
 <CAP7DCDe-tUjf7CXf3prvBJka6BAWfo_rRCnFwUOGdK3aEAxeHQ@mail.gmail.com>
 <22348.48600.69374.924485@zaphod.ms25.net>
Message-ID: <CAP7DCDcaBMG6Lasgp-=dpU3YMTko1Tk_kXT8yvryJP6gOUFYhg@mail.gmail.com>

2016-05-31 0:25 GMT+02:00 Reinhard Kotucha <reinhard.kotucha at web.de>:
> Martin, how can this be?  If your manually written assembly code is
> optimal, no program can provide better code.  Otherwise you should
> revise your assembly code.

It's better than *most* assembler code written by humans.
Try to write optimal code for a current multi-core CPU with multiple
cache levels and an instruction pipeline ...

Really: Read up on LuaJIT. It's slightly magic. :-)

Best
   Martin

From arthur.reutenauer at normalesup.org  Tue May 31 01:05:49 2016
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Tue, 31 May 2016 00:05:49 +0100
Subject: [tex-live] Tlmgr closing takes fairly long
In-Reply-To: <CAP7DCDe-tUjf7CXf3prvBJka6BAWfo_rRCnFwUOGdK3aEAxeHQ@mail.gmail.com>
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
 <84eg8j3gl6.fsf@siart.de>
 <CAP7DCDds3Og4H6fbxRKCxw4vCPZYHex7vCez4RH_A1-gDL3RUQ@mail.gmail.com>
 <b60f56b5-c96d-2f4f-1d03-2b8945cdecf1@gmx.net>
 <CAP7DCDe-tUjf7CXf3prvBJka6BAWfo_rRCnFwUOGdK3aEAxeHQ@mail.gmail.com>
Message-ID: <20160530230549.GC3947035@phare.normalesup.org>

On Mon, May 30, 2016 at 10:31:29PM +0200, Martin Schr?der wrote:
> 2016-05-30 22:22 GMT+02:00 Bernhard Kleine <bernhard.kleine at gmx.net>:
>> Pity, I cannot understand the joke.
> 
> https://en.wikipedia.org/wiki/Just-in-time_compilation

  It's funny that you didn't understand what Bernhard didn't understand :-)

  Bernhard: the quote is from Game of Thrones ("You know nothing, Jon
Snow").  In the context, it's pretty clear that it is not about
just-in-time compilation ;-)

	Best,

		Arthur

From reinhard.kotucha at web.de  Tue May 31 01:12:27 2016
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 31 May 2016 01:12:27 +0200
Subject: [tex-live] Tlmgr closing takes fairly long
In-Reply-To: <CAC1phyZgHXv63_NXBNT_iTkyeo79yMTY-mPTKW7ofoEkSs2VqQ@mail.gmail.com>
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
 <84eg8j3gl6.fsf@siart.de>	<22348.45767.11629.528210@zaphod.ms25.net>
 <CAC1phyZgHXv63_NXBNT_iTkyeo79yMTY-mPTKW7ofoEkSs2VqQ@mail.gmail.com>
Message-ID: <22348.51419.452540.686695@zaphod.ms25.net>

On 2016-05-30 at 23:56:27 +0200, Zdenek Wagner wrote:

 > 2016-05-30 23:38 GMT+02:00 Reinhard Kotucha <reinhard.kotucha at web.de>:
 >     BTW, Tcl/Tk is not slow because it's a platform independent
 >     programming environment, it's slow because Tcl is an
 >     interpreted language.? Most other scripting languages
 >     pre-compile the code before it's executed.? This makes a very
 >     big difference.
 > 
 > It is even worse, Tcl lacks numeric variables. If you want to
 > evaluate 3 + 2, first the string "3" is converted internally to a
 > number, then the string "2" is converted internally to a number,
 > the expression is evaluated to number 5 which is converte?d to
 > string "5" and the string is stored.

Well, I think that we can assume that nobody uses Tcl in order to do
arithmetic.  In the few cases where arithmetic is needed the overhead
is certainly acceptable.

Other programming languages convert strings to numbers and vice versa
on-the-fly too,

  $ perl -e 'print (1+"2");'
  3

but in Tcl it's more expensive because the code isn't compiled in
advance.

 >     I don't know anything about Java, but I've been told that current
 >     implementations are quite fast.
 > 
 > Yes, it is fast but the GNU Java for Linux lacks GUI, Java for
 > other platforms is not freely redistributable, users will have to
 > download and install it themselves. It need not be trivial. A few
 > month ago I found that a Java app working fine on my Linux did not
 > work on a Windows computer and the error message was not
 > useful. The reason was that the app required standard classes that
 > are not distributed with JRE but JDK is required. It can easily be
 > figured out by a Java expert but not by normal users, they will
 > just report that it does not work.

Thanks for the explanations.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From preining at logic.at  Tue May 31 02:23:58 2016
From: preining at logic.at (Norbert Preining)
Date: Tue, 31 May 2016 09:23:58 +0900
Subject: [tex-live] Bug in TL infra
In-Reply-To: <B045A248-CF7B-4BBA-94EC-02232CDF33BC@axelkielhorn.de>
References: <D49F489A-421C-4120-B6E8-EDBED8EDDEC7@axelkielhorn.de>
 <1960DE78-5017-4C7B-9DBD-3E39A1EB3146@logic.at>
 <E180EBA6-5C86-49C3-A843-0C5F0579B2D0@axelkielhorn.de>
 <B045A248-CF7B-4BBA-94EC-02232CDF33BC@axelkielhorn.de>
Message-ID: <20160531002358.GU965@logic.at>

Hi Axel,

> I removed the empty entry and updates the infra from TLU -> empty entry reappeared.

Can you please:
* manually download the updater update-tlmgr-latest.sh
* run it with
	update-tlmgr-latest.sh --target SOME_NOT_EXISTING_DIR --noexec
* enter this direcftory
	cd SOME_NOT_EXISTING_DIR
* run runme.sh
	./runme.sh
* check whether the broken entry reappears

I have no idea where this could come from, and I cannot reproduce it
in any way :-(


Norbert

--
PREINING Norbert + TeX Live & Debian Developer + http://www.preining.info
GPG: 0x860CDC13    fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13

From preining at logic.at  Tue May 31 02:25:47 2016
From: preining at logic.at (Norbert Preining)
Date: Tue, 31 May 2016 09:25:47 +0900
Subject: [tex-live] Tlmgr closing takes fairly long
In-Reply-To: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
Message-ID: <20160531002547.GV965@logic.at>

On Mon, 30 May 2016, Bernhard Kleine wrote:
> On my win7 box, closing the tlmgr (pretest and all before) takes at
> least 30 sec, in my mind very long. Is there a reason behind?

Do you mean the GUI or the command line?

If you mean the GUI, can you test whether doing an action
on the command line also takes as much time? Would need an
action that triggers a saving of the tlpdb, like adjusting
some options or so.

Thanks.

Norbert

--
PREINING Norbert + TeX Live & Debian Developer + http://www.preining.info
GPG: 0x860CDC13    fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13

From preining at logic.at  Tue May 31 02:27:31 2016
From: preining at logic.at (Norbert Preining)
Date: Tue, 31 May 2016 09:27:31 +0900
Subject: [tex-live] Tlmgr closing takes fairly long
In-Reply-To: <22348.45767.11629.528210@zaphod.ms25.net>
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
 <84eg8j3gl6.fsf@siart.de> <22348.45767.11629.528210@zaphod.ms25.net>
Message-ID: <20160531002731.GW965@logic.at>

On Mon, 30 May 2016, Reinhard Kotucha wrote:
> BTW, Tcl/Tk is not slow because it's a platform independent
> programming environment, it's slow because Tcl is an interpreted

Please ... we are using Perl/Tk, not Tcl ...

Norbert

--
PREINING Norbert + TeX Live & Debian Developer + http://www.preining.info
GPG: 0x860CDC13    fp: F7D8 A928 26E3 16A1 9FA0  ACF0 6CAC A448 860C DC13

From usenet at siart.de  Tue May 31 07:11:12 2016
From: usenet at siart.de (Uwe Siart)
Date: Tue, 31 May 2016 07:11:12 +0200
Subject: [tex-live] Tlmgr closing takes fairly long
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
 <20160531002547.GV965@logic.at>
Message-ID: <84a8j63j7z.fsf@siart.de>

Norbert Preining <preining at logic.at> writes:

> If you mean the GUI, can you test whether doing an action
> on the command line also takes as much time? Would need an
> action that triggers a saving of the tlpdb, like adjusting
> some options or so.

Command line is perceptibly faster than opening and closing the GUI. I
tried an action that does not connect to a repo to be sure it's not the
download that slows down things.

For instance, "tlmgr option showall" takes something like 5-6 seconds to
display the output and return to the command prompt.

Don't know if this could be accelerated but to me it's always been ok
like that.

-- 
Uwe


From preining at logic.at  Tue May 31 07:23:26 2016
From: preining at logic.at (Norbert Preining)
Date: Tue, 31 May 2016 14:23:26 +0900
Subject: [tex-live] Tlmgr closing takes fairly long
In-Reply-To: <84a8j63j7z.fsf@siart.de>
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
 <20160531002547.GV965@logic.at> <84a8j63j7z.fsf@siart.de>
Message-ID: <B6488235-8469-4955-B7C1-3B97C514DE14@logic.at>

Please check also whether changing an option is as fast or at least much faster than the GUI.

N this case I might try to debug where the time hands.

Norbert


On May 31, 2016 2:11:12 PM GMT+09:00, Uwe Siart <usenet at siart.de> wrote:
>Norbert Preining <preining at logic.at> writes:
>
>> If you mean the GUI, can you test whether doing an action
>> on the command line also takes as much time? Would need an
>> action that triggers a saving of the tlpdb, like adjusting
>> some options or so.
>
>Command line is perceptibly faster than opening and closing the GUI. I
>tried an action that does not connect to a repo to be sure it's not the
>download that slows down things.
>
>For instance, "tlmgr option showall" takes something like 5-6 seconds
>to
>display the output and return to the command prompt.
>
>Don't know if this could be accelerated but to me it's always been ok
>like that.

-- 
Sent from my mobile device. Please excuse my brevity.

From dbitouze at wanadoo.fr  Tue May 31 07:33:12 2016
From: dbitouze at wanadoo.fr (=?utf-8?Q?Denis_Bitouz=C3=A9?=)
Date: Tue, 31 May 2016 07:33:12 +0200
Subject: [tex-live] Tlmgr closing takes fairly long
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
 <20160531002547.GV965@logic.at> <84a8j63j7z.fsf@siart.de>
Message-ID: <m38tyqg5bb.fsf@example.com>

Le 31/05/16 ? 07h11, Uwe Siart a ?crit :

> For instance, "tlmgr option showall" takes something like 5-6 seconds
> to display the output and return to the command prompt.

On my Linux box:

  ?????
  ? $ time tlmgr option showall
  ? Number of backups to keep (autobackup): 1
  ? Directory for backups (backupdir): tlpkg/backups
  ? Create formats on installation (formats): 1
  ? Create Start menu shortcuts (w32) (desktop_integration): 1
  ? Change file associations (w32) (fileassocs): 1
  ? Run tlmgr generate updmap after maps have changed (generate_updmap): (not set)
  ? Install documentation files (docfiles): 1
  ? Install source files (srcfiles): 1
  ? Default package repository (repository): http://mirror.ctan.org/systems/texlive/tlnet
  ? Run postinst code blobs (postcode): 1
  ? Destination for symlinks for binaries (sys_bin): /usr/local/bin
  ? Destination for symlinks for info docs (sys_info): /usr/local/info
  ? Destination for symlinks for man pages (sys_man): /usr/local/man
  ? Install for all users (w32) (multiuser): 1
  ? 
  ? real    0m1.347s
  ? user    0m1.280s
  ? sys     0m0.020s
  ?????
-- 
Denis


From usenet at siart.de  Tue May 31 12:52:45 2016
From: usenet at siart.de (Uwe Siart)
Date: Tue, 31 May 2016 12:52:45 +0200
Subject: [tex-live] Tlmgr closing takes fairly long
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
 <20160531002547.GV965@logic.at> <84a8j63j7z.fsf@siart.de>
 <B6488235-8469-4955-B7C1-3B97C514DE14@logic.at>
Message-ID: <8460tu33eq.fsf@siart.de>

Norbert Preining <preining at logic.at> writes:

> Please check also whether changing an option is as fast or at least
> much faster than the GUI.

Not much difference here (I tried with setting option autobackup). Only
launching and closing of the GUI takes particularly long.

-- 
Uwe


From tex at axelkielhorn.de  Tue May 31 17:59:48 2016
From: tex at axelkielhorn.de (Axel Kielhorn)
Date: Tue, 31 May 2016 17:59:48 +0200
Subject: [tex-live] Bug in TL infra
In-Reply-To: <20160531002358.GU965@logic.at>
References: <D49F489A-421C-4120-B6E8-EDBED8EDDEC7@axelkielhorn.de>
 <1960DE78-5017-4C7B-9DBD-3E39A1EB3146@logic.at>
 <E180EBA6-5C86-49C3-A843-0C5F0579B2D0@axelkielhorn.de>
 <B045A248-CF7B-4BBA-94EC-02232CDF33BC@axelkielhorn.de>
 <20160531002358.GU965@logic.at>
Message-ID: <0EFE5319-E73C-401D-BDB0-4F58450849FE@axelkielhorn.de>

Am 31.05.2016 um 02:23 schrieb Norbert Preining <preining at logic.at>:

> Hi Axel,
> 
>> I removed the empty entry and updates the infra from TLU -> empty entry reappeared.
> 
> Can you please:
> * manually download the updater update-tlmgr-latest.sh
> * run it with
> 	update-tlmgr-latest.sh --target SOME_NOT_EXISTING_DIR --noexec
> * enter this direcftory
> 	cd SOME_NOT_EXISTING_DIR
> * run runme.sh
> 	./runme.sh
> * check whether the broken entry reappears

First of all a patch to make runme cope with spaces is paths.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: update.diff
Type: application/octet-stream
Size: 1524 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20160531/796a1ec8/attachment.obj>
-------------- next part --------------


I now get a little farther.

./runme.sh: updating in /Volumes/Macintosh HD/usr/local/texlive/2016...
./runme.sh: tlmgr version says this is TeX Live 2016
./runme.sh: proceeding with tlmgr update.
mv: ./master/bin: No such file or directory
mkdir: ./installer: File exists
mv: ./master/tlpkg/installer/xz: No such file or directory
mv: ./master/tlpkg/installer/wget: No such file or directory
D:tlmgr:main: do persistent downloads = 1
D:tlmgr:main: ::tldownload_server defined
D:tl_tempdir: creating global tempdir /tmp/PiXmvPCj73
D:tl_tempdir: creating tempdir /tmp/PiXmvPCj73/sIR1dfG5xN
D:Using copied /tmp/PiXmvPCj73/sIR1dfG5xN/wget.x86_64-darwin for wget (tested).
D:Using copied /tmp/PiXmvPCj73/sIR1dfG5xN/xzdec.x86_64-darwin for xzdec (tested).
D:Using shipped /Volumes/Macintosh HD/usr/local/texlive/2016/tlpkg/installer/xz/xz.x86_64-darwin for xz (not tested).
./runme.sh: done.

And no more broken entry in tlpdb.

What do we learn from this?
A space in a filename is a really bad thing.
Sadly it is the default name for the MacOS Volume.

Greetings
Axel

From bernhard.kleine at gmx.net  Tue May 31 18:00:36 2016
From: bernhard.kleine at gmx.net (Bernhard Kleine)
Date: Tue, 31 May 2016 18:00:36 +0200
Subject: [tex-live] Tlmgr closing takes fairly long
In-Reply-To: <20160531002547.GV965@logic.at>
References: <2f7dbcca-290b-9db0-9be7-4baca67e3802@gmx.net>
 <20160531002547.GV965@logic.at>
Message-ID: <d2c87843-d779-1674-9d0e-dd9f90344c39@gmx.net>

Am 31.05.2016 um 02:25 schrieb Norbert Preining:
> On Mon, 30 May 2016, Bernhard Kleine wrote:
>> On my win7 box, closing the tlmgr (pretest and all before) takes at
>> least 30 sec, in my mind very long. Is there a reason behind?
> Do you mean the GUI or the command line?
>
> If you mean the GUI, can you test whether doing an action
> on the command line also takes as much time? Would need an
> action that triggers a saving of the tlpdb, like adjusting
> some options or so.
>
> Thanks.
>
> Norbert
Its the Gui, I am using only this.
I do not know whether I have the tools to debug this, you must tell what
I need and how to do it.

Bernhard

From bernhard.kleine at gmx.net  Tue May 31 21:42:09 2016
From: bernhard.kleine at gmx.net (Bernhard Kleine)
Date: Tue, 31 May 2016 21:42:09 +0200
Subject: [tex-live] Pretest installation failed
Message-ID: <a7ba1878-b956-e136-55e0-61c2d435b3b5@gmx.net>

I know that it is almost time for texlive 2016. But I wanted to test the
effect of a SSD harddrive on the compilation time. Therefore a new
install, but it failed:

F:\Downloads\Software\texlive2016pre\install-tl\install-tl-20160515>install-tl-advanced
-repository http://ftp.cstug.cz/pub/tex/local/tlpretest/ -gui perltk
PATH=F:\Downloads\Software\texlive2016pre\install-tl\install-tl-20160515\tlpkg\tlperl\bin;C:\Program
Files\ImageMagick-6.9.2-Q16;C:\Program Files (x86)\AMD
APP\bin\x86_64;C:\Program Files (x86)\AMD APP\bin\x86....(shortened)
"F:\Downloads\Software\texlive2016pre\install-tl\install-tl-20160515\install-tl"
-gui perltk -repository http://ftp.cstug.cz/pub/tex/local/tlpretest/
-gui perltk
Loading http://ftp.cstug.cz/pub/tex/local/tlpretest/tlpkg/texlive.tlpdb
Installing TeX Live 2016 from:
http://ftp.cstug.cz/pub/tex/local/tlpretest (not verified)
Platform: win32 => 'Windows'
Distribution: net  (downloading)
Using URL: http://ftp.cstug.cz/pub/tex/local/tlpretest
Directory for temporary files: C:/Users/bk/AppData/Local/Temp
Installing [0001/3244, time/total: ??:??/??:??]: 12many [376k]
TLUtils::check_file: removing k:\texlive\2016\temp\12many.tar.xz, sizes
differ:
TLUtils::check_file:   TL=, arg=2100
TLPDB::_install_package: downloading did not succeed
Installation failed.

The installation failed independently of whether the Avira firewall was
on or off.
Regards
Bernhard

-- 
--
spitzhalde9
79853 lenzkirch
bernhard.kleine at gmx.net
www.b-kleine.com, www.urseetal.net
-
thunderbird mit enigmail
GPG schl?ssel: D5257409
fingerprint:
08 B7 F8 70 22 7A FC C1 15 49 CA A6 C7 6F A0 2E D5 25 74 09

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20160531/2f8d0a63/attachment.html>

From squinky86 at gmail.com  Tue May 31 21:06:52 2016
From: squinky86 at gmail.com (Jon Hood)
Date: Tue, 31 May 2016 14:06:52 -0500
Subject: [tex-live] Unable to use install-tl-windows.exe: "Windows XP
 earliest supported version; aborting..."
Message-ID: <CAD0jTRuDLCwBqRGL-vK7rjA4rh1UXy-h=nArVBDxszYBnoRuew@mail.gmail.com>

When trying to run install-tl-windows.exe from
https://www.tug.org/texlive/acquire-netinstall.html I receive an
immediate pop-up stating, "Windows XP earliest supported version;
aborting..."

My platform: Windows 7 Enterprise Service Pack 1 64-bit

Current workaround: open install-tl-windows.exe in 7zip and extract
the install-tl-20160405 folder. Run install-tl-windows.bat from the
extracted folder

Thanks,
Jon

From reinhard.kotucha at web.de  Tue May 31 23:18:56 2016
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 31 May 2016 23:18:56 +0200
Subject: [tex-live] Pretest installation failed
In-Reply-To: <a7ba1878-b956-e136-55e0-61c2d435b3b5@gmx.net>
References: <a7ba1878-b956-e136-55e0-61c2d435b3b5@gmx.net>
Message-ID: <22349.65472.488706.817017@zaphod.ms25.net>

On 2016-05-31 at 21:42:09 +0200, Bernhard Kleine wrote:

 > The installation failed independently of whether the Avira firewall
 > was on or off.

Avira is a virus scanner, not a firewall.  Bernhard, I'm sure that you
know this and you used the term "firewall" unintended.

To make it clear: There are two kinds of virus scanners, those which
hook into system calls like write() and examine everything written to
the disk, and those which scan files which are on the disk already
asynchronously.

The former are harmless but the latter usually lock directories
(revoke write permissions from directories temporarily) and thus
interfere with TeX Live installations.  In most cases locking
directories is not a problem, but TeX Live installs more than 100,000
files, hence clashes are unavoidable.

Virus scanners which scan the disk asynchronously can always be
disabled temporarily because they detect viruses too late anyway.

On the other hand, disabling a scanner which tracks system calls is
neither necessary nor advisable.  It doesn't interfere with TeX Live.

But the most important thing: NEVER DISABLE A FIREWALL!  It takes a
fraction of a second and your computer is ruled by others.  If you
examine the log files of your firewall, you'll be amazed how many
people are on the waiting list.  Again, NEVER DISABLE A FIREWALL!

I'm emphasizing this because it happened in the past that people
accidentally used the term "firewall" instead of "virus scanner" and
recommended to turn off the firewall while installing TeX Live.
Definitely not a good idea...  NEVER DISABLE A FIREWALL!  NEVER!


AFAIK, unlike many other scanners, the Avirus virus scanner doesn't
lock directories and thus doesn't interfere with a TeX Live
installation.


Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From karl at freefriends.org  Tue May 31 23:42:24 2016
From: karl at freefriends.org (Karl Berry)
Date: Tue, 31 May 2016 21:42:24 +0000
Subject: [tex-live] Bug in TL infra
In-Reply-To: <0EFE5319-E73C-401D-BDB0-4F58450849FE@axelkielhorn.de>
Message-ID: <201605312142.u4VLgO65015749@freefriends.org>

Hi Axel,

    A space in a filename is a really bad thing.

We go to great lengths to support spaces in file/directory names in
general.  Obviously we fell down when it comes to runme.sh.  I'll
install your fix and work further on it after updates resume.

-  for a in $ROOT/bin/*; do
+  for a in "$ROOT/bin/*"; do

I'm guessing that should be "$ROOT"/bin/* -- want the wildcard
expansion, not a literal "*".

thanks,
k

