From jfbu at free.fr  Sat Sep  2 14:52:25 2017
From: jfbu at free.fr (jfbu)
Date: Sat, 2 Sep 2017 14:52:25 +0200
Subject: [tex-live] strange discrepancy in running time of etex between
	TL2015 and TL2017
In-Reply-To: <FEE3F263-304E-47E5-9547-39F20531A9EF@free.fr>
References: <9BC7B42A-180F-4B39-8500-BB48E3DE057F@free.fr>
 <22905.12457.590323.8056@zaphod.ms25.net>
 <EF596AB2-9657-4C22-B8F0-684889A6BB86@free.fr>
 <CAC1phyaWOk8Z8fSjcd1NmxktG2Mt49mUwQ+MZmioOPQDxzk5mw@mail.gmail.com>
 <FEE3F263-304E-47E5-9547-39F20531A9EF@free.fr>
Message-ID: <3F8B2845-C60D-4CE5-A751-ACEA2D009FC9@free.fr>


Le 27 juil. 2017 ? 14:44, jfbu <jfbu at free.fr> a ?crit :

> Thanks to Nelson, Reinhard, Zdenek, 
> 
> ...
> 
> Here is a no-package version:
> 
> ----
> \def\A{\B\B\B\B\B\B\B\B\B\B}% 10
> \def\B{\C\C\C\C\C\C\C\C\C\C}% 100
> \def\C{\noexpand\A\noexpand\A\noexpand\A\noexpand\A
>       \noexpand\A\noexpand\A\noexpand\A\noexpand\A
>       \noexpand\A\noexpand\A}% 1000
> \edef\D{\A}% 1000
> \edef\E{\D}% 1000000
> 
> \def\A{\edef\z{666}}
> 
> \E\message{.}
> \E\message{.}
> \E\message{.}
> \E\message{.}
> \E\message{.}
> \E\message{.}
> \E\message{.}
> \E\message{.}
> \E\message{.}
> \E\message{.}
> \bye
> ----
> 
> Hence now no \numexpr, only Knuth tex
> 
> When I do 
> 
> time tex testspeed.tex
> 
> I consistently get on my iMac 10.9.5:
> 
> - with TL2015: about 1.62s (last digit non-significant)
> 
> - with TL2017: about 2.18s (idem)
> 
> Thus, it appears, but somehow I had overlooked it so far,
> that darwinlegacy tex (et al.) is at least 33% slower on TL2017
> than formerly
> 
> I was aware of that with luatex but had not realized it applied to all tex's
> 
> If something like this is reproduced on other systems than Mac OS 10.9.5
> or more generally the "darwinlegacy", I would be interested to know


Hi,

I apologize that so far for lack of competency and time
I could not yet attempt building the binaries directly
on my mac os x 10.9.5

Rather, I decided to go the MacPorts [1]_ way, i.e.,
I installed MacPorts then its texlive-bin bundle.

.. [1] https://www.macports.org/install.php

I tried the "only binaries" approach to the latter
(``sudo port -b install texlive-bin``)
but this failed for the ghostscript, gmp, and
poppler dependencies. So I installed these three
from source (i.e. without ``-b``), with MacPorts doing the
local builds, then I could use binary mode for the rest
of texlive-bin.

I then basically moved over the MacPorts binaries
to my TeXLive 2017 installation.

I had to keep the TeXLive 2017 kpse* binaries (particularly
kpsewhich) because it appeared the MacPorts' one
had a hard-coded /opt/local/share setting for TEXMFROOT
(at least this is what `kpsewhich -var-value TEXMFROOT`
produced).

[I don't know if really the TEXMFROOT is hard-coded
in the kpsewhich binary]

In details, I copied all of bin/x86_64-darwinlegacy
into a cloned repertory bin/x86_64-darwinmacports,
then I copied over
the binaries from the MacPorts location to that one.

I then adjusted my /Library/TeX/ structure so that 
texbin would point to the bin/x86_64-darwinmacports

Of course, when ``tlmgr update --all`` does some addition
of scripts as happened recently with tlcockpit, I need
to manually create the symlink in my bin/x86_64-darwinmacports
to the scripts/ folder.

I had initially envisioned setting up a mixed texdist
structure with binaries in MacPorts and non-binaries
in TeXLive 2017 as it is already installed on my disk,
but dropped that for the approach above, where I simply
overwrite the TeXLive darwinglegacy binaries with 
the MacPorts ones for macos x 10.9.5

(I don't need to install the rest of TeXLive from MacPorts
as I have it already set-up and working, and maintenance
is done with TeXLive's tlmgr).

Anyway, now execution times for runs of pdftex, etc...,
compare to those of earlier TeXLive, i.e. are roughly
33% smaller than those of darwinlegacy, i.e., when the
pdftex of darwinlegacy needs 15s, the one of MacPorts needs
10s.

I wish I could provide details of how the binary builds
are done on my mac os X 10.9.5, but as said above I 
installed pre-compiled binaries and anyway all the things
were handled by MacPorts.

As a side remark both MacPorts and Fink support Mavericks
(aka macos x 10.9.5) still.

Perhaps Apple does not distribute security patches
(I think it must do in extreme situations like the bash
vulnerability of a year or two ago) for Mavericks, i.e.
for a system released only 5 years ago, but I do not wish
to contribute to this "programmed obsolescence" whose only
aim is to bloat software to force people to buy new hardware.

Currently, the binaries include pdftex, dvisvgm (now 2.1.3),
xdvipdfmx, xetex ...
but not asymptote or latexmk 
which are not included in the MacPorts texlive-bin port
(but are included surely in other portfiles)

Best, 

Jean-Fran?ois

PS: to be complete, I point out that I had a problem
with MacPorts install of gmp [2], whose resolution
consisted in suppression of some sub-sub-repertory of
/var/folders/ which had wrong group:owner:permissions
combination

.. [2] https://trac.macports.org/ticket/54704






From richardmoncriefkoch at icloud.com  Sat Sep  2 23:13:52 2017
From: richardmoncriefkoch at icloud.com (Richard Koch)
Date: Sat, 2 Sep 2017 14:13:52 -0700
Subject: [tex-live] strange discrepancy in running time of etex between
 TL2015 and TL2017
Message-ID: <449EB684-2195-4FB2-B51A-0115E528279A@icloud.com>

If you use another platform, you may be puzzled by the above message. For many years, MacTeX supported OS X on machines with PowerPC or Intel processors running OS X 10.5 or later. This system was released in 2007, and supported machines made several years earlier.

This year the MacTeX working group decided to only support versions of OS X receiving security patches from Apple. Thus MacTeX-2017 supports OS X 10.10, 10.11, 10.12, and will support 10.13 when it is released this fall. The policy is explained on a page linked from the top of the main MacTeX page at http://tug.org/mactex <http://tug.org/mactex>. I pushed for this new policy, so those who disagree can blame me.

Another user very helpfully compiled 2017 binaries for older systems, PPC on 10.5 and Intel on 10.5 through 10.9. These are also in TeX Live 2017. The 64 bit intel versions are called x86_64-darwinlegacy. Until this year we actually compiled PPC binaries on a PPC machine, and 32 and 64 bit Intel binaries on machines running OS X 10.5 and 10.6. This year, the main binaries were compiled on much newer hardware, and I believe the legacy binaries are created by cross compiling. It isn't easy to find these very old machines any more (the trick is to look for very old users, like me).

I have no quarrel with the interesting experiment done by jfbu. 

I do want to disagree with his comments about "programmed obsolescence." Readers, particularly on other platforms, should recall that all recent OS X updates were provided for free by Apple, and in almost all cases supported older hardware. System 10.10, for instance, supports all Apple computers capable of running OS X 10.8, including iMacs from 2007 or later, Mac Pros from 2008 or later, etc. This is hardware essentially 10 years old. 

Several years ago I attended WWDC with professional Mac programmers from Portland. Apple introduced a new feature to make programming easier, and I asked them how soon they could adopt the feature. "We won't touch it for at least three years" they said. In a fast moving field like computer science, this is stupid. To their credit, Apple understood the problem, made upgrades free, and put enormous effect into getting users to update rapidly. 

University traditions vary, but In my University, the computing staff encourages users to think of updating as one of the obligations of belonging to a community of scholars in a world of security attacks. 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170902/7ca44a7c/attachment.html>

From karl at freefriends.org  Sun Sep  3 00:00:26 2017
From: karl at freefriends.org (Karl Berry)
Date: Sat, 2 Sep 2017 22:00:26 GMT
Subject: [tex-live] Please default \pdftrailerid{} to SOURCE_DATE_EPOCH
	if	exported
In-Reply-To: <1498585586.2194864.1023120288.05C0C7A6@webmail.messagingengine.com>
Message-ID: <201709022200.v82M0Qm4026654@freefriends.org>

Chris - Anders sent the patch below to eliminate the cwd from the PDF
ID. Looked plausible to me. Maybe you could give it a try and see if it
does the job for you? --thanks, karl.


Date: Sat, 2 Sep 2017 16:45:50 -0400 (EDT)
From: Anders Kaseorg <andersk at mit.edu>
To: Karl Berry <karl at freefriends.org>
cc: pdftex at tug.org
Subject: Re: [pdftex] Consider removing dependence of PDF ID field on current
 directory name

On Sat, 2 Sep 2017, Karl Berry wrote:
>     With that in mind, could printID be changed to avoid depending on the 
>     current directory name, either by default
> 
> I think we can change it by default. Patches welcome.

Alright.  How does this look?

Anders


diff --git a/source/src/texk/web2c/pdftexdir/ChangeLog b/source/src/texk/web2c/pdftexdir/ChangeLog
index 116541e8..a5ebe6ea 100644
--- a/source/src/texk/web2c/pdftexdir/ChangeLog
+++ b/source/src/texk/web2c/pdftexdir/ChangeLog
@@ -1,3 +1,9 @@
+2017-09-02  Anders Kaseorg  <andersk at mit.edu>
+
+	* utils.c (printID): Do not hash the current directory name into
+	the PDF ID field, since any randomness in it would lead to
+	non-reproducible builds.
+
 2017-03-16  Pali Roh\'ar <pali.rohar at gmail.com>
 
 	Allow .enc files for bitmap fonts, following thread at
diff --git a/source/src/texk/web2c/pdftexdir/utils.c b/source/src/texk/web2c/pdftexdir/utils.c
index 67ff8e9d..fda97666 100644
--- a/source/src/texk/web2c/pdftexdir/utils.c
+++ b/source/src/texk/web2c/pdftexdir/utils.c
@@ -697,9 +697,10 @@ void unescapehex(poolpointer in)
   </blockquote>
   This stipulates only that the two IDs must be identical when the file is
   created and that they should be reasonably unique. Since it's difficult
-  to get the file size at this point in the execution of pdfTeX and
-  scanning the info dict is also difficult, we start with a simpler
-  implementation using just the first two items.
+  to get the file size at this point in the execution of pdfTeX, scanning
+  the info dict is also difficult, and any randomness in the current
+  directory name would lead to non-reproducible builds, we start with a
+  simpler implementation using just the current time and the file name.
  */
 void printID(strnumber filename)
 {
@@ -707,29 +708,13 @@ void printID(strnumber filename)
     md5_byte_t digest[16];
     char id[64];
     char *file_name;
-    char pwd[4096];
     /* start md5 */
     md5_init(&state);
     /* get the time */
     initstarttime();
     md5_append(&state, (const md5_byte_t *) start_time_str, strlen(start_time_str));
     /* get the file name */
-    if (getcwd(pwd, sizeof(pwd)) == NULL)
-        pdftex_fail("getcwd() failed (%s), path too long?", strerror(errno));
-#ifdef WIN32
-    {
-        char *p;
-        for (p = pwd; *p; p++) {
-            if (*p == '\\')
-                *p = '/';
-            else if (IS_KANJI(p))
-                p++;
-        }
-    }
-#endif
     file_name = makecstring(filename);
-    md5_append(&state, (const md5_byte_t *) pwd, strlen(pwd));
-    md5_append(&state, (const md5_byte_t *) "/", 1);
     md5_append(&state, (const md5_byte_t *) file_name, strlen(file_name));
     /* finish md5 */
     md5_finish(&state, digest);


From reinhard.kotucha at web.de  Sun Sep  3 06:58:43 2017
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sun, 3 Sep 2017 06:58:43 +0200
Subject: [tex-live] strange discrepancy in running time of etex between
 TL2015 and TL2017
In-Reply-To: <3F8B2845-C60D-4CE5-A751-ACEA2D009FC9@free.fr>
References: <9BC7B42A-180F-4B39-8500-BB48E3DE057F@free.fr>
 <22905.12457.590323.8056@zaphod.ms25.net>
 <EF596AB2-9657-4C22-B8F0-684889A6BB86@free.fr>
 <CAC1phyaWOk8Z8fSjcd1NmxktG2Mt49mUwQ+MZmioOPQDxzk5mw@mail.gmail.com>
 <FEE3F263-304E-47E5-9547-39F20531A9EF@free.fr>
 <3F8B2845-C60D-4CE5-A751-ACEA2D009FC9@free.fr>
Message-ID: <22955.35843.763867.776783@zaphod.ms25.net>

On 2017-09-02 at 14:52:25 +0200, jfbu wrote:

 > [I don't know if really the TEXMFROOT is hard-coded
 > in the kpsewhich binary]

Hi Jean-Fran?ois,
TEXMFROOT is defined in

  /usr/local/texlive/2017/texmf-dist/web2c/texmf.cnf

Its value is relative to the location of the binaries.  TeX Live sets

  TEXMFROOT = $SELFAUTOPARENT

because binaries are in .../bin/<platform> and Linux distributors set

  TEXMFROOT = $SELFAUTODIR

because they only support one platform.  The value of TEXMFROOT should
never be an absolute path, otherwise your TL installation isn't
portable anymore.

Kpathsea variables can be overwritten by environment variables.  Does
your environment overwrite TEXMFROOT?

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From jfbu at free.fr  Sun Sep  3 09:50:23 2017
From: jfbu at free.fr (jfbu)
Date: Sun, 3 Sep 2017 09:50:23 +0200
Subject: [tex-live] strange discrepancy in running time of etex between
	TL2015 and TL2017
In-Reply-To: <22955.35843.763867.776783@zaphod.ms25.net>
References: <9BC7B42A-180F-4B39-8500-BB48E3DE057F@free.fr>
 <22905.12457.590323.8056@zaphod.ms25.net>
 <EF596AB2-9657-4C22-B8F0-684889A6BB86@free.fr>
 <CAC1phyaWOk8Z8fSjcd1NmxktG2Mt49mUwQ+MZmioOPQDxzk5mw@mail.gmail.com>
 <FEE3F263-304E-47E5-9547-39F20531A9EF@free.fr>
 <3F8B2845-C60D-4CE5-A751-ACEA2D009FC9@free.fr>
 <22955.35843.763867.776783@zaphod.ms25.net>
Message-ID: <1B50D326-3218-4BEC-8D84-F9C12ED37C77@free.fr>


Hi Reinhard,

Le 3 sept. 2017 ? 06:58, Reinhard Kotucha <reinhard.kotucha at web.de> a ?crit :

> On 2017-09-02 at 14:52:25 +0200, jfbu wrote:
> 
>> [I don't know if really the TEXMFROOT is hard-coded
>> in the kpsewhich binary]
> 
> Hi Jean-Fran?ois,
> TEXMFROOT is defined in
> 
>  /usr/local/texlive/2017/texmf-dist/web2c/texmf.cnf
> 
> Its value is relative to the location of the binaries.  TeX Live sets
> 
>  TEXMFROOT = $SELFAUTOPARENT
> 
> because binaries are in .../bin/<platform> and Linux distributors set
> 
>  TEXMFROOT = $SELFAUTODIR
> 
> because they only support one platform.  The value of TEXMFROOT should
> never be an absolute path, otherwise your TL installation isn't
> portable anymore.


thanks, I knew about texmf.cnf files but completely forgot about
checking out what MacPorts does.

Indeed, 
there is /opt/local/share/texmf/web2c/texmf.cnf which is a
symlink to /opt/local/etc/texmf/texmf.cnf, and the latter does contain 

TEXMFROOT = /opt/local/share

as you surmised.

There is also this comment right prior to that setting:

% Normally the root directory of all texmf trees, but we don't exactly
% have that. Mostly, we don't use it (and use absolute paths instead),
% but define it anyway with the most reasonable thing in case
% something else tries to use it.

I did the following experiment:

~$ cp /opt/local/libexec/texlive/binaries/kpsewhich ~/Downloads/kpsewhich

~$ ~/Downloads/kpsewhich -var-value TEXMFROOT
/opt/local/share

which indicates that the MacPorts kpsewhich binary has the location
of texmf.cnf hard-coded. (or perhaps some other binaries it may call)

I confirmed that by manual edit of /opt/local/etc/texmf/texmf.cnf
to modify the TEXMFROOT setting to some random path and I checked 
that after that modification
~/Downloads/kpsewhich -var-value TEXMFROOT
did produce that random path.

however, "strings kpsewhich" which I had tried first had not allowed
identifying a hardcoded texmf.cnf absolute path in the MacPorts kpsewhich.


> 
> Kpathsea variables can be overwritten by environment variables.  Does
> your environment overwrite TEXMFROOT?


It does not overwrite TEXMFROOT.

For info, it does set some such environment variables:

TEXMFSYSVAR
TEXMFLOCAL
TEXMFDIST
TEXMFMAIN
SYSTEXMF
TEXMFHOME

The first four are actually deduced dynamically from the TexmfSysVar,
TexmfLocal, Root/texmf-dist, and AllTexmf/texmf symlinks in
/Library/TeX/Distributions/.DefaultTeX/Contents/
which is a Mac specific thing (the "TeXDist" control panel whose
config files I maintain manually from year to year).

For example:

export TEXMFSYSVAR="`cd -P $TEXDISTRIBCONTENTS/TexmfSysVar && pwd`"

where 
TEXDISTRIBCONTENTS="/Library/TeX/Distributions/.DefaultTeX/Contents"


The only reason for setting them as environment variable is speed:
some years ago Emacs/AucTeX did 9 calls to kpsewhich -var-value
at each initial opening of a .tex file, which amounted to many
seconds. Then they reduced it to 3 calls, but still it was too
slow for something happening at least once a day.

My set-up however has this defect that if I switch say from
TL2017 to TL2015, then I must quit and relaunch Emacs for it
to get the new values, because the environment variables
must be re-initialized from my .bash_profile

Returning to:

> Its value is relative to the location of the binaries.  TeX Live sets
> 
>  TEXMFROOT = $SELFAUTOPARENT
> 
> because binaries are in .../bin/<platform> and Linux distributors set
> 
>  TEXMFROOT = $SELFAUTODIR
> 
> because they only support one platform.  The value of TEXMFROOT should
> never be an absolute path, otherwise your TL installation isn't
> portable anymore.

The MacPorts texlive binaries appear to be in 

/opt/local/libexec/texlive/binaries

and as far as I can tell this is supposed to work via the
/Library/TeX/Distributions mechanism as I see no symlinks
in /opt/local/bin (which MacPorts add to PATH)
but there is a 

 /opt/local/libexec/texlive/texdist-2017

which contains only the symlink

 x86_64-darwin -> /opt/local/libexec/texlive/texbin

This however has a non-existent destination,
it should perhaps be "binaries", not "texbin".

It could be that my MacPorts install was only too partial,
but anyway what I did was to extract its binaries
and translocate them to a sub-repertory of
/usr/local/texlive/2017/bin


(for the reasons explained earlier in the thread that
the darwinlegacy binaries which support an extended
range of "old" mac os x systems up to and inclusive
of Mavericks have a speed problem on Mavericks)


Jean-Fran?ois



From lamby at debian.org  Sun Sep  3 10:40:06 2017
From: lamby at debian.org (Chris Lamb)
Date: Sun, 03 Sep 2017 09:40:06 +0100
Subject: [tex-live] Please default \pdftrailerid{} to SOURCE_DATE_EPOCH
 if exported
In-Reply-To: <201709022200.v82M0Qm4026654@freefriends.org>
References: <201709022200.v82M0Qm4026654@freefriends.org>
Message-ID: <1504428006.3844285.1093640520.13466688@webmail.messagingengine.com>

Hi Karl & Anders,

> Chris - Anders sent the patch below to eliminate the cwd from the PDF
> ID. Looked plausible to me. Maybe you could give it a try and see if it
> does the job for you?

It absolutely does; thank you :)  Would love to see this in the next
release, so please commit to your VCS.

Just FYI I've filed this in Debian as:

  https://bugs.debian.org/874102


Best wishes,

-- 
      ,''`.
     : :'  :     Chris Lamb
     `. `'`      lamby at debian.org / chris-lamb.co.uk
       `-

From jfbu at free.fr  Sun Sep  3 10:43:22 2017
From: jfbu at free.fr (jfbu)
Date: Sun, 3 Sep 2017 10:43:22 +0200
Subject: [tex-live] strange discrepancy in running time of etex between
	TL2015 and TL2017
In-Reply-To: <3F8B2845-C60D-4CE5-A751-ACEA2D009FC9@free.fr>
References: <9BC7B42A-180F-4B39-8500-BB48E3DE057F@free.fr>
 <22905.12457.590323.8056@zaphod.ms25.net>
 <EF596AB2-9657-4C22-B8F0-684889A6BB86@free.fr>
 <CAC1phyaWOk8Z8fSjcd1NmxktG2Mt49mUwQ+MZmioOPQDxzk5mw@mail.gmail.com>
 <FEE3F263-304E-47E5-9547-39F20531A9EF@free.fr>
 <3F8B2845-C60D-4CE5-A751-ACEA2D009FC9@free.fr>
Message-ID: <FDC1FCAB-4541-4106-BA9D-645EA7B753E1@free.fr>


Le 2 sept. 2017 ? 14:52, jfbu <jfbu at free.fr> a ?crit :

> Perhaps Apple does not distribute security patches
> (I think it must do in extreme situations like the bash
> vulnerability of a year or two ago) for Mavericks, i.e.
> for a system released only 5 years ago, but I do not wish
> to contribute to this "programmed obsolescence" whose only
> aim is to bloat software to force people to buy new hardware.


Hi Richard,

(I don't currently subscribe to the tex-live list, hence
I saw your message only on visiting

http://tug.org/pipermail/tex-live/2017-September/date.html

could you please CC to my address if replying?)

of course I wish to thank you and all those contributing
to MacTeX, and the TeXLive team for still supporting
an extended range of older mac os x systems
(I think it is Mojca who provided the time and resources).

I was confronted with the fact that TL2017 darwinlegacy
for Mavericks execute slower than darwing binaries 
from TL2016, TL2015, ...
(my first awakening was with luatex/texlua, where on one occasion
I had found
execution time to be doubled, then later I realized also
pdftex was affected to a lesser but significant extent).
Never ever I would blame people who did all the hard work
and have the expertise I am lacking to do it, but as an
end user I can only note the situation and then try
to find a solution. I definitely would compile myself the
binaries if I was not too afraid of endless problems
with missing dependencies on my system or subtleties
of C compilers etc... 

You reacted in your message to my mentioning of "programmed
obsolescence", but I think it is indeed a vital mechanism
for Apple, as demonstrated by its policies regarding
smartphones and tablets. Not owning any of those I can't
comment more, but I have heard enough interesting real
life experiences from people who do.

You stress that we live in an era of worldwide security
attacks. Then, why should Apple stop providing security
patches for the system it delivered in 2011 or 2012?
Isn't that a breach of trust with its users?

You stress that upgrading is free.
Ok, but not always free of problems.
I have an extensive range of installs via Fink for example.
Upgrading the system will require me upgrading the Fink
binaries. This takes hours. This is lame excuse perhaps,
but I recall hearing that switch to Yosemite was not painless
with the business that the computer appeared to be stalled
for 24 hours when handling /usr/local (I have forgotten the
details and it might not be Yosemite)

Computer hardware and all Apple gadgets like AppleWatch
use precious mineral resources and I am sorry to observe
that zillions of people
have no issue with throwing the thing to the "trash"
frequently and buy the new model,
in an attitude of frenetic consumerism.

I am just the slower guy who knows he owns an extremely
sophisticated product of human engineering. I am grateful
for that but I am afraid
that by upgrading incessantly the main software
I will observe that little by little this hardware will
prove insufficient, be it for memory space or processor
speed or whatever. Yes, this is an attitude of mis-trust
on my part respective to Apple, an attitude
which your more extensive experience indicates might
be mis-guided.

Nevertheless, I stick to my point that when the main
change of a system upgrade by Apple is to unify the
looks of the windows to those in use on smaller screens
like smartphones which I don't own, or to make it easier
to store my private data on "Cloud" owned by Apple or
whomever, I prefer to stay
on the cautious side. Because I gain something with
absolutely no interest to me and I don't know what I may
lose in the process.

Best,

Jean-Fran?ois













From preining at logic.at  Sun Sep  3 13:23:46 2017
From: preining at logic.at (Norbert Preining)
Date: Sun, 03 Sep 2017 20:23:46 +0900
Subject: [tex-live] Please default \pdftrailerid{} to SOURCE_DATE_EPOCH
	if exported
In-Reply-To: <1504428006.3844285.1093640520.13466688@webmail.messagingengine.com>
References: <201709022200.v82M0Qm4026654@freefriends.org>
 <1504428006.3844285.1093640520.13466688@webmail.messagingengine.com>
Message-ID: <FE344E8F-41C9-40AA-9BC9-10C3BE7A81C5@logic.at>

I'll include the patch in a build of texlive-bin soonish as the next release of TeX Live is still far off.

Norbert

On September 3, 2017 5:40:06 PM GMT+09:00, Chris Lamb <lamby at debian.org> wrote:
>Hi Karl & Anders,
>
>> Chris - Anders sent the patch below to eliminate the cwd from the PDF
>> ID. Looked plausible to me. Maybe you could give it a try and see if
>it
>> does the job for you?
>
>It absolutely does; thank you :)  Would love to see this in the next
>release, so please commit to your VCS.
>
>Just FYI I've filed this in Debian as:
>
>  https://bugs.debian.org/874102
>
>
>Best wishes,

--
PREINING Norbert + TeX Live & Debian Developer + http://www.preining.info
GPG: 0x860CDC13 fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13


From lamby at debian.org  Sun Sep  3 21:03:39 2017
From: lamby at debian.org (Chris Lamb)
Date: Sun, 03 Sep 2017 20:03:39 +0100
Subject: [tex-live] Please default \pdftrailerid{} to SOURCE_DATE_EPOCH
 if exported
In-Reply-To: <FE344E8F-41C9-40AA-9BC9-10C3BE7A81C5@logic.at>
References: <201709022200.v82M0Qm4026654@freefriends.org>
 <1504428006.3844285.1093640520.13466688@webmail.messagingengine.com>
 <FE344E8F-41C9-40AA-9BC9-10C3BE7A81C5@logic.at>
Message-ID: <1504465419.652171.1093951704.681A4F87@webmail.messagingengine.com>

Hi Norbert,

> I'll include the patch in a build of texlive-bin soonish as the
> next release of TeX Live is still far off.

Thank you. :)  Please close #874102 when you do so I can reschedule
rebuilds on tests.reproducible-builds.org.

Need to improve isdebianreproducibleyet.com and packages in the
toolchain are very valuable/productive to get fixed


Regards,

-- 
      ,''`.
     : :'  :     Chris Lamb
     `. `'`      lamby at debian.org / chris-lamb.co.uk
       `-

From norbert at preining.info  Mon Sep  4 02:07:44 2017
From: norbert at preining.info (Norbert Preining)
Date: Mon, 4 Sep 2017 09:07:44 +0900
Subject: [tex-live] strange discrepancy in running time of etex between
 TL2015 and TL2017
In-Reply-To: <3F8B2845-C60D-4CE5-A751-ACEA2D009FC9@free.fr>
Message-ID: <20170904000744.mhqtojnjbm4bjlvx@burischnitzel.preining.info>

Hi, just one short remark

> kpsewhich) because it appeared the MacPorts' one
> had a hard-coded /opt/local/share setting for TEXMFROOT

*every* kpsewhich has some path hard-coded into the binary. 
This is unavoidable because it needs to find the initial
texmf.cnf. These hard-coded path are normally relative
to the location of the kpsewhich binary, but some 
installations (like Debian/TeX Live) hard-code the path
because it is well known.

As Reinhard wrote in a later email, yes, after the initial texmf.cnf
is found, you can changes *all* variables to point to arbitrary
locations.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From jfbu at free.fr  Tue Sep  5 18:32:56 2017
From: jfbu at free.fr (jfbu)
Date: Tue, 5 Sep 2017 18:32:56 +0200
Subject: [tex-live] mtxrun --generate seemingly stalled
Message-ID: <2E93A761-BBE7-4F07-9B56-1B8BC68D73B1@free.fr>

Hi,

on updating a TeXLive 2017 from early June for the first time
I have encountered a seemingly stalled 

    mtxrun --generate

Here is the output from manually launching it

(sorry it is a bit long)

$ mtxrun --generate

resolvers       | resolving | variable 'SELFAUTOLOC' set to '/FOO/BAR/username/TEXLIVE/bin/x86_64-linux'
resolvers       | resolving | variable 'SELFAUTODIR' set to '/FOO/BAR/username/TEXLIVE/bin'
resolvers       | resolving | variable 'SELFAUTOPARENT' set to '/FOO/BAR/username/TEXLIVE'
resolvers       | resolving | variable 'TEXMFCNF' set to ''
resolvers       | resolving | variable 'TEXMF' set to ''
resolvers       | resolving | variable 'TEXOS' set to 'bin'
resolvers       | resolving |
resolvers       | resolving | using configuration specification 'home:texmf/web2c;{selfautoloc:,selfautoloc:/share/texmf-local/web2c,selfautoloc:/share/texmf-dist/web2c,selfautoloc:/share/texmf/web2c,selfautoloc:/texmf-local/web2c,selfautoloc:/texmf-dist/web2c,selfautoloc:/texmf/web2c,selfautodir:,selfautodir:/share/texmf-local/web2c,selfautodir:/share/texmf-dist/web2c,selfautodir:/share/texmf/web2c,selfautodir:/texmf-local/web2c,selfautodir:/texmf-dist/web2c,selfautodir:/texmf/web2c,$SELFAUTOGRANDPARENT/texmf-local/web2c,selfautoparent:,selfautoparent:/share/texmf-local/web2c,selfautoparent:/share/texmf-dist/web2c,selfautoparent:/share/texmf/web2c,selfautoparent:/texmf-local/web2c,selfautoparent:/texmf-dist/web2c,selfautoparent:/texmf/web2c}'
resolvers       | resolving |
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/texmf/web2c' from specification 'home:texmf/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on weird path '/FOO/BAR/username/TEXLIVE/bin/x86_64-linux' from specification 'selfautoloc:'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/x86_64-linux/share/texmf-local/web2c' from specification 'selfautoloc:/share/texmf-local/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/x86_64-linux/share/texmf-dist/web2c' from specification 'selfautoloc:/share/texmf-dist/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/x86_64-linux/share/texmf/web2c' from specification 'selfautoloc:/share/texmf/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/x86_64-linux/texmf-local/web2c' from specification 'selfautoloc:/texmf-local/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/x86_64-linux/texmf-dist/web2c' from specification 'selfautoloc:/texmf-dist/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/x86_64-linux/texmf/web2c' from specification 'selfautoloc:/texmf/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on weird path '/FOO/BAR/username/TEXLIVE/bin' from specification 'selfautodir:'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/share/texmf-local/web2c' from specification 'selfautodir:/share/texmf-local/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/share/texmf-dist/web2c' from specification 'selfautodir:/share/texmf-dist/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/share/texmf/web2c' from specification 'selfautodir:/share/texmf/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/texmf-local/web2c' from specification 'selfautodir:/texmf-local/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/texmf-dist/web2c' from specification 'selfautodir:/texmf-dist/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/texmf/web2c' from specification 'selfautodir:/texmf/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '$SELFAUTOGRANDPARENT/texmf-local/web2c' from specification '$SELFAUTOGRANDPARENT/texmf-local/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on weird path '/FOO/BAR/username/TEXLIVE' from specification 'selfautoparent:'
resolvers       | resolving | found regular configuration file '/FOO/BAR/username/TEXLIVE/texmfcnf.lua'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/share/texmf-local/web2c' from specification 'selfautoparent:/share/texmf-local/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/share/texmf-dist/web2c' from specification 'selfautoparent:/share/texmf-dist/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/share/texmf/web2c' from specification 'selfautoparent:/share/texmf/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/texmf-local/web2c' from specification 'selfautoparent:/texmf-local/web2c'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/texmf-dist/web2c' from specification 'selfautoparent:/texmf-dist/web2c'
resolvers       | resolving | found regular configuration file '/FOO/BAR/username/TEXLIVE/texmf-dist/web2c/texmfcnf.lua'
resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/texmf/web2c' from specification 'selfautoparent:/texmf/web2c'
resolvers       | resolving |
resolvers       | resolving | loading configuration file 'selfautoparent:/texmfcnf.lua'
resolvers       | resolving |
resolvers       | resolving | loading configuration file 'selfautoparent:/texmf-dist/web2c/texmfcnf.lua'
resolvers       | resolving |
resolvers       | resolving | locating list of 'home:.texlive2017/texmf-config' (runtime) (tree:///home:.texlive2017/texmf-config)
resolvers       | methods | resolving, method 'locators', how 'uri', handler 'tree', argument 'tree:///home:.texlive2017/texmf-config'
resolvers       | trees | locator 'home:.texlive2017/texmf-config' not found
resolvers       | resolving | locating list of 'home:texmf' (runtime) (tree:///home:texmf)
resolvers       | methods | resolving, method 'locators', how 'uri', handler 'tree', argument 'tree:///home:texmf'
resolvers       | trees | locator 'home:texmf' not found
resolvers       | resolving | locating list of 'selfautoparent:texmf-config' (cached)
resolvers       | methods | resolving, method 'locators', how 'uri', handler 'file', argument 'selfautoparent:texmf-config'
resolvers       | files | file locator 'selfautoparent:texmf-config' found as '/FOO/BAR/username/TEXLIVE/texmf-config'
resolvers       | resolving | hash 'selfautoparent:texmf-config' appended
resolvers       | resolving | locating list of 'selfautoparent:texmf-var' (cached)
resolvers       | methods | resolving, method 'locators', how 'uri', handler 'file', argument 'selfautoparent:texmf-var'
resolvers       | files | file locator 'selfautoparent:texmf-var' found as '/FOO/BAR/username/TEXLIVE/texmf-var'
resolvers       | resolving | hash 'selfautoparent:texmf-var' appended
resolvers       | resolving | locating list of 'selfautoparent:texmf-project' (cached)
resolvers       | methods | resolving, method 'locators', how 'uri', handler 'file', argument 'selfautoparent:texmf-project'
resolvers       | files | file locator 'selfautoparent:texmf-project' not found
resolvers       | resolving | locating list of 'selfautoparent:texmf-fonts' (cached)
resolvers       | methods | resolving, method 'locators', how 'uri', handler 'file', argument 'selfautoparent:texmf-fonts'
resolvers       | files | file locator 'selfautoparent:texmf-fonts' not found
resolvers       | resolving | locating list of 'selfautoparent:/texmf-local' (cached)
resolvers       | methods | resolving, method 'locators', how 'uri', handler 'file', argument 'selfautoparent:/texmf-local'
resolvers       | files | file locator 'selfautoparent:/texmf-local' found as '/FOO/BAR/username/TEXLIVE/texmf-local'
resolvers       | resolving | hash 'selfautoparent:/texmf-local' appended
resolvers       | resolving | locating list of 'selfautoparent:texmf-dist' (cached)
resolvers       | methods | resolving, method 'locators', how 'uri', handler 'file', argument 'selfautoparent:texmf-dist'
resolvers       | files | file locator 'selfautoparent:texmf-dist' found as '/FOO/BAR/username/TEXLIVE/texmf-dist'
resolvers       | resolving | hash 'selfautoparent:texmf-dist' appended
resolvers       | resolving |
resolvers       | methods | resolving, method 'generators', how 'uri', handler 'file', argument 'selfautoparent:texmf-config'
resolvers       | expansions | scanning path 'selfautoparent:texmf-config', branch 'selfautoparent:texmf-config'
resolvers       | expansions | 1 files found on 0 directories with 1 uppercase remappings
resolvers       | methods | resolving, method 'generators', how 'uri', handler 'file', argument 'selfautoparent:texmf-var'
resolvers       | expansions | scanning path 'selfautoparent:texmf-var', branch 'selfautoparent:texmf-var'
resolvers       | expansions | 133 files found on 38 directories with 1 uppercase remappings
resolvers       | methods | resolving, method 'generators', how 'uri', handler 'file', argument 'selfautoparent:/texmf-local'
resolvers       | expansions | scanning path 'selfautoparent:/texmf-local', branch 'selfautoparent:/texmf-local'
resolvers       | expansions | 1 files found on 27 directories with 1 uppercase remappings
resolvers       | methods | resolving, method 'generators', how 'uri', handler 'file', argument 'selfautoparent:texmf-dist'
resolvers       | expansions | scanning path 'selfautoparent:texmf-dist', branch 'selfautoparent:texmf-dist'

stopped by CTRL-C

perhaps I am not patient enough ?

background info: this is an install **without** doc/ **nor** source/

tlmgr update --self and tlmgr update --all apparently worked fine apart from that problem
latex sample2e or lualatex sample2e work fine

any more info I could provide ?

The whole thing is in a TEXLIVE of user HOME (with no admin privileges)

This happens on Ubuntun 16.04 where there is already a TeXLive 2015/Debian
install, which however should not interfere, I have set up the path to
TEXLIVE/bin/x86_64-linux first in PATH

The TEXMFHOME is set to ~/texmf, the latter actually is non-existent so far

the ~/.texlive2017 exists and I found a 
~/.texlive2017/texmf-var/texdoc/cache-tlpdb.lua
apparently correctly created as indicated by file timestamp

Best

Jean-Fran?ois



From jfbu at free.fr  Tue Sep  5 18:43:45 2017
From: jfbu at free.fr (jfbu)
Date: Tue, 5 Sep 2017 18:43:45 +0200
Subject: [tex-live] mtxrun --generate seemingly stalled
In-Reply-To: <2E93A761-BBE7-4F07-9B56-1B8BC68D73B1@free.fr>
References: <2E93A761-BBE7-4F07-9B56-1B8BC68D73B1@free.fr>
Message-ID: <DB783F65-2325-4FCA-BF01-E203AA03F7F2@free.fr>


Le 5 sept. 2017 ? 18:32, jfbu <jfbu at free.fr> a ?crit :

> Hi,
> 
> on updating a TeXLive 2017 from early June for the first time
> I have encountered a seemingly stalled 
> 
>    mtxrun --generate
> 
> Here is the output from manually launching it
> 
> (sorry it is a bit long)
> 
> $ mtxrun --generate
> 
> resolvers       | resolving | variable 'SELFAUTOLOC' set to '/FOO/BAR/username/TEXLIVE/bin/x86_64-linux'
> resolvers       | resolving | variable 'SELFAUTODIR' set to '/FOO/BAR/username/TEXLIVE/bin'
> resolvers       | resolving | variable 'SELFAUTOPARENT' set to '/FOO/BAR/username/TEXLIVE'
> resolvers       | resolving | variable 'TEXMFCNF' set to ''
> resolvers       | resolving | variable 'TEXMF' set to ''
> resolvers       | resolving | variable 'TEXOS' set to 'bin'
> resolvers       | resolving |
> resolvers       | resolving | using configuration specification 'home:texmf/web2c;{selfautoloc:,selfautoloc:/share/texmf-local/web2c,selfautoloc:/share/texmf-dist/web2c,selfautoloc:/share/texmf/web2c,selfautoloc:/texmf-local/web2c,selfautoloc:/texmf-dist/web2c,selfautoloc:/texmf/web2c,selfautodir:,selfautodir:/share/texmf-local/web2c,selfautodir:/share/texmf-dist/web2c,selfautodir:/share/texmf/web2c,selfautodir:/texmf-local/web2c,selfautodir:/texmf-dist/web2c,selfautodir:/texmf/web2c,$SELFAUTOGRANDPARENT/texmf-local/web2c,selfautoparent:,selfautoparent:/share/texmf-local/web2c,selfautoparent:/share/texmf-dist/web2c,selfautoparent:/share/texmf/web2c,selfautoparent:/texmf-local/web2c,selfautoparent:/texmf-dist/web2c,selfautoparent:/texmf/web2c}'
> resolvers       | resolving |
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/texmf/web2c' from specification 'home:texmf/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on weird path '/FOO/BAR/username/TEXLIVE/bin/x86_64-linux' from specification 'selfautoloc:'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/x86_64-linux/share/texmf-local/web2c' from specification 'selfautoloc:/share/texmf-local/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/x86_64-linux/share/texmf-dist/web2c' from specification 'selfautoloc:/share/texmf-dist/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/x86_64-linux/share/texmf/web2c' from specification 'selfautoloc:/share/texmf/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/x86_64-linux/texmf-local/web2c' from specification 'selfautoloc:/texmf-local/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/x86_64-linux/texmf-dist/web2c' from specification 'selfautoloc:/texmf-dist/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/x86_64-linux/texmf/web2c' from specification 'selfautoloc:/texmf/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on weird path '/FOO/BAR/username/TEXLIVE/bin' from specification 'selfautodir:'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/share/texmf-local/web2c' from specification 'selfautodir:/share/texmf-local/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/share/texmf-dist/web2c' from specification 'selfautodir:/share/texmf-dist/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/share/texmf/web2c' from specification 'selfautodir:/share/texmf/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/texmf-local/web2c' from specification 'selfautodir:/texmf-local/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/texmf-dist/web2c' from specification 'selfautodir:/texmf-dist/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/bin/texmf/web2c' from specification 'selfautodir:/texmf/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '$SELFAUTOGRANDPARENT/texmf-local/web2c' from specification '$SELFAUTOGRANDPARENT/texmf-local/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on weird path '/FOO/BAR/username/TEXLIVE' from specification 'selfautoparent:'
> resolvers       | resolving | found regular configuration file '/FOO/BAR/username/TEXLIVE/texmfcnf.lua'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/share/texmf-local/web2c' from specification 'selfautoparent:/share/texmf-local/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/share/texmf-dist/web2c' from specification 'selfautoparent:/share/texmf-dist/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/share/texmf/web2c' from specification 'selfautoparent:/share/texmf/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/texmf-local/web2c' from specification 'selfautoparent:/texmf-local/web2c'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/texmf-dist/web2c' from specification 'selfautoparent:/texmf-dist/web2c'
> resolvers       | resolving | found regular configuration file '/FOO/BAR/username/TEXLIVE/texmf-dist/web2c/texmfcnf.lua'
> resolvers       | resolving | looking for regular 'texmfcnf.lua' on given path '/FOO/BAR/username/TEXLIVE/texmf/web2c' from specification 'selfautoparent:/texmf/web2c'
> resolvers       | resolving |
> resolvers       | resolving | loading configuration file 'selfautoparent:/texmfcnf.lua'
> resolvers       | resolving |
> resolvers       | resolving | loading configuration file 'selfautoparent:/texmf-dist/web2c/texmfcnf.lua'
> resolvers       | resolving |
> resolvers       | resolving | locating list of 'home:.texlive2017/texmf-config' (runtime) (tree:///home:.texlive2017/texmf-config)
> resolvers       | methods | resolving, method 'locators', how 'uri', handler 'tree', argument 'tree:///home:.texlive2017/texmf-config'
> resolvers       | trees | locator 'home:.texlive2017/texmf-config' not found
> resolvers       | resolving | locating list of 'home:texmf' (runtime) (tree:///home:texmf)
> resolvers       | methods | resolving, method 'locators', how 'uri', handler 'tree', argument 'tree:///home:texmf'
> resolvers       | trees | locator 'home:texmf' not found
> resolvers       | resolving | locating list of 'selfautoparent:texmf-config' (cached)
> resolvers       | methods | resolving, method 'locators', how 'uri', handler 'file', argument 'selfautoparent:texmf-config'
> resolvers       | files | file locator 'selfautoparent:texmf-config' found as '/FOO/BAR/username/TEXLIVE/texmf-config'
> resolvers       | resolving | hash 'selfautoparent:texmf-config' appended
> resolvers       | resolving | locating list of 'selfautoparent:texmf-var' (cached)
> resolvers       | methods | resolving, method 'locators', how 'uri', handler 'file', argument 'selfautoparent:texmf-var'
> resolvers       | files | file locator 'selfautoparent:texmf-var' found as '/FOO/BAR/username/TEXLIVE/texmf-var'
> resolvers       | resolving | hash 'selfautoparent:texmf-var' appended
> resolvers       | resolving | locating list of 'selfautoparent:texmf-project' (cached)
> resolvers       | methods | resolving, method 'locators', how 'uri', handler 'file', argument 'selfautoparent:texmf-project'
> resolvers       | files | file locator 'selfautoparent:texmf-project' not found
> resolvers       | resolving | locating list of 'selfautoparent:texmf-fonts' (cached)
> resolvers       | methods | resolving, method 'locators', how 'uri', handler 'file', argument 'selfautoparent:texmf-fonts'
> resolvers       | files | file locator 'selfautoparent:texmf-fonts' not found
> resolvers       | resolving | locating list of 'selfautoparent:/texmf-local' (cached)
> resolvers       | methods | resolving, method 'locators', how 'uri', handler 'file', argument 'selfautoparent:/texmf-local'
> resolvers       | files | file locator 'selfautoparent:/texmf-local' found as '/FOO/BAR/username/TEXLIVE/texmf-local'
> resolvers       | resolving | hash 'selfautoparent:/texmf-local' appended
> resolvers       | resolving | locating list of 'selfautoparent:texmf-dist' (cached)
> resolvers       | methods | resolving, method 'locators', how 'uri', handler 'file', argument 'selfautoparent:texmf-dist'
> resolvers       | files | file locator 'selfautoparent:texmf-dist' found as '/FOO/BAR/username/TEXLIVE/texmf-dist'
> resolvers       | resolving | hash 'selfautoparent:texmf-dist' appended
> resolvers       | resolving |
> resolvers       | methods | resolving, method 'generators', how 'uri', handler 'file', argument 'selfautoparent:texmf-config'
> resolvers       | expansions | scanning path 'selfautoparent:texmf-config', branch 'selfautoparent:texmf-config'
> resolvers       | expansions | 1 files found on 0 directories with 1 uppercase remappings
> resolvers       | methods | resolving, method 'generators', how 'uri', handler 'file', argument 'selfautoparent:texmf-var'
> resolvers       | expansions | scanning path 'selfautoparent:texmf-var', branch 'selfautoparent:texmf-var'
> resolvers       | expansions | 133 files found on 38 directories with 1 uppercase remappings
> resolvers       | methods | resolving, method 'generators', how 'uri', handler 'file', argument 'selfautoparent:/texmf-local'
> resolvers       | expansions | scanning path 'selfautoparent:/texmf-local', branch 'selfautoparent:/texmf-local'
> resolvers       | expansions | 1 files found on 27 directories with 1 uppercase remappings
> resolvers       | methods | resolving, method 'generators', how 'uri', handler 'file', argument 'selfautoparent:texmf-dist'
> resolvers       | expansions | scanning path 'selfautoparent:texmf-dist', branch 'selfautoparent:texmf-dist'
> 
> stopped by CTRL-C
> 
> perhaps I am not patient enough ?
> 
> background info: this is an install **without** doc/ **nor** source/
> 
> tlmgr update --self and tlmgr update --all apparently worked fine apart from that problem
> latex sample2e or lualatex sample2e work fine
> 
> any more info I could provide ?
> 
> The whole thing is in a TEXLIVE of user HOME (with no admin privileges)
> 
> This happens on Ubuntun 16.04 where there is already a TeXLive 2015/Debian
> install, which however should not interfere, I have set up the path to
> TEXLIVE/bin/x86_64-linux first in PATH
> 
> The TEXMFHOME is set to ~/texmf, the latter actually is non-existent so far
> 
> the ~/.texlive2017 exists and I found a 
> ~/.texlive2017/texmf-var/texdoc/cache-tlpdb.lua
> apparently correctly created as indicated by file timestamp
> 
> Best
> 
> Jean-Fran?ois
> 

I forgot to ask to CC to my address if replying

additional info:

1. for reasons I don't know both

.../TEXLIVE/texmf-dist/doc/latex/koma-script

and

.../TEXLIVE/texmf-dist/source/latex/koma-script

appear complete but these are the only contents of the doc/ and source/ things

2. $ du -h -c --max-depth 1 TEXLIVE
128M	TEXLIVE/texmf-var
116K	TEXLIVE/texmf-local
8,0K	TEXLIVE/texmf-config
55M	TEXLIVE/tlpkg
2,5G	TEXLIVE/texmf-dist
151M	TEXLIVE/bin
2,8G	TEXLIVE
2,8G	total

took  quite a long time to complete (30seconds ? I was doing
something else when it completed)

Perhaps mtxrun --generate is not all stalled but suffer
the same syndrom as du when handling the texmf-dist

Best

Jean-Fran?ois



From jfbu at free.fr  Tue Sep  5 19:20:06 2017
From: jfbu at free.fr (jfbu)
Date: Tue, 5 Sep 2017 19:20:06 +0200
Subject: [tex-live] mtxrun --generate seemingly stalled
In-Reply-To: <DB783F65-2325-4FCA-BF01-E203AA03F7F2@free.fr>
References: <2E93A761-BBE7-4F07-9B56-1B8BC68D73B1@free.fr>
 <DB783F65-2325-4FCA-BF01-E203AA03F7F2@free.fr>
Message-ID: <A8247419-3B63-493E-BFFD-2BDB83CA36DC@free.fr>


Le 5 sept. 2017 ? 18:43, jfbu <jfbu at free.fr> a ?crit :

> Perhaps mtxrun --generate is not all stalled but suffer
> the same syndrom as du when handling the texmf-dist

Sorry for noise. It finally completed.

mtxrun          | elapsed lua time: 980.149 seconds
mardi 5 septembre 2017, 19:05:54 (UTC+0200)

hence, this took about 16mns and 20s. I simply
wasn't patient enough in earlier runs.

There remains the question of the koma-script
present in both doc/ and source/

The datestamps indicate this dates back to
original install which was without doc/ nor source/

If people are interested I can mail the texlive.tlpdb
or June 8, 15:52 which was initial install configured
to install neither source/ nor doc/

(the koma-script repertories are dated June 8, 14:49)

Best

Jean-Fran?ois



From preining at logic.at  Wed Sep  6 00:59:49 2017
From: preining at logic.at (Norbert Preining)
Date: Wed, 6 Sep 2017 07:59:49 +0900
Subject: [tex-live] mtxrun --generate seemingly stalled
In-Reply-To: <A8247419-3B63-493E-BFFD-2BDB83CA36DC@free.fr>
References: <2E93A761-BBE7-4F07-9B56-1B8BC68D73B1@free.fr>
 <DB783F65-2325-4FCA-BF01-E203AA03F7F2@free.fr>
 <A8247419-3B63-493E-BFFD-2BDB83CA36DC@free.fr>
Message-ID: <20170905225949.ts4hekiffeufzask@bulldog.preining.info>

> mtxrun          | elapsed lua time: 980.149 seconds
> mardi 5 septembre 2017, 19:05:54 (UTC+0200)

Yes it can take time if you have a lot of fonts in need
to be rescanned.

> There remains the question of the koma-script
> present in both doc/ and source/

That is correct. Don't start this discussion, please, we had
it here already several times. Use the force (google).

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From wl at gnu.org  Thu Sep  7 16:51:45 2017
From: wl at gnu.org (Werner LEMBERG)
Date: Thu, 07 Sep 2017 16:51:45 +0200 (CEST)
Subject: [tex-live] please install updated texcount.pl script
Message-ID: <20170907.165145.1304426404820898206.wl@gnu.org>


Looking at

  http://app.uio.no/ifi/texcount/download.html

I see that a new version is available.  In particular, it seems to fix
the infamous `ANSI' problem on Windows.


    Werner

From karl at freefriends.org  Thu Sep  7 23:19:42 2017
From: karl at freefriends.org (Karl Berry)
Date: Thu, 7 Sep 2017 21:19:42 GMT
Subject: [tex-live] please install updated texcount.pl script
In-Reply-To: <20170907.165145.1304426404820898206.wl@gnu.org>
Message-ID: <201709072119.v87LJgrx011788@freefriends.org>

      http://app.uio.no/ifi/texcount/download.html

It needs to be uploaded to CTAN. -k

From F.Legendre at u-pec.fr  Sat Sep  9 12:48:29 2017
From: F.Legendre at u-pec.fr (=?UTF-8?Q?Fran=C3=A7ois_Legendre?=)
Date: Sat, 9 Sep 2017 12:48:29 +0200
Subject: [tex-live] landscape parameter of geometry package not honored by
	lualatex
Message-ID: <CAO3MVFtWEzkCgL3sFPZdaJOh8dMQ3m8TEgpJaOxaYhjRyedVrA@mail.gmail.com>

Hi,

The landscape parameter of geometry package is not honored by
lualatex. My MWE is

\documentclass{article}
\usepackage{fontspec}
\usepackage[a4paper, landscape]{geometry}
\usepackage{lipsum}
%\usepackage{xcolor}
\begin{document}
\lipsum
\end{document} to

The PDF output is a A4 paper but with portrait orientation. The use of
the xcolor package is a way to suppress the bug.

When I run this MWE with the pdflatex engine, all is OK :

\documentclass{article}
\usepackage[a4paper, landscape]{geometry}
\usepackage{lipsum}
%\usepackage{xcolor}
\begin{document}
\lipsum
\end{document}

I attach the two logs to my mail.

I use the last updated TeX Live 2017 with a GNU/Linux Debian PC.

Cheers,
Fran?ois
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mwe-lualatex.log
Type: text/x-log
Size: 24175 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20170909/09d0cb04/attachment-0002.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mwe-pdflatex.log
Type: text/x-log
Size: 4465 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20170909/09d0cb04/attachment-0003.bin>

From d.p.carlisle at gmail.com  Sat Sep  9 18:25:29 2017
From: d.p.carlisle at gmail.com (David Carlisle)
Date: Sat, 9 Sep 2017 17:25:29 +0100
Subject: [tex-live] landscape parameter of geometry package not honored
	by lualatex
In-Reply-To: <CAO3MVFtWEzkCgL3sFPZdaJOh8dMQ3m8TEgpJaOxaYhjRyedVrA@mail.gmail.com>
References: <CAO3MVFtWEzkCgL3sFPZdaJOh8dMQ3m8TEgpJaOxaYhjRyedVrA@mail.gmail.com>
Message-ID: <CAEW6iOi5_EAL-gSRbOKU-fA-BGmeJ49d6Ukqfro9Yk783VZefw@mail.gmail.com>

until geometry package is updated you need to load the luatex85
package before geometry,

There have been requests for updates since luatex changed the names of
its primitives but unfortunately no update yet. luatex85 is a
compatiibility layer that re-instates the old names.

(I have BCC'ed this message to the author of the geometry package as a
reminder:-)

David


On 9 September 2017 at 11:48, Fran?ois Legendre <F.Legendre at u-pec.fr> wrote:
> Hi,
>
> The landscape parameter of geometry package is not honored by
> lualatex. My MWE is
>
> \documentclass{article}
> \usepackage{fontspec}
> \usepackage[a4paper, landscape]{geometry}
> \usepackage{lipsum}
> %\usepackage{xcolor}
> \begin{document}
> \lipsum
> \end{document} to
>
> The PDF output is a A4 paper but with portrait orientation. The use of
> the xcolor package is a way to suppress the bug.
>
> When I run this MWE with the pdflatex engine, all is OK :
>
> \documentclass{article}
> \usepackage[a4paper, landscape]{geometry}
> \usepackage{lipsum}
> %\usepackage{xcolor}
> \begin{document}
> \lipsum
> \end{document}
>
> I attach the two logs to my mail.
>
> I use the last updated TeX Live 2017 with a GNU/Linux Debian PC.
>
> Cheers,
> Fran?ois


From jfbu at free.fr  Sun Sep 10 09:58:32 2017
From: jfbu at free.fr (jfbu)
Date: Sun, 10 Sep 2017 09:58:32 +0200
Subject: [tex-live] display issue with "tlmgr help" ??
Message-ID: <F9BD74F0-396B-4575-B95E-1B84D3DA1D6F@free.fr>

Hi,

when I do tlmgr help, I observe this:

1NAME1
    tlmgr - the native TeX Live Manager

1SYNOPSIS1
    tlmgr [1option1]... 1action1 [1option1]... [1operand1]...

1DESCRIPTION1
    1tlmgr1 manages an existing TeX Live installation, both packages and

....

in my Terminal window.

rather than boldened NAME e.g.

I first observed it around September 1st, but today I confirm it on
a pure TeXLive 2017 on another Mac OS (fully updated today).

doing "man tlmgr" produces the expected highlighted output
ending in 

       $Id: tlmgr.pl 45190 2017-09-01 08:01:01Z preining $

perl v5.24.1                      2017-09-01                          TLMGR(1)


doing "tlmgr help" produces the output non-highlighted
(but apparently with highlight markers) and ending also with

    $Id: tlmgr.pl 45190 2017-09-01 08:01:01Z preining $

Any other relevant info I could provide ?

Best

Jean-Fran?ois




From bernhard.kleine at gmx.net  Sun Sep 10 10:04:34 2017
From: bernhard.kleine at gmx.net (Bernhard Kleine)
Date: Sun, 10 Sep 2017 10:04:34 +0200
Subject: [tex-live] Ttlmgr not shutting down properly or taking a lo of time
Message-ID: <a75af825-d972-0ce9-2621-30b174cd6f9d@gmx.net>

This morning I happened to update tlmgr on win7 (64). When tlmgr was
updated the tlmgr window did not close properly upon closing tlmgr, but
started to flash. The taskbar entry started to flash equally. This is
happening not always but occasionally upon using and closing the tlmgr.
I took more than a minute to close tlmgr and open the command line to
finish updating. I am not well versed in tlmgr and perl to understand
this. This behaviour is troubling and strange. I am wondering whether I
am the only one to whom this happens?

BTW the updating of packages did run well and tlmgr closed down properly
afterwards. Very strange indeed.

Regards Bernhard

-- 
spitzhalde9
D-79853 lenzkirch
bernhard.kleine at gmx.net
www.b-kleine.com, www.urseetal.net
-
thunderbird mit enigmail
GPG schl?ssel: D5257409
fingerprint:
08 B7 F8 70 22 7A FC C1 15 49 CA A6 C7 6F A0 2E D5 25 74 09


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 819 bytes
Desc: OpenPGP digital signature
URL: <http://tug.org/pipermail/tex-live/attachments/20170910/ab22bf8f/attachment.sig>

From jfbu at free.fr  Sun Sep 10 11:36:32 2017
From: jfbu at free.fr (jfbu)
Date: Sun, 10 Sep 2017 11:36:32 +0200
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <F9BD74F0-396B-4575-B95E-1B84D3DA1D6F@free.fr>
References: <F9BD74F0-396B-4575-B95E-1B84D3DA1D6F@free.fr>
Message-ID: <3405F121-6FA3-4756-8395-2F0876219AA2@free.fr>


Le 10 sept. 2017 ? 09:58, jfbu <jfbu at free.fr> a ?crit :

> Hi,
> 
> when I do tlmgr help, I observe this:
> 
> 1NAME1
>    tlmgr - the native TeX Live Manager
> 
> 1SYNOPSIS1
>    tlmgr [1option1]... 1action1 [1option1]... [1operand1]...
> 
> 1DESCRIPTION1
>    1tlmgr1 manages an existing TeX Live installation, both packages and
> 
> ....
> 
> in my Terminal window.
> 
> rather than boldened NAME e.g.
> 
> I first observed it around September 1st, but today I confirm it on
> a pure TeXLive 2017 on another Mac OS (fully updated today).
> 
> doing "man tlmgr" produces the expected highlighted output
> ending in 
> 
>       $Id: tlmgr.pl 45190 2017-09-01 08:01:01Z preining $
> 
> perl v5.24.1                      2017-09-01                          TLMGR(1)
> 
> 
> doing "tlmgr help" produces the output non-highlighted
> (but apparently with highlight markers) and ending also with
> 
>    $Id: tlmgr.pl 45190 2017-09-01 08:01:01Z preining $
> 
> Any other relevant info I could provide ?
> 


Hmm,

maybe I should also *have read* the actual provided help:

ACTIONS
   help
       Display this help information and exit (same as "--help", and on the
       web at <http://tug.org/texlive/doc/tlmgr.html>).  Sometimes the
       "perldoc" and/or "PAGER" programs on the system have problems,
       resulting in control characters being literally output.  This can't
       always be detected, but you can set the "NOPERLDOC" environment
       variable and "perldoc" will not be used.

which does hint that my reported problem is known.

Although I had not noticed it before I now checked that the same
applies with TL2014 and TL2106, hence it is presumably some other
change in my system(s).

Perhaps it was there forever and I am (again?) making noise
for nothing.

After exporting NOPERLDOC, the "tlmgr help" outputs the help
without the extra mark-up but all in one go.

If there is any experiment I can do to help debugging, I am
quite willing to do so.

Best

Jean-Fran?ois




From karl at freefriends.org  Sun Sep 10 22:52:21 2017
From: karl at freefriends.org (Karl Berry)
Date: Sun, 10 Sep 2017 20:52:21 GMT
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <3405F121-6FA3-4756-8395-2F0876219AA2@free.fr>
Message-ID: <201709102052.v8AKqLlG010782@freefriends.org>

tlmgr just calls the standard Perl pod2usage function, passing
-noperldoc if specified or if perldoc is known to be broken (Debian
stubs). We also play with the LESS envvar to try to reduce brokenness.
I have no way to know which part is failing on your Mac.  You could look
at the code starting around line 466 in tlmgr.pl if you want to pursue
it.  --best, karl.

From jfbu at free.fr  Sun Sep 10 23:14:38 2017
From: jfbu at free.fr (jfbu)
Date: Sun, 10 Sep 2017 23:14:38 +0200
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <201709102052.v8AKqLlG010782@freefriends.org>
References: <201709102052.v8AKqLlG010782@freefriends.org>
Message-ID: <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>

Hi Karl

> [...]
> I have no way to know which part is failing on your Mac.  You could look
> at the code starting around line 466 in tlmgr.pl if you want to pursue
> it.  --best, karl.

the problem originates in the Perl which came with my MacPorts install
(it puts it in /opt/local/bin/). And indeed I did this install around
September 1st. On the desktop iMac where I saw again the problem,
I had not yet activated the MacPorts binaries for TeX, so I had forgotten
that I actually did the install back then.

after deactivating this /opt/local/bin/
location from my PATH, I observe correct output from tlmgr help

the Perl giving good result is /opt/miniconda3/bin/perl which comes from
my Anaconda install [1]

[1] https://docs.continuum.io/anaconda/

$ /opt/miniconda3/bin/perl --version

This is perl 5, version 18, subversion 2 (v5.18.2) built for darwin-2level

on the other hand, the Perl giving bad result is

$ /opt/local/bin/perl --version

This is perl 5, version 24, subversion 2 (v5.24.2) built for darwin-thread-multi-2level

The system one is only a bit older than the one from Anaconda install

$ /usr/bin/perl --version

This is perl 5, version 16, subversion 2 (v5.16.2) built for darwin-thread-multi-2level

It would be interesting to know if this Perl v5.24.2 induces problems with 
"tlmgr help" on other systems than my Mac OS X.

Best,

Jean-Fran?ois



From cereda.paulo at gmail.com  Mon Sep 11 01:13:40 2017
From: cereda.paulo at gmail.com (Paulo Roberto Massa Cereda)
Date: Sun, 10 Sep 2017 20:13:40 -0300
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
References: <201709102052.v8AKqLlG010782@freefriends.org>
 <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
Message-ID: <15e6e11e4a0.274f.7132861acd90c364b5eb878c32bce117@gmail.com>

Hi Jean-Fran?ois,

I have Perl 5.24.2 on my Fedora 26 machine with TeX Live 2017 (all updates) 
and I get the correct output.

Cheerio,

Paulo

(sorry for a potential HTML email, I am on mobile)


A 10 de setembro de 2017 6:15:00 PM, jfbu <jfbu at free.fr> escreveu:

> Hi Karl
>
>> [...]
>> I have no way to know which part is failing on your Mac.  You could look
>> at the code starting around line 466 in tlmgr.pl if you want to pursue
>> it.  --best, karl.
>
> the problem originates in the Perl which came with my MacPorts install
> (it puts it in /opt/local/bin/). And indeed I did this install around
> September 1st. On the desktop iMac where I saw again the problem,
> I had not yet activated the MacPorts binaries for TeX, so I had forgotten
> that I actually did the install back then.
>
> after deactivating this /opt/local/bin/
> location from my PATH, I observe correct output from tlmgr help
>
> the Perl giving good result is /opt/miniconda3/bin/perl which comes from
> my Anaconda install [1]
>
> [1] https://docs.continuum.io/anaconda/
>
> $ /opt/miniconda3/bin/perl --version
>
> This is perl 5, version 18, subversion 2 (v5.18.2) built for darwin-2level
>
> on the other hand, the Perl giving bad result is
>
> $ /opt/local/bin/perl --version
>
> This is perl 5, version 24, subversion 2 (v5.24.2) built for 
> darwin-thread-multi-2level
>
> The system one is only a bit older than the one from Anaconda install
>
> $ /usr/bin/perl --version
>
> This is perl 5, version 16, subversion 2 (v5.16.2) built for 
> darwin-thread-multi-2level
>
> It would be interesting to know if this Perl v5.24.2 induces problems with
> "tlmgr help" on other systems than my Mac OS X.
>
> Best,
>
> Jean-Fran?ois
>
>



From norbert at preining.info  Mon Sep 11 03:25:12 2017
From: norbert at preining.info (Norbert Preining)
Date: Mon, 11 Sep 2017 10:25:12 +0900
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
References: <201709102052.v8AKqLlG010782@freefriends.org>
 <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
Message-ID: <20170911012512.rlem3py6vwerh26z@burischnitzel.preining.info>

> It would be interesting to know if this Perl v5.24.2 induces problems with 
> "tlmgr help" on other systems than my Mac OS X.

perl 5, version 26, subversion 0 (v5.26.0) works fine here (Debian/Linux)

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From jfbu at free.fr  Mon Sep 11 08:26:17 2017
From: jfbu at free.fr (jfbu)
Date: Mon, 11 Sep 2017 08:26:17 +0200
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <15e6e11e4a0.274f.7132861acd90c364b5eb878c32bce117@gmail.com>
References: <201709102052.v8AKqLlG010782@freefriends.org>
 <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
 <15e6e11e4a0.274f.7132861acd90c364b5eb878c32bce117@gmail.com>
Message-ID: <465DDF28-DF0E-4931-8832-47B90CAC0B6E@free.fr>


Le 11 sept. 2017 ? 01:13, Paulo Roberto Massa Cereda <cereda.paulo at gmail.com> a ?crit :

> 
> I have Perl 5.24.2 on my Fedora 26 machine with TeX Live 2017 (all updates) and I get the correct output

and Norbert wrote

> perl 5, version 26, subversion 0 (v5.26.0) works fine here (Debian/Linux)
> 

Thanks Paulo and Norbert,

I must debug better on my side, as all I observed was that normal
behaviour for "tlmgr help" came from removing "/opt/local/bin" from
PATH. 

So perhaps other binaries are involved in this PATH setting.

When I quit the good-looking tlmgr doc wI find this  was printed to my Terminal:

----
$ tlmgr help
You have an old groff. Update to version 1.20.1 for good Unicode support.
If you don't upgrade, wide characters may come out oddly.

 at /opt/miniconda3/lib/perl5/5.18.2/Pod/Perldoc.pm line 1346.
You have an old groff. Update to version 1.20.1 for good Unicode support.
If you don't upgrade, wide characters may come out oddly.

 at /opt/miniconda3/lib/perl5/5.18.2/Pod/Perldoc.pm line 1346.
----

However when I quit the bad-looking help I see nothing in my Terminal window.

Other difference is that at top of displayed help I see in "good" case

-----
TLMGR(1)              User Contributed Perl Documentation             TLMGR(1)
-----
then a few blank lines,

which does not show in "bad case"

and at bottom there is 

----
perl v5.18.2                      2017-09-01                          TLMGR(1)
(END) 
----

but only (END) in "bad case"

When I issue "man -d tlmgr" there is no difference
in output in both contexts, but this is possibly completely
irrelevant.

Best

Jean-Fran?ois





From jfbu at free.fr  Mon Sep 11 08:29:49 2017
From: jfbu at free.fr (jfbu)
Date: Mon, 11 Sep 2017 08:29:49 +0200
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <465DDF28-DF0E-4931-8832-47B90CAC0B6E@free.fr>
References: <201709102052.v8AKqLlG010782@freefriends.org>
 <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
 <15e6e11e4a0.274f.7132861acd90c364b5eb878c32bce117@gmail.com>
 <465DDF28-DF0E-4931-8832-47B90CAC0B6E@free.fr>
Message-ID: <A3944BED-2018-407D-9ABC-F6037A20F9B1@free.fr>


Le 11 sept. 2017 ? 08:26, jfbu <jfbu at free.fr> a ?crit :

> I must debug better on my side, as all I observed was that normal
> behaviour for "tlmgr help" came from removing "/opt/local/bin" from
> PATH. 
> 

It might be indeed that the Perl in my /opt/local/bin is badly
installed (missing files or dependencies), and thus this could
have nothing to do
with the version number as the reports of Norbert and Paulo
indicate,

Best

Jean-Fran?ois



From preining at logic.at  Mon Sep 11 08:42:19 2017
From: preining at logic.at (Norbert Preining)
Date: Mon, 11 Sep 2017 15:42:19 +0900
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <465DDF28-DF0E-4931-8832-47B90CAC0B6E@free.fr>
References: <201709102052.v8AKqLlG010782@freefriends.org>
 <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
 <15e6e11e4a0.274f.7132861acd90c364b5eb878c32bce117@gmail.com>
 <465DDF28-DF0E-4931-8832-47B90CAC0B6E@free.fr>
Message-ID: <20170911064219.5pl3dxkcaup3wuww@burischnitzel.preining.info>

Hi

> I must debug better on my side, as all I observed was that normal
> behaviour for "tlmgr help" came from removing "/opt/local/bin" from
> PATH. 

I think you have a bit of a mess on your Mac ;-) Too many different
installations of perl, mixed with old stuff and new stuff.
(/opt/local/bin and /opt/miniconda3/ both are not standard perls
is my impression).

> When I issue "man -d tlmgr" there is no difference
> in output in both contexts, but this is possibly completely
> irrelevant.

Well, in this case you are reading the pre-made tlmgr.1 man page,
which might work because man uses its builtin or another groff.
One cannot know on this Macs ;-)

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From zdenek.wagner at gmail.com  Mon Sep 11 09:12:08 2017
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 11 Sep 2017 09:12:08 +0200
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <20170911064219.5pl3dxkcaup3wuww@burischnitzel.preining.info>
References: <201709102052.v8AKqLlG010782@freefriends.org>
 <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
 <15e6e11e4a0.274f.7132861acd90c364b5eb878c32bce117@gmail.com>
 <465DDF28-DF0E-4931-8832-47B90CAC0B6E@free.fr>
 <20170911064219.5pl3dxkcaup3wuww@burischnitzel.preining.info>
Message-ID: <CAC1phyY1i517WrOX7eD1dkxQEY3sZwn9nNTGCpkBTvdh7U7r0Q@mail.gmail.com>

Hi,

such I mess is not so unusual, I have it in linux too because several
nonfree tools came with their own perl in nonstandard places. However, my
standard perl does not see their files. The key point is the setting of
PERL5LIB, it points to directories with my private additions, not to those
nonstandard versions. It may happen that your incomplete installation sees
files from another version which may cause problems. I would suggest to
start with verification of environment settings, especially the variables
related to perl.


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2017-09-11 8:42 GMT+02:00 Norbert Preining <preining at logic.at>:

> Hi
>
> > I must debug better on my side, as all I observed was that normal
> > behaviour for "tlmgr help" came from removing "/opt/local/bin" from
> > PATH.
>
> I think you have a bit of a mess on your Mac ;-) Too many different
> installations of perl, mixed with old stuff and new stuff.
> (/opt/local/bin and /opt/miniconda3/ both are not standard perls
> is my impression).
>
> > When I issue "man -d tlmgr" there is no difference
> > in output in both contexts, but this is possibly completely
> > irrelevant.
>
> Well, in this case you are reading the pre-made tlmgr.1 man page,
> which might work because man uses its builtin or another groff.
> One cannot know on this Macs ;-)
>
> Norbert
>
> --
> PREINING Norbert                               http://www.preining.info
> Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170911/40cf7b75/attachment.html>

From jfbu at free.fr  Mon Sep 11 10:12:51 2017
From: jfbu at free.fr (jfbu)
Date: Mon, 11 Sep 2017 10:12:51 +0200
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <CAC1phyY1i517WrOX7eD1dkxQEY3sZwn9nNTGCpkBTvdh7U7r0Q@mail.gmail.com>
References: <201709102052.v8AKqLlG010782@freefriends.org>
 <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
 <15e6e11e4a0.274f.7132861acd90c364b5eb878c32bce117@gmail.com>
 <465DDF28-DF0E-4931-8832-47B90CAC0B6E@free.fr>
 <20170911064219.5pl3dxkcaup3wuww@burischnitzel.preining.info>
 <CAC1phyY1i517WrOX7eD1dkxQEY3sZwn9nNTGCpkBTvdh7U7r0Q@mail.gmail.com>
Message-ID: <C7BEF2CF-5744-47E5-BCEE-CAF8887A3C2D@free.fr>


Le 11 sept. 2017 ? 09:12, Zdenek Wagner <zdenek.wagner at gmail.com> a ?crit :

> Hi,
> 
> such I mess is not so unusual, I have it in linux too because several nonfree tools came with their own perl in nonstandard places. However, my standard perl does not see their files. The key point is the setting of PERL5LIB, it points to directories with my private additions, not to those nonstandard versions. It may happen that your incomplete installation sees files from another version which may cause problems. I would suggest to start with verification of environment settings, especially the variables related to perl.

Hi Zdenek,

it seems I have indeed a mess,

$ which -a perl
/opt/local/bin/perl
/opt/miniconda3/bin/perl
/usr/bin/perl

$ which -a perldoc
/opt/local/bin/perldoc
/opt/miniconda3/bin/perldoc
/usr/bin/perldoc

$ echo $PERL5LIB
/sw/lib/perl5:/sw/lib/perl5/darwin

and the latter is a Fink location.

Thus I have (at least) 3 user installs of Perl:

1) the MacPorts one in /opt/local

2) the Anaconda one in /opt/miniconda3

3) the Fink one in /sw/

for the Fink I found

/sw/bin/perl5.12.4

which needs to be invoked under this name

there are repertories

/sw/lib/perl5/5.12.4 and /sw/lib/perl5/5.16.4

the MacPorts has

/opt/local/lib/perl5/5.24


$ env | grep PERL
PERL5LIB=/sw/lib/perl5:/sw/lib/perl5/darwin
ac_cv_path_INTLTOOL_PERL=/usr/bin/perl

in view of the above I tried

$ export PERL5LIB="/opt/local/lib/perl5"

$ tlmgr help

no success

then

$ export PERL5LIB="/opt/local/lib/perl5/5.24"

no success either

$ unset PERL5LIB

no success either

Right now I have reached the stage where I know that
"man perlrun" is where Perl env variables are documented,

thus now I think I only have to learn Perl and then report back ;-)

(be patient ... if I knew how to trace the binaries in use from
"tlmgr help" I would be better-armed)

Cheers

Jean-Fran?ois

> 2017-09-11 8:42 GMT+02:00 Norbert Preining <preining at logic.at>:
> Hi
> 
> > I must debug better on my side, as all I observed was that normal
> > behaviour for "tlmgr help" came from removing "/opt/local/bin" from
> > PATH.
> 
> I think you have a bit of a mess on your Mac ;-) Too many different
> installations of perl, mixed with old stuff and new stuff.
> (/opt/local/bin and /opt/miniconda3/ both are not standard perls
> is my impression).
> 
> > When I issue "man -d tlmgr" there is no difference
> > in output in both contexts, but this is possibly completely
> > irrelevant.
> 
> Well, in this case you are reading the pre-made tlmgr.1 man page,
> which might work because man uses its builtin or another groff.
> One cannot know on this Macs ;-)
> 
> Norbert
> 
> --
> PREINING Norbert                               http://www.preining.info
> Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
> GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
> 



From zdenek.wagner at gmail.com  Mon Sep 11 11:11:06 2017
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 11 Sep 2017 11:11:06 +0200
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <C7BEF2CF-5744-47E5-BCEE-CAF8887A3C2D@free.fr>
References: <201709102052.v8AKqLlG010782@freefriends.org>
 <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
 <15e6e11e4a0.274f.7132861acd90c364b5eb878c32bce117@gmail.com>
 <465DDF28-DF0E-4931-8832-47B90CAC0B6E@free.fr>
 <20170911064219.5pl3dxkcaup3wuww@burischnitzel.preining.info>
 <CAC1phyY1i517WrOX7eD1dkxQEY3sZwn9nNTGCpkBTvdh7U7r0Q@mail.gmail.com>
 <C7BEF2CF-5744-47E5-BCEE-CAF8887A3C2D@free.fr>
Message-ID: <CAC1phyZ0mPMWPrA0v0X-wCcHDQTAWE0R=xQvi+AujLsq7y4rTg@mail.gmail.com>

Hi,

you can try the following command from your prompt:

perl -e 'print join(":", @INC), "\n";'

It will show you where perl looks for the modules. You can also insert the
print command to the perl script but make sure, that the script does not
manipulate the @INC array after printing its contents.


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2017-09-11 10:12 GMT+02:00 jfbu <jfbu at free.fr>:

>
> Le 11 sept. 2017 ? 09:12, Zdenek Wagner <zdenek.wagner at gmail.com> a ?crit
> :
>
> > Hi,
> >
> > such I mess is not so unusual, I have it in linux too because several
> nonfree tools came with their own perl in nonstandard places. However, my
> standard perl does not see their files. The key point is the setting of
> PERL5LIB, it points to directories with my private additions, not to those
> nonstandard versions. It may happen that your incomplete installation sees
> files from another version which may cause problems. I would suggest to
> start with verification of environment settings, especially the variables
> related to perl.
>
> Hi Zdenek,
>
> it seems I have indeed a mess,
>
> $ which -a perl
> /opt/local/bin/perl
> /opt/miniconda3/bin/perl
> /usr/bin/perl
>
> $ which -a perldoc
> /opt/local/bin/perldoc
> /opt/miniconda3/bin/perldoc
> /usr/bin/perldoc
>
> $ echo $PERL5LIB
> /sw/lib/perl5:/sw/lib/perl5/darwin
>
> and the latter is a Fink location.
>
> Thus I have (at least) 3 user installs of Perl:
>
> 1) the MacPorts one in /opt/local
>
> 2) the Anaconda one in /opt/miniconda3
>
> 3) the Fink one in /sw/
>
> for the Fink I found
>
> /sw/bin/perl5.12.4
>
> which needs to be invoked under this name
>
> there are repertories
>
> /sw/lib/perl5/5.12.4 and /sw/lib/perl5/5.16.4
>
> the MacPorts has
>
> /opt/local/lib/perl5/5.24
>
>
> $ env | grep PERL
> PERL5LIB=/sw/lib/perl5:/sw/lib/perl5/darwin
> ac_cv_path_INTLTOOL_PERL=/usr/bin/perl
>
> in view of the above I tried
>
> $ export PERL5LIB="/opt/local/lib/perl5"
>
> $ tlmgr help
>
> no success
>
> then
>
> $ export PERL5LIB="/opt/local/lib/perl5/5.24"
>
> no success either
>
> $ unset PERL5LIB
>
> no success either
>
> Right now I have reached the stage where I know that
> "man perlrun" is where Perl env variables are documented,
>
> thus now I think I only have to learn Perl and then report back ;-)
>
> (be patient ... if I knew how to trace the binaries in use from
> "tlmgr help" I would be better-armed)
>
> Cheers
>
> Jean-Fran?ois
>
> > 2017-09-11 8:42 GMT+02:00 Norbert Preining <preining at logic.at>:
> > Hi
> >
> > > I must debug better on my side, as all I observed was that normal
> > > behaviour for "tlmgr help" came from removing "/opt/local/bin" from
> > > PATH.
> >
> > I think you have a bit of a mess on your Mac ;-) Too many different
> > installations of perl, mixed with old stuff and new stuff.
> > (/opt/local/bin and /opt/miniconda3/ both are not standard perls
> > is my impression).
> >
> > > When I issue "man -d tlmgr" there is no difference
> > > in output in both contexts, but this is possibly completely
> > > irrelevant.
> >
> > Well, in this case you are reading the pre-made tlmgr.1 man page,
> > which might work because man uses its builtin or another groff.
> > One cannot know on this Macs ;-)
> >
> > Norbert
> >
> > --
> > PREINING Norbert                               http://www.preining.info
> > Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
> > GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170911/c95297d2/attachment.html>

From jfbu at free.fr  Mon Sep 11 11:55:34 2017
From: jfbu at free.fr (jfbu)
Date: Mon, 11 Sep 2017 11:55:34 +0200
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <CAC1phyZ0mPMWPrA0v0X-wCcHDQTAWE0R=xQvi+AujLsq7y4rTg@mail.gmail.com>
References: <201709102052.v8AKqLlG010782@freefriends.org>
 <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
 <15e6e11e4a0.274f.7132861acd90c364b5eb878c32bce117@gmail.com>
 <465DDF28-DF0E-4931-8832-47B90CAC0B6E@free.fr>
 <20170911064219.5pl3dxkcaup3wuww@burischnitzel.preining.info>
 <CAC1phyY1i517WrOX7eD1dkxQEY3sZwn9nNTGCpkBTvdh7U7r0Q@mail.gmail.com>
 <C7BEF2CF-5744-47E5-BCEE-CAF8887A3C2D@free.fr>
 <CAC1phyZ0mPMWPrA0v0X-wCcHDQTAWE0R=xQvi+AujLsq7y4rTg@mail.gmail.com>
Message-ID: <9FAE8C90-FB20-4F27-BEA5-8FF40BBC5369@free.fr>

Hi Zdenek

Le 11 sept. 2017 ? 11:11, Zdenek Wagner <zdenek.wagner at gmail.com> a ?crit :

> Hi,
> 
> you can try the following command from your prompt:
> 
> perl -e 'print join(":", @INC), "\n";'
> 
> It will show you where perl looks for the modules. You can also insert the print command to the perl script but make sure, that the script does not manipulate the @INC array after printing its contents.


Thanks, 

I have inserted the print command at line 515 of TeXLive tlmgr.pl

and I did "unset PERL5LIB" in my Terminal environment to limit confusion

with "/opt/local/bin" in PATH, I get this

----
$ tlmgr help
/usr/local/texlive/2017/texmf-dist/scripts/texlive:/usr/local/texlive/2017/tlpkg:/opt/local/lib/perl5/site_perl/5.24/darwin-thread-multi-2level:/opt/local/lib/perl5/site_perl/5.24:/opt/local/lib/perl5/vendor_perl/5.24/darwin-thread-multi-2level:/opt/local/lib/perl5/vendor_perl/5.24:/opt/local/lib/perl5/5.24/darwin-thread-multi-2level:/opt/local/lib/perl5/5.24:. 
----

and badly highlighted help

By the way the repertories

/opt/local/lib/perl5/site_perl/5.24/darwin-thread-multi-2level
/opt/local/lib/perl5/site_perl/5.24
/opt/local/lib/perl5/vendor_perl/5.24/darwin-thread-multi-2level
/opt/local/lib/perl5/vendor_perl/5.24

do not exist but these two exist

/opt/local/lib/perl5/5.24/darwin-thread-multi-2level
/opt/local/lib/perl5/5.24

$ find /opt/local/lib/perl5/5.24 -name "Perldoc.pm"
/opt/local/lib/perl5/5.24/Pod/Perldoc.pm


The output above from 'print join(":", @INC), "\n";' does not seem to confirm
that the MacPorts installed Perl 5.24 is confused by other Perl installs


Without the "/opt/local/bin" in PATH

I get this

----
$ tlmgr help
/usr/local/texlive/2017/texmf-dist/scripts/texlive:/usr/local/texlive/2017/tlpkg:/opt/miniconda3/lib/perl5/site_perl/5.18.2/darwin-2level:/opt/miniconda3/lib/perl5/site_perl/5.18.2:/opt/miniconda3/lib/perl5/5.18.2/darwin-2level:/opt/miniconda3/lib/perl5/5.18.2:.
You have an old groff. Update to version 1.20.1 for good Unicode support.
If you don't upgrade, wide characters may come out oddly.

 at /opt/miniconda3/lib/perl5/5.18.2/Pod/Perldoc.pm line 1346.
You have an old groff. Update to version 1.20.1 for good Unicode support.
If you don't upgrade, wide characters may come out oddly.

 at /opt/miniconda3/lib/perl5/5.18.2/Pod/Perldoc.pm line 1346.

----

and correctly highlighted help contents.

$ find /opt/miniconda3/lib/perl5 -name "Perldoc.pm"
/opt/miniconda3/lib/perl5/5.18.2/Pod/Perldoc.pm


It seems I have only one groff

-----
$ which -a groff
/usr/bin/groff

[11:53:11] jfb at Ordinateur-Burnolien:~
~$ groff --version
GNU groff version 1.19.2
Copyright (C) 2004 Free Software Foundation, Inc.
GNU groff comes with ABSOLUTELY NO WARRANTY.
You may redistribute copies of groff and its subprograms
under the terms of the GNU General Public License.
For more information about these matters, see the file named COPYING.

called subprograms:

GNU grops (groff) version 1.19.2
GNU troff (groff) version 1.19.2
-----

Best

Jean-Fran?ois



> 
> 
> Zden?k Wagner
> http://ttsm.icpf.cas.cz/team/wagner.shtml
> http://icebearsoft.euweb.cz
> 
> 2017-09-11 10:12 GMT+02:00 jfbu <jfbu at free.fr>:
> 
> Le 11 sept. 2017 ? 09:12, Zdenek Wagner <zdenek.wagner at gmail.com> a ?crit :
> 
> > Hi,
> >
> > such I mess is not so unusual, I have it in linux too because several nonfree tools came with their own perl in nonstandard places. However, my standard perl does not see their files. The key point is the setting of PERL5LIB, it points to directories with my private additions, not to those nonstandard versions. It may happen that your incomplete installation sees files from another version which may cause problems. I would suggest to start with verification of environment settings, especially the variables related to perl.
> 
> Hi Zdenek,
> 
> it seems I have indeed a mess,
> 
> $ which -a perl
> /opt/local/bin/perl
> /opt/miniconda3/bin/perl
> /usr/bin/perl
> 
> $ which -a perldoc
> /opt/local/bin/perldoc
> /opt/miniconda3/bin/perldoc
> /usr/bin/perldoc
> 
> $ echo $PERL5LIB
> /sw/lib/perl5:/sw/lib/perl5/darwin
> 
> and the latter is a Fink location.
> 
> Thus I have (at least) 3 user installs of Perl:
> 
> 1) the MacPorts one in /opt/local
> 
> 2) the Anaconda one in /opt/miniconda3
> 
> 3) the Fink one in /sw/
> 
> for the Fink I found
> 
> /sw/bin/perl5.12.4
> 
> which needs to be invoked under this name
> 
> there are repertories
> 
> /sw/lib/perl5/5.12.4 and /sw/lib/perl5/5.16.4
> 
> the MacPorts has
> 
> /opt/local/lib/perl5/5.24
> 
> 
> $ env | grep PERL
> PERL5LIB=/sw/lib/perl5:/sw/lib/perl5/darwin
> ac_cv_path_INTLTOOL_PERL=/usr/bin/perl
> 
> in view of the above I tried
> 
> $ export PERL5LIB="/opt/local/lib/perl5"
> 
> $ tlmgr help
> 
> no success
> 
> then
> 
> $ export PERL5LIB="/opt/local/lib/perl5/5.24"
> 
> no success either
> 
> $ unset PERL5LIB
> 
> no success either
> 
> Right now I have reached the stage where I know that
> "man perlrun" is where Perl env variables are documented,
> 
> thus now I think I only have to learn Perl and then report back ;-)
> 
> (be patient ... if I knew how to trace the binaries in use from
> "tlmgr help" I would be better-armed)
> 
> Cheers
> 
> Jean-Fran?ois
> 
> > 2017-09-11 8:42 GMT+02:00 Norbert Preining <preining at logic.at>:
> > Hi
> >
> > > I must debug better on my side, as all I observed was that normal
> > > behaviour for "tlmgr help" came from removing "/opt/local/bin" from
> > > PATH.
> >
> > I think you have a bit of a mess on your Mac ;-) Too many different
> > installations of perl, mixed with old stuff and new stuff.
> > (/opt/local/bin and /opt/miniconda3/ both are not standard perls
> > is my impression).
> >
> > > When I issue "man -d tlmgr" there is no difference
> > > in output in both contexts, but this is possibly completely
> > > irrelevant.
> >
> > Well, in this case you are reading the pre-made tlmgr.1 man page,
> > which might work because man uses its builtin or another groff.
> > One cannot know on this Macs ;-)
> >
> > Norbert
> >
> > --
> > PREINING Norbert                               http://www.preining.info
> > Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
> > GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13
> >
> 
> 
> 



From jfbu at free.fr  Mon Sep 11 12:40:11 2017
From: jfbu at free.fr (jfbu)
Date: Mon, 11 Sep 2017 12:40:11 +0200
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <9FAE8C90-FB20-4F27-BEA5-8FF40BBC5369@free.fr>
References: <201709102052.v8AKqLlG010782@freefriends.org>
 <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
 <15e6e11e4a0.274f.7132861acd90c364b5eb878c32bce117@gmail.com>
 <465DDF28-DF0E-4931-8832-47B90CAC0B6E@free.fr>
 <20170911064219.5pl3dxkcaup3wuww@burischnitzel.preining.info>
 <CAC1phyY1i517WrOX7eD1dkxQEY3sZwn9nNTGCpkBTvdh7U7r0Q@mail.gmail.com>
 <C7BEF2CF-5744-47E5-BCEE-CAF8887A3C2D@free.fr>
 <CAC1phyZ0mPMWPrA0v0X-wCcHDQTAWE0R=xQvi+AujLsq7y4rTg@mail.gmail.com>
 <9FAE8C90-FB20-4F27-BEA5-8FF40BBC5369@free.fr>
Message-ID: <E83F5E20-35AD-41FC-9F7F-99F7D5258FBE@free.fr>


Le 11 sept. 2017 ? 11:55, jfbu <jfbu at free.fr> a ?crit :

> Hi Zdenek
> 
> Le 11 sept. 2017 ? 11:11, Zdenek Wagner <zdenek.wagner at gmail.com> a ?crit :
> 
>> Hi,
>> 
>> you can try the following command from your prompt:
>> 
>> perl -e 'print join(":", @INC), "\n";'
>> 
>> It will show you where perl looks for the modules. You can also insert the print command to the perl script but make sure, that the script does not manipulate the @INC array after printing its contents.
> 
> 
> Thanks, 
> 
> I have inserted the print command at line 515 of TeXLive tlmgr.pl
> 
> and I did "unset PERL5LIB" in my Terminal environment to limit confusion
> 
> with "/opt/local/bin" in PATH, I get this
> 
> ----
> $ tlmgr help
> /usr/local/texlive/2017/texmf-dist/scripts/texlive:/usr/local/texlive/2017/tlpkg:/opt/local/lib/perl5/site_perl/5.24/darwin-thread-multi-2level:/opt/local/lib/perl5/site_perl/5.24:/opt/local/lib/perl5/vendor_perl/5.24/darwin-thread-multi-2level:/opt/local/lib/perl5/vendor_perl/5.24:/opt/local/lib/perl5/5.24/darwin-thread-multi-2level:/opt/local/lib/perl5/5.24:. 
> ----
> 
> and badly highlighted help
> 
> By the way the repertories
> 
> /opt/local/lib/perl5/site_perl/5.24/darwin-thread-multi-2level
> /opt/local/lib/perl5/site_perl/5.24
> /opt/local/lib/perl5/vendor_perl/5.24/darwin-thread-multi-2level
> /opt/local/lib/perl5/vendor_perl/5.24
> 
> do not exist but these two exist
> 
> /opt/local/lib/perl5/5.24/darwin-thread-multi-2level
> /opt/local/lib/perl5/5.24
> 
> $ find /opt/local/lib/perl5/5.24 -name "Perldoc.pm"
> /opt/local/lib/perl5/5.24/Pod/Perldoc.pm
> 
> 
> The output above from 'print join(":", @INC), "\n";' does not seem to confirm
> that the MacPorts installed Perl 5.24 is confused by other Perl installs


I can also issue directly (without changing anything to PATH)

$ /opt/miniconda3/bin/pod2usage -verbose 2 /usr/local/texlive/2017/texmf-dist/scripts/texlive/tlmgr.pl

and this gives the expected highlighted output

but

$ pod2usage -verbose 2 /usr/local/texlive/2017/texmf-dist/scripts/texlive/tlmgr.pl

gives non-highlighted output (with 1NAME1 etc...)

And

$ /usr/bin/pod2usage -verbose 2 /usr/local/texlive/2017/texmf-dist/scripts/texlive/tlmgr.pl

does produce correct output


Best

Jean-Fran?ois



From jfbu at free.fr  Mon Sep 11 14:25:10 2017
From: jfbu at free.fr (jfbu)
Date: Mon, 11 Sep 2017 14:25:10 +0200
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <E83F5E20-35AD-41FC-9F7F-99F7D5258FBE@free.fr>
References: <201709102052.v8AKqLlG010782@freefriends.org>
 <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
 <15e6e11e4a0.274f.7132861acd90c364b5eb878c32bce117@gmail.com>
 <465DDF28-DF0E-4931-8832-47B90CAC0B6E@free.fr>
 <20170911064219.5pl3dxkcaup3wuww@burischnitzel.preining.info>
 <CAC1phyY1i517WrOX7eD1dkxQEY3sZwn9nNTGCpkBTvdh7U7r0Q@mail.gmail.com>
 <C7BEF2CF-5744-47E5-BCEE-CAF8887A3C2D@free.fr>
 <CAC1phyZ0mPMWPrA0v0X-wCcHDQTAWE0R=xQvi+AujLsq7y4rTg@mail.gmail.com>
 <9FAE8C90-FB20-4F27-BEA5-8FF40BBC5369@free.fr>
 <E83F5E20-35AD-41FC-9F7F-99F7D5258FBE@free.fr>
Message-ID: <0C061DE7-EC5B-44E7-BFEA-2C9786707468@free.fr>


Le 11 sept. 2017 ? 12:40, jfbu <jfbu at free.fr> a ?crit :

> 
> Le 11 sept. 2017 ? 11:55, jfbu <jfbu at free.fr> a ?crit :
> 
>> Hi Zdenek
>> 
>> Le 11 sept. 2017 ? 11:11, Zdenek Wagner <zdenek.wagner at gmail.com> a ?crit :
>> 
>>> Hi,
>>> 
>>> you can try the following command from your prompt:
>>> 
>>> perl -e 'print join(":", @INC), "\n";'
>>> 
>>> It will show you where perl looks for the modules. You can also insert the print command to the perl script but make sure, that the script does not manipulate the @INC array after printing its contents.
>> 
>> 
>> Thanks, 
>> 
>> I have inserted the print command at line 515 of TeXLive tlmgr.pl
>> 
>> and I did "unset PERL5LIB" in my Terminal environment to limit confusion
>> 
>> with "/opt/local/bin" in PATH, I get this
>> 
>> ----
>> $ tlmgr help
>> /usr/local/texlive/2017/texmf-dist/scripts/texlive:/usr/local/texlive/2017/tlpkg:/opt/local/lib/perl5/site_perl/5.24/darwin-thread-multi-2level:/opt/local/lib/perl5/site_perl/5.24:/opt/local/lib/perl5/vendor_perl/5.24/darwin-thread-multi-2level:/opt/local/lib/perl5/vendor_perl/5.24:/opt/local/lib/perl5/5.24/darwin-thread-multi-2level:/opt/local/lib/perl5/5.24:. 
>> ----
>> 
>> and badly highlighted help
>> 
>> By the way the repertories
>> 
>> /opt/local/lib/perl5/site_perl/5.24/darwin-thread-multi-2level
>> /opt/local/lib/perl5/site_perl/5.24
>> /opt/local/lib/perl5/vendor_perl/5.24/darwin-thread-multi-2level
>> /opt/local/lib/perl5/vendor_perl/5.24
>> 
>> do not exist but these two exist
>> 
>> /opt/local/lib/perl5/5.24/darwin-thread-multi-2level
>> /opt/local/lib/perl5/5.24
>> 
>> $ find /opt/local/lib/perl5/5.24 -name "Perldoc.pm"
>> /opt/local/lib/perl5/5.24/Pod/Perldoc.pm
>> 
>> 
>> The output above from 'print join(":", @INC), "\n";' does not seem to confirm
>> that the MacPorts installed Perl 5.24 is confused by other Perl installs
> 
> 
> I can also issue directly (without changing anything to PATH)
> 
> $ /opt/miniconda3/bin/pod2usage -verbose 2 /usr/local/texlive/2017/texmf-dist/scripts/texlive/tlmgr.pl
> 
> and this gives the expected highlighted output
> 
> but
> 
> $ pod2usage -verbose 2 /usr/local/texlive/2017/texmf-dist/scripts/texlive/tlmgr.pl
> 
> gives non-highlighted output (with 1NAME1 etc...)
> 
> And
> 
> $ /usr/bin/pod2usage -verbose 2 /usr/local/texlive/2017/texmf-dist/scripts/texlive/tlmgr.pl
> 
> does produce correct output
> 
> 



And 

$ pod2text -c /usr/local/texlive/2017/texmf-dist/scripts/texlive/tlmgr.pl | less -R

gives nice coloured output

in fact compared to "man tlmgr", what is underlined in the latter appears
coloured in the former, so the output from using

$ pod2text -c /usr/local/texlive/2017/texmf-dist/scripts/texlive/tlmgr.pl | less -R

is even fancier than the one from

$ man tlmgr 

or 

$ /opt/miniconda3/bin/pod2usage -verbose 2 /usr/local/texlive/2017/texmf-dist/scripts/texlive/tlmgr.pl

the latter two being equivalent

Thus "pod2text" looks OK, but "pod2usage" possibly has a problem
in the Perl 5.24 I got from MacPorts

Using pod2text or the  /opt/miniconda3/bin/pod2text produce both same or similar
output contrarily to what happens with pod2usage

$ which -a pod2text
/opt/local/bin/pod2text
/opt/miniconda3/bin/pod2text
/usr/bin/pod2text

Best,

Jean-Fran?ois




From jfbu at free.fr  Mon Sep 11 17:18:59 2017
From: jfbu at free.fr (jfbu)
Date: Mon, 11 Sep 2017 17:18:59 +0200
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <0C061DE7-EC5B-44E7-BFEA-2C9786707468@free.fr>
References: <201709102052.v8AKqLlG010782@freefriends.org>
 <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
 <15e6e11e4a0.274f.7132861acd90c364b5eb878c32bce117@gmail.com>
 <465DDF28-DF0E-4931-8832-47B90CAC0B6E@free.fr>
 <20170911064219.5pl3dxkcaup3wuww@burischnitzel.preining.info>
 <CAC1phyY1i517WrOX7eD1dkxQEY3sZwn9nNTGCpkBTvdh7U7r0Q@mail.gmail.com>
 <C7BEF2CF-5744-47E5-BCEE-CAF8887A3C2D@free.fr>
 <CAC1phyZ0mPMWPrA0v0X-wCcHDQTAWE0R=xQvi+AujLsq7y4rTg@mail.gmail.com>
 <9FAE8C90-FB20-4F27-BEA5-8FF40BBC5369@free.fr>
 <E83F5E20-35AD-41FC-9F7F-99F7D5258FBE@free.fr>
 <0C061DE7-EC5B-44E7-BFEA-2C9786707468@free.fr>
Message-ID: <4F82C853-7E92-4894-9C94-EC8400F3E56E@free.fr>


Le 11 sept. 2017 ? 14:25, jfbu <jfbu at free.fr> a ?crit :

> Thus "pod2text" looks OK, but "pod2usage" possibly has a problem
> in the Perl 5.24 I got from MacPorts

Hi,

I was communicated off-list some info with confirmation that
there is some specific issue with the Perl 5.24 from MacPorts

I can't understand the details but to recapitulate my further experiments:

$ perldoc perldoc

gives bad result

but

$ perldoc -oman perldoc

gives ok result

and also

$ perldoc -M Pod::Perldoc::ToMan perldoc

gives ok result

and also

$ perldoc -M Pod::Perldoc::ToText perldoc

produces ok result (without colours nor bold face)

If I remove from PATH visibility of the MacPorts Perl
I obtain OK result already from

$ perldoc perldoc

without further ado or tinkering

Although surely quite unrelated, let me mention too that from

-----
$ man perldoc
-----

I get

-----
NAME
       perldoc - Look up Perl documentation in Pod format.

SYNOPSIS
           B<perldoc> [B<-h>] [B<-D>] [B<-t>] [B<-u>] [B<-m>] [B<-l>] [B<-F>]
               [B<-i>] [B<-V>] [B<-T>] [B<-r>]
               [B<-dI<destination_file>>]
               [B<-oI<formatname>>]

....
-----

note the extra formatting "B<foo>" but following pages appear OK

The same is produced from a "man perldoc" with PATH including
the /opt/local/bin

Best,

Jean-Fran?ois







From zdenek.wagner at gmail.com  Mon Sep 11 21:22:58 2017
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 11 Sep 2017 21:22:58 +0200
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <4F82C853-7E92-4894-9C94-EC8400F3E56E@free.fr>
References: <201709102052.v8AKqLlG010782@freefriends.org>
 <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
 <15e6e11e4a0.274f.7132861acd90c364b5eb878c32bce117@gmail.com>
 <465DDF28-DF0E-4931-8832-47B90CAC0B6E@free.fr>
 <20170911064219.5pl3dxkcaup3wuww@burischnitzel.preining.info>
 <CAC1phyY1i517WrOX7eD1dkxQEY3sZwn9nNTGCpkBTvdh7U7r0Q@mail.gmail.com>
 <C7BEF2CF-5744-47E5-BCEE-CAF8887A3C2D@free.fr>
 <CAC1phyZ0mPMWPrA0v0X-wCcHDQTAWE0R=xQvi+AujLsq7y4rTg@mail.gmail.com>
 <9FAE8C90-FB20-4F27-BEA5-8FF40BBC5369@free.fr>
 <E83F5E20-35AD-41FC-9F7F-99F7D5258FBE@free.fr>
 <0C061DE7-EC5B-44E7-BFEA-2C9786707468@free.fr>
 <4F82C853-7E92-4894-9C94-EC8400F3E56E@free.fr>
Message-ID: <CAC1phyYe3TWB132zPT_+M5fryp-qrBnRxX82EQVs0OqhrfM_Bw@mail.gmail.com>

I can confirm that perldoc perldoc behaves strangely om Mac but perldoc
-oman perldoc works. I have perl in /opt/local/bin/perl but port info perl
complains that perl does not exist. I do not remember how it was installed.
When I tried perldoc -oman perldoc for the first time I got this message:

$ perldoc -oman perldoc

You have an old groff. Update to version 1.20.1 for good Unicode support.

If you don't upgrade, wide characters may come out oddly.

 at /opt/local/lib/perl5/5.24/Pod/Perldoc.pm line 1513.

You have an old groff. Update to version 1.20.1 for good Unicode support.

If you don't upgrade, wide characters may come out oddly.

 at /opt/local/lib/perl5/5.24/Pod/Perldoc.pm line 1513.


I do not know the source of my groff but it was not from MacPorts. After
port install groff this message disapeared but behaviour is the same, -oman
is still needed.



Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2017-09-11 17:18 GMT+02:00 jfbu <jfbu at free.fr>:

>
> Le 11 sept. 2017 ? 14:25, jfbu <jfbu at free.fr> a ?crit :
>
> > Thus "pod2text" looks OK, but "pod2usage" possibly has a problem
> > in the Perl 5.24 I got from MacPorts
>
> Hi,
>
> I was communicated off-list some info with confirmation that
> there is some specific issue with the Perl 5.24 from MacPorts
>
> I can't understand the details but to recapitulate my further experiments:
>
> $ perldoc perldoc
>
> gives bad result
>
> but
>
> $ perldoc -oman perldoc
>
> gives ok result
>
> and also
>
> $ perldoc -M Pod::Perldoc::ToMan perldoc
>
> gives ok result
>
> and also
>
> $ perldoc -M Pod::Perldoc::ToText perldoc
>
> produces ok result (without colours nor bold face)
>
> If I remove from PATH visibility of the MacPorts Perl
> I obtain OK result already from
>
> $ perldoc perldoc
>
> without further ado or tinkering
>
> Although surely quite unrelated, let me mention too that from
>
> -----
> $ man perldoc
> -----
>
> I get
>
> -----
> NAME
>        perldoc - Look up Perl documentation in Pod format.
>
> SYNOPSIS
>            B<perldoc> [B<-h>] [B<-D>] [B<-t>] [B<-u>] [B<-m>] [B<-l>]
> [B<-F>]
>                [B<-i>] [B<-V>] [B<-T>] [B<-r>]
>                [B<-dI<destination_file>>]
>                [B<-oI<formatname>>]
>
> ....
> -----
>
> note the extra formatting "B<foo>" but following pages appear OK
>
> The same is produced from a "man perldoc" with PATH including
> the /opt/local/bin
>
> Best,
>
> Jean-Fran?ois
>
>
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170911/ff84ec00/attachment.html>

From tljack at forallx.net  Tue Sep 12 01:49:16 2017
From: tljack at forallx.net (jack)
Date: Mon, 11 Sep 2017 17:49:16 -0600
Subject: [tex-live] `tlmgr info` is now broken when pointed at a nonexistent
	package
Message-ID: <e1a4d0cebbb3bba75d35cc7350afa9a5.squirrel@box386.bluehost.com>

Doing `tlmgr info foo`, where "foo" is a nonexistent package name, used to
result in this:

------------------
tlmgr: cannot find package foo, searching for other matches:

Packages containing `foo' in their title/description:

Packages containing files matching `foo':
------------------

But now it results in this: "Can't call method "get_package" on an
undefined value at /Users/gmn/.barn/texbin/tlmgr line 3719."

This is on macOS 10.12.6.

Also, I tried `tlmgr info beilstein` and got the above error, even though
my --repository is local and contains both:
  tlnet/archive/beilstein.source.tar.xz
  tlnet/archive/beilstein.tar.xz

-jack


From tljack at forallx.net  Tue Sep 12 01:54:59 2017
From: tljack at forallx.net (jack)
Date: Mon, 11 Sep 2017 17:54:59 -0600
Subject: [tex-live] `tlmgr info` is now broken when pointed at a
 nonexistent package
In-Reply-To: <e1a4d0cebbb3bba75d35cc7350afa9a5.squirrel@box386.bluehost.com>
References: <e1a4d0cebbb3bba75d35cc7350afa9a5.squirrel@box386.bluehost.com>
Message-ID: <2cea67de42fc1f68732fe934662aae19.squirrel@box386.bluehost.com>

I should add that this behavior began approximately one month ago.  I know
this because my tl2017 installation is under git control, so I walked it
back to the last properly-functioning commit.

-Jack


From preining at logic.at  Tue Sep 12 02:48:31 2017
From: preining at logic.at (Norbert Preining)
Date: Tue, 12 Sep 2017 09:48:31 +0900
Subject: [tex-live] `tlmgr info` is now broken when pointed at a
 nonexistent package
In-Reply-To: <e1a4d0cebbb3bba75d35cc7350afa9a5.squirrel@box386.bluehost.com>
References: <e1a4d0cebbb3bba75d35cc7350afa9a5.squirrel@box386.bluehost.com>
Message-ID: <20170912004831.2lzbnl47iebj4ffy@burischnitzel.preining.info>

Hi

> But now it results in this: "Can't call method "get_package" on an
> undefined value at /Users/gmn/.barn/texbin/tlmgr line 3719."

Indeed, thanks for the report. I rewrote the info action to support
csv listing and selectable infos, and somehow that was broken.

Fixed in svn for now, if you want to try, get the latest tlmgr.pl
from svn.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From watasenia at gmail.com  Tue Sep 12 09:40:34 2017
From: watasenia at gmail.com (Kilu von Prince)
Date: Tue, 12 Sep 2017 09:40:34 +0200
Subject: [tex-live] Trouble with pstricks and related packages under XeTeX,
	OS X 10
Message-ID: <CAK3VzUmYJ_OdvY8pWHhGAaQJtftNEH3Fmsw6VjbwUctzt4HRMA@mail.gmail.com>

I only recently installed the 2017 distribution of TeX Live and now
node connections in pstricks and related packages are no longer
displayed. I compile with XeLaTeX, under OS X 10. I'm attaching a
sample file with a xyling tree and the corresponding pdf.

Best,
Kilu
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.tex
Type: application/x-tex
Size: 106 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20170912/12d82197/attachment.tex>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.pdf
Type: application/pdf
Size: 2772 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20170912/12d82197/attachment.pdf>

From daleif at math.au.dk  Tue Sep 12 14:52:26 2017
From: daleif at math.au.dk (Lars Madsen)
Date: Tue, 12 Sep 2017 12:52:26 +0000
Subject: [tex-live] Trouble with pstricks and related packages under
 XeTeX, OS X 10
In-Reply-To: <CAK3VzUmYJ_OdvY8pWHhGAaQJtftNEH3Fmsw6VjbwUctzt4HRMA@mail.gmail.com>
References: <CAK3VzUmYJ_OdvY8pWHhGAaQJtftNEH3Fmsw6VjbwUctzt4HRMA@mail.gmail.com>
Message-ID: <1505220747879.8312@math.au.dk>

if you look directly at xyling.sty you'll see that it loads xy via

\RequirePackage[color,all,dvips]{xy}

aka it explictly requires dvips, which is not used by xelatex.

Interestingly it does not compile with latex+dvips either.


BTW: have you considered using a Tikz based approach instead?




/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at math / More information: http://au.dk/en/daleif at math


________________________________________
From: tex-live <tex-live-bounces at tug.org> on behalf of Kilu von Prince <watasenia at gmail.com>
Sent: 12 September 2017 09:40
To: tex-live at tug.org
Subject: [tex-live] Trouble with pstricks and related packages under XeTeX,     OS X 10

I only recently installed the 2017 distribution of TeX Live and now
node connections in pstricks and related packages are no longer
displayed. I compile with XeLaTeX, under OS X 10. I'm attaching a
sample file with a xyling tree and the corresponding pdf.

Best,
Kilu


From watasenia at gmail.com  Tue Sep 12 15:12:58 2017
From: watasenia at gmail.com (Kilu von Prince)
Date: Tue, 12 Sep 2017 15:12:58 +0200
Subject: [tex-live] Trouble with pstricks and related packages under
 XeTeX, OS X 10
In-Reply-To: <1505220747879.8312@math.au.dk>
References: <CAK3VzUmYJ_OdvY8pWHhGAaQJtftNEH3Fmsw6VjbwUctzt4HRMA@mail.gmail.com>
 <1505220747879.8312@math.au.dk>
Message-ID: <CAK3VzUnMrQYc3d47xWmJGnhgr8-6-gEU_Nv92n4sstY0j1EdWA@mail.gmail.com>

Thank you Lars,
I know that xyling calls dvips, but you can delete that option and
compile with xelatex, and this used to work for me, but no longer
does. However, I just discovered that the problem doesn't appear to be
specific to the new TeX Live distribution. In playing around, I found
that the same xyling/ pstricks code with the same compiler sometimes
does display lines and sometimes doesn't, depending on what other
packages I've loaded. Very strange. I have a visceral dislike for Tikz
code and just found a setting that displays pstricks trees, so I'll
stick with that for the time being.

Best,
Kilu

On Tue, Sep 12, 2017 at 2:52 PM, Lars Madsen <daleif at math.au.dk> wrote:
> if you look directly at xyling.sty you'll see that it loads xy via
>
> \RequirePackage[color,all,dvips]{xy}
>
> aka it explictly requires dvips, which is not used by xelatex.
>
> Interestingly it does not compile with latex+dvips either.
>
>
> BTW: have you considered using a Tikz based approach instead?
>
>
>
>
> /Lars Madsen
> Institut for Matematik / Department of Mathematics
> Aarhus Universitet / Aarhus University
> Mere info: http://au.dk/daleif at math / More information: http://au.dk/en/daleif at math
>
>
> ________________________________________
> From: tex-live <tex-live-bounces at tug.org> on behalf of Kilu von Prince <watasenia at gmail.com>
> Sent: 12 September 2017 09:40
> To: tex-live at tug.org
> Subject: [tex-live] Trouble with pstricks and related packages under XeTeX,     OS X 10
>
> I only recently installed the 2017 distribution of TeX Live and now
> node connections in pstricks and related packages are no longer
> displayed. I compile with XeLaTeX, under OS X 10. I'm attaching a
> sample file with a xyling tree and the corresponding pdf.
>
> Best,
> Kilu

From daleif at math.au.dk  Tue Sep 12 15:37:50 2017
From: daleif at math.au.dk (Lars Madsen)
Date: Tue, 12 Sep 2017 13:37:50 +0000
Subject: [tex-live] Trouble with pstricks and related packages under
 XeTeX, OS X 10
In-Reply-To: <CAK3VzUnMrQYc3d47xWmJGnhgr8-6-gEU_Nv92n4sstY0j1EdWA@mail.gmail.com>
References: <CAK3VzUmYJ_OdvY8pWHhGAaQJtftNEH3Fmsw6VjbwUctzt4HRMA@mail.gmail.com>
 <1505220747879.8312@math.au.dk>,
 <CAK3VzUnMrQYc3d47xWmJGnhgr8-6-gEU_Nv92n4sstY0j1EdWA@mail.gmail.com>
Message-ID: <1505223471915.92937@math.au.dk>

Not sure if Herbert Schulz' reply came to the list as well

This draws as it should

\documentclass{article}
\usepackage{xyling}
\begin{document}
\Tree{ &\K{top} \B{dl} \\
\K{bottom}
}
\end{document}

with latex+dvips on TL2017


/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at math / More information: http://au.dk/en/daleif at math


________________________________________
From: Kilu von Prince <watasenia at gmail.com>
Sent: 12 September 2017 15:12
To: Lars Madsen
Cc: tex-live at tug.org
Subject: Re: [tex-live] Trouble with pstricks and related packages under XeTeX, OS X 10

Thank you Lars,
I know that xyling calls dvips, but you can delete that option and
compile with xelatex, and this used to work for me, but no longer
does. However, I just discovered that the problem doesn't appear to be
specific to the new TeX Live distribution. In playing around, I found
that the same xyling/ pstricks code with the same compiler sometimes
does display lines and sometimes doesn't, depending on what other
packages I've loaded. Very strange. I have a visceral dislike for Tikz
code and just found a setting that displays pstricks trees, so I'll
stick with that for the time being.

Best,
Kilu

On Tue, Sep 12, 2017 at 2:52 PM, Lars Madsen <daleif at math.au.dk> wrote:
> if you look directly at xyling.sty you'll see that it loads xy via
>
> \RequirePackage[color,all,dvips]{xy}
>
> aka it explictly requires dvips, which is not used by xelatex.
>
> Interestingly it does not compile with latex+dvips either.
>
>
> BTW: have you considered using a Tikz based approach instead?
>
>
>
>
> /Lars Madsen
> Institut for Matematik / Department of Mathematics
> Aarhus Universitet / Aarhus University
> Mere info: http://au.dk/daleif at math / More information: http://au.dk/en/daleif at math
>
>
> ________________________________________
> From: tex-live <tex-live-bounces at tug.org> on behalf of Kilu von Prince <watasenia at gmail.com>
> Sent: 12 September 2017 09:40
> To: tex-live at tug.org
> Subject: [tex-live] Trouble with pstricks and related packages under XeTeX,     OS X 10
>
> I only recently installed the 2017 distribution of TeX Live and now
> node connections in pstricks and related packages are no longer
> displayed. I compile with XeLaTeX, under OS X 10. I'm attaching a
> sample file with a xyling tree and the corresponding pdf.
>
> Best,
> Kilu


From Herbert.Voss at FU-Berlin.DE  Tue Sep 12 15:47:21 2017
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Tue, 12 Sep 2017 15:47:21 +0200
Subject: [tex-live] Trouble with pstricks and related packages under
 XeTeX, OS X 10
In-Reply-To: <CAK3VzUnMrQYc3d47xWmJGnhgr8-6-gEU_Nv92n4sstY0j1EdWA@mail.gmail.com>
References: <CAK3VzUmYJ_OdvY8pWHhGAaQJtftNEH3Fmsw6VjbwUctzt4HRMA@mail.gmail.com>
 <1505220747879.8312@math.au.dk>
 <CAK3VzUnMrQYc3d47xWmJGnhgr8-6-gEU_Nv92n4sstY0j1EdWA@mail.gmail.com>
Message-ID: <50654.87.144.110.81.1505224041.webmail@webmail.zedat.fu-berlin.de>


Kilu von Prince schrieb:

> I know that xyling calls dvips, but you can delete that option and
> compile with xelatex, and this used to work for me, but no longer
> does. However, I just discovered that the problem doesn't appear to be
> specific to the new TeX Live distribution. In playing around, I found
> that the same xyling/ pstricks code with the same compiler sometimes

It has nothing to o with PSTricks and your example already draws
only the labels. For a line you need one more command.

Herbert


> does display lines and sometimes doesn't, depending on what other
> packages I've loaded. Very strange. I have a visceral dislike for Tikz
> code and just found a setting that displays pstricks trees, so I'll
> stick with that for the time being.
>
> Best,
> Kilu
>
> On Tue, Sep 12, 2017 at 2:52 PM, Lars Madsen <daleif at math.au.dk> wrote:
>> if you look directly at xyling.sty you'll see that it loads xy via
>>
>> \RequirePackage[color,all,dvips]{xy}
>>
>> aka it explictly requires dvips, which is not used by xelatex.
>>
>> Interestingly it does not compile with latex+dvips either.
>>
>>
>> BTW: have you considered using a Tikz based approach instead?
>>
>>
>>
>>
>> /Lars Madsen
>> Institut for Matematik / Department of Mathematics
>> Aarhus Universitet / Aarhus University
>> Mere info: http://au.dk/daleif at math / More information:
>> http://au.dk/en/daleif at math
>>
>>
>> ________________________________________
>> From: tex-live <tex-live-bounces at tug.org> on behalf of Kilu von Prince
>> <watasenia at gmail.com>
>> Sent: 12 September 2017 09:40
>> To: tex-live at tug.org
>> Subject: [tex-live] Trouble with pstricks and related packages under
>> XeTeX,     OS X 10
>>
>> I only recently installed the 2017 distribution of TeX Live and now
>> node connections in pstricks and related packages are no longer
>> displayed. I compile with XeLaTeX, under OS X 10. I'm attaching a
>> sample file with a xyling tree and the corresponding pdf.
>>
>> Best,
>> Kilu
>





From herbs at wideopenwest.com  Tue Sep 12 18:29:32 2017
From: herbs at wideopenwest.com (Herbert Schulz)
Date: Tue, 12 Sep 2017 11:29:32 -0500
Subject: [tex-live] Trouble with pstricks and related packages under
 XeTeX, OS X 10
In-Reply-To: <1505223471915.92937@math.au.dk>
References: <CAK3VzUmYJ_OdvY8pWHhGAaQJtftNEH3Fmsw6VjbwUctzt4HRMA@mail.gmail.com>
 <1505220747879.8312@math.au.dk>
 <CAK3VzUnMrQYc3d47xWmJGnhgr8-6-gEU_Nv92n4sstY0j1EdWA@mail.gmail.com>
 <1505223471915.92937@math.au.dk>
Message-ID: <A64B6922-FF91-47A3-8AA9-635F4E5FD049@wideopenwest.com>


> On Sep 12, 2017, at 8:37 AM, Lars Madsen <daleif at math.au.dk> wrote:
> 
> Not sure if Herbert Schulz' reply came to the list as well
> 
> This draws as it should
> 
> \documentclass{article}
> \usepackage{xyling}
> \begin{document}
> \Tree{ &\K{top} \B{dl} \\
> \K{bottom}
> }
> \end{document}
> 
> with latex+dvips on TL2017
> 
> 
> /Lars Madsen
> Institut for Matematik / Department of Mathematics
> Aarhus Universitet / Aarhus University
> Mere info: http://au.dk/daleif at math / More information: http://au.dk/en/daleif at math
> 
> 
> ________________________________________
> From: Kilu von Prince <watasenia at gmail.com>
> Sent: 12 September 2017 15:12
> To: Lars Madsen
> Cc: tex-live at tug.org
> Subject: Re: [tex-live] Trouble with pstricks and related packages under XeTeX, OS X 10
> 
> Thank you Lars,
> I know that xyling calls dvips, but you can delete that option and
> compile with xelatex, and this used to work for me, but no longer
> does. However, I just discovered that the problem doesn't appear to be
> specific to the new TeX Live distribution. In playing around, I found
> that the same xyling/ pstricks code with the same compiler sometimes
> does display lines and sometimes doesn't, depending on what other
> packages I've loaded. Very strange. I have a visceral dislike for Tikz
> code and just found a setting that displays pstricks trees, so I'll
> stick with that for the time being.
> 
> Best,
> Kilu
> 
> On Tue, Sep 12, 2017 at 2:52 PM, Lars Madsen <daleif at math.au.dk> wrote:
>> if you look directly at xyling.sty you'll see that it loads xy via
>> 
>> \RequirePackage[color,all,dvips]{xy}
>> 
>> aka it explictly requires dvips, which is not used by xelatex.
>> 
>> Interestingly it does not compile with latex+dvips either.
>> 
>> 
>> BTW: have you considered using a Tikz based approach instead?
>> 
>> 
>> 
>> 
>> /Lars Madsen
>> Institut for Matematik / Department of Mathematics
>> Aarhus Universitet / Aarhus University
>> Mere info: http://au.dk/daleif at math / More information: http://au.dk/en/daleif at math
>> 
>> 
>> ________________________________________
>> From: tex-live <tex-live-bounces at tug.org> on behalf of Kilu von Prince <watasenia at gmail.com>
>> Sent: 12 September 2017 09:40
>> To: tex-live at tug.org
>> Subject: [tex-live] Trouble with pstricks and related packages under XeTeX,     OS X 10
>> 
>> I only recently installed the 2017 distribution of TeX Live and now
>> node connections in pstricks and related packages are no longer
>> displayed. I compile with XeLaTeX, under OS X 10. I'm attaching a
>> sample file with a xyling tree and the corresponding pdf.
>> 
>> Best,
>> Kilu
> 

Howdy,

And, if you remove the dvips requirement in xyling.sty it compiles fine with xelatex too.

Good Luck,

Herb Schulz
(herbs at wideopenwest dot com)



From jonas.witschel at tu-ilmenau.de  Tue Sep 12 18:13:28 2017
From: jonas.witschel at tu-ilmenau.de (Jonas Witschel)
Date: Tue, 12 Sep 2017 18:13:28 +0200
Subject: [tex-live] TeX Live repository currently unsigned
Message-ID: <004f5750-6d3c-e61c-4ff9-761d3ad0655d@tu-ilmenau.de>

Hi,

currently there seems to be a problem with the PGP signature of the main
TeX Live repository: running

tlmgr update --list --repository
"http://dante.ctan.org/tex-archive/systems/texlive/tlnet"

(using the root node here only to verify that it is not a problem with
my mirror) returns

tlmgr: package repository
http://dante.ctan.org/tex-archive/systems/texlive/tlnet (not verified:
not signed)

Indeed the signature of the TeX Live database
(http://mirror.ctan.org/tex-archive/systems/texlive/tlnet/tlpkg/texlive.tlpdb.sha512.asc)
appears to be missing, judging by some older mirrors since yesterday
(September 11).

While I suspect this might be an issue with the TeX Live build system
that can be fixed soon, this actually shows the deeper problem that
tlmgr would happily update from the unsigned repository with the default
configuration. This means all an adversary needed to do in order to
install arbitrary updates would be to make sure that the signature of
the database cannot be accessed, provided that the user does not
carefully check the output of "tlmgr update --list" before updating.

In my opinion tlmgr should exit with an error if GnuPG is installed on
the system, but the repository is unsigned, at least for the main TeX
Live repository. This feature is already implemented as the
"--require-verification" argument and configuration option, but is not
activated by default. I maintain that it should be the default for
systems that have GnuPG installed.

I appreciate that this will create problems for custom repositories that
might not be signed at all. On the other hand, the only public
repositories I am aware of are TeX Live contrib
(http://contrib.texlive.info/) and the KOMA-Script repository
(https://komascript.de/node/2049), both of which are signed anyway.
Moreover even if this problem arises it can be fixed (at the expense of
security) by using "--no-require-verification".

Kind regards,
Jonas Witschel


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <http://tug.org/pipermail/tex-live/attachments/20170912/71c896d5/attachment.sig>

From norbert at preining.info  Wed Sep 13 02:38:10 2017
From: norbert at preining.info (Norbert Preining)
Date: Wed, 13 Sep 2017 09:38:10 +0900
Subject: [tex-live] TeX Live repository currently unsigned
In-Reply-To: <004f5750-6d3c-e61c-4ff9-761d3ad0655d@tu-ilmenau.de>
References: <004f5750-6d3c-e61c-4ff9-761d3ad0655d@tu-ilmenau.de>
Message-ID: <20170913003810.o5yxc6ui2ieqnxot@burischnitzel.preining.info>

Hi Jonas,


> currently there seems to be a problem with the PGP signature of the main

The validity of the key was renewed, and since it was the first time
we did the renewal process we forgot one step (to update the key
where the nightly rebuild is done).

The update should *not* have been shipped out, and we will change this
so that if signing fails no update will be pushed out.

> In my opinion tlmgr should exit with an error if GnuPG is installed on
> the system, but the repository is unsigned, at least for the main TeX
...
> I appreciate that this will create problems for custom repositories that
> might not be signed at all. On the other hand, the only public

First of all, you can set this configuration option permanently in the
tlmgr config file in $TEXMFHOME/tlmgr/config with
	require-verification = 1

I am discussing with Karl whether we change tlmgr to require the *main*
repository only to have signatures, but leave subsidiary repos free
not to be signed.

All the best

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From jonas.witschel at tu-ilmenau.de  Wed Sep 13 09:44:59 2017
From: jonas.witschel at tu-ilmenau.de (Jonas Witschel)
Date: Wed, 13 Sep 2017 09:44:59 +0200
Subject: [tex-live] TeX Live repository currently unsigned
In-Reply-To: <20170913003810.o5yxc6ui2ieqnxot@burischnitzel.preining.info>
References: <004f5750-6d3c-e61c-4ff9-761d3ad0655d@tu-ilmenau.de>
 <20170913003810.o5yxc6ui2ieqnxot@burischnitzel.preining.info>
Message-ID: <2e7263c6-15f9-afd9-071b-8742f98daec4@tu-ilmenau.de>

Hi Norbert,

> The validity of the key was renewed, and since it was the first time
> we did the renewal process we forgot one step (to update the key
> where the nightly rebuild is done).
> 
> The update should *not* have been shipped out, and we will change this
> so that if signing fails no update will be pushed out.
Great, I can confirm that the today's updated database is signed
correctly. Thank you for your quick fix!

> I am discussing with Karl whether we change tlmgr to require the *main*
> repository only to have signatures, but leave subsidiary repos free
> not to be signed.
That sounds like a reasonable approach to me.

Best regards,
Jonas

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <http://tug.org/pipermail/tex-live/attachments/20170913/ed376948/attachment.sig>

From jfbu at free.fr  Mon Sep 18 18:18:28 2017
From: jfbu at free.fr (jfbu)
Date: Mon, 18 Sep 2017 18:18:28 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
Message-ID: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>

Hi,

I have a question,

$ kpsewhich example-image-A.pdf

$ kpsewhich example-image-a.pdf
/usr/local/texlive/2017/texmf-dist/tex/latex/mwe/example-image-a.pdf

But I am on a case-insensitive file system:

$ touch foo

$ mv foo Foo

$ rm foo

$ ls Foo
ls: Foo: No such file or directory

I was wondering why an `\includegraphics{example-image-A}` failed
(which I got from some post on tex.sx) and I surmise from the above
that this has possibly to do with kpsewhich or at least with the way
pdftex finds files.

I guess the rationale is that if kpsewhich were to be
case-insensitive on OSes with case insensitive file systems,
TeX documents would more easily behave differently on different
systems ?

Best

Jean-Fran?ois



From gnwiii at gmail.com  Mon Sep 18 18:52:40 2017
From: gnwiii at gmail.com (George N. White III)
Date: Mon, 18 Sep 2017 13:52:40 -0300
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
Message-ID: <CAKTOP459q+pc9c2WbtE4T2TDOzmaa2_+55nGNzRt_MsQBBQ6wg@mail.gmail.com>

On 18 September 2017 at 13:18, jfbu <jfbu at free.fr> wrote:

> Hi,
>
> I have a question,
>
> $ kpsewhich example-image-A.pdf
>
> $ kpsewhich example-image-a.pdf
> /usr/local/texlive/2017/texmf-dist/tex/latex/mwe/example-image-a.pdf
>
>
It would save some guessing in such (not uncommon) searches if we could use:

kpsewhich --ignore-case eXample-ImaGe-A.pdf
/usr/local/texlive/2017/texmf-dist/tex/latex/mwe/example-image-a.pdf


> But I am on a case-insensitive file system:
>
> $ touch foo
>
> $ mv foo Foo
>
> $ rm foo
>
> $ ls Foo
> ls: Foo: No such file or directory
>
> I was wondering why an `\includegraphics{example-image-A}` failed
> (which I got from some post on tex.sx) and I surmise from the above
> that this has possibly to do with kpsewhich or at least with the way
> pdftex finds files.
>
> I guess the rationale is that if kpsewhich were to be
> case-insensitive on OSes with case insensitive file systems,
> TeX documents would more easily behave differently on different
> systems ?
>
> Best
>
> Jean-Fran?ois
>
>
>


-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170918/3666eadd/attachment.html>

From p.taylor at rhul.ac.uk  Mon Sep 18 19:36:27 2017
From: p.taylor at rhul.ac.uk (Philip Taylor)
Date: Mon, 18 Sep 2017 18:36:27 +0100
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
Message-ID: <fa688716-18f4-2c08-ab84-4b95400c4eff@rhul.ac.uk>

jfbu wrote:
> Hi,
>
> I have a question,
>
> $ kpsewhich example-image-A.pdf
>
> $ kpsewhich example-image-a.pdf
> /usr/local/texlive/2017/texmf-dist/tex/latex/mwe/example-image-a.pdf
>
> But I am on a case-insensitive file system:
Windows 7 Ultimate, 64-bit; TeX Live 2016 :

Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\Philip.Taylor>kpsewhich PLAIN.TEX
c:/TeX/Live/2016/texmf-dist/tex/plain/base/PLAIN.TEX

C:\Users\Philip.Taylor>kpsewhich PLAIN.TeX
c:/TeX/Live/2016/texmf-dist/tex/plain/base/PLAIN.TeX

C:\Users\Philip.Taylor>kpsewhich Plain.TeX
c:/TeX/Live/2016/texmf-dist/tex/plain/base/Plain.TeX

C:\Users\Philip.Taylor>kpsewhich plain.TeX
c:/TeX/Live/2016/texmf-dist/tex/plain/base/plain.TeX

From enrico.gregorio at gmail.com  Mon Sep 18 19:40:12 2017
From: enrico.gregorio at gmail.com (Enrico Gregorio)
Date: Mon, 18 Sep 2017 19:40:12 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
Message-ID: <FDC335C1-737B-4EFA-A0F1-A59C5074B81F@gmail.com>


> On 18 Sep 2017, at 18:18 , jfbu <jfbu at free.fr> wrote:
> 
> Hi,
> 
> I have a question,
> 
> $ kpsewhich example-image-A.pdf
> 
> $ kpsewhich example-image-a.pdf
> /usr/local/texlive/2017/texmf-dist/tex/latex/mwe/example-image-a.pdf
> 
> But I am on a case-insensitive file system:
> 
> $ touch foo
> 
> $ mv foo Foo
> 
> $ rm foo
> 
> $ ls Foo
> ls: Foo: No such file or directory
> 
> I was wondering why an `\includegraphics{example-image-A}` failed
> (which I got from some post on tex.sx) and I surmise from the above
> that this has possibly to do with kpsewhich or at least with the way
> pdftex finds files.
> 
> I guess the rationale is that if kpsewhich were to be
> case-insensitive on OSes with case insensitive file systems,
> TeX documents would more easily behave differently on different
> systems ?

I find this the only really sensible behavior. Using the wrong casing
limits portability of documents. It often happens that people
on Windows use wrong casing and are puzzled because
the same document doesn?t compile on another (non Windows)
machine.

Ciao
Enrico

From jfbu at free.fr  Mon Sep 18 20:39:14 2017
From: jfbu at free.fr (jfbu)
Date: Mon, 18 Sep 2017 20:39:14 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <fa688716-18f4-2c08-ab84-4b95400c4eff@rhul.ac.uk>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
 <fa688716-18f4-2c08-ab84-4b95400c4eff@rhul.ac.uk>
Message-ID: <E74E41B6-F7FD-48B1-8C47-59E8C93D78B5@free.fr>


Le 18 sept. 2017 ? 19:36, Philip Taylor <p.taylor at rhul.ac.uk> a ?crit :

> jfbu wrote:
>> Hi,
>> 
>> I have a question,
>> 
>> $ kpsewhich example-image-A.pdf
>> 
>> $ kpsewhich example-image-a.pdf
>> /usr/local/texlive/2017/texmf-dist/tex/latex/mwe/example-image-a.pdf
>> 
>> But I am on a case-insensitive file system:
> Windows 7 Ultimate, 64-bit; TeX Live 2016 :
> 
> Microsoft Windows [Version 6.1.7601]
> Copyright (c) 2009 Microsoft Corporation.  All rights reserved.
> 
> C:\Users\Philip.Taylor>kpsewhich PLAIN.TEX
> c:/TeX/Live/2016/texmf-dist/tex/plain/base/PLAIN.TEX
> 
> C:\Users\Philip.Taylor>kpsewhich PLAIN.TeX
> c:/TeX/Live/2016/texmf-dist/tex/plain/base/PLAIN.TeX
> 
> C:\Users\Philip.Taylor>kpsewhich Plain.TeX
> c:/TeX/Live/2016/texmf-dist/tex/plain/base/Plain.TeX
> 
> C:\Users\Philip.Taylor>kpsewhich plain.TeX
> c:/TeX/Live/2016/texmf-dist/tex/plain/base/plain.TeX


ah... I see, and I understand Enrico's comment

> It often happens that people
> on Windows use wrong casing and are puzzled because
> the same document doesn?t compile on another (non Windows)
> machine.

but I conclude that kpsewhich on Windows has different
policy than on Mac.

Shouldn't the kpsewhich on Windows act like on Mac
and then only kpsewhich plain.tex would return a find?

Because as it stands portability of TeX documents
is diminished.

Best

Jean-Fran?ois

From zdenek.wagner at gmail.com  Mon Sep 18 20:46:32 2017
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Mon, 18 Sep 2017 20:46:32 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <E74E41B6-F7FD-48B1-8C47-59E8C93D78B5@free.fr>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
 <fa688716-18f4-2c08-ab84-4b95400c4eff@rhul.ac.uk>
 <E74E41B6-F7FD-48B1-8C47-59E8C93D78B5@free.fr>
Message-ID: <CAC1phyYJUy1MQCbR3LeR8FTb01q0WCF+K+O_f_HrjQuDUrLSxw@mail.gmail.com>

2017-09-18 20:39 GMT+02:00 jfbu <jfbu at free.fr>:

>
> Le 18 sept. 2017 ? 19:36, Philip Taylor <p.taylor at rhul.ac.uk> a ?crit :
>
> > jfbu wrote:
> >> Hi,
> >>
> >> I have a question,
> >>
> >> $ kpsewhich example-image-A.pdf
> >>
> >> $ kpsewhich example-image-a.pdf
> >> /usr/local/texlive/2017/texmf-dist/tex/latex/mwe/example-image-a.pdf
> >>
> >> But I am on a case-insensitive file system:
> > Windows 7 Ultimate, 64-bit; TeX Live 2016 :
> >
> > Microsoft Windows [Version 6.1.7601]
> > Copyright (c) 2009 Microsoft Corporation.  All rights reserved.
> >
> > C:\Users\Philip.Taylor>kpsewhich PLAIN.TEX
> > c:/TeX/Live/2016/texmf-dist/tex/plain/base/PLAIN.TEX
> >
> > C:\Users\Philip.Taylor>kpsewhich PLAIN.TeX
> > c:/TeX/Live/2016/texmf-dist/tex/plain/base/PLAIN.TeX
> >
> > C:\Users\Philip.Taylor>kpsewhich Plain.TeX
> > c:/TeX/Live/2016/texmf-dist/tex/plain/base/Plain.TeX
> >
> > C:\Users\Philip.Taylor>kpsewhich plain.TeX
> > c:/TeX/Live/2016/texmf-dist/tex/plain/base/plain.TeX
>
>
> ah... I see, and I understand Enrico's comment
>
> > It often happens that people
> > on Windows use wrong casing and are puzzled because
> > the same document doesn?t compile on another (non Windows)
> > machine.
>
> but I conclude that kpsewhich on Windows has different
> policy than on Mac.
>
> Shouldn't the kpsewhich on Windows act like on Mac
> and then only kpsewhich plain.tex would return a find?
>

I no longer have OS/2 but kpsewhich on OS/2 is case sensitive although the
file system is case insensitive.

>
> Because as it stands portability of TeX documents
> is diminished.
>

Included images are the greatest problem. If I get a document created on
Windows, it rarely works on my Linux computer and I have to fix names in
\input and \includegraphics.

>
> Best
>
> Jean-Fran?ois
>



Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170918/9416c04a/attachment.html>

From beebe at math.utah.edu  Tue Sep 19 00:17:20 2017
From: beebe at math.utah.edu (Nelson H. F. Beebe)
Date: Mon, 18 Sep 2017 16:17:20 -0600
Subject: [tex-live]  TeX and recent ghostscript changes
Message-ID: <CMM.0.95.0.1505773040.beebe@gamma.math.utah.edu>

There is a round of release candidates in progress for ghostscript: I
installed version 9.21 here on 5-Sep-2017, and since then 9.22rc1
appeared on 13-Sep-2017.  There are discussions of this on the
developers list (archives at

	http://ghostscript.com/pipermail/gs-devel/

), but one message today in particular caught my eye, and may be
useful information for the TeX Live team:

>> ...
>> To: ken.sharp at artifex.com
>> From: Masamichi Hosoda <trueroad at trueroad.jp>
>> Subject: Re: [gs-devel] Ghostscript/GhostPDL 9.22 Release Candidate 1
>> 
>> >> > Please give them a try on your system if you're interested in helping
>> >> > test the release-in-progress. Your feedback is appreciated.
>> >>
>> >>It seems that `-dPDFDontUseFontObjectNum` option does not work.
>> > 
>> > It has been removed, as documented in History9.htm:
>> > 
>> > 2017-08-02 13:41:59 +0100
>> > Ken Sharp <ken.sharp at artifex.com>
>> > ca1ec9b486ddba3f921355fd1d775f27f4871356
>> > 
>> >     PDF interpreter - remove the PDFDontUseObjectNum switch
>> > 
>> >     This was implemented to allow us to restore the default behaviour if
>> >     it caused problems. No real problems reported, so lets get rid of
>> >     (yet another) of our many, many command line switches.
>> > 
>> > 
>> >>`-dPDFDontUseFontObjectNum` is useful to unify duplicate fonts.
>> >>So I would like to use `-dPDFDontUseFontObjectNum`.
>> > 
>> > The fonts can't realistically be described as duplicates, if they have
>> > different object numbers. Or if they are then the original PDF file
>> > (this only works with PDF input) was poorly constructed. Using this
>> > option isn't really sensible, it was only ever present in case the
>> > Font numbering usage went awry. Consider creating the original PDF
>> > files more efficiently instead.
>> > 
>> > I'll discuss it with the other developers but I am not inclined to
>> > restore this. Obviously if you feel its important you can revert the
>> > change locally.
>> 
>> When you create a PDF document using something like a TeX system
>> you may include many small PDF files in the main PDF file.
>> It is common for each of the small PDF files to use the same fonts.
>> 
>> If the small PDF files contain embedded full font sets,
>> the TeX system includes all of them in the main PDF.
>> The main PDF contains duplicates of the same full sets of fonts.
>> Therefore, `PDFDontUseFontObjectNum` can remove the duplicates.
>> This may considerably reduce the main PDF-file's size.
>> 
>> There is a tool for using this method of removing duplicate fonts.
>> https://www.ctan.org/pkg/extractpdfmark
>> https://packages.debian.org/stretch/extractpdfmark
>> http://packages.ubuntu.com/zesty/extractpdfmark
>> 
>> LilyPond has option `--bigpdfs` for unifying duplicate fonts in this method.
>> http://lilypond.org/doc/v2.19/Documentation/usage/command_002dline-usage#basic-command-line-options-for-lilypond
>> ...

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- University of Utah                    FAX: +1 801 581 4148                  -
- Department of Mathematics, 110 LCB    Internet e-mail: beebe at math.utah.edu  -
- 155 S 1400 E RM 233                       beebe at acm.org  beebe at computer.org -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe/ -
-------------------------------------------------------------------------------

From kakuto at fuk.kindai.ac.jp  Tue Sep 19 01:04:03 2017
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Tue, 19 Sep 2017 08:04:03 +0900
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <CAC1phyYJUy1MQCbR3LeR8FTb01q0WCF+K+O_f_HrjQuDUrLSxw@mail.gmail.com>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
 <fa688716-18f4-2c08-ab84-4b95400c4eff@rhul.ac.uk>
 <E74E41B6-F7FD-48B1-8C47-59E8C93D78B5@free.fr>
 <CAC1phyYJUy1MQCbR3LeR8FTb01q0WCF+K+O_f_HrjQuDUrLSxw@mail.gmail.com>
Message-ID: <5B46B814BD8741B68DDDD2DCF3D9FAE1@CJ3001517A>

> Included images are the greatest problem. If I get a document
> created on Windows, it rarely works on my Linux computer and
> I have to fix names in \input and \includegraphics.

Sorry for the incompatibility with other platforms.
However, I will not change the present behaviors
on windows.

PS:
If example-image-a.pdf is in the current directory,
or in a directory for which there is not ls-R,
kpsewhich example-image-A.pdf
probably returns
./example-image-A.pdf
or
/somedir/example-image-A.pdf
on case-insensitive Mac.
Sorry if I am wrong.

Thanks,
Akira


From enrico.gregorio at gmail.com  Tue Sep 19 01:07:27 2017
From: enrico.gregorio at gmail.com (Enrico Gregorio)
Date: Tue, 19 Sep 2017 01:07:27 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <5B46B814BD8741B68DDDD2DCF3D9FAE1@CJ3001517A>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
 <fa688716-18f4-2c08-ab84-4b95400c4eff@rhul.ac.uk>
 <E74E41B6-F7FD-48B1-8C47-59E8C93D78B5@free.fr>
 <CAC1phyYJUy1MQCbR3LeR8FTb01q0WCF+K+O_f_HrjQuDUrLSxw@mail.gmail.com>
 <5B46B814BD8741B68DDDD2DCF3D9FAE1@CJ3001517A>
Message-ID: <B723EFEF-B9E1-4B78-B24E-2983A99A34F8@gmail.com>


> On 19 Sep 2017, at 01:04 , Akira Kakuto <kakuto at fuk.kindai.ac.jp> wrote:
> 
>> Included images are the greatest problem. If I get a document
>> created on Windows, it rarely works on my Linux computer and
>> I have to fix names in \input and \includegraphics.
> 
> Sorry for the incompatibility with other platforms.
> However, I will not change the present behaviors
> on windows.
> 
> PS:
> If example-image-a.pdf is in the current directory,
> or in a directory for which there is not ls-R,
> kpsewhich example-image-A.pdf
> probably returns
> ./example-image-A.pdf
> or
> /somedir/example-image-A.pdf
> on case-insensitive Mac.
> Sorry if I am wrong.

I confirm.

Ciao
Enrico

From jfbu at free.fr  Tue Sep 19 08:25:09 2017
From: jfbu at free.fr (jfbu)
Date: Tue, 19 Sep 2017 08:25:09 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <5B46B814BD8741B68DDDD2DCF3D9FAE1@CJ3001517A>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
 <fa688716-18f4-2c08-ab84-4b95400c4eff@rhul.ac.uk>
 <E74E41B6-F7FD-48B1-8C47-59E8C93D78B5@free.fr>
 <CAC1phyYJUy1MQCbR3LeR8FTb01q0WCF+K+O_f_HrjQuDUrLSxw@mail.gmail.com>
 <5B46B814BD8741B68DDDD2DCF3D9FAE1@CJ3001517A>
Message-ID: <CBEA24CB-0393-43C8-ABAA-278E26D4F6D2@free.fr>


Le 19 sept. 2017 ? 01:04, Akira Kakuto <kakuto at fuk.kindai.ac.jp> a ?crit :

>> Included images are the greatest problem. If I get a document
>> created on Windows, it rarely works on my Linux computer and
>> I have to fix names in \input and \includegraphics.
> 
> Sorry for the incompatibility with other platforms.
> However, I will not change the present behaviors
> on windows.
> 
> PS:
> If example-image-a.pdf is in the current directory,
> or in a directory for which there is not ls-R,
> kpsewhich example-image-A.pdf
> probably returns
> ./example-image-A.pdf

Hi,

confirmed on my mac os 10.9.5

$ touch example-image-a.pdf

$ kpsewhich example-image-A.pdf
./example-image-A.pdf

and then

$ mv example-image-a.pdf ~/Library/texmf/source/latex/

$ kpsewhich example-image-A.pdf
/Users/xyxyxy/Library/texmf/tex/latex/example-image-A.pdf

$ kpsewhich Example-Image-a.pdf
/Users/jfb/Library/texmf/tex/latex/Example-Image-a.pdf

However, when I try Philip's examples:

$ kpsewhich plain.tex
/usr/local/texlive/2017/texmf-dist/tex/plain/base/plain.tex

$ kpsewhich plaiN.tex

$ kpsewhich Plain.tex

$ kpsewhich plain.TEX

i.e. I can't reproduce Justin's duplication on Mac of Philip's
findings on Windows

If I move my pseudo example-image-a.pdf to ~/Library/texmf/doc/
from ~/Library/texmf/tex/latex/

kpsewhich example-image-a.pdf

finds the real one in 2017/texmf-dist/tex/latex/mwe/

and then

kpsewhich example-image-A.pdf

finds nothing.

I am on Mac OS 10.9.5 with TeXLive 2017's kpsewhich (other binaries
such as pdftex are from MacPorts)

Best,

Jean-Fran?ois



From jfbu at free.fr  Tue Sep 19 08:26:55 2017
From: jfbu at free.fr (jfbu)
Date: Tue, 19 Sep 2017 08:26:55 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <C1148536-00D1-4CD3-A546-2347AC6B1E3C@me.com>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
 <C1148536-00D1-4CD3-A546-2347AC6B1E3C@me.com>
Message-ID: <A2E47A6F-331F-468D-907D-86AE88753DF5@free.fr>

Hi,

Le 19 sept. 2017 ? 00:56, Justin C. Walker <justin at me.com> a ?crit :

>> 
>> On Sep 18, 2017, at 09:18 , jfbu <jfbu at free.fr> wrote:
>> 
>> Hi,
>> 
>> I have a question,
>> 
>> $ kpsewhich example-image-A.pdf
>> 
>> $ kpsewhich example-image-a.pdf
>> /usr/local/texlive/2017/texmf-dist/tex/latex/mwe/example-image-a.pdf
> 
> I?;m using TeXLive 2017 (up to date) on  on macOS 10.11.6.
> 
> I duplicated Phillip?s example (i.e., I got the same results he did).
> 
> I also used your example, with the same results, so I don?t understand why case should affect the outcome.
> 
> What versions of TeX and (I assume) macOS are you using?

I am on mac os 10.9.5 and using TeXLive 2017.

Best,

Jean-Fran?ois

From jfbu at free.fr  Tue Sep 19 09:15:04 2017
From: jfbu at free.fr (jfbu)
Date: Tue, 19 Sep 2017 09:15:04 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <F01339A8-B0C7-4640-B2AC-4CFDD0BFE072@me.com>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
 <C1148536-00D1-4CD3-A546-2347AC6B1E3C@me.com>
 <A2E47A6F-331F-468D-907D-86AE88753DF5@free.fr>
 <F01339A8-B0C7-4640-B2AC-4CFDD0BFE072@me.com>
Message-ID: <9779A803-0ADB-405C-A326-0F2DC5667CBC@free.fr>

Hi Justin



> The ?HFS+? file system on macOS/OS X can be created to be case-sensitive (at least it once was; not sure whether it still is).  Did you perhaps do this in the distant past?
> 

Yes, it is possibly to format a hard disk with HFS+ case-sensitive file system,

but
from diskutil info / I get

   File System Personality:  Journaled HFS+
   Type (Bundle):            hfs
   Name (User Visible):      Mac OS Extended (Journaled)

which confirms that it is the case-insensitive file system (else "Case-sensitive" would appear therein)

I am not sure but to change that I think I would need to re-format the hard-disk and thus re-copy from a backup all files, which, as anyway this is my book-disk would be quite an adventure !

Jean-Fran?ois





From news3 at nililand.de  Tue Sep 19 11:15:00 2017
From: news3 at nililand.de (Ulrike Fischer)
Date: Tue, 19 Sep 2017 11:15:00 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
 <fa688716-18f4-2c08-ab84-4b95400c4eff@rhul.ac.uk>
 <E74E41B6-F7FD-48B1-8C47-59E8C93D78B5@free.fr>
 <CAC1phyYJUy1MQCbR3LeR8FTb01q0WCF+K+O_f_HrjQuDUrLSxw@mail.gmail.com>
 <5B46B814BD8741B68DDDD2DCF3D9FAE1@CJ3001517A>
Message-ID: <uhy8sdt7eyu9$.dlg@nililand.de>

Am Tue, 19 Sep 2017 08:04:03 +0900 schrieb Akira Kakuto:

>> Included images are the greatest problem. If I get a document
>> created on Windows, it rarely works on my Linux computer and
>> I have to fix names in \input and \includegraphics.
> 
> Sorry for the incompatibility with other platforms.
> However, I will not change the present behaviors
> on windows.

I would really like to have is a way to find out the correct casing
without having to look at the file itself. E.g. if I do

 kpsewhich EXAMPLE-IMAGE-A.PNG 
  or in a document 
 \includegraphics{EXAMPLE-IMAGE-A.PNG} 

then every data I get back says that I used the correct casing: On
the terminal and in the log I only see uppercase:
d:/texlive/2017/texmf-dist/tex/latex/mwe/EXAMPLE-IMAGE-A.PNG
<use EXAMPLE-IMAGE-A.PNG>

and when I then copy the code in some answer I get complains ;-(. 

Couldn't there be some "case-debugging-mode"?

-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From zdenek.wagner at gmail.com  Tue Sep 19 11:35:25 2017
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Tue, 19 Sep 2017 11:35:25 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <uhy8sdt7eyu9$.dlg@nililand.de>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
 <fa688716-18f4-2c08-ab84-4b95400c4eff@rhul.ac.uk>
 <E74E41B6-F7FD-48B1-8C47-59E8C93D78B5@free.fr>
 <CAC1phyYJUy1MQCbR3LeR8FTb01q0WCF+K+O_f_HrjQuDUrLSxw@mail.gmail.com>
 <5B46B814BD8741B68DDDD2DCF3D9FAE1@CJ3001517A> <uhy8sdt7eyu9$.dlg@nililand.de>
Message-ID: <CAC1phyYD=8RhKiOvZ8CF2+kjr7gHo8HCbmFK_rxCtg6zV5CXsA@mail.gmail.com>

2017-09-19 11:15 GMT+02:00 Ulrike Fischer <news3 at nililand.de>:

> Am Tue, 19 Sep 2017 08:04:03 +0900 schrieb Akira Kakuto:
>
> >> Included images are the greatest problem. If I get a document
> >> created on Windows, it rarely works on my Linux computer and
> >> I have to fix names in \input and \includegraphics.
> >
> > Sorry for the incompatibility with other platforms.
> > However, I will not change the present behaviors
> > on windows.
>
> I would really like to have is a way to find out the correct casing
> without having to look at the file itself. E.g. if I do
>
>  kpsewhich EXAMPLE-IMAGE-A.PNG
>   or in a document
>  \includegraphics{EXAMPLE-IMAGE-A.PNG}
>
> then every data I get back says that I used the correct casing: On
> the terminal and in the log I only see uppercase:
> d:/texlive/2017/texmf-dist/tex/latex/mwe/EXAMPLE-IMAGE-A.PNG
> <use EXAMPLE-IMAGE-A.PNG>
>
> and when I then copy the code in some answer I get complains ;-(.
>
> Couldn't there be some "case-debugging-mode"?
>

It is not easy. ls-R is (usually) case sensitive, it is case sensitive even
on OS/2 with case insensitive file system. In this case, if the file is
looked up in ls-R, kpsewhich is case sensitive. The problem is that the
file system does not return the correct file name

On Mac:
"ls" shows that the directory contains  README.md
"cat readme.md" displays the contents of the file
"ls readme.md" returns readme.md, not README.md

On Windows 7 with NTFS:
"dir" shows that the directory contains README.md
"cat readme.md" displays the contents of the file
"dir readme.md" reports the correct file name README.md (I have tried "dir
Readme.MD" and again got the correct file name).

Thus it depends, it may or may not be possible.


> --
> Ulrike Fischer
> http://www.troubleshooting-tex.de/
>


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170919/fd9eaae1/attachment.html>

From justin at me.com  Tue Sep 19 00:56:10 2017
From: justin at me.com (Justin C. Walker)
Date: Mon, 18 Sep 2017 15:56:10 -0700
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
Message-ID: <C1148536-00D1-4CD3-A546-2347AC6B1E3C@me.com>


> On Sep 18, 2017, at 09:18 , jfbu <jfbu at free.fr> wrote:
> 
> Hi,
> 
> I have a question,
> 
> $ kpsewhich example-image-A.pdf
> 
> $ kpsewhich example-image-a.pdf
> /usr/local/texlive/2017/texmf-dist/tex/latex/mwe/example-image-a.pdf

I?;m using TeXLive 2017 (up to date) on  on macOS 10.11.6.

I duplicated Phillip?s example (i.e., I got the same results he did).

I also used your example, with the same results, so I don?t understand why case should affect the outcome.

What versions of TeX and (I assume) macOS are you using?

> But I am on a case-insensitive file system:
> 
> $ touch foo
> 
> $ mv foo Foo
> 
> $ rm foo
> 
> $ ls Foo
> ls: Foo: No such file or directory
> 
> I was wondering why an `\includegraphics{example-image-A}` failed
> (which I got from some post on tex.sx) and I surmise from the above
> that this has possibly to do with kpsewhich or at least with the way
> pdftex finds files.
> 
> I guess the rationale is that if kpsewhich were to be
> case-insensitive on OSes with case insensitive file systems,
> TeX documents would more easily behave differently on different
> systems ?
> 
> Best
> 
> Jean-Fran?ois
> 
> 

--
Justin C. Walker, Curmudgeon at Large
Institute for the Absorption of Federal Funds
-----------
If it weren't for carbon-14, I wouldn't date at all.
-----------




From justin at me.com  Tue Sep 19 00:59:45 2017
From: justin at me.com (Justin C. Walker)
Date: Mon, 18 Sep 2017 15:59:45 -0700
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <E74E41B6-F7FD-48B1-8C47-59E8C93D78B5@free.fr>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
 <fa688716-18f4-2c08-ab84-4b95400c4eff@rhul.ac.uk>
 <E74E41B6-F7FD-48B1-8C47-59E8C93D78B5@free.fr>
Message-ID: <51C9E322-BB48-46CF-843D-907F832AA70E@me.com>


> On Sep 18, 2017, at 11:39 , jfbu <jfbu at free.fr> wrote:

[snip]

> ah... I see, and I understand Enrico's comment
> 
>> It often happens that people
>> on Windows use wrong casing and are puzzled because
>> the same document doesn?t compile on another (non Windows)
>> machine.
> 
> but I conclude that kpsewhich on Windows has different
> policy than on Mac.
> 
> Shouldn't the kpsewhich on Windows act like on Mac
> and then only kpsewhich plain.tex would return a find?

I?m not sure that this makes sense: AIUI, ?kpsewhich? just hands a file name to the OS.  The OS provides the answer, which is relayed to the user.  I don?t think the TeX infrastructure (or the kpse infrastructure) puts any effort into dealing with case issues.

> 
> Because as it stands portability of TeX documents
> is diminished.
> 
> Best
> 
> Jean-Fran?ois

--
Justin C. Walker, Curmudgeon at Large
Institute for the Absorption of Federal Funds
-----------
I'm beginning to like the cut of his jibberish.
-----------





From justin at me.com  Tue Sep 19 09:02:28 2017
From: justin at me.com (Justin C. Walker)
Date: Tue, 19 Sep 2017 00:02:28 -0700
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <A2E47A6F-331F-468D-907D-86AE88753DF5@free.fr>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
 <C1148536-00D1-4CD3-A546-2347AC6B1E3C@me.com>
 <A2E47A6F-331F-468D-907D-86AE88753DF5@free.fr>
Message-ID: <F01339A8-B0C7-4640-B2AC-4CFDD0BFE072@me.com>


> On Sep 18, 2017, at 23:26 , jfbu <jfbu at free.fr> wrote:
> 
> Hi,
> 
> Le 19 sept. 2017 ? 00:56, Justin C. Walker <justin at me.com> a ?crit :
> 
>>> 
>>> On Sep 18, 2017, at 09:18 , jfbu <jfbu at free.fr> wrote:
>>> 
>>> Hi,
>>> 
>>> I have a question,
>>> 
>>> $ kpsewhich example-image-A.pdf
>>> 
>>> $ kpsewhich example-image-a.pdf
>>> /usr/local/texlive/2017/texmf-dist/tex/latex/mwe/example-image-a.pdf
>> 
>> I?;m using TeXLive 2017 (up to date) on  on macOS 10.11.6.
>> 
>> I duplicated Phillip?s example (i.e., I got the same results he did).
>> 
>> I also used your example, with the same results, so I don?t understand why case should affect the outcome.
>> 
>> What versions of TeX and (I assume) macOS are you using?
> 
> I am on mac os 10.9.5 and using TeXLive 2017.

The ?HFS+? file system on macOS/OS X can be created to be case-sensitive (at least it once was; not sure whether it still is).  Did you perhaps do this in the distant past?

Justin

--
Justin C. Walker, Curmudgeon at Large
Institute for the Absorption of Federal Funds
-----------
My wife 'n kids 'n dogs are gone,
I can't get Jesus on the phone,
But Ol' Milwaukee's Best is my best friend.
-----------




From dekleurenfamilie at gmail.com  Tue Sep 19 11:03:31 2017
From: dekleurenfamilie at gmail.com (De Kleurenfamilie - Susanne G. Loeber)
Date: Tue, 19 Sep 2017 11:03:31 +0200
Subject: [tex-live] Fwd: TEXLIVE
References: <CAEqF=WgAAFzrV=F1KnKHbfsKR3q-5kS+iizQc6evczeqSM0qkQ@mail.gmail.com>
Message-ID: <11B97878-9E94-4D13-B334-EEE269A8CEC9@gmail.com>


> Beste Lezer, 
> 
> ik heb een update van TEXLIVE gedaan. Ik krijg de volgende foutmelding wanneer ik ConTeXt LuaTEX wil draaien. Wat kunnen we hieraan doen?
> 
> 
> ?
> 
> Met vriendelijke groet, 
> 
> Susanne G. Loeber
> ?Technische ondersteuning MY-organization
> tel: 06-300.43.484
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170919/1929579a/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screen Shot 2017-09-19 at 10.48.07.png
Type: image/png
Size: 98404 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20170919/1929579a/attachment-0001.png>

From justin at me.com  Tue Sep 19 23:21:01 2017
From: justin at me.com (Justin C. Walker)
Date: Tue, 19 Sep 2017 14:21:01 -0700
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <9779A803-0ADB-405C-A326-0F2DC5667CBC@free.fr>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
 <C1148536-00D1-4CD3-A546-2347AC6B1E3C@me.com>
 <A2E47A6F-331F-468D-907D-86AE88753DF5@free.fr>
 <F01339A8-B0C7-4640-B2AC-4CFDD0BFE072@me.com>
 <9779A803-0ADB-405C-A326-0F2DC5667CBC@free.fr>
Message-ID: <822BE6CE-C803-4866-A806-49727B12B127@me.com>


> On Sep 19, 2017, at 00:15 , jfbu <jfbu at free.fr> wrote:
> 
> Hi Justin
> 
> 
> 
>> The ?HFS+? file system on macOS/OS X can be created to be case-sensitive (at least it once was; not sure whether it still is).  Did you perhaps do this in the distant past?
>> 
> 
> Yes, it is possibly to format a hard disk with HFS+ case-sensitive file system,
> 
> but
> from diskutil info / I get
> 
>   File System Personality:  Journaled HFS+
>   Type (Bundle):            hfs
>   Name (User Visible):      Mac OS Extended (Journaled)
> 
> which confirms that it is the case-insensitive file system (else "Case-sensitive" would appear therein)

Correct.

> I am not sure but to change that I think I would need to re-format the hard-disk and thus re-copy from a backup all files, which, as anyway this is my book-disk would be quite an adventure !

I wasn?t suggesting changing the parameters of the disk, because I believe you are right: that would entail reformatting.  Not a pleasant job, especially for a boot disk :-}

Justin

--
Justin C. Walker, Curmudgeon at Large
Institute for the Absorption of Federal Funds
-----------
If it weren't for carbon-14, I wouldn't date at all.
-----------




From siepo at cybercomm.nl  Wed Sep 20 00:06:56 2017
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Wed, 20 Sep 2017 00:06:56 +0200
Subject: [tex-live] Fwd: TEXLIVE
In-Reply-To: <11B97878-9E94-4D13-B334-EEE269A8CEC9@gmail.com>
References: <CAEqF=WgAAFzrV=F1KnKHbfsKR3q-5kS+iizQc6evczeqSM0qkQ@mail.gmail.com>
 <11B97878-9E94-4D13-B334-EEE269A8CEC9@gmail.com>
Message-ID: <20170919220656.dh7swpqhuvcjczbv@bitmuis.thuis.internal>

On Tue, Sep 19, 2017 at 11:03:31AM +0200, De Kleurenfamilie - Susanne G. Loeber wrote:
> 
> > Beste Lezer, 
> > 
> > ik heb een update van TEXLIVE gedaan. Ik krijg de volgende foutmelding wanneer ik ConTeXt LuaTEX wil draaien. Wat kunnen we hieraan doen?

The file you were trying to run is a LaTeX file, not a ConTeXt- and
not a plain TeX file.

What exactly were you trying to accomplish and what steps did you
take to update TeX Live and to run this file?

By the way, this is an English-language mailing list.

-- 
Siep Kroonenberg

From karl at freefriends.org  Wed Sep 20 00:42:38 2017
From: karl at freefriends.org (Karl Berry)
Date: Tue, 19 Sep 2017 22:42:38 GMT
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <F01339A8-B0C7-4640-B2AC-4CFDD0BFE072@me.com>
Message-ID: <201709192242.v8JMgcrH006681@freefriends.org>

What I can imagine doing is first looking up the name as-is, and iff
that fails, doing a case-insensitive lookup. Patches welcome, else I
will put it on my ever-lengthening list. It essentially amounts to
removing the compile-time configuration done now, and falling back to
the case-insensitive test regardless of the system.

It would be wrong to "randomly" return any case-insensitive match if an
exact match exists.  That is, on Unix, \input FOO.TEX should prefer a
file named "FOO.TEX" to "foo.tex".

-k

P.S. Explanation of the current behavior: Kpathsea was written at a time
when in practice there was no such thing as an operating system which
supported both case-insensitve and case-sensitive filesystems. (Also at
a time when no one dreamed that a company would make such a disruptive
and incompatible change to their systems, but never mind.)  Therefore
the test was done at configure time.  In kpathsea/config.h there is:

#if defined(OS2)     || \
    defined(MSDOS)   || defined(__MSDOS__) || defined(DOS)    || \
    defined(WIN32)   || defined(__WIN32__) || defined(_WIN32) || \
    defined(DJGPP)   || defined(__DJGPP__) || \
    defined(MINGW32) || defined(__MINGW32__)
#define DOSISH
#endif

which is ultimately what determines whether case-sensitive or
-insensitive test is done.

(Zdenek, why this does not match on your OS/2 system, I can't say.)

From zdenek.wagner at gmail.com  Wed Sep 20 00:45:05 2017
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 20 Sep 2017 00:45:05 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <C1148536-00D1-4CD3-A546-2347AC6B1E3C@me.com>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
 <C1148536-00D1-4CD3-A546-2347AC6B1E3C@me.com>
Message-ID: <CAC1phya+qtd_1PkNLX9nkJq3EaOvh2xc2r_ZVSXNZmO+azx=dQ@mail.gmail.com>

The problem with case sensitivity is as follows:

A user on a case insensitive file system has files MAIN.TEX and
CHAPTER1.TEX. The MAIN.TEX contains the following line:

\input chapter1

The files are then sent to someone else wit a case sensitive file system.
The compilation will fail because chapter1.tex does not exist. If it is
just a fone failing file, it is not a big proble but imagine that you sned
a whole book with dozen chapters each of which includes dozen images and
the file names have wrong case. It is horror to make such document compile.
And some users include an image several times using different case each
time, e.g. \includegraphics{myimage1}, \includegraphics{MyImage1},
\includegraphics{Myimage1.EPS}, \includegraphics{MyImage1.Eps} etc. Believe
me, I had to process such books and it may take dozen hours to make it work.

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2017-09-19 0:56 GMT+02:00 Justin C. Walker <justin at me.com>:

>
> > On Sep 18, 2017, at 09:18 , jfbu <jfbu at free.fr> wrote:
> >
> > Hi,
> >
> > I have a question,
> >
> > $ kpsewhich example-image-A.pdf
> >
> > $ kpsewhich example-image-a.pdf
> > /usr/local/texlive/2017/texmf-dist/tex/latex/mwe/example-image-a.pdf
>
> I?;m using TeXLive 2017 (up to date) on  on macOS 10.11.6.
>
> I duplicated Phillip?s example (i.e., I got the same results he did).
>
> I also used your example, with the same results, so I don?t understand why
> case should affect the outcome.
>
> What versions of TeX and (I assume) macOS are you using?
>
> > But I am on a case-insensitive file system:
> >
> > $ touch foo
> >
> > $ mv foo Foo
> >
> > $ rm foo
> >
> > $ ls Foo
> > ls: Foo: No such file or directory
> >
> > I was wondering why an `\includegraphics{example-image-A}` failed
> > (which I got from some post on tex.sx) and I surmise from the above
> > that this has possibly to do with kpsewhich or at least with the way
> > pdftex finds files.
> >
> > I guess the rationale is that if kpsewhich were to be
> > case-insensitive on OSes with case insensitive file systems,
> > TeX documents would more easily behave differently on different
> > systems ?
> >
> > Best
> >
> > Jean-Fran?ois
> >
> >
>
> --
> Justin C. Walker, Curmudgeon at Large
> Institute for the Absorption of Federal Funds
> -----------
> If it weren't for carbon-14, I wouldn't date at all.
> -----------
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170920/732e9447/attachment.html>

From enrico.gregorio at gmail.com  Wed Sep 20 01:01:46 2017
From: enrico.gregorio at gmail.com (Enrico Gregorio)
Date: Wed, 20 Sep 2017 01:01:46 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <CAC1phya+qtd_1PkNLX9nkJq3EaOvh2xc2r_ZVSXNZmO+azx=dQ@mail.gmail.com>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
 <C1148536-00D1-4CD3-A546-2347AC6B1E3C@me.com>
 <CAC1phya+qtd_1PkNLX9nkJq3EaOvh2xc2r_ZVSXNZmO+azx=dQ@mail.gmail.com>
Message-ID: <273825C1-D5E3-4468-B3E7-8260404E0025@gmail.com>


> On 20 Sep 2017, at 00:45 , Zdenek Wagner <zdenek.wagner at gmail.com> wrote:
> 
> The problem with case sensitivity is as follows:
> 
> A user on a case insensitive file system has files MAIN.TEX and CHAPTER1.TEX. The MAIN.TEX contains the following line:
> 
> \input chapter1

I should add something I see rather frequently;

    \usepackage[Francais]{babel}

which is accepted on Windows, but of course breaks on case sensitive systems. Or

    \documentclass[ieeetran}

and

    \bibliographystyle{ieeetran}

where it should be IEEEtran in order to be compatible across systems.

I understand that TeX Live/Windows likes/needs to be compatible with MiKTeX; 
were it for me, I?d not allow it.

Ciao
Enrico

From zdenek.wagner at gmail.com  Wed Sep 20 01:05:40 2017
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 20 Sep 2017 01:05:40 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <201709192242.v8JMgcrH006681@freefriends.org>
References: <F01339A8-B0C7-4640-B2AC-4CFDD0BFE072@me.com>
 <201709192242.v8JMgcrH006681@freefriends.org>
Message-ID: <CAC1phyb35r2jVii0qaaZxiqQmuoL3DLXSchW6V7WBUEiZaDepg@mail.gmail.com>

2017-09-20 0:42 GMT+02:00 Karl Berry <karl at freefriends.org>:

> What I can imagine doing is first looking up the name as-is, and iff
> that fails, doing a case-insensitive lookup. Patches welcome, else I
> will put it on my ever-lengthening list. It essentially amounts to
> removing the compile-time configuration done now, and falling back to
> the case-insensitive test regardless of the system.
>
> It would be wrong to "randomly" return any case-insensitive match if an
> exact match exists.  That is, on Unix, \input FOO.TEX should prefer a
> file named "FOO.TEX" to "foo.tex".
>
> -k
>
> P.S. Explanation of the current behavior: Kpathsea was written at a time
> when in practice there was no such thing as an operating system which
> supported both case-insensitve and case-sensitive filesystems. (Also at
> a time when no one dreamed that a company would make such a disruptive
> and incompatible change to their systems, but never mind.)  Therefore
> the test was done at configure time.  In kpathsea/config.h there is:
>
> #if defined(OS2)     || \
>     defined(MSDOS)   || defined(__MSDOS__) || defined(DOS)    || \
>     defined(WIN32)   || defined(__WIN32__) || defined(_WIN32) || \
>     defined(DJGPP)   || defined(__DJGPP__) || \
>     defined(MINGW32) || defined(__MINGW32__)
> #define DOSISH
> #endif
>
> which is ultimately what determines whether case-sensitive or
> -insensitive test is done.
>
> (Zdenek, why this does not match on your OS/2 system, I can't say.)
>

HPFS on OS/2 is case retensive but case insensitive. If I create
SomeFile.tex, the file system will remember the case but it will match
somefile.tex and all other case alternatives. However, kpsea is compiled in
such a way that ls-R stores the names as they are listed by the file
system, i.e. it will store SomeFile.tex. If a TEXMF tree is configured to
search in the ls-R only, it will only match SomeFile.tex but not the other
variants. I no longer have OS/2 so I cannot run further tests.

However, the situation with case sensitivity is much more complex. OS/2 has
a limited support for ext2 which is case sensitive. The configuration file
for the driver allows switching case sensitivity on and off. The driver can
read files accessed via symlinks but is unable to create them.

Users of all OSes can use files via network which brings another mess. I
know some universities which provide one network installatin of TeX Live
supporting all platforms and the users hust mount the root of the tree and
set PATH. Thus Windows users invoke TeX Live from a case sensitive file
system although their disks are case insensitive.

And there is another big problem. In our institute we have Synology for
backup and sharing files. Since the majority of our users are on Windows,
Synology is configured to use Samba. The Samba protocol is case insensitive
although the underlying file system in Synology is case sensitive. It is
also possible to use WebDAV, sshfs, etc. Thus it depends how I mount
Synology on my Linux machine, if I mount it via Samba, I have case
insensitive system. If the directory has files with names differing only in
case and I try to overwrite one of them via Samba, I lose all the remaining
files. If I do the same action via sshfs or WebDAV, it works correctly as
it should on a case sensitive system.

So the right solution how to cope with case (in)sensitivity will definitely
be difficult.



Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170920/c92fdd65/attachment-0001.html>

From zdenek.wagner at gmail.com  Wed Sep 20 01:07:38 2017
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Wed, 20 Sep 2017 01:07:38 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <C1148536-00D1-4CD3-A546-2347AC6B1E3C@me.com>
References: <BA545185-7C8F-4D90-996F-66108338EBF0@free.fr>
 <C1148536-00D1-4CD3-A546-2347AC6B1E3C@me.com>
Message-ID: <CAC1phyadXNDQv6daV=q0hmwCc_v=unttkLULqyCKzBrHdYtEqg@mail.gmail.com>

The problem with case sensitivity is as follows:

A user on a case insensitive file system has files MAIN.TEX and

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2017-09-19 0:56 GMT+02:00 Justin C. Walker <justin at me.com>:

>
> > On Sep 18, 2017, at 09:18 , jfbu <jfbu at free.fr> wrote:
> >
> > Hi,
> >
> > I have a question,
> >
> > $ kpsewhich example-image-A.pdf
> >
> > $ kpsewhich example-image-a.pdf
> > /usr/local/texlive/2017/texmf-dist/tex/latex/mwe/example-image-a.pdf
>
> I?;m using TeXLive 2017 (up to date) on  on macOS 10.11.6.
>
> I duplicated Phillip?s example (i.e., I got the same results he did).
>
> I also used your example, with the same results, so I don?t understand why
> case should affect the outcome.
>
> What versions of TeX and (I assume) macOS are you using?
>
> > But I am on a case-insensitive file system:
> >
> > $ touch foo
> >
> > $ mv foo Foo
> >
> > $ rm foo
> >
> > $ ls Foo
> > ls: Foo: No such file or directory
> >
> > I was wondering why an `\includegraphics{example-image-A}` failed
> > (which I got from some post on tex.sx) and I surmise from the above
> > that this has possibly to do with kpsewhich or at least with the way
> > pdftex finds files.
> >
> > I guess the rationale is that if kpsewhich were to be
> > case-insensitive on OSes with case insensitive file systems,
> > TeX documents would more easily behave differently on different
> > systems ?
> >
> > Best
> >
> > Jean-Fran?ois
> >
> >
>
> --
> Justin C. Walker, Curmudgeon at Large
> Institute for the Absorption of Federal Funds
> -----------
> If it weren't for carbon-14, I wouldn't date at all.
> -----------
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170920/17daf5eb/attachment.html>

From norbert at preining.info  Wed Sep 20 02:01:45 2017
From: norbert at preining.info (Norbert Preining)
Date: Wed, 20 Sep 2017 09:01:45 +0900
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <201709192242.v8JMgcrH006681@freefriends.org>
References: <F01339A8-B0C7-4640-B2AC-4CFDD0BFE072@me.com>
 <201709192242.v8JMgcrH006681@freefriends.org>
Message-ID: <20170920000145.w3r5uxyis62jsqsr@burischnitzel.preining.info>

> What I can imagine doing is first looking up the name as-is, and iff
> that fails, doing a case-insensitive lookup. Patches welcome, else I

But that would change semantics on Unix file systems, right?
I know that within TL we check whether there are case clashes, but
we don't know what users are doing.

Lots of work I guess, but maybe one needs to check for each TEXMF tree
referenced whether the underlying FS is case-sensitive or not
(creating a lowercase file and check for uppercase existence),
and then do file searches sensitive according to the location of each
tree.

Not that I want to implement that, though :-(

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From Herbert.Voss at FU-Berlin.DE  Wed Sep 20 07:11:07 2017
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Wed, 20 Sep 2017 07:11:07 +0200
Subject: [tex-live] Fwd: TEXLIVE
In-Reply-To: <11B97878-9E94-4D13-B334-EEE269A8CEC9@gmail.com>
References: <CAEqF=WgAAFzrV=F1KnKHbfsKR3q-5kS+iizQc6evczeqSM0qkQ@mail.gmail.com>
 <11B97878-9E94-4D13-B334-EEE269A8CEC9@gmail.com>
Message-ID: <57248.87.144.108.240.1505884267.webmail@webmail.zedat.fu-berlin.de>


De Kleurenfamilie - Susanne G. Loeber schrieb:
>

>> ik heb een update van TEXLIVE gedaan. Ik krijg de volgende foutmelding
>> wanneer ik ConTeXt LuaTEX wil draaien. Wat kunnen we hieraan

You have to run lualatex and not luatex!

Herbert






From kakuto at fuk.kindai.ac.jp  Wed Sep 20 09:26:44 2017
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Wed, 20 Sep 2017 16:26:44 +0900
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <201709192242.v8JMgcrH006681@freefriends.org>
References: <201709192242.v8JMgcrH006681@freefriends.org>
Message-ID: <27925EBB22A240D1B5716FECB0F2E961@CJ3001517A>

> It would be wrong to "randomly" return any case-insensitive match 

I have changed to return actual file names on Windows,
probably with a little loss of performance.

In TeX Live 2018, users will obtain:

C:\Users\Philip.Taylor>kpsewhich PLAIN.TEX
c:/TeX/Live/2018/texmf-dist/tex/plain/base/plain.tex

C:\Users\Philip.Taylor>kpsewhich PLAIN.TeX
c:/TeX/Live/2018/texmf-dist/tex/plain/base/plain.tex

C:\Users\Philip.Taylor>kpsewhich Plain.TeX
c:/TeX/Live/2018/texmf-dist/tex/plain/base/plain.tex

C:\Users\Philip.Taylor>kpsewhich plain.TeX
c:/TeX/Live/2018/texmf-dist/tex/plain/base/plain.tex

C:\Users\Philip.Taylor>kpsewhich ieeetran.cls
c:/TeX/Live/2018/texmf-dist/tex/latex/ieeetran/IEEEtran.cls

Thanks,
Akira


From gnwiii at gmail.com  Wed Sep 20 16:54:08 2017
From: gnwiii at gmail.com (George N. White III)
Date: Wed, 20 Sep 2017 11:54:08 -0300
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <27925EBB22A240D1B5716FECB0F2E961@CJ3001517A>
References: <201709192242.v8JMgcrH006681@freefriends.org>
 <27925EBB22A240D1B5716FECB0F2E961@CJ3001517A>
Message-ID: <CAKTOP44TdpZYFJQjVvTtyYSuuM-S1rC=_kfPTX7WFE3ex5CVWw@mail.gmail.com>

On 20 September 2017 at 04:26, Akira Kakuto <kakuto at fuk.kindai.ac.jp> wrote:

> It would be wrong to "randomly" return any case-insensitive match
>>
>
> I have changed to return actual file names on Windows,
> probably with a little loss of performance.
>

I think this will be useful, but it doesn't fully address the problem of
documents shared between Windows and linux users where the file
last edited by the Windows user references "example-image-A.pdf".
It helps only in the sense that linux user asks Windows user where
to find "example-image-A.pdf".  Windows user consults
the new kpeswhich and discovers: ".../tex/latex/mwe/example-image-a.pdf".




> In TeX Live 2018, users will obtain:
>
> C:\Users\Philip.Taylor>kpsewhich PLAIN.TEX
> c:/TeX/Live/2018/texmf-dist/tex/plain/base/plain.tex
>
> C:\Users\Philip.Taylor>kpsewhich PLAIN.TeX
> c:/TeX/Live/2018/texmf-dist/tex/plain/base/plain.tex
>
> C:\Users\Philip.Taylor>kpsewhich Plain.TeX
> c:/TeX/Live/2018/texmf-dist/tex/plain/base/plain.tex
>
> C:\Users\Philip.Taylor>kpsewhich plain.TeX
> c:/TeX/Live/2018/texmf-dist/tex/plain/base/plain.tex
>
> C:\Users\Philip.Taylor>kpsewhich ieeetran.cls
> c:/TeX/Live/2018/texmf-dist/tex/latex/ieeetran/IEEEtran.cls
>
> Thanks,
> Akira
>
>


-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170920/e15eb7d2/attachment.html>

From gnwiii at gmail.com  Wed Sep 20 17:07:42 2017
From: gnwiii at gmail.com (George N. White III)
Date: Wed, 20 Sep 2017 12:07:42 -0300
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <CAC1phyYe3TWB132zPT_+M5fryp-qrBnRxX82EQVs0OqhrfM_Bw@mail.gmail.com>
References: <201709102052.v8AKqLlG010782@freefriends.org>
 <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
 <15e6e11e4a0.274f.7132861acd90c364b5eb878c32bce117@gmail.com>
 <465DDF28-DF0E-4931-8832-47B90CAC0B6E@free.fr>
 <20170911064219.5pl3dxkcaup3wuww@burischnitzel.preining.info>
 <CAC1phyY1i517WrOX7eD1dkxQEY3sZwn9nNTGCpkBTvdh7U7r0Q@mail.gmail.com>
 <C7BEF2CF-5744-47E5-BCEE-CAF8887A3C2D@free.fr>
 <CAC1phyZ0mPMWPrA0v0X-wCcHDQTAWE0R=xQvi+AujLsq7y4rTg@mail.gmail.com>
 <9FAE8C90-FB20-4F27-BEA5-8FF40BBC5369@free.fr>
 <E83F5E20-35AD-41FC-9F7F-99F7D5258FBE@free.fr>
 <0C061DE7-EC5B-44E7-BFEA-2C9786707468@free.fr>
 <4F82C853-7E92-4894-9C94-EC8400F3E56E@free.fr>
 <CAC1phyYe3TWB132zPT_+M5fryp-qrBnRxX82EQVs0OqhrfM_Bw@mail.gmail.com>
Message-ID: <CAKTOP46sH5euDVja3j38zb7pAVPvQ3mjCNG1yuoyzPoE+z3Wwg@mail.gmail.com>

On 11 September 2017 at 16:22, Zdenek Wagner <zdenek.wagner at gmail.com>
wrote:

I can confirm that perldoc perldoc behaves strangely om Mac but perldoc
> -oman perldoc works. I have perl in /opt/local/bin/perl but port info perl
> complains that perl does not exist. I do not remember how it was installed.
> When I tried perldoc -oman perldoc for the first time I got this message:
>
> $ perldoc -oman perldoc
>
> You have an old groff. Update to version 1.20.1 for good Unicode support.
>
> If you don't upgrade, wide characters may come out oddly.
>
>  at /opt/local/lib/perl5/5.24/Pod/Perldoc.pm line 1513.
>
> You have an old groff. Update to version 1.20.1 for good Unicode support.
>
> If you don't upgrade, wide characters may come out oddly.
>
>  at /opt/local/lib/perl5/5.24/Pod/Perldoc.pm line 1513.
>
>
> I do not know the source of my groff but it was not from MacPorts. After
> port install groff this message disapeared but behaviour is the same, -oman
> is still needed.
>
Apple provides (obsolete) /usr/bin/groff (version 1.19.2 on El Capitan)
with the Xcode command-line tools.    There are 3 modules that perldoc can
use to
format terminal output:

Pod::Perldoc::ToTerm (perldoc -oterm) , gives "1NAME1" output on macOS.
This is the default on linux, macports, and Msys2 (Windows)
Pod::Perldoc::ToMan (perldoc -oman -- requires groff, adds man-style
headers)  used by Apple's perldoc
Pod::Perldoc::ToText (perldoc -otext or perldoc -t), default for Windows

I have no idea where the default behaviour is configured.  Macports should
follow Xcode and make "-oman" the default.  Apple uses a number of
outdated GNU tools to avoid GPL3, so I don't expect Unicode support will
appear in Apple's groff.

-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170920/e2e186e8/attachment.html>

From manfred at dante.de  Wed Sep 20 20:48:37 2017
From: manfred at dante.de (Manfred Lotz)
Date: Wed, 20 Sep 2017 20:48:37 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <201709192242.v8JMgcrH006681@freefriends.org>
References: <F01339A8-B0C7-4640-B2AC-4CFDD0BFE072@me.com>
 <201709192242.v8JMgcrH006681@freefriends.org>
Message-ID: <20170920204837.2022dcc3@hogwart.bsdlocal.net>

Is there time to check the case sensitivity of the filesystem by
running 
   touch   some_weird_name
   touch   SOME_WEIRD_name
?

If there was a single file created then we have a case insensitive file
system. Otherwise we have a case sensitive file system. Ok, after that
I would delete the file or both files.

Just an idea, but perhaps a naive idea. In this case I apologize.

-- 
Manfred



On Tue, 19 Sep 2017 22:42:38 GMT
Karl Berry <karl at freefriends.org> wrote:

> What I can imagine doing is first looking up the name as-is, and iff
> that fails, doing a case-insensitive lookup. Patches welcome, else I
> will put it on my ever-lengthening list. It essentially amounts to
> removing the compile-time configuration done now, and falling back to
> the case-insensitive test regardless of the system.
> 
> It would be wrong to "randomly" return any case-insensitive match if
> an exact match exists.  That is, on Unix, \input FOO.TEX should
> prefer a file named "FOO.TEX" to "foo.tex".
> 
> -k
> 
> P.S. Explanation of the current behavior: Kpathsea was written at a
> time when in practice there was no such thing as an operating system
> which supported both case-insensitve and case-sensitive filesystems.
> (Also at a time when no one dreamed that a company would make such a
> disruptive and incompatible change to their systems, but never
> mind.)  Therefore the test was done at configure time.  In
> kpathsea/config.h there is:
> 
> #if defined(OS2)     || \
>     defined(MSDOS)   || defined(__MSDOS__) || defined(DOS)    || \
>     defined(WIN32)   || defined(__WIN32__) || defined(_WIN32) || \
>     defined(DJGPP)   || defined(__DJGPP__) || \
>     defined(MINGW32) || defined(__MINGW32__)
> #define DOSISH
> #endif
> 
> which is ultimately what determines whether case-sensitive or
> -insensitive test is done.
> 
> (Zdenek, why this does not match on your OS/2 system, I can't say.)


From kakuto at fuk.kindai.ac.jp  Wed Sep 20 23:42:59 2017
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu, 21 Sep 2017 06:42:59 +0900
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
Message-ID: <7ED7BC56C2EB4DA8A2EFE77E91956FC5@CJ3001517A>

> probably with a little loss of performance.

In my experiment, it is not usually noticeable.
It may become noticeable only when there are
many files with the same name and --all switch
is used, for example, kpsewhich --format=doc --all readme.md.

Best,
Akira


From reinhard.kotucha at web.de  Thu Sep 21 01:45:02 2017
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Thu, 21 Sep 2017 01:45:02 +0200
Subject: [tex-live] TeX and recent ghostscript changes
In-Reply-To: <CMM.0.95.0.1505773040.beebe@gamma.math.utah.edu>
References: <CMM.0.95.0.1505773040.beebe@gamma.math.utah.edu>
Message-ID: <22978.64894.720205.532283@zaphod.ms25.net>

On 2017-09-18 at 16:17:20 -0600, Nelson H. F. Beebe wrote:

 > There is a round of release candidates in progress for ghostscript: I
 > installed version 9.21 here on 5-Sep-2017, and since then 9.22rc1
 > appeared on 13-Sep-2017.  There are discussions of this on the
 > developers list (archives at
 > 
 > 	http://ghostscript.com/pipermail/gs-devel/
 > 
 > ), but one message today in particular caught my eye, and may be
 > useful information for the TeX Live team:
 > 
 > >> ...
 > >> To: ken.sharp at artifex.com
 > >> From: Masamichi Hosoda <trueroad at trueroad.jp>
 > >> Subject: Re: [gs-devel] Ghostscript/GhostPDL 9.22 Release Candidate 1
 > >> 
 > >> >> > Please give them a try on your system if you're interested
 > >> >> > in helping test the release-in-progress. Your feedback is
 > >> >> > appreciated.
 > >> >>
 > >> >>It seems that `-dPDFDontUseFontObjectNum` option does not work.

Thank you very much for the link, Nelson.

It's a matter of fact that it's difficult to merge two subsets of a
particular font.

They claim that two fonts with the same name are not necessarily
identical.  Of cource, they are.  The Type 1 specification clearly
requires that there are no different fonts with the same /FontName.
All font vendors are aware of this requirement and consider it.  There
are no two fonts with the same /FontName.

Only Ghostscript provides completely different versions of the URW
fonts with the same /FontName and /UniqueID.

The fonts you can download have more glyphs than the original fonts
donated by URW, the fonts compiled into the Ghostscript binary have
less glyphs than the original URW fonts.  The built-in symbol font has
an additional glyph which is not available in the fonts you can
dowmload from ghostscript.com or in the original URW fonts.

But all these three variants have the same /FontName and the same
/UniqueID.

Hence the problem is home-brewed.  I still don't understand why one
can be so silly to provide three completely different fonts with the
same /UniqueID.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Thu Sep 21 08:56:37 2017
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 21 Sep 2017 08:56:37 +0200
Subject: [tex-live] display issue with "tlmgr help" ??
In-Reply-To: <CAKTOP46sH5euDVja3j38zb7pAVPvQ3mjCNG1yuoyzPoE+z3Wwg@mail.gmail.com>
References: <201709102052.v8AKqLlG010782@freefriends.org>
 <9926AED6-AE92-45BE-9D20-23575D63C17B@free.fr>
 <15e6e11e4a0.274f.7132861acd90c364b5eb878c32bce117@gmail.com>
 <465DDF28-DF0E-4931-8832-47B90CAC0B6E@free.fr>
 <20170911064219.5pl3dxkcaup3wuww@burischnitzel.preining.info>
 <CAC1phyY1i517WrOX7eD1dkxQEY3sZwn9nNTGCpkBTvdh7U7r0Q@mail.gmail.com>
 <C7BEF2CF-5744-47E5-BCEE-CAF8887A3C2D@free.fr>
 <CAC1phyZ0mPMWPrA0v0X-wCcHDQTAWE0R=xQvi+AujLsq7y4rTg@mail.gmail.com>
 <9FAE8C90-FB20-4F27-BEA5-8FF40BBC5369@free.fr>
 <E83F5E20-35AD-41FC-9F7F-99F7D5258FBE@free.fr>
 <0C061DE7-EC5B-44E7-BFEA-2C9786707468@free.fr>
 <4F82C853-7E92-4894-9C94-EC8400F3E56E@free.fr>
 <CAC1phyYe3TWB132zPT_+M5fryp-qrBnRxX82EQVs0OqhrfM_Bw@mail.gmail.com>
 <CAKTOP46sH5euDVja3j38zb7pAVPvQ3mjCNG1yuoyzPoE+z3Wwg@mail.gmail.com>
Message-ID: <CALBOmsZYHFq7Md2Mi6bshuZoO+b++yu7nfBvWDgzoL-jib7_Dw@mail.gmail.com>

On 20 September 2017 at 17:07, George N. White III wrote:
> On 11 September 2017 at 16:22, Zdenek Wagner wrote:
>
>> I can confirm that perldoc perldoc behaves strangely om Mac but perldoc
>> -oman perldoc works. I have perl in /opt/local/bin/perl but port info perl
>> complains that perl does not exist. I do not remember how it was installed.

You probably have "perl5 +perl5_24" installed (which in turn installed
perl5.24).

You can check that with
    port provides /opt/local/bin/perl


> Apple provides (obsolete) /usr/bin/groff (version 1.19.2 on El Capitan) with
> the Xcode command-line tools.    There are 3 modules that perldoc can use to
> format terminal output:
>
> Pod::Perldoc::ToTerm (perldoc -oterm) , gives "1NAME1" output on macOS.
> This is the default on linux, macports, and Msys2 (Windows)
> Pod::Perldoc::ToMan (perldoc -oman -- requires groff, adds man-style
> headers)  used by Apple's perldoc
> Pod::Perldoc::ToText (perldoc -otext or perldoc -t), default for Windows
>
> I have no idea where the default behaviour is configured.  Macports should
> follow Xcode and make "-oman" the default.  Apple uses a number of
> outdated GNU tools to avoid GPL3, so I don't expect Unicode support will
> appear in Apple's groff.

If someone can provide me clear instructions what needs to be done in
MacPorts to make the man page work out of the box, I can probably fix
it. I remember some problems, but it wasn't anoying enough to dive
into it and figure out how to fix it. (I forgot my computer at home,
so I cannot test anything for a couple of days, but I can look later.)
The GPL3 licence is not a problem from the MacPorts point of view (it
might only be a problem if you wanted it to work out of the box on a
clean mac without a package manager).

Mojca

From wl at gnu.org  Thu Sep 21 09:08:59 2017
From: wl at gnu.org (Werner LEMBERG)
Date: Thu, 21 Sep 2017 09:08:59 +0200 (CEST)
Subject: [tex-live] TeX and recent ghostscript changes
In-Reply-To: <22978.64894.720205.532283@zaphod.ms25.net>
References: <CMM.0.95.0.1505773040.beebe@gamma.math.utah.edu>
 <22978.64894.720205.532283@zaphod.ms25.net>
Message-ID: <20170921.090859.31203801657156296.wl@gnu.org>


> It's a matter of fact that it's difficult to merge two subsets of a
> particular font.

This is not what we (the lilypond team) are after.  We need proper
merging of non-subsetted fonts.

> They claim that two fonts with the same name are not necessarily
> identical.  [...]

This refers mainly to bad names for subsetted fonts as produced by
OpenOffice, IIRC.  In other words, you are barking the wrong tree.

> But all these three variants have the same /FontName and the same
> /UniqueID.

The concept of /UniqueID was abandoned many years ago already by
Adobe, for good reasons.


    Werner

From beebe at math.utah.edu  Thu Sep 21 14:46:25 2017
From: beebe at math.utah.edu (Nelson H. F. Beebe)
Date: Thu, 21 Sep 2017 06:46:25 -0600
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <20170920204837.2022dcc3@hogwart.bsdlocal.net>
Message-ID: <CMM.0.95.0.1505997985.beebe@gamma.math.utah.edu>

Manfred Lotz <manfred at dante.de> writes on Wed, 20 Sep 2017 20:48:37
+0200 about checking for a case-preserving filesystem:

>> ...
>> Is there time to check the case sensitivity of the filesystem by
>> running 
>> 
>>    touch   some_weird_name
>>    touch   SOME_WEIRD_name
>> ...

Let us remember that such things are a property of the filesystem,
rather than the O/S.  Thus, such a check cannot be done at configure
time, but only at run time, and then only in the same filesystem where
the question needs to be answered.  However, the touch command will
fail if that filesystem is mounted read-only.

At our large site (18K+ users), for performance reasons, our
thin-client servers get read-only nightly copies of much shared
software in local directory trees.  On other systems, ZFS snapshots
may be distributed to secondary and tertiary servers, and then
NFS-mounted from there by client machines: they too, being snapshots,
are read-only.

Thus, the problem of single-case vs case-insensitive vs
case-insensitive + case-preserving vs case sensitive filesystem
variants is not easy to deal with automatically by tools like tlmgr
and TeX input commands.

When I find filename lettercase conflicts in user (La)TeX files, I
point out to them the necessity of consistent filenaming conventions,
the easiest to remember being to downcase everything, except for two
files: Makefile and README.  I also point out that spaces, and
punctuation other than a single dot, should be avoided in filenames,
and that while modern systems handle Unicode characters above the
ASCII limit of U+007F, older ones, and many software tools, do not.
Then there is the issue of filename length issues as well, 8 + 3, 31,
63, 127, 255, ...  What a mess.

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- University of Utah                    FAX: +1 801 581 4148                  -
- Department of Mathematics, 110 LCB    Internet e-mail: beebe at math.utah.edu  -
- 155 S 1400 E RM 233                       beebe at acm.org  beebe at computer.org -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe/ -
-------------------------------------------------------------------------------

From cereda.paulo at gmail.com  Thu Sep 21 15:57:09 2017
From: cereda.paulo at gmail.com (Paulo Roberto Massa Cereda)
Date: Thu, 21 Sep 2017 10:57:09 -0300
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <CMM.0.95.0.1505997985.beebe@gamma.math.utah.edu>
References: <CMM.0.95.0.1505997985.beebe@gamma.math.utah.edu>
Message-ID: <dfbaaa53-5bd3-43c4-13a0-8041cbd2fad0@gmail.com>

'ello,

I usually favour case sensitivity to be the norm, mostly because it 
makes things simpler (grain of salt here) by ensuring a deterministic 
result, i.e, the result maps 1:1 what we were looking for without 
potential traps and/or pitfalls.

That said, case insensitivity is also interesting towards sanitising 
results (more salt please), i.e, "john" still refers to "John" which 
might be a good thing. However, there's a huge room for interpretation 
here. Also, I am not sure how sorting would be in these situations. I 
like to favour lexicographic rules most of the time, but when we ignore 
case, we are losing a potential significant information.

In conclusion, nothing can be drawn for here (except the fact that I am 
trying to divert myself from writing a thesis). :) My suggestion is to 
keep things as they are, so we save energy and effort: entia non sunt 
multiplicanda praeter necessitatem. :)

Cheerio!

Paulo

Em 21-09-2017 09:46, Nelson H. F. Beebe escreveu:
> Manfred Lotz <manfred at dante.de> writes on Wed, 20 Sep 2017 20:48:37
> +0200 about checking for a case-preserving filesystem:
> 
>>> ...
>>> Is there time to check the case sensitivity of the filesystem by
>>> running
>>>
>>>     touch   some_weird_name
>>>     touch   SOME_WEIRD_name
>>> ...
> 
> Let us remember that such things are a property of the filesystem,
> rather than the O/S.  Thus, such a check cannot be done at configure
> time, but only at run time, and then only in the same filesystem where
> the question needs to be answered.  However, the touch command will
> fail if that filesystem is mounted read-only.
> 
> At our large site (18K+ users), for performance reasons, our
> thin-client servers get read-only nightly copies of much shared
> software in local directory trees.  On other systems, ZFS snapshots
> may be distributed to secondary and tertiary servers, and then
> NFS-mounted from there by client machines: they too, being snapshots,
> are read-only.
> 
> Thus, the problem of single-case vs case-insensitive vs
> case-insensitive + case-preserving vs case sensitive filesystem
> variants is not easy to deal with automatically by tools like tlmgr
> and TeX input commands.
> 
> When I find filename lettercase conflicts in user (La)TeX files, I
> point out to them the necessity of consistent filenaming conventions,
> the easiest to remember being to downcase everything, except for two
> files: Makefile and README.  I also point out that spaces, and
> punctuation other than a single dot, should be avoided in filenames,
> and that while modern systems handle Unicode characters above the
> ASCII limit of U+007F, older ones, and many software tools, do not.
> Then there is the issue of filename length issues as well, 8 + 3, 31,
> 63, 127, 255, ...  What a mess.
> 
> -------------------------------------------------------------------------------
> - Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
> - University of Utah                    FAX: +1 801 581 4148                  -
> - Department of Mathematics, 110 LCB    Internet e-mail: beebe at math.utah.edu  -
> - 155 S 1400 E RM 233                       beebe at acm.org  beebe at computer.org -
> - Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe/ -
> -------------------------------------------------------------------------------
> 

From zdenek.wagner at gmail.com  Thu Sep 21 16:53:30 2017
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 21 Sep 2017 16:53:30 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <dfbaaa53-5bd3-43c4-13a0-8041cbd2fad0@gmail.com>
References: <CMM.0.95.0.1505997985.beebe@gamma.math.utah.edu>
 <dfbaaa53-5bd3-43c4-13a0-8041cbd2fad0@gmail.com>
Message-ID: <CAC1phyZNnAwf4mGq6hf0BUKUPQZbmvMTxnb5cZb+oejvnCmTbQ@mail.gmail.com>

Hello,

personally I prefer case sensitivity but we do not live in such an ideal
world ensuring that it works Nelson described clearly the problem and I add
one more. Assume you commit a directory with two files the names of which
differ in case only to a versioning system. The a user tries to
checkout/clone (depending on the type of the VCS) the directory to a case
insensitive system and it fails. Even some names may be invalid, for
instance ptype.txt is invalid in OS/2 (ptype was an abbreviation for
property type and my colleagues had to rename the file so that I could
checkout the repo in OS/2).

File systems nowadays support Unicode but there are still FSs wothoout such
a support. If I get a zip file created on a non-Unicode system, I have
problems because

Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2017-09-21 15:57 GMT+02:00 Paulo Roberto Massa Cereda <
cereda.paulo at gmail.com>:

> 'ello,
>
> I usually favour case sensitivity to be the norm, mostly because it makes
> things simpler (grain of salt here) by ensuring a deterministic result,
> i.e, the result maps 1:1 what we were looking for without potential traps
> and/or pitfalls.
>
> That said, case insensitivity is also interesting towards sanitising
> results (more salt please), i.e, "john" still refers to "John" which might
> be a good thing. However, there's a huge room for interpretation here.
> Also, I am not sure how sorting would be in these situations. I like to
> favour lexicographic rules most of the time, but when we ignore case, we
> are losing a potential significant information.
>
> In conclusion, nothing can be drawn for here (except the fact that I am
> trying to divert myself from writing a thesis). :) My suggestion is to keep
> things as they are, so we save energy and effort: entia non sunt
> multiplicanda praeter necessitatem. :)
>
> Cheerio!
>
> Paulo
>
>
> Em 21-09-2017 09:46, Nelson H. F. Beebe escreveu:
>
>> Manfred Lotz <manfred at dante.de> writes on Wed, 20 Sep 2017 20:48:37
>> +0200 about checking for a case-preserving filesystem:
>>
>> ...
>>>> Is there time to check the case sensitivity of the filesystem by
>>>> running
>>>>
>>>>     touch   some_weird_name
>>>>     touch   SOME_WEIRD_name
>>>> ...
>>>>
>>>
>> Let us remember that such things are a property of the filesystem,
>> rather than the O/S.  Thus, such a check cannot be done at configure
>> time, but only at run time, and then only in the same filesystem where
>> the question needs to be answered.  However, the touch command will
>> fail if that filesystem is mounted read-only.
>>
>> At our large site (18K+ users), for performance reasons, our
>> thin-client servers get read-only nightly copies of much shared
>> software in local directory trees.  On other systems, ZFS snapshots
>> may be distributed to secondary and tertiary servers, and then
>> NFS-mounted from there by client machines: they too, being snapshots,
>> are read-only.
>>
>> Thus, the problem of single-case vs case-insensitive vs
>> case-insensitive + case-preserving vs case sensitive filesystem
>> variants is not easy to deal with automatically by tools like tlmgr
>> and TeX input commands.
>>
>> When I find filename lettercase conflicts in user (La)TeX files, I
>> point out to them the necessity of consistent filenaming conventions,
>> the easiest to remember being to downcase everything, except for two
>> files: Makefile and README.  I also point out that spaces, and
>> punctuation other than a single dot, should be avoided in filenames,
>> and that while modern systems handle Unicode characters above the
>> ASCII limit of U+007F, older ones, and many software tools, do not.
>> Then there is the issue of filename length issues as well, 8 + 3, 31,
>> 63, 127, 255, ...  What a mess.
>>
>> ------------------------------------------------------------
>> -------------------
>> - Nelson H. F. Beebe                    Tel: +1 801 581 5254
>>       -
>> - University of Utah                    FAX: +1 801 581 4148
>>       -
>> - Department of Mathematics, 110 LCB    Internet e-mail:
>> beebe at math.utah.edu  -
>> - 155 S 1400 E RM 233                       beebe at acm.org
>> beebe at computer.org -
>> - Salt Lake City, UT 84112-0090, USA    URL:
>> http://www.math.utah.edu/~beebe/ -
>> ------------------------------------------------------------
>> -------------------
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170921/c90aa72e/attachment.html>

From manfred at dante.de  Thu Sep 21 17:42:31 2017
From: manfred at dante.de (Manfred Lotz)
Date: Thu, 21 Sep 2017 17:42:31 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <CMM.0.95.0.1505997985.beebe@gamma.math.utah.edu>
References: <20170920204837.2022dcc3@hogwart.bsdlocal.net>
 <CMM.0.95.0.1505997985.beebe@gamma.math.utah.edu>
Message-ID: <20170921174231.7652d8a6@hogwart.bsdlocal.net>

On Thu, 21 Sep 2017 06:46:25 -0600
"Nelson H. F. Beebe" <beebe at math.utah.edu> wrote:

> Manfred Lotz <manfred at dante.de> writes on Wed, 20 Sep 2017 20:48:37
> +0200 about checking for a case-preserving filesystem:
> 
> >> ...
> >> Is there time to check the case sensitivity of the filesystem by
> >> running 
> >> 
> >>    touch   some_weird_name
> >>    touch   SOME_WEIRD_name
> >> ...  
> 
> Let us remember that such things are a property of the filesystem,
> rather than the O/S.  Thus, such a check cannot be done at configure
> time, but only at run time, and then only in the same filesystem where
> the question needs to be answered.  However, the touch command will
> fail if that filesystem is mounted read-only.
> 

Of course, at run time. But read-only is a show stopper, I think.



> At our large site (18K+ users), for performance reasons, our
> thin-client servers get read-only nightly copies of much shared
> software in local directory trees.  On other systems, ZFS snapshots
> may be distributed to secondary and tertiary servers, and then
> NFS-mounted from there by client machines: they too, being snapshots,
> are read-only.
> 
> Thus, the problem of single-case vs case-insensitive vs
> case-insensitive + case-preserving vs case sensitive filesystem
> variants is not easy to deal with automatically by tools like tlmgr
> and TeX input commands.
> 
> When I find filename lettercase conflicts in user (La)TeX files, I
> point out to them the necessity of consistent filenaming conventions,
> the easiest to remember being to downcase everything, except for two
> files: Makefile and README.  I also point out that spaces, and
> punctuation other than a single dot, should be avoided in filenames,
> and that while modern systems handle Unicode characters above the
> ASCII limit of U+007F, older ones, and many software tools, do not.
> Then there is the issue of filename length issues as well, 8 + 3, 31,
> 63, 127, 255, ...  What a mess.
> 
> -------------------------------------------------------------------------------
> - Nelson H. F. Beebe                    Tel: +1 801 581
> 5254                  -
> - University of Utah                    FAX: +1 801 581
> 4148                  -
> - Department of Mathematics, 110 LCB    Internet e-mail:
> beebe at math.utah.edu  -
> - 155 S 1400 E RM 233                       beebe at acm.org
> beebe at computer.org -
> - Salt Lake City, UT 84112-0090, USA    URL:
> http://www.math.utah.edu/~beebe/ -
> -------------------------------------------------------------------------------


From zdenek.wagner at gmail.com  Thu Sep 21 16:51:16 2017
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 21 Sep 2017 16:51:16 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <dfbaaa53-5bd3-43c4-13a0-8041cbd2fad0@gmail.com>
References: <CMM.0.95.0.1505997985.beebe@gamma.math.utah.edu>
 <dfbaaa53-5bd3-43c4-13a0-8041cbd2fad0@gmail.com>
Message-ID: <CAC1phyaxKC6VcsjAmCW0Vj-x06fk8aG7M3-cSnmnWw6LD_CUvw@mail.gmail.com>

Hello,

personally I prefer case sensitivity but we do not live in such an ideal
world ensuring that it works Nelson described clearly the problem and I add
one more. Assume you commit a directory with two files the names of which
differ in case only to a versioning system. The a user tries to
checkout/clone (depending on the type of the VCS) the directory to a case
insensitive system and it fails. Even some names may be invalid, for
instance ptype.txt is invalid in OS/2 (ptype was an abbreviation for
property type and my colleagues had to rename the file so that I could
checkout the repo in OS/2).

File systems nowadays support Unicode but there are still FSs wothoout such
a support. If I get a zip file created on a non-Unicode system, I have
problems because I am not able to type the file name on my keyboard and
sometimes I am not even able to use the file via GUI because the graphical
application is unable to send the file name to the OS.

Even if the file name is legal, imagine what I can do with a file named in
Chinese. I do not know Chinese, I do not have Chinese keyboard and not
knowing Chinese I would not be able to find the glyphs on the keyboard. I
may be connected to the server via ssh from a thin client wothout any GUI
so that copy/paste is unavailable. I know that I can use "ls -1" followed
by awk to locate the file name and generate a script for working with it
but not all users know how to solve the problem of untypable file name.

Thus my rules how to survive are:

1. Lowercase file names unless a different case is required
2. ASCII file names without spaces and without punctuations
3. Never put two files differing in case only to the same directory

Some time ago a user created EPS files on Windows and the names had
inconsistend names and committed it to our svn server. The LaTeX document
was not compilable on Linux. I decided to convert everything consistently
to lowercase, it was jus a series of "svn mv" commands. I fixed
\includegraphics command and when it worked, I committed the changes. The
Windows user then tried "svn up" and it failed because svn was unable to
fetch the EPS files with names converted to lowercase. It seems that "svn
up" first fetches the new files and only after that deletes the old files
removed from the repo. The only solution was to delete the working copy and
checkout the fresh one. So you are asking for everyda's problems if you
collaborate with other people and do not follow the three simple rules
given above. And the change in the kpsea library will not solve them, the
world is too heterogeneous.


Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz

2017-09-21 15:57 GMT+02:00 Paulo Roberto Massa Cereda <
cereda.paulo at gmail.com>:

> 'ello,
>
> I usually favour case sensitivity to be the norm, mostly because it makes
> things simpler (grain of salt here) by ensuring a deterministic result,
> i.e, the result maps 1:1 what we were looking for without potential traps
> and/or pitfalls.
>
> That said, case insensitivity is also interesting towards sanitising
> results (more salt please), i.e, "john" still refers to "John" which might
> be a good thing. However, there's a huge room for interpretation here.
> Also, I am not sure how sorting would be in these situations. I like to
> favour lexicographic rules most of the time, but when we ignore case, we
> are losing a potential significant information.
>
> In conclusion, nothing can be drawn for here (except the fact that I am
> trying to divert myself from writing a thesis). :) My suggestion is to keep
> things as they are, so we save energy and effort: entia non sunt
> multiplicanda praeter necessitatem. :)
>
> Cheerio!
>
> Paulo
>
>
> Em 21-09-2017 09:46, Nelson H. F. Beebe escreveu:
>
>> Manfred Lotz <manfred at dante.de> writes on Wed, 20 Sep 2017 20:48:37
>> +0200 about checking for a case-preserving filesystem:
>>
>> ...
>>>> Is there time to check the case sensitivity of the filesystem by
>>>> running
>>>>
>>>>     touch   some_weird_name
>>>>     touch   SOME_WEIRD_name
>>>> ...
>>>>
>>>
>> Let us remember that such things are a property of the filesystem,
>> rather than the O/S.  Thus, such a check cannot be done at configure
>> time, but only at run time, and then only in the same filesystem where
>> the question needs to be answered.  However, the touch command will
>> fail if that filesystem is mounted read-only.
>>
>> At our large site (18K+ users), for performance reasons, our
>> thin-client servers get read-only nightly copies of much shared
>> software in local directory trees.  On other systems, ZFS snapshots
>> may be distributed to secondary and tertiary servers, and then
>> NFS-mounted from there by client machines: they too, being snapshots,
>> are read-only.
>>
>> Thus, the problem of single-case vs case-insensitive vs
>> case-insensitive + case-preserving vs case sensitive filesystem
>> variants is not easy to deal with automatically by tools like tlmgr
>> and TeX input commands.
>>
>> When I find filename lettercase conflicts in user (La)TeX files, I
>> point out to them the necessity of consistent filenaming conventions,
>> the easiest to remember being to downcase everything, except for two
>> files: Makefile and README.  I also point out that spaces, and
>> punctuation other than a single dot, should be avoided in filenames,
>> and that while modern systems handle Unicode characters above the
>> ASCII limit of U+007F, older ones, and many software tools, do not.
>> Then there is the issue of filename length issues as well, 8 + 3, 31,
>> 63, 127, 255, ...  What a mess.
>>
>> ------------------------------------------------------------
>> -------------------
>> - Nelson H. F. Beebe                    Tel: +1 801 581 5254
>>       -
>> - University of Utah                    FAX: +1 801 581 4148
>>       -
>> - Department of Mathematics, 110 LCB    Internet e-mail:
>> beebe at math.utah.edu  -
>> - 155 S 1400 E RM 233                       beebe at acm.org
>> beebe at computer.org -
>> - Salt Lake City, UT 84112-0090, USA    URL:
>> http://www.math.utah.edu/~beebe/ -
>> ------------------------------------------------------------
>> -------------------
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170921/0a08d35b/attachment-0001.html>

From manfred at dante.de  Thu Sep 21 17:58:03 2017
From: manfred at dante.de (Manfred Lotz)
Date: Thu, 21 Sep 2017 17:58:03 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <CMM.0.95.0.1505997985.beebe@gamma.math.utah.edu>
References: <20170920204837.2022dcc3@hogwart.bsdlocal.net>
 <CMM.0.95.0.1505997985.beebe@gamma.math.utah.edu>
Message-ID: <20170921175803.76d311ee@hogwart.bsdlocal.net>

Nelson,
Do you know if filesystems provide an API call to query their
capabilities? I don't know of anything like this. 

-- Manfred

On Thu, 21 Sep 2017 06:46:25 -0600
"Nelson H. F. Beebe" <beebe at math.utah.edu> wrote:

> Manfred Lotz <manfred at dante.de> writes on Wed, 20 Sep 2017 20:48:37
> +0200 about checking for a case-preserving filesystem:
> 
> >> ...
> >> Is there time to check the case sensitivity of the filesystem by
> >> running 
> >> 
> >>    touch   some_weird_name
> >>    touch   SOME_WEIRD_name
> >> ...  
> 
> Let us remember that such things are a property of the filesystem,
> rather than the O/S.  Thus, such a check cannot be done at configure
> time, but only at run time, and then only in the same filesystem where
> the question needs to be answered.  However, the touch command will
> fail if that filesystem is mounted read-only.
> 
> At our large site (18K+ users), for performance reasons, our
> thin-client servers get read-only nightly copies of much shared
> software in local directory trees.  On other systems, ZFS snapshots
> may be distributed to secondary and tertiary servers, and then
> NFS-mounted from there by client machines: they too, being snapshots,
> are read-only.
> 
> Thus, the problem of single-case vs case-insensitive vs
> case-insensitive + case-preserving vs case sensitive filesystem
> variants is not easy to deal with automatically by tools like tlmgr
> and TeX input commands.
> 
> When I find filename lettercase conflicts in user (La)TeX files, I
> point out to them the necessity of consistent filenaming conventions,
> the easiest to remember being to downcase everything, except for two
> files: Makefile and README.  I also point out that spaces, and
> punctuation other than a single dot, should be avoided in filenames,
> and that while modern systems handle Unicode characters above the
> ASCII limit of U+007F, older ones, and many software tools, do not.
> Then there is the issue of filename length issues as well, 8 + 3, 31,
> 63, 127, 255, ...  What a mess.
> 
> -------------------------------------------------------------------------------
> - Nelson H. F. Beebe                    Tel: +1 801 581
> 5254                  -
> - University of Utah                    FAX: +1 801 581
> 4148                  -
> - Department of Mathematics, 110 LCB    Internet e-mail:
> beebe at math.utah.edu  -
> - 155 S 1400 E RM 233                       beebe at acm.org
> beebe at computer.org -
> - Salt Lake City, UT 84112-0090, USA    URL:
> http://www.math.utah.edu/~beebe/ -
> -------------------------------------------------------------------------------


From zdenek.wagner at gmail.com  Thu Sep 21 19:18:40 2017
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Thu, 21 Sep 2017 19:18:40 +0200
Subject: [tex-live] behaviour of kpsewhich on case-insensitive mac system
In-Reply-To: <20170921175803.76d311ee@hogwart.bsdlocal.net>
References: <20170920204837.2022dcc3@hogwart.bsdlocal.net>
 <CMM.0.95.0.1505997985.beebe@gamma.math.utah.edu>
 <20170921175803.76d311ee@hogwart.bsdlocal.net>
Message-ID: <CAC1phyagagYmLd_V2oWBanRkin6U5HwDs_Rv8TF39oJo_vv83w@mail.gmail.com>

2017-09-21 17:58 GMT+02:00 Manfred Lotz <manfred at dante.de>:

> Nelson,
> Do you know if filesystems provide an API call to query their
> capabilities? I don't know of anything like this.
>

I think that ioctl should do it but I have never tried.

>
> -- Manfred
>



Zden?k Wagner
http://ttsm.icpf.cas.cz/team/wagner.shtml
http://icebearsoft.euweb.cz



>
> On Thu, 21 Sep 2017 06:46:25 -0600
> "Nelson H. F. Beebe" <beebe at math.utah.edu> wrote:
>
> > Manfred Lotz <manfred at dante.de> writes on Wed, 20 Sep 2017 20:48:37
> > +0200 about checking for a case-preserving filesystem:
> >
> > >> ...
> > >> Is there time to check the case sensitivity of the filesystem by
> > >> running
> > >>
> > >>    touch   some_weird_name
> > >>    touch   SOME_WEIRD_name
> > >> ...
> >
> > Let us remember that such things are a property of the filesystem,
> > rather than the O/S.  Thus, such a check cannot be done at configure
> > time, but only at run time, and then only in the same filesystem where
> > the question needs to be answered.  However, the touch command will
> > fail if that filesystem is mounted read-only.
> >
> > At our large site (18K+ users), for performance reasons, our
> > thin-client servers get read-only nightly copies of much shared
> > software in local directory trees.  On other systems, ZFS snapshots
> > may be distributed to secondary and tertiary servers, and then
> > NFS-mounted from there by client machines: they too, being snapshots,
> > are read-only.
> >
> > Thus, the problem of single-case vs case-insensitive vs
> > case-insensitive + case-preserving vs case sensitive filesystem
> > variants is not easy to deal with automatically by tools like tlmgr
> > and TeX input commands.
> >
> > When I find filename lettercase conflicts in user (La)TeX files, I
> > point out to them the necessity of consistent filenaming conventions,
> > the easiest to remember being to downcase everything, except for two
> > files: Makefile and README.  I also point out that spaces, and
> > punctuation other than a single dot, should be avoided in filenames,
> > and that while modern systems handle Unicode characters above the
> > ASCII limit of U+007F, older ones, and many software tools, do not.
> > Then there is the issue of filename length issues as well, 8 + 3, 31,
> > 63, 127, 255, ...  What a mess.
> >
> > ------------------------------------------------------------
> -------------------
> > - Nelson H. F. Beebe                    Tel: +1 801 581
> > 5254                  -
> > - University of Utah                    FAX: +1 801 581
> > 4148                  -
> > - Department of Mathematics, 110 LCB    Internet e-mail:
> > beebe at math.utah.edu  -
> > - 155 S 1400 E RM 233                       beebe at acm.org
> > beebe at computer.org -
> > - Salt Lake City, UT 84112-0090, USA    URL:
> > http://www.math.utah.edu/~beebe/ -
> > ------------------------------------------------------------
> -------------------
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170921/f7cfc7fc/attachment.html>

From reinhard.kotucha at web.de  Fri Sep 22 01:25:26 2017
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 22 Sep 2017 01:25:26 +0200
Subject: [tex-live] TeX and recent ghostscript changes
In-Reply-To: <20170921.090859.31203801657156296.wl@gnu.org>
References: <CMM.0.95.0.1505773040.beebe@gamma.math.utah.edu>
 <22978.64894.720205.532283@zaphod.ms25.net>
 <20170921.090859.31203801657156296.wl@gnu.org>
Message-ID: <22980.19046.57012.546414@zaphod.ms25.net>

On 2017-09-21 at 09:08:59 +0200, Werner LEMBERG wrote:

 > > It's a matter of fact that it's difficult to merge two subsets of a
 > > particular font.
 > 
 > This is not what we (the lilypond team) are after.  We need proper
 > merging of non-subsetted fonts.

Hi Werner,
I must admit that I had not lilypond in mind in the first place.  But
if the fonts are not subsetted and you are willing/able to add a
program to the lilypond distribution which can [de]compress PDF files
(qpdf, pdftk), I'm sure that you can write a script which solves the
problem without much effort.  I'm quite optimistic because I already
repaired a broken PDF file created by InDesign manually.

I can tell you more tomorrow if you are interested.

 > > They claim that two fonts with the same name are not necessarily
 > > identical.  [...]
 > 
 > This refers mainly to bad names for subsetted fonts as produced by
 > OpenOffice, IIRC.  In other words, you are barking the wrong tree.

What's the problem? If OpenOffice does not comply with the PDF specs,
the worst thing Ghostscript can do is to provide a workaround.

 > > But all these three variants have the same /FontName and the same
 > > /UniqueID.
 > 
 > The concept of /UniqueID was abandoned many years ago already by
 > Adobe, for good reasons.

What are these "good reasons"?

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From wl at gnu.org  Fri Sep 22 06:47:56 2017
From: wl at gnu.org (Werner LEMBERG)
Date: Fri, 22 Sep 2017 06:47:56 +0200 (CEST)
Subject: [tex-live] TeX and recent ghostscript changes
In-Reply-To: <22980.19046.57012.546414@zaphod.ms25.net>
References: <22978.64894.720205.532283@zaphod.ms25.net>
 <20170921.090859.31203801657156296.wl@gnu.org>
 <22980.19046.57012.546414@zaphod.ms25.net>
Message-ID: <20170922.064756.377366839171041814.wl@gnu.org>

>  > This is not what we (the lilypond team) are after.  We need
>  > proper merging of non-subsetted fonts.
>
> I must admit that I had not lilypond in mind in the first place.
> But if the fonts are not subsetted and you are willing/able to add a
> program to the lilypond distribution which can [de]compress PDF
> files (qpdf, pdftk), I'm sure that you can write a script which
> solves the problem without much effort.  I'm quite optimistic
> because I already repaired a broken PDF file created by InDesign
> manually.

Yes, we will actively investigate this route since ghostscript seems
to have another bug in the current git version that prevents our
`trick' to work correctly even if we restored the removed option.

Two potential solutions come to my mind.

  . P?ter Szab?'s `pdfsizeopt' tool.

      https://github.com/pts/pdfsizeopt.git

    He recently invested a lot of energy to improve it (it can finally
    compress the lilypond reference manual :-) ? maybe we can directly
    use it, without the intermediate ghostscript step.

  . We were recommended to have a look at `mupdf', which probably has
    the necessary tools already to remove duplicate fonts.  However, I
    don't know this code yet, so I can't tell whether it really works.

      https://mupdf.com/

> I can tell you more tomorrow if you are interested.

Yes, please!

>  > This refers mainly to bad names for subsetted fonts as produced
>  > by OpenOffice, IIRC.  In other words, you are barking the wrong
>  > tree.
>
> What's the problem?  If OpenOffice does not comply with the PDF
> specs, the worst thing Ghostscript can do is to provide a
> workaround.

Not sure about the details, but AFAIU OpenOffice produced subsetted
fonts that were different but had identical names.  This is not
forbidden, I believe (since the PDF object IDs are different), but
very inconvenient for post-processing tools.

>  > The concept of /UniqueID was abandoned many years ago already by
>  > Adobe, for good reasons.
>
> What are these "good reasons"?

To make this work really reliably, you have to register all unique IDs
(or the corresponding foundries) at a central place, something which
doesn't fit the reality since many years.


    Werner


From listas at tex-tipografia.com  Sat Sep 23 14:57:26 2017
From: listas at tex-tipografia.com (Javier Bezos)
Date: Sat, 23 Sep 2017 14:57:26 +0200
Subject: [tex-live] dtx and ins files with luatex
Message-ID: <59C65A36.8010107@tex-tipografia.com>

Now we have luatex and therefore a more or less standard
scripting language, there is the possibility to unpack dtx
files using a method other then docstrip.

If the ins file is self-contained, ie, it can unpack the
dtx just by running it with luatex, without external
dependencies, is it ok with TeXLive, or is it assumed ins
files must be always run with latex or tex? Or if there
is a dts file, is it irrelevant, because the ins file
is not used at all?

Javier

From karl at freefriends.org  Sun Sep 24 01:31:35 2017
From: karl at freefriends.org (Karl Berry)
Date: Sat, 23 Sep 2017 23:31:35 GMT
Subject: [tex-live] dtx and ins files with luatex
In-Reply-To: <59C65A36.8010107@tex-tipografia.com>
Message-ID: <201709232331.v8NNVZHD002176@freefriends.org>

Hi Javier - luatex is amazingly powerful = not secure.  Please don't
require it merely to unpack a dtx.  That's not a good precedent for a
core package like babel to be setting.

Self-contained dtx files often simultaneously generate the .sty/whatever
files *and* compile the documentation. This is a pain to deal
with. Therefore I don't recommend them (self-contained dtx) either,
unless one is aware of and takes care of this issue (most people don't).

That said, these aren't technical or absolute restrictions. The CTAN->TL
import can deal with these things. I don't refuse to install packages
just because they require luatex to unpackage or have a self-contained dtx.
There are existing packages in both categories.  --best, karl.

From listas at tex-tipografia.com  Sun Sep 24 08:19:30 2017
From: listas at tex-tipografia.com (Javier Bezos)
Date: Sun, 24 Sep 2017 08:19:30 +0200
Subject: [tex-live] dtx and ins files with luatex
In-Reply-To: <201709232331.v8NNVZHD002176@freefriends.org>
References: <201709232331.v8NNVZHD002176@freefriends.org>
Message-ID: <59C74E72.9060505@tex-tipografia.com>

Karl,

> Hi Javier - luatex is amazingly powerful = not secure.  Please don't
> require it merely to unpack a dtx.  That's not a good precedent for a
> core package like babel to be setting.

Actually I was thinking of titlesec, enumitem, colorspace,
etc., which are currently distributed unpacked as tex/sty.
I was trying to pack them with the docstrip mechanism,
but it's a nightmare.

But yes, I was also having babel in mind. I don't like the
dtx/ins mechanism (and I've never liked it), which I'm
using in babel mainly because it's a core package.

babel.pdf is now typeset with lualatex. It's a multilingual
package, and there is a need to show examples in several
scripts (currently there is one in Cyrillic, but I intend
to add Arabic, Hebrew, and Devanagari, amongst others).

But for the moment, I'll stick to dtx/ins with docstrip.

Javier



From reinhard.kotucha at web.de  Mon Sep 25 01:52:06 2017
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 25 Sep 2017 01:52:06 +0200
Subject: [tex-live] TeX and recent ghostscript changes
In-Reply-To: <20170922.064756.377366839171041814.wl@gnu.org>
References: <22978.64894.720205.532283@zaphod.ms25.net>
 <20170921.090859.31203801657156296.wl@gnu.org>
 <22980.19046.57012.546414@zaphod.ms25.net>
 <20170922.064756.377366839171041814.wl@gnu.org>
Message-ID: <22984.17702.689650.875994@zaphod.ms25.net>

On 2017-09-22 at 06:47:56 +0200, Werner LEMBERG wrote:

 > >  > This is not what we (the lilypond team) are after.  We need
 > >  > proper merging of non-subsetted fonts.
 > >
 > > I must admit that I had not lilypond in mind in the first place.
 > > But if the fonts are not subsetted and you are willing/able to
 > > add a program to the lilypond distribution which can [de]compress
 > > PDF files (qpdf, pdftk), I'm sure that you can write a script
 > > which solves the problem without much effort.  I'm quite
 > > optimistic because I already repaired a broken PDF file created
 > > by InDesign manually.
 > 
 > Yes, we will actively investigate this route since ghostscript
 > seems to have another bug in the current git version that prevents
 > our `trick' to work correctly even if we restored the removed
 > option.
 > 
 > Two potential solutions come to my mind.
 > 
 >   . P?ter Szab?'s `pdfsizeopt' tool.
 > 
 >       https://github.com/pts/pdfsizeopt.git
 > 
 >     He recently invested a lot of energy to improve it (it can
 >     finally compress the lilypond reference manual :-) ? maybe we
 >     can directly use it, without the intermediate ghostscript step.

Hi Werner,
sorry for the late response.  I wasn't aware that pdfsizeopt is still
maintained and am very glad to hear that P?ter is still working on it.
It's also great that he considers to try to remove dependencies to
other programs.  The old version I'm still using works only with
ghostscript-8.61.

 > > I can tell you more tomorrow if you are interested.
 > 
 > Yes, please!

Let me explain the problem I had to solve first.  I used LuaTeX in
order to plot electrocardiograms.  Here is an example:

  http://ms25.ddns.net/printecg.pdf

A colleague used InDesign in order to create a poster for an
exhibition.  She included the file mentioned above but clipped it so
that only the curves but no text was visible.

InDesign correctly noticed that none of the glyphs were visible and
tried to be smart.  There are two possible solutions:

 1. remove the font completely and any references to it,

 2. create a subset of the font with does not contain any glyphs but
    provide a valid font header.

InDesign introduced a new, much smarter, "solution":

    create a reference to an empty object supposed to contain a valid
    font.

PDF readers complained loudly, of course, and no printing office would
accept such a file.

I decompressed the file with qpdf, copied the font into the empty font
object, and then ran pdftk in order to create a PDF file with an
updated xref table.  At this point I had a valid PDF file.

Finally I pushed the file through Ghostscript.  GS removed the object
containing the unused font and the reference[s] to this object.  The
resulting file was smaller than the file created by InDesign, so I
suppose that some other optimizations were done by GS.

As far as lilypond is concerned, the first step is to determine which
fonts are identical.  Your script can extract the fonts and create
checksums of the objects containing fonts.

If you notice that one and the same font is used more than once, make
sure that only the first one is referenced.  Means: change the object
number of the link so that it points to the first instance of a font
rather than to the current one.  The current instance of the font is
inaccessible if it's not referenced anymore but dangling objects will
be removed by Ghostscript anyway.

If you intend to post-process files, avoid object stream compression
(use PDF-1.4 instead of PDF-1.5) if possible.  If object stream
compression is used, you need an external program in order to make the
PDF file suitable to be processed by general purpose programming
languages.

I don't know how lilypond creates PDF files and why there are many
instances of the same font in the output files.  I always thought
that lilypond creates PostScript code.  Could you describe the
workflow briefly?

Could you make a PDF file produced by lilypond, containing duplicate
fonts, available to me somehow?

 > >  > The concept of /UniqueID was abandoned many years ago already
 > >  > by Adobe, for good reasons.
 > >
 > > What are these "good reasons"?
 > 
 > To make this work really reliably, you have to register all unique
 > IDs (or the corresponding foundries) at a central place, something
 > which doesn't fit the reality since many years.

The concept would be more successful with a /VendorID, which is
maintaned at a central place, and a /FontID, which is maintained by
the foundries, instead of maintainig a /UniqueID for every font at a
central place.  I suppose that Adobe preferred to maintain /UniqueIDs
for every font in order to know what the competitors are doing.
Before Bitstream cracked Type 1 encryption, Adobe believed do be the
only company which can provide Type 1 fonts with proper hinting.

The main reason Adobe abandoned /UniqueIDs is that they are not
interested in Type 1 fonts anymore.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From marcello.tamburini at gmail.com  Mon Sep 25 15:52:52 2017
From: marcello.tamburini at gmail.com (Marcello Anselmi Tamburini)
Date: Mon, 25 Sep 2017 15:52:52 +0200
Subject: [tex-live] Installing TeX-Live 2017 on Windows 10
Message-ID: <CAC53K-eyFq-pVMngFvYQSOey0FaXBuw8fvSVRQcJQQq=Z6RPfQ@mail.gmail.com>

Hi all.

I tried several times to install texlive 2017 on my windows 10 and it fails
everytime. I download the installation program, it unpacks, starts
installation, then, when it sould start to download the files for the
installation, simply closes the installation program.

Please I need help, I wasn't able to find anything in the net. What can I
try to installa the TexLive distro?

Thanks.

-- 
Marcello
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170925/91323170/attachment.html>

From zew at linux.pl  Mon Sep 25 20:11:04 2017
From: zew at linux.pl (zew)
Date: Mon, 25 Sep 2017 20:11:04 +0200
Subject: [tex-live] diet pi (debian on raspberry pi 2)
Message-ID: <875FD97D-4748-4CF7-8718-2927502583F1@linux.pl>

$ tlmgr install euenc
(running on Debian, switching to user mode!)
/usr/bin/tlmgr: Initialization failed (in setup_unix_one):
/usr/bin/tlmgr: could not find a usable xzdec.
/usr/bin/tlmgr: Please install xzdec and try again.
Couldn't set up the necessary programs.
Installation of packages is not supported.
Please report to texlive at tug.org.
tlmgr: exiting unsuccessfully (status 1).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170925/ac5e14e1/attachment.html>

From norbert at preining.info  Wed Sep 27 02:53:43 2017
From: norbert at preining.info (Norbert Preining)
Date: Wed, 27 Sep 2017 09:53:43 +0900
Subject: [tex-live] diet pi (debian on raspberry pi 2)
In-Reply-To: <875FD97D-4748-4CF7-8718-2927502583F1@linux.pl>
References: <875FD97D-4748-4CF7-8718-2927502583F1@linux.pl>
Message-ID: <20170927005343.5xy6hmyr5p4rvr6q@bulldog.preining.info>

Hi

you are running Debian/TeX Live

> (running on Debian, switching to user mode!)
   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Furthermore, please *READ*:

> /usr/bin/tlmgr: could not find a usable xzdec.
> /usr/bin/tlmgr: Please install xzdec and try again.
                  ^^^^^^^^^^^^^^^^^^^^^


Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From ziegenhagen at gmail.com  Wed Sep 27 06:06:45 2017
From: ziegenhagen at gmail.com (Uwe Ziegenhagen)
Date: Wed, 27 Sep 2017 06:06:45 +0200
Subject: [tex-live] Installing TeX-Live 2017 on Windows 10
In-Reply-To: <CAC53K-eyFq-pVMngFvYQSOey0FaXBuw8fvSVRQcJQQq=Z6RPfQ@mail.gmail.com>
References: <CAC53K-eyFq-pVMngFvYQSOey0FaXBuw8fvSVRQcJQQq=Z6RPfQ@mail.gmail.com>
Message-ID: <CAML7JCjz_89H0pWibyBiFEWTh8=f1jXAhTyxQmDLA8OTpV6R7w@mail.gmail.com>

Can you run the installation from the commandline? If it fails then, it
might give a better error message. Are you connected to the internet with a
proxy or something? Maybe the installer cannot reach the CTAN server and
crashes.

As an alternative you could download the ISO image, unpack/mount it and
install from there.

Uwe

2017-09-25 15:52 GMT+02:00 Marcello Anselmi Tamburini <
marcello.tamburini at gmail.com>:

> Hi all.
>
> I tried several times to install texlive 2017 on my windows 10 and it
> fails everytime. I download the installation program, it unpacks, starts
> installation, then, when it sould start to download the files for the
> installation, simply closes the installation program.
>
> Please I need help, I wasn't able to find anything in the net. What can I
> try to installa the TexLive distro?
>
> Thanks.
>
> --
> Marcello
>



-- 
Dr. Uwe Ziegenhagen
<http://www.uweziegenhagen.de>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170927/10d81a78/attachment.html>

From daleif at math.au.dk  Wed Sep 27 09:18:57 2017
From: daleif at math.au.dk (Lars Madsen)
Date: Wed, 27 Sep 2017 07:18:57 +0000
Subject: [tex-live] Installing TeX-Live 2017 on Windows 10
In-Reply-To: <CAC53K-eyFq-pVMngFvYQSOey0FaXBuw8fvSVRQcJQQq=Z6RPfQ@mail.gmail.com>
References: <CAC53K-eyFq-pVMngFvYQSOey0FaXBuw8fvSVRQcJQQq=Z6RPfQ@mail.gmail.com>
Message-ID: <1506496739850.13582@math.au.dk>

also exactly which of the installation programmes are you using/downloading?


I tend to recommend the ZIP and using the advanced installer (and just use the default settings).


Also do you know which mirror it connects to? Might be better to explicitly choose anonther mirror.


As Uwe said it might be an idea to run the installer from the commandline, as you get more information plus you can specify a different mirror


/Lars Madsen
Institut for Matematik / Department of Mathematics
Aarhus Universitet / Aarhus University
Mere info: http://au.dk/daleif at math<http://au.dk/daleif at imf> / More information: http://au.dk/en/daleif at math<http://au.dk/en/daleif at imf>

________________________________
From: tex-live <tex-live-bounces at tug.org> on behalf of Marcello Anselmi Tamburini <marcello.tamburini at gmail.com>
Sent: 25 September 2017 15:52
To: tex-live at tug.org
Subject: [tex-live] Installing TeX-Live 2017 on Windows 10

Hi all.

I tried several times to install texlive 2017 on my windows 10 and it fails everytime. I download the installation program, it unpacks, starts installation, then, when it sould start to download the files for the installation, simply closes the installation program.

Please I need help, I wasn't able to find anything in the net. What can I try to installa the TexLive distro?

Thanks.

--
Marcello
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170927/0391e4cb/attachment-0001.html>

From marcello.tamburini at gmail.com  Wed Sep 27 12:02:43 2017
From: marcello.tamburini at gmail.com (Marcello Anselmi Tamburini)
Date: Wed, 27 Sep 2017 12:02:43 +0200
Subject: [tex-live] Installing TeX-Live 2017 on Windows 10
In-Reply-To: <1506496739850.13582@math.au.dk>
References: <CAC53K-eyFq-pVMngFvYQSOey0FaXBuw8fvSVRQcJQQq=Z6RPfQ@mail.gmail.com>
 <1506496739850.13582@math.au.dk>
Message-ID: <CAC53K-fDDCEbyHX4uZw+x7fJB573xsfotx3Z=52=QhjpCG2YmQ@mail.gmail.com>

Hi all.

Thanks for advices. Downloading the .zip file and launching the advanced
installation simply worked!

Many thanks.

2017-09-27 9:18 GMT+02:00 Lars Madsen <daleif at math.au.dk>:

> also exactly which of the installation programmes are you
> using/downloading?
>
>
> I tend to recommend the ZIP and using the advanced installer (and just use
> the default settings).
>
>
> Also do you know which mirror it connects to? Might be better to
> explicitly choose anonther mirror.
>
>
> As Uwe said it might be an idea to run the installer from the commandline,
> as you get more information plus you can specify a different mirror
>
>
>
> /Lars Madsen
> Institut for Matematik / Department of Mathematics
> Aarhus Universitet / Aarhus University
> Mere info: http://au.dk/daleif at math <http://au.dk/daleif at imf> / More
> information: http://au.dk/en/daleif at math <http://au.dk/en/daleif at imf>
>
> ------------------------------
> *From:* tex-live <tex-live-bounces at tug.org> on behalf of Marcello Anselmi
> Tamburini <marcello.tamburini at gmail.com>
> *Sent:* 25 September 2017 15:52
> *To:* tex-live at tug.org
> *Subject:* [tex-live] Installing TeX-Live 2017 on Windows 10
>
> Hi all.
>
> I tried several times to install texlive 2017 on my windows 10 and it
> fails everytime. I download the installation program, it unpacks, starts
> installation, then, when it sould start to download the files for the
> installation, simply closes the installation program.
>
> Please I need help, I wasn't able to find anything in the net. What can I
> try to installa the TexLive distro?
>
> Thanks.
>
> --
> Marcello
>



-- 
Marcello
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170927/4cd23ffd/attachment.html>

From werner at suse.de  Wed Sep 27 12:36:33 2017
From: werner at suse.de (Dr. Werner Fink)
Date: Wed, 27 Sep 2017 12:36:33 +0200
Subject: [tex-live] pdflatex core dump
Message-ID: <20170927103633.qdssfr7ribw4mnul@boole.suse.de>

Hi,

during build of the documentation of gnuplot I see this

 LaTeX Warning: Reference `steps' on page 43 undefined on input line 3900.

 <figure_histeps.pdf, id=438, 252.945pt x 144.54pt> <use figure_histeps.pdf>
 [43 <./figure_financebars.pdf> <./figure_fsteps.pdf

 pdfTeX warning: pdflatex (file ./figure_fsteps.pdf): PDF inclusion: multiple pdfs with page group included in a single page
 >pdflatex: ../nptl/pthread_mutex_lock.c:427: __pthread_mutex_lock_full: Assertion `INTERNAL_SYSCALL_ERRNO (e, __err) != ESRCH || !robust' failed.
 Aborted (core dumped)

with the side effect that the figures.aux and figures.out are shorten
and lead to followup errors due not closed labels

Werner

-- 
  "Having a smoking section in a restaurant is like having
          a peeing section in a swimming pool." -- Edward Burr
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 880 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20170927/83f2e7a4/attachment.sig>

From gnwiii at gmail.com  Wed Sep 27 16:16:10 2017
From: gnwiii at gmail.com (George N. White III)
Date: Wed, 27 Sep 2017 11:16:10 -0300
Subject: [tex-live] pdflatex core dump
In-Reply-To: <20170927103633.qdssfr7ribw4mnul@boole.suse.de>
References: <20170927103633.qdssfr7ribw4mnul@boole.suse.de>
Message-ID: <CAKTOP45MQkdzWkBGrAqwdBN3QZ8gJwb+3XdceH5tb-6uLcmWQw@mail.gmail.com>

On 27 September 2017 at 07:36, Dr. Werner Fink <werner at suse.de> wrote:

> Hi,
>
> during build of the documentation of gnuplot I see this
>
>  LaTeX Warning: Reference `steps' on page 43 undefined on input line 3900.
>
>  <figure_histeps.pdf, id=438, 252.945pt x 144.54pt> <use
> figure_histeps.pdf>
>  [43 <./figure_financebars.pdf> <./figure_fsteps.pdf
>
>  pdfTeX warning: pdflatex (file ./figure_fsteps.pdf): PDF inclusion:
> multiple pdfs with page group included in a single page
>  >pdflatex: ../nptl/pthread_mutex_lock.c:427: __pthread_mutex_lock_full:
> Assertion `INTERNAL_SYSCALL_ERRNO (e, __err) != ESRCH || !robust' failed.
>  Aborted (core dumped)
>
> with the side effect that the figures.aux and figures.out are shorten
> and lead to followup errors due not closed labels
>
>
"make pdf" gives the warnings but produces a usable gnuplot,pdf with either
MacTex 2017 or macports texlive on El Capitan.



> Werner
>
> --
>   "Having a smoking section in a restaurant is like having
>           a peeing section in a swimming pool." -- Edward Burr
>



-- 
George N. White III <aa056 at chebucto.ns.ca>
Head of St. Margarets Bay, Nova Scotia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/tex-live/attachments/20170927/ac157601/attachment.html>

From werner at suse.de  Thu Sep 28 09:01:46 2017
From: werner at suse.de (Dr. Werner Fink)
Date: Thu, 28 Sep 2017 09:01:46 +0200
Subject: [tex-live] pdflatex core dump
In-Reply-To: <20170927103633.qdssfr7ribw4mnul@boole.suse.de>
References: <20170927103633.qdssfr7ribw4mnul@boole.suse.de>
Message-ID: <20170928070146.qnxxa2odizejaeuy@boole.suse.de>

On Wed, Sep 27, 2017 at 10:36:33AM +0000, Dr. Werner Fink wrote:
> Hi,
> 
> during build of the documentation of gnuplot I see this
> 
>  LaTeX Warning: Reference `steps' on page 43 undefined on input line 3900.
> 
>  <figure_histeps.pdf, id=438, 252.945pt x 144.54pt> <use figure_histeps.pdf>
>  [43 <./figure_financebars.pdf> <./figure_fsteps.pdf
> 
>  pdfTeX warning: pdflatex (file ./figure_fsteps.pdf): PDF inclusion: multiple pdfs with page group included in a single page
>  >pdflatex: ../nptl/pthread_mutex_lock.c:427: __pthread_mutex_lock_full: Assertion `INTERNAL_SYSCALL_ERRNO (e, __err) != ESRCH || !robust' failed.
>  Aborted (core dumped)
> 
> with the side effect that the figures.aux and figures.out are shorten
> and lead to followup errors due not closed labels

After some debugging I guess that the latest libpoppler cause this:

(gdb) bt
#0  __GI_raise (sig=sig at entry=6) at ../sysdeps/unix/sysv/linux/raise.c:51
#1  0x00007f993e402691 in __GI_abort () at abort.c:79
#2  0x00007f993e3f96da in __assert_fail_base (fmt=0x7f993e54be68 "%s%s%s:%u: %s%sAssertion `%s' failed.\n%n", 
    assertion=assertion at entry=0x7f993c95a090 "INTERNAL_SYSCALL_ERRNO (e, __err) != ESRCH || !robust", 
    file=file at entry=0x7f993c959fd5 "../nptl/pthread_mutex_lock.c", line=line at entry=427, 
    function=function at entry=0x7f993c95a140 <__PRETTY_FUNCTION__.8609> "__pthread_mutex_lock_full") at assert.c:92
#3  0x00007f993e3f9752 in __GI___assert_fail (assertion=assertion at entry=0x7f993c95a090 "INTERNAL_SYSCALL_ERRNO (e, __err) != ESRCH || !robust", 
    file=file at entry=0x7f993c959fd5 "../nptl/pthread_mutex_lock.c", line=line at entry=427, 
    function=function at entry=0x7f993c95a140 <__PRETTY_FUNCTION__.8609> "__pthread_mutex_lock_full") at assert.c:101
#4  0x00007f993c94fe60 in __pthread_mutex_lock_full (mutex=0x289d948) at ../nptl/pthread_mutex_lock.c:427
#5  0x00007f993f38d363 in Dict::decRef() () from /usr/lib64/libpoppler.so.70
#6  0x00007f993f3f3aa9 in Object::free() () from /usr/lib64/libpoppler.so.70
#7  0x00007f993f3f69e0 in PageAttrs::~PageAttrs() () from /usr/lib64/libpoppler.so.70
#8  0x00007f993f3f7bfa in Page::~Page() () from /usr/lib64/libpoppler.so.70
#9  0x00007f993f380e51 in Catalog::~Catalog() () from /usr/lib64/libpoppler.so.70
#10 0x00007f993f3fd787 in PDFDoc::~PDFDoc() () from /usr/lib64/libpoppler.so.70

-- 
  "Having a smoking section in a restaurant is like having
          a peeing section in a swimming pool." -- Edward Burr
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 880 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20170928/04b283b2/attachment.sig>

From norbert at preining.info  Thu Sep 28 10:01:42 2017
From: norbert at preining.info (Norbert Preining)
Date: Thu, 28 Sep 2017 17:01:42 +0900
Subject: [tex-live] pdflatex core dump
In-Reply-To: <20170928070146.qnxxa2odizejaeuy@boole.suse.de>
References: <20170927103633.qdssfr7ribw4mnul@boole.suse.de>
 <20170928070146.qnxxa2odizejaeuy@boole.suse.de>
Message-ID: <20170928080142.fj6d3te222xjabmx@bulldog.preining.info>

> After some debugging I guess that the latest libpoppler cause this:

There was a thread about recent libpoppler changes here this/last week.
Akira sent fixed .cc files AFAIR.

poppler is as usual a pain ...

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From kakuto at fuk.kindai.ac.jp  Thu Sep 28 11:22:29 2017
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu, 28 Sep 2017 18:22:29 +0900
Subject: [tex-live] pdflatex core dump
In-Reply-To: <20170928080142.fj6d3te222xjabmx@bulldog.preining.info>
References: <20170927103633.qdssfr7ribw4mnul@boole.suse.de>
 <20170928070146.qnxxa2odizejaeuy@boole.suse.de>
 <20170928080142.fj6d3te222xjabmx@bulldog.preining.info>
Message-ID: <5499399A88C24223A35ACBD5F0432068@CJ3001517A>

> There was a thread about recent libpoppler changes here this/last week.
> Akira sent fixed .cc files AFAIR.

No, I did not. The very recent archlinux patch
for poppler-0.59.0 for pdfTeX seems to be
almost OK, but I still experienced a crash on Windows
for some example.
The patch before 26 Sept was really broken on Windows.
So I think Werner's pdfTeX by using poppler-0.59.0
may not be a tested one.

Best,
Akira


From kakuto at fuk.kindai.ac.jp  Thu Sep 28 12:40:11 2017
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Thu, 28 Sep 2017 19:40:11 +0900
Subject: [tex-live] pdflatex core dump
Message-ID: <3E14FB6250F3446FAC1C18D23D47C0E2@CJ3001517A>

> The very recent archlinux patch
> for poppler-0.59.0 for pdfTeX seems to be ...

Sorry, it should be written as

The very recent archlinux patch
for pdfTeX by using poppler-0.59.0
as a pdf-parser library ...

The patch is for pdfTeX, it not for the poppler.

Best,
Akira


From norbert at preining.info  Thu Sep 28 12:57:29 2017
From: norbert at preining.info (Norbert Preining)
Date: Thu, 28 Sep 2017 19:57:29 +0900
Subject: [tex-live] pdflatex core dump
In-Reply-To: <5499399A88C24223A35ACBD5F0432068@CJ3001517A>
References: <20170927103633.qdssfr7ribw4mnul@boole.suse.de>
 <20170928070146.qnxxa2odizejaeuy@boole.suse.de>
 <20170928080142.fj6d3te222xjabmx@bulldog.preining.info>
 <5499399A88C24223A35ACBD5F0432068@CJ3001517A>
Message-ID: <20170928105729.w4dleu2p5af2ka2k@bulldog.preining.info>

> No, I did not. The very recent archlinux patch

Ah, sorry, my memory tricked me.
Well, looks like we need another round of patches for poppler.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc.     +    JAIST     +    TeX Live     +    Debian Developer
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From karl at freefriends.org  Fri Sep 29 00:25:21 2017
From: karl at freefriends.org (Karl Berry)
Date: Thu, 28 Sep 2017 22:25:21 GMT
Subject: [tex-live] pdflatex core dump
In-Reply-To: <20170928070146.qnxxa2odizejaeuy@boole.suse.de>
Message-ID: <201709282225.v8SMPLZM000498@freefriends.org>

    >  pdfTeX warning: pdflatex (file ./figure_fsteps.pdf): PDF
    >  inclusion: multiple pdfs with page group included in a single page

1) Please send the ./figure_fsteps.pdf that causes the crash. Trying to
build gnuplot doc to reproduce is not appealing. Certainly be good to
have on hand in any case.

2) Is this with the sources currently in TL, or (modified) suse sources?
As Akira and Norbert said, both new poppler and new xpdf(v4) have
problems of various indeterminate kinds, due to intentional introduced
incompatibilities.

karl


From werner at suse.de  Fri Sep 29 08:29:41 2017
From: werner at suse.de (Dr. Werner Fink)
Date: Fri, 29 Sep 2017 08:29:41 +0200
Subject: [tex-live] pdflatex core dump
In-Reply-To: <201709282225.v8SMPLZM000498@freefriends.org>
References: <20170928070146.qnxxa2odizejaeuy@boole.suse.de>
 <201709282225.v8SMPLZM000498@freefriends.org>
Message-ID: <20170929062941.qjjswox2a5dabv7v@boole.suse.de>

On Thu, Sep 28, 2017 at 10:25:21PM +0000, Karl Berry wrote:
>     >  pdfTeX warning: pdflatex (file ./figure_fsteps.pdf): PDF
>     >  inclusion: multiple pdfs with page group included in a single page
> 
> 1) Please send the ./figure_fsteps.pdf that causes the crash. Trying to
> build gnuplot doc to reproduce is not appealing. Certainly be good to
> have on hand in any case.

See attachment for figure_fsteps.pdf ... could be that this is only one
of a set of pdf figures which caused the crash in libpoppler due maybe
wrong (memory) management of the huge numbers of pdf figures used by
the final gnuplot documentation.

> 
> 2) Is this with the sources currently in TL, or (modified) suse sources?
> As Akira and Norbert said, both new poppler and new xpdf(v4) have
> problems of various indeterminate kinds, due to intentional introduced
> incompatibilities.

Indeed with poppler 0.57.0 aka libpoppler.so.68.0.0 only the warnings
about 

``multiple pdfs with page group included in a single page''

occur but no crash.  The final gnuplot.pdf looks perfect even with
multiple figures included :)

Even with intentional introduced incompatibilities, a crash is simply
a bug

-- 
  "Having a smoking section in a restaurant is like having
          a peeing section in a swimming pool." -- Edward Burr
-------------- next part --------------
A non-text attachment was scrubbed...
Name: figure_fsteps.pdf
Type: application/pdf
Size: 11054 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20170929/6e962216/attachment.pdf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 880 bytes
Desc: not available
URL: <http://tug.org/pipermail/tex-live/attachments/20170929/6e962216/attachment.sig>

From kakuto at fuk.kindai.ac.jp  Fri Sep 29 12:27:56 2017
From: kakuto at fuk.kindai.ac.jp (Akira Kakuto)
Date: Fri, 29 Sep 2017 19:27:56 +0900
Subject: [tex-live] pdflatex core dump
In-Reply-To: <20170929062941.qjjswox2a5dabv7v@boole.suse.de>
References: <20170928070146.qnxxa2odizejaeuy@boole.suse.de>
 <201709282225.v8SMPLZM000498@freefriends.org>
 <20170929062941.qjjswox2a5dabv7v@boole.suse.de>
Message-ID: <AFEA0479690B4030A4A5BF51FDFD2211@CJ3001517A>

Dear Werner,

> See attachment for figure_fsteps.pdf ... 

I tested by a simple source on windows:

\documentclass{article}
\usepackage{graphicx}
\begin{document}
\includegraphics{figure_fsteps.pdf}
\end{document}

(1) latest TeX Live SVN pdftex sources with xpdf-4.00:
    No problem.

(2) latest (experimental) luatex 1.06.0 with poppler 0.59.0:
    No problem.

(3) latest TeX Live SVN xetex sources with poppler 0.59.0:
    No problem,

(4) latest archlinux patch for pdfTeX with poppler 0.59.0:
    Crashes on Windows.
    If I disable "delete pdf_doc->doc;" in the function
    "static void delete_document(PdfDocument * pdf_doc)",
    the image figure_fsteps.pdf is successfully included.
    Thus there must be a bug in the patch, at least for Windows.

Best,
Akira


From karl at freefriends.org  Fri Sep 29 22:44:37 2017
From: karl at freefriends.org (Karl Berry)
Date: Fri, 29 Sep 2017 20:44:37 GMT
Subject: [tex-live] pdflatex core dump
In-Reply-To: <20170929062941.qjjswox2a5dabv7v@boole.suse.de>
Message-ID: <201709292044.v8TKibWF021732@freefriends.org>

    Even with intentional introduced incompatibilities, a crash is simply
    a bug

Unquestionably, but evidently it's not in the code TL is using, is it?
It needs to be reported to the people who are responsible for the
relevant code. Whether that's archlinux or poppler or whoever. -k

