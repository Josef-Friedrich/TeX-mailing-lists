From root at ntg.nl  Fri Jul  1 12:22:14 2016
From: root at ntg.nl (Cron Daemon)
Date: Fri,  1 Jul 2016 12:22:14 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@zapf>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20160701102214.B682210178@zapf.ntg.nl>

------------------------------------------------------------------------
r6054 | luigi | 2016-07-01 11:21:25 +0200 (Fri, 01 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/manual/luatex-backend.tex
   M /branches/experimental/manual/luatex.pdf
   M /branches/experimental/source/texk/web2c/luatexdir/lua/lpdflib.c

pdf.setfontattributes (complements tex features)(HH)
------------------------------------------------------------------------

From root at ntg.nl  Thu Jul  7 12:22:14 2016
From: root at ntg.nl (Cron Daemon)
Date: Thu,  7 Jul 2016 12:22:14 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@zapf>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20160707102214.8817B10B11@zapf.ntg.nl>

------------------------------------------------------------------------
r6055 | luigi | 2016-07-07 10:30:22 +0200 (Thu, 07 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/source/ChangeLog
   M /branches/experimental/source/build-aux/config.sub
   M /branches/experimental/source/build-aux/texinfo.tex
   M /branches/experimental/source/configure
   M /branches/experimental/source/libs/configure
   M /branches/experimental/source/tardate.ac
   M /branches/experimental/source/texk/README
   M /branches/experimental/source/texk/configure
   M /branches/experimental/source/texk/kpathsea/ChangeLog
   M /branches/experimental/source/texk/kpathsea/c-auto.in
   M /branches/experimental/source/texk/kpathsea/config.h
   M /branches/experimental/source/texk/kpathsea/configure
   M /branches/experimental/source/texk/kpathsea/db.c
   M /branches/experimental/source/texk/kpathsea/doc/kpathsea.info
   M /branches/experimental/source/texk/kpathsea/doc/kpathsea.texi
   M /branches/experimental/source/texk/kpathsea/elt-dirs.c
   M /branches/experimental/source/texk/kpathsea/expand.c
   M /branches/experimental/source/texk/kpathsea/find-suffix.c
   M /branches/experimental/source/texk/kpathsea/hash.c
   M /branches/experimental/source/texk/kpathsea/knj.c
   M /branches/experimental/source/texk/kpathsea/knj.h
   M /branches/experimental/source/texk/kpathsea/kpsewhich.c
   M /branches/experimental/source/texk/kpathsea/make-suffix.c
   M /branches/experimental/source/texk/kpathsea/path-elt.c
   M /branches/experimental/source/texk/kpathsea/progname.c
   M /branches/experimental/source/texk/kpathsea/readable.c
   M /branches/experimental/source/texk/kpathsea/tilde.c
   M /branches/experimental/source/texk/kpathsea/types.h
   M /branches/experimental/source/texk/kpathsea/variable.c
   M /branches/experimental/source/texk/kpathsea/version.ac
   M /branches/experimental/source/texk/kpathsea/win32lib.c
   M /branches/experimental/source/texk/kpathsea/win32lib.h
   M /branches/experimental/source/texk/kpathsea/xbasename.c
   M /branches/experimental/source/texk/kpathsea/xdirname.c
   M /branches/experimental/source/texk/kpathsea/xdirtest.c
   M /branches/experimental/source/texk/kpathsea/xgetcwd.c
   M /branches/experimental/source/texk/texlive/configure
   M /branches/experimental/source/texk/web2c/configure
   M /branches/experimental/source/texk/web2c/web2c/configure
   M /branches/experimental/source/utils/configure
   M /branches/experimental/source/version.ac

sync with TexLive revision 41648
------------------------------------------------------------------------

From listas at tex-tipografia.com  Thu Jul  7 17:30:13 2016
From: listas at tex-tipografia.com (Javier Bezos)
Date: Thu, 07 Jul 2016 17:30:13 +0200
Subject: [Dev-luatex] \parshape with TRT
Message-ID: <577E7585.30004@tex-tipografia.com>

Several years ago Khaled posted the following question:

> \parshape doesn't work as expected for TRT direction in PDF mode, it
> works fine in DVI mode but in PDF indentation moves the text to the
> right instead of to the left. This breaks LaTeX lists in TRT direction.

I couldn't find any answer, so I wonder if this behaviour will
remain or it will be modified.

Javier

From pragma at wxs.nl  Thu Jul  7 17:43:22 2016
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 7 Jul 2016 17:43:22 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <577E7585.30004@tex-tipografia.com>
References: <577E7585.30004@tex-tipografia.com>
Message-ID: <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>

On 7/7/2016 5:30 PM, Javier Bezos wrote:
> Several years ago Khaled posted the following question:
>
>> \parshape doesn't work as expected for TRT direction in PDF mode, it
>> works fine in DVI mode but in PDF indentation moves the text to the
>> right instead of to the left. This breaks LaTeX lists in TRT direction.
>
> I couldn't find any answer, so I wonder if this behaviour will
> remain or it will be modified.

do you have a simple example (btw, changes to the dir model and handling 
are very unlikely to happen)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From listas at tex-tipografia.com  Thu Jul  7 18:34:04 2016
From: listas at tex-tipografia.com (Javier Bezos)
Date: Thu, 07 Jul 2016 18:34:04 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
Message-ID: <577E847C.5000203@tex-tipografia.com>

Hans,

 >>> \parshape doesn't work as expected for TRT direction in PDF mode, it
 >>> works fine in DVI mode but in PDF indentation moves the text to the
 >>> right instead of to the left. This breaks LaTeX lists in TRT direction.
...
 > do you have a simple example (btw, changes to the dir model and handling
 > are very unlikely to happen)

Sure. Compare the behaviour of \leftskip and \parshape.
IMO, they should be the same.

---------------------------------
\parindent=0pt
\hsize 11cm
\outputmode=1 % No difference with 0

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed eiusmod
tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim
veniam, quis nostrud exercitation ullamco laboris nisi ut aliquid ex
ea commodi consequat.

{\leftskip1cm
Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed eiusmod
tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim
veniam, quis nostrud exercitation ullamco laboris nisi ut aliquid ex
ea commodi consequat.\par}

{\parshape 1 0cm 10cm
Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed eiusmod
tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim
veniam, quis nostrud exercitation ullamco laboris nisi ut aliquid ex
ea commodi consequat.\par}

\textdir TRT \pardir TRT \bodydir TRT \pagedir TRT

{\leftskip1cm
Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed eiusmod
tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim
veniam, quis nostrud exercitation ullamco laboris nisi ut aliquid ex
ea commodi consequat.\par}

{\parshape 1 0cm 10cm
Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed eiusmod
tempor incidunt ut labore et dolore magna aliqua. Ut enim ad minim
veniam, quis nostrud exercitation ullamco laboris nisi ut aliquid ex
ea commodi consequat.\par}

\bye
----------------------

Javier

From listas at tex-tipografia.com  Thu Jul  7 19:42:16 2016
From: listas at tex-tipografia.com (Javier Bezos)
Date: Thu, 07 Jul 2016 19:42:16 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <577E847C.5000203@tex-tipografia.com>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com>
Message-ID: <577E9478.6050805@tex-tipografia.com>


 > Sure. Compare the behaviour of \leftskip and \parshape.
 > IMO, they should be the same.

Well, after thinking a little more about this I'm not so
sure. The problem is \parshape is used for two different
purposes: (a) fancy paragraphs (a heart, the map of The
Netherlands, wrapping some text around a figure, etc.);
(b) an alternative to \left/rightskip and \parindent.
While mirroring the latter makes sense, mirroring
The Netherlands seems a bit odd. I wonder if an
alternative could be \parshape dir XXX, like boxes.

Javier

From root at ntg.nl  Thu Jul  7 22:22:09 2016
From: root at ntg.nl (Cron Daemon)
Date: Thu,  7 Jul 2016 22:22:09 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@zapf>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20160707202209.4BCFE11276@zapf.ntg.nl>

------------------------------------------------------------------------
r6056 | luigi | 2016-07-07 17:21:36 +0200 (Thu, 07 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/manual/luatex-enhancements.tex
   M /branches/experimental/manual/luatex.pdf
   M /branches/experimental/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfgen.w
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfxform.h
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfxform.w

type key for box resources so that we can create different content streams (HH)
------------------------------------------------------------------------
r6057 | luigi | 2016-07-07 17:32:44 +0200 (Thu, 07 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfgen.w
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfobj.w

fix for immediate write obj on first page (before anything is flushed) (HH)
------------------------------------------------------------------------
r6058 | luigi | 2016-07-07 18:25:18 +0200 (Thu, 07 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfgen.w

type 1,2,3 for box resources (control bbox and matrix when no type) (HH)
------------------------------------------------------------------------

From listas at tex-tipografia.com  Fri Jul  8 17:45:25 2016
From: listas at tex-tipografia.com (Javier Bezos)
Date: Fri, 08 Jul 2016 17:45:25 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <577E9478.6050805@tex-tipografia.com>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
Message-ID: <577FCA95.40805@tex-tipografia.com>

 >> Sure. Compare the behaviour of \leftskip and \parshape.
 >> IMO, they should be the same.
 >
 > Well, after thinking a little more about this I'm not so
 > sure.

But same problem with \hangindent. This is easier to catch
(just change the sign), but it would be nice if its behaviour
is mirrored like \parindent, \leftskip, etc. I think LuaTeX
must overcome the limitations of the XeT-TeX bidi model.

Javier

From pragma at wxs.nl  Fri Jul  8 18:13:25 2016
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 8 Jul 2016 18:13:25 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <577FCA95.40805@tex-tipografia.com>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
 <577FCA95.40805@tex-tipografia.com>
Message-ID: <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>

On 7/8/2016 5:45 PM, Javier Bezos wrote:
>>> Sure. Compare the behaviour of \leftskip and \parshape.
>>> IMO, they should be the same.
>>
>> Well, after thinking a little more about this I'm not so
>> sure.
>
> But same problem with \hangindent. This is easier to catch
> (just change the sign), but it would be nice if its behaviour
> is mirrored like \parindent, \leftskip, etc. I think LuaTeX
> must overcome the limitations of the XeT-TeX bidi model.

changing such things now will break existing code


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From listas at tex-tipografia.com  Fri Jul  8 18:48:35 2016
From: listas at tex-tipografia.com (Javier Bezos)
Date: Fri, 08 Jul 2016 18:48:35 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
 <577FCA95.40805@tex-tipografia.com>
 <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>
Message-ID: <577FD963.9080306@tex-tipografia.com>

Hans,
>>>> Sure. Compare the behaviour of \leftskip and \parshape.
>>>> IMO, they should be the same.
>>>
>>> Well, after thinking a little more about this I'm not so
>>> sure.
>>
>> But same problem with \hangindent. This is easier to catch
>> (just change the sign), but it would be nice if its behaviour
>> is mirrored like \parindent, \leftskip, etc. I think LuaTeX
>> must overcome the limitations of the XeT-TeX bidi model.
>
> changing such things now will break existing code

I know, but not changing it breaks also existing code for bidi
texts, except if we modify lots of things, which is an
overkill (and very likely the code will end up with many hacks).
And after all, 0.95 also broke existing code. I think not adding
now a proper bidi model is a missed opportunity and in the years
to come very likely we'll speak of a "long standing bug" in the
bidi behavior of \hangindent. It's MHO.

Javier


>
>
> -----------------------------------------------------------------
>                                            Hans Hagen | PRAGMA ADE
>                Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>         tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
> -----------------------------------------------------------------


From pragma at wxs.nl  Fri Jul  8 18:55:36 2016
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 8 Jul 2016 18:55:36 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <577FD963.9080306@tex-tipografia.com>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
 <577FCA95.40805@tex-tipografia.com>
 <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>
 <577FD963.9080306@tex-tipografia.com>
Message-ID: <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl>

On 7/8/2016 6:48 PM, Javier Bezos wrote:
> Hans,
>>>>> Sure. Compare the behaviour of \leftskip and \parshape.
>>>>> IMO, they should be the same.
>>>>
>>>> Well, after thinking a little more about this I'm not so
>>>> sure.
>>>
>>> But same problem with \hangindent. This is easier to catch
>>> (just change the sign), but it would be nice if its behaviour
>>> is mirrored like \parindent, \leftskip, etc. I think LuaTeX
>>> must overcome the limitations of the XeT-TeX bidi model.
>>
>> changing such things now will break existing code
>
> I know, but not changing it breaks also existing code for bidi
> texts, except if we modify lots of things, which is an
> overkill (and very likely the code will end up with many hacks).
> And after all, 0.95 also broke existing code. I think not adding
> now a proper bidi model is a missed opportunity and in the years
> to come very likely we'll speak of a "long standing bug" in the
> bidi behavior of \hangindent. It's MHO.

Well, if one looks at it from the point of viuew of the par builder 
where left/right skips are kind of global and applied later to the 
broken lines, then it's not a bug but a choice.

I'll look at it but if something gets added, then it will be an option 
(keyword or variable) and not a default. After all, for proper bidi 
support one also needs to implement a proper layout model so it's never 
a simple switch thing. I'm pretty sure that this is an area where macro 
packages make fundamental different choices.

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From listas at tex-tipografia.com  Fri Jul  8 19:18:09 2016
From: listas at tex-tipografia.com (Javier Bezos)
Date: Fri, 08 Jul 2016 19:18:09 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
 <577FCA95.40805@tex-tipografia.com>
 <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>
 <577FD963.9080306@tex-tipografia.com>
 <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl>
Message-ID: <577FE051.30006@tex-tipografia.com>

Hans,

 > I'll look at it but if something gets added, then it will be an option
 > (keyword or variable) and not a default.

That would be nice.

 > After all, for proper bidi support
 > one also needs to implement a proper layout model so it's never a simple
 > switch thing. I'm pretty sure that this is an area where macro packages
 > make fundamental different choices.

Agreed, but at the primitive level mirroring \hangindent would
simplify the code a lot. More complicated is \parshape for the
reasons I myself explained and I wonder how to handle it (about
130 files, iirc, are using it in TeXLive, many of them emulating
what LaTeX does in \list, the only place where it's used in
the core). To be honest, I don't know what to do. Suggestions?

Javier

From pragma at wxs.nl  Fri Jul  8 19:57:16 2016
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 8 Jul 2016 19:57:16 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <577FE051.30006@tex-tipografia.com>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
 <577FCA95.40805@tex-tipografia.com>
 <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>
 <577FD963.9080306@tex-tipografia.com>
 <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl>
 <577FE051.30006@tex-tipografia.com>
Message-ID: <a3f1413c-d38a-5674-d6a2-c95b4418178f@wxs.nl>

On 7/8/2016 7:18 PM, Javier Bezos wrote:
> Hans,
>
>> I'll look at it but if something gets added, then it will be an option
>> (keyword or variable) and not a default.
>
> That would be nice.
>
>> After all, for proper bidi support
>> one also needs to implement a proper layout model so it's never a simple
>> switch thing. I'm pretty sure that this is an area where macro packages
>> make fundamental different choices.
>
> Agreed, but at the primitive level mirroring \hangindent would
> simplify the code a lot. More complicated is \parshape for the
> reasons I myself explained and I wonder how to handle it (about
> 130 files, iirc, are using it in TeXLive, many of them emulating
> what LaTeX does in \list, the only place where it's used in
> the core). To be honest, I don't know what to do. Suggestions?

I can't speak for latex, sorry. Anyway, I'll add this:

\shapemode=0 % current behaviour
\shapemode=1 % hangindent mirrored
\shapemode=2 % parshape mirrored
\shapemode=3 % both mirrored

So we can be compatible and you can use value 3 and cross your fingers 
that there is no interference with other packages

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From listas at tex-tipografia.com  Fri Jul  8 21:20:40 2016
From: listas at tex-tipografia.com (Javier Bezos)
Date: Fri, 08 Jul 2016 21:20:40 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <a3f1413c-d38a-5674-d6a2-c95b4418178f@wxs.nl>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
 <577FCA95.40805@tex-tipografia.com>
 <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>
 <577FD963.9080306@tex-tipografia.com>
 <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl>
 <577FE051.30006@tex-tipografia.com>
 <a3f1413c-d38a-5674-d6a2-c95b4418178f@wxs.nl>
Message-ID: <577FFD08.7020009@tex-tipografia.com>

Hans,

> I can't speak for latex, sorry. Anyway, I'll add this:
>
> \shapemode=0 % current behaviour
> \shapemode=1 % hangindent mirrored
> \shapemode=2 % parshape mirrored
> \shapemode=3 % both mirrored
>
> So we can be compatible and you can use value 3 and cross your fingers that
> there is no interference with other packages

Thank you! Instead of crossing the fingers, I'll use them on the
keyboard :-).

Javier




From root at ntg.nl  Sat Jul  9 12:22:14 2016
From: root at ntg.nl (Cron Daemon)
Date: Sat,  9 Jul 2016 12:22:14 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@zapf>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20160709102214.15B0B10C13@zapf.ntg.nl>

------------------------------------------------------------------------
r6059 | luigi | 2016-07-09 01:06:59 +0200 (Sat, 09 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/manual/luatex-enhancements.tex
   M /branches/experimental/manual/luatex-modifications.tex
   M /branches/experimental/manual/luatex.pdf
   M /branches/experimental/source/texk/web2c/luatexdir/lua/luatoken.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/commands.h
   M /branches/experimental/source/texk/web2c/luatexdir/tex/commands.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/dumpdata.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/equivalents.h
   M /branches/experimental/source/texk/web2c/luatexdir/tex/maincontrol.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/scanning.h
   M /branches/experimental/source/texk/web2c/luatexdir/tex/scanning.w

\shapemode (HH)
------------------------------------------------------------------------
r6060 | luigi | 2016-07-09 01:13:52 +0200 (Sat, 09 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/manual/luatex-modifications.tex
   M /branches/experimental/manual/luatex-style.tex
   M /branches/experimental/manual/luatex.pdf

added extensions syntax (HH)
------------------------------------------------------------------------

From pragma at wxs.nl  Sun Jul 10 11:37:41 2016
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 10 Jul 2016 11:37:41 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <op.ykcy6egvejo439@ishamid-pc>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
 <577FCA95.40805@tex-tipografia.com>
 <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>
 <577FD963.9080306@tex-tipografia.com>
 <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl> <op.ykcy6egvejo439@ishamid-pc>
Message-ID: <590f56ce-4fd0-552c-52fa-b8e2ec223c6b@wxs.nl>

On 7/10/2016 2:19 AM, Idris Samawi Hamid Ø§Ø¯Ø±ÙØ³ Ø³ÙØ§ÙÙ Ø­Ø§ÙØ¯ wrote:
> On Fri, 08 Jul 2016 10:55:36 -0600, Hans Hagen <pragma at wxs.nl> wrote:
>
>> On 7/8/2016 6:48 PM, Javier Bezos wrote:
>>> Hans,
>>>>>>> Sure. Compare the behaviour of \leftskip and \parshape.
>>>>>>> IMO, they should be the same.
>>>>>>
>>>>>> Well, after thinking a little more about this I'm not so
>>>>>> sure.
>>>>>
>>>>> But same problem with \hangindent. This is easier to catch
>>>>> (just change the sign), but it would be nice if its behaviour
>>>>> is mirrored like \parindent, \leftskip, etc. I think LuaTeX
>>>>> must overcome the limitations of the XeT-TeX bidi model.
>>>>
>>>> changing such things now will break existing code
>>>
>>> I know, but not changing it breaks also existing code for bidi
>>> texts, except if we modify lots of things, which is an
>>> overkill (and very likely the code will end up with many hacks).
>>> And after all, 0.95 also broke existing code. I think not adding
>>> now a proper bidi model is a missed opportunity and in the years
>>> to come very likely we'll speak of a "long standing bug" in the
>>> bidi behavior of \hangindent. It's MHO.
>>
>> Well, if one looks at it from the point of viuew of the par builder
>> where left/right skips are kind of global and applied later to the
>> broken lines, then it's not a bug but a choice.
>
> Since Hans is adding support for more mirroring options, I suppose the
> following is moot. In any case, I played around with this today. It
> seems that \parshape and \hangindent are interpreted so as to assume a
> global coordinate system for the page, i.e., beyond the paragraph level.
>
> After thinking about this global-page vs local-paragraph distinction,
> went back and found the old Omega documentation: There were two other
> primitives
>
> \pardirHR \pardirLR
>
> (which were later expunged from luatex).
>
> I suspect that \parshape and \hangindent were mirrored with \pardirHR
> invoked. If so, then the current issue raised by Javier is a residue of
> the old Omega/Aleph model: Dropping \pardirHR \pardirLR left an ambiguity.

i can imagine a real mess with using them .. it definitely assumes macro 
package level support for consistency (and what if different mechanisms 
want different pdfdirs); storing some state in the pardir node will not 
help here

> If the above analysis is correct, we should ask: What other primitives
> if any (besides \parshape and \hangindent) did the Omega/Aleph bidi
> model treat at the \pardirHR \pardirLR level?

with parindent we can imagine a key but not with hangindent

> I think Hans' point (philosophy?) is that the macropackage should handle
> things at the page/coordinate-system level. Perhaps that had something
> to do with dropping \pardirHR \pardirLR in the first place?

Indeed, as the document layout is kind of independent of the writing 
direction. In fact one can even dispute the left|right skip but those 
skips are added later

(in fact, in context i have places where i do quite some juggling to get 
around it but that's beyond this discussion)

> A related point is that luatex is explicitly designed for extensibility
> of, e.g, primitives via lua, so there should also be a straightforward
> way for experts to implement the desired low-level behavior. For
> example, something along the lines of \pardirHR \pardirLR could be
> reimplemented in lua. That *might* be a better approach than the
> mirroring Javier requested and which Hans has agreed to do; especially
> if there is additional residue out there of more primitives that need
> this kind of treatment.

hm, that make me think that we can reset \shapemode after each 
paragraph, like hangindent and parshape are .. let me think about that 
as it makes much sense

> Again, the question may be moot now, but that's my 2 cents (perhaps 1
> cent).
>
> Best wishes
> Idris


-- 

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From jbezosl at gmail.com  Fri Jul  8 19:15:52 2016
From: jbezosl at gmail.com (Javier Bezos)
Date: Fri, 08 Jul 2016 19:15:52 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
 <577FCA95.40805@tex-tipografia.com>
 <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>
 <577FD963.9080306@tex-tipografia.com>
 <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl>
Message-ID: <577FDFC8.4010100@gmail.com>

Hans,

 > I'll look at it but if something gets added, then it will be an option
 > (keyword or variable) and not a default.

That would be nice.

 > After all, for proper bidi support
 > one also needs to implement a proper layout model so it's never a simple
 > switch thing. I'm pretty sure that this is an area where macro packages
 > make fundamental different choices.

Agreed, but at the primitive level mirroring \hangindent would
simplify the code a lot. More complicated is \parshape for the
reasons I myself explained and I wonder how to handle it (about
130 files, iirc, are using it in TeXLive, many of them emulating
what LaTeX does in \list, the only place where it's used in
the core). To be honest, I don't know what to do. Suggestions?

Javier

From Idris.Hamid at colostate.edu  Sun Jul 10 02:19:16 2016
From: Idris.Hamid at colostate.edu (=?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?= =?utf-8?B?2KfZhdiv?=)
Date: Sat, 9 Jul 2016 18:19:16 -0600
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
 <577FCA95.40805@tex-tipografia.com>
 <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>
 <577FD963.9080306@tex-tipografia.com>
 <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl>
Message-ID: <op.ykcy6egvejo439@ishamid-pc>

On Fri, 08 Jul 2016 10:55:36 -0600, Hans Hagen <pragma at wxs.nl> wrote:

> On 7/8/2016 6:48 PM, Javier Bezos wrote:
>> Hans,
>>>>>> Sure. Compare the behaviour of \leftskip and \parshape.
>>>>>> IMO, they should be the same.
>>>>>
>>>>> Well, after thinking a little more about this I'm not so
>>>>> sure.
>>>>
>>>> But same problem with \hangindent. This is easier to catch
>>>> (just change the sign), but it would be nice if its behaviour
>>>> is mirrored like \parindent, \leftskip, etc. I think LuaTeX
>>>> must overcome the limitations of the XeT-TeX bidi model.
>>>
>>> changing such things now will break existing code
>>
>> I know, but not changing it breaks also existing code for bidi
>> texts, except if we modify lots of things, which is an
>> overkill (and very likely the code will end up with many hacks).
>> And after all, 0.95 also broke existing code. I think not adding
>> now a proper bidi model is a missed opportunity and in the years
>> to come very likely we'll speak of a "long standing bug" in the
>> bidi behavior of \hangindent. It's MHO.
>
> Well, if one looks at it from the point of viuew of the par builder  
> where left/right skips are kind of global and applied later to the  
> broken lines, then it's not a bug but a choice.

Since Hans is adding support for more mirroring options, I suppose the  
following is moot. In any case, I played around with this today. It seems  
that \parshape and \hangindent are interpreted so as to assume a global  
coordinate system for the page, i.e., beyond the paragraph level.

After thinking about this global-page vs local-paragraph distinction, went  
back and found the old Omega documentation: There were two other primitives

\pardirHR \pardirLR

(which were later expunged from luatex).

I suspect that \parshape and \hangindent were mirrored with \pardirHR  
invoked. If so, then the current issue raised by Javier is a residue of  
the old Omega/Aleph model: Dropping \pardirHR \pardirLR left an ambiguity.

If the above analysis is correct, we should ask: What other primitives if  
any (besides \parshape and \hangindent) did the Omega/Aleph bidi model  
treat at the \pardirHR \pardirLR level?

I think Hans' point (philosophy?) is that the macropackage should handle  
things at the page/coordinate-system level. Perhaps that had something to  
do with dropping \pardirHR \pardirLR in the first place?

A related point is that luatex is explicitly designed for extensibility  
of, e.g, primitives via lua, so there should also be a straightforward way  
for experts to implement the desired low-level behavior. For example,  
something along the lines of \pardirHR \pardirLR could be reimplemented in  
lua. That *might* be a better approach than the mirroring Javier requested  
and which Hans has agreed to do; especially if there is additional residue  
out there of more primitives that need this kind of treatment.

Again, the question may be moot now, but that's my 2 cents (perhaps 1  
cent).

Best wishes
Idris
-- 
Idris Samawi Hamid
Professor of Philosophy
Colorado State University
Fort Collins, CO 80523

From Idris.Hamid at colostate.edu  Sun Jul 10 02:29:28 2016
From: Idris.Hamid at colostate.edu (=?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?= =?utf-8?B?2KfZhdiv?=)
Date: Sat, 9 Jul 2016 18:29:28 -0600
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <op.ykcy6egvejo439@ishamid-pc>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
 <577FCA95.40805@tex-tipografia.com>
 <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>
 <577FD963.9080306@tex-tipografia.com>
 <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl> <op.ykcy6egvejo439@ishamid-pc>
Message-ID: <op.ykczne0rejo439@ishamid-pc>

On Sat, 09 Jul 2016 18:19:16 -0600, Idris Samawi Hamid Ø§Ø¯Ø±ÙØ³ Ø³ÙØ§ÙÙ Ø­Ø§ÙØ¯  
<Idris.Hamid at colostate.edu> wrote:

> \pardirHR \pardirLR

later \pardir TRT \pardir LRT of course...

-- 
Idris Samawi Hamid
Professor of Philosophy
Colorado State University
Fort Collins, CO 80523

From root at ntg.nl  Mon Jul 11 12:22:15 2016
From: root at ntg.nl (Cron Daemon)
Date: Mon, 11 Jul 2016 12:22:15 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@zapf>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20160711102215.78EC011600@zapf.ntg.nl>

------------------------------------------------------------------------
r6061 | luigi | 2016-07-11 09:34:00 +0200 (Mon, 11 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /branches/experimental/source/texk/web2c/luatexdir/tex/commands.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/maincontrol.w

fix for hangindent at lua end + reset of shapemode unless < 0 (HH). WARNING: manual doesn't compile.
------------------------------------------------------------------------
r6062 | luigi | 2016-07-11 09:56:38 +0200 (Mon, 11 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/manual/luatex-languages.tex
   M /branches/experimental/manual/luatex-modifications.tex
   M /branches/experimental/manual/luatex.pdf
   M /branches/experimental/source/texk/web2c/luatexdir/dvi/dvigen.w
   M /branches/experimental/source/texk/web2c/luatexdir/font/dofont.w
   M /branches/experimental/source/texk/web2c/luatexdir/font/luafont.w
   M /branches/experimental/source/texk/web2c/luatexdir/lang/texlang.w
   M /branches/experimental/source/texk/web2c/luatexdir/lua/llanglib.c
   M /branches/experimental/source/texk/web2c/luatexdir/lua/lnewtokenlib.c
   M /branches/experimental/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /branches/experimental/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdflistout.w
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfshipout.w
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfthread.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/align.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/buildpage.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/commands.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/conditional.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/dumpdata.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/equivalents.h
   M /branches/experimental/source/texk/web2c/luatexdir/tex/equivalents.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/errors.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/expand.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/extensions.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/inputstack.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/linebreak.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/mainbody.h
   M /branches/experimental/source/texk/web2c/luatexdir/tex/mainbody.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/maincontrol.h
   M /branches/experimental/source/texk/web2c/luatexdir/tex/maincontrol.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/mathcodes.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/mlist.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/packaging.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/primitive.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/printing.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/scanning.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/texfileio.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/texmath.h
   M /branches/experimental/source/texk/web2c/luatexdir/tex/texmath.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/texnodes.h
   M /branches/experimental/source/texk/web2c/luatexdir/tex/texnodes.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/textoken.h
   M /branches/experimental/source/texk/web2c/luatexdir/tex/textoken.w

\hyphenationbounds (more strict) ; better \shapemode ; app *_par access now in macros in eq h file (part of consistency cleanup) (HH)
------------------------------------------------------------------------
r6063 | luigi | 2016-07-11 10:45:59 +0200 (Mon, 11 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/manual/luatex.pdf
   M /branches/experimental/source/texk/web2c/luatexdir/tex/align.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/commands.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/equivalents.h
   M /branches/experimental/source/texk/web2c/luatexdir/tex/maincontrol.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/scanning.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/texmath.w

\hyphenationbounds (more strict) ; better \shapemode ; app *_par access now in macros in eq h file (part of consistency cleanup) -- better patches (HH)
------------------------------------------------------------------------

From listas at tex-tipografia.com  Mon Jul 11 15:47:01 2016
From: listas at tex-tipografia.com (Javier Bezos)
Date: Mon, 11 Jul 2016 15:47:01 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <op.ykcy6egvejo439@ishamid-pc>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
 <577FCA95.40805@tex-tipografia.com>
 <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>
 <577FD963.9080306@tex-tipografia.com>
 <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl> <op.ykcy6egvejo439@ishamid-pc>
Message-ID: <5783A355.9060706@tex-tipografia.com>

Idris,


> A related point is that luatex is explicitly designed for extensibility
> of, e.g, primitives via lua, so there should also be a straightforward
> way for experts to implement the desired low-level behavior. For
> example, something along the lines of \pardirHR \pardirLR could be
> reimplemented in lua. That *might* be a better approach than the
> mirroring Javier requested and which Hans has agreed to do; especially
> if there is additional residue out there of more primitives that need
> this kind of treatment.

Actually, \parshape can be mirrored even in pure TeX. But I
still believe this must be done at the primitive level, and not
with some hack. I think luatex is about making even better
paragraphs from good paragraphs, and not as a hack to fix some
directional properties.

Javier

From Idris.Hamid at colostate.edu  Mon Jul 11 16:01:56 2016
From: Idris.Hamid at colostate.edu (=?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?= =?utf-8?B?2KfZhdiv?=)
Date: Mon, 11 Jul 2016 08:01:56 -0600
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <5783A355.9060706@tex-tipografia.com>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
 <577FCA95.40805@tex-tipografia.com>
 <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>
 <577FD963.9080306@tex-tipografia.com>
 <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl> <op.ykcy6egvejo439@ishamid-pc>
 <5783A355.9060706@tex-tipografia.com>
Message-ID: <op.ykfvxiqbejo439@ishamid-pc>

Hi Javier,

On Mon, 11 Jul 2016 07:47:01 -0600, Javier Bezos  
<listas at tex-tipografia.com> wrote:

>> A related point is that luatex is explicitly designed for extensibility
>> of, e.g, primitives via lua, so there should also be a straightforward
>> way for experts to implement the desired low-level behavior. For
>> example, something along the lines of \pardirHR \pardirLR could be
>> reimplemented in lua. That *might* be a better approach than the
>> mirroring Javier requested and which Hans has agreed to do; especially
>> if there is additional residue out there of more primitives that need
>> this kind of treatment.
>
> Actually, \parshape can be mirrored even in pure TeX. But I
> still believe this must be done at the primitive level, and not
> with some hack. I think luatex is about making even better
> paragraphs from good paragraphs, and not as a hack to fix some
> directional properties.

lua extension =! hack

In MkIV Hans built a paragraph optimizer in lua; he did not do it at the  
primitive level where one might have expected. A proper extension of  
functionality is just that, an extension in functionality. If \pagedir TRT  
etc. is no longer there, a properly designed lua extension to provide the  
needed functionality is not a "hack".

luatex is about paragraphs, but it is equally about taking advantage of  
lua to extend functionality as needed by various applications, *without  
having to recode the primitives*. Indeed, that kind of extensibility was  
arguably its most pressing raison d'etre.

Put another way: In luatex we are not given the binary opposition of  
primitive support vs TeX-"hack". We have a third choice, and that is  
genuine extensibility.

Best wishes
Idris
-- 
Idris Samawi Hamid
Professor of Philosophy
Colorado State University
Fort Collins, CO 80523

From listas at tex-tipografia.com  Mon Jul 11 16:05:00 2016
From: listas at tex-tipografia.com (Javier Bezos)
Date: Mon, 11 Jul 2016 16:05:00 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <590f56ce-4fd0-552c-52fa-b8e2ec223c6b@wxs.nl>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
 <577FCA95.40805@tex-tipografia.com>
 <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>
 <577FD963.9080306@tex-tipografia.com>
 <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl> <op.ykcy6egvejo439@ishamid-pc>
 <590f56ce-4fd0-552c-52fa-b8e2ec223c6b@wxs.nl>
Message-ID: <5783A78C.9040901@tex-tipografia.com>


> Indeed, as the document layout is kind of independent of the writing
> direction.

The writing direction could influence the perception of
pictures and graphic elements. A good example is The Great Wave
off Kanagawa. In a document, think of an arrow introducing an
item. But, of course, these things belong to the package level,
while indents and the like are pure text and therefore should
be handled by TeX itself.

Javier


From pragma at wxs.nl  Mon Jul 11 16:15:11 2016
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 11 Jul 2016 16:15:11 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <5783A78C.9040901@tex-tipografia.com>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
 <577FCA95.40805@tex-tipografia.com>
 <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>
 <577FD963.9080306@tex-tipografia.com>
 <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl> <op.ykcy6egvejo439@ishamid-pc>
 <590f56ce-4fd0-552c-52fa-b8e2ec223c6b@wxs.nl>
 <5783A78C.9040901@tex-tipografia.com>
Message-ID: <9507653e-6330-cc31-8f25-0f1a0c964d00@wxs.nl>

On 7/11/2016 4:05 PM, Javier Bezos wrote:
>
>> Indeed, as the document layout is kind of independent of the writing
>> direction.
>
> The writing direction could influence the perception of
> pictures and graphic elements. A good example is The Great Wave
> off Kanagawa. In a document, think of an arrow introducing an
> item. But, of course, these things belong to the package level,
> while indents and the like are pure text and therefore should
> be handled by TeX itself.

fighting hard codes built in assumptions is a pain which is why we don't 
extend the inner working (apart from a bit configurability and 
callbacks) ... there are many views on how mixed direction can be 
combined with a specific directional layout and rendering the paragraph 
is just one thing that happens and even 'pure text' is a fluent concept 
... getting some agreement on how-to is basically a no-go and therefore 
lua is chosen as way to reach your goals

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From root at ntg.nl  Mon Jul 11 16:22:08 2016
From: root at ntg.nl (Cron Daemon)
Date: Mon, 11 Jul 2016 16:22:08 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@zapf>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20160711142208.973B4117CB@zapf.ntg.nl>

------------------------------------------------------------------------
r6064 | luigi | 2016-07-11 13:05:56 +0200 (Mon, 11 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfgen.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/maincontrol.w

\hyphenationbounds (more strict) ; better \shapemode ; app *_par access now in macros in eq h file (part of consistency cleanup) -- the missed ones (HH)
------------------------------------------------------------------------
r6065 | luigi | 2016-07-11 13:18:10 +0200 (Mon, 11 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfcolorstack.w

symbolic names literals (HH)
------------------------------------------------------------------------
r6066 | luigi | 2016-07-11 16:03:44 +0200 (Mon, 11 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/source/texk/web2c/luatexdir/dvi/dvigen.w
   M /branches/experimental/source/texk/web2c/luatexdir/font/mapfile.w
   M /branches/experimental/source/texk/web2c/luatexdir/font/texfont.w
   M /branches/experimental/source/texk/web2c/luatexdir/font/writet1.w
   M /branches/experimental/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /branches/experimental/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfglyph.w
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfpage.w
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfshipout.w
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdftables.h
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfxform.w
   M /branches/experimental/source/texk/web2c/luatexdir/ptexlib.h
   M /branches/experimental/source/texk/web2c/luatexdir/tex/buildpage.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/conditional.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/dumpdata.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/equivalents.h
   M /branches/experimental/source/texk/web2c/luatexdir/tex/extensions.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/maincontrol.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/nesting.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/packaging.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/printing.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/scanning.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/texnodes.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/textoken.w

more common #defines (count,dimen,etc) (HH)
------------------------------------------------------------------------

From listas at tex-tipografia.com  Mon Jul 11 16:47:35 2016
From: listas at tex-tipografia.com (Javier Bezos)
Date: Mon, 11 Jul 2016 16:47:35 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <op.ykfvxiqbejo439@ishamid-pc>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
 <577FCA95.40805@tex-tipografia.com>
 <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>
 <577FD963.9080306@tex-tipografia.com>
 <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl> <op.ykcy6egvejo439@ishamid-pc>
 <5783A355.9060706@tex-tipografia.com> <op.ykfvxiqbejo439@ishamid-pc>
Message-ID: <5783B187.4060505@tex-tipografia.com>

 >> I think luatex is about making even better paragraphs from good
 >> paragraphs, and not as a hack to fix some directional properties.
 >
 > lua extension =! hack
 >
 > In MkIV Hans built a paragraph optimizer in lua; he did not do it at
 > the primitive level where one might have expected.

This is what I said :-).

Javier


From root at ntg.nl  Mon Jul 11 22:22:09 2016
From: root at ntg.nl (Cron Daemon)
Date: Mon, 11 Jul 2016 22:22:09 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@zapf>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20160711202209.4117A1161A@zapf.ntg.nl>

------------------------------------------------------------------------
r6067 | luigi | 2016-07-11 16:24:24 +0200 (Mon, 11 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/source/texk/web2c/luatexdir/image/writeimg.w
   M /branches/experimental/source/texk/web2c/luatexdir/lua/lnewtokenlib.c
   M /branches/experimental/source/texk/web2c/luatexdir/lua/luatex-api.h
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfannot.w
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfgen.w
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfobj.w
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfxform.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/align.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/buildpage.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/commands.h
   M /branches/experimental/source/texk/web2c/luatexdir/tex/equivalents.h
   M /branches/experimental/source/texk/web2c/luatexdir/tex/equivalents.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/extensions.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/maincontrol.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/nesting.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/scanning.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/texmath.w
   M /branches/experimental/source/texk/web2c/luatexdir/tex/texnodes.h
   M /branches/experimental/source/texk/web2c/luatexdir/tex/texnodes.w

left-over(shared)  #defines moved (HH)
------------------------------------------------------------------------
r6068 | luigi | 2016-07-11 21:02:52 +0200 (Mon, 11 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/source/texk/web2c/luatexdir/tex/equivalents.h

fuzz fix (int/dimen mixup introduced with cleanup) (HH)
------------------------------------------------------------------------

From jbezosl at gmail.com  Mon Jul 11 16:33:45 2016
From: jbezosl at gmail.com (Javier Bezos)
Date: Mon, 11 Jul 2016 16:33:45 +0200
Subject: [Dev-luatex] \parshape with TRT
In-Reply-To: <op.ykfvxiqbejo439@ishamid-pc>
References: <577E7585.30004@tex-tipografia.com>
 <db8c9826-03b3-2d92-87f9-4c04a02d71e0@wxs.nl>
 <577E847C.5000203@tex-tipografia.com> <577E9478.6050805@tex-tipografia.com>
 <577FCA95.40805@tex-tipografia.com>
 <ed96e4cb-cb57-7b4d-effb-6b4c6b598d81@wxs.nl>
 <577FD963.9080306@tex-tipografia.com>
 <9372f9b6-dc31-271c-72cd-e0dfc4e87449@wxs.nl> <op.ykcy6egvejo439@ishamid-pc>
 <5783A355.9060706@tex-tipografia.com> <op.ykfvxiqbejo439@ishamid-pc>
Message-ID: <5783AE49.2080707@gmail.com>

>> I think luatex is about making even better paragraphs from good
>> paragraphs, and not as a hack to fix some directional properties.
>
> lua extension =! hack
>
> In MkIV Hans built a paragraph optimizer in lua; he did not do it at
> the primitive level where one might have expected.

This is what I said :-).

Javier

From root at ntg.nl  Tue Jul 19 12:22:19 2016
From: root at ntg.nl (Cron Daemon)
Date: Tue, 19 Jul 2016 12:22:19 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@zapf>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20160719102219.25CD61247A@zapf.ntg.nl>

------------------------------------------------------------------------
r6069 | luigi | 2016-07-18 23:29:33 +0200 (Mon, 18 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/source/texk/web2c/luatexdir/pdf/pdfgen.w

 fix for reusable type 0 (bbox was missing) (HH)
------------------------------------------------------------------------
r6070 | luigi | 2016-07-18 23:33:06 +0200 (Mon, 18 Jul 2016) | 1 line
Changed paths:
   M /trunk/manual/luatex-backend.tex
   M /trunk/manual/luatex-enhancements.tex
   M /trunk/manual/luatex-fonts.tex
   M /trunk/manual/luatex-graphics.tex
   M /trunk/manual/luatex-languages.tex
   M /trunk/manual/luatex-modifications.tex
   M /trunk/manual/luatex-style.tex
   M /trunk/manual/luatex-tex.tex
   M /trunk/manual/luatex.pdf
   M /trunk/manual/luatex.tex
   M /trunk/source/ChangeLog
   M /trunk/source/build-aux/config.guess
   M /trunk/source/build-aux/config.sub
   M /trunk/source/build-aux/texinfo.tex
   M /trunk/source/configure
   M /trunk/source/libs/README
   M /trunk/source/libs/configure
   M /trunk/source/libs/gmp/ChangeLog
   M /trunk/source/libs/gmp/configure
   M /trunk/source/libs/gmp/gmp-PATCHES/ChangeLog
   M /trunk/source/libs/gmp/gmp-PATCHES/TL-Changes
   M /trunk/source/libs/gmp/gmp-src/ChangeLog
   M /trunk/source/libs/gmp/gmp-src/Makefile.am
   M /trunk/source/libs/gmp/gmp-src/NEWS
   M /trunk/source/libs/gmp/gmp-src/acinclude.m4
   M /trunk/source/libs/gmp/gmp-src/config.in
   M /trunk/source/libs/gmp/gmp-src/configgmp.guess
   M /trunk/source/libs/gmp/gmp-src/configgmp.sub
   M /trunk/source/libs/gmp/gmp-src/configure.ac
   M /trunk/source/libs/gmp/gmp-src/gmp-h.in
   M /trunk/source/libs/gmp/gmp-src/gmp-impl.h
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/aorslsh1_n.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/arm-defs.m4
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/bdiv_dbm1c.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/cnd_aors_n.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/com.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/copyd.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/copyi.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/dive_1.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/invert_limb.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/logops_n.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/lshift.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/lshiftc.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/mod_34lsub1.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/mode1o.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/rsh1aors_n.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/rshift.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/sec_tabselect.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/arm/udiv.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/generic/trialdiv.c
   M /trunk/source/libs/gmp/gmp-src/mpn/x86_64/coreibwl/mul_basecase.asm
   M /trunk/source/libs/gmp/gmp-src/mpn/x86_64/fat/fat.c
   M /trunk/source/libs/gmp/gmp-src/printf/doprnt.c
   M /trunk/source/libs/gmp/native/configure
   M /trunk/source/libs/gmp/version.ac
   M /trunk/source/libs/poppler/ChangeLog
   M /trunk/source/libs/poppler/Makefile.am
   M /trunk/source/libs/poppler/Makefile.in
   M /trunk/source/libs/poppler/config.h.in
   M /trunk/source/libs/poppler/configure
   M /trunk/source/libs/poppler/configure.ac
   M /trunk/source/libs/poppler/poppler-PATCHES/ChangeLog
   M /trunk/source/libs/poppler/poppler-PATCHES/TL-Changes
   M /trunk/source/libs/poppler/poppler-PATCHES/patch-02-LLONG_MAX
   M /trunk/source/libs/poppler/poppler-PATCHES/patch-03-Object-functions
   M /trunk/source/libs/poppler/poppler-src/CMakeLists.txt
   M /trunk/source/libs/poppler/poppler-src/ChangeLog
   M /trunk/source/libs/poppler/poppler-src/ConfigureChecks.cmake
   M /trunk/source/libs/poppler/poppler-src/NEWS
   M /trunk/source/libs/poppler/poppler-src/config.h.cmake
   M /trunk/source/libs/poppler/poppler-src/config.h.in
   M /trunk/source/libs/poppler/poppler-src/configure.ac
   M /trunk/source/libs/poppler/poppler-src/goo/Makefile.am
   M /trunk/source/libs/poppler/poppler-src/poppler/Annot.cc
   M /trunk/source/libs/poppler/poppler-src/poppler/Annot.h
   M /trunk/source/libs/poppler/poppler-src/poppler/DateInfo.cc
   M /trunk/source/libs/poppler/poppler-src/poppler/DateInfo.h
   M /trunk/source/libs/poppler/poppler-src/poppler/Form.cc
   M /trunk/source/libs/poppler/poppler-src/poppler/Form.h
   M /trunk/source/libs/poppler/poppler-src/poppler/JBIG2Stream.cc
   M /trunk/source/libs/poppler/poppler-src/poppler/Makefile.am
   M /trunk/source/libs/poppler/poppler-src/poppler/Page.cc
   M /trunk/source/libs/poppler/poppler-src/poppler/SplashOutputDev.cc
   M /trunk/source/libs/poppler/poppler-src/poppler/Stream.cc
   M /trunk/source/libs/poppler/poppler-src/poppler/UTF.cc
   M /trunk/source/libs/poppler/poppler-src/poppler/UnicodeTypeTable.cc
   M /trunk/source/libs/poppler/poppler-src/splash/Splash.cc
   M /trunk/source/libs/poppler/version.ac
   M /trunk/source/tardate.ac
   M /trunk/source/texk/README
   M /trunk/source/texk/configure
   M /trunk/source/texk/kpathsea/ChangeLog
   M /trunk/source/texk/kpathsea/c-auto.in
   M /trunk/source/texk/kpathsea/config.h
   M /trunk/source/texk/kpathsea/configure
   M /trunk/source/texk/kpathsea/db.c
   M /trunk/source/texk/kpathsea/doc/kpathsea.info
   M /trunk/source/texk/kpathsea/doc/kpathsea.texi
   M /trunk/source/texk/kpathsea/elt-dirs.c
   M /trunk/source/texk/kpathsea/expand.c
   M /trunk/source/texk/kpathsea/find-suffix.c
   M /trunk/source/texk/kpathsea/hash.c
   M /trunk/source/texk/kpathsea/knj.c
   M /trunk/source/texk/kpathsea/knj.h
   M /trunk/source/texk/kpathsea/kpsewhich.c
   M /trunk/source/texk/kpathsea/make-suffix.c
   M /trunk/source/texk/kpathsea/path-elt.c
   M /trunk/source/texk/kpathsea/progname.c
   M /trunk/source/texk/kpathsea/readable.c
   M /trunk/source/texk/kpathsea/tex-file.c
   M /trunk/source/texk/kpathsea/tilde.c
   M /trunk/source/texk/kpathsea/types.h
   M /trunk/source/texk/kpathsea/variable.c
   M /trunk/source/texk/kpathsea/version.ac
   M /trunk/source/texk/kpathsea/win32lib.c
   M /trunk/source/texk/kpathsea/win32lib.h
   M /trunk/source/texk/kpathsea/xbasename.c
   M /trunk/source/texk/kpathsea/xdirname.c
   M /trunk/source/texk/kpathsea/xdirtest.c
   M /trunk/source/texk/kpathsea/xgetcwd.c
   M /trunk/source/texk/texlive/configure
   M /trunk/source/texk/web2c/configure
   M /trunk/source/texk/web2c/lib/ChangeLog
   M /trunk/source/texk/web2c/lib/texmfmp.c
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.w
   M /trunk/source/texk/web2c/luatexdir/font/dofont.w
   M /trunk/source/texk/web2c/luatexdir/font/luafont.w
   M /trunk/source/texk/web2c/luatexdir/font/mapfile.w
   M /trunk/source/texk/web2c/luatexdir/font/texfont.w
   M /trunk/source/texk/web2c/luatexdir/font/writet1.w
   M /trunk/source/texk/web2c/luatexdir/image/writeimg.w
   M /trunk/source/texk/web2c/luatexdir/lang/texlang.h
   M /trunk/source/texk/web2c/luatexdir/lang/texlang.w
   M /trunk/source/texk/web2c/luatexdir/lua/lcallbacklib.c
   M /trunk/source/texk/web2c/luatexdir/lua/limglib.c
   M /trunk/source/texk/web2c/luatexdir/lua/llanglib.c
   M /trunk/source/texk/web2c/luatexdir/lua/lnewtokenlib.c
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /trunk/source/texk/web2c/luatexdir/lua/lpdflib.c
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /trunk/source/texk/web2c/luatexdir/lua/luanode.w
   M /trunk/source/texk/web2c/luatexdir/lua/luatex-api.h
   M /trunk/source/texk/web2c/luatexdir/lua/luatoken.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfannot.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfcolorstack.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfglyph.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfobj.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfpage.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftables.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfthread.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfxform.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfxform.w
   M /trunk/source/texk/web2c/luatexdir/ptexlib.h
   M /trunk/source/texk/web2c/luatexdir/tex/align.w
   M /trunk/source/texk/web2c/luatexdir/tex/buildpage.w
   M /trunk/source/texk/web2c/luatexdir/tex/commands.h
   M /trunk/source/texk/web2c/luatexdir/tex/commands.w
   M /trunk/source/texk/web2c/luatexdir/tex/conditional.w
   M /trunk/source/texk/web2c/luatexdir/tex/dumpdata.w
   M /trunk/source/texk/web2c/luatexdir/tex/equivalents.h
   M /trunk/source/texk/web2c/luatexdir/tex/equivalents.w
   M /trunk/source/texk/web2c/luatexdir/tex/errors.w
   M /trunk/source/texk/web2c/luatexdir/tex/expand.w
   M /trunk/source/texk/web2c/luatexdir/tex/extensions.w
   M /trunk/source/texk/web2c/luatexdir/tex/inputstack.w
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.w
   M /trunk/source/texk/web2c/luatexdir/tex/mainbody.h
   M /trunk/source/texk/web2c/luatexdir/tex/mainbody.w
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.h
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.w
   M /trunk/source/texk/web2c/luatexdir/tex/mathcodes.w
   M /trunk/source/texk/web2c/luatexdir/tex/mlist.w
   M /trunk/source/texk/web2c/luatexdir/tex/nesting.w
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.w
   M /trunk/source/texk/web2c/luatexdir/tex/primitive.w
   M /trunk/source/texk/web2c/luatexdir/tex/printing.w
   M /trunk/source/texk/web2c/luatexdir/tex/scanning.h
   M /trunk/source/texk/web2c/luatexdir/tex/scanning.w
   M /trunk/source/texk/web2c/luatexdir/tex/texfileio.w
   M /trunk/source/texk/web2c/luatexdir/tex/texmath.h
   M /trunk/source/texk/web2c/luatexdir/tex/texmath.w
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.h
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.w
   M /trunk/source/texk/web2c/luatexdir/tex/textoken.h
   M /trunk/source/texk/web2c/luatexdir/tex/textoken.w
   M /trunk/source/texk/web2c/man/pdftex.man
   M /trunk/source/texk/web2c/web2c/configure
   M /trunk/source/utils/configure
   M /trunk/source/version.ac

sync with experimental
------------------------------------------------------------------------

From root at ntg.nl  Tue Jul 19 22:22:08 2016
From: root at ntg.nl (Cron Daemon)
Date: Tue, 19 Jul 2016 22:22:08 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@zapf>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20160719202208.9FA1C126D0@zapf.ntg.nl>

------------------------------------------------------------------------
r6071 | luigi | 2016-07-19 17:20:16 +0200 (Tue, 19 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/source/texk/web2c/luatexdir/tex/mlist.w

redundant line removed (cosmetic) (HH)
------------------------------------------------------------------------
r6072 | luigi | 2016-07-19 17:27:32 +0200 (Tue, 19 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/source/texk/web2c/luatexdir/luatex.c

luatex 0.98.0
------------------------------------------------------------------------
r6073 | luigi | 2016-07-19 19:18:00 +0200 (Tue, 19 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/manual/luatex-backend.tex
   M /branches/experimental/manual/luatex.pdf
   M /branches/experimental/manual/luatex.tex
   M /branches/experimental/source/texk/web2c/luatexdir/lua/lpdflib.c

pdf.getcreationdate() (HH)
------------------------------------------------------------------------

From root at ntg.nl  Wed Jul 20 12:22:13 2016
From: root at ntg.nl (Cron Daemon)
Date: Wed, 20 Jul 2016 12:22:13 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@zapf>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20160720102213.B8E0212696@zapf.ntg.nl>

------------------------------------------------------------------------
r6074 | luigi | 2016-07-19 23:45:36 +0200 (Tue, 19 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/manual/luatex-nodes.tex
   M /branches/experimental/manual/luatex.pdf
   M /branches/experimental/manual/luatex.tex
   M /branches/experimental/source/texk/web2c/luatexdir/lang/texlang.w
   M /branches/experimental/source/texk/web2c/luatexdir/lua/lnodelib.c

tracker 970: no prev pointer for head and node.check_discretionaries for emergency fixes of messed up disc nodes (better patch)(HH)
------------------------------------------------------------------------

From root at ntg.nl  Thu Jul 21 12:22:14 2016
From: root at ntg.nl (Cron Daemon)
Date: Thu, 21 Jul 2016 12:22:14 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@zapf>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20160721102214.296C71299C@zapf.ntg.nl>

------------------------------------------------------------------------
r6075 | luigi | 2016-07-21 11:55:58 +0200 (Thu, 21 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/source/texk/web2c/luatexdir/tex/equivalents.h

fix in macro emergencystretch(HH)
------------------------------------------------------------------------
r6076 | luigi | 2016-07-21 11:56:39 +0200 (Thu, 21 Jul 2016) | 1 line
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/equivalents.h

fix in macro emergencystretch --- trunk (HH)
------------------------------------------------------------------------

From root at ntg.nl  Fri Jul 22 22:22:09 2016
From: root at ntg.nl (Cron Daemon)
Date: Fri, 22 Jul 2016 22:22:09 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@zapf>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20160722202209.7C24212BF7@zapf.ntg.nl>

------------------------------------------------------------------------
r6077 | luigi | 2016-07-22 16:32:47 +0200 (Fri, 22 Jul 2016) | 1 line
Changed paths:
   M /branches/experimental/manual/luatex-tex.tex
   M /branches/experimental/manual/luatex.pdf
   M /branches/experimental/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /branches/experimental/source/texk/web2c/luatexdir/tex/mathcodes.w

fix for delcode restore; setmath|delcode also accept numbers instead of table (consistent with getters) (HH)
------------------------------------------------------------------------

From reinhard.kotucha at web.de  Wed Jul 27 04:14:30 2016
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 27 Jul 2016 04:14:30 +0200
Subject: [Dev-luatex] Mantis ID 0000980
Message-ID: <22424.6406.247052.212048@zaphod.ms25.net>

Hans and Luigi,
thank you very much for providing pdf.getcreationdate().

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

