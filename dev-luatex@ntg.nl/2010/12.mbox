From graham.douglas at readytext.co.uk  Wed Dec  1 00:16:38 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Tue, 30 Nov 2010 23:16:38 +0000
Subject: [Dev-luatex] [***SPAM***] \underbrace and \overbrace strangeness
	with Cambria Math
Message-ID: <4CF585D6.80202@readytext.co.uk>

Hi All

With the following minimal test file


% test file
\documentclass[11pt,twoside]{article}
\usepackage{unicode-math}
\begin{document}
\setmathfont[math-style=TeX]{Cambria Math}
\setmainfont{Cambria}

$$ 	
\underbrace{ a+b+\cdots+z }_{26}
\overbrace{ 1+2+\cdots+100 }^{5050}
$$

\end{document}


I see odd results with Cambria Math (PDF sent with this e-mail)

This is LuaTeX, Version beta-0.65.0-2010113019  (format=lualatex 
2010.11.15)  30 NOV 2010 23:00

Package: fontspec 2010/11/07 v2.1d
Package: unicode-math 2010/09/27 v0.5b

Using regular Computer Modern there are no problems.

Does anyone else see the same issue with Cambria Math?

If I need to report this elsewhere (lualatex-dev) I'll do so.

Cheers

Graham






-------------- next part --------------
A non-text attachment was scrubbed...
Name: underover.pdf
Type: application/pdf
Size: 45347 bytes
Desc: not available
URL: <http://www.ntg.nl/pipermail/dev-luatex/attachments/20101130/42e5089a/attachment-0001.pdf>

From graham.douglas at readytext.co.uk  Wed Dec  1 00:28:33 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Tue, 30 Nov 2010 23:28:33 +0000
Subject: [Dev-luatex] [***SPAM***] Re: [***SPAM***] \underbrace and
	\overbrace strangeness with Cambria Math
In-Reply-To: <4CF585D6.80202@readytext.co.uk>
References: <4CF585D6.80202@readytext.co.uk>
Message-ID: <4CF588A1.2000905@readytext.co.uk>

Unrelated but why are my mails tagged with [***SPAM***]?

--- do you have a special filter for my posts ;-)

Cheers

Graham


From root at mail.boekplan.nl  Wed Dec  1 16:27:35 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed,  1 Dec 2010 16:27:35 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101201152735.39A0740066@mail.boekplan.nl>

------------------------------------------------------------------------
r4022 | taco | 2010-12-01 13:04:46 +0100 (Wed, 01 Dec 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c

fix bug #495 by forcing the alink() to be null

------------------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Fri Dec  3 10:17:49 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 3 Dec 2010 10:17:49 +0100
Subject: [Dev-luatex] Message for the impatient Apple users
In-Reply-To: <4CF5161B.5000700@elvenkind.com>
References: <4CF51428.9080404@elvenkind.com> <4CF5161B.5000700@elvenkind.com>
Message-ID: <AANLkTi=+C+6VD7Efh8QCLUuFyzHJQy7gtffL0aorH2Sy@mail.gmail.com>

On Tue, Nov 30, 2010 at 16:19, Taco Hoekwater wrote:
> On 11/30/2010 04:11 PM, Taco Hoekwater wrote:
>>
>> It seems that commits 4019 & 4021 have finally fixed the use of Snow
>> Leopard's .ttc system fonts!
>
> .. not that it actually does you much good now, because an incompatible
> change in luafilesystem means that both context and luaotfload.sty now
> fail to recreate the font index, but still ... I am really happy.

Taco, thanks a lot for the good news.

However - what exactly does the following mean?

 )<Hoefler Text.ttc(HoeflerText-Regular:0)
!LuaTeX error (file Hoefler Text.ttc): Invalid glyph index (gid 7687)
 ==> Fatal error occurred, no output PDF file produced!


Test file was the following:

\definefontfeature
  [default]
  [liga=yes,kern=yes,tlig=yes,compose=yes]
\definefontsynonym[hoefler][file:Hoefler Text.ttc][features=default]

\starttext
\definedfont[hoefler] ?
\stoptext

Mojca

From khaledhosny at eglug.org  Fri Dec  3 10:28:13 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 3 Dec 2010 11:28:13 +0200
Subject: [Dev-luatex] Message for the impatient Apple users
In-Reply-To: <AANLkTi=+C+6VD7Efh8QCLUuFyzHJQy7gtffL0aorH2Sy@mail.gmail.com>
References: <4CF51428.9080404@elvenkind.com> <4CF5161B.5000700@elvenkind.com>
	<AANLkTi=+C+6VD7Efh8QCLUuFyzHJQy7gtffL0aorH2Sy@mail.gmail.com>
Message-ID: <20101203092813.GA10482@khaled-laptop>

On Fri, Dec 03, 2010 at 10:17:49AM +0100, Mojca Miklavec wrote:
> On Tue, Nov 30, 2010 at 16:19, Taco Hoekwater wrote:
> > On 11/30/2010 04:11 PM, Taco Hoekwater wrote:
> >>
> >> It seems that commits 4019 & 4021 have finally fixed the use of Snow
> >> Leopard's .ttc system fonts!
> >
> > .. not that it actually does you much good now, because an incompatible
> > change in luafilesystem means that both context and luaotfload.sty now
> > fail to recreate the font index, but still ... I am really happy.
> 
> Taco, thanks a lot for the good news.
> 
> However - what exactly does the following mean?
> 
>  )<Hoefler Text.ttc(HoeflerText-Regular:0)
> !LuaTeX error (file Hoefler Text.ttc): Invalid glyph index (gid 7687)
>  ==> Fatal error occurred, no output PDF file produced!
> 
> 
> Test file was the following:
> 
> \definefontfeature
>   [default]
>   [liga=yes,kern=yes,tlig=yes,compose=yes]
> \definefontsynonym[hoefler][file:Hoefler Text.ttc][features=default]

Can this even work? AFAIK TTC is a collection of fonts, so you need to
select one of the fonts in the collection, may be:
 file:Hoefler Text.ttc(0)

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From mojca.miklavec.lists at gmail.com  Fri Dec  3 10:53:23 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 3 Dec 2010 10:53:23 +0100
Subject: [Dev-luatex] Message for the impatient Apple users
In-Reply-To: <20101203092813.GA10482@khaled-laptop>
References: <4CF51428.9080404@elvenkind.com> <4CF5161B.5000700@elvenkind.com>
	<AANLkTi=+C+6VD7Efh8QCLUuFyzHJQy7gtffL0aorH2Sy@mail.gmail.com>
	<20101203092813.GA10482@khaled-laptop>
Message-ID: <AANLkTikSw=rXktXKtXChOb2sp05A0psVcP8-vkboikpW@mail.gmail.com>

On Fri, Dec 3, 2010 at 10:28, Khaled Hosny wrote:
> On Fri, Dec 03, 2010 at 10:17:49AM +0100, Mojca Miklavec wrote:
>>
>> \definefontfeature
>> ? [default]
>> ? [liga=yes,kern=yes,tlig=yes,compose=yes]
>> \definefontsynonym[hoefler][file:Hoefler Text.ttc][features=default]
>
> Can this even work? AFAIK TTC is a collection of fonts, so you need to
> select one of the fonts in the collection, may be:
> ?file:Hoefler Text.ttc(0)

I have no idea if that can work or not. (I have never really looked
into how the fonts are composed. But using the zero at the end doesn't
help.)

But apparently it does work, since I can make the character "?"
(obreve) appear with that strategy without a problem, it only crashes
when the needed accent is missing.

It seems that the accent "bottom dot", "bottom macron" are missing in
Hoefler TeX (and most probably some other accents as well) and this is
the reason why it "crashes". However, it is not clear to me whether it
is more appropriate for LuaTeX to crash or to ignore that (if it
crashes at least the user notices that something is wrong). If I use
"\textbottomaccent" per-se then LuaTeX doesn't crash (should it?), it
just doesn't output anything.

So: I'm really not sure whether it should be ConTeXt or LuaTeX that
should take care of missing glyphs ... And I'm not sure if there is
some simple way to fake accents such as bottom dot or bottom macron as
well (providing some explicit font-specific settings). But this is
something for the ConTeXt gurus (or maybe for your packages), not for
luatex-dev.

Mojca

From taco at elvenkind.com  Fri Dec  3 11:07:47 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 03 Dec 2010 11:07:47 +0100
Subject: [Dev-luatex] Message for the impatient Apple users
In-Reply-To: <AANLkTikSw=rXktXKtXChOb2sp05A0psVcP8-vkboikpW@mail.gmail.com>
References: <4CF51428.9080404@elvenkind.com>
	<4CF5161B.5000700@elvenkind.com>	<AANLkTi=+C+6VD7Efh8QCLUuFyzHJQy7gtffL0aorH2Sy@mail.gmail.com>	<20101203092813.GA10482@khaled-laptop>
	<AANLkTikSw=rXktXKtXChOb2sp05A0psVcP8-vkboikpW@mail.gmail.com>
Message-ID: <4CF8C173.8040607@elvenkind.com>

On 12/03/2010 10:53 AM, Mojca Miklavec wrote:
> On Fri, Dec 3, 2010 at 10:28, Khaled Hosny wrote:
>> On Fri, Dec 03, 2010 at 10:17:49AM +0100, Mojca Miklavec wrote:
>>>
>>> \definefontfeature
>>>    [default]
>>>    [liga=yes,kern=yes,tlig=yes,compose=yes]
>>> \definefontsynonym[hoefler][file:Hoefler Text.ttc][features=default]
>>
>> Can this even work? AFAIK TTC is a collection of fonts, so you need to
>> select one of the fonts in the collection, may be:
>>   file:Hoefler Text.ttc(0)
>
> I have no idea if that can work or not. (I have never really looked
> into how the fonts are composed. But using the zero at the end doesn't
> help.)
>
> But apparently it does work, since I can make the character "?"
> (obreve) appear with that strategy without a problem, it only crashes
> when the needed accent is missing.

If you call on a ttc in the way you do it, then you will get entry
zero in the ttc. It works (in general), but since you do not actually
know what font you are using, it is not a wise thing to do :)
It is better to always use name: for fonts inside collections.

> It seems that the accent "bottom dot", "bottom macron" are missing in
> Hoefler TeX (and most probably some other accents as well) and this is
> the reason why it "crashes".

I think it crashes because the 'compose' feature is modifying the node
list directly, thus bypassing the 'does this glyph exist' test in the
engine itself (that test runs at node creation time). Without
'compose=yes' it does not crash, just does not show anything.

Hans and I have to discuss how to handle this (whether it should be
the engine or the lua side doing the existance test to prevent the
crash) but Hans is not online today so it will have to wait for a bit.

Best wishes,
Taco

From root at mail.boekplan.nl  Sun Dec  5 16:27:54 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun,  5 Dec 2010 16:27:54 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101205152754.7E4E740056@mail.boekplan.nl>

------------------------------------------------------------------------
r4023 | taco | 2010-12-05 16:10:06 +0100 (Sun, 05 Dec 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.w

fix assignments to \dimen65535

------------------------------------------------------------------------

From root at mail.boekplan.nl  Tue Dec  7 12:28:14 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue,  7 Dec 2010 12:28:14 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101207112814.EA38840069@mail.boekplan.nl>

------------------------------------------------------------------------
r4024 | taco | 2010-12-07 11:19:14 +0100 (Tue, 07 Dec 2010) | 4 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/textoken.w

addendum to #3999: if the command scan_keyword has parsed by mistake
actually was endv_cmd, then the aligment state must *not* be reverted,
otherwise an error ensues

------------------------------------------------------------------------

From root at mail.boekplan.nl  Wed Dec  8 12:27:53 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed,  8 Dec 2010 12:27:53 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101208112753.9718C4006F@mail.boekplan.nl>

------------------------------------------------------------------------
r4025 | oneiros | 2010-12-07 23:33:18 +0100 (Tue, 07 Dec 2010) | 2 lines
Changed paths:
   M /trunk/source/libs/zlib/ChangeLog
   M /trunk/source/libs/zlib/Makefile.am
   M /trunk/source/libs/zlib/Makefile.in
   M /trunk/source/libs/zlib/aclocal.m4
   M /trunk/source/libs/zlib/config.h.in
   M /trunk/source/libs/zlib/configure
   M /trunk/source/libs/zlib/configure.ac
   M /trunk/source/libs/zlib/include/Makefile.in
   D /trunk/source/libs/zlib/zlib-1.2.3
   D /trunk/source/libs/zlib/zlib-1.2.3-PATCHES
   A /trunk/source/libs/zlib/zlib-1.2.5 (from /trunk/source/libs/zlib/zlib-1.2.3:4024)
   A /trunk/source/libs/zlib/zlib-1.2.5/CMakeLists.txt
   M /trunk/source/libs/zlib/zlib-1.2.5/ChangeLog
   M /trunk/source/libs/zlib/zlib-1.2.5/FAQ
   M /trunk/source/libs/zlib/zlib-1.2.5/INDEX
   M /trunk/source/libs/zlib/zlib-1.2.5/Makefile
   M /trunk/source/libs/zlib/zlib-1.2.5/Makefile.in
   M /trunk/source/libs/zlib/zlib-1.2.5/README
   M /trunk/source/libs/zlib/zlib-1.2.5/adler32.c
   D /trunk/source/libs/zlib/zlib-1.2.5/algorithm.txt
   M /trunk/source/libs/zlib/zlib-1.2.5/amiga/Makefile.pup
   M /trunk/source/libs/zlib/zlib-1.2.5/amiga/Makefile.sas
   D /trunk/source/libs/zlib/zlib-1.2.5/as400
   M /trunk/source/libs/zlib/zlib-1.2.5/compress.c
   M /trunk/source/libs/zlib/zlib-1.2.5/configure
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/README.contrib
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/amd64
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/amd64/amd64-match.S
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/asm386
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/asm586
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/asm686/README.686
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/asm686/match.S
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/delphi/ZLib.pas
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/delphi/zlib.mak
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/delphi/zlibd32.mak
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/delphi/zlibdef.pas
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/delphi2
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/dotzlib/DotZLib/AssemblyInfo.cs
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/dotzlib/DotZLib/ChecksumImpl.cs
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/dotzlib/DotZLib/CircularBuffer.cs
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/dotzlib/DotZLib/CodecBase.cs
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/dotzlib/DotZLib/Deflater.cs
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/dotzlib/DotZLib/DotZLib.cs
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/dotzlib/DotZLib/DotZLib.csproj
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/dotzlib/DotZLib/GZipStream.cs
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/dotzlib/DotZLib/Inflater.cs
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/dotzlib/DotZLib/UnitTests.cs
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/dotzlib/DotZLib.build
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/dotzlib/DotZLib.chm
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/dotzlib/DotZLib.sln
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/dotzlib/LICENSE_1_0.txt
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/dotzlib/readme.txt
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/gcc_gvmat64
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/gcc_gvmat64/gvmat64.S
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/infback9/infback9.c
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/infback9/inftree9.c
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/infback9/inftree9.h
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/inflate86/inffas86.c
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/masm686
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/masmx64/bld_ml64.bat
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/masmx64/gvmat64.asm
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/masmx64/inffas8664.c
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/masmx64/inffasx64.asm
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/masmx64/readme.txt
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/masmx86/bld_ml32.bat
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/masmx86/gvmat32.asm
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/masmx86/gvmat32c.c
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/masmx86/inffas32.asm
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/masmx86/match686.asm
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/masmx86/mkasm.bat
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/masmx86/readme.txt
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/ChangeLogUnzip
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/MiniZip64_Changes.txt
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/MiniZip64_info.txt
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/crypt.h
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/ioapi.c
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/ioapi.h
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/iowin32.c
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/iowin32.h
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/make_vms.com
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/miniunz.c
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/minizip.c
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/mztools.c
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/mztools.h
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/readme.txt
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/unzip.c
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/unzip.def
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/unzip.h
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/zip.c
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/zip.def
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/zip.h
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/zlibvc.def
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/zlibvc.dsp
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/minizip/zlibvc.dsw
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/pascal/zlibd32.mak
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/pascal/zlibpas.pas
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/puff/puff.c
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/puff/puff.h
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/testzlib/testzlib.c
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/testzlib/testzlib.txt
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/untgz/makefile.w32
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/visual-basic.txt
   M /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/readme.txt
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/miniunz.vcxproj
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/miniunz.vcxproj.filters
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/miniunz.vcxproj.user
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/minizip.vcxproj
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/minizip.vcxproj.filters
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/minizip.vcxproj.user
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/testzlib.vcxproj
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/testzlib.vcxproj.filters
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/testzlib.vcxproj.user
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/testzlibdll.vcxproj
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/testzlibdll.vcxproj.filters
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/testzlibdll.vcxproj.user
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/zlib.rc
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/zlibstat.vcxproj
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/zlibstat.vcxproj.filters
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/zlibstat.vcxproj.user
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/zlibvc.def
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/zlibvc.sln
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/zlibvc.vcxproj
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/zlibvc.vcxproj.filters
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc10/zlibvc.vcxproj.user
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc7
   D /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc8
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc9
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc9/miniunz.vcproj
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc9/minizip.vcproj
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc9/testzlib.vcproj
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc9/testzlibdll.vcproj
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc9/zlib.rc
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc9/zlibstat.vcproj
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc9/zlibvc.def
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc9/zlibvc.sln
   A /trunk/source/libs/zlib/zlib-1.2.5/contrib/vstudio/vc9/zlibvc.vcproj
   M /trunk/source/libs/zlib/zlib-1.2.5/crc32.c
   M /trunk/source/libs/zlib/zlib-1.2.5/deflate.c
   M /trunk/source/libs/zlib/zlib-1.2.5/deflate.h
   A /trunk/source/libs/zlib/zlib-1.2.5/doc
   A /trunk/source/libs/zlib/zlib-1.2.5/doc/algorithm.txt
   A /trunk/source/libs/zlib/zlib-1.2.5/doc/rfc1950.txt
   A /trunk/source/libs/zlib/zlib-1.2.5/doc/rfc1951.txt
   A /trunk/source/libs/zlib/zlib-1.2.5/doc/rfc1952.txt
   A /trunk/source/libs/zlib/zlib-1.2.5/doc/txtvsbin.txt
   M /trunk/source/libs/zlib/zlib-1.2.5/example.c
   M /trunk/source/libs/zlib/zlib-1.2.5/examples/README.examples
   A /trunk/source/libs/zlib/zlib-1.2.5/examples/enough.c
   M /trunk/source/libs/zlib/zlib-1.2.5/examples/gun.c
   M /trunk/source/libs/zlib/zlib-1.2.5/examples/gzlog.c
   M /trunk/source/libs/zlib/zlib-1.2.5/examples/gzlog.h
   M /trunk/source/libs/zlib/zlib-1.2.5/examples/zlib_how.html
   M /trunk/source/libs/zlib/zlib-1.2.5/examples/zpipe.c
   M /trunk/source/libs/zlib/zlib-1.2.5/examples/zran.c
   A /trunk/source/libs/zlib/zlib-1.2.5/gzclose.c
   A /trunk/source/libs/zlib/zlib-1.2.5/gzguts.h
   D /trunk/source/libs/zlib/zlib-1.2.5/gzio.c
   A /trunk/source/libs/zlib/zlib-1.2.5/gzlib.c
   A /trunk/source/libs/zlib/zlib-1.2.5/gzread.c
   A /trunk/source/libs/zlib/zlib-1.2.5/gzwrite.c
   M /trunk/source/libs/zlib/zlib-1.2.5/infback.c
   M /trunk/source/libs/zlib/zlib-1.2.5/inffast.c
   M /trunk/source/libs/zlib/zlib-1.2.5/inffast.h
   M /trunk/source/libs/zlib/zlib-1.2.5/inflate.c
   M /trunk/source/libs/zlib/zlib-1.2.5/inflate.h
   M /trunk/source/libs/zlib/zlib-1.2.5/inftrees.c
   M /trunk/source/libs/zlib/zlib-1.2.5/inftrees.h
   M /trunk/source/libs/zlib/zlib-1.2.5/make_vms.com
   M /trunk/source/libs/zlib/zlib-1.2.5/minigzip.c
   M /trunk/source/libs/zlib/zlib-1.2.5/msdos/Makefile.bor
   M /trunk/source/libs/zlib/zlib-1.2.5/msdos/Makefile.dj2
   M /trunk/source/libs/zlib/zlib-1.2.5/msdos/Makefile.emx
   M /trunk/source/libs/zlib/zlib-1.2.5/msdos/Makefile.msc
   M /trunk/source/libs/zlib/zlib-1.2.5/msdos/Makefile.tc
   A /trunk/source/libs/zlib/zlib-1.2.5/nintendods
   A /trunk/source/libs/zlib/zlib-1.2.5/nintendods/Makefile
   A /trunk/source/libs/zlib/zlib-1.2.5/nintendods/README
   A /trunk/source/libs/zlib/zlib-1.2.5/old/as400
   A /trunk/source/libs/zlib/zlib-1.2.5/old/as400/bndsrc
   A /trunk/source/libs/zlib/zlib-1.2.5/old/as400/compile.clp
   A /trunk/source/libs/zlib/zlib-1.2.5/old/as400/readme.txt
   A /trunk/source/libs/zlib/zlib-1.2.5/old/as400/zlib.inc
   A /trunk/source/libs/zlib/zlib-1.2.5/old/visualc6
   A /trunk/source/libs/zlib/zlib-1.2.5/old/visualc6/README.txt
   A /trunk/source/libs/zlib/zlib-1.2.5/old/visualc6/example.dsp
   A /trunk/source/libs/zlib/zlib-1.2.5/old/visualc6/minigzip.dsp
   A /trunk/source/libs/zlib/zlib-1.2.5/old/visualc6/zlib.dsp
   A /trunk/source/libs/zlib/zlib-1.2.5/old/visualc6/zlib.dsw
   D /trunk/source/libs/zlib/zlib-1.2.5/projects
   M /trunk/source/libs/zlib/zlib-1.2.5/qnx/package.qpg
   A /trunk/source/libs/zlib/zlib-1.2.5/treebuild.xml
   M /trunk/source/libs/zlib/zlib-1.2.5/trees.c
   M /trunk/source/libs/zlib/zlib-1.2.5/trees.h
   M /trunk/source/libs/zlib/zlib-1.2.5/uncompr.c
   A /trunk/source/libs/zlib/zlib-1.2.5/watcom
   A /trunk/source/libs/zlib/zlib-1.2.5/watcom/watcom_f.mak
   A /trunk/source/libs/zlib/zlib-1.2.5/watcom/watcom_l.mak
   M /trunk/source/libs/zlib/zlib-1.2.5/win32/DLL_FAQ.txt
   M /trunk/source/libs/zlib/zlib-1.2.5/win32/Makefile.bor
   M /trunk/source/libs/zlib/zlib-1.2.5/win32/Makefile.emx
   M /trunk/source/libs/zlib/zlib-1.2.5/win32/Makefile.gcc
   M /trunk/source/libs/zlib/zlib-1.2.5/win32/Makefile.msc
   A /trunk/source/libs/zlib/zlib-1.2.5/win32/README-WIN32.txt
   M /trunk/source/libs/zlib/zlib-1.2.5/win32/zlib.def
   M /trunk/source/libs/zlib/zlib-1.2.5/win32/zlib1.rc
   A /trunk/source/libs/zlib/zlib-1.2.5/zconf.h.cmakein
   A /trunk/source/libs/zlib/zlib-1.2.5/zconf.h.in
   D /trunk/source/libs/zlib/zlib-1.2.5/zconf.in.h
   M /trunk/source/libs/zlib/zlib-1.2.5/zlib.3
   A /trunk/source/libs/zlib/zlib-1.2.5/zlib.3.pdf
   M /trunk/source/libs/zlib/zlib-1.2.5/zlib.h
   A /trunk/source/libs/zlib/zlib-1.2.5/zlib.map
   A /trunk/source/libs/zlib/zlib-1.2.5/zlib.pc.in
   A /trunk/source/libs/zlib/zlib-1.2.5/zlib2ansi
   M /trunk/source/libs/zlib/zlib-1.2.5/zutil.c
   M /trunk/source/libs/zlib/zlib-1.2.5/zutil.h
   A /trunk/source/libs/zlib/zlib-1.2.5-PATCHES (from /trunk/source/libs/zlib/zlib-1.2.3-PATCHES:4024)
   A /trunk/source/libs/zlib/zlib-1.2.5-PATCHES/ChangeLog
   M /trunk/source/libs/zlib/zlib-1.2.5-PATCHES/TL-Changes
   A /trunk/source/libs/zlib/zlib-1.2.5-PATCHES/patch-01-LARGEFILE64_SOURCE

start updating zlib to zlib-1.2.5 from TL

------------------------------------------------------------------------
r4026 | oneiros | 2010-12-07 23:37:30 +0100 (Tue, 07 Dec 2010) | 3 lines
Changed paths:
   M /trunk/source/libs/zlib

Initialized merge tracking via "svnmerge" with revisions "1-20674" from 
svn://tug.org/texlive/trunk/Build/source/libs/zlib

------------------------------------------------------------------------
r4027 | oneiros | 2010-12-07 23:43:21 +0100 (Tue, 07 Dec 2010) | 3 lines
Changed paths:
   M /trunk/source/libs/libpng

Initialized merge tracking via "svnmerge" with revisions "1-20194" from 
svn://tug.org/texlive/trunk/Build/source/libs/libpng

------------------------------------------------------------------------
r4028 | oneiros | 2010-12-07 23:46:55 +0100 (Tue, 07 Dec 2010) | 3 lines
Changed paths:
   M /trunk/source/libs/libpng

Removed merge tracking for "svnmerge" for 
http://foundry.supelec.fr/svn/luatex/trunk/Build/source/libs/libpng

------------------------------------------------------------------------
r4029 | oneiros | 2010-12-07 23:50:32 +0100 (Tue, 07 Dec 2010) | 3 lines
Changed paths:
   M /trunk/source/libs/libpng

Initialized merge tracking via "svnmerge" with revisions "1-20396" from 
svn://tug.org/texlive/trunk/Build/source/libs/libpng

------------------------------------------------------------------------
r4030 | oneiros | 2010-12-07 23:55:06 +0100 (Tue, 07 Dec 2010) | 3 lines
Changed paths:
   M /trunk/source/libs/zlib

Removed merge tracking for "svnmerge" for 
http://foundry.supelec.fr/svn/luatex/trunk/Build/source/libs/zlib

------------------------------------------------------------------------
r4031 | oneiros | 2010-12-07 23:56:43 +0100 (Tue, 07 Dec 2010) | 3 lines
Changed paths:
   M /trunk/source/libs/zlib

Initialized merge tracking via "svnmerge" with revisions "1-20674" from 
svn://tug.org/texlive/trunk/Build/source/libs/zlib

------------------------------------------------------------------------

From taco at elvenkind.com  Sat Dec 11 10:58:30 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 11 Dec 2010 10:58:30 +0100
Subject: [Dev-luatex] testers needed for \halign + keyword problem (bug #503)
Message-ID: <4D034B46.5040208@elvenkind.com>

Hi,

For those of you that know how: can you please check out revision 4032
of luatex and test it on any files you have that contain complicated
alignments (latex tabular / context starttable ?).

Especially, the bug symptom is an error of this form:

   ! Emergency stop.
   <recently read> \endtemplate

I have tried various files I do have and it seems that the bug is
fixed now, but my file list is not exhaustive (most of my documents
use context \starttabulate)

Thanks in advance,
Taco

From root at mail.boekplan.nl  Sat Dec 11 12:28:08 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat, 11 Dec 2010 12:28:08 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101211112808.3F6604007B@mail.boekplan.nl>

------------------------------------------------------------------------
r4032 | taco | 2010-12-11 10:38:19 +0100 (Sat, 11 Dec 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/textoken.w

third attempt at #503

------------------------------------------------------------------------

From graham.douglas at readytext.co.uk  Sat Dec 11 13:23:48 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Sat, 11 Dec 2010 12:23:48 +0000
Subject: [Dev-luatex] dev-luatex Digest, Vol 59, Issue 8
In-Reply-To: <mailman.5.1292065202.19365.dev-luatex@ntg.nl>
References: <mailman.5.1292065202.19365.dev-luatex@ntg.nl>
Message-ID: <4D036D54.5000807@readytext.co.uk>

Hi Taco

Just built revision 4032 and so far no problems with
examples I can find, will keep testing. One possibility
for getting a good collection of samples, perhaps, is the
book I just discovered by Herbert Voss
--- devoted to the subject of tables:

Typesetting Tables with Latex
publication date:     10-Jan-2011

http://www.uit.co.uk/BK-TTWL/HomePage

I don't know if Herbert reads this list or uses luatex
but pehaps he may have some good examples to stress test
this revision.

Best

Graham

> Date: Sat, 11 Dec 2010 10:58:30 +0100
> From: Taco Hoekwater <taco at elvenkind.com>
> To: luatex development list <dev-luatex at ntg.nl>
> Subject: [Dev-luatex] testers needed for \halign + keyword problem
> 	(bug #503)
> Message-ID: <4D034B46.5040208 at elvenkind.com>
> Content-Type: text/plain; charset=ISO-8859-1; format=flowed
> 
> Hi,
> 
> For those of you that know how: can you please check out revision 4032
> of luatex and test it on any files you have that contain complicated
> alignments (latex tabular / context starttable ?).
> 
> Especially, the bug symptom is an error of this form:
> 
>    ! Emergency stop.
>    <recently read> \endtemplate
> 
> I have tried various files I do have and it seems that the bug is
> fixed now, but my file list is not exhaustive (most of my documents
> use context \starttabulate)
> 
> Thanks in advance,
> Taco
> 
> 
> ------------------------------
> 
> _______________________________________________
> dev-luatex mailing list
> dev-luatex at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-luatex
> 
> 
> End of dev-luatex Digest, Vol 59, Issue 8
> *****************************************
> 



From patrick at gundla.ch  Sat Dec 11 17:32:09 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sat, 11 Dec 2010 17:32:09 +0100
Subject: [Dev-luatex] arg[0] / texlua
Message-ID: <E134C922-A63F-495D-8E62-51687E770B1B@gundla.ch>

Hi,

when I have a script that starts with the line

#!/usr/bin/env texlua

I have on my Mac OS X system the full path to my script in arg[0]. Is this portable? That is, if I run this under windows/solaris/... will I always find out where this script is located?

Or other question: is there a more-or-less portable way to find out the location of a script from inside the script? I'd like to set up package.path to a relative directory such as:


package.path = .... <relative to this file, not the $PWD>

require "mylib"

...


Patrick


From reinhard.kotucha at web.de  Sat Dec 11 21:38:32 2010
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 11 Dec 2010 21:38:32 +0100
Subject: [Dev-luatex] arg[0] / texlua
In-Reply-To: <E134C922-A63F-495D-8E62-51687E770B1B@gundla.ch>
References: <E134C922-A63F-495D-8E62-51687E770B1B@gundla.ch>
Message-ID: <19715.57672.738450.234438@zaphod.ms25.net>

On 11 December 2010 Patrick Gundlach wrote:

 > Hi,
 > 
 > when I have a script that starts with the line
 > 
 > #!/usr/bin/env texlua
 > 
 > I have on my Mac OS X system the full path to my script in
 > arg[0]. Is this portable? That is, if I run this under
 > windows/solaris/... will I always find out where this script is
 > located?

Hi Patrick,
these are two different questions.  First, the #! line works
everywhere except on Windows.  It finds the interpreter (not your
script) in PATH.  There is no reasonable alternative on Windows.  You
have to associate filename extensions with interpreters in the registry.
If you are using TeX Live, you can start your script from a wrapper
instead. 
 
 > Or other question: is there a more-or-less portable way to find out
 > the location of a script from inside the script? I'd like to set up
 > package.path to a relative directory such as:

 > package.path = .... <relative to this file, not the $PWD>

Try this:
-------------------------------------------------------
#!/usr/bin/env texlua

dirname, filename = string.match(arg[0], '(.*[/\\])(.*)')

print('dirname='..dirname)
print('filename='..filename)
-------------------------------------------------------

it works as expected on Unix:

$ testarg0.lua 
dirname=/usr/local/bin/
filename=testarg0.lua

You will certainly get similar results in TeX Live because the
location of your script is determined by the wrapper, and hence by
kpathsea, which returns the full path.  Please note that dirname found
by string.match() in the example above contains the leading directory
separator already and that backslashes are supported too.

In order to install your script under TeX Live, copy it to
TEXMFLOCAL/scripts.  It must have one of the extensions .tlu, .texlua,
or .lua.  Then run texhash.

For Unix you have to make the script executable and to create symlinks
to the script in all bin/<platform> directories.  The symlinks should
not have extensions.  (ln -s relative/path/to/myscript.lua myscript)

For Windows, go to bin/win32 and "cp -p runscript.exe myscript.exe"
(or, on Windows itself, "copy /b runscript.exe myscript.exe".

I'm not sure about Windows in general.  I can imagine that it works
too if the extension of your script is associated with the texlua
binary in the registry.  I suppose that this is necessary if you want
to run your script under MikTeX.

BTW, whether you are using the extension .tlu, .texlua, or .lua
doesn't matter if your script is invoked by a wrapper.  However, if
you associate extensions with interpreters in the registry, I
recommend .tlu and .texlua for scripts which depend on texlua.  This
avoids nasty problems when people install a generic Lua engine too.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From patrick at gundla.ch  Sun Dec 12 20:52:37 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sun, 12 Dec 2010 20:52:37 +0100
Subject: [Dev-luatex] arg[0] / texlua
In-Reply-To: <19715.57672.738450.234438@zaphod.ms25.net>
References: <E134C922-A63F-495D-8E62-51687E770B1B@gundla.ch>
	<19715.57672.738450.234438@zaphod.ms25.net>
Message-ID: <B44BEA3D-7DEB-4122-A07B-DEBD4AA97A0D@gundla.ch>

Hello Reinhard,

> these are two different questions.  First, the #! line works
> everywhere except on Windows.  It finds the interpreter (not your
> script) in PATH.  There is no reasonable alternative on Windows.  You
> have to associate filename extensions with interpreters in the registry.
> If you are using TeX Live, you can start your script from a wrapper
> instead. 

OK, thanks.

> Try this:
> -------------------------------------------------------
> #!/usr/bin/env texlua
> 
> dirname, filename = string.match(arg[0], '(.*[/\\])(.*)')
> 
> print('dirname='..dirname)
> print('filename='..filename)
> -------------------------------------------------------
> 
> it works as expected on Unix:
> 

On every Unix? I once tried this with sh (echo $0) and if I remember correctly it gave me a relative path on solaris and an absolute path on linux.

> You will certainly get similar results in TeX Live

I don't use TeXlive in this case, just one LuaTeX binary for luatex and texlua.

> because the
> location of your script is determined by the wrapper, and hence by
> kpathsea, which returns the full path.  Please note that dirname found
> by string.match() in the example above contains the leading directory
> separator already and that backslashes are supported too.

So I assume from your answer that arg[0] in my lua skript is set by kpathsea, and it contains the full path. So I can find out where I am by looking at it?

Thanks again

Patrick


From reinhard.kotucha at web.de  Mon Dec 13 02:09:12 2010
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 13 Dec 2010 02:09:12 +0100
Subject: [Dev-luatex] arg[0] / texlua
In-Reply-To: <B44BEA3D-7DEB-4122-A07B-DEBD4AA97A0D@gundla.ch>
References: <E134C922-A63F-495D-8E62-51687E770B1B@gundla.ch>
	<19715.57672.738450.234438@zaphod.ms25.net>
	<B44BEA3D-7DEB-4122-A07B-DEBD4AA97A0D@gundla.ch>
Message-ID: <19717.29240.460729.345608@zaphod.ms25.net>

On 12 December 2010 Patrick Gundlach wrote:

 > Hello Reinhard,
 > 
 > > these are two different questions.  First, the #! line works
 > > everywhere except on Windows.  It finds the interpreter (not your
 > > script) in PATH.  There is no reasonable alternative on Windows.
 > > You have to associate filename extensions with interpreters in
 > > the registry.  If you are using TeX Live, you can start your
 > > script from a wrapper instead.
 > 
 > OK, thanks.
 > 
 > > Try this:
 > > -------------------------------------------------------
 > > #!/usr/bin/env texlua
 > > 
 > > dirname, filename = string.match(arg[0], '(.*[/\\])(.*)')
 > > 
 > > print('dirname='..dirname)
 > > print('filename='..filename)
 > > -------------------------------------------------------
 > > 
 > > it works as expected on Unix:
 > > 
 > 
 > On every Unix? I once tried this with sh (echo $0) and if I
 > remember correctly it gave me a relative path on solaris and an
 > absolute path on linux.

Hi Patrick,
it depends on how you invoke the program.  If you specify a path on
the command line, this path is used.  It might be absolute or relative
to $PWD.  For instance:

$ /usr/local/bin/testarg0.lua
dirname=/usr/local/bin/
$ ../../../../usr/local/bin/testarg0.lua 
dirname=../../../../usr/local/bin/

If you don't specify a path, /usr/bin/env searches the binary in PATH.

$ testarg0.lua 
dirname='/usr/local/bin/'

I assume that /usr/bin/env is available on all Unix systems.  I've
read somewhere that some shells require a space after #! but it seems
that it's not required on the Unix supported by TeX Live.

I'm wondering why you prefer an absolute path.  It actually doesn't
matter.  You can write

   dirname = string.match(arg[0], '(.*[/\\])(.*)')
   package.path = dirname .. "../modules/"
   require "mylib"

and mylib.lua will be found regardless whether the path to the program
is absolute or relative.

 > > You will certainly get similar results in TeX Live
 > 
 > I don't use TeXlive in this case, just one LuaTeX binary for luatex
 > and texlua.
 > 
 > > because the location of your script is determined by the wrapper,
 > > and hence by kpathsea, which returns the full path.  Please note
 > > that dirname found by string.match() in the example above
 > > contains the leading directory separator already and that
 > > backslashes are supported too.
 > 
 > So I assume from your answer that arg[0] in my lua skript is set by
 > kpathsea, and it contains the full path. So I can find out where I
 > am by looking at it?

Sorry, I was quite unprecise.  kpathsea is only involved if the script
is launched by a wrapper and the wrappers are only for Windows.  They
are needed because there are no symlinks on Windows and because we
have to set a few environment variables for the hidden Perl and
Ghostscript before launching a script.

If you want to provide a tiny distribution for several platforms, you
can steal some stuff from TeX Live.  One nice thing is that, if you
use the wrappers, you don't have to put anything into the registry.
All you have to do is to add bin/win32 to PATH.  The wrappers are
explained in detail in bin/win32/runscript.tlu.

There is one thing which can cause trouble.  Sorry that it didn't come
earlier to my mind.  Because runscript is mostly written in texlua, it
doesn't invoke Lua scripts as usual.  For efficiency, it determines
the location of the script and then runs the Lua function dofile().  
I don't know which impact this has on arg[0], but, if necessary, you
can always change runscript.tlu so that it invokes Lua scripts as it
invokes Perl scripts, i.e. with os.spawn().  It's advantageous, at
least, that the wrappers are written in a scripting language and can
easily be adapted.  Below is an excerpt from runscript.tlu.

Regards,
  Reinhard



  Script wrappers in TeX Live on Windows
  
  Rationale
  
    Wrappers enable use of scripts on Windows as regular programs.  
    They are also required for some binary programs to set up the 
    right environment for them. 
    
    Batch scripts can be used for wrapping but they are not as universal 
    as binaries (there are some odd cases where they don't work) and 
    it is hard to make them robust and secure.  Compiled binary wrappers 
    don't suffer from these problems but they are harder to write, debug
    and maintain in comparison to scripts.  For these reasons a hybrid 
    approach is taken that combines a binary stub with a launcher script.
  
  Adding wrappers for user scripts
  
    The script wrapping machinery is not limited to scripts shipped with 
    TeX Live.  You can also use it for script programs from manually 
    installed packages, which should minimize the problems when using 
    them with TeX Live. 
    
    First, make sure that there is an interpreter program available on 
    your system for the script you want to use.  Interpreters for Perl 
    and Lua are bundled with TeX Live, all others have to be installed 
    independently.  Lua scripts are the most efficient to run, so if you
    consider writing a new script, that would be the recommended choice.
    
    The following script types and their file extensions are currently 
    supported and searched in that order:
    
      Lua      (.tlu;.texlua;.lua) --  included
      Perl     (.pl)               --  included
      Ruby     (.rb)               --  requires installation
      Python   (.py)               --  requires installation
      Tcl      (.tcl)              --  requires installation
      Java     (.jar)              --  requires installation
      VBScript (.vbs)              --  part of Windows
      JScript  (.js)               --  part of Windows
      Batch    (.bat;.cmd)         --  part of Windows
    
    Finally, Unix-style extensionless scripts are searched as last and 
    the interpreter program is established based on the she-bang (#!) 
    specification on the very first line of the script.  This can be 
    an arbitrary program but it must be present on the search path.
    
    Next, the script program needs to be installed somewhere below the 
    'scripts' directory under one of the TEXMF trees (consult the 
    documentation or texmf/web2c/texmf.cnf file for a list).  You may 
    need to update the file search database afterwards with:
    
      mktexlsr [TEXMFDIR]
      
    It is also possible to use scripts that are outside of TEXMF hierarchy 
    by adjusting TEXMFSCRIPTS environment or kpathsea variable, see 
    kpathsea documentation for more information on setting its variables.
    
    Test if the script can be located with:
    
      kpsewhich --format=texmfscripts <script-name>.<ext>
    
    This should output the full path to the script if everything is 
    properly installed and configured.  If this test is successful, 
    the script can be run immediately with:
    
      runscript <script-name> [script arguments]
    
    If you prefer to call the script program simply by its name, copy 
    and rename bin/win32/runscript.exe to <script-name>.exe and put it 
    in bin/win32/ directory of your TeX Live installation or, if you 
    don't have the write permissions there, somewhere else on the search 
    path.]]

local docstr = [[

  Wrapper structure
  
    Wrappers consist of small binary stubs and a common texlua script.  
    The binary stubs are all the same, just different names (but CLI 
    and GUI stubs differ, see below, and GUI stubs are actually all 
    different due to different embedded icons).
    
    The job of the binary stub is twofold: (a) call the texlua launcher
    script 'runscript.tlu' from the same directory (or more precisely 
    from the directory containing 'runscript.dll') and (b) pass to it 
    argv[0] and the unparsed argument string as the last two arguments 
    (after adding a sentinel argument, which ends with a new line 
    character).  Arbitrary C strings can be passed, because the script 
    is executed by linking with luatex.dll and calling the lua 
    interpreter internally rather than by spawning a new process.
    
    There are two flavours of the binary stub: one for CLI programs 
    and another one for GUI programs.  The GUI variant does not open 
    a console window nor does it block the command prompt if started 
    from there.  It also uses a dialog box to display an error message 
    in addition to outputting to stderr.
    
    The stubs are further split into a common DLL and EXE proxies 
    to it.  This is for maintenance reasons - updates can be done by 
    replacement of a single DLL rather than all binary stubs.
    
    The launcher script knows, which variant has been used to invoke it 
    based on the sentinel argument.  The lack of this argument means 
    that it was invoked in a standard way, i.e. through texlua.exe. 
    
    All the hard work of locating a script/program to execute happens 
    in the launcher script.  The located script/program is always 
    executed directly by spawning its interpreter (or binary) in a new 
    process. The system shell (cmd.exe) is never called (except for 
    batch scripts, of course).  If the located script happens to be 
    a (tex)lua script, it is loaded and called internally from within 
    this script, i.e. no new process is spawned.  Execution is done 
    using a protected call, so any compile or runtime errors are catched.
    
  Source files
  
    runscript.tlu     launcher script for locating and dispatching 
                      target scripts/programs
    runscript_dll.c   common DLL part of the binary stubs; locates and
                      calls the launcher script
    runscript_exe.c   EXE proxy to the common DLL for CLI mode stubs
    wrunscript_exe.c  EXE proxy to the common DLL for GUI mode stubs
  

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From taco at elvenkind.com  Mon Dec 13 14:54:19 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 13 Dec 2010 14:54:19 +0100
Subject: [Dev-luatex] Luatex 0.65.0 announcement
Message-ID: <4D06258B.7020904@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.65.0.

This release mostly fixes a number of bugs, but it also deprecates
a number of existing lua and macro commands. Please read the News
section carefully if you are the current maintainer of a luatex
macro package.

News:

* The Aleph and Omega version primitives are deprecated.

* The Apple Snow Leopard Truetype font collections now work
   properly.

* Libpng has been updated to 1.4.4, and zlib to 1.2.5.

* New lua functions node.next() and node.prev().

* The already deprecated for some time node.protrusion_skipable()
   function has been removed.

* fontloader.apply_featurefile() and fontloader.apply_afmfile()
   now return nil,<errortable> on failure.

* The various node list fields in the lua node interface have
   been renamed from 'list' to 'head', e.g. tex.box[0].head,
   and the 'list' name is deprecated. For now, the deprecation
   is silent, as 'list' will stay for quite some time. Please
   update your lua source as soon as possible, though.

* The call node.type(<node>) now returns "node". The existing
   functionality is otherwise unchanged.

* Luafilesystem has been updated to 1.5.0. NOTE: there is an
   incompatible change in the directory iterator method.

* The restriction on linebreak_filter has been eased: at least one
   horizontal box should be returned, but that is not necessarily
   the last node any more.

* Backward compatibility has been restored for \meaning\mathchar

* node.first_character() has been renamed to node.first_glyph()
   to better match its actual functionality.

* The \Umathaccent primitive now supports both/bottom keywords,
   and \Umathbotaccent / \Umathaccents are now deprecated.

* The \Umathaccent primitive now also supports the fixed keyword,
   which supports non-growing math accents even if the font says
   there are extensible variants.

* Ongoing work on the epdf library.

Bugfixes:

* Assignment to \dimen65535 was broken earlier.

* <box>.head.prev is now always initialized to null (0).

* luatex -lua=<script> '\relax' no longer exits immediately,
   instead going into interactive mode as it should.

* The \jobname was initialized wrongly for input file names
   with multiple dots in them.

* The synctex file is now written in the right place when
   --output-directory is given.

* \letterspacefont could cause crashes, especially when combined
   with font expansion.

* Luatex would crash on linux32 systems if it was build in an
   environment where LFS (>2GB files) was enabled by default.

* Node lists created by node.copy_list() could not be hyphenated
   due to an assertion error.

* Synctex support was partially broken since 0.60.0.

* With OpenType math fonts, accents with multiple parts
   (like the \vec arrow) forgot to include all parts if the
   accentee was too narrow.

* With OpenType math fonts, accents over any class except 0 and 7
   were misplaced.

* kpse.lookup("plain", {all = true}) was broken in kpathsea
   itself (no extension given as well as --all specified).

* A FontForge bug made Cambria Math accents look bad, and the
   placement of math top accents did not allow a marker at the
   origin (patches by Stefan Philipp)

* Cut&Paste from PDF was sometimes broken due to bad ToUnicode map.

* Many small manual improvements (thanks to Paul Isambert)

* An other bugfix to lpeg 0.9 (from Roberto Ierusalimsky)

* Some small fixes to writet1.w (from Han The Thanh)

* A build failure because of bad libz configuration on Win32



The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

   svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.65.0

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org

Have fun,
Taco




From preining at logic.at  Mon Dec 13 15:04:07 2010
From: preining at logic.at (Norbert Preining)
Date: Mon, 13 Dec 2010 23:04:07 +0900
Subject: [Dev-luatex] [luatex] Luatex 0.65.0 announcement
In-Reply-To: <4D06258B.7020904@elvenkind.com>
References: <4D06258B.7020904@elvenkind.com>
Message-ID: <20101213140407.GE18265@gamma.logic.tuwien.ac.at>

On Mo, 13 Dez 2010, Taco Hoekwater wrote:
> I have just uploaded the archives for a new luatex release, 0.65.0.

Is there going to be
	luatex-beta-0.65.0-doc.tar.bz2
or should I use 0.64.0-doc for Debian package building?

Best wishes

Norbert
------------------------------------------------------------------------
Norbert Preining            preining@{jaist.ac.jp, logic.at, debian.org}
JAIST, Japan                                 TeX Live & Debian Developer
DSA: 0x09C5B094   fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
------------------------------------------------------------------------
Arthur's consciousness approached his body as from a great
distance, and reluctantly. It had had some bad times in
there. Slowly, nervously, it entered and settled down into
its accustomed position.
Arthur sat up.
`Where am I?' he said.
`Lord's Cricket Ground,' said Ford.
`Fine,' said Arthur, and his consciousness stepped out
again for a quick breather. His body flopped back on the
grass.
                 --- Arthur coping with his return to Earth as best as he
                 --- could.
                 --- Douglas Adams, The Hitchhikers Guide to the Galaxy

From taco at elvenkind.com  Mon Dec 13 15:08:43 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 13 Dec 2010 15:08:43 +0100
Subject: [Dev-luatex] [luatex] Luatex 0.65.0 announcement
In-Reply-To: <20101213140407.GE18265@gamma.logic.tuwien.ac.at>
References: <4D06258B.7020904@elvenkind.com>
	<20101213140407.GE18265@gamma.logic.tuwien.ac.at>
Message-ID: <4D0628EB.8030005@elvenkind.com>

On 12/13/2010 03:04 PM, Norbert Preining wrote:
> On Mo, 13 Dez 2010, Taco Hoekwater wrote:
>> I have just uploaded the archives for a new luatex release, 0.65.0.
>
> Is there going to be
> 	luatex-beta-0.65.0-doc.tar.bz2
> or should I use 0.64.0-doc for Debian package building?

There is now, my mailer was faster than my uplink.

Best wishes,
Taco

From preining at logic.at  Mon Dec 13 15:18:49 2010
From: preining at logic.at (Norbert Preining)
Date: Mon, 13 Dec 2010 23:18:49 +0900
Subject: [Dev-luatex] [luatex] Luatex 0.65.0 announcement
In-Reply-To: <4D0628EB.8030005@elvenkind.com>
References: <4D06258B.7020904@elvenkind.com>
	<20101213140407.GE18265@gamma.logic.tuwien.ac.at>
	<4D0628EB.8030005@elvenkind.com>
Message-ID: <20101213141849.GF18265@gamma.logic.tuwien.ac.at>

On Mo, 13 Dez 2010, Taco Hoekwater wrote:
> There is now, my mailer was faster than my uplink.

Thanks, now building debian packages soon to be uploaded to experimental.

Best wishes

Norbert
------------------------------------------------------------------------
Norbert Preining            preining@{jaist.ac.jp, logic.at, debian.org}
JAIST, Japan                                 TeX Live & Debian Developer
DSA: 0x09C5B094   fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
------------------------------------------------------------------------
UMBERLEIGH (n.)
The awful moment which follows a dorchester (q.v.) when a speaker
weighs up whether to repeat an amusing remark after nobody laughed the
last time. To be on the horns of an umberleigh is to wonder whether
people didn't hear the remark, or whether they did hear it and just
didn't think it was funny, which was why somebody coughed.
			--- Douglas Adams, The Meaning of Liff

From root at mail.boekplan.nl  Mon Dec 13 16:28:23 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon, 13 Dec 2010 16:28:23 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101213152823.7489540067@mail.boekplan.nl>

------------------------------------------------------------------------
r4033 | taco | 2010-12-13 14:34:11 +0100 (Mon, 13 Dec 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/source/texk/web2c/luatexdir/NEWS

commit NEWS

------------------------------------------------------------------------
r4034 | taco | 2010-12-13 14:35:25 +0100 (Mon, 13 Dec 2010) | 1 line
Changed paths:
   A /tags/beta-0.65.0 (from /trunk:4033)


------------------------------------------------------------------------

From root at mail.boekplan.nl  Wed Dec 15 12:27:47 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed, 15 Dec 2010 12:27:47 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101215112747.7094A4005A@mail.boekplan.nl>

------------------------------------------------------------------------
r4035 | hhenkel | 2010-12-14 23:04:11 +0100 (Tue, 14 Dec 2010) | 5 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/image/pdftoepdf.cc

try to fix the bug reported at Date: Mon, 13 Dec 2010 09:25:20 -0600
Subject: [luatex] pdfpages and lualatex?
Maybe better (idea from Martin, not implemented yet): One could go up
step by step the /Parent hierarchy and merge all /Resources on the way.

------------------------------------------------------------------------
r4036 | hhenkel | 2010-12-14 23:18:02 +0100 (Tue, 14 Dec 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/image/pdftoepdf.cc

move obj1.free()

------------------------------------------------------------------------
r4037 | hhenkel | 2010-12-14 23:29:04 +0100 (Tue, 14 Dec 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/image/pdftoepdf.cc

cosmetics

------------------------------------------------------------------------
r4038 | taco | 2010-12-15 08:40:14 +0100 (Wed, 15 Dec 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

new manual corrections from Paul Isambert

------------------------------------------------------------------------

From root at mail.boekplan.nl  Wed Dec 15 22:27:27 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed, 15 Dec 2010 22:27:27 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101215212727.CFE304005A@mail.boekplan.nl>

------------------------------------------------------------------------
r4039 | hhenkel | 2010-12-15 21:23:32 +0100 (Wed, 15 Dec 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

typo

------------------------------------------------------------------------

From root at mail.boekplan.nl  Thu Dec 16 12:27:46 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Thu, 16 Dec 2010 12:27:46 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101216112746.8B75D4005A@mail.boekplan.nl>

------------------------------------------------------------------------
r4040 | hhenkel | 2010-12-15 23:32:53 +0100 (Wed, 15 Dec 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/image/pdftoepdf.cc

find Resources along the Pages tree

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Dec 17 12:28:22 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 17 Dec 2010 12:28:22 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101217112822.3A95740066@mail.boekplan.nl>

------------------------------------------------------------------------
r4041 | taco | 2010-12-17 09:32:51 +0100 (Fri, 17 Dec 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

more corrections from Paul

------------------------------------------------------------------------
r4042 | taco | 2010-12-17 10:23:20 +0100 (Fri, 17 Dec 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfluaapi.w

fix a problem in the lua pdf backend: lua_gettable() does not pop
the table, so the lua stack kept growing

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Dec 17 16:27:59 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 17 Dec 2010 16:27:59 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101217152759.4EE0240066@mail.boekplan.nl>

------------------------------------------------------------------------
r4043 | taco | 2010-12-17 12:43:36 +0100 (Fri, 17 Dec 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

another small manual correction

------------------------------------------------------------------------

From root at mail.boekplan.nl  Sat Dec 18 12:28:24 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat, 18 Dec 2010 12:28:24 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101218112824.183CA40060@mail.boekplan.nl>

------------------------------------------------------------------------
r4044 | taco | 2010-12-18 10:23:06 +0100 (Sat, 18 Dec 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/align.w
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.h
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.w

the pdftex patch for \vadjust pre in alignments, reworked for luatex

------------------------------------------------------------------------

From root at mail.boekplan.nl  Sun Dec 19 22:28:02 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun, 19 Dec 2010 22:28:02 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101219212802.50C934006F@mail.boekplan.nl>

------------------------------------------------------------------------
r4045 | oneiros | 2010-12-19 21:56:30 +0100 (Sun, 19 Dec 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/image/writepng.w

adapt to pnglib 1.4.4

------------------------------------------------------------------------

From jani at ubuntu.com  Mon Dec 20 13:18:23 2010
From: jani at ubuntu.com (Jani Monoses)
Date: Mon, 20 Dec 2010 14:18:23 +0200
Subject: [Dev-luatex] 0.60.2 fails to build on armel in CXXLD.sh
Message-ID: <ienhig$4r2$1@dough.gmane.org>

Hello,

luatex fails to build on Ubuntu Natty

Here is the build log - search for undefined

http://launchpadlibrarian.net/58040388/buildlog_ubuntu-natty-armel.luatex_0.60.2-1_FAILEDTOBUILD.txt.gz

Comments on the bug report suggest the parameters are not passed
correctly for the static link
https://bugs.launchpad.net/ubuntu/+source/gcc-4.5/+bug/686381

Why is a static link needed btw? Does --disable-runtime-cxx-hack
have some drawbacks?

thanks
Jani


From taco at elvenkind.com  Mon Dec 20 13:41:09 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 20 Dec 2010 13:41:09 +0100
Subject: [Dev-luatex] 0.60.2 fails to build on armel in CXXLD.sh
In-Reply-To: <ienhig$4r2$1@dough.gmane.org>
References: <ienhig$4r2$1@dough.gmane.org>
Message-ID: <4D0F4EE5.3030904@elvenkind.com>

On 12/20/2010 01:18 PM, Jani Monoses wrote:
> Hello,
>
> luatex fails to build on Ubuntu Natty

Note that the current luatex is 0.65.0 (but it is unlikely
that that makes any difference).

> Why is a static link needed btw? Does --disable-runtime-cxx-hack
> have some drawbacks?

Luatex is normally built as part of texlive, and the texlive
distribution contains precompiled binaries for various platforms.
libc++ and the gcc libraries are linked statically to make the
generated binaries more portable, so no, for a local binary
you can disable the hack.

However, I cannot guarantee that that fixes the problem. If a
symbol cannot be found using static linking, I do not have a lot
of faith in the runtime system being able to find it. You may
have to define -fno-exceptions in the CPPFLAGS instead.

Best wishes,
Taco

From luigi.scarso at gmail.com  Mon Dec 20 13:45:48 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Mon, 20 Dec 2010 13:45:48 +0100
Subject: [Dev-luatex] 0.60.2 fails to build on armel in CXXLD.sh
In-Reply-To: <4D0F4EE5.3030904@elvenkind.com>
References: <ienhig$4r2$1@dough.gmane.org>
	<4D0F4EE5.3030904@elvenkind.com>
Message-ID: <AANLkTinp-LryyFfavNkQT9m9+cDN2m3xdX6=VEfRZ761@mail.gmail.com>

Isn't this
/usr/bin/ld: /usr/lib/gcc/arm-linux-gnueabi/4.5.1/libgcc_eh.a(unwind-arm.o):
undefined reference to symbol '__exidx_end'

related to gcc/arm-linux-gnueabi ?

Also this
/usr/bin/ld: note: '__exidx_end' is defined in DSO
/usr/lib/liblcms.so.1 so try adding it to the linker command line
/usr/lib/liblcms.so.1: could not read symbols: Invalid operation
looks strange... why '__exidx_end'  from little cms (liblcms) should
be good for gcc ?

-- 
luigi

From taco at elvenkind.com  Mon Dec 20 14:21:05 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 20 Dec 2010 14:21:05 +0100
Subject: [Dev-luatex] 0.60.2 fails to build on armel in CXXLD.sh
In-Reply-To: <4D0F5678.8000206@canonical.com>
References: <ienhig$4r2$1@dough.gmane.org> <4D0F4EE5.3030904@elvenkind.com>
	<4D0F5678.8000206@canonical.com>
Message-ID: <4D0F5841.9040502@elvenkind.com>

Hi Peter,

Can you have a look at the CXXLD.sgh issue reported below?
The bug that is referred to is here:

   https://bugs.launchpad.net/ubuntu/+source/gcc-4.5/+bug/686381

and reading that will (hopefully) explain enough of the missing
quotations from the email exchange below.

Best wishes,
Taco


On 12/20/2010 02:13 PM, Jani Monoses wrote:
> On 12/20/2010 02:41 PM, Taco Hoekwater wrote:
>> On 12/20/2010 01:18 PM, Jani Monoses wrote:
>>> Hello,
>>>
>>> luatex fails to build on Ubuntu Natty
>>
>> Note that the current luatex is 0.65.0 (but it is unlikely
>> that that makes any difference).
>>
>>> Why is a static link needed btw? Does --disable-runtime-cxx-hack
>>> have some drawbacks?
>>
>> Luatex is normally built as part of texlive, and the texlive
>> distribution contains precompiled binaries for various platforms.
>> libc++ and the gcc libraries are linked statically to make the
>> generated binaries more portable, so no, for a local binary
>> you can disable the hack.
>>
> ok, thanks.
>
> According to a gcc involved commenter on the bugreport I linked to,
> the CXXLD.sh generation itself is incorrect, as he could fix the build
> by omitting some of the flags.
> So that still may be a luatex specific issue.
>
> Jani
>
>> However, I cannot guarantee that that fixes the problem. If a
>> symbol cannot be found using static linking, I do not have a lot
>> of faith in the runtime system being able to find it. You may
>> have to define -fno-exceptions in the CPPFLAGS instead.
>>
>> Best wishes,
>> Taco
>


From peb at mppmu.mpg.de  Mon Dec 20 15:02:22 2010
From: peb at mppmu.mpg.de (Peter Breitenlohner)
Date: Mon, 20 Dec 2010 15:02:22 +0100 (CET)
Subject: [Dev-luatex] 0.60.2 fails to build on armel in CXXLD.sh
In-Reply-To: <4D0F5841.9040502@elvenkind.com>
References: <ienhig$4r2$1@dough.gmane.org> <4D0F4EE5.3030904@elvenkind.com>
	<4D0F5678.8000206@canonical.com> <4D0F5841.9040502@elvenkind.com>
Message-ID: <alpine.LNX.2.00.1012201431500.5193@pcl321.mppmu.mpg.de>

On Mon, 20 Dec 2010, Taco Hoekwater wrote:

> Can you have a look at the CXXLD.sh issue reported below?
> The bug that is referred to is here:
>
>  https://bugs.launchpad.net/ubuntu/+source/gcc-4.5/+bug/686381
>
> and reading that will (hopefully) explain enough of the missing
> quotations from the email exchange below.

Hi Taco,

this problem could be specific for gcc-4.5 or for armel or for the
combination of both.

BTW: Why the comment:
   /usr/bin/ld: note: '__exidx_end' is defined in DSO /usr/lib/liblcms.so.1

The macro KPSE_CXX_HACK is used for all C++ programs in TeX Live. It
supplies the configure option `--enable-cxx-runtime-hack'.  If enabled (the
default) and using g++, the internal subroutine _KPSE_CXX_HACK tries to
compile and statically link the small test program
 	#ifdef HAVE_IOSTREAM
 	#include <iostream>
 	using namespace std;
 	#else
 	#include <iostream.h>
 	#endif
 	int
 	main ()
 	{
 	cout <<"worksok\n";
 	  ;
 	  return 0;
 	}
If this succeeds, the hack is activated.  The problem now is, that this test
seems to succeed whereas the actual link process fails.

In the future we probably need a better test program.  For the moment
`--disable-cxx-runtime-hack' will have to do.

Regards
Peter Breitenlohner <peb at mppmu.mpg.de>

From jani.monoses at canonical.com  Mon Dec 20 14:13:28 2010
From: jani.monoses at canonical.com (Jani Monoses)
Date: Mon, 20 Dec 2010 15:13:28 +0200
Subject: [Dev-luatex] 0.60.2 fails to build on armel in CXXLD.sh
In-Reply-To: <4D0F4EE5.3030904@elvenkind.com>
References: <ienhig$4r2$1@dough.gmane.org> <4D0F4EE5.3030904@elvenkind.com>
Message-ID: <4D0F5678.8000206@canonical.com>

On 12/20/2010 02:41 PM, Taco Hoekwater wrote:
> On 12/20/2010 01:18 PM, Jani Monoses wrote:
>> Hello,
>>
>> luatex fails to build on Ubuntu Natty
>
> Note that the current luatex is 0.65.0 (but it is unlikely
> that that makes any difference).
>
>> Why is a static link needed btw? Does --disable-runtime-cxx-hack
>> have some drawbacks?
>
> Luatex is normally built as part of texlive, and the texlive
> distribution contains precompiled binaries for various platforms.
> libc++ and the gcc libraries are linked statically to make the
> generated binaries more portable, so no, for a local binary
> you can disable the hack.
>
ok, thanks.

According to a gcc involved commenter on the bugreport I linked to,
the CXXLD.sh generation itself is incorrect, as he could fix the build
by omitting some of the flags.
So that still may be a luatex specific issue.

Jani

> However, I cannot guarantee that that fixes the problem. If a
> symbol cannot be found using static linking, I do not have a lot
> of faith in the runtime system being able to find it. You may
> have to define -fno-exceptions in the CPPFLAGS instead.
>
> Best wishes,
> Taco


From jani at ubuntu.com  Tue Dec 21 10:05:01 2010
From: jani at ubuntu.com (Jani Monoses)
Date: Tue, 21 Dec 2010 11:05:01 +0200
Subject: [Dev-luatex] 0.60.2 fails to build on armel in CXXLD.sh
In-Reply-To: <ienhig$4r2$1@dough.gmane.org>
References: <ienhig$4r2$1@dough.gmane.org>
Message-ID: <iepqjt$9lj$1@dough.gmane.org>

On 12/20/2010 02:18 PM, Jani Monoses wrote:
> Hello,
> 
> luatex fails to build on Ubuntu Natty
> 
> Here is the build log - search for undefined
> 
> http://launchpadlibrarian.net/58040388/buildlog_ubuntu-natty-armel.luatex_0.60.2-1_FAILEDTOBUILD.txt.gz

A followup:

it only happens with arm g++-4.5 not earlier, this is why Debian has not
yet seen the issue.
Removing --enable-runtime-cxx-hack from build.sh solves the problem here.

Jani


From root at mail.boekplan.nl  Tue Dec 21 12:27:43 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue, 21 Dec 2010 12:27:43 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101221112743.5653D40072@mail.boekplan.nl>

------------------------------------------------------------------------
r4046 | hhenkel | 2010-12-20 23:25:29 +0100 (Mon, 20 Dec 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lepdflib.cc

add special object type checks isName(), isDict(), isStream(), isCmd()

------------------------------------------------------------------------
r4047 | hhenkel | 2010-12-20 23:31:03 +0100 (Mon, 20 Dec 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lepdflib.cc

add obj:dictSet()

------------------------------------------------------------------------

From graham.douglas at readytext.co.uk  Sat Dec 25 17:30:14 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Sat, 25 Dec 2010 16:30:14 +0000
Subject: [Dev-luatex] Just to say very best wishes + Happy Christmas
Message-ID: <4D161C16.30503@readytext.co.uk>

Hi

Just a short note to wish the LuaTeX team
and all list members a very happy festive season
and another successful year for LuaTeX development.

Best wishes to all

Graham


From heiko.oberdiek at googlemail.com  Sat Dec 25 20:07:48 2010
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Sat, 25 Dec 2010 20:07:48 +0100
Subject: [Dev-luatex] draftmode bugs
Message-ID: <20101225190748.GA8401@oberdiek.my-fqdn.de>

Hello,

Michael Niedermair reported two bugs in the mailing list TEX-D-L.
He used lualatex, but I could reduce it to
  luatex -ini -draftmode

Used version:
  This is LuaTeX, Version beta-0.65.0-2010121316  (INITEX)

1. draftmode creates output file with zero bytes:

\catcode`\{=1
\catcode`\}=2
\directlua{tex.enableprimitives('',{'pdfoutput'})}
\pdfoutput=1
\shipout\hbox{}
\csname @@end\endcsname\end

Result:
  LuaTeX warning: \pdfdraftmode enabled, not changing output pdf
  Transcript written on test.log.
But test.pdf is created with zero bytes.
(It does not matter if a previous test.pdf exists, it will be
overwritten.)

2. Image inclusion fails in draft mode:

\catcode`\{=1
\catcode`\}=2
\directlua{tex.enableprimitives('',%
  {'pdfoutput','pdfximage','pdfrefximage','pdflastximage'})%
}
\pdfoutput=1
\pdfximage{s1.png}\pdfrefximage\pdflastximage
\csname @@end\endcsname\end

! LuaTeX error (setup): \pdfdraftmode cannot be changed after data is
written to the PDF file.

Yours sincerely
  Heiko Oberdiek

From taco at elvenkind.com  Sun Dec 26 12:13:34 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 26 Dec 2010 12:13:34 +0100
Subject: [Dev-luatex] draftmode bugs
In-Reply-To: <20101225190748.GA8401@oberdiek.my-fqdn.de>
References: <20101225190748.GA8401@oberdiek.my-fqdn.de>
Message-ID: <4D17235E.9080505@elvenkind.com>


Hi Heiko,

On 12/25/2010 08:07 PM, Heiko Oberdiek wrote:
> Hello,
>
> Michael Niedermair reported two bugs in the mailing list TEX-D-L.
> He used lualatex, but I could reduce it to
>    luatex -ini -draftmode

Ok and thanks for the simplification.

> Used version:
>    This is LuaTeX, Version beta-0.65.0-2010121316  (INITEX)
>
> 1. draftmode creates output file with zero bytes:

http://tracker.luatex.org/view.php?id=540

> 2. Image inclusion fails in draft mode:

http://tracker.luatex.org/view.php?id=541


Best wishes,
Taco

From toralf.foerster at gmx.de  Thu Dec 30 15:54:39 2010
From: toralf.foerster at gmx.de (Toralf =?utf-8?q?F=C3=B6rster?=)
Date: Thu, 30 Dec 2010 15:54:39 +0100
Subject: [Dev-luatex] QA Notice: Package has poor programming practices
Message-ID: <201012301554.39667.toralf.foerster@gmx.de>

Hello,

under a stable Gentoo I got for dev-tex/luatex-0.63.0 :

...
 * QA Notice: Package has poor programming practices which may compile
 *            fine but exhibit random runtime failures.
 * luatexdir/luafontloader/fontforge/fontforge/nouiutil.c:49: warning: attempt 
to free a non-heap object 'buffer'

 * Please do not file a Gentoo bug and instead report the above QA
 * issues directly to the upstream developers of this software.
 * Homepage: http://www.luatex.org/
...

Hope this helps.

-- 
MfG/Kind regards
Toralf F?rster

pgp finger print: 7B1A 07F4 EC82 0F90 D4C2 8936 872A E508 7DB6 9DA3


From taco at elvenkind.com  Fri Dec 31 10:03:53 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 31 Dec 2010 10:03:53 +0100
Subject: [Dev-luatex] QA Notice: Package has poor programming practices
In-Reply-To: <201012301554.39667.toralf.foerster@gmx.de>
References: <201012301554.39667.toralf.foerster@gmx.de>
Message-ID: <4D1D9C79.9080609@elvenkind.com>


Hi Toralf,

On 12/30/2010 03:54 PM, Toralf F?rster wrote:
> Hello,
>
> under a stable Gentoo I got for dev-tex/luatex-0.63.0 :
>
> ...
>   * QA Notice: Package has poor programming practices which may compile
>   *            fine but exhibit random runtime failures.
>   * luatexdir/luafontloader/fontforge/fontforge/nouiutil.c:49: warning: attempt
> to free a non-heap object 'buffer'

That function is never actually called, but thanks for the report
anyway. I'll add a small patch to get rid of the notice (pending
ultimate removal of the entire NOUI code).

Please tell me, what is the tool that generates this QA Notice?

Best wishes,
Taco

From root at mail.boekplan.nl  Fri Dec 31 12:28:50 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 31 Dec 2010 12:28:50 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101231112851.0EE50400F9@mail.boekplan.nl>

------------------------------------------------------------------------
r4048 | taco | 2010-12-31 09:58:51 +0100 (Fri, 31 Dec 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/nouiutil.c

Remove this (harmless) compiler warning: attempt to free a non-heap object 'buffer'


------------------------------------------------------------------------

From martin at oneiros.de  Fri Dec 31 12:42:46 2010
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 31 Dec 2010 12:42:46 +0100
Subject: [Dev-luatex] OMG WTF PDF
Message-ID: <AANLkTimqsE0eTNsZ=yaaWDrBMwPMvzHE3nmQRGJH--cK@mail.gmail.com>

https://events.ccc.de/congress/2010/Fahrplan/attachments/1649_Sec-T_2010_Julia_Wolf_final.pdf
https://events.ccc.de/congress/2010/Fahrplan/events/4221.en.html

Executive summary: JavaScript in PDF is a security nightmare; most PDF
parsers are thoroughly broken.

Best
   Martin

From martin at oneiros.de  Fri Dec 31 12:51:33 2010
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 31 Dec 2010 12:51:33 +0100
Subject: [Dev-luatex] [NTG-pdftex] OMG WTF PDF
In-Reply-To: <4D1DC260.7030407@Rhul.Ac.Uk>
References: <AANLkTimqsE0eTNsZ=yaaWDrBMwPMvzHE3nmQRGJH--cK@mail.gmail.com>
	<4D1DC260.7030407@Rhul.Ac.Uk>
Message-ID: <AANLkTinodW2dVqm=72W4MppG6nu5MnsUtEfn=zBRcUkO@mail.gmail.com>

2010/12/31 Philip Taylor (Webmaster, Ret'd) <P.Taylor at rhul.ac.uk>:
> This Connection is Untrusted
>
> You have asked SeaMonkey to connect
> securely to events.ccc.de, but we can't confirm that your connection is
> secure.

Phil,
I suggest you look at _all_ the root certificates your browser
_already_ trusts. Please report how many these are and if _you_ trust
them _all_.

The ccc.de cert is signed by CA cert.

Best
   Martin

From martin at oneiros.de  Fri Dec 31 13:23:29 2010
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 31 Dec 2010 13:23:29 +0100
Subject: [Dev-luatex] [NTG-pdftex] OMG WTF PDF
In-Reply-To: <4D1DC583.9090004@Rhul.Ac.Uk>
References: <AANLkTimqsE0eTNsZ=yaaWDrBMwPMvzHE3nmQRGJH--cK@mail.gmail.com>
	<4D1DC260.7030407@Rhul.Ac.Uk>
	<AANLkTinodW2dVqm=72W4MppG6nu5MnsUtEfn=zBRcUkO@mail.gmail.com>
	<4D1DC583.9090004@Rhul.Ac.Uk>
Message-ID: <AANLkTikjkX2BL8-FFqjybUXm4KRCTVVGOo8C87SFo7vo@mail.gmail.com>

2010/12/31 Philip Taylor (Webmaster, Ret'd) <P.Taylor at rhul.ac.uk>:
> Martin Schr?der wrote:
>> I suggest you look at _all_ the root certificates your browser
>> _already_ trusts. Please report how many these are and if _you_ trust
>> them _all_.
>
> Too much work for New Years Eve, Martin : maybe next year :-)

Phil,
your browser already most likely trusts chinese (prc) and saudi
arabian authorities without your knowledge.
So why do you make such a fuzz about the ccc site? Click "I know the
risks" and continue.

Best
   Martin

PS: https://addons.mozilla.org/de/firefox/addon/6415/

From root at mail.boekplan.nl  Fri Dec 31 16:28:01 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 31 Dec 2010 16:28:01 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101231152801.443D3400F9@mail.boekplan.nl>

------------------------------------------------------------------------
r4049 | oneiros | 2010-12-31 13:10:43 +0100 (Fri, 31 Dec 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/nouiutil.c
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/uiinterface.h

sprinkle somme attributes on this code as suggested by gcc

------------------------------------------------------------------------
r4050 | oneiros | 2010-12-31 13:19:39 +0100 (Fri, 31 Dec 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/nouiutil.c
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/uiinterface.h

backout r4049, as this needs obsdcompat

------------------------------------------------------------------------

From reinhard.kotucha at web.de  Fri Dec 31 20:49:51 2010
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 31 Dec 2010 20:49:51 +0100
Subject: [Dev-luatex] QA Notice: Package has poor programming practices
In-Reply-To: <4D1D9C79.9080609@elvenkind.com>
References: <201012301554.39667.toralf.foerster@gmx.de>
	<4D1D9C79.9080609@elvenkind.com>
Message-ID: <19742.13279.123486.775243@zaphod.ms25.net>

On 31 December 2010 Taco Hoekwater wrote:

 > 
 > Hi Toralf,
 > 
 > On 12/30/2010 03:54 PM, Toralf F?rster wrote:
 > > Hello,
 > >
 > > under a stable Gentoo I got for dev-tex/luatex-0.63.0 :
 > >
 > > ...
 > >   * QA Notice: Package has poor programming practices which may compile
 > >   *            fine but exhibit random runtime failures.
 > >   * luatexdir/luafontloader/fontforge/fontforge/nouiutil.c:49: warning: attempt
 > > to free a non-heap object 'buffer'
 > 
 > That function is never actually called, but thanks for the report
 > anyway. I'll add a small patch to get rid of the notice (pending
 > ultimate removal of the entire NOUI code).
 > 
 > Please tell me, what is the tool that generates this QA Notice?

Hi Taco,
these messages come from portage, Gentoo's package tool.  I've put the
latest release on my server:

  http://ms25.ath.cx/portage-2.1.9.25.tar.bz2

The message above is defined in bin/misc-functions.sh

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From P.Taylor at Rhul.Ac.Uk  Fri Dec 31 12:45:36 2010
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor (Webmaster, Ret'd))
Date: Fri, 31 Dec 2010 11:45:36 +0000
Subject: [Dev-luatex] [NTG-pdftex] OMG WTF PDF
In-Reply-To: <AANLkTimqsE0eTNsZ=yaaWDrBMwPMvzHE3nmQRGJH--cK@mail.gmail.com>
References: <AANLkTimqsE0eTNsZ=yaaWDrBMwPMvzHE3nmQRGJH--cK@mail.gmail.com>
Message-ID: <4D1DC260.7030407@Rhul.Ac.Uk>



Martin Schr?der wrote:

 > https://events.ccc.de/congress/2010/Fahrplan/events/4221.en.html

->

This Connection is Untrusted

You have asked SeaMonkey to connect
securely to events.ccc.de, but we can't confirm that your connection is secure.

Normally, when you try to connect securely,
sites will present trusted identification to prove that you are
going to the right place. However, this site's identity can't be verified.

What Should I Do?

If you usually connect to
this site without problems, this error could mean that someone is
trying to impersonate the site, and you shouldn't continue.

Technical Details

events.ccc.de uses an invalid security certificate.

The certificate is not trusted because the issuer certificate is unknown.

(Error code: sec_error_unknown_issuer)

I Understand the Risks

From P.Taylor at Rhul.Ac.Uk  Fri Dec 31 12:58:59 2010
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor (Webmaster, Ret'd))
Date: Fri, 31 Dec 2010 11:58:59 +0000
Subject: [Dev-luatex] [NTG-pdftex] OMG WTF PDF
In-Reply-To: <AANLkTinodW2dVqm=72W4MppG6nu5MnsUtEfn=zBRcUkO@mail.gmail.com>
References: <AANLkTimqsE0eTNsZ=yaaWDrBMwPMvzHE3nmQRGJH--cK@mail.gmail.com>	<4D1DC260.7030407@Rhul.Ac.Uk>
	<AANLkTinodW2dVqm=72W4MppG6nu5MnsUtEfn=zBRcUkO@mail.gmail.com>
Message-ID: <4D1DC583.9090004@Rhul.Ac.Uk>



Martin Schr?der wrote:

 > Phil,
 > I suggest you look at _all_ the root certificates your browser
 > _already_ trusts. Please report how many these are and if _you_ trust
 > them _all_.

Too much work for New Years Eve, Martin : maybe next year :-)

 > The ccc.de cert is signed by CA cert.

Attached is Seamonkey's analysis (as screenshot;
Seamonkey didn't seem to want to allow textual copy).

** Phil.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Fullscreen capture 31-Dec-2010 115551.jpg
Type: image/jpeg
Size: 84671 bytes
Desc: not available
URL: <http://www.ntg.nl/pipermail/dev-luatex/attachments/20101231/e280048b/attachment-0001.jpg>

From P.Taylor at Rhul.Ac.Uk  Fri Dec 31 14:36:17 2010
From: P.Taylor at Rhul.Ac.Uk (Philip Taylor (Webmaster, Ret'd))
Date: Fri, 31 Dec 2010 13:36:17 +0000
Subject: [Dev-luatex] [NTG-pdftex] OMG WTF PDF
In-Reply-To: <AANLkTikjkX2BL8-FFqjybUXm4KRCTVVGOo8C87SFo7vo@mail.gmail.com>
References: <AANLkTimqsE0eTNsZ=yaaWDrBMwPMvzHE3nmQRGJH--cK@mail.gmail.com>	<4D1DC260.7030407@Rhul.Ac.Uk>	<AANLkTinodW2dVqm=72W4MppG6nu5MnsUtEfn=zBRcUkO@mail.gmail.com>	<4D1DC583.9090004@Rhul.Ac.Uk>
	<AANLkTikjkX2BL8-FFqjybUXm4KRCTVVGOo8C87SFo7vo@mail.gmail.com>
Message-ID: <4D1DDC51.3000706@Rhul.Ac.Uk>



Martin Schr?der wrote:

 > Phil,
 > your browser already most likely trusts chinese (prc) and saudi
 > arabian authorities without your knowledge.
 > So why do you make such a fuzz about the ccc site? Click "I know the
 > risks" and continue.

Yes, I know the risks :

 > Three things are certain:
 > Death, taxes and lost data.
 > Guess which has occurred.

No way, Jos? !

** Phil.

