From taco at elvenkind.com  Sun Aug  1 08:43:15 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 01 Aug 2010 08:43:15 +0200
Subject: [Dev-luatex] Subject: confused about arg value
In-Reply-To: <BAEDAC5D-9E3B-4850-9D1F-65FA90FB8C97@xs4all.nl>
References: <BAEDAC5D-9E3B-4850-9D1F-65FA90FB8C97@xs4all.nl>
Message-ID: <4C551783.6020808@elvenkind.com>

On 07/31/2010 07:17 PM, H. van der Meer wrote:
>
> I am really curious when an integer given on the commandline seems to
> turn into something not quite integer. Any ideas why? Must this be
> considered a bug or a feature.

arg values are strings: http://www.lua.org/manual/5.1/manual.html#6

   "After handling its options, lua runs the given script, passing to it
    the given args as string arguments. ..."

Best wishes,
Taco

From root at mail.boekplan.nl  Sun Aug  1 16:25:10 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun,  1 Aug 2010 16:25:10 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100801142940.C9B7540062@mail.boekplan.nl>

svn: OPTIONS of 'http://foundry.supelec.fr/svn/luatex': could not connect to server (http://foundry.supelec.fr)

From root at mail.boekplan.nl  Sun Aug  1 22:25:10 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun,  1 Aug 2010 22:25:10 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100801202947.80A1640062@mail.boekplan.nl>

svn: OPTIONS of 'http://foundry.supelec.fr/svn/luatex': could not connect to server (http://foundry.supelec.fr)

From taco at elvenkind.com  Mon Aug  2 07:46:39 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 02 Aug 2010 07:46:39 +0200
Subject: [Dev-luatex] Revision 3779  build fails?
In-Reply-To: <4C543E08.6070301@readytext.co.uk>
References: <20100731102805.05AB740064@mail.boekplan.nl>
	<4C543E08.6070301@readytext.co.uk>
Message-ID: <4C565BBF.10303@elvenkind.com>


Hi Graham,

On 07/31/2010 05:15 PM, Graham Douglas wrote:
>
> Seems to have been triggered by
> g:/LuaTeX/build/libs/poppler/poppler/GlobalParams.h:41:35:
> fontconfig/fontconfig.h: No such file or directory
>
> Line 41 of GlobalParams.h does try to include
>
> #include <fontconfig/fontconfig.h>
>
> Of course, let me know if you need more info etc.

Can you try whether actually deleting that line makes it work?
(it just might).

> PS... Feel a bit guilty just reporting build failures rather
> than more helpful suggestions/contributions.

I am just glad you are actually testing the builds.

Best wishes,
Taco

From martin at oneiros.de  Mon Aug  2 08:52:18 2010
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Mon, 2 Aug 2010 08:52:18 +0200
Subject: [Dev-luatex] Revision 3779 build fails?
In-Reply-To: <4C543E08.6070301@readytext.co.uk>
References: <20100731102805.05AB740064@mail.boekplan.nl>
	<4C543E08.6070301@readytext.co.uk>
Message-ID: <AANLkTimtFN+wSKdwo-D72bFov8pWKK2EGLTd=EDXymDP@mail.gmail.com>

2010/7/31 Graham Douglas <graham.douglas at readytext.co.uk>:
> As usual, Windows Vista, MINGW32,

See the thread starting at
http://www.mail-archive.com/poppler at lists.freedesktop.org/msg02993.html

Best
   Martin

From taco at elvenkind.com  Mon Aug  2 10:35:28 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 02 Aug 2010 10:35:28 +0200
Subject: [Dev-luatex] Revision 3779 build fails?
In-Reply-To: <AANLkTimtFN+wSKdwo-D72bFov8pWKK2EGLTd=EDXymDP@mail.gmail.com>
References: <20100731102805.05AB740064@mail.boekplan.nl>	<4C543E08.6070301@readytext.co.uk>
	<AANLkTimtFN+wSKdwo-D72bFov8pWKK2EGLTd=EDXymDP@mail.gmail.com>
Message-ID: <4C568350.3090406@elvenkind.com>



Martin Schr?der wrote:
> 2010/7/31 Graham Douglas <graham.douglas at readytext.co.uk>:
>> As usual, Windows Vista, MINGW32,
> 
> See the thread starting at
> http://www.mail-archive.com/poppler at lists.freedesktop.org/msg02993.html

It builds fine under mingw32-cross, so it must be something
fixable.

Best wishes,
Taco

From root at mail.boekplan.nl  Mon Aug  2 12:25:10 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon,  2 Aug 2010 12:25:10 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100802103001.1534840062@mail.boekplan.nl>

svn: OPTIONS of 'http://foundry.supelec.fr/svn/luatex': could not connect to server (http://foundry.supelec.fr)

From root at mail.boekplan.nl  Mon Aug  2 16:27:27 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon,  2 Aug 2010 16:27:27 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100802142727.8D23040062@mail.boekplan.nl>

------------------------------------------------------------------------
r3781 | taco | 2010-08-02 14:33:15 +0200 (Mon, 02 Aug 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

move epdf section to maintain alphabetic ordering

------------------------------------------------------------------------
r3782 | taco | 2010-08-02 14:38:57 +0200 (Mon, 02 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/postlinebreak.w

fix subtype for leftskip and (some) rightskip nodes

------------------------------------------------------------------------
r3783 | taco | 2010-08-02 15:36:04 +0200 (Mon, 02 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/vfovf.w

fix \letterspacefont for non-tfm fonts

------------------------------------------------------------------------
r3784 | taco | 2010-08-02 16:01:15 +0200 (Mon, 02 Aug 2010) | 2 lines
Changed paths:
   M /trunk/build.sh

add the CYGWIN thingy as well, just in case

------------------------------------------------------------------------

From indiego at gmx.net  Mon Aug  2 19:21:03 2010
From: indiego at gmx.net (Peter Rolf)
Date: Mon, 02 Aug 2010 19:21:03 +0200
Subject: [Dev-luatex] Revision 3779 build fails?
In-Reply-To: <4C568350.3090406@elvenkind.com>
References: <20100731102805.05AB740064@mail.boekplan.nl>	<4C543E08.6070301@readytext.co.uk>	<AANLkTimtFN+wSKdwo-D72bFov8pWKK2EGLTd=EDXymDP@mail.gmail.com>
	<4C568350.3090406@elvenkind.com>
Message-ID: <4C56FE7F.8050702@gmx.net>

Am 02.08.2010 10:35, schrieb Taco Hoekwater:
> 
> 
> Martin Schr?der wrote:
>> 2010/7/31 Graham Douglas <graham.douglas at readytext.co.uk>:
>>> As usual, Windows Vista, MINGW32,
>>
>> See the thread starting at
>> http://www.mail-archive.com/poppler at lists.freedesktop.org/msg02993.html
> 
> It builds fine under mingw32-cross, so it must be something
> fixable.

i get the same error under vista and even under debian (5.02_i386).
trunk is (now) r3787

i couldn't find fontconfig.h in the sources. the packages 'fontconfig'
and 'fontconfig-config' were already installed on my debian system, but
*'libfontconfig1-dev'* was not.

after installation of the dev-package, things worked again (but tons of
warnings while compiling the poppler part).

i hope it's something fixable ;)

best wishes,

Peter

-----------------------
IF YOU DON'T WATCH IT,
  SOMEONE ELSE WILL

From taco at elvenkind.com  Mon Aug  2 20:43:05 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 02 Aug 2010 20:43:05 +0200
Subject: [Dev-luatex] Revision 3779 build fails?
In-Reply-To: <4C56FE7F.8050702@gmx.net>
References: <20100731102805.05AB740064@mail.boekplan.nl>	<4C543E08.6070301@readytext.co.uk>	<AANLkTimtFN+wSKdwo-D72bFov8pWKK2EGLTd=EDXymDP@mail.gmail.com>
	<4C568350.3090406@elvenkind.com> <4C56FE7F.8050702@gmx.net>
Message-ID: <4C5711B9.9090708@elvenkind.com>



Peter Rolf wrote:
> i couldn't find fontconfig.h in the sources. the packages 'fontconfig'
> and 'fontconfig-config' were already installed on my debian system, but
> *'libfontconfig1-dev'* was not.

I'll try tomorrow what happens here after I remove the fontconfig
dev stuff. The end result does not depend on fontconfig at all,
it is almost certainly easy to fix.

Best wishes,
Taco

From indiego at gmx.net  Mon Aug  2 21:31:12 2010
From: indiego at gmx.net (Peter Rolf)
Date: Mon, 02 Aug 2010 21:31:12 +0200
Subject: [Dev-luatex] Revision 3779 build fails?
In-Reply-To: <4C5711B9.9090708@elvenkind.com>
References: <20100731102805.05AB740064@mail.boekplan.nl>	<4C543E08.6070301@readytext.co.uk>	<AANLkTimtFN+wSKdwo-D72bFov8pWKK2EGLTd=EDXymDP@mail.gmail.com>
	<4C568350.3090406@elvenkind.com> <4C56FE7F.8050702@gmx.net>
	<4C5711B9.9090708@elvenkind.com>
Message-ID: <4C571D00.4090303@gmx.net>

Am 02.08.2010 20:43, schrieb Taco Hoekwater:
> 
> 
> Peter Rolf wrote:
>> i couldn't find fontconfig.h in the sources. the packages 'fontconfig'
>> and 'fontconfig-config' were already installed on my debian system, but
>> *'libfontconfig1-dev'* was not.
> 
> I'll try tomorrow what happens here after I remove the fontconfig
> dev stuff. The end result does not depend on fontconfig at all,
> it is almost certainly easy to fix.
> 
> Best wishes,
> Taco
> 
thanks taco. i need a 'fresh' luatex binary to test a problem with 0.61.
i get a corrupt pdf (related to color shadings) if i use '--mode=gray'
(implicit color to gray conversion). probably a (solved?) luatex bug,
but without a newer binary from trunk i cannot say.

best wishes,

Peter

---------------------------
  IF YOU DON'T WATCH IT,
    SOMEONE ELSE WILL
(Futurama season6/episode7)

From martin at oneiros.de  Mon Aug  2 22:20:13 2010
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Mon, 2 Aug 2010 22:20:13 +0200
Subject: [Dev-luatex] Revision 3779 build fails?
In-Reply-To: <4C571D00.4090303@gmx.net>
References: <20100731102805.05AB740064@mail.boekplan.nl>
	<4C543E08.6070301@readytext.co.uk>
	<AANLkTimtFN+wSKdwo-D72bFov8pWKK2EGLTd=EDXymDP@mail.gmail.com>
	<4C568350.3090406@elvenkind.com> <4C56FE7F.8050702@gmx.net>
	<4C5711B9.9090708@elvenkind.com> <4C571D00.4090303@gmx.net>
Message-ID: <AANLkTikQF-+A6vvWKGqZ5hKfe10yMmmU2qH-DTmMCHVA@mail.gmail.com>

2010/8/2 Peter Rolf <indiego at gmx.net>:
> thanks taco. i need a 'fresh' luatex binary to test a problem with 0.61.

Please try again; r3791 should compile (and hopefully work) without fontconfig.

Best
   Martin

From root at mail.boekplan.nl  Mon Aug  2 22:28:06 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon,  2 Aug 2010 22:28:06 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100802202806.488A540062@mail.boekplan.nl>

------------------------------------------------------------------------
r3785 | taco | 2010-08-02 17:00:05 +0200 (Mon, 02 Aug 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

fix xpdf->poppler wording 

------------------------------------------------------------------------
r3786 | taco | 2010-08-02 17:25:12 +0200 (Mon, 02 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/mapfile.w
   M /trunk/source/texk/web2c/luatexdir/font/subfont.w
   M /trunk/source/texk/web2c/luatexdir/font/writettf.w
   M /trunk/source/texk/web2c/luatexdir/font/writetype0.w
   M /trunk/source/texk/web2c/luatexdir/font/writetype2.w

add the searched file name to the rest of the 'cannot open'/'cannot find' file failures

------------------------------------------------------------------------
r3787 | taco | 2010-08-02 17:45:41 +0200 (Mon, 02 Aug 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

metatable example for tex.wd/tex.ht/tex.dp (from Hans)

------------------------------------------------------------------------
r3788 | hhenkel | 2010-08-02 21:47:00 +0200 (Mon, 02 Aug 2010) | 2 lines
Changed paths:
   D /branches/0.60.x_poppler

never any real work on this branch

------------------------------------------------------------------------
r3789 | oneiros | 2010-08-02 21:59:49 +0200 (Mon, 02 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/writettf.w

fix wrong printf specifier

------------------------------------------------------------------------
r3790 | oneiros | 2010-08-02 22:00:17 +0200 (Mon, 02 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/luatexfont.h
   M /trunk/source/texk/web2c/luatexdir/font/vfovf.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdffont.w

rm unused parameter 'u'

------------------------------------------------------------------------
r3791 | oneiros | 2010-08-02 22:16:30 +0200 (Mon, 02 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/libs/poppler/poppler-0.12.4/poppler/GlobalParams.cc
   M /trunk/source/libs/poppler/poppler-0.12.4/poppler/GlobalParams.h

try to root out fontconfig

------------------------------------------------------------------------

From indiego at gmx.net  Tue Aug  3 10:01:32 2010
From: indiego at gmx.net (Peter Rolf)
Date: Tue, 03 Aug 2010 10:01:32 +0200
Subject: [Dev-luatex] Revision 3779 build fails?
In-Reply-To: <AANLkTikQF-+A6vvWKGqZ5hKfe10yMmmU2qH-DTmMCHVA@mail.gmail.com>
References: <20100731102805.05AB740064@mail.boekplan.nl>	<4C543E08.6070301@readytext.co.uk>	<AANLkTimtFN+wSKdwo-D72bFov8pWKK2EGLTd=EDXymDP@mail.gmail.com>	<4C568350.3090406@elvenkind.com>
	<4C56FE7F.8050702@gmx.net>	<4C5711B9.9090708@elvenkind.com>
	<4C571D00.4090303@gmx.net>
	<AANLkTikQF-+A6vvWKGqZ5hKfe10yMmmU2qH-DTmMCHVA@mail.gmail.com>
Message-ID: <4C57CCDC.4090604@gmx.net>

Am 02.08.2010 22:20, schrieb Martin Schr?der:
> 2010/8/2 Peter Rolf <indiego at gmx.net>:
>> thanks taco. i need a 'fresh' luatex binary to test a problem with 0.61.
> 
> Please try again; r3791 should compile (and hopefully work) without fontconfig.

No compilation problems on Vista anymore. Thanks Martin.

Best wishes,  Peter

From root at mail.boekplan.nl  Tue Aug  3 12:27:41 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue,  3 Aug 2010 12:27:41 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100803102741.25AA940064@mail.boekplan.nl>

------------------------------------------------------------------------
r3792 | hhenkel | 2010-08-02 22:27:30 +0200 (Mon, 02 Aug 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lepdflib.cc

fix [luatex 0000445]: epdf crash (Thanks Patrick!)
+ replace all "XPDF" by "poppler"

------------------------------------------------------------------------
r3793 | taco | 2010-08-03 08:10:01 +0200 (Tue, 03 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luatex.c

bump the version number

------------------------------------------------------------------------
r3794 | taco | 2010-08-03 09:02:06 +0200 (Tue, 03 Aug 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/lib/openclose.c
   M /trunk/source/texk/web2c/luatexdir/lua/liolib.c
   M /trunk/source/texk/web2c/luatexdir/lua51/lauxlib.c
   M /trunk/source/texk/web2c/luatexdir/luafontloader/src/luafflib.c

Add lua files to the recorder output
(lua51 lauxlib needed patching :()

------------------------------------------------------------------------

From graham.douglas at readytext.co.uk  Tue Aug  3 20:58:30 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Tue, 03 Aug 2010 19:58:30 +0100
Subject: [Dev-luatex] Revision 3779 build fails?
In-Reply-To: <AANLkTikQF-+A6vvWKGqZ5hKfe10yMmmU2qH-DTmMCHVA@mail.gmail.com>
References: <AANLkTikQF-+A6vvWKGqZ5hKfe10yMmmU2qH-DTmMCHVA@mail.gmail.com>
Message-ID: <4C5866D6.6000905@readytext.co.uk>

 > Please try again; r3791 should compile (and hopefully work) without 
fontconfig.

Many thanks Martin, happy to confirm that it
now builds fine for me too on Vista.

Best wishes

Graham


From root at mail.boekplan.nl  Thu Aug  5 16:27:09 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Thu,  5 Aug 2010 16:27:09 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100805142709.CE9EF40062@mail.boekplan.nl>

------------------------------------------------------------------------
r3795 | taco | 2010-08-05 13:29:46 +0200 (Thu, 05 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/kpathsea/doc/kpathsea.info

regenerated from source following a local linux rpm change (not sure why)

------------------------------------------------------------------------
r3796 | taco | 2010-08-05 13:30:11 +0200 (Thu, 05 Aug 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.w
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.h

give paragraph indentation boxes a subtype (3)

------------------------------------------------------------------------
r3797 | taco | 2010-08-05 15:06:18 +0200 (Thu, 05 Aug 2010) | 6 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/align.w
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.h

attempt to tag alignment-generated boxes by subtype
as well.

4 = row (\halign) / column (\valign)
5 = cell (both cases)

------------------------------------------------------------------------
r3798 | taco | 2010-08-05 15:43:42 +0200 (Thu, 05 Aug 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

two more hlist subtypes

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Aug  6 12:27:40 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri,  6 Aug 2010 12:27:40 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100806102740.A1FBC40062@mail.boekplan.nl>

------------------------------------------------------------------------
r3799 | taco | 2010-08-06 08:51:12 +0200 (Fri, 06 Aug 2010) | 4 lines
Changed paths:
   M /trunk/manual/luatexref-env.tex
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

patch the description for vlist nodes, and
add a printout of the id and subtype values for each node type
in chapter 8.

------------------------------------------------------------------------
r3800 | taco | 2010-08-06 11:03:25 +0200 (Fri, 06 Aug 2010) | 5 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

the code to replace tex.wd etc never appeared in print because
it was a lua code segment instead of verbatim (thanks to Paul 
Isambert for spotting this)


------------------------------------------------------------------------

From root at mail.boekplan.nl  Sat Aug  7 12:27:37 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat,  7 Aug 2010 12:27:37 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100807102738.3568940062@mail.boekplan.nl>

------------------------------------------------------------------------
r3801 | taco | 2010-08-07 10:41:22 +0200 (Sat, 07 Aug 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

fix description of pre_linebreak_filter

------------------------------------------------------------------------

From root at mail.boekplan.nl  Sat Aug  7 16:27:09 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat,  7 Aug 2010 16:27:09 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100807142709.B534B40062@mail.boekplan.nl>

------------------------------------------------------------------------
r3802 | taco | 2010-08-07 14:03:08 +0200 (Sat, 07 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.w
   M /trunk/source/texk/web2c/luatexdir/tex/expand.w
   M /trunk/source/texk/web2c/luatexdir/tex/filename.w
   M /trunk/source/texk/web2c/luatexdir/tex/primitive.w
   M /trunk/source/texk/web2c/luatexdir/tex/stringpool.h

apply the memory leak patch from bug report #463 (from R?\195?\169my Oudompheng)

------------------------------------------------------------------------

From arthur.reutenauer at normalesup.org  Sat Aug  7 18:08:12 2010
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Sat, 7 Aug 2010 18:08:12 +0200
Subject: [Dev-luatex] Cron
	<luatex@boekplan>	/var/www/luatex.org/www/bin/luatex-svn
In-Reply-To: <20100807142709.B534B40062@mail.boekplan.nl>
References: <20100807142709.B534B40062@mail.boekplan.nl>
Message-ID: <20100807160812.GA6456@phare.normalesup.org>

> apply the memory leak patch from bug report #463 (from R?\195?\169my Oudompheng)

  Poor R?my... ;-)  It's a shame Subversion screws up the encoding so
badly!

	Arthur

From khaledhosny at eglug.org  Sat Aug  7 19:36:27 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sat, 7 Aug 2010 20:36:27 +0300
Subject: [Dev-luatex] Cron <luatex@boekplan>
 /var/www/luatex.org/www/bin/luatex-svn
In-Reply-To: <20100807160812.GA6456@phare.normalesup.org>
References: <20100807142709.B534B40062@mail.boekplan.nl>
	<20100807160812.GA6456@phare.normalesup.org>
Message-ID: <20100807173627.GA2237@khaled-laptop>

On Sat, Aug 07, 2010 at 06:08:12PM +0200, Arthur Reutenauer wrote:
> > apply the memory leak patch from bug report #463 (from R?\195?\169my Oudompheng)
> 
>   Poor R?my... ;-)  It's a shame Subversion screws up the encoding so
> badly!

Not subversion, but whatever tool that sends the email notifications.

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From arthur.reutenauer at normalesup.org  Sat Aug  7 20:06:51 2010
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Sat, 7 Aug 2010 20:06:51 +0200
Subject: [Dev-luatex] Cron
	<luatex@boekplan>	/var/www/luatex.org/www/bin/luatex-svn
In-Reply-To: <20100807173627.GA2237@khaled-laptop>
References: <20100807142709.B534B40062@mail.boekplan.nl>
	<20100807160812.GA6456@phare.normalesup.org>
	<20100807173627.GA2237@khaled-laptop>
Message-ID: <20100807180651.GD6456@phare.normalesup.org>

> Not subversion, but whatever tool that sends the email notifications.

  Funny, I've seen Subversion doing exactly that when I was working in
UTF-8 locale (it quotes the individual bytes in non-ASCII characters in
decimal, and inserts a question mark before each escape sequence).  But
here the character is indeed correctly encoded in latin-1.

	Arthur

From khaledhosny at eglug.org  Sat Aug  7 20:30:05 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sat, 7 Aug 2010 21:30:05 +0300
Subject: [Dev-luatex] Cron <luatex@boekplan>
 /var/www/luatex.org/www/bin/luatex-svn
In-Reply-To: <20100807180651.GD6456@phare.normalesup.org>
References: <20100807142709.B534B40062@mail.boekplan.nl>
	<20100807160812.GA6456@phare.normalesup.org>
	<20100807173627.GA2237@khaled-laptop>
	<20100807180651.GD6456@phare.normalesup.org>
Message-ID: <20100807183005.GE2237@khaled-laptop>

On Sat, Aug 07, 2010 at 08:06:51PM +0200, Arthur Reutenauer wrote:
> > Not subversion, but whatever tool that sends the email notifications.
> 
>   Funny, I've seen Subversion doing exactly that when I was working in
> UTF-8 locale (it quotes the individual bytes in non-ASCII characters in
> decimal, and inserts a question mark before each escape sequence).  But
> here the character is indeed correctly encoded in latin-1.

I just did "git svn rebase" and I got the log message correctly, I've
long been using svn with log messages containing Arabic with no problem
at all, only mail notifications are broken.

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From root at mail.boekplan.nl  Sun Aug  8 16:27:16 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun,  8 Aug 2010 16:27:16 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100808142717.098B340062@mail.boekplan.nl>

------------------------------------------------------------------------
r3803 | hhenkel | 2010-08-08 15:48:38 +0200 (Sun, 08 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdffont.w

try to fix [luatex 0000447]: weird font expansion bug

------------------------------------------------------------------------

From root at mail.boekplan.nl  Mon Aug  9 12:27:40 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon,  9 Aug 2010 12:27:40 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100809102740.B5C9C40062@mail.boekplan.nl>

------------------------------------------------------------------------
r3804 | hhenkel | 2010-08-08 23:30:25 +0200 (Sun, 08 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/luafont.w
   M /trunk/source/texk/web2c/luatexdir/font/texfont.h
   M /trunk/source/texk/web2c/luatexdir/font/texfont.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdffont.w

replace a few "0" by "null_font" in pdf_font_blink() checks

------------------------------------------------------------------------
r3805 | hhenkel | 2010-08-08 23:37:52 +0200 (Sun, 08 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/luafont.w
   M /trunk/source/texk/web2c/luatexdir/font/texfont.w

same as r3804 also for pdf_font_elink()

------------------------------------------------------------------------

From root at mail.boekplan.nl  Tue Aug 10 12:27:39 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue, 10 Aug 2010 12:27:39 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100810102739.0FB2540062@mail.boekplan.nl>

------------------------------------------------------------------------
r3806 | hhenkel | 2010-08-09 23:11:07 +0200 (Mon, 09 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lepdflib.cc

add a few Stream functions

------------------------------------------------------------------------

From root at mail.boekplan.nl  Sat Aug 14 12:27:34 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat, 14 Aug 2010 12:27:34 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100814102734.ED68A40062@mail.boekplan.nl>

------------------------------------------------------------------------
r3807 | taco | 2010-08-14 10:10:00 +0200 (Sat, 14 Aug 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/luafontloader/src/luafflib.c

remove the 'fontforge' table (deprecated since 0.40)

------------------------------------------------------------------------

From root at mail.boekplan.nl  Sat Aug 14 16:27:12 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat, 14 Aug 2010 16:27:12 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100814142712.3D3B340064@mail.boekplan.nl>

------------------------------------------------------------------------
r3808 | oneiros | 2010-08-14 12:59:27 +0200 (Sat, 14 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/src/luafflib.c

rm unused variable

------------------------------------------------------------------------

From root at mail.boekplan.nl  Sun Aug 15 12:27:35 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun, 15 Aug 2010 12:27:35 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100815102736.0583E40062@mail.boekplan.nl>

------------------------------------------------------------------------
r3809 | taco | 2010-08-15 08:27:55 +0200 (Sun, 15 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/src/luafflib.c

add lib/lib.h for recorder_record_input (thanks Martin)

------------------------------------------------------------------------

From khaledhosny at eglug.org  Tue Aug 17 21:49:27 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 17 Aug 2010 21:49:27 +0200
Subject: [Dev-luatex] script position of textstyle operators
Message-ID: <20100817194901.GA25709@khaled-laptop>

The script position of math operators with opentype fonts that was 
solved while ago, seems not have been solved completely, or so it seems.

For the textstyle operators, still using the regular method of
calculating script position, see the attached test. I just checked with
Office and it treats textstyle and scriptsyle the same.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mathop.tex
Type: text/x-tex
Size: 648 bytes
Desc: not available
URL: <http://www.ntg.nl/pipermail/dev-luatex/attachments/20100817/adc626f8/attachment.tex>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mathop.pdf
Type: application/pdf
Size: 11084 bytes
Desc: not available
URL: <http://www.ntg.nl/pipermail/dev-luatex/attachments/20100817/adc626f8/attachment.pdf>

From khaledhosny at eglug.org  Tue Aug 17 21:51:04 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 17 Aug 2010 21:51:04 +0200
Subject: [Dev-luatex] script position of textstyle operators
Message-ID: <20100817194901.GA25709@khaled-laptop>

The script position of math operators with opentype fonts that was 
solved while ago, seems not have been solved completely, or so it seems.

For the textstyle operators, still using the regular method of
calculating script position, see the attached test. I just checked with
Office and it treats textstyle and scriptsyle the same.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mathop.tex
Type: text/x-tex
Size: 648 bytes
Desc: not available
URL: <http://www.ntg.nl/pipermail/dev-luatex/attachments/20100817/adc626f8/attachment-0003.tex>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mathop.pdf
Type: application/pdf
Size: 11084 bytes
Desc: not available
URL: <http://www.ntg.nl/pipermail/dev-luatex/attachments/20100817/adc626f8/attachment-0003.pdf>

From root at mail.boekplan.nl  Tue Aug 17 22:27:17 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue, 17 Aug 2010 22:27:17 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100817202717.2144640062@mail.boekplan.nl>

------------------------------------------------------------------------
r3810 | hhenkel | 2010-08-17 21:31:16 +0200 (Tue, 17 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/image/epdf.h
   M /trunk/source/texk/web2c/luatexdir/image/pdftoepdf.cc
   M /trunk/source/texk/web2c/luatexdir/lua/lepdflib.cc

GString ---> GooString

------------------------------------------------------------------------

From taco at elvenkind.com  Wed Aug 18 12:15:34 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 18 Aug 2010 12:15:34 +0200
Subject: [Dev-luatex] script position of textstyle operators
In-Reply-To: <20100817194901.GA25709@khaled-laptop>
References: <20100817194901.GA25709@khaled-laptop>
Message-ID: <4C6BB2C6.1020803@elvenkind.com>



Khaled Hosny wrote:
> The script position of math operators with opentype fonts that was 
> solved while ago, seems not have been solved completely, or so it seems.

Moved to tracker (I have no time right now).

Best wishes,
Taco

From root at mail.boekplan.nl  Wed Aug 18 12:27:36 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed, 18 Aug 2010 12:27:36 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100818102736.8E42140062@mail.boekplan.nl>

------------------------------------------------------------------------
r3811 | hhenkel | 2010-08-17 22:22:46 +0200 (Tue, 17 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lepdflib.cc

Dict:set(), Dict:remove()

------------------------------------------------------------------------
r3812 | oneiros | 2010-08-17 22:24:47 +0200 (Tue, 17 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lepdflib.cc

rm unused variable

------------------------------------------------------------------------

From khaledhosny at eglug.org  Wed Aug 18 12:53:57 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 18 Aug 2010 12:53:57 +0200
Subject: [Dev-luatex] script position of textstyle operators
In-Reply-To: <4C6BB2C6.1020803@elvenkind.com>
References: <20100817194901.GA25709@khaled-laptop>
	<4C6BB2C6.1020803@elvenkind.com>
Message-ID: <20100818105357.GC4281@khaled-laptop>

On Wed, Aug 18, 2010 at 12:15:34PM +0200, Taco Hoekwater wrote:
> 
> 
> Khaled Hosny wrote:
> > The script position of math operators with opentype fonts that was 
> > solved while ago, seems not have been solved completely, or so it seems.
> 
> Moved to tracker (I have no time right now).

Thanks.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From linuxss at list.ru  Wed Aug 18 13:40:09 2010
From: linuxss at list.ru (Linas)
Date: Wed, 18 Aug 2010 11:40:09 +0000 (UTC)
Subject: [Dev-luatex] os.execute: All command execution is disabled
Message-ID: <loom.20100818T132250-582@post.gmane.org>

Hi, all,
I'm trying to run any program with io.popen or io.execute and it's not working.

1) io.execute returns 'nil'
2) io.popen returns 'nil  All command execution is disabled' 

simple example:
\documentclass{article}
\begin{document}
\directlua{print (io.popen('ipconfig.exe'))}
\end{document}

winxp, texlive2009, luatex version: beta-0.40.6-2009110118

in file 'loslibext-1.c' i see that this output is returned if shellenabledp <=0.
so, question is how to enable shell execution! \pdfshellescape is removed from
that version.

Thanks, Linas


From taco at elvenkind.com  Wed Aug 18 13:59:41 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 18 Aug 2010 13:59:41 +0200
Subject: [Dev-luatex] os.execute: All command execution is disabled
In-Reply-To: <loom.20100818T132250-582@post.gmane.org>
References: <loom.20100818T132250-582@post.gmane.org>
Message-ID: <4C6BCB2D.8050703@elvenkind.com>



Linas wrote:
> Hi, all,
> I'm trying to run any program with io.popen or io.execute and it's not working.
> 
> 1) io.execute returns 'nil'
> 2) io.popen returns 'nil  All command execution is disabled' 
> 
> simple example:
> \documentclass{article}
> \begin{document}
> \directlua{print (io.popen('ipconfig.exe'))}
> \end{document}
> 
> winxp, texlive2009, luatex version: beta-0.40.6-2009110118
> 
> in file 'loslibext-1.c' i see that this output is returned if shellenabledp <=0.
> so, question is how to enable shell execution! \pdfshellescape is removed from
> that version.

In texmf.cnf, set

  shell_escape = t

or run the executable with the commandline argument --shell-escape

Best wishes,
Taco

From root at mail.boekplan.nl  Wed Aug 18 22:27:18 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed, 18 Aug 2010 22:27:18 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100818202719.1A7FA40062@mail.boekplan.nl>

------------------------------------------------------------------------
r3813 | taco | 2010-08-18 17:08:20 +0200 (Wed, 18 Aug 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

typo fixed (found by Paul Isambert)

------------------------------------------------------------------------

From root at mail.boekplan.nl  Thu Aug 19 12:27:31 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Thu, 19 Aug 2010 12:27:31 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100819102731.4DBC740062@mail.boekplan.nl>

------------------------------------------------------------------------
r3814 | taco | 2010-08-18 22:38:56 +0200 (Wed, 18 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/image/writepng.w

fix allocation size of rgb Smask

------------------------------------------------------------------------
r3815 | hhenkel | 2010-08-18 23:32:49 +0200 (Wed, 18 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/image/image.h
   M /trunk/source/texk/web2c/luatexdir/image/pdftoepdf.cc
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.w

remove one_hundred_bp macro

------------------------------------------------------------------------

From linuxss at list.ru  Thu Aug 19 09:36:16 2010
From: linuxss at list.ru (linuxss)
Date: Thu, 19 Aug 2010 10:36:16 +0300
Subject: [Dev-luatex] vpack_filter shipout mode?
Message-ID: <4C6CDEF0.8030602@list.ru>

Thanks, Taco!
than this question is to Hans. ;-)

another example with a table:
\documentclass{article}
\usepackage{lua}
\begin{document}
\section{Example}
\begin{table}
\tabcolsep=0pc
\caption{My table}
\begin{tabular*}{\columnwidth}{@{\extracolsep{\fill}}llllll@{}}
\hline
Coll1 & \multicolumn{5}{l@{}}{Coll2} \\
\hline
& B0 & A0 & G0 & K0 & WD \\
\hline
V & 20 & 19.8 & 19.7 & 19.7 & 19.7 \\
\hline
\end{tabular*}
\end{table}

$2+2-E(R) = n$
\end{document}

if I use pre_output_filter,  I don't see table :(
 output  1  node.count=6 attr=nil      <-- section seen here
 output  2  node.count=2 attr=nil
 output  3  node.count=12 attr=nil   <-- section and formula seen here
 output  4  node.count=3 attr=nil
 output  5  node.count=4 attr=nil

question: how to see all the nodes using callback in a shipout mode?
or how to find out which hlist/vlist will be outputted?

thanks in advance :)


Taco Hoekwater wrote:
> Hi,
>
> linuxss wrote:
>   
>> Hi, lua experts!!
>> I'm running a simple vpack_filter callback on a simple example:
>> \documentclass{article}
>> \usepackage{lua}          %<--there  is my callback
>> \begin{document}
>> $2+2-E(R) = n$
>> \end{document}
>>
>> i see, that the formula is traversed in 1,3,4 vbox:
>> vbox  1  node.count=6 attr=nil  <--here
>> vbox  2  node.count=2 attr=nil
>> vbox  3  node.count=6 attr=nil  <--here
>> vbox  4  node.count=2 attr=nil  <--here
>> split_keep  5  node.count=2 attr=nil
>> split_off  6  node.count=1 attr=nil
>> vbox  7  node.count=4 attr=nil
>>
>> Question is: how to know which one is shipout mode or is there something
>> like checking \ifvmode, useing vpack_filter???
>>     
>
> Probably Hans knows these extra packtypes better than I do by now, but
> the shipout packaging has a dedicated callback: pre_output_filter.
>
> Best wishes,
> Taco
>
>   

From pragma at wxs.nl  Fri Aug 20 09:25:26 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 20 Aug 2010 09:25:26 +0200
Subject: [Dev-luatex] vpack_filter shipout mode?
In-Reply-To: <4C6CDEF0.8030602@list.ru>
References: <4C6CDEF0.8030602@list.ru>
Message-ID: <4C6E2DE6.4040206@wxs.nl>

On 19-8-2010 9:36, linuxss wrote:

> question: how to see all the nodes using callback in a shipout mode?
> or how to find out which hlist/vlist will be outputted?

shipout is somewhat special and we don't have a callback for the shipout 
itself

in a regular macro package, the page is packaged in a box (often 255 ) 
and you can hook in some lua code there:

- locate the \shipout command being used
- see what box is shipped out
- do a directlua just before \shipout and look the box

so, something:

\directlua{analyze(tex.box[255)}

(there will be a callback for this but it's not an isolated event as for 
instance xforms are also shipped out and the xform subsystem is not 
opened up / redone yet)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From linuxss at list.ru  Fri Aug 20 09:33:00 2010
From: linuxss at list.ru (linuxss)
Date: Fri, 20 Aug 2010 10:33:00 +0300
Subject: [Dev-luatex] vpack_filter shipout mode?
In-Reply-To: <4C6E2DE6.4040206@wxs.nl>
References: <4C6CDEF0.8030602@list.ru> <4C6E2DE6.4040206@wxs.nl>
Message-ID: <4C6E2FAC.3060007@list.ru>

Hans Hagen wrote:
> On 19-8-2010 9:36, linuxss wrote:
>
>> question: how to see all the nodes using callback in a shipout mode?
>> or how to find out which hlist/vlist will be outputted?
>
> shipout is somewhat special and we don't have a callback for the 
> shipout itself
>
> in a regular macro package, the page is packaged in a box (often 255 ) 
> and you can hook in some lua code there:
>
> - locate the \shipout command being used
> - see what box is shipped out
> - do a directlua just before \shipout and look the box
>
> so, something:
>
> \directlua{analyze(tex.box[255)}
>
> (there will be a callback for this but it's not an isolated event as 
> for instance xforms are also shipped out and the xform subsystem is 
> not opened up / redone yet)
>
> Hans
>
> -----------------------------------------------------------------
>                                           Hans Hagen | PRAGMA ADE
>               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
>                                              | www.pragma-pod.nl
> -----------------------------------------------------------------
>
>
thanks, Hans!
thats a very interesting idea to find \shipout and analyze box 255.
I'll try it.

From root at mail.boekplan.nl  Fri Aug 20 12:27:33 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 20 Aug 2010 12:27:33 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100820102734.14FBF40062@mail.boekplan.nl>

------------------------------------------------------------------------
r3816 | taco | 2010-08-20 08:38:23 +0200 (Fri, 20 Aug 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

more  manual errors found by Paul Isambert

------------------------------------------------------------------------
r3817 | taco | 2010-08-20 08:39:05 +0200 (Fri, 20 Aug 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf

previous manual pdf missed a few changes

------------------------------------------------------------------------

From linuxss at list.ru  Fri Aug 20 14:16:18 2010
From: linuxss at list.ru (linuxss)
Date: Fri, 20 Aug 2010 15:16:18 +0300
Subject: [Dev-luatex] vpack_filter shipout mode?
In-Reply-To: <4C6E2DE6.4040206@wxs.nl>
References: <4C6CDEF0.8030602@list.ru> <4C6E2DE6.4040206@wxs.nl>
Message-ID: <4C6E7212.9000406@list.ru>

Hi, Hans,
I've got almost the same output, as I used 'pre_output_filter' callback 
and a function on a \output command.

1)
\newtoks\oldoutput
\oldoutput=\expandafter{\the\output}
\output{
    \directlua{node_check(tex.box[255], 'shipout')}
    \the\oldoutput
}

2) callback.add('pre_output_filter', node_check, 'info')

and I can't see here table and page number nodes.
pre_output_filter sounds like the all output should be prepared :)
if I use 'vpack_filter' i see all the nodes of the page.

so that means, that 'vpack_filter' is closer to shipout then 
pre_output_filter?
I thought is has to be in reverse :)

question: when the pages and table are inserted into \box 255?

Thanks, Linas

From pragma at wxs.nl  Fri Aug 20 15:57:45 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 20 Aug 2010 15:57:45 +0200
Subject: [Dev-luatex] vpack_filter shipout mode?
In-Reply-To: <4C6E7212.9000406@list.ru>
References: <4C6CDEF0.8030602@list.ru> <4C6E2DE6.4040206@wxs.nl>
	<4C6E7212.9000406@list.ru>
Message-ID: <4C6E89D9.802@wxs.nl>

On 20-8-2010 2:16, linuxss wrote:
> Hi, Hans,
> I've got almost the same output, as I used 'pre_output_filter' callback
> and a function on a \output command.
>
> 1)
> \newtoks\oldoutput
> \oldoutput=\expandafter{\the\output}
> \output{
> \directlua{node_check(tex.box[255], 'shipout')}
> \the\oldoutput
> }
>
> 2) callback.add('pre_output_filter', node_check, 'info')
>
> and I can't see here table and page number nodes.
> pre_output_filter sounds like the all output should be prepared :)
> if I use 'vpack_filter' i see all the nodes of the page.
>
> so that means, that 'vpack_filter' is closer to shipout then
> pre_output_filter?
> I thought is has to be in reverse :)
>
> question: when the pages and table are inserted into \box 255?

I have no clue what your node_check does.

Anyhow, there is no concept of a page number node and table node, a 
pagenumber is just a bunch of glyphs and a table becomes a collection of 
boxes (hlist/vlist) nodes.

If you recurse over the node list then you will undoubtely see them, 
just as regular full tex tracing can show them.

When pages are inserted depends on your macro package ... normally the 
pagebuilder does that (regular tex code, nothing built into the engine) 
and the same is true for a table, once the alignment is done it becomes 
boxes in the mvl or wrapped into some other box and again it ends up in 
the mvl. So, no magic there.

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From root at mail.boekplan.nl  Sat Aug 21 12:27:24 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat, 21 Aug 2010 12:27:24 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100821102724.CC6FF40064@mail.boekplan.nl>

------------------------------------------------------------------------
r3818 | taco | 2010-08-21 09:45:00 +0200 (Sat, 21 Aug 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

more fixes from Paul

------------------------------------------------------------------------

From linuxss at list.ru  Sun Aug 22 19:01:14 2010
From: linuxss at list.ru (Lincikas)
Date: Sun, 22 Aug 2010 21:01:14 +0400
Subject: [Dev-luatex] =?koi8-r?b?dnBhY2tfZmlsdGVyIHNoaXBvdXQgbW9kZT8=?=
In-Reply-To: <4C6E89D9.802@wxs.nl>
References: <4C6E89D9.802@wxs.nl>
Message-ID: <E1OnDv0-0001d0-00.linuxss-list-ru@f231.mail.ru>


Fri, 20 Aug 2010 15:57:45 +0200 ?????? ?? Hans Hagen <pragma at wxs.nl>:

> On 20-8-2010 2:16, linuxss wrote:
> > Hi, Hans,
> > I've got almost the same output, as I used 'pre_output_filter' callback
> > and a function on a \output command.
> >
> > 1)
> > \newtoks\oldoutput
> > \oldoutput=\expandafter{\the\output}
> > \output{
> > \directlua{node_check(tex.box[255], 'shipout')}
> > \the\oldoutput
> > }
> >
> > 2) callback.add('pre_output_filter', node_check, 'info')
> >
> > and I can't see here table and page number nodes.
> > pre_output_filter sounds like the all output should be prepared :)
> > if I use 'vpack_filter' i see all the nodes of the page.
> >
> > so that means, that 'vpack_filter' is closer to shipout then
> > pre_output_filter?
> > I thought is has to be in reverse :)
> >
> > question: when the pages and table are inserted into \box 255?
> 
> I have no clue what your node_check does.
> 
> Anyhow, there is no concept of a page number node and table node, a 
> pagenumber is just a bunch of glyphs and a table becomes a collection of 
> boxes (hlist/vlist) nodes.
> 
> If you recurse over the node list then you will undoubtely see them, 
> just as regular full tex tracing can show them.
> 
> When pages are inserted depends on your macro package ... normally the 
> pagebuilder does that (regular tex code, nothing built into the engine) 
> and the same is true for a table, once the alignment is done it becomes 
> boxes in the mvl or wrapped into some other box and again it ends up in 
> the mvl. So, no magic there.
> 
> Hans
> 
> 
> -----------------------------------------------------------------
>                                            Hans Hagen | PRAGMA ADE
>                Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>      tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
>                                               | www.pragma-pod.nl
> -----------------------------------------------------------------

node_check() does a simple node traversing and runs throe the hlists/vlist
 recursively. 
the function shows all the nodes (table, figure, page number, etc.) when i use a vpack_filter.
but with pre_output_filter i couldn't see all the nodes (using the same function).

I'll try to figure out everything after holidays. thanks a lot!

(sorry for my English)

Linas
 


From taco at elvenkind.com  Sun Aug 22 19:06:19 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 22 Aug 2010 19:06:19 +0200
Subject: [Dev-luatex] A first cheat sheet attempt
Message-ID: <4C71590B.8010908@elvenkind.com>

Hi,

Here is a first attempt at a cheat sheet for luatex 0.60.

All comments are welcome.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: try.pdf
Type: application/pdf
Size: 97875 bytes
Desc: not available
URL: <http://www.ntg.nl/pipermail/dev-luatex/attachments/20100822/dd13139c/attachment-0001.pdf>

From t34www at googlemail.com  Sun Aug 22 23:45:28 2010
From: t34www at googlemail.com (T T)
Date: Sun, 22 Aug 2010 22:45:28 +0100
Subject: [Dev-luatex] A first cheat sheet attempt
In-Reply-To: <4C71590B.8010908@elvenkind.com>
References: <4C71590B.8010908@elvenkind.com>
Message-ID: <AANLkTi=xFz6FTc4FDy=xQYbk70otKF9N_bTAfd1yVpa_@mail.gmail.com>

On 22 August 2010 18:06, Taco Hoekwater <taco at elvenkind.com> wrote:
> Hi,
>
> Here is a first attempt at a cheat sheet for luatex 0.60.
>
> All comments are welcome.

Great!  I love these cheat sheets (poor memory, you know ;)

Cheers,

Tomek

From taco at elvenkind.com  Mon Aug 23 09:01:16 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 23 Aug 2010 09:01:16 +0200
Subject: [Dev-luatex] Luatex 0.62.0 announcement
Message-ID: <4C721CBC.6000702@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.62.0.
This is a development release, but it also fixes some nasty bugs
in beta 0.61.0, so if you use that right now, upgrading is recommended.

News:

* LuaTeX now uses libpoppler (0.12.4) instead of xpdf.

* All backend functions now report what file they were searching
   for whenever a file cannot be found.

* Input-ed lua files are now mentioned in the fls file if
   the --recorder switch is specified on the command line.

* Paragraph indentation hlist nodes and hlist and vlist nodes
   generated by alignment rows and cells now have a subtype
   (3 for indent box, 4 for rows/columns, 5 for cells).

* The 'epdf' lib is in active development and still growing.

* The 'fontforge' table is finally removed (was deprecated
   since 0.40).

Bugfixes:

* A new mplib import fixes two bad bugs in mplib:
   - string equality test was wrong
   - type declarations could delete pre-existing variables

* PNG images with transparency could create random size
   differences in the generated PDF.

* In some special cases, font expansion could cause wrong
   spacing in the generated PDF.

* \letterspacefont was broken since a very long time.

* The node subtype of the \leftskip and \rightskip glues was
   wrong.

* Some memory leaks have been removed.

* Various manual fixes.


The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

   svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.62.0

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org

Have fun,
Taco




From root at mail.boekplan.nl  Mon Aug 23 12:29:37 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon, 23 Aug 2010 12:29:37 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100823102937.2390E40064@mail.boekplan.nl>

------------------------------------------------------------------------
r3819 | taco | 2010-08-23 08:12:56 +0200 (Mon, 23 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/mplibdir/mp.w

import mplib fixes

------------------------------------------------------------------------
r3820 | taco | 2010-08-23 08:25:38 +0200 (Mon, 23 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/NEWS

here is the NEWS for 0.62.0

------------------------------------------------------------------------
r3821 | taco | 2010-08-23 08:26:50 +0200 (Mon, 23 Aug 2010) | 5 lines
Changed paths:
   A /tags/beta-0.62.0 (from /trunk:3820)

inew
--ZZ?\026?\026This line, and those below, will be ignored--

A    http://foundry.supelec.fr/svn/luatex/tags/beta-0.62.0

------------------------------------------------------------------------

From pragma at wxs.nl  Mon Aug 23 14:39:59 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 23 Aug 2010 14:39:59 +0200
Subject: [Dev-luatex] vpack_filter shipout mode?
In-Reply-To: <E1OnDv0-0001d0-00.linuxss-list-ru@f231.mail.ru>
References: <4C6E89D9.802@wxs.nl>
	<E1OnDv0-0001d0-00.linuxss-list-ru@f231.mail.ru>
Message-ID: <4C726C1F.1080207@wxs.nl>

On 22-8-2010 7:01, Lincikas wrote:

> node_check() does a simple node traversing and runs throe the hlists/vlist
>   recursively.
> the function shows all the nodes (table, figure, page number, etc.) when i use a vpack_filter.
> but with pre_output_filter i couldn't see all the nodes (using the same function).

after vpacking your figures probably end up as hlists in the mvl as then 
the page builder has done its work

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From root at mail.boekplan.nl  Mon Aug 23 16:27:27 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon, 23 Aug 2010 16:27:27 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100823142727.A64A040064@mail.boekplan.nl>

------------------------------------------------------------------------
r3822 | taco | 2010-08-23 14:42:41 +0200 (Mon, 23 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/parsettf.c

fix the crash in bug report 468 (but not sure it does the right thing, whatever that may be)

------------------------------------------------------------------------
r3823 | taco | 2010-08-23 15:04:34 +0200 (Mon, 23 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/mplibdir/mp.w
   M /trunk/source/texk/web2c/mplibdir/psout.w

remove some pointless compiler warnings

------------------------------------------------------------------------

From root at mail.boekplan.nl  Mon Aug 23 22:27:23 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon, 23 Aug 2010 22:27:23 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100823202723.B864840064@mail.boekplan.nl>

------------------------------------------------------------------------
r3824 | taco | 2010-08-23 20:56:20 +0200 (Mon, 23 Aug 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

new docs

------------------------------------------------------------------------
r3825 | taco | 2010-08-23 20:57:11 +0200 (Mon, 23 Aug 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c

drop tex.ht[], tex.wd[], tex.dp[]
add tex.catcode[], tex.lccode[], tex.sfcode[], tex.uccode[] and associated functions

------------------------------------------------------------------------
r3826 | taco | 2010-08-23 20:57:30 +0200 (Mon, 23 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luatex.c

bump the version to 0.63

------------------------------------------------------------------------
r3827 | taco | 2010-08-23 20:58:35 +0200 (Mon, 23 Aug 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

fix some mplib functions (the char size queries are method calls, not bare functions)

------------------------------------------------------------------------
r3828 | taco | 2010-08-23 20:59:12 +0200 (Mon, 23 Aug 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

forgot to mention the appearance time for tex.catcode[] and friends

------------------------------------------------------------------------

From root at mail.boekplan.nl  Tue Aug 24 12:27:48 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue, 24 Aug 2010 12:27:48 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100824102748.CD1B240064@mail.boekplan.nl>

------------------------------------------------------------------------
r3829 | taco | 2010-08-24 08:00:52 +0200 (Tue, 24 Aug 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf

new pdf

------------------------------------------------------------------------

From root at mail.boekplan.nl  Tue Aug 24 22:27:34 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue, 24 Aug 2010 22:27:34 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100824202734.C05E840064@mail.boekplan.nl>

------------------------------------------------------------------------
r3830 | taco | 2010-08-24 19:25:14 +0200 (Tue, 24 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lang/hyphen.w

reject extremely long patterns

------------------------------------------------------------------------

From root at mail.boekplan.nl  Wed Aug 25 12:27:49 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed, 25 Aug 2010 12:27:49 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100825102749.377CB40066@mail.boekplan.nl>

------------------------------------------------------------------------
r3831 | taco | 2010-08-25 06:35:34 +0200 (Wed, 25 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lang/hyphen.w

remove a tracing printf

------------------------------------------------------------------------

From root at mail.boekplan.nl  Thu Aug 26 12:27:12 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Thu, 26 Aug 2010 12:27:12 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100826102712.7CB4D40062@mail.boekplan.nl>

------------------------------------------------------------------------
r3832 | taco | 2010-08-26 07:47:11 +0200 (Thu, 26 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/luafont.w

add  typechecking to the char packets reader

------------------------------------------------------------------------
r3833 | taco | 2010-08-26 08:12:51 +0200 (Thu, 26 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.h

prevent line breaks after local pars (cf bug report 437)

------------------------------------------------------------------------

From root at mail.boekplan.nl  Sat Aug 28 16:27:36 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat, 28 Aug 2010 16:27:36 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100828142736.6E77B40065@mail.boekplan.nl>

------------------------------------------------------------------------
r3834 | hhenkel | 2010-08-28 15:50:53 +0200 (Sat, 28 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftables.w

give type info with error msg. "referenced object has wrong type"

------------------------------------------------------------------------

From patrick at gundla.ch  Sun Aug 29 00:20:11 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sun, 29 Aug 2010 00:20:11 +0200
Subject: [Dev-luatex] unique node id?
Message-ID: <ED2718E6-3C37-4F77-9469-1F1415EEC1DD@gundla.ch>

Hi,

is there a unique "node id" which I could use for example as a key in a table? Using the node directly somehow doesn't work. I am thinking of something like

n = node.new("glyph")
n.unique_id

Something similar like this would suffice:

print( tostring({}) )
table: 0x100106da0

this id doesn't change for that table.


Is the following 172 something like I need? How would I access that (besides string.gsub())?

<node    nil <    172 >    nil : hlist 2>

Patrick


From patrick at gundla.ch  Sun Aug 29 08:48:25 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sun, 29 Aug 2010 08:48:25 +0200
Subject: [Dev-luatex] unique node id?
In-Reply-To: <ED2718E6-3C37-4F77-9469-1F1415EEC1DD@gundla.ch>
References: <ED2718E6-3C37-4F77-9469-1F1415EEC1DD@gundla.ch>
Message-ID: <CE503DFD-E0A8-40BB-8E05-DEE54F4C382B@gundla.ch>

> 
> Is the following 172 something like I need? How would I access that (besides string.gsub())?
> 
> <node    nil <    172 >    nil : hlist 2>


I am currently using this number in the middle via tostring() and gsub(). But I'd still like to know if this can be used as an id.


Patrick


From taco at elvenkind.com  Sun Aug 29 09:03:29 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 29 Aug 2010 09:03:29 +0200
Subject: [Dev-luatex] unique node id?
In-Reply-To: <CE503DFD-E0A8-40BB-8E05-DEE54F4C382B@gundla.ch>
References: <ED2718E6-3C37-4F77-9469-1F1415EEC1DD@gundla.ch>
	<CE503DFD-E0A8-40BB-8E05-DEE54F4C382B@gundla.ch>
Message-ID: <4C7A0641.8000903@elvenkind.com>

On 08/29/2010 08:48 AM, Patrick Gundlach wrote:
>>
>> Is the following 172 something like I need? How would I access that (besides string.gsub())?
>>
>> <node    nil<     172>     nil : hlist 2>
>
>
> I am currently using this number in the middle via tostring() and gsub(). But I'd still like to know if this can be used as an id.

This number uniquely identifies a node for as long as it stays
allocated, yes. If it is freed, a new node may have the same
number.

Best wishes,
Taco

From root at mail.boekplan.nl  Sun Aug 29 12:27:41 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun, 29 Aug 2010 12:27:41 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100829102741.3C84640065@mail.boekplan.nl>

------------------------------------------------------------------------
r3835 | taco | 2010-08-29 11:28:32 +0200 (Sun, 29 Aug 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

clarify wording for node.remove

------------------------------------------------------------------------
r3836 | taco | 2010-08-29 11:29:04 +0200 (Sun, 29 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/writecff.w
   M /trunk/source/texk/web2c/luatexdir/font/writefont.w
   M /trunk/source/texk/web2c/luatexdir/font/writetype2.w

horribly quick hack for CIDSet (hopefully it works as I cannot test)

------------------------------------------------------------------------

From pragma at wxs.nl  Sun Aug 29 13:15:37 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 29 Aug 2010 13:15:37 +0200
Subject: [Dev-luatex] unique node id?
In-Reply-To: <4C7A0641.8000903@elvenkind.com>
References: <ED2718E6-3C37-4F77-9469-1F1415EEC1DD@gundla.ch>	<CE503DFD-E0A8-40BB-8E05-DEE54F4C382B@gundla.ch>
	<4C7A0641.8000903@elvenkind.com>
Message-ID: <4C7A4159.4090507@wxs.nl>

On 29-8-2010 9:03, Taco Hoekwater wrote:
> On 08/29/2010 08:48 AM, Patrick Gundlach wrote:
>>>
>>> Is the following 172 something like I need? How would I access that
>>> (besides string.gsub())?
>>>
>>> <node nil< 172> nil : hlist 2>
>>
>>
>> I am currently using this number in the middle via tostring() and
>> gsub(). But I'd still like to know if this can be used as an id.
>
> This number uniquely identifies a node for as long as it stays
> allocated, yes. If it is freed, a new node may have the same
> number.

but for storing the node's id one can as well use the nodes user object 
itself as it's equally unique during the livespan of a node and one can 
compare pointers so the 'id' snippet in the string is not giving more 
uniqueness than the node user object itself

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From patrick at gundla.ch  Sun Aug 29 13:22:37 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sun, 29 Aug 2010 13:22:37 +0200
Subject: [Dev-luatex] unique node id?
In-Reply-To: <4C7A4159.4090507@wxs.nl>
References: <ED2718E6-3C37-4F77-9469-1F1415EEC1DD@gundla.ch>	<CE503DFD-E0A8-40BB-8E05-DEE54F4C382B@gundla.ch>
	<4C7A0641.8000903@elvenkind.com> <4C7A4159.4090507@wxs.nl>
Message-ID: <F6EDBDC7-1C57-447B-9E9F-04DC0A2A65EA@gundla.ch>


Am 29.08.2010 um 13:15 schrieb Hans Hagen:

> On 29-8-2010 9:03, Taco Hoekwater wrote:
>> On 08/29/2010 08:48 AM, Patrick Gundlach wrote:
>>>> 
>>>> Is the following 172 something like I need? How would I access that
>>>> (besides string.gsub())?
>>>> 
>>>> <node nil< 172> nil : hlist 2>
>>> 
>>> 
>>> I am currently using this number in the middle via tostring() and
>>> gsub(). But I'd still like to know if this can be used as an id.
>> 
>> This number uniquely identifies a node for as long as it stays
>> allocated, yes. If it is freed, a new node may have the same
>> number.
> 
> but for storing the node's id one can as well use the nodes user object itself as it's equally unique during the livespan of a node and one can compare pointers so the 'id' snippet in the string is not giving more uniqueness than the node user object itself


I need to generate some unique text for that node (I am creating a visual representation of a nodelist using graphviz), so I see two choices: a) get some id string or b) create a look table with the nodes as an index and some random string as the value for each node. But somehow b) didn't work. Is there a way to get the "value of a pointer" as a text string in Lua? Such as when you do tostring({}). 

Patrick


From taco at elvenkind.com  Sun Aug 29 13:29:15 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 29 Aug 2010 13:29:15 +0200
Subject: [Dev-luatex] unique node id?
In-Reply-To: <4C7A4159.4090507@wxs.nl>
References: <ED2718E6-3C37-4F77-9469-1F1415EEC1DD@gundla.ch>	<CE503DFD-E0A8-40BB-8E05-DEE54F4C382B@gundla.ch>
	<4C7A0641.8000903@elvenkind.com> <4C7A4159.4090507@wxs.nl>
Message-ID: <4C7A448B.2020302@elvenkind.com>

On 08/29/2010 01:15 PM, Hans Hagen wrote:
> On 29-8-2010 9:03, Taco Hoekwater wrote:
>> On 08/29/2010 08:48 AM, Patrick Gundlach wrote:
>>>>
>>>> Is the following 172 something like I need? How would I access that
>>>> (besides string.gsub())?
>>>>
>>>> <node nil< 172> nil : hlist 2>
>>>
>>>
>>> I am currently using this number in the middle via tostring() and
>>> gsub(). But I'd still like to know if this can be used as an id.
>>
>> This number uniquely identifies a node for as long as it stays
>> allocated, yes. If it is freed, a new node may have the same
>> number.
>
> but for storing the node's id one can as well use the nodes user object
> itself as it's equally unique during the livespan of a node and one can
> compare pointers so the 'id' snippet in the string is not giving more
> uniqueness than the node user object itself

Not necessarily: there can be different userdata objects for the same
node. (I only just now realized that)

Best wishes,
Taco

From pragma at wxs.nl  Sun Aug 29 13:32:20 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 29 Aug 2010 13:32:20 +0200
Subject: [Dev-luatex] unique node id?
In-Reply-To: <F6EDBDC7-1C57-447B-9E9F-04DC0A2A65EA@gundla.ch>
References: <ED2718E6-3C37-4F77-9469-1F1415EEC1DD@gundla.ch>	<CE503DFD-E0A8-40BB-8E05-DEE54F4C382B@gundla.ch>	<4C7A0641.8000903@elvenkind.com>
	<4C7A4159.4090507@wxs.nl>
	<F6EDBDC7-1C57-447B-9E9F-04DC0A2A65EA@gundla.ch>
Message-ID: <4C7A4544.3010809@wxs.nl>

On 29-8-2010 1:22, Patrick Gundlach wrote:
>
> Am 29.08.2010 um 13:15 schrieb Hans Hagen:
>
>> On 29-8-2010 9:03, Taco Hoekwater wrote:
>>> On 08/29/2010 08:48 AM, Patrick Gundlach wrote:
>>>>>
>>>>> Is the following 172 something like I need? How would I access that
>>>>> (besides string.gsub())?
>>>>>
>>>>> <node nil<  172>  nil : hlist 2>
>>>>
>>>>
>>>> I am currently using this number in the middle via tostring() and
>>>> gsub(). But I'd still like to know if this can be used as an id.
>>>
>>> This number uniquely identifies a node for as long as it stays
>>> allocated, yes. If it is freed, a new node may have the same
>>> number.
>>
>> but for storing the node's id one can as well use the nodes user object itself as it's equally unique during the livespan of a node and one can compare pointers so the 'id' snippet in the string is not giving more uniqueness than the node user object itself
>
>
> I need to generate some unique text for that node (I am creating a visual representation of a nodelist using graphviz), so I see two choices: a) get some id string or b) create a look table with the nodes as an index and some random string as the value for each node. But somehow b) didn't work. Is there a way to get the "value of a pointer" as a text string in Lua? Such as when you do tostring({}).

isn't tostring(n) unique enough then? as long is the node is not freed

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Sun Aug 29 13:36:35 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 29 Aug 2010 13:36:35 +0200
Subject: [Dev-luatex] unique node id?
In-Reply-To: <4C7A448B.2020302@elvenkind.com>
References: <ED2718E6-3C37-4F77-9469-1F1415EEC1DD@gundla.ch>	<CE503DFD-E0A8-40BB-8E05-DEE54F4C382B@gundla.ch>
	<4C7A0641.8000903@elvenkind.com> <4C7A4159.4090507@wxs.nl>
	<4C7A448B.2020302@elvenkind.com>
Message-ID: <4C7A4643.2080609@wxs.nl>

On 29-8-2010 1:29, Taco Hoekwater wrote:
> On 08/29/2010 01:15 PM, Hans Hagen wrote:
>> On 29-8-2010 9:03, Taco Hoekwater wrote:
>>> On 08/29/2010 08:48 AM, Patrick Gundlach wrote:
>>>>>
>>>>> Is the following 172 something like I need? How would I access that
>>>>> (besides string.gsub())?
>>>>>
>>>>> <node nil< 172> nil : hlist 2>
>>>>
>>>>
>>>> I am currently using this number in the middle via tostring() and
>>>> gsub(). But I'd still like to know if this can be used as an id.
>>>
>>> This number uniquely identifies a node for as long as it stays
>>> allocated, yes. If it is freed, a new node may have the same
>>> number.
>>
>> but for storing the node's id one can as well use the nodes user object
>> itself as it's equally unique during the livespan of a node and one can
>> compare pointers so the 'id' snippet in the string is not giving more
>> uniqueness than the node user object itself
>
> Not necessarily: there can be different userdata objects for the same
> node. (I only just now realized that)

Sure, and in the beginning we even had problems with the comparison (and 
I know of a few places in my code that I need to deal with it) but I 
think that for patricks case the only thing that matters is uniqueness 
during a certain period (this graph creation i guess)

Anyhow, a way out is:

local t = {}
for ... loop over fields in node ... do
   t[k] = ...
end
hash = table.concat(t) -- maybe with some sort on keys beforehand



Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Sun Aug 29 13:38:56 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 29 Aug 2010 13:38:56 +0200
Subject: [Dev-luatex] unique node id?
In-Reply-To: <CE503DFD-E0A8-40BB-8E05-DEE54F4C382B@gundla.ch>
References: <ED2718E6-3C37-4F77-9469-1F1415EEC1DD@gundla.ch>
	<CE503DFD-E0A8-40BB-8E05-DEE54F4C382B@gundla.ch>
Message-ID: <4C7A46D0.3060708@wxs.nl>

On 29-8-2010 8:48, Patrick Gundlach wrote:
>>
>> Is the following 172 something like I need? How would I access that (besides string.gsub())?
>>
>> <node    nil<     172>     nil : hlist 2>
>
>
> I am currently using this number in the middle via tostring() and gsub(). But I'd still like to know if this can be used as an id.

thinking of it ... luatex could have a flag that would inhibit freeing 
of nodes (making free a nil-op so to say) so you would get a large mem 
footprint but that's ok for special cases

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Sun Aug 29 13:42:55 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 29 Aug 2010 13:42:55 +0200
Subject: [Dev-luatex] unique node id?
In-Reply-To: <CE503DFD-E0A8-40BB-8E05-DEE54F4C382B@gundla.ch>
References: <ED2718E6-3C37-4F77-9469-1F1415EEC1DD@gundla.ch>
	<CE503DFD-E0A8-40BB-8E05-DEE54F4C382B@gundla.ch>
Message-ID: <4C7A47BF.3000904@elvenkind.com>

On 08/29/2010 08:48 AM, Patrick Gundlach wrote:
>>
>> Is the following 172 something like I need? How would I access that (besides string.gsub())?

>> <node    nil<     172>     nil : hlist 2>
>
>
> I am currently using this number in the middle via tostring() and gsub(). But I'd still like to know if this can be used as an id.

Not now. Perhaps I should alter tostring() to return only
the middle bit.

From pragma at wxs.nl  Sun Aug 29 13:45:34 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 29 Aug 2010 13:45:34 +0200
Subject: [Dev-luatex] unique node id?
In-Reply-To: <4C7A47BF.3000904@elvenkind.com>
References: <ED2718E6-3C37-4F77-9469-1F1415EEC1DD@gundla.ch>	<CE503DFD-E0A8-40BB-8E05-DEE54F4C382B@gundla.ch>
	<4C7A47BF.3000904@elvenkind.com>
Message-ID: <4C7A485E.1020905@wxs.nl>

On 29-8-2010 1:42, Taco Hoekwater wrote:
> On 08/29/2010 08:48 AM, Patrick Gundlach wrote:
>>>
>>> Is the following 172 something like I need? How would I access that
>>> (besides string.gsub())?
>
>>> <node nil< 172> nil : hlist 2>
>>
>>
>> I am currently using this number in the middle via tostring() and
>> gsub(). But I'd still like to know if this can be used as an id.
>
> Not now. Perhaps I should alter tostring() to return only
> the middle bit.

no. as it's really helpful to see what the nodes point to .. better 
would be to have a node.tonumber that reports the number

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From patrick at gundla.ch  Sun Aug 29 14:30:15 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sun, 29 Aug 2010 14:30:15 +0200
Subject: [Dev-luatex] Node visualization
Message-ID: <EC64A610-A2C0-430F-A367-42C47BA81457@gundla.ch>

Hi,

if my previous mail comes through: I've created the graphics with graphviz 
( http://www.graphviz.org ) and this lua module:


http://gist.github.com/556247

(sample image attached, this should be small enough for the list)

Patrick

-------------- next part --------------
A non-text attachment was scrubbed...
Name: mybox.png
Type: image/png
Size: 102994 bytes
Desc: not available
URL: <http://www.ntg.nl/pipermail/dev-luatex/attachments/20100829/2801db75/attachment-0001.png>

From taco at elvenkind.com  Sun Aug 29 14:42:25 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 29 Aug 2010 14:42:25 +0200
Subject: [Dev-luatex] Node visualization
In-Reply-To: <EC64A610-A2C0-430F-A367-42C47BA81457@gundla.ch>
References: <EC64A610-A2C0-430F-A367-42C47BA81457@gundla.ch>
Message-ID: <4C7A55B1.5040303@elvenkind.com>

On 08/29/2010 02:30 PM, Patrick Gundlach wrote:
> Hi,
>
> if my previous mail comes through: I've created the graphics with graphviz
> ( http://www.graphviz.org ) and this lua module:
>
>
> http://gist.github.com/556247
>
> (sample image attached, this should be small enough for the list)

It appears to be a psd file instead of png. Anyway, that hlist
is the paragraph indentation box.

Best wishes,
Taco

From patrick at gundla.ch  Sun Aug 29 14:59:21 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sun, 29 Aug 2010 14:59:21 +0200
Subject: [Dev-luatex] "strange" node
Message-ID: <8F0B89BF-FB54-46FC-930E-1CA284D98846@gundla.ch>

Hi,

I have this box:

\setbox0\vbox{x}

when I analyze the nodelist, I find a somewhat strange hlist node:

<node    nil <     30 >    nil : hlist 0>

which is referenced from the whatsit (local_par)/prev node pointer. See "n30" in the attached image. Is it safe to ignore this hlist?

(is this the parindent box? - answer from the other mail?)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mybox.png
Type: image/png
Size: 35095 bytes
Desc: not available
URL: <http://www.ntg.nl/pipermail/dev-luatex/attachments/20100829/937854aa/attachment-0002.png>
-------------- next part --------------



Another related question: sometimes I come across "nested_list" and "temp" nodes. Can I ignore these as well?

I wonder why two hlists point back to the same nested_list (n155).

-------------- next part --------------
A non-text attachment was scrubbed...
Name: mybox-big.png
Type: image/png
Size: 77181 bytes
Desc: not available
URL: <http://www.ntg.nl/pipermail/dev-luatex/attachments/20100829/937854aa/attachment-0003.png>
-------------- next part --------------




Patrick

(sorry for sending a psd-document in the other mail - graphviz on OS X is really buggy, I exported the graph as a PNG file and it was saved as mybox.png, but in reality it was something else.)

From taco at elvenkind.com  Sun Aug 29 15:23:15 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 29 Aug 2010 15:23:15 +0200
Subject: [Dev-luatex] "strange" node
In-Reply-To: <8F0B89BF-FB54-46FC-930E-1CA284D98846@gundla.ch>
References: <8F0B89BF-FB54-46FC-930E-1CA284D98846@gundla.ch>
Message-ID: <4C7A5F43.8020305@elvenkind.com>

On 08/29/2010 02:59 PM, Patrick Gundlach wrote:
> Hi,
>
> I have this box:
>
> \setbox0\vbox{x}
>
> when I analyze the nodelist, I find a somewhat strange hlist node:
>
> <node    nil<      30>     nil : hlist 0>
>
> which is referenced from the whatsit (local_par)/prev node pointer. See "n30" in the attached image. Is it safe to ignore this hlist?
>
> (is this the parindent box? - answer from the other mail?)

Oh, right. No, it is not. The 'next' pointer is the parindent box.
The prev of local_par is nonsense (it originally points to a temp
node that was the current head, but temp nodes often end up junk
after they are no longer needed).

I should clear that field when the head is split off, but it will
take some time before I can find the correct location. Just ignore
it, please.

> Another related question: sometimes I come across "nested_list" and "temp" nodes. Can I ignore these as well?
>
> I wonder why two hlists point back to the same nested_list (n155).

Same thing happens here. In general, the back pointer of the first
item of a list of nodes contains a pointer to a temp node that was
created to start the current chain (discretionary sublists are the
exception).

Best wishes,
Taco

From root at mail.boekplan.nl  Sun Aug 29 16:27:30 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun, 29 Aug 2010 16:27:30 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100829142730.8530740065@mail.boekplan.nl>

------------------------------------------------------------------------
r3837 | taco | 2010-08-29 13:22:41 +0200 (Sun, 29 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/writecff.w

CIDSet should (probably) not go through cid->gid mapping

------------------------------------------------------------------------

From root at mail.boekplan.nl  Sun Aug 29 22:27:36 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun, 29 Aug 2010 22:27:36 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100829202736.334B440065@mail.boekplan.nl>

------------------------------------------------------------------------
r3838 | taco | 2010-08-29 22:07:34 +0200 (Sun, 29 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/writecff.w
   M /trunk/source/texk/web2c/luatexdir/font/writetype2.w

use the right low-level calls for CIDSet writing

------------------------------------------------------------------------

From root at mail.boekplan.nl  Mon Aug 30 12:27:22 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon, 30 Aug 2010 12:27:22 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100830102722.D4E7D40067@mail.boekplan.nl>

------------------------------------------------------------------------
r3839 | taco | 2010-08-30 11:31:02 +0200 (Mon, 30 Aug 2010) | 2 lines
Changed paths:
   A /trunk/manual/fdata.lua
   A /trunk/manual/functionref.pdf
   A /trunk/manual/functionref.tex

add the short ref to the repository

------------------------------------------------------------------------

From root at mail.boekplan.nl  Tue Aug 31 12:27:35 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue, 31 Aug 2010 12:27:35 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100831102735.9668B40067@mail.boekplan.nl>

------------------------------------------------------------------------
r3840 | hhenkel | 2010-08-31 00:26:31 +0200 (Tue, 31 Aug 2010) | 5 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lpdflib.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.w

experimental: allow reserved object numbers of generic objects to go 
into /Annots page resources, objects may be built and flushed before or
later. TODO: extend this to object types other than "annot" and other
page resources.

------------------------------------------------------------------------
r3841 | hhenkel | 2010-08-31 00:45:03 +0200 (Tue, 31 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lpdflib.c

this function was too early.

------------------------------------------------------------------------
r3842 | oneiros | 2010-08-31 09:19:36 +0200 (Tue, 31 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.w

silence compiler: "warning: comparison between signed and unsigned integer expressions"

------------------------------------------------------------------------

From patrick at gundla.ch  Tue Aug 31 15:29:41 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Tue, 31 Aug 2010 15:29:41 +0200
Subject: [Dev-luatex] Question on node.insert_before()
Message-ID: <9A13BA30-D98C-428C-BFE8-47A5AE68B050@gundla.ch>

Hi,

this gives me an error:


----------------------------------------
\directlua{
  local second=node.new("rule")

  local v=node.vpack(second)

  local first=node.new("rule")

  node.insert_before(v,second,first)
}

\bye
----------------------------------------

Attempt to node.insert_before() a non-existing node

I assumed that node.insert_before would put the first node before the second node and "corrects" the list pointer of v.

Q: why do I get the error?


Patrick


From taco at elvenkind.com  Tue Aug 31 15:41:17 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 31 Aug 2010 15:41:17 +0200
Subject: [Dev-luatex] Question on node.insert_before()
In-Reply-To: <9A13BA30-D98C-428C-BFE8-47A5AE68B050@gundla.ch>
References: <9A13BA30-D98C-428C-BFE8-47A5AE68B050@gundla.ch>
Message-ID: <4C7D067D.3010003@elvenkind.com>

On 08/31/2010 03:29 PM, Patrick Gundlach wrote:
> Hi,
>
> this gives me an error:
>
>
> ----------------------------------------
> \directlua{
>    local second=node.new("rule")
>
>    local v=node.vpack(second)
>
>    local first=node.new("rule")
>
>    node.insert_before(v,second,first)
> }
>
> \bye
> ----------------------------------------
>
> Attempt to node.insert_before() a non-existing node
>
> I assumed that node.insert_before would put the first node before the second node and "corrects" the list pointer of v.
>
> Q: why do I get the error?

Because 'second' is not part of the chain that starts at _v_, it is
part of the chain that starts at _v.list_.

Best wishes,
Taco

From root at mail.boekplan.nl  Tue Aug 31 16:27:29 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue, 31 Aug 2010 16:27:29 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100831142729.6741540064@mail.boekplan.nl>

------------------------------------------------------------------------
r3843 | taco | 2010-08-31 14:15:05 +0200 (Tue, 31 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/writecff.w
   M /trunk/source/texk/web2c/luatexdir/font/writetype2.w

/CIDSet streams appeared to have an off-by-one

------------------------------------------------------------------------
r3844 | taco | 2010-08-31 15:44:05 +0200 (Tue, 31 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.h

pdf/A wants streams to be terminated by ^M, not ^J

------------------------------------------------------------------------

From patrick at gundla.ch  Tue Aug 31 16:55:19 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Tue, 31 Aug 2010 16:55:19 +0200
Subject: [Dev-luatex] Question on node.insert_before()
In-Reply-To: <4C7D067D.3010003@elvenkind.com>
References: <9A13BA30-D98C-428C-BFE8-47A5AE68B050@gundla.ch>
	<4C7D067D.3010003@elvenkind.com>
Message-ID: <F1A847C6-CF55-45F8-BC97-975A09BB9AA6@gundla.ch>



>> Q: why do I get the error?
> 
> Because 'second' is not part of the chain that starts at _v_, it is
> part of the chain that starts at _v.list_.

Oh, yes, that makes sense. Thanks

Patrick


From root at mail.boekplan.nl  Tue Aug 31 22:27:29 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue, 31 Aug 2010 22:27:29 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100831202729.EA9B140064@mail.boekplan.nl>

------------------------------------------------------------------------
r3845 | taco | 2010-08-31 17:14:23 +0200 (Tue, 31 Aug 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/writecff.w
   M /trunk/source/texk/web2c/luatexdir/font/writetype2.w

Do the cidset right, hopefully...

------------------------------------------------------------------------

