From root at mail.boekplan.nl  Mon Nov  1 12:28:15 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon,  1 Nov 2010 12:28:15 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101101112815.8991E40065@mail.boekplan.nl>

------------------------------------------------------------------------
r3930 | oneiros | 2010-10-31 23:19:56 +0100 (Sun, 31 Oct 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lepdflib.cc

comment out unused functions

------------------------------------------------------------------------
r3931 | hhenkel | 2010-11-01 09:56:04 +0100 (Mon, 01 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lepdflib.cc
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.w

a few lepdf functions, write_zip() cosmetics

------------------------------------------------------------------------
r3932 | hhenkel | 2010-11-01 10:50:59 +0100 (Mon, 01 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftypes.h

make c_stream a pointer

------------------------------------------------------------------------

From root at mail.boekplan.nl  Mon Nov  1 16:27:46 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon,  1 Nov 2010 16:27:46 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101101152746.D24D240065@mail.boekplan.nl>

------------------------------------------------------------------------
r3933 | oneiros | 2010-11-01 15:34:55 +0100 (Mon, 01 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lepdflib.cc

expose some functions

------------------------------------------------------------------------

From root at mail.boekplan.nl  Mon Nov  1 22:28:04 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon,  1 Nov 2010 22:28:04 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101101212804.D276E4006E@mail.boekplan.nl>

------------------------------------------------------------------------
r3934 | hhenkel | 2010-11-01 18:12:03 +0100 (Mon, 01 Nov 2010) | 4 lines
Changed paths:
   M /trunk/source/aclocal.m4
   M /trunk/source/auxdir/auxsub/aclocal.m4
   M /trunk/source/auxdir/auxsub/configure
   M /trunk/source/configure
   M /trunk/source/libs/aclocal.m4
   M /trunk/source/libs/configure
   M /trunk/source/libs/libpng/aclocal.m4
   M /trunk/source/libs/libpng/configure
   M /trunk/source/libs/obsdcompat/aclocal.m4
   M /trunk/source/libs/obsdcompat/configure
   M /trunk/source/libs/poppler/aclocal.m4
   M /trunk/source/libs/poppler/configure
   M /trunk/source/libs/zlib/aclocal.m4
   M /trunk/source/libs/zlib/configure
   M /trunk/source/libs/zziplib/aclocal.m4
   M /trunk/source/libs/zziplib/configure
   M /trunk/source/texk/aclocal.m4
   M /trunk/source/texk/configure
   M /trunk/source/texk/kpathsea/aclocal.m4
   M /trunk/source/texk/kpathsea/configure
   M /trunk/source/texk/web2c/Makefile.am
   M /trunk/source/texk/web2c/Makefile.in
   M /trunk/source/texk/web2c/aclocal.m4
   M /trunk/source/texk/web2c/configure
   M /trunk/source/texk/web2c/luatexdir/am/libluatex.am
   A /trunk/source/texk/web2c/luatexdir/am/txt2zlib.am
   A /trunk/source/texk/web2c/luatexdir/luascripts
   A /trunk/source/texk/web2c/luatexdir/luascripts/pdflua.h
   A /trunk/source/texk/web2c/luatexdir/luascripts/pdflua.lua
   A /trunk/source/texk/web2c/luatexdir/luascripts/txt2zlib.w
   M /trunk/source/texk/web2c/luatexdir/ptexlib.h
   M /trunk/source/texk/web2c/web2c/aclocal.m4
   M /trunk/source/texk/web2c/web2c/configure
   M /trunk/source/utils/aclocal.m4
   M /trunk/source/utils/configure

experimental stubs for luatex engine scripting: pdflua.lua & pdflua.h,
new binary tool txt2zlib (txt2zlib.w, txt2zlib.am), fight with autoconf...
running reautoconf on debian squeeze, using autoconf (GNU Autoconf) 2.67

------------------------------------------------------------------------
r3935 | hhenkel | 2010-11-01 18:23:44 +0100 (Mon, 01 Nov 2010) | 2 lines
Changed paths:
   A /trunk/source/texk/web2c/luatexdir/pdf/pdfluaapi.h
   A /trunk/source/texk/web2c/luatexdir/pdf/pdfluaapi.w

add also forgotten pdfluaapi.h, pdfluaapi.w

------------------------------------------------------------------------
r3936 | hhenkel | 2010-11-01 18:24:46 +0100 (Mon, 01 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/ptexlib.h

...and pdfluaapi.h also here

------------------------------------------------------------------------

From root at mail.boekplan.nl  Tue Nov  2 12:28:05 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue,  2 Nov 2010 12:28:05 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101102112806.1515940071@mail.boekplan.nl>

------------------------------------------------------------------------
r3937 | hhenkel | 2010-11-01 22:58:54 +0100 (Mon, 01 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luascripts/pdflua.h
   M /trunk/source/texk/web2c/luatexdir/luascripts/txt2zlib.w

zlib_struct type

------------------------------------------------------------------------
r3938 | hhenkel | 2010-11-01 23:20:47 +0100 (Mon, 01 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftypes.h

hook to lua_State "Luap"

------------------------------------------------------------------------
r3939 | hhenkel | 2010-11-01 23:32:02 +0100 (Mon, 01 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.w

fix typecast warning with round_xn_over_d()

------------------------------------------------------------------------
r3940 | hhenkel | 2010-11-01 23:46:24 +0100 (Mon, 01 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.w

fix a few typecasts & make functions static

------------------------------------------------------------------------
r3941 | hhenkel | 2010-11-02 00:31:27 +0100 (Tue, 02 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lpdflib.c

yet another typecast

------------------------------------------------------------------------
r3942 | hhenkel | 2010-11-02 00:46:12 +0100 (Tue, 02 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.w

xtalloc() is a bit more handy than xmalloc()

------------------------------------------------------------------------
r3943 | taco | 2010-11-02 07:19:02 +0100 (Tue, 02 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luapeg/lpeg.c

one-line lpeg fix from Roberto

------------------------------------------------------------------------
r3944 | taco | 2010-11-02 07:19:58 +0100 (Tue, 02 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/am/txt2zlib.am

CPPFLAGS are needed for zlib includes

------------------------------------------------------------------------
r3945 | taco | 2010-11-02 07:20:15 +0100 (Tue, 02 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/Makefile.in
   M /trunk/source/texk/web2c/aclocal.m4
   M /trunk/source/texk/web2c/configure
   M /trunk/source/texk/web2c/web2c/aclocal.m4
   M /trunk/source/texk/web2c/web2c/configure

autoreconf

------------------------------------------------------------------------
r3946 | taco | 2010-11-02 07:37:13 +0100 (Tue, 02 Nov 2010) | 5 lines
Changed paths:
   M /trunk/source/texk/web2c/Makefile.in
   M /trunk/source/texk/web2c/aclocal.m4
   M /trunk/source/texk/web2c/configure
   M /trunk/source/texk/web2c/configure.ac
   M /trunk/source/texk/web2c/doc/Makefile.in
   M /trunk/source/texk/web2c/lib/Makefile.in
   M /trunk/source/texk/web2c/luatexdir/am/libluatex.am
   M /trunk/source/texk/web2c/man/Makefile.in

fix cross-compilation (but one has to manually copy the native 
build/texk/web2c/txt2zlib into the PATH before attemping 
cross-compilation)


------------------------------------------------------------------------

From mpg at elzevir.fr  Fri Nov  5 13:59:54 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 05 Nov 2010 13:59:54 +0100
Subject: [Dev-luatex] return value of filter callbacks
Message-ID: <4CD3FFCA.3040500@elzevir.fr>

Hi,

Sorry if this is very clear from the manual, maybe I just didn't read the part
where it is explained (or I read it but was too stupid/tired to notice), but I
don't understand the meaning of the return value of some callbacks.

The first example (by order of apparition in the manual) is
pre_linebreak_filter, whose calling convention is:

function(<node> head, <string> groupcode)
    return true | false | <node> newhead
end

I think it's clear what returning a newhead node does, but I don't understand
what returning true or false means for this callback. Other similar callbacks
include post_linebreak_filter, (h|v)pack_filter, pre_output_filter, etc.

The underlying problem is, I was trying to enhance the user documentation of
luatexbase-mcb (which allows to register many functions in a single callback,
based on some ConTeXt code I believe) but I can't make sense of the calling
conventions in the current code (the functions are expected to return a node
*and* true, in whatever order), so that I can't check it is correct, and even
less document why it works that way. I guess understanding the calling
convention for the callbacks themselves would be a good starting point.

Thanks,
Manuel.

From khaledhosny at eglug.org  Fri Nov  5 14:22:06 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 5 Nov 2010 15:22:06 +0200
Subject: [Dev-luatex] return value of filter callbacks
In-Reply-To: <4CD3FFCA.3040500@elzevir.fr>
References: <4CD3FFCA.3040500@elzevir.fr>
Message-ID: <20101105132206.GB4960@khaled-laptop>

On Fri, Nov 05, 2010 at 01:59:54PM +0100, Manuel P?gouri?-Gonnard wrote:
> Hi,
> 
> Sorry if this is very clear from the manual, maybe I just didn't read the part
> where it is explained (or I read it but was too stupid/tired to notice), but I
> don't understand the meaning of the return value of some callbacks.
> 
> The first example (by order of apparition in the manual) is
> pre_linebreak_filter, whose calling convention is:
> 
> function(<node> head, <string> groupcode)
>     return true | false | <node> newhead
> end
> 
> I think it's clear what returning a newhead node does, but I don't understand
> what returning true or false means for this callback. Other similar callbacks
> include post_linebreak_filter, (h|v)pack_filter, pre_output_filter, etc.

I think it is explained in section 4.1:

  For some minor speed gain, you can assign the boolean false to the
  non-file related callbacks, doing so will prevent LuaTeX from executing
  whatever it would execute by default (when no callback function is
  registered at all). Be warned: this may cause all sorts of grief unless
  you know exactly what you are doing! This functionality is present since
  version 0.38.

Not sure about "true" though.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From taco at elvenkind.com  Fri Nov  5 14:22:34 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 05 Nov 2010 14:22:34 +0100
Subject: [Dev-luatex] return value of filter callbacks
In-Reply-To: <4CD3FFCA.3040500@elzevir.fr>
References: <4CD3FFCA.3040500@elzevir.fr>
Message-ID: <4CD4051A.9060906@elvenkind.com>

On 11/05/2010 01:59 PM, Manuel P?gouri?-Gonnard wrote:
> Hi,
>
> Sorry if this is very clear from the manual, maybe I just didn't read the part
> where it is explained (or I read it but was too stupid/tired to notice), but I
> don't understand the meaning of the return value of some callbacks.
>
> The first example (by order of apparition in the manual) is
> pre_linebreak_filter, whose calling convention is:
>
> function(<node>  head,<string>  groupcode)
>      return true | false |<node>  newhead
> end
>
> I think it's clear what returning a newhead node does, but I don't understand
> what returning true or false means for this callback. Other similar callbacks
> include post_linebreak_filter, (h|v)pack_filter, pre_output_filter, etc.

In all these cases the result of returning a boolean is the same:

   false == callback has failed
   true == callback has run ok, but nothing has been changed

the latter case (true) is interesting because it allows a speed
optimization that can be considerable. I could have sworn this was
mentioned in the manual, but I cannot find it myself either.

From taco at elvenkind.com  Fri Nov  5 14:24:25 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 05 Nov 2010 14:24:25 +0100
Subject: [Dev-luatex] return value of filter callbacks
In-Reply-To: <20101105132206.GB4960@khaled-laptop>
References: <4CD3FFCA.3040500@elzevir.fr> <20101105132206.GB4960@khaled-laptop>
Message-ID: <4CD40589.8030203@elvenkind.com>

On 11/05/2010 02:22 PM, Khaled Hosny wrote:
>
> I think it is explained in section 4.1:
>
>    For some minor speed gain, you can assign the boolean false to the
>    non-file related callbacks, doing so will prevent LuaTeX from executing
>    whatever it would execute by default (when no callback function is
>    registered at all).

No, this is different, this documents the case of

    callback.register('pre_linebreak_filter', false)


From khaledhosny at eglug.org  Fri Nov  5 14:27:32 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 5 Nov 2010 15:27:32 +0200
Subject: [Dev-luatex] return value of filter callbacks
In-Reply-To: <20101105132206.GB4960@khaled-laptop>
References: <4CD3FFCA.3040500@elzevir.fr> <20101105132206.GB4960@khaled-laptop>
Message-ID: <20101105132732.GA5024@khaled-laptop>

On Fri, Nov 05, 2010 at 03:22:06PM +0200, Khaled Hosny wrote:
> On Fri, Nov 05, 2010 at 01:59:54PM +0100, Manuel P?gouri?-Gonnard wrote:
> > Hi,
> > 
> > Sorry if this is very clear from the manual, maybe I just didn't read the part
> > where it is explained (or I read it but was too stupid/tired to notice), but I
> > don't understand the meaning of the return value of some callbacks.
> > 
> > The first example (by order of apparition in the manual) is
> > pre_linebreak_filter, whose calling convention is:
> > 
> > function(<node> head, <string> groupcode)
> >     return true | false | <node> newhead
> > end
> > 
> > I think it's clear what returning a newhead node does, but I don't understand
> > what returning true or false means for this callback. Other similar callbacks
> > include post_linebreak_filter, (h|v)pack_filter, pre_output_filter, etc.
> 
> I think it is explained in section 4.1:
> 
>   For some minor speed gain, you can assign the boolean false to the
>   non-file related callbacks, doing so will prevent LuaTeX from executing
>   whatever it would execute by default (when no callback function is
>   registered at all). Be warned: this may cause all sorts of grief unless
>   you know exactly what you are doing! This functionality is present since
>   version 0.38.
> 
> Not sure about "true" though.

Please ignore this, I just confused things up.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From khaledhosny at eglug.org  Fri Nov  5 14:28:36 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 5 Nov 2010 15:28:36 +0200
Subject: [Dev-luatex] return value of filter callbacks
In-Reply-To: <4CD40589.8030203@elvenkind.com>
References: <4CD3FFCA.3040500@elzevir.fr> <20101105132206.GB4960@khaled-laptop>
	<4CD40589.8030203@elvenkind.com>
Message-ID: <20101105132836.GB5024@khaled-laptop>

On Fri, Nov 05, 2010 at 02:24:25PM +0100, Taco Hoekwater wrote:
> On 11/05/2010 02:22 PM, Khaled Hosny wrote:
> >
> >I think it is explained in section 4.1:
> >
> >   For some minor speed gain, you can assign the boolean false to the
> >   non-file related callbacks, doing so will prevent LuaTeX from executing
> >   whatever it would execute by default (when no callback function is
> >   registered at all).
> 
> No, this is different, this documents the case of
> 
>    callback.register('pre_linebreak_filter', false)

Which I just realised :)

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From mpg at elzevir.fr  Fri Nov  5 14:46:30 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 05 Nov 2010 14:46:30 +0100
Subject: [Dev-luatex] return value of filter callbacks
In-Reply-To: <4CD4051A.9060906@elvenkind.com>
References: <4CD3FFCA.3040500@elzevir.fr> <4CD4051A.9060906@elvenkind.com>
Message-ID: <4CD40AB6.9080906@elzevir.fr>

Hi,

[btw: I meant to write to the users list, sorry]

Le 05/11/2010 14:22, Taco Hoekwater a ?crit :
> In all these cases the result of returning a boolean is the same:
> 
>    false == callback has failed
>    true == callback has run ok, but nothing has been changed
> 
> the latter case (true) is interesting because it allows a speed
> optimization that can be considerable. I could have sworn this was
> mentioned in the manual, but I cannot find it myself either.

Ok, thanks for the clarification. Just to be sure: in case the function returns
false, and error will be issued, right?

Thanks,
Manuel.

From taco at elvenkind.com  Fri Nov  5 14:52:50 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 05 Nov 2010 14:52:50 +0100
Subject: [Dev-luatex] return value of filter callbacks
In-Reply-To: <4CD40AB6.9080906@elzevir.fr>
References: <4CD3FFCA.3040500@elzevir.fr> <4CD4051A.9060906@elvenkind.com>
	<4CD40AB6.9080906@elzevir.fr>
Message-ID: <4CD40C32.307@elvenkind.com>

On 11/05/2010 02:46 PM, Manuel P?gouri?-Gonnard wrote:
> Hi,
>
> [btw: I meant to write to the users list, sorry]
>
> Le 05/11/2010 14:22, Taco Hoekwater a ?crit :
>> In all these cases the result of returning a boolean is the same:
>>
>>     false == callback has failed
>>     true == callback has run ok, but nothing has been changed
>>
>> the latter case (true) is interesting because it allows a speed
>> optimization that can be considerable. I could have sworn this was
>> mentioned in the manual, but I cannot find it myself either.
>
> Ok, thanks for the clarification. Just to be sure: in case the function returns
> false, and error will be issued, right?

Eh ... no. You have to raise an error yourself, if you want that.




From mpg at elzevir.fr  Fri Nov  5 14:56:13 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 05 Nov 2010 14:56:13 +0100
Subject: [Dev-luatex] return value of filter callbacks
In-Reply-To: <4CD40C32.307@elvenkind.com>
References: <4CD3FFCA.3040500@elzevir.fr> <4CD4051A.9060906@elvenkind.com>
	<4CD40AB6.9080906@elzevir.fr> <4CD40C32.307@elvenkind.com>
Message-ID: <4CD40CFD.4040107@elzevir.fr>

Le 05/11/2010 14:52, Taco Hoekwater a ?crit :
> On 11/05/2010 02:46 PM, Manuel P?gouri?-Gonnard wrote:
>> Le 05/11/2010 14:22, Taco Hoekwater a ?crit :
>>> In all these cases the result of returning a boolean is the same:
>>>
>>>     false == callback has failed
>>>     true == callback has run ok, but nothing has been changed
>>>
>>> the latter case (true) is interesting because it allows a speed
>>> optimization that can be considerable. I could have sworn this was
>>> mentioned in the manual, but I cannot find it myself either.
>>
>> Ok, thanks for the clarification. Just to be sure: in case the function returns
>> false, and error will be issued, right?
> 
> Eh ... no. You have to raise an error yourself, if you want that.
> 
Hum, so what is the purpose of returning false rather than true, if no action is
taken based on this value?

From taco at elvenkind.com  Fri Nov  5 14:57:25 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 05 Nov 2010 14:57:25 +0100
Subject: [Dev-luatex] return value of filter callbacks
In-Reply-To: <4CD40CFD.4040107@elzevir.fr>
References: <4CD3FFCA.3040500@elzevir.fr> <4CD4051A.9060906@elvenkind.com>
	<4CD40AB6.9080906@elzevir.fr> <4CD40C32.307@elvenkind.com>
	<4CD40CFD.4040107@elzevir.fr>
Message-ID: <4CD40D45.4030405@elvenkind.com>

On 11/05/2010 02:56 PM, Manuel P?gouri?-Gonnard wrote:
> Le 05/11/2010 14:52, Taco Hoekwater a ?crit :
>> On 11/05/2010 02:46 PM, Manuel P?gouri?-Gonnard wrote:
>>> Le 05/11/2010 14:22, Taco Hoekwater a ?crit :
>>>> In all these cases the result of returning a boolean is the same:
>>>>
>>>>      false == callback has failed
>>>>      true == callback has run ok, but nothing has been changed
>>>>
>>>> the latter case (true) is interesting because it allows a speed
>>>> optimization that can be considerable. I could have sworn this was
>>>> mentioned in the manual, but I cannot find it myself either.
>>>
>>> Ok, thanks for the clarification. Just to be sure: in case the function returns
>>> false, and error will be issued, right?
>>
>> Eh ... no. You have to raise an error yourself, if you want that.
>>
> Hum, so what is the purpose of returning false rather than true, if no action is
> taken based on this value?

Oh, now I see this was not clear. Action actually is taken:
the whole node list starting at head is thrown away.

From mpg at elzevir.fr  Fri Nov  5 15:06:52 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 05 Nov 2010 15:06:52 +0100
Subject: [Dev-luatex] return value of filter callbacks
In-Reply-To: <4CD40D45.4030405@elvenkind.com>
References: <4CD3FFCA.3040500@elzevir.fr> <4CD4051A.9060906@elvenkind.com>
	<4CD40AB6.9080906@elzevir.fr> <4CD40C32.307@elvenkind.com>
	<4CD40CFD.4040107@elzevir.fr> <4CD40D45.4030405@elvenkind.com>
Message-ID: <4CD40F7C.2090604@elzevir.fr>

Le 05/11/2010 14:57, Taco Hoekwater a ?crit :
> On 11/05/2010 02:56 PM, Manuel P?gouri?-Gonnard wrote:
>> Le 05/11/2010 14:52, Taco Hoekwater a ?crit :
>>> On 11/05/2010 02:46 PM, Manuel P?gouri?-Gonnard wrote:
>>>> Le 05/11/2010 14:22, Taco Hoekwater a ?crit :
>>>>> In all these cases the result of returning a boolean is the same:
>>>>>
>>>>>      false == callback has failed
>>>>>      true == callback has run ok, but nothing has been changed
>>>>>
>>>>> the latter case (true) is interesting because it allows a speed
>>>>> optimization that can be considerable. I could have sworn this was
>>>>> mentioned in the manual, but I cannot find it myself either.
>>>>
>>>> Ok, thanks for the clarification. Just to be sure: in case the function returns
>>>> false, and error will be issued, right?
>>>
>>> Eh ... no. You have to raise an error yourself, if you want that.
>>>
>> Hum, so what is the purpose of returning false rather than true, if no action is
>> taken based on this value?
> 
> Oh, now I see this was not clear. Action actually is taken:
> the whole node list starting at head is thrown away.

Ok, now it's perfectly clear.

Thanks again,
Manuel.

From mpg at elzevir.fr  Fri Nov  5 16:01:02 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 05 Nov 2010 16:01:02 +0100
Subject: [Dev-luatex] return value of filter callbacks
In-Reply-To: <4CD4051A.9060906@elvenkind.com>
References: <4CD3FFCA.3040500@elzevir.fr> <4CD4051A.9060906@elvenkind.com>
Message-ID: <4CD41C2E.3020203@elzevir.fr>

Le 05/11/2010 14:22, Taco Hoekwater a ?crit :
> I could have sworn this was
> mentioned in the manual, but I cannot find it myself either.

Got it! It was in the manual under buildpage_filter for luatex 0.25:

> As for all the callbacks that deal with nodes, the return value can be one of three things:
> ?  boolean true signals succesful processing
> ?  node signals that the `head' node should be replaced by this node
> ?  boolean false signals that the `head' node list should be ignored and flushed from memory

Then, the calling convention for this callback was changed, and the text likely
disappeared at this point.

Manuel.

From root at mail.boekplan.nl  Fri Nov  5 22:27:36 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri,  5 Nov 2010 22:27:36 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101105212736.4C7194006F@mail.boekplan.nl>

------------------------------------------------------------------------
r3947 | taco | 2010-11-05 16:37:02 +0100 (Fri, 05 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

reinstate a bit of disappeared manual (thanks Manuel for rediscovering it!)

------------------------------------------------------------------------

From root at mail.boekplan.nl  Sat Nov  6 16:27:39 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat,  6 Nov 2010 16:27:39 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101106152739.4904B4006F@mail.boekplan.nl>

------------------------------------------------------------------------
r3948 | hhenkel | 2010-11-06 14:25:56 +0100 (Sat, 06 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luastuff.w
   M /trunk/source/texk/web2c/luatexdir/lua/luatex-api.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfluaapi.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfluaapi.w

new_pdflua() (not in use yet)

------------------------------------------------------------------------

From root at mail.boekplan.nl  Sun Nov  7 12:27:44 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun,  7 Nov 2010 12:27:44 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101107112744.53D9740066@mail.boekplan.nl>

------------------------------------------------------------------------
r3949 | hhenkel | 2010-11-07 01:09:19 +0100 (Sun, 07 Nov 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luastuff.w
   M /trunk/source/texk/web2c/luatexdir/lua/luatex-api.h
   M /trunk/source/texk/web2c/luatexdir/luascripts/pdflua.lua
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfluaapi.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfluaapi.w
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftypes.h

A separate Lua state for the PDF backend was a bad idea, revert this.
Add rudimentary beginpage(), endpage(), outputpagestree() functions.

------------------------------------------------------------------------

From root at mail.boekplan.nl  Sun Nov  7 16:27:40 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun,  7 Nov 2010 16:27:40 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101107152740.9A2CB40066@mail.boekplan.nl>

------------------------------------------------------------------------
r3950 | hhenkel | 2010-11-07 14:10:57 +0100 (Sun, 07 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfluaapi.w

earlier check on annots

------------------------------------------------------------------------

From root at mail.boekplan.nl  Thu Nov 11 12:28:09 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Thu, 11 Nov 2010 12:28:09 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101111112809.9B88540060@mail.boekplan.nl>

------------------------------------------------------------------------
r3951 | taco | 2010-11-11 08:54:23 +0100 (Thu, 11 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/writet1.w

apply a patch from Thanh

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Nov 12 12:27:52 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 12 Nov 2010 12:27:52 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101112112753.341D640060@mail.boekplan.nl>

------------------------------------------------------------------------
r3952 | taco | 2010-11-12 09:39:24 +0100 (Fri, 12 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/fdata.lua
   M /trunk/manual/functionref.pdf
   M /trunk/manual/functionref.tex

document node.is_node

------------------------------------------------------------------------
r3953 | taco | 2010-11-12 09:41:28 +0100 (Fri, 12 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

prepare for 0.64

------------------------------------------------------------------------
r3954 | taco | 2010-11-12 09:43:08 +0100 (Fri, 12 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/NEWS
   M /trunk/source/texk/web2c/luatexdir/luatex.c

bump version and add NEWS section

------------------------------------------------------------------------

From taco at elvenkind.com  Fri Nov 12 14:50:45 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 12 Nov 2010 14:50:45 +0100
Subject: [Dev-luatex] Luatex 0.64.0 announcement
Message-ID: <4CDD4635.8080109@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.64.0.
This is a development release, but it also fixes a few rather
annoying bugs in 0.63.0.


News:

* New lua functions pdf.refobj(), pdf.maxobjnum() and pdf.objtype()

* New lua function node.is_node()

* The max_strings configuration variable's maximum value is
   raised to be identical to texlive's maximum (2097151), and
   same for param_size (32767).

* The embedded mplib is now 1.503.

* Minor cleanups in the output of fontloader.to_table():

   - removed out-of-range altuni's from the output
   - don't dump the extra encodings, just the actual font encoding
   - export the encoding's name also as 'enc_name' at one level up
   - no longer exporting unset macstyles, nor zero uniqueids
   - fix creationtime and modification time

* Ongoing work on the epdf library

Bugfixes:

* Fix a bug where an explicit hyphen prevented hyphenation for the
   whole rest of the paragraph

* Internal font copying forgot to copy the last font dimen

* os.selfdir() is now documented

* patch quad (\fontdimen6) in \letterspacefont to be compatible
   with pdftex

* Multi-page pdf inclusion was very slow in 0.63.0

* Some extra checks added to the handling of glue_spec node
   objects in lua code.

* Some node.prev pointers have been corrected (but this is not
   quite finished).

* A small fix to lpeg 0.9.


The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

   svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.64.0

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org

Have fun,
Taco




From root at mail.boekplan.nl  Fri Nov 12 16:28:03 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 12 Nov 2010 16:28:03 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101112152803.80AEC40060@mail.boekplan.nl>

------------------------------------------------------------------------
r3955 | taco | 2010-11-12 14:28:03 +0100 (Fri, 12 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/conditional.w

fix a buffer reallocation bug in test_for_cs

------------------------------------------------------------------------
r3956 | taco | 2010-11-12 14:30:38 +0100 (Fri, 12 Nov 2010) | 1 line
Changed paths:
   A /tags/beta-0.64.0 (from /trunk:3955)


------------------------------------------------------------------------
r3957 | taco | 2010-11-12 14:49:43 +0100 (Fri, 12 Nov 2010) | 2 lines
Changed paths:
   M /tools/luatextag

split the archive into source and doc 

------------------------------------------------------------------------

From graham.douglas at readytext.co.uk  Fri Nov 12 20:13:43 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Fri, 12 Nov 2010 19:13:43 +0000
Subject: [Dev-luatex] Luatex beta-0.64.0 --- Windows build failure?
In-Reply-To: <mailman.5.1289559601.26831.dev-luatex@ntg.nl>
References: <mailman.5.1289559601.26831.dev-luatex@ntg.nl>
Message-ID: <4CDD91E7.9010204@readytext.co.uk>

Hi Taco

Just tried to build 0.64 beta on Windows Vista
but it failed. Extract of build log below.

Any ideas what is causing this and what I can do
to fix it?

Many thanks and best wishes

Graham

<snip>
------
libtool: link: gcc -Wall -Wunused -Wimplicit -Wreturn-type 
-Wdeclaration-after-s
tatement -Wno-unknown-pragmas -Wmissing-prototypes 
-Wmissing-declarations -g -O2
  -o txt2zlib.exe txt2zlib-txt2zlib.o  -lz lib/lib.a 
/luatexbeta/build/texk/kpath
sea/.libs/libkpathsea.a
c:\MinGW\bin\..\lib\gcc\mingw32\3.4.5\..\..\..\..\mingw32\bin\ld.exe: 
cannot find -lz
collect2: ld returned 1 exit status
make: *** [txt2zlib.exe] Error 1
c:\MinGW\bin\strip.exe: 'build/texk/web2c/luatex.exe': No such file
ls: build/texk/web2c/luatex.exe: No such file or directory

From luigi.scarso at gmail.com  Fri Nov 12 20:43:44 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 12 Nov 2010 20:43:44 +0100
Subject: [Dev-luatex] Luatex beta-0.64.0 --- Windows build failure?
In-Reply-To: <4CDD91E7.9010204@readytext.co.uk>
References: <mailman.5.1289559601.26831.dev-luatex@ntg.nl>
	<4CDD91E7.9010204@readytext.co.uk>
Message-ID: <AANLkTi=sTH29_8jiVnruO9v+JrLwPYbJeGXP48OLZLUM@mail.gmail.com>

On Fri, Nov 12, 2010 at 8:13 PM, Graham Douglas
<graham.douglas at readytext.co.uk> wrote:
> Hi Taco
>
> Just tried to build 0.64 beta on Windows Vista
> but it failed. Extract of build log below.
>
> Any ideas what is causing this and what I can do
> to fix it?
>
> Many thanks and best wishes
>
> Graham
>
> <snip>
> ------
> libtool: link: gcc -Wall -Wunused -Wimplicit -Wreturn-type
> -Wdeclaration-after-s
> tatement -Wno-unknown-pragmas -Wmissing-prototypes -Wmissing-declarations -g
> -O2
> ?-o txt2zlib.exe txt2zlib-txt2zlib.o ?-lz lib/lib.a
> /luatexbeta/build/texk/kpath
> sea/.libs/libkpathsea.a
> c:\MinGW\bin\..\lib\gcc\mingw32\3.4.5\..\..\..\..\mingw32\bin\ld.exe: cannot
> find -lz
^^^^^^^^^
Do you have libz ?


-- 
luigi

From graham.douglas at readytext.co.uk  Fri Nov 12 22:16:16 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Fri, 12 Nov 2010 21:16:16 +0000
Subject: [Dev-luatex] [***SPAM***] Re: Luatex beta-0.64.0 --- Windows build
	failure?
In-Reply-To: <AANLkTi=sTH29_8jiVnruO9v+JrLwPYbJeGXP48OLZLUM@mail.gmail.com>
References: <AANLkTi=sTH29_8jiVnruO9v+JrLwPYbJeGXP48OLZLUM@mail.gmail.com>
Message-ID: <4CDDAEA0.2080205@readytext.co.uk>

<snip>
 > ------
 > libtool: link: gcc -Wall -Wunused -Wimplicit -Wreturn-type
 > -Wdeclaration-after-s
 > tatement -Wno-unknown-pragmas -Wmissing-prototypes 
-Wmissing-declarations -g
 > -O2
 >  -o txt2zlib.exe txt2zlib-txt2zlib.o  -lz lib/lib.a
 > /luatexbeta/build/texk/kpath
 > sea/.libs/libkpathsea.a
 > c:\MinGW\bin\..\lib\gcc\mingw32\3.4.5\..\..\..\..\mingw32\bin\ld.exe: 
cannot
 > find -lz
^^^^^^^^^
Do you have libz ?


 > find -lz
^^^^^^^^^
Do you have libz ?


-- 
luigi
===========

Hi Luigi

I've built LuaTeX dozens of times under Vista since version 0.52 and not 
hit this one before --- is this a new dependency in LuaTeX?

Cheers

Graham













From hartmut_henkel at gmx.de  Fri Nov 12 23:31:17 2010
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Fri, 12 Nov 2010 23:31:17 +0100 (CET)
Subject: [Dev-luatex] [***SPAM***] Re: Luatex beta-0.64.0 --- Windows
 build failure?
In-Reply-To: <4CDDAEA0.2080205@readytext.co.uk>
References: <AANLkTi=sTH29_8jiVnruO9v+JrLwPYbJeGXP48OLZLUM@mail.gmail.com>
	<4CDDAEA0.2080205@readytext.co.uk>
Message-ID: <alpine.DEB.2.00.1011122324090.4446@hahepc1.hahe>

On Fri, 12 Nov 2010, Graham Douglas wrote:

> <snip>
> > ------
> > libtool: link: gcc -Wall -Wunused -Wimplicit -Wreturn-type
> > -Wdeclaration-after-s
> > tatement -Wno-unknown-pragmas -Wmissing-prototypes -Wmissing-declarations -g
> > -O2
> >  -o txt2zlib.exe txt2zlib-txt2zlib.o  -lz lib/lib.a

> Do you have libz ?
>
> Hi Luigi
>
> I've built LuaTeX dozens of times under Vista since version 0.52 and
> not hit this one before --- is this a new dependency in LuaTeX?

yes and no. New is the helper program txt2zlib (compressed bytecode
generator) for building luatex, and it should have relied on the zlib
coming with luatex (directory source/libs/zlib), but obviously it
instead looks for a system provided zlib. Difficult to check from here
now, as i'm not using win.

Regards, Hartmut

From luigi.scarso at gmail.com  Sat Nov 13 07:30:41 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Sat, 13 Nov 2010 07:30:41 +0100
Subject: [Dev-luatex] [***SPAM***] Re: Luatex beta-0.64.0 --- Windows
 build failure?
In-Reply-To: <4CDDAEA0.2080205@readytext.co.uk>
References: <AANLkTi=sTH29_8jiVnruO9v+JrLwPYbJeGXP48OLZLUM@mail.gmail.com>
	<4CDDAEA0.2080205@readytext.co.uk>
Message-ID: <AANLkTimcaUnHB03eB62r-h_7uHikHXLKt3D2m=A=1V+L@mail.gmail.com>

On Fri, Nov 12, 2010 at 10:16 PM, Graham Douglas
<graham.douglas at readytext.co.uk> wrote:
> <snip>
>> ------
>> libtool: link: gcc -Wall -Wunused -Wimplicit -Wreturn-type
>> -Wdeclaration-after-s
>> tatement -Wno-unknown-pragmas -Wmissing-prototypes -Wmissing-declarations
>> -g
>> -O2
>> ?-o txt2zlib.exe txt2zlib-txt2zlib.o ?-lz lib/lib.a
>> /luatexbeta/build/texk/kpath
>> sea/.libs/libkpathsea.a
>> c:\MinGW\bin\..\lib\gcc\mingw32\3.4.5\..\..\..\..\mingw32\bin\ld.exe:
>> cannot
>> find -lz
> ^^^^^^^^^
> Do you have libz ?
>
>
>> find -lz
> ^^^^^^^^^
> Do you have libz ?
>
>
> --
> luigi
> ===========
>
> Hi Luigi
>
> I've built LuaTeX dozens of times under Vista since version 0.52 and not hit
> this one before --- is this a new dependency in LuaTeX?
Oops, sorry, I didn't read enough lines
As hartmut said, libz should be that one from
source/libs/zlib,
so it seems that with mingw  we need to pass an extra switch to build.sh
I will check with my cross-compile chain .

-- 
luigi

From root at mail.boekplan.nl  Sat Nov 13 12:27:58 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat, 13 Nov 2010 12:27:58 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101113112758.8FF0B40067@mail.boekplan.nl>

------------------------------------------------------------------------
r3958 | hhenkel | 2010-11-12 23:57:13 +0100 (Fri, 12 Nov 2010) | 4 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/am/txt2zlib.am

after an additional reautoconf this should fix the -lz problem
reported at Fri, 12 Nov 2010:
[Dev-luatex] Luatex beta-0.64.0 --- Windows build failure?

------------------------------------------------------------------------
r3959 | taco | 2010-11-13 08:26:20 +0100 (Sat, 13 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/Makefile.in

autoreconf after zlib fix for txt2zlib

------------------------------------------------------------------------
r3960 | taco | 2010-11-13 08:34:49 +0100 (Sat, 13 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/writet1.w

another small writet1 fix

------------------------------------------------------------------------

From graham.douglas at readytext.co.uk  Sat Nov 13 15:29:37 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Sat, 13 Nov 2010 14:29:37 +0000
Subject: [Dev-luatex] [***SPAM***] Re: Luatex beta-0.64.0 --- Windows
 build failure?
In-Reply-To: <alpine.DEB.2.00.1011122324090.4446@hahepc1.hahe>
References: <alpine.DEB.2.00.1011122324090.4446@hahepc1.hahe>
Message-ID: <4CDEA0D1.50103@readytext.co.uk>

Hi Harmut

Just to confirm that the latest update has fully fixed the Windows build 
problem I experienced, many thanks indeed.

All the best

Graham

From root at mail.boekplan.nl  Sat Nov 13 16:27:39 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat, 13 Nov 2010 16:27:39 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101113152739.D0AC140067@mail.boekplan.nl>

------------------------------------------------------------------------
r3961 | hhenkel | 2010-11-13 12:59:05 +0100 (Sat, 13 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lepdflib.cc

new array:getString() and dict:lookupInt()

------------------------------------------------------------------------

From root at mail.boekplan.nl  Wed Nov 17 12:28:06 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed, 17 Nov 2010 12:28:06 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101117112806.92B414005B@mail.boekplan.nl>

------------------------------------------------------------------------
r3962 | taco | 2010-11-17 10:36:39 +0100 (Wed, 17 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luapeg/lpeg.c

get rid of a bad assert() (fix proposed by RI)

------------------------------------------------------------------------

From root at mail.boekplan.nl  Wed Nov 17 16:27:47 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed, 17 Nov 2010 16:27:47 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101117152747.44F6B4005B@mail.boekplan.nl>

------------------------------------------------------------------------
r3963 | taco | 2010-11-17 15:22:51 +0100 (Wed, 17 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

some paragraphs explaining what callbacks are (from Paul Isambert)

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Nov 19 12:28:09 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 19 Nov 2010 12:28:09 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101119112809.6CF5D40066@mail.boekplan.nl>

------------------------------------------------------------------------
r3964 | taco | 2010-11-19 10:55:57 +0100 (Fri, 19 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

fix a bug in the description of mplib.pen_info (found by Dan Luecking)

------------------------------------------------------------------------

From graham.douglas at readytext.co.uk  Sun Nov 21 13:46:52 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Sun, 21 Nov 2010 12:46:52 +0000
Subject: [Dev-luatex] Port of GraphViz and LuaGRAPH toolkit to Windows
Message-ID: <4CE914BC.3030304@readytext.co.uk>

Hi All

Apologies in advance for the long e-mail...

I'm wondering if any other Windows users/developers
would find the following helpful/useful/interesting... if so I'd be 
delighted to share the code etc for others to explore --- and improve! 
Subject to making sure that distributing this work is OK in terms of the 
GraphViz and LuaGRAPH toolkit licences. I need to check that.

I'm giving a bit of background info, as it may be of interest
to other developers -- perhaps I can expand this to add to a Wiki
somewhere? Any suggestions where to put it (if of interest) would
be welcome.

Inspired by Luigi's brilliant work on luatex lunatic
--- which still amazes me every time I look at it --
I too wanted to use GraphViz (but on Windows) to probe LuaTeX
node structures. Why should the Linux guys have all the fun ;-)))

However, I could not get the DLLs shipped with the GraphViz
distribution to work (for me anyway). Not saying they won't
work just that I could not get them to work for me.
I decided to build a fresh port of GraphViz for Windows, with a binding 
to Lua using the LuaGRAPH toolkit by Herbert Leuwer.

In summary, I took the Visual Studio solution shipped with
GraphViz source code distribution and modified it to build
.lib files and then compile everything into a single DLL, including
the essential core plug-ins. I have excluded a number of libraries
including Cairo etc which I didn't want or need for my purposes. I just
wanted the core GraphViz functionality scriptable by the LuaGRAPH 
toolkit and spitting out a PostScript file, which I convert to PDF
with GhostScript.

The result is a single DLL combining the LuaGRAPH toolkit
and most of the core GraphViz, giving access to the full Lua binding 
written by Herbert Leuwer. Anyone who has looked at the GraphViz source
will know that it is designed to dynamically load lots of things
from external libraries (DLLs on Windows). Because the core plug-ins are 
now built into in a single DLL I had to slightly modify the
initialisation and library-loading done via LuaGRAPH toolkit
--- turned out to be just a few lines of C, modifying the
LuaGRAPH toolkit function void gv_init(void) using the gvc
function gvconfig_plugin_install_from_library

I have tested the DLL using examples on the GraphViz site and they seem 
to work OK.

So, after this long explanation my question is would anyone else
who is working on Windows have any use for this? If so, after checking
the licences and some more testing.... I'd be delighted
to release it (but where!!!) for others to use "as is" with the note 
that it is quite experimental and that I don't intend to support it.

If anyone has written Lua code for the LuaGRAPH toolkit as a way of
inspecting LuaTeX nodes I'd be extremely grateful to have some small
samples with which to further test the library.

I'd be happy to receive the community's view on whether this
Windows port of GraphViz and LuaGRAPH toolkit could be useful
to anyone --- and I'd be very grateful for Lua/LuaTeX code to
test it with :-)

LuaTeX has provided me with a fasinating hobby and I'd like to
give a little bit back, where I can.

If anyone wants a copy of the DLL (currently called "luagraph.dll) for 
testing, please get in contact: it is a DEBUG version weighing in at 
about 1.5 MB.

Best wishes to all

Graham










From graham.douglas at readytext.co.uk  Mon Nov 22 15:54:46 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Mon, 22 Nov 2010 14:54:46 +0000
Subject: [Dev-luatex] Hooking into the page builder?
Message-ID: <4CEA8436.1040308@readytext.co.uk>

Hi All

I'd like to use GraphViz to create a graph of the entire
node structure of a (simple) page. Keeping the page simple
and just for experimentation. Not trying to change any values
of node lists, just to output values and structures etc.

Before I get too far, is it safe/possible to do this?
If so, would anyone have some pseudo code I can use to
get me started in the right direction...?

Many thanks in advance for suggestions etc.

Warm regards

Graham





From taco at elvenkind.com  Mon Nov 22 16:04:49 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 22 Nov 2010 16:04:49 +0100
Subject: [Dev-luatex] Hooking into the page builder?
In-Reply-To: <4CEA8436.1040308@readytext.co.uk>
References: <4CEA8436.1040308@readytext.co.uk>
Message-ID: <4CEA8691.808@elvenkind.com>

On 11/22/2010 03:54 PM, Graham Douglas wrote:
> Hi All
>
> I'd like to use GraphViz to create a graph of the entire
> node structure of a (simple) page. Keeping the page simple
> and just for experimentation. Not trying to change any values
> of node lists, just to output values and structures etc.
>
> Before I get too far, is it safe/possible to do this?
> If so, would anyone have some pseudo code I can use to
> get me started in the right direction...?
>
> Many thanks in advance for suggestions etc.

The simplest is:

callback.register('pre_output_filter', function (head)
   ...
   return head
end)

This callback does not replace any code, so you can do whatever you
want without interfering, as long as you remember to pass back
'head'. This callback runs just before box255 is packaged for
the output routine, btw.

Best wishes,
Taco


From root at mail.boekplan.nl  Mon Nov 22 16:27:46 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon, 22 Nov 2010 16:27:46 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101122152746.C129340071@mail.boekplan.nl>

------------------------------------------------------------------------
r3965 | taco | 2010-11-22 13:38:45 +0100 (Mon, 22 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lcallbacklib.c
   M /trunk/source/texk/web2c/luatexdir/ptexlib.h

create a debug version of callback_defined()

------------------------------------------------------------------------

From patrick at gundla.ch  Mon Nov 22 20:02:45 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Mon, 22 Nov 2010 20:02:45 +0100
Subject: [Dev-luatex] Hooking into the page builder?
In-Reply-To: <4CEA8436.1040308@readytext.co.uk>
References: <4CEA8436.1040308@readytext.co.uk>
Message-ID: <40CA12D0-266B-4A9F-882B-559B9D7C3219@gundla.ch>

Hi Graham,

you know 

https://gist.github.com/556247

? This is a backend for writing the nodelist to a gv file, perhaps you can use (parts of) it?

Patrick


From graham.douglas at readytext.co.uk  Mon Nov 22 16:20:48 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Mon, 22 Nov 2010 15:20:48 +0000
Subject: [Dev-luatex] Hooking into the page builder?
In-Reply-To: <4CEA8691.808@elvenkind.com>
References: <4CEA8436.1040308@readytext.co.uk> <4CEA8691.808@elvenkind.com>
Message-ID: <4CEA8A50.8010506@readytext.co.uk>

Taco Hoekwater wrote:
> On 11/22/2010 03:54 PM, Graham Douglas wrote:
>> Hi All
>>
>> I'd like to use GraphViz to create a graph of the entire
>> node structure of a (simple) page. Keeping the page simple
>> and just for experimentation. Not trying to change any values
>> of node lists, just to output values and structures etc.
>>
>> Before I get too far, is it safe/possible to do this?
>> If so, would anyone have some pseudo code I can use to
>> get me started in the right direction...?
>>
>> Many thanks in advance for suggestions etc.
> 
> The simplest is:
> 
> callback.register('pre_output_filter', function (head)
>   ...
>   return head
> end)
> 
> This callback does not replace any code, so you can do whatever you
> want without interfering, as long as you remember to pass back
> 'head'. This callback runs just before box255 is packaged for
> the output routine, btw.
> 
> Best wishes,
> Taco
> 

Many thanks Taco, much appreciated, as always.

Warm regards

Graham

From root at mail.boekplan.nl  Wed Nov 24 12:28:04 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed, 24 Nov 2010 12:28:04 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101124112804.665FC40069@mail.boekplan.nl>

------------------------------------------------------------------------
r3966 | taco | 2010-11-24 08:26:17 +0100 (Wed, 24 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

manual fixes from Paul Isambert

------------------------------------------------------------------------

From root at mail.boekplan.nl  Wed Nov 24 16:27:50 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed, 24 Nov 2010 16:27:50 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101124152750.885D040060@mail.boekplan.nl>

------------------------------------------------------------------------
r3967 | taco | 2010-11-24 14:41:45 +0100 (Wed, 24 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/tounicode.w

fix bug #512

------------------------------------------------------------------------
r3968 | taco | 2010-11-24 14:47:20 +0100 (Wed, 24 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/parsettfatt.c

apply the patch in bug #516

------------------------------------------------------------------------

From root at mail.boekplan.nl  Thu Nov 25 12:27:29 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Thu, 25 Nov 2010 12:27:29 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101125112729.638BA4005B@mail.boekplan.nl>

------------------------------------------------------------------------
r3969 | taco | 2010-11-25 09:20:58 +0100 (Thu, 25 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

more corrections from Paul Isambert

------------------------------------------------------------------------
r3970 | taco | 2010-11-25 12:02:42 +0100 (Thu, 25 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/lua/lkpselib.c

change must-exist to mustexist for kpse.lookup to remove the need for ["must-exist"]

------------------------------------------------------------------------
r3971 | taco | 2010-11-25 12:15:15 +0100 (Thu, 25 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c

fix a bug in node.first_character

------------------------------------------------------------------------

From root at mail.boekplan.nl  Thu Nov 25 16:27:25 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Thu, 25 Nov 2010 16:27:25 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101125152725.B2AC44005B@mail.boekplan.nl>

------------------------------------------------------------------------
r3972 | taco | 2010-11-25 15:20:37 +0100 (Thu, 25 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/tex/mlist.w
   M /trunk/source/texk/web2c/luatexdir/tex/texmath.w

implement #509 (but differently)

------------------------------------------------------------------------
r3973 | taco | 2010-11-25 15:31:12 +0100 (Thu, 25 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

forgot to document accent noad subtypes

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Nov 26 12:28:04 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 26 Nov 2010 12:28:04 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101126112804.6D8BD4005B@mail.boekplan.nl>

------------------------------------------------------------------------
r3974 | taco | 2010-11-26 09:30:43 +0100 (Fri, 26 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/tex/texmath.w

change \Umathaccent bot to \Umathaccent bottom

------------------------------------------------------------------------
r3975 | taco | 2010-11-26 10:57:38 +0100 (Fri, 26 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

new corrections from Paul

------------------------------------------------------------------------
r3976 | taco | 2010-11-26 11:22:27 +0100 (Fri, 26 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c

rename node.first_character to node.first_glyph

------------------------------------------------------------------------
r3977 | taco | 2010-11-26 11:26:50 +0100 (Fri, 26 Nov 2010) | 3 lines
Changed paths:
   M /trunk/manual/fdata.lua
   M /trunk/manual/functionref.pdf
   M /trunk/manual/functionref.tex
   M /trunk/manual/luatexref-t.pdf
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c

update manual pdfs for first_character, and remove an extra
newline after the warning

------------------------------------------------------------------------
r3978 | taco | 2010-11-26 11:31:25 +0100 (Fri, 26 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luatex.c

bump to version to 0.65.0 (because of incompatible changes)

------------------------------------------------------------------------
r3979 | taco | 2010-11-26 11:40:44 +0100 (Fri, 26 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

document must-exist => mustexist change

------------------------------------------------------------------------
r3980 | taco | 2010-11-26 11:45:54 +0100 (Fri, 26 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/functionref.pdf
   M /trunk/manual/functionref.tex

correct description of \latelua

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Nov 26 16:27:49 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 26 Nov 2010 16:27:49 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101126152749.4CF4C40067@mail.boekplan.nl>

------------------------------------------------------------------------
r3981 | taco | 2010-11-26 13:26:44 +0100 (Fri, 26 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/texmath.w

may as well add a deprecation warning to \Umathbotaccent and \Umathaccents

------------------------------------------------------------------------
r3982 | taco | 2010-11-26 13:31:25 +0100 (Fri, 26 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/kpathsea/db.c

fix for kpse.lookup("plain", {all = true})

------------------------------------------------------------------------
r3983 | taco | 2010-11-26 14:08:23 +0100 (Fri, 26 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/luafont.w
   M /trunk/source/texk/web2c/luatexdir/tex/mlist.w

apply updated patch from #520

------------------------------------------------------------------------
r3984 | taco | 2010-11-26 15:15:17 +0100 (Fri, 26 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/mlist.w

attempt to do something about #507

------------------------------------------------------------------------
r3985 | taco | 2010-11-26 16:08:32 +0100 (Fri, 26 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/mlist.w

fix #489

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Nov 26 22:27:57 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 26 Nov 2010 22:27:57 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101126212757.A833B40067@mail.boekplan.nl>

------------------------------------------------------------------------
r3986 | taco | 2010-11-26 16:38:14 +0100 (Fri, 26 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c

fix bug #518 (note: removes the error reporting from check_isnode)

------------------------------------------------------------------------
r3987 | taco | 2010-11-26 17:12:35 +0100 (Fri, 26 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c

previous commit was totally unsafe. Use pdftex_fail, for now.

------------------------------------------------------------------------
r3988 | taco | 2010-11-26 17:14:43 +0100 (Fri, 26 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/functionref.pdf

regenerated after context beta update.

------------------------------------------------------------------------

From root at mail.boekplan.nl  Sat Nov 27 12:27:49 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat, 27 Nov 2010 12:27:49 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101127112749.3BEEF40067@mail.boekplan.nl>

------------------------------------------------------------------------
r3989 | taco | 2010-11-27 11:40:38 +0100 (Sat, 27 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/utils/synctex.c

fix synctex support

------------------------------------------------------------------------
r3990 | taco | 2010-11-27 11:41:18 +0100 (Sat, 27 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/utils/synctex.c

turn off synctex debugging

------------------------------------------------------------------------

From heiko.oberdiek at googlemail.com  Sun Nov 28 04:14:34 2010
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Sun, 28 Nov 2010 04:14:34 +0100
Subject: [Dev-luatex] incompatible \meaning of \mathchar command
Message-ID: <20101128031433.GA12843@oberdiek.my-fqdn.de>

Hello,

\meaning produces a different output for luatex for
commands, defined by \mathchardef, test file for
iniTeX/plain/latex:

  \catcode`\{=1
  \catcode`\}=2
  \mathchardef\x=0 %
  \immediate\write16{[\meaning\x]}
  \csname @@end\endcsname\end

Result for "luatex --ini":
  [\mathchar"0000]
All other TeX compilers (tex/pdftex/xetex) don't
print leading zeros:
  [\mathchar"0]

Is this on purpose or an accident/bug?

Yours sincerely
  Heiko Oberdiek

From heiko.oberdiek at googlemail.com  Sun Nov 28 04:22:50 2010
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Sun, 28 Nov 2010 04:22:50 +0100
Subject: [Dev-luatex] small fix for manual tex.extraprimitives
Message-ID: <20101128032249.GA13097@oberdiek.my-fqdn.de>

Hello,

section "4.12.11.2 tex.extraprimitives" lists the name
of the primitives for "tex":
  vskip write vsize   unhcopy output - / unskip

The extra space between `vsize' (\vsize) and `unhcopy' (\unhcopy)
probably means ` ' (\ ). Perhaps the manual can here use
a visible space (\textvisiblespace in LaTeX).

Yours sincerely
  Heiko Oberdiek

From taco at elvenkind.com  Sun Nov 28 09:12:53 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 28 Nov 2010 09:12:53 +0100
Subject: [Dev-luatex] small fix for manual tex.extraprimitives
In-Reply-To: <20101128032249.GA13097@oberdiek.my-fqdn.de>
References: <20101128032249.GA13097@oberdiek.my-fqdn.de>
Message-ID: <4CF20F05.6030202@elvenkind.com>

On 11/28/2010 04:22 AM, Heiko Oberdiek wrote:
> Hello,
>
> section "4.12.11.2 tex.extraprimitives" lists the name
> of the primitives for "tex":
>    vskip write vsize   unhcopy output - / unskip
>
> The extra space between `vsize' (\vsize) and `unhcopy' (\unhcopy)
> probably means ` ' (\ ). Perhaps the manual can here use
> a visible space (\textvisiblespace in LaTeX).

Thank you, changed. I also changed it so that the separate
lists of primitives are now sorted alphabetically.

Best wishes,
Taco

From taco at elvenkind.com  Sun Nov 28 09:29:10 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 28 Nov 2010 09:29:10 +0100
Subject: [Dev-luatex] incompatible \meaning of \mathchar command
In-Reply-To: <20101128031433.GA12843@oberdiek.my-fqdn.de>
References: <20101128031433.GA12843@oberdiek.my-fqdn.de>
Message-ID: <4CF212D6.1090007@elvenkind.com>

On 11/28/2010 04:14 AM, Heiko Oberdiek wrote:
> Hello,
>
> \meaning produces a different output for luatex for
> commands, defined by \mathchardef, test file for
> iniTeX/plain/latex:
>
>    \catcode`\{=1
>    \catcode`\}=2
>    \mathchardef\x=0 %
>    \immediate\write16{[\meaning\x]}
>    \csname @@end\endcsname\end
>
> Result for "luatex --ini":
>    [\mathchar"0000]
> All other TeX compilers (tex/pdftex/xetex) don't
> print leading zeros:
>    [\mathchar"0]
>
> Is this on purpose or an accident/bug?

By accident, it was a side-effect of the math reimplementation
in luatex 0.35. Corrected now.

Best wishes,
Taco

From root at mail.boekplan.nl  Sun Nov 28 12:27:50 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun, 28 Nov 2010 12:27:50 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101128112751.31D6F4006B@mail.boekplan.nl>

------------------------------------------------------------------------
r3991 | taco | 2010-11-28 09:08:07 +0100 (Sun, 28 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

clean up the primitives table

------------------------------------------------------------------------
r3992 | taco | 2010-11-28 09:24:21 +0100 (Sun, 28 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/mathcodes.w

restore backward compatibity for \meaning\mathchar

------------------------------------------------------------------------
r3993 | taco | 2010-11-28 10:09:19 +0100 (Sun, 28 Nov 2010) | 4 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.w

Fix an assert on 
  local Head = node.copy_list(head)
  tex.linebreak(Head) 

------------------------------------------------------------------------
r3994 | taco | 2010-11-28 10:38:01 +0100 (Sun, 28 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfpage.w

fix bug #525

------------------------------------------------------------------------
r3995 | taco | 2010-11-28 10:49:37 +0100 (Sun, 28 Nov 2010) | 3 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.w

ease the restriction on linebreak_filter: at least one hbox should be returned,
but that is not necessarily the last node (this fixes bug #526)

------------------------------------------------------------------------
r3996 | taco | 2010-11-28 11:26:06 +0100 (Sun, 28 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/texfont.w

fix a memcpy() overrun in copy_font()

------------------------------------------------------------------------
r3997 | taco | 2010-11-28 11:37:21 +0100 (Sun, 28 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/texfont.w

copy_font forgot to update the charinfo count, causing bug #486

------------------------------------------------------------------------

From taco at elvenkind.com  Sun Nov 28 16:19:09 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 28 Nov 2010 16:19:09 +0100
Subject: [Dev-luatex] Bug#441595: (fwd) Bug#441595: not all libraries
 are	customized, there is room for improvement
In-Reply-To: <20101128125415.GB22857@preusse-16223.user.cis.dfn.de>
References: <20091219112139.GV23825@gamma.logic.tuwien.ac.at>
	<4B2CB7FE.7060208@elvenkind.com>
	<20091219112838.GY23825@gamma.logic.tuwien.ac.at>
	<4B2CBAC3.1020508@elvenkind.com>
	<20101128125415.GB22857@preusse-16223.user.cis.dfn.de>
Message-ID: <4CF272ED.8020807@elvenkind.com>


Hi Hilmar,

On 11/28/2010 01:54 PM, Hilmar Preusse wrote:
>>
>> luafilesystem: that local patch will go away soon (it is possible
>>    to slide the new functions in elsewhere, where they are not
>>    interfering with the upstream).
>>
> The patch is still in the lualib used by luatex. Did you made already
> a decision if that code is needed (and should be pushed upstream to
> the lua project)?

Thank you for reminding me, I had completely forgotten about this :(

I now am in the process of upgrading luatex to use luafilesystem 1.5.0,
and I will move most of the extra functionality to a different source
file, as I wrote above.

Nevertheless, there are two change sets that will remain in my version
of the lfs.c file: one portability bug fix and one extension. Both of
these are interesting enough to go upstream, in my opinion.

The portability fix is in get_dir(), where the stock lfs version
assumes a glibc-style runtime library that calls malloc() automatically
inside getcwd(). I got a compilation failure report on that, for
the Sun Studio compiler on Solaris 10 Sparc.

The extension is an extra field thats is retunred by lfs.attributes(),
named 'permissions'. This represents the file permissions as a simple
9-letter string (it uses "r", "w", and "x" only).

Best wishes,
Taco

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: lfs.c.diff
URL: <http://www.ntg.nl/pipermail/dev-luatex/attachments/20101128/933b96c9/attachment.ksh>

From root at mail.boekplan.nl  Sun Nov 28 16:27:46 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun, 28 Nov 2010 16:27:46 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101128152746.DE1354006B@mail.boekplan.nl>

------------------------------------------------------------------------
r3998 | taco | 2010-11-28 13:30:00 +0100 (Sun, 28 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

manual fixes from Paul Isambert

------------------------------------------------------------------------
r3999 | taco | 2010-11-28 14:51:00 +0100 (Sun, 28 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/textoken.w

make scan_keyword() save the align_state, to fix bug 503. 

------------------------------------------------------------------------
r4000 | taco | 2010-11-28 14:58:35 +0100 (Sun, 28 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/commands.h

correct small documentation bug in a comment

------------------------------------------------------------------------

From graham.douglas at readytext.co.uk  Sun Nov 28 19:05:14 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Sun, 28 Nov 2010 18:05:14 +0000
Subject: [Dev-luatex] [***SPAM***] Traversing node list structures
Message-ID: <4CF299DA.9020803@readytext.co.uk>

Hi Taco

Apologies if this is at all off-topic but I'd like
to find out if the following is possible...

Suppose I have some text in a \vbox {} say

\setbox0 = \vbox{Some text that will be broken into lines...}

I would like to access the node list of this \vbox
and walk the node tree to emit (PostScript) code that
will create an exact rendering of that typeset text, giving the
same visual result you would see if the \vbox was placed
directly into the main PDF generated by LuaTeX.

I'm exploring node structures (using my GraphViz
port and Patrick's viznodelist tool) but (as yet)
don't understand how to traverse the nodelist such
that you can output the typeset result.

In particular, gaining access to (for example) the
final set values of glue (skip) which occurs between
words.

This is a slightly unusual application but it would
be much appreciated if you suggest how to go about
doing this. In particular:

the way you would traverse the node tree (which links to
follow) to get the glyphs output in the right order
and how to access or calculate the glue between words.

Thank you as always for all your time and endless patience
with so many questions.

Very best wishes

Graham













From pragma at wxs.nl  Sun Nov 28 19:22:10 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 28 Nov 2010 19:22:10 +0100
Subject: [Dev-luatex] [***SPAM***] Traversing node list structures
In-Reply-To: <4CF299DA.9020803@readytext.co.uk>
References: <4CF299DA.9020803@readytext.co.uk>
Message-ID: <4CF29DD2.3070607@wxs.nl>

On 28-11-2010 7:05, Graham Douglas wrote:
> Hi Taco
>
> Apologies if this is at all off-topic but I'd like
> to find out if the following is possible...
>
> Suppose I have some text in a \vbox {} say
>
> \setbox0 = \vbox{Some text that will be broken into lines...}

at the lua end you can access that box:

tex.box[0] (with width, height, depth, list etc fields)


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From graham.douglas at readytext.co.uk  Sun Nov 28 19:40:13 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Sun, 28 Nov 2010 18:40:13 +0000
Subject: [Dev-luatex] [***SPAM***] Re: [***SPAM***] Traversing node list
	structures
In-Reply-To: <4CF29DD2.3070607@wxs.nl>
References: <4CF29DD2.3070607@wxs.nl>
Message-ID: <4CF2A20D.5050900@readytext.co.uk>

Thanks Hans.

Sure, I've been doing this to generate the GraphViz
diagrams etc plus hooking into various callbacks etc.
What I don't yet quite understand is the correct navigation or
link path to follow through the node structures and the best way to 
access or calculate glue (set) values for things like skip between words.

All this reflects my currently hazy understanding of the
liks + connections in the node graph.

For example, see the attached PDF of the graph arising from
a saimple example:

\setbox0\vbox{Hello to Lua\TeX\  and another \vbox {here}}

Even with this simple example the node traversal
to render in the right order seems quite complex.

Eg the TeX bit --- looping through the correct path
to get the glyph order "TEX"

For sure, you can work it out by following the
graph, but what I'm interested to know is what the
general case traversal algorithm would look like?

Apologies for these fuzzy questions but this is
early days for me with node traversal :-)

Warm wishes

Graham

-------------- next part --------------
A non-text attachment was scrubbed...
Name: out.pdf
Type: application/pdf
Size: 13328 bytes
Desc: not available
URL: <http://www.ntg.nl/pipermail/dev-luatex/attachments/20101128/5b702e1e/attachment-0001.pdf>

From pragma at wxs.nl  Sun Nov 28 20:00:58 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 28 Nov 2010 20:00:58 +0100
Subject: [Dev-luatex] [***SPAM***] Traversing node list structures
In-Reply-To: <4CF2A20D.5050900@readytext.co.uk>
References: <4CF29DD2.3070607@wxs.nl> <4CF2A20D.5050900@readytext.co.uk>
Message-ID: <4CF2A6EA.7090307@wxs.nl>

On 28-11-2010 7:40, Graham Douglas wrote:
> Thanks Hans.
>
> Sure, I've been doing this to generate the GraphViz
> diagrams etc plus hooking into various callbacks etc.
> What I don't yet quite understand is the correct navigation or
> link path to follow through the node structures and the best way to
> access or calculate glue (set) values for things like skip between words.

that is just a multiplication factor; for the precise dealing of it you 
might want to look into the backend code (take the dvi related code at 
that is rather simple and discussed in the tex the program book as well; 
it might look more complex due to hz and protruding)

> All this reflects my currently hazy understanding of the
> liks + connections in the node graph.
>
> For example, see the attached PDF of the graph arising from
> a saimple example:
>
> \setbox0\vbox{Hello to Lua\TeX\ and another \vbox {here}}
>
> Even with this simple example the node traversal
> to render in the right order seems quite complex.

in general you loop recursively, i.e. in a typeset box you need to 
follow the list in hlist/vlist nodes; in backend related operations you 
also might need to go into the leader part of a rule

of course whatsits are sort if special as they can represent anything

it all depends on what you want to do but

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From graham.douglas at readytext.co.uk  Sun Nov 28 21:00:33 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Sun, 28 Nov 2010 20:00:33 +0000
Subject: [Dev-luatex] [***SPAM***] Re: [***SPAM***] Traversing node list
	structures
In-Reply-To: <4CF2A6EA.7090307@wxs.nl>
References: <4CF29DD2.3070607@wxs.nl> <4CF2A20D.5050900@readytext.co.uk>
	<4CF2A6EA.7090307@wxs.nl>
Message-ID: <4CF2B4E1.7000001@readytext.co.uk>

Hans Hagen wrote:
> On 28-11-2010 7:40, Graham Douglas wrote:
>> Thanks Hans.
>>
>> Sure, I've been doing this to generate the GraphViz
>> diagrams etc plus hooking into various callbacks etc.
>> What I don't yet quite understand is the correct navigation or
>> link path to follow through the node structures and the best way to
>> access or calculate glue (set) values for things like skip between words.
> 
> that is just a multiplication factor; for the precise dealing of it you 
> might want to look into the backend code (take the dvi related code at 
> that is rather simple and discussed in the tex the program book as well; 
> it might look more complex due to hz and protruding)


 > in general you loop recursively, i.e. in a typeset box you need to
 > follow the list in hlist/vlist nodes; in backend related operations 
you also might need to go into the leader part of a rule

===========

Thanks Hans. For sure there is a lot of recursion
here, but I just need to work out the order
of traversal, when you recurse and once you
get back to the top of each recursion
where you go next, to do more recursion etc.

What I was also wondering is whether the final set value of the glue
is directly available, as was determined by LuaTeX. For example, page 89
of the beta 0.65 manual Taco gives an interesting example

=======
node.dimensions(<number> glue_set, <number> glue_sign,
<number> glue_order, <node> n, <node> t, <string> dir)

This calling method takes glue settings into account and is especially 
useful for finding the actual width
of a sublist of nodes that are already boxed
========

So I was curious to know if it is possible to get access to the
glue set values as you traverse the list. Simplistically, as you
traverse the list:

....
see glpyhs (width, height, depth)
--> emit PostScript to place glyph
see interword skip (actual amount)
--> emit PostScript to move by skip (or shift or kern)
see glyphs
etc

So, all I want to do is traverse the node list
and emit PostScript code to place glyphs and
do skips/kerns/shifts etc to create a copy
of the typeset text as would be placed in the
final LuaTeX PDF

Really just a toy exercise (no real application)
through which I can gain understanding. For sure the other node types
etc would need handling but I'm just interested
(for now) in emitting PostScript to generate an
exact copy of the typeset \vbox {} etc, as
a way to understand the world of nodes etc.

The final PostScript would just be made into a PDF
for visual comparison.

Many thanks and apologies if my explanations are
unclear or confused (both likely!)

Best wishes

Graham




From patrick at gundla.ch  Sun Nov 28 21:35:03 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sun, 28 Nov 2010 21:35:03 +0100
Subject: [Dev-luatex] Traversing node list structures
In-Reply-To: <4CF299DA.9020803@readytext.co.uk>
References: <4CF299DA.9020803@readytext.co.uk>
Message-ID: <3EC788DD-2EA2-4703-A860-405E30C9C5DF@gundla.ch>



> In particular, gaining access to (for example) the
> final set values of glue (skip) which occurs between
> words.

the hlists and vlists have

glue_order 
glue_set
glue_sign

I am guessing that you only have to multiply list.glue_set with the data stored in the glue_spec nodes of that list (spec.width) if the list.glue_order is equal to the spec.*_order in the glue_spec node. The other cases are left to you as an exercise :)

Patrick


From taco at elvenkind.com  Sun Nov 28 21:38:31 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 28 Nov 2010 21:38:31 +0100
Subject: [Dev-luatex] Traversing node list structures
In-Reply-To: <3EC788DD-2EA2-4703-A860-405E30C9C5DF@gundla.ch>
References: <4CF299DA.9020803@readytext.co.uk>
	<3EC788DD-2EA2-4703-A860-405E30C9C5DF@gundla.ch>
Message-ID: <4CF2BDC7.6020209@elvenkind.com>

On 11/28/2010 09:35 PM, Patrick Gundlach wrote:
>
>
>> In particular, gaining access to (for example) the final set values
>> of glue (skip) which occurs between words.
>
> the hlists and vlists have
>
> glue_order glue_set glue_sign
>
> I am guessing that you only have to multiply list.glue_set with the
> data stored in the glue_spec nodes of that list (spec.width) if the
> list.glue_order is equal to the spec.*_order in the glue_spec node.
> The other cases are left to you as an exercise :)

Thanks Patrick :)

Best wishes,
Taco

From graham.douglas at readytext.co.uk  Sun Nov 28 22:06:24 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Sun, 28 Nov 2010 21:06:24 +0000
Subject: [Dev-luatex] [***SPAM***] Re:  Traversing node list structures
In-Reply-To: <3EC788DD-2EA2-4703-A860-405E30C9C5DF@gundla.ch>
References: <3EC788DD-2EA2-4703-A860-405E30C9C5DF@gundla.ch>
Message-ID: <4CF2C450.30000@readytext.co.uk>

Huge thanks to everyone for their help and advice.
Much appreciated.

Now, off to do those exercises... ;-)

Warm wishes

Graham


From root at mail.boekplan.nl  Sun Nov 28 22:27:52 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun, 28 Nov 2010 22:27:52 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101128212752.1EC174006B@mail.boekplan.nl>

------------------------------------------------------------------------
r4001 | taco | 2010-11-28 16:49:46 +0100 (Sun, 28 Nov 2010) | 3 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/Makefile.in
   M /trunk/source/texk/web2c/luatexdir/am/libluatex.am
   A /trunk/source/texk/web2c/luatexdir/lua/llfslibext.c
   M /trunk/source/texk/web2c/luatexdir/lua/luastuff.w
   M /trunk/source/texk/web2c/luatexdir/lua/luatex-api.h
   M /trunk/source/texk/web2c/luatexdir/luafilesystem/Makefile
   M /trunk/source/texk/web2c/luatexdir/luafilesystem/README
   M /trunk/source/texk/web2c/luatexdir/luafilesystem/doc/us/index.html
   M /trunk/source/texk/web2c/luatexdir/luafilesystem/doc/us/manual.html
   M /trunk/source/texk/web2c/luatexdir/luafilesystem/src/lfs.c
   M /trunk/source/texk/web2c/luatexdir/luafilesystem/src/lfs.def
   M /trunk/source/texk/web2c/luatexdir/luafilesystem/tests/test.lua

update to lfs 1.5.0, and move the extra luatex lfs functions to a 
new C file (lua/llfslibext.c)

------------------------------------------------------------------------
r4002 | oneiros | 2010-11-28 18:55:28 +0100 (Sun, 28 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/llfslibext.c

fix svn:keywords

------------------------------------------------------------------------

From hille42 at web.de  Sun Nov 28 13:54:15 2010
From: hille42 at web.de (Hilmar Preusse)
Date: Sun, 28 Nov 2010 13:54:15 +0100
Subject: [Dev-luatex] Bug#441595: (fwd) Bug#441595: not all libraries
 are	customized, there is room for improvement
In-Reply-To: <4B2CBAC3.1020508@elvenkind.com>
References: <20091219112139.GV23825@gamma.logic.tuwien.ac.at>
	<4B2CB7FE.7060208@elvenkind.com>
	<20091219112838.GY23825@gamma.logic.tuwien.ac.at>
	<4B2CBAC3.1020508@elvenkind.com>
Message-ID: <20101128125415.GB22857@preusse-16223.user.cis.dfn.de>

On 19.12.09 Taco Hoekwater (taco at elvenkind.com) wrote:
> Norbert Preining wrote:

Dear Taco,

http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=441595#47

> >And the advantage for you is that there are less changes if you
> >incorporate new versions of upstream libraries.
> 
> But that is certainly true. Here is my opinion on those patches:
> 
> luafilesystem: that local patch will go away soon (it is possible
>   to slide the new functions in elsewhere, where they are not
>   interfering with the upstream).
> 
The patch is still in the lualib used by luatex. Did you made already
a decision if that code is needed (and should be pushed upstream to
the lua project)?

Many thanks,
  Hilmar
-- 
sigmentation fault

From hille42 at web.de  Sun Nov 28 17:10:42 2010
From: hille42 at web.de (Hilmar Preusse)
Date: Sun, 28 Nov 2010 17:10:42 +0100
Subject: [Dev-luatex] Bug#441595: (fwd) Bug#441595: not all libraries
 are	customized, there is room for improvement
In-Reply-To: <4CF272ED.8020807@elvenkind.com>
References: <20091219112139.GV23825@gamma.logic.tuwien.ac.at>
	<4B2CB7FE.7060208@elvenkind.com>
	<20091219112838.GY23825@gamma.logic.tuwien.ac.at>
	<4B2CBAC3.1020508@elvenkind.com>
	<20101128125415.GB22857@preusse-16223.user.cis.dfn.de>
	<4CF272ED.8020807@elvenkind.com>
Message-ID: <20101128161042.GA8335@preusse-16223.user.cis.dfn.de>

On 28.11.10 Taco Hoekwater (taco at elvenkind.com) wrote:
> On 11/28/2010 01:54 PM, Hilmar Preusse wrote:

Hi,

> >>luafilesystem: that local patch will go away soon (it is possible
> >>   to slide the new functions in elsewhere, where they are not
> >>   interfering with the upstream).
> >>
> >The patch is still in the lualib used by luatex. Did you made already
> >a decision if that code is needed (and should be pushed upstream to
> >the lua project)?
> 
> Thank you for reminding me, I had completely forgotten about this :(
> 
Many thanks for fast response! I fowarded your E-Mail to the lua
maintainer of Debian.

H.
-- 
sigmentation fault

From root at mail.boekplan.nl  Mon Nov 29 12:28:05 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon, 29 Nov 2010 12:28:05 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101129112805.CCE944006E@mail.boekplan.nl>

------------------------------------------------------------------------
r4003 | taco | 2010-11-29 11:26:37 +0100 (Mon, 29 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

document what actually happens when discretionaries and ligatures are combined

------------------------------------------------------------------------

From patrick at gundla.ch  Mon Nov 29 12:42:36 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Mon, 29 Nov 2010 12:42:36 +0100
Subject: [Dev-luatex] Traversing node list structures
In-Reply-To: <4CF299DA.9020803@readytext.co.uk>
References: <4CF299DA.9020803@readytext.co.uk>
Message-ID: <9899CEB4-E93E-49F9-BA4D-F1268F78362A@gundla.ch>

Already answered in a private mail, but for the archive and others to correct the answer.


> 
> the way you would traverse the node tree (which links to
> follow) to get the glyphs output in the right order
> 


I _think_ that the right order is

loop over head.next
 if current_node == hlist or vlist then loop over head.list end
 do something with current node
end loop


Additional places to recurse into, depending on application:
* disc nodes (components)
* leader part of glue
* sub_box and sub_mlist subnodes (?)
* box_left, box_right in local_par node


Patrick



From root at mail.boekplan.nl  Mon Nov 29 16:27:45 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon, 29 Nov 2010 16:27:45 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101129152746.160FB40073@mail.boekplan.nl>

------------------------------------------------------------------------
r4004 | taco | 2010-11-29 12:34:30 +0100 (Mon, 29 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

document \jobname discovery

------------------------------------------------------------------------
r4005 | taco | 2010-11-29 12:52:43 +0100 (Mon, 29 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/texfileio.h
   M /trunk/source/texk/web2c/luatexdir/tex/texfileio.w
   M /trunk/source/texk/web2c/luatexdir/utils/synctex-luatex.h

fix location of synctexfile when --output-directory is given

------------------------------------------------------------------------
r4006 | taco | 2010-11-29 13:03:09 +0100 (Mon, 29 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

add a little bit of extra discretionary explanatory text

------------------------------------------------------------------------
r4007 | taco | 2010-11-29 14:04:40 +0100 (Mon, 29 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/texfileio.w

fix commit 4005 (thanks Martin)

------------------------------------------------------------------------
r4008 | taco | 2010-11-29 14:16:36 +0100 (Mon, 29 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c

make node.type(node) return "node"

------------------------------------------------------------------------
r4009 | taco | 2010-11-29 14:27:00 +0100 (Mon, 29 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

more discretionary text improvements

------------------------------------------------------------------------
r4010 | taco | 2010-11-29 15:00:13 +0100 (Mon, 29 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.w

rename node field 'list' to node field 'head' (cf #513)

------------------------------------------------------------------------
r4011 | taco | 2010-11-29 15:11:32 +0100 (Mon, 29 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/luafontloader/src/luafflib.c

add error return tables for fontloader.apply_featurefile and fontloader.apply_afmfile

------------------------------------------------------------------------
r4012 | taco | 2010-11-29 15:45:53 +0100 (Mon, 29 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/texfileio.w

patch start_input to take cur_name and cur_ext from fullnameoffile (fixing bug 498)

------------------------------------------------------------------------
r4013 | taco | 2010-11-29 15:58:50 +0100 (Mon, 29 Nov 2010) | 3 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c

remove the badly named node.protrusion_skipable function
and sort the function table list 

------------------------------------------------------------------------

From khaledhosny at eglug.org  Mon Nov 29 16:49:32 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 29 Nov 2010 17:49:32 +0200
Subject: [Dev-luatex] pdftexversion, OmegaVersion etc.
Message-ID: <20101129154931.GA3554@khaled-laptop>

I was wondering, since luatex is not a direct replacement of pdftex,
omega or aleph, what is the point of having such primitives? Wouldn't it
be more cleaner of they are removed or is there any use for them?

pdftexversion
pdftexrevision

OmegaVersion

AlephVersion
Alephminorversion
Alephrevision
Alephversion
Omegaminorversion
Omegarevision
Omegaversion

eTeXVersion
eTeXminorversion
eTeXrevision
eTeXversion

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From taco at elvenkind.com  Mon Nov 29 16:57:22 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 29 Nov 2010 16:57:22 +0100
Subject: [Dev-luatex] pdftexversion, OmegaVersion etc.
In-Reply-To: <20101129154931.GA3554@khaled-laptop>
References: <20101129154931.GA3554@khaled-laptop>
Message-ID: <4CF3CD62.2020002@elvenkind.com>

On 11/29/2010 04:49 PM, Khaled Hosny wrote:
> I was wondering, since luatex is not a direct replacement of pdftex,
> omega or aleph, what is the point of having such primitives? Wouldn't it
> be more cleaner of they are removed or is there any use for them?

I have no opinion on these (I certainly do not use them myself)

Best wishes,
Taco

From martin at oneiros.de  Mon Nov 29 17:16:22 2010
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Mon, 29 Nov 2010 17:16:22 +0100
Subject: [Dev-luatex] pdftexversion, OmegaVersion etc.
In-Reply-To: <20101129154931.GA3554@khaled-laptop>
References: <20101129154931.GA3554@khaled-laptop>
Message-ID: <AANLkTikK=KNpCovpQU8WBOAWnedY0W8oF4WELCpjX3HR@mail.gmail.com>

2010/11/29 Khaled Hosny <khaledhosny at eglug.org>:
> I was wondering, since luatex is not a direct replacement of pdftex,
> omega or aleph, what is the point of having such primitives? Wouldn't it
> be more cleaner of they are removed or is there any use for them?
>
> pdftexversion
> pdftexrevision
>
> OmegaVersion
>
> AlephVersion
> Alephminorversion
> Alephrevision
> Alephversion
> Omegaminorversion
> Omegarevision
> Omegaversion
>
> eTeXVersion
> eTeXminorversion
> eTeXrevision
> eTeXversion

Macros that use these primitives (e.g. pdftex.def) will still work.

Best
   Martin

From khaledhosny at eglug.org  Mon Nov 29 17:43:27 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 29 Nov 2010 18:43:27 +0200
Subject: [Dev-luatex] pdftexversion, OmegaVersion etc.
In-Reply-To: <AANLkTikK=KNpCovpQU8WBOAWnedY0W8oF4WELCpjX3HR@mail.gmail.com>
References: <20101129154931.GA3554@khaled-laptop>
	<AANLkTikK=KNpCovpQU8WBOAWnedY0W8oF4WELCpjX3HR@mail.gmail.com>
Message-ID: <20101129164327.GA25767@khaled-laptop>

On Mon, Nov 29, 2010 at 05:16:22PM +0100, Martin Schr?der wrote:
> 2010/11/29 Khaled Hosny <khaledhosny at eglug.org>:
> > I was wondering, since luatex is not a direct replacement of pdftex,
> > omega or aleph, what is the point of having such primitives? Wouldn't it
> > be more cleaner of they are removed or is there any use for them?
> >
> > pdftexversion
> > pdftexrevision
> >
> > OmegaVersion
> >
> > AlephVersion
> > Alephminorversion
> > Alephrevision
> > Alephversion
> > Omegaminorversion
> > Omegarevision
> > Omegaversion
> >
> > eTeXVersion
> > eTeXminorversion
> > eTeXrevision
> > eTeXversion
> 
> Macros that use these primitives (e.g. pdftex.def) will still work.

Yes, but is that safe, i.e. is it safe to blindly treat luatex as pdftex
vXX or etex vXX?

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From patrick at gundla.ch  Mon Nov 29 17:58:06 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Mon, 29 Nov 2010 17:58:06 +0100
Subject: [Dev-luatex] Traversing node list structures
In-Reply-To: <9899CEB4-E93E-49F9-BA4D-F1268F78362A@gundla.ch>
References: <4CF299DA.9020803@readytext.co.uk>
	<9899CEB4-E93E-49F9-BA4D-F1268F78362A@gundla.ch>
Message-ID: <9FD1ED67-4B6D-4887-9627-A4D126ADB4E7@gundla.ch>


Am 29.11.2010 um 12:42 schrieb Patrick Gundlach:

> I _think_ that the right order is
> 
> loop over head.next
> if current_node == hlist or vlist then loop over head.list end

should be head.head instead of head.list now (0.65.0)

Patrick


From taco at elvenkind.com  Mon Nov 29 18:10:42 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 29 Nov 2010 18:10:42 +0100
Subject: [Dev-luatex] pdftexversion, OmegaVersion etc.
In-Reply-To: <20101129164327.GA25767@khaled-laptop>
References: <20101129154931.GA3554@khaled-laptop>	<AANLkTikK=KNpCovpQU8WBOAWnedY0W8oF4WELCpjX3HR@mail.gmail.com>
	<20101129164327.GA25767@khaled-laptop>
Message-ID: <4CF3DE92.5080403@elvenkind.com>

On 11/29/2010 05:43 PM, Khaled Hosny wrote:
>
> Yes, but is that safe, i.e. is it safe to blindly treat luatex as pdftex
> vXX or etex vXX?

etex yes,
pdftex maybe,
aleph|omega most probably not.

Best wishes,
Taco

From pragma at wxs.nl  Mon Nov 29 18:31:20 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 29 Nov 2010 18:31:20 +0100
Subject: [Dev-luatex] pdftexversion, OmegaVersion etc.
In-Reply-To: <4CF3CD62.2020002@elvenkind.com>
References: <20101129154931.GA3554@khaled-laptop>
	<4CF3CD62.2020002@elvenkind.com>
Message-ID: <4CF3E368.8080105@wxs.nl>

On 29-11-2010 4:57, Taco Hoekwater wrote:
> On 11/29/2010 04:49 PM, Khaled Hosny wrote:
>> I was wondering, since luatex is not a direct replacement of pdftex,
>> omega or aleph, what is the point of having such primitives? Wouldn't it
>> be more cleaner of they are removed or is there any use for them?
>
> I have no opinion on these (I certainly do not use them myself)

we could remove them before version 1.0 arrives as I don't expect anyone 
to use those omega / aleph names


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From patrick at gundla.ch  Mon Nov 29 22:07:20 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Mon, 29 Nov 2010 22:07:20 +0100
Subject: [Dev-luatex] Q: image size
Message-ID: <9E6F6786-4420-44A8-8425-FA11C73FFDF6@gundla.ch>

Hi,

what is the difference of img.width and img.xsize? (reference manual 4.5.2 img.keys)

For example, the cow.pdf gives me

img.width = 18646779 and img.xsize = 18089984

What are the units? img.width is in sp, what about img.xsize?

Patrick


From root at mail.boekplan.nl  Mon Nov 29 22:27:50 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon, 29 Nov 2010 22:27:50 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101129212750.6E6C640073@mail.boekplan.nl>

------------------------------------------------------------------------
r4014 | taco | 2010-11-29 16:39:32 +0100 (Mon, 29 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/fdata.lua
   M /trunk/manual/functionref.tex
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c

implement node.next() and node.prev()

------------------------------------------------------------------------
r4015 | taco | 2010-11-29 16:44:52 +0100 (Mon, 29 Nov 2010) | 2 lines
Changed paths:
   M /trunk/manual/functionref.pdf
   M /trunk/manual/luatexref-t.pdf

updated manual pdfs

------------------------------------------------------------------------
r4016 | taco | 2010-11-29 16:45:08 +0100 (Mon, 29 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/texfileio.w

fix commit 4012

------------------------------------------------------------------------
r4017 | oneiros | 2010-11-29 17:13:32 +0100 (Mon, 29 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/libs/libpng/ChangeLog
   M /trunk/source/libs/libpng/Makefile.am
   M /trunk/source/libs/libpng/aclocal.m4
   M /trunk/source/libs/libpng/configure
   M /trunk/source/libs/libpng/configure.ac
   D /trunk/source/libs/libpng/libpng-1.2.40
   D /trunk/source/libs/libpng/libpng-1.2.40-PATCHES
   A /trunk/source/libs/libpng/libpng-1.4.4 (from /trunk/source/libs/libpng/libpng-1.2.40:4014)
   M /trunk/source/libs/libpng/libpng-1.4.4/ANNOUNCE
   M /trunk/source/libs/libpng/libpng-1.4.4/CHANGES
   A /trunk/source/libs/libpng/libpng-1.4.4/CMakeLists.txt
   M /trunk/source/libs/libpng/libpng-1.4.4/INSTALL
   D /trunk/source/libs/libpng/libpng-1.4.4/KNOWNBUG
   M /trunk/source/libs/libpng/libpng-1.4.4/LICENSE
   M /trunk/source/libs/libpng/libpng-1.4.4/Makefile.am
   M /trunk/source/libs/libpng/libpng-1.4.4/Makefile.in
   M /trunk/source/libs/libpng/libpng-1.4.4/README
   M /trunk/source/libs/libpng/libpng-1.4.4/TODO
   D /trunk/source/libs/libpng/libpng-1.4.4/Y2KINFO
   M /trunk/source/libs/libpng/libpng-1.4.4/aclocal.m4
   M /trunk/source/libs/libpng/libpng-1.4.4/autogen.sh
   M /trunk/source/libs/libpng/libpng-1.4.4/configure
   M /trunk/source/libs/libpng/libpng-1.4.4/configure.ac
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/gregbook/Makefile.sgi
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/gregbook/Makefile.unx
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/gregbook/README
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/gregbook/readpng.c
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/gregbook/readpng2.c
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/gregbook/readpng2.h
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/gregbook/rpng-win.c
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/gregbook/rpng2-win.c
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/gregbook/rpng2-x.c
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngminim/decoder/gather.sh
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngminim/decoder/makefile
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngminim/decoder/pngusr.h
   D /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngminim/encoder/dummy_inflate.c
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngminim/encoder/gather.sh
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngminim/encoder/makefile
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngminim/encoder/pngusr.h
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngminim/preader/gather.sh
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngminim/preader/makefile
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngminim/preader/pngusr.h
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngminus/png2pnm.c
   A /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngsuite/ftbbn1g04.png
   A /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngsuite/ftbbn2c16.png
   A /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngsuite/ftbbn3p08.png
   A /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngsuite/ftbgn2c16.png
   A /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngsuite/ftbgn3p08.png
   A /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngsuite/ftbrn2c08.png
   A /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngsuite/ftbwn1g16.png
   A /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngsuite/ftbwn3p08.png
   A /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngsuite/ftbyn3p08.png
   A /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngsuite/ftp0n1g08.png
   A /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngsuite/ftp0n2c08.png
   A /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngsuite/ftp0n3p08.png
   A /trunk/source/libs/libpng/libpng-1.4.4/contrib/pngsuite/ftp1n3p08.png
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/visupng/PngFile.c
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/visupng/PngFile.h
   M /trunk/source/libs/libpng/libpng-1.4.4/contrib/visupng/VisualPng.dsp
   M /trunk/source/libs/libpng/libpng-1.4.4/example.c
   D /trunk/source/libs/libpng/libpng-1.4.4/libpng-1.2.40.txt
   A /trunk/source/libs/libpng/libpng-1.4.4/libpng-1.4.4.txt (from /trunk/source/libs/libpng/libpng-1.2.40/libpng-1.2.40.txt:4014)
   A /trunk/source/libs/libpng/libpng-1.4.4/libpng-config.in
   M /trunk/source/libs/libpng/libpng-1.4.4/libpng.3
   A /trunk/source/libs/libpng/libpng-1.4.4/libpng.pc.in
   M /trunk/source/libs/libpng/libpng-1.4.4/libpngpf.3
   M /trunk/source/libs/libpng/libpng-1.4.4/png.5
   M /trunk/source/libs/libpng/libpng-1.4.4/png.c
   M /trunk/source/libs/libpng/libpng-1.4.4/png.h
   M /trunk/source/libs/libpng/libpng-1.4.4/pngconf.h
   M /trunk/source/libs/libpng/libpng-1.4.4/pngerror.c
   D /trunk/source/libs/libpng/libpng-1.4.4/pnggccrd.c
   M /trunk/source/libs/libpng/libpng-1.4.4/pngget.c
   M /trunk/source/libs/libpng/libpng-1.4.4/pngmem.c
   M /trunk/source/libs/libpng/libpng-1.4.4/pngpread.c
   A /trunk/source/libs/libpng/libpng-1.4.4/pngpriv.h
   M /trunk/source/libs/libpng/libpng-1.4.4/pngread.c
   M /trunk/source/libs/libpng/libpng-1.4.4/pngrio.c
   M /trunk/source/libs/libpng/libpng-1.4.4/pngrtran.c
   M /trunk/source/libs/libpng/libpng-1.4.4/pngrutil.c
   M /trunk/source/libs/libpng/libpng-1.4.4/pngset.c
   M /trunk/source/libs/libpng/libpng-1.4.4/pngtest.c
   M /trunk/source/libs/libpng/libpng-1.4.4/pngtest.png
   M /trunk/source/libs/libpng/libpng-1.4.4/pngtrans.c
   D /trunk/source/libs/libpng/libpng-1.4.4/pngvcrd.c
   M /trunk/source/libs/libpng/libpng-1.4.4/pngwio.c
   M /trunk/source/libs/libpng/libpng-1.4.4/pngwrite.c
   M /trunk/source/libs/libpng/libpng-1.4.4/pngwtran.c
   M /trunk/source/libs/libpng/libpng-1.4.4/pngwutil.c
   D /trunk/source/libs/libpng/libpng-1.4.4/projects/beos
   D /trunk/source/libs/libpng/libpng-1.4.4/projects/cbuilder5
   D /trunk/source/libs/libpng/libpng-1.4.4/projects/netware.txt
   M /trunk/source/libs/libpng/libpng-1.4.4/projects/visualc6/README.txt
   M /trunk/source/libs/libpng/libpng-1.4.4/projects/visualc6/libpng.dsp
   M /trunk/source/libs/libpng/libpng-1.4.4/projects/visualc6/pngtest.dsp
   M /trunk/source/libs/libpng/libpng-1.4.4/projects/visualc71/PRJ0041.mak
   M /trunk/source/libs/libpng/libpng-1.4.4/projects/visualc71/README.txt
   M /trunk/source/libs/libpng/libpng-1.4.4/projects/visualc71/README_zlib.txt
   M /trunk/source/libs/libpng/libpng-1.4.4/projects/visualc71/libpng.sln
   M /trunk/source/libs/libpng/libpng-1.4.4/projects/visualc71/libpng.vcproj
   M /trunk/source/libs/libpng/libpng-1.4.4/projects/visualc71/pngtest.vcproj
   M /trunk/source/libs/libpng/libpng-1.4.4/projects/visualc71/zlib.vcproj
   A /trunk/source/libs/libpng/libpng-1.4.4/projects/vstudio
   A /trunk/source/libs/libpng/libpng-1.4.4/projects/vstudio/libpng
   A /trunk/source/libs/libpng/libpng-1.4.4/projects/vstudio/libpng/libpng.vcxproj
   A /trunk/source/libs/libpng/libpng-1.4.4/projects/vstudio/pngtest
   A /trunk/source/libs/libpng/libpng-1.4.4/projects/vstudio/pngtest/pngtest.vcxproj
   A /trunk/source/libs/libpng/libpng-1.4.4/projects/vstudio/readme.txt
   A /trunk/source/libs/libpng/libpng-1.4.4/projects/vstudio/vstudio.sln
   A /trunk/source/libs/libpng/libpng-1.4.4/projects/vstudio/zlib
   A /trunk/source/libs/libpng/libpng-1.4.4/projects/vstudio/zlib/zlib.vcxproj
   A /trunk/source/libs/libpng/libpng-1.4.4/projects/vstudio/zlib.props
   D /trunk/source/libs/libpng/libpng-1.4.4/projects/wince.txt
   A /trunk/source/libs/libpng/libpng-1.4.4/projects/xcode
   A /trunk/source/libs/libpng/libpng-1.4.4/projects/xcode/README.txt
   A /trunk/source/libs/libpng/libpng-1.4.4/projects/xcode/libpng.xcodeproj
   A /trunk/source/libs/libpng/libpng-1.4.4/projects/xcode/libpng.xcodeproj/.gitignore
   A /trunk/source/libs/libpng/libpng-1.4.4/projects/xcode/libpng.xcodeproj/project.pbxproj
   D /trunk/source/libs/libpng/libpng-1.4.4/scripts/CMakeLists.txt
   A /trunk/source/libs/libpng/libpng-1.4.4/scripts/README.txt
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/descrip.mms
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/libpng-config-head.in
   D /trunk/source/libs/libpng/libpng-1.4.4/scripts/libpng-config.in
   D /trunk/source/libs/libpng/libpng-1.4.4/scripts/libpng.icc
   D /trunk/source/libs/libpng/libpng-1.4.4/scripts/libpng.pc-configure.in
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/libpng.pc.in
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.32sunu
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.64sunu
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.aix
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.amiga
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.atari
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.bc32
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.beos
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.bor
   A /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.cegcc
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.cygwin
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.darwin
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.dec
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.dj2
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.elf
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.freebsd
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.gcc
   D /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.gcmmx
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.hp64
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.hpgcc
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.hpux
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.ibmc
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.intel
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.knr
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.linux
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.mingw
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.mips
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.msc
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.ne12bsd
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.netbsd
   D /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.nommx
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.openbsd
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.os2
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.sco
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.sggcc
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.sgi
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.so9
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.solaris
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.solaris-x86
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.std
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.sunos
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.tc3
   D /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.vcawin32
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.vcwin32
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makefile.watcom
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/makevms.com
   A /trunk/source/libs/libpng/libpng-1.4.4/scripts/png32ce.def
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/pngos2.def
   D /trunk/source/libs/libpng/libpng-1.4.4/scripts/pngw32.def
   D /trunk/source/libs/libpng/libpng-1.4.4/scripts/pngw32.rc
   A /trunk/source/libs/libpng/libpng-1.4.4/scripts/pngwin.def
   A /trunk/source/libs/libpng/libpng-1.4.4/scripts/pngwin.rc
   M /trunk/source/libs/libpng/libpng-1.4.4/scripts/smakefile.ppc
   A /trunk/source/libs/libpng/libpng-1.4.4-PATCHES (from /trunk/source/libs/libpng/libpng-1.2.40-PATCHES:4014)
   M /trunk/source/libs/libpng/libpng-1.4.4-PATCHES/ChangeLog
   M /trunk/source/libs/libpng/libpng-1.4.4-PATCHES/TL-Changes

import libpng 1.4.4 from TL

------------------------------------------------------------------------

From patrick at gundla.ch  Mon Nov 29 22:30:09 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Mon, 29 Nov 2010 22:30:09 +0100
Subject: [Dev-luatex] Include cropped PDF files
Message-ID: <795BE86A-8A9E-4F7A-ADFA-E1A0395EC75C@gundla.ch>

Hi,

I'd like to include cropped PDF files in my document. What is the correct way?

Currently I use something like this:

image = img.scan{filename = filename , pagebox = "crop" }
img.node(image)


Is it safe to add pagebox = "crop" to _all_ image inclusions? Any other, better way?

Patrick


From pragma at wxs.nl  Mon Nov 29 22:33:08 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 29 Nov 2010 22:33:08 +0100
Subject: [Dev-luatex] Q: image size
In-Reply-To: <9E6F6786-4420-44A8-8425-FA11C73FFDF6@gundla.ch>
References: <9E6F6786-4420-44A8-8425-FA11C73FFDF6@gundla.ch>
Message-ID: <4CF41C14.6010305@wxs.nl>

On 29-11-2010 10:07, Patrick Gundlach wrote:
> Hi,
>
> what is the difference of img.width and img.xsize? (reference manual 4.5.2 img.keys)
>
> For example, the cow.pdf gives me
>
> img.width = 18646779 and img.xsize = 18089984
>
> What are the units? img.width is in sp, what about img.xsize?

all units in luatex are scaled points

the difference is some 8.4 pt which is somewhat weird

\the\dimexpr18646779sp/\number\dimexpr1bp

\the\dimexpr18089984sp/\number\dimexpr1pt

that's pretty close so maybe the xsize (bounding box values) takes the 
wrong unit when conversion to sp takes place

Hans



-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From patrick at gundla.ch  Mon Nov 29 22:33:48 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Mon, 29 Nov 2010 22:33:48 +0100
Subject: [Dev-luatex] node.next(), node.prev()
Message-ID: <09118623-9145-4472-96C1-3500DE1EDDC5@gundla.ch>

Hi,

is there a difference between

-- assume that x is a node
n = x.next

and 

n = node.next(x) 

?

I guess that node.prev(n) needs the prev pointer set, right?

Patrick



From pragma at wxs.nl  Mon Nov 29 22:34:38 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 29 Nov 2010 22:34:38 +0100
Subject: [Dev-luatex] Include cropped PDF files
In-Reply-To: <795BE86A-8A9E-4F7A-ADFA-E1A0395EC75C@gundla.ch>
References: <795BE86A-8A9E-4F7A-ADFA-E1A0395EC75C@gundla.ch>
Message-ID: <4CF41C6E.80300@wxs.nl>

On 29-11-2010 10:30, Patrick Gundlach wrote:
> Hi,
>
> I'd like to include cropped PDF files in my document. What is the correct way?
>
> Currently I use something like this:
>
> image = img.scan{filename = filename , pagebox = "crop" }
> img.node(image)
>
>
> Is it safe to add pagebox = "crop" to _all_ image inclusions? Any other, better way?

normally that's ok (at least I normally use the crop box)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From martin at oneiros.de  Mon Nov 29 22:44:33 2010
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Mon, 29 Nov 2010 22:44:33 +0100
Subject: [Dev-luatex] Include cropped PDF files
In-Reply-To: <4CF41C6E.80300@wxs.nl>
References: <795BE86A-8A9E-4F7A-ADFA-E1A0395EC75C@gundla.ch>
	<4CF41C6E.80300@wxs.nl>
Message-ID: <AANLkTinyNpB8vKyJZdH=pHhTypHtFs=MoopLeXb3Zo77@mail.gmail.com>

2010/11/29 Hans Hagen <pragma at wxs.nl>:
> On 29-11-2010 10:30, Patrick Gundlach wrote:
>> Is it safe to add pagebox = "crop" to _all_ image inclusions? Any other,
>> better way?
>
> normally that's ok (at least I normally use the crop box)

The cropbox should be the default according to the PDF Norm (section 14.11.2.1).

Best
   Martin

From hartmut_henkel at gmx.de  Mon Nov 29 23:11:51 2010
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Mon, 29 Nov 2010 23:11:51 +0100 (CET)
Subject: [Dev-luatex] Q: image size
In-Reply-To: <9E6F6786-4420-44A8-8425-FA11C73FFDF6@gundla.ch>
References: <9E6F6786-4420-44A8-8425-FA11C73FFDF6@gundla.ch>
Message-ID: <alpine.DEB.2.00.1011292308510.4496@hahepc1.hahe>

On Mon, 29 Nov 2010, Patrick Gundlach wrote:

> what is the difference of img.width and img.xsize? (reference manual
> 4.5.2 img.keys)
>
> For example, the cow.pdf gives me
>
> img.width = 18646779 and img.xsize = 18089984

with

a\directlua{
  a = img.scan({filename = "cow.pdf"})
  print("")
  print(a.xsize)
  print(a.width)
  img.write(a)
}
\bye

i get

This is LuaTeX, Version beta-0.65.0-2010112723 (rev 3990)
 restricted \write18 enabled.
(./xx.tex
18089984
18089984

no difference!?

Regards, Hartmut

From pragma at wxs.nl  Mon Nov 29 23:25:11 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 29 Nov 2010 23:25:11 +0100
Subject: [Dev-luatex] node.next(), node.prev()
In-Reply-To: <09118623-9145-4472-96C1-3500DE1EDDC5@gundla.ch>
References: <09118623-9145-4472-96C1-3500DE1EDDC5@gundla.ch>
Message-ID: <4CF42847.2080200@wxs.nl>

On 29-11-2010 10:33, Patrick Gundlach wrote:
> Hi,
>
> is there a difference between
>
> -- assume that x is a node
> n = x.next
>
> and
>
> n = node.next(x)
>
> ?
>
> I guess that node.prev(n) needs the prev pointer set, right?

x.next and node.next are similar but sometimes it's handy to have the 
next as function; performance is the same

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Mon Nov 29 23:26:47 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 29 Nov 2010 23:26:47 +0100
Subject: [Dev-luatex] Q: image size
In-Reply-To: <alpine.DEB.2.00.1011292308510.4496@hahepc1.hahe>
References: <9E6F6786-4420-44A8-8425-FA11C73FFDF6@gundla.ch>
	<alpine.DEB.2.00.1011292308510.4496@hahepc1.hahe>
Message-ID: <4CF428A7.2030309@wxs.nl>

On 29-11-2010 11:11, Hartmut Henkel wrote:

> (./xx.tex
> 18089984
> 18089984

i get the same here so maybe patrick has a special mutated cow

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From ishamid at colostate.edu  Tue Nov 30 00:09:37 2010
From: ishamid at colostate.edu (=?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMgINiz2YXYp9mI2Yog2K0=?= =?utf-8?B?2KfZhdiv?=)
Date: Mon, 29 Nov 2010 16:09:37 -0700
Subject: [Dev-luatex] pdftexversion, OmegaVersion etc.
In-Reply-To: <20101129154931.GA3554@khaled-laptop>
References: <20101129154931.GA3554@khaled-laptop>
Message-ID: <op.vmyfybv660pfzx@ihamidnb.libarts.colostate.edu>



On Mon, 29 Nov 2010 08:49:32 -0700, Khaled Hosny <khaledhosny at eglug.org>  
wrote:

> I was wondering, since luatex is not a direct replacement of pdftex,
> omega or aleph, what is the point of having such primitives? Wouldn't it
> be more cleaner of they are removed or is there any use for them?

It may be that Yannis and other omega users still need them. luatex used  
be a direct replacement for aleph (well, almost), so that with little mods  
one could run an aleph file once upon a time....

But it may be best to see if there are any omega or aleph users on this  
list who need the primitives etc...

Best wishes
Idris
-- 
Professor Idris Samawi Hamid, Editor-in-Chief
International Journal of Shi?i Studies
Department of Philosophy
Colorado State University
Fort Collins, CO 80523


From pragma at wxs.nl  Tue Nov 30 00:50:20 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 30 Nov 2010 00:50:20 +0100
Subject: [Dev-luatex] pdftexversion, OmegaVersion etc.
In-Reply-To: <op.vmyfybv660pfzx@ihamidnb.libarts.colostate.edu>
References: <20101129154931.GA3554@khaled-laptop>
	<op.vmyfybv660pfzx@ihamidnb.libarts.colostate.edu>
Message-ID: <4CF43C3C.30101@wxs.nl>

On 30-11-2010 12:09, Idris Samawi Hamid ?????  ????? ???? wrote:
>
>
> On Mon, 29 Nov 2010 08:49:32 -0700, Khaled Hosny <khaledhosny at eglug.org>
> wrote:
>
>> I was wondering, since luatex is not a direct replacement of pdftex,
>> omega or aleph, what is the point of having such primitives? Wouldn't it
>> be more cleaner of they are removed or is there any use for them?
>
> It may be that Yannis and other omega users still need them. luatex used
> be a direct replacement for aleph (well, almost), so that with little
> mods one could run an aleph file once upon a time....

The translation filters already have been removed a while ago so old 
omega code will not run as expected. Also, the number of directions has 
been limited (after we discussed it with John at eurotex).

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From reinhard.kotucha at web.de  Tue Nov 30 01:30:01 2010
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 30 Nov 2010 01:30:01 +0100
Subject: [Dev-luatex] pdftexversion, OmegaVersion etc.
In-Reply-To: <4CF43C3C.30101@wxs.nl>
References: <20101129154931.GA3554@khaled-laptop>
	<op.vmyfybv660pfzx@ihamidnb.libarts.colostate.edu>
	<4CF43C3C.30101@wxs.nl>
Message-ID: <19700.17801.543101.793969@zaphod.ms25.net>

On 30 November 2010 Hans Hagen wrote:

 > On 30-11-2010 12:09, Idris Samawi Hamid ?????  ????? ???? wrote:
 > >
 > >
 > > On Mon, 29 Nov 2010 08:49:32 -0700, Khaled Hosny <khaledhosny at eglug.org>
 > > wrote:
 > >
 > >> I was wondering, since luatex is not a direct replacement of pdftex,
 > >> omega or aleph, what is the point of having such primitives? Wouldn't it
 > >> be more cleaner of they are removed or is there any use for them?
 > >
 > > It may be that Yannis and other omega users still need them. luatex used
 > > be a direct replacement for aleph (well, almost), so that with little
 > > mods one could run an aleph file once upon a time....
 > 
 > The translation filters already have been removed a while ago so old 
 > omega code will not run as expected. Also, the number of directions has 
 > been limited (after we discussed it with John at eurotex).

Do you propose to drop \Omegaversion because you changed the Omega
code and forgot to increase the version number?  :)

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From taco at elvenkind.com  Tue Nov 30 08:19:35 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 30 Nov 2010 08:19:35 +0100
Subject: [Dev-luatex] Q: image size
In-Reply-To: <4CF428A7.2030309@wxs.nl>
References: <9E6F6786-4420-44A8-8425-FA11C73FFDF6@gundla.ch>	<alpine.DEB.2.00.1011292308510.4496@hahepc1.hahe>
	<4CF428A7.2030309@wxs.nl>
Message-ID: <4CF4A587.80406@elvenkind.com>

On 11/29/2010 11:26 PM, Hans Hagen wrote:
> On 29-11-2010 11:11, Hartmut Henkel wrote:
>
>> (./xx.tex
>> 18089984
>> 18089984
>
> i get the same here so maybe patrick has a special mutated cow

Or a mutated luatex?

From patrick at gundla.ch  Tue Nov 30 08:59:48 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Tue, 30 Nov 2010 08:59:48 +0100
Subject: [Dev-luatex] Q: image size
In-Reply-To: <4CF428A7.2030309@wxs.nl>
References: <9E6F6786-4420-44A8-8425-FA11C73FFDF6@gundla.ch>
	<alpine.DEB.2.00.1011292308510.4496@hahepc1.hahe>
	<4CF428A7.2030309@wxs.nl>
Message-ID: <B3B4F348-084B-4658-8FA7-32AB92F24F6C@gundla.ch>


Am 29.11.2010 um 23:26 schrieb Hans Hagen:

> On 29-11-2010 11:11, Hartmut Henkel wrote:
> 
>> (./xx.tex
>> 18089984
>> 18089984
> 
> i get the same here so maybe patrick has a special mutated cow

no, just errors in his "don't write mails when tired" mode. Typical
case of "Problem Exists Between Keyboard And Chair".

I get the same widths here.

Sorry everyone.

Patrick


From pragma at wxs.nl  Tue Nov 30 09:01:17 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 30 Nov 2010 09:01:17 +0100
Subject: [Dev-luatex] pdftexversion, OmegaVersion etc.
In-Reply-To: <19700.17801.543101.793969@zaphod.ms25.net>
References: <20101129154931.GA3554@khaled-laptop>	<op.vmyfybv660pfzx@ihamidnb.libarts.colostate.edu>	<4CF43C3C.30101@wxs.nl>
	<19700.17801.543101.793969@zaphod.ms25.net>
Message-ID: <4CF4AF4D.80708@wxs.nl>

On 30-11-2010 1:30, Reinhard Kotucha wrote:
> On 30 November 2010 Hans Hagen wrote:
>
>   >  On 30-11-2010 12:09, Idris Samawi Hamid ?????  ????? ???? wrote:
>   >  >
>   >  >
>   >  >  On Mon, 29 Nov 2010 08:49:32 -0700, Khaled Hosny<khaledhosny at eglug.org>
>   >  >  wrote:
>   >  >
>   >  >>  I was wondering, since luatex is not a direct replacement of pdftex,
>   >  >>  omega or aleph, what is the point of having such primitives? Wouldn't it
>   >  >>  be more cleaner of they are removed or is there any use for them?
>   >  >
>   >  >  It may be that Yannis and other omega users still need them. luatex used
>   >  >  be a direct replacement for aleph (well, almost), so that with little
>   >  >  mods one could run an aleph file once upon a time....
>   >
>   >  The translation filters already have been removed a while ago so old
>   >  omega code will not run as expected. Also, the number of directions has
>   >  been limited (after we discussed it with John at eurotex).
>
> Do you propose to drop \Omegaversion because you changed the Omega
> code and forgot to increase the version number?  :)

we could have decreased the number instead and then at version 0 drop 
the primitives

anyhow, we don't need to carry around primitives that have no use as in 
a macro package one can define then as macro: if luatex then 
omegaversion is n

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Tue Nov 30 09:52:12 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 30 Nov 2010 09:52:12 +0100
Subject: [Dev-luatex] pdftexversion, OmegaVersion etc.
In-Reply-To: <4CF4AF4D.80708@wxs.nl>
References: <20101129154931.GA3554@khaled-laptop>	<op.vmyfybv660pfzx@ihamidnb.libarts.colostate.edu>	<4CF43C3C.30101@wxs.nl>	<19700.17801.543101.793969@zaphod.ms25.net>
	<4CF4AF4D.80708@wxs.nl>
Message-ID: <4CF4BB3C.2050808@elvenkind.com>

On 11/30/2010 09:01 AM, Hans Hagen wrote:
>>
>> Do you propose to drop \Omegaversion because you changed the Omega
>> code and forgot to increase the version number? :)

The Omega code is not so much 'changed', but lots of bits of it have
been removed by now, and especially there are no translation process
any more. What is left is:

* the directions (\textdir, \bodydir ...)
* the 16-bit character extensions (\omathchar, \odelimiter, ...)
* local paragraph settings (\localleftbox ...)
* character ghosts (\leftghost, \rightghost)
* "Omega Font Metrics" support at level 0
* the page settings (\pageheight, \pagewidth, ...)
* character information access (\chardp, \charht, ..)
* version primitives (\Alephversion ...)

For each of these ...

* the handling directions may change incompatibly in the near future
  (depending on how the updated direction handling will work after all
   tracker items have been processed)
* the 16-bit math characters are ugly, and I would to deprecate them
* local paragraph settings are likely to change after some of the
   paragraph handling trackers have been processed.
* character ghosts are superceded by opentype fonts, so only
   make sense with TFM/OFM files
* OFMs hardly exist
* page settings are also provided via the pdftex primitives
* character info access is also provided via etex primitives, and
   via lua.

All in all, I don't think luatex 1.0 would still be compatible with
Omega/Aleph even if it still does some of the same things, so removing
the version primitives seems a reasonable thing to do.

Best wishes,
Taco


From root at mail.boekplan.nl  Tue Nov 30 12:28:18 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue, 30 Nov 2010 12:28:18 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101130112818.698B940073@mail.boekplan.nl>

------------------------------------------------------------------------
r4018 | taco | 2010-11-30 11:57:42 +0100 (Tue, 30 Nov 2010) | 4 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luainit.w

fix the problem that 
  luatex -lua=<script> '\relax'
did exit immediately instead of going into interactive mode

------------------------------------------------------------------------

From taco at elvenkind.com  Tue Nov 30 16:11:36 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 30 Nov 2010 16:11:36 +0100
Subject: [Dev-luatex] Message for the impatient Apple users
Message-ID: <4CF51428.9080404@elvenkind.com>

Hi,

It seems that commits 4019 & 4021 have finally fixed the use of Snow 
Leopard's .ttc system fonts!

Best wishes,
Taco

From taco at elvenkind.com  Tue Nov 30 16:19:55 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 30 Nov 2010 16:19:55 +0100
Subject: [Dev-luatex] Message for the impatient Apple users
In-Reply-To: <4CF51428.9080404@elvenkind.com>
References: <4CF51428.9080404@elvenkind.com>
Message-ID: <4CF5161B.5000700@elvenkind.com>

On 11/30/2010 04:11 PM, Taco Hoekwater wrote:
> Hi,
>
> It seems that commits 4019 & 4021 have finally fixed the use of Snow
> Leopard's .ttc system fonts!

.. not that it actually does you much good now, because an incompatible
change in luafilesystem means that both context and luaotfload.sty now
fail to recreate the font index, but still ... I am really happy.

From root at mail.boekplan.nl  Tue Nov 30 16:27:52 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue, 30 Nov 2010 16:27:52 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20101130152752.54D6140073@mail.boekplan.nl>

------------------------------------------------------------------------
r4019 | taco | 2010-11-30 14:27:31 +0100 (Tue, 30 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/src/luafflib.c

fix segmentation faults for AmericanTypewriter.ttc and Hoefler Text.ttc

------------------------------------------------------------------------
r4020 | taco | 2010-11-30 14:43:25 +0100 (Tue, 30 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lkpselib.c

remove unnecessary casts

------------------------------------------------------------------------
r4021 | taco | 2010-11-30 15:58:05 +0100 (Tue, 30 Nov 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/src/luafflib.c

fix (longstanding) bug 397: Mac OS X 10.6 fonts problems

------------------------------------------------------------------------

