From root at mail.boekplan.nl  Mon Mar  1 12:25:48 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon,  1 Mar 2010 12:25:48 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100301112548.C0D5840058@mail.boekplan.nl>

------------------------------------------------------------------------
r3448 | taco | 2010-03-01 11:47:10 +0100 (Mon, 01 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c

make node.hpack() and node.vpack() return the badness of the created box as a 
second argument

------------------------------------------------------------------------

From elie.roux at telecom-bretagne.eu  Mon Mar  1 20:32:11 2010
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Mon, 01 Mar 2010 21:32:11 +0200
Subject: [Dev-luatex] getluatexsvnversion.sh patch
Message-ID: <4B8C163B.1090902@telecom-bretagne.eu>

Hello,

attached is a patch for getluatexsvnversion.sh to work under dash too. 
It worked only under bash, and, as most debian and ubuntu users, my 
/bin/sh is dash. Of course it continues to work under bash.

Thank you,
-- 
Elie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: getluatexsvnversion.sh.diff
Type: text/x-patch
Size: 603 bytes
Desc: not available
URL: <http://www.ntg.nl/mailman/private/dev-luatex/attachments/20100301/8ebd8cdc/attachment.bin>

From khaledhosny at eglug.org  Mon Mar  1 20:44:55 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 1 Mar 2010 21:44:55 +0200
Subject: [Dev-luatex] getluatexsvnversion.sh patch
In-Reply-To: <4B8C163B.1090902@telecom-bretagne.eu>
References: <4B8C163B.1090902@telecom-bretagne.eu>
Message-ID: <20100301194455.GA4074@khaled-laptop>

On Mon, Mar 01, 2010 at 09:32:11PM +0200, Elie Roux wrote:
> Hello,
> 
> attached is a patch for getluatexsvnversion.sh to work under dash
> too. It worked only under bash, and, as most debian and ubuntu
> users, my /bin/sh is dash. Of course it continues to work under
> bash.

It is usually good idea to explicitly ask for bash of you are using
bash specific extensions, anyway.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From taco at elvenkind.com  Mon Mar  1 20:47:40 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 01 Mar 2010 20:47:40 +0100
Subject: [Dev-luatex] getluatexsvnversion.sh patch
In-Reply-To: <4B8C163B.1090902@telecom-bretagne.eu>
References: <4B8C163B.1090902@telecom-bretagne.eu>
Message-ID: <4B8C19DC.8010607@elvenkind.com>

Elie Roux wrote:
> Hello,
> 
> attached is a patch for getluatexsvnversion.sh to work under dash too. 
> It worked only under bash, and, as most debian and ubuntu users, my 
> /bin/sh is dash. Of course it continues to work under bash.

Applied, thanks.

Best wishes,
Taco

From root at mail.boekplan.nl  Mon Mar  1 22:25:10 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon,  1 Mar 2010 22:25:10 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100301212511.0A8F140058@mail.boekplan.nl>

------------------------------------------------------------------------
r3449 | taco | 2010-03-01 18:45:46 +0100 (Mon, 01 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.h

allow a second (stop) argument for node.copy_list().
the stopper is not copied

------------------------------------------------------------------------
r3450 | taco | 2010-03-01 20:41:16 +0100 (Mon, 01 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/getluatexsvnversion.sh

a patch for getluatexsvnversion.sh to work under dash too,
from Elie Roux

------------------------------------------------------------------------

From t34www at googlemail.com  Tue Mar  2 00:57:45 2010
From: t34www at googlemail.com (T T)
Date: Mon, 1 Mar 2010 23:57:45 +0000
Subject: [Dev-luatex] platform specific functionality
Message-ID: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>

Hi,

With the other thread asking to add readlink, I would also like to ask
for an addition of Windows specific GetShortPathName. Without this
function it is impossible to check if two paths point to the same
place.

However, I'm not sure if beefing up LuaTeX with this kind of
functionality is the best thing to do (there will be undoubtedly other
things worth adding). Perhaps external modules? What's the status of
loading binary modules? Will this be available for the coming TL
release?

And another request if I may. With kpsewhich it is possible to specify
a search path explicitly with the -path switch, but this functionality
is not exposed through lua kpse lib. Could this be added?

Cheers,

Tomek

From taco at elvenkind.com  Tue Mar  2 08:01:17 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 02 Mar 2010 08:01:17 +0100
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>
Message-ID: <4B8CB7BD.1050807@elvenkind.com>

T T wrote:
> Hi,
> 
> With the other thread asking to add readlink, I would also like to ask
> for an addition of Windows specific GetShortPathName. Without this
> function it is impossible to check if two paths point to the same
> place.

Is that because of reparse points or so? I though GetShortPathName
was more or less obsolete now.

> However, I'm not sure if beefing up LuaTeX with this kind of
> functionality is the best thing to do (there will be undoubtedly other
> things worth adding). 

I am less hesitant than usual about adding stuff when the request is
about scripting for texlive. If GetShortPathName is useful in such
a context, I do not mind adding it.

> Perhaps external modules? What's the status of
> loading binary modules? Will this be available for the coming TL
> release?

Yes, but I expect there will not be any binary modules actually
included.

> And another request if I may. With kpsewhich it is possible to specify
> a search path explicitly with the -path switch, but this functionality
> is not exposed through lua kpse lib. Could this be added?

Sure. If there is anything else from kpathsea people want, please
say so.

Best wishes,
Taco

From pragma at wxs.nl  Tue Mar  2 10:21:20 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 02 Mar 2010 10:21:20 +0100
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <4B8CB7BD.1050807@elvenkind.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>
	<4B8CB7BD.1050807@elvenkind.com>
Message-ID: <4B8CD890.4020607@wxs.nl>

On 2-3-2010 8:01, Taco Hoekwater wrote:
> T T wrote:
>> Hi,
>>
>> With the other thread asking to add readlink, I would also like to ask
>> for an addition of Windows specific GetShortPathName. Without this
>> function it is impossible to check if two paths point to the same
>> place.
>
> Is that because of reparse points or so? I though GetShortPathName
> was more or less obsolete now.

indeed and luatex will not run nicely on windows < xp anyway (or os-9 or 
whatever old is around)

best is to settle on long names consistently (i noticed some short name 
issues a while ago)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From root at mail.boekplan.nl  Tue Mar  2 12:25:45 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue,  2 Mar 2010 12:25:45 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100302112545.6B13E40058@mail.boekplan.nl>

------------------------------------------------------------------------
r3451 | taco | 2010-03-02 11:25:26 +0100 (Tue, 02 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafilesystem/src/lfs.c

add lfs.readlink(), cf. posix library

------------------------------------------------------------------------

From t34www at googlemail.com  Tue Mar  2 13:34:30 2010
From: t34www at googlemail.com (T T)
Date: Tue, 2 Mar 2010 12:34:30 +0000
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <4B8CB7BD.1050807@elvenkind.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>
	<4B8CB7BD.1050807@elvenkind.com>
Message-ID: <e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>

On 2 March 2010 09:21, Hans Hagen <pragma at wxs.nl> wrote:
> On 2-3-2010 8:01, Taco Hoekwater wrote:
>> T T wrote:
>>>
>>> With the other thread asking to add readlink, I would also like to ask
>>> for an addition of Windows specific GetShortPathName. Without this
>>> function it is impossible to check if two paths point to the same
>>> place.
>>
>> Is that because of reparse points or so? I though GetShortPathName
>> was more or less obsolete now.
>
> indeed and luatex will not run nicely on windows < xp anyway (or os-9 or
> whatever old is around)

Win2000 should be OK too (or generally NT-based systems, although we
don't test anything prior to Win2k). Support for Win98 and below have
been officially dropped in TL'08 I think.

> best is to settle on long names consistently (i noticed some short name
> issues a while ago)

This is not possible for two reasons:
1) there is still some old software breaking on long paths
occasionally (or rather on names with spaces); we struggled recently
with dviout but this is resolved now; I'm not aware of any other
cases, atm.
2) even if we ignore old programs, short paths are accepted thoughout
the Windows API and pop-up in various places from time to time (e.g.
%TEMP% var); moreover, paths specified in mixed short/long convention
are OK too and the only way to get a cannonical path on Windows is
through GetShortPathName (or it's twin GetLongPathName, but this one
is not nearly as useful)

On 2 March 2010 07:01, Taco Hoekwater <taco at elvenkind.com> wrote:
> T T wrote:
>> However, I'm not sure if beefing up LuaTeX with this kind of
>> functionality is the best thing to do (there will be undoubtedly other
>> things worth adding).
>
> I am less hesitant than usual about adding stuff when the request is
> about scripting for texlive. If GetShortPathName is useful in such
> a context, I do not mind adding it.

I'm really glad to hear that. And yes, I think that GetShortPathName
is one of those essential functions you can't work around when you
need it. It's either there or not.


From pragma at wxs.nl  Tue Mar  2 13:57:28 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 02 Mar 2010 13:57:28 +0100
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>	<4B8CB7BD.1050807@elvenkind.com>
	<e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>
Message-ID: <4B8D0B38.6000500@wxs.nl>

On 2-3-2010 13:34, T T wrote:

>> best is to settle on long names consistently (i noticed some short name
>> issues a while ago)
>
> This is not possible for two reasons:
> 1) there is still some old software breaking on long paths
> occasionally (or rather on names with spaces); we struggled recently
> with dviout but this is resolved now; I'm not aware of any other
> cases, atm.
> 2) even if we ignore old programs, short paths are accepted thoughout
> the Windows API and pop-up in various places from time to time (e.g.
> %TEMP% var); moreover, paths specified in mixed short/long convention
> are OK too and the only way to get a cannonical path on Windows is
> through GetShortPathName (or it's twin GetLongPathName, but this one
> is not nearly as useful)

isn't there a flag somewhere that makes env vars expand into long paths?

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From root at mail.boekplan.nl  Tue Mar  2 16:25:15 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue,  2 Mar 2010 16:25:15 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100302152516.0D88E40058@mail.boekplan.nl>

------------------------------------------------------------------------
r3452 | taco | 2010-03-02 14:09:15 +0100 (Tue, 02 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafilesystem/src/lfs.c

typo in win32 stub name (spotted by Akira)

------------------------------------------------------------------------

From root at mail.boekplan.nl  Tue Mar  2 22:25:23 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue,  2 Mar 2010 22:25:23 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100302212524.7325940058@mail.boekplan.nl>

------------------------------------------------------------------------
r3453 | taco | 2010-03-02 17:40:34 +0100 (Tue, 02 Mar 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

paste in new unicode string paragraph from Stephan Hennig

------------------------------------------------------------------------

From t34www at googlemail.com  Wed Mar  3 14:39:08 2010
From: t34www at googlemail.com (T T)
Date: Wed, 3 Mar 2010 13:39:08 +0000
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <4B8D0B38.6000500@wxs.nl>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>
	<4B8CB7BD.1050807@elvenkind.com>
	<e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>
	<4B8D0B38.6000500@wxs.nl>
Message-ID: <e7fba2611003030539i5651ffa7l2b33600f390076f5@mail.gmail.com>

On 2 March 2010 12:57, Hans Hagen <pragma at wxs.nl> wrote:
>
> isn't there a flag somewhere that makes env vars expand into long paths?

Not to my knowledge but even if such a flag exists it doesn't help
much. Short paths can appear in any place where file name is expected
and to write correct code one can never assume that long convention is
followed. This short/long file naming duality is a legacy of an ugly
hack MS once pulled, and it is unlikely to ever disappear, I'm afraid.

Cheers,

Tomek

From taco at elvenkind.com  Wed Mar  3 15:00:17 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 03 Mar 2010 15:00:17 +0100
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <e7fba2611003030539i5651ffa7l2b33600f390076f5@mail.gmail.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>	
	<4B8CB7BD.1050807@elvenkind.com>	
	<e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>	
	<4B8D0B38.6000500@wxs.nl>
	<e7fba2611003030539i5651ffa7l2b33600f390076f5@mail.gmail.com>
Message-ID: <4B8E6B71.70603@elvenkind.com>



T T wrote:
> followed. This short/long file naming duality is a legacy of an ugly
> hack MS once pulled, and it is unlikely to ever disappear, I'm afraid.

Tracker item added:

  http://tracker.luatex.org/view.php?id=338

Need to go in 15minutes so no time for it today.

Best wishes,
Taco

From taco at elvenkind.com  Wed Mar  3 15:07:19 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 03 Mar 2010 15:07:19 +0100
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>	
	<4B8CB7BD.1050807@elvenkind.com>
	<e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>
Message-ID: <4B8E6D17.2060602@elvenkind.com>


Hi Tomek.

T T wrote:
> 
> From less essential functionality I would also love to have access to
> MessageBox for a minimal GUI functionality. 

This is something that will not go in the core, so that would have
to be an external binary module (there are just too many threading
complications in relation to windows gui programming, and we do want
to start using threading at some point in the not too distant future).

>>> And another request if I may. With kpsewhich it is possible to specify
>>> a search path explicitly with the -path switch, but this functionality
>>> is not exposed through lua kpse lib. Could this be added?
>> Sure. If there is anything else from kpathsea people want, please
>> say so.

Tracker item:

  http://tracker.luatex.org/view.php?id=339

Best wishes,
Taco


From t34www at googlemail.com  Thu Mar  4 15:08:12 2010
From: t34www at googlemail.com (T T)
Date: Thu, 4 Mar 2010 14:08:12 +0000
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <4B8E6D17.2060602@elvenkind.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>
	<4B8CB7BD.1050807@elvenkind.com>
	<e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>
	<4B8E6D17.2060602@elvenkind.com>
Message-ID: <e7fba2611003040608p41bb31bg28f81e429d279510@mail.gmail.com>

On 3 March 2010 14:07, Taco Hoekwater <taco at elvenkind.com> wrote:
> T T wrote:
>>
>> From less essential functionality I would also love to have access to
>> MessageBox for a minimal GUI functionality.
>
> This is something that will not go in the core, so that would have
> to be an external binary module (there are just too many threading
> complications in relation to windows gui programming, and we do want
> to start using threading at some point in the not too distant future).

OK, I understand. At least I will have some motivation to play with
Lua modules :)

>>>> And another request if I may. With kpsewhich it is possible to specify
>>>> a search path explicitly with the -path switch, but this functionality
>>>> is not exposed through lua kpse lib. Could this be added?
>>> Sure. If there is anything else from kpathsea people want, please
>>> say so.
>
> Tracker item:
>
> ?http://tracker.luatex.org/view.php?id=339

Thanks Taco,

Tomek

From root at mail.boekplan.nl  Fri Mar  5 12:25:43 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri,  5 Mar 2010 12:25:43 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100305112543.D956B40059@mail.boekplan.nl>

------------------------------------------------------------------------
r3454 | taco | 2010-03-05 10:34:38 +0100 (Fri, 05 Mar 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

document node.vpack() and the negative argument to tex.[s]print()

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Mar  5 16:25:14 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri,  5 Mar 2010 16:25:14 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100305152514.6242640059@mail.boekplan.nl>

------------------------------------------------------------------------
r3455 | taco | 2010-03-05 14:48:25 +0100 (Fri, 05 Mar 2010) | 3 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

document node.vpack() better, and document the second return value
of the node packing functions

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Mar  5 22:22:01 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri,  5 Mar 2010 22:22:01 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100305212444.B3B4C40059@mail.boekplan.nl>

svn: OPTIONS of 'http://foundry.supelec.fr/svn/luatex': 200 OK (http://foundry.supelec.fr)

From taco at elvenkind.com  Sat Mar  6 11:49:28 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 06 Mar 2010 11:49:28 +0100
Subject: [Dev-luatex] Cron
	<luatex@boekplan>	/var/www/luatex.org/www/bin/luatex-svn
In-Reply-To: <20100305212444.B3B4C40059@mail.boekplan.nl>
References: <20100305212444.B3B4C40059@mail.boekplan.nl>
Message-ID: <4B923338.7060707@elvenkind.com>

Hi Fabrice,

It looks like there is now a http deamon running on the svn
port of supelec.fr.

Cron Daemon wrote:
> svn: OPTIONS of 'http://foundry.supelec.fr/svn/luatex': 200 OK (http://foundry.supelec.fr)

Is what we get from svn co, and svn up gives:

[taco at ntg devel]$ svn up
svn: Server sent unexpected return value (405 Method Not Allowed) in 
response to PROPFIND request for '/svn/metapost/branches/devel'


Can you please have a look?

Best wishes,
Taco

From martin at oneiros.de  Sat Mar  6 21:32:34 2010
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sat, 6 Mar 2010 21:32:34 +0100
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
In-Reply-To: <4B923338.7060707@elvenkind.com>
References: <20100305212444.B3B4C40059@mail.boekplan.nl>
	<4B923338.7060707@elvenkind.com>
Message-ID: <68c491a61003061232k2fa2c596sc78b86990effe102@mail.gmail.com>

2010/3/6 Taco Hoekwater <taco at elvenkind.com>:
> [taco at ntg devel]$ svn up
> svn: Server sent unexpected return value (405 Method Not Allowed) in
> response to PROPFIND request for '/svn/metapost/branches/devel'

Works here (again?).

> LANG=C svn info .
Path: .
URL: http://scm.foundry.supelec.fr/svn/luatex/trunk
Repository Root: http://scm.foundry.supelec.fr/svn/luatex
Repository UUID: 0b2b3880-5936-4365-a048-eb17d2e5a6bf
Revision: 3455
Node Kind: directory
Schedule: normal
Last Changed Author: taco
Last Changed Rev: 3455
Last Changed Date: 2010-03-05 14:48:25 +0100 (Fri, 05 Mar 2010)

Best
    Martin

From reinhard.kotucha at web.de  Sat Mar  6 22:56:15 2010
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 6 Mar 2010 22:56:15 +0100
Subject: [Dev-luatex]
	Cron	<luatex@boekplan>	/var/www/luatex.org/www/bin/luatex-svn
In-Reply-To: <4B923338.7060707@elvenkind.com>
References: <20100305212444.B3B4C40059@mail.boekplan.nl>
	<4B923338.7060707@elvenkind.com>
Message-ID: <19346.53119.450763.529082@zaphod.ms25.net>

On 6 March 2010 Taco Hoekwater wrote:

 > Is what we get from svn co, and svn up gives:
 > 
 > [taco at ntg devel]$ svn up
 > svn: Server sent unexpected return value (405 Method Not Allowed)
 > in response to PROPFIND request for '/svn/metapost/branches/devel'

I get

  $ svn up
  [...stuff omitted...]
  Updated to revision 3455.

and 

  svn co http://foundry.supelec.fr/svn/luatex

obviously works too (though I aborted the download in order to avoid
unnecessary network traffic).

Maybe it's sufficient to try again.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From taco at elvenkind.com  Sun Mar  7 08:48:18 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 07 Mar 2010 08:48:18 +0100
Subject: [Dev-luatex]
	Cron	<luatex@boekplan>	/var/www/luatex.org/www/bin/luatex-svn
In-Reply-To: <19346.53119.450763.529082@zaphod.ms25.net>
References: <20100305212444.B3B4C40059@mail.boekplan.nl>	<4B923338.7060707@elvenkind.com>
	<19346.53119.450763.529082@zaphod.ms25.net>
Message-ID: <4B935A42.4040206@elvenkind.com>


Hi,

Reinhard Kotucha wrote:
> 
> I get
> 
>   $ svn up
>   [...stuff omitted...]
>   Updated to revision 3455.

Fabrice replied to me personally after fixing the problem.

Best wishes,
Taco

From root at mail.boekplan.nl  Sun Mar  7 12:25:52 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun,  7 Mar 2010 12:25:52 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100307112552.7A9804005A@mail.boekplan.nl>

------------------------------------------------------------------------
r3456 | taco | 2010-03-07 10:12:36 +0100 (Sun, 07 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/splinefont.h
   M /trunk/source/texk/web2c/luatexdir/luafontloader/src/luafflib.c

memleak patches from Elie Roux

------------------------------------------------------------------------

From root at mail.boekplan.nl  Mon Mar  8 12:25:48 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon,  8 Mar 2010 12:25:48 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100308112548.D230040059@mail.boekplan.nl>

------------------------------------------------------------------------
r3457 | taco | 2010-03-08 10:58:58 +0100 (Mon, 08 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.h

make only the pointer to varmem volatile instead of the whole
array (suggested by PEB)

------------------------------------------------------------------------

From root at mail.boekplan.nl  Mon Mar  8 16:25:08 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon,  8 Mar 2010 16:25:08 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100308152508.0D1DF40059@mail.boekplan.nl>

------------------------------------------------------------------------
r3458 | taco | 2010-03-08 14:32:11 +0100 (Mon, 08 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c

implement tex.tprint()

------------------------------------------------------------------------

From root at mail.boekplan.nl  Mon Mar  8 22:25:12 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon,  8 Mar 2010 22:25:12 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100308212512.B44EC40059@mail.boekplan.nl>

------------------------------------------------------------------------
r3459 | taco | 2010-03-08 17:27:54 +0100 (Mon, 08 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /trunk/source/texk/web2c/luatexdir/lua/luatex-api.h
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.c
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.h

* fix a silly bug in tex.tprint()
* implement tex.linebreak()

------------------------------------------------------------------------

From root at mail.boekplan.nl  Tue Mar  9 12:25:47 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue,  9 Mar 2010 12:25:47 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100309112547.46AAB40059@mail.boekplan.nl>

------------------------------------------------------------------------
r3460 | taco | 2010-03-09 10:15:28 +0100 (Tue, 09 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/mplibdir/mp.w

an extra minus sneaked into cubic_intersection()

------------------------------------------------------------------------
r3461 | taco | 2010-03-09 11:20:54 +0100 (Tue, 09 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /trunk/source/texk/web2c/luatexdir/tex/align.c
   M /trunk/source/texk/web2c/luatexdir/tex/buildpage.c
   M /trunk/source/texk/web2c/luatexdir/tex/dumpdata.c
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.c
   M /trunk/source/texk/web2c/luatexdir/tex/nesting.c
   M /trunk/source/texk/web2c/luatexdir/tex/nesting.h
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.c
   M /trunk/source/texk/web2c/luatexdir/tex/scanning.c
   M /trunk/source/texk/web2c/luatexdir/tex/texmath.c
   M /trunk/source/texk/web2c/luatexdir/tex/texmath.h

remove the list_state_record aux field: split into prev_depth, space_factor and incompleat_noad fields

------------------------------------------------------------------------

From root at mail.boekplan.nl  Tue Mar  9 16:25:09 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue,  9 Mar 2010 16:25:09 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100309152509.C4DAE40059@mail.boekplan.nl>

------------------------------------------------------------------------
r3462 | taco | 2010-03-09 14:00:20 +0100 (Tue, 09 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /trunk/source/texk/web2c/luatexdir/tex/buildpage.c
   M /trunk/source/texk/web2c/luatexdir/tex/equivalents.c
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.c
   M /trunk/source/texk/web2c/luatexdir/tex/nesting.c
   M /trunk/source/texk/web2c/luatexdir/tex/nesting.h
   M /trunk/source/texk/web2c/luatexdir/tex/scanning.c

move cur_list into nest[nest_ptr]

------------------------------------------------------------------------

From root at mail.boekplan.nl  Tue Mar  9 22:25:22 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue,  9 Mar 2010 22:25:22 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100309212522.E08A740059@mail.boekplan.nl>

------------------------------------------------------------------------
r3463 | taco | 2010-03-09 16:44:32 +0100 (Tue, 09 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/nesting.c

simplify this source file a bit

------------------------------------------------------------------------
r3464 | taco | 2010-03-09 16:47:00 +0100 (Tue, 09 Mar 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c

implement a lua interface to the semantic nesting levels

------------------------------------------------------------------------
r3465 | taco | 2010-03-09 17:10:20 +0100 (Tue, 09 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c

fix uninitialized parameters being used with there is no second argument
to tex.linebreak. (spotted by Martin)

------------------------------------------------------------------------

From root at mail.boekplan.nl  Thu Mar 11 12:25:48 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Thu, 11 Mar 2010 12:25:48 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100311112548.9F04440059@mail.boekplan.nl>

------------------------------------------------------------------------
r3466 | taco | 2010-03-11 11:50:35 +0100 (Thu, 11 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c

fix a nesting level bug in tex.linebreak, and add support
for 'parshape'

------------------------------------------------------------------------
r3467 | taco | 2010-03-11 11:59:30 +0100 (Thu, 11 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c

flush the parshape node

------------------------------------------------------------------------

From taco at elvenkind.com  Fri Mar 12 10:59:07 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 12 Mar 2010 10:59:07 +0100
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <4B8E6B71.70603@elvenkind.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>		<4B8CB7BD.1050807@elvenkind.com>		<e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>		<4B8D0B38.6000500@wxs.nl>	<e7fba2611003030539i5651ffa7l2b33600f390076f5@mail.gmail.com>
	<4B8E6B71.70603@elvenkind.com>
Message-ID: <4B9A106B.10101@elvenkind.com>

Taco Hoekwater wrote:
> 
> T T wrote:
>> followed. This short/long file naming duality is a legacy of an ugly
>> hack MS once pulled, and it is unlikely to ever disappear, I'm afraid.
> 
> Tracker item added:
> 
>   http://tracker.luatex.org/view.php?id=338
> 

This is now in TRUNK, please test. (I verified it works under wine)

Best wishes,
Taco

From root at mail.boekplan.nl  Fri Mar 12 12:25:49 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 12 Mar 2010 12:25:49 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100312112549.6A62840059@mail.boekplan.nl>

------------------------------------------------------------------------
r3468 | taco | 2010-03-12 09:22:16 +0100 (Fri, 12 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lfontlib.c

dont ignore the return value of font_to_lua()

------------------------------------------------------------------------
r3469 | taco | 2010-03-12 09:37:54 +0100 (Fri, 12 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/luafont.c

dont use the global Lua state in define_font, because
font_to_lua() may be called from a coroutine (with its own lua)

------------------------------------------------------------------------
r3470 | taco | 2010-03-12 09:45:40 +0100 (Fri, 12 Mar 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

document font.cache / coroutines interference

------------------------------------------------------------------------
r3471 | taco | 2010-03-12 10:17:38 +0100 (Fri, 12 Mar 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

add a few stability remarks

------------------------------------------------------------------------
r3472 | taco | 2010-03-12 10:51:20 +0100 (Fri, 12 Mar 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/luafilesystem/src/lfs.c

add lfs.shortname() and document lfs.shortname() and lfs.readlink()

------------------------------------------------------------------------

From taco at elvenkind.com  Fri Mar 12 13:45:56 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 12 Mar 2010 13:45:56 +0100
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <4B8E6D17.2060602@elvenkind.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>		<4B8CB7BD.1050807@elvenkind.com>	<e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>
	<4B8E6D17.2060602@elvenkind.com>
Message-ID: <4B9A3784.3080303@elvenkind.com>

Taco Hoekwater wrote:
> 
> Tracker item:
> 
>   http://tracker.luatex.org/view.php?id=339

New functionality in TRUNK:


\subsection{\luatex{lookup}}

A more powerful (but slower) generic method for finding files is also
available (since 0.51).

\startfunctioncall
<string> f, ... = kpse.lookup(<string> filename, <table> options)
\stopfunctioncall

The options match commandline arguments from \type{kpsewhich}:

\starttabulate[|l|l|p|]
\NC \ssbf key \NC \ssbf type \NC \ssbf description \NC \NR
\NC debug     \NC number     \NC set debugging flags for this lookup\NC 
     \NR
\NC format    \NC string     \NC use specific file type (see list 
above)\NC \NR
\NC dpi       \NC number     \NC use this resolution for this lookup; 
default 600\NC \NR
\NC path      \NC string     \NC search in the given path\NC \NR
\NC all       \NC boolean    \NC output all matches, not just the 
first\NC \NR
\NC must-exist\NC boolean    \NC search the disk as well as ls-R if 
necessary\NC \NR
\NC mktexpk   \NC boolean    \NC disable/enable mktexpk generation for 
this lookup\NC \NR
\NC mktextex  \NC boolean    \NC disable/enable mktextex generation for 
this lookup\NC \NR
\NC mktexmf   \NC boolean    \NC disable/enable mktexmf generation for 
this lookup\NC \NR
\NC mktextfm  \NC boolean    \NC disable/enable mktextfm generation for 
this lookup\NC \NR
\NC subdir    \NC string
                   or table   \NC only output matches whose directory part
                                  ends with the given string(s) \NC \NR
\stoptabulate

\subsection{\luatex{version}}

Returns the kpathsea version string (new in 0.51)

\startfunctioncall
<string> r = kpse.version()
\stopfunctioncall



Best wishes,
Taco

From taco at elvenkind.com  Fri Mar 12 15:44:15 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 12 Mar 2010 15:44:15 +0100
Subject: [Dev-luatex] Luatex 0.51.0 announcement
Message-ID: <4B9A533F.700@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.51.0.

New features:

* Various small manual improvements.
* The backend message "cannot open Type 1 font file for reading"
   now reports which Type1 font it was looking for.
* Fontforge clears some font names at loading time that will be
   refilled in at font generation time, but the fontloader should not
   do that. Patch from Khaled Hosny.
* New synctex code imported from TeXLive.
* luamd5/md5.h is renamed to luamd5/luamd5.h to avoid confusion.
* Embedded mplib is now 1.209.
* Some experimental tweaking of buildpage_filter, see the manual
   for details.
* Luatex now detects kfreebsd (from Alan Braslau)
* The new lua function tex.sp() converts a string to a number
   representing scaled points.
* There is now support for revision numbers in the banner and stats
   library again.
* The command line help and manual documentation page is extended.
* node.hpack() now also accepts "cal_expand_ratio" and "subst_ex_font"
   modifiers.
* node.hpack() and node.vpack() now give back the badness of the box
   as second return value.
* node.copy_list() now allows a second (stop) argument, this stopper
   is not copied.
* new lua functions in lfs: lfs.readlink() and lfs.shortname().
* new lua function tex.tprint() that can combine multiple catcode
   regime prints in one function call.
* new lua sub-table: tex.nest[] (read/write access to the semantic
   nest state).
* New lua functions in kpse: kpse.lookup() and kpse.version(). See
   the manual for more details.
* New lua function tex.shipout().

Bug fixes:

* There problems in the pdf output for Type3 (pk) fonts.
* Fix a bug that allowed bad commandline quoting.
* Fix a bug that sometimes caused crashes when \pdfprotrudechars.
* The build script now exports CONFIG_SHELL to avoid problems with
   /bin/dash.
* The was a bug in the generated /Image /ProcSet.
* status.font_bytes reported the wrong value.
* Lots of compiler warnings are removed (thanks Javier Mugica).
* Patch to fontloader.info() to accept filenames with embedded
   parentheses.
* Fix a \write error with docstrip package.
* Fixed a crash on AdobeMyungjoStd-Medium.otf.
* Fix coco stack overflows, needed for lpeg.
* \pdfcompresslevel wasn't initialized for early immediate objects.
* Fix for slanted fonts when HZ was on (slant angle was multiplied).
* When concatenating content streams, put a space between them.
* Allow pfb lines to end with \r as well as \n (for msam10.pfb).
* Fix the internal string->scaled point conversion in the lua
   interface.
* Memory leaks in the fontloader removed, thanks to patches from
   Elie Roux.
* Fix a crash caused by the combination of coroutines and font.each().

Removed features:

* Support for Type3 .pgc files (nobody used them).


The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

   svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.51.0

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org


Have fun,
Taco


From taco at elvenkind.com  Fri Mar 12 15:58:05 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 12 Mar 2010 15:58:05 +0100
Subject: [Dev-luatex] Luatex 0.51.0 announcement
In-Reply-To: <4B9A533F.700@elvenkind.com>
References: <4B9A533F.700@elvenkind.com>
Message-ID: <4B9A567D.9050904@elvenkind.com>

Taco Hoekwater wrote:
> Hi,
> 
> I have just uploaded the archives for a new luatex release, 0.51.0.
> 
> New features:
> 

Actually, there is another feature but it is experimental enough that
it is not documented in the manual yet.

   local <node> nodelist, <sp> founddepth =
        tex.linebreak(<node> listhead, <table> parameters)

The understood parameters are as follows (with example code):

     d = false,                       % boolean
     pardir = 'TLT',                  % dir
     pretolerance = 100,              % number
     tracingparagraphs = 0,           % number
     tolerance = 200,                 % number
     looseness = 0,                   % number
     hyphenpenalty = 50,              % number
     exhyphenpenalty = 50,            % number
     pdfadjustspacing = 0,            % number
     adjdemerits = 10000,             % number
     pdfprotrudechars = 0,            % number
     linepenalty = 10,                % number
     lastlinefit = 0,                 % number
     doublehyphendemerits = 10000,    % number
     finalhyphendemerits = 5000,      % number
     hangafter = 1,                   % number
     interlinepenalty = 0,            % number
     clubpenalty = 150,               % number
     displaywidowpenalty = 150,       % number
     widowpenalty = 150,              % number
     brokenpenalty = 100,             % number
     emergencystretch = 0,            % sp
     hangindent = 0,                  % sp
     hsize = 65536*72*4,              % sp
     leftskip = spec,                 % glue_spec node
     rightskip = spec,                % glue_spec node
     parshape = {}                    % tabke
     pdfeachlineheight = -65536000,   % sp
     pdfeachlinedepth = -65536000,    % sp
     pdffirstlineheight =-65536000,   % sp
     pdflastlinedepth = -65536000,    % sp
     pdfignoreddimen = -65536000,     % sp

The 'd' is whether or not this should be taken as a pre-math-display
subparagraph, everything else should be fairly obvious except for
the last 5. The four pdf...line... things are ignored if their value
equals pdfignoreddimen. Parshape is a list of 2-item arrays, like
that returned from tex.parshape:

   local j = tex.linebreak(h,{parshape = {
                      {tex.sp'1in',tex.sp'6in'},
                      {tex.sp'3in',tex.sp'3in'},
                      {tex.sp'4in',tex.sp'2in'},
                      {tex.sp'1in',tex.sp'6in'}}})


It is your own job to make sure that 'listhead' is a proper paragraph
list: this function does not add any nodes to it. To be exact, if
you want to replace the core line breaking, you may have to do the 
following (when you are not actually working in the pre_line_break or
line_break callback, or when the original list starting at listhead
was generated in horizontal mode):

* make sure that all the prev pointers are ok, for example by
   using node.slide(listhead)
* you may have to run lang.hyphenate(), node.ligaturing() or
   node.kerning()
* add an 'indent box' and perhaps a local_par node at the start
   (only if you need them)
* replace any found final glue by an infinite penalty (or add such
   a penalty, if the last node is not a glue).
* add a glue node for the \parfillskip after that penalty.

The result is just a node list, it still needs to be vpacked.

There are a few special things you cannot interface using this function,
because there is no lua glue for the underlying data yet:

   \interlinepenalties
   \clubpenalties
   \displaywidowpenalties
   \widowpenalties

Also, you can't influence font expansion other than via
'pdfadjustspacing', because the settings for that take place elsewhere.
The same is true for hbadness and hfuzz etc. All these are in the
hpack() routine, and that fetches its own variables via globals.

If there are no complaints, I plan to officially document this function
for version 0.60.

Best wishes,
Taco



From root at mail.boekplan.nl  Fri Mar 12 16:25:37 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 12 Mar 2010 16:25:37 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100312152537.5B02B4005B@mail.boekplan.nl>

------------------------------------------------------------------------
r3473 | taco | 2010-03-12 13:30:01 +0100 (Fri, 12 Mar 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/lua/lkpselib.c

implement and document kpse.lookup()

------------------------------------------------------------------------
r3474 | taco | 2010-03-12 13:38:14 +0100 (Fri, 12 Mar 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/lua/lkpselib.c

implement and document kpse.version()

------------------------------------------------------------------------
r3475 | taco | 2010-03-12 14:36:30 +0100 (Fri, 12 Mar 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c

implement tex.shipout()

------------------------------------------------------------------------
r3476 | taco | 2010-03-12 14:58:06 +0100 (Fri, 12 Mar 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf

regenerated manual

------------------------------------------------------------------------
r3477 | taco | 2010-03-12 14:59:34 +0100 (Fri, 12 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/luafont.c
   M /trunk/source/texk/web2c/luatexdir/font/writecff.c
   M /trunk/source/texk/web2c/luatexdir/font/writet1.c
   M /trunk/source/texk/web2c/luatexdir/lua/lfontlib.c
   M /trunk/source/texk/web2c/luatexdir/lua/lkpselib.c
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /trunk/source/texk/web2c/luatexdir/lua/loslibext.c
   M /trunk/source/texk/web2c/luatexdir/lua/lstatslib.c
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /trunk/source/texk/web2c/luatexdir/lua/luainit.c
   M /trunk/source/texk/web2c/luatexdir/tex/align.c
   M /trunk/source/texk/web2c/luatexdir/tex/arithmetic.c
   M /trunk/source/texk/web2c/luatexdir/tex/arithmetic.h
   M /trunk/source/texk/web2c/luatexdir/tex/buildpage.c
   M /trunk/source/texk/web2c/luatexdir/tex/nesting.c
   M /trunk/source/texk/web2c/luatexdir/tex/nesting.h
   M /trunk/source/texk/web2c/luatexdir/tex/postlinebreak.c
   M /trunk/source/texk/web2c/luatexdir/tex/printing.c
   M /trunk/source/texk/web2c/luatexdir/tex/scanning.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.h

indent

------------------------------------------------------------------------
r3478 | taco | 2010-03-12 15:01:05 +0100 (Fri, 12 Mar 2010) | 2 lines
Changed paths:
   A /tags/beta-0.51.0 (from /trunk:3477)

new tag

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Mar 12 22:25:22 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 12 Mar 2010 22:25:22 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100312212522.CCFD240059@mail.boekplan.nl>

------------------------------------------------------------------------
r3479 | oneiros | 2010-03-12 17:32:35 +0100 (Fri, 12 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfpage.c

indent

------------------------------------------------------------------------

From dak at gnu.org  Sat Mar 13 09:43:44 2010
From: dak at gnu.org (David Kastrup)
Date: Sat, 13 Mar 2010 09:43:44 +0100
Subject: [Dev-luatex] Luatex 0.51.0 announcement
In-Reply-To: <4B9A567D.9050904@elvenkind.com> (Taco Hoekwater's message of
	"Fri, 12 Mar 2010 15:58:05 +0100")
References: <4B9A533F.700@elvenkind.com> <4B9A567D.9050904@elvenkind.com>
Message-ID: <87mxycharj.fsf@lola.goethe.zz>

Taco Hoekwater <taco at elvenkind.com> writes:

> Taco Hoekwater wrote:
>> Hi,
>>
>> I have just uploaded the archives for a new luatex release, 0.51.0.
>>
>> New features:
>>
>
> Actually, there is another feature but it is experimental enough that
> it is not documented in the manual yet.
>
>   local <node> nodelist, <sp> founddepth =
>        tex.linebreak(<node> listhead, <table> parameters)
>
> The understood parameters are as follows (with example code):

A few notes: badness/demerits output?

And I think it would be beneficial to have incremental line breaking,
where you have as an input (and output) the list of current best
breakpoints.  That would make it possible to have text flow around
shapes without requiring everything to fit a fixed base line distance.

It also would make it possible to develop strategies for adjusting line
break decisions depending on pagebreaks (\brokenpenalty, \widowpenalty
and their ilk can't have the paragraph rebroken right now, making them
pretty useless with fixed bottom page layouts).

-- 
David Kastrup

From taco at elvenkind.com  Sat Mar 13 10:40:40 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 13 Mar 2010 10:40:40 +0100
Subject: [Dev-luatex] Luatex 0.51.0 announcement
In-Reply-To: <87mxycharj.fsf@lola.goethe.zz>
References: <4B9A533F.700@elvenkind.com> <4B9A567D.9050904@elvenkind.com>
	<87mxycharj.fsf@lola.goethe.zz>
Message-ID: <4B9B5D98.4050005@elvenkind.com>

David Kastrup wrote:
> Taco Hoekwater <taco at elvenkind.com> writes:
> 
>> Taco Hoekwater wrote:
>>> Hi,
>>>
>>> I have just uploaded the archives for a new luatex release, 0.51.0.
>>>
>>> New features:
>>>
>> Actually, there is another feature but it is experimental enough that
>> it is not documented in the manual yet.
>>
>>   local <node> nodelist, <sp> founddepth =
>>        tex.linebreak(<node> listhead, <table> parameters)
>>
>> The understood parameters are as follows (with example code):
> 
> A few notes: badness/demerits output?

I'll see what can be done about that.

> And I think it would be beneficial to have incremental line breaking,
> where you have as an input (and output) the list of current best
> breakpoints.  That would make it possible to have text flow around
> shapes without requiring everything to fit a fixed base line distance.

Here I am not sure what you have in mind exactly. Can you create
a mock up of the requested input/output?

I will also say that -- before you spend a lot of time on this -- there
are plans for a pure lua version of the whole line break algorithm. We
did some experiments with that, and it is not noticeably slower on an
average (context) document.

> It also would make it possible to develop strategies for adjusting line
> break decisions depending on pagebreaks (\brokenpenalty, \widowpenalty
> and their ilk can't have the paragraph rebroken right now, making them
> pretty useless with fixed bottom page layouts).

You can already re-break the paragraph with the current tex.linebreak:
just create a copy of the node list before feeding it in, and loop over
the output boxes. tex.linebreak does not remove or reallocate those
existing nodes, at most it hides them in discretionaries inside hlists.
Probably this is not quite what you had in mind, though.


Best wishes,
Taco



From taco at boekplan.nl  Sat Mar 13 12:03:26 2010
From: taco at boekplan.nl (Taco Hoekwater)
Date: Sat, 13 Mar 2010 12:03:26 +0100
Subject: [Dev-luatex] bug 345: Kerning is not perfect in math mode
Message-ID: <4B9B70FE.6060209@boekplan.nl>

Hi,

See http://tracker.luatex.org/view.php?id=345

I've tried to fix this by checking the \catcode of the current
character for 'new math fons' instead of relying on the font's
space() fontdimen like TeX82 does.

This fix is based on the assumption that the 'high numbers' won't
have \catcode 11, so that only the low upright alphabetic characters
will have the italic correction stripped, and those are exactly the
ones we want to reach in 'typical' new math input: this nicely covers
operators that have 'names' like \sin, and any other uses of \rm
in math mode.

The downside is that this fix will break stuff like

   $ A {\it forces} B $

but I see no way to tackle that automatically.

Best wishes,
Taco

From taco at elvenkind.com  Sat Mar 13 12:08:36 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 13 Mar 2010 12:08:36 +0100
Subject: [Dev-luatex] bug 345: Kerning is not perfect in math mode
In-Reply-To: <4B9B70FE.6060209@boekplan.nl>
References: <4B9B70FE.6060209@boekplan.nl>
Message-ID: <4B9B7234.7020402@elvenkind.com>

Taco Hoekwater wrote:
> Hi,
> 
> See http://tracker.luatex.org/view.php?id=345
> 
> I've tried to fix this by checking the \catcode of the current
> character for 'new math fons' instead of relying on the font's
> space() fontdimen like TeX82 does.
> 
> This fix is based on the assumption that the 'high numbers' won't
> have \catcode 11, so that only the low upright alphabetic characters
> will have the italic correction stripped, and those are exactly the
> ones we want to reach in 'typical' new math input: this nicely covers
> operators that have 'names' like \sin, and any other uses of \rm
> in math mode.
> 
> The downside is that this fix will break stuff like
> 
>   $ A {\it forces} B $
> 
> but I see no way to tackle that automatically.

Of course this is only the case if 'forces' is automatically
remapped to the high part of the math range. If \it is an actual
font switch, all will be fine. So I assume this means the current
fix is acceptable.

Best wishes,
Taco


From pragma at wxs.nl  Sat Mar 13 12:20:52 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 13 Mar 2010 12:20:52 +0100
Subject: [Dev-luatex] bug 345: Kerning is not perfect in math mode
In-Reply-To: <4B9B70FE.6060209@boekplan.nl>
References: <4B9B70FE.6060209@boekplan.nl>
Message-ID: <4B9B7514.4030303@wxs.nl>

On 13-3-2010 12:03, Taco Hoekwater wrote:
> Hi,
>
> See http://tracker.luatex.org/view.php?id=345
>
> I've tried to fix this by checking the \catcode of the current
> character for 'new math fons' instead of relying on the font's
> space() fontdimen like TeX82 does.
>
> This fix is based on the assumption that the 'high numbers' won't
> have \catcode 11, so that only the low upright alphabetic characters
> will have the italic correction stripped, and those are exactly the
> ones we want to reach in 'typical' new math input: this nicely covers
> operators that have 'names' like \sin, and any other uses of \rm
> in math mode.
>
> The downside is that this fix will break stuff like
>
> $ A {\it forces} B $
>
> but I see no way to tackle that automatically.

can it be solved with extra info that travels with the glyphs? after 
all, there are not that many math fonts and we could add extra info 
(e.g. using fea files)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From root at mail.boekplan.nl  Sat Mar 13 12:26:28 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat, 13 Mar 2010 12:26:28 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100313112628.2872740059@mail.boekplan.nl>

------------------------------------------------------------------------
r3480 | taco | 2010-03-13 11:48:45 +0100 (Sat, 13 Mar 2010) | 5 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/mlist.c

an attempt at a fix for bug 345: when the current math font
is a new math font, check against \catcode <cur_c> == 11
to suppress the italic correction, instead of looking at
the value of space(<cur_f>).

------------------------------------------------------------------------
r3481 | taco | 2010-03-13 11:50:25 +0100 (Sat, 13 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/mlist.c

previous commit left a debug print statement in

------------------------------------------------------------------------

From taco at elvenkind.com  Sat Mar 13 12:27:43 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 13 Mar 2010 12:27:43 +0100
Subject: [Dev-luatex] bug 345: Kerning is not perfect in math mode
In-Reply-To: <4B9B7514.4030303@wxs.nl>
References: <4B9B70FE.6060209@boekplan.nl> <4B9B7514.4030303@wxs.nl>
Message-ID: <4B9B76AF.50707@elvenkind.com>

Hans Hagen wrote:
> 
> can it be solved with extra info that travels with the glyphs? after 
> all, there are not that many math fonts and we could add extra info 
> (e.g. using fea files)

Fea files won't make anybody happy. If there is a real need, we can
add a new internal code table. But I would first like to hear whether
there are any objections to using the category code.

From dak at gnu.org  Sat Mar 13 13:16:10 2010
From: dak at gnu.org (David Kastrup)
Date: Sat, 13 Mar 2010 13:16:10 +0100
Subject: [Dev-luatex] Luatex 0.51.0 announcement
In-Reply-To: <4B9B5D98.4050005@elvenkind.com> (Taco Hoekwater's message of
	"Sat, 13 Mar 2010 10:40:40 +0100")
References: <4B9A533F.700@elvenkind.com> <4B9A567D.9050904@elvenkind.com>
	<87mxycharj.fsf@lola.goethe.zz> <4B9B5D98.4050005@elvenkind.com>
Message-ID: <87iq90mn79.fsf@lola.goethe.zz>

Taco Hoekwater <taco at elvenkind.com> writes:

> David Kastrup wrote:
>> Taco Hoekwater <taco at elvenkind.com> writes:
>>
>>> Taco Hoekwater wrote:
>>>> Hi,
>>>>
>>>> I have just uploaded the archives for a new luatex release, 0.51.0.
>>>>
>>>> New features:
>>>>
>>> Actually, there is another feature but it is experimental enough that
>>> it is not documented in the manual yet.
>>>
>>>   local <node> nodelist, <sp> founddepth =
>>>        tex.linebreak(<node> listhead, <table> parameters)
>>>
>>> The understood parameters are as follows (with example code):
>>
>> A few notes: badness/demerits output?
>
> I'll see what can be done about that.
>
>> And I think it would be beneficial to have incremental line breaking,
>> where you have as an input (and output) the list of current best
>> breakpoints.  That would make it possible to have text flow around
>> shapes without requiring everything to fit a fixed base line distance.
>
> Here I am not sure what you have in mind exactly. Can you create
> a mock up of the requested input/output?

Not exactly easy.  The line break algorithm maintains a list of best
active breakpoints in the "current line" under consideration, and each
breakpoint is associated with a previous list of breakpoints.  (Some
sort of shortest path traversal).  My first thought was that the
"incremental line" breaking would add another line, but that's not
actually a useful unit.  Perhaps it would be able to do the paragraph
breaking until a certain height is certainly exceeded.  Then one has the
list of possible breakpoints for the current line, each with a score and
a list of preceding breakpoints.

> I will also say that -- before you spend a lot of time on this --
> there are plans for a pure lua version of the whole line break
> algorithm. We did some experiments with that, and it is not noticeably
> slower on an average (context) document.

Whether or not one has a C primitive for doing one step of the algorithm
is probably not so important then.

> You can already re-break the paragraph with the current tex.linebreak:
> just create a copy of the node list before feeding it in, and loop
> over the output boxes. tex.linebreak does not remove or reallocate
> those existing nodes, at most it hides them in discretionaries inside
> hlists.  Probably this is not quite what you had in mind, though.

Fiddle and reiterate might do the trick most of the time, but it feels
artificial in contrast to doing it in one pass "as intended" rather than
brute-forcing an efficient algorithm iteratively.

-- 
David Kastrup

From martin at oneiros.de  Sat Mar 13 14:45:27 2010
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sat, 13 Mar 2010 14:45:27 +0100
Subject: [Dev-luatex] svn: OPTIONS of
	'http://scm.foundry.supelec.fr/svn/luatex': 200 OK
	(http://scm.foundry.supelec.fr)
Message-ID: <68c491a61003130545m6178ba20y1b406faaa162ed55@mail.gmail.com>

> LANG=C svn up
svn: OPTIONS of 'http://scm.foundry.supelec.fr/svn/luatex': 200 OK
(http://scm.foundry.supelec.fr)
> LANG=C svn info .
Path: .
URL: http://scm.foundry.supelec.fr/svn/luatex
Repository Root: http://scm.foundry.supelec.fr/svn/luatex
Repository UUID: 0b2b3880-5936-4365-a048-eb17d2e5a6bf
Revision: 3440
Node Kind: directory
Schedule: normal
Depth: immediates
Last Changed Author: taco
Last Changed Rev: 3440
Last Changed Date: 2010-02-21 18:18:29 +0100 (Sun, 21 Feb 2010)

From root at mail.boekplan.nl  Sat Mar 13 16:25:33 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat, 13 Mar 2010 16:25:33 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100313152533.6119640059@mail.boekplan.nl>

------------------------------------------------------------------------
r3482 | taco | 2010-03-13 12:18:28 +0100 (Sat, 13 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/luafont.c
   M /trunk/source/texk/web2c/luatexdir/font/texfont.h

add a new font key: units_per_em (defaults to 0 == unknown)

------------------------------------------------------------------------
r3483 | taco | 2010-03-13 12:33:16 +0100 (Sat, 13 Mar 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

documented pending removal of tex.wd, tex.ht and tex.dp

------------------------------------------------------------------------
r3484 | hhenkel | 2010-03-13 12:54:15 +0100 (Sat, 13 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfglyph.c

mantis bug 0000200 fix (incomplete yet)

------------------------------------------------------------------------
r3485 | hhenkel | 2010-03-13 13:03:29 +0100 (Sat, 13 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/writecff.c

mantis bug 0000200 fix attempt (yet needs context adaption)

------------------------------------------------------------------------
r3486 | hhenkel | 2010-03-13 14:19:18 +0100 (Sat, 13 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/writecff.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfglyph.c

still mantis bug 0000200; fix was wrong for Truetype fonts

------------------------------------------------------------------------
r3487 | hhenkel | 2010-03-13 15:26:16 +0100 (Sat, 13 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/writecff.c

simplify bugfix

------------------------------------------------------------------------
r3488 | hhenkel | 2010-03-13 15:39:15 +0100 (Sat, 13 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/writecff.c

fix wasn't rugged against array overflow

------------------------------------------------------------------------

From taco at elvenkind.com  Sat Mar 13 18:18:48 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 13 Mar 2010 18:18:48 +0100
Subject: [Dev-luatex] svn: OPTIONS
 of	'http://scm.foundry.supelec.fr/svn/luatex': 200
 OK	(http://scm.foundry.supelec.fr)
In-Reply-To: <68c491a61003130545m6178ba20y1b406faaa162ed55@mail.gmail.com>
References: <68c491a61003130545m6178ba20y1b406faaa162ed55@mail.gmail.com>
Message-ID: <4B9BC8F8.8050004@elvenkind.com>


Hi,

Martin Schr?der wrote:
>> LANG=C svn up
> svn: OPTIONS of 'http://scm.foundry.supelec.fr/svn/luatex': 200 OK
> (http://scm.foundry.supelec.fr)

The repo switched to http://foundry.supelec.fr/svn/luatex a while back.

Best wishes,
Taco

From taco at elvenkind.com  Sat Mar 13 18:20:13 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 13 Mar 2010 18:20:13 +0100
Subject: [Dev-luatex] Luatex 0.51.0 announcement
In-Reply-To: <87iq90mn79.fsf@lola.goethe.zz>
References: <4B9A533F.700@elvenkind.com>
	<4B9A567D.9050904@elvenkind.com>	<87mxycharj.fsf@lola.goethe.zz>
	<4B9B5D98.4050005@elvenkind.com> <87iq90mn79.fsf@lola.goethe.zz>
Message-ID: <4B9BC94D.5060102@elvenkind.com>

David Kastrup wrote:
> Taco Hoekwater <taco at elvenkind.com> writes:
>> You can already re-break the paragraph with the current tex.linebreak:
>> just create a copy of the node list before feeding it in, and loop
>> over the output boxes. tex.linebreak does not remove or reallocate
>> those existing nodes, at most it hides them in discretionaries inside
>> hlists.  Probably this is not quite what you had in mind, though.
> 
> Fiddle and reiterate might do the trick most of the time, but it feels
> artificial in contrast to doing it in one pass "as intended" rather than
> brute-forcing an efficient algorithm iteratively.

I agree, and that is an important drive behind the wish for a pure
lua solution.

Best wishes,
Taco



From martin at oneiros.de  Sat Mar 13 18:29:53 2010
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sat, 13 Mar 2010 18:29:53 +0100
Subject: [Dev-luatex] svn: OPTIONS of
	'http://scm.foundry.supelec.fr/svn/luatex': 200 OK
	(http://scm.foundry.supelec.fr)
In-Reply-To: <4B9BC8F8.8050004@elvenkind.com>
References: <68c491a61003130545m6178ba20y1b406faaa162ed55@mail.gmail.com>
	<4B9BC8F8.8050004@elvenkind.com>
Message-ID: <68c491a61003130929v3b6e24d8x843e9e9157b28047@mail.gmail.com>

2010/3/13 Taco Hoekwater <taco at elvenkind.com>:
> The repo switched to http://foundry.supelec.fr/svn/luatex a while back.

Stupid me. Thanks.

Best
    Martin

From c.a.rowley at open.ac.uk  Sat Mar 13 20:22:46 2010
From: c.a.rowley at open.ac.uk (c.a.rowley at open.ac.uk)
Date: Sat, 13 Mar 2010 19:22:46 +0000
Subject: [Dev-luatex] bug 345: Kerning is not perfect in math mode
In-Reply-To: <mailman.907.1268500821.26807.dev-luatex@ntg.nl>
References: <mailman.907.1268500821.26807.dev-luatex@ntg.nl>
Message-ID: <OFDFD8756E.1A53244A-ON802576E5.006A7476-802576E5.006A747D@mcs-notes1.open.ac.uk>

Since I do not seem to have access to this:

http://tracker.luatex.org/view.php?id=345

I am not quite sure what you are tryinng to hack.

It appears to be something to do with the 2nd plane math characters (something I have gone around many times on the MathML group).  One major problem is that these character slot repertoires are incomplete in incompatible ways but that may not affect what you are doing here.  I would have thought that when using 'standard tex-like input' and tex-like processing there are a lot of arbitrary decisions to be made.

It seems unlikely that an assumption about catcodes is a good solution: but neither are catcodes in the first place and making assumptions about 'math fonts' was no better.  So why not replace one set-up assumption by another? other useful(??) questions are: what would the catcode of this bizarre set of math slots be?

More relevant: What exactly is the spec for how you want these things to behave in a world of large fonts and character sets?  What does 'compatibility' mean when this new world is opened-up?


chris
---------------------------------------------------------------------------
The Open University is incorporated by Royal Charter (RC 000391), an exempt charity in England & Wales and a charity registered in Scotland (SC 038302)

From preining at logic.at  Sun Mar 14 00:29:31 2010
From: preining at logic.at (Norbert Preining)
Date: Sun, 14 Mar 2010 08:29:31 +0900
Subject: [Dev-luatex] luatex 0.51.0 and libpoppler 0.12.* compile error
Message-ID: <20100313232931.GA16013@gamma.logic.tuwien.ac.at>

Hi Taco, hi all,

I was just playing around to get 0.51.0 compiled with libpopper, without
success unfortunately.

I have already one patch in my patch queue to help (for the pdf version,
see attached patch), but there is a new problem which I tried to find
a way around without success. Maybe someone here has an idea:
../../../source/texk/web2c/luatexdir/image/pdftoepdf.cc: In function ?void write_epdf1(pdf_output_file*, image_dict*)?:
../../../source/texk/web2c/luatexdir/image/pdftoepdf.cc:663: error: ?class Page? has no member named ?getResourcesNF?
../../../source/texk/web2c/luatexdir/image/pdftoepdf.cc:669: error: ?class Page? has no member named ?getMetadataNF?

I checked the header files from poppler and there is nothing like *NF :-(

Thanks for any suggestions, and all the best

Norbert
------------------------------------------------------------------------
Norbert Preining            preining@{jaist.ac.jp, logic.at, debian.org}
JAIST, Japan            TU Wien, Austria           Debian TeX Task Force
DSA: 0x09C5B094   fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
------------------------------------------------------------------------
He expanded his chest to make it totally clear that here
was the sort of man you only dared to cross if you had a
team of Sherpas with you.
                 --- Douglas Adams, The Hitchhikers Guide to the Galaxy
-------------- next part --------------
fix luatex for libpoppler 0.12
patch by Ilya Barygin
licensed under GPLv2, see <20091022102009.208b5935 at corner> on
debian-tex-maint  Debian mailing list
---
 source/texk/web2c/luatexdir/image/pdftoepdf.cc |   18 +++++++++++-------
 1 file changed, 11 insertions(+), 7 deletions(-)

Index: luatex-0.47.0/source/texk/web2c/luatexdir/image/pdftoepdf.cc
===================================================================
--- luatex-0.47.0.orig/source/texk/web2c/luatexdir/image/pdftoepdf.cc	2009-12-19 18:26:42.000000000 +0900
+++ luatex-0.47.0/source/texk/web2c/luatexdir/image/pdftoepdf.cc	2009-12-19 18:26:49.000000000 +0900
@@ -771,7 +771,8 @@
     int rotate;
     char *checksum;
     PDFRectangle *pagebox;
-    float pdf_version_found, pdf_version_wanted, xsize, ysize, xorig, yorig;
+    unsigned major_pdf_version_found, minor_pdf_version_found;
+    float xsize, ysize, xorig, yorig;
     assert(idict != NULL);
     assert(img_type(idict) == IMG_TYPE_PDF);
     assert(readtype == IMG_CLOSEINBETWEEN);     // only this is implemented
@@ -794,15 +795,18 @@
     // this works only for PDF 1.x -- but since any versions of PDF newer
     // than 1.x will not be backwards compatible to PDF 1.x, pdfTeX will
     // then have to changed drastically anyway.
-    pdf_version_found = pdf_doc->doc->getPDFVersion();
-    pdf_version_wanted = 1 + (minor_pdf_version_wanted * 0.1);
-    if (pdf_version_found > pdf_version_wanted + 0.01) {
+    major_pdf_version_found = pdf_doc->doc->getPDFMajorVersion();
+    minor_pdf_version_found = pdf_doc->doc->getPDFMinorVersion();
+    if (major_pdf_version_found > 1 ||
+        (major_pdf_version_found == 1 &&
+         minor_pdf_version_found > minor_pdf_version_wanted)
+       ) {
         char msg[] =
-            "PDF inclusion: found PDF version <%.1f>, but at most version <%.1f> allowed";
+            "PDF inclusion: found PDF version <%u.%u>, but at most version <1.%i> allowed";
         if (pdf_inclusion_errorlevel > 0) {
-            pdftex_fail(msg, pdf_version_found, pdf_version_wanted);
+            pdftex_fail(msg, major_pdf_version_found, minor_pdf_version_found, minor_pdf_version_wanted);
         } else {
-            pdftex_warn(msg, pdf_version_found, pdf_version_wanted);
+            pdftex_warn(msg, major_pdf_version_found, minor_pdf_version_found, minor_pdf_version_wanted);
         }
     }
     img_totalpages(idict) = pdf_doc->doc->getCatalog()->getNumPages();

From hartmut_henkel at gmx.de  Sun Mar 14 00:43:52 2010
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sun, 14 Mar 2010 00:43:52 +0100 (CET)
Subject: [Dev-luatex] luatex 0.51.0 and libpoppler 0.12.* compile error
In-Reply-To: <20100313232931.GA16013@gamma.logic.tuwien.ac.at>
References: <20100313232931.GA16013@gamma.logic.tuwien.ac.at>
Message-ID: <alpine.DEB.1.00.1003140037480.6668@hahepc1.hahe>

On Sun, 14 Mar 2010, Norbert Preining wrote:

> I was just playing around to get 0.51.0 compiled with libpopper,
> without success unfortunately.
>
> I have already one patch in my patch queue to help (for the pdf version,
> see attached patch), but there is a new problem which I tried to find
> a way around without success. Maybe someone here has an idea:
> ../../../source/texk/web2c/luatexdir/image/pdftoepdf.cc: In function ?void write_epdf1(pdf_output_file*, image_dict*)?:
> ../../../source/texk/web2c/luatexdir/image/pdftoepdf.cc:663: error: ?class Page? has no member named ?getResourcesNF?
> ../../../source/texk/web2c/luatexdir/image/pdftoepdf.cc:669: error: ?class Page? has no member named ?getMetadataNF?
>
> I checked the header files from poppler and there is nothing like *NF :-(
>
> Thanks for any suggestions, and all the best

well, i had patched xpdf-3.02 in the luatex distro, see SVN 3304,
source/libs/xpdf/xpdf-3.02/xpdf/Page.h

no real idea yet how to make this consistent with poppler.

Regards, Hartmut

From martin at oneiros.de  Sun Mar 14 00:54:42 2010
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sun, 14 Mar 2010 00:54:42 +0100
Subject: [Dev-luatex] luatex 0.51.0 and libpoppler 0.12.* compile error
In-Reply-To: <20100313232931.GA16013@gamma.logic.tuwien.ac.at>
References: <20100313232931.GA16013@gamma.logic.tuwien.ac.at>
Message-ID: <68c491a61003131554j3435afa1wc21d5117f341ff30@mail.gmail.com>

2010/3/14 Norbert Preining <preining at logic.at>:
> I have already one patch in my patch queue to help (for the pdf version,
> see attached patch), but there is a new problem which I tried to find
> a way around without success. Maybe someone here has an idea:
> ../../../source/texk/web2c/luatexdir/image/pdftoepdf.cc: In function ?void write_epdf1(pdf_output_file*, image_dict*)?:
> ../../../source/texk/web2c/luatexdir/image/pdftoepdf.cc:663: error: ?class Page? has no member named ?getResourcesNF?
> ../../../source/texk/web2c/luatexdir/image/pdftoepdf.cc:669: error: ?class Page? has no member named ?getMetadataNF?

Hartmut forked our version of xpdf in r3304.

> I checked the header files from poppler and there is nothing like *NF :-(

That's because it's a local addition to xpdf.

I see two options:
 1. create a layer between xpdf/poppler and luatex like in pdftex 1.50
 2. push changes like these upstream (i.e. to poppler) so that they
    get integrated there

Hartmut?

Best
   Martin

From martin at oneiros.de  Sun Mar 14 01:01:56 2010
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sun, 14 Mar 2010 01:01:56 +0100
Subject: [Dev-luatex] luatex 0.51.0 and libpoppler 0.12.* compile error
In-Reply-To: <68c491a61003131554j3435afa1wc21d5117f341ff30@mail.gmail.com>
References: <20100313232931.GA16013@gamma.logic.tuwien.ac.at>
	<68c491a61003131554j3435afa1wc21d5117f341ff30@mail.gmail.com>
Message-ID: <68c491a61003131601m5bdb3bb1k8b4c8ad218d35631@mail.gmail.com>

2010/3/14 Martin Schr?der <martin at oneiros.de>:
> Hartmut forked our version of xpdf in r3304.

And our current file in source/libs/xpdf/xpdf-3.02/xpdf/Page.h
since then violates the GPL, section 2a.
See also https://bugs.freedesktop.org/show_bug.cgi?id=16518

Best
    Martin

From preining at logic.at  Sun Mar 14 01:21:18 2010
From: preining at logic.at (Norbert Preining)
Date: Sun, 14 Mar 2010 09:21:18 +0900
Subject: [Dev-luatex] luatex 0.51.0 and libpoppler 0.12.* compile error
In-Reply-To: <68c491a61003131554j3435afa1wc21d5117f341ff30@mail.gmail.com>
	<alpine.DEB.1.00.1003140037480.6668@hahepc1.hahe>
References: <20100313232931.GA16013@gamma.logic.tuwien.ac.at>
	<68c491a61003131554j3435afa1wc21d5117f341ff30@mail.gmail.com>
	<20100313232931.GA16013@gamma.logic.tuwien.ac.at>
	<alpine.DEB.1.00.1003140037480.6668@hahepc1.hahe>
Message-ID: <20100314002118.GA18602@gamma.logic.tuwien.ac.at>

On So, 14 M?r 2010, Hartmut Henkel wrote:
> well, i had patched xpdf-3.02 in the luatex distro, see SVN 3304,
> source/libs/xpdf/xpdf-3.02/xpdf/Page.h

On So, 14 M?r 2010, Martin Schr?der wrote:
> Hartmut forked our version of xpdf in r3304.

Ouch. That will make at least the distributors unhappy.

>  1. create a layer between xpdf/poppler and luatex like in pdftex 1.50

Probably hard according to Hartmuts remarks on "no idea how to make that
consistent with poppler".

>  2. push changes like these upstream (i.e. to poppler) so that they
>     get integrated there

Hahaha, Martin, wasn't it you complaining about them at one of the
BachoTeXs?

Well, I am not sure how to proceed. And I am not sure how happy 
Debian (and probably other) security guys will be about the 
reintroduction of code duplication etc.

But if it is the only way to go, although I am unhappy, so it be.

I mean, we could have saved us all the work last year to convert
TeX Live to a way that it compiles both wiht poppler and xpdf, only
to see that it will soon break again ... :-(

Best wishes

Norbert
------------------------------------------------------------------------
Norbert Preining            preining@{jaist.ac.jp, logic.at, debian.org}
JAIST, Japan            TU Wien, Austria           Debian TeX Task Force
DSA: 0x09C5B094   fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
------------------------------------------------------------------------
TIDPIT (n.)
The corner of a toenail from which satisfying little black deposits
may be sprung.
			--- Douglas Adams, The Meaning of Liff

From root at mail.boekplan.nl  Sun Mar 14 12:25:59 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun, 14 Mar 2010 12:25:59 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100314112559.6AB1C40059@mail.boekplan.nl>

------------------------------------------------------------------------
r3489 | hhenkel | 2010-03-14 01:30:21 +0100 (Sun, 14 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/libs/xpdf/xpdf-3.02/xpdf/Page.cc
   M /trunk/source/libs/xpdf/xpdf-3.02/xpdf/Page.h

not to violate the GPL, hope it's ok, thanks Martin!

------------------------------------------------------------------------
r3490 | taco | 2010-03-14 07:49:40 +0100 (Sun, 14 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfglyph.c

add test for Type1 fonts to-be-reencoded to Type0 CFF
to Hartmuts bugfix for #200.

------------------------------------------------------------------------

From martin at oneiros.de  Sun Mar 14 14:09:35 2010
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Sun, 14 Mar 2010 14:09:35 +0100
Subject: [Dev-luatex] luatex 0.51.0 and libpoppler 0.12.* compile error
In-Reply-To: <20100314002118.GA18602@gamma.logic.tuwien.ac.at>
References: <20100313232931.GA16013@gamma.logic.tuwien.ac.at>
	<68c491a61003131554j3435afa1wc21d5117f341ff30@mail.gmail.com>
	<alpine.DEB.1.00.1003140037480.6668@hahepc1.hahe>
	<20100314002118.GA18602@gamma.logic.tuwien.ac.at>
Message-ID: <68c491a61003140609g35eeeb39l28e0b423585cbe30@mail.gmail.com>

2010/3/14 Norbert Preining <preining at logic.at>:
> On So, 14 M?r 2010, Martin Schr?der wrote:
>> Hartmut forked our version of xpdf in r3304.
>
> Ouch. That will make at least the distributors unhappy.
>
>> ?1. create a layer between xpdf/poppler and luatex like in pdftex 1.50
>
> Probably hard according to Hartmuts remarks on "no idea how to make that
> consistent with poppler".

I doubt it. At the end you have to adapt only two files for poppler.
http://preview.tinyurl.com/yk9uqm7
http://preview.tinyurl.com/yghn92f

>> ?2. push changes like these upstream (i.e. to poppler) so that they
>> ? ? get integrated there
>
> Hahaha, Martin, wasn't it you complaining about them at one of the
> BachoTeXs?

It's unlikely, but remains possible. :-)

Taco?

Best
   Martin

From preining at logic.at  Sun Mar 14 14:13:33 2010
From: preining at logic.at (Norbert Preining)
Date: Sun, 14 Mar 2010 22:13:33 +0900
Subject: [Dev-luatex] luatex 0.51.0 and libpoppler 0.12.* compile error
In-Reply-To: <68c491a61003140609g35eeeb39l28e0b423585cbe30@mail.gmail.com>
References: <20100313232931.GA16013@gamma.logic.tuwien.ac.at>
	<68c491a61003131554j3435afa1wc21d5117f341ff30@mail.gmail.com>
	<alpine.DEB.1.00.1003140037480.6668@hahepc1.hahe>
	<20100314002118.GA18602@gamma.logic.tuwien.ac.at>
	<68c491a61003140609g35eeeb39l28e0b423585cbe30@mail.gmail.com>
Message-ID: <20100314131333.GK23450@gamma.logic.tuwien.ac.at>

On So, 14 M?r 2010, Martin Schr?der wrote:
> >> ?1. create a layer between xpdf/poppler and luatex like in pdftex 1.50
> >
> > Probably hard according to Hartmuts remarks on "no idea how to make that
> > consistent with poppler".
> 
> I doubt it. At the end you have to adapt only two files for poppler.
> http://preview.tinyurl.com/yk9uqm7
> http://preview.tinyurl.com/yghn92f

Hmm, that sounds interesting, esp. also for xetex, so if all would
use that it would be easier ...

> > Hahaha, Martin, wasn't it you complaining about them at one of the
> > BachoTeXs?
> 
> It's unlikely, but remains possible. :-)

Hmm, that talk about alternatives of pdf libraries ... 

Best wishes

Norbert
------------------------------------------------------------------------
Norbert Preining            preining@{jaist.ac.jp, logic.at, debian.org}
JAIST, Japan            TU Wien, Austria           Debian TeX Task Force
DSA: 0x09C5B094   fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
------------------------------------------------------------------------
BROUGH SOWERBY
One who has been working at that same desk in the same office for
fifteen years and has very much his own ideas about why he is
continually passed over for promotion.
			--- Douglas Adams, The Meaning of Liff

From hartmut_henkel at gmx.de  Sun Mar 14 14:15:22 2010
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sun, 14 Mar 2010 14:15:22 +0100 (CET)
Subject: [Dev-luatex] luatex 0.51.0 and libpoppler 0.12.* compile error
In-Reply-To: <68c491a61003140609g35eeeb39l28e0b423585cbe30@mail.gmail.com>
References: <20100313232931.GA16013@gamma.logic.tuwien.ac.at>
	<68c491a61003131554j3435afa1wc21d5117f341ff30@mail.gmail.com>
	<alpine.DEB.1.00.1003140037480.6668@hahepc1.hahe>
	<20100314002118.GA18602@gamma.logic.tuwien.ac.at>
	<68c491a61003140609g35eeeb39l28e0b423585cbe30@mail.gmail.com>
Message-ID: <alpine.DEB.1.00.1003141413400.6937@hahepc1.hahe>

On Sun, 14 Mar 2010, Martin Schr?der wrote:
> 2010/3/14 Norbert Preining <preining at logic.at>:
> > On So, 14 M?r 2010, Martin Schr?der wrote:
> >> Hartmut forked our version of xpdf in r3304.
> >
> > Ouch. That will make at least the distributors unhappy.
> >
> >> ?1. create a layer between xpdf/poppler and luatex like in pdftex
> >> 1.50
> >
> > Probably hard according to Hartmuts remarks on "no idea how to make
> > that consistent with poppler".
>
> I doubt it. At the end you have to adapt only two files for poppler.
> http://preview.tinyurl.com/yk9uqm7
> http://preview.tinyurl.com/yghn92f
>
> >> ?2. push changes like these upstream (i.e. to poppler) so that they
> >> ? ? get integrated there
> >
> > Hahaha, Martin, wasn't it you complaining about them at one of the
> > BachoTeXs?
>
> It's unlikely, but remains possible. :-)
>
> Taco?

fwiw, i have sent diffs to Derek, in the hope that he integrates them
upstream. Let's see...

Regards, Hartmut

From root at mail.boekplan.nl  Sun Mar 14 16:25:18 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun, 14 Mar 2010 16:25:18 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100314152518.6CA7D40059@mail.boekplan.nl>

------------------------------------------------------------------------
r3491 | hhenkel | 2010-03-14 14:47:54 +0100 (Sun, 14 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfglyph.c

remove a typecast warning

------------------------------------------------------------------------

From t34www at googlemail.com  Mon Mar 15 01:06:06 2010
From: t34www at googlemail.com (T T)
Date: Mon, 15 Mar 2010 00:06:06 +0000
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <4B9A106B.10101@elvenkind.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>
	<4B8CB7BD.1050807@elvenkind.com>
	<e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>
	<4B8D0B38.6000500@wxs.nl>
	<e7fba2611003030539i5651ffa7l2b33600f390076f5@mail.gmail.com>
	<4B8E6B71.70603@elvenkind.com> <4B9A106B.10101@elvenkind.com>
Message-ID: <e7fba2611003141706l76cdabcei1b248f697c341d6a@mail.gmail.com>

On 12 March 2010 09:59, Taco Hoekwater <taco at elvenkind.com> wrote:
> Taco Hoekwater wrote:
>>
>> T T wrote:
>>>
>>> followed. This short/long file naming duality is a legacy of an ugly
>>> hack MS once pulled, and it is unlikely to ever disappear, I'm afraid.
>>
>> Tracker item added:
>>
>> ?http://tracker.luatex.org/view.php?id=338
>>
>
> This is now in TRUNK, please test. (I verified it works under wine)

On 12 March 2010 12:45, Taco Hoekwater <taco at elvenkind.com> wrote:
> Taco Hoekwater wrote:
>>
>> Tracker item:
>>
>> ?http://tracker.luatex.org/view.php?id=339
>
> New functionality in TRUNK:
>
>
> \subsection{\luatex{lookup}}
>
> A more powerful (but slower) generic method for finding files is also
> available (since 0.51).

Thanks. Tried both of these and haven't noticed any problems.

I had some problems building on msys/mingw - the condition in
getluatexsvnversion.sh:

if ([ -x `which svnversion` ] && [ -d ./.svn ])

evaluated always true even though I had no svnversion command in the
path. I changed it to:

if ( [ -d ./.svn ] && svnversion > /dev/null )

I would also suggest to remove the 'svn up' from the script. While
working on/testing local changes you do not necessarily want to keep
the working copy in sync with the head. And perhaps
luatex_svnversion.h cloud be created/updated only when the revision
number actually changes rather than every time (i.e. read the old
revision from luatex_svnversion.h and compare it with `svnversion
-c`), but my shell script-fu is not good enough to send you a patch
for this.

Cheers,

Tomek

From taco at elvenkind.com  Mon Mar 15 08:47:29 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 15 Mar 2010 08:47:29 +0100
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <e7fba2611003141706l76cdabcei1b248f697c341d6a@mail.gmail.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>	
	<4B8CB7BD.1050807@elvenkind.com>	
	<e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>	
	<4B8D0B38.6000500@wxs.nl>	
	<e7fba2611003030539i5651ffa7l2b33600f390076f5@mail.gmail.com>	
	<4B8E6B71.70603@elvenkind.com> <4B9A106B.10101@elvenkind.com>
	<e7fba2611003141706l76cdabcei1b248f697c341d6a@mail.gmail.com>
Message-ID: <4B9DE611.9010707@elvenkind.com>

T T wrote:
> 
> Thanks. Tried both of these and haven't noticed any problems.

Great.

> I had some problems building on msys/mingw - the condition in
> getluatexsvnversion.sh:
> 
> if ([ -x `which svnversion` ] && [ -d ./.svn ])

This version was suggested bu Elie Roux.

> evaluated always true even though I had no svnversion command in the
> path. I changed it to:

If [ -x `which svnversion` ] evaluates to true where there is no
subversion, I think that counts as a bug in mingw that maybe you
should file a bug report about.

> if ( [ -d ./.svn ] && svnversion > /dev/null )

But this doesn't look bad either. Elie, is this ok? (my shell
script skills are not that high either).

> I would also suggest to remove the 'svn up' from the script. While
> working on/testing local changes you do not necessarily want to keep
> the working copy in sync with the head. And perhaps

Perhaps the call to getluatexsvnversion.sh should be an explicit
option for build.sh instead of implied, but I prefer the rev. number
to reflect the actual state of the repository, so I would like to
leave the svn up command in it.

> luatex_svnversion.h could be created/updated only when the revision
> number actually changes rather than every time (i.e. read the old

Probably. As I wrote above, I am not that good in shell either,
and the generated header is not in the repository so I don't think
it matters a whole lot, but if someone writes a patch I will apply it.

Best wishes,
Taco




From root at mail.boekplan.nl  Mon Mar 15 12:25:58 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon, 15 Mar 2010 12:25:58 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100315112558.CDFD340059@mail.boekplan.nl>

------------------------------------------------------------------------
r3492 | taco | 2010-03-15 12:06:45 +0100 (Mon, 15 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/luafont.c

fix bug 314 (special handling is needed for select_disc nodes)

------------------------------------------------------------------------

From t34www at googlemail.com  Mon Mar 15 12:52:18 2010
From: t34www at googlemail.com (T T)
Date: Mon, 15 Mar 2010 11:52:18 +0000
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <4B9DE611.9010707@elvenkind.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>
	<4B8CB7BD.1050807@elvenkind.com>
	<e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>
	<4B8D0B38.6000500@wxs.nl>
	<e7fba2611003030539i5651ffa7l2b33600f390076f5@mail.gmail.com>
	<4B8E6B71.70603@elvenkind.com> <4B9A106B.10101@elvenkind.com>
	<e7fba2611003141706l76cdabcei1b248f697c341d6a@mail.gmail.com>
	<4B9DE611.9010707@elvenkind.com>
Message-ID: <e7fba2611003150452q361cf85ehdc3049a3cbcfe8da@mail.gmail.com>

On 15 March 2010 07:47, Taco Hoekwater <taco at elvenkind.com> wrote:
> T T wrote:
>
>> I would also suggest to remove the 'svn up' from the script. While
>> working on/testing local changes you do not necessarily want to keep
>> the working copy in sync with the head. And perhaps
>
> Perhaps the call to getluatexsvnversion.sh should be an explicit
> option for build.sh instead of implied, but I prefer the rev. number
> to reflect the actual state of the repository, so I would like to
> leave the svn up command in it.

This is just a suggestion, but I think that the decision whether to
svn up or not should be configurable somehow. There might be justified
reasons why one doesn't want to do that (e.g. svn doesn't work for me
here because of proxy -- every time it stalls until timeout making it
quite annoying).

>> luatex_svnversion.h could be created/updated only when the revision
>> number actually changes rather than every time (i.e. read the old
>
> Probably. As I wrote above, I am not that good in shell either,
> and the generated header is not in the repository so I don't think
> it matters a whole lot, but if someone writes a patch I will apply it.

OK, here we go:

---8<-------------cut--here------------------>8---
#! /bin/sh

# This script should be run within the source directory.

$DEBUG

FILE="texk/web2c/luatexdir/luatex_svnversion.h"

LANG=C
if [ ! -r $FILE ]
then
 echo '#define luatex_svn_revision -1' > $FILE
fi
if ( [ -d ./.svn ] && svnversion > /dev/null )
then
  # svn up > /dev/null
  DEFREV=`cat $FILE`
  SVNREV=`svnversion -c . | sed -ne 's/^[0-9]*:*\([0-9]*\).*/#define
luatex_svn_revision \1/p'`
  test "$DEFREV" != "$SVNREV" && echo "$SVNREV" > $FILE
fi
---8<-------------cut--here------------------>8---

Cheers,

Tomek

From taco at elvenkind.com  Mon Mar 15 12:59:04 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 15 Mar 2010 12:59:04 +0100
Subject: [Dev-luatex] Luatex 0.51.0 announcement
In-Reply-To: <4B9A567D.9050904@elvenkind.com>
References: <4B9A533F.700@elvenkind.com> <4B9A567D.9050904@elvenkind.com>
Message-ID: <4B9E2108.3010506@elvenkind.com>



Taco Hoekwater wrote:
> 
> Actually, there is another feature but it is experimental enough that
> it is not documented in the manual yet.
> 
>   local <node> nodelist, <sp> founddepth =
>        tex.linebreak(<node> listhead, <table> parameters)
> 
> The understood parameters are as follows (with example code):
> 
>     d = false,                       % boolean
>     ...
>     displaywidowpenalty = 150,       % number
>     widowpenalty = 150,              % number

Just to keep you posted: I just committed 3493, and this dropped
the 'd' and 'displaywidowpenalty' parameters. Just set up 'widowpenalty'
appropriately yourself  (the 'widow...' vs 'displaywidow...' choice
was the only reason for 'd').

Best wishes,
Taco


From taco at elvenkind.com  Mon Mar 15 13:03:49 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 15 Mar 2010 13:03:49 +0100
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <e7fba2611003150452q361cf85ehdc3049a3cbcfe8da@mail.gmail.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>	
	<4B8CB7BD.1050807@elvenkind.com>	
	<e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>	
	<4B8D0B38.6000500@wxs.nl>	
	<e7fba2611003030539i5651ffa7l2b33600f390076f5@mail.gmail.com>	
	<4B8E6B71.70603@elvenkind.com> <4B9A106B.10101@elvenkind.com>	
	<e7fba2611003141706l76cdabcei1b248f697c341d6a@mail.gmail.com>	
	<4B9DE611.9010707@elvenkind.com>
	<e7fba2611003150452q361cf85ehdc3049a3cbcfe8da@mail.gmail.com>
Message-ID: <4B9E2225.4070403@elvenkind.com>

T T wrote:
> On 15 March 2010 07:47, Taco Hoekwater <taco at elvenkind.com> wrote:
>> T T wrote:
>>
>>> I would also suggest to remove the 'svn up' from the script. While
>>> working on/testing local changes you do not necessarily want to keep
>>> the working copy in sync with the head. And perhaps
>> Perhaps the call to getluatexsvnversion.sh should be an explicit
>> option for build.sh instead of implied, but I prefer the rev. number
>> to reflect the actual state of the repository, so I would like to
>> leave the svn up command in it.
> 
> This is just a suggestion, but I think that the decision whether to
> svn up or not should be configurable somehow. There might be justified
> reasons why one doesn't want to do that (e.g. svn doesn't work for me
> here because of proxy -- every time it stalls until timeout making it
> quite annoying).

Oh, alright then. Patch applied (#3494)

Best wishes,
Taco

From taco at elvenkind.com  Mon Mar 15 15:03:41 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 15 Mar 2010 15:03:41 +0100
Subject: [Dev-luatex] Luatex 0.51.0 announcement
In-Reply-To: <4B9E2108.3010506@elvenkind.com>
References: <4B9A533F.700@elvenkind.com> <4B9A567D.9050904@elvenkind.com>
	<4B9E2108.3010506@elvenkind.com>
Message-ID: <4B9E3E3D.5020000@elvenkind.com>

Taco Hoekwater wrote:
> 
> 
> Taco Hoekwater wrote:
>>
>> Actually, there is another feature but it is experimental enough that
>> it is not documented in the manual yet.
>>
>>   local <node> nodelist, <sp> founddepth =
>>        tex.linebreak(<node> listhead, <table> paramet

After commit 3495 (just done), the syntax has changed to

   local <node> nodelist, <table> info =
         tex.linebreak(<node> listhead, <table> parameters )

The 'info' contains four values that are all numbers:

   prevdepth   % depth of the last line in the broken paragraph
   prevgraf    % number of lines in the broken paragraph
   looseness   % the actual looseness value in the broken paragraph
   demerits    % the total demerits of the chosen solution

This is the best I can do at short notice

Best wishes,
Taco


From taco at elvenkind.com  Mon Mar 15 15:34:00 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 15 Mar 2010 15:34:00 +0100
Subject: [Dev-luatex] Luatex 0.51.0 announcement
In-Reply-To: <4B9A567D.9050904@elvenkind.com>
References: <4B9A533F.700@elvenkind.com> <4B9A567D.9050904@elvenkind.com>
Message-ID: <4B9E4558.9050804@elvenkind.com>

Taco Hoekwater wrote:
> 
>   \interlinepenalties
>   \clubpenalties
>   \displaywidowpenalties
>   \widowpenalties

Finally (for now), revision 3496 allows the 'interlinepenalty',
'clubpenalty' and 'widowpenalty' arguments to be a table that
represents an array of integer values, thereby allowing the
above etex extensions to be used.

Best wishes,
Taco

From t34www at googlemail.com  Mon Mar 15 16:14:54 2010
From: t34www at googlemail.com (T T)
Date: Mon, 15 Mar 2010 15:14:54 +0000
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <4B9E2225.4070403@elvenkind.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>
	<e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>
	<4B8D0B38.6000500@wxs.nl>
	<e7fba2611003030539i5651ffa7l2b33600f390076f5@mail.gmail.com>
	<4B8E6B71.70603@elvenkind.com> <4B9A106B.10101@elvenkind.com>
	<e7fba2611003141706l76cdabcei1b248f697c341d6a@mail.gmail.com>
	<4B9DE611.9010707@elvenkind.com>
	<e7fba2611003150452q361cf85ehdc3049a3cbcfe8da@mail.gmail.com>
	<4B9E2225.4070403@elvenkind.com>
Message-ID: <e7fba2611003150814m5e6fbbb2y5b2f96d933d5d88d@mail.gmail.com>

On 15 March 2010 12:03, Taco Hoekwater <taco at elvenkind.com> wrote:
>
> Oh, alright then. Patch applied (#3494)

Thanks. One more patch for your consideration for something I needed
recently: getting absolute, canonical file paths. In principle this
can be implemented in pure Lua with the current lfs module, but
getting all the corner cases right (e.g. foo/bar/./../baz) is not so
easy. Perhaps having a convenience function for this is not such a bad
idea (and using proper system APIs will guarantee that the result is
correct).

There is no Unix counterpart in the patch, because I didn't know how
to implement it (with a call to realpath?) and I would have no way to
test it anyway.

Cheers,

Tomek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lfs.patch
Type: text/patch
Size: 1383 bytes
Desc: not available
URL: <http://www.ntg.nl/mailman/private/dev-luatex/attachments/20100315/3115ce22/attachment.bin>

From root at mail.boekplan.nl  Mon Mar 15 16:25:16 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon, 15 Mar 2010 16:25:16 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100315152516.47D0740059@mail.boekplan.nl>

------------------------------------------------------------------------
r3493 | taco | 2010-03-15 12:49:49 +0100 (Mon, 15 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.c
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.h
   M /trunk/source/texk/web2c/luatexdir/tex/postlinebreak.c
   M /trunk/source/texk/web2c/luatexdir/tex/postlinebreak.h

remove pointless arguments to ext_do_line_break

------------------------------------------------------------------------
r3494 | taco | 2010-03-15 12:57:49 +0100 (Mon, 15 Mar 2010) | 5 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/getluatexsvnversion.sh

new version from Tomek:
* no svn up
* workaround for a mingw problem
* no header file generation if nothing has changed

------------------------------------------------------------------------
r3495 | taco | 2010-03-15 14:54:45 +0100 (Mon, 15 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.c
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.h

make tex.linebreak() return a table of informational values instead of just prevdepth

------------------------------------------------------------------------
r3496 | taco | 2010-03-15 15:25:30 +0100 (Mon, 15 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c

allow interlinepenalty, clubpenalty, and widowpenalty parameters
for tex.linebreak() to be array tables (giving etex functionality)

------------------------------------------------------------------------

From taco at elvenkind.com  Mon Mar 15 16:54:25 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 15 Mar 2010 16:54:25 +0100
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <e7fba2611003150814m5e6fbbb2y5b2f96d933d5d88d@mail.gmail.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>	
	<e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>	
	<4B8D0B38.6000500@wxs.nl>	
	<e7fba2611003030539i5651ffa7l2b33600f390076f5@mail.gmail.com>	
	<4B8E6B71.70603@elvenkind.com> <4B9A106B.10101@elvenkind.com>	
	<e7fba2611003141706l76cdabcei1b248f697c341d6a@mail.gmail.com>	
	<4B9DE611.9010707@elvenkind.com>	
	<e7fba2611003150452q361cf85ehdc3049a3cbcfe8da@mail.gmail.com>	
	<4B9E2225.4070403@elvenkind.com>
	<e7fba2611003150814m5e6fbbb2y5b2f96d933d5d88d@mail.gmail.com>
Message-ID: <4B9E5831.4000101@elvenkind.com>

T T wrote:
> On 15 March 2010 12:03, Taco Hoekwater <taco at elvenkind.com> wrote:
>> Oh, alright then. Patch applied (#3494)
> 
> Thanks. One more patch for your consideration for something I needed
> recently: getting absolute, canonical file paths. In principle this
> can be implemented in pure Lua with the current lfs module, but
> getting all the corner cases right (e.g. foo/bar/./../baz) is not so
> easy. Perhaps having a convenience function for this is not such a bad
> idea (and using proper system APIs will guarantee that the result is
> correct).
> 
> There is no Unix counterpart in the patch, because I didn't know how
> to implement it (with a call to realpath?) and I would have no way to
> test it anyway.

My man page for realpath(3) says:

BUGS:
   Avoid using this function. Its is broken by design

But it does not offer an alternate solution.

Looks like it would need private code, which is not a lot of fun to
write (unless there is something in kpathsea?).




From taco at elvenkind.com  Mon Mar 15 17:00:07 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 15 Mar 2010 17:00:07 +0100
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <4B9E5831.4000101@elvenkind.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>		<e7fba2611003020434n6327d13bid4d409a14869f244@mail.gmail.com>		<4B8D0B38.6000500@wxs.nl>		<e7fba2611003030539i5651ffa7l2b33600f390076f5@mail.gmail.com>		<4B8E6B71.70603@elvenkind.com>
	<4B9A106B.10101@elvenkind.com>		<e7fba2611003141706l76cdabcei1b248f697c341d6a@mail.gmail.com>		<4B9DE611.9010707@elvenkind.com>		<e7fba2611003150452q361cf85ehdc3049a3cbcfe8da@mail.gmail.com>		<4B9E2225.4070403@elvenkind.com>	<e7fba2611003150814m5e6fbbb2y5b2f96d933d5d88d@mail.gmail.com>
	<4B9E5831.4000101@elvenkind.com>
Message-ID: <4B9E5987.8000004@elvenkind.com>

Taco Hoekwater wrote:
> T T wrote:
>> On 15 March 2010 12:03, Taco Hoekwater <taco at elvenkind.com> wrote:
>>> Oh, alright then. Patch applied (#3494)
>>
>> Thanks. One more patch for your consideration for something I needed
>> recently: getting absolute, canonical file paths. In principle this
>> can be implemented in pure Lua with the current lfs module, but
>> getting all the corner cases right (e.g. foo/bar/./../baz) is not so
>> easy. Perhaps having a convenience function for this is not such a bad
>> idea (and using proper system APIs will guarantee that the result is
>> correct).

What did you need it for anyway? As perhaps the problem it solves
is win32-only?


From t34www at googlemail.com  Mon Mar 15 18:21:48 2010
From: t34www at googlemail.com (T T)
Date: Mon, 15 Mar 2010 17:21:48 +0000
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <4B9E5987.8000004@elvenkind.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>
	<4B8E6B71.70603@elvenkind.com> <4B9A106B.10101@elvenkind.com>
	<e7fba2611003141706l76cdabcei1b248f697c341d6a@mail.gmail.com>
	<4B9DE611.9010707@elvenkind.com>
	<e7fba2611003150452q361cf85ehdc3049a3cbcfe8da@mail.gmail.com>
	<4B9E2225.4070403@elvenkind.com>
	<e7fba2611003150814m5e6fbbb2y5b2f96d933d5d88d@mail.gmail.com>
	<4B9E5831.4000101@elvenkind.com> <4B9E5987.8000004@elvenkind.com>
Message-ID: <e7fba2611003151021s1ac2c718o5334d0ef251df662@mail.gmail.com>

On 15 March 2010 15:54, Taco Hoekwater <taco at elvenkind.com> wrote:
>
> My man page for realpath(3) says:
>
> BUGS:
> ?Avoid using this function. Its is broken by design
>
> But it does not offer an alternate solution.

Bummer.

> Looks like it would need private code, which is not a lot of fun to
> write (unless there is something in kpathsea?).

I agree, if you can't trust the API call, there is no point in hand
coding this in C. It is not trivial and it will be easier to implement
on the Lua side anyway.

On 15 March 2010 16:00, Taco Hoekwater <taco at elvenkind.com> wrote:
>
> What did you need it for anyway? As perhaps the problem it solves
> is win32-only?

The problem was to create a directory path with all intermediate ones
if they don't exist. lfs.mkdir cannot create a hierarchy.

Once I started coding this, I realized it's not so simple in general,
because one needs to resolve the path first, get rid of all the '..'
and '.' etc. GetFullPathName call is very handy for this, so I thought
it would be nice to access it. Too bad that there is no reliable
equivalent on Unix.

For now I ended up with 'cmd.exe /c mkdir
"some\dir\hierarchy\to\create"' :->. I'm not very proud of this
solution but it gets the job done for this particular problem.

Cheers,

Tomek

PS. Perhaps Unix's realpath is not the best match for what
GetFullPathName does. With GetFullPathName the resolved path does not
have to exist.

From taco at elvenkind.com  Mon Mar 15 18:34:15 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 15 Mar 2010 18:34:15 +0100
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <e7fba2611003151021s1ac2c718o5334d0ef251df662@mail.gmail.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>	
	<4B8E6B71.70603@elvenkind.com> <4B9A106B.10101@elvenkind.com>	
	<e7fba2611003141706l76cdabcei1b248f697c341d6a@mail.gmail.com>	
	<4B9DE611.9010707@elvenkind.com>	
	<e7fba2611003150452q361cf85ehdc3049a3cbcfe8da@mail.gmail.com>	
	<4B9E2225.4070403@elvenkind.com>	
	<e7fba2611003150814m5e6fbbb2y5b2f96d933d5d88d@mail.gmail.com>	
	<4B9E5831.4000101@elvenkind.com> <4B9E5987.8000004@elvenkind.com>
	<e7fba2611003151021s1ac2c718o5334d0ef251df662@mail.gmail.com>
Message-ID: <4B9E6F97.9090908@elvenkind.com>

T T wrote:
> 
> The problem was to create a directory path with all intermediate ones
> if they don't exist. lfs.mkdir cannot create a hierarchy.

Ah, I see. I any case, I have applied your patch already, exactly
as-is. I'll think about a unix solution.

> Once I started coding this, I realized it's not so simple in general,
> because one needs to resolve the path first, get rid of all the '..'
> and '.' etc. GetFullPathName call is very handy for this, so I thought
> it would be nice to access it. Too bad that there is no reliable
> equivalent on Unix.
> 
> For now I ended up with 'cmd.exe /c mkdir
> "some\dir\hierarchy\to\create"' :->. I'm not very proud of this
> solution but it gets the job done for this particular problem.
> 
> Cheers,
> 
> Tomek
> 
> PS. Perhaps Unix's realpath is not the best match for what
> GetFullPathName does. With GetFullPathName the resolved path does not
> have to exist.


From root at mail.boekplan.nl  Mon Mar 15 22:25:21 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon, 15 Mar 2010 22:25:21 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100315212521.509B740059@mail.boekplan.nl>

------------------------------------------------------------------------
r3497 | taco | 2010-03-15 16:50:52 +0100 (Mon, 15 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c

forbid lua code to change preallocated glue_spec nodes

------------------------------------------------------------------------
r3498 | taco | 2010-03-15 16:52:45 +0100 (Mon, 15 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafilesystem/src/lfs.c

add lfs.realpath() function. Currently only implemented on Win32.
Patch by Tomek

------------------------------------------------------------------------
r3499 | taco | 2010-03-15 17:10:06 +0100 (Mon, 15 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.c

 valid_node() has to return false for the preallocated nodes

------------------------------------------------------------------------
r3500 | taco | 2010-03-15 17:10:39 +0100 (Mon, 15 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/luafont.c

remove a (harmless) compiler warning

------------------------------------------------------------------------
r3501 | taco | 2010-03-15 17:48:00 +0100 (Mon, 15 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.c

add a new field 'writable' to glue_spec nodes to trap the
pre-allocated read-only cases

------------------------------------------------------------------------
r3502 | taco | 2010-03-15 17:50:27 +0100 (Mon, 15 Mar 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

update the manual

------------------------------------------------------------------------
r3503 | taco | 2010-03-15 17:52:42 +0100 (Mon, 15 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luatex.c

bump the version number to 0.52 for lfs.realpath() and <glue_spec_node>.writable

------------------------------------------------------------------------

From elie.roux at telecom-bretagne.eu  Tue Mar 16 09:01:46 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Tue, 16 Mar 2010 10:01:46 +0200
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <4B9E6F97.9090908@elvenkind.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>
	<e7fba2611003141706l76cdabcei1b248f697c341d6a@mail.gmail.com>
	<4B9DE611.9010707@elvenkind.com>
	<e7fba2611003150452q361cf85ehdc3049a3cbcfe8da@mail.gmail.com>
	<4B9E2225.4070403@elvenkind.com>
	<e7fba2611003150814m5e6fbbb2y5b2f96d933d5d88d@mail.gmail.com>
	<4B9E5831.4000101@elvenkind.com> <4B9E5987.8000004@elvenkind.com>
	<e7fba2611003151021s1ac2c718o5334d0ef251df662@mail.gmail.com>
	<4B9E6F97.9090908@elvenkind.com>
Message-ID: <eba574421003160101kfa3253o604b2a15daa02053@mail.gmail.com>

2010/3/15 Taco Hoekwater <taco at elvenkind.com>:
>
> Ah, I see. I any case, I have applied your patch already, exactly
> as-is. I'll think about a unix solution.

Hello,

I just thought about something: in a script we need to detect if,
under windows, luatex is run under cygwin or not (cygwin and
non-cygwin are the same binary for me). Currently we do something like

local system = io.popen("uname -s"):read("*l")
if system then
    if system:match("^CYGWIN") then
        system = 'cygwin'
    end
end

but having os.type == 'cygwin' as a condition would be cleaner... The
thing is the check must be done at runtime, and I don't know anything
about the Windows API nor compilation under cygwin/mingw...

Tomek, would you know how to patch LuaTeX to do that?

Thank you,
-- 
Elie

From taco at elvenkind.com  Tue Mar 16 09:07:53 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 16 Mar 2010 09:07:53 +0100
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <eba574421003160101kfa3253o604b2a15daa02053@mail.gmail.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>	<e7fba2611003141706l76cdabcei1b248f697c341d6a@mail.gmail.com>	<4B9DE611.9010707@elvenkind.com>	<e7fba2611003150452q361cf85ehdc3049a3cbcfe8da@mail.gmail.com>	<4B9E2225.4070403@elvenkind.com>	<e7fba2611003150814m5e6fbbb2y5b2f96d933d5d88d@mail.gmail.com>	<4B9E5831.4000101@elvenkind.com>
	<4B9E5987.8000004@elvenkind.com>	<e7fba2611003151021s1ac2c718o5334d0ef251df662@mail.gmail.com>	<4B9E6F97.9090908@elvenkind.com>
	<eba574421003160101kfa3253o604b2a15daa02053@mail.gmail.com>
Message-ID: <4B9F3C59.2070903@elvenkind.com>

?lie Roux wrote:
> 2010/3/15 Taco Hoekwater <taco at elvenkind.com>:
>> Ah, I see. I any case, I have applied your patch already, exactly
>> as-is. I'll think about a unix solution.
> 
> Hello,
> 
> I just thought about something: in a script we need to detect if,
> under windows, luatex is run under cygwin or not (cygwin and
> non-cygwin are the same binary for me). Currently we do something like
> 
> local system = io.popen("uname -s"):read("*l")

You could test against os.uname().

Best wishes,
Taco

From taco at elvenkind.com  Tue Mar 16 09:20:42 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 16 Mar 2010 09:20:42 +0100
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <e7fba2611003151021s1ac2c718o5334d0ef251df662@mail.gmail.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>	
	<4B8E6B71.70603@elvenkind.com> <4B9A106B.10101@elvenkind.com>	
	<e7fba2611003141706l76cdabcei1b248f697c341d6a@mail.gmail.com>	
	<4B9DE611.9010707@elvenkind.com>	
	<e7fba2611003150452q361cf85ehdc3049a3cbcfe8da@mail.gmail.com>	
	<4B9E2225.4070403@elvenkind.com>	
	<e7fba2611003150814m5e6fbbb2y5b2f96d933d5d88d@mail.gmail.com>	
	<4B9E5831.4000101@elvenkind.com> <4B9E5987.8000004@elvenkind.com>
	<e7fba2611003151021s1ac2c718o5334d0ef251df662@mail.gmail.com>
Message-ID: <4B9F3F5A.20809@elvenkind.com>

T T wrote:
> 
> For now I ended up with 'cmd.exe /c mkdir
> "some\dir\hierarchy\to\create"' :->. I'm not very proud of this
> solution but it gets the job done for this particular problem.

This problem could be solved with system("mkdir -p") on GNU systems.

> Cheers,
> 
> Tomek
> 
> PS. Perhaps Unix's realpath is not the best match for what
> GetFullPathName does. With GetFullPathName the resolved path does not
> have to exist.

Just wondering: what does it return for ".." then?

I've given up on a Unix C function for this there are just too many
potential problems with symlinks. As you are using mkdir now also,
would it be ok if I undo your patch? (as you'll need mkdir on unix
anyway)?

Best wishes,
Taco

From t34www at googlemail.com  Tue Mar 16 11:31:53 2010
From: t34www at googlemail.com (T T)
Date: Tue, 16 Mar 2010 10:31:53 +0000
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <eba574421003160101kfa3253o604b2a15daa02053@mail.gmail.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>
	<4B9DE611.9010707@elvenkind.com>
	<e7fba2611003150452q361cf85ehdc3049a3cbcfe8da@mail.gmail.com>
	<4B9E2225.4070403@elvenkind.com>
	<e7fba2611003150814m5e6fbbb2y5b2f96d933d5d88d@mail.gmail.com>
	<4B9E5831.4000101@elvenkind.com> <4B9E5987.8000004@elvenkind.com>
	<e7fba2611003151021s1ac2c718o5334d0ef251df662@mail.gmail.com>
	<4B9E6F97.9090908@elvenkind.com>
	<eba574421003160101kfa3253o604b2a15daa02053@mail.gmail.com>
Message-ID: <e7fba2611003160331t630584b5l794bdc49425d4b4c@mail.gmail.com>

On 16 March 2010 08:01, ?lie Roux <elie.roux at telecom-bretagne.eu> wrote:
>
> I just thought about something: in a script we need to detect if,
> under windows, luatex is run under cygwin or not (cygwin and
> non-cygwin are the same binary for me). Currently we do something like

I'm not sure if I understand you correctly.  I've just checked cygwin
binaries and they are are different from the win32 ones we ship.  Do
you mean that the cygwin binaries can be run in two modes: under
cygwin and under native windows? That would be strange, but then again
I don't know enough about cygwin to tell.

> local system = io.popen("uname -s"):read("*l")
> if system then
> ? ?if system:match("^CYGWIN") then
> ? ? ? ?system = 'cygwin'
> ? ?end
> end
>
> but having os.type == 'cygwin' as a condition would be cleaner... The
> thing is the check must be done at runtime, and I don't know anything
> about the Windows API nor compilation under cygwin/mingw...
>
> Tomek, would you know how to patch LuaTeX to do that?

Would Taco's suggestion with os.uname() work for you?


From t34www at googlemail.com  Tue Mar 16 11:53:06 2010
From: t34www at googlemail.com (T T)
Date: Tue, 16 Mar 2010 10:53:06 +0000
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <4B9F3F5A.20809@elvenkind.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>
	<e7fba2611003141706l76cdabcei1b248f697c341d6a@mail.gmail.com>
	<4B9DE611.9010707@elvenkind.com>
	<e7fba2611003150452q361cf85ehdc3049a3cbcfe8da@mail.gmail.com>
	<4B9E2225.4070403@elvenkind.com>
	<e7fba2611003150814m5e6fbbb2y5b2f96d933d5d88d@mail.gmail.com>
	<4B9E5831.4000101@elvenkind.com> <4B9E5987.8000004@elvenkind.com>
	<e7fba2611003151021s1ac2c718o5334d0ef251df662@mail.gmail.com>
	<4B9F3F5A.20809@elvenkind.com>
Message-ID: <e7fba2611003160353p4f58db5hca41a8d68336c143@mail.gmail.com>

On 16 March 2010 08:20, Taco Hoekwater <taco at elvenkind.com> wrote:
>
> Just wondering: what does it return for ".." then?

Path to the one dir up from the current dir.

> I've given up on a Unix C function for this there are just too many
> potential problems with symlinks. As you are using mkdir now also,
> would it be ok if I undo your patch? (as you'll need mkdir on unix
> anyway)?

Yes, please do.

FYI, in our perl code we use the "abs_path" function from the cwd
module for the functionality I was after but I don't know how's that
implemented.

Cheers,

Tomek

From root at mail.boekplan.nl  Tue Mar 16 12:26:01 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue, 16 Mar 2010 12:26:01 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100316112602.0990B40059@mail.boekplan.nl>

------------------------------------------------------------------------
r3504 | taco | 2010-03-16 10:05:39 +0100 (Tue, 16 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/loslibext.c

use _WIN32  test instead of WIN32

------------------------------------------------------------------------
r3505 | taco | 2010-03-16 11:50:44 +0100 (Tue, 16 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafilesystem/src/lfs.c

undo commit 3498 (lfs.realpath)

------------------------------------------------------------------------

From root at mail.boekplan.nl  Tue Mar 16 16:25:20 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue, 16 Mar 2010 16:25:20 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100316152520.C553540059@mail.boekplan.nl>

------------------------------------------------------------------------
r3506 | oneiros | 2010-03-16 12:32:14 +0100 (Tue, 16 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafilesystem/src/lfs.c

mark some parameters as unused

------------------------------------------------------------------------
r3507 | oneiros | 2010-03-16 12:40:01 +0100 (Tue, 16 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafilesystem/src/lfs.c

revert r3506: no support for __attribute__ here

------------------------------------------------------------------------
r3508 | taco | 2010-03-16 14:48:20 +0100 (Tue, 16 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c

allow the second argument of node.copy_list to be nil

------------------------------------------------------------------------

From t34www at googlemail.com  Tue Mar 16 17:07:45 2010
From: t34www at googlemail.com (T T)
Date: Tue, 16 Mar 2010 16:07:45 +0000
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <e7fba2611003160353p4f58db5hca41a8d68336c143@mail.gmail.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>
	<4B9DE611.9010707@elvenkind.com>
	<e7fba2611003150452q361cf85ehdc3049a3cbcfe8da@mail.gmail.com>
	<4B9E2225.4070403@elvenkind.com>
	<e7fba2611003150814m5e6fbbb2y5b2f96d933d5d88d@mail.gmail.com>
	<4B9E5831.4000101@elvenkind.com> <4B9E5987.8000004@elvenkind.com>
	<e7fba2611003151021s1ac2c718o5334d0ef251df662@mail.gmail.com>
	<4B9F3F5A.20809@elvenkind.com>
	<e7fba2611003160353p4f58db5hca41a8d68336c143@mail.gmail.com>
Message-ID: <e7fba2611003160907j1b6489c5h28dfda080fbfe5ba@mail.gmail.com>

On 16 March 2010 10:53, T T <t34www at googlemail.com> wrote:
>
> FYI, in our perl code we use the "abs_path" function from the cwd
> module for the functionality I was after but I don't know how's that
> implemented.

Out of curiosity I had a look at perl sources. They use realpath
implementation from bsd.

Cheers,

Tomek

From taco at elvenkind.com  Tue Mar 16 21:01:56 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 16 Mar 2010 21:01:56 +0100
Subject: [Dev-luatex] Luatex 0.52.0 announcement
Message-ID: <4B9FE3B4.106@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.52.0.

New features:

* Various small manual improvements.

* A better version of getluatexsvnversion.sh, from Tomek.

* node.copy_list() now allows the second (optional) argument to
   be nil.

* An import of the current state of the texlive repository
   (kpathsea and build system).

Bug fixes:

* An attempt fix for bug #345 (math kerning is not perfect): when the
   current math font is a new math font, check against \catcode <cur_c>
   == 11 to suppress the italic correction, instead of looking at
   the value of space(<cur_f>).

* There is a new <tfmtable> key: 'units_per_em' (defaults to 0).
   This is part of a fix for bug #200 (Problem with CFF fonts having
   em-size other than 1000): there is a special correction to the
   embedded cff font itself and the font scale if the font to be output
   is opentype or type1 in unicode encoding and the 'units_per_em
   differs' from zero.
   <tfmtable>.units_per_em has to be passed back to luatex from
   the lua font loading code for this to work.

* A fix for bug #314 (problem with pk file).

* lua code can no longer change the internal preallocated glue_spec
   nodes (as that resulted in weird spacing bugs). For this, glue_specs
   now have a new field: 'writable'. If that field is false, a copy
   has to be made of the glue_spec instead of doing an assignment
   to it.

* Setting of \textdir inside the output routine could trash output
   on following pages due to a lingering internal variable.

* \pdfthread crashed because the arguments were handled in reverse
   order.

The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

   svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.52.0

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org


Have fun,
Taco


From root at mail.boekplan.nl  Tue Mar 16 22:25:59 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue, 16 Mar 2010 22:25:59 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100316212559.2679240059@mail.boekplan.nl>

------------------------------------------------------------------------
r3509 | taco | 2010-03-16 16:21:13 +0100 (Tue, 16 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.c

fix bad output when \textdir was set in the \output routine

------------------------------------------------------------------------
r3510 | taco | 2010-03-16 17:34:26 +0100 (Tue, 16 Mar 2010) | 2 lines
Changed paths:
   M /trunk/build.sh
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/ChangeLog
   M /trunk/source/Makefile.am
   M /trunk/source/Makefile.in
   M /trunk/source/README
   A /trunk/source/README.coding
   A /trunk/source/README.config
   M /trunk/source/README.cross
   A /trunk/source/README.hacking
   M /trunk/source/README.layout
   M /trunk/source/aclocal.m4
   A /trunk/source/auxdir
   A /trunk/source/auxdir/auxsub
   A /trunk/source/auxdir/auxsub/Makefile.am
   A /trunk/source/auxdir/auxsub/Makefile.in
   A /trunk/source/auxdir/auxsub/README
   A /trunk/source/auxdir/auxsub/aclocal.m4
   A /trunk/source/auxdir/auxsub/configure
   A /trunk/source/auxdir/auxsub/configure.ac
   M /trunk/source/build-aux/README.TL
   M /trunk/source/build-aux/config.guess
   M /trunk/source/build-aux/config.sub
   M /trunk/source/build-aux/install-sh
   M /trunk/source/build-aux/ltmain.sh
   M /trunk/source/build-aux/texinfo.tex
   M /trunk/source/build-aux/ylwrap
   M /trunk/source/configure
   M /trunk/source/configure.ac
   M /trunk/source/libs/Makefile.am
   M /trunk/source/libs/Makefile.in
   M /trunk/source/libs/README
   M /trunk/source/libs/aclocal.m4
   M /trunk/source/libs/configure
   M /trunk/source/libs/configure.ac
   M /trunk/source/libs/dummy/Makefile.in
   M /trunk/source/libs/dummy/aclocal.m4
   M /trunk/source/libs/dummy/configure
   M /trunk/source/libs/libpng/ChangeLog
   M /trunk/source/libs/libpng/Makefile.am
   M /trunk/source/libs/libpng/Makefile.in
   M /trunk/source/libs/libpng/ac/libpng.ac
   M /trunk/source/libs/libpng/ac/withenable.ac
   M /trunk/source/libs/libpng/aclocal.m4
   M /trunk/source/libs/libpng/config.h.in
   M /trunk/source/libs/libpng/configure
   M /trunk/source/libs/libpng/configure.ac
   A /trunk/source/libs/libpng/include
   A /trunk/source/libs/libpng/include/Makefile.am
   A /trunk/source/libs/libpng/include/Makefile.in
   M /trunk/source/libs/obsdcompat/ChangeLog
   M /trunk/source/libs/obsdcompat/Makefile.am
   M /trunk/source/libs/obsdcompat/Makefile.in
   M /trunk/source/libs/obsdcompat/aclocal.m4
   M /trunk/source/libs/obsdcompat/configure
   M /trunk/source/libs/obsdcompat/configure.ac
   M /trunk/source/libs/obsdcompat/includes.h
   M /trunk/source/libs/obsdcompat/obsdcompat/config.h.in
   M /trunk/source/libs/xpdf/Makefile.am
   M /trunk/source/libs/xpdf/Makefile.in
   M /trunk/source/libs/xpdf/aclocal.m4
   M /trunk/source/libs/xpdf/aconf.h.in
   M /trunk/source/libs/xpdf/configure
   M /trunk/source/libs/xpdf/configure.ac
   M /trunk/source/libs/xpdf/fofi/Makefile.in
   M /trunk/source/libs/xpdf/goo/Makefile.in
   M /trunk/source/libs/xpdf/xpdf/Makefile.in
   M /trunk/source/libs/zlib/Makefile.am
   M /trunk/source/libs/zlib/Makefile.in
   M /trunk/source/libs/zlib/ac/zlib.ac
   M /trunk/source/libs/zlib/aclocal.m4
   M /trunk/source/libs/zlib/config.h.in
   M /trunk/source/libs/zlib/configure
   M /trunk/source/libs/zlib/configure.ac
   A /trunk/source/libs/zlib/include
   A /trunk/source/libs/zlib/include/Makefile.am
   A /trunk/source/libs/zlib/include/Makefile.in
   A /trunk/source/libs/zlib/zlib-1.2.3-PATCHES
   A /trunk/source/libs/zlib/zlib-1.2.3-PATCHES/TL-Changes
   A /trunk/source/libs/zziplib
   A /trunk/source/libs/zziplib/ChangeLog
   A /trunk/source/libs/zziplib/Makefile.am
   A /trunk/source/libs/zziplib/Makefile.in
   A /trunk/source/libs/zziplib/README
   A /trunk/source/libs/zziplib/ac
   A /trunk/source/libs/zziplib/ac/withenable.ac
   A /trunk/source/libs/zziplib/ac/zziplib.ac
   A /trunk/source/libs/zziplib/aclocal.m4
   A /trunk/source/libs/zziplib/autom4te.cache
   A /trunk/source/libs/zziplib/autom4te.cache/output.0
   A /trunk/source/libs/zziplib/autom4te.cache/output.1
   A /trunk/source/libs/zziplib/autom4te.cache/requests
   A /trunk/source/libs/zziplib/autom4te.cache/traces.0
   A /trunk/source/libs/zziplib/autom4te.cache/traces.1
   A /trunk/source/libs/zziplib/config.h.in
   A /trunk/source/libs/zziplib/configure
   A /trunk/source/libs/zziplib/configure.ac
   A /trunk/source/libs/zziplib/include
   A /trunk/source/libs/zziplib/include/zzip
   A /trunk/source/libs/zziplib/include/zzip/Makefile.am
   A /trunk/source/libs/zziplib/include/zzip/Makefile.in
   A /trunk/source/libs/zziplib/m4
   A /trunk/source/libs/zziplib/m4/ax_prefix_config_h.m4
   A /trunk/source/libs/zziplib/m4/zziplib-aligned-access.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58
   A /trunk/source/libs/zziplib/zziplib-0.13.58/COPYING.LIB
   A /trunk/source/libs/zziplib/zziplib-0.13.58/ChangeLog
   A /trunk/source/libs/zziplib/zziplib-0.13.58/Makefile.am
   A /trunk/source/libs/zziplib/zziplib-0.13.58/Makefile.in
   A /trunk/source/libs/zziplib/zziplib-0.13.58/Makefile.mk
   A /trunk/source/libs/zziplib/zziplib-0.13.58/README
   A /trunk/source/libs/zziplib/zziplib-0.13.58/SDL
   A /trunk/source/libs/zziplib/zziplib-0.13.58/SDL/Makefile.am
   A /trunk/source/libs/zziplib/zziplib-0.13.58/SDL/Makefile.in
   A /trunk/source/libs/zziplib/zziplib-0.13.58/SDL/SDL_rwops_zzcat.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/SDL/SDL_rwops_zzip.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/SDL/SDL_rwops_zzip.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/SDL/SDL_rwops_zzip.pc
   A /trunk/source/libs/zziplib/zziplib-0.13.58/TODO
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/Makefile.am
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/Makefile.in
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/unzip-mem.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/unzzip.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/unzzipcat-mem.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/unzzipcat-seeko.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/unzzipcat.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/unzzipdir-mem.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/unzzipdir.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/zzcat.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/zzdir.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/zzip.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/zziplib.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/zziptest.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/zzobfuscated.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/zzxorcat.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/zzxorcopy.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/bins/zzxordir.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/config.h.in
   A /trunk/source/libs/zziplib/zziplib-0.13.58/configure
   A /trunk/source/libs/zziplib/zziplib-0.13.58/configure.ac
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/64on32.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/COPYING.LIB
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/COPYING.MPL
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/COPYING.ZLIB
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/Makefile.am
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/Makefile.in
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/README.MSVC6
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/README.SDL
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/body.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/configs.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/copying.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/developer.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/download.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/faq.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/fseeko.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/functions.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/future.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/history.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/make-dbk.pl
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/make-doc.pl
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/make-doc.py
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/makedocs.py
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/memdisk.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/mksite.pl
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/mksite.sh
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/mmapped.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/notes.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/referentials.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/sdocbook.css
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/sfx-make.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zip-php.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzip-api.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzip-basics.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzip-crypt.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzip-cryptoid.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzip-extio.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzip-extras.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzip-file.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzip-index.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzip-parse.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzip-sdl-rwops.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzip-xor.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzip-zip.htm
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipdoc
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipdoc/__init__.py
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipdoc/commentmarkup.py
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipdoc/dbk2htm.py
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipdoc/docbookdocument.py
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipdoc/functionheader.py
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipdoc/functionlisthtmlpage.py
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipdoc/functionlistreference.py
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipdoc/functionprototype.py
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipdoc/htm2dbk.py
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipdoc/htmldocument.py
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipdoc/match.py
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipdoc/options.py
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipdoc/textfile.py
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipdoc/textfileheader.py
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipfseeko.html
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zziplib-manpages.dbk
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zziplib-manpages.tar
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zziplib-master.dbk
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zziplib.html
   A /trunk/source/libs/zziplib/zziplib-0.13.58/docs/zzipmmapped.html
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ac_compile_check_sizeof.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ac_set_default_paths_system.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ac_sys_largefile_sensitive.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/acx_restrict.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_cflags_gcc_option.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_cflags_no_writable_strings.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_cflags_strict_prototypes.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_cflags_warn_all.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_check_aligned_access_required.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_configure_args.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_create_pkgconfig_info.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_enable_builddir_uname.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_expand_prefix.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_maintainer_mode_auto_silent.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_not_enable_frame_pointer.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_pax_tar.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_prefix_config_h.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_set_version_info.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_spec_file.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_spec_package_version.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_warning_default_aclocaldir.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ax_warning_default_pkgconfig.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/libtool.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ltoptions.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ltsugar.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/ltversion.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/lt~obsolete.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/patch_libtool_on_darwin_zsh_overquoting.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/patch_libtool_sys_lib_search_path_spec.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/m4/patch_libtool_to_add_host_cc.m4
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc6
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc6/zzcat.dsp
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc6/zzdir.dsp
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc6/zzip.dsp
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc6/zziplib.dsp
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc6/zziplib.dsw
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc6/zziptest.dsp
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc6/zzipwrap.dsp
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc6/zzobfuscated.dsp
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/pkzip.exe
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/test.zip
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/test1.zip
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zzcat.sln
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zzcat.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zzdir.sln
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zzdir.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zzip.sln
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zzip.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zziplib.sln
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zziplib.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zzipself.bat
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zzipself.sln
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zzipself.txt
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zzipself.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zzipsetstub.sln
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zzipsetstub.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zziptest.sln
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zziptest.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zzobfuscated.sln
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc7/zzobfuscated.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/README.TXT
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/test.zip
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/test1.zip
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zip.exe
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zzcat.sln
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zzcat.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zzdir.sln
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zzdir.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zzip.sln
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zzip.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zzipfseeko.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zziplib.sln
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zziplib.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zzipmmapped.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zzipself.bat
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zzipself.sln
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zzipself.txt
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zzipself.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zzipsetstub.sln
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zzipsetstub.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zziptest.sln
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zziptest.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zzobfuscated.sln
   A /trunk/source/libs/zziplib/zziplib-0.13.58/msvc8/zzobfuscated.vcproj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/test
   A /trunk/source/libs/zziplib/zziplib-0.13.58/test/Makefile.am
   A /trunk/source/libs/zziplib/zziplib-0.13.58/test/Makefile.in
   A /trunk/source/libs/zziplib/zziplib-0.13.58/test/README
   A /trunk/source/libs/zziplib/zziplib-0.13.58/test/test.zip
   A /trunk/source/libs/zziplib/zziplib-0.13.58/test/test1.zip
   A /trunk/source/libs/zziplib/zziplib-0.13.58/test/zzipself.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/test/zzipsetstub.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/Makefile.am
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/Makefile.in
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/__debug.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/__dirent.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/__fnmatch.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/__hints.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/__mmap.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/_msvc.sed
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/autoconf.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/conf.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/dir.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/err.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/fetch.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/fetch.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/file.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/file.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/format.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/fseeko.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/fseeko.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/info.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/info.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/lib.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/memdisk.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/memdisk.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/mmapped.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/mmapped.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/plugin.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/plugin.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/stat.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/stdint.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/types.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/write.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/write.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/zip.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/zzip-zlib-config.pc
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/zzip.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/zzipfseeko.pc
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/zziplib.pc
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/zziplib.wpj
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzip/zzipmmapped.pc
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzipback.sed
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zziplib.spec
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzipwrap
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzipwrap/Makefile.am
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzipwrap/Makefile.in
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzipwrap/wrap.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzipwrap/wrap.h
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzipwrap/zzipwrap.c
   A /trunk/source/libs/zziplib/zziplib-0.13.58/zzipwrap/zzipwrap.pc
   A /trunk/source/libs/zziplib/zziplib-0.13.58-PATCHES
   A /trunk/source/libs/zziplib/zziplib-0.13.58-PATCHES/ChangeLog
   A /trunk/source/libs/zziplib/zziplib-0.13.58-PATCHES/TL-Changes
   A /trunk/source/libs/zziplib/zziplib-0.13.58-PATCHES/patch-01-old-style-parameter
   A /trunk/source/libs/zziplib/zziplib.test
   M /trunk/source/m4/cho-libs.m4
   M /trunk/source/m4/kpse-common.m4
   M /trunk/source/m4/kpse-cxx-hack.m4
   M /trunk/source/m4/kpse-freetype2-flags.m4
   M /trunk/source/m4/kpse-gd-flags.m4
   M /trunk/source/m4/kpse-graphite-flags.m4
   M /trunk/source/m4/kpse-icu-flags.m4
   M /trunk/source/m4/kpse-kpathsea-flags.m4
   M /trunk/source/m4/kpse-libpng-flags.m4
   A /trunk/source/m4/kpse-lt-hack.m4
   M /trunk/source/m4/kpse-macos-framework.m4
   M /trunk/source/m4/kpse-pkgs.m4
   M /trunk/source/m4/kpse-setup.m4
   M /trunk/source/m4/kpse-teckit-flags.m4
   M /trunk/source/m4/kpse-warnings.m4
   M /trunk/source/m4/kpse-web2c.m4
   M /trunk/source/m4/kpse-xpdf-flags.m4
   M /trunk/source/m4/kpse-zlib-flags.m4
   A /trunk/source/m4/kpse-zziplib-flags.m4
   M /trunk/source/m4/ltversion.m4
   M /trunk/source/reautoconf
   M /trunk/source/texk/ChangeLog
   M /trunk/source/texk/Makefile.am
   M /trunk/source/texk/Makefile.in
   M /trunk/source/texk/README
   M /trunk/source/texk/aclocal.m4
   M /trunk/source/texk/configure
   M /trunk/source/texk/configure.ac
   M /trunk/source/texk/kpathsea/BUGS
   M /trunk/source/texk/kpathsea/ChangeLog
   M /trunk/source/texk/kpathsea/Makefile.am
   M /trunk/source/texk/kpathsea/Makefile.in
   M /trunk/source/texk/kpathsea/NEWS
   M /trunk/source/texk/kpathsea/PROJECTS
   M /trunk/source/texk/kpathsea/README
   M /trunk/source/texk/kpathsea/absolute.c
   M /trunk/source/texk/kpathsea/absolute.h
   M /trunk/source/texk/kpathsea/ac/kpathsea.ac
   M /trunk/source/texk/kpathsea/access.c
   M /trunk/source/texk/kpathsea/aclocal.m4
   M /trunk/source/texk/kpathsea/c-auto.in
   M /trunk/source/texk/kpathsea/c-ctype.h
   M /trunk/source/texk/kpathsea/c-proto.h
   M /trunk/source/texk/kpathsea/c-stat.h
   M /trunk/source/texk/kpathsea/cnf.c
   M /trunk/source/texk/kpathsea/concatn.c
   M /trunk/source/texk/kpathsea/config.h
   M /trunk/source/texk/kpathsea/configure
   M /trunk/source/texk/kpathsea/configure.ac
   M /trunk/source/texk/kpathsea/db.c
   M /trunk/source/texk/kpathsea/db.h
   M /trunk/source/texk/kpathsea/dir.c
   M /trunk/source/texk/kpathsea/doc/Makefile.in
   M /trunk/source/texk/kpathsea/doc/bugs.texi
   M /trunk/source/texk/kpathsea/doc/install.texi
   M /trunk/source/texk/kpathsea/doc/kpathsea.info
   M /trunk/source/texk/kpathsea/doc/kpathsea.texi
   M /trunk/source/texk/kpathsea/elt-dirs.c
   M /trunk/source/texk/kpathsea/expand.c
   M /trunk/source/texk/kpathsea/fontmap.h
   M /trunk/source/texk/kpathsea/getopt.c
   M /trunk/source/texk/kpathsea/getopt.h
   M /trunk/source/texk/kpathsea/getopt1.c
   M /trunk/source/texk/kpathsea/hash.c
   M /trunk/source/texk/kpathsea/hash.h
   M /trunk/source/texk/kpathsea/kdefault.c
   M /trunk/source/texk/kpathsea/kpathsea.c
   M /trunk/source/texk/kpathsea/kpsewhich.c
   M /trunk/source/texk/kpathsea/lib.h
   M /trunk/source/texk/kpathsea/magstep.h
   M /trunk/source/texk/kpathsea/man/Makefile.am
   M /trunk/source/texk/kpathsea/man/Makefile.in
   M /trunk/source/texk/kpathsea/mingw32.c
   M /trunk/source/texk/kpathsea/mingw32.h
   M /trunk/source/texk/kpathsea/mktex.opt
   M /trunk/source/texk/kpathsea/mktexdir
   M /trunk/source/texk/kpathsea/mktexdir.opt
   M /trunk/source/texk/kpathsea/mktexlsr
   M /trunk/source/texk/kpathsea/mktexmf
   M /trunk/source/texk/kpathsea/mktexnam
   M /trunk/source/texk/kpathsea/mktexnam.opt
   M /trunk/source/texk/kpathsea/mktexpk
   M /trunk/source/texk/kpathsea/mktextfm
   M /trunk/source/texk/kpathsea/mktexupd
   M /trunk/source/texk/kpathsea/pathsearch.c
   M /trunk/source/texk/kpathsea/pathsearch.h
   M /trunk/source/texk/kpathsea/proginit.c
   M /trunk/source/texk/kpathsea/progname.c
   M /trunk/source/texk/kpathsea/progname.h
   M /trunk/source/texk/kpathsea/readable.h
   M /trunk/source/texk/kpathsea/readlink.c
   M /trunk/source/texk/kpathsea/str-list.h
   M /trunk/source/texk/kpathsea/str-llist.h
   M /trunk/source/texk/kpathsea/strcasecmp.c
   M /trunk/source/texk/kpathsea/strstr.c
   M /trunk/source/texk/kpathsea/tex-file.c
   M /trunk/source/texk/kpathsea/tex-file.h
   M /trunk/source/texk/kpathsea/tex-glyph.c
   M /trunk/source/texk/kpathsea/tex-glyph.h
   M /trunk/source/texk/kpathsea/tex-make.c
   M /trunk/source/texk/kpathsea/tex-make.h
   M /trunk/source/texk/kpathsea/texmf.cnf
   M /trunk/source/texk/kpathsea/tilde.c
   M /trunk/source/texk/kpathsea/tilde.h
   M /trunk/source/texk/kpathsea/truncate.c
   M /trunk/source/texk/kpathsea/truncate.h
   M /trunk/source/texk/kpathsea/types.h
   M /trunk/source/texk/kpathsea/variable.c
   M /trunk/source/texk/kpathsea/version.c
   A /trunk/source/texk/kpathsea/version.h
   A /trunk/source/texk/kpathsea/win32lib.h
   M /trunk/source/texk/kpathsea/xcalloc.c
   M /trunk/source/texk/kpathsea/xfseek.c
   M /trunk/source/texk/kpathsea/xfseeko.c
   M /trunk/source/texk/kpathsea/xftell.c
   M /trunk/source/texk/kpathsea/xftello.c
   M /trunk/source/texk/kpathsea/xopendir.c
   M /trunk/source/texk/kpathsea/xopendir.h
   M /trunk/source/texk/kpathsea/xputenv.c
   M /trunk/source/texk/kpathsea/xrealloc.c
   M /trunk/source/texk/kpathsea/xstat.h
   M /trunk/source/texk/web2c/AUTHORS
   M /trunk/source/texk/web2c/ChangeLog
   M /trunk/source/texk/web2c/Makefile.am
   M /trunk/source/texk/web2c/Makefile.in
   M /trunk/source/texk/web2c/NEWS
   M /trunk/source/texk/web2c/README
   M /trunk/source/texk/web2c/ac/web2c.ac
   M /trunk/source/texk/web2c/aclocal.m4
   M /trunk/source/texk/web2c/am/bootstrap.am
   M /trunk/source/texk/web2c/am/cweb.am
   M /trunk/source/texk/web2c/am/texmf.am
   M /trunk/source/texk/web2c/am/web.am
   M /trunk/source/texk/web2c/c-auto.in
   M /trunk/source/texk/web2c/config.h
   M /trunk/source/texk/web2c/configure
   M /trunk/source/texk/web2c/configure.ac
   M /trunk/source/texk/web2c/cpascal.h
   A /trunk/source/texk/web2c/ctangleboot-sh.in
   A /trunk/source/texk/web2c/ctangleboot.cin
   M /trunk/source/texk/web2c/ctiedir/ChangeLog
   M /trunk/source/texk/web2c/ctiedir/ctie-k.ch
   A /trunk/source/texk/web2c/cwebboot.cin
   A /trunk/source/texk/web2c/cwebboot.hin
   M /trunk/source/texk/web2c/cwebdir/ChangeLog
   M /trunk/source/texk/web2c/cwebdir/comm-w2c.ch
   M /trunk/source/texk/web2c/cwebdir/ctang-w2c.ch
   M /trunk/source/texk/web2c/cwebdir/cweav-w2c.ch
   M /trunk/source/texk/web2c/doc/Makefile.in
   M /trunk/source/texk/web2c/doc/web2c.info
   M /trunk/source/texk/web2c/doc/web2c.texi
   M /trunk/source/texk/web2c/help.h
   M /trunk/source/texk/web2c/lib/ChangeLog
   M /trunk/source/texk/web2c/lib/Makefile.am
   M /trunk/source/texk/web2c/lib/Makefile.in
   M /trunk/source/texk/web2c/lib/lib.h
   M /trunk/source/texk/web2c/lib/openclose.c
   M /trunk/source/texk/web2c/lib/printversion.c
   A /trunk/source/texk/web2c/lib/setupvar.c
   M /trunk/source/texk/web2c/lib/texmfmp.c
   M /trunk/source/texk/web2c/lib/usage.c
   M /trunk/source/texk/web2c/lib/version.c
   M /trunk/source/texk/web2c/luatexdir/am/liblua51.am
   M /trunk/source/texk/web2c/luatexdir/am/libluatex.am
   M /trunk/source/texk/web2c/luatexdir/am/luafontforge.am
   M /trunk/source/texk/web2c/luatexdir/am/luamisc.am
   M /trunk/source/texk/web2c/luatexdir/am/luasocket.am
   M /trunk/source/texk/web2c/luatexdir/am/luatex.am
   M /trunk/source/texk/web2c/luatexdir/lua/luatex-api.h
   M /trunk/source/texk/web2c/luatexdir/luatex.c
   M /trunk/source/texk/web2c/luatexdir/ptexlib.h
   M /trunk/source/texk/web2c/luatexdir/tex/mainbody.c
   M /trunk/source/texk/web2c/luatexdir/utils/utils.c
   D /trunk/source/texk/web2c/luatexdir/zziplib
   A /trunk/source/texk/web2c/m4
   A /trunk/source/texk/web2c/m4/web2c-disable.m4
   M /trunk/source/texk/web2c/man/ChangeLog
   M /trunk/source/texk/web2c/man/Makefile.am
   M /trunk/source/texk/web2c/man/Makefile.in
   M /trunk/source/texk/web2c/man/aleph.man
   M /trunk/source/texk/web2c/man/bibtex.man
   M /trunk/source/texk/web2c/man/etex.man
   A /trunk/source/texk/web2c/man/luatex.man
   A /trunk/source/texk/web2c/man/ofm2opl.man
   A /trunk/source/texk/web2c/man/opl2ofm.man
   A /trunk/source/texk/web2c/man/ovf2ovp.man
   A /trunk/source/texk/web2c/man/ovp2ovf.man
   M /trunk/source/texk/web2c/man/pdfetex.man
   M /trunk/source/texk/web2c/man/pdftex.man
   M /trunk/source/texk/web2c/man/tex.man
   A /trunk/source/texk/web2c/man/ttf2afm.man
   M /trunk/source/texk/web2c/mplibdir/mpost.w
   A /trunk/source/texk/web2c/tangle-sh.in
   M /trunk/source/texk/web2c/tangle.ch
   A /trunk/source/texk/web2c/tangleboot.pin
   A /trunk/source/texk/web2c/tex-binpool.ch
   M /trunk/source/texk/web2c/texmfmp.h
   M /trunk/source/texk/web2c/tmf-pool.h
   M /trunk/source/texk/web2c/web2c/ChangeLog
   M /trunk/source/texk/web2c/web2c/Makefile.am
   M /trunk/source/texk/web2c/web2c/Makefile.in
   M /trunk/source/texk/web2c/web2c/aclocal.m4
   M /trunk/source/texk/web2c/web2c/coerce.h
   M /trunk/source/texk/web2c/web2c/common.defines
   M /trunk/source/texk/web2c/web2c/configure
   M /trunk/source/texk/web2c/web2c/convert
   M /trunk/source/texk/web2c/web2c/fixwrites.c
   M /trunk/source/texk/web2c/web2c/main.c
   M /trunk/source/texk/web2c/web2c/makecpool.c
   M /trunk/source/texk/web2c/web2c/native/kpathsea/c-auto.in
   M /trunk/source/texk/web2c/web2c/splitup.c
   M /trunk/source/texk/web2c/web2c/texmf.defines
   M /trunk/source/texk/web2c/web2c/web2c-lexer.c
   M /trunk/source/texk/web2c/web2c/web2c-lexer.l
   M /trunk/source/texk/web2c/web2c/web2c-parser.c
   M /trunk/source/texk/web2c/web2c/web2c-parser.h
   M /trunk/source/texk/web2c/web2c/web2c-parser.y
   M /trunk/source/texk/web2c/web2c/web2c.h
   A /trunk/source/texk/web2c/web2c-sh.in
   M /trunk/source/texk/web2c/xetexdir/am/xetex.am

import new kpathsea, web2c, lib and build structure from texlive

------------------------------------------------------------------------
r3511 | taco | 2010-03-16 18:07:01 +0100 (Tue, 16 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfthread.c

do_thread had its arguments reversed

------------------------------------------------------------------------
r3512 | taco | 2010-03-16 18:28:29 +0100 (Tue, 16 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/libs/Makefile.in
   M /trunk/source/libs/configure
   D /trunk/source/libs/dummy
   D /trunk/source/tetex.ac
   D /trunk/source/texk/ac
   D /trunk/source/texk/web2c/INSTALL
   D /trunk/source/texk/web2c/kpathsea.mk
   D /trunk/source/texk/web2c/man/dmp.man
   D /trunk/source/texk/web2c/man/makempx.man
   D /trunk/source/texk/web2c/man/mpto.man
   D /trunk/source/texk/web2c/man/newer.man
   D /trunk/source/texk/web2c/man/pdftexman.m4
   D /trunk/source/texk/web2c/withenable.ac
   D /trunk/source/texlive.ac
   D /trunk/source/utils/README.orig
   D /trunk/source/utils/ac
   D /trunk/source/utils/dummy
   D /trunk/source/withenable.ac

a list of files that can go away

------------------------------------------------------------------------
r3513 | taco | 2010-03-16 19:26:13 +0100 (Tue, 16 Mar 2010) | 2 lines
Changed paths:
   D /trunk/source/WARNING
   D /trunk/source/ac
   M /trunk/source/aclocal.m4
   M /trunk/source/auxdir/auxsub/Makefile.in
   M /trunk/source/auxdir/auxsub/aclocal.m4
   M /trunk/source/auxdir/auxsub/configure
   D /trunk/source/build-aux/mkinstalldirs
   M /trunk/source/configure
   D /trunk/source/libs/ac
   M /trunk/source/libs/configure.ac
   A /trunk/source/libs/libpng/libpng-1.2.40/aclocal.m4
   D /trunk/source/libs/libpng/libpng-1.2.40/ltmain.sh
   A /trunk/source/libs/libpng/libpng-1.2.40-PATCHES/TL-Changes
   M /trunk/source/texk/Makefile.in
   M /trunk/source/texk/aclocal.m4
   D /trunk/source/texk/add-info-toc
   D /trunk/source/texk/autoconf2.13
   M /trunk/source/texk/configure
   D /trunk/source/texk/dummy
   D /trunk/source/texk/kpathsea/README.CONFIGURE
   D /trunk/source/texk/kpathsea/xt.ac
   D /trunk/source/texk/m4
   D /trunk/source/texk/make
   D /trunk/source/texk/rename
   D /trunk/source/texk/unbackslsh.awk
   M /trunk/source/texk/web2c/Makefile.in
   D /trunk/source/texk/web2c/ctangleboot.c
   D /trunk/source/texk/web2c/ctiedir/ctie-k.c
   D /trunk/source/texk/web2c/cwebboot.c
   D /trunk/source/texk/web2c/doc/Makefile.in.orig
   D /trunk/source/texk/web2c/doc/ref.tex
   D /trunk/source/texk/web2c/doc/texinfo.bst
   D /trunk/source/texk/web2c/fmtutil.in
   M /trunk/source/texk/web2c/libmd5/am/md5.am
   D /trunk/source/texk/web2c/mpdir
   D /trunk/source/texk/web2c/mpware
   D /trunk/source/texk/web2c/tangleboot.p
   D /trunk/source/texk/web2c/web2c/convert.bat
   D /trunk/source/texk/withenable.ac
   M /trunk/source/utils/Makefile.am
   M /trunk/source/utils/Makefile.in
   M /trunk/source/utils/README
   M /trunk/source/utils/aclocal.m4
   M /trunk/source/utils/configure
   M /trunk/source/utils/configure.ac

try to get rid of some more obsolete files (doesnt compile now)

------------------------------------------------------------------------
r3514 | taco | 2010-03-16 19:59:15 +0100 (Tue, 16 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/Makefile.in
   M /trunk/source/aclocal.m4
   M /trunk/source/auxdir/auxsub/Makefile.in
   M /trunk/source/auxdir/auxsub/aclocal.m4
   M /trunk/source/auxdir/auxsub/configure
   M /trunk/source/configure
   M /trunk/source/libs/Makefile.in
   M /trunk/source/libs/aclocal.m4
   M /trunk/source/libs/configure
   M /trunk/source/libs/libpng/Makefile.in
   M /trunk/source/libs/libpng/aclocal.m4
   M /trunk/source/libs/libpng/configure
   M /trunk/source/libs/libpng/include/Makefile.in
   M /trunk/source/libs/obsdcompat/Makefile.in
   M /trunk/source/libs/obsdcompat/aclocal.m4
   M /trunk/source/libs/obsdcompat/configure
   M /trunk/source/libs/xpdf/Makefile.in
   M /trunk/source/libs/xpdf/ac/xpdf.ac
   M /trunk/source/libs/xpdf/aclocal.m4
   M /trunk/source/libs/xpdf/configure
   M /trunk/source/libs/xpdf/fofi/Makefile.in
   M /trunk/source/libs/xpdf/goo/Makefile.in
   M /trunk/source/libs/xpdf/xpdf/Makefile.in
   M /trunk/source/libs/zlib/Makefile.in
   M /trunk/source/libs/zlib/aclocal.m4
   M /trunk/source/libs/zlib/configure
   M /trunk/source/libs/zlib/include/Makefile.in
   M /trunk/source/libs/zziplib/Makefile.in
   M /trunk/source/libs/zziplib/aclocal.m4
   M /trunk/source/libs/zziplib/configure
   M /trunk/source/libs/zziplib/include/zzip/Makefile.in
   M /trunk/source/texk/Makefile.in
   M /trunk/source/texk/aclocal.m4
   M /trunk/source/texk/configure
   M /trunk/source/texk/kpathsea/Makefile.in
   M /trunk/source/texk/kpathsea/aclocal.m4
   M /trunk/source/texk/kpathsea/configure
   M /trunk/source/texk/kpathsea/doc/Makefile.in
   M /trunk/source/texk/kpathsea/man/Makefile.in
   M /trunk/source/texk/web2c/Makefile.in
   M /trunk/source/texk/web2c/aclocal.m4
   M /trunk/source/texk/web2c/configure
   M /trunk/source/texk/web2c/doc/Makefile.in
   M /trunk/source/texk/web2c/lib/Makefile.in
   M /trunk/source/texk/web2c/man/Makefile.in
   M /trunk/source/texk/web2c/web2c/Makefile.in
   M /trunk/source/texk/web2c/web2c/aclocal.m4
   M /trunk/source/texk/web2c/web2c/configure
   M /trunk/source/utils/Makefile.in
   M /trunk/source/utils/aclocal.m4
   M /trunk/source/utils/configure

big autoreconf

------------------------------------------------------------------------
r3515 | taco | 2010-03-16 20:06:28 +0100 (Tue, 16 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/auxdir/auxsub
   M /trunk/source/libs/zziplib

ignore autom4te.cache dirs

------------------------------------------------------------------------
r3516 | taco | 2010-03-16 20:37:33 +0100 (Tue, 16 Mar 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf

updated manual

------------------------------------------------------------------------
r3517 | taco | 2010-03-16 20:38:13 +0100 (Tue, 16 Mar 2010) | 2 lines
Changed paths:
   A /tags/beta-0.52.0 (from /trunk:3516)

new tag

------------------------------------------------------------------------

From elie.roux at telecom-bretagne.eu  Wed Mar 17 09:09:31 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Wed, 17 Mar 2010 10:09:31 +0200
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <4B9F3C59.2070903@elvenkind.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>
	<e7fba2611003150452q361cf85ehdc3049a3cbcfe8da@mail.gmail.com>
	<4B9E2225.4070403@elvenkind.com>
	<e7fba2611003150814m5e6fbbb2y5b2f96d933d5d88d@mail.gmail.com>
	<4B9E5831.4000101@elvenkind.com> <4B9E5987.8000004@elvenkind.com>
	<e7fba2611003151021s1ac2c718o5334d0ef251df662@mail.gmail.com>
	<4B9E6F97.9090908@elvenkind.com>
	<eba574421003160101kfa3253o604b2a15daa02053@mail.gmail.com>
	<4B9F3C59.2070903@elvenkind.com>
Message-ID: <eba574421003170109k7f8626e5xbc975ea3385eef1d@mail.gmail.com>

2010/3/16 Taco Hoekwater <taco at elvenkind.com>:
>>
>> local system = io.popen("uname -s"):read("*l")
>
> You could test against os.uname().

Hello,

here is what I get from os.uname() now:

os.uname().sysname: Windows XP
os.uname().machine: i686
os.uname().release: build 2600
os.uname().version: 5.01 Service Pack 3
os.uname().nodename: ROTIMN0L020707

No trace of cygwin, which is normal I guess, as the system calls go
directly to windows, being cygwin-transparent... Any idea of how to
detect cygwin? I must say I don't have any, as you cannot call
cygwin-specific things in the binary...

Thank you!
-- 
Elie

From taco at elvenkind.com  Wed Mar 17 10:25:17 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 17 Mar 2010 10:25:17 +0100
Subject: [Dev-luatex] platform specific functionality
In-Reply-To: <eba574421003170109k7f8626e5xbc975ea3385eef1d@mail.gmail.com>
References: <e7fba2611003011557m2b2f13b1w1af242771f44ff98@mail.gmail.com>	<e7fba2611003150452q361cf85ehdc3049a3cbcfe8da@mail.gmail.com>	<4B9E2225.4070403@elvenkind.com>	<e7fba2611003150814m5e6fbbb2y5b2f96d933d5d88d@mail.gmail.com>	<4B9E5831.4000101@elvenkind.com>
	<4B9E5987.8000004@elvenkind.com>	<e7fba2611003151021s1ac2c718o5334d0ef251df662@mail.gmail.com>	<4B9E6F97.9090908@elvenkind.com>	<eba574421003160101kfa3253o604b2a15daa02053@mail.gmail.com>	<4B9F3C59.2070903@elvenkind.com>
	<eba574421003170109k7f8626e5xbc975ea3385eef1d@mail.gmail.com>
Message-ID: <4BA09FFD.8080601@elvenkind.com>



?lie Roux wrote:
> 2010/3/16 Taco Hoekwater <taco at elvenkind.com>:
>>> local system = io.popen("uname -s"):read("*l")
>> You could test against os.uname().
> 
> Hello,
> 
> here is what I get from os.uname() now:
> 
> os.uname().sysname: Windows XP
> os.uname().machine: i686
> os.uname().release: build 2600
> os.uname().version: 5.01 Service Pack 3
> os.uname().nodename: ROTIMN0L020707
> 
> No trace of cygwin, which is normal I guess, as the system calls go
> directly to windows, being cygwin-transparent... Any idea of how to
> detect cygwin? I must say I don't have any, as you cannot call
> cygwin-specific things in the binary...

Maybe a test for the odd fake unix mount structure? Assuming they
still do that, I abandoned cygwin as a 'bad idea' about a decade ago.

Best wishes,
Taco

From elie.roux at telecom-bretagne.eu  Wed Mar 17 10:55:37 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Wed, 17 Mar 2010 11:55:37 +0200
Subject: [Dev-luatex] cygwin static detection
In-Reply-To: <eba574421003170206p1c46ea47ud3d0b427245f5430@mail.gmail.com>
References: <eba574421003170206p1c46ea47ud3d0b427245f5430@mail.gmail.com>
Message-ID: <eba574421003170255n6555aa60o253a1172f222c0e5@mail.gmail.com>

Hello,

The attached patch detects if LuaTeX is compiled under cygwin: the
result of os.type is unix and os.name is cygwin. Without this patch,
os.type is unix and os.name is generic... Is this patch ok or would
you prefer os.type to return windows? I think it's best this way.

Anyway, as most users will use binaries compiled under non-cygwin in
their cygwin system, thus it does not solve the cygwin detection
problem.

Thank you,
-- 
Elie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: loslibtext.c.diff
Type: text/x-diff
Size: 344 bytes
Desc: not available
URL: <http://www.ntg.nl/mailman/private/dev-luatex/attachments/20100317/af529129/attachment.diff>

From taco at elvenkind.com  Wed Mar 17 11:03:46 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 17 Mar 2010 11:03:46 +0100
Subject: [Dev-luatex] cygwin static detection
In-Reply-To: <eba574421003170255n6555aa60o253a1172f222c0e5@mail.gmail.com>
References: <eba574421003170206p1c46ea47ud3d0b427245f5430@mail.gmail.com>
	<eba574421003170255n6555aa60o253a1172f222c0e5@mail.gmail.com>
Message-ID: <4BA0A902.3020607@elvenkind.com>



?lie Roux wrote:
> Hello,
> 
> The attached patch detects if LuaTeX is compiled under cygwin: the
> result of os.type is unix and os.name is cygwin. Without this patch,
> os.type is unix and os.name is generic... Is this patch ok or would
> you prefer os.type to return windows? I think it's best this way.

Patch applied as-is. 'cygwin' sounds fine as a name.

Best wishes,
Taco

From t34www at googlemail.com  Wed Mar 17 12:22:57 2010
From: t34www at googlemail.com (T T)
Date: Wed, 17 Mar 2010 11:22:57 +0000
Subject: [Dev-luatex] cygwin static detection
In-Reply-To: <eba574421003170255n6555aa60o253a1172f222c0e5@mail.gmail.com>
References: <eba574421003170206p1c46ea47ud3d0b427245f5430@mail.gmail.com>
	<eba574421003170255n6555aa60o253a1172f222c0e5@mail.gmail.com>
Message-ID: <e7fba2611003170422y1ad51ddao3f06b986025fa711@mail.gmail.com>

On 17 March 2010 09:55, ?lie Roux <elie.roux at telecom-bretagne.eu> wrote:
>
> Anyway, as most users will use binaries compiled under non-cygwin in
> their cygwin system, thus it does not solve the cygwin detection
> problem.

But if non-cygwin binaries are used, why would you want to detect
cygwin at all? The best you can do is to detect if cygwin is installed
on the system, but that doesn't mean that you want to run under
cygwin. Wasn't cygwin added as a separate ARCH in TL to clear this
confusion?

Cheers,

Tomek

From root at mail.boekplan.nl  Wed Mar 17 12:26:09 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed, 17 Mar 2010 12:26:09 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100317112609.2600A40059@mail.boekplan.nl>

------------------------------------------------------------------------
r3518 | taco | 2010-03-17 10:57:13 +0100 (Wed, 17 Mar 2010) | 3 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/lua/loslibext.c
   M /trunk/source/texk/web2c/luatexdir/luatex.c

a patch to detect compilation under cygwin from Elie Roux,
and bump the version number to 0.53.

------------------------------------------------------------------------

From elie.roux at telecom-bretagne.eu  Wed Mar 17 13:18:29 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Wed, 17 Mar 2010 14:18:29 +0200
Subject: [Dev-luatex] cygwin static detection
In-Reply-To: <e7fba2611003170422y1ad51ddao3f06b986025fa711@mail.gmail.com>
References: <eba574421003170206p1c46ea47ud3d0b427245f5430@mail.gmail.com>
	<eba574421003170255n6555aa60o253a1172f222c0e5@mail.gmail.com>
	<e7fba2611003170422y1ad51ddao3f06b986025fa711@mail.gmail.com>
Message-ID: <eba574421003170518t1108db58s2860ce407d6f3254@mail.gmail.com>

2010/3/17 T T <t34www at googlemail.com>:
>
> But if non-cygwin binaries are used, why would you want to detect
> cygwin at all?

Because that's what I'm using, and thus I guess I'm not the only one ;-)

> The best you can do is to detect if cygwin is installed
> on the system, but that doesn't mean that you want to run under
> cygwin. Wasn't cygwin added as a separate ARCH in TL to clear this
> confusion?

I don't know, but I'm using LuaTeX binaries cross-compiles by Taco at
each releases (again, I'm definitley not the only one), and I need to
change cygwin paths returned by fc-list (the fc-list of cygwin)...
Soon I'll start to compile my own binaries under cygwin, but I don't
think we can expect everyone to do so.

Is the cygwin ARCH of TL compiled under cygwin? If so, my patch will
make things work better, as we'll know that unix/cygwin is cygwin
(which we couldn't with unix/generic).

Thank you,
-- 
Elie

From t34www at googlemail.com  Wed Mar 17 14:16:57 2010
From: t34www at googlemail.com (T T)
Date: Wed, 17 Mar 2010 13:16:57 +0000
Subject: [Dev-luatex] cygwin static detection
In-Reply-To: <eba574421003170518t1108db58s2860ce407d6f3254@mail.gmail.com>
References: <eba574421003170206p1c46ea47ud3d0b427245f5430@mail.gmail.com>
	<eba574421003170255n6555aa60o253a1172f222c0e5@mail.gmail.com>
	<e7fba2611003170422y1ad51ddao3f06b986025fa711@mail.gmail.com>
	<eba574421003170518t1108db58s2860ce407d6f3254@mail.gmail.com>
Message-ID: <e7fba2611003170616y61c3a44dl63ed7cb980955d4f@mail.gmail.com>

On 17 March 2010 12:18, ?lie Roux <elie.roux at telecom-bretagne.eu> wrote:
> 2010/3/17 T T <t34www at googlemail.com>:
>>
>> But if non-cygwin binaries are used, why would you want to detect
>> cygwin at all?
>
> Because that's what I'm using, and thus I guess I'm not the only one ;-)
>
>> The best you can do is to detect if cygwin is installed
>> on the system, but that doesn't mean that you want to run under
>> cygwin. Wasn't cygwin added as a separate ARCH in TL to clear this
>> confusion?
>
> I don't know, but I'm using LuaTeX binaries cross-compiles by Taco at
> each releases (again, I'm definitley not the only one), and I need to
> change cygwin paths returned by fc-list (the fc-list of cygwin)...
> Soon I'll start to compile my own binaries under cygwin, but I don't
> think we can expect everyone to do so.

Ah, OK. Well, if you want the binaries to understand cygwin
intricacies then you have to compile them under cygwin I reckon.

> Is the cygwin ARCH of TL compiled under cygwin?

This is my understanding. Ken Brown is maintaining this port, perhaps
you should ask him or on tlbuild for more information/help. I don't
use cygwin myself and know very little about it (if I'll ever need
unix under windows I'll go for VBox or andLinux, cygwin is a strange
beast).

> If so, my patch will
> make things work better, as we'll know that unix/cygwin is cygwin
> (which we couldn't with unix/generic).

No worries. These changes will pulled to TL along with all the others
once we start building for the next release.

Cheers,

Tomek

From root at mail.boekplan.nl  Wed Mar 17 22:25:24 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed, 17 Mar 2010 22:25:24 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100317212525.0C60940059@mail.boekplan.nl>

------------------------------------------------------------------------
r3519 | taco | 2010-03-17 16:41:45 +0100 (Wed, 17 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/Makefile.in
   M /trunk/source/texk/web2c/aclocal.m4
   M /trunk/source/texk/web2c/c-auto.in
   M /trunk/source/texk/web2c/configure
   M /trunk/source/texk/web2c/configure.ac
   M /trunk/source/texk/web2c/doc/Makefile.in
   M /trunk/source/texk/web2c/lib/Makefile.in
   M /trunk/source/texk/web2c/luatexdir/am/luatex.am
   M /trunk/source/texk/web2c/man/Makefile.in
   M /trunk/source/texk/web2c/web2c/Makefile.in
   M /trunk/source/texk/web2c/web2c/aclocal.m4

use libtool to solve the dynamic loading problems

------------------------------------------------------------------------
r3520 | taco | 2010-03-17 17:35:52 +0100 (Wed, 17 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua51/luaconf.h

make sure <dlfcn.h> actually exists before trying to use it

------------------------------------------------------------------------

From root at mail.boekplan.nl  Thu Mar 18 22:25:20 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Thu, 18 Mar 2010 22:25:20 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100318212520.2D6A740059@mail.boekplan.nl>

------------------------------------------------------------------------
r3521 | taco | 2010-03-18 20:27:22 +0100 (Thu, 18 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c

error detection in scan_integer_part was wrong due to missing
initialization of OK_so_far (spotted by Javier Mugica)

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Mar 19 12:26:11 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 19 Mar 2010 12:26:11 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100319112612.366E140059@mail.boekplan.nl>

------------------------------------------------------------------------
r3522 | oneiros | 2010-03-19 01:24:24 +0100 (Fri, 19 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/errors.c

add some noreturn attributes

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Mar 19 16:25:28 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 19 Mar 2010 16:25:28 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100319152528.152774005A@mail.boekplan.nl>

------------------------------------------------------------------------
r3523 | taco | 2010-03-19 14:28:08 +0100 (Fri, 19 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.c
   M /trunk/source/texk/web2c/luatexdir/tex/directions.c
   M /trunk/source/texk/web2c/luatexdir/tex/directions.h

simplify direction macros

------------------------------------------------------------------------
r3524 | taco | 2010-03-19 15:13:45 +0100 (Fri, 19 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/utils/utils.c

fix header ordering for asprintf, proposed by Martin

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Mar 19 22:25:27 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 19 Mar 2010 22:25:27 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100319212528.08CB940059@mail.boekplan.nl>

------------------------------------------------------------------------
r3525 | taco | 2010-03-19 21:30:27 +0100 (Fri, 19 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /trunk/source/texk/web2c/luatexdir/tex/postlinebreak.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.c

add three virtual read-only fields to each glyph node: width, height, and depth

------------------------------------------------------------------------
r3526 | taco | 2010-03-19 21:56:38 +0100 (Fri, 19 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.c
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.h

implement node.protrusion_skipable()

------------------------------------------------------------------------
r3527 | taco | 2010-03-19 21:59:26 +0100 (Fri, 19 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c

delete a bunch of unused variables

------------------------------------------------------------------------

From trebestie at gmail.com  Sat Mar 20 08:59:21 2010
From: trebestie at gmail.com (Diego Depaoli)
Date: Sat, 20 Mar 2010 08:59:21 +0100
Subject: [Dev-luatex] [luatex] Luatex 0.52.0 announcement
In-Reply-To: <4B9FE3B4.106@elvenkind.com>
References: <4B9FE3B4.106@elvenkind.com>
Message-ID: <83e5fb981003200059m5c323657jd50c54f8024eccc3@mail.gmail.com>

2010/3/16 Taco Hoekwater <taco at elvenkind.com>:
> Hi,
>
> I have just uploaded the archives for a new luatex release, 0.52.0.

Sorry Taco for bothering you again.
On my FreeBSD box, configure fails here

if test -z "`${MAKE-make} -v 2>/dev/null | grep GNU`"; then
  if test "x$enable_native_texlive_build" = xno; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Building TeX
Live may require GNU make" >&5
$as_echo "$as_me: WARNING: Building TeX Live may require GNU make" >&2;}
  else
    as_fn_error "Building TeX Live requires GNU make" "$LINENO" 5
  fi
fi

since ${MAKE-make} is set to make instead of gmake which (co)exists in
my system.
At this moment I've no time to find a better workaround than to skip this test.

Regards

-- 
Diego Depaoli

From root at mail.boekplan.nl  Sat Mar 20 12:26:10 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat, 20 Mar 2010 12:26:10 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100320112610.C1AEF4005D@mail.boekplan.nl>

------------------------------------------------------------------------
r3528 | oneiros | 2010-03-19 22:28:20 +0100 (Fri, 19 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luainit.c

use asprintf instead of snprintf; ptexbanner is a const

------------------------------------------------------------------------

From root at mail.boekplan.nl  Sat Mar 20 16:25:28 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat, 20 Mar 2010 16:25:28 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100320152528.144044005D@mail.boekplan.nl>

------------------------------------------------------------------------
r3529 | oneiros | 2010-03-20 13:42:01 +0100 (Sat, 20 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luainit.c

no asprintf on Win32

------------------------------------------------------------------------
r3530 | oneiros | 2010-03-20 13:42:39 +0100 (Sat, 20 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luainit.c

2010 :-)

------------------------------------------------------------------------
r3531 | oneiros | 2010-03-20 14:54:17 +0100 (Sat, 20 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luainit.c

asprintf/snprintf

------------------------------------------------------------------------
r3532 | oneiros | 2010-03-20 16:10:58 +0100 (Sat, 20 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luainit.c

asprintf works on Win32 :-)

------------------------------------------------------------------------

From taco at elvenkind.com  Sat Mar 20 20:49:04 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 20 Mar 2010 20:49:04 +0100
Subject: [Dev-luatex] [luatex] Luatex 0.52.0 announcement
In-Reply-To: <83e5fb981003200059m5c323657jd50c54f8024eccc3@mail.gmail.com>
References: <4B9FE3B4.106@elvenkind.com>
	<83e5fb981003200059m5c323657jd50c54f8024eccc3@mail.gmail.com>
Message-ID: <4BA526B0.6010201@elvenkind.com>


HI Diego,

I dropped the luatex and dev-context lists, but added Peter. Where
does the problem below pop up? I build.sh, we have this bit of code
(from Martin, I believe)

MAKE=make;
if make -v 2>&1| grep "GNU Make" >/dev/null
then
   echo "Your make is a GNU-make; I will use that"
elif gmake -v >/dev/null 2>&1
then
   MAKE=gmake;
   echo "You have a GNU-make installed as gmake; I will use that"
else
   echo "I can't find a GNU-make; I'll try to use make and hope that 
works."
   echo "If it doesn't, please install GNU-make."
fi

but your error clearly comes from a different place.

Best wishes,
Taco

Diego Depaoli wrote:
> 2010/3/16 Taco Hoekwater <taco at elvenkind.com>:
>> Hi,
>>
>> I have just uploaded the archives for a new luatex release, 0.52.0.
> 
> Sorry Taco for bothering you again.
> On my FreeBSD box, configure fails here
> 
> if test -z "`${MAKE-make} -v 2>/dev/null | grep GNU`"; then
>   if test "x$enable_native_texlive_build" = xno; then
>     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Building TeX
> Live may require GNU make" >&5
> $as_echo "$as_me: WARNING: Building TeX Live may require GNU make" >&2;}
>   else
>     as_fn_error "Building TeX Live requires GNU make" "$LINENO" 5
>   fi
> fi
> 
> since ${MAKE-make} is set to make instead of gmake which (co)exists in
> my system.
> At this moment I've no time to find a better workaround than to skip this test.
> 
> Regards
> 


From trebestie at gmail.com  Sat Mar 20 21:31:05 2010
From: trebestie at gmail.com (Diego Depaoli)
Date: Sat, 20 Mar 2010 21:31:05 +0100
Subject: [Dev-luatex] [luatex] Luatex 0.52.0 announcement
In-Reply-To: <4BA526B0.6010201@elvenkind.com>
References: <4B9FE3B4.106@elvenkind.com>
	<83e5fb981003200059m5c323657jd50c54f8024eccc3@mail.gmail.com>
	<4BA526B0.6010201@elvenkind.com>
Message-ID: <83e5fb981003201331n7037c78ds3d3dbea25f2e88c2@mail.gmail.com>

2010/3/20 Taco Hoekwater <taco at elvenkind.com>:
>
> HI Diego,
>
> but your error clearly comes from a different place.
Yes, error comes from this code
if test -z "`${MAKE-make} -v 2>/dev/null | grep GNU`"; then
 ?if test "x$enable_native_texlive_build" = xno; then
 ? ?{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Building TeX
 Live may require GNU make" >&5
 $as_echo "$as_me: WARNING: Building TeX Live may require GNU make" >&2;}
 ?else
 ? ?as_fn_error "Building TeX Live requires GNU make" "$LINENO" 5
 ?fi
 fi
in  luatex source/configure (http://goo.gl/Ddu8).
The code in build.sh works well.

Regards

-- 
Diego Depaoli

From root at mail.boekplan.nl  Sun Mar 21 12:26:09 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun, 21 Mar 2010 12:26:09 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100321112609.5248D4005A@mail.boekplan.nl>

------------------------------------------------------------------------
r3533 | taco | 2010-03-21 07:29:29 +0100 (Sun, 21 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c

implement tex.badness()

------------------------------------------------------------------------

From root at mail.boekplan.nl  Sun Mar 21 22:25:21 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sun, 21 Mar 2010 22:25:21 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100321212521.3E18540059@mail.boekplan.nl>

------------------------------------------------------------------------
r3534 | taco | 2010-03-21 17:13:52 +0100 (Sun, 21 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/Makefile.in
   M /trunk/source/texk/web2c/aclocal.m4
   M /trunk/source/texk/web2c/configure
   M /trunk/source/texk/web2c/doc/Makefile.in
   M /trunk/source/texk/web2c/lib/Makefile.in
   M /trunk/source/texk/web2c/luatexdir/am/libluatex.am
   D /trunk/source/texk/web2c/luatexdir/dvi/dvigen.c
   A /trunk/source/texk/web2c/luatexdir/dvi/dvigen.w
   M /trunk/source/texk/web2c/man/Makefile.in
   M /trunk/source/texk/web2c/web2c/Makefile.in
   M /trunk/source/texk/web2c/web2c/aclocal.m4

here is the first of the cweb files (dvi/dvigen.w)

------------------------------------------------------------------------
r3535 | oneiros | 2010-03-21 18:02:05 +0100 (Sun, 21 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.w

svn properties got lost

------------------------------------------------------------------------

From peb at mppmu.mpg.de  Mon Mar 22 12:01:10 2010
From: peb at mppmu.mpg.de (Peter Breitenlohner)
Date: Mon, 22 Mar 2010 12:01:10 +0100 (CET)
Subject: [Dev-luatex] [luatex] Luatex 0.52.0 announcement
In-Reply-To: <83e5fb981003201331n7037c78ds3d3dbea25f2e88c2@mail.gmail.com>
References: <4B9FE3B4.106@elvenkind.com>
	<83e5fb981003200059m5c323657jd50c54f8024eccc3@mail.gmail.com>
	<4BA526B0.6010201@elvenkind.com>
	<83e5fb981003201331n7037c78ds3d3dbea25f2e88c2@mail.gmail.com>
Message-ID: <alpine.LNX.2.00.1003221148040.11240@pcl321.mppmu.mpg.de>

On Sat, 20 Mar 2010, Diego Depaoli wrote:

> Yes, error comes from this code
> if test -z "`${MAKE-make} -v 2>/dev/null | grep GNU`"; then
> ?if test "x$enable_native_texlive_build" = xno; then
> ? ?{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Building TeX
> Live may require GNU make" >&5
> $as_echo "$as_me: WARNING: Building TeX Live may require GNU make" >&2;}
> ?else
> ? ?as_fn_error "Building TeX Live requires GNU make" "$LINENO" 5
> ?fi
> fi
> in  luatex source/configure (http://goo.gl/Ddu8).

Hi Diego, Taco,

some parts of the TeX Live tree (libs/freetype2/ and libs/icu/ if I remember
correctly) require GNU make.  Thus the TL top-level configure checks for
this and produces a warning (--disable-native-texlive-build) or an error
(--enable-native-texlive-build, the default).  We think this is much better
than failing at a later stage of the build process.

If you have GNU make installed somewhere you should say
 	configure MAKE=/PATH/TO/GUN-MAKE ...
or whith the TL ./Build script
 	TL_MAKE=/PATH/TO/GUN-MAKE ./Build ...
I suppose, the luatex ./build script is a variation of ./Build, so this
should also work with ./build.

If you don't have GNU make you might try
 	configure --disable-native-texlive-build ...
but then the build may fail at a later stage.

This ought to be mentioned in TL's top-level README.config -- yet to be done.

Regards
Peter Breitenlohner <peb at mppmu.mpg.de>

From taco at elvenkind.com  Mon Mar 22 12:24:16 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 22 Mar 2010 12:24:16 +0100
Subject: [Dev-luatex] [luatex] Luatex 0.52.0 announcement
In-Reply-To: <alpine.LNX.2.00.1003221148040.11240@pcl321.mppmu.mpg.de>
References: <4B9FE3B4.106@elvenkind.com>
	<83e5fb981003200059m5c323657jd50c54f8024eccc3@mail.gmail.com>
	<4BA526B0.6010201@elvenkind.com>
	<83e5fb981003201331n7037c78ds3d3dbea25f2e88c2@mail.gmail.com>
	<alpine.LNX.2.00.1003221148040.11240@pcl321.mppmu.mpg.de>
Message-ID: <4BA75360.5070503@elvenkind.com>



Peter Breitenlohner wrote:
> On Sat, 20 Mar 2010, Diego Depaoli wrote:
> 
>> Yes, error comes from this code
>> if test -z "`${MAKE-make} -v 2>/dev/null | grep GNU`"; then
>>  if test "x$enable_native_texlive_build" = xno; then
>>    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Building TeX
>> Live may require GNU make" >&5
>> $as_echo "$as_me: WARNING: Building TeX Live may require GNU make" >&2;}
>>  else
>>    as_fn_error "Building TeX Live requires GNU make" "$LINENO" 5
>>  fi
>> fi
>> in  luatex source/configure (http://goo.gl/Ddu8).
> 
> Hi Diego, Taco,
> 
> some parts of the TeX Live tree (libs/freetype2/ and libs/icu/ if I
> remember
> correctly) require GNU make.  Thus the TL top-level configure checks for
> this and produces a warning (--disable-native-texlive-build) or an error
> (--enable-native-texlive-build, the default).  We think this is much better
> than failing at a later stage of the build process.
> 
> If you have GNU make installed somewhere you should say
>     configure MAKE=/PATH/TO/GUN-MAKE ...
> or whith the TL ./Build script
>     TL_MAKE=/PATH/TO/GUN-MAKE ./Build ...
> I suppose, the luatex ./build script is a variation of ./Build, so this
> should also work with ./build.

Diego, can you try whether it works if build.sh sets TL_MAKE
as well as MAKE?

Best wishes,
Taco

From root at mail.boekplan.nl  Mon Mar 22 16:25:27 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon, 22 Mar 2010 16:25:27 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100322152527.1DB7840059@mail.boekplan.nl>

------------------------------------------------------------------------
r3536 | taco | 2010-03-22 14:07:39 +0100 (Mon, 22 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c
   M /trunk/source/texk/web2c/luatexdir/utils/synctex-luatex.h

fix synctex

------------------------------------------------------------------------

From root at mail.boekplan.nl  Tue Mar 23 12:26:10 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue, 23 Mar 2010 12:26:10 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100323112610.A9F6D40059@mail.boekplan.nl>

------------------------------------------------------------------------
r3537 | taco | 2010-03-23 06:59:43 +0100 (Tue, 23 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.c

initialize last_line_fill properly (to fix \lastlinefit)

------------------------------------------------------------------------
r3538 | taco | 2010-03-23 07:06:25 +0100 (Tue, 23 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/texfileio.c

fix readbinfile: existing files can legally have length 0

------------------------------------------------------------------------
r3539 | taco | 2010-03-23 10:54:29 +0100 (Tue, 23 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c

rule_dirs are supposed to be >=0, otherwise the rule
was uninitialized

------------------------------------------------------------------------

From khaledhosny at eglug.org  Tue Mar 23 16:01:42 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 23 Mar 2010 17:01:42 +0200
Subject: [Dev-luatex] List archives
Message-ID: <20100323150142.GA4203@khaled-laptop>

I was searching google for something I'm sure was discussed on this
list, but I found nothing. Checking the archives myself, I was surprised
they are still member only. Now I'm wondering if it make sense anymore
to keep it that way?

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From taco at elvenkind.com  Wed Mar 24 10:29:11 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 24 Mar 2010 10:29:11 +0100
Subject: [Dev-luatex] List archives
In-Reply-To: <20100323150142.GA4203@khaled-laptop>
References: <20100323150142.GA4203@khaled-laptop>
Message-ID: <4BA9DB67.9030206@elvenkind.com>

Khaled Hosny wrote:
> I was searching google for something I'm sure was discussed on this
> list, but I found nothing. Checking the archives myself, I was surprised
> they are still member only. Now I'm wondering if it make sense anymore
> to keep it that way?

Archive made public now (as Hartmut pointed out, the mail-archive.com
version was publicly available already anyway)

Best wishes,
Taco

From root at mail.boekplan.nl  Wed Mar 24 12:26:10 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed, 24 Mar 2010 12:26:10 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100324112610.8F82640059@mail.boekplan.nl>

------------------------------------------------------------------------
r3540 | taco | 2010-03-24 07:33:34 +0100 (Wed, 24 Mar 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

remove some no longer existing parameters in the lua interface documentation

------------------------------------------------------------------------
r3541 | taco | 2010-03-24 08:07:26 +0100 (Wed, 24 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lpdflib.c

patch fread_to_buf for platforms where sizeof(size_t *) != sizeof(int *)

------------------------------------------------------------------------
r3542 | taco | 2010-03-24 11:16:09 +0100 (Wed, 24 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/Makefile.in
   M /trunk/source/texk/web2c/luatexdir/am/libluatex.am
   D /trunk/source/texk/web2c/luatexdir/tex/align.c
   A /trunk/source/texk/web2c/luatexdir/tex/align.w (from /trunk/source/texk/web2c/luatexdir/tex/align.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/arithmetic.c
   A /trunk/source/texk/web2c/luatexdir/tex/arithmetic.w (from /trunk/source/texk/web2c/luatexdir/tex/arithmetic.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/buildpage.c
   A /trunk/source/texk/web2c/luatexdir/tex/buildpage.w (from /trunk/source/texk/web2c/luatexdir/tex/buildpage.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/commands.c
   A /trunk/source/texk/web2c/luatexdir/tex/commands.w (from /trunk/source/texk/web2c/luatexdir/tex/commands.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/conditional.c
   A /trunk/source/texk/web2c/luatexdir/tex/conditional.w (from /trunk/source/texk/web2c/luatexdir/tex/conditional.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/directions.c
   A /trunk/source/texk/web2c/luatexdir/tex/directions.w (from /trunk/source/texk/web2c/luatexdir/tex/directions.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/dumpdata.c
   A /trunk/source/texk/web2c/luatexdir/tex/dumpdata.w (from /trunk/source/texk/web2c/luatexdir/tex/dumpdata.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/equivalents.c
   A /trunk/source/texk/web2c/luatexdir/tex/equivalents.w (from /trunk/source/texk/web2c/luatexdir/tex/equivalents.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/errors.c
   A /trunk/source/texk/web2c/luatexdir/tex/errors.w (from /trunk/source/texk/web2c/luatexdir/tex/errors.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/expand.c
   A /trunk/source/texk/web2c/luatexdir/tex/expand.w (from /trunk/source/texk/web2c/luatexdir/tex/expand.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/extensions.c
   A /trunk/source/texk/web2c/luatexdir/tex/extensions.w (from /trunk/source/texk/web2c/luatexdir/tex/extensions.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/filename.c
   A /trunk/source/texk/web2c/luatexdir/tex/filename.w (from /trunk/source/texk/web2c/luatexdir/tex/filename.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/inputstack.c
   A /trunk/source/texk/web2c/luatexdir/tex/inputstack.w (from /trunk/source/texk/web2c/luatexdir/tex/inputstack.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/linebreak.c
   A /trunk/source/texk/web2c/luatexdir/tex/linebreak.w (from /trunk/source/texk/web2c/luatexdir/tex/linebreak.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/mainbody.c
   A /trunk/source/texk/web2c/luatexdir/tex/mainbody.w (from /trunk/source/texk/web2c/luatexdir/tex/mainbody.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/maincontrol.c
   A /trunk/source/texk/web2c/luatexdir/tex/maincontrol.w (from /trunk/source/texk/web2c/luatexdir/tex/maincontrol.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/mathcodes.c
   A /trunk/source/texk/web2c/luatexdir/tex/mathcodes.w (from /trunk/source/texk/web2c/luatexdir/tex/mathcodes.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/memoryword.c
   A /trunk/source/texk/web2c/luatexdir/tex/memoryword.w (from /trunk/source/texk/web2c/luatexdir/tex/memoryword.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/mlist.c
   A /trunk/source/texk/web2c/luatexdir/tex/mlist.w (from /trunk/source/texk/web2c/luatexdir/tex/mlist.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/nesting.c
   A /trunk/source/texk/web2c/luatexdir/tex/nesting.w (from /trunk/source/texk/web2c/luatexdir/tex/nesting.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/packaging.c
   A /trunk/source/texk/web2c/luatexdir/tex/packaging.w (from /trunk/source/texk/web2c/luatexdir/tex/packaging.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/postlinebreak.c
   A /trunk/source/texk/web2c/luatexdir/tex/postlinebreak.w (from /trunk/source/texk/web2c/luatexdir/tex/postlinebreak.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/primitive.c
   A /trunk/source/texk/web2c/luatexdir/tex/primitive.w (from /trunk/source/texk/web2c/luatexdir/tex/primitive.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/printing.c
   A /trunk/source/texk/web2c/luatexdir/tex/printing.w (from /trunk/source/texk/web2c/luatexdir/tex/printing.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/scanning.c
   A /trunk/source/texk/web2c/luatexdir/tex/scanning.w (from /trunk/source/texk/web2c/luatexdir/tex/scanning.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/stringpool.c
   A /trunk/source/texk/web2c/luatexdir/tex/stringpool.w (from /trunk/source/texk/web2c/luatexdir/tex/stringpool.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/texdeffont.c
   A /trunk/source/texk/web2c/luatexdir/tex/texdeffont.w (from /trunk/source/texk/web2c/luatexdir/tex/texdeffont.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/texfileio.c
   A /trunk/source/texk/web2c/luatexdir/tex/texfileio.w (from /trunk/source/texk/web2c/luatexdir/tex/texfileio.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/texmath.c
   A /trunk/source/texk/web2c/luatexdir/tex/texmath.w (from /trunk/source/texk/web2c/luatexdir/tex/texmath.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/texnodes.c
   A /trunk/source/texk/web2c/luatexdir/tex/texnodes.w (from /trunk/source/texk/web2c/luatexdir/tex/texnodes.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/textcodes.c
   A /trunk/source/texk/web2c/luatexdir/tex/textcodes.w (from /trunk/source/texk/web2c/luatexdir/tex/textcodes.c:3539)
   D /trunk/source/texk/web2c/luatexdir/tex/textoken.c
   A /trunk/source/texk/web2c/luatexdir/tex/textoken.w (from /trunk/source/texk/web2c/luatexdir/tex/textoken.c:3539)

initial conversion of the tex/*.c files into tex/*.w

------------------------------------------------------------------------

From root at mail.boekplan.nl  Wed Mar 24 22:25:35 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed, 24 Mar 2010 22:25:35 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100324212535.1363F40059@mail.boekplan.nl>

------------------------------------------------------------------------
r3543 | taco | 2010-03-24 18:08:33 +0100 (Wed, 24 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/postlinebreak.w

postlinebreak should not use the global left and right skip, but the
ones given as arguments (fixes bug #356)

------------------------------------------------------------------------

From trebestie at gmail.com  Wed Mar 24 22:59:39 2010
From: trebestie at gmail.com (Diego Depaoli)
Date: Wed, 24 Mar 2010 22:59:39 +0100
Subject: [Dev-luatex] [luatex] Luatex 0.52.0 announcement
In-Reply-To: <4BA75360.5070503@elvenkind.com>
References: <4B9FE3B4.106@elvenkind.com>
	<83e5fb981003200059m5c323657jd50c54f8024eccc3@mail.gmail.com>
	<4BA526B0.6010201@elvenkind.com>
	<83e5fb981003201331n7037c78ds3d3dbea25f2e88c2@mail.gmail.com>
	<alpine.LNX.2.00.1003221148040.11240@pcl321.mppmu.mpg.de>
	<4BA75360.5070503@elvenkind.com>
Message-ID: <83e5fb981003241459x4e4b6a25k2b517695d7557ce7@mail.gmail.com>

2010/3/22, Taco Hoekwater <taco at elvenkind.com>:
>
>
> Peter Breitenlohner wrote:
>> On Sat, 20 Mar 2010, Diego Depaoli wrote:
>>
>>> Yes, error comes from this code
>>> if test -z "`${MAKE-make} -v 2>/dev/null | grep GNU`"; then
>>>  if test "x$enable_native_texlive_build" = xno; then
>>>    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Building TeX
>>> Live may require GNU make" >&5
>>> $as_echo "$as_me: WARNING: Building TeX Live may require GNU make" >&2;}
>>>  else
>>>    as_fn_error "Building TeX Live requires GNU make" "$LINENO" 5
>>>  fi
>>> fi
>>> in  luatex source/configure (http://goo.gl/Ddu8).
>>
>> Hi Diego, Taco,
>>
>> some parts of the TeX Live tree (libs/freetype2/ and libs/icu/ if I
>> remember
>> correctly) require GNU make.  Thus the TL top-level configure checks for
>> this and produces a warning (--disable-native-texlive-build) or an error
>> (--enable-native-texlive-build, the default).  We think this is much
>> better
>> than failing at a later stage of the build process.
>>
>> If you have GNU make installed somewhere you should say
>>     configure MAKE=/PATH/TO/GUN-MAKE ...
>> or whith the TL ./Build script
>>     TL_MAKE=/PATH/TO/GUN-MAKE ./Build ...
>> I suppose, the luatex ./build script is a variation of ./Build, so this
>> should also work with ./build.
>
> Diego, can you try whether it works if build.sh sets TL_MAKE
> as well as MAKE?
Setting TL_MAKE did not solve, but
setenv MAKE /PATH/TO/MY/GMAKE
worked.

Many thanks


-- 
Diego Depaoli

From taco at elvenkind.com  Thu Mar 25 07:32:05 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 25 Mar 2010 07:32:05 +0100
Subject: [Dev-luatex] [luatex] Luatex 0.52.0 announcement
In-Reply-To: <83e5fb981003241459x4e4b6a25k2b517695d7557ce7@mail.gmail.com>
References: <4B9FE3B4.106@elvenkind.com>	
	<83e5fb981003200059m5c323657jd50c54f8024eccc3@mail.gmail.com>	
	<4BA526B0.6010201@elvenkind.com>	
	<83e5fb981003201331n7037c78ds3d3dbea25f2e88c2@mail.gmail.com>	
	<alpine.LNX.2.00.1003221148040.11240@pcl321.mppmu.mpg.de>	
	<4BA75360.5070503@elvenkind.com>
	<83e5fb981003241459x4e4b6a25k2b517695d7557ce7@mail.gmail.com>
Message-ID: <4BAB0365.3070408@elvenkind.com>

Diego Depaoli wrote:
>>> I suppose, the luatex ./build script is a variation of ./Build, so this
>>> should also work with ./build.
>> Diego, can you try whether it works if build.sh sets TL_MAKE
>> as well as MAKE?
> Setting TL_MAKE did not solve, but
> setenv MAKE /PATH/TO/MY/GMAKE
> worked.

I've patched build.sh to

   TL_MAKE=$MAKE ../source/configure  $CONFHOST \

from just

   ../source/configure  $CONFHOST \

that should work, but I hope it is portable enough.

Best wishes,
Taco

From root at mail.boekplan.nl  Thu Mar 25 12:26:20 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Thu, 25 Mar 2010 12:26:20 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100325112620.E7C9540059@mail.boekplan.nl>

------------------------------------------------------------------------
r3544 | taco | 2010-03-25 07:24:42 +0100 (Thu, 25 Mar 2010) | 2 lines
Changed paths:
   M /trunk/build.sh

use the found $MAKE for configure as well

------------------------------------------------------------------------
r3545 | taco | 2010-03-25 07:46:15 +0100 (Thu, 25 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/Makefile.in
   M /trunk/source/texk/web2c/luatexdir/am/libluatex.am
   D /trunk/source/texk/web2c/luatexdir/ocp/ocp.c
   A /trunk/source/texk/web2c/luatexdir/ocp/ocp.w (from /trunk/source/texk/web2c/luatexdir/ocp/ocp.c:3539)
   D /trunk/source/texk/web2c/luatexdir/ocp/ocplist.c
   A /trunk/source/texk/web2c/luatexdir/ocp/ocplist.w (from /trunk/source/texk/web2c/luatexdir/ocp/ocplist.c:3539)
   D /trunk/source/texk/web2c/luatexdir/ocp/readocp.c
   A /trunk/source/texk/web2c/luatexdir/ocp/readocp.w (from /trunk/source/texk/web2c/luatexdir/ocp/readocp.c:3539)
   D /trunk/source/texk/web2c/luatexdir/ocp/runocp.c
   A /trunk/source/texk/web2c/luatexdir/ocp/runocp.w (from /trunk/source/texk/web2c/luatexdir/ocp/runocp.c:3539)

convert the C files in luatexdir/ocp to CWEB

------------------------------------------------------------------------
r3546 | taco | 2010-03-25 08:13:07 +0100 (Thu, 25 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/Makefile.in
   M /trunk/source/texk/web2c/luatexdir/am/libluatex.am
   D /trunk/source/texk/web2c/luatexdir/lang/hnjalloc.c
   A /trunk/source/texk/web2c/luatexdir/lang/hnjalloc.w (from /trunk/source/texk/web2c/luatexdir/lang/hnjalloc.c:3539)
   D /trunk/source/texk/web2c/luatexdir/lang/hyphen.c
   A /trunk/source/texk/web2c/luatexdir/lang/hyphen.w (from /trunk/source/texk/web2c/luatexdir/lang/hyphen.c:3539)
   D /trunk/source/texk/web2c/luatexdir/lang/texlang.c
   A /trunk/source/texk/web2c/luatexdir/lang/texlang.w (from /trunk/source/texk/web2c/luatexdir/lang/texlang.c:3539)

convert the C files in lang/ to CWEB

------------------------------------------------------------------------
r3547 | taco | 2010-03-25 08:58:15 +0100 (Thu, 25 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/Makefile.in
   M /trunk/source/texk/web2c/luatexdir/am/libluatex.am
   D /trunk/source/texk/web2c/luatexdir/font/dofont.c
   A /trunk/source/texk/web2c/luatexdir/font/dofont.w (from /trunk/source/texk/web2c/luatexdir/font/dofont.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/luafont.c
   A /trunk/source/texk/web2c/luatexdir/font/luafont.w (from /trunk/source/texk/web2c/luatexdir/font/luafont.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/macnames.c
   D /trunk/source/texk/web2c/luatexdir/font/mapfile.c
   A /trunk/source/texk/web2c/luatexdir/font/mapfile.w (from /trunk/source/texk/web2c/luatexdir/font/mapfile.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/pkin.c
   A /trunk/source/texk/web2c/luatexdir/font/pkin.w (from /trunk/source/texk/web2c/luatexdir/font/pkin.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/sfnt.c
   A /trunk/source/texk/web2c/luatexdir/font/sfnt.w (from /trunk/source/texk/web2c/luatexdir/font/sfnt.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/subfont.c
   A /trunk/source/texk/web2c/luatexdir/font/subfont.w (from /trunk/source/texk/web2c/luatexdir/font/subfont.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/texfont.c
   A /trunk/source/texk/web2c/luatexdir/font/texfont.w (from /trunk/source/texk/web2c/luatexdir/font/texfont.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/tfmofm.c
   A /trunk/source/texk/web2c/luatexdir/font/tfmofm.w (from /trunk/source/texk/web2c/luatexdir/font/tfmofm.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/tounicode.c
   A /trunk/source/texk/web2c/luatexdir/font/tounicode.w (from /trunk/source/texk/web2c/luatexdir/font/tounicode.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/tt_glyf.c
   A /trunk/source/texk/web2c/luatexdir/font/tt_glyf.w (from /trunk/source/texk/web2c/luatexdir/font/tt_glyf.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/tt_table.c
   A /trunk/source/texk/web2c/luatexdir/font/tt_table.w (from /trunk/source/texk/web2c/luatexdir/font/tt_table.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/vfovf.c
   A /trunk/source/texk/web2c/luatexdir/font/vfovf.w (from /trunk/source/texk/web2c/luatexdir/font/vfovf.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/vfpacket.c
   A /trunk/source/texk/web2c/luatexdir/font/vfpacket.w (from /trunk/source/texk/web2c/luatexdir/font/vfpacket.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/writecff.c
   A /trunk/source/texk/web2c/luatexdir/font/writecff.w (from /trunk/source/texk/web2c/luatexdir/font/writecff.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/writeenc.c
   A /trunk/source/texk/web2c/luatexdir/font/writeenc.w (from /trunk/source/texk/web2c/luatexdir/font/writeenc.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/writefont.c
   A /trunk/source/texk/web2c/luatexdir/font/writefont.w (from /trunk/source/texk/web2c/luatexdir/font/writefont.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/writet1.c
   A /trunk/source/texk/web2c/luatexdir/font/writet1.w (from /trunk/source/texk/web2c/luatexdir/font/writet1.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/writet3.c
   A /trunk/source/texk/web2c/luatexdir/font/writet3.w (from /trunk/source/texk/web2c/luatexdir/font/writet3.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/writettf.c
   A /trunk/source/texk/web2c/luatexdir/font/writettf.w (from /trunk/source/texk/web2c/luatexdir/font/writettf.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/writetype0.c
   A /trunk/source/texk/web2c/luatexdir/font/writetype0.w (from /trunk/source/texk/web2c/luatexdir/font/writetype0.c:3539)
   D /trunk/source/texk/web2c/luatexdir/font/writetype2.c
   A /trunk/source/texk/web2c/luatexdir/font/writetype2.w (from /trunk/source/texk/web2c/luatexdir/font/writetype2.c:3539)

convert the C files in font/ to CWEB, and inline the macnames.c
(was previously #included)

------------------------------------------------------------------------
r3548 | taco | 2010-03-25 10:26:15 +0100 (Thu, 25 Mar 2010) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

document the new stuff for 0.53

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Mar 26 12:26:08 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 26 Mar 2010 12:26:08 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100326112608.497FB40059@mail.boekplan.nl>

------------------------------------------------------------------------
r3549 | taco | 2010-03-26 08:16:05 +0100 (Fri, 26 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lkpselib.c
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /trunk/source/texk/web2c/mplibdir/lmplib.c

suppress a few compiler warnings

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Mar 26 16:25:20 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 26 Mar 2010 16:25:20 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100326152520.525A040059@mail.boekplan.nl>

------------------------------------------------------------------------
r3550 | taco | 2010-03-26 15:37:09 +0100 (Fri, 26 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /trunk/source/texk/web2c/luatexdir/lua/ltexiolib.c
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c

switch to using luaL_error for better error context in the message

------------------------------------------------------------------------
r3551 | taco | 2010-03-26 15:43:50 +0100 (Fri, 26 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lfontlib.c
   M /trunk/source/texk/web2c/luatexdir/lua/lkpselib.c
   M /trunk/source/texk/web2c/luatexdir/lua/llanglib.c
   M /trunk/source/texk/web2c/luatexdir/lua/llualib.c
   M /trunk/source/texk/web2c/luatexdir/lua/lpdflib.c

luaL_error the rest of the lua libraries as well

------------------------------------------------------------------------

From root at mail.boekplan.nl  Fri Mar 26 22:25:20 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Fri, 26 Mar 2010 22:25:20 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100326212520.C8D7440059@mail.boekplan.nl>

------------------------------------------------------------------------
r3552 | taco | 2010-03-26 16:30:08 +0100 (Fri, 26 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.h
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.w

add an expansion factor field to glyph and kern nodes,
in preparation of pseudo-hz cleanup

------------------------------------------------------------------------
r3553 | taco | 2010-03-26 16:35:15 +0100 (Fri, 26 Mar 2010) | 4 lines
Changed paths:
   M /trunk/source/texk/kpathsea/lib.h
   M /trunk/source/texk/kpathsea/xcalloc.c
   M /trunk/source/texk/kpathsea/xmalloc.c
   M /trunk/source/texk/kpathsea/xrealloc.c

switch the malloc functions in kpathsea to (size_t) arguments to
get rid of compiler warnings about casts from size_t to unsigned
(texlive's kpathsea will have this same change soon)

------------------------------------------------------------------------

From root at mail.boekplan.nl  Sat Mar 27 12:26:15 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat, 27 Mar 2010 12:26:15 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100327112615.8208C40059@mail.boekplan.nl>

------------------------------------------------------------------------
r3554 | taco | 2010-03-27 08:29:29 +0100 (Sat, 27 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luastuff.c

override dofile(<nil>) and loadfile(<nil>) in batch mode

------------------------------------------------------------------------
r3555 | taco | 2010-03-27 08:40:30 +0100 (Sat, 27 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luastuff.c
   M /trunk/source/texk/web2c/luatexdir/lua/luatex-api.h

add a prompt in non-batchmode non-luaonly runs using dofile(<nil>) or loadfile(<nil>)

------------------------------------------------------------------------
r3556 | taco | 2010-03-27 08:50:41 +0100 (Sat, 27 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/mplibdir/lmplib.c

make mp:execute() return nil if the number of arguments is not exactly 1

------------------------------------------------------------------------

From root at mail.boekplan.nl  Sat Mar 27 22:25:22 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Sat, 27 Mar 2010 22:25:22 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100327212522.7194540059@mail.boekplan.nl>

------------------------------------------------------------------------
r3557 | taco | 2010-03-27 16:48:35 +0100 (Sat, 27 Mar 2010) | 3 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.w

revert #3417 (the buildpage experiment) as it causes bad things to
happen when items are waiting during page breaks

------------------------------------------------------------------------

From root at mail.boekplan.nl  Mon Mar 29 12:26:14 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon, 29 Mar 2010 12:26:14 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100329102614.3ED7B40059@mail.boekplan.nl>

------------------------------------------------------------------------
r3558 | taco | 2010-03-29 09:21:45 +0200 (Mon, 29 Mar 2010) | 9 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luainit.c
   M /trunk/source/texk/web2c/luatexdir/lua/luatex-api.h
   M /trunk/source/texk/web2c/luatexdir/lua51/loadlib.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.w

Three changes to the lua package.loaders array, based on an email
message and patches from Manuel Pegourie-Gonnard:

1. Cosmetic change: cleaner error messages in case the file isn't found 
   (or C loading is disabled).
2. Make require"foo.bar" look for "foo/bar" to be consistent with Lua
   conventions
3. Disable loaders[4] in -safer mode

------------------------------------------------------------------------
r3559 | taco | 2010-03-29 11:22:40 +0200 (Mon, 29 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luainit.c

win32 doesnt have strndup()

------------------------------------------------------------------------
r3560 | taco | 2010-03-29 11:27:08 +0200 (Mon, 29 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.w

assignments to the next pointers of reserved nodes should be allowed

------------------------------------------------------------------------

From root at mail.boekplan.nl  Mon Mar 29 16:25:28 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Mon, 29 Mar 2010 16:25:28 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100329142528.9FA1E4005A@mail.boekplan.nl>

------------------------------------------------------------------------
r3561 | taco | 2010-03-29 15:20:14 +0200 (Mon, 29 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/mplibdir/mp.w
   M /trunk/source/texk/web2c/mplibdir/mpxout.w

import metapost 1.210

------------------------------------------------------------------------

From root at mail.boekplan.nl  Tue Mar 30 16:25:26 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Tue, 30 Mar 2010 16:25:26 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100330142526.E72ED40059@mail.boekplan.nl>

------------------------------------------------------------------------
r3562 | taco | 2010-03-30 14:04:52 +0200 (Tue, 30 Mar 2010) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/parsettfatt.c

Add an extra sanity check for GDEF loading based on a crash caused by
Linux' AkaashNormal.ttf (bengali font, v0.5)

------------------------------------------------------------------------

From root at mail.boekplan.nl  Wed Mar 31 12:26:08 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed, 31 Mar 2010 12:26:08 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100331102608.5EE0340059@mail.boekplan.nl>

------------------------------------------------------------------------
r3563 | taco | 2010-03-30 22:31:55 +0200 (Tue, 30 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/mplibdir/psout.w

fix seac handling in mplib's 'glyph infont' operator

------------------------------------------------------------------------

From root at mail.boekplan.nl  Wed Mar 31 16:25:20 2010
From: root at mail.boekplan.nl (Cron Daemon)
Date: Wed, 31 Mar 2010 16:25:20 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@boekplan>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20100331142520.BB12540059@mail.boekplan.nl>

------------------------------------------------------------------------
r3564 | taco | 2010-03-31 15:08:19 +0200 (Wed, 31 Mar 2010) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/dofont.w
   M /trunk/source/texk/web2c/luatexdir/font/luafont.w
   M /trunk/source/texk/web2c/luatexdir/font/pkin.w

update these files so that cweave doesn't complain

------------------------------------------------------------------------

From bogus@does.not.exist.com  Mon Mar 22 21:06:45 2010
From: bogus@does.not.exist.com ()
Date: Mon, 22 Mar 2010 20:06:45 -0000
Subject: No subject
Message-ID: <mailman.2.1271349991.4273.dev-luatex@ntg.nl>

>> The second question is what is this path used used for? =A0It is exposed
>> on the Lua side through os.selfdir, but this is not documented, so I
>> wonder if one can rely on it or if it is some internal thing.
>
> os.selfdir should have been documented already, it has slipped
> through the cracks somehow. I'll fix the manual.

Thanks,

Tomek

