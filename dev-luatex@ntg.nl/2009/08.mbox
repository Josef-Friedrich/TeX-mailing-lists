From root at www.metatex.org  Mon Aug  3 12:29:24 2009
From: root at www.metatex.org (Cron Daemon)
Date: Mon,  3 Aug 2009 12:29:24 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090803102924.71585788007@www.metatex.org>

------------------------------------------------------------------------
r2943 | hhenkel | 2009-08-02 22:56:15 +0200 (Sun, 02 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/directions.h

a more general glyhp_dir to be used for packaging and output

------------------------------------------------------------------------
r2944 | oneiros | 2009-08-03 00:14:29 +0200 (Mon, 03 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lang/texlang.c
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /trunk/source/texk/web2c/luatexdir/tex/equivalents.c
   M /trunk/source/texk/web2c/luatexdir/tex/equivalents.h
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.c
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.c
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.c
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.h
   M /trunk/source/texk/web2c/luatexdir/tex/postlinebreak.c
   M /trunk/source/texk/web2c/luatexdir/tex/postlinebreak.h
   M /trunk/source/texk/web2c/luatexdir/tex/texmath.c

indent

------------------------------------------------------------------------

From root at www.metatex.org  Sat Aug  1 16:27:54 2009
From: root at www.metatex.org (Cron Daemon)
Date: Sat,  1 Aug 2009 16:27:54 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090801142754.F2727788001@www.metatex.org>

------------------------------------------------------------------------
r2941 | taco | 2009-08-01 14:17:33 +0200 (Sat, 01 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/texmath.c

rm unused variable

------------------------------------------------------------------------
r2942 | taco | 2009-08-01 14:47:25 +0200 (Sat, 01 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/buildpage.c
   M /trunk/source/texk/web2c/luatexdir/tex/directions.c
   M /trunk/source/texk/web2c/luatexdir/tex/directions.h
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.c
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.h
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.c
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.h
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.c
   M /trunk/source/texk/web2c/luatexdir/tex/postlinebreak.c
   M /trunk/source/texk/web2c/luatexdir/tex/postlinebreak.h
   M /trunk/source/texk/web2c/luatexdir/tex/texmath.c

get rid of some unnecessary globals in linebreak.c and directions.c

------------------------------------------------------------------------

From root at www.metatex.org  Tue Aug  4 12:29:27 2009
From: root at www.metatex.org (Cron Daemon)
Date: Tue,  4 Aug 2009 12:29:27 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090804102927.9F2451E8C2A0@www.metatex.org>

------------------------------------------------------------------------
r2945 | hhenkel | 2009-08-03 22:48:30 +0200 (Mon, 03 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/directions.c
   M /trunk/source/texk/web2c/luatexdir/tex/directions.h
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.c
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.h

new function pack_width()

------------------------------------------------------------------------
r2946 | hhenkel | 2009-08-04 01:13:43 +0200 (Tue, 04 Aug 2009) | 3 lines
Changed paths:
   M /trunk/manual/graphics/fontdir.fig
   M /trunk/manual/graphics/fontdir.pdf
   M /trunk/source/texk/web2c/luatexdir/tex/directions.c
   M /trunk/source/texk/web2c/luatexdir/tex/directions.h

new function pack_height_depth() for multidirectional packaging
(not used yet) + fontdir.fig update

------------------------------------------------------------------------

From H.vanderMeer at uva.nl  Tue Aug  4 14:53:20 2009
From: H.vanderMeer at uva.nl (Hans van der Meer)
Date: Tue, 4 Aug 2009 14:53:20 +0200
Subject: [Dev-luatex] minimals not working here
Message-ID: <531A58F0-56B1-4CEA-B4D8-8336C5364D54@uva.nl>

I downloaded and installed the minimals. Running LuaTeX MKIV then  
hangs in TeXShop and must be aborted. Does someone knows what is amiss  
here?

I use the following runscript in TeXShop:
#!/bin/bash
export MINIMAL="$HOME/TeX/context/beta"
$MINIMAL/tex/setuptex
export PATH=$MINIMAL/tex/texmf-osx-ppc/bin:$PATH
export TEXMFCACHE="$MINIMAL/tex/texmf-cache"
context "$1"

Minimals:

Setting "/Users/hans/TeX/context/beta/tex" as TEXROOT.
This is LuaTeX, Version beta-0.42.0-2009071723
  \write18 enabled.
(reign.tex
ConTeXt  ver: 2009.07.23 20:11 MKIV  fmt: 2009.8.3  int: english/english
system          : cont-new loaded
(/Users/hans/TeX/context/beta/tex/texmf-context/tex/context/base/cont- 
new.tex
systems         : beware: some patches loaded from cont-new.tex
(/Users/hans/TeX/context/beta/tex/texmf-context/tex/context/base/cont- 
new.mkiv))
system          : cont-fil loaded
(/Users/hans/TeX/context/beta/tex/texmf-context/tex/context/base/cont- 
fil.tex
loading         : ConTeXt File Synonyms
)
system          : cont-sys loaded
(/Users/hans/TeX/context/beta/tex/texmf-local/tex/context/user/cont- 
sys.tex)
system          : reign.top loaded
(reign.top)
fonts           : preloading latin modern fonts
(/Users/hans/TeX/context/beta/tex/texmf-context/tex/context/base/type- 
tmf.tex (/Users/hans/TeX/context/beta/tex/texmf-context/tex/context/ 
base/type-tmf.mkiv)) (/Users/hans/TeX/context/beta/tex/texmf-context/ 
tex/context/base/type-siz.tex (/Users/hans/TeX/context/beta/tex/texmf- 
context/tex/context/base/type-siz.mkiv)) (/Users/hans/TeX/context/beta/ 
tex/texmf-context/tex/context/base/type-otf.tex (/Users/hans/TeX/ 
context/beta/tex/texmf-context/tex/context/base/type-otf.mkiv)) (/ 
Users/hans/TeX/context/beta/tex/texmf-local/tex/context/user/type- 
luc.tex) (/Users/hans/TeX/context/beta/tex/texmf-local/tex/context/ 
user/type-mti.tex) (/Users/hans/TeX/context/beta/tex/texmf-local/tex/ 
context/user/type-psc.tex
Process aborted

Old version that runs to completion:

(reign.tex
ConTeXt  ver: 2008.10.31 13:58 MKIV  fmt: 2008.12.17  int: english/ 
english
language       : language en is active
system         : cont-new loaded
(/usr/local/texlive/texmf-local/tex/context/base/cont-new.tex
systems         : beware: some patches loaded from cont-new.tex
(/usr/local/texlive/texmf-local/tex/context/base/cont-new.mkiv) (/usr/ 
local/texlive/texmf-local/tex/context/base/cont-mtx.tex))
system         : cont-fil loaded
(/usr/local/texlive/texmf-local/tex/context/base/cont-fil.tex
loading        : Context File Synonyms
)
system         : cont-sys loaded
(/Users/hans/Library/texmf/tex/context/user/cont-sys.tex)
bodyfont       : 12pt rm is loaded
specials       : pdftex loaded
system         : reign.top loaded
(reign.top) (/usr/local/texlive/texmf-local/tex/context/base/type- 
tmf.tex) (/usr/local/texlive/texmf-local/tex/context/base/type- 
siz.tex) (/usr/local/texlive/texmf-local/tex/context/base/type- 
otf.tex) (/Users/hans/Library/texmf/tex/context/user/type-luc.tex)
bodyfont       : style fx (fax) defined
bodyfont       : style ssit (sansitalic) defined
bodyfont       : style tts (monosans) defined
(/Users/hans/Library/texmf/tex/context/user/type-mti.tex) (/Users/hans/ 
Library/texmf/tex/context/user/type-psc.tex) (/Users/hans/Library/ 
texmf/tex/context/user/math-luc.tex
etcetera....

Hans van der Meer




Hans van der Meer




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ntg.nl/mailman/private/dev-luatex/attachments/20090804/ec648893/attachment-0001.html>

From arthur.reutenauer at normalesup.org  Tue Aug  4 16:55:07 2009
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Tue, 4 Aug 2009 16:55:07 +0200
Subject: [Dev-luatex] minimals not working here
In-Reply-To: <531A58F0-56B1-4CEA-B4D8-8336C5364D54@uva.nl>
References: <531A58F0-56B1-4CEA-B4D8-8336C5364D54@uva.nl>
Message-ID: <20090804145507.GC24091@phare.normalesup.org>

  [Note that this is the LuaTeX development list, your question would be better asked on the ConTeXt list, as it is not directly related to LuaTeX]

> $MINIMAL/tex/setuptex

  Can you try replacing that line with "source $MINIMAL/tex/setuptex" and see
what happens?

	Arthur

From root at www.metatex.org  Tue Aug  4 22:27:48 2009
From: root at www.metatex.org (Cron Daemon)
Date: Tue,  4 Aug 2009 22:27:48 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090804202748.34589788002@www.metatex.org>

------------------------------------------------------------------------
r2947 | hhenkel | 2009-08-04 21:40:30 +0200 (Tue, 04 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.c
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.c

use pack_height_depth()

------------------------------------------------------------------------
r2948 | hhenkel | 2009-08-04 21:58:33 +0200 (Tue, 04 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.c

vpackage() cosmetics

------------------------------------------------------------------------
r2949 | hhenkel | 2009-08-04 22:10:51 +0200 (Tue, 04 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.c

typo in natural_sizes()

------------------------------------------------------------------------

From root at www.metatex.org  Wed Aug  5 12:29:40 2009
From: root at www.metatex.org (Cron Daemon)
Date: Wed,  5 Aug 2009 12:29:40 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090805102940.9B092788002@www.metatex.org>

------------------------------------------------------------------------
r2950 | hhenkel | 2009-08-04 22:44:12 +0200 (Tue, 04 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.c

width calculation in vpackage() by pack_width()

------------------------------------------------------------------------
r2951 | hhenkel | 2009-08-04 22:59:02 +0200 (Tue, 04 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c

make function calculate_width_to_enddir() working multidir

------------------------------------------------------------------------
r2952 | hhenkel | 2009-08-04 23:40:37 +0200 (Tue, 04 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.c

now vpackage() also uses pack_height_depth()

------------------------------------------------------------------------

From martin at oneiros.de  Wed Aug  5 17:27:18 2009
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 5 Aug 2009 17:27:18 +0200
Subject: [Dev-luatex] Max length of tokens?
Message-ID: <68c491a60908050827u6473d2b1rfe079316e5870097@mail.gmail.com>

Hi,
what's the maximum length of things like \pdfcatalog in luatex (and
pdftex)? I.e. how long can a token register get?

We have a pdf where there are a multitude of entries made
with \pdfcatalog and pdftex seems to chop the /Catalog at some point.
The resulting pdf is quite broken. :-(

Best
   Martin

From root at www.metatex.org  Wed Aug  5 22:27:50 2009
From: root at www.metatex.org (Cron Daemon)
Date: Wed,  5 Aug 2009 22:27:50 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090805202751.03A1E788002@www.metatex.org>

------------------------------------------------------------------------
r2953 | hhenkel | 2009-08-05 20:44:50 +0200 (Wed, 05 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/limglib.c
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfannot.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfdest.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflink.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftables.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfthread.c
   M /trunk/source/texk/web2c/luatexdir/tex/buildpage.c
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.c
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.h

pdf_width --> width, pdf_height --> height, pdf_depth --> depth

------------------------------------------------------------------------
r2954 | hhenkel | 2009-08-05 21:06:00 +0200 (Wed, 05 Aug 2009) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/directions.c
   M /trunk/source/texk/web2c/luatexdir/tex/directions.h
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.c

combine pack_width() and pack_height_depth() into
pack_width_height_depth()

------------------------------------------------------------------------
r2955 | hhenkel | 2009-08-05 21:12:13 +0200 (Wed, 05 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.c

forgot shift_amount in packaging

------------------------------------------------------------------------

From taco at elvenkind.com  Thu Aug  6 09:59:42 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 06 Aug 2009 09:59:42 +0200
Subject: [Dev-luatex] Max length of tokens?
In-Reply-To: <68c491a60908050827u6473d2b1rfe079316e5870097@mail.gmail.com>
References: <68c491a60908050827u6473d2b1rfe079316e5870097@mail.gmail.com>
Message-ID: <4A7A8D6E.9070904@elvenkind.com>

Hi,

Martin Schr?der wrote:
> Hi,
> what's the maximum length of things like \pdfcatalog in luatex (and
> pdftex)? I.e. how long can a token register get?

For luatex, it was like this: pdf_print_toks_ln(), the function that
actually prints token lists to the PDF output, was using pdf_printf().

pdf_printf() was using vsnprintf with a buffer sized PRINTF_BUF_SIZE,
and that is where the cut-off came from.

I have now changed pdf_print_toks_ln() to use pdf_puts() instead,
and have altered pdf_puts() itself to accept arbitrary length strings
(it used to be limited by the active PDF buffer size). The commit
is #2959 if you want to have a closer look.

Best wishes,
Taco


From root at www.metatex.org  Thu Aug  6 12:29:24 2009
From: root at www.metatex.org (Cron Daemon)
Date: Thu,  6 Aug 2009 12:29:24 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090806102924.4D4001E8C2AC@www.metatex.org>

------------------------------------------------------------------------
r2956 | hhenkel | 2009-08-05 22:31:15 +0200 (Wed, 05 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c

cosmetics

------------------------------------------------------------------------
r2957 | hhenkel | 2009-08-05 23:13:04 +0200 (Wed, 05 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c

fix hlist_out() for orthogonal cases

------------------------------------------------------------------------
r2958 | hhenkel | 2009-08-06 00:32:28 +0200 (Thu, 06 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.c

fix a bug introduced in r2945

------------------------------------------------------------------------
r2959 | taco | 2009-08-06 09:50:30 +0200 (Thu, 06 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c

fix PDF output handling of long token lists

------------------------------------------------------------------------

From root at www.metatex.org  Thu Aug  6 22:27:53 2009
From: root at www.metatex.org (Cron Daemon)
Date: Thu,  6 Aug 2009 22:27:53 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090806202753.3F72A1E8C2AC@www.metatex.org>

------------------------------------------------------------------------
r2960 | hhenkel | 2009-08-06 21:20:50 +0200 (Thu, 06 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.c

swap depth and height entries of whatsit nodes just for consistency

------------------------------------------------------------------------

From martin at oneiros.de  Thu Aug  6 22:24:39 2009
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Thu, 6 Aug 2009 22:24:39 +0200
Subject: [Dev-luatex] Max length of tokens?
In-Reply-To: <4A7A8D6E.9070904@elvenkind.com>
References: <68c491a60908050827u6473d2b1rfe079316e5870097@mail.gmail.com>
	<4A7A8D6E.9070904@elvenkind.com>
Message-ID: <68c491a60908061324p90ce89ak126df49975d5d0f3@mail.gmail.com>

2009/8/6 Taco Hoekwater <taco at elvenkind.com>:
> I have now changed pdf_print_toks_ln() to use pdf_puts() instead,
> and have altered pdf_puts() itself to accept arbitrary length strings
> (it used to be limited by the active PDF buffer size). The commit
> is #2959 if you want to have a closer look.

Thanks!

Best
   Martin

From root at www.metatex.org  Fri Aug  7 12:29:18 2009
From: root at www.metatex.org (Cron Daemon)
Date: Fri,  7 Aug 2009 12:29:18 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090807102918.7757C788001@www.metatex.org>

------------------------------------------------------------------------
r2961 | hhenkel | 2009-08-06 23:23:07 +0200 (Thu, 06 Aug 2009) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.c
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.c

both DVI and PDF shipout are now done by function pdf_ship_out(), function
dvi_shipout() is obsolete (it's just thrown together, to be cleaned up).

------------------------------------------------------------------------
r2962 | hhenkel | 2009-08-06 23:39:28 +0200 (Thu, 06 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c

missing function prototype (thanks, Martin!)

------------------------------------------------------------------------
r2963 | hhenkel | 2009-08-07 00:58:59 +0200 (Fri, 07 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c

cosmetics

------------------------------------------------------------------------

From root at www.metatex.org  Fri Aug  7 22:27:52 2009
From: root at www.metatex.org (Cron Daemon)
Date: Fri,  7 Aug 2009 22:27:52 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090807202752.A02A11E8C2B1@www.metatex.org>

------------------------------------------------------------------------
r2964 | hhenkel | 2009-08-07 20:41:07 +0200 (Fri, 07 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfglyph.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfpage.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftypes.h

rm global dvi_f, use pdf->f_cur for DVI & PDF

------------------------------------------------------------------------
r2965 | hhenkel | 2009-08-07 21:46:19 +0200 (Fri, 07 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c

clarify initial movement

------------------------------------------------------------------------

From root at www.metatex.org  Sat Aug  8 12:29:37 2009
From: root at www.metatex.org (Cron Daemon)
Date: Sat,  8 Aug 2009 12:29:37 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090808102937.5EB931E8C2B1@www.metatex.org>

------------------------------------------------------------------------
r2966 | hhenkel | 2009-08-07 22:24:42 +0200 (Fri, 07 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.h

make page_divert_val static + remove a few prepare_mag()

------------------------------------------------------------------------
r2967 | hhenkel | 2009-08-07 23:51:32 +0200 (Fri, 07 Aug 2009) | 4 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.c
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftypes.h
   M /trunk/source/texk/web2c/luatexdir/utils/synctex.c

clean up pdf_ship_out(): dvi_begin_page(), dvi_end_page(),
pdf_begin_page() -- but no pdf_end_page() yet; put variable last_resources
into structure resources (is recovered after /Form shipout)

------------------------------------------------------------------------
r2968 | hhenkel | 2009-08-08 00:05:16 +0200 (Sat, 08 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.h

clean up header file

------------------------------------------------------------------------
r2969 | hhenkel | 2009-08-08 00:22:18 +0200 (Sat, 08 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c

rm a few obsolete things

------------------------------------------------------------------------
r2970 | hhenkel | 2009-08-08 01:04:50 +0200 (Sat, 08 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c

pdf_end_page() -- but DVI is off-page :-(

------------------------------------------------------------------------
r2971 | hhenkel | 2009-08-08 08:20:15 +0200 (Sat, 08 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.c

fix bug from r2970

------------------------------------------------------------------------
r2972 | hhenkel | 2009-08-08 09:07:26 +0200 (Sat, 08 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfliteral.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftables.c
   M /trunk/source/texk/web2c/luatexdir/tex/buildpage.c
   M /trunk/source/texk/web2c/luatexdir/tex/extensions.c
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.c
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.h

shuffling ship_out code

------------------------------------------------------------------------
r2973 | hhenkel | 2009-08-08 10:30:05 +0200 (Sat, 08 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c

move save_dvi

------------------------------------------------------------------------
r2974 | hhenkel | 2009-08-08 11:16:30 +0200 (Sat, 08 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c

group whatsit backend functions by argument list

------------------------------------------------------------------------
r2975 | hhenkel | 2009-08-08 11:58:12 +0200 (Sat, 08 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c

clean up cur movements

------------------------------------------------------------------------

From root at www.metatex.org  Sat Aug  8 16:27:49 2009
From: root at www.metatex.org (Cron Daemon)
Date: Sat,  8 Aug 2009 16:27:49 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090808142749.563C7788001@www.metatex.org>

------------------------------------------------------------------------
r2976 | hhenkel | 2009-08-08 14:36:01 +0200 (Sat, 08 Aug 2009) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c

once again missing prototypes and uninitialized variables
Thanks, Martin!

------------------------------------------------------------------------
r2977 | hhenkel | 2009-08-08 14:49:35 +0200 (Sat, 08 Aug 2009) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.h
   M /trunk/source/texk/web2c/luatexdir/tex/commands.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.h

experimental "global" \gleaders; they anchor at the origin of the shipped
box, leaders pattern runs undisturbed through nested boxes.

------------------------------------------------------------------------

From root at www.metatex.org  Sun Aug  9 12:29:34 2009
From: root at www.metatex.org (Cron Daemon)
Date: Sun,  9 Aug 2009 12:29:34 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090809102934.8098A1E8C2B1@www.metatex.org>

------------------------------------------------------------------------
r2978 | hhenkel | 2009-08-09 11:03:39 +0200 (Sun, 09 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflink.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflink.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfthread.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfthread.h
   M /trunk/source/texk/web2c/luatexdir/tex/extensions.c

cleanup: put common whatsit output functions into out_what()

------------------------------------------------------------------------
r2979 | hhenkel | 2009-08-09 11:30:35 +0200 (Sun, 09 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftypes.h

gather more info on pdf_save_pos_node (not processed yet)

------------------------------------------------------------------------
r2980 | hhenkel | 2009-08-09 11:54:53 +0200 (Sun, 09 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c

start cleaning do_late_lua()

------------------------------------------------------------------------

From root at www.metatex.org  Mon Aug 10 22:27:53 2009
From: root at www.metatex.org (Cron Daemon)
Date: Mon, 10 Aug 2009 22:27:53 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090810202753.9612C788001@www.metatex.org>

------------------------------------------------------------------------
r2981 | taco | 2009-08-10 17:26:10 +0200 (Mon, 10 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/scanning.c

fix \pdfpxdimen

------------------------------------------------------------------------
r2982 | hhenkel | 2009-08-10 20:23:10 +0200 (Mon, 10 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c

let \latelua live in leaders

------------------------------------------------------------------------
r2983 | hhenkel | 2009-08-10 21:13:52 +0200 (Mon, 10 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.c

fix my assert(0) bug

------------------------------------------------------------------------

From dak at gnu.org  Tue Aug 11 12:25:26 2009
From: dak at gnu.org (David Kastrup)
Date: Tue, 11 Aug 2009 12:25:26 +0200
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
In-Reply-To: <20090810202753.9612C788001@www.metatex.org> (Cron Daemon's
	message of "Mon, 10 Aug 2009 22:27:53 +0200 (CEST)")
References: <20090810202753.9612C788001@www.metatex.org>
Message-ID: <87eirik5pl.fsf@lola.goethe.zz>

root at www.metatex.org (Cron Daemon) writes:

> ------------------------------------------------------------------------
> r2981 | taco | 2009-08-10 17:26:10 +0200 (Mon, 10 Aug 2009) | 2 lines
> Changed paths:
>    M /trunk/source/texk/web2c/luatexdir/tex/scanning.c
>
> fix \pdfpxdimen
>
> ------------------------------------------------------------------------
> r2982 | hhenkel | 2009-08-10 20:23:10 +0200 (Mon, 10 Aug 2009) | 2 lines
> Changed paths:
>    M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
>
> let \latelua live in leaders

Oh, incidentally \write (and likely other whatsits) in leaders are
suppressed in TeX in order not be able to figure out glue setting
decisions without reverting to DVI or log file.

Since LuaTeX offers about a gazillion options to arrive at that info
(and to have FP-dependent typesetting decisions elsewhere), it probably
makes not much sense to maintain this.  If ever it did.

-- 
David Kastrup

From pragma at wxs.nl  Tue Aug 11 12:53:03 2009
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 11 Aug 2009 12:53:03 +0200
Subject: [Dev-luatex] Cron
	<luatex@vz3>	/var/www/luatex.org/www/bin/luatex-svn
In-Reply-To: <87eirik5pl.fsf@lola.goethe.zz>
References: <20090810202753.9612C788001@www.metatex.org>
	<87eirik5pl.fsf@lola.goethe.zz>
Message-ID: <4A814D8F.3070208@wxs.nl>

David Kastrup wrote:
> root at www.metatex.org (Cron Daemon) writes:
> 
>> ------------------------------------------------------------------------
>> r2981 | taco | 2009-08-10 17:26:10 +0200 (Mon, 10 Aug 2009) | 2 lines
>> Changed paths:
>>    M /trunk/source/texk/web2c/luatexdir/tex/scanning.c
>>
>> fix \pdfpxdimen
>>
>> ------------------------------------------------------------------------
>> r2982 | hhenkel | 2009-08-10 20:23:10 +0200 (Mon, 10 Aug 2009) | 2 lines
>> Changed paths:
>>    M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
>>
>> let \latelua live in leaders
> 
> Oh, incidentally \write (and likely other whatsits) in leaders are
> suppressed in TeX in order not be able to figure out glue setting
> decisions without reverting to DVI or log file.
> 
> Since LuaTeX offers about a gazillion options to arrive at that info
> (and to have FP-dependent typesetting decisions elsewhere), it probably
> makes not much sense to maintain this.  If ever it did.

actually, control over writes (and such) can be made more clever (was 
discussed at some point but postponed); for instance, when toc entries 
are in a box, one might want to suppress them in a \copy; okay, this can 
be dealt with using macros, but in general a bit more control does not 
hurt (low priority stuff)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From root at www.metatex.org  Wed Aug 12 12:29:22 2009
From: root at www.metatex.org (Cron Daemon)
Date: Wed, 12 Aug 2009 12:29:22 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090812102922.64554788001@www.metatex.org>

------------------------------------------------------------------------
r2984 | hhenkel | 2009-08-11 22:19:37 +0200 (Tue, 11 Aug 2009) | 2 lines
Changed paths:
   A /trunk/source/texk/web2c/luatexdir/lua/luagen.c
   A /trunk/source/texk/web2c/luatexdir/lua/luagen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c

remove unused code from do_late_lua(), add a few stubs

------------------------------------------------------------------------
r2985 | hhenkel | 2009-08-11 23:53:03 +0200 (Tue, 11 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/Makefile.in
   M /trunk/source/texk/web2c/aclocal.m4
   M /trunk/source/texk/web2c/configure
   M /trunk/source/texk/web2c/luatexdir/Makefile.in
   M /trunk/source/texk/web2c/luatexdir/am/libluatex.am
   M /trunk/source/texk/web2c/luatexdir/lua/luagen.c
   M /trunk/source/texk/web2c/luatexdir/lua/luagen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c
   M /trunk/source/texk/web2c/luatexdir/ptexlib.h
   M /trunk/source/texk/web2c/web2c/aclocal.m4
   M /trunk/source/texk/web2c/web2c/configure

files luagen.c and luagen.h + one autoreconf -v run

------------------------------------------------------------------------
r2986 | oneiros | 2009-08-11 23:59:55 +0200 (Tue, 11 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luagen.c

svn:keywords

------------------------------------------------------------------------
r2987 | hhenkel | 2009-08-12 00:39:54 +0200 (Wed, 12 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luagen.c
   M /trunk/source/texk/web2c/luatexdir/lua/luagen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c
   M /trunk/source/texk/web2c/luatexdir/tex/mainbody.c

hopefully rm compiler warnings (Thanks, Martin!)

------------------------------------------------------------------------
r2988 | taco | 2009-08-12 11:13:56 +0200 (Wed, 12 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/mplibdir/ChangeLog
   M /trunk/source/texk/web2c/mplibdir/mp.w
   M /trunk/source/texk/web2c/mplibdir/mpost.w
   M /trunk/source/texk/web2c/mplibdir/mptrap.test

new metapost files

------------------------------------------------------------------------

From root at www.metatex.org  Thu Aug 13 12:29:24 2009
From: root at www.metatex.org (Cron Daemon)
Date: Thu, 13 Aug 2009 12:29:24 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090813102924.68CBF788001@www.metatex.org>

------------------------------------------------------------------------
r2989 | taco | 2009-08-13 11:02:25 +0200 (Thu, 13 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/textoken.c

fix a crash during out_of_memory bailouts

------------------------------------------------------------------------
r2990 | taco | 2009-08-13 11:02:44 +0200 (Thu, 13 Aug 2009) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/lua/luanode.c

fix \lastnodetype

------------------------------------------------------------------------

From root at www.metatex.org  Thu Aug 13 16:28:01 2009
From: root at www.metatex.org (Cron Daemon)
Date: Thu, 13 Aug 2009 16:28:01 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090813142801.88443788001@www.metatex.org>

------------------------------------------------------------------------
r2991 | taco | 2009-08-13 15:07:36 +0200 (Thu, 13 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/src/luafflib.c

make fontloader errors non-fatal

------------------------------------------------------------------------
r2992 | oneiros | 2009-08-13 15:46:08 +0200 (Thu, 13 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/libs/libpng/ChangeLog
   M /trunk/source/libs/libpng/configure
   M /trunk/source/libs/libpng/configure.ac
   D /trunk/source/libs/libpng/libpng-1.2.38
   D /trunk/source/libs/libpng/libpng-1.2.38-PATCHES
   A /trunk/source/libs/libpng/libpng-1.2.39 (from /trunk/source/libs/libpng/libpng-1.2.38:2990)
   M /trunk/source/libs/libpng/libpng-1.2.39/ANNOUNCE
   M /trunk/source/libs/libpng/libpng-1.2.39/CHANGES
   M /trunk/source/libs/libpng/libpng-1.2.39/INSTALL
   M /trunk/source/libs/libpng/libpng-1.2.39/KNOWNBUG
   M /trunk/source/libs/libpng/libpng-1.2.39/LICENSE
   M /trunk/source/libs/libpng/libpng-1.2.39/Makefile.am
   M /trunk/source/libs/libpng/libpng-1.2.39/Makefile.in
   M /trunk/source/libs/libpng/libpng-1.2.39/README
   M /trunk/source/libs/libpng/libpng-1.2.39/Y2KINFO
   M /trunk/source/libs/libpng/libpng-1.2.39/config.h.in
   M /trunk/source/libs/libpng/libpng-1.2.39/configure
   M /trunk/source/libs/libpng/libpng-1.2.39/configure.ac
   D /trunk/source/libs/libpng/libpng-1.2.39/libpng-1.2.38.txt
   A /trunk/source/libs/libpng/libpng-1.2.39/libpng-1.2.39.txt (from /trunk/source/libs/libpng/libpng-1.2.38/libpng-1.2.38.txt:2990)
   M /trunk/source/libs/libpng/libpng-1.2.39/libpng.3
   M /trunk/source/libs/libpng/libpng-1.2.39/libpngpf.3
   M /trunk/source/libs/libpng/libpng-1.2.39/png.5
   M /trunk/source/libs/libpng/libpng-1.2.39/png.c
   M /trunk/source/libs/libpng/libpng-1.2.39/png.h
   M /trunk/source/libs/libpng/libpng-1.2.39/pngconf.h
   M /trunk/source/libs/libpng/libpng-1.2.39/pngpread.c
   M /trunk/source/libs/libpng/libpng-1.2.39/pngset.c
   M /trunk/source/libs/libpng/libpng-1.2.39/pngtest.c
   M /trunk/source/libs/libpng/libpng-1.2.39/pngwutil.c
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/CMakeLists.txt
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/libpng-config-head.in
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/libpng.pc.in
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.32sunu
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.64sunu
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.aix
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.beos
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.cygwin
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.darwin
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.dec
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.elf
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.gcmmx
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.hp64
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.hpgcc
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.hpux
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.linux
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.mingw
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.ne12bsd
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.netbsd
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.nommx
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.openbsd
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.sco
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.sggcc
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.sgi
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.so9
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.solaris
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/makefile.solaris-x86
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/pngos2.def
   M /trunk/source/libs/libpng/libpng-1.2.39/scripts/pngw32.def
   A /trunk/source/libs/libpng/libpng-1.2.39-PATCHES (from /trunk/source/libs/libpng/libpng-1.2.38-PATCHES:2990)
   M /trunk/source/libs/libpng/libpng-1.2.39-PATCHES/ChangeLog
   D /trunk/source/libs/libpng/libpng-1.2.39-PATCHES/patch-01-static

libpng 1.2.39

------------------------------------------------------------------------

From root at www.metatex.org  Thu Aug 13 22:27:46 2009
From: root at www.metatex.org (Cron Daemon)
Date: Thu, 13 Aug 2009 22:27:46 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090813202746.CFD4E788001@www.metatex.org>

------------------------------------------------------------------------
r2993 | taco | 2009-08-13 17:32:31 +0200 (Thu, 13 Aug 2009) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.c
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.h

implement and document a 4- or 5- argument version of node.dimensions

------------------------------------------------------------------------

From root at www.metatex.org  Fri Aug 14 12:29:38 2009
From: root at www.metatex.org (Cron Daemon)
Date: Fri, 14 Aug 2009 12:29:38 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090814102938.2E1CB788001@www.metatex.org>

------------------------------------------------------------------------
r2994 | taco | 2009-08-14 09:49:22 +0200 (Fri, 14 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.c

fix shrinking glue in natural_sizes

------------------------------------------------------------------------

From root at www.metatex.org  Fri Aug 14 16:27:53 2009
From: root at www.metatex.org (Cron Daemon)
Date: Fri, 14 Aug 2009 16:27:53 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090814142753.60C82788001@www.metatex.org>

------------------------------------------------------------------------
r2995 | taco | 2009-08-14 16:01:44 +0200 (Fri, 14 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/writefont.c
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/macbinary.c

support .dfont in the backend

------------------------------------------------------------------------
r2996 | taco | 2009-08-14 16:13:30 +0200 (Fri, 14 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/macbinary.c

oh. win32 doesn't have mkstemp()

------------------------------------------------------------------------

From root at www.metatex.org  Fri Aug 14 22:27:48 2009
From: root at www.metatex.org (Cron Daemon)
Date: Fri, 14 Aug 2009 22:27:48 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090814202748.02C6E788001@www.metatex.org>

------------------------------------------------------------------------
r2997 | oneiros | 2009-08-14 16:17:07 +0200 (Fri, 14 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/image/pdftoepdf.cc

mark some arguments as unused to silence the compiler

------------------------------------------------------------------------
r2998 | oneiros | 2009-08-14 16:23:28 +0200 (Fri, 14 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luagen.c

silence compiler (mark unused parameters)

------------------------------------------------------------------------

From root at www.metatex.org  Sat Aug 15 16:27:57 2009
From: root at www.metatex.org (Cron Daemon)
Date: Sat, 15 Aug 2009 16:27:57 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090815142757.7888E788001@www.metatex.org>

------------------------------------------------------------------------
r2999 | taco | 2009-08-15 12:26:34 +0200 (Sat, 15 Aug 2009) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/macbinary.c
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/parsettf.c
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/splinefont.h

Fix PS fontname discovery inside dfont fonts, and improve the 
filename for the temporary file containing the extracted ttf.

------------------------------------------------------------------------
r3000 | taco | 2009-08-15 16:11:36 +0200 (Sat, 15 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/macbinary.c

use strrchr() instead of rindex(). 

------------------------------------------------------------------------

From root at www.metatex.org  Sat Aug 15 22:27:49 2009
From: root at www.metatex.org (Cron Daemon)
Date: Sat, 15 Aug 2009 22:27:49 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090815202749.31F9E788001@www.metatex.org>

------------------------------------------------------------------------
r3001 | taco | 2009-08-15 16:46:57 +0200 (Sat, 15 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/macbinary.c

oops

------------------------------------------------------------------------

From root at www.metatex.org  Sun Aug 16 12:29:54 2009
From: root at www.metatex.org (Cron Daemon)
Date: Sun, 16 Aug 2009 12:29:54 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090816102954.4EA0E788001@www.metatex.org>

------------------------------------------------------------------------
r3002 | taco | 2009-08-16 10:07:14 +0200 (Sun, 16 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/macbinary.c

skip over slash (thanks, Akira)

------------------------------------------------------------------------

From root at www.metatex.org  Sun Aug 16 22:27:48 2009
From: root at www.metatex.org (Cron Daemon)
Date: Sun, 16 Aug 2009 22:27:48 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090816202748.DC619788001@www.metatex.org>

------------------------------------------------------------------------
r3003 | hhenkel | 2009-08-16 21:55:55 +0200 (Sun, 16 Aug 2009) | 24 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.c
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.h
   M /trunk/source/texk/web2c/luatexdir/font/vfpacket.c
   M /trunk/source/texk/web2c/luatexdir/lua/limglib.c
   M /trunk/source/texk/web2c/luatexdir/lua/lpdflib.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfimage.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfimage.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfpage.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfpage.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfrule.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfrule.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfsaverestore.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfsaverestore.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftables.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftables.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftypes.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfxform.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfxform.h
   M /trunk/source/texk/web2c/luatexdir/tex/buildpage.c
   M /trunk/source/texk/web2c/luatexdir/tex/extensions.c
   M /trunk/source/texk/web2c/luatexdir/tex/mainbody.c
   M /trunk/source/texk/web2c/luatexdir/tex/mainbody.h
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.c
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.h

(merciless) shuffling of backend code:
* hopefully sequence of function calls preparing output is cleaned up
  a bit, see comment at begin of pdfshipout.c.
* use ensure_dvi_header_written() + ensure_pdf_header_written().
* check_pdfminorversion() is now fix_pdfminorversion().
* new init_pdf_outputparameters(), split from check_pdfminorversion().
* make fixed_pdf_output local, make pdf->o_mode be in sync with pdf_output.
* remove do_ship_out(), use only ship_out().
* more general check_omode() replaces check_pdfoutput(), 
  is now only a warning.
* fix_o_mode() now only fixes the output mode.
* postpone PDF file opening until really needed.
* rename pdf_page_init() to init_pdf_pagecalculations().
* add a few "PDF pdf" to arguments also of DVI functions, as PDF is also
  a general "back-end" structure (maybe rename PDF later).
* silence the compiler warnings about unused variables (hint from Taco).
* set pdf->minor_version (seems this was missing (?)).
* now a descriptive error is given when backand can't handle node type.
* give backend functions at least parameters (PDF pdf, halfword p,...),
  to give missing_backend_function() some info about the node.
* only one missing_backend_function() for nodes and whatsit nodes.
* bug "a\pdfoutput=1 \pdfendlink \pdfoutput=0 \bye" should be fixed.
* new bugs (hopefully not too many).

------------------------------------------------------------------------

From root at www.metatex.org  Mon Aug 17 12:29:24 2009
From: root at www.metatex.org (Cron Daemon)
Date: Mon, 17 Aug 2009 12:29:24 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090817102924.6B01A788001@www.metatex.org>

------------------------------------------------------------------------
r3004 | oneiros | 2009-08-16 22:34:31 +0200 (Sun, 16 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfrule.c

fix some compiler warnings

------------------------------------------------------------------------
r3005 | oneiros | 2009-08-16 22:48:36 +0200 (Sun, 16 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.c
   M /trunk/source/texk/web2c/luatexdir/lang/texlang.c
   M /trunk/source/texk/web2c/luatexdir/lua/luanode.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfrule.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftypes.h
   M /trunk/source/texk/web2c/luatexdir/tex/textoken.c

indent

------------------------------------------------------------------------
r3006 | hhenkel | 2009-08-16 23:03:43 +0200 (Sun, 16 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/vfpacket.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.h
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.c

fix two of the buggy items spotted by Martin (thanks!)

------------------------------------------------------------------------
r3007 | hhenkel | 2009-08-16 23:18:16 +0200 (Sun, 16 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/vfpacket.c

no need to use static_pdf

------------------------------------------------------------------------
r3008 | hhenkel | 2009-08-16 23:35:34 +0200 (Sun, 16 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c

PDF header was written multiple times

------------------------------------------------------------------------
r3009 | taco | 2009-08-17 09:44:49 +0200 (Mon, 17 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c

hotfix for crashes due to uninitialized pdf.o_mode

------------------------------------------------------------------------
r3010 | taco | 2009-08-17 10:40:38 +0200 (Mon, 17 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfobj.c

fix \pdfobj file {...} and clean up pdf_write_obj()

------------------------------------------------------------------------

From root at www.metatex.org  Mon Aug 17 22:27:50 2009
From: root at www.metatex.org (Cron Daemon)
Date: Mon, 17 Aug 2009 22:27:50 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090817202750.10DAA788001@www.metatex.org>

------------------------------------------------------------------------
r3011 | taco | 2009-08-17 16:15:46 +0200 (Mon, 17 Aug 2009) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/font/luafont.c
   M /trunk/source/texk/web2c/luatexdir/font/texfont.c
   M /trunk/source/texk/web2c/luatexdir/font/texfont.h
   M /trunk/source/texk/web2c/luatexdir/font/writefont.c

attempt to fix handling of ttc/dfont subfonts

------------------------------------------------------------------------
r3012 | hhenkel | 2009-08-17 21:01:03 +0200 (Mon, 17 Aug 2009) | 7 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/limglib.c

* give check_o_mode() again an error flag (for \immediate).
* add check_o_mode() also to the limglib.
* remove fix_o_mode() from the node generating image functions,
  as actually only a fixed \pdfminorversion is needed.
* move help into fix_pdf_minorversion().
* remove pdf->minor_version_set = 0, use pdf->minor_version = -1.

------------------------------------------------------------------------
r3013 | hhenkel | 2009-08-17 21:01:31 +0200 (Mon, 17 Aug 2009) | 7 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftypes.h
   M /trunk/source/texk/web2c/luatexdir/tex/extensions.c
   M /trunk/source/texk/web2c/luatexdir/tex/extensions.h
   M /trunk/source/texk/web2c/luatexdir/tex/maincontrol.c

* give check_o_mode() again an error flag (for \immediate).
* add check_o_mode() also to the limglib.
* remove fix_o_mode() from the node generating image functions,
  as actually only a fixed \pdfminorversion is needed.
* move help into fix_pdf_minorversion().
* remove pdf->minor_version_set = 0, use pdf->minor_version = -1.

------------------------------------------------------------------------
r3014 | oneiros | 2009-08-17 21:19:34 +0200 (Mon, 17 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c

unnest comment

------------------------------------------------------------------------
r3015 | hhenkel | 2009-08-17 21:28:08 +0200 (Mon, 17 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/limglib.c

ooops, spotted by Martin!

------------------------------------------------------------------------
r3016 | hhenkel | 2009-08-17 21:42:43 +0200 (Mon, 17 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/extensions.c

another bug, spotted by Peter Rolf: /Info and trailer tokens were gone

------------------------------------------------------------------------

From root at www.metatex.org  Tue Aug 18 12:29:22 2009
From: root at www.metatex.org (Cron Daemon)
Date: Tue, 18 Aug 2009 12:29:22 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090818102923.06327788001@www.metatex.org>

------------------------------------------------------------------------
r3017 | hhenkel | 2009-08-17 22:50:15 +0200 (Mon, 17 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftables.c

running annotation heights were calculated wrongly (sign error)

------------------------------------------------------------------------
r3018 | hhenkel | 2009-08-17 23:38:49 +0200 (Mon, 17 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c

add \latelua to (nonexistent) Lua backend

------------------------------------------------------------------------
r3019 | hhenkel | 2009-08-18 08:27:09 +0200 (Tue, 18 Aug 2009) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c

now fixed_pdfoutput_set is back, it is needed;
thanks to Akira, and sorry for the trouble.

------------------------------------------------------------------------
r3020 | hhenkel | 2009-08-18 08:30:03 +0200 (Tue, 18 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c

(cosmetics)

------------------------------------------------------------------------
r3021 | hhenkel | 2009-08-18 09:45:35 +0200 (Tue, 18 Aug 2009) | 4 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lpdflib.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c

now the former fix_o_mode() function should work again.
there was a wrong assert(), and a few fix_o_mode() missing.
before Lua output into PDF the proper mode is checked.

------------------------------------------------------------------------

From root at www.metatex.org  Tue Aug 18 22:27:52 2009
From: root at www.metatex.org (Cron Daemon)
Date: Tue, 18 Aug 2009 22:27:52 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090818202752.2B3C1788001@www.metatex.org>

------------------------------------------------------------------------
r3022 | hhenkel | 2009-08-18 19:52:15 +0200 (Tue, 18 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfobj.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfobj.h

new pdf_ref_obj(), fix_o_mode() for \pdfcatalog

------------------------------------------------------------------------

From taco at elvenkind.com  Wed Aug 19 10:53:27 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 19 Aug 2009 10:53:27 +0200
Subject: [Dev-luatex] Luatex 0.43.0 announcement
Message-ID: <4A8BBD87.6050004@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.43.0.

New features:

* There is a new allowed key in the table trhat is returned
  by lua-loaded fonts: <f>.psname. This value should be set
  to the original PostScript font name of the font. Fonts inside
  dfont and ttc collections are fetched using this field
  (if it is missing, <f>.fullname will be used instead).

* It is now possible to use Apple dfont font files
  (those that contain at least one outline font).

* \latelua is now allowed inside leaders.

* There is a new callback: process_output_buffer, from Manuel
  P?gouri?-Gonnard. This callback is called just before
  \write acts, so it can be used to alter the file encoding
  of text output files.

* There is a new node.dimensions() function, which calculates
  the natural size of (part of) a list of nodes.

* The new primitive \gleaders provides 'globally aligned'
  leaders.

* The DVI and PDF backends now share much code internally.

* The embedded MPlib is now 1.207.

* libpng is now 1.2.39.

Bugfixes:

* We fixed lots of anonymous bugs introduced in 0.42.0 (as expected)

* fontloader.info() errors are no longer fatal, the function now
  just returns a nil,"error string" pair.

* Automatically inserted kerns for \accents are now once again
  valid word ends, as in \TEX.

* Fixed the placement of math displays in mixed direction
  settings.

* The \pdfcompresslevel is now dynamic again.


The archives can be downloaded from supelec as usual:

        http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

  svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.43.0

Bugs and feature requests can be added to the issue tracker at

       http://tracker.luatex.org


Have fun,
Taco


From root at www.metatex.org  Wed Aug 19 12:31:49 2009
From: root at www.metatex.org (Cron Daemon)
Date: Wed, 19 Aug 2009 12:31:49 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090819103149.41693788001@www.metatex.org>

------------------------------------------------------------------------
r3023 | taco | 2009-08-18 22:19:31 +0200 (Tue, 18 Aug 2009) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfobj.c

fix r3010, that was now treating each stream as a pdf string
(spotted by Hartmut)

------------------------------------------------------------------------
r3024 | hhenkel | 2009-08-18 23:03:56 +0200 (Tue, 18 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.c
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.h
   M /trunk/source/texk/web2c/luatexdir/lua/limglib.c
   M /trunk/source/texk/web2c/luatexdir/lua/lpdflib.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c
   M /trunk/source/texk/web2c/luatexdir/tex/extensions.c

check_o_mode() now has warn and error mode

------------------------------------------------------------------------
r3025 | hhenkel | 2009-08-19 00:42:49 +0200 (Wed, 19 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftypes.h

o_status stub

------------------------------------------------------------------------
r3026 | taco | 2009-08-19 10:32:11 +0200 (Wed, 19 Aug 2009) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/NEWS
   M /trunk/source/texk/web2c/luatexdir/luatex.c

prepare for new beta release

------------------------------------------------------------------------
r3027 | taco | 2009-08-19 10:33:26 +0200 (Wed, 19 Aug 2009) | 2 lines
Changed paths:
   A /tags/beta-0.43.0 (from /trunk:3026)

new release tag

------------------------------------------------------------------------

From root at www.metatex.org  Wed Aug 19 16:28:41 2009
From: root at www.metatex.org (Cron Daemon)
Date: Wed, 19 Aug 2009 16:28:41 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090819142841.39CE6788001@www.metatex.org>

------------------------------------------------------------------------
r3028 | taco | 2009-08-19 14:21:15 +0200 (Wed, 19 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/image/pdftoepdf.cc

revert __attribute__ ((unused)) to void statements to make g++ 3.3 happy

------------------------------------------------------------------------
r3029 | oneiros | 2009-08-19 15:19:30 +0200 (Wed, 19 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/image/pdftoepdf.cc

remove dummy declarations

------------------------------------------------------------------------

From root at www.metatex.org  Wed Aug 19 22:28:00 2009
From: root at www.metatex.org (Cron Daemon)
Date: Wed, 19 Aug 2009 22:28:00 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090819202800.D7ABE788001@www.metatex.org>

------------------------------------------------------------------------
r3030 | hhenkel | 2009-08-19 22:08:12 +0200 (Wed, 19 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.c
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftypes.h

new ensure_output_state()

------------------------------------------------------------------------

From root at www.metatex.org  Thu Aug 20 12:29:44 2009
From: root at www.metatex.org (Cron Daemon)
Date: Thu, 20 Aug 2009 12:29:44 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090820102944.B6C4B788001@www.metatex.org>

------------------------------------------------------------------------
r3031 | oneiros | 2009-08-19 22:22:54 +0200 (Wed, 19 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c

unnest comment

------------------------------------------------------------------------
r3032 | hhenkel | 2009-08-19 23:03:29 +0200 (Wed, 19 Aug 2009) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.c
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.h
   M /trunk/source/texk/web2c/luatexdir/lua/lstatslib.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c
   M /trunk/source/texk/web2c/luatexdir/tex/texfileio.c
   M /trunk/source/texk/web2c/luatexdir/tex/texfileio.h

use ensure_output_file_open() for both DVI and PDF,
also DVI file & file_name are in structure pdf_output_file.

------------------------------------------------------------------------
r3033 | hhenkel | 2009-08-19 23:42:50 +0200 (Wed, 19 Aug 2009) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c

cosmetics

------------------------------------------------------------------------
r3034 | hhenkel | 2009-08-20 00:18:24 +0200 (Thu, 20 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/mainbody.c

a bug: "No pages of output." was missing for non-opened output file

------------------------------------------------------------------------
r3035 | hhenkel | 2009-08-20 08:10:22 +0200 (Thu, 20 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
   M /trunk/source/texk/web2c/luatexdir/tex/extensions.c

ooops, \latelua should work also in DVI mode

------------------------------------------------------------------------

From root at www.metatex.org  Thu Aug 20 22:28:02 2009
From: root at www.metatex.org (Cron Daemon)
Date: Thu, 20 Aug 2009 22:28:02 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090820202802.E0B00788001@www.metatex.org>

------------------------------------------------------------------------
r3036 | taco | 2009-08-20 17:35:58 +0200 (Thu, 20 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lstatslib.c

quickfix for crash get_output_file_name()

------------------------------------------------------------------------

From root at www.metatex.org  Fri Aug 21 12:29:55 2009
From: root at www.metatex.org (Cron Daemon)
Date: Fri, 21 Aug 2009 12:29:55 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090821102955.278B4788001@www.metatex.org>

------------------------------------------------------------------------
r3037 | hhenkel | 2009-08-20 22:15:09 +0200 (Thu, 20 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c
   M /trunk/source/texk/web2c/luatexdir/tex/extensions.c
   M /trunk/source/texk/web2c/luatexdir/tex/extensions.h
   M /trunk/source/texk/web2c/luatexdir/tex/scanning.c

scaledpos pdf_last_pos variable

------------------------------------------------------------------------

From root at www.metatex.org  Fri Aug 21 22:27:59 2009
From: root at www.metatex.org (Cron Daemon)
Date: Fri, 21 Aug 2009 22:27:59 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090821202759.2EFEB788001@www.metatex.org>

------------------------------------------------------------------------
r3038 | hhenkel | 2009-08-21 20:52:46 +0200 (Fri, 21 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c

cosmetics

------------------------------------------------------------------------

From root at www.metatex.org  Sat Aug 22 12:29:56 2009
From: root at www.metatex.org (Cron Daemon)
Date: Sat, 22 Aug 2009 12:29:56 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090822102957.055E71E8C2B1@www.metatex.org>

------------------------------------------------------------------------
r3039 | hhenkel | 2009-08-22 08:12:19 +0200 (Sat, 22 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luastuff.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
   M /trunk/source/texk/web2c/luatexdir/ptexlib.h

move latelua()

------------------------------------------------------------------------
r3040 | hhenkel | 2009-08-22 08:35:04 +0200 (Sat, 22 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.c
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c

cosmetics: dvi_push()

------------------------------------------------------------------------

From root at www.metatex.org  Wed Aug 26 22:28:01 2009
From: root at www.metatex.org (Cron Daemon)
Date: Wed, 26 Aug 2009 22:28:01 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090826202801.B708B1E8C2CB@www.metatex.org>

------------------------------------------------------------------------
r3041 | hhenkel | 2009-08-26 21:42:00 +0200 (Wed, 26 Aug 2009) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.c
   M /trunk/source/texk/web2c/luatexdir/dvi/dvigen.h
   M /trunk/source/texk/web2c/luatexdir/image/writeimg.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.h
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfrule.c

* bug: all DVI rules were on vacation (huh, nobody noticed?)
* initialize img_xres and img_yres (PDF case)

------------------------------------------------------------------------
r3042 | oneiros | 2009-08-26 21:52:59 +0200 (Wed, 26 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfrule.c

properly mark a parameter as unused; the compiler warned: ISO C90 forbids mixed declarations and code

------------------------------------------------------------------------

From root at www.metatex.org  Thu Aug 27 12:30:02 2009
From: root at www.metatex.org (Cron Daemon)
Date: Thu, 27 Aug 2009 12:30:02 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20090827103002.214731E8C3AA@www.metatex.org>

------------------------------------------------------------------------
r3043 | hhenkel | 2009-08-26 22:20:33 +0200 (Wed, 26 Aug 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/image/writeimg.c

memset() had already initialized img_xres() and img_yres() properly

------------------------------------------------------------------------

