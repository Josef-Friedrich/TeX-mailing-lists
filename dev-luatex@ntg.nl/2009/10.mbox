From root at www.metatex.org  Thu Oct  1 16:22:01 2009
From: root at www.metatex.org (Cron Daemon)
Date: Thu,  1 Oct 2009 16:22:01 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091001142732.550321E8C3FA@www.metatex.org>

svn: PROPFIND request failed on '/svn/luatex'
svn: PROPFIND of '/svn/luatex': 200 OK (http://foundry.supelec.fr)

From root at www.metatex.org  Thu Oct  1 22:22:02 2009
From: root at www.metatex.org (Cron Daemon)
Date: Thu,  1 Oct 2009 22:22:02 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091001202734.DB7CD1E8C3FB@www.metatex.org>

svn: PROPFIND request failed on '/svn/luatex'
svn: PROPFIND of '/svn/luatex': 200 OK (http://foundry.supelec.fr)

From root at www.metatex.org  Fri Oct  2 22:28:26 2009
From: root at www.metatex.org (Cron Daemon)
Date: Fri,  2 Oct 2009 22:28:26 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091002202826.834791E8C3FA@www.metatex.org>

------------------------------------------------------------------------
r3052 | taco | 2009-10-02 17:03:26 +0200 (Fri, 02 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.c

fix bug #268

------------------------------------------------------------------------
r3053 | taco | 2009-10-02 17:14:08 +0200 (Fri, 02 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lnodelib.c

fix bug #261: wrong lua field offset for margin_kern nodes

------------------------------------------------------------------------

From root at www.metatex.org  Sat Oct  3 22:27:57 2009
From: root at www.metatex.org (Cron Daemon)
Date: Sat,  3 Oct 2009 22:27:57 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091003202757.C82E01E8C3FA@www.metatex.org>

------------------------------------------------------------------------
r3054 | hhenkel | 2009-10-03 21:59:08 +0200 (Sat, 03 Oct 2009) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex

fix #275 (tracker.luatex.org), thanks Pawel!

------------------------------------------------------------------------

From root at www.metatex.org  Tue Oct  6 12:29:45 2009
From: root at www.metatex.org (Cron Daemon)
Date: Tue,  6 Oct 2009 12:29:45 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091006102945.1D2431E8C3F6@www.metatex.org>

------------------------------------------------------------------------
r3055 | oneiros | 2009-10-06 01:34:56 +0200 (Tue, 06 Oct 2009) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c

bugfix: our xref-stream dicts where a bit wrong (see http://sourceforge.net/tracker/?func=detail&atid=1060897&aid=2872265&group_id=224196)
Now our pdfs pass qpdf's checks. :-)

------------------------------------------------------------------------

From taco at elvenkind.com  Wed Oct  7 09:49:00 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 07 Oct 2009 09:49:00 +0200
Subject: [Dev-luatex] [luatex] LuaTeX Bug
In-Reply-To: <605202f20910060632s2f3e9f1am878024c076007111@mail.gmail.com>
References: <605202f20910060632s2f3e9f1am878024c076007111@mail.gmail.com>
Message-ID: <4ACC47EC.7070601@elvenkind.com>

Vafa Khalighi wrote:
>     having
> 
>     $$1+2=3\eqno(1)$$
>     $$1+2=3\eqno(1)$$
>     $$1+2=3\eqno(1)$$
> 
>     \end
> 
>     as the example document and running pdftex and luatex on it, it makes clear
>     that with space between equations is too much  when compiled with luatex.
>     both PDFTeX and LuaTeX outputs are attached.
> 
> Hi Taco and others
> 
> Can you or anyone else suggest a workaround for this bug please (except 
> \vskip -\baselineskip or something to do with \everypar)?

\everydisplay{\vskip -\baselineskip} maybe.

This bug is on the short list to be fixed in the next beta, but I
have not had time to actually look at it yet.

Best wishes,
Taco

From taco at elvenkind.com  Thu Oct  8 10:18:35 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 08 Oct 2009 10:18:35 +0200
Subject: [Dev-luatex] [luatex] LuaTeX Bug
In-Reply-To: <4ACC47EC.7070601@elvenkind.com>
References: <605202f20910060632s2f3e9f1am878024c076007111@mail.gmail.com>
	<4ACC47EC.7070601@elvenkind.com>
Message-ID: <4ACDA05B.8060409@elvenkind.com>


Hi Vafa,

Taco Hoekwater wrote:
> 
> This bug is on the short list to be fixed in the next beta, but I
> have not had time to actually look at it yet.

Fixed in the repository trunk.

Best wishes,
Taco

From vafa at users.berlios.de  Thu Oct  8 11:39:36 2009
From: vafa at users.berlios.de (Vafa Khalighi)
Date: Thu, 8 Oct 2009 20:39:36 +1100
Subject: [Dev-luatex] [luatex] LuaTeX Bug
In-Reply-To: <4ACDA05B.8060409@elvenkind.com>
References: <605202f20910060632s2f3e9f1am878024c076007111@mail.gmail.com>
	<4ACC47EC.7070601@elvenkind.com> <4ACDA05B.8060409@elvenkind.com>
Message-ID: <605202f20910080239k487cffdby1a8b47bf1e41129d@mail.gmail.com>

Thanks heaps.

I just realised it could not get fixed by macro programming. Could you
please tell me why that happened? I am very curious to know why that
happened.

Thanks again.

-- 
Vafa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ntg.nl/mailman/private/dev-luatex/attachments/20091008/8d869d4b/attachment.html>

From root at www.metatex.org  Thu Oct  8 12:29:48 2009
From: root at www.metatex.org (Cron Daemon)
Date: Thu,  8 Oct 2009 12:29:48 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091008102948.D56411E8C3FA@www.metatex.org>

------------------------------------------------------------------------
r3056 | taco | 2009-10-08 10:15:51 +0200 (Thu, 08 Oct 2009) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/texmath.c

fix bug #270 (extra whitespace inbetween displays is caused by 
a superfluous local par node).

------------------------------------------------------------------------

From root at www.metatex.org  Thu Oct  8 16:27:54 2009
From: root at www.metatex.org (Cron Daemon)
Date: Thu,  8 Oct 2009 16:27:54 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091008142754.94BFF1E8C3FB@www.metatex.org>

------------------------------------------------------------------------
r3057 | taco | 2009-10-08 13:47:45 +0200 (Thu, 08 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/align.c
   M /trunk/source/texk/web2c/luatexdir/tex/packaging.c
   M /trunk/source/texk/web2c/luatexdir/tex/postlinebreak.c
   M /trunk/source/texk/web2c/luatexdir/tex/texnodes.h

Add subtypes to hlist nodes (experimental)

------------------------------------------------------------------------

From root at www.metatex.org  Wed Oct 14 12:29:57 2009
From: root at www.metatex.org (Cron Daemon)
Date: Wed, 14 Oct 2009 12:29:57 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091014102957.43EFD1E8C402@www.metatex.org>

------------------------------------------------------------------------
r3058 | taco | 2009-10-14 08:51:27 +0200 (Wed, 14 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdflistout.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfshipout.c

synctex fix from Akira

------------------------------------------------------------------------
r3059 | taco | 2009-10-14 09:01:13 +0200 (Wed, 14 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /trunk/source/texk/web2c/luatexdir/lua/luainit.c
   M /trunk/source/texk/web2c/luatexdir/tex/mainbody.c

this is a first, partial attempt at a tex.initialize() lua function.

------------------------------------------------------------------------
r3060 | taco | 2009-10-14 10:45:26 +0200 (Wed, 14 Oct 2009) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/luafontloader/src/luafflib.c

Fix the handling of mark classes in the fontloader

------------------------------------------------------------------------
r3061 | taco | 2009-10-14 10:46:36 +0200 (Wed, 14 Oct 2009) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.tex
   M /trunk/source/texk/web2c/luatexdir/luatex.c

bump the version number

------------------------------------------------------------------------

From root at www.metatex.org  Wed Oct 14 16:28:12 2009
From: root at www.metatex.org (Cron Daemon)
Date: Wed, 14 Oct 2009 16:28:12 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091014142812.63C971E8C402@www.metatex.org>

------------------------------------------------------------------------
r3062 | taco | 2009-10-14 13:53:03 +0200 (Wed, 14 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfobj.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfobj.h

implement \pdfobj [...] uncompressed [...]

------------------------------------------------------------------------
r3063 | taco | 2009-10-14 15:18:54 +0200 (Wed, 14 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftables.c

add paranoia for find_obj (fix bug #266, the hard way)

------------------------------------------------------------------------

From taco at elvenkind.com  Wed Oct 14 17:39:06 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 14 Oct 2009 17:39:06 +0200
Subject: [Dev-luatex] [luatex] LuaTeX Bug
In-Reply-To: <605202f20910080239k487cffdby1a8b47bf1e41129d@mail.gmail.com>
References: <605202f20910060632s2f3e9f1am878024c076007111@mail.gmail.com>	
	<4ACC47EC.7070601@elvenkind.com> <4ACDA05B.8060409@elvenkind.com>
	<605202f20910080239k487cffdby1a8b47bf1e41129d@mail.gmail.com>
Message-ID: <4AD5F09A.2050505@elvenkind.com>



Vafa Khalighi wrote:
> Thanks heaps.
> 
> I just realised it could not get fixed by macro programming. Could you
> please tell me why that happened? I am very curious to know why that
> happened.

There is an extra direction node (local_par_node) inserted immediately
after each display by the Aleph code (so yes, same bug was in Aleph),

That extra node confused the exception processing that was there in
TeX82 for two consecutive displays. My solution explicitly takes that
local_par_node into account.

Best wishes,
Taco

From root at www.metatex.org  Wed Oct 14 22:28:26 2009
From: root at www.metatex.org (Cron Daemon)
Date: Wed, 14 Oct 2009 22:28:26 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091014202826.74EE11E8C404@www.metatex.org>

------------------------------------------------------------------------
r3064 | taco | 2009-10-14 17:09:52 +0200 (Wed, 14 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /trunk/source/texk/web2c/luatexdir/lua/luagen.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c

fix a few compiler warnings (thanks Martin)

------------------------------------------------------------------------

From root at www.metatex.org  Thu Oct 15 12:29:44 2009
From: root at www.metatex.org (Cron Daemon)
Date: Thu, 15 Oct 2009 12:29:44 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091015102944.F0EA31E8C402@www.metatex.org>

------------------------------------------------------------------------
r3065 | taco | 2009-10-15 11:20:54 +0200 (Thu, 15 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/Makefile.in
   M /trunk/source/texk/web2c/aclocal.m4
   M /trunk/source/texk/web2c/configure
   M /trunk/source/texk/web2c/doc/Makefile.in
   M /trunk/source/texk/web2c/lib/Makefile.in
   M /trunk/source/texk/web2c/luatexdir/am/luamisc.am
   M /trunk/source/texk/web2c/luatexdir/lua/luastuff.c
   M /trunk/source/texk/web2c/luatexdir/lua/luatex-api.h
   A /trunk/source/texk/web2c/luatexdir/luamd5/md5_lua.c
   M /trunk/source/texk/web2c/man/Makefile.in
   M /trunk/source/texk/web2c/web2c/Makefile.in
   M /trunk/source/texk/web2c/web2c/aclocal.m4
   M /trunk/source/texk/web2c/web2c/configure

add md5.sumhexa() 

------------------------------------------------------------------------

From root at www.metatex.org  Thu Oct 15 16:27:55 2009
From: root at www.metatex.org (Cron Daemon)
Date: Thu, 15 Oct 2009 16:27:55 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091015142755.B804E1E8C402@www.metatex.org>

------------------------------------------------------------------------
r3066 | taco | 2009-10-15 16:09:21 +0200 (Thu, 15 Oct 2009) | 4 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/mlist.c

this is an attempt to fix super-subscript placements for large operators and delimiters:
the function var_delimiter (which is used for large operators as well as actual delimiters
now ignores italic corrections for 'new math' fonts).

------------------------------------------------------------------------

From root at www.metatex.org  Thu Oct 15 22:28:29 2009
From: root at www.metatex.org (Cron Daemon)
Date: Thu, 15 Oct 2009 22:28:29 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091015202829.B12EB1E8C404@www.metatex.org>

------------------------------------------------------------------------
r3067 | taco | 2009-10-15 21:32:03 +0200 (Thu, 15 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/printing.c

convert an assert() during print to a warning temporarily.

------------------------------------------------------------------------

From root at www.metatex.org  Fri Oct 16 16:27:59 2009
From: root at www.metatex.org (Cron Daemon)
Date: Fri, 16 Oct 2009 16:27:59 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091016142759.593591E8C2CB@www.metatex.org>

------------------------------------------------------------------------
r3068 | taco | 2009-10-16 14:07:44 +0200 (Fri, 16 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/luatoken.c

fix string->tokenlist conversion from lua for utf-8 characters

------------------------------------------------------------------------

From root at www.metatex.org  Sun Oct 18 12:29:48 2009
From: root at www.metatex.org (Cron Daemon)
Date: Sun, 18 Oct 2009 12:29:48 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091018102948.D8DAE1E8C2CB@www.metatex.org>

------------------------------------------------------------------------
r3069 | taco | 2009-10-18 12:00:09 +0200 (Sun, 18 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/writetype0.c

fix for full CFF embedding

------------------------------------------------------------------------

From root at www.metatex.org  Sun Oct 18 22:28:08 2009
From: root at www.metatex.org (Cron Daemon)
Date: Sun, 18 Oct 2009 22:28:08 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091018202808.870281E8C2B1@www.metatex.org>

------------------------------------------------------------------------
r3070 | hhenkel | 2009-10-18 19:57:33 +0200 (Sun, 18 Oct 2009) | 10 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lpdflib.c
   M /trunk/source/texk/web2c/luatexdir/lua/luastuff.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfobj.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfobj.h

experimental table-based pdf.obj({...}) with 1 table as only argument
two variants: type="raw" (e. g., for dictionaries) or "stream"
immediate=true makes pdf.obj() work like pdf.immediateobj()
data input by string="some string" or file="some filename"
type="stream": attr="attribute string into stream dict"
type="stream": compresslevel=0...9 overrides \pdfcompresslevel
type="raw": objcompression=false excludes object from object compression
the original pdf.obj() interface is still there.
pdf.immediateobj() is unchanged, no table interface.

------------------------------------------------------------------------

From root at www.metatex.org  Mon Oct 19 12:29:56 2009
From: root at www.metatex.org (Cron Daemon)
Date: Mon, 19 Oct 2009 12:29:56 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091019102956.E2FA41E8C2CB@www.metatex.org>

------------------------------------------------------------------------
r3071 | hhenkel | 2009-10-18 22:56:48 +0200 (Sun, 18 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lpdflib.c

fix compresslevel

------------------------------------------------------------------------
r3072 | oneiros | 2009-10-18 23:03:51 +0200 (Sun, 18 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lpdflib.c

fix warning: comparison between signed and unsigned

------------------------------------------------------------------------

From root at www.metatex.org  Mon Oct 19 16:28:06 2009
From: root at www.metatex.org (Cron Daemon)
Date: Mon, 19 Oct 2009 16:28:06 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091019142806.4CDE61E8C2CB@www.metatex.org>

------------------------------------------------------------------------
r3073 | taco | 2009-10-19 13:26:44 +0200 (Mon, 19 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/writefont.c

fix bug 281 (assertion failure on fontdata.embedding="no"

------------------------------------------------------------------------

From javier at digi21.eu  Tue Oct 20 11:00:35 2009
From: javier at digi21.eu (=?ISO-8859-1?Q?Javier_M=FAgica?=)
Date: Tue, 20 Oct 2009 11:00:35 +0200
Subject: [Dev-luatex] Storing more info with the hboxes.
Message-ID: <5088e64f0910200200k25b207bdse91454e0da67f30b@mail.gmail.com>

Recently the suggestion has been posted to the luatex bug/fature
tracker that the horizontal boxes remember where they come from, for
postprocessing purposes. This reminds me about one of my yet unposted
suggestions, because it also has to do with the horizontal boxes
storing more information for purposes of postprocessing.

It could be useful if once an hbox is packed it creates two profiles,
one for its upper border and one for its lower one. By the profile I
mean the boder that could be seen if the boxes and rules where black
rectangles. These will be "teeth-like" profiles, lower-teeth-like for
the upper profile, upper-teeth for the lower one. It would consist of
an array (i.e., not a linked list) recording that at distance 'x' the
height raises to 'h' (or, for the lower profile, the depth goes down
to 'd') and it lasts for 'width', for all the values of x where the
height of the contents changes. When there is a hole, like any glue,
the value for 'h' could be -\maxdimen, may be, these are just details.

While from LuaTeX we may give the standard answer "you can do that
with a callback by traversing the nodes of the box after it has been
packed", I don't think it is actually like that: The computation
involved is a lengthy one, having to dynamicaly build and modify the
table as later boxes or rules overlap with previous ones (for we all
now that the order of the intems inside a packed box need not be their
x-order), and taking care to free the tables as they are no longer
needed, a task that is better done in C. Also because it is a too low
level feature, being just something that TeX does and Lua exposes to
the programer via two tables, that will allways be associated with a
packed hlist, in addition to the table representing its contents.

It could be useful for:

-- Taking into account the position of deep descenders in one line and
high ascenders in the next one not to innecessarily overspace the two
likes. This is the same concept as the kerning between two caracters;
i.e., do not just place the boxes adjacent to one another, but take
into account the contexts of the boxes being put together to produce a
finer spacing, but changing characters for lines and horizonal for
vertical.
The way I would actualy do this is, for every teeth of the upper
profile of the lower line, to take into accound the descenders of the
upper line just within \keepfreedistance (say) distance. If I'd set
\keepfreedistance=\maxdimen I'd get TeX's current behavour.

-- Writing a smart line braking algorithm that adds penalties for "rivers".

--Easy improvement of correct math placement of atoms.
We had a year or so ago in the Spanish TeX list a discusion about this
that originated by a user who noticed that the ^2 after \sin was
higher than after \cos. The reason is the dot of the i of \sin. If the
box carried its profiles with it, the algorithm for computing the
height of the superscripts and depth of subscripts could take into
account just the profile back to 0.5 em's distance, say, instead of
the whole box as now (another primitive?)

--Possibly many others that would become apparent once the feature
were there and people started using it.

The reason for a random access array instead of a sequenced access
list is clear once we think about examples (for instance, seeking
items with values of 'x' within a certain range) and, specially, on
the way it would be programmed in C. In case this is ever impemented,
reserving memory for n elements, where n is the number of nodes in the
hlist, would waste on average little space.

From taco at elvenkind.com  Tue Oct 20 11:07:23 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 20 Oct 2009 11:07:23 +0200
Subject: [Dev-luatex] Storing more info with the hboxes.
In-Reply-To: <5088e64f0910200200k25b207bdse91454e0da67f30b@mail.gmail.com>
References: <5088e64f0910200200k25b207bdse91454e0da67f30b@mail.gmail.com>
Message-ID: <4ADD7DCB.3070808@elvenkind.com>


Hi,

Javier M?gica wrote:
> 
> While from LuaTeX we may give the standard answer "you can do that
> with a callback by traversing the nodes of the box after it has been
> packed",  but [.... ]

Having a lua implementation available is definitely the fastest track
to getting such a feature implemented in C.

Best wishes,
Taco

From javier at digi21.eu  Tue Oct 20 12:01:15 2009
From: javier at digi21.eu (=?ISO-8859-1?Q?Javier_M=FAgica?=)
Date: Tue, 20 Oct 2009 12:01:15 +0200
Subject: [Dev-luatex] Wishing is free: fonts and glyph placement
Message-ID: <5088e64f0910200301g3d003577m9bb39c268b62a5b5@mail.gmail.com>

If one takes a look at the kerning pairs of a font with many accented
letters, for instance lmr10, there are many "duplicate" pairs, in the
sense that in addition to "ko" there also appear "k?", "k?", "k?" and
so forth, and "ke", "k?", etc., obviously with the same kerning value,
and if we had \'k (accented k) then all of the combinations again. If
a new accented letter gets added, all its pais have to be encoded.
There is clearly some logic missing there.

The idea is that something which is at the right like k, plus
something which is at the left like o, needs a kerning of such and
such.

While the quadratic grouth of pairs is still tractable for normal text
with the current speed and memory capacities of computers, it becomes
out of control in math, where the possible pairs is beyond any
tabulation capacity. I for example had recently Q\Sigma, which clearly
requires kerning.

The underlying problem is that TeX does not take into account the
actual shape of the glyphs, but just its enclosing rectangle. Since
this is not sufficent for high quality typesetting there are two
pieces of information relating to the shape of the gliph beyond the
enclosing rectangle that TeX knows about: the kerning pairs and the
italic correction.

There are just two patches that leave many situations to be manually
adjusted by the editor (I refer to the person), depending on his
patience and quality standards, specially in math, where both the
pairs of gliphs that get combined and the relative position of them is
virtualy unlimited.

While computing gliph spacing by analyzing the glyph's shapes may be
too involved, a good, easier solution could be that, in addition to
the rectangle enclosing the glyph, another shape were known, not so
complicated as a glyph's shape but not so crude as a rectangle. I
could be restricted to a one-piece polygon without holes enclosing the
character and leaving a little space between its border and the
character (as the character's box currently does).
For example, the polygon for the letter k could be a rectangle with a
wedge intruding at the right side, while that of o, ?, e, etc. could
be an octagon. So when these characters were placed together it would
be done so that the respective polygons touch, instead of the
rectangular boxes as is now the case, and the need of kerning would
disappear.

This approach would:
  -- reduce the kerning pairs drastically
  -- need a linear grouth with the number of glyphs in the font (the
polygons) instead of a quadratic one.
  -- New glyphs, specialy adorned variants of existing ones, would
automatically get the correct spacing with existing ones.
  -- Pairs that seldom appear and are thus not considered in the
kerning tables, would also get the right spacing automatically.
  -- The unlimited possible combinations inside math would get handled
correctly. Most of them or at least many.
    Thus, the need for dozens of \! \, \phantoms and like stuff would
decrease substantialy. Here are some examples:

\Bigg)_{\!0}  (or was it even _{\!\!0}?)

f^2\,)  %here it is the left protruding of the )'s polygon that would
come into play.

1/\!\sqrt{3}

This requires adding another piece of info per-character in the font.
Now I can't remember how the tables of an OT font are orginized and
don't know whether this is possible or not.

The inconvenience I see in trying to compute the spacements based
directly on the shape of the gliph (with respect to the polygons I'm
proposing), appart from the many bugs that could be present till it
finally got properly programmed, is that it is too big a jump form the
current glyph placement algorithms in math, but it may well be that my
fears are unjustifed. The polygon approach has also the advantage that
it is easier to define the polygons so as to obtain the current
spacing between the most common kerning pairs, while it would be more
difficult to program an algorithm based on the glyphs' shapes
achieving the same effect, but on the other side it need not be better
to exactly preserve the current kerning values.

It may be too son for proposing this now, but I'm sure this will
sooner or later (possibly later) come to be discussed, since for the
finest text editor, a glyph placement in math based solely on the
rectangle of the glyphs and the italic correction cannot possibly be
the definitive solution.

Cheers to all

Javier A. M?gica

From root at www.metatex.org  Tue Oct 20 12:30:03 2009
From: root at www.metatex.org (Cron Daemon)
Date: Tue, 20 Oct 2009 12:30:03 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091020103004.4BF051E8C3F2@www.metatex.org>

------------------------------------------------------------------------
r3074 | taco | 2009-10-20 11:17:00 +0200 (Tue, 20 Oct 2009) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfobj.c

initialize the file pointer for \pdfobj file {} if there is no
callback

------------------------------------------------------------------------

From martin at oneiros.de  Tue Oct 20 15:55:05 2009
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 20 Oct 2009 15:55:05 +0200
Subject: [Dev-luatex] Wishing is free: fonts and glyph placement
In-Reply-To: <5088e64f0910200301g3d003577m9bb39c268b62a5b5@mail.gmail.com>
References: <5088e64f0910200301g3d003577m9bb39c268b62a5b5@mail.gmail.com>
Message-ID: <68c491a60910200655p73df3d3dm1f8b247732d14501@mail.gmail.com>

2009/10/20 Javier M?gica <javier at digi21.eu>:
> While computing gliph spacing by analyzing the glyph's shapes may be
> too involved, a good, easier solution could be that, in addition to

It mustn't be. I think what you are looking for is optical kerning.
InDesign does it: http://tinyurl.com/yh95sza
And a short search found iKern: http://ikern.com/k1/

Best
   Martin

From listas at tex-tipografia.com  Tue Oct 20 18:12:26 2009
From: listas at tex-tipografia.com (listas at tex-tipografia.com)
Date: Tue, 20 Oct 2009 17:12:26 +0100 (BST)
Subject: [Dev-luatex] Wishing is free: fonts and glyph placement
In-Reply-To: <68c491a60910200655p73df3d3dm1f8b247732d14501@mail.gmail.com>
References: <5088e64f0910200301g3d003577m9bb39c268b62a5b5@mail.gmail.com>
	<68c491a60910200655p73df3d3dm1f8b247732d14501@mail.gmail.com>
Message-ID: <23869.80.33.231.125.1256055146.squirrel@webmail.tex-tipografia.com>

> 2009/10/20 Javier M?gica <javier at digi21.eu>:
>> While computing gliph spacing by analyzing the glyph's shapes may be
>> too involved, a good, easier solution could be that, in addition to
>
> It mustn't be. I think what you are looking for is optical kerning.

I don't think so. I presume what he's proposing is something
similar to what Microsoft is doing (or trying to do) in its
new math font tables.

Javier
http://www.tex-tipografia.com



From chemoelectric at chemoelectric.org  Tue Oct 20 21:44:01 2009
From: chemoelectric at chemoelectric.org (Barry Schwartz)
Date: Tue, 20 Oct 2009 14:44:01 -0500
Subject: [Dev-luatex] Wishing is free: fonts and glyph placement
In-Reply-To: <5088e64f0910200301g3d003577m9bb39c268b62a5b5@mail.gmail.com>
References: <5088e64f0910200301g3d003577m9bb39c268b62a5b5@mail.gmail.com>
Message-ID: <20091020194401.GA12077@crud.chemoelectric.org>

Javier M?gica <javier at digi21.eu> skribis:
> While computing gliph spacing by analyzing the glyph's shapes may be
> too involved, a good, easier solution could be that, in addition to
> the rectangle enclosing the glyph, another shape were known, not so
> complicated as a glyph's shape but not so crude as a rectangle.

This is roughly what I do with my (unfortunately not documented)
"spacing by anchors" fontforge scripts at sortsmill.googlecode.com. I
say "roughly" because I use only a very limited number of manually
chosen horizontal cross-sections of a "virtual" surrounding shape, and
because the samples are not stored in the font (there being no
typesetting or word processing software that can use them) but used to
compute class-based kerning tables. Also I have made no attempt to
support mathematical typesetting. The idea, though, that typesetting
software could use such an approach to space glyphs rapidly, on the
fly, given the shape-approximations, has occurred to me.

(With fontforge one could look at the spacing point placements of my
fonts, for instance
http://code.google.com/p/sortsmill/source/browse/lindenhill/LindenHill.sfd
which I have been working on recently.)


From taco at elvenkind.com  Tue Oct 20 23:09:01 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 20 Oct 2009 23:09:01 +0200
Subject: [Dev-luatex] Wishing is free: fonts and glyph placement
In-Reply-To: <23869.80.33.231.125.1256055146.squirrel@webmail.tex-tipografia.com>
References: <5088e64f0910200301g3d003577m9bb39c268b62a5b5@mail.gmail.com>	<68c491a60910200655p73df3d3dm1f8b247732d14501@mail.gmail.com>
	<23869.80.33.231.125.1256055146.squirrel@webmail.tex-tipografia.com>
Message-ID: <4ADE26ED.10709@elvenkind.com>

listas at tex-tipografia.com wrote:
>> 2009/10/20 Javier M?gica <javier at digi21.eu>:
>>> While computing gliph spacing by analyzing the glyph's shapes may be
>>> too involved, a good, easier solution could be that, in addition to
>> It mustn't be. I think what you are looking for is optical kerning.
> 
> I don't think so. I presume what he's proposing is something
> similar to what Microsoft is doing (or trying to do) in its
> new math font tables.

If something like that microsoft stuf was in the font, it would be quite
easy for luatex to make use of it. Interpreting the actual charstrings
would go too far, but applying some sort of blocky shape (especially if
it only has horizontal and vertical lines) would be quite easy. It
sounds like thus needs a lot of work on the font design side, though.

Best wishes,
Taco



From listas at tex-tipografia.com  Wed Oct 21 10:18:38 2009
From: listas at tex-tipografia.com (Javier Bezos)
Date: Wed, 21 Oct 2009 10:18:38 +0200
Subject: [Dev-luatex] Wishing is free: fonts and glyph placement
In-Reply-To: <4ADE26ED.10709@elvenkind.com>
References: <5088e64f0910200301g3d003577m9bb39c268b62a5b5@mail.gmail.com>	<68c491a60910200655p73df3d3dm1f8b247732d14501@mail.gmail.com>
	<23869.80.33.231.125.1256055146.squirrel@webmail.tex-tipografia.com>
	<4ADE26ED.10709@elvenkind.com>
Message-ID: <4ADEC3DE.1050705@tex-tipografia.com>

Taco Hoekwater escribi?:

> If something like that microsoft stuf was in the font, it would be quite
> easy for luatex to make use of it. Interpreting the actual charstrings
> would go too far, but applying some sort of blocky shape (especially if
> it only has horizontal and vertical lines) would be quite easy. It
> sounds like thus needs a lot of work on the font design side, though.

Microsoft calls them "cut-ins" and they are defined in the
MATH table. They are intended for sub- and superscript (ie,
apparently not for general combinations of characters), and
may be specified for each quadrant (each quadrant may have
multiple cut-ins). Lines are horizontal and vertical.

Cheers
Javier

From taco at elvenkind.com  Wed Oct 21 10:19:41 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 21 Oct 2009 10:19:41 +0200
Subject: [Dev-luatex] Wishing is free: fonts and glyph placement
In-Reply-To: <4ADEC3DE.1050705@tex-tipografia.com>
References: <5088e64f0910200301g3d003577m9bb39c268b62a5b5@mail.gmail.com>	<68c491a60910200655p73df3d3dm1f8b247732d14501@mail.gmail.com>
	<23869.80.33.231.125.1256055146.squirrel@webmail.tex-tipografia.com>
	<4ADE26ED.10709@elvenkind.com>
	<4ADEC3DE.1050705@tex-tipografia.com>
Message-ID: <4ADEC41D.9080908@elvenkind.com>



Javier Bezos wrote:
> Taco Hoekwater escribi?:
> 
>> If something like that microsoft stuf was in the font, it would be quite
>> easy for luatex to make use of it. Interpreting the actual charstrings
>> would go too far, but applying some sort of blocky shape (especially if
>> it only has horizontal and vertical lines) would be quite easy. It
>> sounds like thus needs a lot of work on the font design side, though.
> 
> Microsoft calls them "cut-ins" and they are defined in the
> MATH table. They are intended for sub- and superscript (ie,
> apparently not for general combinations of characters), and
> may be specified for each quadrant (each quadrant may have
> multiple cut-ins). Lines are horizontal and vertical.

I know, and luatex already does that.

Best wishes,
Taco

From root at www.metatex.org  Fri Oct 23 12:29:59 2009
From: root at www.metatex.org (Cron Daemon)
Date: Fri, 23 Oct 2009 12:29:59 +0200 (CEST)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091023102959.86DEA1E8C403@www.metatex.org>

------------------------------------------------------------------------
r3075 | taco | 2009-10-23 08:52:48 +0200 (Fri, 23 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/src/luafflib.c

fix a bug with MS Mincho whis has baseline_cnt=1, but no baseline position info

------------------------------------------------------------------------

From preining at logic.at  Thu Oct 22 05:15:05 2009
From: preining at logic.at (Norbert Preining)
Date: Thu, 22 Oct 2009 05:15:05 +0200
Subject: [Dev-luatex] Bug#529331: Additional issues with poppler 0.12
	(which is in	unstable now)
In-Reply-To: <20091020153131.2ddb0770@corner>
References: <20091020153131.2ddb0770@corner>
Message-ID: <20091022031505.GB882@gamma.logic.tuwien.ac.at>

On Di, 20 Okt 2009, Ilya Barygin wrote:
> There are additional issues with poppler 0.12 which is in unstable now:

Thanks Ilya,

I have added the ubuntu 0.11 an your libpoppler 0.12 patch.
Can you give some copyright/license statement for this patch please.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining                                        Associate Professor
JAIST Japan Advanced Institute of Science and Technology   preining at jaist.ac.jp
Vienna University of Technology                               preining at logic.at
Debian Developer (Debian TeX Task Force)                    preining at debian.org
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
WINSTON-SALEM (n.)
A person in a restaurant who suggest to their companions that they
should split the cost of the meal equally, and then orders two packets
of cigarettes on the bill.
			--- Douglas Adams, The Meaning of Liff

From root at www.metatex.org  Mon Oct 26 12:30:27 2009
From: root at www.metatex.org (Cron Daemon)
Date: Mon, 26 Oct 2009 12:30:27 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091026113027.269881E8C3F0@www.metatex.org>

------------------------------------------------------------------------
r3076 | oneiros | 2009-10-25 23:50:13 +0100 (Sun, 25 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/src/ffdummies.c
   M /trunk/source/texk/web2c/luatexdir/luafontloader/src/luafflib.c

indent, svn:keywords, header

------------------------------------------------------------------------
r3077 | oneiros | 2009-10-25 23:51:23 +0100 (Sun, 25 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/pdf/pdfgen.c
   M /trunk/source/texk/web2c/luatexdir/pdf/pdftables.c

indent

------------------------------------------------------------------------
r3078 | oneiros | 2009-10-25 23:52:31 +0100 (Sun, 25 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/lua/lstatslib.c
   M /trunk/source/texk/web2c/luatexdir/lua/ltexlib.c
   M /trunk/source/texk/web2c/luatexdir/lua/luagen.c
   M /trunk/source/texk/web2c/luatexdir/lua/luainit.c
   M /trunk/source/texk/web2c/luatexdir/lua/luatex-api.h
   M /trunk/source/texk/web2c/luatexdir/lua/luatoken.c

indent

------------------------------------------------------------------------
r3079 | oneiros | 2009-10-25 23:53:33 +0100 (Sun, 25 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/writetype0.c

indent

------------------------------------------------------------------------
r3080 | oneiros | 2009-10-25 23:55:06 +0100 (Sun, 25 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/tex/align.c
   M /trunk/source/texk/web2c/luatexdir/tex/linebreak.c
   M /trunk/source/texk/web2c/luatexdir/tex/mainbody.c
   M /trunk/source/texk/web2c/luatexdir/tex/mlist.c
   M /trunk/source/texk/web2c/luatexdir/tex/printing.c
   M /trunk/source/texk/web2c/luatexdir/tex/texmath.c

indent

------------------------------------------------------------------------
r3081 | oneiros | 2009-10-25 23:57:52 +0100 (Sun, 25 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luatex.c

svn:keywords

------------------------------------------------------------------------
r3082 | oneiros | 2009-10-25 23:58:59 +0100 (Sun, 25 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/src/ffdummies.c
   M /trunk/source/texk/web2c/luatexdir/luafontloader/src/luafflib.c

rm svn:mergeinfo

------------------------------------------------------------------------
r3083 | oneiros | 2009-10-26 00:17:31 +0100 (Mon, 26 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/src/ffdummies.c

add some attributes

------------------------------------------------------------------------

From taco at elvenkind.com  Tue Oct 27 12:06:09 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 27 Oct 2009 12:06:09 +0100
Subject: [Dev-luatex] Luatex 0.44.0 announcement
Message-ID: <4AE6D421.5090105@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.44.0.

There are not a lot of new features yet, but this releases fixes
a fair amount of bugs found in 0.43.0 (and earlier versions).

New features:

* libpng is now 1.2.40.

* hlist nodes now have a subtype to distinguish hlists generated
  by the paragraph breaking, explicit \hbox commands, and other
  (as-yet-undefined) sources.

* \pdfobj now has an extra optional keyword: 'uncompressed',
  which forces the object to be written to the PDF in plain
  text (see the manual for the exact details).

* The lua file from the luamd5 library (which provides the
  md5.hexsuma() function) is now embedded in the executable.

Bug fixes:

* \latelua now works in DVI mode again.

* status.output_file_name could crash when used too soon.

* In 0.43, rules were not output at all in DVI mode.

* \leavevmode\penalty-10000\penalty-10000 crashed luatex.

* the API of margin kern nodes to lua was using the wrong
  fields in the nodes.

* A few fixes to the manual.

* PDF Xref stream dicts were slightly non-conformant.

* There was too much space between two consecutive math displays
  (this bug was inherited from Aleph)

* Synctex was broken (thanks, Akira)

* Font mark classes were handled incorrectly by the fontloader
  code.

* There was a crash possible with certain types of named PDF
  destinations.

* Math delimiters and large operators in new MATH fonts no
  longer apply the italic correction (this fixes placements
  of super- and subscripts on such items for those fonts).

* The converter from lua strings to token lists (for the node
  interface) sometimes generated invalid tokens.

* CFF (OpenType) fonts now listen to 'embedding="full"'. TTF
  is still todo.

* Font tables with 'embedding="no"' would cause luatex to crash.

* \pdfobj file {} failed to find the file if there was no lua
  callback in place.

* An optimization in MS Mincho caused luatex to crash.


The archives can be downloaded from supelec as usual:

        http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

  svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.44.0

Bugs and feature requests can be added to the issue tracker at

       http://tracker.luatex.org


Have fun,
Taco


From javier at digi21.eu  Tue Oct 27 13:38:58 2009
From: javier at digi21.eu (=?ISO-8859-1?Q?Javier_M=FAgica?=)
Date: Tue, 27 Oct 2009 13:38:58 +0100
Subject: [Dev-luatex] Wishing is free: fonts and glyph placement
In-Reply-To: <20091020194401.GA12077@crud.chemoelectric.org>
References: <5088e64f0910200301g3d003577m9bb39c268b62a5b5@mail.gmail.com>
	<20091020194401.GA12077@crud.chemoelectric.org>
Message-ID: <5088e64f0910270538i17367c47v6fd9e42e01620e1@mail.gmail.com>

I went on Hollydays the day after sending the message. That's why I
didn't reply to the messages.

What I mean is that the glyphs be placed so that their polygonal
shapes touch, instead of their boxes.
For example, if that of the k has a triangular hole at the right and
that of the o is an octagon, then placing these glyphs together within
a word, first the k and then the o, would make the octagon of the o to
go inside the hole of the k, so that both shapes touch. This is why
most kerning pairs would not be needed any more.

The idea that the polygons touch need not be restricted to letters
within a word but may be applied also to math.

>but applying some sort of blocky shape (especially if
>it only has horizontal and vertical lines) would be quite easy.

Maybe diagonal lines could be faked by a series of small steps.

--Javier A.

From root at www.metatex.org  Tue Oct 27 16:32:32 2009
From: root at www.metatex.org (Cron Daemon)
Date: Tue, 27 Oct 2009 16:32:32 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091027153232.DA6E71E8C3F0@www.metatex.org>

------------------------------------------------------------------------
r3084 | taco | 2009-10-27 11:43:01 +0100 (Tue, 27 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/NEWS

New News

------------------------------------------------------------------------
r3085 | taco | 2009-10-27 11:43:57 +0100 (Tue, 27 Oct 2009) | 2 lines
Changed paths:
   A /tags/beta-0.44.0 (from /trunk:3084)

new release tag

------------------------------------------------------------------------
r3086 | taco | 2009-10-27 13:15:11 +0100 (Tue, 27 Oct 2009) | 2 lines
Changed paths:
   M /trunk/manual/luatexref-t.pdf
   M /trunk/manual/luatexref-t.tex

new manual + small fix

------------------------------------------------------------------------
r3087 | taco | 2009-10-27 13:16:51 +0100 (Tue, 27 Oct 2009) | 2 lines
Changed paths:
   M /tags/beta-0.44.0/manual/luatexref-t.pdf
   M /tags/beta-0.44.0/manual/luatexref-t.tex

fixes to the manual from trunk

------------------------------------------------------------------------

From root at www.metatex.org  Tue Oct 27 22:28:26 2009
From: root at www.metatex.org (Cron Daemon)
Date: Tue, 27 Oct 2009 22:28:26 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091027212826.662691E8C3F0@www.metatex.org>

------------------------------------------------------------------------
r3088 | taco | 2009-10-27 16:28:43 +0100 (Tue, 27 Oct 2009) | 3 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/font/mapfile.c

allow a null font name in the fmlookup() function, for the 
benefit of lua-loaded fonts

------------------------------------------------------------------------

From root at www.metatex.org  Wed Oct 28 22:28:28 2009
From: root at www.metatex.org (Cron Daemon)
Date: Wed, 28 Oct 2009 22:28:28 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091028212828.E27E51E8C3F8@www.metatex.org>

------------------------------------------------------------------------
r3089 | taco | 2009-10-28 15:38:26 +0100 (Wed, 28 Oct 2009) | 2 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/image/pdftoepdf.cc

initial fix for premature newlines 

------------------------------------------------------------------------

From khaledhosny at eglug.org  Thu Oct 29 15:52:59 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Thu, 29 Oct 2009 16:52:59 +0200
Subject: [Dev-luatex] Luatex 0.44.0 announcement
In-Reply-To: <4AE6D421.5090105@elvenkind.com>
References: <4AE6D421.5090105@elvenkind.com>
Message-ID: <20091029145259.GA27671@khaled-laptop>

On Tue, Oct 27, 2009 at 12:06:09PM +0100, Taco Hoekwater wrote:
> * Math delimiters and large operators in new MATH fonts no
>   longer apply the italic correction (this fixes placements
>   of super- and subscripts on such items for those fonts).

This doesn't sound the correct way to me. The described algorithm in
MATH specification is to set subscripts immediately after the base
(without italic correction) and shift superscripts horizontally by the
amount of italic correction, then apply math kerning if present, this
way fonts with no math kerning will still give acceptable output and
need for math kerning will be minimized.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
URL: <http://www.ntg.nl/mailman/private/dev-luatex/attachments/20091029/5009650b/attachment.pgp>

From taco at elvenkind.com  Fri Oct 30 09:02:30 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 30 Oct 2009 09:02:30 +0100
Subject: [Dev-luatex] Luatex 0.44.0 announcement
In-Reply-To: <20091029145259.GA27671@khaled-laptop>
References: <4AE6D421.5090105@elvenkind.com>
	<20091029145259.GA27671@khaled-laptop>
Message-ID: <4AEA9D96.20007@elvenkind.com>


Hi,

Khaled Hosny wrote:
> On Tue, Oct 27, 2009 at 12:06:09PM +0100, Taco Hoekwater wrote:
>> * Math delimiters and large operators in new MATH fonts no
>>   longer apply the italic correction (this fixes placements
>>   of super- and subscripts on such items for those fonts).
> 
> This doesn't sound the correct way to me. The described algorithm in
> MATH specification is to set subscripts immediately after the base
> (without italic correction) and shift superscripts horizontally by the
> amount of italic correction, then apply math kerning if present, this
> way fonts with no math kerning will still give acceptable output and
> need for math kerning will be minimized.

Well, I am clearly doing something wrong, because both the old and
new outputs look crappy. I'll rethink this.

Best wishes,
Taco

From root at www.metatex.org  Sat Oct 31 22:28:25 2009
From: root at www.metatex.org (Cron Daemon)
Date: Sat, 31 Oct 2009 22:28:25 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@vz3>
	/var/www/luatex.org/www/bin/luatex-svn
Message-ID: <20091031212825.4415F1E8C3F8@www.metatex.org>

------------------------------------------------------------------------
r3090 | taco | 2009-10-31 15:52:37 +0100 (Sat, 31 Oct 2009) | 4 lines
Changed paths:
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/parsettf.c
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/psread.c
   M /trunk/source/texk/web2c/luatexdir/luafontloader/fontforge/fontforge/splinefont.h

Speed up reading of OTF fonts in fontloader.open() by using an approximate
boundingbox that is calculated during CFF parsing instead of the perfectly 
accurate one that had to be calculated based on actual splines.

------------------------------------------------------------------------

