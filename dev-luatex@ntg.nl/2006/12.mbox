From taco at elvenkind.com  Fri Dec  1 16:51:12 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 01 Dec 2006 16:51:12 +0100
Subject: [Dev-luatex] No news
Message-ID: <45704F70.50307@elvenkind.com>

Hi all,

In case you are wondering: there will be a snapshot on monday. Hans and 
I are now trying to figure out how to do utf-16 input. This is the last 
big thing we have to sort out on the input side of the input/output
system, so we are making real progress despite the lack of snapshots
(all code is checked in at the moment).

Taco


From root at aanhet.net  Fri Dec  1 22:22:16 2006
From: root at aanhet.net (Cron Daemon)
Date: Fri,  1 Dec 2006 22:22:16 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@server> /home/luatex/luatex-svn
Message-ID: <20061201212216.806B42800090@server.aanhet.net>

U  luatex/src/libs/lua51/liolib.c
 U  luatex/src/texk/web2c/luatexdir/luatex.web
 U  luatex/src/texk/web2c/luatexdir/lua/lcallbacklib.c
 U  luatex/src/texk/web2c/luatexdir/lua/lstatslib.c
 Checked out revision 184.

From root at aanhet.net  Sun Dec  3 12:22:19 2006
From: root at aanhet.net (Cron Daemon)
Date: Sun,  3 Dec 2006 12:22:19 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@server> /home/luatex/luatex-svn
Message-ID: <20061203112219.28A25280023E@server.aanhet.net>

U  luatex/src/libs/lua51/liolib.c
 U  luatex/src/texk/web2c/luatexdir/utils.c
 U  luatex/src/texk/web2c/luatexdir/luatex.ch
 U  luatex/src/texk/web2c/luatexdir/luatex.web
 U  luatex/src/texk/web2c/luatexdir/lua/lcallbacklib.c
 U  luatex/src/texk/web2c/luatexdir/ptexlib.h
 U  luatex/src/texk/web2c/luatexdir/luatex.defines
 Checked out revision 189.

From root at aanhet.net  Mon Dec  4 16:22:12 2006
From: root at aanhet.net (Cron Daemon)
Date: Mon,  4 Dec 2006 16:22:12 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@server> /home/luatex/luatex-svn
Message-ID: <20061204152212.A96492800088@server.aanhet.net>

U  luatex/src/texk/web2c/luatexdir/luatex.web
 U  luatex/src/texk/web2c/luatexdir/lua/lcallbacklib.c
 U  luatex/src/texk/web2c/luatexdir/luatex-api.h
 U  luatex/src/texk/web2c/lib/texmfmp.c
 U  luatex/manual/luatexref-t.tex
 U  luatex/manual/luatexref-t.pdf
 Checked out revision 193.

From taco at elvenkind.com  Mon Dec  4 16:37:04 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 04 Dec 2006 16:37:04 +0100
Subject: [Dev-luatex] Snapshot 20061204
Message-ID: <457440A0.9000304@elvenkind.com>

Hi all,

It has taken me quite some time, but finally there is a new snapshot.

A short rundown of the user-visible changes:

* The LuaTeX interpreter can now be run as a standalone lua script
   processor, by using a commandline like this:

	luatex --luaonly=luatools.lua

* Luafilesystem (http://www.keplerproject.org/luafilesystem/ ) is
   included.

* There are a total of eight new file discovery callbacks:
	find_vf_file
	find_ocp_file
	find_map_file
	find_enc_file
	find_sfd_file
	find_pk_file
	find_data_file
	find_opentype_file
   this enhances the orthogonality of the callback system, nothing
   fundamental is changed.

* There is a new callback called 'process_input_buffer' that can
   be used to mutate the line buffer just before LuaTeX actually
   starts looking at it.

* The 'reader' and 'close' functions from 'open_read_file' now
   receive the table they are defined in as a function argument,
   that can be used as a per file localized data store.

* Updated the Lua to the latest 5.1.1, with all known bug patches
   from the website applied as well

* Runtime autoloading of lua .so files is now off on all platforms.

* The statistics table now has readable items
	statistics.filename
	statistics.linenumber
   that represent TeX's current file name and line number

* The support for user-defined type3 font .pgc files and the
   associated 'read_miscfonts_file' callback has been removed.
   (nobody used it anyway)

* General cleanups to the source tree and build process.


And I've updated the manual as well (pdf is inside the bz2 file)

Have fun,

Taco


-----

Downloading and installation details:

If you go to

         https://foundry.supelec.fr/frs/?group_id=10

you will see that there are two new released files:

* luatex-snapshot-20061204.tar.bz2
         This is the source tree.

* luatex-snapshot-20061204-win32.zip
         A cross-compiled (mingw) windows binary. This is a web2c
         based binary, so it needs a texmf.cnf file (It will NOT
         work if you have only miktex installed).

From taco at elvenkind.com  Mon Dec  4 17:35:30 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 04 Dec 2006 17:35:30 +0100
Subject: [Dev-luatex] security
Message-ID: <45744E52.2090403@elvenkind.com>

Hi all,

I have just implemented the beginnings of a --safer switch.

For the moment, the switch does not really do much.
It only disables access to some Lua functions:

   os.*
   io.popen
   lfs.*

This is at the same time too much and not enough, so I welcome
any opinions on what should be allowed under --safer and what
should be forbidden.

My guess is that I should also disallow at least:

	io.open(,"w")
	io.output()

but

	os.time
	os.date
	os.clock
	os.getenv

are probably ok.

Greetings, Taco

From pragma at wxs.nl  Mon Dec  4 17:49:00 2006
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 04 Dec 2006 17:49:00 +0100
Subject: [Dev-luatex] security
In-Reply-To: <45744E52.2090403@elvenkind.com>
References: <45744E52.2090403@elvenkind.com>
Message-ID: <4574517C.8040702@wxs.nl>

Taco Hoekwater wrote:
> Hi all,
>
> I have just implemented the beginnings of a --safer switch.
>
> For the moment, the switch does not really do much.
> It only disables access to some Lua functions:
>
>    os.*
>    io.popen
>    lfs.*
>
> This is at the same time too much and not enough, so I welcome
> any opinions on what should be allowed under --safer and what
> should be forbidden.
>
> My guess is that I should also disallow at least:
>
> 	io.open(,"w")
> 	io.output()
>
> but
>
> 	os.time
> 	os.date
> 	os.clock
> 	os.getenv
>   
lfs.dir is also ok
> are probably ok.
>
> Greetings, Taco
> _______________________________________________
> dev-luatex mailing list
> dev-luatex at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-luatex
>   


-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From root at aanhet.net  Mon Dec  4 22:22:12 2006
From: root at aanhet.net (Cron Daemon)
Date: Mon,  4 Dec 2006 22:22:12 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@server> /home/luatex/luatex-svn
Message-ID: <20061204212212.0700A280018B@server.aanhet.net>

U  luatex/src/texk/web2c/luatexdir/lua/luainit.c
 U  luatex/src/texk/web2c/luatexdir/lua/luastuff.c
 U  luatex/src/texk/web2c/luatexdir/luatex-api.h
 Checked out revision 194.

From root at aanhet.net  Tue Dec  5 12:22:17 2006
From: root at aanhet.net (Cron Daemon)
Date: Tue,  5 Dec 2006 12:22:17 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@server> /home/luatex/luatex-svn
Message-ID: <20061205112217.941372800093@server.aanhet.net>

U  luatex/src/texk/web2c/luatexdir/luatex.web
 U  luatex/src/texk/web2c/luatexdir/lua/lpdflib.c
 U  luatex/manual/luatexref-t.tex
 Checked out revision 196.

From root at aanhet.net  Tue Dec  5 22:22:13 2006
From: root at aanhet.net (Cron Daemon)
Date: Tue,  5 Dec 2006 22:22:13 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@server> /home/luatex/luatex-svn
Message-ID: <20061205212213.4C69C28000BF@server.aanhet.net>

U  luatex/src/libs/lua51/lstrlib.c
 U  luatex/src/texk/web2c/luatexdir/lua/lstatslib.c
 U  luatex/src/texk/web2c/luatexdir/lua/llualib.c
 U  luatex/src/texk/web2c/luatexdir/lua/luastuff.c
 U  luatex/manual/luatexref-t.tex
 U  luatex/manual/luatexref-t.pdf
 Checked out revision 198.

From lists at texytipografia.com  Wed Dec  6 13:01:04 2006
From: lists at texytipografia.com (Javier Bezos)
Date: Wed, 6 Dec 2006 13:01:04 +0100
Subject: [Dev-luatex] Very simple sample?
References: <20061130112217.CBA9028000B1@server.aanhet.net>
Message-ID: <001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>

Hello,

I'm trying to use \directlua, but until now all
may attempts failed. I begun with:

\documentclass{book}
\begin{document}
\directlua0{tex.print("\uppercase{hello}");}
\end{document}

and then wrapped \directlua with every combination
possible of \texscantokens, \luaescapestring,
\scantokens and so on, but nothing seems to work
(no errors, but I get "uppercase" printed, perhaps
with dashes and quotes, and of course "hello" still
in lower case).

Please, could you provide an example showing what
I should do. Are \directlua and tex.print the right
commands to use?

Thanks
Javier



From taco at elvenkind.com  Wed Dec  6 13:07:13 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 06 Dec 2006 13:07:13 +0100
Subject: [Dev-luatex] Very simple sample?
In-Reply-To: <001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>
References: <20061130112217.CBA9028000B1@server.aanhet.net>
	<001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>
Message-ID: <4576B271.9090906@elvenkind.com>

Javier Bezos wrote:
> Hello,
> 
> I'm trying to use \directlua, but until now all
> may attempts failed. I begun with:
> 
> \documentclass{book}
> \begin{document}
> \directlua0{tex.print("\uppercase{hello}");}
> \end{document}
> 
> and then wrapped \directlua with every combination
> possible of \texscantokens, \luaescapestring,
> \scantokens and so on, but nothing seems to work
> (no errors, but I get "uppercase" printed, perhaps
> with dashes and quotes, and of course "hello" still
> in lower case).
> 
> Please, could you provide an example showing what
> I should do. Are \directlua and tex.print the right
> commands to use?

Yes, but tex interprets commands inside the \directlua
argument and on top of that lua interprets \ in strings,
so you need a way to get two backslashes in the tex.print
argument

This is the simplest solution:

   \let\\\relax
   \directlua0{tex.print("\\uppercase{hello}");}

But you may need something else in LaTeX, where \\
has built-in semantics.

Best, Taco



From lists at texytipografia.com  Wed Dec  6 13:49:05 2006
From: lists at texytipografia.com (Javier Bezos)
Date: Wed, 6 Dec 2006 13:49:05 +0100
Subject: [Dev-luatex] Very simple sample?
References: <20061130112217.CBA9028000B1@server.aanhet.net>
	<001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>
	<4576B271.9090906@elvenkind.com>
Message-ID: <003501c71934$f2f70fe0$29830e3e@PROPIETAFMI1K9>

Taco:

> This is the simplest solution:
> 
>   \let\\\relax
>   \directlua0{tex.print("\\uppercase{hello}");}

:-/ Too ad hoc, but it helped, as I understood what's
going on. So I tried:

\directlua0\expandafter{%
  \detokenize{tex.print("\\section{Hola $\\sin a_0^2$}");}}

Seems to work.

Javier



From lists at texytipografia.com  Wed Dec  6 18:14:10 2006
From: lists at texytipografia.com (Javier Bezos)
Date: Wed, 6 Dec 2006 18:14:10 +0100
Subject: [Dev-luatex] Very simple sample?
References: <20061130112217.CBA9028000B1@server.aanhet.net><001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9><4576B271.9090906@elvenkind.com>
	<003501c71934$f2f70fe0$29830e3e@PROPIETAFMI1K9>
Message-ID: <005601c71959$f7c205a0$29830e3e@PROPIETAFMI1K9>

Another question:

How can I read arbitrary TeX input? Or is this part
still unfinished? Currently, LuaTeX only accepts
UTF-8 input, right? But let's assume we have:

<latin 1 text> \arabic{<iso arabic text>} <latin 1 tex>

ie, two input encodings in the same line. I don't still
understand how encodings work.

Javier

PS. Here is a more complete example with LaTeX (or
more exactly TeX inside LaTeX...):

\documentclass{book}

\def\lua#1{\directlua0\expandafter{\detokenize{#1}}}

\def\sub#1{%
  \lua{
    tex.print("\\subsection{#1}");
    tex.print("\\message{Show a message}");
    tex.print("Argument \\\#1 is #1")
}}

\begin{document}

\lua{tex.print("\\section{Hola $\\sin a_0^2$}");}

\sub{Sub section}

\end{document}

From pragma at wxs.nl  Wed Dec  6 18:45:15 2006
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 06 Dec 2006 18:45:15 +0100
Subject: [Dev-luatex] Very simple sample?
In-Reply-To: <005601c71959$f7c205a0$29830e3e@PROPIETAFMI1K9>
References: <20061130112217.CBA9028000B1@server.aanhet.net>
	<001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>
	<4576B271.9090906@elvenkind.com>
	<003501c71934$f2f70fe0$29830e3e@PROPIETAFMI1K9>
	<005601c71959$f7c205a0$29830e3e@PROPIETAFMI1K9>
Message-ID: <457701AB.9080404@wxs.nl>

Javier Bezos wrote:
> Another question:
>
> How can I read arbitrary TeX input? Or is this part
> still unfinished? Currently, LuaTeX only accepts
> UTF-8 input, right? But let's assume we have:
>
> <latin 1 text> \arabic{<iso arabic text>} <latin 1 tex>
>   
that is kind of impossible, unless you hook lua code in \arabic or let 
\arabic insert info that then can be used while preprocesing the lines

preprocessing (at all levels of tex) is under development; by the end of 
this year / begin next year i/o will be stable ; around eurotex open 
type fonts + manipulation of fonts will be available
> ie, two input encodings in the same line. I don't still
> understand how encodings work.
>   
luatex takes only utf, and if you want something else, one can recode 
each input line using a call back function to do the recoding (or use an 
external prog to preprocess the input), but mixed input encodings will 
demand adaption of the macro's used for (eg arab)

pdftex 1.* will be the pdftex that deals with 8 bit input, pdftex 2.* 
will be the utf variant ; user visible tex code for version 2.0+ quite 
certainly will be different at the lower level

Hans


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From taco at elvenkind.com  Wed Dec  6 19:09:14 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 06 Dec 2006 19:09:14 +0100
Subject: [Dev-luatex] Very simple sample?
In-Reply-To: <457701AB.9080404@wxs.nl>
References: <20061130112217.CBA9028000B1@server.aanhet.net>	<001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>	<4576B271.9090906@elvenkind.com>	<003501c71934$f2f70fe0$29830e3e@PROPIETAFMI1K9>	<005601c71959$f7c205a0$29830e3e@PROPIETAFMI1K9>
	<457701AB.9080404@wxs.nl>
Message-ID: <4577074A.2080605@elvenkind.com>

Hi Javier (and Hans),

> luatex takes only utf, and if you want something else, one can recode 
> each input line using a call back function to do the recoding (or use an 
> external prog to preprocess the input), but mixed input encodings will 
> demand adaption of the macro's used for (eg arab)

Of course there are a few things not implemented yet (in particular,
we plan to have advanced support for in-line encoding/transliteration
changes by making it possible to intercept the token builder, but that
is not there yet).  However, the practical problem is not so much
unfinished things in the executable, but missing documentation and
Lua script code. I'll be writing a section on input encodings for
the manual tomorrow, and that should help clear up things. Please
hang on for a bit longer until that is finished.

Best, Taco

From root at aanhet.net  Wed Dec  6 22:22:12 2006
From: root at aanhet.net (Cron Daemon)
Date: Wed,  6 Dec 2006 22:22:12 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@server> /home/luatex/luatex-svn
Message-ID: <20061206212212.BC6BA280024B@server.aanhet.net>

U  luatex/src/libs/lua51/lstrlib.c
 U  luatex/src/texk/web2c/luatexdir/luatex.web
 U  luatex/src/texk/web2c/luatexdir/lua/lcallbacklib.c
 U  luatex/src/texk/web2c/luatexdir/lua/lstatslib.c
 U  luatex/manual/luatexref-t.tex
 U  luatex/manual/luatexref-t.pdf
 Checked out revision 203.

From taco at elvenkind.com  Thu Dec  7 17:09:52 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 07 Dec 2006 17:09:52 +0100
Subject: [Dev-luatex] Very simple sample?
In-Reply-To: <4577074A.2080605@elvenkind.com>
References: <20061130112217.CBA9028000B1@server.aanhet.net>	<001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>	<4576B271.9090906@elvenkind.com>	<003501c71934$f2f70fe0$29830e3e@PROPIETAFMI1K9>	<005601c71959$f7c205a0$29830e3e@PROPIETAFMI1K9>	<457701AB.9080404@wxs.nl>
	<4577074A.2080605@elvenkind.com>
Message-ID: <45783CD0.7040302@elvenkind.com>


Hi Javier,

Taco Hoekwater wrote:
> Lua script code. I'll be writing a section on input encodings for
> the manual tomorrow, and that should help clear up things. Please
> hang on for a bit longer until that is finished.

Attached is a provisional excerpt of the coming book on LuaTeX.
It is ConTeXt source, but it should not be hard to get it to compile
under LaTeX or plain if you don't have ConTeXt installed.

An easy way to solve the luacode-in-texcode chaos is to put the bulk
of the lua code in a separate file, and only have e.g.

   \directlua 0 { dofile("demo.lua") }

in your document source. Anyway, i hope it makes sense to you.

Best, Taco






-------------- next part --------------
A non-text attachment was scrubbed...
Name: lua-files.tex
Type: application/x-tex
Size: 5453 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-luatex/attachments/20061207/99e4b1bb/attachment.tex 

From lists at texytipografia.com  Thu Dec  7 17:38:02 2006
From: lists at texytipografia.com (Javier Bezos)
Date: Thu, 7 Dec 2006 17:38:02 +0100
Subject: [Dev-luatex] lua in ocp's [was Very simple sample?]
References: <20061130112217.CBA9028000B1@server.aanhet.net>	<001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>	<4576B271.9090906@elvenkind.com>	<003501c71934$f2f70fe0$29830e3e@PROPIETAFMI1K9>	<005601c71959$f7c205a0$29830e3e@PROPIETAFMI1K9>
	<457701AB.9080404@wxs.nl> <4577074A.2080605@elvenkind.com>
Message-ID: <005101c71a1e$1e10d870$f3880e3e@PROPIETAFMI1K9>

Taco (and Hans):

> Of course there are a few things not implemented yet (in particular,
> we plan to have advanced support for in-line encoding/transliteration
> changes by making it possible to intercept the token builder, but that
> is not there yet). 

ok, thank you.

I've begun to make tests combining ocp's and lua. The tex
file is:
=============================
\documentclass{book}

\def\lua#1{\directlua0\expandafter{\detokenize{#1}}}

\ocp\luaocp=lua
\ocplist\lualist=\addbeforeocplist
  1 \luaocp
\nullocplist

\def\dolua#1{\lua{
  print('(#1)');
  tex.sprint('(#1)');
}}

\begin{document}

//{\pushocplist\lualist text and text}//

\end{document}
=============================

and the otp file (lua.otp) is:

=============================
input:  1;
output: 1;

expressions:
.  => "\dolua{" \1 "}";
==============================
which just wraps every letter inside \dolua{ }. However,
the letters are silently ignored (but "print" prints it in
the console, so lua is working). I presume the problem
is "tex.print" is like a line in the tex file, while ocp's
are applied after expansion, so when \dolua is executed
it's too late and the line is sent to nowhere.

I'm aware the road map says the third stage will implement
"token filtering (aka Translation Processes)". I'm just
commenting on my tests, just in case they are useful.

Javier

PS. By the way, I'm using luatex on Windows XP with TeXLive
2005 and a modified latex.ltx.




From taco at elvenkind.com  Fri Dec  8 12:09:27 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 08 Dec 2006 12:09:27 +0100
Subject: [Dev-luatex] lua in ocp's [was Very simple sample?]
In-Reply-To: <005101c71a1e$1e10d870$f3880e3e@PROPIETAFMI1K9>
References: <20061130112217.CBA9028000B1@server.aanhet.net>	<001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>	<4576B271.9090906@elvenkind.com>	<003501c71934$f2f70fe0$29830e3e@PROPIETAFMI1K9>	<005601c71959$f7c205a0$29830e3e@PROPIETAFMI1K9>	<457701AB.9080404@wxs.nl>
	<4577074A.2080605@elvenkind.com>
	<005101c71a1e$1e10d870$f3880e3e@PROPIETAFMI1K9>
Message-ID: <457947E7.7090604@elvenkind.com>



Javier Bezos wrote:

> which just wraps every letter inside \dolua{ }. However,
> the letters are silently ignored (but "print" prints it in
> the console, so lua is working). I presume the problem
> is "tex.print" is like a line in the tex file, while ocp's
> are applied after expansion, so when \dolua is executed
> it's too late and the line is sent to nowhere.

That is roughly what happens, yes. I have to look into this
at some point, because silently disappearing output is a bit
unfriendly, but the precise interaction between otp processing
and input states is not the easiest bit of TeX to comprehend,
so it may take a while.

Best, Taco

From taco at elvenkind.com  Fri Dec  8 15:33:22 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 08 Dec 2006 15:33:22 +0100
Subject: [Dev-luatex]  Snapshot 20061208
Message-ID: <457977B2.1010802@elvenkind.com>

Hi all,

After the long delay last time, there is already a new snapshot
hot on the heals of monday's version. Not too much has changed,
but it is good to create a release now, because I will be working
on fonts next and that will leave the system absolutely unstable
for a few weeks.

A short rundown of the user-visible changes:

* There is a new switch: --safer. This disables a number of lua
   functions that are more or less dangerous (a detailed list is
   in the manual)

* Two longstanding bugs have been fixed: \latelua works once
   again (patch by Hartmut) and a bug that caused mysterious crashes
   turned out to be a problem inside the paragraph builder
   (reconstitution of ligatures)

* Six new string iterators have been added to the string library:
      string.characters        (one 1-letter string)
      string.bytes             (one byte)
      string.characterpairs    (two 1-letter strings)
      string.bytepairs         (two bytes)
      string.utfcharacters     (a one-character utf-8 string)
      string.utfvalues         (a unicode code point number)

* The top 256 values of the unicode range (starting at hex
   value "10FF00) are now reserved for byte output. Characters
   in that range will be written by luatex after substracting
   that offset. The net result is that \char"10FFA9 is written
   as byte value hex A9 = decimal 169 = copyright sign in latin1

   This trick allows byte-oriented output to \pdfliterals and
   \specials, but should be considered very experimental.

* There is a new callback called 'process_input_buffer' that can
    be used to mutate the line buffer just before LuaTeX actually
    starts looking at it.

* The statistics table now has readable items
	statistics.inputid
	statistics.lasterrorstring
    that represent TeX's current input id and the last error string

* The show_error_hook callback no longer receives any arguments

* The statistics table now has readable items
	statistics.luabytecodes
	statistics.luastates
	statistics.luabytecode_bytes
	statistics.luastate_bytes
   for memory statistics reporting


And I've updated the manual, as always (pdf is inside the bz2 file)

Have fun,

Taco


-----

Downloading and installation details:

If you go to

          https://foundry.supelec.fr/frs/?group_id=10

you will see that there are two new released files:

* luatex-snapshot-20061208.tar.bz2
          This is the source tree.

* luatex-snapshot-20061208-win32.zip
          A cross-compiled (mingw) windows binary. This is a web2c
          based binary, so it needs a texmf.cnf file (It will NOT
          work if you have only miktex installed).

From root at aanhet.net  Fri Dec  8 16:22:10 2006
From: root at aanhet.net (Cron Daemon)
Date: Fri,  8 Dec 2006 16:22:10 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@server> /home/luatex/luatex-svn
Message-ID: <20061208152210.86DE728000E8@server.aanhet.net>

U  luatex/src/libs/lua51/liolib.c
 U  luatex/src/texk/web2c/luatexdir/image/writeimg.c
 U  luatex/src/texk/web2c/luatexdir/luatex.web
 U  luatex/src/texk/web2c/luatexdir/lua/lcallbacklib.c
 U  luatex/src/texk/web2c/luatexdir/lua/luainit.c
 U  luatex/src/texk/web2c/luatexdir/lua/luastuff.c
 U  luatex/src/texk/web2c/luatexdir/font/writet1.c
 U  luatex/src/texk/web2c/luatexdir/font/subfont.c
 U  luatex/src/texk/web2c/luatexdir/font/writet3.c
 U  luatex/src/texk/web2c/luatexdir/font/writettf.c
 U  luatex/src/texk/web2c/luatexdir/font/mapfile.c
 U  luatex/manual/luatexref-t.tex
 U  luatex/manual/luatexref-t.pdf
 Checked out revision 211.

From lists at texytipografia.com  Fri Dec  8 20:03:53 2006
From: lists at texytipografia.com (Javier Bezos)
Date: Fri, 8 Dec 2006 20:03:53 +0100
Subject: [Dev-luatex] Very simple sample?
References: <20061130112217.CBA9028000B1@server.aanhet.net>	<001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>	<4576B271.9090906@elvenkind.com>	<003501c71934$f2f70fe0$29830e3e@PROPIETAFMI1K9>	<005601c71959$f7c205a0$29830e3e@PROPIETAFMI1K9>	<457701AB.9080404@wxs.nl><4577074A.2080605@elvenkind.com>
	<45783CD0.7040302@elvenkind.com>
Message-ID: <001301c71afb$c575be90$83830e3e@PROPIETAFMI1K9>

Taco:

> Attached is a provisional excerpt of the coming book on LuaTeX.
> It is ConTeXt source, but it should not be hard to get it to compile
> under LaTeX or plain if you don't have ConTeXt installed.

I've ConTeXt installed (in fact, the full TeX Live 2005).
So, no problem.

>From the excerpt:

> From now on, whenever \LUATEX\ has to open a text file, it will call
> the function \type{file_opener} instead of actually opening the file
> itself. It stores the returned table in its memory, and it uses the
> function attached to the \type{reader} label for reading lines.

If I've understood correctly, this applies to files not
yet opened, but usually the encoding is stated inside
the file (ie, the file is already open).

> function latin_to_utf (line)
>   local s = "";
>   for c in string.bytes(line) do
>      s = s .. unicode.utf8.char(c)
>   end
>   return s
> end

But where is the input encoding? Apparently this changes
the "Unicode" representation from 8 bits (thus limited to
the range 0-255, which is certainly latin-1) to utf-8,
without reencoding anything (say, iso greek, koi8, macos,
jis, etc.). I've googled for docs on unicode for lua but
I haven't found anything particularly useful. 

Javier



From taco at elvenkind.com  Sat Dec  9 12:43:25 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 09 Dec 2006 12:43:25 +0100
Subject: [Dev-luatex] Very simple sample?
In-Reply-To: <001301c71afb$c575be90$83830e3e@PROPIETAFMI1K9>
References: <20061130112217.CBA9028000B1@server.aanhet.net>	<001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>	<4576B271.9090906@elvenkind.com>	<003501c71934$f2f70fe0$29830e3e@PROPIETAFMI1K9>	<005601c71959$f7c205a0$29830e3e@PROPIETAFMI1K9>	<457701AB.9080404@wxs.nl><4577074A.2080605@elvenkind.com>	<45783CD0.7040302@elvenkind.com>
	<001301c71afb$c575be90$83830e3e@PROPIETAFMI1K9>
Message-ID: <457AA15D.3060204@elvenkind.com>


Hi Javier,

Javier Bezos wrote:
> Taco:
> 
>>From the excerpt:
> 
>>From now on, whenever \LUATEX\ has to open a text file, it will call
>>the function \type{file_opener} instead of actually opening the file
>>itself. It stores the returned table in its memory, and it uses the
>>function attached to the \type{reader} label for reading lines.
> 
> 
> If I've understood correctly, this applies to files not
> yet opened, but usually the encoding is stated inside
> the file (ie, the file is already open).

That is not a problem, because *you* are the one opening the
file; it is completely under your control. Assume for a moment
if you will that all files begin a first line that contains a
statement like this:

   % encoding=iso-8859-2

Here is an example of how you could extract that information
from the files, without confusing the rest of the system
(-- is a line comment that you can use in pure .lua files):

   -- input:  a file object
   -- output: a string representing that file's encoding
   function find_file_encoding (f)
     -- read a line
     local line = f:read()
     -- reset the file offset  (not really needed in this case)
     f:seek("set",0)
     -- search for encoding
     -- %w == all alphanumerics,
     -- %- = a literal dash
     local fchar, lchar, match = line:find("encoding=([%w%-]+)")
     if fchar == nil then
       -- no encoding found, return a default
       return "iso-8859-1"
     else
       return match
     end
   end

You now have to hook this new function into 'file_opener', like so:

   function file_opener (fname)
     local f = io.open(fname)
     if f == nil then
       return nil
     else
       local encoding = find_file_encoding(f)
       local readline = function ()
         local s = "";
         local line = f:read()
         if line == nil  then
           return nil
         else
           return latin_to_utf(line, encoding)
         end
       end
       return { reader = readline }
     end
   end

Now you know the file encoding and can make decisions based
on that information (by changing 'latin_to_utf', see below).

> But where is the input encoding? Apparently this changes
> the "Unicode" representation from 8 bits (thus limited to
> the range 0-255, which is certainly latin-1) to utf-8,
> without reencoding anything (say, iso greek, koi8, macos,
> jis, etc.). I've googled for docs on unicode for lua but
> I haven't found anything particularly useful. 

An 8-bit encoding is nothing more than a mapping of 256 byte
values into unicode code points. In the simplest case, this
is an identity map, and the only difference is in file format
representation (that is what happened in my original example).

In a somewhat less trivial case, there is an array of 256 values.
Such an array could look like this:

   -- table values are borrowed from ConTeXt.
   encodings = {
     ["iso-8859-2"] = { [0] =
         0x0000, 0x0001, 0x0002, 0x0003, 0x0004, 0x0005, 0x0006, 0x0007,
         --
         -- 240 other entries
         --
	0x0159, 0x016F, 0x00FA, 0x0171, 0x00FC, 0x00FD, 0x0163, 0x02D9
   }


Having this table, we can now rewrite the 'latin_to_utf' function:

   function latin_to_utf (line,enc)
     local s = "";
     for c in string.bytes(line) do
       if encodings[enc] ~= nil then
         s = s .. unicode.utf8.char(encodings[enc][c])
       else
         -- default is pass-through
         s = s .. unicode.utf8.char(c)
       end
     end
     return s
   end

The resulting lua code is in the attached .lua file (with the
full table, of course).

For 16-bit encodings etc. the remapping is more complex of course,
but this example should hopefully be enough to give you an idea
of how to approach it.

There is one big caveat I should warn about: because the current LuaTeX
is essentially a merge of Aleph and pdfTeX, you almost certainly need
an OTP to convert the resulting unicode values back to font encodings.
And that problem is why the font and hyphenation subsystems need to be
tackled next, before anything else. Which is what I'll start on next
monday.

Best,

Taco
-------------- next part --------------
A non-text attachment was scrubbed...
Name: fenc-example.lua
Type: application/lua
Size: 3330 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-luatex/attachments/20061209/a7ba43cb/attachment.bin 

From lists at texytipografia.com  Sat Dec  9 14:25:41 2006
From: lists at texytipografia.com (Javier Bezos)
Date: Sat, 9 Dec 2006 14:25:41 +0100
Subject: [Dev-luatex] Very simple sample?
References: <20061130112217.CBA9028000B1@server.aanhet.net>	<001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>	<4576B271.9090906@elvenkind.com>	<003501c71934$f2f70fe0$29830e3e@PROPIETAFMI1K9>	<005601c71959$f7c205a0$29830e3e@PROPIETAFMI1K9>	<457701AB.9080404@wxs.nl><4577074A.2080605@elvenkind.com>	<45783CD0.7040302@elvenkind.com>
	<001301c71afb$c575be90$83830e3e@PROPIETAFMI1K9>
	<457AA15D.3060204@elvenkind.com>
Message-ID: <000a01c71b95$8cbc0d80$ca870e3e@PROPIETAFMI1K9>

Taco:

Thank you very much. Things are now clearer. One of
my goals is to see if my Mem package may be used in
luatex and how to make use of the new features.

Javier

=======================

>> 
>>>From the excerpt:
>> 
>>>From now on, whenever \LUATEX\ has to open a text file, it will call
>>>the function \type{file_opener} instead of actually opening the file
>>>itself. It stores the returned table in its memory, and it uses the
>>>function attached to the \type{reader} label for reading lines.
>> 
>> 
>> If I've understood correctly, this applies to files not
>> yet opened, but usually the encoding is stated inside
>> the file (ie, the file is already open).
> 
> That is not a problem, because *you* are the one opening the
> file; it is completely under your control. Assume for a moment
> if you will that all files begin a first line that contains a
> statement like this:
> 
>   % encoding=iso-8859-2
> 
> Here is an example of how you could extract that information
> from the files, without confusing the rest of the system
> (-- is a line comment that you can use in pure .lua files):
> 
>   -- input:  a file object
>   -- output: a string representing that file's encoding
>   function find_file_encoding (f)
>     -- read a line
>     local line = f:read()
>     -- reset the file offset  (not really needed in this case)
>     f:seek("set",0)
>     -- search for encoding
>     -- %w == all alphanumerics,
>     -- %- = a literal dash
>     local fchar, lchar, match = line:find("encoding=([%w%-]+)")
>     if fchar == nil then
>       -- no encoding found, return a default
>       return "iso-8859-1"
>     else
>       return match
>     end
>   end
> 
> You now have to hook this new function into 'file_opener', like so:
> 
>   function file_opener (fname)
>     local f = io.open(fname)
>     if f == nil then
>       return nil
>     else
>       local encoding = find_file_encoding(f)
>       local readline = function ()
>         local s = "";
>         local line = f:read()
>         if line == nil  then
>           return nil
>         else
>           return latin_to_utf(line, encoding)
>         end
>       end
>       return { reader = readline }
>     end
>   end
> 
> Now you know the file encoding and can make decisions based
> on that information (by changing 'latin_to_utf', see below).
> 
>> But where is the input encoding? Apparently this changes
>> the "Unicode" representation from 8 bits (thus limited to
>> the range 0-255, which is certainly latin-1) to utf-8,
>> without reencoding anything (say, iso greek, koi8, macos,
>> jis, etc.). I've googled for docs on unicode for lua but
>> I haven't found anything particularly useful. 
> 
> An 8-bit encoding is nothing more than a mapping of 256 byte
> values into unicode code points. In the simplest case, this
> is an identity map, and the only difference is in file format
> representation (that is what happened in my original example).
> 
> In a somewhat less trivial case, there is an array of 256 values.
> Such an array could look like this:
> 
>   -- table values are borrowed from ConTeXt.
>   encodings = {
>     ["iso-8859-2"] = { [0] =
>         0x0000, 0x0001, 0x0002, 0x0003, 0x0004, 0x0005, 0x0006, 0x0007,
>         --
>         -- 240 other entries
>         --
> 0x0159, 0x016F, 0x00FA, 0x0171, 0x00FC, 0x00FD, 0x0163, 0x02D9
>   }
> 
> 
> Having this table, we can now rewrite the 'latin_to_utf' function:
> 
>   function latin_to_utf (line,enc)
>     local s = "";
>     for c in string.bytes(line) do
>       if encodings[enc] ~= nil then
>         s = s .. unicode.utf8.char(encodings[enc][c])
>       else
>         -- default is pass-through
>         s = s .. unicode.utf8.char(c)
>       end
>     end
>     return s
>   end
> 
> The resulting lua code is in the attached .lua file (with the
> full table, of course).
> 
> For 16-bit encodings etc. the remapping is more complex of course,
> but this example should hopefully be enough to give you an idea
> of how to approach it.
> 
> There is one big caveat I should warn about: because the current LuaTeX
> is essentially a merge of Aleph and pdfTeX, you almost certainly need
> an OTP to convert the resulting unicode values back to font encodings.
> And that problem is why the font and hyphenation subsystems need to be
> tackled next, before anything else. Which is what I'll start on next
> monday.
> 
> Best,
> 
> Taco
>

From franc_milo at yahoo.fr  Sat Dec  9 21:04:22 2006
From: franc_milo at yahoo.fr (=?iso-8859-1?q?fran=FFffffe7ois=20franc?=)
Date: Sat, 9 Dec 2006 21:04:22 +0100 (CET)
Subject: [Dev-luatex] (no subject)
Message-ID: <20061209200422.28487.qmail@web86905.mail.ukl.yahoo.com>

Hi

I'm trying to create format file, I use the low-level 

	luatex -ini "plain.tex \\dump"

I get the following error message

! You have to increase POOLSIZE.

 this would create the file plain.fmt

any help would be taken gratefully



	

	
		
___________________________________________________________________________ 
Yahoo! Mail r?invente le mail ! D?couvrez le nouveau Yahoo! Mail et son interface r?volutionnaire.
http://fr.mail.yahoo.com

From franc_milo at yahoo.fr  Sat Dec  9 21:05:59 2006
From: franc_milo at yahoo.fr (=?iso-8859-1?q?fran=FFffffe7ois=20franc?=)
Date: Sat, 9 Dec 2006 21:05:59 +0100 (CET)
Subject: [Dev-luatex] (no subject)
Message-ID: <909355.92301.qm@web86904.mail.ukl.yahoo.com>

Hi

I'm trying to create format file, I use the low-level 

	luatex -ini "plain.tex \\dump"

to create the file plain.fmt

I get the following error message:

! You have to increase POOLSIZE.

any help would be taken gratefully


	

	
		
___________________________________________________________________________ 
D?couvrez une nouvelle fa?on d'obtenir des r?ponses ? toutes vos questions ! 
Profitez des connaissances, des opinions et des exp?riences des internautes sur Yahoo! Questions/R?ponses 
http://fr.answers.yahoo.com

From ishamid at colostate.edu  Sat Dec  9 21:57:07 2006
From: ishamid at colostate.edu (Idris Samawi Hamid)
Date: Sat, 09 Dec 2006 13:57:07 -0700
Subject: [Dev-luatex] lambda format
Message-ID: <op.tka8hhuknx1yh1@walayah-main>

Javier,

How do you make/use the lamda format in luatex? Thnx in advanvce!

Best
Idris

-- 
Professor Idris Samawi Hamid
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

--
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From ishamid at colostate.edu  Sat Dec  9 21:57:41 2006
From: ishamid at colostate.edu (Idris Samawi Hamid)
Date: Sat, 09 Dec 2006 13:57:41 -0700
Subject: [Dev-luatex] lambda format
Message-ID: <op.tka8hhuknx1yh1@walayah-main>

Javier,

How do you make/use the lamda format in luatex? Thnx in advanvce!

Best
Idris

-- 
Professor Idris Samawi Hamid
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

--
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From taco at elvenkind.com  Sat Dec  9 23:14:22 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 09 Dec 2006 23:14:22 +0100
Subject: [Dev-luatex] (no subject)
In-Reply-To: <909355.92301.qm@web86904.mail.ukl.yahoo.com>
References: <909355.92301.qm@web86904.mail.ukl.yahoo.com>
Message-ID: <457B353E.3070607@elvenkind.com>

fran?ffffe7ois franc wrote:
> Hi
> 
> I'm trying to create format file, I use the low-level 
> 
> 	luatex -ini "plain.tex \\dump"
> 
> to create the file plain.fmt

This means it can't find texmf.cnf

Best, Taco

From taco at elvenkind.com  Sun Dec 10 11:17:11 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 10 Dec 2006 11:17:11 +0100
Subject: [Dev-luatex] Very simple sample?
In-Reply-To: <000a01c71b95$8cbc0d80$ca870e3e@PROPIETAFMI1K9>
References: <20061130112217.CBA9028000B1@server.aanhet.net>	<001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>	<4576B271.9090906@elvenkind.com>	<003501c71934$f2f70fe0$29830e3e@PROPIETAFMI1K9>	<005601c71959$f7c205a0$29830e3e@PROPIETAFMI1K9>	<457701AB.9080404@wxs.nl><4577074A.2080605@elvenkind.com>	<45783CD0.7040302@elvenkind.com>	<001301c71afb$c575be90$83830e3e@PROPIETAFMI1K9>	<457AA15D.3060204@elvenkind.com>
	<000a01c71b95$8cbc0d80$ca870e3e@PROPIETAFMI1K9>
Message-ID: <457BDEA7.70509@elvenkind.com>

Javier Bezos wrote:
> Taco:
> 
> Thank you very much. Things are now clearer. One of
> my goals is to see if my Mem package may be used in
> luatex and how to make use of the new features.

That is great, please keep us posted. Being forced to
write these tutorial-like things is actually very good,
so do not feel embarassed about asking clarifications.

Best,
Taco

From mus47 at voila.fr  Sun Dec 10 13:51:55 2006
From: mus47 at voila.fr (mus47 at voila.fr)
Date: Sun, 10 Dec 2006 13:51:55 +0100 (CET)
Subject: [Dev-luatex] luatex in windows
Message-ID: <28579728.1165755115881.JavaMail.www@wwinf4102>

I try to use luatex on windows, but I have the following error message:

This is luaTeX, Version 3.141592-0.1-alpha-20060818 (Web2C 7.5.5)
kpathsea: Running mktexfmt luatex.fmt
luatex.exe: fatal: kpathsea: CreateProcess() failed for `mktexfmt 0o??ex.fmt' (E
rror c1)
.

Can you please help me. 

I have the followin tex version:

MiKTeX-TeX 2.4.1603 (3.141592) (MiKTeX 2.4)
Copyright (C) 1982 by D. E. Knuth; all rights are reserved.
TeX is a trademark of the American Mathematical Society.



From lists at texytipografia.com  Sun Dec 10 18:15:55 2006
From: lists at texytipografia.com (Javier Bezos)
Date: Sun, 10 Dec 2006 18:15:55 +0100
Subject: [Dev-luatex] luatex in windows
References: <28579728.1165755115881.JavaMail.www@wwinf4102>
Message-ID: <003301c71c7e$f1abbe90$73830e3e@PROPIETAFMI1K9>



>I try to use luatex on windows, but I have the following error message:
>
> This is luaTeX, Version 3.141592-0.1-alpha-20060818 (Web2C 7.5.5)
> kpathsea: Running mktexfmt luatex.fmt
> luatex.exe: fatal: kpathsea: CreateProcess() failed for `mktexfmt
> 0o??ex.fmt' (E
> rror c1)

According to Taco:

> * luatex-snapshot-20061208-win32.zip
>           A cross-compiled (mingw) windows binary. This is a web2c
>           based binary, so it needs a texmf.cnf file (It will NOT
>           work if you have only miktex installed).

I'm not using MikTeX, but the TeX Live, so I presume this is the
problem.

Javier


From lists at texytipografia.com  Sun Dec 10 18:16:23 2006
From: lists at texytipografia.com (Javier Bezos)
Date: Sun, 10 Dec 2006 18:16:23 +0100
Subject: [Dev-luatex] lambda format
References: <op.tka8hhuknx1yh1@walayah-main>
Message-ID: <003401c71c7e$f3b968e0$73830e3e@PROPIETAFMI1K9>

Idris,

> How do you make/use the lamda format in luatex? Thnx
> in advanvce!

I'm not sure what you mean by lambda in luatex. Lambda is
just aleph + latex. What I've done is to copy latex.ini as
lualatex.ini and modify it so that it calls lualatex.ltx instead
of latex.ltx; this files is like latex.ltx but with a few changes
to avoid the loading of hyphenation patterns and several
non utf-8 chars. I then modified fmtutil.cnf and run fmtutil.
I'm using the TeX Live 2005, a web2c based distribution
with kpathsea (which seems to be required by the luatex
binary for Windows).

As for Mem, I'm still unable to use it because the model for
input encondings in luatex is so different (and I'm not sure
it's the right model, but I have to make further experiments).
In Mem they are based on ocp's, so that omega/aleph has
direct control on them and can be changed freely.

Javier


From ishamid at colostate.edu  Sun Dec 10 19:02:05 2006
From: ishamid at colostate.edu (Idris Samawi Hamid)
Date: Sun, 10 Dec 2006 11:02:05 -0700
Subject: [Dev-luatex] lambda format
In-Reply-To: <003401c71c7e$f3b968e0$73830e3e@PROPIETAFMI1K9>
References: <op.tka8hhuknx1yh1@walayah-main>
	<003401c71c7e$f3b968e0$73830e3e@PROPIETAFMI1K9>
Message-ID: <op.tkcu1rhunx1yh1@walayah-main>

Hi Javier,

On Sun, 10 Dec 2006 10:16:23 -0700, Javier Bezos  
<lists at texytipografia.com> wrote:

> Idris,
>
>> How do you make/use the lamda format in luatex? Thnx
>> in advanvce!
>
> I'm not sure what you mean by lambda in luatex. Lambda is
> just aleph + latex. What I've done is to copy latex.ini as
> lualatex.ini and modify it so that it calls lualatex.ltx instead
> of latex.ltx; this files is like latex.ltx but with a few changes
> to avoid the loading of hyphenation patterns and several
> non utf-8 chars.

Yes, that's what I'm looking for, because just doing

luatex --ini *latex.ltx \dump

complains about non-unicode characters etc. I still have some old Lamda  
files I need to compile from time to time and need to be able  to process  
them through luaTeX (which, even in alpha, is now the most stable  
implementation of aleph/omega).

Can you post or send me your files/procedure?

> I then modified fmtutil.cnf and run fmtutil.
> I'm using the TeX Live 2005, a web2c based distribution
> with kpathsea (which seems to be required by the luatex
> binary for Windows).
>
> As for Mem, I'm still unable to use it because the model for
> input encondings in luatex is so different (and I'm not sure
> it's the right model, but I have to make further experiments).
> In Mem they are based on ocp's, so that omega/aleph has
> direct control on them and can be changed freely.

Some of the omega input primitives are missing but you can replace those  
by otp's I think.

Best
Idris

-- 
Professor Idris Samawi Hamid
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

--
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From arthur.reutenauer at normalesup.org  Sun Dec 10 19:10:52 2006
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Sun, 10 Dec 2006 19:10:52 +0100
Subject: [Dev-luatex] lambda format
In-Reply-To: <op.tkcu1rhunx1yh1@walayah-main>
References: <op.tka8hhuknx1yh1@walayah-main>
	<003401c71c7e$f3b968e0$73830e3e@PROPIETAFMI1K9>
	<op.tkcu1rhunx1yh1@walayah-main>
Message-ID: <20061210181051.GA5866@clipper.ens.fr>

> Can you post or send me your files/procedure?

  I think the files are of interest for everyone; please post it to the
list.

	Arthur

From lists at texytipografia.com  Mon Dec 11 10:00:54 2006
From: lists at texytipografia.com (Javier Bezos)
Date: Mon, 11 Dec 2006 10:00:54 +0100
Subject: [Dev-luatex] lambda format
References: <op.tka8hhuknx1yh1@walayah-main><003401c71c7e$f3b968e0$73830e3e@PROPIETAFMI1K9>
	<op.tkcu1rhunx1yh1@walayah-main>
Message-ID: <009a01c71d03$0557dc60$73830e3e@PROPIETAFMI1K9>


> Can you post or send me your files/procedure?

Actually, I'm not sure about the procedure I followed,
since I made some things by trial and error. Further,
configuring a kpathsea based system is not exactly
easy (the way it search files is chaotic and you
never know which file tex will read, when there are
several one with the same name).

IIRC, what I did was:
- Copy the luatex binary to /bin/win32 inside my
TeXLive directory.
- Copy latex.ini to the local texmf as lualatex.ini
and change \input latex.ltx by \input lualatex.ltx.
This file is used by fmtutil. (Usually, the directory
would be texmf-local/tex/luatex.)
- Copy latex.ltx to the local texmf as lualatex.ltx
and comment out (or remove):

\ifnum\inputlineno=\m at ne\else
  \lccode`\^^9d=`\i    % dotted I
  \uccode`\^^9d=`\^^9d % dotted I
  \lccode`\^^9e=`\^^9e % d-bar
  \uccode`\^^9e=`\^^d0 % d-bar
\fi

which appears _twice_. This was explained by Taco
himself. I commented the following lines out, too:

\InputIfFileExists{hyphen.cfg}
           {\typeout{===========================================^^J%
                      Local configuration file hyphen.cfg used^^J%
                     ===========================================}%
             \def\@addtofilelist##1{\xdef\@filelist{\@filelist,##1}}%
           }
          {\input{hyphen.ltx}}

- Find fmtutil.cnf which kpsewhich, ie:

kpsewhich fmtutil.cnf

(it will return the address of the file) and add the
following lines to it:

luatex     luatex    -    *aleph.ini
lualatex   luatex    -    *lualatex.ini

- Rebuild the ls-R databases with texhash.
- Build the formats with:

fmtutil --byfmt=luatex
fmtutil --byfmt=lualatex

I think I haven't missed any step. You might need to close
the system prompt and then reopen it at some of these steps.

I hope this helps.

Javier




From mus47 at voila.fr  Mon Dec 11 20:00:10 2006
From: mus47 at voila.fr (mus47 at voila.fr)
Date: Mon, 11 Dec 2006 20:00:10 +0100 (CET)
Subject: [Dev-luatex] simple sample
Message-ID: <24078216.1165863610814.JavaMail.www@wwinf4103>

Hi,
I am trying to test luatex, I am seeking for a simple sample document.
Thanks



From pragma at wxs.nl  Mon Dec 11 23:34:38 2006
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 11 Dec 2006 23:34:38 +0100
Subject: [Dev-luatex] simple sample
In-Reply-To: <24078216.1165863610814.JavaMail.www@wwinf4103>
References: <24078216.1165863610814.JavaMail.www@wwinf4103>
Message-ID: <457DDCFE.7030905@wxs.nl>

mus47 at voila.fr wrote:
> Hi,
> I am trying to test luatex, I am seeking for a simple sample document.
>   
see archive of this list 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From lists at texytipografia.com  Tue Dec 12 10:17:46 2006
From: lists at texytipografia.com (Javier Bezos)
Date: Tue, 12 Dec 2006 10:17:46 +0100
Subject: [Dev-luatex] lua in ocp's [was Very simple sample?]
References: <20061130112217.CBA9028000B1@server.aanhet.net>	<001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>	<4576B271.9090906@elvenkind.com>	<003501c71934$f2f70fe0$29830e3e@PROPIETAFMI1K9>	<005601c71959$f7c205a0$29830e3e@PROPIETAFMI1K9>	<457701AB.9080404@wxs.nl>
	<4577074A.2080605@elvenkind.com>
	<005101c71a1e$1e10d870$f3880e3e@PROPIETAFMI1K9>
	<457947E7.7090604@elvenkind.com>
Message-ID: <006d01c71dce$68a17a30$fd860e3e@PROPIETAFMI1K9>

Taco:

>> which just wraps every letter inside \dolua{ }. However,
>> the letters are silently ignored (but "print" prints it in
>> the console, so lua is working). I presume the problem
>> is "tex.print" is like a line in the tex file, while ocp's
>> are applied after expansion, so when \dolua is executed
>> it's too late and the line is sent to nowhere.
> 
> That is roughly what happens, yes. I have to look into this
> at some point, because silently disappearing output is a bit
> unfriendly, but the precise interaction between otp processing
> and input states is not the easiest bit of TeX to comprehend,
> so it may take a while.

OK. What I was wondering was if the whole OCP mechanim
could be replaced by lua scripts. Since lua can be
embedded in TeX, the transformations would be under the
control of TeX and not as external files, unmodifiable
at run time. So, I intented to write a OTP passing
directly the OCP buffer to lua. Of course, that has
some disadvantages since the result may need further
expansion to reprocess it. Or perhaps not? This is what
I liked to investigate.

Javier

From taco at elvenkind.com  Tue Dec 12 13:00:55 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 12 Dec 2006 13:00:55 +0100
Subject: [Dev-luatex] lua in ocp's [was Very simple sample?]
In-Reply-To: <006d01c71dce$68a17a30$fd860e3e@PROPIETAFMI1K9>
References: <20061130112217.CBA9028000B1@server.aanhet.net>	<001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>	<4576B271.9090906@elvenkind.com>	<003501c71934$f2f70fe0$29830e3e@PROPIETAFMI1K9>	<005601c71959$f7c205a0$29830e3e@PROPIETAFMI1K9>	<457701AB.9080404@wxs.nl>	<4577074A.2080605@elvenkind.com>	<005101c71a1e$1e10d870$f3880e3e@PROPIETAFMI1K9>	<457947E7.7090604@elvenkind.com>
	<006d01c71dce$68a17a30$fd860e3e@PROPIETAFMI1K9>
Message-ID: <457E99F7.9050302@elvenkind.com>

Javier Bezos wrote:
> 
> OK. What I was wondering was if the whole OCP mechanim
> could be replaced by lua scripts. Since lua can be

On the todo list is an item about writing lua scripts
to interpret OTP files directly, but that is at least
a few months away.

Best,
Taco

From lists at texytipografia.com  Tue Dec 12 13:09:44 2006
From: lists at texytipografia.com (Javier Bezos)
Date: Tue, 12 Dec 2006 13:09:44 +0100
Subject: [Dev-luatex] lua in ocp's [was Very simple sample?]
References: <20061130112217.CBA9028000B1@server.aanhet.net>	<001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>	<4576B271.9090906@elvenkind.com>	<003501c71934$f2f70fe0$29830e3e@PROPIETAFMI1K9>	<005601c71959$f7c205a0$29830e3e@PROPIETAFMI1K9>	<457701AB.9080404@wxs.nl>	<4577074A.2080605@elvenkind.com>	<005101c71a1e$1e10d870$f3880e3e@PROPIETAFMI1K9>	<457947E7.7090604@elvenkind.com>
	<006d01c71dce$68a17a30$fd860e3e@PROPIETAFMI1K9>
	<457E99F7.9050302@elvenkind.com>
Message-ID: <007c01c71de6$6f0dd6d0$ef820e3e@PROPIETAFMI1K9>

Taco:

>> OK. What I was wondering was if the whole OCP mechanim
>> could be replaced by lua scripts. Since lua can be
> 
> On the todo list is an item about writing lua scripts
> to interpret OTP files directly, but that is at least
> a few months away.

And about applying lua scripts at the point where
OCPs are applied? Remember one of the goals of OCPs is
to apply transformations _after_ expansion, so that:

\def\charf{f}
\def\chari{i}
\charf\chari

could be properly handled as fi. This is very important
in "contextual" scripts like Arabic or Devanaghari.

BTW, I was even wondering if that would allow fixing the
\string and \char issues (I would say bugs) in the OCP
mechanism.

Javier

From taco at elvenkind.com  Tue Dec 12 13:21:31 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 12 Dec 2006 13:21:31 +0100
Subject: [Dev-luatex] lua in ocp's [was Very simple sample?]
In-Reply-To: <007c01c71de6$6f0dd6d0$ef820e3e@PROPIETAFMI1K9>
References: <20061130112217.CBA9028000B1@server.aanhet.net>	<001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>	<4576B271.9090906@elvenkind.com>	<003501c71934$f2f70fe0$29830e3e@PROPIETAFMI1K9>	<005601c71959$f7c205a0$29830e3e@PROPIETAFMI1K9>	<457701AB.9080404@wxs.nl>	<4577074A.2080605@elvenkind.com>	<005101c71a1e$1e10d870$f3880e3e@PROPIETAFMI1K9>	<457947E7.7090604@elvenkind.com>	<006d01c71dce$68a17a30$fd860e3e@PROPIETAFMI1K9>	<457E99F7.9050302@elvenkind.com>
	<007c01c71de6$6f0dd6d0$ef820e3e@PROPIETAFMI1K9>
Message-ID: <457E9ECB.8050601@elvenkind.com>

Javier Bezos wrote:
> Taco:
> 
> 
>>>OK. What I was wondering was if the whole OCP mechanim
>>>could be replaced by lua scripts. Since lua can be
>>
>>On the todo list is an item about writing lua scripts
>>to interpret OTP files directly, but that is at least
>>a few months away.
> 
> And about applying lua scripts at the point where
> OCPs are applied? 

Yes, of course. It would be pointless otherwise.

Taco

From geoffw at cis.upenn.edu  Tue Dec 12 16:35:43 2006
From: geoffw at cis.upenn.edu (Geoffrey Alan Washburn)
Date: Tue, 12 Dec 2006 10:35:43 -0500
Subject: [Dev-luatex] Using UTF8 in PDF mode?
Message-ID: <457ECC4F.6010200@cis.upenn.edu>


    As I understand it, by default luatex accepts its input in UTF8.  
However, the manual if \pdfoutput=1, fonts are limited to 256 glyphs.  
What is the expected idiom for massaging the input so that non-ASCII 
UTF8 symbols can be displayed sensibly? Should I be putting a hook into 
the reader callback?  Or is there intended to be a more specific 
mechanism in the future? 

    Put another way, I have a LaTeX document that in conjunction with 
the inputenc package and pdftex-1.40.x-beta handles the occurrences of 
UTF8 in my document by replacing them with macros I've defined.  
However, I don't expect inputenc works with lua{la}tex, and I'm trying 
to decide how to best port my document over.

    Thanks for any suggestions!

-- 
[Geoff Washburn|geoffw at cis.upenn.edu|http://www.cis.upenn.edu/~geoffw/]

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.ntg.nl/mailman/private/dev-luatex/attachments/20061212/bc28132b/attachment.html 

From pragma at wxs.nl  Tue Dec 12 19:27:03 2006
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 12 Dec 2006 19:27:03 +0100
Subject: [Dev-luatex] lua in ocp's [was Very simple sample?]
In-Reply-To: <006d01c71dce$68a17a30$fd860e3e@PROPIETAFMI1K9>
References: <20061130112217.CBA9028000B1@server.aanhet.net>
	<001701c7192e$44b6a900$29830e3e@PROPIETAFMI1K9>
	<4576B271.9090906@elvenkind.com>
	<003501c71934$f2f70fe0$29830e3e@PROPIETAFMI1K9>
	<005601c71959$f7c205a0$29830e3e@PROPIETAFMI1K9>
	<457701AB.9080404@wxs.nl> <4577074A.2080605@elvenkind.com>
	<005101c71a1e$1e10d870$f3880e3e@PROPIETAFMI1K9>
	<457947E7.7090604@elvenkind.com>
	<006d01c71dce$68a17a30$fd860e3e@PROPIETAFMI1K9>
Message-ID: <457EF477.9040906@wxs.nl>

Javier Bezos wrote:
> Taco:
>
>   
>>> which just wraps every letter inside \dolua{ }. However,
>>> the letters are silently ignored (but "print" prints it in
>>> the console, so lua is working). I presume the problem
>>> is "tex.print" is like a line in the tex file, while ocp's
>>> are applied after expansion, so when \dolua is executed
>>> it's too late and the line is sent to nowhere.
>>>       
>> That is roughly what happens, yes. I have to look into this
>> at some point, because silently disappearing output is a bit
>> unfriendly, but the precise interaction between otp processing
>> and input states is not the easiest bit of TeX to comprehend,
>> so it may take a while.
>>     
>
> OK. What I was wondering was if the whole OCP mechanim
> could be replaced by lua scripts. Since lua can be
> embedded in TeX, the transformations would be under the
> control of TeX and not as external files, unmodifiable
> at run time. So, I intented to write a OTP passing
> directly the OCP buffer to lua. Of course, that has
> some disadvantages since the result may need further
> expansion to reprocess it. Or perhaps not? This is what
> I liked to investigate.
>
>   
lua callbacks will be avialable for each stage: input, after expansion, at various stages of list building, par building, page building, shipout etc

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Tue Dec 12 22:03:53 2006
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 12 Dec 2006 22:03:53 +0100
Subject: [Dev-luatex] Using UTF8 in PDF mode?
In-Reply-To: <457ECC4F.6010200@cis.upenn.edu>
References: <457ECC4F.6010200@cis.upenn.edu>
Message-ID: <457F1939.5090006@wxs.nl>

Geoffrey Alan Washburn wrote:
>
>    As I understand it, by default luatex accepts its input in UTF8.  
> However, the manual if \pdfoutput=1, fonts are limited to 256 glyphs.  
> What is the expected idiom for massaging the input so that non-ASCII 
> UTF8 symbols can be displayed sensibly? Should I be putting a hook 
> into the reader callback?  Or is there intended to be a more specific 
> mechanism in the future?
>    Put another way, I have a LaTeX document that in conjunction with 
> the inputenc package and pdftex-1.40.x-beta handles the occurrences of 
> UTF8 in my document by replacing them with macros I've defined.  
> However, I don't expect inputenc works with lua{la}tex, and I'm trying 
> to decide how to best port my document over.
you can try to use active characters but better is to wait till open type support (and more advanced type 1 support) is available; the first usabla beta's are scheduled around eurotex (may 2007); 

keep in mind that luatex is *not* stable, under active development, and that we take the freedome to change every aspect of it; we plan to have stable versions available end-of-2007; implementing macro based solutions and expecting them to work in the future is kind of dangerous and esp upcoming versions will probably be broken in many aspects (esp when tex's font mechanisms are being replaced / extended) 

so, porting documents is not a good idea right now; also, till we have complete open type support and more, luatex is hardly a replacement for pdftex; if you are in a hurry with utf and latex is unsufficient, you may want to look into xetex 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From root at aanhet.net  Tue Dec 12 22:22:11 2006
From: root at aanhet.net (Cron Daemon)
Date: Tue, 12 Dec 2006 22:22:11 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@server> /home/luatex/luatex-svn
Message-ID: <20061212212211.5BF9D28000B9@server.aanhet.net>

U  luatex/src/libs/lua51/lstrlib.c
 Checked out revision 212.

From geoffw at cis.upenn.edu  Wed Dec 13 00:56:21 2006
From: geoffw at cis.upenn.edu (Geoffrey Alan Washburn)
Date: Tue, 12 Dec 2006 18:56:21 -0500
Subject: [Dev-luatex] Using UTF8 in PDF mode?
In-Reply-To: <457F1939.5090006@wxs.nl>
References: <457ECC4F.6010200@cis.upenn.edu> <457F1939.5090006@wxs.nl>
Message-ID: <457F41A5.2060601@cis.upenn.edu>

Hans Hagen wrote:
> you can try to use active characters but better is to wait till open 
> type support (and more advanced type 1 support) is available; the 
> first usabla beta's are scheduled around eurotex (may 2007);
> keep in mind that luatex is *not* stable, under active development, 
> and that we take the freedome to change every aspect of it; we plan to 
> have stable versions available end-of-2007; implementing macro based 
> solutions and expecting them to work in the future is kind of 
> dangerous and esp upcoming versions will probably be broken in many 
> aspects (esp when tex's font mechanisms are being replaced / extended)
> so, porting documents is not a good idea right now; also, till we have 
> complete open type support and more, luatex is hardly a replacement 
> for pdftex; if you are in a hurry with utf and latex is unsufficient, 
> you may want to look into xetex
    Actually, as far as Unicode/UTF8 support goes pdftex and LaTeX are 
sufficient.  The issue is more that they are lacking in the 
programmability space.  However, given the May 2007 estimate on a beta 
release, it may still be better for me to just get by the with existing 
hacks around the problem.

    Thanks for the information!


-- 
[Geoff Washburn|geoffw at cis.upenn.edu|http://www.cis.upenn.edu/~geoffw/]

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.ntg.nl/mailman/private/dev-luatex/attachments/20061213/7d951bee/attachment.html 

From root at aanhet.net  Wed Dec 13 12:22:17 2006
From: root at aanhet.net (Cron Daemon)
Date: Wed, 13 Dec 2006 12:22:17 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@server> /home/luatex/luatex-svn
Message-ID: <20061213112217.F014D28000A3@server.aanhet.net>

U  luatex/src/libs/lua51/liolib.c
 Checked out revision 213.

From mus47 at voila.fr  Fri Dec 15 13:03:37 2006
From: mus47 at voila.fr (mus47 at voila.fr)
Date: Fri, 15 Dec 2006 13:03:37 +0100 (CET)
Subject: [Dev-luatex]  luatex in windows
Message-ID: <8162597.1166184217651.JavaMail.www@wwinf4106>

I have installed TeX Live but there is always the same problem.

>>I try to use luatex on windows, but I have the following error message:
>>
>> This is luaTeX, Version 3.141592-0.1-alpha-20060818 (Web2C 7.5.5)
>> kpathsea: Running mktexfmt luatex.fmt
>> luatex.exe: fatal: kpathsea: CreateProcess() failed for `mktexfmt
> 0o??ex.fmt' (E
>> rror c1)
>According to Taco:
>> * luatex-snapshot-20061208-win32.zip
>>           A cross-compiled (mingw) windows binary. This is a web2c
>>           based binary, so it needs a texmf.cnf file (It will NOT
>>          work if you have only miktex installed).
>I'm not using MikTeX, but the TeX Live, so I presume this is the problem.
>Javier




From taco at elvenkind.com  Fri Dec 15 13:42:21 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 15 Dec 2006 13:42:21 +0100
Subject: [Dev-luatex] luatex in windows
In-Reply-To: <8162597.1166184217651.JavaMail.www@wwinf4106>
References: <8162597.1166184217651.JavaMail.www@wwinf4106>
Message-ID: <4582982D.7030001@elvenkind.com>

mus47 at voila.fr wrote:
> I have installed TeX Live but there is always the same problem.
> 
> 
>>>I try to use luatex on windows, but I have the following error message:
>>>
>>>This is luaTeX, Version 3.141592-0.1-alpha-20060818 (Web2C 7.5.5)
>>>kpathsea: Running mktexfmt luatex.fmt
>>>luatex.exe: fatal: kpathsea: CreateProcess() failed for `mktexfmt
>>0o??ex.fmt' (Error c1)

Thse strange characters in the fmt string look a bit suspicious, but
I am not sure what is causing that, so it could be harmless or fixed
already. You are using a rather old snapshot, so I suggest fetching a
new one, regardless).

This program mktexfmt is in your path?
Do you know what it does exactly?
Can you actually create a format using

   luatex -ini plain   (enter \dump at the prompt)

or does that not work either?

Best,

Taco

From pragma at wxs.nl  Fri Dec 15 16:21:14 2006
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 15 Dec 2006 16:21:14 +0100
Subject: [Dev-luatex] luatex in windows
In-Reply-To: <8162597.1166184217651.JavaMail.www@wwinf4106>
References: <8162597.1166184217651.JavaMail.www@wwinf4106>
Message-ID: <4582BD6A.8040309@wxs.nl>

mus47 at voila.fr wrote:
> I have installed TeX Live but there is always the same problem.
>   
the windows version is completely unrelated to tex live, actually, 
luatex is completely independent of any library

the mingw version runs ok here

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From taco at elvenkind.com  Fri Dec 15 17:57:33 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 15 Dec 2006 17:57:33 +0100
Subject: [Dev-luatex] source stability
Message-ID: <4582D3FD.7020702@elvenkind.com>

Hi,

A message for those of you that regularly compile luatex from the
repository: the current stuff compiles, but the executable is
severely broken. I already know this, it is work in progress.
I'll let you know when things are usable again.

Best,
Taco

From root at aanhet.net  Fri Dec 15 22:22:15 2006
From: root at aanhet.net (Cron Daemon)
Date: Fri, 15 Dec 2006 22:22:15 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@server> /home/luatex/luatex-svn
Message-ID: <20061215212215.255032800088@server.aanhet.net>

U  luatex/src/libs/lua51/liolib.c
 U  luatex/src/texk/web2c/luatexdir/Makefile.in
 U  luatex/src/texk/web2c/luatexdir/luatex.ch
 U  luatex/src/texk/web2c/luatexdir/luatex.web
 U  luatex/src/texk/web2c/luatexdir/lua/luatex.c
 U  luatex/src/texk/web2c/luatexdir/ptexlib.h
 U  luatex/src/texk/web2c/luatexdir/font/writet3.c
 U  luatex/src/texk/web2c/luatexdir/font/mapfile.c
 A  luatex/src/texk/web2c/luatexdir/font/texfont.c
 A  luatex/src/texk/web2c/luatexdir/font/tfmofm.c
 A  luatex/src/texk/web2c/luatexdir/font/tfmofm.c.backup
 A  luatex/src/texk/web2c/luatexdir/font/texfont.h
 U  luatex/src/texk/web2c/luatexdir/luatex.defines
 Checked out revision 216.

From taco at elvenkind.com  Wed Dec 20 16:17:58 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 20 Dec 2006 16:17:58 +0100
Subject: [Dev-luatex] [NTG-context] new debian context, upload to Debian
In-Reply-To: <20061220145825.GA13605@gamma.logic.tuwien.ac.at>
References: <20061219180411.GC10246@gamma.logic.tuwien.ac.at>
	<4588F2CF.3080502@elvenkind.com>
	<20061220125304.GB2807@gamma.logic.tuwien.ac.at>
	<45893913.1000808@elvenkind.com>
	<20061220145825.GA13605@gamma.logic.tuwien.ac.at>
Message-ID: <45895426.3030509@elvenkind.com>



Norbert Preining wrote:
> 
> I know, I will call the package
> 	luatex-snapshot
> upload it to experimental, and people will get a warning about its
> usage. It is ok this way, not many people will get it from experimental
> anyway, but I want to have it around for testing, and better early
> adoption then late work.
> 
> The point is that there are people who don't want to compile things but
> still are able to test stuff. For those luatex-snapshot pacakged will
> serve, too (and for me, because I don't want to have packages not under
> package management control on my system ;-)
> 

That's ok, thanks (dropped the old CCs, added dev-luatex).

Taco

From preining at logic.at  Wed Dec 20 16:23:29 2006
From: preining at logic.at (Norbert Preining)
Date: Wed, 20 Dec 2006 16:23:29 +0100
Subject: [Dev-luatex] [NTG-context] new debian context, upload to Debian
In-Reply-To: <45895426.3030509@elvenkind.com>
References: <20061219180411.GC10246@gamma.logic.tuwien.ac.at>
	<4588F2CF.3080502@elvenkind.com>
	<20061220125304.GB2807@gamma.logic.tuwien.ac.at>
	<45893913.1000808@elvenkind.com>
	<20061220145825.GA13605@gamma.logic.tuwien.ac.at>
	<45895426.3030509@elvenkind.com>
Message-ID: <20061220152329.GA15899@gamma.logic.tuwien.ac.at>

Hi Taco! Hi luatex Devs!

On Mit, 20 Dez 2006, Taco Hoekwater wrote:
> Norbert Preining wrote:
> >
> >I know, I will call the package
> >	luatex-snapshot
> >upload it to experimental, and people will get a warning about its
> >usage. It is ok this way, not many people will get it from experimental
> >anyway, but I want to have it around for testing, and better early
> >adoption then late work.
> >
> >The point is that there are people who don't want to compile things but
> >still are able to test stuff. For those luatex-snapshot pacakged will
> >serve, too (and for me, because I don't want to have packages not under
> >package management control on my system ;-)
> >
> 
> That's ok, thanks (dropped the old CCs, added dev-luatex).

Ok, perfect, can someone put me on the dev-luatex list, if you think
it make sense?  I was working with omega until it was dead (ok, you know 
what I mean), then aleph (same same, but different), so I hope that
luatex does not go the same way. 

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
SLUGGAN (n.)
A lurid facial bruise which everyone politely omits to mention because
it's obvious that you had a punch-up with your spouse last night - but
which into a door. It is useless to volunteer the true explanation
because nobody will believe it.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Wed Dec 20 16:38:24 2006
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 20 Dec 2006 16:38:24 +0100
Subject: [Dev-luatex] [NTG-context] new debian context, upload to Debian
In-Reply-To: <20061220152329.GA15899@gamma.logic.tuwien.ac.at>
References: <20061219180411.GC10246@gamma.logic.tuwien.ac.at>
	<4588F2CF.3080502@elvenkind.com>
	<20061220125304.GB2807@gamma.logic.tuwien.ac.at>
	<45893913.1000808@elvenkind.com>
	<20061220145825.GA13605@gamma.logic.tuwien.ac.at>
	<45895426.3030509@elvenkind.com>
	<20061220152329.GA15899@gamma.logic.tuwien.ac.at>
Message-ID: <458958F0.5080608@elvenkind.com>


Hi Norbert,

Norbert Preining wrote:
> 
> Ok, perfect, can someone put me on the dev-luatex list, if you think
> it make sense?  I was working with omega until it was dead (ok, you know 
> what I mean), then aleph (same same, but different), so I hope that
> luatex does not go the same way. 

You are on the list now, welcome.

Best,
Taco

From pragma at wxs.nl  Wed Dec 20 22:32:29 2006
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 20 Dec 2006 22:32:29 +0100
Subject: [Dev-luatex] [NTG-context] new debian context, upload to Debian
In-Reply-To: <20061220152329.GA15899@gamma.logic.tuwien.ac.at>
References: <20061219180411.GC10246@gamma.logic.tuwien.ac.at>
	<4588F2CF.3080502@elvenkind.com>
	<20061220125304.GB2807@gamma.logic.tuwien.ac.at>
	<45893913.1000808@elvenkind.com>
	<20061220145825.GA13605@gamma.logic.tuwien.ac.at>
	<45895426.3030509@elvenkind.com>
	<20061220152329.GA15899@gamma.logic.tuwien.ac.at>
Message-ID: <4589ABED.4070904@wxs.nl>

Norbert Preining wrote:
> Hi Taco! Hi luatex Devs!
>
> On Mit, 20 Dez 2006, Taco Hoekwater wrote:
>   
>> Norbert Preining wrote:
>>     
>>> I know, I will call the package
>>> 	luatex-snapshot
>>> upload it to experimental, and people will get a warning about its
>>> usage. It is ok this way, not many people will get it from experimental
>>> anyway, but I want to have it around for testing, and better early
>>> adoption then late work.
>>>
>>> The point is that there are people who don't want to compile things but
>>> still are able to test stuff. For those luatex-snapshot pacakged will
>>> serve, too (and for me, because I don't want to have packages not under
>>> package management control on my system ;-)
>>>
>>>       
>> That's ok, thanks (dropped the old CCs, added dev-luatex).
>>     
>
> Ok, perfect, can someone put me on the dev-luatex list, if you think
> it make sense?  I was working with omega until it was dead (ok, you know 
> what I mean), then aleph (same same, but different), so I hope that
> luatex does not go the same way. 
>   
don't worry; first of all part of the software development by taco is paid for by a grant (oriental tex project); next, luatex is a prelude for pdftex version 2 (version 1 == good old tex will be frozen i.e. no more new features, only big fixes); and on top of that, taco and i are pretty determined to get it done

(there will be some reports in tugboat/maps about experiences so far; next year, context will ship with so called context mkiv code (extra zip) which reimplements some parts in lua; by then, we need to discuss a few distribution things because luatex may demand a different setup) 



Hans  

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From ishamid at colostate.edu  Thu Dec 21 21:29:52 2006
From: ishamid at colostate.edu (Idris Samawi Hamid)
Date: Thu, 21 Dec 2006 13:29:52 -0700
Subject: [Dev-luatex] [NTG-context] new debian context, upload to Debian
In-Reply-To: <20061220152329.GA15899@gamma.logic.tuwien.ac.at>
References: <20061219180411.GC10246@gamma.logic.tuwien.ac.at>
	<4588F2CF.3080502@elvenkind.com>
	<20061220125304.GB2807@gamma.logic.tuwien.ac.at>
	<45893913.1000808@elvenkind.com>
	<20061220145825.GA13605@gamma.logic.tuwien.ac.at>
	<45895426.3030509@elvenkind.com>
	<20061220152329.GA15899@gamma.logic.tuwien.ac.at>
Message-ID: <op.tkxeve0gnx1yh1@walayah-main>

Hi Norbert,

On Wed, 20 Dec 2006 08:23:29 -0700, Norbert Preining <preining at logic.at>  
wrote:

> Ok, perfect, can someone put me on the dev-luatex list, if you think
> it make sense?  I was working with omega until it was dead (ok, you know
> what I mean), then aleph (same same, but different), so I hope that
> luatex does not go the same way.

Note that luatex is, for all practical purposes, the successor to aleph.  
That is, the relevant/most useful portions of aleph have been ported to  
luatex, aleph documents can already be run by luatex, and when luatex is  
ready for prime time aleph will be obsolete.

Put another way: Omega is a separate project but Aleph has basically  
merged with the luatex project.

Best
Idris

-- 
Professor Idris Samawi Hamid
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

--
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From preining at logic.at  Fri Dec 22 10:01:31 2006
From: preining at logic.at (Norbert Preining)
Date: Fri, 22 Dec 2006 10:01:31 +0100
Subject: [Dev-luatex] various luatex comments
In-Reply-To: <op.tkxeve0gnx1yh1@walayah-main> <4589C5DD.7070904@wxs.nl>
	<4589ABED.4070904@wxs.nl>
References: <op.tkxeve0gnx1yh1@walayah-main> <4589C5DD.7070904@wxs.nl>
	<20061219180411.GC10246@gamma.logic.tuwien.ac.at>
	<4588F2CF.3080502@elvenkind.com>
	<20061220125304.GB2807@gamma.logic.tuwien.ac.at>
	<45893913.1000808@elvenkind.com>
	<20061220145825.GA13605@gamma.logic.tuwien.ac.at>
	<45895426.3030509@elvenkind.com>
	<20061220152329.GA15899@gamma.logic.tuwien.ac.at>
	<4589ABED.4070904@wxs.nl>
Message-ID: <20061222090131.GC9611@gamma.logic.tuwien.ac.at>

Hi all!

(Answer only to ML as all of you are subscribed)

On Mit, 20 Dez 2006, Hans Hagen wrote:
> don't worry; first of all part of the software development by taco is paid 
> for by a grant (oriental tex project); next, luatex is a prelude for pdftex 

Great to hear this! Congratulations Taco!

> (there will be some reports in tugboat/maps about experiences so far; next 
> year, context will ship with so called context mkiv code (extra zip) which 
> reimplements some parts in lua; by then, we need to discuss a few 
> distribution things because luatex may demand a different setup) 

I am here ...

On Don, 21 Dez 2006, Hans Hagen wrote:
> some time next year you may test how well the kpse replacement that we 
> have for luatex performs/integrates (includes reading from zip files, 
> luabased config files, etc).

As soon as you have something to test, I try.

On Don, 21 Dez 2006, Idris Samawi Hamid wrote:
> Note that luatex is, for all practical purposes, the successor to aleph.  
> That is, the relevant/most useful portions of aleph have been ported to  
> luatex, aleph documents can already be run by luatex, and when luatex is  
> ready for prime time aleph will be obsolete.

Hi Idris, nice to see you here!! Recently I was on the Italian TeX User
Group meeting and asked about Giuseppe Ballotti (aleph) and everyone
told me that they are sorry but it seems he is missing (or lost interest
at all). Good to hear that we have a post-aleph!

> Put another way: Omega is a separate project but Aleph has basically  
> merged with the luatex project.

Well, omega1 was more or less integrated into aleph, and omega2 is
something in theory, AFAIS

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
SHOEBURYNESS (abs.n.) The vague uncomfortable feeling you get when
sitting on a seat which is still warm from somebody else's bottom.
			--- Douglas Adams, The Meaning of Liff

From root at aanhet.net  Fri Dec 22 22:22:06 2006
From: root at aanhet.net (Cron Daemon)
Date: Fri, 22 Dec 2006 22:22:06 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@server> /home/luatex/luatex-svn
Message-ID: <20061222212206.21EE12800093@server.aanhet.net>

svn: PROPFIND request failed on '/svn/luatex'
svn: PROPFIND of '/svn/luatex': could not connect to server (https://scm.foundry.supelec.fr)

From root at aanhet.net  Sat Dec 23 12:22:13 2006
From: root at aanhet.net (Cron Daemon)
Date: Sat, 23 Dec 2006 12:22:13 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@server> /home/luatex/luatex-svn
Message-ID: <20061223112213.53FE928000BF@server.aanhet.net>

svn: PROPFIND request failed on '/svn/luatex'
svn: PROPFIND of '/svn/luatex': could not connect to server (https://scm.foundry.supelec.fr)

From root at aanhet.net  Sat Dec 23 16:22:15 2006
From: root at aanhet.net (Cron Daemon)
Date: Sat, 23 Dec 2006 16:22:15 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@server> /home/luatex/luatex-svn
Message-ID: <20061223152215.CA24028000BF@server.aanhet.net>

A  luatex/make.cross
 U  luatex/src/texk/web2c/luatexdir/Makefile.in
 U  luatex/src/texk/web2c/luatexdir/luatex.ch
 U  luatex/src/texk/web2c/luatexdir/luatex.web
 U  luatex/src/texk/web2c/luatexdir/lua/lcallbacklib.c
 U  luatex/src/texk/web2c/luatexdir/lua/luatex.c
 A  luatex/src/texk/web2c/luatexdir/lua/lfontlib.c
 U  luatex/src/texk/web2c/luatexdir/lua/luastuff.c
 U  luatex/src/texk/web2c/luatexdir/luatex-api.h
 U  luatex/src/texk/web2c/luatexdir/font/writet3.c
 U  luatex/src/texk/web2c/luatexdir/font/vfpacket.c
 A  luatex/src/texk/web2c/luatexdir/font/luafont.c
 U  luatex/src/texk/web2c/luatexdir/font/mapfile.c
 U  luatex/src/texk/web2c/luatexdir/font/writefont.c
 U  luatex/src/texk/web2c/luatexdir/font/texfont.c
 U  luatex/src/texk/web2c/luatexdir/font/tfmofm.c
 U  luatex/src/texk/web2c/luatexdir/font/texfont.h
 U  luatex/src/texk/web2c/luatexdir/luatex.defines
 A  luatex/make.linux
 U  luatex/manual/luatexref-t.tex
 U  luatex/manual/luatexref-t.pdf
 Checked out revision 217.

From root at aanhet.net  Sat Dec 23 22:22:09 2006
From: root at aanhet.net (Cron Daemon)
Date: Sat, 23 Dec 2006 22:22:09 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@server> /home/luatex/luatex-svn
Message-ID: <20061223212209.60B822800095@server.aanhet.net>

U  luatex/src/texk/web2c/luatexdir/lua/ltexlib.c
 Checked out revision 218.

From root at aanhet.net  Thu Dec 28 16:22:10 2006
From: root at aanhet.net (Cron Daemon)
Date: Thu, 28 Dec 2006 16:22:10 +0100 (CET)
Subject: [Dev-luatex] Cron <luatex@server> /home/luatex/luatex-svn
Message-ID: <20061228152210.5CE2F2800084@server.aanhet.net>

A  luatex/src/libs/luapeg
 A  luatex/src/libs/luapeg/lpeg.c
 U  luatex/src/texk/kpathsea/xgetcwd.c
 U  luatex/src/texk/web2c/luatexdir/Makefile.in
 U  luatex/src/texk/web2c/luatexdir/lua/lcallbacklib.c
 U  luatex/src/texk/web2c/luatexdir/lua/luastuff.c
 U  luatex/src/texk/web2c/luatexdir/luatexlib.mk
 U  luatex/src/texk/web2c/luatexdir/luatex-api.h
 U  luatex/src/texk/web2c/luatexdir/font/luafont.c
 U  luatex/src/texk/web2c/luatexdir/font/texfont.c
 U  luatex/src/texk/web2c/luatexdir/font/tfmofm.c
 A  luatex/src/texk/web2c/luatexdir/font/dofont.c
 Checked out revision 221.

