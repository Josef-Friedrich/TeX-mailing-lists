From khaledhosny at eglug.org  Wed Mar 31 10:57:47 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 31 Mar 2010 10:57:47 +0200
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <y2p803fcee31003301907l3269fcdcjdeda943d88507df4@mail.gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
 <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
 <803fcee31003300515v1ff83334uf1d99e9e018a9314@mail.gmail.com>
 <20100330134241.GB3788@khaled-laptop>
 <y2p803fcee31003301907l3269fcdcjdeda943d88507df4@mail.gmail.com>
Message-ID: <20100331085747.GB2417@khaled-laptop>

On Wed, Mar 31, 2010 at 10:07:08AM +0800, Diederick C. Niehorster wrote:
> On Tue, Mar 30, 2010 at 9:42 PM, Khaled Hosny <khaledhosny at eglug.org> wrote:
> > Could you please get the current luaotfload from git, I fixed this
> > particular bug yesterday I guess (luaotfload should ignore
> > otfl-names.lua if it can't find it), also when you update I'll get
> > proper line numbers in error messages (right now your errors don't match
> > my working copy).
> 
> Hi Khaled,
> 
> Just updated, reran the tests (note the \typeout{--1--} so the font
> setting can easily be found):
> ----
> \documentclass[11pt]{article}
> 
> \usepackage{lipsum}
> \usepackage{fontspec}
> \typeout{--1--}
> \setmainfont[Ligatures=TeX]{Arno Pro}
> %\setmainfont[Ligatures=TeX]{Arno Pro Italic}
> %\setmainfont[Ligatures=TeX]{Adobe Caslon Pro}
> 
> \begin{document}
> \lipsum
> \end{document}
> ----
> 
> Logs are attached in a zip, for
> \setmainfont[Ligatures=TeX]{Arno Pro} - works
> \setmainfont[Ligatures=TeX]{Arno Pro Italic} - font not found

Right now, I don't think you can get the italic font this way, as we
only check for font family, I've to re-think about this.

> \setmainfont[Ligatures=TeX]{Adobe Caslon Pro} - compare to nil error

OK, I got it, the font has only on entry in the optical size field, so
there is no max or min sizes, I've to check the spec again and see what
they say about this.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer


-- 
To unsubscribe, reply using "remove me" as the subject.


From wspr81 at gmail.com  Tue Mar 30 10:07:00 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Tue, 30 Mar 2010 18:37:00 +1030
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
Message-ID: <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>

On 30/03/2010, at 4:17 PM, Diederick C. Niehorster wrote:

> %\setmainfont[Mapping=tex-text,Ligatures=Common]{TeX Gyre Heros}
> \setmainfont[Mapping=tex-text,Ligatures=Common]{Arno Pro}

This is going to be a problem, I can tell.
LuaTeX uses a different mechanism to get TeX ligatures; you want to use "Ligatures=TeX" instead of "Mapping=tex-text". (The former will also work in XeTeX.)

I guess I'll have to write some code to get "Mapping=tex-text" interpreted as "Ligatures=TeX" in the interests of compatibility with old XeTeX documents.

(P.S.  You should never have to write "Ligatures=Common". I need to write something about that in the manual.)

> {\addfontfeature{RawFeature=+swsh}\textit{Test}}

What does  "\addfontfeature{Style=Swash}" say?

-- Will

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From wspr81 at gmail.com  Thu Mar 25 00:44:59 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Thu, 25 Mar 2010 10:14:59 +1030
Subject: [lltx] Re: Request to mailing list XeTeX rejected
In-Reply-To: <4BAA7824.7010103@telecom-bretagne.eu>
References: <mailman.0.1269461042.7251.xetex@tug.org> <4BAA7824.7010103@telecom-bretagne.eu>
Message-ID: <03C85696-61BC-474F-9B20-F2125883BBCA@gmail.com>

On 25/03/2010, at 7:07 AM, Elie Roux wrote:

> That will be great... but TeXLive 2010 is approaching, and a lot of users would benefit from a xunicode working with LuaTeX. You already have the patch, what does prevent you from submiting it to the CTAN? That's the point that I cannot even try to understand...

Is the only problem at present with xunicode and LuaTeX that the package checks for the presence of the \notXeTeXformat check at the beginning of the file?

W

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From wspr81 at gmail.com  Fri Mar 26 00:11:41 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Fri, 26 Mar 2010 09:41:41 +1030
Subject: [lltx] Re: xunicode & euenc
In-Reply-To: <4BAB8281.4080603@telecom-bretagne.eu>
References: <4BAB8281.4080603@telecom-bretagne.eu>
Message-ID: <B9C221A2-F681-42F5-9D4C-1C7207A1C8AD@gmail.com>

On 26/03/2010, at 2:04 AM, Elie Roux wrote:

> For your information, here is the answer of Ross, which conforts me in the idea of forking xunicode is the only option for it to work properly with LuaTeX...

Not sure if posting his private answer on a public forum is such a good idea, but thanks for forwarding it.  I can definitely see where Ross is coming from.  For our work with euenc, then, I have a couple of proposals:

* Let's drop the idea of the "extras package" which provides TIPA support and so on. I think this is very niche functionality that will hardly see an audience. Remember that documents these days will usually be encoded in unicode anyway; the big advantage to xunicode is the backwards compatibility aspect providing unicode definitions for the standard LaTeX accent commands. TIPA is not among these.

* Try to counteract any conflicts that may occur with (new) euenc plus old xunicode. It might be that we can only incorporate xunicode into the EU2 encoding to avoid problems with backwards compatibility in XeTeX. If Ross is stepping back for supplying xunicode for LuaTeX, I see no problem with incorporating its features into euenc.

* Still, let's research what xunicode is doing that might be XeTeX-specific and report back to Ross what differences there are (if any) for LuaTeX (including things like \iffontchar for features that don't exist yet). I would be pretty surprised if the package didn't work flawlessly as is, but I might have missed an edge case.

I think there's no point inventing a wrapper package for xunicode.

I'd like to aim to have something concrete to talk to Ross about at TUG 2010, which gives me lots of time to think about the things above. Considering I haven't even got fontspec ready yet I'd say I need the time :)

Any thoughts?

-- Will

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From dcnieho at gmail.com  Wed Mar 31 04:10:21 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Wed, 31 Mar 2010 10:10:21 +0800
Subject: [lltx] Re: [fontspec] selecting font features has no effect?
In-Reply-To: <c90bffcf-d9fe-4994-bb6c-8bbf27ee586e@k17g2000yqb.googlegroups.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
	 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
	 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
	 <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
	 <20100330125211.GD2934@khaled-laptop>
	 <4BB20CD2.6030507@telecom-bretagne.eu>
	 <c90bffcf-d9fe-4994-bb6c-8bbf27ee586e@k17g2000yqb.googlegroups.com>
Message-ID: <w2u803fcee31003301910za7d4b7b8r2764bff07383b7bf@mail.gmail.com>

Hi Georg,

On Wed, Mar 31, 2010 at 12:36 AM, Georg Duffner <g.duffner at gmail.com> wrote:
> At the moment, it is setting all ligatures as expected. When I process
> your example I get all ligatures and swash letters in testcase 1, but
> not in case 2 (same warning as with you). Case 3 gives the same error
> as with you. See my file at www.unet.univie.ac.at/~a9806618/lipsum_test_lualatex.pdf

Interesting your ligatures are showing up! When I run plain luatex,
e.g. from http://github.com/khaledhosny/luaotfload/tree/master/tests,
the ligatures do appear.

See attached.

Best,
Dee


-- 
To unsubscribe, reply using "remove me" as the subject.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: texligatures.log
Type: application/octet-stream
Size: 8636 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100331/1cbb6452/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: texligatures.pdf
Type: application/pdf
Size: 12133 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100331/1cbb6452/attachment.pdf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: texligatures.tex
Type: application/x-tex
Size: 118 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100331/1cbb6452/attachment.tex>

From mpg at elzevir.fr  Tue Mar 30 13:33:32 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Tue, 30 Mar 2010 13:33:32 +0200
Subject: [lltx] packages list
In-Reply-To: <eba574421003300051q1b589db0u42366039262f97aa@mail.gmail.com>
References: <4BB169ED.9010605@elzevir.fr> <eba574421003300051q1b589db0u42366039262f97aa@mail.gmail.com>
Message-ID: <4BB1E18C.6060201@elzevir.fr>

?lie Roux a ?crit :
> 2010/3/30 Manuel P?gouri?-Gonnard <mpg at elzevir.fr>:
>>> luatextra:      loads luaextra+luatexbase+luaotfload; goodies (gen, luatex)
> 
> I think a good idea would be to make it load xltxtra under xetex... wdyt?
> 
>>> xltxtra:        loads basics & fontspec; goodies & patches (ltx, xetex)
>>>                 Plan: extend it to luatex, maybe merge luatextra in later.
> 
> If I remember correctly, a check is done for luatex, it doesn't do
> anything in this case (no error), for compatibility. Maybe it should
> load luatextra too?
> 
In addition to Will's objection, I think it's too early to do this, since the
packages are quite different now: luatextra only loads luaotfload (not fontspec
yet) and doesn't provide all the goodies and patches that xltxtra provides. But
later, we might consider something like this (probably replacing the xltxtra
with the bits of it, if Will splits it as he suggests).

>>> luainputenc:    input encoding & compat for fontenc (ltx, luatex)
>>>                 Plan: add more modes, inc. one without active chars.
> 
> There is already one mode without active characters... but I don't
> really see the point. Unless you mean really translate 8-bit encoding
> to unicode? I don't think it's worth spending some time on it if you
> want my opinion... the LIRC encoding works well and is fully
> compatible;

I don't agree, there are lots of problems with active characters, see the post
"Cyrillic in \directlua" from 3 days ago on luatex@ for an example. Yep, my idea
is to translate to real non-active Unicode.

> if we change it for real unicode, it will be less
> compatible and some people may stick with old encodings (to use them
> with OTF for example), and this seems totally wrong.
> 
I'd like to implement many modes, document there advantages and limitations in
detail, and let the user choose.

> Sounds good! Except for luafontenc, but I already gave my opinion...
> 
Can you please remind me?

Manuel.

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From dcnieho at gmail.com  Tue Mar 30 13:53:23 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Tue, 30 Mar 2010 19:53:23 +0800
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
	 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
	 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
Message-ID: <803fcee31003300453s46748a96y6b4481ebff8c2404@mail.gmail.com>

Hi Will,

On Tue, Mar 30, 2010 at 7:49 PM, Diederick C. Niehorster
<dcnieho at gmail.com> wrote:
> On Tue, Mar 30, 2010 at 4:07 PM, Will Robertson <wspr81 at gmail.com> wrote:
>> This is going to be a problem, I can tell.
>> LuaTeX uses a different mechanism to get TeX ligatures; you want to use "Ligatures=TeX" instead of "Mapping=tex-text". (The former will also work in XeTeX.)
>
> Done, works for both XeTeX and LuaTeX.

Oops, here i meant that they both swallow the option, the luatex
output is not correct however.

Also, testing with TeX Gyre Heros reveals the same output regarding
ligatures, i dont think it has any of the other features requested).

Sorry, sent that email off to quickly, hungry.

Best,
Dee

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From wspr81 at gmail.com  Mon Mar  8 10:39:24 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Mon, 8 Mar 2010 20:09:24 +1030
Subject: [lltx] fontspec push
Message-ID: <9C59BA4B-29E3-4E46-AAD8-C4E50E76F6D7@gmail.com>

Hi,

Found some time to concentrate on fontspec for a little while this evening. (Khaled, I'm sorry to keep doing this to you, but does this work under LuaTeX yet? I'm still having issues with luaotfload and external fonts on Mac OS X. I've been working with the code that was breaking before, so I might have fixed things up accidentally-on-purpose.)

Added the following "programmer's interface" with, I suspect, more to come eventually. Does this all make sense? More importantly, does fontspec even compile documents for you still?


\documentclass{article}
\usepackage{fontspec}
\begin{document}

\ExplSyntaxOn

\fontspec{texgyrepagella-regular.otf}
\fontspec_if_script:nTF {cyrl} {True}{False}/
\fontspec_if_language:nTF {ROM} {True}{False?}/
\fontspec_if_language:nnTF {latn} {ROM} {True}{False?}/
\fontspec_if_feature:nTF {+pnum} {True} {False?}/
\fontspec_if_feature:nnnTF {latn} {ROM} {+pnum} {True} {False?}/

\par
Test~script:~
\fontspec[Script = Cyrillic]{texgyrepagella-regular.otf}
\fontspec_if_current_script:nTF {cyrl} {True}{False?}/
\fontspec_if_current_script:nTF {latn} {True?}{False}/

\par
Test~language:~
\fontspec[Language = Turkish]{texgyrepagella-regular.otf}
\fontspec_if_current_language:nTF {TRK} {True}{False?}/
\fontspec_if_current_language:nTF {ROM} {True?}{False}/

\end{document}


Oh, forgot to mention "\fontspec_if_fontspec_font:TF" and "\fontspec_if_opentype:TF" in there, which I suspect are probably way less useful.

-- Will






From dcnieho at gmail.com  Wed Mar 31 04:18:27 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Wed, 31 Mar 2010 10:18:27 +0800
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <eba574421003300525x5bd69ed1sd752ad05eba9e36a@mail.gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
	 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
	 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
	 <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
	 <803fcee31003300515v1ff83334uf1d99e9e018a9314@mail.gmail.com>
	 <eba574421003300525x5bd69ed1sd752ad05eba9e36a@mail.gmail.com>
Message-ID: <v2x803fcee31003301918q43d3dcaaza0edc1affc632092@mail.gmail.com>

Hi ?lie,

On Tue, Mar 30, 2010 at 8:25 PM, ?lie Roux
<elie.roux at telecom-bretagne.eu> wrote:
> 2010/3/30 Diederick C. Niehorster <dcnieho at gmail.com>:
>>
>> ! LuaTeX error ...9/texmf-dist/tex/luatex/luaotfload/otfl-font-nms.lua:76: atte
>> mpt to compare nil with number.
>
> Interesting... I'll take a look at it soon, I hope I'll have time...

Ok, see the other message for tests with the updated lualoadotf and
find my otfl-names.lua attached (note that this otfl-names.lua is not
made with the most up to date luaotfload, see below).

>> I thus seem to have multiple weird problems (this and the
>> mkfontnamedb.lua silently dying in the middle of its operation when
>> the --sys switch is given) with otfl,
>
> This is actually weird, I'll try to reproduce it, but it doesn't seem easy...

Hmm, its getting more consistent. Right now, it silently stops
processing at the same point, no matter whether --sys is provided or
not. See the attached logs (which are almost exactly the same, i ran a
diff on them).

Hmm, just tried again, now it did go through sees _sys2 in the zip.. Weird!
I can send you any fonts if that would help.

Best,
Dee
-------------- next part --------------
A non-text attachment was scrubbed...
Name: log_nosys.zip
Type: application/zip
Size: 20316 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100331/bd569924/attachment.zip>

From elie.roux at telecom-bretagne.eu  Tue Mar 30 14:03:46 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Tue, 30 Mar 2010 15:03:46 +0300
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
	 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
	 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
Message-ID: <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>

2010/3/30 Diederick C. Niehorster <dcnieho at gmail.com>:
>
> --- otfl-names.lua:
> {
> ? ["checksum"]="F342E0175B3F2F8E22AF2FA67EB88D92",
> ? ["familyname"]="ArnoPro",
> ? ["filename"]="arnopro-italic.otf",
> ? ["fontname"]="ArnoPro-Italic",
> ? ["fontstyle_name"]="Italic",
> ? ["fullname"]="Arno Pro Italic",
> ? ["names"]={
> ? ?["family"]="arnopro",
> ? ?["fullname"]="ArnoPro-Italic",
> ? ?["psname"]="ArnoPro-Italic",
> ? ?["subfamily"]="Italic",
> ? },
> ? ["size"]={ 120, 140, 110 },
> ? ["slant"]=-11,
> ? ["weight"]=400,
> ? ["width"]=5,
> ?}

Which otfl-names is it? Are you sure it is the one actually used by
luaotfload? It never looks into the current directory (maybe it
should?) and it looks first in the local directory then in the sys
directory. Please try to remove all otfl-names.lua and to install only
one in the local directory to see if you have the same result.

Thank you,
-- 
Elie

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From elie.roux at telecom-bretagne.eu  Fri Mar 26 09:20:30 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Fri, 26 Mar 2010 10:20:30 +0200
Subject: [lltx] Re: xunicode & euenc
In-Reply-To: <B9C221A2-F681-42F5-9D4C-1C7207A1C8AD@gmail.com>
References: <4BAB8281.4080603@telecom-bretagne.eu>
	 <B9C221A2-F681-42F5-9D4C-1C7207A1C8AD@gmail.com>
Message-ID: <eba574421003260120i1e2033b3g960d92ceda09f2f8@mail.gmail.com>

2010/3/26 Will Robertson <wspr81 at gmail.com>:
>
> * Let's drop the idea of the "extras package" which provides TIPA support and so on. I think this is very niche functionality that will hardly see an audience. Remember that documents these days will usually be encoded in unicode anyway; the big advantage to xunicode is the backwards compatibility aspect providing unicode definitions for the standard LaTeX accent commands. TIPA is not among these.

Definitely agreed!

> * Try to counteract any conflicts that may occur with (new) euenc plus old xunicode. It might be that we can only incorporate xunicode into the EU2 encoding to avoid problems with backwards compatibility in XeTeX. If Ross is stepping back for supplying xunicode for LuaTeX, I see no problem with incorporating its features into euenc.

In fact, one of the problems are that the loading is made in the
Options part of fontenc... meaning no ProvidesPackage, no
RequirePackage, etc. so we just can't input xunicode.sty in
euxenc.def... that's why I had do modify it. Unless you have some
hacks to counter this? Should we hack some macros to pretend we're not
in the Options section?

> * Still, let's research what xunicode is doing that might be XeTeX-specific and report back to Ross what differences there are (if any) for LuaTeX (including things like \iffontchar for features that don't exist yet). I would be pretty surprised if the package didn't work flawlessly as is, but I might have missed an edge case.

Ok.

> I think there's no point inventing a wrapper package for xunicode.

Definitely.

Thank you,
-- 
Elie

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From elie.roux at telecom-bretagne.eu  Tue Mar 30 14:25:29 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Tue, 30 Mar 2010 15:25:29 +0300
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <803fcee31003300515v1ff83334uf1d99e9e018a9314@mail.gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
	 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
	 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
	 <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
	 <803fcee31003300515v1ff83334uf1d99e9e018a9314@mail.gmail.com>
Message-ID: <eba574421003300525x5bd69ed1sd752ad05eba9e36a@mail.gmail.com>

2010/3/30 Diederick C. Niehorster <dcnieho at gmail.com>:
>
> ! LuaTeX error ...9/texmf-dist/tex/luatex/luaotfload/otfl-font-nms.lua:76: atte
> mpt to compare nil with number.

Interesting... I'll take a look at it soon, I hope I'll have time...

> I thus seem to have multiple weird problems (this and the
> mkfontnamedb.lua silently dying in the middle of its operation when
> the --sys switch is given) with otfl,

This is actually weird, I'll try to reproduce it, but it doesn't seem easy...

> how much is it tested on windows
> (and is there any reason things should work different on windows)? No
> worries, I'm just curious and want to try things out. Hope the bug
> reports are not coming at a too early stage of development ;)

I tested it under windows/cygwin, but I don't have any cygwin-free
windows... And your bugreport is actually really useful in this
period!

Thank you,
-- 
Elie

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From wspr81 at gmail.com  Tue Mar 30 10:02:37 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Tue, 30 Mar 2010 18:32:37 +1030
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
Message-ID: <191FAE42-ED46-44B8-80CB-E6AA1F59F986@gmail.com>

On 30/03/2010, at 4:17 PM, Diederick C. Niehorster wrote:

> Also, a feature request: when a \fontspec related command is given an
> option it does not recognize, could it write a warning? I was messing
> with 'Rawfeature' for a while, only later figuring out it should be
> 'RawFeature'. Warnings would have helped and are useful in general
> when input is not what it should be.

The code to spit out the warning message was commented out; I've fixed that up now.

In the interests of being overly annoying, this is a warning message that will halt the typesetting compilation. I might think about toning this down in the future.

-- Will

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From khaledhosny at eglug.org  Wed Mar 31 19:41:07 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 31 Mar 2010 19:41:07 +0200
Subject: [lltx] Re: [fontspec] selecting font features has no effect?
In-Reply-To: <w2n803fcee31003310219if83f4b56jbd63fd5bdfaa51bb@mail.gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
 <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
 <20100330125211.GD2934@khaled-laptop>
 <4BB20CD2.6030507@telecom-bretagne.eu>
 <c90bffcf-d9fe-4994-bb6c-8bbf27ee586e@k17g2000yqb.googlegroups.com>
 <w2u803fcee31003301910za7d4b7b8r2764bff07383b7bf@mail.gmail.com>
 <20100331090130.GC2417@khaled-laptop>
 <w2n803fcee31003310219if83f4b56jbd63fd5bdfaa51bb@mail.gmail.com>
Message-ID: <20100331174107.GB3657@khaled-laptop>

On Wed, Mar 31, 2010 at 05:19:19PM +0800, Diederick C. Niehorster wrote:
> Hi Khaled,
> 
> On Wed, Mar 31, 2010 at 5:01 PM, Khaled Hosny <khaledhosny at eglug.org> wrote:
> > On Wed, Mar 31, 2010 at 10:10:21AM +0800, Diederick C. Niehorster wrote:
> >> Interesting your ligatures are showing up! When I run plain luatex,
> >> e.g. from http://github.com/khaledhosny/luaotfload/tree/master/tests,
> >> the ligatures do appear.
> >
> > What if you changed the font definition to:
> > \font\test={arno pro:mode=node;script=latn;+tlig;+trep} at 10pt
> >
> > (note the "mode")
> 
> Yup, that kills the ligatures for me, see attached output and log.

Fontspec sets mode=node by default, now I need to see why it fails with
this particular font.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer


-- 
To unsubscribe, reply using "remove me" as the subject.


From dcnieho at gmail.com  Wed Mar 31 12:51:47 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Wed, 31 Mar 2010 18:51:47 +0800
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <B787C6AD-5ED7-45C3-84A2-3F15B6628CFF@gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
	 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
	 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
	 <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
	 <803fcee31003300515v1ff83334uf1d99e9e018a9314@mail.gmail.com>
	 <20100330134241.GB3788@khaled-laptop>
	 <y2p803fcee31003301907l3269fcdcjdeda943d88507df4@mail.gmail.com>
	 <20100331085747.GB2417@khaled-laptop>
	 <v2x803fcee31003310222uadece945k8aed3b0a7907efb5@mail.gmail.com>
	 <B787C6AD-5ED7-45C3-84A2-3F15B6628CFF@gmail.com>
Message-ID: <z2r803fcee31003310351y75aa9d07x31abb08f6f241ec1@mail.gmail.com>

On Wed, Mar 31, 2010 at 6:14 PM, Will Robertson <wspr81 at gmail.com> wrote:
> On 31/03/2010, at 7:52 PM, Diederick C. Niehorster wrote:
>
>> On Wed, Mar 31, 2010 at 4:57 PM, Khaled Hosny <khaledhosny at eglug.org> wrote:
>>> On Wed, Mar 31, 2010 at 10:07:08AM +0800, Diederick C. Niehorster wrote:
>>>> Logs are attached in a zip, for
>>>> \setmainfont[Ligatures=TeX]{Arno Pro Italic} - font not found
>>>
>>> Right now, I don't think you can get the italic font this way, as we
>>> only check for font family, I've to re-think about this.
>>
>> Should it be possible to load font's like that (without using the
>> plain \font command, which is there for special needs)? Think it makes
>> sense for fontspec to select font families and automatically set the
>> regular, bold, italic, etc fonts actually.
>
> You do need to be able to load a specific font face sometimes, so I'd say
>
> ?\setfontface\foo{Arno Pro Italic}
>
> should be valid. (Say if you're using it as a swash face without an upright.)

Hmm, in that case I guess fontspec should somehow detect (or it should
be told?) that it is loading the italic version, so that it wont try
to load the italic version of the italic version (tho i guess it
should load the bold version of this italic version).

Dee


-- 
To unsubscribe, reply using "remove me" as the subject.


From elie.roux at telecom-bretagne.eu  Wed Mar 17 10:06:52 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Wed, 17 Mar 2010 11:06:52 +0200
Subject: [lltx] cygwin static detection
Message-ID: <eba574421003170206p1c46ea47ud3d0b427245f5430@mail.gmail.com>

Hello,

The attached patch detects if LuaTeX is compiled under cygwin: the
result of os.type is unix and os.name is cygwin. Without this patch,
os.type is unix and os.name is generic... Is this patch ok or would
you prefer os.type to return windows? I think it's best this way.

Anyway, as most users will use binaries compiled under non-cygwin in
their cygwin system, thus it does not solve the cygwin detection
problem.

Thank you,
-- 
Elie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: loslibtext.c.diff
Type: text/x-diff
Size: 344 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100317/92a680e8/attachment.bin>

From elie.roux at telecom-bretagne.eu  Wed Mar  3 09:17:08 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Wed, 3 Mar 2010 10:17:08 +0200
Subject: [lltx] font caching
Message-ID: <eba574421003030017t5cdd3cb8q1483b5852e19d818@mail.gmail.com>

Hello Taco, Hans and everyone,

I'm starting to think about font caching in luaotfload, and I had a
discussion with Karl about where the cached fonts shoud go. We came
out with TEXMFVAR/luatex-cache/fonts/otfcache. Is it OK for you to put
the cached files here? Or do you think the files should be common with
ConTeXt?

Also Hans, what code would be needed to enable font caching?

Thank you in advance,
-- 
Elie


From elie.roux at telecom-bretagne.eu  Fri Mar 26 09:37:44 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Fri, 26 Mar 2010 10:37:44 +0200
Subject: [lltx] Re: xunicode & euenc
In-Reply-To: <20100326083036.GA4555@khaled-laptop>
References: <4BAB8281.4080603@telecom-bretagne.eu>
	 <B9C221A2-F681-42F5-9D4C-1C7207A1C8AD@gmail.com>
	 <eba574421003260120i1e2033b3g960d92ceda09f2f8@mail.gmail.com>
	 <20100326083036.GA4555@khaled-laptop>
Message-ID: <eba574421003260137y10a1637btd6809989da250af@mail.gmail.com>

2010/3/26 Khaled Hosny <khaledhosny at eglug.org>:
>
> If it were me, I'd just do the following, for XeTeX just load xunicode,
> for LuaTeX, just rewrite xunicode the lua way (for example, make tables
> of character categories and small lua functions that loop through it
> and feed TeX with the definitions macros, get ride of TeX hackary, etc.)
> so it is either to read and maintain for mere mortal, then incorporate
> the new package with euenc. The luafication might not be needed on the
> short run, but as XeTeX compatibility is not need, we should go the lua
> way from the start (remind you of my ulterior motive; less TeX and more
> lua).

I think the overall idea is good, but as we have something working, I
don't really see the point, and with the current solution we can
synchronize with new versions of xunicode simply, and this requires
less maintenance. But I agree with you, if we have to add or change
something big, it would be best to convert in Lua...

Thank you,
-- 
Elie

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From w.m.l at gmx.net  Wed Mar  3 02:06:34 2010
From: w.m.l at gmx.net (Robert)
Date: Wed, 03 Mar 2010 02:06:34 +0100
Subject: [lltx] Re: luamicrotype?
In-Reply-To: <20100226083153.GB6311@khaled-laptop>
References: <eba574421002220403v85ec38fhd7b09c432ec6b92f@mail.gmail.com> <4B842431.6010307@gmx.net> <4B842E29.8030608@telecom-bretagne.eu> <20100226083153.GB6311@khaled-laptop>
Message-ID: <4B8DB61A.2070609@gmx.net>

On 26.02.10 09:31, Khaled Hosny wrote:
> Well, I confess, I've an ulterior motive; I want to get ride of as
> legacy TeX macro code as possible, and to me microtype is nothing but a
> pile of code written in a weired macro language that I'll never be able
> to comprehend.

Fair enough.

> So why tie ourselves with legacies, where all what we
> need, to get microtype support in fontspec, is few tens of lines written
> in an elegant, easy to understand programming language? (most of the
> needed work is already done in luaotfload).

I must admit that I'm a little bit puzzled as to what you're actually 
proposing. You cannot be seriously suggesting that 4000 lines of code 
("legacy" or not) and another 3000 lines of configuration can be 
replaced with "a few tens of lines"? With that you may be able to 
provide rudimentary support along the lines of good-old protcode.tex. 
The bulk of microtype, however, deals with the user interface, intended 
to be automatic, systematic, straight-forward and flexible. It's all 
there and time-tested, and I don't see why it should rewritten/replaced. 
Users won't be amused, I guess.

Regards,
-- 
  Robert

PS.
On 24.02.10 08:14, ?lie Roux wrote:
> I sent you an invitation, I hope it will work...

Yes, thanks.


From wspr81 at gmail.com  Tue Mar 30 09:55:56 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Tue, 30 Mar 2010 18:25:56 +1030
Subject: [lltx] packages list
In-Reply-To: <eba574421003300051q1b589db0u42366039262f97aa@mail.gmail.com>
References: <4BB169ED.9010605@elzevir.fr> <eba574421003300051q1b589db0u42366039262f97aa@mail.gmail.com>
Message-ID: <1E4B50EF-B006-4271-871D-4E7A10FB2BB9@gmail.com>

On 30/03/2010, at 6:21 PM, ?lie Roux wrote:

> 2010/3/30 Manuel P?gouri?-Gonnard <mpg at elzevir.fr>:
>>> 
>>> luatextra:      loads luaextra+luatexbase+luaotfload; goodies (gen, luatex)
> 
> I think a good idea would be to make it load xltxtra under xetex... wdyt?

No, there's already enough confusion among XeTeX users who load that package without knowing what it does.

My opinion is to phase out xltxtra (only offer it for compatibility with XeTeX documents), and break it into smaller pieces.

Will

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From khaledhosny at eglug.org  Fri Mar 26 09:58:47 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 26 Mar 2010 10:58:47 +0200
Subject: [lltx] Re: xunicode & euenc
In-Reply-To: <20052352-D1D2-429D-80B0-63B9F3EDB9E2@gmail.com>
References: <4BAB8281.4080603@telecom-bretagne.eu>
 <B9C221A2-F681-42F5-9D4C-1C7207A1C8AD@gmail.com>
 <eba574421003260120i1e2033b3g960d92ceda09f2f8@mail.gmail.com>
 <20052352-D1D2-429D-80B0-63B9F3EDB9E2@gmail.com>
Message-ID: <20100326085847.GC4766@khaled-laptop>

On Fri, Mar 26, 2010 at 06:54:01PM +1030, Will Robertson wrote:
> On 26/03/2010, at 6:50 PM, ?lie Roux wrote:
> 
> >> * Try to counteract any conflicts that may occur with (new) euenc plus old xunicode. It might be that we can only incorporate xunicode into the EU2 encoding to avoid problems with backwards compatibility in XeTeX. If Ross is stepping back for supplying xunicode for LuaTeX, I see no problem with incorporating its features into euenc.
> > 
> > In fact, one of the problems are that the loading is made in the
> > Options part of fontenc... meaning no ProvidesPackage, no
> > RequirePackage, etc. so we just can't input xunicode.sty in
> > euxenc.def... that's why I had do modify it. Unless you have some
> > hacks to counter this? Should we hack some macros to pretend we're not
> > in the Options section?
> 
> 
> Nah, I think the current approach of forking xunicode for this purpose is best for now. Even if it's only for EU2 (i.e., just for LuaTeX).

But Ross won't support it, and I doubt we can (I myself can't even read
that code! yet to debug/fix it), but if you think you can maintain that
fork, so be it.

But again, if it were me I'd just define what xunicode is supposed to do
and then do it from scratch in a way we can maintain. I believe this is
the right time for us to do all sorts of experimental packages; luatex
still in beta stage, so we can't claim our code is stable, but if we
wait longer, I'm afraid we will eventually fall into TeX's legacy trap
and keep every thing as is because it is supposed to be stable.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From g.duffner at gmail.com  Tue Mar 30 18:36:25 2010
From: g.duffner at gmail.com (Georg Duffner)
Date: Tue, 30 Mar 2010 09:36:25 -0700 (PDT)
Subject: [lltx] Re: [fontspec] selecting font features has no effect?
In-Reply-To: <4BB20CD2.6030507@telecom-bretagne.eu>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com> 
	<D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com> <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com> 
	<eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com> 
	<20100330125211.GD2934@khaled-laptop> <4BB20CD2.6030507@telecom-bretagne.eu>
Message-ID: <c90bffcf-d9fe-4994-bb6c-8bbf27ee586e@k17g2000yqb.googlegroups.com>

I have been following the wspr, khaledhosny and mpg git repositories
and have tried to compile some testfiles with lualatex. The behaviour
of TeX-ligatures (common ligatures were not concerned though) not
being typeset has appeared and disappeared several times on my
machine. It stayed for some time before Khaled took over luaotfload,
then it disappeared and reappeared two times, but I haven?t been able
to find a reason for it in the source.
At the moment, it is setting all ligatures as expected. When I process
your example I get all ligatures and swash letters in testcase 1, but
not in case 2 (same warning as with you). Case 3 gives the same error
as with you. See my file at www.unet.univie.ac.at/~a9806618/lipsum_test_lualatex.pdf

I updated to current fontspec and luaotfload right before processing
the file.
This is LuaTeX, Version beta-0.53.0-2010031811 (rev 3520)

As a sidenote: all in all lualatex burnt nearly 1GB of RAM?probably
due to a big collection of fonts.

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From g.duffner at gmail.com  Wed Mar 31 23:21:32 2010
From: g.duffner at gmail.com (Georg A. Duffner)
Date: Wed, 31 Mar 2010 23:21:32 +0200
Subject: [lltx] Re: [fontspec] selecting font features has no effect?
In-Reply-To: <20100331174107.GB3657@khaled-laptop>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com> <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com> <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com> <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com> <20100330125211.GD2934@khaled-laptop> <4BB20CD2.6030507@telecom-bretagne.eu> <c90bffcf-d9fe-4994-bb6c-8bbf27ee586e@k17g2000yqb.googlegroups.com> <w2u803fcee31003301910za7d4b7b8r2764bff07383b7bf@mail.gmail.com> <20100331090130.GC2417@khaled-laptop> <w2n803fcee31003310219if83f4b56jbd63fd5bdfaa51bb@mail.gmail.com> <20100331174107.GB3657@khaled-laptop>
Message-ID: <4BB3BCDC.3020702@gmail.com>

Am 2010-03-31 19:41, schrieb Khaled Hosny:
> \font\test={arno pro:mode=node;script=latn;+tlig;+trep} at 10pt
>
Again, this does not break ligatures here. See attached pdf and logfile.

Regards,
Georg




-- 
To unsubscribe, reply using "remove me" as the subject.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lipsum_test.log
Type: text/x-log
Size: 113547 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100331/6076a4e5/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lipsum_test.pdf
Type: application/pdf
Size: 19472 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100331/6076a4e5/attachment.pdf>

From dcnieho at gmail.com  Tue Mar 30 07:47:32 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Mon, 29 Mar 2010 22:47:32 -0700 (PDT)
Subject: [lltx] [fontspec] selecting font features has no effect?
Message-ID: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>

Hi All, Khaled,

This is fontspec related, so I'll keep it on this list, per suggestion
before ;)

I am having trouble with ligatures not showing up, nor other font
features, tried swashed italics (I tested using the same fontspec on
XeLaTeX, and it works fine). See minimal example below (you might also
want to note that again I managed to burn 800MB compiling it).

Khaled, you might recognize that ligature test from your luaotfload
tests, when I run luatex on those they work fine.

Also, a feature request: when a \fontspec related command is given an
option it does not recognize, could it write a warning? I was messing
with 'Rawfeature' for a while, only later figuring out it should be
'RawFeature'. Warnings would have helped and are useful in general
when input is not what it should be.

---
\documentclass[11pt]{article}

\usepackage{lipsum}
\usepackage{fontspec}
%\setmainfont[Mapping=tex-text,Ligatures=Common]{TeX Gyre Heros}
\setmainfont[Mapping=tex-text,Ligatures=Common]{Arno Pro}

\begin{document}
``fi fl ffi--ffl---ff!`''\par
\textsc{Test}
{\addfontfeature{RawFeature=+swsh}\textit{Test}}

\lipsum
\end{document}
---

Best,
Dee

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From elie.roux at telecom-bretagne.eu  Wed Mar 17 10:54:24 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Wed, 17 Mar 2010 11:54:24 +0200
Subject: [lltx] Re: cygwin static detection
In-Reply-To: <eba574421003170206p1c46ea47ud3d0b427245f5430@mail.gmail.com>
References: <eba574421003170206p1c46ea47ud3d0b427245f5430@mail.gmail.com>
Message-ID: <eba574421003170254ta48e2dv1fc431831b003551@mail.gmail.com>

Oops... wrong address, sorry!
-- 
Elie


From mpg at elzevir.fr  Sun Mar 28 22:00:53 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Sun, 28 Mar 2010 22:00:53 +0200
Subject: [lltx] luatextra split up
In-Reply-To: <20100328182923.GA13406@khaled-laptop>
References: <4BAF643A.8050307@elzevir.fr> <20100328182923.GA13406@khaled-laptop>
Message-ID: <4BAFB575.4030205@elzevir.fr>

Khaled Hosny a ?crit :
> One small feature request I'd like to have before the major rework;
> rename luamcallbacks to some name consistent with other naming scheme

Well, if I change the name of the file, it would be weird to keep the same Lua
module name then, and changing it would be an incompatible change, which
qualifies for inclusion in the big rework.

> and provide a LaTeX package for it, not just lua module, so all packages
> can be loaded the same way (either by LaTeX's \RequirePackage{} or lua's
> require() etc.) This in merely a convenience issue.
> 
Oh, yes, I could have done that. If you don't mind, I'll include it in the
rework too (should not takes longer than a few weeks). For now, just make sure
that luatexbase-modutils.sty is loaded (luatextra.sty does that) and use

require "luamcallback"

Sorry for the (temporary) lack of convenience.

Manuel.

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From khaledhosny at eglug.org  Sat Mar 27 05:59:08 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sat, 27 Mar 2010 06:59:08 +0200
Subject: [lltx] Math error: parameter \Umathquad\displaystyle is not set.
In-Reply-To: <20100327045547.GA5058@khaled-laptop>
References: <20100326193736.GA18375@khaled-laptop>
 <20100326233626.GA8893@phare.normalesup.org>
 <20100327043230.GA2309@khaled-laptop>
 <20100327045547.GA5058@khaled-laptop>
Message-ID: <20100327045908.GB5058@khaled-laptop>

On Sat, Mar 27, 2010 at 06:55:47AM +0200, Khaled Hosny wrote:
> On Sat, Mar 27, 2010 at 06:32:30AM +0200, Khaled Hosny wrote:
> > On Sat, Mar 27, 2010 at 12:36:26AM +0100, Arthur Reutenauer wrote:
> > > 	Hello Khaled,
> > > 
> > > > Can anyone confirm getting this error with this sample file:
> > > > 
> > > > [snip]
> > > > 
> > > > ! Math error: parameter \Umathquad\displaystyle is not set.
> > > 
> > >   I cannot reproduce it with any of the following combinations:
> > > 
> > >   1. TeX Live 2009 LuaTeX + TeX Live 2009 luaotfload
> > >   2. Latest LuaTeX (#3553) + TeX Live 2009 luaotfload
> > >   3. Latest LuaTeX + latest CTAN luaotfload (2010/02/22 v1.06b)
> > > 
> > >   Attached is the output and log I get by running the last combination.  Note
> > > that luatextra.sty etc. are from TeX Live 2009, but I doubt this makes any
> > > differenc.
> > 
> > Could you please attach the log file, I suspect it is a font issue, may
> > be the fonts used are different. I didn't have this issue before.
> 
> Never mind, I found the root of the issue. I've TTF versions of some CM
> modern fonts installed by lyx (not in texmf tree), and for some reason
> luaotfload was finding them first.

This reminds me not to set $OSFONTDIR again, to avoid unexpected
behaviours like this.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From arthur.reutenauer at normalesup.org  Sat Mar 27 09:37:06 2010
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Sat, 27 Mar 2010 09:37:06 +0100
Subject: [lltx] Math error: parameter \Umathquad\displaystyle is not set.
In-Reply-To: <20100327043230.GA2309@khaled-laptop>
References: <20100326193736.GA18375@khaled-laptop> <20100326233626.GA8893@phare.normalesup.org> <20100327043230.GA2309@khaled-laptop>
Message-ID: <20100327083706.GB8893@phare.normalesup.org>

> Could you please attach the log file, I suspect it is a font issue, may
> be the fonts used are different.

  Sorry, I attached the PDF file twice.  Glad you fixed the problem.

	Arthur

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From Firmicus at gmx.net  Wed Mar 24 17:02:01 2010
From: Firmicus at gmx.net (Firmicus)
Date: Wed, 24 Mar 2010 17:02:01 +0100
Subject: [lltx] xunicode
In-Reply-To: <eba574421003240740j24b9ba69x154fa60a1a8ff145@mail.gmail.com>
References: <eba574421003240740j24b9ba69x154fa60a1a8ff145@mail.gmail.com>
Message-ID: <4BAA3779.1000006@gmx.net>

On 24/03/2010 15:40, ?lie Roux wrote:
> Hello,
>
> We're trying to move xunicode from an independant package to something
> loaded with EU2 (or EU1), as it would be more coherent with the
> behaviour of other fontenc files. The thing is the maintainer of
> xunicode doesn't answer my regular mails for 3 months or so, so we
> cannot rely on him for future development and we must fork it (unless
> someone knows how to make Ross Moore answer).

This is strange. Ross Moore does show up regularly on the xetex mailing 
list and is keen in helping people. Perhaps your email was caught by his 
university anti-spam or something? Sometimes when I am overwhelmed with 
work I postpone replying to not-so-urgent emails and then plainly forget 
about them, without malicious intent, so perhaps this is the explanation 
here too. I'd suggest you re-send the above message directly to the 
xetex mailing list and see what happens...

FC

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From dcnieho at gmail.com  Tue Mar 30 13:49:43 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Tue, 30 Mar 2010 19:49:43 +0800
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
	 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
Message-ID: <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>

Hi Will,

Thanks for the quick update, just got the newest fontspec from github.

On Tue, Mar 30, 2010 at 4:07 PM, Will Robertson <wspr81 at gmail.com> wrote:
> On 30/03/2010, at 4:17 PM, Diederick C. Niehorster wrote:
>
>> %\setmainfont[Mapping=tex-text,Ligatures=Common]{TeX Gyre Heros}
>> \setmainfont[Mapping=tex-text,Ligatures=Common]{Arno Pro}
>
> This is going to be a problem, I can tell.
> LuaTeX uses a different mechanism to get TeX ligatures; you want to use "Ligatures=TeX" instead of "Mapping=tex-text". (The former will also work in XeTeX.)

Done, works for both XeTeX and LuaTeX.

>
> (P.S. ?You should never have to write "Ligatures=Common". I need to write something about that in the manual.)

Ah, I remember having to do that when I first tried out fontspec a
long time ago, by default i got historic ligatures as well... Can't
remember where that happened and its not happening with the current
font. Now I was trying if explicitly turning it on might make them pop
up ;)

>> {\addfontfeature{RawFeature=+swsh}\textit{Test}}
>
> What does ?"\addfontfeature{Style=Swash}" say?

Well, it says not available in XeTeX :P
I've modified my source too:
---
\documentclass[11pt]{article}

\usepackage{lipsum}
\usepackage{fontspec}
%\setmainfont[Ligatures=TeX]{TeX Gyre Heros}
\setmainfont[Ligatures=TeX]{Arno Pro}

\begin{document}
``fi fl ffi--ffl---ff!`''\par
\textsc{Test}
\typeout{--1--}
{\addfontfeature{RawFeature=+swsh}\textit{Test}}
\typeout{--2--}
{\addfontfeature{Style=Swash}\textit{Test}}
\typeout{--3--}
{\fontspec[Style=Swash]{Arno Pro Italic}Test}

\lipsum
\end{document}
---
Compiling in XeTeX gets me:
---
--1--
--2--
 fontspec Warning:  OpenType feature 'Style=Swash' (+swsh) not available
(fontspec)   for font 'Arno Pro',
(fontspec)   with script 'Latin', and language 'Default'.

--3--
 fontspec Warning:  OpenType feature 'Style=Swash' (+swsh) not available
(fontspec)   for font 'Arno Pro Italic/I',
(fontspec)   with script 'Latin', and language 'Default'.

 fontspec Warning:  OpenType feature 'Style=Swash' (+swsh) not available
(fontspec)   for font 'Arno Pro Italic/I',
(fontspec)   with script 'Latin', and language 'Default'.

 fontspec Warning:  OpenType feature 'Style=Swash' (+swsh) not available
(fontspec)   for font 'Arno Pro Italic/BI',
(fontspec)   with script 'Latin', and language 'Default'.

 fontspec Warning:  OpenType feature 'Style=Swash' (+swsh) not available
(fontspec)   for font 'Arno Pro Italic/BI',
(fontspec)   with script 'Latin', and language 'Default'.
---
I guess those are all normal, the upright Arno Pro has no swash (so
there is no check if the raw feature requested exists?) and I guess
the italic variant of Arno Pro Italic does not exist ;)
See the attached output *_xelatex.pdf, the second attempt does not
yield a swash, whereas the first does (I like it the first does,
RawFeature is powerful in this sense!).

LuaTeX breaks here on not finding Arno Pro Italic, tho it has it in
its otfl-names.lua:
---
--1--

--2--

 fontspec Warning:  OpenType feature 'Style=Swash' (+swsh) not available
(fontspec)   for font 'Arno Pro',
(fontspec)   with script 'Latin', and language 'Default'.


--3--

! Font \zf at basefont=Arno Pro Italic at 10.95pt not loadable: metric data not fo
und or bad.
<to be read again>
                   \let
l.16 {\fontspec[Style=Swash]{Arno Pro Italic}
                                             Test}
---
--- otfl-names.lua:
{
   ["checksum"]="F342E0175B3F2F8E22AF2FA67EB88D92",
   ["familyname"]="ArnoPro",
   ["filename"]="arnopro-italic.otf",
   ["fontname"]="ArnoPro-Italic",
   ["fontstyle_name"]="Italic",
   ["fullname"]="Arno Pro Italic",
   ["names"]={
    ["family"]="arnopro",
    ["fullname"]="ArnoPro-Italic",
    ["psname"]="ArnoPro-Italic",
    ["subfamily"]="Italic",
   },
   ["size"]={ 120, 140, 110 },
   ["slant"]=-11,
   ["weight"]=400,
   ["width"]=5,
  }
---
Note that LuaTex outputs the same warning for case two about a missing feature.

I then comment out case 3 and luatex compiles succesfully. However,
the resulting document has no ligatures (whether TeX ligatures, or
f_i), no swash and no small caps, see attached *_lualatex.pdf.

By the way, why is the font attempted to be loaded at 10.95pt when I
request 11pt?

Best,
Dee

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lipsum_test_xelatex.pdf
Type: application/pdf
Size: 20865 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100330/a5ef5dea/attachment.pdf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lipsum_test_lualatex.pdf
Type: application/pdf
Size: 17600 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100330/a5ef5dea/attachment-0001.pdf>

From arthur.reutenauer at normalesup.org  Sat Mar 27 00:36:26 2010
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Sat, 27 Mar 2010 00:36:26 +0100
Subject: [lltx] Math error: parameter \Umathquad\displaystyle is not set.
In-Reply-To: <20100326193736.GA18375@khaled-laptop>
References: <20100326193736.GA18375@khaled-laptop>
Message-ID: <20100326233626.GA8893@phare.normalesup.org>

	Hello Khaled,

> Can anyone confirm getting this error with this sample file:
> 
> [snip]
> 
> ! Math error: parameter \Umathquad\displaystyle is not set.

  I cannot reproduce it with any of the following combinations:

  1. TeX Live 2009 LuaTeX + TeX Live 2009 luaotfload
  2. Latest LuaTeX (#3553) + TeX Live 2009 luaotfload
  3. Latest LuaTeX + latest CTAN luaotfload (2010/02/22 v1.06b)

  Attached is the output and log I get by running the last combination.  Note
that luatextra.sty etc. are from TeX Live 2009, but I doubt this makes any
differenc.

	Best,

		Arthur

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: hosny-20100326.pdf
Type: application/pdf
Size: 9959 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100327/7d25d76a/attachment.pdf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: hosny-20100326.pdf
Type: application/pdf
Size: 9959 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100327/7d25d76a/attachment-0001.pdf>

From wspr81 at gmail.com  Mon Mar  8 23:08:43 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Tue, 9 Mar 2010 08:38:43 +1030
Subject: [lltx] fontspec push
In-Reply-To: <20100308115145.GA13421@khaled-laptop>
References: <9C59BA4B-29E3-4E46-AAD8-C4E50E76F6D7@gmail.com> <20100308115145.GA13421@khaled-laptop>
Message-ID: <61F1B294-2CDF-4D76-B8F6-6ADC2D51F893@gmail.com>

On 08/03/2010, at 10:21 PM, Khaled Hosny wrote:

> The original issue with setting script/language is now fixed.

Hurray :)

>> Added the following "programmer's interface" with, I suspect, more to
>> come eventually. Does this all make sense? More importantly, does
>> fontspec even compile documents for you still?
> 
> This code doesn't work, I get:
> 
> ! Undefined control sequence.
> \fontspec_check_lang:n ...,"\l_fontspec_script_tl 
>                                                  ")}
> l.9 \fontspec_if_language:nTF {ROM}
>                                    {True}{False?}/
> ? 
> 
> It seems \l_fontspec_script_tl is undefined by the time this function is
> called.

Oh, of course. At the moment I'm only saving the XeTeX script number, not the string it represents. I need the string for LuaTeX as well.

> I think a cleaner aproach is to call fontspec.check_ot_lang() etc.
> directly instead of \fontspec_check_lang:n,

One of the changes I made last night makes \fontspec_check_lang:n exactly a wrapper around fontspec.check_ot_lang(). I like to minimise the number of \xetex_or_luatex:nn functions within macro definitions.

-- Will



From khaledhosny at eglug.org  Mon Mar  8 12:51:45 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 8 Mar 2010 13:51:45 +0200
Subject: [lltx] fontspec push
In-Reply-To: <9C59BA4B-29E3-4E46-AAD8-C4E50E76F6D7@gmail.com>
References: <9C59BA4B-29E3-4E46-AAD8-C4E50E76F6D7@gmail.com>
Message-ID: <20100308115145.GA13421@khaled-laptop>

On Mon, Mar 08, 2010 at 08:09:24PM +1030, Will Robertson wrote:
> Hi,
> 
> Found some time to concentrate on fontspec for a little while this
> evening. (Khaled, I'm sorry to keep doing this to you, but does this
> work under LuaTeX yet? I'm still having issues with luaotfload and
> external fonts on Mac OS X. I've been working with the code that was
> breaking before, so I might have fixed things up
> accidentally-on-purpose.)

The original issue with setting script/language is now fixed.

> Added the following "programmer's interface" with, I suspect, more to
> come eventually. Does this all make sense? More importantly, does
> fontspec even compile documents for you still?

This code doesn't work, I get:

! Undefined control sequence.
\fontspec_check_lang:n ...,"\l_fontspec_script_tl 
                                                  ")}
l.9 \fontspec_if_language:nTF {ROM}
                                    {True}{False?}/
? 

It seems \l_fontspec_script_tl is undefined by the time this function is
called.
I think a cleaner aproach is to call fontspec.check_ot_lang() etc.
directly instead of \fontspec_check_lang:n, i.e:

--- a/fontspec.dtx
+++ b/fontspec.dtx
@@ -2378,7 +2378,11 @@ command should be used to declare a new, \eg,
\feat{PurpleColor} feature:
     \ifzf at icu
       \int_set:Nn \c at zf@script
         {\use:c {g_fontspec_script_num_(\zf at family)_tl}}
-      \fontspec_check_lang:n {#1}
+      \xetex_or_luatex:nn {
+        \fontspec_check_lang:n {#1}
+      }{
+        \luadirect{fontspec.check_ot_lang("zf at basefont", "#1", "latn")}
+      }
       \if at tempswa
         \prg_return_true:
       \else

(it can be done in a better way, but I think you got the idea. You
should not be afraid of using lua ;)
Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer


From dcnieho at gmail.com  Wed Mar 31 11:19:19 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Wed, 31 Mar 2010 17:19:19 +0800
Subject: [lltx] Re: [fontspec] selecting font features has no effect?
In-Reply-To: <20100331090130.GC2417@khaled-laptop>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
	 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
	 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
	 <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
	 <20100330125211.GD2934@khaled-laptop>
	 <4BB20CD2.6030507@telecom-bretagne.eu>
	 <c90bffcf-d9fe-4994-bb6c-8bbf27ee586e@k17g2000yqb.googlegroups.com>
	 <w2u803fcee31003301910za7d4b7b8r2764bff07383b7bf@mail.gmail.com>
	 <20100331090130.GC2417@khaled-laptop>
Message-ID: <w2n803fcee31003310219if83f4b56jbd63fd5bdfaa51bb@mail.gmail.com>

Hi Khaled,

On Wed, Mar 31, 2010 at 5:01 PM, Khaled Hosny <khaledhosny at eglug.org> wrote:
> On Wed, Mar 31, 2010 at 10:10:21AM +0800, Diederick C. Niehorster wrote:
>> Interesting your ligatures are showing up! When I run plain luatex,
>> e.g. from http://github.com/khaledhosny/luaotfload/tree/master/tests,
>> the ligatures do appear.
>
> What if you changed the font definition to:
> \font\test={arno pro:mode=node;script=latn;+tlig;+trep} at 10pt
>
> (note the "mode")

Yup, that kills the ligatures for me, see attached output and log.

Best,
Dee


-- 
To unsubscribe, reply using "remove me" as the subject.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: texligatures.log
Type: application/octet-stream
Size: 8636 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100331/6b332638/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: texligatures.pdf
Type: application/pdf
Size: 11055 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100331/6b332638/attachment.pdf>

From dcnieho at gmail.com  Tue Mar 30 15:02:46 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Tue, 30 Mar 2010 21:02:46 +0800
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <20100330125211.GD2934@khaled-laptop>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
	 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
	 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
	 <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
	 <20100330125211.GD2934@khaled-laptop>
Message-ID: <803fcee31003300602j7cfa3363s33f5633c88bfd09d@mail.gmail.com>

On Tue, Mar 30, 2010 at 8:52 PM, Khaled Hosny <khaledhosny at eglug.org> wrote:
> On Tue, Mar 30, 2010 at 03:03:46PM +0300, ?lie Roux wrote:
>> 2010/3/30 Diederick C. Niehorster <dcnieho at gmail.com>:
>> >
>> > --- otfl-names.lua:
>> > {
>> > ? ["checksum"]="F342E0175B3F2F8E22AF2FA67EB88D92",
>> > ? ["familyname"]="ArnoPro",
>> > ? ["filename"]="arnopro-italic.otf",
>> > ? ["fontname"]="ArnoPro-Italic",
>> > ? ["fontstyle_name"]="Italic",
>> > ? ["fullname"]="Arno Pro Italic",
>> > ? ["names"]={
>> > ? ?["family"]="arnopro",
>> > ? ?["fullname"]="ArnoPro-Italic",
>> > ? ?["psname"]="ArnoPro-Italic",
>> > ? ?["subfamily"]="Italic",
>> > ? },
>> > ? ["size"]={ 120, 140, 110 },
>> > ? ["slant"]=-11,
>> > ? ["weight"]=400,
>> > ? ["width"]=5,
>> > ?}
>>
>> Which otfl-names is it? Are you sure it is the one actually used by
>> luaotfload? It never looks into the current directory (maybe it
>> should?) and it looks first in the local directory then in the sys
>> directory. Please try to remove all otfl-names.lua and to install only
>> one in the local directory to see if you have the same result.
>
> It'll not load one from local directory, as we explicitly use the full
> path. I'm now wondering about the usefulness of letting user select
> output directory for database if we never going to load it? May be I
> should try to load the database using kpse as well (and kpse will load
> it from current directory or some where else in texmf tree), if so,
> should I check the default path first or last?

with local directory you mean $texmflocal? My otfl-names is not there,
it is in $TEXMFVAR

relevant parts of texmf.cnf (with comments between lines deleted):

----
TEXMFMAIN = $SELFAUTOPARENT/texmf

TEXMFDIST = $SELFAUTOPARENT/texmf-dist

TEXMFLOCAL = $SELFAUTOPARENT/../texmf-local

TEXMFSYSVAR = $SELFAUTOPARENT/texmf-var

TEXMFSYSCONFIG = $SELFAUTOPARENT/texmf-config

TEXMFHOME = ~/texmf

TEXMFVAR = ~/.texlive2009/texmf-var

TEXMFCONFIG = ~/.texlive2009/texmf-config

TEXMF = {$TEXMFCONFIG,$TEXMFVAR,$TEXMFHOME,!!$TEXMFSYSCONFIG,!!$TEXMFSYSVAR,!!$TEXMFMAIN,!!$TEXMFLOCAL,!!$TEXMFDIST}

TEXMFDBS = {!!$TEXMFSYSCONFIG,!!$TEXMFSYSVAR,!!$TEXMFMAIN,!!$TEXMFLOCAL,!!$TEXMFDIST}

SYSTEXMF = $TEXMFSYSVAR;$TEXMFMAIN;$TEXMFLOCAL;$TEXMFDIST

VARTEXFONTS = $TEXMFVAR/fonts

----

also:
---
C:\dat\bzr\repo\misc\tex>kpsewhich --expand-path=$TEXMF
c:/Documents and Settings/DCN/.texlive2009/texmf-var;c:/texlive/2009/texmf-confi
g;c:/texlive/2009/texmf-var;c:/texlive/2009/texmf;c:/texlive/2009/../texmf-local
;c:/texlive/2009/texmf-dist
----

Hope this is of any use.

Best,
Dee

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From wspr81 at gmail.com  Wed Mar 31 12:14:05 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Wed, 31 Mar 2010 20:44:05 +1030
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <v2x803fcee31003310222uadece945k8aed3b0a7907efb5@mail.gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com> <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com> <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com> <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com> <803fcee31003300515v1ff83334uf1d99e9e018a9314@mail.gmail.com> <20100330134241.GB3788@khaled-laptop> <y2p803fcee31003301907l3269fcdcjdeda943d88507df4@mail.gmail.com> <20100331085747.GB2417@khaled-laptop> <v2x803fcee31003310222uadece945k8aed3b0a7907efb5@mail.gmail.com>
Message-ID: <B787C6AD-5ED7-45C3-84A2-3F15B6628CFF@gmail.com>

On 31/03/2010, at 7:52 PM, Diederick C. Niehorster wrote:

> On Wed, Mar 31, 2010 at 4:57 PM, Khaled Hosny <khaledhosny at eglug.org> wrote:
>> On Wed, Mar 31, 2010 at 10:07:08AM +0800, Diederick C. Niehorster wrote:
>>> Logs are attached in a zip, for
>>> \setmainfont[Ligatures=TeX]{Arno Pro Italic} - font not found
>> 
>> Right now, I don't think you can get the italic font this way, as we
>> only check for font family, I've to re-think about this.
> 
> Should it be possible to load font's like that (without using the
> plain \font command, which is there for special needs)? Think it makes
> sense for fontspec to select font families and automatically set the
> regular, bold, italic, etc fonts actually.

You do need to be able to load a specific font face sometimes, so I'd say

  \setfontface\foo{Arno Pro Italic}

should be valid. (Say if you're using it as a swash face without an upright.)

-- Will



-- 
To unsubscribe, reply using "remove me" as the subject.


From mpg at elzevir.fr  Tue Mar 30 05:03:09 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Tue, 30 Mar 2010 05:03:09 +0200
Subject: [lltx] packages list
Message-ID: <4BB169ED.9010605@elzevir.fr>

Hi,

Just to share, here is a copy of my list of packages related to LuaLaTeX, with
condensed notes. For each the format is listed: lua for lua modules, ltx for
LaTeX, gen for generic (Plain or LaTeX), followed by the supported engines (*tex
means all).

Please let me know if anything is wrong or if I overlooked something.

> ifluatex:       provides \ifluatex (gen, *tex)
> ifpdf:          provides \ifpdf (gen, *tex)
> 
> luatexbase:     resource management (gen, luatex)
> luatex:         resource managment (gen, luatex)
>                 luatexbase and luatex are to be merged somehow
> 
> luaextra:       Lua utilities (lua, luatex)
> luatextra:      loads luaextra+luatexbase+luaotfload; goodies (gen, luatex)
> xltxtra:        loads basics & fontspec; goodies & patches (ltx, xetex)
>                 Plan: extend it to luatex, maybe merge luatextra in later.
> 
> luainputenc:    input encoding & compat for fontenc (ltx, luatex)
>                 Plan: add more modes, inc. one without active chars.
> luamplib:       mplip user-level support (gen, luatex)
> 
> luaotfload:     low-level otf management (gen, luatex)
> fontspec:       user-level font management (ltx, xetex, luatex)
> microtype:      microtypography (ltx, pdftex, luatex partially)
>                 Robert working on extending luatex support.
>                 May partially overlap with luaotfload; yet to be decided.
> 
> euenc:          Unicode font encodings (ltx, xetex, luatex)
>                 Includes a stripped down fork of xunicode:  euxunicode.
> xunicode:       convert usual CS like \' to Unicode (?) (ltx, xetex)
>                 Could be used with luatex, but checks for xetex only.
>                 Forked by Khaled to modify the check, is this fork active?
> 
> luacolor:       Colors via attributes (ltx, luatex)
>                 luaotfload handle font color, this one is more general
>                 how do they interact?
> 
> magicnum:       Access constants: group type, etc. (gen, *tex)
>                 LuaTeX is optional but will be used if present.
> 
> pdftexcmds:     Implement pdfTeX primitives in Lua (gen, pdftex, luatex, xetex)
>                 Very partial support under xetex.
> 
> lua_alt-getopt: Option parsing for scripts. (command-line, luatex)
> 
> Coming next?
> 
> lualatex-doc:   Overview of LuaLaTeX packages for user & dev (doc, luatex)
> 
> luafontenc:     Support for old font encodings w/o active chars (ltx, luatex)
> 
> luatex-def:     luatex.def file for graphics (ltx, luatex)

Enjoy,
Manuel.

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From khaledhosny at eglug.org  Wed Mar 31 11:01:30 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 31 Mar 2010 11:01:30 +0200
Subject: [lltx] Re: [fontspec] selecting font features has no effect?
In-Reply-To: <w2u803fcee31003301910za7d4b7b8r2764bff07383b7bf@mail.gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
 <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
 <20100330125211.GD2934@khaled-laptop>
 <4BB20CD2.6030507@telecom-bretagne.eu>
 <c90bffcf-d9fe-4994-bb6c-8bbf27ee586e@k17g2000yqb.googlegroups.com>
 <w2u803fcee31003301910za7d4b7b8r2764bff07383b7bf@mail.gmail.com>
Message-ID: <20100331090130.GC2417@khaled-laptop>

On Wed, Mar 31, 2010 at 10:10:21AM +0800, Diederick C. Niehorster wrote:
> Hi Georg,
> 
> On Wed, Mar 31, 2010 at 12:36 AM, Georg Duffner <g.duffner at gmail.com> wrote:
> > At the moment, it is setting all ligatures as expected. When I process
> > your example I get all ligatures and swash letters in testcase 1, but
> > not in case 2 (same warning as with you). Case 3 gives the same error
> > as with you. See my file at www.unet.univie.ac.at/~a9806618/lipsum_test_lualatex.pdf
> 
> Interesting your ligatures are showing up! When I run plain luatex,
> e.g. from http://github.com/khaledhosny/luaotfload/tree/master/tests,
> the ligatures do appear.

What if you changed the font definition to:
\font\test={arno pro:mode=node;script=latn;+tlig;+trep} at 10pt

(note the "mode")

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer


-- 
To unsubscribe, reply using "remove me" as the subject.


From elie.roux at telecom-bretagne.eu  Thu Mar 25 16:34:25 2010
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Thu, 25 Mar 2010 17:34:25 +0200
Subject: [lltx] Re: Request to mailing list XeTeX rejected
Message-ID: <4BAB8281.4080603@telecom-bretagne.eu>

Hello,

For your information, here is the answer of Ross, which conforts me in 
the idea of forking xunicode is the only option for it to work properly 
with LuaTeX...

-----------------------------------------------

Hello Elie,

On 25/03/2010, at 7:37 AM, Elie Roux wrote:

>> As for your imputation that  xunicode  has been abandoned, I find this
>> quite offensive. There can be many, many reasons why someone cannot
>> respond quickly to your requests for action. This is especially so
>> where the work is done voluntarily.
>>
>
> In fact, I come from the open-source community, and usually the 
> development is not done by only one person (like for 90% of TeX/LaTeX 
> development), but by a community that sends patches, remarks, etc. 
> This is what I tried to do with xunicode, and it didn't work, I'm 
> really sad you still want to keep this model, I think a lot of 
> packages would benefit from an open development. We are developping 
> all the LuaLaTeX packages like this, and we have to interact with two 
> closed-developped packages which are xunicode and microtype. Believe 
> me it's very hard and frustrating when you have a community working on 
> a project that depends on two packets for which we can't submit 
> patches or even have informations... We would benefit a lot from an 
> open development, that's why I had the idea to fork, after sending you 
> several unanswered messages...

I accept these points, but I do not accept the conclusions
that you draw.

Thinking about it further, I think you are asking for the
wrong thing.
It should *not* be necessary to change Xunicode at all.

What you want is a way to get the functionality that it
provides *for XeTeX* and have this loaded by LuaTeX.
To achieve this, all you need to do is override the check
that the package makes.
This can be done by first redefining \ifxetex , or providing
a non-\relax'd value for the XeTeX primitive that it checks for,
and any other things of this nature.
Load the package, and any others, then reinstate the original
checks so that no other XeTeX-specific package can be loaded
accidentally.


If *you* do this, and thereby force Xunicode to load --- in a
situation where I myself cannot vouch for the results that
will be obtained --- then it is *your* responsibility for
how well it works.

If *I* change my coding to allow Xunicode to be fully loaded
in a situation whereby I *cannot vouch* for the results, then
a user could reasonably assume that I have been negligent
or incompetent in my programming.

Since I do not regularly work with LuaTeX, I cannot provide
the kind of guarantees, of accurate useful packages that will
work reliably in well-defined situations, that has become
the expectation of (La)TeX users.

It is mostly for this reason that I have had misgivings about
simply adding an extra test for an engine, without really
knowing how well it would actually work, if at all.
It would certainly be negligent of me to purport to claim
that all of Xunicode's internals work seamlessly with LuaTeX,
when I have absolutely no idea about whether this is true
or not.

>
> Maybe you could reply me that I should be more patient, but the thing 
> is it's very strange to have such a development team and not to use it 
> because the model of development is unapropriate...

Freedom needs to be balanced with protection.
Most (La)TeX users have little idea about how it really works,
and need to be protected from making inappropriate choices.
(Indeed most software is this way!)

So again, I reject your assertion that the model of development
is inappropriate.

>
>> In fact my plan for xunicode --- when I get the time to do it --- is
>> to split the file into 2 (or more) parts. One will define the
>> important macros, the other will control the declarations of all the
>> Unicode entities and accent combinations. This is to enable the 2nd
>> part to be reloaded multiple times, with different values of the
>> encoding string; e.g., 'U', 'EU','EU1' or anything else. This will
>> make it much easier to adapt encodings to specific fonts, and to
>> implement fall-back actions when a font is found to be missing
>> specific characters that are required within a document. When I have
>> done this, the version number will become 1.0 .
>>
>
> That will be great... but TeXLive 2010 is approaching, and a lot of 
> users would benefit from a xunicode working with LuaTeX. You already 
> have the patch, what does prevent you from submiting it to the CTAN?

For the reasons given above, I do not accept that it is
an appropriate patch to be issued under my name.

Instead I might work on a wrapper package, named something
like  unxecode.sty , that overrides the checks in the ways
that I suggested above.
It could do so for *any* engine, or at least have options
allowing that, but still work seamlessly with XeTeX, leaving
not bad side-effects.
Furthermore it should allow other XeTeX-specific packages
to be loaded by other engines.

It would come with all kinds of warnings and disclaimers
about its use, making clear that the package-writer accepts
no responsibility whatsoever for any bad results that may occur.

> That's the point that I cannot even try to understand...

Then you are not properly balancing the responsibilities that
come with producing robust software that others will use,
expecting things to *just work* in their everyday situation.

>
>> I hope this serves adequately as the answer that you have been
>> seeking. Maybe quite soon there will be an interim update of xunicode
>> that includes a test that allows luatex to proceed. This is not the
>> only change that is "in the works".
>
> I hope so! Anyway, for TeXLive 2010, I still think it's a good idea to 
> fork if no update is available... Of course, the fork's development 
> would be open and patch submission would be gladly accepted!

I am more than happy to accept ideas and patches.
However, in my extensive experience of TeX and LaTeX programming,
almost always the actual coding is deficient even though the
intention is good. This means that I need to work very hard
to incorporate the ideas in a robust manner.

>
> Thank you,
> -- 
> Elie

Hopefully this gives you a better idea
of where I am coming from.

Best regards,

    Ross

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From wspr81 at gmail.com  Fri Mar 26 09:50:50 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Fri, 26 Mar 2010 19:20:50 +1030
Subject: [lltx] Re: xunicode & euenc
In-Reply-To: <eba574421003260137y10a1637btd6809989da250af@mail.gmail.com>
References: <4BAB8281.4080603@telecom-bretagne.eu> <B9C221A2-F681-42F5-9D4C-1C7207A1C8AD@gmail.com> <eba574421003260120i1e2033b3g960d92ceda09f2f8@mail.gmail.com> <20100326083036.GA4555@khaled-laptop> <eba574421003260137y10a1637btd6809989da250af@mail.gmail.com>
Message-ID: <BFFCF982-2C8A-423D-A28D-EE833137D390@gmail.com>

On 26/03/2010, at 7:07 PM, ?lie Roux wrote:

> 2010/3/26 Khaled Hosny <khaledhosny at eglug.org>:
>> 
>> If it were me, I'd just do the following, for XeTeX just load xunicode,
>> for LuaTeX, just rewrite xunicode the lua way (for example, make tables
>> of character categories and small lua functions that loop through it
>> and feed TeX with the definitions macros, get ride of TeX hackary, etc.)
>> so it is either to read and maintain for mere mortal, then incorporate
>> the new package with euenc. The luafication might not be needed on the
>> short run, but as XeTeX compatibility is not need, we should go the lua
>> way from the start (remind you of my ulterior motive; less TeX and more
>> lua).
> 
> I think the overall idea is good, but as we have something working, I
> don't really see the point, and with the current solution we can
> synchronize with new versions of xunicode simply, and this requires
> less maintenance. But I agree with you, if we have to add or change
> something big, it would be best to convert in Lua...


Right; agreed that we should keep things as are in xunicode. Especially because our approach might end up being used on XeTeX as well, best to keep things as TeX macros.


-- Will

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From wspr81 at gmail.com  Wed Mar 31 13:00:46 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Wed, 31 Mar 2010 21:30:46 +1030
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <z2r803fcee31003310351y75aa9d07x31abb08f6f241ec1@mail.gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com> <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com> <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com> <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com> <803fcee31003300515v1ff83334uf1d99e9e018a9314@mail.gmail.com> <20100330134241.GB3788@khaled-laptop> <y2p803fcee31003301907l3269fcdcjdeda943d88507df4@mail.gmail.com> <20100331085747.GB2417@khaled-laptop> <v2x803fcee31003310222uadece945k8aed3b0a7907efb5@mail.gmail.com> <B787C6AD-5ED7-45C3-84A2-3F15B6628CFF@gmail.com> <z2r803fcee31003310351y75aa9d07x31abb08f6f241ec1@mail.gmail.com>
Message-ID: <A853E504-B534-4F50-8B88-76A51022378A@gmail.com>

On 31/03/2010, at 9:21 PM, Diederick C. Niehorster wrote:

>> You do need to be able to load a specific font face sometimes, so I'd say
>> 
>>  \setfontface\foo{Arno Pro Italic}
>> 
>> should be valid. (Say if you're using it as a swash face without an upright.)
> 
> Hmm, in that case I guess fontspec should somehow detect (or it should
> be told?) that it is loading the italic version, so that it wont try
> to load the italic version of the italic version (tho i guess it
> should load the bold version of this italic version).

\newfontface doesn't try to load any shape variations.

\newfontfamily does, but at least from the point of XeTeX it's impossible to know that you're loading an italic font and not to try loading an italic variant. LuaTeX might offer more information here but I don't really think it's a situation that needs special attention.

You can suppress italic loading by writing [ItalicFont={}] but I don't think this is documented :)

-- Will



-- 
To unsubscribe, reply using "remove me" as the subject.


From mpg at elzevir.fr  Sun Mar 28 16:14:18 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Sun, 28 Mar 2010 16:14:18 +0200
Subject: [lltx] luatextra split up
Message-ID: <4BAF643A.8050307@elzevir.fr>

Hi folks,

As discussed a few months ago, I finally split luatextra up in many packages.
Now there are three git repos:
- luatextra, holding the luatextra package
- luaextra, holding the luaextra script collection
- luatexbase, holding the luatexbase bundle

Luatexbase contains the low-level features that used to be in luatextra, mainly
resource management. It is again split up in several packages, see the readme.
The new luatextra is now merely a wrapper around the others, with a few goodies,
compatibility stuff, and things that may move to luamcallbacks some day.

For you convenience, I prepared a tds archive at http://tug.org/~mpg/packages/
holding everything in the "stable" version. If you suppress your current
luatextra installation [1], and install this zip instead, everything should
continue working as it used to, since I tried to avoid incompatible changes for
now. Please install it, give it some testing, and let me know if there are any
problems.

[1] find /path/to/texmf -type d -name luatextra -exec rm -r {} +

For now, I've just done a big cleanup, fixed bugs, and adapted packaging for
luatexbase-*. I'm now starting to make incompatible changes in the master branch
of luatexbase and luatextra so I recommend you keep the version form the above
zip for now; I'll let you know when it's more stable again and worth testing.

The overall plan is to: (1) fix obvious problems and make some improvements to
luatexbase (2) engage in a discussion with Heiko in order to merge his
luatex.sty and luatexbase (3) then aim at stabilizing luatexbase before TL10 so
that it can be used as a solid base for future development.

Manuel.

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From wspr81 at gmail.com  Wed Mar  3 05:59:09 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Wed, 3 Mar 2010 15:29:09 +1030
Subject: [lltx] Re: luamicrotype?
In-Reply-To: <20100303044820.GE3850@khaled-laptop>
References: <eba574421002220403v85ec38fhd7b09c432ec6b92f@mail.gmail.com> <4B842431.6010307@gmx.net> <4B842E29.8030608@telecom-bretagne.eu> <20100226083153.GB6311@khaled-laptop> <4B8DB61A.2070609@gmx.net> <20100303044820.GE3850@khaled-laptop>
Message-ID: <D43DFD4B-68AA-43BF-B973-6FA8B6396550@gmail.com>

On 03/03/2010, at 3:18 PM, Khaled Hosny wrote:

> I'm already struggling with fontspec having to support XeTeX too (I
> really hate when I've to deal with complex, mind blowing TeX code that
> one can replace by straightforward, easy to understand lua functions).

fontspec is a particularly bad example, because it was my first LaTeX package and grew rather awkwardly over a number of years. The code design is pretty bad, but I'm not the sort of person to rewrite things from scratch, so I'm trying to slowly fix it up as I go along.

FWIW, having not written significant amounts of Lua code yet means that actually I'm far more comfortable with TeX macros than Lua code, but I'm not arguing that Lua isn't the way to go for any new programmatic tasks.

But I agree with Robert that there's no point replacing an already-existing implementation in TeX with a new one in Lua just because Lua is the more sane programming language.

-- Will



From dcnieho at gmail.com  Wed Mar 31 03:35:58 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Wed, 31 Mar 2010 09:35:58 +0800
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <87A2A62D-0D7E-4CA3-BBEB-3E83E0B2BC68@gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
	 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
	 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
	 <87A2A62D-0D7E-4CA3-BBEB-3E83E0B2BC68@gmail.com>
Message-ID: <g2y803fcee31003301835p88524540odaf2324d4cbf7dd5@mail.gmail.com>

On Wed, Mar 31, 2010 at 6:11 AM, Will Robertson <wspr81 at gmail.com> wrote:
> On 30/03/2010, at 10:19 PM, Diederick C. Niehorster wrote:
>
>> \typeout{--1--}
>> {\addfontfeature{RawFeature=+swsh}\textit{Test}}
>> \typeout{--2--}
>> {\addfontfeature{Style=Swash}\textit{Test}}
>> \typeout{--3--}
>> {\fontspec[Style=Swash]{Arno Pro Italic}Test}
>
> Nice test, thanks.
> I don't have Arno Pro and this really shows what's going on.
> I think you've pretty much worked out why it didn't work the first time around; although fontspec should be smarter about applying {Style=Swash} even if it's not present in the upright font.
>
> (And you've noted that RawFeature doesn't check its input; this is something I'd like to change eventually too.)
>
> For your example above, you'd want to use markup like
>
> ? \addfontfeature{ItalicFeatures={Style=Swash}}
>
> or (better)
>
> ? \newfontface\swash[Style=Swash]{Arno Pro Italic}
> ? ...
> ? \swash
>
>
>> Note that LuaTex outputs the same warning for case two about a missing feature.
>
> Does seem like something is wrong with the LuaTeX processing in this example.
>
>
>> By the way, why is the font attempted to be loaded at 10.95pt when I
>> request 11pt?
>
> A legacy design decision in LaTeX.
> I'd have to look up the exact maths to check why that was chosen as the "rounded value" close to some geometric progression.

Ah, so its somewhere deep in LaTeX, maybe something for someone else
to check up on then, in general it seems nice to get exactly what you
want, should be no problem anymore nowadays. Anyway, its pretty close.

I just updated to the very latest luaotfload from github and added
your two suggested test cases, but I had to run with my old fontname
database, I'm having issues with it not being generated correctly
again (I'll reply about that in a separate email).

Testcase:
----
\documentclass[11pt]{article}

\usepackage{lipsum}
\usepackage{fontspec}
%\setmainfont[Ligatures=TeX]{TeX Gyre Heros}
\setmainfont[Ligatures=TeX]{Arno Pro}
%\setmainfont[Ligatures=TeX]{Adobe Caslon Pro}
%\setmainfont[Ligatures=TeX]{Futura Std}

\begin{document}
``fi fl ffi--ffl---ff!`''\par
\textsc{Test}
\typeout{--1--}
{\addfontfeature{RawFeature=+swsh}\textit{Test}}
\typeout{--2--}
{\addfontfeature{Style=Swash}\textit{Test}}
\typeout{--3--}
{\fontspec[Style=Swash]{Arno Pro Italic}Test}
\typeout{--4--}
{\addfontfeature{ItalicFeatures={Style=Swash}}\textit{Test}}
\typeout{--5--}
\newfontface\swash[Style=Swash]{Arno Pro Italic}
{\swash Test}


\lipsum
\end{document}
----

here's what i get:

XeTeX (log + output attached):
Notice that attempt 5 fails (I kept pressing enter till processing
completed). Also notice that 4 should be fine, but no swash is
actually found in the output file

LuaTeX (log + output attached):
No ligatures, swashes, smallcaps (note the very first test is supposed
to be in small caps, like in teh xetex output). Also, both cases 3 and
5 fail. regarding case 3, I seem to be having more issues with the
font name database under lua, so that might be related ;)

Georg, i see very similar memory usage. Taco looked into it and
submitted one small patch plus noted that some memory use
optimizations in the context version of the code are not in the latex
versions yet. The difference in his test was between around 800 and
around 350 MB (latex and context respectively). Anyway, as long as the
machine doesn't run out, we're good!

Best,
Dee


-- 
To unsubscribe, reply using "remove me" as the subject.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lipsum_test_luatex.log
Type: application/octet-stream
Size: 131079 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100331/852bdea2/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lipsum_test_luatex.pdf
Type: application/pdf
Size: 17635 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100331/852bdea2/attachment.pdf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lipsum_test_xetex.log
Type: application/octet-stream
Size: 112026 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100331/852bdea2/attachment-0001.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lipsum_test_xetex.pdf
Type: application/pdf
Size: 20900 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100331/852bdea2/attachment-0001.pdf>

From wspr81 at gmail.com  Fri Mar 26 09:24:01 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Fri, 26 Mar 2010 18:54:01 +1030
Subject: [lltx] Re: xunicode & euenc
In-Reply-To: <eba574421003260120i1e2033b3g960d92ceda09f2f8@mail.gmail.com>
References: <4BAB8281.4080603@telecom-bretagne.eu> <B9C221A2-F681-42F5-9D4C-1C7207A1C8AD@gmail.com> <eba574421003260120i1e2033b3g960d92ceda09f2f8@mail.gmail.com>
Message-ID: <20052352-D1D2-429D-80B0-63B9F3EDB9E2@gmail.com>

On 26/03/2010, at 6:50 PM, ?lie Roux wrote:

>> * Try to counteract any conflicts that may occur with (new) euenc plus old xunicode. It might be that we can only incorporate xunicode into the EU2 encoding to avoid problems with backwards compatibility in XeTeX. If Ross is stepping back for supplying xunicode for LuaTeX, I see no problem with incorporating its features into euenc.
> 
> In fact, one of the problems are that the loading is made in the
> Options part of fontenc... meaning no ProvidesPackage, no
> RequirePackage, etc. so we just can't input xunicode.sty in
> euxenc.def... that's why I had do modify it. Unless you have some
> hacks to counter this? Should we hack some macros to pretend we're not
> in the Options section?


Nah, I think the current approach of forking xunicode for this purpose is best for now. Even if it's only for EU2 (i.e., just for LuaTeX).

-- Will

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From mpg at elzevir.fr  Tue Mar 30 05:09:54 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Tue, 30 Mar 2010 05:09:54 +0200
Subject: [lltx] packages list
In-Reply-To: <4BB169ED.9010605@elzevir.fr>
References: <4BB169ED.9010605@elzevir.fr>
Message-ID: <4BB16B82.2080306@elzevir.fr>

Manuel P?gouri?-Gonnard a ?crit :
> Please let me know if anything is wrong or if I overlooked something.
> 
Obviously I forgot Khaled's luadirections. Sorry.

m

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From khaledhosny at eglug.org  Fri Mar 26 10:03:29 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 26 Mar 2010 11:03:29 +0200
Subject: [lltx] Re: xunicode & euenc
In-Reply-To: <BFFCF982-2C8A-423D-A28D-EE833137D390@gmail.com>
References: <4BAB8281.4080603@telecom-bretagne.eu>
 <B9C221A2-F681-42F5-9D4C-1C7207A1C8AD@gmail.com>
 <eba574421003260120i1e2033b3g960d92ceda09f2f8@mail.gmail.com>
 <20100326083036.GA4555@khaled-laptop>
 <eba574421003260137y10a1637btd6809989da250af@mail.gmail.com>
 <BFFCF982-2C8A-423D-A28D-EE833137D390@gmail.com>
Message-ID: <20100326090329.GA4933@khaled-laptop>

On Fri, Mar 26, 2010 at 07:20:50PM +1030, Will Robertson wrote:
> On 26/03/2010, at 7:07 PM, ?lie Roux wrote:
> 
> > 2010/3/26 Khaled Hosny <khaledhosny at eglug.org>:
> >> 
> >> If it were me, I'd just do the following, for XeTeX just load xunicode,
> >> for LuaTeX, just rewrite xunicode the lua way (for example, make tables
> >> of character categories and small lua functions that loop through it
> >> and feed TeX with the definitions macros, get ride of TeX hackary, etc.)
> >> so it is either to read and maintain for mere mortal, then incorporate
> >> the new package with euenc. The luafication might not be needed on the
> >> short run, but as XeTeX compatibility is not need, we should go the lua
> >> way from the start (remind you of my ulterior motive; less TeX and more
> >> lua).
> > 
> > I think the overall idea is good, but as we have something working, I
> > don't really see the point, and with the current solution we can
> > synchronize with new versions of xunicode simply, and this requires
> > less maintenance. But I agree with you, if we have to add or change
> > something big, it would be best to convert in Lua...
> 
> 
> Right; agreed that we should keep things as are in xunicode. Especially because our approach might end up being used on XeTeX as well, best to keep things as TeX macros.

XeTeX is a dead end for me, so I, myself, could not care less about it.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From elie.roux at telecom-bretagne.eu  Fri Mar 26 09:27:24 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Fri, 26 Mar 2010 10:27:24 +0200
Subject: [lltx] Re: xunicode & euenc
In-Reply-To: <20052352-D1D2-429D-80B0-63B9F3EDB9E2@gmail.com>
References: <4BAB8281.4080603@telecom-bretagne.eu>
	 <B9C221A2-F681-42F5-9D4C-1C7207A1C8AD@gmail.com>
	 <eba574421003260120i1e2033b3g960d92ceda09f2f8@mail.gmail.com>
	 <20052352-D1D2-429D-80B0-63B9F3EDB9E2@gmail.com>
Message-ID: <eba574421003260127g1b5d268cu56ddedaf083c7d24@mail.gmail.com>

2010/3/26 Will Robertson <wspr81 at gmail.com>:
>
> Nah, I think the current approach of forking xunicode for this purpose is best for now. Even if it's only for EU2 (i.e., just for LuaTeX).

Ok, let's do that!

Thank you,
-- 
Elie

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From Firmicus at gmx.net  Fri Mar 26 11:00:41 2010
From: Firmicus at gmx.net (Francois Charette)
Date: Fri, 26 Mar 2010 11:00:41 +0100
Subject: [lltx] Re: xunicode & euenc
In-Reply-To: <20100326085847.GC4766@khaled-laptop>
References: <4BAB8281.4080603@telecom-bretagne.eu> <B9C221A2-F681-42F5-9D4C-1C7207A1C8AD@gmail.com> <eba574421003260120i1e2033b3g960d92ceda09f2f8@mail.gmail.com> <20052352-D1D2-429D-80B0-63B9F3EDB9E2@gmail.com> <20100326085847.GC4766@khaled-laptop>
Message-ID: <4BAC85C9.5000702@gmx.net>

On 26/03/2010 09:58, Khaled Hosny wrote:
>
>> Nah, I think the current approach of forking xunicode for this purpose is best for now. Even if it's only for EU2 (i.e., just for LuaTeX).
>>      
> But Ross won't support it, and I doubt we can (I myself can't even read
> that code! yet to debug/fix it), but if you think you can maintain that
> fork, so be it.
>
> But again, if it were me I'd just define what xunicode is supposed to do
> and then do it from scratch in a way we can maintain. I believe this is
> the right time for us to do all sorts of experimental packages; luatex
> still in beta stage, so we can't claim our code is stable, but if we
> wait longer, I'm afraid we will eventually fall into TeX's legacy trap
> and keep every thing as is because it is supposed to be stable.
>    

Just a side-note to the above discussion:
While I can think of situations where xunicode can be really useful, I 
personally never used it and would rather suggest to anyone who has 
legacy documents that contain illegible horrors like
Mu\d{h}ammad Na\d{s}\={\i}r al-D\={\i}n al-\d{T}\=us\={\i} (to employ a 
common example from my field) and wishes to use them in XeTeX or LuaTeX 
to simply convert the documents to UTF-8 first. I have written a pretty 
complete tool "latex2utf8" that does this, and it covers pretty much 
everything that is in xunicode.sty, and some more. It is currently 
bundled with Biber (a backend for biblatex written in Perl), but I 
intend to upload it to CPAN at some point (once decode options have been 
implemented). See http://bit.ly/aFqxSz and http://bit.ly/9gc4s8 for the 
source code.

Fran?ois

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From elie.roux at telecom-bretagne.eu  Thu Mar 25 08:49:47 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Thu, 25 Mar 2010 09:49:47 +0200
Subject: [lltx] Re: Request to mailing list XeTeX rejected
In-Reply-To: <03C85696-61BC-474F-9B20-F2125883BBCA@gmail.com>
References: <mailman.0.1269461042.7251.xetex@tug.org>
	 <4BAA7824.7010103@telecom-bretagne.eu>
	 <03C85696-61BC-474F-9B20-F2125883BBCA@gmail.com>
Message-ID: <eba574421003250049h6033f7dby549b6273881f30c2@mail.gmail.com>

2010/3/25 Will Robertson <wspr81 at gmail.com>:
>
> Is the only problem at present with xunicode and LuaTeX that the package checks for the presence of the \notXeTeXformat check at the beginning of the file?

It's the only blocking problem yes... A check for XeTeX/LuaTeX to set
EU1 or EU2 instead of U and a split between TIPA and non-TIPA
definitions would be also great, but it can wait...

Thank you,
-- 
Elie

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From khaledhosny at eglug.org  Wed Mar  3 05:48:20 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 3 Mar 2010 06:48:20 +0200
Subject: [lltx] Re: luamicrotype?
In-Reply-To: <4B8DB61A.2070609@gmx.net>
References: <eba574421002220403v85ec38fhd7b09c432ec6b92f@mail.gmail.com>
 <4B842431.6010307@gmx.net>
 <4B842E29.8030608@telecom-bretagne.eu>
 <20100226083153.GB6311@khaled-laptop>
 <4B8DB61A.2070609@gmx.net>
Message-ID: <20100303044820.GE3850@khaled-laptop>

On Wed, Mar 03, 2010 at 02:06:34AM +0100, Robert wrote:
> >So why tie ourselves with legacies, where all what we
> >need, to get microtype support in fontspec, is few tens of lines written
> >in an elegant, easy to understand programming language? (most of the
> >needed work is already done in luaotfload).
> 
> I must admit that I'm a little bit puzzled as to what you're
> actually proposing. You cannot be seriously suggesting that 4000
> lines of code ("legacy" or not) and another 3000 lines of
> configuration can be replaced with "a few tens of lines"? With that
> you may be able to provide rudimentary support along the lines of
> good-old protcode.tex. The bulk of microtype, however, deals with
> the user interface, intended to be automatic, systematic,
> straight-forward and flexible. It's all there and time-tested, and I
> don't see why it should rewritten/replaced. Users won't be amused, I
> guess.

It can be very well my na?veness making me not realise the amount of
work needed. But, AFAIK, there is protrusion/expansion code already in
luaotfload (code extracted from ConTeXt) and what is missing is an
interface to it. Writing lua code is far far far straightforward than
TeX macros, so I'd even prefer a lua based solution even if it were 4
times the TeX macros solution. I'm not undermining the value of your
work, but, from maintenance point of view, I really doubt there are
many people, besides you, who can understand those ~7000 lines of TeX
macros.

I'm already struggling with fontspec having to support XeTeX too (I
really hate when I've to deal with complex, mind blowing TeX code that
one can replace by straightforward, easy to understand lua functions).

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer


From dcnieho at gmail.com  Tue Mar 30 14:15:42 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Tue, 30 Mar 2010 20:15:42 +0800
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
	 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
	 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
	 <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
Message-ID: <803fcee31003300515v1ff83334uf1d99e9e018a9314@mail.gmail.com>

Hi Elie,

On Tue, Mar 30, 2010 at 8:03 PM, ?lie Roux
<elie.roux at telecom-bretagne.eu> wrote:
> 2010/3/30 Diederick C. Niehorster <dcnieho at gmail.com>:
>>
>> --- otfl-names.lua:
>> {
>> ? ["checksum"]="F342E0175B3F2F8E22AF2FA67EB88D92",
>> ? ["familyname"]="ArnoPro",
>> ? ["filename"]="arnopro-italic.otf",
>> ? ["fontname"]="ArnoPro-Italic",
>> ? ["fontstyle_name"]="Italic",
>> ? ["fullname"]="Arno Pro Italic",
>> ? ["names"]={
>> ? ?["family"]="arnopro",
>> ? ?["fullname"]="ArnoPro-Italic",
>> ? ?["psname"]="ArnoPro-Italic",
>> ? ?["subfamily"]="Italic",
>> ? },
>> ? ["size"]={ 120, 140, 110 },
>> ? ["slant"]=-11,
>> ? ["weight"]=400,
>> ? ["width"]=5,
>> ?}
>
> Which otfl-names is it? Are you sure it is the one actually used by
> luaotfload? It never looks into the current directory (maybe it
> should?) and it looks first in the local directory then in the sys
> directory. Please try to remove all otfl-names.lua and to install only
> one in the local directory to see if you have the same result.
>

I currently have only one, in C:\Documents and
Settings\DCN\.texlive2009\texmf-var\luatex-cache\latex\names.

I deleted the empty one in the sys directory, discussed on the luatex list.

To ascertain which file is used, I renamed otfl-names.lua, getting me:
---
! LuaTeX error cannot open C:/Documents and Settings/DCN/.texlive2009/texmf-var
/luatex-cache/latex/names/otfl-names.lua: No such file or directory.
---

To trouble you some more, some other fonts I am trying to use give me
even more trouble.

Say i request Adobe Caslon Pro, "\setmainfont[Ligatures=TeX]{Adobe
Caslon Pro}", I get:
---
! LuaTeX error ...9/texmf-dist/tex/luatex/luaotfload/otfl-font-nms.lua:76: atte
mpt to compare nil with number.
<to be read again>
                   \let
l.7 \setmainfont[Ligatures=TeX]{Adobe Caslon Pro}
---

--- otfl-names.lua
{
   ["checksum"]="DB739B38957B742116B5C8DD0F0559E7",
   ["familyname"]="Adobe Caslon Pro",
   ["filename"]="acaslonpro-bold.otf",
   ["fontname"]="ACaslonPro-Bold",
   ["fullname"]="Adobe Caslon Pro Bold",
   ["names"]={
    ["family"]="adobecaslonpro",
    ["fullname"]="ACaslonPro-Bold",
    ["psname"]="ACaslonPro-Bold",
    ["subfamily"]="Bold",
   },
   ["size"]={ 120 },
   ["slant"]=0,
   ["weight"]=700,
   ["width"]=5,
  }
---

Fonts are all in subdirectories of
C:\texlive\texmf-local\fonts\opentype\adobe. fc-cache can find them
(through a local.conf, as recommended by Akira Kakuto, and seem to be
indexed properly my mkfontnamedb.lua, as they appear in
otfl-names.lua.

I thus seem to have multiple weird problems (this and the
mkfontnamedb.lua silently dying in the middle of its operation when
the --sys switch is given) with otfl, how much is it tested on windows
(and is there any reason things should work different on windows)? No
worries, I'm just curious and want to try things out. Hope the bug
reports are not coming at a too early stage of development ;)

Best,
Dee

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From khaledhosny at eglug.org  Fri Mar 26 09:30:37 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 26 Mar 2010 10:30:37 +0200
Subject: [lltx] Re: xunicode & euenc
In-Reply-To: <eba574421003260120i1e2033b3g960d92ceda09f2f8@mail.gmail.com>
References: <4BAB8281.4080603@telecom-bretagne.eu>
 <B9C221A2-F681-42F5-9D4C-1C7207A1C8AD@gmail.com>
 <eba574421003260120i1e2033b3g960d92ceda09f2f8@mail.gmail.com>
Message-ID: <20100326083036.GA4555@khaled-laptop>

On Fri, Mar 26, 2010 at 10:20:30AM +0200, ?lie Roux wrote:
> 2010/3/26 Will Robertson <wspr81 at gmail.com>:
> >
> > * Let's drop the idea of the "extras package" which provides TIPA support and so on. I think this is very niche functionality that will hardly see an audience. Remember that documents these days will usually be encoded in unicode anyway; the big advantage to xunicode is the backwards compatibility aspect providing unicode definitions for the standard LaTeX accent commands. TIPA is not among these.
> 
> Definitely agreed!
> 
> > * Try to counteract any conflicts that may occur with (new) euenc plus old xunicode. It might be that we can only incorporate xunicode into the EU2 encoding to avoid problems with backwards compatibility in XeTeX. If Ross is stepping back for supplying xunicode for LuaTeX, I see no problem with incorporating its features into euenc.
> 
> In fact, one of the problems are that the loading is made in the
> Options part of fontenc... meaning no ProvidesPackage, no
> RequirePackage, etc. so we just can't input xunicode.sty in
> euxenc.def... that's why I had do modify it. Unless you have some
> hacks to counter this? Should we hack some macros to pretend we're not
> in the Options section?

If it were me, I'd just do the following, for XeTeX just load xunicode,
for LuaTeX, just rewrite xunicode the lua way (for example, make tables
of character categories and small lua functions that loop through it
and feed TeX with the definitions macros, get ride of TeX hackary, etc.)
so it is either to read and maintain for mere mortal, then incorporate
the new package with euenc. The luafication might not be needed on the
short run, but as XeTeX compatibility is not need, we should go the lua
way from the start (remind you of my ulterior motive; less TeX and more
lua).

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From khaledhosny at eglug.org  Wed Mar  3 06:31:17 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 3 Mar 2010 07:31:17 +0200
Subject: [lltx] Re: luamicrotype?
In-Reply-To: <D43DFD4B-68AA-43BF-B973-6FA8B6396550@gmail.com>
References: <eba574421002220403v85ec38fhd7b09c432ec6b92f@mail.gmail.com>
 <4B842431.6010307@gmx.net>
 <4B842E29.8030608@telecom-bretagne.eu>
 <20100226083153.GB6311@khaled-laptop>
 <4B8DB61A.2070609@gmx.net>
 <20100303044820.GE3850@khaled-laptop>
 <D43DFD4B-68AA-43BF-B973-6FA8B6396550@gmail.com>
Message-ID: <20100303053117.GA4451@khaled-laptop>

On Wed, Mar 03, 2010 at 03:29:09PM +1030, Will Robertson wrote:
> On 03/03/2010, at 3:18 PM, Khaled Hosny wrote:
> 
> > I'm already struggling with fontspec having to support XeTeX too (I
> > really hate when I've to deal with complex, mind blowing TeX code that
> > one can replace by straightforward, easy to understand lua functions).
> 
> fontspec is a particularly bad example, because it was my first LaTeX
> package and grew rather awkwardly over a number of years. The code
> design is pretty bad, but I'm not the sort of person to rewrite things
> from scratch, so I'm trying to slowly fix it up as I go along.

Fontspec was just an example, but I do get the same "mind blow" whenever
I attempt to read any TeX code of moderate complexity, and I'm pretty
sure it isn't only me.

> FWIW, having not written significant amounts of Lua code yet means that
> actually I'm far more comfortable with TeX macros than Lua code, but I'm
> not arguing that Lua isn't the way to go for any new programmatic tasks.
> 
> But I agree with Robert that there's no point replacing an already-existing
> implementation in TeX with a new one in Lua just because Lua is the more
> sane programming language.

If there is a working TeX implementation, then it is fine, but FWIU,
microtype for LuaTeX can only do protrusion/expansion so it doesn't
provide much more than what luaotfload does provide now (except that we
don't have many predefined sets, but it is easy to convert microtype's
to some lua tables), so we are mostly talking about unwritten code here.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer


From elie.roux at telecom-bretagne.eu  Wed Mar 24 21:37:56 2010
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Wed, 24 Mar 2010 22:37:56 +0200
Subject: [lltx] Re: Request to mailing list XeTeX rejected
In-Reply-To: <mailman.0.1269461042.7251.xetex@tug.org>
References: <mailman.0.1269461042.7251.xetex@tug.org>
Message-ID: <4BAA7824.7010103@telecom-bretagne.eu>

xetex-owner at tug.org a ?crit :
> "Hello Elie, 
>   

Hello Ross,

> I have discussed the licence of xunicode with Karl Berry, and plan to
> make it essentially freely available, but would prefer it that I'm
> kept aware of any forks and changes. That is how I see it as being
> already, but others such as yourself seem to have the view that if
> nothing is said explicitly then it means "hands-off, do not touch" --
> I strongly disagree with this attitude, but will nevertheless add a
> licence statement sometime soon.
>   

Thank you! That was actually the point of making my post aggressive, I'm 
glad it worked, sorry for having been a bit brutal.

> As for your imputation that  xunicode  has been abandoned, I find this
> quite offensive. There can be many, many reasons why someone cannot
> respond quickly to your requests for action. This is especially so
> where the work is done voluntarily.
>   

In fact, I come from the open-source community, and usually the 
development is not done by only one person (like for 90% of TeX/LaTeX 
development), but by a community that sends patches, remarks, etc. This 
is what I tried to do with xunicode, and it didn't work, I'm really sad 
you still want to keep this model, I think a lot of packages would 
benefit from an open development. We are developping all the LuaLaTeX 
packages like this, and we have to interact with two closed-developped 
packages which are xunicode and microtype. Believe me it's very hard and 
frustrating when you have a community working on a project that depends 
on two packets for which we can't submit patches or even have 
informations... We would benefit a lot from an open development, that's 
why I had the idea to fork, after sending you several unanswered messages...

Maybe you could reply me that I should be more patient, but the thing is 
it's very strange to have such a development team and not to use it 
because the model of development is unapropriate...

> In fact my plan for xunicode --- when I get the time to do it --- is
> to split the file into 2 (or more) parts. One will define the
> important macros, the other will control the declarations of all the
> Unicode entities and accent combinations. This is to enable the 2nd
> part to be reloaded multiple times, with different values of the
> encoding string; e.g., 'U', 'EU','EU1' or anything else. This will
> make it much easier to adapt encodings to specific fonts, and to
> implement fall-back actions when a font is found to be missing
> specific characters that are required within a document. When I have
> done this, the version number will become 1.0 .
>   

That will be great... but TeXLive 2010 is approaching, and a lot of 
users would benefit from a xunicode working with LuaTeX. You already 
have the patch, what does prevent you from submiting it to the CTAN? 
That's the point that I cannot even try to understand...

> I hope this serves adequately as the answer that you have been
> seeking. Maybe quite soon there will be an interim update of xunicode
> that includes a test that allows luatex to proceed. This is not the
> only change that is "in the works".

I hope so! Anyway, for TeXLive 2010, I still think it's a good idea to 
fork if no update is available... Of course, the fork's development 
would be open and patch submission would be gladly accepted!

Thank you,
-- 
Elie

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From elie.roux at telecom-bretagne.eu  Tue Mar 30 16:38:10 2010
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 30 Mar 2010 17:38:10 +0300
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <20100330125211.GD2934@khaled-laptop>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com> <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com> <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com> <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com> <20100330125211.GD2934@khaled-laptop>
Message-ID: <4BB20CD2.6030507@telecom-bretagne.eu>

Khaled Hosny a ?crit :
> It'll not load one from local directory, as we explicitly use the full
> path. I'm now wondering about the usefulness of letting user select
> output directory for database if we never going to load it? May be I
> should try to load the database using kpse as well (and kpse will load
> it from current directory or some where else in texmf tree), if so,
> should I check the default path first or last?
>   

I think it would be ok to look first with kpse...

Thank you,
-- 
Elie

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From khaledhosny at eglug.org  Tue Mar  9 00:57:29 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 9 Mar 2010 01:57:29 +0200
Subject: [lltx] fontspec push
In-Reply-To: <61F1B294-2CDF-4D76-B8F6-6ADC2D51F893@gmail.com>
References: <9C59BA4B-29E3-4E46-AAD8-C4E50E76F6D7@gmail.com>
 <20100308115145.GA13421@khaled-laptop>
 <61F1B294-2CDF-4D76-B8F6-6ADC2D51F893@gmail.com>
Message-ID: <20100308235729.GA22777@khaled-laptop>

On Tue, Mar 09, 2010 at 08:38:43AM +1030, Will Robertson wrote:
> >> Added the following "programmer's interface" with, I suspect, more to
> >> come eventually. Does this all make sense? More importantly, does
> >> fontspec even compile documents for you still?
> > 
> > This code doesn't work, I get:
> > 
> > ! Undefined control sequence.
> > \fontspec_check_lang:n ...,"\l_fontspec_script_tl 
> >                                                  ")}
> > l.9 \fontspec_if_language:nTF {ROM}
> >                                    {True}{False?}/
> > ? 
> > 
> > It seems \l_fontspec_script_tl is undefined by the time this function is
> > called.
> 
> Oh, of course. At the moment I'm only saving the XeTeX script number,
> not the string it represents. I need the string for LuaTeX as well.

I kind of guessed that (I only guessed, because with TeX macro I'm never
certian).

> > I think a cleaner aproach is to call fontspec.check_ot_lang() etc.
> > directly instead of \fontspec_check_lang:n,
> 
> One of the changes I made last night makes \fontspec_check_lang:n
> exactly a wrapper around fontspec.check_ot_lang(). I like to minimise
> the number of \xetex_or_luatex:nn functions within macro definitions.

I noticed that, I wasn't actually suggesting that patch literally, but
as way to explain what I want to say (writing a code snippet is less
effort for me than writing meaningful English sentence).

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer


From khaledhosny at eglug.org  Wed Mar 31 19:36:43 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 31 Mar 2010 19:36:43 +0200
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <B787C6AD-5ED7-45C3-84A2-3F15B6628CFF@gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
 <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
 <803fcee31003300515v1ff83334uf1d99e9e018a9314@mail.gmail.com>
 <20100330134241.GB3788@khaled-laptop>
 <y2p803fcee31003301907l3269fcdcjdeda943d88507df4@mail.gmail.com>
 <20100331085747.GB2417@khaled-laptop>
 <v2x803fcee31003310222uadece945k8aed3b0a7907efb5@mail.gmail.com>
 <B787C6AD-5ED7-45C3-84A2-3F15B6628CFF@gmail.com>
Message-ID: <20100331173643.GA3657@khaled-laptop>

On Wed, Mar 31, 2010 at 08:44:05PM +1030, Will Robertson wrote:
> On 31/03/2010, at 7:52 PM, Diederick C. Niehorster wrote:
> 
> > On Wed, Mar 31, 2010 at 4:57 PM, Khaled Hosny <khaledhosny at eglug.org> wrote:
> >> On Wed, Mar 31, 2010 at 10:07:08AM +0800, Diederick C. Niehorster wrote:
> >>> Logs are attached in a zip, for
> >>> \setmainfont[Ligatures=TeX]{Arno Pro Italic} - font not found
> >> 
> >> Right now, I don't think you can get the italic font this way, as we
> >> only check for font family, I've to re-think about this.
> > 
> > Should it be possible to load font's like that (without using the
> > plain \font command, which is there for special needs)? Think it makes
> > sense for fontspec to select font families and automatically set the
> > regular, bold, italic, etc fonts actually.
> 
> You do need to be able to load a specific font face sometimes, so I'd say
> 
>   \setfontface\foo{Arno Pro Italic}
> 
> should be valid. (Say if you're using it as a swash face without an upright.)

Right, and that was the plan, but I just missed it; basically we should
try font family, if no match is found we then fallback to full name.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer


-- 
To unsubscribe, reply using "remove me" as the subject.


From khaledhosny at eglug.org  Fri Mar 26 20:37:37 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 26 Mar 2010 21:37:37 +0200
Subject: [lltx] Math error: parameter \Umathquad\displaystyle is not set.
Message-ID: <20100326193736.GA18375@khaled-laptop>

Can anyone confirm getting this error with this sample file:

\documentclass{article}
\usepackage{luaotfload}
\begin{document}
$12345$
\end{document}

No matter what version of luatex or luaotfload I use, I always get this
error:

! Math error: parameter \Umathquad\displaystyle is not set.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From dcnieho at gmail.com  Tue Mar 30 10:08:34 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Tue, 30 Mar 2010 16:08:34 +0800
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <eba574421003300053h55080e8bo2cf9410a7fc51718@mail.gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
	 <eba574421003300053h55080e8bo2cf9410a7fc51718@mail.gmail.com>
Message-ID: <803fcee31003300108m5ae93067k4ea3f51e33580f85@mail.gmail.com>

Hi ?lie,

I'm running "This is LuaTeX, Version beta-0.52.0-2010031722 (rev 3515)".

I think you've seen my thread on the luatex list, Taco already picked
it up. We exchanged some messages off-list, he said "I suspect in your
case quite a bit of memory is
being left over in the lua interpreter to be garbage collected
(but not actually collected yet)."

Best,
Dee

On Tue, Mar 30, 2010 at 3:53 PM, ?lie Roux
<elie.roux at telecom-bretagne.eu> wrote:
> 2010/3/30 Diederick C. Niehorster <dcnieho at gmail.com>:
>>
>> you might also want to note that again I managed to burn 800MB
>> compiling it.
>
> Hello,
>
> Which version of LuaTeX do you use?
>
> Thank you,
> --
> Elie
>

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From mpg at elzevir.fr  Wed Mar  3 09:26:10 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Wed, 03 Mar 2010 09:26:10 +0100
Subject: [lltx] Re: luamicrotype?
In-Reply-To: <D43DFD4B-68AA-43BF-B973-6FA8B6396550@gmail.com>
References: <eba574421002220403v85ec38fhd7b09c432ec6b92f@mail.gmail.com> <4B842431.6010307@gmx.net> <4B842E29.8030608@telecom-bretagne.eu> <20100226083153.GB6311@khaled-laptop> <4B8DB61A.2070609@gmx.net> <20100303044820.GE3850@khaled-laptop> <D43DFD4B-68AA-43BF-B973-6FA8B6396550@gmail.com>
Message-ID: <4B8E1D22.2060406@elzevir.fr>

Hi,

Will Robertson a ?crit :
> But I agree with Robert that there's no point replacing an already-existing
> implementation in TeX with a new one in Lua just because Lua is the more sane
> programming language.
> 
I strongly agree with both of you on this point.

Manuel.


From elie.roux at telecom-bretagne.eu  Wed Mar 24 15:40:20 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Wed, 24 Mar 2010 16:40:20 +0200
Subject: [lltx] xunicode
Message-ID: <eba574421003240740j24b9ba69x154fa60a1a8ff145@mail.gmail.com>

Hello,

We're trying to move xunicode from an independant package to something
loaded with EU2 (or EU1), as it would be more coherent with the
behaviour of other fontenc files. The thing is the maintainer of
xunicode doesn't answer my regular mails for 3 months or so, so we
cannot rely on him for future development and we must fork it (unless
someone knows how to make Ross Moore answer). What I did in
http://github.com/eroux/euenc is to split xunicode.sty into
euxunicode.sty and euxunicode-extra.sty (that contains the TIPA
definitions), and to load euxunicode.sty automatically in eu1enc.def
and eu2enc.def. I also added a detection of xunicode loading, and if
it is I issue a warning saying that it is deprecated and that the user
should use only fontspec.

What do you think of this solution? Improvements welcome...

Thank you,
-- 
Elie

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From dcnieho at gmail.com  Wed Mar 31 11:22:46 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Wed, 31 Mar 2010 17:22:46 +0800
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <20100331085747.GB2417@khaled-laptop>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
	 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
	 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
	 <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
	 <803fcee31003300515v1ff83334uf1d99e9e018a9314@mail.gmail.com>
	 <20100330134241.GB3788@khaled-laptop>
	 <y2p803fcee31003301907l3269fcdcjdeda943d88507df4@mail.gmail.com>
	 <20100331085747.GB2417@khaled-laptop>
Message-ID: <v2x803fcee31003310222uadece945k8aed3b0a7907efb5@mail.gmail.com>

Hi Khaled, Will,

On Wed, Mar 31, 2010 at 4:57 PM, Khaled Hosny <khaledhosny at eglug.org> wrote:
> On Wed, Mar 31, 2010 at 10:07:08AM +0800, Diederick C. Niehorster wrote:
>> Logs are attached in a zip, for
>> \setmainfont[Ligatures=TeX]{Arno Pro Italic} - font not found
>
> Right now, I don't think you can get the italic font this way, as we
> only check for font family, I've to re-think about this.

Should it be possible to load font's like that (without using the
plain \font command, which is there for special needs)? Think it makes
sense for fontspec to select font families and automatically set the
regular, bold, italic, etc fonts actually.

Best,
Dee

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From dcnieho at gmail.com  Wed Mar 31 04:07:08 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Wed, 31 Mar 2010 10:07:08 +0800
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <20100330134241.GB3788@khaled-laptop>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
	 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
	 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
	 <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
	 <803fcee31003300515v1ff83334uf1d99e9e018a9314@mail.gmail.com>
	 <20100330134241.GB3788@khaled-laptop>
Message-ID: <y2p803fcee31003301907l3269fcdcjdeda943d88507df4@mail.gmail.com>

On Tue, Mar 30, 2010 at 9:42 PM, Khaled Hosny <khaledhosny at eglug.org> wrote:
> Could you please get the current luaotfload from git, I fixed this
> particular bug yesterday I guess (luaotfload should ignore
> otfl-names.lua if it can't find it), also when you update I'll get
> proper line numbers in error messages (right now your errors don't match
> my working copy).

Hi Khaled,

Just updated, reran the tests (note the \typeout{--1--} so the font
setting can easily be found):
----
\documentclass[11pt]{article}

\usepackage{lipsum}
\usepackage{fontspec}
\typeout{--1--}
\setmainfont[Ligatures=TeX]{Arno Pro}
%\setmainfont[Ligatures=TeX]{Arno Pro Italic}
%\setmainfont[Ligatures=TeX]{Adobe Caslon Pro}

\begin{document}
\lipsum
\end{document}
----

Logs are attached in a zip, for
\setmainfont[Ligatures=TeX]{Arno Pro} - works
\setmainfont[Ligatures=TeX]{Arno Pro Italic} - font not found
\setmainfont[Ligatures=TeX]{Adobe Caslon Pro} - compare to nil error

I've also attached my otfl-names.lua. (note that as said, I had
trouble building it with the newest luaotfload from github, so this
one is about 2 days old.

Best,
Dee


-- 
To unsubscribe, reply using "remove me" as the subject.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: lipsum_test.zip
Type: application/zip
Size: 114629 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20100331/0cd3dd85/attachment.zip>

From elie.roux at telecom-bretagne.eu  Mon Mar  8 10:50:09 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Mon, 8 Mar 2010 11:50:09 +0200
Subject: [lltx] Re: font caching
In-Reply-To: <4B94C31D.10102@wxs.nl>
References: <eba574421003030017t5cdd3cb8q1483b5852e19d818@mail.gmail.com>
	 <4B94C31D.10102@wxs.nl>
Message-ID: <eba574421003080150yafb9fbehbc238ff90b305112@mail.gmail.com>

2010/3/8 Hans Hagen <pragma at wxs.nl>:
>
>> Also Hans, what code would be needed to enable font caching?
>
> if that's really needed i have to isolate some code which will take some
> time as i don't want to cripple context as side effect

That would be great, thank you!

> as the deadline for tex live is pretty close it will have to wait till after
> that

Is there a more or less precise idea on the deadline? Karl?

Thank you,
-- 
Elie


From khaledhosny at eglug.org  Tue Mar 30 14:52:11 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 30 Mar 2010 14:52:11 +0200
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
 <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
Message-ID: <20100330125211.GD2934@khaled-laptop>

On Tue, Mar 30, 2010 at 03:03:46PM +0300, ?lie Roux wrote:
> 2010/3/30 Diederick C. Niehorster <dcnieho at gmail.com>:
> >
> > --- otfl-names.lua:
> > {
> > ? ["checksum"]="F342E0175B3F2F8E22AF2FA67EB88D92",
> > ? ["familyname"]="ArnoPro",
> > ? ["filename"]="arnopro-italic.otf",
> > ? ["fontname"]="ArnoPro-Italic",
> > ? ["fontstyle_name"]="Italic",
> > ? ["fullname"]="Arno Pro Italic",
> > ? ["names"]={
> > ? ?["family"]="arnopro",
> > ? ?["fullname"]="ArnoPro-Italic",
> > ? ?["psname"]="ArnoPro-Italic",
> > ? ?["subfamily"]="Italic",
> > ? },
> > ? ["size"]={ 120, 140, 110 },
> > ? ["slant"]=-11,
> > ? ["weight"]=400,
> > ? ["width"]=5,
> > ?}
> 
> Which otfl-names is it? Are you sure it is the one actually used by
> luaotfload? It never looks into the current directory (maybe it
> should?) and it looks first in the local directory then in the sys
> directory. Please try to remove all otfl-names.lua and to install only
> one in the local directory to see if you have the same result.

It'll not load one from local directory, as we explicitly use the full
path. I'm now wondering about the usefulness of letting user select
output directory for database if we never going to load it? May be I
should try to load the database using kpse as well (and kpse will load
it from current directory or some where else in texmf tree), if so,
should I check the default path first or last?

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From khaledhosny at eglug.org  Sun Mar 28 20:29:23 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sun, 28 Mar 2010 20:29:23 +0200
Subject: [lltx] luatextra split up
In-Reply-To: <4BAF643A.8050307@elzevir.fr>
References: <4BAF643A.8050307@elzevir.fr>
Message-ID: <20100328182923.GA13406@khaled-laptop>

On Sun, Mar 28, 2010 at 04:14:18PM +0200, Manuel P?gouri?-Gonnard wrote:
> Hi folks,
> 
> As discussed a few months ago, I finally split luatextra up in many packages.
> Now there are three git repos:
> - luatextra, holding the luatextra package
> - luaextra, holding the luaextra script collection
> - luatexbase, holding the luatexbase bundle
> 
> Luatexbase contains the low-level features that used to be in luatextra, mainly
> resource management. It is again split up in several packages, see the readme.
> The new luatextra is now merely a wrapper around the others, with a few goodies,
> compatibility stuff, and things that may move to luamcallbacks some day.
> 
> For you convenience, I prepared a tds archive at http://tug.org/~mpg/packages/
> holding everything in the "stable" version. If you suppress your current
> luatextra installation [1], and install this zip instead, everything should
> continue working as it used to, since I tried to avoid incompatible changes for
> now. Please install it, give it some testing, and let me know if there are any
> problems.
> 
> [1] find /path/to/texmf -type d -name luatextra -exec rm -r {} +
> 
> For now, I've just done a big cleanup, fixed bugs, and adapted packaging for
> luatexbase-*. I'm now starting to make incompatible changes in the master branch
> of luatexbase and luatextra so I recommend you keep the version form the above
> zip for now; I'll let you know when it's more stable again and worth testing.
> 
> The overall plan is to: (1) fix obvious problems and make some improvements to
> luatexbase (2) engage in a discussion with Heiko in order to merge his
> luatex.sty and luatexbase (3) then aim at stabilizing luatexbase before TL10 so
> that it can be used as a solid base for future development.

Great news!

One small feature request I'd like to have before the major rework;
rename luamcallbacks to some name consistent with other naming scheme
and provide a LaTeX package for it, not just lua module, so all packages
can be loaded the same way (either by LaTeX's \RequirePackage{} or lua's
require() etc.) This in merely a convenience issue.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From khaledhosny at eglug.org  Wed Mar  3 13:04:31 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 3 Mar 2010 14:04:31 +0200
Subject: [lltx] Re: luamicrotype?
In-Reply-To: <4B8E1D22.2060406@elzevir.fr>
References: <eba574421002220403v85ec38fhd7b09c432ec6b92f@mail.gmail.com>
 <4B842431.6010307@gmx.net>
 <4B842E29.8030608@telecom-bretagne.eu>
 <20100226083153.GB6311@khaled-laptop>
 <4B8DB61A.2070609@gmx.net>
 <20100303044820.GE3850@khaled-laptop>
 <D43DFD4B-68AA-43BF-B973-6FA8B6396550@gmail.com>
 <4B8E1D22.2060406@elzevir.fr>
Message-ID: <20100303120431.GB7936@khaled-laptop>

On Wed, Mar 03, 2010 at 09:26:10AM +0100, Manuel P?gouri?-Gonnard wrote:
> Hi,
> 
> Will Robertson a ?crit :
> > But I agree with Robert that there's no point replacing an already-existing
> > implementation in TeX with a new one in Lua just because Lua is the more sane
> > programming language.
> > 
> I strongly agree with both of you on this point.

And I've no strong feeling, as long as I don't have to maintain/hac the
TeX implementation, otherwise I strongly disagree.

In fact, I believe that only future for *TeX is to ditch all this years
old TeX macro hackary and start anew in lua (lua has no particular
feature here, it just happen to be the only sane programming language
available to TeX hackers). But as long as I don't have to write/maintain
this TeX code, I won't complain.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer


From khaledhosny at eglug.org  Tue Mar 30 15:42:41 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 30 Mar 2010 15:42:41 +0200
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <803fcee31003300515v1ff83334uf1d99e9e018a9314@mail.gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
 <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com>
 <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
 <eba574421003300503h552fc4baof74d13eaa9ebf804@mail.gmail.com>
 <803fcee31003300515v1ff83334uf1d99e9e018a9314@mail.gmail.com>
Message-ID: <20100330134241.GB3788@khaled-laptop>

On Tue, Mar 30, 2010 at 08:15:42PM +0800, Diederick C. Niehorster wrote:
> Hi Elie,
> 
> On Tue, Mar 30, 2010 at 8:03 PM, ?lie Roux
> <elie.roux at telecom-bretagne.eu> wrote:
> > 2010/3/30 Diederick C. Niehorster <dcnieho at gmail.com>:
> >>
> >> --- otfl-names.lua:
> >> {
> >> ? ["checksum"]="F342E0175B3F2F8E22AF2FA67EB88D92",
> >> ? ["familyname"]="ArnoPro",
> >> ? ["filename"]="arnopro-italic.otf",
> >> ? ["fontname"]="ArnoPro-Italic",
> >> ? ["fontstyle_name"]="Italic",
> >> ? ["fullname"]="Arno Pro Italic",
> >> ? ["names"]={
> >> ? ?["family"]="arnopro",
> >> ? ?["fullname"]="ArnoPro-Italic",
> >> ? ?["psname"]="ArnoPro-Italic",
> >> ? ?["subfamily"]="Italic",
> >> ? },
> >> ? ["size"]={ 120, 140, 110 },
> >> ? ["slant"]=-11,
> >> ? ["weight"]=400,
> >> ? ["width"]=5,
> >> ?}
> >
> > Which otfl-names is it? Are you sure it is the one actually used by
> > luaotfload? It never looks into the current directory (maybe it
> > should?) and it looks first in the local directory then in the sys
> > directory. Please try to remove all otfl-names.lua and to install only
> > one in the local directory to see if you have the same result.
> >
> 
> I currently have only one, in C:\Documents and
> Settings\DCN\.texlive2009\texmf-var\luatex-cache\latex\names.
> 
> I deleted the empty one in the sys directory, discussed on the luatex list.
> 
> To ascertain which file is used, I renamed otfl-names.lua, getting me:
> ---
> ! LuaTeX error cannot open C:/Documents and Settings/DCN/.texlive2009/texmf-var
> /luatex-cache/latex/names/otfl-names.lua: No such file or directory.
> ---

Could you please get the current luaotfload from git, I fixed this
particular bug yesterday I guess (luaotfload should ignore
otfl-names.lua if it can't find it), also when you update I'll get
proper line numbers in error messages (right now your errors don't match
my working copy).

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From khaledhosny at eglug.org  Sat Mar 27 05:32:30 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sat, 27 Mar 2010 06:32:30 +0200
Subject: [lltx] Math error: parameter \Umathquad\displaystyle is not set.
In-Reply-To: <20100326233626.GA8893@phare.normalesup.org>
References: <20100326193736.GA18375@khaled-laptop>
 <20100326233626.GA8893@phare.normalesup.org>
Message-ID: <20100327043230.GA2309@khaled-laptop>

On Sat, Mar 27, 2010 at 12:36:26AM +0100, Arthur Reutenauer wrote:
> 	Hello Khaled,
> 
> > Can anyone confirm getting this error with this sample file:
> > 
> > [snip]
> > 
> > ! Math error: parameter \Umathquad\displaystyle is not set.
> 
>   I cannot reproduce it with any of the following combinations:
> 
>   1. TeX Live 2009 LuaTeX + TeX Live 2009 luaotfload
>   2. Latest LuaTeX (#3553) + TeX Live 2009 luaotfload
>   3. Latest LuaTeX + latest CTAN luaotfload (2010/02/22 v1.06b)
> 
>   Attached is the output and log I get by running the last combination.  Note
> that luatextra.sty etc. are from TeX Live 2009, but I doubt this makes any
> differenc.

Could you please attach the log file, I suspect it is a font issue, may
be the fonts used are different. I didn't have this issue before.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From elie.roux at telecom-bretagne.eu  Tue Mar 30 09:51:06 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Tue, 30 Mar 2010 10:51:06 +0300
Subject: [lltx] packages list
In-Reply-To: <4BB169ED.9010605@elzevir.fr>
References: <4BB169ED.9010605@elzevir.fr>
Message-ID: <eba574421003300051q1b589db0u42366039262f97aa@mail.gmail.com>

Hello,

2010/3/30 Manuel P?gouri?-Gonnard <mpg at elzevir.fr>:
>>
>> luatextra: ? ? ?loads luaextra+luatexbase+luaotfload; goodies (gen, luatex)

I think a good idea would be to make it load xltxtra under xetex... wdyt?

>> xltxtra: ? ? ? ?loads basics & fontspec; goodies & patches (ltx, xetex)
>> ? ? ? ? ? ? ? ? Plan: extend it to luatex, maybe merge luatextra in later.

If I remember correctly, a check is done for luatex, it doesn't do
anything in this case (no error), for compatibility. Maybe it should
load luatextra too?

>> luainputenc: ? ?input encoding & compat for fontenc (ltx, luatex)
>> ? ? ? ? ? ? ? ? Plan: add more modes, inc. one without active chars.

There is already one mode without active characters... but I don't
really see the point. Unless you mean really translate 8-bit encoding
to unicode? I don't think it's worth spending some time on it if you
want my opinion... the LIRC encoding works well and is fully
compatible; if we change it for real unicode, it will be less
compatible and some people may stick with old encodings (to use them
with OTF for example), and this seems totally wrong.

>> Coming next?
>>
>> lualatex-doc: ? Overview of LuaLaTeX packages for user & dev (doc, luatex)
>>
>> luafontenc: ? ? Support for old font encodings w/o active chars (ltx, luatex)
>>
>> luatex-def: ? ? luatex.def file for graphics (ltx, luatex)

Sounds good! Except for luafontenc, but I already gave my opinion...

Thank you!
-- 
Elie

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From wspr81 at gmail.com  Wed Mar 31 00:11:38 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Wed, 31 Mar 2010 08:41:38 +1030
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com> <D1E777B8-8777-4DE1-8D2D-E764B70BAF26@gmail.com> <803fcee31003300449i5bd2b885rfbb8c630b79faf63@mail.gmail.com>
Message-ID: <87A2A62D-0D7E-4CA3-BBEB-3E83E0B2BC68@gmail.com>

On 30/03/2010, at 10:19 PM, Diederick C. Niehorster wrote:

> \typeout{--1--}
> {\addfontfeature{RawFeature=+swsh}\textit{Test}}
> \typeout{--2--}
> {\addfontfeature{Style=Swash}\textit{Test}}
> \typeout{--3--}
> {\fontspec[Style=Swash]{Arno Pro Italic}Test}

Nice test, thanks.
I don't have Arno Pro and this really shows what's going on.
I think you've pretty much worked out why it didn't work the first time around; although fontspec should be smarter about applying {Style=Swash} even if it's not present in the upright font.

(And you've noted that RawFeature doesn't check its input; this is something I'd like to change eventually too.)

For your example above, you'd want to use markup like

   \addfontfeature{ItalicFeatures={Style=Swash}}

or (better)

   \newfontface\swash[Style=Swash]{Arno Pro Italic}
   ...
   \swash


> Note that LuaTex outputs the same warning for case two about a missing feature.

Does seem like something is wrong with the LuaTeX processing in this example.


> By the way, why is the font attempted to be loaded at 10.95pt when I
> request 11pt?

A legacy design decision in LaTeX.
I'd have to look up the exact maths to check why that was chosen as the "rounded value" close to some geometric progression.

-- Will



-- 
To unsubscribe, reply using "remove me" as the subject.


From elie.roux at telecom-bretagne.eu  Tue Mar 30 09:53:38 2010
From: elie.roux at telecom-bretagne.eu (=?UTF-8?Q?=C3=89lie_Roux?=)
Date: Tue, 30 Mar 2010 10:53:38 +0300
Subject: [lltx] [fontspec] selecting font features has no effect?
In-Reply-To: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
References: <214339f0-77d0-492a-a63b-4b5cd14b051b@k36g2000prb.googlegroups.com>
Message-ID: <eba574421003300053h55080e8bo2cf9410a7fc51718@mail.gmail.com>

2010/3/30 Diederick C. Niehorster <dcnieho at gmail.com>:
>
> you might also want to note that again I managed to burn 800MB
> compiling it.

Hello,

Which version of LuaTeX do you use?

Thank you,
-- 
Elie

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


From khaledhosny at eglug.org  Sat Mar 27 05:55:47 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sat, 27 Mar 2010 06:55:47 +0200
Subject: [lltx] Math error: parameter \Umathquad\displaystyle is not set.
In-Reply-To: <20100327043230.GA2309@khaled-laptop>
References: <20100326193736.GA18375@khaled-laptop>
 <20100326233626.GA8893@phare.normalesup.org>
 <20100327043230.GA2309@khaled-laptop>
Message-ID: <20100327045547.GA5058@khaled-laptop>

On Sat, Mar 27, 2010 at 06:32:30AM +0200, Khaled Hosny wrote:
> On Sat, Mar 27, 2010 at 12:36:26AM +0100, Arthur Reutenauer wrote:
> > 	Hello Khaled,
> > 
> > > Can anyone confirm getting this error with this sample file:
> > > 
> > > [snip]
> > > 
> > > ! Math error: parameter \Umathquad\displaystyle is not set.
> > 
> >   I cannot reproduce it with any of the following combinations:
> > 
> >   1. TeX Live 2009 LuaTeX + TeX Live 2009 luaotfload
> >   2. Latest LuaTeX (#3553) + TeX Live 2009 luaotfload
> >   3. Latest LuaTeX + latest CTAN luaotfload (2010/02/22 v1.06b)
> > 
> >   Attached is the output and log I get by running the last combination.  Note
> > that luatextra.sty etc. are from TeX Live 2009, but I doubt this makes any
> > differenc.
> 
> Could you please attach the log file, I suspect it is a font issue, may
> be the fonts used are different. I didn't have this issue before.

Never mind, I found the root of the issue. I've TTF versions of some CM
modern fonts installed by lyx (not in texmf tree), and for some reason
luaotfload was finding them first.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

To unsubscribe from this group, send email to lualatex-dev+unsubscribegooglegroups.com or reply to this email with the words "REMOVE ME" as the subject.


