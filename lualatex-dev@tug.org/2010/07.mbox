From m_g_n at gmx.de  Sat Jul  3 18:50:59 2010
From: m_g_n at gmx.de (M. Niedermair)
Date: Sat, 03 Jul 2010 18:50:59 +0200
Subject: [lltx] luatex-cache
Message-ID: <4C2F6A73.2070001@gmx.de>

Hi,

can I set the texmfcache directory global in a configuration file or is 
it only possible, to set it with TEXMFCACHE?
Now I use
export TEXMFCACHE=/tmp/$USER/luatex-cache
mkdir -p $TEXMFCACHE


Is it possible, to use the same directory in a multithread environment 
(about a lot of lualatex-task with the same user name)?

By
Michael


From khaledhosny at eglug.org  Sat Jul  3 20:22:49 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sat, 3 Jul 2010 21:22:49 +0300
Subject: [lltx] luatex-cache
In-Reply-To: <4C2F6A73.2070001@gmx.de>
References: <4C2F6A73.2070001@gmx.de>
Message-ID: <20100703182248.GA3331@khaled-laptop>

On Sat, Jul 03, 2010 at 06:50:59PM +0200, M. Niedermair wrote:
> Hi,
> 
> can I set the texmfcache directory global in a configuration file or
> is it only possible, to set it with TEXMFCACHE?
> Now I use
> export TEXMFCACHE=/tmp/$USER/luatex-cache
> mkdir -p $TEXMFCACHE
> 
> 
> Is it possible, to use the same directory in a multithread
> environment (about a lot of lualatex-task with the same user name)?

TEXMFCACHE is handled by kpathsea, so whatever kpathsea supports should work.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From wspr81 at gmail.com  Sun Jul 11 15:35:15 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Sun, 11 Jul 2010 23:05:15 +0930
Subject: [lltx] latest fontspec on CTAN
Message-ID: <D2B05C3E-060D-40CC-B074-74352C6620FF@gmail.com>

Hi,

Quick note to say that fontspec has been updated on CTAN and will appear in TL shortly. If you see any problems, please let me/us know as soon as possible so they can be fixed before TL2010 is final.

(I'll also try and update unicode-math tomorrow.)

Thanks,
-- Will



From wspr81 at gmail.com  Mon Jul 12 17:31:19 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Tue, 13 Jul 2010 01:01:19 +0930
Subject: [lltx] XeTeX vs LuaTeX font names
Message-ID: <3FAEC8E0-A7AC-4784-B3C1-2CDA66D155B2@gmail.com>

Hi,

When installed in Mac OS X, the Latin Modern fonts are selected individually in XeTeX with names like 
    "Latin Modern Roman 5 Regular"

With luaotfload, however, things are different:
    ["fullname"]="LM Roman 5 Regular"

(And this name doesn't work for XeTeX.)

This leads to incompatible font names depending if the document is for XeTeX or LuaTeX; is there any way around this inconsistency?

Thanks,
-- Will



From khaledhosny at eglug.org  Mon Jul 12 18:59:49 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 12 Jul 2010 19:59:49 +0300
Subject: [lltx] XeTeX vs LuaTeX font names
In-Reply-To: <3FAEC8E0-A7AC-4784-B3C1-2CDA66D155B2@gmail.com>
References: <3FAEC8E0-A7AC-4784-B3C1-2CDA66D155B2@gmail.com>
Message-ID: <20100712165949.GC872@khaled-laptop>

On Tue, Jul 13, 2010 at 01:01:19AM +0930, Will Robertson wrote:
> Hi,
> 
> When installed in Mac OS X, the Latin Modern fonts are selected individually in XeTeX with names like 
>     "Latin Modern Roman 5 Regular"
> 
> With luaotfload, however, things are different:
>     ["fullname"]="LM Roman 5 Regular"
> 
> (And this name doesn't work for XeTeX.)
> 
> This leads to incompatible font names depending if the document is for XeTeX or LuaTeX; is there any way around this inconsistency?

I had hard time supporting Latin Modern naming scheme, I thought I've
already fixed it. Now checking the font with fontforge I found that it
has different name for Mac and Windows (TrueType spec provide different
enteries in the name table for each of the two platforms), however
FontForge considers this a bug in the font and discards the Mac entry
returning only the Windows one, which is what luatex's fontloader does
too. So, there is nothing to do at luaotfload currently, until some one
patches the fontloader so that it returns both platforms names.

OK, looking again I found that they set the preferred family to "Latin
Modern Roman" and preferred style too "5 Regular", overriding the
fullname and subfamily entries, so "Latin Modern Roman 5 Regular"
should work, and indeed it was working few releases ago, but the optical
sizes feature was broken (as we would end up with a different entry for
each size in the family and thus no optical size selection would work),
so I followed the spec, AFAIU, and used the style name that is defined
in the size feature which is "Regular" without the size number.

The Latin Modern names are really a big mess, for example fontconfig
fails to handle it properly. It would have made my life easier if they
did it in a saner way.

AFAIC, I'm not doing any further work to support Latin Modern names,
anyone is free to submit patches, though.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From wspr81 at gmail.com  Mon Jul 12 19:15:42 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Tue, 13 Jul 2010 02:45:42 +0930
Subject: [lltx] XeTeX vs LuaTeX font names
In-Reply-To: <20100712165949.GC872@khaled-laptop>
References: <3FAEC8E0-A7AC-4784-B3C1-2CDA66D155B2@gmail.com>
	<20100712165949.GC872@khaled-laptop>
Message-ID: <015CB1C3-D386-4C67-B90C-43F145E4ED5D@gmail.com>



(Sent quickly. Please excuse brevity.)

On 13/07/2010, at 2:29 AM, Khaled Hosny <khaledhosny at eglug.org> wrote:

> The Latin Modern names are really a big mess, for example fontconfig
> fails to handle it properly. It would have made my life easier if they
> did it in a saner way.
> 
> AFAIC, I'm not doing any further work to support Latin Modern names,
> anyone is free to submit patches, though.

That's fine; I half expected this which is why I didn't open it as a bug. People who need cross platform consistency can load the fonts by filename or just use a conditional. 

Thanks,
W

From mpg at elzevir.fr  Mon Jul 12 19:37:27 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Mon, 12 Jul 2010 19:37:27 +0200
Subject: [lltx] XeTeX vs LuaTeX font names
In-Reply-To: <015CB1C3-D386-4C67-B90C-43F145E4ED5D@gmail.com>
References: <3FAEC8E0-A7AC-4784-B3C1-2CDA66D155B2@gmail.com>	<20100712165949.GC872@khaled-laptop>
	<015CB1C3-D386-4C67-B90C-43F145E4ED5D@gmail.com>
Message-ID: <4C3B52D7.8030309@elzevir.fr>

Le 12/07/2010 19:15, Will Robertson a ?crit :
> On 13/07/2010, at 2:29 AM, Khaled Hosny <khaledhosny at eglug.org> wrote:
> 
>> The Latin Modern names are really a big mess, for example fontconfig
>> fails to handle it properly. It would have made my life easier if they
>> did it in a saner way.
>>
>> AFAIC, I'm not doing any further work to support Latin Modern names,
>> anyone is free to submit patches, though.
> 
> That's fine; I half expected this which is why I didn't open it as a bug.
> People who need cross platform consistency can load the fonts by filename or
> just use a conditional.
> 
Don't you think it should be reported as a (minor) bug against the fonts
themselves? I see no rational reason for doing this, and it only makes things
more complicated for everyone (IMO).

Manuel.

From wspr81 at gmail.com  Tue Jul 13 15:43:19 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Tue, 13 Jul 2010 23:13:19 +0930
Subject: [lltx] unicode-math in TL2010
Message-ID: <72BA29FA-D8BD-4215-A6F4-93AC29C06087@gmail.com>

Bonjour,

Tomorrow morning I'll upload the latest version of unicode-math (http://github.com/wspr/unicode-math) to CTAN for inclusion in TeX Live 2010.

I'd do it tonight but I'm tired and thus probably would make a silly mistake along the way and then be embarrassed.

Any last minute requests/suggestions/bugs most appreciated.

The amsmath test file should now compile without errors in LuaLaTeX, but I'm not guaranteeing the output is perfect yet :) -- it's not perfect under XeTeX either but at least we're converging somewhere!

-- Will



From khaledhosny at eglug.org  Tue Jul 13 16:43:04 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 13 Jul 2010 17:43:04 +0300
Subject: [lltx] [unimath] unicode-math in TL2010
In-Reply-To: <72BA29FA-D8BD-4215-A6F4-93AC29C06087@gmail.com>
References: <72BA29FA-D8BD-4215-A6F4-93AC29C06087@gmail.com>
Message-ID: <20100713144304.GA6393@khaled-laptop>

On Tue, Jul 13, 2010 at 11:13:19PM +0930, Will Robertson wrote:
> Bonjour,
> 
> Tomorrow morning I'll upload the latest version of unicode-math (http://github.com/wspr/unicode-math) to CTAN for inclusion in TeX Live 2010.
> 
> I'd do it tonight but I'm tired and thus probably would make a silly mistake along the way and then be embarrassed.
> 
> Any last minute requests/suggestions/bugs most appreciated.
> 
> The amsmath test file should now compile without errors in LuaLaTeX, but I'm not guaranteeing the output is perfect yet :) -- it's not perfect under XeTeX either but at least we're converging somewhere!

I'd like to see some of the nice luatex features used:
* The radical macro can be done using the \Uroot primitive which takes
  care of proper degree placement
* The over/under braces, arrows which I think currently disabled, should
  be implemented using luatex's \Udelimiterover, \Udelimiterunder,
  \Umathaccent and \Umathbotaccent
* Multiple accens using \Umathaccents

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From ulrik.vieth at arcor.de  Thu Jul 15 02:32:31 2010
From: ulrik.vieth at arcor.de (Ulrik Vieth)
Date: Thu, 15 Jul 2010 02:32:31 +0200
Subject: [lltx] German Hypenation broken in LuaLaTeX for TL2010
Message-ID: <4C3E571F.802@arcor.de>

Hi,

I noticed that some recent updates of hyph-utf8 in TL2010 Pretest
seem to have broken German hypenation in LuaLaTeX.

Previously (for German at least) I could get away with simply loading
polyglossia into LuaLaTeX and ignoring the XeTeX-specific errors.
(This may not necessarily be a good solution for other languages.)

The hyphen patterns for German were preloaded in the LuaLaTeX and
the language switching from polyglossia worked just as well.

As of recently, LuaLaTeX uses a different hyphen configuration,
which states that patterns for additional languages should be loaded
at runtime, yet there is no mechanism in LuaLaTeX yet to do so.

I end up without hyphen patterns for German preloaded, and langauge 
switching has the effect of diabling hyphenation completely.

I understand that there is work in progress, but for me this has
broken something that used to work, without providing a new solution.

Maybe the hyhpen config in TL2010 should setup shoud be kept
differently for context/luatex and for lualatex, at least
temporarily until a better solution for latex is available.

What do you think?

Regards, Ulrik

From mpg at elzevir.fr  Thu Jul 15 12:13:17 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Thu, 15 Jul 2010 12:13:17 +0200
Subject: [lltx] German Hypenation broken in LuaLaTeX for TL2010
In-Reply-To: <4C3E571F.802@arcor.de>
References: <4C3E571F.802@arcor.de>
Message-ID: <4C3EDF3D.6020408@elzevir.fr>

Hi,

Le 15/07/2010 02:32, Ulrik Vieth a ?crit :
> I noticed that some recent updates of hyph-utf8 in TL2010 Pretest
> seem to have broken German hypenation in LuaLaTeX.
> 
Well, not so recent (June 1st or so), but anyway...

> As of recently, LuaLaTeX uses a different hyphen configuration,
> which states that patterns for additional languages should be loaded
> at runtime,

Correct.

> yet there is no mechanism in LuaLaTeX yet to do so.
> 
Wrong. There is such a mechanism. \bbl at patterns has been patched to use it.
Apparently polyglossia is not using this macro to load patterns (which would
make sense, since the pattern pre-loading system is from babel).

> I understand that there is work in progress, but for me this has
> broken something that used to work, without providing a new solution.
> 
Well, a new solution is provided, but we forgot to check if it would work ootb
with polyglossia. OTOH, polyglossia is not officially supporting LuaTeX...

> Maybe the hyhpen config in TL2010 should setup shoud be kept
> differently for context/luatex and for lualatex, at least
> temporarily until a better solution for latex is available.
> 
The configuration is already entirely different for context, luatex and
lualatex, fwiw.

> What do you think?
> 
Would it be okay for you to use a modified language switching macro with
polyglossia? If so, I can provide you with such a macro (just give me a test
file, so that I can test it).

Manuel.

From mpg at elzevir.fr  Thu Jul 15 12:34:53 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Thu, 15 Jul 2010 12:34:53 +0200
Subject: [lltx] German Hypenation broken in LuaLaTeX for TL2010
In-Reply-To: <4C3EDF3D.6020408@elzevir.fr>
References: <4C3E571F.802@arcor.de> <4C3EDF3D.6020408@elzevir.fr>
Message-ID: <4C3EE44D.9050500@elzevir.fr>

Le 15/07/2010 12:13, Manuel P?gouri?-Gonnard a ?crit :
> Would it be okay for you to use a modified language switching macro with
> polyglossia? If so, I can provide you with such a macro (just give me a test
> file, so that I can test it).
> 
Here is an attempt:

\usepackage{polyglossia}

\newcommand\loadpatterns[1]{%
  \ifx\directlua\@undefined\else
    \ifx\directlua\relax\else
      \ifcsname lu at texhyphen@loaded@\the\language\endcsname \else
        \global\@namedef{lu at texhyphen@loaded@\the\language}{}%
        \directlua{
          if not luatexhyphen then
              dofile(assert(kpse.find_file("luatex-hyphen.lua")))
          end
          luatexhyphen.loadlanguage("\luatexluaescapestring{#1}",
            \the\language)}%
      \fi
    \fi
  \fi}

\setmainlanguage{german} \loadpatterns{german}
\setotherlanguage{french} \loadpatterns{french}

For each language you declare in your preamble, you should use \loadpatterns for
this language. Then it should work as usual. Note that the \loadpatterns macro
will be a no-op on XeTeX.

Manuel.

From ulrik.vieth at arcor.de  Thu Jul 15 13:10:33 2010
From: ulrik.vieth at arcor.de (ulrik.vieth at arcor.de)
Date: Thu, 15 Jul 2010 13:10:33 +0200 (CEST)
Subject: [lltx] German Hypenation broken in LuaLaTeX for TL2010
In-Reply-To: <4C3EDF3D.6020408@elzevir.fr>
References: <4C3EDF3D.6020408@elzevir.fr> <4C3E571F.802@arcor.de>
Message-ID: <7542991.1279192233632.JavaMail.ngmail@webmail13.arcor-online.net>

> Hi,
> 
> Le 15/07/2010 02:32, Ulrik Vieth a ?crit :
> > I noticed that some recent updates of hyph-utf8 in TL2010 Pretest
> > seem to have broken German hypenation in LuaLaTeX.
>
> Well, not so recent (June 1st or so), but anyway...

I suppose you are right. I probably got confused what I tested where. 
I only installed TL2010 pretest last weekend and I was so obsessed
with testing math, that I may not have looked at hypehenation yet.
 
> Wrong. There is such a mechanism. \bbl at patterns has been patched to use it.
> Apparently polyglossia is not using this macro to load patterns (which
> would make sense, since the pattern pre-loading system is from babel).

Sorry, I didn't know I was supposed to use Babel with (Lua|Xe)LaTeX.  
I was under the impression that babel was for old 8-bit TeX engines only 
while polyglossia was required for Unicode TeX engines.

If this is not the case, I could happily switch to Babel just as well.
Any solution that works across formats for (Lua|Xe)LaTeX would be fine.
 
> Well, a new solution is provided, but we forgot to check if it would work
> with polyglossia. OTOH, polyglossia is not officially supporting LuaTeX...

Yes, I realize using polyglossia with LuaLaTeX was only a quick hack.
Nevertheless, it would certainly benefit from adding \ifluatex / \ifxetex
to make it run with both engines.
 
> Would it be okay for you to use a modified language switching macro with
> polyglossia? If so, I can provide you with such a macro (just give me a
> test file, so that I can test it).

I can give it a test tonight.  I don't have my test files at hand right now.

Regards, Ulrik



From elie.roux at telecom-bretagne.eu  Thu Jul 15 13:21:32 2010
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Thu, 15 Jul 2010 13:21:32 +0200
Subject: [lltx] German Hypenation broken in LuaLaTeX for TL2010
In-Reply-To: <7542991.1279192233632.JavaMail.ngmail@webmail13.arcor-online.net>
References: <4C3EDF3D.6020408@elzevir.fr> <4C3E571F.802@arcor.de>
	<7542991.1279192233632.JavaMail.ngmail@webmail13.arcor-online.net>
Message-ID: <4C3EEF3C.3080209@telecom-bretagne.eu>

ulrik.vieth at arcor.de a ?crit :
> Sorry, I didn't know I was supposed to use Babel with (Lua|Xe)LaTeX.

Hello,

actually you are supposed to use Babel with pdfLaTeX and LuaLaTeX, and 
polyglossia with XeTeX.

> Yes, I realize using polyglossia with LuaLaTeX was only a quick hack.
> Nevertheless, it would certainly benefit from adding \ifluatex / \ifxetex
> to make it run with both engines.
>   

For german it's ok, but it wouldn't work for french, as polyglossia uses 
\XeTeXinterchartokens which don't work under LuaTeX, so there is still 
quite a lot of work to do for polyglossia to work with LuaTeX.

Thank you,
-- 
Elie

From mpg at elzevir.fr  Thu Jul 15 13:30:13 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Thu, 15 Jul 2010 13:30:13 +0200
Subject: [lltx] German Hypenation broken in LuaLaTeX for TL2010
In-Reply-To: <4C3EEF3C.3080209@telecom-bretagne.eu>
References: <4C3EDF3D.6020408@elzevir.fr>
	<4C3E571F.802@arcor.de>	<7542991.1279192233632.JavaMail.ngmail@webmail13.arcor-online.net>
	<4C3EEF3C.3080209@telecom-bretagne.eu>
Message-ID: <4C3EF145.7050404@elzevir.fr>

Le 15/07/2010 13:21, Elie Roux a ?crit :
> ulrik.vieth at arcor.de a ?crit :
>> Sorry, I didn't know I was supposed to use Babel with (Lua|Xe)LaTeX.
> 
> actually you are supposed to use Babel with pdfLaTeX and LuaLaTeX, and 
> polyglossia with XeTeX.
> 
Well, I've successfully produced quite a few documents with XeTeX and babel, so
I'd say you're supposed to use:
- babel with pdfLaTeX ;
- babel or polyglossia with XeLaTeX, since both are basically working and
neither of them is a clear superset of the other ;
- babel for now with LuaLaTeX, but hopefully polyglossia will be an option soon.

Manuel.

From news3 at nililand.de  Thu Jul 15 14:59:01 2010
From: news3 at nililand.de (Ulrike Fischer)
Date: Thu, 15 Jul 2010 14:59:01 +0200
Subject: [lltx] German Hypenation broken in LuaLaTeX for TL2010
References: <4C3EDF3D.6020408@elzevir.fr> <4C3E571F.802@arcor.de>
	<7542991.1279192233632.JavaMail.ngmail@webmail13.arcor-online.net>
	<4C3EEF3C.3080209@telecom-bretagne.eu>
Message-ID: <13mj35dzkid84.dlg@nililand.de>

Am Thu, 15 Jul 2010 13:21:32 +0200 schrieb Elie Roux:


>> Sorry, I didn't know I was supposed to use Babel with (Lua|Xe)LaTeX.
 
> actually you are supposed to use Babel with pdfLaTeX and LuaLaTeX, and 
> polyglossia with XeTeX.

It depends on the language: babel works mostly fine for xelatex and
lualatex when used with languages with westerns scripts like french,
german etc. With languages with other script like e.g. russian or
greek you will in any case have to redefine all the fixed names. And
you will also have to handle the font encoding. With russian e.g.
you can get away by defining \cyrillicencoding to EU2 (or EU1 with
xetex):

\documentclass{article}
\usepackage{luaotfload}
\usepackage{fontspec}
\setmainfont{Arial Unicode MS}
\def\cyrillicencoding{EU2}
\usepackage[russian]{babel}
\begin{document}
%
%\tableofcontents
\section{^^^^0444 ^^^^0433}
\end{document}

But in greek.ldf the encoding LGR is fixed, so you will have to
redefine more commands. 


So I would certainly not say that one should use babel with lualatex
in all cases - and a lualatex compatible version of polyglossia is
really missing for a lot of languages.

-- 
Ulrike Fischer 


From firmicus at ankabut.net  Thu Jul 15 17:53:43 2010
From: firmicus at ankabut.net (=?ISO-8859-1?Q?Fran=E7ois_Charette?=)
Date: Thu, 15 Jul 2010 17:53:43 +0200
Subject: [lltx] German Hypenation broken in LuaLaTeX for TL2010
In-Reply-To: <4C3EF145.7050404@elzevir.fr>
References: <4C3EDF3D.6020408@elzevir.fr>	<4C3E571F.802@arcor.de>	<7542991.1279192233632.JavaMail.ngmail@webmail13.arcor-online.net>	<4C3EEF3C.3080209@telecom-bretagne.eu>
	<4C3EF145.7050404@elzevir.fr>
Message-ID: <4C3F2F07.3020801@ankabut.net>

  On 15/07/2010 13:30, Manuel P?gouri?-Gonnard wrote:
> Le 15/07/2010 13:21, Elie Roux a ?crit :
>> ulrik.vieth at arcor.de a ?crit :
>>> Sorry, I didn't know I was supposed to use Babel with (Lua|Xe)LaTeX.
>> actually you are supposed to use Babel with pdfLaTeX and LuaLaTeX, and
>> polyglossia with XeTeX.
>>
> Well, I've successfully produced quite a few documents with XeTeX and babel, so
> I'd say you're supposed to use:
> - babel with pdfLaTeX ;
> - babel or polyglossia with XeLaTeX, since both are basically working and
> neither of them is a clear superset of the other ;
> - babel for now with LuaLaTeX, but hopefully polyglossia will be an option soon.
>
> Manuel.
>

I concur with Manuel on each point. But as Ulrike remarked, Babel works fine under XeLaTeX 
as long as one deals with Western languages in Latin script. For such situations Babel has 
also the advantage of being (presumably) more stable than polyglossia. On the other hand, 
the latter now supports nearly 70 different languages, including "exotic" ones such as 
Syriac, Urdu, Lao and Malayalam. XeLaTeX/polyglossia is now becoming increasingly popular 
with speakers of languages using non-Latin scripts, as well as with scholars who deal with 
such languages. For them Babel is simply not an option... ;)

Concerning support for LuaLaTeX: this is something I am indeed seriously considering for a 
later version (I am about to release v1.2.0 to CTAN in the next hours). I have discussed 
this with Elie in the past, and now that fontspec and bidi support both engines, the only 
remaining issue to solve, besides that of hyphenation patterns, is the one Elie mentioned 
with \XeTeXinterchartokens, which is currently used for French, Breton, Turkish and 
Sanskrit. Otherwise support for LuaLaTeX should be pretty straightforward.

If any of you wants to contribute, please do! Polyglossia is not my property. Just clone 
the github repo, create a lualatex branch, and send a pull request. I can also register 
any of you as official collaborator, if you wish.

Regards,
Fran?ois


From arundvrjn at gmail.com  Sat Jul 17 13:39:26 2010
From: arundvrjn at gmail.com (Arun Dev)
Date: Sat, 17 Jul 2010 17:09:26 +0530
Subject: [lltx] Opentype font loading problem
In-Reply-To: <AANLkTinq2WMI4jKx2bIkXTPRqw_vtCXhsctmPKbbDA7n@mail.gmail.com>
References: <AANLkTinq2WMI4jKx2bIkXTPRqw_vtCXhsctmPKbbDA7n@mail.gmail.com>
Message-ID: <AANLkTikaz9fdQMrOpcqh_Qb1_SNVxUt41G7Z9uqOkpee@mail.gmail.com>

Hello,

          I have a WinXP SP2 system and I have the latest files of luatex and
luaotfload, fontspec, ..... packages. My problem is that while I am
able to load .ttf fonts in my windows/fonts folder, I can't use any of the .otf
fonts in luatex. An error message saying that the font cannot be
loaded because metric data not found or bad appears. But when I place
the otf files in the texmf tree I am able to use them.

Thanks

From wspr81 at gmail.com  Sun Jul 18 07:38:01 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Sun, 18 Jul 2010 15:08:01 +0930
Subject: [lltx] Opentype font loading problem
In-Reply-To: <AANLkTikaz9fdQMrOpcqh_Qb1_SNVxUt41G7Z9uqOkpee@mail.gmail.com>
References: <AANLkTinq2WMI4jKx2bIkXTPRqw_vtCXhsctmPKbbDA7n@mail.gmail.com>
	<AANLkTikaz9fdQMrOpcqh_Qb1_SNVxUt41G7Z9uqOkpee@mail.gmail.com>
Message-ID: <2AAB08CF-28A1-4260-A029-A6A902E76C5F@gmail.com>

On 17/07/2010, at 9:09 PM, Arun Dev wrote:

>          I have a WinXP SP2 system and I have the latest files of luatex and
> luaotfload, fontspec, ..... packages. My problem is that while I am
> able to load .ttf fonts in my windows/fonts folder, I can't use any of the .otf
> fonts in luatex. An error message saying that the font cannot be
> loaded because metric data not found or bad appears. But when I place
> the otf files in the texmf tree I am able to use them.

Find the script mkluatexfontdb.lua (part of luaotfload) and run it on the command line with the verbose option:

    mkluatexfontdb.lua -vvv

(maybe without the .lua extension, depending how it's installed)

It will report the locations searched for fonts and which fonts are added to the database. Perhaps that will help debug the problem.

-- Will



From arundvrjn at gmail.com  Sun Jul 18 14:42:31 2010
From: arundvrjn at gmail.com (Arun Dev)
Date: Sun, 18 Jul 2010 18:12:31 +0530
Subject: [lltx] Opentype font loading problem
In-Reply-To: <AANLkTikaz9fdQMrOpcqh_Qb1_SNVxUt41G7Z9uqOkpee@mail.gmail.com>
References: <AANLkTinq2WMI4jKx2bIkXTPRqw_vtCXhsctmPKbbDA7n@mail.gmail.com>
	<AANLkTikaz9fdQMrOpcqh_Qb1_SNVxUt41G7Z9uqOkpee@mail.gmail.com>
Message-ID: <AANLkTilpCqAM11J02NLzjfQc5_4eXHrx_-gE3uw2abOz@mail.gmail.com>

Hello,

        Running mkluatexfontdb indexes all otf fonts in the
windows\fonts folder.

luaotfload | Scanning OS fonts...
luaotfload | Searching in static system directories...
luaotfload | scanning 'C:/WINDOWS/Fonts'
luaotfload | 181 'otf' fonts found
luaotfload | 0 'OTF' fonts found
luaotfload | 146 'ttf' fonts found
luaotfload | 122 'TTF' fonts found
luaotfload | 0 'ttc' fonts found
luaotfload | 1 'TTC' fonts found
luaotfload | 0 'dfont' fonts found
luaotfload | 0 'DFONT' fonts found
luaotfload | 450 fonts found in 'C:/WINDOWS/Fonts'

luaotfload | loading font: c:/windows/fonts/minionpro-bold.otf
luaotfload | loading font: c:/windows/fonts/minionpro-boldit.otf
luaotfload | loading font: c:/windows/fonts/minionpro-it.otf
luaotfload | loading font: c:/windows/fonts/minionpro-regular.otf


But \setmainfont[Ligatures=TeX]{Minion Pro} does not work. I get the
following error message.


luaotfload | Font names database loaded: $TEXMFVAR/luatex-cache/generic/names/o
tfl-names.lua
luaotfload | Updating the font names database:
luaotfload | Scanning TEXMF fonts...
luaotfload | Scanning OS fonts...
luaotfload | define font: font with name Minion Pro is not found
luaotfload | define font: unknown font Minion Pro, loading aborted
! Font \zf at basefont=name:Minion Pro at 10pt not loadable: metric data not found
 or bad.
<to be read again>
                   \let
l.12 \setmainfont[Ligatures=TeX]{Minion Pro}

?
! Emergency stop.
<to be read again>
                   \let
l.12 \setmainfont[Ligatures=TeX]{Minion Pro}

End of file on the terminal!



Here is how much of LuaTeX's memory you used:
 7964 strings out of 257185
 100000,221844 words of node,token memory allocated 239 words of node
memory still in use:
   1 hlist, 1 rule, 1 attribute, 38 glue_spec, 1 attribute_list, 1 write, 1 dir
 nodes
   avail lists: 2:15,3:1,4:2,6:2,7:1,9:3
 11368 multiletter control sequences out of 65536+200000
 16 fonts using 520871 bytes
 47i,0n,35p,292b,70s stack positions out of 3000i,500n,5000p,500000b,5000s
!  ==> Fatal error occurred, no output PDF file produced!

But \setmainfont[Ligatures=TeX]{Times New Roman} works (Times New
Roman TTF). I can use Minion Pro fonts (or any opentype font) if I
place them in C:\w32tex\share\texmf\fonts\opentype\public\minion
folder.


Thanks

From graham.douglas at readytext.co.uk  Sun Jul 18 15:40:11 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Sun, 18 Jul 2010 14:40:11 +0100
Subject: [lltx] Problem with fontspec (! TeX capacity exceeded)
Message-ID: <4C43043B.1010401@readytext.co.uk>

Dear all

This is my first post to the list so hello to everyone
and thanks to all for your work on lualatex.

I have a problem running fontspec but to explain it I need
to give some background.

I run LuaTeX on Windows Vista, compiling the luatex binary
from source every couple of weeks. My runtime (texmf.cnf) is
a hand-written file not based on texlive etc.

I have built the lualatex .fmt file from the appropriate files:
lualatexquotejobname.tex, lualatexiniconfig.tex ,lualatex.ini etc.

Basically everything works OK, despite being a non-texlive configuration
etc. I run it like this as a way to experiment\learn etc.

OK, to the problem I'm having is as follows:

The following test file works perfectly:

\documentclass[12pt]{article}
\usepackage{fontspec}
\begin{document}
\setmainfont{Cambria}
Hello! {\textit{there} \textbf{\textit{finally dude}}}
\end{document}

PDF outputs perfectly.

Now, if I include "[Ligatures=TeX]" to \setmainfont as follows, it fails
completely (And the same failure if I run fontspec-luatex.tex)

\documentclass[12pt]{article}
\usepackage{fontspec}
\begin{document}
\setmainfont[Ligatures=TeX]{Cambria}
Hello! {\textit{there} \textbf{\textit{finally dude}}}
\end{document}

==============================

! TeX capacity exceeded, sorry [parameter stack size=60].
\XKV at f@r #1#2#3,->
                   \XKV at tempa@toks {#3}\edef #1{\the \XKV at tempa@toks 
}\ifx #1...
l.4 \setmainfont[Ligatures=TeX]{Cambria}



Any ideas why this is failing?

Many thanks in advance for any suggestions.

All the best

Graham


===========================================================
More debug using \listfiles
===========================

file=fs.tex

commandline= luatex --fmt=lualatex fs.tex

\documentclass[12pt]{article}
\listfiles
\usepackage{fontspec}
\begin{document}
\setmainfont{Cambria}
Hello! {\textit{there} \textbf{\textit{finally dude}}}
\end{document}
=======================================



Graham at GRAHAM-PORTABLE /luatex
$ luatex --fmt=lualatex fs.tex
This is LuaTeX, Version beta-0.61.0-2010070416
(g:/msys/1.0/trunk/build/texk/fs.tex
LaTeX2e <2009/09/24>
Babel <v3.8l> and hyphenation patterns for english, dumylang, 
nohyphenation, lo
aded.
(g:/msys/1.0/trunk/build/texk/formats/lualatex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class
(g:/msys/1.0/trunk/build/texk/formats/lualatex/base/size12.clo))
(g:/msys/1.0/trunk/build/texk/formats/lualatex/fontspec/fontspec.sty
(g:/texlive/Master/texmf-dist/tex/latex/expl3/expl3.sty
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3names.sty)
(g:/msys/1.0/trunk/build/texk/formats/lualatex/etex.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3basics.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3expan.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3tl.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3intexpr.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3quark.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3seq.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3toks.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3int.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3prg.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3clist.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3token.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3prop.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3msg.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3io.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3skip.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3box.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3keyval.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3keys.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3precom.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3calc.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3xref.sty)
(g:/texlive/Master/texmf-dist/tex/latex/expl3/l3file.sty))
(g:/texlive/Master/texmf-dist/tex/latex/xpackages/xbase/xparse.sty)
(g:/texlive/Master/texmf-dist/tex/generic/kastrup/binhex.tex)
(g:/msys/1.0/trunk/build/texk/formats/lualatex/luatextra/luatextra.sty
(g:/msys/1.0/trunk/build/texk/formats/lualatex/ifluatex.sty)
(g:/msys/1.0/trunk/build/texk/formats/lualatex/luatexbase/luatexbase-modutils.s
ty
(g:/msys/1.0/trunk/build/texk/formats/lualatex/luatexbase/luatexbase-loader.sty

(g:/msys/1.0/trunk/build/texk/formats/lualatex/luatexbase/luatexbase-compat.sty
)
(g:/msys/1.0/trunk/build/texk/formats/lualatex/luatexbase/luatexbase.loader.lua
))
(g:/msys/1.0/trunk/build/texk/formats/lualatex/luatexbase/modutils.lua))
(g:/msys/1.0/trunk/build/texk/formats/lualatex/luatexbase/luatexbase-attr.sty
(g:/msys/1.0/trunk/build/texk/formats/lualatex/luatexbase/attr.lua))
(g:/msys/1.0/trunk/build/texk/formats/lualatex/luatexbase/luatexbase-cctb.sty
(g:/msys/1.0/trunk/build/texk/formats/lualatex/luatexbase/cctb.lua))
(g:/msys/1.0/trunk/build/texk/formats/lualatex/luatexbase/luatexbase-regs.sty)
(g:/msys/1.0/trunk/build/texk/formats/lualatex/luatexbase/luatexbase-mcb.sty
(g:/msys/1.0/trunk/build/texk/formats/lualatex/luatexbase/mcb.lua))
(g:/msys/1.0/trunk/build/texk/formats/lualatex/lualibs/lualibs.lua)
(g:/msys/1.0/trunk/build/texk/formats/pdflatex/environ.sty)
(g:/msys/1.0/trunk/build/texk/formats/pdflatex/luaotfload/luaotfload.sty
(g:/msys/1.0/trunk/build/texk/formats/lualatex/luaotfload/luaotfload.lua)))
(g:/msys/1.0/trunk/build/texk/formats/lualatex/fontspec/fontspec.lua)
(g:/texlive/Master/texmf-dist/tex/latex/xkeyval/xkeyval.sty
(g:/texlive/Master/texmf-dist/tex/generic/xkeyval/xkeyval.tex
(g:/texlive/Master/texmf-dist/tex/generic/xkeyval/keyval.tex)))
(g:/msys/1.0/trunk/build/texk/formats/pdflatex/fontspec/fontspec-patches.sty
(g:/msys/1.0/trunk/build/texk/formats/pdflatex/base/fixltx2e.sty))
(g:/msys/1.0/trunk/build/texk/formats/pdflatex/base/fontenc.sty
(g:/texlive/Master/texmf-dist/tex/latex/euenc/eu2enc.def)
(g:/texlive/Master/texmf-dist/tex/latex/euenc/eu2lmr.fd))
fontspec.cfg loaded.
(g:/msys/1.0/trunk/build/texk/formats/pdflatex/fontspec/fontspec.cfg))
(./fs.aux)
luaotfload | Font names database loaded: 
$TEXMFVAR/luatex/generic/luaotfload/na
mes/otfl-names.lua [1{g:/msys/1.0/trunk/build/texk/fonts/map/pdftex.map}]
(./fs.aux)

  *File List*
  article.cls    2007/10/19 v1.4h Standard LaTeX document class
   size12.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
fontspec.sty    2010/06/08 v2.0 Advanced font selection for XeLaTeX/LuaLaTeX
    expl3.sty    2010/03/23 v1866 L3 Experimental code bundle wrapper
  l3names.sty    2010/03/21 v1853 L3 Experimental Naming Scheme for TeX 
Primitiv
es
     etex.sty    1998/03/26 v2.0 eTeX basic definition package (PEB)
l3basics.sty    2010/03/21 v1853 L3 Experimental basic definitions
  l3expan.sty    2010/03/24 v1873 L3 Experimental Argument Expansion module
     l3tl.sty    2010/03/24 v1873 L3 Experimental Token Lists
l3intexpr.sty    2009/03/20 v1086 L3 Integer Expressions
  l3quark.sty    2010/03/21 v1853 L3 Experimental Quark Commands
    l3seq.sty    2010/03/21 v1857 L3 Experimental sequences and stacks
   l3toks.sty    2010/03/23 v1867 L3 Experimental Token Registers
    l3int.sty    2010/03/23 v1867 L3 Experimental Integer module
    l3prg.sty    2010/03/21 v1853 L3 Experimental control structures
  l3clist.sty    2010/03/29 v1878 L3 Experimental comma separated lists
  l3token.sty    2010/03/21 v1857 L3 Experimental token investigation 
and manipu
lation
   l3prop.sty    2010/03/21 v1857 L3 Experimental Property Lists
    l3msg.sty    2010/03/23 v1866 L3 Experimental LaTeX Messages module
     l3io.sty    2010/03/21 v1853 L3 Experimental i/o module
   l3skip.sty    2010/03/23 v1867 L3 Experimental skip registers
    l3box.sty    2010/03/23 v1867 L3 Experimental Box module
l3keyval.sty    2010/03/24 v1872 L3 Experimental keyval processing
   l3keys.sty    2010/03/22 v1863 L3 Experimental key-value support
l3precom.sty    2010/02/09 v1793 L3 Experimental precompilation module
   l3calc.sty    2010/02/07 v1776 L3 Experimental calc module
   l3xref.sty    2010/02/09 v1786 L3 Experimental cross referencing
   l3file.sty    2010/03/21 v1853 L3 Experimental file loading
   xparse.sty    2010/04/26 v1897 Generic document command parser
luatextra.sty    2010/05/10 v0.97 LuaTeX extra low-level macros
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
luatexbase-modutils.sty    2010/05/27 v0.2a Module utilities for LuaTeX
luatexbase-loader.sty    2010/05/27 v0.2a Lua module loader for LuaTeX
luatexbase-compat.sty    2010/05/27 v0.2a Compatibility tools for LuaTeX
luatexbase-attr.sty    2010/05/27 v0.2a Attributes allocation for LuaTeX
luatexbase-cctb.sty    2010/05/27 v0.2a Catcodetable allocation for LuaTeX
luatexbase-regs.sty    2010/05/27 v0.2a Registers allocation for LuaTeX
luatexbase-mcb.sty    2010/05/27 v0.2a Callback management for LuaTeX
  environ.sty    2008/06/18 v0.2 A new way to define environments
luaotfload.sty    2010/06/09 v1.11 ConTeXt font loading system
  xkeyval.sty    2008/08/13 v2.6a package option processing (HA)
  xkeyval.tex    2008/08/13 v2.6a key=value parser (HA)
fontspec-patches.sty    2010/06/08 v2.0 Advanced font selection for 
XeLaTeX/Lua
LaTeX
fixltx2e.sty    2006/09/13 v1.1m fixes to LaTeX
  fontenc.sty
   eu2enc.def    2010/01/28 v0.1f Experimental Unicode font encodings
   eu2lmr.fd    2009/10/30 v1.6 Font defs for Latin Modern
fontspec.cfg
  ***********

  )
  371 words of node memory still in use:
    2 hlist, 1 vlist, 2 rule, 1 disc, 7 glue, 1 kern, 1 penalty, 2 
margin_kern,
1 glyph, 4 attribute, 41 glue_spec, 4 attribute_list, 1 temp, 1 write, 1 
dir, 1
  late_lua, 4 user_defined nodes
    avail lists: 2:98,3:2,4:28,5:6,6:30,7:1,9:6,10:1
<c:/windows/fonts/cambriaz.ttf><c:/windows/fonts/cambriai.ttf><g:/msys/1.0/trun
k/build/texk/fonts/opentype/cambria.ttc(Cambria:1)>
Output written on fs.pdf (1 page, 36527 bytes).
Transcript written on fs.log.

Graham at GRAHAM-PORTABLE /luatex
$





From elie.roux at telecom-bretagne.eu  Sun Jul 18 22:07:47 2010
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Sun, 18 Jul 2010 22:07:47 +0200
Subject: [lltx] Problem with fontspec (! TeX capacity exceeded)
In-Reply-To: <4C43043B.1010401@readytext.co.uk>
References: <4C43043B.1010401@readytext.co.uk>
Message-ID: <4C435F13.9090304@telecom-bretagne.eu>

Graham Douglas a ?crit :
> I run LuaTeX on Windows Vista, compiling the luatex binary
> from source every couple of weeks. 

Hello,

how do you compile your luatex binaries? Through cygwin or through mingw32?

Thank you,
-- 
Elie

From graham.douglas at readytext.co.uk  Sun Jul 18 22:18:42 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Sun, 18 Jul 2010 21:18:42 +0100
Subject: [lltx] Problem with fontspec (! TeX capacity exceeded)
In-Reply-To: <4C435F13.9090304@telecom-bretagne.eu>
References: <4C43043B.1010401@readytext.co.uk>
	<4C435F13.9090304@telecom-bretagne.eu>
Message-ID: <4C4361A2.40803@readytext.co.uk>

Hi Elie

mingw32. I have been doing this for many months
and (to date) it all works OK --- with plain, latex, pdflatex
formats etc.

Many thanks for your mail

Best wishes

Graham

Elie Roux wrote:
> Graham Douglas a ?crit :
>> I run LuaTeX on Windows Vista, compiling the luatex binary
>> from source every couple of weeks. 
> 
> Hello,
> 
> how do you compile your luatex binaries? Through cygwin or through mingw32?
> 
> Thank you,



From wspr81 at gmail.com  Mon Jul 19 05:09:19 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Mon, 19 Jul 2010 12:39:19 +0930
Subject: [lltx] Problem with fontspec (! TeX capacity exceeded)
In-Reply-To: <4C43043B.1010401@readytext.co.uk>
References: <4C43043B.1010401@readytext.co.uk>
Message-ID: <A2DB09EC-F321-482D-9D60-8EF006EFCA13@gmail.com>

On 18/07/2010, at 11:10 PM, Graham Douglas wrote:

> ! TeX capacity exceeded, sorry [parameter stack size=60].

Oh, I see now. From TeX by Topic:

> 35.2.9	Parameter stack size (60)
> Macro parameters may contain macro calls with further parameters. The number of
> parameters that may occur nested is bounded by the parameter stack size.

You seem to be using the original TeX defaults. 60 is far too small these days. By contrast, texmf.cnf in TL2010 has

param_size = 10000      % simultaneous macro parameters, also applies to MP

I think this will fix the problem. (Using the other parameters in texmf.cnf is probably a good idea, too.)

Cheers,
-- Will



From wspr81 at gmail.com  Mon Jul 19 06:11:38 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Mon, 19 Jul 2010 13:41:38 +0930
Subject: [lltx] Opentype font loading problem
In-Reply-To: <AANLkTilpCqAM11J02NLzjfQc5_4eXHrx_-gE3uw2abOz@mail.gmail.com>
References: <AANLkTinq2WMI4jKx2bIkXTPRqw_vtCXhsctmPKbbDA7n@mail.gmail.com>
	<AANLkTikaz9fdQMrOpcqh_Qb1_SNVxUt41G7Z9uqOkpee@mail.gmail.com>
	<AANLkTilpCqAM11J02NLzjfQc5_4eXHrx_-gE3uw2abOz@mail.gmail.com>
Message-ID: <A891D9C1-D8F3-4DE4-AF7D-1009C3F6D8C3@gmail.com>

On 18/07/2010, at 10:12 PM, Arun Dev wrote:

> luaotfload | loading font: c:/windows/fonts/minionpro-bold.otf
> luaotfload | loading font: c:/windows/fonts/minionpro-boldit.otf
> luaotfload | loading font: c:/windows/fonts/minionpro-it.otf
> luaotfload | loading font: c:/windows/fonts/minionpro-regular.otf
> 
[snip]

> ! Font \zf at basefont=name:Minion Pro at 10pt not loadable: metric data not found
> or bad.

Can anyone with Windows reproduce this behaviour?

If you can locate the font cache file (somewhere like texmf-var/luatex-cache/generic/names/otfl-names.lua) it will contain entries for each font like

   ["familyname"]="Warnock Pro",
   ["filename"]={ "/Users/will/Library/Fonts/Adobe/Warnock/WarnockPro-Regular.otf", false },
   ["fontname"]="WarnockPro-Regular",
   ["fontstyle_name"]="Regular",
   ["fullname"]="Warnock Pro Regular",
   ["names"]={
    ["family"]="Warnock Pro",
    ["fullname"]="WarnockPro-Regular",
    ["psname"]="WarnockPro-Regular",
    ["subfamily"]="Regular",
   },
   ["size"]={ 110, 129, 89 },
   ["slant"]=0,
   ["weight"]=400,
   ["width"]=5,

which will help you discover the "familyname" that you need to access Minion Pro with.

-- Will



From arundvrjn at gmail.com  Mon Jul 19 06:55:43 2010
From: arundvrjn at gmail.com (Arun Dev)
Date: Mon, 19 Jul 2010 10:25:43 +0530
Subject: [lltx] Opentype font loading problem
In-Reply-To: <A891D9C1-D8F3-4DE4-AF7D-1009C3F6D8C3@gmail.com>
References: <AANLkTinq2WMI4jKx2bIkXTPRqw_vtCXhsctmPKbbDA7n@mail.gmail.com>
	<AANLkTikaz9fdQMrOpcqh_Qb1_SNVxUt41G7Z9uqOkpee@mail.gmail.com>
	<AANLkTilpCqAM11J02NLzjfQc5_4eXHrx_-gE3uw2abOz@mail.gmail.com>
	<A891D9C1-D8F3-4DE4-AF7D-1009C3F6D8C3@gmail.com>
Message-ID: <AANLkTikKQyB8vEiwdY1AzrAgpH6pW6xTZmTt1YW60dBX@mail.gmail.com>

On 7/19/10, Will Robertson <wspr81 at gmail.com> wrote:
> On 18/07/2010, at 10:12 PM, Arun Dev wrote:
>
>> luaotfload | loading font: c:/windows/fonts/minionpro-bold.otf
>> luaotfload | loading font: c:/windows/fonts/minionpro-boldit.otf
>> luaotfload | loading font: c:/windows/fonts/minionpro-it.otf
>> luaotfload | loading font: c:/windows/fonts/minionpro-regular.otf
>>
> [snip]
>
>> ! Font \zf at basefont=name:Minion Pro at 10pt not loadable: metric data not
>> found
>> or bad.
>
> Can anyone with Windows reproduce this behaviour?
>
> If you can locate the font cache file (somewhere like
> texmf-var/luatex-cache/generic/names/otfl-names.lua) it will contain entries
> for each font like
>
>    ["familyname"]="Warnock Pro",
>    ["filename"]={
> "/Users/will/Library/Fonts/Adobe/Warnock/WarnockPro-Regular.otf", false },
>    ["fontname"]="WarnockPro-Regular",
>    ["fontstyle_name"]="Regular",
>    ["fullname"]="Warnock Pro Regular",
>    ["names"]={
>     ["family"]="Warnock Pro",
>     ["fullname"]="WarnockPro-Regular",
>     ["psname"]="WarnockPro-Regular",
>     ["subfamily"]="Regular",
>    },
>    ["size"]={ 110, 129, 89 },
>    ["slant"]=0,
>    ["weight"]=400,
>    ["width"]=5,
>
> which will help you discover the "familyname" that you need to access Minion
> Pro with.
>
> -- Will
>
>


Hi,

          I deleted the minion folder in
C:\w32tex\share\texmf\fonts\opentype\public and did a rerun of
mkluatexfontdb. My font cache contains the following lines.

{
   ["familyname"]="Minion Pro",
   ["filename"]={ "minionpro-bold.otf", false },
   ["fontname"]="MinionPro-Bold",
   ["fontstyle_name"]="Bold",
   ["fullname"]="Minion Pro Bold",
   ["names"]={
    ["family"]="Minion Pro",
    ["fullname"]="MinionPro-Bold",
    ["psname"]="MinionPro-Bold",
    ["subfamily"]="Bold",
   },
   ["size"]={ 110, 130, 84 },
   ["slant"]=0,
   ["weight"]=700,
   ["width"]=5,
  },
  {
   ["familyname"]="Minion Pro",
   ["filename"]={ "minionpro-boldit.otf", false },
   ["fontname"]="MinionPro-BoldIt",
   ["fontstyle_name"]="Bold Italic",
   ["fullname"]="Minion Pro Bold Italic",
   ["names"]={
    ["family"]="Minion Pro",
    ["fullname"]="Minion Pro Bold Ital",
    ["psname"]="MinionPro-BoldIt",
    ["subfamily"]="Bold Italic",
   },
   ["size"]={ 110, 130, 84 },
   ["slant"]=-12,
   ["weight"]=700,
   ["width"]=5,
  },
  {
   ["familyname"]="Minion Pro",
   ["filename"]={ "minionpro-it.otf", false },
   ["fontname"]="MinionPro-It",
   ["fontstyle_name"]="Italic",
   ["fullname"]="Minion Pro Italic",
   ["names"]={
    ["family"]="Minion Pro",
    ["fullname"]="Minion Pro Ital",
    ["psname"]="MinionPro-It",
    ["subfamily"]="Italic",
   },
   ["size"]={ 110, 130, 84 },
   ["slant"]=-12,
   ["weight"]=400,
   ["width"]=5,
  },
  {
   ["familyname"]="Minion Pro",
   ["filename"]={ "minionpro-regular.otf", false },
   ["fontname"]="MinionPro-Regular",
   ["fontstyle_name"]="Regular",
   ["fullname"]="Minion Pro Regular",
   ["names"]={
    ["family"]="Minion Pro",
    ["fullname"]="MinionPro-Regular",
    ["psname"]="MinionPro-Regular",
    ["subfamily"]="Regular",
   },
   ["size"]={ 110, 130, 84 },
   ["slant"]=0,
   ["weight"]=400,
   ["width"]=5,
  },


But \setmainfont[Ligatures=TeX]{Minion Pro} is not working.

From khaledhosny at eglug.org  Mon Jul 19 07:07:36 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 19 Jul 2010 08:07:36 +0300
Subject: [lltx] Opentype font loading problem
In-Reply-To: <AANLkTikKQyB8vEiwdY1AzrAgpH6pW6xTZmTt1YW60dBX@mail.gmail.com>
References: <AANLkTinq2WMI4jKx2bIkXTPRqw_vtCXhsctmPKbbDA7n@mail.gmail.com>
	<AANLkTikaz9fdQMrOpcqh_Qb1_SNVxUt41G7Z9uqOkpee@mail.gmail.com>
	<AANLkTilpCqAM11J02NLzjfQc5_4eXHrx_-gE3uw2abOz@mail.gmail.com>
	<A891D9C1-D8F3-4DE4-AF7D-1009C3F6D8C3@gmail.com>
	<AANLkTikKQyB8vEiwdY1AzrAgpH6pW6xTZmTt1YW60dBX@mail.gmail.com>
Message-ID: <20100719050631.GA1899@khaled-laptop>

On Mon, Jul 19, 2010 at 10:25:43AM +0530, Arun Dev wrote:
> On 7/19/10, Will Robertson <wspr81 at gmail.com> wrote:
> > On 18/07/2010, at 10:12 PM, Arun Dev wrote:
> >
> >> luaotfload | loading font: c:/windows/fonts/minionpro-bold.otf
> >> luaotfload | loading font: c:/windows/fonts/minionpro-boldit.otf
> >> luaotfload | loading font: c:/windows/fonts/minionpro-it.otf
> >> luaotfload | loading font: c:/windows/fonts/minionpro-regular.otf
> >>
> > [snip]
> >
> >> ! Font \zf at basefont=name:Minion Pro at 10pt not loadable: metric data not
> >> found
> >> or bad.
> >
> > Can anyone with Windows reproduce this behaviour?
> >
> > If you can locate the font cache file (somewhere like
> > texmf-var/luatex-cache/generic/names/otfl-names.lua) it will contain entries
> > for each font like
> >
> >    ["familyname"]="Warnock Pro",
> >    ["filename"]={
> > "/Users/will/Library/Fonts/Adobe/Warnock/WarnockPro-Regular.otf", false },
> >    ["fontname"]="WarnockPro-Regular",
> >    ["fontstyle_name"]="Regular",
> >    ["fullname"]="Warnock Pro Regular",
> >    ["names"]={
> >     ["family"]="Warnock Pro",
> >     ["fullname"]="WarnockPro-Regular",
> >     ["psname"]="WarnockPro-Regular",
> >     ["subfamily"]="Regular",
> >    },
> >    ["size"]={ 110, 129, 89 },
> >    ["slant"]=0,
> >    ["weight"]=400,
> >    ["width"]=5,
> >
> > which will help you discover the "familyname" that you need to access Minion
> > Pro with.
> >
> > -- Will
> >
> >
> 
> 
> Hi,
> 
>           I deleted the minion folder in
> C:\w32tex\share\texmf\fonts\opentype\public and did a rerun of
> mkluatexfontdb. My font cache contains the following lines.
> 
> {
>    ["familyname"]="Minion Pro",
>    ["filename"]={ "minionpro-bold.otf", false },
>    ["fontname"]="MinionPro-Bold",
>    ["fontstyle_name"]="Bold",
>    ["fullname"]="Minion Pro Bold",
>    ["names"]={
>     ["family"]="Minion Pro",
>     ["fullname"]="MinionPro-Bold",
>     ["psname"]="MinionPro-Bold",
>     ["subfamily"]="Bold",
>    },
>    ["size"]={ 110, 130, 84 },
>    ["slant"]=0,
>    ["weight"]=700,
>    ["width"]=5,
>   },
>   {
>    ["familyname"]="Minion Pro",
>    ["filename"]={ "minionpro-boldit.otf", false },
>    ["fontname"]="MinionPro-BoldIt",
>    ["fontstyle_name"]="Bold Italic",
>    ["fullname"]="Minion Pro Bold Italic",
>    ["names"]={
>     ["family"]="Minion Pro",
>     ["fullname"]="Minion Pro Bold Ital",
>     ["psname"]="MinionPro-BoldIt",
>     ["subfamily"]="Bold Italic",
>    },
>    ["size"]={ 110, 130, 84 },
>    ["slant"]=-12,
>    ["weight"]=700,
>    ["width"]=5,
>   },
>   {
>    ["familyname"]="Minion Pro",
>    ["filename"]={ "minionpro-it.otf", false },
>    ["fontname"]="MinionPro-It",
>    ["fontstyle_name"]="Italic",
>    ["fullname"]="Minion Pro Italic",
>    ["names"]={
>     ["family"]="Minion Pro",
>     ["fullname"]="Minion Pro Ital",
>     ["psname"]="MinionPro-It",
>     ["subfamily"]="Italic",
>    },
>    ["size"]={ 110, 130, 84 },
>    ["slant"]=-12,
>    ["weight"]=400,
>    ["width"]=5,
>   },
>   {
>    ["familyname"]="Minion Pro",
>    ["filename"]={ "minionpro-regular.otf", false },
>    ["fontname"]="MinionPro-Regular",
>    ["fontstyle_name"]="Regular",
>    ["fullname"]="Minion Pro Regular",
>    ["names"]={
>     ["family"]="Minion Pro",
>     ["fullname"]="MinionPro-Regular",
>     ["psname"]="MinionPro-Regular",
>     ["subfamily"]="Regular",
>    },
>    ["size"]={ 110, 130, 84 },
>    ["slant"]=0,
>    ["weight"]=400,
>    ["width"]=5,
>   },
> 
> 
> But \setmainfont[Ligatures=TeX]{Minion Pro} is not working.

Does `kpsewhich minionpro-regular.otf` report anything (need to be run
from command line). Can you also post the database entry of any of the
TTF fonts you ca use.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From arundvrjn at gmail.com  Mon Jul 19 07:25:14 2010
From: arundvrjn at gmail.com (Arun Dev)
Date: Mon, 19 Jul 2010 10:55:14 +0530
Subject: [lltx] Opentype font loading problem
In-Reply-To: <20100719050631.GA1899@khaled-laptop>
References: <AANLkTinq2WMI4jKx2bIkXTPRqw_vtCXhsctmPKbbDA7n@mail.gmail.com>
	<AANLkTikaz9fdQMrOpcqh_Qb1_SNVxUt41G7Z9uqOkpee@mail.gmail.com>
	<AANLkTilpCqAM11J02NLzjfQc5_4eXHrx_-gE3uw2abOz@mail.gmail.com>
	<A891D9C1-D8F3-4DE4-AF7D-1009C3F6D8C3@gmail.com>
	<AANLkTikKQyB8vEiwdY1AzrAgpH6pW6xTZmTt1YW60dBX@mail.gmail.com>
	<20100719050631.GA1899@khaled-laptop>
Message-ID: <AANLkTikw-d4JWtM_JUTncPr8iGe0atKN3OOj4G_jvQ4H@mail.gmail.com>

>
> Does `kpsewhich minionpro-regular.otf` report anything (need to be run
> from command line). Can you also post the database entry of any of the
> TTF fonts you ca use.
>
> Regards,
>  Khaled
>
> --
>  Khaled Hosny
>  Arabic localiser and member of Arabeyes.org team
>  Free font developer
>

Hi,

        kpsewhich minionpro-regular.otf is not indicating any thing. I
can use all truetype fonts in windows\fonts folder. Here is a listing
of a font.

{
   ["familyname"]="Berling Antiqua",
   ["filename"]={ "berling.ttf", false },
   ["fontname"]="BerlingAntiqua-Roman",
   ["fullname"]="Berling Antiqua",
   ["names"]={
    ["family"]="Berling Antiqua",
    ["fullname"]="Berling Antiqua",
    ["psname"]="BerlingAntiqua-Roman",
    ["subfamily"]="Regular",
   },
   ["size"]={},
   ["slant"]=0,
   ["weight"]=400,
   ["width"]=5,
  },
  {
   ["familyname"]="Berling Antiqua",
   ["filename"]={ "berlingb.ttf", false },
   ["fontname"]="BerlingAntiqua-Bold",
   ["fullname"]="Berling Antiqua Bold",
   ["names"]={
    ["family"]="Berling Antiqua",
    ["fullname"]="Berling Antiqua Bold",
    ["psname"]="BerlingAntiqua-Bold",
    ["subfamily"]="Bold",
   },
   ["size"]={},
   ["slant"]=0,
   ["weight"]=700,
   ["width"]=5,
  },
  {
   ["familyname"]="Berling Antiqua",
   ["filename"]={ "berlingi.ttf", false },
   ["fontname"]="BerlingAntiqua-Italic",
   ["fullname"]="Berling Antiqua Italic",
   ["names"]={
    ["family"]="Berling Antiqua",
    ["fullname"]="Berling Antiqua Italic",
    ["psname"]="BerlingAntiqua-Italic",
    ["subfamily"]="Italic",
   },
   ["size"]={},
   ["slant"]=-11,
   ["weight"]=400,
   ["width"]=5,
  },
  {
   ["familyname"]="Berling Antiqua",
   ["filename"]={ "berlingz.ttf", false },
   ["fontname"]="BerlingAntiqua-BoldItalic",
   ["fullname"]="Berling Antiqua Bold Italic",
   ["names"]={
    ["family"]="Berling Antiqua",
    ["fullname"]="Berling Antiqua Bold Italic",
    ["psname"]="BerlingAntiqua-BoldItalic",
    ["subfamily"]="Bold Italic",
   },
   ["size"]={},
   ["slant"]=-11,
   ["weight"]=700,
   ["width"]=5,
  },

 \setmainfont[Ligatures=TeX]{Berling Antiqua} works. But I noticed
that [Ligatures=TeX]  is not giving the desired result with truetype
fonts.

Some lines from the log file.

luaotfload | load font: auto-selecting default features for script: dflt (was l
atn)
luaotfload | load font: font family='berlingantiqua', subfamily='regular' found
: berling.ttf
luaotfload | load font: auto-selecting default features for script: dflt (was l
atn)
luaotfload | load font: font family='berlingantiqua', subfamily='bold' found: b
erlingb.ttf
LaTeX Font Info:    Font shape `EU2/Calibri(0)/bx/n' will be
(Font)              scaled to size 12.48001pt on input line 22.
luaotfload | load font: auto-selecting default features for script: dflt (was l
atn)
luaotfload | load font: font family='calibri', subfamily='bold' found: calibrib
.ttf
LaTeX Font Info:    Font shape `EU2/Calibri(0)/m/n' will be
(Font)              scaled to size 8.74863pt on input line 24.
luaotfload | load font: auto-selecting default features for script: dflt (was l
atn)
luaotfload | load font: font family='calibri', subfamily='regular' found: calib
ri.ttf
luaotfload | load font: auto-selecting default features for script: dflt (was l
atn)
luaotfload | load font: font family='berlingantiqua', subfamily='regular' found
: berling.ttf
luaotfload | load font: auto-selecting default features for script: dflt (was l
atn)
luaotfload | load font: font family='berlingantiqua', subfamily='regular' found
: berling.ttf
LaTeX Font Info:    External font `cmex10' loaded for size
(Font)              <7> on input line 25.
LaTeX Font Info:    External font `cmex10' loaded for size
(Font)              <5> on input line 25.
LaTeX Font Info:    Font shape `EU2/Consolas(0)/m/n' will be
(Font)              scaled to size 8.2869pt on input line 28.
luaotfload | load font: auto-selecting default features for script: dflt (was l
atn)
luaotfload | load font: font family='consolas', subfamily='regular' found: cons
ola.ttf
luaotfload | load font: auto-selecting default features for script: dflt (was l
atn)
luaotfload | load font: font family='berlingantiqua', subfamily='italic' found:
 berlingi.ttf
LaTeX Font Info:    Font shape `EU2/BerlingAntiqua(0)/m/sc' undefined
(Font)              using `EU2/BerlingAntiqua(0)/m/n' instead on input line 37.

LaTeX Font Info:    Font shape `EU2/Calibri(0)/bx/n' will be
(Font)              scaled to size 8.66669pt on input line 38.
luaotfload | load font: auto-selecting default features for script: dflt (was l
atn)
luaotfload | load font: font family='calibri', subfamily='bold' found: calibrib
.ttf
LaTeX Font Info:    Font shape `EU2/Calibri(0)/bx/it' will be
(Font)              scaled to size 8.66669pt on input line 38.
luaotfload | load font: auto-selecting default features for script: dflt (was l
atn)
luaotfload | load font: font family='calibri', subfamily='bolditalic' found: ca
libriz.ttf


<c:/windows/fonts/calibriz.ttf><c:/windows/fonts/berlingi.ttf><c:/windows/fonts
/consola.ttf><c:/windows/fonts/calibri.ttf><c:/windows/fonts/berling.ttf><c:/wi
ndows/fonts/calibrib.ttf><c:/windows/fonts/berlingb.ttf><c:/w32tex/share/texmf/
fonts/type1/public/amsfonts/cm/cmex10.pfb><c:/w32tex/share/texmf/fonts/type1/pu
blic/amsfonts/cm/cmmi10.pfb><c:/w32tex/share/texmf/fonts/type1/public/amsfonts/
cm/cmmi7.pfb><c:/w32tex/share/texmf/fonts/type1/public/amsfonts/cm/cmr10.pfb><c
:/w32tex/share/texmf/fonts/type1/public/amsfonts/cm/cmr7.pfb><c:/w32tex/share/t
exmf/fonts/type1/public/amsfonts/cm/cmsy10.pfb><c:/w32tex/share/texmf/fonts/typ
e1/public/amsfonts/cm/cmsy7.pfb>
Output written on fontspec-luatex.pdf (1 page, 143940 bytes).

From khaledhosny at eglug.org  Mon Jul 19 08:00:38 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 19 Jul 2010 09:00:38 +0300
Subject: [lltx] Opentype font loading problem
In-Reply-To: <AANLkTikw-d4JWtM_JUTncPr8iGe0atKN3OOj4G_jvQ4H@mail.gmail.com>
References: <AANLkTinq2WMI4jKx2bIkXTPRqw_vtCXhsctmPKbbDA7n@mail.gmail.com>
	<AANLkTikaz9fdQMrOpcqh_Qb1_SNVxUt41G7Z9uqOkpee@mail.gmail.com>
	<AANLkTilpCqAM11J02NLzjfQc5_4eXHrx_-gE3uw2abOz@mail.gmail.com>
	<A891D9C1-D8F3-4DE4-AF7D-1009C3F6D8C3@gmail.com>
	<AANLkTikKQyB8vEiwdY1AzrAgpH6pW6xTZmTt1YW60dBX@mail.gmail.com>
	<20100719050631.GA1899@khaled-laptop>
	<AANLkTikw-d4JWtM_JUTncPr8iGe0atKN3OOj4G_jvQ4H@mail.gmail.com>
Message-ID: <20100719060037.GA2708@khaled-laptop>

On Mon, Jul 19, 2010 at 10:55:14AM +0530, Arun Dev wrote:
> >
> > Does `kpsewhich minionpro-regular.otf` report anything (need to be run
> > from command line). Can you also post the database entry of any of the
> > TTF fonts you ca use.
> >
> > Regards,
> >  Khaled
> >
> > --
> >  Khaled Hosny
> >  Arabic localiser and member of Arabeyes.org team
> >  Free font developer
> >
> 
> Hi,
> 
>         kpsewhich minionpro-regular.otf is not indicating any thing. I
> can use all truetype fonts in windows\fonts folder. Here is a listing
> of a font.

Does `kpsewhich berling.ttf` find any thing then? Looks like
misconfiguration to me, what is the output of `kpsewhich -show-path .otf`
and .ttf?

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From arundvrjn at gmail.com  Mon Jul 19 08:19:16 2010
From: arundvrjn at gmail.com (Arun Dev)
Date: Mon, 19 Jul 2010 11:49:16 +0530
Subject: [lltx] Opentype font loading problem
In-Reply-To: <20100719060037.GA2708@khaled-laptop>
References: <AANLkTinq2WMI4jKx2bIkXTPRqw_vtCXhsctmPKbbDA7n@mail.gmail.com>
	<AANLkTikaz9fdQMrOpcqh_Qb1_SNVxUt41G7Z9uqOkpee@mail.gmail.com>
	<AANLkTilpCqAM11J02NLzjfQc5_4eXHrx_-gE3uw2abOz@mail.gmail.com>
	<A891D9C1-D8F3-4DE4-AF7D-1009C3F6D8C3@gmail.com>
	<AANLkTikKQyB8vEiwdY1AzrAgpH6pW6xTZmTt1YW60dBX@mail.gmail.com>
	<20100719050631.GA1899@khaled-laptop>
	<AANLkTikw-d4JWtM_JUTncPr8iGe0atKN3OOj4G_jvQ4H@mail.gmail.com>
	<20100719060037.GA2708@khaled-laptop>
Message-ID: <AANLkTilGdGTOWTO5_TY_J4M6E8cNzC2gVtJPnnEh6tEo@mail.gmail.com>

> Does `kpsewhich berling.ttf` find any thing then? Looks like
> misconfiguration to me, what is the output of `kpsewhich -show-path .otf`
> and .ttf?
>
> Regards,
>  Khaled
>
> --
>  Khaled Hosny
>  Arabic localiser and member of Arabeyes.org team
>  Free font developer
>

Hi,

        kpsewhich berling.ttf gives c:/windows/fonts/berling.ttf and
kpsewhich -show-path .otf gives
.;C:/Documents and
Settings/Personal/texmf/fonts/opentype//;C:/w32tex/share/texmf-local/fonts/opentype//;C:/w32tex/share/texmf/fonts/opentype//

kpsewhich -show-path .ttf gives


.;c:/winnt/fonts//;c:/windows/fonts//;c:/winnt35/fonts//;C:/Documents
and Settings/Personal/texmf/fonts/truetype//;C:/w32tex/share/texmf-local/fonts/truetype//;C:/w32tex/share/texmf/fonts/truetype//

From wspr81 at gmail.com  Mon Jul 19 08:19:26 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Mon, 19 Jul 2010 15:49:26 +0930
Subject: [lltx] Opentype font loading problem
In-Reply-To: <20100719060037.GA2708@khaled-laptop>
References: <AANLkTinq2WMI4jKx2bIkXTPRqw_vtCXhsctmPKbbDA7n@mail.gmail.com>
	<AANLkTikaz9fdQMrOpcqh_Qb1_SNVxUt41G7Z9uqOkpee@mail.gmail.com>
	<AANLkTilpCqAM11J02NLzjfQc5_4eXHrx_-gE3uw2abOz@mail.gmail.com>
	<A891D9C1-D8F3-4DE4-AF7D-1009C3F6D8C3@gmail.com>
	<AANLkTikKQyB8vEiwdY1AzrAgpH6pW6xTZmTt1YW60dBX@mail.gmail.com>
	<20100719050631.GA1899@khaled-laptop>
	<AANLkTikw-d4JWtM_JUTncPr8iGe0atKN3OOj4G_jvQ4H@mail.gmail.com>
	<20100719060037.GA2708@khaled-laptop>
Message-ID: <97021079-11A4-4376-97A3-4EDA72BA66A2@gmail.com>

On 19/07/2010, at 3:30 PM, Khaled Hosny wrote:

> Does `kpsewhich berling.ttf` find any thing then? Looks like
> misconfiguration to me, what is the output of `kpsewhich -show-path .otf`
> and .ttf?

Why would these show anything?

Arun is talking about fonts that are being loaded from C:/Windows/Fonts/. Fonts that *are* present in texmf locations are apparently being loaded without problem.

-- Will



From wspr81 at gmail.com  Mon Jul 19 08:29:26 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Mon, 19 Jul 2010 15:59:26 +0930
Subject: [lltx] Opentype font loading problem
In-Reply-To: <97021079-11A4-4376-97A3-4EDA72BA66A2@gmail.com>
References: <AANLkTinq2WMI4jKx2bIkXTPRqw_vtCXhsctmPKbbDA7n@mail.gmail.com>
	<AANLkTikaz9fdQMrOpcqh_Qb1_SNVxUt41G7Z9uqOkpee@mail.gmail.com>
	<AANLkTilpCqAM11J02NLzjfQc5_4eXHrx_-gE3uw2abOz@mail.gmail.com>
	<A891D9C1-D8F3-4DE4-AF7D-1009C3F6D8C3@gmail.com>
	<AANLkTikKQyB8vEiwdY1AzrAgpH6pW6xTZmTt1YW60dBX@mail.gmail.com>
	<20100719050631.GA1899@khaled-laptop>
	<AANLkTikw-d4JWtM_JUTncPr8iGe0atKN3OOj4G_jvQ4H@mail.gmail.com>
	<20100719060037.GA2708@khaled-laptop>
	<97021079-11A4-4376-97A3-4EDA72BA66A2@gmail.com>
Message-ID: <07CA9365-C1A3-4976-AC60-3457ED3D19C3@gmail.com>

On 19/07/2010, at 3:49 PM, Will Robertson wrote:

> On 19/07/2010, at 3:30 PM, Khaled Hosny wrote:
> 
>> Does `kpsewhich berling.ttf` find any thing then? Looks like
>> misconfiguration to me, what is the output of `kpsewhich -show-path .otf`
>> and .ttf?
> 
> Why would these show anything?

And:

On 19/07/2010, at 3:49 PM, Arun Dev wrote:

>        kpsewhich berling.ttf gives c:/windows/fonts/berling.ttf and


Err, clearly I don't know anything about how LuaTeX font loading works in Windows :)

Sorry for the noise,

-- Will



From arundvrjn at gmail.com  Mon Jul 19 08:54:27 2010
From: arundvrjn at gmail.com (Arun Dev)
Date: Mon, 19 Jul 2010 12:24:27 +0530
Subject: [lltx] Opentype font loading problem
In-Reply-To: <07CA9365-C1A3-4976-AC60-3457ED3D19C3@gmail.com>
References: <AANLkTinq2WMI4jKx2bIkXTPRqw_vtCXhsctmPKbbDA7n@mail.gmail.com>
	<AANLkTikaz9fdQMrOpcqh_Qb1_SNVxUt41G7Z9uqOkpee@mail.gmail.com>
	<AANLkTilpCqAM11J02NLzjfQc5_4eXHrx_-gE3uw2abOz@mail.gmail.com>
	<A891D9C1-D8F3-4DE4-AF7D-1009C3F6D8C3@gmail.com>
	<AANLkTikKQyB8vEiwdY1AzrAgpH6pW6xTZmTt1YW60dBX@mail.gmail.com>
	<20100719050631.GA1899@khaled-laptop>
	<AANLkTikw-d4JWtM_JUTncPr8iGe0atKN3OOj4G_jvQ4H@mail.gmail.com>
	<20100719060037.GA2708@khaled-laptop>
	<97021079-11A4-4376-97A3-4EDA72BA66A2@gmail.com>
	<07CA9365-C1A3-4976-AC60-3457ED3D19C3@gmail.com>
Message-ID: <AANLkTik7CAVhB41J6MvUZ9-MiGj1YadGzVKsFSfzi5W1@mail.gmail.com>

Hi,

    Thank you. The problem is solved.

From graham.douglas at readytext.co.uk  Mon Jul 19 09:42:17 2010
From: graham.douglas at readytext.co.uk (Graham Douglas)
Date: Mon, 19 Jul 2010 08:42:17 +0100
Subject: [lltx] Problem with fontspec (! TeX capacity exceeded)
In-Reply-To: <A2DB09EC-F321-482D-9D60-8EF006EFCA13@gmail.com>
References: <4C43043B.1010401@readytext.co.uk>
	<A2DB09EC-F321-482D-9D60-8EF006EFCA13@gmail.com>
Message-ID: <4C4401D9.50107@readytext.co.uk>


Hi Will

DOH! I knew about those and should have checked that before troubling you!!!

Thanks, that was the culprit.

Warm regards

Graham

Will Robertson wrote:
> On 18/07/2010, at 11:10 PM, Graham Douglas wrote:
> 
>> ! TeX capacity exceeded, sorry [parameter stack size=60].
> 
> Oh, I see now. From TeX by Topic:
> 
>> 35.2.9	Parameter stack size (60)
>> Macro parameters may contain macro calls with further parameters. The number of
>> parameters that may occur nested is bounded by the parameter stack size.
> 
> You seem to be using the original TeX defaults. 60 is far too small these days. By contrast, texmf.cnf in TL2010 has
> 
> param_size = 10000      % simultaneous macro parameters, also applies to MP
> 
> I think this will fix the problem. (Using the other parameters in texmf.cnf is probably a good idea, too.)
> 
> Cheers,
> -- Will
> 
> 
> __________ Information from ESET Smart Security, version of virus signature database 5288 (20100718) __________
> 
> The message was checked by ESET Smart Security.
> 
> http://www.eset.com
> 
> 
> 
> 



From khaledhosny at eglug.org  Mon Jul 19 09:43:56 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 19 Jul 2010 10:43:56 +0300
Subject: [lltx] Opentype font loading problem
In-Reply-To: <07CA9365-C1A3-4976-AC60-3457ED3D19C3@gmail.com>
References: <AANLkTinq2WMI4jKx2bIkXTPRqw_vtCXhsctmPKbbDA7n@mail.gmail.com>
	<AANLkTikaz9fdQMrOpcqh_Qb1_SNVxUt41G7Z9uqOkpee@mail.gmail.com>
	<AANLkTilpCqAM11J02NLzjfQc5_4eXHrx_-gE3uw2abOz@mail.gmail.com>
	<A891D9C1-D8F3-4DE4-AF7D-1009C3F6D8C3@gmail.com>
	<AANLkTikKQyB8vEiwdY1AzrAgpH6pW6xTZmTt1YW60dBX@mail.gmail.com>
	<20100719050631.GA1899@khaled-laptop>
	<AANLkTikw-d4JWtM_JUTncPr8iGe0atKN3OOj4G_jvQ4H@mail.gmail.com>
	<20100719060037.GA2708@khaled-laptop>
	<97021079-11A4-4376-97A3-4EDA72BA66A2@gmail.com>
	<07CA9365-C1A3-4976-AC60-3457ED3D19C3@gmail.com>
Message-ID: <20100719074356.GA2221@khaled-laptop>

On Mon, Jul 19, 2010 at 03:59:26PM +0930, Will Robertson wrote:
> On 19/07/2010, at 3:49 PM, Will Robertson wrote:
> 
> > On 19/07/2010, at 3:30 PM, Khaled Hosny wrote:
> > 
> >> Does `kpsewhich berling.ttf` find any thing then? Looks like
> >> misconfiguration to me, what is the output of `kpsewhich -show-path .otf`
> >> and .ttf?
> > 
> > Why would these show anything?
> 
> And:
> 
> On 19/07/2010, at 3:49 PM, Arun Dev wrote:
> 
> >        kpsewhich berling.ttf gives c:/windows/fonts/berling.ttf and
> 
> 
> Err, clearly I don't know anything about how LuaTeX font loading works in Windows :)

If OSFONTDIR is set, all fonts including system fonts are loaded by kpse
not by full path. The idea was that if kpse can found the fonts, then we
should not bother hard coding the full path in the database, this has
the advantage that the user can move his TEXMF tree and the database
need not to be rebuilt. When OSFONTDIR is set, system fonts are treated
as TEXMF fonts. In this case, OPENTYPEFONTS kpse search path didn't
include OSFONTDIR for some reason, but TTFONTS did.


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From news3 at nililand.de  Tue Jul 27 17:38:19 2010
From: news3 at nililand.de (Ulrike Fischer)
Date: Tue, 27 Jul 2010 17:38:19 +0200
Subject: [lltx] luamplig problems
Message-ID: <17pba5101nqsh$.dlg@nililand.de>

I just tried the package luamplig ([2010/05/10 v1.03 mplib package
for LuaTeX.]), and I have two problems:

1. I got an error that \luadirect is undefined. So shouldn't the
package load luatextra?

2. The documentation mentions a luatex-plain.mem file. I could
generate the file, but I couldn't find out how to tell luamplig to
actually use it. \mplibsetmemfile looked promising but didn't do
anything (I used it in the preamble after loading the package). The
only way I found was to change in luamplig.lua 

 luamplib.currentmem = "mpost" 
to 
 luamplib.currentmem = "luatex-plain". 

After this change the log-file recorded
 luamplib: using mem file ./luatex-plain.mem

But I can't believe that this is the way to go. So how it is done
correctly?

-- 
Ulrike Fischer 


From elie.roux at telecom-bretagne.eu  Tue Jul 27 21:54:45 2010
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 27 Jul 2010 21:54:45 +0200
Subject: [lltx] luamplig problems
In-Reply-To: <17pba5101nqsh$.dlg@nililand.de>
References: <17pba5101nqsh$.dlg@nililand.de>
Message-ID: <4C4F3985.9050702@telecom-bretagne.eu>

Ulrike Fischer a ?crit :
> 1. I got an error that \luadirect is undefined. So shouldn't the
> package load luatextra?
>   

Hello,

That was a mistake in the file, thank you for spotting it! I corrected 
it in the github repository (http://github.com/mpg/luamplib).

> 2. The documentation mentions a luatex-plain.mem file. I could
> generate the file, but I couldn't find out how to tell luamplig to
> actually use it. \mplibsetmemfile looked promising but didn't do
> anything (I used it in the preamble after loading the package). The
> only way I found was to change in luamplig.lua 
>
>  luamplib.currentmem = "mpost" 
> to 
>  luamplib.currentmem = "luatex-plain". 
>
> After this change the log-file recorded
>  luamplib: using mem file ./luatex-plain.mem
>
> But I can't believe that this is the way to go. So how it is done
> correctly?
>   

In fact it was another mistake in the file (I haven't used this package 
for quite a long time) which should also be fixed in the github 
repository. I changed the .mem file to mplib-luatex.mem which is the 
final name of a file that kept on changing name... this one should be 
the good one, we agreed on this with Karl, and it should be present in 
TeXLive 2010. Otherwise the way to go was 
\mplibsetmemfile{luatex-plain}. Anyway, the difference between a 
input(plain) in metapost (the default action when no format is found) 
and using a format is not really noticeable, at least for my files.

If you have feedbacks on the new github version, this would help!

Thank you,
-- 
Elie

