From simon at simifilm.ch  Thu Nov  4 07:37:38 2010
From: simon at simifilm.ch (Simon Spiegel)
Date: Thu, 4 Nov 2010 07:37:38 +0100
Subject: [lltx] Hyphenation problems
In-Reply-To: <4CB79187.5010902@elzevir.fr>
References: <17374CC4-5736-4F36-80AD-A6C8C991362F@simifilm.ch>
 <20101009080614.GA13493@khaled-laptop> <4CB03D70.4040909@elzevir.fr>
 <7C4D6B6A-B59B-4A8E-B17A-30C17C7C5142@simifilm.ch>
 <4CB79187.5010902@elzevir.fr>
Message-ID: <F80574D0-2CA3-4723-8D22-06F3EF10DD31@simifilm.ch>


On 15.10.2010, at 01:25, Manuel P?gouri?-Gonnard wrote:

> Le 13/10/2010 08:19, Simon Spiegel a ?crit :
>> Thanks for the info, but what package would that be?
> 
> Package luatex, revision 20015.
> 
>> I've been doing all updates with tlmgr and nothing has changed so far.
>> 
> Can you send us a complete example? (I mean, including a sample of the actual
> text in addition to the preamble.)

Sorry for not coming back at you earlier. Here's a minimal example which shows the problem in two instances (don't bother about the text ?)

\documentclass{scrbook}
\usepackage{hyphsubst}
\HyphSubstLet{ngerman}{ngerman-x-latest}
\usepackage{fontspec}
\usepackage[EU2]{fontenc}
\usepackage[ngerman]{babel}
\begin{document}
\setmainfont[Ligatures=TeX]{Linux Libertine O}
Heute, mit einigen Jahrzehnten Abstand, scheinen manche Forderungen der Strukturalisten vielleicht ?bertrieben. Das vollkommene Ausblenden von jeglichem Kontext, das Leugnen des Lesers, erscheint aus heutiger Sicht nicht mehr zweckm??ig. Allerdings sind einige zentrale Forderungen des Strukturalismus --~wenn auch teilweise in abgeschw?chter Form~-- Deutschsprachigen Allgemeingut der Literatur\-wissenschaft geworden. Dies wird auch deutlich, wenn man meine Ausf?hrungen zum Wesen von Literaturwissenschaft mit Todorovs Forderungen vergleicht. So wird der Grundsatz gemeinhin akzeptiert, zuerst einmal den Text zu untersuchen, bevor man sich die Biographie des Autors vorkn?pft. Die Einsicht, dass einmalige Wissenschaftler nicht ein Literatur\-kritiker ist, der den Lesern vorschreibt, was gute Literatur ist, ist ebenfalls ein Erbe des Strukturalismus.
\end{document}

Could this be related to fontspec? It seems like the hyphenation is correct when I don't load any font with fontspec

Simon

--
Simon Spiegel
Steinhaldenstr. 50
8002 Z?rich

Telephon: ++41 44 451 5334
Mobophon: ++41 76 459 60 39


http://www.simifilm.ch

?It is a sobering thought that when Mozart was my age, he had been dead for two years.? Tom Lehrer





From mpg at elzevir.fr  Thu Nov  4 22:33:40 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Thu, 04 Nov 2010 22:33:40 +0100
Subject: [lltx] luatextra update
Message-ID: <4CD326B4.50702@elzevir.fr>

Hi folks,

I just had a small burst of activity and updated a few packages, doing mainly
documentation fixes. Most notably, I added a section "planned changes" to
luatextra.pdf, concerning planned incompatible changes in the next release.
Please read it if you're interested and tell me if you disagree.

There are a few incompatible changes pending in luatexbase-modutils, but I'll
discuss them later (you can have a look at the "unstable" branch on github if
you're curious).

I also removed luatextra-reference which had become to messy, but I'll probably
revive it as an independant document lualatex-doc.pdf.

Manuel.

From mpg at elzevir.fr  Fri Nov  5 03:29:19 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 05 Nov 2010 03:29:19 +0100
Subject: [lltx] luainputenc and inputenc
In-Reply-To: <4CB9BFD7.20108@free.fr>
References: <4CB9BFD7.20108@free.fr>
Message-ID: <4CD36BFF.4040201@elzevir.fr>

Le 16/10/2010 17:08, Fr?d?ric a ?crit :
> if I compile this code with pdflatex, utf8 isn't properly handled (if I 
> change luainputenc to inputenc, it's ok) :
> 
> \documentclass{article}
> 
> \usepackage[utf8]{luainputenc}
> \usepackage[T1]{fontenc}
> \usepackage{fourier}
> 
> \begin{document}
> 
> c?p?b?
> 
> \end{document}
> 
> Is it normal ?

It isn't. I case you didn't see my reply on the luatex list, I just applied the
fix proposed by Ulrike and uploaded a new version to CTAN. It should be in TeX
Live and at your local mirror in a few days.

Thanks for your report, and sorry for reply so lately,
Manuel.

From mpg at elzevir.fr  Fri Nov  5 03:37:59 2010
From: mpg at elzevir.fr (=?windows-1252?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 05 Nov 2010 03:37:59 +0100
Subject: [lltx] Hyphenation problems
In-Reply-To: <F80574D0-2CA3-4723-8D22-06F3EF10DD31@simifilm.ch>
References: <17374CC4-5736-4F36-80AD-A6C8C991362F@simifilm.ch>
 <20101009080614.GA13493@khaled-laptop> <4CB03D70.4040909@elzevir.fr>
 <7C4D6B6A-B59B-4A8E-B17A-30C17C7C5142@simifilm.ch>
 <4CB79187.5010902@elzevir.fr>
 <F80574D0-2CA3-4723-8D22-06F3EF10DD31@simifilm.ch>
Message-ID: <4CD36E07.9070309@elzevir.fr>

Le 04/11/2010 07:37, Simon Spiegel a ?crit :
> Here's a minimal example which shows the problem in two instances (don't 
> bother about the text ?)
> 
> \documentclass{scrbook}
> \usepackage{hyphsubst}
> \HyphSubstLet{ngerman}{ngerman-x-latest}
> \usepackage{fontspec}
> \usepackage[EU2]{fontenc}
> \usepackage[ngerman]{babel}
> \begin{document}
> \setmainfont[Ligatures=TeX]{Linux Libertine O}
> Heute, mit einigen Jahrzehnten Abstand, scheinen manche Forderungen der [...]
> \end{document}
> 
> Could this be related to fontspec? It seems like the hyphenation is correct
> when I don't load any font with fontspec
> 
I must admit I'm quite surprised. Can you craft an example that doesn't use
hyphsubst? Just to narrow the investigation scope a bit further... Also, I'm
under the impression that \usepackage[EU2]{fontenc} is unneeded, fontspec should
take care of that.

Thanks,
Manuel.

From mpg at elzevir.fr  Fri Nov  5 04:24:45 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 05 Nov 2010 04:24:45 +0100
Subject: [lltx] problem with fontspec (luaotfload) & Libertine
Message-ID: <4CD378FD.1040404@elzevir.fr>

Hi,

\documentclass{article}

\usepackage{fontspec}
\setmainfont[Ligatures=TeX]{Linux Libertine O}

\begin{document}

Blabla.
\slshape bla

\end{document}

doesn't work with LuaTeX, but does work with XeLaTeX. It also works with LuaTeX
replacing \slshape with \itshape. The error is:

luaotfload | Updating the font names database:
luaotfload | Scanning TEXMF fonts...
luaotfload | Scanning OS fonts...
! Font \EU2/LinuxLibertineO(0)/m/it/10=name:Linux not loadable: metric data not
 found or bad.
<to be read again>
                   L
l.9 \slshape
             bla
?

luaotfload re-scans the fonts every time. The font is installed, since I can use
it with XeLaTeX. Attached is my otfl-names.lua file, zipped.

Thanks,
Manuel.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: db.zip
Type: application/zip
Size: 48026 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20101105/356b48c5/attachment-0001.zip>

From wspr81 at gmail.com  Fri Nov  5 04:28:38 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Fri, 5 Nov 2010 13:58:38 +1030
Subject: [lltx] problem with fontspec (luaotfload) & Libertine
In-Reply-To: <4CD378FD.1040404@elzevir.fr>
References: <4CD378FD.1040404@elzevir.fr>
Message-ID: <D8CA5146-A0C0-4C99-AE8D-93E8C78A9BB5@gmail.com>

On 05/11/2010, at 1:54 PM, Manuel P?gouri?-Gonnard wrote:

> \slshape bla
> 
> doesn't work with LuaTeX, but does work with XeLaTeX. It also works with LuaTeX
> replacing \slshape with \itshape.

Does it work if you use the version of fontspec on TLContrib?
I've been meaning to make an update this week to fix a similar problem.

-- Will



From mpg at elzevir.fr  Fri Nov  5 04:53:46 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 05 Nov 2010 04:53:46 +0100
Subject: [lltx] problem with fontspec (luaotfload) & Libertine
In-Reply-To: <D8CA5146-A0C0-4C99-AE8D-93E8C78A9BB5@gmail.com>
References: <4CD378FD.1040404@elzevir.fr>
 <D8CA5146-A0C0-4C99-AE8D-93E8C78A9BB5@gmail.com>
Message-ID: <4CD37FCA.5070705@elzevir.fr>

Le 05/11/2010 04:28, Will Robertson a ?crit :
> On 05/11/2010, at 1:54 PM, Manuel P?gouri?-Gonnard wrote:
> 
>> \slshape bla
>>
>> doesn't work with LuaTeX, but does work with XeLaTeX. It also works with LuaTeX
>> replacing \slshape with \itshape.
> 
> Does it work if you use the version of fontspec on TLContrib?
> I've been meaning to make an update this week to fix a similar problem.
> 
I'll try. In the meanwhile, I found that the following hack seems to fix the
problem:

\renewcommand\do at subst@correction{%
  \xdef\subst at correction{%
    \font at name
    \global\expandafter\font
    \csname \curr at fontshape/\f at size\endcsname
    \noexpand"\fontname\font"%
    \relax}%
  \aftergroup\subst at correction
}

Manuel.

From mpg at elzevir.fr  Fri Nov  5 05:03:46 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 05 Nov 2010 05:03:46 +0100
Subject: [lltx] problem with fontspec (luaotfload) & Libertine
In-Reply-To: <D8CA5146-A0C0-4C99-AE8D-93E8C78A9BB5@gmail.com>
References: <4CD378FD.1040404@elzevir.fr>
 <D8CA5146-A0C0-4C99-AE8D-93E8C78A9BB5@gmail.com>
Message-ID: <4CD38222.6090306@elzevir.fr>

Le 05/11/2010 04:28, Will Robertson a ?crit :
> On 05/11/2010, at 1:54 PM, Manuel P?gouri?-Gonnard wrote:
> 
>> \slshape bla
>>
>> doesn't work with LuaTeX, but does work with XeLaTeX. It also works with LuaTeX
>> replacing \slshape with \itshape.
> 
> Does it work if you use the version of fontspec on TLContrib?

It does :-)

Thanks,
Manuel.

From wspr81 at gmail.com  Fri Nov  5 05:26:50 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Fri, 5 Nov 2010 14:56:50 +1030
Subject: [lltx] problem with fontspec (luaotfload) & Libertine
In-Reply-To: <4CD37FCA.5070705@elzevir.fr>
References: <4CD378FD.1040404@elzevir.fr>
 <D8CA5146-A0C0-4C99-AE8D-93E8C78A9BB5@gmail.com>
 <4CD37FCA.5070705@elzevir.fr>
Message-ID: <CE903E95-14E5-425F-A10B-989383D2B457@gmail.com>

On 05/11/2010, at 2:23 PM, Manuel P?gouri?-Gonnard wrote:

> I'll try. In the meanwhile, I found that the following hack seems to fix the
> problem:
> 
> \renewcommand\do at subst@correction{%

Thanks for looking into it.
I have *no idea* why changing this macro fixes the problem, but since the underlying cause is fixed (or seems to be fixed) in fontspec.sty, I'll leave it as an academic exercise :)

Thanks,
-- Will



From simon at simifilm.ch  Fri Nov  5 07:33:31 2010
From: simon at simifilm.ch (Simon Spiegel)
Date: Fri, 5 Nov 2010 07:33:31 +0100
Subject: [lltx] Hyphenation problems
In-Reply-To: <4CD36E07.9070309@elzevir.fr>
References: <17374CC4-5736-4F36-80AD-A6C8C991362F@simifilm.ch>
 <20101009080614.GA13493@khaled-laptop> <4CB03D70.4040909@elzevir.fr>
 <7C4D6B6A-B59B-4A8E-B17A-30C17C7C5142@simifilm.ch>
 <4CB79187.5010902@elzevir.fr>
 <F80574D0-2CA3-4723-8D22-06F3EF10DD31@simifilm.ch>
 <4CD36E07.9070309@elzevir.fr>
Message-ID: <A7528D6E-05BF-4643-A8C4-7EEE728215A1@simifilm.ch>


On 05.11.2010, at 03:37, Manuel P?gouri?-Gonnard wrote:

> Le 04/11/2010 07:37, Simon Spiegel a ?crit :
>> Here's a minimal example which shows the problem in two instances (don't 
>> bother about the text ?)
>> 
>> \documentclass{scrbook}
>> \usepackage{hyphsubst}
>> \HyphSubstLet{ngerman}{ngerman-x-latest}
>> \usepackage{fontspec}
>> \usepackage[EU2]{fontenc}
>> \usepackage[ngerman]{babel}
>> \begin{document}
>> \setmainfont[Ligatures=TeX]{Linux Libertine O}
>> Heute, mit einigen Jahrzehnten Abstand, scheinen manche Forderungen der [...]
>> \end{document}
>> 
>> Could this be related to fontspec? It seems like the hyphenation is correct
>> when I don't load any font with fontspec
>> 
> I must admit I'm quite surprised. Can you craft an example that doesn't use
> hyphsubst? Just to narrow the investigation scope a bit further... Also, I'm
> under the impression that \usepackage[EU2]{fontenc} is unneeded, fontspec should
> take care of that.

The following example shows the exact same problem:

\documentclass{scrbook}
\usepackage{fontspec}
\usepackage[ngerman]{babel}
\begin{document}
\setmainfont[Ligatures=TeX]{Linux Libertine O}
Heute, mit einigen Jahrzehnten Abstand, scheinen manche Forderungen der Strukturalisten vielleicht ?bertrieben. Das vollkommene Ausblenden von jeglichem Kontext, das Leugnen des Lesers, erscheint aus heutiger Sicht nicht mehr zweckm??ig. Allerdings sind einige zentrale Forderungen des Strukturalismus --~wenn auch teilweise in abgeschw?chter Form~-- Deutschsprachigen Allgemeingut der Literatur\-wissenschaft geworden. Dies wird auch deutlich, wenn man meine Ausf?hrungen zum Wesen von Literaturwissenschaft mit Todorovs Forderungen vergleicht. So wird der Grundsatz gemeinhin akzeptiert, zuerst einmal den Text zu untersuchen, bevor man sich die Biographie des Autors vorkn?pft. Die Einsicht, dass einmalige Wissenschaftler nicht ein Literatur\-kritiker ist, der den Lesern vorschreibt, was gute Literatur ist, ist ebenfalls ein Erbe des Strukturalismus.
\end{document}

Simon
--
Simon Spiegel
Steinhaldenstr. 50
8002 Z?rich

Telephon: ++41 44 451 5334
Mobophon: ++41 76 459 60 39

http://www.simifilm.ch

?Gee, I wish we had one of them doomsday machines.? General Buck Turgidson



From wspr81 at gmail.com  Fri Nov  5 08:26:19 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Fri, 5 Nov 2010 17:56:19 +1030
Subject: [lltx] Hyphenation problems
In-Reply-To: <A7528D6E-05BF-4643-A8C4-7EEE728215A1@simifilm.ch>
References: <17374CC4-5736-4F36-80AD-A6C8C991362F@simifilm.ch>
 <20101009080614.GA13493@khaled-laptop> <4CB03D70.4040909@elzevir.fr>
 <7C4D6B6A-B59B-4A8E-B17A-30C17C7C5142@simifilm.ch>
 <4CB79187.5010902@elzevir.fr>
 <F80574D0-2CA3-4723-8D22-06F3EF10DD31@simifilm.ch>
 <4CD36E07.9070309@elzevir.fr>
 <A7528D6E-05BF-4643-A8C4-7EEE728215A1@simifilm.ch>
Message-ID: <4A8121DA-3F23-42AF-8488-77EBF83976E2@gmail.com>

On 05/11/2010, at 5:03 PM, Simon Spiegel wrote:

> The following example shows the exact same problem:

The only problem I can see right now is that XeLaTeX and LuaLaTeX seem to treat Linux Libertine in rather different ways. Not sure where this is coming from, but when I execute:

\newlength\tmp
\setlength\tmp{\widthof{Heute, mit einigen Jahrzehnten Abstand}}
\showthe\tmp

XeLaTeX outputs 174.54298pt and LuaLaTeX outputs 179.13103pt.
So any differences between the engines that you're seeing needs to take this into account.
(I wonder why it happens, though! It happens even with a plain \font command. And it's not due to different space sizes.)

-- Will



From simon at simifilm.ch  Fri Nov  5 08:42:13 2010
From: simon at simifilm.ch (Simon Spiegel)
Date: Fri, 5 Nov 2010 08:42:13 +0100
Subject: [lltx] Hyphenation problems
In-Reply-To: <4A8121DA-3F23-42AF-8488-77EBF83976E2@gmail.com>
References: <17374CC4-5736-4F36-80AD-A6C8C991362F@simifilm.ch>
 <20101009080614.GA13493@khaled-laptop> <4CB03D70.4040909@elzevir.fr>
 <7C4D6B6A-B59B-4A8E-B17A-30C17C7C5142@simifilm.ch>
 <4CB79187.5010902@elzevir.fr>
 <F80574D0-2CA3-4723-8D22-06F3EF10DD31@simifilm.ch>
 <4CD36E07.9070309@elzevir.fr>
 <A7528D6E-05BF-4643-A8C4-7EEE728215A1@simifilm.ch>
 <4A8121DA-3F23-42AF-8488-77EBF83976E2@gmail.com>
Message-ID: <9B268F14-418B-4824-8E38-29318E4A74C9@simifilm.ch>


On 05.11.2010, at 08:26, Will Robertson wrote:

> On 05/11/2010, at 5:03 PM, Simon Spiegel wrote:
> 
>> The following example shows the exact same problem:
> 
> The only problem I can see right now is that XeLaTeX and LuaLaTeX seem to treat Linux Libertine in rather different ways. Not sure where this is coming from, but when I execute:
> 
> \newlength\tmp
> \setlength\tmp{\widthof{Heute, mit einigen Jahrzehnten Abstand}}
> \showthe\tmp
> 
> XeLaTeX outputs 174.54298pt and LuaLaTeX outputs 179.13103pt.
> So any differences between the engines that you're seeing needs to take this into account.
> (I wonder why it happens, though! It happens even with a plain \font command. And it's not due to different space sizes.)

The hyphenation problem is definitely not something which only happens with Linux Libertine. I only chose this font for my example because it's free. I'm currently working on a 200 pages book which uses Stempel Garamond LT Pro. Here I regularly get unhyphenated words which stick out at the end of the line. When I run the same document with pdfLaTeX and type 1 fonts, the hyphenation is handled well.

Simon
--
Simon Spiegel
Steinhaldenstr. 50
8002 Z?rich

Telephon: ++41 44 451 5334
Mobophon: ++41 76 459 60 39


http://www.simifilm.ch

?If you ever travel back in time, don't step on anything because even the tiniest change can alter the future in ways you can't imagine.? Abe Simpson



From wspr81 at gmail.com  Fri Nov  5 08:52:14 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Fri, 5 Nov 2010 18:22:14 +1030
Subject: [lltx] Hyphenation problems
In-Reply-To: <9B268F14-418B-4824-8E38-29318E4A74C9@simifilm.ch>
References: <17374CC4-5736-4F36-80AD-A6C8C991362F@simifilm.ch>
 <20101009080614.GA13493@khaled-laptop> <4CB03D70.4040909@elzevir.fr>
 <7C4D6B6A-B59B-4A8E-B17A-30C17C7C5142@simifilm.ch>
 <4CB79187.5010902@elzevir.fr>
 <F80574D0-2CA3-4723-8D22-06F3EF10DD31@simifilm.ch>
 <4CD36E07.9070309@elzevir.fr>
 <A7528D6E-05BF-4643-A8C4-7EEE728215A1@simifilm.ch>
 <4A8121DA-3F23-42AF-8488-77EBF83976E2@gmail.com>
 <9B268F14-418B-4824-8E38-29318E4A74C9@simifilm.ch>
Message-ID: <39E9599B-D493-42FB-8464-EA143BF5A407@gmail.com>

On 05/11/2010, at 6:12 PM, Simon Spiegel wrote:

> I'm currently working on a 200 pages book which uses Stempel Garamond LT Pro. Here I regularly get unhyphenated words which stick out at the end of the line. When I run the same document with pdfLaTeX and type 1 fonts, the hyphenation is handled well.

What happens when you use \showhyphens to look at where the hyphens should occur?

-- Will



From simon at simifilm.ch  Fri Nov  5 09:32:45 2010
From: simon at simifilm.ch (Simon Spiegel)
Date: Fri, 5 Nov 2010 09:32:45 +0100
Subject: [lltx] Hyphenation problems
In-Reply-To: <39E9599B-D493-42FB-8464-EA143BF5A407@gmail.com>
References: <17374CC4-5736-4F36-80AD-A6C8C991362F@simifilm.ch>
 <20101009080614.GA13493@khaled-laptop> <4CB03D70.4040909@elzevir.fr>
 <7C4D6B6A-B59B-4A8E-B17A-30C17C7C5142@simifilm.ch>
 <4CB79187.5010902@elzevir.fr>
 <F80574D0-2CA3-4723-8D22-06F3EF10DD31@simifilm.ch>
 <4CD36E07.9070309@elzevir.fr>
 <A7528D6E-05BF-4643-A8C4-7EEE728215A1@simifilm.ch>
 <4A8121DA-3F23-42AF-8488-77EBF83976E2@gmail.com>
 <9B268F14-418B-4824-8E38-29318E4A74C9@simifilm.ch>
 <39E9599B-D493-42FB-8464-EA143BF5A407@gmail.com>
Message-ID: <63E0A9F8-137F-4988-B084-1AB12EAB2389@simifilm.ch>


On 05.11.2010, at 08:52, Will Robertson wrote:

> On 05/11/2010, at 6:12 PM, Simon Spiegel wrote:
> 
>> I'm currently working on a 200 pages book which uses Stempel Garamond LT Pro. Here I regularly get unhyphenated words which stick out at the end of the line. When I run the same document with pdfLaTeX and type 1 fonts, the hyphenation is handled well.
> 
> What happens when you use \showhyphens to look at where the hyphens should occur?

\showhyphens brought me on to something really interesting. Compare the the following minimal examples:

%!TEX TS-program = lualatex
%!TEX encoding = UTF-8 Unicode
\documentclass{scrbook}
\usepackage{fontspec}
\usepackage[ngerman]{babel}
\begin{document}
\setmainfont[Ligatures=TeX]{Linux Libertine O}
Heute, mit einigen Jahrzehnten Abstand, scheinen manche Forderungen der Strukturalisten vielleicht ?bertrieben. Das vollkommene Ausblenden von jeglichem Kontext, das Leugnen des Lesers, erscheint aus heutiger Sicht nicht mehr zweckm??ig. Allerdings sind einige zentrale Forderungen des Strukturalismus -- wenn auch teilweise in abgeschw?chter Form -- Deutschsprachigen Allgemeingut der Literaturwissenschaft geworden. Dies wird auch deutlich, wenn man meine Ausf?hrungen zum Wesen von Literaturwissenschaft mit Todorovs Forderungen vergleicht. So wird der Grundsatz gemeinhin akzeptiert, zuerst einmal den Text zu untersuchen, bevor man sich die Biographie des Autors vorkn?pft. Die Einsicht, dass einmalige Wissenschaftler nicht ein Literatur\-kritiker ist, der den Lesern vorschreibt, was gute Literatur ist, ist ebenfalls ein Erbe des Strukturalismus.
\end{document}

%!TEX TS-program = lualatex
%!TEX encoding = UTF-8 Unicode
\documentclass{scrbook}
\usepackage{fontspec}
\usepackage[ngerman]{babel}
\begin{document}
\setmainfont[Ligatures=TeX]{Linux Libertine O}
Heute, mit einigen Jahrzehnten Abstand, scheinen manche Forderungen der Strukturalisten vielleicht ?bertrieben. Das vollkommene Ausblenden von jeglichem Kontext, das Leugnen des Lesers, erscheint aus heutiger Sicht nicht mehr zweckm??ig. Allerdings sind einige zentrale Forderungen des Strukturalismus wenn auch teilweise in abgeschw?chter Form Deutschsprachigen Allgemeingut der Literaturwissenschaft geworden. Dies wird auch deutlich, wenn man meine Ausf?hrungen zum Wesen von Literaturwissenschaft mit Todorovs Forderungen vergleicht. So wird der Grundsatz gemeinhin akzeptiert, zuerst einmal den Text zu untersuchen, bevor man sich die Biographie des Autors vorkn?pft. Die Einsicht, dass einmalige Wissenschaftler nicht ein Literatur\-kritiker ist, der den Lesern vorschreibt, was gute Literatur ist, ist ebenfalls ein Erbe des Strukturalismus.
\end{document}

Notice that the only difference between the two examples is that the second is missing the two --, but without them everything is hyphenated nicely.

When I replace the two hyphens with a proper en dash ? everything is fine as well. So there must be something with the TeX mapping ?

Simon
--
Simon Spiegel
Steinhaldenstr. 50
8002 Z?rich

Telephon: ++41 44 451 5334
Mobophon: ++41 76 459 60 39


http://www.simifilm.ch

?Was soll aus mir mal werden, wenn ich mal nicht mehr bin?? Robert Gernhardt





From taco at elvenkind.com  Fri Nov  5 09:43:53 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 05 Nov 2010 09:43:53 +0100
Subject: [lltx] Hyphenation problems
In-Reply-To: <63E0A9F8-137F-4988-B084-1AB12EAB2389@simifilm.ch>
References: <17374CC4-5736-4F36-80AD-A6C8C991362F@simifilm.ch>
 <20101009080614.GA13493@khaled-laptop> <4CB03D70.4040909@elzevir.fr>
 <7C4D6B6A-B59B-4A8E-B17A-30C17C7C5142@simifilm.ch>
 <4CB79187.5010902@elzevir.fr>
 <F80574D0-2CA3-4723-8D22-06F3EF10DD31@simifilm.ch>
 <4CD36E07.9070309@elzevir.fr>
 <A7528D6E-05BF-4643-A8C4-7EEE728215A1@simifilm.ch>
 <4A8121DA-3F23-42AF-8488-77EBF83976E2@gmail.com>
 <9B268F14-418B-4824-8E38-29318E4A74C9@simifilm.ch>
 <39E9599B-D493-42FB-8464-EA143BF5A407@gmail.com>
 <63E0A9F8-137F-4988-B084-1AB12EAB2389@simifilm.ch>
Message-ID: <4CD3C3C9.8010501@elvenkind.com>

On 11/05/2010 09:32 AM, Simon Spiegel wrote:
>
> On 05.11.2010, at 08:52, Will Robertson wrote:
>
>> On 05/11/2010, at 6:12 PM, Simon Spiegel wrote:
>>
>>> I'm currently working on a 200 pages book which uses Stempel Garamond LT Pro. Here I regularly get unhyphenated words which stick out at the end of the line. When I run the same document with pdfLaTeX and type 1 fonts, the hyphenation is handled well.
>>
>> What happens when you use \showhyphens to look at where the hyphens should occur?
>
> \showhyphens brought me on to something really interesting. Compare the the following minimal examples:

Sorry, I am slow on the uptake this week. All this is caused by
the bug mentioned in this thread:

   http://tug.org/pipermail/luatex/2010-October/002077.html

Best wishes,
Taco

From mpg at elzevir.fr  Fri Nov  5 13:24:10 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 05 Nov 2010 13:24:10 +0100
Subject: [lltx] problem with fontspec (luaotfload) & Libertine
In-Reply-To: <CE903E95-14E5-425F-A10B-989383D2B457@gmail.com>
References: <4CD378FD.1040404@elzevir.fr>
 <D8CA5146-A0C0-4C99-AE8D-93E8C78A9BB5@gmail.com>
 <4CD37FCA.5070705@elzevir.fr>
 <CE903E95-14E5-425F-A10B-989383D2B457@gmail.com>
Message-ID: <4CD3F76A.2090406@elzevir.fr>

Le 05/11/2010 05:26, Will Robertson a ?crit :
> On 05/11/2010, at 2:23 PM, Manuel P?gouri?-Gonnard wrote:
> 
>> I'll try. In the meanwhile, I found that the following hack seems to fix the
>> problem:
>>
>> \renewcommand\do at subst@correction{%
> 
I forgot to tell: I only added quotes around \fontname\font (in case it wasn't
clear).

> Thanks for looking into it. I have *no idea* why changing this macro fixes
> the problem, but since the underlying cause is fixed (or seems to be fixed)
> in fontspec.sty, I'll leave it as an academic exercise :)
> 
Well, I *guess* the explanation is something like:

- \slshape triggers latex substitution mechanism, so LaTeX loads the italic font
as \EU2/LinuxLibertineO(0)/m/sl/10
- later it want to define \EU2/LinuxLibertineO(0)/m/it/10 to be the same thing
(probably an optimisation) and tries do so by using \fontname\font to get the
name of the current font
- \fontname\font expands to:
name:Linux Libertine O/I:mode=node;script=latn;language=DFLT;+tlig;+trep;
an TeX obviouly think the font name stops at the space, hence tries to load
"name:Linux " which fails. Quoting the font name fixes that.

Now, my turn to have no idea: I have no idea what you did in fontspec to fix
that without patching \do at subst@correction :-)

Manuel.



> Thanks,
> -- Will
> 
> 

From mpg at elzevir.fr  Fri Nov  5 13:27:05 2010
From: mpg at elzevir.fr (=?windows-1252?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 05 Nov 2010 13:27:05 +0100
Subject: [lltx] Hyphenation problems
In-Reply-To: <4CD3C3C9.8010501@elvenkind.com>
References: <17374CC4-5736-4F36-80AD-A6C8C991362F@simifilm.ch>
 <20101009080614.GA13493@khaled-laptop> <4CB03D70.4040909@elzevir.fr>
 <7C4D6B6A-B59B-4A8E-B17A-30C17C7C5142@simifilm.ch>
 <4CB79187.5010902@elzevir.fr>
 <F80574D0-2CA3-4723-8D22-06F3EF10DD31@simifilm.ch>
 <4CD36E07.9070309@elzevir.fr>
 <A7528D6E-05BF-4643-A8C4-7EEE728215A1@simifilm.ch>
 <4A8121DA-3F23-42AF-8488-77EBF83976E2@gmail.com>
 <9B268F14-418B-4824-8E38-29318E4A74C9@simifilm.ch>
 <39E9599B-D493-42FB-8464-EA143BF5A407@gmail.com>
 <63E0A9F8-137F-4988-B084-1AB12EAB2389@simifilm.ch>
 <4CD3C3C9.8010501@elvenkind.com>
Message-ID: <4CD3F819.4020207@elzevir.fr>

Le 05/11/2010 09:43, Taco Hoekwater a ?crit :
> On 11/05/2010 09:32 AM, Simon Spiegel wrote:
>>
>> On 05.11.2010, at 08:52, Will Robertson wrote:
>>
>>> On 05/11/2010, at 6:12 PM, Simon Spiegel wrote:
>>>
>>>> I'm currently working on a 200 pages book which uses Stempel Garamond LT Pro. Here I regularly get unhyphenated words which stick out at the end of the line. When I run the same document with pdfLaTeX and type 1 fonts, the hyphenation is handled well.
>>>
>>> What happens when you use \showhyphens to look at where the hyphens should occur?
>>
>> \showhyphens brought me on to something really interesting. Compare the the following minimal examples:
> 
> Sorry, I am slow on the uptake this week. All this is caused by
> the bug mentioned in this thread:
> 
>    http://tug.org/pipermail/luatex/2010-October/002077.html
> 
I remembered only when Simon pointed to "--" in the text, too. Anyway, I'm glad
the hyphenation issue is solved.

Just out of curiosity, to you happen to have a idea about Will's observation:

Le 05/11/2010 08:26, Will Robertson a ?crit :
> \newlength\tmp
> \setlength\tmp{\widthof{Heute, mit einigen Jahrzehnten Abstand}}
> \showthe\tmp
>
> XeLaTeX outputs 174.54298pt and LuaLaTeX outputs 179.13103pt.

Thanks,
Manuel.

From taco at elvenkind.com  Fri Nov  5 13:38:33 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 05 Nov 2010 13:38:33 +0100
Subject: [lltx] Hyphenation problems
In-Reply-To: <4CD3F819.4020207@elzevir.fr>
References: <17374CC4-5736-4F36-80AD-A6C8C991362F@simifilm.ch>
 <20101009080614.GA13493@khaled-laptop> <4CB03D70.4040909@elzevir.fr>
 <7C4D6B6A-B59B-4A8E-B17A-30C17C7C5142@simifilm.ch>
 <4CB79187.5010902@elzevir.fr>
 <F80574D0-2CA3-4723-8D22-06F3EF10DD31@simifilm.ch>
 <4CD36E07.9070309@elzevir.fr>
 <A7528D6E-05BF-4643-A8C4-7EEE728215A1@simifilm.ch>
 <4A8121DA-3F23-42AF-8488-77EBF83976E2@gmail.com>
 <9B268F14-418B-4824-8E38-29318E4A74C9@simifilm.ch>
 <39E9599B-D493-42FB-8464-EA143BF5A407@gmail.com>
 <63E0A9F8-137F-4988-B084-1AB12EAB2389@simifilm.ch>
 <4CD3C3C9.8010501@elvenkind.com> <4CD3F819.4020207@elzevir.fr>
Message-ID: <4CD3FAC9.7010307@elvenkind.com>

On 11/05/2010 01:27 PM, Manuel P?gouri?-Gonnard wrote:
>
> Just out of curiosity, to you happen to have a idea about Will's observation:
>
> Le 05/11/2010 08:26, Will Robertson a ?crit :
>> \newlength\tmp
>> \setlength\tmp{\widthof{Heute, mit einigen Jahrzehnten Abstand}}
>> \showthe\tmp
>>
>> XeLaTeX outputs 174.54298pt and LuaLaTeX outputs 179.13103pt.

My xelatex (texlive 2010, fontspec from tlcontrib) outputs nothing
but errors, so I have no idea what it would do differently if it
did work. (logfile attached)
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: libert.log
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20101105/5bba125c/attachment-0001.ksh>

From khaledhosny at eglug.org  Fri Nov  5 13:42:33 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 5 Nov 2010 14:42:33 +0200
Subject: [lltx] Hyphenation problems
In-Reply-To: <4CD3FAC9.7010307@elvenkind.com>
References: <F80574D0-2CA3-4723-8D22-06F3EF10DD31@simifilm.ch>
 <4CD36E07.9070309@elzevir.fr>
 <A7528D6E-05BF-4643-A8C4-7EEE728215A1@simifilm.ch>
 <4A8121DA-3F23-42AF-8488-77EBF83976E2@gmail.com>
 <9B268F14-418B-4824-8E38-29318E4A74C9@simifilm.ch>
 <39E9599B-D493-42FB-8464-EA143BF5A407@gmail.com>
 <63E0A9F8-137F-4988-B084-1AB12EAB2389@simifilm.ch>
 <4CD3C3C9.8010501@elvenkind.com> <4CD3F819.4020207@elzevir.fr>
 <4CD3FAC9.7010307@elvenkind.com>
Message-ID: <20101105124233.GA3102@khaled-laptop>

On Fri, Nov 05, 2010 at 01:38:33PM +0100, Taco Hoekwater wrote:
> On 11/05/2010 01:27 PM, Manuel P?gouri?-Gonnard wrote:
> >
> >Just out of curiosity, to you happen to have a idea about Will's observation:
> >
> >Le 05/11/2010 08:26, Will Robertson a ?crit :
> >>\newlength\tmp
> >>\setlength\tmp{\widthof{Heute, mit einigen Jahrzehnten Abstand}}
> >>\showthe\tmp
> >>
> >>XeLaTeX outputs 174.54298pt and LuaLaTeX outputs 179.13103pt.
> 
> My xelatex (texlive 2010, fontspec from tlcontrib) outputs nothing
> but errors, so I have no idea what it would do differently if it
> did work. (logfile attached)

XeTeX can't load files in texmf tree by name unless add to fontconfig
search directory (or you can just symlink the font dir to your
~/.fonts/).

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From khaledhosny at eglug.org  Fri Nov  5 13:47:51 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 5 Nov 2010 14:47:51 +0200
Subject: [lltx] problem with fontspec (luaotfload) & Libertine
In-Reply-To: <4CD3F76A.2090406@elzevir.fr>
References: <4CD378FD.1040404@elzevir.fr>
 <D8CA5146-A0C0-4C99-AE8D-93E8C78A9BB5@gmail.com>
 <4CD37FCA.5070705@elzevir.fr>
 <CE903E95-14E5-425F-A10B-989383D2B457@gmail.com>
 <4CD3F76A.2090406@elzevir.fr>
Message-ID: <20101105124751.GB3102@khaled-laptop>

On Fri, Nov 05, 2010 at 01:24:10PM +0100, Manuel P?gouri?-Gonnard wrote:
> Le 05/11/2010 05:26, Will Robertson a ?crit :
> > On 05/11/2010, at 2:23 PM, Manuel P?gouri?-Gonnard wrote:
> > 
> >> I'll try. In the meanwhile, I found that the following hack seems to fix the
> >> problem:
> >>
> >> \renewcommand\do at subst@correction{%
> > 
> I forgot to tell: I only added quotes around \fontname\font (in case it wasn't
> clear).
> 
> > Thanks for looking into it. I have *no idea* why changing this macro fixes
> > the problem, but since the underlying cause is fixed (or seems to be fixed)
> > in fontspec.sty, I'll leave it as an academic exercise :)
> > 
> Well, I *guess* the explanation is something like:
> 
> - \slshape triggers latex substitution mechanism, so LaTeX loads the italic font
> as \EU2/LinuxLibertineO(0)/m/sl/10
> - later it want to define \EU2/LinuxLibertineO(0)/m/it/10 to be the same thing
> (probably an optimisation) and tries do so by using \fontname\font to get the
> name of the current font
> - \fontname\font expands to:
> name:Linux Libertine O/I:mode=node;script=latn;language=DFLT;+tlig;+trep;
> an TeX obviouly think the font name stops at the space, hence tries to load
> "name:Linux " which fails. Quoting the font name fixes that.
> 
> Now, my turn to have no idea: I have no idea what you did in fontspec to fix
> that without patching \do at subst@correction :-)

Fontspec just removes all spaces from font name now, since luaotfload is
already case and space insensitive ("Linux Libertine" will be eventually
normalised to linuxlibertine at luaotfload end, luaotfload even removes
hyphens an other non-alphanumeric characters).

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From mpg at elzevir.fr  Fri Nov  5 13:51:16 2010
From: mpg at elzevir.fr (=?UTF-8?B?TWFudWVsIFDDqWdvdXJpw6ktR29ubmFyZA==?=)
Date: Fri, 05 Nov 2010 13:51:16 +0100
Subject: [lltx] problem with fontspec (luaotfload) & Libertine
In-Reply-To: <20101105124751.GB3102@khaled-laptop>
References: <4CD378FD.1040404@elzevir.fr>
 <D8CA5146-A0C0-4C99-AE8D-93E8C78A9BB5@gmail.com>
 <4CD37FCA.5070705@elzevir.fr>
 <CE903E95-14E5-425F-A10B-989383D2B457@gmail.com>
 <4CD3F76A.2090406@elzevir.fr> <20101105124751.GB3102@khaled-laptop>
Message-ID: <4CD3FDC4.1020406@elzevir.fr>

Le 05/11/2010 13:47, Khaled Hosny a ?crit :
> On Fri, Nov 05, 2010 at 01:24:10PM +0100, Manuel P?gouri?-Gonnard wrote:
>> Now, my turn to have no idea: I have no idea what you did in fontspec to fix
>> that without patching \do at subst@correction :-)
> 
> Fontspec just removes all spaces from font name now, since luaotfload is
> already case and space insensitive ("Linux Libertine" will be eventually
> normalised to linuxlibertine at luaotfload end, luaotfload even removes
> hyphens an other non-alphanumeric characters).
> 
Great. Seems more robust indeed than trying to fix every place where the font
name would need quoting.

Thanks for the explanation,
Manuel.

From taco at elvenkind.com  Fri Nov  5 13:55:51 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 05 Nov 2010 13:55:51 +0100
Subject: [lltx] Hyphenation problems
In-Reply-To: <20101105124233.GA3102@khaled-laptop>
References: <F80574D0-2CA3-4723-8D22-06F3EF10DD31@simifilm.ch>
 <4CD36E07.9070309@elzevir.fr>
 <A7528D6E-05BF-4643-A8C4-7EEE728215A1@simifilm.ch>
 <4A8121DA-3F23-42AF-8488-77EBF83976E2@gmail.com>
 <9B268F14-418B-4824-8E38-29318E4A74C9@simifilm.ch>
 <39E9599B-D493-42FB-8464-EA143BF5A407@gmail.com>
 <63E0A9F8-137F-4988-B084-1AB12EAB2389@simifilm.ch>
 <4CD3C3C9.8010501@elvenkind.com> <4CD3F819.4020207@elzevir.fr>
 <4CD3FAC9.7010307@elvenkind.com> <20101105124233.GA3102@khaled-laptop>
Message-ID: <4CD3FED7.2030806@elvenkind.com>

On 11/05/2010 01:42 PM, Khaled Hosny wrote:
>
> XeTeX can't load files in texmf tree by name unless add to fontconfig
> search directory (or you can just symlink the font dir to your
> ~/.fonts/).

Ok, that helped somewhat: no more errors about bad libertine tfm files.
It still does not work, though (new log attached).

And here I was still believing that xelatex would be easier to use than
lualatex ....

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: libert.log
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20101105/a28cec91/attachment-0001.ksh>

From khaledhosny at eglug.org  Fri Nov  5 14:14:59 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 5 Nov 2010 15:14:59 +0200
Subject: [lltx] Hyphenation problems
In-Reply-To: <4CD3FED7.2030806@elvenkind.com>
References: <A7528D6E-05BF-4643-A8C4-7EEE728215A1@simifilm.ch>
 <4A8121DA-3F23-42AF-8488-77EBF83976E2@gmail.com>
 <9B268F14-418B-4824-8E38-29318E4A74C9@simifilm.ch>
 <39E9599B-D493-42FB-8464-EA143BF5A407@gmail.com>
 <63E0A9F8-137F-4988-B084-1AB12EAB2389@simifilm.ch>
 <4CD3C3C9.8010501@elvenkind.com> <4CD3F819.4020207@elzevir.fr>
 <4CD3FAC9.7010307@elvenkind.com>
 <20101105124233.GA3102@khaled-laptop>
 <4CD3FED7.2030806@elvenkind.com>
Message-ID: <20101105131459.GA4960@khaled-laptop>

On Fri, Nov 05, 2010 at 01:55:51PM +0100, Taco Hoekwater wrote:
> On 11/05/2010 01:42 PM, Khaled Hosny wrote:
> >
> >XeTeX can't load files in texmf tree by name unless add to fontconfig
> >search directory (or you can just symlink the font dir to your
> >~/.fonts/).
> 
> Ok, that helped somewhat: no more errors about bad libertine tfm files.
> It still does not work, though (new log attached).
> 
> And here I was still believing that xelatex would be easier to use than
> lualatex ....

Drop the fontenc line, EU2 is for lualatex, xelatex's is EU1, but fontspec
will select the proper font encoding itself anyway.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From news3 at nililand.de  Fri Nov  5 14:17:07 2010
From: news3 at nililand.de (Ulrike Fischer)
Date: Fri, 5 Nov 2010 14:17:07 +0100
Subject: [lltx] Hyphenation problems
References: <F80574D0-2CA3-4723-8D22-06F3EF10DD31@simifilm.ch>
 <4CD36E07.9070309@elzevir.fr>
 <A7528D6E-05BF-4643-A8C4-7EEE728215A1@simifilm.ch>
 <4A8121DA-3F23-42AF-8488-77EBF83976E2@gmail.com>
 <9B268F14-418B-4824-8E38-29318E4A74C9@simifilm.ch>
 <39E9599B-D493-42FB-8464-EA143BF5A407@gmail.com>
 <63E0A9F8-137F-4988-B084-1AB12EAB2389@simifilm.ch>
 <4CD3C3C9.8010501@elvenkind.com> <4CD3F819.4020207@elzevir.fr>
 <4CD3FAC9.7010307@elvenkind.com> <20101105124233.GA3102@khaled-laptop>
 <4CD3FED7.2030806@elvenkind.com>
Message-ID: <1fgixrbzwlczz$.dlg@nililand.de>

Am Fri, 05 Nov 2010 13:55:51 +0100 schrieb Taco Hoekwater:


> Ok, that helped somewhat: no more errors about bad libertine tfm files.
> It still does not work, though (new log attached).


Remove the \usepackage[EU2]{fontenc} line. Let fontspec handle the
font encoding (EU2 is for lualatex).

> And here I was still believing that xelatex would be easier to use than
> lualatex ....

It's a problem of the font definition files. eu2lmr.fd which is used
as "fall back" use a font syntax that only luatex understand:

file:lmroman5-regular:script=latn;+trep;+tlig;

So EU2 shouldn't be used with xelatex.

-- 
Ulrike Fischer 


From taco at elvenkind.com  Fri Nov  5 14:36:21 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 05 Nov 2010 14:36:21 +0100
Subject: [lltx] Hyphenation problems
In-Reply-To: <1fgixrbzwlczz$.dlg@nililand.de>
References: <F80574D0-2CA3-4723-8D22-06F3EF10DD31@simifilm.ch>
 <4CD36E07.9070309@elzevir.fr>
 <A7528D6E-05BF-4643-A8C4-7EEE728215A1@simifilm.ch>
 <4A8121DA-3F23-42AF-8488-77EBF83976E2@gmail.com>
 <9B268F14-418B-4824-8E38-29318E4A74C9@simifilm.ch>
 <39E9599B-D493-42FB-8464-EA143BF5A407@gmail.com>
 <63E0A9F8-137F-4988-B084-1AB12EAB2389@simifilm.ch>
 <4CD3C3C9.8010501@elvenkind.com> <4CD3F819.4020207@elzevir.fr>
 <4CD3FAC9.7010307@elvenkind.com> <20101105124233.GA3102@khaled-laptop>
 <4CD3FED7.2030806@elvenkind.com> <1fgixrbzwlczz$.dlg@nililand.de>
Message-ID: <4CD40855.2070105@elvenkind.com>

On 11/05/2010 02:17 PM, Ulrike Fischer wrote:
> Am Fri, 05 Nov 2010 13:55:51 +0100 schrieb Taco Hoekwater:
>
>
>> Ok, that helped somewhat: no more errors about bad libertine tfm files.
>> It still does not work, though (new log attached).
>
>
> Remove the \usepackage[EU2]{fontenc} line. Let fontspec handle the
> font encoding (EU2 is for lualatex).
>
>> And here I was still believing that xelatex would be easier to use than
>> lualatex ....
>
> It's a problem of the font definition files. eu2lmr.fd which is used
> as "fall back" use a font syntax that only luatex understand:
>
> file:lmroman5-regular:script=latn;+trep;+tlig;
>
> So EU2 shouldn't be used with xelatex.

Ok, that fixed it. Now here are the results,

lualatex: > 179.13103pt.
xelatex:  > 179.15291pt.

Based on \tracingall, lualatex has two kerns in that sentence

   Heute<\kern-0.1095>, mit einig<\kern-0.16425>en Jahrzehnten Abstand

but I cannot see what ICU does.


From news3 at nililand.de  Fri Nov  5 15:14:09 2010
From: news3 at nililand.de (Ulrike Fischer)
Date: Fri, 5 Nov 2010 15:14:09 +0100
Subject: [lltx] Hyphenation problems
References: <F80574D0-2CA3-4723-8D22-06F3EF10DD31@simifilm.ch>
 <4CD36E07.9070309@elzevir.fr>
 <A7528D6E-05BF-4643-A8C4-7EEE728215A1@simifilm.ch>
 <4A8121DA-3F23-42AF-8488-77EBF83976E2@gmail.com>
 <9B268F14-418B-4824-8E38-29318E4A74C9@simifilm.ch>
 <39E9599B-D493-42FB-8464-EA143BF5A407@gmail.com>
 <63E0A9F8-137F-4988-B084-1AB12EAB2389@simifilm.ch>
 <4CD3C3C9.8010501@elvenkind.com> <4CD3F819.4020207@elzevir.fr>
 <4CD3FAC9.7010307@elvenkind.com> <20101105124233.GA3102@khaled-laptop>
 <4CD3FED7.2030806@elvenkind.com> <1fgixrbzwlczz$.dlg@nililand.de>
 <4CD40855.2070105@elvenkind.com>
Message-ID: <1eqha5v2xyr4r$.dlg@nililand.de>

Am Fri, 05 Nov 2010 14:36:21 +0100 schrieb Taco Hoekwater:


>> Remove the \usepackage[EU2]{fontenc} line. Let fontspec handle the
>> font encoding (EU2 is for lualatex).

> Ok, that fixed it. Now here are the results,
> 
> lualatex: > 179.13103pt.
> xelatex:  > 179.15291pt.
> 
> Based on \tracingall, lualatex has two kerns in that sentence
> 
>    Heute<\kern-0.1095>, mit einig<\kern-0.16425>en Jahrzehnten Abstand
> 
> but I cannot see what ICU does.

Well I made some tests with a text without spaces and there are
always differences:

 Arial XeTex 179.57892pt luatex 179.57878pt.
 Latin       176.98479pt        177.29143pt.

To complicate things some fonts exists in more than one version on
my PC (e.g. in windows/fonts and in the texmf-tree), so one should
check carefully that the same fonts are compared. 


-- 
Ulrike Fischer 


From remyoudompheng at gmail.com  Fri Nov  5 18:23:31 2010
From: remyoudompheng at gmail.com (=?UTF-8?Q?R=C3=A9my_Oudompheng?=)
Date: Fri, 5 Nov 2010 18:23:31 +0100
Subject: [lltx] Conflict between unicode-math and xypic
Message-ID: <AANLkTi=UiJxAYFdddGk9vbh2Pj-ZyUGWJAMWFBO+-G8q@mail.gmail.com>

Hello,

I am encountering a problem when using simultaneously xypic and
unicode-math packages with lualatex. The following file compiles
correctly with xelatex:

\documentclass{minimal}
\usepackage[matrix,arrow]{xy}
\usepackage{unicode-math}
\setmathfont{XITS Math}
\begin{document}
\xymatrix{ a \ar[r] & b }
\end{document}

It should show something like "a -> b". However, using lualatex
replaces the arrow by a big fat line. Removing the \setmathfont line
fixes the problem. How can I debug this ? It seems to have appeared
during an update of either luaotfload or unicode-math, but using an
old version of xypic also works.

Regards,
-- 
R?my Oudompheng


From st_philipp at yahoo.de  Fri Nov  5 23:49:09 2010
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Fri, 5 Nov 2010 23:49:09 +0100
Subject: [lltx] Conflict between unicode-math and xypic
In-Reply-To: <AANLkTi=UiJxAYFdddGk9vbh2Pj-ZyUGWJAMWFBO+-G8q@mail.gmail.com>
References: <AANLkTi=UiJxAYFdddGk9vbh2Pj-ZyUGWJAMWFBO+-G8q@mail.gmail.com>
Message-ID: <434712E9-8B9B-47DC-97BC-0E0F37B9ADA8@yahoo.de>


Am 05.11.2010 um 18:23 schrieb R?my Oudompheng:

> Hello,
> 
> I am encountering a problem when using simultaneously xypic and
> unicode-math packages with lualatex. The following file compiles
> correctly with xelatex:
> 
> \documentclass{minimal}
> \usepackage[matrix,arrow]{xy}
> \usepackage{unicode-math}
> \setmathfont{XITS Math}
> \begin{document}
> \xymatrix{ a \ar[r] & b }
> \end{document}
> 
> It should show something like "a -> b". However, using lualatex
> replaces the arrow by a big fat line. Removing the \setmathfont line
> fixes the problem. How can I debug this ? It seems to have appeared
> during an update of either luaotfload or unicode-math, but using an
> old version of xypic also works.

That bug is known and fixed by newer versions of unicode-math. Try a development version from Github:
https://github.com/wspr/unicode-math

From gyorgy.szeidl at uni-miskolc.hu  Sat Nov  6 12:13:57 2010
From: gyorgy.szeidl at uni-miskolc.hu (Gyorgy Szeidl)
Date: Sat, 06 Nov 2010 12:13:57 +0100
Subject: [lltx] the beginner's question
In-Reply-To: <mailman.5.1289041201.14369.lualatex-dev@tug.org>
References: <mailman.5.1289041201.14369.lualatex-dev@tug.org>
Message-ID: <4CD53875.2080301@uni-miskolc.hu>

dear list members,
where can i find information about
lualatex. a pdf file (or files) which
explains (explain) everything for a
beginner who, however, has been using
latex (in fact miktex) for a long
time. i have searched the network
using the word lualatex as a keyword
but i have not succeeded in finding
sufficient information for making me
understand the most important features
of lualatex. any help would be highly
appreciated. thank you in advance.
best regards
g.szeidl

From mpg at elzevir.fr  Sat Nov  6 15:03:12 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Sat, 06 Nov 2010 15:03:12 +0100
Subject: [lltx] the beginner's question
In-Reply-To: <4CD53875.2080301@uni-miskolc.hu>
References: <mailman.5.1289041201.14369.lualatex-dev@tug.org>
 <4CD53875.2080301@uni-miskolc.hu>
Message-ID: <4CD56020.1090205@elzevir.fr>

Hi,

Le 06/11/2010 12:13, Gyorgy Szeidl a ?crit :
> where can i find information about
> lualatex. a pdf file (or files) which
> explains (explain) everything for a
> beginner who, however, has been using
> latex (in fact miktex) for a long
> time.

Unfortunately, there is no such document at this point. I plan to write one,
however.

> i have searched the network
> using the word lualatex as a keyword
> but i have not succeeded in finding
> sufficient information for making me
> understand the most important features
> of lualatex.

The most important features of LuaTeX itself are:
- native Unicode support,
- integration with Lua & opening the engine internals.

Currently, from a user point of view, the most important features of LuaLaTeX are:
- native Unicode support,
- support for modern font formats with the fontspec package,
- the ability to execute Lua code with \directlua,
- a few other goodies like metapost integration with the luamplip package.

To start with LuaLaTeX, all you need to change from "normal" LaTeX is:
- don't load inputenc nor fontenc,
- add \usepackage{fontspec} to your preamble,
(Actually, there is some support for compatibility with non fully Unicode
document (which includes documents using 8-bit fonts), provided by luainputenc,
but the recommended way is as above: fully Unicode.)

The most recommended document to read is the fontspec manual. Currently, it's
the single most important user-visible feature of LuaLaTeX of "normal" LaTeX.

If you're interested in using Lua for programming, the book "programming in Lua"
is a very good introduction (the first edtion is available online:
http://www.lua.org/pil): for a quick start, I recommend reading chapters 1 to 6
and skimming through part 3.

If your have more questions, they are most welcome.

Happy LuaLaTeXing,
Manuel.

From mpg at elzevir.fr  Sat Nov  6 15:16:17 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Sat, 06 Nov 2010 15:16:17 +0100
Subject: [lltx] the beginner's question
In-Reply-To: <4CD56020.1090205@elzevir.fr>
References: <mailman.5.1289041201.14369.lualatex-dev@tug.org>
 <4CD53875.2080301@uni-miskolc.hu> <4CD56020.1090205@elzevir.fr>
Message-ID: <4CD56331.5040904@elzevir.fr>

Re,

I forgot a few things:

Le 06/11/2010 15:03, Manuel P?gouri?-Gonnard a ?crit :
> - support for modern font formats with the fontspec package,

This one includes the ability to use your operating system's fonts out of the
box. It Just Works?.

> - don't load inputenc nor fontenc,

Don't load textcomp or any font package either: use only fontspec for font
management.

M.

From wspr81 at gmail.com  Sun Nov  7 05:26:25 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Sun, 7 Nov 2010 14:56:25 +1030
Subject: [lltx] testing ifplatform
Message-ID: <BB6D2599-7769-4AA3-ACB4-9AAFFCC6A06A@gmail.com>

Hi,

I've just updated ifplatform with support for LuaLaTeX; it will soon be available in tlcontrib. I've only half my attention on TeX at the moment, and I'd hate to upload a new version to CTAN that's broken. Is anyone here able to test it out? As soon as I know that it's working I'll create an official release.

Thanks,
-- Will



From mpg at elzevir.fr  Mon Nov  8 03:40:45 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Mon, 08 Nov 2010 03:40:45 +0100
Subject: [lltx] announcing lualatex-doc
Message-ID: <4CD7632D.7060403@elzevir.fr>

Hi,

I'd like to announce that I commited a tentative guide to the current state of
LuaLaTeX. From the readme:

> This document is a map, or touristic guide, for the new world of LuaLaTeX.
> Though focusing on LuaLaTeX, it includes relevant information about LuaTeX
> with the Plain format, too.
> 
> The intended audience ranges from complete newcomers (with a working
> knowledge of conventional LaTeX) to package developers. This guide is
> intended to be comprehensive in the following sense: it contains pointers to
> all relevant sources, gathers information that is otherwise scattered, and
> adds introductory material.
> 
> Feedback and suggestions for improvement are most welcome.

The document is on its way to CTAN, hence your favourite (La)TeX distribution.
The impatients can also find it at http://tug.org/~mpg/lualatex-doc.pdf

Happy reading,
Manuel.

From mpg at elzevir.fr  Mon Nov  8 03:43:27 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Mon, 08 Nov 2010 03:43:27 +0100
Subject: [lltx] the beginner's question
In-Reply-To: <4CD56020.1090205@elzevir.fr>
References: <mailman.5.1289041201.14369.lualatex-dev@tug.org>
 <4CD53875.2080301@uni-miskolc.hu> <4CD56020.1090205@elzevir.fr>
Message-ID: <4CD763CF.70406@elzevir.fr>

Le 06/11/2010 15:03, Manuel P?gouri?-Gonnard a ?crit :
> Unfortunately, there is no such document at this point. I plan to write one,
> however.
> 
Well, I did. See my announcement on this list a few minutes ago.

Hope that helps,
Manuel.

From taco at elvenkind.com  Mon Nov  8 12:19:21 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 08 Nov 2010 12:19:21 +0100
Subject: [lltx] [luatex] announcing lualatex-doc
In-Reply-To: <4CD7632D.7060403@elzevir.fr>
References: <4CD7632D.7060403@elzevir.fr>
Message-ID: <4CD7DCB9.2020009@elvenkind.com>

On 11/08/2010 03:40 AM, Manuel P?gouri?-Gonnard wrote:
> Hi,
>
> I'd like to announce that I commited a tentative guide to the current state of
> LuaLaTeX. From the readme:
>
>> This document is a map, or touristic guide, for the new world of LuaLaTeX.
>> Though focusing on LuaLaTeX, it includes relevant information about LuaTeX
>> with the Plain format, too.
>>
>> The intended audience ranges from complete newcomers (with a working
>> knowledge of conventional LaTeX) to package developers. This guide is
>> intended to be comprehensive in the following sense: it contains pointers to
>> all relevant sources, gathers information that is otherwise scattered, and
>> adds introductory material.
>>
>> Feedback and suggestions for improvement are most welcome.
>
> The document is on its way to CTAN, hence your favourite (La)TeX distribution.
> The impatients can also find it at http://tug.org/~mpg/lualatex-doc.pdf

Thanks!

From news3 at nililand.de  Mon Nov  8 15:29:08 2010
From: news3 at nililand.de (Ulrike Fischer)
Date: Mon, 8 Nov 2010 15:29:08 +0100
Subject: [lltx] announcing lualatex-doc
References: <4CD7632D.7060403@elzevir.fr>
Message-ID: <1xgke5vxy6zag.dlg@nililand.de>

Am Mon, 08 Nov 2010 03:40:45 +0100 schrieb Manuel P?gouri?-Gonnard:

> Hi,
> 
> I'd like to announce that I commited a tentative guide to the current state of
> LuaLaTeX. From the readme:

...
>> Feedback and suggestions for improvement are most welcome.

Two remarks: 

1. Section 2.2.4 Font internals and 5.2 Partially working:

euenc no longer uses/contains  a modified version of xunicode.
Fontspec now loads the original version (it defines temporarly
\XeTeXpicfile to get around the "ifxetex"-test of xunicode).

2. Section 5.1. "Just working"

Soul and listings don't have a problem with utf8-chars broken into
pieces. But there are other problems:

soul gets the numbers of characters in its argument by "printing"
the argument with a tt-fonts and dividing the length. As a default
it use ectt as tt-font and naturally this doesn't give the correct
result if the argument contains glyphs above the first 256 positions
(e.g. greek or ?). The following will give some suprising result
with xelatex:

\documentclass{article}
\usepackage{soul}
\usepackage{fontspec}
\makeatletter 
% \font\SOUL at tt="LMMono10-Regular" %helps with xetex
\makeatletter
\begin{document}
Euro: \ul{ab???} \ul{a???b}
\end{document}


(It fails with my lualatex (0.60.2) because of a problem discussed
in july on the luatex list. I don't know if this problem has been
solved in newer versions).


listings has a similar problem: It activates and defines output only
for the first 256 characters. So you can get quite suprising output
if your input uses chars from outside this range:

\documentclass{article}
\usepackage{fontspec}
\usepackage{listings}
\makeatletter
%\lst at CCPut \lst at ProcessLetter {"20AC}\z@
%\lstset{MoreSelectCharTable=\catcode`\?\active}
\makeatother
\begin{document}
\begin{lstlisting}[columns=flexible]
a?b
\end{lstlisting}

x \lstinline|a?b| y
\end{document}

On the whole one should not forget that "256" was a long time a
limit and that this limit is often burried quite deep in some
packages.



 

-- 
Ulrike Fischer 


From mpg at elzevir.fr  Mon Nov  8 17:47:38 2010
From: mpg at elzevir.fr (=?ISO-8859-15?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Mon, 08 Nov 2010 17:47:38 +0100
Subject: [lltx] announcing lualatex-doc
In-Reply-To: <1xgke5vxy6zag.dlg@nililand.de>
References: <4CD7632D.7060403@elzevir.fr> <1xgke5vxy6zag.dlg@nililand.de>
Message-ID: <4CD829AA.6050608@elzevir.fr>

Hi Ulrike,

Le 08/11/2010 15:29, Ulrike Fischer a ?crit :
> 1. Section 2.2.4 Font internals and 5.2 Partially working:
> 
> euenc no longer uses/contains  a modified version of xunicode.
> Fontspec now loads the original version (it defines temporarly
> \XeTeXpicfile to get around the "ifxetex"-test of xunicode).
> 
Arf, I should have know that. Thanks for correcting me.

> 2. Section 5.1. "Just working"
> 
> Soul and listings don't have a problem with utf8-chars broken into
> pieces.

I must admit I don't use them regularly, but Heiko has some wrapper packages
(soulutf8 and listingsutf8) so I assumed there was problems. (I also seem to
remember Denis mentioning problems with listings). I'll check the documentation.

> soul gets the numbers of characters in its argument by "printing"
> the argument with a tt-fonts and dividing the length.

Oh, nice trick.

> As a default
> it use ectt as tt-font and naturally this doesn't give the correct
> result if the argument contains glyphs above the first 256 positions
> (e.g. greek or ?). The following will give some suprising result
> with xelatex:
> 
> \documentclass{article}
> \usepackage{soul}
> \usepackage{fontspec}
> \makeatletter 
> % \font\SOUL at tt="LMMono10-Regular" %helps with xetex
> \makeatletter
> \begin{document}
> Euro: \ul{ab???} \ul{a???b}
> \end{document}
> 
> 
> (It fails with my lualatex (0.60.2) because of a problem discussed
> in july on the luatex list. I don't know if this problem has been
> solved in newer versions).
> 
Ok, thanks for the information.

> listings has a similar problem: It activates and defines output only
> for the first 256 characters. So you can get quite suprising output
> if your input uses chars from outside this range:
> 
> \documentclass{article}
> \usepackage{fontspec}
> \usepackage{listings}
> \makeatletter
> %\lst at CCPut \lst at ProcessLetter {"20AC}\z@
> %\lstset{MoreSelectCharTable=\catcode`\?\active}
> \makeatother
> \begin{document}
> \begin{lstlisting}[columns=flexible]
> a?b
> \end{lstlisting}
> 
> x \lstinline|a?b| y
> \end{document}
> 
> On the whole one should not forget that "256" was a long time a
> limit and that this limit is often burried quite deep in some
> packages.
> 
Right. I remember running some tests a while ago, and I suppose I just forgot to
test with characters higher that 256 (I was already pretty happy that things
worked with some multi-byte characters).

I just corrected the xunicode part, and quickly adapted the rest, but I'll
rework it more thouroughly later, I need to get my own ideas clear on this
subject. I hope the temporary version is acceptable in the meanwhile.

Thanks for your very useful remarks,
Manuel.

> 
> 
>  
> 

From mpg at elzevir.fr  Mon Nov  8 18:00:36 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Mon, 08 Nov 2010 18:00:36 +0100
Subject: [lltx] announcing lualatex-doc
In-Reply-To: <4CD8226A.5010408@arcor.de>
References: <4CD7632D.7060403@elzevir.fr> <4CD8226A.5010408@arcor.de>
Message-ID: <4CD82CB4.1010009@elzevir.fr>

Le 08/11/2010 17:16, Stephan Hennig a ?crit :
> * Add a warning/note that different line (and page) breaks are to be
>     expected in comparison to pdfLaTeX, because LuaTeX has some modified
>     algorithms, different font formats might have different metrics,
>     LuaTeX doesn't necessarily uses the same hyphenation patterns than
>     pdfTeX, ...
> 
It's not very clear to me to which extend one may expect differences. I'm under
the impression the differences in the algorithm are mostly negligible except in
edge case. The patterns are the same for XeTeX and LuaTeX. Your recent example
was due to a bug in LuaTeX, fixed since.

So, the only important source of differences is the fonts that may not be
selected the same way and are never used in exactly the same way (there is a
fundamental difference between XeTeX and LuaTeX here indeed).

I'm not saying there are no differences, but for the moment I'm hesitating to
mention them since the extent isn't very clear to me.

> * What about language support (babel/polyglossia)?
> 
Right, I forgot that. That's also an area where I'll need to investigate before
everything is clear to me. I'll add a stub in the meanwhile.

> * Given that lualatex is the name of a binary and the document doesn't
>    really focus on that binary, i.e., it doesn't contain the
>    command-line description of lualatex, I suggest renaming the document.
>    What comes to mind is 'latex-luatex,' but just replacing 'doc' by
>    'guide' or 'intro' might suffice as well.
> 
I slightly disagree: in my mind, \LuaLaTeX is the "abstract" engine+format
thing, while \textt{lualatex} is the name of the command. Also, I don't think
-doc implies being about the command more than -intro or -guide. I may
reconsider this is other readers make similar remarks, however.

Thanks very much for your feedback,
Manuel.

From news3 at nililand.de  Mon Nov  8 18:11:13 2010
From: news3 at nililand.de (Ulrike Fischer)
Date: Mon, 8 Nov 2010 18:11:13 +0100
Subject: [lltx] announcing lualatex-doc
References: <4CD7632D.7060403@elzevir.fr> <1xgke5vxy6zag.dlg@nililand.de>
 <4CD829AA.6050608@elzevir.fr>
Message-ID: <18zausszk5t0e.dlg@nililand.de>

Am Mon, 08 Nov 2010 17:47:38 +0100 schrieb Manuel P?gouri?-Gonnard:

>> 2. Section 5.1. "Just working"
>> 
>> Soul and listings don't have a problem with utf8-chars broken into
>> pieces.
> 
> I must admit I don't use them regularly, but Heiko has some wrapper packages
> (soulutf8 and listingsutf8) so I assumed there was problems. (I also seem to
> remember Denis mentioning problems with listings). I'll check the documentation.

I meant: You are right they no longer have problems with utf8 chars
now that each utf8 char is one single unit but new problems are
emerging ...


> I just corrected the xunicode part, and quickly adapted the rest, but I'll
> rework it more thouroughly later, I need to get my own ideas clear on this
> subject. I hope the temporary version is acceptable in the meanwhile.

Yes. Every information is fine: Even if it not completly correct,
people will start to discuss the issues and this helps to clear up
things. 

Btw: In the luadebug section you wrote \newrite (and I stared some
minutes on the code before I realize what is wrong).

-- 
Ulrike Fischer 


From mpg at elzevir.fr  Mon Nov  8 18:20:31 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Mon, 08 Nov 2010 18:20:31 +0100
Subject: [lltx] announcing lualatex-doc
In-Reply-To: <18zausszk5t0e.dlg@nililand.de>
References: <4CD7632D.7060403@elzevir.fr> <1xgke5vxy6zag.dlg@nililand.de>
 <4CD829AA.6050608@elzevir.fr> <18zausszk5t0e.dlg@nililand.de>
Message-ID: <4CD8315F.7050406@elzevir.fr>

Le 08/11/2010 18:11, Ulrike Fischer a ?crit :
> Am Mon, 08 Nov 2010 17:47:38 +0100 schrieb Manuel P?gouri?-Gonnard:
> 
>>> 2. Section 5.1. "Just working"
>>>
>>> Soul and listings don't have a problem with utf8-chars broken into
>>> pieces.
>>
>> I must admit I don't use them regularly, but Heiko has some wrapper packages
>> (soulutf8 and listingsutf8) so I assumed there was problems. (I also seem to
>> remember Denis mentioning problems with listings). I'll check the documentation.
> 
> I meant: You are right they no longer have problems with utf8 chars
> now that each utf8 char is one single unit but new problems are
> emerging ...
> 
Oh right, I misunderstood. Anyway, I wasn't aware of these new problems and I'm
glad you mentioned them.

>> I just corrected the xunicode part, and quickly adapted the rest, but I'll
>> rework it more thouroughly later, I need to get my own ideas clear on this
>> subject. I hope the temporary version is acceptable in the meanwhile.
> 
> Yes. Every information is fine: Even if it not completly correct,
> people will start to discuss the issues and this helps to clear up
> things. 
> 
I think so.

> Btw: In the luadebug section you wrote \newrite (and I stared some
> minutes on the code before I realize what is wrong).
> 
Right, fixed.

Manuel.

From mpg at elzevir.fr  Mon Nov  8 18:23:06 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Mon, 08 Nov 2010 18:23:06 +0100
Subject: [lltx] luaotfload suggsetion: font catalogue
Message-ID: <4CD831FA.60808@elzevir.fr>

Hi,

While writing lualatex-doc, I realised there is no single easy way for users to
the list of fonts available to LuaLaTeX. However, luaotfload has a nice font
name database.

I wonder if it would be easy to create a command-line tool for querying this
database. Also, is there a way to create a pdf with a sample of every font
family available?

That would be great!

Manuel.

From mailing_list at arcor.de  Mon Nov  8 17:16:42 2010
From: mailing_list at arcor.de (Stephan Hennig)
Date: Mon, 08 Nov 2010 17:16:42 +0100
Subject: [lltx] announcing lualatex-doc
In-Reply-To: <4CD7632D.7060403@elzevir.fr>
References: <4CD7632D.7060403@elzevir.fr>
Message-ID: <4CD8226A.5010408@arcor.de>

Am 08.11.2010 03:40, schrieb Manuel P?gouri?-Gonnard:

> I'd like to announce that I commited a tentative guide to the current state of
> LuaLaTeX. From the readme:
>
  > [...]
>
>> Feedback and suggestions for improvement are most welcome.
>
> The document is on its way to CTAN, hence your favourite (La)TeX distribution.
> The impatients can also find it at http://tug.org/~mpg/lualatex-doc.pdf

That document is really helpful.  Thank you!

Some suggestions:

* Add a warning/note that different line (and page) breaks are to be
    expected in comparison to pdfLaTeX, because LuaTeX has some modified
    algorithms, different font formats might have different metrics,
    LuaTeX doesn't necessarily uses the same hyphenation patterns than
    pdfTeX, ...

* What about language support (babel/polyglossia)?

* Given that lualatex is the name of a binary and the document doesn't
   really focus on that binary, i.e., it doesn't contain the
   command-line description of lualatex, I suggest renaming the document.
   What comes to mind is 'latex-luatex,' but just replacing 'doc' by
   'guide' or 'intro' might suffice as well.

Best regards,
Stephan Hennig

From khaledhosny at eglug.org  Mon Nov  8 18:32:51 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 8 Nov 2010 19:32:51 +0200
Subject: [lltx] luaotfload suggsetion: font catalogue
In-Reply-To: <4CD831FA.60808@elzevir.fr>
References: <4CD831FA.60808@elzevir.fr>
Message-ID: <20101108173250.GA5625@khaled-laptop>

On Mon, Nov 08, 2010 at 06:23:06PM +0100, Manuel P?gouri?-Gonnard wrote:
> Hi,
> 
> While writing lualatex-doc, I realised there is no single easy way for users to
> the list of fonts available to LuaLaTeX. However, luaotfload has a nice font
> name database.
> 
> I wonder if it would be easy to create a command-line tool for querying this
> database. Also, is there a way to create a pdf with a sample of every font
> family available?

It would be a bit tricky if you want to group fonts in families, since
the current names database have every single face in its own entry
with no connection to other faces in the family. You may end up creating
a parallel table (iterating through the whole database and grouping
faces in the same family together), then using that to generate whatever
output you want. May be one day we will provide a tool to query the font
database, but the current font names handling code is a bit messy and
might need to be cleaned up first.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From mailing_list at arcor.de  Tue Nov  9 18:54:05 2010
From: mailing_list at arcor.de (Stephan Hennig)
Date: Tue, 09 Nov 2010 18:54:05 +0100
Subject: [lltx] announcing lualatex-doc
In-Reply-To: <4CD82CB4.1010009@elzevir.fr>
References: <4CD7632D.7060403@elzevir.fr> <4CD8226A.5010408@arcor.de>
 <4CD82CB4.1010009@elzevir.fr>
Message-ID: <4CD98ABD.7000402@arcor.de>

Am 08.11.2010 18:00, schrieb Manuel P?gouri?-Gonnard:
> Le 08/11/2010 17:16, Stephan Hennig a ?crit :
>> * Add a warning/note that different line (and page) breaks are to be
>>      expected in comparison to pdfLaTeX, because LuaTeX has some modified
>>      algorithms, different font formats might have different metrics,
>>      LuaTeX doesn't necessarily uses the same hyphenation patterns than
>>      pdfTeX, ...
>>
> It's not very clear to me to which extend one may expect differences. I'm under
> the impression the differences in the algorithm are mostly negligible except in
> edge case.

Oh, I didn't meant to say all line breaks will turn out different when 
switching from pdfTeX to LuaTeX.  But for LuaTeX, in contrast to other 
engines, identical typesetting results for legacy documents have not 
been a design goal.  LaTeX users switching to LuaTeX should keep that in 
mind.

Sources of incompatibility that I know:

* LuaTeX hyphenates the first word of a paragraph.
   use-case: long words in narrow table columns

* In LuaTeX font switching doesn't imply a word boundary (see
   luatexref-t.pdf, sec. 6.4, 'Applying hyphenation').  That is, words
   containing letters typeset in different fonts are hyphenated
   correctly.  As an example, compare the result of pdftex and luatex
   with this code:

\hsize2cm
An  intere{\it st\/}ing word.
\bye

   use-case: educational texts

* Ligature handling.  Unfortunately, I don't understand ligature
   handling of neither TeX nor LuaTeX well enough to explain the
   differences, but reading sec. 6.5, 'Applying ligatures and kerning,'
   of luatexref-t.pdf, my impression is they are not 100 % compatible.
   use-case: possibly any text?

Which of these items is an edge-case is hard to tell.  From an 
algorithmic point of view all of these are surely edge-cases.  But from 
a document designer's point of view, any of that might just affect you.

> The patterns are the same for XeTeX and LuaTeX.

Sure.  I was aiming at LaTeX users switching from traditional TeX or 
pdfTeX to LuaTeX.  I know of at least one language where there are 
different patterns used by traditional and modern engines (German, 
incidentally).


> So, the only important source of differences is the fonts that may not be
> selected the same way and are never used in exactly the same way (there is a
> fundamental difference between XeTeX and LuaTeX here indeed).

Are you actually focusing on differences between XeTeX and LaTeX?


> I'm not saying there are no differences, but for the moment I'm hesitating to
> mention them since the extent isn't very clear to me.

It isn't very clear to me too, but then again, mentioning possible 
incompatibilities in the document should put you (and the users) on the 
safe side.  Going into detail with examples isn't necessary, I think.

Best regards,
Stephan Hennig

From mpg at elzevir.fr  Tue Nov  9 19:20:14 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Tue, 09 Nov 2010 19:20:14 +0100
Subject: [lltx] announcing lualatex-doc
In-Reply-To: <4CD98ABD.7000402@arcor.de>
References: <4CD7632D.7060403@elzevir.fr> <4CD8226A.5010408@arcor.de>
 <4CD82CB4.1010009@elzevir.fr> <4CD98ABD.7000402@arcor.de>
Message-ID: <4CD990DE.8080907@elzevir.fr>

Le 09/11/2010 18:54, Stephan Hennig a ?crit :
> Oh, I didn't meant to say all line breaks will turn out different when 
> switching from pdfTeX to LuaTeX.  But for LuaTeX, in contrast to other 
> engines, identical typesetting results for legacy documents have not 
> been a design goal.  LaTeX users switching to LuaTeX should keep that in 
> mind.
> 
Indeed.

> Sources of incompatibility that I know:
> [snipped interesting details]
> Which of these items is an edge-case is hard to tell.  From an 
> algorithmic point of view all of these are surely edge-cases.  But from 
> a document designer's point of view, any of that might just affect you.
> 
Thanks for the details and examples. I think you're right that what one might
call edge cases from an implementation perspective is not so unlikely to happen
in practice.

>> The patterns are the same for XeTeX and LuaTeX.
> 
> Sure.  I was aiming at LaTeX users switching from traditional TeX or 
> pdfTeX to LuaTeX.  I know of at least one language where there are 
> different patterns used by traditional and modern engines (German, 
> incidentally).
> 
Right.

>> So, the only important source of differences is the fonts that may not be
>> selected the same way and are never used in exactly the same way (there is a
>> fundamental difference between XeTeX and LuaTeX here indeed).
> 
> Are you actually focusing on differences between XeTeX and LaTeX?
> 
Well, that's not the goal of the document, but for some reason that's what I was
thinking about when I wrote the above paragraph... which is not so relevant
after all.

>> I'm not saying there are no differences, but for the moment I'm hesitating to
>> mention them since the extent isn't very clear to me.
> 
> It isn't very clear to me too, but then again, mentioning possible 
> incompatibilities in the document should put you (and the users) on the 
> safe side.  Going into detail with examples isn't necessary, I think.
> 
I already added a small paragraph about that:

https://github.com/mpg/lualatex-doc/commit/79556cc0

I'll consider improving this paragraph later using the informations in your
email. I agree that examples are maybe not necessary, but knowing a bit more
about the differences might help to imagine how likely it is that they actually
affect one's documents.

Thanks again,
Manuel.

From mpg at elzevir.fr  Thu Nov 11 02:05:30 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Thu, 11 Nov 2010 02:05:30 +0100
Subject: [lltx] upcoming luatexbase update
Message-ID: <4CDB415A.3030901@elzevir.fr>

Hi,

I've got a new release of luatexbase ready, which mainly consists of reading,
polishing and completing user doc for the mcb (multiple callbacks) and modutils
(module identification) subpackages. There are a few incompatible changes,
mainly name changes:

    modutils
        - \luatexUseModule and \luatexRequireModule replaced by
          \RequireLuaModule with a unified syntax.
        - luatexbase.use_module removed (use luatexbase.require_module with
          a single argument instead).
        - luatexbase.module_term removed.
        - removed support for version check using a floating point
    mcb
        - rationalise "list"-type callbacks handling. The new calling

Only the first two points have a real impact in practice. I created an pushed to
github a branch "lltxb", based on current master, of fontspec and luaotfload
with the few adaptations needed.

I also used the occasion to switch them to luatexbase+lualibs instead of
luatextra. There is now a clear separation between the former, which are basic
packages for programmers, and the later, which is a user-level convenience
package. (And you don't want \LuaTeX and {luacode} to be defined as a
side-effect of loading luaotfload or fontspec, I guess.)

Anyway, the point of my message is to suggest coordinating for the next CTAN
upload: to avoid creating a temporary compatibility layer, it would be best if
we could upload the three packages together.

Thanks,
Manuel.

From khaledhosny at eglug.org  Thu Nov 11 06:28:51 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Thu, 11 Nov 2010 07:28:51 +0200
Subject: [lltx] upcoming luatexbase update
In-Reply-To: <4CDB415A.3030901@elzevir.fr>
References: <4CDB415A.3030901@elzevir.fr>
Message-ID: <20101111052851.GA1753@khaled-laptop>

On Thu, Nov 11, 2010 at 02:05:30AM +0100, Manuel P?gouri?-Gonnard wrote:
> Hi,
> 
> I've got a new release of luatexbase ready, which mainly consists of reading,
> polishing and completing user doc for the mcb (multiple callbacks) and modutils
> (module identification) subpackages. There are a few incompatible changes,
> mainly name changes:
> 
>     modutils
>         - \luatexUseModule and \luatexRequireModule replaced by
>           \RequireLuaModule with a unified syntax.
>         - luatexbase.use_module removed (use luatexbase.require_module with
>           a single argument instead).
>         - luatexbase.module_term removed.
>         - removed support for version check using a floating point
>     mcb
>         - rationalise "list"-type callbacks handling. The new calling
> 
> Only the first two points have a real impact in practice. I created an pushed to
> github a branch "lltxb", based on current master, of fontspec and luaotfload
> with the few adaptations needed.
> 
> I also used the occasion to switch them to luatexbase+lualibs instead of
> luatextra. There is now a clear separation between the former, which are basic
> packages for programmers, and the later, which is a user-level convenience
> package. (And you don't want \LuaTeX and {luacode} to be defined as a
> side-effect of loading luaotfload or fontspec, I guess.)
> 
> Anyway, the point of my message is to suggest coordinating for the next CTAN
> upload: to avoid creating a temporary compatibility layer, it would be best if
> we could upload the three packages together.

Looks good, nice work :) I'll merge lltxb branch with master luaotfload
and add a news item, if you don't mind uploading it as well, it is fine
with me, else you can just notify me when luatexbase upload is going.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From wspr81 at gmail.com  Thu Nov 11 06:46:17 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Thu, 11 Nov 2010 16:16:17 +1030
Subject: [lltx] upcoming luatexbase update
In-Reply-To: <4CDB415A.3030901@elzevir.fr>
References: <4CDB415A.3030901@elzevir.fr>
Message-ID: <47F326DB-C3C9-44DA-8639-17B9C8037A6D@gmail.com>

On 11/11/2010, at 11:35 AM, Manuel P?gouri?-Gonnard wrote:

> Anyway, the point of my message is to suggest coordinating for the next CTAN
> upload: to avoid creating a temporary compatibility layer, it would be best if
> we could upload the three packages together.

Everything seems to work fine -- how would you like to coordinate this?
I can send you the .tds.zip file for the CTAN upload if you'd like to do it all at once; otherwise just give me a little warning and I can send it in myself when appropriate.

-- Will



From mpg at elzevir.fr  Thu Nov 11 14:51:02 2010
From: mpg at elzevir.fr (=?UTF-8?B?TWFudWVsIFDDqWdvdXJpw6ktR29ubmFyZA==?=)
Date: Thu, 11 Nov 2010 14:51:02 +0100
Subject: [lltx] upcoming luatexbase update
In-Reply-To: <20101111052851.GA1753@khaled-laptop>
References: <4CDB415A.3030901@elzevir.fr> <20101111052851.GA1753@khaled-laptop>
Message-ID: <4CDBF4C6.5010309@elzevir.fr>

Le 11/11/2010 06:28, Khaled Hosny a ?crit :
> Looks good, nice work :) 

Thanks!

> I'll merge lltxb branch with master luaotfload
> and add a news item, if you don't mind uploading it as well, it is fine
> with me, else you can just notify me when luatexbase upload is going.
> 
Nope, I don't mind building and uploading luaotfload with the rest.

Le 11/11/2010 06:46, Will Robertson a ?crit :
> Everything seems to work fine

By the way, it's very comfortable to work with packages with a test suite like
luaotfload and fontspec. I feel much more confident doing changes.

> -- how would you like to coordinate this? I
> can send you the .tds.zip file for the CTAN upload if you'd like to do it all
> at once; otherwise just give me a little warning and I can send it in myself 
> when appropriate.
> 
I'll happily take care of it if you send me a zip file suitable for CTAN.

Thanks,
Manuel.

From mpg at elzevir.fr  Thu Nov 11 17:25:16 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Thu, 11 Nov 2010 17:25:16 +0100
Subject: [lltx] no bold with Linux Libertine O
Message-ID: <4CDC18EC.8050705@elzevir.fr>

Hi,

With everything from current TeX Live, using the following test file:

\documentclass[a4paper]{article}
\usepackage{fontspec}
\setmainfont[Ligatures=TeX]{Linux Libertine O}

\begin{document}
Blah \textbf{blah} blah \textit{blah} blah.
\end{document}

I get no bold and the following warning:

LaTeX Font Warning: Font shape `EU2/LinuxLibertineO(0)/bx/n' undefined
(Font)              using `EU2/LinuxLibertineO(0)/m/n' instead on input line 6.

However, everything works just fine with XeLaTeX. My font name cache contains an
entry:

  {
   ["familyname"]="Linux Libertine O",
   ["filename"]={ "fxlb.otf", false },
   ["fontname"]="LinLibertineOB",
   ["fullname"]="Linux Libertine O Bold",
   ["names"]={
    ["family"]="Linux Libertine O",
    ["fullname"]="Linux Libertine O Bold",
    ["psname"]="LinLibertineOB",
    ["subfamily"]="Bold Regular",
   },
   ["size"]={},
   ["slant"]=0,
   ["weight"]=700,
   ["width"]=5,
  },

but my font cache directory has cache files for:

 temp-fxlbi.lua  temp-fxlri.lua  temp-fxlr.lua

only (note the lack of cache for fxlb).

Any idea, font gurus?

Thanks,
Manuel.


From news3 at nililand.de  Thu Nov 11 18:51:12 2010
From: news3 at nililand.de (Ulrike Fischer)
Date: Thu, 11 Nov 2010 18:51:12 +0100
Subject: [lltx] no bold with Linux Libertine O
References: <4CDC18EC.8050705@elzevir.fr>
Message-ID: <18n7xp1p2r5jt$.dlg@nililand.de>

Am Thu, 11 Nov 2010 17:25:16 +0100 schrieb Manuel P?gouri?-Gonnard:

> Hi,
> 
> With everything from current TeX Live, using the following test file:
> 
> \documentclass[a4paper]{article}
> \usepackage{fontspec}
> \setmainfont[Ligatures=TeX]{Linux Libertine O}
> 
> \begin{document}
> Blah \textbf{blah} blah \textit{blah} blah.
> \end{document}
> 
> I get no bold and the following warning:

http://tug.org/pipermail/lualatex-dev/2010-September/000860.html

Your example works fine with the new version from
www.linuxlibertine.org.

-- 
Ulrike Fischer 


From mpg at elzevir.fr  Thu Nov 11 19:05:41 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Thu, 11 Nov 2010 19:05:41 +0100
Subject: [lltx] no bold with Linux Libertine O
In-Reply-To: <18n7xp1p2r5jt$.dlg@nililand.de>
References: <4CDC18EC.8050705@elzevir.fr> <18n7xp1p2r5jt$.dlg@nililand.de>
Message-ID: <4CDC3075.1000104@elzevir.fr>

Le 11/11/2010 18:51, Ulrike Fischer a ?crit :
> Am Thu, 11 Nov 2010 17:25:16 +0100 schrieb Manuel P?gouri?-Gonnard:
> 
>> With everything from current TeX Live, using the following test file:
>>
>> \documentclass[a4paper]{article}
>> \usepackage{fontspec}
>> \setmainfont[Ligatures=TeX]{Linux Libertine O}
>>
>> \begin{document}
>> Blah \textbf{blah} blah \textit{blah} blah.
>> \end{document}
>>
>> I get no bold and the following warning:
> 
> http://tug.org/pipermail/lualatex-dev/2010-September/000860.html
> 
> Your example works fine with the new version from
> www.linuxlibertine.org.
> 
Great, thanks!

Manuel.

From mailing_list at arcor.de  Fri Nov 12 14:37:48 2010
From: mailing_list at arcor.de (Stephan Hennig)
Date: Fri, 12 Nov 2010 14:37:48 +0100
Subject: [lltx] hyphenation problem with fontspec
In-Reply-To: <4CDD3A91.3030503@arcor.de>
References: <4CDD3A91.3030503@arcor.de>
Message-ID: <4CDD432C.1000601@arcor.de>

Am 12.11.2010 14:01, schrieb Stephan Hennig:

> \documentclass[draft]{article}
> %\usepackage{fontspec}
> \usepackage[T1]{fontenc}
> \usepackage{lmodern}

I just realize that uncommenting the fontspec-line the error doesn't 
exhibit.  In addition, the lines loading packages fontenc and lmodern 
have to be commented to exhibit the error.

Best regards,
Stephan Hennig


\documentclass[draft]{article}
\usepackage{fontspec}
%\usepackage[T1]{fontenc}
%\usepackage{lmodern}
\usepackage[width=2cm]{geometry}
\begin{document}
An  intere\textit{st}ing word.

An intere{\itshape st\/}ing word.
\end{document}

From mailing_list at arcor.de  Fri Nov 12 14:01:05 2010
From: mailing_list at arcor.de (Stephan Hennig)
Date: Fri, 12 Nov 2010 14:01:05 +0100
Subject: [lltx] hyphenation problem with fontspec
Message-ID: <4CDD3A91.3030503@arcor.de>

Hi,

with LuaTeX words containing letters in different fonts can be properly 
hyphenated.  In the following LaTeX example this works well as long as 
fontspec isn't loaded.  With fontspec loaded the \itshape version is 
still hyphenated, but the \textit version isn't.  Is that expected 
behaviour?

Best regards,
Stephan Hennig

\documentclass[draft]{article}
%\usepackage{fontspec}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[width=2cm]{geometry}
\begin{document}
An  intere\textit{st}ing word.

An intere{\itshape st\/}ing word.
\end{document}

From khaledhosny at eglug.org  Fri Nov 12 15:40:29 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 12 Nov 2010 16:40:29 +0200
Subject: [lltx] hyphenation problem with fontspec
In-Reply-To: <4CDD432C.1000601@arcor.de>
References: <4CDD3A91.3030503@arcor.de>
 <4CDD432C.1000601@arcor.de>
Message-ID: <20101112144029.GB4387@khaled-laptop>

On Fri, Nov 12, 2010 at 02:37:48PM +0100, Stephan Hennig wrote:
> Am 12.11.2010 14:01, schrieb Stephan Hennig:
> 
> >\documentclass[draft]{article}
> >%\usepackage{fontspec}
> >\usepackage[T1]{fontenc}
> >\usepackage{lmodern}
> 
> I just realize that uncommenting the fontspec-line the error doesn't
> exhibit.  In addition, the lines loading packages fontenc and
> lmodern have to be commented to exhibit the error.
> 
> Best regards,
> Stephan Hennig
> 
> 
> \documentclass[draft]{article}
> \usepackage{fontspec}
> %\usepackage[T1]{fontenc}
> %\usepackage{lmodern}
> \usepackage[width=2cm]{geometry}
> \begin{document}
> An  intere\textit{st}ing word.
> 
> An intere{\itshape st\/}ing word.
> \end{document}

Comparing the nodes of each line, there is:

....\kern 0.0

bewtween e and s in the first line, and:

....\discretionary
.....\EU2/lmr/m/n/10 -

between r and e in the second line, the rest of the nodes are the same
ASFAICT.

PS. I used:

 \tracingoutput=1
 \tracingonline=1
 \showboxdepth=\maxdimen
 \showboxbreadth=\maxdimen

to get the node listing, by trial and error so I'm not sure if these are
the correct values to set.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From elie.roux at telecom-bretagne.eu  Sat Nov 13 09:19:33 2010
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Sat, 13 Nov 2010 09:19:33 +0100
Subject: [lltx] [metapost] luamplib
In-Reply-To: <4CDDA901.80003@wxs.nl>
References: <0LBQ00EDAL5VS14G@mailhost.uark.edu> <4CDCFBF7.3030903@wxs.nl>
 <0LBS00EG5BFLS10K@mailhost.uark.edu> <4CDDA901.80003@wxs.nl>
Message-ID: <4CDE4A15.20808@telecom-bretagne.eu>

Hans Hagen a ?crit :
> Hi Ely,
> 
> in luamplib there is a bug:
> 
> local function pen_characteristics(object)
>     if luamplib.pen_info then
>         local t = luamplib.pen_info(object)
>         rx, ry, sx, sy, tx, ty = t.rx, t.ry, t.sx, t.sy, t.tx, t.ty
>         divider = sx*sy - rx*ry
>         return not (sx==1 and rx==0 and ry==0 and sy==1 and tx==0 and 
> ty==0), t.width
>     else
>         rx, sx, sy, ry, tx, ty, divider = 1, 0, 0, 1, 0, 0, 1
>         return false, 1
>     end
> end
> 
> luamplib.pen_info
> 
> should be
> 
> mplib.pen_info
> 
> (probably some side effect of renaming at your end)
> 
> Actually I think that
> 
> local function pen_characteristics(object)
>     local t = mplib.pen_info(object)
>     rx, ry, sx, sy, tx, ty = t.rx, t.ry, t.sx, t.sy, t.tx, t.ty
>     divider = sx*sy - rx*ry
>     return not (sx==1 and rx==0 and ry==0 and sy==1 and tx==0 and 
> ty==0), t.width
> end
> 
> is ok as well, as pen_info is already in mpib for a while

Hello Hans,

Thank you for your report! I'm not working on the packages anymore, but 
I transfer the informations.

Thank you,
-- 
Elie

From mailing_list at arcor.de  Sat Nov 13 12:12:47 2010
From: mailing_list at arcor.de (Stephan Hennig)
Date: Sat, 13 Nov 2010 12:12:47 +0100
Subject: [lltx] hyphenation problem with fontspec
In-Reply-To: <20101112144029.GB4387@khaled-laptop>
References: <4CDD3A91.3030503@arcor.de> <4CDD432C.1000601@arcor.de>
 <20101112144029.GB4387@khaled-laptop>
Message-ID: <4CDE72AF.3060203@arcor.de>

Am 12.11.2010 15:40, schrieb Khaled Hosny:
> On Fri, Nov 12, 2010 at 02:37:48PM +0100, Stephan Hennig wrote:
>>
> Comparing the nodes of each line, there is:
>
> ....\kern 0.0
>
> bewtween e and s in the first line, and:
>
> ....\discretionary
> .....\EU2/lmr/m/n/10 -
>
> between r and e in the second line, the rest of the nodes are the same
> ASFAICT.

Hm, do you think that qualifies as a bug or is it a feature?

Best regards,
Stephan Hennig

From khaledhosny at eglug.org  Sat Nov 13 12:20:08 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sat, 13 Nov 2010 13:20:08 +0200
Subject: [lltx] hyphenation problem with fontspec
In-Reply-To: <4CDE72AF.3060203@arcor.de>
References: <4CDD3A91.3030503@arcor.de> <4CDD432C.1000601@arcor.de>
 <20101112144029.GB4387@khaled-laptop> <4CDE72AF.3060203@arcor.de>
Message-ID: <20101113112008.GA2075@khaled-laptop>

On Sat, Nov 13, 2010 at 12:12:47PM +0100, Stephan Hennig wrote:
> Am 12.11.2010 15:40, schrieb Khaled Hosny:
> >On Fri, Nov 12, 2010 at 02:37:48PM +0100, Stephan Hennig wrote:
> >>
> >Comparing the nodes of each line, there is:
> >
> >....\kern 0.0
> >
> >bewtween e and s in the first line, and:
> >
> >....\discretionary
> >.....\EU2/lmr/m/n/10 -
> >
> >between r and e in the second line, the rest of the nodes are the same
> >ASFAICT.
> 
> Hm, do you think that qualifies as a bug or is it a feature?

I'm not sure what is going on, but since it is not even the default
LaTeX behaviour, it is definitely a bug.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From khaledhosny at eglug.org  Sat Nov 13 23:02:46 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sun, 14 Nov 2010 00:02:46 +0200
Subject: [lltx] [metapost] luamplib
In-Reply-To: <4CDE4A15.20808@telecom-bretagne.eu>
References: <0LBQ00EDAL5VS14G@mailhost.uark.edu> <4CDCFBF7.3030903@wxs.nl>
 <0LBS00EG5BFLS10K@mailhost.uark.edu> <4CDDA901.80003@wxs.nl>
 <4CDE4A15.20808@telecom-bretagne.eu>
Message-ID: <20101113220246.GA15890@khaled-laptop>

On Sat, Nov 13, 2010 at 09:19:33AM +0100, Elie Roux wrote:
> Hans Hagen a ?crit :
> >Hi Ely,
> >
> >in luamplib there is a bug:
> >
> >local function pen_characteristics(object)
> >    if luamplib.pen_info then
> >        local t = luamplib.pen_info(object)
> >        rx, ry, sx, sy, tx, ty = t.rx, t.ry, t.sx, t.sy, t.tx, t.ty
> >        divider = sx*sy - rx*ry
> >        return not (sx==1 and rx==0 and ry==0 and sy==1 and tx==0
> >and ty==0), t.width
> >    else
> >        rx, sx, sy, ry, tx, ty, divider = 1, 0, 0, 1, 0, 0, 1
> >        return false, 1
> >    end
> >end
> >
> >luamplib.pen_info
> >
> >should be
> >
> >mplib.pen_info
> >
> >(probably some side effect of renaming at your end)
> >
> >Actually I think that
> >
> >local function pen_characteristics(object)
> >    local t = mplib.pen_info(object)
> >    rx, ry, sx, sy, tx, ty = t.rx, t.ry, t.sx, t.sy, t.tx, t.ty
> >    divider = sx*sy - rx*ry
> >    return not (sx==1 and rx==0 and ry==0 and sy==1 and tx==0 and
> >ty==0), t.width
> >end
> >
> >is ok as well, as pen_info is already in mpib for a while
> 
> Hello Hans,
> 
> Thank you for your report! I'm not working on the packages anymore,
> but I transfer the informations.

So who is maintaining luamplib now? Manuel is it under your radar? I'd
try to co-maintain it if needed.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From mpg at elzevir.fr  Tue Nov 16 22:42:27 2010
From: mpg at elzevir.fr (=?UTF-8?B?TWFudWVsIFDDqWdvdXJpw6ktR29ubmFyZA==?=)
Date: Tue, 16 Nov 2010 22:42:27 +0100
Subject: [lltx] [metapost] luamplib
In-Reply-To: <20101113220246.GA15890@khaled-laptop>
References: <0LBQ00EDAL5VS14G@mailhost.uark.edu> <4CDCFBF7.3030903@wxs.nl>
 <0LBS00EG5BFLS10K@mailhost.uark.edu> <4CDDA901.80003@wxs.nl>
 <4CDE4A15.20808@telecom-bretagne.eu> <20101113220246.GA15890@khaled-laptop>
Message-ID: <4CE2FAC3.2060905@elzevir.fr>

Le 13/11/2010 23:02, Khaled Hosny a ?crit :
> So who is maintaining luamplib now? Manuel is it under your radar? I'd
> try to co-maintain it if needed.
> 
I'll be maintaining it if no-one else does, and will welcome your help, Khaled,
if you want to co-maintain it.

For now, I applied the fix in the repo, and I'll upload to CTAN soon (depending
on the date of the luatexbase grouped upload).

Thanks,
Manuel.

From khaledhosny at eglug.org  Wed Nov 17 13:43:29 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 17 Nov 2010 14:43:29 +0200
Subject: [lltx] [metapost] luamplib
In-Reply-To: <4CE2FAC3.2060905@elzevir.fr>
References: <0LBQ00EDAL5VS14G@mailhost.uark.edu> <4CDCFBF7.3030903@wxs.nl>
 <0LBS00EG5BFLS10K@mailhost.uark.edu> <4CDDA901.80003@wxs.nl>
 <4CDE4A15.20808@telecom-bretagne.eu>
 <20101113220246.GA15890@khaled-laptop>
 <4CE2FAC3.2060905@elzevir.fr>
Message-ID: <20101117124329.GA4154@khaled-laptop>

On Tue, Nov 16, 2010 at 10:42:27PM +0100, Manuel P?gouri?-Gonnard wrote:
> Le 13/11/2010 23:02, Khaled Hosny a ?crit :
> > So who is maintaining luamplib now? Manuel is it under your radar? I'd
> > try to co-maintain it if needed.
> > 
> I'll be maintaining it if no-one else does, and will welcome your help, Khaled,
> if you want to co-maintain it.

I don't plan for any big work in the near future, just the occasional
bug fix and so, just in case you are busy with other stuff. (I don't
have write access to the repository, why I'm asking).

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From mpg at elzevir.fr  Wed Nov 17 14:32:36 2010
From: mpg at elzevir.fr (=?UTF-8?B?TWFudWVsIFDDqWdvdXJpw6ktR29ubmFyZA==?=)
Date: Wed, 17 Nov 2010 14:32:36 +0100
Subject: [lltx] [metapost] luamplib
In-Reply-To: <20101117124329.GA4154@khaled-laptop>
References: <0LBQ00EDAL5VS14G@mailhost.uark.edu> <4CDCFBF7.3030903@wxs.nl>
 <0LBS00EG5BFLS10K@mailhost.uark.edu> <4CDDA901.80003@wxs.nl>
 <4CDE4A15.20808@telecom-bretagne.eu> <20101113220246.GA15890@khaled-laptop>
 <4CE2FAC3.2060905@elzevir.fr> <20101117124329.GA4154@khaled-laptop>
Message-ID: <4CE3D974.9010807@elzevir.fr>

Le 17/11/2010 13:43, Khaled Hosny a ?crit :
> On Tue, Nov 16, 2010 at 10:42:27PM +0100, Manuel P?gouri?-Gonnard wrote:
>> Le 13/11/2010 23:02, Khaled Hosny a ?crit :
>>> So who is maintaining luamplib now? Manuel is it under your radar? I'd
>>> try to co-maintain it if needed.
>>>
>> I'll be maintaining it if no-one else does, and will welcome your help, Khaled,
>> if you want to co-maintain it.
> 
> I don't plan for any big work in the near future, just the occasional
> bug fix and so, just in case you are busy with other stuff. (I don't
> have write access to the repository, why I'm asking).
> 
Now you do. Thanks for asking.

By the way, I did an upload to CTAN an few hours ago. I took the occasion to
change the support address from ?lie to this list (lualatex-dev at tug).

Manuel.

From khaledhosny at eglug.org  Wed Nov 17 14:47:42 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 17 Nov 2010 15:47:42 +0200
Subject: [lltx] [metapost] luamplib
In-Reply-To: <4CE3D974.9010807@elzevir.fr>
References: <0LBQ00EDAL5VS14G@mailhost.uark.edu> <4CDCFBF7.3030903@wxs.nl>
 <0LBS00EG5BFLS10K@mailhost.uark.edu> <4CDDA901.80003@wxs.nl>
 <4CDE4A15.20808@telecom-bretagne.eu>
 <20101113220246.GA15890@khaled-laptop>
 <4CE2FAC3.2060905@elzevir.fr> <20101117124329.GA4154@khaled-laptop>
 <4CE3D974.9010807@elzevir.fr>
Message-ID: <20101117134741.GA4860@khaled-laptop>

On Wed, Nov 17, 2010 at 02:32:36PM +0100, Manuel P?gouri?-Gonnard wrote:
> Le 17/11/2010 13:43, Khaled Hosny a ?crit :
> > On Tue, Nov 16, 2010 at 10:42:27PM +0100, Manuel P?gouri?-Gonnard wrote:
> >> Le 13/11/2010 23:02, Khaled Hosny a ?crit :
> >>> So who is maintaining luamplib now? Manuel is it under your radar? I'd
> >>> try to co-maintain it if needed.
> >>>
> >> I'll be maintaining it if no-one else does, and will welcome your help, Khaled,
> >> if you want to co-maintain it.
> > 
> > I don't plan for any big work in the near future, just the occasional
> > bug fix and so, just in case you are busy with other stuff. (I don't
> > have write access to the repository, why I'm asking).
> > 
> Now you do. Thanks for asking.

Thanks.

> By the way, I did an upload to CTAN an few hours ago. I took the occasion to
> change the support address from ?lie to this list (lualatex-dev at tug).

I think we should do that for other packages too, people should be
asking questions in the mailing list not privately to us.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From mpg at elzevir.fr  Wed Nov 17 17:56:01 2010
From: mpg at elzevir.fr (=?UTF-8?B?TWFudWVsIFDDqWdvdXJpw6ktR29ubmFyZA==?=)
Date: Wed, 17 Nov 2010 17:56:01 +0100
Subject: [lltx] [metapost] luamplib
In-Reply-To: <20101117134741.GA4860@khaled-laptop>
References: <0LBQ00EDAL5VS14G@mailhost.uark.edu> <4CDCFBF7.3030903@wxs.nl>
 <0LBS00EG5BFLS10K@mailhost.uark.edu> <4CDDA901.80003@wxs.nl>
 <4CDE4A15.20808@telecom-bretagne.eu> <20101113220246.GA15890@khaled-laptop>
 <4CE2FAC3.2060905@elzevir.fr> <20101117124329.GA4154@khaled-laptop>
 <4CE3D974.9010807@elzevir.fr> <20101117134741.GA4860@khaled-laptop>
Message-ID: <4CE40921.2010902@elzevir.fr>

Le 17/11/2010 14:47, Khaled Hosny a ?crit :
> I think we should do that for other packages too, people should be
> asking questions in the mailing list not privately to us.
> 
I already did that for luatexbase & luatextra, iirc. Other packages I maintain
will follow next time I update them.

m

From taco at elvenkind.com  Wed Nov 17 18:07:27 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 17 Nov 2010 18:07:27 +0100
Subject: [lltx] [metapost] luamplib
In-Reply-To: <4CE40921.2010902@elzevir.fr>
References: <0LBQ00EDAL5VS14G@mailhost.uark.edu> <4CDCFBF7.3030903@wxs.nl>
 <0LBS00EG5BFLS10K@mailhost.uark.edu> <4CDDA901.80003@wxs.nl>
 <4CDE4A15.20808@telecom-bretagne.eu> <20101113220246.GA15890@khaled-laptop>
 <4CE2FAC3.2060905@elzevir.fr> <20101117124329.GA4154@khaled-laptop>
 <4CE3D974.9010807@elzevir.fr> <20101117134741.GA4860@khaled-laptop>
 <4CE40921.2010902@elzevir.fr>
Message-ID: <4CE40BCF.3090705@elvenkind.com>

On 11/17/2010 05:56 PM, Manuel P?gouri?-Gonnard wrote:
> Le 17/11/2010 14:47, Khaled Hosny a ?crit :
>> I think we should do that for other packages too, people should be
>> asking questions in the mailing list not privately to us.
>>
> I already did that for luatexbase&  luatextra, iirc. Other packages I maintain
> will follow next time I update them.

No matter how hard you try, it seems you cannot eradicate private email
messages completely. :(

Best wishes,
Taco

From mailing_list at arcor.de  Mon Nov 22 14:02:31 2010
From: mailing_list at arcor.de (Stephan Hennig)
Date: Mon, 22 Nov 2010 14:02:31 +0100
Subject: [lltx] [luatex] fontspec prevents hyphenation
In-Reply-To: <4CEA607F.8070307@elvenkind.com>
References: <4CEA5134.6070006@web.de> <4CEA607F.8070307@elvenkind.com>
Message-ID: <4CEA69E7.5000102@arcor.de>

Am 22.11.2010 13:22, schrieb Taco Hoekwater:

> The problematic case seems to be: a combination of a non-letter in one
> font, followed by a letter in another font. LuaTeX does not consider
> that a valid word start. I will add an item to the tracker database.

There's another problem with fontspec and hyphenation involving only 
letters, but font switching, too.  You can find the (short) discussion 
on lualatex-dev at 
<URL:http://permalink.gmane.org/gmane.comp.tex.lualatex.devel/556>.

Best regards,
Stephan Hennig

\documentclass[draft]{article}
\usepackage{fontspec}
\usepackage[width=2cm]{geometry}
\begin{document}
An  intere\textit{st}ing word.% no hyphenation

An intere{\itshape st\/}ing word.% hyphenated
\end{document}

From taco at elvenkind.com  Sun Nov 28 12:05:01 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 28 Nov 2010 12:05:01 +0100
Subject: [lltx] [luatex] fontspec prevents hyphenation
In-Reply-To: <4CEA607F.8070307@elvenkind.com>
References: <4CEA5134.6070006@web.de> <4CEA607F.8070307@elvenkind.com>
Message-ID: <4CF2375D.7080802@elvenkind.com>

Hi,

On 11/22/2010 01:22 PM, Taco Hoekwater wrote:
>>
>> Would you be so kind to fix this?
>
> The problematic case seems to be: a combination of a non-letter in one
> font, followed by a letter in another font. LuaTeX does not consider
> that a valid word start. I will add an item to the tracker database.

That was a bad analysis. The bug is not in luatex at all, it is a bug
in fontspec.  Some input like

   (\emph{hyphenation})

in fontspec produces the following low-level node list

   ( \/ h y p h e n a t i o n \/ )

and the "\/ h" combination is not a valid word start (the second italic
correction is fine, the first one is the problem).

In this, luatex is compatible with TeX itself, you can try

   \showhyphens{(\/hyphenation\/)}

in plain TeX to see the thing happening (same lack of hyphenation).

Closing the luatex tracker item,

Taco




From khaledhosny at eglug.org  Sun Nov 28 12:40:37 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sun, 28 Nov 2010 13:40:37 +0200
Subject: [lltx] [luatex] fontspec prevents hyphenation
In-Reply-To: <4CF2375D.7080802@elvenkind.com>
References: <4CEA5134.6070006@web.de> <4CEA607F.8070307@elvenkind.com>
 <4CF2375D.7080802@elvenkind.com>
Message-ID: <20101128114037.GA3404@khaled-laptop>

On Sun, Nov 28, 2010 at 12:05:01PM +0100, Taco Hoekwater wrote:
> Hi,
> 
> On 11/22/2010 01:22 PM, Taco Hoekwater wrote:
> >>
> >>Would you be so kind to fix this?
> >
> >The problematic case seems to be: a combination of a non-letter in one
> >font, followed by a letter in another font. LuaTeX does not consider
> >that a valid word start. I will add an item to the tracker database.
> 
> That was a bad analysis. The bug is not in luatex at all, it is a bug
> in fontspec.  Some input like
> 
>   (\emph{hyphenation})
> 
> in fontspec produces the following low-level node list
> 
>   ( \/ h y p h e n a t i o n \/ )
> 
> and the "\/ h" combination is not a valid word start (the second italic
> correction is fine, the first one is the problem).
> 
> In this, luatex is compatible with TeX itself, you can try
> 
>   \showhyphens{(\/hyphenation\/)}
> 
> in plain TeX to see the thing happening (same lack of hyphenation).
> 
> Closing the luatex tracker item,

It seems deeper than fontspec, either in luaotfload or something deeper
inside latex. This gives the same result:

\documentclass{article}
\usepackage{luaotfload}
\usepackage[EU2]{fontenc}
\usepackage[width=2cm]{geometry}

\begin{document}
An intere\textit{st}ing word.

An intere{\itshape st}ing word
\end{document}

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From st_philipp at yahoo.de  Sun Nov 28 14:13:21 2010
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Sun, 28 Nov 2010 14:13:21 +0100
Subject: [lltx] [luatex]   fontspec prevents hyphenation
In-Reply-To: <20101128114037.GA3404@khaled-laptop>
References: <4CEA5134.6070006@web.de> <4CEA607F.8070307@elvenkind.com>
 <4CF2375D.7080802@elvenkind.com> <20101128114037.GA3404@khaled-laptop>
Message-ID: <C380AE8B-5291-444C-B6A2-B753B5993367@yahoo.de>

Am 28.11.2010 um 12:40 schrieb Khaled Hosny:

> It seems deeper than fontspec, either in luaotfload or something deeper
> inside latex. This gives the same result:
> 
> \documentclass{article}
> \usepackage{luaotfload}
> \usepackage[EU2]{fontenc}
> \usepackage[width=2cm]{geometry}
> 
> \begin{document}
> An intere\textit{st}ing word.
> 
> An intere{\itshape st}ing word
> \end{document}

LaTeX uses the first font dimension in the italic correction code. This number must be strictly positive for italic fonts.

\documentclass{article}
\begin{document}
\textit{\the\fontdimen1\font}
\end{document}

compiled with pdfLaTeX results in 0.25pt, but

\documentclass{article}
\usepackage{luaotfload}
\usepackage{lmodern}
\usepackage[EU2]{fontenc}
\begin{document}
\textit{\the\fontdimen1\font}
\end{document}

compiled with LuaLaTeX results in 0.0pt.

From khaledhosny at eglug.org  Sun Nov 28 15:46:32 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sun, 28 Nov 2010 16:46:32 +0200
Subject: [lltx] [luatex]   fontspec prevents hyphenation
In-Reply-To: <C380AE8B-5291-444C-B6A2-B753B5993367@yahoo.de>
References: <4CEA5134.6070006@web.de> <4CEA607F.8070307@elvenkind.com>
 <4CF2375D.7080802@elvenkind.com>
 <20101128114037.GA3404@khaled-laptop>
 <C380AE8B-5291-444C-B6A2-B753B5993367@yahoo.de>
Message-ID: <20101128144632.GA4234@khaled-laptop>

On Sun, Nov 28, 2010 at 02:13:21PM +0100, Philipp Stephani wrote:
> Am 28.11.2010 um 12:40 schrieb Khaled Hosny:
> 
> > It seems deeper than fontspec, either in luaotfload or something deeper
> > inside latex. This gives the same result:
> > 
> > \documentclass{article}
> > \usepackage{luaotfload}
> > \usepackage[EU2]{fontenc}
> > \usepackage[width=2cm]{geometry}
> > 
> > \begin{document}
> > An intere\textit{st}ing word.
> > 
> > An intere{\itshape st}ing word
> > \end{document}
> 
> LaTeX uses the first font dimension in the italic correction code. This number must be strictly positive for italic fonts.
> 
> \documentclass{article}
> \begin{document}
> \textit{\the\fontdimen1\font}
> \end{document}
> 
> compiled with pdfLaTeX results in 0.25pt, but
> 
> \documentclass{article}
> \usepackage{luaotfload}
> \usepackage{lmodern}
> \usepackage[EU2]{fontenc}
> \begin{document}
> \textit{\the\fontdimen1\font}
> \end{document}
> 
> compiled with LuaLaTeX results in 0.0pt.

I though italic correction is handled internally by the engine, it is a
character not a font property AFAIK. Since OpenType has no support for
italic correction (except in MATH table), luaotfload (read ConTeXt) has
a pseudo feature, 'itlc', that guesses italic correction value but
neither fontspec nor EU2 .fd files are using it currently. The file
bellow is hyphenated just fine and italic correction is applied, though
I'm getting more confused and I actually lost track of what the original
issue was.

\documentclass{article}
\usepackage{fontspec}
\setmainfont[
    ItalicFeatures={RawFeature={+itlc}}
]{Latin Modern Roman}
\usepackage[width=2cm]{geometry}

\begin{document}
An inter\textit{est}ing word.

An inter{\itshape est\/}ing word.
\end{document}


Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From khaledhosny at eglug.org  Sun Nov 28 16:36:14 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sun, 28 Nov 2010 17:36:14 +0200
Subject: [lltx] [luatex]   fontspec prevents hyphenation
In-Reply-To: <59E2E2CB-98FE-48DB-8888-978BDD01E83F@yahoo.de>
References: <4CEA5134.6070006@web.de> <4CEA607F.8070307@elvenkind.com>
 <4CF2375D.7080802@elvenkind.com>
 <20101128114037.GA3404@khaled-laptop>
 <C380AE8B-5291-444C-B6A2-B753B5993367@yahoo.de>
 <20101128144632.GA4234@khaled-laptop>
 <59E2E2CB-98FE-48DB-8888-978BDD01E83F@yahoo.de>
Message-ID: <20101128153614.GA14578@khaled-laptop>

On Sun, Nov 28, 2010 at 04:21:56PM +0100, Philipp Stephani wrote:
> 
> Am 28.11.2010 um 15:46 schrieb Khaled Hosny:
> 
> > The file
> > bellow is hyphenated just fine and italic correction is applied, though
> > I'm getting more confused and I actually lost track of what the original
> > issue was.
> > 
> > \documentclass{article}
> > \usepackage{fontspec}
> > \setmainfont[
> >    ItalicFeatures={RawFeature={+itlc}}
> > ]{Latin Modern Roman}
> > \usepackage[width=2cm]{geometry}
> > 
> > \begin{document}
> > An inter\textit{est}ing word.
> 
> This doesn't work because LaTeX inserts \/ before "est" since the first font dimension is zero.

That is why I'm confused, it works. Ah, wait, I was experimenting with
setting \fontdimen1 and I though I deleted that code but I just found it
was still their, that is why it is working for me.

> > 
> > An inter{\itshape est\/}ing word.
> > \end{document}
> 
> This works because LaTeX doesn't insert \/ here.
> Either fontspec has to patch the LaTeX kernel, or the first font dimension for italic fonts must be set to a positive value by luaotfload.

I can confirm that, thanks for explanation. We can test if the font has
italic angle and set \fondimen1 accordingly, I just don't know how to
map the former to the later and don't want to set some seriously broken
value that would break something else.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From st_philipp at yahoo.de  Sun Nov 28 16:21:56 2010
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Sun, 28 Nov 2010 16:21:56 +0100
Subject: [lltx] [luatex]   fontspec prevents hyphenation
In-Reply-To: <20101128144632.GA4234@khaled-laptop>
References: <4CEA5134.6070006@web.de> <4CEA607F.8070307@elvenkind.com>
 <4CF2375D.7080802@elvenkind.com> <20101128114037.GA3404@khaled-laptop>
 <C380AE8B-5291-444C-B6A2-B753B5993367@yahoo.de>
 <20101128144632.GA4234@khaled-laptop>
Message-ID: <59E2E2CB-98FE-48DB-8888-978BDD01E83F@yahoo.de>


Am 28.11.2010 um 15:46 schrieb Khaled Hosny:

> The file
> bellow is hyphenated just fine and italic correction is applied, though
> I'm getting more confused and I actually lost track of what the original
> issue was.
> 
> \documentclass{article}
> \usepackage{fontspec}
> \setmainfont[
>    ItalicFeatures={RawFeature={+itlc}}
> ]{Latin Modern Roman}
> \usepackage[width=2cm]{geometry}
> 
> \begin{document}
> An inter\textit{est}ing word.

This doesn't work because LaTeX inserts \/ before "est" since the first font dimension is zero.

> 
> An inter{\itshape est\/}ing word.
> \end{document}

This works because LaTeX doesn't insert \/ here.
Either fontspec has to patch the LaTeX kernel, or the first font dimension for italic fonts must be set to a positive value by luaotfload.

From st_philipp at yahoo.de  Sun Nov 28 17:37:23 2010
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Sun, 28 Nov 2010 17:37:23 +0100
Subject: [lltx] [luatex]   fontspec prevents hyphenation
In-Reply-To: <20101128153614.GA14578@khaled-laptop>
References: <4CEA5134.6070006@web.de> <4CEA607F.8070307@elvenkind.com>
 <4CF2375D.7080802@elvenkind.com> <20101128114037.GA3404@khaled-laptop>
 <C380AE8B-5291-444C-B6A2-B753B5993367@yahoo.de>
 <20101128144632.GA4234@khaled-laptop>
 <59E2E2CB-98FE-48DB-8888-978BDD01E83F@yahoo.de>
 <20101128153614.GA14578@khaled-laptop>
Message-ID: <E33DCDB2-5157-458F-8527-C5C98F46F99D@yahoo.de>

Am 28.11.2010 um 16:36 schrieb Khaled Hosny:

> We can test if the font has
> italic angle and set \fondimen1 accordingly, I just don't know how to
> map the former to the later and don't want to set some seriously broken
> value that would break something else.

The italic angle in the "post" table is a number that measures the angle in degrees between the geometrical vertical and the font glyph vertical. The first font dimension is the slant per point, i.e., the arctangent of the additive inverse of the italic angle. For Latin Modern Roman Italic 10, this gives 0.24, which is very close to the table value of 0.242. Original TeX uses the slant per point for accent placement, while LuaTeX uses the OpenType tables.

