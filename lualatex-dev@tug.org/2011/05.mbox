From k.m.alexandre at gmail.com  Sun May  1 18:31:33 2011
From: k.m.alexandre at gmail.com (Alexandre Krispin)
Date: Sun, 1 May 2011 18:31:33 +0200
Subject: [lltx] font loading problem with Arno Pro (Adobe font)
Message-ID: <BANLkTik4S651k-6FZ48KtFGW27QidhXAAg@mail.gmail.com>

Hello,

I have a problem when I load the font Arno Pro. When compiling a document
with lualatex, it takes anormally a long time and a lot of memory. I don't
know exactly what type of information you need, so the following are what I
think is relevant to get help from you :


   - Here is a minimal example :

\documentclass{article}
\usepackage{luatextra}
\setmainfont{Arno Pro}
\begin{document}
    test
\end{document}


   - I use the following version of lualatex :

$lualatex --v
This is LuaTeX, Version beta-0.66.0-2011041219


   - My system is Fedora (GNU/Linux), and use the latest version of TeXlive
   2010, with official updates of TeXlive and other updates from TLContrib (
   http://tlcontrib.metatex.org/usage.html).



   - In my .profile file I have the following lines which you might find
   relevant to show you :

PATH=/usr/local/texlive/2010/bin/x86_64-linux:$PATH; export PATH
MANPATH=/usr/local/texlive/2010/texmf/doc/man:$MANPATH; export MANPATH
INFOPATH=/usr/local/texlive/2010/texmf/doc/info:$INFOPATH; export INFOPATH


export OSFONTDIR="/usr/local/share/fonts;$HOME/.fonts"



   - My Arno Pro fonts are located in my home, in the directory ~/.fonts :

tree ~/.fonts/"Arno Pro"
/home/freeman/.fonts/Arno Pro
|-- Caption
|   |-- ArnoPro-BoldCaption.otf
|   |-- ArnoPro-BoldItalicCaption.otf
|   |-- ArnoPro-Caption.otf
|   |-- ArnoPro-ItalicCaption.otf
|   |-- ArnoPro-SmbdCaption.otf
|   `-- ArnoPro-SmbdItalicCaption.otf
|-- Display
|   |-- ArnoPro-BoldDisplay.otf
|   |-- ArnoPro-BoldItalicDisplay.otf
|   |-- ArnoPro-Display.otf
|   |-- ArnoPro-ItalicDisplay.otf
|   |-- ArnoPro-LightDisplay.otf
|   |-- ArnoPro-LightItalicDisplay.otf
|   |-- ArnoPro-SmbdDisplay.otf
|   `-- ArnoPro-SmbdItalicDisplay.otf
|-- Subhead
|   |-- ArnoPro-BoldItalicSubhead.otf
|   |-- ArnoPro-BoldSubhead.otf
|   |-- ArnoPro-ItalicSubhead.otf
|   |-- ArnoPro-SmbdItalicSubhead.otf
|   |-- ArnoPro-SmbdSubhead.otf
|   `-- ArnoPro-Subhead.otf
`-- Text
    |-- ArnoPro-Bold.otf
    |-- ArnoPro-BoldItalic.otf
    |-- ArnoPro-BoldItalicSmText.otf
    |-- ArnoPro-BoldSmText.otf
    |-- ArnoPro-Italic.otf
    |-- ArnoPro-ItalicSmText.otf
    |-- ArnoPro-Regular.otf
    |-- ArnoPro-SmText.otf
    |-- ArnoPro-Smbd.otf
    |-- ArnoPro-SmbdItalic.otf
    |-- ArnoPro-SmbdItalicSmText.otf
    `-- ArnoPro-SmbdSmText.otf

4 directories, 32 files


If you can help me I would appreciate it. If I missed something, I would be
pleased you show me my errors :)

Sincerely

-- 
Alexandre KRISPIN
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20110501/94299bd2/attachment.html>

From mc at melusine.eu.org  Thu May  5 11:41:15 2011
From: mc at melusine.eu.org (Maxime Chupin)
Date: Thu, 5 May 2011 10:41:15 +0100
Subject: [lltx] Unicode-math and Cambria
Message-ID: <BANLkTi=9gihUdnX5UuLgsY14LyjVB=Ca1g@mail.gmail.com>

Hi,

I'm trying to use Cambria Math with LuaLaTeX. But I have some problems. This
is my example:

\documentclass{article}
\usepackage{fontspec}
\usepackage{unicode-math}
\fontspec{Cambria Math}
\setmainfont{Cambria Math}
\setmathfont{Cambria Math}

\begin{document}
\alpha\
\[
\luatexUmathaccent bottom "0"0"323 A
\luatexUmathaccent both "0"0"23DE "0"0"323 A
\]
\end{document}

This do not provide accents on A. If I do not load unicode-math, I have
accents but not in the right place and the math font is CM. Moreover,
without unicode-math, \alpha does not work.
So what happens ?

Thanks in advance,

(I sent a previous mail with a wrong address, but i do not know if the list
is open)

-- 
Maxime Chupin
http://mc.notezik.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20110505/00dd971a/attachment.html>

From notezik at gmail.com  Thu May  5 09:25:31 2011
From: notezik at gmail.com (Maxime Chupin)
Date: Thu, 5 May 2011 08:25:31 +0100
Subject: [lltx] unicode-math and Cambria Math
Message-ID: <BANLkTikUuMgwe+5NWh0qP5YKaP8y=u3vyA@mail.gmail.com>

Hi,

I'm trying to use Cambria Math with LuaLaTeX. But I have some problems. This
is my example:

\documentclass{article}
\usepackage{fontspec}
\usepackage{unicode-math}
\fontspec{Cambria Math}
\setmainfont{Cambria Math}
\setmathfont{Cambria Math}

\begin{document}
\alpha\
\[
\luatexUmathaccent bottom "0"0"323 A
\luatexUmathaccent both "0"0"23DE "0"0"323 A
\]
\end{document}

This do not provide accents on A. If I do not load unicode-math, I have
accents but not in the right place and the math font is CM.
So what happens ?

Thanks in advance,

-- 
Maxime Chupin
http://mc.notezik.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20110505/3205de95/attachment.html>

From st_philipp at yahoo.de  Thu May  5 16:18:27 2011
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Thu, 5 May 2011 16:18:27 +0200
Subject: [lltx] unicode-math and Cambria Math
In-Reply-To: <BANLkTikUuMgwe+5NWh0qP5YKaP8y=u3vyA@mail.gmail.com>
References: <BANLkTikUuMgwe+5NWh0qP5YKaP8y=u3vyA@mail.gmail.com>
Message-ID: <FCA4F28F-C082-4FA4-9201-62AF1BF4085B@yahoo.de>


Am 05.05.2011 um 09:25 schrieb Maxime Chupin:

> Hi,
> 
> I'm trying to use Cambria Math with LuaLaTeX. But I have some problems. This is my example:
> 
> \documentclass{article}
> \usepackage{fontspec}
> \usepackage{unicode-math}
> \fontspec{Cambria Math}
> \setmainfont{Cambria Math}
> \setmathfont{Cambria Math}
> 
> \begin{document}
> \alpha\ 
> \[
> \luatexUmathaccent bottom "0"0"323 A
> \luatexUmathaccent both "0"0"23DE "0"0"323 A
> \]
> \end{document}
> 
> This do not provide accents on A. If I do not load unicode-math, I have accents but not in the right place and the math font is CM.
> So what happens ?

I think the released version of unicode-math selects the math font into family 4 instead of 0 (newer version do use 0). So you could try
\luatexUmathaccent bottom "0 "4 "323 A
\luatexUmathaccent both "0 "4 "23DE "0 "4 "323 A
I hope that we will be able to support bottom and "both" accents some day; filed as https://github.com/wspr/unicode-math/issues/194

From notezik at gmail.com  Thu May  5 22:55:26 2011
From: notezik at gmail.com (Maxime Chupin)
Date: Thu, 5 May 2011 21:55:26 +0100
Subject: [lltx] unicode-math and Cambria Math
In-Reply-To: <FCA4F28F-C082-4FA4-9201-62AF1BF4085B@yahoo.de>
References: <BANLkTikUuMgwe+5NWh0qP5YKaP8y=u3vyA@mail.gmail.com>
 <FCA4F28F-C082-4FA4-9201-62AF1BF4085B@yahoo.de>
Message-ID: <BANLkTi=gHi+ohUJkTvNiXMO+x-te=Gc-Dg@mail.gmail.com>

On 5 May 2011 15:18, Philipp Stephani <st_philipp at yahoo.de> wrote:

>
>
> I think the released version of unicode-math selects the math font into
> family 4 instead of 0 (newer version do use 0). So you could try
> \luatexUmathaccent bottom "0 "4 "323 A
> \luatexUmathaccent both "0 "4 "23DE "0 "4 "323 A
> I hope that we will be able to support bottom and "both" accents some day;
> filed as https://github.com/wspr/unicode-math/issues/194


Ok, this works ! Thank you.

-- 
Maxime Chupin
http://mc.notezik.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20110505/f8fc06be/attachment.html>

From mailing_list at arcor.de  Sun May  8 23:49:51 2011
From: mailing_list at arcor.de (Stephan Hennig)
Date: Sun, 08 May 2011 23:49:51 +0200
Subject: [lltx] broken dash ligatures
Message-ID: <4DC70FFF.8010600@arcor.de>

Hi,

I'm observing broken dash ligatures with certain Microsoft fonts
(including Cambria).  The attached code tests the -- and --- ligatures
on a number of fonts distributed by TeX Live, the Google font library
and Windows 7.  The ligatures work for the TeX Live and Google fonts,
but fail for all but one Windows 7 fonts (Franklin Gothic Medium).  The
PDF file can be downloaded at
<URL:http://home.arcor.de/stephanhennig/Downloads/dashes.pdf>, ca. 200 kB.

Is this a known problem?

Best regards,
Stephan Hennig


Windows 7, x64, SP1


>lualatex -version
This is LuaTeX, Version beta-0.66.0-2011041707 (Web2C 2011) (rev 4141)


 *File List*
 minimal.cls    2001/05/25 Standard LaTeX minimal class
fontspec.sty    2011/02/26 v2.1f Advanced font selection for
luaotfload.sty    2011/04/21 v1.25 OpenType layout system


\listfiles
\documentclass{minimal}
\usepackage{fontspec}
\newcommand*{\test}[1]{\setmainfont[Ligatures=TeX]{#1}#1: -- ---\par}
\begin{document}

\test{GFSArtemisia}
\test{GFSBodoni}
\test{GFSDidot}
\test{Iwona}
\test{Kurier}
\test{Latin Modern Roman}
\test{Linux Libertine O}
\test{Punk Nova}
\test{TeX Gyre Adventor}
\test{TeX Gyre Bonum}
\test{TeX Gyre Chorus}
\test{TeX Gyre Cursor}
\test{TeX Gyre Heros}
\test{TeX Gyre Pagella}
\test{TeX Gyre Schola}
\test{TeX Gyre Termes}
\test{Xits}

\bigskip
\test{Droid Serif}
\test{Droid Sans}
\test{EB Garamond}
\test{Old Standard}

\bigskip
\test{Arial}
\test{Calibri}
\test{Cambria}
\test{Consolas}
\test{Constantia}
\test{Corbel}
\test{Franklin Gothic Medium}
\test{Palatino Linotype}
\test{Tahoma}
\test{Times New Roman}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:

From st_philipp at yahoo.de  Mon May  9 00:10:49 2011
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Mon, 9 May 2011 00:10:49 +0200
Subject: [lltx] broken dash ligatures
In-Reply-To: <4DC70FFF.8010600@arcor.de>
References: <4DC70FFF.8010600@arcor.de>
Message-ID: <0B92D51D-D256-4EEB-8F4F-7BB7D3ABE2C2@yahoo.de>


Am 08.05.2011 um 23:49 schrieb Stephan Hennig:

> Hi,
> 
> I'm observing broken dash ligatures with certain Microsoft fonts
> (including Cambria).  The attached code tests the -- and --- ligatures
> on a number of fonts distributed by TeX Live, the Google font library
> and Windows 7.  The ligatures work for the TeX Live and Google fonts,
> but fail for all but one Windows 7 fonts (Franklin Gothic Medium).  The
> PDF file can be downloaded at
> <URL:http://home.arcor.de/stephanhennig/Downloads/dashes.pdf>, ca. 200 kB.
> 
> Is this a known problem?

Not known to me until now at least. Is probably related to luaotfload, I've reported the issue at https://github.com/khaledhosny/luaotfload/issues/29
For the moment, try to avoid the legacy ligatures.

From mailing_list at arcor.de  Mon May  9 00:48:13 2011
From: mailing_list at arcor.de (Stephan Hennig)
Date: Mon, 09 May 2011 00:48:13 +0200
Subject: [lltx] broken dash ligatures
In-Reply-To: <0B92D51D-D256-4EEB-8F4F-7BB7D3ABE2C2@yahoo.de>
References: <4DC70FFF.8010600@arcor.de>
 <0B92D51D-D256-4EEB-8F4F-7BB7D3ABE2C2@yahoo.de>
Message-ID: <4DC71DAD.6000204@arcor.de>

schrieb Philipp Stephani:
> 
> Am 08.05.2011 um 23:49 schrieb Stephan Hennig:
> 
>> I'm observing broken dash ligatures with certain Microsoft fonts
>> (including Cambria).
> 
> I've reported the issue at 
> https://github.com/khaledhosny/luaotfload/issues/29 For the moment, 
> try to avoid the legacy ligatures.

Well, I certainly have to get to grips with directly entering Unicode
characters into the editor.  After finding out about

  M-x set-input-method RET TeX RET
  M-x set-input-method RET ucs RET
  M-x toggle-input-method RET

in Emacs, it works now.  Thanks for the hint!

Best regards,
Stephan Hennig

From news3 at nililand.de  Mon May  9 09:28:56 2011
From: news3 at nililand.de (Ulrike Fischer)
Date: Mon, 9 May 2011 09:28:56 +0200
Subject: [lltx] broken dash ligatures
References: <4DC70FFF.8010600@arcor.de>
Message-ID: <1chuu6wt1q8e2.dlg@nililand.de>

Am Sun, 08 May 2011 23:49:51 +0200 schrieb Stephan Hennig:

> Hi,
> 
> I'm observing broken dash ligatures with certain Microsoft fonts
> (including Cambria).  The attached code tests the -- and --- ligatures
> on a number of fonts distributed by TeX Live, the Google font library
> and Windows 7.  The ligatures work for the TeX Live and Google fonts,
> but fail for all but one Windows 7 fonts (Franklin Gothic Medium).  The
> PDF file can be downloaded at
> <URL:http://home.arcor.de/stephanhennig/Downloads/dashes.pdf>, ca. 200 kB.
> 
> Is this a known problem?

Yes it has been discussed on c.t.t. and I also mentioned it on the
context list. Here a copy of my post two month ago and of Hans'
answer:

"
> On c.t.t. there was a discussion about the TeX-ligatures -- and ---
> for endash and emdash. It seems that the luaotfload/context code
> fails for some font/mode combination: For some fonts +tlig works
> with both modes, some works only with mode=base, and there was also
> a report of font which doesn't work at all (Frutiger LT 55 Roman).
>
> E.g. on my PC +tlig works for Arial (c:/windows/fonts/Arial.ttf)
> tested with a current context minimals only with mode=base.
>
> \font\test="Arial:mode=node;+tlig"
>
> \font\testb="Arial:mode=base;+tlig"
>
> \starttext
>
> \test -- --- abc %fails
>
> \testb -- --- abc %works
>
> \stoptext \bye

this is a side effect of there being two hyphens, think of:

\char 45\char 45
\char173\char173
\char173\char 45
\char 45\char173
\char 45\char 45\char 45
\char173\char173\char173
\char173\char 45\char 45
\char 45\char173\char173

fixed in next beta

Hans

"

-- 
Ulrike Fischer 


From mailing_list at arcor.de  Mon May  9 11:13:52 2011
From: mailing_list at arcor.de (Stephan Hennig)
Date: Mon, 09 May 2011 11:13:52 +0200
Subject: [lltx] broken dash ligatures
In-Reply-To: <1chuu6wt1q8e2.dlg@nililand.de>
References: <4DC70FFF.8010600@arcor.de> <1chuu6wt1q8e2.dlg@nililand.de>
Message-ID: <4DC7B050.6000106@arcor.de>

schrieb Ulrike Fischer:
> Am Sun, 08 May 2011 23:49:51 +0200 schrieb Stephan Hennig:
> 
>> I'm observing broken dash ligatures with certain Microsoft fonts
>> (including Cambria).
>> [...]
>> Is this a known problem?
> 
> Yes it has been discussed on c.t.t. and I also mentioned it on the
> context list. Here a copy of my post two month ago and of Hans'
> answer:

Thanks for the pointer!

> "
> [...]
> fixed in next beta
> 
> Hans
> 
> "

Any time frame about when that will trickle through to luaotfload?

Best regards,
Stephan Hennig

From mailing_list at arcor.de  Mon May  9 11:18:17 2011
From: mailing_list at arcor.de (Stephan Hennig)
Date: Mon, 09 May 2011 11:18:17 +0200
Subject: [lltx] broken dash ligatures
In-Reply-To: <0B92D51D-D256-4EEB-8F4F-7BB7D3ABE2C2@yahoo.de>
References: <4DC70FFF.8010600@arcor.de>
 <0B92D51D-D256-4EEB-8F4F-7BB7D3ABE2C2@yahoo.de>
Message-ID: <4DC7B159.4040801@arcor.de>

schrieb Philipp Stephani:

> For the moment, try to avoid the legacy ligatures.

Unfortunately, that isn't possible if the ligature comes from a package,
such as natbib with the sort&compress option.

Best regards,
Stephan Hennig


[run twice through lualatex]

\listfiles
\documentclass{article}
\usepackage{fontspec}
\setmainfont{Arial}
\usepackage[numbers,sort&compress]{natbib}
\begin{document}
\cite{a, b, c}
\begin{thebibliography}{99}
\bibitem[A()]{a}A.
\bibitem[B()]{b}B.
\bibitem[C()]{c}C.
\end{thebibliography}
\end{document}

%%% Local Variables:
%%% coding: utf-8
%%% mode: latex
%%% TeX-master: t
%%% End:

From news3 at nililand.de  Mon May  9 11:52:30 2011
From: news3 at nililand.de (Ulrike Fischer)
Date: Mon, 9 May 2011 11:52:30 +0200
Subject: [lltx] broken dash ligatures
References: <4DC70FFF.8010600@arcor.de> <1chuu6wt1q8e2.dlg@nililand.de>
 <4DC7B050.6000106@arcor.de>
Message-ID: <1m2fr7k46spin.dlg@nililand.de>

Am Mon, 09 May 2011 11:13:52 +0200 schrieb Stephan Hennig:

>>> I'm observing broken dash ligatures with certain Microsoft fonts
>>> (including Cambria).
>>> [...]
>>> Is this a known problem?

>> Yes it has been discussed on c.t.t. and I also mentioned it on the
>> context list. Here a copy of my post two month ago and of Hans'
>> answer:
 
> Thanks for the pointer!
 

>> fixed in next [context] beta

> Any time frame about when that will trickle through to luaotfload?

I don't know. I can only say that the problem with Arial has
disappeared in a current context. - And I too would like luaotfload
to (at least the unstable branch) to be in sync with context again.
The last beta of context has changed the names of some quite central
functions which I wanted to use for virtual fonts ;-(.  

-- 
Ulrike Fischer 


From st_philipp at yahoo.de  Mon May  9 12:13:02 2011
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Mon, 9 May 2011 12:13:02 +0200
Subject: [lltx] broken dash ligatures
In-Reply-To: <1m2fr7k46spin.dlg@nililand.de>
References: <4DC70FFF.8010600@arcor.de> <1chuu6wt1q8e2.dlg@nililand.de>
 <4DC7B050.6000106@arcor.de> <1m2fr7k46spin.dlg@nililand.de>
Message-ID: <F5A7E448-C2FD-4C27-BA54-8951741461E6@yahoo.de>


Am 09.05.2011 um 11:52 schrieb Ulrike Fischer:

> Am Mon, 09 May 2011 11:13:52 +0200 schrieb Stephan Hennig:
> 
>>>> I'm observing broken dash ligatures with certain Microsoft fonts
>>>> (including Cambria).
>>>> [...]
>>>> Is this a known problem?
> 
>>> Yes it has been discussed on c.t.t. and I also mentioned it on the
>>> context list. Here a copy of my post two month ago and of Hans'
>>> answer:
> 
>> Thanks for the pointer!
> 
> 
>>> fixed in next [context] beta
> 
>> Any time frame about when that will trickle through to luaotfload?
> 
> I don't know. I can only say that the problem with Arial has
> disappeared in a current context. - And I too would like luaotfload
> to (at least the unstable branch) to be in sync with context again.

This is already on the issue tracker: https://github.com/khaledhosny/luaotfload/issues/27
Also see this discussion: http://tug.org/pipermail/lualatex-dev/2011-March/001101.html



From mailing_list at arcor.de  Tue May 10 15:55:10 2011
From: mailing_list at arcor.de (Stephan Hennig)
Date: Tue, 10 May 2011 15:55:10 +0200
Subject: [lltx] wrong hyphenation in four-letter word
Message-ID: <4DC943BE.60902@arcor.de>

[sending to luatex and lualatex list]

Hi,

I'm observing a wrong hyphenation of a four-letter word with lualatex
and German hyphenation patterns.  For the German language,
\lefthyphenmin and \righthyphenmin are both set to 2, so that
four-letter words can indeed be hyphenated, such as ei-ne.  But the word
"sich" shouldn't be hyphenated at all, whereas it is
hyphenated as si-ch:

\listfiles
\documentclass{minimal}
\usepackage{fontspec}
\usepackage[ngerman]{babel}
\begin{document}
\showhyphens{sich eine}
\end{document}

> Underfull \hbox (badness 10000) in paragraph at lines 9--9
> [][] \EU2/lmr/m/n/10 si-ch ei-ne


Decomposing "sich" into patterns with file

  >kpsewhich hyph-de-1996.tex
  f:/texlive/2010/texmf-dist/tex/generic/hyph-utf8/patterns/tex/
  hyph-de-1996.tex

I find the following matching patterns[1]

  2ic
  5si1c
  4ch.
  1si
  c4h

which give

    2i c
  5s i1c
      4c h.
  1s i
       c4h
  ---------
  5s2i4c4h.

That is, according to the patterns, the word shouldn't be hyphenated.
It looks like the pattern "4ch." isn't taken into account.  Any idea
what's going wrong here?

Best regards,
Stephan Hennig

[1] Please re-check the pattern decomposition.  I have done that with a
self-written programme that dates back to my first Lua experiments and
is hardly documented.  A re-write of that tool is stuck at an unusable
state, unfortunately. :(


> >lualatex -version
> This is LuaTeX, Version beta-0.70.0-2011050815 (Web2C 2011) (rev 4247)


>  *File List*
>  minimal.cls    2001/05/25 Standard LaTeX minimal class
> fontspec.sty    2011/02/26 v2.1f Advanced font selection for XeLaTeX/LuaLaTeX
>    expl3.sty    2011/04/09 v2222 L3 Experimental code bundle wrapper
>  l3names.sty    2011/01/08 v2122 L3 Experimental Naming Scheme for TeX Primitiv
> es
>   luatex.sty    2010/03/09 v0.4 LuaTeX basic definition package (HO)
> infwarerr.sty    2010/04/08 v1.3 Providing info/warning/message (HO)
> ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
>     etex.sty    1998/03/26 v2.0 eTeX basic definition package (PEB)
> luatex-loader.sty    2010/03/09 v0.4 Lua module loader (HO)
> pdftexcmds.sty    2011/04/22 v0.16 Utilities of pdfTeX for LuaTeX (HO)
>  ltxcmds.sty    2011/04/18 v1.20 LaTeX kernel commands for general use (HO)
>    ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
> l3basics.sty    2011/04/23 v2246 L3 Experimental basic definitions
>  l3expan.sty    2011/04/09 v2223 L3 Experimental Argument Expansion module
>     l3tl.sty    2011/04/09 v2223 L3 Experimental Token Lists
>    l3int.sty    2011/04/11 v2229 L3 Experimental Integer module
>  l3quark.sty    2011/04/14 v2234 L3 Experimental Quark Commands
>    l3seq.sty    2011/04/21 v2245 The LaTeX3 kernel: sequences and stacks
>   l3toks.sty    2011/04/09 v2223 L3 Experimental Token Registers
>    l3prg.sty    2011/04/09 v2223 L3 Experimental control structures
>  l3clist.sty    2011/04/09 v2223 L3 Experimental comma separated lists
>  l3token.sty    2011/04/09 v2223 L3 Experimental token investigation and manipu
> lation
>   l3prop.sty    2011/04/09 v2223 L3 Experimental Property Lists
>    l3msg.sty    2010/10/02 v2052 L3 Experimental LaTeX Messages module
>     l3io.sty    2010/10/03 v2063 L3 Experimental i/o module
>   l3skip.sty    2011/02/15 v2149 L3 Experimental skip registers
>    l3box.sty    2011/04/09 v2223 L3 Experimental Box module
> l3keyval.sty    2011/04/09 v2223 L3 Experimental keyval processing
>   l3keys.sty    2010/11/11 v2082 L3 Experimental key-value support
> l3precom.sty    2011/04/09 v2223 L3 Experimental precompilation module
>   l3xref.sty    2011/04/09 v2223 L3 Experimental cross referencing
>   l3file.sty    2011/04/21 v2242 The LaTeX3 kernel: file operations
>     l3fp.sty    2011/03/19 v2201 L3 Experimental floating-point operations
> l3luatex.sty    2010/07/18 v1985 L3 Experimental LuaTeX functions
>     calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
>   xparse.sty    2011/04/08 v2219 Generic document command parser
> luaotfload.sty    2011/04/21 v1.25 OpenType layout system
> luatexbase.sty    2010/10/06 v0.3 Module utilities for LuaTeX
> luatexbase-compat.sty    2010/10/10 v0.3 Compatibility tools for LuaTeX
> luatexbase-loader.sty    2010/10/10 v0.3 Lua module loader for LuaTeX
> luatexbase-regs.sty    2010/10/10 v0.3 Registers allocation for LuaTeX
> luatexbase-attr.sty    2010/10/10 v0.3 Attributes allocation for LuaTeX
> luatexbase-cctb.sty    2010/10/10 v0.3 Catcodetable allocation for LuaTeX
> luatexbase-mcb.sty    2010/10/10 v0.3 Callback management for LuaTeX
> luatexbase-modutils.sty    2010/10/10 v0.3 Module utilities for LuaTeX
>  xkeyval.sty    2008/08/13 v2.6a package option processing (HA)
>  xkeyval.tex    2008/08/13 v2.6a key=value parser (HA)
> fontspec-patches.sty    2011/02/26 v2.1f Advanced font selection for XeLaTeX/Lu
> aLaTeX
> fixltx2e.sty    2006/09/13 v1.1m fixes to LaTeX
>  fontenc.sty
>   eu2enc.def    2010/05/27 v0.1h Experimental Unicode font encodings
>   eu2lmr.fd    2009/10/30 v1.6 Font defs for Latin Modern
> xunicode.sty    2010/11/06 v0.96 provides access to latin accents and many othe
> r characters in Unicode lower plane
> fontspec.cfg
>    babel.sty    2008/07/06 v3.8l The Babel package
> ngermanb.ldf    2008/07/06 v2.6n new German support from the babel system
>  ***********


From Arno.Trautmann at gmx.de  Tue May 10 16:37:14 2011
From: Arno.Trautmann at gmx.de (Arno Trautmann)
Date: Tue, 10 May 2011 16:37:14 +0200
Subject: [lltx] [luatex] wrong hyphenation in four-letter word
In-Reply-To: <4DC943BE.60902@arcor.de>
References: <4DC943BE.60902@arcor.de>
Message-ID: <4DC94D9A.7070607@gmx.de>

Hi all,

Stephan Hennig wrote:
> [sending to luatex and lualatex list]
> Hi,
> 
> I'm observing a wrong hyphenation of a four-letter word with lualatex
> and German hyphenation patterns.

I don't: With your example

> \listfiles
> \documentclass{minimal}
> \usepackage{fontspec}
> \usepackage[ngerman]{babel}
> \begin{document}
> \showhyphens{sich eine}
> \end{document}
> 
>> Underfull \hbox (badness 10000) in paragraph at lines 9--9
>> [][] \EU2/lmr/m/n/10 si-ch ei-ne

I get correctly
Underfull \hbox (badness 10000) in paragraph at lines 6--6
[][] \EU2/lmr/m/n/10 sich ei-ne

>>> lualatex -version
>> This is LuaTeX, Version beta-0.70.0-2011050815 (Web2C 2011) (rev 4247)

This is LuaTeX, Version beta-0.70.0-2011050620 (rev 4250)

file list below,
cheers
Arno

>>  *File List*
>>  minimal.cls    2001/05/25 Standard LaTeX minimal class
>> fontspec.sty    2011/02/26 v2.1f Advanced font selection for XeLaTeX/LuaLaTeX
>>    expl3.sty    2011/04/09 v2222 L3 Experimental code bundle wrapper
>>  l3names.sty    2011/01/08 v2122 L3 Experimental Naming Scheme for TeX Primitiv
>> es
>>   luatex.sty    2010/03/09 v0.4 LuaTeX basic definition package (HO)
>> infwarerr.sty    2010/04/08 v1.3 Providing info/warning/message (HO)
>> ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
>>     etex.sty    1998/03/26 v2.0 eTeX basic definition package (PEB)
>> luatex-loader.sty    2010/03/09 v0.4 Lua module loader (HO)
>> pdftexcmds.sty    2011/04/22 v0.16 Utilities of pdfTeX for LuaTeX (HO)
>>  ltxcmds.sty    2011/04/18 v1.20 LaTeX kernel commands for general use (HO)
>>    ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
>> l3basics.sty    2011/04/23 v2246 L3 Experimental basic definitions
>>  l3expan.sty    2011/04/09 v2223 L3 Experimental Argument Expansion module
>>     l3tl.sty    2011/04/09 v2223 L3 Experimental Token Lists
>>    l3int.sty    2011/04/11 v2229 L3 Experimental Integer module
>>  l3quark.sty    2011/04/14 v2234 L3 Experimental Quark Commands
>>    l3seq.sty    2011/04/21 v2245 The LaTeX3 kernel: sequences and stacks
>>   l3toks.sty    2011/04/09 v2223 L3 Experimental Token Registers
>>    l3prg.sty    2011/04/09 v2223 L3 Experimental control structures
>>  l3clist.sty    2011/04/09 v2223 L3 Experimental comma separated lists
>>  l3token.sty    2011/04/09 v2223 L3 Experimental token investigation and manipu
>> lation
>>   l3prop.sty    2011/04/09 v2223 L3 Experimental Property Lists
>>    l3msg.sty    2010/10/02 v2052 L3 Experimental LaTeX Messages module
>>     l3io.sty    2010/10/03 v2063 L3 Experimental i/o module
>>   l3skip.sty    2011/02/15 v2149 L3 Experimental skip registers
>>    l3box.sty    2011/04/09 v2223 L3 Experimental Box module
>> l3keyval.sty    2011/04/09 v2223 L3 Experimental keyval processing
>>   l3keys.sty    2010/11/11 v2082 L3 Experimental key-value support
>> l3precom.sty    2011/04/09 v2223 L3 Experimental precompilation module
>>   l3xref.sty    2011/04/09 v2223 L3 Experimental cross referencing
>>   l3file.sty    2011/04/21 v2242 The LaTeX3 kernel: file operations
>>     l3fp.sty    2011/03/19 v2201 L3 Experimental floating-point operations
>> l3luatex.sty    2010/07/18 v1985 L3 Experimental LuaTeX functions
>>     calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
>>   xparse.sty    2011/04/08 v2219 Generic document command parser
>> luaotfload.sty    2011/04/21 v1.25 OpenType layout system
>> luatexbase.sty    2010/10/06 v0.3 Module utilities for LuaTeX
>> luatexbase-compat.sty    2010/10/10 v0.3 Compatibility tools for LuaTeX
>> luatexbase-loader.sty    2010/10/10 v0.3 Lua module loader for LuaTeX
>> luatexbase-regs.sty    2010/10/10 v0.3 Registers allocation for LuaTeX
>> luatexbase-attr.sty    2010/10/10 v0.3 Attributes allocation for LuaTeX
>> luatexbase-cctb.sty    2010/10/10 v0.3 Catcodetable allocation for LuaTeX
>> luatexbase-mcb.sty    2010/10/10 v0.3 Callback management for LuaTeX
>> luatexbase-modutils.sty    2010/10/10 v0.3 Module utilities for LuaTeX
>>  xkeyval.sty    2008/08/13 v2.6a package option processing (HA)
>>  xkeyval.tex    2008/08/13 v2.6a key=value parser (HA)
>> fontspec-patches.sty    2011/02/26 v2.1f Advanced font selection for XeLaTeX/Lu
>> aLaTeX
>> fixltx2e.sty    2006/09/13 v1.1m fixes to LaTeX
>>  fontenc.sty
>>   eu2enc.def    2010/05/27 v0.1h Experimental Unicode font encodings
>>   eu2lmr.fd    2009/10/30 v1.6 Font defs for Latin Modern
>> xunicode.sty    2010/11/06 v0.96 provides access to latin accents and many othe
>> r characters in Unicode lower plane
>> fontspec.cfg
>>    babel.sty    2008/07/06 v3.8l The Babel package
>> ngermanb.ldf    2008/07/06 v2.6n new German support from the babel system
>>  ***********

 *File List*
 minimal.cls    2001/05/25 Standard LaTeX minimal class
fontspec.sty    2011/02/26 v2.1f Advanced font selection for
XeLaTeX/LuaLaTeX
   expl3.sty    2011/04/09 v2222 L3 Experimental code bundle wrapper
 l3names.sty    2011/01/08 v2122 L3 Experimental Naming Scheme for TeX
Primitiv
es
  luatex.sty    2010/03/09 v0.4 LuaTeX basic definition package (HO)
infwarerr.sty    2010/04/08 v1.3 Providing info/warning/message (HO)
ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
    etex.sty    1998/03/26 v2.0 eTeX basic definition package (PEB)
luatex-loader.sty    2010/03/09 v0.4 Lua module loader (HO)
pdftexcmds.sty    2011/04/22 v0.16 Utilities of pdfTeX for LuaTeX (HO)
 ltxcmds.sty    2011/04/18 v1.20 LaTeX kernel commands for general use (HO)
   ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
l3basics.sty    2011/04/23 v2246 L3 Experimental basic definitions
 l3expan.sty    2011/04/09 v2223 L3 Experimental Argument Expansion module
    l3tl.sty    2011/04/09 v2223 L3 Experimental Token Lists
   l3int.sty    2011/04/11 v2229 L3 Experimental Integer module
 l3quark.sty    2011/04/14 v2234 L3 Experimental Quark Commands
   l3seq.sty    2011/04/21 v2245 The LaTeX3 kernel: sequences and stacks
  l3toks.sty    2011/04/09 v2223 L3 Experimental Token Registers
   l3prg.sty    2011/04/09 v2223 L3 Experimental control structures
 l3clist.sty    2011/04/09 v2223 L3 Experimental comma separated lists
 l3token.sty    2011/04/09 v2223 L3 Experimental token investigation and
manipulation
  l3prop.sty    2011/04/09 v2223 L3 Experimental Property Lists
   l3msg.sty    2010/10/02 v2052 L3 Experimental LaTeX Messages module
    l3io.sty    2010/10/03 v2063 L3 Experimental i/o module
  l3skip.sty    2011/02/15 v2149 L3 Experimental skip registers
   l3box.sty    2011/04/09 v2223 L3 Experimental Box module
l3keyval.sty    2011/04/09 v2223 L3 Experimental keyval processing
  l3keys.sty    2010/11/11 v2082 L3 Experimental key-value support
l3precom.sty    2011/04/09 v2223 L3 Experimental precompilation module
  l3xref.sty    2011/04/09 v2223 L3 Experimental cross referencing
  l3file.sty    2011/04/21 v2242 The LaTeX3 kernel: file operations
    l3fp.sty    2011/03/19 v2201 L3 Experimental floating-point operations
l3luatex.sty    2010/07/18 v1985 L3 Experimental LuaTeX functions
    calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
  xparse.sty    2011/04/08 v2219 Generic document command parser
luaotfload.sty    2011/04/21 v1.25 OpenType layout system
luatexbase.sty    2010/10/06 v0.3 Module utilities for LuaTeX
luatexbase-compat.sty    2010/10/10 v0.3 Compatibility tools for LuaTeX
luatexbase-loader.sty    2010/10/10 v0.3 Lua module loader for LuaTeX
luatexbase-regs.sty    2010/10/10 v0.3 Registers allocation for LuaTeX
luatexbase-attr.sty    2010/10/10 v0.3 Attributes allocation for LuaTeX
luatexbase-cctb.sty    2010/10/10 v0.3 Catcodetable allocation for LuaTeX
luatexbase-mcb.sty    2010/10/10 v0.3 Callback management for LuaTeX
luatexbase-modutils.sty    2010/10/10 v0.3 Module utilities for LuaTeX
 xkeyval.sty    2008/08/13 v2.6a package option processing (HA)
 xkeyval.tex    2008/08/13 v2.6a key=value parser (HA)
fontspec-patches.sty    2011/02/26 v2.1f Advanced font selection for
XeLaTeX/LuaLaTeX
fixltx2e.sty    2006/09/13 v1.1m fixes to LaTeX
 fontenc.sty
  eu2enc.def    2010/05/27 v0.1h Experimental Unicode font encodings
  eu2lmr.fd    2009/10/30 v1.6 Font defs for Latin Modern
xunicode.sty    2010/11/06 v0.96 provides access to latin accents and
many other characters in Unicode lower plane
fontspec.cfg
   babel.sty    2008/07/06 v3.8l The Babel package
ngermanb.ldf    2008/07/06 v2.6n new German support from the babel system
 ***********

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 262 bytes
Desc: OpenPGP digital signature
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20110510/97529e92/attachment.bin>

From mailing_list at arcor.de  Tue May 10 18:24:50 2011
From: mailing_list at arcor.de (Stephan Hennig)
Date: Tue, 10 May 2011 18:24:50 +0200
Subject: [lltx] [luatex] wrong hyphenation in four-letter word
In-Reply-To: <4DC94D9A.7070607@gmx.de>
References: <4DC943BE.60902@arcor.de> <4DC94D9A.7070607@gmx.de>
Message-ID: <4DC966D2.4060705@arcor.de>

schrieb Arno Trautmann:

> Stephan Hennig wrote:
>> 
>> I'm observing a wrong hyphenation of a four-letter word with lualatex
>> and German hyphenation patterns.
> 
> I don't: With your example
> 
>>> Underfull \hbox (badness 10000) in paragraph at lines 9--9
>>> [][] \EU2/lmr/m/n/10 si-ch ei-ne
> 
> I get correctly
> Underfull \hbox (badness 10000) in paragraph at lines 6--6
> [][] \EU2/lmr/m/n/10 sich ei-ne
> 
>>>> lualatex -version
>>> This is LuaTeX, Version beta-0.70.0-2011050815 (Web2C 2011) (rev 4247)
> 
> This is LuaTeX, Version beta-0.70.0-2011050620 (rev 4250)
> 
> file list below,

Thanks!  The file list looks identical.  To make sure it is not a
misconfiguration on my side, is anybody able to reproduce the problem
with LuaTeX from tlcontrib, which is what I'm using?

Best regards,
Stephan Hennig

From Arno.Trautmann at gmx.de  Tue May 10 19:04:12 2011
From: Arno.Trautmann at gmx.de (Arno Trautmann)
Date: Tue, 10 May 2011 19:04:12 +0200
Subject: [lltx] [luatex] wrong hyphenation in four-letter word
In-Reply-To: <4DC966D2.4060705@arcor.de>
References: <4DC943BE.60902@arcor.de> <4DC94D9A.7070607@gmx.de>
 <4DC966D2.4060705@arcor.de>
Message-ID: <4DC9700C.1020002@gmx.de>

Stephan Hennig wrote:
> schrieb Arno Trautmann:
> 
>> Stephan Hennig wrote:
>>>
>>> I'm observing a wrong hyphenation of a four-letter word with lualatex
>>> and German hyphenation patterns.
>>
>> I don't: With your example
>>
>>>> Underfull \hbox (badness 10000) in paragraph at lines 9--9
>>>> [][] \EU2/lmr/m/n/10 si-ch ei-ne
>>
>> I get correctly
>> Underfull \hbox (badness 10000) in paragraph at lines 6--6
>> [][] \EU2/lmr/m/n/10 sich ei-ne
>>
>>>>> lualatex -version
>>>> This is LuaTeX, Version beta-0.70.0-2011050815 (Web2C 2011) (rev 4247)
>>
>> This is LuaTeX, Version beta-0.70.0-2011050620 (rev 4250)
>>
>> file list below,
> 
> Thanks!  The file list looks identical.  To make sure it is not a
> misconfiguration on my side, is anybody able to reproduce the problem
> with LuaTeX from tlcontrib, which is what I'm using?

My LuaTeX /is/ from tlcontrib ? I'm wondering why yours has the Web2C
2011 tag? (I'm on x86-64 linux, in case that matters)

cheers
Arno

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 262 bytes
Desc: OpenPGP digital signature
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20110510/50d1d1f2/attachment.bin>

From mailing_list at arcor.de  Tue May 10 20:21:45 2011
From: mailing_list at arcor.de (Stephan Hennig)
Date: Tue, 10 May 2011 20:21:45 +0200
Subject: [lltx] [luatex] wrong hyphenation in four-letter word
In-Reply-To: <4DC9700C.1020002@gmx.de>
References: <4DC943BE.60902@arcor.de> <4DC94D9A.7070607@gmx.de>
 <4DC966D2.4060705@arcor.de> <4DC9700C.1020002@gmx.de>
Message-ID: <4DC98239.6000906@arcor.de>

schrieb Arno Trautmann:
> Stephan Hennig wrote:
>> schrieb Arno Trautmann:
>>> Stephan Hennig wrote:
>>>>
>>>>>> lualatex -version
>>>>> This is LuaTeX, Version beta-0.70.0-2011050815 (Web2C 2011) (rev 4247)
>>>
>>> This is LuaTeX, Version beta-0.70.0-2011050620 (rev 4250)
>> 
>> To make sure it is not a misconfiguration on my side, is anybody
>> able to reproduce the problem with LuaTeX from tlcontrib, which is
>> what I'm using?
> 
> My LuaTeX /is/ from tlcontrib ? I'm wondering why yours has the Web2C
> 2011 tag? (I'm on x86-64 linux, in case that matters)

OK.  This is Windows 7 x64 machine.  Can anybody running LuaTeX from
tlcontrib on Windows reproduce the problem?

Best regards,
Stephan Hennig

From mailing_list at arcor.de  Tue May 10 20:56:25 2011
From: mailing_list at arcor.de (Stephan Hennig)
Date: Tue, 10 May 2011 20:56:25 +0200
Subject: [lltx] \textit changes font size with LM fonts
Message-ID: <4DC98A59.7080809@arcor.de>

Hi,

I'm observing an odd behaviour with the Latin Modern Roman and Sans
fonts.  In the attached example the second instance of italic text is
typeset at a smaller font size than the surrounding text.

The problems doesn't exhibit with fonts other that LM Roman or LM Sans
or if either \tableofcontents or \mainmatter is removed.

Can you reproduce the problem?

Best regards,
Stephan Hennig


\listfiles
\documentclass{book}
\usepackage{fontspec}
\setmainfont{Latin Modern Roman}
%\setmainfont{Latin Modern Sans}
%\setmainfont{TeX Gyre Pagella}
%\setmainfont{GFSBodoni}
\newcommand*{\test}{foo \textit{bar} foo}
\begin{document}
\test
\tableofcontents
\mainmatter
\test
\end{document}


system: LuaTeX from tlcontrib on Windows 7, x64

> This is LuaTeX, Version beta-0.70.0-2011050815 (rev 4247)  (format=lualatex 2011.5.9)  10 MAY 2011 20:46


>  *File List*
>     book.cls    2007/10/19 v1.4h Standard LaTeX document class
>     bk10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
> fontspec.sty    2011/02/26 v2.1f Advanced font selection for XeLaTeX/LuaLaTeX
>    expl3.sty    2011/04/09 v2222 L3 Experimental code bundle wrapper
>  l3names.sty    2011/01/08 v2122 L3 Experimental Naming Scheme for TeX Primitiv
> es
>   luatex.sty    2010/03/09 v0.4 LuaTeX basic definition package (HO)
> infwarerr.sty    2010/04/08 v1.3 Providing info/warning/message (HO)
> ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
>     etex.sty    1998/03/26 v2.0 eTeX basic definition package (PEB)
> luatex-loader.sty    2010/03/09 v0.4 Lua module loader (HO)
> pdftexcmds.sty    2011/04/22 v0.16 Utilities of pdfTeX for LuaTeX (HO)
>  ltxcmds.sty    2011/04/18 v1.20 LaTeX kernel commands for general use (HO)
>    ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
> l3basics.sty    2011/04/23 v2246 L3 Experimental basic definitions
>  l3expan.sty    2011/04/09 v2223 L3 Experimental Argument Expansion module
>     l3tl.sty    2011/04/09 v2223 L3 Experimental Token Lists
>    l3int.sty    2011/04/11 v2229 L3 Experimental Integer module
>  l3quark.sty    2011/04/14 v2234 L3 Experimental Quark Commands
>    l3seq.sty    2011/04/21 v2245 The LaTeX3 kernel: sequences and stacks
>   l3toks.sty    2011/04/09 v2223 L3 Experimental Token Registers
>    l3prg.sty    2011/04/09 v2223 L3 Experimental control structures
>  l3clist.sty    2011/04/09 v2223 L3 Experimental comma separated lists
>  l3token.sty    2011/04/09 v2223 L3 Experimental token investigation and manipu
> lation
>   l3prop.sty    2011/04/09 v2223 L3 Experimental Property Lists
>    l3msg.sty    2010/10/02 v2052 L3 Experimental LaTeX Messages module
>     l3io.sty    2010/10/03 v2063 L3 Experimental i/o module
>   l3skip.sty    2011/02/15 v2149 L3 Experimental skip registers
>    l3box.sty    2011/04/09 v2223 L3 Experimental Box module
> l3keyval.sty    2011/04/09 v2223 L3 Experimental keyval processing
>   l3keys.sty    2010/11/11 v2082 L3 Experimental key-value support
> l3precom.sty    2011/04/09 v2223 L3 Experimental precompilation module
>   l3xref.sty    2011/04/09 v2223 L3 Experimental cross referencing
>   l3file.sty    2011/04/21 v2242 The LaTeX3 kernel: file operations
>     l3fp.sty    2011/03/19 v2201 L3 Experimental floating-point operations
> l3luatex.sty    2010/07/18 v1985 L3 Experimental LuaTeX functions
>     calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
>   xparse.sty    2011/04/08 v2219 Generic document command parser
> luaotfload.sty    2011/04/21 v1.25 OpenType layout system
> luatexbase.sty    2010/10/06 v0.3 Module utilities for LuaTeX
> luatexbase-compat.sty    2010/10/10 v0.3 Compatibility tools for LuaTeX
> luatexbase-loader.sty    2010/10/10 v0.3 Lua module loader for LuaTeX
> luatexbase-regs.sty    2010/10/10 v0.3 Registers allocation for LuaTeX
> luatexbase-attr.sty    2010/10/10 v0.3 Attributes allocation for LuaTeX
> luatexbase-cctb.sty    2010/10/10 v0.3 Catcodetable allocation for LuaTeX
> luatexbase-mcb.sty    2010/10/10 v0.3 Callback management for LuaTeX
> luatexbase-modutils.sty    2010/10/10 v0.3 Module utilities for LuaTeX
>  xkeyval.sty    2008/08/13 v2.6a package option processing (HA)
>  xkeyval.tex    2008/08/13 v2.6a key=value parser (HA)
> fontspec-patches.sty    2011/02/26 v2.1f Advanced font selection for XeLaTeX/Lu
> aLaTeX
> fixltx2e.sty    2006/09/13 v1.1m fixes to LaTeX
>  fontenc.sty
>   eu2enc.def    2010/05/27 v0.1h Experimental Unicode font encodings
>   eu2lmr.fd    2009/10/30 v1.6 Font defs for Latin Modern
> xunicode.sty    2010/11/06 v0.96 provides access to latin accents and many othe
> r characters in Unicode lower plane
> fontspec.cfg
>  ***********

From mojca.miklavec.lists at gmail.com  Tue May 10 21:17:54 2011
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 10 May 2011 21:17:54 +0200
Subject: [lltx] [luatex] wrong hyphenation in four-letter word
In-Reply-To: <4DC9700C.1020002@gmx.de>
References: <4DC943BE.60902@arcor.de> <4DC94D9A.7070607@gmx.de>
 <4DC966D2.4060705@arcor.de> <4DC9700C.1020002@gmx.de>
Message-ID: <BANLkTi=p8wPRyfHES4_9gLA8u2FNPH=1Gg@mail.gmail.com>

On Tue, May 10, 2011 at 19:04, Arno Trautmann wrote:
>
> My LuaTeX /is/ from tlcontrib ? I'm wondering why yours has the Web2C
> 2011 tag? (I'm on x86-64 linux, in case that matters)

Windows binaries come from Akira who usually uses the latest version
of all libraries, including kpathsea & friends, so the Web2.

I cannot reproduce the behaviour on a non-windows box either. (On the
other hand I have some problems with synctex in the latest version.)

Mojca


From mojca.miklavec.lists at gmail.com  Tue May 10 21:34:16 2011
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 10 May 2011 21:34:16 +0200
Subject: [lltx] [luatex] wrong hyphenation in four-letter word
In-Reply-To: <BANLkTi=p8wPRyfHES4_9gLA8u2FNPH=1Gg@mail.gmail.com>
References: <4DC943BE.60902@arcor.de> <4DC94D9A.7070607@gmx.de>
 <4DC966D2.4060705@arcor.de> <4DC9700C.1020002@gmx.de>
 <BANLkTi=p8wPRyfHES4_9gLA8u2FNPH=1Gg@mail.gmail.com>
Message-ID: <BANLkTik6JZE05KTs8VqjWdWW_AwnB1FbaQ@mail.gmail.com>

(I'm sorry, my browser sent the mail without my consent.)

On Tue, May 10, 2011 at 21:17, Mojca Miklavec wrote:
> On Tue, May 10, 2011 at 19:04, Arno Trautmann wrote:
>>
>> My LuaTeX /is/ from tlcontrib ? I'm wondering why yours has the Web2C
>> 2011 tag? (I'm on x86-64 linux, in case that matters)

Windows binaries come from Akira who usually uses the latest version
of all libraries, including kpathsea & friends, so the Web2C 2011 tag
is not unexpected.


I cannot reproduce the behaviour on a non-windows box either, but I
can confirm that it breaks in windows.

I tested with:
- lualatex (latest TL's update) & LuaTeX beta-0.70.0 (rev 4250) on Mac
(no problems)
- ConTeXt MKIV 2011.05.09 10:07 (minimals) & exactly the same LuaTeX
on Mac (no problems)
- ConTeXt MKIV 2011.05.09 16:28 (minimals) & Akira's LuaTeX
beta-0.70.0 on Windows (wrong result)

The weird thing is that when I tested two hours ago the word eine
didn't break at all and I would almost bet that other breaks were
different.

Now I did a new change (\mainlanguage[deo]) and I get

! Conflicting pattern ignored.

system          > tex > error on line 13 in file de.tex: Conflicting
pattern ignored ...

when I load the old german patterns (but that might be a problem of ConTeXt).

Mojca

PS: I have no idea how/if \showhyphens works in ConTeXt, but I was
using the new functionality in ConTeXt with \startcomparepatterns
which should work comparably well.


From mojca.miklavec.lists at gmail.com  Tue May 10 22:04:11 2011
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 10 May 2011 22:04:11 +0200
Subject: [lltx] [luatex] wrong hyphenation in four-letter word
In-Reply-To: <BANLkTik6JZE05KTs8VqjWdWW_AwnB1FbaQ@mail.gmail.com>
References: <4DC943BE.60902@arcor.de> <4DC94D9A.7070607@gmx.de>
 <4DC966D2.4060705@arcor.de> <4DC9700C.1020002@gmx.de>
 <BANLkTi=p8wPRyfHES4_9gLA8u2FNPH=1Gg@mail.gmail.com>
 <BANLkTik6JZE05KTs8VqjWdWW_AwnB1FbaQ@mail.gmail.com>
Message-ID: <BANLkTinTriWTWC0mrz4s9=rFs+25FmZOag@mail.gmail.com>

On Tue, May 10, 2011 at 21:34, Mojca Miklavec wrote:
>
> I cannot reproduce the behaviour on a non-windows box either, but I
> can confirm that it breaks in windows.

... and after some more tests I can confirm that hyphenation behaves
semi-random. Compiling the same document several times won't change
anything, but when changing a bit here, it will influence the
hyphenation somewhere else in a not-too-consistent way.

Mojca

From mailing_list at arcor.de  Tue May 10 23:40:28 2011
From: mailing_list at arcor.de (Stephan Hennig)
Date: Tue, 10 May 2011 23:40:28 +0200
Subject: [lltx] Arvo font is bold by default
Message-ID: <4DC9B0CC.3090804@arcor.de>

Hi,

the following example uses font Arvo from the Google font library as
typewriter font,
<URL:http://www.google.com/webfonts/family?family=Arvo&subset=latin>.

\listfiles
\documentclass{minimal}
\usepackage{fontspec}
\setmonofont{Arvo}
\begin{document}
\texttt{foo}
\end{document}

However, instead of the regular cut, the bold cut is used in the
document.  And the log file contains some suspicious messages
(arvo-bold.ttf is referenced everywhere):

> luaotfload | load font: font family='arvo', subfamily='regular' found: arvo-bol
> d.ttf(load: C:/Users/Stephan/.texlive2010/texmf-var/luatex-cache/generic/fonts/
> otf/temp-arvo-bold.lua)
> luaotfload | load font: font family='arvo', subfamily='regular' found: arvo-bol
> d.ttf
> fontspec: script 'latn' exists in font 'Arvo Bold'
> fontspec: script 'latn' exists in font 'Arvo Bold'
> \g_fontspec_family_Arvo_int=\count363
>  fontspec info: Defining font family 'Arvo(0)' for font 'Arvo' with options [].
> 
> 
> \g_fontspec_Arvo(0)_prop=\toks38
> luaotfload | load font: font family='arvo', subfamily='regular' found: arvo-bol
> d.ttf
>  fontspec info: Defining shape 'normal' with NFSS spec.:
> (fontspec)  <->"name:Arvo:mode=node;script=latn;language=DFLT;"
> 
> luaotfload | load font: font family='arvo', subfamily='regular' found: arvo-bol
> d.ttf(load: C:/Users/Stephan/.texlive2010/texmf-var/luatex-cache/generic/fonts/
> otf/temp-arvo-regular.lua)
>  fontspec info: Defining shape 'bold' with NFSS spec.:
> (fontspec)  <->"name:Arvo/B:mode=node;script=latn;language=DFLT;"
> 
> luaotfload | load font: font family='arvo', subfamily='regular' found: arvo-bol
> d.ttf
> luaotfload | load font: font family='arvo', subfamily='italic' found: arvo-bold
> italic.ttf(load: C:/Users/Stephan/.texlive2010/texmf-var/luatex-cache/generic/f
> onts/otf/temp-arvo-bolditalic.lua)
> luaotfload | load font: font family='arvo', subfamily='italic' found: arvo-bold
> italic.ttf
>  fontspec info: Defining shape 'italic' with NFSS spec.:
> (fontspec)  <->"name:Arvo/I:mode=node;script=latn;language=DFLT;"
> 
> luaotfload | load font: font family='arvo', subfamily='regular' found: arvo-bol
> d.ttf

It works when stetting the font via

  \setmonofont{arvo-regular.ttf}


Is that behaviour to be expected or is it a bug?

Best regards,
Stephan Hennig

system: Windows 7, x64

> >lualatex -version
> This is LuaTeX, Version beta-0.70.0-2011050815 (Web2C 2011) (rev 4247)


>  *File List*
>  minimal.cls    2001/05/25 Standard LaTeX minimal class
> fontspec.sty    2011/02/26 v2.1f Advanced font selection for XeLaTeX/LuaLaTeX
>    expl3.sty    2011/04/09 v2222 L3 Experimental code bundle wrapper
>  l3names.sty    2011/01/08 v2122 L3 Experimental Naming Scheme for TeX Primitiv
> es
>   luatex.sty    2010/03/09 v0.4 LuaTeX basic definition package (HO)
> infwarerr.sty    2010/04/08 v1.3 Providing info/warning/message (HO)
> ifluatex.sty    2010/03/01 v1.3 Provides the ifluatex switch (HO)
>     etex.sty    1998/03/26 v2.0 eTeX basic definition package (PEB)
> luatex-loader.sty    2010/03/09 v0.4 Lua module loader (HO)
> pdftexcmds.sty    2011/04/22 v0.16 Utilities of pdfTeX for LuaTeX (HO)
>  ltxcmds.sty    2011/04/18 v1.20 LaTeX kernel commands for general use (HO)
>    ifpdf.sty    2011/01/30 v2.3 Provides the ifpdf switch (HO)
> l3basics.sty    2011/04/23 v2246 L3 Experimental basic definitions
>  l3expan.sty    2011/04/09 v2223 L3 Experimental Argument Expansion module
>     l3tl.sty    2011/04/09 v2223 L3 Experimental Token Lists
>    l3int.sty    2011/04/11 v2229 L3 Experimental Integer module
>  l3quark.sty    2011/04/14 v2234 L3 Experimental Quark Commands
>    l3seq.sty    2011/04/21 v2245 The LaTeX3 kernel: sequences and stacks
>   l3toks.sty    2011/04/09 v2223 L3 Experimental Token Registers
>    l3prg.sty    2011/04/09 v2223 L3 Experimental control structures
>  l3clist.sty    2011/04/09 v2223 L3 Experimental comma separated lists
>  l3token.sty    2011/04/09 v2223 L3 Experimental token investigation and manipu
> lation
>   l3prop.sty    2011/04/09 v2223 L3 Experimental Property Lists
>    l3msg.sty    2010/10/02 v2052 L3 Experimental LaTeX Messages module
>     l3io.sty    2010/10/03 v2063 L3 Experimental i/o module
>   l3skip.sty    2011/02/15 v2149 L3 Experimental skip registers
>    l3box.sty    2011/04/09 v2223 L3 Experimental Box module
> l3keyval.sty    2011/04/09 v2223 L3 Experimental keyval processing
>   l3keys.sty    2010/11/11 v2082 L3 Experimental key-value support
> l3precom.sty    2011/04/09 v2223 L3 Experimental precompilation module
>   l3xref.sty    2011/04/09 v2223 L3 Experimental cross referencing
>   l3file.sty    2011/04/21 v2242 The LaTeX3 kernel: file operations
>     l3fp.sty    2011/03/19 v2201 L3 Experimental floating-point operations
> l3luatex.sty    2010/07/18 v1985 L3 Experimental LuaTeX functions
>     calc.sty    2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
>   xparse.sty    2011/04/08 v2219 Generic document command parser
> luaotfload.sty    2011/04/21 v1.25 OpenType layout system
> luatexbase.sty    2010/10/06 v0.3 Module utilities for LuaTeX
> luatexbase-compat.sty    2010/10/10 v0.3 Compatibility tools for LuaTeX
> luatexbase-loader.sty    2010/10/10 v0.3 Lua module loader for LuaTeX
> luatexbase-regs.sty    2010/10/10 v0.3 Registers allocation for LuaTeX
> luatexbase-attr.sty    2010/10/10 v0.3 Attributes allocation for LuaTeX
> luatexbase-cctb.sty    2010/10/10 v0.3 Catcodetable allocation for LuaTeX
> luatexbase-mcb.sty    2010/10/10 v0.3 Callback management for LuaTeX
> luatexbase-modutils.sty    2010/10/10 v0.3 Module utilities for LuaTeX
>  xkeyval.sty    2008/08/13 v2.6a package option processing (HA)
>  xkeyval.tex    2008/08/13 v2.6a key=value parser (HA)
> fontspec-patches.sty    2011/02/26 v2.1f Advanced font selection for XeLaTeX/Lu
> aLaTeX
> fixltx2e.sty    2006/09/13 v1.1m fixes to LaTeX
>  fontenc.sty
>   eu2enc.def    2010/05/27 v0.1h Experimental Unicode font encodings
>   eu2lmr.fd    2009/10/30 v1.6 Font defs for Latin Modern
> xunicode.sty    2010/11/06 v0.96 provides access to latin accents and many othe
> r characters in Unicode lower plane
> fontspec.cfg
>  ***********

From wspr81 at gmail.com  Wed May 11 04:26:28 2011
From: wspr81 at gmail.com (Will Robertson)
Date: Wed, 11 May 2011 11:56:28 +0930
Subject: [lltx] Arvo font is bold by default
In-Reply-To: <4DC9B0CC.3090804@arcor.de>
References: <4DC9B0CC.3090804@arcor.de>
Message-ID: <ADB0357A-D0C8-4B58-9E49-4C071A99D3D4@gmail.com>

On 11/05/2011, at 7:10 AM, Stephan Hennig wrote:

> It works when stetting the font via
> 
>  \setmonofont{arvo-regular.ttf}

Yep, that would be expected.

> Is that behaviour to be expected or is it a bug?

Selecting the bold font by default would be considered a bug, yes, but I'm not sure if Khaled is around at the moment to investigate it...

Cheers,
-- Will



From taco at elvenkind.com  Wed May 11 07:56:47 2011
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 11 May 2011 07:56:47 +0200
Subject: [lltx] [luatex] wrong hyphenation in four-letter word
In-Reply-To: <BANLkTinTriWTWC0mrz4s9=rFs+25FmZOag@mail.gmail.com>
References: <4DC943BE.60902@arcor.de> <4DC94D9A.7070607@gmx.de>
 <4DC966D2.4060705@arcor.de> <4DC9700C.1020002@gmx.de>
 <BANLkTi=p8wPRyfHES4_9gLA8u2FNPH=1Gg@mail.gmail.com>
 <BANLkTik6JZE05KTs8VqjWdWW_AwnB1FbaQ@mail.gmail.com>
 <BANLkTinTriWTWC0mrz4s9=rFs+25FmZOag@mail.gmail.com>
Message-ID: <4DCA251F.1060701@elvenkind.com>

On 05/10/2011 10:04 PM, Mojca Miklavec wrote:
> On Tue, May 10, 2011 at 21:34, Mojca Miklavec wrote:
>>
>> I cannot reproduce the behaviour on a non-windows box either, but I
>> can confirm that it breaks in windows.
>
> ... and after some more tests I can confirm that hyphenation behaves
> semi-random. Compiling the same document several times won't change
> anything, but when changing a bit here, it will influence the
> hyphenation somewhere else in a not-too-consistent way.

If this is all win32 only, someone of you should warn Akira.

Best wishes,
Taco

From mailing_list at arcor.de  Wed May 11 11:00:06 2011
From: mailing_list at arcor.de (Stephan Hennig)
Date: Wed, 11 May 2011 11:00:06 +0200
Subject: [lltx] [luatex]   wrong hyphenation in four-letter word
In-Reply-To: <4DCA251F.1060701@elvenkind.com>
References: <4DC943BE.60902@arcor.de> <4DC94D9A.7070607@gmx.de>
 <4DC966D2.4060705@arcor.de> <4DC9700C.1020002@gmx.de>
 <BANLkTi=p8wPRyfHES4_9gLA8u2FNPH=1Gg@mail.gmail.com>
 <BANLkTik6JZE05KTs8VqjWdWW_AwnB1FbaQ@mail.gmail.com>
 <BANLkTinTriWTWC0mrz4s9=rFs+25FmZOag@mail.gmail.com>
 <4DCA251F.1060701@elvenkind.com>
Message-ID: <4DCA5016.5030402@arcor.de>

schrieb Taco Hoekwater:

> If this is all win32 only, someone of you should warn Akira.

Done.

From mojca.miklavec.lists at gmail.com  Wed May 11 11:24:12 2011
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 11 May 2011 11:24:12 +0200
Subject: [lltx] [luatex] wrong hyphenation in four-letter word
In-Reply-To: <ca6wls1zoli3.dlg@nililand.de>
References: <4DC943BE.60902@arcor.de>
	<ca6wls1zoli3.dlg@nililand.de>
Message-ID: <BANLkTi=r7RcYkTAgmtwewy5-5PXy14+Piw@mail.gmail.com>

On Wed, May 11, 2011 at 11:17, Ulrike Fischer wrote:
>
> Non-ASCII-chars at the end of the words can change hyhenation. But
> more curiosly the \hspace{0pt} changes it to:

I forgot to say: I realized that "sich eine" was shown as hyphenated
sich-ei-ne in ConTeXt. I have no idea why the hyphen between sich and
eine would be there. But when displaying hyphenation in document, that
mark wasn't shown.

Mojca

From luatex at nililand.de  Wed May 11 11:17:44 2011
From: luatex at nililand.de (Ulrike Fischer)
Date: Wed, 11 May 2011 11:17:44 +0200
Subject: [lltx] wrong hyphenation in four-letter word
References: <4DC943BE.60902@arcor.de>
Message-ID: <ca6wls1zoli3.dlg@nililand.de>

Am Tue, 10 May 2011 15:55:10 +0200 schrieb Stephan Hennig:

> [sending to luatex and lualatex list]
> 
> Hi,
> 
> I'm observing a wrong hyphenation of a four-letter word with lualatex
> and German hyphenation patterns.  For the German language,
> \lefthyphenmin and \righthyphenmin are both set to 2, so that
> four-letter words can indeed be hyphenated, such as ei-ne.  But the word
> "sich" shouldn't be hyphenated at all, whereas it is
> hyphenated as si-ch:
> 
> \listfiles
> \documentclass{minimal}
> \usepackage{fontspec}
> \usepackage[ngerman]{babel}
> \begin{document}
> \showhyphens{sich eine}
> \end{document}
> 
>> Underfull \hbox (badness 10000) in paragraph at lines 9--9
>> [][] \EU2/lmr/m/n/10 si-ch ei-ne

When I tested your example I had an old aux-file which gave an error
- and the hyphenation was correct. In the next run with an empty
aux-file it was wrong. 

So I made some tests. The problem is to some extend due to the
minimal class: It doesn't issue like e.g. article a \normalsize
command and its definition of \normalsize is also different to the
one in the standard classes. One can get a correct \showhyphens
output if one set after fontspec or (\usepackage[EU2]{fontenc} )
\baselineskip + \normalbaselinekskip, or if one redefine \normalsize
so that it also set (that's curious) \belowdisplayshortskip.

But the really curious thing I found during my test is the following
example:


\documentclass{article}
\usepackage[ngerman]{babel}
\usepackage{luaotfload}
\usepackage[EU2]{fontenc}
\textwidth0.3cm
\begin{document}
%a

\hspace{0pt}%
?sich? ?eine? ?sich? sich? eine? ?sich? eine sich sich sich eine
eine eine
 abc

\end{document}

Non-ASCII-chars at the end of the words can change hyhenation. But
more curiosly the \hspace{0pt} changes it to: with it the last
"sich" are hyphenated too but this effect disappear if you uncomment
the "a". One the whole this look as if there is a initialization
problem but it is difficult to see if the engine or the font loader
or the babel commands or the local configuration (the settings in
the language.dat) is responsable. (If one load the patterns with
\makeatletter\bbl at patterns{ngerman}\makeatother the side effect of
the \hspace disappaer but ?sich? is still hyphenated).

This is LuaTeX, Version beta-0.70.0-2011050815 (rev 4247) 

-- 
Ulrike Fischer 


From mailing_list at arcor.de  Wed May 11 14:01:55 2011
From: mailing_list at arcor.de (Stephan Hennig)
Date: Wed, 11 May 2011 14:01:55 +0200
Subject: [lltx] [luatex] wrong hyphenation in four-letter word
In-Reply-To: <ca6wls1zoli3.dlg@nililand.de>
References: <4DC943BE.60902@arcor.de> <ca6wls1zoli3.dlg@nililand.de>
Message-ID: <4DCA7AB3.7070707@arcor.de>

schrieb Ulrike Fischer:
> Am Tue, 10 May 2011 15:55:10 +0200 schrieb Stephan Hennig:
> 
>> \listfiles
>> \documentclass{minimal}
>> \usepackage{fontspec}
>> \usepackage[ngerman]{babel}
>> \begin{document}
>> \showhyphens{sich eine}
>> \end{document}
> 
> \documentclass{article}
> \usepackage[ngerman]{babel}
> \usepackage{luaotfload}
> \usepackage[EU2]{fontenc}
> \textwidth0.3cm
> \begin{document}
> %a
> 
> \hspace{0pt}%
> ?sich? ?eine? ?sich? sich? eine? ?sich? eine sich sich sich eine
> eine eine
>  abc
> 
> \end{document}
> 
> One the whole this look as if there is a initialization
> problem but it is difficult to see if the engine or the font loader
> or the babel commands or the local configuration (the settings in
> the language.dat) is responsable. (If one load the patterns with
> \makeatletter\bbl at patterns{ngerman}\makeatother the side effect of
> the \hspace disappaer but ?sich? is still hyphenated).
> 
> This is LuaTeX, Version beta-0.70.0-2011050815 (rev 4247) 

Reinstalling luatex beta-0.60.2-2010071421 (Web2C 2010) (rev 3736) from
tlnet, both examples compile file.  So it looks indeed like a problem
with the luatex binary (that is, the code or the build process).  Can
someone test the examples on Windows with other binaries?

Best regards,
Stephan Hennig

From news3 at nililand.de  Wed May 11 15:24:14 2011
From: news3 at nililand.de (Ulrike Fischer)
Date: Wed, 11 May 2011 15:24:14 +0200
Subject: [lltx] \textit changes font size with LM fonts
References: <4DC98A59.7080809@arcor.de>
Message-ID: <7fmz5j0fwfut$.dlg@nililand.de>

Am Tue, 10 May 2011 20:56:25 +0200 schrieb Stephan Hennig:

> Hi,
> 
> I'm observing an odd behaviour with the Latin Modern Roman and Sans
> fonts.  In the attached example the second instance of italic text is
> typeset at a smaller font size than the surrounding text.
> 
> The problems doesn't exhibit with fonts other that LM Roman or LM Sans
> or if either \tableofcontents or \mainmatter is removed.
> 
> Can you reproduce the problem?

Yes. It has obviously to do with the fact that the fonts exist in
more than one size. lualatex reloads the fonts after a newpage and
then sometimes gets the wrong size (I could reproduce it with 10pt
and 12pt class options but not with 11pt).


I suspect a fontspec bug as one can trigger the wrong font size by
using \textsl. (fontspec handles slanted and italic in a specific
way):

\documentclass[12pt]{book}
\usepackage{fontspec}
\setmainfont{Latin Modern Roman}
\newcommand*{\test}{foo  \textit{bar} \textsl{cde} \textit{bar} foo}

\begin{document}
\test
\end{document}

-- 
Ulrike Fischer 


From mojca.miklavec.lists at gmail.com  Wed May 11 21:50:52 2011
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 11 May 2011 21:50:52 +0200
Subject: [lltx] [luatex] wrong hyphenation in four-letter word
In-Reply-To: <4DCA7AB3.7070707@arcor.de>
References: <4DC943BE.60902@arcor.de> <ca6wls1zoli3.dlg@nililand.de>
 <4DCA7AB3.7070707@arcor.de>
Message-ID: <BANLkTikA3ibH+xXbZcXFap3xMOd6=ARkbg@mail.gmail.com>

On Wed, May 11, 2011 at 14:01, Stephan Hennig wrote:
>
> Reinstalling luatex beta-0.60.2-2010071421 (Web2C 2010) (rev 3736) from
> tlnet, both examples compile file. ?So it looks indeed like a problem
> with the luatex binary (that is, the code or the build process). ?Can
> someone test the examples on Windows with other binaries?

beta-0.64 (as well as 0.65 and 0.66) show the same symptoms. I didn't
have older binaries to test (and ConTeXt would probably not even work
with 0.60).

The latex minimal example works fine in both MikTeX's LuaTeX 0.70.0 as
well as in 0.60.2. (I wasn't able to test ConTeXt with MikTeX's 0.70.0
without manually modifying installation.)

Mojca


From st_philipp at yahoo.de  Fri May 13 02:08:36 2011
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Fri, 13 May 2011 02:08:36 +0200
Subject: [lltx] [tex-live] Location of recorder file
In-Reply-To: <201105122301.p4CN1qPc007735@freefriends.org>
References: <201105122301.p4CN1qPc007735@freefriends.org>
Message-ID: <3BB8C0DD-95DC-47BC-BD36-47841A93CBDE@yahoo.de>


Am 13.05.2011 um 01:01 schrieb Karl Berry:

>    Almost everybody (e.g., AucTeX, the LaTeX 3 makefile)
>    assumes that the pattern
> 
>    <program> '\input <file>'
> 
>    sets the job name to (the base name of) <file>, which is not true any
> 
> Wouldn't it be better for luatex to have the same behavior as everything
> else instead of forcing every front end and user to think about a new
> special case if they want to use luatex?

I was utterly wrong in blaming LuaTeX: it's purely a LaTeX problem. lualatexquotejobname.tex expands \jobname at every job, forcing TeX to prematurely choose a job name before the first input file has been read. This can be provoked in any engine and format:

$ tex '\input knuth \bye'
... Output written on knuth.dvi ...
$ tex -ini '\input plain \everyjob{\edef\x{\jobname}}\dump'
... Beginning to dump on file plain.fmt ...
$ tex '&plain' '\input knuth \bye'
... Output written on texput.dvi ...

This means lualatexquotejobname has to be removed from the format, or at least rewritten so that \jobname is never expanded at every job:

$ lualatex '\input sample2e '
... Output written on texput.pdf ...
$ touch lualatexquotejobname.tex
$ lualatex -ini lualatex.ini
... (./lualatexquotejobname.tex) ... Beginning to dump on file lualatex.fmt ...
$ luatex '&lualatex' '\input sample2e '
... Output written on sample2e.pdf ...

From mpg at elzevir.fr  Fri May 13 09:15:55 2011
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 13 May 2011 09:15:55 +0200
Subject: [lltx] [tex-live] Location of recorder file
In-Reply-To: <3BB8C0DD-95DC-47BC-BD36-47841A93CBDE@yahoo.de>
References: <201105122301.p4CN1qPc007735@freefriends.org>
 <3BB8C0DD-95DC-47BC-BD36-47841A93CBDE@yahoo.de>
Message-ID: <4DCCDAAB.2000505@elzevir.fr>

Le 13/05/2011 02:08, Philipp Stephani a ?crit :
> I was utterly wrong in blaming LuaTeX: it's purely a LaTeX problem.
> lualatexquotejobname.tex expands \jobname at every job, forcing TeX to
> prematurely choose a job name before the first input file has been read. This
> can be provoked in any engine and format:
> 
Yep, this is a know problem, documented in lualatex-doc (section \jobname, page
12) for example, and already discussed here:

http://tug.org/pipermail/luatex/2010-August/001986.html

> This means lualatexquotejobname has to be removed from the format,

Which means stop supporting spaces in file names.

> or at
> least rewritten so that \jobname is never expanded at every job:
> 
I don't see any way to achieve that at the moment.

Manuel.

From taco at elvenkind.com  Fri May 13 09:20:08 2011
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 13 May 2011 09:20:08 +0200
Subject: [lltx] [tex-live] Location of recorder file
In-Reply-To: <4DCCDAAB.2000505@elzevir.fr>
References: <201105122301.p4CN1qPc007735@freefriends.org>
 <3BB8C0DD-95DC-47BC-BD36-47841A93CBDE@yahoo.de> <4DCCDAAB.2000505@elzevir.fr>
Message-ID: <4DCCDBA8.508@elvenkind.com>

On 05/13/2011 09:15 AM, Manuel P?gouri?-Gonnard wrote:
> Le 13/05/2011 02:08, Philipp Stephani a ?crit :
>> I was utterly wrong in blaming LuaTeX: it's purely a LaTeX problem.
>> lualatexquotejobname.tex expands \jobname at every job, forcing TeX to
>> prematurely choose a job name before the first input file has been read. This
>> can be provoked in any engine and format:
>>
> Yep, this is a know problem, documented in lualatex-doc (section \jobname, page
> 12) for example, and already discussed here:
>
> http://tug.org/pipermail/luatex/2010-August/001986.html
>
>> This means lualatexquotejobname has to be removed from the format,
>
> Which means stop supporting spaces in file names.

Tough call: both '\input ..' and file names with spaces are a
'bad idea' in my (not all that humble) opinion.

Best wishes,
Taco


From zappathustra at free.fr  Fri May 13 10:25:16 2011
From: zappathustra at free.fr (Paul Isambert)
Date: Fri, 13 May 2011 10:25:16 +0200
Subject: [lltx] [tex-live] Location of recorder file
In-Reply-To: <4DCCDAAB.2000505@elzevir.fr>
References: <201105122301.p4CN1qPc007735@freefriends.org>
 <3BB8C0DD-95DC-47BC-BD36-47841A93CBDE@yahoo.de> <4DCCDAAB.2000505@elzevir.fr>
Message-ID: <4DCCEAEC.5060105@free.fr>

Le 13/05/2011 09:15, Manuel P?gouri?-Gonnard a ?crit :
> Le 13/05/2011 02:08, Philipp Stephani a ?crit :
>> or at
>> least rewritten so that \jobname is never expanded at every job:
>>
> I don't see any way to achieve that at the moment.

The following observation might help: \everyjob is put into the stream 
before whatever comes next. So it can know what's coming, either \input 
or anything else. If it is \input, then it just has to use one 
\expandafter before doing what it is supposed to do, and \jobname is 
correctly fixed.

For instance, try "lualatex \input test" with the following in the 
format (e.g. replaced lualatexquotejobname with that code):

\makeatletter
\long\def\getalook{%
   \immediate\write0{\jobname}%
   }
\everyjob{%
   \let\input\@@input
   \expandafter\getalook
   }
\makeatother

Then "test" is printed to the terminal, because the expansion of 
\jobname happens after \input. Remove \expandafter and you'll get 
"texput" instead. Here I've restored the primitive meaning of \input to 
make life simpler, but that'd work with LaTeX's \input and a subtler code.

Best,
Paul

From heiko.oberdiek at googlemail.com  Fri May 13 12:43:50 2011
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Fri, 13 May 2011 12:43:50 +0200
Subject: [lltx] [tex-live] Location of recorder file
In-Reply-To: <4DCCEAEC.5060105@free.fr>
References: <201105122301.p4CN1qPc007735@freefriends.org>
 <3BB8C0DD-95DC-47BC-BD36-47841A93CBDE@yahoo.de>
 <4DCCDAAB.2000505@elzevir.fr> <4DCCEAEC.5060105@free.fr>
Message-ID: <20110513104349.GA3562@oberdiek.my-fqdn.de>

On Fri, May 13, 2011 at 10:25:16AM +0200, Paul Isambert wrote:

> Le 13/05/2011 09:15, Manuel P?gouri?-Gonnard a ?crit :
> >Le 13/05/2011 02:08, Philipp Stephani a ?crit :
> >>or at
> >>least rewritten so that \jobname is never expanded at every job:
> >>
> >I don't see any way to achieve that at the moment.
> 
> The following observation might help: \everyjob is put into the
> stream before whatever comes next. So it can know what's coming,
> either \input or anything else. If it is \input, then it just has to
> use one \expandafter before doing what it is supposed to do, and
> \jobname is correctly fixed.
> 
> For instance, try "lualatex \input test"

And this will miss the cases where some code is inbetween that
does not affect \jobname, e.g.:
  "lualatex \def\flag{...}\input test"

And quoting the \jobname should not be necessary, because
LuaTeX supports the {}-syntax with \input, \openin, \openout, ...
Thus the LaTeX kernel macros that mess with file input and output
needs fixed to support spaces. Unhappily this will also change
internal interfaces, because the space is used as end delimiter
of the file name or spaces are removed from file names (\includeonly).

Yours sincerely
  Heiko Oberdiek

From zappathustra at free.fr  Fri May 13 12:57:17 2011
From: zappathustra at free.fr (Paul Isambert)
Date: Fri, 13 May 2011 12:57:17 +0200
Subject: [lltx] [tex-live] Location of recorder file
In-Reply-To: <20110513104349.GA3562@oberdiek.my-fqdn.de>
References: <201105122301.p4CN1qPc007735@freefriends.org>
 <3BB8C0DD-95DC-47BC-BD36-47841A93CBDE@yahoo.de> <4DCCDAAB.2000505@elzevir.fr>
 <4DCCEAEC.5060105@free.fr> <20110513104349.GA3562@oberdiek.my-fqdn.de>
Message-ID: <4DCD0E8D.60302@free.fr>

Le 13/05/2011 12:43, Heiko Oberdiek a ?crit :
> On Fri, May 13, 2011 at 10:25:16AM +0200, Paul Isambert wrote:
>
>> Le 13/05/2011 09:15, Manuel P?gouri?-Gonnard a ?crit :
>>> Le 13/05/2011 02:08, Philipp Stephani a ?crit :
>>>> or at
>>>> least rewritten so that \jobname is never expanded at every job:
>>>>
>>> I don't see any way to achieve that at the moment.
>> The following observation might help: \everyjob is put into the
>> stream before whatever comes next. So it can know what's coming,
>> either \input or anything else. If it is \input, then it just has to
>> use one \expandafter before doing what it is supposed to do, and
>> \jobname is correctly fixed.
>>
>> For instance, try "lualatex \input test"
> And this will miss the cases where some code is inbetween that
> does not affect \jobname, e.g.:
>    "lualatex \def\flag{...}\input test"
>
> And quoting the \jobname should not be necessary, because
> LuaTeX supports the {}-syntax with \input, \openin, \openout, ...
> Thus the LaTeX kernel macros that mess with file input and output
> needs fixed to support spaces. Unhappily this will also change
> internal interfaces, because the space is used as end delimiter
> of the file name or spaces are removed from file names (\includeonly).

I thought the basic ideas (as explained elsewhere) is you can't expect 
any prior macro, either in the kernel or in packages, to be fixed, so 
you have to live with that.

Also, overloading the command line makes the code fails, but it also 
fails with other engines. I.e. "tex \edef\foo{\jobname} \input test" 
forces \jobname to "texput"; the only difference here is that "texput" 
will be used even if nothing refers to \jobname on the command line.

Finally, I wonder what's the fuss: the problem, if I understand 
correctly, is that pdfTeX automatically quoted \jobname when necessary; 
LuaTeX doesn't do that, hence the trouble. But if I'm not mistaken, 
LaTeX doesn't rely on pdfTeX anyway, so it shouldn't allow filenames 
with spaces and the behavior in LuaTeX shouldn't be troublesome. Am I 
missing something?

Best,
Paul


From heiko.oberdiek at googlemail.com  Fri May 13 13:15:39 2011
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Fri, 13 May 2011 13:15:39 +0200
Subject: [lltx] [tex-live] Location of recorder file
In-Reply-To: <4DCD0E8D.60302@free.fr>
References: <201105122301.p4CN1qPc007735@freefriends.org>
 <3BB8C0DD-95DC-47BC-BD36-47841A93CBDE@yahoo.de>
 <4DCCDAAB.2000505@elzevir.fr> <4DCCEAEC.5060105@free.fr>
 <20110513104349.GA3562@oberdiek.my-fqdn.de>
 <4DCD0E8D.60302@free.fr>
Message-ID: <20110513111538.GA3639@oberdiek.my-fqdn.de>

On Fri, May 13, 2011 at 12:57:17PM +0200, Paul Isambert wrote:

> Le 13/05/2011 12:43, Heiko Oberdiek a ?crit :
> >On Fri, May 13, 2011 at 10:25:16AM +0200, Paul Isambert wrote:
> >
> >>Le 13/05/2011 09:15, Manuel P?gouri?-Gonnard a ?crit :
> >>>Le 13/05/2011 02:08, Philipp Stephani a ?crit :
> >>>>or at
> >>>>least rewritten so that \jobname is never expanded at every job:
> >>>>
> >>>I don't see any way to achieve that at the moment.
> >>The following observation might help: \everyjob is put into the
> >>stream before whatever comes next. So it can know what's coming,
> >>either \input or anything else. If it is \input, then it just has to
> >>use one \expandafter before doing what it is supposed to do, and
> >>\jobname is correctly fixed.
> >>
> >>For instance, try "lualatex \input test"
> >And this will miss the cases where some code is inbetween that
> >does not affect \jobname, e.g.:
> >   "lualatex \def\flag{...}\input test"
> >
> >And quoting the \jobname should not be necessary, because
> >LuaTeX supports the {}-syntax with \input, \openin, \openout, ...
> >Thus the LaTeX kernel macros that mess with file input and output
> >needs fixed to support spaces. Unhappily this will also change
> >internal interfaces, because the space is used as end delimiter
> >of the file name or spaces are removed from file names (\includeonly).
> 
> I thought the basic ideas (as explained elsewhere) is you can't
> expect any prior macro, either in the kernel or in packages, to be
> fixed, so you have to live with that.
> 
> Also, overloading the command line makes the code fails, but it also
> fails with other engines. I.e. "tex \edef\foo{\jobname} \input test"
> forces \jobname to "texput"; the only difference here is that
> "texput" will be used even if nothing refers to \jobname on the
> command line.
> 
> Finally, I wonder what's the fuss: the problem, if I understand
> correctly, is that pdfTeX automatically quoted \jobname when
> necessary; LuaTeX doesn't do that, hence the trouble.

I think LuaTeX is right. The quotes can be regular characters
of a filename. pdfTeX don't compile files with quotes:
  bash$ pdftex --ini quot\"ed.tex
fails with
  ! Unbalanced quotes in argument quot"ed.tex

Unhappily LuaTeX has inherited this behaviour of pdfTeX.

Fixing one problem with one character by creating a problem
with another character does not make sense to me.
Now two characters cannot be used in file names. :-(

I think, the file name interfaces should be transparent
in the sense, that all characters are supported and
the user is only hit by the restrictions of the operating
system or the file system, but not by artificial restrictions
by the software inbetween.

Yours sincerely
  Heiko Oberdiek

From st_philipp at yahoo.de  Fri May 13 12:32:05 2011
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Fri, 13 May 2011 12:32:05 +0200
Subject: [lltx] [tex-live] Location of recorder file
In-Reply-To: <4DCCDAAB.2000505@elzevir.fr>
References: <201105122301.p4CN1qPc007735@freefriends.org>
 <3BB8C0DD-95DC-47BC-BD36-47841A93CBDE@yahoo.de> <4DCCDAAB.2000505@elzevir.fr>
Message-ID: <B89F53AE-EAE4-4DC3-9498-D84140FD2148@yahoo.de>


Am 13.05.2011 um 09:15 schrieb Manuel P?gouri?-Gonnard:

> Le 13/05/2011 02:08, Philipp Stephani a ?crit :
>> I was utterly wrong in blaming LuaTeX: it's purely a LaTeX problem.
>> lualatexquotejobname.tex expands \jobname at every job, forcing TeX to
>> prematurely choose a job name before the first input file has been read. This
>> can be provoked in any engine and format:
>> 
> Yep, this is a know problem, documented in lualatex-doc (section \jobname, page
> 12) for example, and already discussed here:
> 
> http://tug.org/pipermail/luatex/2010-August/001986.html

Ah, thanks for the pointer. I would have been surprised if I were the first to discover this. Still I think that breaking AucTeX and the decade-long expectation that '\input foo' works as expected should be avoided at all costs.

>> or at
>> least rewritten so that \jobname is never expanded at every job:
>> 
> I don't see any way to achieve that at the moment.

In the old thread there have been a few suggestions that would work:
http://www.ntg.nl/pipermail/dev-luatex/2009-April/002552.html
http://www.ntg.nl/pipermail/dev-luatex/2009-April/002560.html
David's suggestion seems to be very robust to me: it would not break traditional code that assume file names without spaces, and it would make quoting unnecessary. There are certainly other solutions as well, e.g. setting the quoted job name in Lua, but David's suggestions seems to be the most elegant.

From st_philipp at yahoo.de  Fri May 13 13:36:38 2011
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Fri, 13 May 2011 13:36:38 +0200
Subject: [lltx] [tex-live] Location of recorder file
In-Reply-To: <4DCD0E8D.60302@free.fr>
References: <201105122301.p4CN1qPc007735@freefriends.org>
 <3BB8C0DD-95DC-47BC-BD36-47841A93CBDE@yahoo.de> <4DCCDAAB.2000505@elzevir.fr>
 <4DCCEAEC.5060105@free.fr> <20110513104349.GA3562@oberdiek.my-fqdn.de>
 <4DCD0E8D.60302@free.fr>
Message-ID: <BC569961-9E84-4CC6-8AC0-C213A571A5C9@yahoo.de>


Am 13.05.2011 um 12:57 schrieb Paul Isambert:

> LaTeX doesn't rely on pdfTeX anyway, so it shouldn't allow filenames with spaces and the behavior in LuaTeX shouldn't be troublesome.

Maybe that's indeed the simplest solution:

\def\document{
 \endgroup
 \IfJobnameContainsSpaces
  \errmessage{Don't to this}
 \endinput\fi
 ...
}

From st_philipp at yahoo.de  Fri May 13 13:32:55 2011
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Fri, 13 May 2011 13:32:55 +0200
Subject: [lltx] [tex-live] Location of recorder file
In-Reply-To: <20110513104349.GA3562@oberdiek.my-fqdn.de>
References: <201105122301.p4CN1qPc007735@freefriends.org>
 <3BB8C0DD-95DC-47BC-BD36-47841A93CBDE@yahoo.de> <4DCCDAAB.2000505@elzevir.fr>
 <4DCCEAEC.5060105@free.fr> <20110513104349.GA3562@oberdiek.my-fqdn.de>
Message-ID: <7A8D431F-D413-4977-B17C-EA9B65198D45@yahoo.de>


Am 13.05.2011 um 12:43 schrieb Heiko Oberdiek:

> On Fri, May 13, 2011 at 10:25:16AM +0200, Paul Isambert wrote:
> 
>> Le 13/05/2011 09:15, Manuel P?gouri?-Gonnard a ?crit :
>>> Le 13/05/2011 02:08, Philipp Stephani a ?crit :
>>>> or at
>>>> least rewritten so that \jobname is never expanded at every job:
>>>> 
>>> I don't see any way to achieve that at the moment.
>> 
>> The following observation might help: \everyjob is put into the
>> stream before whatever comes next. So it can know what's coming,
>> either \input or anything else. If it is \input, then it just has to
>> use one \expandafter before doing what it is supposed to do, and
>> \jobname is correctly fixed.
>> 
>> For instance, try "lualatex \input test"
> 
> And this will miss the cases where some code is inbetween that
> does not affect \jobname, e.g.:
>  "lualatex \def\flag{...}\input test"
> 
> And quoting the \jobname should not be necessary, because
> LuaTeX supports the {}-syntax with \input, \openin, \openout, ...
> Thus the LaTeX kernel macros that mess with file input and output
> needs fixed to support spaces. Unhappily this will also change
> internal interfaces, because the space is used as end delimiter
> of the file name or spaces are removed from file names (\includeonly).

Still I think this should be tried; there is no other robust way than to fix the LaTeX issues. The format initialization files already contain several engine-related fixes, and a few more shouldn't hurt. If they change something user-visible, then they could go to fixltx2e.
Maybe we should even do the unthinkable and forbid the unbraced version of \input entirely: better fail loudly in all cases than silently in an incalculable number of cases.
Grepping through the LaTeX-related macro trees finds only 4112 instances of \\(@@){0,2}input, that's almost trivial and doable in five minutes ;'-/

From rolf.dieterich at gmx.de  Fri May 13 00:37:31 2011
From: rolf.dieterich at gmx.de (Rolf Dieterich)
Date: Fri, 13 May 2011 00:37:31 +0200
Subject: [lltx] luamplib: problem with certain characters
Message-ID: <001EA9F98BB440B193AD93F4BDBB0E35@blackdell>


Hello,

certain characters within the mplibcode environment (even in comments) make
problems:
<
>
tab
(Perhaps there are still more.)

If you read the same MetaPost code via filecontents* or the MetaPost command
input everything is fine.

I've attached a minimal example.

Observed on Windows XP with a fairly up-to-date TeX Live 2010 installation
including the tlcontrib repository.

Yours
Rolf Dieterich
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test-luamplib.ltx
Type: application/octet-stream
Size: 930 bytes
Desc: not available
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20110513/8ccce70d/attachment.obj>

From st_philipp at yahoo.de  Fri May 13 16:30:55 2011
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Fri, 13 May 2011 16:30:55 +0200
Subject: [lltx] Job name (was: Location of recorder file)
In-Reply-To: <4DCD0E8D.60302@free.fr>
References: <201105122301.p4CN1qPc007735@freefriends.org>
 <3BB8C0DD-95DC-47BC-BD36-47841A93CBDE@yahoo.de> <4DCCDAAB.2000505@elzevir.fr>
 <4DCCEAEC.5060105@free.fr> <20110513104349.GA3562@oberdiek.my-fqdn.de>
 <4DCD0E8D.60302@free.fr>
Message-ID: <FD3E47FC-BE19-4AA8-A9DF-1E6DE3F139D5@yahoo.de>


Am 13.05.2011 um 12:57 schrieb Paul Isambert:

> I thought the basic ideas (as explained elsewhere) is you can't expect any prior macro, either in the kernel or in packages, to be fixed, so you have to live with that.

If there are bugs, they need to be fixed. While the kernel (latex.ltx) itself won't be modified, there is still lots of room for possible fixes: lualatex.ini, fixltx2e.sty, luatex.sty, dedicated packages...
Probably the syntax
\input abc
has to stay for compatibility reasons, but I think the syntax with quotation marks should go: It was never part of the original TeX, nobody can rely on its presence, and LuaTeX is still beta, so removing such features would do little harm. Doing the right thing is more important than strict compatibility to pdfTeX, IMO.
The only preferred syntax for the \input, \openin etc. primitives should then be
\input <general text>
For the \jobname issue, David's solution could be implemented: it seems to be the most robust one. I think I'll submit a patch.

> 
> Also, overloading the command line makes the code fails, but it also fails with other engines. I.e. "tex \edef\foo{\jobname} \input test" forces \jobname to "texput"; the only difference here is that "texput" will be used even if nothing refers to \jobname on the command line.

Yes but this difference it the important one: "tex \edef\foo{\jobname} \input test" has never worked, and nobody expects it to work in LuaTeX; on the other hand, "latex \input test" has always worked, and everybody expects it to work with LuaTeX, too. Since so many [1] are using this "feature", it will probably be a fruitless adventure to try to fix the whole universe ? it might be better to officially document the choice of the job name, and demand that "latex \input test" work as expected for all engines. This seems even more important to me than the space character support.

[1] http://www.google.com/codesearch?as_q=%5Cb%28pdf%29%3Flatex%5Cs.*%5C%5Cinput&as_case=yes

From st_philipp at yahoo.de  Fri May 13 16:33:29 2011
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Fri, 13 May 2011 16:33:29 +0200
Subject: [lltx] [tex-live]   Location of recorder file
In-Reply-To: <20110513111538.GA3639@oberdiek.my-fqdn.de>
References: <201105122301.p4CN1qPc007735@freefriends.org>
 <3BB8C0DD-95DC-47BC-BD36-47841A93CBDE@yahoo.de> <4DCCDAAB.2000505@elzevir.fr>
 <4DCCEAEC.5060105@free.fr> <20110513104349.GA3562@oberdiek.my-fqdn.de>
 <4DCD0E8D.60302@free.fr> <20110513111538.GA3639@oberdiek.my-fqdn.de>
Message-ID: <514E7CC2-1EF4-4235-8766-B1F553409149@yahoo.de>

Am 13.05.2011 um 13:15 schrieb Heiko Oberdiek:

> I think LuaTeX is right. The quotes can be regular characters
> of a filename. pdfTeX don't compile files with quotes:
>  bash$ pdftex --ini quot\"ed.tex
> fails with
>  ! Unbalanced quotes in argument quot"ed.tex
> 
> Unhappily LuaTeX has inherited this behaviour of pdfTeX.
> 
> Fixing one problem with one character by creating a problem
> with another character does not make sense to me.
> Now two characters cannot be used in file names. :-(

I think you're right, and I'll try to prepare a patch for LuaTeX to
1. remove the special treatment of quotes in file names,
2. have \jobname expand to catcode-12-only tokens, as David suggested,
3. have the to-be-deprecated syntax without braces require a catcode-10 token to stop the scan.
I think this could solve most of the issues.

BTW, this problem has already been discussed on the AucTeX side [1], apparently without a fix so far.

[1] http://lists.gnu.org/archive/html/bug-auctex/2011-02/msg00001.html

From taco at elvenkind.com  Fri May 13 17:23:55 2011
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 13 May 2011 17:23:55 +0200
Subject: [lltx] [luatex] Job name (was: Location of recorder file)
In-Reply-To: <FD3E47FC-BE19-4AA8-A9DF-1E6DE3F139D5@yahoo.de>
References: <201105122301.p4CN1qPc007735@freefriends.org>
 <3BB8C0DD-95DC-47BC-BD36-47841A93CBDE@yahoo.de> <4DCCDAAB.2000505@elzevir.fr>
 <4DCCEAEC.5060105@free.fr> <20110513104349.GA3562@oberdiek.my-fqdn.de>
 <4DCD0E8D.60302@free.fr> <FD3E47FC-BE19-4AA8-A9DF-1E6DE3F139D5@yahoo.de>
Message-ID: <FA01A5A0-5C08-4508-A38D-90D7982BAFAE@elvenkind.com>





On 13 mei 2011, at 16:30, Philipp Stephani <st_philipp at yahoo.de> wrote:

> Yes but this difference it the important one: "tex \edef\foo{\jobname} \input test" has never worked, and nobody expects it to work in LuaTeX; on the other hand, "latex \input test" has always worked, and everybody expects it to work with LuaTeX, too. 

I fully intend to remove this Cmdline-is-first-input-line feature from metapost 2 (because it is extremely annoying to deal with with the new lib + driver architecture of mp: I now have to make the executable driver parse the commandline using string matching).

Because of this, it makes perfect sense for me to do the same to luatex 1.0. In fact, if I *ever* want to get rid of it, it has to be done before 1.0. Iirc, even the texbook says something along the lines of 'you are lucky if it works'. The argument to keep it seems to be that even though it is  a truly weird idea, it has been in use for a long time, so it should be kept forever. To me, that is far from convincing.

Best wishes,

Taco



From zdenek.wagner at gmail.com  Fri May 13 17:54:40 2011
From: zdenek.wagner at gmail.com (Zdenek Wagner)
Date: Fri, 13 May 2011 17:54:40 +0200
Subject: [lltx] [tex-live] [luatex] Job name (was: Location of recorder
	file)
In-Reply-To: <FA01A5A0-5C08-4508-A38D-90D7982BAFAE@elvenkind.com>
References: <201105122301.p4CN1qPc007735@freefriends.org>
 <3BB8C0DD-95DC-47BC-BD36-47841A93CBDE@yahoo.de>
 <4DCCDAAB.2000505@elzevir.fr> <4DCCEAEC.5060105@free.fr>
 <20110513104349.GA3562@oberdiek.my-fqdn.de>
 <4DCD0E8D.60302@free.fr>
 <FD3E47FC-BE19-4AA8-A9DF-1E6DE3F139D5@yahoo.de>
 <FA01A5A0-5C08-4508-A38D-90D7982BAFAE@elvenkind.com>
Message-ID: <BANLkTimd+1oR=NVCy_53_3RvzdJc3hMNeA@mail.gmail.com>

2011/5/13 Taco Hoekwater <taco at elvenkind.com>:
>
>
>
>
> On 13 mei 2011, at 16:30, Philipp Stephani <st_philipp at yahoo.de> wrote:
>
>> Yes but this difference it the important one: "tex \edef\foo{\jobname} \input test" has never worked, and nobody expects it to work in LuaTeX; on the other hand, "latex \input test" has always worked, and everybody expects it to work with LuaTeX, too.
>
> I fully intend to remove this Cmdline-is-first-input-line feature from metapost 2 (because it is extremely annoying to deal with with the new lib + driver architecture of mp: I now have to make the executable driver parse the commandline using string matching).
>
> Because of this, it makes perfect sense for me to do the same to luatex 1.0. In fact, if I *ever* want to get rid of it, it has to be done before 1.0. Iirc, even the texbook says something along the lines of 'you are lucky if it works'. The argument to keep it seems to be that even though it is ?a truly weird idea, it has been in use for a long time, so it should be kept forever. To me, that is far from convincing.
>
The reasoning stems from the encoding mess. The %! line can specify
the TCX table to be used for processing the file. While it may help,
it may also be a source of confusion. For instance, I use UTF-8
locale. If I get the file by email with proper locale set in the
sender's mail client, and I save it, my mail client will always
convert it to UTF-8. If the original file encoding were different, the
information in the %! will be wrong. IMHO this concept does not help
portability unless you pay special attention when sharing files.

> Best wishes,
>
> Taco
>
>
>



-- 
Zden?k Wagner
http://hroch486.icpf.cas.cz/wagner/
http://icebearsoft.euweb.cz


From mailing_list at arcor.de  Fri May 13 23:28:04 2011
From: mailing_list at arcor.de (Stephan Hennig)
Date: Fri, 13 May 2011 23:28:04 +0200
Subject: [lltx] \textit changes font size with LM fonts
In-Reply-To: <7fmz5j0fwfut$.dlg@nililand.de>
References: <4DC98A59.7080809@arcor.de> <7fmz5j0fwfut$.dlg@nililand.de>
Message-ID: <4DCDA264.5090102@arcor.de>

schrieb Ulrike Fischer:
> Am Tue, 10 May 2011 20:56:25 +0200 schrieb Stephan Hennig:
>
>> I'm observing an odd behaviour with the Latin Modern Roman and Sans
>> fonts.  In the attached example the second instance of italic text is
>> typeset at a smaller font size than the surrounding text.
> 
> Yes. It has obviously to do with the fact that the fonts exist in
> more than one size. lualatex reloads the fonts after a newpage and
> then sometimes gets the wrong size (I could reproduce it with 10pt
> and 12pt class options but not with 11pt).
> 
> 
> I suspect a fontspec bug as one can trigger the wrong font size by
> using \textsl. (fontspec handles slanted and italic in a specific
> way):

Thanks for the analysis!  I've added a tracker item to luaotfload,
<URL:https://github.com/khaledhosny/luaotfload/issues/30>.

Best regards,
Stephan Hennig

From mpg at elzevir.fr  Mon May 16 23:02:07 2011
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Mon, 16 May 2011 23:02:07 +0200
Subject: [lltx] luamplib: problem with certain characters
In-Reply-To: <001EA9F98BB440B193AD93F4BDBB0E35@blackdell>
References: <001EA9F98BB440B193AD93F4BDBB0E35@blackdell>
Message-ID: <4DD190CF.3080409@elzevir.fr>

Le 13/05/2011 00:37, Rolf Dieterich a ?crit :
> certain characters within the mplibcode environment (even in comments) make
> problems:
> <
>> >
> tab
> (Perhaps there are still more.)
> 
> If you read the same MetaPost code via filecontents* or the MetaPost command
> input everything is fine.

I added a tracker item to remind me to investigate later. Just to be sure (I'm
not a metapost user), are theses characters absolutely necessary for most
Metapost code?

Thanks for detailled your report,
Manuel.

From mailing_list at arcor.de  Fri May 20 00:32:39 2011
From: mailing_list at arcor.de (Stephan Hennig)
Date: Fri, 20 May 2011 00:32:39 +0200
Subject: [lltx] Arvo font is bold by default
In-Reply-To: <ADB0357A-D0C8-4B58-9E49-4C071A99D3D4@gmail.com>
References: <4DC9B0CC.3090804@arcor.de>
 <ADB0357A-D0C8-4B58-9E49-4C071A99D3D4@gmail.com>
Message-ID: <4DD59A87.3070405@arcor.de>

schrieb Will Robertson:

> Selecting the bold font by default would be considered a bug, yes,
> but I'm not sure if Khaled is around at the moment to investigate
> it...

Thanks!  I've added a tracker item at
<URL:https://github.com/khaledhosny/luaotfload/issues/32>.

Best regards,
Stephan Hennig

From nomosnomos at gmail.com  Fri May 20 05:15:29 2011
From: nomosnomos at gmail.com (Dohyun Kim)
Date: Fri, 20 May 2011 12:15:29 +0900
Subject: [lltx] unsetluatexattribute does not work
Message-ID: <BANLkTi=uDS73crzav_oKpE5rVF5N+aeEFw@mail.gmail.com>

Just as the title of this email says, when compiling a tex file as follows :

\input luatexbase-attr.sty
\newluatexattribute\testattr
\setluatexattribute\testattr{1}
\showthe\testattr
\unsetluatexattribute\testattr
\showthe\testattr
\bye

The result is :

This is LuaTeX, Version beta-0.60.2-2010071217 (TeX Live 2010) (rev 3736)
...<snip>
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/attr.lua))
> 1.
l.4 \showthe\testattr

?
> 1.
l.6 \showthe\testattr


Best regards,

-- 
Dohyun Kim
College of Law, Dongguk University
Seoul, Republic of Korea

From heiko.oberdiek at googlemail.com  Fri May 20 09:32:06 2011
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Fri, 20 May 2011 09:32:06 +0200
Subject: [lltx] unsetluatexattribute does not work
In-Reply-To: <BANLkTi=uDS73crzav_oKpE5rVF5N+aeEFw@mail.gmail.com>
References: <BANLkTi=uDS73crzav_oKpE5rVF5N+aeEFw@mail.gmail.com>
Message-ID: <20110520073206.GA27552@oberdiek.my-fqdn.de>

On Fri, May 20, 2011 at 12:15:29PM +0900, Dohyun Kim wrote:

> Just as the title of this email says, when compiling a tex file as follows :
> 
> \input luatexbase-attr.sty
> \newluatexattribute\testattr
> \setluatexattribute\testattr{1}
> \showthe\testattr
> \unsetluatexattribute\testattr
> \showthe\testattr
> \bye
> 
> The result is :
> 
> This is LuaTeX, Version beta-0.60.2-2010071217 (TeX Live 2010) (rev 3736)
> ...<snip>
> (/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/attr.lua))
> > 1.
> l.4 \showthe\testattr
> 
> ?
> > 1.
> l.6 \showthe\testattr

A bug in luatexbase-attr.sty:

\def\unsetluatexattribute#1{%
  \begingroup\escapechar\m at ne
  \luatexbase at directlua{%
    luatexbase.unset_attribute("\luatexluaescapestring{\string#1}")}%
  \endgroup}

The unsetting is done locally and after the group
the old value of the attribute is restored.

Yours sincerely
  Heiko Oberdiek

From zrbabbler at yahoo.co.jp  Sat May 21 12:02:10 2011
From: zrbabbler at yahoo.co.jp (Takayuki YATO)
Date: Sat, 21 May 2011 19:02:10 +0900 (JST)
Subject: [lltx] Collision of luatex and luatexbase, esp. on catcode talbes
Message-ID: <20110521100210.87007.qmail@web100303.mail.kks.yahoo.co.jp>

Hello all,

I fully understand and appreciate the situation
on this package collision explained in lualatex-doc.
But I think it is good to do a quick and tentative fix
to turn this collision to be harmless, before the
planned "true integration" of the two packages.

Judging from my brief review, everything except on
catcode tables seems to be a harmless redundancy.
On the other hand, collision on catcode tables is
really annoying: both packages destroy the preset and
user-defined assignments of each other, which makes
every use of the function totally unreliable.
So I think fixing only this part of the packages is
of great use and that will not be so hard work.

The fact that fontspec loads internally both of the
luatex and luatexbase packages and moreover use
catcode tables makes this issue more problematic.
For example, fontspec will fail if luatexbase is
loaded before it (possibly through another package):

\documentclass{article}
\usepackage{luatexbase}
\usepackage{fontspec}
\begin{document}
\fontspec{lmsans10-regular.otf} % or whatever font
Very simple test.
\end{document}

Loading luatexbase explicitly changes the load order
of luatexbase and luatex, which makes the luatex package
destroy the functionality of luatexbase which fontspec
relies on.

Best regards,

Takayuki YATO


From mpg at elzevir.fr  Sat May 21 13:01:49 2011
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Sat, 21 May 2011 13:01:49 +0200
Subject: [lltx] unsetluatexattribute does not work
In-Reply-To: <BANLkTi=uDS73crzav_oKpE5rVF5N+aeEFw@mail.gmail.com>
References: <BANLkTi=uDS73crzav_oKpE5rVF5N+aeEFw@mail.gmail.com>
Message-ID: <4DD79B9D.2060302@elzevir.fr>

Le 20/05/2011 05:15, Dohyun Kim a ?crit :
> Just as the title of this email says,

A fixed version 0.31 is on its way to CTAN.

Sorry for that, and thank you for your report (and Heiko for his hint).

Manuel.

From Arno.Trautmann at gmx.de  Wed May 25 21:03:57 2011
From: Arno.Trautmann at gmx.de (Arno Trautmann)
Date: Wed, 25 May 2011 21:03:57 +0200
Subject: [lltx] lmodern loading in format
Message-ID: <4DDD529D.1090809@gmx.de>

Hi all,

I'm giving an introductory course on LaTeX again this year, and of corse
I tell the participants how great luaLaTeX is, first of all (for me)
because of utf8 support etc. Then, they try it and are disappointed
because they see no umlauts or any other letters with diacritics in
their first document.
In my opinion, it doesn't feel right to have to load a package
(fontspec, as it loads lmodern) just to see diacritics on latin letters
? so I wanted to ask, if it might be possible to consider loading the
lmodern OpenType font by default instead of falling back to cmr? The
benefits are quite clear, I guess, however, it would crucially change
the behaviour of the format ? so ? any comments on this?

cheers
Arno

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 262 bytes
Desc: OpenPGP digital signature
URL: <http://tug.org/pipermail/lualatex-dev/attachments/20110525/ca822420/attachment.bin>

From wspr81 at gmail.com  Thu May 26 05:05:03 2011
From: wspr81 at gmail.com (Will Robertson)
Date: Thu, 26 May 2011 12:35:03 +0930
Subject: [lltx] lmodern loading in format
In-Reply-To: <4DDD529D.1090809@gmx.de>
References: <4DDD529D.1090809@gmx.de>
Message-ID: <6B3D0EA7-A973-4A40-A4C9-D5F0CC1F2F23@gmail.com>

On 26/05/2011, at 4:33 AM, Arno Trautmann wrote:

> In my opinion, it doesn't feel right to have to load a package
> (fontspec, as it loads lmodern) just to see diacritics on latin letters
> ? so I wanted to ask, if it might be possible to consider loading the
> lmodern OpenType font by default instead of falling back to cmr?

I'm afraid that it's simply not feasible to have lualatex load packages that will affect its default layout. The luatextra package should help to reduce the number required.

LaTeX is what it is, warts and all, with its myriad of packages that must be loaded. I don't think it's a big concern to have a standard preamble that includes a few of them. (I mean, you can make the same argument for hyperref, memoir, biblatex, and all sorts. It's not just fonts for which this is a problem.)

-- Will



From mpg at elzevir.fr  Fri May 27 12:17:33 2011
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 27 May 2011 12:17:33 +0200
Subject: [lltx] \expanded: a pdfTeX primitive?
Message-ID: <4DDF7A3D.9050309@elzevir.fr>

Hi,

According to the manual (and tex.extraprimitives), \expanded is a pdfTeX
primitive. However,

% pdftex -ini '\show\expanded \end'
This is pdfTeX, Version 3.1415926-1.40.11 (TeX Live 2010) (INITEX)
 restricted \write18 enabled.
> \expanded=undefined.
<*> \show\expanded
                   \end
?
No pages of output.
Transcript written on texput.log.

Also, I can find no mention of \expanded in the pdfTeX manual. Am I missing
something?

Manuel.

From zappathustra at free.fr  Fri May 27 12:23:13 2011
From: zappathustra at free.fr (Paul Isambert)
Date: Fri, 27 May 2011 12:23:13 +0200
Subject: [lltx] \expanded: a pdfTeX primitive?
In-Reply-To: <4DDF7A3D.9050309@elzevir.fr>
References: <4DDF7A3D.9050309@elzevir.fr>
Message-ID: <4DDF7B91.4050006@free.fr>

Le 27/05/2011 12:17, Manuel P?gouri?-Gonnard a ?crit :
> Hi,
>
> According to the manual (and tex.extraprimitives), \expanded is a pdfTeX
> primitive. However,
>
> % pdftex -ini '\show\expanded \end'
> This is pdfTeX, Version 3.1415926-1.40.11 (TeX Live 2010) (INITEX)
>   restricted \write18 enabled.
>> \expanded=undefined.
> <*>  \show\expanded
>                     \end
> ?
> No pages of output.
> Transcript written on texput.log.
>
> Also, I can find no mention of \expanded in the pdfTeX manual. Am I missing
> something?

If I remember correctly, \expanded is a pdfTeX primitive... that never 
made it to pdfTeX, hence its absence in the manual.
And it's meaning is to expand completely its argument. E.g.:

\def\foo{\bar}
\def\bar{bla}
\immediate\write17{\unexpanded\expandafter{\expanded{\foo\foo}}}

prints "blabla".

Best,
Paul


From mpg at elzevir.fr  Fri May 27 12:49:55 2011
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 27 May 2011 12:49:55 +0200
Subject: [lltx] \expanded: a pdfTeX primitive?
In-Reply-To: <4DDF7B91.4050006@free.fr>
References: <4DDF7A3D.9050309@elzevir.fr> <4DDF7B91.4050006@free.fr>
Message-ID: <4DDF81D3.5060504@elzevir.fr>

Le 27/05/2011 12:23, Paul Isambert a ?crit :
> If I remember correctly, \expanded is a pdfTeX primitive... that never 
> made it to pdfTeX, hence its absence in the manual.

Then isn't that a bit weird that it's listed as a pdfTeX primitive? Or is it
planned to finally make it into a future release of pdfTeX (if releases are
still planned)?

> And it's meaning is to expand completely its argument. E.g.:
> 
> \def\foo{\bar}
> \def\bar{bla}
> \immediate\write17{\unexpanded\expandafter{\expanded{\foo\foo}}}
> 
> prints "blabla".
> 
Yep, I know, I was about to use it in a fctt thread to propose an alternative
solution to yours, when I stupidly wanted to test my code (now I know why I
don't usually do it: it only brings new problems) and noticed that.

Manuel.

From st_philipp at yahoo.de  Fri May 27 12:58:57 2011
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Fri, 27 May 2011 12:58:57 +0200
Subject: [lltx] \expanded: a pdfTeX primitive?
In-Reply-To: <4DDF81D3.5060504@elzevir.fr>
References: <4DDF7A3D.9050309@elzevir.fr> <4DDF7B91.4050006@free.fr>
 <4DDF81D3.5060504@elzevir.fr>
Message-ID: <634C4BB5-BDC1-49EE-B21E-6448D83F7EE9@yahoo.de>


Am 27.05.2011 um 12:49 schrieb Manuel P?gouri?-Gonnard:

> Le 27/05/2011 12:23, Paul Isambert a ?crit :
>> If I remember correctly, \expanded is a pdfTeX primitive... that never 
>> made it to pdfTeX, hence its absence in the manual.
> 
> Then isn't that a bit weird that it's listed as a pdfTeX primitive? Or is it
> planned to finally make it into a future release of pdfTeX (if releases are
> still planned)?

I think it is planned for pdfTeX 1.50.4. See e.g. section 1.2 of the etexcmds package manual.

From mpg at elzevir.fr  Fri May 27 13:03:32 2011
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 27 May 2011 13:03:32 +0200
Subject: [lltx] \expanded: a pdfTeX primitive?
In-Reply-To: <634C4BB5-BDC1-49EE-B21E-6448D83F7EE9@yahoo.de>
References: <4DDF7A3D.9050309@elzevir.fr> <4DDF7B91.4050006@free.fr>
 <4DDF81D3.5060504@elzevir.fr> <634C4BB5-BDC1-49EE-B21E-6448D83F7EE9@yahoo.de>
Message-ID: <4DDF8504.5020803@elzevir.fr>

Le 27/05/2011 12:58, Philipp Stephani a ?crit :
> 
> Am 27.05.2011 um 12:49 schrieb Manuel P?gouri?-Gonnard:
> 
>> Then isn't that a bit weird that it's listed as a pdfTeX primitive? Or is it
>> planned to finally make it into a future release of pdfTeX (if releases are
>> still planned)?
> 
> I think it is planned for pdfTeX 1.50.4. See e.g. section 1.2 of the etexcmds
> package manual.

Thanks for the info. So I guess it makes sense to list it as a pdfTeX primitive
indeed.

Manuel.

PS: I meant to discuss this on the luatex list, first msg sent here by mistake.
Anyway, now that I got an answer, I guess it's not worth resending it to the
right list.

From mailing_list at arcor.de  Fri May 27 17:33:37 2011
From: mailing_list at arcor.de (Stephan Hennig)
Date: Fri, 27 May 2011 17:33:37 +0200
Subject: [lltx] wrong hyphenation in four-letter word
In-Reply-To: <4DC943BE.60902@arcor.de>
References: <4DC943BE.60902@arcor.de>
Message-ID: <4DDFC451.9000306@arcor.de>

schrieb Stephan Hennig:

> I'm observing a wrong hyphenation of a four-letter word with lualatex
> and German hyphenation patterns.

According to Akira the problem seems to be VS 2003.  There are now
binaries compiled with a newer VS version in tlcontrib that work OK for me.

Best regards,
Stephan Hennig

From heiko.oberdiek at googlemail.com  Sat May 28 11:02:50 2011
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Sat, 28 May 2011 11:02:50 +0200
Subject: [lltx] \expanded: a pdfTeX primitive?
In-Reply-To: <634C4BB5-BDC1-49EE-B21E-6448D83F7EE9@yahoo.de>
References: <4DDF7A3D.9050309@elzevir.fr> <4DDF7B91.4050006@free.fr>
 <4DDF81D3.5060504@elzevir.fr>
 <634C4BB5-BDC1-49EE-B21E-6448D83F7EE9@yahoo.de>
Message-ID: <20110528090250.GA2849@oberdiek.my-fqdn.de>

On Fri, May 27, 2011 at 12:58:57PM +0200, Philipp Stephani wrote:

> 
> Am 27.05.2011 um 12:49 schrieb Manuel P?gouri?-Gonnard:
> 
> > Le 27/05/2011 12:23, Paul Isambert a ?crit :
> >> If I remember correctly, \expanded is a pdfTeX primitive... that never 
> >> made it to pdfTeX, hence its absence in the manual.
> > 
> > Then isn't that a bit weird that it's listed as a pdfTeX primitive? Or is it
> > planned to finally make it into a future release of pdfTeX (if releases are
> > still planned)?
> 
> I think it is planned for pdfTeX 1.50.4. See e.g. section 1.2 of the etexcmds package manual.

AFAIK it's 1.50, I have fixed it in etexcmds (s/1.50.4/1.50/).
Sorry, I don't have the time to find the source of this right now.

Yours sincerely
  Heiko Oberdiek

