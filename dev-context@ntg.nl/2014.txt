From taco at elvenkind.com  Mon Jan 13 14:36:56 2014
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 13 Jan 2014 14:36:56 +0100
Subject: [dev-context] Luatex 0.78.2 announcement
Message-ID: <52D3EBF8.8030002@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.78.2.
This release merges some experimental branches, and fixes a few of the 
outstanding bugs.

Changes:

* Extended lua fontloader's info() function to include data
   from the 'pfminfo' and 'names' structure.

* Removed a recent extension in the lua fontloader library that
   made loading fonts with lots of glyphs slow (ArialUnicoce.ttf).
   Note: the extension made sure that there were no duplicate
   glyph names in the font after loading.

* Restored --recorder output for lua files (dofile/loadfile/io.open)

* One-at-a-time pattern adding from lua used to require enormous
   amounts of memory

* luatex's fontloader.to_table() no longer reports 'altuni' table
   information for alternates that are solely driven by the font
   encoding. This fixes loading time issues for fonts that fill
   encodings by copying a single glyph many times, like e.g.
   LastResort.ttf from Apple.

* The datestamp no longer appears in any banners. The associated
   \luatexdatestamp primitive is deprecated and will be removed
   in 0.80.0.

* Synchronization with the TeXLive sources updated the following
   libraries:
   * cairo is now 1.12.16
   * pixman is now 0.32.4
   * lua is now 5.2.3
   * zlib is now 1.2.8
   * poppler is now 0.25.0

* That same TL synchronization also fixes these issues:
   * Always write "\nendstream" to the PDF for PDF/A-1b compliance.
   * Large file support (>4GB) in Lua
   * Big images could overflow on systems where sizeof(long)=4.
   * In writing CID CFF fonts to the PDF, and end_dict() was missing.
   * Unknown 'post' table versions (found in some broken ttf/otf
     fonts) are now treated as-if they specified version 3.0.
   * Fix crashes on 32-bit systems caused by bad C header inclusion
     order
   * Handle '--luac' and '--luaconly' properly
   * luatex is now released under GPLv2+, not just GPLv2.
   * luatex can now find .ofm metric files even if the extension
     is not given explicitly.

* node.unset_attribute() was broken in 0.78.0

* The UTF-8 commandline patch from 0.78.0 for Win32 was removed
   again (did not work properly)


The archives can be downloaded from supelec as usual:

         https://foundry.supelec.fr/projects/luatex/

You could also check out the sources via anonymous svn:

   svn co --username anonsvn --password anonsvn              \
       https://foundry.supelec.fr/svn/luatex/tags/beta-0.78.2

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org

Have fun,

Taco

From schuster.wolfgang at gmail.com  Wed Feb  5 16:00:30 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Wed, 5 Feb 2014 16:00:30 +0100
Subject: [dev-context] math-fen.mkiv
Message-ID: <3447511C-F18D-4816-A24C-025FE4F304F8@gmail.com>

Hi,

-\definemathfence [mirrorednothing]     [mirorred]
+\definemathfence [mirrorednothing]     [mirrored]

Wolfgang

From schuster.wolfgang at gmail.com  Wed Feb  5 16:02:14 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Wed, 5 Feb 2014 16:02:14 +0100
Subject: [dev-context] page-strc.mkiv
Message-ID: <C3FF403A-469E-4A36-8DF8-2E83E050A8AB@gmail.com>

Hi,

the line

  \writestatus{loading}{ConTeXt Page Macros / Page Streams}

appears twice (line 14 and line 32) in the file.

Wolfgang

From schuster.wolfgang at gmail.com  Wed Feb  5 16:19:55 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Wed, 5 Feb 2014 16:19:55 +0100
Subject: [dev-context] file-job.mkvi
Message-ID: <D061EDB1-CC20-46E2-9937-69089D692D66@gmail.com>

Hi,

The line 277 with

  \newtoks\everysetupdocument

can be remove because the register \everysetupdocument is defined previously in core-ini.mkiv.

Wolfgang

From schuster.wolfgang at gmail.com  Wed Feb  5 16:24:27 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Wed, 5 Feb 2014 16:24:27 +0100
Subject: [dev-context] font-pat.lua
Message-ID: <E1C235AF-F911-499D-AAFA-02D4890CD95D@gmail.com>

Hi,

the file font-pat.lua isn?t loaded because of an error.

system          > lua > loading of file '/Users/wolf/context/beta/tex/texmf-context/tex/context/base/font-pat.lua' failed:
	...ext/beta/tex/texmf-context/tex/context/base/font-pat.lua:41: '(' expected near 'patch'
<- /Users/wolf/context/beta/tex/texmf-context/tex/context/base/font-pat.lua>

Wolfgang

From schuster.wolfgang at gmail.com  Sun Feb  9 21:30:09 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Sun, 9 Feb 2014 21:30:09 +0100
Subject: [dev-context] \blank problems when gridsnapping is enabled
Message-ID: <D87661B5-FC70-41FC-B24A-D39282D88183@gmail.com>

Hi,

the samepage option for the \blank command doesn?t work when the grid is used.

%\setuplayout[grid=yes,lines=10]
\setuplayout[lines=10]

\showgrid

\starttext
\dontleavehmode\blank[fixed,8*line]
text
\blank[samepage,line]
text
\stoptext

Wolfgang

From schuster.wolfgang at gmail.com  Sun Mar  2 12:03:44 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Sun, 2 Mar 2014 12:03:44 +0100
Subject: [dev-context] file-job.mkvi: \startproject
Message-ID: <7331422F-EDDF-49CE-B5EB-1E6E1144233A@gmail.com>

Hi,

shouldn?t the \starttext and \stoptext calls be removed from \startproject and \stopproject?

\unexpanded\def\startprojectindeed
  {\starttext
   \pushsystemmode\v!project
   \setsystemmode\v!project}

\unexpanded\def\stopprojectindeed
  {\popsystemmode\v!project
   \stoptext
   \signalendofinput\v!project}


When you have a document in this form

    <example>
    \project[myproject]
    
    \startprodct[myproduct]
    
    ?
    
    \stoproduct
    </example>

you won?t get a pdf file because the project file closes the document with its \stoptext call.

Wolfgang

From taco at docwolves.nl  Tue Mar 11 12:34:47 2014
From: taco at docwolves.nl (Taco Hoekwater)
Date: Tue, 11 Mar 2014 12:34:47 +0100
Subject: [dev-context] MetaPost 1.890 announcement
Message-ID: <96D07A45-DE43-46DC-9E2D-6201D1F7ACE0@docwolves.nl>


I am happy to announce a new release of MetaPost:

----------------------------------------------------------------------
MetaPost 1.890
----------------------------------------------------------------------

This is a preliminary release in preparation for TeX Live 2014. It is main new
feature is the promised ?decimal? number system that is now operational (but has 
not been tested extensively yet). Also, some of the open bugs have been fixed.

A source archive can be downloaded from the files section at

 https://foundry.supelec.fr/projects/metapost/

You can also do an anonymous subversion checkout:

 $ svn checkout --username anonsvn https://foundry.supelec.fr/svn/metapost/tags/1.890

The password is anonsvn

I am no longer able to cross-compile for Win32, so Windows users will have to wait
for Akira Kakuto and/or Mojca Miklavec?s binaries.

----------------------------------------------------------------------
What is new in MetaPost version 1.890:
----------------------------------------------------------------------
* The numbersystem 'decimal' is now operational.

* New internal: 'numberprecision', for use with 'the 'decimal' number
  system. The (numeric) value expresses the desired calculation precision, 
  in decimal places.

  system  default   min    max
  ============================
  scaled       10    10     10  (assignment effectively ignored)
  double       16    16     16  (assignment effectively ignored)
  decimal      34     1   1000 

* Bug fix: in the 'double' numbersystem, 

    if X = scantokens decimal X:

  will now always be true, because the 'decimal' operator now has 
  the same resolution as the scanning routine (which is two decimal
  places more than in the previous release).

* Fixed a bug in the handling of the / operator (wrong precendence).
 
* Fixed a bug in arctime (did not handle negative values currectly).

* Fixed TFM generation issues (various scale-related errors).

* Fixed application crashes when there was no TEXMF tree to be found
  anywhere.

* It is no longer possible to assign to the 'numbersystem' internal.

* There is a new definition of 'drawdot' in plain.mp.

* PNG output did not output anything for draws of a single point.

* Metapost now prints the full name of any preloaded files.

* Fixed a bug in the handling of labels with embedded ascii zero(es).

* Fixed handling of unknown command-line options, the reporting
  on used libraries in the --version output, and the banner line.


Have fun!


Taco Hoekwater, for the MetaPost team, March 11, 2014 


From taco at docwolves.nl  Thu Mar 27 10:56:25 2014
From: taco at docwolves.nl (Taco Hoekwater)
Date: Thu, 27 Mar 2014 10:56:25 +0100
Subject: [dev-context] MetaPost 1.900 announcement
Message-ID: <276C022B-0074-470A-A5C1-6FC0BCB309C1@docwolves.nl>


I am happy to announce a new release of MetaPost:

----------------------------------------------------------------------
MetaPost 1.900
???????????????????????????????????

This is the release for TeX Live 2014. This standalone release now includes the
various embedded library updates that happened in TeX Live since the TL2013 release.

A source archive can be downloaded from the files section at

https://foundry.supelec.fr/projects/metapost/

You can also do an anonymous subversion checkout:

$ svn checkout --username anonsvn https://foundry.supelec.fr/svn/metapost/tags/1.900

The password is anonsvn

I am no longer able to cross-compile for Win32, so Windows users will have to wait
for Akira Kakuto and/or Mojca Miklavec?s binaries.

----------------------------------------------------------------------
What is new in MetaPost version 1.900:
???????????????????????????????????

* Updated the embedded libraries, and a few build system fixes.

Have fun!

Taco Hoekwater, for the MetaPost team, March 27, 2014 


From schuster.wolfgang at gmail.com  Thu Mar 27 20:14:09 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Thu, 27 Mar 2014 20:14:09 +0100
Subject: [dev-context] \blank problems when gridsnapping is enabled
In-Reply-To: <D87661B5-FC70-41FC-B24A-D39282D88183@gmail.com>
References: <D87661B5-FC70-41FC-B24A-D39282D88183@gmail.com>
Message-ID: <CD175249-E721-4317-8FE9-824D57AD3958@gmail.com>

Hi,

is there a fix for this problem.

Wolfgang

Am 09.02.2014 um 21:30 schrieb Wolfgang Schuster <schuster.wolfgang at gmail.com>:

> Hi,
> 
> the samepage option for the \blank command doesn?t work when the grid is used.
> 
> %\setuplayout[grid=yes,lines=10]
> \setuplayout[lines=10]
> 
> \showgrid
> 
> \starttext
> \dontleavehmode\blank[fixed,8*line]
> text
> \blank[samepage,line]
> text
> \stoptext
> 
> Wolfgang


From pragma at wxs.nl  Thu Mar 27 21:30:17 2014
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 27 Mar 2014 21:30:17 +0100
Subject: [dev-context] \blank problems when gridsnapping is enabled
In-Reply-To: <CD175249-E721-4317-8FE9-824D57AD3958@gmail.com>
References: <D87661B5-FC70-41FC-B24A-D39282D88183@gmail.com>
 <CD175249-E721-4317-8FE9-824D57AD3958@gmail.com>
Message-ID: <53348A59.1050700@wxs.nl>

On 3/27/2014 8:14 PM, Wolfgang Schuster wrote:
> Hi,
>
> is there a fix for this problem.
>
> Wolfgang
>
> Am 09.02.2014 um 21:30 schrieb Wolfgang Schuster <schuster.wolfgang at gmail.com>:
>
>> Hi,
>>
>> the samepage option for the \blank command doesn?t work when the grid is used.
>>
>> %\setuplayout[grid=yes,lines=10]
>> \setuplayout[lines=10]
>>
>> \showgrid
>>
>> \starttext
>> \dontleavehmode\blank[fixed,8*line]
>> text
>> \blank[samepage,line]
>> text
>> \stoptext
>>
>> Wolfgang

8 + 1 + 1 + 1 = 13 so the three lines won't fit and move


-- 

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From schuster.wolfgang at gmail.com  Fri Mar 28 06:48:11 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Fri, 28 Mar 2014 06:48:11 +0100
Subject: [dev-context] \blank problems when gridsnapping is enabled
In-Reply-To: <53348A59.1050700@wxs.nl>
References: <D87661B5-FC70-41FC-B24A-D39282D88183@gmail.com>
 <CD175249-E721-4317-8FE9-824D57AD3958@gmail.com> <53348A59.1050700@wxs.nl>
Message-ID: <1BBBD330-1955-43AD-BC7E-10EEB9FA1873@gmail.com>


Am 27.03.2014 um 21:30 schrieb Hans Hagen <pragma at wxs.nl>:

> On 3/27/2014 8:14 PM, Wolfgang Schuster wrote:
>> Hi,
>> 
>> is there a fix for this problem.
>> 
>> Wolfgang
>> 
>> Am 09.02.2014 um 21:30 schrieb Wolfgang Schuster <schuster.wolfgang at gmail.com>:
>> 
>>> Hi,
>>> 
>>> the samepage option for the \blank command doesn?t work when the grid is used.
>>> 
>>> %\setuplayout[grid=yes,lines=10]
>>> \setuplayout[lines=10]
>>> 
>>> \showgrid
>>> 
>>> \starttext
>>> \dontleavehmode\blank[fixed,8*line]
>>> text
>>> \blank[samepage,line]
>>> text
>>> \stoptext
>>> 
>>> Wolfgang
> 
> 8 + 1 + 1 + 1 = 13 so the three lines won't fit and move


This isn?t the case when you enable the grid.

\setuplayout[grid=yes,lines=10]

\showgrid

\starttext
\dontleavehmode\blank[fixed,8*line]
text
\blank[samepage,line]
text
\stoptext

Wolfgang

From taco at elvenkind.com  Fri Mar 28 16:43:21 2014
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 28 Mar 2014 16:43:21 +0100
Subject: [dev-context] Luatex 0.79.0 announcement
Message-ID: <53359899.6050709@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.79.0.
This fixes a few of the outstanding bugs, and is the version that
will be included in TeXLive 2014.

Changes:

* The luafontloader now returns 'tsidebearing' glyph values
   for OT/TT fonts, if applicable.

* new lua variables: stats.luatex_hashtype, stats.luatex_hashchars,
   stats.lastluaerrorstring; the luajittex string hash method is now
   lua 5.1 compliant which gives better results for similar strings

* new lua functions: tex.init_rand(), tex.uniform_rand(),
   tex.normal_rand(), tex.lua_math_randomseed(), tex.lua_math_random(),
   tex.show_context(); these helpers make luatex and luajittex compatible

* In the lua node interface, there were often issues with rubbish
   in (especially) 'prev' fields because luatex itself never looks
   at those values. This is now cleaned up to prevent weird stuff
   happening inside lua node processing code.

* pdf.pageattributes, pdf.pagesattributes, pdf.info, pdf.catalog,
   pdf.names and pdf.trailer now behave consistent and can be used
   to add these properties at the lua end in addition to their \pdf*
   counterparts atthe tex end; there are now pdf.get* and pdf.set*
   commands for them too (in future versions the old ways can become
   obsolete)

* new accessors pdf.geth, pdfgetv, pdfgetpos, getgetmatrix as well
   as pdfhasmatrix helpers (in future versions the direct pdf.h and
   pdf.v accessor can become obsolete)

* the pdf.pdf* variables have been removed (they were already
   obsolete for some years)

* a new properties mechanism for associating lua tables with nodes
   that get cleaned up when nodes a freed (see manual for details)

* several improvements to the way temporary (backend) data is stored
   at the lua end (better protection, more consistent)

* a 'l' type for user nodes that holds a lua variable (can be set
   at the lua end)

* if a late lua node is set at the lua end the string value can be
   a function as well which is then executed during serialization to
   the backend stream

* Various small speedups

* Various smallish fixes to the node direct interface

* LPeg is now at version 0.12

* Some small fixes to the CFF (font) parsing

* Font file inclusion reporting messages on the terminal now
   comply to the texconfig.trace_file_names setting

* Removed some of the additional luafontloader.info() return
   information that was added in 0.78.2, but could not work
   properly.

* new primitive \luafunction (see manual), with associated
   lua.get_functions_table() function

* lua error message reporting has been altered a bit to make
   the distinction between \directlua and other lua source code
   sources clearer

* Additional pdf document data functionality in the 'pdf' table
   has been cleaned up internally

* Additional pdf destination names can now be set via lua.

* New callbacks: finish_pdfpage, show_error_message,
   show_lua_error_hook, start_file, stop_file

* Handling of \tracinglostchars is fixed

* Embedded metapost library version is now 1.900

* luajittex is now included in the distribution. One can use
   buildjit.sh to build both luatex and luajittex, where
   supported by the platform

* Synchronization with the TeXLive sources updated the following
   libraries:
   * libpng is now 1.6.10
   * poppler is now 0.25.2


The archives can be downloaded from supelec as usual:

         https://foundry.supelec.fr/projects/luatex/

You could also check out the sources via anonymous svn:

   svn co --username anonsvn --password anonsvn              \
       https://foundry.supelec.fr/svn/luatex/tags/beta-0.79.0

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org

Have fun,

Taco

From taco at elvenkind.com  Sat Mar 29 10:01:06 2014
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 29 Mar 2014 10:01:06 +0100
Subject: [dev-context] Luatex 0.79.1 announcement
Message-ID: <53368BD2.7020307@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.79.1.

Changes:

* Fixed a bug that caused crashes if pdf.info was not set.

* The top-level build scripts have been merged again, use
     build.sh --jit
   to build luajittex as well as luatex itself

The archives can be downloaded from supelec as usual:

         https://foundry.supelec.fr/projects/luatex/

You could also check out the sources via anonymous svn:

   svn co --username anonsvn --password anonsvn              \
       https://foundry.supelec.fr/svn/luatex/tags/beta-0.79.1

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org

Have fun,

Taco

From taco at docwolves.nl  Wed Apr  9 11:57:52 2014
From: taco at docwolves.nl (Taco Hoekwater)
Date: Wed, 09 Apr 2014 11:57:52 +0200
Subject: [dev-context] MetaPost 1.901 announcement
Message-ID: <534519A0.8080709@docwolves.nl>


I am happy to announce a new release of MetaPost:

----------------------------------------------------------------------
MetaPost 1.901
----------------------------------------------------------------------

This is still the release for TeX Live 2014, just adding some bug fixes.

A source archive can be downloaded from the files section at

https://foundry.supelec.fr/projects/metapost/

You can also do an anonymous subversion checkout:

$ svn checkout --username anonsvn 
https://foundry.supelec.fr/svn/metapost/tags/1.901

The password is anonsvn

----------------------------------------------------------------------
What is new in MetaPost version 1.901:
----------------------------------------------------------------------

* Fixed a bug in 'decimal' mode that affected (among other things)
   the directionpoint and bbox calculations.

* Fixed a bug in 'decimal' mode calculation of sine / cosine that
   affected the precision of the answer in situations where
   'numberprecision' was less than 34.

* Updated the number parsing in 'decimal' mode to detect 'too precise'
   input and optionally generate an error in that case (depends on
   'warningcheck')

* Fixed a bug in the svg output where it could crash in 'decimal' mode.

* Fixed a bug in the png output where it could get confused if there
   was more than one text label

* Fixed a bug in the png output for stroked paths


Have fun!

Taco Hoekwater, for the MetaPost team, April 9, 2014


From taco at elvenkind.com  Wed Apr  9 12:12:51 2014
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 09 Apr 2014 12:12:51 +0200
Subject: [dev-context] MetaPost 1.999 announcement
Message-ID: <53451D23.2080101@elvenkind.com>


I am happy to announce a new (and my final) release of MetaPost:

----------------------------------------------------------------------
MetaPost 1.999
----------------------------------------------------------------------

This is the pre-release for Metapost 2.000. The only functional
difference between this version and 1.901 is the addition of the
'binary' numbersystem.

This version will *not* be included in TL2014, for two reasons:

* integration of the required GMP & MPFR libraries into the texlive
   build system is not trivial, and is better postponed until after
   the current TL release.

* Not a lot of testing has been done yet.

A source archive can be downloaded from the files section at

https://foundry.supelec.fr/projects/metapost/

You can also do an anonymous subversion checkout:

$ svn checkout --username anonsvn 
https://foundry.supelec.fr/svn/metapost/tags/1.999

The password is anonsvn

----------------------------------------------------------------------
What is new in MetaPost version 1.999:
----------------------------------------------------------------------

* The numbersystem 'binary' is now operational.

For the last time from me:

Have fun!

Taco Hoekwater, for the MetaPost team, April 9, 2014


From schuster.wolfgang at gmail.com  Tue Apr 22 01:33:46 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Tue, 22 Apr 2014 01:33:46 +0200
Subject: [dev-context] meta-ini.mkiv: \setupMPgraphics
Message-ID: <CBE49637-7FF1-4E6A-BAE1-0478AA50E856@gmail.com>

Hi,

when you use the \setupMPgraphics command in a document, e.g.

    \setupMPgraphics[]

    \starttext
    \stoptext

the following error message appears:

    lua error       > error on line 1 in file /Users/wolf/TeX/test.tex:

    [\directlua]:1: decimal escape too large near '\457?


The reason for this is the use of \directMPgraphicsparameter which expands to \relax in the following block (can be found at the end of meta-ini.mkiv):

\appendtoks
    \edef\p_mpy{\directMPgraphicsparameter{mpy}}%
    \ifx\p_mpy\empty \else
      \let\MPdataMPYfile\p_mpy
      \ctxlua{metapost.makempy.registerfile("\p_mpy")}%
    \fi
\to \everysetupMPgraphics


Wolfgang

From taco at docwolves.nl  Wed Apr 23 09:21:22 2014
From: taco at docwolves.nl (Taco Hoekwater)
Date: Wed, 23 Apr 2014 09:21:22 +0200
Subject: [dev-context] MetaPost 1.902 announcement
Message-ID: <E6FA118E-8D3D-4A48-9EBE-5AE228288747@docwolves.nl>


I am happy to announce a new release of MetaPost:

----------------------------------------------------------------------
MetaPost 1.902
----------------------------------------------------------------------

This is still the release for TeX Live 2014, adding a single bug fix for a crash 
in the ?decimal? processing of PostScript label output, discovered yesterday.

A source archive can be downloaded from the files section at

https://foundry.supelec.fr/projects/metapost/

You can also do an anonymous subversion checkout:

$ svn checkout --username anonsvn https://foundry.supelec.fr/svn/metapost/tags/1.902

The password is anonsvn

Have fun!

Taco Hoekwater, April 23, 2014


From schuster.wolfgang at gmail.com  Wed Apr 23 12:18:07 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Wed, 23 Apr 2014 12:18:07 +0200
Subject: [dev-context] lpdf-wid.lua
Message-ID: <EB63D31C-E9CA-448E-82C3-2BD82A2082BB@gmail.com>

Hi,

local attachment_symbols = {
-   Graph     = pdfconstant("GraphPushPin"),
-   Paperclip = pdfconstant("PaperclipTag"),
+   Graph     = pdfconstant("Graph"),
+   Paperclip = pdfconstant("Paperclip"),
    Pushpin   = pdfconstant("PushPin"),
}

Wolfgang

From schuster.wolfgang at gmail.com  Fri May  2 13:45:03 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Fri, 2 May 2014 13:45:03 +0200
Subject: [dev-context] Fake bold math fails sometimes
Message-ID: <3C9F33F9-5B96-4316-99F8-84BFA1DA76E2@gmail.com>

Hi,

when a formula as with bold text context switches sometimes to the wrong alphabet, e.g. in this example

    \starttext
    {\bf 3 $3$}
    \stoptext

context shows sometimes (you have to run the example a few times until it shows up) a sansserif bold 3 instead of a normal bold 3.


The minimal example below shows this happens when the \mathfamilyattribute has the value 6, 7 or 8:

\setupbodyfont[xits]

\unprotected\def\font_helpers_synchronize_math_family{}

\enabletrackers[math.families]

\starttext

0: {\bf 3 $ \attribute\mathfamilyattribute\zerocount 3 $}

1: {\bf 3 $ \attribute\mathfamilyattribute\plusone   3 $}

2: {\bf 3 $ \attribute\mathfamilyattribute\plustwo   3 $}

3: {\bf 3 $ \attribute\mathfamilyattribute\plusthree 3 $}

4: {\bf 3 $ \attribute\mathfamilyattribute\plusfour  3 $}

5: {\bf 3 $ \attribute\mathfamilyattribute\plusfive  3 $}

6: {\bf 3 $ \attribute\mathfamilyattribute\plussix   3 $}

7: {\bf 3 $ \attribute\mathfamilyattribute\plusseven 3 $}

8: {\bf 3 $ \attribute\mathfamilyattribute\pluseight 3 $}

\stoptext

Wolfgang

From schuster.wolfgang at gmail.com  Fri May  2 13:54:49 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Fri, 2 May 2014 13:54:49 +0200
Subject: [dev-context] =?windows-1252?q?Sansserif_bold_in_math_doesn=92t_w?=
	=?windows-1252?q?ork?=
Message-ID: <768E5314-3FC0-43C2-A1F0-E2837216D5A0@gmail.com>

Hi,

there is a problem with sansserif bold numbers and letter in math mode. In the following example the bold content does sometimes show up in normal weight (you have to do several runs to see it):

    \starttext
    $\ss 3a \bf 3a$
    \stoptext


The problem can be tracked down to the \math_set_font_style (I used the \setmathfontstyle user level command) command:

\enabletrackers[math.remapping]

\starttext

1: $\setmathattribute{ss}{bf}3$

2: $\setmathattribute{ss}{bf}\setmathfontstylealterternate{bf}3$

3: $\setmathattribute{ss}{bf}\setmathfontstyle{bf}3$

4: $\setmathattribute{ss}{bf}\setmathfontstyle{bf}\setmathfontstylealterternate{bf}3$

5: $\setmathattribute{ss}{bf}\setmathfontstylealterternate{tf}\setmathfontstyle{bf}\setmathfontstylealterternate{bf}3$

\stoptext

Wolfgang

From schuster.wolfgang at gmail.com  Fri May  2 20:15:02 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Fri, 2 May 2014 20:15:02 +0200
Subject: [dev-context] tabl-tbl.mkiv
Message-ID: <788664C9-C89F-450C-B062-9ABF655305BB@gmail.com>

Hi,

the settings for the \c_tabl_tabulate_repeathead counter have to be global because they are currently set in a group and the split process for the table content happens after the group.

\def\tabl_tabulate_process
  {\c_tabl_tabulate_pass\plusone
   \tabl_tabulate_check_full_content
   ...
   \ifdone
-    \c_tabl_tabulate_repeathead\executeifdefined{\??tabulateheader\tabulationparameter\c!header}\zerocount
+    \global\c_tabl_tabulate_repeathead\executeifdefined{\??tabulateheader\tabulationparameter\c!header}\zerocount
   \else
-    \c_tabl_tabulate_repeathead\zerocount
+    \global\c_tabl_tabulate_repeathead\zerocount
   \fi
   ...
   \egroup} % whole thing

Wolfgang

From wolfgang.schuster at gmail.com  Sat May  3 12:39:51 2014
From: wolfgang.schuster at gmail.com (Wolfgang Schuster)
Date: Sat, 3 May 2014 12:39:51 +0200
Subject: [dev-context] core-con.mkiv
Message-ID: <364892A6-329A-4CFB-B6F7-DDBA9E9095F0@gmail.com>

Hi,

there is a extra ?cn? at the end of the following two conversion names which should be removed:

\defineconversion [chinesecapnumeralscn] [\chinesecapnumerals]
\defineconversion [chineseallnumeralscn] [\chineseallnumerals]

Wolfgang

From wolfgang.schuster at gmail.com  Wed May  7 18:51:09 2014
From: wolfgang.schuster at gmail.com (Wolfgang Schuster)
Date: Wed, 7 May 2014 18:51:09 +0200
Subject: [dev-context] tabl-tbl.mkiv
Message-ID: <BF4F66DB-0E20-4E5E-A0F7-BEAB35EC8944@gmail.com>

Hi,

as seen in the following example the first line of text in the table appears on all pages together with the header,
this happens because \NR inserts a \nobreak after the first line in the table.

\starttext

\setuptabulate[header=repeat]

\starttabulatehead
\NC A \NC B \NC\NR
\stoptabulatehead

\starttabulate[|l|l|]
\dorecurse{100}{\NC ##1 \NC ##1 \NC\NR}
\stoptabulate

\stoptext


To fix this a penalty setting after the header (which is only added when the header is repeated) content will help:

\def\tabl_tabulate_insert_content
  {\tabl_tabulate_insert_head
+  \ifcase\c_tabl_tabulate_repeathead \else
+    \tabulatenoalign{\penalty\zerocount}%
+  \fi
   \tabl_tabulate_insert_body
   \tabl_tabulate_insert_foot
   \tabl_tabulate_remove_funny_line}


BTW: I had to use \penalty because \directvpenalty doesn?t work.

Wolfgang

From pragma at wxs.nl  Thu May  8 11:26:01 2014
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 08 May 2014 11:26:01 +0200
Subject: [dev-context]
 =?windows-1252?q?Sansserif_bold_in_math_doesn=92t_w?=
 =?windows-1252?q?ork?=
In-Reply-To: <768E5314-3FC0-43C2-A1F0-E2837216D5A0@gmail.com>
References: <768E5314-3FC0-43C2-A1F0-E2837216D5A0@gmail.com>
Message-ID: <536B4DA9.7080000@wxs.nl>

On 5/2/2014 1:54 PM, Wolfgang Schuster wrote:
> Hi,
>
> there is a problem with sansserif bold numbers and letter in math mode. In the following example the bold content does sometimes show up in normal weight (you have to do several runs to see it):
>
>      \starttext
>      $\ss 3a \bf 3a$
>      \stoptext
>
>
> The problem can be tracked down to the \math_set_font_style (I used the \setmathfontstyle user level command) command:
>
> \enabletrackers[math.remapping]
>
> \starttext
>
> 1: $\setmathattribute{ss}{bf}3$
>
> 2: $\setmathattribute{ss}{bf}\setmathfontstylealterternate{bf}3$
>
> 3: $\setmathattribute{ss}{bf}\setmathfontstyle{bf}3$
>
> 4: $\setmathattribute{ss}{bf}\setmathfontstyle{bf}\setmathfontstylealterternate{bf}3$
>
> 5: $\setmathattribute{ss}{bf}\setmathfontstylealterternate{tf}\setmathfontstyle{bf}\setmathfontstylealterternate{bf}3$
>
> \stoptext

Hopefully fixed.

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From schuster.wolfgang at gmail.com  Wed Jun 25 10:50:49 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Wed, 25 Jun 2014 10:50:49 +0200
Subject: [dev-context] mkiv and \setupoutput
Message-ID: <BB4AA262-783A-4B4B-AFE5-3E3E88B10F66@gmail.com>

Hi Hans,

there was on TEX SE a question [1] with a problem for s-mag-01.tex.

The problem is the \setupoutput command in the file which doesn?t exist anymore in MkIV because there is only PDF as output format. Can you fix this by adding a dummy \setupoutput command or splitting s-mag-01.tex in MkII/MkIV files?

[1] http://tex.stackexchange.com/questions/186513/error-my-way-modules-at-context

Wolfgang

From pragma at wxs.nl  Wed Jun 25 22:07:41 2014
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 25 Jun 2014 22:07:41 +0200
Subject: [dev-context] mkiv and \setupoutput
In-Reply-To: <BB4AA262-783A-4B4B-AFE5-3E3E88B10F66@gmail.com>
References: <BB4AA262-783A-4B4B-AFE5-3E3E88B10F66@gmail.com>
Message-ID: <53AB2C0D.9010403@wxs.nl>

On 6/25/2014 10:50 AM, Wolfgang Schuster wrote:
> Hi Hans,
>
> there was on TEX SE a question [1] with a problem for s-mag-01.tex.
>
> The problem is the \setupoutput command in the file which doesn?t exist anymore in MkIV because there is only PDF as output format. Can you fix this by adding a dummy \setupoutput command or splitting s-mag-01.tex in MkII/MkIV files?

dummy added

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From luigi.scarso at gmail.com  Thu Jul  3 12:22:27 2014
From: luigi.scarso at gmail.com (luigi scarso)
Date: Thu, 3 Jul 2014 12:22:27 +0200
Subject: [dev-context] xml dc:description
Message-ID: <CAG5iGsAB7zyWXYN1_h=jVLK+r_1aVOqVFVFyW4mQ=V1AfjUnrw@mail.gmail.com>

--- lpdf-pda.xml.orig 2014-07-03 01:41:32.224851125 +0200
+++ lpdf-pda.xml 2014-07-03 01:43:40.268845741 +0200
@@ -11,7 +11,11 @@
                     <rdf:li/>
                 </rdf:Seq>
             </dc:creator>
-            <dc:description/>
+            <dc:description>
+                 <rdf:Alt>
+                  <rdf:li xml:lang="x-default"/>
+                 </rdf:Alt>
+            </dc:description>
             <dc:title>
                 <rdf:Alt>
                     <rdf:li xml:lang="x-default"/>

--- lpdf-pdx.xml.orig 2014-07-03 01:41:38.284850871 +0200
+++ lpdf-pdx.xml 2014-07-03 01:46:07.452839551 +0200
@@ -11,7 +11,11 @@
                     <rdf:li/>
                 </rdf:Seq>
             </dc:creator>
-            <dc:description/>
+            <dc:description>
+                <rdf:Alt>
+                    <rdf:li xml:lang="x-default"/>
+                </rdf:Alt>
+            </dc:description>
             <dc:title>
                 <rdf:Alt>
                     <rdf:li xml:lang="x-default"/>

--- lpdf-xmp.lua.orig 2014-07-03 12:19:37.283241070 +0200
+++ lpdf-xmp.lua 2014-07-03 12:19:45.915240707 +0200
@@ -50,7 +50,7 @@
     -- Dublin Core schema
     ["Author"]          = "rdf:Description/dc:creator/rdf:Seq/rdf:li",
     ["Format"]          = "rdf:Description/dc:format", -- optional, but
nice to have
-    ["Subject"]         = "rdf:Description/dc:description",
+    ["Subject"]         = "rdf:Description/dc:description/rdf:Alt/rdf:li",
     ["Title"]           = "rdf:Description/dc:title/rdf:Alt/rdf:li",
     -- XMP Basic schema
     ["CreateDate"]      = "rdf:Description/xmp:CreateDate",


checked with acrobat pro trial xi, it's ok.

-- 
luigi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ntg.nl/pipermail/dev-context/attachments/20140703/329c9fc8/attachment.html>

From alan.braslau at cea.fr  Mon Jul  7 15:58:19 2014
From: alan.braslau at cea.fr (Alan BRASLAU)
Date: Mon, 7 Jul 2014 15:58:19 +0200
Subject: [dev-context] page-lay.mkiv (business card layouts)
Message-ID: <20140707155819.49192f97@iram-ha-003840.extra.cea.fr>

$ diff page-lay.mkiv.new page-lay.mkiv
1494,1498d1493
< %D Business cards:
< 
< \definepapersize [business]   [\c!width=85mm,\c!height=55mm]
< \definepapersize [businessUS] [\c!width=3.5in,\c!height=2in]
< 


-- 
Alan Braslau
CEA DSM-IRAMIS-SPEC
CNRS URA 2464
Orme des Merisiers
91191 Gif-sur-Yvette cedex FRANCE
tel: +33 1 69 08 73 15
fax: +33 1 69 08 87 86
mailto:alan.braslau at cea.fr

From alan.braslau at cea.fr  Mon Jul  7 16:06:40 2014
From: alan.braslau at cea.fr (Alan BRASLAU)
Date: Mon, 7 Jul 2014 16:06:40 +0200
Subject: [dev-context] [PROVENANCE INTERNET] page-lay.mkiv (business
 card layouts)
In-Reply-To: <40794_1404741530_53BAA79A_40794_9073_1_20140707155819.49192f97@iram-ha-003840.extra.cea.fr>
References: <40794_1404741530_53BAA79A_40794_9073_1_20140707155819.49192f97@iram-ha-003840.extra.cea.fr>
Message-ID: <20140707160640.5241c5c2@iram-ha-003840.extra.cea.fr>

On Mon, 7 Jul 2014 15:58:19 +0200
Alan BRASLAU <alan.braslau at cea.fr> wrote:

> $ diff page-lay.mkiv.new page-lay.mkiv
> 1494,1498d1493
> < %D Business cards:
> < 
> < \definepapersize [business]   [\c!width=85mm,\c!height=55mm]
> < \definepapersize [businessUS] [\c!width=3.5in,\c!height=2in]
> < 
> 
> 

In fact, we should probably swap the width and height so that
\usepapersize[business,landscape]
will work as expected.

Alan

-- 
Alan Braslau
CEA DSM-IRAMIS-SPEC
CNRS URA 2464
Orme des Merisiers
91191 Gif-sur-Yvette cedex FRANCE
tel: +33 1 69 08 73 15
fax: +33 1 69 08 87 86
mailto:alan.braslau at cea.fr

From pragma at wxs.nl  Mon Jul  7 16:58:46 2014
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 07 Jul 2014 16:58:46 +0200
Subject: [dev-context] [PROVENANCE INTERNET] page-lay.mkiv (business
 card layouts)
In-Reply-To: <20140707160640.5241c5c2@iram-ha-003840.extra.cea.fr>
References: <40794_1404741530_53BAA79A_40794_9073_1_20140707155819.49192f97@iram-ha-003840.extra.cea.fr>
 <20140707160640.5241c5c2@iram-ha-003840.extra.cea.fr>
Message-ID: <53BAB5A6.7060603@wxs.nl>

On 7/7/2014 4:06 PM, Alan BRASLAU wrote:
> On Mon, 7 Jul 2014 15:58:19 +0200
> Alan BRASLAU <alan.braslau at cea.fr> wrote:
>
>> $ diff page-lay.mkiv.new page-lay.mkiv
>> 1494,1498d1493
>> < %D Business cards:
>> <
>> < \definepapersize [business]   [\c!width=85mm,\c!height=55mm]
>> < \definepapersize [businessUS] [\c!width=3.5in,\c!height=2in]
>> <
>>
>>
>
> In fact, we should probably swap the width and height so that
> \usepapersize[business,landscape]
> will work as expected.

\setuppapersize
   [business][A4]

\setuplayout
   [nx=2,ny=5,dx=10mm,y=5mm,location=middle]

\showframe

\starttext

\startstandardmakeup
     Alan Braslau\\
     Unites States of Europe
\stopstandardmakeup

\stoptext

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From schuster.wolfgang at gmail.com  Sun Jul 20 22:00:25 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Sun, 20 Jul 2014 22:00:25 +0200
Subject: [dev-context] \setuppagenumbering
Message-ID: <2E860B51-B193-4B6E-B49A-C713A3AB2A62@gmail.com>

Hi,

can the \setuppagenumbering command to be extended to ?location=none? besides ?location=? to disable the pagenumber?

\unexpanded\def\strc_pagenumbers_set_location
  {\edef\p_strc_pagenumbers_location{\directpagenumberingparameter\c!location}%
   \ifx\p_strc_pagenumbers_location\m_page_layouts_page_number_location
      % unchanged
   \else
     \let\m_page_layouts_page_number_location\p_strc_pagenumbers_location
     \page_layouts_reset_page_number_location
     \ifx\p_strc_pagenumbers_location\empty
       % set otherwise
-    \else
+    \else\ifx\p_strc_pagenumbers_location\v!none
+      % set otherwise
+    \else
       \page_layouts_identify_page_number_location
       \page_layouts_set_page_number_location
-    \fi
+    \fi\fi
   \fi}

Wolfgang

From luigi.scarso at gmail.com  Mon Jul 21 00:53:43 2014
From: luigi.scarso at gmail.com (luigi scarso)
Date: Mon, 21 Jul 2014 00:53:43 +0200
Subject: [dev-context] lpdf-tag.lua
Message-ID: <CAG5iGsDBfpUES_49N7d=899HUL0kJfHqvJN53hXcD6KGe9jxRw@mail.gmail.com>

--- lpdf-tag.lua.orig 2014-07-21 00:50:10.548623199 +0200
+++ lpdf-tag.lua 2014-07-21 00:48:50.564626563 +0200
@@ -64,7 +64,7 @@
 local setfield            = nuts.setfield

 local traverse_nodes      = nuts.traverse
-local tosequence          = nuts.tosequence
+local tosequence          = nodes.tosequence
 local copy_node           = nuts.copy
 local slide_nodelist      = nuts.slide
 local insert_before       = nuts.insert_before

I don't see signs of nuts.tosequence elsewhere

-- 
luigi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ntg.nl/pipermail/dev-context/attachments/20140721/0dfc14ac/attachment.html>

From pragma at wxs.nl  Mon Jul 21 11:14:49 2014
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 21 Jul 2014 11:14:49 +0200
Subject: [dev-context] \setuppagenumbering
In-Reply-To: <2E860B51-B193-4B6E-B49A-C713A3AB2A62@gmail.com>
References: <2E860B51-B193-4B6E-B49A-C713A3AB2A62@gmail.com>
Message-ID: <53CCDA09.9080006@wxs.nl>

On 7/20/2014 10:00 PM, Wolfgang Schuster wrote:
> Hi,
>
> can the \setuppagenumbering command to be extended to ?location=none? besides ?location=? to disable the pagenumber?
>
> \unexpanded\def\strc_pagenumbers_set_location
>    {\edef\p_strc_pagenumbers_location{\directpagenumberingparameter\c!location}%
>     \ifx\p_strc_pagenumbers_location\m_page_layouts_page_number_location
>        % unchanged
>     \else
>       \let\m_page_layouts_page_number_location\p_strc_pagenumbers_location
>       \page_layouts_reset_page_number_location
>       \ifx\p_strc_pagenumbers_location\empty
>         % set otherwise
> -    \else
> +    \else\ifx\p_strc_pagenumbers_location\v!none
> +      % set otherwise
> +    \else
>         \page_layouts_identify_page_number_location
>         \page_layouts_set_page_number_location
> -    \fi
> +    \fi\fi
>     \fi}


ok

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pmlists at free.fr  Tue Jul 22 16:48:37 2014
From: pmlists at free.fr (=?utf-8?Q?Peter_M=C3=BCnster?=)
Date: Tue, 22 Jul 2014 16:48:37 +0200
Subject: [dev-context] =?utf-8?q?patch=3A_ao=C3=BBt_-=3E_aout?=
Message-ID: <87r41dphyy.fsf@micropit.roche-blanche.homenet.org>

Because of
http://fr.wikipedia.org/wiki/Rectifications_orthographiques_du_fran?ais_en_1990 :

--- lang-txt.lua~       2014-06-04 22:39:45.000000000 +0200
+++ lang-txt.lua        2014-07-22 16:44:02.190189134 +0200
@@ -607,7 +607,7 @@
     en="August",
     es="agosto",
     fi="elokuu",
-    fr="ao?t",
+    fr="aout",
     gr="?????????",
     hr="kolovoza",
     hu="augusztus",

--- mult-def.lua~       2014-05-23 23:06:28.000000000 +0200
+++ mult-def.lua        2014-07-22 16:43:40.078073408 +0200
@@ -12342,7 +12342,7 @@
    ["cs"]="srpen",
    ["de"]="august",
    ["en"]="august",
-   ["fr"]="ao?t",
+   ["fr"]="aout",
    ["it"]="agosto",
    ["nl"]="augustus",
    ["pe"]="?????",

-- 
           Peter

From alan.braslau at cea.fr  Tue Jul 22 17:26:58 2014
From: alan.braslau at cea.fr (Alan BRASLAU)
Date: Tue, 22 Jul 2014 17:26:58 +0200
Subject: [dev-context] =?utf-8?q?patch=3A_ao=C3=BBt_-=3E_aout?=
In-Reply-To: <87r41dphyy.fsf@micropit.roche-blanche.homenet.org>
References: <87r41dphyy.fsf@micropit.roche-blanche.homenet.org>
Message-ID: <20140722172658.3d84ef63@iram-ha-003840.extra.cea.fr>

No, this is incorrect.

Please maintain "ao?t" and do not cede to any pseudo-reforms, or use
wikipedia as an authoritative reference...

Thank you

Alan


On Tue, 22 Jul 2014 16:48:37 +0200
Peter M?nster <pmlists at free.fr> wrote:

> Because of
> http://fr.wikipedia.org/wiki/Rectifications_orthographiques_du_fran?ais_en_1990 :
> 
> --- lang-txt.lua~       2014-06-04 22:39:45.000000000 +0200
> +++ lang-txt.lua        2014-07-22 16:44:02.190189134 +0200
> @@ -607,7 +607,7 @@
>      en="August",
>      es="agosto",
>      fi="elokuu",
> -    fr="ao?t",
> +    fr="aout",
>      gr="?????????",
>      hr="kolovoza",
>      hu="augusztus",
> 
> --- mult-def.lua~       2014-05-23 23:06:28.000000000 +0200
> +++ mult-def.lua        2014-07-22 16:43:40.078073408 +0200
> @@ -12342,7 +12342,7 @@
>     ["cs"]="srpen",
>     ["de"]="august",
>     ["en"]="august",
> -   ["fr"]="ao?t",
> +   ["fr"]="aout",
>     ["it"]="agosto",
>     ["nl"]="augustus",
>     ["pe"]="?????",
> 


From pmlists at free.fr  Tue Jul 22 17:50:33 2014
From: pmlists at free.fr (=?utf-8?Q?Peter_M=C3=BCnster?=)
Date: Tue, 22 Jul 2014 17:50:33 +0200
Subject: [dev-context] =?utf-8?q?patch=3A_ao=C3=BBt_-=3E_aout?=
In-Reply-To: <20140722172658.3d84ef63@iram-ha-003840.extra.cea.fr> (Alan
 BRASLAU's message of "Tue, 22 Jul 2014 17:26:58 +0200")
References: <87r41dphyy.fsf@micropit.roche-blanche.homenet.org>
 <20140722172658.3d84ef63@iram-ha-003840.extra.cea.fr>
Message-ID: <87r41do0ja.fsf@micropit.roche-blanche.homenet.org>

On Tue, Jul 22 2014, Alan BRASLAU wrote:

> Please maintain "ao?t" and do not cede to any pseudo-reforms,

Hi Alan,

Why "pseudo-reform"?


> or use wikipedia as an authoritative reference...

Sorry, this is probably more authoritative:

http://www.academie-francaise.fr/sites/academie-francaise.fr/files/rectifications_1990.pdf


Anyway, it's not important for me, if you apply the patch or not.

(if "aout" is wrong, then hunspell must be wrong too...)

-- 
           Peter

From alan.braslau at cea.fr  Tue Jul 22 18:21:42 2014
From: alan.braslau at cea.fr (Alan BRASLAU)
Date: Tue, 22 Jul 2014 18:21:42 +0200
Subject: [dev-context] =?utf-8?q?patch=3A_ao=C3=BBt_-=3E_aout?=
In-Reply-To: <87r41do0ja.fsf@micropit.roche-blanche.homenet.org>
References: <87r41dphyy.fsf@micropit.roche-blanche.homenet.org>
 <20140722172658.3d84ef63@iram-ha-003840.extra.cea.fr>
 <87r41do0ja.fsf@micropit.roche-blanche.homenet.org>
Message-ID: <20140722182142.0a4aaa5a@iram-ha-003587.extra.cea.fr>

On Tue, 22 Jul 2014 17:50:33 +0200
Peter M?nster <pmlists at free.fr> wrote:

> On Tue, Jul 22 2014, Alan BRASLAU wrote:
> 
> > Please maintain "ao?t" and do not cede to any pseudo-reforms,  
> 
> Hi Alan,
> 
> Why "pseudo-reform"?

About as elegant as "ped X-ing". In fact, we could suppress all
accentuated characters and stick to ASCII, making UTF-8 unnecessary.
Those ? are notorious for creating all sorts of problems when converting
files between systems. ;-)


> > or use wikipedia as an authoritative reference...  
> 
> Sorry, this is probably more authoritative:
> 
> http://www.academie-francaise.fr/sites/academie-francaise.fr/files/rectifications_1990.pdf

Which gives "acceptable" alternative-spellings, and says that the
circumflex is not mandatory. It does not suggest that ao?t is
incorrect. Furthermore, ao?t remains the reference.


> Anyway, it's not important for me, if you apply the patch or not.
> 
> (if "aout" is wrong, then hunspell must be wrong too...)

Depends on which hunspell dictionary you use...

Alan

From pmlists at free.fr  Tue Jul 22 18:45:06 2014
From: pmlists at free.fr (=?utf-8?Q?Peter_M=C3=BCnster?=)
Date: Tue, 22 Jul 2014 18:45:06 +0200
Subject: [dev-context] =?utf-8?q?patch=3A_ao=C3=BBt_-=3E_aout?=
In-Reply-To: <20140722182142.0a4aaa5a@iram-ha-003587.extra.cea.fr> (Alan
 BRASLAU's message of "Tue, 22 Jul 2014 18:21:42 +0200")
References: <87r41dphyy.fsf@micropit.roche-blanche.homenet.org>
 <20140722172658.3d84ef63@iram-ha-003840.extra.cea.fr>
 <87r41do0ja.fsf@micropit.roche-blanche.homenet.org>
 <20140722182142.0a4aaa5a@iram-ha-003587.extra.cea.fr>
Message-ID: <871ttdny0d.fsf@micropit.roche-blanche.homenet.org>

On Tue, Jul 22 2014, Alan BRASLAU wrote:

> Which gives "acceptable" alternative-spellings, and says that the
> circumflex is not mandatory. It does not suggest that ao?t is
> incorrect. Furthermore, ao?t remains the reference.

All right, thanks for the informations.


>> (if "aout" is wrong, then hunspell must be wrong too...)
>
> Depends on which hunspell dictionary you use...

"fr_FR" ... ;)

-- 
           Peter

From schuster.wolfgang at gmail.com  Wed Jul 23 15:54:15 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Wed, 23 Jul 2014 15:54:15 +0200
Subject: [dev-context] \startframed
Message-ID: <17D1D43A-E241-4AFD-98C3-1697B582969A@gmail.com>

Hi,

I guess the following changes are useful to ensure the spaces at the begin and end of a framed environment are removed.

A minimal example to show the problem:

\starttext
L\startframed[offset=none] M \stopframed R
\stoptext


pack-rul.mkiv:

\def\pack_framed_start_framed[#1]%
  {\bgroup
   \advance\c_pack_framed_nesting\plusone
   \expandafter\let\csname\??framed>\the\c_pack_framed_nesting:\s!parent\endcsname\??framed
   \iffirstargument\secondargumenttrue\fi % dirty trick
   \edef\currentframed{>\the\c_pack_framed_nesting}%
   \pack_framed_initialize
   \pack_framed_process_framed[#1]% can be inlined
-  \bgroup}
+  \bgroup\ignorespaces}

% till here

-\let\stopframed\egroup
+\unexpanded\def\stopframed
+  {\removeunwantedspaces\egroup}

Wolfgang

From pragma at wxs.nl  Thu Jul 24 09:57:12 2014
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 24 Jul 2014 09:57:12 +0200
Subject: [dev-context] \startframed
In-Reply-To: <17D1D43A-E241-4AFD-98C3-1697B582969A@gmail.com>
References: <17D1D43A-E241-4AFD-98C3-1697B582969A@gmail.com>
Message-ID: <53D0BC58.3040004@wxs.nl>

On 7/23/2014 3:54 PM, Wolfgang Schuster wrote:
> Hi,
>
> I guess the following changes are useful to ensure the spaces at the begin and end of a framed environment are removed.
>
> A minimal example to show the problem:
>
> \starttext
> L\startframed[offset=none] M \stopframed R
> \stoptext
>
>
> pack-rul.mkiv:
>
> \def\pack_framed_start_framed[#1]%
>    {\bgroup
>     \advance\c_pack_framed_nesting\plusone
>     \expandafter\let\csname\??framed>\the\c_pack_framed_nesting:\s!parent\endcsname\??framed
>     \iffirstargument\secondargumenttrue\fi % dirty trick
>     \edef\currentframed{>\the\c_pack_framed_nesting}%
>     \pack_framed_initialize
>     \pack_framed_process_framed[#1]% can be inlined
> -  \bgroup}
> +  \bgroup\ignorespaces}
>
> % till here
>
> -\let\stopframed\egroup
> +\unexpanded\def\stopframed
> +  {\removeunwantedspaces\egroup}

ok

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From brian at landy.cx  Tue Aug 12 05:12:51 2014
From: brian at landy.cx (Brian Landy)
Date: Mon, 11 Aug 2014 23:12:51 -0400
Subject: [dev-context] patch: fix character alignment on long tables
References: <53e9844c4b96a_53f03e7e44cc3085c@firefly.landy.cx.mail>
Message-ID: <DF261E7A-2BFC-40E7-BD0D-1CCDCB065755@landy.cx>

Hi, here is a patch for consideration.  The character alignment code would fail on tables with more than 100 rows, as it was encoding the row/column number into a single integer 100*column+row.  I modified the code to pass in the row and column using separate attributes.

Thanks,
Brian


diff --git a/tex/texmf-context/tex/context/base/typo-tal.lua b/tex/texmf-context/tex/context/base/typo-tal.lua
index 5d62d4e..51a8c52 100644
--- a/tex/texmf-context/tex/context/base/typo-tal.lua
+++ b/tex/texmf-context/tex/context/base/typo-tal.lua
@@ -65,8 +65,9 @@ typesetters.characteralign = characteralign
local trace_split          = false  trackers.register("typesetters.characteralign", function(v) trace_split = true end)
local report               = logs.reporter("aligning")

-local a_characteralign     = attributes.private("characteralign")
-local a_character          = attributes.private("characters")
+local a_characteralignrow    = attributes.private("characteralignrow")
+local a_characteraligncolumn = attributes.private("characteraligncolumn")
+local a_character            = attributes.private("characters")

local enabled              = false

@@ -108,12 +109,11 @@ function characteralign.handler(originalhead,where)
    if not first then
        return originalhead, false
    end
-    local a = getattr(first,a_characteralign)
-    if not a or a == 0 then
+    local row = getattr(first,a_characteralignrow)
+    local column = getattr(first,a_characteraligncolumn)
+    if not row or row == 0 or not column or column==0 then
        return originalhead, false
    end
-    local column    = div(a,100)
-    local row       = a % 100
    local dataset   = datasets and datasets[column] or setcharacteralign(column)
    local separator = dataset.separator
    local list      = dataset.list
diff --git a/tex/texmf-context/tex/context/base/typo-tal.mkiv b/tex/texmf-context/tex/context/base/typo-tal.mkiv
index 32b99ff..a9606ac 100644
--- a/tex/texmf-context/tex/context/base/typo-tal.mkiv
+++ b/tex/texmf-context/tex/context/base/typo-tal.mkiv
@@ -24,7 +24,8 @@

\registerctxluafile{typo-tal}{1.001}

-\definesystemattribute[characteralign][public]
+\definesystemattribute[characteralignrow][public]
+\definesystemattribute[characteraligncolumn][public]

%D This mechanism is mostly meant for tables:
%D
@@ -56,10 +57,10 @@
% D
% D \typebuffer \blank \getbuffer \blank

-\unexpanded\def\signalcharacteralign#1#2{\attribute\characteralignattribute=\numexpr#1*\plushundred+#2\relax}
+\unexpanded\def\signalcharacteralign#1#2{\attribute\characteraligncolumnattribute=#1\attribute\characteralignrowattribute=#2}
\unexpanded\def\setcharacteralign   #1#2{\ctxcommand{setcharacteralign(\number#1,"#2")}}
\unexpanded\def\resetcharacteralign     {\ctxcommand{resetcharacteralign()}}
-\unexpanded\def\nocharacteralign        {\attribute\characteralignattribute\attributeunsetvalue}
+\unexpanded\def\nocharacteralign        {\attribute\characteralignrowattribute\attributeunsetvalue\attribute\characteraligncolumnattribute\attributeunsetvalue}

%D Mostly downward compatible:
%D

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ntg.nl/pipermail/dev-context/attachments/20140811/aec52bb5/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 801 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://www.ntg.nl/pipermail/dev-context/attachments/20140811/aec52bb5/attachment.pgp>

From mamidogad at gmail.com  Thu Aug 14 08:24:28 2014
From: mamidogad at gmail.com (Mohamed Gad)
Date: Thu, 14 Aug 2014 06:24:28 +0000 (UTC)
Subject: [dev-context] I'd like to add you to my professional network on
	LinkedIn
Message-ID: <957516454.10458097.1407997468128.JavaMail.app@ela4-app3388.prod>

Hi ,

I&#39;d like to add you to my professional network on LinkedIn.

- Mohamed

Accept: http://www.linkedin.com/blink?simpleRedirect=30MdzcNcjkMdjoSczASdjkMejkZh4BKrSBQonhFtCVF9z1Ku4Net35SfnBBiShBsC5EsOpQsSlRpRZBt6BSrCAZqSkConhzbmlQqnpKqiRQsSlRpORIrmkZpSVFqSdxsDgCpnhFtCV9pSlipn9Mfm4Cq3cJtCJIoD1QumwJe6wQtn5xbjRBfP9SbSkLrmZzbCVFp6lHrCBIbDtTtOYLeDdMt7hE&msgID=I7670161483_1&markAsRead=


You are receiving Invitation emails. Unsubscribe here: http://www.linkedin.com/blink?simpleRedirect=6NKhj8BpThKc3gBt7xBt6VLoORSpmgZr6BxrmkCp71BpjAMcP1FtC4Sc6VJfmhFoioNdz0MczRAqioNbjRAqmQCq3cJtCJIoD1QumwJe6wQtn5xbjRAqmkCt7dBtmtvpnhFtCVFfmJB9Clyqn9zsS9RsSVRbmlQqnpKqiRQsSlRpORIrmkZpSVFqSdxsDgCkjoPp4l7q5p6sCR6kk4ZrClHrRhAqmQCsSVRfngCq3cJtCJIoD1QumwJe6wQtn5xbjRBfP9SbSkLrmZzbCVFp6lHrCBIbDtTtOYLeDdMt7hE&msgID=I7670161483_1&markAsRead=

 Learn why we included this at the following link: http://www.linkedin.com/blink?simpleRedirect=e3wTd3RAimlIoSBQsC4Ct7dBtmtvpnhFtCVFfmJB9CNOlmlzqnpOpldOpmRLt7dRoPRx9CwPbnpHr69Mt7BEbjxEd7lNoiQZpjYOtyZBbSRLoOVKqmhBqSVFr2VTtTsLbPFMt7hE&msgID=I7670161483_1&markAsRead=
&copy; 2014, LinkedIn Corporation. 2029 Stierlin Ct. Mountain View, CA 94043, USA
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ntg.nl/pipermail/dev-context/attachments/20140814/0a9b0806/attachment.html>

From ishamid at colostate.edu  Thu Aug 14 18:56:17 2014
From: ishamid at colostate.edu (=?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMgICDYs9mF2KfZiNmKIA==?= =?utf-8?B?2K3Yp9mF2K8=?=)
Date: Thu, 14 Aug 2014 10:56:17 -0600
Subject: [dev-context] ANNOUNCEMENT: Arabic-Latin Modern Fixed
Message-ID: <op.xkldb3rapw6hmh@ishamid-pc>

[This announcement is dedicated to the 110% recovery and return of our  
visionary and fearless leader Hans Hagen: Three cheers to you, Hans!!!]

Dear gang,

It's my pleasure to announce the release of Arabic-Latin Modern Fixed, a  
monospaced font that extends TeX-Gyre Latin Modern Mono 10 Regular. It has  
been uploaded to CTAN, although I do not know how long it will take for  
the CTAN people to approve and publish it. Eventually it will make it's  
way into the ConTeXt minimals as well. Until then, you may use this  
private link:

https://www.dropbox.com/s/pulgaxshzr5bcmy/almfixed.zip

README.txt is reproduced below. Future plans include both bold and  
proportional versions. Enjoy and

Best wishes
Idris
-- 
Idris Samawi Hamid
Professor of Philosophy
Colorado State University
Fort Collins, CO 80523

==========README.txt==========
Typeface Family: Arabic-Latin Modern
Font: Arabic-Latin Modern Fixed
Style: Regular
Version: 0.92
Author: Idris Samawi Hamid
Date: August 5, 2014

License:

Arabic-Latin Modern Fixed is licensed under the GUST Font License with one  
important adjustment: It is requested, as well as legally *required*, that  
derived works be distributed only after changing the names of the fonts  
comprising this work.

http://www.gust.org.pl/projects/e-foundry/licenses/GUST-FONT-LICENSE.txt/view

Contains:

http://www.ctan.org/tex-archive/fonts/doc/almfixed-dtk.pdf
http://www.ctan.org/tex-archive/fonts/ps;
http://www.ctan.org/tex-archive/fonts/tt;

Some notes, in no particular order:

1. For more extensive documentation, examples, and background; see  
almfixed-dtk.pdf.

2. The final version number (per any future fixes, maintenance etc.) is  
intended to be Version 1.10.

3. Arabic-Latin Modern Fixed is an extension of TeX-Gyre Latin Modern Mono  
10 Regular. Every glyph and opentype feature of the Latin Modern Mono has  
been retained, with minor improvements. On the other hand, we have changed  
the vertical metrics of the font. Although the Arabic script is designed  
to use the same x-size as Latin Modern Mono, the former script needs  
greater ascender and descender space. And there are cases (such as certain  
kinds of academic assignment and definitely mixed Latin and Arabic text)  
where Latin can use the extra vertical space as well. Otherwise, only the  
vertical metrics prevents this from being a drop-in replacement for Latin  
Modern Mono . Of course one can always set the vertical metrics in TeX to  
match LM Mono.

4. Every Arabic glyph in each Unicode-code block is supported (up to  
Unicode 7.0): Arabic, Arabic Supplement, Arabic Extended, Arabic  
Presentation-Forms A, and Arabic Presentation-Forms B.

5. This is a totally original design, using the Knuthian letters as  
inspiration. Indeed, virtually all Arabic characters were developed on the  
foundation of a study of the Latin Modern Mono letters 'l', 'r', and 'c'.  
In other words, this is a genuine extension of the original Knuthian  
design to an authentic and culturally authentic Arabic typing font.

6. There are two versions of the font: ps and tt. The Type~1 version is  
for print applications (and usually the default for TeX). The TrueType  
version is for on-screen applications such as text editors. Hinting in the  
tt version is much better for on-screen, at least on Microsoft Windows.

7. The most unique feature of Arabic-Latin Modern is in its treatment of  
vowels and diacritics. Each vowel and diacritic (ALM Fixed contains a  
total of 68 such glyphs) can now be edited horizontally within any text  
editor or processor. I believe this is the very first opentype Arabic font  
ever to have this capability. Editing complex Arabic texts will now be  
much easier to input and to proofread.

8. At least 12 additional format characters are included; see  
almfixed-dtk.pdf for details. Also designed a glyph representation for  
U+00A0 (no-break space), as well as U+25CC (dotted circle).

9. Arabic-Latin Modern Mono will be a boon to scholars, academics, coder  
editors, and anyone who wants to manage the entry of the wide array of  
Unicode Arabic text for editing, verbatim, or other purposes.
==============================

From pragma at wxs.nl  Sat Aug 16 12:07:15 2014
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 16 Aug 2014 12:07:15 +0200
Subject: [dev-context] patch: fix character alignment on long tables
In-Reply-To: <DF261E7A-2BFC-40E7-BD0D-1CCDCB065755@landy.cx>
References: <53e9844c4b96a_53f03e7e44cc3085c@firefly.landy.cx.mail>
 <DF261E7A-2BFC-40E7-BD0D-1CCDCB065755@landy.cx>
Message-ID: <53EF2D53.1080901@wxs.nl>

On 8/12/2014 5:12 AM, Brian Landy wrote:
> Hi, here is a patch for consideration.  The character alignment code
> would fail on tables with more than 100 rows, as it was encoding the
> row/column number into a single integer 100*column+row.  I modified the
> code to pass in the row and column using separate attributes.

100 => 0xFFFF is easier

> Thanks,
> Brian
>
>
> diff --git a/tex/texmf-context/tex/context/base/typo-tal.lua
> b/tex/texmf-context/tex/context/base/typo-tal.lua
> index 5d62d4e..51a8c52 100644
> --- a/tex/texmf-context/tex/context/base/typo-tal.lua
> +++ b/tex/texmf-context/tex/context/base/typo-tal.lua
> @@ -65,8 +65,9 @@ typesetters.characteralign = characteralign
> local trace_split          = false
>   trackers.register("typesetters.characteralign", function(v)
> trace_split = true end)
> local report               = logs.reporter("aligning")
>
> -local a_characteralign     = attributes.private("characteralign")
> -local a_character          = attributes.private("characters")
> +local a_characteralignrow    = attributes.private("characteralignrow")
> +local a_characteraligncolumn = attributes.private("characteraligncolumn")
> +local a_character            = attributes.private("characters")
>
> local enabled              = false
>
> @@ -108,12 +109,11 @@ function characteralign.handler(originalhead,where)
>      if not first then
>          return originalhead, false
>      end
> -    local a = getattr(first,a_characteralign)
> -    if not a or a == 0 then
> +    local row = getattr(first,a_characteralignrow)
> +    local column = getattr(first,a_characteraligncolumn)
> +    if not row or row == 0 or not column or column==0 then
>          return originalhead, false
>      end
> -    local column    = div(a,100)
> -    local row       = a % 100
>      local dataset   = datasets and datasets[column] or
> setcharacteralign(column)
>      local separator = dataset.separator
>      local list      = dataset.list
> diff --git a/tex/texmf-context/tex/context/base/typo-tal.mkiv
> b/tex/texmf-context/tex/context/base/typo-tal.mkiv
> index 32b99ff..a9606ac 100644
> --- a/tex/texmf-context/tex/context/base/typo-tal.mkiv
> +++ b/tex/texmf-context/tex/context/base/typo-tal.mkiv
> @@ -24,7 +24,8 @@
>
> \registerctxluafile{typo-tal}{1.001}
>
> -\definesystemattribute[characteralign][public]
> +\definesystemattribute[characteralignrow][public]
> +\definesystemattribute[characteraligncolumn][public]
>
> %D This mechanism is mostly meant for tables:
> %D
> @@ -56,10 +57,10 @@
> % D
> % D \typebuffer \blank \getbuffer \blank
>
> -\unexpanded\def\signalcharacteralign#1#2{\attribute\characteralignattribute=\numexpr#1*\plushundred+#2\relax}
> +\unexpanded\def\signalcharacteralign#1#2{\attribute\characteraligncolumnattribute=#1\attribute\characteralignrowattribute=#2}
> \unexpanded\def\setcharacteralign
>    #1#2{\ctxcommand{setcharacteralign(\number#1,"#2")}}
> \unexpanded\def\resetcharacteralign     {\ctxcommand{resetcharacteralign()}}
> -\unexpanded\def\nocharacteralign
>         {\attribute\characteralignattribute\attributeunsetvalue}
> +\unexpanded\def\nocharacteralign
>         {\attribute\characteralignrowattribute\attributeunsetvalue\attribute\characteraligncolumnattribute\attributeunsetvalue}
>
> %D Mostly downward compatible:
> %D
>
>
>
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context
>


-- 

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From oinos at gmx.es  Sun Aug 31 08:18:16 2014
From: oinos at gmx.es (Pablo Rodriguez)
Date: Sun, 31 Aug 2014 08:18:16 +0200
Subject: [dev-context] three typos in page-imp.mkiv
Message-ID: <5402BE28.4080206@gmx.es>

Hans,

the attached patch fixes three typos in page-imp.mkiv.

Many thanks for your help,

Pablo
-- 
http://www.ousia.tk
-------------- next part --------------
A non-text attachment was scrubbed...
Name: typos.diff
Type: text/x-patch
Size: 1238 bytes
Desc: not available
URL: <http://www.ntg.nl/pipermail/dev-context/attachments/20140831/00ebcf5e/attachment.bin>

From luigi.scarso at gmail.com  Tue Nov 11 11:42:18 2014
From: luigi.scarso at gmail.com (luigi scarso)
Date: Tue, 11 Nov 2014 11:42:18 +0100
Subject: [dev-context] Luatex 0.79.2 announcement
Message-ID: <CAG5iGsCt3+=GvVgTA5kgyvqKYMKfe+77D+_DHgR6oL920zNBLQ@mail.gmail.com>

New luatex release, 0.79.2 .

Changes:

* WARNING: the structure of the format file is changed.
  After  the  Web2C \TeX's magic constant: "W2TX"  there is now
  a FORMAT_ID, a 32bit field that cannot be between 0 and 256 (included)
  so that there are no conflicts with the preexisting  structure
  of the format.
  The value can be seen with --debug-format and currently is
  907 (the sum of the values of the bytes of the ASCII string "don knuth").

* There is a new set of lua functions for StructElement and Attribute,
  convenient (even if not indispensable) for tagged pdf.


* several bugfixes and improvements.


The archives can be downloaded from supelec as usual:

        https://foundry.supelec.fr/projects/luatex/

You could also check out the sources via anonymous svn:

  svn co --username anonsvn --password anonsvn              \
      https://foundry.supelec.fr/svn/luatex/tags/beta-0.79.2
<https://foundry.supelec.fr/svn/luatex/tags/beta-0.79.1>

Bugs and feature requests can be added to the issue tracker at

       http://tracker.luatex.org

Have fun,
Hans, Taco, Luigi

-- 
luigi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ntg.nl/pipermail/dev-context/attachments/20141111/9a29f46d/attachment.html>

From wolfgang.schuster at gmail.com  Mon Dec 22 16:50:14 2014
From: wolfgang.schuster at gmail.com (Wolfgang Schuster)
Date: Mon, 22 Dec 2014 16:50:14 +0100
Subject: [dev-context] core-con.lua
Message-ID: <069F49F8-AEDF-420E-AD84-2A561F9C3AFC@gmail.com>

Hi,

there is a bug with the number conversion code when values from a commalist are used, e.g.

\starttext
\dorecurse{10}{#1:\convertnumber{set 1}{#1} }
\stoptext


The bug is in the "convert" function from the Lua part.

local function convert(method,n,language)
    local converter = language and converters[method..":"..language] or converters[method]
    if converter then
        return converter(n)
    else
        local lowermethod = lower(method)
        local linguistic  = counters[lowermethod]
        if linguistic then
            return do_alphabetic(n,linguistic,lowermethod == method and lowercharacter or uppercharacter)
        end
        local sequence = sequences[method]
        if sequence then
-           local set = sequences.set
-           if set then
-               local max = #set
+               local max = #sequence
                if n > max then
-                   return set[(n-1) % max + 1]
+                   return sequence[(n-1) % max + 1]
                else
-                   return set[n]
+                   return sequence[n]
                end
-           end
        end
        return n
    end
end

Wolfgang

From schuster.wolfgang at gmail.com  Tue Dec 30 22:55:25 2014
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Tue, 30 Dec 2014 22:55:25 +0100
Subject: [dev-context] cont-log.mkiv
Message-ID: <5124B685-3B0D-489A-A428-4A3584AE9E5E@gmail.com>

Hi,

there is a \getscaledglyph missing in the definition of the \Context command.

\unexpanded\def\Context % wrong usage of \getscaledglyph
  {\dontleavehmode
   \begingroup
-  C\kern -.0667\emwidth{.8}\empty{O\kern -.0667\emwidth N\kern
+  C\kern -.0667\emwidth\getscaledglyph{.8}\empty{O\kern -.0667\emwidth N\kern
   -.0549\emwidth T\doifitalicelse{\kern-.1\emwidth}{\kern-.1667\emwidth}\lower.5\exheight\hbox
   {E}\doifitalicelse\empty{\kern-.11em}X\kern-.055\emwidth T}%
   \endgroup}

Wolfgang

