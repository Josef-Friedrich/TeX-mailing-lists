From mgb-debian at yosemite.net  Mon Jan  1 03:13:36 2007
From: mgb-debian at yosemite.net (Mike Bird)
Date: Sun, 31 Dec 2006 18:13:36 -0800
Subject: [dev-context] Inconsistent Reference Counting
In-Reply-To: <200612311424.44513.mgb-debian@yosemite.net>
References: <200612311229.50352.mgb-debian@yosemite.net>
	<200612311424.44513.mgb-debian@yosemite.net>
Message-ID: <200612311813.37957.mgb-debian@yosemite.net>

FWIW:

Using \Footnote defined as below in a document with
about 70 footnotes seems to correct all the \somewhere
problems.

\def\Footnote#1%
{\global\advance\crossreferencenumber\minusone\relax%
 \footnote{#1}}

Presumably \footnote is indirectly calling
\dodowritereference although I haven't traced the
full invocation path yet.

--Mike Bird

From taco at elvenkind.com  Mon Jan  1 16:34:34 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 01 Jan 2007 16:34:34 +0100
Subject: [dev-context] mptopdf: produces PDF with 'unknown operator'
	error
In-Reply-To: <E1H157b-0007Gf-38@approximate.corpus.cam.ac.uk>
References: <E1H157b-0007Gf-38@approximate.corpus.cam.ac.uk>
Message-ID: <45992A0A.8060301@elvenkind.com>

Sanjoy Mahajan wrote:
> Thanks, that was the problem.  I was at mpost 0.970 and with 0.993 the
> problem vanished.  Another problem appeared, which is that pdftk
> segfaults when uncompressing the new pdf file, but I'll track that down
> and report it to the pdftk authors.
> 
> mpost now says it is 0.993.  But mpost -v says 0.992.  There are a few
> spots in the source code with 0.992 strings.  To find them:
> 
>   find -type f | xargs grep -I '\<0\.99[23]\>'
> 
> Not sure which are spurious and which need changing.

The problem is that there is this independant C file that is used by
web2c for the messages created by --version, and I keep forgetting
to update that thing. Thanks for the warning.

> Also, I updated the update-tetex.make.  Here's a diff and also the new
> version is attached.  
> 
> Before running it, I removed the /usr/share/texmf/web2c/mp.pool that the
> older version of the makefile had installed on the last mpost upgrade;

Just delete the thing completely. The pool file is only needed
during the creation of the mpost executable proper, never afterwards.
There is absolutely no need to install it anywhere.

Best wishes,

Taco

From sanjoy at mrao.cam.ac.uk  Mon Jan  1 16:50:43 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Mon, 01 Jan 2007 08:50:43 -0700
Subject: [dev-context] mptopdf: produces PDF with 'unknown operator'
	error
In-Reply-To: Your message of "Mon, 01 Jan 2007 16:34:34 +0100."
	<45992A0A.8060301@elvenkind.com> 
Message-ID: <E1H1PQx-0006Nt-Fo@approximate.corpus.cam.ac.uk>

>> [mp.pool]
> Just delete the thing completely. The pool file is only needed during
> the creation of the mpost executable proper, never afterwards.

Thanks, that explains it.  I thought I remembered a line in the docs
about the new metapost not needing the pool file.  But when I saw that
pool file was generated, I figured better safe than sorry so I installed
it anyway.

Updated makefile attached that does not mention pool.

-Sanjoy

`A nation of slaves is always prepared to applaud the clemency of their
 master who, in the abuse of absolute power, does not proceed to the
 last extremes of injustice and oppression.'  (Gibbon)  

-------------- next part --------------
# For installing latest mp over the tetex-3.0 equivalents (mp 0.641)

.PHONY: install install-exec install-mplib

INSTALL := rsync -ptv

# directories where the generated executables are put
edir1 := build/texk/web2c
edir2 := $(edir1)/mpware
# executables to install
execs := $(edir1)/mpost $(edir1)/dvitomp 
execs += $(edir2)/dmp $(edir2)/mpto $(edir2)/newer $(edir2)/makempx

# the "fmtutil-sys --all" might be overkill
install: install-exec install-mplib
	fmtutil-sys --all

install-exec: $(execs)
	$(INSTALL) $^ /usr/bin/
install-mplib:
	$(INSTALL) -r texmf/metapost /usr/share/texmf-tetex/

From pragma at wxs.nl  Mon Jan  1 23:52:29 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 01 Jan 2007 23:52:29 +0100
Subject: [dev-context] Inconsistent Reference Counting
In-Reply-To: <200612311813.37957.mgb-debian@yosemite.net>
References: <200612311229.50352.mgb-debian@yosemite.net>
	<200612311424.44513.mgb-debian@yosemite.net>
	<200612311813.37957.mgb-debian@yosemite.net>
Message-ID: <459990AD.3010109@wxs.nl>

Mike Bird wrote:
> FWIW:
>
> Using \Footnote defined as below in a document with
> about 70 footnotes seems to correct all the \somewhere
> problems.
>
> \def\Footnote#1%
> {\global\advance\crossreferencenumber\minusone\relax%
>  \footnote{#1}}
>
> Presumably \footnote is indirectly calling
> \dodowritereference although I haven't traced the
> full invocation path yet.
>   
this is related to footnotes having two references (to/from); the attached version may perform better but may interfere with other footnote things; i didn't test it that well 

Hans 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

-------------- next part --------------
A non-text attachment was scrubbed...
Name: forlist.zip
Type: application/zip
Size: 12082 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070101/ff76541a/attachment.zip 

From pragma at wxs.nl  Mon Jan  1 23:53:39 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 01 Jan 2007 23:53:39 +0100
Subject: [dev-context] Inconsistent Reference Counting
In-Reply-To: <200612311813.37957.mgb-debian@yosemite.net>
References: <200612311229.50352.mgb-debian@yosemite.net>
	<200612311424.44513.mgb-debian@yosemite.net>
	<200612311813.37957.mgb-debian@yosemite.net>
Message-ID: <459990F3.1060404@wxs.nl>

Mike Bird wrote:
> FWIW:
>
> Using \Footnote defined as below in a document with
> about 70 footnotes seems to correct all the \somewhere
> problems.
>
> \def\Footnote#1%
> {\global\advance\crossreferencenumber\minusone\relax%
>  \footnote{#1}}
>
> Presumably \footnote is indirectly calling
> \dodowritereference although I haven't traced the
> full invocation path yet.
>   
remind me later this year ... in luatex we can use relatiev positions for this; in luatex i user a different way to store things and we can have way more data moving around 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From adityam at umich.edu  Wed Jan  3 05:39:39 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Tue, 2 Jan 2007 23:39:39 -0500 (EST)
Subject: [dev-context] Script files for third party modules.
Message-ID: <alpine.WNT.0.81.0701022307070.1764@nqvgln>

Hi Hans,

  Mojca and I are writing a module that uses a vim script to highlight 
source code. What is the best way to "package" this module. That is, 
where should the script file go? The ideal location will be

scripts/context/vim/macros/

Are third party modules allowed to "pollute" the scripts/ directory?

We have another concern while calling the script. We need to call vim 
using

   vim [options] -c "source path-to-script/2context.vim" filename

This command is called using \externalprogram. We do not want to 
hard code the location of path to the scirpt. Does it make sense to 
add VIMINPUTS environment variable to texmfstart, to reduce the search 
time?

Is there a way to locate the file in the texmf-tree and pass the 
arguments to another program? I copied 2context.vim to texmf-tree and

   texmfstart --locate 2context.vim

gives its location. However

   texmfstart bin:vim kpse:2context.vim

does not load the file. I get

texmfstart version 2.0.2
kpse     : direct (forced)
locating '2context.vim' in program space 'context'
locating '2context.vim' in program space 'context' using format 'other 
text files' 2context.vim is not resolved using 'system' call: vim  2context.vim

What is the correct way of finding something in the texmf-tree but 
outside program space 'context'?

Aditya

From sanjoy at mrao.cam.ac.uk  Wed Jan  3 09:52:54 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Wed, 03 Jan 2007 01:52:54 -0700
Subject: [dev-context] [NTG-context] debian context updates
In-Reply-To: Your message of "Wed, 03 Jan 2007 09:18:42 +0100."
	<20070103081842.GC25282@gamma.logic.tuwien.ac.at> 
Message-ID: <E1H21ri-0002HZ-W6@approximate.corpus.cam.ac.uk>

[CC'ing to dev-context instead of ntg-context]

I noticed that the Modes manual (mmodes.pdf) wasn't included in the
context*.deb's.  So I diffed the list of pdf manuals in the context*.deb
against the full list at <http://pragma-ade.com/dir/general/manuals/>,
then looked through for the most useful to add to the context packages:

mchinese.pdf
mmodes.pdf
enattab.pdf
mchart.pdf
mlabels.pdf
luatex.pdf
mk.pdf
mmlexamp.pdf
mmlprime.pdf
mmodes.pdf
mpattern.pdf
mpdftools.pdf
mpstopdf.pdf
msplit.pdf
mtexmfstart.pdf
mwidget-s.pdf
mxmltools.pdf
xfigbase.pdf
xfigures-s.pdf
xmathml-s.pdf
xcorresp.pdf
xchemml-s.pdf
xphysml-s.pdf
xsteps-s.pdf
xxmldir.pdf
xmanipulate.pdf

-Sanjoy

`A nation of slaves is always prepared to applaud the clemency of their
 master who, in the abuse of absolute power, does not proceed to the
 last extremes of injustice and oppression.'  (Gibbon)  

From pragma at wxs.nl  Wed Jan  3 10:20:19 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Jan 2007 10:20:19 +0100
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
Message-ID: <459B7553.5090500@wxs.nl>

Aditya Mahajan wrote:
> Hi Hans,
>
>   Mojca and I are writing a module that uses a vim script to highlight 
> source code. What is the best way to "package" this module. That is, 
> where should the script file go? The ideal location will be
>
> scripts/context/vim/macros/
>
> Are third party modules allowed to "pollute" the scripts/ directory?
>   
hm, never thought of it; i suppose it is ok that way
> We have another concern while calling the script. We need to call vim 
> using
>
>    vim [options] -c "source path-to-script/2context.vim" filename
>
> This command is called using \externalprogram. We do not want to 
> hard code the location of path to the scirpt. Does it make sense to 
> add VIMINPUTS environment variable to texmfstart, to reduce the search 
> time?
>   
hm, maybe but adding a truckload of editor paths will also slow down; an 
option is to add 'vim' as suffix someplace
> Is there a way to locate the file in the texmf-tree and pass the 
> arguments to another program? I copied 2context.vim to texmf-tree and
>
>    texmfstart --locate 2context.vim
>
> gives its location. However
>
>    texmfstart bin:vim kpse:2context.vim
>
> does not load the file. I get
>
> texmfstart version 2.0.2
> kpse     : direct (forced)
> locating '2context.vim' in program space 'context'
> locating '2context.vim' in program space 'context' using format 'other 
> text files' 2context.vim is not resolved using 'system' call: vim  2context.vim
>
> What is the correct way of finding something in the texmf-tree but 
> outside program space 'context'?
>   
--program=yourtex

but i wonder, isn't the vim stuff in the context tree? can kpse find it? 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From taco at elvenkind.com  Wed Jan  3 10:28:56 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 03 Jan 2007 10:28:56 +0100
Subject: [dev-context] [Fwd: [tex-live] more test images]
Message-ID: <459B7758.60905@elvenkind.com>

Hi all,

See below for test images of TL 2006. Does anobody have the time
to test if the context on the images runs properly? I do not
use TeXLive myself, nor do I have enough time to verify all is
well, but imho it is important that someone tests context before
the final images are created.

Best, Taco

-------- Original Message --------
Subject: [tex-live] more test images
Date: Wed, 3 Jan 2007 03:45:48 +0100
From: karl at freefriends.org (Karl Berry)
To: tex-live at tug.org

Besides the work checked in by Staszek, this has new hp, aix,
sparc-linux binaries.

Updated i386-linux binaries, but still from me.  (Staszek, do you think
you'll be able to try that build soon?)

ftp://tug.org/texlive/Images/test as usual.

Thanks,
k
_______________________________________________
TeX Live mailing list
http://tug.org/mailman/listinfo/tex-live

From preining at logic.at  Wed Jan  3 11:40:17 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 3 Jan 2007 11:40:17 +0100
Subject: [dev-context] [NTG-context] debian context updates
In-Reply-To: <E1H21ri-0002HZ-W6@approximate.corpus.cam.ac.uk>
References: <20070103081842.GC25282@gamma.logic.tuwien.ac.at>
	<E1H21ri-0002HZ-W6@approximate.corpus.cam.ac.uk>
Message-ID: <20070103104017.GH25282@gamma.logic.tuwien.ac.at>

Hi Sanjoy!

On Mit, 03 Jan 2007, Sanjoy Mahajan wrote:
> I noticed that the Modes manual (mmodes.pdf) wasn't included in the
> context*.deb's.  So I diffed the list of pdf manuals in the context*.deb
> against the full list at <http://pragma-ade.com/dir/general/manuals/>,
> then looked through for the most useful to add to the context packages:

I included everything I found in the manuals stuff, together with the
rest which has been there, setup-*, showcase* etc.

The package is now 50Mb big, but well, it shouldn't change too often.

Current files:
manuals/cont-eni.pdf.gz
manuals/eppchtex.pdf.gz
manuals/mtexwork.pdf.gz
manuals/showfont.pdf.gz
manuals/mtexexec.pdf.gz
manuals/cont-enp.pdf.gz
manuals/ms-cb-en.pdf.gz
manuals/mp-ch-en.pdf.gz
manuals/mtexfont.pdf.gz
manuals/mtexutil.pdf.gz
manuals/mmakempy.pdf.gz
manuals/tiptrick.pdf.gz
manuals/aleph.pdf.gz
manuals/example.pdf.gz
manuals/metafun-s.pdf.gz
manuals/mfonts.pdf.gz
manuals/details.pdf.gz
manuals/style.pdf.gz
manuals/columns.pdf.gz
manuals/cont-nlp.pdf.gz
manuals/enattab.pdf.gz
manuals/ex-ample.pdf.gz
manuals/ex-gui.pdf.gz
manuals/ex-imple.pdf.gz
manuals/foxet.pdf.gz
manuals/mchart.pdf.gz
manuals/mchinese.pdf.gz
manuals/mk.pdf.gz
manuals/mlabels.pdf.gz
manuals/mmlexamp.pdf.gz
manuals/mmodes.pdf.gz
manuals/mmoexamp.pdf.gz
manuals/mpattern.pdf.gz
manuals/mp-cb-nl.pdf.gz
manuals/mp-ch-de.pdf.gz
manuals/mpdftools.pdf.gz
manuals/mpstopdf.pdf.gz
manuals/mreadme.pdf.gz
manuals/ms-cb-nl.pdf.gz
manuals/mscite-p.pdf.gz
manuals/mscite-s.pdf.gz
manuals/msplit.pdf.gz
manuals/mtexmfstart.pdf.gz
manuals/mtexsync-p.pdf.gz
manuals/mtexsync-s.pdf.gz
manuals/mtextools.pdf.gz
manuals/mwidget-p.pdf.gz
manuals/mwidget-s.pdf.gz
manuals/mxmltools.pdf.gz
manuals/texwork.mov.gz
manuals/xchemml-s.pdf.gz
manuals/xcorresp.pdf.gz
manuals/xfigbase.pdf.gz
manuals/xfigures-p.pdf.gz
manuals/xfigures-s.pdf.gz
manuals/xmanipulate.pdf.gz
manuals/xmathml-p.pdf.gz
manuals/xmathml-s.pdf.gz
manuals/xmlfoe.pdf.gz
manuals/xphysml-s.pdf.gz
manuals/xsteps-p.pdf.gz
manuals/xsteps-s.pdf.gz
manuals/xxmldir.pdf.gz
manuals/metafun-p.pdf.gz
manuals/showunic.pdf.gz
manuals/mp-cb-en.pdf.gz
manuals/minstall.pdf.gz
manuals/cont-nli.pdf.gz
manuals/luatex.pdf.gz
manuals/mmlprime.pdf.gz
manuals/mp-ch-nl.pdf.gz
manuals/ms-co-nl.pdf.gz
manuals/xchemml-p.pdf.gz
manuals/xphysml-p.pdf.gz

setup/setup-en.pdf.gz
setup/setup-fr.pdf.gz
setup/setup-it.pdf.gz
setup/setup-nl.pdf.gz
setup/setup-ro.pdf.gz
setup/setup-cz.pdf.gz
setup/setup-de.pdf.gz

showcase/show-dem.pdf.gz
showcase/show-exa.pdf.gz
showcase/show-gra.pdf.gz
showcase/show-mag.pdf.gz
showcase/show-man.pdf.gz
showcase/show-pap.pdf.gz
showcase/show-pre.pdf.gz
showcase/show-art.pdf.gz
showcase/showcase.pdf.gz
showcase/show-not.pdf.gz

roadmap.pdf.gz


Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
CLACKAVOID (n.)
Technical BBC term for a page of dialogue from Blake's Seven.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Wed Jan  3 13:37:23 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 3 Jan 2007 13:37:23 +0100
Subject: [dev-context] TL2006 and ConTeXt
In-Reply-To: <459B7758.60905@elvenkind.com>
References: <459B7758.60905@elvenkind.com>
Message-ID: <20070103123723.GA20590@gamma.logic.tuwien.ac.at>

Hi all!

On Mit, 03 Jan 2007, Taco Hoekwater wrote:
> See below for test images of TL 2006. Does anobody have the time
> to test if the context on the images runs properly? I do not

No it doesn't, I could not even test as the texmfstart and ruby scripts
in general seem to be somehow non-functional:
	$ texmfstart texexec --mode=solution assignment-01
	the file 'texexec' is not found
	$ texexec assignment-01
	the file 'texexec.rb' is not found

But note that I have a full TeX installation (Debian texlive 2005), and
I have set the path
	export PATH=/usr/local/texlive2006/bin/i386-linux/:$PATH
so the 'right' texexec/texmfstart are found.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
BECCLES
The small bone buttons placed in bacon sandwiches by unemployed
guerrilla dentist.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Wed Jan  3 14:03:06 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 03 Jan 2007 14:03:06 +0100
Subject: [dev-context] TL2006 and ConTeXt
In-Reply-To: <20070103123723.GA20590@gamma.logic.tuwien.ac.at>
References: <459B7758.60905@elvenkind.com>
	<20070103123723.GA20590@gamma.logic.tuwien.ac.at>
Message-ID: <459BA98A.1030702@elvenkind.com>


Hi Norbert,

Norbert Preining wrote:
> Hi all!
> 
> On Mit, 03 Jan 2007, Taco Hoekwater wrote:
> 
>>See below for test images of TL 2006. Does anobody have the time
>>to test if the context on the images runs properly? I do not
> 
> No it doesn't, I could not even test as the texmfstart and ruby scripts
> in general seem to be somehow non-functional:
> 	$ texmfstart texexec --mode=solution assignment-01
> 	the file 'texexec' is not found
> 	$ texexec assignment-01
> 	the file 'texexec.rb' is not found

Can you try these with a --verbose option on the commandline? That
should print some extra debug information.

Best,

Taco

From adityam at umich.edu  Wed Jan  3 16:23:42 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 3 Jan 2007 10:23:42 -0500 (EST)
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <459B7553.5090500@wxs.nl>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
Message-ID: <alpine.WNT.0.81.0701030947190.3452@nqvgln>

On Wed, 3 Jan 2007, Hans Hagen wrote:

> Aditya Mahajan wrote:
> > Hi Hans,
> >
> >   Mojca and I are writing a module that uses a vim script to highlight 
> > source code. What is the best way to "package" this module. That is, 
> > where should the script file go? The ideal location will be
> >
> > scripts/context/vim/macros/
> >
> > Are third party modules allowed to "pollute" the scripts/ directory?
> > 
> hm, never thought of it; i suppose it is ok that way
> > We have another concern while calling the script. We need to call vim 
> > using
> >
> >    vim [options] -c "source path-to-script/2context.vim" filename
> >
> > This command is called using \externalprogram. We do not want to 
> > hard code the location of path to the scirpt. Does it make sense to 
> > add VIMINPUTS environment variable to texmfstart, to reduce the search 
> > time?
> > 
> hm, maybe but adding a truckload of editor paths will also slow down; an 
> option is to add 'vim' as suffix someplace
> > Is there a way to locate the file in the texmf-tree and pass the 
> > arguments to another program? I copied 2context.vim to texmf-tree and
> >
> >    texmfstart --locate 2context.vim
> >
> > gives its location. However
> >
> >    texmfstart bin:vim kpse:2context.vim
> >
> > does not load the file. I get
> >
> > texmfstart version 2.0.2
> > kpse     : direct (forced)
> > locating '2context.vim' in program space 'context'
> > locating '2context.vim' in program space 'context' using format 'other 
> > text files' 2context.vim is not resolved using 'system' call: vim  2context.vim
> >
> > What is the correct way of finding something in the texmf-tree but 
> > outside program space 'context'?
> > 
> --program=yourtex

what should yourtex be in this case?

> but i wonder, isn't the vim stuff in the context tree? can kpse find it?

Aparantly not. Something seems to be broken.

        kpsewhich --version
        kpathsea version
        Copyright 2005 Karl Berry & Olaf Weber.
        There is NO warranty.  You may redistribute this software
        under the terms of the GNU General Public License.
        For more information about these matters, see the files named
        GPL and LGPL.

Notice no version number!

     kpsewhich texexec.rb

does not give anything.

    kpsewhich --debug=10 texexec.rb

gives
   ...[lots of lines]
   ...[ending with repeats of]
   kdebug:hash_shared_lookup(texexec.rb.tex) => (nil)
   kdebug:hash_shared_lookup(texexec.rb) =>
   e:\isoimage\usr\local\context\tex\texmf-local/scripts/context/ruby/
   e:\isoimage\usr\local\context\tex\texmf-local/scripts/context/ruby/

Notice that the complete path is not output. That is compare from

   kpsewhich --debug=10 core-ver.tex

which gives
   ...[lots of lines]
   kdebug:hash_shared_lookup(core-ver.tex) =>
   e:\isoimage\usr\local\context\tex\texmf-local/tex/context/base/
   e:\isoimage\usr\local\context\tex\texmf-local/tex/context/base/
   kdebug:hash_shared_lookup(core-ver.tex) =>
   e:\isoimage\usr\local\context\tex\texmf-local/tex/context/base/
   e:\isoimage\usr\local\context\tex\texmf-local/tex/context/base/
   e:\isoimage\usr\local\context\tex\texmf-local/tex/context/base/core-ver.tex

The last line is the location of the file, which is output to stdout. 
So even though kpsewhich is able to find the file in scripts/, it does 
not give any output. I do not know what is happening here. Is there a 
bug in kpsewhich? The binaries are from context stand alone 
distribution overwritten by pdftex-1.40.0-beta-20060213 binaries (I do 
not know where the kpsewhich binary came from, context stand alone or 
pdftex).


Aditya


From mojca.miklavec.lists at gmail.com  Wed Jan  3 16:52:10 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 3 Jan 2007 16:52:10 +0100
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <459B7553.5090500@wxs.nl>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
Message-ID: <6faad9f00701030752s6fb7d454w28fe1e942f28b14e@mail.gmail.com>

On 1/3/07, Hans Hagen wrote:
> Aditya Mahajan wrote:
> > We have another concern while calling the script. We need to call vim
> > using
> >
> >    vim [options] -c "source path-to-script/2context.vim" filename
> >
> > This command is called using \externalprogram. We do not want to
> > hard code the location of path to the scirpt. Does it make sense to
> > add VIMINPUTS environment variable to texmfstart, to reduce the search
> > time?
> >
> hm, maybe but adding a truckload of editor paths will also slow down; an
> option is to add 'vim' as suffix someplace

I don't think that using additional environmental variables makes sense either.

> but i wonder, isn't the vim stuff in the context tree? can kpse find it?

> texmfstart --locate context.vim

works OK on linux and returns the proper path to the vim script.

Mojca

From adityam at umich.edu  Wed Jan  3 16:54:24 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 3 Jan 2007 10:54:24 -0500 (EST)
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <6faad9f00701030752s6fb7d454w28fe1e942f28b14e@mail.gmail.com>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
	<6faad9f00701030752s6fb7d454w28fe1e942f28b14e@mail.gmail.com>
Message-ID: <alpine.WNT.0.81.0701031053210.3452@nqvgln>

On Wed, 3 Jan 2007, Mojca Miklavec wrote:

> On 1/3/07, Hans Hagen wrote:
> > Aditya Mahajan wrote:
> > > We have another concern while calling the script. We need to call vim
> > > using
> > >
> > >    vim [options] -c "source path-to-script/2context.vim" filename
> > >
> > > This command is called using \externalprogram. We do not want to
> > > hard code the location of path to the scirpt. Does it make sense to
> > > add VIMINPUTS environment variable to texmfstart, to reduce the search
> > > time?
> > >
> > hm, maybe but adding a truckload of editor paths will also slow down; an
> > option is to add 'vim' as suffix someplace
> 
> I don't think that using additional environmental variables makes sense either.
> 
> > but i wonder, isn't the vim stuff in the context tree? can kpse find it?
> 
> > texmfstart --locate context.vim
> 
> works OK on linux and returns the proper path to the vim script.

It works ok here also, but kpse: expansion is not working.

Try
   texmfstart bin:vim kpse:core-ver.tex
and
   texmfstart bin:vim kpse:2context.vim

Aditya

From pragma at wxs.nl  Wed Jan  3 17:01:37 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Jan 2007 17:01:37 +0100
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <alpine.WNT.0.81.0701030947190.3452@nqvgln>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
	<alpine.WNT.0.81.0701030947190.3452@nqvgln>
Message-ID: <459BD361.9000903@wxs.nl>

Aditya Mahajan wrote:
>
>>> What is the correct way of finding something in the texmf-tree but 
>>> outside program space 'context'?
>>>
>>>       
>> --program=yourtex
>>     
>
> what should yourtex be in this case?
>   
dunno, depends on the texmf.cnf file
>   
>> but i wonder, isn't the vim stuff in the context tree? can kpse find it?
>>     
>
> Aparantly not. Something seems to be broken.
>
>         kpsewhich --version
>         kpathsea version
>         Copyright 2005 Karl Berry & Olaf Weber.
>         There is NO warranty.  You may redistribute this software
>         under the terms of the GNU General Public License.
>         For more information about these matters, see the files named
>         GPL and LGPL.
>
> Notice no version number!
>   
ancient ; and no warranty either
>      kpsewhich texexec.rb
>
> does not give anything.
>
>     kpsewhich --debug=10 texexec.rb
>
> gives
>    ...[lots of lines]
>    ...[ending with repeats of]
>    kdebug:hash_shared_lookup(texexec.rb.tex) => (nil)
>    kdebug:hash_shared_lookup(texexec.rb) =>
>    e:\isoimage\usr\local\context\tex\texmf-local/scripts/context/ruby/
>    e:\isoimage\usr\local\context\tex\texmf-local/scripts/context/ruby/
>
> Notice that the complete path is not output. That is compare from
>
>    kpsewhich --debug=10 core-ver.tex
>
> which gives
>    ...[lots of lines]
>    kdebug:hash_shared_lookup(core-ver.tex) =>
>    e:\isoimage\usr\local\context\tex\texmf-local/tex/context/base/
>    e:\isoimage\usr\local\context\tex\texmf-local/tex/context/base/
>    kdebug:hash_shared_lookup(core-ver.tex) =>
>    e:\isoimage\usr\local\context\tex\texmf-local/tex/context/base/
>    e:\isoimage\usr\local\context\tex\texmf-local/tex/context/base/
>    e:\isoimage\usr\local\context\tex\texmf-local/tex/context/base/core-ver.tex
>
> The last line is the location of the file, which is output to stdout. 
> So even though kpsewhich is able to find the file in scripts/, it does 
> not give any output. I do not know what is happening here. Is there a 
> bug in kpsewhich? The binaries are from context stand alone 
> distribution overwritten by pdftex-1.40.0-beta-20060213 binaries (I do 
> not know where the kpsewhich binary came from, context stand alone or 
> pdftex).
>
>   
maybe the scripts path in texmf.cnf has no \\ appended (recurse)


anyhow, maybe it's about time to kick out kpsewhich and use luatools 
which is faster too and more clever

Hans

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From mojca.miklavec.lists at gmail.com  Wed Jan  3 17:11:36 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 3 Jan 2007 17:11:36 +0100
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <6faad9f00701030752s6fb7d454w28fe1e942f28b14e@mail.gmail.com>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
	<6faad9f00701030752s6fb7d454w28fe1e942f28b14e@mail.gmail.com>
Message-ID: <6faad9f00701030811k61bd1665rddf7ffd363e8e8dd@mail.gmail.com>

> > but i wonder, isn't the vim stuff in the context tree? can kpse find it?
>
> > texmfstart --locate context.vim
>
> works OK on linux and returns the proper path to the vim script.

... while on the other hand I have "cont-eni.pdf" in texmf tree, which
isn't found.

Mojca

From mojca.miklavec.lists at gmail.com  Wed Jan  3 17:49:39 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 3 Jan 2007 17:49:39 +0100
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <alpine.WNT.0.81.0701031053210.3452@nqvgln>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
	<6faad9f00701030752s6fb7d454w28fe1e942f28b14e@mail.gmail.com>
	<alpine.WNT.0.81.0701031053210.3452@nqvgln>
Message-ID: <6faad9f00701030849j2d450443n37e6f26ccfdca2f3@mail.gmail.com>

On 1/3/07, Aditya Mahajan wrote:
> On Wed, 3 Jan 2007, Mojca Miklavec wrote:
> > > but i wonder, isn't the vim stuff in the context tree? can kpse find it?
> >
> > > texmfstart --locate context.vim
> >
> > works OK on linux and returns the proper path to the vim script.
>
> It works ok here also, but kpse: expansion is not working.
>
> Try
>    texmfstart bin:vim kpse:core-ver.tex
> and
>    texmfstart bin:vim kpse:2context.vim

If I put 2context.vim into [texmf]/scripts/context/vim/2context.vim,
then it doesn't work.
If I put it into [texmf]/context/data/2context.vim, then it works.

Don't ask me about the reason.

Mojca

From adityam at umich.edu  Wed Jan  3 17:51:54 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 3 Jan 2007 11:51:54 -0500 (EST)
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <459BD361.9000903@wxs.nl>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
	<alpine.WNT.0.81.0701030947190.3452@nqvgln> <459BD361.9000903@wxs.nl>
Message-ID: <alpine.WNT.0.81.0701031131500.3452@nqvgln>

On Wed, 3 Jan 2007, Hans Hagen wrote:

> Aditya Mahajan wrote:
> >
> >>> What is the correct way of finding something in the texmf-tree but 
> >>> outside program space 'context'?
> >>>
> >>> 
> >> --program=yourtex
> >> 
> >
> > what should yourtex be in this case?
> > 
> dunno, depends on the texmf.cnf file

I am using the default texmf.cnf that ships with the stand-alone 
distribution. Mine says

texmf-local/web2c/texmf.cnf
   progname = unsetprogname
   engine   = unsetengine
   backend  = unsetbackend

texmf/web2c/texmf.cnf
   progname = unset
   engine = unset



> > 
> >> but i wonder, isn't the vim stuff in the context tree? can kpse find it?
> >> 
> >
> > Aparantly not. Something seems to be broken.
> >
> >         kpsewhich --version
> >         kpathsea version
> >         Copyright 2005 Karl Berry & Olaf Weber.
> >         There is NO warranty.  You may redistribute this software
> >         under the terms of the GNU General Public License.
> >         For more information about these matters, see the files named
> >         GPL and LGPL.
> >
> > Notice no version number!
> > 
> ancient ; and no warranty either

This is the one that ships with windows stand-alone distribution. I 
just reinstalled everything.

> maybe the scripts path in texmf.cnf has no \\ appended (recurse)
>

There is // at the end of TEXMFSCRITPS and RUBYINPUTS, etc.in 
texmf/web2c/texmf.cnf But the file texmf-local/web2c/texmf.cnf did not 
have // at the end. I added it, but that did not change anything.
   kpsewhich texexec.rb
still does not return anything.

> anyhow, maybe it's about time to kick out kpsewhich and use luatools 
> which is faster too and more clever

Ok. So for the time being, we will put 2context.vim in the same 
directory as the module. Assuming that the module ends up somewhere in 
tex/context/third/t-<whatever> kpsewhich will be able to find it. 
Once, luatools become available, we may choose a different packaging 
structure.

To Mojca:
1) What should we name the module? I was thinking t-syn-vim.tex, that 
way, if someone uses a different highlighting engine, say scite, that 
module can be named t-syn-scite etc. (Hans, did you get the hint ;)

2) I will try to get the system call correct. If 2context.vim is in 
texmf-<whatever>/tex/context/third/t-syn-vim/ then, something like 
this should work
\executesystemcommand{ texmfstart bin:vim -e (and other options)
  -c "source kpse:2context" ...etc...}

We need to play around a bit to get " (quotes) to work inside a call 
to texmfstart. Right now, texmfstart eats the quotes.

Aditya

From mojca.miklavec.lists at gmail.com  Wed Jan  3 18:50:13 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 3 Jan 2007 18:50:13 +0100
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <alpine.WNT.0.81.0701031131500.3452@nqvgln>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl> <alpine.WNT.0.81.0701030947190.3452@nqvgln>
	<459BD361.9000903@wxs.nl> <alpine.WNT.0.81.0701031131500.3452@nqvgln>
Message-ID: <6faad9f00701030950j7dadab77v3545df2d5adccf61@mail.gmail.com>

> Ok. So for the time being, we will put 2context.vim in the same
> directory as the module. Assuming that the module ends up somewhere in
> tex/context/third/t-<whatever> kpsewhich will be able to find it.
> Once, luatools become available, we may choose a different packaging
> structure.

That should also be OK. There's only one file anyway.

> To Mojca:
> 1) What should we name the module? I was thinking t-syn-vim.tex,

I'm OK with that name, but perhaps t-syntax-vim, I don't like
shortcuts, syn could stand for just about anything.

> that way, if someone uses a different highlighting engine, say scite, that
> module can be named t-syn-scite etc. (Hans, did you get the hint ;)

If I'm/was thinking about the same thing as you are thinking ...
... then Hans will have to implement that anyway ;)

Mojca

From pragma at wxs.nl  Wed Jan  3 18:28:10 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Jan 2007 18:28:10 +0100
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <alpine.WNT.0.81.0701031131500.3452@nqvgln>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
	<alpine.WNT.0.81.0701030947190.3452@nqvgln>
	<459BD361.9000903@wxs.nl>
	<alpine.WNT.0.81.0701031131500.3452@nqvgln>
Message-ID: <459BE7AA.4080003@wxs.nl>

Aditya Mahajan wrote:
>
> To Mojca:
> 1) What should we name the module? I was thinking t-syn-vim.tex, that 
> way, if someone uses a different highlighting engine, say scite, that 
> module can be named t-syn-scite etc. (Hans, did you get the hint ;)
t-vim is also ok i think

concerning scite ... i wrote an xml export + module for that but cannot 
find back the related style and may even have lost the style
>
Hans  

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From mojca.miklavec.lists at gmail.com  Wed Jan  3 19:11:42 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 3 Jan 2007 19:11:42 +0100
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <459BE7AA.4080003@wxs.nl>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl> <alpine.WNT.0.81.0701030947190.3452@nqvgln>
	<459BD361.9000903@wxs.nl> <alpine.WNT.0.81.0701031131500.3452@nqvgln>
	<459BE7AA.4080003@wxs.nl>
Message-ID: <6faad9f00701031011p6e84d229he611e0f104bb4@mail.gmail.com>

> concerning scite ... i wrote an xml export + module for that but cannot
> find back the related style and may even have lost the style

What about "stealing" scite's highlighting algorithm and include that
one into a lua module?
I don't know if that's possible though since I don't know in which
language it has been implemented, but in case it was lua ...

Mojca

From mojca.miklavec.lists at gmail.com  Wed Jan  3 19:28:37 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 3 Jan 2007 19:28:37 +0100
Subject: [dev-context] XeTeX fails to create formats
Message-ID: <6faad9f00701031028r1fec0f21u7cf47854fcc43b92@mail.gmail.com>

Hello Hans,

when I tried to create XeTeX formats today (it might be that I screwed
up something on my system as well) I got the following error:

loading         : Context Encoding Macros (pdf)
! Undefined control sequence.
l.63 \ifcase\pdfgentounicode
                             \else \expandafter \endinput \fi
?

Mojca

(Is there any ctxtools --degrade? ;)

From pragma at wxs.nl  Wed Jan  3 19:53:11 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Jan 2007 19:53:11 +0100
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <6faad9f00701031011p6e84d229he611e0f104bb4@mail.gmail.com>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
	<alpine.WNT.0.81.0701030947190.3452@nqvgln>
	<459BD361.9000903@wxs.nl>
	<alpine.WNT.0.81.0701031131500.3452@nqvgln>
	<459BE7AA.4080003@wxs.nl>
	<6faad9f00701031011p6e84d229he611e0f104bb4@mail.gmail.com>
Message-ID: <459BFB97.2090403@wxs.nl>

Mojca Miklavec wrote:
>> concerning scite ... i wrote an xml export + module for that but cannot
>> find back the related style and may even have lost the style
>
> What about "stealing" scite's highlighting algorithm and include that
> one into a lua module?
> I don't know if that's possible though since I don't know in which
> language it has been implemented, but in case it was lua ...
well, each lexer is coded in c++ (i wrote the tex and mp lexers and believe me, the lua versions are not that different -) 

coming lua will have a high end parsing subengine and taco and i are playing with it already 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Wed Jan  3 20:01:28 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Jan 2007 20:01:28 +0100
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <6faad9f00701030849j2d450443n37e6f26ccfdca2f3@mail.gmail.com>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
	<6faad9f00701030752s6fb7d454w28fe1e942f28b14e@mail.gmail.com>
	<alpine.WNT.0.81.0701031053210.3452@nqvgln>
	<6faad9f00701030849j2d450443n37e6f26ccfdca2f3@mail.gmail.com>
Message-ID: <459BFD88.8040606@wxs.nl>

Mojca Miklavec wrote:
> On 1/3/07, Aditya Mahajan wrote:
>   
>> On Wed, 3 Jan 2007, Mojca Miklavec wrote:
>>     
>>>> but i wonder, isn't the vim stuff in the context tree? can kpse find it?
>>>>         
>>>> texmfstart --locate context.vim
>>>>         
>>> works OK on linux and returns the proper path to the vim script.
>>>       
>> It works ok here also, but kpse: expansion is not working.
>>
>> Try
>>    texmfstart bin:vim kpse:core-ver.tex
>> and
>>    texmfstart bin:vim kpse:2context.vim
>>     
>
> If I put 2context.vim into [texmf]/scripts/context/vim/2context.vim,
> then it doesn't work.
> If I put it into [texmf]/context/data/2context.vim, then it works.
>
> Don't ask me about the reason.
>   
ok, the reason is that kpse only knows a limited set of suffixes, and everything else is 'other text file' and that's what the data path is for

in luatex i'll make this configurable (after all, we no longer have a hard coded kpse) 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Wed Jan  3 20:03:22 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Jan 2007 20:03:22 +0100
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <6faad9f00701030950j7dadab77v3545df2d5adccf61@mail.gmail.com>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
	<alpine.WNT.0.81.0701030947190.3452@nqvgln>
	<459BD361.9000903@wxs.nl>
	<alpine.WNT.0.81.0701031131500.3452@nqvgln>
	<6faad9f00701030950j7dadab77v3545df2d5adccf61@mail.gmail.com>
Message-ID: <459BFDFA.5060201@wxs.nl>

Mojca Miklavec wrote:
>> Ok. So for the time being, we will put 2context.vim in the same
>> directory as the module. Assuming that the module ends up somewhere in
>> tex/context/third/t-<whatever> kpsewhich will be able to find it.
>> Once, luatools become available, we may choose a different packaging
>> structure.
>>     
>
> That should also be OK. There's only one file anyway.
>
>   
>> To Mojca:
>> 1) What should we name the module? I was thinking t-syn-vim.tex,
>>     
>
> I'm OK with that name, but perhaps t-syntax-vim, I don't like
> shortcuts, syn could stand for just about anything.
>
>   
>> that way, if someone uses a different highlighting engine, say scite, that
>> module can be named t-syn-scite etc. (Hans, did you get the hint ;)
>>     
>
> If I'm/was thinking about the same thing as you are thinking ...
> .... then Hans will have to implement that anyway ;)
>
>   
yeah, since he has enough free time left anyway -) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From adityam at umich.edu  Wed Jan  3 20:03:58 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 3 Jan 2007 14:03:58 -0500 (EST)
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <alpine.WNT.0.81.0701031131500.3452@nqvgln>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
	<alpine.WNT.0.81.0701030947190.3452@nqvgln> <459BD361.9000903@wxs.nl>
	<alpine.WNT.0.81.0701031131500.3452@nqvgln>
Message-ID: <alpine.WNT.0.81.0701031401050.3452@nqvgln>

On Wed, 3 Jan 2007, Aditya Mahajan wrote:

> \executesystemcommand{ texmfstart bin:vim -e (and other options)
>   -c "source kpse:2context" ...etc...}
> 
> We need to play around a bit to get " (quotes) to work inside a call 
> to texmfstart. Right now, texmfstart eats the quotes.

How does write18 handle quotes? Right now, on a command prompt this 
works fine

texmfstart --verbose bin:vim -c "set nu" t-vim.tex

but in a test file

\executesystemcommand{texmfstart --verbose bin:vim -c "set nu" 
t-vim.tex}

gives

system(texmfstart --verbose bin:vim -c "set nu" t-vim.tex)...executed.

Notice that the quotes '..' went missing. How to get this to run. I 
want texmfstart to run vim as

   vim -c "command" file

How do I save these quotes from texmfstart?

Aditya

From pragma at wxs.nl  Wed Jan  3 20:04:42 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Jan 2007 20:04:42 +0100
Subject: [dev-context] XeTeX fails to create formats
In-Reply-To: <6faad9f00701031028r1fec0f21u7cf47854fcc43b92@mail.gmail.com>
References: <6faad9f00701031028r1fec0f21u7cf47854fcc43b92@mail.gmail.com>
Message-ID: <459BFE4A.60001@wxs.nl>

Mojca Miklavec wrote:
> Hello Hans,
>
> when I tried to create XeTeX formats today (it might be that I screwed
> up something on my system as well) I got the following error:
>
> loading         : Context Encoding Macros (pdf)
> ! Undefined control sequence.
> l.63 \ifcase\pdfgentounicode
>                              \else \expandafter \endinput \fi
> ?
>
> Mojca
>
> (Is there any ctxtools --degrade? ;)
>   
no, but you have used a beta tree 

i was not aware of that not being loaded by xetex 

\beginXETEX \endinput \endXETEX 

at the top of the file 

should help 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Wed Jan  3 20:10:03 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Jan 2007 20:10:03 +0100
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <alpine.WNT.0.81.0701031401050.3452@nqvgln>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
	<alpine.WNT.0.81.0701030947190.3452@nqvgln>
	<459BD361.9000903@wxs.nl>
	<alpine.WNT.0.81.0701031131500.3452@nqvgln>
	<alpine.WNT.0.81.0701031401050.3452@nqvgln>
Message-ID: <459BFF8B.30301@wxs.nl>

Aditya Mahajan wrote:
> On Wed, 3 Jan 2007, Aditya Mahajan wrote:
>
>> \executesystemcommand{ texmfstart bin:vim -e (and other options)
>>   -c "source kpse:2context" ...etc...}
>>
>> We need to play around a bit to get " (quotes) to work inside a call 
>> to texmfstart. Right now, texmfstart eats the quotes.
>
> How does write18 handle quotes? Right now, on a command prompt this 
> works fine
>
> texmfstart --verbose bin:vim -c "set nu" t-vim.tex
>
> but in a test file
texmfstart --verbose bin:vim "-c set nu t-vim.tex"

may work better 

>
> \executesystemcommand{texmfstart --verbose bin:vim -c "set nu" t-vim.tex}
>
> gives
>
> system(texmfstart --verbose bin:vim -c "set nu" t-vim.tex)...executed.
>
> Notice that the quotes '..' went missing. How to get this to run. I 
> want texmfstart to run vim as
>
>   vim -c "command" file
>
> How do I save these quotes from texmfstart?
>
> Aditya


-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From adityam at umich.edu  Wed Jan  3 20:27:31 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 3 Jan 2007 14:27:31 -0500 (EST)
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <459BFF8B.30301@wxs.nl>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
	<alpine.WNT.0.81.0701030947190.3452@nqvgln> <459BD361.9000903@wxs.nl>
	<alpine.WNT.0.81.0701031131500.3452@nqvgln>
	<alpine.WNT.0.81.0701031401050.3452@nqvgln> <459BFF8B.30301@wxs.nl>
Message-ID: <alpine.WNT.0.81.0701031426580.3452@nqvgln>

On Wed, 3 Jan 2007, Hans Hagen wrote:

> Aditya Mahajan wrote:
> > On Wed, 3 Jan 2007, Aditya Mahajan wrote:
> >
> >> \executesystemcommand{ texmfstart bin:vim -e (and other options)
> >>   -c "source kpse:2context" ...etc...}
> >>
> >> We need to play around a bit to get " (quotes) to work inside a call 
> >> to texmfstart. Right now, texmfstart eats the quotes.
> >
> > How does write18 handle quotes? Right now, on a command prompt this 
> > works fine
> >
> > texmfstart --verbose bin:vim -c "set nu" t-vim.tex
> >
> > but in a test file
> texmfstart --verbose bin:vim "-c set nu t-vim.tex"
> 
> may work better

Thanks. This works

    {\executesystemcommand
       {texmfstart bin:vim
           "-u NONE  % No need to read unnessary configurations
            -e       % run in ex mode
%            -V10log  % For debugging only, will go away later.
            -c \letterbackslash"set noswapfile\letterbackslash"
            -c \letterbackslash"set tabstop=\@@vstab\letterbackslash"
            -c \letterbackslash"set cp\letterbackslash"
            -c \letterbackslash"syntax on\letterbackslash"
            -c \letterbackslash"set syntax=\@@vssyntax\letterbackslash"
            -c \letterbackslash"let 
contextstartline=\@@vsstart\letterbackslash"
            -c \letterbackslash"let 
contextstopline=\@@vsstop\letterbackslash"
            -c \letterbackslash"source 
kpse:2context.vim\letterbackslash"
            -c \letterbackslash"wqa\letterbackslash"
             " #1}}


Basically need to esacpe the quote inside quote.

Aditya

From mojca.miklavec.lists at gmail.com  Wed Jan  3 22:11:44 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 3 Jan 2007 22:11:44 +0100
Subject: [dev-context] XeTeX fails to create formats
In-Reply-To: <459BFE4A.60001@wxs.nl>
References: <6faad9f00701031028r1fec0f21u7cf47854fcc43b92@mail.gmail.com>
	<459BFE4A.60001@wxs.nl>
Message-ID: <6faad9f00701031311y3dc48b3fh998072b8e87f8e9a@mail.gmail.com>

On 1/3/07, Hans Hagen wrote:
> Mojca Miklavec wrote:
> > Hello Hans,
> >
> > when I tried to create XeTeX formats today (it might be that I screwed
> > up something on my system as well) I got the following error:
> >
> > loading         : Context Encoding Macros (pdf)
> > ! Undefined control sequence.
> > l.63 \ifcase\pdfgentounicode
> >                              \else \expandafter \endinput \fi
> > ?
> >
> > Mojca
> >
> > (Is there any ctxtools --degrade? ;)
> >
> no, but you have used a beta tree
>
> i was not aware of that not being loaded by xetex
>
> \beginXETEX \endinput \endXETEX
>
> at the top of the file
>
> should help

Thanks, it works now (not as a one-liner, I had to split it in
multiple lines for some reason, but I can now generate the formats
just fine).

Mojca

From pragma at wxs.nl  Wed Jan  3 22:57:07 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Jan 2007 22:57:07 +0100
Subject: [dev-context] XeTeX fails to create formats
In-Reply-To: <6faad9f00701031311y3dc48b3fh998072b8e87f8e9a@mail.gmail.com>
References: <6faad9f00701031028r1fec0f21u7cf47854fcc43b92@mail.gmail.com>
	<459BFE4A.60001@wxs.nl>
	<6faad9f00701031311y3dc48b3fh998072b8e87f8e9a@mail.gmail.com>
Message-ID: <459C26B3.5030406@wxs.nl>

Mojca Miklavec wrote:
> On 1/3/07, Hans Hagen wrote:
>   
>> Mojca Miklavec wrote:
>>     
>>> Hello Hans,
>>>
>>> when I tried to create XeTeX formats today (it might be that I screwed
>>> up something on my system as well) I got the following error:
>>>
>>> loading         : Context Encoding Macros (pdf)
>>> ! Undefined control sequence.
>>> l.63 \ifcase\pdfgentounicode
>>>                              \else \expandafter \endinput \fi
>>> ?
>>>
>>> Mojca
>>>
>>> (Is there any ctxtools --degrade? ;)
>>>
>>>       
>> no, but you have used a beta tree
>>
>> i was not aware of that not being loaded by xetex
>>
>> \beginXETEX \endinput \endXETEX
>>
>> at the top of the file
>>
>> should help
>>     
>
> Thanks, it works now (not as a one-liner, I had to split it in
> multiple lines for some reason, but I can now generate the formats
> just fine).
>   
does xetex put a unicode vector in the file (grep for ToUnicode) ; if 
needed disable compression

Hans

-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Wed Jan  3 23:06:41 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Jan 2007 23:06:41 +0100
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <alpine.WNT.0.81.0701031426580.3452@nqvgln>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
	<alpine.WNT.0.81.0701030947190.3452@nqvgln>
	<459BD361.9000903@wxs.nl>
	<alpine.WNT.0.81.0701031131500.3452@nqvgln>
	<alpine.WNT.0.81.0701031401050.3452@nqvgln> <459BFF8B.30301@wxs.nl>
	<alpine.WNT.0.81.0701031426580.3452@nqvgln>
Message-ID: <459C28F1.8010304@wxs.nl>

Aditya Mahajan wrote:
> On Wed, 3 Jan 2007, Hans Hagen wrote:
>
>> Aditya Mahajan wrote:
>> > On Wed, 3 Jan 2007, Aditya Mahajan wrote:
>> >
>> >> \executesystemcommand{ texmfstart bin:vim -e (and other options)
>> >>   -c "source kpse:2context" ...etc...}
>> >>
>> >> We need to play around a bit to get " (quotes) to work inside a 
>> call >> to texmfstart. Right now, texmfstart eats the quotes.
>> >
>> > How does write18 handle quotes? Right now, on a command prompt this 
>> > works fine
>> >
>> > texmfstart --verbose bin:vim -c "set nu" t-vim.tex
>> >
>> > but in a test file
>> texmfstart --verbose bin:vim "-c set nu t-vim.tex"
>>
>> may work better
>
> Thanks. This works
>
>    {\executesystemcommand
>       {texmfstart bin:vim
>           "-u NONE  % No need to read unnessary configurations
>            -e       % run in ex mode
> %            -V10log  % For debugging only, will go away later.
>            -c \letterbackslash"set noswapfile\letterbackslash"
>            -c \letterbackslash"set tabstop=\@@vstab\letterbackslash"
>            -c \letterbackslash"set cp\letterbackslash"
>            -c \letterbackslash"syntax on\letterbackslash"
>            -c \letterbackslash"set syntax=\@@vssyntax\letterbackslash"
>            -c \letterbackslash"let 
> contextstartline=\@@vsstart\letterbackslash"
>            -c \letterbackslash"let 
> contextstopline=\@@vsstop\letterbackslash"
>            -c \letterbackslash"source kpse:2context.vim\letterbackslash"
>            -c \letterbackslash"wqa\letterbackslash"
>             " #1}}
>
>
> Basically need to esacpe the quote inside quote.
>
oh, so actually we should patch texexec to escape the tui stuff?

Hans


-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From sanjoy at mrao.cam.ac.uk  Wed Jan  3 23:12:08 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Wed, 03 Jan 2007 22:12:08 +0000
Subject: [dev-context] TL2006 and ConTeXt
In-Reply-To: Your message of "Wed, 03 Jan 2007 13:37:23 +0100."
	<20070103123723.GA20590@gamma.logic.tuwien.ac.at> 
Message-ID: <E1H2ELA-0004rc-00@skye.ra.phy.cam.ac.uk>

> in general seem to be somehow non-functional:
> ...
> But note that I have a full TeX installation (Debian texlive 2005), and
> I have set the path
> 	export PATH=/usr/local/texlive2006/bin/i386-linux/:$PATH
> so the 'right' texexec/texmfstart are found.

You likely need to set TEXMFCNF to the web2c directory in the texlive
tree.  I got it to work well here by doing the following:

1. Downloaded the live texlive iso.bz2
2. bunzip2'ed it, and mounted it with -o loop in ~/admin/tex/texlive/image/
3. Prepended .../texlive/bin/i386-linux to PATH (just as you did)
4. export TEXMFCNF=/home/sanjoy/admin/tex/texlive/image/texlive/texmf/web2c

Then I ran the following trip test, which it passed with 100% marks.

I texexec'ed my 54-page textbooklet with those env variables set,
sending the output to 'build-tl.log'.  I also ran texexec using my
current context/pdftex install, sending the output to 'build.log'.
All the program versions turn out to be the same as in TL 2006
(context 2006.12.27, pdftex 1.40.0, metapost 0.993).  The textbooklet
uses metafun, bibtex, indexes, colors, so it's a reasonably thorough
test.

I cleaned up spurious path differences in the log files by running
them through the python script below, then ran diff -U 0 on the
processed log files.

================  fix.py ========================================
#!/usr/bin/python

from sys import stdin,stdout
import re

maxlen = 80
file   = ''

# unwrap long lines
for l in stdin:
    if l == '\n': continue  # remove blank lines
    if len(l) == maxlen:
        file += l[:-1]
    else:
        file += l

# normalize paths
stdout.write(re.sub(r'/usr/(local/|)share/texmf(-texlive|)|/home/sanjoy/admin/tex/texlive/image/texlive/texmf(-dist|)','#ROOT#',file))
=============================================================

The resulting 'diff -U 0' shows only differences in program versions
(e.g. pdftex vs pdftexk), random seeds, format dates but not versions,
web2c versions, or runtimes.  So the live texlive2006 passes this
torture test.  Even the overfull hboxes were identical.

--- build-fixed.log	2007-01-03 15:00:50.000000000 -0700
+++ build-tl-fixed.log	2007-01-03 15:00:51.000000000 -0700
@@ -8 +8 @@
-TeXExec | using randomseed 222
+TeXExec | using randomseed 1331
@@ -11 +11,2 @@
-This is pdfTeX, Version 3.141592-1.40.0 (Web2C 7.5.6)
+This is pdfTeXk, Version 3.141592-1.40.0 (Web2C 7.5.6)
+ %&-line parsing enabled.
@@ -15 +16 @@
-ConTeXt  ver: 2006.12.27 11:34 MK II  fmt: 2007.1.2  int: english/english
+ConTeXt  ver: 2006.12.27 11:34 MK II  fmt: 2007.1.3  int: english/english
@@ -346 +347 @@
-This is MetaPost, Version 0.993 (Web2C 7.5.5)
+This is MetaPost, Version 0.993 (Web2C 7.5.6)
@@ -348 +349,2 @@
-(notes-mpgraph.mp (#ROOT#/metapost/base/boxes.mp)
+(notes-mpgraph.mp
+(#ROOT#/metapost/base/boxes.mp)
@@ -350 +352 @@
-metafun 2007-1-2 23:53
+metafun 2007-1-3 13:12
@@ -354 +356 @@
-TeXExec | runtime: 0.122862
+TeXExec | runtime: 0.094395
@@ -367 +369 @@
-This is BibTeX, Version 0.99c (Web2C 7.5.5)
+This is BibTeX, Version 0.99c (Web2C 7.5.6)
@@ -373 +375 @@
-TeXExec | using randomseed 222
+TeXExec | using randomseed 1331
@@ -376 +378,2 @@
-This is pdfTeX, Version 3.141592-1.40.0 (Web2C 7.5.6)
+This is pdfTeXk, Version 3.141592-1.40.0 (Web2C 7.5.6)
+ %&-line parsing enabled.
@@ -380 +383 @@
-ConTeXt  ver: 2006.12.27 11:34 MK II  fmt: 2007.1.2  int: english/english
+ConTeXt  ver: 2006.12.27 11:34 MK II  fmt: 2007.1.3  int: english/english
@@ -710 +713 @@
-This is MetaPost, Version 0.993 (Web2C 7.5.5)
+This is MetaPost, Version 0.993 (Web2C 7.5.6)
@@ -712 +715,2 @@
-(notes-mpgraph.mp (#ROOT#/metapost/base/boxes.mp)
+(notes-mpgraph.mp
+(#ROOT#/metapost/base/boxes.mp)
@@ -714 +718 @@
-metafun 2007-1-2 23:53
+metafun 2007-1-3 13:12
@@ -718 +722 @@
-TeXExec | runtime: 0.656776
+TeXExec | runtime: 0.100962
@@ -732 +736 @@
-TeXExec | using randomseed 222
+TeXExec | using randomseed 1331
@@ -735 +739,2 @@
-This is pdfTeX, Version 3.141592-1.40.0 (Web2C 7.5.6)
+This is pdfTeXk, Version 3.141592-1.40.0 (Web2C 7.5.6)
+ %&-line parsing enabled.
@@ -739 +744 @@
-ConTeXt  ver: 2006.12.27 11:34 MK II  fmt: 2007.1.2  int: english/english
+ConTeXt  ver: 2006.12.27 11:34 MK II  fmt: 2007.1.3  int: english/english
@@ -1069 +1074 @@
-This is MetaPost, Version 0.993 (Web2C 7.5.5)
+This is MetaPost, Version 0.993 (Web2C 7.5.6)
@@ -1071 +1076,2 @@
-(notes-mpgraph.mp (#ROOT#/metapost/base/boxes.mp)
+(notes-mpgraph.mp
+(#ROOT#/metapost/base/boxes.mp)
@@ -1073 +1079 @@
-metafun 2007-1-2 23:53
+metafun 2007-1-3 13:12
@@ -1077 +1083 @@
-TeXExec | runtime: 0.024736
+TeXExec | runtime: 0.092112
@@ -1089 +1095 @@
-TeXExec | runtime: 9.247071
+TeXExec | runtime: 10.145878

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From adityam at umich.edu  Thu Jan  4 03:41:50 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 3 Jan 2007 21:41:50 -0500 (EST)
Subject: [dev-context] [NTG-context] Problems with "mathalign"
In-Reply-To: <459C0EC9.5070400@elvenkind.com>
References: <6faad9f00701030931l59be89a8y5a6cc5e14ebdcc70@mail.gmail.com>
	<alpine.WNT.0.81.0701031412110.3452@nqvgln>
	<459C0EC9.5070400@elvenkind.com>
Message-ID: <alpine.WNT.0.81.0701032131080.3844@nqvgln>

(changed lists)

On Wed, 3 Jan 2007, Taco Hoekwater wrote:

> Aditya Mahajan wrote:
> > 
> > 
> > I can confirm that there is an extra number. I do not know what is 
> > causing this. I am not aware of anything in core-mat has changed.
> 
> There is that extra stuff in \everymathematics.  Could that be it?

The file runs fine with ConTeXt 2006-11-24 19:15 so it is something in 
the last month. (This version is available as the windows stand alone 
distribution from pragma's website.)

Changes in the last 5 weeks to math related files are changes in 
math-pln.tex. I do not know who these could have caused trouble.

The \let\next$ change in core-mat. I reverted back to \def\next{$} 
inside a test file, and this does not seem to trouble.

The colon definitions inside math-tex.tex, they should not cause any 
problem, unless I redefined a core command. (I do not think so).

Some slight changes in math-ext.tex, but that was a wrong definition 
of harpoons.

So, it is either the \everymathematics change, or a change in some 
macro that is called by \placeformula.

Aditya

From contexttest-bugs at foundry.supelec.fr  Thu Jan  4 07:27:29 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Thu, 4 Jan 2007 01:27:29 -0500
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B49=5D_=5Cstartma?=
	=?utf-8?q?thalign_gives_an_extra_formula_number?=
Message-ID: <200701040627.l046RTGX003578@semantic.metz.supelec.fr>

Bugs item #49, was opened at 2007-01-04 01:27
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=49&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Aditya Mahajan (adityam)
Assigned to: Nobody (None)
Summary: \startmathalign gives an extra formula number 
Resolution: None
Version: None
Category: macros


Initial Comment:
The following code gives an exra line with formla number

\placeformula \startformula \startalign
  \NC a \EQ b \NR[+]
  \NC c \EQ d \NR[+]
\stopalign \stopformula



----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=49&group_id=21


From adityam at umich.edu  Thu Jan  4 07:08:28 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Thu, 4 Jan 2007 01:08:28 -0500 (EST)
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <459C28F1.8010304@wxs.nl>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
	<alpine.WNT.0.81.0701030947190.3452@nqvgln> <459BD361.9000903@wxs.nl>
	<alpine.WNT.0.81.0701031131500.3452@nqvgln>
	<alpine.WNT.0.81.0701031401050.3452@nqvgln>
	<459BFF8B.30301@wxs.nl> <alpine.WNT.0.81.0701031426580.3452@nqvgln>
	<459C28F1.8010304@wxs.nl>
Message-ID: <alpine.WNT.0.81.0701040039040.3308@nqvgln>

On Wed, 3 Jan 2007, Hans Hagen wrote:

> > Basically need to esacpe the quote inside quote.
> >
> oh, so actually we should patch texexec to escape the tui stuff?

No, I think that texexec is working in an expeted manner. I did not 
clearly understand how it worked, and that is why the confusion.

The module is finally ready. It works well for small snippets (<1000 
lines). I have uploaded it to http://modules.contextgarden.net/t-vim I 
made a mistake while naming the module, so all the files are in 
t-vim.tar.gz directory instead of t-vim. Hopefully, this will not 
cause any trouble.

The documentation is at
http://dl.contextgarden.net/modules/t-vim.tar.gz/doc/context/t-vim/t-vim.pdf

and a sample matlab and context pretty output at

http://dl.contextgarden.net/modules/t-vim.tar.gz/doc/context/t-vim/t-vim-demo.pdf

The context output is very similar to what I see on the vim screen :)

Aditya

From pragma at wxs.nl  Thu Jan  4 10:20:22 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 04 Jan 2007 10:20:22 +0100
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <alpine.WNT.0.81.0701040039040.3308@nqvgln>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
	<alpine.WNT.0.81.0701030947190.3452@nqvgln>
	<459BD361.9000903@wxs.nl>
	<alpine.WNT.0.81.0701031131500.3452@nqvgln>
	<alpine.WNT.0.81.0701031401050.3452@nqvgln> <459BFF8B.30301@wxs.nl>
	<alpine.WNT.0.81.0701031426580.3452@nqvgln>
	<459C28F1.8010304@wxs.nl>
	<alpine.WNT.0.81.0701040039040.3308@nqvgln>
Message-ID: <459CC6D6.6090102@wxs.nl>

Aditya Mahajan wrote:
> On Wed, 3 Jan 2007, Hans Hagen wrote:
>
>> > Basically need to esacpe the quote inside quote.
>> >
>> oh, so actually we should patch texexec to escape the tui stuff?
>
> No, I think that texexec is working in an expeted manner. I did not 
> clearly understand how it worked, and that is why the confusion.
>
> The module is finally ready. It works well for small snippets (<1000 
> lines). I have uploaded it to http://modules.contextgarden.net/t-vim I 
> made a mistake while naming the module, so all the files are in 
> t-vim.tar.gz directory instead of t-vim. Hopefully, this will not 
> cause any trouble.
>
> The documentation is at
> http://dl.contextgarden.net/modules/t-vim.tar.gz/doc/context/t-vim/t-vim.pdf 
>
>
> and a sample matlab and context pretty output at
>
> http://dl.contextgarden.net/modules/t-vim.tar.gz/doc/context/t-vim/t-vim-demo.pdf 
>
>
> The context output is very similar to what I see on the vim screen :)
looks like there is a problem around line 35

%D \starttyping
%D \definevimtyping [RUBY] [syntax=ruby]
%D \stoptyping
%D after which you can get ruby highlighting by
%D \starttyping
%D \startRUBY
%D ....
%D \stopRUBY
%D \stoptyping


has funny colloring

Hans

From taco at elvenkind.com  Thu Jan  4 10:29:51 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 04 Jan 2007 10:29:51 +0100
Subject: [dev-context] [NTG-context] Problems with "mathalign"
In-Reply-To: <alpine.WNT.0.81.0701032131080.3844@nqvgln>
References: <6faad9f00701030931l59be89a8y5a6cc5e14ebdcc70@mail.gmail.com>	<alpine.WNT.0.81.0701031412110.3452@nqvgln>	<459C0EC9.5070400@elvenkind.com>
	<alpine.WNT.0.81.0701032131080.3844@nqvgln>
Message-ID: <459CC90F.4080104@elvenkind.com>



Aditya Mahajan wrote:
> (changed lists)
> 
> On Wed, 3 Jan 2007, Taco Hoekwater wrote:
> 
> 
>>Aditya Mahajan wrote:
>>
>>>
>>>I can confirm that there is an extra number. I do not know what is 
>>>causing this. I am not aware of anything in core-mat has changed.
>>
>>There is that extra stuff in \everymathematics.  Could that be it?
> 
> The file runs fine with ConTeXt 2006-11-24 19:15 so it is something in 
> the last month. (This version is available as the windows stand alone 
> distribution from pragma's website.)

I've been staring at this for some time now, but I don't see
happens. The number comes from \stopformula, but I do not
remember what was supposed to prevent its appearance in the
first place.

If you still have the Nov 24 context version, can you run this:

\starttext
\loggingall
\placeformula \startformula \startalign
   \NC a \EQ b \NR[+]
   \NC c \EQ d \NR[+]
\stopalign \stopformula
\stoptext

and email me the log file?


Taco

From taco at elvenkind.com  Thu Jan  4 10:31:16 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 04 Jan 2007 10:31:16 +0100
Subject: [dev-context] TL2006 and ConTeXt
In-Reply-To: <E1H2ELA-0004rc-00@skye.ra.phy.cam.ac.uk>
References: <E1H2ELA-0004rc-00@skye.ra.phy.cam.ac.uk>
Message-ID: <459CC964.8060007@elvenkind.com>



Sanjoy Mahajan wrote:
>>in general seem to be somehow non-functional:
>>...
>>But note that I have a full TeX installation (Debian texlive 2005), and
>>I have set the path
>>	export PATH=/usr/local/texlive2006/bin/i386-linux/:$PATH
>>so the 'right' texexec/texmfstart are found.
> 
> 
> You likely need to set TEXMFCNF to the web2c directory in the texlive
> tree.  I got it to work well here by doing the following:
> 
> 1. Downloaded the live texlive iso.bz2
> 2. bunzip2'ed it, and mounted it with -o loop in ~/admin/tex/texlive/image/
> 3. Prepended .../texlive/bin/i386-linux to PATH (just as you did)
> 4. export TEXMFCNF=/home/sanjoy/admin/tex/texlive/image/texlive/texmf/web2c
> 
> Then I ran the following trip test, which it passed with 100% marks.

Great news, thanks

Best, Taco

From pragma at wxs.nl  Thu Jan  4 10:37:17 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 04 Jan 2007 10:37:17 +0100
Subject: [dev-context] [NTG-context] Problems with "mathalign"
In-Reply-To: <459CC90F.4080104@elvenkind.com>
References: <6faad9f00701030931l59be89a8y5a6cc5e14ebdcc70@mail.gmail.com>
	<alpine.WNT.0.81.0701031412110.3452@nqvgln>
	<459C0EC9.5070400@elvenkind.com>
	<alpine.WNT.0.81.0701032131080.3844@nqvgln>
	<459CC90F.4080104@elvenkind.com>
Message-ID: <459CCACD.90603@wxs.nl>

Taco Hoekwater wrote:
> Aditya Mahajan wrote:
>   
>> (changed lists)
>>
>> On Wed, 3 Jan 2007, Taco Hoekwater wrote:
>>
>>
>>     
>>> Aditya Mahajan wrote:
>>>
>>>       
>>>> I can confirm that there is an extra number. I do not know what is 
>>>> causing this. I am not aware of anything in core-mat has changed.
>>>>         
>>> There is that extra stuff in \everymathematics.  Could that be it?
>>>       
>> The file runs fine with ConTeXt 2006-11-24 19:15 so it is something in 
>> the last month. (This version is available as the windows stand alone 
>> distribution from pragma's website.)
>>     
>
> I've been staring at this for some time now, but I don't see
> happens. The number comes from \stopformula, but I do not
> remember what was supposed to prevent its appearance in the
> first place.
>
> If you still have the Nov 24 context version, can you run this:
>
> \starttext
> \loggingall
> \placeformula \startformula \startalign
>    \NC a \EQ b \NR[+]
>    \NC c \EQ d \NR[+]
> \stopalign \stopformula
> \stoptext
>
> and email me the log file?
>   
something before an \crcr ? the alignment sees an extra line

-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From contexttest-bugs at foundry.supelec.fr  Thu Jan  4 10:39:44 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Thu, 4 Jan 2007 10:39:44 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B50=5D_footnotes_?=
	=?utf-8?q?break_the_use_of_=5Csomehwere?=
Message-ID: <200701040939.l049dia0000507@semantic.metz.supelec.fr>

Bugs item #50, was opened at 2007-01-04 10:39
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=50&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Taco Hoekwater (taco)
Assigned to: Nobody (None)
Summary: footnotes break the use of \somehwere 
Resolution: Accepted
Version: None
Category: macros


Initial Comment:
\starttext
\chapter[A]{One}
Text.\footnote{foot}
\chapter[B]{Two}
Text \somewhere{before}{after}[B].
\stoptext

--Mike Bird

----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=50&group_id=21


From contexttest-bugs at foundry.supelec.fr  Thu Jan  4 10:59:58 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Thu, 4 Jan 2007 10:59:58 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B51=5D_=5Csetupex?=
	=?utf-8?q?ternalfigures=5Blocation=3D=7Blocal=2Cglobal=7D=5D_not_w?=
	=?utf-8?q?orking_as_expected?=
Message-ID: <200701040959.l049xwxv000533@semantic.metz.supelec.fr>

Bugs item #51, was opened at 2007-01-04 10:59
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=51&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: \setupexternalfigures[location={local,global}] not working as expected 
Resolution: None
Version: None
Category: macros


Initial Comment:
Hello,

the sample file "hacker.jpg" is only found by "\externalfigure[hacker]"
when using "\setupexternalfigures[location=global]" but neither with
\setupexternalfigures[location={global,local}] nor with
\setupexternalfigures[location={local,global}]

Do I misunderstand perhaps the location-option or is this a bug?

Cheers, Peter


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=51&group_id=21


From contexttest-bugs at foundry.supelec.fr  Thu Jan  4 12:07:00 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Thu, 4 Jan 2007 12:07:00 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B52=5D_original-a?=
	=?utf-8?q?dobe-euro=2Emap_for_dvips?=
Message-ID: <200701041107.l04B70T3021207@semantic.metz.supelec.fr>

Bugs item #52, was opened at 2007-01-04 12:07
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=52&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: original-adobe-euro.map for dvips 
Resolution: None
Version: None
Category: None


Initial Comment:
When creating dvi and ps output with following input:
\usesymbols[eur]
\starttext
\texteuro
\stoptext
no euro-symbol shows up.
dvips does not understand the map file.
Peter


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=52&group_id=21


From contexttest-bugs at foundry.supelec.fr  Thu Jan  4 12:21:08 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Thu, 4 Jan 2007 12:21:08 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B53=5D_=5Ctextmu_?=
	=?utf-8?q?should_be_upright?=
Message-ID: <200701041121.l04BL8AP026418@semantic.metz.supelec.fr>

Bugs item #53, was opened at 2007-01-04 12:21
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=53&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: \textmu should be upright 
Resolution: None
Version: None
Category: None


Initial Comment:
One would expect \textmu to be upright, even in encodings where there is only
TeX's 'normal' slanted greek available, like in ec encoding.
Peter


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=53&group_id=21


From contexttest-bugs at foundry.supelec.fr  Thu Jan  4 12:28:37 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Thu, 4 Jan 2007 12:28:37 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B55=5D_indenting_?=
	=?utf-8?q?first_paragraph_in_section_after_placefloat?=
Message-ID: <200701041128.l04BSbUr009314@semantic.metz.supelec.fr>

Bugs item #55, was opened at 2007-01-04 12:28
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=55&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: indenting first paragraph in section after placefloat 
Resolution: None
Version: None
Category: macros


Initial Comment:
Hello,
ConTeXt 2007.01.02 indents the first paragraph, when there is a placefigure.
Example:
\setupindenting[yes,small]
\def\Text{\dorecurse{400}{text }}
\starttext
\section{test}
\Text % here it's ok
\section{test}
\placefigure{}{\externalfigure[bla][width=0.6\textwidth]}
\Text % here is a problem
\stoptext


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=55&group_id=21


From contexttest-bugs at foundry.supelec.fr  Thu Jan  4 12:56:41 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Thu, 4 Jan 2007 12:56:41 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B52=5D_original-a?=
	=?utf-8?q?dobe-euro=2Emap_for_dvips?=
Message-ID: <200701041156.l04BufNj009383@semantic.metz.supelec.fr>

Bugs item #52, was opened at 2007-01-04 12:07
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=52&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: original-adobe-euro.map for dvips 
Resolution: None
Version: None
Category: None


Initial Comment:
When creating dvi and ps output with following input:
\usesymbols[eur]
\starttext
\texteuro
\stoptext
no euro-symbol shows up.
dvips does not understand the map file.
Peter


----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2007-01-04 12:56

Message:
Can you check which one it uses, the one from the pdftex or the dvipdfm directory, and what error does dvips produce?

----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=52&group_id=21


From contexttest-bugs at foundry.supelec.fr  Thu Jan  4 13:08:21 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Thu, 4 Jan 2007 13:08:21 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B56=5D_French_spa?=
	=?utf-8?q?ces_with_guillemets?=
Message-ID: <200701041208.l04C8L6S009410@semantic.metz.supelec.fr>

Bugs item #56, was opened at 2007-01-04 13:08
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=56&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: French spaces with guillemets 
Resolution: None
Version: None
Category: macros


Initial Comment:
It would be nice, to get automatic spaces when typesetting French.
Example:
?bla?
should become automatically
?\,bla\,?
Peter M?nster


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=56&group_id=21


From contexttest-bugs at foundry.supelec.fr  Thu Jan  4 13:14:03 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Thu, 4 Jan 2007 13:14:03 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B57=5D_search_ord?=
	=?utf-8?q?er_for_figure_search_path?=
Message-ID: <200701041214.l04CE3hO009819@semantic.metz.supelec.fr>

Bugs item #57, was opened at 2007-01-04 13:14
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=57&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: search order for figure search path 
Resolution: None
Version: None
Category: macros


Initial Comment:
How can I tell ConTeXt to search for images at first in another directory
than the current directory?
When there are two files ./testimg.eps and ./img/testimg.eps the following
test file includes always the first one:
\setupexternalfigures[directory={./img,.}]
\starttext
\externalfigure[testimg][width=3cm]
\stoptext
Peter M?nster


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=57&group_id=21


From contexttest-bugs at foundry.supelec.fr  Thu Jan  4 13:18:19 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Thu, 4 Jan 2007 13:18:19 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B58=5D_texsync_ex?=
	=?utf-8?q?it_code?=
Message-ID: <200701041218.l04CIJlM010799@semantic.metz.supelec.fr>

Bugs item #58, was opened at 2007-01-04 13:18
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=58&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: texsync exit code 
Resolution: None
Version: None
Category: scripts


Initial Comment:
Hello,
it would be nice to get an exit code > 0
if texsync fails. The best would be
the same exit code as rsync.
Peter M?nster


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=58&group_id=21


From contexttest-bugs at foundry.supelec.fr  Thu Jan  4 13:20:28 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Thu, 4 Jan 2007 13:20:28 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B59=5D_interactio?=
	=?utf-8?q?n_and_hyphenation?=
Message-ID: <200701041220.l04CKSL3010844@semantic.metz.supelec.fr>

Bugs item #59, was opened at 2007-01-04 13:20
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=59&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: interaction and hyphenation 
Resolution: None
Version: None
Category: macros


Initial Comment:
It would be nice, to be able to hyphenate interaction texts.
Example with overfull \hbox:
\setupinteraction[state=start]
\definereferenceformat[inFig][text=Abbildung]
\starttext
\placefigure[][fig1]{bla}{bla}
\dorecurse{58}x, siehe \inFig[fig1].
\stoptext
Peter


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=59&group_id=21


From contexttest-bugs at foundry.supelec.fr  Thu Jan  4 13:21:48 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Thu, 4 Jan 2007 13:21:48 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B60=5D_interactio?=
	=?utf-8?q?n_between_boldmath_and_text-mode?=
Message-ID: <200701041221.l04CLm6s029964@semantic.metz.supelec.fr>

Bugs item #60, was opened at 2007-01-04 13:21
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=60&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: interaction between boldmath and text-mode 
Resolution: None
Version: None
Category: None


Initial Comment:
Hello,
in text-mode, the ? gets slanted, when boldmath is used:
%% To get upshaped \textmu:
\usetypescript[modern][texnansi] \setupbodyfont[modern]
%% Defining boldmath:
\definetypeface[boldmath][mm][boldmath][modern]
%% To get bold everywhere:
\def\myBF{\boldmath\rm\bf}
\starttext
{\myBF bla $bla$ \textmu} % \textmu is slanted here
\stoptext

(Workaround: {{\myBF bla $bla$} \bf\textmu})

Peter


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=60&group_id=21


From adityam at umich.edu  Thu Jan  4 21:30:00 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Thu, 4 Jan 2007 15:30:00 -0500 (EST)
Subject: [dev-context] Script files for third party modules.
In-Reply-To: <459CC6D6.6090102@wxs.nl>
References: <alpine.WNT.0.81.0701022307070.1764@nqvgln>
	<459B7553.5090500@wxs.nl>
	<alpine.WNT.0.81.0701030947190.3452@nqvgln> <459BD361.9000903@wxs.nl>
	<alpine.WNT.0.81.0701031131500.3452@nqvgln>
	<alpine.WNT.0.81.0701031401050.3452@nqvgln>
	<459BFF8B.30301@wxs.nl> <alpine.WNT.0.81.0701031426580.3452@nqvgln>
	<459C28F1.8010304@wxs.nl> <alpine.WNT.0.81.0701040039040.3308@nqvgln>
	<459CC6D6.6090102@wxs.nl>
Message-ID: <Pine.GSO.4.63.0701041522350.29025@rrpf4327h07.ratva.hzvpu.rqh>

On Thu, 4 Jan 2007, Hans Hagen wrote:

> Aditya Mahajan wrote:
>> On Wed, 3 Jan 2007, Hans Hagen wrote:
>> 
>>> > Basically need to esacpe the quote inside quote.
>>> >
>>> oh, so actually we should patch texexec to escape the tui stuff?
>> 
>> No, I think that texexec is working in an expeted manner. I did not clearly 
>> understand how it worked, and that is why the confusion.
>> 
>> The module is finally ready. It works well for small snippets (<1000 
>> lines). I have uploaded it to http://modules.contextgarden.net/t-vim I made 
>> a mistake while naming the module, so all the files are in t-vim.tar.gz 
>> directory instead of t-vim. Hopefully, this will not cause any trouble.
>> 
>> The documentation is at
>> http://dl.contextgarden.net/modules/t-vim.tar.gz/doc/context/t-vim/t-vim.pdf 
>> 
>> and a sample matlab and context pretty output at
>> 
>> http://dl.contextgarden.net/modules/t-vim.tar.gz/doc/context/t-vim/t-vim-demo.pdf 
>> 
>> The context output is very similar to what I see on the vim screen :)
> looks like there is a problem around line 35
>
> %D \starttyping
> %D \definevimtyping [RUBY] [syntax=ruby]
> %D \stoptyping
> %D after which you can get ruby highlighting by
> %D \starttyping
> %D \startRUBY
> %D ....
> %D \stopRUBY
> %D \stoptyping
>
>
> has funny colloring

Yes, vim does that. Any line starting with % is a comment. Of these, any 
line that starts with %D honors context command highlighting regions. When 
it sees a \starttyping syntax highlighting is switched off until the next 
\stoptyping. So, everything between a \starttyping and \stoptyping is in 
black (the default \maincolor). What I use is the the default vim 
colorscheme (by Nikolai Weibull). Mojca had made some improvements to the 
context highlighting, which had a few improvements (mp syntax highlighting 
inside \startMPcode \stopMPcode etc, C syntax highlighting inside \startC 
\stopC, and so on). I do not remember whether it took care of 
\starttyping.

Redoing, vim syntax highlighting for context and metapost has been on my 
todo list for a long time. Someday the vim syntax highlighting rules will 
make sense to me.

Aditya

From adityam at umich.edu  Fri Jan  5 09:09:39 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 5 Jan 2007 03:09:39 -0500 (EST)
Subject: [dev-context] [NTG-context] Problems with "mathalign"
In-Reply-To: <459CCACD.90603@wxs.nl>
References: <6faad9f00701030931l59be89a8y5a6cc5e14ebdcc70@mail.gmail.com>
	<alpine.WNT.0.81.0701031412110.3452@nqvgln>
	<459C0EC9.5070400@elvenkind.com>
	<alpine.WNT.0.81.0701032131080.3844@nqvgln>
	<459CC90F.4080104@elvenkind.com> <459CCACD.90603@wxs.nl>
Message-ID: <alpine.WNT.0.81.0701050256410.4068@nqvgln>

On Thu, 4 Jan 2007, Hans Hagen wrote:

> Taco Hoekwater wrote:
> > Aditya Mahajan wrote:
> > 
> >> (changed lists)
> >>
> >> On Wed, 3 Jan 2007, Taco Hoekwater wrote:
> >>
> >>
> >> 
> >>> Aditya Mahajan wrote:
> >>>
> >>> 
> >>>> I can confirm that there is an extra number. I do not know what is 
> >>>> causing this. I am not aware of anything in core-mat has changed.
> >>>> 
> >>> There is that extra stuff in \everymathematics.  Could that be it?
> >>> 
> >> The file runs fine with ConTeXt 2006-11-24 19:15 so it is something in 
> >> the last month. (This version is available as the windows stand alone 
> >> distribution from pragma's website.)
> >> 
> >
> > I've been staring at this for some time now, but I don't see
> > happens. The number comes from \stopformula, but I do not
> > remember what was supposed to prevent its appearance in the
> > first place.
> >
> > If you still have the Nov 24 context version, can you run this:
> >
> > \starttext
> > \loggingall
> > \placeformula \startformula \startalign
> >    \NC a \EQ b \NR[+]
> >    \NC c \EQ d \NR[+]
> > \stopalign \stopformula
> > \stoptext
> >
> > and email me the log file?
> > 
> something before an \crcr ? the alignment sees an extra line

This is working correctly in the latest beta. I still do not 
understand what was causing this problem. AFAIU, the beta just juggles 
around stuff from math-pln to core-mat.

Aditya

From taco at elvenkind.com  Fri Jan  5 09:14:17 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 05 Jan 2007 09:14:17 +0100
Subject: [dev-context] [NTG-context] Problems with "mathalign"
In-Reply-To: <alpine.WNT.0.81.0701050256410.4068@nqvgln>
References: <6faad9f00701030931l59be89a8y5a6cc5e14ebdcc70@mail.gmail.com>
	<alpine.WNT.0.81.0701031412110.3452@nqvgln>
	<459C0EC9.5070400@elvenkind.com>
	<alpine.WNT.0.81.0701032131080.3844@nqvgln>
	<459CC90F.4080104@elvenkind.com> <459CCACD.90603@wxs.nl>
	<alpine.WNT.0.81.0701050256410.4068@nqvgln>
Message-ID: <459E08D9.7010505@elvenkind.com>

Aditya Mahajan wrote:
> 
> This is working correctly in the latest beta. I still do not understand 
> what was causing this problem. AFAIU, the beta just juggles around stuff 
> from math-pln to core-mat.

Problem in a nutshell:

Correct old:

	math-pln.tex:\def\displ at y{.....}
	core-mat.tex:\let\normaldispl at y\displ at y
	core-mat.tex:\def\displ at y{\resetdisplaymatheq\normaldispl at y}


Broken old:

	core-mat.tex:\let\normaldispl at y\displ at y
	core-mat.tex:\def\displ at y{\resetdisplaymatheq\normaldispl at y}
	math-pln.tex:\def\displ at y{.....}

New:

	core-mat.tex:\def\displ at y{.....}
	core-mat.tex:\let\normaldispl at y\displ at y
	core-mat.tex:\def\displ at y{\resetdisplaymatheq\normaldispl at y}

Best, Taco

From adityam at umich.edu  Fri Jan  5 09:18:06 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 5 Jan 2007 03:18:06 -0500 (EST)
Subject: [dev-context] [NTG-context] Problems with "mathalign"
In-Reply-To: <459E08D9.7010505@elvenkind.com>
References: <6faad9f00701030931l59be89a8y5a6cc5e14ebdcc70@mail.gmail.com>
	<alpine.WNT.0.81.0701031412110.3452@nqvgln>
	<459C0EC9.5070400@elvenkind.com>
	<alpine.WNT.0.81.0701032131080.3844@nqvgln>
	<459CC90F.4080104@elvenkind.com>
	<459CCACD.90603@wxs.nl> <alpine.WNT.0.81.0701050256410.4068@nqvgln>
	<459E08D9.7010505@elvenkind.com>
Message-ID: <alpine.WNT.0.81.0701050317550.4068@nqvgln>

On Fri, 5 Jan 2007, Taco Hoekwater wrote:

> Aditya Mahajan wrote:
>> 
>> This is working correctly in the latest beta. I still do not understand 
>> what was causing this problem. AFAIU, the beta just juggles around stuff 
>> from math-pln to core-mat.
>
> Problem in a nutshell:
>
> Correct old:
>
> 	math-pln.tex:\def\displ at y{.....}
> 	core-mat.tex:\let\normaldispl at y\displ at y
> 	core-mat.tex:\def\displ at y{\resetdisplaymatheq\normaldispl at y}
>
>
> Broken old:
>
> 	core-mat.tex:\let\normaldispl at y\displ at y
> 	core-mat.tex:\def\displ at y{\resetdisplaymatheq\normaldispl at y}
> 	math-pln.tex:\def\displ at y{.....}
>
> New:
>
> 	core-mat.tex:\def\displ at y{.....}
> 	core-mat.tex:\let\normaldispl at y\displ at y
> 	core-mat.tex:\def\displ at y{\resetdisplaymatheq\normaldispl at y}
>

Thanks.

Aditya

From contexttest-bugs at foundry.supelec.fr  Fri Jan  5 09:38:06 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Fri, 5 Jan 2007 03:38:06 -0500
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B49=5D_=5Cstartma?=
	=?utf-8?q?thalign_gives_an_extra_formula_number?=
Message-ID: <200701050838.l058c6I2026398@semantic.metz.supelec.fr>

Bugs item #49, was opened at 2007-01-04 01:27
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=49&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

>Status: Closed
Priority: 3
Submitted By: Aditya Mahajan (adityam)
Assigned to: Nobody (None)
Summary: \startmathalign gives an extra formula number 
Resolution: None
Version: None
Category: macros


Initial Comment:
The following code gives an exra line with formla number

\placeformula \startformula \startalign
  \NC a \EQ b \NR[+]
  \NC c \EQ d \NR[+]
\stopalign \stopformula



----------------------------------------------------------------------

>Comment By: Aditya Mahajan (adityam)
Date: 2007-01-05 03:38

Message:
This is corrected in the latest beta. 


 Problem in a nutshell: (by Taco)

 Correct old:

        math-pln.tex:\def\displ at y{.....}
        core-mat.tex:\let\normaldispl at y\displ at y
        core-
mat.tex:\def\displ at y{\resetdisplaymatheq\normaldispl at y}


 Broken old:

        core-mat.tex:\let\normaldispl at y\displ at y
        core-
mat.tex:\def\displ at y{\resetdisplaymatheq\normaldispl at y}
        math-pln.tex:\def\displ at y{.....}

 New:

        core-mat.tex:\def\displ at y{.....}
        core-mat.tex:\let\normaldispl at y\displ at y
        core-
mat.tex:\def\displ at y{\resetdisplaymatheq\normaldispl at y}



----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=49&group_id=21


From preining at logic.at  Fri Jan  5 11:37:42 2007
From: preining at logic.at (Norbert Preining)
Date: Fri, 5 Jan 2007 11:37:42 +0100
Subject: [dev-context] texexec and return codes ... bad
Message-ID: <20070105103742.GI12154@gamma.logic.tuwien.ac.at>

Hi all!

(Gerben, you are on the To since you were interested in the ctxfmtutil,
but it is bugged ..., see below)

texexec does not return a useful return code:
# texexec --nonstopmode --fast --make --aleph cont-en
...
loading         : Context Font Macros / UNICODE Support
! Aleph capacity exceeded, sorry [number of strings=33165].
\setvalue ...xpandafter \def \csname #1\endcsname 
                                                  
l.275 \defineucharmapping{\s!default}
                                     #1#2%
No pages of output.
Transcript written on cont-en.log.
TeXExec | 
TeXExec | tex engine path: /etc/texmf/web2c/aleph
TeXExec | 
TeXExec | 
TeXExec | runtime: 3.104333
# echo $?
0
#

This is bad, very bad.... something we can do about it?


And, since I am at it: It does not honor the --nonstopmode:
# texexec --nonstopmode --fast --make --xetex cont-en
...
loading         : Context Encoding Macros (pdf)
! Undefined control sequence.
l.63 \ifcase\pdfgentounicode
                             \else \expandafter \endinput \fi
?

and waiting there.

Is there a way to fix these two problems, please???

For Gerben: ctxfmtutil has two problems:
- it does not detect if a build was broken due to the first bug
- it hangs sometimes due to the second bug

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
FRANT (n.)
Measure. The legal minimum distance between two trains on the District
and Circle line of the London Underground. A frant, which must be not
less than 122 chains (or 8 leagues) long, is not connected in any way
with the adjective 'frantic' which comes to us by a completely
different route (as indeed do the trains).
			--- Douglas Adams, The Meaning of Liff

From contexttest-bugs at foundry.supelec.fr  Fri Jan  5 16:49:56 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Fri, 5 Jan 2007 16:49:56 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B61=5D_clipping_i?=
	=?utf-8?q?n_dvi-mode?=
Message-ID: <200701051549.l05FnuT9012210@semantic.metz.supelec.fr>

Bugs item #61, was opened at 2007-01-05 16:49
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=61&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: clipping in dvi-mode 
Resolution: None
Version: None
Category: macros


Initial Comment:
\clip does not work in dvi-mode:
\starttext
\startuseMPgraphic{test}
mpprocset:=0;
draw fullcircle scaled 4cm withpen pencircle scaled 1cm ;
setbounds currentpicture to boundingbox fullcircle scaled 4cm ;
\stopuseMPgraphic
\ruledhbox{\useMPgraphic{test}}
\vskip3cm
\doifmode{*dvi}{Nothing to see here, only an empty box:}
\ruledhbox{\clip{\useMPgraphic{test}}}
\stoptext
Peter M?nster


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=61&group_id=21


From contexttest-bugs at foundry.supelec.fr  Fri Jan  5 17:26:30 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Fri, 5 Jan 2007 17:26:30 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B52=5D_original-a?=
	=?utf-8?q?dobe-euro=2Emap_for_dvips?=
Message-ID: <200701051626.l05GQULq000329@semantic.metz.supelec.fr>

Bugs item #52, was opened at 2007-01-04 12:07
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=52&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: original-adobe-euro.map for dvips 
Resolution: None
Version: None
Category: None


Initial Comment:
When creating dvi and ps output with following input:
\usesymbols[eur]
\starttext
\texteuro
\stoptext
no euro-symbol shows up.
dvips does not understand the map file.
Peter


----------------------------------------------------------------------

Comment By: Peter M?nster (peter)
Date: 2007-01-05 17:26

Message:
When using texexec --dvi, the file in pdftex is read
and dvips outputs this:
This is dvips(k) 5.96 Copyright 2005 Radical Eye Software (www.radicaleye.com)
' TeX output 2007.01.05:1712' -> test.ps
<tex.pro><lm-ec.enc><texps.pro>. <eurose.pfb><lmr12.pfb>[1] 

From contexttest-bugs at foundry.supelec.fr  Fri Jan  5 17:36:44 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Fri, 5 Jan 2007 17:36:44 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B52=5D_original-a?=
	=?utf-8?q?dobe-euro=2Emap_for_dvips?=
Message-ID: <200701051636.l05GaihO000343@semantic.metz.supelec.fr>

Bugs item #52, was opened at 2007-01-04 12:07
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=52&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: original-adobe-euro.map for dvips 
Resolution: None
Version: None
Category: None


Initial Comment:
When creating dvi and ps output with following input:
\usesymbols[eur]
\starttext
\texteuro
\stoptext
no euro-symbol shows up.
dvips does not understand the map file.
Peter


----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2007-01-05 17:36

Message:
The output from the texexec --dvi case looks good at first glance.
I do not have the font installed myself, but you could try adding
the PostScript font names in that map file (this will not harm pdftex):

euromo   EuroMono-Regular      <euromo.pfb
euromob  EuroMono-Bold         <euromob.pfb
euromoi  EuroMono-Italic       <euromoi.pfb
euromobi EuroMono-BoldItalic   <euromobi.pfb
eurosa   EuroSans-Regular      <eurosa.pfb
eurosab  EuroSans-Bold         <eurosab.pfb
eurosai  EuroSans-Italic       <eurosai.pfb
eurosabi EuroSans-BoldItalic   <eurosebi.pfb
eurose   EuroSerif-Regular     <eurose.pfb
euroseb  EuroSerif-Bold        <euroseb.pfb
eurosei  EuroSerif-Italic      <eurosei.pfb
eurosebi EuroSerif-BoldItalic  <eurosebi.pfb


----------------------------------------------------------------------

Comment By: Peter M?nster (peter)
Date: 2007-01-05 17:26

Message:
When using texexec --dvi, the file in pdftex is read
and dvips outputs this:
This is dvips(k) 5.96 Copyright 2005 Radical Eye Software (www.radicaleye.com)
' TeX output 2007.01.05:1712' -> test.ps
<tex.pro><lm-ec.enc><texps.pro>. <eurose.pfb><lmr12.pfb>[1] 

From sanjoy at mrao.cam.ac.uk  Sat Jan  6 05:36:08 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Fri, 05 Jan 2007 23:36:08 -0500
Subject: [dev-context] where is dvipos? dvipos fails using TL2006 test tree
Message-ID: <E1H33Hs-0004Kx-Vt@approximate.corpus.cam.ac.uk>

What is the standard way to get dvipos?  It's used by texexec in dvi
mode, to find the location of figures.  I guess it can eventually go
away now that pdftex's \pdfsavepos works even in dvi mode (from
v1.40.0).  But for the moment it's still needed.

It's neither in texlive2006 (except for win32) nor in the Debian or
Ubuntu tex-related packages, but I think it needs to be in both.

There's source here:
<http://cvs.sarovar.org/cgi-bin/cvsweb.cgi/texlive/Build/source/texk/dvipos/>
I think the version I built and use -- Version 20030628 (KPATHSEA) -- is
from here <http://cvs.ktug.or.kr/viewcvs/dvipos/>.  Actually I found the
one I use, and I've attached it.

That version doesn't work well on one document I just tried (see recent
msg to ntg-context).  It outputs correct information, but the
coordinates are in sp (scaled points) with no unit marker, and context
expects them in pt (see NASA's Mars lander that crashed into Mars due to
a unit disagreement).  That was with context 2007.01.02 in Norbert's
debian packages.

If I try it with the texlive2006 test tree, then it fails with

** Fatal: Unable to find TFM file 'ec-lmtt10'

Although the TFM is in the TL tree:

$ kpsewhich ec-lmtt10.tfm
/home/sanjoy/admin/tex/texlive/image/texlive/texmf-dist/fonts/tfm/public/lm/ec-lmtt10.tfm

Unfortunately, dvipos doesn't have a kpathsea-debug switch, so I don't
know what lookups it's doing.  I can guess, using strace, that it's
using the TEXFONTMAPS path to search for the tfm file, but I'm not sure.
Or that it's looking for texfonts.map but isn't finding it, which is
confusing it in searching for the tfm file?  If anyone wants the dvi
file to test, I can send it to you offlist.  Actually, no need, because
you can see the same problem by making a dvi file from

\starttext
a
\stoptext

Then, with (ba)sh syntax:

  texexec --dvi --nobackend a.tex
  TLROOT=~/admin/tex/texlive/image/texlive
  TEXMFCNF=$TLROOT/texmf/web2c /usr/local/bin/dvipos a.dvi

Here is the "strace -e trace=open,access dvipos notes.dvi" after I
replaced the long texlive root with @TLROOT@

access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
access("/etc/ld.so.preload", R_OK)      = -1 ENOENT (No such file or directory)
open("/etc/ld.so.cache", O_RDONLY)      = 3
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
open("/lib/tls/i686/cmov/libm.so.6", O_RDONLY) = 3
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
open("/usr/lib/libkpathsea.so.4", O_RDONLY) = 3
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
open("/lib/tls/i686/cmov/libc.so.6", O_RDONLY) = 3
open("notes.dvi", O_RDONLY)             = 3
open("/usr/local/bin/dvipos", O_RDONLY) = 4
access("@TLROOT@/texmf/web2c/texmf.cnf", R_OK) = 0
open("@TLROOT@/texmf/web2c/texmf.cnf", O_RDONLY) = 4
access("./texfonts.map", R_OK)          = -1 ENOENT (No such file or directory)
open("/home/sanjoy/.texlive2006/texmf-config/fonts/map/dvipos/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
open("/home/sanjoy/.texlive2006/texmf-var/fonts/map/dvipos/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
open("/home/sanjoy/texmf/fonts/map/dvipos/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
open("/home/sanjoy/.texlive2006/texmf-config/fonts/map/pdftex/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
open("/home/sanjoy/.texlive2006/texmf-var/fonts/map/pdftex/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
open("/home/sanjoy/texmf/fonts/map/pdftex/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
open("/home/sanjoy/.texlive2006/texmf-config/fonts/map/dvips/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
open("/home/sanjoy/.texlive2006/texmf-var/fonts/map/dvips/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
open("/home/sanjoy/texmf/fonts/map/dvips/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
open("/home/sanjoy/.texlive2006/texmf-config/fonts/map/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
open("/home/sanjoy/.texlive2006/texmf-var/fonts/map/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
open("/home/sanjoy/texmf/fonts/map/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
access("./ec-lmtt10.tfm", R_OK)         = -1 ENOENT (No such file or directory)
open("/home/sanjoy/.texlive2006/texmf-config/fonts/tfm/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
open("/home/sanjoy/.texlive2006/texmf-var/fonts/tfm/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
open("/home/sanjoy/texmf/fonts/tfm/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
access("./ec-lmtt10.ofm", R_OK)         = -1 ENOENT (No such file or directory)
access("./ec-lmtt10.tfm", R_OK)         = -1 ENOENT (No such file or directory)
open("/home/sanjoy/.texlive2006/texmf-config/fonts/ofm/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
open("/home/sanjoy/.texlive2006/texmf-var/fonts/ofm/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
open("/home/sanjoy/texmf/fonts/ofm/", O_RDONLY|O_NONBLOCK|O_LARGEFILE|O_DIRECTORY) = -1 ENOENT (No such file or directory)
access("./ec-lmtt10.ofm", R_OK)         = -1 ENOENT (No such file or directory)
access("./ec-lmtt10.tfm", R_OK)         = -1 ENOENT (No such file or directory)
access("./ec-lmtt10.tfm", R_OK)         = -1 ENOENT (No such file or directory)
access("./ec-lmtt10.tfm", R_OK)         = -1 ENOENT (No such file or directory)

** Fatal: Unable to find TFM file 'ec-lmtt10'.
Process 16521 detached

-Sanjoy

`A nation of slaves is always prepared to applaud the clemency of their
 master who, in the abuse of absolute power, does not proceed to the
 last extremes of injustice and oppression.'  (Gibbon)  

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/x-gtar
Size: 24154 bytes
Desc: dvipos source
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070106/a7f2d23e/attachment-0001.gtar 

From contexttest-featurerequests at foundry.supelec.fr  Fri Jan  5 18:07:26 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Fri, 5 Jan 2007 18:07:26 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B59?=
	=?utf-8?q?=5D_interaction_and_hyphenation?=
Message-ID: <200701051707.l05H7QhM000425@semantic.metz.supelec.fr>

Feature Requests item #59, was opened at 2007-01-04 13:20
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=59&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: interaction and hyphenation 
Version: None
Category: None


Initial Comment:
It would be nice, to be able to hyphenate interaction texts.
Example with overfull \hbox:
\setupinteraction[state=start]
\definereferenceformat[inFig][text=Abbildung]
\starttext
\placefigure[][fig1]{bla}{bla}
\dorecurse{58}x, siehe \inFig[fig1].
\stoptext
Peter


----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2007-01-05 18:07

Message:
This is not so much a bug as a feature request.

Hans says: Can perhaps be implemented later when there is better low-level support for text attributes in TeX (luatex)

----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=59&group_id=21


From taco at elvenkind.com  Sat Jan  6 10:08:22 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 06 Jan 2007 10:08:22 +0100
Subject: [dev-context] where is dvipos? dvipos fails using TL2006 test
 tree
In-Reply-To: <E1H33Hs-0004Kx-Vt@approximate.corpus.cam.ac.uk>
References: <E1H33Hs-0004Kx-Vt@approximate.corpus.cam.ac.uk>
Message-ID: <459F6706.3070400@elvenkind.com>

Sanjoy Mahajan wrote:
> 
> Unfortunately, dvipos doesn't have a kpathsea-debug switch, so I don't
> know what lookups it's doing.  I can guess, using strace, that it's
> using the TEXFONTMAPS path to search for the tfm file, but I'm not sure.

This should work

   $ env KPATHSEA_DEBUG=-1 dvipos notes.dvi

Best, Taco

From sanjoy at mrao.cam.ac.uk  Sun Jan  7 01:49:32 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Sun, 07 Jan 2007 00:49:32 +0000
Subject: [dev-context] where is dvipos? dvipos fails using TL2006 test
	tree
In-Reply-To: Your message of "Sat, 06 Jan 2007 10:08:22 +0100."
	<459F6706.3070400@elvenkind.com> 
Message-ID: <E1H3ME8-0005HP-00@skye.ra.phy.cam.ac.uk>

> $ env KPATHSEA_DEBUG=-1 dvipos notes.dvi

Thanks; you can teach an old dog new tricks (which now I see is
documented in the kpathsea manual).  With sh/bash you can drop the
'env':

  $ KPATHSEA_DEBUG=-1 dvipos notes.dvi

The debug output helped me figure out the problem: $SELFAUTOPARENT
yukness.  dvipos is in /usr/local/bin/dvipos, so SELFAUTOPARENT is
/usr, and everything is being searched for in /usr/texmf,
/usr/texmf-dist, etc, instead of in $tlroot/texmf{,-dist} etc.

For binaries in TL, it all works since they live in
$tlroot/bin/i386-linux/, so their $SELFAUTOPARENT is $tlroot/.

I checked this analysis by putting a copy of dvipos in /tmp/x/y/ and
symlinking /tmp/texmf* to $tlroot/texmf*.  Then I ran /tmp/x/y/dvipos
notes.dvi (using TL's texmf.cnf), and it worked identically to using
dvipos with my regular tex installation (Debian/Ubuntu texlive).

So dvipos belongs in TL and in the Debian packages, or else ConTeXt
will crash when it makes dvi files with figures.

Also, as I mentioned in another email (I think to ntg-context),
ConTeXt needs to parse dvipos's scaled-points output.  But that change
is not specific to TL.  Or dvipos should be changed to produce
coordinates in pt (and label them).  However, that change may break
other users (are there any?) of dvipos.

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From mgb-debian at yosemite.net  Sun Jan  7 03:02:09 2007
From: mgb-debian at yosemite.net (Mike Bird)
Date: Sat, 6 Jan 2007 18:02:09 -0800
Subject: [dev-context] Broken bug tracker
Message-ID: <200701061802.09855.mgb-debian@yosemite.net>

Replied to bug message #50 in order to add more information
as instructed but it failed:

----------  Forwarded Message  ----------

Subject: Returned mail: see transcript for details
Date: Saturday 06 January 2007 17:09
From: Mail Delivery Subsystem <MAILER-DAEMON at foundry.supelec.fr>
To: mgb-debian at yosemite.net

The original message was received at Sun, 7 Jan 2007 02:09:39 +0100
from esemetz.metz.supelec.fr [193.48.224.212]

   ----- The following addresses had permanent fatal errors -----

|"/usr/bin/php -d
| include_path=.:/var/www/gforge:/var/www/gforge/www/include:/etc/gforge/
| /var/www/gforge/cronjobs/tracker_gateway.php contexttest 161"

    (reason: Service unavailable)
    (expanded from: <contexttest-bugs at foundry.supelec.fr>)

   ----- Transcript of session follows -----
smrsh: "php" not available for sendmail programs (stat failed)
554 5.0.0 Service unavailable

-------------------------------------------------------

From sanjoy at mrao.cam.ac.uk  Sun Jan  7 03:58:43 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Sat, 06 Jan 2007 21:58:43 -0500
Subject: [dev-context] two dvipos fixes so that it works with ConTeXt
Message-ID: <E1H3OF9-0006FS-Iw@approximate.corpus.cam.ac.uk>

[Karl and Norbert CC'ed in case dvipos is going into their trees]

The dvipos I have (cvs'ed from cvs.ktug.or.kr:/home/cvsroot) needs two
fixes for it to work with the 2007.01.02 context (and maybe with earlier
versions too).  This is on Ubuntu i386, texlive 2005.  

Try this file with 'texexec --dvi --nobackend' to see the problems -- or
if there are none, let me know why it works for you!

=================== begin: to-dvi.tex ==================
\defineoverlay [foregraphics] [\positionoverlay{foregraphics}]
\setupbackgrounds
  [page]
  [background={foreground,foregraphics}]

\starttext

\hpos{r23}{7} \quad \hpos{r24}{8} 

\startMPpositiongraphic{mypos:line}
  mpprocset := 0;  % context doesn't yet handle the new mpprocsets
  path pa, pb, pab ; numeric na, nb ;
  initialize_box(\MPpos{\MPvar{from}}) ;
  na := nxy ; pa := llxy..lrxy..urxy..ulxy..cycle ;
  initialize_box(\MPpos{\MPvar{to}}) ;
  nb := nxy ; pb := llxy..lrxy..urxy..ulxy..cycle ;
  if na=nb :
    pab := center pa -- center pb ;
    pab := pab cutbefore (pab intersectionpoint pa) ;
    pab := pab cutafter (pab intersectionpoint pb) ;
    pickup pencircle;
    draw pab;
    anchor_box(\MPanchor{\MPvar{from}}) ;
  fi ;
\stopMPpositiongraphic

\startpositionoverlay{foregraphics}
  \setMPpositiongraphic{r23}{mypos:line}{to=r24}
\stoppositionoverlay

The pattern.

\stoptext
===================   end: to-dvi.tex ==================

Problems:

1. The dvipos output is in sp (but without labelling that), which
   confuses the next run of ConTeXt.  So the first patch makes dvipos
   append 'sp' to the coordinates it outputs.  That change was easier
   than hacking the tex macros that parses the output.

2. After that is fixed, the coordinates are wrong, so running the above
   file again crashes because the boxes are in the wrong place and the
   paths no longer intersect.  The second patch corrects this problem,
   which is caused by dvipos parsing the dvi file incorrectly.  

   Maybe ConTeXt used to output the dimens in the pos: \special in sp?
   Anyway, the special now looks like (see to-dvi.dvi):

     pos:pxywhd "text:1" 426.78743pt 597.51323pt 0.0pt

   which was being parsed by dvipos as 426 etc. and assumed to be sp, so
   it was writing junk to to-dvi.tuo file, and the next run was failing
   becaues the boxes were in the wrong location.  So I made dvipos read
   in floats with 'pt' appended, then convert them to sp.

By the way, what is the 'list' that dvipos is looking for after the
three dimens above?  If anything needs a \pospxyplus, it'll be in
trouble since I think 'list' scanf target is not being parsed, so the
var remains uninitialized.

-Sanjoy

`A nation of slaves is always prepared to applaud the clemency of their
 master who, in the abuse of absolute power, does not proceed to the
 last extremes of injustice and oppression.'  (Gibbon)  


# HG changeset patch
# User Sanjoy Mahajan <sanjoy at mrao.cam.ac.uk>
# Date 1168136989 18000
# Node ID 13a3c8c608ddcfbb569f1925fc0a64fcd25f7344
# Parent  c184bfb52c9425d7e7a87105e9f17ac874be657e
Append sp (scaled point) unit to un-dimensioned coordinates

diff -r c184bfb52c94 -r 13a3c8c608dd dvicore.c
--- a/dvicore.c	Sat Jan 06 21:28:59 2007 -0500
+++ b/dvicore.c	Sat Jan 06 21:29:49 2007 -0500
@@ -924,11 +924,11 @@ static void do_pos_special (unsigned cha
   y = max_v - dvi_state.v;
 
   if (strcmp(cmd, "pos:pxy") == 0)
-    fprintf(outfp, "\\pospxy{%s}{%d}{%ld}{%ld}\n", tag, current_page, x, y);
+    fprintf(outfp, "\\pospxy{%s}{%d}{%ldsp}{%ldsp}\n", tag, current_page, x, y);
   else if (strcmp(cmd, "pos:pxywhd") == 0)
-    fprintf(outfp, "\\pospxywhd{%s}{%d}{%ld}{%ld}{%ld}{%ld}{%ld}\n", tag, current_page, x, y, w, h, d);
+    fprintf(outfp, "\\pospxywhd{%s}{%d}{%ldsp}{%ldsp}{%ldsp}{%ldsp}{%ldsp}\n", tag, current_page, x, y, w, h, d);
   else if (strcmp(cmd, "pos:pxyplus") == 0)
-    fprintf(outfp, "\\pospxyplus{%s}{%d}{%ld}{%ld}{%ld}{%ld}{%ld}{%ld}\n", tag, current_page, x, y, w, h, d, list);
+    fprintf(outfp, "\\pospxyplus{%s}{%d}{%ldsp}{%ldsp}{%ldsp}{%ldsp}{%ldsp}{%ld}\n", tag, current_page, x, y, w, h, d, list);
   else if (strcmp(cmd, "pos:begbox") == 0)
     new_bbox(tag, BOX_TYPE);
   else if (strcmp(cmd, "pos:endbox") == 0)

# HG changeset patch
# User Sanjoy Mahajan <sanjoy at mrao.cam.ac.uk>
# Date 1168137910 18000
# Node ID f30b6ea9f33e3b3825c4e2b923fd73d88869ae1e
# Parent  13a3c8c608ddcfbb569f1925fc0a64fcd25f7344
Read w,h,d in pt (not sp) from dvi file
Maybe ConTeXt used to give the dimens in the \specials in sp?
Anyway, the special now looks like:
  pos:pxywhd "text:1" 426.78743pt 597.51323pt 0.0pt
which was being parsed before as 426 etc. and assumed to be sp.

diff -r 13a3c8c608dd -r f30b6ea9f33e dvicore.c
--- a/dvicore.c	Sat Jan 06 21:29:49 2007 -0500
+++ b/dvicore.c	Sat Jan 06 21:45:10 2007 -0500
@@ -918,7 +918,15 @@ static void do_pos_special (unsigned cha
   for (p++; p - buffer < buffer_len && isspace(*p); p++)
     ; /* skip white chars */
   if (p - buffer < buffer_len)
-    sscanf(p, "%ld %ld %ld %ld", &w, &h, &d, &list);
+    {
+      float w_f, h_f, d_f;	/* in pt */
+      /* what the hell is list? */
+      sscanf(p, "%fpt %fpt %fpt %ld", &w_f, &h_f, &d_f, &list);
+      /* convert to sp.  Forget about rounding (add 0.5 if you want it). */
+      w = w_f * 65536;
+      h = h_f * 65536;
+      d = d_f * 65536;
+    }
 
   x = dvi_state.h + denominator / 100;
   y = max_v - dvi_state.v;

From adityam at umich.edu  Sun Jan  7 09:13:47 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Sun, 7 Jan 2007 03:13:47 -0500 (EST)
Subject: [dev-context] Update type-gyr.tex
Message-ID: <alpine.WNT.0.81.0701070257250.3572@nqvgln>

Hi Hans,

Attached the an updated type-gyr.tex file with support for schola. 
This is my first attempt to modify a typescript file, so be careful.

Aditya
-------------- next part --------------
A non-text attachment was scrubbed...
Name: type-gyr.tex
Type: application/octet-stream
Size: 8314 bytes
Desc: 
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070107/3ef8ea5f/attachment.obj 

From taco at elvenkind.com  Sun Jan  7 10:24:28 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 07 Jan 2007 10:24:28 +0100
Subject: [dev-context] Broken bug tracker
In-Reply-To: <200701061802.09855.mgb-debian@yosemite.net>
References: <200701061802.09855.mgb-debian@yosemite.net>
Message-ID: <45A0BC4C.7080406@elvenkind.com>

Hi Mike,

I have added Fabrice to the CC list. If it cannot be changed
(it looks like a security precaution not to allow php from
outside the web browser), but perhaps the whole 'reply by mail'
paragraph can be dropped from the message somehow in that case.

Best, Taco

Mike Bird wrote:
> Replied to bug message #50 in order to add more information
> as instructed but it failed:
> 
> ----------  Forwarded Message  ----------
> 
> Subject: Returned mail: see transcript for details
> Date: Saturday 06 January 2007 17:09
> From: Mail Delivery Subsystem <MAILER-DAEMON at foundry.supelec.fr>
> To: mgb-debian at yosemite.net
> 
> The original message was received at Sun, 7 Jan 2007 02:09:39 +0100
> from esemetz.metz.supelec.fr [193.48.224.212]
> 
>    ----- The following addresses had permanent fatal errors -----
> 
> |"/usr/bin/php -d
> | include_path=.:/var/www/gforge:/var/www/gforge/www/include:/etc/gforge/
> | /var/www/gforge/cronjobs/tracker_gateway.php contexttest 161"
> 
>     (reason: Service unavailable)
>     (expanded from: <contexttest-bugs at foundry.supelec.fr>)
> 
>    ----- Transcript of session follows -----
> smrsh: "php" not available for sendmail programs (stat failed)
> 554 5.0.0 Service unavailable
> 
> -------------------------------------------------------
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context


From contexttest-bugs at foundry.supelec.fr  Sun Jan  7 10:27:13 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Sun, 7 Jan 2007 10:27:13 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B50=5D_footnotes_?=
	=?utf-8?q?break_the_use_of_=5Csomehwere?=
Message-ID: <200701070927.l079RDcF026241@semantic.metz.supelec.fr>

Bugs item #50, was opened at 2007-01-04 10:39
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=50&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Taco Hoekwater (taco)
Assigned to: Nobody (None)
Summary: footnotes break the use of \somehwere 
Resolution: Accepted
Version: None
Category: macros


Initial Comment:
\starttext
\chapter[A]{One}
Text.\footnote{foot}
\chapter[B]{Two}
Text \somewhere{before}{after}[B].
\stoptext

--Mike Bird

----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2007-01-07 10:27

Message:
Additional debugging from Mike:

  The \somwhere problem seems to be related to pages now.

  Adding '\setuphead[chapter][page=no]' at the beginning
  of the bug #50 test case removes the problem.   A similar
  correlation between pages and reference errors is also
  apparent in a larger test.

Taco

----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=50&group_id=21


From contexttest-bugs at foundry.supelec.fr  Sun Jan  7 10:56:44 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Sun, 7 Jan 2007 10:56:44 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B62=5D_texexec_ex?=
	=?utf-8?q?it_code?=
Message-ID: <200701070956.l079uiEl026322@semantic.metz.supelec.fr>

Bugs item #62, was opened at 2007-01-07 10:56
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=62&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Taco Hoekwater (taco)
Assigned to: Nobody (None)
Summary: texexec exit code 
Resolution: Accepted
Version: None
Category: scripts


Initial Comment:
Hi all!

(Gerben, you are on the To since you were interested in the ctxfmtutil,
but it is bugged ..., see below)

texexec does not return a useful return code:
# texexec --nonstopmode --fast --make --aleph cont-en
...
loading         : Context Font Macros / UNICODE Support
! Aleph capacity exceeded, sorry [number of strings=33165].
\setvalue ...xpandafter \def \csname #1\endcsname 
                                                  
l.275 \defineucharmapping{\s!default}
                                     #1#2%
No pages of output.
Transcript written on cont-en.log.
TeXExec | 
TeXExec | tex engine path: /etc/texmf/web2c/aleph
TeXExec | 
TeXExec | 
TeXExec | runtime: 3.104333
# echo $?
0
#

This is bad, very bad.... something we can do about it?


And, since I am at it: It does not honor the --nonstopmode:
# texexec --nonstopmode --fast --make --xetex cont-en
...
loading         : Context Encoding Macros (pdf)
! Undefined control sequence.
l.63 \ifcase\pdfgentounicode
                             \else \expandafter \endinput \fi
?

and waiting there.

Is there a way to fix these two problems, please???

For Gerben: ctxfmtutil has two problems:
- it does not detect if a build was broken due to the first bug
- it hangs sometimes due to the second bug

Best wishes

Norbert



----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=62&group_id=21


From pragma at wxs.nl  Sun Jan  7 12:25:49 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 07 Jan 2007 12:25:49 +0100
Subject: [dev-context] where is dvipos? dvipos fails using TL2006 test
 tree
In-Reply-To: <E1H3ME8-0005HP-00@skye.ra.phy.cam.ac.uk>
References: <E1H3ME8-0005HP-00@skye.ra.phy.cam.ac.uk>
Message-ID: <45A0D8BD.7010900@wxs.nl>

Sanjoy Mahajan wrote:
> So dvipos belongs in TL and in the Debian packages, or else ConTeXt
> will crash when it makes dvi files with figures.
>   
positions to be more precise ... i still need to adapt context to 
support the now available pos in pdftex dvi mode but even then i need to 
make surethat xetex works too ...

i'll look into it (probably not before the tex collection is frozen);
> Also, as I mentioned in another email (I think to ntg-context),
> ConTeXt needs to parse dvipos's scaled-points output.  But that change
> is not specific to TL.  Or dvipos should be changed to produce
> coordinates in pt (and label them).  However, that change may break
> other users (are there any?) of dvipos.
>   
well, a solution could be to add a switch --unit= ; maybe taco can make a patch; normally Choff is very responsive to such things; an alternative is that i adapt the dvi driver part a bit (no time now, maybe later) ; i adapted this stuff a bit when i made the mkiv code (which permits me to keep track of milions of positions with hardy any overhead -- also, much aux file stuff is already moved to lua tables then) 

Hans 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From taco at elvenkind.com  Sun Jan  7 12:33:50 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 07 Jan 2007 12:33:50 +0100
Subject: [dev-context] where is dvipos? dvipos fails using TL2006 test
 tree
In-Reply-To: <45A0D8BD.7010900@wxs.nl>
References: <E1H3ME8-0005HP-00@skye.ra.phy.cam.ac.uk> <45A0D8BD.7010900@wxs.nl>
Message-ID: <45A0DA9E.5060809@elvenkind.com>

Hans Hagen wrote:
> Sanjoy Mahajan wrote:
> 
>> So dvipos belongs in TL and in the Debian packages, or else ConTeXt
>> will crash when it makes dvi files with figures.
>>   
> 
> positions to be more precise ... i still need to adapt context to 
> support the now available pos in pdftex dvi mode but even then i need to 
> make surethat xetex works too ...

Does anything besides ConTeXt use dvipos? If not, then Sanjoys patch
that simply adds "sp" after each number seems fine to me. Extremely
simple fix, so the bug-risk is very low.

Taco

From sanjoy at mrao.cam.ac.uk  Sun Jan  7 20:40:45 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Sun, 07 Jan 2007 14:40:45 -0500
Subject: [dev-context] where is dvipos? dvipos fails using TL2006 test
	tree
In-Reply-To: Your message of "Sun, 07 Jan 2007 12:33:50 +0100."
	<45A0DA9E.5060809@elvenkind.com> 
Message-ID: <E1H3dsr-00014u-Hf@approximate.corpus.cam.ac.uk>

> Does anything besides ConTeXt use dvipos? 

Googling for the specials that dvipos parses, such as pos:pxywhd,
produces one hit and it's on the ntg-context list.  So it's a safe bet
that ConTeXt is the only user.

> If not, then Sanjoys patch that simply adds "sp" after each number
> seems fine to me.

It's necessary but not sufficient, since dvipos still won't be able to
parse the specials that (Con)TeX(t) writes because those are in pt, and
have 'pt' appended.  Therefore the second patch that I sent is also
needed.  It's not perfect since it doesn't fix sscanfing 'list' in
dvicore.c:do_pos_special().

But I just figured out what list's format should be and what to do about
it.  Assuming again that ConTeXt is the only user of those specials, the
relevant code is from core-pos.tex (line 525ff):

  \def\doregisterparoptions
    {\doglobal\increment\parposcounter
     \begingroup
       \leftskip 1\leftskip
       \rightskip1\rightskip
       \setpositiondataplus
	 {p:\parposcounter}%         % identifier
	 {\the\zeropoint}%
	 {\the\strutht}%
	 {\the\strutdp}%
	 {\the\hsize     ,% 1
	  \the\leftskip  ,% 2
	  \the\rightskip ,% 3
	  \the\hangindent,% 4
	  \the\hangafter ,% 5 (num)
	  \the\parindent }% 6
      %\normalhbox{\registerparsymbol}%
       \registerparsymbol
     \endgroup}

If list needs to be extracted from the pos:pxyplus special, which is the
only one that uses it, its format will be like:

  469.75499pt,0.0pt,0.0pt,0.0pt,1,20.0pt

That string needs %fpt,%fpt,%fpt,%fpt,%ld,%fpt as its scanf format.  

do_pos_special() instead sscanf's list as %ld, which will pick up just
the 469.  So here is the third patch (and the dvicore.c with all three
patches is attached).

I tested the result and it still works with pos:pxywhd, and I compiled
it with -Wformat=2 just to make sure I hadn't screwed up a sscanf or
fprintf format string.  But I don't have a dvi file that uses
pos:pxyplus, so I can't test the new code path.

Hans,
	Could you make a minimal .tex file that would use pos:pxyplus?

-Sanjoy

`A nation of slaves is always prepared to applaud the clemency of their
 master who, in the abuse of absolute power, does not proceed to the
 last extremes of injustice and oppression.'  (Gibbon)  


changeset:   3:36f5c3fd455c
tag:         tip
user:        Sanjoy Mahajan <sanjoy at mrao.cam.ac.uk>
date:        Sun Jan 07 14:34:34 2007 -0500
summary:     do_pos_special(): 'list' needs to be parsed as a structure

diff -r f30b6ea9f33e -r 36f5c3fd455c dvicore.c
--- a/dvicore.c	Sat Jan 06 21:45:10 2007 -0500
+++ b/dvicore.c	Sun Jan 07 14:34:34 2007 -0500
@@ -896,7 +896,15 @@ static void do_pos_special (unsigned cha
 static void do_pos_special (unsigned char *buffer, SIGNED_QUAD buffer_len)
 {
   unsigned char *cmd, *tag, *p;
-  SIGNED_QUAD x, y, w, h, d, list;
+  SIGNED_QUAD x, y, w, h, d;
+  double w_pt, h_pt, d_pt;	/* in pt */
+  int parsed = 0;		/* how many conversions the sscanf managed */
+
+  struct  /* see \doregisterparoptions in ConTeXt's core-pos.tex */
+  {
+    double hsize, leftskip, rightskip, hangindent, parindent;
+    SIGNED_QUAD hangafter;
+  } list;
 
   for (p = buffer; p - buffer < buffer_len && isspace(*p); p++)
     ; /* skip white chars */
@@ -919,13 +927,15 @@ static void do_pos_special (unsigned cha
     ; /* skip white chars */
   if (p - buffer < buffer_len)
     {
-      float w_f, h_f, d_f;	/* in pt */
-      /* what the hell is list? */
-      sscanf(p, "%fpt %fpt %fpt %ld", &w_f, &h_f, &d_f, &list);
-      /* convert to sp.  Forget about rounding (add 0.5 if you want it). */
-      w = w_f * 65536;
-      h = h_f * 65536;
-      d = d_f * 65536;
+      /* hangafter is a number, not a dimension, hence its %ld */
+      parsed = sscanf(p, "%lfpt %lfpt %lfpt %lfpt,%lfpt,%lfpt,%lfpt,%ld,%lfpt",
+		      &w_pt, &h_pt, &d_pt,
+		      &list.hsize, &list.leftskip, &list.rightskip,
+		      &list.hangindent, &list.hangafter, &list.parindent);
+      /* convert pt to sp.  Forget about rounding (add 0.5 if you want it). */
+      w = w_pt * 65536;
+      h = h_pt * 65536;
+      d = d_pt * 65536;
     }
 
   x = dvi_state.h + denominator / 100;
@@ -935,8 +945,14 @@ static void do_pos_special (unsigned cha
     fprintf(outfp, "\\pospxy{%s}{%d}{%ldsp}{%ldsp}\n", tag, current_page, x, y);
   else if (strcmp(cmd, "pos:pxywhd") == 0)
     fprintf(outfp, "\\pospxywhd{%s}{%d}{%ldsp}{%ldsp}{%ldsp}{%ldsp}{%ldsp}\n", tag, current_page, x, y, w, h, d);
-  else if (strcmp(cmd, "pos:pxyplus") == 0)
-    fprintf(outfp, "\\pospxyplus{%s}{%d}{%ldsp}{%ldsp}{%ldsp}{%ldsp}{%ldsp}{%ld}\n", tag, current_page, x, y, w, h, d, list);
+  else if (strcmp(cmd, "pos:pxyplus") == 0) {
+    if (parsed < 9)
+      fprintf(stderr, "dvipos: only %d conversions for \\pospxyplus but 9 are needed\nBeward: Coordinates in the output may therefore be junk.  Continuing anyway...", parsed);
+    fprintf(outfp, "\\pospxyplus{%s}{%d}{%ldsp}{%ldsp}{%ldsp}{%ldsp}{%ldsp}", tag, current_page, x, y, w, h, d);
+    fprintf(outfp, "{%lfpt,%lfpt,%lfpt,%lfpt,%ld,%lfpt}\n",
+	    list.hsize, list.leftskip, list.rightskip,
+	    list.hangindent, list.hangafter, list.parindent);
+  }
   else if (strcmp(cmd, "pos:begbox") == 0)
     new_bbox(tag, BOX_TYPE);
   else if (strcmp(cmd, "pos:endbox") == 0)

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/x-c
Size: 44782 bytes
Desc: dvicore.c with all 3 patches applied
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070107/4a1414f4/attachment-0001.bin 

From sanjoy at mrao.cam.ac.uk  Sun Jan  7 22:21:16 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Sun, 07 Jan 2007 16:21:16 -0500
Subject: [dev-context] where is dvipos? dvipos fails using TL2006 test
	tree
In-Reply-To: Your message of "Sun, 07 Jan 2007 12:33:50 +0100."
	<45A0DA9E.5060809@elvenkind.com> 
Message-ID: <E1H3fS8-0001J0-NU@approximate.corpus.cam.ac.uk>

Here's the latest dvipos including a new manpage.  Choose your poison:
zip and tgz formats attached.  "make && make install install-man" if you
want to install the man page too.

-Sanjoy

`A nation of slaves is always prepared to applaud the clemency of their
 master who, in the abuse of absolute power, does not proceed to the
 last extremes of injustice and oppression.'  (Gibbon)  

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/x-gtar
Size: 25660 bytes
Desc: dvipos-20070107 tgz
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070107/34754e3f/attachment-0001.gtar 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/x-zip
Size: 31604 bytes
Desc: dvipos-20070107 zip
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070107/34754e3f/attachment-0001.bin 

From contexttest-bugs at foundry.supelec.fr  Mon Jan  8 13:37:34 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Mon, 8 Jan 2007 13:37:34 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B52=5D_original-a?=
	=?utf-8?q?dobe-euro=2Emap_for_dvips?=
Message-ID: <200701081237.l08CbYqh000338@semantic.metz.supelec.fr>

Bugs item #52, was opened at 2007-01-04 12:07
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=52&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: original-adobe-euro.map for dvips 
Resolution: None
Version: None
Category: None


Initial Comment:
When creating dvi and ps output with following input:
\usesymbols[eur]
\starttext
\texteuro
\stoptext
no euro-symbol shows up.
dvips does not understand the map file.
Peter


----------------------------------------------------------------------

Comment By: Peter M?nster (peter)
Date: 2007-01-08 13:37

Message:
Yes, Taco. This helps.
Thanks, Peter


----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2007-01-05 17:36

Message:
The output from the texexec --dvi case looks good at first glance.
I do not have the font installed myself, but you could try adding
the PostScript font names in that map file (this will not harm pdftex):

euromo   EuroMono-Regular      <euromo.pfb
euromob  EuroMono-Bold         <euromob.pfb
euromoi  EuroMono-Italic       <euromoi.pfb
euromobi EuroMono-BoldItalic   <euromobi.pfb
eurosa   EuroSans-Regular      <eurosa.pfb
eurosab  EuroSans-Bold         <eurosab.pfb
eurosai  EuroSans-Italic       <eurosai.pfb
eurosabi EuroSans-BoldItalic   <eurosebi.pfb
eurose   EuroSerif-Regular     <eurose.pfb
euroseb  EuroSerif-Bold        <euroseb.pfb
eurosei  EuroSerif-Italic      <eurosei.pfb
eurosebi EuroSerif-BoldItalic  <eurosebi.pfb


----------------------------------------------------------------------

Comment By: Peter M?nster (peter)
Date: 2007-01-05 17:26

Message:
When using texexec --dvi, the file in pdftex is read
and dvips outputs this:
This is dvips(k) 5.96 Copyright 2005 Radical Eye Software (www.radicaleye.com)
' TeX output 2007.01.05:1712' -> test.ps
<tex.pro><lm-ec.enc><texps.pro>. <eurose.pfb><lmr12.pfb>[1] 

From taco at elvenkind.com  Mon Jan  8 20:01:54 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 08 Jan 2007 20:01:54 +0100
Subject: [dev-context] where is dvipos? dvipos fails using TL2006 test
 tree
In-Reply-To: <E1H3fS8-0001J0-NU@approximate.corpus.cam.ac.uk>
References: <E1H3fS8-0001J0-NU@approximate.corpus.cam.ac.uk>
Message-ID: <45A29522.9050500@elvenkind.com>


Hi,

I hope Karl or Norbert can take care of adding this to TL. I am home
sick (flu, nothing serious, but I do not have a texlive source tree
here).

Taco



Sanjoy Mahajan wrote:
> Here's the latest dvipos including a new manpage.  Choose your poison:
> zip and tgz formats attached.  "make && make install install-man" if you
> want to install the man page too.
> 
> -Sanjoy
> 
> `A nation of slaves is always prepared to applaud the clemency of their
>  master who, in the abuse of absolute power, does not proceed to the
>  last extremes of injustice and oppression.'  (Gibbon)  


From preining at logic.at  Tue Jan  9 17:52:16 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 9 Jan 2007 17:52:16 +0100
Subject: [dev-context] texexec and return codes ... bad
In-Reply-To: <20070105103742.GI12154@gamma.logic.tuwien.ac.at>
References: <20070105103742.GI12154@gamma.logic.tuwien.ac.at>
Message-ID: <20070109165216.GR30551@gamma.logic.tuwien.ac.at>

Pling hi all!

On Fre, 05 Jan 2007, Norbert Preining wrote:
> texexec does not return a useful return code:
> # texexec --nonstopmode --fast --make --aleph cont-en
> ...
> l.275 \defineucharmapping{\s!default}
>                                      #1#2%
...
> # echo $?
> 0

> And, since I am at it: It does not honor the --nonstopmode:
> # texexec --nonstopmode --fast --make --xetex cont-en
> ...
> loading         : Context Encoding Macros (pdf)
> ! Undefined control sequence.
> l.63 \ifcase\pdfgentounicode
>                              \else \expandafter \endinput \fi
> ?
> 
> and waiting there.


Any ideas ... suggestions ...?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
ABINGER (n.)
One who washes up everything except the frying pan, the cheese grater
and the saucepan which the chocolate sauce has been made in.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Tue Jan  9 20:25:22 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 09 Jan 2007 20:25:22 +0100
Subject: [dev-context] texexec and return codes ... bad
In-Reply-To: <20070109165216.GR30551@gamma.logic.tuwien.ac.at>
References: <20070105103742.GI12154@gamma.logic.tuwien.ac.at>
	<20070109165216.GR30551@gamma.logic.tuwien.ac.at>
Message-ID: <45A3EC22.2020307@wxs.nl>

Norbert Preining wrote:
>
>> # texexec --nonstopmode --fast --make --xetex cont-en
>> ...
>> loading         : Context Encoding Macros (pdf)
>> ! Undefined control sequence.
>> l.63 \ifcase\pdfgentounicode
>>                              \else \expandafter \endinput \fi
>> ?
>>
>> and waiting there.
>>     
>
>
>   
i hope that the current 'current' is ok; btw, \pdfgentounicode is part of the latest pdftex (the one that goed on tex live) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Tue Jan  9 19:51:59 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 09 Jan 2007 19:51:59 +0100
Subject: [dev-context] texexec and return codes ... bad
In-Reply-To: <20070109165216.GR30551@gamma.logic.tuwien.ac.at>
References: <20070105103742.GI12154@gamma.logic.tuwien.ac.at>
	<20070109165216.GR30551@gamma.logic.tuwien.ac.at>
Message-ID: <45A3E44F.7050401@wxs.nl>

Norbert Preining wrote:
>
>
> Any ideas ... suggestions ...?
>   
fixed in the beta already, i'll make a new current zip (has to do with changes in pdftex) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From adityam at umich.edu  Wed Jan 10 00:09:24 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Tue, 9 Jan 2007 18:09:24 -0500 (EST)
Subject: [dev-context] typo in core-rul documentation
Message-ID: <alpine.WNT.0.81.0701091808200.872@nqvgln>

line 295 says

%D  \startbuffer[tmp-2]
%D  \framed[backgroundachtergrond=fancy]{How Fancy!}
%D  \framed[backgroundachtergrond=fancy,frame=off]{Even More Fancy!}
%D  \stopbuffer

I think that these sould be background rather than 
backgroundachterground

Aditya

From preining at logic.at  Wed Jan 10 00:27:13 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 10 Jan 2007 00:27:13 +0100
Subject: [dev-context] texexec and return codes ... bad
In-Reply-To: <45A3EC22.2020307@wxs.nl>
References: <20070105103742.GI12154@gamma.logic.tuwien.ac.at>
	<20070109165216.GR30551@gamma.logic.tuwien.ac.at>
	<45A3EC22.2020307@wxs.nl>
Message-ID: <20070109232713.GD6862@gamma.logic.tuwien.ac.at>

On Die, 09 Jan 2007, Hans Hagen wrote:
> >># texexec --nonstopmode --fast --make --xetex cont-en
> >>...
> >>loading         : Context Encoding Macros (pdf)
> >>! Undefined control sequence.
> >>l.63 \ifcase\pdfgentounicode
> >>                             \else \expandafter \endinput \fi
> >>?
> >>
> >>and waiting there.
> >>    
> >
> >
> >  
> i hope that the current 'current' is ok; btw, \pdfgentounicode is part of 
> the latest pdftex (the one that goed on tex live) 

But do you *EXPECT* that everyone will have pdftex 1.40.1 installed? Is
it obligatory?

In Debian we wont have it for some time, because it takes some time to
create new packages for TeX Live 2006/7.

Shouldn't the usage of a new primitive somehow be shielded in case
someone uses pdftex 1.30.5?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
TORLUNDY (n.) Narrow but thickly grimed strip of floor between the
fridge and the sink unit in the kitchen of a rented flat.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Wed Jan 10 01:21:38 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 10 Jan 2007 01:21:38 +0100
Subject: [dev-context] texexec and return codes ... bad
In-Reply-To: <45A3E44F.7050401@wxs.nl>
References: <20070105103742.GI12154@gamma.logic.tuwien.ac.at>
	<20070109165216.GR30551@gamma.logic.tuwien.ac.at>
	<45A3E44F.7050401@wxs.nl>
Message-ID: <20070110002138.GG6862@gamma.logic.tuwien.ac.at>

On Die, 09 Jan 2007, Hans Hagen wrote:
> fixed in the beta already, i'll make a new current zip (has to do with 
> changes in pdftex) 

One question: I tested the release 2007-01-09 and the xetex bug is gone,
but the return value of texexec still is 0, even when aleph breaks
making a cont-en format. Does this mean that the beta version you are
talking about is *not* the 2007-01-09 release, but the next release?

Thanks

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
WHAPLODE DROVE (n.)
A homicidal golf stroke.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Wed Jan 10 09:46:10 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 10 Jan 2007 09:46:10 +0100
Subject: [dev-context] texexec and return codes ... bad
In-Reply-To: <20070110002138.GG6862@gamma.logic.tuwien.ac.at>
References: <20070105103742.GI12154@gamma.logic.tuwien.ac.at>
	<20070109165216.GR30551@gamma.logic.tuwien.ac.at>
	<45A3E44F.7050401@wxs.nl>
	<20070110002138.GG6862@gamma.logic.tuwien.ac.at>
Message-ID: <45A4A7D2.7040008@elvenkind.com>

Norbert Preining wrote:
> On Die, 09 Jan 2007, Hans Hagen wrote:
> 
>>fixed in the beta already, i'll make a new current zip (has to do with 
>>changes in pdftex) 
> 
> 
> One question: I tested the release 2007-01-09 and the xetex bug is gone,
> but the return value of texexec still is 0, even when aleph breaks
> making a cont-en format. Does this mean that the beta version you are
> talking about is *not* the 2007-01-09 release, but the next release?

Hans, the same problem occurs in texsync, and I assume anything that
is started by texmfstart.

I do not know what the proper ruby syntax is for perl's exit(), but
in general, you should return "zero" for success, anything else for
failure (normally programs use simply "one" in all cases).

If you do not call exit() yourself and do not call die() either
(whatever the ruby equivalent of that is), the default return value
is zero == success. That can be an enormous pain in the butt when
texexec etc. are used inside scripts|makefiles.

Best, Taco

From taco at elvenkind.com  Wed Jan 10 10:07:59 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 10 Jan 2007 10:07:59 +0100
Subject: [dev-context] Cron <context@server>
	/var/www/aanhet.net/context/bin/cron/context-mirror
In-Reply-To: <20070109200105.CEF0428000A5@server.aanhet.net>
References: <20070109200105.CEF0428000A5@server.aanhet.net>
Message-ID: <45A4ACEF.8010207@elvenkind.com>


Hi,

Hans made a new release yesterday evening. I do not
know what is in it (yet), but consider yourself warned  :-)

Taco

Cron Daemon wrote:
> receiving file list ... done
>  ./
>  context/beta/
>  context/current/
>  context/current/cont-exa.zip
>  context/current/cont-ext.zip
>  context/current/cont-fnt.zip
>  context/latest/
>  context/current/cont-img.zip
>  context/current/cont-mpd.zip
>  context/current/cont-ppc.zip
>  context/current/cont-tmf.zip
>  context/current/cont-win.zip

From pragma at wxs.nl  Wed Jan 10 10:51:54 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 10 Jan 2007 10:51:54 +0100
Subject: [dev-context] texexec and return codes ... bad
In-Reply-To: <45A4A7D2.7040008@elvenkind.com>
References: <20070105103742.GI12154@gamma.logic.tuwien.ac.at>
	<20070109165216.GR30551@gamma.logic.tuwien.ac.at>
	<45A3E44F.7050401@wxs.nl>
	<20070110002138.GG6862@gamma.logic.tuwien.ac.at>
	<45A4A7D2.7040008@elvenkind.com>
Message-ID: <45A4B73A.6040705@wxs.nl>

Taco Hoekwater wrote:
> Norbert Preining wrote:
>> On Die, 09 Jan 2007, Hans Hagen wrote:
>>
>>> fixed in the beta already, i'll make a new current zip (has to do 
>>> with changes in pdftex) 
>>
>>
>> One question: I tested the release 2007-01-09 and the xetex bug is gone,
>> but the return value of texexec still is 0, even when aleph breaks
>> making a cont-en format. Does this mean that the beta version you are
>> talking about is *not* the 2007-01-09 release, but the next release?
>
> Hans, the same problem occurs in texsync, and I assume anything that
> is started by texmfstart.
>
> I do not know what the proper ruby syntax is for perl's exit(), but
> in general, you should return "zero" for success, anything else for
> failure (normally programs use simply "one" in all cases).
>
> If you do not call exit() yourself and do not call die() either
> (whatever the ruby equivalent of that is), the default return value
> is zero == success. That can be an enormous pain in the butt when
> texexec etc. are used inside scripts|makefiles.
>
the problem is that those scripting languages behave differently (and to be honest i never use return codes because i never write complex os dependent scripts but package everything in e.g. ruby so that i can run everywhere; return codes is alien teritory for me); taco and i need to figure it out somehow 
 


Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Wed Jan 10 11:20:03 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 10 Jan 2007 11:20:03 +0100
Subject: [dev-context] texexec and return codes ... bad
In-Reply-To: <45A4A7D2.7040008@elvenkind.com>
References: <20070105103742.GI12154@gamma.logic.tuwien.ac.at>
	<20070109165216.GR30551@gamma.logic.tuwien.ac.at>
	<45A3E44F.7050401@wxs.nl>
	<20070110002138.GG6862@gamma.logic.tuwien.ac.at>
	<45A4A7D2.7040008@elvenkind.com>
Message-ID: <45A4BDD3.5070009@wxs.nl>

Taco Hoekwater wrote:
> Norbert Preining wrote:
>> On Die, 09 Jan 2007, Hans Hagen wrote:
>>
>>> fixed in the beta already, i'll make a new current zip (has to do 
>>> with changes in pdftex) 
>>
>>
>> One question: I tested the release 2007-01-09 and the xetex bug is gone,
>> but the return value of texexec still is 0, even when aleph breaks
>> making a cont-en format. Does this mean that the beta version you are
>> talking about is *not* the 2007-01-09 release, but the next release?
>
> Hans, the same problem occurs in texsync, and I assume anything that
> is started by texmfstart.
>
> I do not know what the proper ruby syntax is for perl's exit(), but
> in general, you should return "zero" for success, anything else for
> failure (normally programs use simply "one" in all cases).
>
> If you do not call exit() yourself and do not call die() either
> (whatever the ruby equivalent of that is), the default return value
> is zero == success. That can be an enormous pain in the butt when
> texexec etc. are used inside scripts|makefiles.
>
ok, i found out there i already implemented some sort of error reporting and exit stuff but not for formats; i'll make a new zip (and keep my fingers crossed) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From preining at logic.at  Wed Jan 10 12:11:05 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 10 Jan 2007 12:11:05 +0100
Subject: [dev-context] engine setting in context/texexec
Message-ID: <20070110111105.GH17643@gamma.logic.tuwien.ac.at>

Hi Hans and Taco!

I found something interesting, but I couldn't test properly till now:

pdftex 1.40.1 sets engine=pdftex (not pdfetex), but texexec puts created
formats into web2c/pdfetex, so they won't be found as soon as we have
pdftex >= 1.40 around.

Is there a way in texexec to adjust this?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
YEPPOON (n.)
One of the hat-hanging corks which Australians wear for making Qantas
commercials.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Wed Jan 10 12:27:29 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 10 Jan 2007 12:27:29 +0100
Subject: [dev-context] Cron
	<context@server>	/var/www/aanhet.net/context/bin/cron/context-mirror
In-Reply-To: <45A4ACEF.8010207@elvenkind.com>
References: <20070109200105.CEF0428000A5@server.aanhet.net>
	<45A4ACEF.8010207@elvenkind.com>
Message-ID: <45A4CDA1.6030901@wxs.nl>

Taco Hoekwater wrote:
> Hi,
>
> Hans made a new release yesterday evening. I do not
> know what is in it (yet), but consider yourself warned  :-)
>
>   
i just uploaded a current with some patched to texexec (for norbert) 

	texmfstart --verbose texexec --make --all --fast en 

should generate format and report success 

	texmfstart --verbose texexec --make --all --fast xx 

reports a failure and exits with code 1 


Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Wed Jan 10 12:31:17 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 10 Jan 2007 12:31:17 +0100
Subject: [dev-context] engine setting in context/texexec
In-Reply-To: <20070110111105.GH17643@gamma.logic.tuwien.ac.at>
References: <20070110111105.GH17643@gamma.logic.tuwien.ac.at>
Message-ID: <45A4CE85.2020303@wxs.nl>

Norbert Preining wrote:
> Hi Hans and Taco!
>
> I found something interesting, but I couldn't test properly till now:
>
> pdftex 1.40.1 sets engine=pdftex (not pdfetex), but texexec puts created
> formats into web2c/pdfetex, so they won't be found as soon as we have
> pdftex >= 1.40 around.
>
> Is there a way in texexec to adjust this?
>
>   
it may be related to left overs of pdfetex (best remove all traces of pdfetex; in the transition there is indeed this progname stuff going around); i can even imagine (for users) mix ups with progname settings in the cnf file (plain tex)

in texexec i've removed all traces of pdfetex (the e) so things should be ok (will test later today on linux since i also want to test the luatex format generation there without the need for lua being installed; looks ok so far) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From taco at elvenkind.com  Wed Jan 10 12:36:39 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 10 Jan 2007 12:36:39 +0100
Subject: [dev-context] engine setting in context/texexec
In-Reply-To: <45A4CE85.2020303@wxs.nl>
References: <20070110111105.GH17643@gamma.logic.tuwien.ac.at>
	<45A4CE85.2020303@wxs.nl>
Message-ID: <45A4CFC7.9000701@elvenkind.com>

Hans Hagen wrote:
> 
> in texexec i've removed all traces of pdfetex (the e) so things should 

This in itself is a bit problematic, I think. It looks to me like this
breaks all installs that only have pdftex 1.30 (because that pdftex is
not etex).

Taco

From preining at logic.at  Wed Jan 10 12:40:23 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 10 Jan 2007 12:40:23 +0100
Subject: [dev-context] engine setting in context/texexec
In-Reply-To: <45A4CFC7.9000701@elvenkind.com>
References: <20070110111105.GH17643@gamma.logic.tuwien.ac.at>
	<45A4CE85.2020303@wxs.nl> <45A4CFC7.9000701@elvenkind.com>
Message-ID: <20070110114023.GJ17643@gamma.logic.tuwien.ac.at>

On Mit, 10 Jan 2007, Taco Hoekwater wrote:
> >in texexec i've removed all traces of pdfetex (the e) so things should 
> 
> This in itself is a bit problematic, I think. It looks to me like this
> breaks all installs that only have pdftex 1.30 (because that pdftex is
> not etex).

I assume that this will happen, yes. I can test it in a few hours on my
home machine if you want to know for sure.

It would be better to check whether we are running < 1.40 or >= 1.40 and
adjust the setting respectively.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
Queasy but umbowed. The kind of feeling one gets when discovering a
plastic compartment in a fridge in which thing are growing.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Wed Jan 10 12:52:08 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 10 Jan 2007 12:52:08 +0100
Subject: [dev-context] engine setting in context/texexec
In-Reply-To: <20070110114023.GJ17643@gamma.logic.tuwien.ac.at>
References: <20070110111105.GH17643@gamma.logic.tuwien.ac.at>
	<45A4CE85.2020303@wxs.nl> <45A4CFC7.9000701@elvenkind.com>
	<20070110114023.GJ17643@gamma.logic.tuwien.ac.at>
Message-ID: <45A4D368.2060403@elvenkind.com>

Norbert Preining wrote:
> On Mit, 10 Jan 2007, Taco Hoekwater wrote:
> 
>>>in texexec i've removed all traces of pdfetex (the e) so things should 
>>
>>This in itself is a bit problematic, I think. It looks to me like this
>>breaks all installs that only have pdftex 1.30 (because that pdftex is
>>not etex).
> 
> 
> I assume that this will happen, yes. I can test it in a few hours on my
> home machine if you want to know for sure.
> 
> It would be better to check whether we are running < 1.40 or >= 1.40 and
> adjust the setting respectively.

Thanh gave everybody a bit of a headache when he decided to drop 
"pdfetex" instead of dropping "pdftex". I do not see any easy way
of distinguishing an upgraded 1.40 from an old 1.30 installation:
spurious "pdfetex" executables are fairly likely even in up-to-date
systems, because of pre-installed TeXs. Often upgrades do not delete
old stuff properly, and there could also be a visible system-wide
tetex or something.

Best,

Taco


From preining at logic.at  Wed Jan 10 14:03:27 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 10 Jan 2007 14:03:27 +0100
Subject: [dev-context] texexec return codes
In-Reply-To: <45A4CDA1.6030901@wxs.nl>
References: <20070109200105.CEF0428000A5@server.aanhet.net>
	<45A4ACEF.8010207@elvenkind.com> <45A4CDA1.6030901@wxs.nl>
Message-ID: <20070110130327.GB29519@gamma.logic.tuwien.ac.at>

On Mit, 10 Jan 2007, Hans Hagen wrote:
> i just uploaded a current with some patched to texexec (for norbert) 

Thanks a lot, but it is getting worse ;-) Now everything is the other
way round!!!! Ahhhhh

> 	texmfstart --verbose texexec --make --all --fast en 
> 
> should generate format and report success 

It reports success, but returns 1, which is bad:
execution was successful
bagnasciuga:~# echo $?
1
bagnasciuga:~#

> 	texmfstart --verbose texexec --make --all --fast xx 
> 
> reports a failure and exits with code 1 

it reports 0!!

execution failed
bagnasciuga:~# echo $?
0
bagnasciuga:~#

So we are close, but not finished ;-)

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
DUGGLEBY (n.)
The person in front of you in the supermarket queue who has just
unloaded a bulging trolley on to the conveyor belt and is now in the
process of trying to work out which pocket they left their cheque book
in, and indeed which pair of trousers.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Wed Jan 10 15:00:56 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 10 Jan 2007 15:00:56 +0100
Subject: [dev-context] texexec return codes
In-Reply-To: <20070110130327.GB29519@gamma.logic.tuwien.ac.at>
References: <20070109200105.CEF0428000A5@server.aanhet.net>
	<45A4ACEF.8010207@elvenkind.com> <45A4CDA1.6030901@wxs.nl>
	<20070110130327.GB29519@gamma.logic.tuwien.ac.at>
Message-ID: <45A4F198.5050504@wxs.nl>

Norbert Preining wrote:
> On Mit, 10 Jan 2007, Hans Hagen wrote:
>   
>> i just uploaded a current with some patched to texexec (for norbert) 
>>     
>
> Thanks a lot, but it is getting worse ;-) Now everything is the other
> way round!!!! Ahhhhh
>
>   
>> 	texmfstart --verbose texexec --make --all --fast en 
>>
>> should generate format and report success 
>>     
>
> It reports success, but returns 1, which is bad:
> execution was successful
> bagnasciuga:~# echo $?
> 1
> bagnasciuga:~#
>
>   
>> 	texmfstart --verbose texexec --make --all --fast xx 
>>
>> reports a failure and exits with code 1 
>>     
>
> it reports 0!!
>
> execution failed
> bagnasciuga:~# echo $?
> 0
> bagnasciuga:~#
>
> So we are close, but not finished ;-)
>   

in scripts/context/ruby/switch.rb i say ...

    def exit
        if @error then Kernel.exit(1) else Kernel.exit(0) end
    end


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From preining at logic.at  Wed Jan 10 15:56:24 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 10 Jan 2007 15:56:24 +0100
Subject: [dev-context] texexec return codes
In-Reply-To: <45A4F198.5050504@wxs.nl>
References: <20070109200105.CEF0428000A5@server.aanhet.net>
	<45A4ACEF.8010207@elvenkind.com> <45A4CDA1.6030901@wxs.nl>
	<20070110130327.GB29519@gamma.logic.tuwien.ac.at>
	<45A4F198.5050504@wxs.nl>
Message-ID: <20070110145624.GJ29519@gamma.logic.tuwien.ac.at>

On Mit, 10 Jan 2007, Hans Hagen wrote:
>    def exit
>        if @error then Kernel.exit(1) else Kernel.exit(0) end
>    end

Maybe ruby switches the 1 <-> 0??? No idea to be honest.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
SHIFNAL (n.,vb.)
An awkward shuffling walk caused by two or more people in a hurry
accidentally getting into the same segment of revolving door. A
similar effect is achieved by people entering three-legged races
unwisely joined at the neck instead of the ankles.
			--- Douglas Adams, The Meaning of Liff

From contexttest-bugs at foundry.supelec.fr  Wed Jan 10 15:57:52 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Wed, 10 Jan 2007 09:57:52 -0500
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B64=5D_texexec_--?=
	=?utf-8?q?module_does_not_honor_--result?=
Message-ID: <200701101457.l0AEvqkD026846@semantic.metz.supelec.fr>

Bugs item #64, was opened at 2007-01-10 09:57
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=64&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Aditya Mahajan (adityam)
Assigned to: Nobody (None)
Summary: texexec --module does not honor --result 
Resolution: None
Version: None
Category: scripts


Initial Comment:

    texexec --module --mode=color --color tex/context/third/t-vim.pdf
       --result=doc/context/third/vim/vim-doc.pdf

 puts the result in the current directory rather than honoring the --result= directive

Aditya

----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=64&group_id=21


From taco at elvenkind.com  Wed Jan 10 16:06:05 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 10 Jan 2007 16:06:05 +0100
Subject: [dev-context] texexec return codes
In-Reply-To: <20070110145624.GJ29519@gamma.logic.tuwien.ac.at>
References: <20070109200105.CEF0428000A5@server.aanhet.net>
	<45A4ACEF.8010207@elvenkind.com> <45A4CDA1.6030901@wxs.nl>
	<20070110130327.GB29519@gamma.logic.tuwien.ac.at>
	<45A4F198.5050504@wxs.nl>
	<20070110145624.GJ29519@gamma.logic.tuwien.ac.at>
Message-ID: <45A500DD.7050900@elvenkind.com>

Norbert Preining wrote:
> On Mit, 10 Jan 2007, Hans Hagen wrote:
> 
>>   def exit
>>       if @error then Kernel.exit(1) else Kernel.exit(0) end
>>   end
> 
> 
> Maybe ruby switches the 1 <-> 0??? No idea to be honest.

Me neither, but if the first option is the wrong one, then
I assume the opposite has to be correct.

Taco



From pragma at wxs.nl  Wed Jan 10 16:06:22 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 10 Jan 2007 16:06:22 +0100
Subject: [dev-context] texexec return codes
In-Reply-To: <20070110145624.GJ29519@gamma.logic.tuwien.ac.at>
References: <20070109200105.CEF0428000A5@server.aanhet.net>
	<45A4ACEF.8010207@elvenkind.com> <45A4CDA1.6030901@wxs.nl>
	<20070110130327.GB29519@gamma.logic.tuwien.ac.at>
	<45A4F198.5050504@wxs.nl>
	<20070110145624.GJ29519@gamma.logic.tuwien.ac.at>
Message-ID: <45A500EE.2050507@wxs.nl>

Norbert Preining wrote:
> On Mit, 10 Jan 2007, Hans Hagen wrote:
>   
>>    def exit
>>        if @error then Kernel.exit(1) else Kernel.exit(0) end
>>    end
>>     
>
> Maybe ruby switches the 1 <-> 0??? No idea to be honest.
>   
if execute(ARGV) then
    report("\nexecution was successful") if $verbose
    exit(0)
else
    report("\nexecution failed") if $verbose
    exit(1)
end

can you check this at the end of texmfstart,rb? 

Hans 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From sanjoy at mrao.cam.ac.uk  Wed Jan 10 16:14:41 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Wed, 10 Jan 2007 15:14:41 +0000
Subject: [dev-context] engine setting in context/texexec
In-Reply-To: Your message of "Wed, 10 Jan 2007 12:11:05 +0100."
	<20070110111105.GH17643@gamma.logic.tuwien.ac.at> 
Message-ID: <E1H4fA1-0004es-00@skye.ra.phy.cam.ac.uk>

> pdftex 1.40.1 sets engine=pdftex (not pdfetex), but texexec puts created
> formats into web2c/pdfetex, so they won't be found as soon as we have
> pdftex >= 1.40 around.

Indeed.  See the appended email from ntg-context.  I don't see how to
fix the problem, except for the symlink hack that I'm doing now.
Several solutions don't work:

1. Remove all traces of pdfetex etc. -- because parallel installations
   (e.g. tetex or texlive) might use an older pdf(e)tex and need to
   run pdfetex explicitly to get the extensions.

2. Put the formats in web2c/pdftex/ and pass --engine=pdftex to
   texexec, because it (last I tested) looks in web2c/pdfetex/ anyway.

So I haven't found anything better than symlinking web2c/pdftex ->
web2c/pdfetex.  TL2006 is oblivious to the symlink because it doesn't
use the $engine subpath.

TeX path searching is a nightmare!

-Sanjoy

  Date:    Wed, 03 Jan 2007 21:08:25 GMT
  From:    Sanjoy Mahajan <sanjoy at mrao.cam.ac.uk>
  To:      mailing list for ConTeXt users <ntg-context at ntg.nl>
  Subject: Re: [NTG-context] engine should be pdftex

  > "texexec --make --all" puts the formats in the subdirectory
  > "pdfetex" but I think it should be "pdftex" now.

  If 'now' means with pdftex 1.40.0, I think you're right.  But that
  would break context with earlier pdftex's.  I've made a symlink from
  /var/lib/texmf/web2c/pdftex to pdfetex and all is okay now.
  TexLive2006 works without that hack, because it doesn't put the
  context formats in an $engine subdirectory, which may cause other
  problems.

  See the thread "debian context updates" (Tue, 02 Jan 2007 20:39:40 GMT).

  -Sanjoy

  `Not all those who wander are lost.' (J.R.R. Tolkien)

From adityam at umich.edu  Wed Jan 10 16:17:46 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 10 Jan 2007 10:17:46 -0500 (EST)
Subject: [dev-context] texexec return codes
In-Reply-To: <45A4F198.5050504@wxs.nl>
References: <20070109200105.CEF0428000A5@server.aanhet.net>
	<45A4ACEF.8010207@elvenkind.com> <45A4CDA1.6030901@wxs.nl>
	<20070110130327.GB29519@gamma.logic.tuwien.ac.at>
	<45A4F198.5050504@wxs.nl>
Message-ID: <alpine.WNT.0.81.0701101013280.3952@nqvgln>

On Wed, 10 Jan 2007, Hans Hagen wrote:

> Norbert Preining wrote:
> > On Mit, 10 Jan 2007, Hans Hagen wrote:
> > 
> >> i just uploaded a current with some patched to texexec (for norbert) 
> >> 
> >
> > Thanks a lot, but it is getting worse ;-) Now everything is the other
> > way round!!!! Ahhhhh
> >
> > 
> >> 	texmfstart --verbose texexec --make --all --fast en 
> >>
> >> should generate format and report success 
> >> 
> >
> > It reports success, but returns 1, which is bad:
> > execution was successful
> > bagnasciuga:~# echo $?
> > 1
> > bagnasciuga:~#
> >
> > 
> >> 	texmfstart --verbose texexec --make --all --fast xx 
> >>
> >> reports a failure and exits with code 1 
> >> 
> >
> > it reports 0!!
> >
> > execution failed
> > bagnasciuga:~# echo $?
> > 0
> > bagnasciuga:~#
> >
> > So we are close, but not finished ;-)
> > 
> 
> in scripts/context/ruby/switch.rb i say ...
>
>     def exit
>         if @error then Kernel.exit(1) else Kernel.exit(0) end
>     end

Maybe set Kernel.exit! rather than exit. exit! bypasses exception 
handling and at_exit stuff.

See http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/6482

Aditya




From preining at logic.at  Wed Jan 10 16:17:49 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 10 Jan 2007 16:17:49 +0100
Subject: [dev-context] Cron
	<context@server>	/var/www/aanhet.net/context/bin/cron/context-mirror
In-Reply-To: <45A500EE.2050507@wxs.nl> <45A4CDA1.6030901@wxs.nl>
References: <20070109200105.CEF0428000A5@server.aanhet.net>
	<45A4ACEF.8010207@elvenkind.com> <45A4CDA1.6030901@wxs.nl>
	<20070110130327.GB29519@gamma.logic.tuwien.ac.at>
	<45A4F198.5050504@wxs.nl>
	<20070110145624.GJ29519@gamma.logic.tuwien.ac.at>
	<45A500EE.2050507@wxs.nl>
	<20070109200105.CEF0428000A5@server.aanhet.net>
	<45A4ACEF.8010207@elvenkind.com> <45A4CDA1.6030901@wxs.nl>
Message-ID: <20070110151749.GL29519@gamma.logic.tuwien.ac.at>

On Mit, 10 Jan 2007, Hans Hagen wrote:
> if execute(ARGV) then
>    report("\nexecution was successful") if $verbose
>    exit(0)
> else
>    report("\nexecution failed") if $verbose
>    exit(1)
> end
> 
> can you check this at the end of texmfstart,rb? 

Yes it did the trick:

On Mit, 10 Jan 2007, Hans Hagen wrote:
> i just uploaded a current with some patched to texexec (for norbert) 
> 
> 	texmfstart --verbose texexec --make --all --fast en 

returns 0

> should generate format and report success 
> 
> 	texmfstart --verbose texexec --make --all --fast xx 
> 
> reports a failure and exits with code 1 

returns 1

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
NEMPNETT THRUBWELL (n.)
The feeling experienced when driving off for the frist time on a brand
new motorbike.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Wed Jan 10 16:58:43 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 10 Jan 2007 16:58:43 +0100
Subject: [dev-context] Cron
	<context@server>	/var/www/aanhet.net/context/bin/cron/context-mirror
In-Reply-To: <20070110151749.GL29519@gamma.logic.tuwien.ac.at>
References: <20070109200105.CEF0428000A5@server.aanhet.net>
	<45A4ACEF.8010207@elvenkind.com> <45A4CDA1.6030901@wxs.nl>
	<20070110130327.GB29519@gamma.logic.tuwien.ac.at>
	<45A4F198.5050504@wxs.nl>
	<20070110145624.GJ29519@gamma.logic.tuwien.ac.at>
	<45A500EE.2050507@wxs.nl>
	<20070109200105.CEF0428000A5@server.aanhet.net>
	<45A4ACEF.8010207@elvenkind.com> <45A4CDA1.6030901@wxs.nl>
	<20070110151749.GL29519@gamma.logic.tuwien.ac.at>
Message-ID: <45A50D33.2010707@wxs.nl>

Norbert Preining wrote:
> On Mit, 10 Jan 2007, Hans Hagen wrote:
>   
>> if execute(ARGV) then
>>    report("\nexecution was successful") if $verbose
>>    exit(0)
>> else
>>    report("\nexecution failed") if $verbose
>>    exit(1)
>> end
>>
>> can you check this at the end of texmfstart,rb? 
>>     
>
> Yes it did the trick:
>
> On Mit, 10 Jan 2007, Hans Hagen wrote:
>   
>> i just uploaded a current with some patched to texexec (for norbert) 
>>
>> 	texmfstart --verbose texexec --make --all --fast en 
>>     
>
> returns 0
>
>   
>> should generate format and report success 
>>
>> 	texmfstart --verbose texexec --make --all --fast xx 
>>
>> reports a failure and exits with code 1 
>>     
>
> returns 1
>   
ok, i'll upload the fix later today 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Wed Jan 10 17:02:19 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 10 Jan 2007 17:02:19 +0100
Subject: [dev-context] engine setting in context/texexec
In-Reply-To: <E1H4fA1-0004es-00@skye.ra.phy.cam.ac.uk>
References: <E1H4fA1-0004es-00@skye.ra.phy.cam.ac.uk>
Message-ID: <45A50E0B.7080304@wxs.nl>

Sanjoy Mahajan wrote:
>
> TeX path searching is a nightmare!
>   
no, it's more that downward compatibility of tex live, tds and kpse is a 
non-issue (wipe out and install clean policy)

personally i think that linux users can best install debian packages and 
leave tex live for what it is; actually, thinking of it ... since there 
is room enough on the tex collection dvd, we can put the debian packages 
on it (also makes a nice historic snapshot)

Hans

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From sanjoy at mrao.cam.ac.uk  Wed Jan 10 17:09:17 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Wed, 10 Jan 2007 16:09:17 +0000
Subject: [dev-context] engine setting in context/texexec
In-Reply-To: Your message of "Wed, 10 Jan 2007 17:02:19 +0100."
	<45A50E0B.7080304@wxs.nl> 
Message-ID: <E1H4g0r-0005DI-00@skye.ra.phy.cam.ac.uk>

> personally i think that linux users can best install debian packages and 
> leave tex live for what it is;

I agree 100%.  I use the Debian packages plus latest pdftex (with the
engine symlink hack), latest metapost, and (give or take a day or two)
the latest ConTeXt.  

Inspired by how easy life became using the packages (versus hacking
around in the tetex configuration murk), I rewrote all the Linux
installation manpages on the wiki.

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From preining at logic.at  Wed Jan 10 17:31:46 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 10 Jan 2007 17:31:46 +0100
Subject: [dev-context] engine setting in context/texexec
In-Reply-To: <45A50E0B.7080304@wxs.nl>
References: <E1H4fA1-0004es-00@skye.ra.phy.cam.ac.uk> <45A50E0B.7080304@wxs.nl>
Message-ID: <20070110163146.GA5081@gamma.logic.tuwien.ac.at>

On Mit, 10 Jan 2007, Hans Hagen wrote:
> >TeX path searching is a nightmare!
> >  
> no, it's more that downward compatibility of tex live, tds and kpse is a 
> non-issue (wipe out and install clean policy)
> 
> personally i think that linux users can best install debian packages and 
> leave tex live for what it is; actually, thinking of it ... since there 
> is room enough on the tex collection dvd, we can put the debian packages 
> on it (also makes a nice historic snapshot)

No, you get it up side down!

The problem is not with TeX Live, there we can be sure to have pdftex
1.40.1 and don't care for other things, if there other binaries
installed this is the user problem.

The problem is more with Debian, because for now there is texlive 2005
and I have to keep backward compatibility, and upgrade pathes etc etc.

The problem lies with Debian here.

But we can manage this, but for now we have only 1.30.5 and until tl2006
is in Debian it will take a bit...

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
CURRY MALLET (n.)
A large wooden or rubber cub which poachers use to despatch cats or
other game which they can only sell to Indian resturants. For
particulary small cats the price obtainable is not worth the cost of
expending ammunition.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Wed Jan 10 18:13:56 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 10 Jan 2007 18:13:56 +0100
Subject: [dev-context] engine setting in context/texexec
In-Reply-To: <45A51D35.4040006@wxs.nl>
References: <E1H4fA1-0004es-00@skye.ra.phy.cam.ac.uk> <45A50E0B.7080304@wxs.nl>
	<20070110163146.GA5081@gamma.logic.tuwien.ac.at>
	<45A51D35.4040006@wxs.nl>
Message-ID: <20070110171356.GA8402@gamma.logic.tuwien.ac.at>

Hi Hans!

On Mit, 10 Jan 2007, Hans Hagen wrote:
> >The problem is more with Debian, because for now there is texlive 2005
> >and I have to keep backward compatibility, and upgrade pathes etc etc.
> >  
> well, it depends on the startingpoint ... you (debian) want to take care 
> of previous situations, while tex live assumes no existing installation

Well, the problem exists WHEN you take the engine path, because
currently in texlive/Debian that would be pdfetex, and in TeX Live
upstream pdftex.

> >But we can manage this, but for now we have only 1.30.5 and until tl2006
> >is in Debian it will take a bit...
> >  
> again, you (debian) support the engine subpath while texlive doesn't 
> (while its actually a tds/web2c spec)

We don't support it. I only have it working for context based formats.
All other formats go as usual into web2c/.

> i dunno the debian policy with installed fonts and such (there are tex 
> users out there with additional (bought) fonts) but that's another area 
> where downward compatibility is not guaranteed (the updmap mess)

There is extensive documentation on this contained in the 
	tex-common
package: TeX-on-Debian. I myself have quite a lot of commercial fonts
and I do still use the Debian way for local adaptions. The big advantage
here is that even a upgrade of my whole TeX system *still* leaves me
without my commercial fonts, but thery are automatically activated and
included.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
HULL (adj.)
Descriptive of the smell of a weekend cottage.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Wed Jan 10 18:55:55 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 10 Jan 2007 18:55:55 +0100
Subject: [dev-context] engine setting in context/texexec
In-Reply-To: <45A50E0B.7080304@wxs.nl>
References: <E1H4fA1-0004es-00@skye.ra.phy.cam.ac.uk> <45A50E0B.7080304@wxs.nl>
Message-ID: <45A528AB.8020508@elvenkind.com>


Hi,

Dropped the CCs because I believe everybody reads dev-context

Hans Hagen wrote:
> 
> personally i think that linux users can best install debian packages and 
> leave tex live for what it is; actually, thinking of it ... since there 

I agree with you (for the subset of users that are linux users, with
a debian-based system). For the other linux users, I've been thinking:
would it be possible to make rpm packages from the debian packages in
an automated fashion, somehow?

Meanwhile, we should warn (put on the wiki) that people on a
platform that does not have an installed pdftex 1.40 yet,
should  not attempt to run ctxtools --update.

I am thinking MikTeX & MacTeX here. And all context-minimal and
gwtex users should update the entire distribution completely.
Correct?

Best,
Taco

From pragma at wxs.nl  Wed Jan 10 18:07:01 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 10 Jan 2007 18:07:01 +0100
Subject: [dev-context] engine setting in context/texexec
In-Reply-To: <20070110163146.GA5081@gamma.logic.tuwien.ac.at>
References: <E1H4fA1-0004es-00@skye.ra.phy.cam.ac.uk> <45A50E0B.7080304@wxs.nl>
	<20070110163146.GA5081@gamma.logic.tuwien.ac.at>
Message-ID: <45A51D35.4040006@wxs.nl>

Norbert Preining wrote:
> On Mit, 10 Jan 2007, Hans Hagen wrote:
>   
>>> TeX path searching is a nightmare!
>>>  
>>>       
>> no, it's more that downward compatibility of tex live, tds and kpse is a 
>> non-issue (wipe out and install clean policy)
>>
>> personally i think that linux users can best install debian packages and 
>> leave tex live for what it is; actually, thinking of it ... since there 
>> is room enough on the tex collection dvd, we can put the debian packages 
>> on it (also makes a nice historic snapshot)
>>     
>
> No, you get it up side down!
>
> The problem is not with TeX Live, there we can be sure to have pdftex
> 1.40.1 and don't care for other things, if there other binaries
> installed this is the user problem.
>
> The problem is more with Debian, because for now there is texlive 2005
> and I have to keep backward compatibility, and upgrade pathes etc etc.
>   
well, it depends on the startingpoint ... you (debian) want to take care 
of previous situations, while tex live assumes no existing installation
> The problem lies with Debian here.
>
> But we can manage this, but for now we have only 1.30.5 and until tl2006
> is in Debian it will take a bit...
>   
again, you (debian) support the engine subpath while texlive doesn't 
(while its actually a tds/web2c spec)

i dunno the debian policy with installed fonts and such (there are tex 
users out there with additional (bought) fonts) but that's another area 
where downward compatibility is not guaranteed (the updmap mess)

Hans

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From sanjoy at mrao.cam.ac.uk  Wed Jan 10 21:11:33 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Wed, 10 Jan 2007 20:11:33 +0000
Subject: [dev-context] engine setting in context/texexec
In-Reply-To: Your message of "Wed, 10 Jan 2007 18:55:55 +0100."
	<45A528AB.8020508@elvenkind.com> 
Message-ID: <E1H4jnJ-0007ho-00@skye.ra.phy.cam.ac.uk>

> For the other linux users, I've been thinking: would it be possible
> to make rpm packages from the debian packages in an automated
> fashion, somehow?

>From alien(1), which is available on most Debian-based systems:

       alien --to-rpm package.deb
             Convert the package.deb into a package.rpm

I've not tried that direction myself, only the other way (just learnt
about the --to-rpm switch now).

The post-installation scripts might be problematic, because their
conversion requires more intelligence than is available in most
programs?

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From pragma at wxs.nl  Wed Jan 10 21:50:27 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 10 Jan 2007 21:50:27 +0100
Subject: [dev-context] engine setting in context/texexec
In-Reply-To: <45A528AB.8020508@elvenkind.com>
References: <E1H4fA1-0004es-00@skye.ra.phy.cam.ac.uk>
	<45A50E0B.7080304@wxs.nl> <45A528AB.8020508@elvenkind.com>
Message-ID: <45A55193.6020202@wxs.nl>

Taco Hoekwater wrote:
> I am thinking MikTeX & MacTeX here. And all context-minimal and
> gwtex users should update the entire distribution completely.
> Correct?
>   
the minimals are less sensitive

i'll upload minimals once i have the luatex integration sorted out 

Hans 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From preining at logic.at  Thu Jan 11 01:17:34 2007
From: preining at logic.at (Norbert Preining)
Date: Thu, 11 Jan 2007 01:17:34 +0100
Subject: [dev-context] engine setting in context/texexec
In-Reply-To: <45A528AB.8020508@elvenkind.com>
References: <E1H4fA1-0004es-00@skye.ra.phy.cam.ac.uk>
	<45A50E0B.7080304@wxs.nl> <45A528AB.8020508@elvenkind.com>
Message-ID: <20070111001734.GE5910@gamma.logic.tuwien.ac.at>

On Mit, 10 Jan 2007, Taco Hoekwater wrote:
> Meanwhile, we should warn (put on the wiki) that people on a
> platform that does not have an installed pdftex 1.40 yet,
> should  not attempt to run ctxtools --update.

And this also means that I have to hack around a bit in the context
packages for Debian to make them work with current texlive.

I will see how it works.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
Arthur's consciousness approached his body as from a great
distance, and reluctantly. It had had some bad times in
there. Slowly, nervously, it entered and settled down into
its accustomed position.
Arthur sat up.
`Where am I?' he said.
`Lord's Cricket Ground,' said Ford.
`Fine,' said Arthur, and his consciousness stepped out
again for a quick breather. His body flopped back on the
grass.
                 --- Arthur coping with his return to Earth as best as he
                 --- could.
                 --- Douglas Adams, The Hitchhikers Guide to the Galaxy

From preining at logic.at  Thu Jan 11 01:22:01 2007
From: preining at logic.at (Norbert Preining)
Date: Thu, 11 Jan 2007 01:22:01 +0100
Subject: [dev-context] engine setting in context/texexec
In-Reply-To: <E1H4jnJ-0007ho-00@skye.ra.phy.cam.ac.uk>
References: <45A528AB.8020508@elvenkind.com>
	<E1H4jnJ-0007ho-00@skye.ra.phy.cam.ac.uk>
Message-ID: <20070111002201.GF5910@gamma.logic.tuwien.ac.at>

On Mit, 10 Jan 2007, Sanjoy Mahajan wrote:
>        alien --to-rpm package.deb
>              Convert the package.deb into a package.rpm

Better as root
	alien --scripts --to-rpm ...

> The post-installation scripts might be problematic, because their
> conversion requires more intelligence than is available in most
> programs?

In fact the post-installation scripts are the big problem since other
distributions don't have update-updmap/language/formats scripts.

All the rest is self-contained.

So, to put it simple: Building a rpm would be trivial. I think I could
do it in 10min. Ok,I could do it 10 years ago when I was working on SuSE
Linux with rpm and I did knew how building rpms are working.

For someone with a bit of rpm knowledge it should be easy to convert the
debian source package to a rpm source package.

If someone steps forward and needs a bit of help, or steps forward to
help me a bit, we can do this and provide rpms at the same time as debs.
But I need someone with rpm knowledge.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
ALLTAMI (n.)
The ancient art of being able to balance the hot and cold shower taps.
			--- Douglas Adams, The Meaning of Liff

From contexttest-featurerequests at foundry.supelec.fr  Wed Jan 10 10:05:25 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Wed, 10 Jan 2007 10:05:25 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B63?=
	=?utf-8?q?=5D_Allow_attribution_immediately_following_quotation_bl?=
	=?utf-8?q?ocks?=
Message-ID: <200701100905.l0A95PjW000491@semantic.metz.supelec.fr>

Feature Requests item #63, was opened at 2007-01-10 10:05
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=63&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Taco Hoekwater (taco)
Assigned to: Nobody (None)
Summary: Allow attribution immediately following quotation blocks 
Version: None
Category: Typesetting


Initial Comment:

See the excerpt from a discussion with Oliver Buerschaper, below. That one uses a \cite command, but it could also be a footnote, or an Author's name or a wikipedia entry.  

\setupquotation[right={''\footnote{First}}]

is not usable because it gets fed into \symbol[] and many things do
not work well in that case (the \footnote, for example, disappears).

Taco


Oliver wrote:
>The disappearing footnote may be unfixable within \startquotation. It
>> would be easier to define your own start-stop pair for this, because
>> \startquotation ... \stopquotation doesn't actually support tacking on
>> stuff at the end. Try this instead:
>>
>>    \long\def\startcitedquotation[#1]#2\stopcitedquotation
>>        {\bgroup \par
>>         \startnarrower
>>           \symbol[leftquotation]%
>>           #2\removeunwantedspaces
>>           \symbol[rightquotation]%
>>           \cite[#1]
>>         \stopnarrower
>>         \par \egroup}


Works like a charm! Thanks very much for the workaround ... I've  
adapted it slightly so that the optional argument is treated as  
generic text ... in order to use \cite[], \footnote{\cite[]} or  
whatever else I need.

Could this optional argument perhaps be integrated directly in the  
usual \startquotation command some day? I guess a lot of people will  
need this ... every quotation calls for a proper reference  ;-) 

Cheers,
Oliver




----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=63&group_id=21


From contexttest-featurerequests at foundry.supelec.fr  Fri Jan 12 02:55:17 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Thu, 11 Jan 2007 20:55:17 -0500
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B63?=
	=?utf-8?q?=5D_Allow_attribution_immediately_following_quotation_bl?=
	=?utf-8?q?ocks?=
Message-ID: <200701120155.l0C1tHDS006166@semantic.metz.supelec.fr>

Feature Requests item #63, was opened at 2007-01-10 04:05
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=63&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Taco Hoekwater (taco)
Assigned to: Nobody (None)
Summary: Allow attribution immediately following quotation blocks 
Version: None
Category: Typesetting


Initial Comment:

See the excerpt from a discussion with Oliver Buerschaper, below. That one uses a \cite command, but it could also be a footnote, or an Author's name or a wikipedia entry.  

\setupquotation[right={''\footnote{First}}]

is not usable because it gets fed into \symbol[] and many things do
not work well in that case (the \footnote, for example, disappears).

Taco


Oliver wrote:
>The disappearing footnote may be unfixable within \startquotation. It
>> would be easier to define your own start-stop pair for this, because
>> \startquotation ... \stopquotation doesn't actually support tacking on
>> stuff at the end. Try this instead:
>>
>>    \long\def\startcitedquotation[#1]#2\stopcitedquotation
>>        {\bgroup \par
>>         \startnarrower
>>           \symbol[leftquotation]%
>>           #2\removeunwantedspaces
>>           \symbol[rightquotation]%
>>           \cite[#1]
>>         \stopnarrower
>>         \par \egroup}


Works like a charm! Thanks very much for the workaround ... I've  
adapted it slightly so that the optional argument is treated as  
generic text ... in order to use \cite[], \footnote{\cite[]} or  
whatever else I need.

Could this optional argument perhaps be integrated directly in the  
usual \startquotation command some day? I guess a lot of people will  
need this ... every quotation calls for a proper reference  ;-) 

Cheers,
Oliver




----------------------------------------------------------------------

>Comment By: Aditya Mahajan (adityam)
Date: 2007-01-11 20:55

Message:
I think that the reason for \cite and \footnote not working 
is this because the parameter right is typeset inside a 
\hsmash. For example see the output of

\hsmash{Footnote lost\footnote{test}}

I do not know why this is happening, but perhaps the 
following may help a guru

\setbox0=\hbox{This is a test\footnote{Box Zero}}
\setbox1=\hbox{This is a test\footnote{Box One}}

\box0    %Only footnote mark is present
\unhbox1 %Both footnote mark and the footnote is present

One way to fix this is to redefine \rightdelimitedmark not 
to use a \hsmash

\def\rightdelimitedtextmark
    {\delimitedtextparameter\c!right}
 % was  {\hsmash{\delimitedtextparameter\c!right}}

I do not know why the \hsmash is there so this may break 
something.

----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=63&group_id=21


From preining at logic.at  Fri Jan 12 13:00:04 2007
From: preining at logic.at (Norbert Preining)
Date: Fri, 12 Jan 2007 13:00:04 +0100
Subject: [dev-context] New Debian packages
Message-ID: <20070112120004.GB6816@gamma.logic.tuwien.ac.at>

Hi all!

I have uploaded new Debian packages for context/context-nonfree to
tug.org and Debian.

These packages provide a workaround for using new context with texlive
in Debian, ie pdftex < 1.40 by creating a symlink
	/var/lib/texmf/web2c/pdftex -> /var/lib/texmf/web2c/pdfetex
If
- you already had such a symlink
- or you had a directory (but not a link)
then upgrade will be smooth and you will not see anything, the directory
or symlink will be removed and a link created to pdfetex.

But if you have a symlink to some other place than pdfetex then upgrade
will break, please remove it first!

As soon as texlive 2006/7 with pdftex 1.40 enters Debian we can get rid
of this hack.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
HARBLEDOWN (vb.)
To manoeuvre a double mattress down a winding staircase.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Fri Jan 12 14:05:58 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 12 Jan 2007 14:05:58 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <20070112120004.GB6816@gamma.logic.tuwien.ac.at>
References: <20070112120004.GB6816@gamma.logic.tuwien.ac.at>
Message-ID: <45A787B6.2090200@elvenkind.com>


Hi also,

There is a new context (2007.01.12), not sure if that is the one
Norbert is already using. I am not well enough yet to give a complete
set of differences between this one and previous, but:

* pdftex 1.40 *only*, not a single trace of "pdfetex" is left
* texexec now gives a correct return value (not sure about texsync)
* map files for tex-gyre are added
* some improvementents in XeTeX unicode support
* better map file for Adobe Euro

This, I just committed to TexLive.

Best, Taco

Norbert Preining wrote:
> Hi all!
> 
> I have uploaded new Debian packages for context/context-nonfree to
> tug.org and Debian.
> 
> These packages provide a workaround for using new context with texlive
> in Debian, ie pdftex < 1.40 by creating a symlink
> 	/var/lib/texmf/web2c/pdftex -> /var/lib/texmf/web2c/pdfetex
> If
> - you already had such a symlink
> - or you had a directory (but not a link)
> then upgrade will be smooth and you will not see anything, the directory
> or symlink will be removed and a link created to pdfetex.
> 
> But if you have a symlink to some other place than pdfetex then upgrade
> will break, please remove it first!
> 
> As soon as texlive 2006/7 with pdftex 1.40 enters Debian we can get rid
> of this hack.
> 
> Best wishes
> 
> Norbert
> 
> -------------------------------------------------------------------------------
> Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
> Debian Developer <preining at debian.org>                         Debian TeX Group
> gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
> -------------------------------------------------------------------------------
> HARBLEDOWN (vb.)
> To manoeuvre a double mattress down a winding staircase.
> 			--- Douglas Adams, The Meaning of Liff
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context

From preining at logic.at  Fri Jan 12 13:21:31 2007
From: preining at logic.at (Norbert Preining)
Date: Fri, 12 Jan 2007 13:21:31 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <45A787B6.2090200@elvenkind.com>
References: <20070112120004.GB6816@gamma.logic.tuwien.ac.at>
	<45A787B6.2090200@elvenkind.com>
Message-ID: <20070112122131.GE6816@gamma.logic.tuwien.ac.at>

Hi Taco!

On Fre, 12 Jan 2007, Taco Hoekwater wrote:
> There is a new context (2007.01.12), not sure if that is the one
> Norbert is already using. I am not well enough yet to give a complete

Yes, this one is what I have uploaded ...

> * pdftex 1.40 *only*, not a single trace of "pdfetex" is left

	in Debian packages yes, but I didn't patch context but
	made a link in the formats dir

> * texexec now gives a correct return value (not sure about texsync)

	thanks a lot

> This, I just committed to TexLive.

Thanks double lot ;-)

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
LOWER PEOVER (n.)
Common solution to the problems of a humby (q.v.)
			--- Douglas Adams, The Meaning of Liff

From mgb-debian at yosemite.net  Fri Jan 12 17:07:07 2007
From: mgb-debian at yosemite.net (Mike Bird)
Date: Fri, 12 Jan 2007 08:07:07 -0800
Subject: [dev-context] New Debian packages
In-Reply-To: <20070112120004.GB6816@gamma.logic.tuwien.ac.at>
References: <20070112120004.GB6816@gamma.logic.tuwien.ac.at>
Message-ID: <200701120807.09972.mgb-debian@yosemite.net>

On Friday 12 January 2007 04:00, Norbert Preining wrote:

Hi Norbert,

A couple of points:

> I have uploaded new Debian packages for context/context-nonfree to
> tug.org and Debian.

1)  I only see 2007.01.02-1 and 2007.01.02-2 when I browse
    http://www.tug.org/texlive/Debian/context/

> These packages provide a workaround for using new context with texlive
> in Debian, ie pdftex < 1.40 by creating a symlink
> 	/var/lib/texmf/web2c/pdftex -> /var/lib/texmf/web2c/pdfetex

2) FWIW, I've been using the context-2007.01.02-2 without that link.
   I wonder is it necessary?

Some info from my system:

# find / -name pdftex -type f
# find / -name pdftex -type l
/usr/bin/pdftex
# find / -name pdfetex -type f
/usr/bin/pdfetex
# find / -name pdfetex -type l
# file /usr/bin/pdftex
/usr/bin/pdftex: symbolic link to `pdfetex'
# file /usr/bin/pdfetex
/usr/bin/pdfetex: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), 
for GNU/Linux 2.4.1, dynamically linked (uses shared libs), for GNU/Linux 
2.4.1, stripped
# dpkg -S /usr/bin/pdftex
texlive-base-bin: /usr/bin/pdftex
# dpkg -S /usr/bin/pdfetex
texlive-base-bin: /usr/bin/pdfetex
# dpkg -s texlive-base-bin | grep Version
Version: 2005.dfsg.2-7
# dpkg -s context | grep Version
Version: 2007.01.02-2

Thanks,

--Mike Bird

From preining at logic.at  Fri Jan 12 17:24:31 2007
From: preining at logic.at (Norbert Preining)
Date: Fri, 12 Jan 2007 17:24:31 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <200701120807.09972.mgb-debian@yosemite.net>
References: <20070112120004.GB6816@gamma.logic.tuwien.ac.at>
	<200701120807.09972.mgb-debian@yosemite.net>
Message-ID: <20070112162431.GA32603@gamma.logic.tuwien.ac.at>

Hi all!

On Fre, 12 Jan 2007, Mike Bird wrote:
> > I have uploaded new Debian packages for context/context-nonfree to
> > tug.org and Debian.
> 
> 1)  I only see 2007.01.02-1 and 2007.01.02-2 when I browse
>     http://www.tug.org/texlive/Debian/context/

Sorry, I forgot the rsync. Now the stuff is there. If you have the lines
in sources.list the next update will bring it.

> > These packages provide a workaround for using new context with texlive
> > in Debian, ie pdftex < 1.40 by creating a symlink
> > 	/var/lib/texmf/web2c/pdftex -> /var/lib/texmf/web2c/pdfetex
> 
> 2) FWIW, I've been using the context-2007.01.02-2 without that link.
>    I wonder is it necessary?

No, it is NOT necessary for 2007.01.02 as those still use pdfetex as the
place where texexec puts the formats. This change was introduced between
02 and 10.


Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
PITLOCHRY (n.)
The background gurgling noise heard in Wimby Bars caused by people
trying to get the last bubbles out of their milkshakes by slurping
loudly through their straws.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Sat Jan 13 01:34:19 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 13 Jan 2007 01:34:19 +0100
Subject: [dev-context] [NTG-context] ConTeXt 2007.01.12 problem
In-Reply-To: <20070113000507.GD7839@gamma.logic.tuwien.ac.at>
References: <7477E19D-2B4B-4F4D-BF9B-02D58FE862B3@princeton.edu>	<200701121147.30083.mgb-debian@yosemite.net>	<45A7E764.4040809@elvenkind.com>	<200701121221.51166.mgb-debian@yosemite.net>
	<20070113000507.GD7839@gamma.logic.tuwien.ac.at>
Message-ID: <45A8290B.50505@elvenkind.com>

Norbert Preining wrote:
> 
> Guys, if you manage to get a fixed upstream by tomorrow 7:20am I can do
> an upload ...., otherwise you have to wait till monday morning, because
> I am leaving for ice climbing.

Yes, I just saw that extra line in spec-mis.tex. Updated TL, but only
the files in tex/context/base and tex/context/interface. I also saw a
small change in tex.rb, but I do not know it if it is important. Hans?


Taco





From taco at elvenkind.com  Sat Jan 13 15:34:53 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 13 Jan 2007 15:34:53 +0100
Subject: [dev-context] [NTG-context] ConTeXt 2007.01.12 problem
In-Reply-To: <E1H5jax-0004dA-00@skye.ra.phy.cam.ac.uk>
References: <E1H5jax-0004dA-00@skye.ra.phy.cam.ac.uk>
Message-ID: <45A8EE0D.9000303@elvenkind.com>

Sanjoy Mahajan wrote:
>>that test should go into the test repos 
> 
> 
> I've committed it to the contexttest repo as
> tex/context/base/supp-mis.tex/test-001.tex
> 
> By the way, in dvi mode the file fails unless "mpprocset:=0;" is put in the
> \startMPpositiongraphic.  Here's the error msg:
> 
>   $ texexec --dvi --nonstopmode tex/context/base/supp-mis.tex/test-001.tex
>   // on "TeX run 2"
>   ...
>   [MP as EPS ./to-dvi-mpgraph.4000] [MP color conversion ./to-dvi-mpgraph.4000
>   ! Argument of \dodohandleMPcolor has an extra }.
>   <inserted text> 
> 		  \par 
>   <to be read again> 
> 		     }
>   \includeMPasEPS ...\the \!!heightb }\doinsertfile 
> 						    }\wd \scratchbox \!!widt..
> 
> Taco had diagnosed this as due to ConTeXt not handling the new mpost
> procsets (hence the mpprocset := 0;).  Not sure why that lack doesn't
> hurt the run in pdf mode, but perhaps Taco or Hans understand the
> reson.  The test file that I committed does not have the mpprocset:=0,
> so it can be used to test for mpprocset handling in dvi mode.

It is a different set of macros. The macros that are used in dvi
mode do not convert to pdf, but only convert colorspaces to other 
colorspaces.

I know what is causing it, just not how to fix.

Best, Taco

From contexttest-bugs at foundry.supelec.fr  Mon Jan 15 09:59:45 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Mon, 15 Jan 2007 09:59:45 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B65=5D_=5Cstartta?=
	=?utf-8?q?bles_and_=5CAR?=
Message-ID: <200701150859.l0F8xjh3004569@semantic.metz.supelec.fr>

Bugs item #65, was opened at 2007-01-15 09:59
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=65&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: \starttables and \AR 
Resolution: None
Version: None
Category: macros


Initial Comment:
Hello,
with this test file:

\starttext
\starttables[|l|]
  \NC bla \NC\AR
\stoptables
\stoptext

I get an error:

ERROR: Misplaced \noalign.

Peter


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=65&group_id=21


From contexttest-bugs at foundry.supelec.fr  Mon Jan 15 10:15:32 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Mon, 15 Jan 2007 10:15:32 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B66=5D_problem_wi?=
	=?utf-8?q?th_=5Cstarttablehead?=
Message-ID: <200701150915.l0F9FWeI005289@semantic.metz.supelec.fr>

Bugs item #66, was opened at 2007-01-15 10:15
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=66&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: problem with \starttablehead 
Resolution: None
Version: None
Category: macros


Initial Comment:
Hello,

shouldn't there be a line on the top of each page?

\starttext
\starttablehead
\HL
\stoptablehead
\starttables[|l|]
\NC test \NC\FR
\dorecurse{100}{\NC test \NC\MR}
\NC test \NC\LR
\stoptables
\stoptext

Peter


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=66&group_id=21


From contexttest-bugs at foundry.supelec.fr  Tue Jan 16 13:58:42 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Tue, 16 Jan 2007 12:58:42 GMT
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B67=5D_Columns_pa?=
	=?utf-8?q?ge_break_bug?=
Message-ID: <200701161258.l0GCwgKd000510@semantic.metz.supelec.fr>

Bugs item #67, was opened at 2007-01-16 12:58
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=67&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Michal Kvasnicka (qasar)
Assigned to: Nobody (None)
Summary: Columns page break bug 
Resolution: None
Version: None
Category: macros


Initial Comment:
The \stopcolumns breaks the page even when it is only half-full. See

\setupoutput[pdf]
\setuppapersize[A5][A5]

\starttext

\startcolumns
  \dorecurse{4}{\input tufte\par}
\stopcolumns
a

\startcolumns
  \dorecurse{5}{\input tufte\par}
\stopcolumns

\stoptext

In my case there is a big hole on the page 2 (after the first
\stopcolumns). Even the letter "a" goes to the next page, page 3.

This happens with the newest ConTeXts (and some older ones as well) with the perl TeXExec.

Michal Kvasnicka

----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=67&group_id=21


From pragma at wxs.nl  Tue Jan 16 18:55:59 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 16 Jan 2007 18:55:59 +0100
Subject: [dev-context] lm
Message-ID: <45AD11AF.3060807@wxs.nl>

There is a new release of lm

....

we have prepared new releases of LMs and TGs. At the moment we put
them in non-public directories:
   http://bop.eps.gda.pl/0lm101-wrk/
and
   http://bop.eps.gda.pl/0tg-wrk/
for a "quarantine". We hope that only tiny details may need
correcting, but...

can someone more familiar with math (guess who) take a look at it and see if we can switch from cm math to lm math? 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From taco at elvenkind.com  Wed Jan 17 14:26:48 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 17 Jan 2007 14:26:48 +0100
Subject: [dev-context] lm
In-Reply-To: <45AD11AF.3060807@wxs.nl>
References: <45AD11AF.3060807@wxs.nl>
Message-ID: <45AE2418.2090507@elvenkind.com>



Hans Hagen wrote:
> There is a new release of lm
> 
> ....
> 
> we have prepared new releases of LMs and TGs. At the moment we put
> them in non-public directories:
>    http://bop.eps.gda.pl/0lm101-wrk/
> and
>    http://bop.eps.gda.pl/0tg-wrk/
> for a "quarantine". We hope that only tiny details may need
> correcting, but...
> 
> can someone more familiar with math (guess who) take a look at it and see if we can switch from cm math to lm math? 

I've been comparing a few of the tfm files with their
CM counterparts, because that is something I am used to
doing.

 From the computer modern set:

lmex10.tfm  % identical
lmmi5.tfm   % identical
lmmi6.tfm   % identical
lmmi7.tfm   % identical
lmmi8.tfm   % identical
lmmi9.tfm   % identical
lmmi10.tfm  % identical
lmmi12.tfm  % identical
lmmib10.tfm % identical
lmsy5.tfm   % extra chars: 254,255 (octal)
lmsy6.tfm   % extra chars: 254,255 (octal)
lmsy7.tfm   % extra chars: 254,255 (octal)
lmsy8.tfm   % extra chars: 254,255 (octal)
lmsy9.tfm   % extra chars: 254,255 (octal)
lmsy10.tfm  % extra chars: 254,255 (octal)
lmbsy10.tfm % extra chars: 254,255 (octal)

 From the 'AMS' set:

lmmib5.tfm  % identical
lmmib7.tfm  % identical
lmbsy5.tfm  % extra chars: 254,255 (octal)
lmbsy7.tfm  % extra chars: 254,255 (octal)

The two extra characters are:

   /lessorequalslant
   /greaterorequalslant


There are no lmbsy9,8 etc., so changing the mappings in
type-enc has to be done with a bit of care, but besides
that I see no problem in the metrics.

Best, Taco


From contexttest-bugs at foundry.supelec.fr  Thu Jan 18 13:01:52 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Thu, 18 Jan 2007 13:01:52 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B52=5D_original-a?=
	=?utf-8?q?dobe-euro=2Emap_for_dvips?=
Message-ID: <200701181201.l0IC1qmp001975@semantic.metz.supelec.fr>

Bugs item #52, was opened at 2007-01-04 12:07
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=52&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

>Status: Closed
Priority: 3
Submitted By: Peter M?nster (peter)
>Assigned to: Hans Hagen (hagen)
Summary: original-adobe-euro.map for dvips 
>Resolution: Accepted
Version: None
Category: None


Initial Comment:
When creating dvi and ps output with following input:
\usesymbols[eur]
\starttext
\texteuro
\stoptext
no euro-symbol shows up.
dvips does not understand the map file.
Peter


----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2007-01-18 13:01

Message:
this fix is included in context 2007.01.09

----------------------------------------------------------------------

Comment By: Peter M?nster (peter)
Date: 2007-01-08 13:37

Message:
Yes, Taco. This helps.
Thanks, Peter


----------------------------------------------------------------------

Comment By: Taco Hoekwater (taco)
Date: 2007-01-05 17:36

Message:
The output from the texexec --dvi case looks good at first glance.
I do not have the font installed myself, but you could try adding
the PostScript font names in that map file (this will not harm pdftex):

euromo   EuroMono-Regular      <euromo.pfb
euromob  EuroMono-Bold         <euromob.pfb
euromoi  EuroMono-Italic       <euromoi.pfb
euromobi EuroMono-BoldItalic   <euromobi.pfb
eurosa   EuroSans-Regular      <eurosa.pfb
eurosab  EuroSans-Bold         <eurosab.pfb
eurosai  EuroSans-Italic       <eurosai.pfb
eurosabi EuroSans-BoldItalic   <eurosebi.pfb
eurose   EuroSerif-Regular     <eurose.pfb
euroseb  EuroSerif-Bold        <euroseb.pfb
eurosei  EuroSerif-Italic      <eurosei.pfb
eurosebi EuroSerif-BoldItalic  <eurosebi.pfb


----------------------------------------------------------------------

Comment By: Peter M?nster (peter)
Date: 2007-01-05 17:26

Message:
When using texexec --dvi, the file in pdftex is read
and dvips outputs this:
This is dvips(k) 5.96 Copyright 2005 Radical Eye Software (www.radicaleye.com)
' TeX output 2007.01.05:1712' -> test.ps
<tex.pro><lm-ec.enc><texps.pro>. <eurose.pfb><lmr12.pfb>[1] 

From contexttest-bugs at foundry.supelec.fr  Thu Jan 18 13:02:48 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Thu, 18 Jan 2007 13:02:48 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B62=5D_texexec_ex?=
	=?utf-8?q?it_code?=
Message-ID: <200701181202.l0IC2mYC001982@semantic.metz.supelec.fr>

Bugs item #62, was opened at 2007-01-07 10:56
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=62&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

>Status: Closed
Priority: 3
Submitted By: Taco Hoekwater (taco)
>Assigned to: Hans Hagen (hagen)
Summary: texexec exit code 
Resolution: Accepted
Version: None
Category: scripts


Initial Comment:
Hi all!

(Gerben, you are on the To since you were interested in the ctxfmtutil,
but it is bugged ..., see below)

texexec does not return a useful return code:
# texexec --nonstopmode --fast --make --aleph cont-en
...
loading         : Context Font Macros / UNICODE Support
! Aleph capacity exceeded, sorry [number of strings=33165].
\setvalue ...xpandafter \def \csname #1\endcsname 
                                                  
l.275 \defineucharmapping{\s!default}
                                     #1#2%
No pages of output.
Transcript written on cont-en.log.
TeXExec | 
TeXExec | tex engine path: /etc/texmf/web2c/aleph
TeXExec | 
TeXExec | 
TeXExec | runtime: 3.104333
# echo $?
0
#

This is bad, very bad.... something we can do about it?


And, since I am at it: It does not honor the --nonstopmode:
# texexec --nonstopmode --fast --make --xetex cont-en
...
loading         : Context Encoding Macros (pdf)
! Undefined control sequence.
l.63 \ifcase\pdfgentounicode
                             \else \expandafter \endinput \fi
?

and waiting there.

Is there a way to fix these two problems, please???

For Gerben: ctxfmtutil has two problems:
- it does not detect if a build was broken due to the first bug
- it hangs sometimes due to the second bug

Best wishes

Norbert



----------------------------------------------------------------------

>Comment By: Taco Hoekwater (taco)
Date: 2007-01-18 13:02

Message:
texexec exit codes were added in 2007.01.12

----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=62&group_id=21


From adityam at umich.edu  Thu Jan 18 20:28:16 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Thu, 18 Jan 2007 14:28:16 -0500 (EST)
Subject: [dev-context] lm
In-Reply-To: <45AD11AF.3060807@wxs.nl>
References: <45AD11AF.3060807@wxs.nl>
Message-ID: <alpine.WNT.0.81.0701181418350.2928@nqvgln>

On Tue, 16 Jan 2007, Hans Hagen wrote:

> There is a new release of lm
> 
> ....
> 
> we have prepared new releases of LMs and TGs. At the moment we put
> them in non-public directories:
>    http://bop.eps.gda.pl/0lm101-wrk/
> and
>    http://bop.eps.gda.pl/0tg-wrk/
> for a "quarantine". We hope that only tiny details may need
> correcting, but...
> 
> can someone more familiar with math (guess who) take a look at it and see if we can switch from cm math to lm math?

I tested the new context distribution with lm math (stand alone 
distribution of 01-12 with an updated texmf-local directory) and lm 
math works fine in my simple documents.

The tex-gyre fonts are not included with context right now. Will the 
stable fonts become part of ConTeXt stand-alone distribution (Bomun, 
pagella and termes, right now) or will you wait until all the fonts 
are released and stable before making them distributing them with 
ConTeXt.

The reason I am asking is to get an idea of where I should be storing 
these fonts in my texmf tree: either texmf-fonts which I delete 
during a "full" upgrade, or texmf-aditya which is untouched by context 
upgrades.

Aditya


From contexttest-bugs at foundry.supelec.fr  Fri Jan 19 05:22:59 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Thu, 18 Jan 2007 23:22:59 -0500
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B68=5D_section_se?=
	=?utf-8?q?parators_do_not_work_for_references?=
Message-ID: <200701190422.l0J4Mx1D030730@semantic.metz.supelec.fr>

Bugs item #68, was opened at 2007-01-18 23:22
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=68&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Aditya Mahajan (adityam)
Assigned to: Nobody (None)
Summary: section separators do not work for references 
Resolution: None
Version: None
Category: macros


Initial Comment:
Hi,

The support for section separators is still partial. It is not possible to change the separators for references. For example,


\setuphead[section]   [separator=\separatorlist{?,!,*}]
\setuphead[subsection][separator=\separatorlist{??,!!,**}]

\starttext

\chapter{test}
\section{test} \subsection[sub]{test} \subsection{test}

References \in Section[sub] still gives 1.1.1 instead of 1??1!!1.

\stoptext


Aditya

----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=68&group_id=21


From pragma at wxs.nl  Fri Jan 19 09:38:37 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 19 Jan 2007 09:38:37 +0100
Subject: [dev-context] lm
In-Reply-To: <alpine.WNT.0.81.0701181418350.2928@nqvgln>
References: <45AD11AF.3060807@wxs.nl>
	<alpine.WNT.0.81.0701181418350.2928@nqvgln>
Message-ID: <45B0838D.5000905@wxs.nl>

Aditya Mahajan wrote:
> On Tue, 16 Jan 2007, Hans Hagen wrote:
>
>> There is a new release of lm
>>
>> ....
>>
>> we have prepared new releases of LMs and TGs. At the moment we put
>> them in non-public directories:
>>    http://bop.eps.gda.pl/0lm101-wrk/
>> and
>>    http://bop.eps.gda.pl/0tg-wrk/
>> for a "quarantine". We hope that only tiny details may need
>> correcting, but...
>>
>> can someone more familiar with math (guess who) take a look at it and 
>> see if we can switch from cm math to lm math?
>
> I tested the new context distribution with lm math (stand alone 
> distribution of 01-12 with an updated texmf-local directory) and lm 
> math works fine in my simple documents.
>
> The tex-gyre fonts are not included with context right now. Will the 
> stable fonts become part of ConTeXt stand-alone distribution (Bomun, 
> pagella and termes, right now) or will you wait until all the fonts 
> are released and stable before making them distributing them with 
> ConTeXt.
they should end up in the minimals (replacing the older stuff) but i'd 
rather wait till we 've version 1 for them
>
> The reason I am asking is to get an idea of where I should be storing 
> these fonts in my texmf tree: either texmf-fonts which I delete during 
> a "full" upgrade, or texmf-aditya which is untouched by context upgrades.
i just put them in the main tree

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From mojca.miklavec.lists at gmail.com  Sat Jan 20 03:53:00 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 20 Jan 2007 03:53:00 +0100
Subject: [dev-context] format creation in xetex fails (2007.01.18 12:57)
Message-ID: <6faad9f00701191853p14ae6a98xaf0aadfce19bfb66@mail.gmail.com>

Hello Hans,

\setcclcuc in syst-xtx.tex should be now set to \setcclcucx (whatever
that strange fix does ;)

 Undefined control sequence.
l.25 \setcclcuc
                201C 201C 201C
?

Mojca

From mojca.miklavec.lists at gmail.com  Sat Jan 20 17:49:24 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 20 Jan 2007 17:49:24 +0100
Subject: [dev-context] TeXLive 2006
In-Reply-To: <4580FC8E.6020500@elvenkind.com>
References: <457BCA43.1000307@elvenkind.com> <457D2F5A.60305@wxs.nl>
	<6faad9f00612131601m6dbd99a0icfd7acb65401e789@mail.gmail.com>
	<4580FC8E.6020500@elvenkind.com>
Message-ID: <6faad9f00701200849w2d319fb1wa3b76b26abf3bfc3@mail.gmail.com>

On 12/14/06, Taco Hoekwater wrote:
> Mojca Miklavec wrote:
> > Are formats also part of TeXLive?
>
> In general: yes.
>
> > If so, will formats for XeTeX also be available
>
> Probably not. There can be only one format with a given name within
> TeXLive (fmtutil), and that will almost certainly be used for pdftex.

After I finally managed to download & test a bit, I'm really glad to
tell you that you were wrong this time ;)

Formats are now properly placed under xetex and pdftex subfolders (and
generated when one first compiles a document), so ConTeXt works with
both engines without any problems in the latest TeX Live ;)

    Mojca

(Could ConTeXt be built with slightly more hyphenation patterns in
TeXLive perhaps? Well, I bear a specific one in my head at the moment
... I don't know how it is with other languages.)

From taco at elvenkind.com  Sat Jan 20 18:54:07 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 20 Jan 2007 18:54:07 +0100
Subject: [dev-context] TeXLive 2006
In-Reply-To: <6faad9f00701200849w2d319fb1wa3b76b26abf3bfc3@mail.gmail.com>
References: <457BCA43.1000307@elvenkind.com> <457D2F5A.60305@wxs.nl>	
	<6faad9f00612131601m6dbd99a0icfd7acb65401e789@mail.gmail.com>	
	<4580FC8E.6020500@elvenkind.com>
	<6faad9f00701200849w2d319fb1wa3b76b26abf3bfc3@mail.gmail.com>
Message-ID: <45B2573F.1020109@elvenkind.com>

Mojca Miklavec wrote:
> 
> (Could ConTeXt be built with slightly more hyphenation patterns in
> TeXLive perhaps? Well, I bear a specific one in my head at the moment
> ... I don't know how it is with other languages.)

I've lost track on what that did with fmtutil. Texexec's --all
switch simply adds \preloadallpatterns to the option file, so
if they use something like cont-en.ini, that TeX macro should
simply be added to the file, and all would be well.

Best, Taco

From contexttest-bugs at foundry.supelec.fr  Sun Jan 21 03:05:38 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Sun, 21 Jan 2007 03:05:38 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B69=5D_m-database?=
	=?utf-8?q?=3A_bug_in_utf-8?=
Message-ID: <200701210205.l0L25chl026768@semantic.metz.supelec.fr>

Bugs item #69, was opened at 2007-01-21 03:05
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=69&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Mojca Miklavec (mojca)
Assigned to: Nobody (None)
Summary: m-database: bug in utf-8 
Resolution: None
Version: None
Category: macros


Initial Comment:

If the first character in a cell is something non-ascii, then the database module fails to work.

Minimal example:

\enableregime[utf-8]
\usemodule[database]
\starttext
\defineseparatedlist[CSV]
  [separator=comma,
   before=\bTABLE,after=\eTABLE,
   first=\bTR,last=\eTR,
   left=\bTD,right=\eTD]
\startseparatedlist[CSV]
?,?,?
\stopseparatedlist
\stoptext


Error:

! Argument of \utftwouniglph has an extra }.
<inserted text> 
                \par 
<to be read again> 
                   }
\dodoprocessseplist #1#2,->\edef \!!stringa {#1}
                                                \ifx \edef at relax \!!stringa ...
<argument> ?,
              ?,?
\doprocessseplist ...elax ->\dodoprocessseplist #1
                                                  ,\relax ,\relax \relax \end 
\redoprocessseparatedline ...cessseplist #1\relax 
                                                  \else \convertargument #1\...
l.11 ?,?,?


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=69&group_id=21


From mgb-debian at yosemite.net  Sun Jan 21 06:51:58 2007
From: mgb-debian at yosemite.net (Mike Bird)
Date: Sat, 20 Jan 2007 21:51:58 -0800
Subject: [dev-context] Fix for Footnote Reference problem
Message-ID: <200701202152.00333.mgb-debian@yosemite.net>

Here are a number of repaired functions (and one repaired variable)
which together fix the problem of footnote references getting out
of step between phases resulting in bogus results from \somewhere.

The repairs were made in ConTeXt 2007-01-12.  Each repaired function
is preceded by a comment explaining the reason for the repair.

The repaired functions are followed by a test which generates three
pages of output covering many test cases.

Additionally, I have tested these repairs on a 50 page document with
185 footnotes.  All of the \somewhere's were fixed by these repairs.

The only downside that I have noticed is that two column footnotes
are now less well balanced.  If anyone has any thoughts as to why
this might be happening or how to fix it please let me know.  I'm
just a few days from deadline!

Thanks,

--Mike Bird
-------------- next part --------------
A non-text attachment was scrubbed...
Name: somewhere.tex
Type: text/x-tex
Size: 5437 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070121/f2900496/attachment.bin 

From taco at elvenkind.com  Sun Jan 21 10:53:08 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 21 Jan 2007 10:53:08 +0100
Subject: [dev-context] Fix for Footnote Reference problem
In-Reply-To: <200701202152.00333.mgb-debian@yosemite.net>
References: <200701202152.00333.mgb-debian@yosemite.net>
Message-ID: <45B33804.1050305@elvenkind.com>


Hi Mike,


Mike Bird wrote:
> Here are a number of repaired functions (and one repaired variable)
> which together fix the problem of footnote references getting out
> of step between phases resulting in bogus results from \somewhere.

Do you happen to have these changes as a diff file or a patched
core-not.tex, by any chance? I want to compare stuff, and either
of those formats would be a bit easier on me.

Best wishes, Taco

From preining at logic.at  Sun Jan 21 16:22:51 2007
From: preining at logic.at (Norbert Preining)
Date: Sun, 21 Jan 2007 16:22:51 +0100
Subject: [dev-context] TeXLive 2006
In-Reply-To: <6faad9f00701200849w2d319fb1wa3b76b26abf3bfc3@mail.gmail.com>
References: <457BCA43.1000307@elvenkind.com> <457D2F5A.60305@wxs.nl>
	<6faad9f00612131601m6dbd99a0icfd7acb65401e789@mail.gmail.com>
	<4580FC8E.6020500@elvenkind.com>
	<6faad9f00701200849w2d319fb1wa3b76b26abf3bfc3@mail.gmail.com>
Message-ID: <20070121152251.GA16950@gamma.logic.tuwien.ac.at>

On Sam, 20 Jan 2007, Mojca Miklavec wrote:
> Formats are now properly placed under xetex and pdftex subfolders (and
> generated when one first compiles a document), so ConTeXt works with
> both engines without any problems in the latest TeX Live ;)

Yup, fmtutil has been patched to put all (!) formats into web2c/engine.
Current fmtutil.cnf should also contain cont-en format for xetex and
pdftex engines.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
QUENBY (n.)
A stubborn spot on a window which you spend twenty minutes trying to
clean off before discovering it's on the other side of the glass.
			--- Douglas Adams, The Meaning of Liff

From mgb-debian at yosemite.net  Sun Jan 21 20:08:11 2007
From: mgb-debian at yosemite.net (Mike Bird)
Date: Sun, 21 Jan 2007 11:08:11 -0800
Subject: [dev-context] Fix for Footnote Reference problem
In-Reply-To: <200701202152.00333.mgb-debian@yosemite.net>
References: <200701202152.00333.mgb-debian@yosemite.net>
Message-ID: <200701211108.12807.mgb-debian@yosemite.net>

Hi Taco,

On Saturday 20 January 2007 21:51, Mike Bird wrote:
> The only downside that I have noticed is that two column footnotes
> are now less well balanced.

This was caused by a typo.  I had accidently removed the newline
after '% experiment' which had the effect or disabling the
'\penalty\notepenalty' on the next line.

On Sunday 21 January 2007 01:53, Taco Hoekwater wrote:
> Do you happen to have these changes as a diff file or a patched
> core-not.tex, by any chance? I want to compare stuff, and either
> of those formats would be a bit easier on me.

Attached now is a diff against the original ConTeXt 2007-01-12
and with the afore-mentioned typo corrected.

--Mike Bird
-------------- next part --------------
A non-text attachment was scrubbed...
Name: footref.patch
Type: text/x-diff
Size: 2395 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070121/8e13abbe/attachment.bin 

From sanjoy at mrao.cam.ac.uk  Sun Jan 21 22:28:33 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Sun, 21 Jan 2007 16:28:33 -0500
Subject: [dev-context] incorrect internal mptopdf conversion
Message-ID: <E1H8kEr-0003ti-AB@approximate.corpus.cam.ac.uk>

Here's a problem that I just noticed in the internal mptopdf conversion
macros.  The fig.1 figure looks fine as a mps (eps) file, and 'mptopdf
fig.1' converts it fine.  However, including it in a document as fig.1
(hence via the internal mps to pdf conversion) adds strange thick lines
to it.  Here is the .mp file, and I've attached a complete .zip archive
with a .tex file and Makefile to generate the comparison.

=========================== fig.mp =================================
% equilateral triangles cut in half

% cutter is the path that cuts the triangle in half
def half_triangle(text cutter) =
  path tri, enclosed;
  z0 = (2cm,0);
  z1 = z0 rotated 60;
  tri := origin--z0--z1--origin;
  enclosed := (cutter)--z1--point 0 of (cutter)--cycle;
  fill enclosed withcolor 0.65white;
  draw tri;
  dotlabel (btex etex, point 0 of (cutter));
  dotlabel (btex etex, point 4000 of (cutter));
  draw cutter;
enddef;

% replicate the triangle and path to make hexagon
def replicate_six_times =
  % move triangle so that is at the origin, then shrink it 
  currentpicture := currentpicture shifted (-z1) scaled 0.7;
  for i = 1 upto 6:
    draw currentpicture rotated (60*i);
  endfor
enddef;

% replicate the triangle bisected by line straight across
beginfig(1)
  half_triangle(point (2+sqrt(0.5)) of tri--point (2-sqrt(0.5)) of tri);
  replicate_six_times;
endfig;

end
===================================================================

Program versions:

pdfTeX, Version 3.141592-1.40.0 (Web2C 7.5.6)
ConTeXt  ver: 2007.01.12 15:56 MKII  fmt: 2007.1.13  int: english/english
MPtoPDF 1.3.2
MetaPost 0.993

-Sanjoy

`A nation of slaves is always prepared to applaud the clemency of their
 master who, in the abuse of absolute power, does not proceed to the
 last extremes of injustice and oppression.'  (Gibbon)  

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/x-zip
Size: 61381 bytes
Desc: example files
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070121/04e98f74/attachment-0001.bin 

From pragma at wxs.nl  Sun Jan 21 23:35:10 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 21 Jan 2007 23:35:10 +0100
Subject: [dev-context] TeXLive 2006
In-Reply-To: <6faad9f00701200849w2d319fb1wa3b76b26abf3bfc3@mail.gmail.com>
References: <457BCA43.1000307@elvenkind.com> <457D2F5A.60305@wxs.nl>
	<6faad9f00612131601m6dbd99a0icfd7acb65401e789@mail.gmail.com>
	<4580FC8E.6020500@elvenkind.com>
	<6faad9f00701200849w2d319fb1wa3b76b26abf3bfc3@mail.gmail.com>
Message-ID: <45B3EA9E.7080409@wxs.nl>

Mojca Miklavec wrote:
> On 12/14/06, Taco Hoekwater wrote:
>   
>> Mojca Miklavec wrote:
>>     
>>> Are formats also part of TeXLive?
>>>       
>> In general: yes.
>>
>>     
>>> If so, will formats for XeTeX also be available
>>>       
>> Probably not. There can be only one format with a given name within
>> TeXLive (fmtutil), and that will almost certainly be used for pdftex.
>>     
>
> After I finally managed to download & test a bit, I'm really glad to
> tell you that you were wrong this time ;)
>   
well, akira already implemented the engine subpath support quite a while 
ago; dunno about miktex
> Formats are now properly placed under xetex and pdftex subfolders (and
> generated when one first compiles a document), so ConTeXt works with
> both engines without any problems in the latest TeX Live ;)
>
>     Mojca
>
> (Could ConTeXt be built with slightly more hyphenation patterns in
> TeXLive perhaps? Well, I bear a specific one in my head at the moment
> .... I don't know how it is with other languages.)
>   

--all

soon we will move to runtime loading and then i will change the defaults 
indeed to loading all

Hans

-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From mojca.miklavec.lists at gmail.com  Sun Jan 21 23:52:04 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sun, 21 Jan 2007 23:52:04 +0100
Subject: [dev-context] TeXLive 2006
In-Reply-To: <45B3EA9E.7080409@wxs.nl>
References: <457BCA43.1000307@elvenkind.com> <457D2F5A.60305@wxs.nl>
	<6faad9f00612131601m6dbd99a0icfd7acb65401e789@mail.gmail.com>
	<4580FC8E.6020500@elvenkind.com>
	<6faad9f00701200849w2d319fb1wa3b76b26abf3bfc3@mail.gmail.com>
	<45B3EA9E.7080409@wxs.nl>
Message-ID: <6faad9f00701211452q48d7192fm4fe0c74d6fa1750d@mail.gmail.com>

On 1/21/07, Hans Hagen wrote:
> Mojca Miklavec wrote:
> > On 12/14/06, Taco Hoekwater wrote:
> >
> >> Mojca Miklavec wrote:
> >>
> >>> Are formats also part of TeXLive?
> >>>
> >> In general: yes.
> >>
> >>
> >>> If so, will formats for XeTeX also be available
> >>>
> >> Probably not. There can be only one format with a given name within
> >> TeXLive (fmtutil), and that will almost certainly be used for pdftex.
> >>
> >
> > After I finally managed to download & test a bit, I'm really glad to
> > tell you that you were wrong this time ;)
> >
> well, akira already implemented the engine subpath support quite a while
> ago; dunno about miktex

XeTeX will be integrated in 2.7, so it's not an issue yet.

> > (Could ConTeXt be built with slightly more hyphenation patterns in
> > TeXLive perhaps? Well, I bear a specific one in my head at the moment
> > .... I don't know how it is with other languages.)
>
> --all

But if formats are created automatically, it's impossible to pass
options (unless one creates formats manually, of course, but even then
it's a bit confusing - I never know to which location the formats are
going to be placed - it's different each time when I try to generate
them ;).

Mojca

From taco at elvenkind.com  Mon Jan 22 08:53:54 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 22 Jan 2007 08:53:54 +0100
Subject: [dev-context] TeXLive 2006
In-Reply-To: <6faad9f00701211452q48d7192fm4fe0c74d6fa1750d@mail.gmail.com>
References: <457BCA43.1000307@elvenkind.com>
	<457D2F5A.60305@wxs.nl>	<6faad9f00612131601m6dbd99a0icfd7acb65401e789@mail.gmail.com>	<4580FC8E.6020500@elvenkind.com>	<6faad9f00701200849w2d319fb1wa3b76b26abf3bfc3@mail.gmail.com>	<45B3EA9E.7080409@wxs.nl>
	<6faad9f00701211452q48d7192fm4fe0c74d6fa1750d@mail.gmail.com>
Message-ID: <45B46D92.9040004@elvenkind.com>

Mojca Miklavec wrote:
>>>(Could ConTeXt be built with slightly more hyphenation patterns in
>>>TeXLive perhaps? Well, I bear a specific one in my head at the moment
>>>.... I don't know how it is with other languages.)
>>
>>--all
> 
> 
> But if formats are created automatically, it's impossible to pass

Please check which cont-en.ini is being used in texlive. I can
add \preloadallpatterns to it, but for that I need to know which
file it actually uses.

Taco

From taco at elvenkind.com  Mon Jan 22 09:00:02 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 22 Jan 2007 09:00:02 +0100
Subject: [dev-context] incorrect internal mptopdf conversion
In-Reply-To: <E1H8kEr-0003ti-AB@approximate.corpus.cam.ac.uk>
References: <E1H8kEr-0003ti-AB@approximate.corpus.cam.ac.uk>
Message-ID: <45B46F02.5030706@elvenkind.com>

Sanjoy Mahajan wrote:
> Here's a problem that I just noticed in the internal mptopdf conversion
> macros.  The fig.1 figure looks fine as a mps (eps) file, and 'mptopdf
> fig.1' converts it fine.  However, including it in a document as fig.1
> (hence via the internal mps to pdf conversion) adds strange thick lines
> to it.  Here is the .mp file, and I've attached a complete .zip archive
> with a .tex file and Makefile to generate the comparison.

Same problem here, using 2007.01.18.

Taco


From pragma at wxs.nl  Mon Jan 22 12:20:49 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 22 Jan 2007 12:20:49 +0100
Subject: [dev-context] incorrect internal mptopdf conversion
In-Reply-To: <E1H8kEr-0003ti-AB@approximate.corpus.cam.ac.uk>
References: <E1H8kEr-0003ti-AB@approximate.corpus.cam.ac.uk>
Message-ID: <45B49E11.4000203@wxs.nl>

Sanjoy Mahajan wrote:
> Here's a problem that I just noticed in the internal mptopdf conversion
> macros.  The fig.1 figure looks fine as a mps (eps) file, and 'mptopdf
> fig.1' converts it fine.  However, including it in a document as fig.1
> (hence via the internal mps to pdf conversion) adds strange thick lines
> to it.  Here is the .mp file, and I've attached a complete .zip archive
> with a .tex file and Makefile to generate the comparison.
>
>   
ok, i fixed it; was a bug in the rline to handler in concat mode in the mkii backend file (mkii and mkiv mp2pdf backends are no longer in sync with mptopdf and somewhat optimized because we no longer need to be generic) 

btw, the thick lines are actually drawdots 

btw, your graphic contains 90% junk ps (covered by successive draws), maybe some picture magic without picture resets 

Hans 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From sanjoy at mrao.cam.ac.uk  Mon Jan 22 13:35:55 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Mon, 22 Jan 2007 12:35:55 +0000
Subject: [dev-context] incorrect internal mptopdf conversion
In-Reply-To: Your message of "Mon, 22 Jan 2007 12:20:49 +0100."
	<45B49E11.4000203@wxs.nl> 
Message-ID: <E1H8yOx-0005IW-00@skye.ra.phy.cam.ac.uk>

> ok, i fixed it; was a bug in the rline to handler in concat mode 

Great, thanks for that.

> btw, your graphic contains 90% junk ps (covered by successive
> draws), maybe some picture magic without picture resets

Indeed, I was surprised by the length of the mps file.  Oh, it just
hit me the reason for all the junk ps.  It is my 'thinko', so thanks
for pointing me to the problem.

I meant to draw the rotated picture of one triangle six times.
Instead I rotated the currentpicture and drew it on the
currentpicture, so I ended up with 2^6 triangles -- with most of the
code overlapping.  It looked right so I didn't think about it enough.

What I had:

  currentpicture := currentpicture shifted (-z1) scaled 0.7;
  for i = 1 upto 6:
    % this line causes the doubling each time
    draw currentpicture rotated (60*i);
  endfor

Instead, what I should do to avoid the overlapping:

  currentpicture := currentpicture shifted (-z1) scaled 0.7;
  tpic := currentpicture
  for i = 1 upto 5:   % i=6 redraws the original one
    draw tpic rotated (60*i);
  endfor

For those curious about the math behind the picture: The picture
solves the problem of "how do you bisect an equilateral triangle [into
two equal areas] using the shortest path?"
<web.mit.edu/18.098/notes/picture-proofs.pdf> has the details in
section 4.5.

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From pragma at wxs.nl  Mon Jan 22 14:47:55 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 22 Jan 2007 14:47:55 +0100
Subject: [dev-context] incorrect internal mptopdf conversion
In-Reply-To: <E1H8yOx-0005IW-00@skye.ra.phy.cam.ac.uk>
References: <E1H8yOx-0005IW-00@skye.ra.phy.cam.ac.uk>
Message-ID: <45B4C08B.4030904@wxs.nl>

Sanjoy Mahajan wrote:
>> ok, i fixed it; was a bug in the rline to handler in concat mode 
>>     
>
> Great, thanks for that.
>
>   
>> btw, your graphic contains 90% junk ps (covered by successive
>> draws), maybe some picture magic without picture resets
>>     
>
> Indeed, I was surprised by the length of the mps file.  Oh, it just
> hit me the reason for all the junk ps.  It is my 'thinko', so thanks
> for pointing me to the problem.
>
> I meant to draw the rotated picture of one triangle six times.
> Instead I rotated the currentpicture and drew it on the
> currentpicture, so I ended up with 2^6 triangles -- with most of the
> code overlapping.  It looked right so I didn't think about it enough.
>
> What I had:
>
>   currentpicture := currentpicture shifted (-z1) scaled 0.7;
>   for i = 1 upto 6:
>     % this line causes the doubling each time
>     draw currentpicture rotated (60*i);
>   endfor
>
> Instead, what I should do to avoid the overlapping:
>
>   currentpicture := currentpicture shifted (-z1) scaled 0.7;
>   tpic := currentpicture
>   for i = 1 upto 5:   % i=6 redraws the original one
>     draw tpic rotated (60*i);
>   endfor
>
> For those curious about the math behind the picture: The picture
> solves the problem of "how do you bisect an equilateral triangle [into
> two equal areas] using the shortest path?"
> <web.mit.edu/18.098/notes/picture-proofs.pdf> has the details in
> section 4.5.
>   
or something 

picture p ; p := image(
	draw like usual 
) ; 

for ... draw p rotated ... .. 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From taco at elvenkind.com  Tue Jan 23 15:59:41 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 23 Jan 2007 15:59:41 +0100
Subject: [dev-context] incorrect internal mptopdf conversion
In-Reply-To: <45B49E11.4000203@wxs.nl>
References: <E1H8kEr-0003ti-AB@approximate.corpus.cam.ac.uk>
	<45B49E11.4000203@wxs.nl>
Message-ID: <45B622DD.3010506@elvenkind.com>



Hans Hagen wrote:
> Sanjoy Mahajan wrote:
>> Here's a problem that I just noticed in the internal mptopdf conversion
>> macros.  The fig.1 figure looks fine as a mps (eps) file, and 'mptopdf
>> fig.1' converts it fine.  However, including it in a document as fig.1
>> (hence via the internal mps to pdf conversion) adds strange thick lines
>> to it.  Here is the .mp file, and I've attached a complete .zip archive
>> with a .tex file and Makefile to generate the comparison.
>>
>>   
> ok, i fixed it; was a bug in the rline to handler in concat mode in the mkii 

This bug is fixed in today's release (uploaded already)

Taco

From preining at logic.at  Tue Jan 23 20:05:37 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 23 Jan 2007 20:05:37 +0100
Subject: [dev-context] New Debian packages
Message-ID: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>

Hi all! Hi Florent!

I have uploaded new context packages 2007.01.23-1 BUT ONLY TO THE
tug.org server!! Not to Debian till now.

Why? I am a bit nervous with respect to this change in 2007.01.18:
	Switch to latin modern math fonts. If this gives you trouble,
	you have to update your latin modern font package, see CTAN
Well. This is bad. Simply bad. Without backward compatibility I will not
upload this to Debian. I cannot, because Debian currently has the
lmodern fonts 1.foobar, but without the math fonts.

I don't know whether Florent is planning to do an upload of lmodern with
the new math fonts included (Florent?).

So to be more specific: Is this an *absolute* dependency, ie setting
math in context now *only* works with the lmodern math fonts installed?

If yes, then sorry for the Debian using guys, but you have to wait until
we have the new lmodern in Debian.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
BUDBY
A nipple clearly defined through flimsy or wet material.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Tue Jan 23 20:09:18 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 23 Jan 2007 20:09:18 +0100
Subject: [dev-context] about a change in the context packaging
Message-ID: <20070123190918.GC1958@gamma.logic.tuwien.ac.at>

Hi all!

Release notes from 2007.01.23:
Gnuplot module (m-gnuplot.tex) removed from the core distro. This file
is superceded by the third-party module

But it is not contained in cont-ext.zip. Is this intended?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
GUERNSEY (adj.)
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Tue Jan 23 21:52:12 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 23 Jan 2007 21:52:12 +0100
Subject: [dev-context] about a change in the context packaging
In-Reply-To: <20070123190918.GC1958@gamma.logic.tuwien.ac.at>
References: <20070123190918.GC1958@gamma.logic.tuwien.ac.at>
Message-ID: <45B6757C.8000807@elvenkind.com>

Norbert Preining wrote:
> Hi all!
> 
> Release notes from 2007.01.23:
> Gnuplot module (m-gnuplot.tex) removed from the core distro. This file
> is superceded by the third-party module
> 
> But it is not contained in cont-ext.zip. Is this intended?

This is already answered by Mojca.

Best, Taco

From taco at elvenkind.com  Tue Jan 23 22:01:37 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 23 Jan 2007 22:01:37 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
Message-ID: <45B677B1.7020103@elvenkind.com>

Norbert Preining wrote:
> Hi all! Hi Florent!
> 
> I have uploaded new context packages 2007.01.23-1 BUT ONLY TO THE
> tug.org server!! Not to Debian till now.

> I don't know whether Florent is planning to do an upload of lmodern with
> the new math fonts included (Florent?).
> 
> So to be more specific: Is this an *absolute* dependency, ie setting
> math in context now *only* works with the lmodern math fonts installed?

Yes, just like the change to pdftex 1.40 in 2007.01.12 was absolute.

This is at least in part why TL will run 2007.01.12, and I will no
update it any more, as well as why we have a fullblown repository
of old releases.

Context is very often at the very edge of developments. That is
one reason why we have ctxtools --update and ConTexT has its
own distribution and release system.

> If yes, then sorry for the Debian using guys, but you have to wait until
> we have the new lmodern in Debian.

The latin modern math fonts have been on ctan for some time now
(they were already in the previous release), but I doubt many
people have then installed just yet. The again, if ConTeXt didn't
require them, fewer people *would* install them. ;-)

Looks like the debian users will have to wait out for a bit.

Best, Taco




From preining at logic.at  Tue Jan 23 22:28:32 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 23 Jan 2007 22:28:32 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <45B677B1.7020103@elvenkind.com>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<45B677B1.7020103@elvenkind.com>
Message-ID: <20070123212832.GB12597@gamma.logic.tuwien.ac.at>

Hi Taco!

On Die, 23 Jan 2007, Taco Hoekwater wrote:
> Yes, just like the change to pdftex 1.40 in 2007.01.12 was absolute.

I don't agree. I could process several medium complicated test cases I
have collected over the time with pdfetex 1.30.5 from TL2005 (debian
packages) with my context packages for 2007.01.12.

The only point was that is was necessary to add the pdfetex -> pdftex
symlink, otherwise everything worked without problem.

So I *don't see that this was an *absolute* move.

> This is at least in part why TL will run 2007.01.12, and I will no
> update it any more, as well as why we have a fullblown repository
> of old releases.

But doesn't TL2007 *inlcude* the lm-math fonts???? Please reconsider
this!

> >If yes, then sorry for the Debian using guys, but you have to wait until
> >we have the new lmodern in Debian.
> 
> The latin modern math fonts have been on ctan for some time now
> (they were already in the previous release), but I doubt many
> people have then installed just yet. The again, if ConTeXt didn't
> require them, fewer people *would* install them. ;-)
> 
> Looks like the debian users will have to wait out for a bit.

We are discussing this with Florent ...

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
BOOTHBY GRAFFOE
1. The man in the pub who slaps people on the back as if they were old
   friends, when in fact he has no friends, largely on account of this
   habit. 2. Any story told by Robert Morley on chat shows.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Tue Jan 23 23:00:58 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 23 Jan 2007 23:00:58 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <20070123212832.GB12597@gamma.logic.tuwien.ac.at>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<45B677B1.7020103@elvenkind.com>
	<20070123212832.GB12597@gamma.logic.tuwien.ac.at>
Message-ID: <45B6859A.1020609@elvenkind.com>

Hi Norbert,

Norbert Preining wrote:
> Hi Taco!
> 
> On Die, 23 Jan 2007, Taco Hoekwater wrote:
> 
>>Yes, just like the change to pdftex 1.40 in 2007.01.12 was absolute.
> 
> I don't agree. I could process several medium complicated test cases I
> have collected over the time with pdfetex 1.30.5 from TL2005 (debian
> packages) with my context packages for 2007.01.12.
> 
> The only point was that is was necessary to add the pdfetex -> pdftex
> symlink, otherwise everything worked without problem.
> 
> So I *don't see that this was an *absolute* move.

Of course you could add a set of font synonyms to cont-usr.tex
or even create symlinks like from cmsy10.tfm to lmsy10.tfm. But
you know that no 'ordinary' user will know what to do, and such
hacks are probably a bad idea for such users anyway, because it
will come back to haunt them next year or the year after.

>>This is at least in part why TL will run 2007.01.12, and I will no
>>update it any more, as well as why we have a fullblown repository
>>of old releases.
> 
> But doesn't TL2007 *inlcude* the lm-math fonts???? Please reconsider
> this!

At this point, I will not touch TL any more, except for urgent
bugfixes. Staszek added the new latin modern at the very last
moment, and I do not want to risk having a completely bodged
system on TeXLive like we have had in some previous years.
In fact, I still cannot quite believe that this release is going
to work out ok.

Perhaps Hans can be convinced to add a backward-compatibily switch
for the normal context releases (>2007.01.23), but that is not
upto me.

Best wishes,

Taco

From preining at logic.at  Tue Jan 23 23:19:03 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 23 Jan 2007 23:19:03 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <45B6859A.1020609@elvenkind.com>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<45B677B1.7020103@elvenkind.com>
	<20070123212832.GB12597@gamma.logic.tuwien.ac.at>
	<45B6859A.1020609@elvenkind.com>
Message-ID: <20070123221903.GI12597@gamma.logic.tuwien.ac.at>

Hi Taco, hi Hans!

On Die, 23 Jan 2007, Taco Hoekwater wrote:
> At this point, I will not touch TL any more, except for urgent
> bugfixes. Staszek added the new latin modern at the very last

Ok with me.

> In fact, I still cannot quite believe that this release is going
> to work out ok.

It will !!!

> Perhaps Hans can be convinced to add a backward-compatibily switch
> for the normal context releases (>2007.01.23), but that is not
> upto me.

Hmm, after a quick look it seems not too complicated, adding a file
existence test in type-map.tex before loading lm-math.map.

But it is up to Hans ... hi?!

If you don't want to include it into official versions, could you at
least provide a hint what to add/patch so that it uses the cm fonts for
math ...?


Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
PELUTHO (n.) A South American ball game. The balls are whacked against
a brick wall with a stout wooden bat until the prisoner confesses.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Tue Jan 23 23:33:49 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 23 Jan 2007 23:33:49 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <20070123221903.GI12597@gamma.logic.tuwien.ac.at>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<45B677B1.7020103@elvenkind.com>
	<20070123212832.GB12597@gamma.logic.tuwien.ac.at>
	<45B6859A.1020609@elvenkind.com>
	<20070123221903.GI12597@gamma.logic.tuwien.ac.at>
Message-ID: <20070123223349.GJ12597@gamma.logic.tuwien.ac.at>

On Die, 23 Jan 2007, Norbert Preining wrote:
> > Perhaps Hans can be convinced to add a backward-compatibily switch
> > for the normal context releases (>2007.01.23), but that is not
> > upto me.
> 
> Hmm, after a quick look it seems not too complicated, adding a file
> existence test in type-map.tex before loading lm-math.map.

Aemm, I could compile all my test cases even without lm-math fonts
available (I am using the texlive 2005 Debian packages).

The log files give me:
... </usr/share/texmf-texlive/fonts/type1/bluesky/cm/cmsy10.pfb> ...
so it seems that there is already some backward compatibility???

What do I miss???

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
TORLUNDY (n.) Narrow but thickly grimed strip of floor between the
fridge and the sink unit in the kitchen of a rented flat.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Wed Jan 24 00:28:09 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 24 Jan 2007 00:28:09 +0100
Subject: [dev-context] Bug report
Message-ID: <20070123232809.GM12597@gamma.logic.tuwien.ac.at>

Hi all!

Long time ago Frank forwarded a bug from the Debian Bug Tracking System
to you, but it has not been fixed, so I allow me to remind you:

>From Michal Kovac <kovymail at centrum.cz>:
> In cont-cz is translated "indentation" and "indenting" both as
> "odsazovani" so indentation does not work in cont-cz. 
> 
> I think right translation is for it :
> indenting - odsazovani
> indentation - odsazeni
> setupindentations - nastavodsazeni
> setupindenting - nastavodsazovani
> 
> I think that bug is in files:
> /usr/share/texmf/tex/context/base/mult-con.tex
> /usr/share/texmf/tex/context/base/mult-com.tex
> /usr/share/texmf/context/data/cont-cz.tws

I checked with the latest release and the czech names are still the same
for two different translations, as described above.

Thanks a lot for considering this ..., if there is a better place to
submit bugs, let me know.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
SCETHROG (n.)
One of those peculiar beards-without-moustaches worn by religious
Belgians and American scientists which help them look like trolls.
			--- Douglas Adams, The Meaning of Liff

From contexttest-featurerequests at foundry.supelec.fr  Wed Jan 24 05:05:52 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Wed, 24 Jan 2007 05:05:52 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B54?=
	=?utf-8?q?=5D_offsets_in_TABLE-cells?=
Message-ID: <200701240405.l0O45qE2027101@semantic.metz.supelec.fr>

Feature Requests item #54, was opened at 2007-01-04 12:23
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=54&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: offsets in TABLE-cells 
Version: None
Category: None


Initial Comment:
It would be nice to have independant horizontal and vertical offsets in TABLE-cells. Or even topoffset, bottomoffset, leftoffset and rightoffset.
Peter


----------------------------------------------------------------------

>Comment By: Mojca Miklavec (mojca)
Date: 2007-01-24 05:05

Message:
Here are some macros that Wolfgang Schuster <schuster.wolfgang at 
googlemail.com> sent me some time ago (shame on me that I didn't do 
anything about it!) They should probably be integrated, not simply 
overloaded, but ...

I would vote for that feature too.

Mojca


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=54&group_id=21


From contexttest-featurerequests at foundry.supelec.fr  Wed Jan 24 05:06:47 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Wed, 24 Jan 2007 05:06:47 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B54?=
	=?utf-8?q?=5D_offsets_in_TABLE-cells?=
Message-ID: <200701240406.l0O46l6x027114@semantic.metz.supelec.fr>

Feature Requests item #54, was opened at 2007-01-04 12:23
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=54&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: offsets in TABLE-cells 
Version: None
Category: None


Initial Comment:
It would be nice to have independant horizontal and vertical offsets in TABLE-cells. Or even topoffset, bottomoffset, leftoffset and rightoffset.
Peter


----------------------------------------------------------------------

Comment By: Mojca Miklavec (mojca)
Date: 2007-01-24 05:05

Message:
Here are some macros that Wolfgang Schuster <schuster.wolfgang at 
googlemail.com> sent me some time ago (shame on me that I didn't do 
anything about it!) They should probably be integrated, not simply 
overloaded, but ...

I would vote for that feature too.

Mojca


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=54&group_id=21


From f.rougon at free.fr  Tue Jan 23 20:59:22 2007
From: f.rougon at free.fr (Florent Rougon)
Date: Tue, 23 Jan 2007 20:59:22 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <20070123190537.GA1958@gamma.logic.tuwien.ac.at> (Norbert
	Preining's message of "Tue, 23 Jan 2007 20:05:37 +0100")
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
Message-ID: <87k5zdbjl1.fsf@florent.maison>

Hi,

Norbert Preining <preining at logic.at> wrote:

> I don't know whether Florent is planning to do an upload of lmodern with
> the new math fonts included (Florent?).

I'm not planning to upload a new lmodern version before etch is
released. First, it's too late to test such an update; second, I'm very
busy these days...

> If yes, then sorry for the Debian using guys, but you have to wait until
> we have the new lmodern in Debian.

In fact, there may be a possibility: if it's enough to only *add* fonts
that were previoulsy absent (presumably, those listed in that new
lm-math.map file), then it can be acceptable (if done carefully).

We would have to either create a new .tar.gz with both LM 1.00 and the
new fonts from the latest LM release, or uuencode the new files in the
.diff.gz...

-- 
Florent

From taco at elvenkind.com  Wed Jan 24 09:34:20 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 24 Jan 2007 09:34:20 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <20070123223349.GJ12597@gamma.logic.tuwien.ac.at>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<45B677B1.7020103@elvenkind.com>
	<20070123212832.GB12597@gamma.logic.tuwien.ac.at>
	<45B6859A.1020609@elvenkind.com>
	<20070123221903.GI12597@gamma.logic.tuwien.ac.at>
	<20070123223349.GJ12597@gamma.logic.tuwien.ac.at>
Message-ID: <45B71A0C.7070808@elvenkind.com>

Norbert Preining wrote:
> On Die, 23 Jan 2007, Norbert Preining wrote:
> 
>>>Perhaps Hans can be convinced to add a backward-compatibily switch
>>>for the normal context releases (>2007.01.23), but that is not
>>>upto me.
>>
>>Hmm, after a quick look it seems not too complicated, adding a file
>>existence test in type-map.tex before loading lm-math.map.
> 
> 
> Aemm, I could compile all my test cases even without lm-math fonts
> available (I am using the texlive 2005 Debian packages).
> 
> The log files give me:
> ... </usr/share/texmf-texlive/fonts/type1/bluesky/cm/cmsy10.pfb> ...
> so it seems that there is already some backward compatibility???
> 
> What do I miss???

You probably have something extra (or a file from an older context
release) that is read instead of the one from the latest context.

My tests all include  </opt/tex/texmf/fonts/type1/public/lm/lmsy10.pfb>
etc.

Best, Taco

From taco at elvenkind.com  Wed Jan 24 09:40:07 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 24 Jan 2007 09:40:07 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <20070123221903.GI12597@gamma.logic.tuwien.ac.at>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<45B677B1.7020103@elvenkind.com>
	<20070123212832.GB12597@gamma.logic.tuwien.ac.at>
	<45B6859A.1020609@elvenkind.com>
	<20070123221903.GI12597@gamma.logic.tuwien.ac.at>
Message-ID: <45B71B67.3050008@elvenkind.com>


(I dropped the debian-related CCs)

Norbert Preining wrote:
> 
> If you don't want to include it into official versions, could you at
> least provide a hint what to add/patch so that it uses the cm fonts for
> math ...?

type-enc.tex contains the following block.

\starttypescript [math] [modern,latin-modern,computer-modern]

   \definefontsynonym [cmbsy5]  [lmbsy5]
   \definefontsynonym [cmbsy7]  [lmbsy7]
   \definefontsynonym [cmbsy10] [lmbsy10]
   \definefontsynonym [cmsy5]   [lmsy5]
   \definefontsynonym [cmsy6]   [lmsy6]
   \definefontsynonym [cmsy7]   [lmsy7]
   \definefontsynonym [cmsy8]   [lmsy8]
   \definefontsynonym [cmsy9]   [lmsy9]
   \definefontsynonym [cmsy10]  [lmsy10]
   \definefontsynonym [cmex10]  [lmex10]
   \definefontsynonym [cmmi5]   [lmmi5]
   \definefontsynonym [cmmi6]   [lmmi6]
   \definefontsynonym [cmmi7]   [lmmi7]
   \definefontsynonym [cmmi8]   [lmmi8]
   \definefontsynonym [cmmi9]   [lmmi9]
   \definefontsynonym [cmmi10]  [lmmi10]
   \definefontsynonym [cmmi12]  [lmmi12]
   \definefontsynonym [cmmib5]  [lmmib5]
   \definefontsynonym [cmmib7]  [lmmib7]
   \definefontsynonym [cmmib10] [lmmib10]

\stoptypescript

this is the key point: these synonyms instruct context to replace
all the occurences of "cmsy10" in type-siz.tex with "lmsy10" (etc.)

Taco

From pragma at wxs.nl  Wed Jan 24 14:22:13 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 24 Jan 2007 14:22:13 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <20070123212832.GB12597@gamma.logic.tuwien.ac.at>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<45B677B1.7020103@elvenkind.com>
	<20070123212832.GB12597@gamma.logic.tuwien.ac.at>
Message-ID: <45B75D85.6020208@wxs.nl>

Norbert Preining wrote:
> Hi Taco!
>
> On Die, 23 Jan 2007, Taco Hoekwater wrote:
>   
>> Yes, just like the change to pdftex 1.40 in 2007.01.12 was absolute.
>>     
>
> I don't agree. I could process several medium complicated test cases I
> have collected over the time with pdfetex 1.30.5 from TL2005 (debian
> packages) with my context packages for 2007.01.12.
>
> The only point was that is was necessary to add the pdfetex -> pdftex
> symlink, otherwise everything worked without problem.
>
> So I *don't see that this was an *absolute* move.
>   
indeed, as long as one is able to sort out the binaries, context will 
work ok; at the macro level all versions of pdftex are supported, 
although ... once pdftex 1.40 is out for some period it makes sense to 
remove pre 1.40 support
>
> But doesn't TL2007 *inlcude* the lm-math fonts???? Please reconsider
> this!
>   
it does contain those fonts; the problem is that latex does to default 
to lm and if hartmut hadn't tested it, the related latex font packages 
would have been broken; the whole idea behind lm is that eventually crm, 
aer, plr, csr, vnr can go; just as with gyre fonts, the many variant can 
go ... less files, less problems
>
> We are discussing this with Florent ...
>   
good! one additional argument can be that the latest look the greatest

Hans

 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Wed Jan 24 14:25:03 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 24 Jan 2007 14:25:03 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <20070123221903.GI12597@gamma.logic.tuwien.ac.at>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<45B677B1.7020103@elvenkind.com>
	<20070123212832.GB12597@gamma.logic.tuwien.ac.at>
	<45B6859A.1020609@elvenkind.com>
	<20070123221903.GI12597@gamma.logic.tuwien.ac.at>
Message-ID: <45B75E2F.6010303@wxs.nl>

Norbert Preining wrote:
> Hi Taco, hi Hans!
>
> On Die, 23 Jan 2007, Taco Hoekwater wrote:
>   
>> At this point, I will not touch TL any more, except for urgent
>> bugfixes. Staszek added the new latin modern at the very last
>>     
>
> Ok with me.
>
>   
>> In fact, I still cannot quite believe that this release is going
>> to work out ok.
>>     
>
> It will !!!
>
>   
>> Perhaps Hans can be convinced to add a backward-compatibily switch
>> for the normal context releases (>2007.01.23), but that is not
>> upto me.
>>     
>
> Hmm, after a quick look it seems not too complicated, adding a file
> existence test in type-map.tex before loading lm-math.map.
>   
the problem is that map files live in map file space and not in tex file 
space ... as with tfm files, no robust test can be done

(which is why we will move to xml variants that live in tex space)

Hans

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Wed Jan 24 14:28:00 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 24 Jan 2007 14:28:00 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <87k5zdbjl1.fsf@florent.maison>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<87k5zdbjl1.fsf@florent.maison>
Message-ID: <45B75EE0.3050904@wxs.nl>

Florent Rougon wrote:
> Hi,
>
> Norbert Preining <preining at logic.at> wrote:
>
>   
>> I don't know whether Florent is planning to do an upload of lmodern with
>> the new math fonts included (Florent?).
>>     
>
> I'm not planning to upload a new lmodern version before etch is
> released. First, it's too late to test such an update; second, I'm very
> busy these days...
>
>   
>> If yes, then sorry for the Debian using guys, but you have to wait until
>> we have the new lmodern in Debian.
>>     
>
> In fact, there may be a possibility: if it's enough to only *add* fonts
> that were previoulsy absent (presumably, those listed in that new
> lm-math.map file), then it can be acceptable (if done carefully).
>   
the file set is rather stable so you can just overwrite (unzip) the new 
archives; nothing needs to be deleted
> We would have to either create a new .tar.gz with both LM 1.00 and the
> new fonts from the latest LM release, or uuencode the new files in the
> ..diff.gz...
>
>   


-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From preining at logic.at  Wed Jan 24 15:00:31 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 24 Jan 2007 15:00:31 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <45B75D85.6020208@wxs.nl>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<45B677B1.7020103@elvenkind.com>
	<20070123212832.GB12597@gamma.logic.tuwien.ac.at>
	<45B75D85.6020208@wxs.nl>
Message-ID: <20070124140031.GI2175@gamma.logic.tuwien.ac.at>

Hi Hans!

On Mit, 24 Jan 2007, Hans Hagen wrote:
> >So I *don't see that this was an *absolute* move.
> >  
> indeed, as long as one is able to sort out the binaries, context will 
> work ok; at the macro level all versions of pdftex are supported, 
> although ... once pdftex 1.40 is out for some period it makes sense to 
> remove pre 1.40 support

This is good. Of course the compatibility cruft will be removed with TeX
Live 2007 entering Debian, but only then.

> good! one additional argument can be that the latest look the greatest

As said, not for etch. We will probably prepare and upload of
experimental, and as soon as etch is released (hahaha, it seems all soo
common to me, TeX Live, Debian, release problems ...) we can move the
new lmodern to unstable (and new testing).

Hans: One question: Do you have an idea why on my PC with texlive2005
Debian packages with lmodern 1.0, no additional stuff installed, but
with the latest context, I can run a document and get the math right,
with the cmr fonts. I thought the lmr MATH fonts are compulsory now?
That was the whole discussion about?

Ie, if the lmr math fonts are not found, does context automatically take
the cmr math fonts?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
HASELBURY PLUCKNETT (n.)
A mechanical device for cleaning combs invented during the industrial
revolution at the same time as Arkwright's Spinning Jenny, but which
didn't catch on in the same way.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Wed Jan 24 19:31:40 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 24 Jan 2007 19:31:40 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <20070124140031.GI2175@gamma.logic.tuwien.ac.at>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<45B677B1.7020103@elvenkind.com>
	<20070123212832.GB12597@gamma.logic.tuwien.ac.at>
	<45B75D85.6020208@wxs.nl>
	<20070124140031.GI2175@gamma.logic.tuwien.ac.at>
Message-ID: <45B7A60C.4040708@wxs.nl>

Norbert Preining wrote:
> Hi Hans!
>
> On Mit, 24 Jan 2007, Hans Hagen wrote:
>   
>>> So I *don't see that this was an *absolute* move.
>>>  
>>>       
>> indeed, as long as one is able to sort out the binaries, context will 
>> work ok; at the macro level all versions of pdftex are supported, 
>> although ... once pdftex 1.40 is out for some period it makes sense to 
>> remove pre 1.40 support
>>     
>
> This is good. Of course the compatibility cruft will be removed with TeX
> Live 2007 entering Debian, but only then.
>
>   
>> good! one additional argument can be that the latest look the greatest
>>     
>
> As said, not for etch. We will probably prepare and upload of
> experimental, and as soon as etch is released (hahaha, it seems all soo
> common to me, TeX Live, Debian, release problems ...) we can move the
> new lmodern to unstable (and new testing).
>
> Hans: One question: Do you have an idea why on my PC with texlive2005
> Debian packages with lmodern 1.0, no additional stuff installed, but
> with the latest context, I can run a document and get the math right,
> with the cmr fonts. I thought the lmr MATH fonts are compulsory now?
> That was the whole discussion about?
>
> Ie, if the lmr math fonts are not found, does context automatically take
> the cmr math fonts?
>   
it depends a bit of how a font is defined, using design sizes or using scaled 10pt; this morning i removed the latest traces of cm fonts in the definitions; the reasons for this are that the lm people want things to be used and tested (a few more chars in math) and so far context always was a decent testbed because users are willing to update (which is why latin modern has been the default font quite soon after it came available); of course the downside is that changes in filenames can be harmful (for some obscure reason halfway between the project tetex wanted another map naming scheme which is inconsistent with other 'modern' polish distributed fonts and it's for that reason that we still ship alternative map files (will be dropped after tex live 2007; maybe we will even drop mapfiles and move to font resources in xml format so that no further conflicts can arise (less files too)) 

so ... from now on we really need lm math fonts (interestin gis that these fonts have been around for a year and lm people wondered why no reports of usage came in; i only recently found out that they never made it into tetex cq. tex live probably because they were not mentioned in a an update script) 

anyhow ... keep in mind that the cmr10 now is rm-lmr10 i.e. rm-* named fonts are the real 7 bit replacements)

Hans 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Wed Jan 24 19:32:59 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 24 Jan 2007 19:32:59 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <86ac08348u.fsf@alhambra.kuesterei.ch>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<87k5zdbjl1.fsf@florent.maison> <45B75EE0.3050904@wxs.nl>
	<86ac08348u.fsf@alhambra.kuesterei.ch>
Message-ID: <45B7A65B.20403@wxs.nl>

Frank ? wrote:
> Hans Hagen <pragma at wxs.nl> wrote:
>
>   
>> Florent Rougon wrote:
>>     
>>> Hi,
>>>
>>> Norbert Preining <preining at logic.at> wrote:
>>>
>>>   
>>>       
>>>> I don't know whether Florent is planning to do an upload of lmodern with
>>>> the new math fonts included (Florent?).
>>>>     
>>>>         
>>> I'm not planning to upload a new lmodern version before etch is
>>> released. First, it's too late to test such an update; second, I'm very
>>> busy these days...
>>>
>>>   
>>>       
>>>> If yes, then sorry for the Debian using guys, but you have to wait until
>>>> we have the new lmodern in Debian.
>>>>     
>>>>         
>>> In fact, there may be a possibility: if it's enough to only *add* fonts
>>> that were previoulsy absent (presumably, those listed in that new
>>> lm-math.map file), then it can be acceptable (if done carefully).
>>>   
>>>       
>> the file set is rather stable so you can just overwrite (unzip) the
>> new archives; nothing needs to be deleted
>>     
>
> No, changing any existing files is not an option at this point in
> Debian's release cycle.
>   
ok; but if you just add the math fonts (type 1) also make sure that you 
add lm-math.map (this file also lists the fonts we're dealing with)

Hans

-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Wed Jan 24 19:37:34 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 24 Jan 2007 19:37:34 +0100
Subject: [dev-context] Bug report
In-Reply-To: <20070123232809.GM12597@gamma.logic.tuwien.ac.at>
References: <20070123232809.GM12597@gamma.logic.tuwien.ac.at>
Message-ID: <45B7A76E.2080400@wxs.nl>

Norbert Preining wrote:
> Hi all!
>
> Long time ago Frank forwarded a bug from the Debian Bug Tracking System
> to you, but it has not been fixed, so I allow me to remind you:
>
> >From Michal Kovac <kovymail at centrum.cz>:
>   
>> In cont-cz is translated "indentation" and "indenting" both as
>> "odsazovani" so indentation does not work in cont-cz. 
>>
>> I think right translation is for it :
>> indenting - odsazovani
>> indentation - odsazeni
>> setupindentations - nastavodsazeni
>> setupindenting - nastavodsazovani
>>
>> I think that bug is in files:
>> /usr/share/texmf/tex/context/base/mult-con.tex
>> /usr/share/texmf/tex/context/base/mult-com.tex
>> /usr/share/texmf/context/data/cont-cz.tws
>>     
>
> I checked with the latest release and the czech names are still the same
> for two different translations, as described above.
>
> Thanks a lot for considering this ..., if there is a better place to
> submit bugs, let me know.
ok, i changed it (hope i did it right)

Hans


-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From frank at debian.org  Wed Jan 24 15:10:09 2007
From: frank at debian.org (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Wed, 24 Jan 2007 15:10:09 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <45B75EE0.3050904@wxs.nl> (Hans Hagen's message of "Wed\,
	24 Jan 2007 14\:28\:00 +0100")
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<87k5zdbjl1.fsf@florent.maison> <45B75EE0.3050904@wxs.nl>
Message-ID: <86ac08348u.fsf@alhambra.kuesterei.ch>

Hans Hagen <pragma at wxs.nl> wrote:

> Florent Rougon wrote:
>> Hi,
>>
>> Norbert Preining <preining at logic.at> wrote:
>>
>>   
>>> I don't know whether Florent is planning to do an upload of lmodern with
>>> the new math fonts included (Florent?).
>>>     
>>
>> I'm not planning to upload a new lmodern version before etch is
>> released. First, it's too late to test such an update; second, I'm very
>> busy these days...
>>
>>   
>>> If yes, then sorry for the Debian using guys, but you have to wait until
>>> we have the new lmodern in Debian.
>>>     
>>
>> In fact, there may be a possibility: if it's enough to only *add* fonts
>> that were previoulsy absent (presumably, those listed in that new
>> lm-math.map file), then it can be acceptable (if done carefully).
>>   
> the file set is rather stable so you can just overwrite (unzip) the
> new archives; nothing needs to be deleted

No, changing any existing files is not an option at this point in
Debian's release cycle.

Regards, Frank
-- 
Dr. Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From frank at debian.org  Wed Jan 24 15:12:37 2007
From: frank at debian.org (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Wed, 24 Jan 2007 15:12:37 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <45B75D85.6020208@wxs.nl> (Hans Hagen's message of "Wed\,
	24 Jan 2007 14\:22\:13 +0100")
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<45B677B1.7020103@elvenkind.com>
	<20070123212832.GB12597@gamma.logic.tuwien.ac.at>
	<45B75D85.6020208@wxs.nl>
Message-ID: <8664aw344q.fsf@alhambra.kuesterei.ch>

Hans Hagen <pragma at wxs.nl> wrote:

> indeed, as long as one is able to sort out the binaries, context will
> work ok; at the macro level all versions of pdftex are supported,
> although ... once pdftex 1.40 is out for some period it makes sense to
> remove pre 1.40 support

Mind that it might take a while until all Unix-like systems have
switched from teTeX to TeXlive, and until this is done, the pdfTeX from
teTeX-3.0 will be abundant.

Regards, Frank
-- 
Dr. Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From taco at elvenkind.com  Thu Jan 25 09:35:58 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 25 Jan 2007 09:35:58 +0100
Subject: [dev-context] Fix for Footnote Reference problem
In-Reply-To: <200701202152.00333.mgb-debian@yosemite.net>
References: <200701202152.00333.mgb-debian@yosemite.net>
Message-ID: <45B86BEE.1070006@elvenkind.com>


Hi Mike,

Mike Bird wrote:
> Here are a number of repaired functions (and one repaired variable)
> which together fix the problem of footnote references getting out
> of step between phases resulting in bogus results from \somewhere.

Hans and I have been looking at your patch, but unfortunately it
can not be incorporated in the distribution as-is. The problem is
that some references need to be written inside the output routine,
that being the only place were the actual page number is known.
Think about references in floats, for example.

The bit of code you have modified is unlikely to change soon, so
you could probably keep using your local patches (or better: 
redefinitions of the macros within cont-loc.tex) without much
problems.

Hans proposed that a definitive solution would be to always add
position information to the references, but that will take a fair
bit of work, so it is on a "todo, but not quite now" list.

Greetings Taco


From mojca.miklavec.lists at gmail.com  Thu Jan 25 14:11:06 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 25 Jan 2007 14:11:06 +0100
Subject: [dev-context] ec patterns in XeTeX?
Message-ID: <6faad9f00701250511q1b000c81ma1bff19ad6c1d470@mail.gmail.com>

Hello Hans,

I didn't thing about that before, but why does XeTeX report that it
loaded patterns like:

language        : patterns nl->texnansi:texnansi->1->2:3 nl->ec:ec->2->2:3 fr->
texnansi:texnansi->3->2:3 fr->ec:ec->4->2:3 de->texnansi:texnansi->5->2:3 de->e
c:ec->6->2:3 it->texnansi:texnansi->7->2:3 it->ec:ec->8->2:3 pt->texnansi:texna
nsi->9->2:3 pt->ec:ec->10->2:3 hr->ec:ec->11->2:3 pl->pl0:pl0->12->2:3

etc. when it should load them as unicode? (Assuming that it actually
does load them in as Unicode ;)

Mojca

From schuster.wolfgang at googlemail.com  Thu Jan 25 14:16:31 2007
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Thu, 25 Jan 2007 14:16:31 +0100
Subject: [dev-context] Writing own interface for natural tables
Message-ID: <20070125141631.adb7cd95.schuster.wolfgang@googlemail.com>

I try currently to write a simplified environment for natural tables
to allow a simmiliar interface like tabulate and the old tables.

My problem ist that i need to save my input in a box feed this into
the \bTD/\eTD pair. This did not work if I collect all my text, put
this text into the tablebox and reuse this box for the next entry.

The follwing example shows my only working solution, it for every new
entry a new box. This works for a few entries untill my created boxes
use the same box number as the internal boxes used in the TABLE
macros.

<example>
\newbox\TABLEbox
\newcount\TABLEcount \TABLEcount\zerocount

\def\bWTD
  {\advance\TABLEcount\plusone
   \setbox\the\TABLEcount\hbox\bgroup}

\def\eWTD
  {\egroup
   \edef\wolf{\unhcopy\the\TABLEcount}
   \expanded{\bTD\wolf\eTD}}

\starttext

\bTABLE
  \bTR
    \bWTD Text 1 \eWTD
    \bWTD Text 2 \eWTD
  \eTR
  \bTR
    \bWTD Text 3 \eWTD
    \bWTD Text 4 \eWTD
  \eTR
\eTABLE

\stoptext
</example>

I hope there is a solution to solve this problem.


MfG

Wolfgang

From contexttest-featurerequests at foundry.supelec.fr  Thu Jan 25 14:39:05 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Thu, 25 Jan 2007 13:39:05 GMT
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B54?=
	=?utf-8?q?=5D_offsets_in_TABLE-cells?=
Message-ID: <200701251339.l0PDd5tG018535@semantic.metz.supelec.fr>

Feature Requests item #54, was opened at 2007-01-04 11:23
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=54&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: offsets in TABLE-cells 
Version: None
Category: None


Initial Comment:
It would be nice to have independant horizontal and vertical offsets in TABLE-cells. Or even topoffset, bottomoffset, leftoffset and rightoffset.
Peter


----------------------------------------------------------------------

Comment By: Mojca Miklavec (mojca)
Date: 2007-01-24 04:05

Message:
Here are some macros that Wolfgang Schuster <schuster.wolfgang at 
googlemail.com> sent me some time ago (shame on me that I didn't do 
anything about it!) They should probably be integrated, not simply 
overloaded, but ...

I would vote for that feature too.

Mojca


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=54&group_id=21


From contexttest-featurerequests at foundry.supelec.fr  Thu Jan 25 14:41:32 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Thu, 25 Jan 2007 13:41:32 GMT
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B54?=
	=?utf-8?q?=5D_offsets_in_TABLE-cells?=
Message-ID: <200701251341.l0PDfWtL018543@semantic.metz.supelec.fr>

Feature Requests item #54, was opened at 2007-01-04 11:23
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=54&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: offsets in TABLE-cells 
Version: None
Category: None


Initial Comment:
It would be nice to have independant horizontal and vertical offsets in TABLE-cells. Or even topoffset, bottomoffset, leftoffset and rightoffset.
Peter


----------------------------------------------------------------------

Comment By: Mojca Miklavec (mojca)
Date: 2007-01-24 04:05

Message:
Here are some macros that Wolfgang Schuster <schuster.wolfgang at 
googlemail.com> sent me some time ago (shame on me that I didn't do 
anything about it!) They should probably be integrated, not simply 
overloaded, but ...

I would vote for that feature too.

Mojca


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=54&group_id=21


From patrick at gundla.ch  Thu Jan 25 18:23:33 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu, 25 Jan 2007 18:23:33 +0100
Subject: [dev-context] garden: new ConTeXt?
Message-ID: <m2d5536mwa.fsf@levana.de>

I know I have asked this question before and I know you have been
discussing this question and cc'd to me.... but anyway.

I think this is definitely time to switch the TeX distribution for
garden. I use debian 3.1 there and I don't want to update anything to
testing/unstable/... Could you give me an advice? Should i use the
minimal ConTeXt distribution from PRAGMA ADE?

Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net

From mgb-debian at yosemite.net  Thu Jan 25 19:03:12 2007
From: mgb-debian at yosemite.net (Mike Bird)
Date: Thu, 25 Jan 2007 10:03:12 -0800
Subject: [dev-context] Fix for Footnote Reference problem
In-Reply-To: <45B86BEE.1070006@elvenkind.com>
References: <200701202152.00333.mgb-debian@yosemite.net>
	<45B86BEE.1070006@elvenkind.com>
Message-ID: <200701251003.14546.mgb-debian@yosemite.net>

On Thursday 25 January 2007 00:35, Taco Hoekwater wrote:
> Hans and I have been looking at your patch, but unfortunately it
> can not be incorporated in the distribution as-is. The problem is
> that some references need to be written inside the output routine,
> that being the only place were the actual page number is known.
> Think about references in floats, for example.
>
> The bit of code you have modified is unlikely to change soon, so
> you could probably keep using your local patches (or better:
> redefinitions of the macros within cont-loc.tex) without much
> problems.

I wonder whether it would be beneficial to include all of the patches
except the immediate write?  That would appear to solve most problems
except some cases of \somewhere to a reference on the same page.  Most
\somewhere's refer to distant references.  Fixing the off-by-one and
off-by-a-factor-of-two errors would help enormously.

Is there a way to make the immediate write conditional on not floating?

> Hans proposed that a definitive solution would be to always add
> position information to the references, but that will take a fair
> bit of work, so it is on a "todo, but not quite now" list.

Absolutely.

--Mike Bird

From mojca.miklavec.lists at gmail.com  Thu Jan 25 19:04:06 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 25 Jan 2007 19:04:06 +0100
Subject: [dev-context] garden: new ConTeXt?
In-Reply-To: <m2d5536mwa.fsf@levana.de>
References: <m2d5536mwa.fsf@levana.de>
Message-ID: <6faad9f00701251004l7b236072w6a1d27fbf9be5baf@mail.gmail.com>

On 1/25/07, Patrick Gundlach wrote:
> I know I have asked this question before and I know you have been
> discussing this question and cc'd to me.... but anyway.
>
> I think this is definitely time to switch the TeX distribution for
> garden. I use debian 3.1 there and I don't want to update anything to
> testing/unstable/...

Then you're in troubles ;)
You can't get a stable ConTeXt ;) Are you sure you want one? ;)

> Could you give me an advice? Should i use the
> minimal ConTeXt distribution from PRAGMA ADE?

http://wiki.contextgarden.net/Debian_installation

The others will surely have a better answer, but I guess that you can
install *only* TeXLive without having to switch to unstable:

<quoting>
If you are not running unstable, simply add these lines to your
/etc/apt/sources.list:

 deb http://www.tug.org/texlive/Debian/ context/
 deb-src http://www.tug.org/texlive/Debian/ context/
</quoting>

Since you have ConTeXt updating procedure already, it's probably
enough to install TeXLive and no ConTeXt.

Mojca

(Hurray! XeTeX on the garden!)

From patrick at gundla.ch  Thu Jan 25 19:38:21 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu, 25 Jan 2007 19:38:21 +0100
Subject: [dev-context] garden: new ConTeXt?
In-Reply-To: <6faad9f00701251004l7b236072w6a1d27fbf9be5baf@mail.gmail.com>
	(Mojca Miklavec's message of "Thu, 25 Jan 2007 19:04:06 +0100")
References: <m2d5536mwa.fsf@levana.de>
	<6faad9f00701251004l7b236072w6a1d27fbf9be5baf@mail.gmail.com>
Message-ID: <m28xfr6jfm.fsf@levana.de>


> Since you have ConTeXt updating procedure already, it's probably
> enough to install TeXLive and no ConTeXt.

Where can I rsync texlive? Can't mount iso image....

> (Hurray! XeTeX on the garden!)

Don't cheer before I have it installed :)

Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net

From martin at oneiros.de  Thu Jan 25 19:47:29 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Thu, 25 Jan 2007 19:47:29 +0100
Subject: [dev-context] garden: new ConTeXt?
In-Reply-To: <m28xfr6jfm.fsf@levana.de>
References: <m2d5536mwa.fsf@levana.de>
	<6faad9f00701251004l7b236072w6a1d27fbf9be5baf@mail.gmail.com>
	<m28xfr6jfm.fsf@levana.de>
Message-ID: <68c491a60701251047q7673ed39y4dd3c3e8db2f69e0@mail.gmail.com>

2007/1/25, Patrick Gundlach <patrick at gundla.ch>:
> Where can I rsync texlive? Can't mount iso image....

Don't know about the images, but the svn is available via rsync:
http://www.tug.org/tex-live/svn/

Best
   Martin

From mojca.miklavec.lists at gmail.com  Thu Jan 25 19:52:41 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 25 Jan 2007 19:52:41 +0100
Subject: [dev-context] garden: new ConTeXt?
In-Reply-To: <m28xfr6jfm.fsf@levana.de>
References: <m2d5536mwa.fsf@levana.de>
	<6faad9f00701251004l7b236072w6a1d27fbf9be5baf@mail.gmail.com>
	<m28xfr6jfm.fsf@levana.de>
Message-ID: <6faad9f00701251052k2db92c4au119d56034db0e750@mail.gmail.com>

On 1/25/07, Patrick Gundlach wrote:
>
> > Since you have ConTeXt updating procedure already, it's probably
> > enough to install TeXLive and no ConTeXt.
>
> Where can I rsync texlive? Can't mount iso image....

http://www.tug.org/texlive/svn/?

But are you sure that you don't want to use the existing Debian package?

Mojca

From patrick at gundla.ch  Thu Jan 25 20:09:27 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu, 25 Jan 2007 20:09:27 +0100
Subject: [dev-context] garden: new ConTeXt?
In-Reply-To: <6faad9f00701251052k2db92c4au119d56034db0e750@mail.gmail.com>
	(Mojca Miklavec's message of "Thu, 25 Jan 2007 19:52:41 +0100")
References: <m2d5536mwa.fsf@levana.de>
	<6faad9f00701251004l7b236072w6a1d27fbf9be5baf@mail.gmail.com>
	<m28xfr6jfm.fsf@levana.de>
	<6faad9f00701251052k2db92c4au119d56034db0e750@mail.gmail.com>
Message-ID: <m21wli7wk8.fsf@levana.de>

>> > Since you have ConTeXt updating procedure already, it's probably
>> > enough to install TeXLive and no ConTeXt.
>>
>> Where can I rsync texlive? Can't mount iso image....
>
> http://www.tug.org/texlive/svn/?

thanks for the url, I've found the rsync source...
>
> But are you sure that you don't want to use the existing Debian package?

no. I've seen that they should work on current stable? Unbelievable!
Anybody with experience on that? I guess Norbert knows what he is
doing, so I think I'll try those packages first. 

Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net

From sanjoy at mrao.cam.ac.uk  Thu Jan 25 22:35:44 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Thu, 25 Jan 2007 21:35:44 +0000
Subject: [dev-context] garden: new ConTeXt?
In-Reply-To: Your message of "Thu, 25 Jan 2007 19:04:06 +0100."
	<6faad9f00701251004l7b236072w6a1d27fbf9be5baf@mail.gmail.com> 
Message-ID: <E1HACG0-0000Sp-00@skye.ra.phy.cam.ac.uk>

> The others will surely have a better answer, but I guess that you
> can install *only* TeXLive without having to switch to unstable:

I don't have Debian stable here -- switched to Ubuntu (6.10), which is
more like Debian unstable as of 6 months ago.  But I worry that the
context packages won't install on Debian stable because they depend on
texlive-base-bin,tex-common and others that are only in
testing/unstable.

Two options:

1. wait until testing becomes stable, which allegedly will be 'soon',
   and then you can do everything out of the box.

2. apt-get the source to texlive-base-bin and rebuild it on Debian
   stable.  Or maybe there's a backports repository for it already?


-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From preining at logic.at  Fri Jan 26 00:06:10 2007
From: preining at logic.at (Norbert Preining)
Date: Fri, 26 Jan 2007 00:06:10 +0100
Subject: [dev-context] garden: new ConTeXt?
In-Reply-To: <m21wli7wk8.fsf@levana.de>
References: <m2d5536mwa.fsf@levana.de>
	<6faad9f00701251004l7b236072w6a1d27fbf9be5baf@mail.gmail.com>
	<m28xfr6jfm.fsf@levana.de>
	<6faad9f00701251052k2db92c4au119d56034db0e750@mail.gmail.com>
	<m21wli7wk8.fsf@levana.de>
Message-ID: <20070125230610.GA28267@gamma.logic.tuwien.ac.at>

Hi Patrick!

On Don, 25 Jan 2007, Patrick Gundlach wrote:
> > But are you sure that you don't want to use the existing Debian package?
> 
> no. I've seen that they should work on current stable? Unbelievable!
> Anybody with experience on that? I guess Norbert knows what he is
> doing, so I think I'll try those packages first. 

No, on current stable definitely not. It does not have tex-common nor
any infrastructure.

One *could* in theory compile the packages for sarge. There are already
backports for teTeX3 and tex-common etc, but I haven't tried this. And I
am happy that the texlive packages made it into etch!

No, the options are:
- etch
- or TL2007 from the iso image, but without package managing and with no
  updates to context.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
CHIPPING ONGAR (n.)
The disgust and embarrassment (or 'ongar') felt by an observer in the
presence of a person festooned with kirbies (q.v.) when they don't
know them well enough to tell them to wipe them off, invariably this
'ongar' is accompanied by an involuntary staccato twitching of the leg
(or 'chipping')
			--- Douglas Adams, The Meaning of Liff

From sanjoy at mrao.cam.ac.uk  Fri Jan 26 06:20:40 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Fri, 26 Jan 2007 00:20:40 -0500
Subject: [dev-context] wandering positional graphic
Message-ID: <E1HAJVw-0001sB-Ck@approximate.corpus.cam.ac.uk>

Almost the same test file as I used for testing 'dvipos' produces a
wandering positional graphic, in dvi or pdf mode.  Here's the test file.
The problem is that the positional graphic (a tilted line) (that should
be) connecting the '6' and the '8' is several inches too low on the
page.  I've attached a zip file with all the test files and results of
running everything -- see the README in it (or just run 'make view').
I'm using Ubuntu/i386 with:

  CtxTools | context version: 2007.01.23 13:32 
  pdfTeX 3.141592-1.40.0-2.2 (Web2C 7.5.6) + patch for the mem corruption
  MetaPost, Version 0.993 (Web2C 7.5.5)
  metafun 2007-1-23 17:46 (format remade with latest apt-get)

The example is as minimal as I could make it.  Remove the
\setuppapersize[bookpage][A4] and the graphics come out in the right
place.  Remove the \completecontent or the \section{Fake} and it also
comes out okay.

=================== begin: to-pdf.tex ==================
\definepapersize[bookpage][width=6.875in,height=9in]
\setuppapersize[bookpage][A4]

\defineoverlay [foregraphics] [\positionoverlay{foregraphics}]
\setupbackgrounds
  [page]
  [background={foreground,foregraphics}]

\starttext

\section{Fake}

\completecontent

\hpos{r13}{6}

\hpos{r23}{7} \quad \hpos{r24}{8} 

\startMPpositiongraphic{mypos:line}
  mpprocset := 0;  % context doesn't yet handle the new mpprocsets
  path pa, pb, pab ; numeric na, nb ;
  initialize_box(\MPpos{\MPvar{from}}) ;
  na := nxy ; pa := llxy..lrxy..urxy..ulxy..cycle ;
  initialize_box(\MPpos{\MPvar{to}}) ;
  nb := nxy ; pb := llxy..lrxy..urxy..ulxy..cycle ;
  if na=nb :
    pab := center pa -- center pb ;
    pab := pab cutbefore (pab intersectionpoint pa) ;
    pab := pab cutafter (pab intersectionpoint pb) ;
    pickup pencircle;
    draw pab;
    anchor_box(\MPanchor{\MPvar{from}}) ;
  fi ;
\stopMPpositiongraphic

\startpositionoverlay{foregraphics}
  \setMPpositiongraphic{r13}{mypos:line}{to=r24}
  \setMPpositiongraphic{r23}{mypos:line}{to=r24}
\stoppositionoverlay

\stoptext
===================   end: to-pdf.tex ==================


-Sanjoy

`A nation of slaves is always prepared to applaud the clemency of their
 master who, in the abuse of absolute power, does not proceed to the
 last extremes of injustice and oppression.'  (Gibbon)  


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/x-zip
Size: 72740 bytes
Desc: test files
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070126/90082f07/attachment-0001.bin 

From sanjoy at mrao.cam.ac.uk  Fri Jan 26 13:22:26 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Fri, 26 Jan 2007 12:22:26 +0000
Subject: [dev-context] wandering positional graphic
In-Reply-To: Your message of "Fri, 26 Jan 2007 00:20:40 EST."
	<E1HAJVw-0001sB-Ck@approximate.corpus.cam.ac.uk> 
Message-ID: <E1HAQ66-0007ES-00@skye.ra.phy.cam.ac.uk>

Since the graphic is placed correctly when the printing and
typesetting papersizes are the same, I added a \showframe and measured
a few offets.  

The vertical distance between the correct and incorrect position is
the same as the distance between the bottom of the layout frame and
the bottom edge of the paper.  Hence the problem did not appear
without a special papersize.

Consistent with that data, the graphic was placed correctly when the
bookpage was given the height of A4 paper:

  \definepapersize[bookpage][width=6.875in,height=11.7in]

So the problem is that the graphic is placed relative to the the print
paper's origin, rather than to the typesetting paper's origin.  It
could be a bug in the ConTeXt macros or in my MetaPost positioning
code -- which I borrowed from the MetaFun manual without, I admit,
fully understanding it :-)

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From patrick at gundla.ch  Fri Jan 26 15:52:59 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Fri, 26 Jan 2007 15:52:59 +0100
Subject: [dev-context] garden: new ConTeXt?
In-Reply-To: <m2d5536mwa.fsf@levana.de> (Patrick Gundlach's message of "Thu,
	25 Jan 2007 18:23:33 +0100")
References: <m2d5536mwa.fsf@levana.de>
Message-ID: <m2k5z96dro.fsf@levana.de>

Hi,

I'll switch to texlive2007 now. Live is alread done, wiki comes next.

Thanks for all answers,

Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net

From patrick at gundla.ch  Fri Jan 26 17:58:51 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Fri, 26 Jan 2007 17:58:51 +0100
Subject: [dev-context] garden: new ConTeXt?
In-Reply-To: <m2k5z96dro.fsf@levana.de> (Patrick Gundlach's message of "Fri,
	26 Jan 2007 15:52:59 +0100")
References: <m2d5536mwa.fsf@levana.de> <m2k5z96dro.fsf@levana.de>
Message-ID: <m2fy9x67xw.fsf@levana.de>



> wiki comes next.

done.

Patrick

From mojca.miklavec.lists at gmail.com  Mon Jan 29 03:09:37 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 29 Jan 2007 03:09:37 +0100
Subject: [dev-context] interesting bug in \type ;)
Message-ID: <6faad9f00701281809lc43d891ncce1f3f9ec739b4b@mail.gmail.com>

Hello Hans & Taco,

I didn't try to inspect the reasons for it (I woulg get lost in the
code anyway), but it has brought a smile on my face: \type{btex ...
etex} simply "forgets" to typeset "etex".

\setupcolors[state=start]
\setuptype[option=MP]

\starttext

\startbuffer
This is an example of \type+btex ... etex+ syntax.
\stopbuffer
\typebuffer
\getbuffer

\stoptext


Is there a chance to typeset the whole comment line with the same font
(color) when using TEX or MP for syntax highlighting? Now the comments
can hardly be distinguished from the rest of the code.

Mojca

From mojca.miklavec.lists at gmail.com  Tue Jan 30 01:50:07 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 30 Jan 2007 01:50:07 +0100
Subject: [dev-context] new MyWay about \sometxt
Message-ID: <6faad9f00701291650w633e315dr5036587bdae5f9cc@mail.gmail.com>

Hello,

instead of checking the problems with MyWay about database module, I
created another unfinished piece about \sometxt (as promised already
long ago):

    http://dl.contextgarden.net/myway/sometxt.pdf

\sometxt{...} should be used instead of textext("...") in metafun
graphics whenever possible, since it's much more efficient. An average
user shouldn't care about much more than that. The MyWay is devoted to
the curious ones. I hope that I included all the major ideas which
Hans implemented in Summer/Autumn 2006 on my request. Although not all
of them are documented well enough, I tried to mention them at least.

The document is full of mistakes and badly formulated sentences (I
should start reading more English literature instead of mailing lists
and articles ;). I wellcome any suggestions for improving it. Thanks
to Hans van der Meer who provided me the first feedback ;)

Just two questions left for Hans H. (Hans v. d. M. has brought up
exactly the same questions as I had a while ago):

1.) wouldn't it make sense to use
     \chardef\TeXtextcolormode\zerocount
as the default value? I don't see any advantages of setting it to
"one" (but I might have overseen something). Can you please take a
look at page 4 of the above listed MyWay and tell me if I forgot
something?

2.) Why does \textext still rely on its older brother textext(...),
when it could be a synonym for \sometxt{...} instead? I really don't
see any advantage of \textext{...} over \sometxt{...}. \textext{...}
canonot be used for concatenating strings or creating dynamic labels
either. It's just a picture, just as \sometxt ... And it would
probably also be more straightforward to explain to metafun users that
textext("...") should now be \textext{...} instead of trying to
explain them that it's best to use some completely new command.

Thanks a lot,
    Mojca

From adityam at umich.edu  Tue Jan 30 05:41:41 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 29 Jan 2007 23:41:41 -0500 (EST)
Subject: [dev-context] new MyWay about \sometxt
In-Reply-To: <6faad9f00701291650w633e315dr5036587bdae5f9cc@mail.gmail.com>
References: <6faad9f00701291650w633e315dr5036587bdae5f9cc@mail.gmail.com>
Message-ID: <alpine.WNT.0.82.0701292325540.2704@nqvgln>

On Tue, 30 Jan 2007, Mojca Miklavec wrote:

> Hello,
>
> instead of checking the problems with MyWay about database module, I
> created another unfinished piece about \sometxt (as promised already
> long ago):
>
>    http://dl.contextgarden.net/myway/sometxt.pdf
>
> \sometxt{...} should be used instead of textext("...") in metafun
> graphics whenever possible, since it's much more efficient. An average
> user shouldn't care about much more than that. The MyWay is devoted to
> the curious ones. I hope that I included all the major ideas which
> Hans implemented in Summer/Autumn 2006 on my request. Although not all
> of them are documented well enough, I tried to mention them at least.

Very nice. Now, I do not need to look up old mails to figure out how 
to manipulate sometxt. I have one example where \sometxt[...]{...} is 
useful. If you are interested, I can send it to you.

I thought a bit about your feature request, and it is not too 
difficult to implement it. Here is a patch that allows you to use 
\sometext[font][iwona,20pt]{...}. Careful of spurious linebreaks.

%=======================================================

\long\def\redofiltersometxt[#1]%
{\doifnextcharelse[{\reredofiltersometxt[#1]}{\redodofiltersometxt[#1]}}

\long\def\redodofiltersometxt[#1]#2%
   {\increment\txtcounter
    \TeXtext[#1]\txtcounter{#2}%
    \filtersometxt}

\long\def\reredofiltersometxt[#1][#2]#3%
   {\increment\txtcounter
    \TeXtext[#1]\txtcounter{\switchtobodyfont[#2]\strut#3}%
    \filtersometxt}

\definetextext[font]{\donothing}

\usetypescript[iwona][texnansi]

\starttext
\startMPcode
   draw fullcircle xyscaled (3cm,2cm);
   label(\sometxt{Hello world!}, origin);
\stopMPcode

% Does not cause any harm.
\startMPcode
   draw fullcircle xyscaled (3cm,2cm);
   label(\sometxt[font]{Hello world!}, origin);
\stopMPcode

\startMPcode
   draw fullcircle xyscaled (3cm,2cm);
   label(\sometxt[font][iwona,20pt]{Hello world!}, origin);
\stopMPcode

\stoptext

%===============================================================

I haven't tested it, but I do not think that this should cause any 
problems with existing code. \definetextext[font] is just a dummy. It 
should work with other things also. You can get rid of the dummy 
by checking in redodofiltersometxt if #1 is has a comma or not. Would 
that extra overhead be useful of gnuplot?


Hans, is there a reason for not defining dodofiltersometxt as

\long\def\dodofiltersometxt#1#2% #3
   {\ifx#2\empty
    \else
      \increment\txtcounter
      \TeXtext\txtcounter{#1}%
      \expandafter\filtersometxt
    \fi#2}% #3

whih will be a bit faster.

Aditya




From mojca.miklavec.lists at gmail.com  Tue Jan 30 15:34:36 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 30 Jan 2007 15:34:36 +0100
Subject: [dev-context] new MyWay about \sometxt
In-Reply-To: <alpine.WNT.0.82.0701292325540.2704@nqvgln>
References: <6faad9f00701291650w633e315dr5036587bdae5f9cc@mail.gmail.com>
	<alpine.WNT.0.82.0701292325540.2704@nqvgln>
Message-ID: <6faad9f00701300634o3f615a3fqe90a6207a4a730c4@mail.gmail.com>

On 1/30/07, Aditya Mahajan wrote:
> On Tue, 30 Jan 2007, Mojca Miklavec wrote:
>
> > Hello,
> >
> > instead of checking the problems with MyWay about database module, I
> > created another unfinished piece about \sometxt (as promised already
> > long ago):
> >
> >    http://dl.contextgarden.net/myway/sometxt.pdf
> >
> > \sometxt{...} should be used instead of textext("...") in metafun
> > graphics whenever possible, since it's much more efficient. An average
> > user shouldn't care about much more than that. The MyWay is devoted to
> > the curious ones. I hope that I included all the major ideas which
> > Hans implemented in Summer/Autumn 2006 on my request. Although not all
> > of them are documented well enough, I tried to mention them at least.
>
> Very nice. Now, I do not need to look up old mails to figure out how
> to manipulate sometxt.

I've put there everything that came to my mind, but 99% of the usage
is still only \sometxt{...}. The rest is trickery.

> I have one example where \sometxt[...]{...} is
> useful. If you are interested, I can send it to you.

I can include it in the manual if you want. I used \sometxt[] for
gnuplot because it looks more elegant and more backward compatible
that adding a bunch of additonal macros in front of it.

The example in MyWay is "artificial".

> I thought a bit about your feature request, and it is not too
> difficult to implement it. Here is a patch that allows you to use
> \sometext[font][iwona,20pt]{...}. Careful of spurious linebreaks.

Great!!!

Having a hardcoded \sometxt[font] doesn't help me much, but I'll copy
the code literally to the module and replace [font] by [gp].

> %=======================================================
>
> \long\def\redofiltersometxt[#1]%
> {\doifnextcharelse[{\reredofiltersometxt[#1]}{\redodofiltersometxt[#1]}}
>
> \long\def\redodofiltersometxt[#1]#2%
>    {\increment\txtcounter
>     \TeXtext[#1]\txtcounter{#2}%
>     \filtersometxt}
>
> \long\def\reredofiltersometxt[#1][#2]#3%
>    {\increment\txtcounter
>     \TeXtext[#1]\txtcounter{\switchtobodyfont[#2]\strut#3}%
>     \filtersometxt}
>
> \definetextext[font]{\donothing}
>
> \usetypescript[iwona][texnansi]
>
> \starttext
> \startMPcode
>    draw fullcircle xyscaled (3cm,2cm);
>    label(\sometxt{Hello world!}, origin);
> \stopMPcode
>
> % Does not cause any harm.
> \startMPcode
>    draw fullcircle xyscaled (3cm,2cm);
>    label(\sometxt[font]{Hello world!}, origin);
> \stopMPcode
>
> \startMPcode
>    draw fullcircle xyscaled (3cm,2cm);
>    label(\sometxt[font][iwona,20pt]{Hello world!}, origin);
> \stopMPcode
>
> \stoptext
>
> %===============================================================
>
> I haven't tested it, but I do not think that this should cause any
> problems with existing code. \definetextext[font] is just a dummy. It
> should work with other things also. You can get rid of the dummy
> by checking in redodofiltersometxt if #1 is has a comma or not. Would
> that extra overhead be useful of gnuplot?

Yes. But copying the code literally doesn't make as much sense since
other users might have different needs than "second optional parameter
should switch the font". I'll add that to the gnuplot module directly.

The only thing that could help would be a high-level user interface to
define such commands, such as is
   \definetextext[name]{\command}

So that one could then define
    % I'm not sure what should come inbetween
    \definetextext[myboldfont]???{\myboldfont}
    % #1 might be empty
    \def\myboldfont[#1]#2{\framed{
        \doifnot{#1}{}{\switchtobodyfont[#1]}
        \strut\bf #2}}
for example and use it as
    \sometxt[myboldfont][iwona]{this will be bold and framed iwona}

But your current code is more than enough for me (apart from the fact
that it's not really nice to redefine low-level macros, but I'll try
to keep up with low-level changes, should any accur) ;)

Thanks again,
    Mojca

(Before you asked for the feature of having optional parameters, I
redefined the low-level interface to accept \gptext{...} and
\gptext[fontname]{...} ;)

> Hans, is there a reason for not defining dodofiltersometxt as
>
> \long\def\dodofiltersometxt#1#2% #3
>    {\ifx#2\empty
>     \else
>       \increment\txtcounter
>       \TeXtext\txtcounter{#1}%
>       \expandafter\filtersometxt
>     \fi#2}% #3
>
> whih will be a bit faster.

From pragma at wxs.nl  Tue Jan 30 18:26:21 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 30 Jan 2007 18:26:21 +0100
Subject: [dev-context] new MyWay about \sometxt
In-Reply-To: <6faad9f00701291650w633e315dr5036587bdae5f9cc@mail.gmail.com>
References: <6faad9f00701291650w633e315dr5036587bdae5f9cc@mail.gmail.com>
Message-ID: <45BF7FBD.3000802@wxs.nl>

Mojca Miklavec wrote:
> Hello,
>
> instead of checking the problems with MyWay about database module, I
> created another unfinished piece about \sometxt (as promised already
> long ago):
>
>     http://dl.contextgarden.net/myway/sometxt.pdf
>
> \sometxt{...} should be used instead of textext("...") in metafun
> graphics whenever possible, since it's much more efficient. An average
> user shouldn't care about much more than that. The MyWay is devoted to
> the curious ones. I hope that I included all the major ideas which
> Hans implemented in Summer/Autumn 2006 on my request. Although not all
> of them are documented well enough, I tried to mention them at least.
>   
the textext stuff is from far before 2006 -)

you say that's been buggy but that not really the case ... the problem 
is that we are dealing with a quite complex situation which has to be 
dealt with outside tex

- we need to recognize textext in order to force a tex run inside mp  
(inbetween mp in texexec)
- we need to make sure that env's get passed
- we need to make sure that no extra runs take place when nothing has 
changed

etc. Combine this with users either or not having write 18 enabled and 
one gets a mess. The basic principles are rather simple.

The 'prefered-by-you' method is fast because mp never sees the text. The 
text is typeste in the current run and saved in a box. Mp only gets the 
dimensions and typets a reference in a monospace font (which then ends 
up in a string) the mp to pdf converter can recognize this label (text), 
and recalculate from that (+ the box dimensions) how things should be 
scaled. This mechanism is a spin of from experiments with piping data 
into mp (luatex exp long ago).

So, the other mechanism is rather robust because mp never sees any real 
complex text. This is also why things like color, graphics etc work well.
> 1.) wouldn't it make sense to use
>      \chardef\TeXtextcolormode\zerocount
> as the default value? I don't see any advantages of setting it to
> "one" (but I might have overseen something). Can you please take a
>   
you oversee my local truckload of files that assume that behaviour and 
compatibility is what i want
> look at page 4 of the above listed MyWay and tell me if I forgot
> something?
>
> 2.) Why does \textext still rely on its older brother textext(...),
> when it could be a synonym for \sometxt{...} instead? I really don't
> see any advantage of \textext{...} over \sometxt{...}. \textext{...}
> canonot be used for concatenating strings or creating dynamic labels
> either. It's just a picture, just as \sometxt ... And it would
> probably also be more straightforward to explain to metafun users that
> textext("...") should now be \textext{...} instead of trying to
> explain them that it's best to use some completely new command.
>   
dunno ... history ... don't change if you don't have too ... one never 
knows what surprised lurk .. users do tricky things so things may break ...
>   
Hans

-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From adityam at umich.edu  Wed Jan 31 04:08:39 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Tue, 30 Jan 2007 22:08:39 -0500 (EST)
Subject: [dev-context] new MyWay about \sometxt
In-Reply-To: <6faad9f00701300634o3f615a3fqe90a6207a4a730c4@mail.gmail.com>
References: <6faad9f00701291650w633e315dr5036587bdae5f9cc@mail.gmail.com> 
	<alpine.WNT.0.82.0701292325540.2704@nqvgln>
	<6faad9f00701300634o3f615a3fqe90a6207a4a730c4@mail.gmail.com>
Message-ID: <alpine.WNT.0.82.0701302149420.3192@nqvgln>

On Tue, 30 Jan 2007, Mojca Miklavec wrote:

> On 1/30/07, Aditya Mahajan wrote:
>> On Tue, 30 Jan 2007, Mojca Miklavec wrote:
>> 
>> > Hello,
>> >
>> > instead of checking the problems with MyWay about database module, I
>> > created another unfinished piece about \sometxt (as promised already
>> > long ago):
>> >
>> >    http://dl.contextgarden.net/myway/sometxt.pdf
>> >
>> > \sometxt{...} should be used instead of textext("...") in metafun
>> > graphics whenever possible, since it's much more efficient. An average
>> > user shouldn't care about much more than that. The MyWay is devoted to
>> > the curious ones. I hope that I included all the major ideas which
>> > Hans implemented in Summer/Autumn 2006 on my request. Although not all
>> > of them are documented well enough, I tried to mention them at least.
>> 
>> Very nice. Now, I do not need to look up old mails to figure out how
>> to manipulate sometxt.
>
> I've put there everything that came to my mind, but 99% of the usage
> is still only \sometxt{...}. The rest is trickery.
>
>> I have one example where \sometxt[...]{...} is
>> useful. If you are interested, I can send it to you.
>
> I can include it in the manual if you want. I used \sometxt[] for
> gnuplot because it looks more elegant and more backward compatible
> that adding a bunch of additonal macros in front of it.

I mainly use the \sometxt[..]{..} feature to create labels in my 
metapost figures. The normal setup is

\definetextext[parbox]{\framed[frame=off, width=2cm, autowidth=force, 
align=middle, background=color, backgroundcolor=white]}


Which insures that I do not have to worry about line breaking of long 
labels, and the unfill trick to get white backgrounds in labels. The 
down-side is that the background is white instead of being 
transparent. So, if you have a colored page background, the figure
looks odd. I have attached a complete example.

>
>> I thought a bit about your feature request, and it is not too
>> difficult to implement it. Here is a patch that allows you to use
>> \sometext[font][iwona,20pt]{...}. Careful of spurious linebreaks.
>
> Great!!!
>
> Having a hardcoded \sometxt[font] doesn't help me much, but I'll copy
> the code literally to the module and replace [font] by [gp].

The font is not hardcoded. But you need to have something there. 
Otherwise you need a mechanism to distinguish between

\sometxt[whatever] and
\sometxt[iwona]


>> %=======================================================
>> [snip[
>> %===============================================================
>> 
>> I haven't tested it, but I do not think that this should cause any
>> problems with existing code. \definetextext[font] is just a dummy. It
>> should work with other things also. You can get rid of the dummy
>> by checking in redodofiltersometxt if #1 is has a comma or not. Would
>> that extra overhead be useful of gnuplot?
>
> Yes. But copying the code literally doesn't make as much sense since
> other users might have different needs than "second optional parameter
> should switch the font". I'll add that to the gnuplot module directly.

It can be configurable. Maybe something like

\defineopttextext[whatever]{\command}

so that with \sometxt[whatever][2nd arg]{stuff} translates to 
\command[2nd ard]{stuff} and \sometxt[whatever]{stuff} translates to 
\command{stuff}.

That would involve more work to write the macro \command, but will 
provide more flexibility.


> The only thing that could help would be a high-level user interface to
> define such commands, such as is
>  \definetextext[name]{\command}
>
> So that one could then define
>   % I'm not sure what should come inbetween
>   \definetextext[myboldfont]???{\myboldfont}
>   % #1 might be empty
>   \def\myboldfont[#1]#2{\framed{
>       \doifnot{#1}{}{\switchtobodyfont[#1]}
         ^^^^^^^^^^^^^^^^
\doifnothing or \doifsomething is easier to  read
>       \strut\bf #2}}
> for example and use it as
>   \sometxt[myboldfont][iwona]{this will be bold and framed iwona}

It may be possible to extend definetextext to do this rather than 
\defineopttextext. In any case, it is upto the macro \command to 
ensure that it can handly the optinal argument. I will see if I can 
cook up something working.

> But your current code is more than enough for me (apart from the fact
> that it's not really nice to redefine low-level macros, but I'll try
> to keep up with low-level changes, should any accur) ;)

Or persuade Hans to have a proper version in the core :)

Aditya
-------------- next part --------------
\setupcolors[state=start]

\usetypescriptfile[type-gyr]
\usetypescript[times][texnansi]
\setupbodyfont[times,8pt]

\def\BEFORE#1{\math{\underline{#1}}}
\def\AT#1{\math{#1}}
\def\AFTER#1{\math{\smash{\overline{#1}}}\vphantom{#1}}

\defineframed
  [parbox]
  [frame=off, width=2cm, autowidth=force, align=middle, background=color,
  backgroundcolor=white]

\definetextext[parbox]{\framed[frame=off, width=2cm, autowidth=force, align=middle, background=color, backgroundcolor=white]}

\starttext
\startMPpage
% Color for drawing helplines  
color helpcolor ; helpcolor := 0.5*white ;

% Scaling
u := 2cm ;        e := .1u ;

% Constants

xmax  :=  5u ;    ymax  := -3u ;
xstep := .5u ;    ystep := -.5u ;

xbefore := 2*xstep ;
xat     := 6*xstep ;
xafter  := xmax - 2*xstep ;

W := 0 ;
X := xstep ;
Z := 3*xstep ;
N := 4*xstep ;
Y := 5*xstep ;
M := 7*xstep ;
U := 9*xstep ;

c := xbefore + e ;
l := xat     + e ;
g := xafter  + e ;

path xline , yline , xshort;

xline := (-xstep,0) -- (xmax + xstep,0) ;
xshort:= (0,0) -- (xmax,0) ;
yline := (0,-0.8*ystep) -- (0,ymax + 0.5*ystep) ;


draw yline ;
draw yline shifted (xmax,0) ;

for i = 0 upto 6 :
  drawarrow xline shifted (0, i*ystep) ;
endfor ;

drawdblarrow xshort shifted (0, -0.6*ystep) ;

drawoptions(dashed evenly withcolor helpcolor) ;
draw yline shifted (xbefore,0) ;
draw yline shifted (xat,0) ;
draw yline shifted (xafter,0) ;

drawoptions() ;

y := 0 ;

dotlabel.top(\sometxt[parbox]{$t^+$},       (xbefore,y) ) ;
dotlabel.top(\sometxt[parbox]{$(t+1/2)$},   (xat,y)     ) ;
dotlabel.top(\sometxt[parbox]{$(t+1)^-$},  (xafter,y)  ) ;

y := ystep ;

dotlabel.top(\sometxt[parbox]{$\BEFORE t$}, (xbefore,y) ) ;
dotlabel.top(\sometxt[parbox]{$\AT t$},     (xat,y)     ) ;
dotlabel.top(\sometxt[parbox]{$\AFTER t$},  (xafter,y)  ) ;

y := 2*ystep ;

dotlabel.top(\sometxt[parbox]{$W_{t-1}$}, (W,y) ) ;
dotlabel.top(\sometxt[parbox]{$X_t$}, (X,y) ) ;
dotlabel.top(\sometxt[parbox]{$Z_t$}, (Z,y) ) ;
dotlabel.top(\sometxt[parbox]{$N_t$}, (N,y) ) ;
dotlabel.top(\sometxt[parbox]{$Y_t$}, (Y,y) ) ;
dotlabel.top(\sometxt[parbox]{$M_t$}, (M,y) ) ;
dotlabel.top(\sometxt[parbox]{$U_t$}, (U,y) ) ;

y := 3*ystep ;

dotlabel.bot(\sometxt[parbox]{$c_t$}, (c,y) ) ;
dotlabel.bot(\sometxt[parbox]{$l_t$}, (l,y) ) ;
dotlabel.bot(\sometxt[parbox]{$g_t$}, (g,y) ) ;

y := 4*ystep ;

dotlabel.top(\sometxt[parbox]{$\BEFORE I_t$}, (xbefore,y) ) ;
dotlabel.top(\sometxt[parbox]{$\AT I_t$},     (xat,y)     ) ;
dotlabel.top(\sometxt[parbox]{$\AFTER I_t$},  (xafter,y)  ) ;

y := 5*ystep ;

dotlabel.top(\sometxt[parbox]{$\BEFORE B_t$}, (xbefore,y) ) ;
dotlabel.top(\sometxt[parbox]{$\AT B_t$},     (xat,y)     ) ;
dotlabel.top(\sometxt[parbox]{$\AFTER B_t$},  (xafter,y)  ) ;

y := 6*ystep ;

dotlabel.top(\sometxt[parbox]{$\BEFORE \pi_t$}, (xbefore,y) ) ;
dotlabel.top(\sometxt[parbox]{$\AT \pi_t$},     (xat,y)     ) ;
dotlabel.top(\sometxt[parbox]{$\AFTER \pi_t$},  (xafter,y)  ) ;


label.lft(\sometxt[parbox]{actual time},       (-xstep, 0) ) ; 
label.lft(\sometxt[parbox]{time notation},     (-xstep, ystep) ) ;
label.lft(\sometxt[parbox]{System Variables},  (-xstep, 2*ystep) ) ;
label.lft(\sometxt[parbox]{Design Laws},       (-xstep, 3*ystep) ) ;
label.lft(\sometxt[parbox]{Information at the controller},
                                                (-xstep, 4*ystep) ) ;
label.lft(\sometxt[parbox]{Beliefs},           (-xstep, 5*ystep) ) ;
label.lft(\sometxt[parbox]{Information States},(-xstep, 6*ystep) ) ;

label.top(\sometxt[parbox]{Stage $t$}, (0.5*xmax,-0.6*ystep)) ;

\stopMPpage


\stoptext

From pragma at wxs.nl  Wed Jan 31 12:04:19 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 31 Jan 2007 12:04:19 +0100
Subject: [dev-context] new MyWay about \sometxt
In-Reply-To: <alpine.WNT.0.82.0701302149420.3192@nqvgln>
References: <6faad9f00701291650w633e315dr5036587bdae5f9cc@mail.gmail.com>
	<alpine.WNT.0.82.0701292325540.2704@nqvgln>
	<6faad9f00701300634o3f615a3fqe90a6207a4a730c4@mail.gmail.com>
	<alpine.WNT.0.82.0701302149420.3192@nqvgln>
Message-ID: <45C077B3.5060105@wxs.nl>

Aditya Mahajan wrote:
>
> It can be configurable. Maybe something like
>
> \defineopttextext[whatever]{\command}
>
> so that with \sometxt[whatever][2nd arg]{stuff} translates to 
> \command[2nd ard]{stuff} and \sometxt[whatever]{stuff} translates to 
> \command{stuff}.
>
> That would involve more work to write the macro \command, but will 
> provide more flexibility.
optional stuff is tricky in macros that (in the mp graphic expansion) 
need to be fully expandable ... in mkiv i will write another 
preprocessor and then such things may be feasible
>
>> But your current code is more than enough for me (apart from the fact
>> that it's not really nice to redefine low-level macros, but I'll try
>> to keep up with low-level changes, should any accur) ;)
>
> Or persuade Hans to have a proper version in the core :)
remind me to look at it -) 

Hans  

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From sanjoy at mrao.cam.ac.uk  Fri Feb  2 16:29:04 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Fri, 02 Feb 2007 15:29:04 +0000
Subject: [dev-context] wandering positional graphic
In-Reply-To: Your message of "Fri, 26 Jan 2007 00:20:40 EST."
	<E1HAJVw-0001sB-Ck@approximate.corpus.cam.ac.uk> 
Message-ID: <E1HD0LY-0006bK-00@skye.ra.phy.cam.ac.uk>

Any ideas on the wandering positional graphic?  I'm happy to make more
tests, but so far my theory is that they are being positioned relative
to the printing page edges (rather than to the typesetting page
edges).

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From preining at logic.at  Fri Feb  2 17:57:24 2007
From: preining at logic.at (Norbert Preining)
Date: Fri, 2 Feb 2007 17:57:24 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <45B71A0C.7070808@elvenkind.com>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<45B677B1.7020103@elvenkind.com>
	<20070123212832.GB12597@gamma.logic.tuwien.ac.at>
	<45B6859A.1020609@elvenkind.com>
	<20070123221903.GI12597@gamma.logic.tuwien.ac.at>
	<20070123223349.GJ12597@gamma.logic.tuwien.ac.at>
	<45B71A0C.7070808@elvenkind.com>
Message-ID: <20070202165724.GB20171@gamma.logic.tuwien.ac.at>

Hi all!

Just to recap: Should I upload new context package to Debian, as it asks
unconditionally for lm math fonts.

On Mit, 24 Jan 2007, Taco Hoekwater wrote:
> >Aemm, I could compile all my test cases even without lm-math fonts
> >available (I am using the texlive 2005 Debian packages).
> >
> 
> You probably have something extra (or a file from an older context
> release) that is read instead of the one from the latest context.
> 
> My tests all include  </opt/tex/texmf/fonts/type1/public/lm/lmsy10.pfb>
> etc.

Ok, I got it. Sorry for missing this: The point is that Debian has
	lmodern 1.00
installed, which seems to include the math fonts. 

Do you know, have there been important changes between 1.00 and 1.010
concerning this stuff? And if not, we could also think about uploading
another package for lmodern to Debian, but this is for Florent.

If not, then I just upload and add a dependency on lmodern >= 1.00 which
should be enough.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
ARTHUR	What is an Algolian Zylatburger anyway?
FORD	They're a kind of meatburger made from the most unpleasant parts
	of a creature well known for its total lack of any pleasant
	parts.
ARTHUR	So you mean that the Universe does actually end not with a bang
	but with a Wimpy?
                 --- Cut dialogue from Fit the Fifth.
                 --- Douglas Adams, The Hitchhikers Guide to the Galaxy

From taco at elvenkind.com  Fri Feb  2 19:10:59 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 02 Feb 2007 19:10:59 +0100
Subject: [dev-context] wandering positional graphic
In-Reply-To: <E1HD0LY-0006bK-00@skye.ra.phy.cam.ac.uk>
References: <E1HD0LY-0006bK-00@skye.ra.phy.cam.ac.uk>
Message-ID: <45C37EB3.2060603@elvenkind.com>

Sanjoy Mahajan wrote:
> Any ideas on the wandering positional graphic?  I'm happy to make more
> tests, but so far my theory is that they are being positioned relative
> to the printing page edges (rather than to the typesetting page
> edges).

This is not my cup of tea, sorry.

Best, Taco

From taco at elvenkind.com  Fri Feb  2 19:11:59 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 02 Feb 2007 19:11:59 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <20070202165724.GB20171@gamma.logic.tuwien.ac.at>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<45B677B1.7020103@elvenkind.com>
	<20070123212832.GB12597@gamma.logic.tuwien.ac.at>
	<45B6859A.1020609@elvenkind.com>
	<20070123221903.GI12597@gamma.logic.tuwien.ac.at>
	<20070123223349.GJ12597@gamma.logic.tuwien.ac.at>
	<45B71A0C.7070808@elvenkind.com>
	<20070202165724.GB20171@gamma.logic.tuwien.ac.at>
Message-ID: <45C37EEF.7050709@elvenkind.com>

Norbert Preining wrote:
> Hi all!
> 
> Just to recap: Should I upload new context package to Debian, as it asks
> unconditionally for lm math fonts.
> 
> On Mit, 24 Jan 2007, Taco Hoekwater wrote:
> 
>>>Aemm, I could compile all my test cases even without lm-math fonts
>>>available (I am using the texlive 2005 Debian packages).
>>>
>>
>>You probably have something extra (or a file from an older context
>>release) that is read instead of the one from the latest context.
>>
>>My tests all include  </opt/tex/texmf/fonts/type1/public/lm/lmsy10.pfb>
>>etc.
> 
> 
> Ok, I got it. Sorry for missing this: The point is that Debian has
> 	lmodern 1.00
> installed, which seems to include the math fonts. 
> 
> Do you know, have there been important changes between 1.00 and 1.010
> concerning this stuff? And if not, we could also think about uploading
> another package for lmodern to Debian, but this is for Florent.

No big changes that I know of.

Best,
Taco

From preining at logic.at  Fri Feb  2 20:10:07 2007
From: preining at logic.at (Norbert Preining)
Date: Fri, 2 Feb 2007 20:10:07 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
Message-ID: <20070202191007.GA32594@gamma.logic.tuwien.ac.at>

Hi all!

On Die, 23 Jan 2007, Norbert Preining wrote:
> I have uploaded new context packages 2007.01.23-1 BUT ONLY TO THE
> tug.org server!! Not to Debian till now.

After clearing up the questions I had wrt the lm math fonts I have
uploaded new -1 packages to the tug server AND to Debian. The only
change is an added dependency on
	lmodern (>= 1.00)
to get lm math fonts. So these packages work on Debian/sid.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
BRECON
That part of the toenail which is designed to snag on nylon sheets.
			--- Douglas Adams, The Meaning of Liff

From mgb-debian at yosemite.net  Fri Feb  2 20:51:57 2007
From: mgb-debian at yosemite.net (Mike Bird)
Date: Fri, 2 Feb 2007 11:51:57 -0800
Subject: [dev-context] New Debian packages
In-Reply-To: <20070202165724.GB20171@gamma.logic.tuwien.ac.at>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<45B71A0C.7070808@elvenkind.com>
	<20070202165724.GB20171@gamma.logic.tuwien.ac.at>
Message-ID: <200702021151.59446.mgb-debian@yosemite.net>

On Friday 02 February 2007 08:57, Norbert Preining wrote:
> Just to recap: Should I upload new context package to Debian, as it asks
> unconditionally for lm math fonts.

Norbert,

Given the various font handling problems reported with the
newer contexts, it would be unfortunate if the Debian world
were to lose context_2007.01.12.2-1_all.deb at this time.

--Mike Bird

From preining at logic.at  Fri Feb  2 20:54:14 2007
From: preining at logic.at (Norbert Preining)
Date: Fri, 2 Feb 2007 20:54:14 +0100
Subject: [dev-context] New Debian packages
In-Reply-To: <200702021151.59446.mgb-debian@yosemite.net>
References: <20070123190537.GA1958@gamma.logic.tuwien.ac.at>
	<45B71A0C.7070808@elvenkind.com>
	<20070202165724.GB20171@gamma.logic.tuwien.ac.at>
	<200702021151.59446.mgb-debian@yosemite.net>
Message-ID: <20070202195414.GB32594@gamma.logic.tuwien.ac.at>

On Fre, 02 Feb 2007, Mike Bird wrote:
> Given the various font handling problems reported with the
> newer contexts, it would be unfortunate if the Debian world
> were to lose context_2007.01.12.2-1_all.deb at this time.

Aehmm ... did I miss something? I didn't hear about this problems.
Anyway too late ... you can always get it at tug.org

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
DRAFFAN (n.)
An infuriating person who always manages to look much more dashing
that anyone else by turning up unshaven and hangover at a formal
party.
			--- Douglas Adams, The Meaning of Liff

From adityam at umich.edu  Sat Feb  3 01:33:51 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 2 Feb 2007 19:33:51 -0500 (EST)
Subject: [dev-context] \rm in pmod, bmod, etc
Message-ID: <alpine.WNT.0.82.0702021929200.2280@nqvgln>

Hi Hans and Taco,

  Do you think it makes sense to replace {\rm mod} in the definition of 
bmod and pmod (in math-pln.tex) by \mfunction{mod}?

Aditya

From adityam at umich.edu  Sat Feb  3 02:13:49 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 2 Feb 2007 20:13:49 -0500 (EST)
Subject: [dev-context] \rm in pmod, bmod, etc
In-Reply-To: <alpine.WNT.0.82.0702021929200.2280@nqvgln>
References: <alpine.WNT.0.82.0702021929200.2280@nqvgln>
Message-ID: <alpine.WNT.0.82.0702022004030.2280@nqvgln>

On Fri, 2 Feb 2007, Aditya Mahajan wrote:

> Hi Hans and Taco,
>
>  Do you think it makes sense to replace {\rm mod} in the definition of
> bmod and pmod (in math-pln.tex) by \mfunction{mod}?

Another request: I am thinking of updating the nath module, and I 
notice that nath.sty goes into considerable length to make math 
commands "robust" (whatever that means). Basically

\def\makerobust#1{%
  \expandafter\let\csname @o@\expandafter\gobbleoneargument\string #1\endcsname=#1
  \unexpanded\def#1{\csname @o@\expandafter\gobbleoneargument\string #1\endcsname}}

% Making composed math symbols robust:

\makerobust\cong
\makerobust\notin

If I understand correctly, this can be achieved by replace

\def\cong to \undexpanded\def\cong in math-pln.

I do not understand expansion very well, but is there a disadvantage 
of not defining math characters to be unexpandable to begin with?


Aditya



From adityam at umich.edu  Sat Feb  3 02:35:27 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 2 Feb 2007 20:35:27 -0500 (EST)
Subject: [dev-context] \rm in pmod, bmod, etc
In-Reply-To: <alpine.WNT.0.82.0702022004030.2280@nqvgln>
References: <alpine.WNT.0.82.0702021929200.2280@nqvgln>
	<alpine.WNT.0.82.0702022004030.2280@nqvgln>
Message-ID: <alpine.WNT.0.82.0702022021260.2280@nqvgln>

On Fri, 2 Feb 2007, Aditya Mahajan wrote:

> On Fri, 2 Feb 2007, Aditya Mahajan wrote:
>
>> Hi Hans and Taco,
>>
>>  Do you think it makes sense to replace {\rm mod} in the definition of
>> bmod and pmod (in math-pln.tex) by \mfunction{mod}?
>
> Another request: I am thinking of updating the nath module, and I

Another one: Nath defines \stackrel and \underset. I think that these 
should go to the core

\def\stackrel#1#2{\mathrel{\mathop{#2}\limits^{#1}}}

See the note below:

\def\overset#1#2{\mathrel{\mathop{#2}\limits^{#1}}}
\def\underset#1#2{\mathrel{\mathop{#2}\limits_{#1}}}



amsmath.sty goes into a lot of pains to define overset and underset, 
basically to decide whether to use mathrel or mathbin in the above. Do 
we need such an elaborate definition? This is amsmath's definition:


\def\binrel@#1{\begingroup
   \setboxz at h{\thinmuskip0mu
     \medmuskip\m at ne mu\thickmuskip\@ne mu
     \setbox\tw@\hbox{$#1\m at th$}\kern-\wd\tw@
     ${}#1{}\m at th$}%
   \edef\@tempa{\endgroup\let\noexpand\binrel@@
     \ifdim\wdz@<\z@ \mathbin
     \else\ifdim\wdz@>\z@ \mathrel
     \else \relax\fi\fi}%
   \@tempa
}

\newcommand{\overset}[2]{\binrel@{#2}%
   \binrel@@{\mathop{\kern\z@#2}\limits^{#1}}}
\newcommand{\underset}[2]{\binrel@{#2}%
   \binrel@@{\mathop{\kern\z@#2}\limits_{#1}}}


Aditya




From sanjoy at mrao.cam.ac.uk  Sat Feb  3 02:53:58 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Sat, 03 Feb 2007 01:53:58 +0000
Subject: [dev-context] wandering positional graphic
In-Reply-To: Your message of "Fri, 02 Feb 2007 19:10:59 +0100."
	<45C37EB3.2060603@elvenkind.com> 
Message-ID: <E1HDA6I-0003I1-00@skye.ra.phy.cam.ac.uk>

I'll rummage in the code and see what I can find.

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From taco at elvenkind.com  Sat Feb  3 08:58:25 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 03 Feb 2007 08:58:25 +0100
Subject: [dev-context] \rm in pmod, bmod, etc
In-Reply-To: <alpine.WNT.0.82.0702021929200.2280@nqvgln>
References: <alpine.WNT.0.82.0702021929200.2280@nqvgln>
Message-ID: <45C440A1.2070005@elvenkind.com>

Aditya Mahajan wrote:
> Hi Hans and Taco,
> 
>   Do you think it makes sense to replace {\rm mod} in the definition of 
> bmod and pmod (in math-pln.tex) by \mfunction{mod}?

Yes. It would even better to move the definitions to math-tex,
where the other named operators live.

Taco

From taco at elvenkind.com  Sat Feb  3 09:06:02 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 03 Feb 2007 09:06:02 +0100
Subject: [dev-context] \rm in pmod, bmod, etc
In-Reply-To: <alpine.WNT.0.82.0702022004030.2280@nqvgln>
References: <alpine.WNT.0.82.0702021929200.2280@nqvgln>
	<alpine.WNT.0.82.0702022004030.2280@nqvgln>
Message-ID: <45C4426A.5040400@elvenkind.com>

Aditya Mahajan wrote:
> On Fri, 2 Feb 2007, Aditya Mahajan wrote:
> 
> 
>>Hi Hans and Taco,
>>
>> Do you think it makes sense to replace {\rm mod} in the definition of
>>bmod and pmod (in math-pln.tex) by \mfunction{mod}?
> 
> 
> Another request: I am thinking of updating the nath module, and I 
> notice that nath.sty goes into considerable length to make math 
> commands "robust" (whatever that means). Basically
> 
> \def\makerobust#1{%
>   \expandafter\let\csname @o@\expandafter\gobbleoneargument\string #1\endcsname=#1
>   \unexpanded\def#1{\csname @o@\expandafter\gobbleoneargument\string #1\endcsname}}
> 
> % Making composed math symbols robust:
> 
> \makerobust\cong
> \makerobust\notin
> 
> If I understand correctly, this can be achieved by replace
> 
> \def\cong to \undexpanded\def\cong in math-pln.

The \makerobust command is simply

    \let\@o at cong=\cong
    \unexpanded\def\cont{\@o at cong}

> I do not understand expansion very well, but is there a disadvantage 
> of not defining math characters to be unexpandable to begin with?

Every (or almost every, let's be a bit careful) macro in math mode
could be make unexpandable.


Taco

From taco at elvenkind.com  Sat Feb  3 09:19:38 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 03 Feb 2007 09:19:38 +0100
Subject: [dev-context] \rm in pmod, bmod, etc
In-Reply-To: <alpine.WNT.0.82.0702022021260.2280@nqvgln>
References: <alpine.WNT.0.82.0702021929200.2280@nqvgln>	<alpine.WNT.0.82.0702022004030.2280@nqvgln>
	<alpine.WNT.0.82.0702022021260.2280@nqvgln>
Message-ID: <45C4459A.1080002@elvenkind.com>

Aditya Mahajan wrote:
> 
> Another one: Nath defines \stackrel and \underset. I think that these 
> should go to the core
> 
> \def\stackrel#1#2{\mathrel{\mathop{#2}\limits^{#1}}}
> 
> See the note below:
> 
> \def\overset#1#2{\mathrel{\mathop{#2}\limits^{#1}}}
> \def\underset#1#2{\mathrel{\mathop{#2}\limits_{#1}}}
> 
> amsmath.sty goes into a lot of pains to define overset and underset, 
> basically to decide whether to use mathrel or mathbin in the above. Do 
> we need such an elaborate definition? This is amsmath's definition:

Yes, I believe that is wise. Spacing around ords and bins and rels is
different, and \overset and \underset should not influence that spacing.

The \binrel@ macro is ugly, but the most efficient and robust way
of testing this is through trial typesetting. \binrel@ changes
the definition of \binrel@@ to be one of \mathbin, \mathrel, or
\relax, as needed.

So, better to put the ams definition in the core. Assuming I didn't
make any typos, it should look like this:

\def\binrel@#1%
   {\begingroup
    \setbox0=\hbox
       {\thinmuskip 0mu
        \medmuskip -1mu
        \thickmuskip -1mu
        \setbox2=\hbox{$#1\mathsurround0pt$}%
        \kern -wd2
        ${}#1{}\mathsurround0pt$}%
    \edef\@tempa
      {\endgroup
       \let\noexpand\binrel@@
       \ifdim\wd0<0pt
         \mathbin
       \else \ifdim\wd0>\z@
          \mathrel
       \else
          \relax
       \fi\fi }%
    \@tempa  }


Best, taco

> 
> \def\binrel@#1{\begingroup
>    \setboxz at h{\thinmuskip0mu
>      \medmuskip\m at ne mu\thickmuskip\@ne mu
>      \setbox\tw@\hbox{$#1\m at th$}\kern-\wd\tw@
>      ${}#1{}\m at th$}%
>    \edef\@tempa{\endgroup\let\noexpand\binrel@@
>      \ifdim\wdz@<\z@ \mathbin
>      \else\ifdim\wdz@>\z@ \mathrel
>      \else \relax\fi\fi}%
>    \@tempa
> }
> 
> \newcommand{\overset}[2]{\binrel@{#2}%
>    \binrel@@{\mathop{\kern\z@#2}\limits^{#1}}}
> \newcommand{\underset}[2]{\binrel@{#2}%
>    \binrel@@{\mathop{\kern\z@#2}\limits_{#1}}}
> 
> 
> Aditya
> 
> 
> 
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context


From taco at elvenkind.com  Sat Feb  3 10:37:05 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 03 Feb 2007 10:37:05 +0100
Subject: [dev-context] \rm in pmod, bmod, etc
In-Reply-To: <45C4459A.1080002@elvenkind.com>
References: <alpine.WNT.0.82.0702021929200.2280@nqvgln>	<alpine.WNT.0.82.0702022004030.2280@nqvgln>	<alpine.WNT.0.82.0702022021260.2280@nqvgln>
	<45C4459A.1080002@elvenkind.com>
Message-ID: <45C457C1.4010300@elvenkind.com>



It is cleaner when renamed a little:

Taco Hoekwater wrote:
> 
> \def\binrel@#1%
   \def\preparebinrel#1%
>    {\begingroup
>     \setbox0=\hbox
>        {\thinmuskip 0mu
>         \medmuskip -1mu
>         \thickmuskip -1mu
>         \setbox2=\hbox{$#1\mathsurround0pt$}%
>         \kern -wd2
>         ${}#1{}\mathsurround0pt$}%
>     \edef\@tempa
>       {\endgroup
>        \let\noexpand\binrel@@
          \let\noexpand\currentbinrel
>        \ifdim\wd0<0pt
>          \mathbin
>        \else \ifdim\wd0>\z@
>           \mathrel
>        \else
>           \relax
>        \fi\fi }%
>     \@tempa  }

And:

\unexpanded\def\overset#1#2%
    {\preparebinrel{#2}%
     \currentbinrel{\mathop{\kern\z@#2}\limits^{#1}}}

Best, Taco



From pragma at wxs.nl  Sat Feb  3 22:18:09 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 03 Feb 2007 22:18:09 +0100
Subject: [dev-context] \rm in pmod, bmod, etc
In-Reply-To: <alpine.WNT.0.82.0702021929200.2280@nqvgln>
References: <alpine.WNT.0.82.0702021929200.2280@nqvgln>
Message-ID: <45C4FC11.7080109@wxs.nl>

Aditya Mahajan wrote:
> Hi Hans and Taco,
>
>   Do you think it makes sense to replace {\rm mod} in the definition of 
> bmod and pmod (in math-pln.tex) by \mfunction{mod}?
>   

\ifx\mfunction\undefined \def\mfunction{\mathbin{\rm#1}} \fi

\def\bmod
  {\nonscript
   \mskip-\medmuskip
   \mkern5mu
   \mfunction{mod}%
   \penalty900
   \mkern5mu
   \nonscript
   \mskip-\medmuskip}

\def\pmod#1%
  {\allowbreak
   \mkern18mu
   (\mfunction{mod}\,\,#1)}

i changed it (wondering what it does in pln)

Hans

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Sat Feb  3 22:21:15 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 03 Feb 2007 22:21:15 +0100
Subject: [dev-context] \rm in pmod, bmod, etc
In-Reply-To: <45C440A1.2070005@elvenkind.com>
References: <alpine.WNT.0.82.0702021929200.2280@nqvgln>
	<45C440A1.2070005@elvenkind.com>
Message-ID: <45C4FCCB.30700@wxs.nl>

Taco Hoekwater wrote:
> Aditya Mahajan wrote:
>   
>> Hi Hans and Taco,
>>
>>   Do you think it makes sense to replace {\rm mod} in the definition of 
>> bmod and pmod (in math-pln.tex) by \mfunction{mod}?
>>     
>
> Yes. It would even better to move the definitions to math-tex,
> where the other named operators live.
>   
makes sense, rather encoding independent eh? 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From adityam at umich.edu  Sun Feb  4 00:44:49 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Sat, 3 Feb 2007 18:44:49 -0500 (EST)
Subject: [dev-context] \rm in pmod, bmod, etc
In-Reply-To: <45C4FC11.7080109@wxs.nl>
References: <alpine.WNT.0.82.0702021929200.2280@nqvgln>
	<45C4FC11.7080109@wxs.nl>
Message-ID: <alpine.WNT.0.82.0702031835030.3056@nqvgln>

On Sat, 3 Feb 2007, Taco Hoekwater wrote:

> Aditya Mahajan wrote:
>> Hi Hans and Taco,
>>
>>   Do you think it makes sense to replace {\rm mod} in the definition of 
>> bmod and pmod (in math-pln.tex) by \mfunction{mod}?
>
> Yes. It would even better to move the definitions to math-tex,
> where the other named operators live.
>
On Sat, 3 Feb 2007, Hans Hagen wrote:
> makes sense, rather encoding independent eh? 
>
> \ifx\mfunction\undefined \def\mfunction{\mathbin{\rm#1}} \fi

Why the mathbin? In math-ini.tex \mfunction is defined as
\def\mfunction#1{{\mr#1}}.

> \def\bmod
> {\nonscript
>  \mskip-\medmuskip
>  \mkern5mu
>  \mfunction{mod}%
>  \penalty900
>  \mkern5mu
>  \nonscript
>  \mskip-\medmuskip}
>
> \def\pmod#1%
> {\allowbreak
>  \mkern18mu
>  (\mfunction{mod}\,\,#1)}

How about replacing \, with \mskup\thinskip? That will be the macro 
more readable.

> i changed it

Thanks.

> (wondering what it does in pln)

Probably because it is defined by plain.tex

Aditya

From adityam at umich.edu  Sun Feb  4 00:52:39 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Sat, 3 Feb 2007 18:52:39 -0500 (EST)
Subject: [dev-context] \rm in pmod, bmod, etc
In-Reply-To: <45C457C1.4010300@elvenkind.com>
References: <alpine.WNT.0.82.0702021929200.2280@nqvgln>
	<alpine.WNT.0.82.0702022004030.2280@nqvgln>
	<alpine.WNT.0.82.0702022021260.2280@nqvgln>
	<45C4459A.1080002@elvenkind.com> <45C457C1.4010300@elvenkind.com>
Message-ID: <alpine.WNT.0.82.0702031845370.3056@nqvgln>

On Sat, 3 Feb 2007, Taco Hoekwater wrote:

> It is cleaner when renamed a little:

So the following macros can go into the core

>> \def\binrel@#1%
>  \def\preparebinrel#1%
>>    {\begingroup
>>     \setbox0=\hbox
>>        {\thinmuskip 0mu
>>         \medmuskip -1mu
>>         \thickmuskip -1mu
>>         \setbox2=\hbox{$#1\mathsurround0pt$}%
>>         \kern -wd2
>>         ${}#1{}\mathsurround0pt$}%
>>     \edef\@tempa
>>       {\endgroup
>>        \let\noexpand\binrel@@
>         \let\noexpand\currentbinrel
>>        \ifdim\wd0<0pt
>>          \mathbin
>>        \else \ifdim\wd0>\z@
>>           \mathrel
>>        \else
>>           \relax
>>        \fi\fi }%
>>     \@tempa  }
>
> And:
>
> \unexpanded\def\overset#1#2%
>   {\preparebinrel{#2}%
>    \currentbinrel{\mathop{\kern\z@#2}\limits^{#1}}}
>

\unexpanded\def\underset#1#2%
    {\preparebinrel{#2}%
     \currentbinrel{\mathop{\kern\z@#2}\limits_{#1}}}

\unexpanded\def\stackrel#1#2%
    {\mathrel{\mathop{#2}\limits^{#1}}}

or

\unexpanded\def\stackrel#1#2%
   {\buildrel#1\over#2}


And the following definitions in math-pln can be defined as unexpanded

\def\doteq

\def\cong

\def\notin

And the following in math-ini should change \rm to \mfunction

   \definemathcommand [unic at eulerconstant]             {{\rm e}}

   \definemathcommand [unic at eqbydef]               {\buildrel \rm def 
\over =}
   \definemathcommand [unic at measuredby]            {\buildrel \rm m 
\over =}
   \definemathcommand [unic at questionedeq]          {\buildrel \rm ? 
\over =}

Aditya

From karl at huftis.org  Sun Feb  4 15:00:46 2007
From: karl at huftis.org (Karl Ove Hufthammer)
Date: Sun, 04 Feb 2007 15:00:46 +0100
Subject: [dev-context] Improved support for Norwegian in ConTeXt
Message-ID: <200702041500.47359.karl@huftis.org>

I'm writing this to suggest improvements in ConTeXt's support for the 
Norwegian languages. ConTeXt already has rudimentary support for Norwegian, 
but with some problems.


Language codes
--------------

The main problem is that ConTeXt use the language code 'no' for Norwegian. 
There actually *is* no written language called 'Norwegian'; Norway has two 
official written languages, Norwegian Bokm?l (ISO 639 language code 'nb') and 
Norwegian Nynorsk (ISO 639 language code 'nn'). The current definitions 
for 'no' in ConTeXt is for Norwegian Bokm?l. (There is a ISO 639 language 
code 'no' for Norwegian, but this should usually be used for spoken 
Norwegian, or perhaps for transcriptions of spoken language.)

The language code 'no' should be removed, and be replaced by the two language 
codes 'nb' and 'nn'.

See http://en.wikipedia.org/wiki/Norwegian_language for a (not too good) 
article on the Norwegian languages.

For the record, the language names used in LaTeX/Babel is 
(unfortunately) 'Norwegian' and 'norsk' for Norwegian Bokm?l, and 'nynorsk' 
for Norwegian Nynorsk, instead of 'bokmal'/'bokm?l' and 'nynorsk'. Norwegian 
Bokm?l support was added first, and used up the 'Norwegian' name.


Hyphenation
-----------

The two written language are quite similar, and the current hyphenation 
dictionary (nohyphbx) was made to support both. But there are (at least) two 
words which are put in the hyphenation exceptions for this dictionary because 
they would have different hyphenation (because of different meaning) in 
Norwegian Nynorsk and Norwegian Bokm?l. These are:

attende -- nb: at-ten-de ('eighteenth'),       nn: att-en-de ('back')
betre   -- nb: be-tre ('enter'/'set foot on'), nn: bet-re ('better')

Would it be possible to have two different hyphenation dictionaries for 'nb' 
and 'nn', which would only differ in the hyphenation exceptions used for 
these two words?


Language setup
--------------

Here is an improved/correct version of the language setup for Norwegian. The 
setup for 'no' should be removed.

\installlanguage
  [nn]
  [spacing=packed,
   lefthyphenmin=2,
   righthyphenmin=2,
   leftsentence=---,
   rightsentence=---,
   leftsubsentence=---,
   rightsubsentence=---,
   leftquote=\upperleftsinglesixquote,
   rightquote=\upperrightsingleninequote,
   leftquotation=\leftguillemot,
   rightquotation=\rightguillemot,
   date={day,{.},\ ,month,\ ,year},
   state=stop]

This is for Norwegian Nynorsk ('nn'), but the same setup is used for Norwegian 
Bokm?l (the values used for 'day' differ, though -- see below).

But I am not sure I understand what the four *sentence commands are used for. 
We usually don't use em-dashes in Norwegian, so the entries look incorrect. 
If you can explain what the commands are used for, I can supply the correct 
Norwegian definitions.

I also noticed that the Italian definitions use leftspeech, middlespeech and 
rightspeech commands. What are these used for?


Other language-specific settings
--------------------------------

Norwegian (Bokm?l and Nynorsk) differs typographically from English in several 
other ways. Here is three of them:

We don't (usually) use bullets for the first level of unnumbered lists; we use 
en-dashes.

-- Item 1
-- Item 2
-- Item 3

Bullets are commonly seen in document created by word processors of US origin, 
and in the documents created by people without proper typographic training, 
though. It would be nice if ConTeXt could use en-dashes by default for lists 
in Norwegian text.

We don't use full stops in numbered lists. In other words, instead of

1. Item 1
2. Item 2
3. Item 3

we write

1  Item 1
2  Item 2
3  Item 3

The same holds for numbered headings, both in the main text and in the TOC.

Would it be possible to support this by default in ConTeXt?

We also use the comma in decimal numbers (3,14 instead of 3.14).


Norwegian labels
----------------

Here is labels for Norwegian (Bokm?l and Nynorsk). The old 'no' labels should 
be removed. The 'nb' ones are taken from the 'no' ones, but with some 
corrections.

Some comments: We don't usually capitalise the first letter in 
crossreferences. Where one would in English write

See Figure 5.22 ...

we would write

Se figur 5.22 ... (Bokm?l)
Sj? figur 5.22 ... (Nynorsk)

But we would of course write

Figur 5.22 viser ...
(Figure 5.22 shows ...)

The definitions below use a capital first letter. Will this be a problem?

I was also unsure about what the 'lines' label should be. The plural of 'line' 
('linje') in Norwegian (both 'nb' and 'nn') is 'linjer', but we do not use 
the plural when referencing more than one line. Where one would write

The discussion on lines 5--13 ...

in English, we would write

Dr?ftinga p? linje 5--13 ...

in Norwegian. In other words, we use the singular instead of the plural. The 
same holds for the other cross-referencing terms ('Figure', 'Table' &c.).

Feel free to change the 'lines' label to 'linje' if this make it work better.


\setupheadtext [\s!nb] [\v!content=Innhold]
\setupheadtext [\s!nn] [\v!content=Innhald]

\setupheadtext [\s!nb] [\v!tables=Tabeller]
\setupheadtext [\s!nn] [\v!tables=Tabellar]

\setupheadtext [\s!nb] [\v!figures=Figurer]
\setupheadtext [\s!nn] [\v!figures=Figurar]

\setupheadtext [\s!nb] [\v!graphics=Bilde]
\setupheadtext [\s!nn] [\v!graphics=Bilete]

\setupheadtext [\s!nb] [\v!intermezzi=Intermesso]
\setupheadtext [\s!nn] [\v!intermezzi=Intermesso]

\setupheadtext [\s!nb] [\v!index=Register]
\setupheadtext [\s!nn] [\v!index=Register]

\setupheadtext [\s!nb] [\v!abbreviations=Forkortelser]
\setupheadtext [\s!nn] [\v!abbreviations=Forkortingar]

\setupheadtext [\s!nb] [\v!logos=Logoer]
\setupheadtext [\s!nn] [\v!logos=Logoar]

\setupheadtext [\s!nb] [\v!units=Enheter]
\setupheadtext [\s!nn] [\v!units=Einingar]

\setuplabeltext [\s!nb] [\v!table=Tabell ]
\setuplabeltext [\s!nn] [\v!table=Tabell ]

\setuplabeltext [\s!nb] [\v!figure=Figur ]
\setuplabeltext [\s!nn] [\v!figure=Figur ]

\setuplabeltext [\s!nb] [\v!intermezzo=Intermesso ]
\setuplabeltext [\s!nn] [\v!intermezzo=Intermesso ]

\setuplabeltext [\s!nb] [\v!graphic=Bilde ]
\setuplabeltext [\s!nn] [\v!graphic=Bilete ]

\setuplabeltext [\s!nb] [\v!chapter=]
\setuplabeltext [\s!nn] [\v!chapter=]

\setuplabeltext [\s!nb] [\v!section=]
\setuplabeltext [\s!nn] [\v!section=]

\setuplabeltext [\s!nb] [\v!subsection=]
\setuplabeltext [\s!nn] [\v!subsection=]

\setuplabeltext [\s!nb] [\v!subsubsection=]
\setuplabeltext [\s!nn] [\v!subsubsection=]

\setuplabeltext [\s!nb] [\v!subsubsubsection=]
\setuplabeltext [\s!nn] [\v!subsubsubsection=]

\setuplabeltext [\s!nb] [\v!appendix=] % Tillegg
\setuplabeltext [\s!nn] [\v!appendix=] % Tillegg

\setuplabeltext [\s!nb] [\v!part=Del]
\setuplabeltext [\s!nn] [\v!part=Del]

\setuplabeltext [\s!nb] [\v!line=linje ]
\setuplabeltext [\s!nn] [\v!line=linje ]

\setuplabeltext [\s!nb] [\v!lines=linjer ]
\setuplabeltext [\s!nn] [\v!lines=linjer ]


\setuplabeltext [\s!nb]   [\v!january=januar]
\setuplabeltext [\s!nb]  [\v!february=februar]
\setuplabeltext [\s!nb]     [\v!march=mars]
\setuplabeltext [\s!nb]     [\v!april=april]
\setuplabeltext [\s!nb]       [\v!may=mai]
\setuplabeltext [\s!nb]      [\v!june=juni]
\setuplabeltext [\s!nb]      [\v!july=juli]
\setuplabeltext [\s!nb]    [\v!august=august]
\setuplabeltext [\s!nb] [\v!september=september]
\setuplabeltext [\s!nb]   [\v!october=oktober]
\setuplabeltext [\s!nb]  [\v!november=november]
\setuplabeltext [\s!nb]  [\v!december=desember]


\setuplabeltext [\s!nn]   [\v!january=januar]
\setuplabeltext [\s!nn]  [\v!february=februar]
\setuplabeltext [\s!nn]     [\v!march=mars]
\setuplabeltext [\s!nn]     [\v!april=april]
\setuplabeltext [\s!nn]       [\v!may=mai]
\setuplabeltext [\s!nn]      [\v!june=juni]
\setuplabeltext [\s!nn]      [\v!july=juli]
\setuplabeltext [\s!nn]    [\v!august=august]
\setuplabeltext [\s!nn] [\v!september=september]
\setuplabeltext [\s!nn]   [\v!october=oktober]
\setuplabeltext [\s!nn]  [\v!november=november]
\setuplabeltext [\s!nn]  [\v!december=desember]


\setuplabeltext [\s!nb]    [\v!sunday=s\ostroke ndag]
\setuplabeltext [\s!nb]    [\v!monday=mandag]
\setuplabeltext [\s!nb]   [\v!tuesday=tirsdag]
\setuplabeltext [\s!nb] [\v!wednesday=onsdag]
\setuplabeltext [\s!nb]  [\v!thursday=torsdag]
\setuplabeltext [\s!nb]    [\v!friday=fredag]
\setuplabeltext [\s!nb]  [\v!saturday=l\ostroke rdag]

\setuplabeltext [\s!nn]    [\v!sunday=sundag]
\setuplabeltext [\s!nn]    [\v!monday=m\aring ndag]
\setuplabeltext [\s!nn]   [\v!tuesday=tysdag]
\setuplabeltext [\s!nn] [\v!wednesday=onsdag]
\setuplabeltext [\s!nn]  [\v!thursday=torsdag]
\setuplabeltext [\s!nn]    [\v!friday=fredag]
\setuplabeltext [\s!nn]  [\v!saturday=laurdag]

\setuplabeltext [\s!nb]    [\v!page=side ]
\setuplabeltext [\s!nb]  [\v!atpage=p\aring\ side ]
\setuplabeltext [\s!nb] [\v!hencefore=som vist over]
\setuplabeltext [\s!nb] [\v!hereafter=som vist under]
\setuplabeltext [\s!nb]       [\v!see=se ]

\setuplabeltext [\s!nn]    [\v!page=side ]
\setuplabeltext [\s!nn]  [\v!atpage=p\aring\ side ]
\setuplabeltext [\s!nn] [\v!hencefore=som vist over]
\setuplabeltext [\s!nn] [\v!hereafter=som vist under]
\setuplabeltext [\s!nn]       [\v!see=sj\aring\ ]

\setuplabeltext [\s!nb] [\v!january  :\s!mnem=jan.]
\setuplabeltext [\s!nb] [\v!february :\s!mnem=feb.]
\setuplabeltext [\s!nb] [\v!march    :\s!mnem=mars]
\setuplabeltext [\s!nb] [\v!april    :\s!mnem=april]
\setuplabeltext [\s!nb] [\v!may      :\s!mnem=mai]
\setuplabeltext [\s!nb] [\v!june     :\s!mnem=juni]
\setuplabeltext [\s!nb] [\v!july     :\s!mnem=juli]
\setuplabeltext [\s!nb] [\v!august   :\s!mnem=aug.]
\setuplabeltext [\s!nb] [\v!september:\s!mnem=sep.]
\setuplabeltext [\s!nb] [\v!october  :\s!mnem=okt.]
\setuplabeltext [\s!nb] [\v!november :\s!mnem=nov.]
\setuplabeltext [\s!nb] [\v!december :\s!mnem=des.]


\setuplabeltext [\s!nn] [\v!january  :\s!mnem=jan.]
\setuplabeltext [\s!nn] [\v!february :\s!mnem=feb.]
\setuplabeltext [\s!nn] [\v!march    :\s!mnem=mars]
\setuplabeltext [\s!nn] [\v!april    :\s!mnem=april]
\setuplabeltext [\s!nn] [\v!may      :\s!mnem=mai]
\setuplabeltext [\s!nn] [\v!june     :\s!mnem=juni]
\setuplabeltext [\s!nn] [\v!july     :\s!mnem=juli]
\setuplabeltext [\s!nn] [\v!august   :\s!mnem=aug.]
\setuplabeltext [\s!nn] [\v!september:\s!mnem=sep.]
\setuplabeltext [\s!nn] [\v!october  :\s!mnem=okt.]
\setuplabeltext [\s!nn] [\v!november :\s!mnem=nov.]
\setuplabeltext [\s!nn] [\v!december :\s!mnem=des.]


Feel free to contact me with any questions or comments. :)

-- 
Karl Ove Hufthammer
E-mail and Jabber: karl at huftis.org

From sanjoy at mrao.cam.ac.uk  Sun Feb  4 17:43:22 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Sun, 04 Feb 2007 11:43:22 -0500
Subject: [dev-context] regression testing Makefile
Message-ID: <E1HDkSY-0007mG-1H@approximate.corpus.cam.ac.uk>

The contexttest repository now contains a Makefile to use for checking
one context tree against another.  There's a README alongside it but
here's the quickstart

  svn export . /tmp/testdir
  cd /tmp/testdir
  make -k A=20070112 B=20070123 >& world.log

(the -k is so it doesn't stop on the first error)

It will

1. (if not already done) Download ConTeXt versions 2007.01.12 and
   2007.01.23 from the museum, put each in its own subtree, make formats
   for each

2. Do the following for each test-NNN.tex file:

   a. Run it through 2007.01.12 to make test-NNN-20070112.pdf
   b. Run it through 2007.01.23 to make test-NNN-20070123.pdf
   c. Feed those pdfs to utils/compare-pdfs.sh to generate a bitmap diff
   d. Report differences found by compare-pdfs.sh (dB on each page)

It was interesting running it.  I haven't sorted through all the output
yet, but a one point was that a few unicode fonts are a problem (maybe
because I don't have them, but it makes texexec loop for a long time
doing mktextfm and the like).  More details to follow.

Notes: 

If you want to view the image diffs as they are generated, set the
viewer shell variable in compare-pdfs.sh (I often use xloadimage).

I'd be very surprised if the Makefile worked on anything but Linux (uses
features of bash + GNU make).

I was pretty careful about re-entrancy, so the following works fine at
least in my testing:

   make -k -j 4 A=20070112 B=20070123

-Sanjoy

`A nation of slaves is always prepared to applaud the clemency of their
 master who, in the abuse of absolute power, does not proceed to the
 last extremes of injustice and oppression.'  (Gibbon)  

From mojca.miklavec.lists at gmail.com  Sun Feb  4 18:16:40 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sun, 4 Feb 2007 18:16:40 +0100
Subject: [dev-context] Improved support for Norwegian in ConTeXt
In-Reply-To: <200702041500.47359.karl@huftis.org>
References: <200702041500.47359.karl@huftis.org>
Message-ID: <6faad9f00702040916h5d31cfe1kc13a9a3fae5f0c52@mail.gmail.com>

I would suggest you to post some of the questions to the ntg-mailing
list, where more Norwegian users can comment on it. When doing some
changes, the 100% backward compatibility might need to be sacrificed a
bit, bot some changes are worth doing so if others agree and if it's a
contribution towards a better quality. (I CC-ed to two users who seem
to have contributed or complained a bit ;)

On 2/4/07, Karl Ove Hufthammer wrote:
> I'm writing this to suggest improvements in ConTeXt's support for the
> Norwegian languages. ConTeXt already has rudimentary support for Norwegian,
> but with some problems.
>
>
> Language codes
> --------------
>
> The main problem is that ConTeXt use the language code 'no' for Norwegian.
> There actually *is* no written language called 'Norwegian'; Norway has two
> official written languages, Norwegian Bokm?l (ISO 639 language code 'nb') and
> Norwegian Nynorsk (ISO 639 language code 'nn'). The current definitions
> for 'no' in ConTeXt is for Norwegian Bokm?l. (There is a ISO 639 language
> code 'no' for Norwegian, but this should usually be used for spoken
> Norwegian, or perhaps for transcriptions of spoken language.)
>
> The language code 'no' should be removed, and be replaced by the two language
> codes 'nb' and 'nn'.

Although I don't know the exact situation, a few remarks:

- You should probably also provide the correct definitions for calling
the language (so that one can say \mainlanguage[norwegian], but
perhaps with what you consider to be the proper language tags). It's
currently

\installlanguage [norwegian]   [\s!no]
\installlanguage [norsk]       [\s!no] % bonus switch

You need to fix the two and perhaps add
\installlanguage [???]       [\s!nb]
\installlanguage [???]       [\s!nk]


- If you remove [no], older documents might break. I don't know much
about the situation and the number of users, but can you say which of
the two language variants [no] should default to? Since the current
definitions probably point to "nb" (from the first blick) - would it
make sense to use "nb" when one says \mainlanguage[no]?

Perhaps one can issue a warning when the language "no" is selected
(statig something like "language 'no' is deprecated, please use 'nb'
for Bokm?l or nn for Nynorsk instead")

I also asked to replace "si" by "sl" for Slovenian some time ago, but
that was when there was no support for Slovenian yet and "si" stands
for Singhalese (whatever that is).

For Norwegian the situation might be slightly different since "no"
still means Norwegian, but I don't know how "offensive"/"ignorant" it
sounds to you if that one is used.

Removing it probably doesn't affect the rest, so if other Norwegian
users agree to remove it completely, it can still be done, but I would
suggest you to ask the author of the original translations and the
rest of users on the ntg-context mailing list first. Otherwise it can
still default to one of the two varians (or to a new one if you
provide also the third alternative for the "spoken language").

> See http://en.wikipedia.org/wiki/Norwegian_language for a (not too good)
> article on the Norwegian languages.
>
> For the record, the language names used in LaTeX/Babel is
> (unfortunately) 'Norwegian' and 'norsk' for Norwegian Bokm?l, and 'nynorsk'
> for Norwegian Nynorsk, instead of 'bokmal'/'bokm?l' and 'nynorsk'. Norwegian
> Bokm?l support was added first, and used up the 'Norwegian' name.
>
>
> Hyphenation
> -----------
>
> The two written language are quite similar, and the current hyphenation
> dictionary (nohyphbx) was made to support both. But there are (at least) two
> words which are put in the hyphenation exceptions for this dictionary because
> they would have different hyphenation (because of different meaning) in
> Norwegian Nynorsk and Norwegian Bokm?l. These are:
>
> attende -- nb: at-ten-de ('eighteenth'),       nn: att-en-de ('back')
> betre   -- nb: be-tre ('enter'/'set foot on'), nn: bet-re ('better')
>
> Would it be possible to have two different hyphenation dictionaries for 'nb'
> and 'nn', which would only differ in the hyphenation exceptions used for
> these two words?

This can be done. Hans was complaining about the mess of (naming of)
Norwegian hyphenation patterns one month ago anyway, I guess that "he
won't mind" adding yet another fix to the scripts ;)

> Language setup
> --------------
>
> Here is an improved/correct version of the language setup for Norwegian. The
> setup for 'no' should be removed.
>
> \installlanguage
>   [nn]
>   [spacing=packed,
>    lefthyphenmin=2,
>    righthyphenmin=2,
>    leftsentence=---,
>    rightsentence=---,
>    leftsubsentence=---,
>    rightsubsentence=---,
>    leftquote=\upperleftsinglesixquote,
>    rightquote=\upperrightsingleninequote,
>    leftquotation=\leftguillemot,
>    rightquotation=\rightguillemot,
>    date={day,{.},\ ,month,\ ,year},
>    state=stop]
>
> This is for Norwegian Nynorsk ('nn'), but the same setup is used for Norwegian
> Bokm?l (the values used for 'day' differ, though -- see below).
>
> But I am not sure I understand what the four *sentence commands are used for.
> We usually don't use em-dashes in Norwegian, so the entries look incorrect.
> If you can explain what the commands are used for, I can supply the correct
> Norwegian definitions.
>
> I also noticed that the Italian definitions use leftspeech, middlespeech and
> rightspeech commands. What are these used for?
>
>
> Other language-specific settings
> --------------------------------
>
> Norwegian (Bokm?l and Nynorsk) differs typographically from English in several
> other ways. Here is three of them:
>
> We don't (usually) use bullets for the first level of unnumbered lists; we use
> en-dashes.
>
> -- Item 1
> -- Item 2
> -- Item 3
>
> Bullets are commonly seen in document created by word processors of US origin,
> and in the documents created by people without proper typographic training,
> though. It would be nice if ConTeXt could use en-dashes by default for lists
> in Norwegian text.

The default is to use
   bullet, dash, star, triangle
for the four levels if itemization.

If you want to change the behaviour in your document only, all you need to do is
    \definesymbol[1][\endash]
but I guess that it could be adapted, so that Norwegian documents will
all use endash by default.

Similar supoprt has already been implemented for Slovenian (to use
different set of characters when itemize uses characters).

There are two questions:
- do other Norwegian users agree to change the default set?
- what should be the order then? (ie: what character should be used
for the second level of itemization?)

> We don't use full stops in numbered lists. In other words, instead of
>
> 1. Item 1
> 2. Item 2
> 3. Item 3
>
> we write
>
> 1  Item 1
> 2  Item 2
> 3  Item 3

That's the matter of
\setupitemize[stopper=]

I don't know how to set that in a langage-specific way, but it sounds
reasonable me to add it.

> The same holds for numbered headings, both in the main text and in the TOC.

But sections already start with
   1 Section name
rather than
   1. Section name
by default. (Support for the second case might be improved in the
future. Or rather: I hope that it will be.)

> Would it be possible to support this by default in ConTeXt?
>
> We also use the comma in decimal numbers (3,14 instead of 3.14).

We too. In text this is no problem anyway. Math can be setup in that
way, but I doubt that it's set up in any language (although it could
be). This means that you should better write $3{,}14$ instead of
$3,14$, I don't know about any other consequences, since TeX almost
never writes out any calculated floats in the resulting document.

> Norwegian labels
> ----------------
>
> Here is labels for Norwegian (Bokm?l and Nynorsk). The old 'no' labels should
> be removed. The 'nb' ones are taken from the 'no' ones, but with some
> corrections.
>
> Some comments: We don't usually capitalise the first letter in
> crossreferences. Where one would in English write
>
> See Figure 5.22 ...
>
> we would write
>
> Se figur 5.22 ... (Bokm?l)
> Sj? figur 5.22 ... (Nynorsk)

But when you crossreference, you only get 5.22, you have to write
"figur" manually (you can set up that perhaps, so that you get
"figure" attached to the number, but in any case you need to do that
manually).

"Figur 5.22" will only be used under the actual image. When
crossreferencing, we use lowercase too, but under the fugure itself I
think that uppercase is OK, at least for our language (since it's
caption of the figure anyway).

> But we would of course write
>
> Figur 5.22 viser ...
> (Figure 5.22 shows ...)
>
> The definitions below use a capital first letter. Will this be a problem?
>
> I was also unsure about what the 'lines' label should be. The plural of 'line'
> ('linje') in Norwegian (both 'nb' and 'nn') is 'linjer', but we do not use
> the plural when referencing more than one line. Where one would write
>
> The discussion on lines 5--13 ...
>
> in English, we would write
>
> Dr?ftinga p? linje 5--13 ...
>
> in Norwegian. In other words, we use the singular instead of the plural. The
> same holds for the other cross-referencing terms ('Figure', 'Table' &c.).
>
> Feel free to change the 'lines' label to 'linje' if this make it work better.

I don't know where exactly this is used, but I assume that it's for
"List of Figures", "List of Tables". But I don't know exactly, I never
use those. (I have just translated some of them and I hoped that the
first one who will consider them wrong will complain ;)

Mojca

From pragma at wxs.nl  Sun Feb  4 21:47:43 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 04 Feb 2007 21:47:43 +0100
Subject: [dev-context] regression testing Makefile
In-Reply-To: <E1HDkSY-0007mG-1H@approximate.corpus.cam.ac.uk>
References: <E1HDkSY-0007mG-1H@approximate.corpus.cam.ac.uk>
Message-ID: <45C6466F.9080704@wxs.nl>

Sanjoy Mahajan wrote:
> The contexttest repository now contains a Makefile to use for checking
> one context tree against another.  There's a README alongside it but
> here's the quickstart
>   
ah, brilliant
>   svn export . /tmp/testdir
>   cd /tmp/testdir
>   make -k A=20070112 B=20070123 >& world.log
>
> (the -k is so it doesn't stop on the first error)
>
> It will
>
> 1. (if not already done) Download ConTeXt versions 2007.01.12 and
>    2007.01.23 from the museum, put each in its own subtree, make formats
>    for each
>
> 2. Do the following for each test-NNN.tex file:
>
>    a. Run it through 2007.01.12 to make test-NNN-20070112.pdf
>    b. Run it through 2007.01.23 to make test-NNN-20070123.pdf
>    c. Feed those pdfs to utils/compare-pdfs.sh to generate a bitmap diff
>    d. Report differences found by compare-pdfs.sh (dB on each page)
>
> It was interesting running it.  I haven't sorted through all the output
> yet, but a one point was that a few unicode fonts are a problem (maybe
> because I don't have them, but it makes texexec loop for a long time
> doing mktextfm and the like).  More details to follow.
>   
ok, so we need to set up a procedure for that
> Notes: 
>
> If you want to view the image diffs as they are generated, set the
> viewer shell variable in compare-pdfs.sh (I often use xloadimage).
>
> I'd be very surprised if the Makefile worked on anything but Linux (uses
> features of bash + GNU make).
>   
once everything is in place we can look into that, for the moment using 
linux only is ok
> I was pretty careful about re-entrancy, so the following works fine at
> least in my testing:
>
>    make -k -j 4 A=20070112 B=20070123
>
> -Sanjoy
>
> `A nation of slaves is always prepared to applaud the clemency of their
>  master who, in the abuse of absolute power, does not proceed to the
>  last extremes of injustice and oppression.'  (Gibbon)  
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context
>   


-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Sun Feb  4 22:40:54 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 04 Feb 2007 22:40:54 +0100
Subject: [dev-context] Improved support for Norwegian in ConTeXt
In-Reply-To: <6faad9f00702040916h5d31cfe1kc13a9a3fae5f0c52@mail.gmail.com>
References: <200702041500.47359.karl@huftis.org>
	<6faad9f00702040916h5d31cfe1kc13a9a3fae5f0c52@mail.gmail.com>
Message-ID: <45C652E6.80009@wxs.nl>

Hi Mojca

an impressive summary ... just provide the patches needed,  take a look 
at 'de' and 'deo' ... we can clone languages  so definitions can be shared

concerning conversions ... there are some language specific things, take 
a look at chinese (s-chi*)
> I would suggest you to post some of the questions to the ntg-mailing
> list, where more Norwegian users can comment on it. When doing some
> changes, the 100% backward compatibility might need to be sacrificed a
> bit, bot some changes are worth doing so if others agree and if it's a
> contribution towards a better quality. (I CC-ed to two users who seem
> to have contributed or complained a bit ;)
>
> On 2/4/07, Karl Ove Hufthammer wrote:
>   
>> I'm writing this to suggest improvements in ConTeXt's support for the
>> Norwegian languages. ConTeXt already has rudimentary support for Norwegian,
>> but with some problems.
>>
>>
>> Language codes
>> --------------
>>
>> The main problem is that ConTeXt use the language code 'no' for Norwegian.
>> There actually *is* no written language called 'Norwegian'; Norway has two
>> official written languages, Norwegian Bokm?l (ISO 639 language code 'nb') and
>> Norwegian Nynorsk (ISO 639 language code 'nn'). The current definitions
>> for 'no' in ConTeXt is for Norwegian Bokm?l. (There is a ISO 639 language
>> code 'no' for Norwegian, but this should usually be used for spoken
>> Norwegian, or perhaps for transcriptions of spoken language.)
>>
>> The language code 'no' should be removed, and be replaced by the two language
>> codes 'nb' and 'nn'.
>>     
>
> Although I don't know the exact situation, a few remarks:
>
> - You should probably also provide the correct definitions for calling
> the language (so that one can say \mainlanguage[norwegian], but
> perhaps with what you consider to be the proper language tags). It's
> currently
>
> \installlanguage [norwegian]   [\s!no]
> \installlanguage [norsk]       [\s!no] % bonus switch
>
> You need to fix the two and perhaps add
> \installlanguage [???]       [\s!nb]
> \installlanguage [???]       [\s!nk]
>
>
> - If you remove [no], older documents might break. I don't know much
> about the situation and the number of users, but can you say which of
> the two language variants [no] should default to? Since the current
> definitions probably point to "nb" (from the first blick) - would it
> make sense to use "nb" when one says \mainlanguage[no]?
>
> Perhaps one can issue a warning when the language "no" is selected
> (statig something like "language 'no' is deprecated, please use 'nb'
> for Bokm?l or nn for Nynorsk instead")
>
> I also asked to replace "si" by "sl" for Slovenian some time ago, but
> that was when there was no support for Slovenian yet and "si" stands
> for Singhalese (whatever that is).
>
> For Norwegian the situation might be slightly different since "no"
> still means Norwegian, but I don't know how "offensive"/"ignorant" it
> sounds to you if that one is used.
>
> Removing it probably doesn't affect the rest, so if other Norwegian
> users agree to remove it completely, it can still be done, but I would
> suggest you to ask the author of the original translations and the
> rest of users on the ntg-context mailing list first. Otherwise it can
> still default to one of the two varians (or to a new one if you
> provide also the third alternative for the "spoken language").
>
>   
>> See http://en.wikipedia.org/wiki/Norwegian_language for a (not too good)
>> article on the Norwegian languages.
>>
>> For the record, the language names used in LaTeX/Babel is
>> (unfortunately) 'Norwegian' and 'norsk' for Norwegian Bokm?l, and 'nynorsk'
>> for Norwegian Nynorsk, instead of 'bokmal'/'bokm?l' and 'nynorsk'. Norwegian
>> Bokm?l support was added first, and used up the 'Norwegian' name.
>>
>>
>> Hyphenation
>> -----------
>>
>> The two written language are quite similar, and the current hyphenation
>> dictionary (nohyphbx) was made to support both. But there are (at least) two
>> words which are put in the hyphenation exceptions for this dictionary because
>> they would have different hyphenation (because of different meaning) in
>> Norwegian Nynorsk and Norwegian Bokm?l. These are:
>>
>> attende -- nb: at-ten-de ('eighteenth'),       nn: att-en-de ('back')
>> betre   -- nb: be-tre ('enter'/'set foot on'), nn: bet-re ('better')
>>
>> Would it be possible to have two different hyphenation dictionaries for 'nb'
>> and 'nn', which would only differ in the hyphenation exceptions used for
>> these two words?
>>     
>
> This can be done. Hans was complaining about the mess of (naming of)
> Norwegian hyphenation patterns one month ago anyway, I guess that "he
> won't mind" adding yet another fix to the scripts ;)
>
>   
>> Language setup
>> --------------
>>
>> Here is an improved/correct version of the language setup for Norwegian. The
>> setup for 'no' should be removed.
>>
>> \installlanguage
>>   [nn]
>>   [spacing=packed,
>>    lefthyphenmin=2,
>>    righthyphenmin=2,
>>    leftsentence=---,
>>    rightsentence=---,
>>    leftsubsentence=---,
>>    rightsubsentence=---,
>>    leftquote=\upperleftsinglesixquote,
>>    rightquote=\upperrightsingleninequote,
>>    leftquotation=\leftguillemot,
>>    rightquotation=\rightguillemot,
>>    date={day,{.},\ ,month,\ ,year},
>>    state=stop]
>>
>> This is for Norwegian Nynorsk ('nn'), but the same setup is used for Norwegian
>> Bokm?l (the values used for 'day' differ, though -- see below).
>>
>> But I am not sure I understand what the four *sentence commands are used for.
>> We usually don't use em-dashes in Norwegian, so the entries look incorrect.
>> If you can explain what the commands are used for, I can supply the correct
>> Norwegian definitions.
>>
>> I also noticed that the Italian definitions use leftspeech, middlespeech and
>> rightspeech commands. What are these used for?
>>
>>
>> Other language-specific settings
>> --------------------------------
>>
>> Norwegian (Bokm?l and Nynorsk) differs typographically from English in several
>> other ways. Here is three of them:
>>
>> We don't (usually) use bullets for the first level of unnumbered lists; we use
>> en-dashes.
>>
>> -- Item 1
>> -- Item 2
>> -- Item 3
>>
>> Bullets are commonly seen in document created by word processors of US origin,
>> and in the documents created by people without proper typographic training,
>> though. It would be nice if ConTeXt could use en-dashes by default for lists
>> in Norwegian text.
>>     
>
> The default is to use
>    bullet, dash, star, triangle
> for the four levels if itemization.
>
> If you want to change the behaviour in your document only, all you need to do is
>     \definesymbol[1][\endash]
> but I guess that it could be adapted, so that Norwegian documents will
> all use endash by default.
>
> Similar supoprt has already been implemented for Slovenian (to use
> different set of characters when itemize uses characters).
>
> There are two questions:
> - do other Norwegian users agree to change the default set?
> - what should be the order then? (ie: what character should be used
> for the second level of itemization?)
>
>   
>> We don't use full stops in numbered lists. In other words, instead of
>>
>> 1. Item 1
>> 2. Item 2
>> 3. Item 3
>>
>> we write
>>
>> 1  Item 1
>> 2  Item 2
>> 3  Item 3
>>     
>
> That's the matter of
> \setupitemize[stopper=]
>
> I don't know how to set that in a langage-specific way, but it sounds
> reasonable me to add it.
>
>   
>> The same holds for numbered headings, both in the main text and in the TOC.
>>     
>
> But sections already start with
>    1 Section name
> rather than
>    1. Section name
> by default. (Support for the second case might be improved in the
> future. Or rather: I hope that it will be.)
>
>   
>> Would it be possible to support this by default in ConTeXt?
>>
>> We also use the comma in decimal numbers (3,14 instead of 3.14).
>>     
>
> We too. In text this is no problem anyway. Math can be setup in that
> way, but I doubt that it's set up in any language (although it could
> be). This means that you should better write $3{,}14$ instead of
> $3,14$, I don't know about any other consequences, since TeX almost
> never writes out any calculated floats in the resulting document.
>
>   
>> Norwegian labels
>> ----------------
>>
>> Here is labels for Norwegian (Bokm?l and Nynorsk). The old 'no' labels should
>> be removed. The 'nb' ones are taken from the 'no' ones, but with some
>> corrections.
>>
>> Some comments: We don't usually capitalise the first letter in
>> crossreferences. Where one would in English write
>>
>> See Figure 5.22 ...
>>
>> we would write
>>
>> Se figur 5.22 ... (Bokm?l)
>> Sj? figur 5.22 ... (Nynorsk)
>>     
>
> But when you crossreference, you only get 5.22, you have to write
> "figur" manually (you can set up that perhaps, so that you get
> "figure" attached to the number, but in any case you need to do that
> manually).
>
> "Figur 5.22" will only be used under the actual image. When
> crossreferencing, we use lowercase too, but under the fugure itself I
> think that uppercase is OK, at least for our language (since it's
> caption of the figure anyway).
>
>   
>> But we would of course write
>>
>> Figur 5.22 viser ...
>> (Figure 5.22 shows ...)
>>
>> The definitions below use a capital first letter. Will this be a problem?
>>
>> I was also unsure about what the 'lines' label should be. The plural of 'line'
>> ('linje') in Norwegian (both 'nb' and 'nn') is 'linjer', but we do not use
>> the plural when referencing more than one line. Where one would write
>>
>> The discussion on lines 5--13 ...
>>
>> in English, we would write
>>
>> Dr?ftinga p? linje 5--13 ...
>>
>> in Norwegian. In other words, we use the singular instead of the plural. The
>> same holds for the other cross-referencing terms ('Figure', 'Table' &c.).
>>
>> Feel free to change the 'lines' label to 'linje' if this make it work better.
>>     
>
> I don't know where exactly this is used, but I assume that it's for
> "List of Figures", "List of Tables". But I don't know exactly, I never
> use those. (I have just translated some of them and I hoped that the
> first one who will consider them wrong will complain ;)
>
> Mojca
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context
>   


-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From contexttest-featurerequests at foundry.supelec.fr  Sun Feb  4 23:40:09 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Sun, 4 Feb 2007 23:40:09 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B70?=
	=?utf-8?q?=5D_Smooth_shading?=
Message-ID: <200702042240.l14Me94I022362@semantic.metz.supelec.fr>

Feature Requests item #70, was opened at 2007-02-04 23:40
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=70&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Mojca Miklavec (mojca)
Assigned to: Nobody (None)
Summary: Smooth shading 
Version: None
Category: Typesetting


Initial Comment:

(Mojca's summary of needed features - I'll try to implemented, but I need to "save" the requirements somewhere before I forget them ;)

Description is missing: this list is really taken "out of context".


To implement that, the following is needed:
- a well-defined metapost interface accepting optional parameters
- "dirty" metapost specials and trickery

My idea is to split the examples which have to be handled as streams (goraud shading for triangular meshes) and those that can be handled easily: linear & circular shading. I would worry about goraud shading later, since it's really difficult to make a sensible interface for it (unless it's about a single triangle).

At least for linear and circular shading I would propose to split the function and the code which generates linear and circular shadings. That way it will be much easier to support what Peter wants (and what I need for the gnuplot terminal) & plotting a rainbow in a single move.


(Type 2) For linear shadings we need:
- a closed path to which it has to be applied, to calculate the bounding box (for start and stop point), to crop the shading
- optional parameter if shading needs to extend over the two boundaries or not (not so important)
- optionally provide the start and stop point for shading (default values: depends on angle; shading has to exactly cover the whole path)
- optionally provide the angle (default 0)
- provide the function or two colors - if two colors are provided, they should be passed to the function in a proper way

(Type 3) For circular shadings we need:
- a closed path to which the shading has to be applied: I guess that now the shading needs radius of the first circle
- optional centers and radii of the two cicles (default values: both center in path center, one radius zero and one to cover the whole path)
- optional parameter if shading needs to extend over the two boundaries or not (not so important; default values probably false?)
- provide the function or two colors

(Type 4) For "Free-Form Gouraud-Shaded Triangle Meshes" we need:
- patched Gnuplot 4.3 (http://bugs.libgd.org/?do=details&task_id=39), m-gnuplot.tex and it's documentation ready; all other shadings functions and shadings listed here implemented; then we'll start discussing it



For functions we need:
* Type 0: sampled - let's worry about it later, I don't understand how to apply it; it can be mimicked with Type 3+Type 2 (although less efficient, but working OK)
* Type 2: exponential interpolation
- two colors
- optional exponent (default 1)
* Type 3: stitching (combining multiple functions)
- multiple functions
- optional bounds between them (default: evenly distributed)

Watch out for alpha channel and CMYK!


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=70&group_id=21


From contexttest-featurerequests at foundry.supelec.fr  Mon Feb  5 01:08:10 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Mon, 5 Feb 2007 01:08:10 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B71?=
	=?utf-8?q?=5D_High-level_bidirectional_support?=
Message-ID: <200702050008.l1508AUp010810@semantic.metz.supelec.fr>

Feature Requests item #71, was opened at 2007-02-05 01:08
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=71&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Mojca Miklavec (mojca)
Assigned to: Nobody (None)
Summary: High-level bidirectional support 
Version: None
Category: Typesetting


Initial Comment:
(Copied from contextgarden.net)

Bidirectional text layout for languages that are written from right to left like Arabic and Hebrew plus glyph shaping for complex script languages like Arabic and Thai.





----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=71&group_id=21


From contexttest-featurerequests at foundry.supelec.fr  Mon Feb  5 01:12:01 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Mon, 5 Feb 2007 01:12:01 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B72?=
	=?utf-8?q?=5D_Extending_=5Cplacefloat=7Btop=2Cleft=7D=2E_=7Bbottom?=
	=?utf-8?b?LG91dGVyfSwgLi4u?=
Message-ID: <200702050012.l150C1mU010824@semantic.metz.supelec.fr>

Feature Requests item #72, was opened at 2007-02-05 01:12
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=72&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Mojca Miklavec (mojca)
Assigned to: Nobody (None)
Summary: Extending \placefloat{top,left}. {bottom,outer}, ... 
Version: None
Category: None


Initial Comment:
(From contextgarden.net)

The \placefigure macro should be extended to combinations like
    \placefigure{top,left}
or
    \placefigure{bottom,outer}
The reason for this request is that we use ConTeXt a lot for typesetting books from "arts and humanities". 
There we often have to place a lot of (more then 100) figures at "fixed" positions like top-outer and bottom-inner, wrapped by text. 
I guess it's not a trivial feature to be implemented in TeX's paragraph processing, but I know it might be worth the effort: ConTeXt's way to deal with fonts and text is so superior that it should be also accessible for disciplines that besides text also rely on images - as the arts and humanities do.


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=72&group_id=21


From contexttest-featurerequests at foundry.supelec.fr  Mon Feb  5 01:13:23 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Mon, 5 Feb 2007 01:13:23 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B73?=
	=?utf-8?q?=5D_Unbreakable_space_after_labels_in_floats?=
Message-ID: <200702050013.l150DNhc011236@semantic.metz.supelec.fr>

Feature Requests item #73, was opened at 2007-02-05 01:13
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=73&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Mojca Miklavec (mojca)
Assigned to: Nobody (None)
Summary: Unbreakable space after labels in floats 
Version: None
Category: None


Initial Comment:
(from contextgarden.net)

Unbreakable space after labels such as
    \setuplabeltext[de][figure=Abbildung~]
in default configuration


HH: But the word needs to be hyphenatable, so it would be something ...|~| or, i must think of it


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=73&group_id=21


From contexttest-featurerequests at foundry.supelec.fr  Mon Feb  5 01:20:04 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Mon, 5 Feb 2007 01:20:04 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B74?=
	=?utf-8?q?=5D_Table_tail_for_Natural_Tables?=
Message-ID: <200702050020.l150K4Hg012251@semantic.metz.supelec.fr>

Feature Requests item #74, was opened at 2007-02-05 01:20
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=74&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Mojca Miklavec (mojca)
Assigned to: Nobody (None)
Summary: Table tail for Natural Tables 
Version: None
Category: None


Initial Comment:
(from contextgarden.net)

Something like \starttabletail for Natural Tables.

----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=74&group_id=21


From mojca.miklavec.lists at gmail.com  Mon Feb  5 01:27:52 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 5 Feb 2007 01:27:52 +0100
Subject: [dev-context] feature requests from contextgarden
Message-ID: <6faad9f00702041627u4c7fa357l454e876026b705ba@mail.gmail.com>

Hello,

it would probably make sense to delete this page:
    http://wiki.contextgarden.net/Feature_Requests

I moved some items here:
    https://foundry.supelec.fr/tracker/index.php?group_id=21&atid=164

For the remaining ones I have no idea whether they can be considered
as feature requests or not. (OOo's XML format might be a good idea,
but too much work, \textmu might be resolved with OpenType/Unicode
with no extra work, \Fixme only makes sense if someone is willing to
try it out & going to use it)

But I don't know which other feature requests that I copied make sense
either ...

I haven't found any option to change priority (perhaps I just don't
have enough rights).

Mojca

From mojca.miklavec.lists at gmail.com  Mon Feb  5 01:41:34 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 5 Feb 2007 01:41:34 +0100
Subject: [dev-context] Improved support for Norwegian in ConTeXt
In-Reply-To: <45C652E6.80009@wxs.nl>
References: <200702041500.47359.karl@huftis.org>
	<6faad9f00702040916h5d31cfe1kc13a9a3fae5f0c52@mail.gmail.com>
	<45C652E6.80009@wxs.nl>
Message-ID: <6faad9f00702041641k694803b5l68f14a6a7579a32a@mail.gmail.com>

On 2/4/07, Hans Hagen wrote:
> Hi Mojca
>
> an impressive summary ... just provide the patches needed,  take a look
> at 'de' and 'deo' ... we can clone languages  so definitions can be shared

For a few things it would be wise to wait for responses first. Also,
these are responses by Karl Berry:

   For the record, the language names used in LaTeX/Babel is
   (unfortunately) 'Norwegian' and 'norsk' for Norwegian Bokm??l, and
   'nynorsk' for Norwegian Nynorsk, instead of 'bokmal'/'bokm??l' and
   'nynorsk'.

Naturally, only the Babel maintainers can change Babel.  All I can
suggest filing a report in the latex bug database.  Although quick
action is unlikely, at least that way it can be considered.  Presumably
the bokmal name could become the canonical one, and Norwegian+norsk just
left as aliases for compatibility.

What I can do in TL is add "bokmal" as an alias for "norsk" and
"norwegian", in the hopes that it could prove useful in the future, if
Babel changes.  I did that.

   Would it be possible to have two different hyphenation dictionaries
   for 'nb' and 'nn', which would only differ in the hyphenation
   exceptions used for these two words?

Anything is possible.  Maybe a good approach would be to create
nbhyph.tex and nnhyph.tex, which \input nohyphbx.tex and then add the
necessary exceptions.  Then I can make languages nb and nn in TL which
\input the new files.

Can you upload a new package to CTAN with those files?  I'd like to have
it on CTAN to start with so that, among other reasons, MiKTeX will also
have a chance to benefit.  For instance, the package could be installed
in something like CTAN:language/hyphenation/norwegian.


This is something that the natives have to take care of ;)

> concerning conversions ... there are some language specific things, take
> a look at chinese (s-chi*)

Thanks.

Mojca

From sanjoy at mrao.cam.ac.uk  Mon Feb  5 06:46:09 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Mon, 05 Feb 2007 00:46:09 -0500
Subject: [dev-context] texexec --timeout=NN should return nonzero code on
	timeout
Message-ID: <E1HDwg5-0000Fo-2c@approximate.corpus.cam.ac.uk>

Here is what has come up from the regression testing.  [I'll send them
one issue/email.]

If a texexec job runs out of time (--timeout=NN), the exit code should
be nonzero.  Right now it's zero; which, I just realized, had slightly
confused the error handling by the regression-testing.

Here's an example using one of the problematic files in the test repo.
[Send the output to a file because it's grows to 14MB.]  This command

  texexec --nonstopmode --timeout=10 tex/context/base/unic-002.tex/test-001.tex

exits with error code 0, but this one

  texexec --nonstopmode tex/context/base/unic-002.tex/test-001.tex

exits with error code 1.  Maybe if it times out it should exit with its
own code (who knows, maybe 23?).

[I'm testing the above with 2007.01.23]

So I wrote a short Python script (utils/run-it.py in the repo) to handle
maximum time and maximum filesize, which the Makefile now uses to wrap
the texexec call.

-Sanjoy

`A nation of slaves is always prepared to applaud the clemency of their
 master who, in the abuse of absolute power, does not proceed to the
 last extremes of injustice and oppression.'  (Gibbon)  

From sanjoy at mrao.cam.ac.uk  Mon Feb  5 06:59:31 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Mon, 05 Feb 2007 05:59:31 +0000
Subject: [dev-context] regression testing Makefile
In-Reply-To: Your message of "Sun, 04 Feb 2007 21:47:43 +0100."
	<45C6466F.9080704@wxs.nl> 
Message-ID: <E1HDwt1-00082L-00@skye.ra.phy.cam.ac.uk>

> a few unicode fonts are a problem (maybe
> > because I don't have them, but it makes texexec loop for a long time
> > doing mktextfm and the like).  More details to follow.
> >   
> ok, so we need to set up a procedure for that

Yeah, the mktexnam processes spawned by pdftex won't easily die.  In
the python wrapper to handle timeouts and large logfiles, I had to do
a bit of work: change the process group of the texexec process to a
new one, let its children inherit that pgrp, and then do killpg on the
whole bunch.  Without the process group trick, it's not easy to find
and kill the untamed processes.

By the way, a previous email had the list of troublesome files (in
terms of compliation, never mind the correctness!).

> > I'd be very surprised if the Makefile worked on anything but Linux (uses
> > features of bash + GNU make).
> >   
> once everything is in place we can look into that, for the moment using 
> linux only is ok

It might work on MacOS X, since it has bash and probably has GNU make
somewhere, perhaps as gmake (not sure if BSD make is similar enough to
GNU make).

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From Hans.F.Nordhaug at hiMolde.no  Mon Feb  5 08:46:25 2007
From: Hans.F.Nordhaug at hiMolde.no (Hans F. Nordhaug)
Date: Mon, 5 Feb 2007 08:46:25 +0100
Subject: [dev-context] Improved support for Norwegian in ConTeXt
In-Reply-To: <6faad9f00702040916h5d31cfe1kc13a9a3fae5f0c52@mail.gmail.com>
References: <200702041500.47359.karl@huftis.org> 
	<6faad9f00702040916h5d31cfe1kc13a9a3fae5f0c52@mail.gmail.com>
Message-ID: <20070205074625.GA7847@hiMolde.no>

* Mojca Miklavec <mojca.miklavec.lists at gmail.com> [2007-02-04]:
> I would suggest you to post some of the questions to the ntg-mailing
> list, where more Norwegian users can comment on it. When doing some
> changes, the 100% backward compatibility might need to be sacrificed a
> bit, bot some changes are worth doing so if others agree and if it's a
> contribution towards a better quality. (I CC-ed to two users who seem
> to have contributed or complained a bit ;)
> 
> On 2/4/07, Karl Ove Hufthammer wrote:
> >I'm writing this to suggest improvements in ConTeXt's support for the
> >Norwegian languages. ConTeXt already has rudimentary support for Norwegian,
> >but with some problems.
> >
> >
> >Language codes
> >--------------
> >
> >The main problem is that ConTeXt use the language code 'no' for
> >Norwegian.  There actually *is* no written language called
> >'Norwegian'; Norway has two official written languages, Norwegian
> >Bokm?l (ISO 639 language code 'nb') and Norwegian Nynorsk (ISO 639
> >language code 'nn'). The current definitions for 'no' in ConTeXt is
> >for Norwegian Bokm?l. (There is a ISO 639 language code 'no' for
> >Norwegian, but this should usually be used for spoken Norwegian, or
> >perhaps for transcriptions of spoken language.)
> >
> >The language code 'no' should be removed, and be replaced by the
> >two language codes 'nb' and 'nn'.
[kutt]

I'm not actively using ConTeXt anymore, but I can confirm that there
should be no "no" code. We want "nb" and "nn" ;-) I think "no" should
be deprecated and giving a (useful) warning/error - telling people to
switch to "nb".

The rest of Karl Ove's comments/suggestions seems to be correct - he
normally knows what he talks about.

Best regards,
Hans Nordhaug

From taco at elvenkind.com  Mon Feb  5 09:42:40 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 05 Feb 2007 09:42:40 +0100
Subject: [dev-context] feature requests from contextgarden
In-Reply-To: <6faad9f00702041627u4c7fa357l454e876026b705ba@mail.gmail.com>
References: <6faad9f00702041627u4c7fa357l454e876026b705ba@mail.gmail.com>
Message-ID: <45C6EE00.7040407@elvenkind.com>

Mojca Miklavec wrote:
> Hello,
> 
> it would probably make sense to delete this page:
>     http://wiki.contextgarden.net/Feature_Requests
> 
> I moved some items here:
>     https://foundry.supelec.fr/tracker/index.php?group_id=21&atid=164
> 
> For the remaining ones I have no idea whether they can be considered
> as feature requests or not. (OOo's XML format might be a good idea,
> but too much work, \textmu might be resolved with OpenType/Unicode
> with no extra work, \Fixme only makes sense if someone is willing to
> try it out & going to use it)

\textmu is already files as a bug report

\Fixme will be the topic of the `how to write a module' tutorial at Epen

OOs XML is interesting but needs either a volunteer (not Hans, nor me)
or outside funding .

So my opinion is that the page can go, but I'll wait a day or so before
actually doing it.

Taco

From taco at elvenkind.com  Mon Feb  5 09:49:15 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 05 Feb 2007 09:49:15 +0100
Subject: [dev-context] regression testing Makefile
In-Reply-To: <E1HDwt1-00082L-00@skye.ra.phy.cam.ac.uk>
References: <E1HDwt1-00082L-00@skye.ra.phy.cam.ac.uk>
Message-ID: <45C6EF8B.3050003@elvenkind.com>

Sanjoy Mahajan wrote:
> 
> Yeah, the mktexnam processes spawned by pdftex won't easily die.  In
> the python wrapper to handle timeouts and large logfiles, I had to do
> a bit of work: change the process group of the texexec process to a
> new one, let its children inherit that pgrp, and then do killpg on the
> whole bunch.  Without the process group trick, it's not easy to find
> and kill the untamed processes.

IIRC, you can inhibit all the auto-mktex scripts with a setting
in texmf.cnf or mktex.cnf (or something). If these programs are
needed, the test was almost certainly failed anyway.

Best,

Taco

From pragma at wxs.nl  Mon Feb  5 10:08:43 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 05 Feb 2007 10:08:43 +0100
Subject: [dev-context] texexec --timeout=NN should return nonzero code
 on	timeout
In-Reply-To: <E1HDwg5-0000Fo-2c@approximate.corpus.cam.ac.uk>
References: <E1HDwg5-0000Fo-2c@approximate.corpus.cam.ac.uk>
Message-ID: <45C6F41B.4080509@wxs.nl>

Sanjoy Mahajan wrote:
> Here is what has come up from the regression testing.  [I'll send them
> one issue/email.]
>
> If a texexec job runs out of time (--timeout=NN), the exit code should
> be nonzero.  Right now it's zero; which, I just realized, had slightly
> confused the error handling by the regression-testing.
>
>   
    def timedrun(delay, &block)
        delay = delay.to_i rescue 0
        if delay > 0 then
            begin
                report("job started with timeout '#{delay}'")
                timeout(delay) do
                    yield block
                end
            rescue TimeoutError
                report("job aborted due to timeout '#{delay}'")
                setvariable('error','timeout')
            rescue
                report("job aborted due to error")
                setvariable('error','fatal error')
            else
                report("job finished within timeout '#{delay}'")
            end
        else
            yield block
        end
    end

should do that (in base/tex.rb)

> Here's an example using one of the problematic files in the test repo.
> [Send the output to a file because it's grows to 14MB.]  This command
>
>   texexec --nonstopmode --timeout=10 tex/context/base/unic-002.tex/test-001.tex
>
> exits with error code 0, but this one
>
>   texexec --nonstopmode tex/context/base/unic-002.tex/test-001.tex
>
> exits with error code 1.  Maybe if it times out it should exit with its
> own code (who knows, maybe 23?).
>
> [I'm testing the above with 2007.01.23]
>
> So I wrote a short Python script (utils/run-it.py in the repo) to handle
> maximum time and maximum filesize, which the Makefile now uses to wrap
> the texexec call.
>
> -Sanjoy
>
> `A nation of slaves is always prepared to applaud the clemency of their
>  master who, in the abuse of absolute power, does not proceed to the
>  last extremes of injustice and oppression.'  (Gibbon)  
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context
>   


-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Mon Feb  5 10:10:18 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 05 Feb 2007 10:10:18 +0100
Subject: [dev-context] regression testing Makefile
In-Reply-To: <E1HDwt1-00082L-00@skye.ra.phy.cam.ac.uk>
References: <E1HDwt1-00082L-00@skye.ra.phy.cam.ac.uk>
Message-ID: <45C6F47A.5090201@wxs.nl>

Sanjoy Mahajan wrote:
>> a few unicode fonts are a problem (maybe
>>     
>>> because I don't have them, but it makes texexec loop for a long time
>>> doing mktextfm and the like).  More details to follow.
>>>   
>>>       
so its' missing tfm files? maybe no latin modern math installed?
>> ok, so we need to set up a procedure for that
>>     
>
> Yeah, the mktexnam processes spawned by pdftex won't easily die.  In
> the python wrapper to handle timeouts and large logfiles, I had to do
> a bit of work: change the process group of the texexec process to a
> new one, let its children inherit that pgrp, and then do killpg on the
> whole bunch.  Without the process group trick, it's not easy to find
> and kill the untamed processes.
>
> By the way, a previous email had the list of troublesome files (in
> terms of compliation, never mind the correctness!).
>
>   
>>> I'd be very surprised if the Makefile worked on anything but Linux (uses
>>> features of bash + GNU make).
>>>   
>>>       
>> once everything is in place we can look into that, for the moment using 
>> linux only is ok
>>     
>
> It might work on MacOS X, since it has bash and probably has GNU make
> somewhere, perhaps as gmake (not sure if BSD make is similar enough to
> GNU make).
>
> -Sanjoy
>
> `Not all those who wander are lost.' (J.R.R. Tolkien)
>   


-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From preining at logic.at  Mon Feb  5 11:45:13 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 5 Feb 2007 11:45:13 +0100
Subject: [dev-context] (fwd) Bug#409749: ppchtex broken
Message-ID: <20070205104513.GA29912@gamma.logic.tuwien.ac.at>

forwarded 409749 dev-context at ntg.nl
thanks

Hi Hans and all ConTeXt devs,

Please see attached bug report I got on the Debian BTS, which includes
also a fix.

----- Forwarded message from Soeren Sonnenburg <bugreports at nn7.de> -----
> From: Soeren Sonnenburg <bugreports at nn7.de>
> Subject: Bug#409749: ppchtex broken
> Date: Mon, 05 Feb 2007 09:07:33 +0100
> 
> ppchex will always fail with
> 
> ===snip===
> ! Undefined control sequence.
> \dosetsubscript #1#2#3->\dimen 0=#3\fontexheight 
>                                                  #2\setxvalue {@@\string #1\...
> l.158 \stopchemical
> ===snip===
> 
> as fontexheight is undefined in /usr/share/texmf/tex/context/base/ppchtex.tex
> 
> To fix this one needs to add the following line to ppchtex.tex
>  (to for example line 15)
> 
> \input syst-fnt.tex

----- End forwarded message -----

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
TUMBY (n.)
The involuntary abdominal gurgling which fills the silence following
someone else's intimate personal revelation.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Mon Feb  5 12:57:14 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 05 Feb 2007 12:57:14 +0100
Subject: [dev-context] (fwd) Bug#409749: ppchtex broken
In-Reply-To: <20070205104513.GA29912@gamma.logic.tuwien.ac.at>
References: <20070205104513.GA29912@gamma.logic.tuwien.ac.at>
Message-ID: <45C71B9A.4000006@wxs.nl>

Norbert Preining wrote:
> forwarded 409749 dev-context at ntg.nl
> thanks
>   
i've added that line to ppchtex.noc (no context)
> Hi Hans and all ConTeXt devs,
>
> Please see attached bug report I got on the Debian BTS, which includes
> also a fix.
>
> ----- Forwarded message from Soeren Sonnenburg <bugreports at nn7.de> -----
>   
>> From: Soeren Sonnenburg <bugreports at nn7.de>
>> Subject: Bug#409749: ppchtex broken
>> Date: Mon, 05 Feb 2007 09:07:33 +0100
>>
>> ppchex will always fail with
>>
>> ===snip===
>> ! Undefined control sequence.
>> \dosetsubscript #1#2#3->\dimen 0=#3\fontexheight 
>>                                                  #2\setxvalue {@@\string #1\...
>> l.158 \stopchemical
>> ===snip===
>>
>> as fontexheight is undefined in /usr/share/texmf/tex/context/base/ppchtex..tex
>>
>> To fix this one needs to add the following line to ppchtex.tex
>>  (to for example line 15)
>>
>> \input syst-fnt.tex
>>     
>
> ----- End forwarded message -----
>
> Best wishes
>
> Norbert
>
> -------------------------------------------------------------------------------
> Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
> Debian Developer <preining at debian.org>                         Debian TeX Group
> gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
> -------------------------------------------------------------------------------
> TUMBY (n.)
> The involuntary abdominal gurgling which fills the silence following
> someone else's intimate personal revelation.
> 			--- Douglas Adams, The Meaning of Liff
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context
>   


-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From sanjoy at mrao.cam.ac.uk  Mon Feb  5 16:33:34 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Mon, 05 Feb 2007 15:33:34 +0000
Subject: [dev-context] texexec --timeout=NN should return nonzero code
	on timeout
In-Reply-To: Your message of "Mon, 05 Feb 2007 10:08:43 +0100."
	<45C6F41B.4080509@wxs.nl> 
Message-ID: <E1HE5qY-0005cu-00@skye.ra.phy.cam.ac.uk>

> If a texexec job runs out of time (--timeout=NN), the exit code should
> be nonzero.  Right now it's zero; which, I just realized, had slightly
> confused the error handling by the regression-testing.
> [snip]
> should do that (in base/tex.rb)

Thanks, I just tested it and it works (exit code is now 1).  So that
change fixes the issue for the future.

It won't solve the issue during regression testing, because the
regression tests use the entire context tree as of a certain date (a
tex version of chroot).  That includes using the ruby scripts from
that version.  That's why I made the run-it.py wrapper despite knowing
that you would fix the texexec return code :-)

I thought about the pros and cons of running the latest texexec using
the old macros, which would mean not needing the run-it.py wrapper.  I
don't think it's worth it.  A document is produced by the whole system
of scripts + ConTeXt macros (+ pdftex, but it cannot so easily be
downgraded/upgraded automatically...).  So we should test the whole
system (i.e. including the old scripts) rather than just the macros.


-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From sanjoy at mrao.cam.ac.uk  Mon Feb  5 17:09:20 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Mon, 05 Feb 2007 11:09:20 -0500
Subject: [dev-context] regression testing Makefile
In-Reply-To: Your message of "Mon, 05 Feb 2007 10:10:18 +0100."
	<45C6F47A.5090201@wxs.nl> 
Message-ID: <E1HE6PA-0000jv-EE@approximate.corpus.cam.ac.uk>

>> a few unicode fonts are a problem
> so its' missing tfm files? maybe no latin modern math installed?

I don't think it's a lack of latin-modern math.  I have the Debian
lmodern-1.00-2 package, which should have the latin-modern math files
too.  In addition it seems to be a unicode-only problem.  Here's one of
the examples, from testing tex/context/base/unic-037.tex/test-001.tex :

  $ utils/what-logfiles-to-see.sh < world.log | xargs grep -l mktexnam
  tex/context/base/unic-037.tex/test-001-20070112.tlog
  tex/context/base/unic-037.tex/test-001-20070123.tlog
  metapost/context/base/mp-text.mp/test-001-20070112.tlog
  metapost/context/base/mp-text.mp/test-001-20070123.tlog

The first piece of the pipe just gets the logfiles where texexec exited
with an error.  So those are the four of those logfiles that have
mktexnam in them.  Looking at the second log shows the kind of error I
was getting:

  systems         : begin file test-001-20070123 at line 19
  (/tmp/a/ctxtrees/20070123/tex/context/base/unic-run.tex)kpathsea: Running mktextfm UnicodeRegular25
  /usr/share/texmf/web2c/mktexnam: Could not map source abbreviation U for UnicodeRegular25.
  /usr/share/texmf/web2c/mktexnam: Need to update /usr/share/texmf-texlive/fonts/map/fontname/special.map?
  mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode; input UnicodeRegular25
  This is METAFONT, Version 2.71828 (Web2C 7.5.5)
  kpathsea: Running mktexmf UnicodeRegular25

  ! I can't find file `UnicodeRegular25'.

That error loops a bunch of times, then the alarm kills it after 20
seconds:

utils/run-it.py: Timeout 20.0 sec reached [texexec --pdf --nonstopmode test-001-20070123.tex]


-Sanjoy

`A nation of slaves is always prepared to applaud the clemency of their
 master who, in the abuse of absolute power, does not proceed to the
 last extremes of injustice and oppression.'  (Gibbon)  

From sanjoy at mrao.cam.ac.uk  Mon Feb  5 17:58:06 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Mon, 05 Feb 2007 11:58:06 -0500
Subject: [dev-context] regression testing: missing fonts (mostly uni-*)
In-Reply-To: Your message of "Mon, 05 Feb 2007 10:10:18 +0100."
	<45C6F47A.5090201@wxs.nl> 
Message-ID: <E1HE7AM-0000na-JQ@approximate.corpus.cam.ac.uk>

Here are the missing font files from the regression testing (using the
2007.01.23 test tree, which is also the systemwide one here).  I've also
included example snippets from the logfiles.

#!/bin/sh
# find-missfonts.log
for f in `find -name missfont.log` ; do
  echo == $f == 
  grep '^mkt' $f | sort -u
done

$ utils/find-missfonts.sh 

== ./tex/context/base/unic-037.tex/missfont.log ==
mktextfm UnicodeRegular25

[from logfile]
...
kpathsea: Running mktextfm UnicodeRegular25
/usr/share/texmf/web2c/mktexnam: Could not map source abbreviation U for UnicodeRegular25.
/usr/share/texmf/web2c/mktexnam: Need to update /usr/share/texmf-texlive/fonts/map/fontname/special.map?
...

== ./tex/context/base/s-chi-00.tex/missfont.log ==

[from logfile]
...
(/tmp/a/ctxtrees/20070123/tex/context/base/s-chi-00.tex
(/tmp/a/ctxtrees/20070123/tex/context/base/font-chi.tex
loading         : Context Font Macros / Chinese
encoding        : coding chi is loaded
(/tmp/a/ctxtrees/20070123/tex/context/base/enco-chi.tex)))
color           : mpcmyk color space is supported
color           : mpspot color space is supported
color           : system rgb is global activated
interaction     : active
(/tmp/a/ctxtrees/20070123/tex/context/base/sort-def.tex)
(/tmp/a/ctxtrees/20070123/tex/context/base/sort-lan.tex)
(/tmp/a/ctxtrees/20070123/tex/context/base/pdfr-def.tex)kpathsea: Running mktextfm uni-htsong-76
...

mktextfm uni-htsong-30
mktextfm uni-htsong-4e
mktextfm uni-htsong-4f
mktextfm uni-htsong-51
mktextfm uni-htsong-53
mktextfm uni-htsong-56
mktextfm uni-htsong-5d
mktextfm uni-htsong-5e
mktextfm uni-htsong-5f
mktextfm uni-htsong-65
mktextfm uni-htsong-67
mktextfm uni-htsong-6c
mktextfm uni-htsong-72
mktextfm uni-htsong-75
mktextfm uni-htsong-76
mktextfm uni-htsong-79
mktextfm uni-htsong-7a
mktextfm uni-htsong-7b
mktextfm uni-htsong-7c
mktextfm uni-htsong-7e
mktextfm uni-htsong-83
mktextfm uni-htsong-8d
mktextfm uni-htsong-8f
mktextfm uni-htsong-90
mktextfm uni-htsong-9a

== ./tex/context/base/s-jap-00.tex/missfont.log ==
[from logfile]
...
(/tmp/a/ctxtrees/20070123/tex/context/base/s-jap-00.tex
(/tmp/a/ctxtrees/20070123/tex/context/base/font-jap.tex
(/tmp/a/ctxtrees/20070123/tex/context/base/font-chi.tex
loading         : Context Font Macros / Chinese
encoding        : coding chi is loaded
(/tmp/a/ctxtrees/20070123/tex/context/base/enco-chi.tex))
loading         : Context Font Macros / Japanese
))
color           : mpcmyk color space is supported
color           : mpspot color space is supported
color           : system rgb is global activated
interaction     : active
(/tmp/a/ctxtrees/20070123/tex/context/base/sort-def.tex)
(/tmp/a/ctxtrees/20070123/tex/context/base/sort-lan.tex)
(/tmp/a/ctxtrees/20070123/tex/context/base/pdfr-def.tex)kpathsea: Running mktextfm uni-cybercjk-76
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode; input uni-cybercjk-76
This is METAFONT, Version 2.71828 (Web2C 7.5.5)
kpathsea: Running mktexmf uni-cybercjk-76

! I can't find file `uni-cybercjk-76'.
...

mktextfm uni-cybercjk-30
mktextfm uni-cybercjk-4f
mktextfm uni-cybercjk-52
mktextfm uni-cybercjk-53
mktextfm uni-cybercjk-5b
mktextfm uni-cybercjk-64
mktextfm uni-cybercjk-6a
mktextfm uni-cybercjk-6b
mktextfm uni-cybercjk-75
mktextfm uni-cybercjk-76
mktextfm uni-cybercjk-7a
mktextfm uni-cybercjk-7b
mktextfm uni-cybercjk-7f
mktextfm uni-cybercjk-80
mktextfm uni-cybercjk-88
mktextfm uni-cybercjk-8a
mktextfm uni-cybercjk-8b
mktextfm uni-cybercjk-96
mktextfm uni-cybercjk-98

== ./metapost/context/base/mp-text.mp/missfont.log ==

[from logfile
...
kpathsea: Running mktextfm ec-iwonar
/usr/share/texmf/web2c/mktexnam: Could not map typeface abbreviation c- for ec-iwonar.
/usr/share/texmf/web2c/mktexnam: Need to update /usr/share/texmf-texlive/fonts/map/fontname/special.map?
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode; input ec-iwonar
This is METAFONT, Version 2.71828 (Web2C 7.5.5)
kpathsea: Running mktexmf ec-iwonar

! I can't find file `ec-iwonar'.
...

mktextfm ec-iwonar
mktextfm ex-iwonar
mktextfm mi-iwonari
mktextfm rm-iwonar
mktextfm sy-iwonarz

From sanjoy at mrao.cam.ac.uk  Mon Feb  5 18:01:52 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Mon, 05 Feb 2007 17:01:52 +0000
Subject: [dev-context] regression testing Makefile
In-Reply-To: Your message of "Mon, 05 Feb 2007 09:49:15 +0100."
	<45C6EF8B.3050003@elvenkind.com> 
Message-ID: <E1HE7E0-0006e8-00@skye.ra.phy.cam.ac.uk>

> IIRC, you can inhibit all the auto-mktex scripts with a setting
> in texmf.cnf or mktex.cnf (or something). If these programs are
> needed, the test was almost certainly failed anyway.

Good idea.  Then I can just look at the missfont.log files.  I'll do
that in the next set of tests.  For now, the auto-mktexing overruns
the timeout, the wrapper script kills it, but the missfont.log has
useful info (with one or two junk lines because the i/o buffers were
not flushed).

I'll also add --passon=-recorder so
that input and output files can be checked.  Although that change will
improve only the recent tests (because --passon was was kaput until
recently).

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From pragma at wxs.nl  Mon Feb  5 16:47:01 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 05 Feb 2007 16:47:01 +0100
Subject: [dev-context] texexec --timeout=NN should return nonzero code
 on timeout
In-Reply-To: <E1HE5qY-0005cu-00@skye.ra.phy.cam.ac.uk>
References: <E1HE5qY-0005cu-00@skye.ra.phy.cam.ac.uk>
Message-ID: <45C75175.6080102@wxs.nl>

Sanjoy Mahajan wrote:
> It won't solve the issue during regression testing, because the
> regression tests use the entire context tree as of a certain date (a
> tex version of chroot).  That includes using the ruby scripts from
> that version.  That's why I made the run-it.py wrapper despite knowing
> that you would fix the texexec return code :-)
>   
sure, makes much sense
> I thought about the pros and cons of running the latest texexec using
> the old macros, which would mean not needing the run-it.py wrapper.  I
> don't think it's worth it.  A document is produced by the whole system
> of scripts + ConTeXt macros (+ pdftex, but it cannot so easily be
> downgraded/upgraded automatically...).  So we should test the whole
> system (i.e. including the old scripts) rather than just the macros.
>   
no, wrappers make sense 

Hans 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From preining at logic.at  Mon Feb  5 18:06:49 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 5 Feb 2007 18:06:49 +0100
Subject: [dev-context] texexec and return value
Message-ID: <20070205170649.GB2103@gamma.logic.tuwien.ac.at>

# texexec --nonstopmode --fast --make --pdftex cont-en
TeXExec | using search method 'kpsewhich'
TeXExec | using existing database
TeXExec | using tex engine pdftex
TeXExec | using tex format path /var/lib/texmf/web2c/pdftex
TeXExec | unable to make format due to lack of permissions
TeXExec | 
TeXExec | 
TeXExec | 
TeXExec | runtime: 0.195613
# echo $?
0
#

Can we fix this? The lack of permissions is of course a fake, the
problem is that there is a link
	pdftex -> pdfetex
in /var/lib/texmf/web2c/, but no directory pdfetex. But still texexec
should return something \not= 0

Thanks and all the best

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
DUNGENESS (n.)
The uneasy feeling that the plastic handles of the overloaded
supermarket carrier bag you are carrying are getting steadily longer.
			--- Douglas Adams, The Meaning of Liff

From adityam at umich.edu  Mon Feb  5 18:22:50 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 5 Feb 2007 12:22:50 -0500 (EST)
Subject: [dev-context] feature requests from contextgarden
In-Reply-To: <45C6EE00.7040407@elvenkind.com>
References: <6faad9f00702041627u4c7fa357l454e876026b705ba@mail.gmail.com>
	<45C6EE00.7040407@elvenkind.com>
Message-ID: <alpine.WNT.0.82.0702051219120.2800@nqvgln>

On Mon, 5 Feb 2007, Taco Hoekwater wrote:

> \Fixme will be the topic of the `how to write a module' tutorial at Epen

Great! I have been planning to write a module that does something like 
that, but I have never managed to completely figure out the type of 
output that I want (endnote, footnote, sidenote,) and the features to 
support: list of fixme's, how critical is the fixme (show in log, give 
a warning, give a error), etc.

Aditya



From karl at huftis.org  Mon Feb  5 18:27:03 2007
From: karl at huftis.org (Karl Ove Hufthammer)
Date: Mon, 05 Feb 2007 18:27:03 +0100
Subject: [dev-context] Improved support for Norwegian in ConTeXt
In-Reply-To: <6faad9f00702041641k694803b5l68f14a6a7579a32a@mail.gmail.com>
References: <200702041500.47359.karl@huftis.org> <45C652E6.80009@wxs.nl>
	<6faad9f00702041641k694803b5l68f14a6a7579a32a@mail.gmail.com>
Message-ID: <200702051827.03831.karl@huftis.org>

M?ndag 05 februar 2007 01:41 skreiv Mojca Miklavec:

>Naturally, only the Babel maintainers can change Babel. ?All I can
>suggest filing a report in the latex bug database. ?Although quick
>action is unlikely, at least that way it can be considered. ?Presumably
>the bokmal name could become the canonical one, and Norwegian+norsk just
>left as aliases for compatibility.

Yes, that sounds like a good solution.

>? ?Would it be possible to have two different hyphenation dictionaries
>? ?for 'nb' and 'nn', which would only differ in the hyphenation
>? ?exceptions used for these two words?
>
>Anything is possible. ?Maybe a good approach would be to create
>nbhyph.tex and nnhyph.tex, which \input nohyphbx.tex and then add the
>necessary exceptions. ?Then I can make languages nb and nn in TL which
>\input the new files.
>
>Can you upload a new package to CTAN with those files?

Will do. I have contacted the author of the nohyphbx.tex hyphenation patterns 
to hear if he has any comments (or objections!). If everything works out all 
right, I will upload the new files to CTAN in the not to distant future.

-- 
Karl Ove Hufthammer
E-mail and Jabber: karl at huftis.org

From pragma at wxs.nl  Mon Feb  5 18:45:18 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 05 Feb 2007 18:45:18 +0100
Subject: [dev-context] regression testing Makefile
In-Reply-To: <E1HE6PA-0000jv-EE@approximate.corpus.cam.ac.uk>
References: <E1HE6PA-0000jv-EE@approximate.corpus.cam.ac.uk>
Message-ID: <45C76D2E.3040809@wxs.nl>

Sanjoy Mahajan wrote:
>
>
>   systems         : begin file test-001-20070123 at line 19
>   (/tmp/a/ctxtrees/20070123/tex/context/base/unic-run.tex)kpathsea: Running mktextfm UnicodeRegular25
>   /usr/share/texmf/web2c/mktexnam: Could not map source abbreviation U for UnicodeRegular25.
>   /usr/share/texmf/web2c/mktexnam: Need to update /usr/share/texmf-texlive/fonts/map/fontname/special.map?
>   mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode; input UnicodeRegular25
>   This is METAFONT, Version 2.71828 (Web2C 7.5.5)
>   kpathsea: Running mktexmf UnicodeRegular25
>
>   ! I can't find file `UnicodeRegular25'.
>   
ok, this comes because UnicodeRegular is not mapped onto a real font; such unicode things assume a font split up in ranges, so, best ask the author of the test what was meant to be 

Hans 
 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From sanjoy at mrao.cam.ac.uk  Mon Feb  5 19:07:16 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Mon, 05 Feb 2007 13:07:16 -0500
Subject: [dev-context] --passon won't pass on two arguments to pdftex
Message-ID: <E1HE8FI-0001kA-3N@approximate.corpus.cam.ac.uk>

Also from the testing scripts, another small buglet.  I can't figure out
how to pass on two cmdline arguments to pdftex.  I tried these ways

  texexec --nonstopmode --passon="-file-line-error -recorder" a.tex
  texexec --nonstopmode --passon="-recorder -file-line-error" a.tex

but it seems that only the first piece is passed on (either
-file-line-error or -recorder), rather than both.  (Linux, i386, Ubuntu,
bash shell, 2007.01.23 version).

Giving two passon options also doesn't work, at least not that I could
find.

-Sanjoy

`A nation of slaves is always prepared to applaud the clemency of their
 master who, in the abuse of absolute power, does not proceed to the
 last extremes of injustice and oppression.'  (Gibbon)  

From taco at elvenkind.com  Mon Feb  5 19:25:05 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 05 Feb 2007 19:25:05 +0100
Subject: [dev-context] regression testing Makefile
In-Reply-To: <45C76D2E.3040809@wxs.nl>
References: <E1HE6PA-0000jv-EE@approximate.corpus.cam.ac.uk>
	<45C76D2E.3040809@wxs.nl>
Message-ID: <45C77681.7030803@elvenkind.com>

Hans Hagen wrote:
> Sanjoy Mahajan wrote:
> 
>>
>>  systems         : begin file test-001-20070123 at line 19
>>  (/tmp/a/ctxtrees/20070123/tex/context/base/unic-run.tex)kpathsea: Running mktextfm UnicodeRegular25
>>  /usr/share/texmf/web2c/mktexnam: Could not map source abbreviation U for UnicodeRegular25.
>>  /usr/share/texmf/web2c/mktexnam: Need to update /usr/share/texmf-texlive/fonts/map/fontname/special.map?
>>  mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode; input UnicodeRegular25
>>  This is METAFONT, Version 2.71828 (Web2C 7.5.5)
>>  kpathsea: Running mktexmf UnicodeRegular25
>>
>>  ! I can't find file `UnicodeRegular25'.
>>  
> 

> ok, this comes because UnicodeRegular is not mapped onto a real font; such unicode things assume 
> a font split up in ranges, so, best ask the author of the test what was meant to be 

The author of the test may well have been me, I think I wrote a set for
each of the (at that point in time) existing Unicode blocks.

If the macros in unic-037 do not map to a real font and therefore raises
an error, then the test 'works', in my view.


Taco

From pragma at wxs.nl  Mon Feb  5 18:27:39 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 05 Feb 2007 18:27:39 +0100
Subject: [dev-context] texexec and return value
In-Reply-To: <20070205170649.GB2103@gamma.logic.tuwien.ac.at>
References: <20070205170649.GB2103@gamma.logic.tuwien.ac.at>
Message-ID: <45C7690B.1010202@wxs.nl>

Norbert Preining wrote:
> # texexec --nonstopmode --fast --make --pdftex cont-en
> TeXExec | using search method 'kpsewhich'
> TeXExec | using existing database
> TeXExec | using tex engine pdftex
> TeXExec | using tex format path /var/lib/texmf/web2c/pdftex
> TeXExec | unable to make format due to lack of permissions
> TeXExec | 
> TeXExec | 
> TeXExec | 
> TeXExec | runtime: 0.195613
> # echo $?
> 0
> #
>
> Can we fix this? The lack of permissions is of course a fake, the
> problem is that there is a link
> 	pdftex -> pdfetex
> in /var/lib/texmf/web2c/, but no directory pdfetex. But still texexec
> should return something \not= 0
>   
report("unable to make format due to lack of permissions")
mpsformatpath = ''
setvariable('error','file permission problem')


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From sanjoy at mrao.cam.ac.uk  Mon Feb  5 21:22:26 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Mon, 05 Feb 2007 15:22:26 -0500
Subject: [dev-context] --passon won't pass on two arguments to pdftex
In-Reply-To: Your message of "Mon, 05 Feb 2007 20:33:29 +0100."
	<45C78689.3000900@wxs.nl> 
Message-ID: <E1HEAM7-0002U0-7z@approximate.corpus.cam.ac.uk>

Hans suggested:
>> Giving two passon options also doesn't work, at least not that I
>> could find.
> you can run with --verbose to see  what is passed

Good idea.  Indeed, only one the first option is passed to pdftex:

$ texexec --verbose --nonstopmode --pdf \
--passon="-file-line-error -recorder" a.tex | grep 'running.*pdftex'

TeXExec | running: pdftex -progname=context -fmt=cont-en -translate-file=natural.tcx -file-line-error --8bit a.tex \emergencyend

-Sanjoy

`A nation of slaves is always prepared to applaud the clemency of their
 master who, in the abuse of absolute power, does not proceed to the
 last extremes of injustice and oppression.'  (Gibbon)  

From sanjoy at mrao.cam.ac.uk  Tue Feb  6 00:06:45 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Mon, 05 Feb 2007 18:06:45 -0500
Subject: [dev-context] regression testing: 3 tex errors
Message-ID: <E1HECv7-0006Bs-5J@approximate.corpus.cam.ac.uk>

Here are the three compilation errors (first one from each file with an
error).  The Unicode and ec-iwona errors were mentioned before, so I'm
skipping them here.  svn says who contributed the test files.

Taco, do you know if these tests are outdated, or whether a behavior has
changed but shouldn't have?

-Sanjoy


======================================================================
[r2 | taco | 2006-03-31 10:15:34 -0500 (Fri, 31 Mar 2006)]
[the remaining unicode tables]

./tex/context/base/unic-031.tex/test-001.tex:21: Undefined control sequence.
\@default at greekEpsilonvaria ->\varia 
                                     \greekEpsilon 
<argument> ...ode \strut \unicodechar \entrypoint 
                                                  \endgraf }\tt \chardef \ut...

\handleTBLcell ...{\bTBLCELL \TBLcharalign {#2}{#4
                                                  }\eTBLCELL \inTBLcell {#1}...
<inserted text> ...3}\nexttblcol \makeTBL {10}{14}
                                                  \nexttblcol \makeTBL {10}{...

\endTBL ...x {\trialtypesettingtrue \the \tbltoks 
                                                  }\settbldis \maximumcol {\...

\eTABLE ...}}\eTBL }\removeunwantedspaces \endTBL 
                                                  \stopTBLprocessing \fi \eg...
...


======================================================================
[r15 | taco | 2006-05-18 02:53:51 -0400 (Thu, 18 May 2006)]
[\startalign tests]

./tex/context/base/core-mat.tex/test-001.tex:25: Extra alignment tab has been changed to \cr.
<template> $}\endtemplate 
                          
\doalignNC #1->&
                #1
l.25 ... + b_1 y \NC = c_1 \NC d_1 u + e_1 v \NC =
                                                   f_1 \NR

======================================================================
[r2 | taco | 2006-03-31 10:15:34 -0500 (Fri, 31 Mar 2006)]
[the remaining unicode tables]

./tex/context/base/unic-002.tex/test-001.tex:21: Missing \endcsname inserted.
<to be read again> 
                   \numexpr 
\univ2 ...stroke \or \Lbar \else \ifcase \numexpr 
                                                  #1-83\relax \bhook \or \un...

\utf!3! ... \csname \@@univector #1\endcsname {#2}
                                                  \endcsname 
<argument> ...ode \strut \unicodechar \entrypoint 
                                                  \endgraf }\tt \chardef \ut...

\handleTBLcell ...{\bTBLCELL \TBLcharalign {#2}{#4
                                                  }\eTBLCELL \inTBLcell {#1}...
<inserted text> ...}{5}\nexttblcol \makeTBL {2}{6}
                                                  \nexttblcol \makeTBL {2}{7...
...
l.21 ...{\scale[factor=max]{\showunicodetable[002]
                                                  }}


From sanjoy at mrao.cam.ac.uk  Tue Feb  6 00:44:34 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Mon, 05 Feb 2007 18:44:34 -0500
Subject: [dev-context] regression testing: page image differences
Message-ID: <E1HEDVi-0006ys-Qn@approximate.corpus.cam.ac.uk>

Here are output differences between 20070112 and 20070123, mostly to
test the regression tests.  Here's how to decode it.  The line

  WARN: tex/context/base/math-pln.tex/test-001-20070112-20070123.report

means tex/context/base/math-pln.tex/test-001.tex was run through
20070112 and 20070123 to make pdf files, converted to bitmaps, and
subtracted (page by page), and that there were some differences.  The
line

    [p.0001] 0.176462 dB diff [see png's in /tmp/tmp.mRMxS24124/]

menas that p.1 was different in the two runs, but only slightly (about
0.2 dB).  Here another example with a slightly larger dB difference:

  WARN: tex/context/base/core-mat.tex/test-001-20070112-20070123.report
    [p.0001] 5.00882 dB diff [see png's in /tmp/tmp.UllhY25247/]

for which I've attached the two images and their difference.  It's
slight character position shifts, I think.

  WARN: tex/context/base/math-pln.tex/test-001-20070112-20070123.report
    [p.0001] 0.176462 dB diff [see png's in /tmp/tmp.mRMxS24124/]
  WARN: tex/context/base/unic-034.tex/test-001-20070112-20070123.report
    [p.0001] 1.68318 dB diff [see png's in /tmp/tmp.lkiMH24898/]
  WARN: tex/context/base/unic-039.tex/test-001-20070112-20070123.report
    [p.0001] 0.0678701 dB diff [see png's in /tmp/tmp.QRvMD25106/]
  WARN: tex/context/base/core-mat.tex/test-004-20070112-20070123.report
    [p.0001] 4.56087 dB diff [see png's in /tmp/tmp.jtiqZ25156/]
    [p.0002] 4.83235 dB diff [see png's in /tmp/tmp.jtiqZ25156/]
  WARN: tex/context/base/core-mat.tex/test-001-20070112-20070123.report
    [p.0001] 5.00882 dB diff [see png's in /tmp/tmp.UllhY25247/]
  WARN: tex/context/base/core-mat.tex/test-002-20070112-20070123.report
    [p.0001] 3.31206 dB diff [see png's in /tmp/tmp.TFjDk25293/]
  WARN: tex/context/base/core-mat.tex/test-003-20070112-20070123.report
    [p.0001] 0.475091 dB diff [see png's in /tmp/tmp.uaWCt25342/]
  WARN: tex/context/base/unic-000.tex/test-001-20070112-20070123.report
    [p.0001] 0.0814442 dB diff [see png's in /tmp/tmp.BDorO26317/]
  WARN: tex/context/base/unic-003.tex/test-001-20070112-20070123.report
    [p.0001] 0.0678701 dB diff [see png's in /tmp/tmp.lzEhB26435/]
  WARN: tex/context/base/core-itm.tex/test-001-20070112-20070123.report
    [p.0001] 0.352925 dB diff [see png's in /tmp/tmp.RDqzg26640/]
    [p.0002] 0.746572 dB diff [see png's in /tmp/tmp.RDqzg26640/]
    [p.0003] 1.85964 dB diff [see png's in /tmp/tmp.RDqzg26640/]
    [p.0004] 4.57445 dB diff [see png's in /tmp/tmp.RDqzg26640/]
    [p.0005] 1.03163 dB diff [see png's in /tmp/tmp.RDqzg26640/]

-Sanjoy

`A nation of slaves is always prepared to applaud the clemency of their
 master who, in the abuse of absolute power, does not proceed to the
 last extremes of injustice and oppression.'  (Gibbon)  

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/x-gtar
Size: 36292 bytes
Desc: page images
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070205/ff82fee3/attachment-0001.gtar 

From adityam at umich.edu  Tue Feb  6 00:56:20 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 5 Feb 2007 18:56:20 -0500 (EST)
Subject: [dev-context] regression testing: page image differences
In-Reply-To: <E1HEDVi-0006ys-Qn@approximate.corpus.cam.ac.uk>
References: <E1HEDVi-0006ys-Qn@approximate.corpus.cam.ac.uk>
Message-ID: <alpine.WNT.0.82.0702051855250.2248@nqvgln>

On Mon, 5 Feb 2007, Sanjoy Mahajan wrote:

> Here are output differences between 20070112 and 20070123, mostly to
> test the regression tests.  Here's how to decode it.  The line
>
>  WARN: tex/context/base/math-pln.tex/test-001-20070112-20070123.report
>
> means tex/context/base/math-pln.tex/test-001.tex was run through
> 20070112 and 20070123 to make pdf files, converted to bitmaps, and
> subtracted (page by page), and that there were some differences.  The
> line
>
>    [p.0001] 0.176462 dB diff [see png's in /tmp/tmp.mRMxS24124/]
>
> menas that p.1 was different in the two runs, but only slightly (about
> 0.2 dB).  Here another example with a slightly larger dB difference:

Could it be because of the differences between lm-math and cm-math 
fonts?

Aditya

From sanjoy at mrao.cam.ac.uk  Tue Feb  6 03:32:33 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Tue, 06 Feb 2007 02:32:33 +0000
Subject: [dev-context] regression testing: page image differences
In-Reply-To: Your message of "Mon, 05 Feb 2007 18:56:20 EST."
	<alpine.WNT.0.82.0702051855250.2248@nqvgln> 
Message-ID: <E1HEG8H-0004aM-00@skye.ra.phy.cam.ac.uk>

>> menas that p.1 was different in the two runs, but only slightly (about
>> 0.2 dB).  Here another example with a slightly larger dB difference:

> Could it be because of the differences between lm-math and cm-math
> fonts?

Good thought.  I'm pretty sure you're right.  Here's one of the 5dB
differences.  Each pdf file uses five fonts, and the two fonts that
vary between the files are the math ones:

$ pdffonts tex/context/base/core-mat.tex/test-001-20070112.pdf > 1
$ pdffonts tex/context/base/core-mat.tex/test-001-20070123.pdf > 2
$ diff -U0 1 2

--- 1	 2007-02-05 21:29:55.000000000 -0500
+++ 2	 2007-02-05 21:29:55.000000000 -0500
@@ -4 +4 @@
-XXFRMY+CMMI12                        Type 1       yes yes yes      5  0
+URGTRZ+LMMathItalic12-Italic         Type 1       yes yes yes      5  0
@@ -7 +7 @@
-FXXUVH+CMSY10                        Type 1       yes yes yes      8  0
+DOUOBX+LMMathSymbols10-Italic        Type 1       yes yes yes      8  0

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From taco at elvenkind.com  Tue Feb  6 09:12:35 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 06 Feb 2007 09:12:35 +0100
Subject: [dev-context] regression testing: page image differences
In-Reply-To: <E1HEG8H-0004aM-00@skye.ra.phy.cam.ac.uk>
References: <E1HEG8H-0004aM-00@skye.ra.phy.cam.ac.uk>
Message-ID: <45C83873.3040607@elvenkind.com>

Sanjoy Mahajan wrote:
>>>menas that p.1 was different in the two runs, but only slightly (about
>>>0.2 dB).  Here another example with a slightly larger dB difference:
> 
> 
>>Could it be because of the differences between lm-math and cm-math
>>fonts?
> 
> Good thought.  I'm pretty sure you're right.  Here's one of the 5dB
> differences.  Each pdf file uses five fonts, and the two fonts that
> vary between the files are the math ones:

That is my guess as well (looks like a hinting difference, actually).

Best, Taco

From taco at elvenkind.com  Tue Feb  6 09:23:12 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 06 Feb 2007 09:23:12 +0100
Subject: [dev-context] regression testing: 3 tex errors
In-Reply-To: <E1HECv7-0006Bs-5J@approximate.corpus.cam.ac.uk>
References: <E1HECv7-0006Bs-5J@approximate.corpus.cam.ac.uk>
Message-ID: <45C83AF0.6000609@elvenkind.com>

Sanjoy Mahajan wrote:
> Here are the three compilation errors (first one from each file with an
> error).  The Unicode and ec-iwona errors were mentioned before, so I'm
> skipping them here.  svn says who contributed the test files.
> 
> Taco, do you know if these tests are outdated, or whether a behavior has
> changed but shouldn't have?
> 
> -Sanjoy
> 
> 
> ======================================================================
> [r2 | taco | 2006-03-31 10:15:34 -0500 (Fri, 31 Mar 2006)]
> [the remaining unicode tables]
> 
> ./tex/context/base/unic-031.tex/test-001.tex:21: Undefined control sequence.
> \@default at greekEpsilonvaria ->\varia 
>                                      \greekEpsilon 

This is an actual bug, I think. I assume that the characters in 
enco-agr.tex should use \greekvaria instead of just \varia. Thomas?

> ======================================================================
> [r15 | taco | 2006-05-18 02:53:51 -0400 (Thu, 18 May 2006)]
> [\startalign tests]
> 
> ./tex/context/base/core-mat.tex/test-001.tex:25: Extra alignment tab has been changed to \cr.
> <template> $}\endtemplate 
>                           
> \doalignNC #1->&
>                 #1
> l.25 ... + b_1 y \NC = c_1 \NC d_1 u + e_1 v \NC =
>                                                    f_1 \NR

That one was diagnosed (and solved) by Aditya already.
(test was wrong)

> ======================================================================
> [r2 | taco | 2006-03-31 10:15:34 -0500 (Fri, 31 Mar 2006)]
> [the remaining unicode tables]
> 
> ./tex/context/base/unic-002.tex/test-001.tex:21: Missing \endcsname inserted.
> <to be read again> 
>                    \numexpr 
> \univ2 ...stroke \or \Lbar \else \ifcase \numexpr 
>                                                   #1-83\relax \bhook \or \un...

This is probably a bug in the vector that is triggered by
\showunicodetable: \strippedcsname does not like the second
\numexpr. It would be better to write the unic-002 as one
large \ifcase instead of attempting to be space-efficient
by using offsets. Hans?

Best, Taco

From pragma at wxs.nl  Tue Feb  6 09:58:19 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 06 Feb 2007 09:58:19 +0100
Subject: [dev-context] --passon won't pass on two arguments to pdftex
In-Reply-To: <E1HEAM7-0002U0-7z@approximate.corpus.cam.ac.uk>
References: <E1HEAM7-0002U0-7z@approximate.corpus.cam.ac.uk>
Message-ID: <45C8432B.1020906@wxs.nl>

Sanjoy Mahajan wrote:
> Hans suggested:
>   
>>> Giving two passon options also doesn't work, at least not that I
>>> could find.
>>>       
>> you can run with --verbose to see  what is passed
>>     
>
> Good idea.  Indeed, only one the first option is passed to pdftex:
>
> $ texexec --verbose --nonstopmode --pdf \
> --passon="-file-line-error -recorder" a.tex | grep 'running.*pdftex'
>
> TeXExec | running: pdftex -progname=context -fmt=cont-en -translate-file=natural.tcx -file-line-error --8bit a.tex \emergencyend
>   
I remember fixing something ... 

>texexec --verbose --pass="-file-line-error -recorder" test
TeXExec | processing document 'test'
TeXExec | using search method 'kpsewhich'
TeXExec | no ctx file found
TeXExec | using search method 'kpsewhich'
TeXExec | tex processing method: context
TeXExec | TeX run 1
TeXExec | writing option file test.top
TeXExec | using randomseed 469
TeXExec | tex engine: pdftex
TeXExec | tex format: cont-en
TeXExec | fixing backend map path for pdftex
TeXExec | running: pdftex -progname=context -fmt=cont-en -translate-file=natural.tcx -file-line-error -recorder --8bit t
est.tex \emergencyend
This is pdfTeXk, Version 3.141592-1.40.1 (Web2C 7.5.6)

works here, so do ou use the latest texexec? if not i can send you a tex.rb file 

(puzzled by the pdfTeXK name ...) 

Hans


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From sanjoy at mrao.cam.ac.uk  Tue Feb  6 14:13:18 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Tue, 06 Feb 2007 13:13:18 +0000
Subject: [dev-context] --passon won't pass on two arguments to pdftex
In-Reply-To: Your message of "Tue, 06 Feb 2007 09:58:19 +0100."
	<45C8432B.1020906@wxs.nl> 
Message-ID: <E1HEQ8M-0001mH-00@skye.ra.phy.cam.ac.uk>

> > TeXExec | running: pdftex -progname=context -fmt=cont-en -translate-file=natural.tcx -file-line-error --8bit a.tex \emergencyend
> >   
> I remember fixing something ... 

I had used the 2007.01.23 13:32 tree with texexec 6.2.0, and I just
retested using the current current
http://www.pragma-ade.com/context/latest/cont-tmf.zip (it is also
2007.01.23, and gave the same results).

> works here, so do you use the latest texexec? if not i can send you
> a tex.rb file 

Do send the tex.rb.  Maybe the fix hasn't made it into the
distribution or it is in a beta version (which I'm happy to download
and try)?

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From sanjoy at mrao.cam.ac.uk  Tue Feb  6 14:41:44 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Tue, 06 Feb 2007 13:41:44 +0000
Subject: [dev-context] regression testing: 3 tex errors
In-Reply-To: Your message of "Tue, 06 Feb 2007 09:39:31 +0100."
	<DC15BD1E-D2DF-4683-B862-6991D8D5C513@uni-bonn.de> 
Message-ID: <E1HEQZs-0001wz-00@skye.ra.phy.cam.ac.uk>

> Sanjoy or Taco, could you rename character 92 in enco-agr.tex and see
> if this makes the error disappear?

I did this:

  \definecharacter varia                              92

and remade the formats.  The error is different now:

/tmp/testing123/tex/context/base/unic-031.tex/test-001.tex:21: Undefined contro
l sequence.
\@default at greekAlphaiotasubdasiavaria ...siavaria 
                                                  \greekAlpha \greekiota 

Should I make the same change to other lines in enco-agr.tex?

By the way, here's the test file:

\setuppapersize
  [S6][S6]

\setupbodyfont
  [10pt]

\setuplayout
  [backspace=12pt,
   topspace=12pt,
   width=middle,
   height=middle,
   header=0pt,
   footer=0pt]

\setupcolors
  [state=start]

\starttext

\centerbox{\scale[factor=max]{\showunicodetable[002]}}

\stoptext

From sanjoy at mrao.cam.ac.uk  Tue Feb  6 14:48:10 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Tue, 06 Feb 2007 13:48:10 +0000
Subject: [dev-context] regression testing: 3 tex errors
In-Reply-To: Your message of "Tue, 06 Feb 2007 09:23:12 +0100."
	<45C83AF0.6000609@elvenkind.com> 
Message-ID: <E1HEQg6-00020a-00@skye.ra.phy.cam.ac.uk>

> > ./tex/context/base/core-mat.tex/test-001.tex:25: Extra alignment tab
> That one was diagnosed (and solved) by Aditya already.
> (test was wrong)

Ah, I forgot about 'svn update'.  Now I see the fix:

  $ svn update
  U    tex/context/base/core-mat.tex/test-001.tex
  Updated to revision 51.
  $ svn log ./tex/context/base/core-mat.tex/test-001.tex
  ------------------------------------------------------------------------
  r47 | adityam | 2007-02-05 01:18:09 -0500 (Mon, 05 Feb 2007) | 3 lines

  Added m=2 to one of the formulas

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From sanjoy at mrao.cam.ac.uk  Tue Feb  6 15:09:13 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Tue, 06 Feb 2007 09:09:13 -0500
Subject: [dev-context] regression testing: 3 tex errors
In-Reply-To: Your message of "Tue, 06 Feb 2007 14:58:11 +0100."
	<1F7692C0-A267-44DF-BF59-9397BF66E47A@uni-bonn.de> 
Message-ID: <E1HER0T-0001pw-Jo@approximate.corpus.cam.ac.uk>

> there is a typo in line 319 of enco-agr.tex.  Correct
> "greeldasiavaria" to "greekdasiavaria," and you should be in
> business...

No problem.  That change makes it compile fine.

> I'm afraid your document doesn't compile at all with my version of ConTeXt
> ConTeXt  ver: 2007.01.23 13:32 MKII  fmt: 2007.2.6  int: english/english

That's strange!  I'm using the same version:

  ConTeXt  ver: 2007.01.23 13:32 MKII  fmt: 2007.2.6  int: english/english

Even the dates match for when the format was remade (I just remade them
for the greekdasiavaria change)!

> so I can't help you testing.

I've attached the PDF in case you see any problems with it.  Meanwhile
I'm curious why it doesn't compile on your system.  I'm using Ubuntu
Linux/i386, Debian TeXlive packages, pdftex 1.40.0 (plus Taco's fix for
the core dump).

-Sanjoy

`A nation of slaves is always prepared to applaud the clemency of their
 master who, in the abuse of absolute power, does not proceed to the
 last extremes of injustice and oppression.'  (Gibbon)  

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pdf
Size: 64106 bytes
Desc: agr test
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070206/45eb1e33/attachment-0001.pdf 

From sanjoy at mrao.cam.ac.uk  Tue Feb  6 15:21:01 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Tue, 06 Feb 2007 09:21:01 -0500
Subject: [dev-context] --passon won't pass on two arguments to pdftex
In-Reply-To: Your message of "Tue, 06 Feb 2007 09:58:19 +0100."
	<45C8432B.1020906@wxs.nl> 
Message-ID: <E1HERBt-0001rM-KU@approximate.corpus.cam.ac.uk>

>This is pdfTeXk, Version 3.141592-1.40.1 (Web2C 7.5.6)
>puzzled by the pdfTeXK name

Me too.  It just started happening here as well, even though running
pdftex gives only 'This is pdftex'.  I'm not sure what the cause is.

Meanwhile on the --passon: No luck even with the tex.rb that you sent me
offlist.  Here's the results in testing tree:

  $ TEXMFVAR=$PWD texexec --verbose --nonstopmode --passon="-file-line-error -recorder" /tmp/a.tex
  /tmp/2/scripts/context/ruby/texmfstart.rb:1838: warning: Insecure world writable dir /tmp, mode 041777
  TeXExec | processing document '/tmp/a.tex'
  TeXExec | using search method 'kpsewhich'
  ...
  TeXExec | running: pdftex -progname=context -fmt=cont-en -translate-file=natural.tcx -file-line-error --8bit /tmp/a.tex \emergencyend
  This is pdfTeXk, Version 3.141592-1.40.0 (Web2C 7.5.6)
   \write18 enabled.
   file:line:error style messages enabled.

So no -recorder option or a.fls file.

Using the usual scripts gives me the same result:

  $ texexec --verbose --nonstopmode --passon="-file-line-error -recorder" /tmp/a.tex
  /usr/share/texmf/scripts/context/ruby/texmfstart.rb:1838: warning: Insecure world writable dir /tmp, mode 041777
  /usr/share/texmf/scripts/context/ruby/base/system.rb:16: warning: Insecure world writable dir /tmp, mode 041777
  TeXExec | processing document '/tmp/a.tex'
  TeXExec | using search method 'kpsewhich'
  ...
  TeXExec | running: pdftex -progname=context -fmt=cont-en -translate-file=natural.tcx -file-line-error --8bit /tmp/a.tex \emergencyend
  This is pdfTeXk, Version 3.141592-1.40.0 (Web2C 7.5.6)
   \write18 enabled.
   file:line:error style messages enabled.


The diff doesn't have any changes that might fix --passon, so maybe the
fix lives in another .rb file?

$ find /usr/share/texmf/ . -name tex.rb | xargs diff -u
--- /usr/share/texmf/scripts/context/ruby/base/tex.rb	2007-01-22 08:04:35.000000000 -0500
+++ ./scripts/context/ruby/base/tex.rb	2007-02-06 08:59:02.000000000 -0500
@@ -671,6 +671,7 @@
             else
                 report("unable to make format due to lack of permissions")
                 texformatpath = ''
+                setvariable('error','no permissions to write')
             end
         else
             texformatpath = ''
@@ -1103,8 +1104,10 @@
                 end
             rescue TimeoutError
                 report("job aborted due to timeout '#{delay}'")
+                setvariable('error','timeout')
             rescue
                 report("job aborted due to error")
+                setvariable('error','fatal error')
             else
                 report("job finished within timeout '#{delay}'")
             end



-Sanjoy

`A nation of slaves is always prepared to applaud the clemency of their
 master who, in the abuse of absolute power, does not proceed to the
 last extremes of injustice and oppression.'  (Gibbon)  

From mgb-debian at yosemite.net  Tue Feb  6 23:01:31 2007
From: mgb-debian at yosemite.net (Mike Bird)
Date: Tue, 6 Feb 2007 14:01:31 -0800
Subject: [dev-context] Debian Context Font problems
Message-ID: <200702061401.34142.mgb-debian@yosemite.net>

Hi Norbert,

Here's a simple test case illustrative of the reason why I don't
use Debian Context packages 2007.01.23-1 and 2007.01.23-2.

\starttext
\S1
\blank[big]
\S2\crlf\S3
\stoptext

In 2007.01.12.2-1 this works fine but in later contexts the
section symbols are so tall that those for 2 and 3 overlap.

Here's the pdffont output for the PDF generated by 01.12:
name                                 type         emb sub uni object ID
------------------------------------ ------------ --- --- --- ---------
JWRWBM+LMRoman12-Regular             Type 1       yes yes yes      7  0
BRHVGD+CMSY10                        Type 1       yes yes no      10  0

And here's the pdffont output for the PDF generated by 01.23:
name                                 type         emb sub uni object ID
------------------------------------ ------------ --- --- --- ---------
EXKOFC+LMRoman12-Regular             Type 1       yes yes yes      7  0
JRTCBR+LMMathSymbols10-Italic        Type 1       yes yes no      10  0

The section symbols look OK once they reach print preview but the
mess in the PDF viewer from section symbols and other characters
means that I have to keep using 2007.01.12.2-1 for now.

My lmodern is 1.00-3 and my pdftex is pdfetex 1.30.5-2.2 from
texlive-base-bin 2005.dfsg.2-10.

Is this something you can reproduce or something I've messed up
in my configuration?

Thanks,

--Mike Bird

From preining at logic.at  Tue Feb  6 23:45:41 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 6 Feb 2007 23:45:41 +0100
Subject: [dev-context] Debian Context Font problems
In-Reply-To: <200702061401.34142.mgb-debian@yosemite.net>
References: <200702061401.34142.mgb-debian@yosemite.net>
Message-ID: <20070206224541.GA11287@gamma.logic.tuwien.ac.at>

Hi Mike!

On Die, 06 Feb 2007, Mike Bird wrote:
> \starttext
> \S1
> \blank[big]
> \S2\crlf\S3
> \stoptext
> 
> In 2007.01.12.2-1 this works fine but in later contexts the
> section symbols are so tall that those for 2 and 3 overlap.

Hmm, I cannot confirm this. Please see attached output.png which shows
test.pdf in xpdf, and I don't see an overlap.

I attach also test.log, maybe you find a difference in it. 

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
SLUBBERY (n.)
The gooey drips of wax that dribble down the sides of a candle so
beloved by Italian restaurants with Chianti bottles instead of
wallpaper.
			--- Douglas Adams, The Meaning of Liff
-------------- next part --------------
A non-text attachment was scrubbed...
Name: output.png
Type: image/png
Size: 1871 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070206/087ddb08/attachment.png 
-------------- next part --------------
This is pdfeTeX, Version 3.141592-1.30.5-2.2 (Web2C 7.5.5) (format=cont-en 2007.2.5)  6 FEB 2007 23:41
entering extended mode
\write18 enabled.
 (/usr/share/texmf/web2c/natural.tcx)
**test.tex emergencyend
(./test.tex

ConTeXt  ver: 2007.01.23 13:32 MKII  fmt: 2007.2.5  int: english/english

language        : language en is active
system          : cont-new loaded
(/usr/share/texmf/tex/context/base/cont-new.tex
systems         : beware: some patches loaded from cont-new.tex
\boislevel=\count212
(/usr/share/texmf/tex/context/base/cont-new.mkii))
system          : cont-old loaded
(/usr/share/texmf/tex/context/base/cont-old.tex
loading         : Context Old Macros
)
system          : cont-fil loaded
(/usr/share/texmf/tex/context/base/cont-fil.tex
loading         : Context File Synonyms
)
system          : cont-sys.rme loaded
(/etc/texmf/tex/context/user/cont-sys.rme
(/usr/share/texmf/tex/context/base/type-exa.tex)
(/usr/share/texmf/tex/context/base/type-syn.tex)
(/usr/share/texmf/tex/context/base/type-enc.tex)
(/usr/share/texmf/tex/context/base/type-siz.tex)
(/usr/share/texmf/tex/context/base/type-map.tex)
(/usr/share/texmf/tex/context/base/type-spe.tex)
(/usr/share/texmf/tex/context/base/type-akb.tex))
bodyfont        : 12pt rm is loaded
language        : patterns en->ec:ec->1->2:3 uk->ec:ec->2->2:3 de->texnansi:tex
nansi->3->2:3 de->ec:ec->4->2:3 fr->texnansi:texnansi->5->2:3 fr->ec:ec->6->2:3
 es->ec:ec->7->2:3 pt->texnansi:texnansi->8->2:3 pt->ec:ec->9->2:3 it->texnansi
:texnansi->10->2:3 it->ec:ec->11->2:3 nl->texnansi:texnansi->12->2:3 nl->ec:ec-
>13->2:3 cz->il2:il2->14->2:3 cz->ec:ec->15->2:3 sk->il2:il2->16->2:3 sk->ec:ec
->17->2:3 pl->pl0:pl0->18->2:3 pl->ec:ec->19->2:3 pl->qx:qx->20->2:3 loaded
specials        : tex,postscript,rokicki loaded
\openout3 = `test.tui'.

system          : test.top loaded
(./test.top
specials        : loading definition file tpd
(/usr/share/texmf/tex/context/base/spec-tpd.tex
specials        : loading definition file fdf
(/usr/share/texmf/tex/context/base/spec-fdf.tex
\everygoto=\toks326
\PDFsymbolbox=\box157
\everyPDFxform=\toks327

(/usr/share/texmf/tex/context/base/spec-fdf.mkii))
specials        : fdf loaded
\everyPDFximage=\toks328
\PDFcurrenttransparency=\count213
)
specials        : fdf,tpd loaded
)
\openout0 = `test-mpgraph.mp'.

\openout0 = `mpgraph.mp'.


systems         : system commands are enabled
(./test.tuo) (./test.tuo) (./test.tuo) (./test.tuo) (./test.tuo) (./test.tuo)
(./test.tuo) (./test.tuo) (./test.tuo) (./test.tuo)
(/usr/share/texmf/tex/context/base/sort-def.tex)
(/usr/share/texmf/tex/context/base/sort-lan.tex) (./test.tuo) (./test.tuo)
systems         : begin file test at line 1
fonts           : resetting map file list
fonts           : using map file: texnansi-public-lm
fonts           : using map file: original-base
fonts           : using map file: ec-public-lm
fonts           : using map file: ec-base
fonts           : using map file: lm-ec
fonts           : using map file: lm-math
fonts           : using map file: 8r-base
fonts           : using map file: t5-base
fonts           : using map file: original-ams-base
fonts           : using map file: original-ams-euler
fonts           : using map file: original-public-lm
(/usr/share/texmf/tex/context/base/pdfr-ec.tex) [1.1{/usr/share/texmf/fonts/map
/pdftex/context/original-empty.map}{/usr/share/texmf/fonts/map/pdftex/context/t
exnansi-public-lm.map}{/usr/share/texmf/fonts/map/pdftex/context/original-base.
map}{/usr/share/texmf/fonts/map/pdftex/context/ec-public-lm.map}{/usr/share/tex
mf/fonts/map/pdftex/context/ec-base.map}{/usr/share/texmf/fonts/map/dvips/lm/lm
-ec.map}{/usr/share/texmf/fonts/map/dvips/lm/lm-math.map}{/usr/share/texmf/font
s/map/pdftex/context/8r-base.map}{/usr/share/texmf/fonts/map/pdftex/context/t5-
base.map}{/usr/share/texmf/fonts/map/pdftex/context/original-ams-base.map}{/usr
/share/texmf/fonts/map/pdftex/context/original-ams-euler.map}{/usr/share/texmf/
fonts/map/pdftex/context/original-public-lm.map}]
systems         : end file test at line 5
system          : cont-err loaded
(/usr/share/texmf/tex/context/base/cont-err.tex
systems         : no file 'cont-sys.tex', using 'cont-sys.rme' instead
) ) 
Here is how much of TeX's memory you used:
 1142 strings out of 57511
 20214 string characters out of 550282
 4599661 words of memory out of 5527738
 40903 multiletter control sequences out of 10000+50000
 75031 words of font info for 37 fonts, out of 500000 for 2000
 192 hyphenation exceptions out of 8191
 51i,18n,51p,243b,567s stack positions out of 1500i,500n,5000p,200000b,5000s
PDF statistics:
 11 PDF objects out of 300000
 0 named destinations out of 131072
 5 words of extra memory for PDF output out of 10000
{/usr/share/texmf/fonts/enc/dvips/lm/lm-mathsy.enc}</usr/share/texmf/fonts/t
ype1/public/lm/lmsy10.pfb>{/usr/share/texmf/fonts/enc/dvips/lm/lm-ec.enc}</usr/
share/texmf/fonts/type1/public/lm/lmr12.pfb>
Output written on test.pdf (1 page, 26019 bytes).

From mgb-debian at yosemite.net  Wed Feb  7 00:24:52 2007
From: mgb-debian at yosemite.net (Mike Bird)
Date: Tue, 6 Feb 2007 15:24:52 -0800
Subject: [dev-context] Debian Context Font problems
In-Reply-To: <20070206224541.GA11287@gamma.logic.tuwien.ac.at>
References: <200702061401.34142.mgb-debian@yosemite.net>
	<20070206224541.GA11287@gamma.logic.tuwien.ac.at>
Message-ID: <200702061524.54297.mgb-debian@yosemite.net>

Hi Norbert,

Thank you for responding so quickly and helpfully.  I've appended
a diff between your log and mine.  There are minor differences in
memory usage and yours has "\write18 enabled." and mine does not.
I don't know the significance of that.  We're also picking up our
cont-sys.rme from dfferent places, which seems strange when we're
both using Debian packages.

I've attached a png showing the bad section symbols.

--Mike Bird

1c1
< This is pdfeTeX, Version 3.141592-1.30.5-2.2 (Web2C 7.5.5) (format=cont-en 
2007.2.5)  6 FEB 2007 23:41
---
> This is pdfeTeX, Version 3.141592-1.30.5-2.2 (Web2C 7.5.5) (format=cont-en 
2007.2.6)  6 FEB 2007 15:15
3d2
< \write18 enabled.
8c7
< ConTeXt  ver: 2007.01.23 13:32 MKII  fmt: 2007.2.5  int: english/english
---
> ConTeXt  ver: 2007.01.23 13:32 MKII  fmt: 2007.2.6  int: english/english
25c24
< (/etc/texmf/tex/context/user/cont-sys.rme
---
> (/usr/share/texmf/tex/context/user/cont-sys.rme
65c64
< systems         : system commands are enabled
---
> systems         : system commands are disabled
100c99
<  20214 string characters out of 550282
---
>  20232 string characters out of 550282
103c102
<  75031 words of font info for 37 fonts, out of 500000 for 2000
---
>  75031 words of font info for 37 fonts, out of 2000000 for 2000
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.png
Type: image/png
Size: 1253 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070206/b4f7d8b9/attachment.png 

From preining at logic.at  Wed Feb  7 00:37:56 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 7 Feb 2007 00:37:56 +0100
Subject: [dev-context] Debian Context Font problems
In-Reply-To: <200702061524.54297.mgb-debian@yosemite.net>
References: <200702061401.34142.mgb-debian@yosemite.net>
	<20070206224541.GA11287@gamma.logic.tuwien.ac.at>
	<200702061524.54297.mgb-debian@yosemite.net>
Message-ID: <20070206233756.GA14810@gamma.logic.tuwien.ac.at>

Hi Mike!

On Die, 06 Feb 2007, Mike Bird wrote:
> Thank you for responding so quickly and helpfully.  I've appended
> a diff between your log and mine.  There are minor differences in

This is *really* strange. The only differences are the \write18 and the
cont-sys.rme. I have removed the cont-sys.rme in /etc so that it picks
the one in /u/share/texmf/... and still cannot repeat this problem.

Is the diff you appended the *FULL* diff????

Can you please send me the defective pdf file AND the log file, and make
sure that you are running the current context installation.

Hmm, this I really don't understand.

Ah, one more thing, lets check for the fonts: What are your md5sums of
the fonts? At the end of my document it says:
{/usr/share/texmf/fonts/enc/dvips/lm/lm-mathsy.enc}</usr/share/texmf/fonts/t
ype1/public/lm/lmsy10.pfb>{/usr/share/texmf/fonts/enc/dvips/lm/lm-ec.enc}</usr/
share/texmf/fonts/type1/public/lm/lmr12.pfb>

So these are my md5sums, are yours different?
b83544c506921438246ff26625569db9 /usr/share/texmf/fonts/enc/dvips/lm/lm-mathsy.enc
001ebb0d6fff5e26f23f883f4a6ae185 /usr/share/texmf/fonts/type1/public/lm/lmsy10.pfb
80b1519b15bbbdcd055868786959b3bc /usr/share/texmf/fonts/enc/dvips/lm/lm-ec.enc
4905f240aafb4857b3a5389baeaff681 /usr/share/texmf/fonts/type1/public/lm/lmr12.pfb

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
KENTUCKEY (adv.)
Fitting exactly and satisfyingly. The cardboard box that slides neatly
into an exact space in a garage, or the last book which exactly fills
a bookshelf, is said to fit 'real nice and kentuckey'.
			--- Douglas Adams, The Meaning of Liff

From mgb-debian at yosemite.net  Wed Feb  7 01:01:42 2007
From: mgb-debian at yosemite.net (Mike Bird)
Date: Tue, 6 Feb 2007 16:01:42 -0800
Subject: [dev-context] Debian Context Font problems
In-Reply-To: <20070206233756.GA14810@gamma.logic.tuwien.ac.at>
References: <200702061401.34142.mgb-debian@yosemite.net>
	<200702061524.54297.mgb-debian@yosemite.net>
	<20070206233756.GA14810@gamma.logic.tuwien.ac.at>
Message-ID: <200702061601.43637.mgb-debian@yosemite.net>

On Tuesday 06 February 2007 15:37, Norbert Preining wrote:
> This is *really* strange. The only differences are the \write18 and the
> cont-sys.rme. I have removed the cont-sys.rme in /etc so that it picks
> the one in /u/share/texmf/... and still cannot repeat this problem.
>
> Is the diff you appended the *FULL* diff????

Yes.

> Can you please send me the defective pdf file AND the log file, and make
> sure that you are running the current context installation.

Please find both attached, and also the test.tex.

> b83544c506921438246ff26625569db9
> /usr/share/texmf/fonts/enc/dvips/lm/lm-mathsy.enc
> 001ebb0d6fff5e26f23f883f4a6ae185
> /usr/share/texmf/fonts/type1/public/lm/lmsy10.pfb
> 80b1519b15bbbdcd055868786959b3bc
> /usr/share/texmf/fonts/enc/dvips/lm/lm-ec.enc
> 4905f240aafb4857b3a5389baeaff681
> /usr/share/texmf/fonts/type1/public/lm/lmr12.pfb

Same here:

b83544c506921438246ff26625569db9  /usr/share/texmf/fonts/enc/dvips/lm/lm-mathsy.enc
001ebb0d6fff5e26f23f883f4a6ae185  /usr/share/texmf/fonts/type1/public/lm/lmsy10.pfb
80b1519b15bbbdcd055868786959b3bc  /usr/share/texmf/fonts/enc/dvips/lm/lm-ec.enc
4905f240aafb4857b3a5389baeaff681  /usr/share/texmf/fonts/type1/public/lm/lmr12.pfb

BTW, I'm viewing test.pdf (as I always have) in a Konqueror tab.  It looks the
same in kpdf.  I don't currently have xpdf or acroread installed.

--Mike Bird
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.log
Type: text/x-log
Size: 4974 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070206/49dd3554/attachment-0002.bin 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.pdf
Type: application/pdf
Size: 26019 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070206/49dd3554/attachment-0001.pdf 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.tex
Type: text/x-tex
Size: 49 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070206/49dd3554/attachment-0003.bin 

From mgb-debian at yosemite.net  Wed Feb  7 01:26:20 2007
From: mgb-debian at yosemite.net (Mike Bird)
Date: Tue, 6 Feb 2007 16:26:20 -0800
Subject: [dev-context] Debian Context Font problems
In-Reply-To: <200702061601.43637.mgb-debian@yosemite.net>
References: <200702061401.34142.mgb-debian@yosemite.net>
	<20070206233756.GA14810@gamma.logic.tuwien.ac.at>
	<200702061601.43637.mgb-debian@yosemite.net>
Message-ID: <200702061626.21884.mgb-debian@yosemite.net>

Hi Norbert,

On Tuesday 06 February 2007 16:01, Mike Bird wrote:
> BTW, I'm viewing test.pdf (as I always have) in a Konqueror tab.  It looks
> the same in kpdf.  I don't currently have xpdf or acroread installed.

I now had xpdf installed.  test.pdf looks OK in xpdf, looks bad in xpdf,
and neither reports any errors when run from the command prompt.

I have no idea where to look now!

--Mike Bird

From mgb-debian at yosemite.net  Wed Feb  7 01:46:07 2007
From: mgb-debian at yosemite.net (Mike Bird)
Date: Tue, 6 Feb 2007 16:46:07 -0800
Subject: [dev-context] Debian Context Font problems
In-Reply-To: <200702061626.21884.mgb-debian@yosemite.net>
References: <200702061401.34142.mgb-debian@yosemite.net>
	<200702061601.43637.mgb-debian@yosemite.net>
	<200702061626.21884.mgb-debian@yosemite.net>
Message-ID: <200702061646.08692.mgb-debian@yosemite.net>

On Tuesday 06 February 2007 16:26, Mike Bird wrote:
> On Tuesday 06 February 2007 16:01, Mike Bird wrote:
> > BTW, I'm viewing test.pdf (as I always have) in a Konqueror tab.  It
> > looks the same in kpdf.  I don't currently have xpdf or acroread
> > installed.
>
> I now had xpdf installed.  test.pdf looks OK in xpdf, looks bad in xpdf,

Correction: looks OK in xpdf, looks bad in kpdf.

> and neither reports any errors when run from the command prompt.
>
> I have no idea where to look now!

From sanjoy at mrao.cam.ac.uk  Wed Feb  7 03:46:06 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Wed, 07 Feb 2007 02:46:06 +0000
Subject: [dev-context] Debian Context Font problems
In-Reply-To: Your message of "Tue, 06 Feb 2007 16:46:07 PST."
	<200702061646.08692.mgb-debian@yosemite.net> 
Message-ID: <E1HEcow-0001Eu-00@skye.ra.phy.cam.ac.uk>

> Correction: looks OK in xpdf, looks bad in kpdf.

Same here: fine in xpdf, bad in kpdf.  Also it's fine in gs 8.50.  I'm
using Ubuntu/i386 with pdftex 1.40 and the Debian context packages (so
2007.01.23).

Not sure whether the difference between xpdf and kpdf means that it's
a kpdf bug or a bug in the generated pdf itself.  I'm leaning toward
its' being a problem with kpdf, since "two out of three free viewers
prefer" to display it correctly.

I just tried it on a nearby Mac OS 10.3 machine with its built-in
Preview viewer.  Preview complains that it cannot recognize the file
format!  As a check, I tried a bunch of other ConTeXt-produced
documents, including a 100-page math book, and Preview had no problem
with them.

So now I lean toward the PDF file as the problem, not kpdf.  Anyway,
why are kpdf and xpdf giving different views?  Isn't kpdf based on the
xpdf rendering code?

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From sanjoy at mrao.cam.ac.uk  Wed Feb  7 04:58:29 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Wed, 07 Feb 2007 03:58:29 +0000
Subject: [dev-context] Debian Context Font problems
In-Reply-To: Your message of "Wed, 07 Feb 2007 12:52:35 +0900."
	<20070207.125235.74745054.kohda@pm.tokushima-u.ac.jp> 
Message-ID: <E1HEdwz-0001he-00@skye.ra.phy.cam.ac.uk>

> changing zoom factor to 100% and/or 200% seems ok (and 125% and 150%
> looks bad?).

You're right -- I just tried those zooms here and I see the same:
100%, 200% are okay and 125% and 150% look bad (with overlapping
symbols).

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From mgb-debian at yosemite.net  Wed Feb  7 05:11:15 2007
From: mgb-debian at yosemite.net (Mike Bird)
Date: Tue, 6 Feb 2007 20:11:15 -0800
Subject: [dev-context] Debian Context Font problems
In-Reply-To: <20070207.125235.74745054.kohda@pm.tokushima-u.ac.jp>
References: <200702061646.08692.mgb-debian@yosemite.net>
	<E1HEcow-0001Eu-00@skye.ra.phy.cam.ac.uk>
	<20070207.125235.74745054.kohda@pm.tokushima-u.ac.jp>
Message-ID: <200702062011.18026.mgb-debian@yosemite.net>

On Tuesday 06 February 2007 18:46, Sanjoy Mahajan wrote:
> I just tried it on a nearby Mac OS 10.3 machine with its built-in
> Preview viewer.  Preview complains that it cannot recognize the file
> format!  As a check, I tried a bunch of other ConTeXt-produced
> documents, including a 100-page math book, and Preview had no problem
> with them.
>
> So now I lean toward the PDF file as the problem, not kpdf.  Anyway,
> why are kpdf and xpdf giving different views?  Isn't kpdf based on the
> xpdf rendering code?


On Tuesday 06 February 2007 19:52, Atsuhito Kohda wrote:
> I'm completely new to context but as far as I tested,
> changing zoom factor to 100% and/or 200% seems ok (and
> 125% and 150% looks bad?).
>
> Isn't this true for all of you?

Confirmed.

I still don't know what or where the bug is but I think
we're narrowing down the possibilities.  Thank you all.

--Mike Bird

From thomas.schmitz at uni-bonn.de  Tue Feb  6 09:39:31 2007
From: thomas.schmitz at uni-bonn.de (Thomas A. Schmitz)
Date: Tue, 6 Feb 2007 09:39:31 +0100
Subject: [dev-context] regression testing: 3 tex errors
In-Reply-To: <45C83AF0.6000609@elvenkind.com>
References: <E1HECv7-0006Bs-5J@approximate.corpus.cam.ac.uk>
	<45C83AF0.6000609@elvenkind.com>
Message-ID: <DC15BD1E-D2DF-4683-B862-6991D8D5C513@uni-bonn.de>


On Feb 6, 2007, at 9:23 AM, Taco Hoekwater wrote:

> Sanjoy Mahajan wrote:
>> Here are the three compilation errors (first one from each file  
>> with an
>> error).  The Unicode and ec-iwona errors were mentioned before, so  
>> I'm
>> skipping them here.  svn says who contributed the test files.
>> Taco, do you know if these tests are outdated, or whether a  
>> behavior has
>> changed but shouldn't have?
>> -Sanjoy
>> ===================================================================== 
>> =
>> [r2 | taco | 2006-03-31 10:15:34 -0500 (Fri, 31 Mar 2006)]
>> [the remaining unicode tables]
>> ./tex/context/base/unic-031.tex/test-001.tex:21: Undefined control  
>> sequence.
>> \@default at greekEpsilonvaria -> 
>> \varia                                      \greekEpsilon
>
> This is an actual bug, I think. I assume that the characters in  
> enco-agr.tex should use \greekvaria instead of just \varia. Thomas?
>
Ah OK, I see. Since the names are unique, we haven't called the  
accents greek..., but simply varia/dasia etc., but character 92 is  
called greekvaria by mistake. So this should be called varia. Sanjoy  
or Taco, could you rename character 92 in enco-agr.tex and see if  
this makes the error disappear? I am curently working on the module  
and will soon make a few changes to enco-agr.tex anyway.

Best, and thanks

Thomas

From thomas.schmitz at uni-bonn.de  Tue Feb  6 14:58:11 2007
From: thomas.schmitz at uni-bonn.de (Thomas A. Schmitz)
Date: Tue, 6 Feb 2007 14:58:11 +0100
Subject: [dev-context] regression testing: 3 tex errors
In-Reply-To: <E1HEQZs-0001wz-00@skye.ra.phy.cam.ac.uk>
References: <E1HEQZs-0001wz-00@skye.ra.phy.cam.ac.uk>
Message-ID: <1F7692C0-A267-44DF-BF59-9397BF66E47A@uni-bonn.de>

Hi Sanjoy,

I'm really sorry, there is a typo in line 319 of enco-agr.tex.  
Correct "greeldasiavaria" to "greekdasiavaria," and you should be in  
business...

I'm afraid your document doesn't compile at all with my version of  
ConTeXt

ConTeXt  ver: 2007.01.23 13:32 MKII  fmt: 2007.2.6  int: english/english

so I can't help you testing.

Best, and sorry for the sloppiness...

Thomas

On Feb 6, 2007, at 2:41 PM, Sanjoy Mahajan wrote:

> I did this:
>
>   \definecharacter varia                              92
>
> and remade the formats.  The error is different now:
>
> /tmp/testing123/tex/context/base/unic-031.tex/test-001.tex:21:  
> Undefined contro
> l sequence.
> \@default at greekAlphaiotasubdasiavaria ...siavaria
>                                                   \greekAlpha  
> \greekiota
>
> Should I make the same change to other lines in enco-agr.tex?
>
> By the way, here's the test file:
>
> \setuppapersize
>   [S6][S6]
>
> \setupbodyfont
>   [10pt]
>
> \setuplayout
>   [backspace=12pt,
>    topspace=12pt,
>    width=middle,
>    height=middle,
>    header=0pt,
>    footer=0pt]
>
> \setupcolors
>   [state=start]
>
> \starttext
>
> \centerbox{\scale[factor=max]{\showunicodetable[002]}}
>
> \stoptext


From kohda at pm.tokushima-u.ac.jp  Wed Feb  7 04:52:35 2007
From: kohda at pm.tokushima-u.ac.jp (Atsuhito Kohda)
Date: Wed, 07 Feb 2007 12:52:35 +0900 (JST)
Subject: [dev-context] Debian Context Font problems
In-Reply-To: <E1HEcow-0001Eu-00@skye.ra.phy.cam.ac.uk>
References: <200702061646.08692.mgb-debian@yosemite.net>
	<E1HEcow-0001Eu-00@skye.ra.phy.cam.ac.uk>
Message-ID: <20070207.125235.74745054.kohda@pm.tokushima-u.ac.jp>

Hi all,

On Wed, 07 Feb 2007 02:46:06 +0000, Sanjoy Mahajan wrote:

> > Correction: looks OK in xpdf, looks bad in kpdf.
> 
> Same here: fine in xpdf, bad in kpdf.  Also it's fine in gs 8.50.  I'm
> using Ubuntu/i386 with pdftex 1.40 and the Debian context packages (so
> 2007.01.23).

I'm completely new to context but as far as I tested,
changing zoom factor to 100% and/or 200% seems ok (and
125% and 150% looks bad?).

Isn't this true for all of you?

Regards,		   2007-2-7(Wed)

-- 
 Debian Developer & Debian JP Developer - much more I18N of Debian
 Atsuhito Kohda <kohda AT debian.org>
 Department of Math., Univ. of Tokushima

From preining at logic.at  Wed Feb  7 11:43:45 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 7 Feb 2007 11:43:45 +0100
Subject: [dev-context] Debian Context Font problems
In-Reply-To: <200702062011.18026.mgb-debian@yosemite.net>
References: <200702061646.08692.mgb-debian@yosemite.net>
	<E1HEcow-0001Eu-00@skye.ra.phy.cam.ac.uk>
	<20070207.125235.74745054.kohda@pm.tokushima-u.ac.jp>
	<200702062011.18026.mgb-debian@yosemite.net>
Message-ID: <20070207104345.GA28473@gamma.logic.tuwien.ac.at>

Hi all!

On Die, 06 Feb 2007, Mike Bird wrote:
> I still don't know what or where the bug is but I think
> we're narrowing down the possibilities.  Thank you all.

One more comment: Acrobat 7 (the full one) does not complain at all,
does not show any strange effects (with all the zoom levels). I couldn't
find any unusual thing in the Document Properties etc.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
Serious error.
All shortcuts have disappeared.
Screen.
Mind.
Both are blank.
                       --- Windows Error Haiku

From pragma at wxs.nl  Wed Feb  7 13:08:59 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 07 Feb 2007 13:08:59 +0100
Subject: [dev-context] regression testing: 3 tex errors
In-Reply-To: <1F7692C0-A267-44DF-BF59-9397BF66E47A@uni-bonn.de>
References: <E1HEQZs-0001wz-00@skye.ra.phy.cam.ac.uk>
	<1F7692C0-A267-44DF-BF59-9397BF66E47A@uni-bonn.de>
Message-ID: <45C9C15B.3040609@wxs.nl>

Thomas A. Schmitz wrote:
> Hi Sanjoy,
>
> I'm really sorry, there is a typo in line 319 of enco-agr.tex.  
> Correct "greeldasiavaria" to "greekdasiavaria," and you should be in  
> business...
>   
fixed, 

hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Wed Feb  7 14:00:46 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 07 Feb 2007 14:00:46 +0100
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
Message-ID: <45C9CD7E.1000302@wxs.nl>

Hi,

Concerning the lm rendering problems ... Jacko would like to have a 
report on this so that they can take it into account. Similar problems 
could occur with the tex-gyre fonts.

Hans

-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

-------------- next part --------------
An embedded message was scrubbed...
From: Boguslaw Jackowski <bop at bop.com.pl>
Subject: Re: [dev-context] Debian Context Font problems
Date: Wed, 07 Feb 2007 13:47:51 +0100 (CET)
Size: 2060
Url: http://www.ntg.nl/mailman/private/dev-context/attachments/20070207/f3041c34/attachment.mht 

From preining at logic.at  Wed Feb  7 14:27:47 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 7 Feb 2007 14:27:47 +0100
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
In-Reply-To: <45C9CD7E.1000302@wxs.nl>
References: <45C9CD7E.1000302@wxs.nl>
Message-ID: <20070207132747.GA29424@gamma.logic.tuwien.ac.at>

Hi Boguslaw!

Here a short report: The following file:
	\starttext
	\S1
	\blank[big]
	\S2\crlf\S3
	\stoptext
compiled with current context uses the lmmath fonts:
$ pdffonts test.pdf
name                                 type         emb sub uni object ID
------------------------------------ ------------ --- --- --- ---------
MZRISU+LMRoman12-Regular             Type 1       yes yes yes      7  0
MCWYOY+LMMathSymbols10-Italic        Type 1       yes yes no      10  0

But there seems to be a problem with displaying the result in some viewers:
Adobe Acrobat (Reader and Full) (Windows and Linux)
	works

xpdf 3.01 linux
	works

kpdf 3.5.5 (Debian/sid)
	at magnifications 150%, 125%, 75% 
		the the second and third line touch each other
		the problem seems that the paragraph symbols are drawn
		quite bad in all resolutions less then 200%. But I guess
		that this is a problem with kpdf
	at magnification 200%, 100%
		all ok.

MacOS 10.3, builtin viewer
	complains that it cannot recognize the file format
	(reported by Sanjoy Mahajan <sanjoy at mrao.cam.ac.uk>)


Used system to create the files:
Debian/unstable with texlive 2005 Debian packages
pdfeTeX using libpoppler 3.141592-1.30.5-2.2
	(could this be a problem with libpoppler????)
	(I will try it out soon)
context 20070123
lmodern 1.00

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
NANHORON (n. medical)
A tiny valve concealed in the inner ear which enables a deaf
grandmother to converse quite normally when she feels like it, but
which excludes completely anything that sounds like a request to help
with laying the table.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Wed Feb  7 18:29:48 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 7 Feb 2007 18:29:48 +0100
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
In-Reply-To: <Pine.LNX.4.61.0702071502340.23167@linux.bop.eps.gda.pl>
References: <Pine.LNX.4.61.0702071502340.23167@linux.bop.eps.gda.pl>
Message-ID: <20070207172948.GA28740@gamma.logic.tuwien.ac.at>

Hi Jacko!

On Mit, 07 Feb 2007, Boguslaw Jackowski wrote:
> I'd be glad if I could have also the screen shots, unless preparing them 
> is too cumbersome and time-consuming for you.

Here are 4 images:
	xpdf-kpdf-100.png
	xpdf-kpdf-125.png
	xpdf-kpdf-150.png
	xpdf-kpdf-200.png
the LEFT part always shows the xpdf screenshot, the RIGHT part always
the kpdf screenshot. The number gives the resolution step. It lies in
the nature of the screenshot that the images are not bigger, sorry. But
I guess it is obious what is going wrong, and that xpdf behaves much
better in all 4 shrink-factors.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
ABINGER (n.)
One who washes up everything except the frying pan, the cheese grater
and the saucepan which the chocolate sauce has been made in.
			--- Douglas Adams, The Meaning of Liff
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xpdf-kpdf-100.png
Type: image/png
Size: 1284 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070207/51b37467/attachment.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xpdf-kpdf-125.png
Type: image/png
Size: 1732 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070207/51b37467/attachment-0001.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xpdf-kpdf-150.png
Type: image/png
Size: 2166 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070207/51b37467/attachment-0002.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xpdf-kpdf-200.png
Type: image/png
Size: 3049 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070207/51b37467/attachment-0003.png 

From taco at elvenkind.com  Wed Feb  7 19:27:19 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 07 Feb 2007 19:27:19 +0100
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
In-Reply-To: <20070207172948.GA28740@gamma.logic.tuwien.ac.at>
References: <Pine.LNX.4.61.0702071502340.23167@linux.bop.eps.gda.pl>
	<20070207172948.GA28740@gamma.logic.tuwien.ac.at>
Message-ID: <45CA1A07.5010308@elvenkind.com>

Norbert Preining wrote:
> Hi Jacko!
> 
> On Mit, 07 Feb 2007, Boguslaw Jackowski wrote:
> 
>>I'd be glad if I could have also the screen shots, unless preparing them 
>>is too cumbersome and time-consuming for you.
> 
> 
> Here are 4 images:
> 	xpdf-kpdf-100.png
> 	xpdf-kpdf-125.png
> 	xpdf-kpdf-150.png
> 	xpdf-kpdf-200.png
> the LEFT part always shows the xpdf screenshot, the RIGHT part always
> the kpdf screenshot. The number gives the resolution step. It lies in
> the nature of the screenshot that the images are not bigger, sorry. But
> I guess it is obious what is going wrong, and that xpdf behaves much
> better in all 4 shrink-factors.

Did anybody send a bug report to the kpdf maintainers yet? This looks
suspiciously like a bug (aka optimization) in kpdf.

Best,
Taco

From mgb-debian at yosemite.net  Wed Feb  7 21:45:29 2007
From: mgb-debian at yosemite.net (Mike Bird)
Date: Wed, 7 Feb 2007 12:45:29 -0800
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
In-Reply-To: <45CA1A07.5010308@elvenkind.com>
References: <Pine.LNX.4.61.0702071502340.23167@linux.bop.eps.gda.pl>
	<20070207172948.GA28740@gamma.logic.tuwien.ac.at>
	<45CA1A07.5010308@elvenkind.com>
Message-ID: <200702071245.30682.mgb-debian@yosemite.net>

On Wednesday 07 February 2007 10:27, Taco Hoekwater wrote:
> Did anybody send a bug report to the kpdf maintainers yet? This looks
> suspiciously like a bug (aka optimization) in kpdf.

"xpdf -t1lib no test.pdf" gives the same display errors as kpdf, so
kpdf is ruled out.

I'm out of my depth here but does this mean that lm math font
and the freetype rasterizer don't get along?

--Mike Bird

From bop at bop.com.pl  Wed Feb  7 15:03:53 2007
From: bop at bop.com.pl (Boguslaw Jackowski)
Date: Wed, 7 Feb 2007 15:03:53 +0100 (CET)
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
Message-ID: <Pine.LNX.4.61.0702071502340.23167@linux.bop.eps.gda.pl>


Hi,

> Here a short report: The following file:

Thank you for the concise note.

I'd be glad if I could have also the screen shots, unless preparing them 
is too cumbersome and time-consuming for you.

Cheers -- Jacko

-- 
BOP s. c.
ul. Bora-Komorowskiego 24, 80-377 Gdansk, Poland
tel. (+48 58) 553 46 59,  fax (+48 58) 511 03 81
bop at bop.com.pl, http://www.bop.com.pl

From bugreports at nn7.de  Wed Feb  7 18:58:59 2007
From: bugreports at nn7.de (Soeren Sonnenburg)
Date: Wed, 07 Feb 2007 18:58:59 +0100
Subject: [dev-context] (fwd) Bug#409749: ppchtex broken
In-Reply-To: <45C71B9A.4000006@wxs.nl>
References: <20070205104513.GA29912@gamma.logic.tuwien.ac.at>
	<45C71B9A.4000006@wxs.nl>
Message-ID: <1170871139.4894.7.camel@localhost>

On Mon, 2007-02-05 at 12:57 +0100, Hans Hagen wrote:
> Norbert Preining wrote:
> > forwarded 409749 dev-context at ntg.nl
> > thanks
> >   
> i've added that line to ppchtex.noc (no context)
> > Hi Hans and all ConTeXt devs,
[...]
> >> \input syst-fnt.tex

also works for me!

Soeren
-- 
Sometimes, there's a moment as you're waking, when you become aware of
the real world around you, but you're still dreaming.

From contexttest-bugs at foundry.supelec.fr  Thu Feb  8 09:16:26 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Thu, 8 Feb 2007 09:16:26 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Bugs=5D=5B75=5D_nonzero_in?=
	=?utf-8?q?terlinespace_makes_description_lists_be_vertically_misal?=
	=?utf-8?q?igned?=
Message-ID: <200702080816.l188GQ9u028080@semantic.metz.supelec.fr>

Bugs item #75, was opened at 2007-02-08 09:16
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=75&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Taco Hoekwater (taco)
Assigned to: Hans Hagen (hagen)
Summary: nonzero interlinespace makes description lists be vertically misaligned 
Resolution: Accepted
Version: None
Category: macros


Initial Comment:
Johan Sandblom wrote:

>> Sorry to be a pest, but does anyone have an idea on this?
>> 
>> Johan
>> 
>> Consider the example below. It results in a list of synonyms that are
>> vertically misaligned with their meanings. What can I do?
>>
>> Regards, Johan
>> 
>> % Example file
>> \definesynonyms[abbreviation][abbreviations][\infull]
>> \setupsynonyms[abbreviations][criterium=all]
>> \setupinterlinespace[auto, big]
>> 
>> \starttext
>> 
>> \completelistofabbreviations
>> 
>> \abbreviation{EEG} {Electroencephalogram}
>> \abbreviation{ERP} {Event-Related Potentials}
>> 
>> \EEG, \ERP
>> 
>> \stoptext


I've narrowed the problem down to one of the internal macros. With this:

   \unprotect
   \bgroup
   \def\@@makedescriptionpurebox #1{}
   \completelistofabbreviations
   \egroup
   \protect

the abbreviation list looks ok to me.

However, that is a quick hack that fixes the abbreviations only, at the
expense of breaking (lots) other stuff. I'll convert this message to
a bug tracker item.

Best, Taco

----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=75&group_id=21


From mojca.miklavec.lists at gmail.com  Thu Feb  8 09:18:06 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 8 Feb 2007 09:18:06 +0100
Subject: [dev-context] new MyWay about \sometxt
In-Reply-To: <alpine.WNT.0.82.0701292325540.2704@nqvgln>
References: <6faad9f00701291650w633e315dr5036587bdae5f9cc@mail.gmail.com>
	<alpine.WNT.0.82.0701292325540.2704@nqvgln>
Message-ID: <6faad9f00702080018r7cfe1eecsef3604e5c091c3de@mail.gmail.com>

On 1/30/07, Aditya Mahajan wrote:
> I thought a bit about your feature request, and it is not too
> difficult to implement it. Here is a patch that allows you to use
> \sometext[font][iwona,20pt]{...}. Careful of spurious linebreaks.
>
> %=======================================================
>
> \long\def\redofiltersometxt[#1]%
> {\doifnextcharelse[{\reredofiltersometxt[#1]}{\redodofiltersometxt[#1]}}
>
> \long\def\redodofiltersometxt[#1]#2%
>    {\increment\txtcounter
>     \TeXtext[#1]\txtcounter{#2}%
>     \filtersometxt}
>
> \long\def\reredofiltersometxt[#1][#2]#3%
>    {\increment\txtcounter
>     \TeXtext[#1]\txtcounter{\switchtobodyfont[#2]\strut#3}%
>     \filtersometxt}
>
> \definetextext[font]{\donothing}
>
> \usetypescript[iwona][texnansi]
>
> \starttext
> \startMPcode
>    draw fullcircle xyscaled (3cm,2cm);
>    label(\sometxt{Hello world!}, origin);
> \stopMPcode
>
> % Does not cause any harm.
> \startMPcode
>    draw fullcircle xyscaled (3cm,2cm);
>    label(\sometxt[font]{Hello world!}, origin);
> \stopMPcode
>
> \startMPcode
>    draw fullcircle xyscaled (3cm,2cm);
>    label(\sometxt[font][iwona,20pt]{Hello world!}, origin);
> \stopMPcode
>
> \stoptext
>
> %===============================================================
>
> I haven't tested it, but I do not think that this should cause any
> problems with existing code.

If gnuplot doesn't fail with it, it probably means that it works OK ;)

"Helvetica" seems to work OK here:
     http://dl.contextgarden.net/misc/gnuplot-context.zip

(Usually I get dozens of error messages when applying something new,
at least "memory limit exceeded" if everything else happens to work by
accident ;)

The most funny part was when practiacally all the labels were missing
on one plot before I figured out that
    \setupbodyfont[somefont,14pt]
    \switchtobodyfont[some other font]
doesn't work at all without defining bodyfontenvironment.

Thank you very much again! The .tex file is still in its "pre-alpha"
state, but at least I was able to "finalize" the terminal with a clean
syntax ;)

> Would that extra overhead be useful of gnuplot?

yes ... once I manage to convince the developers that the difference
between these two plots might be relevant enough to justify an
additional driver:
     http://gnuplot.sourceforge.net/demo_4.1/enhancedtext.html
     http://dl.contextgarden.net/misc/enhancedtext.pdf

(I hope that Patrick will not be reading this before I manage to
remove the files again ;)

Mojca

From mojca.miklavec.lists at gmail.com  Thu Feb  8 09:55:01 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 8 Feb 2007 09:55:01 +0100
Subject: [dev-context] regression testing: 3 tex errors
In-Reply-To: <DC15BD1E-D2DF-4683-B862-6991D8D5C513@uni-bonn.de>
References: <E1HECv7-0006Bs-5J@approximate.corpus.cam.ac.uk>
	<45C83AF0.6000609@elvenkind.com>
	<DC15BD1E-D2DF-4683-B862-6991D8D5C513@uni-bonn.de>
Message-ID: <6faad9f00702080055i5f658a3as765ba7a1bd7ab17@mail.gmail.com>

> Ah OK, I see. Since the names are unique, we haven't called the
> accents greek..., but simply varia/dasia etc., but character 92 is
> called greekvaria by mistake. So this should be called varia. Sanjoy
> or Taco, could you rename character 92 in enco-agr.tex and see if
> this makes the error disappear? I am curently working on the module
> and will soon make a few changes to enco-agr.tex anyway.

But then you should grep for that name in the whole ConTeXt tree.
contextnames.txt has greek... everywhere. I don't know where I got
these names from (perhaps uc encoding by adam, perhaps manually), but
it probably means that it's used in all the "derived works" and in ...

Mojca

From contexttest-featurerequests at foundry.supelec.fr  Fri Feb  9 06:07:47 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Fri, 9 Feb 2007 06:07:47 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B72?=
	=?utf-8?q?=5D_Extending_=5Cplacefloat=7Btop=2Cleft=7D=2E_=7Bbottom?=
	=?utf-8?b?LG91dGVyfSwgLi4u?=
Message-ID: <200702090507.l1957l5G021961@semantic.metz.supelec.fr>

Feature Requests item #72, was opened at 2007-02-05 01:12
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=72&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Mojca Miklavec (mojca)
Assigned to: Nobody (None)
Summary: Extending \placefloat{top,left}. {bottom,outer}, ... 
Version: None
Category: None


Initial Comment:
(From contextgarden.net)

The \placefigure macro should be extended to combinations like
    \placefigure{top,left}
or
    \placefigure{bottom,outer}
The reason for this request is that we use ConTeXt a lot for typesetting books from "arts and humanities". 
There we often have to place a lot of (more then 100) figures at "fixed" positions like top-outer and bottom-inner, wrapped by text. 
I guess it's not a trivial feature to be implemented in TeX's paragraph processing, but I know it might be worth the effort: ConTeXt's way to deal with fonts and text is so superior that it should be also accessible for disciplines that besides text also rely on images - as the arts and humanities do.


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=72&group_id=21


From contexttest-featurerequests at foundry.supelec.fr  Fri Feb  9 06:09:45 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Fri, 9 Feb 2007 06:09:45 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B72?=
	=?utf-8?q?=5D_Extending_=5Cplacefloat=7Btop=2Cleft=7D=2E_=7Bbottom?=
	=?utf-8?b?LG91dGVyfSwgLi4u?=
Message-ID: <200702090509.l1959jdU022080@semantic.metz.supelec.fr>

Feature Requests item #72, was opened at 2007-02-05 01:12
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=72&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Mojca Miklavec (mojca)
Assigned to: Nobody (None)
Summary: Extending \placefloat{top,left}. {bottom,outer}, ... 
Version: None
Category: None


Initial Comment:
(From contextgarden.net)

The \placefigure macro should be extended to combinations like
    \placefigure{top,left}
or
    \placefigure{bottom,outer}
The reason for this request is that we use ConTeXt a lot for typesetting books from "arts and humanities". 
There we often have to place a lot of (more then 100) figures at "fixed" positions like top-outer and bottom-inner, wrapped by text. 
I guess it's not a trivial feature to be implemented in TeX's paragraph processing, but I know it might be worth the effort: ConTeXt's way to deal with fonts and text is so superior that it should be also accessible for disciplines that besides text also rely on images - as the arts and humanities do.


----------------------------------------------------------------------

>Comment By: Mojca Miklavec (mojca)
Date: 2007-02-09 06:09

Message:
The original post was here:
http://www.ntg.nl/pipermail/ntg-context/2005/013891.html

Hans sent some code - so those who would like to use floating text around 
figures - go for testing.


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=72&group_id=21


From karl at huftis.org  Sat Feb 10 15:10:17 2007
From: karl at huftis.org (Karl Ove Hufthammer)
Date: Sat, 10 Feb 2007 15:10:17 +0100
Subject: [dev-context] Improved support for Norwegian in ConTeXt
In-Reply-To: <6faad9f00702040916h5d31cfe1kc13a9a3fae5f0c52@mail.gmail.com>
References: <200702041500.47359.karl@huftis.org>
	<6faad9f00702040916h5d31cfe1kc13a9a3fae5f0c52@mail.gmail.com>
Message-ID: <200702101510.18704.karl@huftis.org>

Sundag 04 februar 2007 18:16 skreiv Mojca Miklavec:

>I would suggest you to post some of the questions to the ntg-mailing
>list, where more Norwegian users can comment on it.

OK. I'm now crossposting this e-mail to both the dev and the ntg mailing list. 
See my answers to some of your questions below.

>On 2/4/07, Karl Ove Hufthammer wrote:
>> I'm writing this to suggest improvements in ConTeXt's support for the
>> Norwegian languages. ConTeXt already has rudimentary support for
>> Norwegian, but with some problems.
>>
>>
>> Language codes
>> --------------
>>
>> The main problem is that ConTeXt use the language code 'no' for Norwegian.
>> There actually *is* no written language called 'Norwegian'; Norway has two
>> official written languages, Norwegian Bokm?l (ISO 639 language code 'nb')
>> and Norwegian Nynorsk (ISO 639 language code 'nn'). The current
>> definitions for 'no' in ConTeXt is for Norwegian Bokm?l. (There is a ISO
>> 639 language code 'no' for Norwegian, but this should usually be used for
>> spoken Norwegian, or perhaps for transcriptions of spoken language.)
>>
>> The language code 'no' should be removed, and be replaced by the two
>> language codes 'nb' and 'nn'.
>
>Although I don't know the exact situation, a few remarks:
>
>- You should probably also provide the correct definitions for calling
>the language (so that one can say \mainlanguage[norwegian], but
>perhaps with what you consider to be the proper language tags). It's
>currently
>
>\installlanguage [norwegian]   [\s!no]
>\installlanguage [norsk]       [\s!no] % bonus switch
>
>You need to fix the two and perhaps add
>\installlanguage [???]       [\s!nb]
>\installlanguage [???]       [\s!nk]

OK. We will need:

\installlanguage [bokmal]   [\s!nb]
\installlanguage [nynorsk]   [\s!nn]

If it is possible to use non-ASCII characters safely, the following would also 
be nice:

\installlanguage [bokm?l]   [\s!nb]

>- If you remove [no], older documents might break. I don't know much
>about the situation and the number of users, but can you say which of
>the two language variants [no] should default to? Since the current
>definitions probably point to "nb" (from the first blick) - would it
>make sense to use "nb" when one says \mainlanguage[no]?

Yes.

>Perhaps one can issue a warning when the language "no" is selected
>(statig something like "language 'no' is deprecated, please use 'nb'
>for Bokm?l or nn for Nynorsk instead")

Yes, that would be the preferred solution. As Hans F. Nordhaug mentioned, 
the 'no' code should be considered deprecated in this context (no pun 
intended).

To sum up, we need the following language codes: nb and nn.
And we need the following mappings:

bokmal --> nb
bokm?l --> nb (if possible)
nynorsk --> nn
norsk --> nb (with warning)
norwegian --> nb (with warning)

>Removing it probably doesn't affect the rest, so if other Norwegian
>users agree to remove it completely, it can still be done, but I would
>suggest you to ask the author of the original translations and the
>rest of users on the ntg-context mailing list first. Otherwise it can
>still default to one of the two varians (or to a new one if you
>provide also the third alternative for the "spoken language").
>
>> See http://en.wikipedia.org/wiki/Norwegian_language for a (not too good)
>> article on the Norwegian languages.
>>
>> For the record, the language names used in LaTeX/Babel is
>> (unfortunately) 'Norwegian' and 'norsk' for Norwegian Bokm?l, and
>> 'nynorsk' for Norwegian Nynorsk, instead of 'bokmal'/'bokm?l' and
>> 'nynorsk'. Norwegian Bokm?l support was added first, and used up the
>> 'Norwegian' name.
>>
>>
>> Hyphenation
>> -----------
>>
>> The two written language are quite similar, and the current hyphenation
>> dictionary (nohyphbx) was made to support both. But there are (at least)
>> two words which are put in the hyphenation exceptions for this dictionary
>> because they would have different hyphenation (because of different
>> meaning) in Norwegian Nynorsk and Norwegian Bokm?l. These are:
>>
>> attende -- nb: at-ten-de ('eighteenth'),       nn: att-en-de ('back')
>> betre   -- nb: be-tre ('enter'/'set foot on'), nn: bet-re ('better')
>>
>> Would it be possible to have two different hyphenation dictionaries for
>> 'nb' and 'nn', which would only differ in the hyphenation exceptions used
>> for these two words?
>
>This can be done. Hans was complaining about the mess of (naming of)
>Norwegian hyphenation patterns one month ago anyway, I guess that "he
>won't mind" adding yet another fix to the scripts ;)
>
>> Language setup
>> --------------
>>
>> Here is an improved/correct version of the language setup for Norwegian.
>> The setup for 'no' should be removed.
>>
>> \installlanguage
>>   [nn]
>>   [spacing=packed,
>>    lefthyphenmin=2,
>>    righthyphenmin=2,
>>    leftsentence=---,
>>    rightsentence=---,
>>    leftsubsentence=---,
>>    rightsubsentence=---,
>>    leftquote=\upperleftsinglesixquote,
>>    rightquote=\upperrightsingleninequote,
>>    leftquotation=\leftguillemot,
>>    rightquotation=\rightguillemot,
>>    date={day,{.},\ ,month,\ ,year},
>>    state=stop]
>>
>> This is for Norwegian Nynorsk ('nn'), but the same setup is used for
>> Norwegian Bokm?l (the values used for 'day' differ, though -- see below).
>>
>> But I am not sure I understand what the four *sentence commands are used
>> for. We usually don't use em-dashes in Norwegian, so the entries look
>> incorrect. If you can explain what the commands are used for, I can supply
>> the correct Norwegian definitions.
>>
>> I also noticed that the Italian definitions use leftspeech, middlespeech
>> and rightspeech commands. What are these used for?
>>
>>
>> Other language-specific settings
>> --------------------------------
>>
>> Norwegian (Bokm?l and Nynorsk) differs typographically from English in
>> several other ways. Here is three of them:
>>
>> We don't (usually) use bullets for the first level of unnumbered lists; we
>> use en-dashes.
>>
>> -- Item 1
>> -- Item 2
>> -- Item 3
>>
>> Bullets are commonly seen in document created by word processors of US
>> origin, and in the documents created by people without proper typographic
>> training, though. It would be nice if ConTeXt could use en-dashes by
>> default for lists in Norwegian text.
>
>The default is to use
>   bullet, dash, star, triangle
>for the four levels if itemization.
>
>If you want to change the behaviour in your document only, all you need to
> do is \definesymbol[1][\endash]
>but I guess that it could be adapted, so that Norwegian documents will
>all use endash by default.
>
>Similar supoprt has already been implemented for Slovenian (to use
>different set of characters when itemize uses characters).
>
>There are two questions:
>- do other Norwegian users agree to change the default set?
>- what should be the order then? (ie: what character should be used
>for the second level of itemization?)

My suggestion is

\definesymbol[1][{\symbol[dash]}]
\definesymbol[2][{\symbol[star]}]
\definesymbol[3][{\symbol[circle]}]
\definesymbol[4][{\symbol[bullet]}]
\definesymbol[5][{\symbol[triangle]}]

and leave levels 6+ at their defaults. Norwegian people, feel free to comment 
on this. :)

>> We don't use full stops in numbered lists. In other words, instead of
>>
>> 1. Item 1
>> 2. Item 2
>> 3. Item 3
>>
>> we write
>>
>> 1  Item 1
>> 2  Item 2
>> 3  Item 3
>
>That's the matter of
>\setupitemize[stopper=]
>
>I don't know how to set that in a langage-specific way, but it sounds
>reasonable me to add it.
>
>> The same holds for numbered headings, both in the main text and in the
>> TOC.
>
>But sections already start with
>   1 Section name
>rather than
>   1. Section name
>by default. (Support for the second case might be improved in the
>future. Or rather: I hope that it will be.)
>
>> Would it be possible to support this by default in ConTeXt?
>>
>> We also use the comma in decimal numbers (3,14 instead of 3.14).
>
>We too. In text this is no problem anyway. Math can be setup in that
>way, but I doubt that it's set up in any language (although it could
>be). This means that you should better write $3{,}14$ instead of
>$3,14$,

OK. I guess this is an adequate solution.

A problem occurs only when people write $3,14$ without thinking, and don't 
notice that the result looks really bad. In LaTeX, there is a package 
ncccomma that defines an 'intelligent' comma to fix this, so that you can use 
the comma as both a decimal separator and a list separator. (The comma in 
ncccomma is much more 'intelligent' than the one in 'icomma', BTW.)

>I don't know about any other consequences, since TeX almost 
>never writes out any calculated floats in the resulting document.
>
>> Norwegian labels
>> ----------------
>>
>> Here is labels for Norwegian (Bokm?l and Nynorsk). The old 'no' labels
>> should be removed. The 'nb' ones are taken from the 'no' ones, but with
>> some corrections.
>>
>> Some comments: We don't usually capitalise the first letter in
>> crossreferences. Where one would in English write
>>
>> See Figure 5.22 ...
>>
>> we would write
>>
>> Se figur 5.22 ... (Bokm?l)
>> Sj? figur 5.22 ... (Nynorsk)
>
>But when you crossreference, you only get 5.22, you have to write
>"figur" manually (you can set up that perhaps, so that you get
>"figure" attached to the number, but in any case you need to do that
>manually).

OK. No problem then. :)

>"Figur 5.22" will only be used under the actual image. When
>crossreferencing, we use lowercase too, but under the fugure itself I
>think that uppercase is OK, at least for our language (since it's
>caption of the figure anyway).
>
>> But we would of course write
>>
>> Figur 5.22 viser ...
>> (Figure 5.22 shows ...)
>>
>> The definitions below use a capital first letter. Will this be a problem?
>>
>> I was also unsure about what the 'lines' label should be. The plural of
>> 'line' ('linje') in Norwegian (both 'nb' and 'nn') is 'linjer', but we do
>> not use the plural when referencing more than one line. Where one would
>> write
>>
>> The discussion on lines 5--13 ...
>>
>> in English, we would write
>>
>> Dr?ftinga p? linje 5--13 ...
>>
>> in Norwegian. In other words, we use the singular instead of the plural.
>> The same holds for the other cross-referencing terms ('Figure', 'Table'
>> &c.).
>>
>> Feel free to change the 'lines' label to 'linje' if this make it work
>> better.
>
>I don't know where exactly this is used, but I assume that it's for
>"List of Figures", "List of Tables". But I don't know exactly, I never
>use those. (I have just translated some of them and I hoped that the
>first one who will consider them wrong will complain ;)

:)

-- 
Karl Ove Hufthammer
E-mail and Jabber: karl at huftis.org

From preining at logic.at  Sun Feb 11 03:11:28 2007
From: preining at logic.at (Norbert Preining)
Date: Sun, 11 Feb 2007 03:11:28 +0100
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
In-Reply-To: <Pine.LNX.4.61.0702102157380.21898@linux.bop.eps.gda.pl>
References: <Pine.LNX.4.61.0702102157380.21898@linux.bop.eps.gda.pl>
Message-ID: <20070211021128.GA16479@gamma.logic.tuwien.ac.at>

On Sam, 10 Feb 2007, Boguslaw Jackowski wrote:
> Thank you very much -- this is perhaps the best bug report
> i've ever got. :-) It seems, however, that -- as Taco suggested:

Thanks, I know how bad are bad bug reports, as DD of texlive I have to
fight with enough bad ones ;-)

> >This looks suspiciously like a bug (aka optimization) in kpdf.
> 
> The glyphs (in lmsy5, lmsy6, lmsy7, lmsy8, lmsy9, and lmsy10) are built
> properly, the relevant hinting scheme in all cases is trivial (no so 
> called hint replacement that sometimes may be a mischief). By the way, 
> does the same effect occur for other sizes of lmsy*?

No idea. If some context guy can tell me how to do it? I have *NO*
knowledge at all from ConTeXt. The test document is:
\starttext
\S1
\blank[big]
\S2\crlf\S3
\stoptext
If one tells me how to make it in other font sizes, I will test.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
Yesterday it worked.
Today it is not working.
Windows is like that.
                       --- Windows Error Haiku

From bop at bop.com.pl  Sat Feb 10 21:58:49 2007
From: bop at bop.com.pl (Boguslaw Jackowski)
Date: Sat, 10 Feb 2007 21:58:49 +0100 (CET)
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
Message-ID: <Pine.LNX.4.61.0702102157380.21898@linux.bop.eps.gda.pl>


Hi Norbert!

Thank you very much -- this is perhaps the best bug report
i've ever got. :-) It seems, however, that -- as Taco suggested:

> This looks suspiciously like a bug (aka optimization) in kpdf.

The glyphs (in lmsy5, lmsy6, lmsy7, lmsy8, lmsy9, and lmsy10) are built
properly, the relevant hinting scheme in all cases is trivial (no so 
called hint replacement that sometimes may be a mischief). By the way, 
does the same effect occur for other sizes of lmsy*?

Cheers -- Jacko

-- 
BOP s. c.
ul. Bora-Komorowskiego 24, 80-377 Gdansk, Poland
tel. (+48 58) 553 46 59,  fax (+48 58) 511 03 81
bop at bop.com.pl, http://www.bop.com.pl

From mgb-debian at yosemite.net  Sun Feb 11 06:12:46 2007
From: mgb-debian at yosemite.net (Mike Bird)
Date: Sat, 10 Feb 2007 21:12:46 -0800
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
In-Reply-To: <20070211021128.GA16479@gamma.logic.tuwien.ac.at>
References: <Pine.LNX.4.61.0702102157380.21898@linux.bop.eps.gda.pl>
	<20070211021128.GA16479@gamma.logic.tuwien.ac.at>
Message-ID: <200702102112.47538.mgb-debian@yosemite.net>

On Saturday 10 February 2007 18:11, Norbert Preining wrote:
> On Sam, 10 Feb 2007, Boguslaw Jackowski wrote:
> > Someone else wrote:
> > >This looks suspiciously like a bug (aka optimization) in kpdf.

Not kpdf.  xpdf shows the same problems as kpdf when invoked with
"-t1lib no".  Looks like lmodern and freetype don't get along.

> > The glyphs (in lmsy5, lmsy6, lmsy7, lmsy8, lmsy9, and lmsy10) are built
> > properly, the relevant hinting scheme in all cases is trivial (no so
> > called hint replacement that sometimes may be a mischief). By the way,
> > does the same effect occur for other sizes of lmsy*?

I can't vouch for all font sizes but I first encountered the problem
at 14.7pt and then reproduced it at default font size for the test case.

--Mike Bird

From preining at logic.at  Sun Feb 11 14:04:45 2007
From: preining at logic.at (Norbert Preining)
Date: Sun, 11 Feb 2007 14:04:45 +0100
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
In-Reply-To: <Pine.LNX.4.61.0702102157380.21898@linux.bop.eps.gda.pl>
References: <Pine.LNX.4.61.0702102157380.21898@linux.bop.eps.gda.pl>
Message-ID: <20070211130445.GC31517@gamma.logic.tuwien.ac.at>

Hi Jacko!

On Sam, 10 Feb 2007, Boguslaw Jackowski wrote:
> called hint replacement that sometimes may be a mischief). By the way, 
> does the same effect occur for other sizes of lmsy*?

Ok, I tried the following:
\setupbodyfont[17pt]
\definedfont[ec-lmr17]
\starttext
\S1
\blank[big]
\S2\crlf\S3
\stoptext

and got a test.pdf with the following pdffonts output:
name                                 type         emb sub uni object ID
------------------------------------ ------------ --- --- --- ---------
ZASPBF+LMRoman10-Regular             Type 1       yes yes yes      7  0
TMBLAG+LMMathSymbols10-Italic        Type 1       yes yes no      10  0
CWHICF+LMRoman17-Regular             Type 1       yes yes yes     13  0

Then I opened it with
	xpdf -t1lib no test.pdf
(it is true that xpdf exhibits the same problems with t1lib turned off)

And now, surprisingly, the problems occur at different resolutions:
400%:	good
200%:	the \S symbols are too small and to low
125%:	good
100%:	BAD, the symbols touch each other
50%:	as far as I see like 200%

Attached as usual the respective screen shots.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
CAARNDUNCAN (n.)
The high-pitched and insistent cry of the young female human urging
one of its peer group to do something dangerous on a cliff-edge or
piece of toxic waste ground.
			--- Douglas Adams, The Meaning of Liff
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xpdf-not1lib-100.png
Type: image/png
Size: 1061 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070211/49d4903b/attachment.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xpdf-not1lib-125.png
Type: image/png
Size: 1169 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070211/49d4903b/attachment-0001.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xpdf-not1lib-150.png
Type: image/png
Size: 1411 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070211/49d4903b/attachment-0002.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xpdf-not1lib-200.png
Type: image/png
Size: 1624 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070211/49d4903b/attachment-0003.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xpdf-not1lib-400.png
Type: image/png
Size: 3823 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070211/49d4903b/attachment-0004.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xpdf-not1lib-50.png
Type: image/png
Size: 509 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070211/49d4903b/attachment-0005.png 

From taco at elvenkind.com  Mon Feb 12 10:16:10 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 12 Feb 2007 10:16:10 +0100
Subject: [dev-context] [OS X TeX] More New MacTeX Packages
In-Reply-To: <C6581A45-F555-4D73-924E-04AC4E57A766@rna.nl>
References: <9BAE31F9-2597-4DB4-92D6-764B7474D74B@math.uoregon.edu>
	<B5C315F8-AB5B-4271-B381-44E4D293144D@ntlworld.ie>
	<C6581A45-F555-4D73-924E-04AC4E57A766@rna.nl>
Message-ID: <45D0305A.8050206@elvenkind.com>

Gerben Wierda wrote:
> Hans & Taco,
> 
> There is a potental problem with ConTeXt on TL2007 and the ? symbol  
> havig to do with changes in marvosym.
> 
> Charles,
> 
> could you make a non gtamacfonts test file and see if that works?  
> Because I do not kow how ConTeXt works. If you have such a file and  it 
> does not work, probably Has & Taco would like to kow the exact  details.

No need for a test file, the problem is staightforward enough. The UTF
euro sign maps to the macro \texteuro, that then tries to find the best
suited glyph. Since EC encoding doesn't have a euro symbol, context
falls back to the marvosym font to provide one.

But the metric file ConTeXt knows that font by (fmvr8x) was deleted
from TeXLive, because the package (marvosym) that it belongs to has
been updated, and it switched to a new name for the metric file.

It is very likely they did not change *just* the name, but updated the
base font file as well, so simple name remapping probably will not work
anyway. We probably have to update the support macros for marvosym as
well (cc the dev-context list).

It is bad luck that the last-minute update to marvosym in texlive
breaks the marvosym support in context, but there is no way to fix
that any more.

Meanwhile, if you need a euro sign, it looks like you have to use
texnansi encoding.

Greetings, Taco

From preining at logic.at  Mon Feb 12 12:19:45 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 12 Feb 2007 12:19:45 +0100
Subject: [dev-context] [OS X TeX] More New MacTeX Packages
In-Reply-To: <45D0305A.8050206@elvenkind.com>
References: <9BAE31F9-2597-4DB4-92D6-764B7474D74B@math.uoregon.edu>
	<B5C315F8-AB5B-4271-B381-44E4D293144D@ntlworld.ie>
	<C6581A45-F555-4D73-924E-04AC4E57A766@rna.nl>
	<45D0305A.8050206@elvenkind.com>
Message-ID: <20070212111945.GD9341@gamma.logic.tuwien.ac.at>

Hi all!

On Mon, 12 Feb 2007, Taco Hoekwater wrote:
> But the metric file ConTeXt knows that font by (fmvr8x) was deleted
> from TeXLive, because the package (marvosym) that it belongs to has
> been updated, and it switched to a new name for the metric file.

Yup. Marvosym was updated on CTAN on 2006-05-11, so it was time to
update it.

> It is very likely they did not change *just* the name, but updated the
> base font file as well, so simple name remapping probably will not work

Yup, from marvodoc.tex:

\item[2006-05-11] Version 2.1: Renamed Rightarrow macro to MVRightarrow.
New TeX name for font (umvs). Rewrote style file. Added fd file.

> It is bad luck that the last-minute update to marvosym in texlive
> breaks the marvosym support in context, but there is no way to fix
> that any more.

Sorry for that, but in fact I didn't think about that ConTeXt us the old
marvosym interface? So it could have been broken since quite some time
if people upgraded the marvosym from CTAN.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
TOTTERIDGE (n.)
The ridiculous two-inch hunch that people adopt when arriving late for
the theatre in the vain and futile hope that it will minimise either
the embarrassment of the lack of visibility for the rest of the
audience. c.f. hickling.
			--- Douglas Adams, The Meaning of Liff

From bop at bop.com.pl  Mon Feb 12 12:42:39 2007
From: bop at bop.com.pl (Boguslaw Jackowski)
Date: Mon, 12 Feb 2007 12:42:39 +0100 (CET)
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
Message-ID: <Pine.LNX.4.61.0702121236570.7910@linux.bop.eps.gda.pl>


Hi,

> Ok, I tried the following:
> \setupbodyfont[17pt]
[...]
> \stoptext

Thanks! Interesting...

And what about trying a trivial plain script:

\nopagenumbers

\font\A=lmsy5  \font\a=ec-lmr5
\font\B=lmsy6  \font\b=ec-lmr6
\font\C=lmsy7  \font\c=ec-lmr7
\font\D=lmsy8  \font\d=ec-lmr8
\font\E=lmsy9  \font\e=ec-lmr9
\font\F=lmsy10 \font\f=ec-lmr10

\A \char120 \a 5\par
\B \char120 \b 6\par
\C \char120 \c 7\par
\D \char120 \d 8\par
\E \char120 \e 9\par
\F \char120 \f 10\par

\end

You can also check various magnifications adding as the first line of 
the script

\magnification=1200

or

\magnification=800

or something else.

All the best -- Jacko

Ps. The only guess that comes to my mind is that there may be something 
wrong with the global hinting (so called blue zones). But in order to 
check it thoroughly I need a better controlled example.

-- 
BOP s. c.
ul. Bora-Komorowskiego 24, 80-377 Gdansk, Poland
tel. (+48 58) 553 46 59,  fax (+48 58) 511 03 81
bop at bop.com.pl, http://www.bop.com.pl

From preining at logic.at  Mon Feb 12 12:47:45 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 12 Feb 2007 12:47:45 +0100
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
In-Reply-To: <Pine.LNX.4.61.0702121236570.7910@linux.bop.eps.gda.pl>
References: <Pine.LNX.4.61.0702121236570.7910@linux.bop.eps.gda.pl>
Message-ID: <20070212114745.GG9341@gamma.logic.tuwien.ac.at>

On Mon, 12 Feb 2007, Boguslaw Jackowski wrote:
> And what about trying a trivial plain script:
> 
> \nopagenumbers
> 
> \font\A=lmsy5  \font\a=ec-lmr5
> \font\B=lmsy6  \font\b=ec-lmr6
> \font\C=lmsy7  \font\c=ec-lmr7
> \font\D=lmsy8  \font\d=ec-lmr8
> \font\E=lmsy9  \font\e=ec-lmr9
> \font\F=lmsy10 \font\f=ec-lmr10
> 
> \A \char120 \a 5\par
> \B \char120 \b 6\par
> \C \char120 \c 7\par
> \D \char120 \d 8\par
> \E \char120 \e 9\par
> \F \char120 \f 10\par
> 
> \end

Attached pngs from 400,200,150,125,100% ...

> Ps. The only guess that comes to my mind is that there may be something 
> wrong with the global hinting (so called blue zones). But in order to 
> check it thoroughly I need a better controlled example.

If you tell me what to test, I can do it ...

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
SCRABSTER (n.)
One of those dogs which has it off on your leg during tea.
			--- Douglas Adams, The Meaning of Liff
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xpdf-not1lib-newtest-100.png
Type: image/png
Size: 1054 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070212/01c8aef4/attachment.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xpdf-not1lib-newtest-125.png
Type: image/png
Size: 1346 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070212/01c8aef4/attachment-0001.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xpdf-not1lib-newtest-150.png
Type: image/png
Size: 1674 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070212/01c8aef4/attachment-0002.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xpdf-not1lib-newtest-200.png
Type: image/png
Size: 2201 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070212/01c8aef4/attachment-0003.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xpdf-not1lib-newtest-400.png
Type: image/png
Size: 4190 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070212/01c8aef4/attachment-0004.png 

From pragma at wxs.nl  Mon Feb 12 12:56:47 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 12 Feb 2007 12:56:47 +0100
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
In-Reply-To: <20070212114745.GG9341@gamma.logic.tuwien.ac.at>
References: <Pine.LNX.4.61.0702121236570.7910@linux.bop.eps.gda.pl>
	<20070212114745.GG9341@gamma.logic.tuwien.ac.at>
Message-ID: <45D055FF.3010200@wxs.nl>

Norbert Preining wrote:
> On Mon, 12 Feb 2007, Boguslaw Jackowski wrote:
>   
>> And what about trying a trivial plain script:
>>
>> \nopagenumbers
>>
>> \font\A=lmsy5  \font\a=ec-lmr5
>> \font\B=lmsy6  \font\b=ec-lmr6
>> \font\C=lmsy7  \font\c=ec-lmr7
>> \font\D=lmsy8  \font\d=ec-lmr8
>> \font\E=lmsy9  \font\e=ec-lmr9
>> \font\F=lmsy10 \font\f=ec-lmr10
>>
>> \A \char120 \a 5\par
>> \B \char120 \b 6\par
>> \C \char120 \c 7\par
>> \D \char120 \d 8\par
>> \E \char120 \e 9\par
>> \F \char120 \f 10\par
>>
>> \end
>>     
>
>   
strange these par signs ... esp 9/10 pt looks like the wrong glyphs are taken 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From taco at elvenkind.com  Mon Feb 12 12:37:06 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 12 Feb 2007 12:37:06 +0100
Subject: [dev-context] [OS X TeX] More New MacTeX Packages
In-Reply-To: <45D05107.6010603@elvenkind.com>
References: <9BAE31F9-2597-4DB4-92D6-764B7474D74B@math.uoregon.edu>
	<B5C315F8-AB5B-4271-B381-44E4D293144D@ntlworld.ie>
	<C6581A45-F555-4D73-924E-04AC4E57A766@rna.nl>
	<45D0305A.8050206@elvenkind.com>
	<20070212111945.GD9341@gamma.logic.tuwien.ac.at>
	<45D05107.6010603@elvenkind.com>
Message-ID: <45D05162.60903@elvenkind.com>

Taco Hoekwater wrote:
> 
>   \definefontsynonym[fmvr8x][umvs]
>   \loadmapline[+][umvs Marvosym <marvosym.pfb]

Sorry, I guess that should be

   \loadmapline[+][umvs MarVoSym <marvosym.pfb]

Taco

From taco at elvenkind.com  Mon Feb 12 12:35:35 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 12 Feb 2007 12:35:35 +0100
Subject: [dev-context] [OS X TeX] More New MacTeX Packages
In-Reply-To: <20070212111945.GD9341@gamma.logic.tuwien.ac.at>
References: <9BAE31F9-2597-4DB4-92D6-764B7474D74B@math.uoregon.edu>
	<B5C315F8-AB5B-4271-B381-44E4D293144D@ntlworld.ie>
	<C6581A45-F555-4D73-924E-04AC4E57A766@rna.nl>
	<45D0305A.8050206@elvenkind.com>
	<20070212111945.GD9341@gamma.logic.tuwien.ac.at>
Message-ID: <45D05107.6010603@elvenkind.com>

Norbert Preining wrote:
> 
>>It is very likely they did not change *just* the name, but updated the
>>base font file as well, so simple name remapping probably will not work
> 
> Yup, from marvodoc.tex:
> 
> \item[2006-05-11] Version 2.1: Renamed Rightarrow macro to MVRightarrow.
> New TeX name for font (umvs). Rewrote style file. Added fd file.

Better than I had expected. Assuming the package still uses the same pfb
(and I think so, because of the timestamp on CTAN), then this should
work:

   \definefontsynonym[fmvr8x][umvs]
   \loadmapline[+][umvs Marvosym <marvosym.pfb]

But I cannot test that myself right now.

>>It is bad luck that the last-minute update to marvosym in texlive
>>breaks the marvosym support in context, but there is no way to fix
>>that any more.
> 
> Sorry for that, but in fact I didn't think about that ConTeXt us the old
> marvosym interface? So it could have been broken since quite some time
> if people upgraded the marvosym from CTAN.

These things happen. It never crossed our mind to check CTAN ourselves,
either.

Best wishes,

Taco

From bop at bop.com.pl  Mon Feb 12 16:13:08 2007
From: bop at bop.com.pl (Boguslaw Jackowski)
Date: Mon, 12 Feb 2007 16:13:08 +0100 (CET)
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
Message-ID: <Pine.LNX.4.61.0702121610140.9483@linux.bop.eps.gda.pl>


HH> strange these par signs

Strange, indeed.

HH> esp 9/10 pt looks like the wrong glyphs are taken

There are no fonts in question from which the incriminated (tall and thin)
section glyphs may originate. Which program could intervene on the way?

Enclosed you'll find the screen shots of the previews from Acrobat Readers
5.0 and 6.0 for (for the same magnifications and the same plain TeX 
example processed by dvips --> PS and GS 8.53 --> PDF).
AR 6.0 is a little bit better (and it apparently renders the PDF with 
a higher resolution), but NO weird shapes can be observed.

Cheers -- Jacko

-- 
BOP s. c.
ul. Bora-Komorowskiego 24, 80-377 Gdansk, Poland
tel. (+48 58) 553 46 59,  fax (+48 58) 511 03 81
bop at bop.com.pl, http://www.bop.com.pl
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ar-100-5.png
Type: image/png
Size: 939 bytes
Desc: 
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070212/990a7f75/attachment-0010.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ar-100-6.png
Type: image/png
Size: 1503 bytes
Desc: 
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070212/990a7f75/attachment-0011.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ar-125-5.png
Type: image/png
Size: 1110 bytes
Desc: 
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070212/990a7f75/attachment-0012.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ar-125-6.png
Type: image/png
Size: 1840 bytes
Desc: 
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070212/990a7f75/attachment-0013.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ar-150-5.png
Type: image/png
Size: 1442 bytes
Desc: 
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070212/990a7f75/attachment-0014.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ar-150-6.png
Type: image/png
Size: 2181 bytes
Desc: 
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070212/990a7f75/attachment-0015.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ar-200-5.png
Type: image/png
Size: 2196 bytes
Desc: 
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070212/990a7f75/attachment-0016.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ar-200-6.png
Type: image/png
Size: 2950 bytes
Desc: 
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070212/990a7f75/attachment-0017.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ar-400-5.png
Type: image/png
Size: 4642 bytes
Desc: 
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070212/990a7f75/attachment-0018.png 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ar-400-6.png
Type: image/png
Size: 6622 bytes
Desc: 
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070212/990a7f75/attachment-0019.png 

From preining at logic.at  Mon Feb 12 16:16:42 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 12 Feb 2007 16:16:42 +0100
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
In-Reply-To: <Pine.LNX.4.61.0702121610140.9483@linux.bop.eps.gda.pl>
References: <Pine.LNX.4.61.0702121610140.9483@linux.bop.eps.gda.pl>
Message-ID: <20070212151641.GD670@gamma.logic.tuwien.ac.at>

On Mon, 12 Feb 2007, Boguslaw Jackowski wrote:
> There are no fonts in question from which the incriminated (tall and thin)
> section glyphs may originate. Which program could intervene on the way?

Mark mentioned it several times, it seems to be the freetype renderer.
xpdf per default uses t1lib and with t1lib rasterizer it does work
without problems.

As soon as you disable t1lib and use freetype rasterizer it is getting
bad...

Ciao

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
LISTOWEL (n.)
The small mat on the bar designed to be more absorbent than the bar,
but not as absorbent as your elbows.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Mon Feb 12 16:26:11 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 12 Feb 2007 16:26:11 +0100
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
In-Reply-To: <20070212151641.GD670@gamma.logic.tuwien.ac.at>
References: <Pine.LNX.4.61.0702121610140.9483@linux.bop.eps.gda.pl>
	<20070212151641.GD670@gamma.logic.tuwien.ac.at>
Message-ID: <45D08713.4000506@wxs.nl>

Norbert Preining wrote:
> On Mon, 12 Feb 2007, Boguslaw Jackowski wrote:
>   
>> There are no fonts in question from which the incriminated (tall and thin)
>> section glyphs may originate. Which program could intervene on the way?
>>     
>
> Mark mentioned it several times, it seems to be the freetype renderer.
> xpdf per default uses t1lib and with t1lib rasterizer it does work
> without problems.
>
> As soon as you disable t1lib and use freetype rasterizer it is getting
> bad...
>   
maybe a caching problem 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From bop at bop.com.pl  Mon Feb 12 16:37:23 2007
From: bop at bop.com.pl (Boguslaw Jackowski)
Date: Mon, 12 Feb 2007 16:37:23 +0100 (CET)
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
Message-ID: <Pine.LNX.4.61.0702121633280.9651@linux.bop.eps.gda.pl>


NP> Mark mentioned it several times, it seems to be the freetype renderer.
NP> xpdf per default uses t1lib and with t1lib rasterizer it does work
NP> without problems.

Sorry, I'm not on the list dev-context at ntg.nl, I received only the letter
from you and (one) from Mike Bird <mgb-debian at yosemite.net>, who wrote:

> Looks like lmodern and freetype don't get along.

I like this formulation: at the moment I cannot swear, that LMs
are flawless (in this respect; I'm sure they are not in many
others... ;-)

Therefore I tested the programs from commercial vendors, as there was
no mention so far about them (or I just overlooked it), just to have
more experimental data in hand.

The only thing we can  do -- at this stage -- is to experiment with global 
hints (I hope it is not an urgent matter...). Or maybe freetype team will 
earlier spot the reason? Has anybody informed them?

Thank you very much for the efficient collaboration.

Cheers -- Jacko

-- 
BOP s. c.
ul. Bora-Komorowskiego 24, 80-377 Gdansk, Poland
tel. (+48 58) 553 46 59,  fax (+48 58) 511 03 81
bop at bop.com.pl, http://www.bop.com.pl

From preining at logic.at  Mon Feb 12 16:50:41 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 12 Feb 2007 16:50:41 +0100
Subject: [dev-context] [Fwd: Re:  Debian Context Font problems]
In-Reply-To: <Pine.LNX.4.61.0702121633280.9651@linux.bop.eps.gda.pl>
References: <Pine.LNX.4.61.0702121633280.9651@linux.bop.eps.gda.pl>
Message-ID: <20070212155041.GG670@gamma.logic.tuwien.ac.at>

On Mon, 12 Feb 2007, Boguslaw Jackowski wrote:
> NP> Mark mentioned it several times, it seems to be the freetype renderer.
> NP> xpdf per default uses t1lib and with t1lib rasterizer it does work
> NP> without problems.
> 
> Sorry, I'm not on the list dev-context at ntg.nl, I received only the letter
> from you and (one) from Mike Bird <mgb-debian at yosemite.net>, who wrote:

Ahh, sorry, I didn't get this. Yes. He found out that not only with
kpdf, but also with 
	xpdf -t1lib no
the same problem occurs. And in the absence of t1lib rendering xpdf uses
freetype renderning.

> The only thing we can  do -- at this stage -- is to experiment with global 
> hints (I hope it is not an urgent matter...). Or maybe freetype team will 
> earlier spot the reason? Has anybody informed them?

No idea. Maybe we should involve someone from the upstream freetype
team? Does anyone of you have contact with freetype developers?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
LOWTHER (vb.)
(Of a large group of people who have been to the cinema together.) To
stand aimlessly about on the pavement and argue about whatever to go
and eat either a Chinese meal nearby or an Indian meal at a restaurant
which somebody says is very good but isn't certain where it is, or
have a drink and think about it, or just go home, or have a Chinese
meal nearby - until by the time agreement is reached everything is
shut.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Mon Feb 12 18:16:50 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 12 Feb 2007 18:16:50 +0100
Subject: [dev-context] [Fwd: Re:  [OS X TeX] More New MacTeX Packages]
Message-ID: <45D0A102.4090400@elvenkind.com>


Hi guys,

See below. Does anybody have a chance to investigate? There is nothing
I can do on my non-mac,non-texlive system, I am afraid.

Taco

-------- Original Message --------
Subject: Re: [dev-context] [OS X TeX] More New MacTeX Packages
Date: Mon, 12 Feb 2007 12:54:25 +0000
From: Charles Doherty <charles.doherty at ntlworld.ie>
To: Taco Hoekwater <taco at elvenkind.com>
References: <9BAE31F9-2597-4DB4-92D6-764B7474D74B at math.uoregon.edu> 
<B5C315F8-AB5B-4271-B381-44E4D293144D at ntlworld.ie> 
<C6581A45-F555-4D73-924E-04AC4E57A766 at rna.nl> 
<45D0305A.8050206 at elvenkind.com> 
<20070212111945.GD9341 at gamma.logic.tuwien.ac.at> 
<45D05107.6010603 at elvenkind.com> <45D05162.60903 at elvenkind.com> 
<06C14C4B-F82F-409F-9369-B1902CE8399C at ntlworld.ie> 
<45D05EDA.5000101 at elvenkind.com>


On 12 Feb 2007, at 12:34, Taco Hoekwater wrote:

> Charles Doherty wrote:
>> That works perfectly. At first run though I had random errors on   
>> accents and dashes but I trashed all auxiliary files and  
>> everything  was correct on the fresh run. By the way it works with  
>> both the lines  above Marvosym and MarVoSym
>
> Great. Ok, I'll add this to the context wiki as soon as texlive is
> officially 'out'.
>
> Taco

Taco,

Just to be sure I tested a few more times. It works fine in gwTeX  .
I tried it on TeXLive-2007, the other package from Dick Kock's site.
The euro symbol comes out right but the pound sterling ? is randomly
changed to a dollar sign $. Also some accented words are garbled as
well as some dashes. I trashed all auxiliary files to make sure no
corruption was carried to a new run but these problems persisted. So
the gwTeX distribution deals with it properly but not TeXLive-2007.

Apologies for not testing a bit more before sending off the e-mail.
I hope this is of some help.

Charlie

From contexttest-featurerequests at foundry.supelec.fr  Tue Feb 13 11:28:11 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Tue, 13 Feb 2007 11:28:11 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B73?=
	=?utf-8?q?=5D_Unbreakable_space_after_labels_in_floats?=
Message-ID: <200702131028.l1DASBcQ010029@semantic.metz.supelec.fr>

Feature Requests item #73, was opened at 2007-02-05 01:13
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=73&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Mojca Miklavec (mojca)
Assigned to: Nobody (None)
Summary: Unbreakable space after labels in floats 
Version: None
Category: None


Initial Comment:
(from contextgarden.net)

Unbreakable space after labels such as
    \setuplabeltext[de][figure=Abbildung~]
in default configuration


HH: But the word needs to be hyphenatable, so it would be something ...|~| or, i must think of it


----------------------------------------------------------------------

Comment By: Peter M?nster (peter)
Date: 2007-02-13 11:28

Message:
I don't understand: "Abbildung " is as hyphenatable as "Abbildung~". Here is a test file:

\starttext
Abbildung Abbildung Abbildung Abbildung Abbildung Abbildung Abbildung
Abbildung Abbildung Abbildung Abbildung Abbildung Abbildung Abbildung
Abbildung Abbildung Abbildung Abbildung Abbildung Abbildung Abbildung

Abbildung~Abbildung~Abbildung~Abbildung~Abbildung~Abbildung~Abbildung~%
Abbildung~Abbildung~Abbildung~Abbildung~Abbildung~Abbildung~Abbildung~%
Abbildung~Abbildung~Abbildung~Abbildung~Abbildung~Abbildung~Abbildung
\stoptext

Peter

----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=73&group_id=21


From taco at elvenkind.com  Tue Feb 13 14:23:17 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 13 Feb 2007 14:23:17 +0100
Subject: [dev-context] [Fwd: [tex-live] wrong shebang in ConTeXt scripts
	break RPM packaging]
Message-ID: <45D1BBC5.5030104@elvenkind.com>


just in case ..

-------- Original Message --------
Subject: [tex-live] wrong shebang in ConTeXt scripts break RPM packaging
Date: Tue, 13 Feb 2007 12:31:01 +0100
From: Jindrich Novy <jindranovy at gmail.com>
To: tex-live at tug.org

Hi all,

I was bitten by a bug in ConTeXt while packaging the TeXLive 2007 texmf
tree. RPM's find-requires script added a bogus dependency to /usr/env
which prevented me to actually install the packages. I tracked it down
to the ConTeXt package ruby scripts, where incorrect shebang is present
in the wwwserver.rb. The cause might be that the ctxtools.rb script,
which contains the add_shebang function, which is used to write a
shebang to newly created scripts, contains a typo, when it refers
to /usr/env, but should refer to /usr/bin/env as usual.

Attaching patch that fixes it.

Jindrich

-------------- next part --------------
A non-text attachment was scrubbed...
Name: texlive-2007-badenv.patch
Type: text/x-patch
Size: 803 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070213/c3a0dbab/attachment.bin 

From taco at elvenkind.net  Tue Feb 13 18:48:16 2007
From: taco at elvenkind.net (Taco Hoekwater)
Date: Tue, 13 Feb 2007 18:48:16 +0100
Subject: [dev-context] [Fwd: CTAN Update: fonts iwona and kurier]
Message-ID: <45D1F9E0.5030602@elvenkind.net>



-------- Original Message --------
Subject: CTAN Update: fonts iwona and kurier
Date: Tue, 13 Feb 2007 15:39:56 +0100 (CET)
From: CTAN Announcements <ctan-ann at dante.de>
Organization: UNI-C
To: ctan-ann at dante.de
Newsgroups: comp.text.tex
References: 
<Pine.LNX.4.44.0702131509310.2466-100000 at fam82.internetdsl.tpnet.pl>

On Tue, 13 Feb 2007, Staszek Wawrykiewicz submitted updates for the

    iwona and kurier

packages.

  > ------
  > Package: iwona
  > Version: 0.991
  > Author: Janusz Marian Nowacki
  > License: GFNL (GUST-FONT-NOSOURCE-LICENSE based on LPPL)
  > Location on CTAN: fonts/iwona/
  >
  > The current version (0.991) contains negationslash glyph corrected.
  >
  > ------
  > Package: kurier
  > Version: 0.991
  > Author: Janusz Marian Nowacki
  > License: GFNL (GUST-FONT-NOSOURCE-LICENSE based on LPPL)
  > Location on CTAN: fonts/kurier/
  >
  > The current version (0.991) contains corrected negationslash glyph.

Thanks for the upload.

For the CTAN Team
   Rainer Sch?pf


From pragma at wxs.nl  Tue Feb 13 21:09:22 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 13 Feb 2007 21:09:22 +0100
Subject: [dev-context] [Fwd: [tex-live] wrong shebang in ConTeXt scripts
 break RPM packaging]
In-Reply-To: <45D1BBC5.5030104@elvenkind.com>
References: <45D1BBC5.5030104@elvenkind.com>
Message-ID: <45D21AF2.7070601@wxs.nl>

Taco Hoekwater wrote:
>
>
> Attaching patch that fixes it.
fixed

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From mojca.miklavec.lists at gmail.com  Wed Feb 14 19:36:32 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 14 Feb 2007 19:36:32 +0100
Subject: [dev-context] how to \obeyMPlines?
Message-ID: <6faad9f00702141036i32afab35o9e4ea1dfa02db7a1@mail.gmail.com>

Hello,

It took me way too much time to trace the source of the problem, but
now I've finally found it, although I don't know how to solve it. It's
not crytical, but for some longer graphics metapost complains about
too long lines.

Assume the existance of the following file, say, a.tex:

\startMYgraphic[1]
draw fullcircle scaled 3cm;
draw fullcircle scaled 3cm shifted (2cm,0);
\stopMYgraphic


The main file contains:

\def\processMYfile[#1][#2]{%
   \def\startMYgraphic
      {\obeyMPlines % <- problem
       \dosingleargument\dostartMYgraphic}
   \long\def\dostartMYgraphic[##1]##2\stopMYgraphic
      {\startreusableMPgraphic{#1 ##1}##2\stopreusableMPgraphic}
   \readlocfile{#2}{}{}
}

\processMYfile[X][a.tex]
\reuseMPgraphic{X 1}


If I leave the \obeyMPlines there, I get spurious characters (probably
because TeX adds some character codes which correspond to \r or \n).
If I comment out the \obeyMPlines it works OK, but longer graphics
fail.

Thanks a lot,
    Mojca


This is another, only partially related question, and still only of
theoretical nature:
Also, sometimes it fails because of TeX memory limit exceeded. (If
gnuplot wants to draw a 100x100 grid, it needs 10.000 lines of code
times three - one for color, one for shape, one for actually
drawing/filling it, that makes it some 31.000 lines of code, and TeX
cannot handle that. Will there be any possibility for a solution to it
any time in the future except fixing gnuplot itself? It's not that
important, but I would just like to know if that issue is solvable at
all from within TeX or not.)

Otherwise, the speed of gnuplot doesn't cause any problems any more. I
don't know what has changed, but I bet that ConTeXt now works at least
five times faster with graphics than it worked two years ago for plain
text only ;)

From taco at elvenkind.com  Thu Feb 15 10:36:48 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 15 Feb 2007 10:36:48 +0100
Subject: [dev-context] how to \obeyMPlines?
In-Reply-To: <6faad9f00702141036i32afab35o9e4ea1dfa02db7a1@mail.gmail.com>
References: <6faad9f00702141036i32afab35o9e4ea1dfa02db7a1@mail.gmail.com>
Message-ID: <45D429B0.6000305@elvenkind.com>

Mojca Miklavec wrote:
> If I leave the \obeyMPlines there, I get spurious characters (probably
> because TeX adds some character codes which correspond to \r or \n).

Yes. The ^M in the file is \catcode 13, and gets turned into
\obeyedline. \obeyedline, it seems, contains a carriage return with
\catcode 12.

> If I comment out the \obeyMPlines it works OK, but longer graphics
> fail.

\def\processMYfile[#1][#2]{%
    \def\startMYgraphic
       {\obeyMPlines % <- no longer a problem
        \def\obeyedline{}% <- thanks to this
        \dosingleargument\dostartMYgraphic}
    \long\def\dostartMYgraphic[##1]##2\stopMYgraphic
       {\startreusableMPgraphic{#1 ##1}##2\stopreusableMPgraphic}
    \readlocfile{#2}{}{}}

> Also, sometimes it fails because of TeX memory limit exceeded. (If
> gnuplot wants to draw a 100x100 grid, it needs 10.000 lines of code
> times three - one for color, one for shape, one for actually
> drawing/filling it, that makes it some 31.000 lines of code, and TeX
> cannot handle that. Will there be any possibility for a solution to it
> any time in the future except fixing gnuplot itself? It's not that
> important, but I would just like to know if that issue is solvable at
> all from within TeX or not.)

Not right now. Hopefully the next metapost version (1.1, due out
in late spring/summer) will allow you to 'store' a set of the grid
boxes and call for it, so you could for example save a 10x10 square
and execute it 100 times.

Best,
Taco

From mojca.miklavec.lists at gmail.com  Thu Feb 15 16:55:15 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 15 Feb 2007 16:55:15 +0100
Subject: [dev-context] how to \obeyMPlines?
In-Reply-To: <45D429B0.6000305@elvenkind.com>
References: <6faad9f00702141036i32afab35o9e4ea1dfa02db7a1@mail.gmail.com>
	<45D429B0.6000305@elvenkind.com>
Message-ID: <6faad9f00702150755q17b16266w1f559032e9def36b@mail.gmail.com>

On 2/15/07, Taco Hoekwater wrote:
> Mojca Miklavec wrote:
> > If I leave the \obeyMPlines there, I get spurious characters (probably
> > because TeX adds some character codes which correspond to \r or \n).
>
> Yes. The ^M in the file is \catcode 13, and gets turned into
> \obeyedline. \obeyedline, it seems, contains a carriage return with
> \catcode 12.
>
> > If I comment out the \obeyMPlines it works OK, but longer graphics
> > fail.
>
> \def\processMYfile[#1][#2]{%
>     \def\startMYgraphic
>        {\obeyMPlines % <- no longer a problem
>         \def\obeyedline{}% <- thanks to this
>         \dosingleargument\dostartMYgraphic}
>     \long\def\dostartMYgraphic[##1]##2\stopMYgraphic
>        {\startreusableMPgraphic{#1 ##1}##2\stopreusableMPgraphic}
>     \readlocfile{#2}{}{}}

Thanks a lot. I need to test it as soon as I come home ... I also
figured out yesterday (when I was combining multiple graphs with
\startcombination ... \stopcombination) that there is some spurious
blank space in front of the first plot (where there were those
spurious accents before). So it probably still means another hour or
more before I find that nasty bug ...

> > Also, sometimes it fails because of TeX memory limit exceeded. (If
> > gnuplot wants to draw a 100x100 grid, it needs 10.000 lines of code
> > times three - one for color, one for shape, one for actually
> > drawing/filling it, that makes it some 31.000 lines of code, and TeX
> > cannot handle that. Will there be any possibility for a solution to it
> > any time in the future except fixing gnuplot itself? It's not that
> > important, but I would just like to know if that issue is solvable at
> > all from within TeX or not.)
>
> Not right now. Hopefully the next metapost version (1.1, due out
> in late spring/summer) will allow you to 'store' a set of the grid
> boxes and call for it, so you could for example save a 10x10 square
> and execute it 100 times.

The problem is not in metapost.

I should probably try it before speaking, but I don't believe that
metapost would have problems processing the code. The problem is that
the content between
    \startMPpage
    ... lots of stuff ...
    \stopMPpage
where TeX fails to store the contents between \startMPpage and
\stopMPpage. I doubt that fixing metapost in any respect could help
solving that.

Apart from that: the problem mostly lies in gnuplot itself. One
doesn't notice the problem when using bitmap images, and PostScript
code is also efficient enough. For properly fixing the problem, I
would need to modify the core gnuplot routines, so that they I could
optimize the behaviour for metapost. In this particular case it could
simply output a long list of colors and only the basic parameters for
drawing the grid instead of filling 10.000 rectangles explicitly. But
that's not the top priority right now.


The only two problems (or lack of features) I had with metapost so far are/were:

1.) drawing patterns (not really critical to solve - there are
workarounds; but would be nice to have it in a distant future):

- I have created an image (diagonal lines for example), say 1cm x 1cm.
Then I needed to fill some area, say 20cm x 20cm, which I did with a
nested for loop and redraw that image 400 times. I prepared
approximately 10 predefined images with different fill patterns, so
one chooses an index of the image to fill the area with (one could
also provide his own image), and a closed path which has to be filled.

That was the only case where I actually saw metapost running out of
memory (in most other cases it was TeX the one that complained).

2.) I need to figure out how to draw bitmap images. Either by
user-provided colors or ascii string, or even in the same way as
\sometxt works (where metapost doesn't even see the content).

Also, it would be great if I could draw a NxM bitmap image by providing
- a 2D function (like sin(x)*cos(y)) and
- a mapping from a value to color
to metapost.

This can all be done using "fill unitsquare shifted (i,j) withcolor
...", but the output is both ugly and inefficient.

A few days ago I figured out that "convert" from ImageMagick can draw
images like that (using some simple algebraic functions for specifying
a color channel value of a pixel), so I'm now using a hybrid of both
now (convert to create an image and metapost for enhancing it, but
it's a bit uncomfortable to mix the two).

Mojca

From taco at elvenkind.com  Thu Feb 15 17:32:29 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 15 Feb 2007 17:32:29 +0100
Subject: [dev-context] how to \obeyMPlines?
In-Reply-To: <6faad9f00702150755q17b16266w1f559032e9def36b@mail.gmail.com>
References: <6faad9f00702141036i32afab35o9e4ea1dfa02db7a1@mail.gmail.com>	
	<45D429B0.6000305@elvenkind.com>
	<6faad9f00702150755q17b16266w1f559032e9def36b@mail.gmail.com>
Message-ID: <45D48B1D.4010802@elvenkind.com>



Mojca Miklavec wrote:
> The problem is not in metapost.

I know, but if the metapost output would not endlessly (and needlessly)
repeat the low-level drawing commands, the output would be much smaller,
and thereby the converter would need much less memory to store it all
inside TeX.

Cheers, Taco



From mojca.miklavec.lists at gmail.com  Thu Feb 15 21:00:53 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 15 Feb 2007 21:00:53 +0100
Subject: [dev-context] how to \obeyMPlines?
In-Reply-To: <45D429B0.6000305@elvenkind.com>
References: <6faad9f00702141036i32afab35o9e4ea1dfa02db7a1@mail.gmail.com>
	<45D429B0.6000305@elvenkind.com>
Message-ID: <6faad9f00702151200x62fb20ayf3488e714f4a797c@mail.gmail.com>

On 2/15/07, Taco Hoekwater wrote:
> Mojca Miklavec wrote:
> > If I leave the \obeyMPlines there, I get spurious characters (probably
> > because TeX adds some character codes which correspond to \r or \n).
>
> Yes. The ^M in the file is \catcode 13, and gets turned into
> \obeyedline. \obeyedline, it seems, contains a carriage return with
> \catcode 12.
>
> > If I comment out the \obeyMPlines it works OK, but longer graphics
> > fail.
>
> \def\processMYfile[#1][#2]{%
>     \def\startMYgraphic
>        {\obeyMPlines % <- no longer a problem
>         \def\obeyedline{}% <- thanks to this

Thanks a lot. This works OK, now I only need to figure out where the
additional space comes from.

>         \dosingleargument\dostartMYgraphic}
>     \long\def\dostartMYgraphic[##1]##2\stopMYgraphic
>        {\startreusableMPgraphic{#1 ##1}##2\stopreusableMPgraphic}
>     \readlocfile{#2}{}{}}

Mojca

From adityam at umich.edu  Mon Feb 19 16:51:07 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 19 Feb 2007 10:51:07 -0500 (EST)
Subject: [dev-context] \rm in pmod, bmod, etc
In-Reply-To: <45C457C1.4010300@elvenkind.com>
References: <alpine.WNT.0.82.0702021929200.2280@nqvgln>
	<alpine.WNT.0.82.0702022004030.2280@nqvgln>
	<alpine.WNT.0.82.0702022021260.2280@nqvgln>
	<45C4459A.1080002@elvenkind.com> <45C457C1.4010300@elvenkind.com>
Message-ID: <alpine.WNT.0.82.0702191047380.3900@nqvgln>

On Sat, 3 Feb 2007, Taco Hoekwater wrote:

>
>
> It is cleaner when renamed a little:
>
> Taco Hoekwater wrote:
>> 
>> \def\binrel@#1%
>  \def\preparebinrel#1%
>>    {\begingroup
>>     \setbox0=\hbox
>>        {\thinmuskip 0mu
>>         \medmuskip -1mu
>>         \thickmuskip -1mu
>>         \setbox2=\hbox{$#1\mathsurround0pt$}%
>>         \kern -wd2
>>         ${}#1{}\mathsurround0pt$}%
>>     \edef\@tempa
>>       {\endgroup
>>        \let\noexpand\binrel@@
>         \let\noexpand\currentbinrel
>>        \ifdim\wd0<0pt
>>          \mathbin
>>        \else \ifdim\wd0>\z@
>>           \mathrel
>>        \else
>>           \relax
>>        \fi\fi }%
>>     \@tempa  }
>
> And:
>
> \unexpanded\def\overset#1#2%
>   {\preparebinrel{#2}%
>    \currentbinrel{\mathop{\kern\z@#2}\limits^{#1}}}
>

There was another request (although misguided) for overset in the 
mailing list today. I think that the following macros can go into the 
core: (Taco's version, with a typo corrected).

%D \macros{overset, underset}
%D
%D The macros \type{\overset} and \type{\underset} are provided by
%D \AMS\ packages in \LATEX. These macro allows you to place a symbol
%D above or below another symbol, irrespective of whether the other
%D symbol is a relation or something else, and without influencing the
%D spacing.  For most cases there is a better way to do such things
%D (declaring a math command with limop option, or using accents), but
%D occasionally these macros can be useful, for example
%D
%D \startbuffer
%D \startformula
%D \overset{*}{X} \underset{*}{X}
%D \stopformula
%D \stopbuffer
%D \typebuffer \getbuffer
%D
%D Use these macros sparingly. Remember, \TEX\ was designed for
%D mathematics, so there is usually a proper method for typesetting
%D common math notation.

%D These macros are a clearer version of \type{\binrel@} and
%D \type{\binrel@@} macros in \AMSTEX\ packages.

\def\preparebinrel#1%
    {\begingroup
     \setbox0=\hbox
        {\thinmuskip 0mu
         \medmuskip -1mu
         \thickmuskip -1mu
         \setbox2=\hbox{$#1\mathsurround0pt$}%
         \kern-\wd2
         ${}#1{}\mathsurround0pt$}%
     \edef\@tempa
       {\endgroup
        \let\noexpand\currentbinrel
        \ifdim\wd0<0pt
          \mathbin
        \else \ifdim\wd0>\z@
           \mathrel
        \else
           \relax
        \fi\fi}%
     \@tempa}

\unexpanded\def\overset#1#2%
     {\preparebinrel{#2}%
      \currentbinrel{\mathop{\kern\z@#2}\limits^{#1}}}

\unexpanded\def\underset#1#2%
     {\preparebinrel{#2}%
      \currentbinrel{\mathop{\kern\z@#2}\limits_{#1}}}


Aditya

From pragma at wxs.nl  Tue Feb 20 11:04:20 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 20 Feb 2007 11:04:20 +0100
Subject: [dev-context] \rm in pmod, bmod, etc
In-Reply-To: <alpine.WNT.0.82.0702191047380.3900@nqvgln>
References: <alpine.WNT.0.82.0702021929200.2280@nqvgln>
	<alpine.WNT.0.82.0702022004030.2280@nqvgln>
	<alpine.WNT.0.82.0702022021260.2280@nqvgln>
	<45C4459A.1080002@elvenkind.com> <45C457C1.4010300@elvenkind.com>
	<alpine.WNT.0.82.0702191047380.3900@nqvgln>
Message-ID: <45DAC7A4.1020603@wxs.nl>

Aditya Mahajan wrote:
> On Sat, 3 Feb 2007, Taco Hoekwater wrote:
>
>   
>> It is cleaner when renamed a little:
>>
>> Taco Hoekwater wrote:
>>     
>>> \def\binrel@#1%
>>>       
>>  \def\preparebinrel#1%
>>     
>>>    {\begingroup
>>>     \setbox0=\hbox
>>>        {\thinmuskip 0mu
>>>         \medmuskip -1mu
>>>         \thickmuskip -1mu
>>>         \setbox2=\hbox{$#1\mathsurround0pt$}%
>>>         \kern -wd2
>>>         ${}#1{}\mathsurround0pt$}%
>>>     \edef\@tempa
>>>       {\endgroup
>>>        \let\noexpand\binrel@@
>>>       
>>         \let\noexpand\currentbinrel
>>     
>>>        \ifdim\wd0<0pt
>>>          \mathbin
>>>        \else \ifdim\wd0>\z@
>>>           \mathrel
>>>        \else
>>>           \relax
>>>        \fi\fi }%
>>>     \@tempa  }
>>>       
>> And:
>>
>> \unexpanded\def\overset#1#2%
>>   {\preparebinrel{#2}%
>>    \currentbinrel{\mathop{\kern\z@#2}\limits^{#1}}}
>>
>>     
>
> There was another request (although misguided) for overset in the 
> mailing list today. I think that the following macros can go into the 
> core: (Taco's version, with a typo corrected).
>
> %D \macros{overset, underset}
> %D
> %D The macros \type{\overset} and \type{\underset} are provided by
> %D \AMS\ packages in \LATEX. These macro allows you to place a symbol
> %D above or below another symbol, irrespective of whether the other
> %D symbol is a relation or something else, and without influencing the
> %D spacing.  For most cases there is a better way to do such things
> %D (declaring a math command with limop option, or using accents), but
> %D occasionally these macros can be useful, for example
> %D
> %D \startbuffer
> %D \startformula
> %D \overset{*}{X} \underset{*}{X}
> %D \stopformula
> %D \stopbuffer
> %D \typebuffer \getbuffer
> %D
> %D Use these macros sparingly. Remember, \TEX\ was designed for
> %D mathematics, so there is usually a proper method for typesetting
> %D common math notation.
>
> %D These macros are a clearer version of \type{\binrel@} and
> %D \type{\binrel@@} macros in \AMSTEX\ packages.
>
> \def\preparebinrel#1%
>     {\begingroup
>      \setbox0=\hbox
>         {\thinmuskip 0mu
>          \medmuskip -1mu
>          \thickmuskip -1mu
>          \setbox2=\hbox{$#1\mathsurround0pt$}%
>          \kern-\wd2
>          ${}#1{}\mathsurround0pt$}%
>      \edef\@tempa
>        {\endgroup
>         \let\noexpand\currentbinrel
>         \ifdim\wd0<0pt
>           \mathbin
>         \else \ifdim\wd0>\z@
>            \mathrel
>         \else
>            \relax
>         \fi\fi}%
>      \@tempa}
>   
ok, added in the following disguise:

\def\preparebinrel#1%
  {\begingroup
   \setbox\scratchbox\hbox
     {\thinmuskip   0mu
      \medmuskip   -1mu
      \thickmuskip -1mu
      \setbox\scratchbox\hbox{$#1\mathsurround\zeropoint$}%
      \kern-\wd\scratchbox
      ${}#1{}\mathsurround\zeropoint$}%
   \expanded
     {\endgroup
      \let\noexpand\currentbinrel
      \ifdim\wd\scratchbox<\zeropoint
        \mathbin
      \else\ifdim\wd\scratchbox>\zeropoint
        \mathrel
      \else
        \relax
      \fi\fi}}


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From adityam at umich.edu  Tue Feb 20 14:51:06 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Tue, 20 Feb 2007 08:51:06 -0500 (EST)
Subject: [dev-context] \rm in pmod, bmod, etc
In-Reply-To: <45DAC7A4.1020603@wxs.nl>
References: <alpine.WNT.0.82.0702021929200.2280@nqvgln>
	<alpine.WNT.0.82.0702022004030.2280@nqvgln>
	<alpine.WNT.0.82.0702022021260.2280@nqvgln>
	<45C4459A.1080002@elvenkind.com> <45C457C1.4010300@elvenkind.com>
	<alpine.WNT.0.82.0702191047380.3900@nqvgln> <45DAC7A4.1020603@wxs.nl>
Message-ID: <alpine.WNT.0.82.0702200850240.3620@nqvgln>

On Tue, 20 Feb 2007, Hans Hagen wrote:

> Aditya Mahajan wrote:
>> On Sat, 3 Feb 2007, Taco Hoekwater wrote:
>>
>> 
>>> It is cleaner when renamed a little:
>>> 
>>> Taco Hoekwater wrote:
>>> 
>>>> \def\binrel@#1%
>>>>
>>>  \def\preparebinrel#1%
>>>
>>>>    {\begingroup
>>>>     \setbox0=\hbox
>>>>        {\thinmuskip 0mu
>>>>         \medmuskip -1mu
>>>>         \thickmuskip -1mu
>>>>         \setbox2=\hbox{$#1\mathsurround0pt$}%
>>>>         \kern -wd2
>>>>         ${}#1{}\mathsurround0pt$}%
>>>>     \edef\@tempa
>>>>       {\endgroup
>>>>        \let\noexpand\binrel@@
>>>>
>>>         \let\noexpand\currentbinrel
>>>
>>>>        \ifdim\wd0<0pt
>>>>          \mathbin
>>>>        \else \ifdim\wd0>\z@
>>>>           \mathrel
>>>>        \else
>>>>           \relax
>>>>        \fi\fi }%
>>>>     \@tempa  }
>>>> 
>>> And:
>>> 
>>> \unexpanded\def\overset#1#2%
>>>   {\preparebinrel{#2}%
>>>    \currentbinrel{\mathop{\kern\z@#2}\limits^{#1}}}
>>>
>>> 
>> 
>> There was another request (although misguided) for overset in the mailing 
>> list today. I think that the following macros can go into the core: (Taco's 
>> version, with a typo corrected).
>> 
>> %D \macros{overset, underset}
>> %D
>> %D The macros \type{\overset} and \type{\underset} are provided by
>> %D \AMS\ packages in \LATEX. These macro allows you to place a symbol
>> %D above or below another symbol, irrespective of whether the other
>> %D symbol is a relation or something else, and without influencing the
>> %D spacing.  For most cases there is a better way to do such things
>> %D (declaring a math command with limop option, or using accents), but
>> %D occasionally these macros can be useful, for example
>> %D
>> %D \startbuffer
>> %D \startformula
>> %D \overset{*}{X} \underset{*}{X}
>> %D \stopformula
>> %D \stopbuffer
>> %D \typebuffer \getbuffer
>> %D
>> %D Use these macros sparingly. Remember, \TEX\ was designed for
>> %D mathematics, so there is usually a proper method for typesetting
>> %D common math notation.
>> 
>> %D These macros are a clearer version of \type{\binrel@} and
>> %D \type{\binrel@@} macros in \AMSTEX\ packages.
>> 
>> \def\preparebinrel#1%
>>     {\begingroup
>>      \setbox0=\hbox
>>         {\thinmuskip 0mu
>>          \medmuskip -1mu
>>          \thickmuskip -1mu
>>          \setbox2=\hbox{$#1\mathsurround0pt$}%
>>          \kern-\wd2
>>          ${}#1{}\mathsurround0pt$}%
>>      \edef\@tempa
>>        {\endgroup
>>         \let\noexpand\currentbinrel
>>         \ifdim\wd0<0pt
>>           \mathbin
>>         \else \ifdim\wd0>\z@
>>            \mathrel
>>         \else
>>            \relax
>>         \fi\fi}%
>>      \@tempa}
>> 
> ok, added in the following disguise:
>
> \def\preparebinrel#1%
> {\begingroup
>  \setbox\scratchbox\hbox
>    {\thinmuskip   0mu
>     \medmuskip   -1mu
>     \thickmuskip -1mu
>     \setbox\scratchbox\hbox{$#1\mathsurround\zeropoint$}%
>     \kern-\wd\scratchbox
>     ${}#1{}\mathsurround\zeropoint$}%
>  \expanded
>    {\endgroup
>     \let\noexpand\currentbinrel
>     \ifdim\wd\scratchbox<\zeropoint
>       \mathbin
>     \else\ifdim\wd\scratchbox>\zeropoint
>       \mathrel
>     \else
>       \relax
>     \fi\fi}}

Ah! So that is why \expanded is useful.

Thanks,
Aditya

From taco at elvenkind.com  Wed Feb 21 10:52:37 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 21 Feb 2007 10:52:37 +0100
Subject: [dev-context] Ancient greek (duplicate character)
Message-ID: <45DC1665.7000909@elvenkind.com>


Hi Thomas,

This comes from enco-agr.tex:

line 97
     \definecharacter greekperispomeni                   94
line 131
     \definecharacter greekperispomeni                  126

That does not make much sense. One of them is wrong and should
be renamed, I assume.

Cheers, Taco

From adityam at umich.edu  Wed Feb 21 20:05:30 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 21 Feb 2007 14:05:30 -0500 (EST)
Subject: [dev-context] [NTG-context] ConTeXt release 2007.02.20 (fwd)
Message-ID: <alpine.WNT.0.82.0702211403460.2652@nqvgln>


---------- Forwarded message ----------
From: Taco Hoekwater <taco at elvenkind.com>
To: mailing list for ConTeXt users <ntg-context at ntg.nl>
Date: Wed, 21 Feb 2007 11:56:40 +0100
Subject: [NTG-context] ConTeXt release 2007.02.20

Hi all,

I am pleased to announce that the new ConTeXt release from Hans Hagen
can be downloaded as of now from the Pragma ADE website or one of its
mirrors.

     http://www.pragma-ade.com/context/current/cont-tmf.zip
     http://context.aanhet.net/context/current/cont-tmf.zip
     http://mirror.contextgarden.net/context/current/cont-tmf.zip

The current release has version 2007.02.20

As usual, there is an html page with more detailed release notes
available on the Wiki, see:

     http://wiki.contextgarden.net/Release_Notes

This release is mostly small bugfixes.

Happy TeXing,

Taco Hoekwater


From preining at logic.at  Wed Feb 21 22:26:45 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 21 Feb 2007 22:26:45 +0100
Subject: [dev-context] [NTG-context] ConTeXt release 2007.02.20 (fwd)
In-Reply-To: <alpine.WNT.0.82.0702211403460.2652@nqvgln>
References: <alpine.WNT.0.82.0702211403460.2652@nqvgln>
Message-ID: <20070221212645.GB29664@gamma.logic.tuwien.ac.at>

Hi all!

On Mit, 21 Feb 2007, Aditya Mahajan wrote:
> I am pleased to announce that the new ConTeXt release from Hans Hagen
> can be downloaded as of now from the Pragma ADE website or one of its

Umpf, this release gives quite some problems with the lm fonts in Debian
which are at release 1.00:
...
kpathsea: Running mktextfm rm-lmr7
/usr/share/texmf/web2c/mktexnam: Could not map typeface abbreviation -l for rm-lmr7.
...

Any ideas how to fix this? I checked the diffs between the 01.23 and the
02.20 release and there are quite a lot of changes, but two I found
interesting:
--- context-2007.01.23/tex/context/base/cont-sys.ori    2006-01-31 15:38:24.000000000 +0100
+++ context-2007.02.20/tex/context/base/cont-sys.ori    2007-01-23 20:05:06.000000000 +0100
@@ -108,10 +108,11 @@
   \loadmapfile[original-ams-euler.map]
 
   \loadmapfile[original-public-lm.map]
-  \loadmapfile[texnansi-public-lm.map]
-  \loadmapfile[ec-public-lm.map]
-  \loadmapfile[qx-public-lm.map]
-  \loadmapfile[t5-public-lm.map]
+
+  %loadmapfile[texnansi-public-lm.map]
+  %loadmapfile[ec-public-lm.map]
+  %loadmapfile[qx-public-lm.map]
+  %loadmapfile[t5-public-lm.map]
   %loadmapfile[pl0-public-lm.map]
   %loadmapfile[il2-public-lm.map]
 

and
diff -urN context-2007.01.23/tex/context/base/type-buy.tex context-2007.02.20/tex/context/base/type-buy.tex
--- context-2007.01.23/tex/context/base/type-buy.tex    2006-12-06 14:09:25.000000000 +0100
+++ context-2007.02.20/tex/context/base/type-buy.tex    2007-02-06 13:34:09.000000000 +0100
@@ -309,6 +309,18 @@
 
 \stoptypescript
 
+\starttypescript [sans] [meta-medium] [name]
+
+  \definefontsynonym [Sans]           [MetaMedium-Roman]
+  \definefontsynonym [SansItalic]     [MetaMedium-Italic]
+  \definefontsynonym [SansSlanted]    [MetaMedium-Italic]
+  \definefontsynonym [SansBold]       [MetaBold-Roman]
+  \definefontsynonym [SansBoldItalic] [MetaBold-Italic]
+  \definefontsynonym [SansBoldSlanted][MetaBold-Italic]
+  \definefontsynonym [SansCaps]       [MetaMedium-Caps]
+
+\stoptypescript
+
 \starttypescript [sans] [meta-lf] [name]
 
   \definefontsynonym [Sans]           [MetaBookLF-Roman]

Any suggestions? Thanks a lot

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
HUTTOFT (n.)
The fibrous algae which grows in the dark, moist environment of
trouser turn-ups.
			--- Douglas Adams, The Meaning of Liff

From adityam at umich.edu  Thu Feb 22 00:50:04 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 21 Feb 2007 18:50:04 -0500 (EST)
Subject: [dev-context] Context garden down
Message-ID: <alpine.WNT.0.82.0702211848170.2652@nqvgln>

Hi Patrick,

Context is not working on the garden. Live gives an error

TeXExec | processing document 'texweb.tex'
TeXExec | no ctx file found
TeXExec | tex processing method: context
TeXExec | TeX run 1
TeXExec | writing option file texweb.top
TeXExec | using randomseed 1423
TeXExec | tex engine: pdftex
TeXExec | tex format: cont-en
This is pdfTeXk, Version 3.141592-1.40.1 (Web2C 7.5.6)
  %&-line parsing enabled.
  (/opt/context/current/texmf/web2c/natural.tcx)
---! /opt/context/current/texmf/web2c/cont-en.fmt was written by 
pdfetex
(Fatal format file error; I'm stymied)
TeXExec | runtime: 0.101563

Aditya

From taco at elvenkind.com  Thu Feb 22 09:08:29 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 22 Feb 2007 09:08:29 +0100
Subject: [dev-context] [NTG-context] ConTeXt release 2007.02.20 (fwd)
In-Reply-To: <20070221212645.GB29664@gamma.logic.tuwien.ac.at>
References: <alpine.WNT.0.82.0702211403460.2652@nqvgln>
	<20070221212645.GB29664@gamma.logic.tuwien.ac.at>
Message-ID: <45DD4F7D.9060303@elvenkind.com>

Norbert Preining wrote:
> Hi all!
> 
> On Mit, 21 Feb 2007, Aditya Mahajan wrote:
> 
>>I am pleased to announce that the new ConTeXt release from Hans Hagen
>>can be downloaded as of now from the Pragma ADE website or one of its
> 
> Umpf, this release gives quite some problems with the lm fonts in Debian
> which are at release 1.00:
> ...
> kpathsea: Running mktextfm rm-lmr7
> /usr/share/texmf/web2c/mktexnam: Could not map typeface abbreviation -l for rm-lmr7.

So version 1.00 supposedly had the math fonts, but it did not have
the proper fonts for math roman encoding? Sigh.

> Any ideas how to fix this? I checked the diffs between the 01.23 and the
> 02.20 release and there are quite a lot of changes, but two I found
> interesting:

Look for the change in type-enc.tex (extra font synonyms), that is the
culprit. I do not know how to 'fix' this, other than waiting for the
latin modern 1.01 deb package.

Best, Taco

From pragma at wxs.nl  Thu Feb 22 10:00:17 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 22 Feb 2007 10:00:17 +0100
Subject: [dev-context] tex live and context
Message-ID: <45DD5BA1.90406@wxs.nl>

Hi,

If you update your tex to the latest tex live cq. debian, also get the 
latest latin modern

http://www.gust.org.pl/projects/e-foundry/latin-modern/download

(you don't need the context related zip there; i need that for older 
setups)

TeX Live ships with incomplete map files.

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From pragma at wxs.nl  Thu Feb 22 09:50:33 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 22 Feb 2007 09:50:33 +0100
Subject: [dev-context] [NTG-context] ConTeXt release 2007.02.20 (fwd)
In-Reply-To: <20070221212645.GB29664@gamma.logic.tuwien.ac.at>
References: <alpine.WNT.0.82.0702211403460.2652@nqvgln>
	<20070221212645.GB29664@gamma.logic.tuwien.ac.at>
Message-ID: <45DD5959.8010700@wxs.nl>

Norbert Preining wrote:
> Hi all!
>
> On Mit, 21 Feb 2007, Aditya Mahajan wrote:
>   
>> I am pleased to announce that the new ConTeXt release from Hans Hagen
>> can be downloaded as of now from the Pragma ADE website or one of its
>>     
>
> Umpf, this release gives quite some problems with the lm fonts in Debian
> which are at release 1.00:
> ....
>   
as taco mentioned there is a lm-rm mess up ... i just updated my main tree to texlive and also ran into problems; the tl map files are smaller  (less entries) i wonder where that mess came from 

when lm was first distributed the map file names had a different structure and that was changed because of tetex; after a transition period i decided to adapt context (could handle both for a while) also because on tl the old ones (part of context distribution) were kicked out; so in the end i've bitten myself in the tail again ... lesson learned: never adapt to fundamental tl changes again 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From preining at logic.at  Thu Feb 22 23:21:04 2007
From: preining at logic.at (Norbert Preining)
Date: Thu, 22 Feb 2007 23:21:04 +0100
Subject: [dev-context] [NTG-context] ConTeXt release 2007.02.20 (fwd)
In-Reply-To: <45DD5959.8010700@wxs.nl> <45DD4F7D.9060303@elvenkind.com>
References: <alpine.WNT.0.82.0702211403460.2652@nqvgln>
	<20070221212645.GB29664@gamma.logic.tuwien.ac.at>
	<45DD5959.8010700@wxs.nl>
	<alpine.WNT.0.82.0702211403460.2652@nqvgln>
	<20070221212645.GB29664@gamma.logic.tuwien.ac.at>
	<45DD4F7D.9060303@elvenkind.com>
Message-ID: <20070222222104.GH29816@gamma.logic.tuwien.ac.at>

Hi Taco, hi Hans, hi all!

On Don, 22 Feb 2007, Taco Hoekwater wrote:
> So version 1.00 supposedly had the math fonts, but it did not have
> the proper fonts for math roman encoding? Sigh.

Hmm, this seems to be the problem (from the lmodern changelog):
* math text metric files (rm-*.tfm) provided

> Look for the change in type-enc.tex (extra font synonyms), that is the
> culprit. I do not know how to 'fix' this, other than waiting for the
> latin modern 1.01 deb package.

I removed these lines, rebuild the format, but still get the same
errors.

Does one of you have any other suggestions/ideas how to work around
this? I am not sure that we can get lm 1.01 into Debian soon, not before
Debian etch is released, and this ....

On Don, 22 Feb 2007, Hans Hagen wrote:
> as taco mentioned there is a lm-rm mess up ... i just updated my main tree 
> to texlive and also ran into problems; the tl map files are smaller  (less 
> entries) i wonder where that mess came from 

I thought that Taco submitted these map files? At least I didn't change
anything on the ConTeXt files in the svn texlive repository.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
CURRY MALLET (n.)
A large wooden or rubber cub which poachers use to despatch cats or
other game which they can only sell to Indian resturants. For
particulary small cats the price obtainable is not worth the cost of
expending ammunition.
			--- Douglas Adams, The Meaning of Liff

From adityam at umich.edu  Fri Feb 23 02:07:45 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Thu, 22 Feb 2007 20:07:45 -0500 (EST)
Subject: [dev-context] Math subformula numbering
Message-ID: <alpine.WNT.0.82.0702221957080.2252@nqvgln>

Hi Hans, Taco and Mojca,

There is a bit of inconsistency between the two subformula numbering 
methods (\startsubformulas that I wrote, and \NR[+][a] of 
\startalign). While writing a paper I realized that both of them are 
needed. For example

\startsubformulas[eq:encoder] \placeformula
   \startformula \startalign
     \NC Z_1 \EQ c_1 (X_1), \NR[eq:encoder 1]
   \intertext{and for $t=2,\dots,T$,}
     \NC Z_t \EQ c_t (X_1, \dots, X_t, \tilde Y_1, \dots, \tilde Y_{t-1}).
         \NR[eq:encoder t]
   \stopalign \stopformula
\stopsubformulas

and

\placeformula
\startformula \startalign
   \NC \hat X_t \EQ g_1(Y_1) \NR[eq:decoder][a]
   \NC M_1      \EQ l_1(Y_1) \NR[eq:memory][a]
   \intertext{and for $t=2,\dots,T$,}
\decrementnumber[formula] \decrementnumber[formula]
   \NC \hat X_t \EQ g_t(Y_t, M_{t-1}) \NR[+][b]
   \NC M_t      \EQ l_t(Y_t, M_{t-1}) \NR[+][b]
\stopalign \stopformula


However, the startsubformulas uses \@@fnseparator as separator while 
\NR[+][a] uses no separator. It is relatively straight forward to make 
\NR honor the separator, in \dododoformulanumber change

\edef\hetnumber{#2} to \edef\hetnumber{\@@fnseparator#2}

and

\edef\hetnumber{#4} to \edef\hetnumber{\@@fnseparator#4}

To maintain backward compatibility we can change

\setupsubformulas[separator=\@@fmseparator]

to

\setupsubformulas[separator=]


Any comments? I think that Mojca and I are the only people who use 
\startsubformulas right now (my fault, have not documented them), so 
breaking the backward compatibility of \startsubformulas should not be 
too big a problem.

Aditya

From pragma at wxs.nl  Fri Feb 23 10:01:22 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 23 Feb 2007 10:01:22 +0100
Subject: [dev-context] [NTG-context] ConTeXt release 2007.02.20 (fwd)
In-Reply-To: <20070222222104.GH29816@gamma.logic.tuwien.ac.at>
References: <alpine.WNT.0.82.0702211403460.2652@nqvgln>
	<20070221212645.GB29664@gamma.logic.tuwien.ac.at>
	<45DD5959.8010700@wxs.nl>
	<alpine.WNT.0.82.0702211403460.2652@nqvgln>
	<20070221212645.GB29664@gamma.logic.tuwien.ac.at>
	<45DD4F7D.9060303@elvenkind.com>
	<20070222222104.GH29816@gamma.logic.tuwien.ac.at>
Message-ID: <45DEAD62.5070707@wxs.nl>

Norbert Preining wrote:
> Hi Taco, hi Hans, hi all!
>
> On Don, 22 Feb 2007, Taco Hoekwater wrote:
>   
>> So version 1.00 supposedly had the math fonts, but it did not have
>> the proper fonts for math roman encoding? Sigh.
>>     
>
> Hmm, this seems to be the problem (from the lmodern changelog):
> * math text metric files (rm-*.tfm) provided
>
>   
>> Look for the change in type-enc.tex (extra font synonyms), that is the
>> culprit. I do not know how to 'fix' this, other than waiting for the
>> latin modern 1.01 deb package.
>>     
>
> I removed these lines, rebuild the format, but still get the same
> errors.
>
> Does one of you have any other suggestions/ideas how to work around
> this? I am not sure that we can get lm 1.01 into Debian soon, not before
> Debian etch is released, and this ....
>   
one option is to add the 1.01 lm map files to the context package; they 
are more complete
>
> I thought that Taco submitted these map files? At least I didn't change
> anything on the ConTeXt files in the svn texlive repository.
>   
my tex live tree not being completely updated seems to be related to an rsync time out problem at the tug server side; karl looked into it but there is no way to make rsync behave more robust; lm 1.01 is in the latest tex live

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From taco at elvenkind.com  Fri Feb 23 10:10:21 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 23 Feb 2007 10:10:21 +0100
Subject: [dev-context] [NTG-context] ConTeXt release 2007.02.20 (fwd)
In-Reply-To: <45DEAD62.5070707@wxs.nl>
References: <alpine.WNT.0.82.0702211403460.2652@nqvgln>
	<20070221212645.GB29664@gamma.logic.tuwien.ac.at>
	<45DD5959.8010700@wxs.nl>
	<alpine.WNT.0.82.0702211403460.2652@nqvgln>
	<20070221212645.GB29664@gamma.logic.tuwien.ac.at>
	<45DD4F7D.9060303@elvenkind.com>
	<20070222222104.GH29816@gamma.logic.tuwien.ac.at>
	<45DEAD62.5070707@wxs.nl>
Message-ID: <45DEAF7D.70403@elvenkind.com>



Hans Hagen wrote:
>>
>> Does one of you have any other suggestions/ideas how to work around
>> this? I am not sure that we can get lm 1.01 into Debian soon, not before
>> Debian etch is released, and this ....
>>   
> one option is to add the 1.01 lm map files to the context package; they 
> are more complete

I doubt this would help, since it seems the actual rm-*.tfm files were
a new addition in 1.01

Best, Taco

From mojca.miklavec.lists at gmail.com  Fri Feb 23 10:56:32 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 23 Feb 2007 10:56:32 +0100
Subject: [dev-context] Math subformula numbering
In-Reply-To: <alpine.WNT.0.82.0702221957080.2252@nqvgln>
References: <alpine.WNT.0.82.0702221957080.2252@nqvgln>
Message-ID: <6faad9f00702230156j54332092y8ffe49ecafa9512e@mail.gmail.com>

On 2/23/07, Aditya Mahajan wrote:
> Hi Hans, Taco and Mojca,
>
> There is a bit of inconsistency between the two subformula numbering
> methods (\startsubformulas that I wrote, and \NR[+][a] of
> \startalign). While writing a paper I realized that both of them are
> needed. For example
>
> \startsubformulas[eq:encoder] \placeformula
>    \startformula \startalign
>      \NC Z_1 \EQ c_1 (X_1), \NR[eq:encoder 1]
>    \intertext{and for $t=2,\dots,T$,}
>      \NC Z_t \EQ c_t (X_1, \dots, X_t, \tilde Y_1, \dots, \tilde Y_{t-1}).
>          \NR[eq:encoder t]
>    \stopalign \stopformula
> \stopsubformulas
>
> and
>
> \placeformula
> \startformula \startalign
>    \NC \hat X_t \EQ g_1(Y_1) \NR[eq:decoder][a]
>    \NC M_1      \EQ l_1(Y_1) \NR[eq:memory][a]
>    \intertext{and for $t=2,\dots,T$,}
> \decrementnumber[formula] \decrementnumber[formula]
>    \NC \hat X_t \EQ g_t(Y_t, M_{t-1}) \NR[+][b]
>    \NC M_t      \EQ l_t(Y_t, M_{t-1}) \NR[+][b]
> \stopalign \stopformula
>
>
> However, the startsubformulas uses \@@fnseparator as separator while
> \NR[+][a] uses no separator. It is relatively straight forward to make
> \NR honor the separator, in \dododoformulanumber change
>
> \edef\hetnumber{#2} to \edef\hetnumber{\@@fnseparator#2}
>
> and
>
> \edef\hetnumber{#4} to \edef\hetnumber{\@@fnseparator#4}
>
> To maintain backward compatibility we can change
>
> \setupsubformulas[separator=\@@fmseparator]
>
> to
>
> \setupsubformulas[separator=]
>
>
> Any comments? I think that Mojca and I are the only people who use
> \startsubformulas right now (my fault, have not documented them), so
> breaking the backward compatibility of \startsubformulas should not be
> too big a problem.

I really don't care about that dot in my own documents. I also think
that the feature is fresh enough that it can still be changed. If you
ask me: do it in the most consistent possible way.

Mojca

From pragma at wxs.nl  Fri Feb 23 23:06:14 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 23 Feb 2007 23:06:14 +0100
Subject: [dev-context] Math subformula numbering
In-Reply-To: <alpine.WNT.0.82.0702221957080.2252@nqvgln>
References: <alpine.WNT.0.82.0702221957080.2252@nqvgln>
Message-ID: <45DF6556.3040609@wxs.nl>

Aditya Mahajan wrote:
> Any comments? I think that Mojca and I are the only people who use 
> \startsubformulas right now (my fault, have not documented them), so 
> breaking the backward compatibility of \startsubformulas should not be 
> too big a problem.
>   
As long as it's consistent ... I'm really sensitive for consistency -) 

Just send me the patches needed. 

(which reminds me of other pending patches but i assume that i get to know things once they're ready) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From adityam at umich.edu  Fri Feb 23 23:12:28 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 23 Feb 2007 17:12:28 -0500 (EST)
Subject: [dev-context] Math subformula numbering
In-Reply-To: <45DF6556.3040609@wxs.nl>
References: <alpine.WNT.0.82.0702221957080.2252@nqvgln>
	<45DF6556.3040609@wxs.nl>
Message-ID: <alpine.WNT.0.82.0702231708090.2600@nqvgln>

On Fri, 23 Feb 2007, Hans Hagen wrote:

> Aditya Mahajan wrote:
>> Any comments? I think that Mojca and I are the only people who use 
>> \startsubformulas right now (my fault, have not documented them), so 
>> breaking the backward compatibility of \startsubformulas should not be too 
>> big a problem.
>> 
> As long as it's consistent ... I'm really sensitive for consistency -) 
> Just send me the patches needed.

I will do that once I get home.

> (which reminds me of other pending patches but i assume that i get to know 
> things once they're ready)

The theorem part needs more work. I have something that works, but it 
needs more testing. I did not get any feedback on theorems, so I think 
that I really need to write a myway to show what can and cannot be 
done :-)

Aditya

From mojca.miklavec.lists at gmail.com  Sat Feb 24 00:07:03 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 24 Feb 2007 00:07:03 +0100
Subject: [dev-context] Math subformula numbering
In-Reply-To: <45DF6556.3040609@wxs.nl>
References: <alpine.WNT.0.82.0702221957080.2252@nqvgln>
	<45DF6556.3040609@wxs.nl>
Message-ID: <6faad9f00702231507i4efbbed9v8e75e503d3be272b@mail.gmail.com>

On 2/23/07, Hans Hagen wrote:

> (which reminds me of other pending patches but i assume that i get to know things once they're ready)

If you also have the Norwegian one in mind: you said that one should
patch ctxtools, but I don't know how you want to do it.

Karl has sent two new files to CTAN:
    http://www.ctan.org/tex-archive/language/hyphenation/nohyph/

These two:
    http://www.ctan.org/tex-archive/language/hyphenation/nohyph/nnhyph.tex
    http://www.ctan.org/tex-archive/language/hyphenation/nohyph/nbhyph.tex
should be "adapted" to
    lang-nn.hyp/pat
    lang-nb.hyp/pat
but you have to decide whether to simply include four "hardcoded"
files or to adapt ctxtools to parse these two files and replace
"\input nohyphbx" with the appropriate name (if it's worth that). If
things get changed or reorganized, you'll most probably have to adapt
your scripts again anyway.

They had some other feature requests, but I guess that neither of us
knows how to solve them anyway, so I doubt that anyone could do much
more than what has already been sent to you (language-dependent
symbols, language-dependent itemizations without a dot; warnings).

Mojca

From adityam at umich.edu  Sun Feb 25 00:16:38 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Sat, 24 Feb 2007 18:16:38 -0500 (EST)
Subject: [dev-context] lvert rvert etc in math
Message-ID: <alpine.WNT.0.82.0702241804420.3572@nqvgln>

Hi Hans and Taco,

amsmath.sty defines \lvert and \rvert which provide correct spacing 
when \vert is used as a left or a right delimiter (code at the end of 
email). I do not completely understand what amsmath is trying to do. 
Wouldn't

\definemathsymbol [lvert] [open]  [sy] ["6A] [ex] ["0C]
\definemathsymbol [rvert] [close] [sy] ["6A] [ex] ["0C]

this achieve the same goal?

AMS code:

% \subsection{Vertical bar symbols}
%    Add left/right specific versions of \cn{vert}, \cn{Vert}. Don't
%    assume the delimiter codes are the CM defaults.
%    \begin{macrocode}
\def\@tempa#1#2\@nil{%
   \ifx\delimiter#1\@tempcnta#2\relax\else\@tempcnta\z@\fi
}
\@xp\@tempa\vert\@empty\@nil
\ifnum\@tempcnta>\z@
   \advance\@tempcnta "4000000
   \xdef\lvert{\delimiter\number\@tempcnta\space }
   \advance\@tempcnta "1000000
   \xdef\rvert{\delimiter\number\@tempcnta\space }
\else
   \ifx\@@undefined\lvert
     % Fall back to cmex encoding since we don't know what else to do.
     \DeclareMathDelimiter{\lvert}
       {\mathopen}{symbols}{"6A}{largesymbols}{"0C}
     \DeclareMathDelimiter{\rvert}
       {\mathclose}{symbols}{"6A}{largesymbols}{"0C}
   \fi
\fi
\@xp\@tempa\Vert\@empty\@nil
\ifnum\@tempcnta>\z@
   \advance\@tempcnta "4000000
   \xdef\lVert{\delimiter\number\@tempcnta\space }
   \advance\@tempcnta "1000000
   \xdef\rVert{\delimiter\number\@tempcnta\space }
\else
   \ifx\@@undefined\lVert
     \DeclareMathDelimiter{\lVert}
       {\mathopen}{symbols}{"6B}{largesymbols}{"0D}
     \DeclareMathDelimiter{\rVert}
       {\mathclose}{symbols}{"6B}{largesymbols}{"0D}
   \fi
\fi

Aditya

From taco at elvenkind.com  Sun Feb 25 14:41:42 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 25 Feb 2007 14:41:42 +0100
Subject: [dev-context] lvert rvert etc in math
In-Reply-To: <alpine.WNT.0.82.0702241804420.3572@nqvgln>
References: <alpine.WNT.0.82.0702241804420.3572@nqvgln>
Message-ID: <45E19216.9010009@elvenkind.com>

Aditya Mahajan wrote:
> Hi Hans and Taco,
> 
> amsmath.sty defines \lvert and \rvert which provide correct spacing 
> when \vert is used as a left or a right delimiter (code at the end of 
> email). I do not completely understand what amsmath is trying to do. 
> Wouldn't
> 
> \definemathsymbol [lvert] [open]  [sy] ["6A] [ex] ["0C]
> \definemathsymbol [rvert] [close] [sy] ["6A] [ex] ["0C]
> 
> this achieve the same goal?

Yes. The AMS code does not quite know when it will be run
and it has to cope with other math encodings as well, that
is why it is that much more complicated.

Best, Taco

From pragma at wxs.nl  Sun Feb 25 19:19:47 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 25 Feb 2007 19:19:47 +0100
Subject: [dev-context] Math subformula numbering
In-Reply-To: <6faad9f00702231507i4efbbed9v8e75e503d3be272b@mail.gmail.com>
References: <alpine.WNT.0.82.0702221957080.2252@nqvgln>
	<45DF6556.3040609@wxs.nl>
	<6faad9f00702231507i4efbbed9v8e75e503d3be272b@mail.gmail.com>
Message-ID: <45E1D343.8010000@wxs.nl>

Mojca Miklavec wrote:
> On 2/23/07, Hans Hagen wrote:
>
>   
>> (which reminds me of other pending patches but i assume that i get to know things once they're ready)
>>     
>
> If you also have the Norwegian one in mind: you said that one should
> patch ctxtools, but I don't know how you want to do it.
>
> Karl has sent two new files to CTAN:
>     http://www.ctan.org/tex-archive/language/hyphenation/nohyph/
>
> These two:
>     http://www.ctan.org/tex-archive/language/hyphenation/nohyph/nnhyph.tex
>     http://www.ctan.org/tex-archive/language/hyphenation/nohyph/nbhyph.tex
> should be "adapted" to
>     lang-nn.hyp/pat
>     lang-nb.hyp/pat
> but you have to decide whether to simply include four "hardcoded"
> files or to adapt ctxtools to parse these two files and replace
> "\input nohyphbx" with the appropriate name (if it's worth that). If
> things get changed or reorganized, you'll most probably have to adapt
> your scripts again anyway.
>   
hm, i think that we can best forget about the exceptions and just load 
the patterns directly (no parsing)

if needed we can add lang-nn.exc or so to the context distributions, or 
to a language specific section in lang-* files
> They had some other feature requests, but I guess that neither of us
> knows how to solve them anyway, so I doubt that anyone could do much
> more than what has already been sent to you (language-dependent
> symbols, language-dependent itemizations without a dot; warnings).
>   

someone has to wrap that up into nn and nb definitions with no as 
default language

Hans

-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From preining at logic.at  Sun Feb 25 19:59:08 2007
From: preining at logic.at (Norbert Preining)
Date: Sun, 25 Feb 2007 19:59:08 +0100
Subject: [dev-context] Debian ConTeXt packages 2007.02.20
Message-ID: <20070225185908.GA32418@gamma.logic.tuwien.ac.at>

Hi all!

Ok, it took a bit of time, but there is now also a Debian packages for
ConTeXt release 2007.02.20.
        deb http://www.tug.org/texlive/Debian/ context/
        deb-src http://www.tug.org/texlive/Debian/ context/
BUT!!! You need the new lmodern 1.01 Debian package for this:
        deb http://www.tug.org/texlive/Debian/ lmodern/
        deb-src http://www.tug.org/texlive/Debian/ lmodern/

I will upload both of these packages soon to Debian EXPERIMENTAL (!!!).
Since Florent (main responsible for the lmodern package) and I agreed
that we don't want to push lmodern 1.01 into etch (and there it is not
necessary since there is no independent context package), the upload will
go to experimental. As long as you have the above apt-get source
nothing will change for you, but for people only using Debian/unstable
source there will be no update.

If you have any questions please let me know!

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
DIDCOT (n.)
The tiny oddly-shaped bit of card which a ticket inspector cuts out of
a ticket with his clipper for no apparent reason. It is a little-known
fact that the confetti at Princess Margaret's wedding was made up of
thousands of didcots collected by inspectors on the Royal
Train. DIDLING (participial vb.)
The process of trying to work out who did it when reading a whodunnit,
and trying to keep your options open so that when you find out you can
allow yourself to think that you knew perfectly well who it was all
along.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Tue Feb 27 10:30:05 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 27 Feb 2007 10:30:05 +0100
Subject: [dev-context] Debian ConTeXt packages 2007.02.21
Message-ID: <20070227093005.GA20754@gamma.logic.tuwien.ac.at>

ConTeXt release 2007.02.21 is there ...

On Son, 25 Feb 2007, Norbert Preining wrote:
>         deb http://www.tug.org/texlive/Debian/ context/
>         deb-src http://www.tug.org/texlive/Debian/ context/
> BUT!!! You need the new lmodern 1.01 Debian package for this:
>         deb http://www.tug.org/texlive/Debian/ lmodern/
>         deb-src http://www.tug.org/texlive/Debian/ lmodern/
> 
> I will upload both of these packages soon to Debian EXPERIMENTAL (!!!).
> Since Florent (main responsible for the lmodern package) and I agreed
> that we don't want to push lmodern 1.01 into etch (and there it is not
> necessary since there is no independent context package), the upload will
> go to experimental. As long as you have the above apt-get source
> nothing will change for you, but for people only using Debian/unstable
> source there will be no update.
> 
> If you have any questions please let me know!

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
DOBWALLS (pl.n.)
The now hard-boiled bits of nastiness which have to be prised off
crockery by hand after it has been through a dishwasher.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Wed Feb 28 09:16:30 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 28 Feb 2007 09:16:30 +0100
Subject: [dev-context] [NTG-context] \frak (Fractur) in math mode
In-Reply-To: <alpine.WNT.0.82.0702272149520.184@nqvgln>
References: <alpine.WNT.0.82.0702272149520.184@nqvgln>
Message-ID: <45E53A5E.9010300@elvenkind.com>

Hi Aditya,

Aditya Mahajan wrote:
> Hi Hans and Taco,
> 
> Something seems to be broken with \frak. \frak does not work in math 
> mode and works in text mode! For example
> 
> $\frak ABC$
> 
> {\frak ABC}
> 
> A workaround is to use \fraktur, which works fine in math mode, but it 
> will be nice to remove this bug.

It has been like that almost since day one, so I am not at all sure
Hans would consider it a bug, just different from LaTeX (plain).

Cheers, Taco




From adityam at umich.edu  Wed Feb 28 16:33:26 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 28 Feb 2007 10:33:26 -0500 (EST)
Subject: [dev-context] [NTG-context] \frak (Fractur) in math mode
In-Reply-To: <45E53A5E.9010300@elvenkind.com>
References: <alpine.WNT.0.82.0702272149520.184@nqvgln>
	<45E53A5E.9010300@elvenkind.com>
Message-ID: <alpine.WNT.0.82.0702281031530.4080@nqvgln>

On Wed, 28 Feb 2007, Taco Hoekwater wrote:

> Hi Aditya,
>
> Aditya Mahajan wrote:
>> Hi Hans and Taco,
>>
>> Something seems to be broken with \frak. \frak does not work in math
>> mode and works in text mode! For example
>>
>> $\frak ABC$
>>
>> {\frak ABC}
>>
>> A workaround is to use \fraktur, which works fine in math mode, but it
>> will be nice to remove this bug.
>
> It has been like that almost since day one, so I am not at all sure
> Hans would consider it a bug, just different from LaTeX (plain).

Ok. I will document it somewhere then. But looking at the code, I can 
not figure out why \frak is different from \cal. The definitions look 
identical to me.

Aditya

From taco at elvenkind.com  Wed Feb 28 16:58:53 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 28 Feb 2007 16:58:53 +0100
Subject: [dev-context] [NTG-context] \frak (Fractur) in math mode
In-Reply-To: <alpine.WNT.0.82.0702281031530.4080@nqvgln>
References: <alpine.WNT.0.82.0702272149520.184@nqvgln>
	<45E53A5E.9010300@elvenkind.com>
	<alpine.WNT.0.82.0702281031530.4080@nqvgln>
Message-ID: <45E5A6BD.5020700@elvenkind.com>


Aditya Mahajan wrote:
> 
> Ok. I will document it somewhere then. But looking at the code, I can 
> not figure out why \frak is different from \cal. The definitions look 
> identical to me.

The difference is that

   \definefamilysynonym [default] [calligraphic] [sy]

works, whereas

   \definefamilysynonym [default] [fraktur]      [mr]

doesn't.

At least, that is my guess :-{

Best,
Taco

From mojca.miklavec.lists at gmail.com  Thu Mar  1 03:03:31 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 1 Mar 2007 03:03:31 +0100
Subject: [dev-context] XeTeX and fontconfig in the minimals?
Message-ID: <6faad9f00702281803m5412f318n51eed59315cca930@mail.gmail.com>

Hello Hans,

I really rarely work on windows recently, but it would be great if the
windows minimals would support xetex & fontconfig properly. Currently
XeTeX fails to work since some libraries are missing (icuuc34.dll is
reported, but others are missing as well).

These was true some time ago:
    http://wiki.contextgarden.net/Windows_Installation#XeTeX_Installation

Most things still hold, the only thing is that binaries could now be
taken from TeXLive.

This is a list of missing files in bin:

fc-{cache,case,cat,glyphname,lang,list,match}.exe
icudt34.dll
icule34.dll
icuuc34.dll
TECkit_x86.dll

I don't know what these are, but they might be needed as well (no idea):
nkf.exe
ole32.dll
oleaut32.dll
rpcrt4.dll

I don't have the TeXLive here, but if you take a look into
    ftp://akagi.ms.u-tokyo.ac.jp/pub/TeX/win32/xetex-w32.tar.bz2
the following is also *really* needed:
- texmf/fonts/ {everything except opentype}
(-doc/xetex/XeTeX-reference and xetex-guide might be useful, but not needed)

"Setting up fontconfig" still holds as written on the wiki. Would it
be possible to add these files and fontconfig settings? I would really
like to remove that portion of instructions from the wiki.

Thanks a lot,
    Mojca

From taco at elvenkind.com  Thu Mar  1 09:40:07 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 01 Mar 2007 09:40:07 +0100
Subject: [dev-context] [NTG-context] Strange lucida bright math issue
In-Reply-To: <45E29909.1070306@wxs.nl>
References: <8570be060702251638h63a3c7f2v8c31bfba0dbcdc15@mail.gmail.com>
	<45E29909.1070306@wxs.nl>
Message-ID: <45E69167.6040908@elvenkind.com>

Hi Hans,

Hans Hagen wrote:
> Helin Gai wrote:
>> Hi all,
>>
>> After upgrading to TeXLive 2007, I'm experiencing a strange issue with
>> Lucida Bright. It seems that none of the math font is working. The
>> system keeps reporting "TFM file can't be found" even though it's
>> there. The normal text (nonmath) -- roman/sans serif, etc., is
>> working. What can I do now?
>>
>>   
> when yandy was dissolved tug took over distribution and they decided not 
> to ship the original tfm metrics but only latex related files; because 
> the 'new' metrics are different from the original ones, i don't support 
> them (if only because i've been using lucida quite extensively and i 
> don't want to break anything);
> 
> there is a cont-fnt.zip on the website that shoul dhave them 
> 
> i guess that if enough complaints reach tug they may reconsider adding the original tfm files (only a handful) 

It seems there is no lucida/mathtime support on texlive at all,
only some spurious metrics from an extension attempt to psnfss,
but not the 'official' font package support, not even for LaTeX.

Meanwhile, I checked out cont-fnt.zip, but it does not have the
lbm* files either, only text font metrics are included.

Cheers, Taco



From pragma at wxs.nl  Thu Mar  1 15:00:30 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 01 Mar 2007 15:00:30 +0100
Subject: [dev-context] XeTeX and fontconfig in the minimals?
In-Reply-To: <6faad9f00702281803m5412f318n51eed59315cca930@mail.gmail.com>
References: <6faad9f00702281803m5412f318n51eed59315cca930@mail.gmail.com>
Message-ID: <45E6DC7E.8090805@wxs.nl>

Mojca Miklavec wrote:
> Hello Hans,
>
> I really rarely work on windows recently, but it would be great if the
> windows minimals would support xetex & fontconfig properly. Currently
> XeTeX fails to work since some libraries are missing (icuuc34.dll is
> reported, but others are missing as well).
>
> These was true some time ago:
>     http://wiki.contextgarden.net/Windows_Installation#XeTeX_Installation
>
> Most things still hold, the only thing is that binaries could now be
> taken from TeXLive.
>
> This is a list of missing files in bin:
>
> fc-{cache,case,cat,glyphname,lang,list,match}.exe
> icudt34.dll
> icule34.dll
> icuuc34.dll
> TECkit_x86.dll
>
> I don't know what these are, but they might be needed as well (no idea):
> nkf.exe
> ole32.dll
> oleaut32.dll
> rpcrt4.dll
>   
hm, what a mess, why isn't there a statically linked xetex ...

i don't want the minimals to grow beyond reason so i need the real 
minimal list of needed dll's
> I don't have the TeXLive here, but if you take a look into
>     ftp://akagi.ms.u-tokyo.ac.jp/pub/TeX/win32/xetex-w32.tar.bz2
> the following is also *really* needed:
> - texmf/fonts/ {everything except opentype}
>   
why? what;s in there then that context needs?
> (-doc/xetex/XeTeX-reference and xetex-guide might be useful, but not needed)
>
> "Setting up fontconfig" still holds as written on the wiki. Would it
> be possible to add these files and fontconfig settings? I would really
> like to remove that portion of instructions from the wiki.
>   
hm, i don't want to add docu for every tex thing ... else it's no longer minimal 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From contexttest-featurerequests at foundry.supelec.fr  Fri Mar  2 21:10:10 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Fri, 2 Mar 2007 15:10:10 -0500
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B76?=
	=?utf-8?q?=5D_floats_and_indenting?=
Message-ID: <200703022010.l22KAAOg023696@semantic.metz.supelec.fr>

Feature Requests item #76, was opened at 2007-03-02 15:10
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=76&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Aditya Mahajan (adityam)
Assigned to: Nobody (None)
Summary: floats and indenting 
Version: None
Category: Typesetting


Initial Comment:
Hi,

The paragraph after \placefloat[top] is always indented, and one after \placefloat[bottom] is never indented. This can sometimes be frustating. For example, a top float right after a section

\setupindenting[big,yes]
\section{test}
\placefloat[top]{}{}
\input knuth

or a bottom float between two paragraphs

\setupindenting[big,yes]
\input tufte

\placefloat[bottom]{}{}

\input tufte

The reason for different behaviour of top and bottom is the differce in their definition in page-flt

\def\sometopfloat          [#1]{\someelsefloat[#1]\nonoindentation}
\def\somebottomfloat       [#1]{\someelsefloat[#1]}


I understand that it is difficult to make sure that all cases are handled correctly (automatically). So, I propose a manual solution. Make \placefloat honor indentnext. Then one can do

\setupfloat [figure] [indentnext=auto]

and then

\setupindenting[big,yes]

\section{test}
\placefloat[top]{}{}%<-- No blank line
\input knuth

and

\setupindenting[big,yes]
\input tufte

\placefloat[bottom]{}{}%<--blank line.

\input tufte

I am attaching a patch that takes care of this. It can be a stop gap solution for the time being.

Aditya

----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=76&group_id=21


From contexttest-featurerequests at foundry.supelec.fr  Fri Mar  2 21:12:01 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Fri, 2 Mar 2007 15:12:01 -0500
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B76?=
	=?utf-8?q?=5D_floats_and_indenting?=
Message-ID: <200703022012.l22KC1jb024100@semantic.metz.supelec.fr>

Feature Requests item #76, was opened at 2007-03-02 15:10
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=76&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Aditya Mahajan (adityam)
Assigned to: Nobody (None)
Summary: floats and indenting 
Version: None
Category: Typesetting


Initial Comment:
Hi,

The paragraph after \placefloat[top] is always indented, and one after \placefloat[bottom] is never indented. This can sometimes be frustating. For example, a top float right after a section

\setupindenting[big,yes]
\section{test}
\placefloat[top]{}{}
\input knuth

or a bottom float between two paragraphs

\setupindenting[big,yes]
\input tufte

\placefloat[bottom]{}{}

\input tufte

The reason for different behaviour of top and bottom is the differce in their definition in page-flt

\def\sometopfloat          [#1]{\someelsefloat[#1]\nonoindentation}
\def\somebottomfloat       [#1]{\someelsefloat[#1]}


I understand that it is difficult to make sure that all cases are handled correctly (automatically). So, I propose a manual solution. Make \placefloat honor indentnext. Then one can do

\setupfloat [figure] [indentnext=auto]

and then

\setupindenting[big,yes]

\section{test}
\placefloat[top]{}{}%<-- No blank line
\input knuth

and

\setupindenting[big,yes]
\input tufte

\placefloat[bottom]{}{}%<--blank line.

\input tufte

I am attaching a patch that takes care of this. It can be a stop gap solution for the time being.

Aditya

----------------------------------------------------------------------

>Comment By: Aditya Mahajan (adityam)
Date: 2007-03-02 15:12

Message:
Forgot to check the box to upload the file

----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=76&group_id=21


From adityam at umich.edu  Fri Mar  2 21:14:13 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 2 Mar 2007 15:14:13 -0500 (EST)
Subject: [dev-context] [contexttest-Feature Requests][76] floats and
 indenting
In-Reply-To: <200703022012.l22KC1jb024100@semantic.metz.supelec.fr>
References: <200703022012.l22KC1jb024100@semantic.metz.supelec.fr>
Message-ID: <alpine.WNT.0.82.0703021513150.1372@nqvgln>

>
>> Comment By: Aditya Mahajan (adityam)
> Date: 2007-03-02 15:12
>
> Message:
> Forgot to check the box to upload the file
>

The file is not posted to the mailing list :-( I am attaching it now.

Aditya
-------------- next part --------------
\unprotect
% Line:256 of page-flt
\def\dodocomplexplacefloat[#1][#2][#3]#4%
  {\flushnotes
   \flushsidefloats % here !
   \ifsomefloatwaiting
     % this was \checkwaitingfloats spread all over
     \doifinsetelse\v!always{#2}
       {\showmessage\m!floatblocks5\empty}
       {\expanded{\doifcommonelse{#2}{\flushfloatslist}}\doflushfloats\donothing}%
     % but which should be done before using box \floatbox
   \fi
   \ifmargeblokken
     \doifinset\v!margin{#2}\endgraf
   \fi
   \global\insidefloattrue
   \begingroup % **
   \ifmargeblokken
     \doifinset\v!margin{#2}{\hsize\@@mbwidth}%
   \fi
   \the\everyinsidefloat
   \let\@@extrafloat\empty
   \presetmorefloatvariables{#2}%
   \dowithnextboxcontent % better a \the\everyfloattoks
     {\setlocalfloathsize
      \floatparameter\c!inner
      \fuzzysnappingfalse
      \postponenotes} % new
     {\doifsomething{\floatparameter\c!criterium}
        {\ifdim\wd\nextbox>\floatparameter\c!criterium\relax
           \edef\forcedfloatmethod{\executeifdefined{\??fl\currentfloat\c!fallback}\v!here}%
         \fi}%
       \xdocompletefloat{#1}{#3}{#1}{#2}{#1}{#4}% ** not yet done
       % we need to carry over the par because of side floats
      \doifnotinset\v!text{#2}{\carryoverpar\endgroup}%
      \global\sidefloatdownshift \zeropoint
      \global\sidefloatextrashift\zeropoint
      \ifparfloat
        \doifinset\v!reset{#2}\forgetsidefloats
        \doinhibitblank
      \fi% better move this to side floats
     %AM:Added
     \nonoindentation
     \dochecknextindentation{\??fl\currentfloat}%
     \dorechecknextindentation}
     \vbox}

% Line:2599 of page-flt
\def\sometopfloat [#1]{\someelsefloat[#1]}
\protect

% Test: Try with and without the patch

\setupindenting[big,yes]

\setupfloat [figure] [indentnext=auto]

\starttext

\section {Test}
\placefigure[top]{top}{}
\input knuth

\input tufte

\placefigure[bottom]{top}{}

\input tufte

\stoptext

From adityam at umich.edu  Fri Mar  2 21:14:13 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 2 Mar 2007 15:14:13 -0500 (EST)
Subject: [dev-context] [contexttest-Feature Requests][76] floats and
 indenting
In-Reply-To: <200703022012.l22KC1jb024100@semantic.metz.supelec.fr>
References: <200703022012.l22KC1jb024100@semantic.metz.supelec.fr>
Message-ID: <alpine.WNT.0.82.0703021513150.1372@nqvgln>

>
>> Comment By: Aditya Mahajan (adityam)
> Date: 2007-03-02 15:12
>
> Message:
> Forgot to check the box to upload the file
>

The file is not posted to the mailing list :-( I am attaching it now.

Aditya
-------------- next part --------------
\unprotect
% Line:256 of page-flt
\def\dodocomplexplacefloat[#1][#2][#3]#4%
  {\flushnotes
   \flushsidefloats % here !
   \ifsomefloatwaiting
     % this was \checkwaitingfloats spread all over
     \doifinsetelse\v!always{#2}
       {\showmessage\m!floatblocks5\empty}
       {\expanded{\doifcommonelse{#2}{\flushfloatslist}}\doflushfloats\donothing}%
     % but which should be done before using box \floatbox
   \fi
   \ifmargeblokken
     \doifinset\v!margin{#2}\endgraf
   \fi
   \global\insidefloattrue
   \begingroup % **
   \ifmargeblokken
     \doifinset\v!margin{#2}{\hsize\@@mbwidth}%
   \fi
   \the\everyinsidefloat
   \let\@@extrafloat\empty
   \presetmorefloatvariables{#2}%
   \dowithnextboxcontent % better a \the\everyfloattoks
     {\setlocalfloathsize
      \floatparameter\c!inner
      \fuzzysnappingfalse
      \postponenotes} % new
     {\doifsomething{\floatparameter\c!criterium}
        {\ifdim\wd\nextbox>\floatparameter\c!criterium\relax
           \edef\forcedfloatmethod{\executeifdefined{\??fl\currentfloat\c!fallback}\v!here}%
         \fi}%
       \xdocompletefloat{#1}{#3}{#1}{#2}{#1}{#4}% ** not yet done
       % we need to carry over the par because of side floats
      \doifnotinset\v!text{#2}{\carryoverpar\endgroup}%
      \global\sidefloatdownshift \zeropoint
      \global\sidefloatextrashift\zeropoint
      \ifparfloat
        \doifinset\v!reset{#2}\forgetsidefloats
        \doinhibitblank
      \fi% better move this to side floats
     %AM:Added
     \nonoindentation
     \dochecknextindentation{\??fl\currentfloat}%
     \dorechecknextindentation}
     \vbox}

% Line:2599 of page-flt
\def\sometopfloat [#1]{\someelsefloat[#1]}
\protect

% Test: Try with and without the patch

\setupindenting[big,yes]

\setupfloat [figure] [indentnext=auto]

\starttext

\section {Test}
\placefigure[top]{top}{}
\input knuth

\input tufte

\placefigure[bottom]{top}{}

\input tufte

\stoptext

From contexttest-featurerequests at foundry.supelec.fr  Fri Mar  2 22:53:53 2007
From: contexttest-featurerequests at foundry.supelec.fr (contexttest-featurerequests at foundry.supelec.fr)
Date: Fri, 2 Mar 2007 22:53:53 +0100
Subject: [dev-context] =?utf-8?q?=5Bcontexttest-Feature_Requests=5D=5B76?=
	=?utf-8?q?=5D_floats_and_indenting?=
Message-ID: <200703022153.l22LrrEW000818@semantic.metz.supelec.fr>

Feature Requests item #76, was opened at 2007-03-02 21:10
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=76&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Aditya Mahajan (adityam)
Assigned to: Nobody (None)
Summary: floats and indenting 
Version: None
Category: Typesetting


Initial Comment:
Hi,

The paragraph after \placefloat[top] is always indented, and one after \placefloat[bottom] is never indented. This can sometimes be frustating. For example, a top float right after a section

\setupindenting[big,yes]
\section{test}
\placefloat[top]{}{}
\input knuth

or a bottom float between two paragraphs

\setupindenting[big,yes]
\input tufte

\placefloat[bottom]{}{}

\input tufte

The reason for different behaviour of top and bottom is the differce in their definition in page-flt

\def\sometopfloat          [#1]{\someelsefloat[#1]\nonoindentation}
\def\somebottomfloat       [#1]{\someelsefloat[#1]}


I understand that it is difficult to make sure that all cases are handled correctly (automatically). So, I propose a manual solution. Make \placefloat honor indentnext. Then one can do

\setupfloat [figure] [indentnext=auto]

and then

\setupindenting[big,yes]

\section{test}
\placefloat[top]{}{}%<-- No blank line
\input knuth

and

\setupindenting[big,yes]
\input tufte

\placefloat[bottom]{}{}%<--blank line.

\input tufte

I am attaching a patch that takes care of this. It can be a stop gap solution for the time being.

Aditya

----------------------------------------------------------------------

Comment By: Nobody (None)
Date: 2007-03-02 22:53

Message:

Thank you. I am very much in favor.
I've been chasing this indentation stuff for ages. 
Hans, pretty please?



----------------------------------------------------------------------

Comment By: Aditya Mahajan (adityam)
Date: 2007-03-02 21:12

Message:
Forgot to check the box to upload the file

----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=164&aid=76&group_id=21


From pragma at wxs.nl  Tue Mar  6 09:21:51 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 06 Mar 2007 09:21:51 +0100
Subject: [dev-context] [contexttest-Feature Requests][76] floats and
	indenting
In-Reply-To: <alpine.WNT.0.82.0703021513150.1372@nqvgln>
References: <200703022012.l22KC1jb024100@semantic.metz.supelec.fr>
	<alpine.WNT.0.82.0703021513150.1372@nqvgln>
Message-ID: <45ED249F.60707@wxs.nl>

Aditya Mahajan wrote:
>>
>>> Comment By: Aditya Mahajan (adityam)
>> Date: 2007-03-02 15:12
>>
>> Message:
>> Forgot to check the box to upload the file
>>
>
> The file is not posted to the mailing list :-( I am attaching it now.
this is tricky, did you try 

\placefigure[left]{}{} \input tufte 

(so the code needs to be inside the preceding ifparfloat) 

with this patch? and how do 'here' floats that get moved perform? 

Hans 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From ishamid at colostate.edu  Wed Mar  7 20:43:26 2007
From: ishamid at colostate.edu (Idris Samawi Hamid)
Date: Wed, 07 Mar 2007 12:43:26 -0700
Subject: [dev-context] Streams
Message-ID: <op.tot3qojonx1yh1@walayah-main>

Hi,

Does anyone have one or more samples using the m-stream module? If so, I'd  
greatly appreciate it if you'ld share it/them with me!

(trying to model some issues related to parallel texts...)

Best
Idris

-- 
Professor Idris Samawi Hamid
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

--
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From ishamid at colostate.edu  Wed Mar  7 21:06:06 2007
From: ishamid at colostate.edu (Idris Samawi Hamid)
Date: Wed, 07 Mar 2007 13:06:06 -0700
Subject: [dev-context] Streams
In-Reply-To: <op.tot3qojonx1yh1@walayah-main>
References: <op.tot3qojonx1yh1@walayah-main>
Message-ID: <op.tot4sg1snx1yh1@walayah-main>

On Wed, 07 Mar 2007 12:43:26 -0700, Idris Samawi Hamid  
<ishamid at colostate.edu> wrote:

> Does anyone have one or more samples using the m-stream module? If so,  
> I'd
> greatly appreciate it if you'ld share it/them with me!

> (trying to model some issues related to parallel texts...)

That is, in addition to the examples in the m-streams source :-)

best
Idris

-- 
Professor Idris Samawi Hamid
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

--
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From adityam at umich.edu  Thu Mar  8 16:18:57 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Thu, 8 Mar 2007 10:18:57 -0500 (EST)
Subject: [dev-context] texshow down
Message-ID: <alpine.WNT.0.83.0703081017540.2500@nqvgln>

Hi Patrick,

texshow.contextgarden.net is not working working properly. I get

Sorry, an error occured

Probably some internal error.

Please contact Patrick if the problem persist.

Thanks,
Aditya

From mojca.miklavec.lists at gmail.com  Fri Mar  9 18:16:23 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 9 Mar 2007 18:16:23 +0100
Subject: [dev-context] minor problem with utf-8 inside \startintertext
Message-ID: <6faad9f00703090916i44234c65i34771d8c73bd10c9@mail.gmail.com>

Hello,

I have something for (most probably) Hans/Taco/Aditya to resolve:

\enableregime[utf-8]
\starttext
\startformula\startalign
	\NC a \NC = b \NR
\startintertext
?e ?etrta mo?nost
%
For those with problems with encoding, \ccaron should be enough to
reproduce the bug.
\stopintertext
	\NC c \NC = d \NR
\stopalign\stopformula
\stoptext

I remember seing similar problems inside \cases some time ago.

Thanks,
Mojca

From adityam at umich.edu  Fri Mar  9 18:31:28 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 9 Mar 2007 12:31:28 -0500 (EST)
Subject: [dev-context] minor problem with utf-8 inside \startintertext
In-Reply-To: <6faad9f00703090916i44234c65i34771d8c73bd10c9@mail.gmail.com>
References: <6faad9f00703090916i44234c65i34771d8c73bd10c9@mail.gmail.com>
Message-ID: <alpine.WNT.0.83.0703091228540.3340@nqvgln>

On Fri, 9 Mar 2007, Mojca Miklavec wrote:

> Hello,
>
> I have something for (most probably) Hans/Taco/Aditya to resolve:
>
> \enableregime[utf-8]
> \starttext
> \startformula\startalign
> 	\NC a \NC = b \NR
> \startintertext
> ?e ?etrta mo?nost
> %
> For those with problems with encoding, \ccaron should be enough to
> reproduce the bug.
> \stopintertext
> 	\NC c \NC = d \NR
> \stopalign\stopformula
> \stoptext

Hmm... strange. Basically, this boils down to

  \enableregime[utf-8]
  \starttext
  \startformula\startalign
         \NC a \NC = b \NR
   \noalign{\vbox{\noindent \normal %Try with and without normal
     ?e ?etrta mo?nost \par}}
   \NC c \NC = d \NR
  \stopalign\stopformula
  \stoptext

So, for the time being add \normal inside \startintertext. I do not 
understand the cause, so I do not know if normal should be part of the 
definition of \dointertext, or if there is a bigger problem.

Aditya


From adityam at umich.edu  Fri Mar  9 18:56:15 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 9 Mar 2007 12:56:15 -0500 (EST)
Subject: [dev-context] minor problem with utf-8 inside \startintertext
In-Reply-To: <alpine.WNT.0.83.0703091228540.3340@nqvgln>
References: <6faad9f00703090916i44234c65i34771d8c73bd10c9@mail.gmail.com>
	<alpine.WNT.0.83.0703091228540.3340@nqvgln>
Message-ID: <alpine.WNT.0.83.0703091237450.3340@nqvgln>

On Fri, 9 Mar 2007, Aditya Mahajan wrote:

> On Fri, 9 Mar 2007, Mojca Miklavec wrote:
>
>> Hello,
>>
>> I have something for (most probably) Hans/Taco/Aditya to resolve:
>>
>> \enableregime[utf-8]
>> \starttext
>> \startformula\startalign
>> 	\NC a \NC = b \NR
>> \startintertext
>> ?e ?etrta mo?nost
>> %
>> For those with problems with encoding, \ccaron should be enough to
>> reproduce the bug.
>> \stopintertext
>> 	\NC c \NC = d \NR
>> \stopalign\stopformula
>> \stoptext
>
> Hmm... strange. Basically, this boils down to
>
>  \enableregime[utf-8]
>  \starttext
>  \startformula\startalign
>         \NC a \NC = b \NR
>   \noalign{\vbox{\noindent \normal %Try with and without normal
>     ?e ?etrta mo?nost \par}}
>   \NC c \NC = d \NR
>  \stopalign\stopformula
>  \stoptext
>
> So, for the time being add \normal inside \startintertext. I do not
> understand the cause, so I do not know if normal should be part of the
> definition of \dointertext, or if there is a bigger problem.
>

I noticed that in TeXBook, Knuth does not use \vbox for intertext 
(example on page 193). I changed the definition of \dointertext and 
removed the vbox, and everything works fine.

\unexpanded\def\dointertext#1%
   {\penalty\postdisplaypenalty
    \afterdisplayspace
    {\forgetall\noindent#1\par}%
    \penalty\predisplaypenalty
    \beforedisplayspace}

This works correctly. THe present definition is a sanitized version of 
\intertext defined in amsmath, so the question is why do they use 
\vbox in the definition of \inertext, and is it really needed? That is 
beyond my understanding of TeX.

Aditya

From patrick at gundla.ch  Sat Mar 10 10:51:28 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sat, 10 Mar 2007 10:51:28 +0100
Subject: [dev-context] texshow down
In-Reply-To: <alpine.WNT.0.83.0703081017540.2500@nqvgln> (Aditya Mahajan's
	message of "Thu, 8 Mar 2007 10:18:57 -0500 (EST)")
References: <alpine.WNT.0.83.0703081017540.2500@nqvgln>
Message-ID: <m1fy8dwhnj.fsf@levana.de>

Hello Aditya,

> texshow.contextgarden.net is not working working properly. I get

I think I've found the bug... Warnings of changes in Rails' api were
printed on stdout that confused the server :-(. It's so fragile.

Also thanks to Mikael P. for the reporting!

Sorry for the inconvenience. I promise I try to make server more
robust.

Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net

From pragma at wxs.nl  Sun Mar 11 23:33:38 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 11 Mar 2007 23:33:38 +0100
Subject: [dev-context] minor problem with utf-8 inside \startintertext
In-Reply-To: <alpine.WNT.0.83.0703091237450.3340@nqvgln>
References: <6faad9f00703090916i44234c65i34771d8c73bd10c9@mail.gmail.com>
	<alpine.WNT.0.83.0703091228540.3340@nqvgln>
	<alpine.WNT.0.83.0703091237450.3340@nqvgln>
Message-ID: <45F483C2.3050106@wxs.nl>

Aditya Mahajan wrote:
> On Fri, 9 Mar 2007, Aditya Mahajan wrote:
>
>   
>> On Fri, 9 Mar 2007, Mojca Miklavec wrote:
>>
>>     
>>> Hello,
>>>
>>> I have something for (most probably) Hans/Taco/Aditya to resolve:
>>>
>>> \enableregime[utf-8]
>>> \starttext
>>> \startformula\startalign
>>> 	\NC a \NC = b \NR
>>> \startintertext
>>> ?e ?etrta mo?nost
>>> %
>>> For those with problems with encoding, \ccaron should be enough to
>>> reproduce the bug.
>>> \stopintertext
>>> 	\NC c \NC = d \NR
>>> \stopalign\stopformula
>>> \stoptext
>>>       
>> Hmm... strange. Basically, this boils down to
>>
>>  \enableregime[utf-8]
>>  \starttext
>>  \startformula\startalign
>>         \NC a \NC = b \NR
>>   \noalign{\vbox{\noindent \normal %Try with and without normal
>>     ?e ?etrta mo?nost \par}}
>>   \NC c \NC = d \NR
>>  \stopalign\stopformula
>>  \stoptext
>>
>> So, for the time being add \normal inside \startintertext. I do not
>> understand the cause, so I do not know if normal should be part of the
>> definition of \dointertext, or if there is a bigger problem.
>>
>>     
>
> I noticed that in TeXBook, Knuth does not use \vbox for intertext 
> (example on page 193). I changed the definition of \dointertext and 
> removed the vbox, and everything works fine.
>
> \unexpanded\def\dointertext#1%
>    {\penalty\postdisplaypenalty
>     \afterdisplayspace
>     {\forgetall\noindent#1\par}%
>     \penalty\predisplaypenalty
>     \beforedisplayspace}
>
> This works correctly. THe present definition is a sanitized version of 
> \intertext defined in amsmath, so the question is why do they use 
> \vbox in the definition of \inertext, and is it really needed? That is 
> beyond my understanding of TeX.
>   
has to do with still being in math roman and therefore in teh wrong encoding  

in cont-new.tex ....

\def\dealwithmathtextencoding
 {\expanded{\everyhbox{\the\everyhbox\noexpand\fastenableencoding{\currentencoding}}}%
   \def\dealwithmathtextencoding{\let\characterencoding\nocharacterencoding}%
   \dealwithmathtextencoding}

\appendtoks
  \dealwithmathtextencoding
\to \everymathematics

much of this mess will go away in luatex btw  

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From mojca.miklavec.lists at gmail.com  Tue Mar 13 00:45:06 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 13 Mar 2007 00:45:06 +0100
Subject: [dev-context] minor problem with utf-8 inside \startintertext
In-Reply-To: <45F483C2.3050106@wxs.nl>
References: <6faad9f00703090916i44234c65i34771d8c73bd10c9@mail.gmail.com>
	<alpine.WNT.0.83.0703091228540.3340@nqvgln>
	<alpine.WNT.0.83.0703091237450.3340@nqvgln> <45F483C2.3050106@wxs.nl>
Message-ID: <6faad9f00703121645y3a8468fag73a2b139cab47548@mail.gmail.com>

On 3/11/07, Hans Hagen wrote:
> Aditya Mahajan wrote:
> > On Fri, 9 Mar 2007, Aditya Mahajan wrote:
> >> On Fri, 9 Mar 2007, Mojca Miklavec wrote:
> >>
> >>> Hello,
> >>>
> >>> I have something for (most probably) Hans/Taco/Aditya to resolve:
> >>>
> >>> \enableregime[utf-8]
> >>> \starttext
> >>> \startformula\startalign
> >>>     \NC a \NC = b \NR
> >>> \startintertext
> >>> ?e ?etrta mo?nost
> >>> %
> >>> For those with problems with encoding, \ccaron should be enough to
> >>> reproduce the bug.
> >>> \stopintertext
> >>>     \NC c \NC = d \NR
> >>> \stopalign\stopformula
> >>> \stoptext
> >
> > \unexpanded\def\dointertext#1%
> >    {\penalty\postdisplaypenalty
> >     \afterdisplayspace
> >     {\forgetall\noindent#1\par}%
> >     \penalty\predisplaypenalty
> >     \beforedisplayspace}
>
> in cont-new.tex ....
>
> \def\dealwithmathtextencoding
>  {\expanded{\everyhbox{\the\everyhbox\noexpand\fastenableencoding{\currentencoding}}}%
>    \def\dealwithmathtextencoding{\let\characterencoding\nocharacterencoding}%
>    \dealwithmathtextencoding}
>
> \appendtoks
>   \dealwithmathtextencoding
> \to \everymathematics

Thanks a lot for your answers, but neither approach seems to work here.

Mojca

From adityam at umich.edu  Tue Mar 13 00:58:37 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 12 Mar 2007 18:58:37 -0500 (EST)
Subject: [dev-context] minor problem with utf-8 inside \startintertext
In-Reply-To: <6faad9f00703121645y3a8468fag73a2b139cab47548@mail.gmail.com>
References: <6faad9f00703090916i44234c65i34771d8c73bd10c9@mail.gmail.com>
	<alpine.WNT.0.83.0703091228540.3340@nqvgln>
	<alpine.WNT.0.83.0703091237450.3340@nqvgln>
	<45F483C2.3050106@wxs.nl>
	<6faad9f00703121645y3a8468fag73a2b139cab47548@mail.gmail.com>
Message-ID: <alpine.WNT.0.83.0703121856460.3488@nqvgln>

On Tue, 13 Mar 2007, Mojca Miklavec wrote:

> On 3/11/07, Hans Hagen wrote:
>> Aditya Mahajan wrote:
>>> On Fri, 9 Mar 2007, Aditya Mahajan wrote:
>>>> On Fri, 9 Mar 2007, Mojca Miklavec wrote:
>>>>
>>>>> Hello,
>>>>>
>>>>> I have something for (most probably) Hans/Taco/Aditya to resolve:
>>>>>
>>>>> \enableregime[utf-8]
>>>>> \starttext
>>>>> \startformula\startalign
>>>>>     \NC a \NC = b \NR
>>>>> \startintertext
>>>>> ?e ?etrta mo?nost
>>>>> %
>>>>> For those with problems with encoding, \ccaron should be enough to
>>>>> reproduce the bug.
>>>>> \stopintertext
>>>>>     \NC c \NC = d \NR
>>>>> \stopalign\stopformula
>>>>> \stoptext
>>>
>>> \unexpanded\def\dointertext#1%
>>>    {\penalty\postdisplaypenalty
>>>     \afterdisplayspace
>>>     {\forgetall\noindent#1\par}%
>>>     \penalty\predisplaypenalty
>>>     \beforedisplayspace}
>>
>> in cont-new.tex ....
>>
>> \def\dealwithmathtextencoding
>>  {\expanded{\everyhbox{\the\everyhbox\noexpand\fastenableencoding{\currentencoding}}}%
>>    \def\dealwithmathtextencoding{\let\characterencoding\nocharacterencoding}%
>>    \dealwithmathtextencoding}
>>
>> \appendtoks
>>   \dealwithmathtextencoding
>> \to \everymathematics
>
> Thanks a lot for your answers, but neither approach seems to work here.

Hans, the above code does not work for me also. If I replace, 
everyhbox with everyvbox, the output is correct, but I have no clue 
what is happening here.

Aditya

From pragma at wxs.nl  Tue Mar 13 01:03:08 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 13 Mar 2007 01:03:08 +0100
Subject: [dev-context] minor problem with utf-8 inside \startintertext
In-Reply-To: <6faad9f00703121645y3a8468fag73a2b139cab47548@mail.gmail.com>
References: <6faad9f00703090916i44234c65i34771d8c73bd10c9@mail.gmail.com>
	<alpine.WNT.0.83.0703091228540.3340@nqvgln>
	<alpine.WNT.0.83.0703091237450.3340@nqvgln>
	<45F483C2.3050106@wxs.nl>
	<6faad9f00703121645y3a8468fag73a2b139cab47548@mail.gmail.com>
Message-ID: <45F5EA3C.7070707@wxs.nl>

Mojca Miklavec wrote:
> On 3/11/07, Hans Hagen wrote:
>   
>> Aditya Mahajan wrote:
>>     
>>> On Fri, 9 Mar 2007, Aditya Mahajan wrote:
>>>       
>>>> On Fri, 9 Mar 2007, Mojca Miklavec wrote:
>>>>
>>>>         
>>>>> Hello,
>>>>>
>>>>> I have something for (most probably) Hans/Taco/Aditya to resolve:
>>>>>
>>>>> \enableregime[utf-8]
>>>>> \starttext
>>>>> \startformula\startalign
>>>>>     \NC a \NC = b \NR
>>>>> \startintertext
>>>>> ?e ?etrta mo?nost
>>>>> %
>>>>> For those with problems with encoding, \ccaron should be enough to
>>>>> reproduce the bug.
>>>>> \stopintertext
>>>>>     \NC c \NC = d \NR
>>>>> \stopalign\stopformula
>>>>> \stoptext
>>>>>           
>>> \unexpanded\def\dointertext#1%
>>>    {\penalty\postdisplaypenalty
>>>     \afterdisplayspace
>>>     {\forgetall\noindent#1\par}%
>>>     \penalty\predisplaypenalty
>>>     \beforedisplayspace}
>>>       
>> in cont-new.tex ....
>>
>> \def\dealwithmathtextencoding
>>  {\expanded{\everyhbox{\the\everyhbox\noexpand\fastenableencoding{\currentencoding}}}%
>>    \def\dealwithmathtextencoding{\let\characterencoding\nocharacterencoding}%
>>    \dealwithmathtextencoding}
>>
>> \appendtoks
>>   \dealwithmathtextencoding
>> \to \everymathematics
>>     
>
> Thanks a lot for your answers, but neither approach seems to work here.
>
>   
of course not, i just copied what is already in cont-new -) 

the \everyhbox makes sure that you get your scaron an da vbox is no hbox 

i'm not sure if 

\def\dealwithmathtextencoding
 {\expanded{\everyhbox
    {\the\everyhbox\noexpand\fastenableencoding{\currentencoding}}}%
  \expanded{\everyvbox
    {\the\everyhbox\noexpand\fastenableencoding{\currentencoding}}}%
  \def\dealwithmathtextencoding
    {\let\characterencoding\nocharacterencoding}%
  \dealwithmathtextencoding}

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From mojca.miklavec.lists at gmail.com  Tue Mar 13 03:13:17 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 13 Mar 2007 03:13:17 +0100
Subject: [dev-context] New Google Coustom Search
Message-ID: <6faad9f00703121913j147bdcd2mcb66cba15966fe8d@mail.gmail.com>

Hello,

A tiny addition on the garden: I have changed the google search window
on the wiki a bit, so that it now uses "Google Custom Search".

Feedback/suggestions wellcome (I need to refine the ntg/tug/ctan
searches a bit). Also, if anyone would like to contribute to it
(modify it, improve it, add and/or refine searches), just drop me an
email and you'll get an invitation.

Mojca

PS for Patrick: articles are down

From adityam at umich.edu  Sun Mar 18 17:38:38 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Sun, 18 Mar 2007 11:38:38 -0500 (EST)
Subject: [dev-context] lvert rvert etc in math
In-Reply-To: <45E19216.9010009@elvenkind.com>
References: <alpine.WNT.0.82.0702241804420.3572@nqvgln>
	<45E19216.9010009@elvenkind.com>
Message-ID: <alpine.WNT.0.83.0703181132480.3352@nqvgln>

On Sun, 25 Feb 2007, Taco Hoekwater wrote:

> Aditya Mahajan wrote:
>> Hi Hans and Taco,
>> 
>> amsmath.sty defines \lvert and \rvert which provide correct spacing when 
>> \vert is used as a left or a right delimiter (code at the end of email). I 
>> do not completely understand what amsmath is trying to do. Wouldn't
>> 
>> \definemathsymbol [lvert] [open]  [sy] ["6A] [ex] ["0C]
>> \definemathsymbol [rvert] [close] [sy] ["6A] [ex] ["0C]
>> 
>> this achieve the same goal?
>
> Yes. The AMS code does not quite know when it will be run
> and it has to cope with other math encodings as well, that
> is why it is that much more complicated.

Hans,

Can the following be added to math-tex

\definemathsymbol [lvert] [open]  [sy] ["6A] [ex] ["0C]
\definemathsymbol [rvert] [close] [sy] ["6A] [ex] ["0C]

\definemathsymbol [lVert] [open]  [sy] ["6B] [ex] ["0D]
\definemathsymbol [rVert] [close] [sy] ["6B] [ex] ["0D]

Aditya

From pragma at wxs.nl  Mon Mar 19 10:43:08 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 19 Mar 2007 10:43:08 +0100
Subject: [dev-context] lvert rvert etc in math
In-Reply-To: <alpine.WNT.0.83.0703181132480.3352@nqvgln>
References: <alpine.WNT.0.82.0702241804420.3572@nqvgln>
	<45E19216.9010009@elvenkind.com>
	<alpine.WNT.0.83.0703181132480.3352@nqvgln>
Message-ID: <45FE5B2C.2060503@wxs.nl>

Aditya Mahajan wrote:
> On Sun, 25 Feb 2007, Taco Hoekwater wrote:
>
>   
>> Aditya Mahajan wrote:
>>     
>>> Hi Hans and Taco,
>>>
>>> amsmath.sty defines \lvert and \rvert which provide correct spacing when 
>>> \vert is used as a left or a right delimiter (code at the end of email). I 
>>> do not completely understand what amsmath is trying to do. Wouldn't
>>>
>>> \definemathsymbol [lvert] [open]  [sy] ["6A] [ex] ["0C]
>>> \definemathsymbol [rvert] [close] [sy] ["6A] [ex] ["0C]
>>>
>>> this achieve the same goal?
>>>       
>> Yes. The AMS code does not quite know when it will be run
>> and it has to cope with other math encodings as well, that
>> is why it is that much more complicated.
>>     
>
> Hans,
>
> Can the following be added to math-tex
>
> \definemathsymbol [lvert] [open]  [sy] ["6A] [ex] ["0C]
> \definemathsymbol [rvert] [close] [sy] ["6A] [ex] ["0C]
>
> \definemathsymbol [lVert] [open]  [sy] ["6B] [ex] ["0D]
> \definemathsymbol [rVert] [close] [sy] ["6B] [ex] ["0D]
>
>   
ok


-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From preining at logic.at  Thu Mar 22 03:22:15 2007
From: preining at logic.at (Norbert Preining)
Date: Thu, 22 Mar 2007 03:22:15 +0100
Subject: [dev-context] Debian ConTeXt packages 2007.03.19,
	Debian TeX Live 2007
In-Reply-To: <20070227093005.GA20754@gamma.logic.tuwien.ac.at>
References: <20070227093005.GA20754@gamma.logic.tuwien.ac.at>
Message-ID: <20070322022215.GA13007@gamma.logic.tuwien.ac.at>

Hi all!

I am currently uploading a whole new bunch of stuff to tug.org and
Debian/experimental:

For ConTeXt 2007.03.19-1 you have to go as usual to
        deb http://www.tug.org/texlive/Debian/ context/
        deb-src http://www.tug.org/texlive/Debian/ context/
but this new release depends on TeX Live 2007 for Debian, which can be
found here (and after some time (NEW processing) in
Debian/experimental):
        deb http://www.tug.org/texlive/Debian/ tl2007/
        deb-src http://www.tug.org/texlive/Debian/ tl2007/
there you also find tex-common 1.3 which is necessary for TeX Live 2007
packages. Finally you also need lmodern 1.01 which is available from
        deb http://www.tug.org/texlive/Debian/ lmodern/
        deb-src http://www.tug.org/texlive/Debian/ lmodern/
All these packages are uploaded to experimental, but some packages have
to go through the new queue, as they contain new binary packages
(texlive-xetex, -humanities, -science).

Please give it a twist, please report anything strange. 

Thanks for testing!


Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
CORRIEMUCHLOCH (n.)
Word describing the kind of person who can make a complete mess of a
simple job like walking down a corridor.
			--- Douglas Adams, The Meaning of Liff

From sanjoy at mrao.cam.ac.uk  Tue Mar 27 14:55:10 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Tue, 27 Mar 2007 13:55:10 +0100
Subject: [dev-context] [tex-live] Debian TeX -- new packages
In-Reply-To: Your message of "Thu, 22 Mar 2007 11:00:59 +0100."
	<20070322100059.GC6845@gamma.logic.tuwien.ac.at> 
Message-ID: <E1HWBCg-0005fi-00@skye.ra.phy.cam.ac.uk>

> We ask people using Debian to try these packages out, they survived
> all my tests and quite a lot of documents I tried out, but YMMV.

[What I describe below is not a Debian problem, but the proposed
change would make the packages easier for Ubuntu users to use.  

I added dev-context to the CC: list since the pkg deps affect Ubuntu
users -- e.g. me -- who use your excellent ConTeXt packages.]

I'm using Ubuntu 6.10 (edgy) with all your tug.org stanzas.  An
"apt-get install texlive-base-bin" or "apt-get install context" fails
when going from the TL2005 packages to the 2007 ones.  The blocking
package is texlive-base-bin:

# apt-get install texlive-base-bin
texlive-base-bin:
Depends: libpng12-0 (>= 1.2.13-4) but 1.2.8rel-5.1ubuntu0.1 is to be installed
Depends: libpoppler0c2 (>= 0.4.2) but it is not installable
E: Broken packages

I'll upgrade to the Ubuntu 7.04 beta, which will solve the libpng12-0
problem because Ubuntu 7.04 uses libpng 1.2.15.  But libpoppler0c2
would still be missing.  Here are the libpoppler pkgs in versions of
Ubuntu:

5.04 (hoary)  | libpoppler0-0.1.2
5.10 (breezy) | libpoppler0c2-0.4.2
6.04 (dapper) | libpoppler1-0.5.1
6.10 (edgy)   | libpoppler1-0.5.4
7.04 (feisty) | libpoppler1-0.5.4

So, could you add libpoppler1 as an alternative libpoppler dependency?
That should fix the installation.  libpoppler1 is also in Debian (in
experimental) so it should be a useful Debian change eventually.

Then I can update to texlive 2007 and to the latest ConTeXt via
apt-get.  If that works, I'll update the ConTeXt wiki's installation
instructions to say that Ubuntu users will have to upgrade to 7.04 to
use your latest packages.

Although, if it's possible to depend on an older libpng (on
libpng12-0-1.2.8), then more Ubuntu users could upgrade.

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From plink at veribox.net  Tue Mar 27 18:52:55 2007
From: plink at veribox.net (plink)
Date: Tue, 27 Mar 2007 18:52:55 +0200
Subject: [dev-context] metapost format problem in Debian ConTeXt 2007.03.19,
	TeX Live 2007
In-Reply-To: <20070322022215.GA13007@gamma.logic.tuwien.ac.at>
References: <20070227093005.GA20754@gamma.logic.tuwien.ac.at>
	<20070322022215.GA13007@gamma.logic.tuwien.ac.at>
Message-ID: <46094BE7.9010206@veribox.net>

Hi Norbert et al,

I encountered a strange problem with metapost since my recent updates. I 
am using the apt-sources given in your post below and can't seem to make 
metapost happy, leaving it always complaining about wrong formats:

...
This is MetaPost, Version 0.993 (Web2C 7.5.6)
(/usr/share/texmf/web2c/natural.tcx)
(Fatal mem file error; I'm stymied)
...

I tried to purge and reinstall the whole enchilada from scratch, but to 
no avail. Afterwards I didn't do any special configurations, just

# apt-get update
# apt-get install context
# apt-get install texlive-font-utils texlive-fonts-{recommended,extra}

which gave me the following texlive packages:
||/ Name                          Version 
+++-=============================-==========
ii  texlive-base                      2007-1 
   ii  texlive-base-bin                  2007-1 
      ii  texlive-common                    2007-1 
         ii  texlive-doc-base                  2007-1 
            ii  texlive-font-utils                2007-1 
               ii  texlive-fonts-extra               2007-1 
                  ii  texlive-fonts-recommended         2007-1 
                     ii  texlive-metapost                  2007-1 


and in /var/lib/texmf/web2c/metapost there are freshly generated
metafun.mem and mpost.mem, no other mem-files on the system.

A texexec --check results in
...
TeXExec | TeXExec | version 6.2.0 - 1997-2006 - PRAGMA ADE/POD
TeXExec | TeXUtil   | version 9.1.0 - 1997-2005 - PRAGMA ADE/POD
TeXExec | CtxTools | version 1.3.3 - 2004/2006 - PRAGMA ADE/POD
TeXExec |
TeXExec | testing interface en
TeXExec | pdfTeX Version 3.141592-1.40.3 (Web2C 7.5.6)
TeXExec | ConTeXt ver: 2007.03.19 11:20 MKII fmt: 2007.3.27 int: 
english/english

Any hints hartelijk welcome.

Jak.


Norbert Preining wrote:
> Hi all!
> 
> I am currently uploading a whole new bunch of stuff to tug.org and
> Debian/experimental:
> 
> For ConTeXt 2007.03.19-1 you have to go as usual to
>         deb http://www.tug.org/texlive/Debian/ context/
>         deb-src http://www.tug.org/texlive/Debian/ context/
> but this new release depends on TeX Live 2007 for Debian, which can be
> found here (and after some time (NEW processing) in
> Debian/experimental):
>         deb http://www.tug.org/texlive/Debian/ tl2007/
>         deb-src http://www.tug.org/texlive/Debian/ tl2007/
> there you also find tex-common 1.3 which is necessary for TeX Live 2007
> packages. Finally you also need lmodern 1.01 which is available from
>         deb http://www.tug.org/texlive/Debian/ lmodern/
>         deb-src http://www.tug.org/texlive/Debian/ lmodern/
> All these packages are uploaded to experimental, but some packages have
> to go through the new queue, as they contain new binary packages
> (texlive-xetex, -humanities, -science).
> 
> Please give it a twist, please report anything strange. 
> 
> Thanks for testing!
> 
> 
> Best wishes
> 
> Norbert
> 
> -------------------------------------------------------------------------------
> Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
> Debian Developer <preining at debian.org>                         Debian TeX Group
> gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
> -------------------------------------------------------------------------------
> CORRIEMUCHLOCH (n.)
> Word describing the kind of person who can make a complete mess of a
> simple job like walking down a corridor.
> 			--- Douglas Adams, The Meaning of Liff
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context
> 


From taco at elvenkind.com  Wed Mar 28 09:23:28 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 28 Mar 2007 09:23:28 +0200
Subject: [dev-context] metapost format problem in Debian ConTeXt
 2007.03.19, TeX Live 2007
In-Reply-To: <46094BE7.9010206@veribox.net>
References: <20070227093005.GA20754@gamma.logic.tuwien.ac.at>	<20070322022215.GA13007@gamma.logic.tuwien.ac.at>
	<46094BE7.9010206@veribox.net>
Message-ID: <460A17F0.4030502@elvenkind.com>

plink wrote:
> Hi Norbert et al,
> 
> I encountered a strange problem with metapost since my recent updates. I 
> am using the apt-sources given in your post below and can't seem to make 
> metapost happy, leaving it always complaining about wrong formats:
> 
> ...
> This is MetaPost, Version 0.993 (Web2C 7.5.6)
> (/usr/share/texmf/web2c/natural.tcx)
> (Fatal mem file error; I'm stymied)
> ...
> 
> and in /var/lib/texmf/web2c/metapost there are freshly generated
> metafun.mem and mpost.mem, no other mem-files on the system.

Besides finding the wrong file, another possible explanation
is that there is a mismatch between the array sizes in texmf.cnf
that were used during mem dump time and the sizes that are to be
used runtime. The 0.993 beta checks these values to make sure
there is no change.

This can happen for instance when you have a texmf.cnf like
this:

	main_memory.mpost   =  100000
	main_memory.metafun = 2000000

In both cases, the -kpathsea-debug switch is useful. Either on
the commandline, or in the environment.

	mpost -kpathsea-debug=6
or
	KPATHSEA_DEBUG=6
	export KPATHSEA_DEBUG
	mpost

The numeric value is a bitfield, the combination '6' should give
you file  operations and texmf.cnf value lookups

Good luck,

Taco

From sanjoy at mrao.cam.ac.uk  Wed Mar 28 11:52:55 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Wed, 28 Mar 2007 10:52:55 +0100
Subject: [dev-context] metapost format problem in Debian ConTeXt
	2007.03.19, TeX Live 2007
In-Reply-To: Your message of "Wed, 28 Mar 2007 09:23:28 +0200."
	<460A17F0.4030502@elvenkind.com> 
Message-ID: <E1HWUpr-0007o1-00@skye.ra.phy.cam.ac.uk>

>	KPATHSEA_DEBUG=6
>	export KPATHSEA_DEBUG
>	mpost

Or (in Bourne-shell syntax):
  
  KPATHSEA_DEBUG=6 mpost

which sets the environment variable only for that invocation of mpost.

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From plink at veribox.net  Wed Mar 28 20:35:56 2007
From: plink at veribox.net (plink)
Date: Wed, 28 Mar 2007 20:35:56 +0200
Subject: [dev-context] metapost format problem in Debian ConTeXt
 2007.03.19, TeX Live 2007
In-Reply-To: <460A17F0.4030502@elvenkind.com>
References: <20070227093005.GA20754@gamma.logic.tuwien.ac.at>
	<20070322022215.GA13007@gamma.logic.tuwien.ac.at>
	<46094BE7.9010206@veribox.net> <460A17F0.4030502@elvenkind.com>
Message-ID: <460AB58C.9080102@veribox.net>

Thanks for the hint, Taco!

I found the following memory setting of the debian packages in debians 
configlet /etc/texmf/texmf.d/95NonPath.cnf:

...
main_memory = 1000000 % words of inimemory available; also applies to 
inimf&mp
extra_mem_top = 0     % extra high memory for chars, tokens, etc.
extra_mem_bot = 0     % extra low memory for boxes, glue, breakpoints, etc.

% ConTeXt is a memory hog...
extra_mem_top.context = 2000000
extra_mem_bot.context = 4000000
main_memory.context = 1500000
main_memory.mpost = 1500000
...

Setting main_memory to the same size as main_memory.mpost fixes the 
problem (after an update-texmf and fmtutil-sys --refresh).

However, now that I fixed it this way I do not understand why the same 
settings seem to work for other people, at least thats the way the 
Mpgraphic wiki page seems to point at.

Sigh, one day when I grow up I'll be able to see into these dark TeX 
corners. Thanks very much anyhow!

Taco Hoekwater wrote:
> plink wrote:
>> I encountered a strange problem with metapost since my recent updates. 
>> I am using the apt-sources given in your post below and can't seem to 
>> make metapost happy, leaving it always complaining about wrong formats:
>> ...
>> This is MetaPost, Version 0.993 (Web2C 7.5.6)
>> (/usr/share/texmf/web2c/natural.tcx)
>> (Fatal mem file error; I'm stymied)
>> ...
>> and in /var/lib/texmf/web2c/metapost there are freshly generated
>> metafun.mem and mpost.mem, no other mem-files on the system.
> 
> Besides finding the wrong file, another possible explanation
> is that there is a mismatch between the array sizes in texmf.cnf
> that were used during mem dump time and the sizes that are to be
> used runtime. The 0.993 beta checks these values to make sure
> there is no change.
> 
> This can happen for instance when you have a texmf.cnf like
> this:
> 
>     main_memory.mpost   =  100000
>     main_memory.metafun = 2000000
> 
> In both cases, the -kpathsea-debug switch is useful. Either on
> the commandline, or in the environment.
> 
>     mpost -kpathsea-debug=6
> or
>     KPATHSEA_DEBUG=6
>     export KPATHSEA_DEBUG
>     mpost
> 
> The numeric value is a bitfield, the combination '6' should give
> you file  operations and texmf.cnf value lookups
> 
> Good luck,
> 
> Taco
> 


From patrick at gundla.ch  Wed Mar 28 23:06:38 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed, 28 Mar 2007 23:06:38 +0200
Subject: [dev-context] TeX on contextgarden disabled - \installprogram
	security
Message-ID: <m1mz1xf57l.fsf@levana.de>

Hi,

I've just found out about \installprogram, that lets you run any
command from TeX, bypassing the shellescape, openout and openin
setting. This means that I have a serious security problem on
contextgarden and therefore I have disabled all TeX typesetting.

Any advise on how to disable this?

Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net

From pragma at wxs.nl  Thu Mar 29 00:56:35 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 29 Mar 2007 00:56:35 +0200
Subject: [dev-context] TeX on contextgarden disabled - \installprogram
 security
In-Reply-To: <m1mz1xf57l.fsf@levana.de>
References: <m1mz1xf57l.fsf@levana.de>
Message-ID: <460AF2A3.9030603@wxs.nl>

Patrick Gundlach wrote:
> Hi,
>
> I've just found out about \installprogram, that lets you run any
> command from TeX, bypassing the shellescape, openout and openin
> setting. This means that I have a serious security problem on
> contextgarden and therefore I have disabled all TeX typesetting.
>
> Any advise on how to disable this?
>   
you can patch texutil.rb

            def MyExtras::finalizer(logger)
unless (ENV["CTX.TEXUTIL.EXTRAS"] =~ /^(no|off|false|0)$/io) || 
(ENV["CTX_TEXUTIL_EXTRAS"] =~ /^(no|off|false|0)$/io) then
                    @@programs.each do |p|
                        cmd = @@programs[p.to_i]
                        logger.report("running #{cmd}")
                        system(cmd)
end
                end
            end


and set

CTX_TEXUTIL_EXTRAS=off

(in mkiv i have a more clever method, there we  can register nice programs)

> Patrick
>   


-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From mojca.miklavec.lists at gmail.com  Thu Mar 29 01:03:21 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 29 Mar 2007 01:03:21 +0200
Subject: [dev-context] TeX on contextgarden disabled - \installprogram
	security
In-Reply-To: <460AF2A3.9030603@wxs.nl>
References: <m1mz1xf57l.fsf@levana.de> <460AF2A3.9030603@wxs.nl>
Message-ID: <6faad9f00703281603r363cabfbr6d7fc73b133a691f@mail.gmail.com>

On 3/29/07, Hans Hagen wrote:
> Patrick Gundlach wrote:
> > Hi,
> >
> > I've just found out about \installprogram, that lets you run any
> > command from TeX, bypassing the shellescape, openout and openin
> > setting. This means that I have a serious security problem on
> > contextgarden and therefore I have disabled all TeX typesetting.
> >
> > Any advise on how to disable this?
> >
> you can patch texutil.rb
>
>             def MyExtras::finalizer(logger)
> unless (ENV["CTX.TEXUTIL.EXTRAS"] =~ /^(no|off|false|0)$/io) ||
> (ENV["CTX_TEXUTIL_EXTRAS"] =~ /^(no|off|false|0)$/io) then
>                     @@programs.each do |p|
>                         cmd = @@programs[p.to_i]
>                         logger.report("running #{cmd}")
>                         system(cmd)
> end
>                 end
>             end
>
>
> and set
>
> CTX_TEXUTIL_EXTRAS=off
>
> (in mkiv i have a more clever method, there we  can register nice programs)

What about some extra safety --switch? (Otherwise we need to patch
every time a new version is installed - I can place a regular
expression to replace that part, but I guess that other people might
need that as well.)

Mojca

From taco at elvenkind.com  Thu Mar 29 09:23:41 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 29 Mar 2007 09:23:41 +0200
Subject: [dev-context] TeX on contextgarden disabled - \installprogram
 security
In-Reply-To: <6faad9f00703281603r363cabfbr6d7fc73b133a691f@mail.gmail.com>
References: <m1mz1xf57l.fsf@levana.de> <460AF2A3.9030603@wxs.nl>
	<6faad9f00703281603r363cabfbr6d7fc73b133a691f@mail.gmail.com>
Message-ID: <460B697D.10004@elvenkind.com>

Mojca Miklavec wrote:
>> and set
>>
>> CTX_TEXUTIL_EXTRAS=off
>>
>> (in mkiv i have a more clever method, there we  can register nice programs)
> 
> What about some extra safety --switch? (Otherwise we need to patch
> every time a new version is installed - I can place a regular
> expression to replace that part, but I guess that other people might
> need that as well.)

I take it this will be patched into the distributed version as well.

   No environment variable -> No changed behaviour

Cheers, Taco




From taco at elvenkind.com  Thu Mar 29 09:46:13 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 29 Mar 2007 09:46:13 +0200
Subject: [dev-context] metapost format problem in Debian ConTeXt
 2007.03.19, TeX Live 2007
In-Reply-To: <460AB58C.9080102@veribox.net>
References: <20070227093005.GA20754@gamma.logic.tuwien.ac.at>	<20070322022215.GA13007@gamma.logic.tuwien.ac.at>	<46094BE7.9010206@veribox.net>
	<460A17F0.4030502@elvenkind.com> <460AB58C.9080102@veribox.net>
Message-ID: <460B6EC5.1010301@elvenkind.com>

Hi,

plink wrote:
> Thanks for the hint, Taco!
> 
> I found the following memory setting of the debian packages in debians 
> configlet /etc/texmf/texmf.d/95NonPath.cnf:
> 
> ...
> main_memory = 1000000 % words of inimemory available; also applies to 
> inimf&mp
> extra_mem_top = 0     % extra high memory for chars, tokens, etc.
> extra_mem_bot = 0     % extra low memory for boxes, glue, breakpoints, etc.
> 
> % ConTeXt is a memory hog...
> extra_mem_top.context = 2000000
> extra_mem_bot.context = 4000000
> main_memory.context = 1500000
> main_memory.mpost = 1500000
> ...
> 
> Setting main_memory to the same size as main_memory.mpost fixes the 
> problem (after an update-texmf and fmtutil-sys --refresh).
> 
> However, now that I fixed it this way I do not understand why the same 
> settings seem to work for other people, at least thats the way the 
> Mpgraphic wiki page seems to point at.
> 

The change was made only in metapost 0.992, so until very recently,
nobody was using it at all. The new version is now included in
TeXLive 2007, but TL uses a different, corrected texmf.cnf itself.
It looks like perhaps Norbert missed this change, and that that is
why the texmf.cnf snippet in the debian packages is still wrong.
(This is my fault, I should have told him)

Norbert, can you fix this please?

Best wishes,
Taco


> Taco Hoekwater wrote:
>> plink wrote:
>>> I encountered a strange problem with metapost since my recent updates. 
>>> I am using the apt-sources given in your post below and can't seem to 
>>> make metapost happy, leaving it always complaining about wrong formats:
>>> ...
>>> This is MetaPost, Version 0.993 (Web2C 7.5.6)
>>> (/usr/share/texmf/web2c/natural.tcx)
>>> (Fatal mem file error; I'm stymied)
>>> ...
>>> and in /var/lib/texmf/web2c/metapost there are freshly generated
>>> metafun.mem and mpost.mem, no other mem-files on the system.
>> Besides finding the wrong file, another possible explanation
>> is that there is a mismatch between the array sizes in texmf.cnf
>> that were used during mem dump time and the sizes that are to be
>> used runtime. The 0.993 beta checks these values to make sure
>> there is no change.
>>
>> This can happen for instance when you have a texmf.cnf like
>> this:
>>
>>     main_memory.mpost   =  100000
>>     main_memory.metafun = 2000000
>>
>> In both cases, the -kpathsea-debug switch is useful. Either on
>> the commandline, or in the environment.
>>
>>     mpost -kpathsea-debug=6
>> or
>>     KPATHSEA_DEBUG=6
>>     export KPATHSEA_DEBUG
>>     mpost
>>
>> The numeric value is a bitfield, the combination '6' should give
>> you file  operations and texmf.cnf value lookups
>>
>> Good luck,
>>
>> Taco
>>
> 
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context


From pragma at wxs.nl  Thu Mar 29 10:16:33 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 29 Mar 2007 10:16:33 +0200
Subject: [dev-context] TeX on contextgarden disabled - \installprogram
 security
In-Reply-To: <460B697D.10004@elvenkind.com>
References: <m1mz1xf57l.fsf@levana.de> <460AF2A3.9030603@wxs.nl>
	<6faad9f00703281603r363cabfbr6d7fc73b133a691f@mail.gmail.com>
	<460B697D.10004@elvenkind.com>
Message-ID: <460B75E1.2090703@wxs.nl>

Taco Hoekwater wrote:
> Mojca Miklavec wrote:
>>> and set
>>>
>>> CTX_TEXUTIL_EXTRAS=off
>>>
>>> (in mkiv i have a more clever method, there we  can register nice 
>>> programs)
>>
>> What about some extra safety --switch? (Otherwise we need to patch
>> every time a new version is installed - I can place a regular
>> expression to replace that part, but I guess that other people might
>> need that as well.)
>
> I take it this will be patched into the distributed version as well.
>
>   No environment variable -> No changed behaviour
>
indeed

the snippet was copied from my patched version -)

untested of course

Hans

From patrick at gundla.ch  Thu Mar 29 10:51:14 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu, 29 Mar 2007 10:51:14 +0200
Subject: [dev-context] TeX on contextgarden disabled - \installprogram
	security
In-Reply-To: <460AF2A3.9030603@wxs.nl> (Hans Hagen's message of "Thu,
	29 Mar 2007 00:56:35 +0200")
References: <m1mz1xf57l.fsf@levana.de> <460AF2A3.9030603@wxs.nl>
Message-ID: <m17it0fn5p.fsf@levana.de>

Hello Hans,

> and set
>
> CTX_TEXUTIL_EXTRAS=off
>
> (in mkiv i have a more clever method, there we  can register nice programs)

OK, this works, but is it possible to put this into a global
configuration file (texmf.cnf, cont-usr.tex)? There are several places
where TeX can be called on the garden and I don't want to miss one
(and have garden erased).

Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net

From patrick at gundla.ch  Thu Mar 29 11:02:34 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu, 29 Mar 2007 11:02:34 +0200
Subject: [dev-context] TeX on contextgarden disabled - \installprogram
	security
In-Reply-To: <460AF2A3.9030603@wxs.nl> (Hans Hagen's message of "Thu,
	29 Mar 2007 00:56:35 +0200")
References: <m1mz1xf57l.fsf@levana.de> <460AF2A3.9030603@wxs.nl>
Message-ID: <m13b3ofmmt.fsf@levana.de>

Hi,

>
>             def MyExtras::finalizer(logger)
> unless (ENV["CTX.TEXUTIL.EXTRAS"] =~ /^(no|off|false|0)$/io) ||
> (ENV["CTX_TEXUTIL_EXTRAS"] =~ /^(no|off|false|0)$/io) then
>                     @@programs.each do |p|
>                         cmd = @@programs[p.to_i]
>                         logger.report("running #{cmd}")
>                         system(cmd)
> end
>                 end
>             end


could we use something like "kpsexpand \$CTX_TEXUTIL_EXTRAS"? This way
I could set this in texmf.cnf and on the command line.


Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net

From pragma at wxs.nl  Thu Mar 29 11:47:36 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 29 Mar 2007 11:47:36 +0200
Subject: [dev-context] TeX on contextgarden disabled - \installprogram
 security
In-Reply-To: <m13b3ofmmt.fsf@levana.de>
References: <m1mz1xf57l.fsf@levana.de> <460AF2A3.9030603@wxs.nl>
	<m13b3ofmmt.fsf@levana.de>
Message-ID: <460B8B38.5060407@wxs.nl>

Patrick Gundlach wrote:
> Hi,
>
>   
>>             def MyExtras::finalizer(logger)
>> unless (ENV["CTX.TEXUTIL.EXTRAS"] =~ /^(no|off|false|0)$/io) ||
>> (ENV["CTX_TEXUTIL_EXTRAS"] =~ /^(no|off|false|0)$/io) then
>>                     @@programs.each do |p|
>>                         cmd = @@programs[p.to_i]
>>                         logger.report("running #{cmd}")
>>                         system(cmd)
>> end
>>                 end
>>             end
>>     
>
>
> could we use something like "kpsexpand \$CTX_TEXUTIL_EXTRAS"? This way
> I could set this in texmf.cnf and on the command line.
>
>   
each kpse call slows down processing; it would be easier in mkiv where we have more control, so for mkii we need to stick to setting this in the env  


Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From dh at capdm.com  Thu Mar 29 12:13:43 2007
From: dh at capdm.com (Duncan Hothersall)
Date: Thu, 29 Mar 2007 11:13:43 +0100
Subject: [dev-context] core-reg.tex possible patch needed
Message-ID: <460B9157.8040408@capdm.com>

Something I ran into in Epen which Taco helped me to fix. In 
cont-tmf.zip dated 22 March 07:

core-reg.tex line 160

    \iffourarguments

throws up an undefined keyword error. I replaced with

    \iffourthargument

and this error went away, but that may not have been the intended 
meaning. My register seemed to work okay after this fix, but in any case 
I am unsure what the new third argument to \dostartregister, "type", is 
to be used for here, so I can't test it.

Duncan

From taco at elvenkind.com  Thu Mar 29 13:18:51 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 29 Mar 2007 13:18:51 +0200
Subject: [dev-context] TeX on contextgarden disabled - \installprogram
 security
In-Reply-To: <m17it0fn5p.fsf@levana.de>
References: <m1mz1xf57l.fsf@levana.de> <460AF2A3.9030603@wxs.nl>
	<m17it0fn5p.fsf@levana.de>
Message-ID: <460BA09B.8000108@elvenkind.com>

Patrick Gundlach wrote:
> Hello Hans,
> 
>> and set
>>
>> CTX_TEXUTIL_EXTRAS=off
>>
>> (in mkiv i have a more clever method, there we  can register nice programs)
> 
> OK, this works, but is it possible to put this into a global
> configuration file (texmf.cnf, cont-usr.tex)? There are several places

/etc/profile :-)

Taco

From taco at elvenkind.com  Thu Mar 29 13:27:56 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 29 Mar 2007 13:27:56 +0200
Subject: [dev-context] TeX on contextgarden disabled - \installprogram
 security
In-Reply-To: <460BA09B.8000108@elvenkind.com>
References: <m1mz1xf57l.fsf@levana.de>
	<460AF2A3.9030603@wxs.nl>	<m17it0fn5p.fsf@levana.de>
	<460BA09B.8000108@elvenkind.com>
Message-ID: <460BA2BC.5040103@elvenkind.com>

Taco Hoekwater wrote:
>>>
>>> (in mkiv i have a more clever method, there we  can register nice programs)
>> OK, this works, but is it possible to put this into a global
>> configuration file (texmf.cnf, cont-usr.tex)? There are several places
> 
> /etc/profile :-)

I just realized that that could be wrong, if you run ruby directly
from apache using exec(). But I thought you had an executable wrapper
around texexec?

Taco



From patrick at gundla.ch  Thu Mar 29 13:49:18 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu, 29 Mar 2007 13:49:18 +0200
Subject: [dev-context] TeX on contextgarden disabled - \installprogram
	security
In-Reply-To: <460BA2BC.5040103@elvenkind.com> (Taco Hoekwater's message of
	"Thu, 29 Mar 2007 13:27:56 +0200")
References: <m1mz1xf57l.fsf@levana.de> <460AF2A3.9030603@wxs.nl>
	<m17it0fn5p.fsf@levana.de> <460BA09B.8000108@elvenkind.com>
	<460BA2BC.5040103@elvenkind.com>
Message-ID: <m1hcs4e0ch.fsf@levana.de>

Taco Hoekwater <taco at elvenkind.com> writes:

> Taco Hoekwater wrote:
>>>>
>>>> (in mkiv i have a more clever method, there we  can register nice programs)
>>> OK, this works, but is it possible to put this into a global
>>> configuration file (texmf.cnf, cont-usr.tex)? There are several places
>> /etc/profile :-)
>
> I just realized that that could be wrong, if you run ruby directly
>>from apache using exec(). But I thought you had an executable wrapper
> around texexec?

I thought that is what you ment by using ':-)'. Yes, I have an
executable wrapper around texexec, but several points on the garden
where I call texexec. Two at the
moment but I will probably add some more in the future. And those
don't read /etc/profile so I'd have to set the environment variable in
each of the wrappers. Maybe I will add yet another layer to texexec
that just exports this variable.

At the moment I have stopped the automatic update of ConTeXt and
manually removed the line where external programs get called. I will
reenable updates once I have this kind of wrapper.

Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net

From frank at debian.org  Thu Mar 29 11:09:39 2007
From: frank at debian.org (Frank =?iso-8859-1?Q?K=FCster?=)
Date: Thu, 29 Mar 2007 11:09:39 +0200
Subject: [dev-context] [tex-live] Debian TeX -- new packages
In-Reply-To: <E1HWBCg-0005fi-00@skye.ra.phy.cam.ac.uk> (Sanjoy Mahajan's
	message of "Tue\, 27 Mar 2007 13\:55\:10 +0100")
References: <E1HWBCg-0005fi-00@skye.ra.phy.cam.ac.uk>
Message-ID: <87tzw4beln.fsf@riesling.zuerich.kuesterei.ch>

Sanjoy Mahajan <sanjoy at mrao.cam.ac.uk> wrote:

> I'll upgrade to the Ubuntu 7.04 beta, which will solve the libpng12-0
> problem because Ubuntu 7.04 uses libpng 1.2.15.  But libpoppler0c2
> would still be missing.  Here are the libpoppler pkgs in versions of
> Ubuntu:
>
> 5.04 (hoary)  | libpoppler0-0.1.2
> 5.10 (breezy) | libpoppler0c2-0.4.2
> 6.04 (dapper) | libpoppler1-0.5.1
> 6.10 (edgy)   | libpoppler1-0.5.4
> 7.04 (feisty) | libpoppler1-0.5.4
>
> So, could you add libpoppler1 as an alternative libpoppler dependency?
> That should fix the installation.  libpoppler1 is also in Debian (in
> experimental) so it should be a useful Debian change eventually.

No, we can't - these dependencies are autogenerated, and there's a
reason why libpoppler1 is not allowed.  Current TeXLive packages won't
even compile with libpoppler1, let alone run, and after changing the
patch to use libpoppler1, it won't compile with libpoppler0(c2).

Regards, Frank
-- 
Dr. Frank K?ster
Single Molecule Spectroscopy, Protein Folding @ Inst. f. Biochemie, Univ. Z?rich
Debian Developer (teTeX/TeXLive)

From sanjoy at mrao.cam.ac.uk  Thu Mar 29 16:56:27 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Thu, 29 Mar 2007 15:56:27 +0100
Subject: [dev-context] [tex-live] Debian TeX -- new packages
In-Reply-To: Your message of "Thu, 29 Mar 2007 11:09:39 +0200."
	<87tzw4beln.fsf@riesling.zuerich.kuesterei.ch> 
Message-ID: <E1HWw39-0004Qo-00@skye.ra.phy.cam.ac.uk>

> Current TeXLive packages won't even compile with libpoppler1, let
> alone run, and after changing the patch to use libpoppler1, it won't
> compile with libpoppler0(c2).

Right, as I found by trying to build it from source.  Do you have a
handy libpoppler1 patch?

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From patrick at gundla.ch  Thu Mar 29 17:57:48 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu, 29 Mar 2007 17:57:48 +0200
Subject: [dev-context] TeX on contextgarden disabled - \installprogram
	security
In-Reply-To: <460BA09B.8000108@elvenkind.com> (Taco Hoekwater's message of
	"Thu, 29 Mar 2007 13:18:51 +0200")
References: <m1mz1xf57l.fsf@levana.de> <460AF2A3.9030603@wxs.nl>
	<m17it0fn5p.fsf@levana.de> <460BA09B.8000108@elvenkind.com>
Message-ID: <m11wj8doub.fsf@levana.de>

Hi,

>>> (in mkiv i have a more clever method, there we  can register nice programs)
>> OK, this works, but is it possible to put this into a global
>> configuration file (texmf.cnf, cont-usr.tex)? There are several places
>
> /etc/profile :-)

/etc/init.d/httpd

:)

Patrick
(now re-enabled all as it was before - fingers crossed)

-- 
ConTeXt wiki and more: http://contextgarden.net

From preining at logic.at  Thu Mar 29 18:22:18 2007
From: preining at logic.at (Norbert Preining)
Date: Thu, 29 Mar 2007 18:22:18 +0200
Subject: [dev-context] metapost format problem in Debian ConTeXt
	2007.03.19, TeX Live 2007
In-Reply-To: <460B6EC5.1010301@elvenkind.com>
References: <20070227093005.GA20754@gamma.logic.tuwien.ac.at>
	<20070322022215.GA13007@gamma.logic.tuwien.ac.at>
	<46094BE7.9010206@veribox.net> <460A17F0.4030502@elvenkind.com>
	<460AB58C.9080102@veribox.net> <460B6EC5.1010301@elvenkind.com>
Message-ID: <20070329162218.GA30679@gamma.logic.tuwien.ac.at>

Hi Taco, hi all!

On Don, 29 M?r 2007, Taco Hoekwater wrote:
> >main_memory = 1000000 % words of inimemory available; also applies to 
> >main_memory.context = 1500000
> >main_memory.mpost = 1500000
> 
> Norbert, can you fix this please?

Next version (1.4) of tex-common will have main_memory = 1500000.

But isn't this rubbish??? Why do we need 
	main_memory
and
	main_memory.mpost
if both have to be the same??? What do I miss?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
HARBOTTLE (n.)
A particular kind of fly which lives inside double glazing.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Thu Mar 29 20:08:42 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 29 Mar 2007 20:08:42 +0200
Subject: [dev-context] metapost format problem in Debian ConTeXt
 2007.03.19, TeX Live 2007
In-Reply-To: <20070329162218.GA30679@gamma.logic.tuwien.ac.at>
References: <20070227093005.GA20754@gamma.logic.tuwien.ac.at>
	<20070322022215.GA13007@gamma.logic.tuwien.ac.at>
	<46094BE7.9010206@veribox.net> <460A17F0.4030502@elvenkind.com>
	<460AB58C.9080102@veribox.net> <460B6EC5.1010301@elvenkind.com>
	<20070329162218.GA30679@gamma.logic.tuwien.ac.at>
Message-ID: <460C00AA.7050908@elvenkind.com>

Norbert Preining wrote:
> Hi Taco, hi all!
> 
> On Don, 29 M?r 2007, Taco Hoekwater wrote:
>>> main_memory = 1000000 % words of inimemory available; also applies to 
>>> main_memory.context = 1500000
>>> main_memory.mpost = 1500000
>> Norbert, can you fix this please?
> 
> Next version (1.4) of tex-common will have main_memory = 1500000.
> 
> But isn't this rubbish??? Why do we need 
> 	main_memory
> and
> 	main_memory.mpost
> if both have to be the same??? What do I miss?

No, we don't need both.

In the older setups, there were multiple values for main_memory and
main_memory.XXXX created, in an attempt to be conservative with
memory usage for TeX when possible. But that size-difference did
not work for metapost at all (thanks to either a different internal
memory usage or because nobody ever looked into it and ust assumed
that if it worked for TeX, it would work for metapost as well).

Instead, it resulted in really strange and unpredictable bugs.

So, in new metapost (>0.992) the value used during runtime has to be
the same as the mem dumping value. It can still be main_memory.XXXX,
but then you have to give a --progname switch during dump (and undump)
so that both array sizes are always the same.

Best, Taco



From patrick at gundla.ch  Fri Mar 30 16:10:31 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Fri, 30 Mar 2007 16:10:31 +0200
Subject: [dev-context] \startsection ...\stopsection alias for \section?
Message-ID: <m1d52qddpk.fsf@levana.de>

Hi,

would it make sense to have, in addtion to e.g. \section a start..stop
pair?

such as 

\startsection{my section name}

\stopsection

with something like
\let\startsection\section
\let\stopsection\relax


This way the text would be slightly more structured.


Patrick

(or is it in the core already?)
-- 
ConTeXt wiki and more: http://contextgarden.net

From sanjoy at mrao.cam.ac.uk  Fri Mar 30 16:21:35 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Fri, 30 Mar 2007 15:21:35 +0100
Subject: [dev-context] [tex-live] Debian TeX -- new packages
In-Reply-To: Your message of "Tue, 27 Mar 2007 13:55:10 BST."
	<E1HWBCg-0005fi-00@skye.ra.phy.cam.ac.uk> 
Message-ID: <E1HXHyx-0000P2-00@skye.ra.phy.cam.ac.uk>

[Using Ubuntu 6.10/i386]

I couldn't apply (without rejected hunks) the Ubuntu poppler patch at
<http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=356079> to the
Debian texlive-2007-1 source.  So I just removed
debian/patches/30_libpoppler from the patch series, returning to using
the xpdf sources that ship with pdftex.  Then the texlive-2007 src pkg
compiled into the many .deb's and these binary pkgs installed fine.
They use libpng-1.2.8 and libc6-2.4.

I then could upgrade to your latest context pkg (2007.03.19) and test
it.  As its stress test, it processed my textbook fine.

The only glitches I've noticed so far:

* installing the pkgs removed dvipdfmx but I haven't figured out the
  reason.  It may be Ubuntu-specific.

* dvipos isn't included in any binary packages, although it gets built
  when creating them:

    $ pwd
    /var/tmp/tlrebuild/texlive-bin-2007
    $ find -name dvipos
    ./build/source/texk/dvipos
    ./build/source/inst/bin/i686-pc-linux-gnu/dvipos
    ./build/source/Work/texk/dvipos
    ./build/source/Work/texk/dvipos/dvipos
    ./bin/i386-linux/dvipos

  I couldn't figure out where the package-splitting information lives,
  in order that dpkg-buildpackage knows dvipos belongs to a particular
  binary package.  

  Maybe because there's no tpm file for it, and the tpm's are turned
  into magic Debian files, so dvipos gets left out?

Multiple binary pkgs from one source pkg is one the the deeper
mysteries of Debian packaging, well understood by maintainers of
complex packages (like texlive or tetex) but not documented elsewhere.
But I'm happy to learn how that works!

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From taco at elvenkind.com  Sat Mar 31 16:34:01 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 31 Mar 2007 16:34:01 +0200
Subject: [dev-context] [NTG-context] Force all floats on opposite even
	pages
In-Reply-To: <20070331155343.86253297.schuster.wolfgang@googlemail.com>
References: <E1HX0p8-0007F9-00@skye.ra.phy.cam.ac.uk>
	<460C3A2F.4020507@wxs.nl>	<460CD3BE.6090504@elvenkind.com>
	<460D24BB.2020907@gmx.net>	<460D2988.4020108@elvenkind.com>
	<20070331155343.86253297.schuster.wolfgang@googlemail.com>
Message-ID: <460E7159.9060900@elvenkind.com>


Hi,

Wolfgang Schuster wrote:
> 
> Hi all,
> 
> there is a way to move all text to the right page and put the figures
> on the left page. The hard thing is to get all figures before the text
> and not on the following one. You can do this by manipulating the
> pagefloats macro. I created a minimum example that shows the results
> and effects.

Hans, is it possible to merge this in the core somewhere?

The requested layout is not all that bizarre, Wolfgang's code fairly
small, and it could be a switchable thing, no need for it to be
always on (i cannot say if it will/will not interfere with the
normal page formatting) but it would be a shame to ignore this.

Taco

From mojca.miklavec.lists at gmail.com  Mon Apr  2 13:27:56 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 2 Apr 2007 13:27:56 +0200
Subject: [dev-context] Footer for ntg-context mailing list,
	to encourage feedback
Message-ID: <6faad9f00704020427s17b27e83tb3db5f0a62a07340@mail.gmail.com>

Hello,

As a (delayed) part of my duty I'm now writing the report about the
"Discussion on improving ConTeXt documentation".

One of ideas was to add a short footer to each mail on the mailing
list, which would encourage more people to reply after they get a
solution to their feature request or a bug report (as opposed to the
fact that many [sometimes including me] simply disappear after they
get the answer and one never knows if they solved the problem or not).

The following notices might be relevant to add to the default mail
footer, but I'm afraid that the list is too long already. Any
ideas/suggestions/comments?

- Please "wikify" tricky parts and help us improve ConTeXt documentation:
  http://wiki.contextgarden.net/
  http://texshow.contextgarden.net/
- Please test and provide feedback for any answers you get on the list:
  Did the solution work? Was the bug resolved?
- Please help us collect new files for testing against bugs:
  http://wiki.contextgarden.net/Test
- Confirmed and unresolved bugs are collected on
  https://foundry.supelec.fr/tracker/?atid=161&group_id=21

(Collecting test files should be simplified anyway; the last two items
do not seem as relevant as the rest.)

Mojca

From arthur.reutenauer at normalesup.org  Mon Apr  2 16:06:43 2007
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Mon, 2 Apr 2007 16:06:43 +0200
Subject: [dev-context] Footer for ntg-context mailing list,
	to encourage feedback
In-Reply-To: <6faad9f00704020427s17b27e83tb3db5f0a62a07340@mail.gmail.com>
References: <6faad9f00704020427s17b27e83tb3db5f0a62a07340@mail.gmail.com>
Message-ID: <20070402140643.GC7952@clipper.ens.fr>

> One of ideas was to add a short footer to each mail on the mailing
> list, which would encourage more people to reply after they get a
> solution to their feature request or a bug report

  This sounds like a very good idea; maybe we could write a page on the
wiki to explain why we need help from the general users; it should be a
better incentive than pointing people to the main pages of the wiki and
of texshow (is there already such a page? Needless to say, I'm willing to
write it, if necessary).

  In addition, I think the first two items should be switched, because
that's the right order (above all we want people to tell if it's worked,
and then, where applicable, wikify tips and tricks that can be relevant
to other users).

  So I would favour something like this:

  * Did the solution work? Was the bug resolved?
    Please test and provide feedback for any answers you get on the list!
  * Help us improve the ConTeXt documentation:
    http://wiki.contextgarden.net/How_can_I_contribute_to_the_garden
  * Please help us collect new files for testing against bugs:
    http://wiki.contextgarden.net/Test
  * Confirmed and unresolved bugs are collected on
    https://foundry.supelec.fr/tracker/?atid=161&group_id=21

  Maybe it's already too long... but the idea of including a bucket load of
links in the footer is familiar anyway; if you fill in the form at
http://www.coge.org/contact.php?langue=anglais&receiver=9 you end up
sending a mail to bureau at coge.org (my choir's board in Paris) with the
following footer:

------
D?couvrez nos nombreux autres services :
- Consultez notre programmation en ligne : http://concerts.coge.org
- R?servez vos billets en ligne : http://concerts.coge.org
- Retrouvez nos enregistrements pass?s et commandez vos CDs en ligne : http://cd.coge.org
- Ecoutez le podcast de nos concerts : http://podcast.coge.org
- Abonnez-vous ? notre lettre d'information trimestrielle : http://newsletter.coge.org
- Envoyez une eCard du COGE ? vos proches et amis : http://ecard.coge.org
- Si vous souhaitez faire un don ? l'association : http://don.coge.org

------
Le COGE :: La formation musicale des ?tudiants de Paris ::
http://www.coge.org/

  The last link is for making donations ;-)

	Arthur

From martin at oneiros.de  Mon Apr  2 18:09:37 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Mon, 2 Apr 2007 18:09:37 +0200
Subject: [dev-context] Footer for ntg-context mailing list,
	to encourage feedback
In-Reply-To: <20070402140643.GC7952@clipper.ens.fr>
References: <6faad9f00704020427s17b27e83tb3db5f0a62a07340@mail.gmail.com>
	<20070402140643.GC7952@clipper.ens.fr>
Message-ID: <68c491a60704020909m2a86c1bdp254fb51c4403fd0c@mail.gmail.com>

2007/4/2, Arthur Reutenauer <arthur.reutenauer at normalesup.org>:
>   Maybe it's already too long... but the idea of including a bucket load of
> links in the footer is familiar anyway; if you fill in the

For links in the footer, tinyurl or something similar is preferred, as
it saves bandwidth.

Best
   Martin

From arthur.reutenauer at normalesup.org  Mon Apr  2 18:24:03 2007
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Mon, 2 Apr 2007 18:24:03 +0200
Subject: [dev-context] Footer for ntg-context mailing list,
	to encourage feedback
In-Reply-To: <68c491a60704020909m2a86c1bdp254fb51c4403fd0c@mail.gmail.com>
References: <6faad9f00704020427s17b27e83tb3db5f0a62a07340@mail.gmail.com>
	<20070402140643.GC7952@clipper.ens.fr>
	<68c491a60704020909m2a86c1bdp254fb51c4403fd0c@mail.gmail.com>
Message-ID: <20070402162403.GA11275@clipper.ens.fr>

> For links in the footer, tinyurl or something similar is preferred, as
> it saves bandwidth.

  I think it's not really the point here: the idea is to have permanent
(and possibly easy to remember) links to relevant locations; but there is
a tradeoff to be found between the density of information and the
legibility of the footer; in that respect, the example I cited certainly
has too much links, but having only one might not be a good idea either
because there are different aspects to address (contributing to the wiki,
reporting bugs, etc.).

From adityam at umich.edu  Tue Apr 10 16:29:56 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Tue, 10 Apr 2007 10:29:56 -0400 (EDT)
Subject: [dev-context] \startsection ...\stopsection alias for \section?
In-Reply-To: <m1d52qddpk.fsf@levana.de>
References: <m1d52qddpk.fsf@levana.de>
Message-ID: <alpine.WNT.0.98.0704101027090.232@nqvgln>

On Fri, 30 Mar 2007, Patrick Gundlach wrote:

> Hi,
>
> would it make sense to have, in addtion to e.g. \section a start..stop
> pair?
>
> such as
>
> \startsection{my section name}
>
> \stopsection
>
> with something like
> \let\startsection\section
> \let\stopsection\relax
>
>
> This way the text would be slightly more structured.

I would prefer something error checking in \stopsection etc to catch 
nesting errors. I have been biten once too many times with mismatched 
\(start|stop)(components|project|product|environments) to have the 
same experience with sections ;)

Aditya

From preining at logic.at  Wed Apr 11 18:00:51 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 11 Apr 2007 18:00:51 +0200
Subject: [dev-context] texlive 2007-2
Message-ID: <20070411160051.GI17920@gamma.logic.tuwien.ac.at>

Hi all!

I have uploaded texlive 2007-2 packages to the tug server. I have done
the usual test runs (installing/removing etc), and have the packages
running on my laptop and various documents processed fine.

I will wait another day (ie till tomorrow evening) until uploading the
whole bunch to Debian/unstable.

If someone wants to test it, please give it a try.

	deb(-src) http://www.tug.org/texlive/Debian/ tl2007/

Thanks a lot and all the best

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
HAGNABY (n.)
Someone who looked a lot more attractive in the disco than they do in
your bed the next morning.
			--- Douglas Adams, The Meaning of Liff

From sanjoy at mrao.cam.ac.uk  Wed Apr 11 23:12:49 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Wed, 11 Apr 2007 22:12:49 +0100
Subject: [dev-context] texlive 2007-2
In-Reply-To: Your message of "Wed, 11 Apr 2007 18:00:51 +0200."
	<20070411160051.GI17920@gamma.logic.tuwien.ac.at> 
Message-ID: <E1Hbk7V-0004tT-00@skye.ra.phy.cam.ac.uk>

> If someone wants to test it, please give it a try.

I apt-getted them and they work fine here on my usual tests, which
include a 160+-page book in ConTeXt and having many MetaPost figures.

I'm running Ubuntu 6.10 (i386), with a locally built
texlive-base-bin-2007-1 that uses the included xpdf code instead of
libpoppler.  I should probably rebuild it, but it seems like the
changes from -1 to -2 won't do anything to the base-bin.

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From preining at logic.at  Thu Apr 12 07:17:56 2007
From: preining at logic.at (Norbert Preining)
Date: Thu, 12 Apr 2007 07:17:56 +0200
Subject: [dev-context] texlive 2007-2
In-Reply-To: <E1Hbk7V-0004tT-00@skye.ra.phy.cam.ac.uk>
References: <20070411160051.GI17920@gamma.logic.tuwien.ac.at>
	<E1Hbk7V-0004tT-00@skye.ra.phy.cam.ac.uk>
Message-ID: <20070412051756.GB24848@gamma.logic.tuwien.ac.at>

Hi Sanjoy,

On Mit, 11 Apr 2007, Sanjoy Mahajan wrote:
> I apt-getted them and they work fine here on my usual tests, which
> include a 160+-page book in ConTeXt and having many MetaPost figures.

Thanks for the feed back.

> I'm running Ubuntu 6.10 (i386), with a locally built
> texlive-base-bin-2007-1 that uses the included xpdf code instead of
> libpoppler.  I should probably rebuild it, but it seems like the
> changes from -1 to -2 won't do anything to the base-bin.

Definitely. The only main difference is the addition of dvipos(.1) to
texlive-extra-utils (build from texlive-bin source), some fixes for
misplaced files in upstream, and fixes for config file handling at
upgrade time from 2005.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
CLUNES (pl.n.)
People who just won't go.
			--- Douglas Adams, The Meaning of Liff

From ishamid at colostate.edu  Sat Apr 14 00:11:53 2007
From: ishamid at colostate.edu (Idris Samawi Hamid)
Date: Fri, 13 Apr 2007 16:11:53 -0600
Subject: [dev-context] \startsection ...\stopsection alias for \section?
In-Reply-To: <alpine.WNT.0.98.0704101027090.232@nqvgln>
References: <m1d52qddpk.fsf@levana.de>
	<alpine.WNT.0.98.0704101027090.232@nqvgln>
Message-ID: <op.tqqs93njnx1yh1@walayah-main>

On Tue, 10 Apr 2007 08:29:56 -0600, Aditya Mahajan <adityam at umich.edu>  
wrote:

> On Fri, 30 Mar 2007, Patrick Gundlach wrote:
>
>> Hi,
>>
>> would it make sense to have, in addtion to e.g. \section a start..stop
>> pair?
>>
>> such as
>>
>> \startsection{my section name}
>>
>> \stopsection
>>
>> with something like
>> \let\startsection\section
>> \let\stopsection\relax
>>
>>
>> This way the text would be slightly more structured.

For now:

=====================
\def\startchapter[#1]#2%
        {\getparameters[Chapter][#1]\chapter{#2}}
\def\stopchapter{}

\def\startsection[#1]#2%
        {\getparameters[Section][#1]\section{#2}}
\def\stopsection{}

\def\startsubsection[#1]#2%
        {\getparameters[Subsection][#1]\subsection{#2}}
\def\stopsubsection{}

\def\startfootnote[#1]#2%
        {\getparameters[Footnote][#1]\footnote\bgroup#2}
\def\stopfootnote{\egroup{}}
=====================

All based on a note from Taco; I don't really know how it works...

The footnote one needs a % at the end of the preceding line, don't know  
how to gobble it:

text.%
\startfootnote[]
note.	
\stopfootnote{}
text

Further: I now use fake start-stops in my environments/preambles. In  
conjunction with an editor that can handle TeX-syntax folding, they area  
really good organizing tools. So I have a file startstops.tex with totally  
naive things like

=======================
\let\startENV=\relax 			\let\stopENV=\relax
\let\startLET=\relax 			\let\stopLET=\relax
\let\startFONTS=\relax 			\let\stopFONTS=\relax
\let\startLISTS=\relax 			\let\stopLISTS=\relax
\let\startPAPER=\relax 			\let\stopPAPER=\relax
\let\startTITLE=\relax 			\let\stopTITLE=\relax
\let\startLAYOUT=\relax 		\let\stopLAYOUT=\relax
\let\startBIBLIO=\relax 		\let\stopBIBLIO=\relax
\let\startALIASES=\relax 		\let\stopALIASES=\relax
\let\startSTRUCTURE=\relax 		\let\stopSTRUCTURE=\relax
\let\startSTARTSTOPS=\relax 		\let\stopSTARTSTOPS=\relax
\let\startDESCRIPTIONS=\relax 		\let\stopDESCRIPTIONS=\relax
\let\startINTERACTIONS=\relax 		\let\stopINTERACTIONS=\relax
=======================

Syntax-folding makes things soooo much easier and efficient.

Best
Idris

-- 
Professor Idris Samawi Hamid
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

--
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From schuster.wolfgang at googlemail.com  Sat Apr 14 15:34:59 2007
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Sat, 14 Apr 2007 15:34:59 +0200
Subject: [dev-context] \startsection ...\stopsection alias for \section?
In-Reply-To: <op.tqqs93njnx1yh1@walayah-main>
References: <m1d52qddpk.fsf@levana.de>
	<alpine.WNT.0.98.0704101027090.232@nqvgln>
	<op.tqqs93njnx1yh1@walayah-main>
Message-ID: <20070414153459.7035165b.schuster.wolfgang@googlemail.com>

On Fri, 13 Apr 2007 16:11:53 -0600
"Idris Samawi Hamid" <ishamid at colostate.edu> wrote:

> On Tue, 10 Apr 2007 08:29:56 -0600, Aditya Mahajan <adityam at umich.edu>  
> wrote:
> 
> > On Fri, 30 Mar 2007, Patrick Gundlach wrote:
> >
> >> Hi,
> >>
> >> would it make sense to have, in addtion to e.g. \section a start..stop
> >> pair?
> >>
> >> such as
> >>
> >> \startsection{my section name}
> >>
> >> \stopsection
> >>
> >> with something like
> >> \let\startsection\section
> >> \let\stopsection\relax
> >>
> >>
> >> This way the text would be slightly more structured.
> 
> For now:
> 
> =====================
> \def\startchapter[#1]#2%
>         {\getparameters[Chapter][#1]\chapter{#2}}
> \def\stopchapter{}
> 
> \def\startsection[#1]#2%
>         {\getparameters[Section][#1]\section{#2}}
> \def\stopsection{}
> 
> \def\startsubsection[#1]#2%
>         {\getparameters[Subsection][#1]\subsection{#2}}
> \def\stopsubsection{}

Hi,

you can avoid all these definition by changing the \definisection
commands in core-sec. YOu nedd only a few extra lines at the end from
the \dododefinehead macro.

Just add:

\setvalue{\e!start#1}##1[##2]%
     {\getparameters[\??se\??se#1][\c!ref=,\c!title=,##2]%
      \getvalue{#1}[\getvalue{\??se\??se#1\c!ref}]{\getvalue{\??se\??
se#1\c!title}}}% \setvalue{\e!stop#1}{\relax}

for Tacos version.

\startsetion[ref=...,title=...]
...
\stopsection

or add:

\setvalue{\e!start#1}{\getvalue{#1}}%
\setvalue{\e!stop#1}{\relax}

for Patricks version.

\startsection[reference]{title}
...
\stopsection

> 
> \def\startfootnote[#1]#2%
>         {\getparameters[Footnote][#1]\footnote\bgroup#2}
> \def\stopfootnote{\egroup{}}
> =====================

\def\startfootnote[#1]#2\stopfootnote
  {\footnote[#1]{#2}}

We need something in core-not that creates start/stop commands for
everything defined with \definenote. It is not as easy as extending the
section commands.

> 
> All based on a note from Taco; I don't really know how it works...
> 
> The footnote one needs a % at the end of the preceding line, don't know  
> how to gobble it:
> 
> text.%
> \startfootnote[]
> note.	
> \stopfootnote{}
> text
> 
> Further: I now use fake start-stops in my environments/preambles. In  
> conjunction with an editor that can handle TeX-syntax folding, they area  
> really good organizing tools. So I have a file startstops.tex with totally  
> naive things like
> 
> =======================
> \let\startENV=\relax 			\let\stopENV=\relax
> \let\startLET=\relax 			\let\stopLET=\relax
> \let\startFONTS=\relax 			\let\stopFONTS=\relax
> \let\startLISTS=\relax 			\let\stopLISTS=\relax
> \let\startPAPER=\relax 			\let\stopPAPER=\relax
> \let\startTITLE=\relax 			\let\stopTITLE=\relax
> \let\startLAYOUT=\relax 		\let\stopLAYOUT=\relax
> \let\startBIBLIO=\relax 		\let\stopBIBLIO=\relax
> \let\startALIASES=\relax 		\let\stopALIASES=\relax
> \let\startSTRUCTURE=\relax 		\let\stopSTRUCTURE=\relax
> \let\startSTARTSTOPS=\relax 		\let\stopSTARTSTOPS=\relax
> \let\startDESCRIPTIONS=\relax 		\let\stopDESCRIPTIONS=\relax
> \let\startINTERACTIONS=\relax 		\let\stopINTERACTIONS=\relax
> =======================
> 
> Syntax-folding makes things soooo much easier and efficient.
> 
> Best
> Idris
> 

Gru?
Wolfgang

From ishamid at colostate.edu  Sat Apr 14 18:45:21 2007
From: ishamid at colostate.edu (Idris Samawi Hamid)
Date: Sat, 14 Apr 2007 10:45:21 -0600
Subject: [dev-context] \startsection ...\stopsection alias for \section?
In-Reply-To: <20070414153459.7035165b.schuster.wolfgang@googlemail.com>
References: <m1d52qddpk.fsf@levana.de>
	<alpine.WNT.0.98.0704101027090.232@nqvgln>
	<op.tqqs93njnx1yh1@walayah-main>
	<20070414153459.7035165b.schuster.wolfgang@googlemail.com>
Message-ID: <op.tqr8tvm8nx1yh1@walayah-main>

Hi,

Thanks for the wonderful guidance! See below:

On Sat, 14 Apr 2007 07:34:59 -0600, Wolfgang Schuster
<schuster.wolfgang at googlemail.com> wrote:

> Just add:
>
> \setvalue{\e!start#1}##1[##2]%
>      {\getparameters[\??se\??se#1][\c!ref=,\c!title=,##2]%
>       \getvalue{#1}[\getvalue{\??se\??se#1\c!ref}]{\getvalue{\??se\??
> se#1\c!title}}}% \setvalue{\e!stop#1}{\relax}

>
> \startsetion[ref=...,title=...]
> ...
> \stopsection
>
> for Tacos version.

I did a \unprotect-\protect macro with just the \dododefinehead macro.

=============
\starttext

\startchapter[ref=,title=Chapter]{Test}

text

\stopchapter

\stoptext
=============

which gives the error

=============
! Parameters must be numbered consecutively.
<to be read again>
                     ##
l.133   \setvalue{\e!start#1}##
                                1[##2]%
?
=============

>
> or add:
>
> \setvalue{\e!start#1}{\getvalue{#1}}%
> \setvalue{\e!stop#1}{\relax}
>
> for Patricks version.
>
> \startsection[reference]{title}
> ...
> \stopsection
>
>>
>> \def\startfootnote[#1]#2%
>>         {\getparameters[Footnote][#1]\footnote\bgroup#2}
>> \def\stopfootnote{\egroup{}}
>> =====================
>
> \def\startfootnote[#1]#2\stopfootnote
>   {\footnote[#1]{#2}}

Wow, I did not know that you could define two commands with one \def
(TeXBook, p. 219)

> We need something in core-not that creates start/stop commands for
> everything defined with \definenote. It is not as easy as extending the
> section commands.

In the above definition the square brackets [] are mandatory even if the
argument is empty, viz

\startfootnote[]
text
\stopfootnote

Is there a way to make it optional, as with \footnote itself?

Thank you again, Wolfgang!

Best
Idris

-- 
Professor Idris Samawi Hamid
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

--
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From schuster.wolfgang at googlemail.com  Sat Apr 14 19:08:24 2007
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Sat, 14 Apr 2007 19:08:24 +0200
Subject: [dev-context] \startsection ...\stopsection alias for \section?
In-Reply-To: <op.tqr8tvm8nx1yh1@walayah-main>
References: <m1d52qddpk.fsf@levana.de>
	<alpine.WNT.0.98.0704101027090.232@nqvgln>
	<op.tqqs93njnx1yh1@walayah-main>
	<20070414153459.7035165b.schuster.wolfgang@googlemail.com>
	<op.tqr8tvm8nx1yh1@walayah-main>
Message-ID: <20070414190824.79e15843.schuster.wolfgang@googlemail.com>

On Sat, 14 Apr 2007 10:45:21 -0600
"Idris Samawi Hamid" <ishamid at colostate.edu> wrote:

> Hi,
> 
> Thanks for the wonderful guidance! See below:
> 
> On Sat, 14 Apr 2007 07:34:59 -0600, Wolfgang Schuster
> <schuster.wolfgang at googlemail.com> wrote:
> 
> > Just add:
> >
> > \setvalue{\e!start#1}##1[##2]%
> >      {\getparameters[\??se\??se#1][\c!ref=,\c!title=,##2]%
> >       \getvalue{#1}[\getvalue{\??se\??se#1\c!ref}]{\getvalue{\??se\??
> > se#1\c!title}}}% \setvalue{\e!stop#1}{\relax}
> 
> >
> > \startsetion[ref=...,title=...]
> > ...
> > \stopsection
> >
> > for Tacos version.
> 
> I did a \unprotect-\protect macro with just the \dododefinehead macro.
> 
> =============
> \starttext
> 
> \startchapter[ref=,title=Chapter]{Test}
> 
> text
> 
> \stopchapter
> 
> \stoptext
> =============
> 
> which gives the error
> 
> =============
> ! Parameters must be numbered consecutively.
> <to be read again>
>                      ##
> l.133   \setvalue{\e!start#1}##
>                                 1[##2]%

Hi Idris,

you have to make the change in core-sec.tex, id is not possible to
redefine them within a local file, because the section commands are
when you make the format files. 

> ?
> =============
> 
> >
> > or add:
> >
> > \setvalue{\e!start#1}{\getvalue{#1}}%
> > \setvalue{\e!stop#1}{\relax}
> >
> > for Patricks version.
> >
> > \startsection[reference]{title}
> > ...
> > \stopsection
> >
> >>
> >> \def\startfootnote[#1]#2%
> >>         {\getparameters[Footnote][#1]\footnote\bgroup#2}
> >> \def\stopfootnote{\egroup{}}
> >> =====================
> >
> > \def\startfootnote[#1]#2\stopfootnote
> >   {\footnote[#1]{#2}}
> 
> Wow, I did not know that you could define two commands with one \def
> (TeXBook, p. 219)
> 

Not realy two commands, only a delimiter that tells TeX to read
everything from \startfoonote till \stopfootnote, you can use it also
as prevent eating the following space, e.g.,

\def\TEX/{\TEX}

Text \TEX/ text

\bye

> > We need something in core-not that creates start/stop commands for
> > everything defined with \definenote. It is not as easy as extending the
> > section commands.
> 
> In the above definition the square brackets [] are mandatory even if the
> argument is empty, viz
> 
> \startfootnote[]
> text
> \stopfootnote
> 
> Is there a way to make it optional, as with \footnote itself?
> 

I will send you a patched core-sec and core-not offlist, because they
are to big for the list. 

> Thank you again, Wolfgang!
> 
> Best
> Idris

Wolfgang

From taco at elvenkind.com  Thu Apr 19 12:51:38 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 19 Apr 2007 12:51:38 +0200
Subject: [dev-context] [NTG-context] llap, rlap, clap equivalent for math
In-Reply-To: <alpine.WNT.0.98.0704181926330.3440@nqvgln>
References: <alpine.WNT.0.98.0704181926330.3440@nqvgln>
Message-ID: <462749BA.1080807@elvenkind.com>

Aditya Mahajan wrote:
> Inspired by Alexander Perlis' macros in 
> http://www.tug.org/TUGboat/Articles/tb22-4/tb72perlS.pdf
> can we have the math equivalent of llap etc. in ConTeXt.
> 
> Ideally, \llap etc. should be modified so that they work in math mode 
> also (just like \smash and \phantom). If not, we can have the 
> following simple definitions:
> 

Some extra \do 's fix up the textmode comands (supp-box.tex):

\def\dorlap{\begingroup\dowithnextbox{\normalhbox to \zeropoint
   {\flushnextbox\normalhss}\endgroup}\normalhbox}

\def\dollap{\begingroup\dowithnextbox{\normalhbox to \zeropoint
   {\normalhss\flushnextbox}\endgroup}\normalhbox}

\def\doclap{\begingroup\dowithnextbox{\normalhbox to \zeropoint
   {\normalhss\flushnextbox\normalhss}\endgroup}\normalhbox}

\def\domathclap{\mathpalette\dodomathclap}
\def\dodomathclap#1#2{\doclap{$\m at th#1#2$}}

\def\domathllap{\mathpalette\dodomathllap}
\def\dodomathllap#1#2{\dollap{$\m at th#1#2$}}

\def\domathrlap{\mathpalette\dodomathrlap}
\def\dodomathrlap#1#2{\dorlap{$\m at th#1#2$}}

\unexpanded\def\rlap{\ifmmode \@EA\domathrlap \else \@EA\dorlap \fi}
\unexpanded\def\llap{\ifmmode \@EA\domathllap \else \@EA\dollap \fi}
\unexpanded\def\clap{\ifmmode \@EA\domathclap \else \@EA\doclap \fi}


Cheers, Taco


From pragma at wxs.nl  Thu Apr 19 13:48:05 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 19 Apr 2007 13:48:05 +0200
Subject: [dev-context] [NTG-context] llap, rlap, clap equivalent for math
In-Reply-To: <462749BA.1080807@elvenkind.com>
References: <alpine.WNT.0.98.0704181926330.3440@nqvgln>
	<462749BA.1080807@elvenkind.com>
Message-ID: <462756F5.9060202@wxs.nl>

Taco Hoekwater wrote:
> Aditya Mahajan wrote:
>   
>> Inspired by Alexander Perlis' macros in 
>> http://www.tug.org/TUGboat/Articles/tb22-4/tb72perlS.pdf
>> can we have the math equivalent of llap etc. in ConTeXt.
>>
>> Ideally, \llap etc. should be modified so that they work in math mode 
>> also (just like \smash and \phantom). If not, we can have the 
>> following simple definitions:
>>
>>     
>
> Some extra \do 's fix up the textmode comands (supp-box.tex):
>
> \def\dorlap{\begingroup\dowithnextbox{\normalhbox to \zeropoint
>    {\flushnextbox\normalhss}\endgroup}\normalhbox}
>
> \def\dollap{\begingroup\dowithnextbox{\normalhbox to \zeropoint
>    {\normalhss\flushnextbox}\endgroup}\normalhbox}
>
> \def\doclap{\begingroup\dowithnextbox{\normalhbox to \zeropoint
>    {\normalhss\flushnextbox\normalhss}\endgroup}\normalhbox}
>
> \def\domathclap{\mathpalette\dodomathclap}
> \def\dodomathclap#1#2{\doclap{$\m at th#1#2$}}
>
> \def\domathllap{\mathpalette\dodomathllap}
> \def\dodomathllap#1#2{\dollap{$\m at th#1#2$}}
>
> \def\domathrlap{\mathpalette\dodomathrlap}
> \def\dodomathrlap#1#2{\dorlap{$\m at th#1#2$}}
>
> \unexpanded\def\rlap{\ifmmode \@EA\domathrlap \else \@EA\dorlap \fi}
> \unexpanded\def\llap{\ifmmode \@EA\domathllap \else \@EA\dollap \fi}
> \unexpanded\def\clap{\ifmmode \@EA\domathclap \else \@EA\doclap \fi}
>
>   
or

\unexpanded\def\rlap{\mathortext\domathrlap\dorlap}
\unexpanded\def\llap{\mathortext\domathllap\dollap}
\unexpanded\def\clap{\mathortext\domathclap\doclap}

before i add this, we need to be sure that llap/rlap are not used in 
math constructs which expect it to behave like an hbox

-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From adityam at umich.edu  Thu Apr 19 15:08:16 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Thu, 19 Apr 2007 09:08:16 -0400 (EDT)
Subject: [dev-context] [NTG-context] llap, rlap, clap equivalent for math
In-Reply-To: <462756F5.9060202@wxs.nl>
References: <alpine.WNT.0.98.0704181926330.3440@nqvgln>
	<462749BA.1080807@elvenkind.com> <462756F5.9060202@wxs.nl>
Message-ID: <alpine.WNT.0.98.0704190902430.1728@nqvgln>

On Thu, 19 Apr 2007, Hans Hagen wrote:

> Taco Hoekwater wrote:
>> Aditya Mahajan wrote:
>>
>>> Inspired by Alexander Perlis' macros in
>>> http://www.tug.org/TUGboat/Articles/tb22-4/tb72perlS.pdf
>>> can we have the math equivalent of llap etc. in ConTeXt.
>>>
>>> Ideally, \llap etc. should be modified so that they work in math mode
>>> also (just like \smash and \phantom). If not, we can have the
>>> following simple definitions:
>>>
>>>
>>
>> Some extra \do 's fix up the textmode comands (supp-box.tex):
>>
>> \def\dorlap{\begingroup\dowithnextbox{\normalhbox to \zeropoint
>>    {\flushnextbox\normalhss}\endgroup}\normalhbox}
>>
>> \def\dollap{\begingroup\dowithnextbox{\normalhbox to \zeropoint
>>    {\normalhss\flushnextbox}\endgroup}\normalhbox}
>>
>> \def\doclap{\begingroup\dowithnextbox{\normalhbox to \zeropoint
>>    {\normalhss\flushnextbox\normalhss}\endgroup}\normalhbox}
>>
>> \def\domathclap{\mathpalette\dodomathclap}
>> \def\dodomathclap#1#2{\doclap{$\m at th#1#2$}}
>>
>> \def\domathllap{\mathpalette\dodomathllap}
>> \def\dodomathllap#1#2{\dollap{$\m at th#1#2$}}
>>
>> \def\domathrlap{\mathpalette\dodomathrlap}
>> \def\dodomathrlap#1#2{\dorlap{$\m at th#1#2$}}
>>
>> \unexpanded\def\rlap{\ifmmode \@EA\domathrlap \else \@EA\dorlap \fi}
>> \unexpanded\def\llap{\ifmmode \@EA\domathllap \else \@EA\dollap \fi}
>> \unexpanded\def\clap{\ifmmode \@EA\domathclap \else \@EA\doclap \fi}
>>
>>
> or
>
> \unexpanded\def\rlap{\mathortext\domathrlap\dorlap}
> \unexpanded\def\llap{\mathortext\domathllap\dollap}
> \unexpanded\def\clap{\mathortext\domathclap\doclap}
>
> before i add this, we need to be sure that llap/rlap are not used in
> math constructs which expect it to behave like an hbox

Maybe change \dorlap to \dotextrlap. Remembering that \dotextrlap is 
for text mode and \domathrlap is for math mode is easier than 
remembering the difference between \dorlap and \domathrlap.

Does it make sense to make tlap and blap behave in the same way? I do 
not know of any advantage of them right away, but it may be better to 
be consistent with all commands of one 'category'.

Aditya



From adityam at umich.edu  Mon Apr 23 04:31:13 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Sun, 22 Apr 2007 22:31:13 -0400 (EDT)
Subject: [dev-context] Question about definition of \frac
Message-ID: <alpine.WNT.0.98.0704222226300.2708@nqvgln>

In core-mat.tex \frac is defined as

\def\dofrac#1#2#3{\relax\mathematics{{{#1{#2}}\over{#1{#3}}}}}

\unexpanded\def\frac
   {\dofrac\mathstyle}

Shouldn't that be


\def\dofrac#1#2#3{\relax\mathematics{{\begingroup#1{#2}\endgroup\over#1{#3}}}}

Basically, \begingroup ... endgroup instead of bgroup ... egroup 
generated by the braces. Compare the definition of \frac in core-mat 
with the definition of genfrac in m-newmat. I am not sure whether this 
really creates a difference or not, but generally most math definition 
try to avoid creating an extra group. Even LaTeX defines \frac as

\def\frac#1#2{{\begingroup#1\endgroup\over#2}}

So, should the definition of \dofrac be changed?

Aditya

From taco at elvenkind.com  Mon Apr 23 11:16:46 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 23 Apr 2007 11:16:46 +0200
Subject: [dev-context] Question about definition of \frac
In-Reply-To: <alpine.WNT.0.98.0704222226300.2708@nqvgln>
References: <alpine.WNT.0.98.0704222226300.2708@nqvgln>
Message-ID: <462C797E.3050700@elvenkind.com>



Aditya Mahajan wrote:
> 
> So, should the definition of \dofrac be changed?

Perhaps. I don't think it has any actual impact being a
little more efficient.

Cheers, Taco

From taco at elvenkind.com  Mon Apr 23 11:23:05 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 23 Apr 2007 11:23:05 +0200
Subject: [dev-context] Question about definition of \frac
In-Reply-To: <462C797E.3050700@elvenkind.com>
References: <alpine.WNT.0.98.0704222226300.2708@nqvgln>
	<462C797E.3050700@elvenkind.com>
Message-ID: <462C7AF9.5030603@elvenkind.com>



Taco Hoekwater wrote:
> 
> Aditya Mahajan wrote:
>> So, should the definition of \dofrac be changed?
> 
> Perhaps. I don't think it has any actual impact being a
                                                besides
> little more efficient.
> 
> Cheers, Taco
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context

From adityam at umich.edu  Mon Apr 23 19:08:07 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 23 Apr 2007 13:08:07 -0400 (EDT)
Subject: [dev-context] [NTG-context] llap, rlap, clap equivalent for math
In-Reply-To: <462756F5.9060202@wxs.nl>
References: <alpine.WNT.0.98.0704181926330.3440@nqvgln>
	<462749BA.1080807@elvenkind.com> <462756F5.9060202@wxs.nl>
Message-ID: <alpine.WNT.0.98.0704231255140.1092@nqvgln>

On Thu, 19 Apr 2007, Hans Hagen wrote:
> before i add this, we need to be sure that llap/rlap are not used in
> math constructs which expect it to behave like an hbox

Continuing on the same thread, I found that the above definitions for 
(c|l|r)lap is not always adequate for math mode. The main problem is 
that tex does not provide a cramped primitive. The problem has been 
discussed with a solution proposed by Knuth 
http://www.ctan.org/tex-archive/digests/tex-implementors/042 and 
implemented for LaTeX in the mathtools package. Attached is my attempt 
to port it to ConTeXt. Please look at the \cramped and \crampedclap 
macros carefully before deciding to include them in the core. I have 
just copied most of the code from Knuth's definition and do not really 
understand what is happening here.

Aditya
-------------- next part --------------
\unprotect

% Taco's definition of \tex{rlap}, etc.

\def\dorlap{\begingroup\dowithnextbox{\normalhbox to \zeropoint
   {\flushnextbox\normalhss}\endgroup}\normalhbox}

\def\dollap{\begingroup\dowithnextbox{\normalhbox to \zeropoint
   {\normalhss\flushnextbox}\endgroup}\normalhbox}

\def\doclap{\begingroup\dowithnextbox{\normalhbox to \zeropoint
   {\normalhss\flushnextbox\normalhss}\endgroup}\normalhbox}

\def\domathclap{\mathpalette\dodomathclap}
\def\dodomathclap#1#2{\doclap{$\m at th#1#2$}}

\def\domathllap{\mathpalette\dodomathllap}
\def\dodomathllap#1#2{\dollap{$\m at th#1#2$}}

\def\domathrlap{\mathpalette\dodomathrlap}
\def\dodomathrlap#1#2{\dorlap{$\m at th#1#2$}}

\unexpanded\def\rlap{\mathortext\domathrlap\dorlap}
\unexpanded\def\llap{\mathortext\domathllap\dollap}
\unexpanded\def\clap{\mathortext\domathclap\doclap}

%D There is a problem with using these in the math mode. The problem is
%D not with the macros, but with \TEX. \TEX provides no primitive to
%D force in cramped math mode. Here is a macro that does so. It is based
%D on a solution by Don Knuth
%D \userul{http://www.ctan.org/tex-archive/digests/tex-implementors/042}.
%D The explanation is by Morten H?gholm's mathtools package.

\def\cramped
  {\mathpalette\docramped}

\def\docramped#1#2%
%D Force a cramped style by issuing a non||existing radical
  {\setbox\scratchbox=\hbox{\nulldelimiterspace=\zeropoint%
                            $\m at th#1\radical\zerocount{#2}$}
%D Make sure the height is correct
   \ifx#1\displaystyle
      \scratchdimen=\fontdimen8\textfont3
      \advance\scratchdimen .25\fontdimen5\textfont2
   \else
      \scratchdimen=1.25\fontdimen8
      \ifx#1\textstyle\textfont
      \else
        \ifx#1\scriptstyle\scriptfont\else\scriptscriptfont\fi
      \fi      
      3
    \fi
    \advance\scratchdimen-\ht\scratchbox
    \ht\scratchbox=-\scratchdimen
    \box\scratchbox}

%D Now we provide commands for cramped styles

\def\crampedclap
  {\mathpalette\docrampedclap}

\def\docrampedclap#1#2%
  {{}\doclap{\docramped #1{#2}}}

\def\crampedllap
  {\mathpalette\docrampedllap}

\def\docrampedllap#1#2%
  {{}\dollap{\docramped #1{#2}}}

\def\crampedrlap
  {\mathpalette\docrampedrlap}

\def\docrampedrlap#1#2%
  {{}\dorlap{\docramped #1{#2}}}
\protect

\starttext

Look at the output of
\startbuffer
\startformula
  \sum_{\clap{a^2 < b^2 < c^2}} \quad
  \sum_{a^2 < b^2 < c^2}
\stopformula
\stopbuffer
\typebuffer{\switchtobodyfont[24pt]\getbuffer}

The formula on the left is not set in cramped style. The above
\tex{cramped} macro typesets in cramped style. So, we can use
\startbuffer
\startformula
  \sum_{\clap{\cramped a^2 < b^2 < c^2}} \quad
  \sum_{a^2 < b^2 < c^2}
\stopformula
\stopbuffer
\typebuffer{\switchtobodyfont[24pt]\getbuffer}

But \type{\clap{\cramped ... }} typesets its arguments 16 times (which
is true for any command recursively using \tex{mathpalette}. So, we
provide a \tex{cramped...} version of \tex{clap} etc.

\startbuffer
\startformula
  \sum_{\crampedclap{a^2 < b^2 < c^2}} \quad
  \sum_{a^2 < b^2 < c^2}
\stopformula
\stopbuffer
\typebuffer{\switchtobodyfont[24pt]\getbuffer}

\stoptext

From adityam at umich.edu  Tue Apr 24 08:20:49 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Tue, 24 Apr 2007 02:20:49 -0400 (EDT)
Subject: [dev-context] "Improved" substack macro
Message-ID: <alpine.WNT.0.98.0704240210020.2280@nqvgln>

Hi Hans and Taco,

The \startsubstack macro in core-mat places the subscript lower than 
the atop. See for example

\startformula
\sum_{\startsubstack a \NR b \NR \stopsubstack}
\sum_{\scriptstyle a \atop \scriptstyle}
\stopformula

I have tried to get the correct spacing by copying what amsmath does. 
When you have time, can you look if it makes sense to provide both the 
substack macros.

Aditya


\def\startsubstackA
   {\vcenter\bgroup
     \baselineskip\fontdimen10 \scriptfont\plustwo
     \advance\baselineskip\fontdimen12 \scriptfont\plustwo
     \lineskip\plusthree\fontdimen8 \scriptfont\plusthree
     \lineskiplimit\lineskip
     \let\stopmathmode\relax
     \def\NC{\domatrixNC}%
     \def\MC{\domatrixNC\startmathmode}%
     \global\let\domatrixNC\dodomatrixNC
     \def\NR
       {\stopmathmode
        \global\let\domatrixNC\dodomatrixNC
        \crcr}%
     \mathsurround\zeropoint
     \everycr\emptytoks
     \halign\bgroup\hfil$\scriptstyle##$\hfil\crcr}

\def\stopsubstackA
   {\crcr
    \egroup
    \egroup}

\starttext

\startformula
   \sum_{\startsubstack a \NR b \NR c \NR \stopsubstack}
   \sum_{a}
   \sum_{\startsubstackA a \NR b \NR c \NR \stopsubstackA}
   \sum_{\scriptstyle a \atop \scriptstyle b}
\stopformula

\stoptext


From sanjoy at mrao.cam.ac.uk  Wed Apr 25 17:05:56 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Wed, 25 Apr 2007 16:05:56 +0100
Subject: [dev-context] garden: filename capitalization
Message-ID: <E1Hgj48-0007YU-00@skye.ra.phy.cam.ac.uk>

Patrick,

Can one stop the wiki upload from capitalizing the first letter of
uploaded filenames?  Case matters on most Unix systems (not sure about
Mac OS X though), so for example a T-bib.tex won't be as much use as a
t-bib.tex.

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From patrick at gundla.ch  Wed Apr 25 21:19:35 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed, 25 Apr 2007 21:19:35 +0200
Subject: [dev-context] garden update/downtime!?
Message-ID: <m1tzv4b6t4.fsf@levana.de>

Hi all,

I am thinking about updating the garden server to debian 4.0 this
weekend. It might be down some time. Don't hit me if everything
breaks!

Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net

From taco at elvenkind.com  Wed Apr 25 21:41:33 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 25 Apr 2007 21:41:33 +0200
Subject: [dev-context] garden update/downtime!?
In-Reply-To: <m1tzv4b6t4.fsf@levana.de>
References: <m1tzv4b6t4.fsf@levana.de>
Message-ID: <462FAEED.30006@elvenkind.com>

Patrick Gundlach wrote:
> Hi all,
> 
> I am thinking about updating the garden server to debian 4.0 this
> weekend. It might be down some time. Don't hit me if everything
> breaks!

Good luck!

Taco

From mojca.miklavec.lists at gmail.com  Wed Apr 25 23:24:44 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 25 Apr 2007 23:24:44 +0200
Subject: [dev-context] garden: filename capitalization
In-Reply-To: <E1Hgj48-0007YU-00@skye.ra.phy.cam.ac.uk>
References: <E1Hgj48-0007YU-00@skye.ra.phy.cam.ac.uk>
Message-ID: <6faad9f00704251424k6cd8446dve38cca394c3e1d6c@mail.gmail.com>

On 4/25/07, Sanjoy Mahajan wrote:
> Patrick,
>
> Can one stop the wiki upload from capitalizing the first letter of
> uploaded filenames?  Case matters on most Unix systems (not sure about
> Mac OS X though), so for example a T-bib.tex won't be as much use as a
> t-bib.tex.

There is

/**
 * Set this to false to avoid forcing the first letter of links to capitals.
 * WARNING: may break links! This makes links COMPLETELY case-sensitive. Links
 * appearing with a capital at the beginning of a sentence will *not* go to the
 * same place as links in the middle of a sentence using a lowercase initial.
 */
$wgCapitalLinks = true;

in includes/DefaultSettings.php

If people agree to change the behaviour ... there is no reason why it
shouldn't be changed.

I don't have any preference because I got used to it (I hated it at
the beginning, but on the other hand I understand that it causes less
confusion, because there is no clear idea what should be capitalised
and what not, at least not in English). The few exceptions where the
first letter matters (like the one you mentioned) are a price to pay
if you decide for "case insensitivity".

Mojca

From patrick at gundla.ch  Thu Apr 26 06:48:12 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu, 26 Apr 2007 06:48:12 +0200
Subject: [dev-context] garden: filename capitalization
In-Reply-To: <E1Hgj48-0007YU-00@skye.ra.phy.cam.ac.uk> (Sanjoy Mahajan's
	message of "Wed, 25 Apr 2007 16:05:56 +0100")
References: <E1Hgj48-0007YU-00@skye.ra.phy.cam.ac.uk>
Message-ID: <m1ps5rbv1v.fsf@levana.de>

Hi Sanjoy,

> Can one stop the wiki upload from capitalizing the first letter of
> uploaded filenames?  Case matters on most Unix systems (not sure about
> Mac OS X though), so for example a T-bib.tex won't be as much use as a
> t-bib.tex.

This is annoying, true. I've changed this, let's see if it breaks the
other linking. 

Patrick

From patrick at gundla.ch  Fri May  4 14:46:14 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Fri, 04 May 2007 14:46:14 +0200
Subject: [dev-context] mailarchive 2007?
Message-ID: <m1y7k47o4p.fsf@levana.de>

Hello everybody,

anyone out there has a correct/full archive of the ntg-context
mailinglist 2007 upto now? The one on
<http://www.ntg.nl/pipermail/ntg-context/> has all '@' replaced by 
' at ' which makes it hard to use for the mailinglist archive at
contextgarden.net. 

While moving the archive to the new server, I have found out that
because of a stupid misconfiguration the server didn't save the mails
to the disk.

Patrick

From arthur.reutenauer at normalesup.org  Fri May  4 16:43:23 2007
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 4 May 2007 16:43:23 +0200
Subject: [dev-context] mailarchive 2007?
In-Reply-To: <m1y7k47o4p.fsf@levana.de>
References: <m1y7k47o4p.fsf@levana.de>
Message-ID: <20070504144323.GD21786@phare.normalesup.org>

  I should have this (in plain mbox format); just give some time to
unpack my things from the long trip from Bachotek to Paris through
Dordrecht and I'll come back to you ;-)

From patrick at gundla.ch  Fri May  4 17:08:44 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Fri, 04 May 2007 17:08:44 +0200
Subject: [dev-context] mailarchive 2007?
In-Reply-To: <m1y7k47o4p.fsf@levana.de> (Patrick Gundlach's message of "Fri,
	04 May 2007 14:46:14 +0200")
References: <m1y7k47o4p.fsf@levana.de>
Message-ID: <m1ps5g7hj7.fsf@levana.de>

Hi,

> anyone out there has a correct/full archive of the ntg-context
> mailinglist 2007 upto now? 

Sorry for the noise. I have found out that the archiver (lurker)
stores the mails in mbox format but gzipped - so all mails recovered!

Thanks also to Arthur for the offer.

Patrick

From mojca.miklavec.lists at gmail.com  Mon May  7 23:08:30 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 7 May 2007 23:08:30 +0200
Subject: [dev-context] XeTeX and \externalfigure problem
Message-ID: <6faad9f00705071408x5c886c42sbaf23a4770fc6b10@mail.gmail.com>

Hello Hans,

what has happend to \externalfigure[a] in XeTeX?

With \externalfigure[a] I now get

    ! Unable to load picture or PDF file './a.png}'.

Thanks,
    Mojca

From pragma at wxs.nl  Mon May  7 23:56:06 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 07 May 2007 23:56:06 +0200
Subject: [dev-context] XeTeX and \externalfigure problem
In-Reply-To: <6faad9f00705071408x5c886c42sbaf23a4770fc6b10@mail.gmail.com>
References: <6faad9f00705071408x5c886c42sbaf23a4770fc6b10@mail.gmail.com>
Message-ID: <463FA076.3050703@wxs.nl>

Mojca Miklavec wrote:
> Hello Hans,
>
> what has happend to \externalfigure[a] in XeTeX?
>
> With \externalfigure[a] I now get
>
>     ! Unable to load picture or PDF file './a.png}'.
>
>   
looks like an xetex message to me (see spec-xet) 

doesn't xetex support png? 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From mojca.miklavec.lists at gmail.com  Tue May  8 00:30:59 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 8 May 2007 00:30:59 +0200
Subject: [dev-context] XeTeX and \externalfigure problem
In-Reply-To: <463FA076.3050703@wxs.nl>
References: <6faad9f00705071408x5c886c42sbaf23a4770fc6b10@mail.gmail.com>
	<463FA076.3050703@wxs.nl>
Message-ID: <6faad9f00705071530u11e91a64i1825f187ff7ee17c@mail.gmail.com>

On 5/7/07, Hans Hagen wrote:
> Mojca Miklavec wrote:
> > Hello Hans,
> >
> > what has happend to \externalfigure[a] in XeTeX?
> >
> > With \externalfigure[a] I now get
> >
> >     ! Unable to load picture or PDF file './a.png}'.
> >
> >
> looks like an xetex message to me (see spec-xet)
>
> doesn't xetex support png?

It does, but ConTeXt seems to ask for './a.png}' with an additional }
at the end.

If I actually create a figure with that name (cp a.png "a.png}"),
ConTeXt runs "normally", but I get

(\end occurred inside a group at level 1)

### simple group (level 1) entered at line 3 ({)
### bottom level
No pages of output.

It must be some kind of a little typo somewhere.

Thanks,
    Mojca

From pragma at wxs.nl  Tue May  8 11:38:33 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 08 May 2007 11:38:33 +0200
Subject: [dev-context] XeTeX and \externalfigure problem
In-Reply-To: <6faad9f00705071530u11e91a64i1825f187ff7ee17c@mail.gmail.com>
References: <6faad9f00705071408x5c886c42sbaf23a4770fc6b10@mail.gmail.com>
	<463FA076.3050703@wxs.nl>
	<6faad9f00705071530u11e91a64i1825f187ff7ee17c@mail.gmail.com>
Message-ID: <46404519.8030204@wxs.nl>

Mojca Miklavec wrote:
> On 5/7/07, Hans Hagen wrote:
>> Mojca Miklavec wrote:
>> > Hello Hans,
>> >
>> > what has happend to \externalfigure[a] in XeTeX?
>> >
>> > With \externalfigure[a] I now get
>> >
>> >     ! Unable to load picture or PDF file './a.png}'.
>> >
>> >
>> looks like an xetex message to me (see spec-xet)
>>
>> doesn't xetex support png?
>
> It does, but ConTeXt seems to ask for './a.png}' with an additional }
> at the end.
>
> If I actually create a figure with that name (cp a.png "a.png}"),
> ConTeXt runs "normally", but I get
>
> (\end occurred inside a group at level 1)
>
> ### simple group (level 1) entered at line 3 ({)
> ### bottom level
> No pages of output.
>
> It must be some kind of a little typo somewhere.

you can try to add some messages to

\def\xtxhandleotherimage
  {\XeTeXpicfile "\@@DriverImageFile"
     \ifdim\@@DriverImageWidth >\zeropoint \!!width  \@@DriverImageWidth \space\fi
     \ifdim\@@DriverImageHeight>\zeropoint \!!height \@@DriverImageHeight      \fi
   \relax}

\def\dogetXTXfiguresize
  {\setbox\foundexternalfigure\vbox{\XeTeXpicfile "\@@DriverImageFile"}%
   \xdef\analyzedfigurewidth {\the\wd\foundexternalfigure}%
   \xdef\analyzedfigureheight{\the\ht\foundexternalfigure}}


and see what 

\@@DriverImageFile

is in your case 

Hans

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From mojca.miklavec.lists at gmail.com  Tue May  8 13:56:51 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 8 May 2007 13:56:51 +0200
Subject: [dev-context] XeTeX and \externalfigure problem
In-Reply-To: <46404519.8030204@wxs.nl>
References: <6faad9f00705071408x5c886c42sbaf23a4770fc6b10@mail.gmail.com>
	<463FA076.3050703@wxs.nl>
	<6faad9f00705071530u11e91a64i1825f187ff7ee17c@mail.gmail.com>
	<46404519.8030204@wxs.nl>
Message-ID: <6faad9f00705080456h60c3b790xd162fd87dbed0309@mail.gmail.com>

On 5/8/07, Hans Hagen wrote:
> Mojca Miklavec wrote:
> > On 5/7/07, Hans Hagen wrote:
> >> Mojca Miklavec wrote:
> >> > Hello Hans,
> >> >
> >> > what has happend to \externalfigure[a] in XeTeX?
> >> >
> >> > With \externalfigure[a] I now get
> >> >
> >> >     ! Unable to load picture or PDF file './a.png}'.
> >> >
> >> >
> >> looks like an xetex message to me (see spec-xet)
> >>
> >> doesn't xetex support png?
> >
> > It does, but ConTeXt seems to ask for './a.png}' with an additional }
> > at the end.
> >
> > If I actually create a figure with that name (cp a.png "a.png}"),
> > ConTeXt runs "normally", but I get
> >
> > (\end occurred inside a group at level 1)
> >
> > ### simple group (level 1) entered at line 3 ({)
> > ### bottom level
> > No pages of output.
> >
> > It must be some kind of a little typo somewhere.
>
> you can try to add some messages to
>
> \def\xtxhandleotherimage
>   {\XeTeXpicfile "\@@DriverImageFile"
>      \ifdim\@@DriverImageWidth >\zeropoint \!!width  \@@DriverImageWidth \space\fi
>      \ifdim\@@DriverImageHeight>\zeropoint \!!height \@@DriverImageHeight      \fi
>    \relax}
>
> \def\dogetXTXfiguresize
>   {\setbox\foundexternalfigure\vbox{\XeTeXpicfile "\@@DriverImageFile"}%
>    \xdef\analyzedfigurewidth {\the\wd\foundexternalfigure}%
>    \xdef\analyzedfigureheight{\the\ht\foundexternalfigure}}
>
>
> and see what
>
> \@@DriverImageFile
>
> is in your case

I'm sorry for not testing it more thoroughly before reporting.

{\XeTeXpicfile 'a.png'} apparently fails as well, while {\XeTeXpicfile
'a.png' } works OK.

Mojca

From mojca.miklavec.lists at gmail.com  Tue May  8 13:57:45 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 8 May 2007 13:57:45 +0200
Subject: [dev-context] XeTeX and \externalfigure problem
In-Reply-To: <6faad9f00705080456h60c3b790xd162fd87dbed0309@mail.gmail.com>
References: <6faad9f00705071408x5c886c42sbaf23a4770fc6b10@mail.gmail.com>
	<463FA076.3050703@wxs.nl>
	<6faad9f00705071530u11e91a64i1825f187ff7ee17c@mail.gmail.com>
	<46404519.8030204@wxs.nl>
	<6faad9f00705080456h60c3b790xd162fd87dbed0309@mail.gmail.com>
Message-ID: <6faad9f00705080457p74399122r19acd979d5ad955b@mail.gmail.com>

On 5/8/07, Mojca Miklavec wrote:
> On 5/8/07, Hans Hagen wrote:
> > you can try to add some messages to
> >
> > \def\xtxhandleotherimage
> >   {\XeTeXpicfile "\@@DriverImageFile"
> >      \ifdim\@@DriverImageWidth >\zeropoint \!!width  \@@DriverImageWidth \space\fi
> >      \ifdim\@@DriverImageHeight>\zeropoint \!!height \@@DriverImageHeight      \fi
> >    \relax}
> >
> > \def\dogetXTXfiguresize
> >   {\setbox\foundexternalfigure\vbox{\XeTeXpicfile "\@@DriverImageFile"}%
> >    \xdef\analyzedfigurewidth {\the\wd\foundexternalfigure}%
> >    \xdef\analyzedfigureheight{\the\ht\foundexternalfigure}}
> >
> >
> > and see what
> >
> > \@@DriverImageFile
> >
> > is in your case
>
> I'm sorry for not testing it more thoroughly before reporting.
>
> {\XeTeXpicfile 'a.png'} apparently fails as well, while {\XeTeXpicfile
> 'a.png' } works OK.

And yes, \@@DriverImageFile is perfectly OK ...

Mojca

From taco at elvenkind.com  Tue May  8 14:04:20 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 08 May 2007 14:04:20 +0200
Subject: [dev-context] XeTeX and \externalfigure problem
In-Reply-To: <6faad9f00705080456h60c3b790xd162fd87dbed0309@mail.gmail.com>
References: <6faad9f00705071408x5c886c42sbaf23a4770fc6b10@mail.gmail.com>	<463FA076.3050703@wxs.nl>	<6faad9f00705071530u11e91a64i1825f187ff7ee17c@mail.gmail.com>	<46404519.8030204@wxs.nl>
	<6faad9f00705080456h60c3b790xd162fd87dbed0309@mail.gmail.com>
Message-ID: <46406744.3000104@elvenkind.com>



Mojca Miklavec wrote:
> I'm sorry for not testing it more thoroughly before reporting.
> 
> {\XeTeXpicfile 'a.png'} apparently fails as well, while {\XeTeXpicfile
> 'a.png' } works OK.

Perhaps because \XeTeXpicfile behaves like \input?

Taco

From pragma at wxs.nl  Tue May  8 16:11:56 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 08 May 2007 16:11:56 +0200
Subject: [dev-context] XeTeX and \externalfigure problem
In-Reply-To: <6faad9f00705080456h60c3b790xd162fd87dbed0309@mail.gmail.com>
References: <6faad9f00705071408x5c886c42sbaf23a4770fc6b10@mail.gmail.com>
	<463FA076.3050703@wxs.nl>
	<6faad9f00705071530u11e91a64i1825f187ff7ee17c@mail.gmail.com>
	<46404519.8030204@wxs.nl>
	<6faad9f00705080456h60c3b790xd162fd87dbed0309@mail.gmail.com>
Message-ID: <4640852C.3050705@wxs.nl>

Mojca Miklavec wrote:
> On 5/8/07, Hans Hagen wrote:
>> Mojca Miklavec wrote:
>> > On 5/7/07, Hans Hagen wrote:
>> >> Mojca Miklavec wrote:
>> >> > Hello Hans,
>> >> >
>> >> > what has happend to \externalfigure[a] in XeTeX?
>> >> >
>> >> > With \externalfigure[a] I now get
>> >> >
>> >> >     ! Unable to load picture or PDF file './a.png}'.
>> >> >
>> >> >
>> >> looks like an xetex message to me (see spec-xet)
>> >>
>> >> doesn't xetex support png?
>> >
>> > It does, but ConTeXt seems to ask for './a.png}' with an additional }
>> > at the end.
>> >
>> > If I actually create a figure with that name (cp a.png "a.png}"),
>> > ConTeXt runs "normally", but I get
>> >
>> > (\end occurred inside a group at level 1)
>> >
>> > ### simple group (level 1) entered at line 3 ({)
>> > ### bottom level
>> > No pages of output.
>> >
>> > It must be some kind of a little typo somewhere.
>>
>> you can try to add some messages to
>>
>> \def\xtxhandleotherimage
>>   {\XeTeXpicfile "\@@DriverImageFile"
>>      \ifdim\@@DriverImageWidth >\zeropoint \!!width  
>> \@@DriverImageWidth \space\fi
>>      \ifdim\@@DriverImageHeight>\zeropoint \!!height 
>> \@@DriverImageHeight      \fi
>>    \relax}
>>
>> \def\dogetXTXfiguresize
>>   {\setbox\foundexternalfigure\vbox{\XeTeXpicfile "\@@DriverImageFile"}%
>>    \xdef\analyzedfigurewidth {\the\wd\foundexternalfigure}%
>>    \xdef\analyzedfigureheight{\the\ht\foundexternalfigure}}
>>
>>
>> and see what
>>
>> \@@DriverImageFile
>>
>> is in your case
>
> I'm sorry for not testing it more thoroughly before reporting.
>
> {\XeTeXpicfile 'a.png'} apparently fails as well, while {\XeTeXpicfile
> 'a.png' } works OK.
ok, so we need to add \relax after the 'name' ... looks like xetex uses 
the messy \input scanner here (strange because the ' already is 
delimiting the name; looks like a xetex bug to me

Hans

-- 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From taco at elvenkind.com  Thu May 10 09:57:46 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 10 May 2007 09:57:46 +0200
Subject: [dev-context] silly wiki question
Message-ID: <4642D07A.6030501@elvenkind.com>


What's up with the count in braces? What does it mean?

    ConTeXt on Excursion, translations (diff; hist) . .  (+2)

etc.

Taco



From patrick at gundla.ch  Thu May 10 10:11:16 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu, 10 May 2007 10:11:16 +0200
Subject: [dev-context] silly wiki question
In-Reply-To: <4642D07A.6030501@elvenkind.com> (Taco Hoekwater's message of
	"Thu, 10 May 2007 09:57:46 +0200")
References: <4642D07A.6030501@elvenkind.com>
Message-ID: <m1hcql5c9n.fsf@levana.de>

Hi Taco,

> What's up with the count in braces? What does it mean?
>
>     ConTeXt on Excursion, translations (diff; hist) . .  (+2)

I just looked it up (didn't know before):

\from[http://en.wikipedia.org/wiki/Help:Recent_changes]

\startquote
(+100) refers to the number of bytes by which an edit changed the
article. Negative means the article got shorter.
\stopquote

\bye,

 Patrick

BTW: the mediawiki is version 1.10.0 now. Updated everything on the server.

From taco at elvenkind.com  Thu May 10 10:19:13 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 10 May 2007 10:19:13 +0200
Subject: [dev-context] silly wiki question
In-Reply-To: <m1hcql5c9n.fsf@levana.de>
References: <4642D07A.6030501@elvenkind.com> <m1hcql5c9n.fsf@levana.de>
Message-ID: <4642D581.4030101@elvenkind.com>



Patrick Gundlach wrote:
> Hi Taco,
> 
>> What's up with the count in braces? What does it mean?
>>
>>     ConTeXt on Excursion, translations (diff; hist) . .  (+2)
> 
> I just looked it up (didn't know before):
> 
> \from[http://en.wikipedia.org/wiki/Help:Recent_changes]
> 
> \startquote
> (+100) refers to the number of bytes by which an edit changed the
> article. Negative means the article got shorter.
> \stopquote
> 
> \bye,
> 
>  Patrick
> 
> BTW: the mediawiki is version 1.10.0 now. Updated everything on the server.

I already guessed there was an update at the heart of it :-)

Thanks, Taco

From preining at logic.at  Tue May 15 16:27:41 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 15 May 2007 16:27:41 +0200
Subject: [dev-context] New location of Debian TeX packages for Etch
Message-ID: <20070515142741.GP13847@gamma.logic.tuwien.ac.at>

Hi all!

Just to note, the location of all the TeX files (usable for Etch) has
changed:

texlive and tex-common
	deb http://people.debian.org/~preining/TeX/ tl2007/
	deb-src http://people.debian.org/~preining/TeX/ tl2007/
lmodern
	deb http://people.debian.org/~preining/TeX/ lmodern/
	deb-src http://people.debian.org/~preining/TeX/ lmodern/
context
	deb http://people.debian.org/~preining/TeX/ context/
	deb-src http://people.debian.org/~preining/TeX/ context/

Please tell me in case you experience problems. The web page on the
tug.org server
	www.tug.org/texlive/debian.html
has already been updated.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
`...and the Universe,' continued the waiter, determined
not to be deflected on his home stretch, `will explode
later for your pleasure.'
Ford's head swivelled slowly towards him. He spoke with
feeling.
What sort of drinks do you serve in this
place?'
The waiter laughed a polite little waiter's laugh.
I think sir has perhaps misunderstood me.'
`Oh, I hope not,' breathed Ford.
                 --- Ford in paradise.
                 --- Douglas Adams, The Hitchhikers Guide to the Galaxy

From sanjoy at mrao.cam.ac.uk  Wed May 16 03:50:20 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Wed, 16 May 2007 02:50:20 +0100
Subject: [dev-context] New location of Debian TeX packages for Etch
In-Reply-To: Your message of "Tue, 15 May 2007 16:27:41 +0200."
	<20070515142741.GP13847@gamma.logic.tuwien.ac.at> 
Message-ID: <E1Ho8ei-0004zI-00@skye.ra.phy.cam.ac.uk>

>       deb-src http://people.debian.org/~preining/TeX/ tl2007/
> 	deb-src http://people.debian.org/~preining/TeX/ lmodern/
> 	deb-src http://people.debian.org/~preining/TeX/ context/

I found all the src packages in one place rather than subdivided into
tl2007 etc., and ended up with these lines for /etc/apt/sources.list :

deb-src http://people.debian.org/~preining/TeX/ src/
deb http://people.debian.org/~preining/TeX/ tl2007/
deb http://people.debian.org/~preining/TeX/ lmodern/
deb http://people.debian.org/~preining/TeX/ context/

-Sanjoy

`Not all those who wander are lost.' (J.R.R. Tolkien)

From preining at logic.at  Wed May 16 07:26:28 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 16 May 2007 07:26:28 +0200
Subject: [dev-context] New location of Debian TeX packages for Etch
In-Reply-To: <E1Ho8ei-0004zI-00@skye.ra.phy.cam.ac.uk>
References: <20070515142741.GP13847@gamma.logic.tuwien.ac.at>
	<E1Ho8ei-0004zI-00@skye.ra.phy.cam.ac.uk>
Message-ID: <20070516052628.GF9536@gamma.logic.tuwien.ac.at>

On Mit, 16 Mai 2007, Sanjoy Mahajan wrote:
> I found all the src packages in one place rather than subdivided into
> tl2007 etc., and ended up with these lines for /etc/apt/sources.list :

Nearly, the right thing is

TeX Live:
	deb http://people.debian.org/~preining/TeX/ tl2007/
	deb-src http://people.debian.org/~preining/TeX/ src/

LModern:
	deb http://people.debian.org/~preining/TeX/ lmodern/
	deb-src http://people.debian.org/~preining/TeX/ lmodern/

ConTeXt:
	deb http://people.debian.org/~preining/TeX/ context/
	deb-src http://people.debian.org/~preining/TeX/ context/

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
ZAPHOD	Hey, this rock...
FORD	Marble...
ZAPHOD	Marble...
FORD	Ice-covered marble...
ZAPHOD	Right... it's as slippery as... as... What's the slipperiest
	thing you can think of?
FORD	At the moment? This marble.
ZAPHOD	Right. This marble is as slippery as this marble.
                 --- Zaphod and Ford trying to get a grip on things in
                 --- Brontitall, Fit the Tenth.
                 --- Douglas Adams, The Hitchhikers Guide to the Galaxy

From preining at logic.at  Thu May 17 12:16:42 2007
From: preining at logic.at (Norbert Preining)
Date: Thu, 17 May 2007 12:16:42 +0200
Subject: [dev-context] New location of Debian TeX packages for Etch
In-Reply-To: <20070515142741.GP13847@gamma.logic.tuwien.ac.at>
References: <20070515142741.GP13847@gamma.logic.tuwien.ac.at>
Message-ID: <20070517101642.GD13262@gamma.logic.tuwien.ac.at>

Hi all!

I just want all to inform that thanks to Thomas A. Schmitz we have now
arch=powerpc Debian packages at the usual locations, so people with
Apples and Etch now can use the same packages.

Thanks to Thomas for compiling.

Just as a reminder:

texlive and tex-common
 	deb http://people.debian.org/~preining/TeX/ tl2007/
 	deb-src http://people.debian.org/~preining/TeX/ src/

lmodern
	deb http://people.debian.org/~preining/TeX/ lmodern/
	deb-src http://people.debian.org/~preining/TeX/ lmodern/

context
 	deb http://people.debian.org/~preining/TeX/ context/
 	deb-src http://people.debian.org/~preining/TeX/ context/
 
Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>                    Universit? di Siena
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
SHALUNT (n.)
One who wears Trinidad and Tobago T-shirts on the beach in Bali to
prove they didn't just win the holiday in a competition or anything.
			--- Douglas Adams, The Meaning of Liff

From adityam at umich.edu  Tue May 22 02:37:38 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 21 May 2007 20:37:38 -0400 (EDT)
Subject: [dev-context] Some math improvements
Message-ID: <alpine.WNT.0.99.0705212018060.3576@nqvgln>

Hi Hans and Taco,

I am attaching the math enhancements that I have been promising for 
about for some days^H^H^H^Hweeks now. Here are the changes.

1. Improved \llap, \rlap, \clap that work in both math and text mode 
(Taco's code)

2. A \cramped macro to go into cramped mode (based on Knuth's code)

3. \crampedllap \crampedrlap, \crampedclap for the equivalents to 
\llap etc which typesets its contents in cramped mode (well, I kinda 
figured that out on my own :)

4. An improved substack macro, with improved spacing. (Based on 
amsmath's substack macro). Taco, does it make sense to surround 
substack with a group, which will save some typing
\sum_startsubstack whatever \stopsubstack or are there any side 
effects? In the code, I do not have the extra group.

5. Definitions for iint, iiint, iiiint (for those who can't count i's 
like me, you can use \repeatintegral{1}, \repeatintegral{2}, etc. 
Maybe, we should have the more readable \doubleintegral, 
\tripeintegral, \quadintegral also). This is based on amsmath code, 
and tries to use correct spacing for \iint\limits_{....}. BTW, does 
anyone wish that the limits with \int were configurable rather than 
defaulting to \nolimits? amsmath provides this feature, but I have 
personally never seen it being used. It is not too difficult to 
implement.


6. A definition for splitfrac, which is useful for multi-line 
fractions. Based on Michael Downes' code.

.... I also had something for \intertext, but realized that 
\intertext does not honor indentations. I will look into that first, 
before posting the code.


Now, I need to do collect everthing for theorems. Hopefully, core-des 
has not changed since I started working on it...

Aditya
-------------- next part --------------
%AM: This should go to supp-box.tex. 

%D \macros
%D   {llap, rlap, tlap, blap, clap}
%D
%D Some well known friends, but we implement them our own
%D way. We want the macros to work in both math and text mode.

\def\dorlap{\begingroup\dowithnextbox{\normalhbox to \zeropoint
   {\flushnextbox\normalhss}\endgroup}\normalhbox}

\def\dollap{\begingroup\dowithnextbox{\normalhbox to \zeropoint
   {\normalhss\flushnextbox}\endgroup}\normalhbox}

\def\doclap{\begingroup\dowithnextbox{\normalhbox to \zeropoint
   {\normalhss\flushnextbox\normalhss}\endgroup}\normalhbox}

\def\domathclap{\mathpalette\dodomathclap}
\def\dodomathclap#1#2{\doclap{$\m at th#1#2$}}

\def\domathllap{\mathpalette\dodomathllap}
\def\dodomathllap#1#2{\dollap{$\m at th#1#2$}}

\def\domathrlap{\mathpalette\dodomathrlap}
\def\dodomathrlap#1#2{\dorlap{$\m at th#1#2$}}

\unexpanded\def\rlap{\mathortext\domathrlap\dorlap}
\unexpanded\def\llap{\mathortext\domathllap\dollap}
\unexpanded\def\clap{\mathortext\domathclap\doclap}

%AM: I do not know where this belongs. Perhaps supp-mat.tex

%D \macros {cramed}
%D
%D \TEX provides no primitive to force in cramped math mode.
%D Here is a macro that does so. It is based on a solution by
%D Don Knuth
%D \userul{http://www.ctan.org/tex-archive/digests/tex-implementors/042}.
%D The explanation is by Morten H?gholm's mathtools package.

\def\cramped
  {\mathpalette\docramped}

\def\docramped#1#2%
%D Force a cramped style by issuing a non||existing radical
  {\setbox\scratchbox=\hbox{\nulldelimiterspace=\zeropoint%
                            $\m at th#1\radical\zerocount{#2}$}
%D Make sure the height is correct
   \ifx#1\displaystyle
      \scratchdimen=\fontdimen8\textfont3
      \advance\scratchdimen .25\fontdimen5\textfont2
   \else
      \scratchdimen=1.25\fontdimen8
      \ifx#1\textstyle\textfont
      \else
        \ifx#1\scriptstyle\scriptfont\else\scriptscriptfont\fi
      \fi      
      3
    \fi
    \advance\scratchdimen-\ht\scratchbox
    \ht\scratchbox=-\scratchdimen
    \box\scratchbox}

%AM: Not sure about these either. Either supp-box or supp-mat
%AM: core-mat.

%D \macros 
%D    {cramedllap, crampedrlap, crampedclap}
%D In many cases, one wants to use the \tex{clap} macro in
%D math mode while using subscripts. Normally, subscripts are
%D in cramped mode, and these macros allow you to go to
%D cramped mode. For example
%D \startbuffer
%D \startformula
%D   \sum_{a^2 < b^2 < c^2} \quad
%D   \sum_{\clap{a^2 < b^2 < c^2}} \quad
%D   \sum_{\crampedclap{a^2 < b^2 < c^2}}
%D \stopformula
%D \stopbuffer
%D \typebuffer{\switchtobodyfont[24pt]\getbuffer}
%D Notice that \type{\clap{\cramped ... }} would also work,
%D but it requires \TEX\ to typeset it arguments 16 times.

\def\docrampedllap#1#2{{}\dollap{\docramped #1{#2}}}
\def\docrampedrlap#1#2{{}\dorlap{\docramped #1{#2}}}
\def\docrampedclap#1#2{{}\doclap{\docramped #1{#2}}}

\def\crampedllap{\mathpalette\docrampedllap}
\def\crampedrlap{\mathpalette\docrampedrlap}
\def\crampedclap{\mathpalette\docrampedclap}

%AM: This needs to replace the core-mat macros.

%D \macros
%D   {substack}
%D
%D Preliminary code:
%D
%D \startbuffer
%D \startformula
%D    \sum_{%
%D      \startsubstack
%D       i = 1 \NR
%D       i \neq n \NR
%D       i \neq m
%D       \stopsubstack
%D     }a_i
%D \stopformula
%D \stopbuffer
%D \getbuffer which was typed as \typebuffer
%D Notice that these macros give the correct spacing for
%D subscripts. Compare for example
%D \startbuffer
%D \startformula
%D \sum_{\startsubstack a \NR b \NR \stopsubstack} 
%D \text{ and }
%D \sum_{\scriptstyle a \atop \scriptstyle}
%D \stopformula
%D \typebuffer which gives \getbuffer

\def\startsubstack
  {%\bgroup% Is this ok?
   \vcenter\bgroup
    \baselineskip\fontdimen10 \scriptfont\plustwo
    \advance\baselineskip\fontdimen12 \scriptfont\plustwo
    \lineskip\plusthree\fontdimen8 \scriptfont\plusthree
    \lineskiplimit\lineskip
    \let\stopmathmode\relax
    \def\NC{\domatrixNC}%
    \def\MC{\domatrixNC\startmathmode}%
    \global\let\domatrixNC\dodomatrixNC
    \def\NR
      {\stopmathmode
       \global\let\domatrixNC\dodomatrixNC
       \crcr}%
    \mathsurround\zeropoint
    \everycr\emptytoks
    \halign\bgroup\hfil$\scriptstyle##$\hfil\crcr}

\def\stopsubstack
  {\crcr
   \egroup
   \egroup
   %\egroup% Is this ok?
   }

%AM: These need to go into math-tex. Perhaps I should also
%AM: port dotsint?

\def\dointkern  {\mkern-6mu\mathchoice{\mkern-3mu}{}{}{}}

\definemathcommand  [iint]     {\repeatintegral{1}}
\definemathcommand  [iiint]    {\repeatintegral{2}}
\definemathcommand  [iiiint]   {\repeatintegral{3}}

\def\repeatintegral#1%
  {\scratchtoks\emptytoks
   \let\dointlimits\nolimits
   \dorecurse{#1}{\appendtoks \intop \dointkern \to \scratchtoks}
   \appendtoks \intop \dointlimits \to \scratchtoks
   \edef\dodorepeatintegral{\the\scratchtoks}
   \futurelet\next\dorepeatintegral}

%D If the \type{\limits} option is used after \type{\iint}, use
%D \type{\mathop} and fudge the left hand space a bit to make the
%D subscript visually centered.

\def\dorepeatintegral
   {\ifx\limits\next               \dointlimitcorrection
    \else \ifx \displaylimits\next \dointlimitcorrection
    \fi\fi
    \dodorepeatintegral}

\def\dointlimitcorrection
  {\mkern-7mu\mathchoice{\mkern-2mu}{}{}{}%
   \mathop\bgroup
      \mkern7mu\mathchoice{\mkern2mu}{}{}{}%
      \let\dointlimits\egroup}


%AM: This needs to go to m-newmat.tex

%D \macros {splitfrac, splitdfrac}
%D Occasionally one needs to typeset multi||line fractions.
%D These commands use \tex{genfrac} to create such fractions.
%D \startbuffer
%D \startformula
%D      a=\frac{
%D          \splitfrac{xy + xy + xy + xy + xy}
%D                    {+ xy + xy + xy + xy}
%D        }
%D        {z}
%D      =\frac{
%D          \splitdfrac{xy + xy + xy + xy + xy}
%D                    {+ xy + xy + xy + xy}
%D        }
%D        {z}
%D \stopformula
%D \stopbuffer
%D \typebuffer \getbuffer
%D
%D These macros are based on Michael J.~Downes posting on
%D comp.text.tex on 2001/12/06

\def\splitfrac#1#2%
  {\genfrac{}{}{0pt}{1}%
    {\textstyle#1\quad\hfill}%
    {\textstyle\hfill\quad\mathstrut#2}}

\def\splitdfrac#1#2%
  {\genfrac{}{}{0pt}{0}%
    {#1\quad\hfill}
    {\hfill\quad\mathstrut #2}}




From patrick at gundla.ch  Fri May 25 15:52:55 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Fri, 25 May 2007 15:52:55 +0200
Subject: [dev-context] yet another font installer
Message-ID: <m1ps4pxb60.fsf@levana.de>

Hi,

I have just uploaded yet another font installer, similar to texfont,
but only for opentype fonts and a bit limited. I never felt like
reading the texfont manual, so I created my own frontend for the lcdf
type tools. It works very well for me, so you might be interested. I
have started a wiki page describing 'otfinst.rb' (I just see that I
should use another name for it):
<http://wiki.contextgarden.net/otfinst>.

Enjoy!

Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net

From pragma at wxs.nl  Fri May 25 19:46:32 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 25 May 2007 19:46:32 +0200
Subject: [dev-context] Some math improvements
In-Reply-To: <alpine.WNT.0.99.0705212018060.3576@nqvgln>
References: <alpine.WNT.0.99.0705212018060.3576@nqvgln>
Message-ID: <465720F8.9070901@wxs.nl>

Aditya Mahajan wrote:
> Hi Hans and Taco,
>
> I am attaching the math enhancements that I have been promising for 
> about for some days^H^H^H^Hweeks now. Here are the changes.
>
> 1. Improved \llap, \rlap, \clap that work in both math and text mode 
> (Taco's code)
>
> 2. A \cramped macro to go into cramped mode (based on Knuth's code)
made even more cramped:

\def\docramped#1#2%
  {\begingroup % added HH, made even more cramped
   \setbox\scratchbox\hbox
     {\nulldelimiterspace\zeropoint
      $\m at th#1\radical\zerocount{#2}$}%
   \ht\scratchbox-\dimexpr
     \ifx#1\displaystyle
       \fontdimen8\textfont3
       +.25\fontdimen5\textfont2
     \else
        1.25\fontdimen8
          \ifx#1\textstyle
            \textfont
          \else\ifx#1\scriptstyle
            \scriptfont
          \else
            \scriptscriptfont
          \fi \fi
          \plusthree
     \fi
     -\ht\scratchbox
   \relax
   \box\scratchbox
   \endgroup}

>
> 3. \crampedllap \crampedrlap, \crampedclap for the equivalents to 
> \llap etc which typesets its contents in cramped mode (well, I kinda 
> figured that out on my own :)
>
> 4. An improved substack macro, with improved spacing. (Based on 
> amsmath's substack macro). Taco, does it make sense to surround 
> substack with a group, which will save some typing
> \sum_startsubstack whatever \stopsubstack or are there any side 
> effects? In the code, I do not have the extra group.
>
> 5. Definitions for iint, iiint, iiiint (for those who can't count i's 
> like me, you can use \repeatintegral{1}, \repeatintegral{2}, etc. 
> Maybe, we should have the more readable \doubleintegral, 
> \tripeintegral, \quadintegral also). This is based on amsmath code, 
> and tries to use correct spacing for \iint\limits_{....}. BTW, does 
> anyone wish that the limits with \int were configurable rather than 
> defaulting to \nolimits? amsmath provides this feature, but I have 
> personally never seen it being used. It is not too difficult to 
> implement.
>
>
> 6. A definition for splitfrac, which is useful for multi-line 
> fractions. Based on Michael Downes' code.
>
> ..... I also had something for \intertext, but realized that 
> \intertext does not honor indentations. I will look into that first, 
> before posting the code.
>
>
> Now, I need to do collect everthing for theorems. Hopefully, core-des 
> has not changed since I started working on it...
i wonder is this genfrac is ok ... dangling \zeropoint etc 

can you check m-newmath? 

maybe the few useful things in there can go to core-mat anyway 

Hans 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

-------------- next part --------------
A non-text attachment was scrubbed...
Name: m-newmat.tex
Type: text/x-tex
Size: 8900 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070525/eb43e98f/attachment.bin 

From taco at elvenkind.com  Fri May 25 20:05:46 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 25 May 2007 20:05:46 +0200
Subject: [dev-context] Some math improvements
In-Reply-To: <465720F8.9070901@wxs.nl>
References: <alpine.WNT.0.99.0705212018060.3576@nqvgln>
	<465720F8.9070901@wxs.nl>
Message-ID: <4657257A.1080209@elvenkind.com>

Hans Hagen wrote:
> Aditya Mahajan wrote:
>> Hi Hans and Taco,
>>
>> I am attaching the math enhancements that I have been promising for 
>> about for some days^H^H^H^Hweeks now. Here are the changes.
>>
>> 1. Improved \llap, \rlap, \clap that work in both math and text mode 
>> (Taco's code)
>>
>> 2. A \cramped macro to go into cramped mode (based on Knuth's code)

> made even more cramped:

FYI: I saw, but did not test this macro.

> i wonder is this genfrac is ok ... dangling \zeropoint etc

I think it is OK. It is a bit over-engineered, but that is not a
problem with the functioning.

Cheers, Taco

From adityam at umich.edu  Fri May 25 20:42:38 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 25 May 2007 14:42:38 -0400
Subject: [dev-context] Some math improvements
In-Reply-To: <465720F8.9070901@wxs.nl>
References: <alpine.WNT.0.99.0705212018060.3576@nqvgln>
	<465720F8.9070901@wxs.nl>
Message-ID: <20070525144238.4vpdzfjjwgsgcw8g@web.mail.umich.edu>

Quoting Hans Hagen <pragma at wxs.nl>:

> Aditya Mahajan wrote:
>> Hi Hans and Taco,
>>
>> I am attaching the math enhancements that I have been promising for 
>> about for some days^H^H^H^Hweeks now. Here are the changes.
>>
>> 1. Improved \llap, \rlap, \clap that work in both math and text mode 
>> (Taco's code)
>>
>> 2. A \cramped macro to go into cramped mode (based on Knuth's code)
> made even more cramped:
>
> \def\docramped#1#2%
>  {\begingroup % added HH, made even more cramped
>   \setbox\scratchbox\hbox
>     {\nulldelimiterspace\zeropoint
>      $\m at th#1\radical\zerocount{#2}$}%
>   \ht\scratchbox-\dimexpr
>     \ifx#1\displaystyle
>       \fontdimen8\textfont3
>       +.25\fontdimen5\textfont2
>     \else
>        1.25\fontdimen8
>          \ifx#1\textstyle
>            \textfont
>          \else\ifx#1\scriptstyle
>            \scriptfont
>          \else
>            \scriptscriptfont
>          \fi \fi
>          \plusthree
>     \fi
>     -\ht\scratchbox
>   \relax
>   \box\scratchbox
>   \endgroup}

Phew! Took some time to realize that \ht\scratchbox-\dimexp is same as 
\ht\scracthbox=-\dimexp. Rest of it is same as the earlier definition, 
just a bit more easy to understand.

>>
>> 3. \crampedllap \crampedrlap, \crampedclap for the equivalents to 
>> \llap etc which typesets its contents in cramped mode (well, I kinda 
>> figured that out on my own :)
>>
>> 4. An improved substack macro, with improved spacing. (Based on 
>> amsmath's substack macro). Taco, does it make sense to surround 
>> substack with a group, which will save some typing
>> \sum_startsubstack whatever \stopsubstack or are there any side 
>> effects? In the code, I do not have the extra group.
>>
>> 5. Definitions for iint, iiint, iiiint (for those who can't count 
>> i's like me, you can use \repeatintegral{1}, \repeatintegral{2}, 
>> etc. Maybe, we should have the more readable \doubleintegral, 
>> \tripeintegral, \quadintegral also). This is based on amsmath code, 
>> and tries to use correct spacing for \iint\limits_{....}. BTW, does 
>> anyone wish that the limits with \int were configurable rather than 
>> defaulting to \nolimits? amsmath provides this feature, but I have 
>> personally never seen it being used. It is not too difficult to 
>> implement.
>>
>>
>> 6. A definition for splitfrac, which is useful for multi-line 
>> fractions. Based on Michael Downes' code.
>>
>> ..... I also had something for \intertext, but realized that 
>> \intertext does not honor indentations. I will look into that first, 
>> before posting the code.
>>
>>
>> Now, I need to do collect everthing for theorems. Hopefully, 
>> core-des has not changed since I started working on it...
> i wonder is this genfrac is ok ... dangling \zeropoint etc
>
> can you check m-newmath?

Sorry, here are the correct definitions:

\def\splitfrac#1#2%
  {\genfrac{}{}\zeropoint\textstyle%
    {\textstyle#1\quad\hfill}%
    {\textstyle\hfill\quad\mathstrut#2}}

\def\splitdfrac#1#2%
  {\genfrac{}{}\zeropoint\displaystyle%
    {#1\quad\hfill}
    {\hfill\quad\mathstrut #2}}


In LaTeX if the fourth argument of genfrac can be 0-3 as an 
abbreviation for \displaystyle, \textstyle, etc. Since ConTeXt does not 
follow this, it resulted in 0 and 1 in the output.

> maybe the few useful things in there can go to core-mat anyway

Or probably split core-mat, it is getting a bit too long. How about 
disp-mat for  all display math related stuff, and core-mat for the 
remaining macros in core-mat and m-newmat

Aditya

From pragma at wxs.nl  Fri May 25 20:46:52 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 25 May 2007 20:46:52 +0200
Subject: [dev-context] Some math improvements
In-Reply-To: <20070525144238.4vpdzfjjwgsgcw8g@web.mail.umich.edu>
References: <alpine.WNT.0.99.0705212018060.3576@nqvgln>
	<465720F8.9070901@wxs.nl>
	<20070525144238.4vpdzfjjwgsgcw8g@web.mail.umich.edu>
Message-ID: <46572F1C.5090307@wxs.nl>

Aditya Mahajan wrote:
>
> Or probably split core-mat, it is getting a bit too long. How about 
> disp-mat for  all display math related stuff, and core-mat for the 
> remaining macros in core-mat and m-newmat
>
or math-dis and math-inl or core-imt and core-dmt or so 

Hans 


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From adityam at umich.edu  Sun May 27 20:09:51 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Sun, 27 May 2007 14:09:51 -0400 (EDT)
Subject: [dev-context] \startsection ...\stopsection alias for \section?
In-Reply-To: <m1d52qddpk.fsf@levana.de>
References: <m1d52qddpk.fsf@levana.de>
Message-ID: <alpine.WNT.0.99.0705271357190.548@nqvgln>

On Fri, 30 Mar 2007, Patrick Gundlach wrote:

> Hi,
>
> would it make sense to have, in addtion to e.g. \section a start..stop
> pair?
>
> such as
>
> \startsection{my section name}
>
> \stopsection
>
> with something like
> \let\startsection\section
> \let\stopsection\relax
>
>
> This way the text would be slightly more structured.

Another interesting way is to use start-stop sections is as specified 
by rfc2629 [1]: \startsection is nestable, so that you can have

\startsection {first section}

\startsection {first subsection}

\stopsection

\startsection {second subsection}

\stopsection

\stopsection

which makes it easy to move things around, promote demote section 
levels, etc.


[1] http://www.rfc-editor.org/rfc/rfc2629.txt which is a decent xml 
dtd for simple documents. Also see 
http://xml.resource.org/authoring/draft-mrose-writing-rfcs.html

Aditya


From patrick at gundla.ch  Wed May 30 10:19:31 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed, 30 May 2007 10:19:31 +0200
Subject: [dev-context] \startsection ...\stopsection alias for \section?
In-Reply-To: <alpine.WNT.0.99.0705271357190.548@nqvgln> (Aditya Mahajan's
	message of "Sun, 27 May 2007 14:09:51 -0400 (EDT)")
References: <m1d52qddpk.fsf@levana.de>
	<alpine.WNT.0.99.0705271357190.548@nqvgln>
Message-ID: <m13b1eoh9o.fsf@levana.de>


[...]

> Another interesting way is to use start-stop sections is as specified
> by rfc2629 [1]: \startsection is nestable, so that you can have
>
> \startsection {first section}
>
> \startsection {first subsection}
>
> \stopsection
>
> \startsection {second subsection}
>
> \stopsection
>
> \stopsection
>
> which makes it easy to move things around, promote demote section
> levels, etc.

That would be really, really nice!

Patrick


-- 
ConTeXt wiki and more: http://contextgarden.net

From sanjoy at mrao.cam.ac.uk  Wed May 30 14:26:09 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Wed, 30 May 2007 08:26:09 -0400
Subject: [dev-context] updated Ubuntu edgy texlive+context backports
Message-ID: <E1HtNFh-0004Hc-4q@approximate.corpus.cam.ac.uk>

I just updated the Ubuntu edgy backports of the texlive packages (for
i386) and have been running them on my feisty laptop for half a day.
The 'context' package provides version 2007.04.17 12:51.

They are recompilations of the latest Ubuntu gutsy (7.10) packages,
which are Norbert's latest Debian packages with a couple additions.  Let
me know if you have problems.

To use the packages, add these lines to your /etc/apt/sources.list :

  deb     http://web.mit.edu/download/sanjoy/texlive-backports/ edgy/
  deb-src http://web.mit.edu/download/sanjoy/texlive-backports/ edgy/

Then

 apt-get update
 apt-get install cm-super texlive-fonts-recommended \
                 context context-nonfree context-doc-nonfree

('cm-super comes from the universe repositories)

Sorry, no dapper (6.06) backports yet!  A few tricky package-version
obstacles remain.

-Sanjoy

From schuster.wolfgang at googlemail.com  Wed May 30 15:12:19 2007
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Wed, 30 May 2007 15:12:19 +0200
Subject: [dev-context] Fwd: \startsection ...\stopsection alias for \section?
In-Reply-To: <115224fb0705300522u2b70447bj7e1284e093c2949a@mail.gmail.com>
References: <m1d52qddpk.fsf@levana.de>
	<alpine.WNT.0.99.0705271357190.548@nqvgln> <m13b1eoh9o.fsf@levana.de>
	<115224fb0705300522u2b70447bj7e1284e093c2949a@mail.gmail.com>
Message-ID: <115224fb0705300612q7beb6c49paf751896abe281e7@mail.gmail.com>

---------- Forwarded message ----------
From: Wolfgang Schuster <schuster.wolfgang at googlemail.com>
Date: 30.05.2007 14:22
Subject: Re: [dev-context] \startsection ...\stopsection alias for \section?
To: Patrick Gundlach <patrick at gundla.ch>


2007/5/30, Patrick Gundlach <patrick at gundla.ch>:
>
> [...]
>
> > Another interesting way is to use start-stop sections is as specified
> > by rfc2629 [1]: \startsection is nestable, so that you can have
> >
> > \startsection {first section}
> >
> > \startsection {first subsection}
> >
> > \stopsection
> >
> > \startsection {second subsection}
> >
> > \stopsection
> >
> > \stopsection
> >
> > which makes it easy to move things around, promote demote section
> > levels, etc.
>
> That would be really, really nice!
>
> Patrick

Hi,

\startchapter
\startsection
...
\stopsection
\stopchapter

can be implemented by adding a few lines in the \definhead macros and
should be the default method.

Nested sections should be implemented in a module and shipped with the
main files. Look in the attachment for a example, I wrote a few weeks ago.

What we need is a specification what is needed (reporting for opening and
closing sections in the log file) and support by Hans to include the macros.

We should also collect other macros, that need a start/stop pair and provide
patches how they can be integrated (can be done in the wiki).

Wolfgang
-------------- next part --------------
A non-text attachment was scrubbed...
Name: level.tex
Type: application/x-tex
Size: 1197 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070530/54467d46/attachment.tex 

From pragma at wxs.nl  Wed May 30 23:01:04 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 30 May 2007 23:01:04 +0200
Subject: [dev-context] Fwd: \startsection ...\stopsection alias for
	\section?
In-Reply-To: <115224fb0705300612q7beb6c49paf751896abe281e7@mail.gmail.com>
References: <m1d52qddpk.fsf@levana.de>
	<alpine.WNT.0.99.0705271357190.548@nqvgln>
	<m13b1eoh9o.fsf@levana.de>
	<115224fb0705300522u2b70447bj7e1284e093c2949a@mail.gmail.com>
	<115224fb0705300612q7beb6c49paf751896abe281e7@mail.gmail.com>
Message-ID: <465DE610.1060805@wxs.nl>

Wolfgang Schuster wrote:
>
>
> \startchapter
> \startsection
> ....
> \stopsection
> \stopchapter
>
> can be implemented by adding a few lines in the \definhead macros and
> should be the default method.
>
> Nested sections should be implemented in a module and shipped with the
> main files. Look in the attachment for a example, I wrote a few weeks 
> ago.
>
> What we need is a specification what is needed (reporting for opening and
> closing sections in the log file) and support by Hans to include the 
> macros.
>
> We should also collect other macros, that need a start/stop pair and 
> provide
> patches how they can be integrated (can be done in the wiki).
implementing this is on my agenda but as part of an overhaul of the sectioning system (later this year as part of mkiv code) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From o.turlier at gmail.com  Thu May 31 10:18:52 2007
From: o.turlier at gmail.com (Olivier Turlier)
Date: Thu, 31 May 2007 08:18:52 +0000 (UTC)
Subject: [dev-context] updated Ubuntu edgy texlive+context backports
References: <E1HtNFh-0004Hc-4q@approximate.corpus.cam.ac.uk>
Message-ID: <f3m0dc$4t3$1@sea.gmane.org>

Le Wed, 30 May 2007 08:26:09 -0400, Sanjoy Mahajan a ?crit:

> I just updated the Ubuntu edgy backports of the texlive packages (for
> i386) and have been running them on my feisty laptop for half a day.
> The 'context' package provides version 2007.04.17 12:51.
> 
> They are recompilations of the latest Ubuntu gutsy (7.10) packages,
> which are Norbert's latest Debian packages with a couple additions.  Let
> me know if you have problems.
> 
> To use the packages, add these lines to your /etc/apt/sources.list :
> 
>   deb     http://web.mit.edu/download/sanjoy/texlive-backports/ edgy/
>   deb-src http://web.mit.edu/download/sanjoy/texlive-backports/ edgy/
> 
> Then
> 
>  apt-get update
>  apt-get install cm-super texlive-fonts-recommended \
>                  context context-nonfree context-doc-nonfree
> 
> ('cm-super comes from the universe repositories)
> 
> Sorry, no dapper (6.06) backports yet!  A few tricky package-version
> obstacles remain.
> 
> -Sanjoy

Hi Sanjoy,

Morning tests of your new packages are OK for me. Thanks.

Can you give the location of you key so one can authenticate packages and
be able to upgrade via the automatic/regular/graphic ubuntu way and not
thru the shell.

Thanks again


From sanjoy at mrao.cam.ac.uk  Thu May 31 15:21:21 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Thu, 31 May 2007 14:21:21 +0100
Subject: [dev-context] [NTG-context] updated Ubuntu edgy texlive+context
	backports
In-Reply-To: Your message of "Thu, 31 May 2007 08:18:52 -0000."
	<f3m0dc$4t3$1@sea.gmane.org> 
Message-ID: <E1Htkaf-0001kv-00@skye.ra.phy.cam.ac.uk>

> Can you give the location of your key

Sure, I just figured out how to do key stuff...

I've submitted it to hkp://subkeys.pgp.net and it is available from
there and other keyservers (search for 'sanjoy mahajan' or for the DSA
id 0x3FCDAAA3).  You can also get the ascii exported key here:

  <http://www.inference.phy.cam.ac.uk/sanjoy/sanjoy.asc>

[For those just getting up to speed with secure apt (which includes
me), here is how to add a public key to apt's keyring:

  wget http://www.inference.phy.cam.ac.uk/sanjoy/sanjoy.asc -O - \
  | apt-key add -

Then apt-get can verify the signatures on the packages downloaded from
my web.mit.edu site (which I signed with the private key corresponding
to that public key).]

-Sanjoy

gpg DSA: 0x3FCDAAA3
gpg  fp: 9722 56B0 F787 12A9 164E  34B7 09C9 E543 3FCD AAA3

From o.turlier at gmail.com  Thu May 31 15:54:03 2007
From: o.turlier at gmail.com (Olivier Turlier)
Date: Thu, 31 May 2007 13:54:03 +0000 (UTC)
Subject: [dev-context] [NTG-context] updated Ubuntu edgy
	texlive+context	backports
References: <f3m0dc$4t3$1@sea.gmane.org>
	<E1Htkaf-0001kv-00@skye.ra.phy.cam.ac.uk>
Message-ID: <f3mk1r$4t3$3@sea.gmane.org>

Le Thu, 31 May 2007 14:21:21 +0100, Sanjoy Mahajan a ?crit:

>> Can you give the location of your key
> 
> Sure, I just figured out how to do key stuff...
> 
> I've submitted it to hkp://subkeys.pgp.net and it is available from
> there and other keyservers (search for 'sanjoy mahajan' or for the DSA
> id 0x3FCDAAA3).  You can also get the ascii exported key here:
> 
>   <http://www.inference.phy.cam.ac.uk/sanjoy/sanjoy.asc>
> 
> [For those just getting up to speed with secure apt (which includes
> me), here is how to add a public key to apt's keyring:
> 
>   wget http://www.inference.phy.cam.ac.uk/sanjoy/sanjoy.asc -O - \
>   | apt-key add -
> 
> Then apt-get can verify the signatures on the packages downloaded from
> my web.mit.edu site (which I signed with the private key corresponding
> to that public key).]
> 
> -Sanjoy
> 
> gpg DSA: 0x3FCDAAA3
> gpg  fp: 9722 56B0 F787 12A9 164E  34B7 09C9 E543 3FCD AAA3

I'v pbs whith the command for having the packages signed with your key.

Found similar commands, but with a *.gpg* file, like this one :

wget -q http://packages.medibuntu.org/medibuntu-key.gpg -O- | sudo apt-key
add - && sudo apt-get update

So maybe a solution is to provide one on your website. Thanks

Olivier


From adityam at umich.edu  Fri Jun  1 07:58:15 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 1 Jun 2007 01:58:15 -0400 (EDT)
Subject: [dev-context] Enhancements to core-des for theorems
Message-ID: <alpine.WNT.0.99.0706010138210.1748@nqvgln>

Hi Hans,

I am attaching my enhancements for core-des. This takes care of most 
of the needs for theorems with ConTeXt. I hope that I have not broken 
anything. I have tested this with a 40 page documents, while Oliver, 
Olaf, and Dalyoung have tested this with bigger documents. The test 
files show different features.

It takes care of a few bugs in enumerations, (and introduces new 
ones... there is a suprious space somewhere which I can not find)
Basically, more enhanced support for titles, and end of proof markers, 
and makes sure that conversion=whatever works correctly.


If you want a "title" for the theorem, say

  \defineenumeration[theorem]
  \defineenumeration[theorem][title=yes]

titledistance, titlestyle, titlecolor, titleleft, and titleright 
control the appearance of the title. To use a title, say

\starttheorem[label]{title}

both the label and the title are optional, so you can have

\starttheorem[label] This is a theorem with no title \stoptheorem

and

\starttheorem {title} this is a theorem with no label \stoptheorem


\starttheorem this is a theorem with neither a title nor a label 
\stoptheorem

For end of proof markers, say

\definetheorem[theorem][endmarker=\math{\square}] or whatever symbol 
you want.

Then a end of proof marker with will be placed at the \stoptheorem. 
Sometimes, for example after an itemize, the end of thoerem marker may 
appear on a line of its own. Then say \placenedmarker just before 
\stopitemize

To couple two enumerations

\defineenumeration[theorem]
\defineenumeration[proposition][theorem]

To couple just the numbers

\defineenumeration[theorem]
\defineenumeration[proposition][usenumer=theorem]

I cannot use number=theorem because number=yes|no is to enable disable 
numbering. Maybe a better choice will be numbering=yes|no, and 
number=counter. But that will break backward compatibility :(

The main thing that needs to be done is to get end of proof markers to 
work with formulas, but that is a bit difficult, so I have left it for 
the future.

Aditya

-------------- next part --------------
%%\message{<Paul Taylor's right-justified end-of-proof mark, 11 June 2003>}
%% Lines commented by Aditya Mahajan start with two %%
%% \ProvidesPackage{QED}[2003/06/11 right-justified end-of-proof mark]%
%\ProvidesFile{QED.sty}% I don't understand what this is for
%%========================================================================
%************************************************************************%
%*                                                                      *%
%*      Maybe you already have a \qed macro to put a little square      *%
%*      on the right hand side at the end of a mathematical proof?      *%
%*                                                                      *%
%*                      IT'S PROBABLY MINE!                             *%
%*                                                                      *%
%*           Please compare yours with \parag at pushright below.          *%
%*                                                                      *%
%*      This new file is compatible, it fixes the bugs, has extra       *%
%*      features, and is maintained and portable.  Please use it!       *%
%*                                                                      *%
%*      NEW FEATURE \WillHandleQED and \HandleQED for environments      *%
%*      which do not give access to the right hand side of the page.    *%
%*                                                                      *%
%*      Now also available: \DefineStandardTheorems or                  *%
%*      \usepackage[define-standard-theorems]{QED}                      *%
%*                                                                      *%
%************************************************************************%
%========================================================================%

% COPYRIGHT (C) 1993-2003 Paul Taylor.

% You may use this file for any purpose. You may copy it on condition that
% you do so in exactly the form in which it was supplied, make no charge
% for the copy and impose the same conditions on the recipient.

% This software is supplied ``as is'' without warranty, express or implied,
% including but not limited to merchantability and fitness for any particular
% purpose. No liability is accepted by the author, Queen Mary and Westfield
% College, Imperial College or any third party for any direct or consequential
% damages, however caused.
% In all cases you must keep several backup versions of your files in a place
% to which your machine cannot write, and you must check documents visually
% before submitting the final version to a publisher or expensive printer.

% WARNING: If you use this with Frank Mittlebach's "theorem.sty" you
% MUST load theorem first, then QED, then do the \newtheorem commands.

%       Authoritative version:  /pub/tex/contrib/pt/proofs/QED.sty
%       by anonymous FTP from:  ftp.dcs.qmw.ac.uk
%       also CTAN:              macros/generic/proofs/taylor/QED.sty
%       author/maintained by:   Dr Paul Taylor <pt at di.unito.it>

% BUGS
% ! You can't use `\unskip' in vertical mode.
% from isolated \qed (ie as paragraph on its own)

%=========================================================================

%       USER INTERFACE AND EXAMPLES (see also OPTIONS below)

% LaTeX2e \usepackage options: see \DeclareOption commands below
% theorems-as-commands roman-theorems italic-theorems
% auto-QED explicit-QED number-theorems dont-number-theorems
% black-square open-square

%       \begin{Proof} ... \end{Proof}
%       or    \Proof  ... \endProof
%       or    \Proof  ... \endproof
%       or    \Proof  ... \qed          also \QED \QEF and \QEI

% WARNING: \qed which doesn't follow \Proof will not print the square.

% Each properly nested Proof/endProof pair gets a single
% \qedsymbol at the end, on the far right hand side.
% Unfortunately, this may still be in the wrong place
% if the proof ends with a display or itemisation.
% To solve this, \qed may be put *inside* the last substantive
% environment; the \qedsymbol will be put at that point
% (the visual end) and suppressed at the logical end of proof.

% Examples:
%       \begin{Proof}                   \begin{Proof}
%         ...                             ...
%         \begin{eqnarray}                \begin{itemize}
%          ... &=& ... \\                   \item ...
%          ..  &=& ... &\qed                \item ...   \qed
%         \end{eqnarray}                  \end{itemize}
%       \end{Proof}                     \end{Proof}
% also works with $$...$$ and \[...\] displays, including fleqn.sty.

% Unfortunately some environments, such as picture, do not allow this at all.
% See the section "centering environments" below for the mechanism for
% passing \qed to such an environment for special processing.

% In fact \qed will only work in those environments which provide access to
% the right hand side of the page. In other words, wherever you think
% "\hfill\square" ought to work then \qed will; of course it is just because
% that naive method doesn't work that this macro file is needed at all.
% The macro was designed to solve the problem in the case of "unrestricted
% horizontal mode" (ie at the end of a paragraph); it also works in $$
% displays by pretending to be an equation number. In most other cases it
% basically does "\hfill\square" or "\hfill$\square$" and hopes for the best.

% If you have to put \qed outside the environment, it may be appropriate to
% put \vskip-\baselineskip before it, unless of course this would over-print.
% There is, however, still a danger that TeX will break the page here.
% This seems to be unavoidable if the environment ends with a \penalty.

% The eqnarray example above does not in fact work: if you try it you'll
% get "! Paragraph ended before \llap was complete" with LaTeX in a mess.
% This is a very common place where you might want to put the end of proof
% mark, and I also consider that the fourth column should be available for
% "reasons" for equational steps.  The following substitute for \eqnarray
% allows this, whilst being compatible with automatic numbering. I have
% proposed it to Rainer Sch\"opf for inclusion in LaTeX. If you want to
% use it, please copy it to another file rather than uncommenting it here.
% Don't forget to use \makeatletter or put it in a documentstyle (.sty) file.
%
% \def\eqnarray{\stepcounter{equation}\let\@currentlabel\theequation
% \global\@eqnswtrue\m at th\global\@eqcnt\z@\tabskip\@centering\let\\\@eqncr
% $$\halign to\displaywidth\bgroup\@eqnsel\hskip\@centering$\displaystyle
% \tabskip\z@{##}$&\global\@eqcnt\@ne\hskip 2\arraycolsep \hfil${##}$\hfil
% &\global\@eqcnt\tw@\hskip2\arraycolsep$\displaystyle\tabskip\z@{##}$\hfil
% \tabskip\@centering&%
%       \global\@eqcnt\thr@@\hbox to\z@\bgroup\hss##%*** instead of "\llap{##}"
% \tabskip\z@\cr}%
% \def\@@eqncr{\let\@tempa\relax
% \ifcase\@eqcnt \def\@tempa{& & &}\or \def\@tempa{& &}%
%       \or\def\@tempa{&}\else\@eqnswfalse%*** instead of "\else\def\@tempa{&}"
% \fi\@tempa\if at eqnsw\@eqnnum\stepcounter{equation}\fi
%       \egroup%*** added, to match \bgroup in fourth cell of preamble
% \global\@eqnswtrue\global\@eqcnt\z@\cr}

% Why can't we do all of this with \endProof? Because by that stage
% the damage has been done: the environments, paragraphs or
% displays have already been closed and their \hbox'es added
% to the current vertical list, and cannot be removed for
% alteration if this is the current page.

% Even if you don't need to put \qed inside an inner environment
% to avoid a blank line, it's still a good idea to do so, because
% otherwise it's possible that intervening end-of-environment
% material may allow TeX to put the mark on the next page.

% This file may be called QED.sty, QED.tex, qed.sty or qed.tex.
% It may be loaded using \input, \usepackage or as a \documentstyle option,
% as it is careful to handle the \catcode of @ appropriately.

% If you don't use theorem.sty, this file instead provides options to use
% commands to begin theorems, instead of enclosing them in environments,
% and to suppress numbering and italicisation. A rudimentary version of
% \newtheorem for plain TeX is also implemented (always using commands
% rather than environments).

% At the end of the file some useful \newtheorem
% commands are listed but not executed.

% NB \Theorem\Proof\endProof\qed will print the second square, whereas
% \begin{Theorem}\end{Theorem}\begin{Proof}\end{Proof}\qed will not.

%=========================================================================
% Make @ letter, saving its old code to restore at the end of this file.
% Look for this towards the end of the file if you think something's missing!
% "plain.tex" defines \lq as a synonym for back quote (character constant);
% I use it to avoid corruption when sending TeX files by email via BITNET.
% \edef\qedrestoreat{\noexpand\catcode\lq\noexpand\@=\the\catcode\lq\@}%%
% \catcode\lq\@=11

% in LaTeX, \protect the user commands;
% in plain TeX, ensure that it is defined.
% \ifx\protect\undefined\let\protect\relax\fi

%=========================================================================

%                               OPTIONS

% These are the user commands.

\unprotect

%% \def\qed{\protect\@qed{$\qedsymbol$}}% suppressible printing of \qedsymbol
%% % \pushright takes an argument, which it always prints
%% % it is (re)defined by \WillHandleQED and \UnHandleQED below (12.4.94)
%% 
%% % theoremata in Euclid needed proof:    "which   was  to be shown"
%% \def\QED{\protect\@qed{{\rm Q.E.D.}}}%  "quod   erat  demonstrandum"
%% 
%% % but problemata needed construction:   "which   was  to be found"
%% \def\QEI{\protect\@qed{{\rm Q.E.I.}}}%  "quod   erat  inveniendum"
%% 
%% % alternatively:                        "which   was  to be done/made"
%% \def\QEF{\protect\@qed{{\rm Q.E.F.}}}%  "quod   erat  faciendum"
%% 
%% % a LaTeX environment
%% \def\Proof{\protect\@Proof}\def\endProof{\protect\@endProof}%
%% \let\proof\Proof\let\endproof\endProof
%% 
%% 
%% % These are the user-settable parameters.
%% 
%% % The actual (maths) symbol used by \qed
%% \def\qedsymbol{\square}% PLEASE NOTE: this is in the AMS symbols font.
%% %\def\qedsymbol{\blacksquare}%  use one of these instead
%% %\def\qedsymbol{\hbox{\rm Q.E.D.}}%        if you prefer
%% %\def\qedsymbol{\dashv}% this is what the Journal of Symbolc Logic likes.
%% 
%% % This is the text used by \Proof.
%% % A new paragraph is begun without indentation.
%% % Change it to {\kern\parindent\sc D\'emonstration: } if you like.
%% \def\TheWordProof{\bf Proof\enskip}
%% 
%% % This is the font command used for the text of proofs
%% \def\ProofFont{}
%% 
%% % The command \AutoQEDtrue causes a \qed in \end{Theorem}, so you do
%% %       \begin{Theorem} ... \begin{Proof} ... \end{Proof} \end{Theorem}
%% % but if you omit the proof, the statement gets a little square at the end.
%% \newif\ifAutoQED\AutoQEDfalse
%% 
%% % The remaining options are redundant with theorem.sty
%% % so are not defined if this has been loaded.
%% \newif\ifNumberResults
%% \ifx\theorem at style\undefined
%%    %
%%    % How to print the name (#1), number (#2) and attribution (#3) of a theorem.
%%    \NumberResultstrue
%%    % If the number (#2) is absent, "\unskip" removes the
%%    % unwanted space "\ " from before it (16 Feb 1993).
%%    \def\TheoremHeader#1#2#3{\bf #1\ifNumberResults\ #2\unskip\fi#3}
%%    %
%%    % This is the font command used for the text of theorem enunciations
%%    % change to {\rm} or {\small} if you like.
%%    \def\TheoremFont{\it}
%%    %
%%    % The command \NumberResultsfalse will suppress theorem numbering.
%%    %
%%    % The command \TheoremsAsCommands will allow you to write
%%    % \Theorem instead of \begin{Theorem} ... \end{Theorem}.
%%    % In this case italicisation is suppressed by default.
%%    % To do this with theorem.sty would involve rewriting the substyles.
%%    %
%%    % WARNING: if you subsequently redefine \TheoremFont, and use the command
%%    % instead of the environment, the font will remain in force afterwards!
%% \fi
%% 
%% % The document style option "theorems-as-commands" will allow you to
%% % write \Theorem instead of \begin{Theorem} ... \end{Theorem}.
%% % Moved here from further down. 10 Jan 1994
%% \def\TheoremsAsCommands{%
%%   \def\TheoremFont{}% suppress italicised theorems.
%%   \def\begin at theorem##1{%
%%      \thmbreak
%%      \save at set@qed % enable \qed
%%      \noindent{##1}% the name
%%      %\TheoremFont % italicise at your own risk!
%%    }%
%%   %\def\thmbreak{\par\removelastskip\smallskip}%
%%   \def\thmbreak{\par\bigskip}%
%%   \def\@endtheorem{\ifAutoQED\qed\fi\restore at qed}%
%% }%
%% 
%% %\expandafter\let\csname ds at theorems-as-commands\endcsname\TheoremsAsCommands
%% 
%=========================================================================
%  If you already have a macro called \qed, \endproof or \pushright
%  which is laid out in a similar way to the following two definitions
%  (but with \hbox at pushright incorporated) then it is almost certainly
%  my code, which has been copied anonymously via numerous people since
%  my Cambridge PhD thesis in August 1986. Belated acknowledgements to
%  Chris Thompson of the Cambridge University Computing Service for his
%  help with my early attempts at TeX, in particular this problem.

%  The complexity of the macro necessary to get a little box on the
%  right-hand-side at the end of a proof is amazing.  It really does
%  have to be this long!  Otherwise you're liable to get it at the
%  beginning of the next line, or even on the next page. 

\def\parag at pushright#1{{% set up
    \parfillskip=0pt            % so \par doesnt push \square to left
    \widowpenalty=10000         % so we dont break the page before \square
    \displaywidowpenalty=10000  % ditto
    \finalhyphendemerits=0      % TeXbook exercise 14.32
    %
    %                   horizontal
    %\leavevmode                % not needed since we now only use it in hmode
    \hbox at pushright             % this used to be incorporated
    #1%                         % the end-of-proof mark (or whatever)
    %
    %                     vertical
    \par}}%                     % build paragraph with the above parameters

\def\hbox at pushright{% horizontal
    \unskip                     % remove previous space or glue
    \nobreak                    % don't break lines
    \hfil                       % ragged right if we spill over
    \penalty50                  % discouragement to do so
    \hskip.2em                  % ensure some space
    \null                       % anchor the following \hfill
    \hfill                      % push \square to right
}%

% Ideally \endProof should do all this. We should be able to add the symbol
% to the last line after the paragraph, display or whatever other structure
% has been completed and we've returned to vertical mode. This isn't possible
% on the current page (outer vmode) because \lastbox doesn't work there.

% But \ifinner is true inside a \vbox, \vadjust or \insert (LaTeX \parbox,
% minipage, figure or table), and in these circumstances we can use \lastbox.
% We would have to strip & restore glue & penalties (\insert, \mark and \write
% are obstacles to this) to get access to the last line (box), which may
% still not have the correct baseline. We could check its natural width
% against the page width, but if we re-set it, centering and (right)
% justification might be disturbed. Is this worth the trouble?
\def\vbox at pushright#1{\expandafter\message %  (2 Jan 1994)
  {QED.sty could be improved in this case (line \the\inputlineno): please ask}%
  \page at pushright{#1}}%

% Using this method the Proof environment could be implemented by collecting
% the entire proof in its own \vbox, modifying that and \unvbox'ing it to the
% current page. This approach may lead to the following problems:
%   (i) footnotes, floats, marginpars, labels and index items may be lost;
%  (ii) overflow of TeX's main memory, especially if \end{Proof} is missing;
% (iii) I don't know how page-breaking would be handled.

%========================================================================

% Switch to enable/suppress \qedsymbol; since suppression may be done
% within a nested scope it must be global, so we do our own save/restore
% in a symbol which is local to the Proof environment.

%% \newif\if at qed\@qedfalse
%% \def\save at set@qed{\let\saved at ifqed\if at qed\global\@qedtrue}%
%% \def\restore at qed{\global\let\if at qed\saved at ifqed}
%% 
%% % prefer proofs with statements if possible - hence \penalty700
%% % the only essential part of this is \save at set@qed
%% \def\@Proof{%
%%    \par\removelastskip\smallskip\penalty700
%%    \save at set@qed
%%    \noindent\ProofFont{\TheWordProof\enskip}%
%% }%
%% 
%% \def\@endProof{%
%%    \qed\restore at qed
%%    \penalty-700 \smallskip
%% }
%% 
%% \def\@qed#1{\check at pt@fm at thm
%% \if at qed                                 % have we already done \qed?
%%      \global\@qedfalse\pushright{#1}%  - no  - do it now, but not again
%% \else\ifhmode\ifinner\else\par\fi\fi%  - yes - just end paragraph, if any
%% \fi}

% \pushright{text} always prints its argument, on the far right, in text mode
\unexpanded\def\pushright#1{%
  \ifvmode
       \ifinner\vbox at pushright{#1}% vertical mode (see comments above)
       \else   \page at pushright{#1}%
       \fi
  \else\ifmmode\maths at pushright{\hbox{#1}}% maths (force a text argument)
       \else\ifinner\hbox at pushright{#1}%  inside an \hbox
            \else\parag at pushright{#1}%    in a paragraph
  \fi  \fi  \fi
}% (22 Feb 1993) removed extra {} which would destroy our \] below

% In the \hbox and maths cases we are really at the mercy of the environment.
% Assuming that we have $\qed$ simply embedded in a paragraph, the horizontal
% processing by \hbox at pushright will at least make sure that the square isn't
% at the beginning of the line, but we can't stop it being on the next page.
% However it is more likely that the reason why we're in maths mode is that
% we're inside an eqnarray or similar, in which case \hfill will do its best
% to put the square on the right of the available space. (See \vadjust below.)
\def\maths at pushright#1{%
  \ifinner
     \hbox at pushright{#1}%
  \else
     \eqno#1%   use TeX's right equation number feature (\eqno) within $$.
     \def\]{$$\ignorespaces}%    suppress LaTeX's error checking (HACK!)
  \fi
}% (22 Feb 1993) removed extra {} which would destroy our \] above

% outer vertical mode (the current page)
% There's very little we can do in these circumstances!
% Penalties still allow the page to be broken.
% If the user has put negative glue in, leave it alone. (15 Feb 1994)
\def\page at pushright#1{% 18 Jan 1994
  %\unpenalty % ineffective
  \skip@\lastskip
%%  \ifdim\skip@>\z@
%%        \unskip    % remove \parskip, but only (15 Feb 1994) if it's positive
%%                   % This causes and error (AM)
%%  \else\skip@\z@\relax
%%  
%%  \fi
  %\unpenalty % TeX won't let me do this
  \dimen@\baselineskip
  \advance\dimen at -\prevdepth            % save \prevdepth to make a strut
  \nobreak                              % don't break the page here
  \nointerlineskip
  \hbox to\hsize{%
    \setbox\z@\null
    \ifdim\dimen@>\z@\ht\z@\dimen@\fi   % simulate \baselineskip
    \box\z@
    \hfill
    #1}%
%%  \vskip\skip@                  % replace old \parskip
}%

% An idea that didn't work: see TeXbook p188. (16 Feb 1993)
% Use \predisplaysize to find out the width of the previous box,
% in the case where it has already been completed.
% But this can only be used inside displays ($$), and a display in
% vertical mode begins a paragraph first, so we end up with
% \predisplaysize=\parindent+2em whatever happened in the previous
% paragraph.

% Another idea: it may be worth trying \vadjust, if only to insert \nobreak.
% The problem with this is that if we are too deeply nested in horizontal
% or maths lists, the adjustment may not be able to find its way out to the
% enclosing vertical list. In the case of array-like environments, it will
% appear (assuming it manages to get out) after the current row of the array.

%===========================================================================
% We have to add to the theorem environments the commands to enable \qed.
% This is done by re-defining \@thm#1#2.
% Note that Mittelbach's theorem.sty re-defines \@thm and \@endtheorem, so
% that must be loaded before us, otherwise our changes will get over-written
% and \qed will never be enabled.
% Paul.sty didn't use this method of gaining control inside a theorem,
% whereas it did define \qed and \pushright, so here is the one place
% where we can check for it.

%% \ifx\nonqed at thm\undefined % otherwise double loading causes a loop 22 Feb 1993
%%    \let\nonqed at thm\@thm % save original
%%    \let\nonqed at endthm\@endtheorem
%% \fi
%% 
%% \def\@thm{\save at set@qed\nonqed at thm}%
%% \def\@endtheorem{\ifAutoQED\qed\fi\restore at qed\nonqed at endthm}%

%===========================================================================
% "CENTERING" ENVIRONMENTS - 
% those which don't give their contents access to the right hand side
% of the page, such as center, picture, ...  (12 April 1994)

% Each individual environment (both the standard ones and those defined
% by the user) needs to co-operate in order to make \qed and \pushright work.
% It is not the business of this package to rewrite LaTeX in this way,
% but the following mechanism may be inserted in to other environments.
%  - put \WillHandleQED in the \begin part of the environment definition;
%    then if a \qed occurs in the body of the environment it is stored
%    in \QEDbox until...
%  - \HandleQED anywhere in the \end part of the environment definition
%    (even inside dollars, braces or another environment) prints it.
%
% For example:
% \newenvironment{qedpicture}%
%    {\begin{picture}\WillHandleQED}%
%    {\put(0,0){\HandleQED}\end{picture}}
%
% To make this compatible with *not* loading QED.sty,
% add the following to macro files which use \WillHandleQED and \HandleQED:
%   \ifx\WillHandleQED\undefined
%      \let\WillHandleQED\relax
%      \let\HandleQED\relax
%      \let\UnHandleQED\relax % if you use it
%      \let\QEDbox\voidb at x    % must have \makeatletter here!
%   \fi
%
% \UnHandleQED restores normal processing; this may be useful for
% the minipage environment, which has its own notion of "right hand side"
% of the page.
%
% The width of the saved \qed is available for testing as \wd\QEDbox

%% \newbox\qed at box % the box in which to save \qed for special handling
%% 
%% \def\WillHandleQED{\relax
%% \ifx\HandleQED\nohandle at qed
%%    % no enclosing environment has declared \WillHandleQED
%%    \def\pushright{\global\setbox\qed at box\hbox}% \qed will be saved
%%    \let\QEDbox\qed at box % point at the right box
%%    \def\HandleQED{\unhbox\QEDbox}% print it
%%    \aftergroup\check at handle@qed  % check that this really gets done
%% \else
%%    % an enclosing environment already wants to catch \qed
%%    % \HandleQED doesn't print anything - let the saved \qed pass through
%%    \let\QEDbox\voidb at x % by pointing at an empty box
%% \fi}
%% 
%% \def\nohandle at qed{%
%% \errhelp{One of them is missing: see QED.sty.}%
%% \errmessage{This environment uses \string\WillHandleQED\space and
%% \string\HandleQED\space incorrectly}}
%% 
%% \def\check at handle@qed{\relax
%% \ifvoid\qed at box\else\expandafter\nohandle at qed\fi}
%% 
%% \def\UnHandleQED{%
%% \let\HandleQED\nohandle at qed
%% \let\QEDbox\voidb at x
%% \def\pushright{\protect\@pushright}}%
%% 
%% \UnHandleQED
%% 
%% %===========================================================================
%% % If theorem.sty hasn't been loaded, arrange to check it again in \@qed.
%% % And check (then) whether you've actually defined \square.
%% % changed 2 June 1993: don't define it now, as that would confuse amssymb.sty
%% \ifx\theorem at style\undefined
%%    \def\check at pt@fm at thm{\relax
%%      \ifx\square\undefined
%%        \gdef\square{\bigcirc
%%           \errhelp={Anonymous ftp e-math.ams.com /ams/amsfonts}%
%%           \errmessage{\string\square\space is an AMS symbol}%
%%           \global\let\square\bigcirc}%
%%      \fi
%%       \ifx\theorem at style\undefined
%%           \global\let\check at pt@fm at thm\relax
%%       \else\errhelp={The macros \@thm and \@endtheorem need to be re-defined.}%
%%           \errmessage{QED.sty must be loaded AFTER theorem.sty but before
%%            using \string\newtheorem}%
%%       \fi
%%       \global\let\check at pt@fm at thm\relax
%%       }%
%% \else
%%    \def\check at pt@fm at thm{%
%%       \ifx\square\undefined
%%          \def\square{\bigcirc
%%          \errhelp={Anonymous ftp e-math.ams.com /ams/amsfonts}%
%%          \errmessage{\string\square\space is an AMS symbol}%
%%          \global\let\square\bigcirc}%
%%       \fi
%%       \global\let\check at pt@fm at thm\relax
%%       }%
%% \fi
%% 
%% %===========================================================================
%% 
%% \def\goalbreak#1{% break unless there's #1 left on the page
%%    \par\removelastskip
%%    \dimen0\pagegoal\advance\dimen0-\pagetotal
%%    \ifdim\dimen0>0pt
%%       \ifdim\dimen0<#1\relax
%%           \newpage
%%    \fi\fi
%%   }
%% 
%% \def\allowlines#1{\goalbreak{#1\baselineskip}}
%% 
%% %===========================================================================
%% % Define some standard ``theorem'' types.
%% 
%% \def\DefineStandardTheorems{%
%% %
%% % First set up uniform numbering in LaTeX;
%% % don't use this in plain TeX because this usage of \newcommand is not
%% % supported and we have already done by hand what it would do in LaTeX,
%% % viz to define the macro \theResult and the count \c at Result.
%% \relax\ifx\@@thm\undefined
%%         \newtheorem{Result}{Result}[subsection]%
%%         \@addtoreset{Result}{section}%
%%         \ifx\chapter\undefined\else\@addtoreset{Result}{chapter}\fi
%% \fi
%% %
%% \let\theUnnumbered\relax\countdef\c at Unnumbered255 \def\p at Unnumbered{}%
%% %
%% \def\mkthm##1{\newtheorem{##1}[Result]{##1}}%
%% %
%% \mkthm{Answer}
%% \mkthm{Answers}
%% \mkthm{Axiom}
%% \mkthm{Axioms}%
%% \mkthm{Assumption}%
%% \mkthm{Assumptions}%
%% \mkthm{Conjecture}%
%% \mkthm{Conjectures}%
%% \mkthm{Construction}%
%% \mkthm{Constructions}%
%% \mkthm{Convention}%
%% \mkthm{Conventions}%
%% \mkthm{Corollary}%
%% \mkthm{Corollaries}%
%% \mkthm{Counterexample}%
%% \mkthm{Counterexamples}%
%% \mkthm{Definition}%
%% \mkthm{Definitions}%
%% \mkthm{Example}%
%% \mkthm{Examples}%
%% \mkthm{Exercise}%
%% \mkthm{Exercises}%
%% \mkthm{Fact}%
%% \mkthm{Facts}%
%% \mkthm{Lemma}%
%% \mkthm{Lemmas}%
%% \mkthm{Lemmata}%
%% \mkthm{NB}%
%% \mkthm{Notation}%
%% \mkthm{Notations}%
%% \mkthm{Note}%
%% \mkthm{Observation}%
%% \mkthm{Observations}%
%% \mkthm{Problem}%
%% \mkthm{Problems}%
%% \mkthm{Proposition}%
%% \mkthm{Propositions}%
%% \mkthm{PS}%
%% \mkthm{Remark}%
%% \mkthm{Remarks}%
%% \mkthm{Question}%
%% \mkthm{Questions}%
%% \mkthm{Theorem}%
%% \mkthm{Theorems}%
%% \mkthm{Thesis}%
%% \mkthm{Theses}%
%% \mkthm{Warning}%
%% \mkthm{Warnings}%
%% }
%% 
%% %===========================================================================
%% % Interaction with LaTeX2e (2 Jan 1994)
%% 
%% % \DeclareOption{roman-theorems}{\def\TheoremFont{\rm}}%
%% % \DeclareOption{italic-theorems}{\def\TheoremFont{\it}}%
%% % \DeclareOption{theorems-as-commands}{\TheoremsAsCommands}%
%% % \DeclareOption{auto-QED}{\AutoQEDtrue}%
%% % \DeclareOption{explicit-QED}{\AutoQEDfalse}%
%% % \DeclareOption{number-theorems}{\NumberResultstrue}%
%% % \DeclareOption{dont-number-theorems}{\NumberResultsfalse}%
%% % \DeclareOption{black-square}{\def\qedsymbol{\blacksquare}}%
%% % \DeclareOption{open-square}{\def\qedsymbol{\square}}%
%% % \DeclareOption{define-standard-theorems}{\DefineStandardTheorems}%
%% 
%% %===========================================================================
%% % If Mittelbach's theorem.sty is loaded, skip the rest of the file.
%% \ifx\theorem at style\undefined\else
%%     \ProcessOptions
%%     \qedrestoreat
%%     \expandafter\endinput
%% \fi
%% %===========================================================================
%% 
%% % Allow the user to suppress italicisation and numbering.
%% 
%% % The following two macros are called by LaTeX to begin a theorem
%% % respectively with and without an optional (``attribution'') argument.
%% % It is clear from latex.tex that they are intended to be customised.
%% % The code common to the two has been taken out as \begin at theorem and
%% % \TheoremHeader. Of these, the former is re-defined by \TheoremsAsCommands.
%% 
%% \def\@opargbegintheorem#1#2#3{\begin at theorem{\TheoremHeader{#1}{#2}{ (#3)} }}
%% 
%% \def\@begintheorem#1#2{\begin at theorem{\TheoremHeader{#1}{#2}{} }}
%% 
%% \def\begin at theorem#1{%
%%   \trivlist\item[\hskip\labelsep {#1}]%         % LaTeX likes this method.
%%   \TheoremFont                                  % Italicise the enunciation
%%   \ifx\ProofFont\empty\def\ProofFont{\rm}\fi    % but not any nested proof.
%%   }%
%% 
%% 
%% %%% Here's what LaTeX (92/1/14) does:
%% %%%% RmS 91/08/14 Moved \it after \item to make it work with NFSS
%% %%\def\@begintheorem#1#2{\trivlist \item[\hskip \labelsep{\bf #1\ #2}]\it}
%% %%\def\@opargbegintheorem#1#2#3{\trivlist
%% %%      \item[\hskip \labelsep{\bf #1\ #2\ (#3)}]\it}
%% %%\def\@endtheorem{\endtrivlist}
%% 
%% %===========================================================================
%% % If we're running under LaTeX, skip the rest of the file.
%% \ifx\newtheorem\undefined\else
%%    \ProcessOptions
%%    \qedrestoreat
%%    \expandafter\endinput
%% \fi
%% %===========================================================================
%% 
%% % This implements a rudimentary version of \newtheorem for plain TeX.
%% % Only the unattributed theorems and the
%% % declarations \newtheorem{Theorem}[Result]{Theorem} and
%% % \newtheorem{Convention}[Unnumbered]{Convention} are supported.
%% % The numbering is based on the counts \chapternumber, \sectionnumber
%% % and \subsectionnumber, which it is up to you to define with \newcount.
%% % It's also up to you to reset \c at Result at the beginning of each section.
%% 
%% % Form the number: (chapter).(section).(subsection).(#1)
%% % where any of the first three parts which is zero
%% % negative or undefined is omitted.
%% \def\ther at sult#1{%
%% \ifx\chapternumber\undefined\else
%%    \ifnum\chapternumber>0 \number\chapternumber.\fi\fi
%% \ifx\sectionnumber\undefined\else
%%    \ifnum\sectionnumber>0 \number\sectionnumber.\fi\fi
%% \ifx\subsectionnumber\undefined\else
%%    \ifnum\subsectionnumber>0 \number\subsectionnumber.\fi\fi
%% \expandafter\number\csname c@#1\endcsname}%
%% 
%% % plain version of LaTeX's \@thm
%% \def\plain at thm#1#2{% #1=counter, #2=text
%%   \save at set@qed
%%   \expandafter\advance\csname c@#1\endcsname1
%%   \@begintheorem{#2}{\csname the#1\endcsname}%
%% }%
%% 
%% % Rudimentary \newtheorem
%% \def\newtheorem#1[#2]#3{%   #1=command, #2=counter, #3=text
%%   %
%%   % \def\#1{\plain at thm{#2}{#3}}
%%   \expandafter\def\csname #1\endcsname{\plain at thm{#2}{#3}}%
%%   %
%%   % \def\end#1{\@endtheorem}
%%   \expandafter\def\csname end#1\endcsname{\@endtheorem}%
%%   %
%%   % if \c@#2 is not defined
%%   %    \newcount\c@#2
%%   %    \def\the#2{\ther at sult{#2}}
%%   \expandafter\ifx\csname c@#2\endcsname\relax
%%      \expandafter\expandafter\csname newcount\endcsname
%%         \csname c@#2\endcsname
%%      \expandafter\def\csname the#2\endcsname{\ther at sult{#2}}%
%%   \fi
%% }%
%% 
%% \TheoremsAsCommands
%% 
%% \qedrestoreat\endinput
%% 
%% %===========================================================================
%% % BUGS
%% % \item\qed\end{letterlist} puts the square above the item label.
%% 
%% % ! You can't use `\unskip' in vertical mode.
%% % from \qed in a paragraph on its own.
%% 

\protect
-------------- next part --------------
% Testing for http://archive.contextgarden.net/message/20061127.085140.3740ad43.en.html
% There seems to be a spurious space after remark, I can not pin point why it
% is coming, if I end all lines with % it goes away. Maybe someone can see the
% offending line more easily.

\input core-des

\defineenumeration    [theorem] [text=Theorem] 
\defineenumeration    [remark] [text=Remark] 

\setupenumerations    [location=serried,width=fit,distance=0pt,stopper=.] 
\setupenumerations    [remark] [number=no] 

\starttext 

\starttheorem 
\input ward 
\stoptheorem 

\startremark 
\input tufte 
\stopremark 

\stoptext

-------------- next part --------------
% This is the first test, title working.

\input core-des

\setupformulas[numberstyle=normal] % This should probably be the default

\setupenumerations
  [        title=yes,
         stopper=.,
        location=hanging,
           style=italic,
   titledistance=1ex,
        distance=0.5em,
  ]

\defineenumeration [problem]    [text=Problem]
\defineenumeration [definition] [text=Definition]
\defineenumeration [theorem]    [text=Theorem]
\defineenumeration [lemma]      [text=Lemma]

\defineenumeration
  [proof]
  [      text=Proof,
    headstyle=italic,
   titlestyle=italic,
        style=normal,
       number=no,
    titleleft=,
   titleright=,
      stopper=.,
    endmarker=\math{\square},
  ]

\starttext

\startproblem[prob:basic] {Finite Horizon Real||Time Communication Problem}
  Assume that the encoder and the receiver know the source statistics
  $P_{X_1}$ and $P_{X_{t+1} \mid X_t}$, $t=1,\dots,T$, the forward and
  backward channel functions $ H =  h$, $\tilde H = {\tilde h}$, the forward
  and the backward channel noise statistics $P_N$ and $P_{\tilde N}$, the
  distortion functions $\rho_t(\cdot)$, $t=1,\dots,T$ and the time horizon
  $T$. Choose a design $(C,G,L)$ that is optimal with respect to
  performance criterion of~(10), i.e.,
  \placeformula[eq:optimal-cost]\startformula
    J_T(C,G,L) = J_T =
    \min_{ \startsubstack
             \NC C \in  C^T \NR
             \NC G \in  G^T \NR
             \NC L \in  L^T \NR
           \stopsubstack}
           J_T(C,G,L),
  \stopformula
  where $ C^T =  C_1 \times \cdots \times  C_T$, $
  C_t$ is the family of functions from $ X^t \times \tilde { Y}
  \to  Z$, $ G^T =  G \times \dots  G$
  ($T$||times), $ G$ is the family of functions from $ Y \times
   M \to \hat { X}$, $ L^T =  L \times \dots
   L$ ($T$||times), and $ L$ is the family of functions from
  $ Y \times  M \to  M$.
\stopproblem

\startproof
  \startitemize[a,intro]
    \item Consider a component of $\bar B_t$:
      \input tufte
    \item Consider a component of $\dot B_t$:
      \input tufte
    \item Consider a component of $\hat B_t$: 
      \input tufte
      \placeendmarker
  \stopitemize
\stopproof

\input knuth

\stoptext

-------------- next part --------------
% To see if multi theorems can have the same number.

\input core-des

\defineenumeration[theorem][text=Theorem,title=yes,style=italic]
\defineenumeration[definition][text=Definition,usenumber=theorem]
% use number is the key

\starttext

\starttheorem {First Theorem}
  \input zapf
\stoptheorem

\startdefinition {Test Title} %This should not be bold.
  \input knuth
\stopdefinition

\starttheorem {Second Theorem}
  \input zapf
\stoptheorem


\stoptext
-------------- next part --------------
% Sharing all features

\input core-des

\defineenumeration[theorem][text=Theorem,title=yes,style=italic]
\defineenumeration[definition][theorem][text=Definition]

\starttext

\starttheorem {First Theorem}
  \input zapf
\stoptheorem

\startdefinition {Test Title}
  \input knuth
\stopdefinition

\starttheorem {Second Theorem}
  \input zapf
\stoptheorem


\stoptext
-------------- next part --------------
% conversion=whatever works with enumerations now.

\input core-des

\defineenumeration [theorem]    [text=Theorem,conversion=Character]

\starttext

\theorem 
\input knuth

\stoptext
-------------- next part --------------
A non-text attachment was scrubbed...
Name: core-des.tex
Type: application/octet-stream
Size: 32354 bytes
Desc: 
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070601/e2525ede/attachment-0001.obj 
-------------- next part --------------
% If you do not want to show titles

\input core-des

\defineenumeration [theorem]    [text=Theorem, titlecommand=\gobbleoneargument]

\starttext

\starttheorem {Whatever}
  \input tufte
\stoptheorem

\stoptext

From pragma at wxs.nl  Sat Jun  2 21:53:35 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 02 Jun 2007 21:53:35 +0200
Subject: [dev-context] Enhancements to core-des for theorems
In-Reply-To: <alpine.WNT.0.99.0706010138210.1748@nqvgln>
References: <alpine.WNT.0.99.0706010138210.1748@nqvgln>
Message-ID: <4661CABF.6030401@wxs.nl>

Aditya Mahajan wrote:
> Hi Hans,
>
> I am attaching my enhancements for core-des. This takes care of most 
> of the needs for theorems with ConTeXt. I hope that I have not broken 
> anything. I have tested this with a 40 page documents, while Oliver, 
> Olaf, and Dalyoung have tested this with bigger documents. The test 
> files show different features.
>
> It takes care of a few bugs in enumerations, (and introduces new 
> ones... there is a suprious space somewhere which I can not find)
> Basically, more enhanced support for titles, and end of proof markers, 
> and makes sure that conversion=whatever works correctly.
       \descriptionparameter\c!right%
      }}  <======= here is your space
     \doifnot{#1}{-}{\rawreference\s!num{#1}{}}%


           \strut\doshowdnnumber%
           \showdntitle{#2} <======= here is another space
       %AM: Remaining part of \domakednnumbed


       \descriptionparameter\c!left
       \showdntitle{#2} <======= here is another space
       \descriptionparameter\c!stopper


most of the %'s you added are not needed, e.g. never after a \macroname

>
> For end of proof markers, say
>
\def\placeendmarker
  {\@EA\ifcase \csname dnendmarker\currentdescription\endcsname
     \global\@EA\chardef\csname 
dnendmarker\currentdescription\endcsname\plusone
     \doifsomething{\descriptionparameter\c!endmarker}
%         {\pushright{\descriptionparameter\c!endmarker}}\fi}
        {\wordright{\descriptionparameter\c!endmarker}}\fi}

this is what wordright was made for; maybe it can be improved but thsi 
qed stuff looks too complex to me (may also interfere with other things)

> \definetheorem[theorem][endmarker=\math{\square}] or whatever symbol 
> you want.
>
> Then a end of proof marker with will be placed at the \stoptheorem. 
> Sometimes, for example after an itemize, the end of thoerem marker may 
> appear on a line of its own. Then say \placenedmarker just before 
> \stopitemize
>
> To couple two enumerations
>
> \defineenumeration[theorem]
> \defineenumeration[proposition][theorem]
>
> To couple just the numbers
>
> \defineenumeration[theorem]
> \defineenumeration[proposition][usenumer=theorem]
>
> I cannot use number=theorem because number=yes|no is to enable disable 
> numbering. Maybe a better choice will be numbering=yes|no, and 
> number=counter. But that will break backward compatibility :(
\defineenumeration[proposition][theorem]

will inherit and then you can set up proposition independently
>
> The main thing that needs to be done is to get end of proof markers to 
> work with formulas, but that is a bit difficult, so I have left it for 
> the future.
i need to give this some thought ...

endmark     -> endsymbol (we use symbol for other things; mark is too 
much related to marks)
usenumber  -> have to think of it, cloning happens more (\c!coupling is 
used low level)

There is some code i made for David Antos:
 
           \doif{\descriptionparameter\c!title}\v!yes % new, for david antos
             {\doattributes{\??dd\currentdescription}\c!titlestyle\c!titlecolor
                {\hskip\descriptionparameter\c!titledistance\begstrut#2\endstrut}}%

did you check if his usage still works? (at least we need to tell David what to use now) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From adityam at umich.edu  Sat Jun  2 23:43:16 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Sat, 2 Jun 2007 17:43:16 -0400 (EDT)
Subject: [dev-context] Enhancements to core-des for theorems
In-Reply-To: <4661CABF.6030401@wxs.nl>
References: <alpine.WNT.0.99.0706010138210.1748@nqvgln>
	<4661CABF.6030401@wxs.nl>
Message-ID: <alpine.WNT.0.99.0706021733270.3232@nqvgln>

On Sat, 2 Jun 2007, Hans Hagen wrote:

> Aditya Mahajan wrote:
>> Hi Hans,
>> 
>> I am attaching my enhancements for core-des. This takes care of most of the 
>> needs for theorems with ConTeXt. I hope that I have not broken anything. I 
>> have tested this with a 40 page documents, while Oliver, Olaf, and Dalyoung 
>> have tested this with bigger documents. The test files show different 
>> features.
>> 
>> It takes care of a few bugs in enumerations, (and introduces new ones... 
>> there is a suprious space somewhere which I can not find)
>> Basically, more enhanced support for titles, and end of proof markers, and 
>> makes sure that conversion=whatever works correctly.
>      \descriptionparameter\c!right%
>     }}  <======= here is your space
>    \doifnot{#1}{-}{\rawreference\s!num{#1}{}}%
>
>
>          \strut\doshowdnnumber%
>          \showdntitle{#2} <======= here is another space
>      %AM: Remaining part of \domakednnumbed
>
>
>      \descriptionparameter\c!left
>      \showdntitle{#2} <======= here is another space
>      \descriptionparameter\c!stopper
>
>
> most of the %'s you added are not needed, e.g. never after a \macroname

Thanks, I am still learning this space % stuff.

>> 
>> For end of proof markers, say
>> 
> \def\placeendmarker
> {\@EA\ifcase \csname dnendmarker\currentdescription\endcsname
>    \global\@EA\chardef\csname 
> dnendmarker\currentdescription\endcsname\plusone
>    \doifsomething{\descriptionparameter\c!endmarker}
> %         {\pushright{\descriptionparameter\c!endmarker}}\fi}
>       {\wordright{\descriptionparameter\c!endmarker}}\fi}
>
> this is what wordright was made for; maybe it can be improved but thsi qed 
> stuff looks too complex to me (may also interfere with other things)

I had a look at \wordright. The trouble is that \wordright makes no 
attempt to prevent a page break if it is on a line of its own. It it 
can be enhanced to take that into account, that is fine with me. The 
placed of endofproof symbol is complicated. amsthm, does something 
similar to qed.sty, while ntheorem goes into a two pass mechansim to 
get the placement right.


>> \definetheorem[theorem][endmarker=\math{\square}] or whatever symbol you 
>> want.
>> 
>> Then a end of proof marker with will be placed at the \stoptheorem. 
>> Sometimes, for example after an itemize, the end of thoerem marker may 
>> appear on a line of its own. Then say \placenedmarker just before 
>> \stopitemize
>> 
>> To couple two enumerations
>> 
>> \defineenumeration[theorem]
>> \defineenumeration[proposition][theorem]
>> 
>> To couple just the numbers
>> 
>> \defineenumeration[theorem]
>> \defineenumeration[proposition][usenumer=theorem]
>> 
>> I cannot use number=theorem because number=yes|no is to enable disable 
>> numbering. Maybe a better choice will be numbering=yes|no, and 
>> number=counter. But that will break backward compatibility :(
> \defineenumeration[proposition][theorem]
>
> will inherit and then you can set up proposition independently

Yes, but that is doing a lot of work simply to inherit the number.

>> The main thing that needs to be done is to get end of proof markers to work 
>> with formulas, but that is a bit difficult, so I have left it for the 
>> future.
> i need to give this some thought ...
>
> endmark     -> endsymbol (we use symbol for other things; mark is too much 
> related to marks)

Ok.

> usenumber  -> have to think of it, cloning happens more (\c!coupling is used 
> low level)
>
> There is some code i made for David Antos:
>
>          \doif{\descriptionparameter\c!title}\v!yes % new, for david antos
>            {\doattributes{\??dd\currentdescription}\c!titlestyle\c!titlecolor
>               {\hskip\descriptionparameter\c!titledistance\begstrut#2\endstrut}}%
>
> did you check if his usage still works? (at least we need to tell David what 
> to use now)

I think that the old code will still work. There may a change in the 
default behaviour of stopper. If I remember correctly, earlier we had,

<enumeration><left><number><right><stopper><title>

and now I have

<enumeration><left><number><right><title><stopper> which seems to be 
more common.

Aditya

From adityam at umich.edu  Sun Jun  3 01:09:39 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Sat, 2 Jun 2007 19:09:39 -0400 (EDT)
Subject: [dev-context] Enhancements to core-des for theorems
In-Reply-To: <alpine.WNT.0.99.0706021733270.3232@nqvgln>
References: <alpine.WNT.0.99.0706010138210.1748@nqvgln>
	<4661CABF.6030401@wxs.nl>
	<alpine.WNT.0.99.0706021733270.3232@nqvgln>
Message-ID: <alpine.WNT.0.99.0706021852410.3232@nqvgln>

On Sat, 2 Jun 2007, Aditya Mahajan wrote:

>> this is what wordright was made for; maybe it can be improved but thsi qed
>> stuff looks too complex to me (may also interfere with other things)
>
> I had a look at \wordright. The trouble is that \wordright makes no
> attempt to prevent a page break if it is on a line of its own. It it
> can be enhanced to take that into account, that is fine with me. The
> placed of endofproof symbol is complicated. amsthm, does something
> similar to qed.sty, while ntheorem goes into a two pass mechansim to
> get the placement right.

Actually, the only part of qed.sty that I use is this:

\def\parag at pushright#1{{% set up
     \parfillskip=0pt            % so \par doesnt push \square to left
     \widowpenalty=10000         % so we dont break the page before \square
     \displaywidowpenalty=10000  % ditto
     \finalhyphendemerits=0      % TeXbook exercise 14.32
     %
     %                   horizontal
     %\leavevmode                % not needed since we now only use it in hmode
     \hbox at pushright             % this used to be incorporated
     #1%                         % the end-of-proof mark (or whatever)
     %
     %                     vertical
     \par}}%                     % build paragraph with the above 
parameters

\def\hbox at pushright{% horizontal
     \unskip                     % remove previous space or glue
     \nobreak                    % don't break lines
     \hfil                       % ragged right if we spill over
     \penalty50                  % discouragement to do so
     \hskip.2em                  % ensure some space
     \null                       % anchor the following \hfill
     \hfill                      % push \square to right
}%


Compare with \wordright

\def\dowordright[#1]%
   {% don't change
    \groupedcommand
      {\removeunwantedspaces
       \hfill
       \allowbreak % changed back from \hskip\zeropoint
       \strut
       \hfill
       \quad % decent spacing
       \hbox}

{\doifelse{#1}\v!right{\kern-\rightskip}{\doifsomething{#1}{\kern-#1}}%
       \parfillskip\zeropoint
       \par}}


And there is also \signed from the texbook

\def\signed #1 (#2){{\unskip\nobreak\hfil\penalty50
          \hskip2em\hbox{}\nobreak\hfil\sl#1\/ \rm(#2)
          \parfillskip=0pt \finalhyphendemerits=0 \par}}


What was the motivation for \wordright? I thought it was same as 
\signed in the TeXbook (pg 106). But \signed uses \nobreak 
(\penality1000) and \penality50, \wordright uses 
allowbreak (\penality0). And then there is \finalhypendemerits=0 which 
is "missing".

And if you are relooking this macro, it will be nice to have the 
\hfill configurable (dotfill or something fancier)

Aditya

From adityam at umich.edu  Sun Jun  3 18:05:57 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Sun, 3 Jun 2007 12:05:57 -0400 (EDT)
Subject: [dev-context] todo template on Contextgarden
Message-ID: <alpine.WNT.0.99.0706031204290.292@nqvgln>

Hi Patrick,

It seems that the update at the garden broke down todo and note 
templates. See for example http://wiki.contextgarden.net/TeXExec
Can this be corrected?

Aditya

From pragma at wxs.nl  Sun Jun  3 18:17:11 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 03 Jun 2007 18:17:11 +0200
Subject: [dev-context] Enhancements to core-des for theorems
In-Reply-To: <alpine.WNT.0.99.0706021733270.3232@nqvgln>
References: <alpine.WNT.0.99.0706010138210.1748@nqvgln>
	<4661CABF.6030401@wxs.nl>
	<alpine.WNT.0.99.0706021733270.3232@nqvgln>
Message-ID: <4662E987.6010802@wxs.nl>

Aditya Mahajan wrote:
>
> I had a look at \wordright. The trouble is that \wordright makes no 
> attempt to prevent a page break if it is on a line of its own. It it 
> can be enhanced to take that into account, that is fine with me. The 
> placed of endofproof symbol is complicated. amsthm, does something 
> similar to qed.sty, while ntheorem goes into a two pass mechansim to 
> get the placement right.
i never tested it but in pdftex we can add a "\vadjust pre {\nobreak}" ; 
the problem with tricks is that it will break other things; the only 
work in controlled situations
> Yes, but that is doing a lot of work simply to inherit the number.
well, as long as tex is doing the work ... the advantage is that other 
number related things also inherit

Hans


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From adityam at umich.edu  Sun Jun  3 18:46:03 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Sun, 3 Jun 2007 12:46:03 -0400 (EDT)
Subject: [dev-context] Enhancements to core-des for theorems
In-Reply-To: <4662E987.6010802@wxs.nl>
References: <alpine.WNT.0.99.0706010138210.1748@nqvgln>
	<4661CABF.6030401@wxs.nl>
	<alpine.WNT.0.99.0706021733270.3232@nqvgln> <4662E987.6010802@wxs.nl>
Message-ID: <alpine.WNT.0.99.0706031221140.292@nqvgln>

On Sun, 3 Jun 2007, Hans Hagen wrote:

> Aditya Mahajan wrote:
>> 
>> I had a look at \wordright. The trouble is that \wordright makes no attempt 
>> to prevent a page break if it is on a line of its own. It it can be 
>> enhanced to take that into account, that is fine with me. The placed of 
>> endofproof symbol is complicated. amsthm, does something similar to 
>> qed.sty, while ntheorem goes into a two pass mechansim to get the placement 
>> right.
> i never tested it but in pdftex we can add a "\vadjust pre {\nobreak}" ; the 
> problem with tricks is that it will break other things; the only work in 
> controlled situations

Maybe then also add an option for \endsymbolcommand. Let the core 
implement the safest way to do things; the adventurous user (or a 
module) can change the placement mechanism to whatever he/she wants.

>> Yes, but that is doing a lot of work simply to inherit the number.
> well, as long as tex is doing the work ... the advantage is that other number 
> related things also inherit

That is true. I had not thought about conversion, numberstyle, and 
such things.

There is another thing, which is more important from a style writer's 
point of view, rather than the user's. Suppose I am writing a module 
for IEEE journals, and they want their theorms in a particular style. 
Suppose there are two styles, one for theorems and propositions (say 
stlyeA), and one for definitions and remarks (say styleB). In the 
module I can define four enumerations, with appropriate styles.

\defineenumeration[theorem]
\defineenumeration[proposition]

\setupenumerations[theorem,proposition][settings for styleA]

and similar for styleB.

Now suppose a user wants to have a new enumeration, called lemma, in 
styleA. How does he do that? The options are:

1. Looks into the IEEE module and copies settings for styleA.
2. does something like

\definenumber[lemma]
\defineenumeration[lemma][theorem][number=lemma]

An alternative approach is to define a new object called 
enumerationalternative. So that things can be

\defineenumerationalternative[styleA][settings for styleA]

\defineenumeration[theorem][alternative=styleA], etc.

This is roughly what LaTeX does, and most math users have come to 
expect something like this. This should not be too difficult to 
implement. \defineenumerationalterative can simply do 
\getvariables[\??dd\c!alternative#1]

and \defineenumeration can see if alternative is something and copy 
parameters from \??dd\c!alternative.

Do you think it makes sense to add this in the core?

Aditya

From patrick at gundla.ch  Sun Jun  3 19:00:27 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sun, 03 Jun 2007 19:00:27 +0200
Subject: [dev-context] todo template on Contextgarden
In-Reply-To: <alpine.WNT.0.99.0706031204290.292@nqvgln> (Aditya Mahajan's
	message of "Sun, 3 Jun 2007 12:05:57 -0400 (EDT)")
References: <alpine.WNT.0.99.0706031204290.292@nqvgln>
Message-ID: <m1zm3hdlck.fsf@levana.de>

Hello,

(I've sent a private mail to Aditya before I realized that this is a
mail on dev-context - There is no need to cc: me anymore, since I am
now reading all context mailinglist on a regular basis)

> It seems that the update at the garden broke down todo and note
> templates. See for example http://wiki.contextgarden.net/TeXExec
> Can this be corrected?

This is the reason:

http://archive.contextgarden.net/message/20070425.150556.02652b8a.en.html

The wiki is now case sensitive and all 'incorrect' links (such as 'todo:template' instead of Todo:template') are broken now. There are of course two possible fixes, one is to revert to case insensitive links and the second is to fix all broken links. I'd opt for the second fix, unless anybody cries out loud.


Patrick

From pragma at wxs.nl  Sun Jun  3 19:47:10 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 03 Jun 2007 19:47:10 +0200
Subject: [dev-context] Enhancements to core-des for theorems
In-Reply-To: <alpine.WNT.0.99.0706031221140.292@nqvgln>
References: <alpine.WNT.0.99.0706010138210.1748@nqvgln>
	<4661CABF.6030401@wxs.nl>
	<alpine.WNT.0.99.0706021733270.3232@nqvgln>
	<4662E987.6010802@wxs.nl>
	<alpine.WNT.0.99.0706031221140.292@nqvgln>
Message-ID: <4662FE9E.2070300@wxs.nl>

Aditya Mahajan wrote:
> \definenumber[lemma]
> \defineenumeration[lemma][theorem][number=lemma]
>
> Do you think it makes sense to add this in the core?
well, it's basically there so i'll give it a try 

Hans 



-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From adityam at umich.edu  Mon Jun  4 00:53:13 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Sun, 3 Jun 2007 18:53:13 -0400 (EDT)
Subject: [dev-context] todo template on Contextgarden
In-Reply-To: <m1zm3hdlck.fsf@levana.de>
References: <alpine.WNT.0.99.0706031204290.292@nqvgln>
	<m1zm3hdlck.fsf@levana.de>
Message-ID: <alpine.WNT.0.99.0706031850240.1436@nqvgln>

On Sun, 3 Jun 2007, Patrick Gundlach wrote:

> Hello,
>
> (I've sent a private mail to Aditya before I realized that this is a
> mail on dev-context - There is no need to cc: me anymore, since I am
> now reading all context mailinglist on a regular basis)

Ok. Great.

>> It seems that the update at the garden broke down todo and note
>> templates. See for example http://wiki.contextgarden.net/TeXExec
>> Can this be corrected?
>
> This is the reason:
>
> http://archive.contextgarden.net/message/20070425.150556.02652b8a.en.html
>
> The wiki is now case sensitive and all 'incorrect' links (such as 'todo:template' instead of Todo:template') are broken now. There are of course two possible fixes, one is to revert to case insensitive links and the second is to fix all broken links. I'd opt for the second fix, unless anybody cries out loud.

Another option is to create Template:todo pages. I tried that it seems 
to work. Easier than correcting all pages by hand. I copied 
Template:Todo to Template:todo and moved Template:note to 
Template:note. Hopefully, everything will be fine now.

Aditya

From adityam at umich.edu  Mon Jun  4 06:08:05 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 4 Jun 2007 00:08:05 -0400 (EDT)
Subject: [dev-context] delimitedtext indentnext bug
Message-ID: <alpine.WNT.0.99.0706032359370.3980@nqvgln>

Hi,

There is a bug in delimitedtext with indentnext. For example


\setupdelimitedtext[quotation][indentnext=no]
\setupwhitespace[big]
\setupindenting[big,yes]

\starttext
\input knuth
\startquotation
   \input tufte
\stopquotation
\input knuth
\stoptext

The text after the quotation is indented. This is a bug. I think that 
this can be corrected by

\def\dostartdelimitedtextpar[#1]%
   {\let\dostopdelimitedtext\dostopdelimitedtextpar
    \doifsomething{\delimitedtextparameter\c!spacebefore}
      {\blank[\delimitedtextparameter\c!spacebefore]}%
    \delimitedtextparameter\c!before
    % nicer:
    % \doadaptleftskip {\delimitedtextparameter\c!leftmargin}%
    % \doadaptrightskip{\delimitedtextparameter\c!rightmargin}%
    % backward compatible:
    \doifelsenothing{#1}
      {\endgraf
       \doadaptleftskip {\delimitedtextparameter\c!leftmargin}%
       \doadaptrightskip{\delimitedtextparameter\c!rightmargin}%
       \let\dodostopdelimitedtextpar\endgraf}
      {\startnarrower[#1]\let\dodostopdelimitedtextpar\stopnarrower}%
    % so far
    % \dochecknextindentation{\??ci\currentdelimitedtext}% AM: not here
    \dostartattributes{\??ci\currentdelimitedtext}\c!style\c!color\empty
    \leftdelimitedtextmark
    \ignorespaces}

\def\dostopdelimitedtextpar
   {\removeunwantedspaces
    \removelastskip
    \rightdelimitedtextmark
    \dostopattributes
    \dodostopdelimitedtextpar
    \delimitedtextparameter\c!after
    \doifsomething{\delimitedtextparameter\c!spaceafter}
      {\blank[\delimitedtextparameter\c!spaceafter]}%
    \dochecknextindentation{\??ci\currentdelimitedtext}% AM: here
    \dorechecknextindentation}%AM: This was missing!

Aditya


From pragma at wxs.nl  Mon Jun  4 11:10:11 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 04 Jun 2007 11:10:11 +0200
Subject: [dev-context] delimitedtext indentnext bug
In-Reply-To: <alpine.WNT.0.99.0706032359370.3980@nqvgln>
References: <alpine.WNT.0.99.0706032359370.3980@nqvgln>
Message-ID: <4663D6F3.4020806@wxs.nl>

Aditya Mahajan wrote:
> Hi,
>
> There is a bug in delimitedtext with indentnext. For example
>
>
> \setupdelimitedtext[quotation][indentnext=no]
> \setupwhitespace[big]
> \setupindenting[big,yes]
>
> \starttext
> \input knuth
> \startquotation
>    \input tufte
> \stopquotation
> \input knuth
> \stoptext
>
> The text after the quotation is indented. This is a bug. I think that 
> this can be corrected by
>   
ok, patched with no checking done at my side -) 

Hans 

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------


From sanjoy at mrao.cam.ac.uk  Mon Jun  4 18:32:35 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Mon, 04 Jun 2007 12:32:35 -0400
Subject: [dev-context] Ubuntu pkgs: new edgy backports
Message-ID: <E1HvFTv-0002Zp-LZ@approximate.corpus.cam.ac.uk>

I just updated the Ubuntu edgy backports of the texlive packages (for
i386) and have been running them on my feisty laptop for half an hour
and they pass my usual 'compile textbook in ConTeXt' test.  The
'context' package provides version 2007.04.17 12:51.

They are recompilations of the latest Ubuntu gutsy (7.10) packages,
which are Norbert's latest Debian packages with maybe a couple additions
(on the other hand, Ubuntu and Debian look like they are in sync right
now).  Let me know if you have problems.

To use the packages, add these lines to your /etc/apt/sources.list :

  deb     http://web.mit.edu/download/sanjoy/texlive-backports/ edgy/
  deb-src http://web.mit.edu/download/sanjoy/texlive-backports/ edgy/

To add my key (to use the security features of apt-get):

  wget http://www.inference.phy.cam.ac.uk/sanjoy/sanjoy.asc
  sudo apt-key add sanjoy.asc

Then

 apt-get update
 apt-get install cm-super texlive-fonts-recommended \
                 context context-nonfree context-doc-nonfree

('cm-super comes from the universe repositories)

If you've been using them before, you don't need the install line with
explicit pkgs.  Instead just update with

 apt-get upgrade

-Sanjoy

gpg DSA: 0x3FCDAAA3
gpg  fp: 9722 56B0 F787 12A9 164E  34B7 09C9 E543 3FCD AAA3

From peter.rolf at arcor.de  Thu Jun 14 23:32:57 2007
From: peter.rolf at arcor.de (Peter Rolf)
Date: Thu, 14 Jun 2007 23:32:57 +0200
Subject: [dev-context] \setlayer + \externalfigure  problem
Message-ID: <4671B409.30600@arcor.de>

Hi,

I ran into a \setlayer problem while including a bitmap graphic from a
figure database. The position of the gfx was slightly shifted to the
right. No problems, if I included the identical graphic from a single file.

\setlayer[foo][x=0pt,y=0pt ]{\externalfigure[gfx_from_a_db.png]}% shift!
\setlayer[foo][x=0pt,y=50pt]{\vbox{\externalfigure[gfx_from_a_db.png]}}%  ok
\setlayer[foo][x=0pt,y=100pt]{\externalfigure[gfx.png]}% ok
\setlayer[foo][x=0pt,y=150pt]{\hbox{\externalfigure[gfx.png]}}% shift

The result of \externalfigure differs (mode) for the two inclusion
methods. Also it looks like \setlayer does not ensure, that the content
is in the (position neutral) vertical mode. Is there a reason for this?
Currently I fixed it locally with

\ifhmode\vbox\bgroup#1\egroup\else#1\fi ,

but a more global approach would be prefered.

Any comments welcome.


Greetings,  Peter

From schuster.wolfgang at googlemail.com  Fri Jun 15 20:23:56 2007
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Fri, 15 Jun 2007 20:23:56 +0200
Subject: [dev-context] \setlayer + \externalfigure  problem
In-Reply-To: <4671B409.30600@arcor.de>
References: <4671B409.30600@arcor.de>
Message-ID: <20070615202356.2a054c0c.schuster.wolfgang@googlemail.com>

On Thu, 14 Jun 2007 23:32:57 +0200
Peter Rolf <peter.rolf at arcor.de> wrote:

> Hi,
> 
> I ran into a \setlayer problem while including a bitmap graphic from a
> figure database. The position of the gfx was slightly shifted to the
> right. No problems, if I included the identical graphic from a single file.
> 
> \setlayer[foo][x=0pt,y=0pt ]{\externalfigure[gfx_from_a_db.png]}% shift!
> \setlayer[foo][x=0pt,y=50pt]{\vbox{\externalfigure[gfx_from_a_db.png]}}%  ok
> \setlayer[foo][x=0pt,y=100pt]{\externalfigure[gfx.png]}% ok
> \setlayer[foo][x=0pt,y=150pt]{\hbox{\externalfigure[gfx.png]}}% shift
> 
> The result of \externalfigure differs (mode) for the two inclusion
> methods. Also it looks like \setlayer does not ensure, that the content
> is in the (position neutral) vertical mode. Is there a reason for this?
> Currently I fixed it locally with
> 
> \ifhmode\vbox\bgroup#1\egroup\else#1\fi ,
> 
> but a more global approach would be prefered.
> 
> Any comments welcome.
> 
> 
> Greetings,  Peter

Hi Peter,

can you send a test file with figure database.

Wolfgang

From adityam at umich.edu  Sun Jun 17 08:25:11 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Sun, 17 Jun 2007 02:25:11 -0400 (EDT)
Subject: [dev-context] Month missing in inproceedings in cont-no
Message-ID: <alpine.WNT.0.99.0706170216140.2524@nqvgln>

Hi Taco,

Month is missing from inproceedings in cont-no.bst. It should be (if I 
understand the bst language correctly)

   FUNCTION {inproceedings}
   { start.entry
     format.authors
     format.year
     format.arttitle
     crossref missing$
       { format.in.booktitle.or.series
         format.number.series
         "" "\city" address do.out
         format.pages
       }
       { format.incoll.inproc.crossref
         format.pages
       }
     if$
+   "" "\month" month do.out
     "" "\pubname" publisher do.out
     "" "\organization" organization do.out
     stop.entry
   }

Also, in the bib module, can setuppublicationlayout be made to accept 
sets, so that one can write

\definepublicationlayout[conference,inproceedings]{....}

rather than repeating the instructions. (Why does bibtex provide two 
data types for the same thing?)


Aditya

From adityam at umich.edu  Sun Jun 17 22:43:32 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Sun, 17 Jun 2007 16:43:32 -0400 (EDT)
Subject: [dev-context] unzipping error on garden
Message-ID: <alpine.WNT.0.99.0706171639530.3492@nqvgln>

Hi Patrick,

I uploaded a new version of my mathsets module on the garden, and 
got an error:

Unzipping (for CTAN) returned with an error

As far as I can tell, the unzipping went fine. IS the error message a 
bug in the garden scripts?

I had generated the zip file using

textools --tpmmake t-mathsets

Thanks,
Aditya

From patrick at gundla.ch  Sun Jun 17 23:30:41 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sun, 17 Jun 2007 23:30:41 +0200
Subject: [dev-context] unzipping error on garden
In-Reply-To: <alpine.WNT.0.99.0706171639530.3492@nqvgln> (Aditya Mahajan's
	message of "Sun, 17 Jun 2007 16:43:32 -0400 (EDT)")
References: <alpine.WNT.0.99.0706171639530.3492@nqvgln>
Message-ID: <m1tzt62rr2.fsf@levana.de>

Hello Aditya,

> I uploaded a new version of my mathsets module on the garden, and 
> got an error:
>
> Unzipping (for CTAN) returned with an error
>
> As far as I can tell, the unzipping went fine. IS the error message a 
> bug in the garden scripts?

Most likely. I'll take a look into it tomorrow.

Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net

From adityam at umich.edu  Sun Jun 17 23:47:14 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Sun, 17 Jun 2007 17:47:14 -0400 (EDT)
Subject: [dev-context] Agressive deleting by texexec
Message-ID: <alpine.WNT.0.99.0706171742440.3492@nqvgln>

Hi Hans,

texexec seems to be a bit too agressive in deleting files. Here is an 
example

touch texexec.vim
texexec --module test
ls texexec*

The file texexec.vim has been deleted! I could not figure out why this 
is happening, but texexec must should delete non tex related filename 
extensions.

Aditya

From taco at elvenkind.com  Mon Jun 18 09:16:42 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 18 Jun 2007 09:16:42 +0200
Subject: [dev-context] Month missing in inproceedings in cont-no
In-Reply-To: <alpine.WNT.0.99.0706170216140.2524@nqvgln>
References: <alpine.WNT.0.99.0706170216140.2524@nqvgln>
Message-ID: <4676315A.2090101@elvenkind.com>

Aditya Mahajan wrote:
> Hi Taco,
> 
> Month is missing from inproceedings in cont-no.bst. It should be (if I 
> understand the bst language correctly)

Added to the todo list.

> Also, in the bib module, can setuppublicationlayout be made to accept 
> sets, so that one can write
> 
> \definepublicationlayout[conference,inproceedings]{....}

Change the definition to this, and it should work:

   \def\setuppublicationlayout[#1]#2%
     {\def\dosetuppublicationlayout##1%
        {\setvalue{\??pv data##1}{#2\unskip}}%
      \processcommalist[#1]\dosetuppublicationlayout}

> rather than repeating the instructions. (Why does bibtex provide two 
> data types for the same thing?)

I have long ago given up on rationalizing bibtex behaviour :-)

Taco

From patrick at gundla.ch  Mon Jun 18 11:29:03 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Mon, 18 Jun 2007 11:29:03 +0200
Subject: [dev-context] unzipping error on garden
In-Reply-To: <alpine.WNT.0.99.0706171639530.3492@nqvgln> (Aditya Mahajan's
	message of "Sun, 17 Jun 2007 16:43:32 -0400 (EDT)")
References: <alpine.WNT.0.99.0706171639530.3492@nqvgln>
Message-ID: <m1ps3t3928.fsf@levana.de>

Hello Aditya,

> I uploaded a new version of my mathsets module on the garden, and 
> got an error:
>
> Unzipping (for CTAN) returned with an error
>
> As far as I can tell, the unzipping went fine. IS the error message a 
> bug in the garden scripts?

Yes, but the preparation for CTAN was broken. Thanks for the report,
it is fixed now.

Patrick

-- 
ConTeXt wiki and more: http://contextgarden.net

From preining at logic.at  Thu Jun 21 09:16:37 2007
From: preining at logic.at (Norbert Preining)
Date: Thu, 21 Jun 2007 09:16:37 +0200
Subject: [dev-context] New Debian TeX packages for Etch
Message-ID: <20070621071637.GE29155@gamma.logic.tuwien.ac.at>

Hi all!

The new packages uploaded yesterday by Frank to Debian unstable have
been backported to etch are as usual available on people.debian.org.
Don't forget that you will also need lmodern and context for
texlive-full.

Binaries of texlive-bin 2007-12 are currently only for i386, I hope to
get powerpc binaries soon. If there is need for amd64 I can do them,
too.

texlive and tex-common
 	deb http://people.debian.org/~preining/TeX/ tl2007/
 	deb-src http://people.debian.org/~preining/TeX/ src/

lmodern
	deb http://people.debian.org/~preining/TeX/ lmodern/
	deb-src http://people.debian.org/~preining/TeX/ lmodern/

context
 	deb http://people.debian.org/~preining/TeX/ context/
 	deb-src http://people.debian.org/~preining/TeX/ context/

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
CLONMULT (n.)
A yellow ooze usually found near secretions of buldoo (q.v.) and
sadberge (q.v.)
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Fri Jun 22 13:34:35 2007
From: preining at logic.at (Norbert Preining)
Date: Fri, 22 Jun 2007 13:34:35 +0200
Subject: [dev-context] New Debian TeX packages for Etch
In-Reply-To: <20070621071637.GE29155@gamma.logic.tuwien.ac.at>
References: <20070621071637.GE29155@gamma.logic.tuwien.ac.at>
Message-ID: <20070622113435.GA22976@gamma.logic.tuwien.ac.at>

On Don, 21 Jun 2007, Norbert Preining wrote:
> Binaries of texlive-bin 2007-12 are currently only for i386, I hope to
> get powerpc binaries soon. If there is need for amd64 I can do them,
> too.

Now for i386 and amd64.

For powerpc still 2007-11.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
BAUGHURST
That kind of large fierce ugly woman who owns a small fierce ugly dog.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Sun Jun 24 10:11:06 2007
From: preining at logic.at (Norbert Preining)
Date: Sun, 24 Jun 2007 10:11:06 +0200
Subject: [dev-context] New Debian TeX packages for Etch
In-Reply-To: <20070622113435.GA22976@gamma.logic.tuwien.ac.at>
References: <20070621071637.GE29155@gamma.logic.tuwien.ac.at>
	<20070622113435.GA22976@gamma.logic.tuwien.ac.at>
Message-ID: <20070624081106.GE18602@gamma.logic.tuwien.ac.at>

On Fre, 22 Jun 2007, Norbert Preining wrote:
> > Binaries of texlive-bin 2007-12 are currently only for i386, I hope to
> > get powerpc binaries soon. If there is need for amd64 I can do them,
> > too.
> 
> Now for i386 and amd64.
> 
> For powerpc still 2007-11.

And now also for powerpc we are at 12, thanks again to Thomas A.
Schmitz.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
KURDISTAN (n.)
Hard stare given by a husband to his wife when he notices a sharp
increase in the number of times he answers the phone to be told,
'Sorry, wrong number.'
			--- Douglas Adams, The Meaning of Liff

From patrick at gundla.ch  Tue Jun 26 16:24:43 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Tue, 26 Jun 2007 16:24:43 +0200
Subject: [dev-context] last release broken?
Message-ID: <m11wfy3iac.fsf@levana.de>

Hi,


my automatic install script failed. There is no tex/context/base in
the zip file. Or am I missing something?

Patrick

-- 
ConTeXt wiki and more: http://contextgarden.net

From pragma at wxs.nl  Tue Jun 26 20:10:31 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 26 Jun 2007 20:10:31 +0200
Subject: [dev-context] last release broken?
In-Reply-To: <m11wfy3iac.fsf@levana.de>
References: <m11wfy3iac.fsf@levana.de>
Message-ID: <46815697.2000208@wxs.nl>

Patrick Gundlach wrote:
> Hi,
> 
> 
> my automatic install script failed. There is no tex/context/base in
> the zip file. Or am I missing something?

hm, interesting indeed

(maybe there is something wrong with my script, it's the first public 
beta i generate in my new setup - new machine with windows vista etc)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Tue Jun 26 23:27:41 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 26 Jun 2007 23:27:41 +0200
Subject: [dev-context] last release broken?
In-Reply-To: <m11wfy3iac.fsf@levana.de>
References: <m11wfy3iac.fsf@levana.de>
Message-ID: <468184CD.5050509@wxs.nl>

Hi Patrick

> my automatic install script failed. There is no tex/context/base in
> the zip file. Or am I missing something?

can you give it another try?

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From patrick at gundla.ch  Tue Jun 26 23:55:53 2007
From: patrick at gundla.ch (Patrick Gundlach)
Date: Tue, 26 Jun 2007 23:55:53 +0200
Subject: [dev-context] last release broken?
In-Reply-To: <468184CD.5050509@wxs.nl> (Hans Hagen's message of "Tue,
	26 Jun 2007 23:27:41 +0200")
References: <m11wfy3iac.fsf@levana.de> <468184CD.5050509@wxs.nl>
Message-ID: <m1odj21ity.fsf@levana.de>

Hello Hans,

>> my automatic install script failed. There is no tex/context/base in
>> the zip file. Or am I missing something?
>
> can you give it another try?

Great! Works fine now.

Patrick

From taco at elvenkind.com  Thu Jul 12 08:23:13 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 12 Jul 2007 08:23:13 +0200
Subject: [dev-context] [Fwd: Re: urgent bib bug]
Message-ID: <4695C8D1.4040700@elvenkind.com>

Hi all,

Can someone please have a look at this for me? I have to run off for
TUG2007 now (ye, already), and I could not discover what is wrong.

The problem seems to be with false positives from \doifcurrentlevelelse,
but that is the only thing I could discover til now.

Thanks in advance,
Taco

-------- Original Message --------
Subject: Re: urgent bib bug
Date: Wed, 11 Jul 2007 19:09:00 -0600
From: Idris Samawi Hamid <ishamid at colostate.edu>
Organization: Colorado State University
To: Taco Hoekwater <taco at elvenkind.com>
References: <op.tvbhx2vfnx1yh1 at your-b27fb1c401> 
<469541C5.80200 at elvenkind.com>

Hi,

On Wed, 11 Jul 2007 14:47:01 -0600, Taco Hoekwater <taco at elvenkind.com>
wrote:

> Please send me a short (as short as possible, but complete) example
> and perhaps I can fix it  tomorrow. But I must warn you: I did not do
> anything to the module in months, and there is no new context release,
> so I am absolutely clueless as to what could be going wrong.

Here is a directory which should work out of the box; test file is
bib-test.tex. I think I found the key to the problem: For \title, the
entry of the previous \title is repeated. For \chapter it behaves
correctly.

I define my articles in terms of \title, and each article is within a
\start-stopproduct file. So basically the bib-module needs to support
\title as well (used to do so).

Best wishes
Idris

-- 
Professor Idris Samawi Hamid
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

--
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bib-test.zip
Type: application/zip
Size: 11320 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20070712/4b93f5b1/attachment.zip 

From contexttest-bugs at foundry.supelec.fr  Mon Jul 16 23:39:42 2007
From: contexttest-bugs at foundry.supelec.fr (contexttest-bugs at foundry.supelec.fr)
Date: Mon, 16 Jul 2007 23:39:42 +0200
Subject: [dev-context] [contexttest-Bugs][78] additional blank line in
	starttyping environment
Message-ID: <200707162139.l6GLdgPb010353@foundry.supelec.fr>

Bugs item #78, was opened at 2007-07-16 23:39
You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=78&group_id=21
Or by replying to this e-mail entering your response between the following markers: 
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+
(enter your response here)
#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+#+

Status: Open
Priority: 3
Submitted By: Peter M?nster (peter)
Assigned to: Nobody (None)
Summary: additional blank line in starttyping environment 
Category: macros
Version: None
Resolution: None


Initial Comment:
Hello,

when using align=flushleft and \typebuffer in \framed, additional space is
introduced at the top. Example:

\setupcolors[state=start]
\setuptyping[before=,after=]
\startbuffer
bla
\stopbuffer
\starttext
\framed[background=color,backgroundcolor=red]{\typebuffer}
\framed[align=flushleft,background=color,backgroundcolor=red]{\typebuffer}
\stoptext

Cheers, Peter


----------------------------------------------------------------------

You can respond by visiting: 
http://foundry.supelec.fr/tracker/?func=detail&atid=161&aid=78&group_id=21


From sanjoy at mrao.cam.ac.uk  Wed Jul 25 06:41:48 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Wed, 25 Jul 2007 00:41:48 -0400
Subject: [dev-context] metafun: colored dotlabel fails (fix included)
Message-ID: <E1IDYh2-00041t-2T@approximate.corpus.cam.ac.uk>

In metafun, a colored dotlabel fails.  A fix is included below.

Here is a minimal test file:

  beginfig(1)
    dotlabel(btex etex, origin) withcolor green;
  endfig;
  end

It produces this error:

  $ mpost -mem=metafun t
  This is MetaPost, Version 0.993 (Web2C 7.5.6)
  (t.mp
  ! Extra tokens will be flushed.
  <to be read again> 
		     withcolor
  l.2   dotlabel(btex etex, origin) withcolor
					      green;
  ? 

[I'm using the metafun that was built from context 2007.04.17.]

Metapost used to have this problem, for which John Hobby sent the
following updated definition of dotlabel():

  vardef dotlabel@#(expr s,z) text t_ =
    label@#(s,z) t_;
    interim linecap:=rounded;
    draw z withpen pencircle scaled dotlabeldiam t_;
  enddef;

It is part of the current plain.mp (mpost 0.993).  But the metafun.mp
format-generation file includes mp-base.mp, which has the old definition
of dotlabel:

  vardef dotlabel@#(expr s,z) =
    label@#(s,z);
    interim linecap:=rounded;
    draw z withpen pencircle scaled dotlabeldiam;
  enddef;

The patch below fixes the minimal test case above as well as the
larger real file that I started with:

--- a/metapost/context/base/mp-base.mp	2007-07-25 00:19:15.379198092 -0400
+++ b/metapost/context/base/mp-base.mp	2007-07-25 00:19:37.072411646 -0400
@@ -477,10 +477,10 @@
 
 def label = draw thelabel enddef;
 newinternal dotlabeldiam; dotlabeldiam:=3bp;
-vardef dotlabel@#(expr s,z) =
-  label@#(s,z);
+vardef dotlabel@#(expr s,z) text t_ =
+  label@#(s,z) t_;
   interim linecap:=rounded;
-  draw z withpen pencircle scaled dotlabeldiam;
+  draw z withpen pencircle scaled dotlabeldiam t_;
 enddef;
 def makelabel = dotlabel enddef;
 

From pragma at wxs.nl  Wed Jul 25 14:04:07 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 25 Jul 2007 14:04:07 +0200
Subject: [dev-context] metafun: colored dotlabel fails (fix included)
In-Reply-To: <E1IDYh2-00041t-2T@approximate.corpus.cam.ac.uk>
References: <E1IDYh2-00041t-2T@approximate.corpus.cam.ac.uk>
Message-ID: <46A73C37.2040503@wxs.nl>

Sanjoy Mahajan wrote:

> The patch below fixes the minimal test case above as well as the
> larger real file that I started with:
> 
> --- a/metapost/context/base/mp-base.mp	2007-07-25 00:19:15.379198092 -0400
> +++ b/metapost/context/base/mp-base.mp	2007-07-25 00:19:37.072411646 -0400
> @@ -477,10 +477,10 @@
>  
>  def label = draw thelabel enddef;
>  newinternal dotlabeldiam; dotlabeldiam:=3bp;
> -vardef dotlabel@#(expr s,z) =
> -  label@#(s,z);
> +vardef dotlabel@#(expr s,z) text t_ =
> +  label@#(s,z) t_;
>    interim linecap:=rounded;
> -  draw z withpen pencircle scaled dotlabeldiam;
> +  draw z withpen pencircle scaled dotlabeldiam t_;
>  enddef;
>  def makelabel = dotlabel enddef;

ok, patched

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Wed Aug  8 13:17:44 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 08 Aug 2007 13:17:44 +0200
Subject: [dev-context] [NTG-context] presentation module
In-Reply-To: <B9C73A8F-DFB6-4494-A425-ACE5620CC74D@uni-bonn.de>
References: <33F8F977-757F-4543-86B3-B0E20CC3FE3B@uni-bonn.de>	<20070808071730.GC25932@apcc21.net>	<DAEE4371-C8ED-4D54-8A5A-6C99D3594C47@uni-bonn.de>	<Pine.LNX.4.64.0708081244100.12575@gaston.couberia.bzh>
	<B9C73A8F-DFB6-4494-A425-ACE5620CC74D@uni-bonn.de>
Message-ID: <46B9A658.7090705@elvenkind.com>

Thomas A. Schmitz wrote:
> 
> Sure, that's fine with me! Who generates cont-ext.zip 

Hans, via automatic downloads from the garden.

> and who decides what goes in there? 

That is a somewhat complex question. At least you need to agree
(but you did that already), then Patrick or Mojca or me have to
check the module structure, and you have to agree to any proposed
changes and upload a new version. Then we propose Hans to add a
new download to the script that builds cont-ext.zip.

That's about it, I assume (but I can have missed something).

> I think the module is tds compliant, so that  should be OK!

Proposed changes:

* doc/taspresent -> doc/context/third/taspresent
   This really is important!

* tpm/t-taspresent.tpm  is absent
   I believe I wrote down how to create one in the Epen binder,
   the file is important because it acts as a manifest.

* the source for the user manual is missing, you may consider adding it.
   (I care not, but it is a requirement for texlive inclusion)

Best wishes, Taco

From preining at logic.at  Tue Aug 14 09:34:55 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 14 Aug 2007 09:34:55 +0200
Subject: [dev-context] missing stubs in latest release
Message-ID: <20070814073455.GC21301@gamma.logic.tuwien.ac.at>

Hi Hans!

I am packaging up the latest context release for Debian, and have some
questions before releasing it:
- luatools and mtxtools is missing from scripts/context/unix/stubs, is
  this by intention or by error?
- the debian packages ship additional stubs for:
	pdftrimwhite  texfind  texshow
  which are missing in the above dir, should/could/would you add them?
- besides an additional 
	Recommends: luatex
  do you think that other changes to packaging is necessary? (Not that
  you have to know the internals, this is only a question about some
  major incompatibilities I didn't find on the Wiki...)
- does it make sense to package it now or wait for some more iterations?

Thanks a lot and all the best

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
HUTLERBURN (n.archaic)
A burn sustained as a result of the behaviour of a clumsy hutler. (The
precise duties of hutlers are now lost in the mists of history.)
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Tue Aug 14 11:37:21 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 14 Aug 2007 11:37:21 +0200
Subject: [dev-context] missing stubs in latest release
In-Reply-To: <20070814073455.GC21301@gamma.logic.tuwien.ac.at>
References: <20070814073455.GC21301@gamma.logic.tuwien.ac.at>
Message-ID: <46C177D1.3090902@wxs.nl>

Norbert Preining wrote:
> Hi Hans!
> 
> I am packaging up the latest context release for Debian, and have some
> questions before releasing it:
> - luatools and mtxtools is missing from scripts/context/unix/stubs, is
>   this by intention or by error?

the problem is that some want stubs, some want symlinks ... if you like 
stubs more (my preference btw), then send me the ones as you like them 
and i will include them

> - the debian packages ship additional stubs for:
> 	pdftrimwhite  texfind  texshow
>   which are missing in the above dir, should/could/would you add them?

no real reason, texfind/texshow depend on tk as well, and pdftrimwhite 
is for karl (uses it for tugboat) and he know how to call it

> - besides an additional 
> 	Recommends: luatex
>   do you think that other changes to packaging is necessary? (Not that
>   you have to know the internals, this is only a question about some
>   major incompatibilities I didn't find on the Wiki...)

if texlua and texluac are available then no lua is needed; mkiv needs lm 
opentype and texgyre opentype (used as defaults) so maybe make sure that 
texgyre is installed

the biggest thing is the cache dir but the defaults should ok; if

luatools --verbose --generate
luatools --verbose --make --compile cont-en

works ok, then things should be ok; btw,

luatools --make --compile plain

should also work and gives a plain that can read from zip files and such 
(later i will add open type font support)


> - does it make sense to package it now or wait for some more iterations?

well, we need to start sometime i guess and since your work is the base 
for texlive best get things sorted out asap

thanks,

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From preining at logic.at  Tue Aug 14 12:42:34 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 14 Aug 2007 12:42:34 +0200
Subject: [dev-context] missing stubs in latest release
In-Reply-To: <46C177D1.3090902@wxs.nl>
References: <20070814073455.GC21301@gamma.logic.tuwien.ac.at>
	<46C177D1.3090902@wxs.nl>
Message-ID: <20070814104234.GA19060@gamma.logic.tuwien.ac.at>

On Die, 14 Aug 2007, Hans Hagen wrote:
> stubs more (my preference btw), then send me the ones as you like them 
> and i will include them

Will do.

> if texlua and texluac are available then no lua is needed; mkiv needs lm 

texluac?? texlua I know, what is texluac, also a link to luatex?

> opentype and texgyre opentype (used as defaults) so maybe make sure that 
> texgyre is installed

Ok, will check. Thanks a lot.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
YEPPOON (n.)
One of the hat-hanging corks which Australians wear for making Qantas
commercials.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Tue Aug 14 12:46:59 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 14 Aug 2007 12:46:59 +0200
Subject: [dev-context] missing stubs in latest release
In-Reply-To: <20070814104234.GA19060@gamma.logic.tuwien.ac.at>
References: <20070814073455.GC21301@gamma.logic.tuwien.ac.at>
	<46C177D1.3090902@wxs.nl>
	<20070814104234.GA19060@gamma.logic.tuwien.ac.at>
Message-ID: <46C18823.4010801@wxs.nl>

Norbert Preining wrote:

> texluac?? texlua I know, what is texluac, also a link to luatex?

indeed, it acts as luac, the lua bytecode compiled

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From preining at logic.at  Tue Aug 14 13:53:56 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 14 Aug 2007 13:53:56 +0200
Subject: [dev-context] missing stubs in latest release
In-Reply-To: <46C177D1.3090902@wxs.nl>
References: <20070814073455.GC21301@gamma.logic.tuwien.ac.at>
	<46C177D1.3090902@wxs.nl>
Message-ID: <20070814115356.GB22286@gamma.logic.tuwien.ac.at>

Hi Hans,

On Die, 14 Aug 2007, Hans Hagen wrote:
> opentype and texgyre opentype (used as defaults) so maybe make sure that 
> texgyre is installed

another question: so *PER DEFAULT* you need
	Opentype TeX Gyre
fonts? If yes, then this is a real problem, from the texlive tpm2deb.cfg
file:
	# GYRE fonts have a very strange license ...
	blacklist;tpm;tex-gyre;*
yes, they are blacklisted for now. I don't want to restart a discussion
here, I guess you have heard about this already.

Furthermore, I am not sure whether the tex-gyre fonts as shipped in TeX
Live also contain the OpenType version.

So we have 2 options for Debian:
- package the tex-gyre fonts independently, and see whether it passes
  ftp-masters. I am not sure about that due to the licensing wishywashy.

  After this make context available.

or
- make context use the lmodern fonts

Isn't there any chance that by default context uses the lmodern fonts?
They are wide spread, packaged, easily available, stable.

Is there a reason why you switches from the lm fonts (to which you have
switched also recently) to the gyre ones?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
EPSOM (n.)
An entry in a diary (such as a date or a set of initials) or a name
and address in your address book, which you haven't the faintest idea
what it's doing there.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Tue Aug 14 14:37:04 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 14 Aug 2007 14:37:04 +0200
Subject: [dev-context] missing stubs in latest release
In-Reply-To: <20070814115356.GB22286@gamma.logic.tuwien.ac.at>
References: <20070814073455.GC21301@gamma.logic.tuwien.ac.at>
	<46C177D1.3090902@wxs.nl>
	<20070814115356.GB22286@gamma.logic.tuwien.ac.at>
Message-ID: <46C1A1F0.9040508@wxs.nl>

Norbert Preining wrote:

> Isn't there any chance that by default context uses the lmodern fonts?
> They are wide spread, packaged, easily available, stable.

they do, what i meant was that when users swhitch to say palatino, then 
pagella is expected and not whatever-it's-called-in-berry-speak

so why not make tex gyre a non free package, i'm sure no one bothers -)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From preining at logic.at  Tue Aug 14 15:57:29 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 14 Aug 2007 15:57:29 +0200
Subject: [dev-context] missing stubs in latest release
In-Reply-To: <46C1A1F0.9040508@wxs.nl>
References: <20070814073455.GC21301@gamma.logic.tuwien.ac.at>
	<46C177D1.3090902@wxs.nl>
	<20070814115356.GB22286@gamma.logic.tuwien.ac.at>
	<46C1A1F0.9040508@wxs.nl>
Message-ID: <20070814135729.GD13475@gamma.logic.tuwien.ac.at>

On Die, 14 Aug 2007, Hans Hagen wrote:
> >Isn't there any chance that by default context uses the lmodern fonts?
> >They are wide spread, packaged, easily available, stable.
> 
> they do, what i meant was that when users swhitch to say palatino, then 
> pagella is expected and not whatever-it's-called-in-berry-speak

Ahhh, that is good. Perfect. Thanks for the clearing this
misunderstanding.

> so why not make tex gyre a non free package, i'm sure no one bothers -)

Well, the problem currently is that some of us (not necessary me)
consider the licensing not a "non-free", but a "not-licensing" because
it violates the rights of urw++... anyway, time will show ...

Again, thanks, I hope that I can upload a package next week.

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
UPOTTERY (n.)
That part of a kitchen cupboard which contains an unnecessarily large
number of milk jugs.
			--- Douglas Adams, The Meaning of Liff

From martin at oneiros.de  Tue Aug 14 16:01:29 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 14 Aug 2007 16:01:29 +0200
Subject: [dev-context] missing stubs in latest release
In-Reply-To: <20070814135729.GD13475@gamma.logic.tuwien.ac.at>
References: <20070814073455.GC21301@gamma.logic.tuwien.ac.at>
	<46C177D1.3090902@wxs.nl>
	<20070814115356.GB22286@gamma.logic.tuwien.ac.at>
	<46C1A1F0.9040508@wxs.nl>
	<20070814135729.GD13475@gamma.logic.tuwien.ac.at>
Message-ID: <68c491a60708140701u3245aea3sa3b4f2c6d4b4fe21@mail.gmail.com>

2007/8/14, Norbert Preining <preining at logic.at>:
> Well, the problem currently is that some of us (not necessary me)
> consider the licensing not a "non-free", but a "not-licensing" because
> it violates the rights of urw++... anyway, time will show ...

Has anyone bothered to ask urw++?

Best
   Martin

From preining at logic.at  Tue Aug 14 16:18:42 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 14 Aug 2007 16:18:42 +0200
Subject: [dev-context] missing stubs in latest release
In-Reply-To: <46C177D1.3090902@wxs.nl>
References: <20070814073455.GC21301@gamma.logic.tuwien.ac.at>
	<46C177D1.3090902@wxs.nl>
Message-ID: <20070814141842.GF13475@gamma.logic.tuwien.ac.at>

Hi Hans,

On Die, 14 Aug 2007, Hans Hagen wrote:
> the problem is that some want stubs, some want symlinks ... if you like 
> stubs more (my preference btw), then send me the ones as you like them 
> and i will include them

Great, attached they are. mtxtools and luatools are taken from the
context in april, the others I have written, texmfstart needed a stub
but I never saw it included anywhere.

> no real reason, texfind/texshow depend on tk as well, and pdftrimwhite 
> is for karl (uses it for tugboat) and he know how to call it

and for me, it is useful ;-)

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
CHENIES (pl.n.)
The last few sprigs or tassels of last Christmas's decoration you
notice on the ceiling while lying on the sofa on an August afternoon.
			--- Douglas Adams, The Meaning of Liff
-------------- next part --------------
#!/bin/sh
texmfstart luatools.lua "$@"
-------------- next part --------------
#!/bin/sh
texmfstart mtxtools.rb "$@"
-------------- next part --------------
#!/bin/sh
texmfstart pdftrimwhite.pl "$@"
-------------- next part --------------
#!/bin/sh
texmfstart texshow.pl "$@"
-------------- next part --------------
#!/bin/sh
ruby $(kpsewhich --format=texmfscripts texmfstart.rb) "$@"
-------------- next part --------------
#!/bin/sh
texmfstart texshow.pl "$@"

From preining at logic.at  Tue Aug 14 16:07:15 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 14 Aug 2007 16:07:15 +0200
Subject: [dev-context] missing stubs in latest release
In-Reply-To: <68c491a60708140701u3245aea3sa3b4f2c6d4b4fe21@mail.gmail.com>
References: <20070814073455.GC21301@gamma.logic.tuwien.ac.at>
	<46C177D1.3090902@wxs.nl>
	<20070814115356.GB22286@gamma.logic.tuwien.ac.at>
	<46C1A1F0.9040508@wxs.nl>
	<20070814135729.GD13475@gamma.logic.tuwien.ac.at>
	<68c491a60708140701u3245aea3sa3b4f2c6d4b4fe21@mail.gmail.com>
Message-ID: <20070814140715.GE13475@gamma.logic.tuwien.ac.at>

Hi Martin!

On Die, 14 Aug 2007, Martin Schr?der wrote:
> > consider the licensing not a "non-free", but a "not-licensing" because
> > it violates the rights of urw++... anyway, time will show ...
> 
> Has anyone bothered to ask urw++?

I said that I don't want to start this here, but as you asked: urw++
released the fonts under gplv2. I agree that this is not the best (to be
polite) license for fonts, but they did, and that was nice.

but well, the gyre fonts are under the gust font license, which creates the
following problem: are the gyre fonts derived work or not? If yes, they
must be gpl, too. 

I know that urw++ will probably NOT go to court for this anyway, but
still there is a problem.

If someone has a good contact to urw++ and could ask them to
relicense/double-license the fonts to gust fl or gpl/gfl, that would be
fantastic ... but who could it be???

The problem is that neither the original authors of the GYre fonts nor
the representatives of the user groups see this problem as a problem ...

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
WHAPLODE DROVE (n.)
A homicidal golf stroke.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Tue Aug 14 17:00:59 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 14 Aug 2007 17:00:59 +0200
Subject: [dev-context] test versions of context
Message-ID: <20070814150059.GI13475@gamma.logic.tuwien.ac.at>

Hi all,

(cc-ing the usual suspects)

I have created test versions of ConTeXt 2007.08.09, if you can give it a
try:

context
	deb http://people.debian.org/~preining/TeX/ context/
	deb-src http://people.debian.org/~preining/TeX/ context/

On sid this should be no problem, for etch you need

texlive and tex-common
	deb http://people.debian.org/~preining/TeX/ tl2007/
	deb-src http://people.debian.org/~preining/TeX/ tl2007/

lmodern
	deb http://people.debian.org/~preining/TeX/ lmodern/
	deb-src http://people.debian.org/~preining/TeX/ lmodern/


If you want to test the new context/luatex functionality you should also
get the latest luatex package:

luatex
	deb http://people.debian.org/~preining/TeX/ luatex/
	deb-src http://people.debian.org/~preining/TeX/ luatex/

(which is 0.10.2-2). It has already been uploaded to Debian but has to
go through the NEW queue (which usually takes some time). Sorry NO etch
version for now for luatex, I have to adapt the poppler patch first.

I run several documents with the new context and it worked. Please
report your success/failure to me, thanks a lot.

Especially one with a bit of experience could test luatex/context
combination, that would be great.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
SPROSTON GREEN (n.)
The violent colour of one of Nigel Rees's jackets, worn when he thinks
he's being elegant.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Tue Aug 14 17:17:05 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 14 Aug 2007 17:17:05 +0200
Subject: [dev-context] missing stubs in latest release
In-Reply-To: <20070814135729.GD13475@gamma.logic.tuwien.ac.at>
References: <20070814073455.GC21301@gamma.logic.tuwien.ac.at>
	<46C177D1.3090902@wxs.nl>
	<20070814115356.GB22286@gamma.logic.tuwien.ac.at>
	<46C1A1F0.9040508@wxs.nl>
	<20070814135729.GD13475@gamma.logic.tuwien.ac.at>
Message-ID: <46C1C771.9070306@wxs.nl>

Norbert Preining wrote:

> Well, the problem currently is that some of us (not necessary me)
> consider the licensing not a "non-free", but a "not-licensing" because
> it violates the rights of urw++... anyway, time will show ...

indeed; btw, i think they wanted to contact urw so ...

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From martin at oneiros.de  Tue Aug 14 17:18:57 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 14 Aug 2007 17:18:57 +0200
Subject: [dev-context] missing stubs in latest release
In-Reply-To: <20070814140715.GE13475@gamma.logic.tuwien.ac.at>
References: <20070814073455.GC21301@gamma.logic.tuwien.ac.at>
	<46C177D1.3090902@wxs.nl>
	<20070814115356.GB22286@gamma.logic.tuwien.ac.at>
	<46C1A1F0.9040508@wxs.nl>
	<20070814135729.GD13475@gamma.logic.tuwien.ac.at>
	<68c491a60708140701u3245aea3sa3b4f2c6d4b4fe21@mail.gmail.com>
	<20070814140715.GE13475@gamma.logic.tuwien.ac.at>
Message-ID: <68c491a60708140818ob083ab0wa2d69d07d58026c7@mail.gmail.com>

2007/8/14, Norbert Preining <preining at logic.at>:
> but well, the gyre fonts are under the gust font license, which creates the
> following problem: are the gyre fonts derived work or not? If yes, they
> must be gpl, too.

We've both seen the presentation by the Gyre guys @ EuroBachoTeX2007:
It's derived, but wastly improved, so it probably passes the threshold
of originality. Still, one should ask urw++. Or we get a ruling by the
FSF that the GUST licenses is GPL compatible (which is unlikely).

Best
   Martin

From pragma at wxs.nl  Tue Aug 14 17:46:30 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 14 Aug 2007 17:46:30 +0200
Subject: [dev-context] missing stubs in latest release
In-Reply-To: <68c491a60708140818ob083ab0wa2d69d07d58026c7@mail.gmail.com>
References: <20070814073455.GC21301@gamma.logic.tuwien.ac.at>	<46C177D1.3090902@wxs.nl>	<20070814115356.GB22286@gamma.logic.tuwien.ac.at>	<46C1A1F0.9040508@wxs.nl>	<20070814135729.GD13475@gamma.logic.tuwien.ac.at>	<68c491a60708140701u3245aea3sa3b4f2c6d4b4fe21@mail.gmail.com>	<20070814140715.GE13475@gamma.logic.tuwien.ac.at>
	<68c491a60708140818ob083ab0wa2d69d07d58026c7@mail.gmail.com>
Message-ID: <46C1CE56.1060508@wxs.nl>

Martin Schr?der wrote:
> 2007/8/14, Norbert Preining <preining at logic.at>:
>> but well, the gyre fonts are under the gust font license, which creates the
>> following problem: are the gyre fonts derived work or not? If yes, they
>> must be gpl, too.
> 
> We've both seen the presentation by the Gyre guys @ EuroBachoTeX2007:
> It's derived, but wastly improved, so it probably passes the threshold
> of originality. Still, one should ask urw++. Or we get a ruling by the
> FSF that the GUST licenses is GPL compatible (which is unlikely).

well, i expect a new licence war soon anyway (the gpl 3 stuff) -)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From sanjoy at mrao.cam.ac.uk  Thu Aug 16 20:10:29 2007
From: sanjoy at mrao.cam.ac.uk (Sanjoy Mahajan)
Date: Thu, 16 Aug 2007 19:10:29 +0100
Subject: [dev-context] test versions of context
In-Reply-To: Your message of "Tue, 14 Aug 2007 17:00:59 +0200."
	<20070814150059.GI13475@gamma.logic.tuwien.ac.at> 
Message-ID: <E1ILjnh-00029p-00@skye.ra.phy.cam.ac.uk>

I just installed your context* packages on my Ubuntu (7.04) system,
and they run fine.  

I didn't upgrade the texlive packages because I'm scared about the
poppler API (0.5.4 vs 0.5.8 vs 0.5.9).  I'm sure there's a way to do
it right, which may involve back or forward-porting, but I'd have to
think about it for a while, so I am letting that sleeping dog lie.

That said, the new context packages run fine.  I tested them on my
usual documents and a newer ones.  The tests are a 100-page math
textbook and electrical engineering course notes for this semester.
Both documents have many included figures (made by metapost), and all
is well.

-Sanjoy

'Intellectual property is intellectual theft.'

From mojca.miklavec.lists at gmail.com  Tue Sep 11 17:42:30 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 11 Sep 2007 17:42:30 +0200
Subject: [dev-context] write18, XeTeX and metapost not running
Message-ID: <6faad9f00709110842v7fe18d0fr8882ce3be86bff6e@mail.gmail.com>

Hello Hans,

one weird question: after the question has been posted to the mailing
list, I tried to run

\starttext
\startMPcode
draw fullcircle scaled 3cm;
\stopMPcode
x
\stoptext

on the garden. That works OK with pdfTeX, but doesn't work with XeTeX.

I have checked that locally on my machine. I did the following:
- I have set shell_escape = f in texmf.cnf
- I comment out the two lines in cont-sys.tex:
    % \runMPgraphicstrue
    % \runMPTEXgraphicstrue

"texexec bla" now creates bla-mpgraph.1, while "texexec --xtx bla" doesn't.

Any clue?

Thanks a lot,
    Mojca

From mojca.miklavec.lists at gmail.com  Tue Sep 11 18:47:49 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 11 Sep 2007 18:47:49 +0200
Subject: [dev-context] XeTeX and font-selection problems
Message-ID: <6faad9f00709110947q6afe29bfte7d0a137e492e26e@mail.gmail.com>

Hello Hans,

There's something weird going on during XeTeX's font selection:

fonts           : fails 1a: "lmroman12-regular:script=latn;language=dflt;+liga;
+kern;mapping=tex-text;mapping=tex-text;" (nullfont)

fonts           : succeeds 1b: "[lmroman12-regular]:script=latn;language=dflt;+
liga;+kern;mapping=tex-text;mapping=tex-text;" ("[lmroman12-regular]:script=lat
n;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;")

fonts           : fails 1a: "rm-lmr7" (nullfont)

fonts           : fails 1b: "[rm-lmr7]" (nullfont)

fonts           : fails 1a: "rm-lmr9" (nullfont)

fonts           : fails 1b: "[rm-lmr9]" (nullfont)


which then results in


systems         : end file smalltest at line 13
 )
stdin -> smalltest.pdf
[1]
** WARNING ** Invalid CMap
** ERROR ** pdf_ref_obj(): passed invalid object.

Output file removed.
Output written on smalltest.pdf (1 page).
Transcript written on smalltest.log.
TeXExec | runtime: 10.645827


(Well, "errare humanum est: "I would understand that ConTeXt generates
an error from time to time, but not that it's lying about it with
"Output written on smalltest.pdf" :)

It is possible, that the new version of XeTeX solves that problem
(Jonathan promised to look into the problems you complained about some
time ago), but I still use the version from TeX Live at the moment. It
might make sense to try yet the third option without any quotes
around, and generate the error if font doen't exist. Is there any
chance to remove blank lines between font tests?

(The log file looks really ugly now, but well ...)

Mojca

From arthur.reutenauer at normalesup.org  Tue Sep 11 20:39:42 2007
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Tue, 11 Sep 2007 20:39:42 +0200
Subject: [dev-context] XeTeX and font-selection problems
In-Reply-To: <6faad9f00709110947q6afe29bfte7d0a137e492e26e@mail.gmail.com>
References: <6faad9f00709110947q6afe29bfte7d0a137e492e26e@mail.gmail.com>
Message-ID: <20070911183942.GJ15932@phare.normalesup.org>

> (Well, "errare humanum est: "I would understand that ConTeXt generates
> an error from time to time, but not that it's lying about it with
> "Output written on smalltest.pdf" :)

  It's actually XeTeX's fault: it doesn't take the return status of
xdvipdfmx into account and says ?Output written to ...? whatever the
result of xdvipdfmx; you may remember Jonathan explained that to the
XeTeX list.

  I have no idea if this is now fixed in XeTeX.

  As for the other problem you reported this afternoon (Metapost is not
run when using \startMPcode in a XeTeX file), I'm now certain the
general problem is the same: because ConTeXt tries hard to find some
fonts (\xetextempfont), it generates errors in \batchmode, so the XeTeX
run exits with a non-zero return code, and TeXExec thinks the
compilation has failed, so it doesn't try to run Metapost as it should;
I have made tests with a late July version on my computer where all this
doesn't happen (2007.07.25 12:35).

  I guess it's time for the ConTeXt developers to start over that little
discussion we had with the XeTeX developer(s) :-)

	Arthur

From pragma at wxs.nl  Tue Sep 11 23:05:54 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 11 Sep 2007 23:05:54 +0200
Subject: [dev-context] XeTeX and font-selection problems
In-Reply-To: <20070911183942.GJ15932@phare.normalesup.org>
References: <6faad9f00709110947q6afe29bfte7d0a137e492e26e@mail.gmail.com>
	<20070911183942.GJ15932@phare.normalesup.org>
Message-ID: <46E70332.2090504@wxs.nl>

Arthur Reutenauer wrote:
>> (Well, "errare humanum est: "I would understand that ConTeXt generates
>> an error from time to time, but not that it's lying about it with
>> "Output written on smalltest.pdf" :)
> 
>   It's actually XeTeX's fault: it doesn't take the return status of
> xdvipdfmx into account and says ?Output written to ...? whatever the
> result of xdvipdfmx; you may remember Jonathan explained that to the
> XeTeX list.
> 
>   I have no idea if this is now fixed in XeTeX.
> 
>   As for the other problem you reported this afternoon (Metapost is not
> run when using \startMPcode in a XeTeX file), I'm now certain the
> general problem is the same: because ConTeXt tries hard to find some
> fonts (\xetextempfont), it generates errors in \batchmode, so the XeTeX
> run exits with a non-zero return code, and TeXExec thinks the
> compilation has failed, so it doesn't try to run Metapost as it should;
> I have made tests with a late July version on my computer where all this
> doesn't happen (2007.07.25 12:35).
> 
>   I guess it's time for the ConTeXt developers to start over that little
> discussion we had with the XeTeX developer(s) :-)

hm, we use batchmode to catch an non found font so that we can look 
further; i would not expect xetex to quit then

Hans



-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Tue Sep 11 23:36:13 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 11 Sep 2007 23:36:13 +0200
Subject: [dev-context] XeTeX and font-selection problems
In-Reply-To: <46E70332.2090504@wxs.nl>
References: <6faad9f00709110947q6afe29bfte7d0a137e492e26e@mail.gmail.com>	<20070911183942.GJ15932@phare.normalesup.org>
	<46E70332.2090504@wxs.nl>
Message-ID: <46E70A4D.6000704@elvenkind.com>

Hans Hagen wrote:
>>
>>   I guess it's time for the ConTeXt developers to start over that little
>> discussion we had with the XeTeX developer(s) :-)
> 
> hm, we use batchmode to catch an non found font so that we can look 
> further; i would not expect xetex to quit then

You misunderstand, it is texexec that does the quitting.

I've seen this before, but forgot about it. The problem is that
whenever tex sees an error, it's return value changes from zero
to non-zero. It has been like that since (at least) the emtex days,
with higher return value numbers indicating ever more serious
issues that were encountered.

The immediate problem is that the non-zero return makes texexec
think that xetex has failed completely. That is not true, nor is
it xetex-specific.

We should probably see if we (the tex developers) can reach an
agreement about how to decide if a font exists without raising
an error, but in the mean time it is maybe best to ignore return
values from engines as long as the expected output file is
there (or forget about the nice font trick).

Best wishes,
Taco

From pragma at wxs.nl  Tue Sep 11 23:58:28 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 11 Sep 2007 23:58:28 +0200
Subject: [dev-context] XeTeX and font-selection problems
In-Reply-To: <46E70A4D.6000704@elvenkind.com>
References: <6faad9f00709110947q6afe29bfte7d0a137e492e26e@mail.gmail.com>	<20070911183942.GJ15932@phare.normalesup.org>
	<46E70332.2090504@wxs.nl> <46E70A4D.6000704@elvenkind.com>
Message-ID: <46E70F84.3000306@wxs.nl>

Taco Hoekwater wrote:
> Hans Hagen wrote:
>>>
>>>   I guess it's time for the ConTeXt developers to start over that little
>>> discussion we had with the XeTeX developer(s) :-)
>>
>> hm, we use batchmode to catch an non found font so that we can look 
>> further; i would not expect xetex to quit then
> 
> You misunderstand, it is texexec that does the quitting.
> 
> I've seen this before, but forgot about it. The problem is that
> whenever tex sees an error, it's return value changes from zero
> to non-zero. It has been like that since (at least) the emtex days,
> with higher return value numbers indicating ever more serious
> issues that were encountered.
> 
> The immediate problem is that the non-zero return makes texexec
> think that xetex has failed completely. That is not true, nor is
> it xetex-specific.
> 
> We should probably see if we (the tex developers) can reach an
> agreement about how to decide if a font exists without raising
> an error, but in the mean time it is maybe best to ignore return
> values from engines as long as the expected output file is
> there (or forget about the nice font trick).

tex.rb line 1933 :


                             ok = runtex(File.suffixed(if dummyfile || 
forcexml then rawbase else rawname end,jobsuffix))

if getvariable('engine') == "xetex" then
     ok = true
end

so, xetex runs are always valid now (at least till we have a solution)


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From arthur.reutenauer at normalesup.org  Wed Sep 12 00:23:25 2007
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Wed, 12 Sep 2007 00:23:25 +0200
Subject: [dev-context] XeTeX and font-selection problems
In-Reply-To: <46E70F84.3000306@wxs.nl>
References: <6faad9f00709110947q6afe29bfte7d0a137e492e26e@mail.gmail.com>
	<20070911183942.GJ15932@phare.normalesup.org>
	<46E70332.2090504@wxs.nl> <46E70A4D.6000704@elvenkind.com>
	<46E70F84.3000306@wxs.nl>
Message-ID: <20070911222325.GA10481@phare.normalesup.org>

> if getvariable('engine') == "xetex" then
>      ok = true
> end

  Cool. I guess 'engine' is a typo for 'texengine'? This solves the problem here.

	Arthur

From mojca.miklavec.lists at gmail.com  Thu Sep 13 13:44:21 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 13 Sep 2007 13:44:21 +0200
Subject: [dev-context] \buildtextaccent in LuaTeX
Message-ID: <6faad9f00709130444j23e02adbt1e74acd4285c0ffc@mail.gmail.com>

Hello Hans,

as far as I remember this used to work once back in May in LuaTeX
(because I was able to fake cacute in a font which didn't have it;
however it never worked in XeTeX):

\definefontsynonym[bla][Iwona-Regular]
\definedfont[bla]
\mainlanguage[sl]

\starttext
??? (\textcaron)(\textacute)\crlf
\quotation{this} is {\buildtextaccent\textacute c}\crlf
\quotation{this} is {\buildtextaccent\textcaron c}\crlf
\stoptext

Now the characters don't compose any more. What's even more
interesting, it fails badly with XeTeX, where most characters are
simply blank.

And even more interesting - watch the different guillemots when using
LuaTeX and XeTeX. Even more interesting, if you use
    \definefontsynonym[bla][Iwona-Regular][encoding=uc]
one gets different guillemots (it might be that they're taken from LM
instead of Iwona when there is no [encoding=uc] present).

Mojca

From pragma at wxs.nl  Thu Sep 13 16:43:33 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 13 Sep 2007 16:43:33 +0200
Subject: [dev-context] \buildtextaccent in LuaTeX
In-Reply-To: <6faad9f00709130444j23e02adbt1e74acd4285c0ffc@mail.gmail.com>
References: <6faad9f00709130444j23e02adbt1e74acd4285c0ffc@mail.gmail.com>
Message-ID: <46E94C95.4020901@wxs.nl>

Mojca Miklavec wrote:
> Hello Hans,
> 
> as far as I remember this used to work once back in May in LuaTeX
> (because I was able to fake cacute in a font which didn't have it;
> however it never worked in XeTeX):

combination of bug in luatex (accent) and definition of \build macro 
(must use numbers now)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Wed Sep 19 22:34:57 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 19 Sep 2007 22:34:57 +0200
Subject: [dev-context] binaries in context minimals
Message-ID: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>

Hello,

I took the list of binaries from texmf-macosx/bin. I'm trying to set
some semi-automatic process to fetch them (well, to add them to a
repository on the garden, http://minimals.contextgarden.net/). I've
split the binaries into different groups. Can anyone please comment on
it?

a.) do we still need any of these?
afm2pl
afm2tfm
dvipdfmx
mktexmf
mmafm
mmpfb
pfb2pfa
pltotf
tftopl
ttf2afm
ttf2tfm
vftovp
vptovf

b.) stubs (Hans: should I simply copy everything from stubs there?)
concheck
ctxtools
exaclient
exampleg
examplex
exaresolve
exaserver
exatools
imgtopdf
makempy
mptopdf
pdftools
pstopdf
rlxtools
rscortool
rsfiltool
rslibtool
texexec
texfont
texshow
textools
texutil
tmftools
xmltools

c.) simply copy from cont-tmf
texmfstart
luatools
mtxrun

d.) to be taken from texlive
bibtex
dvipos
dvips
dvitodvi
kpseaccess
kpsestat
kpsewhich
mktexlsr
pdftosrc

e.) latest binaries to be taken from elsewhere, whenever possible
(help might be needed)
dvitomp
makempx
mpost
mpto

pdftex

luatex
texlua (same as luatex, I guess, or simply a symbolic link?)
texluac (same as luatex, I guess)

xdvipdfmx
xetex

+ pdftex.pool and xetex.pool

f.) what to do with this one?
xpdfsuite.zip

From pragma at wxs.nl  Wed Sep 19 22:44:58 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 19 Sep 2007 22:44:58 +0200
Subject: [dev-context] binaries in context minimals
In-Reply-To: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>
References: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>
Message-ID: <46F18A4A.4070504@wxs.nl>

Mojca Miklavec wrote:
> Hello,
> 
> I took the list of binaries from texmf-macosx/bin. I'm trying to set
> some semi-automatic process to fetch them (well, to add them to a
> repository on the garden, http://minimals.contextgarden.net/). I've
> split the binaries into different groups. Can anyone please comment on
> it?
> 
> a.) do we still need any of these?
> afm2pl
> afm2tfm
> dvipdfmx
> mktexmf

^ probably not, not sure what it does

> mmafm
> mmpfb

^ multiple master fonts are obsolete

> pfb2pfa

^ can go away

> pltotf
> tftopl

knuthian progies so let's keep them (debugging)

> ttf2afm

maybe keep it for a while (debugging

> ttf2tfm

does not really work i think

> vftovp
> vptovf

knuthian progs


so: mktexmf, ttf2tfm and pfb2pfa can go away

> b.) stubs (Hans: should I simply copy everything from stubs there?)
> concheck
> ctxtools
> exaclient
> exampleg
> examplex
> exaresolve
> exaserver
> exatools

exastuff can go away (one can alway suse texmfstart scriptname)

> imgtopdf

i need the minimals myself, so keep that one for a while

> makempy
> mptopdf
> pdftools
> pstopdf
> rlxtools
> rscortool
> rsfiltool
> rslibtool
> texexec
> texfont
> texshow
> textools
> texutil
> tmftools
> xmltools

okay

> c.) simply copy from cont-tmf
> texmfstart
> luatools
> mtxrun

indeed, beware, we need these copied in the bin path !

> d.) to be taken from texlive
> bibtex
> dvipos
> dvips

sure

> dvitodvi

used?

> kpseaccess

used?

> kpsestat

used?

> kpsewhich
> mktexlsr
> pdftosrc

also pdfinfo, pdftops, pdfimages ... everything from xpdf


> e.) latest binaries to be taken from elsewhere, whenever possible
> (help might be needed)
> dvitomp
> makempx
> mpost
> mpto

gforce, taco can tell, we may put them on the luatex site as well

> pdftex
> 
> luatex
> texlua (same as luatex, I guess, or simply a symbolic link?)
> texluac (same as luatex, I guess)

indeed, copies but needed

> xdvipdfmx
> xetex
> 
> + pdftex.pool and xetex.pool

for the moment yes, taco ... shouldn't we move pools files into the bins?

> f.) what to do with this one?
> xpdfsuite.zip

we need a texmf/license path

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From martin at oneiros.de  Wed Sep 19 23:02:08 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Wed, 19 Sep 2007 23:02:08 +0200
Subject: [dev-context] binaries in context minimals
In-Reply-To: <46F18A4A.4070504@wxs.nl>
References: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>
	<46F18A4A.4070504@wxs.nl>
Message-ID: <68c491a60709191402v62d2cc06y439713c9d85da34c@mail.gmail.com>

2007/9/19, Hans Hagen <pragma at wxs.nl>:
> Mojca Miklavec wrote:
> > mktexmf
>
> ^ probably not, not sure what it does

man mktexmf

"mktexmf is used to generate the Metafont  source  file  for  font,
if  possible. For  example, ecrm1200 or cmr11."

Best
   Martin

From mojca.miklavec.lists at gmail.com  Wed Sep 19 23:24:02 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 19 Sep 2007 23:24:02 +0200
Subject: [dev-context] binaries in context minimals
In-Reply-To: <46F18A4A.4070504@wxs.nl>
References: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>
	<46F18A4A.4070504@wxs.nl>
Message-ID: <6faad9f00709191424j6f803c26g82d8530828bbf3bc@mail.gmail.com>

On 9/19/07, Hans Hagen wrote:
> Mojca Miklavec wrote:

> > a.) do we still need any of these?
> > afm2pl
> > afm2tfm

Are these two needed? (Probably for debugging, as below.)

> > dvipdfmx

What is with dvipdfmx? Wasn't that one for aleph (which is not in the
minimals any more)?

> > mktexmf
>
> ^ probably not, not sure what it does
>
> > mmafm
> > mmpfb
>
> ^ multiple master fonts are obsolete

OK

> > pfb2pfa
>
> ^ can go away

OK

> > pltotf
> > tftopl
>
> knuthian progies so let's keep them (debugging)
>
> > ttf2afm
>
> maybe keep it for a while (debugging
>
> > ttf2tfm
>
> does not really work i think
>
> > vftovp
> > vptovf
>
> knuthian progs
>
>
> so: mktexmf, ttf2tfm and pfb2pfa can go away
>
> > b.) stubs (Hans: should I simply copy everything from stubs there?)
> > concheck
> > ctxtools
> > exaclient
> > exampleg
> > examplex
> > exaresolve
> > exaserver
> > exatools
>
> exastuff can go away (one can alway suse texmfstart scriptname)

OK.

> > imgtopdf
>
> i need the minimals myself, so keep that one for a while

I didn't intend to remove any of those files.

> > makempy
> > mptopdf
> > pdftools
> > pstopdf
> > rlxtools
> > rscortool
> > rsfiltool
> > rslibtool
> > texexec
> > texfont
> > texshow
> > textools
> > texutil
> > tmftools
> > xmltools
>
> okay
>
> > c.) simply copy from cont-tmf
> > texmfstart
> > luatools
> > mtxrun
>
> indeed, beware, we need these copied in the bin path !
>
> > d.) to be taken from texlive
> > dvitodvi
>
> used?

texexec probably replaced it's functionality. Perhaps it might go away.

> > kpseaccess
>
> used?
>
> > kpsestat
>
> used?

If texexec doesn't use it, people don't use it either, I assume.

> > kpsewhich
> > mktexlsr
> > pdftosrc
>
> also pdfinfo, pdftops, pdfimages ... everything from xpdf

Hmmm ... apparently that one is only needed for windows, or to be put
in other words: there is no binary in texlive for other platforms.
Apparently I got it with fink. It might be nice to have it for other
platforms, but I don't know where to get it. Perhaps it's considered
so standard that texlive didn't include it?

Mojca

From taco at elvenkind.com  Wed Sep 19 23:44:57 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 19 Sep 2007 23:44:57 +0200
Subject: [dev-context] binaries in context minimals
In-Reply-To: <46F18A4A.4070504@wxs.nl>
References: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>
	<46F18A4A.4070504@wxs.nl>
Message-ID: <46F19859.8070209@elvenkind.com>


I have a somewhat longer list of exes that I believe can be
weeded out:

>> dvipdfmx

Is that still needed ? I always run xdvipdfmx instead

>> mktexmf

We don't ship mf sources to take advantage of it

>> mmafm
>> mmpfb
>> pfb2pfa

All three can go I think

>> ttf2tfm

Last time I checked this was terribly outdated. It didn't like
any of the ttfs I tried to feed it. ttf2afm does much better.

>> dvips

Dvips needs a bunch of postscript header (.pro) files, that are
not in the distro right now, I think. When I tried to run it just
now, it was complaining about missing stuff.

>> dvitodvi

I believe this does something for booklet generation.

>> kpseaccess
>> kpsestat

those are helpers used by mktexlsr.


> gforce, taco can tell, we may put them on the luatex site as well

http://foundry.supelec.fr/projects/metapost has mpost binaries
for linux-i386 and windows, the rest of the platform binaries would
have to come from texlive at the moment.

>> luatex
>> texlua (same as luatex, I guess, or simply a symbolic link?)
>> texluac (same as luatex, I guess)

the latter two are symlinks, ideally.

>> xdvipdfmx
>> xetex
>>
>> + pdftex.pool and xetex.pool
> 
> for the moment yes, taco ... shouldn't we move pools files into the bins?

I thought Jonathan had that planned for 0.997.

For pdftex: we had a discussion about the pool file once already, and
I am not in the mood to repeat it.

Best wishes,
Taco

From martin at oneiros.de  Thu Sep 20 00:12:15 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Thu, 20 Sep 2007 00:12:15 +0200
Subject: [dev-context] binaries in context minimals
In-Reply-To: <6faad9f00709191424j6f803c26g82d8530828bbf3bc@mail.gmail.com>
References: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>
	<46F18A4A.4070504@wxs.nl>
	<6faad9f00709191424j6f803c26g82d8530828bbf3bc@mail.gmail.com>
Message-ID: <68c491a60709191512pfb7d45ao2d0bd228b9601d4e@mail.gmail.com>

2007/9/19, Mojca Miklavec <mojca.miklavec.lists at gmail.com>:
> On 9/19/07, Hans Hagen wrote:
> > also pdfinfo, pdftops, pdfimages ... everything from xpdf
>
> Hmmm ... apparently that one is only needed for windows, or to be put
> in other words: there is no binary in texlive for other platforms.
> Apparently I got it with fink. It might be nice to have it for other
> platforms, but I don't know where to get it. Perhaps it's considered
> so standard that texlive didn't include it?

It's normally included with xpdf, which we also don't supply.

Best
   Martin

From ishamid at colostate.edu  Thu Sep 20 02:41:18 2007
From: ishamid at colostate.edu (Idris Samawi Hamid)
Date: Wed, 19 Sep 2007 18:41:18 -0600
Subject: [dev-context] binaries in context minimals
In-Reply-To: <6faad9f00709191424j6f803c26g82d8530828bbf3bc@mail.gmail.com>
References: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>
	<46F18A4A.4070504@wxs.nl>
	<6faad9f00709191424j6f803c26g82d8530828bbf3bc@mail.gmail.com>
Message-ID: <op.tyxf641snx1yh1@your-b27fb1c401>

Hi Mojca,

On Wed, 19 Sep 2007 15:24:02 -0600, Mojca Miklavec  
<mojca.miklavec.lists at gmail.com> wrote:

>> > dvipdfmx
>
> What is with dvipdfmx? Wasn't that one for aleph (which is not in the
> minimals any more)?

dvipdfmx is still important in the cjk community, and in any case it's  
needed for luatex dvi-mode (still lots of testing needed, as the \pardir  
thread on the luatex list shows)

I suppose the same applies to xdvipdfmx...

Best
Idris

-- 
Professor Idris Samawi Hamid
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

--
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From taco at elvenkind.com  Thu Sep 20 08:43:31 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 20 Sep 2007 08:43:31 +0200
Subject: [dev-context] binaries in context minimals
In-Reply-To: <op.tyxf641snx1yh1@your-b27fb1c401>
References: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>	<46F18A4A.4070504@wxs.nl>	<6faad9f00709191424j6f803c26g82d8530828bbf3bc@mail.gmail.com>
	<op.tyxf641snx1yh1@your-b27fb1c401>
Message-ID: <46F21693.1070307@elvenkind.com>

Idris Samawi Hamid wrote:
> Hi Mojca,
> 
> On Wed, 19 Sep 2007 15:24:02 -0600, Mojca Miklavec  
> <mojca.miklavec.lists at gmail.com> wrote:
> 
>>>> dvipdfmx
>> What is with dvipdfmx? Wasn't that one for aleph (which is not in the
>> minimals any more)?
> 
> dvipdfmx is still important in the cjk community, and in any case it's  
> needed for luatex dvi-mode (still lots of testing needed, as the \pardir  
> thread on the luatex list shows)
> 
> I suppose the same applies to xdvipdfmx...

AFAIK, xdvipdfmx is a superset of dvipdfmx. Is that not true?

Best,
Taco






From pragma at wxs.nl  Thu Sep 20 09:25:28 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 20 Sep 2007 09:25:28 +0200
Subject: [dev-context] binaries in context minimals
In-Reply-To: <68c491a60709191402v62d2cc06y439713c9d85da34c@mail.gmail.com>
References: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>	<46F18A4A.4070504@wxs.nl>
	<68c491a60709191402v62d2cc06y439713c9d85da34c@mail.gmail.com>
Message-ID: <46F22068.7060207@wxs.nl>

Martin Schr?der wrote:
> 2007/9/19, Hans Hagen <pragma at wxs.nl>:
>> Mojca Miklavec wrote:
>>> mktexmf
>> ^ probably not, not sure what it does
> 
> man mktexmf
> 
> "mktexmf is used to generate the Metafont  source  file  for  font,
> if  possible. For  example, ecrm1200 or cmr11."

aha, so it can go away in the minimals since we don't have mf sources

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Thu Sep 20 09:29:52 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 20 Sep 2007 09:29:52 +0200
Subject: [dev-context] binaries in context minimals
In-Reply-To: <6faad9f00709191424j6f803c26g82d8530828bbf3bc@mail.gmail.com>
References: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>	
	<46F18A4A.4070504@wxs.nl>
	<6faad9f00709191424j6f803c26g82d8530828bbf3bc@mail.gmail.com>
Message-ID: <46F22170.6050408@wxs.nl>

Mojca Miklavec wrote:
>> also pdfinfo, pdftops, pdfimages ... everything from xpdf
> 
> Hmmm ... apparently that one is only needed for windows, or to be put
> in other words: there is no binary in texlive for other platforms.
> Apparently I got it with fink. It might be nice to have it for other
> platforms, but I don't know where to get it. Perhaps it's considered
> so standard that texlive didn't include it?

maybe we need a source repos too, from which we can compile ... if 
needed (or put copies of the tarballs there); these progs are quite handy

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Thu Sep 20 09:34:57 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 20 Sep 2007 09:34:57 +0200
Subject: [dev-context] binaries in context minimals
In-Reply-To: <68c491a60709191512pfb7d45ao2d0bd228b9601d4e@mail.gmail.com>
References: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>	<46F18A4A.4070504@wxs.nl>	<6faad9f00709191424j6f803c26g82d8530828bbf3bc@mail.gmail.com>
	<68c491a60709191512pfb7d45ao2d0bd228b9601d4e@mail.gmail.com>
Message-ID: <46F222A1.4040502@wxs.nl>

Martin Schr?der wrote:
> 2007/9/19, Mojca Miklavec <mojca.miklavec.lists at gmail.com>:
>> On 9/19/07, Hans Hagen wrote:
>>> also pdfinfo, pdftops, pdfimages ... everything from xpdf
>> Hmmm ... apparently that one is only needed for windows, or to be put
>> in other words: there is no binary in texlive for other platforms.
>> Apparently I got it with fink. It might be nice to have it for other
>> platforms, but I don't know where to get it. Perhaps it's considered
>> so standard that texlive didn't include it?
> 
> It's normally included with xpdf, which we also don't supply.

for windows it's a separate package (no xpdf), how hard would it be to 
make a tools-only variant? maybe even in the pdftex repos?

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Thu Sep 20 09:33:51 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 20 Sep 2007 09:33:51 +0200
Subject: [dev-context] binaries in context minimals
In-Reply-To: <46F19859.8070209@elvenkind.com>
References: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>
	<46F18A4A.4070504@wxs.nl> <46F19859.8070209@elvenkind.com>
Message-ID: <46F2225F.30106@wxs.nl>

Taco Hoekwater wrote:
> 
> I have a somewhat longer list of exes that I believe can be
> weeded out:
> 
>>> dvipdfmx
> 
> Is that still needed ? I always run xdvipdfmx instead

we should ask Chof/Jonathan abou tmerging them; last time i asked 
Jonathan he told me that he was not sure if i was downwad compatible

>>> dvips
> 
> Dvips needs a bunch of postscript header (.pro) files, that are
> not in the distro right now, I think. When I tried to run it just
> now, it was complaining about missing stuff.

so we can go pdf and use pdftops if someone wants proper postscript

> I thought Jonathan had that planned for 0.997.
> 
> For pdftex: we had a discussion about the pool file once already, and
> I am not in the mood to repeat it.

well, i'm sure that martin can integrate it into the build; would save a 
lot of hassle with binary updates (no problem for tex live since the 
polish dropped their translated pool files long ago)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Thu Sep 20 09:50:12 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 20 Sep 2007 09:50:12 +0200
Subject: [dev-context] binaries in context minimals
In-Reply-To: <46F225A4.7040302@elvenkind.com>
References: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>
	<46F18A4A.4070504@wxs.nl> <46F19859.8070209@elvenkind.com>
	<46F2225F.30106@wxs.nl> <46F225A4.7040302@elvenkind.com>
Message-ID: <46F22634.1070002@wxs.nl>

Taco Hoekwater wrote:
> 
> 
> Hans Hagen wrote:
>>
>> well, i'm sure that martin can integrate it into the build; would save 
>> a lot of hassle with binary updates (no problem for tex live since the 
>> polish dropped their translated pool files long ago)
> 
> Last time, there were quite a few political/sentimental objections, and
> I do want to restart the arguments about that. This type of discussion
> takes way too much of my time already. Maybe you or Martin is interested
> in championing the extension?

well, i can see no sentimental reason, and no political either, and 
since you have the final word in pdftex source stuff now ...

this is one of the tging that just should happen and not be discussed at 
length (otherwise we suddenly run into folks who want dvi instead of pdf 
for everything, the 'good old times' kind of discussions); of course, we 
can always keep a fake pool file around for those who can't do without, 
it's just not used

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Thu Sep 20 09:55:59 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 20 Sep 2007 09:55:59 +0200
Subject: [dev-context] binaries in context minimals
In-Reply-To: <46F2225F.30106@wxs.nl>
References: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>
	<46F18A4A.4070504@wxs.nl> <46F19859.8070209@elvenkind.com>
	<46F2225F.30106@wxs.nl>
Message-ID: <46F2278F.3040408@elvenkind.com>



Hans Hagen wrote:
> 
>>>> dvips
>>
>> Dvips needs a bunch of postscript header (.pro) files, that are
>> not in the distro right now, I think. When I tried to run it just
>> now, it was complaining about missing stuff.
> 
> so we can go pdf and use pdftops if someone wants proper postscript

That would be fine for me personally, but I assume there are people
out there that depend on ps features like eps inclusion and pstricks.

Then again, those people can't be using the minimals right now, as
the supplied dvips does not work.

Best wishes,
Taco

From taco at elvenkind.com  Thu Sep 20 09:47:48 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 20 Sep 2007 09:47:48 +0200
Subject: [dev-context] binaries in context minimals
In-Reply-To: <46F2225F.30106@wxs.nl>
References: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>
	<46F18A4A.4070504@wxs.nl> <46F19859.8070209@elvenkind.com>
	<46F2225F.30106@wxs.nl>
Message-ID: <46F225A4.7040302@elvenkind.com>



Hans Hagen wrote:
> 
> well, i'm sure that martin can integrate it into the build; would save a 
> lot of hassle with binary updates (no problem for tex live since the 
> polish dropped their translated pool files long ago)

Last time, there were quite a few political/sentimental objections, and
I do want to restart the arguments about that. This type of discussion
takes way too much of my time already. Maybe you or Martin is interested
in championing the extension?

Best wishes,
Taco

From pragma at wxs.nl  Thu Sep 20 09:41:41 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 20 Sep 2007 09:41:41 +0200
Subject: [dev-context] binaries in context minimals
In-Reply-To: <46F21693.1070307@elvenkind.com>
References: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>	<46F18A4A.4070504@wxs.nl>	<6faad9f00709191424j6f803c26g82d8530828bbf3bc@mail.gmail.com>	<op.tyxf641snx1yh1@your-b27fb1c401>
	<46F21693.1070307@elvenkind.com>
Message-ID: <46F22435.7010905@wxs.nl>

Taco Hoekwater wrote:
> Idris Samawi Hamid wrote:
>> Hi Mojca,
>>
>> On Wed, 19 Sep 2007 15:24:02 -0600, Mojca Miklavec  
>> <mojca.miklavec.lists at gmail.com> wrote:
>>
>>>>> dvipdfmx
>>> What is with dvipdfmx? Wasn't that one for aleph (which is not in the
>>> minimals any more)?
>> dvipdfmx is still important in the cjk community, and in any case it's  
>> needed for luatex dvi-mode (still lots of testing needed, as the \pardir  
>> thread on the luatex list shows)
>>
>> I suppose the same applies to xdvipdfmx...
> 
> AFAIK, xdvipdfmx is a superset of dvipdfmx. Is that not true?

yes, with additional dvi instructions (and some [piping stuff])

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From martin at oneiros.de  Thu Sep 20 16:14:54 2007
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Thu, 20 Sep 2007 16:14:54 +0200
Subject: [dev-context] binaries in context minimals
In-Reply-To: <46F222A1.4040502@wxs.nl>
References: <6faad9f00709191334g69ca897bwbdc6bdb652c589d@mail.gmail.com>
	<46F18A4A.4070504@wxs.nl>
	<6faad9f00709191424j6f803c26g82d8530828bbf3bc@mail.gmail.com>
	<68c491a60709191512pfb7d45ao2d0bd228b9601d4e@mail.gmail.com>
	<46F222A1.4040502@wxs.nl>
Message-ID: <68c491a60709200714k31ba7be0ua71dd97db32e4071@mail.gmail.com>

2007/9/20, Hans Hagen <pragma at wxs.nl>:
> Martin Schr?der wrote:
> > It's normally included with xpdf, which we also don't supply.
>
> for windows it's a separate package (no xpdf), how hard would it be to
> make a tools-only variant? maybe even in the pdftex repos?

If you need only the cmd line tools, that wouldn't be too hard. We
don't have the complete sources in the pdftex distribution (yet),
though.

Best
   Martin

From mojca.miklavec.lists at gmail.com  Fri Sep 21 02:15:28 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 21 Sep 2007 02:15:28 +0200
Subject: [dev-context] is symb-glm still needed?
Message-ID: <6faad9f00709201715y194a39ei67280888395eeefe@mail.gmail.com>

Hello Hans,

I figured out where spurious loading of lm-ec and lm-texnansi in XeTeX
comes from.

One is comming from symb-glm.tex. But, when looking at it, it seems to
me that it's not even needed any more, since \leftguillemot,
\rightguillemot, \guilsingleleft and \guilsingleright are defined in
encodings.

Esp if I'm reading the comments: "but was also one of the reasons for
triggering the lm project"

The only possible side effect could be the ability to use
     \symbol[xleftguillemot]
or even more obscure usage: calling font "Guil" directly.
But I doubt that anyone uses it that way, esp. since it depends on LM,
and people could use any other font (it looks to me it was used the
other way round, when no guilemots existed in cmr).

Is it possible to supress loading of that file, at least for XeTeX
where it's of no use, or at least rewriting it in some sensible way?

lm-texnansi comes from meta-tex.tex. Any chance to change that piece
of code, so that that font won't be needed any more (I have always
wondered what that definition in meta-tex is used for)?

\truefontname inside NEWTEX in font-ini seems to deliver names
suitable for luaTeX, but not for XeTeX.

Mojca

From pragma at wxs.nl  Fri Sep 21 10:15:11 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 21 Sep 2007 10:15:11 +0200
Subject: [dev-context] is symb-glm still needed?
In-Reply-To: <6faad9f00709201715y194a39ei67280888395eeefe@mail.gmail.com>
References: <6faad9f00709201715y194a39ei67280888395eeefe@mail.gmail.com>
Message-ID: <46F37D8F.7090306@wxs.nl>

Mojca Miklavec wrote:
> Hello Hans,
> 
> I figured out where spurious loading of lm-ec and lm-texnansi in XeTeX
> comes from.
> 
> One is comming from symb-glm.tex. But, when looking at it, it seems to
> me that it's not even needed any more, since \leftguillemot,
> \rightguillemot, \guilsingleleft and \guilsingleright are defined in
> encodings.
> 
> Esp if I'm reading the comments: "but was also one of the reasons for
> triggering the lm project"
> 
> The only possible side effect could be the ability to use
>      \symbol[xleftguillemot]
> or even more obscure usage: calling font "Guil" directly.
> But I doubt that anyone uses it that way, esp. since it depends on LM,
> and people could use any other font (it looks to me it was used the
> other way round, when no guilemots existed in cmr).
> 
> Is it possible to supress loading of that file, at least for XeTeX
> where it's of no use, or at least rewriting it in some sensible way?

i've disables it .. let's see who complains ... just don't tell the 
french (for who it was there in te first place) -)

> lm-texnansi comes from meta-tex.tex. Any chance to change that piece
> of code, so that that font won't be needed any more (I have always
> wondered what that definition in meta-tex is used for)?

hm, a bit of a problem since metapost can only handle type 1 and tex 
handles the text part of that ... must think of it (well, we can disable 
  metapost support in xetex -)

> \truefontname inside NEWTEX in font-ini seems to deliver names
> suitable for luaTeX, but not for XeTeX.

hm, strange, what is the error message? it should resolve to a proper 
filename so ...

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Fri Sep 28 20:45:12 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 28 Sep 2007 20:45:12 +0200
Subject: [dev-context] new current
Message-ID: <46FD4BB8.1000902@elvenkind.com>


Hi,

Not sure if you caught up with this yet, but Hans released  a new
'current' context today.

I have no time to write the release notes page today, but I believe
the bulk of changes is:

* a new lua lpeg-based xml and xpath parser for mkiv
* a number of xetex-related fixes and changes
   (mostly initialized by Mojca)

More tomorrow.

Best wishes, Taco

-------- Original Message --------
Subject: Cron <context at server> 
/var/www/aanhet.net/context/bin/cron/context-mirror
Date: Fri, 28 Sep 2007 13:03:23 +0200 (CEST)
From: root at aanhet.net (Cron Daemon)
To: taco at elvenkind.com

receiving file list ... done
  ./
  context/beta/
  context/current/
  context/current/cont-exa.zip
  context/current/cont-img.zip
  context/current/cont-mpd.zip
  context/current/cont-ppc.zip
  context/current/cont-tmf.zip


From taco at elvenkind.com  Sat Sep 29 12:46:40 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 29 Sep 2007 12:46:40 +0200
Subject: [dev-context] new current
In-Reply-To: <46FD4BB8.1000902@elvenkind.com>
References: <46FD4BB8.1000902@elvenkind.com>
Message-ID: <46FE2D10.5090105@elvenkind.com>

Taco Hoekwater wrote:
> Hi,
> 
> Not sure if you caught up with this yet, but Hans released  a new
> 'current' context today.
> 
> I have no time to write the release notes page today, but I believe
> the bulk of changes is:
> 
> * a new lua lpeg-based xml and xpath parser for mkiv
> * a number of xetex-related fixes and changes
>    (mostly initialized by Mojca)

Wiki page (with a few question marks still):

   http://wiki.contextgarden.net/Context_2007.09.28


From preining at logic.at  Mon Oct  1 07:22:10 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 1 Oct 2007 07:22:10 +0200
Subject: [dev-context] setting up context/luatex, luatex caches
Message-ID: <20071001052210.GA18947@gamma.logic.tuwien.ac.at>

Hi all!

Before uploading context 2007.09.28 I want to straigthen some things out
wrt luatex etc, the least is that I want to add a README so that users
can set up context/luatex themselves.

Now my questions:
- Is it possible to have MORE THAN ONE luatex cache directory? Something
  like
	TEXMFCACHE=/var/lib/texmf/systexmf-cache;$HOME/.texmf-var/texmfcache
  such that 
	/v/l/t/systexmf-cache contains the cached trees for the system
		trees (/usr/share/texmf{,-texlive}, ...)
	$HOME/.texmf-var/texmfcache contains the cache of the users
		home directory texmf tree

- Is it possible to tell luatools to update only some (or only one)
  texmf tree? Something like
	luatools --generate /usr/share/texmf-texlive
  ?

- Is there an obvious objection to replace luatex binary with a script
  which contains the necessary TEXMFCNF settings, something like
	if [ -z "$TEXMFCNF" ] ; then
		TEXMFCNF=/usr/share/texmf/web2c
		export TEXMFCNF
	fi
	luatex.bin $*
  ? Reason: First is that we know where the texmf.cnf is and we don't
  have to urge the user to set the env var. Furthermore a user CAN 
  override the TEXMFCNF settings if he wants to.

Thanks a lot, and sorry for buggering you with these questions, but I
want to get a decent system for Debian.  

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
For a moment, nothing happened. Then, after a second or
so, nothing continued to happen.
                 --- Douglas Adams, The Hitchhikers Guide to the Galaxy

From arthur.reutenauer at normalesup.org  Mon Oct  1 07:59:36 2007
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Mon, 1 Oct 2007 07:59:36 +0200
Subject: [dev-context] setting up context/luatex, luatex caches
In-Reply-To: <20071001052210.GA18947@gamma.logic.tuwien.ac.at>
References: <20071001052210.GA18947@gamma.logic.tuwien.ac.at>
Message-ID: <20071001055936.GA17300@phare.normalesup.org>

> - Is it possible to have MORE THAN ONE luatex cache directory?

  I'm not sure if this really makes sense, but you may want to know that
luatools looks up a number of environment variables consecutively to
determine the location of the cache: first TEXMFCACHE, then HOME and
other similar variables, then VARTEXMF and similar vars, etc. (see line 3768
of luatools.lua for the complete list).

  I guess this could do the trick: the installation could generate the
formats and put them in $VARTEXMF, and each user could put his own files
in $HOME and override the defaults if the wants to (provided TEXMFCACHE
is not set); but I need to check if this indeed works (not sure).

> - Is there an obvious objection to replace luatex binary with a script
>   which contains the necessary TEXMFCNF settings

  I don't think this would be any problem with the ConTeXt developers,
but you need to account for the fact that LuaTeX may be used with other
formats.  That's what I told you in the other thread: all these settings
are related to LuaTeX but they're really specific to ConTeXt, and if
someone wants to use LaTeX over the LuaTeX engine he may not be happy
that the settings are not exactly the same than for the other engines.

  Of course if you only set TEXMFCNF and nothing else this shouldn't
make any difference.

	Arthur

From pragma at wxs.nl  Mon Oct  1 10:49:34 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 01 Oct 2007 10:49:34 +0200
Subject: [dev-context] setting up context/luatex, luatex caches
In-Reply-To: <20071001055936.GA17300@phare.normalesup.org>
References: <20071001052210.GA18947@gamma.logic.tuwien.ac.at>
	<20071001055936.GA17300@phare.normalesup.org>
Message-ID: <4700B49E.5030901@wxs.nl>

Arthur Reutenauer wrote:
>> - Is it possible to have MORE THAN ONE luatex cache directory?
> 
>   I'm not sure if this really makes sense, but you may want to know that
> luatools looks up a number of environment variables consecutively to
> determine the location of the cache: first TEXMFCACHE, then HOME and
> other similar variables, then VARTEXMF and similar vars, etc. (see line 3768
> of luatools.lua for the complete list).
> 
>   I guess this could do the trick: the installation could generate the
> formats and put them in $VARTEXMF, and each user could put his own files
> in $HOME and override the defaults if the wants to (provided TEXMFCACHE
> is not set); but I need to check if this indeed works (not sure).
> 
>> - Is there an obvious objection to replace luatex binary with a script
>>   which contains the necessary TEXMFCNF settings
> 
>   I don't think this would be any problem with the ConTeXt developers,
> but you need to account for the fact that LuaTeX may be used with other
> formats.  That's what I told you in the other thread: all these settings
> are related to LuaTeX but they're really specific to ConTeXt, and if
> someone wants to use LaTeX over the LuaTeX engine he may not be happy
> that the settings are not exactly the same than for the other engines.

when generating things you see something

c:/temp/luatex-cache/context/36cfaf81cc343ab858e892f7ccbb5039/trees/36cfaf81cc343ab858e892f7cc
bb5039.tma

the first hash is tree basesd and permits multiple tex installations 
alongside, the filename hashes are derived from the names plus full 
paths, also in order to prevent funny subpaths etc; so, indeed we can 
run multiple installations in the same cache (on our linux servers i 
often run multiple trees along side since project use frozen tex's)

Hans




-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From preining at logic.at  Mon Oct  1 11:00:14 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 1 Oct 2007 11:00:14 +0200
Subject: [dev-context] setting up context/luatex, luatex caches
In-Reply-To: <4700B49E.5030901@wxs.nl>
References: <20071001052210.GA18947@gamma.logic.tuwien.ac.at>
	<20071001055936.GA17300@phare.normalesup.org>
	<4700B49E.5030901@wxs.nl>
Message-ID: <20071001090014.GB29998@gamma.logic.tuwien.ac.at>

Hi Hans!

On Mo, 01 Okt 2007, Hans Hagen wrote:
> >>- Is it possible to have MORE THAN ONE luatex cache directory?
[...]
> the first hash is tree basesd and permits multiple tex installations 
> alongside, the filename hashes are derived from the names plus full 
> paths, also in order to prevent funny subpaths etc; so, indeed we can 
> run multiple installations in the same cache (on our linux servers i 
> often run multiple trees along side since project use frozen tex's)

Sorry if I have been unclear: I don't want to have different
installation trees in the lua cache, I want DIFFERENT LOCATIONS of the
lua cache to be merged. So that the cache for
	TEXMFDIST
	TEXMFMAIN
	TEXMFVAR
lies in /var/lib/texmf/luatexcache, and the cache for
	TEXMFHOME
lies in ~/.texmf-var/luatexcache.

And in ~/.texmf-var/luatexcache there is ONLY the cache for TEXMFHOME
and not for the others.

So users can add/remove files from TEXMFHOME and update their local
cache without fiddling with the system wide cache.

Do go conform with other texmf.cnf settings, for example something like
this:
	TEXMFSYSCACHE=/var/lib/texmf/luatexcache
	TEXMFCACHE=$HOME/.texmf-var/luatexcache
and luatex/context collects the stuff found in TEXMFSYSCACHE and
TEXMFCACHE. Same as with TEXMFVAR and TEXMFSYSVAR

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
EAST WITTERING (n.)
The same as west wittering (q.v.) only it's you they've trying to get
away from.
			--- Douglas Adams, The Meaning of Liff

From mojca.miklavec.lists at gmail.com  Mon Oct  1 13:32:27 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 1 Oct 2007 13:32:27 +0200
Subject: [dev-context] enco-utf: some details that made me laugh :)
Message-ID: <6faad9f00710010432g20dd1cben7854153a75d5728d@mail.gmail.com>

Try to find the following two lines in
http://source.contextgarden.net/enco-utf.tex
    \def\cyrillicTITLO
    \def\hebrewAlef

It has made me laugh :) And it really makes me wonder how it works in
practice :) :) :)

Mojca

From mojca.miklavec.lists at gmail.com  Mon Oct  1 13:36:53 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 1 Oct 2007 13:36:53 +0200
Subject: [dev-context] enco-utf: some details that made me laugh :)
In-Reply-To: <6faad9f00710010432g20dd1cben7854153a75d5728d@mail.gmail.com>
References: <6faad9f00710010432g20dd1cben7854153a75d5728d@mail.gmail.com>
Message-ID: <6faad9f00710010436n59241dfcvd0557e8220096dca@mail.gmail.com>

On 10/1/07, Mojca Miklavec <mojca.miklavec.lists at gmail.com> wrote:
> Try to find the following two lines in
> http://source.contextgarden.net/enco-utf.tex
>     \def\cyrillicTITLO
>     \def\hebrewAlef
>
> It has made me laugh :) And it really makes me wonder how it works in
> practice :) :) :)

I'm sorry. I should have attached a screenshot. The problem only
arises with Safari, Firefox renders it OK, so the joke isn't
interesting any more :(

In the first case, the combining accent is placed over {, and in the
second case the closing bracket is turned around because of Hebrew :)

Mojca

From mojca.miklavec.lists at gmail.com  Tue Oct  2 02:10:34 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 2 Oct 2007 02:10:34 +0200
Subject: [dev-context] XML error reporting
Message-ID: <6faad9f00710011710h16a0c2e7w3251db4051f8b12a@mail.gmail.com>

Hello Hans,

the lua XML parser works nice: no errors are tolerated at all, so the
following example:

<?xml version="1.0" encoding="utf-8"?>
<story>
<windows>my secret</mouse>
</story>

will fail with a friendly message, but it would be really helpful if
one would know at which line in the source file the error has happened
to help debugging.

Btw: \xmlprocess doesn't complain if the file is not found. I spent
quite some time trying to figure out what I did wrong in the
definitions again, only to figure out that the file had been saved
under a different location :(

None of this is high-priority, but only
"would-be-nice-to-have-in-distant-future" request.

Thanks a lot,
    Mojca

From pragma at wxs.nl  Tue Oct  2 09:05:26 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 02 Oct 2007 09:05:26 +0200
Subject: [dev-context] XML error reporting
In-Reply-To: <6faad9f00710011710h16a0c2e7w3251db4051f8b12a@mail.gmail.com>
References: <6faad9f00710011710h16a0c2e7w3251db4051f8b12a@mail.gmail.com>
Message-ID: <4701EDB6.7070702@wxs.nl>

Mojca Miklavec wrote:
> Hello Hans,
> 
> the lua XML parser works nice: no errors are tolerated at all, so the
> following example:
> 
> <?xml version="1.0" encoding="utf-8"?>
> <story>
> <windows>my secret</mouse>
> </story>
> 
> will fail with a friendly message, but it would be really helpful if
> one would know at which line in the source file the error has happened
> to help debugging.

hm, only if it does not slow down parsing; a counter would involve extra 
line end parsing so that would be a slow downer, but maybe i can reparse 
the stored partial tree in case of an error

> Btw: \xmlprocess doesn't complain if the file is not found. I spent
> quite some time trying to figure out what I did wrong in the
> definitions again, only to figure out that the file had been saved
> under a different location :(

sure, this is only low level stuff, some day i will extend it

> None of this is high-priority, but only
> "would-be-nice-to-have-in-distant-future" request.

ok, so remind me in that future -)

btw, i like the example -)

 >mtxrun.cmd  --script "test.lua"
load	unable to close windows with mouse

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From preining at logic.at  Tue Oct  2 15:55:00 2007
From: preining at logic.at (Norbert Preining)
Date: Tue, 2 Oct 2007 15:55:00 +0200
Subject: [dev-context] Call for test documents
Message-ID: <20071002135500.GH32335@gamma.logic.tuwien.ac.at>

Dear all,

I am currently testing the installation of ConTeXt/MkIV on Debian and
thus being in search for test documents using MkIV features/luatex
stuff. Or at least document which I can/should be able to process with
luatex/context.

If you have any documents it would be great if you could send me them,
best together with a short line on HOW to process the documents, and
even better with a "correct" pdf output.

This way I can do proper checking.

Thanks a lot and all the best

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
THRUMSTRER (n.)
The irritating man next to you in a concert who thinks he's (a) the
conductor, (b) the brass section.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Tue Oct  2 16:48:45 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 02 Oct 2007 16:48:45 +0200
Subject: [dev-context] Call for test documents
In-Reply-To: <20071002135500.GH32335@gamma.logic.tuwien.ac.at>
References: <20071002135500.GH32335@gamma.logic.tuwien.ac.at>
Message-ID: <47025A4D.6070404@wxs.nl>

Norbert Preining wrote:
> Dear all,
> 
> I am currently testing the installation of ConTeXt/MkIV on Debian and
> thus being in search for test documents using MkIV features/luatex
> stuff. Or at least document which I can/should be able to process with
> luatex/context.
> 
> If you have any documents it would be great if you could send me them,
> best together with a short line on HOW to process the documents, and
> even better with a "correct" pdf output.

http://context.aanhet.net/svn/manuals/

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From preining at logic.at  Wed Oct  3 09:48:24 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 3 Oct 2007 09:48:24 +0200
Subject: [dev-context] integrating context mkiv, luatex, and fmtutil,
	mktexlsr, etc
Message-ID: <20071003074824.GW9324@gamma.logic.tuwien.ac.at>

Hi Hans, Taco, all!

I am starting to think about integrating context/mkiv/luatex into TeX
Live (and use as a test bed the Debian packages). Currently I see the
following problems:
- integration into fmtutil:
  currently we build formats for cont-en/xetex, cont-en/pdftex, etc
  based on the fmtutil.cnf syntax, ie calling something like
	$ENGINE -ini  -jobname=cont-en -progname=context -8bit *cont-en.ini
  Now putting luatex as engine this doesn't work:
(/usr/share/texmf/tex/context/base/luat-env.tex
! LuaTeX error [string "luas[0]"]:1: attempt to index global 'input' (a nil value).
<argument> ...mf.instance,"luat-env.lua","tex")) }

- integration into mktexlsr
  see my other email about multiple cache merging, but to some up:
  . cache should be read from more then one directory, eg from
    TEXMFSYSCACHE and TEXMFCACHE (with usual override stuff)
  . single cache updates should be possible:
	luatools --generate $HOME/texmf
    should generate the cache for $HOME/texmf in $TEXMFCACHE


Other things I realized as user:
- running texexec --lua test.tex generates the format in 
	~/luatex-cache/context/e027248d6557d124c703335e8a95ecd5/formats
  but it creates it again and again. 
- If I move the generated files from the above dir to
	~/.texmf-var/web2c/luatex/
  and regenerate the luatex-cache with --generate --verbose the next run 
  does not work:
LuaTools | using format name /home/norbert/luatex-cache/context/e027248d6557d124c703335e8a95ecd5/formats/cont-en.fmt
LuaTools | no luc/lua with name /home/norbert/luatex-cache/context/e027248d6557d124c703335e8a95ecd5/formats/cont-en


Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
SWANAGE (pl.n.)
Swanage is the series of diversionary tactics used when trying to
cover up the existence of a glossop (q.v.) and may include (a)
uttering a high-pitched laugh and pointing out of the window (NB. this
doesn't work more that twice); (b) sneezing as loudly as possible and
wiping the glossop off the table in the same movement as whipping out
your handkerchief; (c) saying 'Christ! I seen to have dropped some
shit on your table' (very unwise); (d) saying 'Christ, who did that?'
(better) (e) pressing your elbow on the glossop itself and working
your arms slowly to the edge of the table; (f) leaving the glossop
where it is but moving a plate over it and putting up with sitting at
an uncomfortable angle the rest of the meal; or, if the glossop is in
too exposed a position, (g) leaving it there unremarked except for the
occasional humorous glance.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Wed Oct  3 12:25:22 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Oct 2007 12:25:22 +0200
Subject: [dev-context] integrating context mkiv, luatex, and fmtutil,
 mktexlsr, etc
In-Reply-To: <20071003074824.GW9324@gamma.logic.tuwien.ac.at>
References: <20071003074824.GW9324@gamma.logic.tuwien.ac.at>
Message-ID: <47036E12.8070105@wxs.nl>

Norbert Preining wrote:

> I am starting to think about integrating context/mkiv/luatex into TeX
> Live (and use as a test bed the Debian packages). Currently I see the
> following problems:
> - integration into fmtutil:
>   currently we build formats for cont-en/xetex, cont-en/pdftex, etc
>   based on the fmtutil.cnf syntax, ie calling something like
> 	$ENGINE -ini  -jobname=cont-en -progname=context -8bit *cont-en.ini
>   Now putting luatex as engine this doesn't work:
> (/usr/share/texmf/tex/context/base/luat-env.tex
> ! LuaTeX error [string "luas[0]"]:1: attempt to index global 'input' (a nil value).
> <argument> ...mf.instance,"luat-env.lua","tex")) }

that won't work because luatex by itself cannot take care of the stubs 
it may need for starting up (how could it know -)

making a format (at least formkiv, but also for plain if you want) 
boils down to:

- making a lua stub file (lua)
- compiling that for fast loading (luc)
- making a format

the stub is needed because the first thing that we do is to overload 
kpse (and provide support for reading from zips etc); the stub is later 
overloaded by embedded code if needed; luatools takes care of making the 
stub, compiling it etc etc

$ENGINE --luaonly luatools.lua --make --compile cont-en
$ENGINE --luaonly luatools.lua --make --compile plain

> - integration into mktexlsr
>   see my other email about multiple cache merging, but to some up:
>   . cache should be read from more then one directory, eg from
>     TEXMFSYSCACHE and TEXMFCACHE (with usual override stuff)
>   . single cache updates should be possible:
> 	luatools --generate $HOME/texmf

i'll see what i can do

>     should generate the cache for $HOME/texmf in $TEXMFCACHE

what exactly do you mean with integration? calling luatools?

> 
> Other things I realized as user:
> - running texexec --lua test.tex generates the format in 
> 	~/luatex-cache/context/e027248d6557d124c703335e8a95ecd5/formats
>   but it creates it again and again. 

strange, since texexec --lua is not supposed to generate a format at all

> - If I move the generated files from the above dir to
> 	~/.texmf-var/web2c/luatex/
>   and regenerate the luatex-cache with --generate --verbose the next run 
>   does not work:

(i wonder what i do with the . in .texmf-var -)

the cache is not hashed (no reason for doing it)

> LuaTools | using format name /home/norbert/luatex-cache/context/e027248d6557d124c703335e8a95ecd5/formats/cont-en.fmt
> LuaTools | no luc/lua with name /home/norbert/luatex-cache/context/e027248d6557d124c703335e8a95ecd5/formats/cont-en

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Wed Oct  3 13:04:25 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Oct 2007 13:04:25 +0200
Subject: [dev-context] integrating context mkiv, luatex, and fmtutil,
 mktexlsr, etc
In-Reply-To: <20071003074824.GW9324@gamma.logic.tuwien.ac.at>
References: <20071003074824.GW9324@gamma.logic.tuwien.ac.at>
Message-ID: <47037739.208@wxs.nl>

Norbert Preining wrote:

>   see my other email about multiple cache merging, but to some up:
>   . cache should be read from more then one directory, eg from
>     TEXMFSYSCACHE and TEXMFCACHE (with usual override stuff)
>   . single cache updates should be possible:
> 	luatools --generate $HOME/texmf
>     should generate the cache for $HOME/texmf in $TEXMFCACHE

let's assume that this is only useful for formats and file databases (i 
cannot imagine a sysadm messing around with documents in order to get a 
couple of font tables done)

as it happens, the file databases and formats used to go into the tree, 
but currently i default to

	input.usecache = true

now, i added an environment variable so that you can control this ...

	input.usecache = not toboolean(os.getenv("TEXMFSHARECACHE") or 
"false",true)

yes, true, one, 1 are all equal to true so you can try

	set TEXMFCACHE=true

well, your shell equivalent of that

i will upload a beta (generating now) so that you can play with it 
(luat-tmp, luatools and mtxrun are all adapted)

beware, for this beta you need a recent luatex because we no longer 
preload patterns but load them at runtime (smaller format, faster start, 
faster run) so we're talking real beta here -)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From preining at logic.at  Wed Oct  3 13:06:34 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 3 Oct 2007 13:06:34 +0200
Subject: [dev-context] integrating context mkiv, luatex, and fmtutil,
	mktexlsr, etc
In-Reply-To: <47036E12.8070105@wxs.nl>
References: <20071003074824.GW9324@gamma.logic.tuwien.ac.at>
	<47036E12.8070105@wxs.nl>
Message-ID: <20071003110634.GA29863@gamma.logic.tuwien.ac.at>

Hi Hans, hi all,

On Mi, 03 Okt 2007, Hans Hagen wrote:
> Norbert Preining wrote:
> >	$ENGINE -ini  -jobname=cont-en -progname=context -8bit *cont-en.ini
[...]
> that won't work because luatex by itself cannot take care of the stubs 
> it may need for starting up (how could it know -)
> 
> making a format (at least formkiv, but also for plain if you want) 
> boils down to:
> 
> - making a lua stub file (lua)
> - compiling that for fast loading (luc)
> - making a format

Ok, that said we have to adjust the fmtutil script. Currently the
information stored in the fmtutil.cnf file is
	$format $engine $sometestfile $restofcmdlineoptions
These lines normally trigger a call to 
	$engine -ini -jobname=$format -progname=context $cmdline
(the progname is already a special case AFAIR).

Now for combinations of
	cont-?? $engine ...
we could switch to calling
	texexec --engine $engine --make ??
Is this right? 

But this doesn't work with luatex:
	texexec --engine luatex --make en
still runs luatex. (Strange btw, isn't it?)

So, what is the *recommended* way to generate context formats for the
following engines:
	pdftex:		ini, texexec
	xetex:		ini, texexec
	aleph:		ini, texexec
	luatex:		???
(ini: calling $engine -ini ..., 
texexec: calling texexec --engine $engine --make ??)

> $ENGINE --luaonly luatools.lua --make --compile cont-en
> $ENGINE --luaonly luatools.lua --make --compile plain

Ok, so one could call

	luatools --make --compile cont-en

??? 

For all those texexec/luatools creating of formats there is another
problem: The formats are placed in quite arbitrary locations. TEXMFVAR
should be the right place, but this is not honoured (in my case texexec
did put it into TEXMFHOME!). Or at least it should be *fixed* to which
tree the format will be written.

Then there is the problem that luatools --make does not work without any
cache, well, see below.

> >- integration into mktexlsr
> >  see my other email about multiple cache merging, but to some up:
> >  . cache should be read from more then one directory, eg from
> >    TEXMFSYSCACHE and TEXMFCACHE (with usual override stuff)
> >  . single cache updates should be possible:
> >	luatools --generate $HOME/texmf
> 
> i'll see what i can do
> 
> >    should generate the cache for $HOME/texmf in $TEXMFCACHE
> 
> what exactly do you mean with integration? calling luatools?

Well, the idea is that if someone calls
	mktexlsr $tree
and luatex/context is installed, the luatex cache is also updated. The
idea is that we just plug in some code that is only executed if context
and luatex is installed, that updates the cache.

Take for example Debian: One can install texlive packages, plus
independent context and luatex packages. But all the add-on packages for
fonts etc only call mktexlsr. We will have a hard time forcing them to
add some magic that in case of the presence of luatex/context also the
cache (for system files) is updated.

My idea is to have something mktexlsr.d/ directory where packages can
drop scripts (same would work also in TeX Live) and mktexlsr at the end
of the run calls these scripts. So if luatex drops something, and
context drops something, we could organize that not only the mktexlsr
db, but also the luatex cache is up2date.

> >Other things I realized as user:
> >- running texexec --lua test.tex generates the format in 
> >	~/luatex-cache/context/e027248d6557d124c703335e8a95ecd5/formats
> >  but it creates it again and again. 
> 
> strange, since texexec --lua is not supposed to generate a format at all

Maybe I missed something ...

> >- If I move the generated files from the above dir to
> >	~/.texmf-var/web2c/luatex/
> >  and regenerate the luatex-cache with --generate --verbose the next run 
> >  does not work:
> 
> (i wonder what i do with the . in .texmf-var -)

Aehmmm, but the luatex cache will quite sure be set to something with a
dot, at least the local one ;-)

---------------------

I think it is time to discuss all this problems now, otherwise inclusion
into TeX Live upstream and Debian will make problems. Ok, I can just
ship the stuff and don't produce and cache/formats whatsoever for MkIV,
MkII still works quite well. But I guess it would be nice to sort this
out in a good way for all parties.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
THURNBY (n.)
A rucked-up edge of carpet or linoleum which everyone says someone
will trip over and break a leg unless it gets fixed. After a year or
two someone trips over it and breaks a leg.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Wed Oct  3 13:10:38 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 3 Oct 2007 13:10:38 +0200
Subject: [dev-context] integrating context mkiv, luatex, and fmtutil,
	mktexlsr, etc
In-Reply-To: <47037739.208@wxs.nl>
References: <20071003074824.GW9324@gamma.logic.tuwien.ac.at>
	<47037739.208@wxs.nl>
Message-ID: <20071003111038.GB29863@gamma.logic.tuwien.ac.at>

On Mi, 03 Okt 2007, Hans Hagen wrote:
> >  . cache should be read from more then one directory, eg from
> >    TEXMFSYSCACHE and TEXMFCACHE (with usual override stuff)
> >  . single cache updates should be possible:
> >	luatools --generate $HOME/texmf
> >    should generate the cache for $HOME/texmf in $TEXMFCACHE
> 
> let's assume that this is only useful for formats and file databases (i 
> cannot imagine a sysadm messing around with documents in order to get a 
> couple of font tables done)

Definitely. The idea is that the cache is for the files installed by
system software (Debian packages, Windows sysadm installing TeX Live,
etc).

> now, i added an environment variable so that you can control this ...
> 
> 	input.usecache = not toboolean(os.getenv("TEXMFSHARECACHE") or 
> "false",true)
> 
> yes, true, one, 1 are all equal to true so you can try
> 
> 	set TEXMFCACHE=true
> 
> well, your shell equivalent of that

TEXMFCACHE or TEXMFSHARECACHE?

But I don't see how this will work? I checked the luacode a bit and I
saw that it only loads from ONE cache directory. Could we set
	LUATEXCACHE=/var/lib/sysluacache:$TEXMFVAR/luacache:...
	TEXMFSHARECACHE=yes
?? Or do I misunderstand something?

> beware, for this beta you need a recent luatex because we no longer 
> preload patterns but load them at runtime (smaller format, faster start, 
> faster run) so we're talking real beta here -)

svn, or is there going to be a release sometimes soon?

Thanks a lot and all the best

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
WRITTLE (vb.)
Of a steel ball, to settle into a hole.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Wed Oct  3 13:15:13 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 3 Oct 2007 13:15:13 +0200
Subject: [dev-context] Call for test documents
In-Reply-To: <47025A4D.6070404@wxs.nl>
References: <20071002135500.GH32335@gamma.logic.tuwien.ac.at>
	<47025A4D.6070404@wxs.nl>
Message-ID: <20071003111513.GA31958@gamma.logic.tuwien.ac.at>

On Di, 02 Okt 2007, Hans Hagen wrote:
> http://context.aanhet.net/svn/manuals/

Is there svn access? I have a checkout (very old) but the svn address
has changed.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
SLUGGAN (n.)
A lurid facial bruise which everyone politely omits to mention because
it's obvious that you had a punch-up with your spouse last night - but
which into a door. It is useless to volunteer the true explanation
because nobody will believe it.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Wed Oct  3 13:20:17 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Oct 2007 13:20:17 +0200
Subject: [dev-context] integrating context mkiv, luatex, and fmtutil,
 mktexlsr, etc
In-Reply-To: <20071003111038.GB29863@gamma.logic.tuwien.ac.at>
References: <20071003074824.GW9324@gamma.logic.tuwien.ac.at>
	<47037739.208@wxs.nl>
	<20071003111038.GB29863@gamma.logic.tuwien.ac.at>
Message-ID: <47037AF1.4020104@wxs.nl>

Norbert Preining wrote:

> But I don't see how this will work? I checked the luacode a bit and I
> saw that it only loads from ONE cache directory. Could we set
> 	LUATEXCACHE=/var/lib/sysluacache:$TEXMFVAR/luacache:...
> 	TEXMFSHARECACHE=yes
> ?? Or do I misunderstand something?

formats go to the paths defined in texmf.cnf (TEXFORMATS) and the 
filedatabses go alongside the ls-R files, so basically it then behaves 
like any other tex

the cache path is only used and populated at runtime, so

LUATEXCACHE=$TEXMFVAR/luacache:...
TEXMFSHARECACHE=yes

should be ok then; if needed, later i can look into a way to share other 
cache stuff (say that you generate tmc files for 300 fonts at 
installation time) but if i understoof right, the main reason was 
formats and file databases

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Wed Oct  3 13:31:46 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 03 Oct 2007 13:31:46 +0200
Subject: [dev-context] [NTG-context]  Call for test documents
In-Reply-To: <20071003111513.GA31958@gamma.logic.tuwien.ac.at>
References: <20071002135500.GH32335@gamma.logic.tuwien.ac.at>	<47025A4D.6070404@wxs.nl>
	<20071003111513.GA31958@gamma.logic.tuwien.ac.at>
Message-ID: <47037DA2.7010300@elvenkind.com>

Norbert Preining wrote:
> On Di, 02 Okt 2007, Hans Hagen wrote:
>> http://context.aanhet.net/svn/manuals/
> 
> Is there svn access? I have a checkout (very old) but the svn address
> has changed.

My mirror script (that populates the above url) uses:

    svn://83.247.100.17:33690/manuals



From taco at elvenkind.com  Wed Oct  3 13:09:15 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 03 Oct 2007 13:09:15 +0200
Subject: [dev-context] integrating context mkiv, luatex, and fmtutil,
 mktexlsr, etc
In-Reply-To: <47037739.208@wxs.nl>
References: <20071003074824.GW9324@gamma.logic.tuwien.ac.at>
	<47037739.208@wxs.nl>
Message-ID: <4703785B.4030408@elvenkind.com>

Hans Hagen wrote:
> 
> yes, true, one, 1 are all equal to true so you can try
> 
> 	set TEXMFCACHE=true

I assume this should read

        export TEXMFSHARECACHE=true

Best, Taco

From pragma at wxs.nl  Wed Oct  3 13:35:40 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Oct 2007 13:35:40 +0200
Subject: [dev-context] integrating context mkiv, luatex, and fmtutil,
 mktexlsr, etc
In-Reply-To: <20071003110634.GA29863@gamma.logic.tuwien.ac.at>
References: <20071003074824.GW9324@gamma.logic.tuwien.ac.at>
	<47036E12.8070105@wxs.nl>
	<20071003110634.GA29863@gamma.logic.tuwien.ac.at>
Message-ID: <47037E8C.7080907@wxs.nl>

Norbert Preining wrote:

> Now for combinations of
> 	cont-?? $engine ...
> we could switch to calling
> 	texexec --engine $engine --make ??
> Is this right? 
> 
> But this doesn't work with luatex:
> 	texexec --engine luatex --make en
> still runs luatex. (Strange btw, isn't it?)

texexec --make --luatex en

as usual, format generating programs have to mess around with the 
resulting format file (texexec goes to the format path)

you can use luatools --make --compile cont-en instead but then you need 
to move the format and associated luc file to the right place (i dunno 
if fmtutil does that)

> So, what is the *recommended* way to generate context formats for the
> following engines:
> 	pdftex:		ini, texexec
> 	xetex:		ini, texexec
> 	aleph:		ini, texexec
> 	luatex:		???
> (ini: calling $engine -ini ..., 
> texexec: calling texexec --engine $engine --make ??)

just --make --xetex|pdftex|luatex should work

>> $ENGINE --luaonly luatools.lua --make --compile cont-en
>> $ENGINE --luaonly luatools.lua --make --compile plain
> 
> Ok, so one could call
> 
> 	luatools --make --compile cont-en
> 
> ??? 

sure, this is what texexec does -)

luatools is a subset of the lua files in context/base, merged into one 
file, and with some extra functionality like playing kpsewhich (but a 
bit more, like "luatools --pattern=lmr10*" and such, and mtxrun is a 
closely related thing that we will use to run scripts that like the 
preloaded libs in luatex as well as file searching, think of

mtxrun --script cache --purge
mtxrun --script babel --language=greek structure=context babelcoded.tex

etc

> For all those texexec/luatools creating of formats there is another
> problem: The formats are placed in quite arbitrary locations. TEXMFVAR
> should be the right place, but this is not honoured (in my case texexec
> did put it into TEXMFHOME!). Or at least it should be *fixed* to which
> tree the format will be written.

this depends on the value of TEXFORMATS nd what path is first writable 
(if i did things right but maybe taco can check that since he's on 
linux); i always have a texformats var set -)

> Then there is the problem that luatools --make does not work without any
> cache, well, see below.
> 
>>> - integration into mktexlsr
>>>  see my other email about multiple cache merging, but to some up:
>>>  . cache should be read from more then one directory, eg from
>>>    TEXMFSYSCACHE and TEXMFCACHE (with usual override stuff)
>>>  . single cache updates should be possible:
>>> 	luatools --generate $HOME/texmf
>> i'll see what i can do
>>
>>>    should generate the cache for $HOME/texmf in $TEXMFCACHE
>> what exactly do you mean with integration? calling luatools?
> 
> Well, the idea is that if someone calls
> 	mktexlsr $tree
> and luatex/context is installed, the luatex cache is also updated. The
> idea is that we just plug in some code that is only executed if context
> and luatex is installed, that updates the cache.

i can add that option

> Aehmmm, but the luatex cache will quite sure be set to something with a
> dot, at least the local one ;-)

yeah ... i've seen those dotted files in linux installations (just as 
Desktop and other macish/windowish paths, so i wonder when we wil have a 
Progam Files -); anyhow, it should work and probably works; sometimes i 
  do some . and .. checks to make sure that no one misuses this to get 
to paths they're not supposed to visit)

btw, reminds me ... is this becoming a cross distribution linux 
convention (was already so on the mac) ... no longer root users, but 
always a sudu needed?

> I think it is time to discuss all this problems now, otherwise inclusion
> into TeX Live upstream and Debian will make problems. Ok, I can just
> ship the stuff and don't produce and cache/formats whatsoever for MkIV,
> MkII still works quite well. But I guess it would be nice to sort this
> out in a good way for all parties.

sure, and i appreciate your efforts and testing -)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Wed Oct  3 13:21:32 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Oct 2007 13:21:32 +0200
Subject: [dev-context] Call for test documents
In-Reply-To: <20071003111513.GA31958@gamma.logic.tuwien.ac.at>
References: <20071002135500.GH32335@gamma.logic.tuwien.ac.at>
	<47025A4D.6070404@wxs.nl>
	<20071003111513.GA31958@gamma.logic.tuwien.ac.at>
Message-ID: <47037B3C.5030002@wxs.nl>

Norbert Preining wrote:
> On Di, 02 Okt 2007, Hans Hagen wrote:
>> http://context.aanhet.net/svn/manuals/
> 
> Is there svn access? I have a checkout (very old) but the svn address
> has changed.

taco fetches from our internal svn server so he can give you the magic 
lines (sounds stupid, but since there's a firewall in between that 
redirects ports so any magic line i give is untested)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From preining at logic.at  Wed Oct  3 14:21:06 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 3 Oct 2007 14:21:06 +0200
Subject: [dev-context] integrating context mkiv, luatex, and fmtutil,
	mktexlsr, etc
In-Reply-To: <47037E8C.7080907@wxs.nl> <47037B3C.5030002@wxs.nl>
	<47037AF1.4020104@wxs.nl>
References: <20071003110634.GA29863@gamma.logic.tuwien.ac.at>
	<47037E8C.7080907@wxs.nl>
	<20071002135500.GH32335@gamma.logic.tuwien.ac.at>
	<47025A4D.6070404@wxs.nl>
	<20071003111513.GA31958@gamma.logic.tuwien.ac.at>
	<47037B3C.5030002@wxs.nl>
	<20071003074824.GW9324@gamma.logic.tuwien.ac.at>
	<47037739.208@wxs.nl>
	<20071003111038.GB29863@gamma.logic.tuwien.ac.at>
	<47037AF1.4020104@wxs.nl>
Message-ID: <20071003122106.GA3597@gamma.logic.tuwien.ac.at>

On Mi, 03 Okt 2007, Hans Hagen wrote:
> formats go to the paths defined in texmf.cnf (TEXFORMATS) and the 
> filedatabses go alongside the ls-R files, so basically it then behaves 
> like any other tex

???  "file databases go alongside the ls-R files" what do you mean? I
thought the stuff generated by luatools is something like the ls-R
database for luatex. But it is placed NOT alongside the ls-R files,
right?

> the cache path is only used and populated at runtime, so

So every time I run a luatex/context document it has to read ALL the
trees again??? Cannot be, that was the whole point of ls-R/cache. It
should be generated once (the cache).

> LUATEXCACHE=$TEXMFVAR/luacache:...
> TEXMFSHARECACHE=yes
> 
> should be ok then; if needed, later i can look into a way to share other 
> cache stuff (say that you generate tmc files for 300 fonts at 
> installation time) but if i understoof right, the main reason was 
> formats and file databases

Yes, currently the main reason is for ls-R replacement and format
location. But font data could be useful, too. My system has quite a lot
of fonts ...



On Mi, 03 Okt 2007, Hans Hagen wrote:
> texexec --make --luatex en
[...]
> this depends on the value of TEXFORMATS nd what path is first writable

Hmm,
$ export TEXFORMATS=/home/norbert/.texmf-var/web2c
$ texexec --make --luatex en
...
TeXExec | using tex engine luatex
TeXExec | using tex format path /home/norbert/.texmf-var/web2c/luatex
TeXExec | generating tex format cont-en
...
Transcript written on cont-en.log.

LuaTools |
LuaTools | runtime: 0.18 seconds
TeXExec | no lua compilations needed
TeXExec |
TeXExec | tex engine path: /home/norbert/.texmf-var/web2c/luatex
TeXExec |
TeXExec |
TeXExec | runtime: 9.486118
$ ls ~/.texmf-var/web2c/luatex
$ ls -l ~/luatex-cache/context/f7d1b3c25487ab1e1035aff1c53b90da/formats/
-rw-r--r-- 1 norbert norbert 5669003 2007-10-03 14:07 cont-en.fmt
-rw-r--r-- 1 norbert norbert   38786 2007-10-03 14:07 cont-en.log
-rw-r--r-- 1 norbert norbert  159484 2007-10-03 14:07 cont-en.lua
-rw-r--r-- 1 norbert norbert  112438 2007-10-03 14:07 cont-en.luc
$

So the format is placed in some strange ;-) place under luatex-cache.

> btw, reminds me ... is this becoming a cross distribution linux
> convention (was already so on the mac) ... no longer root users, but
> always a sudu needed?

No, Debian does not install sudo at all per default. There is a real
root user.

-------------

To sum it up: It is a bit unclear what purpose the cache is used for:
- ls-R replacement, ie some sort of file database
- preprocessed font data cache so that loading the stuff is done faster
- formats??? what is saved for this

But all of this is somehow static. On a normal system a normal user
shouldn't have the necessity to change anything of the above. That
should be done at install time of the respective stuff.

Furthermore, the cache could be used (no idea whether this is true) for:
- single job caching of data
	wouldn't it be better to keep generated files like this in the
	cwd, like .aux, etc files
- caching of user files
	like the above, but initiated by the user

Again, I don't see any other use than these ones, but please enlighten
me what else it is used for. But in this case some mktexlsr-ish approach
would make sense.

So suggestion, like any TEXMF tree contains a ls-R file, we could have
for any TEXMFTREE a lcache/ directory $tree/lcache/ which contains the
cache for this tree.

Since luatools and other things extract the texmf trees anyway from the
TEXMFCNF variable, the cache could be read from there.

What was the reason to do the hashing somewhere else but add the md5sums
etc for these trees?


Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
AINSWORTH (n.)
The length of time it takes to get served in a camera shop. Hence,
also, how long we will have to wait for the abolition of income tax or
the Second Coming.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Wed Oct  3 15:06:28 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 3 Oct 2007 15:06:28 +0200
Subject: [dev-context] [NTG-context]  Call for test documents
In-Reply-To: <47037DA2.7010300@elvenkind.com>
References: <20071002135500.GH32335@gamma.logic.tuwien.ac.at>
	<47025A4D.6070404@wxs.nl>
	<20071003111513.GA31958@gamma.logic.tuwien.ac.at>
	<47037DA2.7010300@elvenkind.com>
Message-ID: <20071003130628.GD3597@gamma.logic.tuwien.ac.at>

On Mi, 03 Okt 2007, Taco Hoekwater wrote:
>     svn://83.247.100.17:33690/manuals

Thanks, worked.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
KANTURK (n.)
An extremely intricate knot originally used for belaying the
topgallant foresheets of a gaff-rigged China clipper, and now more
commonly observed when trying to get an old kite out of the cupboard
under the stairs.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Wed Oct  3 15:06:43 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Oct 2007 15:06:43 +0200
Subject: [dev-context] integrating context mkiv, luatex, and fmtutil,
 mktexlsr, etc
In-Reply-To: <20071003122106.GA3597@gamma.logic.tuwien.ac.at>
References: <20071003110634.GA29863@gamma.logic.tuwien.ac.at>
	<47037E8C.7080907@wxs.nl>
	<20071002135500.GH32335@gamma.logic.tuwien.ac.at>
	<47025A4D.6070404@wxs.nl>
	<20071003111513.GA31958@gamma.logic.tuwien.ac.at>
	<47037B3C.5030002@wxs.nl>
	<20071003074824.GW9324@gamma.logic.tuwien.ac.at>
	<47037739.208@wxs.nl>
	<20071003111038.GB29863@gamma.logic.tuwien.ac.at>
	<47037AF1.4020104@wxs.nl>
	<20071003122106.GA3597@gamma.logic.tuwien.ac.at>
Message-ID: <470393E3.1010803@wxs.nl>

Norbert Preining wrote:
> On Mi, 03 Okt 2007, Hans Hagen wrote:
>> formats go to the paths defined in texmf.cnf (TEXFORMATS) and the 
>> filedatabses go alongside the ls-R files, so basically it then behaves 
>> like any other tex
> 
> ???  "file databases go alongside the ls-R files" what do you mean? I
> thought the stuff generated by luatools is something like the ls-R
> database for luatex. But it is placed NOT alongside the ls-R files,
> right?

well, "TEXMFSHARECACHE=yes" makes sure that it is put in the same path 
as the ls-r file

>> the cache path is only used and populated at runtime, so
> 
> So every time I run a luatex/context document it has to read ALL the
> trees again??? Cannot be, that was the whole point of ls-R/cache. It
> should be generated once (the cache).

no, not the trees, but if one uses a font, say lmroman10-regular.otf, 
then the 'converterd/prepared/whatever' datatable is cached so only that 
file ends up in the cache (flat structure, so, when one needs 
lmroman10-regular.otf, i first look in the cache (no database needed) 
for a tmc/a file, if not present i generate one, using the otf file from 
the normal tree, looked up in a kpse like way)

>> LUATEXCACHE=$TEXMFVAR/luacache:...
>> TEXMFSHARECACHE=yes
>>
>> should be ok then; if needed, later i can look into a way to share other 
>> cache stuff (say that you generate tmc files for 300 fonts at 
>> installation time) but if i understoof right, the main reason was 
>> formats and file databases
> 
> Yes, currently the main reason is for ls-R replacement and format
> location. But font data could be useful, too. My system has quite a lot
> of fonts ...

sure, but that demands some deep thinking because currently i use 
version numbers in the cached data and i don't want to open all cached 
files with the same name in order to check

> 
> 
> On Mi, 03 Okt 2007, Hans Hagen wrote:
>> texexec --make --luatex en
> [...]
>> this depends on the value of TEXFORMATS nd what path is first writable
> 
> Hmm,
> $ export TEXFORMATS=/home/norbert/.texmf-var/web2c
> $ texexec --make --luatex en
> ....
> TeXExec | using tex engine luatex
> TeXExec | using tex format path /home/norbert/.texmf-var/web2c/luatex
> TeXExec | generating tex format cont-en
> ....
> Transcript written on cont-en.log.

i know -) texexec only looks there and reports what it finds; texexec 
itself is unaware of lua and caches and ... i need to fix that

> LuaTools |
> LuaTools | runtime: 0.18 seconds
> TeXExec | no lua compilations needed
> TeXExec |
> TeXExec | tex engine path: /home/norbert/.texmf-var/web2c/luatex
> TeXExec |
> TeXExec |
> TeXExec | runtime: 9.486118
> $ ls ~/.texmf-var/web2c/luatex
> $ ls -l ~/luatex-cache/context/f7d1b3c25487ab1e1035aff1c53b90da/formats/
> -rw-r--r-- 1 norbert norbert 5669003 2007-10-03 14:07 cont-en.fmt
> -rw-r--r-- 1 norbert norbert   38786 2007-10-03 14:07 cont-en.log
> -rw-r--r-- 1 norbert norbert  159484 2007-10-03 14:07 cont-en.lua
> -rw-r--r-- 1 norbert norbert  112438 2007-10-03 14:07 cont-en.luc
> $
> 
> So the format is placed in some strange ;-) place under luatex-cache.

hm, also with the new version and the env var set? here it nicely goes 
to texmf-linux/web2c/luatex

btw, the 'strange' is just an md2 of the tree

> To sum it up: It is a bit unclear what purpose the cache is used for:
> - ls-R replacement, ie some sort of file database

indeed, more flexible, faster etc, and in the future we can use it for more

> - preprocessed font data cache so that loading the stuff is done faster

indeed, only at runtime, so normally in the users path someplace

> - formats??? what is saved for this

a cont-en.fmt as well as a cont-en.luc file, the format and it sstub

> But all of this is somehow static. On a normal system a normal user
> shouldn't have the necessity to change anything of the above. That
> should be done at install time of the respective stuff.

no, the font cache is not pregenerated at all, think of it like this:

- luatex loads otf font (takes time)
- provides it as table to mkiv (takes more time)
- mkiv adds a few things, preprocesses the font a bit
- then saves it as table (compiled) so that loading goes in an eyeblink

> Furthermore, the cache could be used (no idea whether this is true) for:
> - single job caching of data
> 	wouldn't it be better to keep generated files like this in the
> 	cwd, like .aux, etc files

we're talking of megabytes here

btw, context has no aux, toc etc file but a tuo file where all multi 
pass data goes into; in mkiv there is a lua companion because much of 
that data is not stored in lua tables (i still have to do the table of 
contents)

> What was the reason to do the hashing somewhere else but add the md5sums
> etc for these trees?

lengths of paths and such; i run luatex on the unix web/etc servers and 
have multiple trees in parallel, so now i can with one variable changed 
access all data;

/temp/luatex/context/<treeroot>/whatever


/temp/luatex/context/c:/blabla/tex/blabla/whatever


does not work that well, so i hash the treeroot

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From preining at logic.at  Wed Oct  3 15:18:56 2007
From: preining at logic.at (Norbert Preining)
Date: Wed, 3 Oct 2007 15:18:56 +0200
Subject: [dev-context] integrating context mkiv, luatex, and fmtutil,
	mktexlsr, etc
In-Reply-To: <470393E3.1010803@wxs.nl>
References: <20071002135500.GH32335@gamma.logic.tuwien.ac.at>
	<47025A4D.6070404@wxs.nl>
	<20071003111513.GA31958@gamma.logic.tuwien.ac.at>
	<47037B3C.5030002@wxs.nl>
	<20071003074824.GW9324@gamma.logic.tuwien.ac.at>
	<47037739.208@wxs.nl>
	<20071003111038.GB29863@gamma.logic.tuwien.ac.at>
	<47037AF1.4020104@wxs.nl>
	<20071003122106.GA3597@gamma.logic.tuwien.ac.at>
	<470393E3.1010803@wxs.nl>
Message-ID: <20071003131856.GE3597@gamma.logic.tuwien.ac.at>

HI Hans!

On Mi, 03 Okt 2007, Hans Hagen wrote:
> >database for luatex. But it is placed NOT alongside the ls-R files,
> >right?
> 
> well, "TEXMFSHARECACHE=yes" makes sure that it is put in the same path 
> as the ls-r file

Ah, ok, that is with the new context you created today. No, didn't test
this till now ;-) First I guess I need an updated luatex you said.

> no, not the trees, but if one uses a font, say lmroman10-regular.otf, 
> then the 'converterd/prepared/whatever' datatable is cached so only that 
> file ends up in the cache (flat structure, so, when one needs 
> lmroman10-regular.otf, i first look in the cache (no database needed) 
> for a tmc/a file, if not present i generate one, using the otf file from 
> the normal tree, looked up in a kpse like way)
[...]
> >- preprocessed font data cache so that loading the stuff is done faster
> 
> indeed, only at runtime, so normally in the users path someplace

Hmm, I still don't get it. In all this processing, is there a job
depending thing contained? I thought extracting all those tables etc can
be done independently of all jobs (and will help all jobs).

Anyway, I got it. So this is not a bad thing at all to have this stuff
generated at job running time, so we (integrators) don't have to worry
about it.

Only finding all the files is important for a start, so ls-R
replacement.


> >$ ls -l ~/luatex-cache/context/f7d1b3c25487ab1e1035aff1c53b90da/formats/
> >-rw-r--r-- 1 norbert norbert 5669003 2007-10-03 14:07 cont-en.fmt
> >-rw-r--r-- 1 norbert norbert   38786 2007-10-03 14:07 cont-en.log
> >-rw-r--r-- 1 norbert norbert  159484 2007-10-03 14:07 cont-en.lua
> >-rw-r--r-- 1 norbert norbert  112438 2007-10-03 14:07 cont-en.luc
> >$
> >
> >So the format is placed in some strange ;-) place under luatex-cache.
> 
> hm, also with the new version and the env var set? here it nicely goes 
> to texmf-linux/web2c/luatex

Probably an instance of "get the new beta", btw, where do I get it, from
the usual download place? Or is there something else for betas?

> >- formats??? what is saved for this
> 
> a cont-en.fmt as well as a cont-en.luc file, the format and it sstub

Yes of course, but what needs to be cached here but the sole information
that the file exist? (ie updating ls-R/cache)

> >But all of this is somehow static. On a normal system a normal user
> >shouldn't have the necessity to change anything of the above. That
> >should be done at install time of the respective stuff.
> 
> no, the font cache is not pregenerated at all, think of it like this:
> 
> - luatex loads otf font (takes time)
> - provides it as table to mkiv (takes more time)
> - mkiv adds a few things, preprocesses the font a bit
> - then saves it as table (compiled) so that loading goes in an eyeblink

Ok, so after the first processing later jobs will have access to these
tables in a blink. Ok, don't mind. Good for me ;-) No need to worry
about this.

> >Furthermore, the cache could be used (no idea whether this is true) for:
> >- single job caching of data
> >	wouldn't it be better to keep generated files like this in the
> >	cwd, like .aux, etc files
> 
> we're talking of megabytes here

Are these megabytes kept and are they useful for later runs? If yes,
then it is ok to put them in a separate cache (I assume the stuff is
useful, it is the font stuff).

> >What was the reason to do the hashing somewhere else but add the md5sums
> >etc for these trees?
> 
> lengths of paths and such; i run luatex on the unix web/etc servers and 
> have multiple trees in parallel, so now i can with one variable changed 
> access all data;
> 
> /temp/luatex/context/<treeroot>/whatever
> 
> 
> /temp/luatex/context/c:/blabla/tex/blabla/whatever
> 
> 
> does not work that well, so i hash the treeroot

Hmm, but if the caches would be in TEXMFTREE/lcache/ then the only thing
necessary would be a change of
	TEXMFCNF
referencing other trees.

(Sorry, only trying to understand the details ...)

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
He stood up straight and looked the world squarely in the
fields and hills. To add weight to his words he stuck the
rabbit bone in his hair. He spread his arms out wide. `I
will go mad!' he announced.
                 --- Arthur discovering a way of coping with life on
                 --- Prehistoric Earth.
                 --- Douglas Adams, The Hitchhikers Guide to the Galaxy

From pragma at wxs.nl  Wed Oct  3 15:28:23 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 03 Oct 2007 15:28:23 +0200
Subject: [dev-context] integrating context mkiv, luatex, and fmtutil,
 mktexlsr, etc
In-Reply-To: <20071003131856.GE3597@gamma.logic.tuwien.ac.at>
References: <20071002135500.GH32335@gamma.logic.tuwien.ac.at>
	<47025A4D.6070404@wxs.nl>
	<20071003111513.GA31958@gamma.logic.tuwien.ac.at>
	<47037B3C.5030002@wxs.nl>
	<20071003074824.GW9324@gamma.logic.tuwien.ac.at>
	<47037739.208@wxs.nl>
	<20071003111038.GB29863@gamma.logic.tuwien.ac.at>
	<47037AF1.4020104@wxs.nl>
	<20071003122106.GA3597@gamma.logic.tuwien.ac.at>
	<470393E3.1010803@wxs.nl>
	<20071003131856.GE3597@gamma.logic.tuwien.ac.at>
Message-ID: <470398F7.6090900@wxs.nl>

Norbert Preining wrote:

> Are these megabytes kept and are they useful for later runs? If yes,
> then it is ok to put them in a separate cache (I assume the stuff is
> useful, it is the font stuff).

not sure yet, maybe later; but there is a cache cleaner (i may even 
thrash by date and usage)

> Hmm, but if the caches would be in TEXMFTREE/lcache/ then the only thing
> necessary would be a change of
> 	TEXMFCNF
> referencing other trees.
> 
> (Sorry, only trying to understand the details ...)

sure, all depends on what the cache var is set too (too many variants so 
i play safe and hash (but i can make that piece configurable if needed)

the beta is on the website and on the ftp

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Wed Oct  3 19:19:56 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 3 Oct 2007 19:19:56 +0200
Subject: [dev-context] xml secrets
Message-ID: <6faad9f00710031019h3231e87dl85e18dfe5b00d514@mail.gmail.com>

Hello Hans,

Here's an almost minimal example to reproduce the problems with
trailing spaces in XML files.

Mojca
-------------- next part --------------
A non-text attachment was scrubbed...
Name: secret.tex
Type: application/x-tex
Size: 334 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20071003/f451761e/attachment.tex 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.ntg.nl/mailman/private/dev-context/attachments/20071003/f451761e/attachment.html 

From preining at logic.at  Thu Oct  4 10:44:24 2007
From: preining at logic.at (Norbert Preining)
Date: Thu, 4 Oct 2007 10:44:24 +0200
Subject: [dev-context] compiling luatexref-t.tex
Message-ID: <20071004084424.GH2593@gamma.logic.tuwien.ac.at>

Hi all!

I am trying to compile luatexref-t.tex from svn source but:

$ texexec luatexref-t.tex
...
(mpgraph.mp
! Number is too large (10000).
l.4 _special_div_ := 10000
                          ;


I have
luatex 0.11.2
context 2007.09.28
metapost 1.00

Any idea where this is coming from?


Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
AINDERBY QUERNHOW (n.)
One who continually bemoans the 'loss' of the word 'gay' to the
English language, even though they had never used the word in any
context at all until they started complaining that they couldn't use
it any more.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Thu Oct  4 12:41:07 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 04 Oct 2007 12:41:07 +0200
Subject: [dev-context] [Dev-luatex] compiling luatexref-t.tex
In-Reply-To: <20071004084424.GH2593@gamma.logic.tuwien.ac.at>
References: <20071004084424.GH2593@gamma.logic.tuwien.ac.at>
Message-ID: <4704C343.1050408@elvenkind.com>

Norbert Preining wrote:
> Hi all!
> 
> I am trying to compile luatexref-t.tex from svn source but:
> 
> $ texexec luatexref-t.tex
> ...
> (mpgraph.mp
> ! Number is too large (10000).
> l.4 _special_div_ := 10000
>                           ;
> 
> 
> I have
> luatex 0.11.2
> context 2007.09.28
> metapost 1.00
> 
> Any idea where this is coming from?

 From metapost (but that is obvious). I suspect you are running an
older version of metafun.mem, but I do not quite understand why,
it should have been re-generated when you upgraded your context.



From mojca.miklavec.lists at gmail.com  Thu Oct  4 12:44:37 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 4 Oct 2007 12:44:37 +0200
Subject: [dev-context] [Dev-luatex] compiling luatexref-t.tex
In-Reply-To: <4704C343.1050408@elvenkind.com>
References: <20071004084424.GH2593@gamma.logic.tuwien.ac.at>
	<4704C343.1050408@elvenkind.com>
Message-ID: <6faad9f00710040344o744e50bfpc2648d2744a8d7d9@mail.gmail.com>

On 10/4/07, Taco Hoekwater wrote:
> Norbert Preining wrote:
> > Hi all!
> >
> > I am trying to compile luatexref-t.tex from svn source but:
> >
> > $ texexec luatexref-t.tex
> > ...
> > (mpgraph.mp
> > ! Number is too large (10000).
> > l.4 _special_div_ := 10000
> >                           ;
> >
> >
> > I have
> > luatex 0.11.2
> > context 2007.09.28
> > metapost 1.00
> >
> > Any idea where this is coming from?
>
>  From metapost (but that is obvious). I suspect you are running an
> older version of metafun.mem, but I do not quite understand why,
> it should have been re-generated when you upgraded your context.

Unless metapost is upgraded after ConTeXt :)

Mojca

From preining at logic.at  Thu Oct  4 12:48:20 2007
From: preining at logic.at (Norbert Preining)
Date: Thu, 4 Oct 2007 12:48:20 +0200
Subject: [dev-context] [Dev-luatex] compiling luatexref-t.tex
In-Reply-To: <4704C343.1050408@elvenkind.com>
References: <20071004084424.GH2593@gamma.logic.tuwien.ac.at>
	<4704C343.1050408@elvenkind.com>
Message-ID: <20071004104820.GO2593@gamma.logic.tuwien.ac.at>

Hi Taco!

On Do, 04 Okt 2007, Taco Hoekwater wrote:
> >luatex 0.11.2
> >context 2007.09.28
> >metapost 1.00
> >
> >Any idea where this is coming from?
> 
> From metapost (but that is obvious). I suspect you are running an
> older version of metafun.mem, but I do not quite understand why,
> it should have been re-generated when you upgraded your context.

Strange. I updated metafun.mem ...

$ metafun --version
MetaPost 1.000 (Web2C 7.5.6)
...
$ metafun
...
**\relax

*bye.
$ 

So this could not be the problem???

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
`...You hadn't exactly gone out of your way to call
attention to them had you? I mean like actually telling
anyone or anything.'
`But the plans were on display...'
`On display? I eventually had to go down to the cellar to
find them.'
`That's the display department.'
`With a torch.'
`Ah, well the lights had probably gone.'
`So had the stairs.'
`But look you found the notice didn't you?'
yes I did. It was on display in the
bottom of a locked filing cabinet stuck in a disused
lavatory with a sign on the door saying "Beware of The
Leopard".'
                 --- Arthur singing the praises of the local council planning
                 --- department.
                 --- Douglas Adams, The Hitchhikers Guide to the Galaxy

From taco at elvenkind.com  Thu Oct  4 12:52:51 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 04 Oct 2007 12:52:51 +0200
Subject: [dev-context] [Dev-luatex] compiling luatexref-t.tex
In-Reply-To: <20071004104820.GO2593@gamma.logic.tuwien.ac.at>
References: <20071004084424.GH2593@gamma.logic.tuwien.ac.at>
	<4704C343.1050408@elvenkind.com>
	<20071004104820.GO2593@gamma.logic.tuwien.ac.at>
Message-ID: <4704C603.4030502@elvenkind.com>

Norbert Preining wrote:
> Hi Taco!
> 
> On Do, 04 Okt 2007, Taco Hoekwater wrote:
>>> luatex 0.11.2
>>> context 2007.09.28
>>> metapost 1.00
>>>
>>> Any idea where this is coming from?
>> From metapost (but that is obvious). I suspect you are running an
>> older version of metafun.mem, but I do not quite understand why,
>> it should have been re-generated when you upgraded your context.
> 
> Strange. I updated metafun.mem ...
> 
> $ metafun --version
> MetaPost 1.000 (Web2C 7.5.6)
> ...
> $ metafun
> ...
> **\relax
> 
> *bye.
> $ 
> 
> So this could not be the problem???

Odd indeed. The actual error is triggered by the 'warning checks'
in metapost, and there is an explicit

	warningcheck := 0 ;

in mp-tool.mp to suppress them (line 62).


From mojca.miklavec.lists at gmail.com  Wed Oct 17 12:05:16 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 17 Oct 2007 12:05:16 +0200
Subject: [dev-context] kpathsea and XeTeX
Message-ID: <6faad9f00710170305h436ba26cr24a61ab22fecd7af@mail.gmail.com>

Hello Hans,

I've been experiencing weird problems with 2007.09.28 on gwTeX. The
macros which work fine with the standalone distribution, behave really
weird under gwTeX. The resulting PDF document is still OK (the problem
is *really* slow processing time), but I don't understand where the
different behaviour is comming from (both version of ConTeXt are the
same, both version of XeTeX are the same).

I need to test more extensively (in next days), but I need at least a
few hints about what could go wrong here.

Also, ctxtools --contextversion works on gwTeX, but fails to work on
the standalone version (in "minimals").

Mojca


/usr/local/gwTeX/texmf.pkgs/tex/context/base/sort-lan.mkii)) (./kreslin.tuo)
(./kreslin.tuo)
systems         : begin file kreslin at line 21

Underfull \hbox (badness 10000) in paragraph at lines 57--57


Underfull \hbox (badness 10000) in paragraph at lines 57--59

fonts           : resetting map file list
fonts           : using map file: original-base
fonts           : using map file: texnansi-base
fonts           : using map file: ec-base
fonts           : using map file: qx-base
fonts           : using map file: t5-base
fonts           : using map file: 8r-base
fonts           : using map file: original-ams-base
fonts           : using map file: original-ams-euler
fonts           : using map file: original-public-lm
fonts           : using map file: original-youngryu-px
[1.1]kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Appending font creation commands to missfont.log.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bold:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bold:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bold:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bold:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bold:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bold:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;+smcp;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;+smcp;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;+smcp;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;+smcp;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;+smcp;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;+smcp;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bold:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bold:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bold:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bold:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bold:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bold:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;+smcp;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;+smcp;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;+smcp;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;+smcp;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;+smcp;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;+smcp;':
contains ':'

Underfull \hbox (badness 10000) in paragraph at lines 60--60


Underfull \hbox (badness 10000) in paragraph at lines 60--62

[2.2]kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
kpathsea: Illegal fontname
`texgyrepagella-bold:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bold:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-italic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-bolditalic:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;+smcp;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;+smcp;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'
kpathsea: Illegal fontname
`texgyrepagella-regular:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;':
contains ':'

From taco at elvenkind.com  Wed Oct 17 13:59:05 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 17 Oct 2007 13:59:05 +0200
Subject: [dev-context] kpathsea and XeTeX
In-Reply-To: <6faad9f00710170305h436ba26cr24a61ab22fecd7af@mail.gmail.com>
References: <6faad9f00710170305h436ba26cr24a61ab22fecd7af@mail.gmail.com>
Message-ID: <4715F909.1060403@elvenkind.com>



Mojca Miklavec wrote:
> Hello Hans,
> 
> I've been experiencing weird problems with 2007.09.28 on gwTeX. The
> macros which work fine with the standalone distribution, behave really
> weird under gwTeX. The resulting PDF document is still OK (the problem
> is *really* slow processing time), but I don't understand where the
> different behaviour is comming from (both version of ConTeXt are the
> same, both version of XeTeX are the same).
> 
> I need to test more extensively (in next days), but I need at least a
> few hints about what could go wrong here.
> 
> Also, ctxtools --contextversion works on gwTeX, but fails to work on
> the standalone version (in "minimals").

you should check the value of the "mktextfm" feature. It seems to be
on in gwTeX.

Best wishes,
Taco

From mojca.miklavec.lists at gmail.com  Thu Oct 18 17:46:48 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 18 Oct 2007 17:46:48 +0200
Subject: [dev-context] kpathsea and XeTeX
In-Reply-To: <47160A5F.3060902@wxs.nl>
References: <6faad9f00710170305h436ba26cr24a61ab22fecd7af@mail.gmail.com>
	<47160A5F.3060902@wxs.nl>
Message-ID: <6faad9f00710180846g3313f1cbj5baffa3b415da903@mail.gmail.com>

Taco:
> you should check the value of the "mktextfm" feature. It seems to be
> on in gwTeX.

Thanks a lot for the pointer. That was an enormous speedup :) But that
should probably not be the ultimate solution?

Hans:
> - check if the file databases are there (ls-r)

Yes.

> - maybe xetex has troubles finding the fonts (system fonts?)

No, it doesn't seem so.

> - maybe try to enable KPSE_DEBUG (or so) and see what lookups take place

Where can I set that flag when compiling a ConTeXt file?

> This is probably unrelated to context but more to some setup problem.
> Keep in mind that minimals run faster anyway (upto a few seconds)

The problem is not related to the overall speed. Now I remember that
Jonathan has warned me that kpathsea will try to generate a font if
it's not found. That doesn't happen on standalone, but it does on
"standard TeXLive".

The first half of the problem has been solved by prepending file: to a
bunch of definitions:

\starttypescript [serif] [palatino,pagella]
  \definefontsynonym [Palatino]
[file:texgyrepagella-regular]    [features=default]
  \definefontsynonym [Palatino-Italic]
[file:texgyrepagella-italic]     [features=default]
  \definefontsynonym [Palatino-Bold]        [file:texgyrepagella-bold]
      [features=default]
  \definefontsynonym [Palatino-BoldItalic]
[file:texgyrepagella-bolditalic] [features=default]
  \definefontsynonym [Palatino-Caps]
[file:texgyrepagella-regular]    [features=smallcaps]
  \definefontsynonym [Palatino-Slanted]     [Palatino-Italic]
  \definefontsynonym [Palatino-BoldSlanted] [Palatino-BoldItalic]
\stoptypescript

and the second one (without that setting int exmf.cnf) still remains:
ConTeXt constantly complains about missing lmtypewriter10-regular
(several times per ConTeXt run - which is really annoying and slowing
it down quite a bit):

kpathsea: Running mktextfm lmtypewriter10-regular
mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
nonstopmode; input lmtypewriter10-regular
This is METAFONT, Version 2.71828 (Web2C 7.5.6)

kpathsea: Running mktexmf lmtypewriter10-regular
! I can't find file `lmtypewriter10-regular'.
<*> ...; nonstopmode; input lmtypewriter10-regular

Please type another input file name
! Emergency stop.
<*> ...; nonstopmode; input lmtypewriter10-regular

Transcript written on mfput.log.
grep: lmtypewriter10-regular.log: No such file or directory
mktextfm: `mf-nowin -progname=mf \mode:=ljfour; mag:=1; nonstopmode;
input lmtypewriter10-regular' failed to make
lmtypewriter10-regular.tfm.
fonts           : fails 1b: "lmtypewriter10-regular" (nullfont)
fonts           : succeeds 1c: "[lmtypewriter10-regular]" ("[lmtypewriter10-reg
ular]" at 12.0pt)


I'm sending a small patch which solves the first half of the problem,
but please check it before applying (diff) to make sure that I had the
latest version. It would be nice to solve that with lmtypewriter, but
I still remember all the problems from one month ago, so I'm clueless
...

Mojca
-------------- next part --------------
A non-text attachment was scrubbed...
Name: type-otf.tex
Type: application/x-tex
Size: 44876 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20071018/74bdc97b/attachment-0001.tex 

From taco at elvenkind.com  Fri Oct 19 08:58:06 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 19 Oct 2007 08:58:06 +0200
Subject: [dev-context] kpathsea and XeTeX
In-Reply-To: <6faad9f00710180846g3313f1cbj5baffa3b415da903@mail.gmail.com>
References: <6faad9f00710170305h436ba26cr24a61ab22fecd7af@mail.gmail.com>	<47160A5F.3060902@wxs.nl>
	<6faad9f00710180846g3313f1cbj5baffa3b415da903@mail.gmail.com>
Message-ID: <4718557E.7050805@elvenkind.com>

Mojca Miklavec wrote:
> Taco:
>> you should check the value of the "mktextfm" feature. It seems to be
>> on in gwTeX.
> 
> Thanks a lot for the pointer. That was an enormous speedup :) But that
> should probably not be the ultimate solution?

There is no other way to get rid of them. It is impossible to
control the execution of those scripts (mktextfm, mktexmf, mktexfmt,
mktexpk) from C code without patching kpathsea.

I believe all of those scripts should be off on a modern installation.
> 
> and the second one (without that setting int exmf.cnf) still remains:
> ConTeXt constantly complains about missing lmtypewriter10-regular
> (several times per ConTeXt run - which is really annoying and slowing
> it down quite a bit):
> 
> kpathsea: Running mktextfm lmtypewriter10-regular
> mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
> nonstopmode; input lmtypewriter10-regular
> This is METAFONT, Version 2.71828 (Web2C 7.5.6)

Was the metapost font not changed to ec-lmtt10 ? I thought we had
agreed on that (the above message is from metapost, running metafont
through mktextfm).

Best wishes,
Taco




From mojca.miklavec.lists at gmail.com  Fri Oct 19 10:18:56 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 19 Oct 2007 10:18:56 +0200
Subject: [dev-context] kpathsea and XeTeX
In-Reply-To: <4718557E.7050805@elvenkind.com>
References: <6faad9f00710170305h436ba26cr24a61ab22fecd7af@mail.gmail.com>
	<47160A5F.3060902@wxs.nl>
	<6faad9f00710180846g3313f1cbj5baffa3b415da903@mail.gmail.com>
	<4718557E.7050805@elvenkind.com>
Message-ID: <6faad9f00710190118t7df36c76pb89440ceb2690a48@mail.gmail.com>

On 10/19/07, Taco Hoekwater wrote:
> Mojca Miklavec wrote:
> > Taco:
> >> you should check the value of the "mktextfm" feature. It seems to be
> >> on in gwTeX.
> >
> > Thanks a lot for the pointer. That was an enormous speedup :) But that
> > should probably not be the ultimate solution?
>
> There is no other way to get rid of them. It is impossible to
> control the execution of those scripts (mktextfm, mktexmf, mktexfmt,
> mktexpk) from C code without patching kpathsea.

Do you mean that kpathsea should support something like "please tell
me if that font is available, but do not try to run mktex... even if
that one is on by default"?

In any case, I've set that option to zero and my system is slightly
broken for some unknown reason today, but I will get over it somehow
:)

> I believe all of those scripts should be off on a modern installation.

I would agree, but as long as there are metafont fonts residing on a
system and people are using them ...
If I use \usepackage[T1]{fontenc}, I still get bitmap fonts. *That*
one should be changed. Rendering of such documents on Mac's screen is
almost unreadable.

(I even get bitmap integers inside math with ConTeXt, but I didn't
manage to figure out yet whose fault that is.)

How is it possible that MikTeX has managed to solve that issue, but
TeX Live not? (Or perhaps I should check it once more on some windows
machine.)

> > and the second one (without that setting int exmf.cnf) still remains:
> > ConTeXt constantly complains about missing lmtypewriter10-regular
> > (several times per ConTeXt run - which is really annoying and slowing
> > it down quite a bit):
> >
> > kpathsea: Running mktextfm lmtypewriter10-regular
> > mktextfm: Running mf-nowin -progname=mf \mode:=ljfour; mag:=1;
> > nonstopmode; input lmtypewriter10-regular
> > This is METAFONT, Version 2.71828 (Web2C 7.5.6)
>
> Was the metapost font not changed to ec-lmtt10 ? I thought we had
> agreed on that (the above message is from metapost, running metafont
> through mktextfm).

Hans first changed it when I "compalined" that XeTeX should not load
ec-whatever and texnansi-whatever map files any more. It then turned
out that metapost still needs them, so it would still be necessary to
add an additional font (texnansi-lmtt10, I guess - probably because
it's "almost-ascii-compatible"), but I don't know if that happened.

I wanted to test now, but apparently I just broke something (no idea
what), so I need to start from scratch (delete everything, install
texlive again in the worst case). I updated xdvipdfmx, but even
reverting to the old version doesn't help any more. (But that is my
own problem of course.)

Mojca

fonts           : resetting map file list
fonts           : using map file: original-base
fonts           : using map file: texnansi-base
fonts           : using map file: ec-base
fonts           : using map file: qx-base
fonts           : using map file: t5-base
fonts           : using map file: 8r-base
fonts           : using map file: original-ams-base
fonts           : using map file: original-ams-euler
fonts           : using map file: original-public-lm
[1.1]
systems         : end file a at line 12
system          : cont-err loaded
(/usr/local/gwTeX/texmf.pkgs/tex/context/base/cont-err.tex
systems         : no file 'cont-sys.tex', using 'cont-sys.rme' instead
) )
(see the transcript file for additional information)
stdin -> a.pdf
[1
** WARNING ** Couldn't open font map file "original-base.map".
** WARNING ** Interpreting special command mapfile (pdf:) failed.
** WARNING ** >> at page="1" position="(1.09453e-05, -1.5411e-05)" (in PDF)
** WARNING ** >> xxx "pdf:mapfile +original-base.map"
** WARNING ** Couldn't open font map file "texnansi-base.map".
** WARNING ** Interpreting special command mapfile (pdf:) failed.
** WARNING ** >> at page="1" position="(1.09453e-05, -1.5411e-05)" (in PDF)
** WARNING ** >> xxx "pdf:mapfile +texnansi-base.map"
** WARNING ** Couldn't open font map file "ec-base.map".
** WARNING ** Interpreting special command mapfile (pdf:) failed.
** WARNING ** >> at page="1" position="(1.09453e-05, -1.5411e-05)" (in PDF)
** WARNING ** >> xxx "pdf:mapfile +ec-base.map"
** WARNING ** Couldn't open font map file "qx-base.map".
** WARNING ** Interpreting special command mapfile (pdf:) failed.
** WARNING ** >> at page="1" position="(1.09453e-05, -1.5411e-05)" (in PDF)
** WARNING ** >> xxx "pdf:mapfile +qx-base.map"

From mojca.miklavec.lists at gmail.com  Fri Oct 19 11:35:56 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 19 Oct 2007 11:35:56 +0200
Subject: [dev-context] Fwd: [MiKTeX] ConTeXt problem with latest MiKTeX 2.7
	Beta3 update
In-Reply-To: <200710191647417188757@126.com>
References: <200710191623487187083@126.com>
	<6faad9f00710190136x4fec9990r19734792cd4b2f3b@mail.gmail.com>
	<200710191647417188757@126.com>
Message-ID: <6faad9f00710190235i2d51533i7e7909569d7f745b@mail.gmail.com>

Hello,

I'm forwarding this problem report from the MikTeX mailing list. I
cannot switch to windows right now to test anything, but there are
some "kind-of-general" problems with map files mentioned below in the
log.

The following map files are apparently missing on MikTeX (I would say:
for obvous reasons - they're included in the standalone distribution,
but not in cont-tmf on CTAN, which is where MikTeX takes its files
from):

ec-urw-times.map
ec-urw-helvetica.map
ec-urw-courier.map

and the log file also mentions "cjk.map", but I have no idea where
that one comes from.

I'm not sure if that is the only problem, but it might be connected
with broken PDFs

Instanton, do you have any idea where that cjk.map comes from (or
should come from)?
Why do you have some files under
    C:\MiCTeX\MiKTeX 2.7\tex\context\base
and some under
    C:\Documents and Settings\All Users\Application
Data\MiKTeX\2.7\tex\context\base
?

Mojca
.

> On 10/19/07, Instanton wrote:
> > Hi group,
> >
> > After the latest update, MiKTeX 2.7 Beta3 went crazy with ConTeXt files. Whenever a ConTeXt file is processed, it produces a corrupted PDF file not readable by any PDF reader I know of. Even worse, after processing the ConTeXt file, latex, pdflatex etc will no longer work with any existing file, unless an "initexmf -u" command is executed once.  Otherwise latex, pdflatex always say "assertion failed". Has anyone noticed the same problem?


On 10/19/07, Instanton <soft_share at 126.com> wrote:
> Here is a log file just created with "texexec -pdf pre16.tex" :
>
> %% -------- begin log file -------------------------
>
> This is pdfTeX, Version 3.141592-1.40.4 (MiKTeX 2.7 Beta 3) (preloaded format=cont-en 2007.10.18)  19 OCT 2007 16:44
> entering extended mode
> **pre16.tex \emergencyend
> (pre16.tex
>
> ConTeXt  ver: 2007.09.28 16:52 MKII  fmt: 2007.10.18  int: english/english
>
> language        : language en is active
> system          : cont-new loaded
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\cont-new.tex"
> systems         : beware: some patches loaded from cont-new.tex
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\cont-new.mkii") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\cont-mtx.tex"))
> system          : cont-old loaded
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\cont-old.tex"
> loading         : Context Old Macros
> )
> system          : cont-fil loaded
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\cont-fil.tex"
> loading         : Context File Synonyms
> )
> system          : cont-sys loaded
> ("C:\Documents and Settings\All Users\Application Data\MiKTeX\2.7\tex\context\base\cont-sys.tex" ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-tmf.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-siz.tex")
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-one.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-akb.tex"))
> bodyfont        : 12pt rm is loaded
> language        : patterns en->ec:ec->1->2:3 uk->ec:ec->2->2:3 de->texnansi:texnansi->3->2:3 de->ec:ec->4->2:3 fr->texnansi:texnansi->5->2:3 fr->ec:ec->6->2:3 es->ec:ec->7->2:3 pt->texnansi:texnansi->8->2:3 pt->ec:ec->9->2:3 it->texnansi:texnansi->10->2:3
>  it->ec:ec->11->2:3 nl->texnansi:texnansi->12->2:3 nl->ec:ec->13->2:3 cz->il2:il2->14->2:3 cz->ec:ec->15->2:3 sk->il2:il2->16->2:3 sk->ec:ec->17->2:3 pl->pl0:pl0->18->2:3 pl->ec:ec->19->2:3 pl->qx:qx->20->2:3 loaded
> specials        : tex,postscript,rokicki loaded
> system          : pre16.top loaded
> (D:\ConTeXt\pre16.top
> specials        : loading definition file tpd
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\spec-tpd.tex"
> specials        : loading definition file fdf
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\spec-fdf.tex" ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\spec-fdf.mkii"))
> specials        : fdf loaded
> )
> specials        : fdf,tpd loaded
> )
> systems         : system commands are disabled
> system          : module chinese loaded
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\s-chi-00.tex" ("C:\Documents and Settings\All Users\Application Data\MiKTeX\2.7\tex\context\base\font-chi.tex"
> loading         : Context Font Macros / Chinese
> encoding        : coding chi is loaded
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\enco-chi.tex")

Hmmm ...

> regime          : unknown regime unicode

> ))
> system          : module s-pre-16 loaded
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\s-pre-16.tex" ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-pre.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-tmf.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-siz.tex")
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-one.tex" ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-tmf.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-siz.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-one.tex")
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-akb.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-tmf.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-siz.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-one.tex")
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-akb.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-tmf.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-siz.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-one.tex")
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-akb.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-tmf.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-siz.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-one.tex")
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-akb.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-tmf.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-siz.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-one.tex")
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-akb.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-tmf.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-siz.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-one.tex")
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-akb.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-tmf.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-siz.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-one.tex")
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-akb.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-tmf.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-siz.tex") ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-one.tex")
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\type-akb.tex"))
> color           : mpcmyk color space is supported
> color           : mpspot color space is supported
> color           : system rgb is global activated
> interaction     : active
> system          : mark Topic defined [chapter]
> system          : mark Topicnumber defined [chapternumber]
> system          : mark Nopic defined [title]
> system          : mark Nopicnumber defined [titlenumber]
> ) (D:\ConTeXt\pre16.tuo) (D:\ConTeXt\pre16.tuo) (D:\ConTeXt\pre16.tuo) (D:\ConTeXt\pre16.tuo) (D:\ConTeXt\pre16.tuo) (D:\ConTeXt\pre16.tuo) (D:\ConTeXt\pre16.tuo) (D:\ConTeXt\pre16.tuo) (D:\ConTeXt\pre16.tuo) (D:\ConTeXt\pre16.tuo)
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\sort-lan.tex"
> loading         : Context Sorting Macros (languages)
> ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\sort-lan.mkii")) (D:\ConTeXt\pre16.tuo) (D:\ConTeXt\pre16.tuo) ("C:\MiCTeX\MiKTeX 2.7\tex\context\base\pdfr-def.tex")
> systems         : begin file pre16 at line 10
> fonts           : using map file: original-base
> {C:/Documents and Settings/All Users/Application Data/MiKTeX/2.7/pdftex/config/pdftex.map}{C:/MiCTeX/MiKTeX 2.7/fonts/map/pdftex/context/original-base.map}
> fonts           : using map file: original-ams-base
> {C:/MiCTeX/MiKTeX 2.7/fonts/map/pdftex/context/original-ams-base.map}
> fonts           : using map file: original-public-lm
> {C:/MiCTeX/MiKTeX 2.7/fonts/map/pdftex/context/original-public-lm.map}
> fonts           : using map file: lm-ec
> {C:/MiCTeX/MiKTeX 2.7/fonts/map/dvips/lm/lm-ec.map}
> fonts           : using map file: lm-math
> {C:/MiCTeX/MiKTeX 2.7/fonts/map/dvips/lm/lm-math.map}
> fonts           : using map file: lm-rm
> {C:/MiCTeX/MiKTeX 2.7/fonts/map/dvips/lm/lm-rm.map}
> fonts           : using map file: 8r-base
> {C:/MiCTeX/MiKTeX 2.7/fonts/map/pdftex/context/8r-base.map}
> fonts           : using map file: ec-base
> {C:/MiCTeX/MiKTeX 2.7/fonts/map/pdftex/context/ec-base.map}
> fonts           : using map file: t5-base
> {C:/MiCTeX/MiKTeX 2.7/fonts/map/pdftex/context/t5-base.map}
> fonts           : using map file: original-ams-euler
> {C:/MiCTeX/MiKTeX 2.7/fonts/map/pdftex/context/original-ams-euler.map}
> fonts           : using map file: cjk
>
>
> pdfTeX warning:  (file cjk.map): cannot open font map file

I don't have that map file on my computer either. Where does or should
cjk.map come from?

> fonts           : using map file: ec-urw-times
>
> pdfTeX warning:  (file ec-urw-times.map): cannot open font map file
> fonts           : using map file: ec-urw-helvetica
>
> pdfTeX warning:  (file ec-urw-helvetica.map): cannot open font map file
> fonts           : using map file: ec-urw-courier
>
> pdfTeX warning:  (file ec-urw-courier.map): cannot open font map file
> fonts           : using map file: original-youngryu-tx

Those map files are under some rather specific zip (they're included
in standalone distribution, but are not part of cont-tmf.zip). They're
also included in TeX Live, but I don't have them under my MikTeX
either.

But apparently I haven't noticed that problem so far since I didn't
need those fonts under MikTeX.

Hans?

> {C:/MiCTeX/MiKTeX 2.7/fonts/map/pdftex/context/original-youngryu-tx.map} [MP to PDF] (D:\ConTeXt\pre16-mpgraph.4000 (D:\ConTeXt\pre16.tuo))
> interaction     : aspect ratio 600.0 x 450.0 (b x h)
> interaction     : pdftex code inserted
> [1.1]
> Nopic           : - ????
> (D:\ConTeXt\pre16.tuo)
> columns         : balanced in 8 step(s)
> [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3999) [2.1]
> Topic           : - ???1$\sim $10?
> [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3998) [3.2] [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3997) [4.3] [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3996) [5.4] [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3995) [6.5]
> Topic           : - ???11$\sim $20?
> [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3994) [7.6] [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3993) [8.7] [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3992) [9.8] [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3991) [10.9] [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3990) [11.10]
> Topic           : - ???21$\sim $30?
> [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3989) [12.11] [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3988) [13.12] [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3987) [14.13] [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3986) [15.14] [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3985)
> [16.15]
> Topic           : - ???31$\sim $40?
> [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3984) [17.16] [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3983) [18.17] [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3982) [19.18] [MP to PDF] (D:\ConTeXt\pre16-mpgraph.3981) [20.19
>
> %% --------------- end of log file -----------------------------
>
> the direct screen output is almost the same, but with "assertion failed" appearing inthe end.
>
>
> Instanton

From taco at elvenkind.com  Fri Oct 19 13:41:42 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 19 Oct 2007 13:41:42 +0200
Subject: [dev-context] kpathsea and XeTeX
In-Reply-To: <6faad9f00710190118t7df36c76pb89440ceb2690a48@mail.gmail.com>
References: <6faad9f00710170305h436ba26cr24a61ab22fecd7af@mail.gmail.com>	
	<47160A5F.3060902@wxs.nl>	
	<6faad9f00710180846g3313f1cbj5baffa3b415da903@mail.gmail.com>	
	<4718557E.7050805@elvenkind.com>
	<6faad9f00710190118t7df36c76pb89440ceb2690a48@mail.gmail.com>
Message-ID: <471897F6.8060606@elvenkind.com>

Mojca Miklavec wrote:
> On 10/19/07, Taco Hoekwater wrote:
>> Mojca Miklavec wrote:
>>> Taco:
>>>> you should check the value of the "mktextfm" feature. It seems to be
>>>> on in gwTeX.
>>> Thanks a lot for the pointer. That was an enormous speedup :) But that
>>> should probably not be the ultimate solution?
>> There is no other way to get rid of them. It is impossible to
>> control the execution of those scripts (mktextfm, mktexmf, mktexfmt,
>> mktexpk) from C code without patching kpathsea.
> 
> Do you mean that kpathsea should support something like "please tell
> me if that font is available, but do not try to run mktex... even if
> that one is on by default"?

Something like that, yes.

> In any case, I've set that option to zero and my system is slightly
> broken for some unknown reason today, but I will get over it somehow
> :)
> 
>> I believe all of those scripts should be off on a modern installation.
> 
> I would agree, but as long as there are metafont fonts residing on a
> system and people are using them ...
> If I use \usepackage[T1]{fontenc}, I still get bitmap fonts. *That*
> one should be changed. Rendering of such documents on Mac's screen is
> almost unreadable.

The one follows from the other.  mktextfm only makes sense in an
environment that uses bitmap fonts.

> (I even get bitmap integers inside math with ConTeXt, but I didn't
> manage to figure out yet whose fault that is.)
> 
> How is it possible that MikTeX has managed to solve that issue, but
> TeX Live not? (Or perhaps I should check it once more on some windows
> machine.)

You are not really using "texlive2007". Your installation is "gwTeX,
based on texlive". I suspect there may be a difference in setup
settings.

> Hans first changed it when I "compalined" that XeTeX should not load
> ec-whatever and texnansi-whatever map files any more. It then turned
> out that metapost still needs them, so it would still be necessary to
> add an additional font (texnansi-lmtt10, I guess - probably because
> it's "almost-ascii-compatible"), but I don't know if that happened.

Apparently not.

Best wishes,
Taco

From taco at elvenkind.com  Fri Oct 19 14:15:20 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 19 Oct 2007 14:15:20 +0200
Subject: [dev-context] Fwd: [MiKTeX] ConTeXt problem with latest MiKTeX
 2.7	Beta3 update
In-Reply-To: <6faad9f00710190235i2d51533i7e7909569d7f745b@mail.gmail.com>
References: <200710191623487187083@126.com>	<6faad9f00710190136x4fec9990r19734792cd4b2f3b@mail.gmail.com>	<200710191647417188757@126.com>
	<6faad9f00710190235i2d51533i7e7909569d7f745b@mail.gmail.com>
Message-ID: <47189FD8.7090206@elvenkind.com>



Mojca Miklavec wrote:
> Hello,
> 
> I'm forwarding this problem report from the MikTeX mailing list. I
> cannot switch to windows right now to test anything, but there are
> some "kind-of-general" problems with map files mentioned below in the
> log.

It would help to know the exact failed assertion report.

Best wishes,
Taco

From preining at logic.at  Mon Oct 22 10:00:56 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 22 Oct 2007 10:00:56 +0200
Subject: [dev-context] Bug#447559: chemtex is broken again
In-Reply-To: <20071022071154.32271.5099.reportbug@localhost>
References: <20071022071154.32271.5099.reportbug@localhost>
Message-ID: <20071022080056.GL28495@gamma.logic.tuwien.ac.at>

forwarded 447559 dev-context at ntg.nl
thanks

Hi Hans, hi all!

We got the following bug report for the Debian package, but I guess that
should be fixed upstream:

On Mo, 22 Okt 2007, Soeren Sonnenburg wrote:
> This time a fix is to add
> \input syst-gen.tex
> 
> to the beginning of
> 
> /usr/share/texmf/tex/context/base/ppchtex.tex
> 
> otherwise
> 
> all compiles fail with:
> 
> (/usr/share/texmf/tex/context/base/ppchtex.tex
> loading        : Context Chemical Macro's / 1996.3.1
> ppchtex        : using PiCTeX
> ! Missing { inserted.
> <to be read again> 
>                    \def 
> l.661 \unexpanded\def
>                      \complexstartchemical[#1]%
> 
> -- no debconf information

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
KITMURVY (n.)
Man who owns all the latest sporting gadgetry and clothing (gold
trolley, tee cosies, ventilated shoes, Gary Player- autographed
tracksuit top, American navy cap, mirror sunglasses) but is still only
on his second gold lesson.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Mon Oct 22 16:18:05 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 22 Oct 2007 16:18:05 +0200
Subject: [dev-context] Bug#447559: chemtex is broken again
In-Reply-To: <20071022080056.GL28495@gamma.logic.tuwien.ac.at>
References: <20071022071154.32271.5099.reportbug@localhost>
	<20071022080056.GL28495@gamma.logic.tuwien.ac.at>
Message-ID: <471CB11D.7080605@wxs.nl>

Norbert Preining wrote:
> forwarded 447559 dev-context at ntg.nl
> thanks
> 
> Hi Hans, hi all!
> 
> We got the following bug report for the Debian package, but I guess that
> should be fixed upstream:

for latex, ppchtex is loaded via ppchtex.noc which says ...

\let\normalunexpanded\unexpanded

\input supp-mis.tex  \let\writestatus\undefined
\input syst-gen.tex
\input syst-fnt.tex

\let\unexpanded\normalunexpanded

(\unexpanded is an etex primitive but context had an \unexpanded before 
etex came around; same for \protected as primitive; so here we push and 
pop the meanings)

so, i wonder if this user loads ppchtex in the right way

(maybe i should make a derived version for latex usage - given that 
there are users - in which case i can also cleanup and optimize the 
context variant, but it has low priotity)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From bugreports at nn7.de  Tue Oct 23 07:56:19 2007
From: bugreports at nn7.de (Soeren Sonnenburg)
Date: Tue, 23 Oct 2007 07:56:19 +0200
Subject: [dev-context] Bug#447559: chemtex is broken again
In-Reply-To: <471CB11D.7080605@wxs.nl>
References: <20071022071154.32271.5099.reportbug@localhost>
	<20071022080056.GL28495@gamma.logic.tuwien.ac.at>
	<471CB11D.7080605@wxs.nl>
Message-ID: <1193118979.4384.6.camel@localhost>

Good mornging Hans,

On Mon, 2007-10-22 at 16:18 +0200, Hans Hagen wrote:
> Norbert Preining wrote:
> > forwarded 447559 dev-context at ntg.nl
> > thanks
> > 
> > Hi Hans, hi all!
> > 
> > We got the following bug report for the Debian package, but I guess that
> > should be fixed upstream:
> 
> for latex, ppchtex is loaded via ppchtex.noc which says ...
> \let\normalunexpanded\unexpanded
> 
> \input supp-mis.tex  \let\writestatus\undefined
> \input syst-gen.tex
> \input syst-fnt.tex
> 
> \let\unexpanded\normalunexpanded
> 
> (\unexpanded is an etex primitive but context had an \unexpanded before 
> etex came around; same for \protected as primitive; so here we push and 
> pop the meanings)
> 
> so, i wonder if this user loads ppchtex in the right way

could you please mention what the right way of using ppchtex is?

For about 5 years I am using this line (from latex)

\usepackage{m-pictex,m-ch-en}

which breaks from time to time... googling did not make me any
brighter ...

> (maybe i should make a derived version for latex usage - given that 
> there are users - in which case i can also cleanup and optimize the 
> context variant, but it has low priotity)

For me personally it is enough if m-ch-en works :-)

Soeren

From preining at logic.at  Mon Nov  5 18:14:41 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 5 Nov 2007 18:14:41 +0100
Subject: [dev-context] New Debian TeX packages for Etch
Message-ID: <20071105171441.GA20091@gamma.logic.tuwien.ac.at>

Hi all!

The new packages uploaded some time ago by myself to Debian unstable have
been backported to etch are as usual available on people.debian.org.
Don't forget that you will also need lmodern and context for
texlive-full.

Binaries of texlive-bin 2007.dfsg.1-1 are currently only for i386, I 
hope to get powerpc binaries soon. amd64 I will build myself rather
soon.

texlive and tex-common
 	deb http://people.debian.org/~preining/TeX/ tl2007/
 	deb-src http://people.debian.org/~preining/TeX/ src/

lmodern
	deb http://people.debian.org/~preining/TeX/ lmodern/
	deb-src http://people.debian.org/~preining/TeX/ lmodern/

context
 	deb http://people.debian.org/~preining/TeX/ context/
 	deb-src http://people.debian.org/~preining/TeX/ context/

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
SAFFRON WALDEN (n.)
To spray the person you are talking to with half-chewed breadcrumbs or
small pieces of whitebait.
			--- Douglas Adams, The Meaning of Liff

From adityam at umich.edu  Mon Nov  5 18:47:42 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 5 Nov 2007 12:47:42 -0500 (EST)
Subject: [dev-context] New Debian TeX packages for Etch
In-Reply-To: <20071105171441.GA20091@gamma.logic.tuwien.ac.at>
References: <20071105171441.GA20091@gamma.logic.tuwien.ac.at>
Message-ID: <alpine.DEB.0.9999.0711051220440.6553@nqv-yncgbc>

Hi Norbert,

On Mon, 5 Nov 2007, Norbert Preining wrote:

> Hi all!
>
> The new packages uploaded some time ago by myself to Debian unstable have
> been backported to etch are as usual available on people.debian.org.
> Don't forget that you will also need lmodern and context for
> texlive-full.
>
> Binaries of texlive-bin 2007.dfsg.1-1 are currently only for i386, I
> hope to get powerpc binaries soon. amd64 I will build myself rather
> soon.

I am using ubuntu 7.10 (amd64) and installed context using the debian 
repositories without any problem. However, the directory structure of the 
documentation has been reorganized, and it does not work correctly.

What I usually do is

locate show-man.pdf | xargs gnome-open

which opens show-main.pdf.gz from /usr/share/doc/context-doc-nonfree/showcase/

Now suppose I wan to open the charts manual. The show-man.pdf links to 
general/manuals/mchart.pdf while mcharts.pdf is at 
/usr/share/doc/context-doc-nonfree/manuals/ and the file is named 
mchart.pdf.gz.

So, there are two differences here. The files are organized in a different 
directory structure, and have a different extension. Is there some way 
this can be corrected at the packaging end?

Thank you.

Aditya

From preining at logic.at  Mon Nov  5 22:09:53 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 5 Nov 2007 22:09:53 +0100
Subject: [dev-context] New Debian TeX packages for Etch
In-Reply-To: <alpine.DEB.0.9999.0711051220440.6553@nqv-yncgbc>
References: <20071105171441.GA20091@gamma.logic.tuwien.ac.at>
	<alpine.DEB.0.9999.0711051220440.6553@nqv-yncgbc>
Message-ID: <20071105210953.GA13445@gamma.logic.tuwien.ac.at>

Hi Aditya,

On Mo, 05 Nov 2007, Aditya Mahajan wrote:
> So, there are two differences here. The files are organized in a different 
> directory structure, and have a different extension. Is there some way 
> this can be corrected at the packaging end?

I will take a look at that, but note that the 
	context-doc-nonfree
packages has NOT been updated in a while, so it probably is in a bad
state wrt organization. Next upload will ship pdf uncompressed, and
hopefully fix these issues.

Can you propose/list a better/working layout? The docs should reside
somehow under
	/usr/share/doc/<package>
but can be linked into
	/usr/share/doc/texmf/
which in turn is linked from
	/usr/share/texmf/doc/
so that texdoc finds the stuff.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
GRETNA GREEN (adj.)
A shade of green which cartoon characters dangle over the edge of a
cliff.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Wed Nov 14 20:19:11 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 14 Nov 2007 20:19:11 +0100
Subject: [dev-context] Bug#447559: chemtex is broken again
In-Reply-To: <1195066868.9642.18.camel@localhost>
References: <20071022071154.32271.5099.reportbug@localhost>	
	<20071022080056.GL28495@gamma.logic.tuwien.ac.at>
	<471CB11D.7080605@wxs.nl> <1195066868.9642.18.camel@localhost>
Message-ID: <473B4A2F.2050102@wxs.nl>

Soeren Sonnenburg wrote:
> On Mon, 2007-10-22 at 16:18 +0200, Hans Hagen wrote:
>> Norbert Preining wrote:
>>> forwarded 447559 dev-context at ntg.nl
>>> thanks
>>>
>>> Hi Hans, hi all!
>>>
>>> We got the following bug report for the Debian package, but I guess that
>>> should be fixed upstream:
>> for latex, ppchtex is loaded via ppchtex.noc which says ...
>>
>> \let\normalunexpanded\unexpanded
>>
>> \input supp-mis.tex  \let\writestatus\undefined
>> \input syst-gen.tex
>> \input syst-fnt.tex
>>
>> \let\unexpanded\normalunexpanded
>>
>> (\unexpanded is an etex primitive but context had an \unexpanded before 
>> etex came around; same for \protected as primitive; so here we push and 
>> pop the meanings)
>>
>> so, i wonder if this user loads ppchtex in the right way
>>
>> (maybe i should make a derived version for latex usage - given that 
>> there are users - in which case i can also cleanup and optimize the 
>> context variant, but it has low priotity)
> 
> OK I got like two reports from different users who exactly had the same
> problem.
> 
> One fixed it by simply inputting everythin in the .tex file:
> 
> \input supp-mis.tex 
> \input syst-gen.tex
> \input syst-fnt.tex
> \input m-pictex.tex
> \input m-ch-en.tex
> 
> the other removed the lines
> 
> \let\normalunexpanded\unexpanded
> \let\unexpanded\normalunexpanded
> 
> from ppchtex.nox .
> 
> Then it worked for both.
> 
> So whatever you do please fix it as it is a bug that does not only annoy
> me or alternatively tell us please how to correctly use m-ch-en ...

well, does the

\let\normalunexpanded\unexpanded

\input supp-mis.tex  \let\writestatus\undefined
\input syst-gen.tex
\input syst-fnt.tex

\let\unexpanded\normalunexpanded

method work?

i cannot test it since i only run context

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From bugreports at nn7.de  Wed Nov 14 20:01:08 2007
From: bugreports at nn7.de (Soeren Sonnenburg)
Date: Wed, 14 Nov 2007 20:01:08 +0100
Subject: [dev-context] Bug#447559: chemtex is broken again
In-Reply-To: <471CB11D.7080605@wxs.nl>
References: <20071022071154.32271.5099.reportbug@localhost>
	<20071022080056.GL28495@gamma.logic.tuwien.ac.at>
	<471CB11D.7080605@wxs.nl>
Message-ID: <1195066868.9642.18.camel@localhost>

On Mon, 2007-10-22 at 16:18 +0200, Hans Hagen wrote:
> Norbert Preining wrote:
> > forwarded 447559 dev-context at ntg.nl
> > thanks
> > 
> > Hi Hans, hi all!
> > 
> > We got the following bug report for the Debian package, but I guess that
> > should be fixed upstream:
> 
> for latex, ppchtex is loaded via ppchtex.noc which says ...
> 
> \let\normalunexpanded\unexpanded
> 
> \input supp-mis.tex  \let\writestatus\undefined
> \input syst-gen.tex
> \input syst-fnt.tex
> 
> \let\unexpanded\normalunexpanded
> 
> (\unexpanded is an etex primitive but context had an \unexpanded before 
> etex came around; same for \protected as primitive; so here we push and 
> pop the meanings)
> 
> so, i wonder if this user loads ppchtex in the right way
> 
> (maybe i should make a derived version for latex usage - given that 
> there are users - in which case i can also cleanup and optimize the 
> context variant, but it has low priotity)

OK I got like two reports from different users who exactly had the same
problem.

One fixed it by simply inputting everythin in the .tex file:

\input supp-mis.tex 
\input syst-gen.tex
\input syst-fnt.tex
\input m-pictex.tex
\input m-ch-en.tex

the other removed the lines

\let\normalunexpanded\unexpanded
\let\unexpanded\normalunexpanded

from ppchtex.nox .

Then it worked for both.

So whatever you do please fix it as it is a bug that does not only annoy
me or alternatively tell us please how to correctly use m-ch-en ...

Thanks!

Soeren

From preining at logic.at  Mon Nov 26 14:53:48 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 26 Nov 2007 14:53:48 +0100
Subject: [dev-context] Bug#447559: chemtex is broken again
In-Reply-To: <473B4A2F.2050102@wxs.nl>
References: <20071022071154.32271.5099.reportbug@localhost>
	<20071022080056.GL28495@gamma.logic.tuwien.ac.at>
	<471CB11D.7080605@wxs.nl> <1195066868.9642.18.camel@localhost>
	<473B4A2F.2050102@wxs.nl>
Message-ID: <20071126135348.GJ1523@gamma.logic.tuwien.ac.at>

Dear Soeren, 

could you please take your time and answer Hans's question, otherwise we
cannot proceed with this bug report.

Thanks a lot

Norbert


On Mi, 14 Nov 2007, Hans Hagen wrote:
> Soeren Sonnenburg wrote:
> >On Mon, 2007-10-22 at 16:18 +0200, Hans Hagen wrote:
> >>Norbert Preining wrote:
> >>>forwarded 447559 dev-context at ntg.nl
> >>>thanks
> >>>
> >>>Hi Hans, hi all!
> >>>
> >>>We got the following bug report for the Debian package, but I guess that
> >>>should be fixed upstream:
> >>for latex, ppchtex is loaded via ppchtex.noc which says ...
> >>
> >>\let\normalunexpanded\unexpanded
> >>
> >>\input supp-mis.tex  \let\writestatus\undefined
> >>\input syst-gen.tex
> >>\input syst-fnt.tex
> >>
> >>\let\unexpanded\normalunexpanded
> >>
> >>(\unexpanded is an etex primitive but context had an \unexpanded before 
> >>etex came around; same for \protected as primitive; so here we push and 
> >>pop the meanings)
> >>
> >>so, i wonder if this user loads ppchtex in the right way
> >>
> >>(maybe i should make a derived version for latex usage - given that 
> >>there are users - in which case i can also cleanup and optimize the 
> >>context variant, but it has low priotity)
> >
> >OK I got like two reports from different users who exactly had the same
> >problem.
> >
> >One fixed it by simply inputting everythin in the .tex file:
> >
> >\input supp-mis.tex 
> >\input syst-gen.tex
> >\input syst-fnt.tex
> >\input m-pictex.tex
> >\input m-ch-en.tex
> >
> >the other removed the lines
> >
> >\let\normalunexpanded\unexpanded
> >\let\unexpanded\normalunexpanded
> >
> >from ppchtex.nox .
> >
> >Then it worked for both.
> >
> >So whatever you do please fix it as it is a bug that does not only annoy
> >me or alternatively tell us please how to correctly use m-ch-en ...
> 
> well, does the
> 
> \let\normalunexpanded\unexpanded
> 
> \input supp-mis.tex  \let\writestatus\undefined
> \input syst-gen.tex
> \input syst-fnt.tex
> 
> \let\unexpanded\normalunexpanded
> 
> method work?
> 
> i cannot test it since i only run context
> 
> Hans

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
TOLSTACHAOLAIS (phr.)
What the police in Leith require you to say in order to prove that you
are not drunk.
			--- Douglas Adams, The Meaning of Liff

From mojca.miklavec.lists at gmail.com  Wed Dec  5 11:36:56 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 5 Dec 2007 11:36:56 +0100
Subject: [dev-context] tex-text (XeTeX) & trep, tlig (LuaTeX)
Message-ID: <6faad9f00712050236r18560792n34906f93cda12a1a@mail.gmail.com>

Hello Hans,

I compared tex-text and trep, tlig. Since you map features=default to
trep and tlig, and both of them further to tex-text (twice), tex-text
could be split in two parts as well, so that you can make one-to-one
mapping.

Should I make those changes and seny you the two files? (Twice 300
bytes to be added to ConTeXt + souce, which is approximately the same
as written below.)

1.) TREP

function fonts.initializers.base.otf.texquotes(tfm,value)
    tfm.characters[0x0022] = table.fastcopy(tfm.characters[0x201D])
    tfm.characters[0x0027] = table.fastcopy(tfm.characters[0x2019])
    tfm.characters[0x0060] = table.fastcopy(tfm.characters[0x2018])
end

Corresponding lines from XeTeX:

U+0022;  ;  ;   >;U+201D;  ; " -> right double quote
U+0027;  ;  ;  <>;U+2019;  ; ' -> right single quote
U+0060;  ;  ;  <>;U+2018;  ; ` -> left single quote

2.) TLIG

{ "endash", "hyphen hyphen" },
U+002D U+002D; ;  ;  <>;U+2013;  ; -- -> en dash

{ "emdash", "hyphen hyphen hyphen" },
U+002D U+002D U+002D;<>;U+2014;  ; --- -> em dash

{ "quotedblright", "quotesingle quotesingle" },
U+0027 U+0027; <>;U+201D;  ; '' -> right double quote

{ "quotedblleft", "grave grave" },
U+0060 U+0060; <>;U+201C;  ; `` -> left double quote

{ "quotedblbase", "comma comma" }
U+002C U+002C; <>;U+201E;  ; ,, -> DOUBLE LOW-9 QUOTATION MARK

missing from tex-text (not needed so far)

{ "quotedblleft", "quoteleft quoteleft" },
0x2018 0x2018 <> 0x201C ; 2x left single quote -> left double quote

{ "quotedblright", "quoteright quoteright" },
0x2019 0x2019 <> 0x201D ; 2x right single quote -> right double quote

3.) Only in XeTeX's tex-text (Do people need it?):

U+0021 U+0060; <>;U+00A1;  ; !` -> inverted exclam
U+003F U+0060; <>;U+00BF;  ; ?` -> inverted question

U+003C U+003C; <>;U+00AB;  ; << -> LEFT POINTING GUILLEMET
U+003E U+003E; <>;U+00BB;  ; >> -> RIGHT POINTING GUILLEMET



Plus, there's a little problem with this patch that I have sent you
(it's not in stable yet, so it might make sense to fix it before
releasing):

\definefontsynonym[Dummy]          [name:\typescripttwo]   [features=default]
\definefontsynonym[DummyItalic]    [name:\typescripttwo/I] [features=default]
\definefontsynonym[DummyBold]      [name:\typescripttwo/B] [features=default]
\definefontsynonym[DummyBoldItalic][name:\typescripttwo/BI][features=default]

\definefontsynonym[DummyCaps]      [name:\typescripttwo]   [features=smallcaps]


The problem is that "features=default" implies "script=latn", which is
not always desired. A copy of mapping=tex-text comes from tlig & trep
substitution.
I assume that script=latn;language=dflt;+liga;+kern; is always on by
default (were needed), so basically mapping=tex-text is the only thing
that really needs to be added.

[Iwona-Bold.otf]:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;


Some (non-latin) fonts complain when one requests non-existing features.

Also, it might be handy to be able to define
    \definetypeface[basic][rm][Xserif][whatever][script=arab,language=...]
(for now forget that one, interface needs to be extended once and properly).


    \definefontsynonym[a][file:Iwona-Bold.otf][mapping=tex-text]
doesn't work, so the only way seems to be
    \definefontfeature[xetex][mapping=tex-text]
    \definefontsynonym[a][file:Iwona-Bold.otf][xetex]

I have tried to use
    \definefontfeature[xetex][mapping=tex-text]
    \definefontfeature[caps][+smcp]
    \definefontsynonym[a][file:Iwona-Bold.otf][features={xetex,caps}]
but that didn't work.

Mojca

From pragma at wxs.nl  Wed Dec  5 12:18:14 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 05 Dec 2007 12:18:14 +0100
Subject: [dev-context] tex-text (XeTeX) & trep, tlig (LuaTeX)
In-Reply-To: <6faad9f00712050236r18560792n34906f93cda12a1a@mail.gmail.com>
References: <6faad9f00712050236r18560792n34906f93cda12a1a@mail.gmail.com>
Message-ID: <475688F6.6080408@wxs.nl>

Mojca Miklavec wrote:

> I compared tex-text and trep, tlig. Since you map features=default to
> trep and tlig, and both of them further to tex-text (twice), tex-text
> could be split in two parts as well, so that you can make one-to-one
> mapping.

there is a difference here vetween xetex and luatex

> Should I make those changes and seny you the two files? (Twice 300
> bytes to be added to ConTeXt + souce, which is approximately the same
> as written below.)

first i need to understand the problem; actually i'm even thinking of 
not defaulting (in luatex) the mapping other than -- and --- because 
they are (1) not sensible and (2) users shoul duse quotation commands 
and/or (3) use the proper utf codes

> 1.) TREP
> 
> function fonts.initializers.base.otf.texquotes(tfm,value)
>     tfm.characters[0x0022] = table.fastcopy(tfm.characters[0x201D])
>     tfm.characters[0x0027] = table.fastcopy(tfm.characters[0x2019])
>     tfm.characters[0x0060] = table.fastcopy(tfm.characters[0x2018])
> end
> 
> Corresponding lines from XeTeX:
> 
> U+0022;  ;  ;   >;U+201D;  ; " -> right double quote
> U+0027;  ;  ;  <>;U+2019;  ; ' -> right single quote
> U+0060;  ;  ;  <>;U+2018;  ; ` -> left single quote

these i hate most, and personally never use them ... if i key in a char 
explicitly i want that char and not another

> 2.) TLIG
> 
> { "endash", "hyphen hyphen" },
> U+002D U+002D; ;  ;  <>;U+2013;  ; -- -> en dash
> 
> { "emdash", "hyphen hyphen hyphen" },
> U+002D U+002D U+002D;<>;U+2014;  ; --- -> em dash
> 
> { "quotedblright", "quotesingle quotesingle" },
> U+0027 U+0027; <>;U+201D;  ; '' -> right double quote
> 
> { "quotedblleft", "grave grave" },
> U+0060 U+0060; <>;U+201C;  ; `` -> left double quote
> 
> { "quotedblbase", "comma comma" }
> U+002C U+002C; <>;U+201E;  ; ,, -> DOUBLE LOW-9 QUOTATION MARK
> 
> missing from tex-text (not needed so far)

actually there's even space + something becomes something else

> { "quotedblleft", "quoteleft quoteleft" },
> 0x2018 0x2018 <> 0x201C ; 2x left single quote -> left double quote
> 
> { "quotedblright", "quoteright quoteright" },
> 0x2019 0x2019 <> 0x201D ; 2x right single quote -> right double quote

and then those spanish ...

> 3.) Only in XeTeX's tex-text (Do people need it?):
> 
> U+0021 U+0060; <>;U+00A1;  ; !` -> inverted exclam
> U+003F U+0060; <>;U+00BF;  ; ?` -> inverted question
> 
> U+003C U+003C; <>;U+00AB;  ; << -> LEFT POINTING GUILLEMET
> U+003E U+003E; <>;U+00BB;  ; >> -> RIGHT POINTING GUILLEMET

let's get rid of it

> Plus, there's a little problem with this patch that I have sent you
> (it's not in stable yet, so it might make sense to fix it before
> releasing):
> 
> \definefontsynonym[Dummy]          [name:\typescripttwo]   [features=default]
> \definefontsynonym[DummyItalic]    [name:\typescripttwo/I] [features=default]
> \definefontsynonym[DummyBold]      [name:\typescripttwo/B] [features=default]
> \definefontsynonym[DummyBoldItalic][name:\typescripttwo/BI][features=default]
> 
> \definefontsynonym[DummyCaps]      [name:\typescripttwo]   [features=smallcaps]

i'd like to let caps and such go away completely for mkiv so maybe we 
end up with xetex defs versus luatex defs; i wonder if in practice users 
will use both at the same time (ok, you do)

> The problem is that "features=default" implies "script=latn", which is
> not always desired. A copy of mapping=tex-text comes from tlig & trep
> substitution.

we can fall back to dflt which in practice boils down to latn

> I assume that script=latn;language=dflt;+liga;+kern; is always on by
> default (were needed), so basically mapping=tex-text is the only thing
> that really needs to be added.

well, i'd prefer ... only -- and --- and make anything else up to the 
user, which means, redefining default in cont-sys if needed

> [Iwona-Bold.otf]:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;

two mappings?

> 
> Some (non-latin) fonts complain when one requests non-existing features.

in xetex you mean?

> Also, it might be handy to be able to define
>     \definetypeface[basic][rm][Xserif][whatever][script=arab,language=...]
> (for now forget that one, interface needs to be extended once and properly).
> 
> 
>     \definefontsynonym[a][file:Iwona-Bold.otf][mapping=tex-text]
> doesn't work, so the only way seems to be
>     \definefontfeature[xetex][mapping=tex-text]
>     \definefontsynonym[a][file:Iwona-Bold.otf][xetex]
> 
> I have tried to use
>     \definefontfeature[xetex][mapping=tex-text]
>     \definefontfeature[caps][+smcp]
>     \definefontsynonym[a][file:Iwona-Bold.otf][features={xetex,caps}]
> but that didn't work.

indeed, handling comma separated lists is too slow there .. ok, we can 
do it for xetex and in luatex use lua for it ... or i could hash the 
commalist itself ... needs a bit of thinking but eventually we need to 
be able to combine features (this even more points into a separate 
definition file for xetex)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Thu Dec  6 15:09:19 2007
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 6 Dec 2007 15:09:19 +0100
Subject: [dev-context] tex-text (XeTeX) & trep, tlig (LuaTeX)
In-Reply-To: <475688F6.6080408@wxs.nl>
References: <6faad9f00712050236r18560792n34906f93cda12a1a@mail.gmail.com>
	<475688F6.6080408@wxs.nl>
Message-ID: <6faad9f00712060609t665117c3g590b61db11bac4b5@mail.gmail.com>

On 12/5/07, Hans Hagen wrote:
> Mojca Miklavec wrote:
>
> > I compared tex-text and trep, tlig. Since you map features=default to
> > trep and tlig, and both of them further to tex-text (twice), tex-text
> > could be split in two parts as well, so that you can make one-to-one
> > mapping.
>
> there is a difference here between xetex and luatex

I know, that's why I'm volunteering to make XeTeX behave equal to
LuaTeX (and asking for some opinions about it).

> first i need to understand the problem;

In LuaTeX you define two "features":
- trep (3 replacements)
- tlig (8 ligatures)
In XeTeX, these 11 and 4 others are combined in "mapping=tex-text".
And I would like the ligatures to be the same on both engines, so I
would like to clone the behavior from LuaTeX in XeTeX (once you decide
what the default should be - from your reply I understand that you
plan to change the behaviour) and split "mapping=tex-text" into more
separate "mappings".

> actually i'm even thinking of
> not defaulting (in luatex) the mapping other than -- and --- because
> they are (1) not sensible and (2) users should use quotation commands
> and/or (3) use the proper utf codes

That's fine by me, I would agree. Only: what about apostrophe (')?
(I'm, you're, ..)

> > 1.) TREP
> >
> > function fonts.initializers.base.otf.texquotes(tfm,value)
> >     tfm.characters[0x0022] = table.fastcopy(tfm.characters[0x201D])
> >     tfm.characters[0x0027] = table.fastcopy(tfm.characters[0x2019])
> >     tfm.characters[0x0060] = table.fastcopy(tfm.characters[0x2018])
> > end
> >
> > Corresponding lines from XeTeX:
> >
> > U+0022;  ;  ;   >;U+201D;  ; " -> right double quote
> > U+0027;  ;  ;  <>;U+2019;  ; ' -> right single quote
> > U+0060;  ;  ;  <>;U+2018;  ; ` -> left single quote
>
> these i hate most, and personally never use them ... if i key in a char
> explicitly i want that char and not another

I'm not sure about it, but how is it with the apostrophe in
   I'm, don't, ... ?

I don't care too much about
    " -> right double quote
and
    ` -> left single quote
esp. the first one should better be left that way, and I never use `
(and have no idea what it's used for except in mysql and TeX source
code)

> > 2.) TLIG
> >
> > { "endash", "hyphen hyphen" },
> > U+002D U+002D; ;  ;  <>;U+2013;  ; -- -> en dash
> >
> > { "emdash", "hyphen hyphen hyphen" },
> > U+002D U+002D U+002D;<>;U+2014;  ; --- -> em dash
> >
> > { "quotedblright", "quotesingle quotesingle" },
> > U+0027 U+0027; <>;U+201D;  ; '' -> right double quote
> >
> > { "quotedblleft", "grave grave" },
> > U+0060 U+0060; <>;U+201C;  ; `` -> left double quote
> >
> > { "quotedblbase", "comma comma" }
> > U+002C U+002C; <>;U+201E;  ; ,, -> DOUBLE LOW-9 QUOTATION MARK
> >
> > missing from tex-text (not needed so far)
>
> actually there's even space + something becomes something else

I don't mind those, TeX never uses space anyway.

> > { "quotedblleft", "quoteleft quoteleft" },
> > 0x2018 0x2018 <> 0x201C ; 2x left single quote -> left double quote
> >
> > { "quotedblright", "quoteright quoteright" },
> > 0x2019 0x2019 <> 0x201D ; 2x right single quote -> right double quote
>
> and then those spanish ...
>
> > 3.) Only in XeTeX's tex-text (Do people need it?):
> >
> > U+0021 U+0060; <>;U+00A1;  ; !` -> inverted exclam
> > U+003F U+0060; <>;U+00BF;  ; ?` -> inverted question
> >
> > U+003C U+003C; <>;U+00AB;  ; << -> LEFT POINTING GUILLEMET
> > U+003E U+003E; <>;U+00BB;  ; >> -> RIGHT POINTING GUILLEMET
>
> let's get rid of it

Fine by me.

> i'd like to let caps and such go away completely for mkiv so maybe we
> end up with xetex defs versus luatex defs;

So ... perhaps Caps support needs to be rewritten in XeTeX as well :)
I still don't understand how to get "bold italic sans caps" for
example (just as I don't know how to get bold/bold italic math).

Do it your way in LuaTeX ... support for XeTeX can follow.

> i wonder if in practice users
> will use both at the same time (ok, you do)

I use LuaTeX because:
- sometimes Lua is really handy and you have a marvellous database for
Unicode well integrated :), nice to inspect fonts etc.
I use XeTeX because:
- LuaTeX does't (or at least didn't) always work as it should. XeTeX
"saved my life" in May because of some dirty LuaTeX bugs stopped the
show in the middle (I already had a working copy - final PDF, and
after minor modifications it stopped working)
- others keep asking questions (and since I suggested or approved
quite some bugs in XeTeX recently, I feel responsible for helping the
victims :)
- to show off with Zapfino - I don't have it as OpenType :-)

In any case: what I really love about ConTeXt is that [more-or-less]
no change is needed to compile the same (simple) document with either
engine (and compare the result or to switch quickly if support in one
engine is buggy).

When using lua that is no longer true, but still, same definitions and
similar results with both engines would be nice. (Esp. if both engines
will be merged in the future :)

> > The problem is that "features=default" implies "script=latn", which is
> > not always desired. A copy of mapping=tex-text comes from tlig & trep
> > substitution.
>
> we can fall back to dflt which in practice boils down to latn

That's probably better.

> > I assume that script=latn;language=dflt;+liga;+kern; is always on by
> > default (were needed), so basically mapping=tex-text is the only thing
> > that really needs to be added.
>
> well, i'd prefer ... only -- and --- and make anything else up to the
> user, which means, redefining default in cont-sys if needed
>
> > [Iwona-Bold.otf]:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;
>
> two mappings?

I mean: the the font is called with
    mapping=tex-text;mapping=tex-text;
whis doesn't make so much sense.

I can create two new mappings, so that "tlig=yes" would then be
"mapping=tlig" and "trep=yes" would be "mapping=trep" instead of
"mapping=tex-text".

We only need to agree which features are where (and you need to remove
?` from beginner's manual). Spanish users probably have it on keyboard
and "others" either don't need it or will find it somehow.

<< and >> are not needed either in my opinion.

> > Some (non-latin) fonts complain when one requests non-existing features.
>
> in xetex you mean?

Yes. Well, LuaTeX probably "complains" as well (as in report >> load
otf: warning: Warning: Glyph 1423 is named fi which should mean it is
mapped to
 Unicode U+FB01, but Glyph 207 already has that encoding. etc.) -
complaining is a good thing in general, it only means "please do not
use latin script for non-latin fonts". And "features=default" should
prbably not force latin. (Then it should at least be
"features=default-latin" or somothing similar.)

> > Also, it might be handy to be able to define
> >     \definetypeface[basic][rm][Xserif][whatever][script=arab,language=...]
> > (for now forget that one, interface needs to be extended once and properly).
> >
> >
> >     \definefontsynonym[a][file:Iwona-Bold.otf][mapping=tex-text]
> > doesn't work, so the only way seems to be
> >     \definefontfeature[xetex][mapping=tex-text]
> >     \definefontsynonym[a][file:Iwona-Bold.otf][xetex]
> >
> > I have tried to use
> >     \definefontfeature[xetex][mapping=tex-text]
> >     \definefontfeature[caps][+smcp]
> >     \definefontsynonym[a][file:Iwona-Bold.otf][features={xetex,caps}]
> > but that didn't work.
>
> indeed, handling comma separated lists is too slow there .. ok, we can
> do it for xetex and in luatex use lua for it ... or i could hash the
> commalist itself ... needs a bit of thinking but eventually we need to
> be able to combine features (this even more points into a separate
> definition file for xetex)

That's up to you. I don't know anything about internals here.

Mojca

From pragma at wxs.nl  Fri Dec  7 20:01:59 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 07 Dec 2007 20:01:59 +0100
Subject: [dev-context] tex-text (XeTeX) & trep, tlig (LuaTeX)
In-Reply-To: <6faad9f00712060609t665117c3g590b61db11bac4b5@mail.gmail.com>
References: <6faad9f00712050236r18560792n34906f93cda12a1a@mail.gmail.com>	
	<475688F6.6080408@wxs.nl>
	<6faad9f00712060609t665117c3g590b61db11bac4b5@mail.gmail.com>
Message-ID: <475998A7.8030407@wxs.nl>

Mojca Miklavec wrote:

> In LuaTeX you define two "features":
> - trep (3 replacements)
> - tlig (8 ligatures)
> In XeTeX, these 11 and 4 others are combined in "mapping=tex-text".
> And I would like the ligatures to be the same on both engines, so I
> would like to clone the behavior from LuaTeX in XeTeX (once you decide
> what the default should be - from your reply I understand that you
> plan to change the behaviour) and split "mapping=tex-text" into more
> separate "mappings".

well, let'd assume that hardly anyone uses tlig, so then the 8 ligs 
(well, not really ligs) can be kept, saves us some some headache; and we 
just don't make it a default -)


> That's fine by me, I would agree. Only: what about apostrophe (')?
> (I'm, you're, ..)

shouldn't that one be left untouched?

> I'm not sure about it, but how is it with the apostrophe in
>    I'm, don't, ... ?

I don't wanna know -)

> I don't care too much about
>     " -> right double quote
> and
>     ` -> left single quote
> esp. the first one should better be left that way, and I never use `
> (and have no idea what it's used for except in mysql and TeX source
> code)

how about a vote on the list ...

>>> U+0021 U+0060; <>;U+00A1;  ; !` -> inverted exclam
>>> U+003F U+0060; <>;U+00BF;  ; ?` -> inverted question
>>>
>>> U+003C U+003C; <>;U+00AB;  ; << -> LEFT POINTING GUILLEMET
>>> U+003E U+003E; <>;U+00BB;  ; >> -> RIGHT POINTING GUILLEMET
>> let's get rid of it
> 
> Fine by me.

real weird things ... the french should use proper utf chars but well ...

>> i'd like to let caps and such go away completely for mkiv so maybe we
>> end up with xetex defs versus luatex defs;
> 
> So ... perhaps Caps support needs to be rewritten in XeTeX as well :)
> I still don't understand how to get "bold italic sans caps" for
> example (just as I don't know how to get bold/bold italic math).

i think that caps (in xetex) can best be done by just defining an extra 
typeface and then switch typeface (fast too)

> I use LuaTeX because:
> - sometimes Lua is really handy and you have a marvellous database for
> Unicode well integrated :), nice to inspect fonts etc.
> I use XeTeX because:
> - LuaTeX does't (or at least didn't) always work as it should. XeTeX
> "saved my life" in May because of some dirty LuaTeX bugs stopped the
> show in the middle (I already had a working copy - final PDF, and
> after minor modifications it stopped working)

that is because mkiv parses the text and if it becomes too weird, 
abusive, nonsence, offending it will enter a special mode

> - others keep asking questions (and since I suggested or approved
> quite some bugs in XeTeX recently, I feel responsible for helping the
> victims :)

sure, also, for some apps xetex is more convenient (faster, and many 
docs re not that demanding so default feature handling can do the job well)

> - to show off with Zapfino - I don't have it as OpenType :-)

hm, you mean that you're using the apple font model ... now who was 
talking about portability ...

> In any case: what I really love about ConTeXt is that [more-or-less]
> no change is needed to compile the same (simple) document with either
> engine (and compare the result or to switch quickly if support in one
> engine is buggy).

so we should keep that property

> When using lua that is no longer true, but still, same definitions and
> similar results with both engines would be nice. (Esp. if both engines
> will be merged in the future :)

by then i'm retired and you'll have to do the coding ...

both engines fill in a niche and do that well so no problem to support 
both; eventually mkii will be the xetex thing and mkiv the luatex thing

>>> The problem is that "features=default" implies "script=latn", which is
>>> not always desired. A copy of mapping=tex-text comes from tlig & trep
>>> substitution.
>> we can fall back to dflt which in practice boils down to latn
> 
> That's probably better.

i removed the script/langs already

>>> I assume that script=latn;language=dflt;+liga;+kern; is always on by
>>> default (were needed), so basically mapping=tex-text is the only thing
>>> that really needs to be added.
>> well, i'd prefer ... only -- and --- and make anything else up to the
>> user, which means, redefining default in cont-sys if needed
>>
>>> [Iwona-Bold.otf]:script=latn;language=dflt;+liga;+kern;mapping=tex-text;mapping=tex-text;
>> two mappings?
> 
> I mean: the the font is called with
>     mapping=tex-text;mapping=tex-text;
> whis doesn't make so much sense.

no, but let's not waste too much tex processing on it, doesn't hurt i guess

> I can create two new mappings, so that "tlig=yes" would then be
> "mapping=tlig" and "trep=yes" would be "mapping=trep" instead of
> "mapping=tex-text".

yes, can be part of the context zip

> We only need to agree which features are where (and you need to remove
> ?` from beginner's manual). Spanish users probably have it on keyboard
> and "others" either don't need it or will find it somehow.

ah .. manual rewriting ...

> << and >> are not needed either in my opinion.
> 
>>> Some (non-latin) fonts complain when one requests non-existing features.
>> in xetex you mean?
> 
> Yes. Well, LuaTeX probably "complains" as well (as in report >> load
> otf: warning: Warning: Glyph 1423 is named fi which should mean it is
> mapped to
>  Unicode U+FB01, but Glyph 207 already has that encoding. etc.) -
> complaining is a good thing in general, it only means "please do not
> use latin script for non-latin fonts". And "features=default" should
> prbably not force latin. (Then it should at least be
> "features=default-latin" or somothing similar.)

luatex does not care because it does nothing with features, it loads the 
file ...

and, mkiv nicely checks for the features supported, so if you ask for 
mkmk in latin modern it will just ignore it (part of setting up the 
processing sequences and caches), mkiv does not even bother you with a 
message

>>> Also, it might be handy to be able to define
>>>     \definetypeface[basic][rm][Xserif][whatever][script=arab,language=...]
>>> (for now forget that one, interface needs to be extended once and properly).
>>>
>>>
>>>     \definefontsynonym[a][file:Iwona-Bold.otf][mapping=tex-text]
>>> doesn't work, so the only way seems to be
>>>     \definefontfeature[xetex][mapping=tex-text]
>>>     \definefontsynonym[a][file:Iwona-Bold.otf][xetex]
>>>
>>> I have tried to use
>>>     \definefontfeature[xetex][mapping=tex-text]
>>>     \definefontfeature[caps][+smcp]
>>>     \definefontsynonym[a][file:Iwona-Bold.otf][features={xetex,caps}]
>>> but that didn't work.
>> indeed, handling comma separated lists is too slow there .. ok, we can
>> do it for xetex and in luatex use lua for it ... or i could hash the
>> commalist itself ... needs a bit of thinking but eventually we need to
>> be able to combine features (this even more points into a separate
>> definition file for xetex)
> 
> That's up to you. I don't know anything about internals here.

you can't fool me ..

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From adityam at umich.edu  Fri Dec  7 20:56:38 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 7 Dec 2007 14:56:38 -0500 (EST)
Subject: [dev-context] New Debian TeX packages for Etch
In-Reply-To: <20071105210953.GA13445@gamma.logic.tuwien.ac.at>
References: <20071105171441.GA20091@gamma.logic.tuwien.ac.at>
	<alpine.DEB.0.9999.0711051220440.6553@nqv-yncgbc>
	<20071105210953.GA13445@gamma.logic.tuwien.ac.at>
Message-ID: <alpine.DEB.0.9999.0712071425220.5935@nqv-yncgbc>

Hi Norbert,

Sorry for the (extremely) late reply.

On Mon, 5 Nov 2007, Norbert Preining wrote:

> Hi Aditya,
>
> On Mo, 05 Nov 2007, Aditya Mahajan wrote:
>> So, there are two differences here. The files are organized in a different
>> directory structure, and have a different extension. Is there some way
>> this can be corrected at the packaging end?
>
> I will take a look at that, but note that the
> 	context-doc-nonfree
> packages has NOT been updated in a while, so it probably is in a bad
> state wrt organization. Next upload will ship pdf uncompressed, and
> hopefully fix these issues.
>
> Can you propose/list a better/working layout? The docs should reside
> somehow under
> 	/usr/share/doc/<package>
> but can be linked into
> 	/usr/share/doc/texmf/
> which in turn is linked from
> 	/usr/share/texmf/doc/
> so that texdoc finds the stuff.

How about having the same directory structure as in the context standalone 
distribution? For that, we will need to make the following changes

cd /usr/share/doc/context-doc-nonfree/

gunzip showcase/*.pdf.gz
gunzip manuals/*.pdf.gz

mv showcase/*.pdf ./
rmdir showcase

mkdir general
mv manuals general

The files in setup/ are ok, since they are not linked by anything else. 
Also, can the context magazines 
(isoimage/usr/local/context/docroot/documents/general/magazines in the 
context standalone distribution) be included in the debian package at 
/usr/share/doc/context-doc-nonfree. Their location does not matter, but to 
keep the directory structure future proof, I would suggest the same 
strucutre as pragma's So they can be copied to general/magazines/

As you mentioned, these need to be linked to appropriate directories so 
that texdoc can also find them. I could not figure out how context files 
are linked in the texmf tree, but texdoc does find the files. I assume 
that the above changes will not make searching for pdfs difficult for 
texdoc.

Thank you once more for maintaining the context packages for debian. It 
really makes it easy to setup context on ubuntu.

Aditya







From adityam at umich.edu  Fri Dec  7 21:14:49 2007
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 7 Dec 2007 15:14:49 -0500 (EST)
Subject: [dev-context] New Debian TeX packages for Etch
In-Reply-To: <alpine.DEB.0.9999.0712071425220.5935@nqv-yncgbc>
References: <20071105171441.GA20091@gamma.logic.tuwien.ac.at>
	<alpine.DEB.0.9999.0711051220440.6553@nqv-yncgbc>
	<20071105210953.GA13445@gamma.logic.tuwien.ac.at>
	<alpine.DEB.0.9999.0712071425220.5935@nqv-yncgbc>
Message-ID: <alpine.DEB.0.9999.0712071514020.5935@nqv-yncgbc>

On Fri, 7 Dec 2007, Aditya Mahajan wrote:

> Hi Norbert,
>
> Sorry for the (extremely) late reply.
>
> On Mon, 5 Nov 2007, Norbert Preining wrote:
>
>> Hi Aditya,
>>
>> On Mo, 05 Nov 2007, Aditya Mahajan wrote:
>>> So, there are two differences here. The files are organized in a different
>>> directory structure, and have a different extension. Is there some way
>>> this can be corrected at the packaging end?
>>
>> I will take a look at that, but note that the
>> 	context-doc-nonfree
>> packages has NOT been updated in a while, so it probably is in a bad
>> state wrt organization. Next upload will ship pdf uncompressed, and
>> hopefully fix these issues.
>>
>> Can you propose/list a better/working layout? The docs should reside
>> somehow under
>> 	/usr/share/doc/<package>
>> but can be linked into
>> 	/usr/share/doc/texmf/
>> which in turn is linked from
>> 	/usr/share/texmf/doc/
>> so that texdoc finds the stuff.
>
> How about having the same directory structure as in the context standalone
> distribution? For that, we will need to make the following changes
>
> cd /usr/share/doc/context-doc-nonfree/
>
> gunzip showcase/*.pdf.gz
> gunzip manuals/*.pdf.gz
>
> mv showcase/*.pdf ./
> rmdir showcase
>
> mkdir general
> mv manuals general
>
> The files in setup/ are ok, since they are not linked by anything else.
> Also, can the context magazines
> (isoimage/usr/local/context/docroot/documents/general/magazines in the
> context standalone distribution) be included in the debian package at
> /usr/share/doc/context-doc-nonfree. Their location does not matter, but to
> keep the directory structure future proof, I would suggest the same
> strucutre as pragma's So they can be copied to general/magazines/

Actually, the magazines are linked from show-mag.pdf so they MUST go to 
general/magazines/ directory.

Aditya

From taco at elvenkind.com  Fri Dec  7 22:16:55 2007
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 07 Dec 2007 22:16:55 +0100
Subject: [dev-context] tex-text (XeTeX) & trep, tlig (LuaTeX)
In-Reply-To: <475998A7.8030407@wxs.nl>
References: <6faad9f00712050236r18560792n34906f93cda12a1a@mail.gmail.com>		<475688F6.6080408@wxs.nl>	<6faad9f00712060609t665117c3g590b61db11bac4b5@mail.gmail.com>
	<475998A7.8030407@wxs.nl>
Message-ID: <4759B847.1000905@elvenkind.com>

Hans Hagen wrote:
> 
>> That's fine by me, I would agree. Only: what about apostrophe (')?
>> (I'm, you're, ..)
> 
> shouldn't that one be left untouched?

On typewriters (the real ones) there was often a character that
slanted upward, and it was used for end-of-quote as well as for
the "acute" accent.

The character in ASCII looks like a vertical stripe, but it
definately supposed to represent an apostrophe there, along with
other meanings (on my physical keyboard, it looks like an acute
accent).

Unicode actually prefers 0x2019, "RIGHT SINGLE QUOTATION MARK"
(which is semantically quite different from "apostrophe", imho),
but it does name the character at 0x27 "APOSTROPHE". It states
that character to be a "neutral (vertical) glyph with mixed usage",
leaving it wide open to interpretation.

I personally would really hate having to use a keyboard mapper
for phrases like "I'm sure" and "Hans' macros". Please keep
the ' to ? remapping, at least in roman proportional fonts.

>> esp. the first one should better be left that way, and I never use `
>> (and have no idea what it's used for except in mysql and TeX source
>> code)

It is used in _lots_ of programming languages, but other then that
I don't know. The Unicode name of 0x60 is "GRAVE ACCENT". I assume
it is inherited from the typewriter era (circumflex as well).

Best wishes,
Taco

From pragma at wxs.nl  Fri Dec  7 22:27:00 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 07 Dec 2007 22:27:00 +0100
Subject: [dev-context] tex-text (XeTeX) & trep, tlig (LuaTeX)
In-Reply-To: <4759B847.1000905@elvenkind.com>
References: <6faad9f00712050236r18560792n34906f93cda12a1a@mail.gmail.com>		<475688F6.6080408@wxs.nl>	<6faad9f00712060609t665117c3g590b61db11bac4b5@mail.gmail.com>
	<475998A7.8030407@wxs.nl> <4759B847.1000905@elvenkind.com>
Message-ID: <4759BAA4.30308@wxs.nl>

Taco Hoekwater wrote:

> I personally would really hate having to use a keyboard mapper
> for phrases like "I'm sure" and "Hans' macros". Please keep
> the ' to ? remapping, at least in roman proportional fonts.

in that case i wonder if we could best make it a static feature i.e. i 
just remap the character (for taco: only an initializer in mkiv node 
processing) which saves a node pass


Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From preining at logic.at  Mon Dec 24 08:06:15 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 24 Dec 2007 08:06:15 +0100
Subject: [dev-context] (fwd) Bug#457622: context: Importing mps files from
	latex is broken
Message-ID: <20071224070615.GF31256@gamma.logic.tuwien.ac.at>

Dear Hans, dear Taco, dear all,

we got a bug report on Debian after shipping context 2007.12.18 wrt
supp-pdf.tex, including .mp does not work anymore ...

----- Forwarded message from Dylan Thurston <dthurston at barnard.edu> -----

> [Loading MPS to PDF converter (version 2006.09.02).]
> ) [MP to PDF] (./test-0.mps
> ! Undefined control sequence.
> \doflushMPtext #1->\edef \!!stringa {#1}\@EA 
>                                              \dodoflushMPtext \!!stringa \re...
> l.16 (Test) cmr10 9.96265 fshow

Minimal test files are:

----- test.tex ------
\documentclass{article}
\usepackage{graphicx}
\begin{document}
\includegraphics{test-0}
\end{document}
----- test.mp -------
beginfig(0);
  draw (0,0)--(1cm,1cm);
  label.lft("Test", (0,0));
endfig;
end
----------------------

The error didn't occur with the supp-pdf.tex from context 2007.09.28.

I checked the two supp-pdf.tex codes and there are quite a lot of
differences. Is this a know problem and how should it be fixed?

Thanks a lot, all the best, and merry christmas

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
GOOSECRUIVES (pl. n. archaic)
A pair of wooden trousers worn by poultry-keepers in the Middle Ages.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Mon Dec 24 10:21:59 2007
From: preining at logic.at (Norbert Preining)
Date: Mon, 24 Dec 2007 10:21:59 +0100
Subject: [dev-context] mptopdf ... which one
Message-ID: <20071224092159.GC10536@gamma.logic.tuwien.ac.at>

Hi all,

what should mptopdf be? Either a texexec of mptopdf.pl or a link to
pdftex and dumping the format for mptopdf? Both are present?

Thanks and all the best and merry christmas

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
  "One disk to rule them all, One disk to find them. One disk to bring
  them all and in the darkness grind them. In the Land of Redmond
  where the shadows lie." -- The Silicon Valley Tarot

From pragma at wxs.nl  Mon Dec 24 09:19:12 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 24 Dec 2007 09:19:12 +0100
Subject: [dev-context] (fwd) Bug#457622: context: Importing mps files
 from latex is broken
In-Reply-To: <20071224070615.GF31256@gamma.logic.tuwien.ac.at>
References: <20071224070615.GF31256@gamma.logic.tuwien.ac.at>
Message-ID: <476F6B80.8010000@wxs.nl>

Norbert Preining wrote:
> Dear Hans, dear Taco, dear all,
> 
> we got a bug report on Debian after shipping context 2007.12.18 wrt
> supp-pdf.tex, including .mp does not work anymore ...


quick fix   \let\@EA\expandafter

i'll look into it


> ----- Forwarded message from Dylan Thurston <dthurston at barnard.edu> -----
> 
>> [Loading MPS to PDF converter (version 2006.09.02).]
>> ) [MP to PDF] (./test-0.mps
>> ! Undefined control sequence.
>> \doflushMPtext #1->\edef \!!stringa {#1}\@EA 
>>                                              \dodoflushMPtext \!!stringa \re...
>> l.16 (Test) cmr10 9.96265 fshow
> 
> Minimal test files are:
> 
> ----- test.tex ------
> \documentclass{article}
> \usepackage{graphicx}
> \begin{document}
> \includegraphics{test-0}
> \end{document}
> ----- test.mp -------
> beginfig(0);
>   draw (0,0)--(1cm,1cm);
>   label.lft("Test", (0,0));
> endfig;
> end
> ----------------------
> 
> The error didn't occur with the supp-pdf.tex from context 2007.09.28.
> 
> I checked the two supp-pdf.tex codes and there are quite a lot of
> differences. Is this a know problem and how should it be fixed?
> 
> Thanks a lot, all the best, and merry christmas
> 
> Norbert
> 
> -------------------------------------------------------------------------------
> Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
> Debian Developer <preining at debian.org>                         Debian TeX Group
> gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
> -------------------------------------------------------------------------------
> GOOSECRUIVES (pl. n. archaic)
> A pair of wooden trousers worn by poultry-keepers in the Middle Ages.
> 			--- Douglas Adams, The Meaning of Liff


-- 

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Mon Dec 24 18:04:35 2007
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 24 Dec 2007 18:04:35 +0100
Subject: [dev-context] mptopdf ... which one
In-Reply-To: <20071224092159.GC10536@gamma.logic.tuwien.ac.at>
References: <20071224092159.GC10536@gamma.logic.tuwien.ac.at>
Message-ID: <476FE6A3.1050105@wxs.nl>

Norbert Preining wrote:
> Hi all,
> 
> what should mptopdf be? Either a texexec of mptopdf.pl or a link to
> pdftex and dumping the format for mptopdf? Both are present?

you can generate the format with texexec or else

in my cnf file i have

extra_mem_top.mptopdf    = 1000000
extra_mem_bot.mptopdf    = 1000000

because graphics can be come large. I must admit that i don't know what 
to link to, i suppose the perl script, because this is what users use; 
it can handle wildcards, call mp when a mp file is given etc, so best 
gamble on mptopdf (texexec somefile.mp also works but that will use 
context)

> Thanks and all the best and merry christmas

Thanks, same to you.

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

