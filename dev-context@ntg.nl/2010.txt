From buerschaper at mytum.de  Sat Feb  6 21:46:03 2010
From: buerschaper at mytum.de (Oliver Buerschaper)
Date: Sat, 6 Feb 2010 21:46:03 +0100
Subject: [dev-context] bibtex not finding style files
Message-ID: <B1E7BD51-BEC7-4C3E-ACB4-C1ABB381D89C@mytum.de>

Hi all,

does anyone have a quick suggestion on why bibtex refuses to find cont-no.bst and the other style files?

I do have BSTINPUTS (and BIBINPUTS) set to

BIBINPUTS = .;$TEXMF/bibtex/bib//
BSTINPUTS = .;$TEXMF/bibtex/bst//

which should be fine for the minimals. I can also locate the style files with luatools although that might not affect bibtex at all.

So... compiling the following tex file

---
\setupbibtex
    [database=bib-0005.bib]


\starttext

Default citation style: \cite[Kitaev:2003]

\completepublications

\stoptext
---

with MkIV produces an empty .bbl file and the .blg file says

---
This is BibTeX, Version 0.99c (TeX Live 2009)
The top-level auxiliary file: bib-0005.aux
I couldn't open style file cont-no.bst
---line 2 of file bib-0005.aux
 : \bibstyle{cont-no
 :                  }
I'm skipping whatever remains of this command
I found no style file---while reading file bib-0005.aux
---

This is a complete mystery to me :-(

Best,
Oliver

From taco at elvenkind.com  Sun Feb  7 10:06:14 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 07 Feb 2010 10:06:14 +0100
Subject: [dev-context] bibtex not finding style files
In-Reply-To: <B1E7BD51-BEC7-4C3E-ACB4-C1ABB381D89C@mytum.de>
References: <B1E7BD51-BEC7-4C3E-ACB4-C1ABB381D89C@mytum.de>
Message-ID: <4B6E8286.5060407@elvenkind.com>

Oliver Buerschaper wrote:
> Hi all,
> 
> does anyone have a quick suggestion on why bibtex refuses to find cont-no.bst and the other style files?
> 
> I do have BSTINPUTS (and BIBINPUTS) set to
> 
> BIBINPUTS = .;$TEXMF/bibtex/bib//
> BSTINPUTS = .;$TEXMF/bibtex/bst//
> 
> which should be fine for the minimals. I can also locate the style files with luatools although that might not affect bibtex at all.

No, it doesn't. bibtex uses kpathsea, so if you want to figure out
why it fails, do something like this:

   kpsewhich --debug=2 cont-no.bst

Best wishes,
Taco


From oliver.buerschaper at mpq.mpg.de  Sun Feb  7 15:51:15 2010
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Sun, 7 Feb 2010 15:51:15 +0100
Subject: [dev-context] bibtex not finding style files
In-Reply-To: <4B6E8286.5060407@elvenkind.com>
References: <B1E7BD51-BEC7-4C3E-ACB4-C1ABB381D89C@mytum.de>
	<4B6E8286.5060407@elvenkind.com>
Message-ID: <0ED0D569-7080-4F15-9525-C965E967AF6F@mpq.mpg.de>

> No, it doesn't. bibtex uses kpathsea, so if you want to figure out
> why it fails, do something like this:
> 
>  kpsewhich --debug=2 cont-no.bst

Ah, nice hint! It turns out kpathsea can NOT find the files, either. Will investigate?

Oliver

From oliver.buerschaper at mpq.mpg.de  Mon Feb  8 12:32:55 2010
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Mon, 8 Feb 2010 12:32:55 +0100
Subject: [dev-context] bibtex not finding style files
In-Reply-To: <0ED0D569-7080-4F15-9525-C965E967AF6F@mpq.mpg.de>
References: <B1E7BD51-BEC7-4C3E-ACB4-C1ABB381D89C@mytum.de>
	<4B6E8286.5060407@elvenkind.com>
	<0ED0D569-7080-4F15-9525-C965E967AF6F@mpq.mpg.de>
Message-ID: <00CB074B-8B4E-49A6-ACF3-97816F543760@mpq.mpg.de>

> Ah, nice hint! It turns out kpathsea can NOT find the files, either. Will investigate?

Problem solved. The installer package did not run mktexlsr.

By the way, can you guys think of any other programs (besides bibtex) in a pure MkIV environment that still need kpathsea?

Oliver

From trueflyingsheep at googlemail.com  Thu Feb 11 02:49:14 2010
From: trueflyingsheep at googlemail.com (Philipp A.)
Date: Thu, 11 Feb 2010 02:49:14 +0100
Subject: [dev-context] unicode-math
Message-ID: <83efb8a51002101749u3b8527aey6b562d4a10911059@mail.gmail.com>

hi,
context in combination with luatex is quite the way to go for me, but i have
one thing that i would love to see inside context:
unicode-math<http://github.com/wspr/unicode-math>!
the guys there are making a good job of mapping tons of unicode sequences to
latex commands, so we should really profit from this project.

is it possible to integrate it into context or to create a package for this
purpose?
i would love to write $y = x? ? 2? ? y ? ?{? ? 5}$, while still being able
to write $y = x^2 \pm 2\mu \Rightarrow y \neq \frac{? \over 5}$ or any
combination of the two.

i would too love to participate in a project making this possible, but i
don?t know how to start coding (i could only write a preprocessor in python
doing this, but that would be rather a workaround than the true thing.)

thanks,
phil

PS: the ? i used is a ?fraction slash?, not a simple solidus, which of
course would still be rendered as solidus.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20100211/7c3dd490/attachment.html>

From taco at elvenkind.com  Thu Feb 11 08:22:08 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 11 Feb 2010 08:22:08 +0100
Subject: [dev-context] unicode-math
In-Reply-To: <83efb8a51002101749u3b8527aey6b562d4a10911059@mail.gmail.com>
References: <83efb8a51002101749u3b8527aey6b562d4a10911059@mail.gmail.com>
Message-ID: <4B73B020.4070209@elvenkind.com>

Philipp A. wrote:
> hi,
> context in combination with luatex is quite the way to go for me, but i have
> one thing that i would love to see inside context:
> unicode-math<http://github.com/wspr/unicode-math>!
> the guys there are making a good job of mapping tons of unicode sequences to
> latex commands, so we should really profit from this project.
> 
> is it possible to integrate it into context or to create a package for this
> purpose?
> i would love to write $y = x? ? 2? ? y ? ?{? ? 5}$, while still being able
> to write $y = x^2 \pm 2\mu \Rightarrow y \neq \frac{? \over 5}$ or any
> combination of the two.

Most of the tedious work is already there: your test above actually
renders something, because the unicode math characters in context mkiv
are all (or at least almost all) defined to render themselves as math
glyphs.

What is missing is the mapping of the special constructs like

   ?{a?b} -> \frac{a}{b}

so if you can extract a list of those from the unicode-math project,
it would be pretty straightforward to add support for this kind of
input, I think.

Best wishes,
Taco

From pragma at wxs.nl  Thu Feb 11 10:31:48 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 11 Feb 2010 10:31:48 +0100
Subject: [dev-context] unicode-math
In-Reply-To: <83efb8a51002101749u3b8527aey6b562d4a10911059@mail.gmail.com>
References: <83efb8a51002101749u3b8527aey6b562d4a10911059@mail.gmail.com>
Message-ID: <4B73CE84.5000908@wxs.nl>

Hi Philipp

> context in combination with luatex is quite the way to go for me, but i have
> one thing that i would love to see inside context:
> unicode-math<http://github.com/wspr/unicode-math>!
> the guys there are making a good job of mapping tons of unicode sequences to
> latex commands, so we should really profit from this project.

i once took a look at the tables of stix and ams and then decided to 
follow another route

- we collect all info in char-def, also math related info
- we want to be able to support field specific setups (similar to what 
openmath does) and the machinery is mostly there already
- we don't follow latex although we try to be ams math compatible
- support like that is not that much related to \commands (and mapping 
them) as we already support direct mapping etc
- we have a different way of organizing the math symbols and alphabets 
in context (mkii is more traditional)

> is it possible to integrate it into context or to create a package for this
> purpose?
> i would love to write $y = x? ? 2? ? y ? ?{? ? 5}$, while still being able
> to write $y = x^2 \pm 2\mu \Rightarrow y \neq \frac{? \over 5}$ or any
> combination of the two.

sure, but it's unlikely to happen before there is an lmtypewriter font 
that has those shapes so that i can see it on my screen (lm/gyre math) 
.. it's simply too painful to debug and we also need to be able to use 
such symbols in documentation

there are a few problems:

(1) $y = x? ? 2$ -> we had some discussion about remapping the superiors 
and didn't reach a conclusion yet (as it is only a limited set); this is 
not going to happen at the input level but will be done by analysing the 
math list (just as is done with other things), so here it's mostly a 
matter of making a decision

(2) ?{? ? 5}$ -> the / (or \over) is somewhat special ... if / is 
inline, then it's ok but do we want something for display as well

(3) in the above the root is somewhat special as it is the text root 
symbols and if we support that we should also provide escapes to get 
that literal one

(4) at microsoft they came up with an input method that makes sense as 
well so maybe i will implement that one some day

(5) the { } still do grouping but maybe we want ( ) and some automated 
way (as in mathml) to omit them if possible

so, for me math is part of a bigger picture: mathml, alternative input, 
not per se sticking to tex conventions etc

> i would too love to participate in a project making this possible, but i
> don?t know how to start coding (i could only write a preprocessor in python
> doing this, but that would be rather a workaround than the true thing.)

the right way is adding missing info to char-def.lua and that happens 
under tight control (read stepwise as we need to test things); so, if 
you find missing mapping, just collect them and let us know (normally 
aditya does the checking of the math symbols)

so there is not so much coding needed but mostly identification (the 
same is true for symbols that are someplace in fonts but not yet mapped 
in the virtual font mapper) so that's the place to start looking

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From trueflyingsheep at googlemail.com  Thu Feb 11 12:12:50 2010
From: trueflyingsheep at googlemail.com (Philipp A.)
Date: Thu, 11 Feb 2010 12:12:50 +0100
Subject: [dev-context] unicode-math
In-Reply-To: <4B73CE84.5000908@wxs.nl>
References: <83efb8a51002101749u3b8527aey6b562d4a10911059@mail.gmail.com>
	<4B73CE84.5000908@wxs.nl>
Message-ID: <83efb8a51002110312n904a174n60fc457364277c8@mail.gmail.com>

i?m quite excited to find out that most of what i want is already in mkiv!
regarding the problems you mentioned:

   1. the super/subscripts could be interpreted like x???? ? x^{23}_{45} or
   couldn?t they? if you want to do more complex stuff (more than one level of
   super/subscripting), the super/subscripts are only for the last level:
   x^{2?}_{4?} ? x^{2^3}_{4_5}
   2. maybe the use of unicode fractions and sfrac as a fallback would be
   nice for inline math: 4 ? 5 ? ?, 8 ? 9 ? \sfrac89. for display it would
   be {4 \over 5} and {8 \over 9} (maybe i don?t get your point: isn?t \over
   context?s way of doing fractions?)
   3. you mean ?\?? yields ???? of course! it?s like a ?&? or a ?\?, then.
   4. you mean this<http://www.unicode.org/notes/tn28/UTN28-PlainTextMath-v2.pdf>.
   nice thing, worth more than one look! maybe really the direction of the
   future?
   5. the parentheses like you suggested are in the above document, too.

thank you for the nice answer,
phil

PS: with the use of a compose key, the input of math symbols is quite
straightforward: <compose>45 ? ?, <compose>/= ? ?, ?

2010/2/11 Hans Hagen <pragma at wxs.nl>

> Hi Philipp
>
>  context in combination with luatex is quite the way to go for me, but i
>> have
>> one thing that i would love to see inside context:
>> unicode-math<http://github.com/wspr/unicode-math>!
>>
>> the guys there are making a good job of mapping tons of unicode sequences
>> to
>> latex commands, so we should really profit from this project.
>>
>
> i once took a look at the tables of stix and ams and then decided to follow
> another route
>
> - we collect all info in char-def, also math related info
> - we want to be able to support field specific setups (similar to what
> openmath does) and the machinery is mostly there already
> - we don't follow latex although we try to be ams math compatible
> - support like that is not that much related to \commands (and mapping
> them) as we already support direct mapping etc
> - we have a different way of organizing the math symbols and alphabets in
> context (mkii is more traditional)
>
>
>  is it possible to integrate it into context or to create a package for
>> this
>> purpose?
>> i would love to write $y = x? ? 2? ? y ? ?{? ? 5}$, while still being able
>> to write $y = x^2 \pm 2\mu \Rightarrow y \neq \frac{? \over 5}$ or any
>> combination of the two.
>>
>
> sure, but it's unlikely to happen before there is an lmtypewriter font that
> has those shapes so that i can see it on my screen (lm/gyre math) .. it's
> simply too painful to debug and we also need to be able to use such symbols
> in documentation
>
> there are a few problems:
>
> (1) $y = x? ? 2$ -> we had some discussion about remapping the superiors
> and didn't reach a conclusion yet (as it is only a limited set); this is not
> going to happen at the input level but will be done by analysing the math
> list (just as is done with other things), so here it's mostly a matter of
> making a decision
>
> (2) ?{? ? 5}$ -> the / (or \over) is somewhat special ... if / is inline,
> then it's ok but do we want something for display as well
>
> (3) in the above the root is somewhat special as it is the text root
> symbols and if we support that we should also provide escapes to get that
> literal one
>
> (4) at microsoft they came up with an input method that makes sense as well
> so maybe i will implement that one some day
>
> (5) the { } still do grouping but maybe we want ( ) and some automated way
> (as in mathml) to omit them if possible
>
> so, for me math is part of a bigger picture: mathml, alternative input, not
> per se sticking to tex conventions etc
>
>
>  i would too love to participate in a project making this possible, but i
>> don?t know how to start coding (i could only write a preprocessor in
>> python
>> doing this, but that would be rather a workaround than the true thing.)
>>
>
> the right way is adding missing info to char-def.lua and that happens under
> tight control (read stepwise as we need to test things); so, if you find
> missing mapping, just collect them and let us know (normally aditya does the
> checking of the math symbols)
>
> so there is not so much coding needed but mostly identification (the same
> is true for symbols that are someplace in fonts but not yet mapped in the
> virtual font mapper) so that's the place to start looking
>
> Hans
>
>
> -----------------------------------------------------------------
>                                          Hans Hagen | PRAGMA ADE
>              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
>                                             | www.pragma-pod.nl
> -----------------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20100211/24a1ba99/attachment.html>

From pragma at wxs.nl  Thu Feb 11 12:23:47 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 11 Feb 2010 12:23:47 +0100
Subject: [dev-context] unicode-math
In-Reply-To: <83efb8a51002110312n904a174n60fc457364277c8@mail.gmail.com>
References: <83efb8a51002101749u3b8527aey6b562d4a10911059@mail.gmail.com>	
	<4B73CE84.5000908@wxs.nl>
	<83efb8a51002110312n904a174n60fc457364277c8@mail.gmail.com>
Message-ID: <4B73E8C3.7030600@wxs.nl>

On 11-2-2010 12:12, Philipp A. wrote:
> i?m quite excited to find out that most of what i want is already in mkiv!
> regarding the problems you mentioned:
>
>     1. the super/subscripts could be interpreted like x???? ? x^{23}_{45} or
>     couldn?t they? if you want to do more complex stuff (more than one level of
>     super/subscripting), the super/subscripts are only for the last level:
>     x^{2?}_{4?} ? x^{2^3}_{4_5}

i can look into it ... but it's up to you to provide some test files 
first so that we can determine to what extend we go

>     2. maybe the use of unicode fractions and sfrac as a fallback would be
>     nice for inline math: 4 ? 5 ? ?, 8 ? 9 ? \sfrac89. for display it would
>     be {4 \over 5} and {8 \over 9} (maybe i don?t get your point: isn?t \over
>     context?s way of doing fractions?)

well, we could also support display but we might pose some restrictions

2a / b

vs

2 a/b

>     3. you mean ?\?? yields ???? of course! it?s like a ?&? or a ?\?, then.

indeed, but introducing more commands like \? might not be the way to go 
as we try to get rid of & etc being special (i've even be thinking os 
some special unicode char, maybe a private pair, for $ $ replacement

>     4. you mean this<http://www.unicode.org/notes/tn28/UTN28-PlainTextMath-v2.pdf>.
>     nice thing, worth more than one look! maybe really the direction of the
>     future?

indeed and as with cambria it's microsoft currently leading the way .. 
in my opinion the tex math community lost the lead long ago so we have 
to follow now (stix is a good example ... we could probably easily test 
those fonts in mkiv but no one cares)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From trueflyingsheep at googlemail.com  Thu Feb 11 12:49:52 2010
From: trueflyingsheep at googlemail.com (Philipp A.)
Date: Thu, 11 Feb 2010 12:49:52 +0100
Subject: [dev-context] unicode-math
In-Reply-To: <4B73E8C3.7030600@wxs.nl>
References: <83efb8a51002101749u3b8527aey6b562d4a10911059@mail.gmail.com>
	<4B73CE84.5000908@wxs.nl>
	<83efb8a51002110312n904a174n60fc457364277c8@mail.gmail.com>
	<4B73E8C3.7030600@wxs.nl>
Message-ID: <83efb8a51002110349m5e361cces60ad330da956396c@mail.gmail.com>

2010/2/11 Hans Hagen <pragma at wxs.nl>

> On 11-2-2010 12:12, Philipp A. wrote:
>
>> i?m quite excited to find out that most of what i want is already in mkiv!
>> regarding the problems you mentioned:
>>
>> 1. the super/subscripts could be interpreted like x???? ? x^{23}_{45} or
>> couldn?t they? if you want to do more complex stuff (more than one level of
>> super/subscripting), the super/subscripts are only for the last level:
>> x^{2?}_{4?} ? x^{2^3}_{4_5}
>
>
> i can look into it ... but it's up to you to provide some test files first
> so that we can determine to what extend we go
>

if you want me to provide test files, shall i simply think of complicated
cases and put them togeter between \starttext and \stoptext in a tex(t)file?


>    2. maybe the use of unicode fractions and sfrac as a fallback would be
>>
>>    nice for inline math: 4 ? 5 ? ?, 8 ? 9 ? \sfrac89. for display it would
>>    be {4 \over 5} and {8 \over 9} (maybe i don?t get your point: isn?t
>> \over
>>    context?s way of doing fractions?)
>>
>
> well, we could also support display but we might pose some restrictions
>
> 2a / b
>
> vs
>
> 2 a/b
>

i have no idea how to do the grouping. openoffice avoids the stuff mostly,
but i can?t wrap my mind about the rules. when writing stuff with openoffice
(i seldomly do it), i just avoid braces and fix all display errors
afterwards.

    3. you mean ?\?? yields ???? of course! it?s like a ?&? or a ?\?, then.
>>
>
> indeed, but introducing more commands like \? might not be the way to go as
> we try to get rid of & etc being special (i've even be thinking os some
> special unicode char, maybe a private pair, for $ $ replacement
>

ok, that?s an interesting direction to go. i didn?t try context too hard,
because i write exams in a week and shouldn?t be writing this but rather
learning biochemistry ;)

    4. you mean this<
>> http://www.unicode.org/notes/tn28/UTN28-PlainTextMath-v2.pdf>.
>>
>>    nice thing, worth more than one look! maybe really the direction of the
>>    future?
>>
>
> indeed and as with cambria it's microsoft currently leading the way .. in
> my opinion the tex math community lost the lead long ago so we have to
> follow now (stix is a good example ... we could probably easily test those
> fonts in mkiv but no one cares)
>
> Hans
>

what do you mean with ?no one cares?? no one cares about context or about
stix or about context testing stix?

it?s sad that the inferior approach gained the lead, but we don?t lose our
advantage: we don?t have to make compromises in the layout beause noone
expects a document updating in real time when a word is inserted in the
first paragraph. we are the ones with the fine-grained control over every
aspect of our typesetting and so we won?t be obsoleted by word.

microsoft doesn?t like open source, but everyone owning windows can use
cambria math and since the microsoft document above shows no patented stuff,
we can use that, too, if we like it.

phil
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20100211/b3e7b264/attachment-0001.html>

From pragma at wxs.nl  Thu Feb 11 13:37:12 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 11 Feb 2010 13:37:12 +0100
Subject: [dev-context] unicode-math
In-Reply-To: <83efb8a51002110349m5e361cces60ad330da956396c@mail.gmail.com>
References: <83efb8a51002101749u3b8527aey6b562d4a10911059@mail.gmail.com>	
	<4B73CE84.5000908@wxs.nl>	
	<83efb8a51002110312n904a174n60fc457364277c8@mail.gmail.com>	
	<4B73E8C3.7030600@wxs.nl>
	<83efb8a51002110349m5e361cces60ad330da956396c@mail.gmail.com>
Message-ID: <4B73F9F8.1060502@wxs.nl>

On 11-2-2010 12:49, Philipp A. wrote:
> 2010/2/11 Hans Hagen<pragma at wxs.nl>
>
>> On 11-2-2010 12:12, Philipp A. wrote:
>>
>>> i?m quite excited to find out that most of what i want is already in mkiv!
>>> regarding the problems you mentioned:
>>>
>>> 1. the super/subscripts could be interpreted like x???? ? x^{23}_{45} or
>>> couldn?t they? if you want to do more complex stuff (more than one level of
>>> super/subscripting), the super/subscripts are only for the last level:
>>> x^{2?}_{4?} ? x^{2^3}_{4_5}
>>
>>
>> i can look into it ... but it's up to you to provide some test files first
>> so that we can determine to what extend we go
>>
>
> if you want me to provide test files, shall i simply think of complicated
> cases and put them togeter between \starttext and \stoptext in a tex(t)file?

indeed, and name them umath-001.tex etc

> i have no idea how to do the grouping. openoffice avoids the stuff mostly,
> but i can?t wrap my mind about the rules. when writing stuff with openoffice
> (i seldomly do it), i just avoid braces and fix all display errors
> afterwards.

the problem is always "if i put my cursor here, and insert something 
where am i" (just before or just after entering some mode)

we should only implement robust cases

>> indeed, but introducing more commands like \? might not be the way to go as
>> we try to get rid of&  etc being special (i've even be thinking os some
>> special unicode char, maybe a private pair, for $ $ replacement
>>
>
> ok, that?s an interesting direction to go. i didn?t try context too hard,
> because i write exams in a week and shouldn?t be writing this but rather
> learning biochemistry ;)

well ... in that case ... imagine that you have to typeset Stryer -)

> what do you mean with ?no one cares?? no one cares about context or about
> stix or about context testing stix?

in general ... no beta fonts send out to texies who are operating in 
this fiels, no involvement of the gyre math folks, etc

ok, supporting it is rather trivial i expect especially as they have to 
follow cambria

> it?s sad that the inferior approach gained the lead, but we don?t lose our
> advantage: we don?t have to make compromises in the layout beause noone
> expects a document updating in real time when a word is inserted in the
> first paragraph. we are the ones with the fine-grained control over every
> aspect of our typesetting and so we won?t be obsoleted by word.

sure, and with tex we have full control over all aspects (and i 
definitely don't want context to stick to the frozen tex ways of doing 
math)

> microsoft doesn?t like open source, but everyone owning windows can use
> cambria math and since the microsoft document above shows no patented stuff,
> we can use that, too, if we like it.

indeed ... for luatex (and the gyre math project) cambria is the benchmark

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Thu Feb 11 13:39:01 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 11 Feb 2010 13:39:01 +0100
Subject: [dev-context] unicode-math
In-Reply-To: <4B73F9F8.1060502@wxs.nl>
References: <83efb8a51002101749u3b8527aey6b562d4a10911059@mail.gmail.com>		<4B73CE84.5000908@wxs.nl>		<83efb8a51002110312n904a174n60fc457364277c8@mail.gmail.com>		<4B73E8C3.7030600@wxs.nl>	<83efb8a51002110349m5e361cces60ad330da956396c@mail.gmail.com>
	<4B73F9F8.1060502@wxs.nl>
Message-ID: <4B73FA65.1000504@elvenkind.com>

Hans Hagen wrote:
>> what do you mean with ?no one cares?? no one cares about context or about
>> stix or about context testing stix?
> 
> in general ... no beta fonts send out to texies who are operating in 
> this fiels, no involvement of the gyre math folks, etc
> 
> ok, supporting it is rather trivial i expect especially as they have to 
> follow cambria

Well, we should give them another decade for implementing that.


From oliver.buerschaper at mpq.mpg.de  Thu Feb 11 15:30:31 2010
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Thu, 11 Feb 2010 15:30:31 +0100
Subject: [dev-context] unicode-math
In-Reply-To: <4B73E8C3.7030600@wxs.nl>
References: <83efb8a51002101749u3b8527aey6b562d4a10911059@mail.gmail.com>	
	<4B73CE84.5000908@wxs.nl>
	<83efb8a51002110312n904a174n60fc457364277c8@mail.gmail.com>
	<4B73E8C3.7030600@wxs.nl>
Message-ID: <3DF38F1B-8FD6-4B11-8023-BABF39DFF1C6@mpq.mpg.de>

> indeed and as with cambria it's microsoft currently leading the way .. in my opinion the tex math community lost the lead long ago so we have to follow now (stix is a good example ... we could probably easily test those fonts in mkiv but no one cares)

Sad, but true. TeX needs to catch up.

However, looking at Microsoft's math booklet I find a number of samples rather unsatisfactory. So if the booklet reflects the current state of the art then in my opinion there will still be ample room for improving the typographic quality of math. TeX could jump ahead and fill the innovation gap again.

Oliver

From oliver.buerschaper at mpq.mpg.de  Thu Feb 11 15:35:26 2010
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Thu, 11 Feb 2010 15:35:26 +0100
Subject: [dev-context] unicode-math
In-Reply-To: <4B73F9F8.1060502@wxs.nl>
References: <83efb8a51002101749u3b8527aey6b562d4a10911059@mail.gmail.com>	
	<4B73CE84.5000908@wxs.nl>	
	<83efb8a51002110312n904a174n60fc457364277c8@mail.gmail.com>	
	<4B73E8C3.7030600@wxs.nl>
	<83efb8a51002110349m5e361cces60ad330da956396c@mail.gmail.com>
	<4B73F9F8.1060502@wxs.nl>
Message-ID: <ED88C6F9-A405-403B-956E-969799AF14F8@mpq.mpg.de>

> in general ... no beta fonts send out to texies who are operating in this fiels, no involvement of the gyre math folks, etc

But you did see the fonts at some point already, didn't you?

Oliver

From pragma at wxs.nl  Thu Feb 11 16:15:36 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 11 Feb 2010 16:15:36 +0100
Subject: [dev-context] unicode-math
In-Reply-To: <ED88C6F9-A405-403B-956E-969799AF14F8@mpq.mpg.de>
References: <83efb8a51002101749u3b8527aey6b562d4a10911059@mail.gmail.com>	
	<4B73CE84.5000908@wxs.nl>	
	<83efb8a51002110312n904a174n60fc457364277c8@mail.gmail.com>	
	<4B73E8C3.7030600@wxs.nl>
	<83efb8a51002110349m5e361cces60ad330da956396c@mail.gmail.com>
	<4B73F9F8.1060502@wxs.nl>
	<ED88C6F9-A405-403B-956E-969799AF14F8@mpq.mpg.de>
Message-ID: <4B741F18.2010707@wxs.nl>

On 11-2-2010 15:35, Oliver Buerschaper wrote:
>> in general ... no beta fonts send out to texies who are operating in this fiels, no involvement of the gyre math folks, etc
>
> But you did see the fonts at some point already, didn't you?

i only saw the list of type 1 files and organziation of fonts and 
decided not to waste time on that if eventually opentype would show up

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From khaledhosny at eglug.org  Fri Feb 12 06:19:17 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 12 Feb 2010 07:19:17 +0200
Subject: [dev-context] unicode-math
In-Reply-To: <4B73F9F8.1060502@wxs.nl>
References: <83efb8a51002101749u3b8527aey6b562d4a10911059@mail.gmail.com>
	<4B73CE84.5000908@wxs.nl>
	<83efb8a51002110312n904a174n60fc457364277c8@mail.gmail.com>
	<4B73E8C3.7030600@wxs.nl>
	<83efb8a51002110349m5e361cces60ad330da956396c@mail.gmail.com>
	<4B73F9F8.1060502@wxs.nl>
Message-ID: <20100212051917.GA2647@khaled-laptop>

On Thu, Feb 11, 2010 at 01:37:12PM +0100, Hans Hagen wrote:
> >what do you mean with ?no one cares?? no one cares about context or about
> >stix or about context testing stix?
> 
> in general ... no beta fonts send out to texies who are operating in
> this fiels, no involvement of the gyre math folks, etc
> 
> ok, supporting it is rather trivial i expect especially as they have
> to follow cambria

Well, I'm (secretly) planning for a beta OpenType MATH, STIX based font
the week they release the first version, assuming I'm still alive by
then.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From khaledhosny at eglug.org  Fri Feb 12 19:03:10 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 12 Feb 2010 20:03:10 +0200
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
Message-ID: <20100212180310.GA31800@khaled-laptop>

Is 'opbd' feature supported? According to the spec[1] this feature is
used to define what I think is equivalent to the protrusion values used
for optical alignment of the glyphs. I grepped the sources and there
seem no be special handling of it, I don't have fonts that use this
feature (I didn't look for one) but I'm planning to use it in my fonts
and thought I'd check if ConTeXt support it first.

This Typophile thread[2] might be interesting too.

If fonts are needed I can check for free fonts that implement this, or
prepare a font for testing.

[1] http://www.microsoft.com/typography/OTSPEC/features_ko.htm#opbd
[2] http://typophile.com/node/48738

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From pragma at wxs.nl  Fri Feb 12 19:21:14 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 12 Feb 2010 19:21:14 +0100
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
In-Reply-To: <20100212180310.GA31800@khaled-laptop>
References: <20100212180310.GA31800@khaled-laptop>
Message-ID: <4B759C1A.8080603@wxs.nl>

On 12-2-2010 19:03, Khaled Hosny wrote:
> Is 'opbd' feature supported? According to the spec[1] this feature is
> used to define what I think is equivalent to the protrusion values used
> for optical alignment of the glyphs. I grepped the sources and there
> seem no be special handling of it, I don't have fonts that use this
> feature (I didn't look for one) but I'm planning to use it in my fonts
> and thought I'd check if ConTeXt support it first.
>
> This Typophile thread[2] might be interesting too.
>
> If fonts are needed I can check for free fonts that implement this, or
> prepare a font for testing.
>
> [1] http://www.microsoft.com/typography/OTSPEC/features_ko.htm#opbd
> [2] http://typophile.com/node/48738

Indeed I need a test font in order to see how it can be implemented. If 
there are no fonts we should wonder what the exact spec is. Does 
fontforge support it?

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From khaledhosny at eglug.org  Fri Feb 12 20:20:50 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 12 Feb 2010 21:20:50 +0200
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
In-Reply-To: <4B759C1A.8080603@wxs.nl>
References: <20100212180310.GA31800@khaled-laptop>
 <4B759C1A.8080603@wxs.nl>
Message-ID: <20100212192050.GA32008@khaled-laptop>

On Fri, Feb 12, 2010 at 07:21:14PM +0100, Hans Hagen wrote:
> On 12-2-2010 19:03, Khaled Hosny wrote:
> >Is 'opbd' feature supported? According to the spec[1] this feature is
> >used to define what I think is equivalent to the protrusion values used
> >for optical alignment of the glyphs. I grepped the sources and there
> >seem no be special handling of it, I don't have fonts that use this
> >feature (I didn't look for one) but I'm planning to use it in my fonts
> >and thought I'd check if ConTeXt support it first.
> >
> >This Typophile thread[2] might be interesting too.
> >
> >If fonts are needed I can check for free fonts that implement this, or
> >prepare a font for testing.
> >
> >[1] http://www.microsoft.com/typography/OTSPEC/features_ko.htm#opbd
> >[2] http://typophile.com/node/48738
> 
> Indeed I need a test font in order to see how it can be implemented.
> If there are no fonts we should wonder what the exact spec is. Does
> fontforge support it?

I think fontforge supports it, I'll check existing fonts and if I found
nothing I'll create one for testing; if there is no fonts using it then
we are free to interpret the spec as we will, after all, using our own
fonts in our own system :)

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From khaledhosny at eglug.org  Sat Feb 13 18:32:55 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sat, 13 Feb 2010 19:32:55 +0200
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
In-Reply-To: <4B759C1A.8080603@wxs.nl>
References: <20100212180310.GA31800@khaled-laptop>
 <4B759C1A.8080603@wxs.nl>
Message-ID: <20100213173200.GA3234@khaled-laptop>

On Fri, Feb 12, 2010 at 07:21:14PM +0100, Hans Hagen wrote:
> On 12-2-2010 19:03, Khaled Hosny wrote:
> >Is 'opbd' feature supported? According to the spec[1] this feature is
> >used to define what I think is equivalent to the protrusion values used
> >for optical alignment of the glyphs. I grepped the sources and there
> >seem no be special handling of it, I don't have fonts that use this
> >feature (I didn't look for one) but I'm planning to use it in my fonts
> >and thought I'd check if ConTeXt support it first.
> >
> >This Typophile thread[2] might be interesting too.
> >
> >If fonts are needed I can check for free fonts that implement this, or
> >prepare a font for testing.
> >
> >[1] http://www.microsoft.com/typography/OTSPEC/features_ko.htm#opbd
> >[2] http://typophile.com/node/48738
> 
> Indeed I need a test font in order to see how it can be implemented.
> If there are no fonts we should wonder what the exact spec is. Does
> fontforge support it?

I found that the font "fxlbi.otf" (of libertine fonts) has both 'lfbd' and
'rtbd' (left/right optical bounds) but no 'opbd' feature. Now re-reading
the spec, I don't see what the values stored in 'opbd' is used for as
the application has to consult 'lfbd' or 'rtbd' feature according to the
position of the glyph in the line, I asked on OpenType mailing list but
I don't expect getting an answer (nobody implemented this feature, except
FontForge AFAIK.) My suggestion is to ignore 'opbd' completely and just
use the values from 'lfbd'/'rtbd' directly.

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From pragma at wxs.nl  Sun Feb 14 14:42:30 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 14 Feb 2010 14:42:30 +0100
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
In-Reply-To: <20100213173200.GA3234@khaled-laptop>
References: <20100212180310.GA31800@khaled-laptop> <4B759C1A.8080603@wxs.nl>
	<20100213173200.GA3234@khaled-laptop>
Message-ID: <4B77FDC6.70500@wxs.nl>

On 13-2-2010 18:32, Khaled Hosny wrote:
> On Fri, Feb 12, 2010 at 07:21:14PM +0100, Hans Hagen wrote:
>> On 12-2-2010 19:03, Khaled Hosny wrote:
>>> Is 'opbd' feature supported? According to the spec[1] this feature is
>>> used to define what I think is equivalent to the protrusion values used
>>> for optical alignment of the glyphs. I grepped the sources and there
>>> seem no be special handling of it, I don't have fonts that use this
>>> feature (I didn't look for one) but I'm planning to use it in my fonts
>>> and thought I'd check if ConTeXt support it first.
>>>
>>> This Typophile thread[2] might be interesting too.
>>>
>>> If fonts are needed I can check for free fonts that implement this, or
>>> prepare a font for testing.
>>>
>>> [1] http://www.microsoft.com/typography/OTSPEC/features_ko.htm#opbd
>>> [2] http://typophile.com/node/48738
>>
>> Indeed I need a test font in order to see how it can be implemented.
>> If there are no fonts we should wonder what the exact spec is. Does
>> fontforge support it?
>
> I found that the font "fxlbi.otf" (of libertine fonts) has both 'lfbd' and
> 'rtbd' (left/right optical bounds) but no 'opbd' feature. Now re-reading
> the spec, I don't see what the values stored in 'opbd' is used for as
> the application has to consult 'lfbd' or 'rtbd' feature according to the
> position of the glyph in the line, I asked on OpenType mailing list but
> I don't expect getting an answer (nobody implemented this feature, except
> FontForge AFAIK.) My suggestion is to ignore 'opbd' completely and just
> use the values from 'lfbd'/'rtbd' directly.

but are these [lr]fbd meant for protruding or for italic correction

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From khaledhosny at eglug.org  Sun Feb 14 17:06:55 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sun, 14 Feb 2010 18:06:55 +0200
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
In-Reply-To: <4B77FDC6.70500@wxs.nl>
References: <20100212180310.GA31800@khaled-laptop> <4B759C1A.8080603@wxs.nl>
	<20100213173200.GA3234@khaled-laptop> <4B77FDC6.70500@wxs.nl>
Message-ID: <20100214160655.GC2596@khaled-laptop>

On Sun, Feb 14, 2010 at 02:42:30PM +0100, Hans Hagen wrote:
> On 13-2-2010 18:32, Khaled Hosny wrote:
> >On Fri, Feb 12, 2010 at 07:21:14PM +0100, Hans Hagen wrote:
> >>On 12-2-2010 19:03, Khaled Hosny wrote:
> >>>Is 'opbd' feature supported? According to the spec[1] this feature is
> >>>used to define what I think is equivalent to the protrusion values used
> >>>for optical alignment of the glyphs. I grepped the sources and there
> >>>seem no be special handling of it, I don't have fonts that use this
> >>>feature (I didn't look for one) but I'm planning to use it in my fonts
> >>>and thought I'd check if ConTeXt support it first.
> >>>
> >>>This Typophile thread[2] might be interesting too.
> >>>
> >>>If fonts are needed I can check for free fonts that implement this, or
> >>>prepare a font for testing.
> >>>
> >>>[1] http://www.microsoft.com/typography/OTSPEC/features_ko.htm#opbd
> >>>[2] http://typophile.com/node/48738
> >>
> >>Indeed I need a test font in order to see how it can be implemented.
> >>If there are no fonts we should wonder what the exact spec is. Does
> >>fontforge support it?
> >
> >I found that the font "fxlbi.otf" (of libertine fonts) has both 'lfbd' and
> >'rtbd' (left/right optical bounds) but no 'opbd' feature. Now re-reading
> >the spec, I don't see what the values stored in 'opbd' is used for as
> >the application has to consult 'lfbd' or 'rtbd' feature according to the
> >position of the glyph in the line, I asked on OpenType mailing list but
> >I don't expect getting an answer (nobody implemented this feature, except
> >FontForge AFAIK.) My suggestion is to ignore 'opbd' completely and just
> >use the values from 'lfbd'/'rtbd' directly.
> 
> but are these [lr]fbd meant for protruding or for italic correction

They are meant for protruding, and per the spec should be applied
only at the start/end of line.

http://www.microsoft.com/typography/OTSPEC/features_ko.htm#lfbd
http://www.microsoft.com/typography/OTSPEC/features_pt.htm#rtbd


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From j.hecke at seh.de  Sun Feb 14 22:56:21 2010
From: j.hecke at seh.de (=?iso-8859-1?Q?J=F6rg_Hecke?=)
Date: Sun, 14 Feb 2010 22:56:21 +0100
Subject: [dev-context]  t-letter/resume package
In-Reply-To: <9691437A-B9F8-44D2-AC5A-B608E9BD7917@gmail.com>
References: <mailman.1.1250157602.6800.dev-context@ntg.nl>
	<C795C312-9E77-47EA-B5E6-B416ECBEBE79@seh.de>
	<C279C687-17DC-43DA-8ED9-FC4449CEBF98@mpq.mpg.de>
	<8F04C441-57F3-4676-92E9-2649C4C83D4C@seh.de>
	<47E4969C-A209-46EC-B56C-87AC5947437A@mpq.mpg.de>
	<D814981B-BDF4-4E9B-A8AD-99F80A267E54@seh.de>
	<9691437A-B9F8-44D2-AC5A-B608E9BD7917@gmail.com>
Message-ID: <1744757A-5065-406F-A3BD-DFFEE7DC3F32@seh.de>

Hi Wolfgang, 

I am trying to use your t-letter module. Thanks to your letter documentation and the examples (letter-examples.zip) from your web side I was able to set up the letter.

But I am failing to use the resume part:-(
I would like to use your classic or casual layout, but I have no idea how to use them. 

An excerpt from your file "correspondence-resume-examples.tex":

%---begin resume.tex---
\usemodule[resume] 
\useresumestyle [classic]

\setresumevalue{image}     {\blackrule[width=25mm,height=25mm]}
\setresumevalue{firstname} {John}
\setresumevalue{familyname}{Doe}
\setresumevalue{title}     {Resum\'e title (optional)}
\setresumevalue{quote}     {Some quote (optional)}
\setresumevalue{street}    {street and number}
\setresumevalue{town}      {postcode city}
\setresumevalue{mobile}    {mobile (optional)}
\setresumevalue{phone}     {phone (optional)}
\setresumevalue{fax}       {fax (optional)}
\setresumevalue{email}     {email (optional)}
\setresumevalue{info}      {additional information (optional)}

\startresume
\section{Education}

\cventry{year--year}{Degree}{Institution}{City}{\it Grade}{Description}
\cventry{year--year}{Degree}{Institution}{City}{\it Grade}{Description}

\section{Master thesis}

\cvline{title}{\em Title}
\cvline{supervisors}{Supervisors}
\cvline{description}{\tx Short thesis abstract}
\stopresume
%---end resume.tex---

does not compile at all, which tells me that I do not have a clue how to setup a proper tex frame and how to use it. 

My environment: Context-Mnimals on MacOS 10.6.2 (Snow Leopard)
ConTeXt  ver: 2010.01.26 18:39 MKIV  fmt: 2010.1.27  int: english/english on 


Is it possible to get me on the right track to use your module? I must be doing something really stupid, but currently I have no idea what I have to do to get your resume module running. 
Do you have a minimal example perhaps?

Many thanks for your help in advance. 

Best regards

J?rg Hecke



The terminal output is: 

> [22:47][~/Desktop/Lebenslauf] 
> ? context jhresume.tex 
> MTXrun | run 1: luatex --fmt="/Users/jh/context_minimals/2010-01-27/tex/texmf-cache/luatex-cache/context/b1c97208f21e2e812306e4f74f4bfba4/formats/cont-en" --lua="/Users/jh/context_minimals/2010-01-27/tex/texmf-cache/luatex-cache/context/b1c97208f21e2e812306e4f74f4bfba4/formats/cont-en.lui" --backend=pdf "./jhresume.tex"
> This is LuaTeX, Version beta-0.50.0-2009122423
>  \write18 enabled.
> (jhresume.tex
> 
> ConTeXt  ver: 2010.01.26 18:39 MKIV  fmt: 2010.1.27  int: english/english
> 
> system          : cont-new loaded
> (/Users/jh/context_minimals/2010-01-27/tex/texmf-context/tex/context/base/cont-new.tex
> systems         : beware: some patches loaded from cont-new.tex
> (/Users/jh/context_minimals/2010-01-27/tex/texmf-context/tex/context/base/cont-new.mkiv))
> system          : cont-fil loaded
> (/Users/jh/context_minimals/2010-01-27/tex/texmf-context/tex/context/base/cont-fil.tex
> loading         : ConTeXt File Synonyms
> )
> system          : cont-sys.rme loaded
> (/Users/jh/context_minimals/2010-01-27/tex/texmf-context/tex/context/user/cont-sys.rme (/Users/jh/context_minimals/2010-01-27/tex/texmf-context/tex/context/base/type-def.mkiv) (/Users/jh/context_minimals/2010-01-27/tex/texmf-context/tex/context/base/type-lua.tex) (/Users/jh/context_minimals/2010-01-27/tex/texmf-context/tex/context/base/type-tmf.tex (/Users/jh/context_minimals/2010-01-27/tex/texmf-context/tex/context/base/type-tmf.mkiv)) (/Users/jh/context_minimals/2010-01-27/tex/texmf-context/tex/context/base/type-siz.tex (/Users/jh/context_minimals/2010-01-27/tex/texmf-context/tex/context/base/type-siz.mkiv)) (/Users/jh/context_minimals/2010-01-27/tex/texmf-context/tex/context/base/type-otf.tex (/Users/jh/context_minimals/2010-01-27/tex/texmf-context/tex/context/base/type-otf.mkiv)))
> system          : jhresume.top loaded
> (jhresume.top)
> fonts           : preloading latin modern fonts
> bodyfont        : 12pt rm is loaded
> language        : language en is active
> (m-resume.tex)
> system          : module resume not found
> ! Undefined control sequence.
> <recently read> \useresumestyle 
>                                 
> l.2 \useresumestyle
>                     [classic]
> ? 
> 






From schuster.wolfgang at googlemail.com  Sun Feb 14 23:22:19 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Sun, 14 Feb 2010 23:22:19 +0100
Subject: [dev-context] t-letter/resume package
In-Reply-To: <1744757A-5065-406F-A3BD-DFFEE7DC3F32@seh.de>
References: <mailman.1.1250157602.6800.dev-context@ntg.nl>
	<C795C312-9E77-47EA-B5E6-B416ECBEBE79@seh.de>
	<C279C687-17DC-43DA-8ED9-FC4449CEBF98@mpq.mpg.de>
	<8F04C441-57F3-4676-92E9-2649C4C83D4C@seh.de>
	<47E4969C-A209-46EC-B56C-87AC5947437A@mpq.mpg.de>
	<D814981B-BDF4-4E9B-A8AD-99F80A267E54@seh.de>
	<9691437A-B9F8-44D2-AC5A-B608E9BD7917@gmail.com>
	<1744757A-5065-406F-A3BD-DFFEE7DC3F32@seh.de>
Message-ID: <4B78779B.7020608@googlemail.com>

Am 14.02.10 22:56, schrieb J?rg Hecke:
> Hi Wolfgang,
>
> I am trying to use your t-letter module. Thanks to your letter documentation and the examples (letter-examples.zip) from your web side I was able to set up the letter.
>
> But I am failing to use the resume part:-(
> I would like to use your classic or casual layout, but I have no idea how to use them.
>    
I'm sorry but there is something missing in documentation, the resume part
is not really written and the two styles are just included from a older
module of me and you have to load them with

\usemodule[resume]              % load the module
\useresumeinterface[moderncv]   % load the moderncv-interface
\useresumestyle[classic|casual] % load a style

you can also do this with one command

\usemodule[resume][interface=moderncv,style=casual]
> An excerpt from your file "correspondence-resume-examples.tex":
>    
I attached two complete working examples.
> Is it possible to get me on the right track to use your module? I must be doing something really stupid, but currently I have no idea what I have to do to get your resume module running.
> Do you have a minimal example perhaps?
>
> The terminal output is:
>    
>> (m-resume.tex)
>>      
You have a module with the m-resume.tex on your system which is loaded 
instead
of my module, you can now either remove this from the current directory 
or force
ConTeXT to load my module with '\usemodule[t][resume][...]' in your 
document.

Wolfgang

-------------- next part --------------
A non-text attachment was scrubbed...
Name: resumetest-casual.tex
Type: application/x-tex
Size: 2031 bytes
Desc: not available
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20100214/23f23bfd/attachment.tex>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: resumetest-classic.tex
Type: application/x-tex
Size: 2032 bytes
Desc: not available
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20100214/23f23bfd/attachment-0001.tex>

From j.hecke at seh.de  Mon Feb 15 00:35:07 2010
From: j.hecke at seh.de (=?utf-8?Q?J=C3=B6rg_Hecke?=)
Date: Mon, 15 Feb 2010 00:35:07 +0100
Subject: [dev-context] t-letter/resume package
In-Reply-To: <4B78779B.7020608@googlemail.com>
References: <mailman.1.1250157602.6800.dev-context@ntg.nl>
	<C795C312-9E77-47EA-B5E6-B416ECBEBE79@seh.de>
	<C279C687-17DC-43DA-8ED9-FC4449CEBF98@mpq.mpg.de>
	<8F04C441-57F3-4676-92E9-2649C4C83D4C@seh.de>
	<47E4969C-A209-46EC-B56C-87AC5947437A@mpq.mpg.de>
	<D814981B-BDF4-4E9B-A8AD-99F80A267E54@seh.de>
	<9691437A-B9F8-44D2-AC5A-B608E9BD7917@gmail.com>
	<1744757A-5065-406F-A3BD-DFFEE7DC3F32@seh.de>
	<4B78779B.7020608@googlemail.com>
Message-ID: <8BE0F22C-8BD1-44B8-8633-B7C1BC599C5A@seh.de>

Hi Wolfgang, 

Am 14.02.2010 um 23:22 schrieb Wolfgang Schuster:

>> But I am failing to use the resume part:-(
>> I would like to use your classic or casual layout, but I have no idea how to use them.
>>   
> I'm sorry but there is something missing in documentation, the resume part
> is not really written and the two styles are just included from a older
> module of me and you have to load them with
> 
> \usemodule[resume]              % load the module
> \useresumeinterface[moderncv]   % load the moderncv-interface
> \useresumestyle[classic|casual] % load a style
> 
> you can also do this with one command
> 
> \usemodule[resume][interface=moderncv,style=casual]
> You have a module with the m-resume.tex on your system which is loaded instead
> of my module, you can now either remove this from the current directory or force
> ConTeXT to load my module with '\usemodule[t][resume][...]' in your document.


Many thanks for your prompt and brilliant help! Your examples do work right away! 
Will try to use one of your examples. 

Thanks again. 

J?rg



From j.hecke at seh.de  Wed Feb 17 22:57:05 2010
From: j.hecke at seh.de (=?utf-8?Q?J=C3=B6rg_Hecke?=)
Date: Wed, 17 Feb 2010 22:57:05 +0100
Subject: [dev-context] 2 columns itmize  in letter module possible
In-Reply-To: <1744757A-5065-406F-A3BD-DFFEE7DC3F32@seh.de>
References: <mailman.1.1250157602.6800.dev-context@ntg.nl>
	<C795C312-9E77-47EA-B5E6-B416ECBEBE79@seh.de>
	<C279C687-17DC-43DA-8ED9-FC4449CEBF98@mpq.mpg.de>
	<8F04C441-57F3-4676-92E9-2649C4C83D4C@seh.de>
	<47E4969C-A209-46EC-B56C-87AC5947437A@mpq.mpg.de>
	<D814981B-BDF4-4E9B-A8AD-99F80A267E54@seh.de>
	<9691437A-B9F8-44D2-AC5A-B608E9BD7917@gmail.com>
	<1744757A-5065-406F-A3BD-DFFEE7DC3F32@seh.de>
Message-ID: <7984AD3B-4D2F-45BF-A5B3-E73E73A71F8A@seh.de>

Hi Wolfgang, 

Am 14.02.2010 um 22:56 schrieb J?rg Hecke:
> ... I am trying to use your t-letter module. Thanks to your letter documentation and the examples (letter-examples.zip) from your web side I was able to set up the letter.


sorry for bothering you again. 
I am using your letter module, but it seems that I am not able to use a 2 column itemize environment? 

Minimal example: 
---begin itemize_letter.tex---
\usemodule[letter]
\definecolor [resumc] [r=.20, g=.40, b=.65]
\enableregime[utf-8]
% Sprache
\mainlanguage[de]
% Unterst?tzung f?r Farben
\setupcolors[state=start]
% Kopfzeile
\setupletterstyle [head]
[alternative=right, fromrule=top]

\setupletterstyle
  [whitespace=medium,
   bodyfont=sans]

\setupletter
  [alternative=d,
   list={phone,email,date,yourmail,yourref},
   ]

 \setupletter
   [yourref,yourmail,myref,mymail,line,name,room,phone,fax,line,date,email]
   [titlestyle=\tfxx,
    separator=: ]

\setupletter
  [phone=+49 543 210\,4561,
   yourmail=05. Februar 2010,
   yourref=B11r,
   email=hotzen at plotz.com,
   date=\currentdate]

\setupletter
  [fromname=J?rg Hecke,
   fromaddress=Bei mir\\12345 zu Hause]

\setupletter
  [toname=bei Dir,
   toaddress=Herr nicht Hier\\Kr?melstr. 23 \\54321 bei Dir\\Germany]

\startsetups letter:foot \rightaligned{Seite \correspagenumber\ von \numberofcorrespages} \stopsetups

\starttext

\startletter
  [subject=Verteiben der Position \quotation{nicht hier {\bf B11r} }, 
   opening=Sehr geehrter Herr nicht Hier\textcomma, 
   closing=Mit freundlichen Gr??en\crlf\crlf\crlf J?rg Hecke]

\input{tufte}

\startitemize[columns, two]
\item solide wenn nicht noch mehr
\item Emus zu verwalten
\item Gnus verschiffen
\item Herdenentwicklung \& Schafsdesign
\item Wollwaschung
\item Milchverkostung (intern \& extern)
\item Pr?sentationen (intern \& extern)
\item Hundef?hrung
\stopitemize

\dorecurse{3}{\input knuth\par}
\stopletter

\stoptext

---end itemize_letter.tex---

If I replace "\startitemize[columns, two]" with e.g. "\startitemize[packed], everything works fine. 

So, not all itemize features are supported, or am I doing (sigh! again) something terribly wrong?

Thanks for your help or information. 

Best regards

J?rg
-------------- next part --------------
A non-text attachment was scrubbed...
Name: itemize_letter.tex
Type: application/octet-stream
Size: 1568 bytes
Desc: not available
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20100217/feb25d53/attachment.obj>
-------------- next part --------------


-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: itemize_letterlog.txt
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20100217/feb25d53/attachment.txt>
-------------- next part --------------



The output is: 

? context itemize_letter.tex 
MTXrun | run 1: luatex --fmt="/Users/jh/context_minimals/2010-01-27/tex/texmf-cache/luatex-cache/context/b1c97208f21e2e812306e4f74f4bfba4/formats/cont-en" --lua="/Users/jh/context_minimals/2010-01-27/tex/texmf-cache/luatex-cache/context/b1c97208f21e2e812306e4f74f4bfba4/formats/cont-en.lui" --backend=pdf "./itemize_letter.tex"
This is LuaTeX, Version beta-0.50.0-2009122423
 \write18 enabled.
(itemize_letter.tex
ConTeXt  ver: 2010.01.26 18:39 MKIV  fmt: 2010.1.27  int: english/english
.
.
systems         : begin file itemize_letter.tex at line 43
(/Users/jh/context_minimals/2010-01-27/tex/texmf-context/tex/context/sample/tufte.tex)
! Improper \prevdepth.
\beginmulticolumns ...olumndepth {\the \prevdepth 
                                                  }\begingroup \leftskip 1\l...
\complexstartcolumns ...nstrue \beginmulticolumns 
                                                  \fi \fi 
<argument> ...!balance =\v!yes , \c!align =\v!no ]
                                                  \fi \fi 
\firstofoneargument #1->#1
                          
\redostartitemgroup ... \c!align =\v!no ]\fi \fi }
                                                  \ifconditional \fittinglis...
\dostartitemgroup ... {\dodostartitemgroup [#2][]}
                                                  \fi 
...
l.64 \stopletter
                
? 







From schuster.wolfgang at googlemail.com  Wed Feb 17 23:18:15 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Wed, 17 Feb 2010 23:18:15 +0100
Subject: [dev-context] 2 columns itmize  in letter module possible
In-Reply-To: <7984AD3B-4D2F-45BF-A5B3-E73E73A71F8A@seh.de>
References: <mailman.1.1250157602.6800.dev-context@ntg.nl>
	<C795C312-9E77-47EA-B5E6-B416ECBEBE79@seh.de>
	<C279C687-17DC-43DA-8ED9-FC4449CEBF98@mpq.mpg.de>
	<8F04C441-57F3-4676-92E9-2649C4C83D4C@seh.de>
	<47E4969C-A209-46EC-B56C-87AC5947437A@mpq.mpg.de>
	<D814981B-BDF4-4E9B-A8AD-99F80A267E54@seh.de>
	<9691437A-B9F8-44D2-AC5A-B608E9BD7917@gmail.com>
	<1744757A-5065-406F-A3BD-DFFEE7DC3F32@seh.de>
	<7984AD3B-4D2F-45BF-A5B3-E73E73A71F8A@seh.de>
Message-ID: <4B7C6B27.2090408@googlemail.com>

Am 17.02.10 22:57, schrieb J?rg Hecke:
> Hi Wolfgang,
>
> sorry for bothering you again.
> I am using your letter module, but it seems that I am not able to use a 2 column itemize environment?
>    
No idea what?s the problem but as a workaround you can use this:

\startsimplecolumns[n=2]
\startitemize
\item ...
\stopitemize
\stopsimplecolumns
> \startletter
>    [subject=Verteiben der Position \quotation{nicht hier {\bf B11r} },
>     opening=Sehr geehrter Herr nicht Hier\textcomma,
>     closing=Mit freundlichen Gr??en\crlf\crlf\crlf J?rg Hecke]
>    
\setupletterstyle[closing][inbetween={\blank[3*line]}]

\startletter
   [subject={Vertreiben der Position \quotation{nicht hier {\bf B11r}}},
    opening={Sehr geehrter Herr nicht Hier,},
    closing={Mit freundlichen Gr??en},
    signature={J?rg Hecke}]

Wolfgang


From j.hecke at seh.de  Wed Feb 17 23:46:04 2010
From: j.hecke at seh.de (=?utf-8?Q?J=C3=B6rg_Hecke?=)
Date: Wed, 17 Feb 2010 23:46:04 +0100
Subject: [dev-context] 2 columns itmize  in letter module possible
In-Reply-To: <4B7C6B27.2090408@googlemail.com>
References: <mailman.1.1250157602.6800.dev-context@ntg.nl>
	<C795C312-9E77-47EA-B5E6-B416ECBEBE79@seh.de>
	<C279C687-17DC-43DA-8ED9-FC4449CEBF98@mpq.mpg.de>
	<8F04C441-57F3-4676-92E9-2649C4C83D4C@seh.de>
	<47E4969C-A209-46EC-B56C-87AC5947437A@mpq.mpg.de>
	<D814981B-BDF4-4E9B-A8AD-99F80A267E54@seh.de>
	<9691437A-B9F8-44D2-AC5A-B608E9BD7917@gmail.com>
	<1744757A-5065-406F-A3BD-DFFEE7DC3F32@seh.de>
	<7984AD3B-4D2F-45BF-A5B3-E73E73A71F8A@seh.de>
	<4B7C6B27.2090408@googlemail.com>
Message-ID: <2C965632-B9D8-46F4-8CBE-5AAA67A14CE1@seh.de>

Hi Wolfgang, 

many thanks for the brilliant tips! 

Am 17.02.2010 um 23:18 schrieb Wolfgang Schuster:
> 
> \startsimplecolumns[n=2]
> \startitemize
> \item ...
> ...

Thanks. That's a smart workaround!

>> \startletter
>>   [subject=Verteiben der Position \quotation{nicht hier {\bf B11r} },
>>    opening=Sehr geehrter Herr nicht Hier\textcomma,
>>    closing=Mit freundlichen Gr??en\crlf\crlf\crlf J?rg Hecke]
> \setupletterstyle[closing][inbetween={\blank[3*line]}]
> \startletter
>  [subject={Vertreiben der Position \quotation{nicht hier {\bf B11r}}},
>   opening={Sehr geehrter Herr nicht Hier,},
>   closing={Mit freundlichen Gr??en},
>   signature={J?rg Hecke}]

Again: Wow.I did not know this. So many thinks to learn for me. 
I have a really nice nice cv and letter thanks to your help and great module. 

Regards
J?rg






From schuster.wolfgang at googlemail.com  Tue Feb 23 12:59:22 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Tue, 23 Feb 2010 12:59:22 +0100
Subject: [dev-context] 2 columns itmize  in letter module possible
In-Reply-To: <7984AD3B-4D2F-45BF-A5B3-E73E73A71F8A@seh.de>
References: <mailman.1.1250157602.6800.dev-context@ntg.nl>
	<C795C312-9E77-47EA-B5E6-B416ECBEBE79@seh.de>
	<C279C687-17DC-43DA-8ED9-FC4449CEBF98@mpq.mpg.de>
	<8F04C441-57F3-4676-92E9-2649C4C83D4C@seh.de>
	<47E4969C-A209-46EC-B56C-87AC5947437A@mpq.mpg.de>
	<D814981B-BDF4-4E9B-A8AD-99F80A267E54@seh.de>
	<9691437A-B9F8-44D2-AC5A-B608E9BD7917@gmail.com>
	<1744757A-5065-406F-A3BD-DFFEE7DC3F32@seh.de>
	<7984AD3B-4D2F-45BF-A5B3-E73E73A71F8A@seh.de>
Message-ID: <4B83C31A.1040000@googlemail.com>

Am 17.02.10 22:57, schrieb J?rg Hecke:
> Hi Wolfgang,
>
> I am using your letter module, but it seems that I am not able to use a 2 column itemize environment?
>    
Fixed.

Wolfgang


From pragma at wxs.nl  Tue Feb 23 19:08:10 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 23 Feb 2010 19:08:10 +0100
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
In-Reply-To: <20100214160655.GC2596@khaled-laptop>
References: <20100212180310.GA31800@khaled-laptop> <4B759C1A.8080603@wxs.nl>
	<20100213173200.GA3234@khaled-laptop> <4B77FDC6.70500@wxs.nl>
	<20100214160655.GC2596@khaled-laptop>
Message-ID: <4B84198A.8010708@wxs.nl>

On 14-2-2010 17:06, Khaled Hosny wrote:
> On Sun, Feb 14, 2010 at 02:42:30PM +0100, Hans Hagen wrote:
>> On 13-2-2010 18:32, Khaled Hosny wrote:
>>> On Fri, Feb 12, 2010 at 07:21:14PM +0100, Hans Hagen wrote:
>>>> On 12-2-2010 19:03, Khaled Hosny wrote:
>>>>> Is 'opbd' feature supported? According to the spec[1] this feature is
>>>>> used to define what I think is equivalent to the protrusion values used
>>>>> for optical alignment of the glyphs. I grepped the sources and there
>>>>> seem no be special handling of it, I don't have fonts that use this
>>>>> feature (I didn't look for one) but I'm planning to use it in my fonts
>>>>> and thought I'd check if ConTeXt support it first.
>>>>>
>>>>> This Typophile thread[2] might be interesting too.
>>>>>
>>>>> If fonts are needed I can check for free fonts that implement this, or
>>>>> prepare a font for testing.
>>>>>
>>>>> [1] http://www.microsoft.com/typography/OTSPEC/features_ko.htm#opbd
>>>>> [2] http://typophile.com/node/48738
>>>>
>>>> Indeed I need a test font in order to see how it can be implemented.
>>>> If there are no fonts we should wonder what the exact spec is. Does
>>>> fontforge support it?
>>>
>>> I found that the font "fxlbi.otf" (of libertine fonts) has both 'lfbd' and
>>> 'rtbd' (left/right optical bounds) but no 'opbd' feature. Now re-reading
>>> the spec, I don't see what the values stored in 'opbd' is used for as
>>> the application has to consult 'lfbd' or 'rtbd' feature according to the
>>> position of the glyph in the line, I asked on OpenType mailing list but
>>> I don't expect getting an answer (nobody implemented this feature, except
>>> FontForge AFAIK.) My suggestion is to ignore 'opbd' completely and just
>>> use the values from 'lfbd'/'rtbd' directly.
>>
>> but are these [lr]fbd meant for protruding or for italic correction
>
> They are meant for protruding, and per the spec should be applied
> only at the start/end of line.
>
> http://www.microsoft.com/typography/OTSPEC/features_ko.htm#lfbd
> http://www.microsoft.com/typography/OTSPEC/features_pt.htm#rtbd

well, i decided to take a look at the font but it looks like something 
else ... in that font only digits seem to have such values

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From khaledhosny at eglug.org  Tue Feb 23 19:57:23 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 23 Feb 2010 20:57:23 +0200
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
In-Reply-To: <4B84198A.8010708@wxs.nl>
References: <20100212180310.GA31800@khaled-laptop> <4B759C1A.8080603@wxs.nl>
	<20100213173200.GA3234@khaled-laptop> <4B77FDC6.70500@wxs.nl>
	<20100214160655.GC2596@khaled-laptop> <4B84198A.8010708@wxs.nl>
Message-ID: <20100223185723.GA2157@khaled-laptop>

On Tue, Feb 23, 2010 at 07:08:10PM +0100, Hans Hagen wrote:
> On 14-2-2010 17:06, Khaled Hosny wrote:
> >>>I found that the font "fxlbi.otf" (of libertine fonts) has both 'lfbd' and
> >>>'rtbd' (left/right optical bounds) but no 'opbd' feature. Now re-reading
> >>>the spec, I don't see what the values stored in 'opbd' is used for as
> >>>the application has to consult 'lfbd' or 'rtbd' feature according to the
> >>>position of the glyph in the line, I asked on OpenType mailing list but
> >>>I don't expect getting an answer (nobody implemented this feature, except
> >>>FontForge AFAIK.) My suggestion is to ignore 'opbd' completely and just
> >>>use the values from 'lfbd'/'rtbd' directly.
> >>
> >>but are these [lr]fbd meant for protruding or for italic correction
> >
> >They are meant for protruding, and per the spec should be applied
> >only at the start/end of line.
> >
> >http://www.microsoft.com/typography/OTSPEC/features_ko.htm#lfbd
> >http://www.microsoft.com/typography/OTSPEC/features_pt.htm#rtbd
> 
> well, i decided to take a look at the font but it looks like
> something else ... in that font only digits seem to have such values

I guess because no software is supporting this, it was partially
implemented in the font.

Anyway, existing fonts doesn't really matter; AFAIK, ConTeXt will be the
first typesetting system to support it, so we are free to interpret the
spec the way that makes sense to us.

Having this data in the font is important for Arabic (my main concern)
because it have to be glyph not character based. For example, Heh (?) in
its isolated form would have different protrusion value than its final
form (??), and the only way to do this reliably is to store it in the
font itself.

If a real test suite is needed, I can prepare a special copy of one of
TeX Gyre fonts for this purpose.

Regards,
 Khaled
> 
> Hans
> 
> -----------------------------------------------------------------
>                                           Hans Hagen | PRAGMA ADE
>               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
>                                              | www.pragma-pod.nl
> -----------------------------------------------------------------

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From j.hecke at seh.de  Wed Feb 24 09:55:56 2010
From: j.hecke at seh.de (=?utf-8?Q?J=C3=B6rg_Hecke?=)
Date: Wed, 24 Feb 2010 09:55:56 +0100
Subject: [dev-context] 2 columns itmize  in letter module possible
In-Reply-To: <4B83C31A.1040000@googlemail.com>
References: <mailman.1.1250157602.6800.dev-context@ntg.nl>
	<C795C312-9E77-47EA-B5E6-B416ECBEBE79@seh.de>
	<C279C687-17DC-43DA-8ED9-FC4449CEBF98@mpq.mpg.de>
	<8F04C441-57F3-4676-92E9-2649C4C83D4C@seh.de>
	<47E4969C-A209-46EC-B56C-87AC5947437A@mpq.mpg.de>
	<D814981B-BDF4-4E9B-A8AD-99F80A267E54@seh.de>
	<9691437A-B9F8-44D2-AC5A-B608E9BD7917@gmail.com>
	<1744757A-5065-406F-A3BD-DFFEE7DC3F32@seh.de>
	<7984AD3B-4D2F-45BF-A5B3-E73E73A71F8A@seh.de>
	<4B83C31A.1040000@googlemail.com>
Message-ID: <A8C4F325-4D8C-46C4-8866-B32776A59AB9@seh.de>

Am 23.02.2010 um 12:59 schrieb Wolfgang Schuster:
> 
>> I am using your letter module, but it seems that I am not able to use a 2 column itemize environment?
>>   
> Fixed.

Brilliant. Thanks. So, I have to update to the latest minimals, or download the latest version from contextgarden modules site, right?


J?rg

From khaledhosny at eglug.org  Wed Feb 24 17:31:14 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 24 Feb 2010 18:31:14 +0200
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
In-Reply-To: <20100223185723.GA2157@khaled-laptop>
References: <20100212180310.GA31800@khaled-laptop> <4B759C1A.8080603@wxs.nl>
	<20100213173200.GA3234@khaled-laptop> <4B77FDC6.70500@wxs.nl>
	<20100214160655.GC2596@khaled-laptop> <4B84198A.8010708@wxs.nl>
	<20100223185723.GA2157@khaled-laptop>
Message-ID: <20100224163114.GA6563@khaled-laptop>

On Tue, Feb 23, 2010 at 08:57:23PM +0200, Khaled Hosny wrote:
> If a real test suite is needed, I can prepare a special copy of one of
> TeX Gyre fonts for this purpose.

I went ahead and patched texgyre pagella to implement lfbd/rtbd features
(based on palatino protrusion values from microtype package), attached
the font file and the "dirty" python script used to build it.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: texgyrepagella-regularxx.otf.gz
Type: application/octet-stream
Size: 72506 bytes
Desc: not available
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20100224/db991597/attachment-0001.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ppl.py
Type: text/x-python
Size: 2555 bytes
Desc: not available
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20100224/db991597/attachment-0001.py>

From pragma at wxs.nl  Wed Feb 24 18:26:01 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 24 Feb 2010 18:26:01 +0100
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
In-Reply-To: <20100224163114.GA6563@khaled-laptop>
References: <20100212180310.GA31800@khaled-laptop> <4B759C1A.8080603@wxs.nl>
	<20100213173200.GA3234@khaled-laptop> <4B77FDC6.70500@wxs.nl>
	<20100214160655.GC2596@khaled-laptop> <4B84198A.8010708@wxs.nl>
	<20100223185723.GA2157@khaled-laptop>
	<20100224163114.GA6563@khaled-laptop>
Message-ID: <4B856129.5070101@wxs.nl>

On 24-2-2010 17:31, Khaled Hosny wrote:
> On Tue, Feb 23, 2010 at 08:57:23PM +0200, Khaled Hosny wrote:
>> If a real test suite is needed, I can prepare a special copy of one of
>> TeX Gyre fonts for this purpose.
>
> I went ahead and patched texgyre pagella to implement lfbd/rtbd features
> (based on palatino protrusion values from microtype package), attached
> the font file and the "dirty" python script used to build it.

hm, but who says that those values are the right ones? after thinking a 
bit about protrusion i dediced that it might make more sense to look at 
boundingboxes so i wonder how usefull that feature actually is; it might 
make more sense to misuse it for left/right (also inline) italic correction

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Wed Feb 24 18:28:53 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 24 Feb 2010 18:28:53 +0100
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
In-Reply-To: <20100224163114.GA6563@khaled-laptop>
References: <20100212180310.GA31800@khaled-laptop> <4B759C1A.8080603@wxs.nl>
	<20100213173200.GA3234@khaled-laptop> <4B77FDC6.70500@wxs.nl>
	<20100214160655.GC2596@khaled-laptop> <4B84198A.8010708@wxs.nl>
	<20100223185723.GA2157@khaled-laptop>
	<20100224163114.GA6563@khaled-laptop>
Message-ID: <4B8561D5.2060602@wxs.nl>

On 24-2-2010 17:31, Khaled Hosny wrote:
> On Tue, Feb 23, 2010 at 08:57:23PM +0200, Khaled Hosny wrote:
>> If a real test suite is needed, I can prepare a special copy of one of
>> TeX Gyre fonts for this purpose.
>
> I went ahead and patched texgyre pagella to implement lfbd/rtbd features
> (based on palatino protrusion values from microtype package), attached
> the font file and the "dirty" python script used to build it.

just wondering ... wouldn't it make more sense to do that kind of things 
in fea files? that way there can be variants (not hardcoded)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From khaledhosny at eglug.org  Wed Feb 24 19:16:43 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 24 Feb 2010 20:16:43 +0200
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
In-Reply-To: <4B8561D5.2060602@wxs.nl>
References: <20100212180310.GA31800@khaled-laptop> <4B759C1A.8080603@wxs.nl>
	<20100213173200.GA3234@khaled-laptop> <4B77FDC6.70500@wxs.nl>
	<20100214160655.GC2596@khaled-laptop> <4B84198A.8010708@wxs.nl>
	<20100223185723.GA2157@khaled-laptop>
	<20100224163114.GA6563@khaled-laptop> <4B8561D5.2060602@wxs.nl>
Message-ID: <20100224181643.GA7846@khaled-laptop>

On Wed, Feb 24, 2010 at 06:28:53PM +0100, Hans Hagen wrote:
> On 24-2-2010 17:31, Khaled Hosny wrote:
> >On Tue, Feb 23, 2010 at 08:57:23PM +0200, Khaled Hosny wrote:
> >>If a real test suite is needed, I can prepare a special copy of one of
> >>TeX Gyre fonts for this purpose.
> >
> >I went ahead and patched texgyre pagella to implement lfbd/rtbd features
> >(based on palatino protrusion values from microtype package), attached
> >the font file and the "dirty" python script used to build it.
> 
> just wondering ... wouldn't it make more sense to do that kind of
> things in fea files? that way there can be variants (not hardcoded)

Possible, at the engine it doesn't matter if it is a fea file or
hardcoded; after loading a fea file it is all the same.

Attached a feature file (generated by FF from the previous font, so it
is essentially the same).

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------

lookup RightBounds {
  lookupflag 0;
    pos \exclam <100 0 0 0>;
    pos \percent <100 0 0 0>;
    pos \ampersand <100 0 0 0>;
    pos \parenright <300 0 0 0>;
    pos \asterisk <200 0 0 0>;
    pos \plus <250 0 0 0>;
    pos \comma <500 0 0 0>;
    pos \hyphen <500 0 0 0>;
    pos \period <700 0 0 0>;
    pos \slash <300 0 0 0>;
    pos \one <100 0 0 0>;
    pos \seven <50 0 0 0>;
    pos \colon <500 0 0 0>;
    pos \semicolon <500 0 0 0>;
    pos \question <200 0 0 0>;
    pos \at <50 0 0 0>;
    pos \A <50 0 0 0>;
    pos \K <50 0 0 0>;
    pos \L <50 0 0 0>;
    pos \T <50 0 0 0>;
    pos \V <50 0 0 0>;
    pos \W <50 0 0 0>;
    pos \X <50 0 0 0>;
    pos \Y <50 0 0 0>;
    pos \k <50 0 0 0>;
    pos \p <50 0 0 0>;
    pos \r <50 0 0 0>;
    pos \v <50 0 0 0>;
    pos \w <50 0 0 0>;
    pos \x <50 0 0 0>;
    pos \y <70 0 0 0>;
    pos \asciitilde <250 0 0 0>;
    pos \Agrave <50 0 0 0>;
    pos \Aacute <50 0 0 0>;
    pos \Acircumflex <50 0 0 0>;
    pos \Atilde <50 0 0 0>;
    pos \Adieresis <50 0 0 0>;
    pos \Aring <50 0 0 0>;
    pos \Amacron <50 0 0 0>;
    pos \Abreve <50 0 0 0>;
    pos \Aogonek <50 0 0 0>;
    pos \Kcommaaccent <50 0 0 0>;
    pos \kcommaaccent <50 0 0 0>;
    pos \Lacute <50 0 0 0>;
    pos \Lcommaaccent <50 0 0 0>;
    pos \Lcaron <50 0 0 0>;
    pos \Ldot <50 0 0 0>;
    pos \Lslash <50 0 0 0>;
    pos \racute <50 0 0 0>;
    pos \rcommaaccent <50 0 0 0>;
    pos \rcaron <50 0 0 0>;
    pos \wcircumflex <50 0 0 0>;
    pos \ycircumflex <70 0 0 0>;
    pos \Acaron <50 0 0 0>;
    pos \Aringacute <50 0 0 0>;
    pos \Adblgrave <50 0 0 0>;
    pos \rdblgrave <50 0 0 0>;
    pos \uni021A <50 0 0 0>;
    pos \Alpha <50 0 0 0>;
    pos \Kappa <50 0 0 0>;
    pos \Lambda <50 0 0 0>;
    pos \Tau <50 0 0 0>;
    pos \Ldotbelow <50 0 0 0>;
    pos \Ldotbelowmacron <50 0 0 0>;
    pos \rdotaccent <50 0 0 0>;
    pos \rdotbelow <50 0 0 0>;
    pos \rdotbelowmacron <50 0 0 0>;
    pos \Tdotbelow <50 0 0 0>;
    pos \Tlinebelow <50 0 0 0>;
    pos \wgrave <50 0 0 0>;
    pos \wacute <50 0 0 0>;
    pos \wdieresis <50 0 0 0>;
    pos \Ahookabove <50 0 0 0>;
    pos \Acircumflexacute <50 0 0 0>;
    pos \Acircumflexgrave <50 0 0 0>;
    pos \Acircumflexhookabove <50 0 0 0>;
    pos \Acircumflextilde <50 0 0 0>;
    pos \Acircumflexdotbelow <50 0 0 0>;
    pos \Abreveacute <50 0 0 0>;
    pos \Abrevegrave <50 0 0 0>;
    pos \Abrevehookabove <50 0 0 0>;
    pos \Abrevetilde <50 0 0 0>;
    pos \Abrevedotbelow <50 0 0 0>;
    pos \ygrave <70 0 0 0>;
    pos \ydotbelow <70 0 0 0>;
    pos \yhookabove <70 0 0 0>;
    pos \ytilde <70 0 0 0>;
    pos \endash <300 0 0 0>;
    pos \emdash <200 0 0 0>;
    pos \quoteleft <700 0 0 0>;
    pos \quoteright <700 0 0 0>;
    pos \quotedblleft <400 0 0 0>;
    pos \quotedblright <400 0 0 0>;
    pos \Aogonekacute <50 0 0 0>;
    pos \L_uni0303 <50 0 0 0>;
    pos \T_uni0303 <50 0 0 0>;
    pos \T_uni0308 <50 0 0 0>;
} RightBounds;

lookup LeftBounds {
  lookupflag 0;
    pos \percent <-100 0 -100 0>;
    pos \ampersand <-50 0 -50 0>;
    pos \parenleft <-100 0 -100 0>;
    pos \asterisk <-200 0 -200 0>;
    pos \plus <-250 0 -250 0>;
    pos \hyphen <-400 0 -400 0>;
    pos \slash <-200 0 -200 0>;
    pos \one <-100 0 -100 0>;
    pos \at <-50 0 -50 0>;
    pos \A <-50 0 -50 0>;
    pos \J <-50 0 -50 0>;
    pos \T <-50 0 -50 0>;
    pos \V <-50 0 -50 0>;
    pos \W <-50 0 -50 0>;
    pos \X <-50 0 -50 0>;
    pos \Y <-50 0 -50 0>;
    pos \p <-50 0 -50 0>;
    pos \q <-50 0 -50 0>;
    pos \v <-50 0 -50 0>;
    pos \w <-50 0 -50 0>;
    pos \x <-50 0 -50 0>;
    pos \y <-50 0 -50 0>;
    pos \asciitilde <-200 0 -200 0>;
    pos \Agrave <-50 0 -50 0>;
    pos \Aacute <-50 0 -50 0>;
    pos \Acircumflex <-50 0 -50 0>;
    pos \Atilde <-50 0 -50 0>;
    pos \Adieresis <-50 0 -50 0>;
    pos \Aring <-50 0 -50 0>;
    pos \Amacron <-50 0 -50 0>;
    pos \Abreve <-50 0 -50 0>;
    pos \Aogonek <-50 0 -50 0>;
    pos \Jcircumflex <-50 0 -50 0>;
    pos \wcircumflex <-50 0 -50 0>;
    pos \ycircumflex <-50 0 -50 0>;
    pos \Acaron <-50 0 -50 0>;
    pos \Aringacute <-50 0 -50 0>;
    pos \Adblgrave <-50 0 -50 0>;
    pos \uni021A <-50 0 -50 0>;
    pos \Alpha <-50 0 -50 0>;
    pos \Lambda <-50 0 -50 0>;
    pos \Tau <-50 0 -50 0>;
    pos \Tdotbelow <-50 0 -50 0>;
    pos \Tlinebelow <-50 0 -50 0>;
    pos \wgrave <-50 0 -50 0>;
    pos \wacute <-50 0 -50 0>;
    pos \wdieresis <-50 0 -50 0>;
    pos \Ahookabove <-50 0 -50 0>;
    pos \Acircumflexacute <-50 0 -50 0>;
    pos \Acircumflexgrave <-50 0 -50 0>;
    pos \Acircumflexhookabove <-50 0 -50 0>;
    pos \Acircumflextilde <-50 0 -50 0>;
    pos \Acircumflexdotbelow <-50 0 -50 0>;
    pos \Abreveacute <-50 0 -50 0>;
    pos \Abrevegrave <-50 0 -50 0>;
    pos \Abrevehookabove <-50 0 -50 0>;
    pos \Abrevetilde <-50 0 -50 0>;
    pos \Abrevedotbelow <-50 0 -50 0>;
    pos \ygrave <-50 0 -50 0>;
    pos \ydotbelow <-50 0 -50 0>;
    pos \yhookabove <-50 0 -50 0>;
    pos \ytilde <-50 0 -50 0>;
    pos \endash <-300 0 -300 0>;
    pos \emdash <-200 0 -200 0>;
    pos \quoteleft <-500 0 -500 0>;
    pos \quoteright <-500 0 -500 0>;
    pos \quotedblleft <-300 0 -300 0>;
    pos \quotedblright <-300 0 -300 0>;
    pos \Aogonekacute <-50 0 -50 0>;
    pos \J_uni030C.cap <-50 0 -50 0>;
    pos \T_uni0303 <-50 0 -50 0>;
    pos \T_uni0308 <-50 0 -50 0>;
} LeftBounds;

feature rtbd {

  script DFLT;
     language dflt ;
      lookup RightBounds;

  script grek;
     language dflt ;
      lookup RightBounds;

  script latn;
     language dflt ;
      lookup RightBounds;
     language AZE  exclude_dflt;
      lookup RightBounds;
     language CRT  exclude_dflt;
      lookup RightBounds;
     language MOL  exclude_dflt;
      lookup RightBounds;
     language NLD  exclude_dflt;
      lookup RightBounds;
     language PLK  exclude_dflt;
      lookup RightBounds;
     language ROM  exclude_dflt;
      lookup RightBounds;
     language TRK  exclude_dflt;
      lookup RightBounds;

  script thai;
     language dflt ;
      lookup RightBounds;
} rtbd;

feature lfbd {

  script DFLT;
     language dflt ;
      lookup LeftBounds;

  script grek;
     language dflt ;
      lookup LeftBounds;

  script latn;
     language dflt ;
      lookup LeftBounds;
     language AZE  exclude_dflt;
      lookup LeftBounds;
     language CRT  exclude_dflt;
      lookup LeftBounds;
     language MOL  exclude_dflt;
      lookup LeftBounds;
     language NLD  exclude_dflt;
      lookup LeftBounds;
     language PLK  exclude_dflt;
      lookup LeftBounds;
     language ROM  exclude_dflt;
      lookup LeftBounds;
     language TRK  exclude_dflt;
      lookup LeftBounds;

  script thai;
     language dflt ;
      lookup LeftBounds;
} lfbd;


From khaledhosny at eglug.org  Wed Feb 24 19:22:31 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 24 Feb 2010 20:22:31 +0200
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
In-Reply-To: <4B856129.5070101@wxs.nl>
References: <20100212180310.GA31800@khaled-laptop> <4B759C1A.8080603@wxs.nl>
	<20100213173200.GA3234@khaled-laptop> <4B77FDC6.70500@wxs.nl>
	<20100214160655.GC2596@khaled-laptop> <4B84198A.8010708@wxs.nl>
	<20100223185723.GA2157@khaled-laptop>
	<20100224163114.GA6563@khaled-laptop> <4B856129.5070101@wxs.nl>
Message-ID: <20100224182231.GB7846@khaled-laptop>

On Wed, Feb 24, 2010 at 06:26:01PM +0100, Hans Hagen wrote:
> On 24-2-2010 17:31, Khaled Hosny wrote:
> >On Tue, Feb 23, 2010 at 08:57:23PM +0200, Khaled Hosny wrote:
> >>If a real test suite is needed, I can prepare a special copy of one of
> >>TeX Gyre fonts for this purpose.
> >
> >I went ahead and patched texgyre pagella to implement lfbd/rtbd features
> >(based on palatino protrusion values from microtype package), attached
> >the font file and the "dirty" python script used to build it.
> 
> hm, but who says that those values are the right ones?

Nobody, I just wanted to pick some thing that is sensible for a test.

> after
> thinking a bit about protrusion i dediced that it might make more
> sense to look at boundingboxes so i wonder how usefull that feature
> actually is; it might make more sense to misuse it for left/right
> (also inline) italic correction

May be we can use the opbd feature itself for this "misuse"; since I
have no idea what values stored in it to be used for, so to avoid clash
between italic correction and protrusion values.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From pragma at wxs.nl  Wed Feb 24 19:24:08 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 24 Feb 2010 19:24:08 +0100
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
In-Reply-To: <20100224163114.GA6563@khaled-laptop>
References: <20100212180310.GA31800@khaled-laptop> <4B759C1A.8080603@wxs.nl>
	<20100213173200.GA3234@khaled-laptop> <4B77FDC6.70500@wxs.nl>
	<20100214160655.GC2596@khaled-laptop> <4B84198A.8010708@wxs.nl>
	<20100223185723.GA2157@khaled-laptop>
	<20100224163114.GA6563@khaled-laptop>
Message-ID: <4B856EC8.20001@wxs.nl>

On 24-2-2010 17:31, Khaled Hosny wrote:
> On Tue, Feb 23, 2010 at 08:57:23PM +0200, Khaled Hosny wrote:
>> If a real test suite is needed, I can prepare a special copy of one of
>> TeX Gyre fonts for this purpose.
>
> I went ahead and patched texgyre pagella to implement lfbd/rtbd features
> (based on palatino protrusion values from microtype package), attached
> the font file and the "dirty" python script used to build it.

to get full protrusion i need to multiply by two so i think that it 
makes most sense to use full protrusion for punctuation and hyphens and 
if less is wanted use a factor of 0.5

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------
-------------- next part --------------
A non-text attachment was scrubbed...
Name: protrusion-003.pdf
Type: application/pdf
Size: 10291 bytes
Desc: not available
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20100224/c6630ada/attachment-0001.pdf>

From pragma at wxs.nl  Wed Feb 24 19:43:39 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 24 Feb 2010 19:43:39 +0100
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
In-Reply-To: <20100224182231.GB7846@khaled-laptop>
References: <20100212180310.GA31800@khaled-laptop> <4B759C1A.8080603@wxs.nl>
	<20100213173200.GA3234@khaled-laptop> <4B77FDC6.70500@wxs.nl>
	<20100214160655.GC2596@khaled-laptop> <4B84198A.8010708@wxs.nl>
	<20100223185723.GA2157@khaled-laptop>
	<20100224163114.GA6563@khaled-laptop> <4B856129.5070101@wxs.nl>
	<20100224182231.GB7846@khaled-laptop>
Message-ID: <4B85735B.8070505@wxs.nl>

On 24-2-2010 19:22, Khaled Hosny wrote:
> On Wed, Feb 24, 2010 at 06:26:01PM +0100, Hans Hagen wrote:
>> On 24-2-2010 17:31, Khaled Hosny wrote:
>>> On Tue, Feb 23, 2010 at 08:57:23PM +0200, Khaled Hosny wrote:
>>>> If a real test suite is needed, I can prepare a special copy of one of
>>>> TeX Gyre fonts for this purpose.
>>>
>>> I went ahead and patched texgyre pagella to implement lfbd/rtbd features
>>> (based on palatino protrusion values from microtype package), attached
>>> the font file and the "dirty" python script used to build it.
>>
>> hm, but who says that those values are the right ones?
>
> Nobody, I just wanted to pick some thing that is sensible for a test.
>
>> after
>> thinking a bit about protrusion i dediced that it might make more
>> sense to look at boundingboxes so i wonder how usefull that feature
>> actually is; it might make more sense to misuse it for left/right
>> (also inline) italic correction
>
> May be we can use the opbd feature itself for this "misuse"; since I
> have no idea what values stored in it to be used for, so to avoid clash
> between italic correction and protrusion values.

well, as no one implements it and as it looks like "whever does it first 
in otf sets the standard" it sounds like a valid approach

and indeed it's sort of weird that the spec says that the values for 
opbd are stored in other features

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From khaledhosny at eglug.org  Thu Feb 25 13:51:47 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Thu, 25 Feb 2010 14:51:47 +0200
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
In-Reply-To: <4B856EC8.20001@wxs.nl>
References: <20100212180310.GA31800@khaled-laptop> <4B759C1A.8080603@wxs.nl>
	<20100213173200.GA3234@khaled-laptop> <4B77FDC6.70500@wxs.nl>
	<20100214160655.GC2596@khaled-laptop> <4B84198A.8010708@wxs.nl>
	<20100223185723.GA2157@khaled-laptop>
	<20100224163114.GA6563@khaled-laptop> <4B856EC8.20001@wxs.nl>
Message-ID: <20100225125147.GA5673@khaled-laptop>

On Wed, Feb 24, 2010 at 07:24:08PM +0100, Hans Hagen wrote:
> On 24-2-2010 17:31, Khaled Hosny wrote:
> >On Tue, Feb 23, 2010 at 08:57:23PM +0200, Khaled Hosny wrote:
> >>If a real test suite is needed, I can prepare a special copy of one of
> >>TeX Gyre fonts for this purpose.
> >
> >I went ahead and patched texgyre pagella to implement lfbd/rtbd features
> >(based on palatino protrusion values from microtype package), attached
> >the font file and the "dirty" python script used to build it.
> 
> to get full protrusion i need to multiply by two so i think that it
> makes most sense to use full protrusion for punctuation and hyphens
> and if less is wanted use a factor of 0.5

But most of the time full protrusion isn't needed, right? I think full
protrusion (assuming this is hanging punctuation) can be done in a
generic way; protruding the glyph so that all of its bounding box is in
the margin, and using font stored protrusion values for regular setting.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From pragma at wxs.nl  Thu Feb 25 19:50:23 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 25 Feb 2010 19:50:23 +0100
Subject: [dev-context] OpenType Optical Bounds 'opbd' feature
In-Reply-To: <20100225125147.GA5673@khaled-laptop>
References: <20100212180310.GA31800@khaled-laptop> <4B759C1A.8080603@wxs.nl>
	<20100213173200.GA3234@khaled-laptop> <4B77FDC6.70500@wxs.nl>
	<20100214160655.GC2596@khaled-laptop> <4B84198A.8010708@wxs.nl>
	<20100223185723.GA2157@khaled-laptop>
	<20100224163114.GA6563@khaled-laptop> <4B856EC8.20001@wxs.nl>
	<20100225125147.GA5673@khaled-laptop>
Message-ID: <4B86C66F.4080609@wxs.nl>

On 25-2-2010 13:51, Khaled Hosny wrote:
> On Wed, Feb 24, 2010 at 07:24:08PM +0100, Hans Hagen wrote:
>> On 24-2-2010 17:31, Khaled Hosny wrote:
>>> On Tue, Feb 23, 2010 at 08:57:23PM +0200, Khaled Hosny wrote:
>>>> If a real test suite is needed, I can prepare a special copy of one of
>>>> TeX Gyre fonts for this purpose.
>>>
>>> I went ahead and patched texgyre pagella to implement lfbd/rtbd features
>>> (based on palatino protrusion values from microtype package), attached
>>> the font file and the "dirty" python script used to build it.
>>
>> to get full protrusion i need to multiply by two so i think that it
>> makes most sense to use full protrusion for punctuation and hyphens
>> and if less is wanted use a factor of 0.5
>
> But most of the time full protrusion isn't needed, right? I think full
> protrusion (assuming this is hanging punctuation) can be done in a
> generic way; protruding the glyph so that all of its bounding box is in
> the margin, and using font stored protrusion values for regular setting.

actually, i only use full protrusion (punctuation and hyphens)

subtle protruding (as subtle hz) mostly goes unnoticed as experiments at 
user group meetings long ago have proven

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From patrick at gundla.ch  Thu Mar 11 14:16:12 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu, 11 Mar 2010 14:16:12 +0100
Subject: [dev-context] Versioning system for modules
Message-ID: <106E1B39-974F-4F4F-8EC5-478F2D1DA5C9@gundla.ch>

Hi, esp. Mojca,

what are the requirements for version controlled systems? What are the usecases? It is hard to decide which versioning system to use without knowing who needs it and when.

Thanks!

Patr... (can't type the rest of my name right now, too complicated)


From preining at logic.at  Thu Mar 11 14:20:11 2010
From: preining at logic.at (Norbert Preining)
Date: Thu, 11 Mar 2010 22:20:11 +0900
Subject: [dev-context] Versioning system for modules
In-Reply-To: <106E1B39-974F-4F4F-8EC5-478F2D1DA5C9@gundla.ch>
References: <106E1B39-974F-4F4F-8EC5-478F2D1DA5C9@gundla.ch>
Message-ID: <20100311132011.GM9758@gamma.logic.tuwien.ac.at>

On Do, 11 M?r 2010, Patrick Gundlach wrote:
> what are the requirements for version controlled systems? What are the usecases? It is hard to decide which versioning system to use without knowing who needs it and when.

Is that a question coming out of thin air? I would suggest git.

In fact, I was thinking playing around to move texlive to git. If then
luatex/context/pdftex/whatever switches to git pulling and pushin
would be soo much easier.

If there wouldn't be the difficulty to have increasing revisions numbers
easy to be done ...

> Patr... (can't type the rest of my name right now, too complicated)

Too much Sake? Too much wine? ;-)
Even after some glasses of Sake

???????

?????
------------------------------------------------------------------------
Norbert Preining            preining@{jaist.ac.jp, logic.at, debian.org}
JAIST, Japan            TU Wien, Austria           Debian TeX Task Force
DSA: 0x09C5B094   fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
------------------------------------------------------------------------
SHIFNAL (n.,vb.)
An awkward shuffling walk caused by two or more people in a hurry
accidentally getting into the same segment of revolving door. A
similar effect is achieved by people entering three-legged races
unwisely joined at the neck instead of the ankles.
			--- Douglas Adams, The Meaning of Liff

From patrick at gundla.ch  Thu Mar 11 14:30:44 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu, 11 Mar 2010 14:30:44 +0100
Subject: [dev-context] Versioning system for modules
In-Reply-To: <20100311132011.GM9758@gamma.logic.tuwien.ac.at>
References: <106E1B39-974F-4F4F-8EC5-478F2D1DA5C9@gundla.ch>
	<20100311132011.GM9758@gamma.logic.tuwien.ac.at>
Message-ID: <6565F22C-E51D-4AD1-B3B7-78803659FA11@gundla.ch>


Am 11.03.2010 um 14:20 schrieb Norbert Preining:

> On Do, 11 M?r 2010, Patrick Gundlach wrote:
>> what are the requirements for version controlled systems? What are the usecases? It is hard to decide which versioning system to use without knowing who needs it and when.
> 
> Is that a question coming out of thin air?

No, there is a discussion on the main context mailing list and I don't want to discuss this with a broad audience.

I don't want to answer the question before knowing the exact question. 

> I would suggest git.

Me, too. I use git for almost everything, but it could be that an automatic svn repository via webdav could suffice. That way the users don't have to do anything at all, no installation of a SCM, no commands to learn, etc.

As far as I understand the "problem": we need version controlled modules. Why? Who would go back in time? The module authors? Other users? The minimals-distribution-Mojca? 

What interface do these people need? How often do they need access to the SCM? Should we get rid of the files on the modules section?

Lot's of questions, and I don't know the answer.

>> Patr... (can't type the rest of my name right now, too complicated)
> 
> Too much Sake? Too much wine? ;-)

No, just a bit upset. But I'll calm down.

> Even after some glasses of Sake
> 
> ???????
> 
> ?????

That looks all greek to me :-)

Patrick (<- better now)

From adityam at umich.edu  Thu Mar 11 19:24:57 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Thu, 11 Mar 2010 13:24:57 -0500 (EST)
Subject: [dev-context] Versioning system for modules
In-Reply-To: <6565F22C-E51D-4AD1-B3B7-78803659FA11@gundla.ch>
References: <106E1B39-974F-4F4F-8EC5-478F2D1DA5C9@gundla.ch>
	<20100311132011.GM9758@gamma.logic.tuwien.ac.at>
	<6565F22C-E51D-4AD1-B3B7-78803659FA11@gundla.ch>
Message-ID: <alpine.LNX.2.01.1003111256560.2703@ybpnyubfg.ybpnyqbznva>

On Thu, 11 Mar 2010, Patrick Gundlach wrote:

> Am 11.03.2010 um 14:20 schrieb Norbert Preining:
>
> I don't want to answer the question before knowing the exact question. 
>
> As far as I understand the "problem": we need version controlled 
> modules. Why? Who would go back in time? The module authors? Other 
> users? The minimals-distribution-Mojca?

Actaully, I am not sure. For example, I personally store all (OK, most) of 
my modules on github. Whenever I want to upload something to garden, it is 
usually as easy as

ctxtools --tpmmake module

and upload the zip to contextgarden. As a module writer, I do not want to 
do the last step each time. For me, it will be easier to just create a 
branch "garden" (or something) on my github repo, fill in some details on 
contextgarden, and let something at the server take care of syncing from 
my git repo.

Other authors use mercurial, svn, bazaar, you name it. I do not expect 
garden to support all of these VCs. Actually, there is not too big a 
difference between them, and there are easy ways of going from one VC -> 
svn -> another VC. So, I will be happy if contextgarden just pulls data 
from the appropriate branch of my VC stored at a public hosting site.

> What interface do these people need? How often do they need access to 
> the SCM?

As a context user, I do not care about VC. For installing/uninstalling, 
both minimals and TL work perfectly fine.

As a power user, when something goes wrong, I like to look at the diffs to 
see what changed. There is alreay a git repo for the context files, but, 
IMO, it is horribly broken. The branches are, well not branches but shoots 
grafted on top of each other with frequent pruing and regrafting. But 
that is a discussion for another thread.

> Should we get rid of the files on the modules section?

Personally, I only use the file section for browsing. So, even if the 
files section redirects me to github/bitbucket/whatever, I do not really 
care.

Aditya

From schuster.wolfgang at googlemail.com  Thu Mar 11 20:56:13 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Thu, 11 Mar 2010 20:56:13 +0100
Subject: [dev-context] Versioning system for modules
In-Reply-To: <alpine.LNX.2.01.1003111256560.2703@ybpnyubfg.ybpnyqbznva>
References: <106E1B39-974F-4F4F-8EC5-478F2D1DA5C9@gundla.ch>	<20100311132011.GM9758@gamma.logic.tuwien.ac.at>	<6565F22C-E51D-4AD1-B3B7-78803659FA11@gundla.ch>
	<alpine.LNX.2.01.1003111256560.2703@ybpnyubfg.ybpnyqbznva>
Message-ID: <4B994ADD.8040008@googlemail.com>

Am 11.03.10 19:24, schrieb Aditya Mahajan:
> Actaully, I am not sure. For example, I personally store all (OK, 
> most) of my modules on github. Whenever I want to upload something to 
> garden, it is usually as easy as
>
> ctxtools --tpmmake module
>
> and upload the zip to contextgarden. As a module writer, I do not want 
> to do the last step each time. For me, it will be easier to just 
> create a branch "garden" (or something) on my github repo, fill in 
> some details on contextgarden, and let something at the server take 
> care of syncing from my git repo.
I have a few modules on bitbucket but they are not always up to date and 
i prefer to keep a few modules (e.g. letter) on my system only.

Another point is the module strcuture, you use tpmtools to create a zip 
but this force one to store the files in tex, doc etc. folders while i 
use a flat structure (only two folders files and manual) and create a 
zip with context itself (ctx plus xml file). I have also no interest to 
go back to the tpmtools method.
>> What interface do these people need? How often do they need access to 
>> the SCM?
> As a context user, I do not care about VC. For 
> installing/uninstalling, both minimals and TL work perfectly fine.
Although i use mecurial i don't mind to switch to another system.

Wolfgang



From taco at elvenkind.com  Fri Mar 12 15:44:15 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 12 Mar 2010 15:44:15 +0100
Subject: [dev-context] Luatex 0.51.0 announcement
Message-ID: <4B9A533F.700@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.51.0.

New features:

* Various small manual improvements.
* The backend message "cannot open Type 1 font file for reading"
   now reports which Type1 font it was looking for.
* Fontforge clears some font names at loading time that will be
   refilled in at font generation time, but the fontloader should not
   do that. Patch from Khaled Hosny.
* New synctex code imported from TeXLive.
* luamd5/md5.h is renamed to luamd5/luamd5.h to avoid confusion.
* Embedded mplib is now 1.209.
* Some experimental tweaking of buildpage_filter, see the manual
   for details.
* Luatex now detects kfreebsd (from Alan Braslau)
* The new lua function tex.sp() converts a string to a number
   representing scaled points.
* There is now support for revision numbers in the banner and stats
   library again.
* The command line help and manual documentation page is extended.
* node.hpack() now also accepts "cal_expand_ratio" and "subst_ex_font"
   modifiers.
* node.hpack() and node.vpack() now give back the badness of the box
   as second return value.
* node.copy_list() now allows a second (stop) argument, this stopper
   is not copied.
* new lua functions in lfs: lfs.readlink() and lfs.shortname().
* new lua function tex.tprint() that can combine multiple catcode
   regime prints in one function call.
* new lua sub-table: tex.nest[] (read/write access to the semantic
   nest state).
* New lua functions in kpse: kpse.lookup() and kpse.version(). See
   the manual for more details.
* New lua function tex.shipout().

Bug fixes:

* There problems in the pdf output for Type3 (pk) fonts.
* Fix a bug that allowed bad commandline quoting.
* Fix a bug that sometimes caused crashes when \pdfprotrudechars.
* The build script now exports CONFIG_SHELL to avoid problems with
   /bin/dash.
* The was a bug in the generated /Image /ProcSet.
* status.font_bytes reported the wrong value.
* Lots of compiler warnings are removed (thanks Javier Mugica).
* Patch to fontloader.info() to accept filenames with embedded
   parentheses.
* Fix a \write error with docstrip package.
* Fixed a crash on AdobeMyungjoStd-Medium.otf.
* Fix coco stack overflows, needed for lpeg.
* \pdfcompresslevel wasn't initialized for early immediate objects.
* Fix for slanted fonts when HZ was on (slant angle was multiplied).
* When concatenating content streams, put a space between them.
* Allow pfb lines to end with \r as well as \n (for msam10.pfb).
* Fix the internal string->scaled point conversion in the lua
   interface.
* Memory leaks in the fontloader removed, thanks to patches from
   Elie Roux.
* Fix a crash caused by the combination of coroutines and font.each().

Removed features:

* Support for Type3 .pgc files (nobody used them).


The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

   svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.51.0

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org


Have fun,
Taco


From pragma at wxs.nl  Fri Mar 12 20:05:31 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 12 Mar 2010 20:05:31 +0100
Subject: [dev-context] interlinespace
Message-ID: <4B9A907B.8010509@wxs.nl>

Hi,

I added \defineinterlinespace ... needs a bit of checking

\setupinterlinespace[list]
\setupinterlinespace[assignments]

\defineinterlinespace[defined_name][assignments]
\setupinterlinespace [defined_name][assignments]

\setupinterlinespace[defined_name]

the potential is there to do

\defineinterlinespace[defined_name][another_name][assignments]

as we use the parent mechanism

I hope i didn't break too much.

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Tue Mar 16 21:01:56 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 16 Mar 2010 21:01:56 +0100
Subject: [dev-context] Luatex 0.52.0 announcement
Message-ID: <4B9FE3B4.106@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.52.0.

New features:

* Various small manual improvements.

* A better version of getluatexsvnversion.sh, from Tomek.

* node.copy_list() now allows the second (optional) argument to
   be nil.

* An import of the current state of the texlive repository
   (kpathsea and build system).

Bug fixes:

* An attempt fix for bug #345 (math kerning is not perfect): when the
   current math font is a new math font, check against \catcode <cur_c>
   == 11 to suppress the italic correction, instead of looking at
   the value of space(<cur_f>).

* There is a new <tfmtable> key: 'units_per_em' (defaults to 0).
   This is part of a fix for bug #200 (Problem with CFF fonts having
   em-size other than 1000): there is a special correction to the
   embedded cff font itself and the font scale if the font to be output
   is opentype or type1 in unicode encoding and the 'units_per_em
   differs' from zero.
   <tfmtable>.units_per_em has to be passed back to luatex from
   the lua font loading code for this to work.

* A fix for bug #314 (problem with pk file).

* lua code can no longer change the internal preallocated glue_spec
   nodes (as that resulted in weird spacing bugs). For this, glue_specs
   now have a new field: 'writable'. If that field is false, a copy
   has to be made of the glue_spec instead of doing an assignment
   to it.

* Setting of \textdir inside the output routine could trash output
   on following pages due to a lingering internal variable.

* \pdfthread crashed because the arguments were handled in reverse
   order.

The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

   svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.52.0

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org


Have fun,
Taco


From trebestie at gmail.com  Sat Mar 20 08:59:21 2010
From: trebestie at gmail.com (Diego Depaoli)
Date: Sat, 20 Mar 2010 08:59:21 +0100
Subject: [dev-context] [luatex] Luatex 0.52.0 announcement
In-Reply-To: <4B9FE3B4.106@elvenkind.com>
References: <4B9FE3B4.106@elvenkind.com>
Message-ID: <83e5fb981003200059m5c323657jd50c54f8024eccc3@mail.gmail.com>

2010/3/16 Taco Hoekwater <taco at elvenkind.com>:
> Hi,
>
> I have just uploaded the archives for a new luatex release, 0.52.0.

Sorry Taco for bothering you again.
On my FreeBSD box, configure fails here

if test -z "`${MAKE-make} -v 2>/dev/null | grep GNU`"; then
  if test "x$enable_native_texlive_build" = xno; then
    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: Building TeX
Live may require GNU make" >&5
$as_echo "$as_me: WARNING: Building TeX Live may require GNU make" >&2;}
  else
    as_fn_error "Building TeX Live requires GNU make" "$LINENO" 5
  fi
fi

since ${MAKE-make} is set to make instead of gmake which (co)exists in
my system.
At this moment I've no time to find a better workaround than to skip this test.

Regards

-- 
Diego Depaoli

From schuster.wolfgang at googlemail.com  Sun Mar 21 11:10:28 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Sun, 21 Mar 2010 11:10:28 +0100
Subject: [dev-context] \comparedimension
Message-ID: <4BA5F094.1000109@googlemail.com>

Hi,

one of the \ifdim?s should be \ifdim#1=#2

syst-aux.mkiv|syst-ext.mkii

\def\comparedimension#1#2%
{\chardef\compresult
\ifdim#1<#2%
\zerocount
\else\ifdim#1<#2%
\plusone
\else
\plustwo
\fi\fi}

Wolfgang


From oliver.buerschaper at mpq.mpg.de  Mon Mar 22 03:25:56 2010
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Mon, 22 Mar 2010 10:25:56 +0800
Subject: [dev-context] Cache folder in minimals
Message-ID: <D9C2AA3F-AB03-4167-B229-E3CDF7A8BF3F@mpq.mpg.de>

Hi Mojca,

since a few days ago the minimals appear to rsync the cache folder, too... is this intended?

Oliver
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PGP.sig
Type: application/pgp-signature
Size: 195 bytes
Desc: Signierter Teil der Nachricht
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20100322/f43a2701/attachment.pgp>

From khaledhosny at eglug.org  Tue Mar 23 10:36:05 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 23 Mar 2010 11:36:05 +0200
Subject: [dev-context] How up to date char-def.lua is?
Message-ID: <20100323093524.GA2576@khaled-laptop>

Since Unicode keeps adding new characters and scripts with each release
(and some times altering the properties of existing characters), I was
wondering how up to date char-def.lua is, in particular on which version
of Unicode data was it based and how frequently it is synced with
Unicode (if at all). It would be even nice to have an mtx script to
update the database when needed.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From pragma at wxs.nl  Tue Mar 23 18:46:13 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 23 Mar 2010 18:46:13 +0100
Subject: [dev-context] How up to date char-def.lua is?
In-Reply-To: <20100323093524.GA2576@khaled-laptop>
References: <20100323093524.GA2576@khaled-laptop>
Message-ID: <4BA8FE65.7030504@wxs.nl>

On 23-3-2010 10:36, Khaled Hosny wrote:
> Since Unicode keeps adding new characters and scripts with each release
> (and some times altering the properties of existing characters), I was
> wondering how up to date char-def.lua is, in particular on which version
> of Unicode data was it based and how frequently it is synced with
> Unicode (if at all). It would be even nice to have an mtx script to
> update the database when needed.

I have a bunch of scripts here but as char-def has extra info (and will 
have more depending on mkiv needs) much is done manually.

also, syncing with other databases always has to be checked esp when it 
has can have consequences for text/math rendering and presets.

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Sun Apr  4 09:16:28 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 04 Apr 2010 09:16:28 +0200
Subject: [dev-context] Luatex 0.60.0 announcement
Message-ID: <4BB83CCC.6060203@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.60.0.

This release starts a new chain of stable beta's, and will be the
version included in this year's TeXLive.

New features:

* os.name now knows about CYGWIN (from Elie Roux)

* Internal handling of direction specifiers is faster now.

* Each glyph node now has three new virtual read-only fields:
   width, height, and depth (values in scaled points, of course)

* There are new functions node.protrusion_skipable() and
   tex.badness() (useful for paragraph breaking in lua)

* Also new: tex.linebreak(). See the manual for details.

* All lua errors now report file and line numbers to aid in
   debugging.

* Import of metapost 1.211.

* pdf.pdfcatalog will be replaced soon by the new pdf.catalog
   pdf.pdfinfo will be replaced soon by the new pdf.info
   pdf.pdfnames will be replaced soon by the new pdf.names
   pdf.pdftrailer will be replaced soon by the new pdf.trailer

* pdf.pdfmapfile and pdf.pdfmapline are replaced by the new
   pdf.mapfile() and pdf.mapline() functions. (a function interface
   fits these parameters better because they never return anything).

* New read-write lua variables: pdf.pageattributes, pdf.pageresources,
   pdf.pagesresources

* getluatexsvnversion.sh now correctly detects git-svn and still
   manages to find a valid SVN revision number (from Patrick Gundlach)

* Many of the source files have been converted to CWEB.

Bug fixes:

* GNU libtool is now used to solve the various technical issues with
   dynamic loading of lua modules.

* Error detection in scan_integer_part was wrong due to missing
   initialization of OK_so_far (spotted by Javier Mugica)

* Synctex was broken in 0.51-0.52.

* \lastlinefit was broken since ... well, nearly forever.

* Reading of binary files with length zero was broken.

* Trapping of unitialized rules (this was for sloppily created
   rule nodes from lua)

* pdf.immediateobj('streamfile') was broken on 64-bit platforms.

* tex.linebreak did not take the given left and right skip, but
   instead used the current TeX-side values (bug #356).

* the found 'MAKE' command in build.sh is now fed into configure to fix
   problems with that not finding GNU make even when it is actually
   installed.

* dofile(<nil>) and loadfile(<nil>) in batch mode now give an
   error and continue instead of pointlessly waiting for user input.

* Reverted commit #3417 (the buildpage experiment) as it causes bad
   things to happen when items are waiting during page breaks.

* Overrule loaders[4] in --safer mode, make require() behave
   closer to normal lua 5.1, and add some nicer error messages
   (based on an email and patches from Manuel Pegourie-Gonnard)

* Added an extra sanity check for GDEF loading in luafontloader,
   based on a crash caused by Linux' AkaashNormal.ttf.

The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

   svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.60.0

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org


Have fun,
Taco



From khaledhosny at eglug.org  Mon Apr  5 05:57:59 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 5 Apr 2010 05:57:59 +0200
Subject: [dev-context] [Dev-luatex] Luatex 0.60.0 announcement
In-Reply-To: <4BB83CCC.6060203@elvenkind.com>
References: <4BB83CCC.6060203@elvenkind.com>
Message-ID: <20100405035759.GA32733@khaled-laptop>

On Sun, Apr 04, 2010 at 09:16:28AM +0200, Taco Hoekwater wrote:
> * getluatexsvnversion.sh now correctly detects git-svn and still
>   manages to find a valid SVN revision number (from Patrick Gundlach)

I don't have ".git/refs/remotes/git-svn" here, so the check fails. The
attached patch makes it work for me too.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: git-svn.diff
Type: text/x-diff
Size: 765 bytes
Desc: not available
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20100405/b379e151/attachment.diff>

From mpg at elzevir.fr  Sun Apr  4 22:45:46 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Sun, 04 Apr 2010 22:45:46 +0200
Subject: [dev-context] [luatex] Luatex 0.60.0 announcement
In-Reply-To: <4BB83CCC.6060203@elvenkind.com>
References: <4BB83CCC.6060203@elvenkind.com>
Message-ID: <4BB8FA7A.3040009@elzevir.fr>

Taco Hoekwater a ?crit :
> I have just uploaded the archives for a new luatex release, 0.60.0.
> 
> This release starts a new chain of stable beta's, and will be the
> version included in this year's TeXLive.
> 
Great news! Many thanks.

Sorry for nitpicking, but:

> * There are new functions node.protrusion_skipable() and

Should it be "skippable", or is it intentional? I'm not claiming any
understanding of English vs American or whatever subtleties, so I may be
completely mistaken, but Merriam-Webster only know about skippable.

Thanks again for this new release,
Manuel.

From taco at elvenkind.com  Mon Apr  5 08:28:02 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 05 Apr 2010 08:28:02 +0200
Subject: [dev-context] [luatex] [Dev-luatex] Luatex 0.60.0 announcement
In-Reply-To: <20100405035759.GA32733@khaled-laptop>
References: <4BB83CCC.6060203@elvenkind.com>
	<20100405035759.GA32733@khaled-laptop>
Message-ID: <4BB982F2.7040502@elvenkind.com>

Khaled Hosny wrote:
> On Sun, Apr 04, 2010 at 09:16:28AM +0200, Taco Hoekwater wrote:
>> * getluatexsvnversion.sh now correctly detects git-svn and still
>>   manages to find a valid SVN revision number (from Patrick Gundlach)
> 
> I don't have ".git/refs/remotes/git-svn" here, so the check fails. The
> attached patch makes it work for me too.

Applied.

Best wishes,
Taco

From taco at elvenkind.com  Mon Apr  5 08:29:37 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 05 Apr 2010 08:29:37 +0200
Subject: [dev-context] [luatex] Luatex 0.60.0 announcement
In-Reply-To: <4BB8FA7A.3040009@elzevir.fr>
References: <4BB83CCC.6060203@elvenkind.com> <4BB8FA7A.3040009@elzevir.fr>
Message-ID: <4BB98351.3060509@elvenkind.com>

Manuel P?gouri?-Gonnard wrote:
> 
> Sorry for nitpicking, but:
> 
>> * There are new functions node.protrusion_skipable() and
> 
> Should it be "skippable", or is it intentional? I'm not claiming any
> understanding of English vs American or whatever subtleties, so I may be
> completely mistaken, but Merriam-Webster only know about skippable.

No problem, I'll change that and keep the old one around for a while
(my spellchecker knows neither word, btw).

Best wishes,
Taco

From taco at elvenkind.com  Wed Apr 28 10:04:19 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 28 Apr 2010 10:04:19 +0200
Subject: [dev-context] Luatex 0.60.1 announcement
Message-ID: <4BD7EC03.7020400@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.60.1,
a bugfix release for the 0.60 branch.

New features:

* renamed node.skipable() to node.skippable().

* More git discovery patches in getluatexsvnversion.sh.

* Added --warnings=[no|min|yes|max|all] option to build.sh.

* While cross-compiling, build.sh now adds an extra linker switch
   to allow win32 exes to use 3G instead of 2G of virtual memory.

Bugfixes:

* os.exec() & os.spawn() handled the environment differently from
   os.execute() on Win32 (patch from Tomek)

* Builds with --enable-ipc were broken.

* Assigning and acquiring \fontdimen s from TeX code was broken.

* An initial attempt at fixing bug #372 (\predisplaydirection).

* An attempt to fix \eqno/\leqno placements in mixed direction
   \mathdir/\textdir.

* Our local xpdf patch is reverted, it is not needed any more.

* The os.selfdir variable was not documented, as well as broken
   on WIN32.

* Fix "\input tikz hello \bye" bug, plus fix one sign error.

* Fix handling of lua script files with UNC names.



The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

   svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.60.1

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org


Have fun,
Taco


From ishamid at colostate.edu  Thu May  6 17:50:37 2010
From: ishamid at colostate.edu (=?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMgINiz2YXYp9mI2Yog2K0=?= =?utf-8?B?2KfZhdiv?=)
Date: Thu, 06 May 2010 10:50:37 -0500
Subject: [dev-context] audit of commands
Message-ID: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>



Dear gangsters,

I'm interested in an audit of all current mid-to-high-level mkiv commands,  
including experimental or undocumented ones. I'm trying to come up with,  
as much as possible, a set of context commands which is

mutually exclusive

jointly exhaustive.

By 'mutually exlcusive' in this context I mean that I want to identify,  
for redundant commands, the deprecated commands and use only the current.  
No point teaching old methods.

By 'jointly exhaustive' I mean that i don't want to leave anything out, at  
least not yet. Some of, eg, the bidi and otf control is undocumented, and  
I can dig those up. OTOH there are lots of other areas where there may be  
some commands of interest that only get brought up on the list  
occasionally...

by mid-level I mean commands like

\define

or other user-friendly non-plain commands that may be used to create mkiv  
macros etc.

Aside from core developers Hans and Taco: Luigi, Wolfgang and Mojca seem  
to have extensive knowledge of the internals... any ideas how we can do  
this in an efficient manner?

My idea is to organize this list in interesting ways for pedagogical  
purposes, for the current book project.

Again, ONLY MKIV is under consideration; as far as this book project is  
concerned, only mkiv exists ;-)

Any help is greatly appreciated!

Peace
Idris
-- 
Professor Idris Samawi Hamid, Editor-in-Chief
International Journal of Shi`i Studies
Department of Philosophy
Colorado State University
Fort Collins, CO 80523


From luigi.scarso at gmail.com  Fri May  7 09:41:09 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 7 May 2010 09:41:09 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
Message-ID: <y2tfe8d59da1005070041ue5763581zfc00f9f97014186a@mail.gmail.com>

2010/5/6 Idris Samawi Hamid ?????  ????? ???? <ishamid at colostate.edu>:
>
>
> Dear gangsters,
>
> I'm interested in an audit of all current mid-to-high-level mkiv commands,
> including experimental or undocumented ones. I'm trying to come up with, as
> much as possible, a set of context commands which is
>
> mutually exclusive
>
> jointly exhaustive.
>
> By 'mutually exlcusive' in this context I mean that I want to identify, for
> redundant commands, the deprecated commands and use only the current. No
> point teaching old methods.
>
> By 'jointly exhaustive' I mean that i don't want to leave anything out, at
> least not yet. Some of, eg, the bidi and otf control is undocumented, and I
> can dig those up. OTOH there are lots of other areas where there may be some
> commands of interest that only get brought up on the list occasionally...
>
> by mid-level I mean commands like
>
> \define
>
> or other user-friendly non-plain commands that may be used to create mkiv
> macros etc.
>
> Aside from core developers Hans and Taco: Luigi, Wolfgang and Mojca seem to
> have extensive knowledge of the internals... any ideas how we can do this in
> an efficient manner?
>
> My idea is to organize this list in interesting ways for pedagogical
> purposes, for the current book project.
>
> Again, ONLY MKIV is under consideration; as far as this book project is
> concerned, only mkiv exists ;-)
>
> Any help is greatly appreciated!
I remember a "tally" variable in pdftex that governs the lenght of
line used in trace commands
Starting from it, and modifying the pdftew.web, I've produced the
lists of all macros and their meaning simple put something like
\tracingmacros3
etc at the beginning of context.tex and then rebuild the format.
I can revisit it now for luatex:
this should still work for TeX macros but  not for Lua functions, I believe.




-- 
luigi

From pragma at wxs.nl  Fri May  7 09:56:17 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 07 May 2010 09:56:17 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <y2tfe8d59da1005070041ue5763581zfc00f9f97014186a@mail.gmail.com>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<y2tfe8d59da1005070041ue5763581zfc00f9f97014186a@mail.gmail.com>
Message-ID: <4BE3C7A1.2000507@wxs.nl>

On 7-5-2010 9:41, luigi scarso wrote:

> Starting from it, and modifying the pdftew.web, I've produced the
> lists of all macros and their meaning simple put something like
> \tracingmacros3
> etc at the beginning of context.tex and then rebuild the format.
> I can revisit it now for luatex:
> this should still work for TeX macros but  not for Lua functions, I believe.

already there for a while:

context --dumphash yourfile
context --dumpdelta yourfile

of course undocumented apart from context --help --expert

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From luigi.scarso at gmail.com  Fri May  7 10:07:26 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 7 May 2010 10:07:26 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <4BE3C7A1.2000507@wxs.nl>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<y2tfe8d59da1005070041ue5763581zfc00f9f97014186a@mail.gmail.com>
	<4BE3C7A1.2000507@wxs.nl>
Message-ID: <i2mfe8d59da1005070107r98284d61lf913dadf81c320c@mail.gmail.com>

2010/5/7 Hans Hagen <pragma at wxs.nl>:
> On 7-5-2010 9:41, luigi scarso wrote:
>
>> Starting from it, and modifying the pdftew.web, I've produced the
>> lists of all macros and their meaning simple put something like
>> \tracingmacros3
>> etc at the beginning of context.tex and then rebuild the format.
>> I can revisit it now for luatex:
>> this should still work for TeX macros but ?not for Lua functions, I
>> believe.
>
> already there for a while:
>
> context --dumphash yourfile
> context --dumpdelta yourfile
>
> of course undocumented apart from context --help --expert
yes, but what I meant was something like
\tracingall
\starttext

\stoptext
and then
parsing the log extracting
macro & their meaning
Not for this trivial example, but for context.tex


-- 
luigi

From pragma at wxs.nl  Fri May  7 10:24:49 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 07 May 2010 10:24:49 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <i2mfe8d59da1005070107r98284d61lf913dadf81c320c@mail.gmail.com>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>	
	<y2tfe8d59da1005070041ue5763581zfc00f9f97014186a@mail.gmail.com>	
	<4BE3C7A1.2000507@wxs.nl>
	<i2mfe8d59da1005070107r98284d61lf913dadf81c320c@mail.gmail.com>
Message-ID: <4BE3CE51.1010704@wxs.nl>

On 7-5-2010 10:07, luigi scarso wrote:
> 2010/5/7 Hans Hagen<pragma at wxs.nl>:
>> On 7-5-2010 9:41, luigi scarso wrote:
>>
>>> Starting from it, and modifying the pdftew.web, I've produced the
>>> lists of all macros and their meaning simple put something like
>>> \tracingmacros3
>>> etc at the beginning of context.tex and then rebuild the format.
>>> I can revisit it now for luatex:
>>> this should still work for TeX macros but  not for Lua functions, I
>>> believe.
>>
>> already there for a while:
>>
>> context --dumphash yourfile
>> context --dumpdelta yourfile
>>
>> of course undocumented apart from context --help --expert
> yes, but what I meant was something like
> \tracingall
> \starttext
>
> \stoptext
> and then
> parsing the log extracting
> macro&  their meaning

even their meaning? that would be huge

(with --dumphash you get the macros + some statistics)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Fri May  7 10:45:52 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 07 May 2010 10:45:52 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <4BE3CE51.1010704@wxs.nl>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>		<y2tfe8d59da1005070041ue5763581zfc00f9f97014186a@mail.gmail.com>		<4BE3C7A1.2000507@wxs.nl>	<i2mfe8d59da1005070107r98284d61lf913dadf81c320c@mail.gmail.com>
	<4BE3CE51.1010704@wxs.nl>
Message-ID: <4BE3D340.5070701@elvenkind.com>

Hans Hagen wrote:
> On 7-5-2010 10:07, luigi scarso wrote:
>> 2010/5/7 Hans Hagen<pragma at wxs.nl>:
>>> On 7-5-2010 9:41, luigi scarso wrote:
>>>
>>>> Starting from it, and modifying the pdftew.web, I've produced the
>>>> lists of all macros and their meaning simple put something like
>>>> \tracingmacros3
>>>> etc at the beginning of context.tex and then rebuild the format.
>>>> I can revisit it now for luatex:
>>>> this should still work for TeX macros but  not for Lua functions, I
>>>> believe.
>>>
>>> already there for a while:
>>>
>>> context --dumphash yourfile
>>> context --dumpdelta yourfile
>>>
>>> of course undocumented apart from context --help --expert
>> yes, but what I meant was something like
>> \tracingall
>> \starttext
>>
>> \stoptext
>> and then
>> parsing the log extracting
>> macro&  their meaning
> 
> even their meaning? that would be huge

You could use the --dumphash output to get a list of meanings
(with a bit of lua processing to run \meaning\<csname>), but in
general the meanings are not always that useful, because a lot
of macros expand into \dosingleempty c.s.

Best wishes,
Taco






From luigi.scarso at gmail.com  Fri May  7 11:34:38 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 7 May 2010 11:34:38 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <m2mfe8d59da1005070156k9c37accdzf08bc7db9037c632@mail.gmail.com>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<y2tfe8d59da1005070041ue5763581zfc00f9f97014186a@mail.gmail.com>
	<4BE3C7A1.2000507@wxs.nl>
	<i2mfe8d59da1005070107r98284d61lf913dadf81c320c@mail.gmail.com>
	<4BE3CE51.1010704@wxs.nl> <4BE3D340.5070701@elvenkind.com>
	<m2mfe8d59da1005070156k9c37accdzf08bc7db9037c632@mail.gmail.com>
Message-ID: <m2tfe8d59da1005070234q6ae26fd1m15821f472c5f2c5d@mail.gmail.com>

if you have problems
http://www.logosrl.it/luatex/cont-en.log.bz2

-- 
luigi

From ishamid at colostate.edu  Fri May  7 15:50:23 2010
From: ishamid at colostate.edu (=?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMgICDYs9mF2KfZiNmKIA==?= =?utf-8?B?2K3Yp9mF2K8=?=)
Date: Fri, 07 May 2010 07:50:23 -0600
Subject: [dev-context] audit of commands
In-Reply-To: <y2tfe8d59da1005070041ue5763581zfc00f9f97014186a@mail.gmail.com>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<y2tfe8d59da1005070041ue5763581zfc00f9f97014186a@mail.gmail.com>
Message-ID: <op.vcb8p918pw6hmh@ishamid-pc>

Hi Luigi,

On Fri, 07 May 2010 01:41:09 -0600, luigi scarso <luigi.scarso at gmail.com>  
wrote:


>> Again, ONLY MKIV is under consideration; as far as this book project is
>> concerned, only mkiv exists ;-)
>>
>> Any help is greatly appreciated!
> I remember a "tally" variable in pdftex that governs the lenght of
> line used in trace commands
> Starting from it, and modifying the pdftew.web, I've produced the
> lists of all macros and their meaning simple put something like
> \tracingmacros3
> etc at the beginning of context.tex and then rebuild the format.
> I can revisit it now for luatex:
> this should still work for TeX macros but  not for Lua functions, I  
> believe.

I don't pretend to 100% understand you ;-) but I greatly appreciate this.  
I guess is should also be simple enough to ignore the dedicated mkii files  
where there are two versions of the macros. How and when can I see that  
list?

Or maybe better: post the list on yours or the main wiki page and then we  
can all contribute/discuss to make sure it's complete, identify and tag  
the deprecated/obsolete/redundant commands, etc...

Peace
Idris

-- 
Professor Idris Samawi Hamid, Editor-in-Chief
International Journal of Shi`i Studies
Department of Philosophy
Colorado State University
Fort Collins, CO 80523


From mariausol at gmail.com  Fri May  7 16:05:06 2010
From: mariausol at gmail.com (Marius)
Date: Fri, 7 May 2010 17:05:06 +0300
Subject: [dev-context] audit of commands
In-Reply-To: <op.vcb8p918pw6hmh@ishamid-pc>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<y2tfe8d59da1005070041ue5763581zfc00f9f97014186a@mail.gmail.com>
	<op.vcb8p918pw6hmh@ishamid-pc>
Message-ID: <l2zc86049a21005070705y6379ce09w659a90628d3d8947@mail.gmail.com>

Idris, maybe this is what you are looking for:
http://www.pragma-ade.com/general/qrcs/setup-en.pdf

And at the same time I have a question. Does this list of commands is
the most recent? Is it generated automaticaly?

2010/5/7 Idris Samawi Hamid ?????   ????? ???? <ishamid at colostate.edu>:
> Hi Luigi,
>
> On Fri, 07 May 2010 01:41:09 -0600, luigi scarso <luigi.scarso at gmail.com>
> wrote:
>
>
>>> Again, ONLY MKIV is under consideration; as far as this book project is
>>> concerned, only mkiv exists ;-)
>>>
>>> Any help is greatly appreciated!
>>
>> I remember a "tally" variable in pdftex that governs the lenght of
>> line used in trace commands
>> Starting from it, and modifying the pdftew.web, I've produced the
>> lists of all macros and their meaning simple put something like
>> \tracingmacros3
>> etc at the beginning of context.tex and then rebuild the format.
>> I can revisit it now for luatex:
>> this should still work for TeX macros but ?not for Lua functions, I
>> believe.
>
> I don't pretend to 100% understand you ;-) but I greatly appreciate this. I
> guess is should also be simple enough to ignore the dedicated mkii files
> where there are two versions of the macros. How and when can I see that
> list?
>
> Or maybe better: post the list on yours or the main wiki page and then we
> can all contribute/discuss to make sure it's complete, identify and tag the
> deprecated/obsolete/redundant commands, etc...
>
> Peace
> Idris
>
> --
> Professor Idris Samawi Hamid, Editor-in-Chief
> International Journal of Shi`i Studies
> Department of Philosophy
> Colorado State University
> Fort Collins, CO 80523
>
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context
>

From luigi.scarso at gmail.com  Fri May  7 16:12:53 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 7 May 2010 16:12:53 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <l2zc86049a21005070705y6379ce09w659a90628d3d8947@mail.gmail.com>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<y2tfe8d59da1005070041ue5763581zfc00f9f97014186a@mail.gmail.com>
	<op.vcb8p918pw6hmh@ishamid-pc>
	<l2zc86049a21005070705y6379ce09w659a90628d3d8947@mail.gmail.com>
Message-ID: <s2sfe8d59da1005070712q26407fdcxd61194fdf6919eb7@mail.gmail.com>

On Fri, May 7, 2010 at 4:05 PM, Marius <mariausol at gmail.com> wrote:
> Idris, maybe this is what you are looking for:
> http://www.pragma-ade.com/general/qrcs/setup-en.pdf
>
> And at the same time I have a question. Does this list of commands is
> the most recent? Is it generated automaticaly?
If I remember well the sources are here
minimals/tex/texmf-context/tex/context/interface

-- 
luigi

From ishamid at colostate.edu  Fri May  7 16:14:09 2010
From: ishamid at colostate.edu (=?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMgICDYs9mF2KfZiNmKIA==?= =?utf-8?B?2K3Yp9mF2K8=?=)
Date: Fri, 07 May 2010 08:14:09 -0600
Subject: [dev-context] audit of commands
In-Reply-To: <z2kc86049a21005070704zba0d569ey4ea3a51a49d3e840@mail.gmail.com>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<y2tfe8d59da1005070041ue5763581zfc00f9f97014186a@mail.gmail.com>
	<op.vcb8p918pw6hmh@ishamid-pc>
	<z2kc86049a21005070704zba0d569ey4ea3a51a49d3e840@mail.gmail.com>
Message-ID: <op.vcb9tvdspw6hmh@ishamid-pc>

Hi,

On Fri, 07 May 2010 08:04:06 -0600, Marius <mariausol at gmail.com> wrote:

> Idris, maybe this is what you are looking for:
> http://www.pragma-ade.com/general/qrcs/setup-en.pdf

That list is not complete. For example, in open type we have a lot of
fontfeature commands in mkiv only. The sourse is also full of useful
goodies -- some very old even -- that often don't get documented or may
even be forgotten. It always amazes me how Wolfgang pops up with one of
these every now and then... In other areas Hans may have developed a
number of other experimental or other commands as well particular to the
interests of another set of users.

Hence the idea for an audit of mkiv commands.

Best wishes
Idris

> And at the same time I have a question. Does this list of commands is
> the most recent? Is it generated automaticaly?


-- 
Professor Idris Samawi Hamid, Editor-in-Chief
International Journal of Shi`i Studies
Department of Philosophy
Colorado State University
Fort Collins, CO 80523


From pragma at wxs.nl  Fri May  7 17:04:19 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 07 May 2010 17:04:19 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <l2zc86049a21005070705y6379ce09w659a90628d3d8947@mail.gmail.com>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>	<y2tfe8d59da1005070041ue5763581zfc00f9f97014186a@mail.gmail.com>	<op.vcb8p918pw6hmh@ishamid-pc>
	<l2zc86049a21005070705y6379ce09w659a90628d3d8947@mail.gmail.com>
Message-ID: <4BE42BF3.6040006@wxs.nl>

On 7-5-2010 4:05, Marius wrote:

> the most recent? Is it generated automaticaly?

yes

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pmlists at free.fr  Sat May  8 22:43:45 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Sat, 8 May 2010 22:43:45 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
Message-ID: <20100508204345.GA4005@gaston.couberia.bzh>

On Thu, May 06 2010, Idris Samawi Hamid ?????  ????? ???? wrote:

> I'm interested in an audit of all current mid-to-high-level mkiv commands, 
> including experimental or undocumented ones. I'm trying to come up with, as 
> much as possible, a set of context commands which is
>
> mutually exclusive
>
> jointly exhaustive.

Hello,

I would like to contribute to a very similar project: a new version of
setup-en.pdf, more verbose (detailed description of all options), complete
(even for low-level commands, but like you no obsolete commands), and with
some additional features (categories, index, cross-references).

There is also the new command reference on the wiki, but it's not enough
tagged.

Here my questions:

- How could all these efforts be shared in the most efficient way?

- Are others already working for the above project?

- Is the structure of cont-en.xml already the good choice and it only
  needs some extensions for additional features, or would it be as good to
  use lua-tables (one lua-file per command for example)?


I imagine the following steps:
1. decision how to structure the commands (lua or xml or ...)
2. script for producing setup-en.pdf (perhaps Hans can provide his current
   converter?)
3. implementation of \showsetup (currently broken anyway)
4. filling in the structure with all available information at the moment
   (last cont-en.xml, wiki)
5. putting nightly built setup-en.pdf on-line
6. filling the structure with all command descriptions

Then continuously:
7. updating command descriptions at each update on the wiki
8. updating command descriptions at each new context release
9. updating command descriptions whenever something seems not clear enough
   (questions on mailing list)


Please send me your comments!
Cheers, Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From pragma at wxs.nl  Sun May  9 00:08:17 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 09 May 2010 00:08:17 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <20100508204345.GA4005@gaston.couberia.bzh>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<20100508204345.GA4005@gaston.couberia.bzh>
Message-ID: <4BE5E0D1.4090804@wxs.nl>

On 8-5-2010 10:43, Peter M?nster wrote:

> Here my questions:
>
> - How could all these efforts be shared in the most efficient way?
>
> - Are others already working for the above project?
>
> - Is the structure of cont-en.xml already the good choice and it only
>    needs some extensions for additional features, or would it be as good to
>    use lua-tables (one lua-file per command for example)?

I think that it does not make much sense to extend cont-en.xml as 
extending it will make it way too big to be convenient. Also, I use that 
file for generating the current setup-* files as part of generating a 
beta an di'd like to keep that test. Of course adding more complete 
definitions (or fixing them) in cont-en.xml is welcome.

I can add an index or whatever needed based on cont-en.xml as long sas 
it does not get bloated.

So, how about more extensive info. As each command has a unique 
reference, the best approach is to have a separate file for each such 
entry. I suppose that this can be generated from the wiki.

 From that it's possible to generate something big (although big pdf's 
are not that much fun) or generate command specific files that are 
crosslinked to the main setup file.

 > I imagine the following steps:
 > 1. decision how to structure the commands (lua or xml or ...)

the xml is handy for manipulations but documentation about tex can best 
be done in tex (verbatim can get quite messy in xml)

 > 2. script for producing setup-en.pdf (perhaps Hans can provide his 
current
 >     converter?)

it's all in the distribution (x-set-*)

 > 3. implementation of \showsetup (currently broken anyway)

hm, in what sense broken?

 > 4. filling in the structure with all available information at the moment
 >     (last cont-en.xml, wiki)
 > 5. putting nightly built setup-en.pdf on-line
 > 6. filling the structure with all command descriptions
 >
 > Then continuously:
 > 7. updating command descriptions at each update on the wiki
 > 8. updating command descriptions at each new context release
 > 9. updating command descriptions whenever something seems not clear 
enough
 >     (questions on mailing list)

ambituous -)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pmlists at free.fr  Mon May 10 11:23:18 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Mon, 10 May 2010 11:23:18 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <4BE5E0D1.4090804@wxs.nl>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<20100508204345.GA4005@gaston.couberia.bzh>
	<4BE5E0D1.4090804@wxs.nl>
Message-ID: <20100510092317.GA19538@gaston.couberia.bzh>

On Sun, May 09 2010, Hans Hagen wrote:

> So, how about more extensive info. As each command has a unique reference, 
> the best approach is to have a separate file for each such entry. I suppose 
> that this can be generated from the wiki.

Hello Hans,

Yes, I also like one file per command, it's easier to manage.


> From that it's possible to generate something big (although big pdf's are 
> not that much fun) or generate command specific files that are crosslinked 
> to the main setup file.

For looking up something, I often open big pdf-files (> 1000 pages), and
the size doesn't matter. But for printing it, I agree. If someone really
wants to print it on A4, the font size must be small and it must be
2-column layout.


> > I imagine the following steps:
> > 1. decision how to structure the commands (lua or xml or ...)
>
> the xml is handy for manipulations but documentation about tex can best be 
> done in tex (verbatim can get quite messy in xml)

Thanks for the advice. This is good, because I don't have any experience
with xml.


> > 3. implementation of \showsetup (currently broken anyway)
>
> hm, in what sense broken?

No output:

\usemodule[set-11] \loadsetups % from contextref-env.tex (context-manual)
\starttext
\showsetup{startproject}       % from co-documents.tex (context-manual)
\stoptext


> ambituous -)

Yes, it'll take a long time (I can spend only 2-3 hours per week...).


So what about:
- a new directory
  "http://foundry.supelec.fr/svn/contextman/context-commands"
- one tex-file per command

?

If you agree, I just start.

Cheers, Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From pragma at wxs.nl  Mon May 10 12:49:32 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 10 May 2010 12:49:32 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <20100510092317.GA19538@gaston.couberia.bzh>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>	<20100508204345.GA4005@gaston.couberia.bzh>	<4BE5E0D1.4090804@wxs.nl>
	<20100510092317.GA19538@gaston.couberia.bzh>
Message-ID: <4BE7E4BC.9080807@wxs.nl>

On 10-5-2010 11:23, Peter M?nster wrote:
> On Sun, May 09 2010, Hans Hagen wrote:
>
>> So, how about more extensive info. As each command has a unique reference,
>> the best approach is to have a separate file for each such entry. I suppose
>> that this can be generated from the wiki.
>
> Hello Hans,
>
> Yes, I also like one file per command, it's easier to manage.
>
>
>>  From that it's possible to generate something big (although big pdf's are
>> not that much fun) or generate command specific files that are crosslinked
>> to the main setup file.
>
> For looking up something, I often open big pdf-files (>  1000 pages), and
> the size doesn't matter. But for printing it, I agree. If someone really
> wants to print it on A4, the font size must be small and it must be
> 2-column layout.

printing, distribution and generation

also, i expect it to be more that 1000 pages at some point

>
>>> I imagine the following steps:
>>> 1. decision how to structure the commands (lua or xml or ...)
>>
>> the xml is handy for manipulations but documentation about tex can best be
>> done in tex (verbatim can get quite messy in xml)
>
> Thanks for the advice. This is good, because I don't have any experience
> with xml.
>
>
>>> 3. implementation of \showsetup (currently broken anyway)
>>
>> hm, in what sense broken?
>
> No output:
>
> \usemodule[set-11] \loadsetups % from contextref-env.tex (context-manual)
> \starttext
> \showsetup{startproject}       % from co-documents.tex (context-manual)
> \stoptext

\usemodule[set-11]

\loadsetups

\starttext
     \showsetup{framed}
\stoptext

works -)

> So what about:
> - a new directory
>    "http://foundry.supelec.fr/svn/contextman/context-commands"
> - one tex-file per command
>
> If you agree, I just start.

let me think about it for a while (naming and such)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From luigi.scarso at gmail.com  Mon May 10 12:55:43 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Mon, 10 May 2010 12:55:43 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <4BE7E4BC.9080807@wxs.nl>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<20100508204345.GA4005@gaston.couberia.bzh> <4BE5E0D1.4090804@wxs.nl>
	<20100510092317.GA19538@gaston.couberia.bzh> <4BE7E4BC.9080807@wxs.nl>
Message-ID: <AANLkTillV1MPs8tOrTHLz5-PF98anBrBDtHVSWiwy4rU@mail.gmail.com>

> \usemodule[set-11]
>
> \loadsetups
>
> \starttext
> ? ?\showsetup{framed}
> \stoptext
>
> works -)
here too with last current
-- 
luigi

From taco at elvenkind.com  Mon May 10 13:13:13 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 10 May 2010 13:13:13 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <4BE7E4BC.9080807@wxs.nl>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>	<20100508204345.GA4005@gaston.couberia.bzh>	<4BE5E0D1.4090804@wxs.nl>	<20100510092317.GA19538@gaston.couberia.bzh>
	<4BE7E4BC.9080807@wxs.nl>
Message-ID: <4BE7EA49.4060003@elvenkind.com>

Hans Hagen wrote:
> 
>> So what about:
>> - a new directory
>>    "http://foundry.supelec.fr/svn/contextman/context-commands"
>> - one tex-file per command
>>
>> If you agree, I just start.
> 
> let me think about it for a while (naming and such)

I would much prefer working on the wiki, then export to .tex with
a script. Having two sources for what is essentially the same
information is asking for trouble, imo.

Best wishes,
Taco

From pmlists at free.fr  Mon May 10 13:51:39 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Mon, 10 May 2010 13:51:39 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <4BE7EA49.4060003@elvenkind.com>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<20100508204345.GA4005@gaston.couberia.bzh>
	<4BE5E0D1.4090804@wxs.nl>
	<20100510092317.GA19538@gaston.couberia.bzh>
	<4BE7E4BC.9080807@wxs.nl> <4BE7EA49.4060003@elvenkind.com>
Message-ID: <20100510115139.GA20794@gaston.couberia.bzh>

On Mon, May 10 2010, Taco Hoekwater wrote:

> I would much prefer working on the wiki, then export to .tex with
> a script. Having two sources for what is essentially the same
> information is asking for trouble, imo.

Hello Taco,

There is not enough structure on the wiki. I imagine a script that exports
parts of the wiki to tex, but additional information has to be entered in
the tex-files (are arguments optional or not, etc.).

BTW, how can I get automatic emails for every change in
http://wiki.contextgarden.net/Reference/en/ ?

Cheers, Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From pragma at wxs.nl  Mon May 10 13:54:38 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 10 May 2010 13:54:38 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <4BE7EA49.4060003@elvenkind.com>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>	<20100508204345.GA4005@gaston.couberia.bzh>	<4BE5E0D1.4090804@wxs.nl>	<20100510092317.GA19538@gaston.couberia.bzh>
	<4BE7E4BC.9080807@wxs.nl> <4BE7EA49.4060003@elvenkind.com>
Message-ID: <4BE7F3FE.1070400@wxs.nl>

On 10-5-2010 1:13, Taco Hoekwater wrote:
> Hans Hagen wrote:
>>
>>> So what about:
>>> - a new directory
>>> "http://foundry.supelec.fr/svn/contextman/context-commands"
>>> - one tex-file per command
>>>
>>> If you agree, I just start.
>>
>> let me think about it for a while (naming and such)
>
> I would much prefer working on the wiki, then export to .tex with
> a script. Having two sources for what is essentially the same
> information is asking for trouble, imo.

sure. it's more an export question indeed (and what to export to)


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Mon May 10 13:56:19 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 10 May 2010 13:56:19 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <20100510115139.GA20794@gaston.couberia.bzh>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<20100508204345.GA4005@gaston.couberia.bzh>
	<4BE5E0D1.4090804@wxs.nl>
	<20100510092317.GA19538@gaston.couberia.bzh>
	<4BE7E4BC.9080807@wxs.nl> <4BE7EA49.4060003@elvenkind.com>
	<20100510115139.GA20794@gaston.couberia.bzh>
Message-ID: <4BE7F463.6070603@wxs.nl>

On 10-5-2010 1:51, Peter M?nster wrote:
> On Mon, May 10 2010, Taco Hoekwater wrote:
>
>> I would much prefer working on the wiki, then export to .tex with
>> a script. Having two sources for what is essentially the same
>> information is asking for trouble, imo.
>
> Hello Taco,
>
> There is not enough structure on the wiki. I imagine a script that exports
> parts of the wiki to tex, but additional information has to be entered in
> the tex-files (are arguments optional or not, etc.).

that kind of info is already available in cont-en.xml

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Mon May 10 13:59:00 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 10 May 2010 13:59:00 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <4BE7F463.6070603@wxs.nl>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<20100508204345.GA4005@gaston.couberia.bzh>
	<4BE5E0D1.4090804@wxs.nl>
	<20100510092317.GA19538@gaston.couberia.bzh>
	<4BE7E4BC.9080807@wxs.nl> <4BE7EA49.4060003@elvenkind.com>
	<20100510115139.GA20794@gaston.couberia.bzh>
	<4BE7F463.6070603@wxs.nl>
Message-ID: <4BE7F504.4050500@elvenkind.com>

Hans Hagen wrote:
> On 10-5-2010 1:51, Peter M?nster wrote:
>> On Mon, May 10 2010, Taco Hoekwater wrote:
>>
>>> I would much prefer working on the wiki, then export to .tex with
>>> a script. Having two sources for what is essentially the same
>>> information is asking for trouble, imo.
>>
>> Hello Taco,
>>
>> There is not enough structure on the wiki. I imagine a script that 
>> exports
>> parts of the wiki to tex, but additional information has to be entered in
>> the tex-files (are arguments optional or not, etc.).
> 
> that kind of info is already available in cont-en.xml

as well as in the wiki (red syntax text indicates optional arguments)

Taco

From taco at elvenkind.com  Mon May 10 14:02:09 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 10 May 2010 14:02:09 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <20100510115139.GA20794@gaston.couberia.bzh>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<20100508204345.GA4005@gaston.couberia.bzh>
	<4BE5E0D1.4090804@wxs.nl>
	<20100510092317.GA19538@gaston.couberia.bzh>
	<4BE7E4BC.9080807@wxs.nl> <4BE7EA49.4060003@elvenkind.com>
	<20100510115139.GA20794@gaston.couberia.bzh>
Message-ID: <4BE7F5C1.20405@elvenkind.com>

Peter M?nster wrote:
> 
> BTW, how can I get automatic emails for every change in
> http://wiki.contextgarden.net/Reference/en/ ?

You can only get emails for pages on your watchlist.

To do that, log on to the wiki and go to 'my preferences',
there is a heading with 'Email' settings on that page.

Best wishes,
Taco

From adityam at umich.edu  Mon May 10 21:50:40 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 10 May 2010 15:50:40 -0400 (EDT)
Subject: [dev-context] audit of commands
In-Reply-To: <20100510115139.GA20794@gaston.couberia.bzh>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<20100508204345.GA4005@gaston.couberia.bzh>
	<4BE5E0D1.4090804@wxs.nl>
	<20100510092317.GA19538@gaston.couberia.bzh>
	<4BE7E4BC.9080807@wxs.nl> <4BE7EA49.4060003@elvenkind.com>
	<20100510115139.GA20794@gaston.couberia.bzh>
Message-ID: <alpine.LNX.2.01.1005101547380.2851@ybpnyubfg.ybpnyqbznva>

On Mon, 10 May 2010, Peter M?nster wrote:

> On Mon, May 10 2010, Taco Hoekwater wrote:
>
>> I would much prefer working on the wiki, then export to .tex with
>> a script. Having two sources for what is essentially the same
>> information is asking for trouble, imo.
>
> Hello Taco,
>
> There is not enough structure on the wiki. I imagine a script that exports
> parts of the wiki to tex, but additional information has to be entered in
> the tex-files (are arguments optional or not, etc.).


Maybe, we can have an infobox for the wiki pages, so we can say something 
like

{{ Infobox command
| name = setupframed
| ...
}}

That way, it will be easier to export to TeX (no need to parse raw HTML).


Aditya

From khaledhosny at eglug.org  Mon May 10 21:55:07 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 10 May 2010 22:55:07 +0300
Subject: [dev-context] audit of commands
In-Reply-To: <alpine.LNX.2.01.1005101547380.2851@ybpnyubfg.ybpnyqbznva>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<20100508204345.GA4005@gaston.couberia.bzh>
	<4BE5E0D1.4090804@wxs.nl>
	<20100510092317.GA19538@gaston.couberia.bzh>
	<4BE7E4BC.9080807@wxs.nl> <4BE7EA49.4060003@elvenkind.com>
	<20100510115139.GA20794@gaston.couberia.bzh>
	<alpine.LNX.2.01.1005101547380.2851@ybpnyubfg.ybpnyqbznva>
Message-ID: <20100510195507.GA5857@khaled-laptop>

On Mon, May 10, 2010 at 03:50:40PM -0400, Aditya Mahajan wrote:
> On Mon, 10 May 2010, Peter M?nster wrote:
> 
> >On Mon, May 10 2010, Taco Hoekwater wrote:
> >
> >>I would much prefer working on the wiki, then export to .tex with
> >>a script. Having two sources for what is essentially the same
> >>information is asking for trouble, imo.
> >
> >Hello Taco,
> >
> >There is not enough structure on the wiki. I imagine a script that exports
> >parts of the wiki to tex, but additional information has to be entered in
> >the tex-files (are arguments optional or not, etc.).
> 
> 
> Maybe, we can have an infobox for the wiki pages, so we can say
> something like
> 
> {{ Infobox command
> | name = setupframed
> | ...
> }}

It also makes editing the wiki much easier (using also wiki tables
instead of HTML tables etc.)

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From taco at elvenkind.com  Tue May 11 09:30:55 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 11 May 2010 09:30:55 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <20100510195507.GA5857@khaled-laptop>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>	<20100508204345.GA4005@gaston.couberia.bzh>	<4BE5E0D1.4090804@wxs.nl>	<20100510092317.GA19538@gaston.couberia.bzh>	<4BE7E4BC.9080807@wxs.nl>
	<4BE7EA49.4060003@elvenkind.com>	<20100510115139.GA20794@gaston.couberia.bzh>	<alpine.LNX.2.01.1005101547380.2851@ybpnyubfg.ybpnyqbznva>
	<20100510195507.GA5857@khaled-laptop>
Message-ID: <4BE907AF.4000808@elvenkind.com>

Khaled Hosny wrote:
>>
>> Maybe, we can have an infobox for the wiki pages, so we can say
>> something like
>>
>> {{ Infobox command
>> | name = setupframed
>> | ...
>> }}
> 
> It also makes editing the wiki much easier (using also wiki tables
> instead of HTML tables etc.)

This is definitely true, but for the export there is a simple solution:
export as xml, feed the output through Tidy, then process with mkiv's
native xml support.

Best wishes,
Taco

From pmlists at free.fr  Tue May 11 22:07:46 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Tue, 11 May 2010 22:07:46 +0200
Subject: [dev-context] audit of commands
In-Reply-To: <4BE907AF.4000808@elvenkind.com>
References: <op.vcamen2h60pfzx@ihamidnb.libarts.colostate.edu>
	<20100508204345.GA4005@gaston.couberia.bzh>
	<4BE5E0D1.4090804@wxs.nl>
	<20100510092317.GA19538@gaston.couberia.bzh>
	<4BE7E4BC.9080807@wxs.nl> <4BE7EA49.4060003@elvenkind.com>
	<20100510115139.GA20794@gaston.couberia.bzh>
	<alpine.LNX.2.01.1005101547380.2851@ybpnyubfg.ybpnyqbznva>
	<20100510195507.GA5857@khaled-laptop>
	<4BE907AF.4000808@elvenkind.com>
Message-ID: <20100511200746.GC773@gaston.couberia.bzh>

On Tue, May 11 2010, Taco Hoekwater wrote:

>> It also makes editing the wiki much easier (using also wiki tables
>> instead of HTML tables etc.)
>
> This is definitely true, but for the export there is a simple solution:
> export as xml, feed the output through Tidy, then process with mkiv's
> native xml support.

Hello,

It's not so funny to deal with the actual structure and make conversion tools
like this:
color=red -> optional parameter, <strong>...</strong> -> default value

Also, the editing performance is much higher when using a good editor
instead of html-wiki-forms.

In order to be motivated to spend time on this project, I
- don't want to get blocked by limits (e.g. wiki-limitations), that I
  cannot control
- want to have a well designed structure: ergonomic for editing and
  beautiful (as Hans said: TeX seems to be a good choice)
- want to use my favorite editor for writing the command descriptions

At the moment, I don't really understand how to carry that out using the
wiki... :(

Cheers, Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From taco at elvenkind.com  Mon May 17 10:33:53 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 17 May 2010 10:33:53 +0200
Subject: [dev-context] garden down?
Message-ID: <4BF0FF71.7080505@elvenkind.com>


From jano.kula at tiscali.cz  Mon May 24 16:51:34 2010
From: jano.kula at tiscali.cz (Jano Kula)
Date: Mon, 24 May 2010 16:51:34 +0200
Subject: [dev-context] developers meeting in Brejlov
Message-ID: <hte3ql$89o$1@dough.gmane.org>

Dear friends,

if you would find it useful to work and discuss actual problems and 
future development in person, there will be a good opportunity on 
September 18 (Saturday), after the ConTeXt meeting is over. There will 
be the TeXperience conference still going on and thus the facilities for 
the separate developers meeting available.

If you decide to do so, don't forget to check staying one day longer for 
TeXperience, while registering to the 4th ConTeXt Meeting:

http://meeting.contextgarden.net/2010/

Hans, Jano, Pavel & Taco


From schuster.wolfgang at googlemail.com  Mon May 31 17:56:41 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Mon, 31 May 2010 17:56:41 +0200
Subject: [dev-context] Macro Defintions
Message-ID: <4C03DC39.7000601@googlemail.com>

Hi Hans,

there is a bug in x-set-11.mkiv

As you can see from this example ConTeXt loads commands in mkiv with the 
name only and ignores environment and generated attributes.

\usemodule[set-11]\loadsetups
\starttext
\subject{MkII}
framedtext: \showsetup{framedtext*}\par
startframedtext: \showsetup{startframedtext*}
\subject{MkIV}
framedtext: \showsetup{framedtext}\par
startframedtext: \showsetup{startframedtext}
\stoptext

There is also a typo in the following setup (also x-set-11.mkiv):

   \startxmlsetups xml:setups:assemblename
+     \doifelse {\xmlatt{#1}{type}} {environment} {
-     \doifelse {\xmlatt{#1}{environment}} {yes} {
   ...
   \stopsetups

Wolfgang


From schuster.wolfgang at googlemail.com  Wed Jun 16 19:56:35 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Wed, 16 Jun 2010 19:56:35 +0200
Subject: [dev-context] cont-en.xml
Message-ID: <4C191053.3040804@googlemail.com>

Hi,

i plan to update cont-en.xml with changes in mkiv (new keys and 
commands) but i'm unsure if it's good to mix mkii and mkiv. I think it's 
to make a separate definition file for mkiv which contains the extra 
keys for the commands (e.g. sectionsegments for \setuphead) and use the 
current one for mkii only.

Wolfgang


From taco at elvenkind.com  Thu Jun 17 06:16:37 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 17 Jun 2010 06:16:37 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <4C191053.3040804@googlemail.com>
References: <4C191053.3040804@googlemail.com>
Message-ID: <4C19A1A5.2050501@elvenkind.com>



Wolfgang Schuster wrote:
> Hi,
> 
> i plan to update cont-en.xml with changes in mkiv (new keys and
> commands) but i'm unsure if it's good to mix mkii and mkiv. I think it's
> to make a separate definition file for mkiv which contains the extra
> keys for the commands (e.g. sectionsegments for \setuphead) and use the
> current one for mkii only.

Probably that is best. It will also allow us to change the xml format
a little if that works out better in mkiv processing for some reason.

Best wishes,
Taco

From pragma at wxs.nl  Thu Jun 17 11:45:15 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 17 Jun 2010 11:45:15 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <4C191053.3040804@googlemail.com>
References: <4C191053.3040804@googlemail.com>
Message-ID: <4C19EEAB.9030003@wxs.nl>

On 16-6-2010 7:56, Wolfgang Schuster wrote:
> Hi,
>
> i plan to update cont-en.xml with changes in mkiv (new keys and
> commands) but i'm unsure if it's good to mix mkii and mkiv. I think it's
> to make a separate definition file for mkiv which contains the extra
> keys for the commands (e.g. sectionsegments for \setuphead) and use the
> current one for mkii only.

we can have several files:

cont-en.xml (common stuff)
cont-en-mkiv.xml
cont-en-mkii.xml

the mkii and mkiv files can include cont-en.xml

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Thu Jun 17 12:03:57 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 17 Jun 2010 12:03:57 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <4C191053.3040804@googlemail.com>
References: <4C191053.3040804@googlemail.com>
Message-ID: <4C19F30D.8060004@wxs.nl>

On 16-6-2010 7:56, Wolfgang Schuster wrote:
> Hi,
>
> i plan to update cont-en.xml with changes in mkiv (new keys and
> commands) but i'm unsure if it's good to mix mkii and mkiv. I think it's
> to make a separate definition file for mkiv which contains the extra
> keys for the commands (e.g. sectionsegments for \setuphead) and use the
> current one for mkii only.

if we consider mkii frozen it might indeed be better to completely 
separate file

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Thu Jun 17 15:11:09 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 17 Jun 2010 15:11:09 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <4C191053.3040804@googlemail.com>
References: <4C191053.3040804@googlemail.com>
Message-ID: <AANLkTin1QWk0KfwuT4Q4yp6UCPUzthk_I0g0a0SoYHAH@mail.gmail.com>

On Wed, Jun 16, 2010 at 19:56, Wolfgang Schuster
<schuster.wolfgang at googlemail.com> wrote:
> Hi,
>
> i plan to update cont-en.xml with changes in mkiv (new keys and commands)
> but i'm unsure if it's good to mix mkii and mkiv. I think it's to make a
> separate definition file for mkiv which contains the extra keys for the
> commands (e.g. sectionsegments for \setuphead) and use the current one for
> mkii only.

My opinion (though at the end you may do it either way): I would put a
special key to either each command or each option that would clarify
"mkii only" or "mkiv only" or "both". If command is completely
different, for example
   \usetypescript[name][ec] in mkii vs. \usetypescript[name] in mkiv
one could define two commands and label one as "mkii only" and the
second one as "mkiv only".

There might be also another thing worth keeping in mind. Some commands
may be valid, but useless in mkiv. It might make sense to label those
as such.

Even though the fact that "mkii is frozen" might be true, most of
valid options are still missing in those xml files.

Again: I would keep a single file with a new key that would specify in
"which mark" commands works and/or makes sense. That way it would be a
tiny bit easier to maintain both versions synchronized (assume that
you will want to document a new command that's also present in MKII -
are you going to remember that you also need to update MKII; and then
one will see a command in MKIV, but will have no idea whether the
absence in MKII means that somebody forgot that command or that it's
simply not present/working there).

But since you are planning to work on it, it's up to you to decide.
That was only my opinion.

Mojca

From schuster.wolfgang at googlemail.com  Thu Jun 17 21:32:09 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Thu, 17 Jun 2010 21:32:09 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <AANLkTin1QWk0KfwuT4Q4yp6UCPUzthk_I0g0a0SoYHAH@mail.gmail.com>
References: <4C191053.3040804@googlemail.com>
	<AANLkTin1QWk0KfwuT4Q4yp6UCPUzthk_I0g0a0SoYHAH@mail.gmail.com>
Message-ID: <4C1A7839.2000905@googlemail.com>

Am 17.06.10 15:11, schrieb Mojca Miklavec:
> On Wed, Jun 16, 2010 at 19:56, Wolfgang Schuster
> <schuster.wolfgang at googlemail.com>  wrote:
>    
>> Hi,
>>
>> i plan to update cont-en.xml with changes in mkiv (new keys and commands)
>> but i'm unsure if it's good to mix mkii and mkiv. I think it's to make a
>> separate definition file for mkiv which contains the extra keys for the
>> commands (e.g. sectionsegments for \setuphead) and use the current one for
>> mkii only.
>>      
> My opinion (though at the end you may do it either way): I would put a
> special key to either each command or each option that would clarify
> "mkii only" or "mkiv only" or "both". If command is completely
> different, for example
>     \usetypescript[name][ec] in mkii vs. \usetypescript[name] in mkiv
> one could define two commands and label one as "mkii only" and the
> second one as "mkiv only".
>
> There might be also another thing worth keeping in mind. Some commands
> may be valid, but useless in mkiv. It might make sense to label those
> as such.
>
> Even though the fact that "mkii is frozen" might be true, most of
> valid options are still missing in those xml files.
>
> Again: I would keep a single file with a new key that would specify in
> "which mark" commands works and/or makes sense. That way it would be a
> tiny bit easier to maintain both versions synchronized (assume that
> you will want to document a new command that's also present in MKII -
> are you going to remember that you also need to update MKII; and then
> one will see a command in MKIV, but will have no idea whether the
> absence in MKII means that somebody forgot that command or that it's
> simply not present/working there).
>
> But since you are planning to work on it, it's up to you to decide.
> That was only my opinion.
>    

For the start i'll go only through the mkiv files and use a separate 
file for them,
maybe later i can compare the mkiv with the mkii options and use hans 
approach
because tagging each key and command is a lot of work.

Wolfgang


From oliver.buerschaper at mpq.mpg.de  Thu Jun 17 23:54:36 2010
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Thu, 17 Jun 2010 23:54:36 +0200
Subject: [dev-context] Checksum of original font files stored in the cache?
Message-ID: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>

Dear wise guys,

the other day I found myself caught in a trap that might be a frequent source of puzzlement for the casual ConTeXt user :-)

I had replaced an OpenType font in the usual OS directory by a new version. Typesetting documents using that font produced surprising results... the PDF files were merrily messed up. I reckon I didn't pay attention to the interplay between font files and the LuaTeX cache... apparently ConTeXt was using the outdated font cache data together with the new font file since a few days later the problem was resolved once I had to regenerate the cache for other reasons. Only then did I notice I had also cured this font problem.

Do you think it would be a good idea to store a checksum of the actual font file used while generating the cache?

Best,
Oliver

From taco at elvenkind.com  Fri Jun 18 09:10:47 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 18 Jun 2010 09:10:47 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
Message-ID: <4C1B1BF7.1090405@elvenkind.com>

Oliver Buerschaper wrote:
> 
> Do you think it would be a good idea to store a checksum of the
> actual font file used while generating the cache?

This sounds useful. As it will need backend support in luatex,
I will add a tracker item for this.

Best wishes,
Taco

From khaledhosny at eglug.org  Fri Jun 18 09:36:25 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 18 Jun 2010 10:36:25 +0300
Subject: [dev-context] Checksum of original font files stored in the
 cache?
In-Reply-To: <4C1B1BF7.1090405@elvenkind.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
Message-ID: <20100618073625.GA8622@khaled-laptop>

On Fri, Jun 18, 2010 at 09:10:47AM +0200, Taco Hoekwater wrote:
> Oliver Buerschaper wrote:
> >
> >Do you think it would be a good idea to store a checksum of the
> >actual font file used while generating the cache?
> 
> This sounds useful. As it will need backend support in luatex,
> I will add a tracker item for this.

Why? Can't one just store the checksum in the cached lua file, and when
loading check if it matches the actual font file, if no discard the
cache and reload the file (I thought context is already doing that).

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From taco at elvenkind.com  Fri Jun 18 09:40:55 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 18 Jun 2010 09:40:55 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <20100618073625.GA8622@khaled-laptop>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
Message-ID: <4C1B2307.9050003@elvenkind.com>

Khaled Hosny wrote:
> On Fri, Jun 18, 2010 at 09:10:47AM +0200, Taco Hoekwater wrote:
>> Oliver Buerschaper wrote:
>>> Do you think it would be a good idea to store a checksum of the
>>> actual font file used while generating the cache?
>> This sounds useful. As it will need backend support in luatex,
>> I will add a tracker item for this.
> 
> Why? Can't one just store the checksum in the cached lua file, and when
> loading check if it matches the actual font file, if no discard the
> cache and reload the file (I thought context is already doing that).

Sure, but using the backend is more secure. Once the backend opens the
font file, it cannot be altered any more. In a large document, there may
be as much as a minute between front end and back end. Using the backend
is also faster.

Best wishes,
Taco




From luigi.scarso at gmail.com  Fri Jun 18 09:53:36 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 18 Jun 2010 09:53:36 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <4C1B2307.9050003@elvenkind.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
Message-ID: <AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>

On Fri, Jun 18, 2010 at 9:40 AM, Taco Hoekwater <taco at elvenkind.com> wrote:
> Khaled Hosny wrote:
>>
>> On Fri, Jun 18, 2010 at 09:10:47AM +0200, Taco Hoekwater wrote:
>>>
>>> Oliver Buerschaper wrote:
>>>>
>>>> Do you think it would be a good idea to store a checksum of the
>>>> actual font file used while generating the cache?
>>>
>>> This sounds useful. As it will need backend support in luatex,
>>> I will add a tracker item for this.

Isn't mtxrun --script fonts reload enough ?
-- 
luigi

From taco at elvenkind.com  Fri Jun 18 09:55:01 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 18 Jun 2010 09:55:01 +0200
Subject: [dev-context] Checksum of original font files stored in
	the	cache?
In-Reply-To: <AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>	<4C1B1BF7.1090405@elvenkind.com>	<20100618073625.GA8622@khaled-laptop>	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
Message-ID: <4C1B2655.1010904@elvenkind.com>

luigi scarso wrote:
> On Fri, Jun 18, 2010 at 9:40 AM, Taco Hoekwater <taco at elvenkind.com> wrote:
>> Khaled Hosny wrote:
>>> On Fri, Jun 18, 2010 at 09:10:47AM +0200, Taco Hoekwater wrote:
>>>> Oliver Buerschaper wrote:
>>>>> Do you think it would be a good idea to store a checksum of the
>>>>> actual font file used while generating the cache?
>>>> This sounds useful. As it will need backend support in luatex,
>>>> I will add a tracker item for this.
> 
> Isn't mtxrun --script fonts reload enough ?

Only if you actually see the problem happening, which may
not be the case. The output could be messed up without any kind of
warning from the engine.

Best wishes,
Taco

From khaledhosny at eglug.org  Fri Jun 18 10:03:11 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 18 Jun 2010 11:03:11 +0300
Subject: [dev-context] Checksum of original font files stored in the
 cache?
In-Reply-To: <4C1B2307.9050003@elvenkind.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
Message-ID: <20100618080311.GA8793@khaled-laptop>

On Fri, Jun 18, 2010 at 09:40:55AM +0200, Taco Hoekwater wrote:
> Khaled Hosny wrote:
> >On Fri, Jun 18, 2010 at 09:10:47AM +0200, Taco Hoekwater wrote:
> >>Oliver Buerschaper wrote:
> >>>Do you think it would be a good idea to store a checksum of the
> >>>actual font file used while generating the cache?
> >>This sounds useful. As it will need backend support in luatex,
> >>I will add a tracker item for this.
> >
> >Why? Can't one just store the checksum in the cached lua file, and when
> >loading check if it matches the actual font file, if no discard the
> >cache and reload the file (I thought context is already doing that).
> 
> Sure, but using the backend is more secure. Once the backend opens the
> font file, it cannot be altered any more. In a large document, there may
> be as much as a minute between front end and back end. Using the backend
> is also faster.

Aha, I didn't think about this use case, I was thinking more about a
context cached font changing before processing the document.


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From luigi.scarso at gmail.com  Fri Jun 18 10:05:58 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 18 Jun 2010 10:05:58 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <4C1B2655.1010904@elvenkind.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
Message-ID: <AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>

On Fri, Jun 18, 2010 at 9:55 AM, Taco Hoekwater <taco at elvenkind.com> wrote:
> luigi scarso wrote:
>>
>> On Fri, Jun 18, 2010 at 9:40 AM, Taco Hoekwater <taco at elvenkind.com>
>> wrote:
>>>
>>> Khaled Hosny wrote:
>>>>
>>>> On Fri, Jun 18, 2010 at 09:10:47AM +0200, Taco Hoekwater wrote:
>>>>>
>>>>> Oliver Buerschaper wrote:
>>>>>>
>>>>>> Do you think it would be a good idea to store a checksum of the
>>>>>> actual font file used while generating the cache?
>>>>>
>>>>> This sounds useful. As it will need backend support in luatex,
>>>>> I will add a tracker item for this.
>>
>> Isn't mtxrun --script fonts reload enough ?
>
> Only if you actually see the problem happening, which may
> not be the case. The output could be messed up without any kind of
> warning from the engine.
I mean: one should not simply copy an opentype font into (context)
system and expected things to work.
Checksum should  be check  at every runs, which is useless most of the time:
in a production env. I don't change fonts for long time , and every
change is tested.
Maybe a lua script to install fonts is better -- we can eventually
think to a wxLua gui interface .


-- 
luigi

From khaledhosny at eglug.org  Fri Jun 18 10:08:32 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 18 Jun 2010 11:08:32 +0300
Subject: [dev-context] Checksum of original font files stored in the
 cache?
In-Reply-To: <4C1B2655.1010904@elvenkind.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
Message-ID: <20100618080832.GA8841@khaled-laptop>

On Fri, Jun 18, 2010 at 09:55:01AM +0200, Taco Hoekwater wrote:
> luigi scarso wrote:
> >On Fri, Jun 18, 2010 at 9:40 AM, Taco Hoekwater <taco at elvenkind.com> wrote:
> >>Khaled Hosny wrote:
> >>>On Fri, Jun 18, 2010 at 09:10:47AM +0200, Taco Hoekwater wrote:
> >>>>Oliver Buerschaper wrote:
> >>>>>Do you think it would be a good idea to store a checksum of the
> >>>>>actual font file used while generating the cache?
> >>>>This sounds useful. As it will need backend support in luatex,
> >>>>I will add a tracker item for this.
> >
> >Isn't mtxrun --script fonts reload enough ?
> 
> Only if you actually see the problem happening, which may
> not be the case. The output could be messed up without any kind of
> warning from the engine.

I'm not sure what the checksum field in tfm table is used for, but it
can store the checksum of the actual font file (the lua end should fill
it in lua loaded fonts) and the backend can warn the user in the case of
checksum mismatch.


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From oliver.buerschaper at mpq.mpg.de  Fri Jun 18 10:16:57 2010
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Fri, 18 Jun 2010 10:16:57 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
Message-ID: <B358BAD4-55CB-4519-8098-5AFD2A0EA580@mpq.mpg.de>

>> Only if you actually see the problem happening, which may
>> not be the case. The output could be messed up without any kind of
>> warning from the engine.
> I mean: one should not simply copy an opentype font into (context)
> system and expected things to work.
> Checksum should  be check  at every runs, which is useless most of the time:
> in a production env. I don't change fonts for long time , and every
> change is tested.
> Maybe a lua script to install fonts is better -- we can eventually
> think to a wxLua gui interface .

I'm not sure. In a desktop environment the user will just update the OpenType font via the OS (e.g. replace a file in the usual OS font directory). From that moment on the font will work in almost any application... don't you think it's reasonable to just have the updated font work in ConTeXt, too?

Oliver

From oliver.buerschaper at mpq.mpg.de  Fri Jun 18 10:22:14 2010
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Fri, 18 Jun 2010 10:22:14 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <B358BAD4-55CB-4519-8098-5AFD2A0EA580@mpq.mpg.de>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
	<B358BAD4-55CB-4519-8098-5AFD2A0EA580@mpq.mpg.de>
Message-ID: <B69EA720-64B8-4563-8743-4DD3EDE64FEA@mpq.mpg.de>

>> I mean: one should not simply copy an opentype font into (context)
>> system and expected things to work.
>> Checksum should  be check  at every runs, which is useless most of the time:
>> in a production env. I don't change fonts for long time , and every
>> change is tested.
>> Maybe a lua script to install fonts is better -- we can eventually
>> think to a wxLua gui interface .
> 
> I'm not sure. In a desktop environment the user will just update the OpenType font via the OS (e.g. replace a file in the usual OS font directory). From that moment on the font will work in almost any application... don't you think it's reasonable to just have the updated font work in ConTeXt, too?

Addendum: should an updated font not work out of the box (i.e. change the looks of an existing document) then I think the usual DTP suspects issue a warning.

Oliver

From luigi.scarso at gmail.com  Fri Jun 18 10:31:20 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 18 Jun 2010 10:31:20 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <B358BAD4-55CB-4519-8098-5AFD2A0EA580@mpq.mpg.de>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
	<B358BAD4-55CB-4519-8098-5AFD2A0EA580@mpq.mpg.de>
Message-ID: <AANLkTik-e8-7rOFG1PhGtX-EUPE-aAOcPNUc8qm72PtV@mail.gmail.com>

On Fri, Jun 18, 2010 at 10:16 AM, Oliver Buerschaper
<oliver.buerschaper at mpq.mpg.de> wrote:
>>> Only if you actually see the problem happening, which may
>>> not be the case. The output could be messed up without any kind of
>>> warning from the engine.
>> I mean: one should not simply copy an opentype font into (context)
>> system and expected things to work.
>> Checksum should ?be check ?at every runs, which is useless most of the time:
>> in a production env. I don't change fonts for long time , and every
>> change is tested.
>> Maybe a lua script to install fonts is better -- we can eventually
>> think to a wxLua gui interface .


> I'm not sure. In a desktop environment the user will just update the OpenType font via the OS (e.g. replace a file in the usual OS font directory). 

From bogus@does.not.exist.com  Mon Mar 22 21:06:45 2010
From: bogus@does.not.exist.com ()
Date: Mon, 22 Mar 2010 20:06:45 -0000
Subject: No subject
Message-ID: <mailman.5.1276849885.4273.dev-context@ntg.nl>

ou think it's reasonable to just have the updated font work in ConTeXt, too=
?


>Addendum: should an updated font not work out of the box (i.e. change the =
looks of an existing document) then I think the usual DTP suspects issue a =
warning.
hm,no as general rule.
I prefer to separate context issue from OS issue, just to be sure that
I can move my  projects in whatever OS I have
Also a fonts can not be "good" for context (missing something), but
can be ok for OS, and I don't want that
an OS upgrade the font that is also used by potentially different
projects --  each project has it own sets of fonts
and I decide what to share, not the OS.
In this way I can also  work with linux winxp seven etc without problems.



--=20
luigi

From pragma at wxs.nl  Fri Jun 18 10:36:36 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 18 Jun 2010 10:36:36 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
Message-ID: <4C1B3014.8020405@wxs.nl>

On 17-6-2010 11:54, Oliver Buerschaper wrote:
> Dear wise guys,
>
> the other day I found myself caught in a trap that might be a frequent source of puzzlement for the casual ConTeXt user :-)
>
> I had replaced an OpenType font in the usual OS directory by a new version. Typesetting documents using that font produced surprising results... the PDF files were merrily messed up. I reckon I didn't pay attention to the interplay between font files and the LuaTeX cache... apparently ConTeXt was using the outdated font cache data together with the new font file since a few days later the problem was resolved once I had to regenerate the cache for other reasons. Only then did I notice I had also cured this font problem.
>
> Do you think it would be a good idea to store a checksum of the actual font file used while generating the cache?

no, as calculating the checksum is quite slow

normally context will detect a change in filesize so i wonder what went 
wrong at your end

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Fri Jun 18 10:48:42 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 18 Jun 2010 10:48:42 +0200
Subject: [dev-context] Checksum of original font files stored
	in	the	cache?
In-Reply-To: <4C1B2655.1010904@elvenkind.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>	<4C1B1BF7.1090405@elvenkind.com>	<20100618073625.GA8622@khaled-laptop>	<4C1B2307.9050003@elvenkind.com>	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
Message-ID: <4C1B32EA.2000208@wxs.nl>

On 18-6-2010 9:55, Taco Hoekwater wrote:
> luigi scarso wrote:
>> On Fri, Jun 18, 2010 at 9:40 AM, Taco Hoekwater <taco at elvenkind.com>
>> wrote:
>>> Khaled Hosny wrote:
>>>> On Fri, Jun 18, 2010 at 09:10:47AM +0200, Taco Hoekwater wrote:
>>>>> Oliver Buerschaper wrote:
>>>>>> Do you think it would be a good idea to store a checksum of the
>>>>>> actual font file used while generating the cache?
>>>>> This sounds useful. As it will need backend support in luatex,
>>>>> I will add a tracker item for this.
>>
>> Isn't mtxrun --script fonts reload enough ?
>
> Only if you actually see the problem happening, which may
> not be the case. The output could be messed up without any kind of
> warning from the engine.

is there unique info in the font file that we can use? version number 
that is guaranteed unique? if so, we can pass that to the backend

then, if we can determine that something is wrong (a flag in 
statistics), we can at the end of a run issue a message, generate that 
specific font, flag the tuc file and we get a second run automatically

taco and i can discuss a few such strategies off list

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Fri Jun 18 10:58:11 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 18 Jun 2010 10:58:11 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <AANLkTin1QWk0KfwuT4Q4yp6UCPUzthk_I0g0a0SoYHAH@mail.gmail.com>
References: <4C191053.3040804@googlemail.com>
	<AANLkTin1QWk0KfwuT4Q4yp6UCPUzthk_I0g0a0SoYHAH@mail.gmail.com>
Message-ID: <4C1B3523.6030502@wxs.nl>

On 17-6-2010 3:11, Mojca Miklavec wrote:
> On Wed, Jun 16, 2010 at 19:56, Wolfgang Schuster
> <schuster.wolfgang at googlemail.com>  wrote:
>> Hi,
>>
>> i plan to update cont-en.xml with changes in mkiv (new keys and commands)
>> but i'm unsure if it's good to mix mkii and mkiv. I think it's to make a
>> separate definition file for mkiv which contains the extra keys for the
>> commands (e.g. sectionsegments for \setuphead) and use the current one for
>> mkii only.
>
> My opinion (though at the end you may do it either way): I would put a
> special key to either each command or each option that would clarify
> "mkii only" or "mkiv only" or "both". If command is completely
> different, for example
>     \usetypescript[name][ec] in mkii vs. \usetypescript[name] in mkiv
> one could define two commands and label one as "mkii only" and the
> second one as "mkiv only".

there is already something like that but not applied yet to all commands

> There might be also another thing worth keeping in mind. Some commands
> may be valid, but useless in mkiv. It might make sense to label those
> as such.
>
> Even though the fact that "mkii is frozen" might be true, most of
> valid options are still missing in those xml files.

well, 'most' is not fair

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Fri Jun 18 11:05:34 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 18 Jun 2010 11:05:34 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <4C1B32EA.2000208@wxs.nl>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com> <4C1B32EA.2000208@wxs.nl>
Message-ID: <AANLkTinBMIuzMUjihGZxTAaQLpdG_tjF_gSppSICqlL5@mail.gmail.com>

On Fri, Jun 18, 2010 at 10:48, Hans Hagen wrote:
>
> is there unique info in the font file that we can use? version number that
> is guaranteed unique? if so, we can pass that to the backend

That almost reminds me on version numbers in ConTeXt files (the number
written in header that almost never changes). If font vendors are
equally careful to change version numbers, that doesn't guarantee
uniqueness.

Mojca

From mojca.miklavec.lists at gmail.com  Fri Jun 18 11:09:59 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 18 Jun 2010 11:09:59 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
Message-ID: <AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>

On Fri, Jun 18, 2010 at 10:05, luigi scarso wrote:

> I mean: one should not simply copy an opentype font into (context)
> system and expected things to work.

Why not? (Do you really want to make things more difficult than they
can be on purpose? Who is going to install polish fonts then ... ?)

> I don't change fonts for long time, and every change is tested.

That's not even entirely true. Fonts in minimals DO change, without
running a special installer. Most of time it is also true that ConTeXt
version probably changes inbetween as well anyway, so font cache will
be rebuilt, but you should not rely on that.

> Maybe a lua script to install fonts is better -- we can eventually
> think to a wxLua gui interface .

Or start expanding fontinst to handle OpenType fonts? Anyone?

Mojca

From pragma at wxs.nl  Fri Jun 18 11:34:04 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 18 Jun 2010 11:34:04 +0200
Subject: [dev-context] Checksum of original font files stored in
	the	cache?
In-Reply-To: <AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>	<4C1B1BF7.1090405@elvenkind.com>	<20100618073625.GA8622@khaled-laptop>	<4C1B2307.9050003@elvenkind.com>	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>	<4C1B2655.1010904@elvenkind.com>	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
	<AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>
Message-ID: <4C1B3D8C.5020504@wxs.nl>

On 18-6-2010 11:09, Mojca Miklavec wrote:
> On Fri, Jun 18, 2010 at 10:05, luigi scarso wrote:
>
>> I mean: one should not simply copy an opentype font into (context)
>> system and expected things to work.
>
> Why not? (Do you really want to make things more difficult than they
> can be on purpose? Who is going to install polish fonts then ... ?)
>
>> I don't change fonts for long time, and every change is tested.
>
> That's not even entirely true. Fonts in minimals DO change, without
> running a special installer. Most of time it is also true that ConTeXt
> version probably changes inbetween as well anyway, so font cache will
> be rebuilt, but you should not rely on that.

in most cases (and definitely with the polish ones) the file size 
changes (if only because they keep changing the names) an dthat gets 
detected

the only problem is when a file has exactly the same size (can be the 
case if only values of numbers changed)

i've added an extra check on modification time

>> Maybe a lua script to install fonts is better -- we can eventually
>> think to a wxLua gui interface .
>
> Or start expanding fontinst to handle OpenType fonts? Anyone?

no, and i see no reason why ... afaik fontinst does things with type 1 
fonts for latex (i never used it but i think they read the files or so) 
... even then, we want to drop fonts in directories and not run programs

nowadays i always just drop 'm in

texmf*/fonts/data/origin/collection

so for example in

texmf-fonts/fonts/data/khaled/xits

(and i no longer bother about separating type1 file into different paths 
anyway as data is patr of all path vars)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From khaledhosny at eglug.org  Fri Jun 18 11:33:30 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 18 Jun 2010 12:33:30 +0300
Subject: [dev-context] Checksum of original font files stored in	the
 cache?
In-Reply-To: <4C1B32EA.2000208@wxs.nl>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com> <4C1B32EA.2000208@wxs.nl>
Message-ID: <20100618093330.GA8921@khaled-laptop>

On Fri, Jun 18, 2010 at 10:48:42AM +0200, Hans Hagen wrote:
> On 18-6-2010 9:55, Taco Hoekwater wrote:
> >luigi scarso wrote:
> >>On Fri, Jun 18, 2010 at 9:40 AM, Taco Hoekwater <taco at elvenkind.com>
> >>wrote:
> >>>Khaled Hosny wrote:
> >>>>On Fri, Jun 18, 2010 at 09:10:47AM +0200, Taco Hoekwater wrote:
> >>>>>Oliver Buerschaper wrote:
> >>>>>>Do you think it would be a good idea to store a checksum of the
> >>>>>>actual font file used while generating the cache?
> >>>>>This sounds useful. As it will need backend support in luatex,
> >>>>>I will add a tracker item for this.
> >>
> >>Isn't mtxrun --script fonts reload enough ?
> >
> >Only if you actually see the problem happening, which may
> >not be the case. The output could be messed up without any kind of
> >warning from the engine.
> 
> is there unique info in the font file that we can use? version
> number that is guaranteed unique? if so, we can pass that to the
> backend

There is nothing guaranteed, but fonts can have a UniqueID (inside
ttfnames) that should be, if present, unique.


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From khaledhosny at eglug.org  Fri Jun 18 11:35:13 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 18 Jun 2010 12:35:13 +0300
Subject: [dev-context] Checksum of original font files stored in the
 cache?
In-Reply-To: <4C1B3014.8020405@wxs.nl>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B3014.8020405@wxs.nl>
Message-ID: <20100618093513.GB8921@khaled-laptop>

On Fri, Jun 18, 2010 at 10:36:36AM +0200, Hans Hagen wrote:
> On 17-6-2010 11:54, Oliver Buerschaper wrote:
> >Dear wise guys,
> >
> >the other day I found myself caught in a trap that might be a frequent source of puzzlement for the casual ConTeXt user :-)
> >
> >I had replaced an OpenType font in the usual OS directory by a new version. Typesetting documents using that font produced surprising results... the PDF files were merrily messed up. I reckon I didn't pay attention to the interplay between font files and the LuaTeX cache... apparently ConTeXt was using the outdated font cache data together with the new font file since a few days later the problem was resolved once I had to regenerate the cache for other reasons. Only then did I notice I had also cured this font problem.
> >
> >Do you think it would be a good idea to store a checksum of the actual font file used while generating the cache?
> 
> no, as calculating the checksum is quite slow
> 
> normally context will detect a change in filesize so i wonder what
> went wrong at your end

File size is not reliable, I do frequently change fonts and context
doesn't reload the font, so I have to delete the cache by hand.

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From pragma at wxs.nl  Fri Jun 18 11:36:47 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 18 Jun 2010 11:36:47 +0200
Subject: [dev-context] Checksum of original font files stored in the
 cache?
In-Reply-To: <AANLkTinBMIuzMUjihGZxTAaQLpdG_tjF_gSppSICqlL5@mail.gmail.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>	<4C1B1BF7.1090405@elvenkind.com>	<20100618073625.GA8622@khaled-laptop>	<4C1B2307.9050003@elvenkind.com>	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>	<4C1B2655.1010904@elvenkind.com>	<4C1B32EA.2000208@wxs.nl>
	<AANLkTinBMIuzMUjihGZxTAaQLpdG_tjF_gSppSICqlL5@mail.gmail.com>
Message-ID: <4C1B3E2F.10605@wxs.nl>

On 18-6-2010 11:05, Mojca Miklavec wrote:
> On Fri, Jun 18, 2010 at 10:48, Hans Hagen wrote:
>>
>> is there unique info in the font file that we can use? version number that
>> is guaranteed unique? if so, we can pass that to the backend
>
> That almost reminds me on version numbers in ConTeXt files (the number
> written in header that almost never changes). If font vendors are
> equally careful to change version numbers, that doesn't guarantee
> uniqueness.

indeed. but we don't sell ... if you sell you can employ prople to 
change numbers (the dates in the context files are more an indication of 
whe something showed up)

anyhow, i have been thinking of generating (with each beta) an 
automatically added key 'changedate' or so for changed files but i need 
to be really bored (or watching a one star movie on tv) to do that

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Fri Jun 18 11:38:04 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 18 Jun 2010 11:38:04 +0200
Subject: [dev-context] Checksum of original font files stored
	in	the	cache?
In-Reply-To: <4C1B3D8C.5020504@wxs.nl>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>	<4C1B1BF7.1090405@elvenkind.com>	<20100618073625.GA8622@khaled-laptop>	<4C1B2307.9050003@elvenkind.com>	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>	<4C1B2655.1010904@elvenkind.com>	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>	<AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>
	<4C1B3D8C.5020504@wxs.nl>
Message-ID: <4C1B3E7C.9000001@elvenkind.com>

Hans Hagen wrote:
> 
> nowadays i always just drop 'm in
> 
> texmf*/fonts/data/origin/collection
> 
> so for example in
> 
> texmf-fonts/fonts/data/khaled/xits
> 
> (and i no longer bother about separating type1 file into different paths 
> anyway as data is patr of all path vars)


That is also what I have been doing for the past year or so, and it
works really well (but not in tl2010-pretest because it does not have
the 'data' var extension yet).

Best wishes,
Taco



From luigi.scarso at gmail.com  Fri Jun 18 11:38:56 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 18 Jun 2010 11:38:56 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <4C1B3D8C.5020504@wxs.nl>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
	<AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>
	<4C1B3D8C.5020504@wxs.nl>
Message-ID: <AANLkTinzjENHF-aT64f4V4OrI21ck5JRN4Dnc-L5RrG_@mail.gmail.com>

On Fri, Jun 18, 2010 at 11:34 AM, Hans Hagen <pragma at wxs.nl> wrote:
> nowadays i always just drop 'm in
>
> texmf*/fonts/data/origin/collection
>
> so for example in
>
> texmf-fonts/fonts/data/khaled/xits
>
> (and i no longer bother about separating type1 file into different paths
> anyway as data is patr of all path vars)
And then run  mtxrun --script font reload, I suppose
--
luigi

From luigi.scarso at gmail.com  Fri Jun 18 11:40:42 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 18 Jun 2010 11:40:42 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <4C1B3E7C.9000001@elvenkind.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
	<AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>
	<4C1B3D8C.5020504@wxs.nl> <4C1B3E7C.9000001@elvenkind.com>
Message-ID: <AANLkTimxTpGcWWNJe4XTKWgel1wAQR5iJt_q1nBBPXsk@mail.gmail.com>

On Fri, Jun 18, 2010 at 11:38 AM, Taco Hoekwater <taco at elvenkind.com> wrote:
> Hans Hagen wrote:
>>
>> nowadays i always just drop 'm in
>>
>> texmf*/fonts/data/origin/collection
>>
>> so for example in
>>
>> texmf-fonts/fonts/data/khaled/xits
>>
>> (and i no longer bother about separating type1 file into different paths
>> anyway as data is patr of all path vars)
>
>
> That is also what I have been doing for the past year or so, and it
> works really well (but not in tl2010-pretest because it does not have
> the 'data' var extension yet).
Also here,
but I always run
mtxrun --script fonts reload
after


-- 
luigi

From taco at elvenkind.com  Fri Jun 18 11:41:47 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 18 Jun 2010 11:41:47 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <4C1B3E2F.10605@wxs.nl>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>	<4C1B1BF7.1090405@elvenkind.com>	<20100618073625.GA8622@khaled-laptop>	<4C1B2307.9050003@elvenkind.com>	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>	<4C1B2655.1010904@elvenkind.com>	<4C1B32EA.2000208@wxs.nl>	<AANLkTinBMIuzMUjihGZxTAaQLpdG_tjF_gSppSICqlL5@mail.gmail.com>
	<4C1B3E2F.10605@wxs.nl>
Message-ID: <4C1B3F5B.6040206@elvenkind.com>

Hans Hagen wrote:
> On 18-6-2010 11:05, Mojca Miklavec wrote:
>> On Fri, Jun 18, 2010 at 10:48, Hans Hagen wrote:
>>>
>>> is there unique info in the font file that we can use? version number 
>>> that
>>> is guaranteed unique? if so, we can pass that to the backend
>>
>> That almost reminds me on version numbers in ConTeXt files (the number
>> written in header that almost never changes). If font vendors are
>> equally careful to change version numbers, that doesn't guarantee
>> uniqueness.
> 
> indeed. but we don't sell ... if you sell you can employ prople to 
> change numbers (the dates in the context files are more an indication of 
> whe something showed up)
> 
> anyhow, i have been thinking of generating (with each beta) an 
> automatically added key 'changedate' or so for changed files but i need 
> to be really bored (or watching a one star movie on tv) to do that

Tonight at 20:30 on RTL7:

  Timecop II: The Berlin decision

I think that qualifies ;)

Seriously: yes this field would be quite useful to have added to the
source automatically. Even better for me personally would be if you
could generate an md5sum of the distributed file, so I can easily check
whether I made local changes.

Best wishes,
Taco


From luigi.scarso at gmail.com  Fri Jun 18 11:35:50 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 18 Jun 2010 11:35:50 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
	<AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>
Message-ID: <AANLkTimrWH8DFDhaLKKi658u6hNz5EiSyzlTBA1uuDBL@mail.gmail.com>

On Fri, Jun 18, 2010 at 11:09 AM, Mojca Miklavec
<mojca.miklavec.lists at gmail.com> wrote:
> On Fri, Jun 18, 2010 at 10:05, luigi scarso wrote:
>
>> I mean: one should not simply copy an opentype font into (context)
>> system and expected things to work.
>
> Why not? (Do you really want to make things more difficult than they
> can be on purpose? Who is going to install polish fonts then ... ?)
Because you must check  md5 font checksum of your document at every runs
and on average the change of fonts <<< than number of context runs .

>
>> I don't change fonts for long time, and every change is tested.
>
> That's not even entirely true. Fonts in minimals DO change, without
> running a special installer. Most of time it is also true that ConTeXt
> version probably changes inbetween as well anyway, so font cache will
> be rebuilt, but you should not rely on that.
I'm not speaking of fonts that come with minimals:
every change is followed  by a mtxrun update, so it's not a problem.



>> Maybe a lua script to install fonts is better -- we can eventually
>> think to a wxLua gui interface .
> Or start expanding fontinst to handle OpenType fonts? Anyone?
it's trivial for an opentype font:
1)copy the file into an minimals dir
(default tex/texmf/fonts/opentype/<your_dir>/<your_name>)
2) run mtxrun --script fonts reload
Where are the problems ?
(texfonts was  much more complicated and none worry  about it )


-- 
luigi

From mojca.miklavec.lists at gmail.com  Fri Jun 18 12:02:10 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 18 Jun 2010 12:02:10 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <4C1B3523.6030502@wxs.nl>
References: <4C191053.3040804@googlemail.com>
	<AANLkTin1QWk0KfwuT4Q4yp6UCPUzthk_I0g0a0SoYHAH@mail.gmail.com>
	<4C1B3523.6030502@wxs.nl>
Message-ID: <AANLkTikX8hD_8fFi_HzpPz3PTUc84mQPOhinvAnt_y1j@mail.gmail.com>

On Fri, Jun 18, 2010 at 10:58, Hans Hagen wrote:
> On 17-6-2010 3:11, Mojca Miklavec wrote:
>>
>> Even though the fact that "mkii is frozen" might be true, most of
>> valid options are still missing in those xml files.
>
> well, 'most' is not fair

I'm sorry, I probably wanted to say that "most of undocumented options
are missing in those xml files" :) :) :)

There is no doubt that the great majority and in particular all the
most important commands are present.

Mojca

From pragma at wxs.nl  Fri Jun 18 12:03:39 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 18 Jun 2010 12:03:39 +0200
Subject: [dev-context] Checksum of original font files stored in the
 cache?
In-Reply-To: <AANLkTimxTpGcWWNJe4XTKWgel1wAQR5iJt_q1nBBPXsk@mail.gmail.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>	<4C1B1BF7.1090405@elvenkind.com>	<20100618073625.GA8622@khaled-laptop>	<4C1B2307.9050003@elvenkind.com>	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>	<4C1B2655.1010904@elvenkind.com>	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>	<AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>	<4C1B3D8C.5020504@wxs.nl>	<4C1B3E7C.9000001@elvenkind.com>
	<AANLkTimxTpGcWWNJe4XTKWgel1wAQR5iJt_q1nBBPXsk@mail.gmail.com>
Message-ID: <4C1B447B.5090808@wxs.nl>

On 18-6-2010 11:40, luigi scarso wrote:

> mtxrun --script fonts reload

this is only needed when you access fonts by name and if a name cannot 
be found, the name cache will be regenerated automatically

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From oliver.buerschaper at mpq.mpg.de  Fri Jun 18 12:11:53 2010
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Fri, 18 Jun 2010 12:11:53 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <4C1B3F5B.6040206@elvenkind.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>	<4C1B1BF7.1090405@elvenkind.com>	<20100618073625.GA8622@khaled-laptop>	<4C1B2307.9050003@elvenkind.com>	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>	<4C1B2655.1010904@elvenkind.com>	<4C1B32EA.2000208@wxs.nl>	<AANLkTinBMIuzMUjihGZxTAaQLpdG_tjF_gSppSICqlL5@mail.gmail.com>
	<4C1B3E2F.10605@wxs.nl> <4C1B3F5B.6040206@elvenkind.com>
Message-ID: <5DF40B89-A520-4CB0-BDB2-5817E05862D6@mpq.mpg.de>

>> anyhow, i have been thinking of generating (with each beta) an automatically added key 'changedate' or so for changed files but i need to be really bored (or watching a one star movie on tv) to do that
> 
> Tonight at 20:30 on RTL7:
> 
> Timecop II: The Berlin decision
> 
> I think that qualifies ;)
> 
> Seriously: yes this field would be quite useful to have added to the
> source automatically. Even better for me personally would be if you
> could generate an md5sum of the distributed file, so I can easily check
> whether I made local changes.

Wouldn't this rather be an ideal task for, say, git? I mean tracking changes in ConTeXt source files...

Oliver

From pragma at wxs.nl  Fri Jun 18 12:12:40 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 18 Jun 2010 12:12:40 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <4C1B3F5B.6040206@elvenkind.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>	<4C1B1BF7.1090405@elvenkind.com>	<20100618073625.GA8622@khaled-laptop>	<4C1B2307.9050003@elvenkind.com>	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>	<4C1B2655.1010904@elvenkind.com>	<4C1B32EA.2000208@wxs.nl>	<AANLkTinBMIuzMUjihGZxTAaQLpdG_tjF_gSppSICqlL5@mail.gmail.com>
	<4C1B3E2F.10605@wxs.nl> <4C1B3F5B.6040206@elvenkind.com>
Message-ID: <4C1B4698.2080206@wxs.nl>

On 18-6-2010 11:41, Taco Hoekwater wrote:

> Tonight at 20:30 on RTL7:
>
> Timecop II: The Berlin decision
>
> I think that qualifies ;)

must be indeed as it is not even discussed at http://outlawvern.com/ 
(one of my favourite sites) so it must be real bad

> could generate an md5sum of the distributed file, so I can easily check

hm, will think about it

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Fri Jun 18 12:19:43 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 18 Jun 2010 12:19:43 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <5DF40B89-A520-4CB0-BDB2-5817E05862D6@mpq.mpg.de>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>	<4C1B1BF7.1090405@elvenkind.com>	<20100618073625.GA8622@khaled-laptop>	<4C1B2307.9050003@elvenkind.com>	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>	<4C1B2655.1010904@elvenkind.com>	<4C1B32EA.2000208@wxs.nl>	<AANLkTinBMIuzMUjihGZxTAaQLpdG_tjF_gSppSICqlL5@mail.gmail.com>
	<4C1B3E2F.10605@wxs.nl> <4C1B3F5B.6040206@elvenkind.com>
	<5DF40B89-A520-4CB0-BDB2-5817E05862D6@mpq.mpg.de>
Message-ID: <4C1B483F.1020709@elvenkind.com>

Oliver Buerschaper wrote:
>>
>> I think that qualifies ;)
>>
>> Seriously: yes this field would be quite useful to have added to the
>> source automatically. Even better for me personally would be if you
>> could generate an md5sum of the distributed file, so I can easily check
>> whether I made local changes.
> 
> Wouldn't this rather be an ideal task for, say, git? I mean tracking changes in ConTeXt source files...

Probably, but I don't want a git repo in $TEXMF so that would mean
even more bookkeeping.


From luigi.scarso at gmail.com  Fri Jun 18 12:20:57 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 18 Jun 2010 12:20:57 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <AANLkTimasrzo20_5cRipoKz_r9NZ7RwLmi_evrqaumvT@mail.gmail.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
	<AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>
	<4C1B3D8C.5020504@wxs.nl> <4C1B3E7C.9000001@elvenkind.com>
	<AANLkTimxTpGcWWNJe4XTKWgel1wAQR5iJt_q1nBBPXsk@mail.gmail.com>
	<4C1B447B.5090808@wxs.nl>
	<AANLkTimasrzo20_5cRipoKz_r9NZ7RwLmi_evrqaumvT@mail.gmail.com>
Message-ID: <AANLkTimV6j0MTxL2M7AJNkJY6NUqRPc-F_VIpTLHyzy9@mail.gmail.com>

On Fri, Jun 18, 2010 at 12:17 PM, luigi scarso <luigi.scarso at gmail.com> wrote:
> On Fri, Jun 18, 2010 at 12:03 PM, Hans Hagen <pragma at wxs.nl> wrote:
>> On 18-6-2010 11:40, luigi scarso wrote:
>>
>>> mtxrun --script fonts reload
>>
>> this is only needed when you access fonts by name and if a name cannot be
>> found, the name cache will be regenerated automatically
> And it's ok, because the next runs mkiv will *not* rebuild the cache,
> and in mkiv we use fonts mostly by name.
> If I understand correctly, checksum or something similar ?(why not a
> binary cmp then ? just one byte is enough) ?must be done at *every*
> runs -- make no ?sense ,most the times check will be useless .
Also a changing of a font in a middle of a run can be dangerous: the
next run can be faked.





-- 
luigi

From luigi.scarso at gmail.com  Fri Jun 18 12:17:09 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 18 Jun 2010 12:17:09 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <4C1B447B.5090808@wxs.nl>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
	<AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>
	<4C1B3D8C.5020504@wxs.nl> <4C1B3E7C.9000001@elvenkind.com>
	<AANLkTimxTpGcWWNJe4XTKWgel1wAQR5iJt_q1nBBPXsk@mail.gmail.com>
	<4C1B447B.5090808@wxs.nl>
Message-ID: <AANLkTimasrzo20_5cRipoKz_r9NZ7RwLmi_evrqaumvT@mail.gmail.com>

On Fri, Jun 18, 2010 at 12:03 PM, Hans Hagen <pragma at wxs.nl> wrote:
> On 18-6-2010 11:40, luigi scarso wrote:
>
>> mtxrun --script fonts reload
>
> this is only needed when you access fonts by name and if a name cannot be
> found, the name cache will be regenerated automatically
And it's ok, because the next runs mkiv will *not* rebuild the cache,
and in mkiv we use fonts mostly by name.
If I understand correctly, checksum or something similar  (why not a
binary cmp then ? just one byte is enough)  must be done at *every*
runs -- make no  sense ,most the times check will be useless .








-- 
luigi

From mojca.miklavec.lists at gmail.com  Fri Jun 18 16:37:19 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 18 Jun 2010 16:37:19 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <4C1B3D8C.5020504@wxs.nl>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
	<AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>
	<4C1B3D8C.5020504@wxs.nl>
Message-ID: <AANLkTinVL-QbYwZffZXheKiI9KTdWBlSWVZrWBAODnS8@mail.gmail.com>

On Fri, Jun 18, 2010 at 11:34, Hans Hagen wrote:
> On 18-6-2010 11:09, Mojca Miklavec wrote:
>>
>>> Maybe a lua script to install fonts is better -- we can eventually
>>> think to a wxLua gui interface .
>>
>> Or start expanding fontinst to handle OpenType fonts? Anyone?
>
> no, and i see no reason why ... afaik fontinst does things with type 1 fonts

I thought it was ironic enough to understand it as a joke :)

Mojca

From luigi.scarso at gmail.com  Fri Jun 18 16:45:01 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 18 Jun 2010 16:45:01 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <AANLkTinVL-QbYwZffZXheKiI9KTdWBlSWVZrWBAODnS8@mail.gmail.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
	<AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>
	<4C1B3D8C.5020504@wxs.nl>
	<AANLkTinVL-QbYwZffZXheKiI9KTdWBlSWVZrWBAODnS8@mail.gmail.com>
Message-ID: <AANLkTin4Y02Fqs0U65VZIxsqgfP8sA5A4b0RwblowklW@mail.gmail.com>

On Fri, Jun 18, 2010 at 4:37 PM, Mojca Miklavec
<mojca.miklavec.lists at gmail.com> wrote:
> On Fri, Jun 18, 2010 at 11:34, Hans Hagen wrote:
>> On 18-6-2010 11:09, Mojca Miklavec wrote:
>>>
>>>> Maybe a lua script to install fonts is better -- we can eventually
>>>> think to a wxLua gui interface .
>>>
>>> Or start expanding fontinst to handle OpenType fonts? Anyone?
>>
>> no, and i see no reason why ... afaik fontinst does things with type 1 fonts
>
> I thought it was ironic enough to understand it as a joke :)
>
> Mojca
>
http://www.wxwidgets.org/
wxWidgets is a C++ library that lets developers create applications
for Windows, OS X, Linux and UNIX on 32-bit and 64-bit architectures
as well as several mobile platforms including Windows Mobile, iPhone
SDK and embedded GTK+. It has popular language bindings for Python,
Perl, Ruby  and many other languages. Unlike other cross-platform
toolkits, wxWidgets gives its applications a truly native look and
feel because it uses the platform's native API rather than emulating
the GUI. It's also extensive, free, open-source and mature. Why not
give it a try, like many others have?

http://wxlua.sourceforge.net/
wxLua is a set of bindings to the C++ wxWidgets  cross-platform  GUI
library for the Lua programming language. You can write complex,
graphical, interactive programs with wxLua to develop and deliver your
software with the programming ease of an interpreted language like
Lua. Nearly all of the functionality of wxWidgets is exposed to Lua,
meaning that your programs can have windows, dialogs, menus, toolbars,
controls, image loading and saving, drawing, sockets, streams,
printing, clipboard access... and much more.

For Lua x windows already comes with a set of examples of wxLua...
erlang come with a wx binding by default...
ah yes, wxPython is also good...




-- 
luigi

From pragma at wxs.nl  Fri Jun 18 17:24:47 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 18 Jun 2010 17:24:47 +0200
Subject: [dev-context] Checksum of original font files stored in the
 cache?
In-Reply-To: <AANLkTinVL-QbYwZffZXheKiI9KTdWBlSWVZrWBAODnS8@mail.gmail.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>	<4C1B1BF7.1090405@elvenkind.com>	<20100618073625.GA8622@khaled-laptop>	<4C1B2307.9050003@elvenkind.com>	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>	<4C1B2655.1010904@elvenkind.com>	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>	<AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>	<4C1B3D8C.5020504@wxs.nl>
	<AANLkTinVL-QbYwZffZXheKiI9KTdWBlSWVZrWBAODnS8@mail.gmail.com>
Message-ID: <4C1B8FBF.20102@wxs.nl>

On 18-6-2010 4:37, Mojca Miklavec wrote:
> On Fri, Jun 18, 2010 at 11:34, Hans Hagen wrote:
>> On 18-6-2010 11:09, Mojca Miklavec wrote:
>>>
>>>> Maybe a lua script to install fonts is better -- we can eventually
>>>> think to a wxLua gui interface .
>>>
>>> Or start expanding fontinst to handle OpenType fonts? Anyone?
>>
>> no, and i see no reason why ... afaik fontinst does things with type 1 fonts
>
> I thought it was ironic enough to understand it as a joke :)

well, i've learned to take you serious ... actually i already imagined 
you trying to apply fontinst to antykwa as it would give us n*m extra 
fonts metric files which then results in another thousand lines of 
typescripts which taco then has to check into texlive -)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From schuster.wolfgang at googlemail.com  Fri Jun 18 17:39:37 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Fri, 18 Jun 2010 17:39:37 +0200
Subject: [dev-context] structure commands
Message-ID: <4C1B9339.7080101@googlemail.com>

Hi Hans,

what?s the for status the usage of the new structure code commands in mkiv?

header have now the internal commands \definestrcuturehead and 
\setupstructurehead with \definehead and \setuphead as synonyms, should 
the former internal names ever be mentioned in the doku or lets pretend 
they do no exist (what i prefer) and mention only \define/\setuphead?

a bigger problem seems to me the 
\definestructure(separatorset|prefixset|...) commands, the names are too 
long and it's weird to have commands with 'definestrcuture' in their 
name but no matching command with 'strcuture' in the name which use 
these settings.

Wolfgang



From pragma at wxs.nl  Fri Jun 18 20:02:03 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 18 Jun 2010 20:02:03 +0200
Subject: [dev-context] structure commands
In-Reply-To: <4C1B9339.7080101@googlemail.com>
References: <4C1B9339.7080101@googlemail.com>
Message-ID: <4C1BB49B.8050308@wxs.nl>

On 18-6-2010 5:39, Wolfgang Schuster wrote:
> Hi Hans,
>
> what?s the for status the usage of the new structure code commands in mkiv?
>
> header have now the internal commands \definestrcuturehead and
> \setupstructurehead with \definehead and \setuphead as synonyms, should
> the former internal names ever be mentioned in the doku or lets pretend
> they do no exist (what i prefer) and mention only \define/\setuphead?
>
> a bigger problem seems to me the
> \definestructure(separatorset|prefixset|...) commands, the names are too
> long and it's weird to have commands with 'definestrcuture' in their
> name but no matching command with 'strcuture' in the name which use
> these settings.

actually the long ones will go away .. i needed them in the transition 
as i ran old and new commands alongside when testing

we can keep the long ones hidden then

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From luigi.scarso at gmail.com  Sat Jun 19 05:06:12 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Sat, 19 Jun 2010 05:06:12 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <AANLkTin4Y02Fqs0U65VZIxsqgfP8sA5A4b0RwblowklW@mail.gmail.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
	<AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>
	<4C1B3D8C.5020504@wxs.nl>
	<AANLkTinVL-QbYwZffZXheKiI9KTdWBlSWVZrWBAODnS8@mail.gmail.com>
	<AANLkTin4Y02Fqs0U65VZIxsqgfP8sA5A4b0RwblowklW@mail.gmail.com>
Message-ID: <AANLkTilfSs8nmLRkk5RoyrIgUCEZ3MZA4uUvWvksBtyu@mail.gmail.com>

On Fri, Jun 18, 2010 at 4:45 PM, luigi scarso <luigi.scarso at gmail.com> wrote:
> For Lua x windows already comes with a set of examples of wxLua...
> erlang come with a wx binding by default...
> ah yes, wxPython is also good...
also PS_view uses wxlua
http://www.tug.org/texlive/Contents/live/tlpkg/tlpsv/
--[[----------------------------------------------------------------------------
-- PS_View -- previewing utility for Ghostscript interpreter
-- Authors: P. Strzelczyk, P. Pianowski. Created: 15.06.1993; Lua part
26.10.2007
-- Address: BOP s.c. Gen. T. Bora-Komorowskiego 24, 80-377 Gda\'nsk, Poland
--          bop at bop.com.pl
-- Copyright: (c) 2009 BOP s.c.
-- Licence:   GPL
-- Current version: 5.12; 07.10.2009


-- 
luigi

From taco at elvenkind.com  Sat Jun 19 09:06:25 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 19 Jun 2010 09:06:25 +0200
Subject: [dev-context] Checksum of original font files stored in
	the	cache?
In-Reply-To: <AANLkTilfSs8nmLRkk5RoyrIgUCEZ3MZA4uUvWvksBtyu@mail.gmail.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>	<4C1B1BF7.1090405@elvenkind.com>	<20100618073625.GA8622@khaled-laptop>	<4C1B2307.9050003@elvenkind.com>	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>	<4C1B2655.1010904@elvenkind.com>	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>	<AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>	<4C1B3D8C.5020504@wxs.nl>	<AANLkTinVL-QbYwZffZXheKiI9KTdWBlSWVZrWBAODnS8@mail.gmail.com>	<AANLkTin4Y02Fqs0U65VZIxsqgfP8sA5A4b0RwblowklW@mail.gmail.com>
	<AANLkTilfSs8nmLRkk5RoyrIgUCEZ3MZA4uUvWvksBtyu@mail.gmail.com>
Message-ID: <4C1C6C71.7090402@elvenkind.com>

luigi scarso wrote:
> On Fri, Jun 18, 2010 at 4:45 PM, luigi scarso <luigi.scarso at gmail.com> wrote:
>> For Lua x windows already comes with a set of examples of wxLua...
>> erlang come with a wx binding by default...
>> ah yes, wxPython is also good...
> also PS_view uses wxlua

Anyone with recent experience with wxWindows? I tried it a few years
ago when it was still 'new and fresh' and at that time it was worryingly
unstable like that mis-clicking in a tree widget caused it to crash and
the linux combo box selected the items it wanted all by itself.

Best wishes,
Taco

From mojca.miklavec.lists at gmail.com  Sat Jun 19 13:01:39 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 19 Jun 2010 13:01:39 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <4C1C6C71.7090402@elvenkind.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
	<AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>
	<4C1B3D8C.5020504@wxs.nl>
	<AANLkTinVL-QbYwZffZXheKiI9KTdWBlSWVZrWBAODnS8@mail.gmail.com>
	<AANLkTin4Y02Fqs0U65VZIxsqgfP8sA5A4b0RwblowklW@mail.gmail.com>
	<AANLkTilfSs8nmLRkk5RoyrIgUCEZ3MZA4uUvWvksBtyu@mail.gmail.com>
	<4C1C6C71.7090402@elvenkind.com>
Message-ID: <AANLkTikNKbpEhiTioIRP_bNmmgd3cPZfgtvZPQObEeez@mail.gmail.com>

On Sat, Jun 19, 2010 at 09:06, Taco Hoekwater wrote:
>
> Anyone with recent experience with wxWindows?

No recent experience; I can only tell that somebody has written wx
terminal in gnuplot (the idea was to make a nice multi-platform
terminal), but ever since its introduction (must be a few years
already) nobody was able to compile it on Mac (it should be possible,
but none of current developers was able to do it properly). I do think
that some people have managed to compile it on Windows, but I have no
idea about its state. And I have no idea how to link it statically on
linux or mac.

Mojca

From luigi.scarso at gmail.com  Sat Jun 19 15:58:30 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Sat, 19 Jun 2010 15:58:30 +0200
Subject: [dev-context] Checksum of original font files stored in the
	cache?
In-Reply-To: <AANLkTikNKbpEhiTioIRP_bNmmgd3cPZfgtvZPQObEeez@mail.gmail.com>
References: <92A10BF4-E075-455C-AE80-8175F74DD2FB@mpq.mpg.de>
	<4C1B1BF7.1090405@elvenkind.com>
	<20100618073625.GA8622@khaled-laptop>
	<4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
	<AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>
	<4C1B3D8C.5020504@wxs.nl>
	<AANLkTinVL-QbYwZffZXheKiI9KTdWBlSWVZrWBAODnS8@mail.gmail.com>
	<AANLkTin4Y02Fqs0U65VZIxsqgfP8sA5A4b0RwblowklW@mail.gmail.com>
	<AANLkTilfSs8nmLRkk5RoyrIgUCEZ3MZA4uUvWvksBtyu@mail.gmail.com>
	<4C1C6C71.7090402@elvenkind.com>
	<AANLkTikNKbpEhiTioIRP_bNmmgd3cPZfgtvZPQObEeez@mail.gmail.com>
Message-ID: <AANLkTimtNR-abKvXalNmDnlVxYKsZ-r4hqELW_XspdDW@mail.gmail.com>

On Sat, Jun 19, 2010 at 1:01 PM, Mojca Miklavec
<mojca.miklavec.lists at gmail.com> wrote:
> On Sat, Jun 19, 2010 at 09:06, Taco Hoekwater wrote:
>>
>> Anyone with recent experience with wxWindows?
>
> No recent experience; I can only tell that somebody has written wx
> terminal in gnuplot (the idea was to make a nice multi-platform
> terminal), but ever since its introduction (must be a few years
> already) nobody was able to compile it on Mac (it should be possible,
> but none of current developers was able to do it properly). I do think
> that some people have managed to compile it on Windows, but I have no
> idea about its state. And I have no idea how to link it statically on
> linux or mac.
>
> Mojca
>
I'm impressed by
http://code.google.com/p/luaforwindows/
I 'm also used to visit wxwidgets from time to time
and I believe that 2.8 branch is good
I have compiled gnuplot4.4 because I like its lua interface, but not
with wxterminal -- I can check eventually

BTW,IUP can be another guit toolkit to consider:
it's in Lua, it has some TeX ideas, it comes from
http://www.tecgraf.puc-rio.br/iup

(Aditya also starts to use wxMaxima)
-- 
luigi

From khaledhosny at eglug.org  Sat Jun 19 17:21:08 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sat, 19 Jun 2010 18:21:08 +0300
Subject: [dev-context] Checksum of original font files stored in the
 cache?
In-Reply-To: <4C1C6C71.7090402@elvenkind.com>
References: <4C1B2307.9050003@elvenkind.com>
	<AANLkTinERTSPrkYBryc959hRJFjOVBpkqS6SJ1zrjPCI@mail.gmail.com>
	<4C1B2655.1010904@elvenkind.com>
	<AANLkTimYeUO7wepea0VyuN6nwSf-uUy8LvdK7G95FopI@mail.gmail.com>
	<AANLkTin6usmMSPECrlNCd2EIK0Nt6-aTw3zEJdyffnTA@mail.gmail.com>
	<4C1B3D8C.5020504@wxs.nl>
	<AANLkTinVL-QbYwZffZXheKiI9KTdWBlSWVZrWBAODnS8@mail.gmail.com>
	<AANLkTin4Y02Fqs0U65VZIxsqgfP8sA5A4b0RwblowklW@mail.gmail.com>
	<AANLkTilfSs8nmLRkk5RoyrIgUCEZ3MZA4uUvWvksBtyu@mail.gmail.com>
	<4C1C6C71.7090402@elvenkind.com>
Message-ID: <20100619152108.GB19440@khaled-laptop>

On Sat, Jun 19, 2010 at 09:06:25AM +0200, Taco Hoekwater wrote:
> luigi scarso wrote:
> >On Fri, Jun 18, 2010 at 4:45 PM, luigi scarso <luigi.scarso at gmail.com> wrote:
> >>For Lua x windows already comes with a set of examples of wxLua...
> >>erlang come with a wx binding by default...
> >>ah yes, wxPython is also good...
> >also PS_view uses wxlua
> 
> Anyone with recent experience with wxWindows? I tried it a few years
> ago when it was still 'new and fresh' and at that time it was worryingly
> unstable like that mis-clicking in a tree widget caused it to crash and
> the linux combo box selected the items it wanted all by itself.

Not so much recent, but my experience with wx was always poor, it have
very poor rtl support compared to native gtk, it might look native but
it doesn't feel so; I can always tell this is a wx application by
glance.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From pmlists at free.fr  Wed Jun 23 09:35:51 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Wed, 23 Jun 2010 09:35:51 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <4C191053.3040804@googlemail.com>
References: <4C191053.3040804@googlemail.com>
Message-ID: <20100623073551.GA27274@gaston.couberia.bzh>

On Wed, Jun 16 2010, Wolfgang Schuster wrote:
>
> i plan to update cont-en.xml with changes in mkiv (new keys and commands) 

Hello Wolfgang,

Since Hans said "documentation about tex can best be done in tex", I've put
my ideas into some files here:

http://pmrb.free.fr/tmp/context-commands/

What do you think about that?

Cheers, Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From adityam at umich.edu  Wed Jun 23 21:18:55 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 23 Jun 2010 15:18:55 -0400 (EDT)
Subject: [dev-context] cont-en.xml
In-Reply-To: <4C191053.3040804@googlemail.com>
References: <4C191053.3040804@googlemail.com>
Message-ID: <alpine.LNX.2.01.1006231517280.2933@ybpnyubfg.ybpnyqbznva>

On Wed, 16 Jun 2010, Wolfgang Schuster wrote:

> Hi,
>
> i plan to update cont-en.xml with changes in mkiv (new keys and commands) but 
> i'm unsure if it's good to mix mkii and mkiv. I think it's to make a separate 
> definition file for mkiv which contains the extra keys for the commands (e.g. 
> sectionsegments for \setuphead) and use the current one for mkii only.

Is there a XML schema for the commands. The cont-en.xml file mentions 
http://www.pragma-ade.com/commands but that does not exist.

(I am trying to experiement with using YAML instead of XML...)

Aditya

From schuster.wolfgang at googlemail.com  Sun Jun 27 19:11:43 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Sun, 27 Jun 2010 19:11:43 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <20100623073551.GA27274@gaston.couberia.bzh>
References: <4C191053.3040804@googlemail.com>
	<20100623073551.GA27274@gaston.couberia.bzh>
Message-ID: <4C27864F.5020009@googlemail.com>

Am 23.06.10 09:35, schrieb Peter M?nster:
> On Wed, Jun 16 2010, Wolfgang Schuster wrote:
>    
>> i plan to update cont-en.xml with changes in mkiv (new keys and commands)
>>      
> Hello Wolfgang,
>
> Since Hans said "documentation about tex can best be done in tex", I've put
> my ideas into some files here:
>
> http://pmrb.free.fr/tmp/context-commands/
>
> What do you think about that?
>    

I agree that tex is the best tool to document tex but cont-en.xml is only
a tool to help in the documentation and i can't see a big advantage to
rewrite it in pure tex. The explanation for the keys/options is another
thing but they are not what i'm working on.

My files are now available here: http://bitbucket.org/wolfs/setup

Wolfgang




From mariausol at gmail.com  Wed Jun 30 12:57:41 2010
From: mariausol at gmail.com (Marius)
Date: Wed, 30 Jun 2010 13:57:41 +0300
Subject: [dev-context] cont-en.xml
In-Reply-To: <4C27864F.5020009@googlemail.com>
References: <4C191053.3040804@googlemail.com>
	<20100623073551.GA27274@gaston.couberia.bzh>
	<4C27864F.5020009@googlemail.com>
Message-ID: <AANLkTilxoCwG46cG_omDkyLC7aGG1YiwTPqOWJZsrHbE@mail.gmail.com>

Hello,

I think that the best way is to put command syntax description just
before its definition in the context file. This way it will be easier
to keep it always in sync with the code. And most important point here
is that it must be in sync always. If it is, then we can just generate
cont-en.xml and other cont-xx.xml files, but also have a syntax
checker!

Just imagine:

context --check-syntax myfile.tex

shows you which options or commands are experimental, deprecated, and
which are unrecognized, and suggests the command or option to fix
that.

What do you think?

Regards,
Marius


On Sun, Jun 27, 2010 at 8:11 PM, Wolfgang Schuster
<schuster.wolfgang at googlemail.com> wrote:
> Am 23.06.10 09:35, schrieb Peter M?nster:
>>
>> On Wed, Jun 16 2010, Wolfgang Schuster wrote:
>>
>>>
>>> i plan to update cont-en.xml with changes in mkiv (new keys and commands)
>>>
>>
>> Hello Wolfgang,
>>
>> Since Hans said "documentation about tex can best be done in tex", I've
>> put
>> my ideas into some files here:
>>
>> http://pmrb.free.fr/tmp/context-commands/
>>
>> What do you think about that?
>>
>
> I agree that tex is the best tool to document tex but cont-en.xml is only
> a tool to help in the documentation and i can't see a big advantage to
> rewrite it in pure tex. The explanation for the keys/options is another
> thing but they are not what i'm working on.
>
> My files are now available here: http://bitbucket.org/wolfs/setup
>
> Wolfgang
>
>
>
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context
>

From taco at elvenkind.com  Thu Jul  1 09:57:32 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 01 Jul 2010 09:57:32 +0200
Subject: [dev-context] Luatex 0.60.2 announcement
Message-ID: <4C2C4A6C.8020004@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.60.2,
a bugfix release for the 0.60 branch.

Bugfixes:

* Various small portability fixes, especially for non-gcc
   compilers.

* Updated synctex from Jerome Laurens.

* fix bug #406: \pdfliteral hinders hyphenation.

* fix pdf overprinting bug (related to \pdfliteral).

* patch from Akira Kakuto that ensures that only absolute commands
that are inside the %PATH% will be executed in win32's restricted
\write18

* fix a buffer overflow in luafontloader.

* fix cross-platform share-ability of generated formats.

* fix a few typos in the manual.

* fix trashing of the null glue spec by attribute reference code.

* documented the deprecated state and brokenness of otp processing.


The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

   svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.60.2

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org


Have fun,
Taco




From schuster.wolfgang at googlemail.com  Fri Jul  2 09:41:32 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Fri, 02 Jul 2010 09:41:32 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <AANLkTilxoCwG46cG_omDkyLC7aGG1YiwTPqOWJZsrHbE@mail.gmail.com>
References: <4C191053.3040804@googlemail.com>	<20100623073551.GA27274@gaston.couberia.bzh>	<4C27864F.5020009@googlemail.com>
	<AANLkTilxoCwG46cG_omDkyLC7aGG1YiwTPqOWJZsrHbE@mail.gmail.com>
Message-ID: <4C2D982C.3020700@googlemail.com>

Am 30.06.10 12:57, schrieb Marius:
> Hello,
>
> I think that the best way is to put command syntax description just
> before its definition in the context file. This way it will be easier
> to keep it always in sync with the code. And most important point here
> is that it must be in sync always. If it is, then we can just generate
> cont-en.xml and other cont-xx.xml files, but also have a syntax
> checker!
>
> Just imagine:
>
> context --check-syntax myfile.tex
>
> shows you which options or commands are experimental, deprecated, and
> which are unrecognized, and suggests the command or option to fix
> that.
>
> What do you think?
>    

The idea is not bad but who is going to do this? Hans implemented
in mkiv the function to check assignments list of valid keys but
this function isn't used because nobody writes the necessary lists
which contexts requires to do these checks and the same will happen
with the system you suggest.

Wolfgang


From pmlists at free.fr  Fri Jul  2 11:28:06 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Fri, 2 Jul 2010 11:28:06 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <4C2D982C.3020700@googlemail.com>
References: <4C191053.3040804@googlemail.com>
	<20100623073551.GA27274@gaston.couberia.bzh>
	<4C27864F.5020009@googlemail.com>
	<AANLkTilxoCwG46cG_omDkyLC7aGG1YiwTPqOWJZsrHbE@mail.gmail.com>
	<4C2D982C.3020700@googlemail.com>
Message-ID: <20100702092806.GA18209@gaston.couberia.bzh>

On Fri, Jul 02 2010, Wolfgang Schuster wrote:

> The idea is not bad but who is going to do this? Hans implemented
> in mkiv the function to check assignments list of valid keys but
> this function isn't used because nobody writes the necessary lists
> which contexts requires to do these checks and the same will happen
> with the system you suggest.

That's why I'm eventually going to do this:
http://archive.contextgarden.net/message/20100508.204345.b5003312.en.html

Perhaps using tex-files like this:
http://pmrb.free.fr/tmp/context-commands/

Perhaps in this directory:
http://foundry.supelec.fr/svn/contextman/context-commands
So that everybody can contribute via svn.

But before doing that effort, I still need a bit more feedback...

Cheers, Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From taco at elvenkind.com  Fri Jul  2 12:21:00 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 02 Jul 2010 12:21:00 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <20100702092806.GA18209@gaston.couberia.bzh>
References: <4C191053.3040804@googlemail.com>	<20100623073551.GA27274@gaston.couberia.bzh>	<4C27864F.5020009@googlemail.com>	<AANLkTilxoCwG46cG_omDkyLC7aGG1YiwTPqOWJZsrHbE@mail.gmail.com>	<4C2D982C.3020700@googlemail.com>
	<20100702092806.GA18209@gaston.couberia.bzh>
Message-ID: <4C2DBD8C.3070704@elvenkind.com>

On 07/02/2010 11:28 AM, Peter M?nster wrote:
> On Fri, Jul 02 2010, Wolfgang Schuster wrote:
>
>> The idea is not bad but who is going to do this? Hans implemented
>> in mkiv the function to check assignments list of valid keys but
>> this function isn't used because nobody writes the necessary lists
>> which contexts requires to do these checks and the same will happen
>> with the system you suggest.
>
> That's why I'm eventually going to do this:
> http://archive.contextgarden.net/message/20100508.204345.b5003312.en.html
>
> Perhaps using tex-files like this:
> http://pmrb.free.fr/tmp/context-commands/
>
> Perhaps in this directory:
> http://foundry.supelec.fr/svn/contextman/context-commands
> So that everybody can contribute via svn.
>
> But before doing that effort, I still need a bit more feedback...

I think this will be a wasted effort.  I predict that any future
version of context that will be able to do syntax checking is going
to be based on lua for the verification process, not tex macros.

Possibly the internal structure could also be read in from structured
comments in the actual source files as opposed to the current external
xml files (not a bad idea as it increased the chance of everything 
staying up-to-date). But even in that case, those comments are much
more likely to be lua or compressed ascii code than actual tex syntax
because interpretation will be done mostly by lua code.

Best wishes,
Taco

From pmlists at free.fr  Fri Jul  2 12:52:55 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Fri, 2 Jul 2010 12:52:55 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <4C2DBD8C.3070704@elvenkind.com>
References: <4C191053.3040804@googlemail.com>
	<20100623073551.GA27274@gaston.couberia.bzh>
	<4C27864F.5020009@googlemail.com>
	<AANLkTilxoCwG46cG_omDkyLC7aGG1YiwTPqOWJZsrHbE@mail.gmail.com>
	<4C2D982C.3020700@googlemail.com>
	<20100702092806.GA18209@gaston.couberia.bzh>
	<4C2DBD8C.3070704@elvenkind.com>
Message-ID: <20100702105255.GA18574@gaston.couberia.bzh>

On Fri, Jul 02 2010, Taco Hoekwater wrote:

> I think this will be a wasted effort.  I predict that any future
> version of context that will be able to do syntax checking is going
> to be based on lua for the verification process, not tex macros.

That's even better, because I'm more comfortable with lua than with tex!
Cheers, Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From mariausol at gmail.com  Mon Jul  5 11:44:10 2010
From: mariausol at gmail.com (Marius)
Date: Mon, 5 Jul 2010 12:44:10 +0300
Subject: [dev-context] cont-en.xml
In-Reply-To: <4C2DBD8C.3070704@elvenkind.com>
References: <4C191053.3040804@googlemail.com>
	<20100623073551.GA27274@gaston.couberia.bzh>
	<4C27864F.5020009@googlemail.com>
	<AANLkTilxoCwG46cG_omDkyLC7aGG1YiwTPqOWJZsrHbE@mail.gmail.com>
	<4C2D982C.3020700@googlemail.com>
	<20100702092806.GA18209@gaston.couberia.bzh>
	<4C2DBD8C.3070704@elvenkind.com>
Message-ID: <AANLkTinqywy5Eou-9iLYq6FgCgaTYUDTpoaWN7eLUp-C@mail.gmail.com>

On Fri, Jul 2, 2010 at 1:21 PM, Taco Hoekwater <taco at elvenkind.com> wrote:

> I think this will be a wasted effort.  I predict that any future
> version of context that will be able to do syntax checking is going
> to be based on lua for the verification process, not tex macros.

There is already an example implementation of comments reading.

http://gitorious.org/context/context/blobs/master/scripts/context/lua/mtx-modules.lua

cd tex/context/base
mtxrun --script modules --process page-txt.mkiv

see the resulting page-txt-mkiv.ted and page-txt-mkiv.pdf files.

> Possibly the internal structure could also be read in from structured
> comments in the actual source files as opposed to the current external
> xml files (not a bad idea as it increased the chance of everything staying
> up-to-date).

So, reading of comments could be implemented based on this example.

> But even in that case, those comments are much
> more likely to be lua or compressed ascii code than actual tex syntax
> because interpretation will be done mostly by lua code.

What do you mean by saying "to be lua or compressed ascii code"? I
can't imagine how it may look like, as I am new to the lua. Could you,
please, give an example?

I will try to code a rough draft, but at first it needs to be decided
what syntax we will use for these comments.

Regards,
Marius

From taco at elvenkind.com  Mon Jul  5 12:26:12 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 05 Jul 2010 12:26:12 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <AANLkTinqywy5Eou-9iLYq6FgCgaTYUDTpoaWN7eLUp-C@mail.gmail.com>
References: <4C191053.3040804@googlemail.com>	<20100623073551.GA27274@gaston.couberia.bzh>	<4C27864F.5020009@googlemail.com>	<AANLkTilxoCwG46cG_omDkyLC7aGG1YiwTPqOWJZsrHbE@mail.gmail.com>	<4C2D982C.3020700@googlemail.com>	<20100702092806.GA18209@gaston.couberia.bzh>	<4C2DBD8C.3070704@elvenkind.com>
	<AANLkTinqywy5Eou-9iLYq6FgCgaTYUDTpoaWN7eLUp-C@mail.gmail.com>
Message-ID: <4C31B344.7080105@elvenkind.com>

On 07/05/2010 11:44 AM, Marius wrote:
> On Fri, Jul 2, 2010 at 1:21 PM, Taco Hoekwater<taco at elvenkind.com>  wrote:
>
>> I think this will be a wasted effort.  I predict that any future
>> version of context that will be able to do syntax checking is going
>> to be based on lua for the verification process, not tex macros.
>
> There is already an example implementation of comments reading.
>
> http://gitorious.org/context/context/blobs/master/scripts/context/lua/mtx-modules.lua
>
> cd tex/context/base
> mtxrun --script modules --process page-txt.mkiv
>
> see the resulting page-txt-mkiv.ted and page-txt-mkiv.pdf files.

Yes, this functionality has been around for ages, and is the basis of
luigi's typeset source documentation project:

   http://foundry.supelec.fr/gf/project/modules

One possible extension would be:

%X  <cd:command name="showbodyfont">
%X  <cd:sequence>
%X      <cd:string value="showbodyfont"/>
%X    </cd:sequence>
%X    <cd:arguments>
%X      <cd:keywords n="1" optional="yes" list="yes">
%X        <cd:inherit name="setupbodyfont" n="1"/>
%X      </cd:keywords>
%X    </cd:arguments>
%X  </cd:command>

But that is rather verbose and needs processing to create useful
solution. Another possibility using actual lua could be:

%X showbodyfont = {
%X   seq = { string = "showbodyfont" },
%X   arg = { keywords = {
%X              n=1,list=true, optional=true,
%X              inherit={ name = "setupbodyfont", n = 1}}}}

Essentially the same information, but shorter, and it could
be loaded into lua directly using 'loadstring'. Or there could
be a more TeX-like approach looking like this:

%X \cmd{showbodyfont}([...,...,...])->#1:\inherited{setupbodyfont}

to be parsed by a bit of lua code.

It all depends on what Hans is most comfortable with in keying in,
because if Hans doesn't like it the chances of anything like this
remaining up-to-date are about zero.


Best wishes,
Taco

From schuster.wolfgang at googlemail.com  Tue Jul  6 17:34:30 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Tue, 06 Jul 2010 17:34:30 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <4C31B344.7080105@elvenkind.com>
References: <4C191053.3040804@googlemail.com>	<20100623073551.GA27274@gaston.couberia.bzh>	<4C27864F.5020009@googlemail.com>	<AANLkTilxoCwG46cG_omDkyLC7aGG1YiwTPqOWJZsrHbE@mail.gmail.com>	<4C2D982C.3020700@googlemail.com>	<20100702092806.GA18209@gaston.couberia.bzh>	<4C2DBD8C.3070704@elvenkind.com>	<AANLkTinqywy5Eou-9iLYq6FgCgaTYUDTpoaWN7eLUp-C@mail.gmail.com>
	<4C31B344.7080105@elvenkind.com>
Message-ID: <4C334D06.7090207@googlemail.com>

Am 05.07.10 12:26, schrieb Taco Hoekwater:
> On 07/05/2010 11:44 AM, Marius wrote:
>> On Fri, Jul 2, 2010 at 1:21 PM, Taco Hoekwater<taco at elvenkind.com>  
>> wrote:
>>> I think this will be a wasted effort.  I predict that any future
>>> version of context that will be able to do syntax checking is going
>>> to be based on lua for the verification process, not tex macros.

The 'key' checker for \getparameters in mkiv is lua based.
>> There is already an example implementation of comments reading.
>>
>> http://gitorious.org/context/context/blobs/master/scripts/context/lua/mtx-modules.lua 
>>
>>
>> cd tex/context/base
>> mtxrun --script modules --process page-txt.mkiv
>>
>> see the resulting page-txt-mkiv.ted and page-txt-mkiv.pdf files.
> Yes, this functionality has been around for ages, and is the basis of
> luigi's typeset source documentation project:
>
>   http://foundry.supelec.fr/gf/project/modules
And a similar mechanism is available to document lua files but
it use xml markup rather than tex (and this since the beginning).
> One possible extension would be:
>
> %X <cd:command name="showbodyfont">
> %X <cd:sequence>
> %X <cd:string value="showbodyfont"/>
> %X </cd:sequence>
> %X <cd:arguments>
> %X <cd:keywords n="1" optional="yes" list="yes">
> %X <cd:inherit name="setupbodyfont" n="1"/>
> %X </cd:keywords>
> %X </cd:arguments>
> %X </cd:command>
>
> But that is rather verbose and needs processing to create useful
> solution. Another possibility using actual lua could be:
>
> %X showbodyfont = {
> %X   seq = { string = "showbodyfont" },
> %X   arg = { keywords = {
> %X              n=1,list=true, optional=true,
> %X              inherit={ name = "setupbodyfont", n = 1}}}}
>
> Essentially the same information, but shorter, and it could
> be loaded into lua directly using 'loadstring'. Or there could
> be a more TeX-like approach looking like this:
>
> %X \cmd{showbodyfont}([...,...,...])->#1:\inherited{setupbodyfont}
>
> to be parsed by a bit of lua code.
>
> It all depends on what Hans is most comfortable with in keying in,
> because if Hans doesn't like it the chances of anything like this
> remaining up-to-date are about zero.
I'm against storing the command definition in the relevant files because
the definitions are meant for documentation and it's nonsense in this way
because you need sometimes references to other commands and who should
you show a command for spacing which is written in a font file.

Another problem is that big macros like \section or \setuphead are split
over different files (strc-sec.mkiv, strc-doc.mkiv, strc-doc.lua and 
strc-ren.mkiv)
and when you store the \section definition now in strc-sec.mkiv but make
a change in strc-ren.mkiv you will forget to add the change in the 
definition
file are too high.

 From your two different variants i prefer the lua solution because it's
closer to the current xml version and it's easier to add variants of
a command (e.g. \setupinterlinespace[small] and 
\setupinterlinespace[line=...])

Wolfgang


From taco at elvenkind.com  Tue Jul  6 20:23:55 2010
From: taco at elvenkind.com (taco)
Date: Tue, 06 Jul 2010 20:23:55 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <4C334D06.7090207@googlemail.com>
References: <4C191053.3040804@googlemail.com>	<20100623073551.GA27274@gaston.couberia.bzh>	<4C27864F.5020009@googlemail.com>	<AANLkTilxoCwG46cG_omDkyLC7aGG1YiwTPqOWJZsrHbE@mail.gmail.com>	<4C2D982C.3020700@googlemail.com>	<20100702092806.GA18209@gaston.couberia.bzh>	<4C2DBD8C.3070704@elvenkind.com>	<AANLkTinqywy5Eou-9iLYq6FgCgaTYUDTpoaWN7eLUp-C@mail.gmail.com>
	<4C31B344.7080105@elvenkind.com> <4C334D06.7090207@googlemail.com>
Message-ID: <4C3374BB.1010106@elvenkind.com>

Wolfgang Schuster wrote:

> I'm against storing the command definition in the relevant files because
> the definitions are meant for documentation and it's nonsense in this way
> because you need sometimes references to other commands and who should
> you show a command for spacing which is written in a font file.

Well, they could be extracted automatically to a normal
lua file, but you had a good point about the \section etc
later on, so a separate file would probably be better
indeed.

And I also prefer the lua style, much less verbose than xml
while still containing all needed info. The Tex-like
stuff was meant as an example of what *could* be done,
but getting a good syntax for that that is still extensible
could be quite hard and why should we bother if the lua
code is readable enough.

However, we *do* have to write a formal description of the
lua syntax to avoid confusion, if this is indeed the way
to go. At this point I think we should ask Hans' how he feels
about this stuff, but unf. he has hardware problems and is
not as reachable as could be. Should be solved in a day or so.


Best wishes,
Taco

From pragma at wxs.nl  Wed Jul  7 02:30:53 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 07 Jul 2010 02:30:53 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <4C3374BB.1010106@elvenkind.com>
References: <4C191053.3040804@googlemail.com>	<20100623073551.GA27274@gaston.couberia.bzh>	<4C27864F.5020009@googlemail.com>	<AANLkTilxoCwG46cG_omDkyLC7aGG1YiwTPqOWJZsrHbE@mail.gmail.com>	<4C2D982C.3020700@googlemail.com>	<20100702092806.GA18209@gaston.couberia.bzh>	<4C2DBD8C.3070704@elvenkind.com>	<AANLkTinqywy5Eou-9iLYq6FgCgaTYUDTpoaWN7eLUp-C@mail.gmail.com>	<4C31B344.7080105@elvenkind.com>
	<4C334D06.7090207@googlemail.com> <4C3374BB.1010106@elvenkind.com>
Message-ID: <4C33CABD.2090009@wxs.nl>

On 6-7-2010 8:23, taco wrote:

sorry for delays in responding ... i'm still in the process of fixing 
hardware / installations etc

> Wolfgang Schuster wrote:
>
>> I'm against storing the command definition in the relevant files because
>> the definitions are meant for documentation and it's nonsense in this way
>> because you need sometimes references to other commands and who should
>> you show a command for spacing which is written in a font file.

fyi: long ago it started like that: a \startsetup... definition as part 
of the tex files but it was a pain togenerate the lists that way

> Well, they could be extracted automatically to a normal
> lua file, but you had a good point about the \section etc
> later on, so a separate file would probably be better
> indeed.

i'm not so sure if i want to abandon the xml file (yet) as theres 
nothing wrong with xml per se ... it's no big deal to generate lua from 
it if needed (both are as unreadable although with somenamespacing we 
could probably share more in lua but at the cost of readablity (and i'm 
really sensitive to formating of such files -)

needs more thinking as changes in that area should not happen too often

we can consider splitting up things but as already mentioned it's hard 
to come up with a devision based on the tex files ... ok, in due time we 
might get more granularity; an option is to make files per block: page, 
strc, core, ...

concerning the documentation in the lua files (not that much and 
currently in xml) ... it could be just context code as it then permits 
embedding examples

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at bittext.nl  Thu Jul  8 08:29:29 2010
From: taco at bittext.nl (Taco Hoekwater)
Date: Thu, 08 Jul 2010 08:29:29 +0200
Subject: [dev-context] [Fwd: [unimath] XITS - fifth beta]
Message-ID: <4C357049.7080500@bittext.nl>



-------- Original Message --------
Subject: [unimath] XITS - fifth beta
Date: Thu, 8 Jul 2010 06:12:50 +0300
From: Khaled Hosny <khaledhosny at eglug.org>
Reply-To: unimath at googlegroups.com
To: unimath at googlegroups.com

Hello everyone,

I just uploaded a new XITS beta, available from the download area? as
usual. Check FONTLOG for the changes.

I think this is going to be the last beta, if there isn't any major bugs
or highly important feature requests, I'll drop the beta flag and upload
it to CTAN.

?http://github.com/khaledhosny/xits-math/downloads

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

-- 
You received this message because you are subscribed to the Google
Groups "Unicode maths for TeX" group:
<http://groups.google.com/group/unimath>. To post to this group, send
email to <unimath at googlegroups.com>.

From taco at elvenkind.com  Wed Jul 14 12:59:04 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 14 Jul 2010 12:59:04 +0200
Subject: [dev-context] MetaPost 1.500 (alpha version)
Message-ID: <4C3D9878.4070009@elvenkind.com>


I am happy to announce a new *alpha* release of MetaPost:

----------------------------------------------------------------------
MetaPost 1.500
----------------------------------------------------------------------

The standalone distribution package and a win32 binary can be downloaded
immediately from

   http://foundry.supelec.fr/gf/project/metapost/

This is an *alpha* release following a major internal rewrite, so do
not use this version for production purposes, but please test with
as many files as you can.

The win32 binary is intended for texlive or a similar web2c-based
installation, this executable will *not* work for miktex.

Of course, we welcome any comments (either good or bad) that you may
have. Simply replying to this message is fine, but see the bottom of
the message for a more formal way to report bugs and feature requests.

----------------------------------------------------------------------
What is new in MetaPost version 1.500:
----------------------------------------------------------------------

* Actual memory dump files do not exist any more. --mem=<MEM> and
   all other methods of supplying a MEM file are now interpreted
   somewhat like this pseudo-metapost-code:

     begingroup;
     let dump = end;
     input MEM[.mp];
     endgroup;

   this process is supposed to be transparent besides the facto that
   there is some extra terminal output and logging.

* All memory is now allocated and freed dynamically. There are only
   two remaining overflow errors(1):

   "expansion depth" : this is a guard against infinite recursion,
                       the value is 10000.
   "sizes per font"  : this is maxed out for data-structure reasons,
                       the value is 32767.

   from texmf.cnf, now only the "error_line", "half_error_line" and
   "print_line settings" are used.

   (1) but now you can reach the operating system limits, of course.

* As this is an alpha release containing lots and lots of new code,
   MetaPost starts up with the internal equivalent of 'loggingall;'
   in effect. This results in log files that can help in debugging.

* Expect bugs and (minor) memory leaks.

----------------------------------------------------------------------
Legal notice / license / bug reports
----------------------------------------------------------------------

MetaPost is a system for producing graphics developed by John Hobby
at AT&T, based on Donald Knuth's Metafont.  The MetaPost home page
is http://tug.org/metapost.

MetaPost is free software: you can redistribute it and/or modify it
under the terms of the GNU Lesser General Public License as published
by the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

The MetaPost development project is currently hosted at Supelec,
http://foundry.supelec.fr/gf/project/metapost; with a bug tracker
at http://tracker.luatex.org/. Please report bugs and
request enhancements through there if possible. Alternatively, you
can reach us through the <metapost at tug.org> mailing list as well.

Have fun!

Taco Hoekwater, for the MetaPost team, July 14, 2010


From pmlists at free.fr  Fri Jul 16 16:41:52 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Fri, 16 Jul 2010 16:41:52 +0200
Subject: [dev-context] context commands in lua-files
Message-ID: <20100716144152.GB23449@gaston.couberia.bzh>

Hello,

Here some new ideas:

http://pmrb.free.fr/tmp/context-commands/

All feedback is welcome!

Cheers, Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From taco at elvenkind.com  Sat Jul 17 08:41:55 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 17 Jul 2010 08:41:55 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <20100716144152.GB23449@gaston.couberia.bzh>
References: <20100716144152.GB23449@gaston.couberia.bzh>
Message-ID: <4C4150B3.8030902@elvenkind.com>

On 07/16/2010 04:41 PM, Peter M?nster wrote:
> Hello,
>
> Here some new ideas:
>
> http://pmrb.free.fr/tmp/context-commands/
>
> All feedback is welcome!

FWIW, I actually like this: I find it more readable
than the XML version, and the inline descriptions and
comments are clearly helpful.

Best wishes,
Taco

From luigi.scarso at gmail.com  Sat Jul 17 08:58:00 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Sat, 17 Jul 2010 08:58:00 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <20100716144152.GB23449@gaston.couberia.bzh>
References: <20100716144152.GB23449@gaston.couberia.bzh>
Message-ID: <AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>

On Fri, Jul 16, 2010 at 4:41 PM, Peter M?nster <pmlists at free.fr> wrote:

> Hello,
>
> Here some new ideas:
>
> http://pmrb.free.fr/tmp/context-commands/
>
> All feedback is welcome!
>
> Cheers, Peter
>
> --
> Contact information: http://pmrb.free.fr/contact/
>
>
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context
>
Why don't put them into a table as is in
http://www.lua.org/pil/10.1.html
For exampl e placefloat.lua should be
placefloat ={
props = {
    generated = true,               -- default = false
    fixpart = "place",
    varpart = "float",
    generator = "definefloat",
    categories = {"Structure", "Graphic"}
    -- first category is main category, in the other categories, there are
    -- just references
}
-- ... more data
}

It's very powerful then to manage this file with lua functions.


-- 
luigi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20100717/8fb26cea/attachment.html>

From pmlists at free.fr  Sat Jul 17 10:13:17 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Sat, 17 Jul 2010 10:13:17 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>
References: <20100716144152.GB23449@gaston.couberia.bzh>
	<AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>
Message-ID: <20100717081315.GA30956@gaston.couberia.bzh>

On Sat, Jul 17 2010, luigi scarso wrote:

> Why don't put them into a table as is in
> http://www.lua.org/pil/10.1.html
> For exampl e placefloat.lua should be
> placefloat ={
> props = {
> [...]

Because I like to avoid redundancy.

It's easy to do things like this automatically:

local placefloat = {}
setfenv(0, placefloat)
dofile("placefloat.lua")
setfenv(0, _G)
print(placefloat.props.fixpart)


Or like this:

placefloat.lua:

entry = {               -- or "command"
      props = ...,
      args = ...,
      ...
}

And then:

local commands = {}
dofile("placefloat.lua")
commands.placefloat = entry (or command)
print(placefloat.props.fixpart)

Cheers, Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From mojca.miklavec.lists at gmail.com  Sat Jul 17 19:39:26 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 17 Jul 2010 19:39:26 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <20100716144152.GB23449@gaston.couberia.bzh>
References: <20100716144152.GB23449@gaston.couberia.bzh>
Message-ID: <AANLkTimYM1cZzPd1QszBowuIpt_cv5wfDPS_62kb3z_o@mail.gmail.com>

On Fri, Jul 16, 2010 at 16:41, Peter M?nster <pmlists at free.fr> wrote:
> Hello,
>
> Here some new ideas:
>
> http://pmrb.free.fr/tmp/context-commands/

Wow! I like it very much.

Mojca

From pmlists at free.fr  Sat Jul 17 21:32:14 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Sat, 17 Jul 2010 21:32:14 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>
References: <20100716144152.GB23449@gaston.couberia.bzh>
	<AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>
Message-ID: <20100717193214.GA4445@gaston.couberia.bzh>

On Sat, Jul 17 2010, luigi scarso wrote:

> Why don't put them into a table as is in
> http://www.lua.org/pil/10.1.html

Ok, now one file defines exactly one "command" table.
I added also other minor enhancements.

Cheers, Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From mojca.miklavec.lists at gmail.com  Sat Jul 17 23:09:43 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 17 Jul 2010 23:09:43 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <20100717193214.GA4445@gaston.couberia.bzh>
References: <20100716144152.GB23449@gaston.couberia.bzh>
	<AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>
	<20100717193214.GA4445@gaston.couberia.bzh>
Message-ID: <AANLkTinQeDq5T0LpgvIZaHWSEeLLC22bmhmU5rUHfEkC@mail.gmail.com>

On Sat, Jul 17, 2010 at 21:32, Peter M?nster wrote:
> On Sat, Jul 17 2010, luigi scarso wrote:
>
>> Why don't put them into a table as is in
>> http://www.lua.org/pil/10.1.html
>
> Ok, now one file defines exactly one "command" table.

For my taste this is better as well.

A few random comments from externalfigure:
- Despite the fact that the command name is known from filename,
wouldn't it be nice to have externalfigure string defined somewhere?
- It is not really needed, but it helps when cross-referencing: I
would nevertheless leave the [1] = {...}, [2] = {...} for arguments
- The following:
    settings = {
        inherit = "useexternalfigure",
        -- n = 3 not needed, since one command has only one settings-option
    },
is a bit weird to me. Why not putting the "inherit" already under
arguments above? And yes, you probably do need to tell from which
argument of \useexternalfigure you want to inherit the settings.
- If all the three arguments are optional, it's a bit difficult to
tell what combination of arguments is allowed, so it might make sense
to be a bit more verbose in that (to tell somehow that for example
only 123 and 23 and 3 is allowed, but not 13 for example), but this is
not too important.

Mojca

From pragma at wxs.nl  Sat Jul 17 23:50:15 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 17 Jul 2010 23:50:15 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <AANLkTimYM1cZzPd1QszBowuIpt_cv5wfDPS_62kb3z_o@mail.gmail.com>
References: <20100716144152.GB23449@gaston.couberia.bzh>
	<AANLkTimYM1cZzPd1QszBowuIpt_cv5wfDPS_62kb3z_o@mail.gmail.com>
Message-ID: <4C422597.4010701@wxs.nl>

On 17-7-2010 7:39, Mojca Miklavec wrote:
> On Fri, Jul 16, 2010 at 16:41, Peter M?nster<pmlists at free.fr>  wrote:
>> Hello,
>>
>> Here some new ideas:
>>
>> http://pmrb.free.fr/tmp/context-commands/
>
> Wow! I like it very much.

i'll come back to this later, just a few comments now:

- props -> properties (or whatever, but no shortcuts)
- args -> arguments
- [=[ looks rather bad but anyhow, examples should probably not be done 
this way (examples can be go into tex files)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Sun Jul 18 08:09:10 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 18 Jul 2010 08:09:10 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <20100717193214.GA4445@gaston.couberia.bzh>
References: <20100716144152.GB23449@gaston.couberia.bzh>	<AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>
	<20100717193214.GA4445@gaston.couberia.bzh>
Message-ID: <4C429A86.2080309@elvenkind.com>

On 07/17/2010 09:32 PM, Peter M?nster wrote:
> On Sat, Jul 17 2010, luigi scarso wrote:
>
>> Why don't put them into a table as is in
>> http://www.lua.org/pil/10.1.html
>
> Ok, now one file defines exactly one "command" table.
> I added also other minor enhancements.

If you start your files like this:

   command = command or {}
   command['placefloat'] = {
     comment = "Insert a floating element.",
     ...
   }

then they could easily all be merged into a single command table
during loading or even via 'cat'.

Like Mojca says, it is better not to be dependent on the file name, and
also it is more efficient to have a single lua file than 500-600
separate ones. There is no need to combine them immediately, but if
this goes into the distro at some point then a single large file is
definitely better than lots of smaller ones.

Best wishes,
Taco

From taco at elvenkind.com  Sun Jul 18 08:25:46 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 18 Jul 2010 08:25:46 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <AANLkTinQeDq5T0LpgvIZaHWSEeLLC22bmhmU5rUHfEkC@mail.gmail.com>
References: <20100716144152.GB23449@gaston.couberia.bzh>	<AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>	<20100717193214.GA4445@gaston.couberia.bzh>
	<AANLkTinQeDq5T0LpgvIZaHWSEeLLC22bmhmU5rUHfEkC@mail.gmail.com>
Message-ID: <4C429E6A.8060406@elvenkind.com>

On 07/17/2010 11:09 PM, Mojca Miklavec wrote:
> - The following:
>      settings = {
>          inherit = "useexternalfigure",
>          -- n = 3 not needed, since one command has only one settings-option
>      },
> is a bit weird to me. Why not putting the "inherit" already under
> arguments above? And yes, you probably do need to tell from which
> argument of \useexternalfigure you want to inherit the settings.

I also think inline is better, even though it adds redundancy.

The 'n' is probably not needed in practice even though conceptually
Mojca is right.

> - If all the three arguments are optional, it's a bit difficult to
> tell what combination of arguments is allowed, so it might make sense
> to be a bit more verbose in that (to tell somehow that for example
> only 123 and 23 and 3 is allowed, but not 13 for example), but this is
> not too important.

One way around that (and the 'n' issue) is to do something like this:

     arguments = {
             ["label_arg"] = {
                 type = label,
             },
             ["filename_arg"] = {
                 type = file,
             },
             ["settings_arg"] = {
                 type = settings,
                 comment = "short comment for this option",
                 description = "long description for this option",
                 inherit = { "useexternalfigure", 'settings_arg' }

             },
             ["parent_arg"] = {
                 type = parent,
                 comment = "short comment for this option",
                 description = "long description for this option"
             },
         },
       variants = {  -- just an example
           { "filename_arg" },
           { "label_arg", "filename_arg" },
           { "label_arg", "filename_arg", "settings_arg" },
           { "filename_arg", "parent_arg" },

         }
     },

but I am not sure this is really better ?

Best wishes,
Taco

From pmlists at free.fr  Sun Jul 18 09:06:42 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Sun, 18 Jul 2010 09:06:42 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <4C422597.4010701@wxs.nl>
References: <20100716144152.GB23449@gaston.couberia.bzh>
	<AANLkTimYM1cZzPd1QszBowuIpt_cv5wfDPS_62kb3z_o@mail.gmail.com>
	<4C422597.4010701@wxs.nl>
Message-ID: <20100718070642.GA7772@gaston.couberia.bzh>

On Sat, Jul 17 2010, Hans Hagen wrote:

> - props -> properties (or whatever, but no shortcuts)

No more needed.


> - args -> arguments

Done.


> - [=[ looks rather bad but anyhow, examples should probably not be done 
> this way (examples can be go into tex files)

Ok, why not!

Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From pmlists at free.fr  Sun Jul 18 09:12:19 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Sun, 18 Jul 2010 09:12:19 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <4C429A86.2080309@elvenkind.com>
References: <20100716144152.GB23449@gaston.couberia.bzh>
	<AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>
	<20100717193214.GA4445@gaston.couberia.bzh>
	<4C429A86.2080309@elvenkind.com>
Message-ID: <20100718071219.GB7772@gaston.couberia.bzh>

On Sun, Jul 18 2010, Taco Hoekwater wrote:

> If you start your files like this:
>
>   command = command or {}
>   command['placefloat'] = {
>     comment = "Insert a floating element.",
>     ...
>   }
>
> then they could easily all be merged into a single command table
> during loading or even via 'cat'.
>
> Like Mojca says, it is better not to be dependent on the file name, and
> also it is more efficient to have a single lua file than 500-600
> separate ones. There is no need to combine them immediately, but if
> this goes into the distro at some point then a single large file is
> definitely better than lots of smaller ones.

Ok, I agree. The very strong reason for one file per command is the better
comfort when editing the files.
And the big file for the distribution can be generated with
cat * >commands.lua

Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From pmlists at free.fr  Sun Jul 18 09:38:16 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Sun, 18 Jul 2010 09:38:16 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <AANLkTinQeDq5T0LpgvIZaHWSEeLLC22bmhmU5rUHfEkC@mail.gmail.com>
References: <20100716144152.GB23449@gaston.couberia.bzh>
	<AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>
	<20100717193214.GA4445@gaston.couberia.bzh>
	<AANLkTinQeDq5T0LpgvIZaHWSEeLLC22bmhmU5rUHfEkC@mail.gmail.com>
Message-ID: <20100718073816.GC7772@gaston.couberia.bzh>

On Sat, Jul 17 2010, Mojca Miklavec wrote:

> A few random comments from externalfigure:
> - Despite the fact that the command name is known from filename,
> wouldn't it be nice to have externalfigure string defined somewhere?

Ok, see response to Taco.


> - It is not really needed, but it helps when cross-referencing: I
> would nevertheless leave the [1] = {...}, [2] = {...} for arguments
> - The following:
>     settings = {
>         inherit = "useexternalfigure",
>         -- n = 3 not needed, since one command has only one settings-option
>     },
> is a bit weird to me. Why not putting the "inherit" already under
> arguments above? And yes, you probably do need to tell from which
> argument of \useexternalfigure you want to inherit the settings.


From bogus@does.not.exist.com  Mon Mar 22 21:06:45 2010
From: bogus@does.not.exist.com ()
Date: Mon, 22 Mar 2010 20:06:45 -0000
Subject: No subject
Message-ID: <mailman.9.1279438701.4273.dev-context@ntg.nl>

- one command has no more than one settings-option (key-val-pairs)
- one command has no more than one keywords-option

If this is true, then there is no problem with cross-referencing.
The n = X would be even difficult, when there a variants: imagine,
\useexternalfigure can have settings at n = 2 or n = 4 and so on.

And I like the separate settings-table, because it can be very big and
would clutter the arguments table.

If my assumptions are wrong, then there will be more problems:
perhaps the settings must go into the arguments table or we need a lot of
numbering (n = X here and there).


> - If all the three arguments are optional, it's a bit difficult to
> tell what combination of arguments is allowed, so it might make sense
> to be a bit more verbose in that (to tell somehow that for example
> only 123 and 23 and 3 is allowed, but not 13 for example), but this is
> not too important.

I think, there has to be some introduction chapter for the user with the
general rules in ConTeXt-commands. I suppose these rules:
- when a command has an optional keyword-option and an optional
  settings-option and you use only one of them, you don't need a
  placeholder (empty bracket pair)
  example: \setupitemize[packed] or \setupitemize[start=5]
  (context is intelligent here)
- context cannot distinguish between label and keyword, so if you want to
  use a label in \placefloat, you must add a placeholder for the keyword

Hans can tell us perhaps more about these rules...

Furthermore, we can add in this introduction some notes about spaces:
- space is allowed between 2 bracket options
- space is allowed after a comma
- space is not allowed before and after the =
- space is gobbled after ] if not all optional arguments are used

Cheers, Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From pmlists at free.fr  Sun Jul 18 09:42:46 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Sun, 18 Jul 2010 09:42:46 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <4C429E6A.8060406@elvenkind.com>
References: <20100716144152.GB23449@gaston.couberia.bzh>
	<AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>
	<20100717193214.GA4445@gaston.couberia.bzh>
	<AANLkTinQeDq5T0LpgvIZaHWSEeLLC22bmhmU5rUHfEkC@mail.gmail.com>
	<4C429E6A.8060406@elvenkind.com>
Message-ID: <20100718074246.GD7772@gaston.couberia.bzh>

On Sun, Jul 18 2010, Taco Hoekwater wrote:

>     arguments = {
>             ["label_arg"] = {
>                 type = label,
>             },
>             ["filename_arg"] = {
>                 type = file,
>             },
>             ["settings_arg"] = {
>                 type = settings,
>                 comment = "short comment for this option",
>                 description = "long description for this option",
>                 inherit = { "useexternalfigure", 'settings_arg' }
>
>             },
>             ["parent_arg"] = {
>                 type = parent,
>                 comment = "short comment for this option",
>                 description = "long description for this option"
>             },
>         },
>       variants = {  -- just an example
>           { "filename_arg" },
>           { "label_arg", "filename_arg" },
>           { "label_arg", "filename_arg", "settings_arg" },
>           { "filename_arg", "parent_arg" },
>
>         }
>     },
>
> but I am not sure this is really better ?

Seems to be ok for \externalfigure but not for \setupheadertexts...
Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From mojca.miklavec.lists at gmail.com  Sun Jul 18 09:44:28 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sun, 18 Jul 2010 09:44:28 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <20100718073816.GC7772@gaston.couberia.bzh>
References: <20100716144152.GB23449@gaston.couberia.bzh>
	<AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>
	<20100717193214.GA4445@gaston.couberia.bzh>
	<AANLkTinQeDq5T0LpgvIZaHWSEeLLC22bmhmU5rUHfEkC@mail.gmail.com>
	<20100718073816.GC7772@gaston.couberia.bzh>
Message-ID: <AANLkTinNhI76Bnbrs8X1sBtLwSlw86nWlq5wvxmUz2co@mail.gmail.com>

On Sun, Jul 18, 2010 at 09:38, Peter M?nster wrote:
> On Sat, Jul 17 2010, Mojca Miklavec wrote:
>
>> - It is not really needed, but it helps when cross-referencing: I
>> would nevertheless leave the [1] = {...}, [2] = {...} for arguments
>> - The following:
>> ? ? settings = {
>> ? ? ? ? inherit = "useexternalfigure",
>> ? ? ? ? -- n = 3 not needed, since one command has only one settings-option
>> ? ? },
>> is a bit weird to me. Why not putting the "inherit" already under
>> arguments above? And yes, you probably do need to tell from which
>> argument of \useexternalfigure you want to inherit the settings.
>
> From my very small ConTeXt experience, I made some assumptions:
> - one command has no more than one settings-option (key-val-pairs)
> - one command has no more than one keywords-option
>
> If this is true, then there is no problem with cross-referencing.
> The n = X would be even difficult, when there a variants: imagine,
> \useexternalfigure can have settings at n = 2 or n = 4 and so on.

I didn't understand the last paragraph, but while it's not a problem
for a human to determine where to inherit from, it might be a problem
for a computer if you want to print the complete command.

Mojca

From pmlists at free.fr  Sun Jul 18 09:46:58 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Sun, 18 Jul 2010 09:46:58 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <20100718073816.GC7772@gaston.couberia.bzh>
References: <20100716144152.GB23449@gaston.couberia.bzh>
	<AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>
	<20100717193214.GA4445@gaston.couberia.bzh>
	<AANLkTinQeDq5T0LpgvIZaHWSEeLLC22bmhmU5rUHfEkC@mail.gmail.com>
	<20100718073816.GC7772@gaston.couberia.bzh>
Message-ID: <20100718074658.GA8079@gaston.couberia.bzh>

On Sun, Jul 18 2010, Peter M?nster wrote:

> > - If all the three arguments are optional, it's a bit difficult to
> > tell what combination of arguments is allowed, so it might make sense
> > to be a bit more verbose in that (to tell somehow that for example
> > only 123 and 23 and 3 is allowed, but not 13 for example), but this is
> > not too important.
> 
> I think, there has to be some introduction chapter for the user with the
> general rules in ConTeXt-commands. I suppose these rules:
> [...]

And when a command does not follow these rules (perhaps \externalfigure is
such a case), then there must be some notes about this in the description.
Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From pmlists at free.fr  Sun Jul 18 10:07:20 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Sun, 18 Jul 2010 10:07:20 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <AANLkTinNhI76Bnbrs8X1sBtLwSlw86nWlq5wvxmUz2co@mail.gmail.com>
References: <20100716144152.GB23449@gaston.couberia.bzh>
	<AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>
	<20100717193214.GA4445@gaston.couberia.bzh>
	<AANLkTinQeDq5T0LpgvIZaHWSEeLLC22bmhmU5rUHfEkC@mail.gmail.com>
	<20100718073816.GC7772@gaston.couberia.bzh>
	<AANLkTinNhI76Bnbrs8X1sBtLwSlw86nWlq5wvxmUz2co@mail.gmail.com>
Message-ID: <20100718080720.GA8205@gaston.couberia.bzh>

On Sun, Jul 18 2010, Mojca Miklavec wrote:

> I didn't understand the last paragraph, but while it's not a problem
> for a human to determine where to inherit from, it might be a problem
> for a computer if you want to print the complete command.

There is no problem for a computer, it's just jumping from the settings of
\externalfigure to the settings-table of \useexternalfigure.
Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From pmlists at free.fr  Sun Jul 18 10:11:55 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Sun, 18 Jul 2010 10:11:55 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <4C429E6A.8060406@elvenkind.com>
References: <20100716144152.GB23449@gaston.couberia.bzh>
	<AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>
	<20100717193214.GA4445@gaston.couberia.bzh>
	<AANLkTinQeDq5T0LpgvIZaHWSEeLLC22bmhmU5rUHfEkC@mail.gmail.com>
	<4C429E6A.8060406@elvenkind.com>
Message-ID: <20100718081155.GB8205@gaston.couberia.bzh>

On Sun, Jul 18 2010, Taco Hoekwater wrote:

>       variants = {  -- just an example
>           { "filename_arg" },
>           { "label_arg", "filename_arg" },
>           { "label_arg", "filename_arg", "settings_arg" },
>           { "filename_arg", "parent_arg" },

Now I see the big benefit!
Instead of having 2 concepts (optional arguments and variants), we keep
only the concept of variants!
Very good!
Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From pragma at wxs.nl  Sun Jul 18 12:18:31 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 18 Jul 2010 12:18:31 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <4C429A86.2080309@elvenkind.com>
References: <20100716144152.GB23449@gaston.couberia.bzh>	<AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>	<20100717193214.GA4445@gaston.couberia.bzh>
	<4C429A86.2080309@elvenkind.com>
Message-ID: <4C42D4F7.1030908@wxs.nl>

On 18-7-2010 8:09, Taco Hoekwater wrote:
> On 07/17/2010 09:32 PM, Peter M?nster wrote:
>> On Sat, Jul 17 2010, luigi scarso wrote:
>>
>>> Why don't put them into a table as is in
>>> http://www.lua.org/pil/10.1.html
>>
>> Ok, now one file defines exactly one "command" table.
>> I added also other minor enhancements.
>
> If you start your files like this:
>
> command = command or {}
> command['placefloat'] = {
> comment = "Insert a floating element.",
> ...
> }
>
> then they could easily all be merged into a single command table
> during loading or even via 'cat'.

I'd rather go for this (see lfg file for examples):

return {
     name = "placefloat",
     version = "1.00",
     comment = "Insert a floating element.",
}

and give the files names like placefloat.cid (context interface 
definition) and then load them using a lua script (this also permits us 
to load several definitions named placefloat e.g. for comparison of 
versions).

Another aspect is shared definitions. Settings like style and align are 
often shared so there we need a way to refer to that like

align = interfaces.resolve("align"),

and so. In a similar way inheritance can be dealt with.

I'm not sure what the final purpose of this exercise is (intended usage 
and so), but if it's to be integrated (or loaded in context) it has to 
fit in the general way such data is stored. In that case I have to make 
a loader (in the interfaces namespace), one that probably drops not 
needed data, and caches relevant info for runtime usage. Also, as I 
cannot drop the xml counterpart now so I need to be able to generate 
that file from it as I don't want to keep that (also mkii) downward 
compatibility aspect (once the lua format is known I can do the reverse 
as exercise), so we need at least the level of detail from the xml file, 
including value types and (this cd:number tagging).

So, given this thread .. can we summarize the state of a couple of 
commands? Say:

- setupframed (inherited)
- framed (inherits, resolving)
- setupheadertexts (several arg configurations)
- externalfigure (several arg configurations)
- itemize (start command)


Hans



-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pmlists at free.fr  Wed Jul 21 17:40:25 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Wed, 21 Jul 2010 17:40:25 +0200
Subject: [dev-context] context commands in lua-files
In-Reply-To: <4C42D4F7.1030908@wxs.nl>
References: <20100716144152.GB23449@gaston.couberia.bzh>
	<AANLkTilL9fu0l2siTo3RG0u83saliD3w8rsXSe8Z-Viz@mail.gmail.com>
	<20100717193214.GA4445@gaston.couberia.bzh>
	<4C429A86.2080309@elvenkind.com> <4C42D4F7.1030908@wxs.nl>
Message-ID: <20100721154025.GA28079@gaston.couberia.bzh>

On Sun, Jul 18 2010, Hans Hagen wrote:

>> then they could easily all be merged into a single command table
>> during loading or even via 'cat'.
>
> I'd rather go for this (see lfg file for examples):
>
> return {
>     name = "placefloat",
>     version = "1.00",
>     comment = "Insert a floating element.",
> }

Hello Hans,

No problem for me, but the suggested "cat *.cid >all-commands" would not work.


> and give the files names like placefloat.cid (context interface definition) 
> and then load them using a lua script (this also permits us to load several 
> definitions named placefloat e.g. for comparison of versions).

My purpose is to stay in sync (as good as possible) with the latest mkiv but
not to manage versions (I'm lazy, svn is doing that for me in general ;).
But it's no real problem of course, to add some "version = xxx", we only need
to remember to increment it sometimes.


> Another aspect is shared definitions. Settings like style and align are 
> often shared so there we need a way to refer to that like
>
> align = interfaces.resolve("align"),

I agree.


> I'm not sure what the final purpose of this exercise is (intended usage and 
> so),

My personal motivation is a new version of setup-en.pdf, more verbose
(detailed description of all options), complete (even for low-level commands,
but no obsolete commands), and with some additional features (categories,
index, cross-references).
See also:
http://archive.contextgarden.net/message/20100508.204345.b5003312.en.html

But it's even better, if this exercise can serve also other goals
(for example syntax-checking, replacing cont-en.xml,
replacing texshow-wiki etc.).


> but if it's to be integrated (or loaded in context) it has to fit in 
> the general way such data is stored.

My idea was to put these command-descriptions on an svn-server, for example
here: http://foundry.supelec.fr/svn/contextman/context-commands
So, that all can contribute.

If the files were in the context-distribution, I don't know, how others than
you can contribute.


> So, given this thread .. can we summarize the state of a couple of 
> commands? Say:
>
> - setupframed (inherited)
> - framed (inherits, resolving)
> - setupheadertexts (several arg configurations)
> - externalfigure (several arg configurations)
> - itemize (start command)

It's here: http://pmrb.free.fr/tmp/context-commands/

Cheers, Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From taco at elvenkind.com  Fri Jul 23 09:07:32 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 23 Jul 2010 09:07:32 +0200
Subject: [dev-context] MetaPost 1.501 (alpha version)
Message-ID: <4C493FB4.1050306@elvenkind.com>


I am happy to announce a new *alpha* release of MetaPost:

----------------------------------------------------------------------
MetaPost 1.501
----------------------------------------------------------------------

The standalone distribution package and a win32 binary can be downloaded
immediately from

  http://foundry.supelec.fr/gf/project/metapost/

This is an *alpha* release following a major internal rewrite, so do
not use this version for production purposes, but please test with
as many files as you can.

The win32 binary is intended for texlive or a similar web2c-based
installation, this executable will *not* work for miktex.

Of course, we welcome any comments (either good or bad) that you may
have. Simply replying to this message is fine, but see the bottom of
the message for a more formal way to report bugs and feature requests.

----------------------------------------------------------------------
What is new in MetaPost version 1.501:
----------------------------------------------------------------------

* The maximum number of variable instances has increased from approx.
  33 million (2^25-1) to 2 billion (2^31-1).

* New build system and kpathsea imported from TeX Live.

* Many small bugfixes to 1.500.

----------------------------------------------------------------------
What is new in MetaPost version 1.500:
----------------------------------------------------------------------

* Actual memory dump files do not exist any more. --mem=<MEM> and
  all other methods of supplying a MEM file are now interpreted
  somewhat like this pseudo-metapost-code:

    begingroup;
    let dump = end;
    input MEM[.mp];
    endgroup;

  this process is supposed to be transparent besides the facto that
  there is some extra terminal output and logging.

* All memory is now allocated and freed dynamically. There are only
  two remaining overflow errors(1):

  "expansion depth" : this is a guard against infinite recursion,
                      the value is 10000.
  "sizes per font"  : this is maxed out for data-structure reasons,
                      the value is 32767.

  from texmf.cnf, now only the "error_line", "half_error_line" and
  "print_line settings" are used.

  (1) but now you can reach the operating system limits, of course.

* As this is an alpha release containing lots and lots of new code,
  MetaPost starts up with the internal equivalent of 'loggingall;'
  in effect. This results in log files that can help in debugging.

* Expect bugs and (minor) memory leaks.

----------------------------------------------------------------------
Legal notice / license / bug reports
----------------------------------------------------------------------

MetaPost is a system for producing graphics developed by John Hobby
at AT&T, based on Donald Knuth's Metafont.  The MetaPost home page
is http://tug.org/metapost.

MetaPost is free software: you can redistribute it and/or modify it
under the terms of the GNU Lesser General Public License as published
by the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

The MetaPost development project is currently hosted at Supelec,
http://foundry.supelec.fr/gf/project/metapost; with a bug tracker
at http://tracker.luatex.org/. Please report bugs and
request enhancements through there if possible. Alternatively, you
can reach us through the <metapost at tug.org> mailing list as well.

Have fun!

Taco Hoekwater, for the MetaPost team, July 23, 2010


From nvitacolonna at gmail.com  Mon Jul 26 09:48:33 2010
From: nvitacolonna at gmail.com (Nicola)
Date: Mon, 26 Jul 2010 09:48:33 +0200
Subject: [dev-context] MetaPost 1.501 (alpha version)
References: <4C493FB4.1050306@elvenkind.com>
Message-ID: <nvitacolonna-15D97C.09483326072010@news.gmane.org>

In article <4C493FB4.1050306 at elvenkind.com>,
 Taco Hoekwater <taco at elvenkind.com> wrote:

> I am happy to announce a new *alpha* release of MetaPost:
> 
> ----------------------------------------------------------------------
> MetaPost 1.501
> ----------------------------------------------------------------------

> This is an *alpha* release following a major internal rewrite, so do
> not use this version for production purposes, but please test with
> as many files as you can.

I get errors when trying to use a mem file different from plain. The 
following:

beginfig(0);
   path p; p := unitsquare xscaled 3cm yscaled 3cm;
   circular_shade(p, 0, yellow, red) ;
endfig;
end.

compiled with

mpost -mem=metafun test.mp

results in a segmentation fault and an emtpy log file.

And trying to typeset a MetaFont file with

mpost -mem=mfplain test.mf

produces the following error:

This is MetaPost, version 1.501 (kpathsea version 6.0.0dev)  26 JUL 2010 
09:45
**try-mfplain.mf
(mfplain.mp
Preloading the plain base, version 0.99: preliminaries,
 basic constants and mathematical macros,
 macros for converting units,
 macros and tables for various modes of operation,
 macros for drawing and filling,
 macros for proof labels and rules,
 macros for character and font administration,
and a few last-minute items.)
! Attempt to close the bottom level file!.
l.584 numeric mode,mag;     
                            % but leave mode and mag undefined

I have just compiled mpost from source and moved it inside the TeX Live 
distribution. I have not re-built any format file as I have understood 
that they are not used any longer.

Nicola


From taco at elvenkind.com  Mon Jul 26 10:35:15 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 26 Jul 2010 10:35:15 +0200
Subject: [dev-context] MetaPost 1.501 (alpha version)
In-Reply-To: <nvitacolonna-15D97C.09483326072010@news.gmane.org>
References: <4C493FB4.1050306@elvenkind.com>
	<nvitacolonna-15D97C.09483326072010@news.gmane.org>
Message-ID: <4C4D48C3.50803@elvenkind.com>


Hi Nicola,

Thanks a lot for trying stuff!

On 07/26/2010 09:48 AM, Nicola wrote:
>
> I get errors when trying to use a mem file different from plain. The
> following:
>
> beginfig(0);
>     path p; p := unitsquare xscaled 3cm yscaled 3cm;
>     circular_shade(p, 0, yellow, red) ;
> endfig;
> end.
>
> compiled with
>
> mpost -mem=metafun test.mp
>
> results in a segmentation fault and an emtpy log file.

Same here, I'll try to fix that later today.

> And trying to typeset a MetaFont file with
>
> mpost -mem=mfplain test.mf
>
> produces the following error:
>
> This is MetaPost, version 1.501 (kpathsea version 6.0.0dev)  26 JUL 2010
> 09:45
> **try-mfplain.mf
> (mfplain.mp
> Preloading the plain base, version 0.99: preliminaries,
>   basic constants and mathematical macros,
>   macros for converting units,
>   macros and tables for various modes of operation,
>   macros for drawing and filling,
>   macros for proof labels and rules,
>   macros for character and font administration,
> and a few last-minute items.)
> ! Attempt to close the bottom level file!.

This is not really a bug, more an incompatibility. In the new
system, 'mem' files have to stop with 'dump', but the current
mfplain.mp in the distrution doesn't do that yet (a similar problem
is with plain.mp, but that is why we have mpost.mp).

If you add a 'dump;' at the end of mfplain.mp, this problem
will go away.

Best wishes,
Taco


From nvitacolonna at gmail.com  Mon Jul 26 11:34:16 2010
From: nvitacolonna at gmail.com (Nicola)
Date: Mon, 26 Jul 2010 11:34:16 +0200
Subject: [dev-context] MetaPost 1.501 (alpha version)
References: <4C493FB4.1050306@elvenkind.com>
	<nvitacolonna-15D97C.09483326072010@news.gmane.org>
	<4C4D48C3.50803@elvenkind.com>
Message-ID: <nvitacolonna-9FF746.11341626072010@news.gmane.org>

In article <4C4D48C3.50803 at elvenkind.com>,
 Taco Hoekwater <taco at elvenkind.com> wrote:

> Hi Nicola,
> 
> Thanks a lot for trying stuff!
> 
> On 07/26/2010 09:48 AM, Nicola wrote:
> >
> > I get errors when trying to use a mem file different from plain.
 
> > And trying to typeset a MetaFont file with
> >
> > mpost -mem=mfplain test.mf
> >
> > produces the following error:
> >
> > [snip]
> 
> This is not really a bug, more an incompatibility. In the new
> system, 'mem' files have to stop with 'dump', but the current
> mfplain.mp in the distrution doesn't do that yet (a similar problem
> is with plain.mp, but that is why we have mpost.mp).
> 
> If you add a 'dump;' at the end of mfplain.mp, this problem
> will go away.

Confirmed, that fixes the problem.

One more problem I have with %& directives, as in this example:

verbatimtex 
%&latex 
\documentclass{article} 
\begin{document} 
etex 

beginfig(1);
label(btex x etex,cm*(1,1));
endfig;

verbatimtex 
\end{document} 
\end
etex 

end.

It seems that '-tex latex' is mandatory in this case (%&latex is 
ignored). Is it by design? If so, I would like to point out that it may 
break code like the following:

input TEX;

TEXPRE("%&cont-en" & char(10) & "\starttext\setupbodyfont[8pt]");
TEXPOST("\stoptext");

verbatimtex
   %&latex
   \documentclass{minimal}
   \begin{document}
etex

beginfig(1);
   label(TEX("\type{This is} \ConTeXt"), (1cm,5mm));
   draw btex \emph{And this is \LaTeX} etex;
endfig;

end.

I know that this is borderline, but it compiles with mpost 1.2xx.

Nicola


From taco at elvenkind.com  Mon Jul 26 16:39:20 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 26 Jul 2010 16:39:20 +0200
Subject: [dev-context] MetaPost 1.501 (alpha version)
In-Reply-To: <nvitacolonna-9FF746.11341626072010@news.gmane.org>
References: <4C493FB4.1050306@elvenkind.com>	<nvitacolonna-15D97C.09483326072010@news.gmane.org>	<4C4D48C3.50803@elvenkind.com>
	<nvitacolonna-9FF746.11341626072010@news.gmane.org>
Message-ID: <4C4D9E18.2000108@elvenkind.com>


Hi,

On 07/26/2010 11:34 AM, Nicola wrote:
>
> I know that this is borderline, but it compiles with mpost 1.2xx.

Hm, it seems the problem is that the %&latex ends up on the second
line of the output. This is caused by a purported bugfix patch
that attempted to sanitize usage of verbatimtex (following the 'you
should leave everthing inside verbatimtex...etex totally as is'-rule).

 From this example, it obvious that any whitespace starting before the
TeX code in the first verbatimtex really does need to be stripped,
because tex's --parse-first-line is not willing to look at the second
line ;) This should not be a hard thing to fix (but the TeX interface
is always tricky).

Best wishes,
Taco

From nvitacolonna at gmail.com  Mon Jul 26 19:21:30 2010
From: nvitacolonna at gmail.com (Nicola)
Date: Mon, 26 Jul 2010 19:21:30 +0200
Subject: [dev-context] MetaPost 1.501 (alpha version)
References: <4C493FB4.1050306@elvenkind.com>
	<nvitacolonna-15D97C.09483326072010@news.gmane.org>
	<4C4D48C3.50803@elvenkind.com>
	<nvitacolonna-9FF746.11341626072010@news.gmane.org>
	<4C4D9E18.2000108@elvenkind.com>
Message-ID: <nvitacolonna-0A6D0E.19213026072010@news.gmane.org>

In article <4C4D9E18.2000108 at elvenkind.com>,
 Taco Hoekwater <taco at elvenkind.com> wrote:

> Hi,
> 
> On 07/26/2010 11:34 AM, Nicola wrote:
> >
> > I know that this is borderline, but it compiles with mpost 1.2xx.
> 
> Hm, it seems the problem is that the %&latex ends up on the second
> line of the output. This is caused by a purported bugfix patch
> that attempted to sanitize usage of verbatimtex (following the 'you
> should leave everthing inside verbatimtex...etex totally as is'-rule).
> 
>  From this example, it obvious that any whitespace starting before the
> TeX code in the first verbatimtex really does need to be stripped,
> because tex's --parse-first-line is not willing to look at the second
> line ;) This should not be a hard thing to fix (but the TeX interface
> is always tricky).

You're right (of course): using

verbatimtex%&latex

works.

Nicola


From taco at elvenkind.com  Tue Jul 27 15:58:43 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 27 Jul 2010 15:58:43 +0200
Subject: [dev-context] MetaPost 1.502 (beta version)
Message-ID: <4C4EE613.1010505@elvenkind.com>


I am happy to announce a new beta release of MetaPost:

----------------------------------------------------------------------
MetaPost 1.502
----------------------------------------------------------------------

The standalone distribution package and a win32 binary can be downloaded
immediately from

   http://foundry.supelec.fr/gf/project/metapost/

This is a beta release following the major internal rewrite done
for 1.500. After quite a lot of community feedback on the previous
two releases (a big thank you! goes to the testers) most of the bugs
should be gone now, but just in case: please be careful and check
the output of this metapost version when it is used in production
work.

The win32 binary is intended for texlive or a similar web2c-based
installation, this executable will *not* work for miktex.

Of course, we welcome any comments (either good or bad) that you may
have. Simply replying to this message is fine, but see the bottom of
the message for a more formal way to report bugs and feature requests.

----------------------------------------------------------------------
What is new in MetaPost version 1.502:
----------------------------------------------------------------------

* New build system and kpathsea imported from TeX Live.

* Many small bugfixes to 1.501.

----------------------------------------------------------------------
What is new in MetaPost version 1.501:
----------------------------------------------------------------------

* The maximum number of variable instances has increased from approx.
   33 million (2^25-1) to 2 billion (2^31-1).

* New build system and kpathsea imported from TeX Live.

* Many small bugfixes to 1.500.

----------------------------------------------------------------------
What is new in MetaPost version 1.500:
----------------------------------------------------------------------

* Actual memory dump files do not exist any more. --mem=<MEM> and
   all other methods of supplying a MEM file are now interpreted
   somewhat like this pseudo-metapost-code:

     begingroup;
     let dump = end;
     input MEM[.mp];
     endgroup;

   this process is supposed to be transparent besides the facto that
   there is some extra terminal output and logging.

* All memory is now allocated and freed dynamically. There are only
   two remaining overflow errors(1):

   "expansion depth" : this is a guard against infinite recursion,
                       the value is 10000.
   "sizes per font"  : this is maxed out for data-structure reasons,
                       the value is 32767.

   from texmf.cnf, now only the "error_line", "half_error_line" and
   "print_line settings" are used.

   (1) but now you can reach the operating system limits, of course.

* As this is an alpha release containing lots and lots of new code,
   MetaPost starts up with the internal equivalent of 'loggingall;'
   in effect. This results in log files that can help in debugging.

* Expect bugs and (minor) memory leaks.

----------------------------------------------------------------------
Legal notice / license / bug reports
----------------------------------------------------------------------

MetaPost is a system for producing graphics developed by John Hobby
at AT&T, based on Donald Knuth's Metafont.  The MetaPost home page
is http://tug.org/metapost.

MetaPost is free software: you can redistribute it and/or modify it
under the terms of the GNU Lesser General Public License as published
by the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

The MetaPost development project is currently hosted at Supelec,
http://foundry.supelec.fr/gf/project/metapost; with a bug tracker
at http://tracker.luatex.org/. Please report bugs and
request enhancements through there if possible. Alternatively, you
can reach us through the <metapost at tug.org> mailing list as well.

Have fun!

Taco Hoekwater, for the MetaPost team, July 27, 2010

From nvitacolonna at gmail.com  Tue Jul 27 18:13:40 2010
From: nvitacolonna at gmail.com (Nicola)
Date: Tue, 27 Jul 2010 18:13:40 +0200
Subject: [dev-context] MetaPost 1.502 (beta version)
References: <4C4EE613.1010505@elvenkind.com>
Message-ID: <nvitacolonna-DCD125.18133927072010@news.gmane.org>

In article <4C4EE613.1010505 at elvenkind.com>,
 Taco Hoekwater <taco at elvenkind.com> wrote:

> I am happy to announce a new beta release of MetaPost:
> 
> ----------------------------------------------------------------------
> MetaPost 1.502
> ----------------------------------------------------------------------

This indeed fixes several bugs, but I still experiment a couple related 
to interactions with TeX.

(1) If I omit outputtemplate some files crash, otherwise they compile. 
This is a minimal example:

% Typeset with mpost -tex='texexec --dvi'
%outputtemplate := "%j-%c.mps"; % Ok if this line is uncommented
verbatimtex
\setupbodyfont[12pt]
\starttext
etex
beginfig(1);
draw btex x etex;
endfig;
end.

(2) mpost also crashes when using the TEX macro:

% Typeset with mpost -tex='texexec --dvi'
input TEX;
TEXPRE("\starttext\setupbodyfont[8pt]"); % Comment this to avoid crash
draw TEX("abc");
end.

If you use latex instead, it always crashes regardless of TEXPRE.

Nicola


From taco at elvenkind.com  Tue Jul 27 18:53:02 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 27 Jul 2010 18:53:02 +0200
Subject: [dev-context] MetaPost 1.502 (beta version)
In-Reply-To: <nvitacolonna-DCD125.18133927072010@news.gmane.org>
References: <4C4EE613.1010505@elvenkind.com>
	<nvitacolonna-DCD125.18133927072010@news.gmane.org>
Message-ID: <4C4F0EEE.90106@elvenkind.com>

On 07/27/2010 06:13 PM, Nicola wrote:
> In article<4C4EE613.1010505 at elvenkind.com>,
>   Taco Hoekwater<taco at elvenkind.com>  wrote:
>
>> I am happy to announce a new beta release of MetaPost:
>>
>> ----------------------------------------------------------------------
>> MetaPost 1.502
>> ----------------------------------------------------------------------
>
> This indeed fixes several bugs, but I still experiment a couple related
> to interactions with TeX.
>
> (1) If I omit outputtemplate some files crash, otherwise they compile.
> This is a minimal example:

Thanks again for the example. Both were the same problem, really.
Fixed in the repository already, a new beta probably sometime next
week.

Best wishes,
Taco

From taco at elvenkind.com  Wed Jul 28 15:41:52 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 28 Jul 2010 15:41:52 +0200
Subject: [dev-context] Luatex 0.61.0 announcement
Message-ID: <4C5033A0.5000700@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.61.0,
the first of the betas toward 0.70.0.

New features:

* New lua library 'epdf' for introspection of PDF inclusions,
   see the manual for details.

* Mplib version 1.502 is now included (which is still beta,
   so be careful).

* new "finish_pdffile" and "pre_dump" callbacks.

* new function pdf.pageref()

* In the lua 'tex' library: assignment to internal glue
   parameters is now allowed.

* New lua function tex.error().

Bugfixes:

* Fix for crashes on fonts with bad Panose values.

* Fix for a box placement bug that could sometimes cause text
   to overlap.

* Fix for a few small PDF/A1-a compatibility bugs.

* Fix \letterspacefont.

* Fix \Ustopdisplaymath in combination with aligned displays.

* In math delimiters, the last of a chain of predefined sizes
   was always ignored if there were also extensible parts.


The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

   svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.61.0

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org

Have fun,
Taco




From luigi.scarso at gmail.com  Wed Jul 28 15:57:52 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Wed, 28 Jul 2010 15:57:52 +0200
Subject: [dev-context] Luatex 0.61.0 announcement
In-Reply-To: <4C5033A0.5000700@elvenkind.com>
References: <4C5033A0.5000700@elvenkind.com>
Message-ID: <AANLkTi==1Lh=ECcDBq2Dejr5RcuPFr26LrHe3Jk+dEfQ@mail.gmail.com>

On Wed, Jul 28, 2010 at 3:41 PM, Taco Hoekwater <taco at elvenkind.com> wrote:
> Hi,
>
> I have just uploaded the archives for a new luatex release, 0.61.0,
> the first of the betas toward 0.70.0.
>
> New features:
>
> * New lua library 'epdf' for introspection of PDF inclusions,
> ?see the manual for details.
Can I then build a luatex script that mimic  pdftoppm & pdftops ?

-- 
luigi

From luigi.scarso at gmail.com  Wed Jul 28 18:04:36 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Wed, 28 Jul 2010 18:04:36 +0200
Subject: [dev-context] Luatex 0.61.0 announcement
In-Reply-To: <AANLkTi==1Lh=ECcDBq2Dejr5RcuPFr26LrHe3Jk+dEfQ@mail.gmail.com>
References: <4C5033A0.5000700@elvenkind.com>
	<AANLkTi==1Lh=ECcDBq2Dejr5RcuPFr26LrHe3Jk+dEfQ@mail.gmail.com>
Message-ID: <AANLkTi=PF62mbWEDc34W7AZ-WQNsfFYwNnrLJSfnOx=H@mail.gmail.com>

On Wed, Jul 28, 2010 at 3:57 PM, luigi scarso <luigi.scarso at gmail.com> wrote:
> On Wed, Jul 28, 2010 at 3:41 PM, Taco Hoekwater <taco at elvenkind.com> wrote:
>> Hi,
>>
>> I have just uploaded the archives for a new luatex release, 0.61.0,
>> the first of the betas toward 0.70.0.
>>
>> New features:
>>
>> * New lua library 'epdf' for introspection of PDF inclusions,
>> ?see the manual for details.
> Can I then build a luatex script that mimic ?pdftoppm & pdftops ?
Hm, it seems that the answer is "no".


-- 
luigi

From hartmut_henkel at gmx.de  Wed Jul 28 21:23:25 2010
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Wed, 28 Jul 2010 21:23:25 +0200 (CEST)
Subject: [dev-context] [Dev-luatex]  Luatex 0.61.0 announcement
In-Reply-To: <AANLkTi==1Lh=ECcDBq2Dejr5RcuPFr26LrHe3Jk+dEfQ@mail.gmail.com>
References: <4C5033A0.5000700@elvenkind.com>
	<AANLkTi==1Lh=ECcDBq2Dejr5RcuPFr26LrHe3Jk+dEfQ@mail.gmail.com>
Message-ID: <alpine.DEB.2.00.1007282114550.4695@hahepc1.hahe>

On Wed, 28 Jul 2010, luigi scarso wrote:
> On Wed, Jul 28, 2010 at 3:41 PM, Taco Hoekwater <taco at elvenkind.com> wrote:
> >
> > I have just uploaded the archives for a new luatex release, 0.61.0,
> > the first of the betas toward 0.70.0.
> >
> > New features:
> >
> > * New lua library 'epdf' for introspection of PDF inclusions,
> > ?see the manual for details.
>
> Can I then build a luatex script that mimic  pdftoppm & pdftops ?

no --- but definitely nice to have! i refrained from it as it needs many
more includes, libraries (xpdf backends, X?), and helper files, e. g.,
.xpdfrc for managing fonts, lots of new stuff, never touched. But maybe
it's not even difficult after all.

The priority for now is to get it running with poppler, all this
auto*@&#% stuff...

Regards, Hartmut

From taco at elvenkind.com  Mon Aug 23 09:01:16 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 23 Aug 2010 09:01:16 +0200
Subject: [dev-context] Luatex 0.62.0 announcement
Message-ID: <4C721CBC.6000702@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.62.0.
This is a development release, but it also fixes some nasty bugs
in beta 0.61.0, so if you use that right now, upgrading is recommended.

News:

* LuaTeX now uses libpoppler (0.12.4) instead of xpdf.

* All backend functions now report what file they were searching
   for whenever a file cannot be found.

* Input-ed lua files are now mentioned in the fls file if
   the --recorder switch is specified on the command line.

* Paragraph indentation hlist nodes and hlist and vlist nodes
   generated by alignment rows and cells now have a subtype
   (3 for indent box, 4 for rows/columns, 5 for cells).

* The 'epdf' lib is in active development and still growing.

* The 'fontforge' table is finally removed (was deprecated
   since 0.40).

Bugfixes:

* A new mplib import fixes two bad bugs in mplib:
   - string equality test was wrong
   - type declarations could delete pre-existing variables

* PNG images with transparency could create random size
   differences in the generated PDF.

* In some special cases, font expansion could cause wrong
   spacing in the generated PDF.

* \letterspacefont was broken since a very long time.

* The node subtype of the \leftskip and \rightskip glues was
   wrong.

* Some memory leaks have been removed.

* Various manual fixes.


The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

   svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.62.0

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org

Have fun,
Taco




From sbbrouwer at gmail.com  Thu Sep  9 02:18:44 2010
From: sbbrouwer at gmail.com (Sietse Brouwer)
Date: Thu, 9 Sep 2010 02:18:44 +0200
Subject: [dev-context] Bug: English versions of manuals mention Dutch command
Message-ID: <AANLkTimCTeW+9b1-3oEse+EeE8uXBwHzoq=T6OLksmFi@mail.gmail.com>

Dear ConTeXt-devs,

The English-language versions of
"ConTeXt, the manual" (http://www.pragma-ade.com/general/manuals/cont-eni.pdf)
and
"ConTeXt, an excursion" (http://www.pragma-ade.com/general/manuals/ms-cb-en.pdf)
both contain mentions of \inmarge, which should be \inmargin. This
slipped through the net when ConTeXt was translated from Dutch to
English, I expect.

In the manual, \inmarge is found on PDF pages 364 and 64 (numbered 361
and 61, respectively).
In the excursion, \inmarge is found on PDF pages 33 and 63, 64 (which
are numbered 31, 61, and 62).

Kind regards, and many thanks for working on ConTeXt,

Sietse Brouwer
Who is learning ConTeXt, and likes it a lot so far.

From taco at elvenkind.com  Thu Sep  9 11:22:55 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 09 Sep 2010 11:22:55 +0200
Subject: [dev-context] Luatex 0.63.0 announcement
Message-ID: <4C88A76F.1000205@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.63.0.
This is a development release.

News:

* Drop tex.ht[], tex.wd[], tex.dp[].

* Drop OCP support (and associated primitives).

* Add tex.catcode[], tex.lccode[], tex.sfcode[], tex.uccode[],
   tex.mathcode[] and tex.delcode[] and associated functions.

* Add CIDset tables to the output pdf where appropriate.

* Added a 'string' field to late_lua nodes on the lua side. This
   field does not convert the assigned string to a tokenlist.

* The result of fontloader.open() now has some virtual accessors
   (as well as fontloader.to_table).

* There is now a `short reference' in the manual folder
   (functionref.pdf)

Bugfixes:

* Fix a crash on an empty font (bugreport #468).

* Fix a crash for extremely long pattern arguments.

* Fix a crash on bad virtual character arguments in lua.

* Fix hyphenation exceptions.

* Prevent linebreak between initial local_par paragraph whatsit
   and a following skip (bugreport #437).

* Fix placement of scripts on textstyle big operators in MATH
   fonts (bugreport #466).

* Fix a crash on the return value of MPlib's 'postscript'
   operation on images.

* Fix a crash on \leftghost & \rightghost in math mode.


The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

   svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.63.0

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org

Have fun,
Taco




From mariausol at gmail.com  Sat Sep 11 22:41:53 2010
From: mariausol at gmail.com (Marius)
Date: Sat, 11 Sep 2010 23:41:53 +0300
Subject: [dev-context] cont-en.xml
In-Reply-To: <4C2D982C.3020700@googlemail.com>
References: <4C191053.3040804@googlemail.com>
	<20100623073551.GA27274@gaston.couberia.bzh>
	<4C27864F.5020009@googlemail.com>
	<AANLkTilxoCwG46cG_omDkyLC7aGG1YiwTPqOWJZsrHbE@mail.gmail.com>
	<4C2D982C.3020700@googlemail.com>
Message-ID: <AANLkTinp8UYGhyyFtb1qU+O3qjG2Ac=3=Bwi=1b-Gndf@mail.gmail.com>

On 2 July 2010 10:41, Wolfgang Schuster
<schuster.wolfgang at googlemail.com> wrote:
> Am 30.06.10 12:57, schrieb Marius:
>>
>> Hello,
>>
>> I think that the best way is to put command syntax description just
>> before its definition in the context file. This way it will be easier
>> to keep it always in sync with the code. And most important point here
>> is that it must be in sync always. If it is, then we can just generate
>> cont-en.xml and other cont-xx.xml files, but also have a syntax
>> checker!
>>
>> Just imagine:
>>
>> context --check-syntax myfile.tex
>>
>> shows you which options or commands are experimental, deprecated, and
>> which are unrecognized, and suggests the command or option to fix
>> that.
>>
>> What do you think?
>>
>
> The idea is not bad but who is going to do this? Hans implemented
> in mkiv the function to check assignments list of valid keys but
> this function isn't used because nobody writes the necessary lists
> which contexts requires to do these checks and the same will happen
> with the system you suggest.

Please, point me to the function you are talking about.

Thanks,
Marius

From schuster.wolfgang at googlemail.com  Sun Sep 12 09:22:06 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Sun, 12 Sep 2010 09:22:06 +0200
Subject: [dev-context] cont-en.xml
In-Reply-To: <AANLkTinp8UYGhyyFtb1qU+O3qjG2Ac=3=Bwi=1b-Gndf@mail.gmail.com>
References: <4C191053.3040804@googlemail.com>
	<20100623073551.GA27274@gaston.couberia.bzh>
	<4C27864F.5020009@googlemail.com>
	<AANLkTilxoCwG46cG_omDkyLC7aGG1YiwTPqOWJZsrHbE@mail.gmail.com>
	<4C2D982C.3020700@googlemail.com>
	<AANLkTinp8UYGhyyFtb1qU+O3qjG2Ac=3=Bwi=1b-Gndf@mail.gmail.com>
Message-ID: <4DD80B2C-3257-4CC2-8E3B-0ADEBAC3975A@gmail.com>


Am 11.09.2010 um 22:41 schrieb Marius:

>> The idea is not bad but who is going to do this? Hans implemented
>> in mkiv the function to check assignments list of valid keys but
>> this function isn't used because nobody writes the necessary lists
>> which contexts requires to do these checks and the same will happen
>> with the system you suggest.
> 
> Please, point me to the function you are talking about.


The function is implemented in mult-chk.mkiv, here is a example:

\starttext

\startbuffer

\getcheckedparameters[MyTest][MyNamespace][a=1,b=2,c=3,d=4,crap=whatever]

    \MyNamespacea\quad
    \MyNamespaceb\quad
    \MyNamespacec\quad
    \MyNamespaced\quad
    crap is \ifdefined\MyNamespacecrap\else un\fi defined
\stopbuffer

\enablecheckparameters

\setvalidparameterkeys[MyTest][a,b,c,d] \getbuffer \par
\addvalidparameterkeys[MyTest][crap]    \getbuffer \par

\stoptext

As a user you don?t have to care about all the stuff, all you need
is \enablecheckparameters in your document.

Wolfgang

From pmlists at free.fr  Sun Sep 12 16:22:45 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Sun, 12 Sep 2010 16:22:45 +0200
Subject: [dev-context] Bug: English versions of manuals mention Dutch
 command
In-Reply-To: <AANLkTimCTeW+9b1-3oEse+EeE8uXBwHzoq=T6OLksmFi@mail.gmail.com>
References: <AANLkTimCTeW+9b1-3oEse+EeE8uXBwHzoq=T6OLksmFi@mail.gmail.com>
Message-ID: <20100912142245.GA7590@gaston.couberia.bzh>

On Thu, Sep 09 2010, Sietse Brouwer wrote:

> The English-language versions of
> "ConTeXt, the manual"
> (http://www.pragma-ade.com/general/manuals/cont-eni.pdf)

Hello Sietse,

This file won't be updated (to be confirmed by Hans perhaps...).

Corrections will go directly to the new revision of the manual (work in
progress). You can find the links on the main wiki page.

Cheers, Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From sbbrouwer at gmail.com  Sun Sep 12 18:12:51 2010
From: sbbrouwer at gmail.com (Sietse Brouwer)
Date: Sun, 12 Sep 2010 18:12:51 +0200
Subject: [dev-context] Bug: English versions of manuals mention Dutch
	command
In-Reply-To: <20100912142245.GA7590@gaston.couberia.bzh>
References: <AANLkTimCTeW+9b1-3oEse+EeE8uXBwHzoq=T6OLksmFi@mail.gmail.com>
	<20100912142245.GA7590@gaston.couberia.bzh>
Message-ID: <AANLkTi=g6BhL1ywx=WqK2cSn2_uhQ-9vkRhst7KMxrwS@mail.gmail.com>

http://sietse.krikkert.net/files/inmarge_should_be_inmargin.diff
On Sun, Sep 12, 2010 at 4:22 PM, Peter M?nster <pmlists at free.fr> wrote:
>
> Corrections will go directly to the new revision of the manual (work in
> progress). You can find the links on the main wiki page.

Ah, thank you. I've made a checkout and searched the project for
instances of '\inmarge'; there's only one, and that one would end up
in the index. Here's the patch:

http://sietse.krikkert.net/files/inmarge_should_be_inmargin.diff

Or, (probably easier), go to context-reference/en/co-layout.tex, and
do s/inmarge/inmargin/ on line 659.

Thank you for pointing me at the repository.

Kind regards,

Sietse
Sietse Brouwer

From pragma at wxs.nl  Sun Sep 12 18:23:09 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 12 Sep 2010 18:23:09 +0200
Subject: [dev-context] Bug: English versions of manuals mention Dutch
 command
In-Reply-To: <20100912142245.GA7590@gaston.couberia.bzh>
References: <AANLkTimCTeW+9b1-3oEse+EeE8uXBwHzoq=T6OLksmFi@mail.gmail.com>
	<20100912142245.GA7590@gaston.couberia.bzh>
Message-ID: <4C8CFE6D.9040500@wxs.nl>

On 12-9-2010 4:22, Peter M?nster wrote:
> On Thu, Sep 09 2010, Sietse Brouwer wrote:
>
>> The English-language versions of
>> "ConTeXt, the manual"
>> (http://www.pragma-ade.com/general/manuals/cont-eni.pdf)
>
> Hello Sietse,
>
> This file won't be updated (to be confirmed by Hans perhaps...).
>
> Corrections will go directly to the new revision of the manual (work in
> progress). You can find the links on the main wiki page.

indeed

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Sun Sep 12 19:26:18 2010
From: taco at elvenkind.com (taco)
Date: Sun, 12 Sep 2010 19:26:18 +0200
Subject: [dev-context] Bug: English versions of manuals mention Dutch
 command
In-Reply-To: <AANLkTi=g6BhL1ywx=WqK2cSn2_uhQ-9vkRhst7KMxrwS@mail.gmail.com>
References: <AANLkTimCTeW+9b1-3oEse+EeE8uXBwHzoq=T6OLksmFi@mail.gmail.com>	<20100912142245.GA7590@gaston.couberia.bzh>
	<AANLkTi=g6BhL1ywx=WqK2cSn2_uhQ-9vkRhst7KMxrwS@mail.gmail.com>
Message-ID: <4C8D0D3A.6030204@elvenkind.com>

Sietse Brouwer wrote:
> http://sietse.krikkert.net/files/inmarge_should_be_inmargin.diff
> On Sun, Sep 12, 2010 at 4:22 PM, Peter M?nster <pmlists at free.fr> wrote:
>> Corrections will go directly to the new revision of the manual (work in
>> progress). You can find the links on the main wiki page.
> 
> Ah, thank you. I've made a checkout and searched the project for
> instances of '\inmarge'; there's only one, and that one would end up
> in the index. Here's the patch:
> 
> http://sietse.krikkert.net/files/inmarge_should_be_inmargin.diff
> 
> Or, (probably easier), go to context-reference/en/co-layout.tex, and
> do s/inmarge/inmargin/ on line 659.

Patched, thanks.

Best wishes,
Taco

From pmlists at free.fr  Sun Sep 12 21:06:37 2010
From: pmlists at free.fr (Peter =?utf-8?Q?M=C3=BCnster?=)
Date: Sun, 12 Sep 2010 21:06:37 +0200
Subject: [dev-context] Bug: English versions of manuals mention Dutch
 command
In-Reply-To: <AANLkTi=g6BhL1ywx=WqK2cSn2_uhQ-9vkRhst7KMxrwS@mail.gmail.com>
References: <AANLkTimCTeW+9b1-3oEse+EeE8uXBwHzoq=T6OLksmFi@mail.gmail.com>
	<20100912142245.GA7590@gaston.couberia.bzh>
	<AANLkTi=g6BhL1ywx=WqK2cSn2_uhQ-9vkRhst7KMxrwS@mail.gmail.com>
Message-ID: <20100912190637.GA9332@gaston.couberia.bzh>

On Sun, Sep 12 2010, Sietse Brouwer wrote:

> Ah, thank you. I've made a checkout and searched the project for
> instances of '\inmarge'; there's only one, and that one would end up
> in the index. Here's the patch:

Oh, I'd supposed, that you would rather check the pdf... ;)

Cheers, Peter

-- 
Contact information: http://pmrb.free.fr/contact/



From mariausol at gmail.com  Sat Sep 25 00:20:31 2010
From: mariausol at gmail.com (Marius)
Date: Sat, 25 Sep 2010 01:20:31 +0300
Subject: [dev-context] the real time editing feature
Message-ID: <AANLkTin0NhG-Mc-U8ePeFyjjx4b1PVcQ=QtOSEEab3ae@mail.gmail.com>

Hello,

While working with ConTeXt and other TeXes I miss the real time
editing feature, it is very time consuming to write formulas, tables,
position images, format text and after every change recompile.

So, after some google, I found the BaKoMa TeX. It's very impressive
how fast it is. The author on his page [1] writes: "The reason of this
scalability is that only one page of document is reformatted at
editing document."

[1] http://www.bakoma-tex.com/menu/texword.php

So, the question is: how does he do that with latex? Or how to
recompile just one page of a document with ConTeXt?

As I am not very competent with internals of ConTeXt, I can't imagine
how to do that.

With a very simple scenario my guess is:

context --pipe

1) input preamble,
2) input text up to the page X, generate pdf and wait for user input,
3) if user edits page X, input text from page X and update pdf replacing page X.

The problem with this algorithm is that a complete pdf document is
produced just after the \stoptext command is input, but atfter this
command the pipe is closed too. The other problem is that I don't now
how to implement with ConTeXt commands the part of the step 3: "update
pdf replacing page X".

Maybe you have answers to these questions or a better solution to this problem.

Marius

From taco at elvenkind.com  Sat Sep 25 11:07:13 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 25 Sep 2010 11:07:13 +0200
Subject: [dev-context] the real time editing feature
In-Reply-To: <AANLkTin0NhG-Mc-U8ePeFyjjx4b1PVcQ=QtOSEEab3ae@mail.gmail.com>
References: <AANLkTin0NhG-Mc-U8ePeFyjjx4b1PVcQ=QtOSEEab3ae@mail.gmail.com>
Message-ID: <4C9DBBC1.8000407@elvenkind.com>

On 09/25/2010 12:20 AM, Marius wrote:
>
> So, the question is: how does he do that with latex? Or how to
> recompile just one page of a document with ConTeXt?

The short answer is: he uses a slightly modified core engine. I
can't find any pertinent documentation, but I suspect it is
similar to Jonathan Fine's 'TeX daemon' project in the general
approach:

http://www.tug.org/tug2001/bulletin/preprints/JONATHAN_FINE_Instant_Previ.html

Best wishes,
Taco

From taco at elvenkind.com  Tue Oct  5 20:19:35 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 05 Oct 2010 20:19:35 +0200
Subject: [dev-context] TLContrib is ready for testing
Message-ID: <4CAB6C37.9050206@elvenkind.com>


Hello all,

Please, if you have moment to spare, have a good look at the TLContrib
website and associated repository:
	
   http://tlcontrib.metatex.org/

The system should now be ready for the initial kickoff (I hope).

Mojca, Hans and me have already tried and tested various things, but it
is quite likely that there are still bugs. I decided to post to a small
group of people before doing an announcement on tex-live at tug.org /
c.t.t hoping that perhaps more people can have a look, and that
the remaining bugs can then be fixed before 'normal' users start
using the site.

Please also let me know what you think could be improved, but before
you suggest extra features, have a look at the page below to make sure
your suggestion is not planned already:

   http://tlcontrib.metatex.org/todo.html

Best wishes,
Taco

PS Mojca: I deleted your luatex darwin package to get a fresh start in
the distribution database, sorry. Please, can you re-add it?




From mojca.miklavec.lists at gmail.com  Tue Oct  5 20:51:22 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 5 Oct 2010 20:51:22 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <4CAB6C37.9050206@elvenkind.com>
References: <4CAB6C37.9050206@elvenkind.com>
Message-ID: <AANLkTi=DD5zZw0K=gb_oKY0nRHc0nAiJ_Lnd8iz9vTiJ@mail.gmail.com>

On Tue, Oct 5, 2010 at 20:19, Taco Hoekwater  wrote:
>
> Please, if you have moment to spare, have a good look at the TLContrib
> website and associated repository:
>
> ?http://tlcontrib.metatex.org/
>
> The system should now be ready for the initial kickoff (I hope).

Great! Thanks a lot.

> PS Mojca: I deleted your luatex darwin package to get a fresh start in
> the distribution database, sorry. Please, can you re-add it?

Are you then planning to "get another fresh start", so that we are
free to attack your server for the next few days with random packages
and bordercases?

Mojca

From taco at elvenkind.com  Tue Oct  5 20:57:39 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 05 Oct 2010 20:57:39 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <AANLkTi=DD5zZw0K=gb_oKY0nRHc0nAiJ_Lnd8iz9vTiJ@mail.gmail.com>
References: <4CAB6C37.9050206@elvenkind.com>
	<AANLkTi=DD5zZw0K=gb_oKY0nRHc0nAiJ_Lnd8iz9vTiJ@mail.gmail.com>
Message-ID: <4CAB7523.9050806@elvenkind.com>

On 10/05/2010 08:51 PM, Mojca Miklavec wrote:
>
>> PS Mojca: I deleted your luatex darwin package to get a fresh start in
>> the distribution database, sorry. Please, can you re-add it?
>
> Are you then planning to "get another fresh start", so that we are
> free to attack your server for the next few days with random packages
> and bordercases?

Just let me know, and I can delete whatever junk you added and want
removed in a couple of days (you can do it yourself one-at-a-time if
you want, but I can do it a lot faster, being the admin and all that).

I plan to keep 'my' packages in the database, as these are all tried
and seem to work OK.

Best wishes,
Taco


From adityam at umich.edu  Wed Oct  6 07:09:10 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 6 Oct 2010 01:09:10 -0400 (EDT)
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <4CAB6C37.9050206@elvenkind.com>
References: <4CAB6C37.9050206@elvenkind.com>
Message-ID: <alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>

Hi Taco,

On Tue, 5 Oct 2010, Taco Hoekwater wrote:

>
> Hello all,
>
> Please, if you have moment to spare, have a good look at the TLContrib
> website and associated repository:
>
>  http://tlcontrib.metatex.org/
>
> The system should now be ready for the initial kickoff (I hope).
>
> Mojca, Hans and me have already tried and tested various things, but it
> is quite likely that there are still bugs. I decided to post to a small
> group of people before doing an announcement on tex-live at tug.org /
> c.t.t hoping that perhaps more people can have a look, and that
> the remaining bugs can then be fixed before 'normal' users start
> using the site.

Is this meant only for packages that cannot be part of TL due the 
restrictions that you mention, or is this also the right place to upload 
normal context modules. If so, is this going to eventually replace 
modules.contextgarden.net upload system?

Aditya

From preining at logic.at  Wed Oct  6 07:06:43 2010
From: preining at logic.at (Norbert Preining)
Date: Wed, 6 Oct 2010 14:06:43 +0900
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
Message-ID: <20101006050643.GA30949@gamma.logic.tuwien.ac.at>

On Mi, 06 Okt 2010, Aditya Mahajan wrote:
> restrictions that you mention, or is this also the right place to upload  
> normal context modules. If so, is this going to eventually replace  
> modules.contextgarden.net upload system?

context modules preferrably are uploaded to CTAN and thus will
find their way within a few days into TeX Live proper, if the
license is ok.

Best wishes

Norbert
------------------------------------------------------------------------
Norbert Preining            preining@{jaist.ac.jp, logic.at, debian.org}
JAIST, Japan                                 TeX Live & Debian Developer
DSA: 0x09C5B094   fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
------------------------------------------------------------------------
LUFFENHAM (n.)
Feeling you get when the pubs aren't going to be open for another
fortyfive minutes and the luffness is beginning to wear a bit thin.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Wed Oct  6 07:16:22 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 06 Oct 2010 07:16:22 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
Message-ID: <4CAC0626.6070601@elvenkind.com>

On 10/06/2010 07:09 AM, Aditya Mahajan wrote:
>
> Is this meant only for packages that cannot be part of TL due the
> restrictions that you mention, or is this also the right place to upload
> normal context modules. If so, is this going to eventually replace
> modules.contextgarden.net upload system?

As Nrobert said. Fairly soon there will be a second website similar
to the new tlcontrib that will indeed replace modules.contextgarden.net
(and that will take care of uploads to ctan just like garden does now)
but that will be a different site, not this one.

Best wishes,
Taco

From adityam at umich.edu  Wed Oct  6 07:33:18 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 6 Oct 2010 01:33:18 -0400 (EDT)
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <4CAC0626.6070601@elvenkind.com>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<4CAC0626.6070601@elvenkind.com>
Message-ID: <alpine.LNX.2.00.1010060125130.15830@ybpnyubfg.ybpnyqbznva>

On Wed, 6 Oct 2010, Taco Hoekwater wrote:

> On 10/06/2010 07:09 AM, Aditya Mahajan wrote:
>>
>>  Is this meant only for packages that cannot be part of TL due the
>>  restrictions that you mention, or is this also the right place to upload
>>  normal context modules. If so, is this going to eventually replace
>>  modules.contextgarden.net upload system?
>
> As Nrobert said. Fairly soon there will be a second website similar
> to the new tlcontrib that will indeed replace modules.contextgarden.net
> (and that will take care of uploads to ctan just like garden does now)
> but that will be a different site, not this one.

Great.

For anyone else using github as an external repo, github allows an svn 
export and that works fine. So, no more manual updating of the modules! 
The only isse is that the svn export is only for the master branch. Which 
means that I will have to change the branching convention for my modules, 
but that is easy.

What is the HTTP URL meant for? I tried pointing it to a zip file of my 
module and it says "Sorry, we can only handle zip and tar.gz files at the 
moment".

Thanks a lot.

Aditya

From taco at elvenkind.com  Wed Oct  6 07:48:55 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 06 Oct 2010 07:48:55 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <alpine.LNX.2.00.1010060125130.15830@ybpnyubfg.ybpnyqbznva>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<4CAC0626.6070601@elvenkind.com>
	<alpine.LNX.2.00.1010060125130.15830@ybpnyubfg.ybpnyqbznva>
Message-ID: <4CAC0DC7.2060604@elvenkind.com>

On 10/06/2010 07:33 AM, Aditya Mahajan wrote:
>
> What is the HTTP URL meant for? I tried pointing it to a zip file of my
> module and it says "Sorry, we can only handle zip and tar.gz files at
> the moment".

What was your exact url? It really should end with ".zip"

Best wishes,
Taco

From adityam at umich.edu  Wed Oct  6 07:56:49 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 6 Oct 2010 01:56:49 -0400
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <4CAC0DC7.2060604@elvenkind.com>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<4CAC0626.6070601@elvenkind.com>
	<alpine.LNX.2.00.1010060125130.15830@ybpnyubfg.ybpnyqbznva>
	<4CAC0DC7.2060604@elvenkind.com>
Message-ID: <2348B480-5730-42A0-BEEE-56397431F290@umich.edu>

On Oct 6, 2010, at 1:48 AM, Taco Hoekwater <taco at elvenkind.com> wrote:

> On 10/06/2010 07:33 AM, Aditya Mahajan wrote:
>> 
>> What is the HTTP URL meant for? I tried pointing it to a zip file of my
>> module and it says "Sorry, we can only handle zip and tar.gz files at
>> the moment".
> 
> What was your exact url? It really should end with ".zip"

The url was the auto generated zipball for a tag at github: http://github.com/adityam/filter/archives/2010.09.26

Is it possible to detect the archive using content/type?

Aditya
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20101006/9f2dd675/attachment-0001.html>

From taco at elvenkind.com  Wed Oct  6 07:59:42 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 06 Oct 2010 07:59:42 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <2348B480-5730-42A0-BEEE-56397431F290@umich.edu>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<4CAC0626.6070601@elvenkind.com>
	<alpine.LNX.2.00.1010060125130.15830@ybpnyubfg.ybpnyqbznva>
	<4CAC0DC7.2060604@elvenkind.com>
	<2348B480-5730-42A0-BEEE-56397431F290@umich.edu>
Message-ID: <4CAC104E.1060606@elvenkind.com>

On 10/06/2010 07:56 AM, Aditya Mahajan wrote:
> On Oct 6, 2010, at 1:48 AM, Taco Hoekwater <taco at elvenkind.com
> <mailto:taco at elvenkind.com>> wrote:
>
>> On 10/06/2010 07:33 AM, Aditya Mahajan wrote:
>>>
>>> What is the HTTP URL meant for? I tried pointing it to a zip file of my
>>> module and it says "Sorry, we can only handle zip and tar.gz files at
>>> the moment".
>>
>> What was your exact url? It really should end with ".zip"
>
> The url was the auto generated zipball for a tag at github:
> <http://github.com/adityam/filter/archives/2010.09.26>http://github.com/adityam/filter/archives/2010.09.26
>
> Is it possible to detect the archive using content/type?

Nor for a while at least (as then I also need a database field
to store the mime type in).

Best wishes,
Taco

From mvermont at mplw.net  Wed Oct  6 05:25:25 2010
From: mvermont at mplw.net (Martin Vermont)
Date: Wed, 6 Oct 2010 06:25:25 +0300
Subject: [dev-context] [***SPAM***] http://wiki.contextgarden.net - Contact
	needed
Message-ID: <ef52839d2b771f9522e22f9dc35c600a@www.e-cammsol.com>

I am Dr. Martin Vermont and I work for Multilingual Search Engine
Optimization Inc. in Washington DC ( Tel: 1-202-558-2504) - I would
like to speak with the person in charge of your international
clientele. Who is my contact? Who should I speak to??

In fact, after visiting http://wiki.contextgarden.net
 , I have noticed that your website cannot be found on foreign search
engines (I tested it on Hispanic search engines, German search
engines, Asian search engines, etc.) Our company is specialized in
multilingual search engine promotions in 28 languages . From the
Japanese Google to the German Yahoo, from the AOL in Spanish to the
MSN in Chinese, we can show you how to develop a true international
online presence by promoting your website on foreign search engines.

Let us show you how to develop a presence on the multilingual web
without having to translate your website: It is not necessary to
translate your website in order to submit to foreign search engines,
however, you need to have at least 1 page in Japanese optimized with
Japanese keywords and meta tags in order to submit to Japanese search
engines, at least 1 page in Spanish optimized with Spanish keywords in
order to submit to Hispanic search engines and so on...

I strongly suggest that you watch our online presentation which will
explains clearly how to get top rankings on foreign search engines
with only 1 entry page per language (click on the following link or
copy-paste it into your web browser): http://www.mplw.net/demo

From bogus@does.not.exist.com  Mon Sep  6 21:19:52 2010
From: bogus@does.not.exist.com ()
Date: Mon, 06 Sep 2010 19:19:52 -0000
Subject: No subject
Message-ID: <mailman.1.1286344912.4217.dev-context@ntg.nl>

to the MSN in Chinese, get users to find your website when searching
with YOUR KEYWORDS in their Native language.

Please call me at +1 (202) 558-2504 or email me and let's work on
giving your website the true international exposure which it deserves
to have with foreign native online users!! 

Regards, 

Martin Vermont, Ph.D. 

mvermont at mplw.net <mailto:mvermont at mplw.net>

Multilingual Search Engine Optimization Inc.

1250 Connecticut Ave N.W. Suite 200

Washington, DC 20036 USA

TEL: +1 (202) 558-2504 - FAX: 1 (202)-318-2453

http://www.mplw.net

Multilingual Search Engine Promotion Services since 1999.



 


--b1_ef52839d2b771f9522e22f9dc35c600a
Content-Type: text/html; charset = "UTF-8"
Content-Transfer-Encoding: 8bit

<html><head>
        <meta content="text/html;charset=UTF-8" http-equiv="Content-Type">
        <title></title></head><body><p><font size="2" face="Verdana">I am Dr. Martin Vermont and I work for Multilingual Search Engine Optimization Inc.&nbsp; in Washington DC &nbsp;( Tel: 1-202-</font><font size="2" face="Verdana">558-2504) - I would like to speak with the person in charge of your international clientele. Who is my contact? Who should I speak to??<br />
<br />
In fact, after visiting <a href="http://wiki.contextgarden.net">http://wiki.contextgarden.net</a> , I have noticed that your website cannot be found on foreign search engines (I tested &nbsp;it on Hispanic search engines, German search engines, Asian search engines, &nbsp;etc.) Our company is specialized in multilingual search engine promotions in 28 languages . From the Japanese Google to the German Yahoo, from the AOL &nbsp;in Spanish to the MSN in Chinese, we can show you how to develop a true international online presence by promoting your website on foreign search engines.<br />
<br />
Let us show &nbsp;you how to develop a presence on the multilingual web without having to &nbsp;translate your website: It is not necessary to translate your website in &nbsp;order to submit to foreign search engines, however, you need to have at least &nbsp;1 page in Japanese optimized with Japanese keywords and meta tags in order to &nbsp;submit to Japanese search engines, at least 1 page in Spanish optimized with &nbsp;Spanish keywords in order to submit to Hispanic search engines and so &nbsp;on...<br />
<br />
I strongly suggest that you watch our online presentation which &nbsp;will explains clearly how to get top rankings on foreign search engines with &nbsp;only 1 entry page per language (click on the following link or copy-paste it &nbsp;into your web browser): <u><a href="http://www.mplw.net/demo">http://www.mplw.net/demo</a><br />
<br />
</u>From the Japanese Google to the German Yahoo, from the AOL in Spanish to the MSN in Chinese, get users to find your website when &nbsp;searching with YOUR KEYWORDS in their Native language.<br />
<br />
Please call me at +1 (202) 558-2504 or email me and let's work on giving your website the true international exposure which it deserves to have with foreign native online users!! <br />
<br />
Regards, <br />
<br />
Martin Vermont, Ph.D. <br />
<a href="mailto:mvermont at mplw.net">mvermont at mplw.net</a><br />
<br />
Multilingual Search Engine Optimization Inc.<br />
1250 Connecticut Ave N.W. Suite &nbsp;200<br />
Washington, DC 20036 USA<br />
TEL: +1 (202) 558-2504 - FAX: 1 (202)-318-2453<br />
<u><a href="http://www.mplw.net">http://www.mplw.net</a></u><br />
Multilingual Search Engine Promotion Services since 1999.</font></p><br /><br /> </body></html>



--b1_ef52839d2b771f9522e22f9dc35c600a--


From taco at elvenkind.com  Wed Oct  6 08:05:40 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 06 Oct 2010 08:05:40 +0200
Subject: [dev-context] [***SPAM***] http://wiki.contextgarden.net -
 Contact needed
In-Reply-To: <ef52839d2b771f9522e22f9dc35c600a@www.e-cammsol.com>
References: <ef52839d2b771f9522e22f9dc35c600a@www.e-cammsol.com>
Message-ID: <4CAC11B4.3050909@elvenkind.com>


Hi,

On 10/06/2010 05:25 AM, Martin Vermont wrote:
> I am Dr. Martin Vermont and I work for Multilingual Search Engine

Jikes, sorry. There was a moderated message from Reinhard
but I selected the wrong one in the mailman interface so
this one got accepted and Reinhard's got discarded.

Reinhard, if it was important for dev-context, can you please
post again?

Best wishes,
Taco



From mojca.miklavec.lists at gmail.com  Wed Oct  6 12:50:01 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 6 Oct 2010 12:50:01 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
Message-ID: <AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>

On Wed, Oct 6, 2010 at 07:09, Aditya Mahajan wrote:
>
> Is this meant only for packages that cannot be part of TL due the
> restrictions that you mention, or is this also the right place to upload
> normal context modules. If so, is this going to eventually replace
> modules.contextgarden.net upload system?

I have promised Taco to send him a loooooooong list of requests for
modules.contextgarden.net once this repository is up and running. :)
:) :)

Taco, once you are back to this ... the repository works much better
now, but ConTeXt doesn't. I thought at first that
    /usr/local/texlive/2010/texmfcnf.lua
was not adapted yet, but then I figured out that I have
    /usr/local/texlive/2010/texmfcnf.lua
with
    return { TEXMFCACHE = '~/Library/texlive/2010/texmf-var' }
that has probably been created for MacTeX only. Any idea how to best
circumvent this? Should we ask Dick to fix texmfcnf.lua to handle both
old and new ConTeXt? But most important of all - why doesn't ConTeXt
handle that already? (Why doesn't it find several versions of
configuration file and just overloads the important bits?)

Mojca

PS: is it possible to have several maintainers of the same package?
Also, I don't mind too much, but it could see a bit strange to see my
name listed as "Author" of LuaTeX. I also suggest some (off-list)
discussion about packaging LuaTeX binaries and the best way to combine
that with minimals & current building process. I plan to drop building
pdfTeX and XeTeX anyway since the building breaks on many platforms
and there is hardly any development being done

From taco at elvenkind.com  Wed Oct  6 13:00:42 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 06 Oct 2010 13:00:42 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
References: <4CAB6C37.9050206@elvenkind.com>	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
Message-ID: <4CAC56DA.5070005@elvenkind.com>


Hi,

On 10/06/10 12:50, Mojca Miklavec wrote:
> that has probably been created for MacTeX only. Any idea how to best
> circumvent this? 

Something needs changing locally, there is nothing we can do at
the repository end.

> Should we ask Dick to fix texmfcnf.lua to handle both
> old and new ConTeXt? But most important of all - why doesn't ConTeXt
> handle that already? (Why doesn't it find several versions of
> configuration file and just overloads the important bits?)

This is definitely a question for Hans.

> 
> PS: is it possible to have several maintainers of the same package?

No, but that sounds like a useful extension to consider.

Best wishes,
Taco

From pragma at wxs.nl  Wed Oct  6 13:15:56 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 06 Oct 2010 13:15:56 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <4CAC56DA.5070005@elvenkind.com>
References: <4CAB6C37.9050206@elvenkind.com>	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
	<4CAC56DA.5070005@elvenkind.com>
Message-ID: <4CAC5A6C.9030804@wxs.nl>

On 6-10-2010 1:00, Taco Hoekwater wrote:

>> Should we ask Dick to fix texmfcnf.lua to handle both
>> old and new ConTeXt? But most important of all - why doesn't ConTeXt

in what respect old and new? mkii does not use that file

>> handle that already? (Why doesn't it find several versions of
>> configuration file and just overloads the important bits?)

afaik you can have several texmfcnf.lua files

mtxrun  texmfcnf.lua

reports what it will load (two files on my machine as I have to add dev 
paths/trees)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Wed Oct  6 13:19:01 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 6 Oct 2010 13:19:01 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <4CAC5A6C.9030804@wxs.nl>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
	<4CAC56DA.5070005@elvenkind.com> <4CAC5A6C.9030804@wxs.nl>
Message-ID: <AANLkTimRv9TqOtcy7yo692_StjGL8EfkeVtVJTjsoYxF@mail.gmail.com>

On Wed, Oct 6, 2010 at 13:15, Hans Hagen <pragma at wxs.nl> wrote:
> On 6-10-2010 1:00, Taco Hoekwater wrote:
>
>>> Should we ask Dick to fix texmfcnf.lua to handle both
>>> old and new ConTeXt? But most important of all - why doesn't ConTeXt
>
> in what respect old and new? mkii does not use that file

Not MKII, but old meaning "MKIV before March 2010" that was using a
different format of texmfcnf.lua.

>>> handle that already? (Why doesn't it find several versions of
>>> configuration file and just overloads the important bits?)
>
> afaik you can have several texmfcnf.lua files
>
> mtxrun ?texmfcnf.lua
>
> reports what it will load (two files on my machine as I have to add dev
> paths/trees)

Well, on my machine (after updating ConTeXt from Taco's repository) it reports:

> mtxrun texmfcnf.lua

MTXrun | unknown script 'mtx-base.lua' or 'mtx-mtx-base.lua'

Mojca

From pragma at wxs.nl  Wed Oct  6 13:21:16 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 06 Oct 2010 13:21:16 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
References: <4CAB6C37.9050206@elvenkind.com>	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
Message-ID: <4CAC5BAC.80908@wxs.nl>

On 6-10-2010 12:50, Mojca Miklavec wrote:

>      return { TEXMFCACHE = '~/Library/texlive/2010/texmf-var' }
> that has probably been created for MacTeX only. Any idea how to best
> circumvent this? Should we ask Dick to fix texmfcnf.lua to handle both
> old and new ConTeXt? But most important of all - why doesn't ConTeXt
> handle that already? (Why doesn't it find several versions of
> configuration file and just overloads the important bits?)

why not just take the latest texmfcnf.lua; you can either change the 
cache path there or you can have an extra texmfcnf.lua with only the 
vars that need to be adapted and put that in texmf-local or so

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Wed Oct  6 13:22:26 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 06 Oct 2010 13:22:26 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <AANLkTimRv9TqOtcy7yo692_StjGL8EfkeVtVJTjsoYxF@mail.gmail.com>
References: <4CAB6C37.9050206@elvenkind.com>	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>	<4CAC56DA.5070005@elvenkind.com>	<4CAC5A6C.9030804@wxs.nl>
	<AANLkTimRv9TqOtcy7yo692_StjGL8EfkeVtVJTjsoYxF@mail.gmail.com>
Message-ID: <4CAC5BF2.2090903@wxs.nl>

On 6-10-2010 1:19, Mojca Miklavec wrote:

>> mtxrun texmfcnf.lua
>
> MTXrun | unknown script 'mtx-base.lua' or 'mtx-mtx-base.lua'

hm, did you run mtxrun --generate?

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Wed Oct  6 14:04:42 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 6 Oct 2010 14:04:42 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <4CAC5BF2.2090903@wxs.nl>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
	<4CAC56DA.5070005@elvenkind.com> <4CAC5A6C.9030804@wxs.nl>
	<AANLkTimRv9TqOtcy7yo692_StjGL8EfkeVtVJTjsoYxF@mail.gmail.com>
	<4CAC5BF2.2090903@wxs.nl>
Message-ID: <AANLkTi=WU0M9c-L_ZP0uzEc=mB-NJv-qJkMupPFLkqTH@mail.gmail.com>

>>> mtxrun texmfcnf.lua
>>
>> MTXrun | unknown script 'mtx-base.lua' or 'mtx-mtx-base.lua'
>
> hm, did you run mtxrun --generate?

Sure. But that is a chicken-and-egg problem, or at least I can
understand why it doesn't help (I'm looking for a file that defines
where to look for it).

Mojca

From pragma at wxs.nl  Wed Oct  6 14:12:19 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 06 Oct 2010 14:12:19 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <AANLkTi=WU0M9c-L_ZP0uzEc=mB-NJv-qJkMupPFLkqTH@mail.gmail.com>
References: <4CAB6C37.9050206@elvenkind.com>	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>	<4CAC56DA.5070005@elvenkind.com>	<4CAC5A6C.9030804@wxs.nl>	<AANLkTimRv9TqOtcy7yo692_StjGL8EfkeVtVJTjsoYxF@mail.gmail.com>	<4CAC5BF2.2090903@wxs.nl>
	<AANLkTi=WU0M9c-L_ZP0uzEc=mB-NJv-qJkMupPFLkqTH@mail.gmail.com>
Message-ID: <4CAC67A3.4080100@wxs.nl>

On 6-10-2010 2:04, Mojca Miklavec wrote:
>>>> mtxrun texmfcnf.lua
>>>
>>> MTXrun | unknown script 'mtx-base.lua' or 'mtx-mtx-base.lua'
>>
>> hm, did you run mtxrun --generate?
>
> Sure. But that is a chicken-and-egg problem, or at least I can
> understand why it doesn't help (I'm looking for a file that defines
> where to look for it).

mtx-base has the old luatools functionality that does not fit in mtxrun 
itself

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Wed Oct  6 14:19:31 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 6 Oct 2010 14:19:31 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <4CAC5BAC.80908@wxs.nl>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
	<4CAC5BAC.80908@wxs.nl>
Message-ID: <AANLkTikfDit8xzPoZT1Tho9wuUdKuBC9nepKDWwEyX=w@mail.gmail.com>

On Wed, Oct 6, 2010 at 13:21, Hans Hagen wrote:
> On 6-10-2010 12:50, Mojca Miklavec wrote:
>
>> ? ? return { TEXMFCACHE = '~/Library/texlive/2010/texmf-var' }
>> that has probably been created for MacTeX only. Any idea how to best
>> circumvent this? Should we ask Dick to fix texmfcnf.lua to handle both
>> old and new ConTeXt? But most important of all - why doesn't ConTeXt
>> handle that already? (Why doesn't it find several versions of
>> configuration file and just overloads the important bits?)
>
> why not just take the latest texmfcnf.lua; you can either change the cache
> path there or you can have an extra texmfcnf.lua with only the vars that
> need to be adapted and put that in texmf-local or so

I have now changed
    /usr/local/texlive/2010/texmfcnf.lua
that now includes:

return {
  content = {
    TEXMFCACHE = '~/Library/texlive/2010/texmf-var'
    TEXMFHOME  = '~/Library/texmf'
  }
  TEXMFCACHE = '~/Library/texlive/2010/texmf-var'
}

and this seems to work at least. Well, kind of works. Since it reports

MTXrun | resolvers: category 'files', cachename
'/usr/local/texlive/2010/texmf' saved in
'/var/folders/M4/M4ltQCbqFY8X0ixvLEMsQE+++TI/-Tmp-/luatex-cache/context/210a81d6dcb1059dc80fab3f5470ab7a/trees/1240e363db2f4c53de58379d2b0c6f6b.lua'

and that is not really the desired location. Also when I run context it says:

MTXrun | resolvers: skipping configuration file
'/usr/local/texlive/2010/texmfcnf.lua'
MTXrun | resolvers: loading configuration file
'/usr/local/texlive/2010/texmf/web2c/texmfcnf.lua'

Hans, what exactly does it mean "skipping configuration"?

Mojca

From pragma at wxs.nl  Wed Oct  6 14:26:26 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 06 Oct 2010 14:26:26 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <AANLkTikfDit8xzPoZT1Tho9wuUdKuBC9nepKDWwEyX=w@mail.gmail.com>
References: <4CAB6C37.9050206@elvenkind.com>	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>	<4CAC5BAC.80908@wxs.nl>
	<AANLkTikfDit8xzPoZT1Tho9wuUdKuBC9nepKDWwEyX=w@mail.gmail.com>
Message-ID: <4CAC6AF2.1000408@wxs.nl>

On 6-10-2010 2:19, Mojca Miklavec wrote:

> Hans, what exactly does it mean "skipping configuration"?

data = data and data.content
if data then
   -- use the content
else
   -- skipping message
end 	

so it's a harmless message

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Wed Oct  6 14:28:01 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 6 Oct 2010 14:28:01 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <4CAC6AF2.1000408@wxs.nl>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
	<4CAC5BAC.80908@wxs.nl>
	<AANLkTikfDit8xzPoZT1Tho9wuUdKuBC9nepKDWwEyX=w@mail.gmail.com>
	<4CAC6AF2.1000408@wxs.nl>
Message-ID: <AANLkTik+=kpeittDttUcH1SYLEZXRzdNHgwwB9GNb0LD@mail.gmail.com>

On Wed, Oct 6, 2010 at 14:26, Hans Hagen <pragma at wxs.nl> wrote:
> On 6-10-2010 2:19, Mojca Miklavec wrote:
>
>> Hans, what exactly does it mean "skipping configuration"?
>
> data = data and data.content
> if data then
> ?-- use the content
> else
> ?-- skipping message
> end
>
> so it's a harmless message

It may be harmless ... but it doesn't respect my settings either.

Mojca

From pragma at wxs.nl  Wed Oct  6 14:28:46 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 06 Oct 2010 14:28:46 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <AANLkTikfDit8xzPoZT1Tho9wuUdKuBC9nepKDWwEyX=w@mail.gmail.com>
References: <4CAB6C37.9050206@elvenkind.com>	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>	<4CAC5BAC.80908@wxs.nl>
	<AANLkTikfDit8xzPoZT1Tho9wuUdKuBC9nepKDWwEyX=w@mail.gmail.com>
Message-ID: <4CAC6B7E.30909@wxs.nl>

On 6-10-2010 2:19, Mojca Miklavec wrote:

> return {
>    content = {
>      TEXMFCACHE = '~/Library/texlive/2010/texmf-var'

^^^^^^ add a comma

>      TEXMFHOME  = '~/Library/texmf'
>    }

^^^^^^ add a comma

>    TEXMFCACHE = '~/Library/texlive/2010/texmf-var'
> }
>
> and this seems to work at least. Well, kind of works. Since it reports
>
> MTXrun | resolvers: category 'files', cachename
> '/usr/local/texlive/2010/texmf' saved in
> '/var/folders/M4/M4ltQCbqFY8X0ixvLEMsQE+++TI/-Tmp-/luatex-cache/context/210a81d6dcb1059dc80fab3f5470ab7a/trees/1240e363db2f4c53de58379d2b0c6f6b.lua'

the fallback to temp

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Wed Oct  6 14:36:04 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 6 Oct 2010 14:36:04 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <4CAC6B7E.30909@wxs.nl>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
	<4CAC5BAC.80908@wxs.nl>
	<AANLkTikfDit8xzPoZT1Tho9wuUdKuBC9nepKDWwEyX=w@mail.gmail.com>
	<4CAC6B7E.30909@wxs.nl>
Message-ID: <AANLkTi=8bqBv5os3KPxxnzkb-HvrrXeF3yUPyoJSGBU-@mail.gmail.com>

On Wed, Oct 6, 2010 at 14:28, Hans Hagen <pragma at wxs.nl> wrote:
> On 6-10-2010 2:19, Mojca Miklavec wrote:
>
>> return {
>> ? content = {
>> ? ? TEXMFCACHE = '~/Library/texlive/2010/texmf-var'
>
> ^^^^^^ add a comma

Stealing Arthur's words: "I deny everything."

So here it goes ...

MTXrun | resolvers: loading configuration file
'/usr/local/texlive/2010/texmfcnf.lua'
MTXrun | resolvers
MTXrun | resolvers: loading configuration file
'/usr/local/texlive/2010/texmf/web2c/texmfcnf.lua'
MTXrun | resolvers
...
MTXrun | resolvers: category 'files', cachename
'/usr/local/texlive/2010/texmf' saved in
'/Users/mojca/Library/texlive/2010/texmf-var/luatex-cache/context/210a81d6dcb1059dc80fab3f5470ab7a/trees/1240e363db2f4c53de58379d2b0c6f6b.lua'

Dick, is there any chance to replace the content of texmfcnf.lua with
the following:

return {
	content = {
		TEXMFCACHE = '~/Library/texlive/2010/texmf-var',
		TEXMFHOME  = '~/Library/texmf',
	},
	TEXMFCACHE = '~/Library/texlive/2010/texmf-var',
}

(where the last accurence of TEXMFCACHE may be removed next year). I
have no idea whether it is possible to auto-update that file though
... but if you ever release an updated version of MacTeX ...

Thanks,
    Mojca

From adityam at umich.edu  Wed Oct  6 22:28:31 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 6 Oct 2010 16:28:31 -0400 (EDT)
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <4CAB6C37.9050206@elvenkind.com>
References: <4CAB6C37.9050206@elvenkind.com>
Message-ID: <alpine.LNX.2.01.1010061622550.20601@ybpnyubfg.ybpnyqbznva>

On Tue, 5 Oct 2010, Taco Hoekwater wrote:

>
> Hello all,
>
> Please, if you have moment to spare, have a good look at the TLContrib
> website and associated repository:
>
>  http://tlcontrib.metatex.org/
>
> The system should now be ready for the initial kickoff (I hope).
>
> Mojca, Hans and me have already tried and tested various things, but it
> is quite likely that there are still bugs. I decided to post to a small
> group of people before doing an announcement on tex-live at tug.org /
> c.t.t hoping that perhaps more people can have a look, and that
> the remaining bugs can then be fixed before 'normal' users start
> using the site.

Probably I am doing something stupid, but how do I use this repo to make a 
fresh installation of TL. I downloaded 
http://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz and ran

    install-tl --repository  http://tlcontrib.metatex.org/2010/

which gave

Installing TeX Live 2010 from: http://tlcontrib.metatex.org/2010
Platform: i386-linux => 'Intel x86 with GNU/Linux'
Distribution: net  (downloading)
Using URL: http://tlcontrib.metatex.org/2010
Directory for temporary files: /tmp
Loading http://tlcontrib.metatex.org/2010/tlpkg/texlive.tlpdb
Aborting, cannot find either scheme-full or scheme_minimal at install-tl 
line 1344.

Or can this only be used to upgrade existing TL installation?

Aditya

From mojca.miklavec.lists at gmail.com  Wed Oct  6 22:35:08 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 6 Oct 2010 22:35:08 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <alpine.LNX.2.01.1010061622550.20601@ybpnyubfg.ybpnyqbznva>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.01.1010061622550.20601@ybpnyubfg.ybpnyqbznva>
Message-ID: <AANLkTikj_zn11Uy1_sOaE+BZ6=8Pk3cYtBsXHciKnVQb@mail.gmail.com>

On Wed, Oct 6, 2010 at 22:28, Aditya Mahajan wrote:
>
> Probably I am doing something stupid, but how do I use this repo to make a
> fresh installation of TL.
>
> Or can this only be used to upgrade existing TL installation?

No, you cannot make a fresh installation from it. You can only use it
to upgrade LuaTeX/ConTeXt or to install additional packages on top of
existing installation.

Mojca

From adityam at umich.edu  Thu Oct  7 00:22:33 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 6 Oct 2010 18:22:33 -0400 (EDT)
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <AANLkTikj_zn11Uy1_sOaE+BZ6=8Pk3cYtBsXHciKnVQb@mail.gmail.com>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.01.1010061622550.20601@ybpnyubfg.ybpnyqbznva>
	<AANLkTikj_zn11Uy1_sOaE+BZ6=8Pk3cYtBsXHciKnVQb@mail.gmail.com>
Message-ID: <alpine.LNX.2.01.1010061812520.24442@ybpnyubfg.ybpnyqbznva>

On Wed, 6 Oct 2010, Mojca Miklavec wrote:

> On Wed, Oct 6, 2010 at 22:28, Aditya Mahajan wrote:
>>
>> Probably I am doing something stupid, but how do I use this repo to make a
>> fresh installation of TL.
>>
>> Or can this only be used to upgrade existing TL installation?
>
> No, you cannot make a fresh installation from it. You can only use it
> to upgrade LuaTeX/ConTeXt or to install additional packages on top of
> existing installation.

OK. Tried to update a fresh TL installation:

sudo tlmgr --repository  http://tlcontrib.metatex.org/2010/ update --all

%%%%%%%%%%%%%%% OUTPUT %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
tlmgr: package repository http://tlcontrib.metatex.org/2010/
tlmgr: saving backups to /usr/local/texlive/2010/tlpkg/backups
[1/6, ??:??/??:??] update: context.i386-linux [75k] (18902 -> 18903) ... 
done
[2/6, 02:09/06:46:48] update: context [9421k] (19744 -> 19745) ... done
[3/6, 10:20/15:19] update: luatex.i386-linux [1562k] (19405 -> 19406) ... 
done
[4/6, 11:45/14:57] update: luatex [809k] (19324 -> 19328) ... done
[5/6, 12:25/14:44] update: metapost.i386-linux [192k] (18765 -> 18766) ... 
done
[6/6, 12:40/14:47] update: metapost [2023k] (18835 -> 18836) ... done
tlmgr: package log updated at 
/usr/local/texlive/2010/texmf-var/web2c/tlmgr.log
running mktexlsr ...
done running mktexlsr.
regenerating fmtutil.cnf in /usr/local/texlive/2010/texmf-var
running fmtutil-sys --no-error-if-no-format --byengine mpost ...


fmtutil-sys --no-error-if-no-format --byengine mpost failed (status 1), 
output:
fmtutil: running `mpost -ini   -jobname=metafun -progname=mpost 
metafun.mp' ...
This is MetaPost, version 1.502 (kpathsea version 6.0.0)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/metafun.mp
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-base.mp
Preloading the plain mem file, version 0.63)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-tool.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-spec.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-core.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-page.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-text.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-txts.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-shap.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-butt.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-char.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-step.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-grph.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-figs.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-mlib.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-grid.mp
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-form.mp
(/usr/local/texlive/2010/texmf-dist/metapost/base/string.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/base/marith.mp
(/usr/local/texlive/2010/texmf-dist/metapost/base/string.mp))))
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-func.mp) )
Transcript written on metafun.log.
Error: `mpost -ini  -jobname=metafun -progname=mpost metafun.mp' failed
fmtutil: running `mpost -ini   -jobname=mpost -progname=mpost mpost.mp' 
...
This is MetaPost, version 1.502 (kpathsea version 6.0.0)
(/usr/local/texlive/2010/texmf-dist/metapost/base/mpost.mp
(/usr/local/texlive/2010/texmf-dist/metapost/base/plain.mp
Preloading the plain mem file, version 1.004) )
Transcript written on mpost.log.
Error: `mpost -ini  -jobname=mpost -progname=mpost mpost.mp' failed

###############################################################################
fmtutil: Error! Not all formats have been built successfully.
Visit the log files in directory
   /usr/local/texlive/2010/texmf-var/web2c
for details.
###############################################################################

This is a summary of all `failed' messages:
`mpost -ini  -jobname=metafun -progname=mpost metafun.mp' failed
`mpost -ini  -jobname=mpost -progname=mpost mpost.mp' failed

running fmtutil-sys --no-error-if-no-format --byengine luatex ...
done running fmtutil-sys --no-error-if-no-format --byengine luatex.
running fmtutil-sys --byfmt cont-en ...
done running fmtutil-sys --byfmt cont-en.
tlmgr: exiting unsuccessfully (status 1).
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

Not sure what went wrong. I am attaching the metapost and metafun log 
files, but they appear to be from the original TL installation (based on 
the time stamp).

On the plus side, I do not 2010.07.30 version of context and a simple 
context document containing metapost does comiple fine. (I cannot test 
MkII because I don't have a working ruby installation on this machine).

Aditya


-------------- next part --------------
This is MetaPost, version 1.211 (TeX Live 2010) (kpathsea version 6.0.0) (INIMP)  6 OCT 2010 17:34
**metafun.mp
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/metafun.mp
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-base.mp
Preloading the plain mem file, version 0.63)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-tool.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-spec.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-core.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-page.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-text.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-txts.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-shap.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-butt.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-char.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-step.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-grph.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-figs.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-mlib.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-grid.mp
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-form.mp
(/usr/local/texlive/2010/texmf-dist/metapost/base/string.mp)
(/usr/local/texlive/2010/texmf-dist/metapost/base/marith.mp
(/usr/local/texlive/2010/texmf-dist/metapost/base/string.mp))))
(/usr/local/texlive/2010/texmf-dist/metapost/context/base/mp-func.mp) )
Beginning to dump on file metafun.mem
 (mem=metafun 2010.10.06)
at most 2217 strings of total length 18109
49974 memory locations dumped; current usage is 12883&36952
1816 symbolic tokens
-------------- next part --------------
This is MetaPost, version 1.211 (TeX Live 2010) (kpathsea version 6.0.0) (INIMP)  6 OCT 2010 17:35
**mpost.mp
(/usr/local/texlive/2010/texmf-dist/metapost/base/mpost.mp
(/usr/local/texlive/2010/texmf-dist/metapost/base/plain.mp
Preloading the plain mem file, version 1.004) )
Beginning to dump on file mpost.mem
 (mem=mpost 2010.10.06)
at most 745 strings of total length 3693
3412 memory locations dumped; current usage is 1036&2302
507 symbolic tokens

From taco at elvenkind.com  Thu Oct  7 10:29:38 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 07 Oct 2010 10:29:38 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <alpine.LNX.2.01.1010061812520.24442@ybpnyubfg.ybpnyqbznva>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.01.1010061622550.20601@ybpnyubfg.ybpnyqbznva>
	<AANLkTikj_zn11Uy1_sOaE+BZ6=8Pk3cYtBsXHciKnVQb@mail.gmail.com>
	<alpine.LNX.2.01.1010061812520.24442@ybpnyubfg.ybpnyqbznva>
Message-ID: <4CAD84F2.2070502@elvenkind.com>



On 10/07/10 00:22, Aditya Mahajan wrote:
> 
> 
> fmtutil-sys --no-error-if-no-format --byengine mpost failed (status 1),

Metapost 1.502 no longer uses formats, but the package still
included the fmtutil lines to generate formats, and that is
why you got an error. I have fixed the package, there should
be a new revision of 'metapost' available in half an hour.

And yes, your logs were from the old version.

Best wishes,
Taco

From taco at elvenkind.com  Fri Oct  8 08:50:24 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 08 Oct 2010 08:50:24 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
References: <4CAB6C37.9050206@elvenkind.com>	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
Message-ID: <4CAEBF30.1050408@elvenkind.com>


Hi,

On 10/06/2010 12:50 PM, Mojca Miklavec wrote:
>
> Taco, once you are back to this ... the repository works much better
> now, but ConTeXt doesn't. I thought at first that
>      /usr/local/texlive/2010/texmfcnf.lua
> was not adapted yet, but then I figured out that I have
>      /usr/local/texlive/2010/texmfcnf.lua
> with
>      return { TEXMFCACHE = '~/Library/texlive/2010/texmf-var' }
> that has probably been created for MacTeX only.

This is sorted out now, or at least it is not really my problem,
right? (there *is* the weirdness that for texlive, the texmfcnf.lua
lives in the 'luatex' package, not in 'context', but that is just
a minor packaging issue).

> Also, I don't mind too much, but it could see a bit strange to see my
> name listed as "Author" of LuaTeX.

Changed the label to 'Package maintainer'.

> I also suggest some (off-list) discussion about packaging LuaTeX binaries

Ok, good.

Best wishes,
Taco

From preining at logic.at  Fri Oct  8 10:58:31 2010
From: preining at logic.at (Norbert Preining)
Date: Fri, 8 Oct 2010 17:58:31 +0900
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <4CAEBF30.1050408@elvenkind.com>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
	<4CAEBF30.1050408@elvenkind.com>
Message-ID: <20101008085831.GA20732@gamma.logic.tuwien.ac.at>

On Fr, 08 Okt 2010, Taco Hoekwater wrote:
> right? (there *is* the weirdness that for texlive, the texmfcnf.lua
> lives in the 'luatex' package, not in 'context', but that is just
> a minor packaging issue).

I think we discussed that at that time, and it seemed more natural 
to put it into luatex packages, as the postinstall would call the
luatools incantation. Now if you only install context without
luatex that wouldn't work. So actually it is the right place, texmfcnf.lua
has nothing to do with context (well ...) only that context uses its database
;-)

Best wishes

Norbert
------------------------------------------------------------------------
Norbert Preining            preining@{jaist.ac.jp, logic.at, debian.org}
JAIST, Japan                                 TeX Live & Debian Developer
DSA: 0x09C5B094   fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
------------------------------------------------------------------------
KIMMERIDGE (n.)
The light breeze which blows through your armpit hair when you are
stretched out sunbathing.
			--- Douglas Adams, The Meaning of Liff

From mojca.miklavec.lists at gmail.com  Fri Oct  8 11:02:15 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 8 Oct 2010 11:02:15 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <20101008085831.GA20732@gamma.logic.tuwien.ac.at>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
	<4CAEBF30.1050408@elvenkind.com>
	<20101008085831.GA20732@gamma.logic.tuwien.ac.at>
Message-ID: <AANLkTimCYTZWPVULRZqSDH8-_LVhYAR7ECkJFrrX-wGL@mail.gmail.com>

On Fri, Oct 8, 2010 at 10:58, Norbert Preining <preining at logic.at> wrote:
> On Fr, 08 Okt 2010, Taco Hoekwater wrote:
>> right? (there *is* the weirdness that for texlive, the texmfcnf.lua
>> lives in the 'luatex' package, not in 'context', but that is just
>> a minor packaging issue).
>
> I think we discussed that at that time, and it seemed more natural
> to put it into luatex packages, as the postinstall would call the
> luatools incantation. Now if you only install context without
> luatex that wouldn't work.

ConTeXt without luatex wouldn't work anyway ... :)

Apart from that it's probably luaotfload that also uses the same
TEXMFCACHE field to store font data. (Which makes me wonder if
luaotfload also needs to apply the same fix after Hans has changed the
format of texmfcnf.lua.)

Mojca

From taco at elvenkind.com  Fri Oct  8 11:04:10 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 08 Oct 2010 11:04:10 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <20101008085831.GA20732@gamma.logic.tuwien.ac.at>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
	<4CAEBF30.1050408@elvenkind.com>
	<20101008085831.GA20732@gamma.logic.tuwien.ac.at>
Message-ID: <4CAEDE8A.5010507@elvenkind.com>

On 10/08/2010 10:58 AM, Norbert Preining wrote:
> On Fr, 08 Okt 2010, Taco Hoekwater wrote:
>> right? (there *is* the weirdness that for texlive, the texmfcnf.lua
>> lives in the 'luatex' package, not in 'context', but that is just
>> a minor packaging issue).
>
> I think we discussed that at that time, and it seemed more natural
> to put it into luatex packages, as the postinstall would call the
> luatools incantation. Now if you only install context without
> luatex that wouldn't work. So actually it is the right place, texmfcnf.lua
> has nothing to do with context (well ...) only that context uses its database
> ;-)

Right, I had forgotten about that.

Best wishes,
Taco


From khaledhosny at eglug.org  Fri Oct  8 11:05:41 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 8 Oct 2010 11:05:41 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <20101008085831.GA20732@gamma.logic.tuwien.ac.at>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
	<4CAEBF30.1050408@elvenkind.com>
	<20101008085831.GA20732@gamma.logic.tuwien.ac.at>
Message-ID: <20101008090541.GA3390@khaled-laptop>

On Fri, Oct 08, 2010 at 05:58:31PM +0900, Norbert Preining wrote:
> On Fr, 08 Okt 2010, Taco Hoekwater wrote:
> > right? (there *is* the weirdness that for texlive, the texmfcnf.lua
> > lives in the 'luatex' package, not in 'context', but that is just
> > a minor packaging issue).
> 
> I think we discussed that at that time, and it seemed more natural 
> to put it into luatex packages, as the postinstall would call the
> luatools incantation. Now if you only install context without
> luatex that wouldn't work. So actually it is the right place, texmfcnf.lua
> has nothing to do with context (well ...) only that context uses its database
> ;-)

But luatools is part of context not luatex, if you install luatex
without context how that would work?

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From khaledhosny at eglug.org  Fri Oct  8 11:07:25 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 8 Oct 2010 11:07:25 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <AANLkTimCYTZWPVULRZqSDH8-_LVhYAR7ECkJFrrX-wGL@mail.gmail.com>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
	<4CAEBF30.1050408@elvenkind.com>
	<20101008085831.GA20732@gamma.logic.tuwien.ac.at>
	<AANLkTimCYTZWPVULRZqSDH8-_LVhYAR7ECkJFrrX-wGL@mail.gmail.com>
Message-ID: <20101008090725.GB3390@khaled-laptop>

On Fri, Oct 08, 2010 at 11:02:15AM +0200, Mojca Miklavec wrote:
> On Fri, Oct 8, 2010 at 10:58, Norbert Preining <preining at logic.at> wrote:
> > On Fr, 08 Okt 2010, Taco Hoekwater wrote:
> >> right? (there *is* the weirdness that for texlive, the texmfcnf.lua
> >> lives in the 'luatex' package, not in 'context', but that is just
> >> a minor packaging issue).
> >
> > I think we discussed that at that time, and it seemed more natural
> > to put it into luatex packages, as the postinstall would call the
> > luatools incantation. Now if you only install context without
> > luatex that wouldn't work.
> 
> ConTeXt without luatex wouldn't work anyway ... :)
> 
> Apart from that it's probably luaotfload that also uses the same
> TEXMFCACHE field to store font data. (Which makes me wonder if
> luaotfload also needs to apply the same fix after Hans has changed the
> format of texmfcnf.lua.)

No, we use kpse for retrieving such values and kpse in turn will use its
usual configuration.

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From patrick at gundla.ch  Fri Oct  8 11:59:17 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Fri, 8 Oct 2010 11:59:17 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <4CAEBF30.1050408@elvenkind.com>
References: <4CAB6C37.9050206@elvenkind.com>	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
	<4CAEBF30.1050408@elvenkind.com>
Message-ID: <B6A8CC79-8DAD-4F13-B1AE-4D01853E3EDB@gundla.ch>


> This is sorted out now, or at least it is not really my problem,
> right? (there *is* the weirdness that for texlive, the texmfcnf.lua
> lives in the 'luatex' package, not in 'context', but that is just
> a minor packaging issue).

What other macro packages use texmfcnf.lua? Does LuaLaTeX use it?

Patrick


From pragma at wxs.nl  Fri Oct  8 12:24:03 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 08 Oct 2010 12:24:03 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <B6A8CC79-8DAD-4F13-B1AE-4D01853E3EDB@gundla.ch>
References: <4CAB6C37.9050206@elvenkind.com>	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>	<4CAEBF30.1050408@elvenkind.com>
	<B6A8CC79-8DAD-4F13-B1AE-4D01853E3EDB@gundla.ch>
Message-ID: <4CAEF143.1070808@wxs.nl>

On 8-10-2010 11:59, Patrick Gundlach wrote:
>
>> This is sorted out now, or at least it is not really my problem,
>> right? (there *is* the weirdness that for texlive, the texmfcnf.lua
>> lives in the 'luatex' package, not in 'context', but that is just
>> a minor packaging issue).
>
> What other macro packages use texmfcnf.lua? Does LuaLaTeX use it?

I cannot imagine it as it is part of the context distribution and gets 
extended as we go. I'm not keeping latex (or whatever) in mind as I do so.

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From khaledhosny at eglug.org  Fri Oct  8 13:07:58 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 8 Oct 2010 13:07:58 +0200
Subject: [dev-context] TLContrib is ready for testing
In-Reply-To: <B6A8CC79-8DAD-4F13-B1AE-4D01853E3EDB@gundla.ch>
References: <4CAB6C37.9050206@elvenkind.com>
	<alpine.LNX.2.00.1010060107000.15830@ybpnyubfg.ybpnyqbznva>
	<AANLkTinD-8d7t8+ttU4gQxePTczvo1Xop8iG7hOg8s2S@mail.gmail.com>
	<4CAEBF30.1050408@elvenkind.com>
	<B6A8CC79-8DAD-4F13-B1AE-4D01853E3EDB@gundla.ch>
Message-ID: <20101008110758.GB3577@khaled-laptop>

On Fri, Oct 08, 2010 at 11:59:17AM +0200, Patrick Gundlach wrote:
> 
> > This is sorted out now, or at least it is not really my problem,
> > right? (there *is* the weirdness that for texlive, the texmfcnf.lua
> > lives in the 'luatex' package, not in 'context', but that is just
> > a minor packaging issue).
> 
> What other macro packages use texmfcnf.lua? Does LuaLaTeX use it?

AFAIK, only ConTeXt, non of my LaTeX packages use it.

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From mojca.miklavec.lists at gmail.com  Tue Oct 12 21:24:14 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 12 Oct 2010 21:24:14 +0200
Subject: [dev-context] Greek without Latin
Message-ID: <AANLkTim3cLz6nAj_AAEweniDYiG65PvXetXZNnPa=nTg@mail.gmail.com>


From bogus@does.not.exist.com  Mon Sep  6 21:19:52 2010
From: bogus@does.not.exist.com ()
Date: Mon, 06 Sep 2010 19:19:52 -0000
Subject: No subject
Message-ID: <mailman.2.1286911460.4217.dev-context@ntg.nl>

Hans,

here's a challenging question from the XeTeX mailing list. Somebody
gave a challenge of how one writes units or rather: if it is possible
to get rid of latin keyboard entirely, for example if one is able to
retype \includegraphics[width=3D10cm,scale=3D5]{...} in arabic/possibly
greek interface without using the latin keyboard)?

In either case I think that one should convince the author to take
ConTeXt instead of LaTeX to rewrite the commands ...

Mojca


2010/10/12 Alexandros Gotsis <gotsis at science.tuc.gr> wrote:
> Dear friends,
>
> I am trying to "greekify" XeLaTex in order to make it easier for greek wr=
iters to use. I have translated almost all the commands (e.g., instead of \=
begin{document} I can use \=CE=B1=CF=81=CF=87=CE=AE{=CE=BA=CE=B5=CE=B9=CE=
=BC=CE=AD=CE=BD=CE=BF=CF=85}, etc.) that I could think of and made new arti=
cle, book etc. classes with the greek commands. These new classes just rene=
w the commands etc. and they work rather well. There are a few errors still=
 that I try to figure out, but there are also a couple of things that I do =
not know how to do and, therefore, ask your advise/help.
>
> 1. I could replace almost all commands of (Xe)LaTeX, but I can do nothing=
 with the very first one: \documentclass{}! Is there a way to change the na=
me of this command so that the XeLaTeX engine still understands it? I am lo=
oking for solutions that will not include any extra (latin) text in the sou=
rce file, as this would defy the purpose.
>
> 2. While I have changed the names for "Chapter", "Figure", the dates, the=
 numbers, capitalisation etc. (thanks for all this go to the work of Syropo=
ylos in Xanthi), I do not know how to change things as, e.g., [c] (center) =
to [=CE=BA] (=CE=BA=CE=AD=CE=BD=CF=84=CF=81=CE=BF), the length units (from =
mm =CF=84=CE=BF =CF=87 etc.). For the time being I would not change anythin=
g in the math environments.
>
> 3. I do not know how to change the alphabetical order in "makeindex". Usu=
ally the accented vowels follow the corresponding unaccented ones in a gree=
k index,. This is not the case for "makeindex", as it follows the unicode l=
isting. which is defined differently, and the result looks wrong in a greek=
 index list (=CE=B5=CF=85=CF=81=CE=B5=CF=84=CE=AE=CF=81=CE=B9=CE=BF).
>
> The idea behind the changes is that a writer of greek text (or arab, chin=
ese etc.) should not be obliged to change his/her computer keyboard to lati=
n for the commands and back again for the text. Also the names of the comma=
nds would be more transparent for non-english speakers.

followed by:

On Tue, Oct 12, 2010 at 13:54, Ulrike Fischer wrote:
> Am Tue, 12 Oct 2010 11:13:41 +0200 schrieb Khaled Hosny:
>
>>>> The idea behind the changes is that a writer of greek text (or
>>>> arab, chinese etc.) should not be obliged to change his/her
>>>> computer keyboard to latin for the commands and back again for
>>>> the text. Also the names of the commands would be more
>>>> transparent for non-english speakers.
>
> Well I don't know much about ConTeXt, but at first ConTeXt is a
> rather monolitic and selfcontained format. It doesn't have to handle
> lots of packages. Also I have some doubts that this localised
> formats translates really everything down to units like mm or
> numbers to other scripts. Or is their an completly arabic
> counterpart to \includegraphics[width=3D10cm,scale=3D5]{...}?

...

Mojca

From pragma at wxs.nl  Wed Oct 13 00:42:48 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 13 Oct 2010 00:42:48 +0200
Subject: [dev-context] Greek without Latin
In-Reply-To: <AANLkTim3cLz6nAj_AAEweniDYiG65PvXetXZNnPa=nTg@mail.gmail.com>
References: <AANLkTim3cLz6nAj_AAEweniDYiG65PvXetXZNnPa=nTg@mail.gmail.com>
Message-ID: <4CB4E468.7050503@wxs.nl>

On 12-10-2010 9:24, Mojca Miklavec wrote:

> here's a challenging question from the XeTeX mailing list. Somebody
> gave a challenge of how one writes units or rather: if it is possible
> to get rid of latin keyboard entirely, for example if one is able to
> retype \includegraphics[width=10cm,scale=5]{...} in arabic/possibly
> greek interface without using the latin keyboard)?
>
> In either case I think that one should convince the author to take
> ConTeXt instead of LaTeX to rewrite the commands ...

Just take a look at mult-def.lua and you will see that there is already 
a persian interface ... defining commands in any language is possible 
already right from the start of mkiv.

Anyhow, I just tested it and found out that in the process of adapting 
code to some new luatex functionality I didn't set some catcodes right, 
so you need the beta that I uploaded a minute ago.

Attached is a file from the test suite.

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pe-001.tex
Type: text/x-tex
Size: 340 bytes
Desc: not available
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20101013/1c45960b/attachment.tex>

From adityam at umich.edu  Wed Oct 13 01:01:58 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Tue, 12 Oct 2010 19:01:58 -0400 (EDT)
Subject: [dev-context] Greek without Latin
In-Reply-To: <4CB4E468.7050503@wxs.nl>
References: <AANLkTim3cLz6nAj_AAEweniDYiG65PvXetXZNnPa=nTg@mail.gmail.com>
	<4CB4E468.7050503@wxs.nl>
Message-ID: <alpine.LNX.2.01.1010121900140.14153@ybpnyubfg.ybpnyqbznva>

On Wed, 13 Oct 2010, Hans Hagen wrote:

> On 12-10-2010 9:24, Mojca Miklavec wrote:
>
>> here's a challenging question from the XeTeX mailing list. Somebody
>> gave a challenge of how one writes units or rather: if it is possible
>> to get rid of latin keyboard entirely, for example if one is able to
>> retype \includegraphics[width=10cm,scale=5]{...} in arabic/possibly
>> greek interface without using the latin keyboard)?
>> 
>> In either case I think that one should convince the author to take
>> ConTeXt instead of LaTeX to rewrite the commands ...
>
> Just take a look at mult-def.lua and you will see that there is already a 
> persian interface ... defining commands in any language is possible already 
> right from the start of mkiv.

I thought that Mojca was asking if we can also specify units in Greek. For 
example, 1?? instead of 1mm (Although, I am not sure what are the corresponding
units in Greek).

Aditya

From pragma at wxs.nl  Wed Oct 13 01:24:03 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 13 Oct 2010 01:24:03 +0200
Subject: [dev-context] Greek without Latin
In-Reply-To: <alpine.LNX.2.01.1010121900140.14153@ybpnyubfg.ybpnyqbznva>
References: <AANLkTim3cLz6nAj_AAEweniDYiG65PvXetXZNnPa=nTg@mail.gmail.com>
	<4CB4E468.7050503@wxs.nl>
	<alpine.LNX.2.01.1010121900140.14153@ybpnyubfg.ybpnyqbznva>
Message-ID: <4CB4EE13.9030601@wxs.nl>

On 13-10-2010 1:01, Aditya Mahajan wrote:

> I thought that Mojca was asking if we can also specify units in Greek.
> For example, 1?? instead of 1mm (Although, I am not sure what are the
> corresponding
> units in Greek).

hm, but why units if not the rest too? I think that dealing with units 
in arbitrary characters is somewhat tricky (an a callback woudl slow 
down luatex a lot)

aren't units like mm sort of standard?

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From adityam at umich.edu  Wed Oct 13 01:40:20 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Tue, 12 Oct 2010 19:40:20 -0400 (EDT)
Subject: [dev-context] Greek without Latin
In-Reply-To: <4CB4EE13.9030601@wxs.nl>
References: <AANLkTim3cLz6nAj_AAEweniDYiG65PvXetXZNnPa=nTg@mail.gmail.com>
	<4CB4E468.7050503@wxs.nl>
	<alpine.LNX.2.01.1010121900140.14153@ybpnyubfg.ybpnyqbznva>
	<4CB4EE13.9030601@wxs.nl>
Message-ID: <alpine.LNX.2.01.1010121933420.14153@ybpnyubfg.ybpnyqbznva>

On Wed, 13 Oct 2010, Hans Hagen wrote:

> On 13-10-2010 1:01, Aditya Mahajan wrote:
>
>> I thought that Mojca was asking if we can also specify units in Greek.
>> For example, 1?? instead of 1mm (Although, I am not sure what are the
>> corresponding
>> units in Greek).
>
> hmm, but why units if not the rest too?

The translation of the macros is definitely needed. But along with that, 
the OP was also looking for translation of units.
I think that the use case is someone who uses a greek keyboard
cannot key in latin characters easily. A partial translation (that only 
converts the macro commands) is not sufficient, because the user has to 
switch to the latin keyboard to enter units and then switch back to greek 
keyboard for the rest of the text.

> I think that dealing with units in 
> arbitrary characters is somewhat tricky (an a callback woudl slow down luatex 
> a lot)

Or perhaps something like 10\UNITmm (in Greek, of course). Similar to how 
metapost defines units.

> aren't units like mm sort of standard?

I don't know how Greeks enter greek, so I have no idea how easy it is to 
enter latin using greek keyboards.

Aditya

From pragma at wxs.nl  Wed Oct 13 11:12:08 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 13 Oct 2010 11:12:08 +0200
Subject: [dev-context] Greek without Latin
In-Reply-To: <alpine.LNX.2.01.1010121933420.14153@ybpnyubfg.ybpnyqbznva>
References: <AANLkTim3cLz6nAj_AAEweniDYiG65PvXetXZNnPa=nTg@mail.gmail.com>
	<4CB4E468.7050503@wxs.nl>
	<alpine.LNX.2.01.1010121900140.14153@ybpnyubfg.ybpnyqbznva>
	<4CB4EE13.9030601@wxs.nl>
	<alpine.LNX.2.01.1010121933420.14153@ybpnyubfg.ybpnyqbznva>
Message-ID: <4CB577E8.4070608@wxs.nl>

On 13-10-2010 1:40, Aditya Mahajan wrote:


> Or perhaps something like 10\UNITmm (in Greek, of course). Similar to
> how metapost defines units.

something like that is always possible, or maybe \dim{...}

in context in many places we can intercept it but of course not in 
dimexpr and so

> I don't know how Greeks enter greek, so I have no idea how easy it is to
> enter latin using greek keyboards.

in any case, the amount of units in a document is rather small, only in 
the style part and then we can offer \<greek mu>greek mu> == mm

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From schuster.wolfgang at googlemail.com  Wed Oct 13 23:33:01 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Wed, 13 Oct 2010 23:33:01 +0200
Subject: [dev-context] Greek without Latin
In-Reply-To: <alpine.LNX.2.01.1010121900140.14153@ybpnyubfg.ybpnyqbznva>
References: <AANLkTim3cLz6nAj_AAEweniDYiG65PvXetXZNnPa=nTg@mail.gmail.com>
	<4CB4E468.7050503@wxs.nl>
	<alpine.LNX.2.01.1010121900140.14153@ybpnyubfg.ybpnyqbznva>
Message-ID: <AFBBAFCC-978C-4914-8D54-1458FD54EBDB@gmail.com>


Am 13.10.2010 um 01:01 schrieb Aditya Mahajan:

> I thought that Mojca was asking if we can also specify units in Greek. For example, 1?? instead of 1mm (Although, I am not sure what are the corresponding units in Greek).

\usemodule[translate]

\translateinput[??][mm]

\enableinputtranslation

\starttext\tt
\scratchdimen=2mm 2mm: \the\scratchdimen\crlf
\scratchdimen=1?? 1??: \the\scratchdimen
\stoptext

Wolfgang


From adityam at umich.edu  Fri Oct 15 21:08:46 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 15 Oct 2010 15:08:46 -0400 (EDT)
Subject: [dev-context] Greek without Latin
In-Reply-To: <AFBBAFCC-978C-4914-8D54-1458FD54EBDB@gmail.com>
References: <AANLkTim3cLz6nAj_AAEweniDYiG65PvXetXZNnPa=nTg@mail.gmail.com>
	<4CB4E468.7050503@wxs.nl>
	<alpine.LNX.2.01.1010121900140.14153@ybpnyubfg.ybpnyqbznva>
	<AFBBAFCC-978C-4914-8D54-1458FD54EBDB@gmail.com>
Message-ID: <alpine.LNX.2.01.1010151507540.789@ybpnyubfg.ybpnyqbznva>

On Wed, 13 Oct 2010, Wolfgang Schuster wrote:

>
> Am 13.10.2010 um 01:01 schrieb Aditya Mahajan:
>
>> I thought that Mojca was asking if we can also specify units in Greek. For example, 1?? instead of 1mm (Although, I am not sure what are the corresponding units in Greek).
>
> \usemodule[translate]
>
> \translateinput[??][mm]
>
> \enableinputtranslation
>
> \starttext\tt
> \scratchdimen=2mm 2mm: \the\scratchdimen\crlf
> \scratchdimen=1?? 1??: \the\scratchdimen
> \stoptext

On 2010.10.13 beta I get

! LuaTeX error <main ctx instance>:32: attempt to call field 
'install_text_filter' (a nil value)
stack traceback:
         <main ctx instance>:32: in function 'enable'
         <main ctx instance>:1: in main chunk.

system          > error on line 5 in file test.tex: LuaTeX error  ...

  1     \usemodule[translate]
  2
  3     \translateinput[??][mm]
  4
  5 >>  \enableinputtranslation
  6
  7     \starttext\tt
  8     \scratchdimen=2mm 2mm: \the\scratchdimen\crlf
  9     \scratchdimen=1?? 1??: \the\scratchdimen
10     \stoptext
11



This works fine in TL ConTeXt.

Aditya

From schuster.wolfgang at googlemail.com  Sat Oct 16 16:24:44 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Sat, 16 Oct 2010 16:24:44 +0200
Subject: [dev-context] [XeTeX] Localized XeLaTeX: was Greek XeLaTeX
In-Reply-To: <AANLkTim9wsnvc53S-zRj7Lu0amcnW-ou7Vg5L2bEUdq7@mail.gmail.com>
References: <EB6F9CCE-0F2F-422B-9B80-89AB6855AAFC@science.tuc.gr>
	<eiyq2oms5nxv$.dlg@nililand.de> <4CB41B99.6090604@Rhul.Ac.Uk>
	<90169.56330.qm@web110116.mail.gq1.yahoo.com>
	<4CB42999.8000001@Rhul.Ac.Uk>
	<1DB6C548-12A0-4D43-B39F-A4FD70CED802@web.de>
	<501252.43228.qm@web110109.mail.gq1.yahoo.com>
	<AANLkTimWgsGkh7Sq5RpcwT4ZGdvgY37q7Wf3YgXQndue@mail.gmail.com>
	<0760D519-2792-431C-9EEE-A1ED1019F11B@web.de>
	<AANLkTikcDN326YQB7_6fn08aRVmKzYJFG2ozJDyt3xGH@mail.gmail.com>
	<18B4735F-A5FD-4080-A986-D051A38EBC6D@web.de>
	<AANLkTikspzKmmPSWer3scTdAMoGNXG42s-tpOCsZb03K@mail.gmail.com>
	<s85tblmtz6mh$.dlg@nililand.de>
	<AANLkTim9wsnvc53S-zRj7Lu0amcnW-ou7Vg5L2bEUdq7@mail.gmail.com>
Message-ID: <1FA16C15-DE7D-45EA-AB12-8150F20504A8@gmail.com>


Am 14.10.2010 um 14:57 schrieb Mojca Miklavec:

> 2010/10/14 Ulrike Fischer wrote:
>> 
>> I don't have a context currently to try, but what would happen if
>> you use it e.g. this way:
>> 
>> \usemodule[translate]
>> \translateinput[im][mm]
>> 
>> \enableinputtranslation
>> 
>> \starttext\tt
>> \scratchdimen=2mm 2mm: \the\scratchdimen\crlf
>> \scratchdimen=1im 1im: \the\scratchdimen
>> immens
>> \stoptext
>> 
>> Would this replace every occurence of "im" in the input? Including
>> the "im" in \scratchdimen, the "im" in the second 1im and the "im"
>> in immens?
> 
> Yes. This is why I said that the solution cannot work out-of-the-box
> (it could work for a limited number of cases).

Another way is to use the string library from lua to replace ?? with mm:

\unprotected\def\interfaceddimension#1%
  {\ctxlua{commands.interfaceddimension(\!!bs\detokenize{#1}\!!es)}}

\startluacode
function commands.interfaceddimension(str)
    if string.match(str,"\\") then
        -- dimension or macro
    else
        str = string.gsub(str,"??","mm")
    end
    tex.print(str)
end
\stopluacode

\setupbodyfont[palatino]

\starttext

\def\foo{4mm}
\def\bar{\textwidth}

\scratchdimen\interfaceddimension{2mm} 2mm: \the\scratchdimen\crlf
\scratchdimen\interfaceddimension{1??} 1??: \the\scratchdimen\crlf
\scratchdimen\interfaceddimension\foo  foo: \the\scratchdimen\crlf
\scratchdimen\interfaceddimension\bar  bar: \the\scratchdimen

\stoptext

Wolfgang

From adityam at umich.edu  Sun Oct 17 09:49:11 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Sun, 17 Oct 2010 03:49:11 -0400 (EDT)
Subject: [dev-context] Greek without Latin
In-Reply-To: <alpine.LNX.2.01.1010151507540.789@ybpnyubfg.ybpnyqbznva>
References: <AANLkTim3cLz6nAj_AAEweniDYiG65PvXetXZNnPa=nTg@mail.gmail.com>
	<4CB4E468.7050503@wxs.nl>
	<alpine.LNX.2.01.1010121900140.14153@ybpnyubfg.ybpnyqbznva>
	<AFBBAFCC-978C-4914-8D54-1458FD54EBDB@gmail.com>
	<alpine.LNX.2.01.1010151507540.789@ybpnyubfg.ybpnyqbznva>
Message-ID: <alpine.LNX.2.01.1010170327270.7119@ybpnyubfg.ybpnyqbznva>

On Fri, 15 Oct 2010, Aditya Mahajan wrote:

> On Wed, 13 Oct 2010, Wolfgang Schuster wrote:
>
>> 
>> Am 13.10.2010 um 01:01 schrieb Aditya Mahajan:
>> 
>>> I thought that Mojca was asking if we can also specify units in Greek. For 
>>> example, 1?? instead of 1mm (Although, I am not sure what are the 
>>> corresponding units in Greek).
>> 
>> \usemodule[translate]
>> 
>> \translateinput[??][mm]
>> 
>> \enableinputtranslation
>> 
>> \starttext\tt
>> \scratchdimen=2mm 2mm: \the\scratchdimen\crlf
>> \scratchdimen=1?? 1??: \the\scratchdimen
>> \stoptext
>
> On 2010.10.13 beta I get
>
> ! LuaTeX error <main ctx instance>:32: attempt to call field 
> 'install_text_filter' (a nil value)

The three lines with resolvers.install_text_filter should be changed to

resolvers.filters.install

Aditya

From adityam at umich.edu  Sun Oct 17 23:38:45 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Sun, 17 Oct 2010 17:38:45 -0400 (EDT)
Subject: [dev-context] Catcodes in bib module
Message-ID: <alpine.LNX.2.01.1010171729420.7119@ybpnyubfg.ybpnyqbznva>

Hi,

Try this example:

\newcatcodetable\arbitcatcodes

\startcatcodetable\arbitcatcodes
   \catcode`\@=0
\stopcatcodetable

\setcatcodetable\arbitcatcodes

@starttext
Hello
@stoptext

This results in the entire bxml-apa.mkiv being typeset! The file bxml-apa 
is called by

\def\dodoloadbibtexpublicationalternative#1%
   {\doonlyonce{#1}
      {\readsysfile{bxml-#1.mkiv}
         {\showmessage\m!publications{6}{bxml-#1}}
         {\showmessage\m!publications{1}{bxml-#1}}}}

in bibl-bib.mkiv

I don't know if this should be considered a bug or not.

Aditya

From pragma at wxs.nl  Mon Oct 18 00:17:07 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 18 Oct 2010 00:17:07 +0200
Subject: [dev-context] Catcodes in bib module
In-Reply-To: <alpine.LNX.2.01.1010171729420.7119@ybpnyubfg.ybpnyqbznva>
References: <alpine.LNX.2.01.1010171729420.7119@ybpnyubfg.ybpnyqbznva>
Message-ID: <4CBB75E3.5000009@wxs.nl>

On 17-10-2010 11:38, Aditya Mahajan wrote:
> Hi,
>
> Try this example:
>
> \newcatcodetable\arbitcatcodes
>
> \startcatcodetable\arbitcatcodes
> \catcode`\@=0
> \stopcatcodetable
>
> \setcatcodetable\arbitcatcodes
>
> @starttext
> Hello
> @stoptext
>
> This results in the entire bxml-apa.mkiv being typeset! The file
> bxml-apa is called by
>
> \def\dodoloadbibtexpublicationalternative#1%
> {\doonlyonce{#1}
> {\readsysfile{bxml-#1.mkiv}
> {\showmessage\m!publications{6}{bxml-#1}}
> {\showmessage\m!publications{1}{bxml-#1}}}}
>
> in bibl-bib.mkiv
>
> I don't know if this should be considered a bug or not.

does wrapping in

\startreadingfile

\stopreadingfile

help?

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From adityam at umich.edu  Mon Oct 18 00:32:55 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Sun, 17 Oct 2010 18:32:55 -0400 (EDT)
Subject: [dev-context] Catcodes in bib module
In-Reply-To: <4CBB75E3.5000009@wxs.nl>
References: <alpine.LNX.2.01.1010171729420.7119@ybpnyubfg.ybpnyqbznva>
	<4CBB75E3.5000009@wxs.nl>
Message-ID: <alpine.LNX.2.01.1010171829120.7119@ybpnyubfg.ybpnyqbznva>

On Mon, 18 Oct 2010, Hans Hagen wrote:

> On 17-10-2010 11:38, Aditya Mahajan wrote:
>> Hi,
>> 
>> Try this example:
>> 
>> \newcatcodetable\arbitcatcodes
>> 
>> \startcatcodetable\arbitcatcodes
>> \catcode`\@=0
>> \stopcatcodetable
>> 
>> \setcatcodetable\arbitcatcodes
>> 
>> @starttext
>> Hello
>> @stoptext
>> 
>> This results in the entire bxml-apa.mkiv being typeset! The file
>> bxml-apa is called by
>> 
>> \def\dodoloadbibtexpublicationalternative#1%
>> {\doonlyonce{#1}
>> {\readsysfile{bxml-#1.mkiv}
>> {\showmessage\m!publications{6}{bxml-#1}}
>> {\showmessage\m!publications{1}{bxml-#1}}}}
>> 
>> in bibl-bib.mkiv
>> 
>> I don't know if this should be considered a bug or not.
>
> does wrapping in
>
> \startreadingfile
>
> \stopreadingfile

Partially. Adding

\def\dodoloadbibtexpublicationalternative#1%
   {\doonlyonce{#1}
      {\startreadingfile\readsysfile{bxml-#1.mkiv}\stopreadingfile
         {\showmessage\m!publications{6}{bxml-#1}}
         {\showmessage\m!publications{1}{bxml-#1}}}}

before the test file gives an error on the next command:

! LuaTeX error <main ctx instance>:1: ')' expected near '\'.

system          > error on line 15 in file backend.tex: LuaTeX error  ...

  5     \stopcatcodetable
  6
  7     \def\dodoloadbibtexpublicationalternative#1%
  8       {\doonlyonce{#1}
  9          {\startreadingfile\readsysfile{bxml-#1.mkiv}\stopreadingfile
10             {\showmessage\m!publications{6}{bxml-#1}}
11             {\showmessage\m!publications{1}{bxml-#1}}}}
12
13     \setcatcodetable\arbitcatcodes
14
15 >>  @starttext
16     Hello
17     @stoptext


\normalshowmessage ...showmessage("#1","#2","#3")}

<argument> ...ns{6}{bxml-apa}} {\showmessage \m !p

ublications{1}{bxml-apa}}
\firstofoneargument #1->#1


But adding this at the beginning of the file works.

\let\normaldoloadbibtexpublicationalternative\doloadbibtexpublicationalternative
\let\doloadbibtexpublicationalternative\relax

\appendtoks
\pushcatcodetable
\setcatcodetable\ctxcatcodes
   \normaldoloadbibtexpublicationalternative
\popcatcodetable
\to \everystarttext % was everyjob, will change anyway

Aditya

From adityam at umich.edu  Mon Oct 18 07:19:13 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 18 Oct 2010 01:19:13 -0400 (EDT)
Subject: [dev-context] Typing in footnotes
Message-ID: <alpine.LNX.2.01.1010180109320.7119@ybpnyubfg.ybpnyqbznva>

Hi,

Typing in footnote worked (and still works) in MkII. For example:

\starttext
Hello \footnote{Typing in footnote
\starttyping
   test
\stoptyping
}
\stoptext

However, in MkIV this gives:

Runaway argument?
test \stoptyping \endstrut \dostopstoreddescription \egroup \the 
\everyafternoteinsert \ETC.
! File ended while scanning use of \dododowithbuffer.

system          > error on line 0 in file : File ended while scanning use 
of \dododowithbuffer ...

<empty file>

<inserted text>
                 \par
<*> ./backend.tex

I can work around this by using \start-stop buffer outside the footnote 
and \typebuffer inside the footnote, but that does not work when the 
ConTeXt file is generated from markdown using pandoc.

Is this something that can be fixed (not immediately, but in the long 
run). If so, I will open a tracker item for it.

Aditya

From pragma at wxs.nl  Mon Oct 18 09:44:33 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 18 Oct 2010 09:44:33 +0200
Subject: [dev-context] Typing in footnotes
In-Reply-To: <alpine.LNX.2.01.1010180109320.7119@ybpnyubfg.ybpnyqbznva>
References: <alpine.LNX.2.01.1010180109320.7119@ybpnyubfg.ybpnyqbznva>
Message-ID: <4CBBFAE1.1050904@wxs.nl>

On 18-10-2010 7:19, Aditya Mahajan wrote:

> Is this something that can be fixed (not immediately, but in the long
> run). If so, I will open a tracker item for it.

this is a long run thing ... footnotes are stored in memory and 
therefore the fact that starttyping needs a different treatment is 
somewhat list (just as it's lost when you use it in any argument; in 
mkii the footnote text is typeset directly

you can make a tracker item .. maybe I get a good idea

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Mon Oct 18 09:48:06 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 18 Oct 2010 09:48:06 +0200
Subject: [dev-context] Catcodes in bib module
In-Reply-To: <alpine.LNX.2.01.1010171829120.7119@ybpnyubfg.ybpnyqbznva>
References: <alpine.LNX.2.01.1010171729420.7119@ybpnyubfg.ybpnyqbznva>
	<4CBB75E3.5000009@wxs.nl>
	<alpine.LNX.2.01.1010171829120.7119@ybpnyubfg.ybpnyqbznva>
Message-ID: <4CBBFBB6.9010802@wxs.nl>

On 18-10-2010 12:32, Aditya Mahajan wrote:
> On Mon, 18 Oct 2010, Hans Hagen wrote:
>
>> On 17-10-2010 11:38, Aditya Mahajan wrote:
>>> Hi,
>>>
>>> Try this example:
>>>
>>> \newcatcodetable\arbitcatcodes
>>>
>>> \startcatcodetable\arbitcatcodes
>>> \catcode`\@=0
>>> \stopcatcodetable
>>>
>>> \setcatcodetable\arbitcatcodes
>>>
>>> @starttext
>>> Hello
>>> @stoptext
>>>
>>> This results in the entire bxml-apa.mkiv being typeset! The file
>>> bxml-apa is called by
>>>
>>> \def\dodoloadbibtexpublicationalternative#1%
>>> {\doonlyonce{#1}
>>> {\readsysfile{bxml-#1.mkiv}
>>> {\showmessage\m!publications{6}{bxml-#1}}
>>> {\showmessage\m!publications{1}{bxml-#1}}}}
>>>
>>> in bibl-bib.mkiv
>>>
>>> I don't know if this should be considered a bug or not.
>>
>> does wrapping in
>>
>> \startreadingfile
>>
>> \stopreadingfile
>
> Partially. Adding
>
> \def\dodoloadbibtexpublicationalternative#1%
> {\doonlyonce{#1}
> {\startreadingfile\readsysfile{bxml-#1.mkiv}\stopreadingfile
> {\showmessage\m!publications{6}{bxml-#1}}
> {\showmessage\m!publications{1}{bxml-#1}}}}
>
> before the test file gives an error on the next command:
>
> ! LuaTeX error <main ctx instance>:1: ')' expected near '\'.
>
> system > error on line 15 in file backend.tex: LuaTeX error ...
>
> 5 \stopcatcodetable
> 6
> 7 \def\dodoloadbibtexpublicationalternative#1%
> 8 {\doonlyonce{#1}
> 9 {\startreadingfile\readsysfile{bxml-#1.mkiv}\stopreadingfile
> 10 {\showmessage\m!publications{6}{bxml-#1}}
> 11 {\showmessage\m!publications{1}{bxml-#1}}}}
> 12
> 13 \setcatcodetable\arbitcatcodes
> 14
> 15 >> @starttext
> 16 Hello
> 17 @stoptext
>
>
> \normalshowmessage ...showmessage("#1","#2","#3")}
>
> <argument> ...ns{6}{bxml-apa}} {\showmessage \m !p
>
> ublications{1}{bxml-apa}}
> \firstofoneargument #1->#1
>
>
> But adding this at the beginning of the file works.
\unprotect

\def\dodoloadbibtexpublicationalternative#1%
   {\doonlyonce{#1}
      {\startreadingfile
       \readsysfile{bxml-#1.mkiv}
         {\showmessage\m!publications{6}{bxml-#1}}
         {\showmessage\m!publications{1}{bxml-#1}}%
       \stopreadingfile}}

\protect


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Fri Oct 22 16:04:36 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 22 Oct 2010 16:04:36 +0200
Subject: [dev-context] MetaPost 1.503 (beta version)
Message-ID: <4CC199F4.7080309@elvenkind.com>


We are happy to announce a new beta release of MetaPost:

----------------------------------------------------------------------
MetaPost 1.503
----------------------------------------------------------------------

The standalone distribution package and a win32 binary can be downloaded
immediately from

   http://foundry.supelec.fr/gf/project/metapost/

This is a beta release following the major internal rewrite done
for 1.500. Also, this is the last 1.50x version to be released as
development/testing; the next release will be in the stable release
tree, to replace the current 1.2xx series.

The win32 binary is intended for texlive or a similar web2c-based
installation, this executable will *not* work for miktex.

Of course, we welcome any comments (either good or bad) that you may
have. Simply replying to this message is fine, but see the bottom of
the message for a more formal way to report bugs and feature requests.

----------------------------------------------------------------------
What is new in MetaPost version 1.503:
----------------------------------------------------------------------

* String comparisons have been fixed, these were broken in previous
   1.50x versions.

* verbatimtex ... etex processing had a horrible bug that is now
   fixed.

* A fix has been applied for a bug that made redeclared variable
   subscript tags disappear.

* The behavior of the %{<internal>} escape sequence in 'outputtemplate'
   changed (but not that of the single-letter shortcuts).  Internal
   variables within %{...} are neither rounded nor zero-padded.

* A very long list of improvements to the manual.

* MetaPost now adheres to the openin_any / openout_any settings in
   texmf.cnf

* The 'prologues:=3 output' with embedded labels was unreliable,
   especially when the resulting eps was included into a TeX document
   via dvips.

* 'newinternal numeric' has been fixed, it generated an error in
   metapost 1.211 and earlier 1.50x versions.

* Label regeneration sometimes failed to run when the file time stamps
   were close together.


----------------------------------------------------------------------
Legal notice / license / bug reports
----------------------------------------------------------------------

MetaPost is a system for producing graphics developed by John Hobby
at AT&T, based on Donald Knuth's Metafont.  The MetaPost home page
is http://tug.org/metapost.

MetaPost is free software: you can redistribute it and/or modify it
under the terms of the GNU Lesser General Public License as published
by the Free Software Foundation, either version 2.1 of the License, or
(at your option) any later version.

The MetaPost development project is currently hosted at Supelec,
http://foundry.supelec.fr/gf/project/metapost; with a bug tracker
at http://tracker.luatex.org/. Please report bugs and
request enhancements through there if possible. Alternatively, you
can reach us through the <metapost at tug.org> mailing list as well.

Have fun!

Taco Hoekwater, for the MetaPost team, October 22, 2010

From taco at elvenkind.com  Fri Oct 22 16:22:07 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 22 Oct 2010 16:22:07 +0200
Subject: [dev-context] MetaPost 1.503 (beta version)
In-Reply-To: <4CC199F4.7080309@elvenkind.com>
References: <4CC199F4.7080309@elvenkind.com>
Message-ID: <4CC19E0F.9080104@elvenkind.com>


Hi,

On 10/22/2010 04:04 PM, Taco Hoekwater wrote:
>
> We are happy to announce a new beta release of MetaPost:

There will not be an immediately following luatex release, because most
of the changes to metapost were just obscure bugfixes. Nevertheless,
it would be nice if there were binaries in tlcontrib for this release
(I have already uploaded a new 'base' package).

Best wishes,
Taco

From taco at elvenkind.com  Fri Nov 12 14:50:45 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 12 Nov 2010 14:50:45 +0100
Subject: [dev-context] Luatex 0.64.0 announcement
Message-ID: <4CDD4635.8080109@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.64.0.
This is a development release, but it also fixes a few rather
annoying bugs in 0.63.0.


News:

* New lua functions pdf.refobj(), pdf.maxobjnum() and pdf.objtype()

* New lua function node.is_node()

* The max_strings configuration variable's maximum value is
   raised to be identical to texlive's maximum (2097151), and
   same for param_size (32767).

* The embedded mplib is now 1.503.

* Minor cleanups in the output of fontloader.to_table():

   - removed out-of-range altuni's from the output
   - don't dump the extra encodings, just the actual font encoding
   - export the encoding's name also as 'enc_name' at one level up
   - no longer exporting unset macstyles, nor zero uniqueids
   - fix creationtime and modification time

* Ongoing work on the epdf library

Bugfixes:

* Fix a bug where an explicit hyphen prevented hyphenation for the
   whole rest of the paragraph

* Internal font copying forgot to copy the last font dimen

* os.selfdir() is now documented

* patch quad (\fontdimen6) in \letterspacefont to be compatible
   with pdftex

* Multi-page pdf inclusion was very slow in 0.63.0

* Some extra checks added to the handling of glue_spec node
   objects in lua code.

* Some node.prev pointers have been corrected (but this is not
   quite finished).

* A small fix to lpeg 0.9.


The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

   svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.64.0

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org

Have fun,
Taco




From taco at elvenkind.com  Mon Dec 13 14:54:19 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 13 Dec 2010 14:54:19 +0100
Subject: [dev-context] Luatex 0.65.0 announcement
Message-ID: <4D06258B.7020904@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.65.0.

This release mostly fixes a number of bugs, but it also deprecates
a number of existing lua and macro commands. Please read the News
section carefully if you are the current maintainer of a luatex
macro package.

News:

* The Aleph and Omega version primitives are deprecated.

* The Apple Snow Leopard Truetype font collections now work
   properly.

* Libpng has been updated to 1.4.4, and zlib to 1.2.5.

* New lua functions node.next() and node.prev().

* The already deprecated for some time node.protrusion_skipable()
   function has been removed.

* fontloader.apply_featurefile() and fontloader.apply_afmfile()
   now return nil,<errortable> on failure.

* The various node list fields in the lua node interface have
   been renamed from 'list' to 'head', e.g. tex.box[0].head,
   and the 'list' name is deprecated. For now, the deprecation
   is silent, as 'list' will stay for quite some time. Please
   update your lua source as soon as possible, though.

* The call node.type(<node>) now returns "node". The existing
   functionality is otherwise unchanged.

* Luafilesystem has been updated to 1.5.0. NOTE: there is an
   incompatible change in the directory iterator method.

* The restriction on linebreak_filter has been eased: at least one
   horizontal box should be returned, but that is not necessarily
   the last node any more.

* Backward compatibility has been restored for \meaning\mathchar

* node.first_character() has been renamed to node.first_glyph()
   to better match its actual functionality.

* The \Umathaccent primitive now supports both/bottom keywords,
   and \Umathbotaccent / \Umathaccents are now deprecated.

* The \Umathaccent primitive now also supports the fixed keyword,
   which supports non-growing math accents even if the font says
   there are extensible variants.

* Ongoing work on the epdf library.

Bugfixes:

* Assignment to \dimen65535 was broken earlier.

* <box>.head.prev is now always initialized to null (0).

* luatex -lua=<script> '\relax' no longer exits immediately,
   instead going into interactive mode as it should.

* The \jobname was initialized wrongly for input file names
   with multiple dots in them.

* The synctex file is now written in the right place when
   --output-directory is given.

* \letterspacefont could cause crashes, especially when combined
   with font expansion.

* Luatex would crash on linux32 systems if it was build in an
   environment where LFS (>2GB files) was enabled by default.

* Node lists created by node.copy_list() could not be hyphenated
   due to an assertion error.

* Synctex support was partially broken since 0.60.0.

* With OpenType math fonts, accents with multiple parts
   (like the \vec arrow) forgot to include all parts if the
   accentee was too narrow.

* With OpenType math fonts, accents over any class except 0 and 7
   were misplaced.

* kpse.lookup("plain", {all = true}) was broken in kpathsea
   itself (no extension given as well as --all specified).

* A FontForge bug made Cambria Math accents look bad, and the
   placement of math top accents did not allow a marker at the
   origin (patches by Stefan Philipp)

* Cut&Paste from PDF was sometimes broken due to bad ToUnicode map.

* Many small manual improvements (thanks to Paul Isambert)

* An other bugfix to lpeg 0.9 (from Roberto Ierusalimsky)

* Some small fixes to writet1.w (from Han The Thanh)

* A build failure because of bad libz configuration on Win32



The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

   svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.65.0

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org

Have fun,
Taco




From patrick at gundla.ch  Fri Dec 17 10:45:21 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Fri, 17 Dec 2010 10:45:21 +0100
Subject: [dev-context] contextgarden.net
Message-ID: <A60EB9DA-7E6C-41ED-9A9E-1FE67C5F64D3@gundla.ch>

Hi,

as I have mentioned on the conference: I am looking for a person (or a group) to take over the server contextgarden.net. Not only the wiki or the modules section or ..., but the complete server.

I have started everything more then seven years ago and we have all made it possible that contextgarden.net is now used by more then 500 unique visitors each day (the wiki alone). The average time a user spends on the wiki is three and a half minute (according to the stats, but this is inaccurate, of course), I think that is pretty good!

But as usual in a setting like this, I have shifted my focus. This does not mean I like ConTeXt less then several years ago! By no means! But I am too busy with my new job and my family so there is pretty much no server maintenance (except for a reboot once in a while).

I really hope that someone steps in and I can hand over all the files/databases and the domain name before the next conference.

Do you think that this is worth posting on the main mailing list as well?

Patrick



From pragma at wxs.nl  Fri Dec 17 11:06:39 2010
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 17 Dec 2010 11:06:39 +0100
Subject: [dev-context] contextgarden.net
In-Reply-To: <A60EB9DA-7E6C-41ED-9A9E-1FE67C5F64D3@gundla.ch>
References: <A60EB9DA-7E6C-41ED-9A9E-1FE67C5F64D3@gundla.ch>
Message-ID: <4D0B362F.6020107@wxs.nl>

On 17-12-2010 10:45, Patrick Gundlach wrote:
> Hi,
>
> as I have mentioned on the conference: I am looking for a person (or a group) to take over the server contextgarden.net. Not only the wiki or the modules section or ..., but the complete server.
>
> I have started everything more then seven years ago and we have all made it possible that contextgarden.net is now used by more then 500 unique visitors each day (the wiki alone). The average time a user spends on the wiki is three and a half minute (according to the stats, but this is inaccurate, of course), I think that is pretty good!
>
> But as usual in a setting like this, I have shifted my focus. This does not mean I like ConTeXt less then several years ago! By no means! But I am too busy with my new job and my family so there is pretty much no server maintenance (except for a reboot once in a while).
>
> I really hope that someone steps in and I can hand over all the files/databases and the domain name before the next conference.
>
> Do you think that this is worth posting on the main mailing list as well?

sure; also, the timespan (now->next conference) is long enough for 
someone 'new' to learn the tricks needed

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

