From wolfgang.schuster.lists at gmail.com  Thu Jan  2 21:49:41 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Thu, 2 Jan 2020 21:49:41 +0100
Subject: [dev-context] Paragraph indentation after indentnext=no
Message-ID: <1535c9b7-9476-62cb-a905-11a945ed5a2a@gmail.com>

Hi Hans,

below is a fix for the following question on the mailing list: 
https://mailman.ntg.nl/pipermail/ntg-context/2019/096591.html


When you use the "indentnext=no" setting for a environment the following 
paragraph will never be indented unless you use the \doindentation 
command. When this happens in an enumeration which already has a 
indentation option this method isn't the best choice.


The reson for this effect is the meaning of the \checkindentation 
command which changes with the indentnext setting (or the \noindentation 
and \doindentation commands).


One way to fix this is to add "\let\checkindentation\relax" to the rest 
keywords for \setupalign but I think it's better to ensure 
\checkindentation gets reset when \setupindenting is called (and the 
first paragraph should be reset).


\unprotect

\def\spac_indentation_setup_indeed
 Â  {% not here: \settrue\c_spac_indentation_indent_first
 Â Â  % not here: \parindent\d_spac_indentation_par
 Â Â  % not here: \c_spac_indentation_toggle_state\zerocount
\processcommacommand[\m_spac_indentation_options]\spac_indentation_apply_step_one 
% catch small, medium, etc
\processcommacommand[\m_spac_indentation_options]\spac_indentation_apply_step_two 
% catch rest
 Â Â  \ifzeropt\parindent\else
 Â Â Â Â  \doifemptytoks\everypar\spac_indentation_set_everypar
 Â Â  \fi
-Â  \ifconditional\c_spac_indentation_indent_first\else
+Â  \ifconditional\c_spac_indentation_indent_first
+Â Â Â  \spac_indentation_variant_yes % \let\checkindentation\relax
 Â Â  \else
 Â Â Â Â  \spac_indentation_variant_no
 Â Â  \fi
 Â Â  \spac_indentation_check_toggle}

\protect

\setupindenting[yes,big]

\starttext

\input knuth

\noindentation

\blank

% uncomment one setting below to indent
% the first paragraph after \setupindenting
%
%\let\checkindentation\relax
%\doindentation

\setupindenting[yes,big]

\input knuth

\stoptext


From j.hagen at xs4all.nl  Thu Jan  2 22:57:45 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Thu, 2 Jan 2020 22:57:45 +0100
Subject: [dev-context] Paragraph indentation after indentnext=no
In-Reply-To: <1535c9b7-9476-62cb-a905-11a945ed5a2a@gmail.com>
References: <1535c9b7-9476-62cb-a905-11a945ed5a2a@gmail.com>
Message-ID: <3b2c56f9-f25b-cf5c-a59c-e01f5c603fe4@xs4all.nl>

Hi Wolfgang,

> One way to fix this is to add "\let\checkindentation\relax" to the rest 
> keywords for \setupalign but I think it's better to ensure 
> \checkindentation gets reset when \setupindenting is called (and the 
> first paragraph should be reset).

> +Â  \ifconditional\c_spac_indentation_indent_first
> +Â Â Â  \spac_indentation_variant_yes % \let\checkindentation\relax
>  Â Â  \else
>  Â Â Â Â  \spac_indentation_variant_no
>  Â Â  \fi
Ok, patched, with comment,

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From jmhuffle at femto-st.fr  Thu Jan  2 23:31:23 2020
From: jmhuffle at femto-st.fr (jmhuffle at femto-st.fr)
Date: Thu, 02 Jan 2020 22:31:23 +0000
Subject: [dev-context] Language settings / French / quotation marks
In-Reply-To: <C970E8C8-4DDE-47C6-90E7-33BE091FE25E@comcast.net>
References: <C970E8C8-4DDE-47C6-90E7-33BE091FE25E@comcast.net>
 <20190504203856.GA30085@akela.mendelu.cz>
Message-ID: <4aca3bc5e4fa95de2411dfd256af41d0@femto-st.fr>

5 mai 2019 02:03 "Alan Braslau" <braslau.list at comcast.net> a Ã©crit:

> I donât know if that is correct, but clearly \quotation and \quote at first view seem strange to
> give the same result.
>(...)

First, happy new year!

Then I noticed this point, but I confess that it was not given high priority... Let us recall that the problem was related to second level quotations in French. Roughly speaking, do we have to write:

(i) Je me souviens avoir dit <<Pourquoi criez-vous "Au voleur !" Aurait-on volÃ© votre manuel de ConTeXt ? >>

or:

(ii) Je me souviens avoir dit <<Pourquoi criez-vous <<Au voleur !>> Aurait-on volÃ© votre manuel de ConTeXt ? >>

Among the typography manuals I know for French, the most complete explanation about this subject is given at:

Maurice GrÃ©visse. "Le bon usage". Edition de 1988, Â§133, p. 185.

For a long time, (ii) was the only correct form, but reading such may be quite confusing. More and more often, English guillemets - "..." (or '...', less used) - are put for a quotation inside another quotation. My GrÃ©visse book is not the last edition, but I think that this point has not been changed.

I think that (i) should be the default solution - as I told Tomas at BachoTeX - and some workaround should allow end-users to put (ii) into action if they would like to refer to a very old rule. Surprisingly, a very ancient rule is given by Chicago Manual of Style's 14th Edition: an opening guillemet should be put at each line beginning when the enclosed citation is running (Â§9.26). Our example would become:

Je me souviens avoir dit <<Pourquoi criez-vous <<Au
<<voleur !>> Aurait-on volÃ© votre manuel de
ConTeXt ?>>

but this ridiculous use has disappeared within French modern publishing. A variant? The

Guide du typographe romand

(published at Lausanne) suggest to use 'simple guillemets' for enclosed quotations:

Je me souviens avoir dit <<Pourquoi criez-vous <Au voleur !> Aurait-on volÃ© votre manuel de ConTeXt ?>>

To end up, if you difficultly understand this example in French:

I remember that I said: "Why did you shout 'Stop thief!' Has your ConTeXt manual being stolen?"

Yours sincerely,

J.-M.

From wolfgang.schuster.lists at gmail.com  Mon Jan 13 22:01:03 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 13 Jan 2020 22:01:03 +0100
Subject: [dev-context] Wrong number for previous/next section value
Message-ID: <0aa2cb2b-e00d-5b69-9dcc-7815e37a1db4@gmail.com>

Hi,

I try to get the counter value of the next section but the result is 
always the value for the current section (e.g. section 3 shows also 3 as 
value for the next section).

\startbuffer[headnumber]
 Â Â Â  \starttabulate
 Â Â Â  \NC firstÂ Â Â  \EQ \somenamedheadnumber {section} {first}Â Â Â  \NC\NR
 Â Â Â  \NC previous \EQ \somenamedheadnumber {section} {previous} \NC\NR
 Â Â Â  \NC currentÂ  \EQ \somenamedheadnumber {section} {current}Â  \NC\NR
 Â Â Â  \NC nextÂ Â Â Â  \EQ \somenamedheadnumber {section} {next}Â Â Â Â  \NC\NR
 Â Â Â  \NC lastÂ Â Â Â  \EQ \somenamedheadnumber {section} {last}Â Â Â Â  \NC\NR
 Â Â Â  \stoptabulate
\stopbuffer

\starttext

\dorecurse{5}
 Â  {\section{Section #1}
 Â Â  \getbuffer[headnumber]}

\stoptext

Wolfgang


From j.hagen at xs4all.nl  Tue Jan 14 09:58:15 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Tue, 14 Jan 2020 09:58:15 +0100
Subject: [dev-context] Wrong number for previous/next section value
In-Reply-To: <0aa2cb2b-e00d-5b69-9dcc-7815e37a1db4@gmail.com>
References: <0aa2cb2b-e00d-5b69-9dcc-7815e37a1db4@gmail.com>
Message-ID: <9b799808-0295-0491-b928-390e0835c583@xs4all.nl>

On 1/13/2020 10:01 PM, Wolfgang Schuster wrote:
> Hi,
> 
> I try to get the counter value of the next section but the result is 
> always the value for the current section (e.g. section 3 shows also 3 as 
> value for the next section).
> 
> \startbuffer[headnumber]
>  Â Â Â  \starttabulate
>  Â Â Â  \NC firstÂ Â Â  \EQ \somenamedheadnumber {section} {first}Â Â Â  \NC\NR
>  Â Â Â  \NC previous \EQ \somenamedheadnumber {section} {previous} \NC\NR
>  Â Â Â  \NC currentÂ  \EQ \somenamedheadnumber {section} {current}Â  \NC\NR
>  Â Â Â  \NC nextÂ Â Â Â  \EQ \somenamedheadnumber {section} {next}Â Â Â Â  \NC\NR
>  Â Â Â  \NC lastÂ Â Â Â  \EQ \somenamedheadnumber {section} {last}Â Â Â Â  \NC\NR
>  Â Â Â  \stoptabulate
> \stopbuffer
> 
> \starttext
> 
> \dorecurse{5}
>  Â  {\section{Section #1}
>  Â Â  \getbuffer[headnumber]}
> 
> \stoptext
Also in a second run?

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From wolfgang.schuster.lists at gmail.com  Tue Jan 14 22:19:53 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Tue, 14 Jan 2020 22:19:53 +0100
Subject: [dev-context] Wrong number for previous/next section value
In-Reply-To: <9b799808-0295-0491-b928-390e0835c583@xs4all.nl>
References: <0aa2cb2b-e00d-5b69-9dcc-7815e37a1db4@gmail.com>
 <9b799808-0295-0491-b928-390e0835c583@xs4all.nl>
Message-ID: <3d94c64d-e4a1-9254-aecf-4101f402a4a2@gmail.com>

Hans Hagen schrieb am 14.01.2020 um 09:58:
> On 1/13/2020 10:01 PM, Wolfgang Schuster wrote:
>> Hi,
>>
>> I try to get the counter value of the next section but the result is 
>> always the value for the current section (e.g. section 3 shows also 3 
>> as value for the next section).
>>
>> \startbuffer[headnumber]
>> Â Â Â Â  \starttabulate
>> Â Â Â Â  \NC firstÂ Â Â  \EQ \somenamedheadnumber {section} {first} \NC\NR
>> Â Â Â Â  \NC previous \EQ \somenamedheadnumber {section} {previous} \NC\NR
>> Â Â Â Â  \NC currentÂ  \EQ \somenamedheadnumber {section} {current} \NC\NR
>> Â Â Â Â  \NC nextÂ Â Â Â  \EQ \somenamedheadnumber {section} {next} \NC\NR
>> Â Â Â Â  \NC lastÂ Â Â Â  \EQ \somenamedheadnumber {section} {last} \NC\NR
>> Â Â Â Â  \stoptabulate
>> \stopbuffer
>>
>> \starttext
>>
>> \dorecurse{5}
>> Â Â  {\section{Section #1}
>> Â Â Â  \getbuffer[headnumber]}
>>
>> \stoptext
> Also in a second run?

Yes, only first and last are correct but previous and next show always 
the number of the current section.

Wolfgang


From modules at contextgarden.net  Sun Jan 19 20:43:31 2020
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Sun, 19 Jan 2020 20:43:31 +0100
Subject: [dev-context] CGModules update: Letter module version 2020.01.13
 published.
Message-ID: <20200119194331.53A1B164F30@zapf.ntg.nl>

Wolfgang Schuster submitted an update to the

               Letter module

package.

Version number: 2020.01.13
License type: GNU General Public License
Wants to be in ConTeXt distribution: no
Wants to be synced with CTAN: no

Summary description: Writing letters with ConTeXt.

Announcement text:
----------------------------------------------------------------------



----------------------------------------------------------------------


From modules at contextgarden.net  Mon Jan 20 21:15:28 2020
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Mon, 20 Jan 2020 21:15:28 +0100
Subject: [dev-context] CGModules update: Letter module version 2020.01.20
 published.
Message-ID: <20200120201528.8E686164F92@zapf.ntg.nl>

Wolfgang Schuster submitted an update to the

               Letter module

package.

Version number: 2020.01.20
License type: GNU General Public License
Wants to be in ConTeXt distribution: no
Wants to be synced with CTAN: no

Summary description: Writing letters with ConTeXt.

Announcement text:
----------------------------------------------------------------------



----------------------------------------------------------------------


From modules at contextgarden.net  Mon Jan 20 21:17:22 2020
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Mon, 20 Jan 2020 21:17:22 +0100
Subject: [dev-context] CGModules update: Letter module version 2020.01.20
 published.
Message-ID: <20200120201722.80B32164F94@zapf.ntg.nl>

Wolfgang Schuster submitted an update to the

               Letter module

package.

Version number: 2020.01.20
License type: GNU General Public License
Wants to be in ConTeXt distribution: no
Wants to be synced with CTAN: no

Summary description: Writing letters with ConTeXt.

Announcement text:
----------------------------------------------------------------------

README was missing in the previous release.

----------------------------------------------------------------------


From sebastian.miele at gmail.com  Sat Jan 25 21:23:27 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Sat, 25 Jan 2020 20:23:27 +0000
Subject: [dev-context] No Official ConTeXt LMTX Repository
Message-ID: <87pnf7z3nk.fsf@gmail.com>

In the past months I worked through The TeXbook and The METAFONTbook.
About a week ago I started to work through the LuaMetaTeX manual. For
several reasons I want to learn ConTeXt from bottom to top.

The main page of the ConTeXt Garden says "There is no offical repository
there the development is going." ("there" in that sentence probably
should be "where". I seem to not be allowed to edit the garden main
page.)

The LuaMetaTeX manual contains typos and other issues. In such cases I
usually checkout the most recent development branch of the official
repository and create continually rebased commits on top of it, that
finally find their way into patches send over a mailing list, or pull
requests on e.g. GitHub. This works really well.

It would be really cool if ConTeXt LMTX had a/the official repository.

For now, I will just somehow post the typos to dev-context at ntg.nl. I
will use ConTeXt LMTX (from http://www.pragma-ade.nl/install.htm) as a
reference point. I will update the installation it at least daily.

From sebastian.miele at gmail.com  Sat Jan 25 21:41:52 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Sat, 25 Jan 2020 20:41:52 +0000
Subject: [dev-context] Typos in the LuaMetaTeX Manual
Message-ID: <87muabz2sv.fsf@gmail.com>

The following typos in the LuaMetaTeX Manual are from an about one week
old ConTeXt LMTX (http://www.pragma-ade.nl/install.htm). In the future I
will be more timely, as stated in the previous mail.

A problem of not having an official repository for LMTX is: If I see a
typo or problem in a section that I already read in the past, then,
without further lookup, I do not know whether it already is reported or
not. If I had a clone of an official repository and the manual were
build from that, including the continually rebased and not-yet published
fixes, that problem would not exist.

I will try to deal gracefully with that problem. Depending on the
problem, time, and mood, I will check for duplicates, completely ignore
the typo/problem, or report the same issue more than once.

"have are" in "All options are accepted but only some have are
understood by"

Missing closing parenthesis in "LUAs tostring function (and
string.format may return values in scientific notation"

"This mainly means that lpeg.S cannot be used with UTF 8 characters
encoded in more than two bytes": I do not know any details of LPeg. But
from a glance I suspect that "more than two bytes" should be something
like "more than one byte" in that sentence.

"There are all kind of subtle differences in the implementation": "kind"
instead of "kinds".

"Of course, of you use low level features": "of" instead of "if".

"more of less long term stable": "of" instead of "or".

"In chapter 5 we discussed some new primitives, here we will cover most
of the adapted ones.": This sentence appears in chapter 3. So either "5"
is wrong, or "discussed" should be "discuss".

"The documentation, which is actually comes".

"See chapter ?? for many small changes related to paragraph building".

From henrimenke at gmail.com  Sat Jan 25 23:40:14 2020
From: henrimenke at gmail.com (Henri Menke)
Date: Sun, 26 Jan 2020 11:40:14 +1300
Subject: [dev-context] No Official ConTeXt LMTX Repository
In-Reply-To: <87pnf7z3nk.fsf@gmail.com>
References: <87pnf7z3nk.fsf@gmail.com>
Message-ID: <cbbd666d-5280-11c2-4928-7665aa76aa6c@gmail.com>

On 1/26/20 9:23 AM, Sebastian Miele wrote:
> In the past months I worked through The TeXbook and The METAFONTbook.
> About a week ago I started to work through the LuaMetaTeX manual. For
> several reasons I want to learn ConTeXt from bottom to top.
> 
> The main page of the ConTeXt Garden says "There is no offical repository
> there the development is going." ("there" in that sentence probably
> should be "where". I seem to not be allowed to edit the garden main
> page.)
> 
> The LuaMetaTeX manual contains typos and other issues. In such cases I
> usually checkout the most recent development branch of the official
> repository and create continually rebased commits on top of it, that
> finally find their way into patches send over a mailing list, or pull
> requests on e.g. GitHub. This works really well.
> 
> It would be really cool if ConTeXt LMTX had a/the official repository.

There will never be an âofficial repositoryâ for ConTeXt.  As it stands
ConTeXt also does not accept âPull Requestsâ, because it is developed by
PRAGMA ADE for their and only their purposes.  The fact that ConTeXt is
availble open source to the public and that Hans replies to bugs that
don't affect his own work is merely a nice gesture of PRAGMA to the
community.

Cheers, Henri

> For now, I will just somehow post the typos to dev-context at ntg.nl. I
> will use ConTeXt LMTX (from http://www.pragma-ade.nl/install.htm) as a
> reference point. I will update the installation it at least daily.
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> https://mailman.ntg.nl/mailman/listinfo/dev-context
> 


From mojca.miklavec.lists at gmail.com  Sat Jan 25 23:58:27 2020
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 25 Jan 2020 23:58:27 +0100
Subject: [dev-context] No Official ConTeXt LMTX Repository
In-Reply-To: <cbbd666d-5280-11c2-4928-7665aa76aa6c@gmail.com>
References: <87pnf7z3nk.fsf@gmail.com>
 <cbbd666d-5280-11c2-4928-7665aa76aa6c@gmail.com>
Message-ID: <CALBOmsY6F1yDWhp8Mhc2yTonbm_mGxo91u9kVH0kw6+mZHNuxQ@mail.gmail.com>

On Sat, 25 Jan 2020 at 23:40, Henri Menke wrote:
>
> > It would be really cool if ConTeXt LMTX had a/the official repository.
>
> There will never be an âofficial repositoryâ for ConTeXt.

There will probably be an official repository soon (even if created by
extracting and committing the zips from the website).

> As it stands ConTeXt also does not accept âPull Requestsâ,

Maybe not pull requests, but Hans happily accepts any patches.
Committing code to GitHub and sending Hans a link should be a valid
form of a patch :)

> because it is developed by PRAGMA ADE for their and only their purposes.

This couldn't be further from the truth.

First of all: PRAGMA *IS* Hans, and everything being developed there
is done by Hans and Hans only, most of the time with absolutely zero
benefits for the business (or more likely actively hurting the
business as he might be working on interesting features requested by
users rather than boring stuff required for customers), and most of
the time outside of regular working hours (nights, weekends, ...).

Second: tons of features have been added on user requests, and because
Hans likes challenges. Not because pragma required or approved it.

> The fact that ConTeXt is
> availble open source to the public and that Hans replies to bugs that
> don't affect his own work is merely a nice gesture of PRAGMA to the
> community.

Of Hans personally, not PRAGMA.
(OK, the single coworker of his had to agree on Hans wasting so much
time doing crazy things.)

Mojca

From sebastian.miele at gmail.com  Sun Jan 26 01:17:23 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Sun, 26 Jan 2020 00:17:23 +0000
Subject: [dev-context] sortedkeys and compare in LMTX l-table.lua
Message-ID: <87zheboyuk.fsf@gmail.com>

On table.sortedkeys the page
https://www.contextgarden.net/Table_manipulation says: "Returns a sorted
array of all the keys in table t. The comparer used for sorting will
treat everything as a string iff the compared values are of mixed type."

According to l-table.lua, sortedkeys first checks whether the keys in
the given table are (1) all strings, (2) all numbers, or (3): neither
(1) or (2). In cases (1) and (2) table.sort is used with the default
comparer (Lua's '<'). In case (3) table.sort is used with a custom
compare function named 'compare' and defined in l-table.lua.

According to the sentence from the garden cited above, 'compare' should
return (something equivalent) to tostring(a) < tostring(b). However, it
does something more complex that, e.g., makes 10 < "2" < 3 < 10 ('<'
meaning infix 'compare' here). I.e. there are strict circles in the
strict order.

https://www.contextgarden.net/Table_manipulation goes on explaining
that, "In general this means that you will be fine as long as you avoid
stuffing indices along with number hashes together in t, lest the order
will end up confused depending on what type an element is compared with
in what order (cf. example [2])."

This reflects the way 'compare' actually is at the moment. But it
contradicts the previous sentence "The comparer used for sorting will
treat everything as a string iff the compared values are of mixed type."
If everything is treated as a string when neither (1) nor (2), then
everything is well-defined and there is no confusion.

Why is 'compare' not just (something equivalent to) tostring(a) <
tostring(b), violating the sentence cited above? Are there any
meaningful uses of the way 'compare' is now?

I suspect that the intent was to create an order that is lexicographic
and numeric at the same time. As far as I see it, it just is not
possible the way it was tried: Lexicographically, 11<2. Numerically,
2<11.

I see three ways out: (1) Disallow mixed types of keys in tables given
to sortedkeys. (2) Always use lexicographic order in the case of mixed
key types. (3) Combine the orders by an order-theoretic sum. One
possiblity: Every value that is neither a number nor a string is smaller
than every number. Every number is smaller than every string. Otherwise
elements are compared as they are now. Another possiblity: Define an
order over all types, define an order for every type. Then sort by type
first, and in type second.

(1) may not possible without breaking a lot. (2) has sort of a
discontinuity: E.g., add one numeric key to a table with only strings,
and the order changes globally. (3) contains well defined, very
predictable solutions without discontinuities.

From sebastian.miele at gmail.com  Sun Jan 26 05:36:13 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Sun, 26 Jan 2020 04:36:13 +0000
Subject: [dev-context] document.showprimitives in luametatex-tex.tex
Message-ID: <87tv4iq1fm.fsf@gmail.com>

luametatex-tex.tex defines and shortly thereafter uses a Lua function
document.showprimitives. The definition of the function uses:

  table.sortedpairs(tex.extraprimitives(tag))

tex.extraprimitives(tag) returns a sequence. table.sortedpairs sorts on
the keys of the sequence. In the case of a sequence, table.sortedpairs
is equivalent to ipairs, and probably not what is intended here. See the
results of the current uses of document.showprimitives in the PDF. They
are not sorted alphabetically.

There probably should be a sort on the values of the sequence returned
by tex.extraprimitives(tag). A few weeks ago, this problem was present
in the LuaTeX manual, too.

From sebastian.miele at gmail.com  Sun Jan 26 05:50:51 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Sun, 26 Jan 2020 04:50:51 +0000
Subject: [dev-context] Possible Problem with Mailing List Setup
Message-ID: <87r1zmq0r8.fsf@gmail.com>

About a week ago I sent four mails to this mailing list without being
subscribed. For each mail I got a reply that the message awaits
moderator approval. After that I subscribed to the list, because it is
low volume, and I want to spare the moderator some approval work.

Shortly after that my subscription to the list got approved. But to date
the messages sent before did not appear on the list. After waiting for a
week, I revised the four messages and sent them again. So the not
approved mails are obsolete by now.

Since I assume that most moderators would not approve me subscribing to
the list after I sent four disapproved messages, the most probably thing
is that the messages got lost. I.e. sending mail to this list without
being subscribed currently is not possible.

Best wishes
Sebastian

From sebastian.miele at gmail.com  Sun Jan 26 06:01:32 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Sun, 26 Jan 2020 05:01:32 +0000
Subject: [dev-context] No Official ConTeXt LMTX Repository
In-Reply-To: <CALBOmsY6F1yDWhp8Mhc2yTonbm_mGxo91u9kVH0kw6+mZHNuxQ@mail.gmail.com>
References: <87pnf7z3nk.fsf@gmail.com>
 <cbbd666d-5280-11c2-4928-7665aa76aa6c@gmail.com>
 <CALBOmsY6F1yDWhp8Mhc2yTonbm_mGxo91u9kVH0kw6+mZHNuxQ@mail.gmail.com>
Message-ID: <87o8uqq09f.fsf@gmail.com>

Mojca Miklavec <mojca.miklavec.lists at gmail.com> writes:

> On Sat, 25 Jan 2020 at 23:40, Henri Menke wrote:
>
> > There will never be an âofficial repositoryâ for ConTeXt.
>
> There will probably be an official repository soon (even if created by
> extracting and committing the zips from the website).
>
> > As it stands ConTeXt also does not accept âPull Requestsâ,
>
> Maybe not pull requests, but Hans happily accepts any patches.
> Committing code to GitHub and sending Hans a link should be a valid
> form of a patch :)

That sounds basically as workable as an official repo to me. Thanks for
the answer!

Best wishes
Sebastian

From henrimenke at gmail.com  Sun Jan 26 09:02:00 2020
From: henrimenke at gmail.com (Henri Menke)
Date: Sun, 26 Jan 2020 21:02:00 +1300
Subject: [dev-context] Possible Problem with Mailing List Setup
In-Reply-To: <87r1zmq0r8.fsf@gmail.com>
References: <87r1zmq0r8.fsf@gmail.com>
Message-ID: <f6a0b077-d6b8-c768-e308-b1f55aefe949@gmail.com>

On 1/26/20 5:50 PM, Sebastian Miele wrote:
> About a week ago I sent four mails to this mailing list without being
> subscribed. For each mail I got a reply that the message awaits
> moderator approval. After that I subscribed to the list, because it is
> low volume, and I want to spare the moderator some approval work.
> 
> Shortly after that my subscription to the list got approved. But to date
> the messages sent before did not appear on the list. After waiting for a
> week, I revised the four messages and sent them again. So the not
> approved mails are obsolete by now.
> 
> Since I assume that most moderators would not approve me subscribing to
> the list after I sent four disapproved messages, the most probably thing
> is that the messages got lost. I.e. sending mail to this list without
> being subscribed currently is not possible.

As I understand it, your messages are also slightly âoff-topicâ on this
list.  To report errors, better use the ntg-context list (that is what I
do at least) and only submit patches to dev-context.  The low volume on
this list is intentional, because it's only fixes and patches.

Cheers, Henri

> Best wishes
> Sebastian
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> https://mailman.ntg.nl/mailman/listinfo/dev-context
> 


From mojca.miklavec.lists at gmail.com  Sun Jan 26 10:03:29 2020
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sun, 26 Jan 2020 10:03:29 +0100
Subject: [dev-context] Possible Problem with Mailing List Setup
In-Reply-To: <f6a0b077-d6b8-c768-e308-b1f55aefe949@gmail.com>
References: <87r1zmq0r8.fsf@gmail.com>
 <f6a0b077-d6b8-c768-e308-b1f55aefe949@gmail.com>
Message-ID: <CALBOmsbtu3oN79bcPQSKaTB7-S3mZytPKOb0Xb7+HFM2ig8oTg@mail.gmail.com>

On Sun, 26 Jan 2020 at 09:02, Henri Menke wrote:
>
> On 1/26/20 5:50 PM, Sebastian Miele wrote:
> > About a week ago I sent four mails to this mailing list without being
> > subscribed. For each mail I got a reply that the message awaits
> > moderator approval. After that I subscribed to the list, because it is
> > low volume, and I want to spare the moderator some approval work.
> >
> > Shortly after that my subscription to the list got approved. But to date
> > the messages sent before did not appear on the list. After waiting for a
> > week, I revised the four messages and sent them again. So the not
> > approved mails are obsolete by now.

The emails which went through are listed here:
https://mailman.ntg.nl/pipermail/dev-context/2020/thread.html
and none of your messages are pending moderation any longer.

> > Since I assume that most moderators would not approve me subscribing to
> > the list after I sent four disapproved messages, the most probably thing
> > is that the messages got lost. I.e. sending mail to this list without
> > being subscribed currently is not possible.
>
> As I understand it, your messages are also slightly âoff-topicâ on this
> list.

I didn't read your messages, so I don't want to make any judgments
about whether the content was off-topic or not, I just wanted to
clarify that:
- There might be dozens of spam messages per day, and less than one
legit message per month.
- At that ratio it's very very very likely that legit messages get
unnoticed in the sea of spam and discarded (I'm actually not sure why
we don't simply send a message saying "sorry, your message won't be
delivered, please subscribe" instead, but I'm not even sure if that's
an option).
- There's only one moderator reminder email per day. What moderators
always notice are new subscriptions. Carefully going through zillion
of spam messages to find any false negatives is another issue.
- It's very very unlikely that anyone would disapprove a legitimate
message about ConTeXt on purpose, even if it wasn't "fully on topic",
as you say. A lot more likely is that it was discarded by accident.
The only intention of moderation is to prevent advertisements for blue
pills etc. ... ;)

What you can always do is subscribe and opt out of receiving emails.
Then you can freely post, the only problem is getting email with
replies to which you want to reply again later. Maybe the mailing list
could automatically add the sender to CC, that often sounds like a
better option (this would need to be changed by the admin).

> To report errors, better use the ntg-context list (that is what I
> do at least) and only submit patches to dev-context.  The low volume on
> this list is intentional, because it's only fixes and patches.

I don't know if the low volume is really intentional, or more like a
consequence of not too many people sending patches, and those few who
do, do that directly to Hans, circumventing the mailing list. (I have
a feeling that the initial intention was the opposite: to not bother
users on the main list with complex off-topic stuff that they don't
understand anyway. But that's just a wild guess.) In any case it's
true that most of the discussions happen on ntg-context. And it's also
true that the volume is relatively high there.

Mojca

From j.hagen at xs4all.nl  Sun Jan 26 14:52:26 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Sun, 26 Jan 2020 14:52:26 +0100
Subject: [dev-context] No Official ConTeXt LMTX Repository
In-Reply-To: <87pnf7z3nk.fsf@gmail.com>
References: <87pnf7z3nk.fsf@gmail.com>
Message-ID: <80340c77-6321-7fda-25b8-a7dacd6e7f8c@xs4all.nl>

On 1/25/2020 9:23 PM, Sebastian Miele wrote:
> In the past months I worked through The TeXbook and The METAFONTbook.
> About a week ago I started to work through the LuaMetaTeX manual. For
> several reasons I want to learn ConTeXt from bottom to top.
> 
> The main page of the ConTeXt Garden says "There is no offical repository
> there the development is going." ("there" in that sentence probably
> should be "where". I seem to not be allowed to edit the garden main
> page.)
> 
> The LuaMetaTeX manual contains typos and other issues. In such cases I
> usually checkout the most recent development branch of the official
> repository and create continually rebased commits on top of it, that
> finally find their way into patches send over a mailing list, or pull
> requests on e.g. GitHub. This works really well.

Just path the files and mal them to me (as files). I then always compare 
them (winmerge) an dso also see if tomething else needs to be changed 
(like reformatting the source itself or adding some style related stuff).

Normally the latest context distribution also has the latest sources for 
manuals as the distribition gets compiled from several resources (keep 
in mind that I can have more files, like todo's and maybe remporary test 
files in my working areas).

> It would be really cool if ConTeXt LMTX had a/the official repository.
See Mojca's mails ... she has hit all nails.

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From braslau.list at comcast.net  Sun Jan 26 18:42:51 2020
From: braslau.list at comcast.net (Alan Braslau)
Date: Sun, 26 Jan 2020 10:42:51 -0700
Subject: [dev-context] No Official ConTeXt LMTX Repository
In-Reply-To: <CALBOmsY6F1yDWhp8Mhc2yTonbm_mGxo91u9kVH0kw6+mZHNuxQ@mail.gmail.com>
References: <87pnf7z3nk.fsf@gmail.com>
 <cbbd666d-5280-11c2-4928-7665aa76aa6c@gmail.com>
 <CALBOmsY6F1yDWhp8Mhc2yTonbm_mGxo91u9kVH0kw6+mZHNuxQ@mail.gmail.com>
Message-ID: <20200126104251.24cc1e92@poo.hsd1.co.comcast.net>

On Sat, 25 Jan 2020 23:58:27 +0100
Mojca Miklavec <mojca.miklavec.lists at gmail.com> wrote:

> On Sat, 25 Jan 2020 at 23:40, Henri Menke wrote:
> >
> > > It would be really cool if ConTeXt LMTX had a/the official repository.
> >
> > There will never be an âofficial repositoryâ for ConTeXt.
> 
> There will probably be an official repository soon (even if created by
> extracting and committing the zips from the website).
> 
> > As it stands ConTeXt also does not accept âPull Requestsâ,
> 
> Maybe not pull requests, but Hans happily accepts any patches.
> Committing code to GitHub and sending Hans a link should be a valid
> form of a patch :)
> 
> > because it is developed by PRAGMA ADE for their and only their purposes.
> 
> This couldn't be further from the truth.
> 
> First of all: PRAGMA *IS* Hans, and everything being developed there
> is done by Hans and Hans only, most of the time with absolutely zero
> benefits for the business (or more likely actively hurting the
> business as he might be working on interesting features requested by
> users rather than boring stuff required for customers), and most of
> the time outside of regular working hours (nights, weekends, ...).
> 
> Second: tons of features have been added on user requests, and because
> Hans likes challenges. Not because pragma required or approved it.

Context (and luametatex) is developed by a small, active community who formed the Context Group, open to all. Beyond Hans (at Pragma-ADE), there are many other contributors. Being open source does not require that there be a "repository", rather that the source (to Context) be freely available. As it is a macro package, everyone who uses Context has it all on their computer. It is also distributed by TUG with TeXlive.

luametatex is an experimental development/cleanup, lean version of luatex. As it is under very active and very experimental development, the source code has not yet been included with the distribution but this is the intention and will be. As it is still going through major rearrangements, cleanups, and simplifications, is has not yet for lack of time and to keep on track. Again, the aim is for the luametatex code to be distributed with the Context macro source code, also for users to be able to compile quickly and easily for any platform.

> > The fact that ConTeXt is
> > availble open source to the public and that Hans replies to bugs that
> > don't affect his own work is merely a nice gesture of PRAGMA to the
> > community.
> 
> Of Hans personally, not PRAGMA.
> (OK, the single coworker of his had to agree on Hans wasting so much
> time doing crazy things.)

One must not neglect the contributions of many others, including Mojca. One must also recognize the efforts of the developers and maintainers of the luatex engine, solidly anchored in the entire TeX community.

Alan



From j.hagen at xs4all.nl  Sun Jan 26 19:27:19 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Sun, 26 Jan 2020 19:27:19 +0100
Subject: [dev-context] No Official ConTeXt LMTX Repository
In-Reply-To: <20200126104251.24cc1e92@poo.hsd1.co.comcast.net>
References: <87pnf7z3nk.fsf@gmail.com>
 <cbbd666d-5280-11c2-4928-7665aa76aa6c@gmail.com>
 <CALBOmsY6F1yDWhp8Mhc2yTonbm_mGxo91u9kVH0kw6+mZHNuxQ@mail.gmail.com>
 <20200126104251.24cc1e92@poo.hsd1.co.comcast.net>
Message-ID: <67622aa6-25df-fea4-6dec-fbbc7faa8f36@xs4all.nl>

On 1/26/2020 6:42 PM, Alan Braslau wrote:
> On Sat, 25 Jan 2020 23:58:27 +0100

> One must not neglect the contributions of many others, including Mojca ... 
Very true! That also makes it a nice ongoing project.

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From j.hagen at xs4all.nl  Sun Jan 26 22:55:44 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Sun, 26 Jan 2020 22:55:44 +0100
Subject: [dev-context] sortedkeys and compare in LMTX l-table.lua
In-Reply-To: <87zheboyuk.fsf@gmail.com>
References: <87zheboyuk.fsf@gmail.com>
Message-ID: <c2ea7985-6c54-4dc1-9766-d04cd898c5bb@xs4all.nl>

On 1/26/2020 1:17 AM, Sebastian Miele wrote:
> On table.sortedkeys the page
> https://www.contextgarden.net/Table_manipulation says: "Returns a sorted
> array of all the keys in table t. The comparer used for sorting will
> treat everything as a string iff the compared values are of mixed type."
> 
> According to l-table.lua, sortedkeys first checks whether the keys in
> the given table are (1) all strings, (2) all numbers, or (3): neither
> (1) or (2). In cases (1) and (2) table.sort is used with the default
> comparer (Lua's '<'). In case (3) table.sort is used with a custom
> compare function named 'compare' and defined in l-table.lua.
> 
> According to the sentence from the garden cited above, 'compare' should
> return (something equivalent) to tostring(a) < tostring(b). However, it
> does something more complex that, e.g., makes 10 < "2" < 3 < 10 ('<'
> meaning infix 'compare' here). I.e. there are strict circles in the
> strict order.
> 
> https://www.contextgarden.net/Table_manipulation goes on explaining
> that, "In general this means that you will be fine as long as you avoid
> stuffing indices along with number hashes together in t, lest the order
> will end up confused depending on what type an element is compared with
> in what order (cf. example [2])."
> 
> This reflects the way 'compare' actually is at the moment. But it
> contradicts the previous sentence "The comparer used for sorting will
> treat everything as a string iff the compared values are of mixed type."
> If everything is treated as a string when neither (1) nor (2), then
> everything is well-defined and there is no confusion.
> 
> Why is 'compare' not just (something equivalent to) tostring(a) <
> tostring(b), violating the sentence cited above? Are there any
> meaningful uses of the way 'compare' is now?
> 
> I suspect that the intent was to create an order that is lexicographic
> and numeric at the same time. As far as I see it, it just is not
> possible the way it was tried: Lexicographically, 11<2. Numerically,
> 2<11.
> 
> I see three ways out: (1) Disallow mixed types of keys in tables given
> to sortedkeys. (2) Always use lexicographic order in the case of mixed
> key types. (3) Combine the orders by an order-theoretic sum. One
> possiblity: Every value that is neither a number nor a string is smaller
> than every number. Every number is smaller than every string. Otherwise
> elements are compared as they are now. Another possiblity: Define an
> order over all types, define an order for every type. Then sort by type
> first, and in type second.
> 
> (1) may not possible without breaking a lot. (2) has sort of a
> discontinuity: E.g., add one numeric key to a table with only strings,
> and the order changes globally. (3) contains well defined, very
> predictable solutions without discontinuities.
Normally keys are not mixed but when they are this is the way it's done. 
It's been so for more than a decade so unlikely to change.

These sorters are not used when typesetting because there we also deal 
with languages and such. If's mostly a convenience feature that makes 
sure we can handles hashes in a predictable order when needed (because 
hashes have random order, even per run) and it also tries to be 
efficient in doing so.

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From sebastian.miele at gmail.com  Mon Jan 27 22:34:50 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Mon, 27 Jan 2020 21:34:50 +0000
Subject: [dev-context] Possible Problem with Mailing List Setup
In-Reply-To: <CALBOmsbtu3oN79bcPQSKaTB7-S3mZytPKOb0Xb7+HFM2ig8oTg@mail.gmail.com>
References: <87r1zmq0r8.fsf@gmail.com>
 <f6a0b077-d6b8-c768-e308-b1f55aefe949@gmail.com>
 <CALBOmsbtu3oN79bcPQSKaTB7-S3mZytPKOb0Xb7+HFM2ig8oTg@mail.gmail.com>
Message-ID: <87ftg0poqt.fsf@gmail.com>

Hi Mojca,

Mojca Miklavec <mojca.miklavec.lists at gmail.com> writes:

> I didn't read your messages, so I don't want to make any judgments
> about whether the content was off-topic or not, I just wanted to
> clarify that:
>
> [..]

Thank you for the clarification.

> I don't know if the low volume is really intentional, or more like a
> consequence of not too many people sending patches, and those few who
> do, do that directly to Hans, circumventing the mailing list. (I have
> a feeling that the initial intention was the opposite: to not bother
> users on the main list with complex off-topic stuff that they don't
> understand anyway. But that's just a wild guess.) In any case it's
> true that most of the discussions happen on ntg-context. And it's also
> true that the volume is relatively high there.

As of now, I know nearly nothing about ConTeXt, so I would not
understand most of what is going on ntg-context. First, I will try to
understand as much as possible about ConTeXt from past to present (i.e.
historically, after having worked through a lot of Knuth's original
stuff, and having read quite some papers), and from bottom to top (from
((Plain) Knuth) TeX and Lua through LuaMetaTeX to ConTeXt). In the past
I tried to do similar things the other way around, but always found it
quite unsatisfactory rather quickly. This time, I just take the (very)
long way.

So, for now, I will hit mostly stuff that is not relevant to (most)
users, but (hopefully) relevant to developers. For now, I will proceed
to post to this list, but I will reconsider the decision when I reached
substantial parts of the top (ConTeXt user facing stuff).

From sebastian.miele at gmail.com  Mon Jan 27 23:24:38 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Mon, 27 Jan 2020 22:24:38 +0000
Subject: [dev-context] No Official ConTeXt LMTX Repository
In-Reply-To: <20200126104251.24cc1e92@poo.hsd1.co.comcast.net>
References: <87pnf7z3nk.fsf@gmail.com>
 <cbbd666d-5280-11c2-4928-7665aa76aa6c@gmail.com>
 <CALBOmsY6F1yDWhp8Mhc2yTonbm_mGxo91u9kVH0kw6+mZHNuxQ@mail.gmail.com>
 <20200126104251.24cc1e92@poo.hsd1.co.comcast.net>
Message-ID: <87blqopmft.fsf@gmail.com>


Alan Braslau <braslau.list at comcast.net> writes:

> Being open source does not require that there be a "repository",
> rather that the source (to Context) be freely available.

Yes, being open source is not equivalent to having an official
repository. On the other hand, official repositories with pull access
for everyone arguably are the de facto standard in the open source
world. It has its conveniences, especally the ability to continually
rebase unfinished and/or unpublished changes on top of the most recent
official development. It, out of the box, provides all that I may want
to have track of with effectively minimal extra hassle/bookkeeping.

The primary workflow in this community is different and does not per se
provide these conveniences. However, from the answers by Mojca and Hans,
it is clear that it is not at all that complex to reconstruct a/the de
facto standard workflow for a contributor, without Hans having to change
his workflow. Some open questions remain. But nothing serious.

However, for now I will not do it. Instead, I will let the following
weeks and months test the following hypothesis: "The lack of the
(percieved) convenience provided by the de facto standard is not really
inconvenient (here and for what I really have to contribute)."

When that hypothesis gets falsified, I will have more to say.

From preining at logic.at  Mon Jan 27 23:39:13 2020
From: preining at logic.at (Norbert Preining)
Date: Tue, 28 Jan 2020 07:39:13 +0900
Subject: [dev-context] No Official ConTeXt LMTX Repository
In-Reply-To: <87blqopmft.fsf@gmail.com>
References: <87pnf7z3nk.fsf@gmail.com>
 <cbbd666d-5280-11c2-4928-7665aa76aa6c@gmail.com>
 <CALBOmsY6F1yDWhp8Mhc2yTonbm_mGxo91u9kVH0kw6+mZHNuxQ@mail.gmail.com>
 <20200126104251.24cc1e92@poo.hsd1.co.comcast.net>
 <87blqopmft.fsf@gmail.com>
Message-ID: <20200127223913.nbhg5yn6h5akxlhr@burischnitzel.preining.info>

On Mon, 27 Jan 2020, Sebastian Miele wrote:
> Yes, being open source is not equivalent to having an official
> repository. On the other hand, official repositories with pull access

But it is required to have accessible source, which by now is not the
case. Sharing with a restricted set of developers is not open source.
As of know lmtx is closed source. Which is fine with me, too.

Norbert

--
PREINING Norbert                               http://www.preining.info
Accelia Inc. + IFMGA ProGuide + TU Wien + JAIST + TeX Live + Debian Dev
GPG: 0x860CDC13   fp: F7D8 A928 26E3 16A1 9FA0 ACF0 6CAC A448 860C DC13

From sebastian.miele at gmail.com  Tue Jan 28 01:10:35 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Tue, 28 Jan 2020 00:10:35 +0000
Subject: [dev-context] sortedkeys and compare in LMTX l-table.lua
In-Reply-To: <c2ea7985-6c54-4dc1-9766-d04cd898c5bb@xs4all.nl>
References: <87zheboyuk.fsf@gmail.com>
 <c2ea7985-6c54-4dc1-9766-d04cd898c5bb@xs4all.nl>
Message-ID: <875zgwphj8.fsf@gmail.com>

Hans Hagen <j.hagen at xs4all.nl> writes:

> On 1/26/2020 1:17 AM, Sebastian Miele wrote:
> > On table.sortedkeys the page
> > https://www.contextgarden.net/Table_manipulation says: "Returns a sorted
> > array of all the keys in table t. The comparer used for sorting will
> > treat everything as a string iff the compared values are of mixed type."
> >
> > According to l-table.lua, sortedkeys first checks whether the keys in
> > the given table are (1) all strings, (2) all numbers, or (3): neither
> > (1) or (2). In cases (1) and (2) table.sort is used with the default
> > comparer (Lua's '<'). In case (3) table.sort is used with a custom
> > compare function named 'compare' and defined in l-table.lua.
> >
> > According to the sentence from the garden cited above, 'compare' should
> > return (something equivalent) to tostring(a) < tostring(b). However, it
> > does something more complex that, e.g., makes 10 < "2" < 3 < 10 ('<'
> > meaning infix 'compare' here). I.e. there are strict circles in the
> > strict order.
> >
> > https://www.contextgarden.net/Table_manipulation goes on explaining
> > that, "In general this means that you will be fine as long as you avoid
> > stuffing indices along with number hashes together in t, lest the order
> > will end up confused depending on what type an element is compared with
> > in what order (cf. example [2])."
> >
> > This reflects the way 'compare' actually is at the moment. But it
> > contradicts the previous sentence "The comparer used for sorting will
> > treat everything as a string iff the compared values are of mixed type."
> > If everything is treated as a string when neither (1) nor (2), then
> > everything is well-defined and there is no confusion.
> >
> > Why is 'compare' not just (something equivalent to) tostring(a) <
> > tostring(b), violating the sentence cited above? Are there any
> > meaningful uses of the way 'compare' is now?
> >
> > I suspect that the intent was to create an order that is lexicographic
> > and numeric at the same time. As far as I see it, it just is not
> > possible the way it was tried: Lexicographically, 11<2. Numerically,
> > 2<11.
> >
> > I see three ways out: (1) Disallow mixed types of keys in tables given
> > to sortedkeys. (2) Always use lexicographic order in the case of mixed
> > key types. (3) Combine the orders by an order-theoretic sum. One
> > possiblity: Every value that is neither a number nor a string is smaller
> > than every number. Every number is smaller than every string. Otherwise
> > elements are compared as they are now. Another possiblity: Define an
> > order over all types, define an order for every type. Then sort by type
> > first, and in type second.
> >
> > (1) may not possible without breaking a lot. (2) has sort of a
> > discontinuity: E.g., add one numeric key to a table with only strings,
> > and the order changes globally. (3) contains well defined, very
> > predictable solutions without discontinuities.
>
> These sorters are not used when typesetting because there we also deal
> with languages and such.

That's good to know.

> If's mostly a convenience feature that makes sure we can handles
> hashes in a predictable order when needed (because hashes have random
> order, even per run) and it also tries to be efficient in doing so.

>From my current perspective, it is very questionable whether
'predictable' is something that I would attach to the compare function.
Even if 'predictable' only means 'it did not yet throw an error in the
face of values of mixed type, as Lua's < would', it may not be so in the
future, because compare is no strict partial order (10 < "2" < 3 < 10),
and therefore violates the specification of table.sort (and any linear
sorting in general). And even if table.sort does never detect this
violation, it will give different results on different permutations of
the same sequence.

Moreover, e.g. the example

  for n,key in next,table.sortedkeys(mixed) do
     io.write(string.format("[%2i] [%2s] (t:%6s) -> â%sâ\n", n, key, type(key), mixed[key]))
  end

from https://www.contextgarden.net/Table_manipulation returns different
results at least on different runs.

If the only real purpose of compare is to make sure we can handle keys
of mixed types, then no sort at all is most efficient, although it gives
different results on different runs, as the current compare does, too.

If compare is not used when typesetting, then efficiency may not be
important, and something well-defined and total may be used.

> Normally keys are not mixed but when they are this is the way it's
> done. It's been so for more than a decade so unlikely to change.

That's fine.

I want to admit that I felt strong aversion when I first saw compare.
"Linear sorting" by violating the preconditions of linear sorting
strongly goes against my upbringing.

But ConTeXt/LuaTeX/LuaMetaTeX lives, thrives, and has quite some
history. I will meditate and learn to live with it and, after hereby
having peeked your attitude on such issues, bother neither me nor you
with something like that again. (Except it makes something explode.)

All the best
Sebastian

From sebastian.miele at gmail.com  Tue Jan 28 04:41:30 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Tue, 28 Jan 2020 03:41:30 +0000
Subject: [dev-context] Typos in the LuaMetaTeX Manual
Message-ID: <8736c0p7rp.fsf@gmail.com>

"The same is true fir"

"More fine-grained primitives control is possible and you can look up
the details in section 10.3.15. For simplicityâs sake, this manual
assumes that you have executed the \directlua command as given above.":
I think the second sentence was true in the LuaTeX manual, but is not
true in the LuaMetaTeX manual.

"Calling some form of tex.enableprimitives is highly important though,
because if you do not, you will end up with a TEX82-lookalike that can
run LUA code but not do much else.": Since LuaMetaTeX enables all
primitives by default, this is not true anymore.

"In the following syntax tables, such as the type of such a userdata
object is represented as â¨nodeâ©.": Remove "such as".

'The return values of node.values("glue" are:': Missing closing
parenthesis. Ditto in the following 'The return values of ... are'
lines.

"when we issue this command, we get a table.": Lower case "w" at the
beginning of the sentence.

"where the number donât relate to importance": "number" instead of
"numbers".

"This function that will append a node list to TEXâs âcurrent listâ.":
Remove "that".

"You mignt need"

"This helper makes sure that the node lists is double linked": "lists"
instead of "list"

"9.3.3.12 find_node": This section somehow has "node.traverse_list" in
it instead of "node.find_node".

"is a single tokens": "tokens" instead of "token".

From j.hagen at xs4all.nl  Tue Jan 28 09:13:11 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Tue, 28 Jan 2020 09:13:11 +0100
Subject: [dev-context] sortedkeys and compare in LMTX l-table.lua
In-Reply-To: <875zgwphj8.fsf@gmail.com>
References: <87zheboyuk.fsf@gmail.com>
 <c2ea7985-6c54-4dc1-9766-d04cd898c5bb@xs4all.nl> <875zgwphj8.fsf@gmail.com>
Message-ID: <dcb5ac77-7c93-60aa-6f4c-0bc18bccf6b7@xs4all.nl>

On 1/28/2020 1:10 AM, Sebastian Miele wrote:

> Moreover, e.g. the example
> 
>    for n,key in next,table.sortedkeys(mixed) do
>       io.write(string.format("[%2i] [%2s] (t:%6s) -> â%sâ\n", n, key, type(key), mixed[key]))
>    end
> 
> from https://www.contextgarden.net/Table_manipulation returns different
> results at least on different runs.

you normally don't iterate over an array that way, compare:

local t = { 11, "44", 22, "33" }

for k, v in table.sortedhash(t) do
     print(k,v,type(k),type(v))
end

local m = table.sortedkeys(t)

for k, v in next, m do
     print(k,v,type(k),type(v))
end

local m = table.sortedkeys(t)
for k=1,#m do
     local v = t[k]
     print(k,v,type(k),type(v))
end

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From sebastian.miele at gmail.com  Tue Jan 28 21:10:04 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Tue, 28 Jan 2020 20:10:04 +0000
Subject: [dev-context] sortedkeys and compare in LMTX l-table.lua
In-Reply-To: <dcb5ac77-7c93-60aa-6f4c-0bc18bccf6b7@xs4all.nl>
References: <87zheboyuk.fsf@gmail.com>
 <c2ea7985-6c54-4dc1-9766-d04cd898c5bb@xs4all.nl> <875zgwphj8.fsf@gmail.com>
 <dcb5ac77-7c93-60aa-6f4c-0bc18bccf6b7@xs4all.nl>
Message-ID: <87d0b31gwz.fsf@gmail.com>

Hans Hagen <j.hagen at xs4all.nl> writes:

> On 1/28/2020 1:10 AM, Sebastian Miele wrote:
>
> > Moreover, e.g. the example
> >
> >    for n,key in next,table.sortedkeys(mixed) do
> >       io.write(string.format("[%2i] [%2s] (t:%6s) -> â%sâ\n", n, key, type(key), mixed[key]))
> >    end
> >
> > from https://www.contextgarden.net/Table_manipulation returns different
> > results at least on different runs.
>
> you normally don't iterate over an array that way, compare:
>
> local t = { 11, "44", 22, "33" }

This is an array. No mixed keys. I do not get the point.

> for k, v in table.sortedhash(t) do
>     print(k,v,type(k),type(v))
> end
>
> local m = table.sortedkeys(t)
>
> for k, v in next, m do
>     print(k,v,type(k),type(v))
> end
>
> local m = table.sortedkeys(t)
> for k=1,#m do
>     local v = t[k]
>     print(k,v,type(k),type(v))
> end

With just integer keys they all give essentially the same and expected
result.

I tried to change t into

  local t = { [ 11 ] =  11
            , ["44"] = "44"
            , [ 22 ] =  22
            , ["33"] = "33"
            }

in case that was what you meant. But in this example numeric and
lexicographic order agree. So nothing unexpected here, too.

The only noteworthy thing is that "for k, v in next, m" indeed traverses
in order here, although, according to the Lua manual, "the order in
which the indices are enumerated is not specified, even for numeric
indices".

https://www.contextgarden.net/Table_manipulation often uses next to
iterate even over sorted results, which according to the Lua manual is
not guaranteed to yield the expected (ordered) results (in the future).
The end of the page mentions that ipairs is slower than next or numeric
for's. The text on table.prepend mentions that after prepending,
iteration via next indeed does not traverse in order any more, and a
numeric for is appropriate.

So, if https://www.contextgarden.net/Table_manipulation reflects the way
it is done in ConTeXt, it seems to be customary to partly rely on Lua's
(current) implementation details beyond Lua's specification.

But this shall be fine with me, too. Should some future implementation
of Lua change implementation details in a relevant way here, you almost
certainly will notice it first, and quickly know what to do. :-)

From sebastian.miele at gmail.com  Sat Feb  1 02:35:01 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Sat, 01 Feb 2020 01:35:01 +0000
Subject: [dev-context] Typos in the LuaMetaTex Manual
Message-ID: <877e172ipm.fsf@gmail.com>

"separation between font- and backend": "font" instead of "front".

"(an UNICODE or index)": "an" instead of "a". (U is a vowel, but its
pronounciation starts with a consonant sound. The pronounciation decides
whether a(n).)

"A node can have a subtype to that it": "to" instead of "so".

"with an node": "an" instead of "a".

"(here we do that with [a]": Missing closing parenthesis.

"but if you need a dozen you might wonder what youâre doing. .": Two
consecutive full stops.

"and expands it content": "it" instead of "its".

"But this kind of expansion it still": Superflous "it".

"This primitives is like \ignorespaces": "primitives" instead of
"primitive".

"These commands are use as": "use" instead of "used".

"There is an nice side effect": "an" instead of "a".

"in several places where the engine to deal with the dimensions of
nodes": Missing verb.

"as mentioned ,their": Space and comma transposed.

"reference to an image s specification": Space instead of "'".

"An implementation probably should accepts": "accepts" instead of
"accept".

"when no proper nested grouping is used": "proper" instead of
"properly".

"This is conform the LuaTeX philosophy.": "is conform" instead of e.g.
"is conform to" or "conforms to".

"can be present in en entry": "en" instead of "an".

In section 6.2 (Defining Fonts) the word 'hash' is used strangely. It
seems like it is used to mean hash tables: "The parameters is a hash
with mixed key types", "The characters table is a list of character
hashes indexed by an integer number", "Each character hash itself is a
hash", "The kerns table is a hash indexed by character index", "The
ligatures table is a hash indexed by character index", "with the values
being yet another small hash, with two fields".

"They were mostly use for": "use" instead of "used".

"At the font level there can be a fonts an (indexed) Lua table."

From sebastian.miele at gmail.com  Tue Feb  4 02:44:48 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Tue, 04 Feb 2020 01:44:48 +0000
Subject: [dev-context] Minor Problems in the LuaMetaTeX Manual
Message-ID: <87r1zb2kj3.fsf@gmail.com>

"The characters table is a list of character hashes indexed by an
integer number": The sentence says that the table is a list. According
to 'Programming in Lua' that indeed is the case. But the term 'list'
conveys that the order of the items is something that matters, which
(most probably) is not the case here. As far as I see, the intent of the
table is to just map character codes to character information. Using the
term 'list' in that context is a bit misleading.

"and tell the engine that Å counts as one character": I think it should
be "two characters".

"In figure ?? and 7.7 we show what happens with three samples"

"(the ones resulting from an \exhyphenchar": Missing closing
parentheses.

"the case relate codes": "relate" instead of "related".

"This word separation is worth mentioning because": Should be
"separation of stages" or just "separation" instead of "word
separation". Maybe "work separation" was intended.

In the table at the top of page 80, the "sub 1" probably should go
directly below "POST", and the "sub 2" directly below "REPLACE". Now
they occur aligned to the numbering of the terminal nodes of the
structure presented in the table.

"it does not expect there to be discretionaries inside of
discretionaries": As far as I understood the previous text, what is
really meant here is "it does expect there not to be discretionaries
inside of discretionaries".

The Lua(Meta)TeX manuals talk about ghost nodes. I did not find any
information on what that is. Up to now, for all other stuff encountered
in the LuaMetaTeX manual that I did not know and wanted to have a rough
idea of what it is about, I found the relevant information either in the
LuaMetaTeX manual itself, in TeX by Topic, or in the Îµ-TeX manual. I.e.
I found it using the LuaMetaTeX manual itself, or the manuals that were
referenced at the beginning of chapter 1 of the LuaMetaTeX manual as
important additional material.

The Lua(Meta)TeX manual mentiones that \leftghost and \rightghost come
from Aleph. I searched the web quite a bit about Omega and Aleph on that
issue, and tried other things, but found nothing of relevance. There is
a manual for Omega, but, after conversion from ps to pdf, and opening
the pdf with Evince, the search function did not find the phrase 'ghost'
in it, either.

From j.hagen at xs4all.nl  Tue Feb  4 08:56:30 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Tue, 4 Feb 2020 08:56:30 +0100
Subject: [dev-context] Minor Problems in the LuaMetaTeX Manual
In-Reply-To: <87r1zb2kj3.fsf@gmail.com>
References: <87r1zb2kj3.fsf@gmail.com>
Message-ID: <4afa4477-a27d-f6f1-9720-a2777950f571@xs4all.nl>

Hi,

> The Lua(Meta)TeX manuals talk about ghost nodes. I did not find any
> information on what that is. Up to now, for all other stuff encountered
> in the LuaMetaTeX manual that I did not know and wanted to have a rough
> idea of what it is about, I found the relevant information either in the
> LuaMetaTeX manual itself, in TeX by Topic, or in the Îµ-TeX manual. I.e.
> I found it using the LuaMetaTeX manual itself, or the manuals that were
> referenced at the beginning of chapter 1 of the LuaMetaTeX manual as
> important additional material.
> 
> The Lua(Meta)TeX manual mentiones that \leftghost and \rightghost come
> from Aleph. I searched the web quite a bit about Omega and Aleph on that
> issue, and tried other things, but found nothing of relevance. There is
> a manual for Omega, but, after conversion from ps to pdf, and opening
> the pdf with Evince, the search function did not find the phrase 'ghost'
> in it, either.
Omega was to a large extend about supporting scripts and fonts for them 
and when doing so you sometimes need to indicate the boundry of words or 
glyph runs (regular tex also has a boundary char in the fonts).

first hit on "omega leftghost"

http://torus.math.uiuc.edu/jms/tex2mathml/omega-1.23.4/src/web_omega/omfont.ch

(thinking of it, i'm not sure if we should keep it because I'm not aware 
of fonts that have kerns wrt left and right ghist glyphs; we do have a 
boundary node system instead)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From sebastian.miele at gmail.com  Tue Feb  4 19:05:56 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Tue, 04 Feb 2020 18:05:56 +0000
Subject: [dev-context] Minor Problems in the LuaMetaTeX Manual
In-Reply-To: <4afa4477-a27d-f6f1-9720-a2777950f571@xs4all.nl>
References: <87r1zb2kj3.fsf@gmail.com>
 <4afa4477-a27d-f6f1-9720-a2777950f571@xs4all.nl>
Message-ID: <87mu9y2pob.fsf@gmail.com>

Hans Hagen <j.hagen at xs4all.nl> writes:

> Omega was to a large extend about supporting scripts and fonts for
> them and when doing so you sometimes need to indicate the boundry of
> words or glyph runs (regular tex also has a boundary char in the
> fonts).
>
> first hit on "omega leftghost"
>
> http://torus.math.uiuc.edu/jms/tex2mathml/omega-1.23.4/src/web_omega/omfont.ch

Using Startpage.com (anonymized Google) on my workstation, "omega
leftghost" does not give the hit (under the first ten results). The same
for Google.com on my workstation, both when I am logged in with my
Google account, and when I am not. On my phone, I get the hit as the 8th
result of a Google.com search without being logged in. Maybe (the way
you use) your search engine has permitted it to get to know your biases
and serve you better. Maybe something else is different.

Nonetheless, I did not search for "omega leftghost" yesterday. At this
stage of getting into (ConTeXt) LMTX I just want to get a (necessarily
somewhat superficial) high-level overview of the entire low level, so to
speak. Strategically, I postpone reading source code until after having
this overview, because I imagine that I will be much better equipped for
that with a rough mental map of the territory, a rough understanding of
the purpose of each element I may encounter.

Hence, I only searched for expository material, and used only "ghost" in
searches and not "leftghost" or "rightghost", because I assume that
matching expository material would use the term "ghost".

> (thinking of it, i'm not sure if we should keep it because I'm not
> aware of fonts that have kerns wrt left and right ghist glyphs; we do
> have a boundary node system instead)

I am definitely sure now that I can forget about ghost nodes for the
foreseeable future.

Thanks for the answer!

From sebastian.miele at gmail.com  Tue Feb  4 23:29:36 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Tue, 04 Feb 2020 22:29:36 +0000
Subject: [dev-context] Example on \mathstyle + \mathchoice + grouping in the
 LuaMetaTeX Manual
Message-ID: <87k1522dgv.fsf@gmail.com>

It took me longer than I want to admit here to mentally parse the
example at the end of section 8.3.1 on \mathstyle, \mathchoice, and
grouping. In particular it took a while until I noticed that the b case
has no \bgroup ... \egroup. This may very well be because of temporary
stupidity on my side.

But nonetheless I recommend changing the example either so that the
mathchoices between \bgroup ... \egroup receive one more level of
indentation, or, even better, to change the example into something like:

\def\a#1{
  \mathchoice
      {\bf \scriptstyle       (#1:d :\mathstyle)}
      {\bf \scriptscriptstyle (#1:t :\mathstyle)}
      {\bf \scriptscriptstyle (#1:s :\mathstyle)}
      {\bf \scriptscriptstyle (#1:ss:\mathstyle)}}

[a:\mathstyle]\quad \bgroup\a x\egroup \quad
[b:\mathstyle]\quad        \a y        \quad
[c:\mathstyle]\quad \bgroup\a z\egroup \quad
[d:\mathstyle]

Apart from being shorter, that totally minimizes the effort required by
the reader to mentally parse and compare what is equal and what is
different in the example.

From j.hagen at xs4all.nl  Wed Feb  5 15:20:55 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Wed, 5 Feb 2020 15:20:55 +0100
Subject: [dev-context] Minor Problems in the LuaMetaTeX Manual
In-Reply-To: <87r1zb2kj3.fsf@gmail.com>
References: <87r1zb2kj3.fsf@gmail.com>
Message-ID: <2e1b4b33-e982-c1de-f4ed-bd806d27999e@xs4all.nl>

On 2/4/2020 2:44 AM, Sebastian Miele wrote:

> The Lua(Meta)TeX manual mentiones that \leftghost and \rightghost come
> from Aleph. I searched the web quite a bit about Omega and Aleph on that
> issue, and tried other things, but found nothing of relevance. There is
> a manual for Omega, but, after conversion from ps to pdf, and opening
> the pdf with Evince, the search function did not find the phrase 'ghost'
> in it, either.
i'm going to remove it ... we have plenty of ways to prevent ligatures 
and influence kerning and context nowhere uses it anyway

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From sebastian.miele at gmail.com  Wed Feb  5 18:47:52 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Wed, 05 Feb 2020 17:47:52 +0000
Subject: [dev-context] Bug: Inline Math Surrounding Spacing
Message-ID: <87sgjpudrr.fsf@gmail.com>

In the table on \mathsurroundmode in the LuaMetaTeX manual every example
row has the same spacing, although there should be noticable
differences. After trying to find the root of problem, I came to the
conclusion that currently ConTeXt LMTX obeys neither \mathsurround nor
\mathsurroundskip at all.

From j.hagen at xs4all.nl  Wed Feb  5 19:27:51 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Wed, 5 Feb 2020 19:27:51 +0100
Subject: [dev-context] Bug: Inline Math Surrounding Spacing
In-Reply-To: <87sgjpudrr.fsf@gmail.com>
References: <87sgjpudrr.fsf@gmail.com>
Message-ID: <215d46b9-d347-cc4c-bdc8-a7ebc9d9a514@xs4all.nl>

On 2/5/2020 6:47 PM, Sebastian Miele wrote:
> In the table on \mathsurroundmode in the LuaMetaTeX manual every example
> row has the same spacing, although there should be noticable
> differences. After trying to find the root of problem, I came to the
> conclusion that currently ConTeXt LMTX obeys neither \mathsurround nor
> \mathsurroundskip at all.

It actually does work but the example code interferes with the regular 
context setting up of spacing so I need to trick around that (trivial)

Thanks for noticing.

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From oinos at gmx.es  Thu Feb 13 18:52:53 2020
From: oinos at gmx.es (Pablo Rodriguez)
Date: Thu, 13 Feb 2020 18:52:53 +0100
Subject: [dev-context] time in downloaded attachments
Message-ID: <f524eb0c-99aa-f911-e436-99cd6aed31a4@gmx.es>

Hans,

would it be possible that "--remote-time" could be added to curl, so
that attachments that are downloaded display when they were uploaded and
not when they were downloaded?

For some reason unknown to me, this seems to have no effect with
http://lmtx.pragma-ade.nl/install-lmtx/installation.pdf (among many
other ones).

Timestamps work right when I download "curl -R -O
http://lmtx.pragma-ade.nl/install-lmtx/installation.pdf" from the shell.

Many thanks for your help,

Pablo
--
http://www.ousia.tk
-------------- next part --------------
A non-text attachment was scrubbed...
Name: remote-time.patch
Type: text/x-patch
Size: 481 bytes
Desc: not available
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20200213/3bd30d1b/attachment.bin>

From sebastian.miele at gmail.com  Sun Feb 16 00:56:56 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Sat, 15 Feb 2020 23:56:56 +0000
Subject: [dev-context] Minor Problems in the LuaMetaTeX Manual
Message-ID: <87pnefl7zr.fsf@gmail.com>

"When you are processing a snippet of text starting with btex and ending
with either etex or verbatimtex": According the MetaPost manual there
are only "verbatimtex .. etex" blocks, but no "btex .. verbatimtex"
blocks.

"There is one special case: pens that are (possibly transformed)
ellipses have an extra string-valued": In the current PDF, the
"string-valued" gets hyphenated as "stringA" at the end of a line and
"Bvalued" at the beginning of the following line.

From sebastian.miele at gmail.com  Tue Feb 18 03:04:03 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Tue, 18 Feb 2020 02:04:03 +0000
Subject: [dev-context] Typos in the LuaMetaTeX Manual
Message-ID: <87a75ghcrw.fsf@gmail.com>

Some of these are up to two weeks old and may already have been fixed
otherwise.

"has resulted in many more parameters than were not accessible before":
"than" instead of "that".

"in a \atop stack": "a" instead of "an".

"Method six omits the surround glue when there is (x)spacing glue
present while method seven does the opposite, the glue is only applied
when there is (x)space glue present too": The "too" at the end
superfluous. Apart from that, the sentence says the exact opposite of
what the preceding table says. At least one of them is wrong.

"Note 1: for ease of use": "for" instead of "For".

"so you you might encounter"

"a \hbox": "a" instead of "an".

The table for \mathscriptboxmode repeats 2 in the last two rows for the
value column. In the last row it should be 3.

"These primitives accepts an option width specification": "option"
instead of "optional".

"the fact if the used characters in the font have": "if" instead of
"whether".

"Commands like (plain TEXs) \big need use this feature": "use" instead
of "to use".

"These commands are provides as convenience": "provides" instead of
"provided".

The code example in 8.8.2 (Script commands \Unosuperscript and
\Unosubscript) uses the wrong buffer.

"and a character as nucleus. and which has the side effect that":
Superfluous ". and".

"(like kern and width, or data and value": Missing closing parenthesis.

"and and"

"A few more xperiments were done"

"two kind of callbacks": "kind" instead of "kinds".

"has to represent a hbox": "a" instead of "an".

"<number prevdepth>": Probably should be "<number> prevdepth".

"This callback replaces the code that prints LuaTeXâs when a file":
"prints LuaTeX's" instead of "LuaTeX prints". Two occurrences of this
typo (start_file, stop_file).

"The value is currently": Swap "is" and "currently".

"lua.setluaname(<string> s,<number> n])": A lone "]".

"If you pass true to get you get 5 values returned for a glue and when
you pass false you only get the width returned": This sentence only
repeats something already mentioned in the same paragraph and can be
deleted.

"in which care only": "care" instead of "case".

"the space before in between will be gobbled": The example code before
that line actually uses "inbetween". "in between" probably is the
correct spelling.

"a callback that read numbers": "read" instead of "reads".

"The engine can in one of four modes": "can in" instead of "can be in".

"You can initialize with a new seed with init_rand (lua_math_randomseed
is equivalent to this one": Somewhere in this sentence a closing
parenthesis is missing.

"This function behaves like texio.write, but make sure": "make" instead
of "makes".

"This function that should be used with care": Superfluous "that".

"Normally a LUA will just collect prints": Something like "call" is
missing after "LUA".

"and as performance is quite ok. One can build additional parsers":
Probably "ok. One" instead of something like "ok(,) one".

"returns a number representing a dimension and or two numbers being the
filler and order": "and or" instead of probably just "or".

"The scan_code function takes an optional number, the keyword function":
The "scan_code" has the prefix "scan_" in this sentence, the "keyword"
does not, although it has in the preceding table.

"returns a table of tokens tokens"

"(for instance the catcode in case of a character or the classifier that
determines the internal treatment": Missing closing parenthesis.

In section 11.6.6 (Nota bene) the examples after "If we now say" do not
change anything and seem to be superfluous, as far as I can see.

"The argument hash can have a number of different fields": "hash" used
to mean (hash) table.

"Graphical objects come in various types that each has a different list
of accessible values": "has a different list" instead of "have different
lists". Or: "types that each" instead of "types. Each". Or: "types that
each has" instead of "types, each having".

"Each dash is two-item hash": Missing "a". Using "hash" to mean (hash)
table.

"The first argument is to be a page dictionary": "is" followed "to be".
But more importantly: The sentence seems to make no sense in its
context.

"13.1.7 get[from][dictionary|array|stream]": Contrary to the section
title, the section does not explain the getfrom.. stuff. That is handled
in a separate following section.

"The pdfe.new that takes three arguments:": "The pdfe.new that" instead
of e.g. just "pdfe.new".

"so that multiple doesnât use more memory": Something is missing between
"multiple" and "doesn't". And probably "don't" (plural).

"an pdfe": "an" instead of "a". At least two occurrences of this.

"puspose": instead of "purpose".

The table explaining "readfixed2", "readfixed4", and "read2dot14"
contains e.g. "a 2 byte float" in the results column. However, as far as
I can see now, the functions probably read fixed point numbers of
specific formats and return them as ordinary Lua (floating point)
numbers. Similar considerations apply to other rows of the table. Maybe
the results column should be separated into two columns: One on what is
read from the stream, and one on how the result is represented and
returned in Lua.

"string.cWharacters"

"Keep in mind that there might be platforms where this function is
available": Probably a missing "not". Or "un" before "available".

"The lua library provide some general helpers": "provide" instead of
"provides".

"Deep down some more has changes": Probably "changes" instead of
"changed".

From j.hagen at xs4all.nl  Tue Feb 18 10:23:40 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Tue, 18 Feb 2020 10:23:40 +0100
Subject: [dev-context] Typos in the LuaMetaTeX Manual
In-Reply-To: <87a75ghcrw.fsf@gmail.com>
References: <87a75ghcrw.fsf@gmail.com>
Message-ID: <e00ea25e-0427-6294-bf99-64a4f762a585@xs4all.nl>

On 2/18/2020 3:04 AM, Sebastian Miele wrote:
> Some of these are up to two weeks old and may already have been fixed
> otherwise.
thanks, applied

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From adityam at umich.edu  Sat Feb 29 04:28:25 2020
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 28 Feb 2020 22:28:25 -0500 (EST)
Subject: [dev-context] Typo in mp-tool
Message-ID: <nycvar.YAK.7.77.849.2002282226270.12387@nqv-guvaxcnq>

--- /opt/luametatex/texmf-context/metapost/context/base/mpiv/mp-tool.mpiv	2020-01-01 13:22:40.000000000 -0500
+++ mp-tool.mpiv	2020-02-28 22:24:09.527072792 -0500
@@ -641,7 +641,7 @@
              addto currentpicture also pattern ;
              addto currentpicture also shape ;
          fi ;
-        currentpicture := currentpicture shifted - centrum ;
+        currentpicture := currentpicture shifted centrum ;
          endgroup ;
      )
  enddef;

From sebastian.miele at gmail.com  Sun Mar  1 15:49:20 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Sun, 01 Mar 2020 14:49:20 +0000
Subject: [dev-context] Different Versions of Manuals
Message-ID: <87a750ceq7.fsf@gmail.com>

The ConTeXt Excursion referenced from the garden and contained in the
LMTX distribution say that they are from 2017-Oct-05. The version linked
from http://www.pragma-ade.com/overview.htm says it is from 1999-May-27.

The ConTeXt reference manual linked from
http://www.pragma-ade.com/overview.htm is from 2001-Nov-12. The version
referenced in the garden is from 2013-Sep-27. As of now, I did not find
a version of the document in the distribution. Neither in ConTeXt LMTX,
nor in ConTeXt Standalone.

In the following days I will start to use the most recent version of the
two documents known to me.

In the LMTX distribution: musings.pdf is from 2020-Jan-17, whereas
musings.tex and musings-names.tex are from 2020-Feb-18.

luametatex.pdf in LMTX is from Feb-18. In Standalone it is from Jan-30.

From j.hagen at xs4all.nl  Sun Mar  1 23:07:44 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Sun, 1 Mar 2020 23:07:44 +0100
Subject: [dev-context] Different Versions of Manuals
In-Reply-To: <87a750ceq7.fsf@gmail.com>
References: <87a750ceq7.fsf@gmail.com>
Message-ID: <f78a3f02-4a12-0a5e-5f7e-687e5b7cc05e@xs4all.nl>

On 3/1/2020 3:49 PM, Sebastian Miele wrote:
> The ConTeXt Excursion referenced from the garden and contained in the
> LMTX distribution say that they are from 2017-Oct-05. The version linked
> from http://www.pragma-ade.com/overview.htm says it is from 1999-May-27.
> 
> The ConTeXt reference manual linked from
> http://www.pragma-ade.com/overview.htm is from 2001-Nov-12. The version
> referenced in the garden is from 2013-Sep-27. As of now, I did not find
> a version of the document in the distribution. Neither in ConTeXt LMTX,
> nor in ConTeXt Standalone.

The garden copies are kind of independent. Not updated often.

The website is largely the same as what is in the distribution but not 
entirely. (Btw, most of the website is generated automatically along 
with generating the current distribution zip.)

The website is a bit more archival in that sense. The old ref manual 
(most of which still applies) has some chapters turned into what are now 
separate manuals.

> In the following days I will start to use the most recent version of the
> two documents known to me.
> 
> In the LMTX distribution: musings.pdf is from 2020-Jan-17, whereas
> musings.tex and musings-names.tex are from 2020-Feb-18.

Yes, I don't generate the main docs every time I fix a typo or add a 
line (esp when it's not that fundamental).
> luametatex.pdf in LMTX is from Feb-18. In Standalone it is from Jan-30.
Sure, sometimes we update LMTX independent from the mkiv distribution. 
I generate the luametatex manual (1) as a quick test and (2) to check if 
I messed up performance.

Anyway, as the sources are distributed too one can always generate the 
latest greatest.

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From sebastian.miele at gmail.com  Tue Mar  3 11:56:55 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Tue, 03 Mar 2020 10:56:55 +0000
Subject: [dev-context] Different Versions of Manuals
In-Reply-To: <f78a3f02-4a12-0a5e-5f7e-687e5b7cc05e@xs4all.nl>
References: <87a750ceq7.fsf@gmail.com>
 <f78a3f02-4a12-0a5e-5f7e-687e5b7cc05e@xs4all.nl>
Message-ID: <87tv35emfc.fsf@gmail.com>

Hans Hagen <j.hagen at xs4all.nl> writes:
>
> On 3/1/2020 3:49 PM, Sebastian Miele wrote:
> >
> > The ConTeXt Excursion referenced from the garden and contained in the
> > LMTX distribution say that they are from 2017-Oct-05. The version linked
> > from http://www.pragma-ade.com/overview.htm says it is from 1999-May-27.
> >
> > The ConTeXt reference manual linked from
> > http://www.pragma-ade.com/overview.htm is from 2001-Nov-12. The version
> > referenced in the garden is from 2013-Sep-27. As of now, I did not find
> > a version of the document in the distribution. Neither in ConTeXt LMTX,
> > nor in ConTeXt Standalone.
>
> The garden copies are kind of independent. Not updated often.
>
> The website is largely the same as what is in the distribution but not 
> entirely. (Btw, most of the website is generated automatically along 
> with generating the current distribution zip.)
>
> The website is a bit more archival in that sense. The old ref manual 
> (most of which still applies) has some chapters turned into what are now 
> separate manuals.

Ok, I just use the docs from the distribution and the contextref.pdf
from 2013-Sep-27 linked at the garden (as neither it nor its source
seem to be in the distribution).

> > luametatex.pdf in LMTX is from Feb-18. In Standalone it is from Jan-30.
>
> Sure, sometimes we update LMTX independent from the mkiv distribution. 
> I generate the luametatex manual (1) as a quick test and (2) to check if 
> I messed up performance.
>
> Anyway, as the sources are distributed too one can always generate the 
> latest greatest.

Generating the manuals on my site may produce the latest (except for the
lacking ConTeXt reference manual). But it cannot produce the greatest on
my site, because, as of now, I am lacking Lucida and Cambria, and my
financial means are extremely limited (contrary to my free time :-)).

At least the LuaMetaTeX manual has a graphical example with boxes drawn
around Lucida and Cambria characters in order to illustrate spacing. The
font metrics used for that almost certainly come from the fonts.

I just stay with the generated PDFs.

Thanks!

Best wishes
Sebastian

From sebastian.miele at gmail.com  Tue Mar  3 12:29:23 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Tue, 03 Mar 2020 11:29:23 +0000
Subject: [dev-context] Different Versions of Manuals
In-Reply-To: <87tv35emfc.fsf@gmail.com>
References: <87a750ceq7.fsf@gmail.com>
 <f78a3f02-4a12-0a5e-5f7e-687e5b7cc05e@xs4all.nl> <87tv35emfc.fsf@gmail.com>
Message-ID: <87r1y9ekx8.fsf@gmail.com>


Sebastian Miele <sebastian.miele at gmail.com> writes:
>
> [...]
>
> I just stay with the generated PDFs.

That sentence is ambiguous. I mean: I just stay with the distributed
PDFs.

From j.hagen at xs4all.nl  Tue Mar  3 15:23:49 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Tue, 3 Mar 2020 15:23:49 +0100
Subject: [dev-context] Different Versions of Manuals
In-Reply-To: <87tv35emfc.fsf@gmail.com>
References: <87a750ceq7.fsf@gmail.com>
 <f78a3f02-4a12-0a5e-5f7e-687e5b7cc05e@xs4all.nl> <87tv35emfc.fsf@gmail.com>
Message-ID: <2cb11453-2a47-3ce7-05e8-172389cdc6e8@xs4all.nl>

On 3/3/2020 11:56 AM, Sebastian Miele wrote:
> Hans Hagen <j.hagen at xs4all.nl> writes:
>>
>> On 3/1/2020 3:49 PM, Sebastian Miele wrote:
>>>
>>> The ConTeXt Excursion referenced from the garden and contained in the
>>> LMTX distribution say that they are from 2017-Oct-05. The version linked
>>> from http://www.pragma-ade.com/overview.htm says it is from 1999-May-27.
>>>
>>> The ConTeXt reference manual linked from
>>> http://www.pragma-ade.com/overview.htm is from 2001-Nov-12. The version
>>> referenced in the garden is from 2013-Sep-27. As of now, I did not find
>>> a version of the document in the distribution. Neither in ConTeXt LMTX,
>>> nor in ConTeXt Standalone.
>>
>> The garden copies are kind of independent. Not updated often.
>>
>> The website is largely the same as what is in the distribution but not
>> entirely. (Btw, most of the website is generated automatically along
>> with generating the current distribution zip.)
>>
>> The website is a bit more archival in that sense. The old ref manual
>> (most of which still applies) has some chapters turned into what are now
>> separate manuals.
> 
> Ok, I just use the docs from the distribution and the contextref.pdf
> from 2013-Sep-27 linked at the garden (as neither it nor its source
> seem to be in the distribution).

Indeed. As I am very picky about formatting of document sources and had 
no time (or reason) to check the ref manual it's not in the distribution.

>>> luametatex.pdf in LMTX is from Feb-18. In Standalone it is from Jan-30.
>>
>> Sure, sometimes we update LMTX independent from the mkiv distribution.
>> I generate the luametatex manual (1) as a quick test and (2) to check if
>> I messed up performance.
>>
>> Anyway, as the sources are distributed too one can always generate the
>> latest greatest.
> 
> Generating the manuals on my site may produce the latest (except for the
> lacking ConTeXt reference manual). But it cannot produce the greatest on
> my site, because, as of now, I am lacking Lucida and Cambria, and my
> financial means are extremely limited (contrary to my free time :-)).
> 
> At least the LuaMetaTeX manual has a graphical example with boxes drawn
> around Lucida and Cambria characters in order to illustrate spacing. The
> font metrics used for that almost certainly come from the fonts.

You can probably remap them to some other font. If you have a windows 
system or install some powerpoint vierwer you have cambria.

> I just stay with the generated PDFs.
Ok.

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From sebastian.miele at gmail.com  Wed Mar  4 13:42:23 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Wed, 04 Mar 2020 12:42:23 +0000
Subject: [dev-context] Typos in tools-mkiv.pdf
Message-ID: <87h7z4l2a8.fsf@gmail.com>

"who is also charge of": Missing "in".

"There are few exert options too": "exert" instead of "expert".

"and or course": "or" instead of "of".

"can not run the script as any program": "can not" instead of "can".

"Als, in practice"

"Getting information on trackers, directives and experiments.": This
sentence probably should be dropped.

"behaviour that are": Mismatching singular/plural.

"and it also resolvers.locating": Missing verb.

"use given texmf tree (default file: setuptex.tmf)": I did not find a
setuptex.tmf in the distribution.

"have a bunch or options": "or" instead of "of".

"The --execute options exists": "options" instead of "option".

"An finally": "An" instead of "And".

"We actually maintains": "maintains" instead of "maintain".

"In the merging process, most all comments": "most all" instead one of
both.

"makes it easy to write Lua a scripts"

"Creates a format file and stores in in"

From wolfgang.schuster.lists at gmail.com  Mon Mar  9 21:38:19 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 9 Mar 2020 21:38:19 +0100
Subject: [dev-context] \tochar problem with symbols
Message-ID: <790e70cd-5e2a-aa5e-ed17-63540bd97eb0@gmail.com>

Hi Hans,

I encountered a nasty problem when I tried to make symbols for the 
Libertinus keyboard font.

Whenever I tried to make a table with all symbols in the font ConTeXt 
stops with a error message.


%%%% begin example
\definefontsynonym [LibertinusKeyboard] [file:libertinuskeyboardregular.otf]

\startsymbolset [libertinus-keyboard] [font=LibertinusKeyboard]
 Â Â Â  % Libertinus Keyboard Regular
\stopsymbolset

\starttext
\showsymbolset [libertinus-keyboard]
\stoptext
%%%% end example


The error message is caused by two symbols in the font, the first is 
"bar" and the second is "dollar". The reason for this is that ConTeXt 
uses \tochar to auto create symbols in the font but \tochar set special 
catcodes for some letters.

As can be seen in the example below "dollar" has catcode 3 and "bar" has 
catcode "13".


%%%% begin example
\starttext

x\tochar{n:bar}|x

\tochar{n:dollar}x$

\stoptext
%%%% end example

Wolfgang


From j.hagen at xs4all.nl  Tue Mar 10 10:43:21 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Tue, 10 Mar 2020 10:43:21 +0100
Subject: [dev-context] \tochar problem with symbols
In-Reply-To: <790e70cd-5e2a-aa5e-ed17-63540bd97eb0@gmail.com>
References: <790e70cd-5e2a-aa5e-ed17-63540bd97eb0@gmail.com>
Message-ID: <61a19776-f8b1-f5ab-6628-e09aeed52cd6@xs4all.nl>

On 3/9/2020 9:38 PM, Wolfgang Schuster wrote:

> As can be seen in the example below "dollar" has catcode 3 and "bar" has 
> catcode "13".
> 
> 
> %%%% begin example
> \starttext
> 
> x\tochar{n:bar}|x
> 
> \tochar{n:dollar}x$
> 
> \stoptext
> %%%% end example
ok, i'll send you somethign to test

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From wolfgang.schuster.lists at gmail.com  Sat Mar 14 18:05:38 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sat, 14 Mar 2020 18:05:38 +0100
Subject: [dev-context] m-scite.mkiv
Message-ID: <0ab05d1c-29dc-c4bd-6852-bee8245e57ad@gmail.com>

Hi,

the scite module loads the wrong formatter for C/ C++ code.

Line 320 in m-scite.mkiv:

-\definetyping[CPP] [option=web]
+\definetyping[CPP] [option=cpp]

Wolfgang


From wolfgang.schuster.lists at gmail.com  Thu Mar 26 20:13:17 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Thu, 26 Mar 2020 20:13:17 +0100
Subject: [dev-context] scite module adds empty line at the end
Message-ID: <8f32e2d3-13f1-b3d0-1661-a1ea6dae27f8@gmail.com>

Hi,

when I use the scite module to format code blocks I get a empty line at 
the end of the environment.

The cause for this is the "lines" environment used by the module which 
adds a \blank at the end. A custom lines environment without 
before/after values would help here.

%%%% begin example
\usemodule[scite]

\setuptyping
 Â  [TEX]
 Â  [before=,
 Â Â  after={\blank[back]},
 Â Â  after=]

%\setuplines[after=]

\starttext

\ruledvbox\bgroup
\startTEX
\empty
\stopTEX
\egroup

\stoptext
%%%% end example

Wolfgang

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20200326/d2316360/attachment.htm>

From wolfgang.schuster.lists at gmail.com  Sat Apr  4 10:42:00 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sat, 4 Apr 2020 10:42:00 +0200
Subject: [dev-context] Keep extreme tables on the same page as previous
 content
Message-ID: <6d2d01a2-c53c-b2e3-2057-0e56b7c6cffe@gmail.com>

Hi,

when you use extreme tables without a float environment but repeat the 
header the table always starts on a new page.

%%%% begin example
\starttext

\samplefile{weisman}

\blank

\startxtable[header=repeat,split=repeat]
 Â Â Â  \startxtablehead
 Â Â Â Â Â Â Â  \startxrow \startxcell Table head \stopxcell \stopxrow
 Â Â Â  \stopxtablehead
 Â Â Â  \startxtablebody
 Â Â Â Â Â Â Â  \dorecurse{100}{\startxrow \startxcell Table body \stopxcell 
\stopxrow}
 Â Â Â  \stopxtablebody
\stopxtable

\stoptext
%%%% end example

The reason for this is the height set for the part of each page, on the 
first page ConTeXt uses a box with the height of \pagegoal forces a page 
break because the content doesn't fit.

\setvalue{\??xtableflushsplit\v!repeat}%
 Â  {\doloop
 Â Â Â Â  {\clf_x_table_flush
 Â Â Â Â Â Â Â  method {\v!split}%
 Â Â Â Â Â Â Â  height \ifdim\pagegoal=\maxdimen\textheight\else\pagegoal\fi
 Â Â Â Â Â  \relax
 Â Â Â Â Â  \ifcase\c_tabl_x_state
 Â Â Â Â Â Â Â  \exitloop
 Â Â Â Â Â  \else
 Â Â Â Â Â Â Â  \page
 Â Â Â Â Â  \fi}}

While determining the available space is easy we need a method to ensure 
the table stays on the page when the user adds a vertical skip (e.g. 
\blank[...]) before the table because this can lead to another page break.

Wolfgang


From braslau.list at comcast.net  Sat Apr  4 18:44:01 2020
From: braslau.list at comcast.net (Alan Braslau)
Date: Sat, 4 Apr 2020 10:44:01 -0600
Subject: [dev-context] Keep extreme tables on the same page as previous
 content
In-Reply-To: <6d2d01a2-c53c-b2e3-2057-0e56b7c6cffe@gmail.com>
References: <6d2d01a2-c53c-b2e3-2057-0e56b7c6cffe@gmail.com>
Message-ID: <8ea4cb59-0943-3804-4ab9-a1222ec58649@comcast.net>

On 04/04/20 02:42, Wolfgang Schuster wrote:
> Hi,
> 
> when you use extreme tables without a float environment but repeat the 
> header the table always starts on a new page.
> 
> %%%% begin example
> \starttext
> 
> \samplefile{weisman}
> 
> \blank
> 
> \startxtable[header=repeat,split=repeat]
>  Â Â Â  \startxtablehead
>  Â Â Â Â Â Â Â  \startxrow \startxcell Table head \stopxcell \stopxrow
>  Â Â Â  \stopxtablehead
>  Â Â Â  \startxtablebody
>  Â Â Â Â Â Â Â  \dorecurse{100}{\startxrow \startxcell Table body \stopxcell 
> \stopxrow}
>  Â Â Â  \stopxtablebody
> \stopxtable
> 
> \stoptext
> %%%% end example


I use

\starttext

\startxtable [split=repeat,header=repeat,footer=repeat]

     \startbuffer [header]
        ...
     \stopbuffer

     \startxtablehead
         \getbuffer [header]
     \stopxtablehead

     \startxtablenext
         \getbuffer [header]
     \stopxtablenext

     \startxtablebody
         ...
     \stopxtablebody

     \startxtablefoot
         ...
     \stopxtablefoot

\stopxtable

\stoptext

without a float environment, and I do NOT get a spurious page break, so 
I do not understand what is happening in your sample above. Is it the 
\break (as you suggest)?

In your example above, why not simply use a float environment:

\startplacetable [location=force,number=no]
     \startxtable
         ...
     \stopxtable
\stopplacetable


Supplementary question. How might I produce/impose a page break at a 
certain point in a long table? Say that I may want to provoke a break 
before a certain \startxrow...\stopxrow

Thanks

-- 
Alan

From oinos at gmx.es  Sat Apr  4 18:55:15 2020
From: oinos at gmx.es (Pablo Rodriguez)
Date: Sat, 4 Apr 2020 18:55:15 +0200
Subject: [dev-context] Keep extreme tables on the same page as previous
 content
In-Reply-To: <8ea4cb59-0943-3804-4ab9-a1222ec58649@comcast.net>
References: <6d2d01a2-c53c-b2e3-2057-0e56b7c6cffe@gmail.com>
 <8ea4cb59-0943-3804-4ab9-a1222ec58649@comcast.net>
Message-ID: <df9af308-14a5-3e53-9302-10f32f78c9dd@gmx.es>

On 4/4/20 6:44 PM, Alan Braslau wrote:
> On 04/04/20 02:42, Wolfgang Schuster wrote:
>> Hi,
>>
>> when you use extreme tables without a float environment but repeat the
>> header the table always starts on a new page.
>>
>> %%%% begin example
>> \starttext
>>
>> \samplefile{weisman}
>>
>> \blank
>>
>> \startxtable[header=repeat,split=repeat]
>>  Â Â Â  \startxtablehead
>>  Â Â Â Â Â Â Â  \startxrow \startxcell Table head \stopxcell \stopxrow
>>  Â Â Â  \stopxtablehead
>> [...]
>
> I use
>
> \starttext
> \startxtable [split=repeat,header=repeat,footer=repeat]
>      \startbuffer [header]
>         ...
>      \stopbuffer
> [...]
> without a float environment, and I do NOT get a spurious page break, so
> I do not understand what is happening in your sample above. Is it the
> \break (as you suggest)?

Alan,

Iâm afraid that the spurious pagebreak comes when you have text before
the xtable and the xtable has to be split in pages.

Pablo
--
http://www.ousia.tk

From braslau.list at comcast.net  Sat Apr  4 19:29:42 2020
From: braslau.list at comcast.net (Alan Braslau)
Date: Sat, 4 Apr 2020 11:29:42 -0600
Subject: [dev-context] Keep extreme tables on the same page as previous
 content
In-Reply-To: <df9af308-14a5-3e53-9302-10f32f78c9dd@gmx.es>
References: <6d2d01a2-c53c-b2e3-2057-0e56b7c6cffe@gmail.com>
 <8ea4cb59-0943-3804-4ab9-a1222ec58649@comcast.net>
 <df9af308-14a5-3e53-9302-10f32f78c9dd@gmx.es>
Message-ID: <0665d50d-f6b2-23e9-d6be-262d4e00e331@comcast.net>

On 04/04/20 10:55, Pablo Rodriguez wrote:
> 
> Iâm afraid that the spurious pagebreak comes when you have text before
> the xtable and the xtable has to be split in pages.

So, when one has text before, why NOT use 
\startplacetable...\stopplacetable? There are many advantages of using 
the table float environment, not the least of which is listing.

-- 
Alan

From oinos at gmx.es  Sat Apr  4 21:12:21 2020
From: oinos at gmx.es (Pablo Rodriguez)
Date: Sat, 4 Apr 2020 21:12:21 +0200
Subject: [dev-context] Keep extreme tables on the same page as previous
 content
In-Reply-To: <0665d50d-f6b2-23e9-d6be-262d4e00e331@comcast.net>
References: <6d2d01a2-c53c-b2e3-2057-0e56b7c6cffe@gmail.com>
 <8ea4cb59-0943-3804-4ab9-a1222ec58649@comcast.net>
 <df9af308-14a5-3e53-9302-10f32f78c9dd@gmx.es>
 <0665d50d-f6b2-23e9-d6be-262d4e00e331@comcast.net>
Message-ID: <8ce0fca8-dee4-a88e-f82b-6ce1454c4abe@gmx.es>

On 4/4/20 7:29 PM, Alan Braslau wrote:
> On 04/04/20 10:55, Pablo Rodriguez wrote:
>>
>> Iâm afraid that the spurious pagebreak comes when you have text before
>> the xtable and the xtable has to be split in pages.
>
> So, when one has text before, why NOT use
> \startplacetable...\stopplacetable? There are many advantages of using
> the table float environment, not the least of which is listing.

https://mailman.ntg.nl/pipermail/ntg-context/2020/097475.html contains a
sample that doesnât work with that pair of commands.

I mean adding "split, repeat" to \startplacetable[]" moves the table to
the second page and doesnât split it..

If you have a fix for that sample, please reply to that thread.

Pablo
--
http://www.ousia.tk

From wolfgang.schuster.lists at gmail.com  Sun Apr  5 17:28:17 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sun, 5 Apr 2020 17:28:17 +0200
Subject: [dev-context] data-vir.lua: Extra tracker
Message-ID: <d9a4220c-0b76-59e9-2326-0e2c3472c6a0@gmail.com>

Hi,

the following tracker has to be removed because a) there is a tracker 
with the same name in data-zip.lua and b) the file contains another 
tracker for trace_virtual.

data-vir.lua (line 15):

trackers.register("resolvers.locating", function(v) trace_virtual = v end)

Wolfgang


From wolfgang.schuster.lists at gmail.com  Sun Apr  5 18:19:09 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sun, 5 Apr 2020 18:19:09 +0200
Subject: [dev-context] data-vir.lua: Extra tracker
In-Reply-To: <d9a4220c-0b76-59e9-2326-0e2c3472c6a0@gmail.com>
References: <d9a4220c-0b76-59e9-2326-0e2c3472c6a0@gmail.com>
Message-ID: <6734095d-d27d-6d13-c65c-e9391760f74a@gmail.com>

Wolfgang Schuster schrieb am 05.04.2020 um 17:28:
> Hi,
>
> the following tracker has to be removed because a) there is a tracker 
> with the same name in data-zip.lua and b) the file contains another 
> tracker for trace_virtual.
>
> data-vir.lua (line 15):
>
> trackers.register("resolvers.locating", function(v) trace_virtual = v 
> end)

Never mind, both trackers make sense here.

Wolfgang


From christoph at out-world.com  Tue Apr 14 17:14:24 2020
From: christoph at out-world.com (Christoph =?ISO-8859-1?Q?Hinterm=FCller?=)
Date: Tue, 14 Apr 2020 17:14:24 +0200
Subject: [dev-context] Some hint on how linenumbering works in context
Message-ID: <774eda0fa37517b546aa16f899d7dbd87297d9aa.camel@out-world.com>

Hi
After some struggling with xml exporter i have managed to get the
output quit nicely including css and others. The only thing which still
worries me a bit is the line numbering. While location set to left and
not placing the content inside float environment, everything seems to
be fine. 

So my question is. Is there besides codes any documentation how
linenumber placement works inside context and how far the backend
exporter hooks into this process at all? If codes only which source
files should i read to understand how things work. And how things
change between pdf and xml/xhtml export?

Would help in deciding whether and how to place some hints inside the
document to facilitate line numberplacing in export mode.

Also let me know if this question is better placed on the ntg-context
mailing list instead of the development mailing list


Best
Xristoph



From modules at contextgarden.net  Sun Apr 26 06:12:01 2020
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Sun, 26 Apr 2020 06:12:01 +0200
Subject: [dev-context] CGModules update: Filter version 2020.04.25 published.
Message-ID: <20200426041201.CDBA3183751@zapf.ntg.nl>

Aditya Mahajan submitted an update to the

               Filter

package.

Version number: 2020.04.25
License type: BSD License (simplified)
Wants to be in ConTeXt distribution: yes
Wants to be synced with CTAN: yes

Summary description: A module to run external programs on the contents of start-stop evironment

Announcement text:
----------------------------------------------------------------------

Minor bugfix

----------------------------------------------------------------------


From modules at contextgarden.net  Sun Apr 26 06:14:54 2020
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Sun, 26 Apr 2020 06:14:54 +0200
Subject: [dev-context] CGModules update: vim syntax highlighting version
 2020.04.25 published.
Message-ID: <20200426041454.5F085183753@zapf.ntg.nl>

Aditya Mahajan submitted an update to the

               vim syntax highlighting

package.

Version number: 2020.04.25
License type: BSD License (simplified)
Wants to be in ConTeXt distribution: yes
Wants to be synced with CTAN: yes

Summary description: This module uses Vim editor's syntax files to syntax highlight verbatim code in ConTeXt

Announcement text:
----------------------------------------------------------------------

Added a new feature to escape in TeX mode using /BTEX .. /ETEX. This feature is enabled using `escape=command`. See the documentation for detailed iusage instructions. Thanks to Christoph HintermÃÂÃÂ¼ller for the implementation.

----------------------------------------------------------------------


From modules at contextgarden.net  Wed Apr 29 06:56:52 2020
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Wed, 29 Apr 2020 06:56:52 +0200
Subject: [dev-context] CGModules update: vim syntax highlighting version
 2020.04.29 published.
Message-ID: <20200429045652.AE84718388B@zapf.ntg.nl>

Aditya Mahajan submitted an update to the

               vim syntax highlighting

package.

Version number: 2020.04.29
License type: BSD License (simplified)
Wants to be in ConTeXt distribution: yes
Wants to be synced with CTAN: yes

Summary description: This module uses Vim editor's syntax files to syntax highlight verbatim code in ConTeXt

Announcement text:
----------------------------------------------------------------------

Added `vimcommand` option to specify the location of vim program:

    \setupvimtyping[vimcommand=/path/to/vim]

Can also use used to call neovim instead of vim:

    \setupvimtyping[vimcommand=nvim]

On my laptop, nvim is amout 10% faster than vim for parsing medium sized
(approx 500 lines) files.

----------------------------------------------------------------------


From wolfgang.schuster.lists at gmail.com  Thu Apr 30 15:02:49 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Thu, 30 Apr 2020 15:02:49 +0200
Subject: [dev-context] typo-del.mkiv
Message-ID: <0cc1ba56-c995-438f-90ce-f0875e8e57ee@gmail.com>

Hi,

the patch below makes it possible to change the interlinespace for 
blockquote etc.
with the style key, e.g. \setupblockquote[style={\setupinterlinespace[...]}.

The extra group is needed for the nextleft and nextright keys.

\def\typo_delimited_start_par_indeed[#1]%
 Â  {\let\typo_delimited_stop\typo_delimited_stop_par
 Â Â  \edef\p_delimited_spacebefore{\delimitedtextparameter\c!spacebefore}%
 Â Â  \ifx\p_delimited_spacebefore\empty \else
 Â Â Â Â  \blank[\p_delimited_spacebefore]%
 Â Â  \fi
 Â Â  \delimitedtextparameter\c!before
 Â Â  \iffirstargument
 Â Â Â Â  \edef\m_delimited_argument{#1}%
 Â Â  \fi
 Â Â  \ifx\m_delimited_argument\empty
 Â Â Â Â  \let\m_delimited_argument\m_delimited_argument
 Â Â  \fi
 Â Â  \ifx\m_delimited_argument\empty
 Â Â Â Â  \endgraf
 Â Â Â Â  \doadaptleftskip {\delimitedtextparameter\c!leftmargin}%
 Â Â Â Â  \doadaptrightskip{\delimitedtextparameter\c!rightmargin}%
 Â Â Â Â  \let\typo_delimited_stop_par_indeed\endgraf
 Â Â  \else % backward compatible direct directive
 Â Â Â Â  \startnarrower[\m_delimited_argument]%
 Â Â Â Â  \let\typo_delimited_stop_par_indeed\stopnarrower
 Â Â  \fi
 Â Â  % so far
 Â Â  \push_macro_checkindentation
 Â Â  \useindentingparameter\delimitedtextparameter
 Â Â  %
 Â Â  \begingroup
 Â Â  \usedelimitedtextstyleandcolor\c!style\c!color
 Â Â  %
+Â  \begingroup
 Â Â  \edef\p_delimited_leftÂ Â Â Â  {\delimitedtextparameter{\c!left}}%
 Â Â  \edef\p_delimited_rightÂ Â Â  {\delimitedtextparameter{\c!right}}%
 Â Â  \edef\p_delimited_nextleft {\delimitedtextparameter{\c!nextleft}}%
 Â Â  \edef\p_delimited_nextright{\delimitedtextparameter{\c!nextright}}%
 Â Â  %
 Â Â  \leftdelimitedtextmark
 Â Â  %
 Â Â  \setnextleftdelimitedtextmark
 Â Â  \setnextrightdelimitedtextmark
 Â Â  %
 Â Â  \typo_delimited_start_content}

\def\typo_delimited_stop_par
 Â  {\typo_delimited_stop_content
 Â Â  \rightdelimitedtextmark
+Â  \carryoverpar\endgroup
+Â  \endgraf
+Â  \endgroup % new per 2013-01-21 ... please left floats
-Â  \carryoverpar\endgroup % new per 2013-01-21 ... please left floats
 Â Â  \pop_macro_checkindentation
 Â Â  \typo_delimited_stop_par_indeed
 Â Â  \delimitedtextparameter\c!after
 Â Â  \edef\p_delimited_spaceafter{\delimitedtextparameter\c!spaceafter}%
 Â Â  \ifx\p_delimited_spaceafter\empty \else
 Â Â Â Â  \blank[\p_delimited_spaceafter]%
 Â Â  \fi
 Â Â  \useindentnextparameter\delimitedtextparameter
 Â Â  \aftergroup\dorechecknextindentation}% AM: This was missing!

Wolfgang


From sebastian.miele at gmail.com  Tue May 12 14:05:23 2020
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Tue, 12 May 2020 14:05:23 +0200
Subject: [dev-context] Minor Problems with ma-cb-en.pdf
Message-ID: <874kslfjek.fsf@gmail.com>

On page 117 in appendix A (Command definitions) the "OPT" repeatedly
protrudes into the following lines of text.

On page 11 in chapter 6 (Heads), the following probably signifies some
sort of error: "missing: stp:x:chapter missing: stp:x:section [..]".
There are many more such places ("missing: stp:x:...").

"In addition we could also use the command \displaystyle. If we would
type": After that, the result of some ConTeXt input follows twice. But
it should be the verbatim ConTeXt input followed by the result.

There is a single \phantom example in the PDF. It probably is meant to
align the two plus signs. But the lower plus sign is more to the left.

"lable" instead of "label".

"furtilizer".

"CONTEXT support the BIBTEX way": "support" instead of "supports".

"As you have seen you": Superfluous "you".

"If you want to have backgrounds in the gray areas of the page layout of
figure 36.1 you type": There are no gray areas in figure 36.1.

Apart from that there is a slight performance issue with the document:

I use a computer with quite low power consumption. It has significantly
less peak performance than 'usual' computers. But, usually, it more than
suffices for all that I do. I use Arch Linux and Evince on x86_64.

In many places, the rendering of ma-cb-en.pdf is quite slow, especially
on the first and last page of the PDF. Apart from that, using Evince to
search, e.g. for 'bla', through the whole ma-cb-en.pdf is very slow.
(And when I search for '\phantom' then it finds matches in the
background graphic of the first and last page of the PDF.)

Other documents, even much longer ones like the ConTeXt reference
manual, usually pose no such problems at all on my computer. I suspect
that the manual uses fancy graphical stuff (in a way) that takes lots of
time to render and somehow also makes it more complicated to search
through it.

The computing power of my computer may be comparable to a recent
Raspberry PI. The slowness with ma-cb-en.pdf is no real problem for me,
because I most probably will not peruse this specific document in a way
that makes the problems really bad. In particular, I will not search a
lot through the document, as I often do in refence manuals.

But I wanted to have noted that the problem or such problems do exist.

From modules at contextgarden.net  Sun May 17 09:40:34 2020
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Sun, 17 May 2020 09:40:34 +0200
Subject: [dev-context] CGModules update: vim syntax highlighting version
 2020.05.17 published.
Message-ID: <20200517074034.BEC87183CF4@zapf.ntg.nl>

Aditya Mahajan submitted an update to the

               vim syntax highlighting

package.

Version number: 2020.05.17
License type: BSD License (simplified)
Wants to be in ConTeXt distribution: yes
Wants to be synced with CTAN: yes

Summary description: This module uses Vim editor's syntax files to syntax highlight verbatim code in ConTeXt

Announcement text:
----------------------------------------------------------------------

Minor feature enhancement: export minor groups

The default vim syntax highlighting has two typees of syntax highlighting
groups: preffered groups and minor groups. By default, in `syncolors.vim`, the
minor groups are mapped to preffered groups. This is overridden by most
colorschemes, but since `2context.vim` does not load a colorscheme, we got the
default mapping. As a result, the generated `*.vimout` file only contained the
preffered group. 

In this release, default mappings for all minor groups are added to
`2context.vim`, so the generated `*.vimout` file now contains all the default
group names (both preffered and minor). The minor groups are already mapped to
the appropriate preffered groups in `t-vim`, so this has no visible impact on
any existing code, but it does allow the user to change the mappings of the
minor groups.

Based on a bug report by Nicola on the context mailing list.

----------------------------------------------------------------------


From j.hagen at xs4all.nl  Mon May 25 18:22:14 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Mon, 25 May 2020 18:22:14 +0200
Subject: [dev-context] Libertinus Mono (type-imp) -- improvement
In-Reply-To: <20200525135602.GA26905@akela.mendelu.cz>
References: <20200525135602.GA26905@akela.mendelu.cz>
Message-ID: <916e3838-2a22-14cb-a90b-02798f664665@xs4all.nl>

On 5/25/2020 3:56 PM, Tomas Hala wrote:
> Hi,
> 
> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
> \setupbodyfont[libertinus]
> \starttext
> a--b
> \startMP
> a--b
> \stopMP
> \stoptext
> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
> 
> I found out that this code produces dash instead of double hyphen
> also when typing the code which seems not to be correct.
> 
> Solution: (type-imp-libertinus.mkiv from TL2020, line 71)
> OLD: \definefontsynonym [\s!Mono] [LibertinusMono-Regular][\s!features=\s!default]
> NEW: \definefontsynonym [\s!Mono] [LibertinusMono-Regular][\s!features=\s!none]
> 
> If there is no other reason to keep the default features here, I would like
> to propose the change above.
sure, mono is always 'none' so it's a bug that we will fix

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From wolfgang.schuster.lists at gmail.com  Mon May 25 20:51:50 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 25 May 2020 20:51:50 +0200
Subject: [dev-context] pack-bar.mkiv
Message-ID: <afcdb3b0-7b16-e656-29e6-b5f85a3412eb@gmail.com>

Hi,

-\installsimplecommandhandler \??positionbar {positionbar}
+\installsimplecommandhandler \??positionbar {positionbar} \??positionbar

Wolfgang


From wolfgang.schuster.lists at gmail.com  Mon May 25 20:52:54 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 25 May 2020 20:52:54 +0200
Subject: [dev-context] pack-mrl.mkiv
Message-ID: <6e479c57-eb18-4e3b-f1b5-46ddb458ea82@gmail.com>

Hi,

line 39 (third argument is missing):

-\installsimplecommandhandler \??blackrules {blackrules}
+\installsimplecommandhandler \??blackrules {blackrules} \??blackrules

Wolfgang


From wolfgang.schuster.lists at gmail.com  Mon May 25 22:01:47 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 25 May 2020 22:01:47 +0200
Subject: [dev-context] back-pdf.mkiv/mkxl
Message-ID: <3ab7b644-99b0-9f96-7ff2-d80a9593c6d0@gmail.com>

Hi,

the \ifempty command was added to the MkIV instead of the LMTX file.

\appendtoks
 Â Â Â  \edef\p_file{\backendparameter{xmpfile}}%
 Â Â Â  \ifempty\p_file\else
 Â Â Â Â Â  \clf_setxmpfile{\p_file}%
 Â Â Â  \fi
\to \everysetupbackend

Wolfgang


From adityam at umich.edu  Mon Jun  8 07:36:04 2020
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 8 Jun 2020 01:36:04 -0400 (EDT)
Subject: [dev-context] Light colors in colo-imp-rgb.mkiv
Message-ID: <nycvar.YAK.7.77.987.2006080114380.143036@nqv-guvaxcnq>

Hi,

The 'light' colors defined in colo-imp-rgb.mkiv are not light!

\definecolor [lightred]      [r=1,   g=0,   b=0]
\definecolor [lightgreen]    [r=0,   g=1,   b=0]
\definecolor [lightblue]     [r=0,   g=0,   b=1]
\definecolor [lightcyan]     [r=0,   g=1,   b=1]
\definecolor [lightmagenta]  [r=1,   g=0,   b=1]
\definecolor [lightyellow]   [r=1,   g=1,   b=0]

Is this intentional? How about replacing them with somewhat reasonable defaults?

\definecolor [lightred]      [r=1,    g=0.5, b=0.5]
\definecolor [lightgreen]    [r=0.5,  g=1,   b=0.5]
\definecolor [lightblue]     [r=0.75, g=1,   b=1]
\definecolor [lightcyan]     [r=0.5,  g=1,   b=1]
\definecolor [lightmagenta]  [r=1,    g=0.5, b=1]
\definecolor [lightyellow]   [r=1,    g=1,   b=0.5]

See attached output. These are not the ideal choices in terms of shades, but I have chosen values which are least subjective and still give reasonable shades.

Aditya
-------------- next part --------------
A non-text attachment was scrubbed...
Name: colo-test.pdf
Type: application/pdf
Size: 7321 bytes
Desc: 
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20200608/3f65f68f/attachment.pdf>

From j.hagen at xs4all.nl  Mon Jun  8 21:25:28 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Mon, 8 Jun 2020 21:25:28 +0200
Subject: [dev-context] Light colors in colo-imp-rgb.mkiv
In-Reply-To: <nycvar.YAK.7.77.987.2006080114380.143036@nqv-guvaxcnq>
References: <nycvar.YAK.7.77.987.2006080114380.143036@nqv-guvaxcnq>
Message-ID: <87748436-1509-67b8-0026-c53778fa2f1b@xs4all.nl>

On 6/8/2020 7:36 AM, Aditya Mahajan wrote:
> Hi,
> 
> The 'light' colors defined in colo-imp-rgb.mkiv are not light!
> 
> \definecolor [lightred]Â Â Â Â Â  [r=1,Â Â  g=0,Â Â  b=0]
> \definecolor [lightgreen]Â Â Â  [r=0,Â Â  g=1,Â Â  b=0]
> \definecolor [lightblue]Â Â Â Â  [r=0,Â Â  g=0,Â Â  b=1]
> \definecolor [lightcyan]Â Â Â Â  [r=0,Â Â  g=1,Â Â  b=1]
> \definecolor [lightmagenta]Â  [r=1,Â Â  g=0,Â Â  b=1]
> \definecolor [lightyellow]Â Â  [r=1,Â Â  g=1,Â Â  b=0]

hm, a compatibility thing

> Is this intentional? How about replacing them with somewhat reasonable 
> defaults?
> 
> \definecolor [lightred]Â Â Â Â Â  [r=1,Â Â Â  g=0.5, b=0.5]
> \definecolor [lightgreen]Â Â Â  [r=0.5,Â  g=1,Â Â  b=0.5]
> \definecolor [lightblue]Â Â Â Â  [r=0.75, g=1,Â Â  b=1]
> \definecolor [lightcyan]Â Â Â Â  [r=0.5,Â  g=1,Â Â  b=1]
> \definecolor [lightmagenta]Â  [r=1,Â Â Â  g=0.5, b=1]
> \definecolor [lightyellow]Â Â  [r=1,Â Â Â  g=1,Â Â  b=0.5]
> 
> See attached output. These are not the ideal choices in terms of shades, 
> but I have chosen values which are least subjective and still give 
> reasonable shades.
your blue is kind of weird .. this is the metapostisch way:

\definecolor [lightred]      [.5(red,white)]
\definecolor [lightgreen]    [.5(green,white)]
\definecolor [lightblue]     [.5(blue,white)]
\definecolor [lightcyan]     [.5(cyan,white)]
\definecolor [lightmagenta]  [.5(magenta,white)]
\definecolor [lightyellow]   [.5(yellow,white)]

which i bet you prefer

Hans



-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From braslau.list at comcast.net  Mon Jun  8 21:28:10 2020
From: braslau.list at comcast.net (Alan Braslau)
Date: Mon, 8 Jun 2020 13:28:10 -0600
Subject: [dev-context] Light colors in colo-imp-rgb.mkiv
In-Reply-To: <87748436-1509-67b8-0026-c53778fa2f1b@xs4all.nl>
References: <nycvar.YAK.7.77.987.2006080114380.143036@nqv-guvaxcnq>
 <87748436-1509-67b8-0026-c53778fa2f1b@xs4all.nl>
Message-ID: <74b6df6a-d942-99a9-14b0-fa22d58f69da@comcast.net>

On 08/06/20 13:25, Hans Hagen wrote:
> On 6/8/2020 7:36 AM, Aditya Mahajan wrote:
>> Hi,
>>
>> The 'light' colors defined in colo-imp-rgb.mkiv are not light!
>>
>> \definecolor [lightred]Â Â Â Â Â  [r=1,Â Â  g=0,Â Â  b=0]
>> \definecolor [lightgreen]Â Â Â  [r=0,Â Â  g=1,Â Â  b=0]
>> \definecolor [lightblue]Â Â Â Â  [r=0,Â Â  g=0,Â Â  b=1]
>> \definecolor [lightcyan]Â Â Â Â  [r=0,Â Â  g=1,Â Â  b=1]
>> \definecolor [lightmagenta]Â  [r=1,Â Â  g=0,Â Â  b=1]
>> \definecolor [lightyellow]Â Â  [r=1,Â Â  g=1,Â Â  b=0]
> 
> hm, a compatibility thing
> 
>> Is this intentional? How about replacing them with somewhat reasonable 
>> defaults?
>>
>> \definecolor [lightred]Â Â Â Â Â  [r=1,Â Â Â  g=0.5, b=0.5]
>> \definecolor [lightgreen]Â Â Â  [r=0.5,Â  g=1,Â Â  b=0.5]
>> \definecolor [lightblue]Â Â Â Â  [r=0.75, g=1,Â Â  b=1]
>> \definecolor [lightcyan]Â Â Â Â  [r=0.5,Â  g=1,Â Â  b=1]
>> \definecolor [lightmagenta]Â  [r=1,Â Â Â  g=0.5, b=1]
>> \definecolor [lightyellow]Â Â  [r=1,Â Â Â  g=1,Â Â  b=0.5]
>>
>> See attached output. These are not the ideal choices in terms of 
>> shades, but I have chosen values which are least subjective and still 
>> give reasonable shades.
> your blue is kind of weird .. this is the metapostisch way:
> 
> \definecolor [lightred]Â Â Â Â Â  [.5(red,white)]
> \definecolor [lightgreen]Â Â Â  [.5(green,white)]
> \definecolor [lightblue]Â Â Â Â  [.5(blue,white)]
> \definecolor [lightcyan]Â Â Â Â  [.5(cyan,white)]
> \definecolor [lightmagenta]Â  [.5(magenta,white)]
> \definecolor [lightyellow]Â Â  [.5(yellow,white)]
> 
> which i bet you prefer

*I* clearly prefer the Metapostish way!

:-)

Alan

From adityam at umich.edu  Mon Jun  8 22:09:10 2020
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 8 Jun 2020 16:09:10 -0400 (EDT)
Subject: [dev-context] Light colors in colo-imp-rgb.mkiv
In-Reply-To: <87748436-1509-67b8-0026-c53778fa2f1b@xs4all.nl>
References: <nycvar.YAK.7.77.987.2006080114380.143036@nqv-guvaxcnq>
 <87748436-1509-67b8-0026-c53778fa2f1b@xs4all.nl>
Message-ID: <nycvar.YAK.7.77.987.2006081607210.143036@nqv-guvaxcnq>

On Mon, 8 Jun 2020, Hans Hagen wrote:

> On 6/8/2020 7:36 AM, Aditya Mahajan wrote:
>> Hi,
>> 
>> The 'light' colors defined in colo-imp-rgb.mkiv are not light!
>> 
>> \definecolor [lightred]Â Â Â Â Â  [r=1,Â Â  g=0,Â Â  b=0]
>> \definecolor [lightgreen]Â Â Â  [r=0,Â Â  g=1,Â Â  b=0]
>> \definecolor [lightblue]Â Â Â Â  [r=0,Â Â  g=0,Â Â  b=1]
>> \definecolor [lightcyan]Â Â Â Â  [r=0,Â Â  g=1,Â Â  b=1]
>> \definecolor [lightmagenta]Â  [r=1,Â Â  g=0,Â Â  b=1]
>> \definecolor [lightyellow]Â Â  [r=1,Â Â  g=1,Â Â  b=0]
>
> hm, a compatibility thing
>
>> Is this intentional? How about replacing them with somewhat reasonable 
>> defaults?
>> 
>> \definecolor [lightred]Â Â Â Â Â  [r=1,Â Â Â  g=0.5, b=0.5]
>> \definecolor [lightgreen]Â Â Â  [r=0.5,Â  g=1,Â Â  b=0.5]
>> \definecolor [lightblue]Â Â Â Â  [r=0.75, g=1,Â Â  b=1]
>> \definecolor [lightcyan]Â Â Â Â  [r=0.5,Â  g=1,Â Â  b=1]
>> \definecolor [lightmagenta]Â  [r=1,Â Â Â  g=0.5, b=1]
>> \definecolor [lightyellow]Â Â  [r=1,Â Â Â  g=1,Â Â  b=0.5]
>> 
>> See attached output. These are not the ideal choices in terms of shades, 
>> but I have chosen values which are least subjective and still give 
>> reasonable shades.
> your blue is kind of weird ..

0.5(blue,white) does look like light blue to it, but it is better than 1.0(blue) :-)

> this is the metapostisch way:
>
> \definecolor [lightred]      [.5(red,white)]
> \definecolor [lightgreen]    [.5(green,white)]
> \definecolor [lightblue]     [.5(blue,white)]
> \definecolor [lightcyan]     [.5(cyan,white)]
> \definecolor [lightmagenta]  [.5(magenta,white)]
> \definecolor [lightyellow]   [.5(yellow,white)]
>
> which i bet you prefer

Much nicer.

Thanks,
Aditya

From taco at elvenkind.com  Tue Jun 16 09:17:28 2020
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 16 Jun 2020 09:17:28 +0200
Subject: [dev-context] Need a bit of help for source.contextgarden.net
Message-ID: <EA8ADFD5-4DA0-4DB2-BC0D-8E242A6466BD@elvenkind.com>

Hi,


About source.cg.net:

Right now, I am starting texlua twice. Once for mtxrun doing the
actual work (that is fine) but also once for the dispatch to that
script.

I wonder if someone with a bit of knowledge of php can help me
replace that dispatcher by php? It seems wasteful to start an
external program for what is essentially just a setenv() and an
execute(). My index.lua currently looks likes this

#!/opt/texweb/opt/context/tex/texmf-linux-64/bin/texlua -f 
os.setenv('PATH', os.env['CONTEXT_PATH'] .. '/texmf-linux-64/bin:' .. os.env['PATH'])
print ("Content-type: text/html; charset=utf-8\n\n")
os.execute('mtxrun --script /var/â¦etcâ¦â)

I assume it would be simple to replace this with a few php lines,
but I do not know enough about php to do it myself.

Help appreciated!

Best wishes,
Taco





From adityam at umich.edu  Tue Jun 16 22:36:21 2020
From: adityam at umich.edu (Aditya Mahajan)
Date: Tue, 16 Jun 2020 16:36:21 -0400 (EDT)
Subject: [dev-context] Line endings with \starttypescript
Message-ID: <nycvar.YAK.7.77.987.2006161630580.1528@nqv-guvaxcnq>

Hi,

This question is motivated by a question of TeX.SE (https://tex.stackexchange.com/questions/549725/context-strange-issue-with-typescript).

Basically, the OP defined

\starttypescriptcollection[fira]
...
\stoptypescriptcollection

\setuphead[section][style={\switchtobodyfont[fira,sans]}]

\starttext
   \section{section 1}
   \section{section 2}
   \section{section 3}
\stoptext

and found that the first section was indented. As Wolfgang explained in a comment, this happens because of the newlines at the end of each \definesynonym in \starttypescriptcollection. Wolfgang also explained how to avoid this error.

I am wondering if it makes sense to change the definition of \starttypescriptcollection or \starttypescript so that newlines are automatically ignored (similar to \startsetups).

Aditya


From j.hagen at xs4all.nl  Wed Jun 17 08:52:42 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Wed, 17 Jun 2020 08:52:42 +0200
Subject: [dev-context] Line endings with \starttypescript
In-Reply-To: <nycvar.YAK.7.77.987.2006161630580.1528@nqv-guvaxcnq>
References: <nycvar.YAK.7.77.987.2006161630580.1528@nqv-guvaxcnq>
Message-ID: <150b1ffd-0f23-adf6-3f61-01f849aa06b3@xs4all.nl>

On 6/16/2020 10:36 PM, Aditya Mahajan wrote:
> Hi,
> 
> This question is motivated by a question of TeX.SE 
> (https://tex.stackexchange.com/questions/549725/context-strange-issue-with-typescript). 
> 
> 
> Basically, the OP defined
> 
> \starttypescriptcollection[fira]
> ...
> \stoptypescriptcollection
> 
> \setuphead[section][style={\switchtobodyfont[fira,sans]}]
> 
> \starttext
>  Â  \section{section 1}
>  Â  \section{section 2}
>  Â  \section{section 3}
> \stoptext
> 
> and found that the first section was indented. As Wolfgang explained in 
> a comment, this happens because of the newlines at the end of each 
> \definesynonym in \starttypescriptcollection. Wolfgang also explained 
> how to avoid this error.
> 
> I am wondering if it makes sense to change the definition of 
> \starttypescriptcollection or \starttypescript so that newlines are 
> automatically ignored (similar to \startsetups).
could be but not watertight ... i'll send you some test

anyway, locally initializing a font is a bad idea, and there's a warning 
on the console about it ... one can say

\usebodyfont[fira,sans]

at the top and get it predefined

Hans



-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From wolfgang.schuster.lists at gmail.com  Mon Jun 22 22:22:31 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 22 Jun 2020 22:22:31 +0200
Subject: [dev-context] strc-itm.mklx: \startspecialitemgroupitem
Message-ID: <ee499597-9691-7203-3d3c-2acb754de70e@gmail.com>

Hi,

the \startspecialitemgroupitem command lacks a entry for \txt.

A new entry on line 1324 is needed:

\letvalue{\??itemgroupstart\v!item}\strc_itemgroups_start_do_item
\letvalue{\??itemgroupstart\v!sub }\strc_itemgroups_start_subitem
\letvalue{\??itemgroupstart\v!sym }\strc_itemgroups_start_symbol
\letvalue{\??itemgroupstart\v!ran }\strc_itemgroups_start_edge
\letvalue{\??itemgroupstart\v!its }\strc_itemgroups_start_items
\letvalue{\??itemgroupstart\v!mar }\strc_itemgroups_start_margin
+\letvalue{\??itemgroupstart\v!txt }\strc_itemgroups_start_text

Wolfgang


From wolfgang.schuster.lists at gmail.com  Mon Jun 22 22:28:30 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 22 Jun 2020 22:28:30 +0200
Subject: [dev-context] strc-itm.mklx: Interface check
Message-ID: <8620e440-ba59-7cf0-a8eb-a9e1f34eeeaa@gmail.com>

Hi,

the check for the current interface on line 1596 doesn't work because it 
uses the undefined \v!english variable which should be \s!english.

To ensure commands like \sym work after the fix a few synonyms have to 
be added to \itemgroupcommands.

Line 1579 ff:

\appendtoks
 Â Â Â  \let\itemÂ Â Â Â Â Â Â Â Â Â Â  \strc_itemgroups_start_do_item
+Â Â  \let\subÂ Â Â Â Â Â Â Â Â Â Â Â  \strc_itemgroups_start_subitem
+Â Â  \let\symÂ Â Â Â Â Â Â Â Â Â Â Â  \strc_itemgroups_start_symbol
+Â Â  \let\ranÂ Â Â Â Â Â Â Â Â Â Â Â  \strc_itemgroups_start_edge
+Â Â  \let\itsÂ Â Â Â Â Â Â Â Â Â Â Â  \strc_itemgroups_start_items
+Â Â  \let\marÂ Â Â Â Â Â Â Â Â Â Â Â  \strc_itemgroups_start_margin
 Â Â Â  \let\noitemÂ Â Â Â Â Â Â Â Â  \strc_itemgroups_start_no_item
 Â Â Â  \let\itmÂ Â Â Â Â Â Â Â Â Â Â Â  \strc_itemgroups_start_do_item
 Â Â Â  \let\butÂ Â Â Â Â Â Â Â Â Â Â Â  \strc_itemgroups_start_button
 Â Â Â  \let\nopÂ Â Â Â Â Â Â Â Â Â Â Â  \strc_itemgroups_start_dummy
 Â Â Â  \let\txtÂ Â Â Â Â Â Â Â Â Â Â Â  \strc_itemgroups_start_text
 Â Â Â  \let\headÂ Â Â Â Â Â Â Â Â Â Â  \strc_itemgroups_head
 Â Â Â  \let\headsymÂ Â Â Â Â Â Â Â  \strc_itemgroups_start_head_sym
 Â Â Â  \let\startitemÂ Â Â Â Â Â  \startitemgroupitem
 Â Â Â  \let\stopitemÂ Â Â Â Â Â Â  \stopitemgroupitem
 Â Â Â  \let\startheadÂ Â Â Â Â Â  \startitemgrouphead
 Â Â Â  \let\stopheadÂ Â Â Â Â Â Â  \stopitemgroupitemhead
 Â Â Â  \let\startspecialitem\startspecialitemgroupitem
 Â Â Â  \let\stopspecialitem \stopspecialitemgroupitem
\to \itemgroupcommands

-\ifx\currentinterface \v!english \else
+\ifx\currentinterface\s!english \else

Wolfgang


From j.hagen at xs4all.nl  Tue Jun 23 08:45:56 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Tue, 23 Jun 2020 08:45:56 +0200
Subject: [dev-context] strc-itm.mklx: \startspecialitemgroupitem
In-Reply-To: <ee499597-9691-7203-3d3c-2acb754de70e@gmail.com>
References: <ee499597-9691-7203-3d3c-2acb754de70e@gmail.com>
Message-ID: <1c8b8c41-c187-8e27-7855-43908321c530@xs4all.nl>

On 6/22/2020 10:22 PM, Wolfgang Schuster wrote:
> Hi,
> 
> the \startspecialitemgroupitem command lacks a entry for \txt.
> 
> A new entry on line 1324 is needed:
> 
> \letvalue{\??itemgroupstart\v!item}\strc_itemgroups_start_do_item
> \letvalue{\??itemgroupstart\v!sub }\strc_itemgroups_start_subitem
> \letvalue{\??itemgroupstart\v!sym }\strc_itemgroups_start_symbol
> \letvalue{\??itemgroupstart\v!ran }\strc_itemgroups_start_edge
> \letvalue{\??itemgroupstart\v!its }\strc_itemgroups_start_items
> \letvalue{\??itemgroupstart\v!mar }\strc_itemgroups_start_margin
> +\letvalue{\??itemgroupstart\v!txt }\strc_itemgroups_start_text
i'll patch it (both mails)

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From modules at contextgarden.net  Tue Jun 23 19:51:37 2020
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Tue, 23 Jun 2020 19:51:37 +0200
Subject: [dev-context] CGModules update: vim syntax highlighting version
 2020.06.23 published.
Message-ID: <20200623175137.8CD13185046@zapf.ntg.nl>

Aditya Mahajan submitted an update to the

               vim syntax highlighting

package.

Version number: 2020.06.23
License type: BSD License (simplified)
Wants to be in ConTeXt distribution: yes
Wants to be synced with CTAN: yes

Summary description: This module uses Vim editor's syntax files to syntax highlight verbatim code in ConTeXt

Announcement text:
----------------------------------------------------------------------

This is a bug-fix release with mutliple minor bugfixes:

* Improvement in how catcodes are set internally. This ensures that
  space gets exported correctly in XML. Partially resolves #34.

* Bugfix so that names of colors don't leak across different
  colorschemes. Closes #37.

* Improved documentation. Added documentation of colorscheme and added a 
  TOC to READMEs.

----------------------------------------------------------------------


From modules at contextgarden.net  Thu Jun 25 17:59:16 2020
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Thu, 25 Jun 2020 17:59:16 +0200
Subject: [dev-context] CGModules update: vim syntax highlighting version
 2020.06.25 published.
Message-ID: <20200625155916.77ABF185154@zapf.ntg.nl>

Aditya Mahajan submitted an update to the

               vim syntax highlighting

package.

Version number: 2020.06.25
License type: BSD License (simplified)
Wants to be in ConTeXt distribution: yes
Wants to be synced with CTAN: yes

Summary description: This module uses Vim editor's syntax files to syntax highlight verbatim code in ConTeXt

Announcement text:
----------------------------------------------------------------------

This is a bug-fix of the previous bug-fix

The previous fix vim-2020.06.23 inadventently introduced a bug. The name of the
color gets stored as a macro rather than the expanded value. Added an
explicit `\expand` fixed this.

----------------------------------------------------------------------


From modules at contextgarden.net  Tue Jun 30 07:02:59 2020
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Tue, 30 Jun 2020 07:02:59 +0200
Subject: [dev-context] CGModules update: Filter version 2020.06.29 published.
Message-ID: <20200630050259.080361853B3@zapf.ntg.nl>

Aditya Mahajan submitted an update to the

               Filter

package.

Version number: 2020.06.29
License type: BSD License (simplified)
Wants to be in ConTeXt distribution: yes
Wants to be synced with CTAN: yes

Summary description: A module to run external programs on the contents of start-stop evironment

Announcement text:
----------------------------------------------------------------------

This release adds support for XML export. When export is enabled, e.g., using 

    \setupbackend[export=yes]

then 

    \defineexternalfilter[whatever][....]
    \startwhatever
    ...
    \stopextwhatever

is exported as

    <externalfilter detail="whatever">
    ...
    </externalfilter>

And, 

    \inlinewhatever{...}

is exported as

    <inlineexternalfilter detail="whatever">...</inlineexternalfilter>

This is mainly a feature enhancement to support the XML export for the vim
module, but might be useful in its own right.

----------------------------------------------------------------------


From modules at contextgarden.net  Tue Jun 30 07:03:16 2020
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Tue, 30 Jun 2020 07:03:16 +0200
Subject: [dev-context] CGModules update: vim syntax highlighting version
 2020.06.29 published.
Message-ID: <20200630050316.853F91853B7@zapf.ntg.nl>

Aditya Mahajan submitted an update to the

               vim syntax highlighting

package.

Version number: 2020.06.29
License type: BSD License (simplified)
Wants to be in ConTeXt distribution: yes
Wants to be synced with CTAN: yes

Summary description: This module uses Vim editor's syntax files to syntax highlight verbatim code in ConTeXt

Announcement text:
----------------------------------------------------------------------

This is a major release that adds support for XML export. Many thanks to
Christoph HintermÃÂÃÂ¼ller for the initial implementation and extensive
brainstorming and testing. 

When export is enabled, e.g., using 

    \setupbackend[export=yes]

then 

    \definevimtyping[CODE][syntax=..., alternative=colorscheme]
    \startCODE
    ...
    \stopextCODE

is exported as

    <vimtyping detail="colorscheme">
    ...
    </vimtyping>

And, 

    \inlineCODE{...}

is exported as

    <inlinevimtyping detail="colorscheme">...</inlinevimtyping>

Each line is wrapped inside a `<verbatimline>...</verbatimline>` and each
syntax group is wrapped inside `<syntaxgroup
detail="vim....">...</syntaxgroup>`. See the updated documentation for
details.

The module ships with a default CSS file which can be included as

    \setupexport[cssfile=\vimtypingcssfile]

This CSS file tries to mimic the default PDF output. If you want to tweak the
output then it is recommended that you copy the default CSS file and modify it
as appropriate.

----------------------------------------------------------------------


From modules at contextgarden.net  Fri Aug  7 13:40:09 2020
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Fri, 7 Aug 2020 13:40:09 +0200
Subject: [dev-context] CGModules update: Letter module version 2020.08.07
 published.
Message-ID: <20200807114010.014B11A7C78@zapf.ntg.nl>

Wolfgang Schuster submitted an update to the

               Letter module

package.

Version number: 2020.08.07
License type: GNU General Public License
Wants to be in ConTeXt distribution: no
Wants to be synced with CTAN: no

Summary description: Writing letters with ConTeXt.

Announcement text:
----------------------------------------------------------------------

Changed the paragraphs environment to work in the intended way with a current installation.

----------------------------------------------------------------------


From wolfgang.schuster.lists at gmail.com  Sun Aug 16 11:16:58 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sun, 16 Aug 2020 11:16:58 +0200
Subject: [dev-context] strc-itm.mkvi|mkxl
Message-ID: <699ba4c3-74d5-603a-ded1-043457056d20@gmail.com>

Hi,

missing replacement of \!!minus

\def\strc_itemgroups_set_text_item_distance_indeed
 Â  {\assignvalue
 Â Â Â Â  \m_strc_itemgroups_text_distance
 Â Â Â Â  \m_strc_itemgroups_text_distance
 Â Â Â Â  {.5\interwordspace\s!plus.5\emwidth}%
 Â Â Â Â  {\interwordspaceÂ  \s!plusÂ  \emwidth}%
-Â Â Â  {\emwidthÂ Â Â Â Â Â Â Â  \s!plus \interwordstretch\!!minus\interwordshrink}}
+Â Â Â  {\emwidthÂ Â Â Â Â Â Â Â  \s!plus \interwordstretch\s!minus\interwordshrink}}

Wolfgang


From taco at elvenkind.com  Fri Aug 28 21:28:45 2020
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 28 Aug 2020 21:28:45 +0200
Subject: [dev-context] \placenamedfloat
Message-ID: <61D0B2AC-5AB6-4464-A5DE-AEE02D96460B@elvenkind.com>

Hi,

In the current version, \placenamedfloat is broken because of a mismatch between lpeg and the user input. 

This should work but doesnât:

\placefigure[somewhere:delta][whatever]{delta}{}
\placenamedfloat[figure][delta]

Whereas this works but shouldnât:

\placefigure[somewheredelta][whatever]{delta}{}
\placenamedfloat[figure][delta]

Also, this new black-magic-y float stuff is not documented. Since it is experimental I get that, but it seems very handy to me.

Best wishes,
Taco



From wolfgang.schuster.lists at gmail.com  Mon Sep  7 22:11:30 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 7 Sep 2020 22:11:30 +0200
Subject: [dev-context] Reset breakpoints for verbatim
Message-ID: <64729e48-b8a5-73ad-ce02-eb9c97994bc8@gmail.com>

Hi Hans,

in verbatim mode a reset for breakpoints is missing.

\setbreakpoints[compound]

%\appendtoks
%Â  \resetbreakpoints
%\to \everyinitializeverbatim

\starttext

\starttyping
xxx(aaaa)
\stoptyping

\stoptext


buff-ver.mkiv|mkxl (line 38ff):

\appendtoks
 Â Â Â  \the\everyresettypesetting
 Â Â Â  \resetfontfeature
 Â Â Â  \resetcharacterspacing
+Â Â  \resetbreakpoints
\to \everyinitializeverbatim


Wolfgang


From taco at elvenkind.com  Mon Sep  7 22:35:35 2020
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 7 Sep 2020 22:35:35 +0200
Subject: [dev-context] Tracing outputbox in lmtx
Message-ID: <85BBF0C9-B9E2-4F39-9A15-A364918416F7@elvenkind.com>

Hi,

Not really a bug, but: in \tracingall, traditional engines also dump the contents of the \outputbox to the log. This is currently missing in lmtx, and I would really like it back ;)

Taco

From taco at elvenkind.com  Mon Sep  7 22:47:21 2020
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 7 Sep 2020 22:47:21 +0200
Subject: [dev-context] Dumping the equivalence table
Message-ID: <7A6D40D7-45A0-4223-9708-18F550DA72AD@elvenkind.com>

Hi,

A while ago I posted a trick to Paul Mazaitis about dumping the hash table using tex.hashtokens(). Recently I noticed that while the command works in lmtx, it seems to miss entries, making it somewhat useless for what we tried to do (compare the hash before and after a complicated command like \definefloat. 

I have no idea what could be wrong, except perhaps it misses chained hash entries or something?

Taco

From wolfgang.schuster.lists at gmail.com  Tue Sep  8 20:24:53 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Tue, 8 Sep 2020 20:24:53 +0200
Subject: [dev-context] \grabuntil
Message-ID: <ea8976b8-12e4-8bc6-83da-0e6cda519ced@gmail.com>

Hi,

the \grabuntil command fails when it uses \begincsname to create the 
delimiter.

\unprotect

\protected\def\grabuntil#1%
 Â %{\expandafter\syst_helpers_grab\expandafter{\begincsname#1\endcsname}}
 Â  {\expandafter\syst_helpers_grab\expandafter{\csname#1\endcsname}}

\protect

\def\starttest{\grabuntil{stoptest}\quotation}

\starttext

\starttest
xxx
\stoptest

\stoptext

Wolfgang


From modules at contextgarden.net  Tue Sep 15 21:32:36 2020
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Tue, 15 Sep 2020 21:32:36 +0200
Subject: [dev-context] CGModules update: vim syntax highlighting version
 2020.09.15 published.
Message-ID: <20200915193236.795BC1A8E3D@zapf.ntg.nl>

Aditya Mahajan submitted an update to the

               vim syntax highlighting

package.

Version number: 2020.09.15
License type: BSD License (simplified)
Wants to be in ConTeXt distribution: yes
Wants to be synced with CTAN: yes

Summary description: This module uses Vim editor's syntax files to syntax highlight verbatim code in ConTeXt

Announcement text:
----------------------------------------------------------------------

Bugfix release to fix a bug introduced by a change in how ConTeXt handles
hyphenation. 

See https://mailman.ntg.nl/pipermail/ntg-context/2020/099435.html for bug
report and the fix

----------------------------------------------------------------------


From tomas.hala at mendelu.cz  Thu Sep 17 20:15:28 2020
From: tomas.hala at mendelu.cz (Tomas Hala)
Date: Thu, 17 Sep 2020 20:15:28 +0200
Subject: [dev-context] Running lists
Message-ID: <20200917181528.GB29800@akela.mendelu.cz>

Hi all,

playing with itemize environment (reverberations of our discussion with
Wolfgang at the meeting) I came across the wrong settings of running lists:

\starttext
%\startitemize[a]
\startitemize[a,text]
\item xxx
\item yyy
\stopitemize
\stoptext

gives items in the running list with both parentheses and moreover a dot.
For English (which is a default language) items letters (and figures as
well) should be only in parentheses and without a dot.

Wolfgang confirmed that there is no option to disable the stopper for
running items only and proposed to add additional values to the placestopper key, e.g.

Â Â Â  \setupitemize [each] [placestopper=yes|no|inline|display]

Best wishes,

TomÃ¡Å¡

From j.hagen at xs4all.nl  Thu Sep 17 20:35:33 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Thu, 17 Sep 2020 20:35:33 +0200
Subject: [dev-context] Running lists
In-Reply-To: <20200917181528.GB29800@akela.mendelu.cz>
References: <20200917181528.GB29800@akela.mendelu.cz>
Message-ID: <e09e0aad-a748-db25-9656-dfb0bc11dd96@xs4all.nl>

On 9/17/2020 8:15 PM, Tomas Hala wrote:
> Hi all,
> 
> playing with itemize environment (reverberations of our discussion with
> Wolfgang at the meeting) I came across the wrong settings of running lists:
> 
> \starttext
> %\startitemize[a]
> \startitemize[a,text]
> \item xxx
> \item yyy
> \stopitemize
> \stoptext
> 
> gives items in the running list with both parentheses and moreover a dot.
> For English (which is a default language) items letters (and figures as
> well) should be only in parentheses and without a dot.
> 
> Wolfgang confirmed that there is no option to disable the stopper for
> running items only and proposed to add additional values to the placestopper key, e.g.
> 
>  Â Â Â  \setupitemize [each] [placestopper=yes|no|inline|display]
sure, as long as you wikify it ... and use

 > \startitem xxx \stopitem
 > \startitem yyy \stopitem



-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From tomas.hala at mendelu.cz  Fri Sep 18 17:56:18 2020
From: tomas.hala at mendelu.cz (Tomas Hala)
Date: Fri, 18 Sep 2020 17:56:18 +0200
Subject: [dev-context] [NTG-context] update and meeting // towards 'in'
In-Reply-To: <216f58b1-6db4-17a6-df88-c331c73cb899@xs4all.nl>
References: <216f58b1-6db4-17a6-df88-c331c73cb899@xs4all.nl>
Message-ID: <20200918155618.GA4621@akela.mendelu.cz>

Hi Hans,

# We also considered that in order to enforce the use of si units the
# 'in' should go away but that has been postponed (it is anyway last
# in the checked keywords so has no overhead).

I do not remember details of the discussion about 'in' but I would like
to say that 'in' is quite important unit, especially for Americans.
We have to take into consideration that paper and other things are sold 
in inches in the USA and it is not very comfortable to recalculate it to the metric
system.

So I vote for keeping it forever, eg. till Americans will completely convert to SI.

Best wishes,

TomÃ¡Å¡


From j.hagen at xs4all.nl  Fri Sep 18 18:59:20 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Fri, 18 Sep 2020 18:59:20 +0200
Subject: [dev-context] [NTG-context] update and meeting // towards 'in'
In-Reply-To: <20200918155618.GA4621@akela.mendelu.cz>
References: <216f58b1-6db4-17a6-df88-c331c73cb899@xs4all.nl>
 <20200918155618.GA4621@akela.mendelu.cz>
Message-ID: <97896039-b8c9-4c0b-f1ed-ec87990d7abf@xs4all.nl>

On 9/18/2020 5:56 PM, Tomas Hala wrote:
> Hi Hans,
> 
> # We also considered that in order to enforce the use of si units the
> # 'in' should go away but that has been postponed (it is anyway last
> # in the checked keywords so has no overhead).
> 
> I do not remember details of the discussion about 'in' but I would like
> to say that 'in' is quite important unit, especially for Americans.
> We have to take into consideration that paper and other things are sold
> in inches in the USA and it is not very comfortable to recalculate it to the metric
> system.

We can let it depend on the outcome of the elections and foreign 
politics ... we can use the unit as bargain option (and Alan uses thise 
french units anyway).

> So I vote for keeping it forever, eg. till Americans will completely convert to SI.
It was a joke (seems you didn't pay attention when arthur and I 
discussed it the break ... we even mentioned 'meters' as possible units 
and dropping cm and mm). Dropping nd and nc is because they were never 
accepted as standard.

An inch is official tex and we're tex aren't we? But in luametatex the 
inch is at the bottom of the scanned unit list .. you can guess the 
order that we like most; scanning for in takes 25% more time than for mm 
but only Idris will notice that (and when he used "truein" it will be 
twice as slow).

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From j.hagen at xs4all.nl  Fri Sep 18 20:15:04 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Fri, 18 Sep 2020 20:15:04 +0200
Subject: [dev-context] [NTG-context] update and meeting // towards 'in'
In-Reply-To: <20200918155618.GA4621@akela.mendelu.cz>
References: <216f58b1-6db4-17a6-df88-c331c73cb899@xs4all.nl>
 <20200918155618.GA4621@akela.mendelu.cz>
Message-ID: <ddf0f612-a390-d4ad-9205-ea3cbc265119@xs4all.nl>

On 9/18/2020 5:56 PM, Tomas Hala wrote:

> So I vote for keeping it forever, eg. till Americans will completely convert to SI.

btw 1: a stronger argument is that we're stuck for ever with dots per inch

btw 2: if you look in page-lay you will find plenty of paper sizes that 
use "in" dimensions .. of course no one might use these, but still ...

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From braslau.list at comcast.net  Sat Sep 19 22:33:53 2020
From: braslau.list at comcast.net (Alan Braslau)
Date: Sat, 19 Sep 2020 14:33:53 -0600
Subject: [dev-context] [NTG-context] update and meeting // towards 'in'
In-Reply-To: <97896039-b8c9-4c0b-f1ed-ec87990d7abf@xs4all.nl>
References: <216f58b1-6db4-17a6-df88-c331c73cb899@xs4all.nl>
 <20200918155618.GA4621@akela.mendelu.cz>
 <97896039-b8c9-4c0b-f1ed-ec87990d7abf@xs4all.nl>
Message-ID: <20200919143353.33935a7c@poo.hsd1.co.comcast.net>

On Fri, 18 Sep 2020 18:59:20 +0200
Hans Hagen <j.hagen at xs4all.nl> wrote:

> On 9/18/2020 5:56 PM, Tomas Hala wrote:
> > Hi Hans,
> > 
> > # We also considered that in order to enforce the use of si units the
> > # 'in' should go away but that has been postponed (it is anyway last
> > # in the checked keywords so has no overhead).
> > 
> > I do not remember details of the discussion about 'in' but I would like
> > to say that 'in' is quite important unit, especially for Americans.
> > We have to take into consideration that paper and other things are sold
> > in inches in the USA and it is not very comfortable to recalculate it to the metric
> > system.  
> 
> We can let it depend on the outcome of the elections and foreign 
> politics ... we can use the unit as bargain option (and Alan uses thise 
> french units anyway).
> 
> > So I vote for keeping it forever, eg. till Americans will completely convert to SI.  
> It was a joke (seems you didn't pay attention when arthur and I 
> discussed it the break ... we even mentioned 'meters' as possible units 
> and dropping cm and mm). Dropping nd and nc is because they were never 
> accepted as standard.
> 
> An inch is official tex and we're tex aren't we? But in luametatex the 
> inch is at the bottom of the scanned unit list .. you can guess the 
> order that we like most; scanning for in takes 25% more time than for mm 
> but only Idris will notice that (and when he used "truein" it will be 
> twice as slow).

I had a colleague in France who liked doing all of his calculations in meters. The problem arose when he wrote a program that needed to take high powers of quantities whose natural units were rather nanometers or even Angstroms. This quickly led to mathematical underflows, solved by putting everything into double precision or better (this was many years ago, when processors and compilers had more limitations).

I vote to eliminate the pt and the bp. We could introduce the Covid, the diameter of the viral capsid.

Alan

From taco at elvenkind.com  Mon Sep 21 14:44:27 2020
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 21 Sep 2020 14:44:27 +0200
Subject: [dev-context] [NTG-context] update and meeting
In-Reply-To: <216f58b1-6db4-17a6-df88-c331c73cb899@xs4all.nl>
References: <216f58b1-6db4-17a6-df88-c331c73cb899@xs4all.nl>
Message-ID: <04EF99A2-414B-4B48-8A94-E56323383ECF@elvenkind.com>

Hi Hans,

> On 15 Sep 2020, at 18:44, Hans Hagen <j.hagen at xs4all.nl> wrote:
> 
> (2) Another change is in the \startdocument mechanism. This (already old and rusted) wrapper runs on top of variables but we think no one knows (or uses) that. So, it now is a real wrapper with inheritance and such. It is dedicated to Tomas Hala who had to struggle with the old one but still gave a presentation using it. Here's an example:
> 
> \definedocument[thesis]
> 
> \setupdocument[a=b,e=f]
> \setupdocument[thesis][a=x,c=d]
> 
> \startsetups[document:start]
>    START
> \stopsetups
> 
> \startsetups[thesis:stop]
>    STOP
> \stopsetups
> 
> \startthesis
> 
>    (\currentdocument/a): \documentvariable{a}\par
>    (\currentdocument/c): \documentvariable{c}\par
>    (\currentdocument/e): \documentvariable{e}\par
> 
> \stopthesis

The auto-inheritance of the setups does not work yet, because the \definedocument[thesis] does not
set up local version of the before= and after= keys of \startthesis. 

\definedocument (re)defines the value of the actual setup âthesis:startâ correctly to inherit the 
parentâs \directsetuo, but because the actual before and after keys are inherited from the (document)
parent as well, the effect on \startthesis still remains equivalent to this:

   \setupdocument
     [thesis]
     [before=\directsetup{document:start},
      after=\directsetup{document:stop}]

Best wishes,
Taco


From wolfgang.schuster.lists at gmail.com  Mon Sep 21 16:31:06 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 21 Sep 2020 16:31:06 +0200
Subject: [dev-context] [NTG-context] update and meeting
In-Reply-To: <04EF99A2-414B-4B48-8A94-E56323383ECF@elvenkind.com>
References: <216f58b1-6db4-17a6-df88-c331c73cb899@xs4all.nl>
 <04EF99A2-414B-4B48-8A94-E56323383ECF@elvenkind.com>
Message-ID: <76dc16c4-0947-8e76-4e97-182528105ae3@gmail.com>

Taco Hoekwater schrieb am 21.09.2020 um 14:44:
> Hi Hans,
>
>> On 15 Sep 2020, at 18:44, Hans Hagen <j.hagen at xs4all.nl> wrote:
>>
>> (2) Another change is in the \startdocument mechanism. This (already old and rusted) wrapper runs on top of variables but we think no one knows (or uses) that. So, it now is a real wrapper with inheritance and such. It is dedicated to Tomas Hala who had to struggle with the old one but still gave a presentation using it. Here's an example:
>>
>> \definedocument[thesis]
>>
>> \setupdocument[a=b,e=f]
>> \setupdocument[thesis][a=x,c=d]
>>
>> \startsetups[document:start]
>>     START
>> \stopsetups
>>
>> \startsetups[thesis:stop]
>>     STOP
>> \stopsetups
>>
>> \startthesis
>>
>>     (\currentdocument/a): \documentvariable{a}\par
>>     (\currentdocument/c): \documentvariable{c}\par
>>     (\currentdocument/e): \documentvariable{e}\par
>>
>> \stopthesis
> The auto-inheritance of the setups does not work yet, because the \definedocument[thesis] does not
> set up local version of the before= and after= keys of \startthesis.
>
> \definedocument (re)defines the value of the actual setup âthesis:startâ correctly to inherit the
> parentâs \directsetuo, but because the actual before and after keys are inherited from the (document)
> parent as well, the effect on \startthesis still remains equivalent to this:
>
>     \setupdocument
>       [thesis]
>       [before=\directsetup{document:start},
>        after=\directsetup{document:stop}]

So we need something like this:

\appendtoks
\setexpandeddocumentparameter\c!before{\noexpand\directsetup{\currentdocument:\v!start}}%
 Â  \setexpandeddocumentparameter\c!after 
{\noexpand\directsetup{\currentdocument:\v!stop }}%
\to \everydefinedocument

Wolfgang


From j.hagen at xs4all.nl  Mon Sep 21 18:41:13 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Mon, 21 Sep 2020 18:41:13 +0200
Subject: [dev-context] [NTG-context] update and meeting
In-Reply-To: <76dc16c4-0947-8e76-4e97-182528105ae3@gmail.com>
References: <216f58b1-6db4-17a6-df88-c331c73cb899@xs4all.nl>
 <04EF99A2-414B-4B48-8A94-E56323383ECF@elvenkind.com>
 <76dc16c4-0947-8e76-4e97-182528105ae3@gmail.com>
Message-ID: <d4070fda-4eb8-93a5-5dc0-70fce00525bd@xs4all.nl>

On 9/21/2020 4:31 PM, Wolfgang Schuster wrote:
> Taco Hoekwater schrieb am 21.09.2020 um 14:44:
>> Hi Hans,
>>
>>> On 15 Sep 2020, at 18:44, Hans Hagen <j.hagen at xs4all.nl> wrote:
>>>
>>> (2) Another change is in the \startdocument mechanism. This (already 
>>> old and rusted) wrapper runs on top of variables but we think no one 
>>> knows (or uses) that. So, it now is a real wrapper with inheritance 
>>> and such. It is dedicated to Tomas Hala who had to struggle with the 
>>> old one but still gave a presentation using it. Here's an example:
>>>
>>> \definedocument[thesis]
>>>
>>> \setupdocument[a=b,e=f]
>>> \setupdocument[thesis][a=x,c=d]
>>>
>>> \startsetups[document:start]
>>> Â Â Â  START
>>> \stopsetups
>>>
>>> \startsetups[thesis:stop]
>>> Â Â Â  STOP
>>> \stopsetups
>>>
>>> \startthesis
>>>
>>> Â Â Â  (\currentdocument/a): \documentvariable{a}\par
>>> Â Â Â  (\currentdocument/c): \documentvariable{c}\par
>>> Â Â Â  (\currentdocument/e): \documentvariable{e}\par
>>>
>>> \stopthesis
>> The auto-inheritance of the setups does not work yet, because the 
>> \definedocument[thesis] does not
>> set up local version of the before= and after= keys of \startthesis.
>>
>> \definedocument (re)defines the value of the actual setup 
>> âthesis:startâ correctly to inherit the
>> parentâs \directsetuo, but because the actual before and after keys 
>> are inherited from the (document)
>> parent as well, the effect on \startthesis still remains equivalent to 
>> this:
>>
>> Â Â Â  \setupdocument
>> Â Â Â Â Â  [thesis]
>> Â Â Â Â Â  [before=\directsetup{document:start},
>> Â Â Â Â Â Â  after=\directsetup{document:stop}]
> 
> So we need something like this:
> 
> \appendtoks
> \setexpandeddocumentparameter\c!before{\noexpand\directsetup{\currentdocument:\v!start}}% 
> 
>  Â  \setexpandeddocumentparameter\c!after 
> {\noexpand\directsetup{\currentdocument:\v!stop }}%
> \to \everydefinedocument
the reason i didn't make setups inheritable was mostly that I can't 
oversee the intensions (i played a bit with it; like defining setups as 
part of define so that we can have inherited setups) ... for instance 
what when we have a third level (say document -> thesis -> mythesis .. 
and we want to use the thesis setups)

i don't care what solution si chose as long as it doesn't break anything 
at my end

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Mon Sep 21 19:57:31 2020
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 21 Sep 2020 19:57:31 +0200
Subject: [dev-context] [NTG-context] update and meeting
In-Reply-To: <d4070fda-4eb8-93a5-5dc0-70fce00525bd@xs4all.nl>
References: <d4070fda-4eb8-93a5-5dc0-70fce00525bd@xs4all.nl>
Message-ID: <F9CF34A8-3377-4295-AEFD-1CE68ECDC2BC@elvenkind.com>

Hi,

> On 21 Sep 2020, at 18:41, Hans Hagen <j.hagen at xs4all.nl> wrote:
> the reason i didn't make setups inheritable was mostly that I can't oversee the intensions (i played a bit with it; like defining setups as part of define so that we can have inherited setups) ... for instance what when we have a third level (say document -> thesis -> mythesis .. and we want to use the thesis setups)

I think I would prefer a system where

 \definedocument[thesis]

Automatically gets default (but not filled in) setups thesis:start and thesis:stop in before= and after=, but

 \definedocument[thesis][document]

Would inherit the document:start and document:stop, and a thesis:stop and thesis:start in the case of a following

 \definedocument[mythesis][thesis]

As this matches closely to how parents work in other \define calls. I find the current situation (with an implied â[document]â parent) a tad confusing. But I am nitpicking :)


Best wishes,
Taco



> 
> i don't care what solution si chose as long as it doesn't break anything at my end
> 
> Hans
> 
> -----------------------------------------------------------------
>                                         Hans Hagen | PRAGMA ADE
>             Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>      tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
> -----------------------------------------------------------------


From tomas.hala at mendelu.cz  Tue Nov  3 18:21:25 2020
From: tomas.hala at mendelu.cz (Tomas Hala)
Date: Tue, 3 Nov 2020 18:21:25 +0100
Subject: [dev-context] \setuplanguage
Message-ID: <20201103172125.GA17649@akela.mendelu.cz>

Hi all, 

recently, in the ConTeXt list someone asked how to install Esperanto.

I wanted to advise him, so I tried to do it on my computer and
I came across the following problem:

According to the wiki documentation (https://wiki.contextgarden.net/Command/setuplanguage), 
I should use "pattern=file" but neither file with full pathname, nor without works in the testing code below (TL2020). 
The only one way how to setup it is to use a language code.

Did I anything wrong, or is it only misdocumented on wiki? Or a feature not implemented yet?

Best wishes,

TomÃ¡Å¡

\starttext\hsize1dd
\installlanguage[eo][space=packed,state=start]
%\setuplanguage[eo][patterns=/usr/local/texlive/2020/texmf-dist/tex/context/patterns/mkiv/lang-cs.lua]  %  NO
%\setuplanguage[eo][patterns=lang-cs.lua]  % NO 
%\setuplanguage[eo][patterns=lang-cs]  % NO 
\setuplanguage[eo][patterns=cs]  % YES
\mainlanguage[eo]
\input capek-cz
\stoptext 


From taco at bittext.nl  Wed Nov  4 09:19:36 2020
From: taco at bittext.nl (Taco Hoekwater)
Date: Wed, 4 Nov 2020 09:19:36 +0100
Subject: [dev-context] [CG Wiki] \setuplanguage
In-Reply-To: <20201103172125.GA17649@akela.mendelu.cz>
References: <20201103172125.GA17649@akela.mendelu.cz>
Message-ID: <61028C89-2FD9-4A40-A298-ADA714446F72@bittext.nl>

Hi,

> On 3 Nov 2020, at 18:21, Tomas Hala <tomas.hala at mendelu.cz> wrote:
> 
> Hi all, 
> 
> recently, in the ConTeXt list someone asked how to install Esperanto.
> 
> I wanted to advise him, so I tried to do it on my computer and
> I came across the following problem:
> 
> According to the wiki documentation (https://wiki.contextgarden.net/Command/setuplanguage), 
> I should use "pattern=file" but neither file with full pathname, nor without works in the testing code below (TL2020). 
> The only one way how to setup it is to use a language code.
> 
> Did I anything wrong, or is it only misdocumented on wiki? Or a feature not implemented yet?

Looking at the ConTeXt source, I guess âfileâ is misleading here. It seems context always searches for lang-XX.lua, where the XX part is what you specify as value to the âpatternsâ argument.

Iâll make a note in the wiki page.

Taco

From tomas.hala at mendelu.cz  Wed Nov  4 21:14:56 2020
From: tomas.hala at mendelu.cz (Tomas Hala)
Date: Wed, 4 Nov 2020 21:14:56 +0100
Subject: [dev-context] [CG Wiki] \setuplanguage
In-Reply-To: <61028C89-2FD9-4A40-A298-ADA714446F72@bittext.nl>
References: <20201103172125.GA17649@akela.mendelu.cz>
 <61028C89-2FD9-4A40-A298-ADA714446F72@bittext.nl>
Message-ID: <20201104201456.GA17426@akela.mendelu.cz>

Thank you for this confirmation.

Should not be better to replace on the wiki "file" by "language code" in this case?

TomÃ¡Å¡

Wed, Nov 04, 2020 ve 09:19:36AM +0100 Taco Hoekwater napsal(a):

# Hi,
# 
# > On 3 Nov 2020, at 18:21, Tomas Hala <tomas.hala at mendelu.cz> wrote:
# > 
# > Hi all, 
# > 
# > recently, in the ConTeXt list someone asked how to install Esperanto.
# > 
# > I wanted to advise him, so I tried to do it on my computer and
# > I came across the following problem:
# > 
# > According to the wiki documentation (https://wiki.contextgarden.net/Command/setuplanguage), 
# > I should use "pattern=file" but neither file with full pathname, nor without works in the testing code below (TL2020). 
# > The only one way how to setup it is to use a language code.
# > 
# > Did I anything wrong, or is it only misdocumented on wiki? Or a feature not implemented yet?
# 
# Looking at the ConTeXt source, I guess âfileâ is misleading here. It seems context always searches for lang-XX.lua, where the XX part is what you specify as value to the âpatternsâ argument.
# 
# Iâll make a note in the wiki page.
# 
# Taco

                                         TomÃ¡Å¡ HÃ¡la
--------------------------------------------------------------------
Mendelova univerzita, ProvoznÄ ekonomickÃ¡ fakulta, Ãºstav informatiky
ZemÄdÄlskÃ¡ 1, CZ-613 00 Brno,  tel. +420 545 13 22 28
--------------------------------------------------------------------
http://akela.mendelu.cz/~thala

From wolfgang.schuster.lists at gmail.com  Wed Nov  4 21:19:41 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Wed, 4 Nov 2020 21:19:41 +0100
Subject: [dev-context] [CG Wiki] \setuplanguage
In-Reply-To: <20201104201456.GA17426@akela.mendelu.cz>
References: <20201103172125.GA17649@akela.mendelu.cz>
 <61028C89-2FD9-4A40-A298-ADA714446F72@bittext.nl>
 <20201104201456.GA17426@akela.mendelu.cz>
Message-ID: <a0488c6b-edda-7372-013e-ccf35745adcf@gmail.com>

Tomas Hala schrieb am 04.11.2020 um 21:14:
> Thank you for this confirmation.
>
> Should not be better to replace on the wiki "file" by "language code" in this case?

No because you don't have to use a language code for the name of the 
pattern file.

Wolfgang


From tomas.hala at mendelu.cz  Wed Nov  4 22:28:06 2020
From: tomas.hala at mendelu.cz (Tomas Hala)
Date: Wed, 4 Nov 2020 22:28:06 +0100
Subject: [dev-context] [CG Wiki] \setuplanguage
In-Reply-To: <a0488c6b-edda-7372-013e-ccf35745adcf@gmail.com>
References: <20201103172125.GA17649@akela.mendelu.cz>
 <61028C89-2FD9-4A40-A298-ADA714446F72@bittext.nl>
 <20201104201456.GA17426@akela.mendelu.cz>
 <a0488c6b-edda-7372-013e-ccf35745adcf@gmail.com>
Message-ID: <20201104212806.GC17426@akela.mendelu.cz>

And what else can I use instead of language codes?

It does not work with filenames and synonyms of language names are not permitted, too.

TomÃ¡Å¡

Wed, Nov 04, 2020 ve 09:19:41PM +0100 Wolfgang Schuster napsal(a):
# Tomas Hala schrieb am 04.11.2020 um 21:14:
# >Thank you for this confirmation.
# >
# >Should not be better to replace on the wiki "file" by "language code" in this case?
# 
# No because you don't have to use a language code for the name of the
# pattern file.
# 
# Wolfgang

From wolfgang.schuster.lists at gmail.com  Wed Nov  4 22:36:21 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Wed, 4 Nov 2020 22:36:21 +0100
Subject: [dev-context] [CG Wiki] \setuplanguage
In-Reply-To: <20201104212806.GC17426@akela.mendelu.cz>
References: <20201103172125.GA17649@akela.mendelu.cz>
 <61028C89-2FD9-4A40-A298-ADA714446F72@bittext.nl>
 <20201104201456.GA17426@akela.mendelu.cz>
 <a0488c6b-edda-7372-013e-ccf35745adcf@gmail.com>
 <20201104212806.GC17426@akela.mendelu.cz>
Message-ID: <2f56e653-5937-f012-fc4d-76e1a600518c@gmail.com>

Tomas Hala schrieb am 04.11.2020 um 22:28:
> And what else can I use instead of language codes?
>
> It does not work with filenames and synonyms of language names are not permitted, too.

The source for the wiki pages are the command definitions but there is 
only a limited number of arguments for each key. In a case like this a 
decision has to be made which argument is used for the pattern key and 
since the key loads a file with contains the argument as part of its 
name the entry is "patterns=FILE".

The same is the case for \usetypescriptfile and \usesymbol which also 
use FILE for the argument.

The reason why one uses "en", "agr" etc. as arguments for the pattern 
key is that the files use the language codes as part of the file name.

Wolfgang


From tomas.hala at mendelu.cz  Wed Nov  4 22:58:17 2020
From: tomas.hala at mendelu.cz (Tomas Hala)
Date: Wed, 4 Nov 2020 22:58:17 +0100
Subject: [dev-context] [CG Wiki] \setuplanguage
In-Reply-To: <2f56e653-5937-f012-fc4d-76e1a600518c@gmail.com>
References: <20201103172125.GA17649@akela.mendelu.cz>
 <61028C89-2FD9-4A40-A298-ADA714446F72@bittext.nl>
 <20201104201456.GA17426@akela.mendelu.cz>
 <a0488c6b-edda-7372-013e-ccf35745adcf@gmail.com>
 <20201104212806.GC17426@akela.mendelu.cz>
 <2f56e653-5937-f012-fc4d-76e1a600518c@gmail.com>
Message-ID: <20201104215817.GD17426@akela.mendelu.cz>

I have not hear about these limitations. Now I guess I get it. Thank you for
the explanation.

I wanted to read the documentation for commands \usetypescriptfile and
\usesymbol but it is not available via "Search Wiki" field in our garden.
Is it all right?

TomÃ¡Å¡ 

Wed, Nov 04, 2020 ve 10:36:21PM +0100 Wolfgang Schuster napsal(a):
# Tomas Hala schrieb am 04.11.2020 um 22:28:
# >And what else can I use instead of language codes?
# >
# >It does not work with filenames and synonyms of language names are not permitted, too.
# 
# The source for the wiki pages are the command definitions but there
# is only a limited number of arguments for each key. In a case like
# this a decision has to be made which argument is used for the
# pattern key and since the key loads a file with contains the
# argument as part of its name the entry is "patterns=FILE".
# 
# The same is the case for \usetypescriptfile and \usesymbol which
# also use FILE for the argument.
# 
# The reason why one uses "en", "agr" etc. as arguments for the
# pattern key is that the files use the language codes as part of the
# file name.
# 
# Wolfgang

From oinos at gmx.es  Fri Nov  6 23:57:22 2020
From: oinos at gmx.es (Pablo Rodriguez)
Date: Fri, 6 Nov 2020 23:57:22 +0100
Subject: [dev-context] typo in command
Message-ID: <660de692-af0c-b89e-4898-7bbca1245d48@gmx.es>

Hans,

Iâm afraid that strc-sec.mkxl contains a typo in latest LMTX:

--- old/strc-sec.mkxl	2020-11-06 21:16:06.701643562 +0100
+++ new/strc-sec.mkxl	2020-11-06 23:47:40.673938469 +0100
@@ -1144,7 +1144,7 @@
   {\ifconditional\c_strc_sectioning_empty
      % this needs checking
      \penalty\plustenthousand
-     \vskivskip-\lineheight
+     \vskip-\lineheight
      \kern\zeropoint
      \prevdepth\strutdepth
    \fi}

Otherwise, ConTeXt complains about undefined \vskivskip.

I hope it helps,

Pablo
--
http://www.ousia.tk

From wolfgang.schuster.lists at gmail.com  Sat Nov  7 18:09:06 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sat, 7 Nov 2020 18:09:06 +0100
Subject: [dev-context] symb-ini.mkxl: \doifelsesymboldefined
Message-ID: <9a06b701-21e5-dc1c-5bb4-9a6dd93bdf99@gmail.com>

Hi Hans,

the \orelse branch can't be used because \c_symb_found still has the 
same value.

Wolfgang

\permanent\protected\def\doifelsesymboldefined#1%
 Â  {\begingroup
 Â Â  \edef\currentsymbol{#1}%
 Â Â  \let\symb_fetch\symb_fetch_first
 Â Â  \setfalse\c_symb_found
 Â Â  \the\t_symb_setups
 Â Â  \ifconditional\c_symb_found
 Â Â Â Â  \endgroup\expandafter\firstoftwoarguments
-Â  \orelse\ifconditional\c_symb_found
-Â Â Â  \symb_fetch_second\currentsymbol
-Â Â Â  \endgroup\expandafter\firstoftwoarguments
-Â  \else
-Â Â Â  \symb_fetch_second\currentsymbol
-Â Â Â  \endgroup\expandafter\secondoftwoarguments
+Â  \else
+Â Â Â  \symb_fetch_second\currentsymbol
+Â Â Â  \ifconditional\c_symb_found
+Â Â Â Â Â  \endgroup\doubleexpandafter\firstoftwoarguments
+Â Â Â  \else
+Â Â Â Â Â  \endgroup\doubleexpandafter\secondoftwoarguments
+Â Â Â  \fi
 Â Â  \fi}


From wolfgang.schuster.lists at gmail.com  Mon Nov  9 22:48:15 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 9 Nov 2020 22:48:15 +0100
Subject: [dev-context] type-ini.mklx: \definetypescriptsynonym
Message-ID: <b529cd82-3d77-6a73-26f7-0764a2c965fa@gmail.com>

Hi Hans,

the \definetypescriptsynonym command still use \ifsecondargument in the 
definition.

\permanent\tolerant\protected\def\definetypescriptsynonym[#name]#spacer[#synonym]%
 Â  {\ifsecondargument\setevalue{\??typescriptsynonyms#name}{#synonym}\fi}

Wolfgang


From j.hagen at xs4all.nl  Mon Nov  9 22:57:40 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Mon, 9 Nov 2020 22:57:40 +0100
Subject: [dev-context] type-ini.mklx: \definetypescriptsynonym
In-Reply-To: <b529cd82-3d77-6a73-26f7-0764a2c965fa@gmail.com>
References: <b529cd82-3d77-6a73-26f7-0764a2c965fa@gmail.com>
Message-ID: <16cbbb77-41ba-1598-6372-be6e5df4f997@xs4all.nl>

On 11/9/2020 10:48 PM, Wolfgang Schuster wrote:
> Hi Hans,
> 
> the \definetypescriptsynonym command still use \ifsecondargument in the 
> definition.
> 
> \permanent\tolerant\protected\def\definetypescriptsynonym[#name]#spacer[#synonym]% 
> 
>  Â  {\ifsecondargument\setevalue{\??typescriptsynonyms#name}{#synonym}\fi}
ok, will fix ... but i'm not at a place where i can upload now

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From wolfgang.schuster.lists at gmail.com  Mon Nov  9 23:32:46 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 9 Nov 2020 23:32:46 +0100
Subject: [dev-context] tabl-tab.mkxl: \TB and \HL
Message-ID: <61765c3c-985e-c0f3-003b-260cb5edc5a0@gmail.com>

Hi,

two bugs in the definitions for the \HL and \TB commands.

\permanent\tolerant\protected\def\tabl_table_HL[#1]%
 Â  {\tabl_tables_chuck_auto_row
 Â Â  ...
 Â Â Â Â  \bgroup
\global\c_tabl_table_hrule_thickness_factor\m_tabl_table_HLheight\relax
-Â Â Â Â Â  \iffirstargument
+Â Â Â Â Â  \iftok{#1}\emptytoks\else
 Â Â Â Â Â Â Â Â  \glet\m_tabl_table_hrule_color\empty
 Â Â  ...
 Â Â  \egroup}

\permanent\tolerant\protected\def\tabl_table_TB[#1]%
 Â  {\tabl_tables_chuck_auto_row
 Â Â  \tabl_table_finish_row
 Â Â  \noalign\bgroup
-Â  \blank[\iftok{#1}\emptytoks\c!NL\else#1\fi]%
+Â  \blank[\iftok{#1}\emptytoks\directtablesparameter\c!NL\else#1\fi]%
 Â Â  \nobreak
 Â Â  \egroup}

Wolfgang


From wolfgang.schuster.lists at gmail.com  Tue Nov 10 18:16:33 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Tue, 10 Nov 2020 18:16:33 +0100
Subject: [dev-context] strc-num.mkxl: \setcounter
Message-ID: <7edc092e-ba14-56f1-abc1-7dda29319b38@gmail.com>

Hi,

the definitions for \setcounter and everything until \countersubs need a 
\else for the subcounter values.

\permanent\tolerant\protected\def\setcounter[#1]#*[#2]#*[#3]%
 Â  {\ifarguments\or\or
 Â Â Â Â  \clf_setcounter {\namedcounterparameter{#1}\s!name}\numexpr#2\relax\or
+Â  \else
\clf_setsubcounter{\namedcounterparameter{#1}\s!name}\numexpr#2\relax\numexpr#3\relax
 Â Â  \fi}

Wolfgang


From wolfgang.schuster.lists at gmail.com  Tue Nov 10 18:20:41 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Tue, 10 Nov 2020 18:20:41 +0100
Subject: [dev-context] strc-num.mkxl: \convertedsubcounter
Message-ID: <6ca33612-8abb-e4fe-3d6f-b592b0dad437@gmail.com>

Hi,

the \convertedsubcounter pass its argument to the no longer existing 
\strc_counters_converted command.

\permanent\tolerant\protected\def\convertedsubcounter[#1]#*[#2]#*[#3]% 
#2 can be n or n:m
 Â  {\ifarguments\or
-Â Â Â  \strc_counters_converted[#1][]%
+Â Â Â  \convertedcounter[#1][]%
 Â Â  \else
-Â Â Â  \strc_counters_converted[#1][\c!numbersegments=#2,#3]%
+Â Â Â  \convertedcounter[#1][\c!numbersegments=#2,#3]%
 Â Â  \fi}

Wolfgang


From wolfgang.schuster.lists at gmail.com  Wed Nov 11 16:29:36 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Wed, 11 Nov 2020 16:29:36 +0100
Subject: [dev-context] file-mod.mklx: \syst_modules_setup_yes
Message-ID: <ea161b06-f0fb-68c3-4c93-708e6f774f53@gmail.com>

Hi,

the \syst_modules_setup_yes command lacks the \tolerant prefix.

\def\syst_modules_setup_yes[#name]#spacer[#parameters]%
 Â  {\scratchtoks\expandafter{\currentmoduleparameters}%
 Â Â  \ifparameters
 Â Â Â Â  ...
 Â Â  \fi
 Â Â  \let\currentmoduleparameters\empty
 Â Â  \the\everysetupmodule}

Wolfgang


From wolfgang.schuster.lists at gmail.com  Wed Nov 11 17:51:56 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Wed, 11 Nov 2020 17:51:56 +0100
Subject: [dev-context] pack-box.mkxl: \setlayeranchored
Message-ID: <6eea02f4-5c73-ee11-e3d0-9adf39c61987@gmail.com>

Hi,

the \or has to be replace with \else.

\permanent\tolerant\protected\def\setlayeranchored[#1]#*[#2]%
 Â  {\begingroup
 Â Â  \ifarguments
 Â Â Â Â  \dowithnextbox
 Â Â Â Â Â Â  {\endgroup}%
-Â  \or
+Â  \else
 Â Â Â Â  \dowithnextbox
 Â Â Â Â Â Â  {\checkpositionoverlays
 Â Â Â Â Â Â Â  \setbox\b_pack_anchors\box\nextbox
 Â Â Â Â Â Â Â  \dontleavehmode\hpack{\pack_anchors_register{#1}{#2}}%
 Â Â Â Â Â Â Â  \endgroup}%
 Â Â  \fi
 Â Â  \hbox}

Wolfgang


From wolfgang.schuster.lists at gmail.com  Wed Nov 11 19:05:18 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Wed, 11 Nov 2020 19:05:18 +0100
Subject: [dev-context] meta-ini.mkxl: \usestaticMPfigure
Message-ID: <cedff88a-c58f-7f4f-ead8-aab39cba10ef@gmail.com>

Hi,

the \usestaticMPfigure still use the \ifsecondargument check.

\permanent\tolerant\protected\def\usestaticMPfigure[#1]#*[#2]%
 Â  {\ifsecondargument
 Â Â Â Â  \scale[#2]{\reuseMPgraphic{\??mpstaticgraphic#1}}%
 Â Â  \else
 Â Â Â Â  \reuseMPgraphic{\??mpstaticgraphic#1}%
 Â Â  \fi}

Wolfgang


From wolfgang.schuster.lists at gmail.com  Wed Nov 11 19:43:14 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Wed, 11 Nov 2020 19:43:14 +0100
Subject: [dev-context] anch-tab.mkxl: \iffirstargument
Message-ID: <12372d5f-ed7f-d9bf-cab9-da599dc65bec@gmail.com>

Hi,

the following definitions (line 90 to 93) still use \iffirstargument.

\permanent\tolerant\protected\def\tbXC 
[#1]{\anch_table_check_state\iffirstargument\anch_tables_indeed_XC 
[#1]\else\expandafter\NC\fi}
\permanent\tolerant\protected\def\tbGSC[#1]{\anch_table_check_state\iffirstargument\anch_tables_indeed_GSC[#1]\else\expandafter\NC\fi}
\permanent\tolerant\protected\def\tbGFC[#1]{\anch_table_check_state\iffirstargument\anch_tables_indeed_GFC[#1]\else\expandafter\NC\fi}
\permanent\tolerant\protected\def\tbGTC[#1]{\anch_table_check_state\iffirstargument\anch_tables_indeed_GTC[#1]\else\expandafter\NC\fi}

Wolfgang


From jano.kula at gmail.com  Fri Nov 13 11:27:11 2020
From: jano.kula at gmail.com (Jano Kula)
Date: Fri, 13 Nov 2020 11:27:11 +0100
Subject: [dev-context] context --trackers
Message-ID: <CAPefzZ1W02WyJxAL5h_-xzpiz-DYC2rTkP3yo0sDXBDQbr6M3Q@mail.gmail.com>

Hello Hans,
context --trackers
gives three trackers on one line. Each of them is listed separately, also.
Jano

trackers        > xml.path
trackers        >     modules : 1
trackers        >     default : unset
trackers        >     value   : unset
trackers        >
trackers        > *xml.path,xml.parse,xml.profile*
trackers        >     modules : 1
trackers        >     default : unset
trackers        >     value   : unset
trackers        >
trackers        > xml.profile
trackers        >     modules : 1
trackers        >     default : unset
trackers        >     value   : unset
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20201113/e17d6ac8/attachment.htm>

From wolfgang.schuster.lists at gmail.com  Sat Nov 14 11:55:31 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sat, 14 Nov 2020 11:55:31 +0100
Subject: [dev-context] math-fen.mkxl: Wrong parameter passed to
 \setupcurrentmathfence
Message-ID: <6798f589-a2e5-9bac-46e2-d008d098f9a4@gmail.com>

Hi,

on line 226 the wrong parameter is passed to \setupcurrentmathfence.

\tolerant\protected\def\math_fenced_fenced[#1]#*[#2]%
 Â  {\advance\c_math_fenced_nesting\plusone
 Â Â  \begingroup
 Â Â  \edef\currentmathfence{#1}%
-Â  \ifparameter#2\or\setupcurrentmathfence[#1]\fi
+Â  \ifparameter#2\or\setupcurrentmathfence[#2]\fi
 Â Â  \math_fenced_fenced_common
 Â Â  \edef\p_size{\mathfenceparameter\c!size}%
 Â Â  \ifempty\p_size
 Â Â Â Â  \expandafter\math_fenced_fenced_indeed_adapt
 Â Â  \else
 Â Â Â Â  \expandafter\math_fenced_fenced_indeed_fixed
 Â Â  \fi}

Wolfgang


From wolfgang.schuster.lists at gmail.com  Mon Nov 16 17:34:08 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 16 Nov 2020 17:34:08 +0100
Subject: [dev-context] tabl-ntb.mkxl: \bTABLEhead etc.
Message-ID: <b43e6558-ead7-bf2e-4bae-3c2d130598da@gmail.com>

Hi,

the #: is missing between both argument in the header, footer ... blocks 
(line 898--901).

-\permanent\tolerant\protected\def\bTABLEhead[#1]#2\eTABLEhead{\appendtoks\tabl_ntb_section[#1]{#2}\to\t_tabl_ntb_head}
-\permanent\tolerant\protected\def\bTABLEnext[#1]#2\eTABLEnext{\appendtoks\tabl_ntb_section[#1]{#2}\to\t_tabl_ntb_next}
-\permanent\tolerant\protected\def\bTABLEbody[#1]#2\eTABLEbody{\appendtoks\tabl_ntb_section[#1]{#2}\to\t_tabl_ntb_body}
-\permanent\tolerant\protected\def\bTABLEfoot[#1]#2\eTABLEfoot{\appendtoks\tabl_ntb_section[#1]{#2}\to\t_tabl_ntb_foot}
+\permanent\tolerant\protected\def\bTABLEhead[#1]#:#2\eTABLEhead{\appendtoks\tabl_ntb_section[#1]{#2}\to\t_tabl_ntb_head}
+\permanent\tolerant\protected\def\bTABLEnext[#1]#:#2\eTABLEnext{\appendtoks\tabl_ntb_section[#1]{#2}\to\t_tabl_ntb_next}
+\permanent\tolerant\protected\def\bTABLEbody[#1]#:#2\eTABLEbody{\appendtoks\tabl_ntb_section[#1]{#2}\to\t_tabl_ntb_body}
+\permanent\tolerant\protected\def\bTABLEfoot[#1]#:#2\eTABLEfoot{\appendtoks\tabl_ntb_section[#1]{#2}\to\t_tabl_ntb_foot}

Wolfgang


From wolfgang.schuster.lists at gmail.com  Mon Nov 16 18:53:40 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 16 Nov 2020 18:53:40 +0100
Subject: [dev-context] anch-tab.mkxl: \XC
Message-ID: <1da9bdd1-ae12-57c3-9399-b8b919b28a9b@gmail.com>

Hi,

there are two problems in the following definitions (line 90--99).

1. Extra "s" on \ifparameter

2. \anch_table_check_state doesn't work anymore because it tries to 
change the value of \dosingleempty which was used to create the optional 
argument.

\permanent\tolerant\protected\def\tbXC 
[#1]{\anch_table_check_state\ifparameters#1\or\anch_tables_indeed_XC 
[#1]\else\expandafter\NC\fi}
\permanent\tolerant\protected\def\tbGSC[#1]{\anch_table_check_state\ifparameters#1\or\anch_tables_indeed_GSC[#1]\else\expandafter\NC\fi}
\permanent\tolerant\protected\def\tbGFC[#1]{\anch_table_check_state\ifparameters#1\or\anch_tables_indeed_GFC[#1]\else\expandafter\NC\fi}
\permanent\tolerant\protected\def\tbGTC[#1]{\anch_table_check_state\ifparameters#1\or\anch_tables_indeed_GTC[#1]\else\expandafter\NC\fi}

\def\anch_table_check_state
 Â  {\iftrialtypesetting
 Â Â Â Â  \global\settrue\tablehaspositions
 Â Â Â Â  \firstargumentfalse
 Â Â  \fi}

Wolfgang


From j.hagen at xs4all.nl  Mon Nov 16 19:05:24 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Mon, 16 Nov 2020 19:05:24 +0100
Subject: [dev-context] anch-tab.mkxl: \XC
In-Reply-To: <1da9bdd1-ae12-57c3-9399-b8b919b28a9b@gmail.com>
References: <1da9bdd1-ae12-57c3-9399-b8b919b28a9b@gmail.com>
Message-ID: <4c408790-86b2-eca5-271d-11b992b8333e@xs4all.nl>

On 11/16/2020 6:53 PM, Wolfgang Schuster wrote:
> Hi,
> 
> there are two problems in the following definitions (line 90--99).
> 
> 1. Extra "s" on \ifparameter
> 
> 2. \anch_table_check_state doesn't work anymore because it tries to 
> change the value of \dosingleempty which was used to create the optional 
> argument.
> 
> \permanent\tolerant\protected\def\tbXC 
> [#1]{\anch_table_check_state\ifparameters#1\or\anch_tables_indeed_XC 
> [#1]\else\expandafter\NC\fi}
> \permanent\tolerant\protected\def\tbGSC[#1]{\anch_table_check_state\ifparameters#1\or\anch_tables_indeed_GSC[#1]\else\expandafter\NC\fi} 
> 
> \permanent\tolerant\protected\def\tbGFC[#1]{\anch_table_check_state\ifparameters#1\or\anch_tables_indeed_GFC[#1]\else\expandafter\NC\fi} 
> 
> \permanent\tolerant\protected\def\tbGTC[#1]{\anch_table_check_state\ifparameters#1\or\anch_tables_indeed_GTC[#1]\else\expandafter\NC\fi} 
> 
> 
> \def\anch_table_check_state
>  Â  {\iftrialtypesetting
>  Â Â Â Â  \global\settrue\tablehaspositions
>  Â Â Â Â  \firstargumentfalse
>  Â Â  \fi}

How about this:

\permanent\protected\def\tbXC {\anch_table_checked\anch_tables_indeed_XC }
\permanent\protected\def\tbGSC{\anch_table_checked\anch_tables_indeed_GSC}
\permanent\protected\def\tbGFC{\anch_table_checked\anch_tables_indeed_GFC}
\permanent\protected\def\tbGTC{\anch_table_checked\anch_tables_indeed_GTC}

\tolerant\def\anch_table_checked#1[#2]%
   {\iftrialtypesetting
      \global\settrue\tablehaspositions
      \expandafter\NC
    \orelse\ifparameter#2\or
      \expandafter#1%
    \else
      \expandafter\NC
    \fi}


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From wolfgang.schuster.lists at gmail.com  Mon Nov 16 19:15:39 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 16 Nov 2020 19:15:39 +0100
Subject: [dev-context] anch-tab.mkxl: \XC
In-Reply-To: <4c408790-86b2-eca5-271d-11b992b8333e@xs4all.nl>
References: <1da9bdd1-ae12-57c3-9399-b8b919b28a9b@gmail.com>
 <4c408790-86b2-eca5-271d-11b992b8333e@xs4all.nl>
Message-ID: <9ace2441-1556-34a1-3800-3d8d8a2a9526@gmail.com>

Hans Hagen schrieb am 16.11.2020 um 19:05:
> On 11/16/2020 6:53 PM, Wolfgang Schuster wrote:
>> Hi,
>>
>> there are two problems in the following definitions (line 90--99).
>>
>> 1. Extra "s" on \ifparameter
>>
>> 2. \anch_table_check_state doesn't work anymore because it tries to 
>> change the value of \dosingleempty which was used to create the 
>> optional argument.
>>
>> \permanent\tolerant\protected\def\tbXC 
>> [#1]{\anch_table_check_state\ifparameters#1\or\anch_tables_indeed_XC 
>> [#1]\else\expandafter\NC\fi}
>> \permanent\tolerant\protected\def\tbGSC[#1]{\anch_table_check_state\ifparameters#1\or\anch_tables_indeed_GSC[#1]\else\expandafter\NC\fi} 
>>
>> \permanent\tolerant\protected\def\tbGFC[#1]{\anch_table_check_state\ifparameters#1\or\anch_tables_indeed_GFC[#1]\else\expandafter\NC\fi} 
>>
>> \permanent\tolerant\protected\def\tbGTC[#1]{\anch_table_check_state\ifparameters#1\or\anch_tables_indeed_GTC[#1]\else\expandafter\NC\fi} 
>>
>>
>> \def\anch_table_check_state
>> Â Â  {\iftrialtypesetting
>> Â Â Â Â Â  \global\settrue\tablehaspositions
>> Â Â Â Â Â  \firstargumentfalse
>> Â Â Â  \fi}
>
> How about this:
>
> \permanent\protected\def\tbXC 
> {\anch_table_checked\anch_tables_indeed_XC }
> \permanent\protected\def\tbGSC{\anch_table_checked\anch_tables_indeed_GSC} 
>
> \permanent\protected\def\tbGFC{\anch_table_checked\anch_tables_indeed_GFC} 
>
> \permanent\protected\def\tbGTC{\anch_table_checked\anch_tables_indeed_GTC} 
>
>
> \tolerant\def\anch_table_checked#1[#2]%
> Â  {\iftrialtypesetting
> Â Â Â Â  \global\settrue\tablehaspositions
> Â Â Â Â  \expandafter\NC
> Â Â  \orelse\ifparameter#2\or
> Â Â Â Â  \expandafter#1%
> Â Â  \else
> Â Â Â Â  \expandafter\NC
> Â Â  \fi}

The optional argument is now gone and never passed further down, more 
something like this (not sure about \tripleexpandafter)

\tolerant\def\anch_table_checked#1[#2]%
 Â  {\iftrialtypesetting
 Â Â Â Â  \global\settrue\tablehaspositions
 Â Â Â Â  \tripleexpandafter\NC\expandafter\gobbleoneoptional
 Â Â  \orelse\ifparameter#2\or
 Â Â Â Â  \expandafter#1%
 Â Â  \else
 Â Â Â Â  \tripleexpandafter\NC\expandafter\gobbleoneoptional
 Â Â  \fi[#1]}

Wolfgang


From j.hagen at xs4all.nl  Mon Nov 16 19:19:40 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Mon, 16 Nov 2020 19:19:40 +0100
Subject: [dev-context] anch-tab.mkxl: \XC
In-Reply-To: <9ace2441-1556-34a1-3800-3d8d8a2a9526@gmail.com>
References: <1da9bdd1-ae12-57c3-9399-b8b919b28a9b@gmail.com>
 <4c408790-86b2-eca5-271d-11b992b8333e@xs4all.nl>
 <9ace2441-1556-34a1-3800-3d8d8a2a9526@gmail.com>
Message-ID: <5150f28b-6c30-d387-af56-59eaec0116e6@xs4all.nl>

On 11/16/2020 7:15 PM, Wolfgang Schuster wrote:
> Hans Hagen schrieb am 16.11.2020 um 19:05:
>> On 11/16/2020 6:53 PM, Wolfgang Schuster wrote:
>>> Hi,
>>>
>>> there are two problems in the following definitions (line 90--99).
>>>
>>> 1. Extra "s" on \ifparameter
>>>
>>> 2. \anch_table_check_state doesn't work anymore because it tries to 
>>> change the value of \dosingleempty which was used to create the 
>>> optional argument.
>>>
>>> \permanent\tolerant\protected\def\tbXC 
>>> [#1]{\anch_table_check_state\ifparameters#1\or\anch_tables_indeed_XC 
>>> [#1]\else\expandafter\NC\fi}
>>> \permanent\tolerant\protected\def\tbGSC[#1]{\anch_table_check_state\ifparameters#1\or\anch_tables_indeed_GSC[#1]\else\expandafter\NC\fi} 
>>>
>>> \permanent\tolerant\protected\def\tbGFC[#1]{\anch_table_check_state\ifparameters#1\or\anch_tables_indeed_GFC[#1]\else\expandafter\NC\fi} 
>>>
>>> \permanent\tolerant\protected\def\tbGTC[#1]{\anch_table_check_state\ifparameters#1\or\anch_tables_indeed_GTC[#1]\else\expandafter\NC\fi} 
>>>
>>>
>>> \def\anch_table_check_state
>>> Â Â  {\iftrialtypesetting
>>> Â Â Â Â Â  \global\settrue\tablehaspositions
>>> Â Â Â Â Â  \firstargumentfalse
>>> Â Â Â  \fi}
>>
>> How about this:
>>
>> \permanent\protected\def\tbXC 
>> {\anch_table_checked\anch_tables_indeed_XC }
>> \permanent\protected\def\tbGSC{\anch_table_checked\anch_tables_indeed_GSC} 
>>
>> \permanent\protected\def\tbGFC{\anch_table_checked\anch_tables_indeed_GFC} 
>>
>> \permanent\protected\def\tbGTC{\anch_table_checked\anch_tables_indeed_GTC} 
>>
>>
>> \tolerant\def\anch_table_checked#1[#2]%
>> Â  {\iftrialtypesetting
>> Â Â Â Â  \global\settrue\tablehaspositions
>> Â Â Â Â  \expandafter\NC
>> Â Â  \orelse\ifparameter#2\or
>> Â Â Â Â  \expandafter#1%
>> Â Â  \else
>> Â Â Â Â  \expandafter\NC
>> Â Â  \fi}
> 
> The optional argument is now gone and never passed further down, more 
> something like this (not sure about \tripleexpandafter)
> 
> \tolerant\def\anch_table_checked#1[#2]%
>  Â  {\iftrialtypesetting
>  Â Â Â Â  \global\settrue\tablehaspositions
>  Â Â Â Â  \tripleexpandafter\NC\expandafter\gobbleoneoptional
>  Â Â  \orelse\ifparameter#2\or
>  Â Â Â Â  \expandafter#1%
>  Â Â  \else
>  Â Â Â Â  \tripleexpandafter\NC\expandafter\gobbleoneoptional
>  Â Â  \fi[#1]}

We're nearly there ... pass [#2] istead of [#1] ...

\permanent\protected\def\tbXC {\anch_table_checked\anch_tables_indeed_XC }
\permanent\protected\def\tbGSC{\anch_table_checked\anch_tables_indeed_GSC}
\permanent\protected\def\tbGFC{\anch_table_checked\anch_tables_indeed_GFC}
\permanent\protected\def\tbGTC{\anch_table_checked\anch_tables_indeed_GTC}

\tolerant\def\anch_table_checked#1[#2]%
   {\iftrialtypesetting
      \global\settrue\tablehaspositions
      \expandafter\anch_tables_indeed_NC
    \orelse\ifparameter#2\or
      \expandafter#1%
    \else
      \expandafter\anch_tables_indeed_NC
    \fi[#2]}

\def\anch_tables_indeed_NC[#1]%
   {\NC}

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From wolfgang.schuster.lists at gmail.com  Mon Nov 16 20:19:03 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 16 Nov 2020 20:19:03 +0100
Subject: [dev-context] buff-ver.mkxl: language -1
Message-ID: <87314c0e-2afe-5b31-c40a-95ec00ee9bbc@gmail.com>

Hi,

I think these can be changed to use \nohyphens instead of the language hack.


line 70--75:

\protected\def\buff_verbatim_obey_breakpoints
 Â  {\language\minusoneÂ  % tricky as this affects the pagebuilder
 Â Â  \veryraggedright}

\protected\def\buff_verbatim_ignore_hyphens
 Â  {\language\minusone} % tricky as this affects the pagebuilder


line 392--296:

\permanent\protected\def\ignorehyphens
 Â  {\language\minusone % extra bonus, the \null should do the job too
 Â Â  \enforced\let\obeyedspace \specialobeyedspace
 Â Â  \enforced\let\controlspace\specialcontrolspace
 Â Â  \spaceskip.5\emwidth\relax}


Wolfgang


From wolfgang.schuster.lists at gmail.com  Mon Nov 16 21:22:44 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 16 Nov 2020 21:22:44 +0100
Subject: [dev-context] core-con.mkxl: \date
Message-ID: <4655e1d4-55d8-1cbd-04ac-5c71db1408d4@gmail.com>

Hi,

a optional space is missing between the arguments of \date (line 452):

-\permanent\tolerant\protected\def\date[#1][#2]% sets the date !
+\permanent\tolerant\protected\def\date[#1]#*[#2]% sets the date !
 Â  {\dontleavehmode
 Â Â  ...
 Â Â  \endgroup}

Wolfgang


From j.hagen at xs4all.nl  Tue Nov 17 09:55:57 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Tue, 17 Nov 2020 09:55:57 +0100
Subject: [dev-context] buff-ver.mkxl: language -1
In-Reply-To: <87314c0e-2afe-5b31-c40a-95ec00ee9bbc@gmail.com>
References: <87314c0e-2afe-5b31-c40a-95ec00ee9bbc@gmail.com>
Message-ID: <d66a10fa-de6b-80a6-aba2-ebe044ca85ea@xs4all.nl>

On 11/16/2020 8:19 PM, Wolfgang Schuster wrote:
> Hi,
> 
> I think these can be changed to use \nohyphens instead of the language 
> hack.
will do

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From wolfgang.schuster.lists at gmail.com  Fri Nov 20 15:42:06 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Fri, 20 Nov 2020 15:42:06 +0100
Subject: [dev-context] strc-lst.mklx: \completecontent
Message-ID: <9a41a83b-86fd-1e53-a8e2-f5348d974197@gmail.com>

Hi,

combined lists with title are broken because they use the wrong function.

\permanent\tolerant\protected\def\definecombinedlist[#tag]#spacer[#list]#spacer[#settings]%
{\definelist[#tag][\c!criterium=\v!local,\c!reference=,\c!alternative=,\c!list={#list},#settings]% 
inherits from root
\frozen\instance\setvalue{\e!setup#tag\e!endsetup}{\setupcombinedlist[#tag]}%
 Â Â  \frozen\instance\setvalue{\e!place#tag}{\placecombinedlist[#tag]}%
- \frozen\instance\setvalue{\e!complete#tag}{\strc_lists_complete[#tag]}}
+ 
\frozen\instance\setvalue{\e!complete#tag}{\strc_lists_combined_complete[#tag]}}

% \completecombinedlist ?

+\permanent\tolerant\def\strc_lists_combined_complete[#tag]#spacer[#settings]%
+ 
{\normalexpanded{\startnamedsection[\v!title][\c!title={\headtext{#tag}},\c!reference=#tag]}%
+Â Â  \placecombinedlist[#tag][#settings]%
+Â Â  \stopnamedsection}

Wolfgang


From j.hagen at xs4all.nl  Fri Nov 20 20:10:56 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Fri, 20 Nov 2020 20:10:56 +0100
Subject: [dev-context] strc-lst.mklx: \completecontent
In-Reply-To: <9a41a83b-86fd-1e53-a8e2-f5348d974197@gmail.com>
References: <9a41a83b-86fd-1e53-a8e2-f5348d974197@gmail.com>
Message-ID: <ef04d594-7899-8dbd-efa1-1804263d451e@xs4all.nl>

On 11/20/2020 3:42 PM, Wolfgang Schuster wrote:
> Hi,
> 
> combined lists with title are broken because they use the wrong function.
> 
> \permanent\tolerant\protected\def\definecombinedlist[#tag]#spacer[#list]#spacer[#settings]% 
> 
> {\definelist[#tag][\c!criterium=\v!local,\c!reference=,\c!alternative=,\c!list={#list},#settings]% 
> inherits from root
> \frozen\instance\setvalue{\e!setup#tag\e!endsetup}{\setupcombinedlist[#tag]}% 
> 
>  Â Â  \frozen\instance\setvalue{\e!place#tag}{\placecombinedlist[#tag]}%
> - \frozen\instance\setvalue{\e!complete#tag}{\strc_lists_complete[#tag]}}
> + 
> \frozen\instance\setvalue{\e!complete#tag}{\strc_lists_combined_complete[#tag]}} 
> 
> 
> % \completecombinedlist ?
> 
> +\permanent\tolerant\def\strc_lists_combined_complete[#tag]#spacer[#settings]% 
> 
> + 
> {\normalexpanded{\startnamedsection[\v!title][\c!title={\headtext{#tag}},\c!reference=#tag]}% 
> 
> +Â Â  \placecombinedlist[#tag][#settings]%
> +Â Â  \stopnamedsection}

or two times [#tag]:

 
\frozen\instance\setvalue{\e!complete#tag}{\strc_lists_complete[#tag][#tag]}}

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From wolfgang.schuster.lists at gmail.com  Fri Nov 20 20:21:24 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Fri, 20 Nov 2020 20:21:24 +0100
Subject: [dev-context] strc-lst.mklx: \completecontent
In-Reply-To: <ef04d594-7899-8dbd-efa1-1804263d451e@xs4all.nl>
References: <9a41a83b-86fd-1e53-a8e2-f5348d974197@gmail.com>
 <ef04d594-7899-8dbd-efa1-1804263d451e@xs4all.nl>
Message-ID: <fd283606-deea-a09b-019c-4dde54e4b722@gmail.com>

Hans Hagen schrieb am 20.11.2020 um 20:10:
> On 11/20/2020 3:42 PM, Wolfgang Schuster wrote:
>> Hi,
>>
>> combined lists with title are broken because they use the wrong 
>> function.
>>
>> \permanent\tolerant\protected\def\definecombinedlist[#tag]#spacer[#list]#spacer[#settings]% 
>>
>> {\definelist[#tag][\c!criterium=\v!local,\c!reference=,\c!alternative=,\c!list={#list},#settings]% 
>> inherits from root
>> \frozen\instance\setvalue{\e!setup#tag\e!endsetup}{\setupcombinedlist[#tag]}% 
>>
>> \frozen\instance\setvalue{\e!place#tag}{\placecombinedlist[#tag]}%
>> - 
>> \frozen\instance\setvalue{\e!complete#tag}{\strc_lists_complete[#tag]}}
>> + 
>> \frozen\instance\setvalue{\e!complete#tag}{\strc_lists_combined_complete[#tag]}} 
>>
>>
>> % \completecombinedlist ?
>>
>> +\permanent\tolerant\def\strc_lists_combined_complete[#tag]#spacer[#settings]% 
>>
>> + 
>> {\normalexpanded{\startnamedsection[\v!title][\c!title={\headtext{#tag}},\c!reference=#tag]}% 
>>
>> +Â Â  \placecombinedlist[#tag][#settings]%
>> +Â Â  \stopnamedsection}
>
> or two times [#tag]:
>
>
> \frozen\instance\setvalue{\e!complete#tag}{\strc_lists_complete[#tag][#tag]}} 
>

This doesn't work for *combined* lists because you pass the name of the 
list (e.g. content) but not the entries.

Wolfgang


From wolfgang.schuster.lists at gmail.com  Sat Nov 21 15:07:35 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sat, 21 Nov 2020 15:07:35 +0100
Subject: [dev-context] prop-ini.mkxl: \stopproperty
Message-ID: <2f6647a4-2698-9bcf-16e0-a48a8b397a77@gmail.com>

Hi,

\properties_stop calls itself

\protected\def\properties_stop
 Â  {\properties_stop
 Â Â  \popmacro\properties_stop}

Wolfgang


From wolfgang.schuster.lists at gmail.com  Sat Nov 21 16:19:49 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sat, 21 Nov 2020 16:19:49 +0100
Subject: [dev-context] publ-xml.mkxl: convertbtxdatasettoxml
Message-ID: <5d7fd741-b7b6-052f-c678-da0e2f377683@gmail.com>

Hi,

missing "s" (or #1) at the end of \ifparameter.

\permanent\tolerant\protected\def\convertbtxdatasettoxml[#1]%
- {\clf_convertbtxdatasettoxml{\ifparameter\or#1\else\s!default\fi}} % 
or current when not empty
+ {\clf_convertbtxdatasettoxml{\ifparameters\or#1\else\s!default\fi}} % 
or current when not empty

Wolfgang


From j.hagen at xs4all.nl  Sat Nov 21 16:55:54 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Sat, 21 Nov 2020 16:55:54 +0100
Subject: [dev-context] prop-ini.mkxl: \stopproperty
In-Reply-To: <2f6647a4-2698-9bcf-16e0-a48a8b397a77@gmail.com>
References: <2f6647a4-2698-9bcf-16e0-a48a8b397a77@gmail.com>
Message-ID: <b8c158d2-3191-8a18-ccf2-926a464381a3@xs4all.nl>

On 11/21/2020 3:07 PM, Wolfgang Schuster wrote:
> Hi,
> 
> \properties_stop calls itself
> 
> \protected\def\properties_stop
>  Â  {\properties_stop
>  Â Â  \popmacro\properties_stop}
I'll remove these modules ... we have better mechanisms and those were 
kept for soem compatibility (that didn't work so no one used that code 
anyway).

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From wolfgang.schuster.lists at gmail.com  Tue Nov 24 19:41:11 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Tue, 24 Nov 2020 19:41:11 +0100
Subject: [dev-context] tabl-ntb.mkxl
Message-ID: <a1867c14-d87b-9838-087d-b3950e0aae2a@gmail.com>

Hi,

-\tolerant\def\tabl_ntb_th[#1]#2\eTH
+\tolerant\def\tabl_ntb_th[#1]#:#2\eTH
{\tabl_ntb_td[#1,\c!color=\naturaltablelocalparameter\c!headcolor,\c!style=\naturaltablelocalparameter\c!headstyle,\c!aligncharacter=\v!no]#2\eTD}

-\tolerant\def\tabl_ntb_tn[#1]#2\eTN
+\tolerant\def\tabl_ntb_tn[#1]#:#2\eTN
 Â  {\tabl_ntb_td[#1]\digits#2\relax\eTD}

Wolfgang


From wolfgang.schuster.lists at gmail.com  Tue Nov 24 19:52:32 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Tue, 24 Nov 2020 19:52:32 +0100
Subject: [dev-context] strc-des.mklx
Message-ID: <ca7990c9-2fa4-e8cb-4300-8f6e0cfdebc2@gmail.com>

Hi,

-\tolerant\protected\def\strc_descriptions_command[#1]#*[#2]#:#*#=%
+\tolerant\protected\def\strc_descriptions_command[#1]#*[#2]%
 Â  {\begingroup
 Â Â  \strc_constructions_initialize{#1}%
 Â Â  \ifhastok={#2}%
 Â Â Â Â  \expandafter\strc_descriptions_command_setups
 Â Â  \orelse\ifconditional\c_strc_constructions_title_state
 Â Â Â Â  \expandafter\strc_descriptions_command_title
 Â Â  \else
 Â Â Â Â  \expandafter\strc_descriptions_command_reference
 Â Â  \fi[#2]}

Wolfgang


From wolfgang.schuster.lists at gmail.com  Tue Nov 24 20:22:57 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Tue, 24 Nov 2020 20:22:57 +0100
Subject: [dev-context] cont-log.mkxl
Message-ID: <6d7b5169-1b6b-027e-5e0c-7495bb5f610c@gmail.com>

Hi,

\frozen\instance\protected\def\XeTeX
 Â  {X\lower.5\exheight
 Â Â  \hbox
 Â Â Â Â  {\kern-.15\emwidth
 Â Â Â Â Â  \iffontchar\font"018E\relax
 Â Â Â Â Â Â Â  \char"018E%
 Â Â Â Â Â  \else
 Â Â Â Â Â Â Â  \ifx\fontalternative\s!bfÂ Â Â Â Â Â Â Â  \mirror{E}\orelse
 Â Â Â Â Â Â Â  \ifx\fontalternative\s!it\syst_logos_xetex_e\orelse
 Â Â Â Â Â Â Â  \ifx\fontalternative\s!sl\syst_logos_xetex_e\orelse
 Â Â Â Â Â Â Â  \ifx\fontalternative\s!bi\syst_logos_xetex_e\orelse
-Â Â Â Â Â Â  \ifx\fontalternative\s!bs\syst_logos_xetex_e\orelse
+Â Â Â Â Â Â  \ifx\fontalternative\s!bs\syst_logos_xetex_e\else
 Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  \mirror{E}\fi
 Â Â Â Â Â  \fi}%
 Â Â  \kern-.1667\emwidth\TeX}

Wolfgang


From wolfgang.schuster.lists at gmail.com  Thu Nov 26 20:32:44 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Thu, 26 Nov 2020 20:32:44 +0100
Subject: [dev-context] m-scite.mkiv
Message-ID: <c899a834-e963-3317-0d9a-3c7227d8352c@gmail.com>

Hi,

there is a \relax missing at the end of \hskip (line 342):

\unexpanded\def\buff_scite_slxb#1%
 Â  {% we can have a side float
 Â Â  \advance\hangindent\numexpr#1+2\relax\scitespaceskip
-Â  \begstrut\hskip#1\scitespaceskip
+Â  \begstrut\hskip#1\scitespaceskip\relax
 Â Â  \ifcase\hangafter
 Â Â Â Â  \hangafter\plusone\relax
 Â Â  \fi}

Wolfgang


From wolfgang.schuster.lists at gmail.com  Wed Dec 23 08:46:05 2020
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Wed, 23 Dec 2020 08:46:05 +0100
Subject: [dev-context] strc-des.mklx: referencetext
Message-ID: <299fde5a-6be1-904d-1fdd-cd6cc054d048@gmail.com>

Hi,

there are two bugs in the description/enumeration code (strc-des.mklx).

1. A entry for the referencetext key is missing in the argument of 
descriptions and

2. the title_state reset is wrong because it disables the title when 
\startdescription[title=...] is used.


line 113ff:

\protected\def\strc_descriptions_start_setups[#1]%
- {\setfalse\c_strc_constructions_title_state
- 
\strc_constructions_register[][\c!label={\descriptionparameter\c!text},\c!reference=,\c!title=,\c!bookmark=,\c!list=,#1]%
+ 
{\strc_constructions_register[][\c!label={\descriptionparameter\c!text},\c!reference=,\c!title=,\c!bookmark=,\c!list=,\c!referencetext=,#1]%
\csname\??constructionstarthandler\currentconstructionhandler\endcsname}

\protected\tolerant\def\strc_descriptions_start_title[#1]#*#=%
- 
{\strc_constructions_register[][\c!label={\descriptionparameter\c!text},\c!reference={#1},\c!title={#2},\c!bookmark=,\c!list=]%
+ 
{\strc_constructions_register[][\c!label={\descriptionparameter\c!text},\c!reference={#1},\c!title={#2},\c!bookmark=,\c!list=,\c!referencetext=]%
\csname\??constructionstarthandler\currentconstructionhandler\endcsname}

\protected\def\strc_descriptions_start_reference[#1]%
- 
{\strc_constructions_register[][\c!label={\descriptionparameter\c!text},\c!reference={#1},\c!title=,\c!bookmark=,\c!list=]%
+ 
{\strc_constructions_register[][\c!label={\descriptionparameter\c!text},\c!reference={#1},\c!title=,\c!bookmark=,\c!list=,\c!referencetext=]%
\csname\??constructionstarthandler\currentconstructionhandler\endcsname}


line 143ff:

\protected\def\strc_descriptions_command_setups[#1]%
- {\setfalse\c_strc_constructions_title_state
- 
\strc_constructions_register[][\c!label={\descriptionparameter\c!text},\c!reference=,\c!title=,\c!bookmark=,\c!list=,#1]%
+ 
{\strc_constructions_register[][\c!label={\descriptionparameter\c!text},\c!reference=,\c!title=,\c!bookmark=,\c!list=,\c!referencetext=,#1]%
\csname\??constructioncommandhandler\currentconstructionhandler\endcsname}

\protected\tolerant\def\strc_descriptions_command_title[#1]#:#*#=%
- 
{\strc_constructions_register[][\c!label={\descriptionparameter\c!text},\c!reference={#1},\c!title={#2},\c!bookmark=,\c!list=]%
+ 
{\strc_constructions_register[][\c!label={\descriptionparameter\c!text},\c!reference={#1},\c!title={#2},\c!bookmark=,\c!list=,\c!referencetext=]%
\csname\??constructioncommandhandler\currentconstructionhandler\endcsname}

\protected\def\strc_descriptions_command_reference[#1]%
- 
{\strc_constructions_register[][\c!label={\descriptionparameter\c!text},\c!reference={#1},\c!title=,\c!bookmark=,\c!list=]%
+ 
{\strc_constructions_register[][\c!label={\descriptionparameter\c!text},\c!reference={#1},\c!title=,\c!bookmark=,\c!list=,\c!referencetext=]%
\csname\??constructioncommandhandler\currentconstructionhandler\endcsname}


Wolfgang


From martin.hason at gmail.com  Wed Dec 23 15:10:16 2020
From: martin.hason at gmail.com (=?UTF-8?Q?Martin_Haso=C5=88?=)
Date: Wed, 23 Dec 2020 15:10:16 +0100
Subject: [dev-context] mtx-install.lua for linuxmusl-64
Message-ID: <CAMQDGF-4x_jCP36T-_1J5-hwuppi9qZxYNdck+Q7v=QL_GCTEg@mail.gmail.com>

Hi,

the installer for linuxmusl-64 creates invalid directory for binary files.
There may be a bug in the file mtx-install.lua:

    --
    ["linux-64"]       = "linux-64",
    ["linux64"]        = "linux-64",
    --
-    ["linuxmusl-64"]   = "linuxmusl",
+   ["linuxmusl-64"]   = "linuxmusl-64",
    ["linuxmusl"]      = "linuxmusl",
    --
    ["linux-armhf"]    = "linux-armhf",

Best regards
Martin HasoÅ
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20201223/0960bda6/attachment.htm>

From j.hagen at xs4all.nl  Wed Dec 23 16:18:39 2020
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Wed, 23 Dec 2020 16:18:39 +0100
Subject: [dev-context] mtx-install.lua for linuxmusl-64
In-Reply-To: <CAMQDGF-4x_jCP36T-_1J5-hwuppi9qZxYNdck+Q7v=QL_GCTEg@mail.gmail.com>
References: <CAMQDGF-4x_jCP36T-_1J5-hwuppi9qZxYNdck+Q7v=QL_GCTEg@mail.gmail.com>
Message-ID: <459c4ef5-bf77-6b7e-b81f-585fc13cc32d@xs4all.nl>

On 12/23/2020 3:10 PM, Martin HasoÅ wrote:
> Hi,
> 
> the installer for linuxmusl-64 creates invalid directory for binary 
> files. There may be a bug in the file mtx-install.lua:
> 
>  Â  Â  --
>  Â  Â  ["linux-64"] Â  Â  Â  = "linux-64",
>  Â  Â  ["linux64"] Â  Â  Â  Â = "linux-64",
>  Â  Â  --
> -Â  Â  ["linuxmusl-64"] Â  = "linuxmusl",
> + Â  ["linuxmusl-64"] Â  = "linuxmusl-64",
>  Â  Â  ["linuxmusl"] Â  Â  Â = "linuxmusl",
>  Â  Â  --
>  Â  Â  ["linux-armhf"] Â  Â = "linux-armhf",
we only have 64 bit so never had that distinction

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From martin.hason at gmail.com  Wed Dec 23 20:58:26 2020
From: martin.hason at gmail.com (=?UTF-8?Q?Martin_Haso=C5=88?=)
Date: Wed, 23 Dec 2020 20:58:26 +0100
Subject: [dev-context] mtx-install.lua for linuxmusl-64
In-Reply-To: <459c4ef5-bf77-6b7e-b81f-585fc13cc32d@xs4all.nl>
References: <CAMQDGF-4x_jCP36T-_1J5-hwuppi9qZxYNdck+Q7v=QL_GCTEg@mail.gmail.com>
 <459c4ef5-bf77-6b7e-b81f-585fc13cc32d@xs4all.nl>
Message-ID: <CAMQDGF8K8a80zVA7Xsk54hCuFMoO32HGEKd+RscKwAeJjGL3Jw@mail.gmail.com>

So, the problem is in the install.sh script

            x86_64|ia64)
                case "$libc" in
                    glibc)
                        PLATFORM="linux-64" ;;
                    musl)
-                        PLATFORM="linuxmusl-64" ;;
+                        PLATFORM="linuxmusl" ;;
                esac ;;
            mips|mips64|mipsel|mips64el)
                PLATFORM="linux-mipsel" ;;

The current code throws error:

cp: can't stat '/usr/share/tex/texmf-linuxmusl-64/bin/mtxrun': No such file
or directory

Martin

st 23. 12. 2020 v 16:18 odesÃ­latel Hans Hagen <j.hagen at xs4all.nl> napsal:

> On 12/23/2020 3:10 PM, Martin HasoÅ wrote:
> > Hi,
> >
> > the installer for linuxmusl-64 creates invalid directory for binary
> > files. There may be a bug in the file mtx-install.lua:
> >
> >      --
> >      ["linux-64"]       = "linux-64",
> >      ["linux64"]        = "linux-64",
> >      --
> > -    ["linuxmusl-64"]   = "linuxmusl",
> > +   ["linuxmusl-64"]   = "linuxmusl-64",
> >      ["linuxmusl"]      = "linuxmusl",
> >      --
> >      ["linux-armhf"]    = "linux-armhf",
> we only have 64 bit so never had that distinction
>
> Hans
>
> -----------------------------------------------------------------
>                                            Hans Hagen | PRAGMA ADE
>                Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>         tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
> -----------------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20201223/a05e7fcc/attachment.htm>

From modules at contextgarden.net  Thu Dec 24 15:03:12 2020
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Thu, 24 Dec 2020 15:03:12 +0100
Subject: [dev-context] CGModules new: metaducks version 24.12.2020 published.
Message-ID: <20201224140312.5B4011C1664@zapf.ntg.nl>

Jairo A. del Rio submitted the new

               metaducks

package.

Version number: 24.12.2020
License type: GNU General Public License
Wants to be in ConTeXt distribution: yes
Wants to be synced with CTAN: no

Summary description: Ducks for ConTeXt!

Announcement text:
----------------------------------------------------------------------



----------------------------------------------------------------------


