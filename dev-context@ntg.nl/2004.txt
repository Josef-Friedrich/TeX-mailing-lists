From taco at elvenkind.com  Fri Sep  3 15:59:37 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri Sep  3 15:59:40 2004
Subject: [dev-context] context-2 alpha
Message-ID: <20040903155937.1980dad1@glenlivet.elvenkind.com>


Hi Hans !

As soon as you have a new alpha version, I will have another go
at the 'api' texshow interface, Ok?


-- 
groeten,

Taco
From taco at elvenkind.com  Tue Sep  7 10:39:14 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue Sep  7 10:36:48 2004
Subject: [dev-context] Fw: Cron <tex@server>
 /var/www/aanhet.net/tex/bin/cron/context-mirror
Message-ID: <20040907103914.7a809cc9.taco@elvenkind.com>



Hi Hans,

Is there anything particularly interesting in this new beta?

Greetings, Taco


Begin forwarded message:

Date: Tue,  7 Sep 2004 03:01:03 +0200 (CEST)
From: root@aanhet.net (Cron Daemon)
To: taco@elvenkind.com
Subject: Cron <tex@server> /var/www/aanhet.net/tex/bin/cron/context-mirror


http://www.pragma-ade.com/robots.txt:
03:01:01 ERROR 404: Not Found.
http://www.pragma-ade.com/taskfor.htm:
03:01:03 ERROR 404: Not Found.
03:01:03 URL:http://www.pragma-ade.com/context/beta/cont-tmf.zip [2208672/2208672] -> "www.pragma-ade.com/context/beta/cont-tmf.zip" [1]

FINISHED --03:01:03--
Downloaded: 2,208,672 bytes in 1 files
From vit.zyka at seznam.cz  Tue Sep  7 18:21:40 2004
From: vit.zyka at seznam.cz (Vit Zyka)
Date: Tue Sep  7 18:40:46 2004
Subject: [dev-context] supp-mps
Message-ID: <413DE014.9020704@seznam.cz>

Hi,

there is an additional space in the end of the line 653 in supp-mps.tex 
(latest alpha):

        \immediate\write\MPwrite{verbatimtex \MPinputtranslation etex ;}

It causes e.g. wrong left border in

\startTEXpage
   \useMPgraphic{dvere-sup}
\stopTEXpage

Vit Zyka
From taco at elvenkind.com  Wed Sep  8 11:09:53 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed Sep  8 11:09:57 2004
Subject: [dev-context] Fw: [NTG-context] alpha
Message-ID: <20040908110953.08e1deec@glenlivet.elvenkind.com>



Hi,

A quick rundown of the differences between the latest and the previous alpha,
using my interpretation of importance of the differences (I may have missed some,
i don't want to spend too much time on the alpha's and the diff was quite large):

* Translation of dutch csnames with uppercase chars

* Translation of some forgotten stuff in core-des.tex

* Command joining: \v!sub\v!sub\v!section  became \v!subsubsection, etc. 

* The XML interface data files are now included

* mptopdf became 1.3  (Hartmut's patch)

* inclusion of texsync.rb

* new syst-ext macros: \comparedimension[eps]

* 'flush{left,right}' added

* a few minor eTeX 2.1 bug workarounds, and user 'please upgrade' messages 
  for etex (<2.2) and pdftex (1.20)

* a float placement fix, as well as some other minor fixes here and there

* A documentation fix in every TeX file:
	%D [filefile=XXX,
  became
	%D [file=XXX,

And there are two big things I could decypher with certainty quickly:

* An extension  to the margin code ?   There are quite a lot of changes that 
  were in cont-new previously that  have now moved to page-lay.  
  Hans, what is going on there?

* cont-new now holds a fairly large patch for page and table splitting (right?)


Begin forwarded message:

Date: Mon, 06 Sep 2004 16:04:54 +0200
From: Hans Hagen <pragma@wxs.nl>
To: c <ntg-context@ntg.nl>
Subject: [NTG-context] alpha


Hi,

A new alpha release:

http://www.pragma-ade.com/context/alpha/cont-tmf.zip

Hans


-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

_______________________________________________
ntg-context mailing list
ntg-context@ntg.nl
http://www.ntg.nl/mailman/listinfo/ntg-context


-- 
groeten,

Taco
From vit.zyka at seznam.cz  Wed Sep 15 20:52:28 2004
From: vit.zyka at seznam.cz (Vit Zyka)
Date: Wed Sep 15 20:52:32 2004
Subject: [dev-context] supp-mps
Message-ID: <41488F6C.8080601@seznam.cz>

Hi,

there is an additional space in the end of the line 653 in supp-mps.tex
(latest alpha):

        \immediate\write\MPwrite{verbatimtex \MPinputtranslation etex ;}

It causes e.g. wrong left border in

\startTEXpage
   \useMPgraphic{dvere-sup}
\stopTEXpage

Vit Zyka

From atl at comp.lancs.ac.uk  Fri Sep 17 16:23:26 2004
From: atl at comp.lancs.ac.uk (Adam Lindsay)
Date: Fri Sep 17 16:23:30 2004
Subject: [dev-context] alpha version
Message-ID: <20040917152326.7542@news.comp.lancs.ac.uk>

I'm doing a little more work on XeTeX/ConTeXt, and noticed these lines
introduced in the alpha version, which don't properly guard against
\undefineds...

\ifnum\etexversion<202
  \prependtoks
     \writestatus\m!systems{eTeX version \number\etexversion\space -> too
old (bugs)
}%
     \writeline
  \to \everyjob
\fi

\ifnum\number\pdftexversion<120
  \prependtoks
     \writestatus\m!systems{pdfTeX version \number\pdftexversion\space ->
please upd
ate}%
     \writeline
  \to \everyjob
\fi


XeTeX doesn't like \pdftexversion, and it took me a while to realise it
wasn't my fault!

adam
-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
 Adam T. Lindsay, Computing Dept.     atl@comp.lancs.ac.uk
 Lancaster University, InfoLab21        +44(0)1524/510.514
 Lancaster, LA1 4WA, UK             Fax:+44(0)1524/510.492
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-


From atl at comp.lancs.ac.uk  Fri Sep 17 16:25:02 2004
From: atl at comp.lancs.ac.uk (Adam Lindsay)
Date: Fri Sep 17 16:25:08 2004
Subject: [dev-context] Re: alpha version
In-Reply-To: <20040917152326.7542@news.comp.lancs.ac.uk>
References: <20040917152326.7542@news.comp.lancs.ac.uk>
Message-ID: <20040917152502.29314@news.comp.lancs.ac.uk>

Adam Lindsay said this at Fri, 17 Sep 2004 15:23:26 +0100:

>I'm doing a little more work on XeTeX/ConTeXt, and noticed these lines
>introduced in the alpha version, which don't properly guard against
>\undefineds...

duh. sorry. Introduced in "core-job", Hans. I meant to put that and not
assume you knew every single line of your code intimately.

adam
-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
 Adam T. Lindsay, Computing Dept.     atl@comp.lancs.ac.uk
 Lancaster University, InfoLab21        +44(0)1524/510.514
 Lancaster, LA1 4WA, UK             Fax:+44(0)1524/510.492
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-


From pragma at wxs.nl  Fri Sep 17 18:27:36 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Fri Sep 17 18:39:43 2004
Subject: [dev-context] new alpha
Message-ID: <414B1078.6010301@wxs.nl>

I uploaded a new alpha version.

Next week we should pick up the xml syntax definition thread.

Hans

-----------------------------------------------------------------
                                          Hans Hagen | PRAGMA ADE
              Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                             | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Mon Sep 20 10:11:26 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon Sep 20 10:11:29 2004
Subject: [dev-context] new alpha
In-Reply-To: <414B1078.6010301@wxs.nl>
References: <414B1078.6010301@wxs.nl>
Message-ID: <20040920101126.6e46d18e@glenlivet.elvenkind.com>

On Fri, 17 Sep 2004 18:27:36 +0200, Hans wrote:

> I uploaded a new alpha version.

I believe the new alpha contained the following changes:

* new metafun file: mp-figs.mp
* texexec: new option --autopath
* xmltools.rb 1.1 (Hans, what's new?)
* context.tex: version 2004.9.17
* mutations to cont-new.tex
* figure placement fixes
* \triangleup fix
* float caption changes
* an extension to spotcolor handling
* a set of other minor fixes
* new sample file: hawking .tex



-- 
groeten,

Taco
From pragma at wxs.nl  Mon Sep 20 17:48:43 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Sep 20 17:48:51 2004
Subject: [dev-context] new alpha
In-Reply-To: <20040920101126.6e46d18e@glenlivet.elvenkind.com>
References: <414B1078.6010301@wxs.nl>
	<20040920101126.6e46d18e@glenlivet.elvenkind.com>
Message-ID: <414EFBDB.3040502@wxs.nl>

Taco Hoekwater wrote:

>I believe the new alpha contained the following changes:
>
>* new metafun file: mp-figs.mp
>* texexec: new option --autopath
>* xmltools.rb 1.1 (Hans, what's new?)
>  
>
probably -analyze

>* context.tex: version 2004.9.17
>* mutations to cont-new.tex
>* figure placement fixes
>* \triangleup fix
>* float caption changes
>* an extension to spotcolor handling
>* a set of other minor fixes
>  
>
-)

>* new sample file: hawking .tex
>  
>
plus a first attemt to xml fo (foxet)

Hans

From taco at elvenkind.com  Mon Sep 20 18:58:05 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon Sep 20 18:54:48 2004
Subject: [dev-context] new alpha
In-Reply-To: <414EFBDB.3040502@wxs.nl>
References: <414B1078.6010301@wxs.nl>
	<20040920101126.6e46d18e@glenlivet.elvenkind.com>
	<414EFBDB.3040502@wxs.nl>
Message-ID: <20040920185805.1d1961ad.taco@elvenkind.com>


That reminds me ...

Hans Hagen <pragma@wxs.nl> wrote:
> >* mutations to cont-new.tex

I believe you should strive for cont-new.tex to be completely empty whenever
a current alpha/beta becomes the new release. Personally I find cont-new.tex 
more of a problem than an asset (most of the time). It is very easy to end
up with 'out of sync' versions that are inputted runtime and (re-)introduce
weird bugs.

Another thing: it would be nice if we could add an --uninstall or --upgrade
or --install option to texexec. Sometimes old files need to be deleted, and 
this is not easy for 'normal' users. If you like the idea, I could have a go
at it (I'd make a standalone version first, just like texversion.pl)

Greetings, Taco

From pragma at wxs.nl  Tue Sep 21 18:16:49 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Tue Sep 21 18:16:55 2004
Subject: [dev-context] new alpha
In-Reply-To: <20040920185805.1d1961ad.taco@elvenkind.com>
References: <414B1078.6010301@wxs.nl>
	<20040920101126.6e46d18e@glenlivet.elvenkind.com>
	<414EFBDB.3040502@wxs.nl>
	<20040920185805.1d1961ad.taco@elvenkind.com>
Message-ID: <415053F1.1010000@wxs.nl>

Taco Hoekwater wrote:

>That reminds me ...
>
>Hans Hagen <pragma@wxs.nl> wrote:
>  
>
>>>* mutations to cont-new.tex
>>>      
>>>
>
>I believe you should strive for cont-new.tex to be completely empty whenever
>a current alpha/beta becomes the new release. Personally I find cont-new.tex 
>more of a problem than an asset (most of the time). It is very easy to end
>up with 'out of sync' versions that are inputted runtime and (re-)introduce
>weird bugs.
>  
>
when i find the time i'll do it; the problem is that i then forget about 
the yet undocumented new things in there -)

imagine that you also have a cont-loc on your system ...

>Another thing: it would be nice if we could add an --uninstall or --upgrade
>or --install option to texexec. Sometimes old files need to be deleted, and 
>this is not easy for 'normal' users. If you like the idea, I could have a go
>at it (I'd make a standalone version first, just like texversion.pl)
>  
>
makes sense so go ahead

Hans

From taco at elvenkind.com  Wed Sep 22 12:16:16 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed Sep 22 12:16:20 2004
Subject: [dev-context] new alpha
In-Reply-To: <415053F1.1010000@wxs.nl>
References: <414B1078.6010301@wxs.nl>
	<20040920101126.6e46d18e@glenlivet.elvenkind.com>
	<414EFBDB.3040502@wxs.nl>
	<20040920185805.1d1961ad.taco@elvenkind.com>
	<415053F1.1010000@wxs.nl>
Message-ID: <20040922121616.66872ee3@glenlivet.elvenkind.com>

On Tue, 21 Sep 2004 18:16:49 +0200, Hans wrote:

> >Another thing: it would be nice if we could add an --uninstall or --upgrade
> >or --install option to texexec. Sometimes old files need to be deleted, and 
> >this is not easy for 'normal' users. If you like the idea, I could have a go
> >at it (I'd make a standalone version first, just like texversion.pl)
> >  
> >
> makes sense so go ahead

This will take some time since I am quite busy right now, but I'm 'on it'.


-- 
groeten,

Taco
From patrick at gundla.ch  Wed Sep 22 23:54:55 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed Sep 22 23:54:31 2004
Subject: [dev-context] announce beta: source code browser (web)
Message-ID: <m2sm9armts.fsf@levana.de>

Hello out there,

I have yet another plant in the garden: the source code browser

(http://source.contextgarden.net)

This is still beta (very slow, no caching done yet and ugly and....)

you can use it like this:

http://source.contextgarden.net/  
    -> browse directories
http://source.contextgarden.net/tex/context/base/context.tex 
    -> look at the file
http://source.contextgarden.net/context.tex 
   -> let the source browser find the file for you
http://source.contextgarden.net/tex/context/base/core-pos.tex#setpositions
or
http://source.contextgarden.net/core-pos.tex#setpositions
     -> look at core-pos.tex and go to \def\setposition

The last one should be handy for the texshow-web (api)


Patrick

(I'll improve this whithin the next days, so don't flame me if there
is some downtime on source.contextgarden.net)
From pragma at wxs.nl  Thu Sep 23 09:56:58 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Sep 23 09:57:04 2004
Subject: [dev-context] announce beta: source code browser (web)
In-Reply-To: <m2sm9armts.fsf@levana.de>
References: <m2sm9armts.fsf@levana.de>
Message-ID: <415281CA.9010903@wxs.nl>

Patrick Gundlach wrote:

>Hello out there,
>
>I have yet another plant in the garden: the source code browser
>
>(http://source.contextgarden.net)
>
>This is still beta (very slow, no caching done yet and ugly and....)
>  
>

nice -)

core-pos.tex "

\def\overlappingmargin-2\scaledpoint}

i attached th ec version of the scite lexers i wrote, maybe that helps -) [ok, there si still a bug in them with regards to comments]

Hans


-------------- next part --------------
// Scintilla source code edit control

// File: LexMetapost.cxx - general context conformant metapost coloring scheme
// Author: Hans Hagen - PRAGMA ADE - Hasselt NL - www.pragma-ade.com
// Version: September 28, 2003

// Copyright: 1998-2003 by Neil Hodgson <neilh@scintilla.org>
// The License.txt file describes the conditions under which this software may be distributed.

// This lexer is derived from the one written for the texwork environment (1999++) which in
// turn is inspired on texedit (1991++) which finds its roots in wdt (1986).

#include <stdlib.h>
#include <string.h>
#include <ctype.h>
#include <stdio.h>
#include <stdarg.h>

#include "Platform.h"

#include "PropSet.h"
#include "Accessor.h"
#include "KeyWords.h"
#include "Scintilla.h"
#include "SciLexer.h"
#include "StyleContext.h"

// val SCE_METAPOST_DEFAULT = 0
// val SCE_METAPOST_SPECIAL = 1
// val SCE_METAPOST_GROUP = 2
// val SCE_METAPOST_SYMBOL = 3
// val SCE_METAPOST_COMMAND = 4
// val SCE_METAPOST_TEXT = 5

// Definitions in SciTEGlobal.properties:
//
// Metapost Highlighting
//
// # Default
// style.metapost.0=fore:#7F7F00
// # Special
// style.metapost.1=fore:#007F7F
// # Group
// style.metapost.2=fore:#880000
// # Symbol
// style.metapost.3=fore:#7F7F00
// # Command
// style.metapost.4=fore:#008800
// # Text
// style.metapost.5=fore:#000000

// lexer.tex.comment.process=0

// Auxiliary functions:

static inline bool endOfLine(Accessor &styler, unsigned int i) {
	return
      (styler[i] == '\n') || ((styler[i] == '\r') && (styler.SafeGetCharAt(i + 1) != '\n')) ;
}

static inline bool isMETAPOSTcomment(int ch) {
	return
      (ch == '%') ;
}

static inline bool isMETAPOSTone(int ch) {
	return
      (ch == '[') || (ch == ']') || (ch == '(') || (ch == ')') ||
      (ch == ':') || (ch == '=') || (ch == '<') || (ch == '>') ||
      (ch == '{') || (ch == '}') || (ch == '\'') || (ch == '\"') ;
}

static inline bool isMETAPOSTtwo(int ch) {
	return
      (ch == ';') || (ch == '$') || (ch == '@') || (ch == '#');
}

static inline bool isMETAPOSTthree(int ch) {
	return
      (ch == '.') || (ch == '-') || (ch == '+') || (ch == '/') ||
      (ch == '*') || (ch == ',') || (ch == '|') || (ch == '`') ||
      (ch == '!') || (ch == '?') || (ch == '^') || (ch == '&') ||
      (ch == '%') ;
}

static inline bool isMETAPOSTidentifier(int ch) {
	return
      ((ch >= 'a') && (ch <= 'z')) || ((ch >= 'A') && (ch <= 'Z')) ||
      (ch == '_') ;
}

static inline bool isMETAPOSTnumber(int ch) {
	return
      (ch >= '0') && (ch <= '9') ;
}

static inline bool isMETAPOSTstring(int ch) {
	return
      (ch == '\"') ;
}

static inline bool isMETAPOSTcolon(int ch) {
	return
		(ch == ':') ;
}

static inline bool isMETAPOSTequal(int ch) {
	return
		(ch == '=') ;
}

static int CheckMETAPOSTInterface(
    unsigned int startPos,
    int length,
    Accessor &styler,
	int defaultInterface) {

    char lineBuffer[1024] ;
	unsigned int linePos = 0 ;

	// some day we can make something lexer.metapost.mapping=(none,0)(metapost,1)(mp,1)(metafun,2)...

    if (styler.SafeGetCharAt(0) == '%') {
        for (unsigned int i = 0; i < startPos + length; i++) {
            lineBuffer[linePos++] = styler.SafeGetCharAt(i) ;
            if (endOfLine(styler, i) || (linePos >= sizeof(lineBuffer) - 1)) {
                lineBuffer[linePos] = '\0';
				if (strstr(lineBuffer, "interface=none")) {
                    return 0 ;
				} else if (strstr(lineBuffer, "interface=metapost") || strstr(lineBuffer, "interface=mp")) {
                    return 1 ;
				} else if (strstr(lineBuffer, "interface=metafun")) {
                    return 2 ;
				} else if (styler.SafeGetCharAt(1) == 'D' && strstr(lineBuffer, "%D \\module")) {
					// better would be to limit the search to just one line
					return 2 ;
                } else {
                    return defaultInterface ;
                }
            }
		}
    }

    return defaultInterface ;
}

static void ColouriseMETAPOSTDoc(
    unsigned int startPos,
    int length,
    int,
    WordList *keywordlists[],
    Accessor &styler) {

	styler.StartAt(startPos) ;
	styler.StartSegment(startPos) ;

	bool processComment   = styler.GetPropertyInt("lexer.metapost.comment.process",   0) == 1 ;
    int  defaultInterface = styler.GetPropertyInt("lexer.metapost.interface.default", 1) ;

	int currentInterface = CheckMETAPOSTInterface(startPos,length,styler,defaultInterface) ;

	// 0  no keyword highlighting
	// 1  metapost keyword hightlighting
	// 2+ metafun keyword hightlighting

	int extraInterface = 0 ;

	if (currentInterface != 0) {
		extraInterface = currentInterface ;
	}

	WordList &keywords  = *keywordlists[0] ;
	WordList &keywords2 = *keywordlists[extraInterface-1] ;

	StyleContext sc(startPos, length, SCE_METAPOST_TEXT, styler) ;

	char key[100] ;

    bool inTeX     = false ;
	bool inComment = false ;
	bool inString  = false ;
	bool inClause  = false ;

	bool going = sc.More() ; // needed because of a fuzzy end of file state

	for (; going; sc.Forward()) {

		if (! sc.More()) { going = false ; } // we need to go one behind the end of text

		if (inClause) {
			sc.SetState(SCE_METAPOST_TEXT) ;
			inClause = false ;
		}

		if (inComment) {
			if (sc.atLineEnd) {
				sc.SetState(SCE_METAPOST_TEXT) ;
				inTeX = false ;
				inComment = false ;
				inClause = false ;
				inString = false ; // not correct but we want to stimulate one-lines
			}
		} else if (inString) {
			if (isMETAPOSTstring(sc.ch)) {
				sc.SetState(SCE_METAPOST_SPECIAL) ;
				sc.ForwardSetState(SCE_METAPOST_TEXT) ;
				inString = false ;
			} else if (sc.atLineEnd) {
				sc.SetState(SCE_METAPOST_TEXT) ;
				inTeX = false ;
				inComment = false ;
				inClause = false ;
				inString = false ; // not correct but we want to stimulate one-lines
			}
		} else {
			if ((! isMETAPOSTidentifier(sc.ch)) && (sc.LengthCurrent() > 0)) {
				if (sc.state == SCE_METAPOST_COMMAND) {
					sc.GetCurrent(key, sizeof(key)) ;
					if ((strcmp(key,"btex") == 0) || (strcmp(key,"verbatimtex") == 0)) {
    					sc.ChangeState(SCE_METAPOST_GROUP) ;
						inTeX = true ;
					} else if (inTeX) {
						if (strcmp(key,"etex") == 0) {
	    					sc.ChangeState(SCE_METAPOST_GROUP) ;
							inTeX = false ;
						} else {
	    					sc.ChangeState(SCE_METAPOST_TEXT) ;
						}
					} else {
						if (keywords && keywords.InList(key)) {
    						sc.ChangeState(SCE_METAPOST_COMMAND) ;
						} else if (keywords2 && keywords2.InList(key)) {
							sc.ChangeState(SCE_METAPOST_EXTRA) ;
						} else {
							sc.ChangeState(SCE_METAPOST_TEXT) ;
						}
					}
				}
			}
			if (isMETAPOSTcomment(sc.ch)) {
				if (! inTeX) {
					sc.SetState(SCE_METAPOST_SYMBOL) ;
					sc.ForwardSetState(SCE_METAPOST_DEFAULT) ;
					inComment = ! processComment ;
				} else {
					sc.SetState(SCE_METAPOST_TEXT) ;
				}
			} else if (isMETAPOSTstring(sc.ch)) {
				if (! inTeX) {
					sc.SetState(SCE_METAPOST_SPECIAL) ;
					if (! isMETAPOSTstring(sc.chNext)) {
						sc.ForwardSetState(SCE_METAPOST_TEXT) ;
					}
					inString = true ;
				} else {
					sc.SetState(SCE_METAPOST_TEXT) ;
				}
			} else if (isMETAPOSTcolon(sc.ch)) {
				if (! inTeX) {
					if (! isMETAPOSTequal(sc.chNext)) {
						sc.SetState(SCE_METAPOST_COMMAND) ;
						inClause = true ;
					} else {
						sc.SetState(SCE_METAPOST_SPECIAL) ;
					}
				} else {
					sc.SetState(SCE_METAPOST_TEXT) ;
				}
			} else if (isMETAPOSTone(sc.ch)) {
				if (! inTeX) {
					sc.SetState(SCE_METAPOST_SPECIAL) ;
				} else {
					sc.SetState(SCE_METAPOST_TEXT) ;
				}
			} else if (isMETAPOSTtwo(sc.ch)) {
				if (! inTeX) {
					sc.SetState(SCE_METAPOST_GROUP) ;
				} else {
					sc.SetState(SCE_METAPOST_TEXT) ;
				}
			} else if (isMETAPOSTthree(sc.ch)) {
				if (! inTeX) {
					sc.SetState(SCE_METAPOST_SYMBOL) ;
				} else {
					sc.SetState(SCE_METAPOST_TEXT) ;
				}
			} else if (isMETAPOSTidentifier(sc.ch)) {
				if (sc.state != SCE_METAPOST_COMMAND) {
					sc.SetState(SCE_METAPOST_TEXT) ;
					sc.ChangeState(SCE_METAPOST_COMMAND) ;
				}
			} else if (isMETAPOSTnumber(sc.ch)) {
				// rather redundant since for the moment we don't handle numbers
				sc.SetState(SCE_METAPOST_TEXT) ;
			} else if (sc.atLineEnd) {
				sc.SetState(SCE_METAPOST_TEXT) ;
				inTeX = false ;
				inComment = false ;
				inClause = false ;
				inString = false ;
			} else {
				sc.SetState(SCE_METAPOST_TEXT) ;
			}
		}

	}

	sc.Complete();

}

// Hooks info the system:

static const char * const metapostWordListDesc[] = {
	"MetaPost",
	"MetaFun",
	0
} ;

LexerModule lmMETAPOST(SCLEX_METAPOST, ColouriseMETAPOSTDoc, "metapost", 0, metapostWordListDesc);
-------------- next part --------------
// Scintilla source code edit control

// File: LexTeX.cxx - general context conformant tex coloring scheme
// Author: Hans Hagen - PRAGMA ADE - Hasselt NL - www.pragma-ade.com
// Version: September 28, 2003

// Copyright: 1998-2003 by Neil Hodgson <neilh@scintilla.org>
// The License.txt file describes the conditions under which this software may be distributed.

// This lexer is derived from the one written for the texwork environment (1999++) which in
// turn is inspired on texedit (1991++) which finds its roots in wdt (1986).

// If you run into strange boundary cases, just tell me and I'll look into it.

#include <stdlib.h>
#include <string.h>
#include <ctype.h>
#include <stdio.h>
#include <stdarg.h>

#include "Platform.h"

#include "PropSet.h"
#include "Accessor.h"
#include "KeyWords.h"
#include "Scintilla.h"
#include "SciLexer.h"
#include "StyleContext.h"

// val SCE_TEX_DEFAULT = 0
// val SCE_TEX_SPECIAL = 1
// val SCE_TEX_GROUP   = 2
// val SCE_TEX_SYMBOL  = 3
// val SCE_TEX_COMMAND = 4
// val SCE_TEX_TEXT    = 5

// Definitions in SciTEGlobal.properties:
//
// TeX Highlighting
//
// # Default
// style.tex.0=fore:#7F7F00
// # Special
// style.tex.1=fore:#007F7F
// # Group
// style.tex.2=fore:#880000
// # Symbol
// style.tex.3=fore:#7F7F00
// # Command
// style.tex.4=fore:#008800
// # Text
// style.tex.5=fore:#000000

// lexer.tex.interface.default=0
// lexer.tex.comment.process=0

// todo: lexer.tex.auto.if

// Auxiliary functions:

static inline bool endOfLine(Accessor &styler, unsigned int i) {
	return
      (styler[i] == '\n') || ((styler[i] == '\r') && (styler.SafeGetCharAt(i + 1) != '\n')) ;
}

static inline bool isTeXzero(int ch) {
	return
      (ch == '%') ;
}

static inline bool isTeXone(int ch) {
	return
      (ch == '[') || (ch == ']') || (ch == '=') || (ch == '#') ||
      (ch == '(') || (ch == ')') || (ch == '<') || (ch == '>') ||
      (ch == '"') ;
}

static inline bool isTeXtwo(int ch) {
	return
      (ch == '{') || (ch == '}') || (ch == '$') ;
}

static inline bool isTeXthree(int ch) {
	return
      (ch == '~') || (ch == '^') || (ch == '_') || (ch == '&') ||
      (ch == '-') || (ch == '+') || (ch == '\"') || (ch == '`') ||
      (ch == '/') || (ch == '|') || (ch == '%') ;
}

static inline bool isTeXfour(int ch) {
	return
      (ch == '\\') ;
}

static inline bool isTeXfive(int ch) {
	return
      ((ch >= 'a') && (ch <= 'z')) || ((ch >= 'A') && (ch <= 'Z')) ||
      (ch == '@') || (ch == '!') || (ch == '?') ;
}

static inline bool isTeXsix(int ch) {
	return
      (ch == ' ') ;
}

static inline bool isTeXseven(int ch) {
	return
      (ch == '^') ;
}

// Interface determination

static int CheckTeXInterface(
    unsigned int startPos,
    int length,
    Accessor &styler,
	int defaultInterface) {

    char lineBuffer[1024] ;
	unsigned int linePos = 0 ;

    // some day we can make something lexer.tex.mapping=(all,0)(nl,1)(en,2)...

    if (styler.SafeGetCharAt(0) == '%') {
        for (unsigned int i = 0; i < startPos + length; i++) {
            lineBuffer[linePos++] = styler.SafeGetCharAt(i) ;
            if (endOfLine(styler, i) || (linePos >= sizeof(lineBuffer) - 1)) {
                lineBuffer[linePos] = '\0';
                if (strstr(lineBuffer, "interface=all")) {
                    return 0 ;
				} else if (strstr(lineBuffer, "interface=tex")) {
                    return 1 ;
                } else if (strstr(lineBuffer, "interface=nl")) {
                    return 2 ;
                } else if (strstr(lineBuffer, "interface=en")) {
                    return 3 ;
                } else if (strstr(lineBuffer, "interface=de")) {
                    return 4 ;
                } else if (strstr(lineBuffer, "interface=cz")) {
                    return 5 ;
                } else if (strstr(lineBuffer, "interface=it")) {
                    return 6 ;
                } else if (strstr(lineBuffer, "interface=ro")) {
                    return 7 ;
                } else if (strstr(lineBuffer, "interface=latex")) {
					// we will move latex cum suis up to 91+ when more keyword lists are supported
                    return 8 ;
				} else if (styler.SafeGetCharAt(1) == 'D' && strstr(lineBuffer, "%D \\module")) {
					// better would be to limit the search to just one line
					return 3 ;
                } else {
                    return defaultInterface ;
                }
            }
		}
    }

    return defaultInterface ;
}

static void ColouriseTeXDoc(
    unsigned int startPos,
    int length,
    int,
    WordList *keywordlists[],
    Accessor &styler) {

	styler.StartAt(startPos) ;
	styler.StartSegment(startPos) ;

	bool processComment   = styler.GetPropertyInt("lexer.tex.comment.process",   0) == 1 ;
    bool useKeywords      = styler.GetPropertyInt("lexer.tex.use.keywords",      1) == 1 ;
	bool autoIf           = styler.GetPropertyInt("lexer.tex.auto.if",           1) == 1 ;
    int  defaultInterface = styler.GetPropertyInt("lexer.tex.interface.default", 1) ;

	char key[100] ;
	int  k ;
	bool newifDone = false ;
	bool inComment = false ;

	int currentInterface = CheckTeXInterface(startPos,length,styler,defaultInterface) ;

    if (currentInterface == 0) {
        useKeywords = false ;
        currentInterface = 1 ;
    }

    WordList &keywords = *keywordlists[currentInterface-1] ;

	StyleContext sc(startPos, length, SCE_TEX_TEXT, styler);

	bool going = sc.More() ; // needed because of a fuzzy end of file state

	for (; going; sc.Forward()) {

		if (! sc.More()) { going = false ; } // we need to go one behind the end of text

		if (inComment) {
			if (sc.atLineEnd) {
				sc.SetState(SCE_TEX_TEXT) ;
				newifDone = false ;
				inComment = false ;
			}
		} else {
			if (! isTeXfive(sc.ch)) {
				if (sc.state == SCE_TEX_COMMAND) {
					if (sc.LengthCurrent() == 1) { // \<noncstoken>
						if (isTeXseven(sc.ch) && isTeXseven(sc.chNext)) {
							sc.Forward(2) ; // \^^ and \^^<token>
						}
						sc.ForwardSetState(SCE_TEX_TEXT) ;
					} else {
						sc.GetCurrent(key, sizeof(key)-1) ;
						k = strlen(key) ;
						memmove(key,key+1,k) ; // shift left over escape token
						key[k] = '\0' ;
						k-- ;
						if (! keywords || ! useKeywords) {
							sc.SetState(SCE_TEX_COMMAND) ;
							newifDone = false ;
						} else if (k == 1) { //\<cstoken>
							sc.SetState(SCE_TEX_COMMAND) ;
							newifDone = false ;
						} else if (keywords.InList(key)) {
    						sc.SetState(SCE_TEX_COMMAND) ;
							newifDone = autoIf && (strcmp(key,"newif") == 0) ;
						} else if (autoIf && ! newifDone && (key[0] == 'i') && (key[1] == 'f') && keywords.InList("if")) {
	    					sc.SetState(SCE_TEX_COMMAND) ;
						} else {
							sc.ChangeState(SCE_TEX_TEXT) ;
							sc.SetState(SCE_TEX_TEXT) ;
							newifDone = false ;
						}
					}
				}
				if (isTeXzero(sc.ch)) {
					sc.SetState(SCE_TEX_SYMBOL) ;
					sc.ForwardSetState(SCE_TEX_DEFAULT) ;
					inComment = ! processComment ;
					newifDone = false ;
				} else if (isTeXseven(sc.ch) && isTeXseven(sc.chNext)) {
					sc.SetState(SCE_TEX_TEXT) ;
					sc.ForwardSetState(SCE_TEX_TEXT) ;
				} else if (isTeXone(sc.ch)) {
					sc.SetState(SCE_TEX_SPECIAL) ;
					newifDone = false ;
				} else if (isTeXtwo(sc.ch)) {
					sc.SetState(SCE_TEX_GROUP) ;
					newifDone = false ;
				} else if (isTeXthree(sc.ch)) {
					sc.SetState(SCE_TEX_SYMBOL) ;
					newifDone = false ;
				} else if (isTeXfour(sc.ch)) {
					sc.SetState(SCE_TEX_COMMAND) ;
				} else if (isTeXsix(sc.ch)) {
					sc.SetState(SCE_TEX_TEXT) ;
				} else if (sc.atLineEnd) {
					sc.SetState(SCE_TEX_TEXT) ;
					newifDone = false ;
					inComment = false ;
				} else {
					sc.SetState(SCE_TEX_TEXT) ;
				}
			} else if (sc.state != SCE_TEX_COMMAND) {
				sc.SetState(SCE_TEX_TEXT) ;
			}
		}
	}
	sc.ChangeState(SCE_TEX_TEXT) ;
	sc.Complete();

}


// Hooks into the system:

static const char * const texWordListDesc[] = {
    "TeX, eTeX, pdfTeX, Omega"
    "ConTeXt Dutch",
    "ConTeXt English",
    "ConTeXt German",
    "ConTeXt Czech",
    "ConTeXt Italian",
    "ConTeXt Romanian",
	0,
} ;

LexerModule lmTeX(SCLEX_TEX, ColouriseTeXDoc, "tex", 0, texWordListDesc);
From taco at elvenkind.com  Thu Sep 23 10:04:34 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu Sep 23 10:04:37 2004
Subject: [dev-context] new alpha
In-Reply-To: <20040922121616.66872ee3@glenlivet.elvenkind.com>
References: <414B1078.6010301@wxs.nl>
	<20040920101126.6e46d18e@glenlivet.elvenkind.com>
	<414EFBDB.3040502@wxs.nl>
	<20040920185805.1d1961ad.taco@elvenkind.com>
	<415053F1.1010000@wxs.nl>
	<20040922121616.66872ee3@glenlivet.elvenkind.com>
Message-ID: <20040923100434.77277607@glenlivet.elvenkind.com>


Hans, 

It looks there are still some dutch macros (\maakhetnummer c.s., for example). 
Assuming this is accidental, I could attempt to (auto-)create a list of these?

-- 
groeten,

Taco
From taco at elvenkind.com  Mon Sep 27 09:33:39 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon Sep 27 09:33:44 2004
Subject: [dev-context] core-des (Re: \defineenumeration broken in alpha)
In-Reply-To: <4153F2D4.8080203@wxs.nl>
References: <41532FD6.8040708@creutzig.de>
	<4153F2D4.8080203@wxs.nl>
Message-ID: <20040927093339.01a5f07c@glenlivet.elvenkind.com>


Hans,

I've patched my local alpha tree by updating core-des.tex (i've ignored
core-des-des). I hope that was correct?

Greetings, Taco

On Fri, 24 Sep 2004 12:11:32 +0200, Hans wrote:

> Hi Christopher
> 
> >  either \defineenumeration is broken in , or I always used it 
> > incorrectly:
> 
> a problem indeed; i missed a couple of low level translations
> 
> attached is a new file; you may also test the core-des-des one (just 
> input it in cont-new or in your file)
> 
> Hans
> 


-- 
groeten,

Taco
From pragma at wxs.nl  Mon Sep 27 09:57:28 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Sep 27 09:57:36 2004
Subject: [dev-context] core-des (Re: \defineenumeration broken in alpha)
In-Reply-To: <20040927093339.01a5f07c@glenlivet.elvenkind.com>
References: <41532FD6.8040708@creutzig.de> <4153F2D4.8080203@wxs.nl>
	<20040927093339.01a5f07c@glenlivet.elvenkind.com>
Message-ID: <4157C7E8.4060208@wxs.nl>

Taco Hoekwater wrote:
> Hans,
> 
> I've patched my local alpha tree by updating core-des.tex (i've ignored
> core-des-des). I hope that was correct?

sure, (although i run core-des-des here -)

in a week or so we need to go beta (since i want this version on tex live)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Fri Oct  1 22:25:29 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Fri Oct  1 22:25:31 2004
Subject: [dev-context] new web site
In-Reply-To: <4157C7E8.4060208@wxs.nl>
References: <41532FD6.8040708@creutzig.de> <4153F2D4.8080203@wxs.nl>
	<20040927093339.01a5f07c@glenlivet.elvenkind.com>
	<4157C7E8.4060208@wxs.nl>
Message-ID: <415DBD39.2080600@wxs.nl>

Hi,

At http://www.pragma-ade.com:8069 you can find a preview of the new 
pragma web site. It works ok with firefox, kind of ok with opera, ok at 
the cost of some mess with internet explorer, not optimal with safari 
but ...

... the nice thing is that i now generate the whole lot from a small set 
of xml documents using xslt, so that i can more easily maintain the site 
+ links; the next/previous buttons work as in pdf docs -)

if you click the 'exa' link, you will get a few interfaces

currently it runs on our old web server [some 500 mhz celeron machine]; 
in a couple of week it will run on one of our new web servers (2.2 gig 
64 bit opterons)

i cross my fingers that the webrick based http server (ruby) can handle 
things (i'll run the webpages on apache as well)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Sat Oct  2 09:41:47 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat Oct  2 09:42:02 2004
Subject: [dev-context] new web site
In-Reply-To: <415DBD39.2080600@wxs.nl>
References: <41532FD6.8040708@creutzig.de> <4153F2D4.8080203@wxs.nl>
	<20040927093339.01a5f07c@glenlivet.elvenkind.com>
	<4157C7E8.4060208@wxs.nl> <415DBD39.2080600@wxs.nl>
Message-ID: <20041002094147.43cbb3be.taco@elvenkind.com>


Hi Hans,

I just went there and had a look around. I like the look of
the new site, but of course I have comments. Then again, I assume
that is why it was on dev-context in the first place :)

Here we go:

- Assuming most of the CSS is 'frozen', you could move that into 
  a separate style.css file and linking to that. It will save you
  on traffic and it makes it easier to use a different CSS file 
  for IE (if desired). The best 'real' solution for IE and older 
  browsers would (no doubt) be to use frames.

- In my browser (a galeon based on mozilla 1.4), the main download
  window and the 'documents and examples' window force a 
  horizontal scrollbar to appear (the table is wider than it's 
  allocated space). Will check with a newer browser on monday,
  but the problem will probably remain as long as there are
  table tags. 'position: absolute' and html tables do not blend 
  well, is my experience.

- The 'pod' login page is a bit different from the rest, I assume
  that is on purpose, but I thought I'd better ask j.i.k.

- it would be nice if it was clear from the outset that the
  'showcase' is a pdf file. Or perhaps make it pop up a window
  of it's own? It destroys the layout which is a pity.

- the 'next-previous' buttons give no visual indication of how 
  'large' the loop is nor on what page of the loop you are,
  and I miss that. Perhaps a color-bar as in some of the s-pre 
  styles?

- Fianlly, all pages have the title "Generated page", which is 
  correct but somewhat pointless.

Greetings and good luck,

Taco

On Fri, 01 Oct 2004 22:25:29 +0200
Hans Hagen <pragma@wxs.nl> wrote:

> Hi,
> 
> At http://www.pragma-ade.com:8069 you can find a preview of the new 
> pragma web site. It works ok with firefox, kind of ok with opera, ok at 
> the cost of some mess with internet explorer, not optimal with safari 
> but ...
> 
> ... the nice thing is that i now generate the whole lot from a small set 
> of xml documents using xslt, so that i can more easily maintain the site 
> + links; the next/previous buttons work as in pdf docs -)
> 
> if you click the 'exa' link, you will get a few interfaces
> 
> currently it runs on our old web server [some 500 mhz celeron machine]; 
> in a couple of week it will run on one of our new web servers (2.2 gig 
> 64 bit opterons)
> 
> i cross my fingers that the webrick based http server (ruby) can handle 
> things (i'll run the webpages on apache as well)
> 
> Hans
> 
> 
> -----------------------------------------------------------------
>                                            Hans Hagen | PRAGMA ADE
>                Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>       tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
>                                               | www.pragma-pod.nl
> -----------------------------------------------------------------
> 
> _______________________________________________
> dev-context mailing list
> dev-context@ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context
From siepo at cybercomm.nl  Sat Oct  2 11:35:21 2004
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Sat Oct  2 11:35:18 2004
Subject: [dev-context] new web site
In-Reply-To: <415DBD39.2080600@wxs.nl>
References: <41532FD6.8040708@creutzig.de> <4153F2D4.8080203@wxs.nl>
	<20040927093339.01a5f07c@glenlivet.elvenkind.com>
	<4157C7E8.4060208@wxs.nl> <415DBD39.2080600@wxs.nl>
Message-ID: <20041002093521.GC6793@muisje>

On Fri, Oct 01, 2004 at 10:25:29PM +0200, Hans Hagen wrote:
> Hi,
> 
> At http://www.pragma-ade.com:8069 you can find a preview of the new 
> pragma web site. It works ok with firefox, kind of ok with opera, ok at 
> the cost of some mess with internet explorer, not optimal with safari 
> but ...
> 
> ... the nice thing is that i now generate the whole lot from a small set 
> of xml documents using xslt, so that i can more easily maintain the site 
> + links; the next/previous buttons work as in pdf docs -)
> 
> if you click the 'exa' link, you will get a few interfaces
> 
> currently it runs on our old web server [some 500 mhz celeron machine]; 
> in a couple of week it will run on one of our new web servers (2.2 gig 
> 64 bit opterons)
> 
> i cross my fingers that the webrick based http server (ruby) can handle 
> things (i'll run the webpages on apache as well)
> 
> Hans

Pretty nice; a great improvement in terms of navigation. Two
comments, though:

1. What about just using relative font sizes?

2. The site relies rather heavily on color for subdividing the
page. FireFox and other browsers have an option to enforce the
user's choice of colors. The page design doesn't hold up too well
with that option enabled.

-- 
Siep Kroonenberg
From pragma at wxs.nl  Sat Oct  2 20:32:56 2004
From: pragma at wxs.nl (h h extern)
Date: Sat Oct  2 20:32:59 2004
Subject: [dev-context] new web site
In-Reply-To: <20041002093521.GC6793@muisje>
References: <41532FD6.8040708@creutzig.de> <4153F2D4.8080203@wxs.nl>
	<20040927093339.01a5f07c@glenlivet.elvenkind.com>
	<4157C7E8.4060208@wxs.nl> <415DBD39.2080600@wxs.nl>
	<20041002093521.GC6793@muisje>
Message-ID: <415EF458.6010002@wxs.nl>

Siep Kroonenberg wrote:

> 1. What about just using relative font sizes?

i tested al these things with different browsers; in only use three 
sizes (in px measures since they are supposed to be treated assuming 96 
dpi; which seems t be true for all browsers i tested); using a % would 
be nice, but each browser has a different opinion on how to deal with % 
at what level of <div>; actually, i'm really surprised that so many 
sites work at all (probably because of of dirty tricks or javascript 
based css]; safari was the worst: the navigation ended up way off screen 
; i now use a system of more or less fixed sized combined with misusing 
padding/margins as compensation jumps

[i spent a whole week playing with css and margins and percentages and 
... what a mess; search the web for vertical alignment in css and you 
get pretty depressed]

i now made the fonts a bit smaller (tuned for 1024x768; i was testing on 
1600x1200; i keep playing with a way to find a good base size [window 
size dependent] and start from that;

> 2. The site relies rather heavily on color for subdividing the
> page. FireFox and other browsers have an option to enforce the
> user's choice of colors. The page design doesn't hold up too well
> with that option enabled.

hm, i need to look into that; but isn't user defined coloring going to 
spoil about every site that uses colors?

i will probably use different color combinations every few months -)


[i now understand why some sites, like fontshop.be prefers macro media 
based sites, it gives more control and is browser independent]


Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Sat Oct  2 20:46:38 2004
From: pragma at wxs.nl (h h extern)
Date: Sat Oct  2 20:46:41 2004
Subject: [dev-context] new web site
In-Reply-To: <20041002094147.43cbb3be.taco@elvenkind.com>
References: <41532FD6.8040708@creutzig.de> <4153F2D4.8080203@wxs.nl>
	<20040927093339.01a5f07c@glenlivet.elvenkind.com>
	<4157C7E8.4060208@wxs.nl> <415DBD39.2080600@wxs.nl>
	<20041002094147.43cbb3be.taco@elvenkind.com>
Message-ID: <415EF78E.6030702@wxs.nl>

Hi Taco,

> Hi Hans,
> 
> I just went there and had a look around. I like the look of
> the new site, but of course I have comments. Then again, I assume
> that is why it was on dev-context in the first place :)

sure.

> Here we go:
> 
> - Assuming most of the CSS is 'frozen', you could move that into 
>   a separate style.css file and linking to that. It will save you
>   on traffic and it makes it easier to use a different CSS file 
>   for IE (if desired). The best 'real' solution for IE and older 
>   browsers would (no doubt) be to use frames.

i had that as a start, however, there is nothing like a symbolic color; 
ans so i would end up with some 20 nearly identical css styles that then 
had to be downloaded;

you're right about the trafic; once the site goes life, i'll make the 
style more compacts (less spacy)

> - In my browser (a galeon based on mozilla 1.4), the main download
>   window and the 'documents and examples' window force a 
>   horizontal scrollbar to appear (the table is wider than it's 
>   allocated space). Will check with a newer browser on monday,
>   but the problem will probably remain as long as there are
>   table tags. 'position: absolute' and html tables do not blend 
>   well, is my experience.

ok, i made the font a bit smaller now; i tested on a high res screen; i 
didn't want too wide lines, but i found out that setting

   max-width: 60em

works quite well (prevents too wide lines on a 1600x1200 full screen)

i'm thinking about an article for the maps about css versus tex -) 
interestingly th eeasierst thing, i.e. getting the page dimensions 
right, is the one bugged most; safari [kde based] is the worst

the _parameter: ... is needed for internet explorer [igmored by rest]

> - The 'pod' login page is a bit different from the rest, I assume
>   that is on purpose, but I thought I'd better ask j.i.k.

ok, will check; i generate three sets: web pages, interfaces, login 
things and they need to be moved to different places; i need to figure 
that out -)

> - it would be nice if it was clear from the outset that the
>   'showcase' is a pdf file. Or perhaps make it pop up a window
>   of it's own? It destroys the layout which is a pity.

maybe a roll over, but that is javascript; maybe i get a brainwave 
because it indeed is a strange animal (but i like the showcase); a 
similar inconsistency is in the documentations first entry (because 
there i want to default to the html based collection first)

> - the 'next-previous' buttons give no visual indication of how 
>   'large' the loop is nor on what page of the loop you are,
>   and I miss that. Perhaps a color-bar as in some of the s-pre 
>   styles?

ah ... i think that is doable; nice challenge; goes on the todo list as 
well

btw, one strange thing i ran into is that sometimes position() 
increments by 2 instead of 1

> - Fianlly, all pages have the title "Generated page", which is 
>   correct but somewhat pointless.

-) yeah, i need to pass the title around [one of the cases where the 
lack of global vars messes up xslt] ; i've put it on the todo list too


can you mirror this ok? (there is a wget.txt file as well)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From siepo at cybercomm.nl  Sat Oct  2 21:33:30 2004
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Sat Oct  2 21:33:30 2004
Subject: [dev-context] new web site
In-Reply-To: <415EF458.6010002@wxs.nl>
References: <41532FD6.8040708@creutzig.de> <4153F2D4.8080203@wxs.nl>
	<20040927093339.01a5f07c@glenlivet.elvenkind.com>
	<4157C7E8.4060208@wxs.nl> <415DBD39.2080600@wxs.nl>
	<20041002093521.GC6793@muisje> <415EF458.6010002@wxs.nl>
Message-ID: <20041002193329.GA13987@muisje>

On Sat, Oct 02, 2004 at 08:32:56PM +0200, h h extern wrote:
> Siep Kroonenberg wrote:
> 
> >1. What about just using relative font sizes?
> 
> i tested al these things with different browsers; in only use three 
> sizes (in px measures since they are supposed to be treated assuming 96 
> dpi; which seems t be true for all browsers i tested); using a % would 
> be nice, but each browser has a different opinion on how to deal with % 
> at what level of <div>; actually, i'm really surprised that so many 
> sites work at all (probably because of of dirty tricks or javascript 
> based css]; safari was the worst: the navigation ended up way off screen 
> ; i now use a system of more or less fixed sized combined with misusing 
> padding/margins as compensation jumps
> 
> [i spent a whole week playing with css and margins and percentages and 
> ... what a mess; search the web for vertical alignment in css and you 
> get pretty depressed]
> 
> i now made the fonts a bit smaller (tuned for 1024x768; i was testing on 
> 1600x1200; i keep playing with a way to find a good base size [window 
> size dependent] and start from that;

These new sizes look more reasonable.
> 
> >2. The site relies rather heavily on color for subdividing the
> >page. FireFox and other browsers have an option to enforce the
> >user's choice of colors. The page design doesn't hold up too well
> >with that option enabled.
> 
> hm, i need to look into that; but isn't user defined coloring going to 
> spoil about every site that uses colors?

Fact is, any time I visit a site with awkward colors I configure
my browser to use my own colors, and don't bother to change this
setting back until I am forced to. As long as I can decypher the
content I am happy.

But in this case, the difference in fontsize already helps to
offset the main area and therefore clarifies the layout.

> 
> i will probably use different color combinations every few months -)
> 
> 
> [i now understand why some sites, like fontshop.be prefers macro media 
> based sites, it gives more control and is browser independent]

Not browser independent; as far as I know, there is no flash
plugin for non-Intel Linux. Besides, some browsers are configured
not to allow flash or javascript or whatever even when available;
the less content needs to be processed, the faster the browsing.

Also, the reader may like some control over presentation: some
people like their browser to leave some screen space for other
windows and therefore want everything as small as possible; some
people have poor eyesight and want large font sizes.

> 
> Hans

-- 
Siep Kroonenberg
From pragma at wxs.nl  Sat Oct  2 22:56:48 2004
From: pragma at wxs.nl (h h extern)
Date: Sat Oct  2 22:56:53 2004
Subject: [dev-context] new web site
In-Reply-To: <20041002193329.GA13987@muisje>
References: <41532FD6.8040708@creutzig.de> <4153F2D4.8080203@wxs.nl>
	<20040927093339.01a5f07c@glenlivet.elvenkind.com>
	<4157C7E8.4060208@wxs.nl> <415DBD39.2080600@wxs.nl>
	<20041002093521.GC6793@muisje> <415EF458.6010002@wxs.nl>
	<20041002193329.GA13987@muisje>
Message-ID: <415F1610.8030201@wxs.nl>

Siep Kroonenberg wrote:

> Fact is, any time I visit a site with awkward colors I configure
> my browser to use my own colors, and don't bother to change this
> setting back until I am forced to. As long as I can decypher the
> content I am happy.

as soon as i have the time i will try to figure out how to add thin gray 
lines; i had that in a previous version and liked it; that will solve 
your problem unless the gray is also invisible -)

i ran into browser problems (some strange interference between a border 
width and width calculation in percentages; one can compensate that with 
margin settings but it quickly becomes fuzzy);

> Also, the reader may like some control over presentation: some
> people like their browser to leave some screen space for other
> windows and therefore want everything as small as possible; some
> people have poor eyesight and want large font sizes.

indeed;

btw, did you ever visit www.fontshop.be (i'm sure you have a windows 
machine at elvenkind somewhere); a very nice tool to play with fonts.

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From atl at comp.lancs.ac.uk  Sun Oct  3 00:00:07 2004
From: atl at comp.lancs.ac.uk (Adam Lindsay)
Date: Sun Oct  3 00:08:19 2004
Subject: [dev-context] new web site
In-Reply-To: <415EF78E.6030702@wxs.nl>
References: <415EF78E.6030702@wxs.nl>
Message-ID: <20041002230008.9099@news.comp.lancs.ac.uk>

h h extern said this at Sat, 2 Oct 2004 20:46:38 +0200:

>safari [kde based] is the worst

Out of curiosity, which version?
The Safari engine (and especially CSS implementation) has evolved really
quickly. I'm running 1.2.3.

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
 Adam T. Lindsay, Computing Dept.     atl@comp.lancs.ac.uk
 Lancaster University, InfoLab21        +44(0)1524/510.514
 Lancaster, LA1 4WA, UK             Fax:+44(0)1524/510.492
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-


From atl at comp.lancs.ac.uk  Sun Oct  3 00:15:42 2004
From: atl at comp.lancs.ac.uk (Adam Lindsay)
Date: Sun Oct  3 00:18:47 2004
Subject: [dev-context] new web site
In-Reply-To: <415EF78E.6030702@wxs.nl>
References: <415EF78E.6030702@wxs.nl>
Message-ID: <20041002231542.19503@news.comp.lancs.ac.uk>

h h extern said this at Sat, 2 Oct 2004 20:46:38 +0200:

>> - Assuming most of the CSS is 'frozen', you could move that into 
>>   a separate style.css file and linking to that. It will save you
>>   on traffic and it makes it easier to use a different CSS file 
>>   for IE (if desired). The best 'real' solution for IE and older 
>>   browsers would (no doubt) be to use frames.
>
>i had that as a start, however, there is nothing like a symbolic color; 
>ans so i would end up with some 20 nearly identical css styles that then 
>had to be downloaded;

Um, this might be naive, cos I haven't dealt with heavy CSS support in
multiple browsers, but...

Why not let the stylesheets "cascade"? Define the geometry in style.css
and have colors defined locally? That'll cut down somewhat, no?

adam
-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
 Adam T. Lindsay, Computing Dept.     atl@comp.lancs.ac.uk
 Lancaster University, InfoLab21        +44(0)1524/510.514
 Lancaster, LA1 4WA, UK             Fax:+44(0)1524/510.492
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

From taco at elvenkind.com  Sun Oct  3 09:21:46 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun Oct  3 09:21:44 2004
Subject: [dev-context] new web site
In-Reply-To: <415EF78E.6030702@wxs.nl>
References: <41532FD6.8040708@creutzig.de> <4153F2D4.8080203@wxs.nl>
	<20040927093339.01a5f07c@glenlivet.elvenkind.com>
	<4157C7E8.4060208@wxs.nl> <415DBD39.2080600@wxs.nl>
	<20041002094147.43cbb3be.taco@elvenkind.com>
	<415EF78E.6030702@wxs.nl>
Message-ID: <20041003092146.7220e6cb.taco@elvenkind.com>

On Sat, 02 Oct 2004 20:46:38 +0200
h h extern <pragma@wxs.nl> wrote:

Hi again,

> ok, i made the font a bit smaller now; i tested on a high res screen; i 
> didn't want too wide lines, but i found out that setting
> 
>    max-width: 60em
> 
> works quite well (prevents too wide lines on a 1600x1200 full screen)

looks much better now.
 
> i'm thinking about an article for the maps about css versus tex -) 
> interestingly th eeasierst thing, i.e. getting the page dimensions 
> right, is the one bugged most; safari [kde based] is the worst

safari's engine originally tried to mimic all quirks from IE 4, 5 and 
5.5 as well as NS 4.7x. So much so, that I still use kde's konqueror
to browse old IE-only sites: it's the only browser I have that displays
those pages reasonably. But it is steadily moving towards standards 
(which actually makes it less usable for me), so newer version may
be better.

> 
> can you mirror this ok? (there is a wget.txt file as well)

No problem.

Greetings, Taco

From pragma at wxs.nl  Sun Oct  3 22:30:58 2004
From: pragma at wxs.nl (h h extern)
Date: Sun Oct  3 22:31:07 2004
Subject: [dev-context] new web site
In-Reply-To: <20041002230008.9099@news.comp.lancs.ac.uk>
References: <415EF78E.6030702@wxs.nl>
	<20041002230008.9099@news.comp.lancs.ac.uk>
Message-ID: <41606182.80606@wxs.nl>

Adam Lindsay wrote:
> h h extern said this at Sat, 2 Oct 2004 20:46:38 +0200:
> 
> 
>>safari [kde based] is the worst
> 
> 
> Out of curiosity, which version?
> The Safari engine (and especially CSS implementation) has evolved really
> quickly. I'm running 1.2.3.

the latest, that is, i updated my mac, then it could not boot any more, 
so i had to reinstall osx, updated again, then it worked, so i assume 
that i used the latest

the problem with safari is that it does not handle % dimensions well

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Sun Oct  3 22:35:18 2004
From: pragma at wxs.nl (h h extern)
Date: Sun Oct  3 22:35:25 2004
Subject: [dev-context] new web site
In-Reply-To: <20041002231542.19503@news.comp.lancs.ac.uk>
References: <415EF78E.6030702@wxs.nl>
	<20041002231542.19503@news.comp.lancs.ac.uk>
Message-ID: <41606286.9060006@wxs.nl>

Adam Lindsay wrote:

> Why not let the stylesheets "cascade"? Define the geometry in style.css
> and have colors defined locally? That'll cut down somewhat, no?

maybe later -)

currently all pages are some 6K, not that bad, esp since there are no 
graphics and it's just one request

well, i was even thinking of just sending the xml and a xsl stylesheet, 
since isn't that what has been advertised for years now -)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Sun Oct  3 23:22:12 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Sun Oct  3 23:22:15 2004
Subject: [dev-context] new web site
In-Reply-To: <20041003092146.7220e6cb.taco@elvenkind.com>
References: <41532FD6.8040708@creutzig.de> <4153F2D4.8080203@wxs.nl>
	<20040927093339.01a5f07c@glenlivet.elvenkind.com>
	<4157C7E8.4060208@wxs.nl> <415DBD39.2080600@wxs.nl>
	<20041002094147.43cbb3be.taco@elvenkind.com>
	<415EF78E.6030702@wxs.nl>
	<20041003092146.7220e6cb.taco@elvenkind.com>
Message-ID: <41606D84.7070204@wxs.nl>

Ok, new upload:

- under links -> second page -> last entry -> browse site
- page n of m added (i tried all kind of other locations but this suits 
best and is most save)
- some small fixes
- roll over added to top entries (so that taco can see that it's a pdf doc)

Hans



-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From siepo at cybercomm.nl  Mon Oct  4 09:47:05 2004
From: siepo at cybercomm.nl (Siep Kroonenberg)
Date: Mon Oct  4 09:47:21 2004
Subject: [dev-context] new web site
In-Reply-To: <41606D84.7070204@wxs.nl>
References: <41532FD6.8040708@creutzig.de> <4153F2D4.8080203@wxs.nl>
	<20040927093339.01a5f07c@glenlivet.elvenkind.com>
	<4157C7E8.4060208@wxs.nl> <415DBD39.2080600@wxs.nl>
	<20041002094147.43cbb3be.taco@elvenkind.com>
	<415EF78E.6030702@wxs.nl>
	<20041003092146.7220e6cb.taco@elvenkind.com>
	<41606D84.7070204@wxs.nl>
Message-ID: <20041004074705.GB5902@muisje>

On Sun, Oct 03, 2004 at 11:22:12PM +0200, Hans Hagen wrote:
> Ok, new upload:
> 
> - under links -> second page -> last entry -> browse site
> - page n of m added (i tried all kind of other locations but this suits 
> best and is most save)
> - some small fixes
> - roll over added to top entries (so that taco can see that it's a pdf doc)
> 
> Hans

Typo on the main page, last paragraph: presumably the 'download'
link which starts pdf navigation should be 'showcase'.

-- 
Siep Kroonenberg
From taco at elvenkind.com  Wed Oct  6 17:09:00 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed Oct  6 21:10:29 2004
Subject: [dev-context] footnote/align spacing bug in dutch alpha
Message-ID: <20041006170900.48f1cbe5@glenlivet.elvenkind.com>



Hi Hans,

See attached file(s). In the alpha I've got, the whitespace around the
'lines' fills the entire page (after pagination) without regard for the
footnotes. This happens in the dutch alpha, the english output is 
fine.

TIA for fixing this,

Taco
-------------- next part --------------
A non-text attachment was scrubbed...
Name: testertje.tex
Type: application/octet-stream
Size: 176 bytes
Desc: not available
Url : http://www.ntg.nl/pipermail/dev-context/attachments/20041006/38910aa6/testertje-0003.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: testertje.pdf
Type: application/octet-stream
Size: 30584 bytes
Desc: not available
Url : http://www.ntg.nl/pipermail/dev-context/attachments/20041006/38910aa6/testertje-0004.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: testertje.log
Type: application/octet-stream
Size: 4431 bytes
Desc: not available
Url : http://www.ntg.nl/pipermail/dev-context/attachments/20041006/38910aa6/testertje-0005.obj
From taco at elvenkind.com  Thu Oct  7 09:17:56 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu Oct  7 09:17:58 2004
Subject: [dev-context] footnote/align spacing bug in dutch alpha
In-Reply-To: <41644BBA.3060405@wxs.nl>
References: <20041006170900.48f1cbe5@glenlivet.elvenkind.com>
	<41644BBA.3060405@wxs.nl>
Message-ID: <20041007091756.5a051ed1@glenlivet.elvenkind.com>



Any chance of a quick fix?

Hans wrote:
> 
> the problem was introduced when first/last column footnotes were 
> implemented
> 
-- 
groeten,

Taco
From pragma at wxs.nl  Thu Oct  7 11:18:16 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Oct  7 11:18:21 2004
Subject: [dev-context] footnote/align spacing bug in dutch alpha
In-Reply-To: <20041007091756.5a051ed1@glenlivet.elvenkind.com>
References: <20041006170900.48f1cbe5@glenlivet.elvenkind.com>
	<41644BBA.3060405@wxs.nl>
	<20041007091756.5a051ed1@glenlivet.elvenkind.com>
Message-ID: <416509D8.3060905@wxs.nl>

Taco Hoekwater wrote:
> 
> Any chance of a quick fix?

it is already fixed -)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Thu Oct  7 14:56:49 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu Oct  7 14:56:54 2004
Subject: [dev-context] Alpha (now main) -> changes
Message-ID: <20041007145649.5fa68eda@glenlivet.elvenkind.com>


Hans and others,

I really believe this is an error:
- context.tex: contextversion is now 2004.06.10  (that would be june 10 !)

Flowcharts:
- What happened there?

General stuff:
- There are a lot of fixes to the inline documentation (dutch-> english), a number
  of commented out sections are finally removed, some minor ML fixes, and a 
  few locations where \the\uccode should/could have been plain \uccode. And
  some XML (FO) things have changed yet again but I can't be bothered to list 
  those.
  

For the rest, here we go:
- context.properties: adds xsl extension
- texexec.pl: <context-directive> additional 'module' attribute,
  a bugfix in the interface chooser, and xetex support.
- textools.rb: two new private actions: 
     --touchcontextfile
     --downcasefilenames
- xmltools.rb: file existance paranoia added (?)
- switch.rb:  recursive file globbing added
- colo-hex.tex: support for xetex hex colors
- context.tex: contextversion is now 2004.06.10
- cont-fil.tex:  new file synonym 'exi-interface'
- cont-new.tex: some XML tricks added
- cont-usr.ori: support for catalan language
- core-new.tex: eol magic in 'setups'
- core-not.tex: footnote extension/bugfix
- lang-ita.tex: catalan support
- math-ini.tex: active characters bugfix
- m-chart.tex: major cleanup, perhaps new functionality as well
- page-mar.tex: "\vadjust pre" no longer used, Omega support
  removed
- page-not.tex: footnote fix in columns
- spec-fdf.tex : \flushFDFnames fixed
- spec-xtx.tex: new specials, for xetex
- x-mathml.tex: {\start,\stop}XMLinlinemath removed


As usual, i may have missed and/or misinterpreted some. I will do
a 'Release Notes' diff set eventually, but I'd rather wait for the version
number to be corrected :-)

-- 
groeten,

Taco
From pragma at wxs.nl  Thu Oct  7 15:34:07 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Oct  7 15:34:15 2004
Subject: [dev-context] Alpha (now main) -> changes
In-Reply-To: <20041007145649.5fa68eda@glenlivet.elvenkind.com>
References: <20041007145649.5fa68eda@glenlivet.elvenkind.com>
Message-ID: <416545CF.4@wxs.nl>

Taco Hoekwater wrote:

> Hans and others,
> 
> I really believe this is an error:
> - context.tex: contextversion is now 2004.06.10  (that would be june 10 !)

i turned the perl crap into something ruby and mixed up the timestamp

                 timestamp = Time.now.strftime('%Y.%m.%d')

> Flowcharts:
> - What happened there?

a fix with regards to using nointerlinespace in packing the box

> General stuff:
> - There are a lot of fixes to the inline documentation (dutch-> english), a number
>   of commented out sections are finally removed, some minor ML fixes, and a 
>   few locations where \the\uccode should/could have been plain \uccode. And
>   some XML (FO) things have changed yet again but I can't be bothered to list 
>   those.
>   
> 
> For the rest, here we go:
> - context.properties: adds xsl extension
> - texexec.pl: <context-directive> additional 'module' attribute,
>   a bugfix in the interface chooser, and xetex support.
> - textools.rb: two new private actions: 
>      --touchcontextfile
>      --downcasefilenames
> - xmltools.rb: file existance paranoia added (?)

i need the dir option to generate the site -)

> - switch.rb:  recursive file globbing added
> - colo-hex.tex: support for xetex hex colors
> - context.tex: contextversion is now 2004.06.10
> - cont-fil.tex:  new file synonym 'exi-interface'
> - cont-new.tex: some XML tricks added
> - cont-usr.ori: support for catalan language
> - core-new.tex: eol magic in 'setups'
> - core-not.tex: footnote extension/bugfix
> - lang-ita.tex: catalan support
> - math-ini.tex: active characters bugfix
> - m-chart.tex: major cleanup, perhaps new functionality as well
> - page-mar.tex: "\vadjust pre" no longer used, Omega support
>   removed
> - page-not.tex: footnote fix in columns
> - spec-fdf.tex : \flushFDFnames fixed
> - spec-xtx.tex: new specials, for xetex
> - x-mathml.tex: {\start,\stop}XMLinlinemath removed
> 
> 
> As usual, i may have missed and/or misinterpreted some. I will do
> a 'Release Notes' diff set eventually, but I'd rather wait for the version
> number to be corrected :-)

-)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Fri Oct  8 10:01:55 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri Oct  8 10:01:59 2004
Subject: [dev-context] Latest version diff && website mirror
In-Reply-To: <20041008010736.089FA1A40A5@server.aanhet.net>
References: <20041008010736.089FA1A40A5@server.aanhet.net>
Message-ID: <20041008100155.6b1e8528@glenlivet.elvenkind.com>


Hi,

The latest version diff is very minimal indeed:

- texexec.pl: file existance checked before pdfopen call
- textools.rb: format string for timestamp fixed
- context.tex: version 2004.10.07
- type-cbg.tex: cbgreek name improved
- type-xxx.tex: euler math package improvements
- x-fe.tex: a typo fixed


For the website mirror, I do not use wget.txt, but a 'full parse' of the website. This 
is  intentional, because it helps debugging. Here are the 'not found' documents
that were discovered last night:

> http://www.pragma-ade.com/dir.pdf
> http://www.pragma-ade.com/general/manuals/xcorresp.pdf
> http://www.pragma-ade.com/general/manuals/ex-imple.pdf
> http://www.pragma-ade.com/general/manuals/ex-ample.pdf
> http://www.pragma-ade.com/general/manuals/xmlfoe.pdf
> http://www.pragma-ade.com/general/manuals/foxet.pdf
> http://www.pragma-ade.com/present/road/roadmap.pdf
> http://www.pragma-ade.com/dir
> http://www.pragma-ade.com/present/road/roadshow.pdf

All of those files are linked to from somewhere within the HTML pages,
but do not actually exist. 


And another question: would it be possible to stop using absolute
paths in the internal html links? I am talking about things like:

   <a href="/about-1.htm" title="...">about</a> 

My website mirror is located in the directory /context/mirror, so "my" about-1.htm 
is actually available as "/context/mirror/about-1.htm", but not as "/about-1.html".
The result is that almost  all internal links in
	http://tex.aanhet.net/context/mirror 
are currently broken.  If it this cannot be fixed easily, I will have to create 
	http://context.aanhet.net
but I'd rather not do that, if it is easy to fix on the generating end.


-- 
groeten,

Taco
From pragma at wxs.nl  Fri Oct  8 11:23:21 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Fri Oct  8 11:23:31 2004
Subject: [dev-context] Latest version diff && website mirror
In-Reply-To: <20041008100155.6b1e8528@glenlivet.elvenkind.com>
References: <20041008010736.089FA1A40A5@server.aanhet.net>
	<20041008100155.6b1e8528@glenlivet.elvenkind.com>
Message-ID: <41665C89.3060900@wxs.nl>

Taco Hoekwater wrote:


>>http://www.pragma-ade.com/dir.pdf

that is no pdf file, but a directory view, i.e. /dir is a trigger for 
the web server which you can best ignore

>>http://www.pragma-ade.com/general/manuals/xcorresp.pdf
>>http://www.pragma-ade.com/general/manuals/ex-imple.pdf
>>http://www.pragma-ade.com/general/manuals/ex-ample.pdf
>>http://www.pragma-ade.com/general/manuals/xmlfoe.pdf
>>http://www.pragma-ade.com/general/manuals/foxet.pdf
>>http://www.pragma-ade.com/present/road/roadmap.pdf
>>http://www.pragma-ade.com/dir
>>http://www.pragma-ade.com/present/road/roadshow.pdf

hm. i have to check that (i have to rewrite some docu moving scripts here)

> And another question: would it be possible to stop using absolute
> paths in the internal html links? I am talking about things like:
> 
>    <a href="/about-1.htm" title="...">about</a> 

i have to play with that a bit; the problem is that i need the / because 
  sometimes they are called deep down a tree (the reverse of your problem)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Fri Oct  8 11:50:51 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri Oct  8 11:50:53 2004
Subject: Fw: [dev-context] Latest version diff && website mirror
Message-ID: <20041008115051.55e67e54@glenlivet.elvenkind.com>



Begin forwarded message:

Date: Fri, 8 Oct 2004 11:50:13 +0200
From: Taco Hoekwater <taco@elvenkind.com>
To: Hans Hagen <pragma@wxs.nl>
Subject: Re: [dev-context] Latest version diff && website mirror


On Fri, 08 Oct 2004 11:23:21 +0200, Hans wrote:

> Taco Hoekwater wrote:
> 
> >>http://www.pragma-ade.com/dir.pdf
> 
> that is no pdf file, but a directory view, i.e. /dir is a trigger for 
> the web server which you can best ignore

It *is*l generating a 404 Error though, so something must be
wrong (linked from overview.htm)

> > And another question: would it be possible to stop using absolute
> > paths in the internal html links? I am talking about things like:
> > 
> >    <a href="/about-1.htm" title="...">about</a> 
> 
> i have to play with that a bit; the problem is that i need the / because 
> sometimes they are called deep down a tree (the reverse of your problem)

No problem. New location of my mirror:

	http://context.aanhet.net

effective as of now. :-)



-- 
groeten,

Taco


-- 
groeten,

Taco
From patrick at gundla.ch  Fri Oct  8 12:06:12 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Fri Oct  8 12:05:36 2004
Subject: [dev-context] Re: Latest version diff && website mirror
In-Reply-To: <20041008100155.6b1e8528@glenlivet.elvenkind.com> (Taco
	Hoekwater's message of "Fri, 8 Oct 2004 10:01:55 +0200")
References: <20041008010736.089FA1A40A5@server.aanhet.net>
	<20041008100155.6b1e8528@glenlivet.elvenkind.com>
Message-ID: <m2y8ih8qy3.fsf@levana.de>

Hi Taco,

> And another question: would it be possible to stop using absolute
> paths in the internal html links? I am talking about things like:

just in case you're using wget, it has an option to convert absolute
links to relative ones.

Patrick
-- 
ConTeXt wiki: http://contextgarden.net
texshow-web:  http://texshow.contextgarden.net
List archive: http://archive.contextgarden.net
garden news:  http://news.contextgarden.net
From taco at elvenkind.com  Fri Oct  8 12:19:16 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri Oct  8 12:19:20 2004
Subject: [dev-context] Re: Latest version diff && website mirror
In-Reply-To: <m2y8ih8qy3.fsf@levana.de>
References: <20041008010736.089FA1A40A5@server.aanhet.net>
	<20041008100155.6b1e8528@glenlivet.elvenkind.com>
	<m2y8ih8qy3.fsf@levana.de>
Message-ID: <20041008121916.0bc4b29e@glenlivet.elvenkind.com>

On 8 Oct 2004 12:06:12 +0200, Patrick wrote:

> Hi Taco,
> 
> > And another question: would it be possible to stop using absolute
> > paths in the internal html links? I am talking about things like:
> 
> just in case you're using wget, it has an option to convert absolute
> links to relative ones.

Added the option, so now we have both
	
	http://context.aanhet.net
	http://tex.aanhet.net/context/mirror


-- 
groeten,

Taco
From pragma at wxs.nl  Fri Oct  8 12:44:12 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Fri Oct  8 12:44:18 2004
Subject: Fw: [dev-context] Latest version diff && website mirror
In-Reply-To: <20041008115051.55e67e54@glenlivet.elvenkind.com>
References: <20041008115051.55e67e54@glenlivet.elvenkind.com>
Message-ID: <41666F7C.2010602@wxs.nl>

Taco Hoekwater wrote:

> It *is*l generating a 404 Error though, so something must be
> wrong (linked from overview.htm)

i removed the pdf suffix and extended the server with an 'not supported 
message'

> effective as of now. :-)

thanks -)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Thu Oct 21 10:34:47 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu Oct 21 10:34:52 2004
Subject: [dev-context] Latest version diff && website mirror
In-Reply-To: <41665C89.3060900@wxs.nl>
References: <20041008010736.089FA1A40A5@server.aanhet.net>
	<20041008100155.6b1e8528@glenlivet.elvenkind.com>
	<41665C89.3060900@wxs.nl>
Message-ID: <417774A7.5090604@elvenkind.com>

Hans Hagen wrote:

 >>> http://www.pragma-ade.com/dir:
>>> http://www.pragma-ade.com/general/manuals/xcorresp.pdf
>>> http://www.pragma-ade.com/general/manuals/ex-imple.pdf
>>> http://www.pragma-ade.com/general/manuals/ex-ample.pdf
>>> http://www.pragma-ade.com/general/manuals/xmlfoe.pdf
> 
> hm. i have to check that (i have to rewrite some docu moving scripts here)

Hans, how is your progress on this? Also, I currently receive the html
on the site in it's entireity each night (wget is convinced they have
changed each time)

And I've created a new latest version diff:

	http://contextgarden.net/Release_Notes

Greetings, Taco
From pragma at wxs.nl  Thu Oct 21 11:57:59 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Oct 21 11:58:06 2004
Subject: [dev-context] Latest version diff && website mirror
In-Reply-To: <417774A7.5090604@elvenkind.com>
References: <20041008010736.089FA1A40A5@server.aanhet.net>
	<20041008100155.6b1e8528@glenlivet.elvenkind.com>
	<41665C89.3060900@wxs.nl> <417774A7.5090604@elvenkind.com>
Message-ID: <41778827.2030207@wxs.nl>

Taco Hoekwater wrote:

>> hm. i have to check that (i have to rewrite some docu moving scripts 
>> here)

no progress (yet)

> Hans, how is your progress on this? Also, I currently receive the html
> on the site in it's entireity each night (wget is convinced they have
> changed each time)

i uploaded the lot yesterday -)

in a week or so, when the new servers are installed, i will do an rsync 
instead

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From patrick at gundla.ch  Thu Oct 21 17:43:59 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu Oct 21 17:44:02 2004
Subject: [dev-context] texshow-web rss feed added
Message-ID: <m2acug3wlc.fsf@levana.de>

Hello,

this is probably mainly for Taco: I've added a (yet simple) rss feed
for the changes for texshow-web:

http://texshow.contextgarden.net/rss-en.xml

Patrick
-- 
Context wiki: http://contextgarden.net
From pragma at wxs.nl  Thu Oct 21 18:37:16 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Oct 21 18:37:18 2004
Subject: [dev-context] texshow-web rss feed added
In-Reply-To: <m2acug3wlc.fsf@levana.de>
References: <m2acug3wlc.fsf@levana.de>
Message-ID: <4177E5BC.8070300@wxs.nl>

Patrick Gundlach wrote:
> Hello,
> 
> this is probably mainly for Taco: I've added a (yet simple) rss feed
> for the changes for texshow-web:
> 
> http://texshow.contextgarden.net/rss-en.xml

interesting, i was considering to add something like that to the 
website, but could not figure out what the exact approach is; for 
instance how do you determine what goes into the feed? Is that per day?

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From patrick at gundla.ch  Thu Oct 21 18:51:27 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu Oct 21 18:51:29 2004
Subject: [dev-context] Re: texshow-web rss feed added
In-Reply-To: <4177E5BC.8070300@wxs.nl> (Hans Hagen's message of "Thu, 21 Oct
	2004 18:37:16 +0200")
References: <m2acug3wlc.fsf@levana.de> <4177E5BC.8070300@wxs.nl>
Message-ID: <m2wtxk2ewg.fsf@levana.de>

Hello Hans,

> interesting, i was considering to add something like that to the
> website, but could not figure out what the exact approach is; for
> instance how do you determine what goes into the feed? Is that per
> day?

Last 10 entries. Allowed in rss 0.91 are 15 entries max. As soon as a
user edits a comment (or alike) a log entry gets written to a file. I
publish the last 10 lines. See also for rss spec:

http://channel.netscape.com/publish/help/mnn20/quickstart.html



I did a quick hack in \startofftopic ruby

-------------------------------------------------- rsstest.rb
require 'rss'

feed=Rss.new

puts feed.rss {
  feed.title { "rsstest " } +
  feed.description { "my description" } + 
  feed.link { "some link" } +
  feed.language { "en" } +
  feed.item { 
      feed.title { "itemtitle" } +
      feed.link { "item link" } +
      feed.description { "item description"}
  }
}
-------------------------------------------------- rss.rb
class Rss 
  def initialize
  end
  def rss
    string = %Q{<?xml version="1.0"?>
<rss version="0.91">
<channel>}
    string += yield.to_s if block_given?
    string +="</channel>\n</rss>\n"
  end
  def item
    string =" <item>"
    string += yield.to_s if block_given?
    string +="</item>\n"
  end
  def description
    string =" <description>"
    string += yield.to_s if block_given?
    string +="</description>\n"
  end

  def title
    string =" <title>"
    string += yield.to_s if block_given?
    string +="</title>\n"
  end
  def link
    string =" <link>"
    string += yield.to_s if block_given?
    string +="</link>\n"
  end
  def language
    string =" <language>"
    string += yield.to_s if block_given?
    string +="</language>\n"
  end

end

--------------------------------------------------


which can (of course) be done much smarter, but this was very quick...

\stopofftopic


Patrick

-- 
ConTeXt wiki: http://contextgarden.net
From pragma at wxs.nl  Mon Oct 25 18:53:14 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Oct 25 18:53:14 2004
Subject: [dev-context] Re: texshow-web rss feed added
In-Reply-To: <m2wtxk2ewg.fsf@levana.de>
References: <m2acug3wlc.fsf@levana.de> <4177E5BC.8070300@wxs.nl>
	<m2wtxk2ewg.fsf@levana.de>
Message-ID: <417D2F7A.1070009@wxs.nl>

Patrick Gundlach wrote:

> Last 10 entries. Allowed in rss 0.91 are 15 entries max. As soon as a
> user edits a comment (or alike) a log entry gets written to a file. I
> publish the last 10 lines. See also for rss spec:

for the moment only one entry: http://www.pragma-ade.com/rss.xml

(btw, firebird has a decent rss plugin)

Hans



-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Wed Oct 27 11:57:32 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed Oct 27 11:57:36 2004
Subject: [dev-context] texshow-web rss feed added
In-Reply-To: <m2acug3wlc.fsf@levana.de>
References: <m2acug3wlc.fsf@levana.de>
Message-ID: <417F710C.30500@elvenkind.com>


Hi Patrick,

It took me a while to do something with this, but I finally got around to 
testing it. This feed, as well as Hans' feed, would be much more usable as 
Rss version 1.0 (that is: with timestamp info added). Great idea though!


Patrick Gundlach wrote:
> Hello,
> 
> this is probably mainly for Taco: I've added a (yet simple) rss feed
> for the changes for texshow-web:
> 
> http://texshow.contextgarden.net/rss-en.xml
> 
> Patrick

From patrick at gundla.ch  Wed Oct 27 12:12:52 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed Oct 27 12:12:51 2004
Subject: [dev-context] Re: texshow-web rss feed added
In-Reply-To: <417F710C.30500@elvenkind.com> (Taco Hoekwater's message of
	"Wed, 27 Oct 2004 11:57:32 +0200")
References: <m2acug3wlc.fsf@levana.de> <417F710C.30500@elvenkind.com>
Message-ID: <m2y8hslba3.fsf@levana.de>

Hello Taco,

> It took me a while to do something with this, but I finally got around
> to testing it. This feed, as well as Hans' feed, would be much more
> usable as Rss version 1.0 (that is: with timestamp info added). Great
> idea though!

I don't really understand (I am very new to RSS): one can insert time
stamps in RSS 0.91 (<pubDate>), and RSS 1.0 doesn't need a timestamp (?).

What use is a timestamp for, anyhow? (besides the user knowing when
the entry dates?)

Patrick
-- 
ConTeXt wiki: http://contextgarden.net
From pragma at wxs.nl  Wed Oct 27 12:27:46 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Wed Oct 27 12:27:55 2004
Subject: [dev-context] texshow-web rss feed added
In-Reply-To: <417F710C.30500@elvenkind.com>
References: <m2acug3wlc.fsf@levana.de> <417F710C.30500@elvenkind.com>
Message-ID: <417F7822.9050108@wxs.nl>

Taco Hoekwater wrote:

> It took me a while to do something with this, but I finally got around 
> to testing it. This feed, as well as Hans' feed, would be much more 
> usable as Rss version 1.0 (that is: with timestamp info added). Great 
> idea though!

ok, no problem, i have to find the spec for that first -)

another thing to set up is a repository for user contributes styles; 
once i have the new servers on line i will install a subversion tree for 
  context sources; that way you can also more easily fetch the diffs and 
make those nice diff documents, which then of course end up in the feed

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Wed Oct 27 12:29:39 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Wed Oct 27 12:29:42 2004
Subject: [dev-context] Re: texshow-web rss feed added
In-Reply-To: <m2y8hslba3.fsf@levana.de>
References: <m2acug3wlc.fsf@levana.de> <417F710C.30500@elvenkind.com>
	<m2y8hslba3.fsf@levana.de>
Message-ID: <417F7893.5090107@wxs.nl>

Patrick Gundlach wrote:

> I don't really understand (I am very new to RSS): one can insert time
> stamps in RSS 0.91 (<pubDate>), and RSS 1.0 doesn't need a timestamp (?).

so, what do we do: .91 and pubDate?

> What use is a timestamp for, anyhow? (besides the user knowing when
> the entry dates?)

one can for instance decide to automatically download

btw, is the 15 entries indeed a limit? i see feeds with much more

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From patrick at gundla.ch  Wed Oct 27 12:41:25 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed Oct 27 12:41:23 2004
Subject: [dev-context] Re: texshow-web rss feed added
In-Reply-To: <417F7893.5090107@wxs.nl> (Hans Hagen's message of "Wed, 27 Oct
	2004 12:29:39 +0200")
References: <m2acug3wlc.fsf@levana.de> <417F710C.30500@elvenkind.com>
	<m2y8hslba3.fsf@levana.de> <417F7893.5090107@wxs.nl>
Message-ID: <m2u0sgl9yi.fsf@levana.de>

Hans Hagen <pragma@wxs.nl> writes:

> Patrick Gundlach wrote:
>
>> I don't really understand (I am very new to RSS): one can insert time
>> stamps in RSS 0.91 (<pubDate>), and RSS 1.0 doesn't need a timestamp (?).
>
> so, what do we do: .91 and pubDate?

I'll go for that before trying 1.0.

>> What use is a timestamp for, anyhow? (besides the user knowing when
>> the entry dates?)
>
> one can for instance decide to automatically download

OK, good point. (I guess you mean that if the rss feed refers to some
downloadable software).


> btw, is the 15 entries indeed a limit? i see feeds with much more

for 0.91. That is at least what

http://channel.netscape.com/publish/help/mnn20/quickstart.html

tells. Don't know how authorative it is.

Patrick
From patrick at gundla.ch  Wed Oct 27 12:46:21 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed Oct 27 12:46:19 2004
Subject: [dev-context] Re: texshow-web rss feed added
In-Reply-To: <417F7822.9050108@wxs.nl> (Hans Hagen's message of "Wed, 27 Oct
	2004 12:27:46 +0200")
References: <m2acug3wlc.fsf@levana.de> <417F710C.30500@elvenkind.com>
	<417F7822.9050108@wxs.nl>
Message-ID: <m2pt34l9qa.fsf@levana.de>

Hans Hagen <pragma@wxs.nl> writes:

> Taco Hoekwater wrote:
>
>> It took me a while to do something with this, but I finally got
>> around to testing it. This feed, as well as Hans' feed, would be
>> much more usable as Rss version 1.0 (that is: with timestamp info
>> added). Great idea though!
>
> ok, no problem, i have to find the spec for that first -)

Overview: http://www.webreference.com/authoring/languages/xml/rss/
spec: http://web.resource.org/rss/1.0/ -> http://web.resource.org/rss/1.0/spec

Patrick

-- 
ConTeXt wiki: http://contextgarden.net
From taco at elvenkind.com  Wed Oct 27 13:40:18 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed Oct 27 13:40:21 2004
Subject: [dev-context] Re: texshow-web rss feed added
In-Reply-To: <m2u0sgl9yi.fsf@levana.de>
References: <m2acug3wlc.fsf@levana.de>
	<417F710C.30500@elvenkind.com>	<m2y8hslba3.fsf@levana.de>
	<417F7893.5090107@wxs.nl> <m2u0sgl9yi.fsf@levana.de>
Message-ID: <417F8922.6050008@elvenkind.com>


netscape.com is indeed the authority for 0.91, because rss was originally
an idea created by Netscape Inc.

Patrick Gundlach wrote:

>>btw, is the 15 entries indeed a limit? i see feeds with much more
> 
> 
> for 0.91. That is at least what
> 
> http://channel.netscape.com/publish/help/mnn20/quickstart.html
> 
> tells. Don't know how authorative it is.
From taco at elvenkind.com  Mon Nov  1 16:26:28 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon Nov  1 16:26:32 2004
Subject: [dev-context] Re: [NTG-context] Bug in math accents (analyzed)
In-Reply-To: <20041028190105.07c7a5a1.taco@elvenkind.com>
References: <16720.22133.473936.610814@danton-imw.uni-bielefeld.de>	<4180D4A6.8070305@wxs.nl>
	<20041028190105.07c7a5a1.taco@elvenkind.com>
Message-ID: <418655A4.9060105@elvenkind.com>

Hans,

The problem is that your code does not set \skewchar for the \scriptfont
and \scriptscriptfont of the relevant math families. You need to make sure
you set all three of \textfont X, \scriptfont X and \scriptscriptfont X.

This requires some minor rewriting of a few macros in font-ini.tex.
I could do that for you, but my coding style is not even remotely
similar to yours so I wager you'd rather do it yourself. ;-)

Attached is a plain/context 'dual mode' test file.

Greetings, Taco

Taco Hoekwater wrote:
> On Thu, 28 Oct 2004 13:14:46 +0200
> Hans Hagen <pragma@wxs.nl> wrote:
> 
> 
>>Maybe some italic correction is needed here; or a tilde from an italic 
>>font : question for Taco, btw, in contex, \tilde in this case expands to
>>
>>\mathaccent "0\purefamilyhex {mr}7E
>>
>>which is the plain definition, so i wonder what goes wrong there.
> 
> 
> My initial feeling is that the relevant font parameters are perhaps wrong or 
> even non-existant. (this would not show up in the expansion debug info, of 
> course). I cannot investigate a.t.m., but if nobody else is able and willing,
> I look into it next week.
> 
> Greetings, Taco
> _______________________________________________
> ntg-context mailing list
> ntg-context@ntg.nl
> http://www.ntg.nl/mailman/listinfo/ntg-context

-------------- next part --------------
A non-text attachment was scrubbed...
Name: mathfontdump.tex
Type: text/x-tex
Size: 1226 bytes
Desc: not available
Url : http://www.ntg.nl/pipermail/dev-context/attachments/20041101/9d949524/mathfontdump.bin
From pragma at wxs.nl  Mon Nov  1 16:59:13 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Nov  1 16:59:12 2004
Subject: [dev-context] Re: [NTG-context] Bug in math accents (analyzed)
In-Reply-To: <418655A4.9060105@elvenkind.com>
References: <16720.22133.473936.610814@danton-imw.uni-bielefeld.de>
	<4180D4A6.8070305@wxs.nl>
	<20041028190105.07c7a5a1.taco@elvenkind.com>
	<418655A4.9060105@elvenkind.com>
Message-ID: <41865D51.803@wxs.nl>

Taco has found the reason why \mathaccents may get dislocated in slanted 
or italic fonts

> The problem is that your code does not set \skewchar for the \scriptfont
> and \scriptscriptfont of the relevant math families. You need to make sure
> you set all three of \textfont X, \scriptfont X and \scriptscriptfont X.
> 
> This requires some minor rewriting of a few macros in font-ini.tex.
> I could do that for you, but my coding style is not even remotely
> similar to yours so I wager you'd rather do it yourself. ;-)
> 

font-ini needs the following patch

\appendtoks
\dosetmathfamily\mrfam\textface\scriptface\scriptscriptface\c!mr\mrfallback
   \dosetmathfamily\mifam\textface\scriptface\scriptscriptface\c!mi\empty
   \dosetmathfamily\syfam\textface\scriptface\scriptscriptface\c!sy\empty
   \dosetmathfamily\exfam\textface\textface  \textface        \c!ex\empty
   \dosetmathfamily\mafam\textface\scriptface\scriptscriptface\c!ma\empty
   \dosetmathfamily\mbfam\textface\scriptface\scriptscriptface\c!mb\empty
   \dosetmathfamily\mcfam\textface\scriptface\scriptscriptface\c!mc\empty
   \dosetmathfamily\nnfam\textface\scriptface\scriptscriptface\c!nn\empty
\to \mathstrategies

\appendtoks
   \dosetskewchar\mifam\defaultskewcharmi % implemented later on
   \dosetskewchar\syfam\defaultskewcharsy % implemented later on
\to \mathstrategies

\def\dosetskewchar#1#2%
   {\ifx\@@fontskewchar\empty
      \skewchar\textfont        #1#2%
      \skewchar\scriptfont      #1#2%
      \skewchar\scriptscriptfont#1#2%
    \else
      \skewchar\textfont        #1\@@fontskewchar
      \skewchar\scriptfont      #1\@@fontskewchar
      \skewchar\scriptscriptfont#1\@@fontskewchar
    \fi}

i'll patch the distribution

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Mon Nov  1 17:11:24 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon Nov  1 17:11:28 2004
Subject: [dev-context] Re: fontdimen trickery
In-Reply-To: <41865EAB.7070305@wxs.nl>
References: <20041101164944.20007@news.comp.lancs.ac.uk>
	<41865EAB.7070305@wxs.nl>
Message-ID: <4186602C.7010600@elvenkind.com>

(Switched to dev. list)

Hans Hagen wrote:
> \setupbodyfont[new]
> 
> {\csname*new12ptmmmi*\endcsname \fontdimen7\font=1pt}

What about: \fontdimen7\csname*new12ptmmmi*:\endcsname=0pt
(with the appended colon) is that too low-level?


From pragma at wxs.nl  Mon Nov  1 17:21:32 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Nov  1 17:21:26 2004
Subject: [dev-context] Re: fontdimen trickery
In-Reply-To: <4186602C.7010600@elvenkind.com>
References: <20041101164944.20007@news.comp.lancs.ac.uk>
	<41865EAB.7070305@wxs.nl> <4186602C.7010600@elvenkind.com>
Message-ID: <4186628C.6020105@wxs.nl>

Taco Hoekwater wrote:
> (Switched to dev. list)
> 
> Hans Hagen wrote:
> 
>> \setupbodyfont[new]
>>
>> {\csname*new12ptmmmi*\endcsname \fontdimen7\font=1pt}
> 
> 
> What about: \fontdimen7\csname*new12ptmmmi*:\endcsname=0pt
> (with the appended colon) is that too low-level?

for testing going that low level is okay -)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From atl at comp.lancs.ac.uk  Mon Nov  1 18:21:45 2004
From: atl at comp.lancs.ac.uk (Adam Lindsay)
Date: Mon Nov  1 18:22:08 2004
Subject: [dev-context] Re: fontdimen trickery
In-Reply-To: <4186602C.7010600@elvenkind.com>
References: <4186602C.7010600@elvenkind.com>
Message-ID: <20041101182145.3261@news.comp.lancs.ac.uk>

Taco Hoekwater said this at Mon, 1 Nov 2004 17:11:24 +0100:

>> \setupbodyfont[new]
>> 
>> {\csname*new12ptmmmi*\endcsname \fontdimen7\font=1pt}
>
>What about: \fontdimen7\csname*new12ptmmmi*:\endcsname=0pt
>(with the appended colon) is that too low-level?

Wow, thanks to you both.
Unfortunately, this isn't the magic bullet I thought it would be to
improve the spacing in a math font, so I'll need to investigate further.

Cheers,
adam
-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
 Adam T. Lindsay, Computing Dept.     atl@comp.lancs.ac.uk
 Lancaster University, InfoLab21        +44(0)1524/510.514
 Lancaster, LA1 4WA, UK             Fax:+44(0)1524/510.492
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

From atl at comp.lancs.ac.uk  Sun Nov  7 13:40:17 2004
From: atl at comp.lancs.ac.uk (Adam Lindsay)
Date: Sun Nov  7 13:41:27 2004
Subject: [dev-context] XeTeX specials in ConTeXt
Message-ID: <20041107134017.11556@news.comp.lancs.ac.uk>

[resent. stripped big pdf attachment. Get PDF at:
 http://homepage.mac.com/atl/tex/figuretext.pdf ]
Hi all,

I've been working away at the XeTeX special drivers in ConTeXt, and I
still keep running up against the problem where an \externalfigure gets
found and framed correctly, but the graphic itself ends up on the lower
left corner of the page.

I've tried countless variations on the specials, but something in core-
fig has me completely stymied. I'm now officially in over my head. I hope
there's someone out there who might be able to give me a further clue.

Some notes:
The specials have undergone all sorts of silly variations. As a result,
what you see in the file doesn't reflect the cleanest code.

Quoted from the XeTeX manual: "The final result of a \XeTeXpicfile
command is an object which can be included in the text being typeset just
like a character, albeit usually a rather large one. It could be thought
of as a box, though it cannot be unboxed. It can, however, be put inside
a normal TEX box register, and in fact this is often desirable." 
This unboxing thing sounds potentially critical, but AFAIK, no such thing
happens in core-fig.

Near as I can tell, the \foundexternalfigure box is obtained and measured
from my \dogetXTXfiguresize. In the macros as they currently stand, my
\handlepdfimage isn't actually called, because core-fig thinks it has the
box. 

[Jonathan, I don't expect you to follow what happens with ConTeXt's giant
core-fig file. I'm just writing to see if the output triggers anything
that you might recognise.]
[Hans, the spec-xtx file is ready to replace what's currently in the
ConTeXt distro, which works even less than what's here.]

So, does anyone have any words of wisdom? 

Thanks,
adam
-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
 Adam T. Lindsay, Computing Dept.     atl@comp.lancs.ac.uk
 Lancaster University, InfoLab21        +44(0)1524/510.514
 Lancaster, LA1 4WA, UK             Fax:+44(0)1524/510.492
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
-------------- next part --------------
Skipped content of type multipart/mixed
From pragma at wxs.nl  Mon Nov  8 10:34:47 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Nov  8 10:34:43 2004
Subject: [dev-context] Re: fontdimen trickery
In-Reply-To: <20041101182145.3261@news.comp.lancs.ac.uk>
References: <4186602C.7010600@elvenkind.com>
	<20041101182145.3261@news.comp.lancs.ac.uk>
Message-ID: <418F3DB7.2050607@wxs.nl>

Hi,

I uploaded a beta zip

   http://www.pragma-pod.com/context/beta/cont-tmf.zip

This zip has the following new things:

- s bunch of x-set-*.tex files that will replace setup*.tex files
- cont-en.xml as base interface file
- keys-*.xml and cont-*.xml files

Until now, the interface xml files were generated, but pretty soon we sill start 
using the xml files as starting point instead of setupb.tex.

This means that we need to generate the other interface files

   texexec --int=nl x-set-01

generated a key file, keys-nl.xml that kan be used to convert cont-en.xml into 
cont-nl.xml. This is done by:

   texmfstart ctxtools.rb --translate nl

A quick reference document can be generated by:

   texexec --int=nl x-set-12 --pdf --result=setup-nl.pdf

So, the question for patrick & taco is: can they live with this? I will still 
distribute all the xml files, (now under the interface subpath).

I also added a (not checked, script generated) file attribute in cd:command.

The next step is to fix a couple of thing in the cont-en.xlm file and start 
enhancing the base cont-en.xml file. After that we can start working on 
auxiliary files that provide

- generic descriptions of constants and variables (parameters and keywords)
- explanations of commands, including index entries

(could be maintaned in the wiki), as well as,

- additional descriptions and examples, comments, bug stuff, etc; these things
come from the wiki

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Mon Nov  8 10:37:14 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon Nov  8 10:37:19 2004
Subject: [dev-context] XeTeX specials in ConTeXt
In-Reply-To: <20041107134017.11556@news.comp.lancs.ac.uk>
References: <20041107134017.11556@news.comp.lancs.ac.uk>
Message-ID: <418F3E4A.90008@elvenkind.com>

Adam Lindsay wrote:
> 
> Quoted from the XeTeX manual: "The final result of a \XeTeXpicfile
> command is an object which can be included in the text being typeset just
> like a character, albeit usually a rather large one. It could be thought
> of as a box, though it cannot be unboxed. It can, however, be put inside
> a normal TEX box register, and in fact this is often desirable." 
> This unboxing thing sounds potentially critical, but AFAIK, no such thing
> happens in core-fig.

Is it possible that Hans' macro initializes some sort of displacement to 
(0pt,0pt), implying the lower left corner? It is the only idea I can come
up with, not having XeTeX myself.

Greetings, Taco
From atl at comp.lancs.ac.uk  Mon Nov  8 10:41:45 2004
From: atl at comp.lancs.ac.uk (Adam Lindsay)
Date: Mon Nov  8 10:41:48 2004
Subject: [dev-context] Re: fontdimen trickery
In-Reply-To: <418F3DB7.2050607@wxs.nl>
References: <418F3DB7.2050607@wxs.nl>
Message-ID: <20041108104145.8411@news.comp.lancs.ac.uk>

Hans Hagen said this at Mon, 8 Nov 2004 10:34:47 +0100:

>I uploaded a beta zip
>
>   http://www.pragma-pod.com/context/beta/cont-tmf.zip

I think that's:
    <http://www.pragma-ade.nl/context/beta/>
--
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
 Adam T. Lindsay, Computing Dept.     atl@comp.lancs.ac.uk
 Lancaster University, InfoLab21        +44(0)1524/510.514
 Lancaster, LA1 4WA, UK             Fax:+44(0)1524/510.492
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

From pragma at wxs.nl  Mon Nov  8 10:52:54 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Nov  8 10:52:59 2004
Subject: [dev-context] new beta zip 
In-Reply-To: <20041108104145.8411@news.comp.lancs.ac.uk>
References: <418F3DB7.2050607@wxs.nl>
	<20041108104145.8411@news.comp.lancs.ac.uk>
Message-ID: <418F41F6.1060102@wxs.nl>

Adam Lindsay wrote:
> Hans Hagen said this at Mon, 8 Nov 2004 10:34:47 +0100:
> 
> 
>>I uploaded a beta zip
>>
>>  http://www.pragma-pod.com/context/beta/cont-tmf.zip
> 
> 
> I think that's:
>     <http://www.pragma-ade.nl/context/beta/>

indeed -)

actually, you can also use the pod machine, but that one is configured for https

(the new ade machine has a hardware problem so that site is still a bit messy)

Hans



-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Mon Nov  8 11:29:11 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon Nov  8 11:29:14 2004
Subject: [dev-context] Re: fontdimen trickery
In-Reply-To: <418F3DB7.2050607@wxs.nl>
References: <4186602C.7010600@elvenkind.com>	<20041101182145.3261@news.comp.lancs.ac.uk>
	<418F3DB7.2050607@wxs.nl>
Message-ID: <418F4A77.9090801@elvenkind.com>

Hans Hagen wrote:
 >
> So, the question for patrick & taco is: can they live with this? I will 
> still distribute all the xml files, (now under the interface subpath).

Should be fine, but I have no time to delve into it right away.
Perhaps Patrick has time to check some stuff?

Greetings, Taco
From pragma at wxs.nl  Mon Nov  8 11:38:16 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Nov  8 11:38:17 2004
Subject: [dev-context] XeTeX specials in ConTeXt
In-Reply-To: <20041107134017.11556@news.comp.lancs.ac.uk>
References: <20041107134017.11556@news.comp.lancs.ac.uk>
Message-ID: <418F4C98.5090703@wxs.nl>

Adam Lindsay wrote:

> So, does anyone have any words of wisdom? 

what happens if you say:

\externalfigurew[cow.pdf][object=no]

(i'll see if i can get the mac up and running again this week)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From atl at comp.lancs.ac.uk  Mon Nov  8 12:56:11 2004
From: atl at comp.lancs.ac.uk (Adam Lindsay)
Date: Mon Nov  8 12:56:11 2004
Subject: [dev-context] XeTeX specials in ConTeXt
In-Reply-To: <418F4C98.5090703@wxs.nl>
References: <418F4C98.5090703@wxs.nl>
Message-ID: <20041108125611.27641@news.comp.lancs.ac.uk>

Hans Hagen said this at Mon, 8 Nov 2004 11:38:16 +0100:

>what happens if you say:
>
>\externalfigure[cow.pdf][object=no]
>
>(i'll see if i can get the mac up and running again this week)

Bingo. Perfect.

Okay, so a temporary solution is to put:
\setupexternalfigures[\c!object=\v!no]
...into the spec-xtx driver?
Done. 

I'm guessing that's because core-fig is optimised for pdfetex's PDF
object inclusion/referencing?

Lemme see if I can do some testing of pdf pages and double check the
bookmarks, and I'll ship out a version for inclusion in the distro.

Thanks,
adam
-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
 Adam T. Lindsay, Computing Dept.     atl@comp.lancs.ac.uk
 Lancaster University, InfoLab21        +44(0)1524/510.514
 Lancaster, LA1 4WA, UK             Fax:+44(0)1524/510.492
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

From atl at comp.lancs.ac.uk  Thu Nov 11 15:53:25 2004
From: atl at comp.lancs.ac.uk (Adam Lindsay)
Date: Thu Nov 11 15:53:34 2004
Subject: [dev-context] BiDi in ConTeXt
Message-ID: <20041111145325.1042@news.comp.lancs.ac.uk>

Hi folks.

I just started thinking about further language support within ConTeXt now
that the XeTeX-ConTeXt "basics" are done. XeTeX doesn't have the same
character/line directionality control that is apparently in Omega, but it
does control Right/Left typesetting fairly well.

In particular, it makes a fairly big deal of its implementation of the
eTeX beginR/beginL extensions. They seem to work fairly well in demos
I've seen and simplistic tests I've done.

I was wondering about the bigger issues in terms of BiDi support, though.
Do people want an interface that mimics Omega's \pardir command? Or is
there a more simple/focussed/specific way?

(I imagine I don't see a single \beginR in ConTeXt's source code because
it relies heavily on proper font support, probably beyond what the TFM
system usually offers.)

Anyway, I cooked up a quick simulation of the Omega \pardir command as
used in m-gamma. It only supports \pardir TRT and \pardir TLT, but is it
a way people want to progress?

\def\pardir#1#2#3{%TRT,TLT
  \ifnum\TeXXeTstate=1\else \TeXXeTstate=1\fi % check or blindly set?
  \doifinsetelse{#2}{R,L}
   {\EveryPar{\setbox0=\lastbox %
              \csname begin#2\endcsname\box0}}
   {\message{Paragraph direction must be right or left}}
  \doifnot{#1#3}{TT}
   {\message{Typesetting lines from top to bottom only}}}

Also, is dev-context the right place for a discussion like this?
-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
 Adam T. Lindsay, Computing Dept.     atl@comp.lancs.ac.uk
 Lancaster University, InfoLab21        +44(0)1524/510.514
 Lancaster, LA1 4WA, UK             Fax:+44(0)1524/510.492
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

From pragma at wxs.nl  Thu Nov 11 17:07:31 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Nov 11 17:07:41 2004
Subject: [dev-context] BiDi in ConTeXt
In-Reply-To: <20041111145325.1042@news.comp.lancs.ac.uk>
References: <20041111145325.1042@news.comp.lancs.ac.uk>
Message-ID: <41938E43.3060403@wxs.nl>

Adam Lindsay wrote:

> Anyway, I cooked up a quick simulation of the Omega \pardir command as
> used in m-gamma. It only supports \pardir TRT and \pardir TLT, but is it
> a way people want to progress?

as long as we consider it a low level command ...

> \def\pardir#1#2#3{%TRT,TLT
>   \ifnum\TeXXeTstate=1\else \TeXXeTstate=1\fi % check or blindly set?
>   \doifinsetelse{#2}{R,L}
>    {\EveryPar{\setbox0=\lastbox %
>               \csname begin#2\endcsname\box0}}
>    {\message{Paragraph direction must be right or left}}
>   \doifnot{#1#3}{TT}
>    {\message{Typesetting lines from top to bottom only}}}
> 
> Also, is dev-context the right place for a discussion like this?

sure

i can imagine that we cook up a bit higher level interface once we know what 
we're dealing with

Anyhow, I can add this to syst-etx:

\chardef\inlinedirection\zerocount % 0==notset 1==LR 2==RL

\beginETEX \beginL

\def\pardir#1#2#3% messages end up in a higher level command
   {\global\TeXXeTstate\plusone
    \if#2L\chardef\inlinedirection\plusone\else
    \if#2R\chardef\inlinedirection\plustwo\fi\fi}

\appendtoks \checkinlinedirection \to \everypar

\def\checkinlinedirection
   {\ifcase\inlinedirection\or\beginL\or\beginR\fi}

\endETEX

\starttext

\input tufte

\pardir TRT \input tufte \par \input tufte

\pardir TLT \input tufte

\stoptext


Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Thu Nov 11 18:06:19 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Nov 11 18:06:34 2004
Subject: [dev-context] BiDi in ConTeXt
In-Reply-To: <20041111163852.5018@news.comp.lancs.ac.uk>
References: <41938E43.3060403@wxs.nl>
	<20041111163852.5018@news.comp.lancs.ac.uk>
Message-ID: <41939C0B.2070207@wxs.nl>

Adam Lindsay wrote:
> Hans Hagen said this at Thu, 11 Nov 2004 17:07:31 +0100:
> 
> 
>>Adam Lindsay wrote:
>>
>>
>>>Anyway, I cooked up a quick simulation of the Omega \pardir command as
>>>used in m-gamma. It only supports \pardir TRT and \pardir TLT, but is it
>>>a way people want to progress?
>>
>>as long as we consider it a low level command ...
>>
>>
>>>Also, is dev-context the right place for a discussion like this?
>>
>>sure
>>
>>i can imagine that we cook up a bit higher level interface once we know what 
>>we're dealing with
>>
>>Anyhow, I can add this to syst-etx:
> 
> 
> Thus ends the tutorial at the feet of the master.
> 
> Yeah, that works fine with XeTeX as well, but know that XeTeX's behaviour
> isn't exactly the same as eTeX... [see attached]
> 
> This is because XeTeX also respects the inherent direction of the script
> (from Unicode/the font itself), so insertion of a word of arabic, for
> example, is correctly set right-to-left, even in a paragraph of LtoR roman.

ha, funny side effect, somehow i think that this kind of automatisms are 
dangerous (same for language)

so, maybe we're talking about \worddir as well

i think that it makes sense to have an xtex switch for disabling this 
automatism: three states: font, font+tex, tex

(what happen swith arabic in rl mode? does it get reversed due to the font?)

another interesting feature can be a kind of hook into this language mechanism,
like

   \XeTeXbeginlanguage{en}{tokens}
   \XeTeXendlanguage{en}{tokens}

and that these are expanded automatically when a language switches.

btw, i didn't test that yet, but xetex could be a nice fo engine [i'm currently 
working on foxet]

Hans



-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From atl at comp.lancs.ac.uk  Sun Nov  7 13:30:20 2004
From: atl at comp.lancs.ac.uk (Adam Lindsay)
Date: Thu Nov 11 18:07:05 2004
Subject: [dev-context] XeTeX specials in ConTeXt
Message-ID: <20041107133020.2617@news.comp.lancs.ac.uk>

Hi all,

I've been working away at the XeTeX special drivers in ConTeXt, and I
still keep running up against the problem where an \externalfigure gets
found and framed correctly, but the graphic itself ends up on the lower
left corner of the page.

I've tried countless variations on the specials, but something in core-
fig has me completely stymied. I'm now officially in over my head. I hope
there's someone out there who might be able to give me a further clue.

Some notes:
The specials have undergone all sorts of silly variations. As a result,
what you see in the file doesn't reflect the cleanest code.

Quoted from the XeTeX manual: "The final result of a \XeTeXpicfile
command is an object which can be included in the text being typeset just
like a character, albeit usually a rather large one. It could be thought
of as a box, though it cannot be unboxed. It can, however, be put inside
a normal TEX box register, and in fact this is often desirable." 
This unboxing thing sounds potentially critical, but AFAIK, no such thing
happens in core-fig.

Near as I can tell, the \foundexternalfigure box is obtained and measured
from my \dogetXTXfiguresize. In the macros as they currently stand, my
\handlepdfimage isn't actually called, because core-fig thinks it has the
box. 

[Jonathan, I don't expect you to follow what happens with ConTeXt's giant
core-fig file. I'm just writing to see if the output triggers anything
that you might recognise.]
[Hans, the spec-xtx file is ready to replace what's currently in the
ConTeXt distro, which works even less than what's here.]

So, does anyone have any words of wisdom? 

Thanks,
adam
-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
 Adam T. Lindsay, Computing Dept.     atl@comp.lancs.ac.uk
 Lancaster University, InfoLab21        +44(0)1524/510.514
 Lancaster, LA1 4WA, UK             Fax:+44(0)1524/510.492
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
-------------- next part --------------
Skipped content of type multipart/mixed
From atl at comp.lancs.ac.uk  Thu Nov 11 17:38:52 2004
From: atl at comp.lancs.ac.uk (Adam Lindsay)
Date: Thu Nov 11 18:07:05 2004
Subject: [dev-context] BiDi in ConTeXt
In-Reply-To: <41938E43.3060403@wxs.nl>
References: <41938E43.3060403@wxs.nl>
Message-ID: <20041111163852.5018@news.comp.lancs.ac.uk>

Hans Hagen said this at Thu, 11 Nov 2004 17:07:31 +0100:

>Adam Lindsay wrote:
>
>> Anyway, I cooked up a quick simulation of the Omega \pardir command as
>> used in m-gamma. It only supports \pardir TRT and \pardir TLT, but is it
>> a way people want to progress?
>
>as long as we consider it a low level command ...
>
>> Also, is dev-context the right place for a discussion like this?
>
>sure
>
>i can imagine that we cook up a bit higher level interface once we know what 
>we're dealing with
>
>Anyhow, I can add this to syst-etx:

Thus ends the tutorial at the feet of the master.

Yeah, that works fine with XeTeX as well, but know that XeTeX's behaviour
isn't exactly the same as eTeX... [see attached]

This is because XeTeX also respects the inherent direction of the script
(from Unicode/the font itself), so insertion of a word of arabic, for
example, is correctly set right-to-left, even in a paragraph of LtoR roman.

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
 Adam T. Lindsay, Computing Dept.     atl@comp.lancs.ac.uk
 Lancaster University, InfoLab21        +44(0)1524/510.514
 Lancaster, LA1 4WA, UK             Fax:+44(0)1524/510.492
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pdf
Size: 30950 bytes
Desc: not available
Url : http://www.ntg.nl/pipermail/dev-context/attachments/20041111/5e8a202e/attachment-0001.pdf
From atl at comp.lancs.ac.uk  Thu Nov 11 18:34:38 2004
From: atl at comp.lancs.ac.uk (Adam Lindsay)
Date: Thu Nov 11 18:34:43 2004
Subject: [dev-context] BiDi in ConTeXt
In-Reply-To: <41939C0B.2070207@wxs.nl>
References: <41939C0B.2070207@wxs.nl>
Message-ID: <20041111173438.1378@news.comp.lancs.ac.uk>

Hans Hagen said this at Thu, 11 Nov 2004 18:06:19 +0100:

>ha, funny side effect, somehow i think that this kind of automatisms are 
>dangerous (same for language)

I don't know, actually. 

>so, maybe we're talking about \worddir as well
>
>i think that it makes sense to have an xtex switch for disabling this 
>automatism: three states: font, font+tex, tex

Shall I propose that to Jonathan, or you?

>(what happen swith arabic in rl mode? does it get reversed due to the font?)

Arabic is very happy in RL mode, it's its natural state.

>another interesting feature can be a kind of hook into this language
>mechanism,
>like
>
>   \XeTeXbeginlanguage{en}{tokens}
>   \XeTeXendlanguage{en}{tokens}
>
>and that these are expanded automatically when a language switches.

I saw that sort of thing in m-gamma. It sounds sensible.

>btw, i didn't test that yet, but xetex could be a nice fo engine [i'm
>currently 
>working on foxet]

I'm thinking so, as well. Haven't tested it with those modules yet, but
it tears through cont-ml code with aplomb.
-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
 Adam T. Lindsay, Computing Dept.     atl@comp.lancs.ac.uk
 Lancaster University, InfoLab21        +44(0)1524/510.514
 Lancaster, LA1 4WA, UK             Fax:+44(0)1524/510.492
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

From pragma at wxs.nl  Thu Nov 11 18:41:03 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Thu Nov 11 18:41:15 2004
Subject: [dev-context] BiDi in ConTeXt
In-Reply-To: <20041111173438.1378@news.comp.lancs.ac.uk>
References: <41939C0B.2070207@wxs.nl>
	<20041111173438.1378@news.comp.lancs.ac.uk>
Message-ID: <4193A42F.1020604@wxs.nl>

Adam Lindsay wrote:

> Shall I propose that to Jonathan, or you?

you, since you're the context mac guru, you can cc me -)


Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From atl at comp.lancs.ac.uk  Fri Nov 12 00:20:09 2004
From: atl at comp.lancs.ac.uk (Adam Lindsay)
Date: Fri Nov 12 00:23:25 2004
Subject: [dev-context] Fwd: Re: BiDi in ConTeXt
Message-ID: <20041111232009.24444@news.comp.lancs.ac.uk>

[Idris couldn't reply to the list, so I'm forwarding it.]
---------------- Begin Forwarded Message ----------------
Subject: Re: BiDi in ConTeXt
Date Sent: Thursday, 11 November 2004 14:37
From: Idris Samawi Hamid <ishamid@colostate.edu>
To: Adam Lindsay <atl@comp.lancs.ac.uk>
, Dev Context <dev-context@ntg.nl>

[Please forward to dev-context@ntg.nl]

On Thu, 11 Nov 2004 14:53:25 +0000, Adam Lindsay <atl@comp.lancs.ac.uk> 
wrote:

> Hi folks.

Hi Adam, & thnx for cc'ing me.

> I just started thinking about further language support within ConTeXt now
> that the XeTeX-ConTeXt "basics" are done. XeTeX doesn't have the same
> character/line directionality control that is apparently in Omega, but it
> does control Right/Left typesetting fairly well.

I've been out of the loop on all things TeX for a while now (demands of my 
profession and other matters). I have a couple of general questions:

1. What exactly is the aim and purpose of XeTeX?

2. Since its apparently based on eTeX, and since bidi seems to be of 
interest, why not integrate it with the Aleph project, also eTeX-based 
(with an eye towards ConTeXt), and which already has the bidi stuff 
implemented rather well?

> In particular, it makes a fairly big deal of its implementation of the
> eTeX beginR/beginL extensions. They seem to work fairly well in demos
> I've seen and simplistic tests I've done.
>
> I was wondering about the bigger issues in terms of BiDi support, though.
> Do people want an interface that mimics Omega's \pardir command? Or is
> there a more simple/focussed/specific way?

If the idea is a kind of BiDi-Light (just paragraph and text), then 
implementing a subset of Aleph's functionality (such as \pardir and 
textdir) seems like a good way to go.

> (I imagine I don't see a single \beginR in ConTeXt's source code because
> it relies heavily on proper font support, probably beyond what the TFM
> system usually offers.)

which is where we will need Aleph and Bidi-Full

> Also, is dev-context the right place for a discussion like this?

Please also cc the Aleph list (and forward this thread) because others 
there may find your project interesting or useful. If things get off-topic 
ConTeXt-wise then the Aleph list would be a good place to continue.

Is Giuseppe aware of all of this (I assume he's on dev-context)?

Best
Idris

-- 
Professor Idris Samawi Hamid
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

----------------- End Forwarded Message -----------------

-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
 Adam T. Lindsay, Computing Dept.     atl@comp.lancs.ac.uk
 Lancaster University, InfoLab21        +44(0)1524/510.514
 Lancaster, LA1 4WA, UK             Fax:+44(0)1524/510.492
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

From atl at comp.lancs.ac.uk  Fri Nov 12 00:22:25 2004
From: atl at comp.lancs.ac.uk (Adam Lindsay)
Date: Fri Nov 12 00:23:36 2004
Subject: [dev-context] Re: BiDi in ConTeXt
In-Reply-To: <opshbk1kb6u9mfh0@lamar.colostate.edu>
References: <opshbk1kb6u9mfh0@lamar.colostate.edu>
Message-ID: <20041111232225.6936@news.comp.lancs.ac.uk>

Idris Samawi Hamid said this at Thu, 11 Nov 2004 14:37:58 -0700:

>
>Please also cc the Aleph list (and forward this thread) because others 
>there may find your project interesting or useful. If things get off-topic 
>ConTeXt-wise then the Aleph list would be a good place to continue.

I forwarded your email to dev-context... come & join us, it's 12 people &
low traffic. <http://www.ntg.nl/mailman/listinfo/dev-context>

I don't have posting rights on the Aleph list, so I'll leave it to you to
forward it in that direction. :)
-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
 Adam T. Lindsay, Computing Dept.     atl@comp.lancs.ac.uk
 Lancaster University, InfoLab21        +44(0)1524/510.514
 Lancaster, LA1 4WA, UK             Fax:+44(0)1524/510.492
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-


From atl at comp.lancs.ac.uk  Fri Nov 12 00:39:11 2004
From: atl at comp.lancs.ac.uk (Adam Lindsay)
Date: Fri Nov 12 00:40:01 2004
Subject: [dev-context] Re: BiDi in ConTeXt
In-Reply-To: <opshbk1kb6u9mfh0@lamar.colostate.edu>
References: <opshbk1kb6u9mfh0@lamar.colostate.edu>
Message-ID: <20041111233911.2959@news.comp.lancs.ac.uk>

Idris Samawi Hamid said this at Thu, 11 Nov 2004 14:37:58 -0700:

>Hi Adam, & thnx for cc'ing me.

(Well, only natural: I was looking thru m-gamma to see how things were
being used, and it had your name all over it.)

>> I just started thinking about further language support within ConTeXt now
>> that the XeTeX-ConTeXt "basics" are done. XeTeX doesn't have the same
>> character/line directionality control that is apparently in Omega, but it
>> does control Right/Left typesetting fairly well.
>
>I've been out of the loop on all things TeX for a while now (demands of my 
>profession and other matters). I have a couple of general questions:
>
>1. What exactly is the aim and purpose of XeTeX?

http://scripts.sil.org/xetex
XeTeX is an updating of GXTeX. It is an amalgamation of eTeX with Unicode
and Apple's advanced typography APIs, and is therefore Mac OS X only.
Once cross-platform-ness is sacrificed, there are a lot of interesting
benefits. Font installation issues drop to nearly zero--it has access to
all fonts on the system--and Apple ships the systems with a fairly
impressive array of intelligent fonts. The native Unicode support unlocks
a lot of ConTeXt's stored multilingual potential, too.

>2. Since its apparently based on eTeX, and since bidi seems to be of 
>interest, why not integrate it with the Aleph project, also eTeX-based 
>(with an eye towards ConTeXt), and which already has the bidi stuff 
>implemented rather well?

I doubt it's headed that way, but Jonathan Kew, the developer, may well
be swayed by certain of Omega's paragraph/text directionality constructs.
I don't know it well enough, but William Adams seems to have a hand in
the Omega pie, and is represented in the XeTeX community.

>> In particular, it makes a fairly big deal of its implementation of the
>> eTeX beginR/beginL extensions. They seem to work fairly well in demos
>> I've seen and simplistic tests I've done.
>>
>> I was wondering about the bigger issues in terms of BiDi support, though.
>> Do people want an interface that mimics Omega's \pardir command? Or is
>> there a more simple/focussed/specific way?
>
>If the idea is a kind of BiDi-Light (just paragraph and text), then 
>implementing a subset of Aleph's functionality (such as \pardir and 
>textdir) seems like a good way to go.
>
>> (I imagine I don't see a single \beginR in ConTeXt's source code because
>> it relies heavily on proper font support, probably beyond what the TFM
>> system usually offers.)
>
>which is where we will need Aleph and Bidi-Full

The (too hidden) implication from me was that XeTeX does offer automatic
text directionality, driven by the script and/or Unicode page. Noticing
Hebrew in a default font, I tried spelling Aleph-Dalet-Mem in the middle
of a roman paragraph, and it naturally (no markup needed) came out MDA.
(Hans, incidentally, is a little disturbed by this sort of cleverness.)

>Is Giuseppe aware of all of this (I assume he's on dev-context)?

Actually, looking at the distro list, it looks like he isn't! hi!
-- 
=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
 Adam T. Lindsay, Computing Dept.     atl@comp.lancs.ac.uk
 Lancaster University, InfoLab21        +44(0)1524/510.514
 Lancaster, LA1 4WA, UK             Fax:+44(0)1524/510.492
-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

From ishamid at colostate.edu  Thu Nov 11 22:37:58 2004
From: ishamid at colostate.edu (Idris Samawi Hamid)
Date: Fri Nov 12 11:18:46 2004
Subject: [dev-context] Re: BiDi in ConTeXt
In-Reply-To: <20041111145325.1042@news.comp.lancs.ac.uk>
References: <20041111145325.1042@news.comp.lancs.ac.uk>
Message-ID: <opshbk1kb6u9mfh0@lamar.colostate.edu>

[Please forward to dev-context@ntg.nl]

On Thu, 11 Nov 2004 14:53:25 +0000, Adam Lindsay <atl@comp.lancs.ac.uk> 
wrote:

> Hi folks.

Hi Adam, & thnx for cc'ing me.

> I just started thinking about further language support within ConTeXt now
> that the XeTeX-ConTeXt "basics" are done. XeTeX doesn't have the same
> character/line directionality control that is apparently in Omega, but it
> does control Right/Left typesetting fairly well.

I've been out of the loop on all things TeX for a while now (demands of my 
profession and other matters). I have a couple of general questions:

1. What exactly is the aim and purpose of XeTeX?

2. Since its apparently based on eTeX, and since bidi seems to be of 
interest, why not integrate it with the Aleph project, also eTeX-based 
(with an eye towards ConTeXt), and which already has the bidi stuff 
implemented rather well?

> In particular, it makes a fairly big deal of its implementation of the
> eTeX beginR/beginL extensions. They seem to work fairly well in demos
> I've seen and simplistic tests I've done.
>
> I was wondering about the bigger issues in terms of BiDi support, though.
> Do people want an interface that mimics Omega's \pardir command? Or is
> there a more simple/focussed/specific way?

If the idea is a kind of BiDi-Light (just paragraph and text), then 
implementing a subset of Aleph's functionality (such as \pardir and 
textdir) seems like a good way to go.

> (I imagine I don't see a single \beginR in ConTeXt's source code because
> it relies heavily on proper font support, probably beyond what the TFM
> system usually offers.)

which is where we will need Aleph and Bidi-Full

> Also, is dev-context the right place for a discussion like this?

Please also cc the Aleph list (and forward this thread) because others 
there may find your project interesting or useful. If things get off-topic 
ConTeXt-wise then the Aleph list would be a good place to continue.

Is Giuseppe aware of all of this (I assume he's on dev-context)?

Best
Idris

-- 
Professor Idris Samawi Hamid
Department of Philosophy
Colorado State University
Fort Collins, CO 80523
From patrick at gundla.ch  Wed Nov 17 12:28:08 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed Nov 17 12:28:09 2004
Subject: [dev-context] Re: fontdimen trickery
In-Reply-To: <418F3DB7.2050607@wxs.nl> (Hans Hagen's message of "Mon, 08 Nov
	2004 10:34:47 +0100")
References: <4186602C.7010600@elvenkind.com>
	<20041101182145.3261@news.comp.lancs.ac.uk> <418F3DB7.2050607@wxs.nl>
Message-ID: <m2actgogtz.fsf@levana.de>

Hello Hans and others,

> I uploaded a beta zip
>
>    http://www.pragma-pod.com/context/beta/cont-tmf.zip

-pod.com? -ade.com worked fine, I guess I've got the right file.


> - keys-*.xml and cont-*.xml files

cont-en.xml. It doesn't validate against the current rnc/rng schema 
http://dl.contextgarden.net/texshow/interface.rnc
http://dl.contextgarden.net/texshow/interface.rng

because empty <cd:arguments> is not allowed:

<cd:command name="typing" type="environment" generated="yes">
  <cd:sequence>
    <cd:variable value="typing"/>
  </cd:sequence>
  <cd:arguments>
  </cd:arguments>
</cd:command>

--> this would be OK:

<cd:command name="typing" type="environment" generated="yes">
  <cd:sequence>
    <cd:variable value="typing"/>
  </cd:sequence>
</cd:command>


And in setupdescriptions we have

      <cd:parameter name="headcommand">
      </cd:parameter>
 

which is not allowed because parameter needs at least one of
constant/variable:

Parameter = element parameter  {
   attribute name { text },
   ( element constant { attribute type {text } } 
   | element variable { attribute type {text } }   )+
}


Either we (you :-) should correct the cont-en.xml file or we (I)
should change the schema. At least for the second error (empty
parameter) I'd opt for the first choice, because it makes more sense
to me to have parameter list with parameters. So we can discusss on
the first part, if empty argument lists should be allowed.

The same with the cont-de.xml, I haven't tried the other ones.


P.
-- 
ConTeXt wiki: http://contextgarden.net
From patrick at gundla.ch  Wed Nov 17 12:52:56 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed Nov 17 12:52:58 2004
Subject: [dev-context] translations of xml files
Message-ID: <m23bz8ofon.fsf@levana.de>

Hello Hans, Taco and others,

we now have in cont-en.xml:

<cd:command name="showlayout">
  <cd:sequence>
    <cd:string value="showlayout"/>
  </cd:sequence>
</cd:command>

and in cont-de.xml

<cd:command name="zeigelayout">
  <cd:sequence>
    <cd:string value="zeigelayout"/>
  </cd:sequence>
</cd:command>


what about making the german (....) translation to something like:

<cd:command name="showlayout" lang="de">
  <cd:sequence>
    <cd:string value="zeigelayout"/>
  </cd:sequence>
</cd:command>


so we can easily see what showlayout is in different
languages/interfaces. 

P. Atrick
-- 
ConTeXt wiki: http://contextgarden.net
From taco at elvenkind.com  Wed Nov 17 13:03:43 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed Nov 17 13:05:32 2004
Subject: [dev-context] translations of xml files
In-Reply-To: <m23bz8ofon.fsf@levana.de>
References: <m23bz8ofon.fsf@levana.de>
Message-ID: <20041117130343.78fc0754.taco@elvenkind.com>

On 17 Nov 2004 12:52:56 +0100
>
> what about making the german (....) translation to something like:
> 
> <cd:command name="showlayout" lang="de">
>   <cd:sequence>
>     <cd:string value="zeigelayout"/>
>   </cd:sequence>
> </cd:command>

I totally agree!

Greetings, Taco

From taco at elvenkind.com  Wed Nov 17 13:08:15 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed Nov 17 13:10:02 2004
Subject: [dev-context] Re: fontdimen trickery
In-Reply-To: <m2actgogtz.fsf@levana.de>
References: <4186602C.7010600@elvenkind.com>
	<20041101182145.3261@news.comp.lancs.ac.uk>
	<418F3DB7.2050607@wxs.nl> <m2actgogtz.fsf@levana.de>
Message-ID: <20041117130815.25067c24.taco@elvenkind.com>

On 17 Nov 2004 12:28:08 +0100
"Patrick Gundlach" <patrick@gundla.ch> wrote:

> Either we (you :-) should correct the cont-en.xml file or we (I)
> should change the schema. At least for the second error (empty
> parameter) I'd opt for the first choice, because it makes more sense
> to me to have parameter list with parameters. So we can discusss on
> the first part, if empty argument lists should be allowed.

I vote against allowing that (an empty  argument list parses to a human 
essentially the same as 'no arguments', but to a computer as 'an unspecified
number of arguments'. Too confusing, IMO)

From pragma at wxs.nl  Wed Nov 17 13:51:58 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Wed Nov 17 13:52:03 2004
Subject: [dev-context] translations of xml files
In-Reply-To: <m23bz8ofon.fsf@levana.de>
References: <m23bz8ofon.fsf@levana.de>
Message-ID: <419B496E.9090906@wxs.nl>

P.A. Trick wrote:

> Hello Hans, Taco and others,
> 
> we now have in cont-en.xml:
> 
> <cd:command name="showlayout">
>   <cd:sequence>
>     <cd:string value="showlayout"/>
>   </cd:sequence>
> </cd:command>
> 
> and in cont-de.xml
> 
> <cd:command name="zeigelayout">
>   <cd:sequence>
>     <cd:string value="zeigelayout"/>
>   </cd:sequence>
> </cd:command>
> 
> 
> what about making the german (....) translation to something like:
> 
> <cd:command name="showlayout" lang="de">
>   <cd:sequence>
>     <cd:string value="zeigelayout"/>
>   </cd:sequence>
> </cd:command>
> 
> 
> so we can easily see what showlayout is in different
> languages/interfaces. 
> 
> P. Atrick


sounds ok to me

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From patrick at gundla.ch  Wed Nov 17 14:15:41 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed Nov 17 14:15:43 2004
Subject: [dev-context] Re: translations of xml files
In-Reply-To: <419B496E.9090906@wxs.nl> (Hans Hagen's message of "Wed, 17 Nov
	2004 13:51:58 +0100")
References: <m23bz8ofon.fsf@levana.de> <419B496E.9090906@wxs.nl>
Message-ID: <m2u0romxaa.fsf@levana.de>

Hello,

OK, I've "corrected" the cont-en.xml file and created the other
interfaces (cont-nl.xml ...) files. They all validate against the
known schema. You can find 'em at http://dl.contextgarden.net/xml/

http://dl.contextgarden.net/xml/cont-en.xml
http://dl.contextgarden.net/xml/cont-de.xml
http://dl.contextgarden.net/xml/cont-nl.xml
http://dl.contextgarden.net/xml/cont-cz.xml
http://dl.contextgarden.net/xml/cont-ro.xml
http://dl.contextgarden.net/xml/cont-it.xml

the changes made to cont-en.xml are: (only one change not deleting the
empty arguments set)

--------------------------------------------------
--- /tmp/cont/tex/context/interface/cont-en.xml	Mon Nov  8 00:12:48 2004
+++ cont-en.xml	Wed Nov 17 13:59:42 2004
@@ -838,8 +838,6 @@
   <cd:sequence>
     <cd:variable value="typing"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="typefile" file="verb-ini.tex">
@@ -1006,8 +1004,6 @@
   <cd:sequence>
     <cd:string value="localfootnotes"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="placelocalfootnotes" file="core-not.tex">
@@ -1928,8 +1924,6 @@
   <cd:sequence>
     <cd:string value="background"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="background">
@@ -2257,8 +2251,6 @@
   <cd:sequence>
     <cd:string value="localenvironment"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="setupsystem" file="core-sys.tex">
@@ -2568,8 +2560,6 @@
   <cd:sequence>
     <cd:string value="marginblock"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="part" file="core-sec.tex">
@@ -2972,6 +2962,7 @@
         <cd:constant type="hanging"/>
       </cd:parameter>
       <cd:parameter name="headcommand">
+        <cd:constant type="cd:command"/>
       </cd:parameter>
       <cd:parameter name="hang">
         <cd:constant type="fit"/>
@@ -3048,8 +3039,6 @@
   <cd:sequence>
     <cd:variable value="enumeration"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="definedescription" file="core-des.tex">
@@ -4454,8 +4443,6 @@
   <cd:sequence>
     <cd:string value="opposite"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="setuphyphenmark" file="core-mis.tex">
@@ -4523,8 +4510,6 @@
   <cd:sequence>
     <cd:string value="positioning"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="grid" file="core-spa.tex">
@@ -5252,8 +5237,6 @@
   <cd:sequence>
     <cd:string value="lines"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="setupparagraphnumbering" file="page-lin.tex">
@@ -6849,8 +6832,6 @@
     <cd:variable value="name"/>
     <cd:string value="makeup"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="version">
@@ -6967,16 +6948,12 @@
   <cd:sequence>
     <cd:string value="unpacked"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="linecorrection" type="environment">
   <cd:sequence>
     <cd:string value="linecorrection"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="correctwhitespace" file="core-spa.tex">
@@ -6992,16 +6969,12 @@
   <cd:sequence>
     <cd:string value="postponing"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="local" type="environment">
   <cd:sequence>
     <cd:string value="local"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="narrower" type="environment">
@@ -7021,8 +6994,6 @@
   <cd:sequence>
     <cd:string value="hiding"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="setupalign" file="core-spa.tex">
@@ -7435,8 +7406,6 @@
   <cd:sequence>
     <cd:variable value="formula"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="mathematics" file="supp-mat.tex">
@@ -7628,8 +7597,6 @@
     <cd:string value="placelistof"/>
     <cd:variable value="floats"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="completelistoffloats" generated="yes">
@@ -7637,8 +7604,6 @@
     <cd:string value="completelistof"/>
     <cd:variable value="floats"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="referral" file="core-mis.tex">
@@ -7931,8 +7896,6 @@
   <cd:sequence>
     <cd:variable value="paragraph"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="setupparagraphs" file="core-mis.tex">
@@ -8761,8 +8724,6 @@
   <cd:sequence>
     <cd:string value="screen"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="setuppagetransitions" file="core-int.tex">
@@ -9151,16 +9112,12 @@
   <cd:sequence>
     <cd:string value="synchronize"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="synchronization" type="environment">
   <cd:sequence>
     <cd:string value="synchronization"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="setupsynchronizationbar" file="core-int.tex">
@@ -9344,8 +9301,6 @@
   <cd:sequence>
     <cd:string value="markversion"/>
   </cd:sequence>
-  <cd:arguments>
-  </cd:arguments>
 </cd:command>
 
 <cd:command name="selectversion" file="core-int.tex">

--------------------------------------------------

to generate the othere interfaces I have commented out a line in
ctxtools.rb:


[...]
            data.i_translate('cd:variable' , 'type' , variables)
            data.i_translate('cd:inherit'  , 'name' , strings)
#            data.i_translate('cd:command'  , 'name' , strings)


so we now have (cont-nl.xml)

<cd:command name="showlayout">
  <cd:sequence>
    <cd:string value="toonlayout"/>
  </cd:sequence>
</cd:command>



taken the keys files from the 2004.11.16 distribution:

pg@m24s02:/tmp/pg$ texmfstart ctxtools.rb --translate
CtxTools | generating keys-cz.xml
CtxTools | loading keys-cz.xml
CtxTools | loading cont-en.xml
CtxTools | translating interface en to cz
CtxTools | saving cont-cz.xml
CtxTools | generating keys-de.xml
CtxTools | loading keys-de.xml
CtxTools | loading cont-en.xml
CtxTools | translating interface en to de
CtxTools | saving cont-de.xml
CtxTools | generating keys-it.xml
CtxTools | loading keys-it.xml
CtxTools | loading cont-en.xml
CtxTools | translating interface en to it
CtxTools | saving cont-it.xml
CtxTools | generating keys-nl.xml
CtxTools | loading keys-nl.xml
CtxTools | loading cont-en.xml
CtxTools | translating interface en to nl
CtxTools | saving cont-nl.xml
CtxTools | generating keys-ro.xml
CtxTools | loading keys-ro.xml
CtxTools | loading cont-en.xml
CtxTools | translating interface en to ro
CtxTools | saving cont-ro.xml


Patrick
-- 
ConTeXt wiki: http://contextgarden.net
From patrick at gundla.ch  Wed Nov 17 18:47:03 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed Nov 17 18:47:07 2004
Subject: [dev-context] interface xml files / ctxtools
Message-ID: <m2is84mkq0.fsf@levana.de>

Hello Hans,

it looks as if texmfstart/ctxtools is not trying kpsewhich and alike.
For texshow-web I'd like to rely on cont-en.xml in the current dir
only and texmfstart/ctxtools should take the keys-xx.xml from the
distribution:

pg$ texmfstart ctxtools.rb --translate ro
CtxTools | generating keys-ro.xml
CtxTools | no keys-ro.xml generated

right, I have no keys-ro.xml in my dir:

pg$ ls keys-ro.xml
ls: keys-ro.xml: No such file or directory


but texmfstart should be able to find it:

pg$ kpsewhich keys-ro.xml
/opt/context/latest/texmf/tex/context/interface/keys-ro.xml

Would it be possible to use the kpathse stuff as fallback?

Patrick
-- 
ConTeXt wiki: http://contextgarden.net
From pragma at wxs.nl  Wed Nov 17 18:54:01 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Wed Nov 17 18:54:07 2004
Subject: [dev-context] interface xml files / ctxtools
In-Reply-To: <m2is84mkq0.fsf@levana.de>
References: <m2is84mkq0.fsf@levana.de>
Message-ID: <419B9039.6060909@wxs.nl>

Patrick Gundlach wrote:
> Hello Hans,
> 
> it looks as if texmfstart/ctxtools is not trying kpsewhich and alike.
> For texshow-web I'd like to rely on cont-en.xml in the current dir
> only and texmfstart/ctxtools should take the keys-xx.xml from the
> distribution:
> 
> pg$ texmfstart ctxtools.rb --translate ro
> CtxTools | generating keys-ro.xml
> CtxTools | no keys-ro.xml generated
> 
> right, I have no keys-ro.xml in my dir:
> 
> pg$ ls keys-ro.xml
> ls: keys-ro.xml: No such file or directory
> 
> 
> but texmfstart should be able to find it:
> 
> pg$ kpsewhich keys-ro.xml
> /opt/context/latest/texmf/tex/context/interface/keys-ro.xml
> 
> Would it be possible to use the kpathse stuff as fallback?

try the --force option ... surprise option -)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From patrick at gundla.ch  Wed Nov 17 19:00:08 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed Nov 17 19:00:09 2004
Subject: [dev-context] Re: interface xml files / ctxtools
In-Reply-To: <419B9039.6060909@wxs.nl> (Hans Hagen's message of "Wed, 17 Nov
	2004 18:54:01 +0100")
References: <m2is84mkq0.fsf@levana.de> <419B9039.6060909@wxs.nl>
Message-ID: <m2brdwmk47.fsf@levana.de>


[...]

>> /opt/context/latest/texmf/tex/context/interface/keys-ro.xml
>> Would it be possible to use the kpathse stuff as fallback?
>
> try the --force option ... surprise option -)

It is - surprisingly - not changing anything.

pg@m24s02:/tmp/pg$ texmfstart ctxtools.rb --force --translate ro 
CtxTools | generating keys-ro.xml
CtxTools | no keys-ro.xml generated
pg@m24s02:/tmp/pg$ ll cont-ro.xml
ls: cont-ro.xml: No such file or directory


Patrick
-- 
ConTeXt wiki: http://contextgarden.net
From patrick at gundla.ch  Wed Nov 17 19:02:24 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed Nov 17 19:02:24 2004
Subject: [dev-context] key files
Message-ID: <m24qjomk0f.fsf@levana.de>

Hi,

the keys-??.xml should have another namespace.

Now:
<cd:interface xmlns:cd="http://www.pragma-ade.com/commands" name="context" language="de" version="2004.11.16">


future:
<cd:keys xmlns:cd="http://www.pragma-ade.com/keys" name="context" language="de" version="2004.11.16">

(or something like this, what is this name="context" for?)


Patrick
-- 
ConTeXt wiki: http://contextgarden.net
From pragma at wxs.nl  Wed Nov 17 21:56:33 2004
From: pragma at wxs.nl (h h extern)
Date: Wed Nov 17 21:56:42 2004
Subject: [dev-context] Re: interface xml files / ctxtools
In-Reply-To: <m2brdwmk47.fsf@levana.de>
References: <m2is84mkq0.fsf@levana.de> <419B9039.6060909@wxs.nl>
	<m2brdwmk47.fsf@levana.de>
Message-ID: <419BBB01.9070900@wxs.nl>

Patrick Gundlach wrote:
> [...]
> 
> 
>>>/opt/context/latest/texmf/tex/context/interface/keys-ro.xml
>>>Would it be possible to use the kpathse stuff as fallback?
>>
>>try the --force option ... surprise option -)
> 
> 
> It is - surprisingly - not changing anything.
> 
> pg@m24s02:/tmp/pg$ texmfstart ctxtools.rb --force --translate ro 
> CtxTools | generating keys-ro.xml
> CtxTools | no keys-ro.xml generated
> pg@m24s02:/tmp/pg$ ll cont-ro.xml
> ls: cont-ro.xml: No such file or directory

strange, can you find out why?


one = "texexec --make --alone --all #{interface}"
two = "texexec --batch --silent --interface=#{interface} x-set-01"



Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Wed Nov 17 22:19:59 2004
From: pragma at wxs.nl (h h extern)
Date: Wed Nov 17 22:20:08 2004
Subject: [dev-context] key files
In-Reply-To: <m24qjomk0f.fsf@levana.de>
References: <m24qjomk0f.fsf@levana.de>
Message-ID: <419BC07F.8000107@wxs.nl>

Patrick Gundlach wrote:
> Hi,
> 
> the keys-??.xml should have another namespace.
> 
> Now:
> <cd:interface xmlns:cd="http://www.pragma-ade.com/commands" name="context" language="de" version="2004.11.16">
> 
> 
> future:
> <cd:keys xmlns:cd="http://www.pragma-ade.com/keys" name="context" language="de" version="2004.11.16">
> 
> (or something like this, what is this name="context" for?)

can't we share the schema? else we have to use different namespaces cd: kd: in a 
mixed doc


a module definition could say:

name="nath"
name="ppchtex"





-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Tue Nov 23 16:38:55 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue Nov 23 16:38:58 2004
Subject: [dev-context] new release: bug in scite files?
In-Reply-To: <419BBB01.9070900@wxs.nl>
References: <m2is84mkq0.fsf@levana.de>
	<419B9039.6060909@wxs.nl>	<m2brdwmk47.fsf@levana.de>
	<419BBB01.9070900@wxs.nl>
Message-ID: <41A3598F.4050101@elvenkind.com>


Hans,

It looks like the new (2004.11.22) cont-XX-scite.properties files
are all using english macro names instead of translated ones.

Is that intentional or a bug? (if it is a bug, I assume I'd better not 
create release notes until a new release is in place?).

Greetings, Taco
From pragma at wxs.nl  Tue Nov 23 16:55:53 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Tue Nov 23 16:55:57 2004
Subject: [dev-context] new release: bug in scite files?
In-Reply-To: <41A3598F.4050101@elvenkind.com>
References: <m2is84mkq0.fsf@levana.de> <419B9039.6060909@wxs.nl>
	<m2brdwmk47.fsf@levana.de> <419BBB01.9070900@wxs.nl>
	<41A3598F.4050101@elvenkind.com>
Message-ID: <41A35D89.5070208@wxs.nl>

Taco Hoekwater wrote:
> 
> Hans,
> 
> It looks like the new (2004.11.22) cont-XX-scite.properties files
> are all using english macro names instead of translated ones.

oeps, i'll have a look

> Is that intentional or a bug? (if it is a bug, I assume I'd better not 
> create release notes until a new release is in place?).

indeed

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From dh at capdm.com  Wed Nov 24 11:31:01 2004
From: dh at capdm.com (Duncan Hothersall)
Date: Wed Nov 24 11:31:03 2004
Subject: [dev-context] Re: symb-uni.tex (was: degree sign)
In-Reply-To: <20041123134237.7129@news.comp.lancs.ac.uk>
References: <20041123134237.7129@news.comp.lancs.ac.uk>
Message-ID: <41A462E5.7030808@capdm.com>

Maybe the dev list is a better place for this follow-up.

I'm trying to understand
(a) what exactly the task is to create the maths vectors, and
(b) what is really going on with the degree sign.

Taking (b) first...

Looking in unic-000.tex (the degree sign is #00B0 = char 176 in vector
0) I see two vector definitions. Does the second supersede the first or
are both needed?

Looking at the second vector definition, it starts at char 159 and so
looking down to position 176 there appears to be the correct code -
namely \textdegree. This presumably explains why it appears correctly in
running text in my sample posted to the ConTeXt list. But why does it
not work in the XMLdata section? Is it the case that there is another
unicode processing system for data being processed as XML? Is this where
the fix is required?

As to question (a) - for example what exactly should I put into, say
unic-034.tex to denote #222A (character 42 in vector 34) as \cup? Do I
need two \startunicodevector commands? Or do i just do

\startunicodevector 34
	\unknownchar	\or
	... [repeat 41 times] ...
	\cup	\or
	...
\stopunicodevector

?

Sorry if this betrays a lack of understanding. Look forward to
clarification.

Duncan

Adam Lindsay (23/11/2004 13:42) said:
>>Duncan Hothersall wrote:
>>
>>
>>>I have been searching in the base files but can't see the hook. Can 
>>>anyone point me in the right direction to fix this? Thanks.
>>
>>we (you -) need to define unic-*.tex vectors for the math ranges,
> 
> 
> The attached symbol file might be a place to start.
> (didn't bother with list, cos file's to big)

From pragma at wxs.nl  Wed Nov 24 17:23:35 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Wed Nov 24 17:23:53 2004
Subject: [dev-context] Re: symb-uni.tex
In-Reply-To: <41A462E5.7030808@capdm.com>
References: <20041123134237.7129@news.comp.lancs.ac.uk>
	<41A462E5.7030808@capdm.com>
Message-ID: <41A4B587.9070007@wxs.nl>

Duncan Hothersall wrote:
> Maybe the dev list is a better place for this follow-up.
> 
> I'm trying to understand
> (a) what exactly the task is to create the maths vectors, and
> (b) what is really going on with the degree sign.
> 
> Taking (b) first...
> 
> Looking in unic-000.tex (the degree sign is #00B0 = char 176 in vector
> 0) I see two vector definitions. Does the second supersede the first or
> are both needed?

the second one is the fast alternative; i always keep the previous versions of 
implementations for educational purposes; take whatever you like most, i can 
change them afterwards

> Looking at the second vector definition, it starts at char 159 and so
> looking down to position 176 there appears to be the correct code -
> namely \textdegree. This presumably explains why it appears correctly in
> running text in my sample posted to the ConTeXt list. But why does it
> not work in the XMLdata section? Is it the case that there is another
> unicode processing system for data being processed as XML? Is this where
> the fix is required?

hm, aren't the math chars in another vector then?

> As to question (a) - for example what exactly should I put into, say
> unic-034.tex to denote #222A (character 42 in vector 34) as \cup? Do I
> need two \startunicodevector commands? Or do i just do
> 
> \startunicodevector 34
>     \unknownchar    \or
>     ... [repeat 41 times] ...
>     \cup    \or
>     ...
> \stopunicodevector

one option is to make a full vector (255 codes) with unknowns and to fill then 
stepwise

the offset calculations are just optimizations

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From dh at capdm.com  Wed Nov 24 17:47:47 2004
From: dh at capdm.com (Duncan Hothersall)
Date: Wed Nov 24 17:47:49 2004
Subject: [dev-context] Re: symb-uni.tex
In-Reply-To: <41A4B587.9070007@wxs.nl>
References: <20041123134237.7129@news.comp.lancs.ac.uk>
	<41A462E5.7030808@capdm.com> <41A4B587.9070007@wxs.nl>
Message-ID: <41A4BB33.3000804@capdm.com>

> the second one is the fast alternative; i always keep the previous 
> versions of implementations for educational purposes; take whatever you 
> like most, i can change them afterwards

Right, that makes sense. I'll use the second one.

>> Looking at the second vector definition, it starts at char 159 and so
>> looking down to position 176 there appears to be the correct code -
>> namely \textdegree. This presumably explains why it appears correctly in
>> running text in my sample posted to the ConTeXt list. But why does it
>> not work in the XMLdata section? Is it the case that there is another
>> unicode processing system for data being processed as XML? Is this where
>> the fix is required?
> 
> hm, aren't the math chars in another vector then?

Most of them are, but the most commonly used (I guess?) are in 0. Any 
idea what might be creating the $^$ output when the textdegree character 
is used in XML? Looks like it maybe isn't a unicode problem?

>> \startunicodevector 34
>>     \unknownchar    \or
>>     ... [repeat 41 times] ...
>>     \cup    \or
>>     ...
>> \stopunicodevector
> 
> one option is to make a full vector (255 codes) with unknowns and to 
> fill then stepwise

Great, understood. I'll get onto this then.

Thanks,

Duncan
From pragma at wxs.nl  Wed Nov 24 18:02:41 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Wed Nov 24 18:02:59 2004
Subject: [dev-context] Re: symb-uni.tex
In-Reply-To: <41A4BB33.3000804@capdm.com>
References: <20041123134237.7129@news.comp.lancs.ac.uk>
	<41A462E5.7030808@capdm.com> <41A4B587.9070007@wxs.nl>
	<41A4BB33.3000804@capdm.com>
Message-ID: <41A4BEB1.6010402@wxs.nl>

Duncan Hothersall wrote:

> Most of them are, but the most commonly used (I guess?) are in 0. Any 
> idea what might be creating the $^$ output when the textdegree character 
> is used in XML? Looks like it maybe isn't a unicode problem?

smells like a math font problem: the unicode maps on a symbol

so, first we need to make a couple of examples using all kind of unicode chars 
in math mode

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Wed Dec  1 12:52:39 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed Dec  1 12:53:48 2004
Subject: [dev-context] texexec patch (recognize pdfxtex in --version)
In-Reply-To: <41A462E5.7030808@capdm.com>
References: <20041123134237.7129@news.comp.lancs.ac.uk>
	<41A462E5.7030808@capdm.com>
Message-ID: <20041201125239.1e2ed385.taco@elvenkind.com>


Hi,

Here's a one-line change from me, it makes --version correctly
identify the pdfxtex executable.

Greetings, Taco

[taco@boo web2c]$ diff ~/texmf/scripts/context/perl/texexec.pl /usr/TeX/texmf-dist/scripts/context/perl/texexec.pl

2789c2789
<          { /^\s*This is (.*pdf(|e|x)TeX.*?)$/o and $texengine = $1 ;
---
>          { /^\s*This is (.*pdf(|e)TeX.*?)$/o and $texengine = $1 ;

From patrick at gundla.ch  Thu Dec  2 17:11:09 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu Dec  2 17:10:57 2004
Subject: [dev-context] Re: key files
In-Reply-To: <419BC07F.8000107@wxs.nl> (h. h. extern's message of "Wed, 17
	Nov 2004 22:19:59 +0100")
References: <m24qjomk0f.fsf@levana.de> <419BC07F.8000107@wxs.nl>
Message-ID: <m2d5xs65pe.fsf@levana.de>

h h extern <pragma@wxs.nl> writes:

> Patrick Gundlach wrote:
>> Hi,
>> the keys-??.xml should have another namespace.
>> Now:
>> <cd:interface xmlns:cd="http://www.pragma-ade.com/commands" name="context" language="de" version="2004.11.16">
>> future:
>> <cd:keys xmlns:cd="http://www.pragma-ade.com/keys" name="context" language="de" version="2004.11.16">
>> (or something like this, what is this name="context" for?)
>
> can't we share the schema? else we have to use different namespaces
> cd: kd: in a mixed doc

sure, technically we could share the schema, but IMO it doesn't make
any sence, because the cont-xx.xml and keys-xx.xml are two totally
different xml files (they somewhat belong togehter, but only
semantically, not syntactically). 


P.
From patrick at gundla.ch  Mon Dec  6 20:13:56 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Mon Dec  6 20:13:41 2004
Subject: [dev-context] Re: interface xml files / ctxtools
In-Reply-To: <419BBB01.9070900@wxs.nl> (h. h. extern's message of "Wed, 17
	Nov 2004 21:56:33 +0100")
References: <m2is84mkq0.fsf@levana.de> <419B9039.6060909@wxs.nl>
	<m2brdwmk47.fsf@levana.de> <419BBB01.9070900@wxs.nl>
Message-ID: <m2hdmzqlxn.fsf@levana.de>

Hello,


> Patrick Gundlach wrote:
>> [...]
>> 
>>>>/opt/context/latest/texmf/tex/context/interface/keys-ro.xml
>
>>>>Would it be possible to use the kpathse stuff as fallback?
>>>
>>>try the --force option ... surprise option -)
>> It is - surprisingly - not changing anything.
>> pg@m24s02:/tmp/pg$ texmfstart ctxtools.rb --force --translate ro
>> CtxTools | generating keys-ro.xml
>> CtxTools | no keys-ro.xml generated
>> pg@m24s02:/tmp/pg$ ll cont-ro.xml
>> ls: cont-ro.xml: No such file or directory
>
> strange, can you find out why?
>
>
> one = "texexec --make --alone --all #{interface}"
> two = "texexec --batch --silent --interface=#{interface} x-set-01"

even when I run these commands on the command line by themself, they
fail, because x-set-01.tex is not found by texexec. Somehow it doesn't
use kpathsea for finding it.

Patrick

(PS: anybody interested in a kpathsea.rb as an interface for libkpathsea?)
-- 
ConTeXt wiki: http://contextgarden.net
From pragma at wxs.nl  Tue Dec  7 00:31:49 2004
From: pragma at wxs.nl (h h extern)
Date: Tue Dec  7 00:33:24 2004
Subject: [dev-context] Re: interface xml files / ctxtools
In-Reply-To: <m2hdmzqlxn.fsf@levana.de>
References: <m2is84mkq0.fsf@levana.de> <419B9039.6060909@wxs.nl>
	<m2brdwmk47.fsf@levana.de> <419BBB01.9070900@wxs.nl>
	<m2hdmzqlxn.fsf@levana.de>
Message-ID: <41B4EBE5.5050506@wxs.nl>

Patrick Gundlach wrote:

>>one = "texexec --make --alone --all #{interface}"
>>two = "texexec --batch --silent --interface=#{interface} x-set-01"
> 
> 
> even when I run these commands on the command line by themself, they
> fail, because x-set-01.tex is not found by texexec. Somehow it doesn't
> use kpathsea for finding it.

this is because texexec looks for the file on the given path; try --global to 
bypass this test

> (PS: anybody interested in a kpathsea.rb as an interface for libkpathsea?)

sure, we should start building

   tex/kpsea
   tex/xpdf

kind of libraries; i once did it with xpdf and swig (the most complex thing is 
to properly map non standard types (classes) to normal ones (like string);



Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From patrick at gundla.ch  Tue Dec  7 00:47:17 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Tue Dec  7 00:47:02 2004
Subject: [dev-context] libkpathsea in ruby?
In-Reply-To: <41B4EBE5.5050506@wxs.nl> (h. h. extern's message of "Tue, 07
	Dec 2004 00:31:49 +0100")
References: <m2is84mkq0.fsf@levana.de> <419B9039.6060909@wxs.nl>
	<m2brdwmk47.fsf@levana.de> <419BBB01.9070900@wxs.nl>
	<m2hdmzqlxn.fsf@levana.de> <41B4EBE5.5050506@wxs.nl>
Message-ID: <m2d5xnq9a2.fsf_-_@levana.de>

Hi,


[...]

>> (PS: anybody interested in a kpathsea.rb as an interface for libkpathsea?)

my implementation is currently using the commandline tool kpsewhich
for finding files, but confirms to the c-api in its interface:

    kp=Kpathsea.new
    kp.find_file("cont-sys.tex")
    kp.find_file("hacker.jpg","tex")

(returns nil or location of file)

it will support 

    kp.open(file,fmt)

in the future that returns an File instance. I will bind this to the
libkpathsea c library eventually.

(sorry for being so minimalistic)



# kpathsea.rb - libkpathsea access for ruby

# Last Change: Mon Dec  6 19:51:36 2004

class Kpathsea
  def initialize (progname=$0)
    raise ArgumentError if progname.match(/('|")/)
    @progname=$0
  end
  def find_file(name,fmt="tex",mustexist=false)
    raise ArgumentError if name.match(/('|")/)
    runkpsewhich(name,fmt,mustexist)
  end

  private

  def runkpsewhich(name,fmt,mustexist)
    # mustexist ignored for now
    cmdline="kpsewhich -progname=" + @progname + " -format " + fmt + " " + name
    lines = ""
    IO.popen(cmdline) do |io|
      lines = io.readlines
    end
    return $? == 0 ? lines.to_s.chomp : nil
  end
end


Patrick
-- 
ConTeXt wiki: http://contextgarden.net
From patrick at gundla.ch  Tue Dec  7 01:07:17 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Tue Dec  7 01:07:02 2004
Subject: [dev-context] cont-de.xml incorrect translated
Message-ID: <m28y8bq8cq.fsf@levana.de>

Hello Hans,

the cont-de.xml gets incorrect translated in 2004.11.24:

(see inherit)

en:
<cd:command name="completecombinedlist" generated="yes">
  <cd:sequence>
    <cd:string value="complete"/>
    <cd:variable value="combinedlist"/>
  </cd:sequence>
  <cd:arguments>
    <cd:keywords>
      <cd:constant type="cd:name"/>
    </cd:keywords>
    <cd:assignments list="yes">
      <cd:inherit name="setupcombinedlist"/>
    </cd:assignments>
  </cd:arguments>
</cd:command>

de:
<cd:command name="completecombinedlist" generated="yes">
  <cd:sequence>
    <cd:string value="vollende"/>
    <cd:variable value="combinedlist"/>
  </cd:sequence>
  <cd:arguments>
    <cd:keywords>
      <cd:constant type="cd:name"/>
    </cd:keywords>
    <cd:assignments list="yes">
      <cd:inherit name="setupcombinedlist"/>
    </cd:assignments>
  </cd:arguments>
</cd:command>

should be:

<cd:command name="completecombinedlist" generated="yes">
  <cd:sequence>
    <cd:string value="vollende"/>
    <cd:variable value="combinedlist"/>
  </cd:sequence>
  <cd:arguments>
    <cd:keywords>
      <cd:constant type="cd:name"/>
    </cd:keywords>
    <cd:assignments list="yes">
      <cd:inherit name="stellezusammengestelltelisteein"/>
    </cd:assignments>
  </cd:arguments>
</cd:command>


I have not checked the other languages.

Patrick
-- 
ConTeXt wiki: http://contextgarden.net
From patrick at gundla.ch  Tue Dec  7 01:18:54 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Tue Dec  7 01:18:36 2004
Subject: [dev-context] cont-xx.xml constant = type / name
Message-ID: <m23byjq7td.fsf@levana.de>

Hi,

in cont-en.xml we have

      <cd:constant type="middle"/>
      <cd:constant type="..."/>
      <cd:constant type="12pt"/>
      <cd:constant type="default"/>

as well as

      <cd:constant type="cd:dimension"/>


IMO this should be something like

      <cd:constant name="middle"/>
      <cd:constant name="..."/>
      <cd:constant name="12pt"/>
      <cd:constant name="default"/>

and keep

      <cd:constant type="cd:dimension"/>

Which would be semantically more sensible. dimension is a "type" but
middle is more a "name". But I don't know if its worth any trouble.

Patrick
-- 
ConTeXt wiki: http://contextgarden.net
From patrick at gundla.ch  Tue Dec  7 13:27:50 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Tue Dec  7 13:27:37 2004
Subject: [dev-context] confused with keys-xx.xml files
Message-ID: <m2brd65m49.fsf@levana.de>

Hi,

in cont-en.xml: reservefloat:

      <cd:parameter name="frame">
        <cd:constant type="on"/>
        <cd:constant type="off"/>

in keys-de.xml:

    <cd:constant name="frame" value="rahmen"/>
    <cd:variable name="on" value="an"/>


Why is "on" a constant in cont-en and a variable in keys-de.xml?


What is a variable and what is a constant? In my understanding,
"frame" here should be a variable, because it can be either "on" or
"off".

Patrick
-- 
ConTeXt wiki: http://contextgarden.net
From patrick at gundla.ch  Thu Dec  9 12:13:35 2004
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu Dec  9 12:13:19 2004
Subject: [dev-context] cont-en.xml
Message-ID: <m2u0qv2080.fsf@levana.de>

Hi,

the following commands are duplicated in cont-en.xml:

placecombinedlist
defineinteractionmenu
placeregister
setupfillinrules
setupstrut

Patrick
-- 
ConTeXt wiki: http://contextgarden.net
From taco at elvenkind.com  Mon Dec 13 14:48:33 2004
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon Dec 13 14:48:37 2004
Subject: [dev-context] mptopdf request
In-Reply-To: <41A462E5.7030808@capdm.com>
References: <20041123134237.7129@news.comp.lancs.ac.uk>	<41A462E5.7030808@capdm.com>
Message-ID: <41BD9DB1.8070702@elvenkind.com>

Hans,

Would it be possible for a future version of mptopdf.pl to 
start using texexec.ini? I have 

  for  tetex  set  TeXExecutable     to  pdfxtex

but that broke mptopdf, since the use of pdfetex is currently
hardwired into the script (texexec generates mptopdf.fmt, so
the fmt was created using pdfxtex).

Greetings, Taco
From pragma at wxs.nl  Mon Dec 13 17:16:26 2004
From: pragma at wxs.nl (Hans Hagen)
Date: Mon Dec 13 17:16:25 2004
Subject: [dev-context] mptopdf request
In-Reply-To: <41BD9DB1.8070702@elvenkind.com>
References: <20041123134237.7129@news.comp.lancs.ac.uk>
	<41A462E5.7030808@capdm.com> <41BD9DB1.8070702@elvenkind.com>
Message-ID: <41BDC05A.1090600@wxs.nl>

Taco Hoekwater wrote:
> Hans,
> 
> Would it be possible for a future version of mptopdf.pl to start using 
> texexec.ini? I have
>  for  tetex  set  TeXExecutable     to  pdfxtex
> 
> but that broke mptopdf, since the use of pdfetex is currently
> hardwired into the script (texexec generates mptopdf.fmt, so
> the fmt was created using pdfxtex).

you can also use:

   texexec --fig=c somefile.1

Hans




-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

