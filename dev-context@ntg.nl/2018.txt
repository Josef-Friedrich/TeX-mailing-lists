From schuster.wolfgang at gmail.com  Tue Jan  2 23:35:34 2018
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Tue, 02 Jan 2018 23:35:34 +0100
Subject: [dev-context] utilities.parsers.stepper
Message-ID: <5A4C0936.2010309@gmail.com>

Hi,

the function "utilities.parsers.stepper" from util-prs.lua gives me 
always the following error message when I try one of the examples from 
the source.


%%%% begin error
lua error > lua error on line 11 in file /Users/wolf/TeX/test/test.tex:

...eta/tex/texmf-context/tex/context/base/mkiv/util-prs.lua:596: attempt 
to call local 'action' (a number value)
stack traceback:
     ...eta/tex/texmf-context/tex/context/base/mkiv/util-prs.lua:596: in 
function <...eta/tex/texmf-context/tex/context/base/mkiv/util-prs.lua:587>
     [C]: in function 'lpegmatch'
     ...eta/tex/texmf-context/tex/context/base/mkiv/util-prs.lua:617: in 
function 'stepper'
     [ctxlua]:4: in main chunk
%%%% end error


%%%% begin example
\starttext

\startluacode

-- utilities.parsers.stepper("1,7-",9,function(i) print(">>>",i) end)
utilities.parsers.stepper("1-3,7,8,9")
-- utilities.parsers.stepper("1-3,6,7",function(i) print(">>>",i) end)
-- utilities.parsers.stepper(" 1 : 3, ,7 ")
-- utilities.parsers.stepper("1:4,9:13,24:*",30)

\stopluacode

\stoptext
%%%% end example


Wolfgang

From pragma at wxs.nl  Wed Jan  3 10:15:46 2018
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 3 Jan 2018 10:15:46 +0100
Subject: [dev-context] utilities.parsers.stepper
In-Reply-To: <5A4C0936.2010309@gmail.com>
References: <5A4C0936.2010309@gmail.com>
Message-ID: <8441cf0f-a59f-0b42-12c0-998ea62f4aed@wxs.nl>

On 1/2/2018 11:35 PM, Wolfgang Schuster wrote:
> Hi,
> 
> the function "utilities.parsers.stepper" from util-prs.lua gives me 
> always the following error message when I try one of the examples from 
> the source.
in line 609 and 612 remove the C in C(cardinal) because it gives a 
double capture (probably this code assumes a rather old lpeg)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From oinos at gmx.es  Mon Jan  8 08:18:54 2018
From: oinos at gmx.es (Pablo Rodriguez)
Date: Mon, 8 Jan 2018 08:18:54 +0100
Subject: [dev-context] minor typo in page-ffl.mkiv
Message-ID: <6fd023c4-d526-eb18-4a9c-adbd6f81d787@gmx.es>

Dear Hans (and other list members),

first of all, happy New Year to everybody.

There is a minor typo in page-ffl.mkiv. The attached patch corrects it.

Just in case it helps,

Pablo
-- 
http://www.ousia.tk
-------------- next part --------------
A non-text attachment was scrubbed...
Name: typo-ffl.diff
Type: text/x-patch
Size: 430 bytes
Desc: not available
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180108/2e3df5e1/attachment.bin>

From adityam at umich.edu  Thu Jan 18 05:03:42 2018
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 17 Jan 2018 23:03:42 -0500 (EST)
Subject: [dev-context] Typo in data-crl and data-sch
Message-ID: <alpine.OSX.2.03.1801172300240.2446@zptvyy.pn>

Hi,

There was a pull request on the github mirror of context sources about a 
typo in the curl template in data-crl.lua and data-sch.lua

https://github.com/contextgarden/context-mirror/pull/1/commits/02e9affa92bc7d23feddae03b34b7bebbe652cf1

There should be no space in `-- insecure` flag.

Aditya

From oinos at gmx.es  Fri Jan 19 23:23:57 2018
From: oinos at gmx.es (Pablo Rodriguez)
Date: Fri, 19 Jan 2018 23:23:57 +0100
Subject: [dev-context] two patches
Message-ID: <0359f609-0534-1368-4b68-9638ad18ed9e@gmx.es>

Hans,

track-vis.mkiv has an future year. One of the enclosed patches fixes it.

BTW, math-mkiv.pdf includes a \showglyphs commands that is used form
where is needed to the end of the document. I guess this isnât intended.

I donât know whether this is the best of way of doing it, but I enclose
a patch to limit the \showglyphs command to the sample fonts in extensibles.

Just in case it helps,

Pablo
-- 
http://www.ousia.tk
-------------- next part --------------
A non-text attachment was scrubbed...
Name: math-suboptimal-showglyphs.diff
Type: text/x-patch
Size: 671 bytes
Desc: not available
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180119/55546d52/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: trac-vis-mkiv-date.diff
Type: text/x-patch
Size: 412 bytes
Desc: not available
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180119/55546d52/attachment-0001.bin>

From oinos at gmx.es  Wed Jan 31 19:14:51 2018
From: oinos at gmx.es (Pablo Rodriguez)
Date: Wed, 31 Jan 2018 19:14:51 +0100
Subject: [dev-context] fixes for comments in TeX, MP and Lua
Message-ID: <07385e08-7e05-bc89-56ec-40be5d5325fa@gmx.es>

Hans,

the attached patch comes from code that Christoph Reller kindly provided
me with to fix comments in TeX, MP and Lua
(https://bitbucket.org/philexander/context-highlight/issues/2/highlight-for-tex).

* It formats the whole comment (both character and text [not only the
former]) for TeX and MP.

* It does the same for one-line comments in Lua.

* It fixes multiline comments in Lua.

* It fixes a minor typo.

The following code is compiled in the PDF attachment that shows the
difference before and after the patch:

    \starttext
    \startTEX
    % comment for the whole line
    \stopTEX

    \startMP
    a % comment for the rest of the line
    \stopMP

    \startLUA
    --[[

    multiline

    comment
    --]]

    ---[[

    multiline

    but not comment
    ---]]
    \stopLUA
    \stoptext

Could you consider merging in ConTeXt?

Many thanks for your help,

Pablo
-- 
http://www.ousia.tk
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tex-lua-mp-comments.diff
Type: text/x-patch
Size: 2209 bytes
Desc: not available
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180131/d5a68662/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: unpatched-patched.pdf
Type: application/pdf
Size: 15259 bytes
Desc: not available
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180131/d5a68662/attachment.pdf>

From pragma at wxs.nl  Tue Feb  6 17:49:53 2018
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 6 Feb 2018 17:49:53 +0100
Subject: [dev-context] fixes for comments in TeX, MP and Lua
In-Reply-To: <07385e08-7e05-bc89-56ec-40be5d5325fa@gmx.es>
References: <07385e08-7e05-bc89-56ec-40be5d5325fa@gmx.es>
Message-ID: <d196f975-8b1c-36c0-8898-97027cd2e1d3@wxs.nl>

On 1/31/2018 7:14 PM, Pablo Rodriguez wrote:
> Hans,
> 
> the attached patch comes from code that Christoph Reller kindly provided
> me with to fix comments in TeX, MP and Lua
> (https://bitbucket.org/philexander/context-highlight/issues/2/highlight-for-tex).
> 
> * It formats the whole comment (both character and text [not only the
> former]) for TeX and MP.
> 
> * It does the same for one-line comments in Lua.
> 
> * It fixes multiline comments in Lua.
> 
> * It fixes a minor typo.
> 
> The following code is compiled in the PDF attachment that shows the
> difference before and after the patch:
> 
>      \starttext
>      \startTEX
>      % comment for the whole line
>      \stopTEX
> 
>      \startMP
>      a % comment for the rest of the line
>      \stopMP
> 
>      \startLUA
>      --[[
> 
>      multiline
> 
>      comment
>      --]]
> 
>      ---[[
> 
>      multiline
> 
>      but not comment
>      ---]]
>      \stopLUA
>      \stoptext
> 
> Could you consider merging in ConTeXt?

I'll make this:

\definestartstop [LuaSnippetCommentText] [color=darkyellow]
\definestartstop [TeXSnippetCommentText] [color=darkyellow]
\definestartstop [MetapostSnippetCommentText] [color=darkyellow]

(not bold by default)


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From oinos at gmx.es  Wed Feb  7 19:58:45 2018
From: oinos at gmx.es (Pablo Rodriguez)
Date: Wed, 7 Feb 2018 19:58:45 +0100
Subject: [dev-context] fixes for comments in TeX, MP and Lua
In-Reply-To: <d196f975-8b1c-36c0-8898-97027cd2e1d3@wxs.nl>
References: <07385e08-7e05-bc89-56ec-40be5d5325fa@gmx.es>
 <d196f975-8b1c-36c0-8898-97027cd2e1d3@wxs.nl>
Message-ID: <48bbfd5b-f4da-7cb5-f770-eedb1ed54c41@gmx.es>

On 02/06/2018 05:49 PM, Hans Hagen wrote:
> On 1/31/2018 7:14 PM, Pablo Rodriguez wrote:
>> Hans,
>>
>> the attached patch comes from code that Christoph Reller kindly provided
>> me with to fix comments in TeX, MP and Lua
>> (https://bitbucket.org/philexander/context-highlight/issues/2/highlight-for-tex).
>>
>> * It formats the whole comment (both character and text [not only the
>> former]) for TeX and MP.
>>
>> Could you consider merging in ConTeXt?
> 
> I'll make this:
> 
> \definestartstop [LuaSnippetCommentText] [color=darkyellow]
> \definestartstop [TexSnippetCommentText] [color=darkyellow]
> \definestartstop [MetapostSnippetCommentText] [color=darkyellow]
> 
> (not bold by default)

Hans,

many thanks for your implementation.

Pablo
-- 
http://www.ousia.tk

From wolfgang.schuster at gmail.com  Wed Feb 28 10:59:57 2018
From: wolfgang.schuster at gmail.com (Wolfgang Schuster)
Date: Wed, 28 Feb 2018 10:59:57 +0100
Subject: [dev-context] supp-box.mkiv: \lastlinewidth
Message-ID: <5A967D9D.6000208@gmail.com>

Hi,

supp-box.mkiv, line 2970:

-\unexpanded\def\lastlinewidth{\dimexpr\clf_lastlinelength\scaledpoint\relax}
+\unexpanded\def\lastlinewidth{\dimexpr\clf_lastlinewidth\scaledpoint\relax}

Wolfgang

From modules at contextgarden.net  Thu Mar  8 13:31:28 2018
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Thu, 8 Mar 2018 13:31:28 +0100
Subject: [dev-context] CGModules update: Taco Test version 2018.03.08
	published.
Message-ID: <20180308123128.0864F4E9925@zapf.ntg.nl>

Taco Hoekwater submitted an update to the

               Taco Test

package.

Version number: 2018.03.08
License type: Public Domain
Wants to be in ConTeXt distribution: yes
Wants to be synced with CTAN: no

Summary description: modules.contextgarden.net test module

Announcement text:
----------------------------------------------------------------------

Testing the notification emails for modules.contextgarden.net

----------------------------------------------------------------------


From oinos at gmx.es  Sun Mar 18 13:06:08 2018
From: oinos at gmx.es (Pablo Rodriguez)
Date: Sun, 18 Mar 2018 13:06:08 +0100
Subject: [dev-context] typo in xml-mkiv.pdf
Message-ID: <d260c7c6-9643-a94a-f99c-056592a05f7b@gmx.es>

Hans,

I guess there is a typo in the \xmlinfo explation in xml-mkiv.pdf.

The patch replaces "typeset the name if the element given by" with
"typeset the name in the element given by".

I hope it helps,

Pablo
-- 
http://www.ousia.tk
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xmlinfo-typo.patch
Type: text/x-patch
Size: 442 bytes
Desc: not available
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180318/7f667119/attachment.bin>

From schuster.wolfgang at gmail.com  Sun Mar 18 16:58:20 2018
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Sun, 18 Mar 2018 16:58:20 +0100
Subject: [dev-context] scrn-pag.mkiv: Set custom values for the page
	dimensions
Message-ID: <5AAE8C9C.20600@gmail.com>

Hi Hans,

can you add a command to set own values for \clf_setupcanvas, e.g.

\def\scrn_canvas_synchronize_set#1#2%
   {\clf_setupcanvas
      paperwidth  \dimexpr#1\relax
      paperheight \dimexpr#2\relax
    \relax}

\let\scrn_canvas_synchronize_reset\scrn_canvas_synchronize_only


This is needed for the \pageinjection command when I include larger 
images which spread over multiple pages.


Wolfgang

From j.hagen at xs4all.nl  Mon Mar 19 10:44:54 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Mon, 19 Mar 2018 10:44:54 +0100
Subject: [dev-context] scrn-pag.mkiv: Set custom values for the page
 dimensions
In-Reply-To: <5AAE8C9C.20600@gmail.com>
References: <5AAE8C9C.20600@gmail.com>
Message-ID: <e44f41ec-3047-5f42-648b-4fd6a772b904@xs4all.nl>

On 3/18/2018 4:58 PM, Wolfgang Schuster wrote:
> Hi Hans,
> 
> can you add a command to set own values for \clf_setupcanvas, e.g.
> 
> \def\scrn_canvas_synchronize_set#1#2%
>  Â  {\clf_setupcanvas
>  Â Â Â Â  paperwidthÂ  \dimexpr#1\relax
>  Â Â Â Â  paperheight \dimexpr#2\relax
>  Â Â  \relax}
> 
> \let\scrn_canvas_synchronize_reset\scrn_canvas_synchronize_only
> 
> 
> This is needed for the \pageinjection command when I include larger 
> images which spread over multiple pages.
So this is for non-interactive mode yes? I think we could do this:

\def\scrn_canvas_synchronize_only
   {\clf_setupcanvas
      paperwidth  \interactionscreenparameter\c!width
      paperheight \interactionscreenparameter\c!height
    \relax}

as they default to the values that are there now. That way you can use 
the width and height parameters of setupinteractionscreen instead of a 
low level call.

Or do I misunderstand it.

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From oinos at gmx.es  Fri Apr  6 20:19:11 2018
From: oinos at gmx.es (Pablo Rodriguez)
Date: Fri, 6 Apr 2018 20:19:11 +0200
Subject: [dev-context] typos in xml-mkiv.tex
Message-ID: <2c5c6ec4-e715-2353-76ef-4e25d0129d26@gmx.es>

Hans,

the attached patch fixes three minor typos in xml-mkiv.tex.

I hope it helps,

Pablo
-- 
http://www.ousia.tk
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xml-mkiv-typos.diff
Type: text/x-patch
Size: 1710 bytes
Desc: not available
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180406/4d29dbb6/attachment.bin>

From oinos at gmx.es  Thu Apr 12 20:28:37 2018
From: oinos at gmx.es (Pablo Rodriguez)
Date: Thu, 12 Apr 2018 20:28:37 +0200
Subject: [dev-context] \currentxrow and \currentxcolumn
Message-ID: <4278e3f6-9bb6-7622-3f33-c6b8d69fa7a8@gmx.es>

Hans,

I wonder whether it would be possible to have \currentxrow and
\currentxcolumn for synonyms for \currentxtablerow and \currentxtablecolumn.

The attached .diff contains the implementation.

Many thanks for your help,

Pablo
-- 
http://www.ousia.tk
-------------- next part --------------
A non-text attachment was scrubbed...
Name: currentx-suggestion.diff
Type: text/x-patch
Size: 363 bytes
Desc: not available
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180412/df4a1129/attachment.bin>

From j.hagen at xs4all.nl  Fri Apr 13 09:14:07 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Fri, 13 Apr 2018 09:14:07 +0200
Subject: [dev-context] \currentxrow and \currentxcolumn
In-Reply-To: <4278e3f6-9bb6-7622-3f33-c6b8d69fa7a8@gmx.es>
References: <4278e3f6-9bb6-7622-3f33-c6b8d69fa7a8@gmx.es>
Message-ID: <6cd85bfe-56d8-b53c-b826-50fad134b226@xs4all.nl>

On 4/12/2018 8:28 PM, Pablo Rodriguez wrote:

> I wonder whether it would be possible to have \currentxrow and
> \currentxcolumn for synonyms for \currentxtablerow and \currentxtablecolumn.
that's too general and also adds more and more commands (that no one 
knows of and remembers)

you can have a file cont-loc.mkiv in your local tree (texmf-local) that 
adds all kind of extra commands

\let\currentxrow   \currentxtablerow
\let\currentxcolumn\currentxtablecolumn

but then you also need to make sure that it never overloads some core 
macros (but you can check for that)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From luigi.scarso at gmail.com  Thu Apr 19 13:48:31 2018
From: luigi.scarso at gmail.com (luigi scarso)
Date: Thu, 19 Apr 2018 13:48:31 +0200
Subject: [dev-context] Luatex 1.07.0 announcement
Message-ID: <CAG5iGsDkTt7K1rcczhY7_8D3gcDO8+eh=rm7FZ+3y5Byv4+bbg@mail.gmail.com>

==============================================================
LuaTeX 1.07 2018-01-17
==============================================================

(1) This release brings Lua 5.3 to LuaTeX. We have tested an experimental
version
for a few months and not encountered issues.

(2) If you use Lua 5.3 you should be aware of a few changes in the language
and
its implementation. Numbers are now either integers or floats but are cast
automatically.

(3) In some cases (e.g. string.format) there is a more strict check. A
float always
has a decimal appended when serialized, so 1 becomes 1.0 as string.

(4) We keep supporting the bit32 library on top of the new bit operators.
Be aware
of the fact that currently LuajitTeX does not have these operators.

(5) Performance of LuaTeX with Lua 5.3 can be slightly better than with 5.2
but this
really depends on your usage of Lua. In practice there should be no
slowdown.

(6) We are aware of possible substantial slowdown of string.format
depending on the
platform and compiler. This depends on Lua too and will be resolved in due
time.

(7) If you want to test with Lua 5.3 then have to build LuaTeX with
--lua53. Because
ConTeXt will switch to 5.3 after this release there will be binaries
available at the
ConTeXt garden.

(8) The 2018 TeXlive distribution will ship with LuaTeX using Lua 5.2 but
there will
likely be an additional binary LuaTeX53 available.

(9) From 2019 TeXlive will ship with LuaTeX and Lua 5.3 as default. We
provide --lua52
as build flag for a while. By then we might be looking at Lua 5.4 already.

(10) There are the usual patches and cleanups and a few small additions
(mentioned
in the manual) but there have been no fundamental changes in the API (apart
from
removing depricated and undocumented functionality).



The LuaTeX team
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180419/1f0592a4/attachment.html>

From schuster.wolfgang at gmail.com  Sat Jun  9 10:33:38 2018
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Sat, 09 Jun 2018 10:33:38 +0200
Subject: [dev-context] mult-def.lua
Message-ID: <5B1B90E2.7050807@gmail.com>

Hi,

on the lines 18.726 and 18.727 the brackets have to be replaced with braces.

- ["cd:index-s"]                   = { en = "[...]" },
- ["cd:index-l"]                   = { en = "[..+...+..]" },
+ ["cd:index-s"]                   = { en = "{...}" },
+ ["cd:index-l"]                   = { en = "{..+...+..}" },

Wolfgang

From oinos at gmx.es  Mon Jul  2 20:02:03 2018
From: oinos at gmx.es (Pablo Rodriguez)
Date: Mon, 2 Jul 2018 20:02:03 +0200
Subject: [dev-context] two typos in lpdf-wid.lua
Message-ID: <aafae21c-e0fe-a3b2-5be4-bcbd4713aedb@gmx.es>

Hans,

the attached file contains the corrections of two typos and the addition
of a (in my opinion, much needed) pair of commas.

I hope it helps,

Pablo
-- 
http://www.ousia.tk
-------------- next part --------------
A non-text attachment was scrubbed...
Name: typos-lpdfwid.patch
Type: text/x-patch
Size: 1460 bytes
Desc: not available
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180702/ac555148/attachment.bin>

From schuster.wolfgang at gmail.com  Wed Jul  4 22:44:01 2018
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Wed, 04 Jul 2018 22:44:01 +0200
Subject: [dev-context] typo-dir.mkiv: Making the directions attribute global
Message-ID: <5B3D3191.9010106@gmail.com>

Hi Hans,

the example below shows a problems Idris has reported a few times.

When you enable the bidi mechanism it gets reset for

   - footnotes,
   - margin notes and
   - header/footer texts,

because the attribute setting in typo-dir.mkiv doesnât include the 
"global" keyword.

%%%% type-dir.mkiv
\definesystemattribute[directions][public]
%%%%

Adding "global" to the second argument would fix the wrong output.


%%%% test.tex
\definefontfamily [mainface] [rm] [ALM Fixed] [features=arabic]

\setupbodyfont [mainface]

\setuplayout[backspace=5cm,width=middle,leftmargin=4cm]

\setupdirections [bidi=global]

\setupheadertexts[Test Ø§ÙØªØ­Ø§Ù test]

\starttext

Test Ø§ÙØªØ­Ø§Ù test\footnote{Test Ø§ÙØªØ­Ø§Ù test}

Test Ø§ÙØªØ­Ø§Ù test\inmargin{Test Ø§ÙØªØ­Ø§Ù test}

\stoptext
%%%%

Wolfgang
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.pdf
Type: application/pdf
Size: 5872 bytes
Desc: not available
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180704/793ca17b/attachment.pdf>

From wolfgang.schuster at gmail.com  Sun Jul  8 20:28:25 2018
From: wolfgang.schuster at gmail.com (Wolfgang Schuster)
Date: Sun, 08 Jul 2018 20:28:25 +0200
Subject: [dev-context] scrp-ini.mkiv: Global attributes for \setscript
	command
Message-ID: <5B4257C9.106@gmail.com>

Hi Hans,

the \setscript command has the same problem with local attributes as the 
bidi mechanism.

Some of the following attributes in scrp-ini.mkiv have to be global:

%%%%
\definesystemattribute[scriptinjection][public]
\definesystemattribute[scriptsplitting][public]
\definesystemattribute[scriptstatus]   [public]
%%%%

I know "scriptinjection" has to be global to have linebreaks in 
footnotes (and margin notes) for chinese and japanese.

I guess "scriptsplitting" has to be global too because it is used for thai.

Wolfgang


From j.hagen at xs4all.nl  Sun Jul  8 23:02:17 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Sun, 8 Jul 2018 23:02:17 +0200
Subject: [dev-context] scrp-ini.mkiv: Global attributes for \setscript
 command
In-Reply-To: <5B4257C9.106@gmail.com>
References: <5B4257C9.106@gmail.com>
Message-ID: <5b33af16-1fdf-405f-9681-df955bdcf22a@xs4all.nl>

On 7/8/2018 8:28 PM, Wolfgang Schuster wrote:
> Hi Hans,
> 
> the \setscript command has the same problem with local attributes as the 
> bidi mechanism.
> 
> Some of the following attributes in scrp-ini.mkiv have to be global:
> 
> %%%%
> \definesystemattribute[scriptinjection][public]
> \definesystemattribute[scriptsplitting][public]
> \definesystemattribute[scriptstatus]Â Â  [public]
> %%%%
> 
> I know "scriptinjection" has to be global to have linebreaks in 
> footnotes (and margin notes) for chinese and japanese.
> 
> I guess "scriptsplitting" has to be global too because it is used for thai.
it needs a bit of thinking (even bidi) ... it compares to global and 
local bodyfonts

what if a page break occurs in the middle of japanese local text while 
the global script is chinese

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From schuster.wolfgang at gmail.com  Mon Jul  9 08:57:10 2018
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Mon, 09 Jul 2018 08:57:10 +0200
Subject: [dev-context] scrp-ini.mkiv: Global attributes for \setscript
 command
In-Reply-To: <5b33af16-1fdf-405f-9681-df955bdcf22a@xs4all.nl>
References: <5B4257C9.106@gmail.com>
 <5b33af16-1fdf-405f-9681-df955bdcf22a@xs4all.nl>
Message-ID: <5B430746.4070108@gmail.com>


> Hans Hagen <mailto:j.hagen at xs4all.nl>
> 8. Juli 2018 um 23:02
>
> it needs a bit of thinking (even bidi) ... it compares to global and 
> local bodyfonts
>
> what if a page break occurs in the middle of japanese local text while 
> the global script is chinese

I can understand your concerns.

Another way is to add additional commands which let you set the script 
for all environments (body text + footnotes).


1. Add "global" to the attribute definition (or add another keyword 
which doesnât add the reset to the local token list but using "global" 
should be enough).

%%%%%% attr-ini.mkiv
\def\attr_basics_define_indeed#1[#2][#3]%
   {\ifcsname\??attributecount#2\endcsname\else
      \scratchcounter\clf_defineattribute{#2}{#1}\relax
     %\writestatus\m!system{defining #1 attribute #2 with number 
\number\scratchcounter}%
      
\expandafter\attributedef\csname\??attributecount#2\endcsname\scratchcounter
      \expandafter\newconstant \csname\??attributeid#2\endcsname
      \csname\??attributeid#2\endcsname\scratchcounter
      % some attributes are always global
      \doifelseinset\s!global{#3}%
        
{\etoksapp\t_attr_list_global{\csname\??attributecount#2\endcsname\attributeunsetvalue}}%
-      {\etoksapp\t_attr_list_local 
{\csname\??attributecount#2\endcsname\attributeunsetvalue}}%
+      {\doifnotinset\s!none{#3}
+         {\etoksapp\t_attr_list_local 
{\csname\??attributecount#2\endcsname\attributeunsetvalue}}}%
      \doifinset\s!nomath{#3}%
        
{\etoksapp\t_attr_list_nomath{\csname\??attributecount#2\endcsname\attributeunsetvalue}}%
      % here public means 'visible' so it's not to be confused with 
'public' at the lua end
      \doifinset\s!public{#3}%
        
{\expandafter\let\csname#2\s!attribute\expandafter\endcsname\csname\??attributeid#2\endcsname}%
    \fi}
%%%%%%



2. Create a flag which can be used to prevent the reset of the 
attributes when you use the global-commands. The old \setscript command 
will be a synonym for the local settings while you can use the global 
command when the document contains only one language.

%%%%%% scrp-ini.mkiv
\newconditional\c_scripts_reset \settrue\c_scripts_reset

\appendtoks
     \ifconditional\c_scripts_reset
         \doresetattribute{scriptinjection}%
         \doresetattribute{scriptsplitting}%
         \doresetattribute{scriptstatus}%
     \fi
\to \t_attr_list_local

%\unexpanded\def\setscript[#1]%
%  {\edef\currentscript{#1}%
%   \scripts_basics_set}

\unexpanded\def\setlocalscript[#1]%
   {\settrue\c_scripts_reset
    \edef\currentscript{#1}%
    \scripts_basics_set}

\let\setscript\setlocalscript

\unexpanded\def\setglobalscript[#1]%
   {\setfalse\c_scripts_reset
    \edef\currentscript{#1}%
    \scripts_basics_set}
%%%%%%


Wolfgang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180709/5290f954/attachment.html>

From j.hagen at xs4all.nl  Mon Jul  9 15:01:03 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Mon, 9 Jul 2018 15:01:03 +0200
Subject: [dev-context] scrp-ini.mkiv: Global attributes for \setscript
 command
In-Reply-To: <5B430746.4070108@gmail.com>
References: <5B4257C9.106@gmail.com>
 <5b33af16-1fdf-405f-9681-df955bdcf22a@xs4all.nl> <5B430746.4070108@gmail.com>
Message-ID: <f1fcb01a-6b82-95fe-0ff6-aea65cdfb407@xs4all.nl>

On 7/9/2018 8:57 AM, Wolfgang Schuster wrote:
> 
>> Hans Hagen <mailto:j.hagen at xs4all.nl>
>> 8. Juli 2018 um 23:02
>>
>> it needs a bit of thinking (even bidi) ... it compares to global and 
>> local bodyfonts
>>
>> what if a page break occurs in the middle of japanese local text while 
>> the global script is chinese
> 
> I can understand your concerns.
> 
> Another way is to add additional commands which let you set the script 
> for all environments (body text + footnotes).
> 
> 
> 1. Add "global" to the attribute definition (or add another keyword 
> which doesnât add the reset to the local token list but using "global" 
> should be enough).
> 
> %%%%%% attr-ini.mkiv
> \def\attr_basics_define_indeed#1[#2][#3]%
>  Â  {\ifcsname\??attributecount#2\endcsname\else
>  Â Â Â Â  \scratchcounter\clf_defineattribute{#2}{#1}\relax
>  Â Â Â  %\writestatus\m!system{defining #1 attribute #2 with number 
> \number\scratchcounter}%
> \expandafter\attributedef\csname\??attributecount#2\endcsname\scratchcounter
>  Â Â Â Â  \expandafter\newconstant \csname\??attributeid#2\endcsname
>  Â Â Â Â  \csname\??attributeid#2\endcsname\scratchcounter
>  Â Â Â Â  % some attributes are always global
>  Â Â Â Â  \doifelseinset\s!global{#3}%
> {\etoksapp\t_attr_list_global{\csname\??attributecount#2\endcsname\attributeunsetvalue}}%
> -Â Â Â Â Â  {\etoksapp\t_attr_list_local 
> {\csname\??attributecount#2\endcsname\attributeunsetvalue}}%
> +Â Â Â Â Â  {\doifnotinset\s!none{#3}
> +Â Â Â Â Â Â Â Â  {\etoksapp\t_attr_list_local 
> {\csname\??attributecount#2\endcsname\attributeunsetvalue}}}%
>  Â Â Â Â  \doifinset\s!nomath{#3}%
> {\etoksapp\t_attr_list_nomath{\csname\??attributecount#2\endcsname\attributeunsetvalue}}%
>  Â Â Â Â  % here public means 'visible' so it's not to be confused with 
> 'public' at the lua end
>  Â Â Â Â  \doifinset\s!public{#3}%
> {\expandafter\let\csname#2\s!attribute\expandafter\endcsname\csname\??attributeid#2\endcsname}%
>  Â Â  \fi}
> %%%%%%
> 
> 
> 
> 2. Create a flag which can be used to prevent the reset of the 
> attributes when you use the global-commands. The old \setscript command 
> will be a synonym for the local settings while you can use the global 
> command when the document contains only one language.
> 
> %%%%%% scrp-ini.mkiv
> \newconditional\c_scripts_reset \settrue\c_scripts_reset
> 
> \appendtoks
>  Â Â Â  \ifconditional\c_scripts_reset
>  Â Â Â Â Â Â Â  \doresetattribute{scriptinjection}%
>  Â Â Â Â Â Â Â  \doresetattribute{scriptsplitting}%
>  Â Â Â Â Â Â Â  \doresetattribute{scriptstatus}%
>  Â Â Â  \fi
> \to \t_attr_list_local
> 
> %\unexpanded\def\setscript[#1]%
> %Â  {\edef\currentscript{#1}%
> %Â Â  \scripts_basics_set}
> 
> \unexpanded\def\setlocalscript[#1]%
>  Â  {\settrue\c_scripts_reset
>  Â Â  \edef\currentscript{#1}%
>  Â Â  \scripts_basics_set}
> 
> \let\setscript\setlocalscript
> 
> \unexpanded\def\setglobalscript[#1]%
>  Â  {\setfalse\c_scripts_reset
>  Â Â  \edef\currentscript{#1}%
>  Â Â  \scripts_basics_set}
> %%%%%%
how about this (a bit like languages and bodyfonts)

\unprotect

\newconstant\c_scripts_injection \c_scripts_injection\attributeunsetvalue
\newconstant\c_scripts_splitting \c_scripts_splitting\attributeunsetvalue
\newconstant\c_scripts_status    \c_scripts_status   \attributeunsetvalue

\unexpanded\def\setglobalscript[#1]%
   {\edef\currentscript{#1}%
    \scripts_basics_set
    \c_scripts_injection\attribute\scriptinjectionattribute
    \c_scripts_splitting\attribute\scriptsplittingattribute
    \c_scripts_status   \attribute\scriptstatusattribute}

\unexpanded\def\setlocalscript[#1]%
   {\edef\currentscript{#1}%
    \scripts_basics_set}

\let\setscript\setlocalscript

\appendtoks
    \attribute\scriptinjectionattribute\c_scripts_injection
    \attribute\scriptsplittingattribute\c_scripts_splitting
    \attribute\scriptstatusattribute   \c_scripts_status
\to \everypagebody

\protect




-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From schuster.wolfgang at gmail.com  Mon Jul  9 16:24:04 2018
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Mon, 09 Jul 2018 16:24:04 +0200
Subject: [dev-context] scrp-ini.mkiv: Global attributes for \setscript
 command
In-Reply-To: <f1fcb01a-6b82-95fe-0ff6-aea65cdfb407@xs4all.nl>
References: <5B4257C9.106@gmail.com>
 <5b33af16-1fdf-405f-9681-df955bdcf22a@xs4all.nl> <5B430746.4070108@gmail.com>
 <f1fcb01a-6b82-95fe-0ff6-aea65cdfb407@xs4all.nl>
Message-ID: <5B437004.3000703@gmail.com>


> Hans Hagen <mailto:j.hagen at xs4all.nl>
> 9. Juli 2018 um 15:01
>
> how about this (a bit like languages and bodyfonts)
>
> \unprotect
>
> \newconstant\c_scripts_injection \c_scripts_injection\attributeunsetvalue
> \newconstant\c_scripts_splitting \c_scripts_splitting\attributeunsetvalue
> \newconstant\c_scripts_status    \c_scripts_status   \attributeunsetvalue
>
> \unexpanded\def\setglobalscript[#1]%
>   {\edef\currentscript{#1}%
>    \scripts_basics_set
>    \c_scripts_injection\attribute\scriptinjectionattribute
>    \c_scripts_splitting\attribute\scriptsplittingattribute
>    \c_scripts_status   \attribute\scriptstatusattribute}
>
> \unexpanded\def\setlocalscript[#1]%
>   {\edef\currentscript{#1}%
>    \scripts_basics_set}
>
> \let\setscript\setlocalscript
>
> \appendtoks
>    \attribute\scriptinjectionattribute\c_scripts_injection
>    \attribute\scriptsplittingattribute\c_scripts_splitting
>    \attribute\scriptstatusattribute   \c_scripts_status
> \to \everypagebody
>
> \protect

It works only when I use a different token list, e.g.

\appendtoks
    ...
\to \t_attr_list_local

Here is the missing example.

\definefontfamily [meiryo] [rm] [Meiryo]

\setupbodyfont[meiryo]

\setlocalscript[nihongo]
%\setglobalscript[nihongo]

\setuplayout[leftmargin=6cm,backspace=7cm,width=middle]

\starttext

\startbuffer[udhr]
All human beings are born free and equal in dignity and rights. They are 
endowed with reason and conscience and should act towards one another in 
a spirit of brotherhood.

ãã¹ã¦ã®äººéã¯ãçã¾ããªããã«ãã¦èªç±ã§ããããã¤ãå°å³ã¨æ¨©å©ã¨ã«ã¤ãã¦ 
å¹³ç­ã§ãããäººéã¯ãçæ§ã¨è¯å¿ã¨ãæãããã¦ãããäºãã«åèã®ç²¾ç¥ããã£ 
ã¦è¡åããªããã°ãªããªãã
\stopbuffer

\getbuffer[udhr]

Footnote
\startfootnote
\getbuffer[udhr]
\stopfootnote

Margintext\inmargin[style=smallbodyfont]{\getbuffer[udhr]}

\stoptext

Wolfgang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180709/a7d46774/attachment.html>

From j.hagen at xs4all.nl  Mon Jul  9 18:48:03 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Mon, 9 Jul 2018 18:48:03 +0200
Subject: [dev-context] scrp-ini.mkiv: Global attributes for \setscript
 command
In-Reply-To: <5B437004.3000703@gmail.com>
References: <5B4257C9.106@gmail.com>
 <5b33af16-1fdf-405f-9681-df955bdcf22a@xs4all.nl> <5B430746.4070108@gmail.com>
 <f1fcb01a-6b82-95fe-0ff6-aea65cdfb407@xs4all.nl> <5B437004.3000703@gmail.com>
Message-ID: <e1d200f4-d8f0-7bed-a38d-4d81395edea6@xs4all.nl>

On 7/9/2018 4:24 PM, Wolfgang Schuster wrote:

> Here is the missing example.
> 
> \definefontfamily [meiryo] [rm] [Meiryo]
> 
> \setupbodyfont[meiryo]
> 
> \setlocalscript[nihongo]
> %\setglobalscript[nihongo]
> 
> \setuplayout[leftmargin=6cm,backspace=7cm,width=middle]
> 
> \starttext
> 
> \startbuffer[udhr]
> All human beings are born free and equal in dignity and rights. They are 
> endowed with reason and conscience and should act towards one another in 
> a spirit of brotherhood.
> 
> ãã¹ã¦ã®äººéã¯ãçã¾ããªããã«ãã¦èªç±ã§ããããã¤ãå°å³ã¨æ¨©å©ã¨ã«ã¤ãã¦ 
> å¹³ç­ã§ãããäººéã¯ãçæ§ã¨è¯å¿ã¨ãæãããã¦ãããäºãã«åèã®ç²¾ç¥ããã£ 
> ã¦è¡åããªããã°ãªããªãã
> \stopbuffer
> 
> \getbuffer[udhr]
> 
> Footnote
> \startfootnote
> \getbuffer[udhr]
> \stopfootnote
> 
> Margintext\inmargin[style=smallbodyfont]{\getbuffer[udhr]}
> 
> \stoptext
i made it a bit more generic ... beta on ftp ... 'pickup' is the magic 
word (script and bidi done that way now) .. your example looks ok

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From schuster.wolfgang at gmail.com  Mon Jul  9 19:38:14 2018
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Mon, 09 Jul 2018 19:38:14 +0200
Subject: [dev-context] scrp-ini.mkiv: Global attributes for \setscript
 command
In-Reply-To: <e1d200f4-d8f0-7bed-a38d-4d81395edea6@xs4all.nl>
References: <5B4257C9.106@gmail.com>
 <5b33af16-1fdf-405f-9681-df955bdcf22a@xs4all.nl> <5B430746.4070108@gmail.com>
 <f1fcb01a-6b82-95fe-0ff6-aea65cdfb407@xs4all.nl> <5B437004.3000703@gmail.com>
 <e1d200f4-d8f0-7bed-a38d-4d81395edea6@xs4all.nl>
Message-ID: <5B439D86.9030606@gmail.com>

There is a typo in typo-dir.mkiv (missing "s" in directions)

\unexpanded\def\setglobaldirection[#1]% todo: symbolic names
   {\clf_setdirection#1\relax
-  \pickupdirectionattribute}
+  \pickupdirectionsattribute}


Another problem is that you canât set a global direction because the 
command is embedded in \setupdirections.


\definefontfamily[mainface][rm][ALM Fixed][features=arabic]

\setupbodyfont[mainface]

\setuplayout[backspace=5cm,width=middle,leftmargin=4cm]

\setupdirections[bidi=global]

%\setglobaldirection[\number\directionsbidimode]

\setupheadertexts[Test Ø§ÙØªØ­Ø§Ù test]

\starttext

Test Ø§ÙØªØ­Ø§Ù test\footnote{Test Ø§ÙØªØ­Ø§Ù test}

Test Ø§ÙØªØ­Ø§Ù test\inmargin{Test Ø§ÙØªØ­Ø§Ù test}

\stoptext


Wolfgang

> Hans Hagen <mailto:j.hagen at xs4all.nl>
> 9. Juli 2018 um 18:48
> On 7/9/2018 4:24 PM, Wolfgang Schuster wrote:
>
> i made it a bit more generic ... beta on ftp ... 'pickup' is the magic 
> word (script and bidi done that way now) .. your example looks ok
>
> Hans
>
> -----------------------------------------------------------------
>                                           Hans Hagen | PRAGMA ADE
>               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
> -----------------------------------------------------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180709/85682c4e/attachment.html>

From j.hagen at xs4all.nl  Mon Jul  9 23:12:18 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Mon, 9 Jul 2018 23:12:18 +0200
Subject: [dev-context] scrp-ini.mkiv: Global attributes for \setscript
 command
In-Reply-To: <5B439D86.9030606@gmail.com>
References: <5B4257C9.106@gmail.com>
 <5b33af16-1fdf-405f-9681-df955bdcf22a@xs4all.nl> <5B430746.4070108@gmail.com>
 <f1fcb01a-6b82-95fe-0ff6-aea65cdfb407@xs4all.nl> <5B437004.3000703@gmail.com>
 <e1d200f4-d8f0-7bed-a38d-4d81395edea6@xs4all.nl> <5B439D86.9030606@gmail.com>
Message-ID: <6d6c7804-0765-0dd4-9faf-39a690f4503e@xs4all.nl>

On 7/9/2018 7:38 PM, Wolfgang Schuster wrote:
> There is a typo in typo-dir.mkiv (missing "s" in directions)
> 
> \unexpanded\def\setglobaldirection[#1]% todo: symbolic names
>  Â  {\clf_setdirection#1\relax
> -Â  \pickupdirectionattribute}
> +Â  \pickupdirectionsattribute}
> 
> 
> Another problem is that you canât set a global direction because the 
> command is embedded in \setupdirections.
ok, another attempt ... see typo-dir file

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From schuster.wolfgang at gmail.com  Mon Jul  9 23:35:07 2018
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Mon, 09 Jul 2018 23:35:07 +0200
Subject: [dev-context] scrp-ini.mkiv: Global attributes for \setscript
 command
In-Reply-To: <6d6c7804-0765-0dd4-9faf-39a690f4503e@xs4all.nl>
References: <5B4257C9.106@gmail.com>
 <5b33af16-1fdf-405f-9681-df955bdcf22a@xs4all.nl> <5B430746.4070108@gmail.com>
 <f1fcb01a-6b82-95fe-0ff6-aea65cdfb407@xs4all.nl> <5B437004.3000703@gmail.com>
 <e1d200f4-d8f0-7bed-a38d-4d81395edea6@xs4all.nl> <5B439D86.9030606@gmail.com>
 <6d6c7804-0765-0dd4-9faf-39a690f4503e@xs4all.nl>
Message-ID: <5B43D50B.1060505@gmail.com>


> Hans Hagen <mailto:j.hagen at xs4all.nl>
> 9. Juli 2018 um 23:12
>
> ok, another attempt ... see typo-dir file

It works for my small test file, Idris can check it with a real document.

Thank you very much,
Wolfgang

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180709/c3fafc84/attachment.html>

From oinos at gmx.es  Sun Jul 15 17:23:27 2018
From: oinos at gmx.es (Pablo Rodriguez)
Date: Sun, 15 Jul 2018 17:23:27 +0200
Subject: [dev-context] language synonyms for registers
Message-ID: <d6486b47-fba3-6d8a-f04c-38c001b444b9@gmx.es>

Hi Hans,

would it be possible to add the following lines to the Greek sorting
rules (in sort-lan.lua)?

definitions['el'] = { parent = 'gr' } -- Greek (ISO 639)
definitions['agr'] = { parent = 'gr' } -- ancient Greek
definitions['grc'] = { parent = 'gr' } -- ancient Greek (ISO 639)

Many thanks for your help,

Pablo
-- 
http://www.ousia.tk

From j.hagen at xs4all.nl  Sun Jul 15 20:02:33 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Sun, 15 Jul 2018 20:02:33 +0200
Subject: [dev-context] language synonyms for registers
In-Reply-To: <d6486b47-fba3-6d8a-f04c-38c001b444b9@gmx.es>
References: <d6486b47-fba3-6d8a-f04c-38c001b444b9@gmx.es>
Message-ID: <773af3fe-e5d6-a7e1-81df-5638f5de2204@xs4all.nl>

On 7/15/2018 5:23 PM, Pablo Rodriguez wrote:

> would it be possible to add the following lines to the Greek sorting
> rules (in sort-lan.lua)?
> 
> definitions['el'] = { parent = 'gr' } -- Greek (ISO 639)
> definitions['agr'] = { parent = 'gr' } -- ancient Greek
> definitions['grc'] = { parent = 'gr' } -- ancient Greek (ISO 639)
> 
> Many thanks for your help,
Depends on Wolfgangs and Thomas assessment.


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From schuster.wolfgang at gmail.com  Sun Jul 15 21:28:55 2018
From: schuster.wolfgang at gmail.com (Wolfgang Schuster)
Date: Sun, 15 Jul 2018 21:28:55 +0200
Subject: [dev-context] language synonyms for registers
In-Reply-To: <773af3fe-e5d6-a7e1-81df-5638f5de2204@xs4all.nl>
References: <d6486b47-fba3-6d8a-f04c-38c001b444b9@gmx.es>
 <773af3fe-e5d6-a7e1-81df-5638f5de2204@xs4all.nl>
Message-ID: <5B4BA077.1020709@gmail.com>


I need time to think about it.

Wolfgang
> Hans Hagen <mailto:j.hagen at xs4all.nl>
> 15. Juli 2018 um 20:02
> On 7/15/2018 5:23 PM, Pablo Rodriguez wrote:
>
> Depends on Wolfgangs and Thomas assessment.
>
>
> -----------------------------------------------------------------
>                                           Hans Hagen | PRAGMA ADE
>               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
> -----------------------------------------------------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180715/15f9fc4c/attachment.html>

From thomas.schmitz at uni-bonn.de  Sun Jul 15 20:13:20 2018
From: thomas.schmitz at uni-bonn.de (Thomas A. Schmitz)
Date: Sun, 15 Jul 2018 20:13:20 +0200
Subject: [dev-context] language synonyms for registers
In-Reply-To: <773af3fe-e5d6-a7e1-81df-5638f5de2204@xs4all.nl>
References: <d6486b47-fba3-6d8a-f04c-38c001b444b9@gmx.es>
 <773af3fe-e5d6-a7e1-81df-5638f5de2204@xs4all.nl>
Message-ID: <204a6a23-2960-a7f7-0894-f44b6e7b0833@uni-bonn.de>

On 07/15/2018 08:02 PM, Hans Hagen wrote:
> Depends on Wolfgangs and Thomas assessment

What does the "parent = XXX" definition actually do? I remember that we 
had a discussion about ancient greek sorting some while ago, and the 
point was moot, more or less. But I don't have a strong opinion on that 
question either way.

Thomas

From wolfgang.schuster.lists at gmail.com  Tue Aug  7 22:28:47 2018
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Tue, 7 Aug 2018 22:28:47 +0200
Subject: [dev-context] page-pcl.mkiv
Message-ID: <2c80000f-1aa4-c8e5-4267-4251a8d5df4c@gmail.com>

Hi,

line 772 uses mixedcolumns parameter to set the text color.

\unexpanded\def\page_col_start_yes
   {\d_page_col_distance     \pagecolumnsparameter\c!distance\relax
    ...
  % \useprofileparameter\pagecolumnsparameter
    %
-  \usemixedcolumnscolorparameter\c!color
+  \usepagecolumnscolorparameter\c!color
    %
    \setupnotes[\c!width=\textwidth]%
    ...
    \let\stoppagecolumns\page_col_stop_yes}

Wolfgang

From wolfgang.schuster.lists at gmail.com  Sat Aug 11 20:13:59 2018
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sat, 11 Aug 2018 20:13:59 +0200
Subject: [dev-context] Start sections with 0
Message-ID: <598c439a-515c-2fb9-e9f7-de88c675bcfe@gmail.com>

Hi Hans,

can you add a conversion which let us show 0 as value for the first 
chapter etc.


\def\zeronumberconversion#1{\number\numexpr#1-1\relax}

\defineconversion [zero] [\zeronumberconversion]

\defineconversionset [zero] [n,zero] [n]

\setuphead [sectionconversionset=zero]

\starttext

\startchapter [title=Introduction]

     \startsection [title=First topic]
     \stopsection

     \startsection [title=Second topic]
     \stopsection

\stopchapter

\stoptext


Wolfgang

From braslau.list at comcast.net  Sun Aug 12 00:05:52 2018
From: braslau.list at comcast.net (Alan Braslau)
Date: Sat, 11 Aug 2018 16:05:52 -0600
Subject: [dev-context] Start sections with 0
In-Reply-To: <598c439a-515c-2fb9-e9f7-de88c675bcfe@gmail.com>
References: <598c439a-515c-2fb9-e9f7-de88c675bcfe@gmail.com>
Message-ID: <20180811160552.55acc2a8@comcast.net>

Hans does not like counting from zero, for some reason... :-)

Alan



On Sat, 11 Aug 2018 20:13:59 +0200
Wolfgang Schuster <wolfgang.schuster.lists at gmail.com> wrote:

> Hi Hans,
> 
> can you add a conversion which let us show 0 as value for the first 
> chapter etc.
> 
> 
> \def\zeronumberconversion#1{\number\numexpr#1-1\relax}
> 
> \defineconversion [zero] [\zeronumberconversion]
> 
> \defineconversionset [zero] [n,zero] [n]
> 
> \setuphead [sectionconversionset=zero]
> 
> \starttext
> 
> \startchapter [title=Introduction]
> 
>      \startsection [title=First topic]
>      \stopsection
> 
>      \startsection [title=Second topic]
>      \stopsection
> 
> \stopchapter
> 
> \stoptext
> 
> 
> Wolfgang
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> https://mailman.ntg.nl/mailman/listinfo/dev-context


From wolfgang.schuster.lists at gmail.com  Sun Aug 12 11:22:35 2018
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sun, 12 Aug 2018 11:22:35 +0200
Subject: [dev-context] Start sections with 0
In-Reply-To: <20180811160552.55acc2a8@comcast.net>
References: <598c439a-515c-2fb9-e9f7-de88c675bcfe@gmail.com>
 <20180811160552.55acc2a8@comcast.net>
Message-ID: <40a15987-ce65-6824-9ee6-c3c124b7c35a@gmail.com>

Iâm recreating a older document which starts the introduction with 0 and 
I donât plan to change this.

There is no change in the counter needed but all I do is to change the 
output in the pdf with the number conversion.

Wolfgang


Alan Braslau schrieb am 12.08.18 um 00:05:
> Hans does not like counting from zero, for some reason... :-)
>
> Alan
>
>
>
> On Sat, 11 Aug 2018 20:13:59 +0200
> Wolfgang Schuster <wolfgang.schuster.lists at gmail.com> wrote:
>
>> Hi Hans,
>>
>> can you add a conversion which let us show 0 as value for the first
>> chapter etc.
>>
>>
>> \def\zeronumberconversion#1{\number\numexpr#1-1\relax}
>>
>> \defineconversion [zero] [\zeronumberconversion]
>>
>> \defineconversionset [zero] [n,zero] [n]
>>
>> \setuphead [sectionconversionset=zero]
>>
>> \starttext
>>
>> \startchapter [title=Introduction]
>>
>>       \startsection [title=First topic]
>>       \stopsection
>>
>>       \startsection [title=Second topic]
>>       \stopsection
>>
>> \stopchapter
>>
>> \stoptext
>>
>>
>> Wolfgang
>> _______________________________________________
>> dev-context mailing list
>> dev-context at ntg.nl
>> https://mailman.ntg.nl/mailman/listinfo/dev-context


From taco at elvenkind.com  Mon Aug 13 09:42:59 2018
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 13 Aug 2018 09:42:59 +0200
Subject: [dev-context] A Note for module authors: Version String Guidelines
Message-ID: <940FE864-B594-4BDB-B93A-6AC5C656338F@elvenkind.com>

Hi to all module authors!

The CTAN team (Manfred) and us (Mojca and I) have recently been setting 
up a new system whereby CTAN automatically picks up new, updated versions
of the ConTeXt modules that want to be archived on CTAN.

For this system to properly pickup new versions of modules, it is vital
that the Version of such modules is coded as YYYY.MM.DD or YYYY-MM-DD.

The YYYY.MM.DD format has a slight advantage, because it follows the 
traditional version number setup of <Major>.<Minor>.<Revision>, but the 
version with dashes works as well. 

So, if you are a module author on https://modules.contextgarden.net/
and want to benefit from this automatic update of the your new module
version to CTAN, then please make sure your version string matches the
above specification. Version strings like âr10â and "hg-rev57â cannot
be parsed automatically, so any module updates you make using such 
version strings will more than likely be ignored.

Best wishes,
Taco


From oinos at gmx.es  Wed Aug 15 19:01:59 2018
From: oinos at gmx.es (Pablo Rodriguez)
Date: Wed, 15 Aug 2018 19:01:59 +0200
Subject: [dev-context] minor corrections in musings-introduction.tex
Message-ID: <c8946acf-a5ac-d4f6-5337-547b3b9f4188@gmx.es>

Dear Hans,

I attach a diff file with three minor corrections in
musings-introduction.tex.

Many thanks for the âConTeXt Musingsâ themselves,

Pablo
-- 
http://www.ousia.tk
-------------- next part --------------
A non-text attachment was scrubbed...
Name: musings-intro.diff
Type: text/x-patch
Size: 1163 bytes
Desc: not available
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180815/f5fa7397/attachment.bin>

From wolfgang.schuster.lists at gmail.com  Wed Aug 22 21:52:51 2018
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Wed, 22 Aug 2018 21:52:51 +0200
Subject: [dev-context] lang-ini.mkiv: \startlanguage
Message-ID: <83103947-b33e-b7fd-bfaa-4f52340602e8@gmail.com>

Hi Hans,

can you add a environment version of the \language command.


\unexpanded\def\startlanguage
   {\begingroup\language}

\let\stoplanguage\endgroup


Wolfgang

From j.hagen at xs4all.nl  Fri Aug 24 18:58:56 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Fri, 24 Aug 2018 18:58:56 +0200
Subject: [dev-context] lang-ini.mkiv: \startlanguage
In-Reply-To: <83103947-b33e-b7fd-bfaa-4f52340602e8@gmail.com>
References: <83103947-b33e-b7fd-bfaa-4f52340602e8@gmail.com>
Message-ID: <548e0e5c-cf5c-62c0-6b5d-f3f51334120a@xs4all.nl>

On 8/22/2018 9:52 PM, Wolfgang Schuster wrote:
> Hi Hans,
> 
> can you add a environment version of the \language command.
> 
> 
> \unexpanded\def\startlanguage
>  Â  {\begingroup\language}
> 
> \let\stoplanguage\endgroup
Grouped or not? This is also an option:

\unprotect

\unexpanded\def\startlanguage
   {\pushmacro\currentlanguage
    \lang_basics_set_current}

\unexpanded\def\stoplanguage
   {\popmacro\currentlanguage
    \lang_basics_set_current[\currentlanguage]}

\protect




-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From wolfgang.schuster.lists at gmail.com  Fri Aug 24 19:07:10 2018
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Fri, 24 Aug 2018 19:07:10 +0200
Subject: [dev-context] lang-ini.mkiv: \startlanguage
In-Reply-To: <548e0e5c-cf5c-62c0-6b5d-f3f51334120a@xs4all.nl>
References: <83103947-b33e-b7fd-bfaa-4f52340602e8@gmail.com>
 <548e0e5c-cf5c-62c0-6b5d-f3f51334120a@xs4all.nl>
Message-ID: <66782732-2fe3-0c65-4037-6cec966c3287@gmail.com>

Grouped, otherwise settings for a certain language (applied with the 
setups key) are applied when the local language block has ended.


\unprotect

\unexpanded\def\startlanguage
   {\pushmacro\currentlanguage
    \lang_basics_set_current}

\unexpanded\def\stoplanguage
   {\popmacro\currentlanguage
    \lang_basics_set_current[\currentlanguage]}

\protect

\startsetups[french]
   \setcharacterspacing[frenchpunctuation]
\stopsetups

\setuplanguage
   [fr]
   [setups=french]

\starttext

Â«textÂ»

\startlanguage[fr]
Â«textÂ»
\stoplanguage

Â«textÂ»

\stoptext


Wolfgang


Hans Hagen schrieb am 24.08.18 um 18:58:
> On 8/22/2018 9:52 PM, Wolfgang Schuster wrote:
>> Hi Hans,
>>
>> can you add a environment version of the \language command.
>>
>>
>> \unexpanded\def\startlanguage
>>    {\begingroup\language}
>>
>> \let\stoplanguage\endgroup
> Grouped or not? This is also an option:
>
> \unprotect
>
> \unexpanded\def\startlanguage
>   {\pushmacro\currentlanguage
>    \lang_basics_set_current}
>
> \unexpanded\def\stoplanguage
>   {\popmacro\currentlanguage
>    \lang_basics_set_current[\currentlanguage]}
>
> \protect
>
>
>
>
> -----------------------------------------------------------------
>                                           Hans Hagen | PRAGMA ADE
>               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
> -----------------------------------------------------------------


From wolfgang.schuster.lists at gmail.com  Sat Aug 25 16:36:13 2018
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sat, 25 Aug 2018 16:36:13 +0200
Subject: [dev-context] User defined environments with parameters
Message-ID: <53f5f24b-a6e7-1e21-ca41-abf8e637a57f@gmail.com>

Hi,

sometimes one needs a environment where you have to set different 
strings. While we have \definestartstop to create new environments it 
doesnât provide a mechanism to pass values to the environment.

Attached is a prototype for such a environment where you can pass values 
(only style, color and alternative are reserved keys) and create own 
layouts for the content of each environment.

Wolfgang
-------------- next part --------------
A non-text attachment was scrubbed...
Name: userdata.tex
Type: application/x-tex
Size: 4213 bytes
Desc: not available
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180825/e8b2aa11/attachment.tex>

From adityam at umich.edu  Sat Aug 25 19:02:58 2018
From: adityam at umich.edu (Aditya Mahajan)
Date: Sat, 25 Aug 2018 13:02:58 -0400 (EDT)
Subject: [dev-context] User defined environments with parameters
In-Reply-To: <53f5f24b-a6e7-1e21-ca41-abf8e637a57f@gmail.com>
References: <53f5f24b-a6e7-1e21-ca41-abf8e637a57f@gmail.com>
Message-ID: <alpine.OSX.2.20.1808251258510.23886@nqv-znpobbx>

On Sat, 25 Aug 2018, Wolfgang Schuster wrote:

> Hi,
>
> sometimes one needs a environment where you have to set different strings. 
> While we have \definestartstop to create new environments it doesnât 
> provide a mechanism to pass values to the environment.
>
> Attached is a prototype for such a environment where you can pass values 
> (only style, color and alternative are reserved keys) and create own 
> layouts for the content of each environment.

Would it be better to enhance definestartstop so that it accepts an 
alternative parameter?

Aditya

From wolfgang.schuster.lists at gmail.com  Sat Aug 25 19:16:07 2018
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sat, 25 Aug 2018 19:16:07 +0200
Subject: [dev-context] User defined environments with parameters
In-Reply-To: <alpine.OSX.2.20.1808251258510.23886@nqv-znpobbx>
References: <53f5f24b-a6e7-1e21-ca41-abf8e637a57f@gmail.com>
 <alpine.OSX.2.20.1808251258510.23886@nqv-znpobbx>
Message-ID: <ec9aec20-7e01-00fb-5075-452e684b6355@gmail.com>

Aditya Mahajan schrieb am 25.08.18 um 19:02:
> On Sat, 25 Aug 2018, Wolfgang Schuster wrote:
>
>> Hi,
>>
>> sometimes one needs a environment where you have to set different 
>> strings. While we have \definestartstop to create new environments it 
>> doesnât provide a mechanism to pass values to the environment.
>>
>> Attached is a prototype for such a environment where you can pass 
>> values (only style, color and alternative are reserved keys) and 
>> create own layouts for the content of each environment.
>
> Would it be better to enhance definestartstop so that it accepts an 
> alternative parameter?

This is a option but I didnât want to redefine a existing environment in 
my example.


Still adding a single optional argument to startstop isnât enough 
because things
like my epigraph example at the end of the file are easier to do with a 
buffer than
simple before/after keys.


Another things is my personal preference to use

     \startenvironment [<instance>] ... \stopenvironment

instead of

     \start<instance> ... \stop<instance>

with a simple check if the used instance exists (easy to do when you use 
the command
handler to create new commands).


Wolfgang



From j.hagen at xs4all.nl  Sun Aug 26 16:18:18 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Sun, 26 Aug 2018 16:18:18 +0200
Subject: [dev-context] User defined environments with parameters
In-Reply-To: <53f5f24b-a6e7-1e21-ca41-abf8e637a57f@gmail.com>
References: <53f5f24b-a6e7-1e21-ca41-abf8e637a57f@gmail.com>
Message-ID: <02bbd314-a623-4141-4b24-39330d67f586@xs4all.nl>

On 8/25/2018 4:36 PM, Wolfgang Schuster wrote:
> Hi,
> 
> sometimes one needs a environment where you have to set different 
> strings. While we have \definestartstop to create new environments it 
> doesnât provide a mechanism to pass values to the environment.
> 
> Attached is a prototype for such a environment where you can pass values 
> (only style, color and alternative are reserved keys) and create own 
> layouts for the content of each environment.
first attempt in strc-usr.mkiv/lua .. just your code but
i moved the before and after, added align and tags

zip on ftp

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From wolfgang.schuster.lists at gmail.com  Fri Aug 31 16:36:26 2018
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Fri, 31 Aug 2018 16:36:26 +0200
Subject: [dev-context] symb-ini.mkiv: \symbol and fontawesome
Message-ID: <82f28887-d9dd-aef8-e756-9fcfde7f0817@gmail.com>

Hi Hans,

the two argument version of the \symbol commands needs an additional 
branch to support the new symbol mechanism which is used with fontawesome.


\unprotect

% \def\symb_place_normal_a[#1][#2]%
%Â Â  {\edef\currentsymbol{#2}%
%Â Â Â  \ifcsname\??symbol#1:#2\endcsname
%Â Â Â Â Â Â  \symb_place_indeed{#1:#2}%
%Â Â Â  \else
%Â Â Â Â Â  \symb_place_normal_c
%Â Â Â  \fi}

\def\symb_place_normal_a[#1][#2]%
 Â  {\edef\currentsymbol{#2}%
 Â Â  \ifcsname\??symbol#1:#2\endcsname
 Â Â Â Â Â  \symb_place_indeed{#1:#2}%
 Â Â  \else\ifcsname\??symboldefault#1\endcsname
 Â Â Â Â Â  \symb_place_named{#1}%
 Â Â  \else
 Â Â Â Â  \symb_place_normal_c
 Â Â  \fi\fi}

\protect

\usesymbols[fontawesome]

\starttext

% doesnât work untill you set fontawesome as global symbolset

\symbol[fontawesome][thumbs_down_alt]

\setupsymbolset[fontawesome]

\symbol[thumbs_up_alt]

\stoptext


Wolfgang

From luigi.scarso at gmail.com  Fri Aug 31 21:00:33 2018
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 31 Aug 2018 21:00:33 +0200
Subject: [dev-context] Luatex 1.08.0 announcement
Message-ID: <CAG5iGsAeFxJ3Sq_7F9btTL_-XV5_u7NwzB7MTJkQUB6tivyeBw@mail.gmail.com>

==============================================================
LuaTeX 1.08 2018-08-28
==============================================================


(1) This release is a prelude to 1.10, the next stable iteration of LuaTeX
after version 1.00.

(2) Lua 5.3 is now considered to be default and we might use 5.4 in version
1.10. There are no real functional changed expected. You still need to
rename
the binary for 5.3!

(3) Binary mode is no longer available in MPlib but it is still available in
stand alone MetaPost. This simplifies compilation and reduces dependencies.

(4) The dependency on Poppler for pdf image inclusion has been removed. We
now use a small dedicated library written by Pawel Jakowski. We no longer
need c++ compilers. We're in the process of making it behave well on all
platforms. It has been tested on intel platforms.

(5) We know that there can be some (alignment) issues with the arm platform
but these are looked into. Therefore, later this year we will release 1.09.
Version 1.10 is planned for TeXlive. We hope that ffi works ok on intel and
arm platforms at that point.

(6) There have been some extensions to the Lua libraries and some callbacks
have been added. Also, a few new primitives have been introduced. The
documentation mentions the stable extensions.

(7) There are the usual bug fixes and cleanups but there have been no real
fundamental changes in the API.

The LuaTeX team
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180831/1c91ea08/attachment.html>

From wolfgang.schuster.lists at gmail.com  Sun Sep  9 18:04:26 2018
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sun, 9 Sep 2018 18:04:26 +0200
Subject: [dev-context] meta-imp-txt.mkiv: EnglishRule
Message-ID: <009d0dd5-a97c-a86c-0086-86f43661f837@gmail.com>

Hi,

the height variable in the EnglishRule graphic needs an assignment, 
otherwise you get a error when there is a previous graphic which also 
use height as a variable name.


meta-imp-txt.mkiv:

\startuniqueMPgraphic{EnglishRule}{height,width,color}
-Â Â  height = \MPvar{height} ;
+Â Â  height := \MPvar{height} ;
 Â Â Â  x1 = 0 ; x3 = \MPvar{width} ; x2 = x4 = .5x3 ;
 Â Â Â  y1 = y3 = 0 ; y2 = -y4 = height/2 ;
 Â Â Â  fill z1..z2..z3 & z3..z4..z1 & cycle withcolor \MPvar{color} ;
\stopuniqueMPgraphic


Example (the graphic for the title page in the module documentation uses 
height as variable):

\usemodule[module-basic]
\useMPlibrary[txt]
\startdocument
\useMPgraphic{EnglishRule}
\stopdocument


Wolfgang

From j.hagen at xs4all.nl  Sun Sep  9 18:51:34 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Sun, 9 Sep 2018 18:51:34 +0200
Subject: [dev-context] meta-imp-txt.mkiv: EnglishRule
In-Reply-To: <009d0dd5-a97c-a86c-0086-86f43661f837@gmail.com>
References: <009d0dd5-a97c-a86c-0086-86f43661f837@gmail.com>
Message-ID: <0828de8c-c43e-5f0e-976b-7abef3665eee@xs4all.nl>

On 9/9/2018 6:04 PM, Wolfgang Schuster wrote:
> Hi,
> 
> the height variable in the EnglishRule graphic needs an assignment, 
> otherwise you get a error when there is a previous graphic which also 
> use height as a variable name.
> 
> 
> meta-imp-txt.mkiv:
> 
> \startuniqueMPgraphic{EnglishRule}{height,width,color}
> -Â Â  height = \MPvar{height} ;
> +Â Â  height := \MPvar{height} ;
>  Â Â Â  x1 = 0 ; x3 = \MPvar{width} ; x2 = x4 = .5x3 ;
>  Â Â Â  y1 = y3 = 0 ; y2 = -y4 = height/2 ;
>  Â Â Â  fill z1..z2..z3 & z3..z4..z1 & cycle withcolor \MPvar{color} ;
> \stopuniqueMPgraphic

or just

\startuniqueMPgraphic{EnglishRule}{height,width,color}
     x1 = 0 ; x3 = \MPvar{width} ; x2 = x4 = .5x3 ;
     y1 = y3 = 0 ; y2 = -y4 = \MPvar{height}/2 ;
     fill z1..z2..z3 & z3..z4..z1 & cycle withcolor \MPvar{color} ;
\stopuniqueMPgraphic

> Example (the graphic for the title page in the module documentation uses 
> height as variable):
> 
> \usemodule[module-basic]
> \useMPlibrary[txt]
> \startdocument
> \useMPgraphic{EnglishRule}
> \stopdocument
> 
> 
> Wolfgang
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> https://mailman.ntg.nl/mailman/listinfo/dev-context


-- 

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Mon Sep 17 12:14:51 2018
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 17 Sep 2018 12:14:51 +0200
Subject: [dev-context] xml.setparameter(), xml.setattribute() broken
Message-ID: <C5B940AE-651D-4C3B-98D8-90F1DD4E70BE@elvenkind.com>

In the current beta, lxml-tex.lua needs this fix:

--- lxml-tex.lua.bck	2018-09-17 12:12:24.000000000 +0200
+++ lxml-tex.lua	2018-09-17 12:12:41.000000000 +0200
@@ -2489,7 +2489,7 @@
     local collected = xmlapplylpath(getid(id),pattern)
     if collected then
         for i=1,#collected do
-            setatt(collected[i],name,value)
+            lxml.setatt(collected[i],name,value)
         end
     end
 end
@@ -2498,7 +2498,7 @@
     local collected = xmlapplylpath(getid(id),pattern)
     if collected then
         for i=1,#collected do
-            setpar(collected[i],name,value)
+            lxml.setpar(collected[i],name,value)
         end
     end
 end


Taco Hoekwater
Elvenkind BV





From oinos at gmx.es  Wed Sep 26 16:48:41 2018
From: oinos at gmx.es (Pablo Rodriguez)
Date: Wed, 26 Sep 2018 16:48:41 +0200
Subject: [dev-context] sample texts
Message-ID: <aedc859e-05bf-c2ce-57c4-5c8e17ede1e3@gmx.es>

Hans,

would it be possible that both attachments could be included in ConTeXt
as sample texts?

Many thanks for your help,

Pablo
-- 
http://www.ousia.tk
-------------- next part --------------
A non-text attachment was scrubbed...
Name: aristotle-grc.tex
Type: text/x-tex
Size: 1476 bytes
Desc: not available
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180926/c1573d8e/attachment.tex>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dequincey.tex
Type: text/x-tex
Size: 282 bytes
Desc: not available
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20180926/c1573d8e/attachment-0001.tex>

From modules at contextgarden.net  Mon Sep 24 19:59:12 2018
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Mon, 24 Sep 2018 19:59:12 +0200
Subject: [dev-context] CGModules update: t-handlecsv version 2018.09.24
	published.
Message-ID: <20180924175912.49C984A88@zapf.ntg.nl>

Pablo Rodriguez submitted an update to the

               t-handlecsv

package.

Version number: 2018.09.24
License type: GNU General Public License
Wants to be in ConTeXt distribution: yes
Wants to be synced with CTAN: no

Summary description: handle .csv files in ConTeXt MkIV

Announcement text:
----------------------------------------------------------------------

Remote revision: 462c233, log message:
fix issue with numbers and \linepointer

----------------------------------------------------------------------


From modules at contextgarden.net  Mon Sep 24 19:32:26 2018
From: modules at contextgarden.net (modules at contextgarden.net)
Date: Mon, 24 Sep 2018 19:32:26 +0200
Subject: [dev-context] CGModules update: Syntax Highlighting version 1.1
	published.
Message-ID: <20180924173226.4817A491E@zapf.ntg.nl>

Christoph Reller submitted an update to the

               Syntax Highlighting

package.

Version number: 1.1
License type: GNU General Public License
Wants to be in ConTeXt distribution: yes
Wants to be synced with CTAN: no

Summary description: Syntax highlighting for various programming languages and file formats.

Announcement text:
----------------------------------------------------------------------

Remote revision: 334379f, log message:
Simplify pattern construction for keywords. Bump minor version.

----------------------------------------------------------------------


From oinos at gmx.es  Mon Oct  1 17:04:20 2018
From: oinos at gmx.es (Pablo Rodriguez)
Date: Mon, 1 Oct 2018 17:04:20 +0200
Subject: [dev-context] =?utf-8?b?dHlwb3MgaW4g4oCcVGVYIGl04oCd?=
Message-ID: <6381a38d-39fa-3f9b-66b7-932298bb0e36@gmx.es>

Hans,

I attach a diff file correcting some typos in the sources of the âTeX
itâ manual.

I hope it helps,

Pablo
-- 
http://www.ousia.tk
-------------- next part --------------
A non-text attachment was scrubbed...
Name: texit-typos.diff
Type: text/x-patch
Size: 3026 bytes
Desc: not available
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20181001/75e0d257/attachment.bin>

From luigi.scarso at gmail.com  Tue Oct 23 20:12:26 2018
From: luigi.scarso at gmail.com (luigi scarso)
Date: Tue, 23 Oct 2018 20:12:26 +0200
Subject: [dev-context] Luatex 1.09.0 announcement
In-Reply-To: <CAG5iGsAeFxJ3Sq_7F9btTL_-XV5_u7NwzB7MTJkQUB6tivyeBw@mail.gmail.com>
References: <CAG5iGsAeFxJ3Sq_7F9btTL_-XV5_u7NwzB7MTJkQUB6tivyeBw@mail.gmail.com>
Message-ID: <CAG5iGsDY1ckcnqb7DGSbWj2kD1P-+p_KWRvhhRTh=6J0gtiP7A@mail.gmail.com>

==============================================================
LuaTeX 1.09 2018-10-23
==============================================================

(1) This is a release that fixed some bugs, and the latest
with lua 5.2.

(2) luaffi is still incomplete, so very likely there will be
a new release 1.09.1 before the next year.


The LuaTeX team
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20181023/1f7740be/attachment.html>

From luigi.scarso at gmail.com  Thu Oct 25 20:02:31 2018
From: luigi.scarso at gmail.com (luigi scarso)
Date: Thu, 25 Oct 2018 20:02:31 +0200
Subject: [dev-context] Luatex 1.09.0 announcement (following)
In-Reply-To: <CAG5iGsDY1ckcnqb7DGSbWj2kD1P-+p_KWRvhhRTh=6J0gtiP7A@mail.gmail.com>
References: <CAG5iGsAeFxJ3Sq_7F9btTL_-XV5_u7NwzB7MTJkQUB6tivyeBw@mail.gmail.com>
 <CAG5iGsDY1ckcnqb7DGSbWj2kD1P-+p_KWRvhhRTh=6J0gtiP7A@mail.gmail.com>
Message-ID: <CAG5iGsBYBfd6_u6Kq+tk6-SFbY5T_4ObSFqUOnu-rbEz=_oqdQ@mail.gmail.com>

Hi all,

At the context meeting we presented (and discussed) the state of luatex and
released 1.08 as a prelude to 1.09. Today we announce version 1.09.

We are gradually entering into a "bug fix / no more features"
mode. The goal is to have the beginning of "stable" luatex 1.10 for
next texlive 2019, and in our minds "stable" means "in the long term
like pdftex".

In practice this means that luatex comes with lua 5.3.4, that
luajittex uses luajit 2.1 beta3, and that context will assume and support
this setup for a long time. This also means that we will keep the lua
5.3.4 API. Issues with luajitex will be solved whenever it is
possible, but we expect that some platforms will not have luajittex
and  this is nothing new, as it already happens in texlive.

By going stable we also hope that those using the lua interfaces will
not be catched by surprises. The internals are predictable enough for
that.

We have a new pdf parser (pplib from PaweÅ Jackowski) that replaces
poppler.  It is much smaller, a bit faster and it's written in pure C
so it fits also well with our idea of "stable" wrt to the compiler
versions. It also removes a dependency on a large library set. We are
actively testing it but appreciate testing from "power users" (like
Hraban did at the ctx meeting). Of course our powerful buildbot farm
helps a lot in the process.

We will of course try to make the luatex manual better and further
document mkiv features. If you have suggestions for context, don't
hesitate to ask because we keep evolving.

We would like to stress the terms "gradually" and "beginning":
practically we think means that, at least for the next year, there
will be our "usual" cycle of intermediate bugfix releases, but at this
point we are quite sure that for the TeX users the core features are
both powerful and complete enough for a large set of useful
applications, and context is an example of such application.

At the same time, we are not stopping research and developing, if only
because the rest of the world is moving on. As usual the context
meeting is place where we will report the results.




Happy using,

Luigi & Hans
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20181025/95099ab3/attachment.html>

From wl at gnu.org  Thu Oct 25 20:57:33 2018
From: wl at gnu.org (Werner LEMBERG)
Date: Thu, 25 Oct 2018 20:57:33 +0200 (CEST)
Subject: [dev-context] [luatex] Luatex 1.09.0 announcement (following)
In-Reply-To: <CAG5iGsBYBfd6_u6Kq+tk6-SFbY5T_4ObSFqUOnu-rbEz=_oqdQ@mail.gmail.com>
References: <CAG5iGsAeFxJ3Sq_7F9btTL_-XV5_u7NwzB7MTJkQUB6tivyeBw@mail.gmail.com>
 <CAG5iGsDY1ckcnqb7DGSbWj2kD1P-+p_KWRvhhRTh=6J0gtiP7A@mail.gmail.com>
 <CAG5iGsBYBfd6_u6Kq+tk6-SFbY5T_4ObSFqUOnu-rbEz=_oqdQ@mail.gmail.com>
Message-ID: <20181025.205733.1709379302089098501.wl@gnu.org>


> We have a new pdf parser (pplib from PaweÅ Jackowski) that replaces
> poppler.  It is much smaller, a bit faster and it's written in
> pureÂ C [...]

Is there a project page for pplib?  The source code of this library
contained in TeXLive is very, very uncommented â in particular, a
description of the API is completely missing, AFAICS.  It also comes
with overly long lines and extremely densely written CÂ code; it almost
feels as if the original source has been written with cweb or
something like that.


    Werner

From adityam at umich.edu  Wed Oct 31 10:24:55 2018
From: adityam at umich.edu (Aditya Mahajan)
Date: Wed, 31 Oct 2018 05:24:55 -0400 (EDT)
Subject: [dev-context] Adding before and after keys to setupcaption
Message-ID: <alpine.OSX.2.20.1810310516450.28114@nqv-znpobbx>

Hi Hans,

There have been a few questions on TeX.SX asking essentially for a frame 
around a float that covers both the caption and the content.

1. https://tex.stackexchange.com/questions/25180/adding-a-frame-and-background-color-to-floats-in-context/37128#37128
2. https://tex.stackexchange.com/questions/457412/context-place-rules-above-and-below-floating-figure

I have provided a hacky solutions to both questions (the internals changed 
quite a bit between the two questions), but as I was playing around with 
the code, I thought that the simplest solution will be to add a `before` 
and an `after` key to `\setupcaptions`:

     \def\strc_floats_build_box
       {\global\setbox\floatbox\vbox % pack ? probably not
          {\strc_floats_set_local_hsize
           \forgetall
           \ifconditional\c_floats_store_minimal_package
             \strc_floats_build_box_separate_make
           \else
           % \let\floatcaptionarrangement\s!default
             \let\floatcaptionarrangement\v!bottom % for Alan

\processcommacommand[\floatcaptionparameter\c!location]\strc_floats_build_box_step
             \floatcaptionparameter\c!before %AM: Added
             \ifcsname\??floatbuilder\floatcaptionarrangement\endcsname
               \lastnamedcs
             \else
               \strc_floats_build_box_default
             \fi
             \floatcaptionparameter\c!after %AM: Added
           \fi}}

A simple usage example is the following:


     \setupexternalfigures[location={local,global,default}]

     \setupcaption
       [
         before={\startframedtext[widht=fit, background=color, 
backgroundcolor=gray, frame=off]},
         after=\stopframedtext,
       ]
     \starttext

     \section{A figure with rules}

     \startplacefigure[location={left,high},title={A dutch cow}]
       \externalfigure[cow]
     \stopplacefigure
     \input knuth

     \startplacefigure[title={\input zapf \relax}]
       \externalfigure[cow]
     \stopplacefigure

     \dorecurse{4}{\input knuth \endgraf}

     \stoptext


Does it make sense to add this or something similar?

Thanks,
Aditya

From j.hagen at xs4all.nl  Thu Nov  1 15:01:18 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Thu, 1 Nov 2018 15:01:18 +0100
Subject: [dev-context] Adding before and after keys to setupcaption
In-Reply-To: <alpine.OSX.2.20.1810310516450.28114@nqv-znpobbx>
References: <alpine.OSX.2.20.1810310516450.28114@nqv-znpobbx>
Message-ID: <d9148583-e1f4-f302-3416-d94088d2c9cc@xs4all.nl>

On 10/31/2018 10:24 AM, Aditya Mahajan wrote:
> Hi Hans,
> 
> There have been a few questions on TeX.SX asking essentially for a frame 
> around a float that covers both the caption and the content.
it's probably a bit more tricky than that ... (also, before/after are 
sort of taken)

i'll send you/wolfgang a variant for testing

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From sebastian.miele at gmail.com  Mon Nov  5 18:13:27 2018
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Mon, 5 Nov 2018 18:13:27 +0100
Subject: [dev-context] ARMv7 hardfp or softfp detection
Message-ID: <CA+ABrMwF66ymGcuWFDJrGjp00_CVf4JWhH_tvb=TJ8FfcpTyYQ@mail.gmail.com>

first-setup.sh from ConTeXt standalone contains the following lines:

readelf -A /proc/self/exe | grep -q '^ \+Tag_ABI_VFP_args'
if [ ! $? ]; then

That probably does not work as intended, because [ ! $? ] is
equivalent to [ ! -n $? ]. It does not return the negation of the
return code of the previous command. [ ! 0 ] and [ ! 1 ] both have
exit code 1, because the strings '0' and '1' are both non-null.

Probably no-one actually uses ARMv7 with softfp, including me.

From luigi.scarso at gmail.com  Mon Nov  5 21:44:36 2018
From: luigi.scarso at gmail.com (luigi scarso)
Date: Mon, 5 Nov 2018 21:44:36 +0100
Subject: [dev-context] ARMv7 hardfp or softfp detection
In-Reply-To: <CA+ABrMwF66ymGcuWFDJrGjp00_CVf4JWhH_tvb=TJ8FfcpTyYQ@mail.gmail.com>
References: <CA+ABrMwF66ymGcuWFDJrGjp00_CVf4JWhH_tvb=TJ8FfcpTyYQ@mail.gmail.com>
Message-ID: <CAG5iGsBQf79o=_vt9-t-GL7joR_zsuUm4RR+VhJXt9oembEtuQ@mail.gmail.com>

On Mon, Nov 5, 2018 at 6:14 PM Sebastian Miele <sebastian.miele at gmail.com>
wrote:

> first-setup.sh from ConTeXt standalone contains the following lines:
>
> readelf -A /proc/self/exe | grep -q '^ \+Tag_ABI_VFP_args'
> if [ ! $? ]; then
>
> That probably does not work as intended, because [ ! $? ] is
> equivalent to [ ! -n $? ]. It does not return the negation of the
> return code of the previous command. [ ! 0 ] and [ ! 1 ] both have
> exit code 1, because the strings '0' and '1' are both non-null.
>
> Probably no-one actually uses ARMv7 with softfp, including me.
>

Ok, thank you very much.
(I think that the script could be something like
readelf -A /proc/self/exe | grep -q '^ \+Tag_ABI_VFP_args' && true ||
platform="linux-armel"
)

Are you using 32bit linux-gnueabi ?


-- 
luigi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://mailman.ntg.nl/pipermail/dev-context/attachments/20181105/d3057aa8/attachment.html>

From mojca.miklavec.lists at gmail.com  Tue Nov  6 07:45:36 2018
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 6 Nov 2018 07:45:36 +0100
Subject: [dev-context] ARMv7 hardfp or softfp detection
In-Reply-To: <CA+ABrMwF66ymGcuWFDJrGjp00_CVf4JWhH_tvb=TJ8FfcpTyYQ@mail.gmail.com>
References: <CA+ABrMwF66ymGcuWFDJrGjp00_CVf4JWhH_tvb=TJ8FfcpTyYQ@mail.gmail.com>
Message-ID: <CALBOmsY6vtihmEwpu+5b6wy42__dKbpvVdnDCu5FCzLMKSgT1w@mail.gmail.com>

Dear Sebastian,

On Mon, 5 Nov 2018 at 18:14, Sebastian Miele wrote:
>
> first-setup.sh from ConTeXt standalone contains the following lines:
>
> readelf -A /proc/self/exe | grep -q '^ \+Tag_ABI_VFP_args'
> if [ ! $? ]; then
>
> That probably does not work as intended, because [ ! $? ] is
> equivalent to [ ! -n $? ]. It does not return the negation of the
> return code of the previous command. [ ! 0 ] and [ ! 1 ] both have
> exit code 1, because the strings '0' and '1' are both non-null.

I'm sorry. A few years back we had a long discussion with the
consensus that we should have used

    if [ $? != 0 ]; then

instead. I have no idea why this wasn't the case at the end. Maybe I
just wasn't reading careful enough?

> Probably no-one actually uses ARMv7 with softfp, including me.

We kept building the armel binaries on some super strange hardware
configuration which Boris provided to us. At some point he was no
longer able to provide the hardware, we no longer built the binaries &
provided them, and I don't think that anybody complained since.

The armhf binaries are built on RPi in Hans' cellar running Raspbian.

There's a high probability that some similar code is used in TeX Live
as well, but I would need to check. (But maybe Karl fixed it
correctly, only I screwed up :)

Mojca

From sebastian.miele at gmail.com  Thu Nov  8 21:59:12 2018
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Thu, 8 Nov 2018 21:59:12 +0100
Subject: [dev-context] ARMv7 hardfp or softfp detection
In-Reply-To: <CAG5iGsBQf79o=_vt9-t-GL7joR_zsuUm4RR+VhJXt9oembEtuQ@mail.gmail.com>
References: <CA+ABrMwF66ymGcuWFDJrGjp00_CVf4JWhH_tvb=TJ8FfcpTyYQ@mail.gmail.com>
 <CAG5iGsBQf79o=_vt9-t-GL7joR_zsuUm4RR+VhJXt9oembEtuQ@mail.gmail.com>
Message-ID: <CA+ABrMww+ynjJYSSNXMO-LmxdZ0B_ojRLAhgpn=WKNpRyi4Z1w@mail.gmail.com>

On Mon, Nov 5, 2018 at 9:44 PM luigi scarso <luigi.scarso at gmail.com> wrote:
>
> [..]
>
> Are you using 32bit linux-gnueabi ?

I am tinkering with an Alpine Linux chroot on my Samsung Galaxy Note 2
which has a custom rom flashed. Alpine Linux uses musl libc. First I
wanted to go with a distro based on glibc (Arch Linux ARM), but that
did not work, because recent versions of glibc require a Kernel more
recent that what is available for the Note 2.

Inside the Alpine Linux chroot 'uname -a' says:

Linux auge 3.0.101-ReTRoKeRNeL-g6242745fe35 #3 SMP PREEMPT Fri Aug 3
16:31:55 EEST 2018 armv7l Linux.

first-setup.sh distinguishes between musl libc and glibc only for
Linux on i*86 and x86_64|ia64, and not for Linux on arm*.

After

rsync -rlptv rsync://contextgarden.net/minimals/setup/linux-armhf/bin .

the command 'ls -l "$PWD/bin/luatex"' returns:

-rwxr-xr-x 1 w w 5720504 Oct 25 08:16 /home/w/borg/tex/con/bin/luatex

which is correct. But

"$PWD/bin/luatex --version"

returns the rather strange error:

zsh: no such file or directory: /home/w/borg/tex/con/bin/luatex

It probably has to do with the circumstance that 'readelf -a
"$PWD/bin/luatex" | grep -i glibc' succeeds, while 'readelf -a
/bin/busybox | grep -i glibc' does not.

I probably do not use linux-gnueabi, but something like
armv7a-unknown-linux-musleabihf, although I still find this stuff very
confusing.

This was just an experiment. I do not really need this.

From sebastian.miele at gmail.com  Thu Nov  8 22:21:03 2018
From: sebastian.miele at gmail.com (Sebastian Miele)
Date: Thu, 8 Nov 2018 22:21:03 +0100
Subject: [dev-context] ARMv7 hardfp or softfp detection
In-Reply-To: <CALBOmsY6vtihmEwpu+5b6wy42__dKbpvVdnDCu5FCzLMKSgT1w@mail.gmail.com>
References: <CA+ABrMwF66ymGcuWFDJrGjp00_CVf4JWhH_tvb=TJ8FfcpTyYQ@mail.gmail.com>
 <CALBOmsY6vtihmEwpu+5b6wy42__dKbpvVdnDCu5FCzLMKSgT1w@mail.gmail.com>
Message-ID: <CA+ABrMyzz__ov5f5MZ-y7E-k8pwgCb1KMCci24WgYuyaKpOXmg@mail.gmail.com>

On Tue, Nov 6, 2018 at 7:45 AM Mojca Miklavec
<mojca.miklavec.lists at gmail.com> wrote:
>
> A few years back we had a long discussion with the
> consensus that we should have used
>
>     if [ $? != 0 ]; then

This seems to have been fixed in the mean time.

> We kept building the armel binaries on some super strange hardware
> configuration which Boris provided to us. At some point he was no
> longer able to provide the hardware, we no longer built the binaries &
> provided them, and I don't think that anybody complained since.
>
> The armhf binaries are built on RPi in Hans' cellar running Raspbian.

As noted in the previous mail I do not really need it in the
foreseeable future. Apart from that there are additional problems like
glibc vs. musl libc and maybe different versions of floating point
units.

If I or someone else really needs it in the future I would rather try
to adopt what is running on the RPi in Hans' cellar to variable qemu
guest and/or to variable cross compilation toolchains.

From mojca.miklavec.lists at gmail.com  Fri Nov  9 20:39:43 2018
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 9 Nov 2018 20:39:43 +0100
Subject: [dev-context] ARMv7 hardfp or softfp detection
In-Reply-To: <CA+ABrMyzz__ov5f5MZ-y7E-k8pwgCb1KMCci24WgYuyaKpOXmg@mail.gmail.com>
References: <CA+ABrMwF66ymGcuWFDJrGjp00_CVf4JWhH_tvb=TJ8FfcpTyYQ@mail.gmail.com>
 <CALBOmsY6vtihmEwpu+5b6wy42__dKbpvVdnDCu5FCzLMKSgT1w@mail.gmail.com>
 <CA+ABrMyzz__ov5f5MZ-y7E-k8pwgCb1KMCci24WgYuyaKpOXmg@mail.gmail.com>
Message-ID: <CALBOmsbhf-ZAcEkcoOVsm6inTm4o__G7RBDh-duW=k0Nm=6ymA@mail.gmail.com>

On Thu, 8 Nov 2018 at 22:21, Sebastian Miele wrote:
> On Tue, Nov 6, 2018 at 7:45 AM Mojca Miklavec wrote:
> >
> > A few years back we had a long discussion with the
> > consensus that we should have used
> >
> >     if [ $? != 0 ]; then
>
> This seems to have been fixed in the mean time.

Yes, I fixed it after you notified us about the problem (thank you).

> > We kept building the armel binaries on some super strange hardware
> > configuration which Boris provided to us. At some point he was no
> > longer able to provide the hardware, we no longer built the binaries &
> > provided them, and I don't think that anybody complained since.
> >
> > The armhf binaries are built on RPi in Hans' cellar running Raspbian.
>
> As noted in the previous mail I do not really need it in the
> foreseeable future. Apart from that there are additional problems like
> glibc vs. musl libc and maybe different versions of floating point
> units.
>
> If I or someone else really needs it in the future I would rather try
> to adopt what is running on the RPi in Hans' cellar to variable qemu
> guest and/or to variable cross compilation toolchains.

We could run a cross-compiler if needed. There are too many different
platforms to cover them all, but if there is a reasonable demand (note
that we do have a very small number of users for some platforms), we
can try to figure out if we could add it.

Regarding musl: support for musl binaries has only been added
recently. I did not attempt doing the same check on arm for various
reasons, the most important one being that we don't even have the
binaries for it. (I could add a check and prevent the default binaries
to work, but we could not support the platform out of the box anyway
until we add everything that's needed.)

Let me know if you think there is still something we should do now.

Mojca

From wolfgang.schuster.lists at gmail.com  Sat Nov 10 11:55:40 2018
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sat, 10 Nov 2018 11:55:40 +0100
Subject: [dev-context] lxml-ini.mkiv
Message-ID: <aa6b6b5a-2ed6-0d8d-86c7-58472b800e8f@gmail.com>

Hi,

there is a \v!yes missing on line 408.

\appendtoks
-Â Â  \doif{\directxmlparameter\c!entities}\clf_xmlloadentities
+Â Â  \doif{\directxmlparameter\c!entities}\v!yes\clf_xmlloadentities
\to \everysetupxml

Wolfgang


From wolfgang.schuster.lists at gmail.com  Sat Nov 10 12:00:45 2018
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sat, 10 Nov 2018 12:00:45 +0100
Subject: [dev-context] x-setups-basics.mkiv
Message-ID: <e3c94706-8390-1215-5aa5-13b5cef5457b@gmail.com>

Hi Hans,

can you add

 Â Â Â  \setupxml[\c!entities=\v!yes]

to the module because I need a few entities (&blank; and &percnt;) from 
the extended list.

Wolfgang


From j.hagen at xs4all.nl  Sat Nov 10 12:13:01 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Sat, 10 Nov 2018 12:13:01 +0100
Subject: [dev-context] x-setups-basics.mkiv
In-Reply-To: <e3c94706-8390-1215-5aa5-13b5cef5457b@gmail.com>
References: <e3c94706-8390-1215-5aa5-13b5cef5457b@gmail.com>
Message-ID: <3c3cbf52-f006-8431-4304-9932513e4cee@xs4all.nl>

On 11/10/2018 12:00 PM, Wolfgang Schuster wrote:
> Hi Hans,
> 
> can you add
> 
>  Â Â Â  \setupxml[\c!entities=\v!yes]
> 
> to the module because I need a few entities (&blank; and &percnt;) from 
> the extended list.
ok


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From wolfgang.schuster.lists at gmail.com  Thu Nov 15 16:25:24 2018
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Thu, 15 Nov 2018 16:25:24 +0100
Subject: [dev-context] tabl-xtb.lua xtables and samepage option
Message-ID: <680600df-2bf2-3076-cb3a-7db815c49d8d@gmail.com>

Hi,

the samepage option for xtables doesnât work because of bugs in the Lua 
code.

1. On line 895 the value has to be taken from the rp-variable itself.

2. On line 905 the second index to get the value for the samepage option 
is missing.

function xtables.construct()
...
 Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  result[nofr] = {
 Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  hbox,
 Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  size,
 Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  i < nofrange and rowdistance > 0 and rowdistance or 
false, -- might move
 Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  false,
-Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  rp and rp.samepage or false,
+Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  rp or false,
 Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  }
 Â Â Â Â Â Â Â Â Â Â Â  end
 Â Â Â Â Â Â Â  end
 Â Â Â Â Â Â Â  if nofr > 0 then
 Â Â Â Â Â Â Â Â Â Â Â  -- the [5] slot gets the after break
 Â Â Â Â Â Â Â Â Â Â Â  result[1]Â Â  [5] = false
 Â Â Â Â Â Â Â Â Â Â Â  result[nofr][5] = false
 Â Â Â Â Â Â Â Â Â Â Â  for i=2,nofr-1 do
-Â Â Â Â Â Â Â Â Â Â Â Â Â Â  local r = result[i]
+Â Â Â Â Â Â Â Â Â Â Â Â Â Â  local r = result[i][5]
 Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if r == v_both or r == v_before then
 Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  result[i-1][5] = true
 Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  elseif r == v_after then
 Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  result[i][5] = true
 Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  end
 Â Â Â Â Â Â Â Â Â Â Â  end
 Â Â Â Â Â Â Â  end
 Â Â Â Â Â Â Â  return result
 Â Â Â  end
...
end

Wolfgang

From j.hagen at xs4all.nl  Fri Nov 16 15:45:34 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Fri, 16 Nov 2018 15:45:34 +0100
Subject: [dev-context] tabl-xtb.lua xtables and samepage option
In-Reply-To: <680600df-2bf2-3076-cb3a-7db815c49d8d@gmail.com>
References: <680600df-2bf2-3076-cb3a-7db815c49d8d@gmail.com>
Message-ID: <25b4b47b-6f98-25f9-7def-9746be7cde1d@xs4all.nl>

On 11/15/2018 4:25 PM, Wolfgang Schuster wrote:
> Hi,
> 
> the samepage option for xtables doesnât work because of bugs in the Lua 
> code.
> 
> 1. On line 895 the value has to be taken from the rp-variable itself.
> 
> 2. On line 905 the second index to get the value for the samepage option 
> is missing.
ok .. no beta yet (sometime next week as i'm doing some experiments and 
in the process reshuffle some lua code)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From wolfgang.schuster.lists at gmail.com  Sun Nov 18 17:54:10 2018
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Sun, 18 Nov 2018 17:54:10 +0100
Subject: [dev-context] core-env.mkiv
Message-ID: <d23df437-3fe8-f593-9c6b-249695ede23b@gmail.com>

Hi,

on line 800 you pick the wrong number of arguments.

\unexpanded\def\doifelseemptyvariable#1#2%
 Â %{\edef\m_syst_string_one{\csname\??variables\ifcsname\??variables#1:#2\endcsname#1:#2\else:\fi\endcsname}%
 Â  {\edef\m_syst_string_one{\begincsname\??variables#1:#2\endcsname}%
 Â Â  \ifx\m_syst_string_one\empty
-Â Â Â  \expandafter\firstoffourarguments
+Â Â Â  \expandafter\firstoftwoarguments
 Â Â  \else
 Â Â Â Â  \expandafter\secondoftwoarguments
 Â Â  \fi}

Wolfgang


From wolfgang.schuster.lists at gmail.com  Mon Nov 26 18:50:01 2018
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Mon, 26 Nov 2018 18:50:01 +0100
Subject: [dev-context] x-setups-basics.mkiv
Message-ID: <7e594c1a-d75b-38d4-9a94-1c3b7406eb63@gmail.com>

Hi Hans,

the argument check in \cmd_show_setup_yes has to go away.

\def\cmd_show_setup_yes[#1]%
- {\iffirstargument
-Â Â Â  \cmd_show_setup_nop{#1}%
-Â  \else
-Â Â Â  \expandafter\cmd_show_setup_nop
-Â  \fi}
+ {\cmd_show_setup_nop{#1}}

Wolfgang


From j.hagen at xs4all.nl  Mon Nov 26 19:00:42 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Mon, 26 Nov 2018 19:00:42 +0100
Subject: [dev-context] x-setups-basics.mkiv
In-Reply-To: <7e594c1a-d75b-38d4-9a94-1c3b7406eb63@gmail.com>
References: <7e594c1a-d75b-38d4-9a94-1c3b7406eb63@gmail.com>
Message-ID: <1932e85d-b42e-2765-7487-f8152b9ad40a@xs4all.nl>

On 11/26/2018 6:50 PM, Wolfgang Schuster wrote:
> Hi Hans,
> 
> the argument check in \cmd_show_setup_yes has to go away.
> 
> \def\cmd_show_setup_yes[#1]%
> - {\iffirstargument
> -Â Â Â  \cmd_show_setup_nop{#1}%
> -Â  \else
> -Â Â Â  \expandafter\cmd_show_setup_nop
> -Â  \fi}
> + {\cmd_show_setup_nop{#1}}
ok
-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Fri Dec 14 14:29:48 2018
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 14 Dec 2018 14:29:48 +0100
Subject: [dev-context] interface file typos and a question
Message-ID: <8FDB876C-987A-44D1-91D3-CAD2DCEF8106@elvenkind.com>

Hi,

Whenever I have a few off minutes, I am working on an extension to the wiki. 
The idea is to have an extra extension tag <syntax>â¦</syntax> which fetches
the html syntax of a ConTeXt command from a wiki database table. More later
on that. While working on that though, I found a few small issues with the 
xml interface files.


Here are a few typos (character swaps):

<cd:command ategory="fonts" clevel="style" file="font-ini.mkiv" name="switchstyleonlyâ>
<cd:command evel="document" file="buff-ini.mkiv" generated="yes" lcategory="buffer" name="buffer" type="environment" variant="instanceâ>
<cd:command ategory="fonts" clevel="style" file="font-fea.mkvi" name="subtractfeature" variant="direct">

And these two are the only âsystem conditionalâs, which probably means they should just be âsystemâ:

<cd:command category="verbatim" file="buff-ver.mkiv" level="system conditional" name="doifelsetypingfile">
<cd:command category="verbatim" file="buff-ver.mkiv" level="system conditional" name="doiftypingfileelse">

A few other commands have no level attribute at all (maybe intentional):

<cd:command category="xml" file="strc-tag.mkiv" name="element" type="environmentâ>
<cd:command category="whitespace" file="spac-ver.mkiv" name="unpacked" type="environmentâ/>
<cd:command category="whitespace" file="spac-ver.mkiv" name="locallinecorrection" type="environmentâ>
<cd:command category="columns" file="page-mul.mkiv" name="columnspan" type="environmentâ>
<cd:command category="colors" file="colo-ini.mkiv" name="definepalet">
<cd:command category="colors" file="colo-ini.mkiv" name="transparent" type="environment">

Besides those, I also have an actual question: 

Is there an intended difference between

   <cd:sequence>
     <cd:instance value="framed"/>
   </cd:sequence>

and    
   <cd:sequence>
     <cd:variable value="highlight"/>
   </cd:sequence>

(cd:instance versus cd:variable)?

Best wishes,
Taco




From wolfgang.schuster.lists at gmail.com  Fri Dec 14 20:59:43 2018
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Fri, 14 Dec 2018 20:59:43 +0100
Subject: [dev-context] interface file typos and a question
In-Reply-To: <8FDB876C-987A-44D1-91D3-CAD2DCEF8106@elvenkind.com>
References: <8FDB876C-987A-44D1-91D3-CAD2DCEF8106@elvenkind.com>
Message-ID: <5070eb0e-7d51-c8b5-c958-878f12821828@gmail.com>

Taco Hoekwater schrieb am 14.12.18 um 14:29:
> Hi,
>
> Whenever I have a few off minutes, I am working on an extension to the wiki.
> The idea is to have an extra extension tag <syntax>â¦</syntax> which fetches
> the html syntax of a ConTeXt command from a wiki database table. More later
> on that. While working on that though, I found a few small issues with the
> xml interface files.
>
>
> Here are a few typos (character swaps):
>
> <cd:command ategory="fonts" clevel="style" file="font-ini.mkiv" name="switchstyleonlyâ>
> <cd:command evel="document" file="buff-ini.mkiv" generated="yes" lcategory="buffer" name="buffer" type="environment" variant="instanceâ>
> <cd:command ategory="fonts" clevel="style" file="font-fea.mkvi" name="subtractfeature" variant="direct">
Fixed (copy and paste error).
> And these two are the only âsystem conditionalâs, which probably means they should just be âsystemâ:
>
> <cd:command category="verbatim" file="buff-ver.mkiv" level="system conditional" name="doifelsetypingfile">
> <cd:command category="verbatim" file="buff-ver.mkiv" level="system conditional" name="doiftypingfileelse">
Fixed (should be a argument for the category attribute).
> A few other commands have no level attribute at all (maybe intentional):
>
> <cd:command category="xml" file="strc-tag.mkiv" name="element" type="environmentâ>
> <cd:command category="whitespace" file="spac-ver.mkiv" name="unpacked" type="environmentâ/>
> <cd:command category="whitespace" file="spac-ver.mkiv" name="locallinecorrection" type="environmentâ>
> <cd:command category="columns" file="page-mul.mkiv" name="columnspan" type="environmentâ>
> <cd:command category="colors" file="colo-ini.mkiv" name="definepalet">
> <cd:command category="colors" file="colo-ini.mkiv" name="transparent" type="environment">
Added (I guess I forgot to add them but Idris never complaint about the 
messing attributes).
> Besides those, I also have an actual question:
>
> Is there an intended difference between
>
>     <cd:sequence>
>       <cd:instance value="framed"/>
>     </cd:sequence>
>
> and
>     <cd:sequence>
>       <cd:variable value="highlight"/>
>     </cd:sequence>
>
> (cd:instance versus cd:variable)?
I canât remember the details but with variable the generated commands 
shows always
the same name in the output but instance generates a general version of 
the command
(which uses slanted uppercase characters, e.g. 
\FRAMED[..,..=..,..]{...}) and also
the output for the instances (e.g. \inframed).

The purpose of this is to have one entry for a section types (chapter, 
section etc.)
with a single definition while in the past each type had its own entry.

Wolfgang


From taco at elvenkind.com  Mon Dec 17 09:29:09 2018
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 17 Dec 2018 09:29:09 +0100
Subject: [dev-context] interface file typos and a question
In-Reply-To: <5070eb0e-7d51-c8b5-c958-878f12821828@gmail.com>
References: <8FDB876C-987A-44D1-91D3-CAD2DCEF8106@elvenkind.com>
 <5070eb0e-7d51-c8b5-c958-878f12821828@gmail.com>
Message-ID: <87BB57C1-0748-4D9D-A60B-F5C9A63EE251@elvenkind.com>

Hi,

>> Besides those, I also have an actual question:
>> 
>> Is there an intended difference between
>> 
>>    <cd:sequence>
>>      <cd:instance value="framed"/>
>>    </cd:sequence>
>> 
>> and
>>    <cd:sequence>
>>      <cd:variable value="highlight"/>
>>    </cd:sequence>
>> 
>> (cd:instance versus cd:variable)?
> I canât remember the details but with variable the generated commands shows always
> the same name in the output but instance generates a general version of the command
> (which uses slanted uppercase characters, e.g. \FRAMED[..,..=..,..]{...}) and also
> the output for the instances (e.g. \inframed).
> 
> The purpose of this is to have one entry for a section types (chapter, section etc.)
> with a single definition while in the past each type had its own entry.

Ah! And those instances are stored in the <cd:instances>, I see now. Thanks for
clearing that up. 

Best wishes,
Taco

Taco Hoekwater
Elvenkind BV





From j.hagen at xs4all.nl  Mon Dec 17 11:47:42 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Mon, 17 Dec 2018 11:47:42 +0100
Subject: [dev-context] interface file typos and a question
In-Reply-To: <87BB57C1-0748-4D9D-A60B-F5C9A63EE251@elvenkind.com>
References: <8FDB876C-987A-44D1-91D3-CAD2DCEF8106@elvenkind.com>
 <5070eb0e-7d51-c8b5-c958-878f12821828@gmail.com>
 <87BB57C1-0748-4D9D-A60B-F5C9A63EE251@elvenkind.com>
Message-ID: <f31a14b1-007c-1a64-d42a-79fac8438518@xs4all.nl>

On 12/17/2018 9:29 AM, Taco Hoekwater wrote:
> Hi,
> 
>>> Besides those, I also have an actual question:
>>>
>>> Is there an intended difference between
>>>
>>>     <cd:sequence>
>>>       <cd:instance value="framed"/>
>>>     </cd:sequence>
>>>
>>> and
>>>     <cd:sequence>
>>>       <cd:variable value="highlight"/>
>>>     </cd:sequence>
>>>
>>> (cd:instance versus cd:variable)?
>> I canât remember the details but with variable the generated commands shows always
>> the same name in the output but instance generates a general version of the command
>> (which uses slanted uppercase characters, e.g. \FRAMED[..,..=..,..]{...}) and also
>> the output for the instances (e.g. \inframed).
>>
>> The purpose of this is to have one entry for a section types (chapter, section etc.)
>> with a single definition while in the past each type had its own entry.
> 
> Ah! And those instances are stored in the <cd:instances>, I see now. Thanks for
> clearing that up.
indeed, the idea was that it saves bytes and prevents errors (omissions)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From wolfgang.schuster.lists at gmail.com  Thu Dec 27 11:18:58 2018
From: wolfgang.schuster.lists at gmail.com (Wolfgang Schuster)
Date: Thu, 27 Dec 2018 11:18:58 +0100
Subject: [dev-context] spac-hor.mkiv: Missing delimiter for \quad
Message-ID: <dfb442be-7ed2-c471-f3c9-e8ac7c8c40b5@gmail.com>

Hi Hans,

the definitions for \quad, \qquad and \enskip need a \relax at the end.

-Â Â  \unexpanded\def\enskip{\hskip.5\emwidth}
-Â Â  \unexpanded\def\quadÂ  {\hskipÂ  \emwidth}
-Â Â  \unexpanded\def\qquad {\hskip 2\emwidth}
+Â Â  \unexpanded\def\enskip{\hskip.5\emwidth\relax}
+Â Â Â  \unexpanded\def\quadÂ  {\hskipÂ  \emwidth\relax}
+Â Â  \unexpanded\def\qquad {\hskip 2\emwidth\relax}

Wolfgang


From j.hagen at xs4all.nl  Thu Dec 27 11:37:36 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Thu, 27 Dec 2018 11:37:36 +0100
Subject: [dev-context] spac-hor.mkiv: Missing delimiter for \quad
In-Reply-To: <dfb442be-7ed2-c471-f3c9-e8ac7c8c40b5@gmail.com>
References: <dfb442be-7ed2-c471-f3c9-e8ac7c8c40b5@gmail.com>
Message-ID: <30773acc-1f46-f565-b531-b8581cf864aa@xs4all.nl>

On 12/27/2018 11:18 AM, Wolfgang Schuster wrote:
> Hi Hans,
> 
> the definitions for \quad, \qquad and \enskip need a \relax at the end.
> 
> -Â Â  \unexpanded\def\enskip{\hskip.5\emwidth}
> -Â Â  \unexpanded\def\quadÂ  {\hskipÂ  \emwidth}
> -Â Â  \unexpanded\def\qquad {\hskip 2\emwidth}
> +Â Â  \unexpanded\def\enskip{\hskip.5\emwidth\relax}
> +Â Â Â  \unexpanded\def\quadÂ  {\hskipÂ  \emwidth\relax}
> +Â Â  \unexpanded\def\qquad {\hskip 2\emwidth\relax}
indeed

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

